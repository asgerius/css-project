[{"tags": ["ruby", "if-statement"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1533770761, "post_id": 51756944, "comment_id": 90473315, "body": "<code>if</code> (and everything else) is an expression in Ruby. See\u2026 <a href=\"https://stackoverflow.com/a/12061572/707111\">stackoverflow.com/a/12061572/707111</a>, I guess? Anyway, once you\u2019re familiar with this concept that applies to Ruby, it\u2019ll be readable."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533776869, "post_id": 51756944, "comment_id": 90474489, "body": "Assignment is also an expression so <code>if identifier = chunk[IDENTIFIER, 1]</code> is equivalent to <code>identifier = chunk[IDENTIFIER, 1]; if identifier</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533797750, "post_id": 51756944, "comment_id": 90480234, "body": "<code>==</code> tests for equality, <code>=</code> is an assignment operator."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1533798211, "post_id": 51757562, "comment_id": 90480431, "body": "A common way to indicate that the assignment is intended is to wrap it in parentheses, i.e. <code>if (identifier = chunk[IDENTIFIER, 1])</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533798819, "post_id": 51757562, "comment_id": 90480736, "body": "@Stefan, of course readers unfamiliar with that hint may conclude that the author didn&#39;t need the parentheses as well as having intended to write <code>==</code>. Perhaps we need a convention that hits the reader over the head: <code>(((identifier = chunk[IDENTIFIER, 1])))</code>. (Yes, your suggestion is a good one.)"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 6, "last_activity_date": 1533829230, "last_edit_date": 1533829230, "creation_date": 1533777069, "answer_id": 51757562, "question_id": 51756944, "link": "https://stackoverflow.com/questions/51756944/rubys-variable-equals-if-variable-equals-method/51757562#51757562", "title": "Ruby&#39;s variable equals if variable equals method?", "body": "<p>Yes, it can be confusing, in part because one's first reaction to seeing <code>if identifier = chunk[IDENTIFIER, 1]</code> may be that it's probably a bug, that the author meant <code>if identifier == chunk[IDENTIFIER, 1]</code>.</p>\n\n<p>The code block given in the question is probably equivalent to:</p>\n\n<pre><code>tokenizer =\n  if chunk[IDENTIFIER, 1]\n    IdentifierTokenizer.new(chunk[IDENTIFIER, 1], tokenizer).tokenize\n  elsif chunk[CONSTANT, 1]\n    ConstantTokenizer.new(chunk[CONSTANT, 1], tokenizer).tokenize\n  elsif chunk[NUMBER, 1]\n    NumberTokenizer.new(chunk[NUMBER, 1], tokenizer).tokenize\n  ..\n</code></pre>\n\n<p>Rather than computing <code>chunk[IDENTIFIER, 1]</code>, <code>chunk[CONSTANT, 1]</code> and <code>chunk[NUMBER, 1]</code> twice, those values are assigned to variables (<code>identifier</code>, <code>constant</code>, <code>number</code>) the first time they are calculated. (Those assignments are evaluated before <code>if</code> and <code>elsif</code> are applied.) This is commonly done when such calculations are costly or have an undesired side effect when performed more than once. The use of temporary variables in this way also <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow noreferrer\">DRYs</a> the code, but other approaches that achieve the same objective may be preferable. I personally avoid such inline variable assignments, in part because I regard them as ugly.</p>\n\n<p>One alternative that may be more clear, and which DRYs the code even more, is the following.</p>\n\n<pre><code>tokenizer =\n  tokenit(IDENTIFIER, IdentifierTokenize, tokenizer) ||\n  tokenit(CONSTANT,   ConstantTokenize,   tokenizer) ||\n  tokenit(NUMBER,     NumberTokenize,     tokenizer) ||\n  ...\n\ndef tokenit(type, class, tokenizer)\n  ch = chunk[type, 1]\n  if ch\n    class.public_send(:new, ch, tokenizer).tokenize\n  else\n    false\n  end\nend\n</code></pre>\n\n<p>This of course assumes that when <code>ch</code> is truthy <code>class.public_send(:new, ch, tokenizer).tokenize</code> is also truthy.</p>\n"}], "owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "accepted_answer_id": 51757562, "answer_count": 1, "score": 0, "last_activity_date": 1533829230, "creation_date": 1533770502, "question_id": 51756944, "link": "https://stackoverflow.com/questions/51756944/rubys-variable-equals-if-variable-equals-method", "title": "Ruby&#39;s variable equals if variable equals method?", "body": "<p>I am reading through <a href=\"http://createyourproglang.com/\" rel=\"nofollow noreferrer\">createyourlang</a> book and saw a code snippet that looks like this:</p>\n\n<pre><code>  tokenizer = if identifier = chunk[IDENTIFIER, 1]\n                IdentifierTokenizer.new(identifier, tokenizer).tokenize\n              elsif constant = chunk[CONSTANT, 1]\n                ConstantTokenizer.new(constant, tokenizer).tokenize\n              elsif number = chunk[NUMBER, 1]\n                ...\n</code></pre>\n\n<p>I find it confusing having two equal signs on the same line. What does it mean to have <code>A = if B = C</code>?</p>\n\n<p><em>If you're wondering what chunk is, assume chunk is string <code>\"hello\"</code> and <code>chunk[IDENTIFIER,1]</code> equals to <code>\"hello\"</code> and the other <code>chunk[OTHER_CONST,1]</code> equals to <code>nil</code>. The function works. You can find the source code repo <a href=\"https://github.com/IggHub/awesome-lang/blob/master/lexer/lexer.rb\" rel=\"nofollow noreferrer\">here</a>.</em> I am mainly curious how to read this function/ if there is a better way to rewrite this code to make it more readable?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "edited": false, "score": 0, "creation_date": 1533767315, "post_id": 51756511, "comment_id": 90472530, "body": "The error should also specify which file and line the error is occurring on. Could you add that information to your question?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533797432, "post_id": 51756511, "comment_id": 90480052, "body": "From the code you provided, it looks like <code>user</code> is <code>nil</code> inside your mailer, which is being passed from controller action <code>invitation_confirmation</code>. So, <code>User.find(params[:id])</code> must be returning <code>nil</code>. Can you share the output of <code>rake routes</code> and also the server logs for the request?"}, {"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1533890163, "post_id": 51756511, "comment_id": 90522067, "body": "please share the rake routes and also the log of request which you&#39;re sending."}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533797336, "post_id": 51758474, "comment_id": 90480008, "body": "The error <code>undefined method &#39;email&#39; for nil:NilClass.</code> suggests that <code>user</code> is <code>nil</code> in mailer. If you are assigning <code>user</code> to <code>@user</code>, then <code>@user</code> will also be <code>nil</code>. This doesn&#39;t solve the problem."}], "tags": [], "owner": {"reputation": 1285, "user_id": 3491275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/571855393/picture?type=large", "display_name": "oowowaee", "link": "https://stackoverflow.com/users/3491275/oowowaee"}, "is_accepted": false, "score": 0, "last_activity_date": 1533786087, "creation_date": 1533786087, "answer_id": 51758474, "question_id": 51756511, "link": "https://stackoverflow.com/questions/51756511/button-to-send-email-in-rails/51758474#51758474", "title": "Button to send email in rails", "body": "<p>The error indicates that user is nil inside of your UserMailer.invitation_confirmation method.</p>\n\n<p>Try:</p>\n\n<pre><code>def invitation_confirmation(user)\n    @user = user\n    mail(:to =&gt; \"&lt;#{@user.email}&gt;\", subject: \"Notification\")\nend \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 973, "user_id": 9989384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/530602201f9551563176b0b648b7d50b?s=128&d=identicon&r=PG&f=1", "display_name": "Cryptex Technologies", "link": "https://stackoverflow.com/users/9989384/cryptex-technologies"}, "is_accepted": false, "score": 0, "last_activity_date": 1533818552, "creation_date": 1533818552, "answer_id": 51767373, "question_id": 51756511, "link": "https://stackoverflow.com/questions/51756511/button-to-send-email-in-rails/51767373#51767373", "title": "Button to send email in rails", "body": "<p>Try this</p>\n\n<pre><code>def invitation_confirmation(user)\n  mail(to: user.email, subject: \"Notification\")\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1533890379, "creation_date": 1533890379, "answer_id": 51782391, "question_id": 51756511, "link": "https://stackoverflow.com/questions/51756511/button-to-send-email-in-rails/51782391#51782391", "title": "Button to send email in rails", "body": "<p>Just change your code of show.html.erb to this if @user object is not being null:</p>\n\n<pre><code>&lt;% if logged_in? &amp;&amp; current_user.admin? || current_user.superadmin? %&gt;\n  &lt;%= link_to \"Send Invitation Email\", send_invitation_email_path(id: @user.id), class: \"btn btn-xs btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10200222"}, "is_accepted": false, "score": 0, "last_activity_date": 1533910293, "creation_date": 1533910293, "answer_id": 51788398, "question_id": 51756511, "link": "https://stackoverflow.com/questions/51756511/button-to-send-email-in-rails/51788398#51788398", "title": "Button to send email in rails", "body": "<pre><code>def invitation_confirmation\n    @user = User.find(params[:format]) \n    **@user.create_reset_digest**   \n    UserMailer.invitation_confirmation(@user).deliver\n    flash[:notice] = \"Invitation email has been sent.\"\n    redirect_to user_path(@user)\nend\n</code></pre>\n\n<p>I was doing a mistake in the line in bold. I have not created_reset_digest. It is working now. Thankyou all.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10200222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1533910293, "creation_date": 1533767169, "last_edit_date": 1533768390, "question_id": 51756511, "link": "https://stackoverflow.com/questions/51756511/button-to-send-email-in-rails", "title": "Button to send email in rails", "body": "<p>I have try to add a button on user show page to send email on the address of the user mentioned in the user table.When I click on Send Invitation Email, i am running through an error <strong>undefined method `email' for nil:NilClass</strong>. Kindly let me know the mistake i am doing.</p>\n\n<p>routes.rb</p>\n\n<pre><code>get 'send_invitation_email', to: 'users#invitation_confirmation'\n</code></pre>\n\n<p>invitation_confirmation.text.erb</p>\n\n<pre><code>Hi,\n\nThank you for setting up an account. Please click on the link in that email to start using the system. \n\n&lt;%= edit_password_reset_url(@user.reset_token, email: @user.email) %&gt;\n</code></pre>\n\n<p>user_mailer.rb</p>\n\n<pre><code>def invitation_confirmation(user)\n    @user = user\n    mail(:to =&gt; \"&lt;#{user.email}&gt;\", subject: \"Notification\")\nend \n</code></pre>\n\n<p>users_controller.rb</p>\n\n<pre><code>def invitation_confirmation\n    @user = User.find(params[:id])  \n    UserMailer.invitation_confirmation(@user).deliver\n    flash[:notice] = \"Invitation email has been sent.\"\n    redirect_to user_path(@user)\nend\n</code></pre>\n\n<p>show.html.erb</p>\n\n<pre><code>&lt;% if logged_in? &amp;&amp; current_user.admin? || current_user.superadmin? %&gt;\n   &lt;%= link_to \"Send Invitation Email\", send_invitation_email_path(@user), class: \"btn btn-xs btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Update</p>\n\n<pre><code>mail(:to =&gt; \"&lt;#{user.email}&gt;\", subject: \"Notification\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "scope", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1533767086, "post_id": 51756458, "comment_id": 90472468, "body": "&quot;don&#39;t understand very well how to do it&quot; - but you already did it. Use it like this: <code>MyModel.by_cities([city1, city2])</code>"}, {"owner": {"reputation": 93, "user_id": 10028467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eITkp.jpg?s=128&g=1", "display_name": "Daniel Disblu", "link": "https://stackoverflow.com/users/10028467/daniel-disblu"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1533767516, "post_id": 51756458, "comment_id": 90472580, "body": "doesn&#39;t work that way, I already tried, when I write <code>MyModel.by_cities(&#39;New York&#39;, &#39;San Fransisco&#39;)</code> I get this error:  <code>ArgumentError: wrong number of arguments (given 2, expected 1)</code>"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1533768120, "post_id": 51756458, "comment_id": 90472726, "body": "Have you tried <code>scope :by_cities, -&gt; (*cities) { joins(:restaurant).where(&#39;restaurants.city IN (?)&#39;, cities) }</code>? BTW, the <a href=\"https://guides.rubyonrails.org/active_record_querying.html#scopes\" rel=\"nofollow noreferrer\">docs</a> state <i>&quot;Using a class method is the preferred way to accept arguments for scopes.&quot;</i>"}, {"owner": {"reputation": 93, "user_id": 10028467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eITkp.jpg?s=128&g=1", "display_name": "Daniel Disblu", "link": "https://stackoverflow.com/users/10028467/daniel-disblu"}, "edited": false, "score": 0, "creation_date": 1533769209, "post_id": 51756458, "comment_id": 90472972, "body": "I already try that too, fortunately, I don&#39;t get an error but when I&#39;m getting the consult in the database I don&#39;t get all the info, only one city, the return of the logs was this: <code>SELECT &quot;vacancies&quot;.* FROM &quot;vacancies&quot; INNER JOIN &quot;restaurants&quot; ON &quot;restaurants&quot;.&quot;id&quot; = &quot;vacancies&quot;.&quot;restaurant_id&quot; WHERE (restaurants.city IN (&#39;Monterrey&#39;))</code> and I want the same but with multiple values, like this: <code>SELECT &quot;vacancies&quot;.* FROM &quot;vacancies&quot; INNER JOIN &quot;restaurants&quot; ON &quot;restaurants&quot;.&quot;id&quot; = &quot;vacancies&quot;.&quot;restaurant_id&quot; WHERE (restaurants.city IN (&#39;Monterrey, SanPedro&#39;))</code>"}, {"owner": {"reputation": 93, "user_id": 10028467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eITkp.jpg?s=128&g=1", "display_name": "Daniel Disblu", "link": "https://stackoverflow.com/users/10028467/daniel-disblu"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1533769679, "post_id": 51756458, "comment_id": 90473074, "body": "I update the info @jvillian"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1533799910, "post_id": 51756458, "comment_id": 90481278, "body": "&quot;when I write <code>MyModel.by_cities(&#39;New York&#39;, &#39;San Fransisco&#39;)</code>&quot; - but that&#39;s not what i wrote. My example has an array, yours doesn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 10028467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eITkp.jpg?s=128&g=1", "display_name": "Daniel Disblu", "link": "https://stackoverflow.com/users/10028467/daniel-disblu"}, "edited": false, "score": 0, "creation_date": 1533771437, "post_id": 51756960, "comment_id": 90473474, "body": "thank you for your response, it helps me, I didn&#39;t know about <code>to_query</code>, it will help me a lot in the future!"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 2, "last_activity_date": 1533770670, "creation_date": 1533770670, "answer_id": 51756960, "question_id": 51756458, "link": "https://stackoverflow.com/questions/51756458/scope-parameter-as-array-in-rails-5/51756960#51756960", "title": "Scope parameter as array in Rails 5", "body": "<p>Minimally, there is a problem with how you're forming your url query, here: </p>\n\n<pre><code>http://localhost:3000/v1/vacancies?city=SanPedro&amp;Monterrey\n</code></pre>\n\n<p>As you can see in your params: </p>\n\n<pre><code>Parameters: {\"city\"=&gt;\"SanPedro\"}\n</code></pre>\n\n<p>Your not getting an array of cities. Try something more like: </p>\n\n<pre><code>http://localhost:3000/v1/vacancies?city%5B%5D=San+Pedro&amp;city%5B%5D=Monterrey\n</code></pre>\n\n<p>Which should give you something like: </p>\n\n<pre><code>Parameters: {\"city\"=&gt;['San Pedro', 'Monterrey']}\n</code></pre>\n\n<p>BTW, you can see how a proper query string should look by doing: </p>\n\n<pre><code>{city: ['San Pedro', 'Monterrey']}.to_query \n</code></pre>\n\n<p>in your console.</p>\n\n<p>Then, you should be able to do something like: </p>\n\n<pre><code>Vacancy.by_city(params[:city])\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 10028467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eITkp.jpg?s=128&g=1", "display_name": "Daniel Disblu", "link": "https://stackoverflow.com/users/10028467/daniel-disblu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1075, "favorite_count": 0, "accepted_answer_id": 51756960, "answer_count": 1, "score": 0, "last_activity_date": 1533770670, "creation_date": 1533766878, "last_edit_date": 1533769608, "question_id": 51756458, "link": "https://stackoverflow.com/questions/51756458/scope-parameter-as-array-in-rails-5", "title": "Scope parameter as array in Rails 5", "body": "<p>I have this scope with the parameter city, the scope receives the parameter, joins a table call Restaurant (because I have the param there) and then it makes a where condition with IN for multiple OR.</p>\n\n<pre><code>scope :by_cities, -&gt; (city) { joins(:restaurant).where('restaurants.city IN (?)', city) }\n</code></pre>\n\n<p>The thing is that I want to learn how the scope can receive an array of param in the scope, I already have tried a lot of stuff and I'm taking the guide of this guy: <a href=\"https://stackoverflow.com/questions/23412719/rails-4-scope-with-argument\">Rails 4 scope with argument</a> and this: <a href=\"https://stackoverflow.com/questions/28954500/activerecord-where-field-array-of-possible-values\">ActiveRecord where field = ? array of possible values</a></p>\n\n<blockquote>\n  <p>Logs</p>\n</blockquote>\n\n<p><code>Parameters: {\"city\"=&gt;\"SanPedro\"}\n   SELECT \"vacancies\".* FROM \"vacancies\" INNER JOIN \"restaurants\" ON \n   \"restaurants\".\"id\" = \"vacancies\".\"restaurant_id\" WHERE (restaurants.city \n   IN ('SanPedro'))</code></p>\n\n<blockquote>\n  <p>Route</p>\n</blockquote>\n\n<p><code>http://localhost:3000/v1/vacancies?city=SanPedro&amp;Monterrey</code></p>\n\n<p>But, don't understand very well how to do it, anyone knows about this?</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-s3", "aws-sdk-ruby"], "comments": [{"owner": {"reputation": 2076, "user_id": 3111788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b848b20de04ec23c2784e68fe57f118?s=128&d=identicon&r=PG", "display_name": "dmulter", "link": "https://stackoverflow.com/users/3111788/dmulter"}, "edited": false, "score": 1, "creation_date": 1533764875, "post_id": 51756008, "comment_id": 90471770, "body": "The problematic character is Byte Order Mark (BOM), which I believe is not compatible with UTF-8. You&#39;ll want to do some searches on it."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533765515, "post_id": 51756008, "comment_id": 90471981, "body": "Where is the error coming from? What&#39;s the full stack trace?"}, {"owner": {"reputation": 346, "user_id": 3309030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d247d24813a45f6a1240b835b4125bab?s=128&d=identicon&r=PG", "display_name": "kaydanzie", "link": "https://stackoverflow.com/users/3309030/kaydanzie"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533766425, "post_id": 51756008, "comment_id": 90472259, "body": "@Casper the majority of the stack trace I feel is not relevant and contains some personal info that would take a lot of time to remove. I&#39;ve added the top and bottom of the stack trace and clarified the line in the code that throws the error. I&#39;m pretty confident I&#39;ve narrowed down where the issue is."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533768373, "post_id": 51756008, "comment_id": 90472777, "body": "Ok I was able to replicate this problem by creating an ascii-8bit string containing BOM and trying to write it into a Tempfile. The question is this: why is the AWS gem treating the data internally as ascii-8bit."}], "answers": [{"comments": [{"owner": {"reputation": 346, "user_id": 3309030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d247d24813a45f6a1240b835b4125bab?s=128&d=identicon&r=PG", "display_name": "kaydanzie", "link": "https://stackoverflow.com/users/3309030/kaydanzie"}, "edited": false, "score": 0, "creation_date": 1533796774, "post_id": 51756825, "comment_id": 90479691, "body": "The solution to use File.read or CSV.read does not appear to solve the issue because there is still the problem of getting the file from S3. Or are you suggesting to pass the S3 path to File.read or CSV.read? That could be a solution. I&#39;ve decided that the best way to go about it is to just avoid the process of putting it into a local file from S3 and instead just parse the contents directly from S3. I can do <code>obj.get.body</code> to return the contents instead of <code>obj.get(response_target: ...)</code>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 346, "user_id": 3309030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d247d24813a45f6a1240b835b4125bab?s=128&d=identicon&r=PG", "display_name": "kaydanzie", "link": "https://stackoverflow.com/users/3309030/kaydanzie"}, "edited": false, "score": 1, "creation_date": 1533819273, "post_id": 51756825, "comment_id": 90493825, "body": "The solution to getting the file is the first step: put the Tempfile into binmode. This just disables any encoding or processing by Ruby, and you will get the raw data to disk. Because the error you&#39;re getting comes from the AWS gem internally, when it does a <code>write</code> into the Tempfile. Now a good question is why is the AWS gem tagging your data as ASCII-8BIT internally. I think it&#39;s even worth opening a bug report on Github for that. They may have an explanation for that behavior (or maybe it is even a bug)."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 346, "user_id": 3309030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d247d24813a45f6a1240b835b4125bab?s=128&d=identicon&r=PG", "display_name": "kaydanzie", "link": "https://stackoverflow.com/users/3309030/kaydanzie"}, "edited": false, "score": 0, "creation_date": 1533819992, "post_id": 51756825, "comment_id": 90494353, "body": "And btw. <code>obj.get.body</code> sounds fine too. You can save it manually to a file or do whatever is needed with that. I would however be curious to know in what encoding this is <code>obj.get.body.encoding</code>? Anyway, it seems you have enough options to choose from now."}, {"owner": {"reputation": 346, "user_id": 3309030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d247d24813a45f6a1240b835b4125bab?s=128&d=identicon&r=PG", "display_name": "kaydanzie", "link": "https://stackoverflow.com/users/3309030/kaydanzie"}, "edited": false, "score": 1, "creation_date": 1533828199, "post_id": 51756825, "comment_id": 90500164, "body": "The encoding for obj.get.body says UTF-8. Thank you for the advice, I&#39;ll look into possibly opening an issue with the AWS SDK gem. I&#39;ll mark this as the accepted answer because I think it could help people with the particular question I had."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 346, "user_id": 3309030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d247d24813a45f6a1240b835b4125bab?s=128&d=identicon&r=PG", "display_name": "kaydanzie", "link": "https://stackoverflow.com/users/3309030/kaydanzie"}, "edited": false, "score": 1, "creation_date": 1533830076, "post_id": 51756825, "comment_id": 90501468, "body": "Thanks. The fact that it returns UTF-8 makes it even more strange why the gem is treating it as ASCII-8BIT internally. Btw. one more solution is that <code>response_target</code> can be a file name directly. Perhaps you knew this, but if you generate your own unique file name, and provide that as <code>response_target</code> then the gem will dump the data into that file. Could work better than Tempfile if you just want to get the data into a file."}, {"owner": {"reputation": 301, "user_id": 8043700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab7d85a6611e2a602e1d9b3461336a8?s=128&d=identicon&r=PG&f=1", "display_name": "Megapiharb", "link": "https://stackoverflow.com/users/8043700/megapiharb"}, "edited": false, "score": 0, "creation_date": 1590092815, "post_id": 51756825, "comment_id": 109557923, "body": "Thank you! Very much!!"}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 4, "last_activity_date": 1578957372, "last_edit_date": 1578957372, "creation_date": 1533769583, "answer_id": 51756825, "question_id": 51756008, "link": "https://stackoverflow.com/questions/51756008/file-encoding-issue-when-downloading-file-from-aws-s3/51756825#51756825", "title": "File encoding issue when downloading file from AWS S3", "body": "<p>I don't have a full answer to all your question, but I think I have a generalized solution, and that is to always put the temp file into binary mode. That way the AWS gem will simply dump the data from the bucket into the file, without any further re/encoding:</p>\n\n<p><strong>Step 1 (put the Tempfile into binmode):</strong></p>\n\n<pre><code>temp = Tempfile.new('temp.csv')\ntemp.binmode\n</code></pre>\n\n<p>You will however have a problem, and that is the fact that there is a 3-byte BOM header in your UTF-8 file now. </p>\n\n<p>I don't know where this BOM came from. Was it there when the file was uploaded? If so, it might be a good idea to strip the 3 byte BOM before uploading.</p>\n\n<p>However, if you set up your system as below, it will not matter, because Ruby supports transparent reading of UTF-8 with or without BOM, and will return the string correctly regardless of if the BOM header is in the file or not:</p>\n\n<p><strong>Step 2 (process the file using bom|utf-8):</strong></p>\n\n<pre><code>File.read(temp.path, encoding: \"bom|utf-8\")\n# or...\nCSV.read(temp.path,  encoding: \"bom|utf-8\")\n</code></pre>\n\n<p>This should cover all your bases I think. Whether you receive files encoded as BOM + UTF-8 or plain UTF-8, you will process them correctly this way, without any extra header characters appearing in the final string, and without errors when saving them with AWS.</p>\n\n<p><strong>Another option</strong> (from OP)</p>\n\n<p>Use <code>obj.get.body</code> instead, which will bypass the whole issue with <code>response_target</code> and Tempfile.</p>\n\n<p><strong>Useful references:</strong><br>\n<a href=\"https://stackoverflow.com/questions/5011504/is-there-a-way-to-remove-the-bom-from-a-utf-8-encoded-file\">Is there a way to remove the BOM from a UTF-8 encoded file? </a><br>\n<a href=\"https://stackoverflow.com/questions/543225/how-to-avoid-tripping-over-utf-8-bom-when-reading-files\">How to avoid tripping over UTF-8 BOM when reading files</a><br>\n<a href=\"https://stackoverflow.com/questions/2223882/whats-different-between-utf-8-and-utf-8-without-bom\">What&#39;s the difference between UTF-8 and UTF-8 without BOM?</a><br>\n<a href=\"https://stackoverflow.com/questions/9886705/how-to-write-bom-marker-to-a-file-in-ruby\">How to write BOM marker to a file in Ruby</a></p>\n"}, {"comments": [{"owner": {"reputation": 346, "user_id": 3309030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d247d24813a45f6a1240b835b4125bab?s=128&d=identicon&r=PG", "display_name": "kaydanzie", "link": "https://stackoverflow.com/users/3309030/kaydanzie"}, "edited": false, "score": 0, "creation_date": 1534186387, "post_id": 51827970, "comment_id": 90612078, "body": "Yes it does. However, in the example in the question I asked you will see the exact scenario where the example you linked to does not work. Regardless of specifying encoding when uploading or downloading a file to S3, the S3 gem cannot properly pull a file with this BOM at the beginning into a temp file without specifying the encoding on the temp file."}], "tags": [], "owner": {"reputation": 81, "user_id": 6082795, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--MhlhZaMhl4/AAAAAAAAAAI/AAAAAAAAADE/yDDV_aMNNe4/photo.jpg?sz=128", "display_name": "Doug Schwartz", "link": "https://stackoverflow.com/users/6082795/doug-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1534182799, "creation_date": 1534182799, "answer_id": 51827970, "question_id": 51756008, "link": "https://stackoverflow.com/questions/51756008/file-encoding-issue-when-downloading-file-from-aws-s3/51827970#51827970", "title": "File encoding issue when downloading file from AWS S3", "body": "<p>The Ruby SDK docs have an example of downloading an S3 item to the filesystem in <a href=\"https://docs.aws.amazon.com/sdk-for-ruby/v3/developer-guide/s3-example-get-bucket-item.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdk-for-ruby/v3/developer-guide/s3-example-get-bucket-item.html</a>. I just ran it and it works fine.</p>\n"}, {"tags": [], "owner": {"reputation": 1159, "user_id": 499514, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1939b617dcfbf225b42fa317594a34c2?s=128&d=identicon&r=PG&f=1", "display_name": "Fei", "link": "https://stackoverflow.com/users/499514/fei"}, "is_accepted": false, "score": 1, "last_activity_date": 1568280598, "creation_date": 1568280598, "answer_id": 57903717, "question_id": 51756008, "link": "https://stackoverflow.com/questions/51756008/file-encoding-issue-when-downloading-file-from-aws-s3/57903717#57903717", "title": "File encoding issue when downloading file from AWS S3", "body": "<p>I fixed this encoding issue by using <code>File.open(tmp, 'wb')</code> additionally. Here is how it looks like: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>s3_object = Aws::S3::Resource.new.bucket(\"bucket-name\").object(\"resource-key\")\n\nTempfile.new.tap do |file|\n   s3_object.get(response_target: File.open(file, \"wb\"))\nend\n</code></pre>\n"}], "owner": {"reputation": 346, "user_id": 3309030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d247d24813a45f6a1240b835b4125bab?s=128&d=identicon&r=PG", "display_name": "kaydanzie", "link": "https://stackoverflow.com/users/3309030/kaydanzie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5058, "favorite_count": 0, "accepted_answer_id": 51756825, "answer_count": 3, "score": 3, "last_activity_date": 1578957372, "creation_date": 1533764310, "last_edit_date": 1533766205, "question_id": 51756008, "link": "https://stackoverflow.com/questions/51756008/file-encoding-issue-when-downloading-file-from-aws-s3", "title": "File encoding issue when downloading file from AWS S3", "body": "<p>I have a CSV file in AWS S3 that I'm trying to open in a local temp file. This is the code:</p>\n\n<pre><code>s3 = Aws::S3::Resource.new\nbucket = s3.bucket({bucket name})\nobj = bucket.object({object key})\ntemp = Tempfile.new('temp.csv')\nobj.get(response_target: temp)\n</code></pre>\n\n<p>It pulls the file from AWS and loads it in a new temp file called 'temp.csv'. For some files, the <code>obj.get(..)</code> line throws the following error:</p>\n\n<pre><code>WARN: Encoding::UndefinedConversionError: \"\\xEF\" from ASCII-8BIT to UTF-8\nWARN: /Users/.rbenv/versions/2.5.0/lib/ruby/2.5.0/delegate.rb:349:in `write'\n/Users/.rbenv/versions/2.5.0/lib/ruby/2.5.0/delegate.rb:349:in `block in delegating_block'\n/Users/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/aws-sdk-core-3.21.2/lib/seahorse/client/http/response.rb:62:in `signal_data'\n/Users/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/aws-sdk-core-3.21.2/lib/seahorse/client/net_http/handler.rb:83:in `block (3 levels) in transmit'\n...\n/Users/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/aws-sdk-s3-1.13.0/lib/aws-sdk-s3/client.rb:2666:in `get_object'\n/Users/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/aws-sdk-s3-1.13.0/lib/aws-sdk-s3/object.rb:657:in `get'\n</code></pre>\n\n<p>Stacktrace shows the error initially gets thrown by the <code>.get</code> from the AWS SDK for Ruby.</p>\n\n<p><strong>Things I've tried:</strong></p>\n\n<p>When uploading the file (object) to AWS S3, you can specify <code>content_encoding</code>, so I tried setting that to UTF-8:</p>\n\n<pre><code>obj.upload_file({file path}, content_encoding: 'utf-8')\n</code></pre>\n\n<p>Also when you call <code>.get</code> you can set <code>response_content_encoding</code>:</p>\n\n<pre><code>obj.get(response_target: temp, response_content_encoding: 'utf-8')\n</code></pre>\n\n<p>Neither of those work, they result in the same error as above. I would really expect that to do the trick. In the AWS S3 dashboard I can see that the content encoding is indeed set correctly via the code but it doesn't appear to make a difference.</p>\n\n<p>It does work when I do the following, in the first code snippet above:</p>\n\n<pre><code>temp = Tempfile.new('temp.csv', encoding: 'ascii-8bit')\n</code></pre>\n\n<p>But I'd prefer to upload and/or download the file from AWS S3 with the proper encoding. Can someone explain why specifying the encoding on the tempfile works? Or how to make it work through the AWS S3 upload/download?</p>\n\n<p><strong>Important to note:</strong> The problematic character in the error message appears to just be a random symbol added at the beginning of this auto-generated file I'm working with. I'm not worried about reading the character correctly, it gets ignored when I parse the file anyways.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1533763455, "post_id": 51755541, "comment_id": 90471274, "body": "Would you please be so kind as to add both your parameters as submitted (from your console) and the bit of your controller where you do <code>params.require(...).permit(...)</code> to your question?"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 10108195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77bda6acfa7065d1562707a6805fac4c?s=128&d=identicon&r=PG&f=1", "display_name": "Belvin", "link": "https://stackoverflow.com/users/10108195/belvin"}, "edited": false, "score": 0, "creation_date": 1533764267, "post_id": 51755959, "comment_id": 90471537, "body": "Thank you.  I think that should do it, but I get &quot;Unpermitted parameters: :utf8, :authenticity_token, :commit&quot; as another error."}, {"owner": {"reputation": 3272, "user_id": 2389628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4nuI.jpg?s=128&g=1", "display_name": "smallbutton", "link": "https://stackoverflow.com/users/2389628/smallbutton"}, "reply_to_user": {"reputation": 55, "user_id": 10108195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77bda6acfa7065d1562707a6805fac4c?s=128&d=identicon&r=PG&f=1", "display_name": "Belvin", "link": "https://stackoverflow.com/users/10108195/belvin"}, "edited": false, "score": 0, "creation_date": 1533764435, "post_id": 51755959, "comment_id": 90471610, "body": "that is not too bad, as long as you do not do anything with those params. If you want to avoid that, you can again wrap your params in a hash when sending and use <code>require</code> again,"}], "tags": [], "owner": {"reputation": 3272, "user_id": 2389628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4nuI.jpg?s=128&g=1", "display_name": "smallbutton", "link": "https://stackoverflow.com/users/2389628/smallbutton"}, "is_accepted": true, "score": 0, "last_activity_date": 1533764089, "creation_date": 1533764089, "answer_id": 51755959, "question_id": 51755541, "link": "https://stackoverflow.com/questions/51755541/strong-parameters-empty-and-not-sure-why/51755959#51755959", "title": "strong parameters empty and not sure why", "body": "<p>The method \u00b4#require\u00b4 is actually there for a parameter that is a <a href=\"https://edgeguides.rubyonrails.org/action_controller_overview.html#permitted-scalar-values\" rel=\"nofollow noreferrer\">hash structure and not a scalar type</a>, like boolean. </p>\n\n<p>The right syntax for your params is most likely: </p>\n\n<pre><code>params.permit(:current_user_id, :user_id, :micropost_id, :upvote)\n</code></pre>\n\n<p>Since it seems that your params are not nested in a hash.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 10108195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77bda6acfa7065d1562707a6805fac4c?s=128&d=identicon&r=PG&f=1", "display_name": "Belvin", "link": "https://stackoverflow.com/users/10108195/belvin"}, "edited": false, "score": 0, "creation_date": 1533764581, "post_id": 51755973, "comment_id": 90471660, "body": "OK, I&#39;ll take a look."}, {"owner": {"reputation": 55, "user_id": 10108195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77bda6acfa7065d1562707a6805fac4c?s=128&d=identicon&r=PG&f=1", "display_name": "Belvin", "link": "https://stackoverflow.com/users/10108195/belvin"}, "edited": false, "score": 0, "creation_date": 1533776679, "post_id": 51755973, "comment_id": 90474448, "body": "Actually, I figured out the PROBLEM, which was attr_accessor in my model.  ThAnk You."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1533764163, "creation_date": 1533764163, "answer_id": 51755973, "question_id": 51755541, "link": "https://stackoverflow.com/questions/51755541/strong-parameters-empty-and-not-sure-why/51755973#51755973", "title": "strong parameters empty and not sure why", "body": "<p>You seem to have a fundamental misunderstanding of <code>params.require(...).permit(...)</code>.</p>\n\n<p>When you do: </p>\n\n<pre><code>params.require(:upvote).permit( :current_user_id, :user_id, :micropost_id, :upvote)\n</code></pre>\n\n<p>Rails is expecting that you'll have params that look something like: </p>\n\n<pre><code>Parameters: {..., \"upvote\"=&gt;{\"micropost_id\"=&gt;\"1\", \"user_id\"=&gt;\"1\", \"current_user_id\"=&gt;\"2\", \"upvote\"=&gt;\"true\"}, ...}\n</code></pre>\n\n<p>But, that's not what you have, you have: </p>\n\n<pre><code>Parameters: {..., \"upvote\"=&gt;\"true\", ...}\n</code></pre>\n\n<p>In which case, Rails is trying to call <code>permit</code> on the value of <code>params[:upvote]</code> which is a string that contains the value <code>'true'</code>. </p>\n\n<p>And that's exactly what the error is telling you.</p>\n\n<p>Perhaps you should take a little longer look at <a href=\"https://edgeguides.rubyonrails.org/action_controller_overview.html#strong-parameters\" rel=\"nofollow noreferrer\">section 4.5 Strong Parameters </a> of the <a href=\"https://edgeguides.rubyonrails.org/action_controller_overview.html\" rel=\"nofollow noreferrer\">Action Controller Overview</a> docs.</p>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 10108195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77bda6acfa7065d1562707a6805fac4c?s=128&d=identicon&r=PG&f=1", "display_name": "Belvin", "link": "https://stackoverflow.com/users/10108195/belvin"}, "is_accepted": false, "score": 0, "last_activity_date": 1533776729, "creation_date": 1533776729, "answer_id": 51757528, "question_id": 51755541, "link": "https://stackoverflow.com/questions/51755541/strong-parameters-empty-and-not-sure-why/51757528#51757528", "title": "strong parameters empty and not sure why", "body": "<p>This was due to having an attr_accessor in my model file.  SOrry guys, but thanks for your help.</p>\n"}], "owner": {"reputation": 55, "user_id": 10108195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77bda6acfa7065d1562707a6805fac4c?s=128&d=identicon&r=PG&f=1", "display_name": "Belvin", "link": "https://stackoverflow.com/users/10108195/belvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 51755959, "answer_count": 3, "score": 0, "last_activity_date": 1533776729, "creation_date": 1533761835, "last_edit_date": 1533763651, "question_id": 51755541, "link": "https://stackoverflow.com/questions/51755541/strong-parameters-empty-and-not-sure-why", "title": "strong parameters empty and not sure why", "body": "<p>I have been having problems with strong_parameters.  I'll just put the error on here and see if anyone can point me in the right direction...</p>\n\n<pre><code>NoMethodError (undefined method `permit' for \"true\":String):\n\napp/controllers/upvotes_controller.rb:48:in `upvote_params'\napp/controllers/upvotes_controller.rb:17:in `create'\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>my controller:</p>\n\n<pre><code>def upvote_params\nparams.require(:upvote).permit( :current_user_id, :user_id, :micropost_id, :upvote)\nend\n</code></pre>\n\n<p>:upvote is a boolean true or false which I suppose is really 1/0.</p>\n\n<p>console parameters (I hope that is what is needed)</p>\n\n<pre><code> Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"bdepfs1DBsJOZmYzY1quYU5nGh/f4mktvqS1HWxoepgC/aesaRnhsh+JWgDNmYLif9fh/HGXy9FwZTfpvRTQhg==\", \"upvote\"=&gt;\"true\", \"micropost_id\"=&gt;\"1\", \"user_id\"=&gt;\"1\", \"current_user_id\"=&gt;\"2\", \"commit\"=&gt;\"Save \"}\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1533779360, "post_id": 51755540, "comment_id": 90474959, "body": "It is important to note the difference between a number and a representation of a number. A number is an abstract mathematical concept, represented in Ruby as some pattern of bits. It can be represented in different bases, and this representation is a string (or if in code, a literal). <code>000</code> and <code>0</code> both represent the same number. <code>010</code> as a literal in code is a representation of the number we usually write as 8. <code>010</code> can be a three-digit representation of any number greater than 1, by picking that number as a base, although Ruby restricts bases to up to 36 (e.g. <code>&quot;010&quot;.to_i(24)</code> is 24)."}], "answers": [{"comments": [{"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1533762316, "post_id": 51755590, "comment_id": 90470902, "body": "03 indicates padding 0 three times?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1533762445, "post_id": 51755590, "comment_id": 90470938, "body": "Yes. 3 indicates the field is 3 characters wide and the 0 indicates it should be zero-padded. So 04 would give you 0000, 0001, 0002 for example."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1533766806, "post_id": 51755590, "comment_id": 90472377, "body": "You may as well use <code>each_index</code>."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 0, "last_activity_date": 1533762792, "last_edit_date": 1533762792, "creation_date": 1533762036, "answer_id": 51755590, "question_id": 51755540, "link": "https://stackoverflow.com/questions/51755540/increment-a-counter-starting-from-000/51755590#51755590", "title": "increment a counter starting from 000", "body": "<p>You can use the formatted printing functions <a href=\"http://ruby-doc.org/core-2.5.0/Kernel.html#method-i-sprintf\" rel=\"nofollow noreferrer\"><code>printf</code> and <code>sprintf</code></a>:</p>\n\n<pre><code>[\"a\",\"b\",\"c\"].each_with_index { |_case, i| printf(\"%03d\\n\", i) }\n000\n001\n002\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1533767146, "creation_date": 1533767146, "answer_id": 51756508, "question_id": 51755540, "link": "https://stackoverflow.com/questions/51755540/increment-a-counter-starting-from-000/51756508#51756508", "title": "increment a counter starting from 000", "body": "<p>If the goal is to print padded numbers then Ruby can do this for you by using string ranges. A few ways to do this:</p>\n\n<pre><code>puts ('001'..'005').to_a\n</code></pre>\n\n<p>or</p>\n\n<pre><code>('001'..'005').each { |n| puts n }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>puts ('001'..'999').take(5)\n</code></pre>\n\n<p>All of which print:</p>\n\n<pre><code>#001\n#002\n#003\n#004\n#005\n</code></pre>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 51755590, "answer_count": 2, "score": 0, "last_activity_date": 1533767146, "creation_date": 1533761834, "question_id": 51755540, "link": "https://stackoverflow.com/questions/51755540/increment-a-counter-starting-from-000", "title": "increment a counter starting from 000", "body": "<p>Typically when you want to have a counter, you can do something like this:</p>\n\n<pre><code>[\"a\",\"b\",\"c\"].each.with_index(0) do |_case, i|\n  puts i\nend\n=&gt; 0\n=&gt; 1\n=&gt; 2\n</code></pre>\n\n<p>We increment from 0. 0 is represented as a <code>Fixnum</code> in Ruby.\n 000 is also represented as a Fixnum in Ruby. But I need to increment as 000,001,002,003,etc. But instead it increments from 000 to 1:</p>\n\n<pre><code>[\"a\",\"b\",\"c\"].each.with_index(000) do |_case, i|\n  puts i\nend\n=&gt; 0\n=&gt; 1\n=&gt; 2\n</code></pre>\n\n<p>How get I increment 000 as 001,002,003,etc?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest", "api", "routes"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533797670, "post_id": 51755221, "comment_id": 90480190, "body": "What are the associations between these models?"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533837256, "post_id": 51755221, "comment_id": 90505130, "body": "One to one, foreign key on customer model (vehicle_id)."}], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1533837451, "post_id": 51755424, "comment_id": 90505222, "body": "Yeah, this would be the easy way. I am just not sure if this is the convention. I don&#39;t really like to use random action names, but rather put things in a separate controller, so it&#39;s easier to discover and it follows SRP. I am just not sure what controlller/route I should use. Btw the relationship is reversed in your comment. The vehicle has one customer, so the customer has the foreign_key."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1533837844, "post_id": 51755424, "comment_id": 90505390, "body": "So, if you really want to go bare bones about it, why not just use <code>PUT    &#47;customers&#47;:id</code>? Something like <code>&#47;customers&#47;1?vehicle_id=</code> (which I believe will give you <code>{&quot;vehicle_id&quot;=&gt;nil}</code> in your params)."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1533837928, "post_id": 51755424, "comment_id": 90505433, "body": "Also, as to convention, the guide on <a href=\"https://guides.rubyonrails.org/routing.html#adding-more-restful-actions\" rel=\"nofollow noreferrer\">Adding More RESTful Routes</a> talks about exactly the <code>remove_vehicle</code> sort of thing. So, I imagine it&#39;s pretty conventional."}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1533838225, "post_id": 51755424, "comment_id": 90505564, "body": "I might do with the PUT, I am just not sure if that is the best way :(. This is pretty good: <a href=\"http://jeromedalbert.com/how-dhh-organizes-his-rails-controllers/\" rel=\"nofollow noreferrer\">jeromedalbert.com/how-dhh-organizes-his-rails-controllers</a>"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 1, "last_activity_date": 1533761655, "last_edit_date": 1533761655, "creation_date": 1533761322, "answer_id": 51755424, "question_id": 51755221, "link": "https://stackoverflow.com/questions/51755221/restful-endpoint-for-removing-foreign-key/51755424#51755424", "title": "RESTFUL endpoint for removing foreign key", "body": "<p>I don't know what the <em>common practice</em> is, but you could set up your <code>routes.rb</code> something like: </p>\n\n<pre><code>Rails.application.routes.draw do\n\n  ...\n\n  resources :customers do \n    resources :vehicles, shallow: true\n    member do\n      put :remove_vehicle\n    end\n  end\n\n  ...\n\nend\n</code></pre>\n\n<p>Which will give you something like:</p>\n\n<pre><code>      customer_vehicles GET    /customers/:customer_id/vehicles(.:format)           vehicles#index\n                        POST   /customers/:customer_id/vehicles(.:format)           vehicles#create\n   new_customer_vehicle GET    /customers/:customer_id/vehicles/new(.:format)       vehicles#new\n           edit_vehicle GET    /vehicles/:id/edit(.:format)                         vehicles#edit\n                vehicle GET    /vehicles/:id(.:format)                              vehicles#show\n                        PATCH  /vehicles/:id(.:format)                              vehicles#update\n                        PUT    /vehicles/:id(.:format)                              vehicles#update\n                        DELETE /vehicles/:id(.:format)                              vehicles#destroy\nremove_vehicle_customer PUT    /customers/:id/remove_vehicle(.:format)              customers#remove_vehicle\n              customers GET    /customers(.:format)                                 customers#index\n                        POST   /customers(.:format)                                 customers#create\n           new_customer GET    /customers/new(.:format)                             customers#new\n          edit_customer GET    /customers/:id/edit(.:format)                        customers#edit\n               customer GET    /customers/:id(.:format)                             customers#show\n                        PATCH  /customers/:id(.:format)                             customers#update\n                        PUT    /customers/:id(.:format)                             customers#update\n                        DELETE /customers/:id(.:format)                             customers#destroy\n</code></pre>\n\n<p>In which case you will add a <code>remove_vehicle</code> action to your <code>CustomersController</code>. In that action, you will have access to <code>params[:id]</code> which you can use to find your <code>@customer</code> and then do something like: </p>\n\n<pre><code>class CustomersController &lt; ApplicationController\n\n  ...\n\n  def remove_vehicle\n    @customer = Customer.find(params[:id])\n    @customer.update(vehicle_id: nil)\n    redirect_to :somewhere\n  end\n\n  ...\n\nend\n</code></pre>\n"}], "owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533761655, "creation_date": 1533760397, "question_id": 51755221, "link": "https://stackoverflow.com/questions/51755221/restful-endpoint-for-removing-foreign-key", "title": "RESTFUL endpoint for removing foreign key", "body": "<p>I have a Rails API. What is the common practice (route and controller action) to remove foreign key in a REST API? I mean not deleting any resources just setting the foreign key to <code>null</code> on a one-to-one relationship.</p>\n\n<p>For instance I have a vehicle and the vehicle has one customer.</p>\n\n<p>If I was to delete the customer it would be:</p>\n\n<p><code>DELETE /vehicles/:id/customer</code></p>\n\n<p>If I just wanna set the <code>vehicle_id: null</code> on the customer what endpoint and controller I should use?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "prawn"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1533759524, "post_id": 51754929, "comment_id": 90469588, "body": "Any errors in any logs? Is pdf-toolkit installed on the production server?"}, {"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533759661, "post_id": 51754929, "comment_id": 90469663, "body": "Only error in production.log is : ActionController::MissingFile (Cannot read file /home/deploy/ss.info/releases/20180808154901/public/pdfs/ams&zwnj;&#8203;1035-2.pdf):  dont see any other errors about prawn installation"}], "answers": [{"tags": [], "owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "is_accepted": true, "score": 0, "last_activity_date": 1533794314, "creation_date": 1533794314, "answer_id": 51759759, "question_id": 51754929, "link": "https://stackoverflow.com/questions/51754929/prawn-and-pdf-toolkit-save-file-to-public/51759759#51759759", "title": "Prawn and Pdf-Toolkit Save file to Public", "body": "<p>Problem was I need it to install pdftk manually on my server Ubuntu 16.04.\nLogged on with ssh and run:</p>\n\n<pre><code>sudo apt-get update\nsudo apt-get install pdftk\n</code></pre>\n\n<p>Instructed from: <a href=\"https://www.howtoinstall.co/en/ubuntu/xenial/pdftk\" rel=\"nofollow noreferrer\">https://www.howtoinstall.co/en/ubuntu/xenial/pdftk</a></p>\n"}], "owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 51759759, "answer_count": 1, "score": 0, "last_activity_date": 1594066659, "creation_date": 1533759292, "last_edit_date": 1594066659, "question_id": 51754929, "link": "https://stackoverflow.com/questions/51754929/prawn-and-pdf-toolkit-save-file-to-public", "title": "Prawn and Pdf-Toolkit Save file to Public", "body": "<p>I have an rails 5.2 app and its about generating a pdf files.</p>\n\n<p>I am using pdf doc as template and generating new temp pdf and with pdf-toolkit doing merging of these two to a final pdf  file.</p>\n\n<p>This are file paths in development:</p>\n\n<pre><code>template_file = File.join(Rails.root, \"lib/ams1035.pdf\")\nprawn_file = File.join(Rails.root, \"lib/temp.pdf\") \noutput_file = File.join(Rails.root, \"public/pdfs/ams1035-#{@income.id}.pdf\")\n</code></pre>\n\n<p>and this are on production server:</p>\n\n<pre><code>template_file: /home/deploy/ss.info/releases/20180808154901/lib/ams1035.pdf\n\nprawn_file: /home/deploy/ss.info/releases/20180808154901/lib/temp.pdf\n\noutput_file: /home/deploy/ss.info/releases/20180808154901/public/pdfs/ams1035-2.pdf\n</code></pre>\n\n<p>Locally in development on button click pds is generated and created in <code>public/pdfs/</code>  but on production never seeing any pdf file is generated. \nIf I upload manually file on location, click opens pdf correctly.</p>\n\n<p>Questio: do I missing something or do I need to add some permissions to <code>public/pdfs</code>  folder for prawn/pdf-toolkit so they can create file on location?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2578, "user_id": 1478058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fdc2fbe6012548e09c652be112f9a1b?s=128&d=identicon&r=PG", "display_name": "trushkevich", "link": "https://stackoverflow.com/users/1478058/trushkevich"}, "edited": false, "score": 0, "creation_date": 1533847475, "post_id": 51754791, "comment_id": 90509539, "body": "take a look at <a href=\"https://github.com/paper-trail-gem/paper_trail\" rel=\"nofollow noreferrer\">github.com/paper-trail-gem/paper_trail</a>"}], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 2, "last_activity_date": 1533759485, "creation_date": 1533759485, "answer_id": 51754988, "question_id": 51754791, "link": "https://stackoverflow.com/questions/51754791/how-to-change-timestamp-of-data-change-in-ruby-on-rails/51754988#51754988", "title": "How to change timestamp of data change in Ruby on Rails", "body": "<p>You can take advantage of ActiveRecord's dirty attribute tracking to set the status date if the status column was changed. Use a before_save callback and then set the status date if needed:</p>\n\n<pre><code>class MyModel &lt; ActiveRecord::Base\n  before_save :set_status_date\n\n  def set_status_date\n    self.status_date = Time.now if status_changed?\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9727525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43a4208ab4d1ae761883a29972b6af0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ethanph892", "link": "https://stackoverflow.com/users/9727525/ethanph892"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 51754988, "answer_count": 1, "score": 0, "last_activity_date": 1556097819, "creation_date": 1533758722, "last_edit_date": 1556097819, "question_id": 51754791, "link": "https://stackoverflow.com/questions/51754791/how-to-change-timestamp-of-data-change-in-ruby-on-rails", "title": "How to change timestamp of data change in Ruby on Rails", "body": "<p>I'm looking to make a timestamp update of when any particular fields are updated in my Ruby on Rails app.</p>\n\n<p>I have a <code>\"dprojects\"</code> table that has a column for <code>\"status\"</code> and <code>\"status_date\"</code>. </p>\n\n<p>How can I make it so that if/when the status is updated, the <code>status_date</code> also changes to be the date the status that was most recently updated to?</p>\n"}, {"tags": ["ruby", "dashing"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 8738344, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0ec53a26643c3166caf751ca581cdf8e?s=128&d=identicon&r=PG&f=1", "display_name": "Gokulnath Kumar", "link": "https://stackoverflow.com/users/8738344/gokulnath-kumar"}, "edited": false, "score": 0, "creation_date": 1533793049, "post_id": 51754800, "comment_id": 90478126, "body": "even after adding first_in I couldn&#39;t see any changes in the widget. There is something else that we are missing I guess."}], "tags": [], "owner": {"reputation": 667, "user_id": 6141597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d52107448cce3dc1010f66ceb534270?s=128&d=identicon&r=PG&f=1", "display_name": "abax", "link": "https://stackoverflow.com/users/6141597/abax"}, "is_accepted": true, "score": 1, "last_activity_date": 1533758751, "creation_date": 1533758751, "answer_id": 51754800, "question_id": 51754549, "link": "https://stackoverflow.com/questions/51754549/troubleshooting-a-dashing-widget/51754800#51754800", "title": "Troubleshooting a dashing widget", "body": "<p>Going off of the example in the <a href=\"https://github.com/gottfrois/dashing-rails\" rel=\"nofollow noreferrer\">docs</a>, try adding the <code>first_in:</code> option as well as passing in a hash as the second argument to <code>send_event</code></p>\n\n<p>Try:</p>\n\n<pre><code>SCHEDULER.every '1m', first_in: 1.second.since do\n  points.shift\n  last_x += 1\n  uptime = %x('uptime').gsub(/.*: /, '\\1').gsub(/,/, '\\1')\n  points &lt;&lt; { x: last_x, y: uptime[0..3].to_f }\n  send_event('loadavg1min', { points: points })\nend\n</code></pre>\n\n<p>docs:</p>\n\n<pre><code># :first_in sets how long it takes before the job is first run. In this case, \nit is run immediately\nDashing.scheduler.every '1m', first_in: 1.second.since do |job|\n  Dashing.send_event('karma', { current: rand(1000) })\nend\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 8738344, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0ec53a26643c3166caf751ca581cdf8e?s=128&d=identicon&r=PG&f=1", "display_name": "Gokulnath Kumar", "link": "https://stackoverflow.com/users/8738344/gokulnath-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 51754800, "answer_count": 1, "score": 0, "last_activity_date": 1533758751, "creation_date": 1533757620, "question_id": 51754549, "link": "https://stackoverflow.com/questions/51754549/troubleshooting-a-dashing-widget", "title": "Troubleshooting a dashing widget", "body": "<p>I have created a widget, to display the server load. However, it doesn't display the server load.</p>\n\n<p>dashboard.erb</p>\n\n<pre><code>&lt;li data-row=\"1\" data-col=\"1\" data-sizex=\"1\" data-sizey=\"1\"&gt;\n  &lt;div data-id=\"serverload\" data-view=\"Graph\" data-title=\"Server load\" data-moreinfo=\"1 min intervals\" &gt;&lt;/div&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>jobs/serverload.rb</p>\n\n<pre><code>points = []\n(1..10).each do |i|\n  points &lt;&lt; { x: i, y: 0 }\nend\nlast_x = points.last[:x]\n\nSCHEDULER.every '1m' do\n  points.shift\n  last_x += 1\n  uptime = %x('uptime').gsub(/.*: /, '\\1').gsub(/,/, '\\1')\n  points &lt;&lt; { x: last_x, y: uptime[0..3].to_f }\n  send_event('loadavg1min', points: points)\nend\n</code></pre>\n\n<p>It simply, displays the following. How can we troubleshoot this particular widget and figure out where it is failing?</p>\n\n<p><a href=\"https://i.stack.imgur.com/toFQX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/toFQX.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 1, "creation_date": 1533753885, "post_id": 51753477, "comment_id": 90467115, "body": "What error are you getting with <code>reject</code> and <code>delete_all</code>?"}, {"owner": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1533755064, "post_id": 51753477, "comment_id": 90467620, "body": "Good point.  I edited the question to include the error messages."}, {"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 1, "creation_date": 1533755124, "post_id": 51753477, "comment_id": 90467640, "body": "This question should help with that: <a href=\"https://stackoverflow.com/questions/31409792/rails-undefined-method-for-activerecord-associations-collectionproxy\" title=\"rails undefined method for activerecord associations collectionproxy\">stackoverflow.com/questions/31409792/&hellip;</a>  Basically, <code>@consultancy.teams</code> is not an array"}], "answers": [{"comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533755823, "post_id": 51754034, "comment_id": 90467930, "body": "Last part of the answer is what I&#39;d write. Nice!"}, {"owner": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "edited": false, "score": 0, "creation_date": 1533757615, "post_id": 51754034, "comment_id": 90468693, "body": "I&#39;m curious why you both prefer the second approach.  What&#39;s the advantage?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 1, "creation_date": 1533758026, "post_id": 51754034, "comment_id": 90468867, "body": "Most of the &quot;heavy lifting&quot; is being done by the database, not by the application, and database operations always provide better performance.  For example <code>@consultancy.order(:name)</code> brings back all records in name order, <code>@consultancy.sort_by(&amp;:name)</code> brings back all records, converts to an array, and then sorts the array by the <code>name</code> attribute.  If you find you&#39;re doing array operations it&#39;s always worthwhile to see if there&#39;s a SQL equivalent command."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 8, "last_activity_date": 1533757266, "last_edit_date": 1533757266, "creation_date": 1533755432, "answer_id": 51754034, "question_id": 51753477, "link": "https://stackoverflow.com/questions/51753477/ruby-delete-multiple-objects-by-association/51754034#51754034", "title": "Ruby Delete multiple objects by association", "body": "<p><code>select</code> acts on arrays, but <code>delete_all</code> is an active record relation method.</p>\n\n<p>You could do</p>\n\n<pre><code>@consultancy.teams.select{|x| x.users.count &lt; 2}.map(&amp;:delete)\n</code></pre>\n\n<p>But a better way might be to do the count select as part of the query.</p>\n\n<pre><code>@consultancy.teams.joins(:users).group('teams.id').having('count(users.id) &lt; 2').destroy_all\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 51754034, "answer_count": 1, "score": 0, "last_activity_date": 1533757266, "creation_date": 1533753168, "last_edit_date": 1533755039, "question_id": 51753477, "link": "https://stackoverflow.com/questions/51753477/ruby-delete-multiple-objects-by-association", "title": "Ruby Delete multiple objects by association", "body": "<p>My app needs to destroy all of the teams that have fewer than two members.</p>\n\n<p>This method seems to be working, but I'm hoping to \"rubify\" it to one line if possible.</p>\n\n<pre><code>  @consultancy.teams.reverse.each do |team|\n    team.destroy if team.users.count &lt; 2 \n  end\n</code></pre>\n\n<p>I'm trying to do something more like the following, but I'm getting an error for the reject! method.</p>\n\n<pre><code>@consultancy.teams.reject!{|x| x.users.count &lt; 2}\n\nNoMethodError: undefined method `reject!' for #&lt;Team::ActiveRecord_Associations_CollectionProxy:0x00000003f72850&gt;\n</code></pre>\n\n<p>.delete_all also throws an error.</p>\n\n<pre><code>@consultancy.teams.select{|x| x.users.count &lt; 2}.delete_all\n\nNoMethodError: undefined method `delete_all' for #&lt;Array:0x0000000b72dcf0&gt;\n</code></pre>\n\n<p>Thank you in advance for any insight.</p>\n"}, {"tags": ["ruby", "jenkins", "jenkins-pipeline", "dashing"], "answers": [{"tags": [], "owner": {"reputation": 1389, "user_id": 4121744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AVp4K.png?s=128&g=1", "display_name": "bto", "link": "https://stackoverflow.com/users/4121744/bto"}, "is_accepted": true, "score": 1, "last_activity_date": 1533822943, "last_edit_date": 1533822943, "creation_date": 1533763697, "answer_id": 51755896, "question_id": 51753090, "link": "https://stackoverflow.com/questions/51753090/shopify-dashing-widget/51755896#51755896", "title": "Shopify Dashing Widget", "body": "<p>It's not quite as useful as what you're looking for, but the closest you're probably going to get is the <a href=\"https://plugins.jenkins.io/embeddable-build-status\" rel=\"nofollow noreferrer\">Embeddable Build Status Plugin</a> which shows you the overall status of the whole build, something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xA5PW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xA5PW.png\" alt=\"build status plugin icon showing a failing build\"></a></p>\n\n<p>From the job's classic (not Blue Ocean) view, follow the \"Embeddable Build Status\" link, which takes you to a page that provides the link in several formats (plain link, Markdown, HTML, etc). </p>\n\n<p>You'll need to take some permissions into consideration: <em>protected</em> links require the user to have <code>Read</code> permission to the job; <em>unprotected</em> require <code>ViewStatus</code>.</p>\n\n<p>Links are provided for <em>With View</em> and <em>Without View</em>, where the former includes the \"view\" used to navigate to the job and the latter does not. </p>\n\n<p><strong>Caveats</strong>: </p>\n\n<ul>\n<li><p>Using the <em>Without View</em> link doesn't seem to work for multibranch pipeline jobs as of writing (Jenkins 2.121.2; build status plugin 1.9): it genereates a link like:</p>\n\n<pre><code>http://JENKINS_HOME/job/MultiBranchJobName/BranchName/badge/icon\n</code></pre>\n\n<p>but it needs to be modified to treat the branch as a job, like:</p>\n\n<pre><code>http://JENKINS_HOME/job/MultiBranchJobName/job/BranchName/badge/icon\n</code></pre></li>\n<li><p>If your branch name has a <code>/</code>, it looks like only the <em>(with view) protected</em> links escape it properly, where the <code>/</code> becomes <code>%252F</code>. Other links use <code>%2F</code> and need to be manually adjusted to <code>%252F</code>.</p></li>\n</ul>\n"}], "owner": {"reputation": 27, "user_id": 8738344, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0ec53a26643c3166caf751ca581cdf8e?s=128&d=identicon&r=PG&f=1", "display_name": "Gokulnath Kumar", "link": "https://stackoverflow.com/users/8738344/gokulnath-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 51755896, "answer_count": 1, "score": 0, "last_activity_date": 1533822943, "creation_date": 1533751697, "question_id": 51753090, "link": "https://stackoverflow.com/questions/51753090/shopify-dashing-widget", "title": "Shopify Dashing Widget", "body": "<p>I am using shopify dashing for couple of our projects. Just wanted to check whether is there a possibility to use blueocean pipeline stages inside the widget? I have checked for the possibility but unfortunately I haven't find any clue. Just wanted to check if others are any having any inputs regarding the same.</p>\n\n<p><strong>I am referring to the below screenshot:</strong>\n<a href=\"https://i.stack.imgur.com/HZthE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HZthE.png\" alt=\"Blue_Ocean_Pipeline_Stages\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "dns"], "comments": [{"owner": {"reputation": 13, "user_id": 10000563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21383038783296f3fca3e6fd3b626f50?s=128&d=identicon&r=PG&f=1", "display_name": "TheDartmyth", "link": "https://stackoverflow.com/users/10000563/thedartmyth"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1533751827, "post_id": 51752947, "comment_id": 90466031, "body": "Okay, added.  Any ideas now?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1533753547, "post_id": 51752947, "comment_id": 90466950, "body": "Are you getting errors for the things you&#39;ve tried? If so, what are the errors? If not, what is the result of your attempts (i.e., what is returned from the service)?"}, {"owner": {"reputation": 13, "user_id": 10000563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21383038783296f3fca3e6fd3b626f50?s=128&d=identicon&r=PG&f=1", "display_name": "TheDartmyth", "link": "https://stackoverflow.com/users/10000563/thedartmyth"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1533755156, "post_id": 51752947, "comment_id": 90467656, "body": "I have figured out a way to do a DNS lookup on the command line &quot;host dbltest.com.dbl.spamhaus.org&quot; that works, so now my issue is just that I need to figure out how to get an equivalent DNS lookup mechanism to the command line &quot;host&quot; command into Rails...if that makes sense?"}], "answers": [{"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 1, "last_activity_date": 1533826647, "last_edit_date": 1533826647, "creation_date": 1533760701, "answer_id": 51755291, "question_id": 51752947, "link": "https://stackoverflow.com/questions/51752947/how-can-i-query-the-spamhaus-dbl-in-ruby-on-rails/51755291#51755291", "title": "How can I query the Spamhaus DBL in Ruby on Rails?", "body": "<p>The Zen database is only for IP addresses. The DBL list is for hostnames. Therefore Charon (Zen query) only works with IP addresses. To test hostnames, query them with <code>Resolv</code> and <code>dbl.spamhouse.org</code>:</p>\n\n<pre><code>def is_spammer?(host)\n  !Resolv::DNS.new.getresources(\"#{host}.dbl.spamhaus.org\",\n                                Resolv::DNS::Resource::IN::A).empty?\nend\n\nis_spammer?('dbltest.com')\n=&gt; true\nis_spammer?('google.com')\n=&gt; false\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10000563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21383038783296f3fca3e6fd3b626f50?s=128&d=identicon&r=PG&f=1", "display_name": "TheDartmyth", "link": "https://stackoverflow.com/users/10000563/thedartmyth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "accepted_answer_id": 51755291, "answer_count": 1, "score": 0, "last_activity_date": 1533826647, "creation_date": 1533751104, "last_edit_date": 1533753396, "question_id": 51752947, "link": "https://stackoverflow.com/questions/51752947/how-can-i-query-the-spamhaus-dbl-in-ruby-on-rails", "title": "How can I query the Spamhaus DBL in Ruby on Rails?", "body": "<p>I have a Rails web application.  I want to create a class that takes an email address, say \"matt@trucksandstuff.com,\" parses out the domain, and then checks if the domain is found in the Spamhaus DBL.  I am having no luck with the dig or host commands as described on their website and the Charon gem doesn't seem to work with their sample URL either.  Any ideas?</p>\n\n<p>EDIT:  Here is what is on the website:</p>\n\n<p>In response to \"How can I test the DBL?\" they said: </p>\n\n<blockquote>\n  <p>First, the DBL follows RFC5782 for determining whether a URI zone is operational with an entry for TEST. Second, the DBL has a specific domain for testing DBL applications: dbltest.com. To test functionality of the DBL use the host or dig command to do a manual query. (If you need to look up a domain in the DBL via the web, use the domain lookup form at our Blocklist Removal Center. Do not query our website with automated tools.).</p>\n</blockquote>\n\n<p>I have tried using the Charon gem, which I think should be as simple as running </p>\n\n<pre><code>Charon.query('dbltest.com')\n</code></pre>\n\n<p>with variations that remove the parentheses, add a space, etc.</p>\n\n<p>Also tried</p>\n\n<pre><code>resolver = Resolv::DNS.new\nname = 'dbltest.com'\nresolver.getresources(\"#{name}.zen.spamhaus.org\", Resolv::DNS::Resource::IN::A)\n</code></pre>\n\n<p>in the Rails console.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authorization", "ruby-on-rails-5", "pundit"], "answers": [{"comments": [{"owner": {"reputation": 564, "user_id": 651314, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/c3925ca02512cb9e6517b27861797afd?s=128&d=identicon&r=PG&f=1", "display_name": "Kobius", "link": "https://stackoverflow.com/users/651314/kobius"}, "edited": false, "score": 0, "creation_date": 1533751653, "post_id": 51752821, "comment_id": 90465938, "body": "This works great! I&#39;ve also added the line: &quot;raise Pundit::NotAuthorizedError, &quot;You must be logged in&quot; unless user&quot; to my ApplicationPolicy initialize method to make the app a closed system. Now, you must be logged in to see anything (except the Splash), and only guests can see the Splash. Just curious, would you suggest using Cancancan instead, or is it worth seeing Pundit through?"}, {"owner": {"reputation": 3272, "user_id": 2389628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4nuI.jpg?s=128&g=1", "display_name": "smallbutton", "link": "https://stackoverflow.com/users/2389628/smallbutton"}, "reply_to_user": {"reputation": 564, "user_id": 651314, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/c3925ca02512cb9e6517b27861797afd?s=128&d=identicon&r=PG&f=1", "display_name": "Kobius", "link": "https://stackoverflow.com/users/651314/kobius"}, "edited": false, "score": 1, "creation_date": 1533757295, "post_id": 51752821, "comment_id": 90468548, "body": "Pundit is in my opinion the best authorization framework around. It is simple, flexible and has great maintainers. So go for it ;-)"}], "tags": [], "owner": {"reputation": 3272, "user_id": 2389628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4nuI.jpg?s=128&g=1", "display_name": "smallbutton", "link": "https://stackoverflow.com/users/2389628/smallbutton"}, "is_accepted": true, "score": 1, "last_activity_date": 1533750675, "creation_date": 1533750675, "answer_id": 51752821, "question_id": 51752427, "link": "https://stackoverflow.com/questions/51752427/rails-pundit-how-to-show-controller-index-only-for-not-logged-in-users/51752821#51752821", "title": "Rails - Pundit, how to show controller index only for not logged in users", "body": "<p>I guess pundit is a bit the wrong approch here, since it is built for authorizing users on certain actions and not defining what you see when you are not logged in. </p>\n\n<p>This is usually something I would solve with controller logic, maybe be redirecting all users to some other path, when they are logged in in a <code>before_action</code>. </p>\n\n<p>You might still be able to do it in pundit though by using this method in a headless policy (\n<a href=\"https://github.com/varvet/pundit/blob/master/README.md#headless-policies\" rel=\"nofollow noreferrer\">https://github.com/varvet/pundit/blob/master/README.md#headless-policies</a>).</p>\n\n<pre><code> def index?\n    user.blank?\n end\n</code></pre>\n"}], "owner": {"reputation": 564, "user_id": 651314, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/c3925ca02512cb9e6517b27861797afd?s=128&d=identicon&r=PG&f=1", "display_name": "Kobius", "link": "https://stackoverflow.com/users/651314/kobius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 51752821, "answer_count": 1, "score": 0, "last_activity_date": 1533750675, "creation_date": 1533749258, "question_id": 51752427, "link": "https://stackoverflow.com/questions/51752427/rails-pundit-how-to-show-controller-index-only-for-not-logged-in-users", "title": "Rails - Pundit, how to show controller index only for not logged in users", "body": "<p>I'm using Pundit for my authorization, I'm brand new to it and have only previously worked with Cancan and Cancancan.</p>\n\n<p>I have an index page that does not have a model. This page should ONLY be visible to not logged in users (guests only).</p>\n\n<p>I can only seem to get the page to show for everyone or no-one.</p>\n\n<p>application_policy.rb</p>\n\n<pre><code>class ApplicationPolicy\n  attr_reader :user, :record\n\n  def initialize(user, record)\n    @user = user\n    @record = record\n  end\n\n  def index?\n    false\n  end\n\n  def show?\n    false\n  end\n\n  def create?\n    false\n  end\n\n  def new?\n    create?\n  end\n\n  def update?\n    false\n  end\n\n  def edit?\n    update?\n  end\n\n  def destroy?\n    false\n  end\n\n  class Scope\n    attr_reader :user, :scope\n\n    def initialize(user, scope)\n      @user = user\n      @scope = scope\n    end\n\n    def resolve\n      scope.all\n    end\n  end\nend\n</code></pre>\n\n<p>splash_controller.rb</p>\n\n<pre><code>class SplashController &lt; ApplicationController\n\n  def index\n    authorize :splash, :index?\n  end\n\nend\n</code></pre>\n\n<p>splash_policy.rb</p>\n\n<pre><code>class SplashPolicy &lt; ApplicationPolicy\n\n  # def initialize(user, record)\n  #   @user = user\n  #   @record = record\n  # end\n\n  def index?\n    not user?\n  end\n\nend\n</code></pre>\n\n<p>I've commented out a new initialize method, as I assume I need to override this, but I'm not exactly sure on the syntax.</p>\n"}, {"tags": ["python", "ruby", "pip", "rubygems", "package-managers"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1533746364, "post_id": 51751223, "comment_id": 90463119, "body": "Questions asking us to recommend or find an software tool are generally off-topic for Stack Overflow as they tend to attract opinionated answers and spam. With that being said, about all Rubyists use <a href=\"https://bundler.io/\" rel=\"nofollow noreferrer\">bundler</a> which can be instructed to install any dependencies to a separate directory instead of the global gemset."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 1, "creation_date": 1533746413, "post_id": 51751223, "comment_id": 90463142, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/486995/ruby-equivalent-of-virtualenv\">Ruby equivalent of virtualenv?</a>"}, {"owner": {"reputation": 11445, "user_id": 236081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Iw6ZS.jpg?s=128&g=1", "display_name": "lofidevops", "link": "https://stackoverflow.com/users/236081/lofidevops"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1533799479, "post_id": 51751223, "comment_id": 90481069, "body": "@holger thanks for your comment, I&#39;m asking for a direct comparison between pipsi and gem, not a recommendation, is there an error in my ruby terminology? it sounds like the answer to my question is simply &quot;no&quot; (but the hint about a possible solution is welcome \ud83d\ude09 )"}], "answers": [{"comments": [{"owner": {"reputation": 11445, "user_id": 236081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Iw6ZS.jpg?s=128&g=1", "display_name": "lofidevops", "link": "https://stackoverflow.com/users/236081/lofidevops"}, "edited": false, "score": 0, "creation_date": 1533804445, "post_id": 51762504, "comment_id": 90483963, "body": "You might be interested in <a href=\"https://bundler.io\" rel=\"nofollow noreferrer\">bundler</a> for isolation (as suggested by Holger in the comments above), but that works more like <code>pipenv</code> than <code>pipsi</code>"}], "tags": [], "owner": {"reputation": 11445, "user_id": 236081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Iw6ZS.jpg?s=128&g=1", "display_name": "lofidevops", "link": "https://stackoverflow.com/users/236081/lofidevops"}, "is_accepted": true, "score": 1, "last_activity_date": 1533804202, "creation_date": 1533804202, "answer_id": 51762504, "question_id": 51751223, "link": "https://stackoverflow.com/questions/51751223/does-gem-isolate-like-pipsi/51762504#51762504", "title": "Does gem isolate like pipsi?", "body": "<p>No, <code>gem</code> does not isolate packages like <code>pipsi</code>. It simply installs gem dependencies, the Ruby equivalent of Python's <code>pip</code>.</p>\n\n<p>Like <code>pip</code>, anything you install with <code>gem</code> is immediately executable (if applicable). So you can:</p>\n\n<pre><code>gem install foo\nfoo --help\n</code></pre>\n\n<p>...but dependencies between <code>foo</code> and <code>bar</code> are not isolated.</p>\n"}], "owner": {"reputation": 11445, "user_id": 236081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Iw6ZS.jpg?s=128&g=1", "display_name": "lofidevops", "link": "https://stackoverflow.com/users/236081/lofidevops"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 51762504, "answer_count": 1, "score": 0, "last_activity_date": 1533804202, "creation_date": 1533744598, "last_edit_date": 1533803963, "question_id": 51751223, "link": "https://stackoverflow.com/questions/51751223/does-gem-isolate-like-pipsi", "title": "Does gem isolate like pipsi?", "body": "<p><code>pipsi</code> allows you to install Python apps with isolated dependencies. It doesn't just isolate the dependencies (like <code>virtualenv</code>), the apps are also immediately executable (like <code>pip</code>). For example:</p>\n\n<pre><code>pipsi install foo # has strict dependency on Xv1.0\npipsi install bar # has strict dependency on Xv2.0\nfoo --version # works immediately\nbar --help # works immediately\n</code></pre>\n\n<p>I need to install some Ruby tools using <code>gem</code>. Does gem offer similar isolation? In other words:</p>\n\n<pre><code>gem install foo # has strict dependency on Xv1.0\ngem install bar # has strict dependency on Xv2.0\nfoo --version # works immediately\nbar --help # works immediately\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533744297, "post_id": 51750938, "comment_id": 90462018, "body": "To me it seems the literal is correct, and the non-literal precedence is too low. Perhaps I am thinking backwards about it, though :P"}, {"owner": {"reputation": 17720, "user_id": 498594, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/EYtd3.png?s=128&g=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/498594/kelvin"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533744452, "post_id": 51750938, "comment_id": 90462103, "body": "@ForeverZer0 Personally, either precedence is fine, but what bothers me is the inconsistency. I don&#39;t really like needing to memorize a special case for numerics."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1533746465, "post_id": 51750938, "comment_id": 90463166, "body": "Is this the same as <a href=\"https://stackoverflow.com/q/22085607/479863\"><b>Unary operators behavior</b></a>? Looks the same to me (with <code>+</code> instead of <code>-</code>) and the answers are the same."}, {"owner": {"reputation": 17720, "user_id": 498594, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/EYtd3.png?s=128&g=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/498594/kelvin"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533748678, "post_id": 51750938, "comment_id": 90464348, "body": "@muistooshort yes it&#39;s the same. Thanks for that link - the <code>Ripper</code> demo was also helpful."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1533745939, "post_id": 51751273, "comment_id": 90462901, "body": "Nice demonstration! I don&#39;t doubt you, but do you have a reference for the precedence of method invocation generally?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533746690, "post_id": 51751273, "comment_id": 90463288, "body": "And if you start adding some spaces (<a href=\"https://stackoverflow.com/a/24523553/479863\">stackoverflow.com/a/24523553/479863</a>) it goes back to the unary operator so <code>-11</code> and <code>- 11</code> are interpreted differently (which you just noted while I was writing my comment),"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533746954, "post_id": 51751273, "comment_id": 90463443, "body": "@muistooshort, did you mean add more minutes instead of spaces? Indeed if you have <code>a -- b</code> the only logical way this expression makes sense is if the second <code>-</code> is interpreted as unary <code>-</code> for <code>b</code> and the first <code>-</code> is interpreted as binary <code>-</code> for <code>a</code> and <code>-b</code>."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1533747076, "post_id": 51751273, "comment_id": 90463517, "body": "@CarySwoveland, I don&#39;t but seems so with simple experimentation. Given <code>x = 1</code>. <code>-x.abs == -1</code>. Meaning the operations are applied like <code>-(x.abs)</code> and not <code>(-x).abs</code>."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533747763, "post_id": 51751273, "comment_id": 90463911, "body": "No, spaces, hence <code>-11</code> vs <code>- 11</code>. The <code>a -- b</code> case (actually <code>a ++ b</code> but that&#39;s immaterial) is where it came up before."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533748420, "post_id": 51751273, "comment_id": 90464209, "body": "@muistooshort, ah I see. I actually had already added this (plus why it&#39;s happening and what it means semantically) in the answer btw."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533749144, "post_id": 51751273, "comment_id": 90464601, "body": "You added that while I was adding my comment then I editing my comment, cheers :)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533749207, "post_id": 51751273, "comment_id": 90464645, "body": "@muistooshort ok, my bad."}, {"owner": {"reputation": 17720, "user_id": 498594, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/EYtd3.png?s=128&g=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/498594/kelvin"}, "edited": false, "score": 1, "creation_date": 1533750311, "post_id": 51751273, "comment_id": 90465213, "body": "Weird, but I get it. Basically <code>-1</code> (w/o space) is treated &quot;atomically&quot; by the parser, so the unary minus precedence rule doesn&#39;t even come into play."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 4, "last_activity_date": 1533746696, "last_edit_date": 1533746696, "creation_date": 1533744805, "answer_id": 51751273, "question_id": 51750938, "link": "https://stackoverflow.com/questions/51750938/is-unary-minus-supposed-to-have-higher-precedence-for-numeric-literals/51751273#51751273", "title": "Is unary minus supposed to have higher precedence for numeric literals?", "body": "<p>The reason is that in the literal number case, the <code>-</code> in front isn't an unary operator, but part of the literal syntax.</p>\n\n<p>However, the <code>-</code> operator itself has lower precedence than method invocation. Given that there is no <code>-'string'</code> literal syntax for strings, this rule always applies regardless of if the string was literal or not.</p>\n\n<pre><code>class Integer\n  def -@\n    puts 'Called'\n  end\nend\n\nclass String\n  def -@\n    puts 'Called'\n  end\nend\n\n-1 # nothing, the - wasn't an unary operation, but part of the number construction\nx = 1\n-x # Called\n\n-'a' # Called\na = 'a'\n-a # Called\n</code></pre>\n\n<p>Another interesting thing is that if you put a space between the number and the <code>-</code>, the <code>-</code> is no longer part of the literal syntax.</p>\n\n<pre><code>- 1 # Called\n</code></pre>\n\n<hr>\n\n<p>Here is the semantic explanation:</p>\n\n<ul>\n<li>There is such thing as <em>\"the number negative one\"</em>. It makes sense that there should be literal syntax for it (as there is for any positive number). And the most intuitive syntax for it is <code>-1</code>.</li>\n<li>We still want to be able to call the unary operator on literal positive numbers. The most intuitive (and easy to implement) way for that would be not to make the parser super fancy as to ignore any random amount of whitespaces in the literal syntax for negative numbers. Hence why <code>- 1</code> accounts to <em>\"apply the unary minus to the number (positive) one\"</em>.</li>\n<li>There is no such thing as <em>\"the string negative 'a'\"</em>. That is why <code>-'a'</code> means <em>\"apply the unary minus to the string 'a'\"</em>.</li>\n</ul>\n"}], "owner": {"reputation": 17720, "user_id": 498594, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/EYtd3.png?s=128&g=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/498594/kelvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 51751273, "answer_count": 1, "score": 3, "last_activity_date": 1533746696, "creation_date": 1533743686, "last_edit_date": 1533744313, "question_id": 51750938, "link": "https://stackoverflow.com/questions/51750938/is-unary-minus-supposed-to-have-higher-precedence-for-numeric-literals", "title": "Is unary minus supposed to have higher precedence for numeric literals?", "body": "<p>Unary minus seems to have special precedence when a numeric literal is involved. Is this documented behavior?</p>\n\n<p>The precedence tables I've seen (e.g. <a href=\"https://ruby-doc.org/core-2.3.6/doc/syntax/precedence_rdoc.html\" rel=\"nofollow noreferrer\">here</a>) don't even mention the dot (method-call) operator.</p>\n\n<p>Test on ruby 2.3.6:</p>\n\n<pre><code>puts \"=== literal integer ===\"\n# `-` has higher precedence than `.`\np( -1.abs )   # =&gt; 1\np( -(1.abs) ) # =&gt; -1 (previous line should match this if `.` had higher precedence)\n\nputs \"=== literal float ===\"\n# again `-` has higher precedence than `.`\np( -1.2.abs )   # =&gt; 1.2\np( -(1.2.abs) ) # =&gt; -1.2 (previous line should match this if `.` had higher precedence)\n\nputs \"=== integer in a variable ===\"\n(1).tap do |i|\n  # `.` has higher precedence\n  p( -i.abs )   # -1\n  p( (-i).abs ) # 1 (previous line should match this if `-` had higher precedence)\nend\n\nputs \"=== float in a variable ===\"\n(1.2).tap do |i|\n  # `.` has higher precedence\n  p( -i.abs )   # -1.2\n  p( (-i).abs ) # 1.2 (previous line should match this if `-` had higher precedence)\nend\n\nputs \"=== literal string ===\"\n'a'.frozen? == false or raise \"frozen_string_literal must be disabled\"\n\n# Note that unary minus on Strings returns a frozen copy if the string wasn't already frozen\n# `.` has higher precedence (differs from numeric precedence)\np( (-'a'.succ).frozen? )   # true\np( ((-'a').succ).frozen? ) # false (previous line should match this if `-` had higher precedence)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "resque", "rails-activejob"], "comments": [{"owner": {"reputation": 713, "user_id": 1980516, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c49bad11db953535bc1b0e4940af7fa2?s=128&d=identicon&r=PG", "display_name": "Diana", "link": "https://stackoverflow.com/users/1980516/diana"}, "edited": false, "score": 0, "creation_date": 1584632432, "post_id": 51750812, "comment_id": 107501714, "body": "Did you ever find a solution?"}], "answers": [{"tags": [], "owner": {"reputation": 178, "user_id": 4222996, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8pccXFTgKQ/AAAAAAAAAAI/AAAAAAAACl0/i_aQi_L4NDw/photo.jpg?sz=128", "display_name": "Ravi Misra", "link": "https://stackoverflow.com/users/4222996/ravi-misra"}, "is_accepted": false, "score": 0, "last_activity_date": 1614355743, "last_edit_date": 1614355743, "creation_date": 1614330863, "answer_id": 66383033, "question_id": 51750812, "link": "https://stackoverflow.com/questions/51750812/resque-web-links-are-broken-when-relative-url-root-is-configured/66383033#66383033", "title": "resque-web links are broken when relative url root is configured", "body": "<p>What worked for me is:</p>\n<ol>\n<li><p>Mount ResqueWeb in <code>config/routes.rb</code> as follows:</p>\n<pre><code>require &quot;resque_web&quot;\nRails.application.routes.draw do\n  mount ResqueWeb::Engine =&gt; &quot;/resque/&quot;\n  root 'resque_web/overview#show'\nend\n</code></pre>\n</li>\n<li><p>set relative URL root in <code>config/application.rb</code>:</p>\n<pre><code>config.relative_url_root = '/resque'\n</code></pre>\n</li>\n<li><p>update Nginx config as follows</p>\n<pre><code>location ~ ^/resque/(.*|$) {         \n     alias /home/ravi/ws/ror/resque-web/public$1; \n     passenger_app_root /home/ravi/ws/ror/resque-web;\n     passenger_document_root /home/ravi/ws/ror/resque-web/public;\n     passenger_enabled on;\n     passenger_app_env development;\n }\n</code></pre>\n</li>\n</ol>\n<p>Every link on the resque dashboard is generated with prefixed /resque e.g. <code>/resque/workers</code> points to list of workers i.e. <code>resque_web/workers#index</code></p>\n<p>my rake routes output is:</p>\n<pre><code>Prefix Verb URI Pattern Controller#Action\nresque_web      /resque     ResqueWeb::Engine\n      root GET  /           resque_web/overview#show\n\nRoutes for ResqueWeb::Plugins::ResqueScheduler::Engine:\n          schedules GET    /schedule(.:format)                     resque_web/plugins/resque_scheduler/schedules#index\n            requeue POST   /schedule/requeue(.:format)             resque_web/plugins/resque_scheduler/schedules#requeue\nrequeue_with_params POST   /schedule/requeue_with_params(.:format) resque_web/plugins/resque_scheduler/schedules#requeue_with_params\n           schedule DELETE /schedule(.:format)                     resque_web/plugins/resque_scheduler/schedules#destroy\n            delayed GET    /delayed(.:format)                      resque_web/plugins/resque_scheduler/delayed#index\n  delayed_job_class GET    /delayed/jobs/:klass(.:format)          resque_web/plugins/resque_scheduler/delayed#jobs_klass\n     delayed_search POST   /delayed/search(.:format)               resque_web/plugins/resque_scheduler/delayed#search\n          timestamp GET    /delayed/:timestamp(.:format)           resque_web/plugins/resque_scheduler/delayed#timestamp\n          queue_now POST   /delayed/queue_now(.:format)            resque_web/plugins/resque_scheduler/delayed#queue_now\n         cancel_now POST   /delayed/cancel_now(.:format)           resque_web/plugins/resque_scheduler/delayed#cancel_now\n              clear POST   /delayed/clear(.:format)                resque_web/plugins/resque_scheduler/delayed#clear\n\nRoutes for ResqueWeb::Engine:\nresque_web_plugins_resque_scheduler        /scheduler                      ResqueWeb::Plugins::ResqueScheduler::Engine\n                           overview GET    /overview(.:format)             resque_web/overview#show\n                      working_index GET    /working(.:format)              resque_web/working#index\n                        clear_queue PUT    /queues/:id/clear(.:format)     resque_web/queues#clear {:id=&gt;/[^\\/]+/}\n                             queues GET    /queues(.:format)               resque_web/queues#index\n                              queue GET    /queues/:id(.:format)           resque_web/queues#show {:id=&gt;/[^\\/]+/}\n                                    DELETE /queues/:id(.:format)           resque_web/queues#destroy {:id=&gt;/[^\\/]+/}\n                            workers GET    /workers(.:format)              resque_web/workers#index\n                             worker GET    /workers/:id(.:format)          resque_web/workers#show {:id=&gt;/[^\\/]+/}\n                      retry_failure PUT    /failures/:id/retry(.:format)   resque_web/failures#retry\n                 retry_all_failures PUT    /failures/retry_all(.:format)   resque_web/failures#retry_all\n               destroy_all_failures DELETE /failures/destroy_all(.:format) resque_web/failures#destroy_all\n                           failures GET    /failures(.:format)             resque_web/failures#index\n                            failure GET    /failures/:id(.:format)         resque_web/failures#show\n                                    DELETE /failures/:id(.:format)         resque_web/failures#destroy\n                              stats GET    /stats(.:format)                resque_web/stats#index\n                       stats_resque GET    /stats/resque(.:format)         resque_web/stats#resque\n                        stats_redis GET    /stats/redis(.:format)          resque_web/stats#redis\n                         stats_keys GET    /stats/keys(.:format)           resque_web/stats#keys\n                     keys_statistic GET    /stats/keys/:id(.:format)       resque_web/stats#keys {:id=&gt;/[^\\/]+/}\n                               root GET    /                               resque_web/overview#show\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 2808573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b629cddbc3c811fb1aaf61e933990f?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/2808573/teja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1614355743, "creation_date": 1533743294, "last_edit_date": 1533852055, "question_id": 51750812, "link": "https://stackoverflow.com/questions/51750812/resque-web-links-are-broken-when-relative-url-root-is-configured", "title": "resque-web links are broken when relative url root is configured", "body": "<p>I'm using a <a href=\"https://guides.rubyonrails.org/configuring.html#configuring-action-controller\" rel=\"nofollow noreferrer\">relative_url_root</a> for app in staging/prod environments for deploying to a sub directory. I recently started using <a href=\"https://github.com/resque/resque\" rel=\"nofollow noreferrer\">resque</a> for active jobs and implemented <a href=\"https://github.com/resque/resque-web\" rel=\"nofollow noreferrer\">resque-web</a> a frontend for viewing the resque job queuing. All the links on the home page of resque web are not honoring the relative_url_path when the users click on the links.</p>\n\n<pre><code>config.action_controller.relative_url_root = /metric\n</code></pre>\n\n<p>when we click on working jobs link on the resque web. It's rendering <code>/resque_web/working</code> instead of <code>/metric/resque_web/working</code> which makes the links to be broken.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["ruby", "excel"], "comments": [{"owner": {"reputation": 3033, "user_id": 2727437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F9PHb.jpg?s=128&g=1", "display_name": "Marcucciboy2", "link": "https://stackoverflow.com/users/2727437/marcucciboy2"}, "edited": false, "score": 0, "creation_date": 1533743303, "post_id": 51750723, "comment_id": 90461458, "body": "maybe hide the row and unhide it after processing? sorry, I haven&#39;t used ruby to access excel before"}], "answers": [{"tags": [], "owner": {"reputation": 1303, "user_id": 2235381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0061f9bd5384a544637692774a6e108f?s=128&d=identicon&r=PG", "display_name": "lojza", "link": "https://stackoverflow.com/users/2235381/lojza"}, "is_accepted": false, "score": 0, "last_activity_date": 1533746442, "creation_date": 1533746442, "answer_id": 51751693, "question_id": 51750723, "link": "https://stackoverflow.com/questions/51750723/skip-the-first-row-reading-an-excel-file-by-using-creek-in-ruby/51751693#51751693", "title": "Skip the first row reading an EXCEL file by using creek in Ruby", "body": "<p>What about</p>\n\n<pre><code>worksheet.rows.each_with_index do |row, index|\n  if not index == 0\n    treatment = row.values[0].to_i\n    ...\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "is_accepted": false, "score": 0, "last_activity_date": 1533751089, "creation_date": 1533751089, "answer_id": 51752941, "question_id": 51750723, "link": "https://stackoverflow.com/questions/51750723/skip-the-first-row-reading-an-excel-file-by-using-creek-in-ruby/51752941#51752941", "title": "Skip the first row reading an EXCEL file by using creek in Ruby", "body": "<p><a href=\"https://ruby-doc.org/core-2.5.1/Array.html#method-i-each\" rel=\"nofollow noreferrer\"><code>Array#each</code></a> doesn't take an index offset argument. Try using <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-drop\" rel=\"nofollow noreferrer\"><code>Enumerable#drop</code></a>:</p>\n\n<pre><code>worksheets.drop(1).each do |worksheet|\n  ...\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 886, "user_id": 6057372, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/359c371da09035a39e9206a2ab03fd62?s=128&d=identicon&r=PG&f=1", "display_name": "achimneyswallow", "link": "https://stackoverflow.com/users/6057372/achimneyswallow"}, "is_accepted": true, "score": 0, "last_activity_date": 1533810105, "creation_date": 1533810105, "answer_id": 51764488, "question_id": 51750723, "link": "https://stackoverflow.com/questions/51750723/skip-the-first-row-reading-an-excel-file-by-using-creek-in-ruby/51764488#51764488", "title": "Skip the first row reading an EXCEL file by using creek in Ruby", "body": "<p>Thank you for your inputs. </p>\n\n<pre><code>worksheet.rows.drop(1).each do |row|\n</code></pre>\n\n<p>actually does the work. </p>\n\n<pre><code>worksheets.drop(1).each do |worksheet|\n</code></pre>\n\n<p>performs on worksheet level. but this line inspired me! :)</p>\n"}], "owner": {"reputation": 886, "user_id": 6057372, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/359c371da09035a39e9206a2ab03fd62?s=128&d=identicon&r=PG&f=1", "display_name": "achimneyswallow", "link": "https://stackoverflow.com/users/6057372/achimneyswallow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 51764488, "answer_count": 3, "score": 0, "last_activity_date": 1533810105, "creation_date": 1533743033, "question_id": 51750723, "link": "https://stackoverflow.com/questions/51750723/skip-the-first-row-reading-an-excel-file-by-using-creek-in-ruby", "title": "Skip the first row reading an EXCEL file by using creek in Ruby", "body": "<p>I have the following code. It works well except that I cannot get rid of the first row of an EXCEL file. I use Ruby and module creek.</p>\n\n<pre><code>workbook = Creek::Book.new 'file.xlsx'\n    worksheets = workbook.sheets\n\n    worksheets.each do |worksheet|\n      worksheet.rows.each 2 do |row|\n      treatment = row.values[0].to_i\n      replicate = row.values[1].to_i\n      station = row.values[2].to_i\n      sample_depth = row.values[3].to_i\n      sample_date = row.values[4].to_s\n      top_depth = []\n    end\n  end\nend\n</code></pre>\n\n<p>I have <code>worksheet.rows.each 2 do |row|</code> here but it does not work at all. I am curious about the right way of doing it. Thank you.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "edited": false, "score": 0, "creation_date": 1533742153, "post_id": 51750268, "comment_id": 90460709, "body": "Are you sure that&#39;s what&#39;s being output (in the raw View Source), and not just what the brower&#39;s correcting it to? Nested links are not legal HTML: <a href=\"https://stackoverflow.com/questions/9882916/are-you-allowed-to-nest-a-link-inside-of-a-link\" title=\"are you allowed to nest a link inside of a link\">stackoverflow.com/questions/9882916/&hellip;</a>"}, {"owner": {"reputation": 798, "user_id": 4713952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb7f02afcdd768e71b03eb8a2b0ebb0?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Lockard", "link": "https://stackoverflow.com/users/4713952/jacob-lockard"}, "reply_to_user": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "edited": false, "score": 0, "creation_date": 1533742239, "post_id": 51750268, "comment_id": 90460778, "body": "Yeah, I just found that out... Thanks!"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1533746894, "post_id": 51750268, "comment_id": 90463404, "body": "What address should the browser load when you click on the inner <code>a</code>?"}, {"owner": {"reputation": 798, "user_id": 4713952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb7f02afcdd768e71b03eb8a2b0ebb0?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Lockard", "link": "https://stackoverflow.com/users/4713952/jacob-lockard"}, "edited": false, "score": 0, "creation_date": 1533757409, "post_id": 51750268, "comment_id": 90468596, "body": "The inner <code>&lt;a&gt;</code> tag should link to a destroy action on a controller, so it needs to use the <code>method: :delete</code> options in link_to."}], "answers": [{"tags": [], "owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "is_accepted": false, "score": 0, "last_activity_date": 1533908871, "creation_date": 1533908871, "answer_id": 51787968, "question_id": 51750268, "link": "https://stackoverflow.com/questions/51750268/nest-a-link-to-inside-of-another-link-to/51787968#51787968", "title": "Nest a link_to inside of another link_to", "body": "<p>Since you need the inner <code>link</code> tag point at a destroy action on a controller. You can trigger the action by the <code>click</code> event of the first link.</p>\n\n<pre><code>  $('#first_link').on('click', function() {\n          $.ajax({\n            type: \"DELETE\", \n            url: YOUR_SECOND_LINK ,\n            data: {id: YOUR_ID },\n            success: function(data, textStatus, jqXHR){...},\n            error: function(jqXHR, textStatus, errorThrown){...}\n          })\n   });\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123, "user_id": 7832998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9e4ed351be96234e68855df4616de6?s=128&d=identicon&r=PG&f=1", "display_name": "L.Youl", "link": "https://stackoverflow.com/users/7832998/l-youl"}, "is_accepted": false, "score": 0, "last_activity_date": 1597674861, "creation_date": 1597674861, "answer_id": 63453038, "question_id": 51750268, "link": "https://stackoverflow.com/questions/51750268/nest-a-link-to-inside-of-another-link-to/63453038#63453038", "title": "Nest a link_to inside of another link_to", "body": "<p>This can be achieved by using the <code>&lt;template&gt;</code> element which will prevent the browser from closing an anchor tag before another one is opened.</p>\n<pre><code>&lt;%= link_to &quot;www.example.com&quot;, class: &quot;so-and-so&quot; do %&gt;\n  &lt;%= content_tag :span, &quot;something&quot; %&gt;\n  \n  &lt;template&gt;\n    &lt;%= link_to &quot;www.another.example.com&quot;, class: &quot;another-link&quot; do %&gt;\n      &lt;%= content_tag :i, class: &quot;an-icon&quot; %&gt;\n    &lt;% end %&gt;\n  &lt;/template&gt;\n&lt;% end %&gt;\n</code></pre>\n<p>I worked this out because I was refactoring Vue components that had nested anchor tags into <code>html.erb</code> files. It is a requirement of each of the individual Vue components that it is wrapped in a <code>&lt;template&gt;</code> tag so I copied it over and voila!</p>\n"}], "owner": {"reputation": 798, "user_id": 4713952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb7f02afcdd768e71b03eb8a2b0ebb0?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Lockard", "link": "https://stackoverflow.com/users/4713952/jacob-lockard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 597, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1597674861, "creation_date": 1533741576, "last_edit_date": 1533757547, "question_id": 51750268, "link": "https://stackoverflow.com/questions/51750268/nest-a-link-to-inside-of-another-link-to", "title": "Nest a link_to inside of another link_to", "body": "<p>I need to nest an 'a' element inside of another 'a' element like so:</p>\n\n<pre><code>&lt;a href=\"www.example.com\" class=\"so-and-so\"&gt;\n    &lt;span&gt;something&lt;/span&gt;\n    &lt;a href=\"www.another.example.com\" class=\"another-link\"&gt;&lt;i class=\"an-icon\"&gt;&lt;/a&gt;\n&lt;/a&gt;\n</code></pre>\n\n<p>However I need to use the rails 'link_to' helpers instead of plain html. But when I try to nest the link_to helper like this:</p>\n\n<pre><code>&lt;%= link_to \"www.example.com\", class: \"so-and-so\" do %&gt;\n    &lt;%= content_tag :span, \"something\" %&gt;\n    &lt;%= link_to \"www.another.example.com\", class: \"another-link\" do %&gt;\n        &lt;%= content_tag :i, class: \"an-icon\" %&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>It outputs html more like this:</p>\n\n<pre><code>&lt;a ...&gt;\n    &lt;span ...&gt;\n&lt;/a&gt;\n&lt;a class=\"another-link\" ...&gt;...&lt;/a&gt;\n</code></pre>\n\n<p>Any help would be greatly apreciated. Thank you!</p>\n\n<h1>EDIT</h1>\n\n<p>It turns out that rails was outputting the correct html after all, but the browser is not interpreting it correctly. It it possible to have a link inside of a link?</p>\n\n<h1>SOLVED (ISH)</h1>\n\n<p>It turns out that nesting <code>&lt;a&gt;</code> elements is not valid HTML, so the browser was just trying to \"correct\" my code. I ended up just placing the a element outside the other one and using CSS to make it look the same.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1533742532, "post_id": 51748714, "comment_id": 90460974, "body": "In regards to your final comment. You always have full control over the error messages either via the <code>:message</code> <code>Hash</code> option or through <a href=\"https://guides.rubyonrails.org/i18n.html#translations-for-active-record-models\" rel=\"nofollow noreferrer\">I18n locales</a>. <a href=\"https://stackoverflow.com/a/2859275/1978251\">This SO Answer</a> does a nice job of showing just how far you can take the localization of an error message"}, {"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1533742720, "post_id": 51748714, "comment_id": 90461085, "body": "@engineersmnky that doesn&#39;t mean we shouldn&#39;t make the defaults better"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1533742905, "post_id": 51748714, "comment_id": 90461215, "body": "What is wrong with the defaults? Defaults are meant to be generic and <code>in</code> could be <code>(1..1000)</code> or <code>(&#39;A&#39;..&#39;Z&#39;)</code> or <code>[&#39;foo&#39;,&#39;bar&#39;,&#39;baz&#39;]</code> or some homegrown object that implements <code>include?</code>. What generic message would make more sense than <i>&quot;is not included in the list&quot;</i> that would still apply unilaterally to all of these examples?"}, {"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1533743194, "post_id": 51748714, "comment_id": 90461385, "body": "I would likely merge patches that use &quot;be blank&quot; for blank values [that aren&#39;t in the list], or that use &quot;in the range&quot; over &quot;list&quot; where appropriate."}], "tags": [], "owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "is_accepted": false, "score": 3, "last_activity_date": 1533737105, "creation_date": 1533737105, "answer_id": 51748714, "question_id": 51748519, "link": "https://stackoverflow.com/questions/51748519/allow-blank-option-is-meaningful/51748714#51748714", "title": "allow_blank option is meaningful?", "body": "<p>Either option is valid; you're trading succinctness of code against precision of the error message shown to the user. Which one works better can depend on the level of user who will be manipulating this record.</p>\n\n<p>For a numeric value, however, consider a <code>numericality:</code> validation instead. \"included in the list\" is rather confusing phrasing even when a proper [but out of range] number is supplied.</p>\n\n<p>(As an extra idea, consider submitting a PR to Rails to improve both of these default messages.)</p>\n"}], "owner": {"reputation": 713, "user_id": 975352, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/79470d4708b9927990eb78650fb906ca?s=128&d=identicon&r=PG&f=1", "display_name": "Akira  Noguchi", "link": "https://stackoverflow.com/users/975352/akira-noguchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1533739665, "creation_date": 1533736478, "last_edit_date": 1533739665, "question_id": 51748519, "link": "https://stackoverflow.com/questions/51748519/allow-blank-option-is-meaningful", "title": "allow_blank option is meaningful?", "body": "<p>I'm trying to build own app in RoR.<br>\nHow do you think below code.</p>\n\n<pre><code>class Book &lt; ApplicationRecord\n  validates :price,\n    presence: true,\n    inclusion: { in: 50..100, allow_blank: true }\nend\n</code></pre>\n\n<p>price value must be in 50 to 100 and not empty.<br>\nMy reviewer want to display \"Price is not included in the list\" and \"Price can't be blank\". But I don't agree with this comment.</p>\n\n<p>My prefer code is below. This meets both inclusion and presence.</p>\n\n<pre><code>class Book &lt; ApplicationRecord\n  validates :price,\n    inclusion: { in: 50..100 }\nend\n</code></pre>\n\n<p>In this case, <code>allow_blank</code> is not meaningful. </p>\n\n<p>How do you think? Which is more prefer?</p>\n\n<h2>UPDATE</h2>\n\n<p>Using <code>numericality:</code> is better for validating integer.</p>\n\n<pre><code>class Book &lt; ApplicationRecord\n  validates :price,\n    numericality: { greater_than_or_equal_to: 50, less_than_or_equal_to: 100 }\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml", "erb"], "comments": [{"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 1, "creation_date": 1533737040, "post_id": 51748263, "comment_id": 90457103, "body": "Not entirely clear what you&#39;re trying to accomplish, but why not just use your <code>checked</code> variable as the value for the <code>:checked</code> option in the input fields? Example: <code>%input{type: &quot;radio&quot;, name: &quot;foo&quot;, value: &quot;bar&quot;, checked: checked}= &quot;foo&quot;</code>"}, {"owner": {"reputation": 34, "user_id": 2226653, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78cf12ddf9d6ac72738374643c135e14?s=128&d=identicon&r=PG", "display_name": "JohnSmith1976", "link": "https://stackoverflow.com/users/2226653/johnsmith1976"}, "reply_to_user": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1533737186, "post_id": 51748263, "comment_id": 90457216, "body": "@mmichael because your browser seems to ignore the value. If the <code>checked</code> key exists, the checkbox/radio button gets selected."}, {"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1533737389, "post_id": 51748263, "comment_id": 90457355, "body": "You should be using the Rails form helpers. In this case, the check_box_tag: <code>check_box_tag &#39;foo&#39;, &#39;bar&#39;, checked</code> where <code>checked</code> is your boolean variable."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1533738843, "post_id": 51748263, "comment_id": 90458420, "body": "Your first approach is the right way to do this in Haml and should be working. What does the generated HTML look like?"}], "answers": [{"tags": [], "owner": {"reputation": 24753, "user_id": 489765, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bdc5163fd78b041c9d4a405204c5ad9a?s=128&d=identicon&r=PG", "display_name": "aromero", "link": "https://stackoverflow.com/users/489765/aromero"}, "is_accepted": true, "score": 1, "last_activity_date": 1533736658, "creation_date": 1533736658, "answer_id": 51748577, "question_id": 51748263, "link": "https://stackoverflow.com/questions/51748263/avoid-duplicate-code-when-adding-pre-filled-checkboxes-radio-buttons-to-your-for/51748577#51748577", "title": "Avoid duplicate code when adding pre-filled checkboxes/radio buttons to your form", "body": "<p>Rails API has a couple of helpers for radio/checkbox tags</p>\n\n<p><a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag</a></p>\n\n<p><a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-radio_button_tag\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-radio_button_tag</a></p>\n"}], "owner": {"reputation": 34, "user_id": 2226653, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78cf12ddf9d6ac72738374643c135e14?s=128&d=identicon&r=PG", "display_name": "JohnSmith1976", "link": "https://stackoverflow.com/users/2226653/johnsmith1976"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 51748577, "answer_count": 1, "score": -1, "last_activity_date": 1533736658, "creation_date": 1533735746, "question_id": 51748263, "link": "https://stackoverflow.com/questions/51748263/avoid-duplicate-code-when-adding-pre-filled-checkboxes-radio-buttons-to-your-for", "title": "Avoid duplicate code when adding pre-filled checkboxes/radio buttons to your form", "body": "<p>When adding radio buttons and checkboxes to my pre-filled form I find myself having to duplicate code.</p>\n\n<p>Ideally I want to declare via a vaiable if the input field should be selected or not. Like e.g.:</p>\n\n<pre><code>- checked = false # or `true`, `false`, `nil`, `\"\"`\n%input{:type =&gt; \"radio\", :name =&gt; \"foo\", :value =&gt; \"bar\", :checked =&gt; checked}= \"foo\"\n%input{:type =&gt; \"checkbox\", :name =&gt; \"foo\", :value =&gt; \"bar\", :checked =&gt; checked}= \"foo\"\n</code></pre>\n\n<p>But the result is that whatever value I put into the <code>checked</code> variable it results in the input field ends up selected.</p>\n\n<p>My solution results in lots of lines of duplicate code:</p>\n\n<pre><code>- checked = false # or `true`, `false`, `nil`, `\"\"`\n- if true\n  %input{:type =&gt; \"radio\", :name =&gt; \"foo\", :value =&gt; \"bar\", :checked =&gt; true}= \"foo\"\n- else\n  %input{:type =&gt; \"radio\", :name =&gt; \"foo\", :value =&gt; \"bar\"}= \"foo\"\n\n- if true\n  %input{:type =&gt; \"checkbox\", :name =&gt; \"foo\", :value =&gt; \"bar\", :checked =&gt; true}= \"foo\"\n- else\n  %input{:type =&gt; \"checkbox\", :name =&gt; \"foo\", :value =&gt; \"bar\"}= \"foo\"\n</code></pre>\n\n<p>Anyone who know a better way?</p>\n"}, {"tags": ["ruby", "selenium", "testing", "jenkins", "download"], "comments": [{"owner": {"reputation": 346, "user_id": 4911426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1087083604639482/picture?type=large", "display_name": "Shahboz", "link": "https://stackoverflow.com/users/4911426/shahboz"}, "edited": false, "score": 0, "creation_date": 1533750474, "post_id": 51748119, "comment_id": 90465293, "body": "Well, I am assuming you&#39;re saying it works fine in RubyMine because it&#39;s in your local machine right? Or are you executing the test remotely against a jenkins slave? Jenkins saves the file wherever you say it to save it in your code, it expects it to save it in the slave your jenkins job is executed."}, {"owner": {"reputation": 25, "user_id": 6571311, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208584417422456/picture?type=large", "display_name": "Engin Topuzoglu", "link": "https://stackoverflow.com/users/6571311/engin-topuzoglu"}, "reply_to_user": {"reputation": 346, "user_id": 4911426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1087083604639482/picture?type=large", "display_name": "Shahboz", "link": "https://stackoverflow.com/users/4911426/shahboz"}, "edited": false, "score": 0, "creation_date": 1533793414, "post_id": 51748119, "comment_id": 90478240, "body": "Yeah sorry i am new to testing in jenkins and in general. it works fine in rubymine because its on my local machine. so i dont need any specifications in the jenkins settings or something? my work running in rubymine should also run on jenkins, since i say it in my code where it should be downloaded to, right?"}], "owner": {"reputation": 25, "user_id": 6571311, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208584417422456/picture?type=large", "display_name": "Engin Topuzoglu", "link": "https://stackoverflow.com/users/6571311/engin-topuzoglu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533735346, "creation_date": 1533735346, "question_id": 51748119, "link": "https://stackoverflow.com/questions/51748119/jenkins-automated-test-download-file-error", "title": "Jenkins automated test download file Error", "body": "<p>I hope you can help me with this.</p>\n\n<p>I am running an automated test in ruby/cucumber with Selenium and Chrome, \nto verify that a file I click on is downloaded and saved. It works fine in RubyMine, but the nightly tests in Jenkins fail. The clicking works, the download verification doesnt. Do I need a different setting in Jenkins, or do I need to change some configurations, so that Jenkins can verify that the file is downloaded. I'm not really sure where Jenkins downloads the file to, I implemented a ruby method with \"send_keys\" for the download and folder.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["mysql", "ruby", "mongify"], "answers": [{"comments": [{"owner": {"reputation": 1294, "user_id": 2315104, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/67897548b9d55c6e2f8e3171fa7ca20d?s=128&d=identicon&r=PG", "display_name": "user2315104", "link": "https://stackoverflow.com/users/2315104/user2315104"}, "edited": false, "score": 0, "creation_date": 1533751070, "post_id": 51748110, "comment_id": 90465620, "body": "thanks @matthewd . i updated answer per your suggestion. still getting new error . please suggest"}, {"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "reply_to_user": {"reputation": 1294, "user_id": 2315104, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/67897548b9d55c6e2f8e3171fa7ca20d?s=128&d=identicon&r=PG", "display_name": "user2315104", "link": "https://stackoverflow.com/users/2315104/user2315104"}, "edited": false, "score": 0, "creation_date": 1533772168, "post_id": 51748110, "comment_id": 90473607, "body": "The changes you describe do not match the above. You need to add the line I showed to the file named <code>Gemfile</code>."}, {"owner": {"reputation": 1294, "user_id": 2315104, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/67897548b9d55c6e2f8e3171fa7ca20d?s=128&d=identicon&r=PG", "display_name": "user2315104", "link": "https://stackoverflow.com/users/2315104/user2315104"}, "edited": false, "score": 0, "creation_date": 1533786952, "post_id": 51748110, "comment_id": 90476397, "body": "thanks. can you please check this pastebin: <a href=\"https://pastebin.com/vTey9cDa\" rel=\"nofollow noreferrer\">pastebin.com/vTey9cDa</a>"}, {"owner": {"reputation": 1294, "user_id": 2315104, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/67897548b9d55c6e2f8e3171fa7ca20d?s=128&d=identicon&r=PG", "display_name": "user2315104", "link": "https://stackoverflow.com/users/2315104/user2315104"}, "edited": false, "score": 0, "creation_date": 1533787502, "post_id": 51748110, "comment_id": 90476531, "body": "i have modified the mongify.gemspec file and added lines for mysql2. can you please check this pastebin: <a href=\"https://pastebin.com/vTey9cDa\" rel=\"nofollow noreferrer\">pastebin.com/vTey9cDa</a>"}, {"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "reply_to_user": {"reputation": 1294, "user_id": 2315104, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/67897548b9d55c6e2f8e3171fa7ca20d?s=128&d=identicon&r=PG", "display_name": "user2315104", "link": "https://stackoverflow.com/users/2315104/user2315104"}, "edited": false, "score": 0, "creation_date": 1533790178, "post_id": 51748110, "comment_id": 90477183, "body": "I said &quot;add the line I showed to the file named Gemfile&quot;. You said &quot;i have modified the mongify.gemspec file&quot;. I cannot help further."}, {"owner": {"reputation": 1294, "user_id": 2315104, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/67897548b9d55c6e2f8e3171fa7ca20d?s=128&d=identicon&r=PG", "display_name": "user2315104", "link": "https://stackoverflow.com/users/2315104/user2315104"}, "edited": false, "score": 0, "creation_date": 1533792409, "post_id": 51748110, "comment_id": 90477926, "body": "actually , it was written in Gemfile that all metadata and dependency will be fetched from gemspec so i did that. now, i have added the line to Gemfile and ran again the command bundle update --force and bundle install --force .... the command is still running"}, {"owner": {"reputation": 1294, "user_id": 2315104, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/67897548b9d55c6e2f8e3171fa7ca20d?s=128&d=identicon&r=PG", "display_name": "user2315104", "link": "https://stackoverflow.com/users/2315104/user2315104"}, "edited": false, "score": 0, "creation_date": 1533793489, "post_id": 51748110, "comment_id": 90478267, "body": "still the error :          1: from C:/Ruby25/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb&zwnj;&#8203;:13 5:in <code>rescue in require&#39; C:&#47;Ruby25&#47;lib&#47;ruby&#47;2.5.0&#47;rubygems&#47;core_ext&#47;kernel_require.rb&zwnj;&#8203;:135:in </code>require&#39;: C ould not load &#39;active_record/connection_adapters/mysql2_adapter&#39;. Make sure that  the adapter in config/database.yml is valid. If you use an adapter other than &#39; mysql&#39;, &#39;mysql2&#39;, &#39;postgresql&#39; or &#39;sqlite3&#39; add the necessary adapter gem to the  Gemfile. (LoadError)"}, {"owner": {"reputation": 1294, "user_id": 2315104, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/67897548b9d55c6e2f8e3171fa7ca20d?s=128&d=identicon&r=PG", "display_name": "user2315104", "link": "https://stackoverflow.com/users/2315104/user2315104"}, "edited": false, "score": 0, "creation_date": 1533797167, "post_id": 51748110, "comment_id": 90479903, "body": "can you please help here .....i followed the steps but still failing with above error"}], "tags": [], "owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "is_accepted": false, "score": 0, "last_activity_date": 1533735327, "creation_date": 1533735327, "answer_id": 51748110, "question_id": 51747980, "link": "https://stackoverflow.com/questions/51747980/gem-load-error-while-migrating-from-mysql-to-mongodb/51748110#51748110", "title": "Gem :: load error while migrating from MySQL to MongoDB", "body": "<p>The error message is misleading: you're using a version of the <code>mysql2</code> gem that's too <em>new</em> for Active Record 4.2.10 (the latest version <code>mongify</code> supports).</p>\n\n<p>The simplest solution is to explicitly use an older version of <code>mysql2</code> by including a version constraint in your Gemfile entry:</p>\n\n<pre><code>gem \"mysql2\", \"&lt; 0.5\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1294, "user_id": 2315104, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/67897548b9d55c6e2f8e3171fa7ca20d?s=128&d=identicon&r=PG", "display_name": "user2315104", "link": "https://stackoverflow.com/users/2315104/user2315104"}, "is_accepted": false, "score": 0, "last_activity_date": 1534440581, "creation_date": 1534440581, "answer_id": 51882477, "question_id": 51747980, "link": "https://stackoverflow.com/questions/51747980/gem-load-error-while-migrating-from-mysql-to-mongodb/51882477#51882477", "title": "Gem :: load error while migrating from MySQL to MongoDB", "body": "<p>Finally it is resolved. it has the issue with ruby version and 32 bit libraries. ruby 2.3 was properly tested and works fine with mongify gem. i was using latest version of ruby and was the issue.</p>\n"}], "owner": {"reputation": 1294, "user_id": 2315104, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/67897548b9d55c6e2f8e3171fa7ca20d?s=128&d=identicon&r=PG", "display_name": "user2315104", "link": "https://stackoverflow.com/users/2315104/user2315104"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534440581, "creation_date": 1533734942, "last_edit_date": 1533750978, "question_id": 51747980, "link": "https://stackoverflow.com/questions/51747980/gem-load-error-while-migrating-from-mysql-to-mongodb", "title": "Gem :: load error while migrating from MySQL to MongoDB", "body": "<p>I am trying to migrate the Mysql DB to MongoDB using tool <strong>Mongify</strong> by referring the\n<a href=\"http://mongify.com/getting_started.html\" rel=\"nofollow noreferrer\">documentation</a> :  </p>\n\n<p>i have seen , there are few posts already present regarding such migration but they mentioned issues with rails application and some dependencies on rails. however, in my case , it is just simple migration without rails.</p>\n\n<p>Environment details:</p>\n\n<ul>\n<li><p>windows enterprise 7</p></li>\n<li><p>Mysql community server : 5.7</p></li>\n<li><p>Mongo db server : 4.0</p></li>\n<li><p>ruby : ruby 2.5.1p57 (2018-03-29 revision 63029) [i386-mingw32]</p></li>\n<li><p>Mysql c Connector (32 bit)</p></li>\n</ul>\n\n<p>mysql server and mongo db server are working fine as a service. </p>\n\n<p>rubygems environment details as follows :</p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 2.7.6\n  - RUBY VERSION: 2.5.1 (2018-03-29 patchlevel 57) [i386-mingw32]\n  - INSTALLATION DIRECTORY: C:/Ruby25/lib/ruby/gems/2.5.0\n  - USER INSTALLATION DIRECTORY: C:/Users/irfan.sayed/.gem/ruby/2.5.0\n  - RUBY EXECUTABLE: C:/Ruby25/bin/ruby.exe\n  - EXECUTABLE DIRECTORY: C:/Ruby25/bin\n  - SPEC CACHE DIRECTORY: C:/Users/irfan.sayed/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: C:/ProgramData\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86-mingw32\n  - GEM PATHS:\n     - C:/Ruby25/lib/ruby/gems/2.5.0\n     - C:/Users/irfan.sayed/.gem/ruby/2.5.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - C:\\windows\\system32\n     - C:\\windows\n     - C:\\windows\\System32\\Wbem\n     - C:\\Program Files (x86)\\Microsoft Application Virtualization Client\n     - C:\\Program Files\\PuTTY\\\n     - C:\\apache-maven-3.5.2-bin\\apache-maven-3.5.2\\bin\n     - \"C:\\Program Files\\Java\\jdk1.8.0_151\\bin\"\n     - C:\\Program Files\\Git\\cmd\n     - C:\\HashiCorp\\Vagrant\\bin\n     - C:\\windows\\System32\\WindowsPowerShell\\v1.0\\\n     - C:\\windows\\System32\\WindowsPowerShell\\v1.0\\\n     - C:\\Ruby25\\bin\n     - C:\\Program Files\\MySQL\\MySQL Server 8.0\\bin\n     - C:\\Program Files\\MongoDB\\Server\\4.0\\bin\n</code></pre>\n\n<p>locally installed Gems are as follows :</p>\n\n<pre><code>activemodel (5.2.1, 4.2.10)\nactiverecord (5.2.1, 4.2.10)\nactiverecord-mysql2-adapter (0.0.3)\nactivesupport (5.2.1, 4.2.10)\narel (9.0.0, 6.0.4)\nawesome_print (1.8.0)\nbackports (3.11.3)\nbigdecimal (default: 1.3.4)\nbson (1.12.5)\nbson_ext (1.12.5)\nbuilder (3.2.3)\nbundler (1.16.3)\nbyebug (10.0.2)\ncmath (default: 1.0.0)\ncoderay (1.1.2)\nconcurrent-ruby (1.0.5)\ncoolline (0.5.0)\ncsv (default: 1.0.0)\ncucumber (3.1.2)\ncucumber-core (3.2.0)\ncucumber-expressions (6.0.1)\ncucumber-tag_expressions (1.1.1)\ncucumber-wire (0.0.1)\ndate (default: 1.0.0)\ndbm (default: 1.0.0)\ndid_you_mean (1.2.0)\ndiff-lcs (1.3)\netc (default: 1.0.0)\nfcntl (default: 1.0.0)\nfiddle (default: 1.0.0)\nfileutils (default: 1.0.2)\ngdbm (default: 2.0.0)\ngherkin (5.1.0)\nhighline (1.7.8)\ni18n (0.9.5, 0.7.0)\nio-console (default: 0.4.6)\nipaddr (default: 1.2.0)\njazz_fingers (5.0.0)\njson (default: 2.1.0)\nmetaclass (0.0.4)\nmethod_source (0.9.0)\nminitest (5.11.3, 5.10.3)\nmocha (1.6.0)\nmongify (1.3.2)\nmongo (1.12.5)\nmulti_json (1.13.1)\nmulti_test (0.1.2)\nmysql (2.9.1 x86-mingw32)\nmysql2 (0.5.2 x86-mingw32)\nnet-telnet (0.1.1)\nopenssl (default: 2.1.0)\npg (1.0.0 x86-mingw32)\npower_assert (1.1.1)\npry (0.11.3)\npry-byebug (3.6.0)\npry-coolline (0.2.5)\npsych (default: 3.0.2)\nrake (12.3.1, 12.3.0, 11.3.0)\nrdoc (default: 6.0.1)\nrspec (2.99.0)\nrspec-collection_matchers (1.1.3)\nrspec-core (2.99.2)\nrspec-expectations (2.99.2)\nrspec-mocks (2.99.4)\nscanf (default: 1.0.0)\nsdbm (default: 1.0.0)\nsqlite3 (1.3.13 x86-mingw32)\nstringio (default: 0.0.1)\nstrscan (default: 1.0.0)\ntest-unit (3.2.7)\nthread_safe (0.3.6)\ntzinfo (1.2.5)\nunicode_utils (1.4.0)\nwatchr (0.7)\nwebrick (default: 1.4.2)\nxmlrpc (0.3.0)\nyard (0.9.15)\nzlib (default: 1.0.0)\n</code></pre>\n\n<p><code>bundle install</code> and <code>bundle update</code> commands are just working fine. all the dependencies are gems are resolved properly and available in default folder of ruby. </p>\n\n<p><code>database.config</code> file used as below :</p>\n\n<pre><code>sql_connection do\n  adapter   \"mysql2\"\n  host      \"localhost\"\n  username  \"root\"\n  password  \"&lt;password&gt;\"\n  database  \"abc\"\nend\n\nmongodb_connection do\n  host      \"localhost\"\n  database  \"db\"\nend\n</code></pre>\n\n<p>however getting following error :</p>\n\n<pre><code>mongify check database.config\nTraceback (most recent call last):\n        10: from C:/Ruby25/bin/mongify:23:in `&lt;main&gt;'\n         9: from C:/Ruby25/bin/mongify:23:in `load'\n         8: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/mongify-1.3.2/bin/mongify:17\n:in `&lt;top (required)&gt;'\n         7: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/mongify-1.3.2/lib/mongify/cl\ni/application.rb:28:in `execute!'\n         6: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/mongify-1.3.2/lib/mongify/cl\ni/command/worker.rb:68:in `execute'\n         5: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/mongify-1.3.2/lib/mongify/cl\ni/command/worker.rb:99:in `check_sql_connection'\n         4: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/mongify-1.3.2/lib/mongify/da\ntabase/sql_connection.rb:56:in `has_connection?'\n         3: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/mongify-1.3.2/lib/mongify/da\ntabase/sql_connection.rb:40:in `setup_connection_adapter'\n         2: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/activerecord-4.2.10/lib/acti\nve_record/connection_handling.rb:50:in `establish_connection'\n         1: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/activerecord-4.2.10/lib/acti\nve_record/connection_adapters/connection_specification.rb:174:in `spec'\nC:/Ruby25/lib/ruby/gems/2.5.0/gems/activerecord-4.2.10/lib/active_record/connect\nion_adapters/connection_specification.rb:177:in `rescue in spec': Specified 'mys\nql2' for database adapter, but the gem is not loaded. Add `gem 'mysql2'` to your\n Gemfile (and ensure its version is at the minimum required by ActiveRecord). (G\nem::LoadError)\n</code></pre>\n\n<p>not able to understand what is still missing. is the issue with MySQL adapter OR some version compatibility issue </p>\n\n<p>EDIT : further update per suggestion from matthewd</p>\n\n<p>i edited Gemfile and added following line </p>\n\n<pre><code>s.add_development_dependency('mysql2', '~&gt; 0.4.10')\n</code></pre>\n\n<p>ran the <code>bundle update --force</code> , <code>bundle install --force</code> but it was still installing the 0.5.x version of mysql2 gem only \nso i manually installed mysql2 gem of version 0.4.10 using following command</p>\n\n<pre><code>gem install mysql2 -v 0.4.10\n</code></pre>\n\n<p>but now it is giving following error </p>\n\n<pre><code>        11: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/mysql2-0.4.10-x86-mingw32/li\nb/mysql2.rb:31:in `&lt;top (required)&gt;'\n        10: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/activesupport-4.2.10/lib/act\nive_support/dependencies.rb:274:in `require'\n         9: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/activesupport-4.2.10/lib/act\nive_support/dependencies.rb:240:in `load_dependency'\n         8: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/activesupport-4.2.10/lib/act\nive_support/dependencies.rb:274:in `block in require'\n         7: from C:/Ruby25/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59\n:in `require'\n         6: from C:/Ruby25/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59\n:in `require'\n         5: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/mysql2-0.4.10-x86-mingw32/li\nb/mysql2/mysql2.rb:2:in `&lt;top (required)&gt;'\n         4: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/activesupport-4.2.10/lib/act\nive_support/dependencies.rb:274:in `require'\n         3: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/activesupport-4.2.10/lib/act\nive_support/dependencies.rb:240:in `load_dependency'\n         2: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/activesupport-4.2.10/lib/act\nive_support/dependencies.rb:274:in `block in require'\n         1: from C:/Ruby25/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59\n:in `require'\nC:/Ruby25/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require': Co\nuld not load 'active_record/connection_adapters/mysql2_adapter'. Make sure that\nthe adapter in config/database.yml is valid. If you use an adapter other than 'm\nysql', 'mysql2', 'postgresql' or 'sqlite3' add the necessary adapter gem to the\nGemfile. (LoadError)\n</code></pre>\n"}, {"tags": ["ruby", "alexa", "alexa-skills-kit", "alexa-skill", "alexa-app"], "comments": [{"owner": {"reputation": 4089, "user_id": 1574023, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/giD8w.jpg?s=128&g=1", "display_name": "Cicil Thomas", "link": "https://stackoverflow.com/users/1574023/cicil-thomas"}, "edited": false, "score": 0, "creation_date": 1533728051, "post_id": 51745636, "comment_id": 90450966, "body": "what are the errors?"}, {"owner": {"reputation": 1573, "user_id": 2400445, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/h7Bym.jpg?s=128&g=1", "display_name": "Nidhin S G", "link": "https://stackoverflow.com/users/2400445/nidhin-s-g"}, "reply_to_user": {"reputation": 4089, "user_id": 1574023, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/giD8w.jpg?s=128&g=1", "display_name": "Cicil Thomas", "link": "https://stackoverflow.com/users/1574023/cicil-thomas"}, "edited": false, "score": 0, "creation_date": 1533728295, "post_id": 51745636, "comment_id": 90451116, "body": "well the errors shown in json response is this, which is pretty much straight.. So i don&#39;t think its helpfull &#39;&quot;error&quot;=&gt;{&quot;type&quot;=&gt;&quot;INVALID_RESPONSE&quot;, &quot;message&quot;=&gt;&quot;An exception occurred while dispatching the request to the skill.&quot;}}}}&#39;"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 3, "creation_date": 1533728886, "post_id": 51745636, "comment_id": 90451517, "body": "When asking how to fix an error, knowing the error is a critical, probably most important thing that needs stated. You may want to expand a little more on that aspect in the actual question, such as EXACT error, what line, relevant context, etc."}, {"owner": {"reputation": 1573, "user_id": 2400445, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/h7Bym.jpg?s=128&g=1", "display_name": "Nidhin S G", "link": "https://stackoverflow.com/users/2400445/nidhin-s-g"}, "edited": false, "score": 0, "creation_date": 1533785411, "post_id": 51745636, "comment_id": 90476069, "body": "okay, my mistake, actually there is no response.. and the reason for no response shown in json was this &quot;error&quot;=&gt;{&quot;type&quot;=&gt;&quot;INVALID_RESPONSE&quot;, &quot;message&quot;=&gt;&quot;An exception occurred while dispatching the request to the skill.&quot;}}}}"}], "answers": [{"tags": [], "owner": {"reputation": 405, "user_id": 2052732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cZLui.png?s=128&g=1", "display_name": "AhDev", "link": "https://stackoverflow.com/users/2052732/ahdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1610373075, "creation_date": 1610373075, "answer_id": 65668124, "question_id": 51745636, "link": "https://stackoverflow.com/questions/51745636/alexa-ruby-playing-audio-files/65668124#65668124", "title": "Alexa - Ruby - Playing Audio Files", "body": "<p>So depending on the type of audio you are trying to play you may want to try a different strategy. The audio player directive is more for playing something like a stream and gives the pause, rewind, etc type controls. It would be used if you where creating a music player or playing a long format audio file like a podcast.</p>\n<p>From you example it looks like you are just trying to play a simple mp3. You can do this with the exact same way you did the speech using SSML.</p>\n<p>For Example:</p>\n<pre><code>def index\nparsed_request = JSON.parse(request.body.read)\nalexa = AlexaRuby.new(parsed_request)\nspeech = &quot;&lt;speak&gt;\n  Welcome to Ride Hailer. \n  &lt;audio     src=&quot;soundbank://soundlibrary/transportation/amzn_sfx_car_accelerate_01&quot; /&gt; \nYou can order a ride, or request a fare estimate. \nWhich will it be?&lt;/speak&gt;&quot; \nresponse = alexa.response.ask!(speech)\nrender json: response\nend\n</code></pre>\n<p>You can find additional info here</p>\n<p><a href=\"https://developer.amazon.com/en-US/docs/alexa/custom-skills/speech-synthesis-markup-language-ssml-reference.html\" rel=\"nofollow noreferrer\">https://developer.amazon.com/en-US/docs/alexa/custom-skills/speech-synthesis-markup-language-ssml-reference.html</a></p>\n"}], "owner": {"reputation": 1573, "user_id": 2400445, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/h7Bym.jpg?s=128&g=1", "display_name": "Nidhin S G", "link": "https://stackoverflow.com/users/2400445/nidhin-s-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1610373075, "creation_date": 1533727857, "last_edit_date": 1533785356, "question_id": 51745636, "link": "https://stackoverflow.com/questions/51745636/alexa-ruby-playing-audio-files", "title": "Alexa - Ruby - Playing Audio Files", "body": "<p>I am trying to play an audio file through Alexa. My backend in Ruby on Rails and I am using alexa-ruby gem.</p>\n\n<p>I was able to produce speeches via ask and tell directive like this</p>\n\n<pre><code>def index\n    parsed_request = JSON.parse(request.body.read)\n    alexa = AlexaRuby.new(parsed_request)\n    speech = \"Hey there! I am alexa\"\n    response = alexa.response.ask!(speech)\n    render json: response\nend\n</code></pre>\n\n<p>When I tried to play audio, I am getting no response. This is what I tried to do</p>\n\n<pre><code>def index\n    parsed_request = JSON.parse(request.body.read)\n    alexa = AlexaRuby.new(parsed_request)\n    params = { url: 'https://s3.amazonaws.com/my-ssml-samples/Flourish.mp3', token: 'flourish-token', offset: 0 }\n    response = alexa.response.add_audio_player_directive(:start, params)\n    render json: response\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "erb", "will-paginate"], "comments": [{"owner": {"reputation": 35510, "user_id": 3706016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wqmW0.jpg?s=128&g=1", "display_name": "jarlh", "link": "https://stackoverflow.com/users/3706016/jarlh"}, "edited": false, "score": 1, "creation_date": 1533727134, "post_id": 51745370, "comment_id": 90450336, "body": "Why the &lt;sql&gt; tag?"}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533729991, "post_id": 51746122, "comment_id": 90452233, "body": "I will be happy to delete my answer in favor of this approach. :)"}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 6, "last_activity_date": 1533729826, "last_edit_date": 1533729826, "creation_date": 1533729421, "answer_id": 51746122, "question_id": 51745370, "link": "https://stackoverflow.com/questions/51745370/display-last-record-in-erb-rails-with-will-paginate/51746122#51746122", "title": "Display last record in erb Rails with will_paginate", "body": "<p>When all Goole-fu fails, we have to dig in <a href=\"https://github.com/mislav/will_paginate/blob/master/lib/will_paginate/collection.rb\" rel=\"noreferrer\">the source code</a>. There we find some interesting methods:</p>\n\n<blockquote>\n<pre><code># Any will_paginate-compatible collection should have these methods:\n#   current_page, per_page, offset, total_entries, total_pages\n#\n# It can also define some of these optional methods:\n#   out_of_bounds?, previous_page, next_page\n</code></pre>\n</blockquote>\n\n<p>From these, the method <code>next_page</code> looks interesting, as it seems to return <code>nil</code> if there are no more pages.</p>\n\n<p>Now we can construct the loop: </p>\n\n<pre><code>&lt;% @tribunes.each do |tribune| %&gt;\n  &lt;% if !@tribunes.next_page &amp;&amp; tribune == @tribunes.last %&gt;\n     &lt;!-- We're on the last page and the last tribune of that page --&gt;\n     Last tribune content\n  &lt;% else %&gt;\n     &lt;!-- We still have tribunes to go --&gt;\n     Normal tribune content\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 318, "user_id": 8398293, "user_type": "registered", "profile_image": "https://graph.facebook.com/732236736985262/picture?type=large", "display_name": "Pierre Laburthe", "link": "https://stackoverflow.com/users/8398293/pierre-laburthe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 51746122, "answer_count": 1, "score": 0, "last_activity_date": 1533896767, "creation_date": 1533727086, "last_edit_date": 1533896767, "question_id": 51745370, "link": "https://stackoverflow.com/questions/51745370/display-last-record-in-erb-rails-with-will-paginate", "title": "Display last record in erb Rails with will_paginate", "body": "<p>I am trying to display the last instanced record from my model Tribune with this layout : <br />\n<br />\nSome random tribune <br />\nSome random tribune </p>\n\n<h1>Last</h1>\n\n<p>Last recorded tribune </p>\n\n<p>I am using the gem will_paginate which allow me to display 10 tribunes / per page. \nThe issue is that the layout is working but applied to each page. \nEvery 10 tribunes, one is identified as \"last\". Obviously, I would like to have only one tribune identified as last. \n<br /></p>\n\n<p>Here is my code : </p>\n\n<pre><code>&lt;div class=\"wrapping\"&gt;\n\n\n&lt;% @tribunes.each do |tribune| %&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;div class=\"mouse-out-container\"&gt;&lt;/div&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;% if tribune == @tribunes.last\n%&gt;\n  &lt;h1&gt;Last&lt;/h1&gt;\n  &lt;div class=\"col-xs-12 col-md-12\"&gt;\n    &lt;div class=\"card\"&gt;\n      &lt;div class=\"card-category\"&gt;Popular&lt;/div&gt;\n      &lt;div class=\"card-description\"&gt;\n        &lt;h2&gt;&lt;%= tribune.title %&gt;&lt;/h2&gt;\n        &lt;p&gt;&lt;%= tribune.content.split[0...25].join(' ') %&gt;...&lt;/p&gt;\n      &lt;/div&gt;\n      &lt;img class=\"card-user\" src=\"https://kitt.lewagon.com/placeholder/users/tgenaitay\"&gt;\n      &lt;%= link_to \"\", tribune, :class =&gt; \"card-link\" %&gt;\n    &lt;/div&gt;\n  &lt;% else %&gt;\n\n\n  &lt;div class=\"col-xs-12 col-md-12\"&gt;\n    &lt;div class=\"card\"&gt;\n      &lt;div class=\"card-category\"&gt;Popular&lt;/div&gt;\n      &lt;div class=\"card-description\"&gt;\n        &lt;h2&gt;&lt;%= tribune.title %&gt;&lt;/h2&gt;\n        &lt;p&gt;&lt;%= tribune.content.split[0...25].join(' ') %&gt;...&lt;/p&gt;\n      &lt;/div&gt;\n      &lt;img class=\"card-user\" src=\"https://kitt.lewagon.com/placeholder/users/tgenaitay\"&gt;\n      &lt;%= link_to \"\", tribune, :class =&gt; \"card-link\" %&gt;\n    &lt;/div&gt;\n\n      &lt;/div&gt;\n      &lt;% end %&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"center-paginate\"&gt;\n      &lt;%= will_paginate @tribunes, renderer: BootstrapPagination::Rails %&gt;\n    &lt;/div&gt;\n\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "puppet"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1533736907, "post_id": 51744340, "comment_id": 90457005, "body": "It is unclear what your current state is in terms of what kind of output you are getting and what you want to achieve. Please modify the question to give details on what the current situation is and what you are trying to achieve. However, I can tell you that your lambda iterator will have an error once you fix the <code>certificates</code> function because you will be attempting to modify the immutable variable <code>$domains</code> on each iteration. I can help you fix that too once you edit your question."}, {"owner": {"reputation": 41, "user_id": 10196860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQV71.png?s=128&g=1", "display_name": "TEDx", "link": "https://stackoverflow.com/users/10196860/tedx"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1533738862, "post_id": 51744340, "comment_id": 90458438, "body": "Hi Matt, thanks for your response. I&#39;ve updated my question according to your comment, I hope it&#39;s clear that we expect to see all of the SAN names of the certificate (instead of just the first). There is no error because the variable is declared within the scope of &quot;each&quot;."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533743123, "post_id": 51744340, "comment_id": 90461332, "body": "There is a lot of code and explanation missing here, but based on what you write all I can conclude is the line <code>&#39;domains&#39; =&gt; certificate.subject_alt_names</code> only returns one name, which means <code>certificate.subject_alt_names</code> only returns one name, which means the statement &quot;So far so good&quot; must be false. Where else could the problem be otherwise?"}, {"owner": {"reputation": 41, "user_id": 10196860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQV71.png?s=128&g=1", "display_name": "TEDx", "link": "https://stackoverflow.com/users/10196860/tedx"}, "edited": false, "score": 0, "creation_date": 1533744246, "post_id": 51744340, "comment_id": 90461989, "body": "Well, that&#39;s the question: the <code>certificate.subject_alt_names</code> returns all the names that are in the certificate, but when the code is run on an agent, it only returns the first name. My guess is that Puppet runs some modified version of Ruby or I&#39;m completely missing something. I&#39;ve created a demo that &quot;proves&quot; the &quot;subject_alt_names&quot; method will return the expected result: <a href=\"https://repl.it/repls/WickedFearfulAlgorithm\" rel=\"nofollow noreferrer\">repl.it/repls/WickedFearfulAlgorithm</a>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533744827, "post_id": 51744340, "comment_id": 90462302, "body": "Ok, right. Then we&#39;re on the same page. The problem must be in OpenSSL::X509::Certificate, because you say @x509 is an instance of that class. Therefore the problem can&#39;t really be anywhere else. I.e. step 1: narrow down the scope of your problem. This was my initial hunch also that there is a patch somewhere in Puppet for this behavior."}, {"owner": {"reputation": 41, "user_id": 10196860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQV71.png?s=128&g=1", "display_name": "TEDx", "link": "https://stackoverflow.com/users/10196860/tedx"}, "edited": false, "score": 0, "creation_date": 1533745071, "post_id": 51744340, "comment_id": 90462440, "body": "Good idea, I will look into that. Thanks!"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533745819, "post_id": 51744340, "comment_id": 90462832, "body": "Can you check what Ruby version you&#39;re running on the agent <code>ruby -v</code>? I tried your sample with everything from 1.8 to 2.5. Can&#39;t reproduce the problem with these standard Ruby versions. Other possibility is some sort of OpenSSL issue."}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1533747094, "post_id": 51744340, "comment_id": 90463527, "body": "With the new information provided in the question, I would agree the problem stems from the <code>OpenSSL</code> class usage now that I understand what the use of <code>certificates_test</code> is proving as a control variable. If <code>subject_alt_names</code> is returning an array of names from the certs, then why reinstantiate the object within the mapping in the second block of code? Is that method not usable directly for your desired functionality? I am probably missing something here about the intent of your array to hash method."}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1533747275, "post_id": 51744340, "comment_id": 90463635, "body": "As for the the immutability issue, I misinterpreted the purpose of that variable and thought you wanted it to aggregate outside the lambda scope at the class scope. You are totally correct about that code being fine."}, {"owner": {"reputation": 41, "user_id": 10196860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQV71.png?s=128&g=1", "display_name": "TEDx", "link": "https://stackoverflow.com/users/10196860/tedx"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533747598, "post_id": 51744340, "comment_id": 90463818, "body": "@Casper I&#39;ve included the output of the <code>facter rubysitedir rubyversion</code> command in my question, which gives the same output on both the Puppet master and agent servers. @Matt Updated my question so that the second code block is a bit more clear: the output of the method needs to be something Puppet can understand, this was the easiest solution I could come up with."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533748220, "post_id": 51744340, "comment_id": 90464117, "body": "Can you run <code>ruby -ropenssl -e &#39;puts OpenSSL::OPENSSL_VERSION&#39;</code> on the agent."}, {"owner": {"reputation": 41, "user_id": 10196860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQV71.png?s=128&g=1", "display_name": "TEDx", "link": "https://stackoverflow.com/users/10196860/tedx"}, "edited": false, "score": 0, "creation_date": 1533749252, "post_id": 51744340, "comment_id": 90464673, "body": "Ruby is not installed on the agent. The code is running on the Puppet server, using JRuby. I&#39;m trying to update the OpenSSL version there (gem called &quot;jruby-openssl&quot;) but so far I&#39;ve only managed to break more than solve anything..."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533749715, "post_id": 51744340, "comment_id": 90464932, "body": "Hehe. Sounds like fun :) But I think you are on the right track. Updating OpenSSL is worth a shot."}, {"owner": {"reputation": 41, "user_id": 10196860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQV71.png?s=128&g=1", "display_name": "TEDx", "link": "https://stackoverflow.com/users/10196860/tedx"}, "edited": false, "score": 0, "creation_date": 1533751240, "post_id": 51744340, "comment_id": 90465719, "body": "Not really that much fun ;-) upgrading the package breaks a lot of dependencies... But I&#39;ll get there. Just stumbled upon a fun fact going through the history of the &quot;jruby-openssl&quot; gem... version 0.9.18 contained an update for SAN: &quot;simple resolution for handling subjectAltName multiple DNS: names&quot;. So, if I could just get that version working.... all problems will disappear :)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1533761535, "post_id": 51744340, "comment_id": 90470592, "body": "Since Puppet functions are run by the catalog compiler and not by the agent, it&#39;s unclear what code it is that you say only returns the first name on the agent.  You&#39;ve in fact not presented <i>anything</i> that would be conveyed to the agent."}, {"owner": {"reputation": 41, "user_id": 10196860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQV71.png?s=128&g=1", "display_name": "TEDx", "link": "https://stackoverflow.com/users/10196860/tedx"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1533763872, "post_id": 51744340, "comment_id": 90471421, "body": "@John I don&#39;t fully understand what you mean. In the last code block you can see the custom <code>certificates</code> function being called, which is in a manifest that is applied to the agent. The code that is not returning all of the SSL certificate SAN names is <code>certificate.subject_alt_names</code> (a call of the method <code>subject_alt_names</code> on <code>certificate</code> which is an instance of a Certificate class I wrote)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1533770588, "post_id": 51744340, "comment_id": 90473287, "body": "@TEDx, I see you&#39;ve solved your problem, so congratulations!  With respect to your comment, however, you have a misunderstanding: Puppet never applies <i>any</i> manifest to the target node.  Instead, it uses manifests to inform how to construct a <i>catalog</i> of classes and resources that are applied to the node.  You have not presented anything that shows how the results of your function call affect the contents of the catalog in any way."}, {"owner": {"reputation": 41, "user_id": 10196860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQV71.png?s=128&g=1", "display_name": "TEDx", "link": "https://stackoverflow.com/users/10196860/tedx"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1533803241, "post_id": 51744340, "comment_id": 90483282, "body": "@John thanks! And you are absolutely right, of course. I was really focussed on the issue of the custom <code>certificates</code> function and left out essential information on how it is used, and skipped essential parts of the Puppet process. I&#39;ve updated my question (still left out the actual code though) to give more information on how the function is used: the <code>$certificates</code> array produces input when constructing the catalog in order to create <code>nginx::resource::server</code> resources on a server running Nginx."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 10196860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQV71.png?s=128&g=1", "display_name": "TEDx", "link": "https://stackoverflow.com/users/10196860/tedx"}, "is_accepted": true, "score": 1, "last_activity_date": 1533766639, "creation_date": 1533766639, "answer_id": 51756423, "question_id": 51744340, "link": "https://stackoverflow.com/questions/51744340/custom-function-in-puppet-4-10-only-returning-first-array-item-in-hash/51756423#51756423", "title": "Custom function in Puppet 4.10 only returning first array item in hash", "body": "<p>Resolved this issue by updating the \"subject_alt_names\" method of the Certificate class. I think Puppet sometimes makes it difficult to develop extensions, because of the fact that custom functions are executed using JRuby (which has its differences). In this case, the OpenSSL extension that I was using doesn't return all the SAN names in one string, instead it splits it up and makes it an array of hashes.</p>\n\n<p>The following code works with the OpenSSL extension of both JRuby and Ruby (where the <code>x509</code> argument is an instance of <code>OpenSSL::X509::Certificate</code>):</p>\n\n<pre><code>def subject_alt_names x509\n  names = []\n\n  x509.extensions.each do |e|\n    next if e.oid != 'subjectAltName'\n\n    names &lt;&lt; e.value.split(',').map { |name|\n      name.strip.sub!('DNS:', '')\n    }\n  end\n\n  names\nend\n</code></pre>\n\n<p>Thanks for all of the comments! It really helped me figuring this out :)</p>\n"}], "owner": {"reputation": 41, "user_id": 10196860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQV71.png?s=128&g=1", "display_name": "TEDx", "link": "https://stackoverflow.com/users/10196860/tedx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 1, "accepted_answer_id": 51756423, "answer_count": 1, "score": 3, "last_activity_date": 1533802717, "creation_date": 1533723910, "last_edit_date": 1533802717, "question_id": 51744340, "link": "https://stackoverflow.com/questions/51744340/custom-function-in-puppet-4-10-only-returning-first-array-item-in-hash", "title": "Custom function in Puppet 4.10 only returning first array item in hash", "body": "<p>A custom function in Puppet that reads SSL certificates from a database, returns it's results as an array of hashes. This function is used to keep SSL certificates up to date on our proxy servers.</p>\n\n<p>When creating a proxy vhost, we read the SSL certificate to determine for which hosts the vhost should be active. We do this by retrieving the \"subject alternative names\" from the certificate and parsing them into an array.</p>\n\n<p>The following code extracts the SANs:</p>\n\n<pre><code>def subject_alt_names\n  san = @x509.extensions.find { |e| e.oid == 'subjectAltName' }\n  san.value.split(',').map { |name| name.strip.sub!('DNS:', '') }\nend\n</code></pre>\n\n<p>The <code>@x509</code> variable contains an instance of <code>OpenSSL::X509::Certificate.new</code> and the <code>subject_alt_names</code> produces the expected array of names that are in the certificate.</p>\n\n<p>So far so good!</p>\n\n<p>Now, when collecting all the certificates, we create an array of hashes based on the results we retrieved from the database.</p>\n\n<p>The code looks similar to:</p>\n\n<pre><code>Puppet::Functions.create_function(:'certificates') do\n  dispatch :up do\n  end\n\n  def up\n    # Omitted DB calls\n\n    mappings.map { |mapping|\n      certificate = Certificate.new(\n        OpenSSL::X509::Certificate.new(mapping['certificate']),\n        OpenSSL::PKey::RSA.new(mapping['private_key']),\n        mapping['intermediates']\n      )\n\n      {\n        'common_name' =&gt; certificate.common_name,\n        'domains' =&gt; certificate.subject_alt_names,\n        'private_key' =&gt; certificate.private_key,\n        'certificate' =&gt; certificate.x509,\n        'intermediates' =&gt; certificate.chain\n      }\n    }\n  end\nend\n</code></pre>\n\n<p>When calling the function in Puppet, the <code>domains</code> array in the hash only contains one entry (\"domain.tld\") instead of two (\"domain.tld\" and \"www.domain.tld\"). Most SSL certificates in the database contain two SAN names.</p>\n\n<p>A really simple test function produces the result that we expect:</p>\n\n<pre><code>Puppet::Functions.create_function(:'certificates_test') do\n  dispatch :up do\n  end\n\n  def up\n    test = \"DNS:domain.tld, DNS:www.domain.tld, DNS: www2.domain.tld\"\n\n    domains = test.split(',').map { |name| name.strip.sub!('DNS:', '') }\n\n    {\n      'domains' =&gt; domains\n    }\n  end\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n    \"domains\" =&gt; [\"domain.tld\", \"www.domain.tld\"]\n}\n</code></pre>\n\n<p>When executing the code in Puppet, only the first entry in the \"domains\" array is returned. The function is called in Puppet in a way similar as below:</p>\n\n<pre><code>certificates().each |$certificate| {\n    $domains = $certificate['domains']\n\n    # Omitted defining of hosts based on $certificate\n}\n</code></pre>\n\n<p>Running on Puppet 4.10.12 (server 2.8.1) on CentOS.</p>\n\n<p>Output of <code>facter rubysitedir rubyversion</code>:</p>\n\n<pre><code>rubysitedir =&gt; /opt/puppetlabs/puppet/lib/ruby/site_ruby/2.1.0\nrubyversion =&gt; 2.1.9\n</code></pre>\n\n<p>Any help would be much appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1533717043, "post_id": 51741319, "comment_id": 90443986, "body": "I cannot reproduce your code that&#39;s <i>&quot;not working&quot;</i>. What do you mean by &quot;not working&quot;? <code>hash.except(:c)</code> returns <code>{:a=&gt;true, :b=&gt;false}</code>, as I&#39;d expect. However, note that <code>Hash#except</code> is a method added by <code>ActiveSupport</code> (i.e. part of Rails), not core ruby."}, {"owner": {"reputation": 954, "user_id": 2539135, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Ilkwg.jpg?s=128&g=1", "display_name": "Ashish Jambhulkar", "link": "https://stackoverflow.com/users/2539135/ashish-jambhulkar"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533717204, "post_id": 51741319, "comment_id": 90444095, "body": "sorry, I was testing it in irb, thanks now <code>except</code> is working in rails console"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1533717476, "post_id": 51741319, "comment_id": 90444276, "body": "Since you actually wanted to skip <code>:c</code> <i>and</i> <code>:b</code>, you could do: <code>hash.except(:b, :c)</code>. Or maybe what you actually want (since the values for <code>:b</code> and <code>:c</code> are <code>false</code> and <code>nil</code> respectively) is something like: <code>hash.keep_if { |k, v| v }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 954, "user_id": 2539135, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Ilkwg.jpg?s=128&g=1", "display_name": "Ashish Jambhulkar", "link": "https://stackoverflow.com/users/2539135/ashish-jambhulkar"}, "edited": false, "score": 0, "creation_date": 1533717285, "post_id": 51741456, "comment_id": 90444155, "body": "Awesome , works smoothly. I like the way you use splat operator keeping it more generic."}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 2, "last_activity_date": 1533715116, "creation_date": 1533715116, "answer_id": 51741456, "question_id": 51741319, "link": "https://stackoverflow.com/questions/51741319/skip-key-from-hash-loop/51741456#51741456", "title": "Skip key from hash loop", "body": "<p>Actually <code>hash.except(:c)</code> returns <code>{ a: true, b: false }</code> as expected. Since you're using <code>Rails</code> it should work. The only subtle moment, that I want to take a note on is that:</p>\n\n<pre><code>hash.except([:b, :c])\n</code></pre>\n\n<p>won't work. You need to use</p>\n\n<pre><code>hash.except(:b, :c)\n</code></pre>\n\n<p>instead.</p>\n\n<p>For general solution you need to use splat operator:</p>\n\n<pre><code>keys = [:b, :c]\nhash.except(*keys)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 2, "last_activity_date": 1533721906, "last_edit_date": 1533721906, "creation_date": 1533716175, "answer_id": 51741779, "question_id": 51741319, "link": "https://stackoverflow.com/questions/51741319/skip-key-from-hash-loop/51741779#51741779", "title": "Skip key from hash loop", "body": "<p>If you simply need to skip it while looping over the hash pairs, I personally would steer clear of using <code>except</code>, and use the uglier <code>next if key == whatever</code> within the loop. </p>\n\n<p>A equality check between symbols is cheap, about the the most low overhead thing that can be done in Ruby, the basic equivalent of comparing two integers or booleans. </p>\n\n<p><code>except</code> on the other hand is not, especially as the size of the hash grows. You are creating a new cloned hash, minus the specified values, every time you call it. Even with a small hash, you are creating a new object needlessly. </p>\n\n<p>I understand that many Ruby users are forever in pursuit of the \"one-liners\" or absolute shortest amount of code possible, I am guilty of it myself, but it needs done mindfully of whats going on beneath the surface, or you are creating less efficient code, not more.</p>\n\n<p>So although not as \"pretty\", this would be more efficient:</p>\n\n<pre><code>hash.each do |k, v|\n  next if k == :b || k == :c\n   # Do stuff\nend\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>I was curious of the performance difference between what I was stating, and the use of <code>except</code>, and the resulting differences are significant. </p>\n\n<p>First, I added the source for <code>except</code>, I didn't have Rails installed. This is straight from the source code from <code>activesupport/lib/active_support/core_ext/hash/except.rb</code>.</p>\n\n<pre><code>class Hash\n\n  def except!(*keys)\n    keys.each { |key| delete(key) }\n    self\n  end\n\n  def except(*keys)\n    dup.except!(*keys)\n  end\nend\n</code></pre>\n\n<p>Then I did some benchmarking. I figured a 1,000,000 samples was enough for one run.</p>\n\n<pre><code>require 'benchmark'\n\nhash = { a: true, b: false, c: nil }\ncount = 1_000_000\n\nBenchmark.bm do |bm|\n\n  bm.report(\"except\") do\n\n    count.times do\n        hash.except(:b, :c).each do |k, v|\n          # Do nothing\n        end\n    end\n  end\n\n  bm.report(\"next\") do\n\n    count.times do\n      hash.each do |k, v|\n        next if k == :b || k == :c\n        # Do nothing\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Running various times, including changing to <code>bmbm</code> to confirm the GC isn't skewing anything:</p>\n\n<pre><code>           user     system      total        real\nexcept  1.282000   0.000000   1.282000 (  1.276943)\nnext    0.250000   0.000000   0.250000 (  0.246193)\n</code></pre>\n\n<p>On average, the use of <code>next</code> resulting in over 5x faster code. This difference grows even more the larger the hash becomes.</p>\n"}, {"tags": [], "owner": {"reputation": 340, "user_id": 6855759, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3UfK3V6lnPY/AAAAAAAAAAI/AAAAAAAAAlU/CG1lontACf0/photo.jpg?sz=128", "display_name": "Caleb Keene", "link": "https://stackoverflow.com/users/6855759/caleb-keene"}, "is_accepted": false, "score": -1, "last_activity_date": 1533717967, "creation_date": 1533717967, "answer_id": 51742339, "question_id": 51741319, "link": "https://stackoverflow.com/questions/51741319/skip-key-from-hash-loop/51742339#51742339", "title": "Skip key from hash loop", "body": "<p>I'd probably just do something like this</p>\n\n<pre><code>my_hash = hash.reject { |k, _| %i[a b].include?(k) }\n\nmy_hash.each do |k, v|\n  # Do what you need to and be free from worry about those pesky :a and :b keys\nend\n</code></pre>\n"}], "owner": {"reputation": 954, "user_id": 2539135, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Ilkwg.jpg?s=128&g=1", "display_name": "Ashish Jambhulkar", "link": "https://stackoverflow.com/users/2539135/ashish-jambhulkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 953, "favorite_count": 0, "accepted_answer_id": 51741456, "answer_count": 3, "score": 0, "last_activity_date": 1533721906, "creation_date": 1533714710, "last_edit_date": 1533721129, "question_id": 51741319, "link": "https://stackoverflow.com/questions/51741319/skip-key-from-hash-loop", "title": "Skip key from hash loop", "body": "<p>I am performing an operation on hash values, lets say :</p>\n\n<pre><code>hash = { a: true, b: false, c: nil }\n</code></pre>\n\n<p>I am executing an <code>each</code> loop on <code>hash</code> but I want to skip keys <code>b</code> and <code>c</code>. I don't want to delete these from <code>hash</code>.</p>\n\n<p>I have tried:</p>\n\n<pre><code>hash = { a: true, b: false, c: nil}\nhash.except(:c)\n{ a: true, b: false, c: nil}\n</code></pre>\n\n<p>But it is not working. I am using <code>ruby 2.4.2</code></p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 1, "creation_date": 1533715850, "post_id": 51740858, "comment_id": 90443243, "body": "Hold on! How is it supposed to pass if you call <code>_N</code> outside of <code>it</code> block?"}, {"owner": {"reputation": 15926, "user_id": 474597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf5fcf12effe4798f02aa84def25c684?s=128&d=identicon&r=PG", "display_name": "lulalala", "link": "https://stackoverflow.com/users/474597/lulalala"}, "reply_to_user": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1533716059, "post_id": 51740858, "comment_id": 90443363, "body": "Sorry I was unclear. The example I gave does not work."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533716478, "post_id": 51740858, "comment_id": 90443635, "body": "I <i>think</i> I understand the question, but please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. A <i>minimal</i> example should not contain anything like <code>load Rails.root.join(&#39;locale&#47;unfound_translations.rb&#39;)</code>, and a <i>complete, verifiable</i> example should be an actual reproduction of the problem."}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1533801739, "post_id": 51740858, "comment_id": 90482390, "body": "@lulalala Are you going to fix or close your question?"}, {"owner": {"reputation": 15926, "user_id": 474597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf5fcf12effe4798f02aa84def25c684?s=128&d=identicon&r=PG", "display_name": "lulalala", "link": "https://stackoverflow.com/users/474597/lulalala"}, "reply_to_user": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1533864137, "post_id": 51740858, "comment_id": 90513549, "body": "@meta I edited my question when Tom mentioned it. However <code>load</code> is essentially what I need (I need to repeatedly load that file in order to perform different tests) so it is still there."}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1533880126, "post_id": 51740858, "comment_id": 90517214, "body": "is the <code>_N(&#39;foo&#39;)</code> really the only thing in this file??"}, {"owner": {"reputation": 15926, "user_id": 474597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf5fcf12effe4798f02aa84def25c684?s=128&d=identicon&r=PG", "display_name": "lulalala", "link": "https://stackoverflow.com/users/474597/lulalala"}, "reply_to_user": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1533896364, "post_id": 51740858, "comment_id": 90525601, "body": "@meta yes, this is a convention of gettext_i18n_rails <a href=\"https://github.com/grosser/gettext_i18n_rails#unfound-translations-with-rake-gettextfind\" rel=\"nofollow noreferrer\">github.com/grosser/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15926, "user_id": 474597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf5fcf12effe4798f02aa84def25c684?s=128&d=identicon&r=PG", "display_name": "lulalala", "link": "https://stackoverflow.com/users/474597/lulalala"}, "edited": false, "score": 0, "creation_date": 1533900443, "post_id": 51785452, "comment_id": 90527889, "body": "thanks, I was also thinking <code>eval</code> as last resort. Would still be nice if somehow I can obtain the main object :P"}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "reply_to_user": {"reputation": 15926, "user_id": 474597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf5fcf12effe4798f02aa84def25c684?s=128&d=identicon&r=PG", "display_name": "lulalala", "link": "https://stackoverflow.com/users/474597/lulalala"}, "edited": false, "score": 0, "creation_date": 1533901293, "post_id": 51785452, "comment_id": 90528391, "body": "There&#39;s also <a href=\"https://ruby-doc.org/core-2.5.1/Kernel.html#method-i-binding\" rel=\"nofollow noreferrer\">Kernel#binding</a> but this also is to be used with <code>eval</code>."}], "tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": true, "score": 1, "last_activity_date": 1533900228, "creation_date": 1533900228, "answer_id": 51785452, "question_id": 51740858, "link": "https://stackoverflow.com/questions/51740858/rspec-test-method-is-called-on-main-object/51785452#51785452", "title": "RSpec test method is called on `main` object", "body": "<p>Ok, I get your problem now. Your main issue is that <code>self</code> in <code>it</code> block is different that <code>self</code> inside <code>unfound_translations.rb</code>. So you're setting expectations on one object and method <code>N_</code> is called on something completely different. </p>\n\n<p>(Edit: I just realized, when reading the subject of this question again, that you already was aware of it. Sorry for stating the obvious... leaving it so it may be useful to others)</p>\n\n<p>I managed to have a hacky way that is working, here it is: </p>\n\n<pre><code># missing_translations.rb\nN_('foo')\n</code></pre>\n\n<p>and the spec (I defined a simple module for tests inside it for simplicity):</p>\n\n<pre><code>module N\n  def N_(what)\n    puts what\n  end\nend\n\nRSpec.describe 'foo' do\n  let(:klass) do\n    Class.new do\n      extend N\n    end\n  end\n\n  it do\n    expect(klass).to receive(:N_)\n    klass.class_eval do\n      eval(File.read('missing_translations.rb'))\n    end\n  end\nend\n</code></pre>\n\n<p>What it does it's creating an anonymous class that. And evaluating contents of  <code>missing_translations.rb</code> inside means that <code>klass</code> is the <code>thing</code> that receives <code>N_</code> method. So you can set expectations there.  </p>\n\n<p>I'm pretty sure you can replace <code>extend N</code> module with whatever module is giving you <code>N_</code> method and this should work. </p>\n\n<p>It's hacky, but not much effort so maybe good enough until more elegant solution is provided.</p>\n"}], "owner": {"reputation": 15926, "user_id": 474597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf5fcf12effe4798f02aa84def25c684?s=128&d=identicon&r=PG", "display_name": "lulalala", "link": "https://stackoverflow.com/users/474597/lulalala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 1, "accepted_answer_id": 51785452, "answer_count": 1, "score": 0, "last_activity_date": 1533900228, "creation_date": 1533713224, "last_edit_date": 1533716985, "question_id": 51740858, "link": "https://stackoverflow.com/questions/51740858/rspec-test-method-is-called-on-main-object", "title": "RSpec test method is called on `main` object", "body": "<p>Sometimes we call methods on the ruby <code>main</code> objects. For example we call <code>create</code> for FactoryBot and we call <code>_()</code> for I18n.</p>\n\n<p>What's a proper way to test these top level methods got called in RSpec?</p>\n\n<p>For example, I want to test <code>N_</code> is called, but it would not work because the self in Rspec and self in the file are different.</p>\n\n<pre><code># spec\ndescribe 'unfound_translations' do\n  it 'includes dynamic translations' do\n    expect(self).to receive(:N_)\n    load '/path/to/unfound_translations.rb')\n  end\nend\n\n# unfound_translations.rb\nN_('foo')\n</code></pre>\n\n<p>However this does not pass.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 234, "user_id": 5992270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95add28d8792fa4af0f190344db456ac?s=128&d=identicon&r=PG", "display_name": "Stephen W", "link": "https://stackoverflow.com/users/5992270/stephen-w"}, "edited": false, "score": 2, "creation_date": 1533708239, "post_id": 51739523, "comment_id": 90439211, "body": "The first thing I notice is that you&#39;re missing an opening paren here: <code>if (env[&quot;REQUEST_METHOD&quot;] == &quot;GET&quot;)</code>"}, {"owner": {"reputation": 7044, "user_id": 7670262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zdDY.jpg?s=128&g=1", "display_name": "Azeem", "link": "https://stackoverflow.com/users/7670262/azeem"}, "edited": false, "score": 0, "creation_date": 1533708575, "post_id": 51739523, "comment_id": 90439330, "body": "What is your Ruby version?"}, {"owner": {"reputation": 19, "user_id": 9825021, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "digital king", "link": "https://stackoverflow.com/users/9825021/digital-king"}, "edited": false, "score": 0, "creation_date": 1533710536, "post_id": 51739523, "comment_id": 90440224, "body": "your right it seems I am thanks! I can&#39;t believe i missed that."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9825021, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "digital king", "link": "https://stackoverflow.com/users/9825021/digital-king"}, "edited": false, "score": 0, "creation_date": 1533711366, "post_id": 51739921, "comment_id": 90440642, "body": "do you know why I&#39;m getting this error? ERROR NameError: uninitialized constant App::Pages"}, {"owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "reply_to_user": {"reputation": 19, "user_id": 9825021, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "digital king", "link": "https://stackoverflow.com/users/9825021/digital-king"}, "edited": false, "score": 0, "creation_date": 1533712954, "post_id": 51739921, "comment_id": 90441565, "body": "@digitalking you have the following line in the <code>server.rb</code>: <code>pages = Pages.new(route_name, visit_count: count)</code>, but I don&#39;t see you have <code>Pages</code> defined anywhere. Probably you wanted to specify <code>pages = View.new(route_name, visit_count: count)</code> instead?"}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 3, "last_activity_date": 1533709738, "creation_date": 1533709738, "answer_id": 51739921, "question_id": 51739523, "link": "https://stackoverflow.com/questions/51739523/ruby-syntax-error-require-relative/51739921#51739921", "title": "ruby syntax error &#39;require_relative&#39;", "body": "<blockquote>\n  <p>server.rb:3:in `require_relative': /Users//Desktop/ruby/route.rb:9: syntax error, unexpected ')'</p>\n</blockquote>\n\n<p>The error says, that there's a syntax error on the 9th line of <code>route.rb</code> file. Let's inspect it:</p>\n\n<pre><code>if env[\"REQUEST_METHOD\"] == \"GET\")\n</code></pre>\n\n<p>It's not a valid syntax, since we have only one parenthesis, but the valid ones are either:</p>\n\n<pre><code>if(env[\"REQUEST_METHOD\"] == \"GET\")\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>if env[\"REQUEST_METHOD\"] == \"GET\"\n</code></pre>\n\n<p>So the solution is either remove the parenthesis at the end of line, or add one before <code>env[\"REQUEST_METHOD\"] == \"GET\")</code></p>\n"}], "owner": {"reputation": 19, "user_id": 9825021, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "digital king", "link": "https://stackoverflow.com/users/9825021/digital-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "accepted_answer_id": 51739921, "answer_count": 1, "score": -3, "last_activity_date": 1533709738, "creation_date": 1533707937, "last_edit_date": 1533708360, "question_id": 51739523, "link": "https://stackoverflow.com/questions/51739523/ruby-syntax-error-require-relative", "title": "ruby syntax error &#39;require_relative&#39;", "body": "<p>So when I run ruby <code>server.rb</code>, I get this error:</p>\n\n<blockquote>\n  <p>server.rb:3:in `require_relative': /Users//Desktop/ruby/route.rb:9: syntax error, unexpected ')', expecting keyword_then or ';' or '\\n' (SyntaxError)\n  nv[\"REQUEST_METHOD\"] == \"GET\")</p>\n  \n  <p>/Users//Desktop/ruby/route.rb:17: syntax error, unexpected keyword_end, expecting end-of-input\n      from server.rb:3:in `'</p>\n</blockquote>\n\n<p>Not sure exactly what is asking. maybe some of you more experienced with ruby and or programming can shed some light.</p>\n\n<p><strong>server.rb</strong></p>\n\n<pre><code>require 'rack'\nrequire_relative 'view'\nrequire_relative 'route'\n\nclass App\n\n  PAGES = %w{ /home /admin}\n\n  def call(env)\n    response_headers = {}\n\n    ### cookies\n    request_cookies = Rack::Utils.parse_cookies(env)\n\n    # set the session identifier if one doesn't already exist\n    unless request_cookies[\"session_key\"]\n      Rack::Utils.set_cookie_header!(response_headers, \"session_key\", Time.now.to_f)\n    end\n\n    # count the number of page visits:\n    # nil.to_i returns 0, so if this cookie isn't set, the count will be 0:\n\n    count = request_cookies[\"session_count\"].to_i\n    count += 1\n\n    Rack::Utils.set_cookie_header!(response_headers, \"session_count\", count)\n\n    ### routing\n    route_name = Route.new(env).name\n\n    # get the template\n    pages = Pages.new(route_name, visit_count: count)\n\n    ### return the response object\n    [status, response_headers, [pages.render]]\n  end\nend\n\nRack::Handler::WEBrick.run App.new\n</code></pre>\n\n<p><strong>view.rb</strong></p>\n\n<pre><code>class View\n  def initialize(page, data = {})\n    @data = data\n    @page = page\n    file = File.join(File.dirname(__FILE__), \"./pages/#{page}.html.erb\")\n    @page = File.read(file)\n  end\n\n  def visit_count\n    @data[:visit_count]\n  end\n\n  def render\n    ERB.new(@page).result(binding)\n  end\nend\n</code></pre>\n\n<p><strong>route.rb</strong></p>\n\n<pre><code>class Route\n\n  ROUTES = {\n    \"/home\" =&gt; :home,\n    \"/admin\" =&gt; :admin\n  }\n\n  def initialize(env)\n    if env[\"REQUEST_METHOD\"] == \"GET\")\n      @name = ROUTES[env[\"PATH_INFO\"]]\n    end\n  end\n\n  def name\n    @name || \"404\"\n  end\nend\n</code></pre>\n\n<p>I've been stuck on this for some time now and I still can't figure out the solution. I would appreciate the help.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 253873, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 1, "creation_date": 1533706039, "post_id": 51739149, "comment_id": 90438399, "body": "Can you give more examples? Maybe just <code>^</code> to require the match begins at the beginning of the line?"}, {"owner": {"reputation": 387, "user_id": 1438478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/161330b50e55ef9cc72f5e9bc9b056c3?s=128&d=identicon&r=PG", "display_name": "Fralcon", "link": "https://stackoverflow.com/users/1438478/fralcon"}, "reply_to_user": {"reputation": 253873, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 0, "creation_date": 1533709198, "post_id": 51739149, "comment_id": 90439581, "body": "It could be in the middle of the line, Sorry I&#39;ll add some additional examples."}, {"owner": {"reputation": 253873, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 1, "creation_date": 1533709498, "post_id": 51739149, "comment_id": 90439727, "body": "Ok, so if you&#39;re trying to match <code>:tsearch</code>, from your examples, why not just have a regular expression of <code>:tsearch</code>? Please explain what distinguishes what you&#39;re trying to match from the rest"}, {"owner": {"reputation": 1168, "user_id": 2329040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18af53a0f735739b132183c2fe06a146?s=128&d=identicon&r=PG&f=1", "display_name": "Suresh Mahawar", "link": "https://stackoverflow.com/users/2329040/suresh-mahawar"}, "edited": false, "score": 0, "creation_date": 1533710019, "post_id": 51739149, "comment_id": 90439978, "body": "@Fralcon, why don&#39;t you use <code>:tsearch</code> as group capture for regex"}, {"owner": {"reputation": 10920, "user_id": 3390419, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/cXKh9.jpg?s=128&g=1", "display_name": "Paolo", "link": "https://stackoverflow.com/users/3390419/paolo"}, "edited": false, "score": 0, "creation_date": 1533710228, "post_id": 51739149, "comment_id": 90440067, "body": "Are you trying to capture first and last word?"}, {"owner": {"reputation": 823, "user_id": 374437, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5Lakp.jpg?s=128&g=1", "display_name": "Veltzer Doron", "link": "https://stackoverflow.com/users/374437/veltzer-doron"}, "edited": false, "score": 0, "creation_date": 1533716578, "post_id": 51739149, "comment_id": 90443699, "body": "first of all, changing * to + will not match the &#39;:&#39; string if you don&#39;t want to match :int then either explicitly exclude it or ask that it doesn&#39;t end in an end of string, finally, I&#39;m not sure why you&#39;re catching the word in a group if you want to catch &#39;:search&#39; ?  Though I tend agree your question is phrased unclearly  try &#39;:\\w+(?!$|\\w)&#39;"}, {"owner": {"reputation": 387, "user_id": 1438478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/161330b50e55ef9cc72f5e9bc9b056c3?s=128&d=identicon&r=PG", "display_name": "Fralcon", "link": "https://stackoverflow.com/users/1438478/fralcon"}, "edited": false, "score": 0, "creation_date": 1533755045, "post_id": 51739149, "comment_id": 90467614, "body": "I&#39;ve added more examples and clarified the requirements."}], "answers": [{"comments": [{"owner": {"reputation": 387, "user_id": 1438478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/161330b50e55ef9cc72f5e9bc9b056c3?s=128&d=identicon&r=PG", "display_name": "Fralcon", "link": "https://stackoverflow.com/users/1438478/fralcon"}, "edited": false, "score": 0, "creation_date": 1533954209, "post_id": 51756308, "comment_id": 90549225, "body": "Hi Rodrigo, thanks for answering. I&#39;m not sure why my questions lists that it is for javascript but I&#39;m actually using ruby. Ruby has support for negative lookbehinds. EDIT: I think the javascript tag was autogenerated for this question, or I accidentally added it instead of ruby."}], "tags": [], "owner": {"reputation": 1045, "user_id": 8371135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbhBC.jpg?s=128&g=1", "display_name": "Rodrigo Ferreira", "link": "https://stackoverflow.com/users/8371135/rodrigo-ferreira"}, "is_accepted": false, "score": 1, "last_activity_date": 1533765960, "creation_date": 1533765960, "answer_id": 51756308, "question_id": 51739149, "link": "https://stackoverflow.com/questions/51739149/regex-capture-group-not-including/51756308#51756308", "title": "Regex capture group not including", "body": "<p>Your example could be a great use case of <strong>negative lookbehinds</strong>, sadly in JavaScript they are not yet fully supported.</p>\n\n<p>A possible solution could be \"emulating\" the negative lookbehind by reversing your string and then applying <strong>negative lookaheads</strong>.</p>\n\n<p>Example:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const string1 = \":trigram + some_word::date\";\r\n\r\nconst reverseString = string =&gt; string.split('').reverse().join('');\r\n\r\nconst reversedString = reverseString(string1);\r\n\r\nconst matches = reversedString.match(/\\w+:(?!:)/g).map(reverseString);\r\n\r\nconsole.log(matches)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 387, "user_id": 1438478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/161330b50e55ef9cc72f5e9bc9b056c3?s=128&d=identicon&r=PG", "display_name": "Fralcon", "link": "https://stackoverflow.com/users/1438478/fralcon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533954245, "creation_date": 1533705975, "last_edit_date": 1533954245, "question_id": 51739149, "link": "https://stackoverflow.com/questions/51739149/regex-capture-group-not-including", "title": "Regex capture group not including", "body": "<p>I am trying to create a capture group that only captures words that follow a colon such as <code>:tsearch</code> in the string below. Words that follow double colons should not be captured. The current regex is capturing <code>:tsearch</code>, <code>:</code>, and <code>:int</code>. </p>\n\n<p>Do I need to use negative lookarounds? Not sure what to do.</p>\n\n<p>Sample Strings:</p>\n\n<pre><code>\":tsearch + some_word::int\"\n\":trigram + some_word::date\"\n\":dmetaphone + some_word::int\"\n\"some_word::date + :tsearch\"\n\"some_word::type + :dmetaphone\"\n\"some_word::str + :a_word\"\n</code></pre>\n\n<p>Current Regex:</p>\n\n<pre><code>/:(\\w*)/\n</code></pre>\n\n<p>Regexr Link\n<a href=\"https://regexr.com/3tk8t\" rel=\"nofollow noreferrer\">https://regexr.com/3tk8t</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "jenkins", "jenkins-pipeline", "jenkins-cli"], "answers": [{"tags": [], "owner": {"reputation": 1045, "user_id": 2408747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/817927e3d16263691d867332cd03760d?s=128&d=identicon&r=PG", "display_name": "Satyam Singh", "link": "https://stackoverflow.com/users/2408747/satyam-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1533713533, "creation_date": 1533713533, "answer_id": 51740952, "question_id": 51738270, "link": "https://stackoverflow.com/questions/51738270/running-ruby-on-rails-scripts-in-jenkinsfile/51740952#51740952", "title": "Running ruby on rails scripts in Jenkinsfile", "body": "<p>You can put all your scripts in a ruby file and run something like this:</p>\n\n<pre><code>sh 'ruby ./script.rb'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1870, "user_id": 1572657, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/bsRrQ.jpg?s=128&g=1", "display_name": "David J Eddy", "link": "https://stackoverflow.com/users/1572657/david-j-eddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1548251675, "creation_date": 1548251675, "answer_id": 54328866, "question_id": 51738270, "link": "https://stackoverflow.com/questions/51738270/running-ruby-on-rails-scripts-in-jenkinsfile/54328866#54328866", "title": "Running ruby on rails scripts in Jenkinsfile", "body": "<p>A script example of what @SatyamSingh is describing would be like this:</p>\n\n<p>install.sh</p>\n\n<pre><code>gem install bundler\nbundle install\ncp config/database-gitlab.yml config/database.yml\nbundle exec rake db:create db:migrate RAILS_ENV=test\nbundle exec rake test\n</code></pre>\n\n<p>Jenkinsfile</p>\n\n<pre><code>node {\n...\n    stage ('Clone') {\n      checkout scm\n    }\n    stage ('Build') {\n        sh gem install bundler\n        sh bundle install\n        sh cp config/database-gitlab.yml config/database.yml\n        sh bundle exec rake db:create db:migrate RAILS_ENV=test\n        sh bundle exec rake test\n        ....\n    }\n    stage ('Tests') {\n...\n    }\n...\n}\n</code></pre>\n\n<p>Both of the above should be part of your projects SCM repository. The Jenkinsfile executes each of your shell commands as steps inside the 'Build' stage.</p>\n"}], "owner": {"reputation": 2440, "user_id": 1077711, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/fem9y.jpg?s=128&g=1", "display_name": "AllenC", "link": "https://stackoverflow.com/users/1077711/allenc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1559, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1605207207, "creation_date": 1533699348, "last_edit_date": 1533700553, "question_id": 51738270, "link": "https://stackoverflow.com/questions/51738270/running-ruby-on-rails-scripts-in-jenkinsfile", "title": "Running ruby on rails scripts in Jenkinsfile", "body": "<p>Currently I set my Gitlab that whenever I push to a branch it will trigger a build in Jenkins using webhook. I'm using a plugin <code>Multibranch Pipeline</code> in Jenkins so that the build can run on all branches. </p>\n\n<p>But I saw in Jenkins you need to put the scripts in <strong>Jenkinsfile</strong>, but I cannot find a good reference on how to run ruby scripts this configuration.</p>\n\n<p>These are the tasks that I need to achieve</p>\n\n<pre><code>gem install bundler\nbundle install\ncp config/database-gitlab.yml config/database.yml\nbundle exec rake db:create db:migrate RAILS_ENV=test\nbundle exec rake test\n</code></pre>\n\n<p>How can I put this scripts in the Jenkinsfile</p>\n\n<pre><code>node {\n  try {\n    stage ('Clone') {\n      checkout scm\n    }\n    stage ('Build') {\n      sh \"echo 'shell scripts to build project...'\"\n      sh \"echo 'Running ${env.BRANCH_NAME}'\"\n    }\n    stage ('Tests') {\n    }\n  } catch (err) {\n    currentBuild.result = 'FAILED'\n      throw err\n  }\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "cors"], "answers": [{"tags": [], "owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "is_accepted": false, "score": 1, "last_activity_date": 1533700319, "last_edit_date": 1533700319, "creation_date": 1533699778, "answer_id": 51738318, "question_id": 51737697, "link": "https://stackoverflow.com/questions/51737697/rack-cors-is-working-only-in-a-model/51738318#51738318", "title": "Rack CORS is working only in a model", "body": "<p>Can you try this</p>\n\n<pre><code>config.middleware.insert_before 0, Rack::Cors do\n  allow do\n    origins '*'\n      resource '*', headers: :any, methods: [:get, :post, :options]\n  end\nend\n</code></pre>\n\n<p>Can you also share logs when the request hits your rails server.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 7643402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d45d8b2f98430b3f6e84ab8a91ad99?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Costa", "link": "https://stackoverflow.com/users/7643402/victor-costa"}, "edited": false, "score": 0, "creation_date": 1534100570, "post_id": 51740055, "comment_id": 90578855, "body": "Thank you so much! Create the file cors.rb worked fine!"}], "tags": [], "owner": {"reputation": 530, "user_id": 4714655, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/wbq5r.png?s=128&g=1", "display_name": "eugene", "link": "https://stackoverflow.com/users/4714655/eugene"}, "is_accepted": true, "score": 1, "last_activity_date": 1533710288, "creation_date": 1533710288, "answer_id": 51740055, "question_id": 51737697, "link": "https://stackoverflow.com/questions/51737697/rack-cors-is-working-only-in-a-model/51740055#51740055", "title": "Rack CORS is working only in a model", "body": "<p>Enable rack-cors in your gemfile and try this:</p>\n\n<pre><code># config/initializers/cors.rb\nRails.application.config.middleware.insert_before 0, Rack::Cors do\n  allow do\n    origins '&lt;your root path&gt;'\n    resource '*',\n      headers: :any,\n      methods: %i(get post put patch delete options head)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7643402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d45d8b2f98430b3f6e84ab8a91ad99?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Costa", "link": "https://stackoverflow.com/users/7643402/victor-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 51740055, "answer_count": 2, "score": 1, "last_activity_date": 1533710288, "creation_date": 1533694313, "question_id": 51737697, "link": "https://stackoverflow.com/questions/51737697/rack-cors-is-working-only-in-a-model", "title": "Rack CORS is working only in a model", "body": "<p>I have an Rails 5 App running and I make some requests to populate a front-end. I've activated Rack Cors. It works fine with Notices model but with pages I get it: </p>\n\n<pre><code>Failed to load http://sspmb.com.br/pages.json: No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://localhost:4200' is therefore not allowed access.\n</code></pre>\n\n<p>But If I try to request .notices.json, It works fine. That's my config/application.rb:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>  require_relative 'boot'\r\n\r\n  require 'rails/all'\r\n\r\n  #\r\n  Require the gems listed in Gemfile, including any gems# you 've limited to :test, :development, or :production.\r\n  Bundler.require( * Rails.groups)\r\n\r\n  module Sindserv\r\n  class Application &lt; Rails::Application# Initialize configuration defaults\r\n  for originally generated Rails version.\r\n  config.load_defaults 5.1\r\n\r\n  # Settings in config / environments\r\n  /* take precedence over those specified here.\r\n      # Application configuration should go into files in config/initializers\r\n      # -- all .rb files in that directory are automatically loaded.\r\n\r\n  Rails.application.config.middleware.insert_before 0, Rack::Cors do\r\n      allow do\r\n       origins '*'\r\n       resource '/notices',\r\n         headers: :any,\r\n         methods: [:get, :post, :put, :patch, :delete, :options, :head]\r\n       resource '/pages',\r\n         headers: :any,\r\n         methods: [:get, :post, :put, :patch, :delete, :options, :head]\r\n      end\r\n  end\r\n    end\r\n  end</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby", "algorithm"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1533696439, "post_id": 51737510, "comment_id": 90436263, "body": "Do you mean using <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\"><code>Enumerable#map</code></a>?, are you aware you can check a palindrome just by comparing the string with its reverse version?"}, {"owner": {"reputation": 53, "user_id": 10015320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoQPv.png?s=128&g=1", "display_name": "Francisco Bach", "link": "https://stackoverflow.com/users/10015320/francisco-bach"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1533736789, "post_id": 51737510, "comment_id": 90456939, "body": "Yeah I know! but I was practicing some algorithms without using methods that does all the job for us. challenging myself! Thanks Buddy!"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 10015320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoQPv.png?s=128&g=1", "display_name": "Francisco Bach", "link": "https://stackoverflow.com/users/10015320/francisco-bach"}, "edited": false, "score": 0, "creation_date": 1533693990, "post_id": 51737612, "comment_id": 90435828, "body": "Thanks my friend! :) It would be nice if ruby had some kind of method to retrieve that value..."}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "reply_to_user": {"reputation": 53, "user_id": 10015320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoQPv.png?s=128&g=1", "display_name": "Francisco Bach", "link": "https://stackoverflow.com/users/10015320/francisco-bach"}, "edited": false, "score": 0, "creation_date": 1533697738, "post_id": 51737612, "comment_id": 90436514, "body": "Which value do you mean?"}], "tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": true, "score": 3, "last_activity_date": 1618087751, "last_edit_date": 1618087751, "creation_date": 1533693549, "answer_id": 51737612, "question_id": 51737510, "link": "https://stackoverflow.com/questions/51737510/how-to-get-the-returned-value-from-a-method-from-within-the-method/51737612#51737612", "title": "How to get the returned value from a method from within the method?", "body": "<p>Just add <code>== a</code> to see if your reversal matches the original string:</p>\n<pre><code>def rev(a)\n i = -1\n a.split(&quot;&quot;).each do |el|\n  el[0] = a[i]\n  i = i + (-1)\n end.join == a\nend\n\nputs rev(&quot;racecar&quot;) # =&gt; true\nputs rev(&quot;racecars&quot;) # =&gt; false\n</code></pre>\n<p>An easier way to check palindromes (<code>rev</code> could be better named <code>palindrome?</code>) is <code>a == a.reverse</code> since <code>.reverse</code> is essentially what your <code>split</code>/<code>each</code>/<code>join</code> does.</p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 1, "last_activity_date": 1533695261, "creation_date": 1533695261, "answer_id": 51737798, "question_id": 51737510, "link": "https://stackoverflow.com/questions/51737510/how-to-get-the-returned-value-from-a-method-from-within-the-method/51737798#51737798", "title": "How to get the returned value from a method from within the method?", "body": "<p>If you want back all the information, you can return an array with both the values:</p>\n\n<pre><code>def rev(a)\n i = -1\n rev = a.split(\"\").each do |el|\n  el[0] = a[i]\n  i = i + (-1)\n end.join\n [rev, rev == a] # or\n # return rev, rev == a\nend\n\np rev(\"abra\") #=&gt; [\"arba\", false]\np rev(\"abba\") #=&gt; [\"abba\", true]\n</code></pre>\n\n<p>You can also return a hash:</p>\n\n<pre><code>{ reverse: rev, palindrome: rev == a}\n</code></pre>\n\n<p>to get</p>\n\n<pre><code>#=&gt; {:reverse=&gt;\"arba\", :palindrome=&gt;false}\n#=&gt; {:reverse=&gt;\"abba\", :palindrome=&gt;true}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 10015320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoQPv.png?s=128&g=1", "display_name": "Francisco Bach", "link": "https://stackoverflow.com/users/10015320/francisco-bach"}, "edited": false, "score": 0, "creation_date": 1533737029, "post_id": 51739790, "comment_id": 90457093, "body": "Thanks Cary for the tips!"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1533709575, "last_edit_date": 1533709575, "creation_date": 1533709221, "answer_id": 51739790, "question_id": 51737510, "link": "https://stackoverflow.com/questions/51737510/how-to-get-the-returned-value-from-a-method-from-within-the-method/51739790#51739790", "title": "How to get the returned value from a method from within the method?", "body": "<p>Here are a couple of other ways you could reverse a string.</p>\n\n<p><strong>#1</strong></p>\n\n<pre><code>def esrever(str)\n  s = str.dup\n  (str.size/2).times { |i| s[i], s[-1-i] = s[-1-i], s[i] }\n  s\nend\n\nesrever(\"abcdefg\")\n  #=&gt; \"gfedcba\"\nesrever(\"racecar\")\n  #=&gt; \"racecar\"\n</code></pre>\n\n<p>This uses <em>parallel assignment</em> (sometimes called <em>multiple assignment</em>).</p>\n\n<p><strong>#2</strong></p>\n\n<pre><code>def esrever(str)\n  a = str.chars\n  ''.tap { |s| str.size.times { s &lt;&lt; a.pop } }\nend\n\nesrever(\"abcdefg\")\n  #=&gt; \"gfedcba\"\nesrever(\"racecar\")\n  #=&gt; \"racecar\"\n</code></pre>\n\n<p>I've used <a href=\"http://ruby-doc.org/core-2.4.0/Object.html#method-i-tap\" rel=\"nofollow noreferrer\">Object#tap</a> merely to avoid creating a local variable initialized to an empty string and then having to make that variable the last line of the method.</p>\n\n<p>With both methods a string <code>str</code> is a palindrome if and only if <code>str == esrever(str)</code>.</p>\n"}], "owner": {"reputation": 53, "user_id": 10015320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoQPv.png?s=128&g=1", "display_name": "Francisco Bach", "link": "https://stackoverflow.com/users/10015320/francisco-bach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 51737612, "answer_count": 3, "score": 5, "last_activity_date": 1618087751, "creation_date": 1533692551, "question_id": 51737510, "link": "https://stackoverflow.com/questions/51737510/how-to-get-the-returned-value-from-a-method-from-within-the-method", "title": "How to get the returned value from a method from within the method?", "body": "<p>I've been practicing some algorithms with ruby for a while, and I'm wondering if it is possible to catch the returned value from within the method. </p>\n\n<p>the code below is to reverse a string without any kind of reverse method and with few local variables...</p>\n\n<pre><code>def rev(a)\n i = -1\n a.split(\"\").each do |el|\n  el[0] = a[i]\n  i = i + (-1)\n end.join\nend\n</code></pre>\n\n<p>Note that the result of the 'each' method is not being assigned to any variable. So, 'each' evaluates to an array with a reversed sequence of characters. At the 'end' (literally) I've just 'called' the method 'join' to glue everything together. The idea is to 'catch' the returned value from all this process and check if is true or false that the reversed string is a palindrome.</p>\n\n<p>If the reversed string is equal to the original one then the word is a palindrome. Ex. \"abba\", \"sexes\", \"radar\"... </p>\n\n<p>for example:</p>\n\n<pre><code>def rev(a)\n i = -1\n a.split(\"\").each do |el|\n  el[0] = a[i]\n  i = i + (-1)\n end.join\n # catch here the returned value from the code above\n # and check if its a palindrome or not. (true or false)\nend\n</code></pre>\n\n<p>Thank you guys! I will be very grateful if anyone could help me figure out this!</p>\n"}, {"tags": ["ruby", "testing", "rspec"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1533689380, "post_id": 51737181, "comment_id": 90435005, "body": "You can reference each line number. <code>$ rspec file:3</code> runs the <code>&#39;changes correct guess list&#39;</code> example."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533689648, "post_id": 51737181, "comment_id": 90435053, "body": "Possible duplicate: <a href=\"https://stackoverflow.com/questions/6116668/rspec-how-to-run-a-single-test\" title=\"rspec how to run a single test\">stackoverflow.com/questions/6116668/&hellip;</a>"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533711332, "post_id": 51737181, "comment_id": 90440624, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5069677/how-do-i-run-only-specific-tests-in-rspec\">How do I run only specific tests in Rspec?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2301, "user_id": 19317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47035e07012da3162b6e83650ee3abe0?s=128&d=identicon&r=PG", "display_name": "aridlehoover", "link": "https://stackoverflow.com/users/19317/aridlehoover"}, "edited": false, "score": 0, "creation_date": 1534719845, "post_id": 51737341, "comment_id": 90794612, "body": "Assuming it is part of a larger string, to match &quot;correctly&quot; without matching &quot;incorrectly&quot;, just add a preceding space: &quot; correctly&quot;."}], "tags": [], "owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "is_accepted": false, "score": 1, "last_activity_date": 1533690791, "creation_date": 1533690791, "answer_id": 51737341, "question_id": 51737181, "link": "https://stackoverflow.com/questions/51737181/running-rspec-tests-for-specific-contexts/51737341#51737341", "title": "Running rspec tests for specific contexts", "body": "<p>You can use <code>-e</code> to match any part of the description, so <code>rspec -e incorrectly</code> will run those two tests. (I don't know of a way to only match \"correctly\", as it's also a substring of \"incorrectly\".)</p>\n\n<p>You can also use <a href=\"https://stackoverflow.com/a/6116744/476979\">a line number reference</a> to match a <code>context</code> block: <code>rspec your_spec.rb:2</code> (given the above content exactly, with <code>context 'correctly' do</code> on line 2) will run that set of specs.</p>\n"}], "owner": {"reputation": 619, "user_id": 4465803, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/efb00ec60acadab7e2073bb987c9dbab?s=128&d=identicon&r=PG&f=1", "display_name": "Asif", "link": "https://stackoverflow.com/users/4465803/asif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533690791, "creation_date": 1533689123, "question_id": 51737181, "link": "https://stackoverflow.com/questions/51737181/running-rspec-tests-for-specific-contexts", "title": "Running rspec tests for specific contexts", "body": "<p>I have an rspec test defined like below. I know that I can run <code>rspec -e \"guessing\"</code> to run the full block of tests, but I want to run only specific contexts at a time. This way I can code the \"correctly\" tests first, and then later the \"incorrectly\" portion. Is there a command line way run the specified tests without naming them individually?</p>\n\n<pre><code>describe 'guessing' do\n  context 'correctly' do\n    it 'changes correct guess list' do\n\n    end\n    it 'returns true' do\n\n    end\n  end\n  context 'incorrectly' do\n    it 'changes wrong guess list' do\n\n    end\n    it 'returns true' do\n\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-attributes"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533712418, "post_id": 51737003, "comment_id": 90441219, "body": "You code has many syntax errors and a bad formatting. Can you fix those?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533712596, "post_id": 51737003, "comment_id": 90441343, "body": "If you <i>&quot;want to add the nested_attributes params to the profile creation&quot;</i>, why not do <code>self.create_profile!(employment_histories_attributes: [{ &lt;obj1-attributes&gt; }, { &lt;obj2-attributes&gt; }])</code>?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533723516, "post_id": 51737003, "comment_id": 90448170, "body": "Where do you get the values of these attributes?"}, {"owner": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533749431, "post_id": 51737003, "comment_id": 90464770, "body": "i edited the question because i ran in an issue with the nested form"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533777485, "post_id": 51737003, "comment_id": 90474598, "body": "What is your question?"}, {"owner": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533779863, "post_id": 51737003, "comment_id": 90475041, "body": "the employement_history is not saved in the database, i can&#39;t figure out why"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533793888, "post_id": 51737003, "comment_id": 90478401, "body": "Can you show the complete <code>update</code> action as well as the server logs for update request?"}, {"owner": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533820818, "post_id": 51737003, "comment_id": 90494947, "body": "@JagdeepSingh i just updated the full update action"}], "answers": [{"tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1533821929, "creation_date": 1533821929, "answer_id": 51768589, "question_id": 51737003, "link": "https://stackoverflow.com/questions/51737003/using-nested-attributes-in-rails-with-cocoon/51768589#51768589", "title": "using nested attributes in rails with cocoon", "body": "<p>You are permitting <code>:employment_histories</code> in the params, but AFAIR, the nested params are supposed to be received under key <code>:&lt;association-name&gt;_attributes</code>.</p>\n\n<p>Also, you should permit the <code>id</code> of nested objects, in case you want to edit them again.</p>\n\n<p>So, the final <code>profile_params</code> should look like:</p>\n\n<pre><code>def profile_params\n  params.require(:profile)\n        .permit(\n          :title,\n          :phone,\n          :address,\n          :zip_code,\n          employment_histories_attributes: [:id, :job_title, :employer, :_destroy]\n        )\nend\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 51768589, "answer_count": 1, "score": -1, "last_activity_date": 1533821929, "creation_date": 1533687175, "last_edit_date": 1533820776, "question_id": 51737003, "link": "https://stackoverflow.com/questions/51737003/using-nested-attributes-in-rails-with-cocoon", "title": "using nested attributes in rails with cocoon", "body": "<p>I have this setup and for some reason, I can't save the employent_history in the database. when the updated only the profile attributes are updated i used cocoon gem</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_one :profile, dependent: :destroy\n  has_many :employent_histories :through :profile\n  after_create :init_profile\n\n  def init_profile\n    self.create_profile!\n  end\nend\n</code></pre>\n\n<p>As you can see the profile is created when a new user is created </p>\n\n<p>I added another model called employment_history that belong to but user and profile</p>\n\n<p>The Profile Model \naccepts_nested_attributes_for :employment_history</p>\n\n<pre><code>class Profile &lt; ApplicationRecord\n  belongs_to :user\n  has_many :employent_histories\n  accepts_nested_attributes_for :employent_histories\nend\n\nclass EmploymentHistory &lt; ApplicationRecord\n  belongs_to :user \n  belongs_to :profile\n\n end\n</code></pre>\n\n<p>profile_controller.rb</p>\n\n<p>There is no create action because the resource is created when a new user is ctreated</p>\n\n<pre><code>class ProfilesController &lt; ApplicationController\n\n  def show\n    @profile = current_user.profile\n  end\n\n\n  def edit\n      @profile = current_user.profile\n  end\n\n\n    def update\n    # byebug\n      @profile = current_user.profile\n    respond_to do |format|\n      if @profile.update profile_params\n        format.html { redirect_to user_profile_path, notice: \"Profile updated!\" }\n        format.json { render :edit, status: :ok, location: @profile }\n      else\n        format.html { redirect_to edit_user_profile_path, flash: { error: \"Profile could not be updated!\" } }\n        format.json { render json: @profile.errors.messages, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  private\n  def profile_params\n    params.require(:profile).permit(:title,:phone,:address,:zip_code,employment_histories:[:job_title,:employer,:_destroy])\n  end\n</code></pre>\n\n<p>views/profiles/edit.html.erb</p>\n\n<pre><code>&lt;%= form_for @profile, url: {action: \"update\"} do |f| %&gt;\n   &lt;%= attributes%&gt;\n   &lt;%= attributes%&gt;\n     &lt;%= f.fields_for :employment_histories do |ff| %&gt;\n      &lt;%= attributes%&gt;\n     &lt;%end%&gt;\n&lt;%f.sumbit%&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>Using this setup , the fields for the nested attributes form does not display on the edit profile page. \nwhat am i missing</p>\n"}, {"tags": ["java", "node.js", "ruby", "algorithm", "node-crypto"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1533736213, "post_id": 51736798, "comment_id": 90456543, "body": "In 99% of cases, when people ask here why their identical bytestream is not compressed / encrypted / hashed identically, it turns out that their &quot;identical&quot; bytestream was not, in fact, identical. In the other 1% of cases, it turns out that the key / salt / parameters weren&#39;t identical. So, first check that you are <i>actually</i> hashing the same bytestream. <i>Not</i> the same string, the same <i>bytestream</i>. The &quot;same&quot; string (for various definitions of &quot;same&quot;) can be encoded as many different bytestreams, depending on encoding or newlines, for example, so the string being the same is not enough."}, {"owner": {"reputation": 43, "user_id": 830401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/537f2a54634742e68ac9714589cc7f19?s=128&d=identicon&r=PG", "display_name": "Soabirw", "link": "https://stackoverflow.com/users/830401/soabirw"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1533739659, "post_id": 51736798, "comment_id": 90459017, "body": "@J&#246;rgWMittag I agree with this.  If I removed the newlines everything matches.  What I&#39;m not sure how to resolve is that difference.  Because the 3rd party requires newline separation.  If their system uses Java and mine is Node and even locally Java and Node don&#39;t produce the same results when using newlines...."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1533741389, "post_id": 51736798, "comment_id": 90460158, "body": "I&#39;m taking a wild guess just looking at the names, and would take a hard look at whatever is &quot;canonicalizing&quot; that <code>canonicalizedData</code>, since (I assume) the <i>whole point</i> of that canonicalizing is to make the data the <i>same</i>."}, {"owner": {"reputation": 43, "user_id": 830401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/537f2a54634742e68ac9714589cc7f19?s=128&d=identicon&r=PG", "display_name": "Soabirw", "link": "https://stackoverflow.com/users/830401/soabirw"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1533753229, "post_id": 51736798, "comment_id": 90466795, "body": "It&#39;s pretty simple bit of code that each one does.  Basically they iterate over a map and create a string of the following format: &quot;#{key}=#{value}\\n&quot;.  If I do anything other than \\n they all match.  Well, maybe not anything, but if I were to separate based on comma or semi-colon, for example, then they match perfectly.  It is only an issue with \\n (an maybe \\t and other similar, I haven&#39;t verified that)."}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 830401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/537f2a54634742e68ac9714589cc7f19?s=128&d=identicon&r=PG", "display_name": "Soabirw", "link": "https://stackoverflow.com/users/830401/soabirw"}, "is_accepted": true, "score": 0, "last_activity_date": 1533757511, "last_edit_date": 1533757511, "creation_date": 1533741116, "answer_id": 51750126, "question_id": 51736798, "link": "https://stackoverflow.com/questions/51736798/node-hmac-results-differ-from-both-ruby-and-java/51750126#51750126", "title": "Node HMAC results differ from both Ruby and Java", "body": "<p>Looks like the issue was a conflict in requirements.  They wanted a \\n to separate parameters and to have it included on the last pair as well.  But they also wanted all white space trimmed.</p>\n\n<p>If the trim was done at the end, it was removing that last \\n.  The trim needed to be done while building the pairs, while leaving \\n on all pairs, including the last one.</p>\n"}], "owner": {"reputation": 43, "user_id": 830401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/537f2a54634742e68ac9714589cc7f19?s=128&d=identicon&r=PG", "display_name": "Soabirw", "link": "https://stackoverflow.com/users/830401/soabirw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "accepted_answer_id": 51750126, "answer_count": 1, "score": 0, "last_activity_date": 1533757511, "creation_date": 1533684972, "last_edit_date": 1533686978, "question_id": 51736798, "link": "https://stackoverflow.com/questions/51736798/node-hmac-results-differ-from-both-ruby-and-java", "title": "Node HMAC results differ from both Ruby and Java", "body": "<p>I have 2 existing implementations of an HMAC hash for a 3rd party API.  Java and Ruby match perfectly when doing SHA1 or SHA256, but Node doesn't match either.  The code to implement in Node seems simple and straight forward, so I'm not sure where the difference is.</p>\n\n<p>In Ruby:</p>\n\n<pre><code>def calculateRFC2104HMAC(canonicalizedData, accessKey, algorithm)\n  digest = OpenSSL::Digest.new(algorithm)\n  hmac = OpenSSL::HMAC.digest(digest, accessKey, canonicalizedData)\n\n  return Base64.encode64(hmac)\nend\n# SHA1: SCN+L/M/nwwbk90VXBmEPe+18RU=\n# SHA256: hgY38OlBKRsFlcBYAiX94blJPisXTIr08rvZDc7Ljhk=\n</code></pre>\n\n<p>In Java:</p>\n\n<pre><code>private static String calculateRFC2104HMAC(String data,String \n    accessKey,String algorithm) {\n\n   SecretKeySpec signingKey=null;\n   byte[]rawHmac=null;\n   // get an hmac_sha256 key from the raw key bytes\n   signingKey=new SecretKeySpec(accessKey.getBytes(), \n     algorithm);\n\n   // get an hmac_sha256 Mac instance and initialize with the signing key\n   Mac mac=Mac.getInstance(algorithm);\n   mac.init(signingKey);\n   // compute the hmac on input data bytes\n   rawHmac=mac.doFinal(data.getBytes());\n\n   // base64-encode the HMAC\n   return new String(Base64.encodeBase64(rawHmac));\n}\n# SHA1: SCN+L/M/nwwbk90VXBmEPe+18RU=\n# SHA256: hgY38OlBKRsFlcBYAiX94blJPisXTIr08rvZDc7Ljhk=\n</code></pre>\n\n<p>In Node:</p>\n\n<pre><code>_calculateRFC2104HMAC = ({canonicalizedData, accessKey, algorithm}) =&gt; {\n    const hmac = crypto.createHmac(algorithm, accessKey);\n    hmac.update(canonicalizedData);\n\n    const hash = hmac.digest('base64');\n\n    return hash;\n};\n# SHA1: GspTWly+Ezh2aW/QkKZA1o+qHRg=\n# SHA256: FjVQ1Uj7866QZUv+jgLz/OahPbtPGEXpGwBbioqtBec=\n</code></pre>\n\n<p>I've verified the key and data is identical.</p>\n\n<p>Edit: Looks like the issue is line endings.  The data we build has to be separated by \\n line return.  This is done in both Java and Ruby just fine.  But the same \\n in Node makes the hash different and the request fail.</p>\n"}, {"tags": ["ruby", "regex", "string"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1533681121, "post_id": 51736125, "comment_id": 90433272, "body": "What have you tried? Show your code."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1533681897, "post_id": 51736125, "comment_id": 90433487, "body": "Maybe chain them together."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1533682377, "post_id": 51736125, "comment_id": 90433585, "body": "If you&#39;re just practicing regex, then \\s matches a whitespace, a tab, an LF or a CRLF. You can <b>replace</b> such characters with an empty string <code>&#39;&#39;</code>. See the documentation of <code>String#gsub</code> and <code>String#gsub!</code>"}, {"owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1533686309, "post_id": 51736125, "comment_id": 90434446, "body": "You aren&#39;t assigning the new value back into the variable. Try <code>some_string = some_string.delete(&#39; &#39;)</code> etc. Or like @SagarPandya said above, you can string them all on the first line."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1533697277, "last_edit_date": 1533697277, "creation_date": 1533689626, "answer_id": 51737227, "question_id": 51736125, "link": "https://stackoverflow.com/questions/51736125/delete-all-the-whitespaces-that-occur-after-a-word-in-ruby/51737227#51737227", "title": "Delete all the whitespaces that occur after a word in ruby", "body": "<pre><code>def remove_spaces_after_word(str, word)\n  i = str.index(/\\b#{word}\\b/i)\n  return str if i.nil?\n  i += word.size\n  str.gsub(/ /) { Regexp.last_match.begin(0) &gt;= i ? '' : ' ' }\nend\n\nremove_spaces_after_word(\"Hey hello world! How is it going?\", \"hello\")\n  #=&gt; \"Hey helloworld!Howisitgoing?\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1572419351, "post_id": 51737380, "comment_id": 103548834, "body": "Why is <code>\\s</code> in a capture group?"}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": true, "score": 3, "last_activity_date": 1533697038, "last_edit_date": 1533697038, "creation_date": 1533691322, "answer_id": 51737380, "question_id": 51736125, "link": "https://stackoverflow.com/questions/51736125/delete-all-the-whitespaces-that-occur-after-a-word-in-ruby/51737380#51737380", "title": "Delete all the whitespaces that occur after a word in ruby", "body": "<p>There are numerous ways this could be accomplished without without a regular expressions, but using them could be the \"cleanest\" looking approach without taking sub-strings, etc. The regular expression I believe you are looking for is <code>/(?!^)(\\s)/</code>.</p>\n\n<pre><code>\"  hello world! How is it going?\".gsub(/(?!^)(\\s)/, '')\n#=&gt; \" helloworld!Howisitgoing?\"\n</code></pre>\n\n<p>The <code>\\s</code> matched any whitespace character (including tabs, etc), and the <code>^</code> is an \"anchor\" meaning the beginning of the string. The <code>!</code> indicates to reject a match with following criteria. Using those together to your goal can be accomplished.</p>\n\n<p>If you are not familiar with <a href=\"https://ruby-doc.org/core-2.3.0/String.html#method-i-gsub\" rel=\"nofollow noreferrer\"><code>gsub</code></a>, it is very similar to <code>replace</code>, but takes a regular expression. It additionally has a <code>gsub!</code> counter-part to mutate the string in place without creating a new altered copy.</p>\n\n<p>Note that strictly speaking, this isn't all whitespace \"after a word\" to quote the exact question, but I gathered from your examples that your intentions were \"all whitespace except beginning of string\", which this will do.</p>\n"}], "owner": {"reputation": 86, "user_id": 1466958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F2ZlA.jpg?s=128&g=1", "display_name": "zealouscoder", "link": "https://stackoverflow.com/users/1466958/zealouscoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 51737380, "answer_count": 2, "score": 0, "last_activity_date": 1533697277, "creation_date": 1533679898, "last_edit_date": 1533681553, "question_id": 51736125, "link": "https://stackoverflow.com/questions/51736125/delete-all-the-whitespaces-that-occur-after-a-word-in-ruby", "title": "Delete all the whitespaces that occur after a word in ruby", "body": "<p>I have a string \"  hello world! How is it going?\"</p>\n\n<p>The output I need is \"  helloworld!Howisitgoing?\"</p>\n\n<p>So all the whitespaces after hello should be removed. I am trying to do this in ruby using regex.</p>\n\n<p>I tried strip and delete(' ') methods but I didn't get what I wanted. </p>\n\n<pre><code>some_string = \"  hello world! How is it going?\"\nsome_string.delete(' ') #deletes all spaces\nsome_string.strip #removes trailing and leading spaces only\n</code></pre>\n\n<p>Please help. Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 4, "last_activity_date": 1533675982, "creation_date": 1533675982, "answer_id": 51735439, "question_id": 51735341, "link": "https://stackoverflow.com/questions/51735341/ruby-reject-after-split-behaves-weirdly/51735439#51735439", "title": "Ruby .reject after .split behaves weirdly", "body": "<p>Let's have a look into <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-reject-21\" rel=\"nofollow noreferrer\">docs</a> of <code>reject!</code> method:</p>\n\n<blockquote>\n  <p>Equivalent to #delete_if, deleting elements from self for which the block evaluates to true, but returns nil if no changes were made.</p>\n</blockquote>\n\n<p>Since <code>'entry1, entry2'.split(/[\\s,;]/)</code> evaluates to <code>[\"entry1\", \"\", \"entry2\"]</code>, i. e. there's an empty string. That means that there is job to be done.</p>\n\n<p>But <code>'entry1,'.split(/[\\s,;]/)</code> evaluates to <code>[\"entry1\"]</code>, so <code>nil</code> is returned, since no changes were made.</p>\n\n<p>In order to make it more predictable, I'd suggest either using <code>reject</code> method:</p>\n\n<pre><code>'entry1,'.split(/[\\s,;]/).reject(&amp;:empty?)\n# =&gt; [\"entry1\"]\n</code></pre>\n\n<p>Or rely on the variable mutated by <code>reject!</code>:</p>\n\n<pre><code>a = 'entry1,'.split(/[\\s,;]/)\na.reject(&amp;:empty?)\na # =&gt; [\"entry1\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "is_accepted": false, "score": 1, "last_activity_date": 1533676834, "creation_date": 1533676834, "answer_id": 51735603, "question_id": 51735341, "link": "https://stackoverflow.com/questions/51735341/ruby-reject-after-split-behaves-weirdly/51735603#51735603", "title": "Ruby .reject after .split behaves weirdly", "body": "<p>I think that you are adding reject to remove empty values from your split, you can change it for something like this, to remove this need:</p>\n\n<pre><code>irb(main):016:0&gt; string = \"entry1, entry2; sadq;as\"\n=&gt; \"entry1, entry2; sadq;as\"\nirb(main):017:0&gt; string.split(/\\s*,\\s*|\\s*;\\s*/)\n=&gt; [\"entry1\", \"entry2\", \"sadq\", \"as\"]\n</code></pre>\n\n<p>or this is another option, using map to remove the empty spaces</p>\n\n<pre><code>irb(main):016:0&gt; string = \"entry1, entry2; sadq;as\"\n=&gt; \"entry1, entry2; sadq;as\"\nirb(main):020:0&gt; string.split(/,|;/).map(&amp;:strip)\n=&gt; [\"entry1\", \"entry2\", \"sadq\", \"as\"]\n</code></pre>\n\n<p>it doesn't answer your questions, but can help you to have simpler code there</p>\n"}], "owner": {"reputation": 2464, "user_id": 1035438, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d802ced0d7c4ac1f7a3d4958a90eb724?s=128&d=identicon&r=PG", "display_name": "Igor T.", "link": "https://stackoverflow.com/users/1035438/igor-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 51735439, "answer_count": 2, "score": 1, "last_activity_date": 1533676834, "creation_date": 1533675548, "question_id": 51735341, "link": "https://stackoverflow.com/questions/51735341/ruby-reject-after-split-behaves-weirdly", "title": "Ruby .reject after .split behaves weirdly", "body": "<p>In order to split a string on <code>,</code> or <code>;</code> I use this simple code</p>\n\n<pre><code>string.split(/[\\s,;]/).reject!(&amp;:empty?)\n</code></pre>\n\n<p>It works well for strings such as these</p>\n\n<pre><code>\"entry1, entry2, entry3\"\n\"entry1\"\n\"entry1, entry2,\"\n</code></pre>\n\n<p>but the problem is with <code>\"entry1,\"</code> (single element followed by a comma)</p>\n\n<p>Please have a look at these examples</p>\n\n<pre><code>2.2.4 :033 &gt; 'entry1,'.split(/[\\s,;]/).reject!(&amp;:empty?)\n =&gt; nil\n2.2.4 :034 &gt; 'entry1, entry2'.split(/[\\s,;]/).reject!(&amp;:empty?)\n =&gt; [\"entry1\", \"entry2\"]\n2.2.4 :035 &gt; 'entry1, entry2,'.split(/[\\s,;]/).reject!(&amp;:empty?)\n =&gt; [\"entry1\", \"entry2\"]\n</code></pre>\n\n<p>So</p>\n\n<pre><code>2.2.4 :033 &gt; 'entry1,'.split(/[\\s,;]/).reject!(&amp;:empty?)\n =&gt; nil\n</code></pre>\n\n<p>but</p>\n\n<pre><code>2.2.4 :037 &gt; 'entry1,'.split(/[\\s,;]/)\n =&gt; [\"entry1\"]\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "slim-lang"], "comments": [{"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1533674176, "post_id": 51734971, "comment_id": 90430836, "body": "try doing it like this <code>obelisk_callflow_nodes_path(c.id)</code>, you don&#39;t need to set the name of the param, just pass them in the order they are configured in the route"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533675030, "post_id": 51734971, "comment_id": 90431222, "body": "stop rails server, then <code>spring stop</code> and start the server again. Try this."}, {"owner": {"reputation": 143, "user_id": 4521541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ebcf80d30f790087dc59eae4d73b478?s=128&d=identicon&r=PG&f=1", "display_name": "jl118", "link": "https://stackoverflow.com/users/4521541/jl118"}, "edited": false, "score": 0, "creation_date": 1533675304, "post_id": 51734971, "comment_id": 90431328, "body": "Tried <code>obelisk_callflow_nodes_path(c.id)</code>  and got error undefined method `obelisk_callflow_nodes_path&#39; for #&lt;#&lt;Class:0x00007efc40ea1fa8&gt;:0x00007efc4092ceb0&gt;"}, {"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1533677886, "post_id": 51734971, "comment_id": 90432303, "body": "and are you sure c.id have a valid id? can you put a screeenshot of the error?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533713112, "post_id": 51734971, "comment_id": 90441656, "body": "Can you show the server logs?"}], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 4521541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ebcf80d30f790087dc59eae4d73b478?s=128&d=identicon&r=PG&f=1", "display_name": "jl118", "link": "https://stackoverflow.com/users/4521541/jl118"}, "is_accepted": false, "score": 0, "last_activity_date": 1533743182, "creation_date": 1533743182, "answer_id": 51750776, "question_id": 51734971, "link": "https://stackoverflow.com/questions/51734971/html-slim-link-to-undefined-method-error/51750776#51750776", "title": "html slim link_to undefined method error", "body": "<p>I changed the routes so that I no longer user <code>namespace obelisk</code> so the routes don't start with /obelisk/. This fixes the problem. I know it might not be the best solution but in this case it has worked for the purpose of my project. </p>\n"}], "owner": {"reputation": 143, "user_id": 4521541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ebcf80d30f790087dc59eae4d73b478?s=128&d=identicon&r=PG&f=1", "display_name": "jl118", "link": "https://stackoverflow.com/users/4521541/jl118"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533743182, "creation_date": 1533673932, "last_edit_date": 1533675683, "question_id": 51734971, "link": "https://stackoverflow.com/questions/51734971/html-slim-link-to-undefined-method-error", "title": "html slim link_to undefined method error", "body": "<p>In my rails project, I ran <code>rake routes</code> and got the following output: </p>\n\n<pre><code> Prefix Verb   URI Pattern                                              Controller#Action\nobelisk_callflow_nodes GET    /obelisk/callflows/:callflow_id/nodes(.:format)          obelisk/nodes#index\n                       POST   /obelisk/callflows/:callflow_id/nodes(.:format)          obelisk/nodes#create\nnew_obelisk_callflow_node GET    /obelisk/callflows/:callflow_id/nodes/new(.:format)      obelisk/nodes#new\nedit_obelisk_callflow_node GET    /obelisk/callflows/:callflow_id/nodes/:id/edit(.:format) obelisk/nodes#edit\n obelisk_callflow_node GET    /obelisk/callflows/:callflow_id/nodes/:id(.:format)      obelisk/nodes#show\n                       PATCH  /obelisk/callflows/:callflow_id/nodes/:id(.:format)      obelisk/nodes#update\n                       PUT    /obelisk/callflows/:callflow_id/nodes/:id(.:format)      obelisk/nodes#update\n                       DELETE /obelisk/callflows/:callflow_id/nodes/:id(.:format)      obelisk/nodes#destroy\n     obelisk_callflows GET    /obelisk/callflows(.:format)                             obelisk/callflows#index\n                       POST   /obelisk/callflows(.:format)                             obelisk/callflows#create\n  new_obelisk_callflow GET    /obelisk/callflows/new(.:format)                         obelisk/callflows#new\n edit_obelisk_callflow GET    /obelisk/callflows/:id/edit(.:format)                    obelisk/callflows#edit\n      obelisk_callflow GET    /obelisk/callflows/:id(.:format)                         obelisk/callflows#show\n                       PATCH  /obelisk/callflows/:id(.:format)                         obelisk/callflows#update\n                       PUT    /obelisk/callflows/:id(.:format)                         obelisk/callflows#update\n                       DELETE /obelisk/callflows/:id(.:format)                         obelisk/callflows#destroy\n</code></pre>\n\n<p>I have a html.slim file for showing all the callflows (i.e.obelisk/nodes#index). In this file, I want to add a button to show the nodes of each callflow (i.e. connect that button to <code>obelisk_callflow_nodes GET    /obelisk/callflows/:callflow_id/nodes</code>)</p>\n\n<p>I've tried <code>= link_to 'Nodes', obelisk_callflow_nodes_path(callflow_id: c.id), method: :get, class: 'btn btn-primary'</code> where c is a callflow object. I've checked that c is what I want because I have <code>c.name</code> rendering properly. However, I'm getting the following error: </p>\n\n<p><code>undefined method</code>obelisk_callflow_nodes_path' for #&lt;#:0x00007fb3d5abebc8>`</p>\n\n<p>I've checked that I do have an index method for my Obelisk::NodesController </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 1, "creation_date": 1533674049, "post_id": 51732464, "comment_id": 90430778, "body": "this normally happens when you have wrong css/js code on your asset files, so you need to debug those assets to see if you see some syntax error there"}, {"owner": {"reputation": 12955, "user_id": 147390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/db953d125f5cc49756edb6149f1b813e?s=128&d=identicon&r=PG", "display_name": "Schneems", "link": "https://stackoverflow.com/users/147390/schneems"}, "edited": false, "score": 0, "creation_date": 1535402276, "post_id": 51732464, "comment_id": 91044247, "body": "<code>Segmentation fault (core dumped)</code> this is not a normal thing to see during rake assets precompile. This is likely the fault of a native extension going haywire somewhere. Try to upgrade all your gems with a native extension."}], "answers": [{"tags": [], "owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "is_accepted": false, "score": 0, "last_activity_date": 1535402194, "last_edit_date": 1535402194, "creation_date": 1533891111, "answer_id": 51782592, "question_id": 51732464, "link": "https://stackoverflow.com/questions/51732464/pushing-from-codeanywhere-to-heroku-precompiling-assets-failed/51782592#51782592", "title": "Pushing from Codeanywhere to Heroku - Precompiling assets failed", "body": "<p>Type <code>$ RAILS_ENV=production rake assets:precompile</code> locally\nLet me know if this does work?</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10193410"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1535402194, "creation_date": 1533663359, "last_edit_date": 1533673995, "question_id": 51732464, "link": "https://stackoverflow.com/questions/51732464/pushing-from-codeanywhere-to-heroku-precompiling-assets-failed", "title": "Pushing from Codeanywhere to Heroku - Precompiling assets failed", "body": "<p>So I am a noob to coding. I know some html/css, but that is about it. Anyways, I am following the instructions in this poorly formatted ebook on Ruby on Rails. I have set up a container project on codeanywhere. So far I have fixed all errors up to this point through searching. It seems like a lot of people are having this problem, but I have not found a solution. I am trying to push to my Heroku account. Can anyone figure out what I am doing wrong by looking at the log? So far I have added config.assets.initialize_on_precompile = false to my application.rb file because that was one of the potential fixes. Otherwise, I'm lost.</p>\n\n<pre><code>-----&gt; Ruby app detected\n\n-----&gt; Compiling Ruby/Rails\n\n-----&gt; Using Ruby version: ruby-2.4.4\n\n-----&gt; Installing dependencies using bundler 1.15.2\n\n       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\n\n       Fetching gem metadata from https://rubygems.org/..........\n\n       Fetching version metadata from https://rubygems.org/..\n\n       Fetching dependency metadata from https://rubygems.org/.\n\n       Fetching rake 12.3.1\n\n       Fetching concurrent-ruby 1.0.5\n\n       Fetching json 1.8.6\n\n       Installing rake 12.3.1\n\n       Installing concurrent-ruby 1.0.5\n\n       Installing json 1.8.6 with native extensions\n\n       Fetching minitest 5.11.3\n\n       Installing minitest 5.11.3\n\n       Fetching thread_safe 0.3.6\n\n       Fetching builder 3.2.3\n\n       Installing thread_safe 0.3.6\n\n       Installing builder 3.2.3\n\n       Fetching erubis 2.7.0\n\n       Installing erubis 2.7.0\n\n       Fetching rack 1.5.5\n\n       Installing rack 1.5.5\n\n       Fetching mini_mime 1.0.0\n\n       Installing mini_mime 1.0.0\n\n       Fetching arel 5.0.1.20140414130214\n\n       Using bundler 1.15.2\n\n       Fetching coffee-script-source 1.12.2\n\n       Installing arel 5.0.1.20140414130214\n\n       Installing coffee-script-source 1.12.2\n\n       Fetching execjs 2.7.0\n\n       Installing execjs 2.7.0\n\n       Fetching thor 0.20.0\n\n       Installing thor 0.20.0\n\n       Fetching diff-lcs 1.3\n\n       Fetching hike 1.2.3\n\n       Installing hike 1.2.3\n\n       Installing diff-lcs 1.3\n\n       Fetching multi_json 1.13.1\n\n       Installing multi_json 1.13.1\n\n       Fetching mini_portile2 2.3.0\n\n       Fetching pg 0.17.1\n\n       Installing mini_portile2 2.3.0\n\n       Installing pg 0.17.1 with native extensions\n\n       Fetching tilt 1.4.1\n\n       Installing tilt 1.4.1\n\n       Fetching rails_serve_static_assets 0.0.5\n\n       Installing rails_serve_static_assets 0.0.5\n\n       Fetching rails_stdout_logging 0.0.5\n\n       Installing rails_stdout_logging 0.0.5\n\n       Fetching rdoc 4.3.0\n\n       Installing rdoc 4.3.0\n\n       Fetching rspec-support 3.8.0\n\n       Installing rspec-support 3.8.0\n\n       Fetching sass 3.2.19\n\n       Installing sass 3.2.19\n\n       Fetching turbolinks-source 5.1.0\n\n       Installing turbolinks-source 5.1.0\n\n       Fetching i18n 0.9.5\n\n       Installing i18n 0.9.5\n\n       Fetching tzinfo 1.2.5\n\n       Installing tzinfo 1.2.5\n\n       Fetching rack-test 0.6.3\n\n       Installing rack-test 0.6.3\n\n       Fetching mail 2.7.0\n\n       Installing mail 2.7.0\n\n       Fetching coffee-script 2.4.1\n\n       Installing coffee-script 2.4.1\n\n       Fetching uglifier 4.1.17\n\n       Installing uglifier 4.1.17\n\n       Fetching nokogiri 1.8.4\n\n       Installing nokogiri 1.8.4 with native extensions\n\n       Fetching sprockets 2.12.5\n\n       Installing sprockets 2.12.5\n\n       Fetching rails_12factor 0.0.2\n\n       Installing rails_12factor 0.0.2\n\n       Fetching rspec-core 3.8.0\n\n       Installing rspec-core 3.8.0\n\n       Fetching rspec-expectations 3.8.1\n\n       Installing rspec-expectations 3.8.1\n\n       Fetching rspec-mocks 3.8.0\n\n       Installing rspec-mocks 3.8.0\n\n       Fetching turbolinks 5.1.1\n\n       Installing turbolinks 5.1.1\n\n       Fetching rspec 3.8.0\n\n       Installing rspec 3.8.0\n\n       Fetching activesupport 4.1.6\n\n       Fetching sdoc 0.4.2\n\n       Installing sdoc 0.4.2\n\n       Installing activesupport 4.1.6\n\n       Fetching actionview 4.1.6\n\n       Fetching activemodel 4.1.6\n\n       Fetching jbuilder 2.6.4\n\n       Installing activemodel 4.1.6\n\n       Installing jbuilder 2.6.4\n\n       Installing actionview 4.1.6\n\n       Fetching activerecord 4.1.6\n\n       Installing activerecord 4.1.6\n\n       Fetching actionpack 4.1.6\n\n       Installing actionpack 4.1.6\n\n       Fetching actionmailer 4.1.6\n\n       Fetching railties 4.1.6\n\n       Fetching sprockets-rails 2.3.3\n\n       Installing actionmailer 4.1.6\n\n       Installing sprockets-rails 2.3.3\n\n       Installing railties 4.1.6\n\n       Fetching jquery-rails 3.1.5\n\n       Fetching rails 4.1.6\n\n       Fetching coffee-rails 4.0.1\n\n       Installing coffee-rails 4.0.1\n\n       Fetching sass-rails 4.0.5\n\n       Installing jquery-rails 3.1.5\n\n       Installing sass-rails 4.0.5\n\n       Installing rails 4.1.6\n\n       Bundle complete! 15 Gemfile dependencies, 54 gems now installed.\n\n       Gems in the groups development and test were not installed.\n\n       Bundled gems are installed into ./vendor/bundle.\n\n       Bundle completed (22.78s)\n\n       Cleaning up the bundler cache.\n\n-----&gt; Installing node-v8.10.0-linux-x64\n\n-----&gt; Detecting rake tasks\n\n-----&gt; Preparing app for Rails asset pipeline\n\n       Running: rake assets:precompile\n\n       /tmp/build_08716fff5e55005d68d2f9475e33fcff/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.6/lib/active_support/core_ext/numeric/conversions.rb:121: warning: constant ::Fixnum is deprecated\n\n       /tmp/build_08716fff5e55005d68d2f9475e33fcff/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.6/lib/active_support/core_ext/numeric/conversions.rb:121: warning: constant ::Bignum is deprecated\n\n       Segmentation fault (core dumped)\n\n !\n\n !     Precompiling assets failed.\n\n !\n\n !     Push rejected, failed to compile Ruby app.\n\n !     Push failed\n</code></pre>\n"}, {"tags": ["ruby", "refactoring", "associations"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1533663703, "post_id": 51732264, "comment_id": 90425833, "body": "One would normally write that method to contain a single line: <code>objective.preassigns.all? { |preassign|       user.objective_students.find_by(objective_id: preassign.id).points_all_time &gt;= 7 }</code>. <code>self.</code> is implicit and therefore not needed. These changes would not affect performance. I don&#39;t understand the question fully so cannot suggest possible changes that could improve performance."}, {"owner": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1533664653, "post_id": 51732264, "comment_id": 90426264, "body": "I think what I&#39;m really looking for is a way to check the student&#39;s scores on all of the preassigned objectives.  But do that with fewer calls to the database than I&#39;m currently doing."}], "answers": [{"comments": [{"owner": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "edited": false, "score": 0, "creation_date": 1533679454, "post_id": 51732612, "comment_id": 90432798, "body": "I did end up taking your advice about the method name. Thank you."}], "tags": [], "owner": {"reputation": 11, "user_id": 9926446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ba7ee498ad79296d5401115522930fa?s=128&d=identicon&r=PG&f=1", "display_name": "mertmumtaz", "link": "https://stackoverflow.com/users/9926446/mertmumtaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1533663947, "creation_date": 1533663947, "answer_id": 51732612, "question_id": 51732264, "link": "https://stackoverflow.com/questions/51732264/ruby-method-for-values-from-all-associations/51732612#51732612", "title": "Ruby method for values from all associations", "body": "<p>One way you could \"rubify\" this method is to rewrite the signature as:</p>\n\n<pre><code>def is_ready?\n</code></pre>\n\n<p>It is common practice to append <code>?</code> to functions that return a boolean value in Ruby. (Note: I also don't really see a reason to have the word 'check' in the declaration, but that's just an opinion).</p>\n\n<p>Furthermore, if <code>objective_id</code> is the primary key for the <code>objective_students</code> model, you can simply write <code>objective_students.find(preassign.id)</code> instead of the <code>find_by</code> method.</p>\n\n<p>I would also suggest having a separate method for returning a student's points (especially since I suspect you will need to get a student's points more than just once) :</p>\n\n<pre><code>def getPoints(preAssignId)\n   return self.user.objective_students.find_by(objective_id: preAssignId).points_all_time\nend\n</code></pre>\n\n<p>Then your main method can be written in a more clear, self-describing manner as:</p>\n\n<pre><code> def is_ready?\n    self.objective.preassigns.each {|preassign| return false if getPoints(preassign) &lt; 7 }\n    return true\n end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "edited": false, "score": 0, "creation_date": 1533679411, "post_id": 51734202, "comment_id": 90432783, "body": "I thought yours was the best.  Right now I&#39;m going with this syntax         user.objective_students.where(:objective =&gt; objective.preassigns).all? {|obj_stud| obj_stud.points_all_time &gt;= 7 }.  Is it faster to use the id, as you suggest?  Or are they the same?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "edited": false, "score": 1, "creation_date": 1533680256, "post_id": 51734202, "comment_id": 90433027, "body": "@JeffZivkovic they are identical as yours will be transformed into the same as mine. Yours just simply implies <code>id</code> and my explicitly states it. Rails magic and all that"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 2, "last_activity_date": 1533670813, "last_edit_date": 1533670813, "creation_date": 1533670453, "answer_id": 51734202, "question_id": 51732264, "link": "https://stackoverflow.com/questions/51732264/ruby-method-for-values-from-all-associations/51734202#51734202", "title": "Ruby method for values from all associations", "body": "<p>The following should work for you:</p>\n\n<pre><code>def is_ready? \n  user.objective_students\n   .where(objective_id: objective.preassigns.select(:id))\n   .none? { |obj_stud| obj_stud.points_all_time &lt; 7 }\nend\n</code></pre>\n\n<p>We collect all the <code>objective_students</code> for the <code>user</code> where the <code>objective_id</code> is in the list of <code>objective.preassigns</code> ids. This results in one 1 query being executed.</p>\n\n<p>Then we use <code>Enumerable#none?</code> to make sure that none of the <code>objective_students</code> have <code>points_all_time</code> less than 7. </p>\n\n<p>You could also use the inverse <code>.all? { |obj_stud| obj_stud.points_all_time &gt;= 7 }</code> if you wanted </p>\n"}], "owner": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 51734202, "answer_count": 2, "score": 1, "last_activity_date": 1533670813, "creation_date": 1533662524, "last_edit_date": 1533665402, "question_id": 51732264, "link": "https://stackoverflow.com/questions/51732264/ruby-method-for-values-from-all-associations", "title": "Ruby method for values from all associations", "body": "<p>This method works, but I'm sure the performance could be greatly improved.  Also, I'm realizing how fun and awesome it is to take smelly code like this, and rubify it.  But I need a little more help to get my Ruby skills to the level to refactor something like this.</p>\n\n<p>An objective can have \"preassign\" objectives.  These are pre-requisites that must be completed before the a student can try the objective in question.</p>\n\n<p>ObjectiveStudent is the join model between an objective and a student.  It has a method called \"points_all_time\" that finds the student's best score on that objective.</p>\n\n<p>The check_if_ready method is the one that I'm trying to refactor in this question.  It also belong to the ObjectiveStudent model. \n It needs to check whether the student has passed ALL of the preassigns for a given objective.  If so, return true. Return false if the student has a less-than-passing score on any of the preassigns.</p>\n\n<pre><code>def check_if_ready\n    self.objective.preassigns.each do |preassign|\n        obj_stud = self.user.objective_students.find_by(objective_id: preassign.id)\n        return false if obj_stud.points_all_time &lt; 7\n    end\n    return true\nend\n</code></pre>\n\n<p>Right now I suspect this method is making too many calls to the database.  What I'm really hoping to find is some way to look at the scores for the pre-reqs with a single db call.</p>\n\n<p>Thank you in advance for any insight.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "form-helpers"], "comments": [{"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1533659502, "post_id": 51731312, "comment_id": 90423838, "body": "is <code>current_school</code> distinct from some other collection of <code>school</code>s?"}, {"owner": {"reputation": 1, "user_id": 10156724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61685190d62a2b19387816d8a69891fd?s=128&d=identicon&r=PG", "display_name": "Adriano", "link": "https://stackoverflow.com/users/10156724/adriano"}, "reply_to_user": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1533660634, "post_id": 51731312, "comment_id": 90424421, "body": "No, it&#39;s actually the same thing, I will edit the question. Thank you for pointing that out. The results are the same."}, {"owner": {"reputation": 4956, "user_id": 74814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58e080f1350fdd7d34644f63bb87f867?s=128&d=identicon&r=PG", "display_name": "grilix", "link": "https://stackoverflow.com/users/74814/grilix"}, "edited": false, "score": 2, "creation_date": 1533661448, "post_id": 51731312, "comment_id": 90424804, "body": "Do you have something like <code>school.children.new</code> somewhere? As a side note, you can use <code>if school.children.empty?</code>."}, {"owner": {"reputation": 1, "user_id": 10156724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61685190d62a2b19387816d8a69891fd?s=128&d=identicon&r=PG", "display_name": "Adriano", "link": "https://stackoverflow.com/users/10156724/adriano"}, "edited": false, "score": 0, "creation_date": 1533661896, "post_id": 51731312, "comment_id": 90425037, "body": "Yes! Thank you! <code>if school.children.empty?</code> worked like a charm. Such a simple solution. There is no <code>school.children.new</code> though, should be?"}], "answers": [{"tags": [], "owner": {"reputation": 179, "user_id": 7170222, "user_type": "registered", "profile_image": "https://graph.facebook.com/1233928529974752/picture?type=large", "display_name": "neume", "link": "https://stackoverflow.com/users/7170222/neume"}, "is_accepted": false, "score": 0, "last_activity_date": 1533708340, "creation_date": 1533708340, "answer_id": 51739606, "question_id": 51731312, "link": "https://stackoverflow.com/questions/51731312/conditionally-omit-hide-button-in-rails/51739606#51739606", "title": "Conditionally Omit/Hide Button in Rails", "body": "<p>The <code>school.children.length</code> returns the size of the collection. So,<code>new</code> child is also counted.</p>\n\n<blockquote>\n  <p><strong>length()</strong> Returns the size of the collection calling size on the target. If the collection has been already loaded, length and size are equivalent. If not and you are going to need the records anyway this method will take one less query. Otherwise size is more efficient.</p>\n</blockquote>\n\n<p>You can use <code>school.children.count</code> to count the records that persisted in the database. This method call will fire a database query.</p>\n"}], "owner": {"reputation": 1, "user_id": 10156724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61685190d62a2b19387816d8a69891fd?s=128&d=identicon&r=PG", "display_name": "Adriano", "link": "https://stackoverflow.com/users/10156724/adriano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533708340, "creation_date": 1533658626, "last_edit_date": 1533660673, "question_id": 51731312, "link": "https://stackoverflow.com/questions/51731312/conditionally-omit-hide-button-in-rails", "title": "Conditionally Omit/Hide Button in Rails", "body": "<p>My first time asking. I'm in an internship so I'm not that proficient in Rails. Currently I'm working in a code that isn't mine, it has no automated tests and no documentation whatsoever, so I spent lots of time trying to understand what the functions does before actually writing some code.</p>\n\n<p><strong>My question:</strong></p>\n\n<p>What I'm trying to accomplish is to hide/omit a button, under a set of conditions.</p>\n\n<p><strong>My research:</strong></p>\n\n<p>Already searched everywhere but with no luck to my specific problem. Tried the solutions here: <a href=\"https://stackoverflow.com/questions/13219315/how-to-disable-all-form-for-input-fields-in-ruby-on-rails-app\">How to disable all form_for input fields in Ruby on Rails app?</a> and here: <a href=\"https://stackoverflow.com/questions/37098902/in-rails-edit-action-form-hide-a-form-field\">In Rails edit action form, hide a form field</a>. Also read rails documentation about form helpers: <a href=\"https://guides.rubyonrails.org/v4.2.10/form_helpers.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/v4.2.10/form_helpers.html</a></p>\n\n<p><strong>The problem:</strong></p>\n\n<p>There is an object called school that is divided into Schools and SchoolGroup, theoretically schools that have children should be SchoolGroup. I'm trying to omit the Delete button to every SchoolGroup that have Schools associated with it.</p>\n\n<p>If I put like this nothing happens</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>&lt;% if school.children.length &lt; 1 %&gt;\n&lt;%= button_to 'Delete', school, :data =&gt; {:confirm =&gt; 'Are you sure you want to delete this school?'}, :method =&gt; :delete, :class=&gt;\"btn btn-sm btn-delete\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>However if I put like this</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>&lt;% if school.children.length &gt; 0 %&gt;\n</code></pre>\n\n<p>every button disappears! </p>\n\n<p>So, I'm inferring that every school probably have children, even though it shouldn't and I need to ask for a different condition. Or should I try a controller-wise solution? If so, what can I do?</p>\n\n<p>I'm using ruby 2.2.10 and rails 4.2.10.</p>\n\n<p>Thank you all for your time and any help :)</p>\n"}, {"tags": ["ruby", "irb", "pry"], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533654527, "post_id": 51729560, "comment_id": 90420796, "body": "Just to add to that, the latest version of <code>pry</code> (at the time of writing) also depends on the <code>coderay</code> and <code>method_source</code> gems. So the full list of loaded libraries also depends on whatever the current version of <i>those</i> gems happens to use. All of which may also be dependant on the current ruby version, and ruby interpreter."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1533654622, "post_id": 51729560, "comment_id": 90420856, "body": "So my summary would be (1) Who cares what&#39;s auto-loaded? Always assume nothing is loaded by default, and you&#39;ll be fine. <code>require</code>ing the same dependency multiple times is not an issue; in fact, it will do <i>nothing</i> the second time. Use <code>load</code> if you really want to forcibly re-require a dependency. (2) If you really do care, it&#39;s best to just check <code>$LOADED_FEATURES</code> rather than looking at some StackOverflow post/similar, since that information will almost certainly go out of date."}, {"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533655448, "post_id": 51729560, "comment_id": 90421413, "body": "@TomLord I assume the answer to (1) is the inverse: &quot;I was happily using Tempfile not realising it needed to be required; what else do I need to be similarly cautious about?&quot;; unfortunately I don&#39;t think there&#39;s a good solution to that (excluding &quot;just remember&quot; and &quot;look up every seemingly-built-in constant you use&quot;)."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533669509, "post_id": 51729560, "comment_id": 90428628, "body": "Bottom-line, If its not part of the <b>core</b> library, you should be requiring it including <b>standard</b> library scripts. Relying on any other &quot;automatic&quot; behavior from a third party script/gem which could change at any moment outside of your control is not the best way to write robust code. If everything requires its own dependencies without relying on others, then there is nothing to ever worry about."}], "tags": [], "owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "is_accepted": false, "score": 7, "last_activity_date": 1533653028, "creation_date": 1533653028, "answer_id": 51729560, "question_id": 51729422, "link": "https://stackoverflow.com/questions/51729422/which-libraries-are-loaded-by-default-in-pry/51729560#51729560", "title": "Which libraries are loaded by default in pry?", "body": "<p>You can compare <code>$LOADED_FEATURES</code> to see everything that's loaded in a default <code>pry</code> session vs an <code>irb</code> session (or a plain ruby script).</p>\n\n<p>The short answer is that Pry loads whichever libraries it needs to provide its own behaviour. The long answer is too long (and too likely to get out of date, or differ between versions) to list here -- better to ask your current environment.</p>\n\n<p>It's good practice not to rely on other libraries to load their dependencies for you, because those dependencies can change. (Though in cases like this, it can be hard to notice you're missing a <code>require</code>, because everything still works.)</p>\n"}, {"tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": true, "score": 2, "last_activity_date": 1533658797, "creation_date": 1533658797, "answer_id": 51731346, "question_id": 51729422, "link": "https://stackoverflow.com/questions/51729422/which-libraries-are-loaded-by-default-in-pry/51731346#51731346", "title": "Which libraries are loaded by default in pry?", "body": "<p>As an alternative to $LOADED_FEATURES, which can be a bit excessive, consider:</p>\n\n<pre><code>Gem.loaded_specs.values.each {|s| puts s.name}\n</code></pre>\n\n<p>which only lists gems with specs</p>\n\n<pre><code>[20] pry(main)&gt; Gem.loaded_specs.values.each {|s| puts s.name};nil\ndid_you_mean\ncoderay\nmethod_source\npry\nio-console\nvls\n=&gt; nil\n</code></pre>\n\n<p>BTW, in this example, I had loaded the vls gem manually.</p>\n"}], "owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 51731346, "answer_count": 2, "score": 2, "last_activity_date": 1533658797, "creation_date": 1533652618, "question_id": 51729422, "link": "https://stackoverflow.com/questions/51729422/which-libraries-are-loaded-by-default-in-pry", "title": "Which libraries are loaded by default in pry?", "body": "<p>When I use <code>Tempfile</code> class in <code>pry</code>, I don't use require it.</p>\n\n<pre><code>% pry -f\npry(main)&gt; Tempfile\nTempfile &lt; #&lt;Class:0x00007fb5121149b8&gt;\n</code></pre>\n\n<p>But when in <code>irb</code> I must to require <code>tempfile</code> first.</p>\n\n<pre><code>% irb\nirb(main):001:0&gt; Tempfile\nNameError: uninitialized constant Tempfile\n    from (irb):1\n    from /Users/ironsand/.rbenv/versions/2.4.3/bin/irb:11:in `&lt;main&gt;'\nirb(main):002:0&gt; require 'tempfile'\n=&gt; true\n</code></pre>\n\n<p>So it seems <code>pry</code> load some libraries by default.\nWhich libraries are actually loaded?</p>\n\n<p>This is my environment</p>\n\n<pre><code> % ruby -v\nruby 2.4.3p205 (2017-12-14 revision 61247) [x86_64-darwin17]\n % irb --version\npirb 0.9.6(09/06/30)\n % pry --version\nPry version 0.11.3 on Ruby 2.4.3\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 1, "creation_date": 1533652159, "post_id": 51729206, "comment_id": 90419173, "body": "Please add request param to the question"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1533652298, "creation_date": 1533652298, "answer_id": 51729321, "question_id": 51729206, "link": "https://stackoverflow.com/questions/51729206/find-by-doesnt-work-with-passed-params-item/51729321#51729321", "title": "find_by doesn&#39;t work with passed params item", "body": "<p>Because your identifiers are nested below <code>:transfer</code> in your <code>params</code>.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>@receiver = Wallet.find_by(number: params['transfer']['receiver'])\n@sender = Wallet.find_by(number: params['transfer']['sender'])\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10192582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02585687adec8dffca02ee6a0905bcdd?s=128&d=identicon&r=PG&f=1", "display_name": "XMSM", "link": "https://stackoverflow.com/users/10192582/xmsm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 51729321, "answer_count": 1, "score": 0, "last_activity_date": 1533652298, "creation_date": 1533652003, "question_id": 51729206, "link": "https://stackoverflow.com/questions/51729206/find-by-doesnt-work-with-passed-params-item", "title": "find_by doesn&#39;t work with passed params item", "body": "<p>Why this works? </p>\n\n<pre><code>class TransfersController &lt; ApplicationController\n  def create\n    @receiver = Wallet.find_by(number: \"e27690b243dc249638b202c930dc022f\")\n    @sender = Wallet.find_by(number: \"3e6c234504e407309d7d91e67f65f5fb\")\n    render :json =&gt; {:receiver =&gt; @receiver, :sender =&gt; @sender, :params =&gt; params}\nend\nend\n</code></pre>\n\n<p>Output of code above is</p>\n\n<pre><code>{\"receiver\":{\"id\":1,\"owner\":1,\"number\":\"e27690b243dc249638b202c930dc022f\",\"money\":100,\"status\":0,\"reason\":null,\"created_at\":\"2018-08-07T13:46:52.015Z\",\"updated_at\":\"2018-08-07T13:46:52.015Z\"},\"sender\":{\"id\":2,\"owner\":1,\"number\":\"3e6c234504e407309d7d91e67f65f5fb\",\"money\":100,\"status\":0,\"reason\":null,\"created_at\":\"2018-08-07T13:56:22.097Z\",\"updated_at\":\"2018-08-07T13:56:22.097Z\"},\"params\":{\"utf8\":\"\u2713\",\"authenticity_token\":\"9xlWBswszN6cZSYFeA24TEMDfJheiw+0ZLObdFRw/SYVT0mwDlJu2XMYktvnF0X+n+7uUX8G7iFd07ndNa98Vg==\",\"transfer\":{\"sender\":\"e27690b243dc249638b202c930dc022f\",\"receiver\":\"3e6c234504e407309d7d91e67f65f5fb\",\"summa\":\"5\",\"comment\":\"dfhdhfdhf\"},\"commit\":\"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c\",\"controller\":\"transfers\",\"action\":\"create\"}}\n</code></pre>\n\n<p>But this doesn't? Receiver and sender objects are both null</p>\n\n<pre><code>class TransfersController &lt; ApplicationController\n  def create\n    @receiver = Wallet.find_by(number: params['receiver'])\n    @sender = Wallet.find_by(number: params['sender'])\n    return :json =&gt; {:receiver =&gt; @receiver, :sender =&gt; @sender, :params =&gt; params}\nend\nend\n</code></pre>\n\n<p>JSON output is</p>\n\n<pre><code>{\"receiver\":null,\"sender\":null,\"params\":{\"utf8\":\"\u2713\",\"authenticity_token\":\"9xlWBswszN6cZSYFeA24TEMDfJheiw+0ZLObdFRw/SYVT0mwDlJu2XMYktvnF0X+n+7uUX8G7iFd07ndNa98Vg==\",\"transfer\":{\"sender\":\"e27690b243dc249638b202c930dc022f\",\"receiver\":\"3e6c234504e407309d7d91e67f65f5fb\",\"summa\":\"5\",\"comment\":\"dfhdhfdhf\"},\"commit\":\"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c\",\"controller\":\"transfers\",\"action\":\"create\"}}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "edited": false, "score": 0, "creation_date": 1533652920, "post_id": 51728947, "comment_id": 90419734, "body": "Could you attach the request params sent?"}, {"owner": {"reputation": 11, "user_id": 10191932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9641f1c4488b8f4e527b1099df6dee87?s=128&d=identicon&r=PG&f=1", "display_name": "user10191932", "link": "https://stackoverflow.com/users/10191932/user10191932"}, "reply_to_user": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "edited": false, "score": 0, "creation_date": 1533653345, "post_id": 51728947, "comment_id": 90420040, "body": "{&quot;utf8&quot;=&gt;&quot;\u2713&quot;,  &quot;authenticity_token&quot;=&gt;&quot;zIgdOR2apNFD6tyZbGaqnDTbEZ+q1eZbYnjuj&zwnj;&#8203;4hN1IbfIQv/KMZD3+JfQ&zwnj;&#8203;fAtOyAQnPyVTv3UAecGK&zwnj;&#8203;aEECdWkEw==&quot;,  &quot;answered_question&quot;=&gt;{&quot;id&quot;=&gt;&quot;6&quot;, &quot;answered_questions&quot;=&gt;{&quot;question_id&quot;=&gt;&quot;10&quot;, &quot;quiz_id&quot;=&gt;&quot;6&quot;, &quot;answer_id&quot;=&gt;&quot;19&quot;}},  &quot;commit&quot;=&gt;&quot;Save changes&quot;}"}, {"owner": {"reputation": 11, "user_id": 10191932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9641f1c4488b8f4e527b1099df6dee87?s=128&d=identicon&r=PG&f=1", "display_name": "user10191932", "link": "https://stackoverflow.com/users/10191932/user10191932"}, "reply_to_user": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "edited": false, "score": 0, "creation_date": 1533653369, "post_id": 51728947, "comment_id": 90420057, "body": "Along with this error: param is missing or the value is empty: answered_questions - it should also be submitting two records not one, not sure why it&#39;s only submitting the last one"}, {"owner": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "edited": false, "score": 0, "creation_date": 1533661358, "post_id": 51728947, "comment_id": 90424762, "body": "I guess that both submitted values got the same name in the html element so for example they both got &#39;question_id&#39; key, and while params is a hash keys are uniq so the overlap and last one vale will be the sent value, could u check the names of inputs in the form."}, {"owner": {"reputation": 11, "user_id": 10191932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9641f1c4488b8f4e527b1099df6dee87?s=128&d=identicon&r=PG&f=1", "display_name": "user10191932", "link": "https://stackoverflow.com/users/10191932/user10191932"}, "reply_to_user": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "edited": false, "score": 0, "creation_date": 1533715349, "post_id": 51728947, "comment_id": 90442977, "body": "Is there any way I can change the name of the question id and dropdown select so that they have different names without changing the fields for?"}], "owner": {"reputation": 11, "user_id": 10191932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9641f1c4488b8f4e527b1099df6dee87?s=128&d=identicon&r=PG&f=1", "display_name": "user10191932", "link": "https://stackoverflow.com/users/10191932/user10191932"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533653315, "creation_date": 1533651255, "last_edit_date": 1533653315, "question_id": 51728947, "link": "https://stackoverflow.com/questions/51728947/having-problems-saving-users-responses-in-quiz-form", "title": "Having problems saving users&#39; responses in quiz form", "body": "<p>I'm trying to create an app where a user can click on a quiz and it will take them to the page where they can answer the quiz questions and submit their responses to a results page.</p>\n\n<p>I'm having trouble saving the users' responses - it's either only saving the last records rather than all of them or not saving to the database at all.</p>\n\n<p>Here is my code:</p>\n\n<p>Question.rb:</p>\n\n<pre><code>  belongs_to :quiz\n  has_many :answered_questions, dependent: :destroy\n  has_many :answers, dependent: :destroy\n  accepts_nested_attributes_for :answers, reject_if: :all_blank, allow_destroy: true\n</code></pre>\n\n<p>Answer.rb:</p>\n\n<pre><code>  belongs_to :question\n  has_many :answered_questions, dependent: :destroy\n</code></pre>\n\n<p>User.rb:</p>\n\n<pre><code>  has_many :answered_questions, dependent: :destroy\n  accepts_nested_attributes_for :answered_questions\n</code></pre>\n\n<p>AnsweredQuestion.rb:</p>\n\n<pre><code>  belongs_to :user\n  belongs_to :question\n  belongs_to :answer\n  belongs_to :quiz\n</code></pre>\n\n<p>Quiz.rb</p>\n\n<pre><code>  has_many :questions, dependent: :destroy\n  has_many :answered_questions, through: :questions, dependent: :destroy\n  accepts_nested_attributes_for :answered_questions, reject_if: :all_blank, allow_destroy: true\n  accepts_nested_attributes_for :questions, reject_if: :all_blank, allow_destroy: true\n</code></pre>\n\n<p>quizzes_controller.rb:</p>\n\n<pre><code>class QuizzesController &lt; ApplicationController\n\n  before_action :user_completed_quiz, only: [:show]\n\n\n  def show\n    @quiz = Quiz.find(params[:id])\n    @questions = Question.all\n    @answered_questions = current_user.answered_questions.build\n\n    @quiz.answered_questions.build\n\n  end\n\n  def create \n    @quiz = Quiz.new(show_params)\n    if @quiz.save\n      flash[:success] = \"You have created a new quiz!\"\n      redirect_to @quiz\n    else \n      render 'new'\n    end\n  end\n\n\n  def results \n    @quiz = Quiz.find(params[:id])\n  end\n\n  def post_answered_questions \n    @quiz = Quiz.find(params[:quiz][:id])\n    @answered_question = @quiz.answered_questions.build(show_params)\n    if @answered_question.save\n      flash[:success] = \"You have completed the quiz!\"\n      redirect_to results_quiz_path(params[:quiz][:id])\n    else\n      render ''\n    end\n  end\n\n  private\n\n  def user_completed_quiz \n    if(current_user.answered_questions.pluck(:quiz_id).uniq.include?(params[:id].to_i)) \n      redirect_to quizzes_path\n    end\n  end\n\n  def show_params\n    params.require(:quiz).permit(:title, answered_questions_attributes: [:id, :answer_id, :question_id, :user_id, :quiz_id], questions_attributes: [:id, :question_title, :quiz_id, :done, :_destroy, answers_attributes: [:id, :answer_title, :question_id, :quiz_id, :correct_answer, :_destroy]])\n  end\nend\n</code></pre>\n\n<p>show.html.erb - quizzes (where the form is):</p>\n\n<pre><code>&lt;%= form_for(@answered_questions, url: answered_questions_path, method: \"POST\") do |f| %&gt;\n\n  &lt;%= @quiz.title %&gt;\n\n  &lt;%= f.hidden_field :id, :value =&gt; @quiz.id %&gt;\n\n  &lt;% @quiz.questions.each do |question| %&gt;\n\n    &lt;%= f.fields_for :answered_questions do |answer_ques| %&gt;\n\n      &lt;h4&gt;&lt;%= question.question_title %&gt;&lt;/h4&gt;\n\n      &lt;%= answer_ques.hidden_field :question_id, :value =&gt; question.id %&gt;\n      &lt;%= answer_ques.hidden_field :quiz_id, :value =&gt; @quiz.id %&gt;\n      &lt;%= answer_ques.select(:answer_id, options_for_select(question.answers.map{|q| [q.answer_title, q.id]})) %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n\n  &lt;%= submit_tag %&gt;\n\n&lt;% end %&gt; \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rack", "grape", "grape-api"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533713258, "post_id": 51728120, "comment_id": 90441750, "body": "Can you show the server logs?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533713297, "post_id": 51728120, "comment_id": 90441775, "body": "I don&#39;t see any <code>event_id</code> param in the URL you displayed. It is <code>eventId</code>."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 7177619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f99ee9b660a0b8b96c6fee3c6d227d?s=128&d=identicon&r=PG&f=1", "display_name": "Bist S", "link": "https://stackoverflow.com/users/7177619/bist-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1576043832, "creation_date": 1576043832, "answer_id": 59279665, "question_id": 51728120, "link": "https://stackoverflow.com/questions/51728120/how-to-decode-encoded-query-params-in-get-request-using-grape-api/59279665#59279665", "title": "How to decode encoded query params in GET request using grape-api", "body": "<pre><code>http://localhost:3000/api/service_fees/calculate?eventId=2xy6rft69azlu2mtppnzb1xe6olzd3f0&amp;tickets[]=%7B%22id%22:%22vohd3y3n25cdgbvi3uzmqhcyie3zi53a%22,%22count%22:2%7D\n</code></pre>\n\n<p>For the above request URL, the parameter name sent is <code>eventID</code> whereas the Grape API requires/expects <code>event_id</code>. Also, the <code>tickets</code> URL Query String Parameters construction is wrong.</p>\n\n<p>Can you try this instead -- <code>http://localhost:3000/api/service_fees/calculate?eventId=2xy6rft69azlu2mtppnzb1xe6olzd3f0&amp;tickets[0][id] =12&amp;tickets[0][count] =13&amp;tickets[0][coupon_code]=amrrbakry</code></p>\n"}], "owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576043832, "creation_date": 1533648885, "last_edit_date": 1533651380, "question_id": 51728120, "link": "https://stackoverflow.com/questions/51728120/how-to-decode-encoded-query-params-in-get-request-using-grape-api", "title": "How to decode encoded query params in GET request using grape-api", "body": "<p>I'm using <em>grape-api</em> and having a problem with making a <strong><em>GET</em></strong> request from my front-end service with encoded query params. This is how my endpoint is set up to receive the params:</p>\n\n<pre><code>params do\n  requires :event_id, type: String, desc: 'Event id'\n  requires :tickets, type: Array, desc: 'Array of each ticket data ex:  [ {id: \"\", count: 1 , coupon_code: \"\"} ]', allow_blank: false do\n    requires :id, type: String, desc: 'Ticket id'\n    requires :count, type: Integer, desc: 'Number of tickets to get'\n    optional :coupon_code, type: String, desc: 'Promocode to apply if any'\n  end\nend\n</code></pre>\n\n<p>As you can see I'm expecting an <em>event_id</em> param and another array of objects param <em>tickets</em>, and this is how the request URL looks like: </p>\n\n<p><a href=\"http://localhost:3000/api/service_fees/calculate?eventId=2xy6rft69azlu2mtppnzb1xe6olzd3f0&amp;tickets[]=%7B%22id%22:%22vohd3y3n25cdgbvi3uzmqhcyie3zi53a%22,%22count%22:2%7D\" rel=\"nofollow noreferrer\">http://localhost:3000/api/service_fees/calculate?eventId=2xy6rft69azlu2mtppnzb1xe6olzd3f0&amp;tickets[]=%7B%22id%22:%22vohd3y3n25cdgbvi3uzmqhcyie3zi53a%22,%22count%22:2%7D</a></p>\n\n<p>however, grape doesn't seem to understand these encoded query params and I get this exception:</p>\n\n<pre><code>[Exception: event_id is missing, tickets[0][id] is missing, tickets[0][id] is invalid, tickets[0][count] is missing, tickets[0][count] is invalid]\n</code></pre>\n\n<p>my question is this: is there a way i can tell grape to decode and parse the query params properly? am i missing something here?</p>\n"}, {"tags": ["ruby", "floating-point", "upgrade", "compatibility"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1533650293, "post_id": 51727956, "comment_id": 90417795, "body": "your first example looks truncated and not rounded..."}, {"owner": {"reputation": 501, "user_id": 4681998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e983411d6b657a245740031a55ed4b3?s=128&d=identicon&r=PG", "display_name": "preferred_anon", "link": "https://stackoverflow.com/users/4681998/preferred-anon"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1533650445, "post_id": 51727956, "comment_id": 90417917, "body": "@Anthony Nevertheless, that&#39;s the result you get in 2.3.3"}], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 4681998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e983411d6b657a245740031a55ed4b3?s=128&d=identicon&r=PG", "display_name": "preferred_anon", "link": "https://stackoverflow.com/users/4681998/preferred-anon"}, "edited": false, "score": 0, "creation_date": 1533652386, "post_id": 51728872, "comment_id": 90419334, "body": "This seems reasonable to me - I also regard it as a bugfix. I would like to redefine round to replicate the old behaviour, so that I can see whether my test failures are due to this particular change or to another one that I need to investigate. Can you think of a way to do that? (I don&#39;t really know how to read the link you&#39;ve provided)"}, {"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "reply_to_user": {"reputation": 501, "user_id": 4681998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e983411d6b657a245740031a55ed4b3?s=128&d=identicon&r=PG", "display_name": "preferred_anon", "link": "https://stackoverflow.com/users/4681998/preferred-anon"}, "edited": false, "score": 0, "creation_date": 1533652613, "post_id": 51728872, "comment_id": 90419507, "body": "Nope, it seems too low level to be able to override effectively (short of entirely reimplementing rounding in ruby-land, which seems.. not fun). I&#39;d suggest changing your test on 2.3.3 so that it ends up using a different value (which gets rounded &quot;normally&quot; in both versions); if that revised test then still passes after the upgrade, that&#39;d be good enough for me."}, {"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "reply_to_user": {"reputation": 501, "user_id": 4681998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e983411d6b657a245740031a55ed4b3?s=128&d=identicon&r=PG", "display_name": "preferred_anon", "link": "https://stackoverflow.com/users/4681998/preferred-anon"}, "edited": false, "score": 0, "creation_date": 1533652693, "post_id": 51728872, "comment_id": 90419557, "body": "You <i>could</i> also compile a custom ruby build with <a href=\"https://github.com/ruby/ruby/commit/2dfde7e8586cf35318b6053410dba74fe9f06f8d\" rel=\"nofollow noreferrer\">github.com/ruby/ruby/commit/&hellip;</a> reverted... but that seems more likely to introduce uncertainty than eliminate it, IMO."}, {"owner": {"reputation": 501, "user_id": 4681998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e983411d6b657a245740031a55ed4b3?s=128&d=identicon&r=PG", "display_name": "preferred_anon", "link": "https://stackoverflow.com/users/4681998/preferred-anon"}, "edited": false, "score": 0, "creation_date": 1533652847, "post_id": 51728872, "comment_id": 90419670, "body": "Fair enough, many of them are automatically generated, and are sufficiently hard to test that we do a lot of long direct string-comparison (I know this is a bad thing). I&#39;ve defined a round method which calls super and puts out &quot;#{foo} rounds to #{bar}&quot;, so that if I see a change and agree with the rounding I can ignore the failure and check the other ones. Not perfect, but manageable. Thanks for your answer!"}, {"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "reply_to_user": {"reputation": 501, "user_id": 4681998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e983411d6b657a245740031a55ed4b3?s=128&d=identicon&r=PG", "display_name": "preferred_anon", "link": "https://stackoverflow.com/users/4681998/preferred-anon"}, "edited": false, "score": 0, "creation_date": 1533653133, "post_id": 51728872, "comment_id": 90419891, "body": "Along those lines, I guess you could define a constant hash table to override certain floats and their roundings: you don&#39;t have to algorithmically reproduce the old behaviour, just force it for the specific numbers you&#39;re encountering."}, {"owner": {"reputation": 501, "user_id": 4681998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e983411d6b657a245740031a55ed4b3?s=128&d=identicon&r=PG", "display_name": "preferred_anon", "link": "https://stackoverflow.com/users/4681998/preferred-anon"}, "edited": false, "score": 0, "creation_date": 1533653215, "post_id": 51728872, "comment_id": 90419949, "body": "Yeah, that would work too. I think it&#39;s similar effort either way"}], "tags": [], "owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "is_accepted": true, "score": 2, "last_activity_date": 1533651060, "creation_date": 1533651060, "answer_id": 51728872, "question_id": 51727956, "link": "https://stackoverflow.com/questions/51727956/ruby-floatround-behaviour-change-after-update/51728872#51728872", "title": "Ruby Float#round behaviour change after update", "body": "<p>The behaviour you're describing sounds like <a href=\"https://bugs.ruby-lang.org/issues/13138\" rel=\"nofollow noreferrer\">https://bugs.ruby-lang.org/issues/13138</a>, which was considered a bugfix and backported to 2.3.5. (I haven't confirmed which 2.4.x it was backported to, if any, but it was in trunk before 2.5.0.)</p>\n\n<p>As you surmised, it is a precision issue. 1.34875's float representation is slightly less than 1.34875, so 2.3.3 does the overly-technically-correct thing and rounds down; newer versions recognise that rounding up is more consistent given that the float actually represents a range of values [including 1.34875].</p>\n"}, {"comments": [{"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "edited": false, "score": 0, "creation_date": 1533651493, "post_id": 51728907, "comment_id": 90418678, "body": "<a href=\"https://github.com/ruby/ruby/blob/v2_4_0/NEWS#core-classes-updates-outstanding-ones-only\" rel=\"nofollow noreferrer\">github.com/ruby/ruby/blob/v2_4_0/&hellip;</a> is more relevant here; the default was changed after that commit and before the release (as discussed in the bug linked in the question). The released behaviour is, and has always been, <code>half: :up</code>."}, {"owner": {"reputation": 501, "user_id": 4681998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e983411d6b657a245740031a55ed4b3?s=128&d=identicon&r=PG", "display_name": "preferred_anon", "link": "https://stackoverflow.com/users/4681998/preferred-anon"}, "edited": false, "score": 0, "creation_date": 1533651508, "post_id": 51728907, "comment_id": 90418690, "body": "I don&#39;t think that&#39;s true. If you call 0.5.round,1.5.round, 2.5.round and so on (in 2.3.3 and in 2.5.1) you get 1,2,3,... rather than 0,2,2,... as it would be if the default behaviour changed. Indeed, I&#39;m pretty sure the change you reference is the one that was reverted in the link in the OP."}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "reply_to_user": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "edited": false, "score": 0, "creation_date": 1533654361, "post_id": 51728907, "comment_id": 90420686, "body": "@matthewd are you 100% positive? I remember reading an article about why rounding to even gives more uniform roundings or sth. And was pretty sure that was a behavior in ruby at some point..."}], "tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 0, "last_activity_date": 1533651164, "creation_date": 1533651164, "answer_id": 51728907, "question_id": 51727956, "link": "https://stackoverflow.com/questions/51727956/ruby-floatround-behaviour-change-after-update/51728907#51728907", "title": "Ruby Float#round behaviour change after update", "body": "<p>The default behavior was not \"left alone\" as you suggest. There's new strategy to round to nearest even number: <a href=\"https://github.com/ruby/ruby/blob/8d7c380216809ba5bd4a3eec41d7dda61f825ffa/NEWS#core-classes-updates-outstanding-ones-only\" rel=\"nofollow noreferrer\">https://github.com/ruby/ruby/blob/8d7c380216809ba5bd4a3eec41d7dda61f825ffa/NEWS#core-classes-updates-outstanding-ones-only</a> (search for round).</p>\n\n<p>You can use</p>\n\n<pre><code>&gt; 1.34875.round(4, half: :down)\n=&gt; 1.3487 \n</code></pre>\n\n<p>To preserve what seems to be the behavior in 2.3.3.</p>\n"}], "owner": {"reputation": 501, "user_id": 4681998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e983411d6b657a245740031a55ed4b3?s=128&d=identicon&r=PG", "display_name": "preferred_anon", "link": "https://stackoverflow.com/users/4681998/preferred-anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 51728872, "answer_count": 2, "score": 2, "last_activity_date": 1533651164, "creation_date": 1533648379, "question_id": 51727956, "link": "https://stackoverflow.com/questions/51727956/ruby-floatround-behaviour-change-after-update", "title": "Ruby Float#round behaviour change after update", "body": "<p>I am upgrading a repository from Ruby version 2.3.3 to 2.5.1. A test is failing, and I have narrowed down the cause to the following behaviour:</p>\n\n<p><code>In version 2.3.3\n1.34875.round(4)\n=&gt; 1.3487</code></p>\n\n<p><code>In version 2.5.1\n1.34875.round(4)\n=&gt; 1.3488</code></p>\n\n<p>Now, I'm aware of <a href=\"https://bugs.ruby-lang.org/issues/12958\" rel=\"nofollow noreferrer\">this change</a>, but I don't think it's relevant because a) the default behaviour was left alone, and b) the observed change is opposite to the proposed change in the default. I'm also aware that floating point numbers are not a good way to accurately store finite decimals, and that some change in precision might explain why this change has occurred. But I don't know, and I don't know how to find out.  </p>\n"}, {"tags": ["arrays", "ruby", "random"], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 4, "last_activity_date": 1533647777, "creation_date": 1533647777, "answer_id": 51727767, "question_id": 51727688, "link": "https://stackoverflow.com/questions/51727688/how-to-create-an-array-which-has-three-0s-and-two-1s-in-a-random-permutation-in/51727767#51727767", "title": "How to create an array which has three 0s and two 1s in a random permutation in ruby?", "body": "<p>Use shuffle.</p>\n\n<pre><code>[0, 0, 0, 1, 1].shuffle\n\n=&gt; [0, 0, 1, 0, 1] # or some other permutation\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 9995312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669c7458e0030cca52d7900f84accd5c?s=128&d=identicon&r=PG&f=1", "display_name": "S.cll", "link": "https://stackoverflow.com/users/9995312/s-cll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 51727767, "answer_count": 1, "score": 1, "last_activity_date": 1533647777, "creation_date": 1533647550, "question_id": 51727688, "link": "https://stackoverflow.com/questions/51727688/how-to-create-an-array-which-has-three-0s-and-two-1s-in-a-random-permutation-in", "title": "How to create an array which has three 0s and two 1s in a random permutation in ruby?", "body": "<p>Wanna create a ruby array which has 5 numbers consist of three 0s and two 1s in a random permutation</p>\n\n<p>such as, [ 0, 1, 0, 0, 1 ] or [ 1, 1, 0, 0, 0]</p>\n\n<p>I know that</p>\n\n<pre><code> Array.new(5) { rand(2) } \n</code></pre>\n\n<p>could create five random numbers consist of 0 and 1</p>\n\n<p>but how can I make sure there are exactly three 0s and two 1s ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1533646987, "post_id": 51727349, "comment_id": 90415265, "body": "IMO, if <code>LoanSector.name</code> is a string, then having strings as hash&#39;s keys is fine. How would you like to escape them?"}, {"owner": {"reputation": 87, "user_id": 9019159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080da344ace01293e4dc944184112f34?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.Gonzo", "link": "https://stackoverflow.com/users/9019159/dr-gonzo"}, "reply_to_user": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1533647185, "post_id": 51727349, "comment_id": 90415438, "body": "Can I write <code>&quot;Agriculture&#47;Farming&quot;.to_sym</code> ? I think the reason this code is not working is because of the tab spaces in some of the strings?"}, {"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1533647289, "post_id": 51727349, "comment_id": 90415504, "body": "Yes, you can even call <code>symbolize_keys</code> on your hash, which will transform all keys into symbols. The question is - do you need this? What you earn by doing this?"}, {"owner": {"reputation": 87, "user_id": 9019159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080da344ace01293e4dc944184112f34?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.Gonzo", "link": "https://stackoverflow.com/users/9019159/dr-gonzo"}, "reply_to_user": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1533647825, "post_id": 51727349, "comment_id": 90415876, "body": "I suppose I need to use escape sequences to get rid of all the spaces in my strings then? I ran the code using the to_sym method and it only updated the first sector correctly with the value 8 then the rest did not update"}, {"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1533647923, "post_id": 51727349, "comment_id": 90415966, "body": "If the <code>LoanSector</code>&#39;s <code>name</code> contains spaces, then why would like to escape them in the hash? :) I do not see a point of that."}, {"owner": {"reputation": 87, "user_id": 9019159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080da344ace01293e4dc944184112f34?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.Gonzo", "link": "https://stackoverflow.com/users/9019159/dr-gonzo"}, "reply_to_user": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1533648209, "post_id": 51727349, "comment_id": 90416199, "body": "because of this <code>NoMethodError: undefined method </code>id&#39; for nil:NilClass`"}, {"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "reply_to_user": {"reputation": 87, "user_id": 9019159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080da344ace01293e4dc944184112f34?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.Gonzo", "link": "https://stackoverflow.com/users/9019159/dr-gonzo"}, "edited": false, "score": 1, "creation_date": 1533648991, "post_id": 51727349, "comment_id": 90416828, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/177576/discussion-between-mrshemek-and-llanod11\">continue this discussion in chat</a>."}], "owner": {"reputation": 87, "user_id": 9019159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080da344ace01293e4dc944184112f34?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.Gonzo", "link": "https://stackoverflow.com/users/9019159/dr-gonzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533646516, "creation_date": 1533646516, "question_id": 51727349, "link": "https://stackoverflow.com/questions/51727349/using-escape-sequences-for-keys-of-type-string-in-rails", "title": "Using escape sequences for keys of type string in rails", "body": "<p>Hi there I have a hash that I am trying to incorporate into an algorithm that should eventually update a column in one of my models with specific ids. \nIn my debugger everything seems fine I am getting the right data.. The only error I think of is that my hash has keys of type string.. Is there a way add escape sequences to these strings so that they dont break my code? </p>\n\n<p>Here is the hash </p>\n\n<pre><code>if Rails.env.development?\n        loan_sectors = { \"Agriculture/Farming\" =&gt; [8], \"Bars/Public Houses\" =&gt; [1,2,8,9,6], \"B&amp;Bs\" =&gt; [], \"Beauty\" =&gt; [], \"Bio Pharma Engineering\" =&gt; [],\n                \"Cafes\" =&gt; [], \"Car Sales Industry\" =&gt; [], \"Construction - Commercial\" =&gt; [127], \"Construction - Residential\" =&gt; [],\n                \"Consultancy\" =&gt; [], \"Distribution Services\" =&gt; [],  \"Education\" =&gt; [] , \"Engineering\"  =&gt; [], \"Entertainment\" =&gt; [],\n                \"Environmental and CleanTech Products and Services\" =&gt; [] , \"Financial Services\" =&gt; [] , \"Garages\u2014Car Repair etc.\" =&gt; [],\n                \"Health\" =&gt; [], \"Hotels\" =&gt; [] , \"Legal services\" =&gt; [], \"Marketing Services\" =&gt; [], \"Media Services\" =&gt; [] , \"Motor Industry\" =&gt; [],\n                \"Manufacturing\"  =&gt; [],  \"Pharmaceuticals\" =&gt; [], \"Recruitment Services\" =&gt; [], \"Restaurants\" =&gt; [], \"Retail Services\" =&gt; [],\n                \"Telecoms Industry\" =&gt; [], \"Tourism\" =&gt; [], \"Transport - Import\" =&gt; [], \"Transport - Export\" =&gt; [],\n                \"Transport - Internal\" =&gt; [],\"Wholesale\" =&gt; []}\n\n        loan_sectors.each do |k, v|\n          byebug\n          sector = LoanSector.where(name: k).first\n          v.each do |cid|\n            Campaign.find(cid).loan.update_column(:loan_sector_id, sector.id)\n          end\n        end\n      end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1533651221, "post_id": 51726998, "comment_id": 90418477, "body": "Why are you trying to save a record for <code>AnsweredQuestion</code> through <code>Quiz</code>? That logic should go in it&#39;s own controller. Also the relationships are not set-up correctly, <code>Quiz</code> has many <code>Question</code> has many <code>QuestionAnswered</code>, so <code>QuestionAnswered</code> should not belong to <code>Quiz</code> directly, that is causing denormalization."}, {"owner": {"reputation": 11, "user_id": 10191932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9641f1c4488b8f4e527b1099df6dee87?s=128&d=identicon&r=PG&f=1", "display_name": "user10191932", "link": "https://stackoverflow.com/users/10191932/user10191932"}, "reply_to_user": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1533651628, "post_id": 51726998, "comment_id": 90418766, "body": "I originally had it in it&#39;s own controller but when I do this it then says that the answered_questions param is empty, i&#39;ve updated the post to reflect what it looks like now i&#39;ve given it it&#39;s own controller"}, {"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1533802454, "post_id": 51726998, "comment_id": 90482831, "body": "I don&#39;t see anything wrong... can you post the result of calling <code>answered_params</code> method inside the create action?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10191932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9641f1c4488b8f4e527b1099df6dee87?s=128&d=identicon&r=PG&f=1", "display_name": "user10191932", "link": "https://stackoverflow.com/users/10191932/user10191932"}, "edited": false, "score": 0, "creation_date": 1533648547, "post_id": 51727544, "comment_id": 90416475, "body": "I&#39;ve updated the original question with the form as well, not sure what you mean? I&#39;m just trying to pass the answered questions parameters in the quiz controller"}, {"owner": {"reputation": 2837, "user_id": 6245337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VoQ5.jpg?s=128&g=1", "display_name": "Ana Mar&#237;a Mart&#237;nez G&#243;mez", "link": "https://stackoverflow.com/users/6245337/ana-mar%c3%ada-mart%c3%adnez-g%c3%b3mez"}, "reply_to_user": {"reputation": 11, "user_id": 10191932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9641f1c4488b8f4e527b1099df6dee87?s=128&d=identicon&r=PG&f=1", "display_name": "user10191932", "link": "https://stackoverflow.com/users/10191932/user10191932"}, "edited": false, "score": 0, "creation_date": 1533648992, "post_id": 51727544, "comment_id": 90416829, "body": "<code>current_user.answered_questions.build(show_params)</code> &lt;- here you are using the <code>AnsweredQuestion</code> model, which I guess is what fails. Isn&#39;t it?"}, {"owner": {"reputation": 11, "user_id": 10191932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9641f1c4488b8f4e527b1099df6dee87?s=128&d=identicon&r=PG&f=1", "display_name": "user10191932", "link": "https://stackoverflow.com/users/10191932/user10191932"}, "edited": false, "score": 0, "creation_date": 1533650635, "post_id": 51727544, "comment_id": 90418056, "body": "I tried changing this around so it was for quiz instead of answered questions and it&#39;s not still working"}], "tags": [], "owner": {"reputation": 2837, "user_id": 6245337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VoQ5.jpg?s=128&g=1", "display_name": "Ana Mar&#237;a Mart&#237;nez G&#243;mez", "link": "https://stackoverflow.com/users/6245337/ana-mar%c3%ada-mart%c3%adnez-g%c3%b3mez"}, "is_accepted": false, "score": 1, "last_activity_date": 1533647061, "creation_date": 1533647061, "answer_id": 51727544, "question_id": 51726998, "link": "https://stackoverflow.com/questions/51726998/unknown-attribute-answered-questions-attributes/51727544#51727544", "title": "Unknown attribute &#39;answered_questions_attributes&#39;", "body": "<p>It looks like you are accepting nested attributes for <code>Quiz</code> but using the nested attributes in <code>AnsweredQuestion</code> instead of in <code>Quiz</code>. You need to add <code>accepts_nested_attributes_for</code> in the other model and in <code>show_params</code> it should be <code>quiz_attributes</code> instead of <code>answered_questions_attributes</code>. Although you are using <code>show_params</code> twice, once over one model and the second one over the other, so you may need two params. Otherwise you'll break the other one.</p>\n"}], "owner": {"reputation": 11, "user_id": 10191932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9641f1c4488b8f4e527b1099df6dee87?s=128&d=identicon&r=PG&f=1", "display_name": "user10191932", "link": "https://stackoverflow.com/users/10191932/user10191932"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533651742, "creation_date": 1533645475, "last_edit_date": 1533651742, "question_id": 51726998, "link": "https://stackoverflow.com/questions/51726998/unknown-attribute-answered-questions-attributes", "title": "Unknown attribute &#39;answered_questions_attributes&#39;", "body": "<p>I'm trying to create a form where a user can answer questions and submit to a results page, however, when I am trying to pass the AnsweredQuestions attributes through the Quiz controller it's telling me it's an 'unknown attribute'.</p>\n\n<p>Error i'm receving: unknown attribute 'answered_questions_attributes' for AnsweredQuestion.</p>\n\n<p>Quiz.rb:</p>\n\n<pre><code> class Quiz &lt; ApplicationRecord\n  validates :title, presence: true, length: { maximum: 50 }\n  has_many :questions, dependent: :destroy\n  has_many :answered_questions, through: :questions, dependent: :destroy\n  accepts_nested_attributes_for :answered_questions, reject_if: :all_blank, allow_destroy: true\n  accepts_nested_attributes_for :questions, reject_if: :all_blank, allow_destroy: true\nend\n</code></pre>\n\n<p>AnsweredQuestion.rb:</p>\n\n<pre><code>class AnsweredQuestion &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :question\n  belongs_to :answer\n  belongs_to :quiz\nend\n</code></pre>\n\n<p>Quiz controller:</p>\n\n<pre><code>  def show\n    @quiz = Quiz.find(params[:id])\n    @questions = Question.all\n    @answered_questions = current_user.answered_questions.build\n\n    @quiz.answered_questions.build\n\n  end\n\n  def create \n    @quiz = Quiz.new(show_params)\n    if @quiz.save\n      flash[:success] = \"You have created a new quiz!\"\n      redirect_to @quiz\n    else \n      render 'new'\n    end\n  end\n\n\n  def post_answered_questions \n    @answered_question = current_user.answered_questions.build(show_params)\n    if @answered_question.save\n      flash[:success] = \"You have completed the quiz!\"\n      redirect_to results_quiz_path(params[:quiz][:id])\n    else\n      render ''\n    end\n  end\n\n  private\n\n  def user_completed_quiz \n    if(current_user.answered_questions.pluck(:quiz_id).uniq.include?(params[:id].to_i)) \n      redirect_to quizzes_path\n    end\n  end\n\n  def show_params\n    params.require(:quiz).permit(:title, answered_questions_attributes: [:id, :answer_id, :question_id, :user_id, :quiz_id], questions_attributes: [:id, :question_title, :quiz_id, :done, :_destroy, answers_attributes: [:id, :answer_title, :question_id, :quiz_id, :correct_answer, :_destroy]])\n  end\nend\n</code></pre>\n\n<p>show.html.erb (in quizzes):</p>\n\n<pre><code>&lt;%= form_for(@quiz, url: post_answered_questions_quizzes_path, method: \"POST\") do |f| %&gt;\n\n&lt;%= @quiz.title %&gt;\n\n&lt;%= f.hidden_field :id, :value =&gt; @quiz.id %&gt;\n\n&lt;% @quiz.questions.each do |question| %&gt;\n\n&lt;%= f.fields_for :answered_questions do |answer_ques| %&gt;\n\n    &lt;h4&gt;&lt;%= question.question_title %&gt;&lt;/h4&gt;\n\n        &lt;%= answer_ques.hidden_field :question_id, :value =&gt; question.id %&gt;\n        &lt;%= answer_ques.hidden_field :quiz_id, :value =&gt; @quiz.id %&gt;\n        &lt;%= answer_ques.select(:answer_id, options_for_select(question.answers.map{|q| [q.answer_title, q.id]})) %&gt;\n\n    &lt;% end %&gt;\n\n\n    &lt;% end %&gt;\n\n    &lt;%= submit_tag %&gt;\n\n    &lt;% end %&gt; \n</code></pre>\n\n<p>UPDATED:</p>\n\n<p>show.html.erb (quizzes):</p>\n\n<pre><code>&lt;%= form_for(@answered_questions, url: answered_questions_path, method: \"POST\") do |f| %&gt;\n\n&lt;%= @quiz.title %&gt;\n\n&lt;%= f.hidden_field :id, :value =&gt; @quiz.id %&gt;\n\n&lt;% @quiz.questions.each do |question| %&gt;\n\n&lt;%= f.fields_for :answered_questions do |answer_ques| %&gt;\n\n    &lt;h4&gt;&lt;%= question.question_title %&gt;&lt;/h4&gt;\n\n        &lt;%= answer_ques.hidden_field :question_id, :value =&gt; question.id %&gt;\n        &lt;%= answer_ques.hidden_field :quiz_id, :value =&gt; @quiz.id %&gt;\n        &lt;%= answer_ques.select(:answer_id, options_for_select(question.answers.map{|q| [q.answer_title, q.id]})) %&gt;\n\n    &lt;% end %&gt;\n\n\n    &lt;% end %&gt;\n\n    &lt;%= submit_tag %&gt;\n\n    &lt;% end %&gt; \n</code></pre>\n\n<p>AnsweredQuestion controller:</p>\n\n<pre><code>class AnsweredQuestionsController &lt; ApplicationController\n\n\n  def show\n    @answered_question = AnsweredQuestion.new\n  end\n\n  def create\n    @answered_question = current_user.answered_questions.build(answered_params)\n    binding.pry\n    if @answered_question.save\n      flash[:success] = \"You have completed the quiz!\"\n      redirect_to results_quiz_path(params[:quiz][:id])\n    else\n      render ''\n    end\n  end\n\n  def edit\n    @answered_questions = AnsweredQuestion.find(params[:id])\n  end\n\n\n  def destroy\n    AnsweredQuestion.find(params[:id]).destroy\n    flash[:success] = \"Answered quiz deleted\"\n    redirect_to answered_questions_url\n  end\n\n  private\n\n\n  def answered_params\n    params.require(:answered_questions).permit(:question_id, :answer_ids, :user_id, :quiz_id, :id, :_destroy)\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "excel", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1533648826, "post_id": 51726666, "comment_id": 90416679, "body": "In which way you access the file? What did you try so far?"}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 5483671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBIzy.jpg?s=128&g=1", "display_name": "Alexey Spiridonov", "link": "https://stackoverflow.com/users/5483671/alexey-spiridonov"}, "is_accepted": true, "score": 0, "last_activity_date": 1533653380, "creation_date": 1533653380, "answer_id": 51729679, "question_id": 51726666, "link": "https://stackoverflow.com/questions/51726666/validation-of-excel-sheet-in-ruby-on-rails/51729679#51729679", "title": "validation of excel sheet in ruby on rails", "body": "<p>You can use <a href=\"https://github.com/roo-rb/roo\" rel=\"nofollow noreferrer\">roo</a> gem for this.</p>\n\n<pre><code>require 'roo'\n\nexpected_headers = %w[name city age]\nxlsx = Roo::Excelx.new('./your_file.xlsx').sheet('your sheet')\nheaders = xlsx.row(1)\n\nexpected_headers &amp; headers\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9696641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cb4822d6ee7490cf36eb96b248361d?s=128&d=identicon&r=PG&f=1", "display_name": "shashi", "link": "https://stackoverflow.com/users/9696641/shashi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 51729679, "answer_count": 1, "score": -1, "last_activity_date": 1533653380, "creation_date": 1533644406, "last_edit_date": 1533648744, "question_id": 51726666, "link": "https://stackoverflow.com/questions/51726666/validation-of-excel-sheet-in-ruby-on-rails", "title": "validation of excel sheet in ruby on rails", "body": "<p>how to validate the heading names of excel sheet for both .XLS and .XLSX files \n    and count the number of columns present that have the heading names in excel using ruby on rails.</p>\n"}, {"tags": ["ruby", "rubocop"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533642986, "post_id": 51726190, "comment_id": 90412605, "body": "What is your Ruby version?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1533643048, "post_id": 51726190, "comment_id": 90412647, "body": "The first version looks fine to me."}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1533643060, "post_id": 51726190, "comment_id": 90412653, "body": "My Ruby version is 2.4.1."}], "answers": [{"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": false, "score": 7, "last_activity_date": 1533648121, "last_edit_date": 1533648121, "creation_date": 1533643273, "answer_id": 51726301, "question_id": 51726190, "link": "https://stackoverflow.com/questions/51726190/syntax-error-unexpected-keyword-rescue-expecting-keyword-end/51726301#51726301", "title": "syntax error, unexpected keyword_rescue, expecting keyword_end", "body": "<p>Ruby 2.5.0 added a <a href=\"https://bugs.ruby-lang.org/issues/12906\" rel=\"noreferrer\">feature</a>:</p>\n\n<blockquote>\n  <p>rescue/else/ensure are now allowed to be used directly with do/end blocks. [Feature #12906]</p>\n</blockquote>\n\n<p>But before that, it was not allowed. So syntax error will be there.</p>\n\n<p>Lets do syntax test for the code in <em>sample.rb</em>:</p>\n\n<pre><code>[].each do |a|\n  # ops\n  rescue Exception =&gt; ex\n  puts ex.inspect\nend\n</code></pre>\n\n<p>From terminal:</p>\n\n<pre><code>Ruby$ ruby -c sample.rb\nsample.rb:3: syntax error, unexpected keyword_rescue\n  rescue Exception =&gt; ex\n        ^\nsample.rb:5: syntax error, unexpected keyword_end, expecting end-of-input\nRuby$ rvm use 2.5.1\nUsing /Users/aruprakshit/.rvm/gems/ruby-2.5.1\nRuby$ ruby -c sample.rb\nSyntax OK\n</code></pre>\n\n<p>See the <a href=\"https://github.com/ruby/ruby/blob/v2_5_0/NEWS#language-changes\" rel=\"noreferrer\">News</a>. So before 2.5.0, you need to write it like:</p>\n\n<pre><code>[].each do |a|\n  begin\n    # ops\n  rescue =&gt; Exception\n    puts ex.inspect\n  end\nend\n</code></pre>\n\n<p>You can configure Rubocop to select the version of Ruby you want by following <a href=\"https://github.com/rubocop-hq/rubocop/blob/master/manual/configuration.md#setting-the-target-ruby-version\" rel=\"noreferrer\">Setting the target Ruby version</a>.</p>\n\n<blockquote>\n  <p>Some checks are dependent on the version of the Ruby interpreter which\n  the inspected code must run on. For example, enforcing using Ruby 2.3+\n  safe navigation operator rather than try can help make your code\n  shorter and more consistent... unless it must run on Ruby 2.2.</p>\n  \n  <p>If .ruby-version exists in the directory RuboCop is invoked in,\n  RuboCop will use the version specified by it. Otherwise, users may let\n  RuboCop know the oldest version of Ruby which your project supports\n  with:</p>\n</blockquote>\n\n<pre><code>AllCops:\n  TargetRubyVersion: 2.4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3054, "user_id": 900483, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6524ea17b66984c72c8d7e262960a137?s=128&d=identicon&r=PG", "display_name": "Nils Landt", "link": "https://stackoverflow.com/users/900483/nils-landt"}, "is_accepted": true, "score": 6, "last_activity_date": 1533643586, "creation_date": 1533643586, "answer_id": 51726412, "question_id": 51726190, "link": "https://stackoverflow.com/questions/51726190/syntax-error-unexpected-keyword-rescue-expecting-keyword-end/51726412#51726412", "title": "syntax error, unexpected keyword_rescue, expecting keyword_end", "body": "<p>For some reason, Rubocop thinks you're running Ruby 2.5, not Ruby 2.4.1.</p>\n\n<p>You can fix this one of two ways:</p>\n\n<p>1) Create a file <code>.ruby-version</code> with content <code>2.4.1</code>. Rubocop should pick up your Ruby version from this file.<br>\n2) Add the following to your <code>.rubocop.yml</code>:</p>\n\n<pre><code>AllCops:\n  TargetRubyVersion: 2.4\n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3537, "favorite_count": 1, "accepted_answer_id": 51726412, "answer_count": 2, "score": 3, "last_activity_date": 1533648121, "creation_date": 1533642903, "last_edit_date": 1533643124, "question_id": 51726190, "link": "https://stackoverflow.com/questions/51726190/syntax-error-unexpected-keyword-rescue-expecting-keyword-end", "title": "syntax error, unexpected keyword_rescue, expecting keyword_end", "body": "<p>I have the following ruby code:</p>\n\n<pre><code>  EmailTemplate.for(mailer).each do |template|\n    begin\n      print '.'\n      template.upload(publish)\n    rescue Mandrill::UnknownTemplateError\n      failed.push(mailer)\n    end\n  end\n</code></pre>\n\n<p>Rubocop corrected my code to:</p>\n\n<pre><code>EmailTemplate.for(mailer).each do |template|\n    print '.'\n    template.upload(publish)\n  rescue Mandrill::UnknownTemplateError\n    failed.push(mailer)\n  end\n</code></pre>\n\n<p>and now it returns following error:</p>\n\n<pre><code>syntax error, unexpected keyword_rescue, expecting keyword_end\n</code></pre>\n\n<p>How can I fix that?</p>\n\n<p>Rubocop warnings was:</p>\n\n<pre><code>C: Style/RedundantBegin: Redundant begin block detected.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rollback"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 5995440, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e22d68cc0f5fa854d6a681d5efc50a9c?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/5995440/mattia"}, "edited": false, "score": 0, "creation_date": 1533645680, "post_id": 51725549, "comment_id": 90414374, "body": "<code>config&#47;initializers&#47;hyrax.rb</code> is modified already by the command itself, I repeated the action 3 more times and it magically worked ..."}, {"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "reply_to_user": {"reputation": 99, "user_id": 5995440, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e22d68cc0f5fa854d6a681d5efc50a9c?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/5995440/mattia"}, "edited": false, "score": 0, "creation_date": 1533645771, "post_id": 51725549, "comment_id": 90414425, "body": "That&#39;s strange, because the documentation says something different. Anyway, I am glad that you solved that."}], "tags": [], "owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "is_accepted": false, "score": 0, "last_activity_date": 1533641172, "last_edit_date": 1533641172, "creation_date": 1533640841, "answer_id": 51725549, "question_id": 51725359, "link": "https://stackoverflow.com/questions/51725359/uninitialized-variable-after-deleting-hyrax-work/51725549#51725549", "title": "Uninitialized Variable after deleting hyrax work", "body": "<p>According to <a href=\"https://github.com/samvera/hyrax/wiki/Hyrax-Management-Guide#removing-a-work-type\" rel=\"nofollow noreferrer\">the documentation</a>, after removing a work type (with <code>rails destroy hyrax:work GenericWork</code>) you have to remove the line that registers a work from <code>config/initializers/hyrax.rb</code>. </p>\n\n<p>Have you tried that?</p>\n\n<p>Also, can you please search your code for <code>GenericWork</code>? <code>Routing error</code> suggests it might be used in <code>routes.rb</code> file</p>\n"}], "owner": {"reputation": 99, "user_id": 5995440, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e22d68cc0f5fa854d6a681d5efc50a9c?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/5995440/mattia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533641172, "creation_date": 1533640294, "question_id": 51725359, "link": "https://stackoverflow.com/questions/51725359/uninitialized-variable-after-deleting-hyrax-work", "title": "Uninitialized Variable after deleting hyrax work", "body": "<p>I'm working on a hyrax project, after creating a work type with rails with the following command</p>\n\n<pre><code> $ bin/rails generate hyrax:work GenericWork\n</code></pre>\n\n<p>I try to delete the work type with the following commands</p>\n\n<pre><code>$ bin/rails destroy hyrax:work GenericWork    \n$ rake db:rollback\n</code></pre>\n\n<p>but I keep getting the error</p>\n\n<pre><code>Routing error:\nUninitialized constant GenericWork\n</code></pre>\n\n<p>after I delete it with the commands above.</p>\n\n<p>Why is it ?</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber", "selenium-chromedriver", "watir"], "comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1533640012, "post_id": 51725080, "comment_id": 90410755, "body": "Update the question with the error stack trace."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1533644695, "post_id": 51725080, "comment_id": 90413685, "body": "Hi, if you ready to use Ruby Selenium Binding, please use WATIR, WATIR uses Ruby selenium binding under the hood . The you have written waiting statement is completely not needed if you use WATIR. There are plenty of other errors you could avoid"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1533661957, "post_id": 51725080, "comment_id": 90425061, "body": "Hi, Add the Watir tag then! watir people will come on your way."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1533705192, "post_id": 51725080, "comment_id": 90438167, "body": "run chromedriver from the command line and see if it gives errors."}], "answers": [{"comments": [{"owner": {"reputation": 1083, "user_id": 7819964, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nKuy6.jpg?s=128&g=1", "display_name": "slckayhn", "link": "https://stackoverflow.com/users/7819964/slckayhn"}, "edited": false, "score": 0, "creation_date": 1533640792, "post_id": 51725448, "comment_id": 90411223, "body": "Webdriver gems are waiting for the download of latest version of driver, if needed. It fails and starts the count of timeout."}, {"owner": {"reputation": 121, "user_id": 3158314, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100001729959315/picture?type=large", "display_name": "user3158314", "link": "https://stackoverflow.com/users/3158314/user3158314"}, "edited": false, "score": 0, "creation_date": 1533640840, "post_id": 51725448, "comment_id": 90411252, "body": "I&#39;m using the most up to date version of ChromeDriver v2.41 that got released on the 27th of July. I&#39;ve downloaded it from here <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=2.41/\" rel=\"nofollow noreferrer\">chromedriver.storage.googleapis.com/index.html?path=2.41</a> and placed it in my PATH however I am still getting the same issue"}, {"owner": {"reputation": 1083, "user_id": 7819964, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nKuy6.jpg?s=128&g=1", "display_name": "slckayhn", "link": "https://stackoverflow.com/users/7819964/slckayhn"}, "reply_to_user": {"reputation": 121, "user_id": 3158314, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100001729959315/picture?type=large", "display_name": "user3158314", "link": "https://stackoverflow.com/users/3158314/user3158314"}, "edited": false, "score": 0, "creation_date": 1533641152, "post_id": 51725448, "comment_id": 90411428, "body": "Did you check the chromedriver permissions? Maybe it is about permissions."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1533922638, "post_id": 51725448, "comment_id": 90540438, "body": "it auto downloads the files and puts them in a <code>.webdrivers</code> directory in your home path, so your user shouldn&#39;t have any security issues accessing it"}], "tags": [], "owner": {"reputation": 1083, "user_id": 7819964, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nKuy6.jpg?s=128&g=1", "display_name": "slckayhn", "link": "https://stackoverflow.com/users/7819964/slckayhn"}, "is_accepted": false, "score": 0, "last_activity_date": 1533640548, "creation_date": 1533640548, "answer_id": 51725448, "question_id": 51725080, "link": "https://stackoverflow.com/questions/51725080/issue-with-attempting-to-run-a-test-using-chromedriver/51725448#51725448", "title": "Issue with attempting to run a test using chromedriver", "body": "<p>The problem is about old version of Chromedriver. Some of Selenium versions can not handle old versions of chromedriver. </p>\n\n<p>Please update or install latest gem. </p>\n"}, {"comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 1, "creation_date": 1533662866, "post_id": 51729925, "comment_id": 90425451, "body": "Fwiw, that gem creates shims that can cause problems. Webdrivers gem has the same functionality without needing to deal with path our environment, just need to require it in for specs. (Disclaimer I wrote webdrivers gem)"}], "tags": [], "owner": {"reputation": 73, "user_id": 5483671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBIzy.jpg?s=128&g=1", "display_name": "Alexey Spiridonov", "link": "https://stackoverflow.com/users/5483671/alexey-spiridonov"}, "is_accepted": false, "score": 0, "last_activity_date": 1533654090, "creation_date": 1533654090, "answer_id": 51729925, "question_id": 51725080, "link": "https://stackoverflow.com/questions/51725080/issue-with-attempting-to-run-a-test-using-chromedriver/51729925#51729925", "title": "Issue with attempting to run a test using chromedriver", "body": "<p>Try to use <a href=\"https://github.com/flavorjones/chromedriver-helper\" rel=\"nofollow noreferrer\">chromedriver-helper</a> gem.</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 3158314, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100001729959315/picture?type=large", "display_name": "user3158314", "link": "https://stackoverflow.com/users/3158314/user3158314"}, "edited": false, "score": 0, "creation_date": 1533901213, "post_id": 51733284, "comment_id": 90528346, "body": "When using the Webdrivers Gem, do I code the exact same way as I would as if i was using the default selenium-webdriver gem? i.e. driver =  Selenium::Webdriver.for :chrome driver.find_element(:id, &#39;EmailAddress&#39;).send_keys(test@test.com)?"}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 1, "last_activity_date": 1533666587, "creation_date": 1533666587, "answer_id": 51733284, "question_id": 51725080, "link": "https://stackoverflow.com/questions/51725080/issue-with-attempting-to-run-a-test-using-chromedriver/51733284#51733284", "title": "Issue with attempting to run a test using chromedriver", "body": "<p>Use <a href=\"https://github.com/titusfortner/webdrivers/\" rel=\"nofollow noreferrer\">webdrivers.gem</a> to automatically keep your drivers up to date. PATH can get complicated, so the webdrivers gem ignores it and specifies the location that Selenium should look for the drivers independently. It also does not use shims like chromedriver-helper does, so it won't muck with any system settings. Just add the gem to your gemfile/gemspec and then <code>require 'webdrivers'</code> in your code.</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 3158314, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100001729959315/picture?type=large", "display_name": "user3158314", "link": "https://stackoverflow.com/users/3158314/user3158314"}, "edited": false, "score": 0, "creation_date": 1534242766, "post_id": 51829101, "comment_id": 90631582, "body": "I run the ChromeDriver exe and get the output that you have listed above, however I then run my tests and it simply gives me the same error but to port 9516 instead"}], "tags": [], "owner": {"reputation": 66, "user_id": 2620206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13f06e38b7fb27850216d7ca126024c9?s=128&d=identicon&r=PG", "display_name": "Luka Vladika", "link": "https://stackoverflow.com/users/2620206/luka-vladika"}, "is_accepted": false, "score": 0, "last_activity_date": 1534438860, "last_edit_date": 1534438860, "creation_date": 1534187603, "answer_id": 51829101, "question_id": 51725080, "link": "https://stackoverflow.com/questions/51725080/issue-with-attempting-to-run-a-test-using-chromedriver/51829101#51829101", "title": "Issue with attempting to run a test using chromedriver", "body": "<p>please check if any chromedriver instance is already running and then kill it if so, you can try running this command in command prompt, or check manually in task manager</p>\n\n<pre><code>tasklist /v | find \"chromedriver\"\n</code></pre>\n\n<p>then set path to chromedriver in your tests, this worked for me on Windows 10</p>\n\n<pre><code>require 'watir'            \nchromedriver_path = 'c:\\tmp\\asd\\chromedriver.exe'\n#interestingly, this also works\n#chromedriver_path = \"/tmp/asd/chromedriver.exe\"\nSelenium::WebDriver::Chrome.driver_path= chromedriver_path  \n\nbegin    \n\n  puts \"Opening browser.\" \n  b = Watir::Browser.new :chrome     \n  b.goto \"www.google.com\"  \n  puts \"Navigate to google, title is #{b.title}\"\n  b.text_field(:id =&gt; \"lst-ib\").set \"hope this works\"\n  puts \"setting search parameters \"\n\nrescue =&gt; e\n  puts \"error happened: #{e.backtrace.inspect}, #{e.class}, #{e.message}\"  \nensure\n b.close unless b.nil? \nend\n</code></pre>\n\n<p>If that doesn't work, again check if any chromedriver is running, and then run it yourself manually from command line, it should produce output like this </p>\n\n<pre><code>C:\\tmp\\asd&gt;chromedriver.exe\nStarting ChromeDriver 2.41.578737 on port 9515\n</code></pre>\n\n<p>And then run your tests.</p>\n\n<p>I found it useful to set path to chromedriver before each test, this way you could have dozens of chromedrivers in a folder, and then pass the argument to the test, which chromedriver to use. </p>\n\n<p>Hope it works, or at least gives new error to work with.</p>\n\n<p>edit: </p>\n\n<p>in folder where you downloaded chromedriver.exe, type these</p>\n\n<pre><code>chromedriver.exe --version\n\ngem list watir\n\ngem list selenium-webdriver\n</code></pre>\n\n<p>uninstall old versions of gems if there are any, then go to irb and type these one by one</p>\n\n<pre><code>require 'watir' \nSelenium::WebDriver::Chrome.driver_path= '/tmp/asd/chromedriver.exe'\nSelenium::WebDriver::Chrome.path = '/Program Files (x86)/Google/Chrome/Application/chrome.exe'\nb = Watir::Browser.new :chrome\n</code></pre>\n\n<p>put your paths ofcourse and paste here what error you get, also versions of chrome, driver, ruby, watir, selenium and windows. I'm not sure if cucumber has anything to do with this, it shouldn't if youre having problems even from irb. </p>\n\n<p>Its just a hunch, but also check ENV variables or PATH if anything is out of ordinary.</p>\n"}], "owner": {"reputation": 121, "user_id": 3158314, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100001729959315/picture?type=large", "display_name": "user3158314", "link": "https://stackoverflow.com/users/3158314/user3158314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 936, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1534438860, "creation_date": 1533639327, "last_edit_date": 1533664868, "question_id": 51725080, "link": "https://stackoverflow.com/questions/51725080/issue-with-attempting-to-run-a-test-using-chromedriver", "title": "Issue with attempting to run a test using chromedriver", "body": "<p>I am currently having an issue when attempting to run a Ruby test using chromedriver.</p>\n\n<p>I am using selenium-webdriver 3.14.0, cucumber 3.1.2, Windows 10</p>\n\n<p>Whenever I run my tests using firefox, they load and run fine without any issues. However as soon as I change one of them to using chromedriver and attempt to run it, I get the following error:</p>\n\n<pre><code>unable to connect to chromedriver 127.0.0.1:9515\n</code></pre>\n\n<p>I have chromedriver located on my PATH and am using the following code to attempt to initialise the driver inside the ruby code:</p>\n\n<pre><code>require 'selenium-webdriver'\n\noptions = Selenium::WebDriver::Chrome::Options.new\noptions.add_argument('--ignore-certificate-errors')\noptions.add_argument('--disable-popup-blocking')\noptions.add_argument('--disable-translate')\n\ndriver1 = Selenium::WebDriver.for :chrome, options: options\n\nGiven (/^we navigate to the Timesheets area$/) do\ndriver1.navigate.to \"test\"\ndriver1.find_element(:id, 'EmailAddress').send_keys(\"test\")\ndriver1.find_element(:id, 'Password').send_keys(\"test\")\ndriver1.find_element(:css, 'button').click\nwait = Selenium::WebDriver::Wait.new(:timeout =&gt; 5)\nbegin\n    element = wait.until { driver1.find_element(:class =&gt; \"name\") }\nend\n    driver1.find_element(:css, 'i.fa.fa-clock-o').click\n    begin\n    element = wait.until { driver1.find_element(:class =&gt; \"pull-left\") }\n    expect(element.text).to eq('Timesheets')\n    end\nend\n\n    en (/^we click the Add New Timesheet Button$/) do\n    driver1.find_element(:css, 'a.pull-right').click\n   end\n\nThen (/^we should be taken to the Add New Timesheet Page$/) do\nwait = Selenium::WebDriver::Wait.new(:timeout =&gt; 5)\nbegin\n    element = wait.until { driver1.find_element(:css =&gt; \"h1.pull-left\") }\n    expect(element.text).to eq('Add Timesheet')\nensure\n    driver1.quit\nend\nend\n</code></pre>\n\n<p>Any help that can be given on this would be appreciated</p>\n\n<p>EDIT: Updated with Full error stacktrace:</p>\n\n<pre><code>unable to connect to chromedriver 127.0.0.1:9515 \n(Selenium::WebDriver::Error::WebDriverError)\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver- \n3.14.0/lib/selenium/webdriver/common/service.rb:142:in `connect_until_stable'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3 \n3.14.0/lib/selenium/webdriver/common/service.rb:72:in `block in start'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver- \n3.14.0/lib/selenium/webdriver/common/socket_lock.rb:39:in `locked'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver- \n3.14.0/lib/selenium/webdriver/common/service.rb:69:in `start'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver- \n3.14.0/lib/selenium/webdriver/chrome/driver.rb:43:in `initialize'\n C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver- \n3.14.0/lib/selenium/webdriver/common/driver.rb:44:in `new'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver- \n3.14.0/lib/selenium/webdriver/common/driver.rb:44:in `for'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver- \n3.14.0/lib/selenium/webdriver.rb:86:in `for'\nC:/Ruby25-x64/features/step_definitions/timesheet_steps.rb:9:in `&lt;top \n(required)&gt;'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber- \n3.1.2/lib/cucumber/glue/registry_and_more.rb:107:in `load'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber- \n3.1.2/lib/cucumber/glue/registry_and_more.rb:107:in `load_code_file'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber- \n3.1.2/lib/cucumber/runtime/support_code.rb:144:in `load_file'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber- \n3.1.2/lib/cucumber/runtime/support_code.rb:85:in `block in load_files!'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber- \n3.1.2/lib/cucumber/runtime/support_code.rb:84:in `each'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber- \n3.1.2/lib/cucumber/runtime/support_code.rb:84:in `load_files!'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber- \n3.1.2/lib/cucumber/runtime.rb:272:in `load_step_definitions'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber- \n3.1.2/lib/cucumber/runtime.rb:68:in `run!'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber- \n3.1.2/lib/cucumber/cli/main.rb:34:in `execute!'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber-3.1.2/bin/cucumber:9:in `&lt;top \n(required)&gt;'\n C:/Ruby25-x64/bin/cucumber:23:in `load'\n C:/Ruby25-x64/bin/cucumber:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>EDIT 2: Im now using Watir which uses Chrome by default. I am using the Interactive Ruby Console by using irb in the Command Prompt.</p>\n\n<p>The only commands I ran are:</p>\n\n<pre><code> require \"Watir\"\n b = Watir::Browser.new\n</code></pre>\n\n<p>I then get the following stacktrace:</p>\n\n<pre><code>Traceback (most recent call last):\n   12: from C:/Ruby25-x64/bin/irb.cmd:19:in `&lt;main&gt;'\n   11: from (irb):3\n   10: from (irb):3:in `new'\n    9: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/watir-6.12.0/lib/watir/browser.rb:48:in `initialize'\n    8: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.14.0/lib/selenium/webdriver.rb:86:in `for'\n    7: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.14.0/lib/selenium/webdriver/common/driver.rb:44:in `for'\n    6: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.14.0/lib/selenium/webdriver/common/driver.rb:44:in `new'\n    5: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.14.0/lib/selenium/webdriver/chrome/driver.rb:43:in `initialize'\n    4: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.14.0/lib/selenium/webdriver/common/service.rb:69:in `start'\n    3: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.14.0/lib/selenium/webdriver/common/socket_lock.rb:39:in `locked'\n    2: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.14.0/lib/selenium/webdriver/common/service.rb:72:in `block in start'\n    1: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.14.0/lib/selenium/webdriver/common/service.rb:142:in `connect_until_stable'\nSelenium::WebDriver::Error::WebDriverError (unable to connect to chromedriver 127.0.0.1:9515)\n</code></pre>\n\n<p>Am I missing something as I have the ChromeDriver set in the Path so in my head it should run without any issues as Firefox runs like a charm</p>\n"}, {"tags": ["ruby", "floating-point", "decimal", "precision"], "comments": [{"owner": {"reputation": 3318, "user_id": 1715255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/052089e1ebdb07dabb8745fdc82b844f?s=128&d=identicon&r=PG&f=1", "display_name": "hotfix", "link": "https://stackoverflow.com/users/1715255/hotfix"}, "edited": false, "score": 1, "creation_date": 1533638928, "post_id": 51724802, "comment_id": 90410082, "body": "you should never do equality testing with floating point values.  You always have to deal with inaccurate internal representation issues with Float, so == and != aren&#39;t terribly useful. if you check the difference <code>1.3.to_d - 1.3</code> you will see that it will be not exactly 0"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 1, "creation_date": 1533639224, "post_id": 51724802, "comment_id": 90410257, "body": "As hotfix stated. <code>(f1 - f2).abs &lt; EPSILON</code> is the traditional way to compare floats. Using equality will only lead to tears. This method is also nicer to the machine running the code."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533639749, "post_id": 51724802, "comment_id": 90410580, "body": "This behavior is also not just for <code>bigdecimal</code>. I do a lot of interop with Ruby and packed strings. <code>[0.123].pack(&#39;f&#39;).unpack(&#39;f&#39;)  #=&gt; 0.12300000339746475</code> Using <code>==</code> is quite worthless. But if using an epsilon value with say 7 digits of precision <code>0.0000001</code>, the result is as expected."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1533640064, "post_id": 51724802, "comment_id": 90410786, "body": "<code>9.3 == 9.3.to_d.to_f #=&gt; true</code> \ud83d\ude09"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533644698, "post_id": 51724802, "comment_id": 90413688, "body": "Maybe it&#39;s a off-by-one error regarding BigDecimal&#39;s default precision of <a href=\"http://ruby-doc.org/core-2.5.1/Float.html#DIG\" rel=\"nofollow noreferrer\"><code>Float::DIG</code></a> (which is <code>15</code>): <code>9.3 == 9.3.to_d(15) #=&gt; false</code> vs. <code>9.3 == 9.3.to_d(16) #=&gt; true</code>"}], "answers": [{"comments": [{"owner": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1533645424, "post_id": 51725262, "comment_id": 90414194, "body": "This promulgates an incorrect model of floating-point. The statement \u201cThey are inexact\u201d is false. (They are also not limited to being finite or being binary.) As specified in IEEE 754, a floating-point number represents one number exactly. Instead, operations are defined to return mathematical results rounded to the nearest representable vallues. This, floating-point numbers are exact, but operations may be inexact. Understanding this distinction is crucial for reasoning about floating-point comoutation correctly and for designing comoutations."}, {"owner": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1533645768, "post_id": 51725262, "comment_id": 90414424, "body": "Ironically, comparing floating-point values for equality is always exact yet is the most frequently (and incorrectly) said to be unreliable. Comparing for equality returns true if and only if the two items compared are exactly equal. If it returns false when a user desires it return true, that is because there has been an error earlier, not an error in the comparison. And that shows why blaming either comparing for equality or saying floating-point numbers are inaccurate is misleading: They falsely lead people to look for a problem in the comparison when the problem is actually elsewhere."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533651191, "post_id": 51725262, "comment_id": 90418455, "body": "When I said &quot;they are inexact&quot;, I meant &quot;they are (sometimes) an inexact way to represent <i>the value you truly mean</i>&quot;. So for example, the floating point representation of <code>9.3</code> is does not <b>actually</b> mean <code>9.3</code>. (It&#39;s <code>9.300000000000001</code>.) My answer also did state that comparing <code>float1 == float2</code> is valid, but it&#39;s a risky strategy since you could get a subtle/virtually untraceable error in some cases."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533734033, "post_id": 51725262, "comment_id": 90455059, "body": "@EricPostpischil the <i>representation</i> is already inexact. Instead of the actual value (9.300000000000000710542735760100185871124267578125), we see an approximation (9.3)."}, {"owner": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533743730, "post_id": 51725262, "comment_id": 90461708, "body": "@Stefan: The fact that 9.300000000000000710542735760100185871124267578125 is formatted for display (with default settings) as \u201c9.3\u201d does not mean it represents 9.3. As I wrote, IEEE 754 is clear on this; a floating-point object set to 9.300000000000000710542735760100185871124267578125 represents 9.300000000000000710542735760100185871124267578125 exactly and does not represent 9.3. When arithmetic operations are performed on it, it will behave as if it is 9.300000000000000710542735760100185871124267578125, and it will not generally behave as if it were 9.3."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533748649, "post_id": 51725262, "comment_id": 90464326, "body": "@EricPostpischil I didn&#39;t say that the float 9.3 is equivalent to the real number 9.3. I said that its representation (i.e. &quot;9.3&quot;) is already an approximation (and therefore inexact)."}, {"owner": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533756672, "post_id": 51725262, "comment_id": 90468273, "body": "@Stefan: This is an incorrect model of floating-point. The binary floating-point value 9.300000000000000710542735760100185871124267578125 <b>is not a representation of 9.3</b>. You write, of 9.3, \u201cits representation (i.e. &quot;9.3&quot;) is already an approximation. But that is wrong. 9.3 has <b>no representation at all</b> in binary floating-point. When \u201c9.3\u201d is converted from source text or input text or from decimal 9.3, a <b>conversion operation</b> is performed. Such conversion operations are defined in IEEE 754. If performed correctly, the result is 9.300000000000000710542735760100185871124267578125\u2026"}, {"owner": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533756741, "post_id": 51725262, "comment_id": 90468301, "body": "This result is, according to IEEE 754, exactly the number 9.300000000000000710542735760100185871124267578125 and is not a representation of 9.3. Understanding this distinction is crucial to reasoning about floating-point arithmetic. If one is to write proofs about floating-point operations or to deduce error bounds or to engineer code to obtain desired results, then one must understand this distinction and use the properties of floating-point objects and operations correctly."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533765152, "post_id": 51725262, "comment_id": 90471862, "body": "@EricPostpischil you get me wrong. I meant it to be the other way &#39;round. &quot;9.3&quot; is the way 9.300000000000000710542735760100185871124267578125 is represented (or displayed). And <i>that</i> conversion for displaying purposes is the approximation I&#39;m talking about."}, {"owner": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533792822, "post_id": 51725262, "comment_id": 90478047, "body": "@Stefan: Formatting for display has nothing to do with the value represented for arithmetic. It does not affect how arithmetic proceeds. The string produced is merely for the convenience of humans. And it is only the default formatting that produces \u201c9.3\u201d. The exact value can be produced on demand. The string \u201c9.3\u201d should be understood to be only the result of a conversion with rounding."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533796392, "post_id": 51725262, "comment_id": 90479491, "body": "@EricPostpischil <i>&quot;the result of a conversion with rounding&quot;</i> \u2013 that&#39;s what I <a href=\"https://stackoverflow.com/questions/51724802/why-is-9-3-9-3-to-d-false/51725262?noredirect=1#comment90455059_51725262\">said</a> initially: <i>&quot;Instead of the actual value, we see an approximation&quot;</i>."}, {"owner": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533807999, "post_id": 51725262, "comment_id": 90486257, "body": "@Stefan: The thing is, the result of an operation is not a representation of the original number. If you add two to a number, negate a number, or take the cosine of a number, the result is a new number. It is not a representation of the original number. The same is true of conversion to decimal with rounding to limited precision. The result is generally a new number. People are tempted to think of it as a representation of the original because it is close and because languages are bad about communicating proper floating-point semantics, but it is not. An operation has been performed."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533808850, "post_id": 51725262, "comment_id": 90486840, "body": "@EricPostpischil When a user writes <code>9.3</code>, they probably expect it to mean <code>9.3</code>, not <code>9.300000000000000710542735760100185871124267578125</code>. The &quot;operation being performed&quot; (storing the value as a floating point) is invisible. Therein lies the confusion. That&#39;s what we mean when saying &quot;floating points are inexact&quot;. Yes, a floating point does represent a specific value, <i>but</i> it&#39;s not (always) the exact value that the user typed into the code."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533812934, "post_id": 51725262, "comment_id": 90489346, "body": "@EricPostpischil with &quot;representation&quot; I mean the way a float is being represented, i.e. its &quot;display value&quot;. If something shows as 9.3 I&#39;m tempted to think that it means 9.3 (of course). But since I know how floats work and how they are displayed, I think of 9.3 as an approximation of its actual value. When I say <i>&quot;the float 9.3 is inaccurate&quot;</i> I mean <i>&quot;9.3 is not its actual value&quot;</i>. Or, in a more general sense: <i>&quot;floats are inaccurate&quot;</i> by which I mean <i>&quot;watch out, the value a float pretends to be (the one you see) might not be its actual value&quot;</i>."}, {"owner": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533844446, "post_id": 51725262, "comment_id": 90508337, "body": "@Stefan: Please do not do that. You can find good information on thinking about floating-point arithmetic in <a href=\"http://a.co/ia2cFuo\" rel=\"nofollow noreferrer\"><i>Handbook of Floating-Point Arithmetic</i> by Muller <i>et al</i></a>. It is expensive, but, if that is a barrier, I expect you can find other textbooks. Or online sources, but so many of them are poorly written."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 3, "last_activity_date": 1533651308, "last_edit_date": 1533651308, "creation_date": 1533639955, "answer_id": 51725262, "question_id": 51724802, "link": "https://stackoverflow.com/questions/51724802/why-is-9-3-9-3-to-d-false/51725262#51725262", "title": "Why is `9.3 == 9.3.to_d` false?", "body": "<p>This is not really a \"ruby problem\". This is a <em>floating point representation of numbers</em> problem.</p>\n\n<p>You cannot <em>reliably</em> perform an equality check between floating point numbers and the \"exact\" value (as represented by <code>BigDecimal</code>).</p>\n\n<p><code>BigDecimal.new(9.3, 2)</code> is exact. <code>9.3</code> is not.</p>\n\n<pre><code>9.3 * 100 #=&gt; 930.0000000000001\n1.3 * 100 #=&gt; 130.0\n</code></pre>\n\n<p>That's just how binary floating point numbers work. They are (sometimes) an inexact representation of the \"true\" value.</p>\n\n<p>You can either:</p>\n\n<ul>\n<li>Compare like-for-like (<code>bigdecimal1 == bigdecimal2</code>, or <code>float1 == float2</code>). But also note that comparing <code>float1 == float2</code> is also unreliable if you're performing different calculations to get those values!! Or,</li>\n<li>Check that the values are equal <em>within an error bound</em> (e.g. in <code>rspec</code> terms, <code>expect(value1).to be_within(1e-12).of(value2)</code>).</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1533645860, "post_id": 51725505, "comment_id": 90414488, "body": "Comparing with a tolerance decreases false negatives at the expense of increasing false positives. So code like this can introduce new bugs into software."}, {"owner": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "reply_to_user": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533648025, "post_id": 51725505, "comment_id": 90416045, "body": "@EricPostpischil You are right in general case.  If I quote your above comment &quot;operations are defined to return mathematical results rounded to the nearest representable values&quot;.  If you use the set tolerance as maximum representable value then your code does not need to increase false positives (no new bugs introduced)."}, {"owner": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533649141, "post_id": 51725505, "comment_id": 90416932, "body": "The maximum representable value in IEEE-754 floating-point is infinity. Setting the tolerance to infinity would of course create a massive bug in a program. I am not sure what other value you might have meant. The errors in a sequence of floating-point computations may compound or cancel, depending on both the nature of the algorithm and the particular data. So there is no general rule for what tolerance to set. Some algorithms naturally converge, and the tolerance could be set to 1 ULP. Some algorithms diverge, and the expected errors could be infinite."}, {"owner": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1533649281, "post_id": 51725505, "comment_id": 90417022, "body": "In any case, in any normal situation, comparing with a tolerance will admit false negatives. It is inevitable: If the code is modified to accept as equal numbers that would be equal if computed with exact mathematics but that differ due to being computed with limited precision, then the code will also accept as equal numbers that would be unequal if computed with exact mathematics but that are close. No person should accept the advice to compare with a tolerance and put it into their code without evaluating the adverse effects it causes."}, {"owner": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "reply_to_user": {"reputation": 139290, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533650239, "post_id": 51725505, "comment_id": 90417744, "body": "@EricPostpischil &quot;evaluating the adverse effects it causes&quot; - You are right that should be considered for any code added.  Since computers (hw, cpu, etc.) are, by the nature, limited machines for that they have also limited precision.   Each platform (Intel, Risc/V, etc.) will have different precision and that should be definitely be taken in account when writing such code."}], "tags": [], "owner": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "is_accepted": false, "score": 1, "last_activity_date": 1533648881, "last_edit_date": 1533648881, "creation_date": 1533640735, "answer_id": 51725505, "question_id": 51724802, "link": "https://stackoverflow.com/questions/51724802/why-is-9-3-9-3-to-d-false/51725505#51725505", "title": "Why is `9.3 == 9.3.to_d` false?", "body": "<p><strong>Edited due to Eric comment above</strong></p>\n\n<p>You could use the nature of float and compare it to to a limit you propose which would return either <code>true</code> or <code>false</code> reliably.</p>\n\n<pre><code>(bigdecimal-float).abs &lt; comparison_limit\n</code></pre>\n\n<p>In your example that would be (I have added () to improve readability):</p>\n\n<pre><code>((9.3.to_d)-9.3).abs &lt; 0.000001  &lt;-- watch out for the limit!\n</code></pre>\n\n<p>Which yields <code>true</code> and can be used for testing.</p>\n\n<p><strong>Edit</strong> based on Eric's (thank you for it) comment.\nIt is important to always check the limits of the tolerance when comparing the two numbers.</p>\n\n<p>You could do it the following way:</p>\n\n<pre><code>9.3.next_float\n</code></pre>\n\n<p>which would give you</p>\n\n<pre><code>9.300000000000002\n</code></pre>\n\n<p>so your tolerance should be</p>\n\n<pre><code>0.000000000000002\n</code></pre>\n\n<p>Note: watch out for the step:</p>\n\n<pre><code>9.3.next_float.next_float\n=&gt; 9.300000000000004\n</code></pre>\n\n<p>Now the code looks differently:</p>\n\n<pre><code>((9.3.to_d)-9.3).abs &lt; 0.000000000000002\n</code></pre>\n"}], "owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 51725262, "answer_count": 2, "score": 0, "last_activity_date": 1533651308, "creation_date": 1533638497, "last_edit_date": 1533645357, "question_id": 51724802, "link": "https://stackoverflow.com/questions/51724802/why-is-9-3-9-3-to-d-false", "title": "Why is `9.3 == 9.3.to_d` false?", "body": "<p>I just ran into an interesting case during TDD:</p>\n\n<pre><code> Failure/Error: expect(MoneyManager::CustomsCalculator.call(price: 31,    weight: 1.12)).to    eq 9.3\n\n   expected: 9.3\n        got: 0.93e1\n</code></pre>\n\n<p>I investigated further and found:</p>\n\n<pre><code>require 'bigdecimal'\n =&gt; true\n2.4.2 :005 &gt; require 'bigdecimal/util'\n =&gt; true\n...\n2.4.2 :008 &gt; 1 == 1.to_d\n =&gt; true\n2.4.2 :009 &gt; 2 == 2.to_d\n =&gt; true\n2.4.2 :010 &gt; 2.0 == 2.0.to_d\n =&gt; true\n2.4.2 :011 &gt; 1.3 == 1.3.to_d\n =&gt; true\n2.4.2 :012 &gt; 9.3 == 9.3.to_d\n =&gt; false\n</code></pre>\n\n<p>Why is <code>9.3 == 9.3.to_d</code> <code>false</code>?</p>\n\n<p>PS, I am well aware of what a Float and a BigDecimal is, but I'm delightfully puzzled by this particular behavior.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "visual-studio-code", "environment-variables"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 1, "creation_date": 1533631227, "post_id": 51722136, "comment_id": 90405215, "body": "Not really related, but just in case you don&#39;t already have it, definitely install <a href=\"https://marketplace.visualstudio.com/items?itemName=castwide.solargraph\" rel=\"nofollow noreferrer\">Ruby Solargraph</a>, to make life easier. It is best thing going for intellisense for Ruby, actually got me to switch from RubyMine (at least for writing C extensions). If using Ruby 2.4+, read the end of the description if you get <code>EventMachine</code> error."}, {"owner": {"reputation": 2250, "user_id": 1139105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m3xAB.png?s=128&g=1", "display_name": "janniks", "link": "https://stackoverflow.com/users/1139105/janniks"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533634014, "post_id": 51722136, "comment_id": 90406964, "body": "@ForeverZer0 - Thanks, this actually really helps me! Trying to switch away from the bloated RubyMine and didn&#39;t quite get there yet..."}], "answers": [{"comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 1, "creation_date": 1533631425, "post_id": 51722137, "comment_id": 90405329, "body": "Not sure how well it plays with Rails, but <a href=\"https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner\" rel=\"nofollow noreferrer\">CodeRunner</a> might also be handy for quick test runs and debugging also."}, {"owner": {"reputation": 2250, "user_id": 1139105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m3xAB.png?s=128&g=1", "display_name": "janniks", "link": "https://stackoverflow.com/users/1139105/janniks"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533633917, "post_id": 51722137, "comment_id": 90406901, "body": "@ForeverZer0 - CodeRunner is awesome for scripts and simple applications. Unfortunately it doesn&#39;t really work well with more complex frameworks that do a lot of routing and rendering like Rails..."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533635636, "post_id": 51722137, "comment_id": 90408012, "body": "I assumed as much for Rails, but for could still be useful for snippets and such. Just throwing an honorably mention out there. :)"}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1567544740, "post_id": 51722137, "comment_id": 101992365, "body": "For all people hitting this error on Windows, despite adding PATH to ENV in launch.json, mind this: <a href=\"https://stackoverflow.com/a/54993121/717732\">stackoverflow.com/a/54993121/717732</a> - check the spelling of PATH on your OS!"}], "tags": [], "owner": {"reputation": 2250, "user_id": 1139105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m3xAB.png?s=128&g=1", "display_name": "janniks", "link": "https://stackoverflow.com/users/1139105/janniks"}, "is_accepted": true, "score": 25, "last_activity_date": 1614515127, "last_edit_date": 1614515127, "creation_date": 1533630228, "answer_id": 51722137, "question_id": 51722136, "link": "https://stackoverflow.com/questions/51722136/how-do-you-run-and-debug-ruby-on-rails-from-visual-studio-code/51722137#51722137", "title": "How do you run and debug Ruby on Rails from Visual Studio Code?", "body": "<h2>Setup and Launch</h2>\n<ol>\n<li>Install the <a href=\"https://github.com/rubyide/vscode-ruby\" rel=\"nofollow noreferrer\">VS Code Ruby plugin</a> <em>(hit <kbd>\u2318</kbd>+<kbd>\u21e7</kbd>+<kbd>P</kbd> on Mac or <kbd>ctrl</kbd>+<kbd>\u21e7</kbd>+<kbd>P</kbd> elsewhere and type <code>ext install</code> in the prompt, then search for <code>ruby</code>)</em></li>\n<li>Install some required Ruby gems</li>\n</ol>\n<pre class=\"lang-sh prettyprint-override\"><code>gem install ruby-debug-ide\ngem install debase\n</code></pre>\n<ol start=\"3\">\n<li>Add a <a href=\"https://code.visualstudio.com/docs/editor/debugging#_launch-configurations\" rel=\"nofollow noreferrer\">launch configuration</a> in Visual Studio Code <em>(example configuration shown below)</em></li>\n</ol>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;name&quot;: &quot;Rails server&quot;,\n    &quot;type&quot;: &quot;Ruby&quot;,\n    &quot;request&quot;: &quot;launch&quot;,\n    &quot;cwd&quot;: &quot;${workspaceRoot}&quot;,\n    &quot;program&quot;: &quot;${workspaceRoot}/bin/rails&quot;,\n    &quot;env&quot;: {\n        &quot;PATH&quot;: &quot;YOUR_PATH_HERE&quot;,\n        &quot;GEM_HOME&quot;: &quot;YOUR_GEM_HOME_HERE&quot;,\n        &quot;GEM_PATH&quot;: &quot;YOUR_GEM_PATH_HERE&quot;,\n        &quot;RUBY_VERSION&quot;: &quot;YOUR_RUBY_VERSION_HERE&quot;\n    },\n    &quot;args&quot;: [\n        &quot;server&quot;\n    ]\n}\n</code></pre>\n<blockquote>\n<p>In some cases you might not need to specify the <code>env</code> section.\nIn other cases you can launch VS Code <a href=\"https://code.visualstudio.com/docs/editor/command-line\" rel=\"nofollow noreferrer\">using the CLI</a> <em>(i.e. from the terminal)</em>, which on some systems automatically sets the correct environment variables.</p>\n</blockquote>\n<ol start=\"4\">\n<li><strong>Run!</strong></li>\n</ol>\n<hr />\n<h2>Troubleshooting</h2>\n<p>If you get the following error</p>\n<pre class=\"lang-sh prettyprint-override\"><code>Debugger terminal error: Process failed: spawn rdebug-ide ENOENT\n</code></pre>\n<p>Your environment variables (<code>env</code>) are most likely not set and the plugin cannot find the necessary binaries.</p>\n<ol>\n<li>Make sure all gems are installed and try running <code>bundler install --binstubs</code> if you use bundler.</li>\n<li>Make sure the <code>env</code> section is set in your launch configuration. Run the following shell command to generate your <code>env</code>:</li>\n</ol>\n<pre class=\"lang-sh prettyprint-override\"><code>printf &quot;\\n\\&quot;env\\&quot;: {\\n  \\&quot;PATH\\&quot;: \\&quot;$PATH\\&quot;,\\n  \\&quot;GEM_HOME\\&quot;: \\&quot;$GEM_HOME\\&quot;,\\n  \\&quot;GEM_PATH\\&quot;: \\&quot;$GEM_PATH\\&quot;,\\n  \\&quot;RUBY_VERSION\\&quot;: \\&quot;$RUBY_VERSION\\&quot;\\n}\\n\\n&quot;\n</code></pre>\n<hr />\n<h2>Windows</h2>\n<p>Make sure to use the correct spelling (and capitalization) of the <code>path</code> variable, i.e. <code>Path</code> on Windows</p>\n<hr />\n<h3><em>Sources</em>:</h3>\n<ul>\n<li><em><a href=\"https://github.com/rubyide/vscode-ruby/issues/214#issuecomment-393111908\" rel=\"nofollow noreferrer\">https://github.com/rubyide/vscode-ruby/issues/214#issuecomment-393111908</a></em></li>\n<li><em><a href=\"https://www.reddit.com/r/vscode/comments/5w1acs/getting_error_debugger_terminal_error_process/\" rel=\"nofollow noreferrer\">https://www.reddit.com/r/vscode/comments/5w1acs/getting_error_debugger_terminal_error_process/</a></em></li>\n<li><em><a href=\"https://stackoverflow.com/questions/47662998/how-to-extend-path-in-launch-json-in-visual-studio-code/54993121#54993121\">How to extend $PATH in launch.json in Visual Studio Code?</a></em></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1570, "user_id": 475639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bac0527cb30d108b8f7765515344e71?s=128&d=identicon&r=PG", "display_name": "jnicho02", "link": "https://stackoverflow.com/users/475639/jnicho02"}, "edited": false, "score": 0, "creation_date": 1567674030, "post_id": 54477794, "comment_id": 102035808, "body": "Thanks. I also tried &quot;~/.rvm/gems....&quot; so that other users could share but VSCode didn&#39;t like it."}, {"owner": {"reputation": 236, "user_id": 135962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df6a79831018674816fcacab701280a4?s=128&d=identicon&r=PG", "display_name": "AndyWatts", "link": "https://stackoverflow.com/users/135962/andywatts"}, "edited": false, "score": 1, "creation_date": 1574876704, "post_id": 54477794, "comment_id": 104388968, "body": "Thanks.  &quot;useBundler&quot; needed and missing from most answers."}], "tags": [], "owner": {"reputation": 923, "user_id": 1038479, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3cd26b8c68e76f7b6405881f1337d76?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/1038479/mitch"}, "is_accepted": false, "score": 7, "last_activity_date": 1549017649, "creation_date": 1549017649, "answer_id": 54477794, "question_id": 51722136, "link": "https://stackoverflow.com/questions/51722136/how-do-you-run-and-debug-ruby-on-rails-from-visual-studio-code/54477794#54477794", "title": "How do you run and debug Ruby on Rails from Visual Studio Code?", "body": "<p>I spent most of a day trying to solve this.</p>\n\n<p>I ended up stripping my launch.json config down to the following:</p>\n\n<pre><code>\"configurations\": [\n    {\n       \"name\": \"Rails server\",\n        \"type\": \"Ruby\",\n        \"request\": \"launch\",\n        \"cwd\": \"${workspaceRoot}\",\n        \"program\": \"/Users/mitch/.rvm/gems/ruby-2.3.0@gg_portal/bin/rails\",\n        \"args\": [\n            \"server\"\n        ],\n        \"useBundler\": true,\n        \"pathToRDebugIDE\": \"/Users/mitch/.rvm/gems/ruby-2.3.0@gg_portal/gems/ruby-debug-ide-0.6.1\",\n        \"pathToBundler\": \"/Users/mitch/.rvm/gems/ruby-2.3.0@gg_portal/wrappers/bundle\",\n        \"showDebuggerOutput\": true\n    }\n\n]\n</code></pre>\n\n<p>Firstly, especially if you're using RVM  &amp; have different Gemsets, make sure your paths are consistent with the correct Gemset.</p>\n\n<p>What solved the problem for me was pathToBundler.</p>\n\n<pre><code>which bundle\n/Users/mitch/.rvm/gems/ruby-2.3.0@gg_portal/bin/bundle\n</code></pre>\n\n<p>There looks to be some incompatibility around setting the path to the binstubs bundler (shown above) and the bundler pointed to from /wrappers/ (shown below), so changing pathToBundler to:</p>\n\n<pre><code>\"pathToBundler\": \"/Users/mitch/.rvm/gems/ruby-2.3.0@gg_portal/wrappers/bundle\",\n</code></pre>\n\n<p>solved the problem.</p>\n\n<p>There is a kind of related discussion here:</p>\n\n<pre><code>https://github.com/rails/rails/issues/31193\n</code></pre>\n\n<p>which talks about binstubs though not specifically VSCode &amp; debugging.</p>\n"}, {"tags": [], "owner": {"reputation": 286, "user_id": 4249502, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh4.googleusercontent.com/-LkHPSs92-Rk/AAAAAAAAAAI/AAAAAAAAAZU/koHLhdZa1lw/photo.jpg?sz=128", "display_name": "griest", "link": "https://stackoverflow.com/users/4249502/griest"}, "is_accepted": false, "score": 0, "last_activity_date": 1561741668, "creation_date": 1561741668, "answer_id": 56810833, "question_id": 51722136, "link": "https://stackoverflow.com/questions/51722136/how-do-you-run-and-debug-ruby-on-rails-from-visual-studio-code/56810833#56810833", "title": "How do you run and debug Ruby on Rails from Visual Studio Code?", "body": "<p>If you're using a ruby version manager such as rbenv that relies on bash shims, try launching VS Code from the terminal. This should allow VS Code to pick up on the env variables that rbenv sets. Alternatively you can set your env vars in <code>launch.json</code>, but this is not a very maintainable solution.</p>\n"}], "owner": {"reputation": 2250, "user_id": 1139105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m3xAB.png?s=128&g=1", "display_name": "janniks", "link": "https://stackoverflow.com/users/1139105/janniks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11194, "favorite_count": 5, "accepted_answer_id": 51722137, "answer_count": 3, "score": 17, "last_activity_date": 1614515127, "creation_date": 1533630228, "last_edit_date": 1538068331, "question_id": 51722136, "link": "https://stackoverflow.com/questions/51722136/how-do-you-run-and-debug-ruby-on-rails-from-visual-studio-code", "title": "How do you run and debug Ruby on Rails from Visual Studio Code?", "body": "<ul>\n<li><p>How can you launch Ruby on Rails using the built-in Visual Studio Code Launch/Debug features?</p></li>\n<li><p>How do you fix the <code>Debugger terminal error: Process failed: spawn rdebug-ide ENOENT</code> error?</p></li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 663, "user_id": 8282168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba492cef39f592a7e738a4d3a70b8bab?s=128&d=identicon&r=PG&f=1", "display_name": "L_Church", "link": "https://stackoverflow.com/users/8282168/l-church"}, "edited": false, "score": 2, "creation_date": 1533630035, "post_id": 51722050, "comment_id": 90404504, "body": "have you tried researching it? what did you find out"}, {"owner": {"reputation": 79, "user_id": 6155553, "user_type": "registered", "profile_image": "https://graph.facebook.com/956228351130472/picture?type=large", "display_name": "bisho", "link": "https://stackoverflow.com/users/6155553/bisho"}, "reply_to_user": {"reputation": 663, "user_id": 8282168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba492cef39f592a7e738a4d3a70b8bab?s=128&d=identicon&r=PG&f=1", "display_name": "L_Church", "link": "https://stackoverflow.com/users/8282168/l-church"}, "edited": false, "score": 0, "creation_date": 1533630512, "post_id": 51722050, "comment_id": 90404782, "body": "Though i found about initialize(*arg) which means it will accept as many argument as we passed to it but i didn&#39;t found about initialize(*). @SRack  explain to me below."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 2, "creation_date": 1533630672, "post_id": 51722050, "comment_id": 90404860, "body": "To be fair to @bisho, I&#39;ve been hunting for a really good article outlining this approach&#39;s use, and it&#39;s pretty difficult to come across explanations using <i>just</i> the splat arg and nothing else."}, {"owner": {"reputation": 2371, "user_id": 565637, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a45c1be949bd9cdef95e770ff985dfa8?s=128&d=identicon&r=PG", "display_name": "gamliela", "link": "https://stackoverflow.com/users/565637/gamliela"}, "edited": false, "score": 2, "creation_date": 1559537359, "post_id": 51722050, "comment_id": 99437597, "body": "It&#39;s actually a very good question. I don&#39;t understand why people are downvoting it - at least include a ref to good documentation about this feature (is there any?)"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 6155553, "user_type": "registered", "profile_image": "https://graph.facebook.com/956228351130472/picture?type=large", "display_name": "bisho", "link": "https://stackoverflow.com/users/6155553/bisho"}, "edited": false, "score": 0, "creation_date": 1533630209, "post_id": 51722077, "comment_id": 90404596, "body": "Thank you for explanation and yes there is super also but i removed it."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 79, "user_id": 6155553, "user_type": "registered", "profile_image": "https://graph.facebook.com/956228351130472/picture?type=large", "display_name": "bisho", "link": "https://stackoverflow.com/users/6155553/bisho"}, "edited": false, "score": 0, "creation_date": 1533630277, "post_id": 51722077, "comment_id": 90404642, "body": "You&#39;re welcome - I&#39;m trying to come up with a good example of practical usage, and will update with this shortly. However, if you feel this answers the question, feel free to give a tick @bisho :)"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 4, "last_activity_date": 1533630535, "last_edit_date": 1533630535, "creation_date": 1533630006, "answer_id": 51722077, "question_id": 51722050, "link": "https://stackoverflow.com/questions/51722050/ruby-initialize-method-with/51722077#51722077", "title": "Ruby, initialize method with *", "body": "<p>It mean's it's indiscriminate about arguments passed to it, i.e. you can pass as many or as few as you like. </p>\n\n<p>They're 'throwaway' arguments, in that you can't access them subsequently. If you want to access them subsequently, you can use the commonly seen pattern <code>def initialize(*args)</code> and access the data via <code>args</code>.</p>\n\n<p>It's often called with <code>super</code> to accept the arguments from a parent class, perhaps if they're not required.</p>\n\n<p>For example, with your usage:</p>\n\n<pre><code>class MyClass\n  def initialize(*)\n  end\nend\n</code></pre>\n\n<p>The following will work just fine:</p>\n\n<pre><code>MyClass.new(1, 2, 3, 4, 5, 'etc')\nMyClass.new\n</code></pre>\n\n<p>It's largely undocumented, though is covered in the Ruby specs:</p>\n\n<pre><code>it \"accepts an unnamed '*' argument\" do\n  def foo(*); end;\n\n  foo.should == nil\n  foo(1, 2).should == nil\n  foo(1, 2, 3, 4, :a, :b, 'c', 'd').should == nil\nend\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 6155553, "user_type": "registered", "profile_image": "https://graph.facebook.com/956228351130472/picture?type=large", "display_name": "bisho", "link": "https://stackoverflow.com/users/6155553/bisho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "closed_date": 1533630792, "accepted_answer_id": 51722077, "answer_count": 1, "score": 1, "last_activity_date": 1533630535, "creation_date": 1533629945, "last_edit_date": 1533630205, "question_id": 51722050, "link": "https://stackoverflow.com/questions/51722050/ruby-initialize-method-with", "closed_reason": "Duplicate", "title": "Ruby, initialize method with *", "body": "<p>I am new in ruby and found this code:</p>\n\n<pre><code>def initialize(*)\n  # ...\nend\n</code></pre>\n\n<p>What does <code>*</code> mean in <code>initialize</code> arguments list? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "instagram", "instagram-api"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1533629338, "post_id": 51721816, "comment_id": 90404144, "body": "i get the same error SSL_connect returned=1 errno=0 state=error: certificate verify failed, even after the change u suggested."}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "reply_to_user": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1533629712, "post_id": 51721816, "comment_id": 90404333, "body": "I had faced a similar issue with that gem and I was suggested to change to this. Here is a link to a sample application using the suggested gem  <a href=\"https://github.com/Kedarnag13/SampleInstagram\" rel=\"nofollow noreferrer\">github.com/Kedarnag13/SampleInstagram</a>"}, {"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1533630220, "post_id": 51721816, "comment_id": 90404608, "body": "oh okay fine.. il look into the smapleapp u have sent .. thanks"}, {"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1533630758, "post_id": 51721816, "comment_id": 90404914, "body": "i looked into ua sample app and tried implementing that to my project, but  stil i get the same error"}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "reply_to_user": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1533631176, "post_id": 51721816, "comment_id": 90405176, "body": "Can you try this <code>https:&#47;&#47;api.instagram.com&#47;v1&#47;users&#47;&lt;user-id&gt;&#47;media&#47;recent&#47;</code>. It&#39;s a GET request"}, {"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1533631279, "post_id": 51721816, "comment_id": 90405240, "body": "should i place the user id number and check the url"}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "reply_to_user": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1533631423, "post_id": 51721816, "comment_id": 90405328, "body": "Yes, replace <code>&lt;user-id&gt;</code> in the URL and ping that. I believe there is an new way of getting information as well. You can try this too <code>https:&#47;&#47;instagram.com&#47;graphql&#47;query&#47;?query_id=17888483320059&zwnj;&#8203;182&amp;variables={&quot;id&quot;:&zwnj;&#8203;&quot;user_id&quot;,&quot;first&quot;:20&zwnj;&#8203;,&quot;after&quot;:null}</code>"}, {"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1533631568, "post_id": 51721816, "comment_id": 90405422, "body": "but when i do that i get error. error_message: &quot;Missing client_id or access_token URL parameter.&quot; }"}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "reply_to_user": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1533632002, "post_id": 51721816, "comment_id": 90405705, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/177547/discussion-between-kedarnag-mukanahallipatna-and-sushma-kv\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "is_accepted": false, "score": 0, "last_activity_date": 1533629350, "last_edit_date": 1533629350, "creation_date": 1533629163, "answer_id": 51721816, "question_id": 51721659, "link": "https://stackoverflow.com/questions/51721659/faradaysslerror-ssl-connect-returned-1-errno-0-state-error-certificate-verif/51721816#51721816", "title": "Faraday::SSLError (SSL_connect returned=1 errno=0 state=error: certificate verify failed)", "body": "<p>In the view, replace <code>instagram.images.standard_resolution.url</code> with <code>instagram.images.standard_resolution.url.sub(/^https?\\:/, '')</code></p>\n\n<p>Alternatively, you can try this gem  <code>https://github.com/agilie/instagram_api_gem</code></p>\n"}], "owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 677, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533661708, "creation_date": 1533628564, "last_edit_date": 1533661708, "question_id": 51721659, "link": "https://stackoverflow.com/questions/51721659/faradaysslerror-ssl-connect-returned-1-errno-0-state-error-certificate-verif", "title": "Faraday::SSLError (SSL_connect returned=1 errno=0 state=error: certificate verify failed)", "body": "<p>Getting <code>Farday::SSLError</code> while fetching posts from instagram.</p>\n\n<p>I have refred this <a href=\"https://blog.ajmalafif.com/instagram-gem-with-rails/\" rel=\"nofollow noreferrer\">tutorial</a></p>\n\n<p>Below is the code snippet</p>\n\n<p>Gemfile</p>\n\n<pre><code> gem 'instagram'\n</code></pre>\n\n<p>config\\initializers\\instagram.rb</p>\n\n<pre><code>require \"sinatra\"\nrequire \"instagram\"\n\nInstagram.configure do |config|\n  config.client_id = \"4ad05f8aa5a24827b6c5e3c825ff2528\"\n  config.access_token = \"06a7eb3dd2ec45d6a576e3b3576fc423\"\nend\n</code></pre>\n\n<p>homecontroller</p>\n\n<pre><code>def index\n  @galleries = Gallery.all\n  @banners = Slideshow.where(gallery_id: nil)\n  @instagram = Instagram.user_recent_media(\"592393738\", {:count =&gt; 1})\nend\n</code></pre>\n\n<p>index.html.erb</p>\n\n<pre><code>&lt;% @instagram.each do |instagram| %&gt;\n   &lt;%= image_tag instagram.images.standard_resolution.url %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage"], "comments": [{"owner": {"reputation": 31606, "user_id": 227863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AtDIv.jpg?s=128&g=1", "display_name": "stephenmurdoch", "link": "https://stackoverflow.com/users/227863/stephenmurdoch"}, "edited": false, "score": 0, "creation_date": 1539139670, "post_id": 51720923, "comment_id": 92388783, "body": "I know you&#39;ve fixed this using the solution that @jean posted, but have you tried setting up a CORS policy so that you can continue using <code>url_for</code> (or <code>polymorphic_url</code>). At least that way you will be able to keep the path to your assets hidden from public, which can have all sorts of benefits."}, {"owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "reply_to_user": {"reputation": 31606, "user_id": 227863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AtDIv.jpg?s=128&g=1", "display_name": "stephenmurdoch", "link": "https://stackoverflow.com/users/227863/stephenmurdoch"}, "edited": false, "score": 0, "creation_date": 1539172625, "post_id": 51720923, "comment_id": 92403892, "body": "@stephenmurdoch CORS is set up properly but the old version of the CORS spec said don&#39;t follow redirects and firefox hasn&#39;t changed it yet."}, {"owner": {"reputation": 31606, "user_id": 227863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AtDIv.jpg?s=128&g=1", "display_name": "stephenmurdoch", "link": "https://stackoverflow.com/users/227863/stephenmurdoch"}, "edited": false, "score": 0, "creation_date": 1539227356, "post_id": 51720923, "comment_id": 92427259, "body": "that&#39;s strange because I&#39;m seeing no CORS related problems with firefox at all. Perhaps they&#39;ve quietly fixed it. Running the latest, on Ubuntu 18. Oh well."}], "answers": [{"tags": [], "owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "is_accepted": false, "score": 2, "last_activity_date": 1533821885, "creation_date": 1533821885, "answer_id": 51768570, "question_id": 51720923, "link": "https://stackoverflow.com/questions/51720923/direct-link-no-redirect-to-files-in-activestorage/51768570#51768570", "title": "Direct link (no redirect) to files in ActiveStorage", "body": "<p>I had to dig through the rails source to create this so I have no idea how recommended it is but this works for disk storage at least.</p>\n\n<pre><code>ActiveStorage::Current.host = \"yourhostname\"\nattachment_blob = ActiveStorage::Attachment.find_by(record_type: \"YourModel\", record_id: record.id).blob\ndirect_url = ActiveStorage::Blob.service.url(\n    attachment_blob.key,\n    expires_in: 20000,\n    disposition: \"attachment\",\n    filename: attachment_blob.filename,\n    content_type: attachment_blob.content_type\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "edited": false, "score": 0, "creation_date": 1537265085, "post_id": 52384046, "comment_id": 91712117, "body": "yeah, that seems to be a more direct way of the method I found."}], "tags": [], "owner": {"reputation": 625, "user_id": 2218218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PUlPQ.jpg?s=128&g=1", "display_name": "Jean", "link": "https://stackoverflow.com/users/2218218/jean"}, "is_accepted": true, "score": 6, "last_activity_date": 1537265038, "creation_date": 1537265038, "answer_id": 52384046, "question_id": 51720923, "link": "https://stackoverflow.com/questions/51720923/direct-link-no-redirect-to-files-in-activestorage/52384046#52384046", "title": "Direct link (no redirect) to files in ActiveStorage", "body": "<p>You can do this</p>\n\n<p><code>record.active_storage_object.blob.service_url</code></p>\n\n<p>Found here <a href=\"https://github.com/rails/rails/blob/master/activestorage/app/controllers/active_storage/blobs_controller.rb\" rel=\"noreferrer\">https://github.com/rails/rails/blob/master/activestorage/app/controllers/active_storage/blobs_controller.rb</a></p>\n"}, {"tags": [], "owner": {"reputation": 1139, "user_id": 4468463, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mFyjG.jpg?s=128&g=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/4468463/liz"}, "is_accepted": false, "score": 0, "last_activity_date": 1537283291, "creation_date": 1537283291, "answer_id": 52389635, "question_id": 51720923, "link": "https://stackoverflow.com/questions/51720923/direct-link-no-redirect-to-files-in-activestorage/52389635#52389635", "title": "Direct link (no redirect) to files in ActiveStorage", "body": "<p>For me, <code>rails_blob_url(@blog.pdf)</code> (if you're trying to get the file stored as <code>@blog.pdf</code>) worked best.</p>\n"}], "owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3047, "favorite_count": 3, "accepted_answer_id": 52384046, "answer_count": 3, "score": 4, "last_activity_date": 1537283291, "creation_date": 1533626012, "question_id": 51720923, "link": "https://stackoverflow.com/questions/51720923/direct-link-no-redirect-to-files-in-activestorage", "title": "Direct link (no redirect) to files in ActiveStorage", "body": "<p>Using <code>url_for()</code> on a file stored in active storage returns a url that leads to the application and then redirects to the actual location. Because of a <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1346749\" rel=\"nofollow noreferrer\">bug in firefox</a> with CORS, the redirect breaks my application.</p>\n\n<p>Is there any way to get the direct link to the file with ActiveStorage?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rails-activejob"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533634560, "post_id": 51720063, "comment_id": 90407347, "body": "1. <code>activejob</code> is a dependency for the main application, <i>including production environment</i>. You should not place the gem in the <code>:development</code> and <code>:test</code> groups, but rather install it in all environments (i.e. outside the block)."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533634851, "post_id": 51720063, "comment_id": 90407529, "body": "2. I don&#39;t understand why you&#39;re writing (the same!) tests in <code>spec_helper.rb</code>. That file is, by its very name, supposed to contain <i>helpers</i>, not tests. And certainly not duplicate tests. Are you even <code>require</code>ing that file anywhere?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533634970, "post_id": 51720063, "comment_id": 90407593, "body": "3. Even with that said, I don&#39;t understand why you&#39;d get a <i>&quot;uninitialized constant <code>ActiveJob</code>&quot;</i> error. Can you try running <code>bundle exec rspec</code>, and show the <b>full</b> error, if it persists?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1533636696, "post_id": 51720063, "comment_id": 90408649, "body": "It&#39;s not <code>ActiveJob::TestHelper</code> its <code>ActiveJobHelpers</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1999, "user_id": 1116381, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b470e79f9eb14c32bc0b8f3eb47fbd8?s=128&d=identicon&r=PG", "display_name": "Tachyons", "link": "https://stackoverflow.com/users/1116381/tachyons"}, "is_accepted": false, "score": 1, "last_activity_date": 1534066700, "creation_date": 1534066700, "answer_id": 51807583, "question_id": 51720063, "link": "https://stackoverflow.com/questions/51720063/active-job-with-rails-rspec/51807583#51807583", "title": "active job with rails rspec", "body": "<p>You are using rails 4.1.5, ActiveJob is introduced in rails 4.2</p>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 6708849, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/e6ca87f05bad3224ac0cd68efca5959e?s=128&d=identicon&r=PG&f=1", "display_name": "dhruv mehta", "link": "https://stackoverflow.com/users/6708849/dhruv-mehta"}, "is_accepted": false, "score": 0, "last_activity_date": 1534150663, "creation_date": 1534150663, "answer_id": 51818630, "question_id": 51720063, "link": "https://stackoverflow.com/questions/51720063/active-job-with-rails-rspec/51818630#51818630", "title": "active job with rails rspec", "body": "<p>This issue is resolved by using the gem \"gem 'activejob_backport'</p>\n"}], "owner": {"reputation": 47, "user_id": 6708849, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/e6ca87f05bad3224ac0cd68efca5959e?s=128&d=identicon&r=PG&f=1", "display_name": "dhruv mehta", "link": "https://stackoverflow.com/users/6708849/dhruv-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534150663, "creation_date": 1533622903, "last_edit_date": 1533634404, "question_id": 51720063, "link": "https://stackoverflow.com/questions/51720063/active-job-with-rails-rspec", "title": "active job with rails rspec", "body": "<p>I have installed a gem <code>rspec-rails</code>. Everything is working fine except <code>ActiveJob</code>.\nI have tried to implement the <code>ActiveJob</code> in RSpec with:</p>\n\n<pre><code>include ActiveJob::TestHelper\n</code></pre>\n\n<p>and here's the code for the RSsec Job Controller:</p>\n\n<pre><code>describe \"#perform_later\" do\n  it \"Send Invoice Reminder\" do\n    ActiveJob::Base.queue_adapter = :test\n    InvoiceReminderJob.perform_later\n    expect(InvoiceReminderJob).to have_enqueued_job\n  end\nend\n</code></pre>\n\n<p><code>spec_helper.rb</code>:</p>\n\n<pre><code>require 'rails_helper'\nRSpec.describe InvoiceReminderJob, type: :job do\n  include ActiveJob::TestHelper\n  # pending \"add some examples to (or delete) #{__FILE__}\"\n\n  describe \"#perform_later\" do\n    it \"Send Invoice Reminder\" do\n      ActiveJob::Base.queue_adapter = :test\n      InvoiceReminderJob.perform(\"test\")\n      expect(InvoiceReminderJob).to have_enqueued_job\n    end\n  end\nend\n</code></pre>\n\n<p><code>invoice_reminder_job_spec.rb</code>:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe InvoiceReminderJob, type: :job do\n  # include ActiveJob::TestHelper\n  # pending \"add some examples to (or delete) #{__FILE__}\"\n\n  describe \"#perform_later\" do\n    it \"Send Invoice Reminder\" do\n      ActiveJob::Base.queue_adapter = :test\n      InvoiceReminderJob.perform_later\n      expect(InvoiceReminderJob).to have_enqueued_job\n    end\n  end\nend\n</code></pre>\n\n<p>When I am trying to run rspec with the command <code>rspec</code> I am getting the following error:</p>\n\n<blockquote>\n  <p>uninitialized constant ActiveJob (NameError)</p>\n</blockquote>\n\n<p>Here is my <code>Gemfile</code>:</p>\n\n<p>Here is the gemfile included for my project:</p>\n\n<pre><code>source 'https://rubygems.org'\nruby '2.1.2'\n\ngem 'acts-as-taggable-on', '~&gt; 3.4'\ngem 'acts_as_tenant'\ngem 'audited', '~&gt; 4.0'\ngem 'audited-activerecord'\ngem 'aws-sdk', '~&gt; 1.6'\ngem 'axlsx'\ngem 'best_in_place', '~&gt; 3.0.1'\ngem 'bootstrap-generators'\ngem 'bootstrap-sass'\ngem 'bullet', group: 'development'\ngem 'cancancan', '~&gt; 1.10'\ngem 'clockwork'\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'daemons'\ngem 'delayed_job_active_record'\ngem 'devise'\ngem 'eefgilm'\ngem 'exception_notification'\ngem 'figaro'\ngem 'font-awesome-rails'\ngem 'i18n-js', '&gt;= 3.0.0.rc11'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'jquery-rails'\ngem 'jquery-ui-rails'\ngem 'mailman'\ngem 'net-ssh'\ngem 'paperclip', '~&gt; 4.2'\ngem 'pg'\ngem 'protected_attributes'\ngem 'puma'\ngem 'rails', '4.1.5'\ngem 'rails-console-tweaks'\ngem 'rails-i18n'\ngem 'rails_best_practices'\ngem 'redcarpet'\ngem 'rest-client'\ngem 'roo'\ngem 'roo-google'\ngem 'roo-xls'\ngem 'rubocop', require: false\ngem 'sass-rails', '~&gt; 5.0'\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\ngem 'seed_dump'\ngem 'simple_form'\ngem 'therubyracer', platforms: :ruby\ngem 'traceroute'\ngem 'twitter-bootstrap-rails'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'whenever', :require =&gt; false\ngem 'wicked_pdf'\ngem 'wkhtmltopdf-binary'\ngem 'zip'\n\ngroup :development do\n  gem 'capistrano'\n  gem 'capistrano3-puma'\n  gem 'capistrano-bundler', require: false\n  gem 'capistrano-rails', require: false\n  gem 'capistrano-rvm'\n  gem 'rails-erd'\n  gem 'capistrano-rails-console', require: false\n  gem 'capistrano-maintenance', '~&gt; 1.0', require: false\n  gem 'letter_opener'\n  gem 'rspec-rails'\n  gem 'faker'\nend\n\ngroup :production do\n  gem 'rails_12factor'\nend\n\ngroup :test do\n  gem 'shoulda-matchers'\n  gem 'database_cleaner'\n  gem 'simplecov'\nend\n\ngroup :development, :test do\n  gem 'byebug'\n  gem 'hirb'\n  gem 'mocha'\n  gem 'activejob'\n  gem 'factory_bot_rails'\nend\n</code></pre>\n\n<p>And here is the output of <code>bundle show activejob</code>:</p>\n\n<pre><code>/Users/221/.rvm/gems/ruby-2.1.2/gems/activejob-0\n</code></pre>\n\n<p>I have tried to search with lots of solution but I am not able to resolve this issue. If anyone could help me with it, I would be really grateful.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1533621848, "post_id": 51719713, "comment_id": 90400271, "body": "Have you tried <code>class Overrides::SessionsController</code>? It looks like it should be namespaced."}], "answers": [{"tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 2, "last_activity_date": 1533621891, "creation_date": 1533621891, "answer_id": 51719835, "question_id": 51719713, "link": "https://stackoverflow.com/questions/51719713/typeerror-superclass-mismatch-for-class-sessionscontroller/51719835#51719835", "title": "TypeError (superclass mismatch for class SessionsController)", "body": "<p>Actually the error message says what needs to be done:</p>\n\n<blockquote>\n  <p>Unable to autoload constant Overrides::SessionsController, expected /home/admin/\u0420\u0430\u0431\u043e\u0447\u0438\u0439 \u0441\u0442\u043e\u043b/demo/backend/app/controllers/overrides/sessions_controller.rb to define it)</p>\n</blockquote>\n\n<p><code>Rails</code> expects <code>app/controllers/overrides/sessions_controller.rb</code> to define <code>Overrides::SessionsController</code>, but can't find it.</p>\n\n<p>Change your controller class definition to:</p>\n\n<pre><code>class Overrides::SessionsController &lt; DeviseTokenAuth::ApplicationController\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10189742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e7a278051d55bbfc6aa7269e450db4?s=128&d=identicon&r=PG&f=1", "display_name": "user10189742", "link": "https://stackoverflow.com/users/10189742/user10189742"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1008, "favorite_count": 0, "accepted_answer_id": 51719835, "answer_count": 1, "score": 1, "last_activity_date": 1533621891, "creation_date": 1533621306, "question_id": 51719713, "link": "https://stackoverflow.com/questions/51719713/typeerror-superclass-mismatch-for-class-sessionscontroller", "title": "TypeError (superclass mismatch for class SessionsController)", "body": "<p>I do authorization through \"login\" and because of this there is such an error:</p>\n\n<blockquote>\n  <p>Started POST \"/auth/sign_in\" for 10.12.4.5 at 2018-08-07 10:20:55\n  +0500</p>\n  \n  <p>LoadError (Unable to autoload constant Overrides::SessionsController,\n  expected /home/admin/\u0420\u0430\u0431\u043e\u0447\u0438\u0439\n  \u0441\u0442\u043e\u043b/demo/backend/app/controllers/overrides/sessions_controller.rb to\n  define it):</p>\n  \n  <p>activesupport (5.1.6) lib/active_support/dependencies.rb:512:in\n  <code>load_missing_constant' activesupport (5.1.6)\n  lib/active_support/dependencies.rb:202:in</code>const_missing'\n  activesupport (5.1.6) lib/active_support/inflector/methods.rb:284:in\n  <code>const_get' activesupport (5.1.6)\n  lib/active_support/inflector/methods.rb:284:in</code>block in constantize'\n  activesupport (5.1.6) lib/active_support/inflector/methods.rb:267:in\n  <code>each' activesupport (5.1.6)\n  lib/active_support/inflector/methods.rb:267:in</code>inject' activesupport\n  (5.1.6) lib/active_support/inflector/methods.rb:267:in <code>constantize'\n  activesupport (5.1.6) lib/active_support/dependencies.rb:583:in</code>get'\n  activesupport (5.1.6) lib/active_support/dependencies.rb:614:in\n  <code>constantize' actionpack (5.1.6)\n  lib/action_dispatch/http/request.rb:85:in</code>controller_class_for'\n  actionpack (5.1.6) lib/action_dispatch/http/parameters.rb:99:in\n  <code>binary_params_for?' actionpack (5.1.6)\n  lib/action_dispatch/http/parameters.rb:90:in</code>set_binary_encoding'\n  actionpack (5.1.6) lib/action_dispatch/http/parameters.rb:67:in\n  <code>path_parameters=' actionpack (5.1.6)\n  lib/action_dispatch/journey/router.rb:48:in</code>block in serve'\n  actionpack (5.1.6) lib/action_dispatch/journey/router.rb:33:in <code>each'\n  actionpack (5.1.6) lib/action_dispatch/journey/router.rb:33:in</code>serve'\n  actionpack (5.1.6) lib/action_dispatch/routing/route_set.rb:844:in\n  <code>call' warden (1.2.7) lib/warden/manager.rb:36:in</code>block in call'\n  warden (1.2.7) lib/warden/manager.rb:35:in <code>catch' warden (1.2.7)\n  lib/warden/manager.rb:35:in</code>call' rack (2.0.5) lib/rack/etag.rb:25:in\n  <code>call' rack (2.0.5) lib/rack/conditional_get.rb:38:in</code>call' rack\n  (2.0.5) lib/rack/head.rb:12:in <code>call' activerecord (5.1.6)\n  lib/active_record/migration.rb:556:in</code>call' actionpack (5.1.6)\n  lib/action_dispatch/middleware/callbacks.rb:26:in <code>block in call'\n  activesupport (5.1.6) lib/active_support/callbacks.rb:97:in\n  </code>run_callbacks' actionpack (5.1.6)\n  lib/action_dispatch/middleware/callbacks.rb:24:in <code>call' actionpack\n  (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in</code>call'\n  actionpack (5.1.6)\n  lib/action_dispatch/middleware/debug_exceptions.rb:59:in <code>call'\n  actionpack (5.1.6)\n  lib/action_dispatch/middleware/show_exceptions.rb:31:in</code>call'\n  railties (5.1.6) lib/rails/rack/logger.rb:36:in <code>call_app' railties\n  (5.1.6) lib/rails/rack/logger.rb:24:in</code>block in call' activesupport\n  (5.1.6) lib/active_support/tagged_logging.rb:69:in <code>block in tagged'\n  activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in\n  </code>tagged' activesupport (5.1.6)\n  lib/active_support/tagged_logging.rb:69:in <code>tagged' railties (5.1.6)\n  lib/rails/rack/logger.rb:24:in</code>call' actionpack (5.1.6)\n  lib/action_dispatch/middleware/remote_ip.rb:79:in <code>call' request_store\n  (1.4.1) lib/request_store/middleware.rb:19:in</code>call' actionpack\n  (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in <code>call' rack\n  (2.0.5) lib/rack/runtime.rb:22:in</code>call' activesupport (5.1.6)\n  lib/active_support/cache/strategy/local_cache_middleware.rb:27:in\n  <code>call' actionpack (5.1.6)\n  lib/action_dispatch/middleware/executor.rb:12:in</code>call' actionpack\n  (5.1.6) lib/action_dispatch/middleware/static.rb:125:in <code>call' rack\n  (2.0.5) lib/rack/sendfile.rb:111:in</code>call' rack-cors (1.0.2)\n  lib/rack/cors.rb:97:in <code>call' railties (5.1.6)\n  lib/rails/engine.rb:522:in</code>call' puma (3.11.4)\n  lib/puma/configuration.rb:225:in <code>call' puma (3.11.4)\n  lib/puma/server.rb:632:in</code>handle_request' puma (3.11.4)\n  lib/puma/server.rb:446:in <code>process_client' puma (3.11.4)\n  lib/puma/server.rb:306:in</code>block in run' puma (3.11.4)\n  lib/puma/thread_pool.rb:120:in `block in spawn_thread'</p>\n  \n  <p>TypeError (superclass mismatch for class SessionsController):</p>\n  \n  <p>app/controllers/overrides/sessions_controller.rb:1:in `'</p>\n</blockquote>\n\n<p>/overrides/sessions_controller.rb:</p>\n\n<pre><code>class SessionsController &lt; DeviseTokenAuth::ApplicationController\n\n  def resource_data(opts = {})\n    opts[:resource_json] || @resource.as_json\n  end\n\n  def render_new_error\n    render json: {\n      errors: [I18n.t(\"devise_token_auth.sessions.not_supported\")]\n    }, status: 405\n  end\n\n  def render_create_success\n    render json: {\n      sponsor: resource_data(resource_json: @resource.userable.token_validation_response)\n    }\n  end\n\n  def render_create_error_not_confirmed\n    render json: {\n      errors: [I18n.t(\"devise_token_auth.sessions.not_confirmed\", login: @resource.login)]\n    }, status: 404\n  end\n\n  def render_create_error_bad_credentials\n    render json: {\n      errors: [I18n.t(\"devise_token_auth.sessions.bad_credentials\")]\n    }, status: 402\n  end\n\n  def render_destroy_success\n    render json: {\n    }, status: 200\n  end\n\n  def render_destroy_error\n    render json: {\n      errors: [I18n.t(\"devise_token_auth.sessions.user_not_found\")]\n    }, status: 404\n  end\n</code></pre>\n\n<p>end</p>\n\n<p>application_controller.rb:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::API\n  include DeviseTokenAuth::Concerns::SetUserByToken\nend\n</code></pre>\n\n<p>routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n  mount_devise_token_auth_for 'User', at: 'auth', controllers: {\n    sessions:  'overrides/sessions'\n  }\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ngrok"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 2738058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacefb5ac4bd9ccfd630473952d807ff?s=128&d=identicon&r=PG&f=1", "display_name": "user2738058", "link": "https://stackoverflow.com/users/2738058/user2738058"}, "is_accepted": false, "score": 0, "last_activity_date": 1617866634, "creation_date": 1617866634, "answer_id": 66999126, "question_id": 51719347, "link": "https://stackoverflow.com/questions/51719347/ngrok-outgoing-requests/66999126#66999126", "title": "Ngrok outgoing requests", "body": "<p>You're looking for a proxy, not a reverse proxy like ngrok.</p>\n<p>ngrok can forward requests to your development server but it isn't involved with outgoing requests from your development server.</p>\n<p>Alternatively if you control the server you're looking to reach from your development server, you could have ngrok act as a reverse proxy on behalf of that server and proxy your requests through ngrok with IP whitelisted tunnel authentication.</p>\n"}], "owner": {"reputation": 856, "user_id": 6018313, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/krXMH.jpg?s=128&g=1", "display_name": "Kevin Etore", "link": "https://stackoverflow.com/users/6018313/kevin-etore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1617866634, "creation_date": 1533619413, "last_edit_date": 1533619718, "question_id": 51719347, "link": "https://stackoverflow.com/questions/51719347/ngrok-outgoing-requests", "title": "Ngrok outgoing requests", "body": "<p>I'm using <a href=\"https://ngrok.com/\" rel=\"nofollow noreferrer\">Ngrok</a> to forward my development env. I've added <a href=\"https://ngrok.com/docs#custom-domains\" rel=\"nofollow noreferrer\">custom domains (white label URLs)</a> and configured the CNAME (example: mycustomdomain.com). I need to request some server with url (example: a.com/whitelisted). The server has a whitelisting where multiple url's are being stored (this list also contains our mycustomdomain.com), the server checks each incoming request with the whitelisting document and the certificate.</p>\n\n<p>So basically we want something like this: </p>\n\n<pre><code>                                                          XXXXXXX\n                                                         X        X\n+--------+              +------------+                  XX        XX\n|        |              |            |                 XX          XX\n|        ---------------&gt;            | -------------&gt; X   Internet   X\n|        |              |            |                X              X\n+--------+              +------------+                 XX           XX\n                                                        XX        XX\n localhost                Ngrok server                     X     X\n                                                           XXXXXXX\n</code></pre>\n\n<p>Now I figured out that we can do something like <a href=\"https://ngrok.com/docs#tls\" rel=\"nofollow noreferrer\">this</a> with Ngrok:\n<code>./ngrok tls -region=eu -hostname=mycustomdomain.com -key mykey.key -crt mycert.crt 3005</code></p>\n\n<p>But I'm not quite sure regarding the outgoing request to the server, because for example I can't just make a simple HTTP request, because that will come from my development env and not from the Ngrok with all the configured/required stuff. Does anyone have experience with such use case?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "elixir", "sidekiq"], "comments": [{"owner": {"reputation": 9139, "user_id": 773228, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/baaecdda322cf4462a0dd018d7959b1e?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Wood", "link": "https://stackoverflow.com/users/773228/justin-wood"}, "edited": false, "score": 0, "creation_date": 1533617563, "post_id": 51718600, "comment_id": 90398875, "body": "The number of simultaneous jobs depends on a couple different things. How many cores does your CPU have? How much time is spent waiting on IO to happen? This is just something you are going to need to test and find the sweet spot. In general, you can spawn millions of process in Erlang/Elixir. Best approach would be to spin up a pool of workers. Maybe look at poolboy?"}, {"owner": {"reputation": 1499, "user_id": 526514, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/511274e57d0d546ed59b3d023bf5513a?s=128&d=identicon&r=PG", "display_name": "Ivan Yurov", "link": "https://stackoverflow.com/users/526514/ivan-yurov"}, "edited": false, "score": 0, "creation_date": 1533673447, "post_id": 51718600, "comment_id": 90430486, "body": "Poolboy is alright, but you&#39;ll need more that that to actually manage the queues of events. I would definitely recommend Flow (or GenStage if you need finer control of what exactly each stage does)."}], "answers": [{"tags": [], "owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "is_accepted": true, "score": 0, "last_activity_date": 1533638273, "creation_date": 1533638273, "answer_id": 51724728, "question_id": 51718600, "link": "https://stackoverflow.com/questions/51718600/replacing-sidekiq-jobs-with-elixir-how-can-i-learn-about-concurrency/51724728#51724728", "title": "Replacing sidekiq jobs with Elixir: how can I learn about concurrency?", "body": "<p>You can find some numbers in <a href=\"http://erlang.org/doc/efficiency_guide/advanced.html\" rel=\"nofollow noreferrer\">Erlang Efficiency Guide</a>.</p>\n\n<p>Specifically,</p>\n\n<blockquote>\n  <p>The maximum number of simultaneously alive Erlang processes is by\n  default 262,144. This limit can be configured at startup. For more\n  information, see the +P command-line flag in the erl(1) manual page in\n  ERTS.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>The maximum number of simultaneously open Erlang ports is often by\n  default 16,384. This limit can be configured at startup. For more\n  information, see the +Q command-line flag in the erl(1) manual page in\n  ERTS.</p>\n</blockquote>\n\n<p>Of course, these numbers may not be directly relevant depending on your system's design. As @Justin Wood mentioned you should have some kind of task pipeline in place.</p>\n\n<p>Also, take a look at <a href=\"https://github.com/akira/exq\" rel=\"nofollow noreferrer\">exq</a> which is a Job processing library for Elixir, compatible with Sidekiq. It might make your implementation simpler.</p>\n"}], "owner": {"reputation": 4981, "user_id": 705725, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3oNDr.jpg?s=128&g=1", "display_name": "dsp_099", "link": "https://stackoverflow.com/users/705725/dsp-099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 51724728, "answer_count": 1, "score": 0, "last_activity_date": 1533638273, "creation_date": 1533614077, "question_id": 51718600, "link": "https://stackoverflow.com/questions/51718600/replacing-sidekiq-jobs-with-elixir-how-can-i-learn-about-concurrency", "title": "Replacing sidekiq jobs with Elixir: how can I learn about concurrency?", "body": "<p>I have two workers currently plowing through spikes of thousands and thousands of jobs which essentially amount to \"open a telnet connection, send some data, read some data, close\"</p>\n\n<p>I've been exploring Elixir and I'm rebuilding an app I know and understand.</p>\n\n<p>How can I find out how many simultaneous \"jobs\" (think: elixir functions returning a boolean) can I spin up at the same time?</p>\n\n<p>In fact, how many open ports are possible on, say, Ubuntu? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "receipt"], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "edited": false, "score": 0, "creation_date": 1533616330, "post_id": 51718618, "comment_id": 90398513, "body": "Does it print the button also doesn&#39;t it? When I tested &quot;window.print&quot; on w3c I saw it print all page including button. <a href=\"https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_print\" rel=\"nofollow noreferrer\">w3schools.com/jsref/tryit.asp?filename=tryjsref_print</a>. And in receipt client don&#39;t want to see that button obviously"}], "tags": [], "owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "is_accepted": false, "score": -1, "last_activity_date": 1533614311, "creation_date": 1533614311, "answer_id": 51718618, "question_id": 51718044, "link": "https://stackoverflow.com/questions/51718044/is-there-any-lib-for-website-connect-to-printer/51718618#51718618", "title": "is there any lib for website connect to printer?", "body": "<p>I see this as a JavaScript solution rather than a Rails one. Like you have said, you have to generate an PDF, and then you can do something like this.</p>\n\n<pre><code>&lt;%= link_to 'Print_the_PDF', '#', :onclick =&gt; 'window.print();return false;'%&gt;\n</code></pre>\n"}], "owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1533614311, "creation_date": 1533609477, "question_id": 51718044, "link": "https://stackoverflow.com/questions/51718044/is-there-any-lib-for-website-connect-to-printer", "title": "is there any lib for website connect to printer?", "body": "<p>I am using ruby 2.3.3 and rails 5. Can you instruct me the way to print receipt in printer. I had an idea that I just build a pdf-page then use function \"print\" of browser. But if you have any great solution for this problem, please share with me.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "edited": false, "score": 0, "creation_date": 1565268497, "post_id": 51719233, "comment_id": 101305932, "body": "<i>Storing session contents somewhere other than a cookie is somewhat unusual, now that session cookies are encrypted as well as tamper-proof</i>. Does it prevent from <a href=\"https://en.wikipedia.org/wiki/Replay_attack\" rel=\"nofollow noreferrer\">session replay attacks</a> ?"}, {"owner": {"reputation": 1648, "user_id": 1610548, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1572f89ae593aefced85b8494479098?s=128&d=identicon&r=PG", "display_name": "rept", "link": "https://stackoverflow.com/users/1610548/rept"}, "edited": false, "score": 1, "creation_date": 1590155944, "post_id": 51719233, "comment_id": 109581428, "body": "&quot;Storing session contents somewhere other than a cookie is somewhat unusual, now that session cookies are encrypted as well as tamper-proof, but it&#39;s not rare.&quot; It allows you display where a user is logged in as well as invalidate (logout) signed in sessions."}], "tags": [], "owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "is_accepted": true, "score": 2, "last_activity_date": 1533618778, "creation_date": 1533618778, "answer_id": 51719233, "question_id": 51717865, "link": "https://stackoverflow.com/questions/51717865/using-different-redis-stores-for-session-and-caching-in-rails-5/51719233#51719233", "title": "Using different redis stores for session and caching in Rails 5", "body": "<p>To separately configure your session store to use Redis, you'll need to use a gem that provides a Redis session store: either <code>redis-store</code> (note <code>redis-activesupport</code> is deprecated, but <code>redis-actionpack</code> is not), or <code>redis-session-store</code>.</p>\n\n<p>You can't configure the session storage separately while using the <code>:cache_store</code> session store, because that stores sessions <em>in the actual cache</em>... it's not just \"cache-like\" storage, so it can't override / behave differently from the cache itself.</p>\n\n<p>Storing session contents somewhere other than a cookie is <em>somewhat</em> unusual, now that session cookies are encrypted as well as tamper-proof, but it's not rare. If you're going to, Redis is a good choice.</p>\n"}], "owner": {"reputation": 1075, "user_id": 3788114, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1738862bbad9bd9d43cd5a4bf940ed2e?s=128&d=identicon&r=PG", "display_name": "codematix", "link": "https://stackoverflow.com/users/3788114/codematix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1475, "favorite_count": 1, "accepted_answer_id": 51719233, "answer_count": 1, "score": 0, "last_activity_date": 1533618778, "creation_date": 1533607931, "question_id": 51717865, "link": "https://stackoverflow.com/questions/51717865/using-different-redis-stores-for-session-and-caching-in-rails-5", "title": "Using different redis stores for session and caching in Rails 5", "body": "<p>I am a newbie to Ruby and Rails. I am building a web application using Ruby on Rails 5.2. I have configured it to use the <code>redis-cache-store</code> to manage the view caching:</p>\n\n<pre><code>config.cache_store = :redis_cache_store, { driver: :hiredis, namespace: \"my-app\", compress: true, url: ENV[\"REDIS_URL\"] }\n</code></pre>\n\n<p>And I have configured my session storage as:</p>\n\n<pre><code>Rails.application.config.session_store :cache_store, {\n  key: \"sid\",\n  expire_after: 30.minutes\n}\n</code></pre>\n\n<p>So here I am using the <code>:cache_store</code> as my session store. As far as I understand, this means the entries for the view cache and the session data are stored in the same Redis database.</p>\n\n<p>From what I understand, the <code>redis-rails</code> gem is no longer required if using Rails 5.2 as there is a built-in support for redis - <a href=\"https://github.com/redis-store/redis-rails#a-quick-note-about-rails-52\" rel=\"nofollow noreferrer\">https://github.com/redis-store/redis-rails#a-quick-note-about-rails-52</a>. Hence, I have not used that gem.</p>\n\n<p>Is there a way to use a different redis store for sessions and different one for view caching?</p>\n\n<p>Or am I trying to do something which is unusual in Rails-land?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "parameters", "actioncontroller"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1533608073, "post_id": 51717649, "comment_id": 90396725, "body": "Paramus mutt be nested into <code>:animal =&gt;</code> Try <code>form_for @animal do</code> and under <code>def new</code> in controller <code>@animal = Animal.new</code>"}], "answers": [{"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1533607824, "post_id": 51717824, "comment_id": 90396674, "body": "<i>scratching my head</i>... isn&#39;t that line commented out?"}, {"owner": {"reputation": 932, "user_id": 859327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzLwG.jpg?s=128&g=1", "display_name": "Abubakar", "link": "https://stackoverflow.com/users/859327/abubakar"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1533607947, "post_id": 51717824, "comment_id": 90396698, "body": "yes it is commented out, but I think she is inspecting/logging the params by uncommenting the line. And if she does uncomment the line as it is it will give <code>permitted: false</code>"}, {"owner": {"reputation": 932, "user_id": 859327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzLwG.jpg?s=128&g=1", "display_name": "Abubakar", "link": "https://stackoverflow.com/users/859327/abubakar"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1533608089, "post_id": 51717824, "comment_id": 90396728, "body": "I fell for the same trap, creation was working fine but on inspection, permission was failed :)"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1533713635, "post_id": 51717824, "comment_id": 90441978, "body": "<code>params[:animal_params].inspect</code> OR <code>animal_params.inspect</code>?"}], "tags": [], "owner": {"reputation": 932, "user_id": 859327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzLwG.jpg?s=128&g=1", "display_name": "Abubakar", "link": "https://stackoverflow.com/users/859327/abubakar"}, "is_accepted": false, "score": 0, "last_activity_date": 1533714220, "last_edit_date": 1533714220, "creation_date": 1533607630, "answer_id": 51717824, "question_id": 51717649, "link": "https://stackoverflow.com/questions/51717649/ruby-on-rails-new-params-keep-showing-as-permitted-false/51717824#51717824", "title": "Ruby on Rails: new params keep showing as &quot;permitted: false&quot;", "body": "<p>Problem is with this line <code>render plain: params[:animal].inspect</code>\nbecause you are printing/accessing params directly without permission instead use <code>:animal_params</code></p>\n\n<pre><code>render plain: animal_params.inspect\n</code></pre>\n\n<p>this lines  <code>@animal = Animal.new(animal_params)</code> is fine. I guess your creating process works perfectly only.</p>\n"}, {"tags": [], "owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "is_accepted": false, "score": 0, "last_activity_date": 1533608743, "creation_date": 1533608743, "answer_id": 51717945, "question_id": 51717649, "link": "https://stackoverflow.com/questions/51717649/ruby-on-rails-new-params-keep-showing-as-permitted-false/51717945#51717945", "title": "Ruby on Rails: new params keep showing as &quot;permitted: false&quot;", "body": "<p>Your params should look like</p>\n\n<pre><code>&lt;ActionController::Parameters {\"animal\" =&gt; {\"name\"=&gt;\"cat\", \"scientific_name\"=&gt;\"Felis catus\", \"range\"=&gt;\"land\"} } permitted: false&gt;\n</code></pre>\n\n<p>Also, in the form, can you change <code>:animal to @animal.</code></p>\n\n<p>Alternatively, you can try this</p>\n\n<pre><code>params.require(:animal).permit(:name, :scientific_name, :range).permitted?\n</code></pre>\n"}], "owner": {"reputation": 1512, "user_id": 5513336, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/bc7pn.jpg?s=128&g=1", "display_name": "Leia_Organa", "link": "https://stackoverflow.com/users/5513336/leia-organa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1496, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1533714220, "creation_date": 1533605890, "question_id": 51717649, "link": "https://stackoverflow.com/questions/51717649/ruby-on-rails-new-params-keep-showing-as-permitted-false", "title": "Ruby on Rails: new params keep showing as &quot;permitted: false&quot;", "body": "<p>I've been writing a new RoR app for practice. This is a basic app that is supposed to function as a lookup page for animals.</p>\n\n<p>I've been working on the Create/New functions in the controller for my page. I would like to make it so that a user can enter in an animal, and have the animal save to the SQL database. Afterwards, the page should redirect to the newly created animal page.</p>\n\n<p>Here's my animals_controller.rb:</p>\n\n<pre><code>class AnimalsController &lt; ApplicationController\n  def index\n    @animals = Animal.all\n  end\n\n  def show\n    @animal = Animal.find(params[:id])\n  end\n\n  def new\n  end\n\n  def create\n    # render plain: params[:animal].inspect\n    @animal = Animal.new(animal_params)\n\n    @animal.save\n\n     redirect_to @animal\n  end\n\n  private def animal_params\n    params.require(:animal).permit(:name, :scientific_name, :range)\n  end\n\nend\n</code></pre>\n\n<p>Here is my views/animals/new.html.erb:</p>\n\n<pre><code>&lt;h1&gt; Add Animal &lt;/h1&gt;\n\n&lt;%= form_for :animal, url: animals_path do |f| %&gt;\n    &lt;p&gt;\n    &lt;%= f.label :name %&gt; &lt;br&gt;\n    &lt;%= f.text_field :name %&gt;\n    &lt;/p&gt;\n\n    &lt;p&gt;\n    &lt;%= f.label :scientific_name %&gt; &lt;br&gt;\n    &lt;%= f.text_field :scientific_name %&gt; \n    &lt;/p&gt;\n\n    &lt;p&gt;\n    &lt;%= f.label :range %&gt; &lt;br&gt;\n    &lt;%= f.select :range, ['land', 'sea', 'sky', 'underground'], :prompt =&gt; 'Select One' %&gt;\n    &lt;/p&gt;\n\n    &lt;p&gt;\n    &lt;%= f.submit %&gt;\n    &lt;p&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>When I try to enter in a new animal, here is what I get:</p>\n\n<pre><code>&lt;ActionController::Parameters {\"name\"=&gt;\"cat\", \"scientific_name\"=&gt;\"Felis catus\", \"range\"=&gt;\"land\"} permitted: false&gt;\n</code></pre>\n\n<p>I'm wondering why I keep getting \"permitted:false\" when I have code in animals_controller.rb that states that these params are permitted! Can anyone point out anything or give me some suggestions?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "sqlite", "rails-console"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533606451, "post_id": 51717586, "comment_id": 90396431, "body": "This seems &quot;impossible&quot;. What OS is this? What SQLite version (use the <code>.version</code> command for example)?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533606593, "post_id": 51717586, "comment_id": 90396454, "body": "Are you typing <code>.select</code>, with a preceding dot, or <code>select</code>, without a dot? You should not type a preceding dot for any SQL command. Only SQLite-specific commands are preceded by dots."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1533635132, "post_id": 51717586, "comment_id": 90407707, "body": "If you&#39;re interested in the table structure for a Rails project, the <a href=\"https://github.com/brentgreeff/annotate\" rel=\"nofollow noreferrer\">Annotate</a> gem is really handy to see what&#39;s going on. Might be this isn&#39;t what you want at all, but think there&#39;s a chance it could be handy for ya."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1533636599, "post_id": 51717586, "comment_id": 90408584, "body": "Are you getting this error for all the tables in your DB?"}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 5348901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l0uim.jpg?s=128&g=1", "display_name": "Milind Patel", "link": "https://stackoverflow.com/users/5348901/milind-patel"}, "is_accepted": false, "score": 1, "last_activity_date": 1533638379, "creation_date": 1533638379, "answer_id": 51724765, "question_id": 51717586, "link": "https://stackoverflow.com/questions/51717586/rails-how-can-i-view-my-sqlite-tables/51724765#51724765", "title": "Rails - how can I view my SQLite tables?", "body": "<p>You can use DB browser for SQLite <a href=\"https://sqlitebrowser.org/\" rel=\"nofollow noreferrer\">https://sqlitebrowser.org/</a> to view and manage SQLite database tables.  </p>\n"}], "owner": {"reputation": 1512, "user_id": 5513336, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/bc7pn.jpg?s=128&g=1", "display_name": "Leia_Organa", "link": "https://stackoverflow.com/users/5513336/leia-organa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1391, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533638379, "creation_date": 1533605080, "question_id": 51717586, "link": "https://stackoverflow.com/questions/51717586/rails-how-can-i-view-my-sqlite-tables", "title": "Rails - how can I view my SQLite tables?", "body": "<p>I would think that there would be more information on this particular topic, but here goes -- I need to be able to see what my SQLite tables in my Rails app look like. I've tried a lot of the suggestions I've seen online, but they all give me errors, or I'm not using the right commands.</p>\n\n<p>Here's what I've been trying</p>\n\n<pre><code>rails db \n</code></pre>\n\n<p>(goes into sqlite db)</p>\n\n<pre><code>sqlite&gt;.table\n</code></pre>\n\n<p>(shows relevant table)</p>\n\n<pre><code>sqlite&gt;select * from table1;\n</code></pre>\n\n<p>Receive error:</p>\n\n<pre><code>Error: unknown command or invalid arguments:  \"select\". Enter \".help\" for help\n</code></pre>\n\n<p>I've been trying to figure out why this won't work, but I'm a bit stumped.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "activerecord", "arel"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533604217, "post_id": 51717283, "comment_id": 90396032, "body": "Couldn&#39;t you say <code>Test::Table.where(&#39;spec_type::text like ?&#39;, &#39;%NewProd%&#39;)</code> and avoid AREL? Am I missing something?"}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533610713, "post_id": 51717283, "comment_id": 90397301, "body": "Ya I could but then doesn&#39;t that open me up to an SQL injection attack? Cause it seems to be Arel quotes the data by default and I don&#39;t know how to secure your query as written above"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533612072, "post_id": 51717283, "comment_id": 90397555, "body": "No, ActiveRecord will properly quote the placeholder&#39;s value when it builds the SQL."}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533655998, "post_id": 51717283, "comment_id": 90421744, "body": "Oh really awesome thanks, could you explain a little more how that helps?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533656596, "post_id": 51717283, "comment_id": 90422135, "body": "It helps by avoiding AREL? Maybe it is just me but I find AREL-based code to be an incomprehensible mess."}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533656670, "post_id": 51717283, "comment_id": 90422190, "body": "The only problem with the non arel query is I am not able to export with just a single quote &#39; like I was with the arel implementation"}], "owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 495, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1533601998, "creation_date": 1533601998, "question_id": 51717283, "link": "https://stackoverflow.com/questions/51717283/where-query-with-rails-arel-table-that-matches-to-an-enum-how-to-force-query", "title": "&#39;Where&#39; Query with Rails Arel Table That Matches to an Enum (How to force query as type text)", "body": "<p>I am trying to use an arel table to match all instances of a column in my table that match a regular expression. This works easily with strings but when the search field is an enum it does not work. </p>\n\n<p>My code for querying my database is as follows: </p>\n\n<pre><code>res = Test::Table\narel_tbl = res.arel_table[\"spec_type\"].parameterize.underscore.to_sym\nres = res.where(arel_tbl.matches(\"%#NewProd%\"))\n</code></pre>\n\n<p>So with the above code the query works if my \"spec_type\" column contains values of type string, but in my instance all of the values under that column are enums, so I need to convert them to text to compare against the regular expression. </p>\n\n<p>An example of an ActiveRecord query that works this way can be seen below:</p>\n\n<pre><code>Test::Table.where(\"spec_type::text like '%NewProd%'\")\n</code></pre>\n\n<p>So this query works because I force spec_type to be of type text which allows my SQL query to call LIKE against the regular expression. How can I get the same sort of functionality with an arel table? I want the arel table because it auto quotes my data. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1533624192, "post_id": 51716927, "comment_id": 90401348, "body": "How do you models look? Put a <code>binding.pry</code> right before <code>Cart.includes(line_items: :product).find(params[:id])</code> and run it manually in the console. What do you get?"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1533629475, "post_id": 51716927, "comment_id": 90404207, "body": "Do you get a larger error trace when you run the tests? If so, it would be great if you could pop that in your question to help identify the source. One simple thing to try: run <code>rails db:test:prepare</code>. It could be your <code>includes</code> is looking at tables not available to the test env."}, {"owner": {"reputation": 11, "user_id": 10189128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a2aad16bca140c45f8a48729f95653?s=128&d=identicon&r=PG&f=1", "display_name": "Mardok", "link": "https://stackoverflow.com/users/10189128/mardok"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1533638939, "post_id": 51716927, "comment_id": 90410091, "body": "@SRack : no, the error trace is just that.. I&#180;ve tried with rails db:test:prepare but its the same, nothing change. There&#39;s a way to see why it gives the &lt;500: Internal Server Error&gt;  ??"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1533639329, "post_id": 51716927, "comment_id": 90410315, "body": "Yep, go with @DennyMueller&#39;s approach - use a debugger like <a href=\"https://github.com/rweng/pry-rails\" rel=\"nofollow noreferrer\">Pry</a> and run the line. That way you&#39;ll get a full trace that will give an idea what&#39;s going on. Give that a shot and update the answer if the trace if you&#39;re still stuck (feel free to @ me when you&#39;ve done that).   Hope it helps!"}, {"owner": {"reputation": 11, "user_id": 10189128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a2aad16bca140c45f8a48729f95653?s=128&d=identicon&r=PG&f=1", "display_name": "Mardok", "link": "https://stackoverflow.com/users/10189128/mardok"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1533684487, "post_id": 51716927, "comment_id": 90434062, "body": "@SRack I&#39;m sorry. I&#39;ve been watching all the day tutorial about binding.pry but I can not understand what I&#180;ve exactly to do to find the source of &lt;500: Internal Server Error&gt;.. I&#180;ve navigate with &quot;step&quot; or &quot;next&quot; to try to find something but its just impossible to understand.. some advice? -&gt; I&#180;ve update the topic with something I found in the test.log, maybe its helpful."}, {"owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1533708771, "post_id": 51716927, "comment_id": 90439403, "body": "@Mardok Put a binding.pry right before <code>Cart.includes(line_items: :product).find(params[:id])</code> and run that line manually in the console. What do you get?"}], "owner": {"reputation": 11, "user_id": 10189128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a2aad16bca140c45f8a48729f95653?s=128&d=identicon&r=PG&f=1", "display_name": "Mardok", "link": "https://stackoverflow.com/users/10189128/mardok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533684871, "creation_date": 1533598519, "last_edit_date": 1533684871, "question_id": 51716927, "link": "https://stackoverflow.com/questions/51716927/rails-test-failure-500-when-i-use-includes", "title": "Rails test failure 500 when I use .includes", "body": "<p>I'm developing a small e-commerce and I\u00b4ve a problem when I run the tests for my cart controller.</p>\n\n<p>here cart controller</p>\n\n<pre><code>class CartsController &lt; ApplicationController\n  include CurrentCart #modul current_cart in controllers/concerns\n  before_action :set_cart, only: [:show, :edit, :update, :destroy]\n\n  before_action :set_current_cart, only: [:index] \n\n  # GET /carts\n  # GET /carts.json\n  def index\n    respond_to do |format|\n      format.html { redirect_to @cart, notice: 'Line item was successfully created.' }\n      format.json { render :show, status: :created, location: @line_item }\n    end\n  end\n\n  # GET /carts/1\n  # GET /carts/1.json\n  def show\n  end\n\n  # GET /carts/new\n  def new\n    @cart = Cart.new\n  end\n\n  # GET /carts/1/edit\n  def edit\n  end\n\n  # POST /carts\n  # POST /carts.json\n  def create\n    @cart = Cart.new(cart_params)\n\n    respond_to do |format|\n      if @cart.save\n        format.html { redirect_to @cart, notice: 'Cart was successfully created.' }\n        format.json { render :show, status: :created, location: @cart }\n      else\n        format.html { render :new }\n        format.json { render json: @cart.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /carts/1\n  # PATCH/PUT /carts/1.json\n  def update\n    respond_to do |format|\n      if @cart.update(cart_params)\n        format.html { redirect_to @cart, notice: 'Cart was successfully updated.' }\n        format.json { render :show, status: :ok, location: @cart }\n      else\n        format.html { render :edit }\n        format.json { render json: @cart.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /carts/1\n  # DELETE /carts/1.json\n  def destroy\n    @cart.destroy if @cart.id == session[:cart_id]\n    session[:cart_id] = nil\n    respond_to do |format|\n      format.html { redirect_to catalog_index_url, notice: 'Cart was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n  # Use callbacks to share common setup or constraints between actions.\n  def set_cart\n    @cart = Cart.includes(line_items: :product).find(params[:id])\n  end\n\n  # Never trust parameters from the scary internet, only allow the white list through.\n  def cart_params\n    params.fetch(:cart, {})\n  end\nend\n</code></pre>\n\n<p>and here my tests:</p>\n\n<pre><code>require 'test_helper'\n\nclass CartsControllerTest &lt; ActionDispatch::IntegrationTest\n  setup do\n    @line_item = line_items(:one)\n    @product = products(:one)\n    @cart = carts(:one)\n\n  end\n\n  test \"should get index\" do\n\n    get carts_url\n    assert_response :success\n  end\n\n  test \"should get new\" do\n    get new_cart_url\n    assert_response :success\n  end\n\n  test \"should create cart\" do\n    assert_difference('Cart.count') do\n      post carts_url, params: { cart: {} }\n    end\n\n    assert_redirected_to cart_url(Cart.last)\n  end\n\n  test \"should show cart\" do\n    get cart_url(@cart)\n    assert_response :success\n  end\n\n  test \"should get edit\" do\n    get edit_cart_url(@cart)\n    assert_response :success\n  end\n\n  test \"should update cart\" do\n    patch cart_url(@cart), params: { cart: {} }\n    assert_redirected_to cart_url(@cart)\n  end\n\n  test \"should destroy cart\" do\n    post line_items_url, params: { product_id: products(:one).id }\n    @cart = Cart.find(session[:cart_id])\n    assert_difference('Cart.count', -1) do\n      delete cart_url(@cart)\n    end\n    assert_redirected_to catalog_index_url\n  end\nend\n</code></pre>\n\n<p>here the results:</p>\n\n<blockquote>\n  <p>Failure: CartsControllerTest#test_should_destroy_cart  Expected\n  response to be a &lt;3XX: redirect>, but was a &lt;500: Internal Server\n  Error></p>\n  \n  <p>Failure: CartsControllerTest#test_should_get_edit  Expected response\n  to be a &lt;2XX: success>, but was a &lt;500: Internal Server Error></p>\n  \n  <p>Failure: CartsControllerTest#test_should_update_cart  Expected\n  response to be a &lt;3XX: redirect>, but was a &lt;500: Internal Server\n  Error></p>\n</blockquote>\n\n<p>here is the modul current cart for the cartsController:</p>\n\n<pre><code>module CurrentCart\n\n  private\n\n  def set_current_cart\n    @cart = Cart.find(session[:cart_id])\n  rescue ActiveRecord::RecordNotFound\n    @cart = Cart.create\n    session[:cart_id] = @cart.id\n  end\nend\n</code></pre>\n\n<p>I think that the problem is here:\nif I remove this in the method set_cart from the cart controller: .includes(line_items: :product) the tests will run perfectly without failure, but I cannot understand why.\n(I put the include because otherwise I get this error when I access the cart from the browser: </p>\n\n<blockquote>\n  <p>USE eager loading detected   LineItem => [:product]   Add to your\n  finder: :includes => [:product] Call stack</p>\n</blockquote>\n\n<p>UPDATE:</p>\n\n<p>I found something interesting in the file \"test.log\" : </p>\n\n<pre><code>Bullet::Notification::UnoptimizedQueryError - user: claudio\nDELETE /carts/980190963\nAVOID eager loading detected\n  LineItem =&gt; [:product]\n  Remove from your finder: :includes =&gt; [:product]\nCall stack\n  ##here there's a path##.rb:45:in `block (2 levels) in &lt;class:CartsControllerTest&gt;'\n  ##here there's a path##:in `block in &lt;class:CartsControllerTest&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "database"], "comments": [{"owner": {"reputation": 707, "user_id": 733171, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/275p8.jpg?s=128&g=1", "display_name": "Apurva Mayank", "link": "https://stackoverflow.com/users/733171/apurva-mayank"}, "edited": false, "score": 0, "creation_date": 1533620440, "post_id": 51716142, "comment_id": 90399775, "body": "can you check with account.test.empty? or account.test.blank?"}, {"owner": {"reputation": 1, "user_id": 10188426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFETu.jpg?s=128&g=1", "display_name": "Davidede", "link": "https://stackoverflow.com/users/10188426/davidede"}, "reply_to_user": {"reputation": 707, "user_id": 733171, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/275p8.jpg?s=128&g=1", "display_name": "Apurva Mayank", "link": "https://stackoverflow.com/users/733171/apurva-mayank"}, "edited": false, "score": 0, "creation_date": 1533634830, "post_id": 51716142, "comment_id": 90407522, "body": "With account.test.empty? it says:     Traceback (most recent call last): test.rb:17:in <code>&lt;main&gt;&#39;: undefined method </code>blank?&#39; for [nil]:Array (NoMethodError)   With account.test.blank? again &quot;wrong&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10188426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFETu.jpg?s=128&g=1", "display_name": "Davidede", "link": "https://stackoverflow.com/users/10188426/davidede"}, "is_accepted": true, "score": 0, "last_activity_date": 1533639276, "creation_date": 1533639276, "answer_id": 51725065, "question_id": 51716142, "link": "https://stackoverflow.com/questions/51716142/why-does-ruby-kirbybase-doesnt-work-with-if-statement/51725065#51725065", "title": "Why does Ruby Kirbybase doesn&#39;t work with if statement?", "body": "<p>It seems to be strange to answer my own question but I solved the problem: account.test  is an array so the correct form of the if statement is:</p>\n\n<pre><code>if account.test[0].nil?\n puts 'right'\nelse\n puts 'wrong'\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10188426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFETu.jpg?s=128&g=1", "display_name": "Davidede", "link": "https://stackoverflow.com/users/10188426/davidede"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 51725065, "answer_count": 1, "score": 0, "last_activity_date": 1533639276, "creation_date": 1533592408, "question_id": 51716142, "link": "https://stackoverflow.com/questions/51716142/why-does-ruby-kirbybase-doesnt-work-with-if-statement", "title": "Why does Ruby Kirbybase doesn&#39;t work with if statement?", "body": "<p>I recently started using kirbybase in ruby, but I ran into a problem using the if statement with a result set. Here's a semplified code that seems to have this problem:</p>\n\n<pre><code>require 'kirbybase'\n\ndb = KirbyBase.new\nif db.table_exists?(:database)\ndb.drop_table(:database)\nend\n\nlist = db.create_table(:database, :name, :String, :password, :String, :test, :String)\n\nname = 'Test'\npassword = 'abcde'\n\nlist.insert(name, password, nil)\n\naccount = list.select { |r| r.name == name}\n\nif account.test.nil?\n puts 'right'\nelse\n puts 'wrong'\nend\n</code></pre>\n\n<p>Why does it output \"wrong\"?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1533590518, "post_id": 51715556, "comment_id": 90392972, "body": "Or cookies, yes?"}, {"owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1533591660, "post_id": 51715556, "comment_id": 90393337, "body": "@jvillian You got me on that one. I always forget the biscuits."}, {"owner": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "edited": false, "score": 0, "creation_date": 1533625463, "post_id": 51715556, "comment_id": 90401993, "body": "For rails sessions you have multiple options but I believe the most common one is actually the cookie store. Here all session data gets encoded (or encrypted if needed) and stored in the clients browser for later reference. It will be sent with every request so you can access the previously set data in a later request. So the session approach and a plain cookie are not too different."}], "tags": [], "owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "is_accepted": false, "score": 1, "last_activity_date": 1533589206, "creation_date": 1533589206, "answer_id": 51715556, "question_id": 51715455, "link": "https://stackoverflow.com/questions/51715455/how-do-i-make-user-data-persist-from-one-page-to-another-page-without-a-database/51715556#51715556", "title": "How do I make user data persist from one page to another page without a database in Ruby on Rails?", "body": "<p>persistence like this, without a database, and server side, can only be done with sessions. For example, once the first page is submitted, you could do:</p>\n\n<p><code>session[:name] = params[:name]</code></p>\n\n<p>and then in the form on the next page you could use that:</p>\n\n<pre><code>&lt;div class=\"column-two-thirds\"&gt;\n  &lt;h1 class=\"test-label\"&gt;Your name is &lt;%= session[:name] %&gt;&lt;/h1&gt;\n  &lt;button  type=\"submit\" class=\"start-button\" &gt;Continue&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 4345577, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0d030a3cde1453936d79b7924ce39cc4?s=128&d=identicon&r=PG&f=1", "display_name": "HardLeeWorking", "link": "https://stackoverflow.com/users/4345577/hardleeworking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1533589206, "creation_date": 1533588726, "last_edit_date": 1533588925, "question_id": 51715455, "link": "https://stackoverflow.com/questions/51715455/how-do-i-make-user-data-persist-from-one-page-to-another-page-without-a-database", "title": "How do I make user data persist from one page to another page without a database in Ruby on Rails?", "body": "<p>I have a form on one page of my ruby on rails app that takes user entry via a text input field. When the user clicks save and continue I want the next page to display the text entered by the user on the previous page.</p>\n\n<pre><code>      &lt;div class=\"test-group\"&gt;\n        &lt;label class=\"test_label\" for=\"full-name\"&gt;\n          Enter full name\n        &lt;/label&gt;\n        &lt;form action=\"clientname\" method=\"POST\"&gt;\n          &lt;input class = \"test-input\" type=\"text\" name=\"name\" id=\"client-name-entry\"&gt;\n          &lt;br/&gt;\n        &lt;/form&gt;\n      &lt;/div&gt;\n</code></pre>\n\n<p>On the next linked page, accessed via a \"Save and Continue\" button I have the following:</p>\n\n<pre><code>&lt;div class=\"column-two-thirds\"&gt;\n  &lt;h1 class=\"test-label\"&gt;Your name is &lt;%= clientname %&gt;&lt;/h1&gt;\n  &lt;button  type=\"submit\" class=\"start-button\" &gt;Continue&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>How do I get the name to display on the second page, the above gives me the following error:</p>\n\n<pre><code>undefined local variable or method `clientname'\n</code></pre>\n\n<p>I know I need something in my application_controller but I am not sure what that is. Currently it is:</p>\n\n<pre><code>def input_page\n  @client = clientname\nend\n</code></pre>\n\n<p>I need to avoid using a database for now thats why I am trying to just get the data to persist from page to page right now.</p>\n"}, {"tags": ["ruby", "roda"], "comments": [{"owner": {"reputation": 943, "user_id": 3477163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tMQl.jpg?s=128&g=1", "display_name": "supremebeing7", "link": "https://stackoverflow.com/users/3477163/supremebeing7"}, "edited": false, "score": 0, "creation_date": 1533595447, "post_id": 51715264, "comment_id": 90394336, "body": "I don&#39;t know if this is a typo in here or in your app, but you&#39;re requiring <code>backend.rb</code> -- <code>Unreloader.require &#39;.&#47;backend.rb&#39;</code> -- but you&#39;ve labeled the file here as <code>backend.ru</code>"}, {"owner": {"reputation": 55, "user_id": 6762501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HfL8E.jpg?s=128&g=1", "display_name": "mwdowns", "link": "https://stackoverflow.com/users/6762501/mwdowns"}, "reply_to_user": {"reputation": 943, "user_id": 3477163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tMQl.jpg?s=128&g=1", "display_name": "supremebeing7", "link": "https://stackoverflow.com/users/3477163/supremebeing7"}, "edited": false, "score": 0, "creation_date": 1533603130, "post_id": 51715264, "comment_id": 90395876, "body": "Typo. Thanks for pointing it out."}], "answers": [{"tags": [], "owner": {"reputation": 649, "user_id": 1630556, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/fVmI3.jpg?s=128&g=1", "display_name": "Maciej Szlosarczyk", "link": "https://stackoverflow.com/users/1630556/maciej-szlosarczyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1539608263, "creation_date": 1539608263, "answer_id": 52817345, "question_id": 51715264, "link": "https://stackoverflow.com/questions/51715264/simple-roda-app-with-routes-in-separate-files/52817345#52817345", "title": "Simple Roda app with routes in separate files", "body": "<p>It's a bit old, but maybe it will be useful for someone later on.</p>\n\n<p>For Roda, forward slashes are significant. In your example, <code>Greeter.route '/hello' do |r|</code> matches <code>localhost:9292//hello</code>, and not <code>localhost:9292/hello</code>.</p>\n\n<p>You probably want the following:</p>\n\n<pre><code>Greeter.route do |r|\n  r.redirect 'hello'\nend\n</code></pre>\n\n<p>And also this. That nested <code>r.on 'hello' do</code> meant that that branch of the tree only matched <code>localhost:9292/hello/hello</code> and <code>localhost:9292/hello/hello/world</code>, that is probably not what you wanted.</p>\n\n<pre><code>Greeter.route 'hello' do |r|\n  puts 'hello'\n  @greeting = 'helloooooooo'\n\n  r.get 'world' do\n    @greeting = 'hola'\n    \"#{@greeting} world!\"\n  end\n\n  r.is do\n    r.get do\n      \"#{@greeting}!\"\n    end\n\n    r.post do\n      puts \"Someone said #{@greeting}!\"\n      r.redirect\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6762501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HfL8E.jpg?s=128&g=1", "display_name": "mwdowns", "link": "https://stackoverflow.com/users/6762501/mwdowns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 446, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539608263, "creation_date": 1533587661, "last_edit_date": 1592644375, "question_id": 51715264, "link": "https://stackoverflow.com/questions/51715264/simple-roda-app-with-routes-in-separate-files", "title": "Simple Roda app with routes in separate files", "body": "<p>I'm trying to learn Roda and am having a bit of trouble moving into a style of separating out routes into their own files. I got the simple app from the Roda README running and am working on that as a base.</p>\n<p>I am trying to use the multi_route plugin as well. So far, this is my setup:</p>\n<h1>config.ru</h1>\n<pre><code>require 'rack/unreloader'\nUnreloader = Rack::Unreloader.new { Greeter }\nrequire 'roda'\nUnreloader.require './backend.rb'\nrun Unreloader\n</code></pre>\n<h1>backend.rb</h1>\n<pre><code>require 'roda'\n# Class Roda app\nclass Greeter &lt; Roda\n  puts 'hey'\n  plugin :multi_route\n\n  puts 'hey hey hey'\n  route(&amp;:multi_route)\nend\n\nDir['./routes/*.rb'].each { |f| require f }\n</code></pre>\n<h1>index.rb</h1>\n<pre><code>Greeter.route '/' do |r|\n  r.redirect 'hello'\nend\n</code></pre>\n<h1>hello.rb</h1>\n<pre><code>Greeter.route '/hello' do |r|\n  r.on 'hello' do\n    puts 'hello'\n    @greeting = 'helloooooooo'\n\n    r.get 'world' do\n      @greeting = 'hola'\n      &quot;#{@greeting} world!&quot;\n    end\n\n    r.is do\n      r.get do\n        &quot;#{@greeting}!&quot;\n      end\n\n      r.post do\n        puts &quot;Someone said #{@greeting}!&quot;\n        r.redirect\n      end\n    end\n  end\nend\n</code></pre>\n<p>So, now when I do my rackup config.ru and go to localhost:9292 in my browser, I get a blank page and 404s in the console. What is out of place? I suspect I'm not using multi_route correctly, but I'm not sure.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533587562, "post_id": 51714994, "comment_id": 90391819, "body": "What do you see with <code>assert_select &quot;1 x Programming Ruby 1.9&#39;&#39;</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 320, "user_id": 6501234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e980b8b7894381f8d85eb060b7b0cbf?s=128&d=identicon&r=PG", "display_name": "Corey Gibson", "link": "https://stackoverflow.com/users/6501234/corey-gibson"}, "edited": false, "score": 1, "creation_date": 1533597854, "post_id": 51716652, "comment_id": 90394855, "body": "I found my issue I needed double quotes for the \\u00d7"}, {"owner": {"reputation": 943, "user_id": 3477163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tMQl.jpg?s=128&g=1", "display_name": "supremebeing7", "link": "https://stackoverflow.com/users/3477163/supremebeing7"}, "reply_to_user": {"reputation": 320, "user_id": 6501234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e980b8b7894381f8d85eb060b7b0cbf?s=128&d=identicon&r=PG", "display_name": "Corey Gibson", "link": "https://stackoverflow.com/users/6501234/corey-gibson"}, "edited": false, "score": 0, "creation_date": 1533665530, "post_id": 51716652, "comment_id": 90426682, "body": "Glad to hear it! You may want to add an answer and accept it, since mine was not so helpful."}], "tags": [], "owner": {"reputation": 943, "user_id": 3477163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tMQl.jpg?s=128&g=1", "display_name": "supremebeing7", "link": "https://stackoverflow.com/users/3477163/supremebeing7"}, "is_accepted": false, "score": 1, "last_activity_date": 1533596047, "creation_date": 1533596047, "answer_id": 51716652, "question_id": 51714994, "link": "https://stackoverflow.com/questions/51714994/rails-5-1-4-assert-select-li-is-only-checking-for-first-li/51716652#51716652", "title": "rails 5.1.4 assert_select &#39;li&#39;, is only checking for first li", "body": "<p>I'm not familiar with the book, but from the <a href=\"https://apidock.com/rails/ActionController/Assertions/SelectorAssertions/assert_select\" rel=\"nofollow noreferrer\"><code>assert_select</code> docs</a>, it sounds like it's working as intended:</p>\n\n<blockquote>\n  <p>If the first argument is an element, selects all matching elements starting from (and including) that element and all its <strong>children</strong> in depth-first order.\n  <em>(Emphasis mine)</em></p>\n</blockquote>\n\n<p>Since \"Home\" is inside a separate <code>ul</code> parent, I'm not sure, but I suspect it can't find the correct <code>li</code>. Try this:</p>\n\n<pre><code>assert_select 'ul' do\n  assert_select 'li', '1 \\u00d7 Programming Ruby 1.9'\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 6501234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e980b8b7894381f8d85eb060b7b0cbf?s=128&d=identicon&r=PG", "display_name": "Corey Gibson", "link": "https://stackoverflow.com/users/6501234/corey-gibson"}, "is_accepted": true, "score": 1, "last_activity_date": 1545226559, "creation_date": 1545226559, "answer_id": 53852409, "question_id": 51714994, "link": "https://stackoverflow.com/questions/51714994/rails-5-1-4-assert-select-li-is-only-checking-for-first-li/53852409#53852409", "title": "rails 5.1.4 assert_select &#39;li&#39;, is only checking for first li", "body": "<p>I Found the issue in my code </p>\n\n<pre><code>assert_select 'li', '1 \\u00d7 Programming Ruby 1.9'\n</code></pre>\n\n<p>needed to be</p>\n\n<pre><code>assert_select 'li', \"1 \\u00d7 Programming Ruby 1.9\"\n</code></pre>\n\n<p>in order to correctly display the \\u00d7 had to be wrapped in double quotes.</p>\n"}, {"tags": [], "owner": {"reputation": 1679, "user_id": 5238583, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZdFTp.jpg?s=128&g=1", "display_name": "Tina Chen", "link": "https://stackoverflow.com/users/5238583/tina-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1576498664, "creation_date": 1576498664, "answer_id": 59356506, "question_id": 51714994, "link": "https://stackoverflow.com/questions/51714994/rails-5-1-4-assert-select-li-is-only-checking-for-first-li/59356506#59356506", "title": "rails 5.1.4 assert_select &#39;li&#39;, is only checking for first li", "body": "<p>Same newbie error here.</p>\n\n<p>Replace single-quote with double-quote fix the issue.</p>\n\n<p>Add some reasons here:</p>\n\n<ol>\n<li><p>Single quotes can not hold/print escape sequences directly, while double quotes can. <code>\\u00d7</code> need escaping to match the test result\n<a href=\"https://rubyinrails.com/2014/01/03/ruby-difference-between-single-and-double-quotes/\" rel=\"nofollow noreferrer\">https://rubyinrails.com/2014/01/03/ruby-difference-between-single-and-double-quotes/</a></p></li>\n<li><p>The asset_select assertion is true if <strong>at least</strong> one element selected. If no element found, the first found element will be printed in the error message. That's why we see <code>&lt;Home&gt;</code> as the actual result.\n<a href=\"https://apidock.com/rails/ActionController/Assertions/SelectorAssertions/assert_select\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActionController/Assertions/SelectorAssertions/assert_select</a></p></li>\n</ol>\n"}], "owner": {"reputation": 320, "user_id": 6501234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e980b8b7894381f8d85eb060b7b0cbf?s=128&d=identicon&r=PG", "display_name": "Corey Gibson", "link": "https://stackoverflow.com/users/6501234/corey-gibson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 53852409, "answer_count": 3, "score": 1, "last_activity_date": 1576498664, "creation_date": 1533586447, "question_id": 51714994, "link": "https://stackoverflow.com/questions/51714994/rails-5-1-4-assert-select-li-is-only-checking-for-first-li", "title": "rails 5.1.4 assert_select &#39;li&#39;, is only checking for first li", "body": "<p>I am working through Agile Web Development in Rails 5.1, I seem to be having issues with testing. The book says if I have markdown like</p>\n\n<pre><code>&lt;ul&gt;\n  &lt;li&gt;Home&lt;/li&gt;\n  &lt;li&gt;etc...&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;ul&gt;\n  &lt;% @cart.line_items.each do |item| %&gt;\n     &lt;li&gt;\n       &lt;%= item.quantity %&gt; &amp;times; &lt;%= \n           item.product.title %&gt;\n     &lt;/li&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>I should be able to write this text</p>\n\n<pre><code>assert_select 'li', '1 \\u00d7 Programming Ruby 1.9'\n</code></pre>\n\n<p>and have it return :true, but it is only checking for the first li element,</p>\n\n<pre><code>Failure:LineItemsControllerTest#test_should_create_line_item [/Users/coreygibson/Documents/workspace/Depot/test/controllers/line_items_controller_test.rb:27]:\n&lt;1 \\u00d7 Programming Ruby 1.9&gt; expected but was\n&lt;Home&gt;..\nExpected 0 to be &gt;= 1.\n</code></pre>\n\n<p>Is there a setting to fix this? or am I missing something? The book says this should work.</p>\n"}, {"tags": ["ruby", "http", "gmail-api"], "comments": [{"owner": {"reputation": 943, "user_id": 3477163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tMQl.jpg?s=128&g=1", "display_name": "supremebeing7", "link": "https://stackoverflow.com/users/3477163/supremebeing7"}, "edited": false, "score": 0, "creation_date": 1533596541, "post_id": 51714674, "comment_id": 90394586, "body": "Have you tried it with an actual email address instead of <code>:userId =&gt; &#39;me&#39;</code>? From their docs: &quot;The special value &#39;me&#39; can be used to indicate the authenticated user.&quot; I&#39;m wondering if your user is not authenticated (I can&#39;t tell because I assume that happens as part of creating <code>api_client</code>)"}, {"owner": {"reputation": 943, "user_id": 3477163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tMQl.jpg?s=128&g=1", "display_name": "supremebeing7", "link": "https://stackoverflow.com/users/3477163/supremebeing7"}, "edited": false, "score": 0, "creation_date": 1533596603, "post_id": 51714674, "comment_id": 90394595, "body": "This may or may not be helpful as well: <a href=\"https://stackoverflow.com/a/43684252/3477163\">stackoverflow.com/a/43684252/3477163</a>"}, {"owner": {"reputation": 81708, "user_id": 3617886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y26OT.jpg?s=128&g=1", "display_name": "Tholle", "link": "https://stackoverflow.com/users/3617886/tholle"}, "edited": false, "score": 1, "creation_date": 1533597752, "post_id": 51714674, "comment_id": 90394833, "body": "Not Ruby, but <a href=\"https://stackoverflow.com/questions/24908700/mail-attachment-wrong-media-type-gmail-api/24957873#24957873\">this answer might give some inspiration</a>."}, {"owner": {"reputation": 736, "user_id": 1003387, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/4ed383da46c6e93d76cadcbdc0266265?s=128&d=identicon&r=PG", "display_name": "jwg2s", "link": "https://stackoverflow.com/users/1003387/jwg2s"}, "reply_to_user": {"reputation": 81708, "user_id": 3617886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y26OT.jpg?s=128&g=1", "display_name": "Tholle", "link": "https://stackoverflow.com/users/3617886/tholle"}, "edited": false, "score": 1, "creation_date": 1533649977, "post_id": 51714674, "comment_id": 90417531, "body": "@Tholle - thanks so much! The issue was that when using multipart uploadType, the body of the request should <i>not</i> be base64 encoded, which I don&#39;t think is mentioned anywhere in the docs sadly."}], "answers": [{"tags": [], "owner": {"reputation": 736, "user_id": 1003387, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/4ed383da46c6e93d76cadcbdc0266265?s=128&d=identicon&r=PG", "display_name": "jwg2s", "link": "https://stackoverflow.com/users/1003387/jwg2s"}, "is_accepted": true, "score": 2, "last_activity_date": 1533650111, "creation_date": 1533650111, "answer_id": 51728548, "question_id": 51714674, "link": "https://stackoverflow.com/questions/51714674/using-gmail-api-to-send-attachments-larger-than-10mb/51728548#51728548", "title": "Using Gmail API to Send Attachments Larger than 10mb", "body": "<p>So the issue (thank you to @tholle) was that when sending attachments greater than 5mb and less than 35mb (but also works on messages without attachments), you do NOT base64 encode the body of the request, and use multipart as the uploadType. Unfortunately the docs don't mention this at all, and the error messages don't indicate that either.</p>\n\n<p>Here's a working example that was able to send a 20mb attachment. Hopefully this will help anyone else who has wasted countless hours trying to figure this one out!</p>\n\n<pre><code>  result = api_client.execute!(\n    :api_method =&gt; gmail_api.users.messages.to_h['gmail.users.messages.send'],\n    :body =&gt; rfc822_message_string,\n    :parameters =&gt; {\n      :uploadType =&gt; 'multipart',\n      :userId =&gt; 'me'\n    },\n    :headers =&gt; {\n      'Content-Type' =&gt; 'message/rfc822',\n    }\n  )\n</code></pre>\n"}], "owner": {"reputation": 736, "user_id": 1003387, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/4ed383da46c6e93d76cadcbdc0266265?s=128&d=identicon&r=PG", "display_name": "jwg2s", "link": "https://stackoverflow.com/users/1003387/jwg2s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 1, "accepted_answer_id": 51728548, "answer_count": 1, "score": 2, "last_activity_date": 1533650111, "creation_date": 1533584825, "last_edit_date": 1533589308, "question_id": 51714674, "link": "https://stackoverflow.com/questions/51714674/using-gmail-api-to-send-attachments-larger-than-10mb", "title": "Using Gmail API to Send Attachments Larger than 10mb", "body": "<p>I'm struggling to find a good example of the full set of requests necessary to send an email through the Gmail API containing an attachment larger than 10mb.</p>\n\n<p>I've seen <a href=\"https://developers.google.com/gmail/api/v1/reference/users/messages/send\" rel=\"nofollow noreferrer\">https://developers.google.com/gmail/api/v1/reference/users/messages/send</a> and <a href=\"https://developers.google.com/gmail/api/guides/uploads#resumable\" rel=\"nofollow noreferrer\">https://developers.google.com/gmail/api/guides/uploads#resumable</a>, but there's nothing that ties it all together.</p>\n\n<p>We're using the ruby client, but we're unable to complete this flow. With the following code, we get the following error trying to make the second request: <code>Google::APIClient::ClientError: Recipient address required</code></p>\n\n<p>The full body of the response is the following:</p>\n\n<pre><code>{\"error\"=&gt;{\"errors\"=&gt;[{\"domain\"=&gt;\"global\", \"reason\"=&gt;\"invalidArgument\", \"message\"=&gt;\"Recipient address required\"}], \"code\"=&gt;400, \"message\"=&gt;\"Recipient address required\"}}\n</code></pre>\n\n<p>Here's the code used to generate the request:</p>\n\n<pre><code>raw = Base64.urlsafe_encode64 message_string\nresult1 = api_client.execute!(\n  :api_method =&gt; gmail_api.users.messages.to_h['gmail.users.messages.send'],\n  :parameters =&gt; {\n    :uploadType =&gt; 'resumable',\n    :userId =&gt; 'me'\n  },\n  :headers =&gt; {\n    'Content-Type' =&gt; 'application/json',\n    'X-Upload-Content-Type' =&gt; 'message/rfc822',\n    'X-Upload-Content-Length' =&gt; raw.bytesize.to_s\n  }\n)\n\nupload_id = result1.headers['x-guploader-uploadid']\n\nresult2 = api_client.execute!(\n  :api_method =&gt; gmail_api.users.messages.to_h['upload.gmail.users.messages.send'],\n  :body_object =&gt; {\n    :raw =&gt; raw\n  },\n  :parameters =&gt; {\n    :uploadType =&gt; 'resumable',\n    :upload_id =&gt; upload_id,\n    :userId =&gt; 'me'\n  },\n  :headers =&gt; {\n    'Content-Type' =&gt; message.content_type,\n    'Content-Length' =&gt; raw.bytesize.to_s\n  }\n)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533583938, "post_id": 51713986, "comment_id": 90390320, "body": "can you show more code?"}, {"owner": {"reputation": 3627, "user_id": 3695939, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d75f41bcfc1d3f20c084ec7e87d82012?s=128&d=identicon&r=PG&f=1", "display_name": "moondaisy", "link": "https://stackoverflow.com/users/3695939/moondaisy"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533585055, "post_id": 51713986, "comment_id": 90390778, "body": "@ArupRakshit there isn&#39;t much more code for that request, I don&#39;t have access to the backend"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533585187, "post_id": 51713986, "comment_id": 90390844, "body": "ok.. where is the line <code>if attributes[:_links]</code>?"}, {"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 1, "creation_date": 1533585271, "post_id": 51713986, "comment_id": 90390869, "body": "I think your problem lies in <code>if attributes[:_links]</code>, I bet <code>attributes</code> has what Flexirest gives you, and if you see, it is an array. So, trying to access an array(<code>attributes</code>) by using a symbol(<code>:_links</code>) will indeed give you that error. To illustrate that, try in your console <code>a = [1,2,3]</code>, then <code>a[:_links]</code> and you&#39;ll get <code>TypeError: no implicit conversion of Symbol into Integer</code>. So, I&#39;ll suggest to look at Flexirest and see how you can access the whole response, because it looks like that&#39;s what you want."}, {"owner": {"reputation": 3627, "user_id": 3695939, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d75f41bcfc1d3f20c084ec7e87d82012?s=128&d=identicon&r=PG&f=1", "display_name": "moondaisy", "link": "https://stackoverflow.com/users/3695939/moondaisy"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533647656, "post_id": 51713986, "comment_id": 90415754, "body": "@ArupRakshit that line is part of the gem code, I have updated the question with the error stack and the link to the line."}, {"owner": {"reputation": 3627, "user_id": 3695939, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d75f41bcfc1d3f20c084ec7e87d82012?s=128&d=identicon&r=PG&f=1", "display_name": "moondaisy", "link": "https://stackoverflow.com/users/3695939/moondaisy"}, "reply_to_user": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1533647840, "post_id": 51713986, "comment_id": 90415892, "body": "@fanta yes, the error is occuring for that reason (I have updated the question with more info) but the problem is that all this is done on the gem side."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533648397, "post_id": 51713986, "comment_id": 90416352, "body": "@moondaisy from controller I see you call method <code>get_neighborhood_list</code>. What is the implementation of this?"}, {"owner": {"reputation": 3627, "user_id": 3695939, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d75f41bcfc1d3f20c084ec7e87d82012?s=128&d=identicon&r=PG&f=1", "display_name": "moondaisy", "link": "https://stackoverflow.com/users/3695939/moondaisy"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533648649, "post_id": 51713986, "comment_id": 90416546, "body": "@ArupRakshit I updated the question, it fails when making the call (second line of that method)"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533648873, "post_id": 51713986, "comment_id": 90416725, "body": "When it is an hal response, it expects the attribute to be present and response should be different structure also.. as per my reading.. I am still reading their code.."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533649200, "post_id": 51713986, "comment_id": 90416978, "body": "@moondaisy This gem is built for this <a href=\"https://tools.ietf.org/html/draft-kelly-json-hal-08\" rel=\"nofollow noreferrer\">tools.ietf.org/html/draft-kelly-json-hal-08</a> .. I don&#39;t think it will work with yours one.. Check Response <a href=\"https://tools.ietf.org/html/draft-kelly-json-hal-08#section-3\" rel=\"nofollow noreferrer\">tools.ietf.org/html/draft-kelly-json-hal-08#section-3</a>"}, {"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 1, "creation_date": 1533654046, "post_id": 51713986, "comment_id": 90420486, "body": "as @ArupRakshit said, the gem won&#39;t work in your case because the response you&#39;re getting back is not in the format Flexirest is expecting."}], "answers": [{"tags": [], "owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "is_accepted": false, "score": 0, "last_activity_date": 1575248362, "creation_date": 1575248362, "answer_id": 59131417, "question_id": 51713986, "link": "https://stackoverflow.com/questions/51713986/flexirest-to-handle-string-array/59131417#59131417", "title": "Flexirest to handle string array", "body": "<p>This is a old question but thought I'd answer it. you need to add </p>\n\n<blockquote>\n  <p>plain: true</p>\n</blockquote>\n\n<p>in your model like below.</p>\n\n<pre><code>class Neighborhood &lt; BaseModel\n  get :by_location, \"/neighborhoods/by_location\", plain: true\nend \n</code></pre>\n\n<p>It will then return the string array</p>\n"}], "owner": {"reputation": 3627, "user_id": 3695939, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d75f41bcfc1d3f20c084ec7e87d82012?s=128&d=identicon&r=PG&f=1", "display_name": "moondaisy", "link": "https://stackoverflow.com/users/3695939/moondaisy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575248362, "creation_date": 1533581677, "last_edit_date": 1533648604, "question_id": 51713986, "link": "https://stackoverflow.com/questions/51713986/flexirest-to-handle-string-array", "title": "Flexirest to handle string array", "body": "<p>I'm using Flexirest to make a request to an endpoint that returns an array of strings with <code>Content-Type: application\\json</code>.</p>\n\n<p>This is the model:</p>\n\n<pre><code>class Neighborhood &lt; BaseModel\n  get :by_location, \"/neighborhoods/by_location\"\nend \n</code></pre>\n\n<p>And this is how I make the request:</p>\n\n<pre><code>def get_neighborhood_list\n  city_to_use = ApplicationHelper.user_location[:city] || Rails.configuration.default_location[:city]\n  @hoods = Neighborhood.by_location(city: city_to_use)\nend\n</code></pre>\n\n<p>And this is called but it only reaches the <code>super</code> line since it breaks inside there:</p>\n\n<pre><code>def handle_response(response, cached = nil)\n  result = super(response, cached)\n  setup_paging_variables result, response\n  setup_paging_variables result.data, response if result.respond_to? 'data'\n  result\nend\n</code></pre>\n\n<p>The endpoint returns an array of strings:</p>\n\n<pre><code>[\n    \"Ahwatukee Foothills Village\",\n    \"Alhambra\",\n    \"Camelback East Village\",\n    \"Central City\",\n]\n</code></pre>\n\n<p>With this headers</p>\n\n<p><a href=\"https://i.stack.imgur.com/UOLUT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UOLUT.png\" alt=\"enter image description here\"></a></p>\n\n<p>My problem is that Flexirest is treating the strings as json objects instead due to the value on the <code>Content-Type</code> header.\nI get this error </p>\n\n<blockquote>\n  <p>TypeError: no implicit conversion of Symbol into Integer</p>\n</blockquote>\n\n<p>on this line on the <code>if attributes[:_links]</code>.\nIt's getting there because <code>hal_response?</code> is true</p>\n\n<p>Do I need to do something in particular in order for Flexirest to stop behaving like this?</p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>I guess I didn't explained it properly. The error is occurring on the gem side.\nHere is the full error:</p>\n\n<pre><code>TypeError - no implicit conversion of Symbol into Integer:\n  flexirest (1.5.5) lib/flexirest/request.rb:612:in `handle_hal_links_embedded'\n  flexirest (1.5.5) lib/flexirest/request.rb:553:in `new_object'\n  flexirest (1.5.5) lib/flexirest/request.rb:704:in `block in generate_new_object'\n  flexirest (1.5.5) lib/flexirest/request.rb:703:in `generate_new_object'\n  flexirest (1.5.5) lib/flexirest/request.rb:501:in `handle_response'\n  config/initializers/01_flexirest.rb:7:in `handle_response'\n  flexirest (1.5.5) lib/flexirest/request.rb:219:in `block (2 levels) in call'\n  faraday (0.9.2) lib/faraday/response.rb:57:in `on_complete'\n  flexirest (1.5.5) lib/flexirest/request.rb:200:in `block in call'\n  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `block in instrument'\n  activesupport (4.2.4) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `instrument'\n  flexirest (1.5.5) lib/flexirest/request.rb:156:in `call'\n  flexirest (1.5.5) lib/flexirest/mapping.rb:46:in `_call'\n  flexirest (1.5.5) lib/flexirest/mapping.rb:28:in `block in _map_call'\n  app/controllers/application_controller.rb:93:in `get_neighborhood_list\n</code></pre>\n\n<p>The <code>if attributes[:_links]</code> line is part of the gem code, and it's <a href=\"https://github.com/flexirest/flexirest/blob/master/lib/flexirest/request.rb#L662\" rel=\"nofollow noreferrer\">here on this line</a></p>\n\n<p>When it reaches this line the value of <code>attributes</code> is one of the strings inside the response, for instance: <code>attributes = \"Ahwatukee Foothills Village\"</code>. That's why it gives the error.</p>\n\n<p><strong>What I'm trying to figure out if there is a way (maybe something in the configuration) that I can use Flexirest to handle this kind of responses.</strong></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1533593852, "post_id": 51713677, "comment_id": 90393947, "body": "Just out of curiosity: there is no loop in your code. Why would you expect it to loop?"}, {"owner": {"reputation": 90, "user_id": 9612664, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7FScr6ryYII/AAAAAAAAAAI/AAAAAAAAADA/EH1ZAcd8YbY/photo.jpg?sz=128", "display_name": "aimen alt", "link": "https://stackoverflow.com/users/9612664/aimen-alt"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1533945066, "post_id": 51713677, "comment_id": 90548000, "body": "Apologies, I thought that when an array is used in a proc then | x | would act the same as | x | would when using .each on an array."}], "answers": [{"comments": [{"owner": {"reputation": 90, "user_id": 9612664, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7FScr6ryYII/AAAAAAAAAAI/AAAAAAAAADA/EH1ZAcd8YbY/photo.jpg?sz=128", "display_name": "aimen alt", "link": "https://stackoverflow.com/users/9612664/aimen-alt"}, "edited": false, "score": 0, "creation_date": 1533581054, "post_id": 51713738, "comment_id": 90389049, "body": "the reason I want to do this is because I have a program that im trying to solve, i&#39;ve came up with an idea to use different procs in a function that will make the method do slightly different things:"}, {"owner": {"reputation": 90, "user_id": 9612664, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7FScr6ryYII/AAAAAAAAAAI/AAAAAAAAADA/EH1ZAcd8YbY/photo.jpg?sz=128", "display_name": "aimen alt", "link": "https://stackoverflow.com/users/9612664/aimen-alt"}, "edited": false, "score": 0, "creation_date": 1533581220, "post_id": 51713738, "comment_id": 90389119, "body": "I added the code that I&#39;m trying to get to work in the way i want into my question"}], "tags": [], "owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "is_accepted": false, "score": 6, "last_activity_date": 1533590855, "last_edit_date": 1533590855, "creation_date": 1533580579, "answer_id": 51713738, "question_id": 51713677, "link": "https://stackoverflow.com/questions/51713677/why-isnt-the-proc-loop-through-each-element-of-the-arrayruby/51713738#51713738", "title": "why isn&#39;t the proc loop through each element of the array(ruby)?", "body": "<p><code>call</code> won't iterate over arguments. What you've written is, effectively:</p>\n\n<pre><code>puts [1, 2, 3, 4, 5]\nputs \"ai yo\"\n</code></pre>\n\n<p>If you want to iterate, use <code>each</code>:</p>\n\n<pre><code>[1, 2, 3, 4, 5].each(&amp;trio)\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>[1, 2, 3, 4, 5].each { |i| trio.call(i) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 807, "user_id": 2651076, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3274dc805ba25f33023bee2a4d32d6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Sinstein", "link": "https://stackoverflow.com/users/2651076/sinstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1533631018, "creation_date": 1533631018, "answer_id": 51722383, "question_id": 51713677, "link": "https://stackoverflow.com/questions/51713677/why-isnt-the-proc-loop-through-each-element-of-the-arrayruby/51722383#51722383", "title": "why isn&#39;t the proc loop through each element of the array(ruby)?", "body": "<p>As has been mentioned, you do not have any looping block. Your proc - <code>trio</code> is acting on the whole array as one single element. </p>\n\n<p>In your example: <code>x</code> becomes <code>[1, 2, 3, 4, 5]</code> and not individual elements of the array as you are expecting.</p>\n\n<hr>\n\n<p>To circumvent this you can either loop inside your Proc or create a separate Proc that will loop over the elements of the array and call the first Proc.</p>\n\n<p><strong>Example 1</strong></p>\n\n<pre><code>trio = Proc.new do |arr|\n  arr.each do |elem|\n    puts elem\n    if tf\n      puts \"ai yo\"\n    end\n  end\nend\n</code></pre>\n\n<p>This assumes that <code>arr</code> is an array</p>\n\n<p><strong>Example 2</strong></p>\n\n<pre><code>trio = Proc.new do |x|\n  tf = true\n  puts x\n  if tf\n    puts \"ai yo\"\n  end\n\nend\n\n\ntrio_helper = Proc.new do |x| \n arr = x.to_a\n arr.each do |elem|\n   trio.call(elem)\n end\nend\n\ntrio_helper.call([1, 2, 3, 4, 5])\n</code></pre>\n\n<p>This utilizes the original Proc you have written and uses another Proc to iterate over the array and call the first one on each element.</p>\n"}], "owner": {"reputation": 90, "user_id": 9612664, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7FScr6ryYII/AAAAAAAAAAI/AAAAAAAAADA/EH1ZAcd8YbY/photo.jpg?sz=128", "display_name": "aimen alt", "link": "https://stackoverflow.com/users/9612664/aimen-alt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1533631018, "creation_date": 1533580310, "last_edit_date": 1533581165, "question_id": 51713677, "link": "https://stackoverflow.com/questions/51713677/why-isnt-the-proc-loop-through-each-element-of-the-arrayruby", "title": "why isn&#39;t the proc loop through each element of the array(ruby)?", "body": "<pre><code>trio = Proc.new do |x|\n  tf = true\n  puts x\n  if tf \n    puts \"ai yo\"\n  end\n\nend\n\ntrio.call([1, 2, 3, 4, 5])\n</code></pre>\n\n<p>output: </p>\n\n<blockquote>\n  <p>1 2 3 4 5 ai yo #its only doing the ai yo part only once when I believe it\n  should do it after every number</p>\n</blockquote>\n\n<p>but What I am expecting of output is: </p>\n\n<blockquote>\n  <p>1 ai yo 2 ai yo 3 ai yo 4 ai yo 5 ai yo</p>\n</blockquote>\n\n<p>I still cant wrap my head around why this is happening.</p>\n\n<p>Im trying to get this program to work that i thought would be a cool way to use procs although in this specific problem i dont need to basically:</p>\n\n<pre><code>#The prime factors of 13195 are 5, 7, 13 and 29.\n#What is the largest prime factor of the number 600851475143 ?\n\nnumber = 13195\n\ndef factorsAndOptions(num, proc = Proc.new {|x|return x})\n  factorsArray = []\n  for i in 1..num\n    factorsArray.push(i) if num % i == 0\n  end\n  proc.call(factorsArray)\nend\n\nlargestPrime = Proc.new do |x|\n  prime = true\n  for j in 2...x\n    if (x % x == 0)\n      prime = false\n   end\n  end\n  larger = x if prime &amp;&amp; larger &gt; x\n  puts larger\n  larger\nend\n\nfactorsAndOptions(number, largestPrime)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "rubygems"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 3, "creation_date": 1533577276, "post_id": 51712799, "comment_id": 90387344, "body": "Can you please include code snippets rather than images?"}, {"owner": {"reputation": 943, "user_id": 3477163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tMQl.jpg?s=128&g=1", "display_name": "supremebeing7", "link": "https://stackoverflow.com/users/3477163/supremebeing7"}, "edited": false, "score": 0, "creation_date": 1533578648, "post_id": 51712799, "comment_id": 90387949, "body": "In your <code>self.send_email</code> method, you <code>rescue Exception =&gt; e</code> but don&#39;t actually display what the exception is. That would be the first thing to do - add a <code>puts e</code> somewhere in the <code>rescue</code> block and see what the error is. It&#39;s going to be pretty difficult to debug without that info."}, {"owner": {"reputation": 1, "user_id": 10187007, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--v651dAaFmk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rjdDF8QmMACVINXSX63nKv2xRylw/mo/photo.jpg?sz=128", "display_name": "africonso", "link": "https://stackoverflow.com/users/10187007/africonso"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1533580480, "post_id": 51712799, "comment_id": 90388787, "body": "@SaraTibbetts i edited the question to show the code. Any help?"}, {"owner": {"reputation": 1, "user_id": 10187007, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--v651dAaFmk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rjdDF8QmMACVINXSX63nKv2xRylw/mo/photo.jpg?sz=128", "display_name": "africonso", "link": "https://stackoverflow.com/users/10187007/africonso"}, "reply_to_user": {"reputation": 943, "user_id": 3477163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tMQl.jpg?s=128&g=1", "display_name": "supremebeing7", "link": "https://stackoverflow.com/users/3477163/supremebeing7"}, "edited": false, "score": 0, "creation_date": 1533580527, "post_id": 51712799, "comment_id": 90388814, "body": "@supremebeing7 I could not understand you. Can you please show me what you mean?"}, {"owner": {"reputation": 943, "user_id": 3477163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tMQl.jpg?s=128&g=1", "display_name": "supremebeing7", "link": "https://stackoverflow.com/users/3477163/supremebeing7"}, "edited": false, "score": 0, "creation_date": 1533581161, "post_id": 51712799, "comment_id": 90389095, "body": "You are rescuing an Exception and storing in a variable <code>e</code>. After the line <code>puts &#39;Email Failed to Send from &#39;+sender_address+&#39; to &#39;+ recipient</code>, add the lines <code>puts e</code> and <code>puts e.backtrace</code>. That will print the variable with the error that was rescued, along with the backtrace. Ref: <a href=\"https://ruby-doc.org/core-2.2.0/Exception.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Exception.html</a>"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "edited": false, "score": 0, "creation_date": 1533581169, "post_id": 51712799, "comment_id": 90389100, "body": "@africonso you should do a <code>puts e</code> wherever you are doing <code>rescue =&gt; e</code> to check what exception is being rescued"}, {"owner": {"reputation": 1, "user_id": 10187007, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--v651dAaFmk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rjdDF8QmMACVINXSX63nKv2xRylw/mo/photo.jpg?sz=128", "display_name": "africonso", "link": "https://stackoverflow.com/users/10187007/africonso"}, "reply_to_user": {"reputation": 943, "user_id": 3477163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tMQl.jpg?s=128&g=1", "display_name": "supremebeing7", "link": "https://stackoverflow.com/users/3477163/supremebeing7"}, "edited": false, "score": 0, "creation_date": 1533585787, "post_id": 51712799, "comment_id": 90391064, "body": "@supremebeing7 I have edited the question showing the error message i get."}, {"owner": {"reputation": 1, "user_id": 10187007, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--v651dAaFmk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rjdDF8QmMACVINXSX63nKv2xRylw/mo/photo.jpg?sz=128", "display_name": "africonso", "link": "https://stackoverflow.com/users/10187007/africonso"}, "reply_to_user": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "edited": false, "score": 0, "creation_date": 1533585821, "post_id": 51712799, "comment_id": 90391074, "body": "@anonn023432 I have edited the question and added the error message i get."}, {"owner": {"reputation": 943, "user_id": 3477163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tMQl.jpg?s=128&g=1", "display_name": "supremebeing7", "link": "https://stackoverflow.com/users/3477163/supremebeing7"}, "edited": false, "score": 0, "creation_date": 1533587958, "post_id": 51712799, "comment_id": 90391990, "body": "Added an answer based on the error message you received"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10187007, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--v651dAaFmk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rjdDF8QmMACVINXSX63nKv2xRylw/mo/photo.jpg?sz=128", "display_name": "africonso", "link": "https://stackoverflow.com/users/10187007/africonso"}, "edited": false, "score": 0, "creation_date": 1533634093, "post_id": 51715311, "comment_id": 90407017, "body": "Thank you. i finally figured the problem is from the smtp provider. Now looking at the script, how do i make it accept other smtp providers because it only works with outlook smtp."}, {"owner": {"reputation": 943, "user_id": 3477163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tMQl.jpg?s=128&g=1", "display_name": "supremebeing7", "link": "https://stackoverflow.com/users/3477163/supremebeing7"}, "reply_to_user": {"reputation": 1, "user_id": 10187007, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--v651dAaFmk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rjdDF8QmMACVINXSX63nKv2xRylw/mo/photo.jpg?sz=128", "display_name": "africonso", "link": "https://stackoverflow.com/users/10187007/africonso"}, "edited": false, "score": 0, "creation_date": 1533665234, "post_id": 51715311, "comment_id": 90426543, "body": "It looks like you are configuring your smtp provider based on values in a <code>senders.txt</code> file, so will need to change those values."}], "tags": [], "owner": {"reputation": 943, "user_id": 3477163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tMQl.jpg?s=128&g=1", "display_name": "supremebeing7", "link": "https://stackoverflow.com/users/3477163/supremebeing7"}, "is_accepted": false, "score": 0, "last_activity_date": 1533587927, "creation_date": 1533587927, "answer_id": 51715311, "question_id": 51712799, "link": "https://stackoverflow.com/questions/51712799/error-while-trying-to-send-bulk-emails-using-ruby/51715311#51715311", "title": "error while trying to send bulk emails using ruby", "body": "<p>The relevant piece from your error log looks to be the <code>550 5.1.8 Access denied, bad outbound sender</code>. As you mentioned you are using office 365 as your smtp provider, there is a post on Microsoft's support site that suggests this is due to your <a href=\"https://gallery.technet.microsoft.com/office/550-518-Access-Denied-Bad-bf336c1b\" rel=\"nofollow noreferrer\">sending address being suspected of sending spam</a>.</p>\n\n<p>Since you are trying to send a number of emails in quick succession, this seems like the issue you are running into.</p>\n\n<p>If it's the same email message going to all emails, you may consider sending one message with all addresses as BCC. Otherwise, you may need to check with your Office 365 admin to see if there are settings you can tweak. You may also consider using a transactional email provider (i.e. SendGrid, Mailchimp, or even what appears to be Microsoft's transactional email system, <a href=\"https://docs.microsoft.com/en-us/previous-versions/dynamics-marketing/developers-guide/dn659824(v=mdm.8)\" rel=\"nofollow noreferrer\">Dynamics Marketing</a>) that is built to handle these types of things, and which often have batch mail actions that won't tie up your server.</p>\n"}], "owner": {"reputation": 1, "user_id": 10187007, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--v651dAaFmk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rjdDF8QmMACVINXSX63nKv2xRylw/mo/photo.jpg?sz=128", "display_name": "africonso", "link": "https://stackoverflow.com/users/10187007/africonso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1533587927, "creation_date": 1533576404, "last_edit_date": 1533585742, "question_id": 51712799, "link": "https://stackoverflow.com/questions/51712799/error-while-trying-to-send-bulk-emails-using-ruby", "title": "error while trying to send bulk emails using ruby", "body": "<p>I'm trying to send some emails using ruby script and i get error after sending to about a few emails then gives the error as shown below. Note: i'm using office365 as smtp provider.\nthis is the initial folder containing the scripts below\n<a href=\"https://i.stack.imgur.com/Jtyzb.png\" rel=\"nofollow noreferrer\">folder containing the scripts</a></p>\n\n<p>this is the email handler script below</p>\n\n<pre><code>require './savmail/lib/mail.rb'\n\nrequire './utils.rb'\n\nRECIPIENT_HOLDER = \"%0%\"\n\nmodule EmailHandler\n    def self.format_email(email: '', recipient: '')\n        # fill in all the placeholders\n        return email.gsub(RECIPIENT_HOLDER, recipient)\n    end\n\n\n    def self.compose_email(recipient: nil, sender: nil, sender_name: nil, subject: '', html: nil, text: '')\n        # Save recipient so other threads don't touch\n        Utils.save_recipient(email: recipient)\n        text_content = text\n        html_content = format_email(email: html, recipient: recipient)\n\n        mail = Mail.new do\n            to      recipient\n            from    sender_name + \" &lt;\" + sender + \"&gt;\"\n            subject subject\n        end\n\n        text_part = Mail::Part.new do\n            body text_content\n        end\n\n        html_part = Mail::Part.new do\n            content_type 'text/html; charset=UTF-8'\n            body html_content\n        end\n\n        mail.text_part = text_part\n        mail.html_part = html_part\n\n        return { 'msg'=&gt; mail, 'recipient'=&gt; recipient, 'sender'=&gt; sender }\n    end\n\n    def self.email_login(sender_tuple: [], mail: '')\n        smtp_login = sender_tuple[0]\n        smtp_password = sender_tuple[1]\n        smtp_host = sender_tuple[2]\n        smtp_port = sender_tuple[3]\n        limit = sender_tuple[4]\n\n        begin\n            # server = smtplib.SMTP(smtp_host, smtp_port)\n            # server.starttls()\n            # server.login(smtp_login, smtp_password)\n            options = { \n                :address              =&gt; smtp_host,\n                :port                 =&gt; smtp_port,\n                # :domain               =&gt; 'your.host.name',\n                :user_name            =&gt; smtp_login,\n                :password             =&gt; smtp_password,\n                :authentication       =&gt; 'login',\n                # :enable_starttls_auto =&gt; true  \n            }\n            mail.delivery_method :smtp, options\n\n            return mail\n        rescue Exception =&gt; e\n            puts 'Failed to Login to ' + smtp_login\n            return false\n        end\n    end\n\n    def self.send_email(payload: nil, sender_address: nil, recipient: nil, server: nil)\n        begin\n            payload.deliver\n            puts 'Sent from '+sender_address+' to '+recipient\n            return payload\n        rescue Exception =&gt; e\n            Utils.save_recipient(email: recipient, failed: true)\n            puts 'Email Failed to Send from '+sender_address+' to '+ recipient\n            return false\n        end\n    end\nend\n</code></pre>\n\n<p>then this is the main sender script</p>\n\n<pre><code># from email_handler import compose_email, send_email, email_login\nrequire './email_handler.rb'\nrequire './utils.rb'\ninclude EmailHandler\n\n# Change Subject for all emails here\n$custom_sender_name = \"Africonso Tradings\"\n$custom_sender_email = \"admin@africonsotradings.com\"\n$email_subject = \"test mail.\"\n$threads_total = 10\n\n# These files have to exist\n$army_file_path = './army.txt'\n$email_file_path = './msg.html'\n$senders_file_path = './senders.txt'\n\n\ndef mail_savage(recipients, senders, payload, custom_sender_email, custom_sender_name, email_subject, active_limit: nil, active_server: nil)\n    ''' Login as one sender and send emails until the limit is reached or the email stops working,\n    then do the same for the rest\n    '''\n    # Get first recipient from array\n    sender = senders[0]\n\n    # sender_email, smtp_password, smtp_host, smtp_port, limit = sender\n    sender_email = sender[0]\n    smtp_password = sender[1]\n    smtp_host = sender[2]\n    smtp_port = sender[3]\n    limit = sender[4]\n    mail_limit = active_limit or limit.to_i\n\n    # if !recipients\n    #     return true\n    # end\n\n    # Make sure we haven't emailed this user before\n    for recipient in recipients\n        if Utils.is_recipient_saved(email: recipient)\n            # Move to next email if sent already\n            next\n        end\n\n        # compose email\n        # mail, recipient_email, csender_email = compose_email(recipient=recipient, sender=sender_email, sender_name=custom_sender_name, subject=email_subject, html=payload)\n        mail_data = EmailHandler.compose_email(recipient: recipient, sender: sender_email, sender_name: custom_sender_name, subject: email_subject, html: payload)\n        mail = mail_data['msg']\n        recipient_email = mail_data['recipient']\n        csender_email = mail_data['sender']\n\n\n        # Login as sender if fail dump sender\n        server = false\n        while server == false do\n            server = EmailHandler.email_login(sender_tuple: sender, mail: mail)\n        end\n\n        # Send email\n        # print('Sending from %s to %s' % (sender_email, recipient))\n        if !EmailHandler.send_email(payload: server, sender_address: sender_email, recipient: recipient_email, server: server)\n            # email failed to send\n            # Call it again without this sender and with the current limit\n            server = EmailHandler.email_login(sender_tuple: sender, mail: server)\n        end\n    end\n\n    # if server\n    #     server.finish\n    # end\n    return true\nend\n\n\ndef main()\n    ''' Send email from msg.html to all addresses in army.txt\n    with the addresses in senders.txt\n    '''\n\n    senders_all = Utils.get_sender_addresses(path: $senders_file_path)\n    recipients_all = Utils.get_army_addresses(path: $army_file_path)\n    html_content = Utils.get_email_content(path: $email_file_path)\n\n    threads = []\n\n    for th in 0..$threads_total-1\n        threc = recipients_all[th..recipients_all.length-1]\n\n        if threc != nil &amp;&amp; threc.length &gt; 0\n\n            threads &lt;&lt; Thread.new {\n                if th == 0\n                    sleep 2\n                end\n                mail_savage(recipients_all, senders_all, html_content, $custom_sender_email, $custom_sender_name, $email_subject, active_limit: nil, active_server: nil)\n            }\n        end\n        # thread.join\n        # thread.start()\n    end\n\n    threads.each do |t|\n        t.join\n    end\nend\n\nmain\n</code></pre>\n\n<p>so when i try to send the mail, first it sends one mail multiple times then the rest email fails as shown below\n<a href=\"https://i.stack.imgur.com/XYlkv.jpg\" rel=\"nofollow noreferrer\">cmd main</a></p>\n\n<p>then this happens\n<a href=\"https://i.stack.imgur.com/MBDYp.jpg\" rel=\"nofollow noreferrer\">error msg</a></p>\n\n<p>Now my question is why the emails are failing after sending a very few mails successfully. i think there is an error somewhere in the script.\nAny help?</p>\n\n<p>Now i have added the puts e and i am getting the error code below. Please note that it sends about 20 mails and the rest fails.\n<a href=\"https://i.stack.imgur.com/z7bjs.jpg\" rel=\"nofollow noreferrer\">error i get now</a></p>\n\n<p>Also how can i make the code to accept a different smtp apart from 365?</p>\n"}, {"tags": ["ruby", "selenium-webdriver"], "comments": [{"owner": {"reputation": 5864, "user_id": 2575259, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/577b5db0256da160cf87a4788895b485?s=128&d=identicon&r=PG", "display_name": "Naveen Kumar R B", "link": "https://stackoverflow.com/users/2575259/naveen-kumar-r-b"}, "edited": false, "score": 1, "creation_date": 1533572145, "post_id": 51711594, "comment_id": 90384873, "body": "Are you using Firefox &gt; 47 version? If yes, you need to download geckodriver and keep it in path."}, {"owner": {"reputation": 355, "user_id": 1404478, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f8fb5c17fb8b1277051be16083a74990?s=128&d=identicon&r=PG", "display_name": "Martin Marino", "link": "https://stackoverflow.com/users/1404478/martin-marino"}, "reply_to_user": {"reputation": 5864, "user_id": 2575259, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/577b5db0256da160cf87a4788895b485?s=128&d=identicon&r=PG", "display_name": "Naveen Kumar R B", "link": "https://stackoverflow.com/users/2575259/naveen-kumar-r-b"}, "edited": false, "score": 0, "creation_date": 1533581804, "post_id": 51711594, "comment_id": 90389396, "body": "You&#39;re saying that if I have a version greater than 47, I need to download geckodriver and keep it in path?"}, {"owner": {"reputation": 355, "user_id": 1404478, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f8fb5c17fb8b1277051be16083a74990?s=128&d=identicon&r=PG", "display_name": "Martin Marino", "link": "https://stackoverflow.com/users/1404478/martin-marino"}, "reply_to_user": {"reputation": 5864, "user_id": 2575259, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/577b5db0256da160cf87a4788895b485?s=128&d=identicon&r=PG", "display_name": "Naveen Kumar R B", "link": "https://stackoverflow.com/users/2575259/naveen-kumar-r-b"}, "edited": false, "score": 0, "creation_date": 1533656654, "post_id": 51711594, "comment_id": 90422177, "body": "So before, I guess I didn&#39;t fully understand what add to path meant. I thought it meant adding my drivers folder to the same folder as my ruby install. Then I thought it meant I had to add it as an environment variable. Then I figured out that I needed to add it to the path in my system variables. Anyway it worked. Thanks. I&#39;ll be back when I run into my next error."}], "owner": {"reputation": 355, "user_id": 1404478, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f8fb5c17fb8b1277051be16083a74990?s=128&d=identicon&r=PG", "display_name": "Martin Marino", "link": "https://stackoverflow.com/users/1404478/martin-marino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 413, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533571776, "creation_date": 1533571347, "last_edit_date": 1533571776, "question_id": 51711594, "link": "https://stackoverflow.com/questions/51711594/create-session-no-sessionid-in-returned-payload-seleniumwebdrivererrorw", "title": "create_session&#39;: no sessionId in returned payload (Selenium::WebDriver::Error::WebDriverError)", "body": "<p>My Ruby environment was working sometime ago, but it broke so I'm trying to set it up again. I'm following these instructions. <a href=\"https://www.agiletrailblazers.com/blog/the-5-step-guide-for-selenium-cucumber-and-gherkin\" rel=\"nofollow noreferrer\">https://www.agiletrailblazers.com/blog/the-5-step-guide-for-selenium-cucumber-and-gherkin</a></p>\n\n<p>I installed Ruby2.33 and extracted the dev kit to the same folder. I ran these installs with no problem. They all said gems were installed successfully </p>\n\n<pre><code>ruby dk.rb init\n\nruby dk.rb install\n\ngem install bundler\n\ngem install selenium-webdriver -v 3.2.1\n\ngem install cucumber\n\ngem install rspec\n</code></pre>\n\n<p>I create a .rb file in a separate folder and running the script is supposed to open firefox, navigate to the website and close the browser. All it does is open a blank firefox browser and it doesn't close.</p>\n\n<p>My script is </p>\n\n<pre><code>require 'selenium-webdriver'\n\ndriver = Selenium::WebDriver.for :firefox\n\ndriver.navigate.to \"http://mock.agiletrailblazers.com/\"\n\ndriver.quit\n</code></pre>\n\n<p>I'm getting the below error\n<a href=\"https://i.stack.imgur.com/gTZbA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gTZbA.png\" alt=\"enter image description here\"></a></p>\n\n<p>I also tried gem install webdrivers. My firefox install is inside my program files as well.</p>\n\n<p>Anyone know why I can't run my script after all these commands and installs worked fine?</p>\n"}, {"tags": ["css", "ruby", "shopify", "liquid", "shopify-template"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1533574022, "post_id": 51711522, "comment_id": 90385822, "body": "What happens if you hardcode the element height in the inspector? You do this to verify you&#39;re not bumping into a HTML / CSS issue, instead of something Shopify / Liquid specific."}, {"owner": {"reputation": 363, "user_id": 7957776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWq4z.png?s=128&g=1", "display_name": "Stefan Bauer", "link": "https://stackoverflow.com/users/7957776/stefan-bauer"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533631537, "post_id": 51711522, "comment_id": 90405395, "body": "@Casper Hardcoding the element&#39;s height works perfectly. I&#39;ve tried setting the colour and so on through the style tag, that doesn&#39;t seem to work either. I&#39;m pretty sure the CSS is correct, but the selection statement just isn&#39;t working."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533648781, "post_id": 51711522, "comment_id": 90416646, "body": "You should be able to see your values in the CSS styles of the inspector. Are they there? Note that you can also view the whole CSS file through the inspector. That way you can check if everything you&#39;ve changed is present as it should be. You just need to narrow it down now. Is it the CSS file, is it the CSS selector, or where is the problem. Maybe a CSS selector is overriding your settings. That should be visible in the inspector also, as it should show which is the overriding CSS statement."}, {"owner": {"reputation": 363, "user_id": 7957776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWq4z.png?s=128&g=1", "display_name": "Stefan Bauer", "link": "https://stackoverflow.com/users/7957776/stefan-bauer"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533650520, "post_id": 51711522, "comment_id": 90417969, "body": "@Casper Yeah, I checked the inspector. As I said, that statement just doesn&#39;t seem to apply any changes at all, suggesting that the selector doesn&#39;t work.  I&#39;ve ended up just using an ugly hack to add in some extra height presets. It&#39;s not good, but it works."}], "owner": {"reputation": 363, "user_id": 7957776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWq4z.png?s=128&g=1", "display_name": "Stefan Bauer", "link": "https://stackoverflow.com/users/7957776/stefan-bauer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533571020, "creation_date": 1533571020, "question_id": 51711522, "link": "https://stackoverflow.com/questions/51711522/how-do-i-use-html-classes-to-set-shopify-section-sizes-through-css", "title": "How do I use HTML classes to set Shopify section sizes through CSS?", "body": "<p>I'm using Shopify for the first time, which is built on a pretty bewildering combination of different technologies, but I'm fairly certain my actual issue comes down to simple CSS.</p>\n\n<p>In the Shopify theme I'm using, <em>Motion</em> by Archetype, the 'fading images' block-type has a minimum height of '250' (actually 250px * 0.65 for some reason). It has a set of hundred-step sizes: 250, 350, 450, etc.</p>\n\n<p>These sizes are, bizarrely, very hardcoded. The controls are defined thus:</p>\n\n<pre><code>{\n    \"type\": \"range\",\n    \"id\": \"section_height\",\n    \"label\": \"Section height\",\n    \"default\": 650,\n    \"min\": 250,\n    \"max\": 750,\n    \"step\": 100,\n    \"unit\": \"px\"\n  }\n</code></pre>\n\n<p>and these discrete steps are turned into HTML class names, for some weird reason:</p>\n\n<pre><code>&lt;div class=\"fading-images fading-images--{{ section.id }} fading-images--{{ section.settings.section_height }} fading-images-overlay__overlay loading\"&gt;\n</code></pre>\n\n<p>Finally, there are a set of static, hardcoded options in the theme's scss:</p>\n\n<pre><code>.fading-images--250 {\n  height: floor(250px * 0.65);\n}\n\n.fading-images--350 {\n  height: floor(350px * 0.65);\n}\n\n//etc\n</code></pre>\n\n<p>Now, to me this seems restrictive and bizarre. I would like to dynamically set the height to wherever on the slider I damn well please. If I want a div exactly 456px tall, I see no reason why that should be an issue.</p>\n\n<p>To this end, I have added this line to the  section built into the block-type definition, and replaced the size-based classing with a generic one-size-fits-all:</p>\n\n<pre><code>&lt;style&gt;\n  .fading-images--{{ section.id }} .fading-images__sizer {\n    height: {{ section.settings.section_height | times: 0.65 | floor}}px;\n  }\n  .fading-images--{{ section.id }} .fading-images-overlay__title {\n    font-size: {{ section.settings.title_size | times: 0.5 }}px;\n  }\n  // ...\n&lt;/style&gt;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;div class=\"fading-images fading-images--{{ section.id }} fading-images__sizer fading-images-overlay__overlay loading\"&gt;\n</code></pre>\n\n<p>I am certain the Liquid Ruby bits are working correctly, and that the relevant statement is being resolved properly (eg. \"height: 296px;\"), but the div isn't actually being sized correctly. Inspecting the div in Chrome's dev tools shows that it has the 'fading-images__sizer' class, but the height attribute just doesn't seem to get changed.</p>\n\n<p>I'm fairly certain this must be some small and stupid problem, but I'm damned if I understand what it is. It's particularly puzzling since very similar statements execute perfectly with the exact same setup - note the font-size statement I included, which works perfectly.</p>\n\n<p>Any help would be greatly appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "controller", "specifications"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1533571812, "post_id": 51711177, "comment_id": 90384687, "body": "What about <code>get root_path</code>?"}, {"owner": {"reputation": 21, "user_id": 10187568, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fblXmdNg9DI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rDXoJRlbTRe8FvYy7UIEdwGkoyaQ/mo/photo.jpg?sz=128", "display_name": "Johnson Liu", "link": "https://stackoverflow.com/users/10187568/johnson-liu"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1533572042, "post_id": 51711177, "comment_id": 90384819, "body": "By doing <code>get root_path</code> it would give me error <code>ActionController::UrlGenerationError:        No route matches {:action=&gt;&quot;&#47;&quot;, :controller=&gt;&quot;application&quot;}</code> This is because my application controller is not wired with any CRUD actions and therefore no route error occurs. My root is at dashboard#index"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533711579, "post_id": 51711177, "comment_id": 90440765, "body": "Where is <code>set_account</code> used in the application?"}], "answers": [{"tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": false, "score": 0, "last_activity_date": 1533573322, "creation_date": 1533573322, "answer_id": 51712099, "question_id": 51711177, "link": "https://stackoverflow.com/questions/51711177/rspec-testing-delegation-error/51712099#51712099", "title": "rspec testing Delegation Error", "body": "<p>You can use anonymous controller in this case, I think:</p>\n\n<pre><code>describe ApplicationController do \n  controller do\n    before_filter :set_account\n\n    def index\n      head :ok\n    end\n  end\n\n  context 'When signed in as a general user without an account assigned' do\n    before do\n      general_user_no_account= FactoryGirl.create(:user, admin:false, account: nil)\n      sign_in general_user_no_account\n    end\n    it 'redirects to dashboard path with no account assigned notice' do\n      get :index\n      expect(response).to redirect_to(dashboard_path)\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10187568, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fblXmdNg9DI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rDXoJRlbTRe8FvYy7UIEdwGkoyaQ/mo/photo.jpg?sz=128", "display_name": "Johnson Liu", "link": "https://stackoverflow.com/users/10187568/johnson-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 923, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533573322, "creation_date": 1533569773, "question_id": 51711177, "link": "https://stackoverflow.com/questions/51711177/rspec-testing-delegation-error", "title": "rspec testing Delegation Error", "body": "<p>In my ruby on rails project I have my ApplicationController below: </p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  def set_account\n    if current_user&amp;.admin\n      @account = Account.find_by(id: params[:account_id]) || current_user.account\n    else\n      @account = current_user&amp;.account\n    end\n    unless @account\n      redirect_to dashboard_path, notice: I18n.t('no_account_assigned_notice')\n    end\n  end\nend\n</code></pre>\n\n<p>I'm writing controller_test for testing set_account method. My user sign in is done using devise. \nFor case where <code>current_user</code> is not admin and does not have account, my test is: </p>\n\n<pre><code>context 'When signed in as a general user without an account assigned' do\n  before do\n    general_user_no_account= FactoryGirl.create(:user, admin:false, account: nil)\n    sign_in general_user_no_account\n  end\n  it 'redirects to dashboard path with no account assigned notice' do\n\n    controller.set_account\n    expect(subject).to redirect_to(dashboard_path)\n  end\nend\n</code></pre>\n\n<p>However, I'm getting the following error: </p>\n\n<pre><code>ApplicationController set_account method When signed in as a general user without an account assigned redirects to dashboard path with no account assigned notice\n Failure/Error: redirect_to dashboard_path, notice: I18n.t('no_account_assigned_notice')\n\n Module::DelegationError:\n   ActionController::Metal#status= delegated to @_response.status=, but @_response is nil: #&lt;ApplicationController:0x00000000043c3a80 @_action_has_layout=true, @_routes=nil, @_request=#&lt;ActionController::TestRequest:0x00000000043ae720 @env={\"rack.version\"=&gt;[1, 3], \"rack.input\"=&gt;#&lt;StringIO:0x00000000042d56c8&gt;, \"rack.errors\"=&gt;#&lt;StringIO:0x00000000042d6c58&gt;, \"rack.multithread\"=&gt;true, \"rack.multiprocess\"=&gt;true, \"rack.run_once\"=&gt;false, \"REQUEST_METHOD\"=&gt;\"GET\", \"SERVER_NAME\"=&gt;\"example.org\", \"SERVER_PORT\"=&gt;\"80\", \"QUERY_STRING\"=&gt;\"\", \"rack.url_scheme\"=&gt;\"http\", \"HTTPS\"=&gt;\"off\", \"SCRIPT_NAME\"=&gt;\"\", \"CONTENT_LENGTH\"=&gt;\"0\", \"HTTP_HOST\"=&gt;\"test.host\", \"REMOTE_ADDR\"=&gt;\"0.0.0.0\", \"HTTP_USER_AGENT\"=&gt;\"Rails Testing\", \"action_dispatch.parameter_filter\"=&gt;[:password], \"action_dispatch.redirect_filter\"=&gt;[], \"action_dispatch.secret_token\"=&gt;nil, \"action_dispatch.secret_key_base\"=&gt;\"2ab3fc157e0e5a7b218fd3dc8e77e8a41a0c69a15935e6701bc2c292ead510208d29695abf784bdce95a4bbb0cbc388847a5f54bcc6359cd7a4ece3780db7a79\", \"action_dispatch.show_exceptions\"=&gt;false, \"action_dispatch.show_detailed_exceptions\"=&gt;true, \"action_dispatch.logger\"=&gt;#&lt;ActiveSupport::Logger:0x000000000443ea50 @level=0, @progname=nil, @default_formatter=#&lt;Logger::Formatter:0x000000000443e9b0 @datetime_format=nil&gt;, @formatter=#&lt;ActiveSupport::Logger::SimpleFormatter:0x00000000045e80b8 @datetime_format=nil, @thread_key=\"activesupport_tagged_logging_tags:36651100\"&gt;, @logdev=#&lt;Logger::LogDevice:0x000000000443e960 @shift_period_suffix=nil, @shift_size=nil, @shift_age=nil, @filename=nil, @dev=#&lt;File:/vagrant/dispatch/log/test.log&gt;, @mon_owner=nil, @mon_count=0, @mon_mutex=#&lt;Thread::Mutex:0x000000000443e8c0&gt;&gt;, @local_levels=#&lt;Concurrent::Map:0x0000000443e820 entries=0 default_proc=nil&gt;&gt;, \"action_dispatch.backtrace_cleaner\"=&gt;#&lt;Rails::BacktraceCleaner:0x00000000043b0908 @filters=[#&lt;Proc:0x00000000043b06b0@/home/vagrant/.rvm/gems/ruby-2.4.4@dispatch/gems/railties-5.1.2/lib/rails/backtrace_cleaner.rb:14&gt;, #&lt;Proc:0x00000000043b0688@/home/vagrant/.rvm/gems/ruby-2.4.4@dispatch/gems/railties-5.1.2/lib/rails/backtrace_cleaner.rb:15&gt;, #&lt;Proc:0x00000000043b0660@/home/vagrant/.rvm/gems/ruby-2.4.4@dispatch/gems/railties-5.1.2/lib/rails/backtrace_cleaner.rb:16&gt;, #&lt;Proc:0x00000000043afad0@/home/vagrant/.rvm/gems/ruby-2.4.4@dispatch/gems/railties-5.1.2/lib/rails/backtrace_cleaner.rb:29&gt;], @silencers=[#&lt;Proc:0x00000000043afaa8@/home/vagrant/.rvm/gems/ruby-2.4.4@dispatch/gems/railties-5.1.2/lib/rails/backtrace_cleaner.rb:19&gt;], @root=\"/vagrant/dispatch/\"&gt;, \"action_dispatch.key_generator\"=&gt;#&lt;ActiveSupport::CachingKeyGenerator:0x00000000043b3568 @key_generator=#&lt;ActiveSupport::KeyGenerator:0x00000000043b3608 @secret=\"2ab3fc157e0e5a7b218fd3dc8e77e8a41a0c69a15935e6701bc2c292ead510208d29695abf784bdce95a4bbb0cbc388847a5f54bcc6359cd7a4ece3780db7a79\", @iterations=1000&gt;, @cache_keys=#&lt;Concurrent::Map:0x000000043b3540 entries=1 default_proc=nil&gt;&gt;, \"action_dispatch.http_auth_salt\"=&gt;\"http authentication\", \"action_dispatch.signed_cookie_salt\"=&gt;\"signed cookie\", \"action_dispatch.encrypted_cookie_salt\"=&gt;\"encrypted cookie\", \"action_dispatch.encrypted_signed_cookie_salt\"=&gt;\"signed encrypted cookie\", \"action_dispatch.cookies_serializer\"=&gt;:json, \"action_dispatch.cookies_digest\"=&gt;nil, \"rack.request.cookie_hash\"=&gt;{}, \"rack.session\"=&gt;{\"warden.user.user.key\"=&gt;[[\"a02e2162-5ad9-4d43-89b8-2f03943409bf\"], \"$2a$04$HU2KgyE6y//kfV.Pw.a24u\"]}, \"rack.session.options\"=&gt;{:key=&gt;\"rack.session\", :path=&gt;\"/\", :domain=&gt;nil, :expire_after=&gt;nil, :secure=&gt;false, :httponly=&gt;true, :defer=&gt;false, :renew=&gt;false, :sidbits=&gt;128, :cookie_only=&gt;true, :secure_random=&gt;SecureRandom}, \"action_controller.instance\"=&gt;#&lt;ApplicationController:0x00000000043c3a80 ...&gt;, \"warden\"=&gt;Warden::Proxy:35479380 @config={:default_scope=&gt;:user, :scope_defaults=&gt;{}, :default_strategies=&gt;{:user=&gt;[:rememberable, :database_authenticatable]}, :intercept_401=&gt;false, :failure_app=&gt;#&lt;Devise::Delegator:0x0000000003ed9060&gt;}, \"action_dispatch.request.path_parameters\"=&gt;{}, \"action_dispatch.request.flash_hash\"=&gt;#&lt;ActionDispatch::Flash::FlashHash:0x0000000000ea5dd0 @discard=#&lt;Set: {}&gt;, @flashes={\"notice\"=&gt;\"No account has been assigned to you yet.\"}, @now=nil&gt;}, @filtered_parameters=nil, @filtered_env=nil, @filtered_path=nil, @protocol=\"http://\", @port=80, @method=nil, @request_method=nil, @remote_ip=nil, @original_fullpath=nil, @fullpath=nil, @ip=nil, @controller_class=ApplicationController, @custom_param_parsers={:xml=&gt;#&lt;Proc:0x00000000043ae540@/home/vagrant/.rvm/gems/ruby-2.4.4@dispatch/gems/actionpack-5.1.2/lib/action_controller/test_case.rb:58 (lambda)&gt;}&gt;, @_response=nil, @_params=&lt;ActionController::Parameters {} permitted: false&gt;, @current_user=#&lt;User id: \"a02e2162-5ad9-4d43-89b8-2f03943409bf\", email: \"edna@langosh.org\", created_at: \"2018-08-06 15:30:33\", updated_at: \"2018-08-06 15:30:33\", account_id: nil, admin: false&gt;, @account=nil, @_url_options={:host=&gt;\"test.host\", :port=&gt;nil, :protocol=&gt;\"http://\", :_recall=&gt;{}}&gt;\n</code></pre>\n\n<p>I've consulted <a href=\"https://stackoverflow.com/questions/10989461/runtimeerror-actioncontrollerrackdelegation-in-rspec-2-10-1-for-rails-3-1-4-a\">RunTimeError: ActionController::RackDelegation in rspec 2.10.1 for rails 3.1.4 application controller</a> and put <code>get :index</code>, <code>get :'/'</code> but still no luck.</p>\n\n<p>Any help is appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "e-commerce", "spree"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1533566063, "post_id": 51709702, "comment_id": 90381220, "body": "Please <b>show us some code</b>. It&#39;s very unclear how to answer your question without seeing more context. <code>if user.email == &quot;foo@example.com&quot;; ...; else ....</code> ??!!"}, {"owner": {"reputation": 2036, "user_id": 1066183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/71845161952bbfcb58f4e474164453ef?s=128&d=identicon&r=PG", "display_name": "user1066183", "link": "https://stackoverflow.com/users/1066183/user1066183"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533574713, "post_id": 51709702, "comment_id": 90386194, "body": "Is possible to do this without programming? My question is about a feature of spree not about programming a new feature."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533576620, "post_id": 51709702, "comment_id": 90387047, "body": "<i>Without programming</i>? How would you expect that to work? Again, I have no idea how to answer your question without seeing some more context. (And besides, can&#39;t we just achieve this by a single <code>if</code> statement?)"}, {"owner": {"reputation": 2036, "user_id": 1066183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/71845161952bbfcb58f4e474164453ef?s=128&d=identicon&r=PG", "display_name": "user1066183", "link": "https://stackoverflow.com/users/1066183/user1066183"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533590071, "post_id": 51709702, "comment_id": 90392809, "body": "Is there a front end built-in mode to achieve this? If not I am going to programming my feature."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533590970, "post_id": 51709702, "comment_id": 90393096, "body": "How do you expect to add a &quot;front end mode&quot; with no code? I still don&#39;t understand your question."}, {"owner": {"reputation": 2036, "user_id": 1066183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/71845161952bbfcb58f4e474164453ef?s=128&d=identicon&r=PG", "display_name": "user1066183", "link": "https://stackoverflow.com/users/1066183/user1066183"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533634308, "post_id": 51709702, "comment_id": 90407170, "body": "I repeat: spree offers this feature out of the box or not?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 2036, "user_id": 1066183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/71845161952bbfcb58f4e474164453ef?s=128&d=identicon&r=PG", "display_name": "user1066183", "link": "https://stackoverflow.com/users/1066183/user1066183"}, "edited": false, "score": 0, "creation_date": 1533635019, "post_id": 51709702, "comment_id": 90407625, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/177553/discussion-between-tom-lord-and-user1066183\">continue this discussion in chat</a>."}], "owner": {"reputation": 2036, "user_id": 1066183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/71845161952bbfcb58f4e474164453ef?s=128&d=identicon&r=PG", "display_name": "user1066183", "link": "https://stackoverflow.com/users/1066183/user1066183"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533564936, "creation_date": 1533564936, "question_id": 51709702, "link": "https://stackoverflow.com/questions/51709702/spree-commerce-show-only-certain-product-to-a-specif-user", "title": "Spree Commerce show only certain product to a specif user", "body": "<p>Spree Commerce 3.6.\nI have created some variants of the same product with different price. I want to show for a specific user only certain variant of product. Is possible? </p>\n\n<p>Example: product A, variants: a1, a2, a3. For the user foo@example.com is possible to show only a2?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "edited": false, "score": 1, "creation_date": 1534281477, "post_id": 51711624, "comment_id": 90653036, "body": "It seems I need to use <code>label_id</code> instead of <code>label_name</code>. I got the id by <code>service.list_user_labels(:me).labels.find{|l| l.name == &#39;label_name&#39;}.id</code>, Thanks for the answer!"}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 0, "last_activity_date": 1534281740, "last_edit_date": 1534281740, "creation_date": 1533571461, "answer_id": 51711624, "question_id": 51709318, "link": "https://stackoverflow.com/questions/51709318/how-to-get-messages-from-gmail-by-using-official-gem/51711624#51711624", "title": "How to get messages from Gmail by using official gem", "body": "<p>The answer is <a href=\"https://www.rubydoc.info/github/google/google-api-ruby-client/Google/Apis/GmailV1/GmailService#list_user_messages-instance_method\" rel=\"nofollow noreferrer\">found in the <code>GmailService</code> class</a>:</p>\n\n<blockquote>\n  <p><strong>#list_user_messages</strong>(user_id, include_spam_trash: nil, <strong>label_ids: nil</strong>, max_results: nil, page_token: nil, q: nil, fields: nil, quota_user: nil, user_ip: nil, options: nil) </p>\n  \n  <p><strong>Parameters</strong>:  </p>\n  \n  <ul>\n  <li><strong>user_id</strong>     </li>\n  <li><strong>label_ids</strong> (<em>Array&lt;String>, String</em>) \u2014 Only return messages with labels that match all of the specified label IDs.</li>\n  <li>...</li>\n  </ul>\n</blockquote>\n\n<p>So to get messages with specific labels you call <code>list_user_messages</code>, with either a single label ID, or an array of label IDs:</p>\n\n<pre><code>service.list_user_messages(user_id, label_ids: \"LID\")\nservice.list_user_messages(user_id, label_ids: [\"LID1\", \"LID2\", \"LID3\"])\n</code></pre>\n"}], "owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 51711624, "answer_count": 1, "score": 1, "last_activity_date": 1534281740, "creation_date": 1533563694, "question_id": 51709318, "link": "https://stackoverflow.com/questions/51709318/how-to-get-messages-from-gmail-by-using-official-gem", "title": "How to get messages from Gmail by using official gem", "body": "<p>I'm using a <code>gmail</code> gem, but it will be deprecated from Aug 19, 2018.\nSo I tried to change Google offical gem.</p>\n\n<p>I want to get all unread messages with a specific label like this.</p>\n\n<pre><code>gmail = Gmail.connect('example@gmail.com', 'password')\ngmail.label('mylabel').find(:unread).each do |message|\n   # to something\nend\n</code></pre>\n\n<p>According to this document, I could get labels from my account.\n<a href=\"https://developers.google.com/gmail/api/quickstart/ruby\" rel=\"nofollow noreferrer\">https://developers.google.com/gmail/api/quickstart/ruby</a>    </p>\n\n<pre><code># Initialize the API\nservice = Google::Apis::GmailV1::GmailService.new\nservice.client_options.application_name = APPLICATION_NAME\nservice.authorization = authorize\n\n# Show the user's labels\nuser_id = 'me'\nresult = service.list_user_labels(user_id)\nputs 'Labels:'\nputs 'No labels found' if result.labels.empty?\nresult.labels.each { |label| puts \"- #{label.name}\" }\n</code></pre>\n\n<p>But only by reading a document in <code>rubydoc</code> I couldn't find out how to get messages by Gmail API.</p>\n\n<p><a href=\"https://www.rubydoc.info/github/google/google-api-ruby-client/Google/Apis/GmailV1\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/github/google/google-api-ruby-client/Google/Apis/GmailV1</a></p>\n\n<p>How can I implement the function?\nWhere can I find the exmples for the library?</p>\n"}, {"tags": ["ruby", "selenium", "cucumber", "appium", "selenium-grid"], "comments": [{"owner": {"reputation": 1655, "user_id": 1289629, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/udDdo.png?s=128&g=1", "display_name": "Vighnesh Pai", "link": "https://stackoverflow.com/users/1289629/vighnesh-pai"}, "edited": false, "score": 0, "creation_date": 1533615112, "post_id": 51709135, "comment_id": 90398207, "body": "Speaking of Appium with ruby, are you using Cucumber-Gherkin-Ruby set-up?"}, {"owner": {"reputation": 63, "user_id": 9468259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a7cc6e936212f5db67b59bebb42f7dc?s=128&d=identicon&r=PG&f=1", "display_name": "Vini Gabriel", "link": "https://stackoverflow.com/users/9468259/vini-gabriel"}, "reply_to_user": {"reputation": 1655, "user_id": 1289629, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/udDdo.png?s=128&g=1", "display_name": "Vighnesh Pai", "link": "https://stackoverflow.com/users/1289629/vighnesh-pai"}, "edited": false, "score": 0, "creation_date": 1533643821, "post_id": 51709135, "comment_id": 90413120, "body": "@VighneshPai, I&#39;m using this set"}], "answers": [{"tags": [], "owner": {"reputation": 1303, "user_id": 2235381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0061f9bd5384a544637692774a6e108f?s=128&d=identicon&r=PG", "display_name": "lojza", "link": "https://stackoverflow.com/users/2235381/lojza"}, "is_accepted": false, "score": 2, "last_activity_date": 1533631686, "creation_date": 1533631686, "answer_id": 51722574, "question_id": 51709135, "link": "https://stackoverflow.com/questions/51709135/how-can-i-run-parallel-tests-with-appium-using-selenium-grid/51722574#51722574", "title": "How can I run parallel tests with appium using selenium grid?", "body": "<p>You need proper capabilities definition and request.</p>\n\n<p>From my bit old notes (unfortunately for Android):</p>\n\n<p>Stop/kill Selenium Server, all Appium instances and all tests (Ruby/Cucumber).</p>\n\n<p>Start Selenium Server</p>\n\n<pre><code>java -jar selenium-server-standalone-3.6.0.jar -role hub\n</code></pre>\n\n<p>Save <code>SM_G900F.json</code> :</p>\n\n<pre><code>{\n  \"capabilities\":\n  [\n    {\n      \"applicationName\":\"SM_G900F\",\n      \"browserName\":\"android\",\n      \"deviceName\":\"SM_G900F\",\n      \"version\":\"7.0\",\n      \"maxInstances\":1,\n      \"platform\":\"Android\"\n    }\n  ],\n  \"configuration\":\n  {\n    \"cleanUpCycle\":2000,\n    \"timeout\":30000,\n    \"proxy\":\"org.openqa.grid.selenium.proxy.DefaultRemoteProxy\",\n    \"url\":\"http://127.0.0.1:80801/wd/hub\",\n    \"maxSession\":6,\n    \"port\":\"80801\",\n    \"bootstrap-port\":\"80802\",\n    \"host\": \"localhost\",\n    \"register\": true,\n    \"registerCycle\": 5000,\n    \"hubPort\": \"4444\",\n    \"hubHost\": \"localhost\"\n  }\n}\n</code></pre>\n\n<p>Make sure to change <code>80801</code> and <code>80802</code> to free ports for each device!</p>\n\n<p>Run appium:</p>\n\n<pre><code>appium --nodeconfig /path_to/SM_G900F.json -p 80801 --default-capabilities '{\"udid\":\"BOGAA1BBB412\"}'\n</code></pre>\n\n<p>Where udid is what <code>adb devices</code> gives you and again change <code>80801</code></p>\n\n<p>Check if device is registered correctly on <a href=\"http://127.0.0.1:4444/wd/console\" rel=\"nofollow noreferrer\">http://127.0.0.1:4444/wd/console</a></p>\n\n<p>And finally in ruby:</p>\n\n<pre><code>require 'appium_lib'\nopts_dut = {\n    caps: {\n        platformName: :android,\n        version: '7.0',\n        deviceName: '*',\n        appPackage: 'your.package',\n        appActivity: 'your.MainActivity',\n        noReset: true,\n        autoLaunch: false,\n        automationName: 'uiautomator2'\n    },\n    appium_lib: {\n        server_url: 'http://127.0.0.1:4444/wd/hub',\n        wait_timeout: 300,\n        wait_interval: 100,\n        newCommandTimeout: 3000\n    }\n}\n@T = Appium::Driver.new(opts_dut, true).start_driver\n@T.find_elements(:uiautomator, \"new UiSelector().textMatches(\\\"(?is).*SEND.*\\\"))\")\nputs @T.page_source\n@T.quit\n</code></pre>\n\n<p>If I remember well requesting <code>deviceName</code> and/or <code>version</code> only works well. So if you start multiple nodes and specify <code>deviceName</code> and <code>version</code> correctly, you can then request it multiple time even in parallel. If you use wildcard <code>*</code> as in example above, it means any <code>deviceName</code>, so only <code>version</code> <code>7.0</code> is requested. Make sure run <code>@T.quit</code> to free device even if your test fail (put it in after hook). </p>\n"}], "owner": {"reputation": 63, "user_id": 9468259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a7cc6e936212f5db67b59bebb42f7dc?s=128&d=identicon&r=PG&f=1", "display_name": "Vini Gabriel", "link": "https://stackoverflow.com/users/9468259/vini-gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533631686, "creation_date": 1533563150, "question_id": 51709135, "link": "https://stackoverflow.com/questions/51709135/how-can-i-run-parallel-tests-with-appium-using-selenium-grid", "title": "How can I run parallel tests with appium using selenium grid?", "body": "<p>I tried up two different appium servers in my machine and start tests for iOS in one server and start Android tests in other. I tried execute too in two servers to tests in different iOS. </p>\n\n<p>But problem is when I execute to two iOS the tests that should happen in iOS1 are happen in iOS to, not always, have times that run on iOS1 and shuffle and then are executed on iOS2, when not, all run into clutter. Then I can't do execute tests in parallel in this format. </p>\n\n<p>For Android + iOS, only tests to iOS make do.</p>\n\n<p>How can I execute my tests in parallel using appium with Ruby, if not possible running in parallel how can I run in line?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "docker", "dockerfile"], "comments": [{"owner": {"reputation": 501, "user_id": 7775414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bd27W.jpg?s=128&g=1", "display_name": "tkrishtop", "link": "https://stackoverflow.com/users/7775414/tkrishtop"}, "edited": false, "score": 1, "creation_date": 1533563158, "post_id": 51708180, "comment_id": 90379274, "body": "what&#39;s the point of all this? Do you want to have docker image of mysql db or docker image of a simple linux with ruby installed?"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1533563222, "post_id": 51708180, "comment_id": 90379322, "body": "Also, what issue are you having in the first place?"}, {"owner": {"reputation": 41, "user_id": 9485392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ba951e25a2cfabbd86e69c524e09ae?s=128&d=identicon&r=PG&f=1", "display_name": "sethupathi", "link": "https://stackoverflow.com/users/9485392/sethupathi"}, "edited": false, "score": 0, "creation_date": 1533616533, "post_id": 51708180, "comment_id": 90398561, "body": "I am trying to run the rails app in the docker by connecting mysql."}], "owner": {"reputation": 41, "user_id": 9485392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ba951e25a2cfabbd86e69c524e09ae?s=128&d=identicon&r=PG&f=1", "display_name": "sethupathi", "link": "https://stackoverflow.com/users/9485392/sethupathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 411, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533560140, "creation_date": 1533560140, "question_id": 51708180, "link": "https://stackoverflow.com/questions/51708180/how-to-create-a-docker-image-with-ruby-and-mysql-that-can-be-run-in-different-sy", "title": "how to create a docker image with ruby and mysql that can be run in different systems", "body": "<p>I'm new to docker, I am trying to create a virtual docker image in ruby using mysql database and the docker image need to execute in different systems. it is possible to build the docker image without Docker-compose.yml (by using docker build or CMD) please help me in this.</p>\n\n<p>My <strong>Dockerfile</strong></p>\n\n<pre><code>FROM ruby:2.5\n\nRUN apt-get update -qq &amp;&amp; apt-get install -y build-essential libpq-dev nodejs\nRUN mkdir /myapp\nWORKDIR /myapp\n\nCOPY Gemfile /myapp/Gemfile\nCOPY Gemfile.lock /myapp/Gemfile.lock\n\nRUN bundle install\nCOPY . /myapp\n</code></pre>\n\n<p>and my <strong>Docker-compose.yml</strong></p>\n\n<pre><code>version: '3'\nservices:\n  db:\n    image: mysql:5.7\n    restart: always\n    environment:\n      MYSQL_ROOT_PASSWORD: letmein\n      MYSQL_DATABASE: myapp\n      MYSQL_USER: appuser\n      MYSQL_PASSWORD: letmein\n    ports:\n      - \"3307:3306\"\n  app:\n    build: .\n    command: bundel exec rails s -p 3000 -b '0.0.0.0'\n    volumes:\n      - \".:/myapp\"\n    ports:\n      - \"3001:3000\"\n    depends_on:\n      - db\n    links:\n      - db\n    environment:\n      DB_USER: root\n      DB_NAME: myapp\n      DB_PASSWORD: letmein\n      DB_HOST: db\n</code></pre>\n\n<p><strong>database.yml</strong></p>\n\n<pre><code>default: &amp;default\n  adapter: mysql2\n  encoding: utf8\n  pool: &lt;%= ENV.fetch(\"RAILS_MAX_THREADS\") { 5 } %&gt;\n  database: &lt;%= ENV['DB_NAME'] %&gt;\n  username: &lt;%= ENV['DB_USER'] %&gt;\n  password: &lt;%= ENV['DB_PASS'] %&gt;\n  host: &lt;%= ENV['DB_HOST'] %&gt;\n\ndevelopment:\n  &lt;&lt;: *default\n  database: myapp_development\n\ntest:\n  &lt;&lt;: *default\n  database: myapp_test\n\nproduction:\n  &lt;&lt;: *default\n  database: myapp_production\n  username: myapp\n  password: &lt;%= ENV['MYAPP_DATABASE_PASSWORD'] %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "amazon-web-services", "rubygems", "full-text-search", "geo"], "owner": {"reputation": 421, "user_id": 10130996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58411fd54b0352f580242debb34e4583?s=128&d=identicon&r=PG&f=1", "display_name": "zseikyocho", "link": "https://stackoverflow.com/users/10130996/zseikyocho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533551325, "creation_date": 1533551325, "question_id": 51705556, "link": "https://stackoverflow.com/questions/51705556/how-to-use-nazrin-gem-to-call-aws-cloudsearch-expr-method", "title": "How to use nazrin gem to call AWS CloudSearch expr method?", "body": "<p>From here we can know that use <code>expr</code> function can get special data:</p>\n\n<p><a href=\"https://docs.aws.amazon.com/cloudsearch/latest/developerguide/searching-locations.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/cloudsearch/latest/developerguide/searching-locations.html</a></p>\n\n<p>Use ruby <code>nazrin</code> gem also found the <code>expr</code> method:</p>\n\n<p><a href=\"https://github.com/tsuwatch/nazrin/blob/master/lib/nazrin/search_client.rb#L108\" rel=\"nofollow noreferrer\">https://github.com/tsuwatch/nazrin/blob/master/lib/nazrin/search_client.rb#L108</a></p>\n\n<p>But when tried to get special data as:</p>\n\n<pre><code>def get_data\n  City.search.expr(\"distance=haversin(#{params[:latitude], #{params[:longitude]}, 'latitude', 'longitude'})\").start(0).query(params[:keyword]).execute\nend\n</code></pre>\n\n<p>Got error:</p>\n\n<pre><code>Invalid syntax in 'expr' parameter: Unexpected character ('d' (code 100)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')\\n at [column: 2]\n</code></pre>\n\n<p>How to use it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 2655, "user_id": 2290098, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de60cd006373fac9a14599ca33cb3d67?s=128&d=identicon&r=PG", "display_name": "Sabyasachi Ghosh", "link": "https://stackoverflow.com/users/2290098/sabyasachi-ghosh"}, "edited": false, "score": 0, "creation_date": 1533623217, "post_id": 51714720, "comment_id": 90400849, "body": "I don&#39;t think this is the case, as if I kill the Sidekiq process it&#39;s releasing the memory, correct me if I am missing something."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2655, "user_id": 2290098, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de60cd006373fac9a14599ca33cb3d67?s=128&d=identicon&r=PG", "display_name": "Sabyasachi Ghosh", "link": "https://stackoverflow.com/users/2290098/sabyasachi-ghosh"}, "edited": false, "score": 0, "creation_date": 1533629011, "post_id": 51714720, "comment_id": 90403968, "body": "@SabyasachiGhosh:  huh, this IS the case. If you kill sidekiq process, you kills the VM instance that&#39;s holding the allocated memory, so it&#39;s released back to the OS."}], "tags": [], "owner": {"reputation": 580, "user_id": 1293749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08497221017521ae126ca4fa7134ce8e?s=128&d=identicon&r=PG", "display_name": "Jim Ryan", "link": "https://stackoverflow.com/users/1293749/jim-ryan"}, "is_accepted": false, "score": 5, "last_activity_date": 1533585035, "creation_date": 1533585035, "answer_id": 51714720, "question_id": 51704576, "link": "https://stackoverflow.com/questions/51704576/sidekiq-is-not-releasing-the-memory-after-finishing-the-job/51714720#51714720", "title": "Sidekiq is not releasing the memory after finishing the job", "body": "<p>My understanding is that Ruby MRI will not release memory back to the OS. If your Sidekiq job consumes a lot of memory, even if those objects are garbage collected, the memory will just be released back to Ruby, not back to the OS.  You should try to find a way to make your Sidekiq job(s) consume less memory, and assume that your workers will eventually allocate the maximum amount of memory that your most memory-consuming job requires. </p>\n"}, {"comments": [{"owner": {"reputation": 2655, "user_id": 2290098, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de60cd006373fac9a14599ca33cb3d67?s=128&d=identicon&r=PG", "display_name": "Sabyasachi Ghosh", "link": "https://stackoverflow.com/users/2290098/sabyasachi-ghosh"}, "edited": false, "score": 0, "creation_date": 1533636264, "post_id": 51721721, "comment_id": 90408380, "body": "I did everything whatever you have suggested, the only thing I can&#39;t change is the heavy background job, we need that heavy job."}, {"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "reply_to_user": {"reputation": 2655, "user_id": 2290098, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de60cd006373fac9a14599ca33cb3d67?s=128&d=identicon&r=PG", "display_name": "Sabyasachi Ghosh", "link": "https://stackoverflow.com/users/2290098/sabyasachi-ghosh"}, "edited": false, "score": 0, "creation_date": 1533640405, "post_id": 51721721, "comment_id": 90410977, "body": "can you divide that heavy job into small separate jobs?"}, {"owner": {"reputation": 2655, "user_id": 2290098, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de60cd006373fac9a14599ca33cb3d67?s=128&d=identicon&r=PG", "display_name": "Sabyasachi Ghosh", "link": "https://stackoverflow.com/users/2290098/sabyasachi-ghosh"}, "edited": false, "score": 0, "creation_date": 1533648874, "post_id": 51721721, "comment_id": 90416729, "body": "Mostly It is divided into a smaller one, but the combination of all those smaller jobs is huge."}, {"owner": {"reputation": 362, "user_id": 5749185, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4c53cab5b48d12fecb4e45e105c5209e?s=128&d=identicon&r=PG&f=1", "display_name": "Rails Developer", "link": "https://stackoverflow.com/users/5749185/rails-developer"}, "reply_to_user": {"reputation": 2655, "user_id": 2290098, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de60cd006373fac9a14599ca33cb3d67?s=128&d=identicon&r=PG", "display_name": "Sabyasachi Ghosh", "link": "https://stackoverflow.com/users/2290098/sabyasachi-ghosh"}, "edited": false, "score": 0, "creation_date": 1602666278, "post_id": 51721721, "comment_id": 113789993, "body": "@SabyasachiGhosh, Did you found any solution to this problem? I am also facing the same issue"}], "tags": [], "owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "is_accepted": false, "score": 2, "last_activity_date": 1533628779, "creation_date": 1533628779, "answer_id": 51721721, "question_id": 51704576, "link": "https://stackoverflow.com/questions/51704576/sidekiq-is-not-releasing-the-memory-after-finishing-the-job/51721721#51721721", "title": "Sidekiq is not releasing the memory after finishing the job", "body": "<p>Hi we were also facing the same problem. I researched about it a lot. Jim said it <a href=\"https://stackoverflow.com/a/51714720/5832250\">right</a>. It's Ruby MRI which is handling the resources. Actually your sidekiq workers are heavy or they're performing heavy operations and I guess it's making more object allocations as well. They more the resources it needs ruby takes the resources from the OS and then use it for the operations being performed in sidekiq. It doesn't release memory to the OS. It uses the same memory space and reuses it to provide resources to other objects.</p>\n\n<p>The things you have to keep in mind to stay out of this problem is to optimise your code.</p>\n\n<ul>\n<li>If you're performing multiple heavy operations and they can be divided then use separate workers for that.</li>\n<li>You can run your fetch query in batches to decrease the load on the server.</li>\n<li>Use array operations whenever they're necessary.</li>\n</ul>\n\n<p>you can run GC.start to force run Garbage collector after the end of your job to release the memory as well.</p>\n\n<p>when you kill a sidekiq process it releases the memory to OS because process is being run by ruby and you killed it so in the end ruby will release memory to the OS.</p>\n\n<p>I hope this helps. \nYou'll have to optimise your code and this is the same suggestion which is given by <a href=\"https://github.com/mperham/sidekiq\" rel=\"nofollow noreferrer\">mperham</a>.</p>\n"}], "owner": {"reputation": 2655, "user_id": 2290098, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de60cd006373fac9a14599ca33cb3d67?s=128&d=identicon&r=PG", "display_name": "Sabyasachi Ghosh", "link": "https://stackoverflow.com/users/2290098/sabyasachi-ghosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1220, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1533628779, "creation_date": 1533548090, "question_id": 51704576, "link": "https://stackoverflow.com/questions/51704576/sidekiq-is-not-releasing-the-memory-after-finishing-the-job", "title": "Sidekiq is not releasing the memory after finishing the job", "body": "<p>I am facing some strange issue with Sidekiq, I have a few heavy jobs running in the background with Sidekiq. but even after Sidekiq finished the job it's still holding the memory. what could be the reason?\nVersions</p>\n\n<pre><code>ruby : 2.2.4\nrails : 4.2.7\nsidekiq : 3.5.4\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/H9RO2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H9RO2.png\" alt=\"enter image description here\"></a>\nI have attached the memory log also.\nEven I haved check the <a href=\"https://github.com/mperham/sidekiq/wiki/Problems-and-Troubleshooting#memory-bloat\" rel=\"nofollow noreferrer\">link</a> but it couldn't help. I have even manually started the GC also. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "trix"], "comments": [{"owner": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1533545039, "post_id": 51703600, "comment_id": 90368243, "body": "it should go inside the form...in place of <code>&lt;%= form.text_area :content %&gt;</code>"}, {"owner": {"reputation": 51, "user_id": 10179930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f41f2c4561ce17a6ff417229beeb5540?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10179930/sebastian"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1533545219, "post_id": 51703600, "comment_id": 90368328, "body": "yeah but when i try to do            &lt;p&gt;           &lt;%= form.label :content %&gt;&lt;br/&gt;            &lt;%= form.trix_editor :content %&gt; the content field isnt rendered properly, i cant click in it and the editor didnt show up"}, {"owner": {"reputation": 13508, "user_id": 230202, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/014443228ec95795e9359bb239294dc1?s=128&d=identicon&r=PG", "display_name": "antpaw", "link": "https://stackoverflow.com/users/230202/antpaw"}, "edited": false, "score": 0, "creation_date": 1533546515, "post_id": 51703600, "comment_id": 90368995, "body": "maybe css or/and js for trix is missing?"}, {"owner": {"reputation": 51, "user_id": 10179930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f41f2c4561ce17a6ff417229beeb5540?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10179930/sebastian"}, "edited": false, "score": 0, "creation_date": 1533546567, "post_id": 51703600, "comment_id": 90369027, "body": "Yeah thought about that aswell, but I required/imported it like it\u2019s in the readme mentioned. Here is my code on GitHub <a href=\"https://github.com/WebSepp/Blogapp\" rel=\"nofollow noreferrer\">github.com/WebSepp/Blogapp</a>"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 10179930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f41f2c4561ce17a6ff417229beeb5540?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10179930/sebastian"}, "edited": false, "score": 0, "creation_date": 1533550977, "post_id": 51705333, "comment_id": 90371612, "body": "Thank you very much I will try that! What do you mean with in the form ? I don\u2019t have an extra _form file right now and thought it would be enough to to a form in the new file, wasn\u2019t that correct?"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 51, "user_id": 10179930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f41f2c4561ce17a6ff417229beeb5540?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10179930/sebastian"}, "edited": false, "score": 0, "creation_date": 1533551224, "post_id": 51705333, "comment_id": 90371758, "body": "The <code>&lt;%= form.text_area :content %&gt;</code> change to <code>&lt;%= form.trix_editor :content %&gt;</code> &amp; remove the below one @Sebastian"}, {"owner": {"reputation": 51, "user_id": 10179930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f41f2c4561ce17a6ff417229beeb5540?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10179930/sebastian"}, "edited": false, "score": 0, "creation_date": 1533557382, "post_id": 51705333, "comment_id": 90375307, "body": "thanks, tried that again but it is still not working, updated my github aswell"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 51, "user_id": 10179930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f41f2c4561ce17a6ff417229beeb5540?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10179930/sebastian"}, "edited": false, "score": 0, "creation_date": 1533557437, "post_id": 51705333, "comment_id": 90375343, "body": "Restart the server &amp; see what happen"}, {"owner": {"reputation": 51, "user_id": 10179930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f41f2c4561ce17a6ff417229beeb5540?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10179930/sebastian"}, "edited": false, "score": 0, "creation_date": 1533557624, "post_id": 51705333, "comment_id": 90375476, "body": "Yeah, also done that. I got 2 deprecation warnings. One for my sprockets method register-engine and one for my processor interface Less::Rails::ImportProcessor ... could that be the mistake?"}], "tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1533550565, "creation_date": 1533550565, "answer_id": 51705333, "question_id": 51703600, "link": "https://stackoverflow.com/questions/51703600/how-to-get-trix-rails-work-on-rails5-2-with-a-form/51705333#51705333", "title": "How to get trix-rails work on rails5.2 with a form", "body": "<p>In your <a href=\"https://github.com/WebSepp/Blogapp/blob/master/app/assets/javascripts/application.js\" rel=\"nofollow noreferrer\"><code>application.js</code></a> from GitHub I'm seeing the ordering like this </p>\n\n<pre><code>//= require trix\n//= require jquery\n//= require twitter/bootstrap\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>But it would be like this because <code>trix</code> is dependable with jquery, so you can use jquery above the list</p>\n\n<pre><code>//= require jquery\n//= require twitter/bootstrap\n//= require trix\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;%= form.trix_editor :content %&gt;\n</code></pre>\n\n<p>put inside the form.</p>\n\n<p>apply like this, I think it will work.</p>\n"}], "owner": {"reputation": 51, "user_id": 10179930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f41f2c4561ce17a6ff417229beeb5540?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10179930/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 717, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533550565, "creation_date": 1533544609, "last_edit_date": 1533546340, "question_id": 51703600, "link": "https://stackoverflow.com/questions/51703600/how-to-get-trix-rails-work-on-rails5-2-with-a-form", "title": "How to get trix-rails work on rails5.2 with a form", "body": "<p>iam wondering how i am supposed to implement the new <a href=\"https://github.com/kylefox/trix\" rel=\"nofollow noreferrer\">trix-rails gem</a> in my form. </p>\n\n<pre><code>&lt;%=form_for @post do |form| %&gt;\n    &lt;p&gt;\n      &lt;%= form.label :title %&gt;&lt;br/&gt;\n      &lt;%= form.text_field :title %&gt;\n    &lt;/p&gt;\n\n    &lt;p&gt; \n      &lt;%= form.label :content %&gt;&lt;br/&gt;\n\n      &lt;%= form.text_area :content %&gt;\n\n    &lt;/p&gt;\n    &lt;div class=\"field\"&gt;\n      &lt;%= form.label :image %&gt;\n      &lt;%= form.file_field :image %&gt;\n    &lt;/div&gt;\n    &lt;p&gt;\n      &lt;%= form.submit \"save\" %&gt;\n    &lt;/p&gt;\n  &lt;% end %&gt;\n&lt;%= form.trix_editor :content %&gt;\n</code></pre>\n\n<p>or something like that isn\u00b4t really working ... can someone help me out and tell me how i have to implement it correctly? Thank you so much!</p>\n"}, {"tags": ["ruby", "markdown", "jekyll", "liquid"], "answers": [{"comments": [{"owner": {"reputation": 565, "user_id": 8230537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Kqpq.jpg?s=128&g=1", "display_name": "KD Final", "link": "https://stackoverflow.com/users/8230537/kd-final"}, "edited": false, "score": 0, "creation_date": 1533807313, "post_id": 51717725, "comment_id": 90485792, "body": "thanks, i have fix this issue, in the beginning, i think this label won&#39;t effective in markdown syntax, while it take effect."}], "tags": [], "owner": {"reputation": 1530, "user_id": 3357235, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/b8Ays.jpg?s=128&g=1", "display_name": "Keith Mifsud", "link": "https://stackoverflow.com/users/3357235/keith-mifsud"}, "is_accepted": false, "score": 0, "last_activity_date": 1533606545, "creation_date": 1533606545, "answer_id": 51717725, "question_id": 51702588, "link": "https://stackoverflow.com/questions/51702588/jekyll-blog-error-could-not-locate-the-included-file-file-ext-in-any-includ/51717725#51717725", "title": "Jekyll blog error: Could not locate the included file &#39;file.ext&#39; in any &quot;_includes&quot;", "body": "<p>The error says that you're trying to include <code>file.ext</code> in your post. I don't think you need this. If you do, you must create a file named <code>file.ext</code> in <code>root/_includes</code>. But as I said, I don't think you need this file as the docs are simply telling you how to include a file of any extension in a post. Just remove <code>{% include file.ext %}</code> from you post.</p>\n"}], "owner": {"reputation": 565, "user_id": 8230537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Kqpq.jpg?s=128&g=1", "display_name": "KD Final", "link": "https://stackoverflow.com/users/8230537/kd-final"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 451, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533606545, "creation_date": 1533540695, "question_id": 51702588, "link": "https://stackoverflow.com/questions/51702588/jekyll-blog-error-could-not-locate-the-included-file-file-ext-in-any-includ", "title": "Jekyll blog error: Could not locate the included file &#39;file.ext&#39; in any &quot;_includes&quot;", "body": "<p>I'm a newbie to use jekyll as github blog page creater. now i try to write a md file under _posts folder, i copy the text and layout from <a href=\"https://jekyllrb.com/docs/structure/\" rel=\"nofollow noreferrer\">Jekyll Docs</a>, <a href=\"https://i.stack.imgur.com/J93dc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J93dc.png\" alt=\"enter image description here\"></a> due to it contains some Liquid syntax(showed above).\nWhen i run Jekyll in local, the below error is showed.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Liquid Exception: Could not locate the included file 'file.ext' in any of\r\n [\"C:/Developments/GitRepository/testRepository/blogFork1/_includes\"]. \r\nEnsure it exists in one of those directories and, if it is a symlink, \r\ndoes not point outside your site source. \r\nin C:/Developments/blogFork1/_posts/2018-08-03-first-blog.md</code></pre>\r\n</div>\r\n</div>\r\n\nWhat i write in md file: \n<a href=\"https://i.stack.imgur.com/4rXAF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4rXAF.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I treat those statement as general statement? Thanks for anyone's help!</p>\n"}, {"tags": ["ios", "ruby", "jenkins", "bundler", "fastlane"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 9928549, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ynR3Z0vMus/AAAAAAAAAAI/AAAAAAAAAAA/R3p4BPh_sbY/photo.jpg?sz=128", "display_name": "Fabian Schmitz", "link": "https://stackoverflow.com/users/9928549/fabian-schmitz"}, "edited": false, "score": 0, "creation_date": 1533556349, "post_id": 51704347, "comment_id": 90374645, "body": "Thank you very much! That solved this error. I had to add a <code>&quot;</code>at the start and end of the <code>GEM_HOME</code> and <code>GEM_PATH</code>"}], "tags": [], "owner": {"reputation": 2494, "user_id": 1501847, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4VWDO.jpg?s=128&g=1", "display_name": "zero3nna", "link": "https://stackoverflow.com/users/1501847/zero3nna"}, "is_accepted": true, "score": 2, "last_activity_date": 1533548302, "last_edit_date": 1533548302, "creation_date": 1533547362, "answer_id": 51704347, "question_id": 51702371, "link": "https://stackoverflow.com/questions/51702371/jekins-ios-fastlane-build-could-not-find-bundler/51704347#51704347", "title": "Jekins iOS fastlane build: Could not find &#39;bundler&#39;", "body": "<p>Try to set your source to rvm, I have a setup like this:</p>\n\n<pre><code>export GEM_HOME=\\$HOME/.rvm/gems/ruby-2.5.0\nexport GEM_PATH=\\$HOME/.rvm/gems/ruby-2.5.0:\\$HOME/.rvm/gems/ruby-2.5.0@global\nLANG=en_US.UTF-8\nsource \"\\$HOME/.rvm/scripts/rvm\"\nbundle update &amp;&amp; bundle install\nbundle exec fastlane $cmd\n</code></pre>\n\n<p>It looks like your are using the wrong ruby version in the Jenkins JVM:</p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0...\n</code></pre>\n\n<p>you may need to set the right version with <code>rvm use 2.5.0</code> before calling <code>bundle ...</code></p>\n\n<p>The main problem with Jenkins is, that it is running in a different environment then your terminal (your Mac in general) because of the JVM it's working in.\nDuo to this setup, you need to call your <code>setup</code> like mine always before you make a call to your Bundler (or any ruby gem).</p>\n"}], "owner": {"reputation": 53, "user_id": 9928549, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ynR3Z0vMus/AAAAAAAAAAI/AAAAAAAAAAA/R3p4BPh_sbY/photo.jpg?sz=128", "display_name": "Fabian Schmitz", "link": "https://stackoverflow.com/users/9928549/fabian-schmitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2874, "favorite_count": 0, "accepted_answer_id": 51704347, "answer_count": 1, "score": 5, "last_activity_date": 1533548302, "creation_date": 1533539749, "last_edit_date": 1533541222, "question_id": 51702371, "link": "https://stackoverflow.com/questions/51702371/jekins-ios-fastlane-build-could-not-find-bundler", "title": "Jekins iOS fastlane build: Could not find &#39;bundler&#39;", "body": "<p>I try to use Jenkins in combination with fastlane. The mac on which the build is executed is a slave of the jenkins master. The master is installed on a windows 10 system.</p>\n\n<p>When trying to build an iOS Build with Jenkins and using <code>bundle install</code> or <code>bundle exec fastlane beta</code> I always get the Error:</p>\n\n<blockquote>\n  <p>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'bundler' (>= 0.a) among 253 total gem(s) (Gem::LoadError)</p>\n\n<pre><code>from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\nfrom /Users/MY_USER/.rvm/gems/ruby-2.5.0/bin/bundle:25:in `&lt;main&gt;'\nfrom /Users/MY_USER/.rvm/gems/ruby-2.5.0/bin/ruby_executable_hooks:24:in `eval'\nfrom /Users/MY_USER/.rvm/gems/ruby-2.5.0/bin/ruby_executable_hooks:24:in `&lt;main&gt;'\n</code></pre>\n</blockquote>\n\n<p>When I execute the command <code>bundle install</code> in the terminal on the mac itself, the command works like expected.</p>\n\n<p>My Jenkins command looks like this:</p>\n\n<pre><code>export PATH=\"/usr/local/bin:$PATH\"\nexport PATH=\"$HOME/.fastlane/bin:$PATH\"\nexport PATH=\"$HOME/.rvm/bin:$PATH\"\nexport PATH=\"$HOME/.rvm/bin/rvm:$PATH\"\nexport PATH=\"$HOME/.rvm/gems/ruby-2.5.0:$PATH\"\nexport PATH=\"$HOME/.rvm/gems/ruby-2.5.0/bin:$PATH\"\n\nbundle install\nbundle exec fastlane beta\n</code></pre>\n\n<p>I also tried the full path for the command: <code>$HOME/.rvm/gems/ruby-2.5.0/bin/bundle install</code> but that results in the same error.</p>\n\n<p>If I try to run fastlane without the <code>bundle</code> command, then the same error occurs just with <code>Could not find 'fastlane'</code>. So I think it has something to do with the paths and Jenkins not finding / getting the right paths to the right folder. But I have no idea where the error in the setup is hidden.</p>\n\n<p>Additional Info:</p>\n\n<p><code>echo $PATH</code> returns:</p>\n\n<pre><code>/Users/MY_USER/.rvm/gems/ruby-2.5.0/bin:/Users/MY_USER/.rvm/gems/ruby-2.5.0@global/bin:/Users/MY_USER/.rvm/rubies/ruby-2.5.0/bin:/Users/MY_USER/.rvm/gems/ruby-2.5.0:/usr/local/bin:/Users/MY_USER/.fastlane/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/appfiff/Development/android-sdk-macosx 2/platform-tools:/Users/appfiff/Development/android-sdk-macosx 2/tools:/Users/MY_USER/.rvm/rubies/ruby-2.5.0/bin/u3d:/usr/local/git/bin:/Users/MY_USER/.rvm/bin:/Users/MY_USER/.rvm/rubies/ruby-2.5.0/bin/u3d\n</code></pre>\n\n<p>The full output of the Jenkins Command is:</p>\n\n<pre><code>+ export PATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin/:/Users/MY_USER/.rvm/bin\n+ PATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin/:/Users/MY_USER/.rvm/bin\n+ export PATH=/Users/MY_USER/.fastlane/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin/:/Users/MY_USER/.rvm/bin\n+ PATH=/Users/MY_USER/.fastlane/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin/:/Users/MY_USER/.rvm/bin\n+ export PATH=/Users/MY_USER/.rvm/bin:/Users/MY_USER/.fastlane/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin/:/Users/MY_USER/.rvm/bin\n+ PATH=/Users/MY_USER/.rvm/bin:/Users/MY_USER/.fastlane/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin/:/Users/MY_USER/.rvm/bin\n+ export PATH=/Users/MY_USER/.rvm/bin/rvm:/Users/MY_USER/.rvm/bin:/Users/MY_USER/.fastlane/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin/:/Users/MY_USER/.rvm/bin\n+ PATH=/Users/MY_USER/.rvm/bin/rvm:/Users/MY_USER/.rvm/bin:/Users/MY_USER/.fastlane/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin/:/Users/MY_USER/.rvm/bin\n+ export PATH=/Users/MY_USER/.rvm/gems/ruby-2.5.0:/Users/MY_USER/.rvm/bin/rvm:/Users/MY_USER/.rvm/bin:/Users/MY_USER/.fastlane/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin/:/Users/MY_USER/.rvm/bin\n+ PATH=/Users/MY_USER/.rvm/gems/ruby-2.5.0:/Users/MY_USER/.rvm/bin/rvm:/Users/MY_USER/.rvm/bin:/Users/MY_USER/.fastlane/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin/:/Users/apppfiff/.rvm/bin\n+ export PATH=/Users/MY_USER/.rvm/gems/ruby-2.5.0/bin:/Users/MY_USER/.rvm/gems/ruby-2.5.0:/Users/MY_USER/.rvm/bin/rvm:/Users/MY_USER/.rvm/bin:/Users/MY_USER/.fastlane/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin/:/Users/MY_USER/.rvm/bin\n+ PATH=/Users/MY_USER/.rvm/gems/ruby-2.5.0/bin:/Users/MY_USER/.rvm/gems/ruby-2.5.0:/Users/MY_USER/.rvm/bin/rvm:/Users/MY_USER/.rvm/bin:/Users/MY_USER/.fastlane/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin/:/Users/MY_USER/.rvm/bin\n+ /Users/MY_USER/.rvm/gems/ruby-2.5.0/bin/bundle install\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'bundler' (&gt;= 0.a) among 253 total gem(s) (Gem::LoadError)\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n    from /Users/MY_USER/.rvm/gems/ruby-2.5.0/bin/bundle:25:in `&lt;main&gt;'\n    from /Users/MY_USER/.rvm/gems/ruby-2.5.0/bin/ruby_executable_hooks:24:in `eval'\n    from /Users/MY_USER/.rvm/gems/ruby-2.5.0/bin/ruby_executable_hooks:24:in `&lt;main&gt;'\n</code></pre>\n\n<p>.</p>\n\n<pre><code>$ which bundle\n/Users/MY_USER/.rvm/gems/ruby-2.5.0/bin/bundle\n\n$ which ruby\n/Users/MY_USER/.rvm/rubies/ruby-2.5.0/bin/ruby\n\n$ gem list bundler\n*** LOCAL GEMS ***\n\nbundler (1.16.3)\nbundler-unload (1.0.2)\nrubygems-bundler (1.4.4)\n</code></pre>\n\n<p>My Gemfile:</p>\n\n<pre><code>source \"https://rubygems.org\"\n\ngem \"fastlane\"\n</code></pre>\n\n<p>My Gemfile.lock:</p>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    CFPropertyList (3.0.0)\n    addressable (2.5.2)\n      public_suffix (&gt;= 2.0.2, &lt; 4.0)\n    atomos (0.1.2)\n    babosa (1.0.2)\n    claide (1.0.2)\n    colored (1.2)\n    colored2 (3.1.2)\n    commander-fastlane (4.4.6)\n      highline (~&gt; 1.7.2)\n    declarative (0.0.10)\n    declarative-option (0.1.0)\n    domain_name (0.5.20180417)\n      unf (&gt;= 0.0.5, &lt; 1.0.0)\n    dotenv (2.5.0)\n    emoji_regex (0.1.1)\n    excon (0.62.0)\n    faraday (0.15.2)\n      multipart-post (&gt;= 1.2, &lt; 3)\n    faraday-cookie_jar (0.0.6)\n      faraday (&gt;= 0.7.4)\n      http-cookie (~&gt; 1.0.0)\n    faraday_middleware (0.12.2)\n      faraday (&gt;= 0.7.4, &lt; 1.0)\n    fastimage (2.1.3)\n    fastlane (2.100.0)\n      CFPropertyList (&gt;= 2.3, &lt; 4.0.0)\n      addressable (&gt;= 2.3, &lt; 3.0.0)\n      babosa (&gt;= 1.0.2, &lt; 2.0.0)\n      bundler (&gt;= 1.12.0, &lt; 2.0.0)\n      colored\n      commander-fastlane (&gt;= 4.4.6, &lt; 5.0.0)\n      dotenv (&gt;= 2.1.1, &lt; 3.0.0)\n      emoji_regex (~&gt; 0.1)\n      excon (&gt;= 0.45.0, &lt; 1.0.0)\n      faraday (~&gt; 0.9)\n      faraday-cookie_jar (~&gt; 0.0.6)\n      faraday_middleware (~&gt; 0.9)\n      fastimage (&gt;= 2.1.0, &lt; 3.0.0)\n      gh_inspector (&gt;= 1.1.2, &lt; 2.0.0)\n      google-api-client (&gt;= 0.21.2, &lt; 0.22.0)\n      highline (&gt;= 1.7.2, &lt; 2.0.0)\n      json (&lt; 3.0.0)\n      mini_magick (~&gt; 4.5.1)\n      multi_json\n      multi_xml (~&gt; 0.5)\n      multipart-post (~&gt; 2.0.0)\n      plist (&gt;= 3.1.0, &lt; 4.0.0)\n      public_suffix (~&gt; 2.0.0)\n      rubyzip (&gt;= 1.2.1, &lt; 2.0.0)\n      security (= 0.1.3)\n      simctl (~&gt; 1.6.3)\n      slack-notifier (&gt;= 2.0.0, &lt; 3.0.0)\n      terminal-notifier (&gt;= 1.6.2, &lt; 2.0.0)\n      terminal-table (&gt;= 1.4.5, &lt; 2.0.0)\n      tty-screen (&gt;= 0.6.3, &lt; 1.0.0)\n      tty-spinner (&gt;= 0.8.0, &lt; 1.0.0)\n      word_wrap (~&gt; 1.0.0)\n      xcodeproj (&gt;= 1.5.7, &lt; 2.0.0)\n      xcpretty (~&gt; 0.2.8)\n      xcpretty-travis-formatter (&gt;= 0.0.3)\n    gh_inspector (1.1.3)\n    google-api-client (0.21.2)\n      addressable (~&gt; 2.5, &gt;= 2.5.1)\n      googleauth (&gt;= 0.5, &lt; 0.7.0)\n      httpclient (&gt;= 2.8.1, &lt; 3.0)\n      mime-types (~&gt; 3.0)\n      representable (~&gt; 3.0)\n      retriable (&gt;= 2.0, &lt; 4.0)\n    googleauth (0.6.2)\n      faraday (~&gt; 0.12)\n      jwt (&gt;= 1.4, &lt; 3.0)\n      logging (~&gt; 2.0)\n      memoist (~&gt; 0.12)\n      multi_json (~&gt; 1.11)\n      os (~&gt; 0.9)\n      signet (~&gt; 0.7)\n    highline (1.7.10)\n    http-cookie (1.0.3)\n      domain_name (~&gt; 0.5)\n    httpclient (2.8.3)\n    json (2.1.0)\n    jwt (2.1.0)\n    little-plugger (1.1.4)\n    logging (2.2.2)\n      little-plugger (~&gt; 1.1)\n      multi_json (~&gt; 1.10)\n    memoist (0.16.0)\n    mime-types (3.1)\n      mime-types-data (~&gt; 3.2015)\n    mime-types-data (3.2016.0521)\n    mini_magick (4.5.1)\n    multi_json (1.13.1)\n    multi_xml (0.6.0)\n    multipart-post (2.0.0)\n    nanaimo (0.2.6)\n    naturally (2.2.0)\n    os (0.9.6)\n    plist (3.4.0)\n    public_suffix (2.0.5)\n    representable (3.0.4)\n      declarative (&lt; 0.1.0)\n      declarative-option (&lt; 0.2.0)\n      uber (&lt; 0.2.0)\n    retriable (3.1.2)\n    rouge (2.0.7)\n    rubyzip (1.2.1)\n    security (0.1.3)\n    signet (0.8.1)\n      addressable (~&gt; 2.3)\n      faraday (~&gt; 0.9)\n      jwt (&gt;= 1.5, &lt; 3.0)\n      multi_json (~&gt; 1.10)\n    simctl (1.6.5)\n      CFPropertyList\n      naturally\n    slack-notifier (2.3.2)\n    terminal-notifier (1.8.0)\n    terminal-table (1.8.0)\n      unicode-display_width (~&gt; 1.1, &gt;= 1.1.1)\n    tty-cursor (0.6.0)\n    tty-screen (0.6.5)\n    tty-spinner (0.8.0)\n      tty-cursor (&gt;= 0.5.0)\n    uber (0.1.0)\n    unf (0.1.4)\n      unf_ext\n    unf_ext (0.0.7.5)\n    unicode-display_width (1.4.0)\n    word_wrap (1.0.0)\n    xcodeproj (1.5.9)\n      CFPropertyList (&gt;= 2.3.3, &lt; 4.0)\n      atomos (~&gt; 0.1.2)\n      claide (&gt;= 1.0.2, &lt; 2.0)\n      colored2 (~&gt; 3.1)\n      nanaimo (~&gt; 0.2.5)\n    xcpretty (0.2.8)\n      rouge (~&gt; 2.0.7)\n    xcpretty-travis-formatter (1.0.0)\n      xcpretty (~&gt; 0.2, &gt;= 0.0.7)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  fastlane\n\nBUNDLED WITH\n   1.16.3\n</code></pre>\n\n<p>What works:</p>\n\n<ul>\n<li>calling <code>bundle install</code> and <code>bundle exec fastlane beta</code> in the terminal on the slave mac directly </li>\n<li>the other Build steps in Jenkins</li>\n</ul>\n\n<p>What I already tried:</p>\n\n<ul>\n<li>reinstalling <code>ruby</code> with and without <code>sudo</code></li>\n<li>reinstalling <code>bundler</code> with and without <code>sudo</code></li>\n<li>setting the rights in the <code>/usr/local/lib/ruby/gems</code> folder. (from  <a href=\"https://stackoverflow.com/questions/35186427/could-not-find-bundler-0-among-0-total-gems-gemloaderror\">Could not find &#39;bundler&#39; (&gt;= 0) among 0 total gem(s) (Gem::LoadError)</a>)</li>\n<li>using the full path and not just the command for <code>bundle install</code></li>\n</ul>\n\n<p>What I want to know:</p>\n\n<ul>\n<li>Where is the error in my setup? I have the feeling that it is something simple.</li>\n<li>What do I need to do, that I can use Jenkins with fastlane.</li>\n</ul>\n"}, {"tags": ["ruby", "recursion"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 1, "creation_date": 1533523042, "post_id": 51699827, "comment_id": 90361128, "body": "The same logic from <a href=\"https://stackoverflow.com/questions/51692230/ruby-get-permutations-of-all-lengths-from-a-string-in-order\">your question yesterday</a> applies."}, {"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 1, "creation_date": 1533523291, "post_id": 51699827, "comment_id": 90361162, "body": "What&#39;s the real task here, the algorithmic part of the problem or the Ruby/coding style part? because you can use Ruby techniques that make your life much easier, but will black out part of the algorithmic practice here. Not to mention that your code has many issues Ruby-wise."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1533524904, "post_id": 51699827, "comment_id": 90361437, "body": "I agree with @TamerShlash. Is this an exercise for learning and understanding algorithms, or simply the need to accomplish a task?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8819420"}, "edited": false, "score": 0, "creation_date": 1533527121, "post_id": 51699827, "comment_id": 90361857, "body": "My final goal is to code a brute Force approach. Like I need all 5 letter words starting with A of all lengths upto 5 i.e 2,3,4 letter words too. I have to implement this method in a bigger program."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8819420"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533527790, "post_id": 51699827, "comment_id": 90361957, "body": "@ForeverZer0 the yesterday&#39;s solution is fine but it generates words which don&#39;t need. For example if I need words starting with just A and T, the code even generates other words which increases the total time."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533527963, "post_id": 51699827, "comment_id": 90362001, "body": "It would only require some very minor alterations to accomplish your goals."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 1, "creation_date": 1533528297, "post_id": 51699827, "comment_id": 90362073, "body": "So, it&#39;s significant that you pass in &#39;A&#39; as a parameter, meaning you only want the permutations that start with the letter &#39;A&#39;...so you would never have &#39;BA&#39; -&gt; &#39;ZZZZZZ&#39;, is that correct? Using the <code>repeated_permutation</code> suggested in yesterday&#39;s question, could you not just do the <code>repeated_permutation(desired_size - 1)</code> and prepend &#39;A&#39; to all of those?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8819420"}, "edited": false, "score": 0, "creation_date": 1533529473, "post_id": 51699827, "comment_id": 90362317, "body": "I was trying the exact the same thing. I think it&#39;ll do.Thanks ."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1533564954, "post_id": 51699827, "comment_id": 90380446, "body": "You are aware <code>String#next</code> can handle this for you. For example <code>Z.next =&gt; &quot;AA&quot;</code>"}], "owner": {"user_type": "does_not_exist", "display_name": "user8819420"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "closed_date": 1533537228, "answer_count": 0, "score": 0, "last_activity_date": 1533523004, "creation_date": 1533522162, "last_edit_date": 1533523004, "question_id": 51699827, "link": "https://stackoverflow.com/questions/51699827/ruby-continue-recursion", "closed_reason": "Duplicate", "title": "Ruby continue recursion", "body": "<pre><code>$chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\ndef run(s)\n  begin\n    if s.size == 6\n      exit\n    end\n    $chars.each_char do |y|\n      s = s + y\n      puts s\n      puts run(s)\n    end\n  end\nend\n\nrun('A')\n</code></pre>\n\n<p>The above code outputs in this form - </p>\n\n<pre><code>AA\nAAA\nAAAA\nAAAAA\nAAAAAA\n</code></pre>\n\n<p>However I want it to continue to the next character, like -</p>\n\n<pre><code>AA\nAB\nAC\nAD\n.\n.\nAZ\nAAA\nAAB\nAAC\nAAD\n.\n.\nAAZ\n.\n.\n.\n.\nAZZ\n\n.\n.\n.\nAZZZZ\n</code></pre>\n\n<p>I was able to make it work with 4 loops however the I can't using recursion.\nAny kind of help and suggestions is appreciated. Thank you!</p>\n"}, {"tags": ["ruby", "github", "rubygems", "jekyll"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533527588, "post_id": 51699761, "comment_id": 90361927, "body": "1. You still need devkit for Ruby 2.5+ to install C extension gems (doubtful you have set up <code>MSYS</code> and <code>MingW</code> independently of Ruby based on this question. Unsure why you would feel it is not needed for <code>2.5+</code>  2. RubyGems is already packaged with Ruby, you don&#39;t need to install it."}, {"owner": {"reputation": 565, "user_id": 8230537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Kqpq.jpg?s=128&g=1", "display_name": "KD Final", "link": "https://stackoverflow.com/users/8230537/kd-final"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533537926, "post_id": 51699761, "comment_id": 90364887, "body": "@ForeverZer0 helpful, I re-install Ruby with DevKit, now it works, jekyll could installed."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533539147, "post_id": 51699761, "comment_id": 90365413, "body": "They did make separate downloads for the Windows installer that do not include DevKit, but is practically a necessity. It is quite necessary to be able to use a large percentage extremely popular gems."}, {"owner": {"reputation": 565, "user_id": 8230537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Kqpq.jpg?s=128&g=1", "display_name": "KD Final", "link": "https://stackoverflow.com/users/8230537/kd-final"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533539546, "post_id": 51699761, "comment_id": 90365570, "body": "@ForeverZer0 could you add this answer not in comments, then i can accept your answer."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533540820, "post_id": 51699761, "comment_id": 90366139, "body": "No problem, I made a post for ya :)"}, {"owner": {"reputation": 2293, "user_id": 6532189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7008d18e4d8f2109460ff7918ae806e8?s=128&d=identicon&r=PG&f=1", "display_name": "BehradKhodayar", "link": "https://stackoverflow.com/users/6532189/behradkhodayar"}, "edited": false, "score": 0, "creation_date": 1600514447, "post_id": 51699761, "comment_id": 113115824, "body": "for those here from search engines looking for the solution on Linux machines: you need to install ruby dev using: <code>sudo apt install ruby-dev</code> first"}], "answers": [{"tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": true, "score": 6, "last_activity_date": 1533540743, "creation_date": 1533540743, "answer_id": 51702597, "question_id": 51699761, "link": "https://stackoverflow.com/questions/51699761/error-installing-jekyll-error-failed-to-build-gem-native-extension/51702597#51702597", "title": "Error installing jekyll: ERROR: Failed to build gem native extension", "body": "<p>Although they made the Ruby+DevKit an \"optional\" download for the RubyInstaller on Windows, if you plan to install gems, it is practically a necessity. A large percentage of the most popular gems are C extension that will need built on your machine when being installed.</p>\n\n<p>The DevKit is a handy toolchain that supplies everything you need for this to be done, automatically without you needed to do anything more than type <code>gem install XXXXX</code>. Without it, you either cannot use C extension gems, or must have already installed <code>MSYS</code> and <code>MingW</code>, have them configured properly, which is all not a user-friendly experience, even for those who familiar with the process. </p>\n\n<p>So even if DevKit is optional, it is still required to make the most of Ruby on Windows.</p>\n"}, {"tags": [], "owner": {"reputation": 34, "user_id": 10538830, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rwINmCEc-NM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWaVqZw0EX2-XjwZFWYNta_osA8Hw/mo/photo.jpg?sz=128", "display_name": "MANOJ AP", "link": "https://stackoverflow.com/users/10538830/manoj-ap"}, "is_accepted": false, "score": 2, "last_activity_date": 1559726111, "last_edit_date": 1559726111, "creation_date": 1559725992, "answer_id": 56457506, "question_id": 51699761, "link": "https://stackoverflow.com/questions/51699761/error-installing-jekyll-error-failed-to-build-gem-native-extension/56457506#56457506", "title": "Error installing jekyll: ERROR: Failed to build gem native extension", "body": "<p>Solution re-install ruby with rubyinstaller-devkit-2.5.5-1-x64</p>\n\n<p>and issue </p>\n\n<pre><code>gem install bundler\n\ngem install jekyll\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 954, "user_id": 6329629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TVcMc.jpg?s=128&g=1", "display_name": "Roald", "link": "https://stackoverflow.com/users/6329629/roald"}, "is_accepted": false, "score": 1, "last_activity_date": 1608477929, "creation_date": 1608477929, "answer_id": 65381500, "question_id": 51699761, "link": "https://stackoverflow.com/questions/51699761/error-installing-jekyll-error-failed-to-build-gem-native-extension/65381500#65381500", "title": "Error installing jekyll: ERROR: Failed to build gem native extension", "body": "<p>I got the same error message. It turned out that the culprit was the <code>ffi</code> gem. I got it to work using <a href=\"https://stackoverflow.com/a/43926527/6329629\">this</a> solution.</p>\n"}], "owner": {"reputation": 565, "user_id": 8230537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Kqpq.jpg?s=128&g=1", "display_name": "KD Final", "link": "https://stackoverflow.com/users/8230537/kd-final"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3033, "favorite_count": 1, "accepted_answer_id": 51702597, "answer_count": 3, "score": 8, "last_activity_date": 1608477929, "creation_date": 1533521317, "question_id": 51699761, "link": "https://stackoverflow.com/questions/51699761/error-installing-jekyll-error-failed-to-build-gem-native-extension", "title": "Error installing jekyll: ERROR: Failed to build gem native extension", "body": "<p>I use github+jekyll to build blog, i try to install jekyll to local(windows 10)\uff0c while it failed when i run<code>gem install jekyll</code> and the stack trace is</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>C:\\Developments\\FrontEnd\\rubygems-2.7.7&gt;gem install jekyll\r\nTemporarily enhancing PATH for MSYS/MINGW...\r\nBuilding native extensions. This could take a while...\r\nERROR:  Error installing jekyll:\r\n        ERROR: Failed to build gem native extension.\r\n\r\n    current directory: C:/Developments/FrontEnd/Ruby25-x64/lib/ruby/gems/2.5.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser\r\nC:/Developments/FrontEnd/Ruby25-x64/bin/ruby.exe -r ./siteconf20180806-33956-l8y76h.rb extconf.rb\r\ncreating Makefile\r\n\r\ncurrent directory: C:/Developments/FrontEnd/Ruby25-x64/lib/ruby/gems/2.5.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser\r\nmake \"DESTDIR=\" clean\r\n'make' is not recognized as an internal or external command,\r\noperable program or batch file.\r\n\r\ncurrent directory: C:/Developments/FrontEnd/Ruby25-x64/lib/ruby/gems/2.5.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser\r\nmake \"DESTDIR=\"\r\n'make' is not recognized as an internal or external command,\r\noperable program or batch file.\r\n\r\nmake failed, exit code 1</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>what i do is:\n1. install ruby, path variable was set, version: <code>ruby 2.5.1p57 (2018-03-29 revision 63029) [x64-mingw32]</code>.\n2. install rubygems, version: <code>2.7.7</code>.\n3. install MSYS2.\n4. install jekyll, <code>gem install jekyll</code>, then the above error occurs and i'm not sure the reason. </p>\n\n<p>i have tried to install devkit and it not works, i think my ruby version is 2.5+, so don't need devkit and i have uninstalled it.</p>\n\n<p>Anyone could help me?</p>\n"}, {"tags": ["ruby", "cmd"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533521345, "post_id": 51699540, "comment_id": 90360874, "body": "<code>return question.has_example_code? ? &quot;We can help!&quot; : &quot;....&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 47296, "user_id": 2152082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4e4a832231681b8a80323832e8af00?s=128&d=identicon&r=PG", "display_name": "Stephan", "link": "https://stackoverflow.com/users/2152082/stephan"}, "edited": false, "score": 0, "creation_date": 1533577104, "post_id": 51704068, "comment_id": 90387267, "body": "This behavior is controlled by the &quot;QuickEdit Mode&quot; under &quot;Properties&quot; respective &quot;Defaults&quot;  (a very helpful option when you are aware of this behavior)"}, {"owner": {"reputation": 105, "user_id": 2905629, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/320e7d923db8bc5a4260f940348df07c?s=128&d=identicon&r=PG&f=1", "display_name": "maggs", "link": "https://stackoverflow.com/users/2905629/maggs"}, "edited": false, "score": 0, "creation_date": 1533598417, "post_id": 51704068, "comment_id": 90394947, "body": "I have already disabled this option but this was unable to fix the problem"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1533627525, "post_id": 51704068, "comment_id": 90403162, "body": "Can you reproduce it in a different console program? For instance, try <a href=\"https://sourceforge.net/projects/console/files/console-devel/2.00/\" rel=\"nofollow noreferrer\">Console 2</a>. For the safe side, check in Settings/Behaviour the options <i>Copy on select</i> and <i>Clear selection on copy</i>; I think they are off by default."}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 0, "last_activity_date": 1533546329, "creation_date": 1533546329, "answer_id": 51704068, "question_id": 51699540, "link": "https://stackoverflow.com/questions/51699540/windows-cmd-freezes-and-i-have-to-click-on-window-to-coninue/51704068#51704068", "title": "windows Cmd freezes and I have to click on window to coninue", "body": "<p>If you are using the usual Windows Command Window, Ruby has no way of knowing that you have clicked into the Window, so it is unlikely that it is related to the code. However, Windows <em>does</em> block a command to write to the command window on certain circumstances, and if this happens, Ruby waits on, say, <code>STDOUT.puts</code>, until it is allowed to continue. Of course this applies not only to Ruby, but to any application writing to the command console.</p>\n\n<p>The most typical situation, in which this occurs, is, if you (maybe accidentally) select with the mouse something in the console Window. The script running in the console is blocked. By clicking with the mouse inside the window, the selection is cancelled, and the program continues to run.</p>\n"}], "owner": {"reputation": 105, "user_id": 2905629, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/320e7d923db8bc5a4260f940348df07c?s=128&d=identicon&r=PG&f=1", "display_name": "maggs", "link": "https://stackoverflow.com/users/2905629/maggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 595, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1533546329, "creation_date": 1533518770, "last_edit_date": 1533520112, "question_id": 51699540, "link": "https://stackoverflow.com/questions/51699540/windows-cmd-freezes-and-i-have-to-click-on-window-to-coninue", "title": "windows Cmd freezes and I have to click on window to coninue", "body": "<p>I have a ruby script that displays it's progress via the cmd and completes in about 10 minutes. In the last few weeks the cmd seems to freeze and after 10 minutes when I click on the cmd window it then completes the script. \nI have searched on forums and suggestions include: disable QuickEdit Mode &amp; Insert Mode which I have done but this has not fixed the problem.</p>\n\n<p>The platform is an azure windows server 2016 VM.\nCould this problem be due to a recent windows update?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "keyword-argument"], "answers": [{"comments": [{"owner": {"reputation": 419, "user_id": 4352306, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Hh7mG.jpg?s=128&g=1", "display_name": "rellampec", "link": "https://stackoverflow.com/users/4352306/rellampec"}, "edited": false, "score": 0, "creation_date": 1533517682, "post_id": 51699436, "comment_id": 90360326, "body": "Thank you, I will have a look. I though that would only happen if I called by <code>foo({a: 7, b: 8})</code>. Perhaps that is a Ruby way to avoid an error when you call?"}, {"owner": {"reputation": 419, "user_id": 4352306, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Hh7mG.jpg?s=128&g=1", "display_name": "rellampec", "link": "https://stackoverflow.com/users/4352306/rellampec"}, "edited": false, "score": 0, "creation_date": 1533518492, "post_id": 51699436, "comment_id": 90360445, "body": "is there a way to avoid that to happen? I am trying to build a <code>curry</code> function that includes both: <code>*args</code> and <code>**kw_args</code>. Please, see <a href=\"https://stackoverflow.com/a/51699428/4352306\">this answer</a>"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 4, "last_activity_date": 1533518605, "last_edit_date": 1533518605, "creation_date": 1533517435, "answer_id": 51699436, "question_id": 51699361, "link": "https://stackoverflow.com/questions/51699361/collecting-keyword-arguments-in-ruby/51699436#51699436", "title": "Collecting keyword arguments in Ruby", "body": "<p>It's because the first parameter <code>i</code>, is a required parameter (no default value), so, the first value passed to the method (in your first example, this is the hash <code>{a: 7, b: 8}</code>) is stored into it. </p>\n\n<p>Then, since everything else is optional, the remaining values (if any, in this example, there are none) are filled in, as applicable. IE, the second parameter will go to <code>j</code>, unless it is a named parameter, then it goes to <code>kargs</code> (or <code>k</code>). The third parameter, and any remaining--up until the first keyword argument, go into <code>args</code>, and then any keyword args go to <code>kargs</code></p>\n\n<pre><code>def foo(i, j= 9, *args, k: 11, **kargs)\n  puts \"i: #{i}; args: #{args}; kargs: #{kargs}\"\nend\n\nfoo(a: 7, b: 8)\n# i: {:a=&gt;7, :b=&gt;8}; args: []; kargs: {}\n</code></pre>\n"}], "owner": {"reputation": 419, "user_id": 4352306, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Hh7mG.jpg?s=128&g=1", "display_name": "rellampec", "link": "https://stackoverflow.com/users/4352306/rellampec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 51699436, "answer_count": 1, "score": 0, "last_activity_date": 1533518605, "creation_date": 1533516479, "question_id": 51699361, "link": "https://stackoverflow.com/questions/51699361/collecting-keyword-arguments-in-ruby", "title": "Collecting keyword arguments in Ruby", "body": "<p>Just trying to understand how to collect arguments in Ruby, I came up with the following snippet, that seems to fail to collect <code>keyword arguments</code> in <code>**kargs</code> in some case:</p>\n\n<pre><code>def foo(i, j= 9, *args, k: 11, **kargs)\n  puts \"args: #{args}; kargs: #{kargs}\"\nend\n\nfoo(a: 7, b: 8)\n# output: args: []; kargs: {}\nfoo(9, a: 7, b: 8)\n# output: args: []; kargs: {:a=&gt;7, :b=&gt;8}\nfoo(9, 10, 13, a: 7, b: 8)\n# output: args: [13]; kargs: {:a=&gt;7, :b=&gt;8}\n</code></pre>\n\n<p>I would like to know why it does not collect <code>kargs</code> in the first call to <code>foo</code>, while in the second call it does.</p>\n"}, {"tags": ["ruby", "date"], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 3, "last_activity_date": 1533508600, "creation_date": 1533508600, "answer_id": 51698753, "question_id": 51698613, "link": "https://stackoverflow.com/questions/51698613/ruby-date-parsing/51698753#51698753", "title": "Ruby date parsing", "body": "<p>They use the same format keys, but the docs for <a href=\"https://ruby-doc.org/stdlib/libdoc/date/rdoc/Date.html#method-c-strptime\" rel=\"nofollow noreferrer\"><code>strptime</code></a> state:</p>\n\n<blockquote>\n  <p>strptime does not support specification of flags and width unlike strftime.</p>\n</blockquote>\n\n<p>So the issue is those flags (in this case the hyphens (-). Kind of dumb that you can't just use the same format specifier for inputting dates, as well as outputting them, but it is what it is, you could do:</p>\n\n<pre><code>Date.strptime(today, format.delete('-'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8470563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8da70c812e6a0825fbe02e7d2f2affc8?s=128&d=identicon&r=PG&f=1", "display_name": "mehrnoush", "link": "https://stackoverflow.com/users/8470563/mehrnoush"}, "is_accepted": false, "score": 0, "last_activity_date": 1533529688, "last_edit_date": 1533529688, "creation_date": 1533529375, "answer_id": 51700521, "question_id": 51698613, "link": "https://stackoverflow.com/questions/51698613/ruby-date-parsing/51700521#51700521", "title": "Ruby date parsing", "body": "<p>the problem is about format! if you change it to  </p>\n\n<blockquote>\n  <p>%m/%d/%Y</p>\n</blockquote>\n\n<p>, it will be fix !</p>\n\n<pre><code>format = '%m/%d/%Y'\ntoday = Date.today.strftime(format)\nDate.strptime(today, format)\n#=&gt; Mon, 06 Aug 2018\n</code></pre>\n"}], "owner": {"reputation": 1689, "user_id": 240427, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/14a4ec3cdc51bfd7e6f4d8a61e007592?s=128&d=identicon&r=PG", "display_name": "Fishtoaster", "link": "https://stackoverflow.com/users/240427/fishtoaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1533529688, "creation_date": 1533506916, "question_id": 51698613, "link": "https://stackoverflow.com/questions/51698613/ruby-date-parsing", "title": "Ruby date parsing", "body": "<p>I'm sure I'm missing something obvious, but - I'm trying to parse a date like \"8/5/2018\" (in m/d/y format).  Ruby seems perfectly capable of creating dates in this format using the format string <code>%-m/%-d/%Y</code> and <code>strftime</code>, but for some reason <code>strptime</code> can't read it?</p>\n\n<pre><code>[1] pry(main)&gt; require 'date'\n=&gt; true\n[2] pry(main)&gt; format = '%-m/%-d/%Y'\n=&gt; \"%-m/%-d/%Y\"\n[3] pry(main)&gt; today = Date.today.strftime(format)\n=&gt; \"8/5/2018\"\n[4] pry(main)&gt; Date.strptime(today, format)\nArgumentError: invalid date\nfrom (pry):4:in `strptime'\n</code></pre>\n\n<p>Does <code>strptime</code> use a different set of format keys than <code>strftime</code> (the ruby docs seem to suggest that they're the same)?  Or am I missing something else here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 10108195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77bda6acfa7065d1562707a6805fac4c?s=128&d=identicon&r=PG&f=1", "display_name": "Belvin", "link": "https://stackoverflow.com/users/10108195/belvin"}, "edited": false, "score": 0, "creation_date": 1533506394, "post_id": 51698293, "comment_id": 90358619, "body": "great thanks, how would i create a new method for adding followers?"}, {"owner": {"reputation": 55, "user_id": 10108195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77bda6acfa7065d1562707a6805fac4c?s=128&d=identicon&r=PG&f=1", "display_name": "Belvin", "link": "https://stackoverflow.com/users/10108195/belvin"}, "edited": false, "score": 0, "creation_date": 1536010334, "post_id": 51698293, "comment_id": 91263062, "body": "Sorry about the wonky code, I was just really trying to fix the parameters issue, and had also put an extra &#39;wonky&#39; route generated by rails for whatever reason, thanks for yhour help!"}], "tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": true, "score": 1, "last_activity_date": 1533658055, "last_edit_date": 1533658055, "creation_date": 1533503475, "answer_id": 51698293, "question_id": 51698068, "link": "https://stackoverflow.com/questions/51698068/tyring-to-add-followers-to-microposts-error-missing-parameter-microposts/51698293#51698293", "title": "Tyring to add followers to microposts, error: &#39;missing parameter microposts&#39;", "body": "<p>There's likely a few things that aren't quite right here, but the first one that stands out is that it looks like you've misunderstood what the <code>method</code> option for <code>link_to</code> is for. Here, \"method\" doesn't mean the name of the method your controller, it means the <em>HTTP method</em> to use for the request (such as POST, PUT, DELETE and and so on.) So it's likely this link is unintentionally calling the <code>create</code> action instead of the <code>follow</code> action.</p>\n\n<p>For adding additional actions take a look at the section in the routing guide on <a href=\"https://guides.rubyonrails.org/routing.html#adding-more-restful-actions\" rel=\"nofollow noreferrer\">Adding More RESTful Actions</a></p>\n\n<hr>\n\n<p>As a brief example for creating a method to add followers:</p>\n\n<p>If you have an micropost defined as a resource in your routes:</p>\n\n<pre><code>resources :microposts\n</code></pre>\n\n<p>and would like a new action (such as \"follow\") that applies to individual microposts you can update your resource to be:</p>\n\n<pre><code>resources :microposts do\n  post 'follow', on: :member\nend\n</code></pre>\n\n<p>You can then add a <code>follow</code> method in your <code>microposts_controller.rb</code>, similar how you've done already. After editing your routes this will also provide a <code>follow_micropost_path</code> helper function that can be used to link to this action.</p>\n"}], "owner": {"reputation": 55, "user_id": 10108195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77bda6acfa7065d1562707a6805fac4c?s=128&d=identicon&r=PG&f=1", "display_name": "Belvin", "link": "https://stackoverflow.com/users/10108195/belvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 51698293, "answer_count": 1, "score": 1, "last_activity_date": 1533658055, "creation_date": 1533501375, "last_edit_date": 1533502889, "question_id": 51698068, "link": "https://stackoverflow.com/questions/51698068/tyring-to-add-followers-to-microposts-error-missing-parameter-microposts", "title": "Tyring to add followers to microposts, error: &#39;missing parameter microposts&#39;", "body": "<p>I have been trying to add followers to microposts with the following controller:</p>\n\n<p>microposts_controller.rb :</p>\n\n<pre><code>def follow\n  @user = current_user\n  set_micropost\n  if @micropost.user_id != current_user.id\n    @micropost.followed += 1\n    @micropost.save\n  end\nend\n</code></pre>\n\n<p>The thing is there is always a 'missing parameter' error 'microposts'.  Meaning I am not passing a <code>@micropost</code> to the controller.  The \n    <code>&lt;%= link_to 'Follow' uses micropost_new_path(micropost), method: 'follow' %&gt;</code></p>\n\n<p>So I don't know what I'm doing wrong.  Defined the appropriate routes (the error states it is a <code>microposts#create</code> error, and I'm not sure why.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 0, "creation_date": 1533555038, "post_id": 51697974, "comment_id": 90373847, "body": "You can use sunspot <a href=\"https://github.com/sunspot/sunspot\" rel=\"nofollow noreferrer\">github.com/sunspot/sunspot</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1533501729, "post_id": 51697987, "comment_id": 90357592, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/20503875\">From Review</a>"}, {"owner": {"reputation": 393, "user_id": 1950386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ZIEO0.jpg?s=128&g=1", "display_name": "htunc", "link": "https://stackoverflow.com/users/1950386/htunc"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1533501982, "post_id": 51697987, "comment_id": 90357670, "body": "Thanks for your comment. I&#39;ve just updated my answer."}], "tags": [], "owner": {"reputation": 393, "user_id": 1950386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ZIEO0.jpg?s=128&g=1", "display_name": "htunc", "link": "https://stackoverflow.com/users/1950386/htunc"}, "is_accepted": false, "score": -1, "last_activity_date": 1533501947, "last_edit_date": 1533501947, "creation_date": 1533500659, "answer_id": 51697987, "question_id": 51697974, "link": "https://stackoverflow.com/questions/51697974/ruby-on-rails-search-gem-that-fits-my-needs/51697987#51697987", "title": "Ruby on Rails - Search gem that fits my needs", "body": "<p>Thats exactly what you're looking for: <a href=\"https://github.com/activerecord-hackery/ransack\" rel=\"nofollow noreferrer\">https://github.com/activerecord-hackery/ransack</a></p>\n\n<p>In your Gemfile, for the last officially released gem:</p>\n\n<pre><code>gem 'ransack'\n</code></pre>\n\n<p>If you would like to use the latest updates (recommended), use the master branch:</p>\n\n<pre><code>gem 'ransack', github: 'activerecord-hackery/ransack'\n</code></pre>\n\n<p>And here's an article about how to use it basicly: <a href=\"https://medium.com/@jaspercurry/searching-and-sorting-on-rails-with-ransack-560e862e650a\" rel=\"nofollow noreferrer\">https://medium.com/@jaspercurry/searching-and-sorting-on-rails-with-ransack-560e862e650a</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8470563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8da70c812e6a0825fbe02e7d2f2affc8?s=128&d=identicon&r=PG&f=1", "display_name": "mehrnoush", "link": "https://stackoverflow.com/users/8470563/mehrnoush"}, "is_accepted": false, "score": 0, "last_activity_date": 1533530227, "creation_date": 1533530227, "answer_id": 51700616, "question_id": 51697974, "link": "https://stackoverflow.com/questions/51697974/ruby-on-rails-search-gem-that-fits-my-needs/51700616#51700616", "title": "Ruby on Rails - Search gem that fits my needs", "body": "<p>you can use <a href=\"https://github.com/elastic/elasticsearch-rails/tree/master/elasticsearch-rails\" rel=\"nofollow noreferrer\">elasticsearch</a>. you can work with only one search box for all of it.\nit's a little complicated but it does support relations too</p>\n"}, {"comments": [{"owner": {"reputation": 2875, "user_id": 1177228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f2287b6054926438eb65f8726cc77d?s=128&d=identicon&r=PG", "display_name": "Andrew Kane", "link": "https://stackoverflow.com/users/1177228/andrew-kane"}, "edited": false, "score": 0, "creation_date": 1533798761, "post_id": 51705242, "comment_id": 90480710, "body": "You can also search across multiple indices if you want the results together instead of separate <a href=\"https://github.com/ankane/searchkick#multiple-indices\" rel=\"nofollow noreferrer\">github.com/ankane/searchkick#multiple-indices</a>"}], "tags": [], "owner": {"reputation": 136, "user_id": 5360097, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153702473768701/picture?type=large", "display_name": "Zohaib A. Butt", "link": "https://stackoverflow.com/users/5360097/zohaib-a-butt"}, "is_accepted": false, "score": 0, "last_activity_date": 1533550299, "creation_date": 1533550299, "answer_id": 51705242, "question_id": 51697974, "link": "https://stackoverflow.com/questions/51697974/ruby-on-rails-search-gem-that-fits-my-needs/51705242#51705242", "title": "Ruby on Rails - Search gem that fits my needs", "body": "<p>You can use multi-search in Searchkick for this purpose.\n<a href=\"https://github.com/ankane/searchkick#multi-search\" rel=\"nofollow noreferrer\">https://github.com/ankane/searchkick#multi-search</a></p>\n"}], "owner": {"reputation": 31, "user_id": 10141784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f0c26bcc479790d364374c82b6ff413?s=128&d=identicon&r=PG&f=1", "display_name": "flenning12", "link": "https://stackoverflow.com/users/10141784/flenning12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1533550299, "creation_date": 1533500539, "question_id": 51697974, "link": "https://stackoverflow.com/questions/51697974/ruby-on-rails-search-gem-that-fits-my-needs", "title": "Ruby on Rails - Search gem that fits my needs", "body": "<p>I am looking for a search gem and found searchkick really interesting.</p>\n\n<p>I've got a few questions before implementing it</p>\n\n<ul>\n<li>Looked up the internet and didn't find anything about multiple resource search. Is it possible? For example: I have a model Post and User - can I search for them in just one search box? </li>\n<li>would this be a good idea in first case? would a search icon in the navbar make more sense? (click on it and get redirected to search page with multiple search boxes)</li>\n</ul>\n\n<p>thanks</p>\n"}, {"tags": ["ruby", "string", "uppercase"], "answers": [{"tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": false, "score": 5, "last_activity_date": 1533496593, "last_edit_date": 1533496593, "creation_date": 1533496218, "answer_id": 51697458, "question_id": 51697394, "link": "https://stackoverflow.com/questions/51697394/capitalize-every-nth-character-of-each-word-in-a-string-in-ruby/51697458#51697458", "title": "Capitalize every nth character of each word in a string in Ruby", "body": "<p>As an option, you can just modify the nth character in the string if it exists by accessing the character by index:</p>\n\n<pre><code>'capitalizinga every fourth character in this string'.split(' ').map do |word|\n  (3..word.length).step(4) do |x|\n    c = word[x]\n    word[x] = c.upcase if c\n  end\n  word\nend.join(' ')\n\n# capItalIzinGa eveRy fouRth chaRactEr in thiS strIng\n</code></pre>\n\n<p>Here is the method <a href=\"https://ruby-doc.org/core-2.2.0/Range.html#method-i-step\" rel=\"noreferrer\">step</a> or <code>Range</code> class is used, so each fourth index could be calculated: 3, 7, 11, etc...</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1533531551, "post_id": 51698980, "comment_id": 90362750, "body": "Good answer, but why must <code>\\w</code> be in a character class (twice)?"}, {"owner": {"reputation": 361, "user_id": 7871409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9deda550437e351d23901246d14432f2?s=128&d=identicon&r=PG&f=1", "display_name": "Sergi", "link": "https://stackoverflow.com/users/7871409/sergi"}, "edited": false, "score": 0, "creation_date": 1533549884, "post_id": 51698980, "comment_id": 90370999, "body": "Thanks for the answer, I really need to start sudying regex beyond =~ /[a-z]/i :)"}], "tags": [], "owner": {"reputation": 2133, "user_id": 3820185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XZmR.jpg?s=128&g=1", "display_name": "wiesion", "link": "https://stackoverflow.com/users/3820185/wiesion"}, "is_accepted": false, "score": 4, "last_activity_date": 1533511467, "creation_date": 1533511467, "answer_id": 51698980, "question_id": 51697394, "link": "https://stackoverflow.com/questions/51697394/capitalize-every-nth-character-of-each-word-in-a-string-in-ruby/51698980#51698980", "title": "Capitalize every nth character of each word in a string in Ruby", "body": "<p>I think the easiest way is to use a regex with substitution:</p>\n\n<pre><code>'capitalize every fourth character in this string'\n  .gsub(/([\\w]{3})(\\w)|([\\w]{1,3})/) {\n    \"#{$1}#{$2.to_s.upcase}#{$3}\"\n  }\n\n# =&gt; capItalIze eveRy fouRth chaRactEr in thiS strIng\n</code></pre>\n\n<p>This uses 2 alternatives with captured groups - the first alternative matches 4 characters and the second everything with 1 to 3 characters. Group <code>$1</code> will match exactly three letters and group <code>$2</code> the fourth letter within a 4-letter block - while group <code>$3</code> will match remainders of a longer word as well words shorter than 4 characters.\nYou can then replace group <code>$2</code> globally with <code>gsub</code>. Also you need to do <code>$2.to_s</code> in case <code>$2</code> is <code>nil</code> (or catch that scenario with a ternary operator).</p>\n\n<p>You can inspect the regex <a href=\"https://regex101.com/r/evGSno/1\" rel=\"nofollow noreferrer\">here</a> and try the code <a href=\"https://repl.it/repls/CoarseNovelOutsourcing\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"comments": [{"owner": {"reputation": 361, "user_id": 7871409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9deda550437e351d23901246d14432f2?s=128&d=identicon&r=PG&f=1", "display_name": "Sergi", "link": "https://stackoverflow.com/users/7871409/sergi"}, "edited": false, "score": 2, "creation_date": 1533549245, "post_id": 51700713, "comment_id": 90370619, "body": "Nice answer, I never saw .gsub() being used in that way."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 361, "user_id": 7871409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9deda550437e351d23901246d14432f2?s=128&d=identicon&r=PG&f=1", "display_name": "Sergi", "link": "https://stackoverflow.com/users/7871409/sergi"}, "edited": false, "score": 1, "creation_date": 1533592882, "post_id": 51700713, "comment_id": 90393679, "body": "<code>gsub</code> has many tricks. Suppose you want to match a number between <code>400</code> and <code>500</code>, if present, in the string <code>str = &quot;The numbers 350 and 450 are here&quot;</code>. You could write <code>str.gsub(&#47;\\d{3}&#47;).find { |s| (400..500).cover?(s.to_i) } #=&gt; &quot;450&quot;</code>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 6, "last_activity_date": 1533530854, "creation_date": 1533530854, "answer_id": 51700713, "question_id": 51697394, "link": "https://stackoverflow.com/questions/51697394/capitalize-every-nth-character-of-each-word-in-a-string-in-ruby/51700713#51700713", "title": "Capitalize every nth character of each word in a string in Ruby", "body": "<pre><code>str = 'capitalize every fourth character in this string'\n\nidx = 0\nstr.gsub(/./) do |c|\n  case c\n  when ' '\n    idx = 0\n    c\n  else\n    idx += 1\n    (idx % 4).zero? ? c.upcase : c\n  end\nend\n  #=&gt; \"capItalIze eveRy fouRth chaRactEr in thiS strIng\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 1, "last_activity_date": 1533619601, "last_edit_date": 1533619601, "creation_date": 1533557289, "answer_id": 51707300, "question_id": 51697394, "link": "https://stackoverflow.com/questions/51697394/capitalize-every-nth-character-of-each-word-in-a-string-in-ruby/51707300#51707300", "title": "Capitalize every nth character of each word in a string in Ruby", "body": "<pre><code>&gt; str.split(\" \").map{|word| \n    word.chars.each_with_index{|c,i| \n      c.upcase! if (i &gt; 0 &amp;&amp; (i+1)%4 == 0)}.join}.join(\" \")\n#=&gt; \"capItalIze eveRy fouRth chaRactEr in thiS strIng\"\n</code></pre>\n"}], "owner": {"reputation": 361, "user_id": 7871409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9deda550437e351d23901246d14432f2?s=128&d=identicon&r=PG&f=1", "display_name": "Sergi", "link": "https://stackoverflow.com/users/7871409/sergi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "accepted_answer_id": 51700713, "answer_count": 4, "score": 2, "last_activity_date": 1533619601, "creation_date": 1533495690, "last_edit_date": 1533556758, "question_id": 51697394, "link": "https://stackoverflow.com/questions/51697394/capitalize-every-nth-character-of-each-word-in-a-string-in-ruby", "title": "Capitalize every nth character of each word in a string in Ruby", "body": "<p>I need to capitalize every 'nth' character for each word in a string (every multiple of 4-th character in this example, so character 4, 8, 12 etc).</p>\n\n<p>I came up with the code below (not very elegant I know!) but it only works for words which <code>length &lt; 8</code>.</p>\n\n<pre><code>'capitalize every fourth character in this string'.split(' ').map do |word|\n  word.split('').map.with_index do |l,idx|\n  idx % 3 == 0 &amp;&amp; idx &gt; 0 ? word[idx].upcase : l \n  end \n  .join('')\nend \n.flatten.join(' ')\n</code></pre>\n\n<p>Anybody could show me how to capitalize every 4th character in words which length > 8?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "is_accepted": true, "score": 2, "last_activity_date": 1533491231, "last_edit_date": 1533491231, "creation_date": 1533490641, "answer_id": 51696747, "question_id": 51696676, "link": "https://stackoverflow.com/questions/51696676/rails-multiple-joins-into-one-method/51696747#51696747", "title": "Rails multiple joins into one method", "body": "<p>If all you want to do is preload associations, use <code>includes</code>:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # ...\n\n  scope :with_library, -&gt; { includes(:materials, :assessments, :plans) }\nend\n</code></pre>\n\n<p>Use it like this:</p>\n\n<pre><code>User.with_library.find(1)\nUser.where(:name =&gt; \"Trenton\").with_library\nUser.all.with_library\n# etc.\n</code></pre>\n\n<p>Once the associations are preloaded, you could use this for your <code>library</code> method to populate a single array with all the materials, assessments and plans of a particular user:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # ...\n\n  def library\n    [materials, assessments, plans].map(&amp;:to_a).flatten(1)\n  end\nend\n</code></pre>\n\n<p>Example use case:</p>\n\n<pre><code>users = User.all.with_library\nusers.first.library\n# =&gt; [ ... ]\n</code></pre>\n\n<p>More info: <a href=\"https://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations</a></p>\n"}, {"tags": [], "owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "is_accepted": false, "score": 0, "last_activity_date": 1533490904, "creation_date": 1533490904, "answer_id": 51696783, "question_id": 51696676, "link": "https://stackoverflow.com/questions/51696676/rails-multiple-joins-into-one-method/51696783#51696783", "title": "Rails multiple joins into one method", "body": "<p>Prefer <code>includes</code> over <code>joins</code> unless you have a specific reason to do otherwise. <code>includes</code> will eliminate N+1 queries, while still constructing usable records in the associations: you can then loop through everything just as you would otherwise.</p>\n\n<p><strong>However</strong>, in this case, it sounds like you're working from a single <code>User</code> instance: in that case, <code>includes</code> (or <code>joins</code>) can't really help -- there are no N+1 queries to eliminate.</p>\n\n<p>While it's important to avoid running queries per row you're displaying (N+1), the difference between one query and three is negligible. (It'd cost more in overhead to try to squish everything together.) For this usage, it's just unnecessary.</p>\n"}], "owner": {"reputation": 1583, "user_id": 5253108, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/o5DQ1.jpg?s=128&g=1", "display_name": "Trenton Tyler", "link": "https://stackoverflow.com/users/5253108/trenton-tyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 51696747, "answer_count": 2, "score": 0, "last_activity_date": 1533491231, "creation_date": 1533490164, "question_id": 51696676, "link": "https://stackoverflow.com/questions/51696676/rails-multiple-joins-into-one-method", "title": "Rails multiple joins into one method", "body": "<p>I have a user in my application that can have multiple assessments, plans, and materials. There is already a relationship between these in my database. I would like to show all these in a single tab without querying the database too many times.</p>\n\n<p>I tried to do a method that joins them all in a single table but was unsuccessful. The return was the following error: <code>undefined method 'joins' for #&lt;User:0x007fcec9e91368&gt;</code></p>\n\n<pre><code>def library\n  self.joins(:materials, :assessments, :plans)\nend\n</code></pre>\n\n<p>My end goal is to just itterate over all objects returned from the join so they can be displayed rather than having three different variables that need to be queried slowing down my load times. Any idea how this is possible?</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :materials, dependent: :destroy\n  has_many :plans, dependent: :destroy\n  has_many :assessments, dependent: :destroy\nend \n\nclass Material &lt; ApplicationRecord\n  belongs_to :user\nend\n\nclass Assessment &lt; ApplicationRecord\n  belongs_to :user\nend\n\nclass Plan &lt; ApplicationRecord\n  belongs_to :user\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 8973, "user_id": 3367144, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/LZ7Af.png?s=128&g=1", "display_name": "kdbanman", "link": "https://stackoverflow.com/users/3367144/kdbanman"}, "edited": false, "score": 0, "creation_date": 1533481681, "post_id": 51695426, "comment_id": 90352396, "body": "You&#39;ve been a member for 7 years, but just asked your first question today?!?  Fascinating!  Can you include the code that&#39;s causing the problem?  Ideally we should see any code in the affected codepath, less the code that you&#39;ve verified isn&#39;t causing the problem."}], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 3878329, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EHSxC.png?s=128&g=1", "display_name": "Peter Zhu", "link": "https://stackoverflow.com/users/3878329/peter-zhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1533481824, "creation_date": 1533481824, "answer_id": 51695528, "question_id": 51695426, "link": "https://stackoverflow.com/questions/51695426/why-does-the-object-id-change-following-failed-validations-in-a-rails-controller/51695528#51695528", "title": "Why does the object id change following failed validations in a rails controller?", "body": "<p>No, your assumption is not correct. HTTP calls are stateless, meaning that state does not persist between calls (i.e. every call is independent of each other). Every time your form is submitted, a new object is created and assigned to the variable <code>@user</code>. Since a new (and different) object is created during each call, their <code>object_id</code>s will be different.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 717946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2053ac9f49ee678a1cf2b34404129d5c?s=128&d=identicon&r=PG", "display_name": "orcman", "link": "https://stackoverflow.com/users/717946/orcman"}, "edited": false, "score": 0, "creation_date": 1533483257, "post_id": 51695571, "comment_id": 90352843, "body": "Thank you for the step by step explanation"}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 1, "last_activity_date": 1533482161, "creation_date": 1533482161, "answer_id": 51695571, "question_id": 51695426, "link": "https://stackoverflow.com/questions/51695426/why-does-the-object-id-change-following-failed-validations-in-a-rails-controller/51695571#51695571", "title": "Why does the object id change following failed validations in a rails controller?", "body": "<p>You probably confused by the fact, that <code>render :edit</code> in the <code>update</code> method just renders the <code>edit</code> template, but doesn't redirect to the <code>edit</code> page - that's right.</p>\n\n<p>But, actually this is what happens in your scenario:</p>\n\n<ul>\n<li><code>edit</code> page is visited, <code>@user</code> assigned in the <code>edit</code> method of <code>UsersController</code></li>\n<li>form is submitted, <code>update</code> action is called and found <code>@user</code> is assigned in the <code>update</code> method and renders <code>edit</code> template</li>\n</ul>\n\n<p>Thus, on submitting a form different method is called and the state changes</p>\n"}], "owner": {"reputation": 35, "user_id": 717946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2053ac9f49ee678a1cf2b34404129d5c?s=128&d=identicon&r=PG", "display_name": "orcman", "link": "https://stackoverflow.com/users/717946/orcman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 51695571, "answer_count": 2, "score": 2, "last_activity_date": 1533482161, "creation_date": 1533481178, "question_id": 51695426, "link": "https://stackoverflow.com/questions/51695426/why-does-the-object-id-change-following-failed-validations-in-a-rails-controller", "title": "Why does the object id change following failed validations in a rails controller?", "body": "<p>I've generated a simple rails app using scaffolding. In the user model I have added a validation for the presence of name. I am using debug(@user.object_id) and showing at the top of my user edit page in edit.html.erb</p>\n\n<p>I've purposefully left the name blank and tried to submit the form. The usual errors are rendered but every time I submit the form, the @user's object id changes. Could someone please explain why the object_id is changing? My assumption was that the @user is still the same object (since we're in the same page, just adding errors and re-rendering the edit.html.erb on failed update)</p>\n"}, {"tags": ["ruby", "curses"], "answers": [{"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1533485602, "creation_date": 1533485602, "answer_id": 51696061, "question_id": 51695280, "link": "https://stackoverflow.com/questions/51695280/window-getch-vs-curses-getch-in-ruby/51696061#51696061", "title": "Window getch vs Curses getch in Ruby", "body": "<p>Ruby's curses is just an interface to the C curses library.</p>\n\n<p>Curses <em>windows</em> are typically smaller than the <em>screen</em>.  In curses, as a special case, there is a predefined window <strong><code>stdscr</code></strong> which corresponds to the whole screen.</p>\n\n<p>In each case (a user-defined <em>window</em> or the special window <strong><code>stdscr</code></strong>) you can use <code>getch</code> in some way to read \"from\" the window.  What that means is that while reading from the window, curses moves the cursor into that window at the current position (for that window), and depending on the options, may echo the input characters.  Also (because of the movement and echoing), curses keeps the window up to date using <code>refresh</code>.</p>\n"}], "owner": {"reputation": 475, "user_id": 5584211, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8KCSV.png?s=128&g=1", "display_name": "Ricardo Iglesias", "link": "https://stackoverflow.com/users/5584211/ricardo-iglesias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533485602, "creation_date": 1533479984, "question_id": 51695280, "link": "https://stackoverflow.com/questions/51695280/window-getch-vs-curses-getch-in-ruby", "title": "Window getch vs Curses getch in Ruby", "body": "<p>I'm currently learning to use Ruby and the curses library, and I tried my hand at making a simple application that accepts two characters and exits. However, I'm a bit confused as to the difference between a \"window\" instance of an object and a Curses instance. </p>\n\n<p>For example, I have the script below that attempts to use the \"getch\" functionality of the library in two ways: One using the <code>Curses::getch</code> and the other using <code>$window.getch</code></p>\n\n<pre><code>def init_curses()\n  Curses::init_screen\n  win = Curses::Window.new( Curses.lines, Curses.cols, #Set window to be as large as terminal window\n                            0, 0) #Start window on top-left corner\n  win.clear\n  return win\nend\n\n$window = init_curses\ninput_ch = nil\n\nbegin\n  Curses::crmode\n  $window.addstr(INPUT_STR)\n\n  # Changing the order of these two lines\n  # changes what I see on the screen\n  Curses::refresh\n  $window.refresh\n\n  # Read characters using different methods\n  input_ch = $window.getch\n  input_ch = Curses::getch\nensure \n  $window.clear #Prevent output after exiting\n  $window.close\n  Curses::close_screen\nend\n</code></pre>\n\n<p>When I change the order of the calls to refresh (now calling <code>$window.refresh</code> before <code>Curses::refresh</code>, nothing appears on the screen. </p>\n\n<p>Why is this? </p>\n\n<p>Additionally, is there some preferred method of getting input? Should I get input through <code>window.getch</code> or <code>Curses::getch</code>? Are there benefits and drawbacks to each? </p>\n"}]