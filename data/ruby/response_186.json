[{"tags": ["ruby", "string", "encoding", "utf-8", "utf-16"], "answers": [{"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1533230666, "post_id": 51643871, "comment_id": 90281845, "body": "There&#39;s a built in now, awesome! Note it&#39;s 776 because they are two different Unicode code points. &#252;, U+00FC, <a href=\"https://www.fileformat.info/info/unicode/char/fc/index.htm\" rel=\"nofollow noreferrer\">decomposes into U+0075 and U+0308</a>. 776 is 308 in hex or <a href=\"https://www.fileformat.info/info/unicode/char/0308/index.htm\" rel=\"nofollow noreferrer\">U+0308 COMBINING DIARESIS</a>. 168 is a8 in hex or <a href=\"https://www.fileformat.info/info/unicode/char/00a8/index.htm\" rel=\"nofollow noreferrer\">U+00A8 DIARESIS</a>. Verify with <code>&quot;&#252;&quot;.unicode_normalize(:nfd).each_codepoint { |i| puts i.to_s(16) }</code>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1533231636, "post_id": 51643871, "comment_id": 90282307, "body": "@Schwern Thanks for the clarification on 0xA8. I assumed that they were looking at a Latin-1 chart for the diaresis."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1533231990, "post_id": 51643871, "comment_id": 90282462, "body": "I see why. The Latin-1 encoding for a diaeresis is the same as the Unicode code point: x0A8 or 168."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1533232633, "post_id": 51643871, "comment_id": 90282763, "body": "@Schwern On the upside, encodings are less of a nightmare than they were 20 years ago. I remember dealing with Latin-n, Windows CPn, JIS, SJIS, EUC, and all that nonsense."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1533233104, "post_id": 51643871, "comment_id": 90282990, "body": "I have a copy of O&#39;Reilly&#39;s <i>CJKV Information Processing</i>. It&#39;s 1100 pages. Half of that of that is nothing but code tables back when you couldn&#39;t just look this stuff up on the Internet. When people complain about Unicode I want to throw that book at them."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1533234416, "post_id": 51643871, "comment_id": 90283630, "body": "@Schwern I used the tables in that book to check some encoding stuff back in the day, difficult when you can&#39;t read kanji and have to eyeball the glyphs. Kids these days, they can just go ahead and get off my lawn ;)"}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 5, "last_activity_date": 1533168777, "creation_date": 1533168777, "answer_id": 51643871, "question_id": 51643281, "link": "https://stackoverflow.com/questions/51643281/ruby-decompose-utf-8-chars/51643871#51643871", "title": "Ruby decompose UTF-8 chars", "body": "<p><code>String#unpack</code> and <code>Array#pack</code> are, as ForeverZer0 mentioned in the comments, for decoding binary strings into more structured data (such as numbers) and encoding data into strings (respectively). If you want to decompose unicode, you want <a href=\"http://ruby-doc.org/core/String.html#method-i-unicode_normalize\" rel=\"noreferrer\"><code>String#unicode_normalize</code></a> and the NFD form:</p>\n\n<pre><code>&gt; \"\u00fc\".unicode_normalize(:nfd).chars\n =&gt; [\"u\", \"\u0308\"] \n</code></pre>\n\n<p>That gives you 117 and 776, not 168. 168 is <code>\u00a8</code> in ISO-8859-1 not UTF-8.</p>\n"}], "owner": {"reputation": 98, "user_id": 7619689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b637d6a56c98bf91900dc00f985c0633?s=128&d=identicon&r=PG&f=1", "display_name": "Tunnelblick", "link": "https://stackoverflow.com/users/7619689/tunnelblick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 51643871, "answer_count": 1, "score": 2, "last_activity_date": 1533168777, "creation_date": 1533163844, "question_id": 51643281, "link": "https://stackoverflow.com/questions/51643281/ruby-decompose-utf-8-chars", "title": "Ruby decompose UTF-8 chars", "body": "<p>I achieved to get the UTF-16 code of \"\u00fc\" using</p>\n\n<pre><code>#!/bin/env ruby\n# encoding: UTF-8\n\nputs \"\u00fc\".unpack('U*')\n</code></pre>\n\n<p>Well, it just returns <code>252</code> which is fine.\nI read the online doc for ruby String but I don't get it how to decompose this character.</p>\n\n<p>In case of <code>\u00fc</code> I want to get the character <code>u (117)</code> and <code>\u00a8 (168)</code></p>\n\n<p>Thanks in advance,\nI appreciate any help</p>\n"}, {"tags": ["html", "ruby", "ruby-on-rails-3", "erb", "slim-lang"], "comments": [{"owner": {"reputation": 15562, "user_id": 155819, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yXygz.jpg?s=128&g=1", "display_name": "Akrion", "link": "https://stackoverflow.com/users/155819/akrion"}, "edited": false, "score": 0, "creation_date": 1533163396, "post_id": 51643169, "comment_id": 90250775, "body": "Add the classes <code>btn btn-primary</code> to the class of the anchor as per <a href=\"https://getbootstrap.com/docs/4.0/components/buttons/\" rel=\"nofollow noreferrer\">getbootstrap.com/docs/4.0/components/buttons</a>"}, {"owner": {"reputation": 15562, "user_id": 155819, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yXygz.jpg?s=128&g=1", "display_name": "Akrion", "link": "https://stackoverflow.com/users/155819/akrion"}, "edited": false, "score": 0, "creation_date": 1533163478, "post_id": 51643169, "comment_id": 90250805, "body": "<code>&lt;a class=&quot;btn btn-primary&quot; href=&quot;#&quot; role=&quot;button&quot;&gt;Link&lt;&#47;a&gt;</code> <code>&lt;button class=&quot;btn btn-primary&quot; type=&quot;submit&quot;&gt;Button&lt;&#47;button&gt;</code> <code>&lt;input class=&quot;btn btn-primary&quot; type=&quot;button&quot; value=&quot;Input&quot;&gt;</code>  Are all valid ways to create buttons in Bootstrap"}], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 2, "last_activity_date": 1533164304, "creation_date": 1533164304, "answer_id": 51643345, "question_id": 51643169, "link": "https://stackoverflow.com/questions/51643169/assign-class-to-link-to-using-html-slim/51643345#51643345", "title": "Assign class to link_to using html slim", "body": "<p>Rails' <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to\" rel=\"nofollow noreferrer\"><code>link_to</code></a> takes multiple hash options, in your example you're supplying a single hash option, which all get passed into the <code>url_options</code> section. You'll need to add the curly brackets (<code>{}</code>) around the first hash to tell ruby which option goes to which hash.</p>\n\n<pre><code>= link_to 'Test this', { :controller =&gt; 'default_responses', :action =&gt; 'edit', :id =&gt; params[:id].to_i }, class: 'btn btn-primary'\n</code></pre>\n\n<p>should work. Of course, you could also use a url helper (<code>url_for</code>, <code>default_responses_path</code>, etc) instead of the first hash.</p>\n"}], "owner": {"reputation": 143, "user_id": 4521541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ebcf80d30f790087dc59eae4d73b478?s=128&d=identicon&r=PG&f=1", "display_name": "jl118", "link": "https://stackoverflow.com/users/4521541/jl118"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533199899, "creation_date": 1533163130, "last_edit_date": 1533199899, "question_id": 51643169, "link": "https://stackoverflow.com/questions/51643169/assign-class-to-link-to-using-html-slim", "title": "Assign class to link_to using html slim", "body": "<p>I'm working on a html slim file for a Ruby on Rails project. I want to create a button of class <code>btn btn-primary</code> (I'm using bootstrap) for a controller action. Name of controller is default_responses and action is edit. So I first did: </p>\n\n<pre><code>= link_to 'Test this', :controller =&gt; 'default_responses', :action =&gt; 'edit', :id =&gt; params[:id].to_i\n</code></pre>\n\n<p>This would become </p>\n\n<pre><code>&lt;a href=\"/default_responses/7/edit\"&gt;Test this&lt;/a&gt;\n</code></pre>\n\n<p>where 7 is the id parameter and is correct for my case. However, it is not a button at all, just an anchored tag. It also redirects me to the correct page. </p>\n\n<p>Then I tried </p>\n\n<pre><code> = link_to 'Test this', :controller =&gt; 'default_responses', :action =&gt; 'edit', :id =&gt; params[:id].to_i, class: 'btn btn-primary'\n</code></pre>\n\n<p>which gave me</p>\n\n<pre><code>&lt;a href=\"/default_responses/7/edit?class=btn+btn-primary\"&gt;Test this&lt;/a&gt;\n</code></pre>\n\n<p>This is still not what I want as it is not a button still. </p>\n\n<p>Also tried <code>= link_to 'Test this', :controller =&gt; 'default_responses', :action =&gt; 'edit', :id =&gt; params[:id].to_i, :class=&gt; 'btn btn-primary'</code></p>\n\n<p>It returned <code>&lt;a href=\"/default_responses/7/edit?class=btn+btn-primary\"&gt;Test this&lt;/a&gt;</code> which is still wrong. </p>\n\n<p>Any suggestions? Thanks. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1533166861, "post_id": 51643037, "comment_id": 90251548, "body": "Could you provide more details to support your first paragraph? I haven&#39;t come across 1.8.7 in years, I can&#39;t remember the last time I saw it show up in a stack trace here, and I&#39;m not aware of any projects that care about compatibility with 1.8.7."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533167098, "post_id": 51643037, "comment_id": 90251586, "body": "I can show multiple post from this site just today if that would help. The questions aren&#39;t specifically related to 1.8.7, just observation that  the version they are using is."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533168915, "post_id": 51643037, "comment_id": 90251958, "body": "Yes, that would help. Are you sure they&#39;re new questions rather than old ones that have shown up in the RSS feed due to recent activity?"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533170085, "post_id": 51643037, "comment_id": 90252154, "body": "Yes, I am aware of the difference of a an actual new question, and one that receives new activity. <a href=\"https://stackoverflow.com/questions/51642764/how-to-find-which-gem-version-to-use-for-a-certain-ruby-version-or-rails-version\">Here is one</a> from two hours ago. I am not digging through every recent post to try and prove anything. There is a &quot;above normal&quot; amount (excluding &quot;just preference&quot;), and I did get an answer as to why from someone who knew, but thank you. ;)"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533170468, "post_id": 51643037, "comment_id": 90252222, "body": "Sorry but &quot;one&quot; doesn&#39;t really count as &quot;above normal&quot;. I ask for evidence and numbers to avoid bias in your memory. Human memory is not that reliable and subject to confirmation bias."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1533171011, "post_id": 51643037, "comment_id": 90252327, "body": "Feel free to dig through RECENT posts, or simply start paying attention yourself. from this point forward. No rudeness intended, by I am not wasting my time to dig through every recent post to prove the relevance of a question to one person when it has already been acknowledged and answered with sound reasoning. Please see the accepted answer if you would like to learn more."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1533180437, "post_id": 51643037, "comment_id": 90254067, "body": "Your claim that 1.9 didn&#39;t break anything from the 1.8 is not correct. That change was the largest of all updates, larger than the shift from 1.9 to 2.0."}], "answers": [{"comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533164295, "post_id": 51643123, "comment_id": 90250984, "body": "Perhaps &quot;widely used&quot; is a misnomer, but more widely used than what I would consider even close to &quot;normal&quot; amount for a version so far outdated and deprecated. Thanks for the feedback, though. :)"}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 1, "last_activity_date": 1533162831, "creation_date": 1533162831, "answer_id": 51643123, "question_id": 51643037, "link": "https://stackoverflow.com/questions/51643037/is-there-a-reason-ruby-1-8-7-is-still-so-widely-used/51643123#51643123", "title": "Is there a reason Ruby 1.8.7 is still so widely used?", "body": "<p>I would err on the side of caution when thinking it's widely used. It's most likely just more noticeable when you see a post asking about 1.8 or 1.9 stuff.</p>\n\n<p>There's no better reason than it's just legacy stuff from when Rails was really, really hot \u2014 see: <em>new</em>. I would assume that people plucking around legacy stuff these days are relatively unfamiliar with Ruby, and are still hopping around on Rails 3 \u2014 and, admittedly, Rails 3 isn't vastly different than Rails 4 and Rails 5, but is vastly different from Rails 2.</p>\n"}, {"comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533164700, "post_id": 51643378, "comment_id": 90251089, "body": "That helps me understand it. As I stated, I am not a Rails user, so I did wonder if it was somehow related to Rails. Might be obvious to a Rails user, but if you don&#39;t know, you don&#39;t know, lol."}, {"owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533258468, "post_id": 51643378, "comment_id": 90291428, "body": "This just in. At a recent conference Matz discussed the future of Ruby. Around minute 34-35 he mentions the need to avoid big gaps like 1,8 to 1.9. <a href=\"https://www.youtube.com/watch?v=gTNC26BtRFc#t=0m20s\" rel=\"nofollow noreferrer\">youtube.com/watch?v=gTNC26BtRFc#t=0m20s</a>"}], "tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": true, "score": 3, "last_activity_date": 1533164565, "creation_date": 1533164565, "answer_id": 51643378, "question_id": 51643037, "link": "https://stackoverflow.com/questions/51643037/is-there-a-reason-ruby-1-8-7-is-still-so-widely-used/51643378#51643378", "title": "Is there a reason Ruby 1.8.7 is still so widely used?", "body": "<p>My understanding was that the 1.8.7 to 1.9.x transition broke rails and thus broke a lot of web sites.</p>\n\n<p>As a result of this, many of those web sites stayed with Ruby 1.8.7 and (I'm less sure about this) Rails 3.x</p>\n\n<p>This traumatic transition has been referenced by Matz and many others at various Ruby conferences over the years. It is used to underline the commitment of the Ruby development team to avoid ever doing that again. </p>\n\n<p>Sorry, I don't have a reference for any of these videos.</p>\n"}], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "closed_date": 1533210674, "accepted_answer_id": 51643378, "answer_count": 2, "score": -1, "last_activity_date": 1533180590, "creation_date": 1533162170, "last_edit_date": 1533180590, "question_id": 51643037, "link": "https://stackoverflow.com/questions/51643037/is-there-a-reason-ruby-1-8-7-is-still-so-widely-used", "closed_reason": "Opinion-based", "title": "Is there a reason Ruby 1.8.7 is still so widely used?", "body": "<p>I repeatedly see Ruby 1.8.7 still widely used for many situations, and even here on SO, where people show a stack-trace, indicating they are running 1.8.7, and lots of modern projects that strive to maintain backwards compatibility with that version. I often wonder why.</p>\n\n<p>1.8.7 was a good, stable release, but there was nothing particularly special about it, other than it was the current version around a popularity peak for the language. The 1.9 versions offered many optimizations without breaking anything (that I am aware of) from the 1.8 versions, and was equally stable, so I would even understand still using 1.9.3 for older versions. But why 1.8.7? Is there some reason? </p>\n\n<p>There were some wider sweeping changes with the release of 2.0, and more care had to be taken to maintain compatibility with previous versions from it. Why use 1.8.7? It retired on June 30, 2013, yet still we see it.</p>\n\n<p>Is there any particular reason for this, or is it simply preference? Is it related to Rails compatibility?</p>\n\n<p>I am not making the claim that 1.8.7 is still some hugely popular version. I am stating that it is more widely used than what would be expected to be the norm for a deprecated and outdated version, and inquiring into any known reason for that trend.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1533162393, "post_id": 51643032, "comment_id": 90250501, "body": "What do I need to do then if I need the <code>Message</code> class in its own namespace?"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1533162878, "post_id": 51643032, "comment_id": 90250621, "body": "You&#39;d need to do <code>app&#47;messages&#47;messages&#47;emails&#47;email</code> or include it manually with the regrettable <code>require</code>"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1533162892, "post_id": 51643032, "comment_id": 90250629, "body": "With that folder structure, shouldn&#39;t I then be able to call <code>Messages::Emails::Email.new</code>? I&#39;m getting this error with that configuration: <code>LoadError (Unable to autoload constant Messages::Emails::Email, expected &#47;home&#47;ubuntu&#47;workspace&#47;app&#47;messages&#47;messages&#47;emails&#47;email.rb to define it):</code> Instantiating <code>message = Emails::Email.new</code> still works however."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1533162941, "post_id": 51643032, "comment_id": 90250644, "body": "Like @jvillian said, Rails doesn&#39;t namespace first-level folders inside <code>app</code>"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1533163581, "post_id": 51643032, "comment_id": 90250837, "body": "I guess maybe my invalid assumption (apart from the first-level folder being ignored) was that since Email inherited from Message that the namespace was nested and could be instantiated as <code>Messages::Emails::Email.new</code>. Is that correct?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1533164303, "post_id": 51643032, "comment_id": 90250986, "body": "@JoshBrody - using <code>Messages::Message</code> and <code>Emails::Email</code> (as in the first part) works fine for me with no <code>include</code>."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1533164390, "post_id": 51643032, "comment_id": 90251013, "body": "@CannonMoyer - If you&#39;re using the files/structures as in the first part of my answer, then you use <code>Emails::Email.new</code>, not <code>Messages::Emails::Email.new</code>."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 2, "last_activity_date": 1533164101, "last_edit_date": 1533164101, "creation_date": 1533162156, "answer_id": 51643032, "question_id": 51642959, "link": "https://stackoverflow.com/questions/51642959/error-with-namespace-ruby/51643032#51643032", "title": "Error with Namespace Ruby", "body": "<p>Rails ignores the folder name just below <code>app</code>. So, create <code>app/messages/messages/message.rb</code> something like: </p>\n\n<pre><code>module Messages\n  class Message\n    def initialize\n      puts \"message constructor\"\n    end\n  end\nend\n</code></pre>\n\n<p>Then, <code>app/messages/emails/email.rb</code> should be:</p>\n\n<pre><code>module Emails\n  class Email &lt; Messages::Message\n    def initialize\n      super\n      puts \"email constructor\"\n    end\n  end\nend\n</code></pre>\n\n<p>Then you would do </p>\n\n<pre><code>Emails::Email.new\n</code></pre>\n\n<p>That file structure is a little unpretty, but it should do the trick.</p>\n\n<p>Personally, I think I would create <code>app/messages/messages/message_base.rb</code>:</p>\n\n<pre><code>module Messages\n  class MessageBase\n    def initialize\n      puts \"message constructor\"\n    end\n  end\nend\n</code></pre>\n\n<p>And <code>app/messages/messages/email.rb</code>:</p>\n\n<pre><code>module Messages\n  class Email &lt; MessageBase\n    def initialize\n      super\n      puts \"email constructor\"\n    end\n  end\nend\n</code></pre>\n\n<p>But, I suppose it's a matter of personal preference.</p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 51643032, "answer_count": 1, "score": 0, "last_activity_date": 1533164101, "creation_date": 1533161675, "question_id": 51642959, "link": "https://stackoverflow.com/questions/51642959/error-with-namespace-ruby", "title": "Error with Namespace Ruby", "body": "<p>I'm experimenting with some Ruby code in a Ruby on Rails project and trying to code a nested namespace with inheritance.</p>\n\n<p>In <code>app/messages/message.rb</code> I have the following code:</p>\n\n<pre><code>module Messages\n   class Message\n       def initialize\n           puts \"message constructor\"\n       end\n   end\nend\n</code></pre>\n\n<p>In <code>app/messages/emails/email.rb</code> I have this code:</p>\n\n<pre><code>module Emails\n    class Email &lt; Messages::Message\n        def initialize\n            super\n            puts \"email constructor\"\n        end\n    end\nend\n</code></pre>\n\n<p>From within a controller in my Rails application I attempt to instantiate a new <code>Email</code> like so:</p>\n\n<pre><code>message = Messages::Emails::Email.new\n</code></pre>\n\n<p>I'm getting the following error:</p>\n\n<pre><code>LoadError (Unable to autoload constant Messages::Emails::Email, expected /home/ubuntu/workspace/app/messengers/messages/emails/email.rb to define it):\n</code></pre>\n\n<p>I assume this is something I have done incorrectly with the namespaces. Thanks in advance. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sinatra", "erb"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1533161649, "post_id": 51642840, "comment_id": 90250289, "body": "Ruby returns the last evaluated expression if there&#39;s not anything explicitly returned. You should continue to append to an object and return it if explicitly you don&#39;t want to concat to view&#39;s output buffer."}, {"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1533164101, "post_id": 51642840, "comment_id": 90250946, "body": "I think what&#39;re getting is because <code>object.elements.first.each</code> is returning the three objects, which that&#39;s how <code>.each</code> works.  Try changing <code>.each</code> for a <code>.collect</code>. That might not be all  you nee though."}, {"owner": {"reputation": 11, "user_id": 9926446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ba7ee498ad79296d5401115522930fa?s=128&d=identicon&r=PG&f=1", "display_name": "mertmumtaz", "link": "https://stackoverflow.com/users/9926446/mertmumtaz"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1533173974, "post_id": 51642840, "comment_id": 90252805, "body": "@JoshBrody Have you heard of an alternative to <code>concat</code> for plain Ruby since that&#39;s a Rails method?"}], "answers": [{"tags": [], "owner": {"reputation": 628, "user_id": 8267417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qgllr-3VCV4/AAAAAAAAAAI/AAAAAAAAAAo/E_crAMNR-fM/photo.jpg?sz=128", "display_name": "gasc", "link": "https://stackoverflow.com/users/8267417/gasc"}, "is_accepted": false, "score": 0, "last_activity_date": 1533173686, "creation_date": 1533173686, "answer_id": 51644341, "question_id": 51642840, "link": "https://stackoverflow.com/questions/51642840/are-recursion-functions-not-supported-in-erb-templates/51644341#51644341", "title": "Are recursion functions not supported in .erb templates?", "body": "<p>Try with something like:</p>\n\n<pre><code>&lt;ul&gt;\n  &lt;% @objects.each do |object| %&gt;\n    &lt;% print_children_for(object).flatten.each |li_tag| %&gt;\n     &lt;%= li_tag %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n\ndef print_children_for(object, parent = nil)\n  mark_up = []\n  mark_up &lt;&lt; parent.nil? ? \"&lt;li&gt;#{object.attributes['name']}&lt;/li&gt;\" : parent\n\n  return mark_up if object.children.first.name == \"Error\"\n  object.elements.first.each do |innerObject| \n     print_children_for(innerObject, markup)\n  end\nend\n</code></pre>\n\n<p>There are a few tweaks to be done (protecting for <code>nil</code> values in some places), I'm doing this on the fly, without checking it, but maybe something like that can help you.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9926446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ba7ee498ad79296d5401115522930fa?s=128&d=identicon&r=PG&f=1", "display_name": "mertmumtaz", "link": "https://stackoverflow.com/users/9926446/mertmumtaz"}, "is_accepted": true, "score": 0, "last_activity_date": 1533225364, "last_edit_date": 1533225364, "creation_date": 1533225028, "answer_id": 51657700, "question_id": 51642840, "link": "https://stackoverflow.com/questions/51642840/are-recursion-functions-not-supported-in-erb-templates/51657700#51657700", "title": "Are recursion functions not supported in .erb templates?", "body": "<p>Following the advice of appending to a certain HTML buffer and making explicit function returns, the following piece of code solved my problem: </p>\n\n<pre><code>def printAllChildObjects(refObject, html)\n  html &lt;&lt; \"&lt;li&gt;#{refObject.attributes['name']}&lt;/li&gt;\"\n\n  if refObject.children.first.name == \"Error\"\n     break\n  else\n     refObject.elements.first.each do |innerObject|\n         return printAllChildObjects(innerObject, html)\n     end\n  end\n\n return html\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9926446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ba7ee498ad79296d5401115522930fa?s=128&d=identicon&r=PG&f=1", "display_name": "mertmumtaz", "link": "https://stackoverflow.com/users/9926446/mertmumtaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 51657700, "answer_count": 2, "score": 0, "last_activity_date": 1533225364, "creation_date": 1533160866, "question_id": 51642840, "link": "https://stackoverflow.com/questions/51642840/are-recursion-functions-not-supported-in-erb-templates", "title": "Are recursion functions not supported in .erb templates?", "body": "<p>Okay so basically I have something like this:</p>\n\n<p><strong>someView.erb</strong></p>\n\n<pre><code> &lt;ul&gt;\n    &lt;% @objects.each do |object| %&gt;\n      &lt;%= printAllChildObjects(object) %&gt;\n    &lt;% end %&gt;\n &lt;/ul&gt;\n</code></pre>\n\n<p><strong>app.rb</strong></p>\n\n<pre><code>def printAllChildObjects(object)\n   \"&lt;li&gt;#{object.attributes['name']}&lt;/li&gt;\"\n    if object.children.first.name == \"Error\"\n      break\n    else \n      object.elements.first.each do |innerObject| \n         printAllChildObjects(innerObject)\n      end\n    end\nend\n</code></pre>\n\n<p>TL:DR; I 'm parsing some XML file with REXML (the XML parser that comes built-in with Ruby, I can't use Nokogiri for some ridiculous corporate reasons). This XML file has nodes that may or may not have children nodes nested within them, and a varying number of those at that. I tried my recursive function by using <code>puts</code> statements and observing the terminal, and it works as expected. </p>\n\n<p>BUT, when I try to incorporate the above view file, I instead get empty boxes with three dots instead, i.e., <code>[ ... ]</code> where each object should be printed. The crazy thing is, the number of boxes matches the number of objects and upon inspecting the html with Chrome Dev Tools, you can see  the ENTIRE object node instead of just the <code>object.attributes['name']</code> (i.e just the name attribute in the node). </p>\n\n<p>ALSO, when I remove the recursion call, and just keep the <code>\"&lt;li&gt;#{object.attributes['name']}&lt;/li&gt;\"</code> part in the function, the HTML works again! So I'm fairly certain the recursion is what is breaking the HTML rendering. Is there some sort of way to get around this? I'd appreciate even the slightest insights.</p>\n\n<p>Oh, and I'm using Sinatra, not Rails.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 3003043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02a71098a01da35634acb4fba010eebb?s=128&d=identicon&r=PG&f=1", "display_name": "adrienbourgeois", "link": "https://stackoverflow.com/users/3003043/adrienbourgeois"}, "is_accepted": false, "score": 0, "last_activity_date": 1533182051, "creation_date": 1533182051, "answer_id": 51645239, "question_id": 51642764, "link": "https://stackoverflow.com/questions/51642764/how-to-find-which-gem-version-to-use-for-a-certain-ruby-version-or-rails-version/51645239#51645239", "title": "How to find which Gem Version to use for a certain Ruby Version or Rails Version", "body": "<p>If I understand your question properly, you're asking how you can determine which ruby version you can use for a specific rails version.</p>\n\n<p>The ActiveRecord gemspec (<a href=\"https://github.com/rails/rails/blob/3-0-stable/activerecord/activerecord.gemspec\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/3-0-stable/activerecord/activerecord.gemspec</a>) specifies a ruby constraint:</p>\n\n<pre><code>s.required_ruby_version = '&gt;= 1.8.7'\n</code></pre>\n\n<p>You can also look at the <strong>.travis.yml</strong> file on the repo.</p>\n\n<p>As an example, for rails 3.2: <a href=\"https://github.com/rails/rails/blob/3-2-stable/.travis.yml\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/3-2-stable/.travis.yml</a> you'll see that they were running the whole test suite for all those ruby versions:</p>\n\n<pre><code>rvm:\n  - 1.8.7\n  - 1.9.2\n  - 1.9.3\n  - 2.0.0\n  - 2.1.8\n  - 2.2.6\n  - 2.3.3\n</code></pre>\n\n<p>Which means that rails 3.2 should be compatible with any of those ruby versions.</p>\n"}, {"tags": [], "owner": {"reputation": 973, "user_id": 9989384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/530602201f9551563176b0b648b7d50b?s=128&d=identicon&r=PG&f=1", "display_name": "Cryptex Technologies", "link": "https://stackoverflow.com/users/9989384/cryptex-technologies"}, "is_accepted": false, "score": 0, "last_activity_date": 1533193812, "creation_date": 1533193812, "answer_id": 51647560, "question_id": 51642764, "link": "https://stackoverflow.com/questions/51642764/how-to-find-which-gem-version-to-use-for-a-certain-ruby-version-or-rails-version/51647560#51647560", "title": "How to find which Gem Version to use for a certain Ruby Version or Rails Version", "body": "<p><a href=\"https://rubygems.org/gems/rails/versions/5.2.1.rc1\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/rails/versions/5.2.1.rc1</a>\nRefer to the above link, if you are supposed to use rails version 5.2.1.rc1,\nthen required ruby version will be atleast 2.2.2 and above.\nSo from 2.2.2 to 2.5.1 i.e latest version, any ruby version you can choose.\nRequired ruby gems versions will be >= 1.8.11.</p>\n"}], "owner": {"reputation": 1837, "user_id": 450837, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/3fdPN.jpg?s=128&g=1", "display_name": "oprogfrogo", "link": "https://stackoverflow.com/users/450837/oprogfrogo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1533193812, "creation_date": 1533160351, "question_id": 51642764, "link": "https://stackoverflow.com/questions/51642764/how-to-find-which-gem-version-to-use-for-a-certain-ruby-version-or-rails-version", "title": "How to find which Gem Version to use for a certain Ruby Version or Rails Version", "body": "<p>I use multiple rails versions which coincides with ruby versions. For example:</p>\n\n<blockquote>\n  <p>server1:</p>\n  \n  <ul>\n  <li>Rails 2.3.11</li>\n  <li>Ruby 1.8.7p375</li>\n  </ul>\n  \n  <p>server2:</p>\n  \n  <ul>\n  <li>Rails 3.2.18</li>\n  <li>Ruby 2.2.10p489</li>\n  </ul>\n</blockquote>\n\n<p>For each of these scenarios, how can I determine which gem -v to use? Is there a list somewhere I can refer to?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "counter-cache"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 9435011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-surR8ciCRkU/AAAAAAAAAAI/AAAAAAAAB9E/5G43kwUd2Io/photo.jpg?sz=128", "display_name": "Mohammed Sayer", "link": "https://stackoverflow.com/users/9435011/mohammed-sayer"}, "edited": false, "score": 0, "creation_date": 1533229347, "post_id": 51649818, "comment_id": 90281219, "body": "i worked with the counter_culture gem but the conditions isnt working i followed the step in the link and have something as counter_culture :room, column_name: proc {|model| model.status? [0,1] &#39;tickets_count&#39; : nil } but it gives me an error saying syntax error, unexpected tIDENTIFIER, expecting keyword_do or &#39;{&#39; or &#39;(&#39; :room, column_name: proc {|model| model.status? [0,1 @tahahussain, i have even edited my question accordingly"}, {"owner": {"reputation": 262, "user_id": 3929063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zXYl2.jpg?s=128&g=1", "display_name": "Taha Husain", "link": "https://stackoverflow.com/users/3929063/taha-husain"}, "reply_to_user": {"reputation": 99, "user_id": 9435011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-surR8ciCRkU/AAAAAAAAAAI/AAAAAAAAB9E/5G43kwUd2Io/photo.jpg?sz=128", "display_name": "Mohammed Sayer", "link": "https://stackoverflow.com/users/9435011/mohammed-sayer"}, "edited": false, "score": 1, "creation_date": 1533263239, "post_id": 51649818, "comment_id": 90292351, "body": "@MohammedSayer looks like there&#39;s a syntax error in ternary condition you are using in proc. Please modify your proc as <code>counter_culture :room, column_name: proc {|model| model.status.in?([0,1]) ? &#39;tickets_count&#39; : nil }</code>"}], "tags": [], "owner": {"reputation": 262, "user_id": 3929063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zXYl2.jpg?s=128&g=1", "display_name": "Taha Husain", "link": "https://stackoverflow.com/users/3929063/taha-husain"}, "is_accepted": false, "score": 10, "last_activity_date": 1533201060, "creation_date": 1533201060, "answer_id": 51649818, "question_id": 51642621, "link": "https://stackoverflow.com/questions/51642621/rails-counter-cache-with-condition/51649818#51649818", "title": "Rails counter cache with condition", "body": "<p>Rails does not provide conditions with counter_cache. <code>where</code> clause and <code>each</code> is not going to work either. </p>\n\n<p>To achieve conditional counter, you can use custom callbacks in your code to manage counter <a href=\"https://douglasfshearer.com/2006/10/06/custom-counter-cache-with-conditions.html\" rel=\"noreferrer\">blog on custom counter_cache with conditions</a>.</p>\n\n<p>Alternatively, you can use <a href=\"https://github.com/magnusvk/counter_culture\" rel=\"noreferrer\">counter_culture</a> gem, <a href=\"https://github.com/magnusvk/counter_culture#conditional-counter-cache\" rel=\"noreferrer\">conditional-counter-cache</a></p>\n\n<p>please refer answers on similar question -\n<a href=\"https://stackoverflow.com/questions/5347323/counter-cache-for-a-column-with-conditions\">Counter Cache for a column with conditions?</a></p>\n"}], "owner": {"reputation": 99, "user_id": 9435011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-surR8ciCRkU/AAAAAAAAAAI/AAAAAAAAB9E/5G43kwUd2Io/photo.jpg?sz=128", "display_name": "Mohammed Sayer", "link": "https://stackoverflow.com/users/9435011/mohammed-sayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3148, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1533229172, "creation_date": 1533159571, "last_edit_date": 1533229172, "question_id": 51642621, "link": "https://stackoverflow.com/questions/51642621/rails-counter-cache-with-condition", "title": "Rails counter cache with condition", "body": "<p>I have a rails hotel application which has rooms inside it. Rooms can have n number of tickets associated to them. I have create a counter cache with counter culture gem which updates the room table with number of tickets assigned to it,\nthe problem is i only want count of tickets which are open or in progress state. I have this code it works fine normally but does not work with the condition can anyone guide me by letting me know how can i work it with conditions? Any help is appreciated</p>\n\n<p>Room Table Migration file</p>\n\n<pre><code> class AddTicketsCountToRooms &lt; ActiveRecord::Migration[5.0]\n    def self.up\n      add_column :rooms, :tickets_count, :integer, null: false, default: 0\n    end\n  end\n</code></pre>\n\n<p>Ticket.rb file</p>\n\n<pre><code>    belongs_to :room\n  counter_culture :room, column_name: proc {|model| model.status? [0,1] 'tickets_count' : nil }\n</code></pre>\n\n<p>This does not go according to the where clause and \ngives me error saying</p>\n\n<pre><code>syntax error, unexpected tSTRING_BEG, expecting '}' {|model| model.status? [0,1] 'tickets_count' : nil } ^ /Users/mohammedsayerwala/Documents/Aqua/app/models/ticket.rb:8: syntax error, unexpected ':', expecting keyword_end tatus? [0,1] 'tickets_count' : nil }\n</code></pre>\n"}, {"tags": ["ruby", "debugging", "rubymine"], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 3003043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02a71098a01da35634acb4fba010eebb?s=128&d=identicon&r=PG&f=1", "display_name": "adrienbourgeois", "link": "https://stackoverflow.com/users/3003043/adrienbourgeois"}, "is_accepted": false, "score": -1, "last_activity_date": 1533183110, "creation_date": 1533183110, "answer_id": 51645372, "question_id": 51642524, "link": "https://stackoverflow.com/questions/51642524/rubymine-debug-rails-app-unicorn-server/51645372#51645372", "title": "RubyMine - Debug Rails App - Unicorn Server", "body": "<p>I don't have rubymine but this worked for me:</p>\n\n<p>install \"pry\": <a href=\"https://github.com/pry/pry\" rel=\"nofollow noreferrer\">https://github.com/pry/pry</a></p>\n\n<p>start unicorn on your local env:</p>\n\n<pre><code>bundle exec unicorn -c config/unicorn.rb\n</code></pre>\n\n<p>make sure you're listening to a valid port (in your confic/unicorn.rb):</p>\n\n<pre><code>listen 3000\n</code></pre>\n\n<p>add</p>\n\n<pre><code>binding.pry\n</code></pre>\n\n<p>in your code wherever you want a breakpoint</p>\n\n<p>go to:</p>\n\n<pre><code>0.0.0.0:3000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 563, "user_id": 3903080, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/c0f023bea6a812739b4caaa449c6d6ba?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Stojkovic", "link": "https://stackoverflow.com/users/3903080/ivan-stojkovic"}, "is_accepted": false, "score": 1, "last_activity_date": 1533194866, "creation_date": 1533194866, "answer_id": 51647872, "question_id": 51642524, "link": "https://stackoverflow.com/questions/51642524/rubymine-debug-rails-app-unicorn-server/51647872#51647872", "title": "RubyMine - Debug Rails App - Unicorn Server", "body": "<p>Problem solved:\n- i was using pow and it was redirecting to some url and not directly to localhost:3000. Once i converted the requests to use localhost:3000 instead of pow URL xxx.something.test debugger fired up.</p>\n"}], "owner": {"reputation": 563, "user_id": 3903080, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/c0f023bea6a812739b4caaa449c6d6ba?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Stojkovic", "link": "https://stackoverflow.com/users/3903080/ivan-stojkovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1533194866, "creation_date": 1533159023, "question_id": 51642524, "link": "https://stackoverflow.com/questions/51642524/rubymine-debug-rails-app-unicorn-server", "title": "RubyMine - Debug Rails App - Unicorn Server", "body": "<p>i am trying to debug rails app - unicorn server.</p>\n\n<p>I've tried following:</p>\n\n<p>1) I tried to start the server on localhost (externally, not with RubyMine) and set some break points. I can see my server when trying to \"attach to process\". It can attach to process but when i call some REST WebService it won't stop on this method in controller.</p>\n\n<p>2) I tried to run the server from Debugger in RubyMine, the server starts, but when i call some REST WebService it won't stop on this method in controller.</p>\n\n<p>How to debug the Rails App on Mac OS (localhost, unicorn)?</p>\n\n<p>The Rails App ist only API. I want to debug my api calls.</p>\n"}, {"tags": ["ruby", "algorithm"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1533173359, "post_id": 51642661, "comment_id": 90252708, "body": "I don&#39;t doubt your claim but your answer could be improved by providing.a proof (by contradiction, I would suggest)."}], "tags": [], "owner": {"reputation": 35084, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "is_accepted": false, "score": 3, "last_activity_date": 1533159778, "creation_date": 1533159778, "answer_id": 51642661, "question_id": 51642382, "link": "https://stackoverflow.com/questions/51642382/optimal-way-to-get-the-maximum-list-of-events-one-can-attend/51642661#51642661", "title": "Optimal way to get the maximum list of events one can attend", "body": "<p>Your logic is close, but wrong.  Because you can run into a long event when you could have accepted multiple small ones.</p>\n\n<p>Instead sort ascending by <strong>end hour</strong>.  Accept each event that does not overlap with any accepted before it.</p>\n"}], "owner": {"reputation": 11, "user_id": 4987904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vBz0r.jpg?s=128&g=1", "display_name": "Alvaro Sanchez", "link": "https://stackoverflow.com/users/4987904/alvaro-sanchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533159778, "creation_date": 1533158252, "question_id": 51642382, "link": "https://stackoverflow.com/questions/51642382/optimal-way-to-get-the-maximum-list-of-events-one-can-attend", "title": "Optimal way to get the maximum list of events one can attend", "body": "<p>For the problem, the input is an array like this:\n[[4,8],[1,3],[7,9],[5,6]]\nwhere the first number of every element represents the start hour and the second number the end hour.</p>\n\n<p>What is the optimal way to get the maximum list of events one can attend? </p>\n\n<p>My approach was:</p>\n\n<ol>\n<li>Sort the array in ascending order by start hour</li>\n<li>Iterate trough every element from last to first and check if they overlap (start hour of the current element is lower than the end hour of the element at the left).</li>\n<li>If there is an overlap, remove the left element and check again</li>\n</ol>\n\n<p>The code is:</p>\n\n<pre><code>def time_schedule(ar)\n  #Assuming the ar has been sorted    \n  idx = input.length - 1\n  while idx &gt;= 1\n    while idx &gt;= 1 &amp;&amp; input[idx - 1][1] &gt; input[idx][0]\n      input.delete(input[idx - 1])\n      idx -= 1\n    end\n    idx -= 1\n  end    \n  input\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1001, "user_id": 2945977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c76f28b6eccfe32b63a559aac74a9be5?s=128&d=identicon&r=PG&f=1", "display_name": "sonic", "link": "https://stackoverflow.com/users/2945977/sonic"}, "edited": false, "score": 0, "creation_date": 1533305244, "post_id": 51642195, "comment_id": 90311788, "body": "what tags should I add to gain more attention ( read views )"}], "owner": {"reputation": 1001, "user_id": 2945977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c76f28b6eccfe32b63a559aac74a9be5?s=128&d=identicon&r=PG&f=1", "display_name": "sonic", "link": "https://stackoverflow.com/users/2945977/sonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533210363, "creation_date": 1533157245, "last_edit_date": 1533210363, "question_id": 51642195, "link": "https://stackoverflow.com/questions/51642195/overriding-shovel-method-in-rails-in-association-case", "title": "Overriding shovel method in rails in association case", "body": "<p>According to <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many\" rel=\"nofollow noreferrer\">the has_many documentation</a>, the \"shovel\" method <code>collection&lt;&lt;(object, \u2026)</code> </p>\n\n<blockquote>\n  <p>Adds one or more objects to the collection by setting their foreign keys to the collection's primary key. <strong>Note that this operation instantly fires update SQL without waiting for the save or update call on the parent object</strong>, unless the parent object is a new record.</p>\n</blockquote>\n\n<p>If you want to construct a new-record without saving it to the database just yet, use <code>collection.build</code>.</p>\n\n<blockquote>\n  <p>Returns one or more new objects of the collection type that have been instantiated with attributes and linked to this object through a foreign key, but have not yet been saved.</p>\n</blockquote>\n\n<p>Using Club and Member as example models:</p>\n\n<pre><code>club = Club.find(params[:id])\nclub.members.build(member_attributes) # member is not saved\nclub.save # saves club and members\n</code></pre>\n\n<p><strong>BUT WHAT IF</strong></p>\n\n<p>I would like to use <code>&lt;&lt;</code> to create associations and not firing SQL at all. How can I override <code>&lt;&lt;</code> to behave like in scenario when the parent object is a new record? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "puma"], "comments": [{"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1540032047, "post_id": 51640663, "comment_id": 92720441, "body": "Same issue with <code>gem install ffi</code>."}, {"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1540036794, "post_id": 51640663, "comment_id": 92721550, "body": "Related: <a href=\"https://stackoverflow.com/questions/50576514/how-to-fix-a-bundle-nio4r-error-on-rails-5-1-6-on-mac10-13\">How to fix a bundle \u201cnio4r error\u201d on Rails 5.1.6 on mac10.13</a>"}, {"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1540036817, "post_id": 51640663, "comment_id": 92721554, "body": "Related: <a href=\"https://stackoverflow.com/questions/52050526/ruby2-5-1-slim-or-ruby-2-5-1-alpine-fails-on-nokogiri-gem\">ruby:2.5.1-slim or ruby-2.5.1-alpine fails on nokogiri gem</a>"}, {"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1540037076, "post_id": 51640663, "comment_id": 92721625, "body": "Related: <a href=\"https://stackoverflow.com/questions/47230735/cant-find-ffi-h-when-installing-ffi-ruby-gem\">Can&#39;t Find ffi.h When Installing ffi ruby gem</a>"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1540052239, "post_id": 51640663, "comment_id": 92726080, "body": "Please post the output of <code>gem env</code>"}, {"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1540067054, "post_id": 51640663, "comment_id": 92730296, "body": "Personally, I solved it with <code>xcode-select --install</code> after making sure that <code>xcode-select -p</code> was pointing to a stable version of Xcode 10."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1540102996, "post_id": 51640663, "comment_id": 92735695, "body": "I recommend removing rbenv and all its installed Rubies, then reinstalling rbenv and Ruby (or better, rvm and Ruby) from scratch and retrying the operation. If it still isn&#39;t working, ensure that you have <a href=\"https://stackoverflow.com/a/17231736/3784008\">a modern version of OpenSSL installed</a>. <a href=\"https://stackoverflow.com/q/51692408/3784008\">Same issue reported here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1540728401, "post_id": 52949046, "comment_id": 92963190, "body": "Ah, sorry, I thought you would automatically get the bounty, then I just discovered that <a href=\"https://meta.stackoverflow.com/questions/266290/why-bounty-was-not-awarded\">Bounties only default to +2 answers</a>"}], "tags": [], "owner": {"reputation": 627, "user_id": 1791884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76c200f0db428dcf47948631a0ce66f4?s=128&d=identicon&r=PG", "display_name": "skahlert", "link": "https://stackoverflow.com/users/1791884/skahlert"}, "is_accepted": false, "score": 2, "last_activity_date": 1540297513, "creation_date": 1540297513, "answer_id": 52949046, "question_id": 51640663, "link": "https://stackoverflow.com/questions/51640663/developer-tools-issues-when-installing-ruby-gems/52949046#52949046", "title": "Developer tools issues when installing Ruby gems", "body": "<p>You might want to install openssl, e.g. via homebrew:</p>\n\n<pre><code>brew install openssl\n</code></pre>\n\n<p>A similar issue was also discussed on <a href=\"https://github.com/puma/puma/issues/783\" rel=\"nofollow noreferrer\">github</a>.</p>\n\n<p>In case of nokogiri, libxml might be missing:</p>\n\n<pre><code>brew install libxml2\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10167425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec379fe0838c3451946c7747ba6230e?s=128&d=identicon&r=PG&f=1", "display_name": "Sal", "link": "https://stackoverflow.com/users/10167425/sal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3021, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540297513, "creation_date": 1533150443, "last_edit_date": 1533152246, "question_id": 51640663, "link": "https://stackoverflow.com/questions/51640663/developer-tools-issues-when-installing-ruby-gems", "title": "Developer tools issues when installing Ruby gems", "body": "<p>I am trying to install puma onto my MacOS 10.13.6. To install puma, I run the command <code>gem install puma</code> but it returned</p>\n\n<pre><code>Building native extensions. This could take a while...\n    ERROR:  Error installing puma:\n        ERROR: Failed to build gem native extension.\n\n   current directory: /Users/salem/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/puma-3.12.0/ext/puma_http11\n    /Users/salem/.rbenv/versions/2.5.1/bin/ruby -r ./siteconf20180801-14654-17z0n88.rb extconf.rb\n    checking for BIO_read() in -lcrypto... *** extconf.rb failed ***\n    Could not create Makefile due to some reason, probably lack of necessary\n    libraries and/or headers.  Check the mkmf.log file for more details.  You may\n    need configuration options.\n\n    Provided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=/Users/salem/.rbenv/versions/2.5.1/bin/$(RUBY_BASE_NAME)\n        --with-puma_http11-dir\n        --without-puma_http11-dir\n        --with-puma_http11-include\n        --without-puma_http11-include=${puma_http11-dir}/include\n        --with-puma_http11-lib\n        --without-puma_http11-lib=${puma_http11-dir}/lib\n        --with-openssl-dir\n        --with-openssl-include\n        --without-openssl-include=${openssl-dir}/include\n        --with-openssl-lib\n        --without-openssl-lib=${openssl-dir}/lib\n        --with-cryptolib\n        --without-cryptolib\n    /Users/salem/.rbenv/versions/2.5.1/lib/ruby/2.5.0/mkmf.rb:456:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\n    You have to install development tools first.\n        from \n\n\n    ...\n    ...\n    To see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n      /Users/salem/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/extensions/x86_64-darwin-17/2.5.0-static/puma-3.12.0/mkmf.log\n\n    extconf failed, exit code 1\n\nGem files will remain installed in /Users/salem/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/puma-3.12.0 for inspection.\nResults logged to /Users/salem/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/extensions/x86_64-darwin-17/2.5.0-static/puma-3.12.0/gem_make.out`\n</code></pre>\n\n<p>The <code>_mkmf.log_</code> can be found below... </p>\n\n<pre><code>clang -o conftest -I/Users/salem/.rbenv/versions/2.5.1/include/ruby-2.5.0/x86_64-darwin17 -I/Users/salem/.rbenv/versions/2.5.1/include/ruby-2.5.0/ruby/backward -I/Users/salem/.rbenv/versions/2.5.1/include/ruby-2.5.0 -I. -I/usr/local/opt/openssl/include -I/Users/salem/.rbenv/versions/2.5.1/include  -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT    -O3 -Wno-error=shorten-64-to-32  -pipe conftest.c  -L. -L/Users/salem/.rbenv/versions/2.5.1/lib -L/usr/local/opt/openssl/lib -L. -L/Users/salem/.rbenv/versions/2.5.1/lib  -fstack-protector -L/usr/local/lib     -lruby.2.5.1-static -framework Foundation  -lpthread -ldl -lobjc \"\nerror: unable to open output file '~/tmp/conftest-8ad96a.o': 'No such file or directory'\n1 error generated.\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: int main(int argc, char **argv)\n4: {\n5:   return 0;\n6: }\n/* end */\n</code></pre>\n\n<p>Xcode is installed on my Mac. I ran xcode-select --install which confirmed that Xcode was already installed.</p>\n\n<p>I then thought it could be a permissions issue...</p>\n\n<pre><code>~ $ ls -lah tmp\ntotal 0\ndrwxrwxrwx   3 salem  staff    96B Jul 30 08:35 .\ndrwxr-xr-x+ 62 salem  staff   1.9K Aug  1 13:17 ..\ndrwxr-xr-x   3 salem  staff    96B Jul 27 15:11 vmSWVyg\n</code></pre>\n\n<p>but it appears that it has the correct permissions set.</p>\n\n<p>This issue also arises when installing nokugiri</p>\n"}, {"tags": ["ruby", "groovy"], "answers": [{"tags": [], "owner": {"reputation": 31754, "user_id": 2194470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=128&d=identicon&r=PG", "display_name": "Szymon Stepniak", "link": "https://stackoverflow.com/users/2194470/szymon-stepniak"}, "is_accepted": true, "score": 3, "last_activity_date": 1533154644, "creation_date": 1533154644, "answer_id": 51641643, "question_id": 51640535, "link": "https://stackoverflow.com/questions/51640535/what-is-the-equivalent-of-rubys-string-unpackn-in-groovy/51641643#51641643", "title": "What is the equivalent of Ruby&#39;s string.unpack(&#39;N&#39;) in Groovy?", "body": "<p>You can get an equivalent of Ruby's <code>\"string\".unpack('N')</code> using Java NIO <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html\" rel=\"nofollow noreferrer\"><code>ByteBuffer</code></a> class. Consider following example:</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>import java.nio.ByteBuffer\nimport java.nio.ByteOrder\n\nfinal String str = \"lorem ipsum dolor sit amet\"\n\nfinal ByteBuffer buffer = ByteBuffer.wrap(str.bytes)\nbuffer.order(ByteOrder.BIG_ENDIAN)\n\nfinal int result = buffer.getInt()\n\nprintln result // 1819243109\n</code></pre>\n\n<p>And here is <code>\"lorem ipsum dolor sit amet\".unpack('N')</code> inside Ruby's REPL for a comparison - <a href=\"https://repl.it/repls/TeemingIndigoHypotenuse\" rel=\"nofollow noreferrer\">https://repl.it/repls/TeemingIndigoHypotenuse</a></p>\n"}, {"tags": [], "owner": {"reputation": 21277, "user_id": 12704, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/06c73e2393a863ea468d970038031c29?s=128&d=identicon&r=PG", "display_name": "Michael Easter", "link": "https://stackoverflow.com/users/12704/michael-easter"}, "is_accepted": false, "score": 1, "last_activity_date": 1533215954, "creation_date": 1533215954, "answer_id": 51654714, "question_id": 51640535, "link": "https://stackoverflow.com/questions/51640535/what-is-the-equivalent-of-rubys-string-unpackn-in-groovy/51654714#51654714", "title": "What is the equivalent of Ruby&#39;s string.unpack(&#39;N&#39;) in Groovy?", "body": "<p>Building on @szymon-stepniak's answer, here's a way to write it as an <code>unpack</code> function via meta-programming:</p>\n\n<pre><code>import java.nio.*\n\nString.metaClass.unpack {\n    def s = delegate\n    ByteBuffer.wrap(s.bytes).order(ByteOrder.BIG_ENDIAN).int\n}\n\nassert 1819243109 == \"lorem ipsum dolor sit amet\".unpack()\n</code></pre>\n"}], "owner": {"reputation": 1118, "user_id": 4850235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b1b54984fa870e9d4c2341fdf16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Rubysmith", "link": "https://stackoverflow.com/users/4850235/rubysmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 51641643, "answer_count": 2, "score": 3, "last_activity_date": 1533215954, "creation_date": 1533149934, "last_edit_date": 1533158760, "question_id": 51640535, "link": "https://stackoverflow.com/questions/51640535/what-is-the-equivalent-of-rubys-string-unpackn-in-groovy", "title": "What is the equivalent of Ruby&#39;s string.unpack(&#39;N&#39;) in Groovy?", "body": "<p>How can I decode a string to 32 bit unsigned network byte order integer in Groovy?</p>\n\n<p>In Ruby it can be done with <a href=\"https://apidock.com/ruby/String/unpack\" rel=\"nofollow noreferrer\"><code>\"this is string\".unpack('N')</code></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 848, "user_id": 11249670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29532e75e13b5f3b631012229f22829?s=128&d=identicon&r=PG&f=1", "display_name": "reesaspieces", "link": "https://stackoverflow.com/users/11249670/reesaspieces"}, "edited": false, "score": 0, "creation_date": 1560137092, "post_id": 51640437, "comment_id": 99625173, "body": "I&#39;m getting the same error - did you ever figure it out?"}, {"owner": {"reputation": 630, "user_id": 4330767, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-lCuPhO8emVE/AAAAAAAAAAI/AAAAAAAAAGI/uIdd5BFX5eE/photo.jpg?sz=128", "display_name": "marko calvocruz", "link": "https://stackoverflow.com/users/4330767/marko-calvocruz"}, "reply_to_user": {"reputation": 848, "user_id": 11249670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29532e75e13b5f3b631012229f22829?s=128&d=identicon&r=PG&f=1", "display_name": "reesaspieces", "link": "https://stackoverflow.com/users/11249670/reesaspieces"}, "edited": false, "score": 0, "creation_date": 1560387220, "post_id": 51640437, "comment_id": 99722660, "body": "Yes but for the life of me I cannot remember the exact solution. Thinking back, it could have been a matter of switching from rvm to rbenv or vice versa."}, {"owner": {"reputation": 630, "user_id": 4330767, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-lCuPhO8emVE/AAAAAAAAAAI/AAAAAAAAAGI/uIdd5BFX5eE/photo.jpg?sz=128", "display_name": "marko calvocruz", "link": "https://stackoverflow.com/users/4330767/marko-calvocruz"}, "reply_to_user": {"reputation": 848, "user_id": 11249670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29532e75e13b5f3b631012229f22829?s=128&d=identicon&r=PG&f=1", "display_name": "reesaspieces", "link": "https://stackoverflow.com/users/11249670/reesaspieces"}, "edited": false, "score": 0, "creation_date": 1560387244, "post_id": 51640437, "comment_id": 99722666, "body": "No guarantees that above answer will work though. FYI"}, {"owner": {"reputation": 848, "user_id": 11249670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29532e75e13b5f3b631012229f22829?s=128&d=identicon&r=PG&f=1", "display_name": "reesaspieces", "link": "https://stackoverflow.com/users/11249670/reesaspieces"}, "edited": false, "score": 0, "creation_date": 1560388509, "post_id": 51640437, "comment_id": 99722881, "body": "Thanks for responding! I actually asked a question on SO too but no one answered, and ultimately this was the solution for me: <a href=\"https://stackoverflow.com/a/56522059/11249670\">stackoverflow.com/a/56522059/11249670</a>"}], "owner": {"reputation": 630, "user_id": 4330767, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-lCuPhO8emVE/AAAAAAAAAAI/AAAAAAAAAGI/uIdd5BFX5eE/photo.jpg?sz=128", "display_name": "marko calvocruz", "link": "https://stackoverflow.com/users/4330767/marko-calvocruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 849, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533149569, "creation_date": 1533149569, "question_id": 51640437, "link": "https://stackoverflow.com/questions/51640437/ruby-loaderror-incompatible-library-version", "title": "Ruby: LoadError Incompatible Library Version", "body": "<p>When I try to run my rails project, I receive the following LoadError:</p>\n\n<pre><code>Traceback (most recent call last):\n    22: from bin/rails:4:in `&lt;main&gt;'\n    21: from bin/rails:4:in `require'\n    20: from /Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n    19: from /Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/railties-5.2.0/lib/rails/command.rb:46:in `invoke'\n    18: from /Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/railties-5.2.0/lib/rails/command/base.rb:65:in `perform'\n    17: from /Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/thor-0.20.0/lib/thor.rb:387:in `dispatch'\n    16: from /Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\n    15: from /Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/thor-0.20.0/lib/thor/command.rb:27:in `run'\n    14: from /Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:142:in `perform'\n    13: from /Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:142:in `tap'\n    12: from /Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:145:in `block in perform'\n    11: from /Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:145:in `require'\n    10: from /Users/marko/WebDevSchool/hello_U_official_files/helloU/config/application.rb:8:in `&lt;top (required)&gt;'\n     9: from /Users/marko/.rvm/gems/ruby-2.5.1/gems/bundler-1.16.3/lib/bundler.rb:114:in `require'\n     8: from /Users/marko/.rvm/gems/ruby-2.5.1/gems/bundler-1.16.3/lib/bundler/runtime.rb:65:in `require'\n     7: from /Users/marko/.rvm/gems/ruby-2.5.1/gems/bundler-1.16.3/lib/bundler/runtime.rb:65:in `each'\n     6: from /Users/marko/.rvm/gems/ruby-2.5.1/gems/bundler-1.16.3/lib/bundler/runtime.rb:76:in `block in require'\n     5: from /Users/marko/.rvm/gems/ruby-2.5.1/gems/bundler-1.16.3/lib/bundler/runtime.rb:76:in `each'\n     4: from /Users/marko/.rvm/gems/ruby-2.5.1/gems/bundler-1.16.3/lib/bundler/runtime.rb:81:in `block (2 levels) in require'\n     3: from /Users/marko/.rvm/gems/ruby-2.5.1/gems/bundler-1.16.3/lib/bundler/runtime.rb:81:in `require'\n     2: from /Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/bcrypt-3.1.11/lib/bcrypt.rb:12:in `&lt;top (required)&gt;'\n     1: from /Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/bcrypt-3.1.11/lib/bcrypt.rb:16:in `rescue in &lt;top (required)&gt;'\n</code></pre>\n\n<p>/Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/bcrypt-3.1.11/lib/bcrypt.rb:16:in `require': incompatible library version - /Users/marko/WebDevSchool/hello_U_official_files/helloU/vendor/ruby/2.5.0/gems/bcrypt-3.1.11/lib/bcrypt_ext.bundle (LoadError)</p>\n\n<p>I have tried:</p>\n\n<ol>\n<li><p><code>gem pristine --all</code></p></li>\n<li><p><code>gem uninstall bcrypt</code> &amp; <code>gem install bcrypt</code></p></li>\n<li><p><code>gem uninstall railties</code> &amp; <code>gem install railties</code></p></li>\n</ol>\n\n<p>Nothing has been working so far </p>\n"}, {"tags": ["ruby", "rubymine"], "comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1533359534, "post_id": 51640376, "comment_id": 90328040, "body": "If you don&#39;t include Ruby tag, nobody will look at your question. Nobody is going to open the questions by RubyMine tag."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 1, "creation_date": 1533567179, "post_id": 51640376, "comment_id": 90381938, "body": "@Rajagopalan: some might. But yeah, I&#39;d guess that most/all rubymine watchers also watch ruby tag."}], "answers": [{"tags": [], "owner": {"reputation": 157, "user_id": 1055389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48233ab025f80f0e515bfba0b8c96627?s=128&d=identicon&r=PG", "display_name": "IanH", "link": "https://stackoverflow.com/users/1055389/ianh"}, "is_accepted": false, "score": 0, "last_activity_date": 1534354113, "creation_date": 1534354113, "answer_id": 51863578, "question_id": 51640376, "link": "https://stackoverflow.com/questions/51640376/can-rubymine-detect-spec-rb-files-and-show-them-when-clicking-run-debug/51863578#51863578", "title": "Can RubyMine detect _spec.rb files and show them when clicking Run/Debug?", "body": "<p>I don't know of a way to do that in a single operation, but this might help:</p>\n\n<ul>\n<li>Pressing <code>CMD-Shift-T</code> from <code>/lib/my_example.rb</code> should take you to the spec</li>\n<li>From <code>my_example_spec.rb</code>, you can press <code>Ctrl-D</code> or <code>Ctrl-R</code> to debug or run the test</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 4987904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vBz0r.jpg?s=128&g=1", "display_name": "Alvaro Sanchez", "link": "https://stackoverflow.com/users/4987904/alvaro-sanchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534354113, "creation_date": 1533149341, "last_edit_date": 1533566897, "question_id": 51640376, "link": "https://stackoverflow.com/questions/51640376/can-rubymine-detect-spec-rb-files-and-show-them-when-clicking-run-debug", "title": "Can RubyMine detect _spec.rb files and show them when clicking Run/Debug?", "body": "<p>I'm doing a local Ruby (Not Rails) app and have the following files:</p>\n\n<ul>\n<li>/lib/my_example.rb </li>\n<li>/spec/my_example_spec.rb</li>\n</ul>\n\n<p>When I select Run or Debug from the Run menu a popup appears and lists some of the *.rb files of the project (usually the files I modified last).</p>\n\n<p>This popup never shows the *_spec.rb files. I have to select the option \"Edit configurations\" and specifically select the *_spec.rb I want to run.</p>\n\n<p>Is there a way to make RubyMine's Run/Debug popup show me the *_spec.rb files of my project automatically and allow me to choose them?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533149152, "post_id": 51639912, "comment_id": 90245015, "body": "Don&#39;t know this one, but appears it might have something to do with VIM, the text editor? I am running on 2.4.4 on Windows ATM, and it is not present."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1533149281, "post_id": 51639912, "comment_id": 90245079, "body": "<a href=\"https://github.com/jberkel/interactive_editor\" rel=\"nofollow noreferrer\">github.com/jberkel/interactive_editor</a> \u2013 the gem lets you launch an editor from within irb."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1533150685, "post_id": 51639912, "comment_id": 90245774, "body": "When you installed <code>irbtools</code> that is definitely not the &quot;only gem&quot; (19 other gems are installed as dependencies <a href=\"https://github.com/janlelis/irbtools/blob/master/irbtools.gemspec\" rel=\"nofollow noreferrer\">irbtools.gemspec</a>) and <code>interactive_editor</code> happens to be one of them."}], "owner": {"reputation": 21, "user_id": 10167364, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6IKTskmqh2A/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pe3-HVS_wugeMxl1k5kGSseSyfIw/mo/photo.jpg?sz=128", "display_name": "Igor Novikov", "link": "https://stackoverflow.com/users/10167364/igor-novikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1533147660, "creation_date": 1533147660, "question_id": 51639912, "link": "https://stackoverflow.com/questions/51639912/what-is-objectnvim-objectnvim-in-ruby", "title": "What is Object::nvim (Object#nvim) in ruby?", "body": "<p>I have a fresh ruby-2.5.1 installed via rvm. I looked into rubydocs. The only gem that I have installed is irbtools. When I tried </p>\n\n<blockquote>\n  <p>Object.new.methods.sort</p>\n</blockquote>\n\n<p>I noticed I have some nvim method:</p>\n\n<blockquote>\n  <p>:mvim, :nano, :nil?, :nvim, :object_id, :only_class_ancestors,</p>\n</blockquote>\n\n<p>I tried looking for it on Google, official Ruby documentation sites, irbtools documentation and ri and found nothing. What does this method do?</p>\n\n<p>I tried</p>\n\n<blockquote>\n  <p>Object.new.method(:nvim).source_location</p>\n</blockquote>\n\n<p>And got</p>\n\n<blockquote>\n  <p>[\"/home/igor/.rvm/gems/ruby-2.5.1/gems/interactive_editor-0.0.11/lib/interactive_editor.rb\",\n  105]</p>\n</blockquote>\n\n<p>Which is interactive_editor gem, but what does it do?</p>\n"}, {"tags": ["ruby", "parsing", "treetop"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533149194, "post_id": 51639649, "comment_id": 90245028, "body": "There are 10 watchers on the Treetop tag, and 77.5k on Ruby. I think you would have much better luck getting an answer if you would provide a MCVE: <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533150357, "post_id": 51639649, "comment_id": 90245622, "body": "Thanks, adding code snippet."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1533236579, "post_id": 51639649, "comment_id": 90284528, "body": "It would be helpful if your MCVE focussed a bit more on the &quot;minimal&quot; part. You should also describe what problem you&#39;re encountering (not just the expected cause). You&#39;ve mentioned (somewhat misleading) blog post about &quot;AST squashing&quot;, but that concept wouldn&#39;t apply to anything in your grammar - certainly not your <code>bodies</code> rule. Why do you think that your problem is related to the phenomenon described in the blog? What unexpected behaviour are you observing and how which behaviour would you expect instead?"}, {"owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "edited": false, "score": 0, "creation_date": 1533238127, "post_id": 51639649, "comment_id": 90285208, "body": "@sepp2k- Thanks. Added details."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1533239410, "post_id": 51639649, "comment_id": 90285757, "body": "@justrajdeep &quot;all the nodes except the Body raise an exception&quot; That&#39;s not true. <code>Body</code> does raise an exception, <code>Bodies</code> is the one that doesn&#39;t throw an exception. With that in mind: Where in your call do you call <code>to_array</code> on anything other than <code>Bodies</code>?"}, {"owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1533242599, "post_id": 51639649, "comment_id": 90287132, "body": "@sepp2k - I have checked in a smaller code example. Sorry I meant <code>Bodies</code>. I call <code>to_array</code> from the <code>test.rb</code>. My expectation is when any of the nodes match, the corresponding node_extensions&#39;s <code>to_array</code> would get called.  In my example only the <code>Bodies</code> to_array ever gets called. None of the other gets called."}], "answers": [{"comments": [{"owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "edited": false, "score": 0, "creation_date": 1533234091, "post_id": 51659825, "comment_id": 90283456, "body": "I have reported the issue with the code here <a href=\"https://github.com/cjheath/treetop/issues/33\" rel=\"nofollow noreferrer\">github.com/cjheath/treetop/issues/33</a>  Code is checked in <a href=\"https://github.com/justrajdeep/treetop_ruby_issue\" rel=\"nofollow noreferrer\">github.com/justrajdeep/treetop_ruby_issue</a>"}, {"owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "edited": false, "score": 0, "creation_date": 1533238150, "post_id": 51659825, "comment_id": 90285223, "body": "Does not seem to help :("}], "tags": [], "owner": {"reputation": 3830, "user_id": 1177119, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a8513228d202b40141d295e840a4fa8?s=128&d=identicon&r=PG", "display_name": "Josh Voigts", "link": "https://stackoverflow.com/users/1177119/josh-voigts"}, "is_accepted": false, "score": 0, "last_activity_date": 1533233356, "creation_date": 1533233356, "answer_id": 51659825, "question_id": 51639649, "link": "https://stackoverflow.com/questions/51639649/how-to-trigger-functions-in-subnodes-in-ruby-treetop-tree-washow-to-prevent-r/51659825#51659825", "title": "How to trigger functions in subnodes in Ruby Treetop tree. (was:How to prevent ruby Treetop doing AST squashing)", "body": "<p>Try breaking <code>(body+)</code> into a new rule like this:</p>\n\n<pre><code>rule bodies\n   blankLine* interesting:interesting blankLine* &lt;Bodies&gt;\nend\n\nrule interesting\n   body+ &lt;Interesting&gt;\nend\n</code></pre>\n\n<p>Otherwise, it would be helpful to see the SyntaxNode classes.</p>\n"}, {"tags": [], "owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "is_accepted": true, "score": 1, "last_activity_date": 1533244565, "creation_date": 1533244565, "answer_id": 51662271, "question_id": 51639649, "link": "https://stackoverflow.com/questions/51639649/how-to-trigger-functions-in-subnodes-in-ruby-treetop-tree-washow-to-prevent-r/51662271#51662271", "title": "How to trigger functions in subnodes in Ruby Treetop tree. (was:How to prevent ruby Treetop doing AST squashing)", "body": "<p>You call <code>to_array</code> on <code>tree</code>, which is a <code>Bodies</code>. That is the only thing you ever call <code>to_array</code> on, so no other <code>to_array</code> method will be called.</p>\n\n<p>If you want <code>to_array</code> to be called on child nodes of the <code>Bodies</code> node, <code>Bodies#to_array</code> needs to call <code>to_array</code> on those child nodes. So if you want to call it on the <code>Body</code> nodes you labelled <code>interesting</code>, you should iterate over <code>interesting</code> and call <code>.to_array</code> on each element.</p>\n"}], "owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 51662271, "answer_count": 2, "score": 0, "last_activity_date": 1533257997, "creation_date": 1533146656, "last_edit_date": 1533257997, "question_id": 51639649, "link": "https://stackoverflow.com/questions/51639649/how-to-trigger-functions-in-subnodes-in-ruby-treetop-tree-washow-to-prevent-r", "title": "How to trigger functions in subnodes in Ruby Treetop tree. (was:How to prevent ruby Treetop doing AST squashing)", "body": "<p>I am been using treetop for a while. I wrote rules following </p>\n\n<p><a href=\"http://thingsaaronmade.com/blog/a-quick-intro-to-writing-a-parser-using-treetop.html\" rel=\"nofollow noreferrer\">http://thingsaaronmade.com/blog/a-quick-intro-to-writing-a-parser-using-treetop.html</a></p>\n\n<p>I can parse my whole input string but i none of the other <code>to_array</code> function gets triggered other than the initial one.</p>\n\n<p>Then I found <a href=\"https://whitequark.org/blog/2011/09/08/treetop-typical-errors/\" rel=\"nofollow noreferrer\">https://whitequark.org/blog/2011/09/08/treetop-typical-errors/</a> which talk about <code>AST squashing</code> and I figured out that my rule is doing the same.</p>\n\n<p>The first rule I have is </p>\n\n<pre><code>  rule bodies\n    blankLine* interesting:(body+) blankLine* &lt;Bodies&gt;\n  end\n</code></pre>\n\n<p>and everything is getting gobbled up by <code>body</code>.</p>\n\n<p>Can someone suggest me what can I do to fix this?</p>\n\n<p><strong>Edit</strong>\nAdding code snippet:</p>\n\n<pre><code>grammar Sexp\n\n  rule bodies\n    blankLine* interesting:(body+) blankLine* &lt;Bodies&gt;\n  end\n\n  rule body\n    commentPortString (ifdef_blocks / interface)+ (blankLine / end_of_file) &lt;Body&gt;\n  end\n\n  rule interface\n    space? (intf / intfWithSize) space?  newLine &lt;Interface&gt;\n  end\n\n  rule commentPortString\n    space? '//' space portString space?  &lt;CommentPortString&gt;\n  end\n\n  rule portString\n    'Port' space? '.' newLine &lt;PortString&gt;\n  end\n\n  rule expression\n    space? '(' body ')' space? &lt;Expression&gt;\n  end\n\n  rule intf\n    (input / output) space wire:wireName space? ';' &lt;Intf&gt;\n  end\n\n  rule intfWithSize\n    (input / output) space? width:ifWidth space? wire:wireName space? ';' &lt;IntfWithSize&gt;\n  end\n\n  rule input\n    'input' &lt;InputDir&gt;\n  end\n\n  rule output\n    'output' &lt;OutputDir&gt;\n  end\n\n  rule ifdef_blocks\n    ifdef_line (interface / ifdef_block)* endif_line &lt;IfdefBlocks&gt;\n  end\n\n  rule ifdef_block\n    ifdef_line interface* endif_line &lt;IfdefBlocks&gt;\n  end\n\n  rule ifdef_line\n    space? (ifdef / ifndef) space+  allCaps space? newLine &lt;IfdefLine&gt;\n  end\n\n  rule endif_line\n    space? (endif) space? newLine &lt;EndifLine&gt;\n  end\n\n  rule ifdef\n    '`ifdef' &lt;Ifdef&gt;\n  end\n\n  rule ifndef\n    '`ifndef' &lt;Ifndef&gt;\n  end\n\n  rule endif\n    '`endif' &lt;Endif&gt;\n  end\n\n  rule ifWidth\n    '[' space? msb:digits space? ':' space? lsb:digits ']' &lt;IfWidth&gt;\n  end\n\n  rule digits\n    [0-9]+ &lt;Digits&gt;\n  end\n\n  rule integer\n    ('+' / '-')? [0-9]+ &lt;IntegerLiteral&gt;\n  end\n\n  rule float\n    ('+' / '-')? [0-9]+ (('.' [0-9]+) / ('e' [0-9]+)) &lt;FloatLiteral&gt;\n  end\n\n  rule string\n    '\"' ('\\\"' / !'\"' .)* '\"' &lt;StringLiteral&gt;\n  end\n\n  rule identifier\n    [a-zA-Z\\=\\*] [a-zA-Z0-9_\\=\\*]* &lt;Identifier&gt;\n  end\n\n  rule allCaps\n    [A-Z] [A-Z0-9_]*\n  end\n\n  rule wireName\n    [a-zA-Z] [a-zA-Z0-9_]* &lt;WireName&gt;\n  end\n\n  rule non_space\n    !space .\n  end\n\n  rule space\n    [^\\S\\n]+\n  end\n\n  rule non_space\n    !space .\n  end\n\n  rule blankLine\n    space* newLine\n  end\n\n  rule not_newLine\n    !newLine .\n  end\n\n  rule newLine\n    [\\n\\r]\n  end\n\n  rule end_of_file\n    !.\n  end\n\nend\n</code></pre>\n\n<p>Test string</p>\n\n<pre><code>// Port.\ninput         CLK;\n\n// Port.\ninput         REFCLK;\n\n// Port.\ninput [ 41:0] mem_power_ctrl;\noutput data;\n</code></pre>\n\n<p>EDIT: Adding more details</p>\n\n<p>The test code is checked into:\n<a href=\"https://github.com/justrajdeep/treetop_ruby_issue\" rel=\"nofollow noreferrer\">https://github.com/justrajdeep/treetop_ruby_issue</a>.</p>\n\n<p>As you would see in my <code>node_extensions.rb</code> all the nodes except the <code>Bodies</code> raise an exception in the method <code>to_array</code>. But none of the exceptions trigger.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533148516, "post_id": 51638866, "comment_id": 90244707, "body": "What does <code>@assignment.assignments_users.first</code> return?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533148585, "post_id": 51638866, "comment_id": 90244755, "body": "You have the association <code>has_many :assignments_users</code> with model name <code>AssignmentsUsers</code> (and not <code>AssignmentsUser</code>, singular). Do you have a reason for that?"}], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1533144094, "creation_date": 1533144094, "answer_id": 51638972, "question_id": 51638866, "link": "https://stackoverflow.com/questions/51638866/rails-trying-to-update-an-attribute-on-a-join-table-getting-typeerror-nil-is/51638972#51638972", "title": "Rails: Trying to update an attribute on a join table | getting TypeError: nil is not a symbol nor a string", "body": "<p>I believe the join table is not mean to have a primary key when you're using HABTM. </p>\n\n<p>Since you're storing data on the join table you are, appropriately, using <code>has_many :through</code>. In this case, you should use a proper table (including <code>id</code>) for the join table. </p>\n\n<p>BTW, I would think your join model might be <code>UserAssignment</code> with the table being <code>user_assignments</code> which, IMO, reads a little more naturally. In which case, you would do:</p>\n\n<pre><code>class Assignment &lt; ActiveRecord::Base\n  has_many :user_assignments\n  has_many :assignees, through: :user_assignments, source: :user\nend\n\nclass User &lt; ActiveRecord::Base\n  has_many :user_assignments\n  has_many :assignments, through: :user_assignments\nend\n\nclass UserAssignment &lt; ActiveRecord::Base\n  # == Schema Information\n  #  completed_on :datetime\n  belongs_to :user\n  belongs_to :assignment\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "is_accepted": false, "score": 0, "last_activity_date": 1533144106, "creation_date": 1533144106, "answer_id": 51638979, "question_id": 51638866, "link": "https://stackoverflow.com/questions/51638866/rails-trying-to-update-an-attribute-on-a-join-table-getting-typeerror-nil-is/51638979#51638979", "title": "Rails: Trying to update an attribute on a join table | getting TypeError: nil is not a symbol nor a string", "body": "<blockquote>\n  <p>So if a join table is not meant to have a primary key, how does one update an attribute on it?</p>\n</blockquote>\n\n<p>Premise invalid; it <em>is</em> meant to have a primary key, and that's how one updates an attribute on it.</p>\n\n<p>While a table for a <code>has_and_belongs_to_many</code> association does not need a primary key, if you're using a first class <code>ActiveRecord::Base</code> instance, it does. (You <em>might</em> get away without it for a limited set of operations, which could possibly be enough to treat it like a simple join, but as you've seen, that can only get you so far.)</p>\n\n<p>I can't speak to \"most tuts\", but <a href=\"https://guides.rubyonrails.org/association_basics.html#the-has-many-through-association\" rel=\"nofollow noreferrer\">the Active Record Associations guide</a> certainly shows an <code>id</code> attribute on <code>appointments</code>.</p>\n"}], "owner": {"reputation": 2665, "user_id": 1258001, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/486162db0cc17ae06ab6ad29ecb3f699?s=128&d=identicon&r=PG", "display_name": "Polygon Pusher", "link": "https://stackoverflow.com/users/1258001/polygon-pusher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 51638972, "answer_count": 2, "score": 0, "last_activity_date": 1533144106, "creation_date": 1533143627, "question_id": 51638866, "link": "https://stackoverflow.com/questions/51638866/rails-trying-to-update-an-attribute-on-a-join-table-getting-typeerror-nil-is", "title": "Rails: Trying to update an attribute on a join table | getting TypeError: nil is not a symbol nor a string", "body": "<pre><code>class Assignment &lt; ActiveRecord::Base\n  has_many :assignments_users, class_name: \"AssignmentsUsers\"\n  has_many :assignees, through: :assignments_users, source: :user\n\nclass User &lt; ActiveRecord::Base\n  has_many :assignments_users, class_name: \"AssignmentsUsers\"\n  has_many :assignments, through: :assignments_users, source: :assignment\n\nclass AssignmentsUsers &lt; ActiveRecord::Base\n  # == Schema Information\n  #  completed_on :datetime\n  belongs_to :user\n  belongs_to :assignment\nend\n\n\n$ @assignment.assignments_users.first.update(completed_on: Time.now)\n&gt; TypeError: nil is not a symbol nor a string  \n</code></pre>\n\n<p>I know this is due to the join table not having a primary key. \nThat is intentional per most tuts.</p>\n\n<p>So if a join table is not meant to have a primary key, how does one update an attribute on it?</p>\n"}, {"tags": ["ruby", "telegram"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10166928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80470d1e4ac613e41baa53c7365a080c?s=128&d=identicon&r=PG", "display_name": "Andronic Alexandru", "link": "https://stackoverflow.com/users/10166928/andronic-alexandru"}, "edited": false, "score": 0, "creation_date": 1533141730, "post_id": 51638359, "comment_id": 90241161, "body": "It was so simple, and I&#39;ve struggled with this for so long. Thank you so much!"}, {"owner": {"reputation": 19, "user_id": 10166928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80470d1e4ac613e41baa53c7365a080c?s=128&d=identicon&r=PG", "display_name": "Andronic Alexandru", "link": "https://stackoverflow.com/users/10166928/andronic-alexandru"}, "edited": false, "score": 0, "creation_date": 1533141745, "post_id": 51638359, "comment_id": 90241172, "body": "(noob in the house)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533146663, "post_id": 51638359, "comment_id": 90243688, "body": "Also, you could use <code>&#47;hello&#47;i</code> for case insensitive matching. (Or alternatively, do that <code>case</code>/<code>if</code> statement on <code>message.text.downcase</code>.)"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1533141785, "last_edit_date": 1533141785, "creation_date": 1533141533, "answer_id": 51638359, "question_id": 51638323, "link": "https://stackoverflow.com/questions/51638323/ruby-how-to-ignore-words-in-when/51638359#51638359", "title": "Ruby: how to ignore words in &#39;when&#39;", "body": "<p>You can use a <a href=\"https://ruby-doc.org/core-2.5.1/Regexp.html\" rel=\"nofollow noreferrer\">regexp</a> to match your text:</p>\n\n<pre><code>case message.text\nwhen /hello/   # matches if there is the 'hello' somewhere in the string\n  # ...\nwhen /\\Ahello/ # matches if the string starts with 'hello'\n  # ...\nend\n</code></pre>\n\n<p>Or you can use <code>include?</code> in an <code>if</code> condition:</p>\n\n<pre><code>if message.text.include?('hello')\n  # ...\nend\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10166928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80470d1e4ac613e41baa53c7365a080c?s=128&d=identicon&r=PG", "display_name": "Andronic Alexandru", "link": "https://stackoverflow.com/users/10166928/andronic-alexandru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533141785, "creation_date": 1533141414, "question_id": 51638323, "link": "https://stackoverflow.com/questions/51638323/ruby-how-to-ignore-words-in-when", "title": "Ruby: how to ignore words in &#39;when&#39;", "body": "<p>How do I make the bot reply even if user\u2019s message doesn\u2019t 100% match with words I wrote in \u2018when\u2019? I want to make the bot trigger if someone sent \u201chello there\u201d, for example, instead of just hello.  </p>\n\n<p>I\u2019ve heard about <code>when include?('example')</code> but I can\u2019t make it work. </p>\n\n<pre><code>    require 'telegram/bot'\n\ntoken = 'x'\n\nTelegram::Bot::Client.run(token) do |bot|\n\nbot.listen do |message|\n   puts \"@#{message.from.username}: #{message.text}\"\n  case message.text\n\nwhen 'hello'\n    bot.api.send_message(chat_id: message.chat.id, text: \"answer\")\n\nend\nend\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "inheritance"], "answers": [{"tags": [], "owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "is_accepted": true, "score": 2, "last_activity_date": 1533142099, "creation_date": 1533142099, "answer_id": 51638498, "question_id": 51638225, "link": "https://stackoverflow.com/questions/51638225/how-to-inherit-class-variables-from-parents-included-module-in-ruby/51638498#51638498", "title": "How to inherit class variables from parents included module in Ruby", "body": "<p><a href=\"https://api.rubyonrails.org/classes/Class.html#method-i-class_attribute\" rel=\"nofollow noreferrer\"><code>class_attribute</code></a> takes care of the required inheritance semantics for you. As you've seen, it's not quite as simple as putting an instance variable on the class, because that leaves it <code>nil</code> on subclasses: they're <em>instance</em> variables, and that's a separate instance.</p>\n\n<p>The examples you mention do other, more specialised and more complicated, things... but you'll find plenty of straightforward examples in the Rails source that do use <code>class_attribute</code>.</p>\n"}], "owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 51638498, "answer_count": 1, "score": 0, "last_activity_date": 1533142099, "creation_date": 1533141064, "question_id": 51638225, "link": "https://stackoverflow.com/questions/51638225/how-to-inherit-class-variables-from-parents-included-module-in-ruby", "title": "How to inherit class variables from parents included module in Ruby", "body": "<p>I am trying to develop a reusable module for Active Record models to be used shared in models. It works well except child classes can't find the variables. </p>\n\n<p>This is easier demonstrated with code</p>\n\n<p>This is the module:</p>\n\n<pre><code>module Scanner\n  def self.included(base)\n    base.extend(ClassMethods)\n  end\n\n  module ClassMethods\n    def scan(*fields)\n      @scan = fields if fields.present?\n      @scan\n    end\n  end\nend\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  include Scanner\n  scan :user_name\nend\n</code></pre>\n\n<p>Calling <code>User.scan</code> returns <code>:user_name</code>. Perfect!</p>\n\n<p>However. This is an issue:</p>\n\n<pre><code>class Admin &lt; User\nend\n</code></pre>\n\n<p>Calling <code>Admin.scan</code> returns <code>nil</code></p>\n\n<p>How come <code>:user_name</code> is not being set in the parent? I am following the source for AR for methods like <code>primary_key</code> and <code>table_name</code>, they seem to be inherting values from the parent</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "edited": false, "score": 2, "creation_date": 1533139281, "post_id": 51637705, "comment_id": 90239771, "body": "Which of the defined routes are you expecting <code>checkin_path</code> to match?"}, {"owner": {"reputation": 413, "user_id": 7277951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VdiXO.jpg?s=128&g=1", "display_name": "FelixAVeras", "link": "https://stackoverflow.com/users/7277951/felixaveras"}, "reply_to_user": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "edited": false, "score": 0, "creation_date": 1533142792, "post_id": 51637705, "comment_id": 90241741, "body": "@matthewd I wait for the route that leads me to index. Show me in that view"}], "answers": [{"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 413, "user_id": 7277951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VdiXO.jpg?s=128&g=1", "display_name": "FelixAVeras", "link": "https://stackoverflow.com/users/7277951/felixaveras"}, "edited": false, "score": 0, "creation_date": 1533150794, "post_id": 51637840, "comment_id": 90245826, "body": "images. yuck. Anyway, you are in fact missing the <code>:id</code> as indicated by <code>missing_required_keys: [:id]</code>."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1533139692, "creation_date": 1533139692, "answer_id": 51637840, "question_id": 51637705, "link": "https://stackoverflow.com/questions/51637705/ruby-on-rails-actioncontrollerurlgenerationerror/51637840#51637840", "title": "Ruby on Rails - ActionController::UrlGenerationError", "body": "<p>If you run <code>rake routes</code> in your console, you'll see that your routes are:</p>\n\n<pre><code>get_barcode_checkin_index POST   /checkin/get_barcode(.:format)                       checkin#get_barcode\n            checkin_index GET    /checkin(.:format)                                   checkin#index\n                          POST   /checkin(.:format)                                   checkin#create\n              new_checkin GET    /checkin/new(.:format)                               checkin#new\n             edit_checkin GET    /checkin/:id/edit(.:format)                          checkin#edit\n                  checkin GET    /checkin/:id(.:format)                               checkin#show\n                          PATCH  /checkin/:id(.:format)                               checkin#update\n                          PUT    /checkin/:id(.:format)                               checkin#update\n                          DELETE /checkin/:id(.:format)                               checkin#destroy\n</code></pre>\n\n<p>As you can see, the <code>checkin_path</code> expects an <code>id</code>, which you are not providing here:</p>\n\n<pre><code>&lt;%= link_to \"Check-In\", checkin_path, :class =&gt; \"nav-link\" %&gt;                              \n</code></pre>\n\n<p>Your error probably says something about missing id, but you don't provide the error in your question, so we can't see exactly what it says.</p>\n\n<p>BTW, by convention, <code>CheckinController</code> should probably be <code>CheckinsController</code>. And your routes should probably be:</p>\n\n<pre><code>resources :checkins do\n   post :get_barcode, on: :collection\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 628, "user_id": 8267417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qgllr-3VCV4/AAAAAAAAAAI/AAAAAAAAAAo/E_crAMNR-fM/photo.jpg?sz=128", "display_name": "gasc", "link": "https://stackoverflow.com/users/8267417/gasc"}, "is_accepted": false, "score": 0, "last_activity_date": 1533174455, "creation_date": 1533174455, "answer_id": 51644417, "question_id": 51637705, "link": "https://stackoverflow.com/questions/51637705/ruby-on-rails-actioncontrollerurlgenerationerror/51644417#51644417", "title": "Ruby on Rails - ActionController::UrlGenerationError", "body": "<p>As you said in one of your comments, you're expecting the URL for the index page? \n Then instead of</p>\n\n<pre><code>&lt;%= link_to \"Check-In\", checkin_path, :class =&gt; \"nav-link\" %&gt;`\n</code></pre>\n\n<p>you need to use </p>\n\n<pre><code>&lt;%= link_to \"Check-In\", checkin_index_path, :class =&gt; \"nav-link\" %&gt;\n</code></pre>\n"}], "owner": {"reputation": 413, "user_id": 7277951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VdiXO.jpg?s=128&g=1", "display_name": "FelixAVeras", "link": "https://stackoverflow.com/users/7277951/felixaveras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 51637840, "answer_count": 2, "score": -1, "last_activity_date": 1533174455, "creation_date": 1533139204, "last_edit_date": 1533150156, "question_id": 51637705, "link": "https://stackoverflow.com/questions/51637705/ruby-on-rails-actioncontrollerurlgenerationerror", "title": "Ruby on Rails - ActionController::UrlGenerationError", "body": "<p>I am developing a project in Ruby on rails 5.2, and in this route it tells me that I have an error and that the specified route is not found. but when checking, the route is there or at least I think so.</p>\n\n<p>Here's my routes.rb:</p>\n\n<pre><code>resources :checkin do\n   post :get_barcode, on: :collection\nend\n</code></pre>\n\n<p>checkin_controller.rb:</p>\n\n<pre><code>class CheckinController &lt; ApplicationController\ndef index\n    @checkin = CheckIn.all\nend\n\ndef show\nend\n\ndef new\n    @checkin = CheckIn.new\n    @checkin.upc = params[:upc]\nend\n\ndef edit\nend\n\ndef update\nend\n\ndef destroy\nend\n\ndef get_barcode\n    @checkin = Merchant.find_or_initialize_by(upc: params[:upc])\n    unless @checkin.new_record?\n        redirect_to @checkin\n    else\n        redirect_to new_product_path(upc: params[:upc])\n    end\nend\nend\n</code></pre>\n\n<p>And my link in my view:</p>\n\n<pre><code>&lt;%= link_to \"Check-In\", checkin_path, :class =&gt; \"nav-link\" %&gt;\n</code></pre>\n\n<p>here's a image of my error page:\n<a href=\"https://i.stack.imgur.com/arFac.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/arFac.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "selenium", "watir"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 3385972, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/HS0su.jpg?s=128&g=1", "display_name": "DillonCarter", "link": "https://stackoverflow.com/users/3385972/dilloncarter"}, "edited": false, "score": 0, "creation_date": 1533138141, "post_id": 51637138, "comment_id": 90239112, "body": "That makes way more sense. Thank you for your help, Justin!"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1533145255, "post_id": 51637138, "comment_id": 90242926, "body": "Hi, WATIR is not rescuing this error even after Firefox recently has given the exception for this <code>ElementClickInterceptedError</code> I understand there are some permanent overlay like given by OP would not disappear over the period of time, but it&#39;s not the case for all, some of them are removed quickly and the element become clickable. So WATIR has to rescue this case, let it fail in default time out if it is permanent overlay otherwise let it continue without any problem, what do you say Justin?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1533148576, "post_id": 51637138, "comment_id": 90244745, "body": "@Rajagopalan is that the problem reported in <a href=\"https://github.com/watir/watir/issues/532\" rel=\"nofollow noreferrer\">github.com/watir/watir/issues/532</a>?"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1533162947, "post_id": 51637138, "comment_id": 90250645, "body": "Yes exactly, that&#39;s what I am saying."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 1, "last_activity_date": 1533138074, "last_edit_date": 1533138074, "creation_date": 1533137304, "answer_id": 51637138, "question_id": 51636752, "link": "https://stackoverflow.com/questions/51636752/checking-a-checkbox-using-ruby-watir/51637138#51637138", "title": "Checking a checkbox using Ruby/Watir", "body": "<p>Trying to set the checkbox will give the error:</p>\n\n<blockquote>\n  <p>Selenium::WebDriver::Error::UnknownError : unknown error: Element\n  &lt;input type=\"checkbox\" name=\"requestedFiles[]\"\n  id=\"file_group_INVITATIONS\" value=\"INVITATIONS\"> is not clickable at\n  point (420, 481). Other element would receive the click: &lt;label\n  for=\"file_group_INVITATIONS\">...&lt;/label></p>\n</blockquote>\n\n<p>LinkedIn wanted to style their checkbox, so they actually place a label on top of the actual checkbox element. As a user, when you are clicking the \"checkbox\", you are actually clicking the label element. This is what the error message is referring to when it talks about another element receiving the click.</p>\n\n<p>You can do the same in Watir. The label is properly associated with the checkbox, which allows you to simply do:</p>\n\n<pre><code>browser.checkbox(id: 'file_group_INVITATIONS').label.click\n</code></pre>\n\n<p>Or more directly:</p>\n\n<pre><code>browser.label(:for =&gt; 'file_group_INVITATIONS').click\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 3385972, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/HS0su.jpg?s=128&g=1", "display_name": "DillonCarter", "link": "https://stackoverflow.com/users/3385972/dilloncarter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 0, "accepted_answer_id": 51637138, "answer_count": 1, "score": 0, "last_activity_date": 1533138074, "creation_date": 1533136114, "question_id": 51636752, "link": "https://stackoverflow.com/questions/51636752/checking-a-checkbox-using-ruby-watir", "title": "Checking a checkbox using Ruby/Watir", "body": "<p>I'm trying to automate pulling some data requests from LinkedIn each Friday, but I need to check specific checkboxes to request only relevant data. </p>\n\n<p>After going through the documentation and multiple posts I still cannot seem to solve this issue. </p>\n\n<p>The specific request page is under LinkedIn's privacy page where you request to download all of your data. </p>\n\n<p>Here's the checkbox line of code:</p>\n\n<pre><code>browser.checkbox(id: 'file_group_INVITATIONS').set(true)\n</code></pre>\n\n<p>I've also tried setting it to false, using the value rather than id as well. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "string", "integer", "removing-whitespace"], "comments": [{"owner": {"reputation": 856, "user_id": 6018313, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/krXMH.jpg?s=128&g=1", "display_name": "Kevin Etore", "link": "https://stackoverflow.com/users/6018313/kevin-etore"}, "edited": false, "score": 0, "creation_date": 1533135753, "post_id": 51636518, "comment_id": 90237522, "body": "Strange, if I execute <code>&quot;2 217 500 \u20ac&quot;.gsub(&quot;\u20ac&quot;,&quot;&quot;).gsub(&quot; &quot;,&quot;&quot;).to_i</code> I get; <code>2217500</code>."}, {"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1533135758, "post_id": 51636518, "comment_id": 90237525, "body": "What did you try with <code>gsub</code>?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533139104, "post_id": 51636518, "comment_id": 90239674, "body": "Also <code>&quot;2 217 500 \u20ac&quot;.scan(&#47;\\d+&#47;).join</code>."}, {"owner": {"reputation": 19, "user_id": 10027952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46212ae7402bb4e77000c7bcc8eae91?s=128&d=identicon&r=PG&f=1", "display_name": "&#201;liseS", "link": "https://stackoverflow.com/users/10027952/%c3%89lises"}, "edited": false, "score": 0, "creation_date": 1533194726, "post_id": 51636518, "comment_id": 90259167, "body": "Yes in irb test &quot;2 217 500 \u20ac&quot;.gsub(&quot;\u20ac&quot;,&quot;&quot;).gsub(&quot; &quot;,&quot;&quot;).to_i works for me too but it post 2 in real situation And .scan(/\\d+/).join works ! Thank you !"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533138997, "post_id": 51637516, "comment_id": 90239615, "body": "This. <i>Always</i> use whitelisting, not blacklisting."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1533138530, "creation_date": 1533138530, "answer_id": 51637516, "question_id": 51636518, "link": "https://stackoverflow.com/questions/51636518/how-to-delete-white-space-in-a-string-parsed-ruby-delete-doesnt-work/51637516#51637516", "title": "How to delete white space in a string parsed (ruby) ? (delete doesn&#39;t work)", "body": "<p>I would just remove everything from the string that isn't a digit:</p>\n\n<pre><code>\"2 217 500 \u20ac\".gsub(/\\D/, '')\n#=&gt; \"2217500\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "is_accepted": false, "score": 0, "last_activity_date": 1533146330, "creation_date": 1533146330, "answer_id": 51639572, "question_id": 51636518, "link": "https://stackoverflow.com/questions/51636518/how-to-delete-white-space-in-a-string-parsed-ruby-delete-doesnt-work/51639572#51639572", "title": "How to delete white space in a string parsed (ruby) ? (delete doesn&#39;t work)", "body": "<p>If you want to remove only leading and trailing whitespace (like PHP's trim) you can use\u00a0<code>.strip</code>, but if you want to remove\u00a0all whitespaces, you can use\u00a0<code>.gsub(/\\s+/, \"\")</code>\u00a0instead .</p>\n"}], "owner": {"reputation": 19, "user_id": 10027952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46212ae7402bb4e77000c7bcc8eae91?s=128&d=identicon&r=PG&f=1", "display_name": "&#201;liseS", "link": "https://stackoverflow.com/users/10027952/%c3%89lises"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1533146330, "creation_date": 1533135436, "last_edit_date": 1533140355, "question_id": 51636518, "link": "https://stackoverflow.com/questions/51636518/how-to-delete-white-space-in-a-string-parsed-ruby-delete-doesnt-work", "title": "How to delete white space in a string parsed (ruby) ? (delete doesn&#39;t work)", "body": "<p>I don't understand why but my string whitespaces doesn't want to remove. \nIt comes from an array parsed from a Google sheets. \nThe interest is to convert it to an integer in order to treat it then. </p>\n\n<p>My code returns \"2 217 500 \u20ac\".\nThen I use the method .delete(\" \"+\"\u20ac\") and it returns \"2 217 500\". \nIf I try to convert it from an integer (with .to_i) it return 2.\nI also tried .gsub and .split method it doesn't work too.</p>\n\n<p>Did someone knows why it doesn't work, or another method to do it ?</p>\n\n<p>Here is my code : </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>spreadsheet_id = '18YgC24_HRA6cddc71vynatoMwUQpToQHtGE_p1vc2Xk'\n    range = 'League_billing_total!A2:B'\n\n    response4 = service.get_spreadsheet_values(spreadsheet_id, range).to_json\n    puts response4\n    # {\"majorDimension\":\"ROWS\",\"range\":\"League_billing_total!A2:B1000\",\"values\":[[\"Total 2018\",\"1\u00a0575\u00a0764 \u20ac\"],[\"Budget\",\"2\u00a0217\u00a0500 \u20ac\"]]}\n\n    parse_response4 = JSON.parse(response4) \n    puts parse_response4\n    # {\"majorDimension\"=&gt;\"ROWS\", \"range\"=&gt;\"League_billing_total!A2:B1000\", \"values\"=&gt;[[\"Total 2018\", \"1\u00a0575\u00a0764 \u20ac\"], [\"Budget\", \"2\u00a0217\u00a0500 \u20ac\"]]}\n\n    flatte = parse_response4['values']\n    puts flatte # [[\"Total 2018\", \"1\u00a0575\u00a0764 \u20ac\"], [\"Budget\", \"2\u00a0217\u00a0500 \u20ac\"]]\n\n    @starters_total = flatte.flatten!\n\n    puts @starters_total        # [\"Total 2018\", \"1\u00a0575\u00a0764 \u20ac\", \"Budget\",\"2\u00a0217\u00a0500 \u20ac\"]\n    puts @starters_total[3] # \"2 217 500 \u20ac\"\n\n    @budget_2018_new_deals = @starters_total[3].delete(\" \"+\"\u20ac\") \n    puts @budget_2018_new_deals # \"2 217 500\"\n    puts @budget_2018_new_deals.to_i # 2\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "cancan", "cancancan"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1533135560, "post_id": 51636410, "comment_id": 90237403, "body": "<i>Sidenote:</i> <code>a = %i[]</code> makes no sense, it\u2019s the same as <code>a = []</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533135612, "post_id": 51636410, "comment_id": 90237437, "body": "This is ruby: do it as you like. There is no impact on anything. just a matter of preference."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533135665, "post_id": 51636410, "comment_id": 90237474, "body": "<i>Sidenote:</i> <code>can :manage, :all</code> can be written as <code>can *%i[manage all]</code> since you like <code>%i</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1475, "user_id": 1743874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/vQYev.png?s=128&g=1", "display_name": "Piccolo", "link": "https://stackoverflow.com/users/1743874/piccolo"}, "is_accepted": false, "score": 1, "last_activity_date": 1533140760, "creation_date": 1533140760, "answer_id": 51638139, "question_id": 51636410, "link": "https://stackoverflow.com/questions/51636410/when-to-use-percent-i-method-to-create-arrays-with-symbols/51638139#51638139", "title": "When to use percent i method to create arrays with symbols?", "body": "<p>In terms of the language itself, there are no important differences between the two, so it really comes down to a matter of preference. Personally, I think that the array of symbol literals (<code>[:create, :show, :update]</code>) looks more Ruby-like and that is what I'd use, but you should discuss it with your team. The most important part is being consistent, and you don't want to make the decision alone.</p>\n\n<p>In the general case of when to use <code>%i</code> instead of writing out a literal array of symbols, I'd consider using the former if it was a list of symbols that had certain meaning, like a class constant or something, and there were more than just a couple. I've been using Ruby for a while now and until this question didn't really register the existence of <code>%i</code>, so it's relatively uncommonly used. It's maybe not in the average Rubyist's vocabulary, so that might be another reason to stay away from it.</p>\n"}], "owner": {"reputation": 1931, "user_id": 1639657, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/f6c37c33188931ef56c5c1ccfe638dd5?s=128&d=identicon&r=PG", "display_name": "sonnyhe2002", "link": "https://stackoverflow.com/users/1639657/sonnyhe2002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "closed_date": 1533142495, "answer_count": 1, "score": 0, "last_activity_date": 1533140760, "creation_date": 1533135189, "question_id": 51636410, "link": "https://stackoverflow.com/questions/51636410/when-to-use-percent-i-method-to-create-arrays-with-symbols", "closed_reason": "Opinion-based", "title": "When to use percent i method to create arrays with symbols?", "body": "<p>In Ruby there is a nifty method of creating an array of symbols.\nPercent i method.</p>\n\n<pre><code>%i[a b c]\n</code></pre>\n\n<p>I am working in a team based environment, and although I can see this being useful with a large list of array, I have this is being implemented for everything</p>\n\n<pre><code>a = %i[]    # Empty array\n</code></pre>\n\n<p>cancan abilities</p>\n\n<pre><code>  can :manage, :all\n  cannot %i[create show update], AModel\n  cannot %i[create], BModel\n  cannot %i[show], CModel\n</code></pre>\n\n<p>Is it good to initialize all arrays using this methods or just</p>\n\n<pre><code>  cannot [:create, :show, :update], AModel\n</code></pre>\n\n<p>I know there is no 'right' way but I would like the pros and cons to help me decide</p>\n"}, {"tags": ["javascript", "ruby", "firebase", "optimization", "yandex"], "comments": [{"owner": {"reputation": 21436, "user_id": 1021703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/g09TV.jpg?s=128&g=1", "display_name": "Jeremy Thille", "link": "https://stackoverflow.com/users/1021703/jeremy-thille"}, "edited": false, "score": 4, "creation_date": 1533134101, "post_id": 51635947, "comment_id": 90236352, "body": "If they are served from CDNs, as they appear to be, you can&#39;t combine them. If you really want to combine them, you have to download them, merge them either by hand or with a task automation tool (Gulp...) and then serve the combined file from your own server."}], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 5466600, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1cd97462bae83769f242422708891dca?s=128&d=identicon&r=PG&f=1", "display_name": "saifudeen ni", "link": "https://stackoverflow.com/users/5466600/saifudeen-ni"}, "is_accepted": false, "score": 0, "last_activity_date": 1539404174, "creation_date": 1539404174, "answer_id": 52789476, "question_id": 51635947, "link": "https://stackoverflow.com/questions/51635947/how-to-combine-external-javascript-files/52789476#52789476", "title": "How to combine external JavaScript files", "body": "<h2><b>Combine Javascript files</b></h2>\n\n<p>JavaScript can be combined by using predecessors. <b>Gulp</b> is one of the processor. <br>\nIf using gulp, there is a package called <code>gulp concat</code>, it should be imported first, and we can simply concat multiple JavaScript files into one. So script file will be one.<br></p>\n\n<p><i><b>See this question about gulp: <a href=\"https://stackoverflow.com/questions/24591854/using-gulp-to-concatenate-and-uglify-files\">Using Gulp to Concatenate and Uglify files</a> </b></i>.<br></p>\n\n<h3>Steps are very simple</h3>\n\n<p>1) Import the gulp<br>\n2) Add the files<br>\n3) Add the destination in the <code>.dest()</code>.<br></p>\n\n<p><i>But you should download the js files, and add it to your local path.</i></p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546778355, "creation_date": 1533133853, "last_edit_date": 1546778355, "question_id": 51635947, "link": "https://stackoverflow.com/questions/51635947/how-to-combine-external-javascript-files", "title": "How to combine external JavaScript files", "body": "<p>In site optimization and after testing its speed on <code>pingdom</code> and others it says to combine external JavaScript files. How can I combine them?</p>\n\n<p>Here are the following files which it says to combine, but I have no idea how to combine them.</p>\n\n<pre><code>There are 2 JavaScript files served from mc.yandex.ru. They should be combined into as few files as possible.\nhttps://mc.yandex.ru/metrika/tag.js\nhttps://mc.yandex.ru/watch/47716165/1?wmode=7&amp;p ... 0%26%20Reviews%20in%20UAE%20%7C%20YallaMotor.com\n\nThere are 2 JavaScript files served from static.adsafeprotected.com. They should be combined into as few files as possible.\nhttps://static.adsafeprotected.com/sca.17.4.95.js\nhttps://static.adsafeprotected.com/skeleton.js\n\nThere are 2 JavaScript files served from www.gstatic.com. They should be combined into as few files as possible.\nhttps://www.gstatic.com/firebasejs/4.10.1/firebase-app.js\nhttps://www.gstatic.com/firebasejs/4.10.1/firebase-messaging.js\n</code></pre>\n\n<p>How can I combine them into one file?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1533129926, "post_id": 51634428, "comment_id": 90233230, "body": "This is impossible per se, because <i>\u201cA separator can be a different character\u201d</i> line must be treated as matched according to your rules <i>and</i> must be treated as not matched according to your explanation."}, {"owner": {"reputation": 187, "user_id": 5468196, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/95f27a4f05a6dcaf98394e1d08b8f7a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Parzyd\u0142o", "link": "https://stackoverflow.com/users/5468196/jan-parzyd%c5%82o"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533130312, "post_id": 51634428, "comment_id": 90233538, "body": "I&#39;m sorry, but I do not understand your comment. The expression should match blocks enclosed by two identical separators (in terms of the character used, length and number of lines used by the separator itself). There are different types of separators that enclose the blocks, as illustrated above."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1533131209, "post_id": 51634428, "comment_id": 90234167, "body": "There is no magical intelligence that might tell the regular expression engine that <i>\u201cA separator can be a different character...\u201d</i> line <b>that is enclosed by two identical separators, consisting of 39 asterisks each</b>, should not be filtered out."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1533141351, "post_id": 51634428, "comment_id": 90240958, "body": "I have two suggestions. First, assign a variable to your string, say with a <a href=\"https://zaiste.net/heredoc_in_ruby/\" rel=\"nofollow noreferrer\">heredoc</a>: <code>str&lt;==END</code> at the beginning and <code>END</code> after the last line. That way the variable (<code>str</code>) can be referenced in answers. Secondly, while the use of a regular expression seems likely, simply state what you want as a result and show the desired result for your example. In general, whenever you give an example, ensure that everything is a valid Ruby object, assign a variable to all input objects, show the desired result and make the example as succinct as possible."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1533142101, "post_id": 51634428, "comment_id": 90241373, "body": "Further to my last comment, you state, &quot;I need a regular expression that will match anything between such separators so that I can remove it.&quot;, I suggest you make the objective, &quot;I wish to remove several blocks of text, according to rules that are given in the following example.&quot;. Then show your desired result, which is your original text with parts removed. This would help answer questions that I--and no doubt others--have about what you wish to do. One specific question: must lines that bracket a block be of a certain length?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1533156946, "post_id": 51634428, "comment_id": 90248697, "body": "Even if you can do this with regex, I wouldn&#39;t. It looks like you need a more robust parser. Separators inside replies and multiline separators look especially tricky to handle."}], "answers": [{"comments": [{"owner": {"reputation": 3388, "user_id": 9534819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbae473f8d26eb6a10d85ab897e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Matt.G", "link": "https://stackoverflow.com/users/9534819/matt-g"}, "edited": false, "score": 0, "creation_date": 1533132579, "post_id": 51635457, "comment_id": 90235217, "body": "@Jan Parzydlo I&#39;ll add the detailed explanation, if this works for you."}], "tags": [], "owner": {"reputation": 3388, "user_id": 9534819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbae473f8d26eb6a10d85ab897e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Matt.G", "link": "https://stackoverflow.com/users/9534819/matt-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1533132549, "creation_date": 1533132549, "answer_id": 51635457, "question_id": 51634428, "link": "https://stackoverflow.com/questions/51634428/regular-expression-for-matching-blocks-delimited-by-separators-of-variable-type/51635457#51635457", "title": "Regular expression for matching blocks delimited by separators of variable type", "body": "<p>Try Regex: <code>((.)(?:\\2)+)(?:\\n(\\2+))?\\n.+?\\n\\1(?:(?:\\n\\3))?</code></p>\n\n<p><a href=\"https://regex101.com/r/HRrjYu/2\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>Please note that I have added 2 restrictions around the multiline separators:</p>\n\n<ol>\n<li><p>only 2 lines in the separator</p></li>\n<li><p>separator on the second line is same as the first line</p></li>\n</ol>\n\n<p>Let me know if these restrictions are not needed.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1533133390, "creation_date": 1533133390, "answer_id": 51635771, "question_id": 51634428, "link": "https://stackoverflow.com/questions/51634428/regular-expression-for-matching-blocks-delimited-by-separators-of-variable-type/51635771#51635771", "title": "Regular expression for matching blocks delimited by separators of variable type", "body": "<p>Looks like the <a href=\"https://ruby-doc.org/core/Regexp.html#class-Regexp-label-Capturing\" rel=\"nofollow noreferrer\">backward capture</a> should do:</p>\n\n<pre><code>input.gsub(/(?&lt;sep&gt;\\W{40,}).*?(\\k&lt;sep&gt;)/m, \"\\n\")\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 5468196, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/95f27a4f05a6dcaf98394e1d08b8f7a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Parzyd\u0142o", "link": "https://stackoverflow.com/users/5468196/jan-parzyd%c5%82o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1533133390, "creation_date": 1533129698, "question_id": 51634428, "link": "https://stackoverflow.com/questions/51634428/regular-expression-for-matching-blocks-delimited-by-separators-of-variable-type", "title": "Regular expression for matching blocks delimited by separators of variable type", "body": "<p>I need to cleanse some email messages from automatically appended chunks of text. Each one of those chunks is enclosed by a pair of separators (single or multiple lines). I need a regular expression that will match anything between such separators so that I can remove it.</p>\n\n<p>Here is some text that illustrates the problem and shows all the weird cases that need to be accounted for:</p>\n\n<pre><code>This is some text that should not be matched. As you can see, it is not enclosed\nby separator lines.\n\n===========================================================\nThis part should be matched as it is between two separator lines. Note that the\nopening and closing separators are composed of the exact same number of the same\ncharacter.\n===========================================================\nThis block should not be matched as it is not enclosed by its own separators,\nbut rather the closing separator of the previous block and the opening \nseparator of the next block.\n===========================================================\nIt is tricky to distinguish between an enclosed and non-enclosed blocks, because\nsometimes a matching pair of separators appears to be legal, while it is really\nthe closing separator of the previous block and the opening separator of the\nnext one (e.g. the block obove this one).\n===========================================================\n==================================\n=====\nThis block is enclosed by multiline separators.\n==================================\n=====\nSome more text that should not be matched by the regex.\n***************************************\n\n\n\nA separator can be a different character, for example the asterisk.\n\n\n***************************************\n***************************************\n*******************\nAnother example of a multiline separated block.\n***************************************\n*******************\n\n&gt;Even more text not to be matchedby the regex. This time, preceeded by a\n&gt;variable number of '&gt;'.\n&gt;&gt;__________________________________________\n&gt;&gt;And another type of separator. The block is now also a part of a reply section\n&gt;&gt;of the email.\n&gt;&gt;__________________________________________\n</code></pre>\n\n<p>Note that there is no recursion to be handled here - a block is never inside of another block.\nI've been trying work this out for a while now, but I am not experienced enough when it comes to regex. I do not know how to make the expression \"remember\" what the opening separator was. </p>\n\n<p>Right now my solution will produce incorrect matches for a block like this:</p>\n\n<pre><code>=========================\ntext text\ntext\n*************************\n</code></pre>\n\n<p>I would really appreciate some help on this. I am working in Ruby, but will work through different types of syntax if required.</p>\n"}, {"tags": ["html", "ruby", "csv", "html-table"], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1533129637, "post_id": 51634229, "comment_id": 90233003, "body": "<code>table-for</code> has a <code>rails</code> dependency so probably not the best solution in this case, Your original suggestion of <code>html-table</code> was definitely a better option"}], "tags": [], "owner": {"reputation": 8109, "user_id": 153574, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/240fded6e397da0150db90ce28b91ac0?s=128&d=identicon&r=PG", "display_name": "bjelli", "link": "https://stackoverflow.com/users/153574/bjelli"}, "is_accepted": true, "score": 1, "last_activity_date": 1554521763, "last_edit_date": 1554521763, "creation_date": 1533129178, "answer_id": 51634229, "question_id": 51634050, "link": "https://stackoverflow.com/questions/51634050/convert-csv-to-html-table-in-ruby/51634229#51634229", "title": "Convert CSV to HTML table in Ruby", "body": "<p>You can use the <a href=\"https://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">built in CSV class</a> to load the CSV file,\nfor example line by line:</p>\n\n<pre><code>CSV.foreach(\"path/to/file.csv\") do |row|\n  # use row here...\nend\n</code></pre>\n\n<p>And then you can just output it as html yourself:</p>\n\n<pre><code>puts \"&lt;table&gt;\"\nCSV.foreach(\"path/to/file.csv\") do |row|\n  puts \"&lt;tr&gt;\"\n  # print out all data in row here...\n  puts \"&lt;/tr&gt;\"\nend\nputs \"&lt;/table&gt;\"\n</code></pre>\n\n<p>Or you could use the <a href=\"https://github.com/hunterae/table-for\" rel=\"nofollow noreferrer\">table-for gem</a> or <a href=\"https://github.com/djberg96/html-table\" rel=\"nofollow noreferrer\">html-table</a> to create the table</p>\n"}], "owner": {"reputation": 53, "user_id": 7643984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daf96deaa4d5e87c86d7b5042b6005aa?s=128&d=identicon&r=PG&f=1", "display_name": "Kayla Nelson", "link": "https://stackoverflow.com/users/7643984/kayla-nelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 0, "accepted_answer_id": 51634229, "answer_count": 1, "score": 0, "last_activity_date": 1554521763, "creation_date": 1533128660, "last_edit_date": 1533128877, "question_id": 51634050, "link": "https://stackoverflow.com/questions/51634050/convert-csv-to-html-table-in-ruby", "title": "Convert CSV to HTML table in Ruby", "body": "<p>Does anyone know how to convert a CSV file to an HTML table in Ruby (NOT Ruby on rails)? I cannot find any Ruby gems that can convert CSV to an HTML table in a friendly format. Any help would be appreciated.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1533127585, "post_id": 51633445, "comment_id": 90231493, "body": "have you tried using the <code>return_headers: false</code> option?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1533127808, "post_id": 51633445, "comment_id": 90231652, "body": "Why are you passing the options as separate hashes (aka <code>{:col_sep =&gt; separator}, {:headers =&gt; headers}</code>)?"}, {"owner": {"reputation": 169, "user_id": 9681020, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Spasitel", "link": "https://stackoverflow.com/users/9681020/spasitel"}, "edited": false, "score": 0, "creation_date": 1533127947, "post_id": 51633445, "comment_id": 90231759, "body": "Both works, thanks"}, {"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1533128281, "post_id": 51633445, "comment_id": 90231959, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19327554/return-csv-headers-in-ruby\">Return CSV Headers in Ruby</a>"}], "answers": [{"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 0, "last_activity_date": 1533130978, "last_edit_date": 1533130978, "creation_date": 1533130548, "answer_id": 51634746, "question_id": 51633445, "link": "https://stackoverflow.com/questions/51633445/loading-data-from-a-csv-with-header-in-ruby/51634746#51634746", "title": "Loading data from a CSV with header in Ruby", "body": "<p>The signature for the <code>CSV.open</code> method is:</p>\n\n<pre><code>CSV.open(filename, mode = \"rb\", options = Hash.new)\n</code></pre>\n\n<p>Therefore calling it like this:</p>\n\n<pre><code>CSV.open(file, \"r\", { ... }, { ... }) \n</code></pre>\n\n<p>...is incorrect, and Ruby should throw an exception when you do that.</p>\n\n<p>The correct way to call <code>CSV.open</code> with a Hash is either:</p>\n\n<pre><code>CSV.open(file, \"r\", { :a =&gt; b, :c =&gt; d, :e =&gt; f })\n</code></pre>\n\n<p>Or: </p>\n\n<pre><code>CSV.open(file, \"r\", :a =&gt; b, :c =&gt; d, :e =&gt; f)\n</code></pre>\n\n<p>So, to fix your problem the solution should be to change this:</p>\n\n<pre><code>CSV.open(file, \"r\", { :col_sep =&gt; separator }, { :headers =&gt; headers })\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>CSV.open(file, \"r\", { :col_sep =&gt; separator, :headers =&gt; headers })\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 9681020, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Spasitel", "link": "https://stackoverflow.com/users/9681020/spasitel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 51634746, "answer_count": 1, "score": 0, "last_activity_date": 1533130978, "creation_date": 1533126864, "question_id": 51633445, "link": "https://stackoverflow.com/questions/51633445/loading-data-from-a-csv-with-header-in-ruby", "title": "Loading data from a CSV with header in Ruby", "body": "<p>I want to load a CSV file and create objects based on the data. The file has the following structure:</p>\n\n<pre><code>product code;product name;product price;units\nRTF0145;Mixer;659;15\nGTF4895;PC;9999;25\n</code></pre>\n\n<p>While loading the data I want to skip the first row with headers but I have a trouble using the {:headers => true} attribute, the method does nothing, no error is raised. </p>\n\n<pre><code>def Store.load_data(file, separator, headers = true)\n  begin\n    @items = []\n    CSV.open(file, \"r\", {:col_sep =&gt; separator}, {:headers =&gt; headers}) do |csv|\n      csv.each do |product|\n        @items &lt;&lt; Store.new(product[\"product code\"], product[\"product name\"], product[\"price\"], product[\"units\"])\n      end\n    end\n  rescue\n  end\nend\n</code></pre>\n\n<p>I call the method like this:</p>\n\n<pre><code>Store.load_data(\"products.csv\", \";\")\n</code></pre>\n\n<p>If I use it without the headers argument everything works as expected:</p>\n\n<pre><code>  def Store.load_data(file, separator, headers = true)\n    begin\n      @items = []\n      CSV.foreach(file, { :col_sep =&gt; separator }) do |row|\n        @items &lt;&lt; Store.new(row[0], row[1], row[2], row[3]) unless row[0] == \"product code\"\n      end\n    rescue\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 1868864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8960aacbb35ccdcdf2a434cd76d30b?s=128&d=identicon&r=PG", "display_name": "user1868864", "link": "https://stackoverflow.com/users/1868864/user1868864"}, "edited": false, "score": 0, "creation_date": 1533135265, "post_id": 51633081, "comment_id": 90237174, "body": "did a bit of changes but this is definitely how it helped me! Thanks!"}], "tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": true, "score": 0, "last_activity_date": 1533126550, "last_edit_date": 1533126550, "creation_date": 1533125730, "answer_id": 51633081, "question_id": 51631684, "link": "https://stackoverflow.com/questions/51631684/ruby-rails-excel-format-array-manipulation/51633081#51633081", "title": "Ruby Rails Excel Format Array Manipulation", "body": "<p>For example, try that:</p>\n\n<pre><code>@records.each do |client|\n\n  client_info  = Report.get_client_info(client)\n  client_address = Report.get_client_address(client)\n\n  client_records = []\n\n  line = [client_info.id, client_info.full_name]\n\n  [client_address.count, client_contact.count].max.times do |i|\n    if @include_address == \"1\" &amp;&amp; client_address[i]\n      line &lt;&lt; client_address[i].full_address &lt;&lt; client_address[i].address_type\n    else\n      line &lt;&lt; '' &lt;&lt; ''\n    end\n\n    if @@include_contact == \"1\" &amp;&amp; client_contact[i]\n      line &lt;&lt; client_contact[i].value &lt;&lt; client_contact[i].label\n    else\n      line &lt;&lt; '' &lt;&lt; ''\n    end\n\n    client_records &lt;&lt; line.clone\n    line = ['', '']\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 1868864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8960aacbb35ccdcdf2a434cd76d30b?s=128&d=identicon&r=PG", "display_name": "user1868864", "link": "https://stackoverflow.com/users/1868864/user1868864"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 51633081, "answer_count": 1, "score": 1, "last_activity_date": 1533126550, "creation_date": 1533121439, "question_id": 51631684, "link": "https://stackoverflow.com/questions/51631684/ruby-rails-excel-format-array-manipulation", "title": "Ruby Rails Excel Format Array Manipulation", "body": "<p>I need some help/idea on how to dynamically position values in a 2D array.</p>\n\n<p>Basically, I have a condition that must be met and that determines which column should the value be written.</p>\n\n<p>This is what I have (a loop that pass conditions before writing the value):</p>\n\n<pre><code>@records.each do |client|\n\n  client_info  = Report.get_client_info(client)\n  client_address = Report.get_client_address(client)\n\n  client_records = []\n\n  client_records &lt;&lt; [client_info.id, client_info.full_name]\n\n  if @include_address == \"1\"\n    client_address.each_with_index do |address, i|\n      if client_records[i].present?                                    \n        client_records[i][2] = address.full_address               \n        client_records[i][3] = address.address_type   \n      else\n        client_records &lt;&lt; [\"\",\"\", address.full_address, address.address_type]\n      end             \n    end\n  end\n\n  if @include_contact == \"1\"\n    client_contact.each_with_index do |contact, i|\n      if client_records[i].present?                                    \n        client_records[i][4] = contact.value                         \n        client_records[i][5] = contact.label\n      else\n        client_records &lt;&lt; [\"\",\"\",\"\",\"\", contact.value, contact.label]               \n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Problem is: IF I want to make another condition, and the condition in between the two (conditions) is not true, the position of the column value set by:  <code>client_records[i][2]</code> >> 2,3 etc... is hard coded, instead of the third condition occupying the place of the second condition's columns, it naturally leaves it blank and stays at the same place.</p>\n\n<p>This is how it would look like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/MWSaN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MWSaN.png\" alt=\"enter image description here\"></a></p>\n\n<p>Instead of:</p>\n\n<p><a href=\"https://i.stack.imgur.com/O7jRY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O7jRY.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I work around this?</p>\n"}, {"tags": ["ruby", "readline", "irb"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533120370, "post_id": 51631322, "comment_id": 90226797, "body": "Use <a href=\"http://pryrepl.org/\" rel=\"nofollow noreferrer\"><code>pry</code></a> instead of IRB, since it is much better in general and supports everything you might need, including history, out of the box."}, {"owner": {"reputation": 79, "user_id": 3350881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2653250de34d8b1366be430cb4a59684?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3350881/tom"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533120950, "post_id": 51631322, "comment_id": 90227160, "body": "Great, I&#39;ve got the same problem with pry as well :( The only difference is, that <code>.pry_history</code> contains all commands ever entered. But <code>&lt;up&gt;</code> still has no effect. Looks like an readline issue?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533121420, "post_id": 51631322, "comment_id": 90227442, "body": "Try <code>Ctrl</code>+<code>R</code> and start typing the command that is presented in the history. Does it appear in the prompt line?"}, {"owner": {"reputation": 79, "user_id": 3350881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2653250de34d8b1366be430cb4a59684?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3350881/tom"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533121572, "post_id": 51631322, "comment_id": 90227546, "body": "Nope. Seems to be an issue with ruby+readline."}, {"owner": {"reputation": 79, "user_id": 3350881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2653250de34d8b1366be430cb4a59684?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3350881/tom"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1533121683, "post_id": 51631322, "comment_id": 90227592, "body": "Ok, my fault. I recompiled ruby. In the options menu I had libedit enabled instead of readline. I changed this, rebuilt, and now it works."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533121894, "post_id": 51631322, "comment_id": 90227726, "body": "Cool then. My advice would be to still be using <code>pry</code>, though :)"}, {"owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "edited": false, "score": 0, "creation_date": 1535002627, "post_id": 51631322, "comment_id": 90907565, "body": "See also <a href=\"https://stackoverflow.com/questions/37847822/irb-history-not-working-with-ruby-2-3-0\">IRB history not working with Ruby 2.3.0</a>."}], "answers": [{"comments": [{"owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "edited": false, "score": 0, "creation_date": 1535002388, "post_id": 51631893, "comment_id": 90907478, "body": "This answer is also valid for Ruby that came with macOS. Installing any other Ruby (from Homebrew, or any Ruby version manager) solves this issue."}], "tags": [], "owner": {"reputation": 79, "user_id": 3350881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2653250de34d8b1366be430cb4a59684?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3350881/tom"}, "is_accepted": false, "score": 3, "last_activity_date": 1533122154, "creation_date": 1533122154, "answer_id": 51631893, "question_id": 51631322, "link": "https://stackoverflow.com/questions/51631322/irb-history-saving-but-not-loading/51631893#51631893", "title": "irb history saving but not loading", "body": "<p>On FreeBSD, ruby needs to be compiled with readline support, not libedit.</p>\n"}], "owner": {"reputation": 79, "user_id": 3350881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2653250de34d8b1366be430cb4a59684?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3350881/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1533122154, "creation_date": 1533120221, "last_edit_date": 1533120686, "question_id": 51631322, "link": "https://stackoverflow.com/questions/51631322/irb-history-saving-but-not-loading", "title": "irb history saving but not loading", "body": "<p>I use the following <code>.irbrc</code> with irb under ruby 2.3.5 on FreeBSD:</p>\n\n<pre><code>require 'irb/completion'\nrequire 'irb/ext/save-history'\nIRB.conf[:SAVE_HISTORY] = 10000\nIRB.conf[:AUTO_INDENT]  = true\nIRB.conf[:USE_READLINE] = true\nIRB.conf[:HISTORY_FILE] = \"/home/ebot/.irb_history\"\n</code></pre>\n\n<p>When I exit irb, the history gets saved to <code>/home/ebot/.irb_history</code> as expected. However, when I start another irb session, the <code>Readline::History</code> list is empty and pressing the <code>&lt;up&gt;</code> key has no effect.</p>\n\n<p>I put the following code into my <code>.irbrc</code>:</p>\n\n<pre><code>  if File.exist?(IRB.conf[:HISTORY_FILE]) then\n    prev = ''\n    File.open(IRB.conf[:HISTORY_FILE]).each do |line|\n      line.chomp!\n      if line.length &gt; 0 then\n        if line != prev then\n          puts \"pushing hist &lt;#{line}&gt;\"\n          Readline::HISTORY.push(line)\n          prev = line\n        end\n      end\n    end\n  end\n</code></pre>\n\n<p>When I execute irb with this, I see several lines of the above output, but still, history is empty:</p>\n\n<pre><code>% irb\nirb(main):001:0&gt; 1+1\n=&gt; 2\nirb(main):002:0&gt; 3+3\n=&gt; 6\nirb(main):003:0&gt; ^D\n\n% cat .irb_history \n1+1\n3+3\n\n% irb\npushing hist &lt;1+1&gt;\npushing hist &lt;3+3&gt;\nirb(main):001:0&gt; Readline::HISTORY.to_a\n=&gt; [\"Readline::HISTORY.to_a\"]\n</code></pre>\n\n<p>So, irb seems to reset/empty this list after executing <code>.irbrc</code>.</p>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["javascript", "jquery", "ruby", "ruby-on-rails-5", "activeadmin"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1533115035, "post_id": 51629497, "comment_id": 90223314, "body": "you can override form with your custom form (partial), where you can design as per your requirement and Jquery to show / hide some contents for more details read <a href=\"https://activeadmin.info/5-forms.html#partials\" rel=\"nofollow noreferrer\">activeadmin.info/5-forms.html#partials</a>"}, {"owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1533115344, "post_id": 51629497, "comment_id": 90223511, "body": "why can&#39;t I do it here? and I still need to write the JQuery in the javascript files no? The only thing I don&#39;t know is how to write the JQuery. I&#39;m using Angular so I&#39;m not so good with JQuery and I don&#39;t know how JQuery and actvie admin works"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1533116073, "post_id": 51629497, "comment_id": 90224002, "body": "your code should work for &quot;edit&quot; form, but in &quot;new&quot; form you won&#39;t get <code>s.object.type</code>, apart from that if you want to use Jquery you can simply use like <code>s.input :type, as: :select, collection: Segment.all, :input_html =&gt; {:onchange =&gt; &#39;your Jquery code &#47; function&#39;}</code>"}, {"owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1533116446, "post_id": 51629497, "comment_id": 90224228, "body": "How do I get it to work also on new?"}], "owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 953, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533123056, "creation_date": 1533114785, "last_edit_date": 1533121877, "question_id": 51629497, "link": "https://stackoverflow.com/questions/51629497/rails-5-active-admin-use-jquery-to-show-hide-field-in-form-after-dropdown-select", "title": "Rails 5 Active Admin use JQuery to show/hide field in form after dropdown selected", "body": "<p><strong>EDIT: I used Leo answer and edited the code a little, update code below</strong></p>\n\n<p>I have course model which has many segments. Segment is Video or Quiz, and Quiz has many questions.\nI have form which contain dropdown which named type who contain Video or Quiz. I want that when I select Video, immediately another field will show, and when I select Quiz others fields will show. I wrote what I want to get and how the form acts, but I just don't know how active admin works with JQuery or what JQuery I need to write in order for this to work (and where to write it).</p>\n\n<p><strong>This is my form (Updated):</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>form do |f|\r\n  tabs do\r\n    tab 'Basic Info' do\r\n      f.inputs \"Course details\" do\r\n        f.input :title\r\n        f.input :author\r\n      end\r\n    end\r\n\r\n    tab 'Content' do\r\n      f.inputs \"Segments\" do\r\n        f.has_many :segments, heading: false, allow_destroy: true do |s|\r\n          s.input :unit_id\r\n          s.input :unit_title\r\n          s.input :name\r\n          s.input :type, as: :select, collection: Segment.type?, class: 'select-type'\r\n\r\n          # I want that if Video selected than it'll open string field\r\n          s.inputs 'video', class: 'video-tab', style: \"display: #{s.object.type == 'Video' ? 'block' : 'none'}\" do\r\n              s.input :data, :as =&gt; :string\r\n          end\r\n\r\n          # I want that if Quiz selected than it'll open options for questions and answers\r\n          s.inputs 'quiz', class: 'quiz-tab', style: \"display: #{s.object.type == 'Quiz' ? 'block' : 'none'}\" do\r\n            s.has_many :questions, heading:\"Question\", allow_destroy: true do |q|\r\n              q.input :question\r\n              q.input :answer1\r\n              q.input :answer2\r\n              q.input :answer3\r\n              q.input :answer4\r\n              q.input :correct\r\n            end\r\n          end\r\n        end\r\n      end\r\n    end\r\n  end\r\n    f.actions\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>active_admin.js (thanks to Leo for the help)</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>//= require active_admin/base\r\n$(document).ready(function(){\r\n  $('.select-type').change(function(){\r\n    if ($(this).val() == 'Video') {\r\n      $('.video-tab').css('display', 'block');\r\n      $('.quize-tab').css('display', 'none');\r\n    }\r\n    else {\r\n      $('.video-tab').css('display', 'none');\r\n      $('.quize-tab').css('display', 'block');\r\n    }\r\n  })\r\n})</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Thanks beforehand </p>\n\n<p>EDIT: I'll add the models too:</p>\n\n<p><strong>course model</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Course &lt; ApplicationRecord\r\n  validates :title ,presence: true\r\n  validates :author ,presence: true\r\n\r\n  has_many :subscriptions\r\n  has_many :users, :through =&gt; :subscriptions\r\n\r\n  has_many :segments, inverse_of: :course, :dependent =&gt; :destroy, :autosave =&gt; true\r\n  accepts_nested_attributes_for :segments, :allow_destroy =&gt; true\r\n\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>segment model</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Segment &lt; ApplicationRecord\r\n  validates :course_id ,presence: true\r\n  validates :name ,presence: true\r\n  validates :type ,presence: true\r\n  validates :data ,presence: true\r\n\r\n  belongs_to :course, inverse_of: :segments\r\n  has_many :completed_segments\r\n  validates_presence_of :course\r\n\r\n  def self.type\r\n    descendants.map{ |t| t.to_s }.sort\r\n  end\r\n\r\n  def self.type?\r\n    return self.type\r\n  end\r\n\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>video model</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Video &lt; Segment\r\n  validates :name ,presence: true\r\n\r\n  belongs_to :course\r\n\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>quiz model</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Quiz &lt; Segment\r\n  validates :name ,presence: true\r\n\r\n  has_many :questions\r\n  belongs_to :course\r\n  validates_presence_of :quiz\r\n  accepts_nested_attributes_for :questions, :allow_destroy =&gt; true\r\n\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>question model</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Question &lt; ApplicationRecord\r\n  validates :question ,presence: true\r\n  validates :answer1 ,presence: true\r\n  validates :answer2 ,presence: true\r\n  validates :answer3 ,presence: true\r\n  validates :answer4 ,presence: true\r\n  validates :correct ,presence: true\r\n\r\n  belongs_to :quiz\r\n\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby", "inheritance"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1533115167, "post_id": 51629570, "comment_id": 90223399, "body": "Prefer <code>__callee__</code> over <code>__method__</code> if you want it to work with aliases."}, {"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533115200, "post_id": 51629570, "comment_id": 90223427, "body": "@mudasobwa, this really depends on which behavior you want. Sergio, knowing that I need this only in my initialize method would help getting something simpler?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533115257, "post_id": 51629570, "comment_id": 90223461, "body": "I believe if in<code>Bar</code> you have <code>alias_method :bark, :initialize</code> you want <code>bark</code> to be reported as belonging to <code>Bar</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 1, "creation_date": 1533115380, "post_id": 51629570, "comment_id": 90223539, "body": "@UlysseBN &quot;something simpler&quot; - this is not too complex/difficult as it is, no? :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 0, "creation_date": 1533115452, "post_id": 51629570, "comment_id": 90223588, "body": "@UlysseBN <i>&quot;I need this only in my initialize method&quot;</i> \u2013 may I ask why? What are you trying to do?"}, {"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 0, "creation_date": 1533115519, "post_id": 51629570, "comment_id": 90223638, "body": "That would be another question I think: I want to know if initialize has been called directly, or using <code>super</code>. That is why I&#39;m using class name to compare with <code>self.class</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 0, "creation_date": 1533115627, "post_id": 51629570, "comment_id": 90223709, "body": "@UlysseBN: &lt;pedant mode on&gt;<code>initialize</code> is never called directly by you. <code>new</code> calls it. It&#39;s a private method.&lt;/pedant mode off&gt;"}, {"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 1, "creation_date": 1533115700, "post_id": 51629570, "comment_id": 90223762, "body": "Well, the question is then <i>Has it been called by <code>new</code> or by <code>super</code>?</i>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 2, "creation_date": 1533115701, "post_id": 51629570, "comment_id": 90223764, "body": "@UlysseBN <i>&quot;I want to know if initialize has been called directly, or using super&quot;</i> \u2013 may I ask why? (going to ask this 5 times)"}, {"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533115777, "post_id": 51629570, "comment_id": 90223817, "body": "@Stefan For abstraction purpose, I don&#39;t wan&#39;t to allow <code>intialize</code> to be called (by <code>new</code>). But It still has some logic in it for when it is called with <code>super</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 1, "creation_date": 1533115912, "post_id": 51629570, "comment_id": 90223904, "body": "@UlysseBN: if you want to prevent creation of instances of some class, why not simply make its <code>new</code> private? (and open it back in the descendants)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 0, "creation_date": 1533115975, "post_id": 51629570, "comment_id": 90223938, "body": "@UlysseBN like a <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/singleton/rdoc/Singleton.html\" rel=\"nofollow noreferrer\"><code>Singleton</code></a>?"}, {"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 0, "creation_date": 1533116270, "post_id": 51629570, "comment_id": 90224122, "body": "@SergioTulentsev by using <code>undef_method :new</code> for instance?"}, {"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533116323, "post_id": 51629570, "comment_id": 90224157, "body": "@Stefan didn&#39;t get your point there. I don&#39;t think I need (nor want) usage of Singleton here"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 0, "creation_date": 1533116635, "post_id": 51629570, "comment_id": 90224371, "body": "@UlysseBN <code>Singleton</code> makes <code>new</code> private, thus preventing it from being called. I thought that maybe this is what you want. You didn&#39;t really explain what you are trying to achieve."}, {"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533116719, "post_id": 51629570, "comment_id": 90224447, "body": "@Stefan, you&#39;re totally right. I think I have sufficient information now. Maybe I&#39;ll open another question self-answered to clarify this. I&#39;m not sure this would be helpful though"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1533117310, "post_id": 51629570, "comment_id": 90224864, "body": "@SergioTulentsev &lt;pedant mode on&gt; want a bet on me making direct <code>initialize</code> call ruining your \u201cnever called\u201d proposition?&lt;/pedant mode off&gt;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1533117697, "post_id": 51629570, "comment_id": 90225143, "body": "@mudasobwa: your pedantry is stronger, I concede :)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 4, "last_activity_date": 1533115489, "last_edit_date": 1533115489, "creation_date": 1533115017, "answer_id": 51629570, "question_id": 51629461, "link": "https://stackoverflow.com/questions/51629461/how-to-get-class-from-which-a-method-has-been-defined-in-ruby/51629570#51629570", "title": "how to get class from which a method has been defined in ruby?", "body": "<p>This works. (<em>There's probably a better way, though.</em>)</p>\n\n<pre><code>class Foo\n  def initialize\n    puts method(__callee__).owner\n  end\nend\n\nclass Bar &lt; Foo\n  def bark\n    puts method(__callee__).owner\n  end\nend\n\nclass Fizz &lt; Bar\nend\n\nFizz.new.bark\n# &gt;&gt; Foo\n# &gt;&gt; Bar\n</code></pre>\n"}], "owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 51629570, "answer_count": 1, "score": 0, "last_activity_date": 1533128288, "creation_date": 1533114706, "last_edit_date": 1533128288, "question_id": 51629461, "link": "https://stackoverflow.com/questions/51629461/how-to-get-class-from-which-a-method-has-been-defined-in-ruby", "title": "how to get class from which a method has been defined in ruby?", "body": "<p>Having the snippet below:</p>\n\n<pre><code>class Foo\n  def initialize\n    puts self.class\n  end\nend\n\nclass Bar &lt; Foo\n  def bark\n    puts self.class\n  end\nend\n\nclass Fizz &lt; Bar\nend\n\nFizz.new.bark\n</code></pre>\n\n<p>This snippet will output two times <code>Fizz</code> (<a href=\"https://repl.it/repls/PrimaryStarkEmbed\" rel=\"nofollow noreferrer\">live example</a>). I would like to find something to replace <code>self.class</code> which allows this program to output <code>Foo</code> (from initialize) and then <code>Bar</code> (from bark).</p>\n\n<p>My current solution is to hardcode function name, but I'd like something more dynamic.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "count", "google-cloud-nl"], "comments": [{"owner": {"reputation": 63, "user_id": 9995312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669c7458e0030cca52d7900f84accd5c?s=128&d=identicon&r=PG&f=1", "display_name": "S.cll", "link": "https://stackoverflow.com/users/9995312/s-cll"}, "edited": false, "score": 0, "creation_date": 1533115340, "post_id": 51629159, "comment_id": 90223506, "body": "just trying to find a solution"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533132085, "post_id": 51629159, "comment_id": 90234856, "body": "What have you tried so far? StackOverflow is not a free code writing service (that&#39;s why you&#39;re getting downvoted); you need to show a bit more effort. What libraries are you using? What documentation are you referencing? Do you have a partial solution? An incorrect result? An error message? Anything at all?"}, {"owner": {"reputation": 63, "user_id": 9995312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669c7458e0030cca52d7900f84accd5c?s=128&d=identicon&r=PG&f=1", "display_name": "S.cll", "link": "https://stackoverflow.com/users/9995312/s-cll"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533181868, "post_id": 51629159, "comment_id": 90254384, "body": "Ok.  I just come up with a partial solution . I will put it on the origin post."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533201750, "post_id": 51629159, "comment_id": 90263334, "body": "At a glance... <code>tokens.select { |t| t.part_of_speech.tag.to_s == &#39;NOUN&#39; }.count</code>? Only the first 4 lines of your code are needed; the rest can be deleted. (And I assume you&#39;re using the <code>sentences</code> for something else, further down?)"}, {"owner": {"reputation": 63, "user_id": 9995312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669c7458e0030cca52d7900f84accd5c?s=128&d=identicon&r=PG&f=1", "display_name": "S.cll", "link": "https://stackoverflow.com/users/9995312/s-cll"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533281378, "post_id": 51629159, "comment_id": 90297598, "body": "It works. Thanks a lot. And yes, I need sentences for something else :D"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 9995312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669c7458e0030cca52d7900f84accd5c?s=128&d=identicon&r=PG&f=1", "display_name": "S.cll", "link": "https://stackoverflow.com/users/9995312/s-cll"}, "edited": false, "score": 0, "creation_date": 1533538021, "post_id": 51669244, "comment_id": 90364923, "body": "thanks. and the <a href=\"https://github.com/rubocop-hq/ruby-style-guide#no-for-loops\" rel=\"nofollow noreferrer\">ruby-style-guide</a>  is really helpful."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 0, "last_activity_date": 1533287696, "creation_date": 1533287696, "answer_id": 51669244, "question_id": 51629159, "link": "https://stackoverflow.com/questions/51629159/how-to-count-the-number-of-noun-appeared-in-a-paragraph-with-googles-nl-api-usi/51669244#51669244", "title": "How to count the number of noun appeared in a paragraph with Google&#39;s NL api using ruby?", "body": "<p>Building on your example, you could count the number of <code>NOUN</code>s like so:</p>\n\n<pre><code>text = 'xxxxxxxxxx'\nresponse = language.analyze_syntax content: text, type: :PLAIN_TEXT\n\ntokens = response.tokens\n\ntokens.count { |t| t.part_of_speech.tag.to_s == 'NOUN' }\n</code></pre>\n\n<p>Note that in ruby, it is very common style to use <em>iterators</em> like this, rather than defining temporary variables and using <code>for</code> loops. (In fact, <a href=\"https://github.com/rubocop-hq/ruby-style-guide#no-for-loops\" rel=\"nofollow noreferrer\">you should <em>almost never</em> find a need to use <code>for</code> loops in ruby!</a>)</p>\n\n<p>This clean, concise syntax is one of the biggest appeals of the ruby language. Very often, you can obtain a desired result in one line of code like that rather than all of this temporary array and index counter declarations.</p>\n"}], "owner": {"reputation": 63, "user_id": 9995312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669c7458e0030cca52d7900f84accd5c?s=128&d=identicon&r=PG&f=1", "display_name": "S.cll", "link": "https://stackoverflow.com/users/9995312/s-cll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 51669244, "answer_count": 1, "score": -1, "last_activity_date": 1533287696, "creation_date": 1533113750, "last_edit_date": 1533181873, "question_id": 51629159, "link": "https://stackoverflow.com/questions/51629159/how-to-count-the-number-of-noun-appeared-in-a-paragraph-with-googles-nl-api-usi", "title": "How to count the number of noun appeared in a paragraph with Google&#39;s NL api using ruby?", "body": "<p>Trying to count the number of noun appeared in a paragraph with Google's NL api using ruby.</p>\n\n<p>Been looking up the document, couldn't find how to do this.</p>\n\n<p>Work out a solution last night</p>\n\n<pre><code>text = 'xxxxxxxxxx'\nresponse = language.analyze_syntax content: text, type: :PLAIN_TEXT\n\nsentences = response.sentences\ntokens    = response.tokens\nx= tokens.count\n\na = Array.new(x-1)\n\nfor i in 1..x\n    a[i-1] = tokens[i-1].part_of_speech.tag.to_s\nend\nfor i in 1..x\n    if a[i-1] == 'NOUN' \n\n    num= num+1\n    end\nend\n</code></pre>\n\n<p>still wondering if there exist something like (tokens.noun.count ?) in the nl api <a href=\"https://cloud.google.com/natural-language/docs/analyzing-syntax#language-syntax-string-ruby\" rel=\"nofollow noreferrer\">https://cloud.google.com/natural-language/docs/analyzing-syntax#language-syntax-string-ruby</a>. </p>\n"}, {"tags": ["ruby", "amazon-ec2", "rubygems", "nokogiri"], "comments": [{"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 1, "creation_date": 1533113935, "post_id": 51628584, "comment_id": 90222637, "body": "Don&#39;t try to use the system Ruby for development. I recommend installing rvm or rbenv for managing your development rubies."}, {"owner": {"reputation": 1241, "user_id": 2258261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03212d826e0483c5123fa787cf6213ab?s=128&d=identicon&r=PG", "display_name": "zaTricky", "link": "https://stackoverflow.com/users/2258261/zatricky"}, "edited": false, "score": 0, "creation_date": 1533135049, "post_id": 51628584, "comment_id": 90237017, "body": "Using rvm/rben makes sense for dev environment to manage multiple versions. But on a server, you shouldn&#39;t need multiple rb versions. Useful to consider - but perhaps misplaced advice. ;)"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 2351233, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/dada2695a9448d6918d6ae060011b8cc?s=128&d=identicon&r=PG", "display_name": "shivam_v", "link": "https://stackoverflow.com/users/2351233/shivam-v"}, "edited": false, "score": 0, "creation_date": 1533112765, "post_id": 51628700, "comment_id": 90221970, "body": "sadly, <code>yum -y install gcc ruby-devel rubygems</code> didn&#39;t help"}], "tags": [], "owner": {"reputation": 116, "user_id": 1129980, "user_type": "registered", "profile_image": "https://graph.facebook.com/602452008/picture?type=large", "display_name": "jc1arke", "link": "https://stackoverflow.com/users/1129980/jc1arke"}, "is_accepted": true, "score": 3, "last_activity_date": 1533125063, "last_edit_date": 1533125063, "creation_date": 1533112168, "answer_id": 51628700, "question_id": 51628584, "link": "https://stackoverflow.com/questions/51628584/error-on-installing-gem-nokogiri-1-8-4/51628700#51628700", "title": "Error on installing gem Nokogiri-1.8.4", "body": "<p>From the error output, it would seem it can't find the development dependencies for Ruby, which Nokogiri is trying to use in order to build the gem natively.</p>\n\n<p>You can run <code>yum -y install gcc ruby-devel rubygems</code> to make certain the dependencies are installed.</p>\n\n<p>Basing my answer somewhat from <a href=\"https://stackoverflow.com/a/4502672/1129980\">https://stackoverflow.com/a/4502672/1129980</a></p>\n\n<h3>Update</h3>\n\n<p>Tested this now on a new EC2 instance:</p>\n\n<pre><code>yum install -y ruby23-devel gcc libxml2 libxml2-devel libxslt libxslt-devel patch\ngem install nokogiri --no-ri --no-rdoc\n</code></pre>\n\n<p>That works :)</p>\n"}, {"tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1533121984, "creation_date": 1533121984, "answer_id": 51631853, "question_id": 51628584, "link": "https://stackoverflow.com/questions/51628584/error-on-installing-gem-nokogiri-1-8-4/51631853#51631853", "title": "Error on installing gem Nokogiri-1.8.4", "body": "<p>Try running the below mentioned commands </p>\n\n<pre><code>sudo yum -y install ruby-dev ( or ruby-devel)\nsudo yum -y install libgmp-dev libgmpxx4ldbl ruby-dev ruby2.3-dev\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 2351233, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/dada2695a9448d6918d6ae060011b8cc?s=128&d=identicon&r=PG", "display_name": "shivam_v", "link": "https://stackoverflow.com/users/2351233/shivam-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1338, "favorite_count": 0, "accepted_answer_id": 51628700, "answer_count": 2, "score": 2, "last_activity_date": 1533125063, "creation_date": 1533111808, "question_id": 51628584, "link": "https://stackoverflow.com/questions/51628584/error-on-installing-gem-nokogiri-1-8-4", "title": "Error on installing gem Nokogiri-1.8.4", "body": "<p>OS: AMI 2018.03.0 (HVM)<br>\nRuby version: <code>2.3.7p456 (2018-03-28 revision 63024) [x86_64-linux-gnu]</code> - installed using <code>yum install ruby23</code></p>\n\n<p>gem install nokogiri throws:</p>\n\n<pre><code>Building native extensions.  This could take a while...\nERROR:  Error installing nokogiri:\nERROR: Failed to build gem native extension.\n\ncurrent directory: /home/ec2-user/.gem/ruby/2.3/gems/nokogiri- \n1.8.4/ext/nokogiri\n/usr/bin/ruby2.3 -r ./siteconf20180801-6218-101te4s.rb extconf.rb\nmkmf.rb can't find header files for ruby at \n/usr/share/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /home/ec2- \nuser/.gem/ruby/2.3/gems/nokogiri-1.8.4 for inspection.\nResults logged to /home/ec2-user/.gem/ruby/2.3/extensions/x86_64- \nlinux/2.3/nokogiri-1.8.4/gem_make.out\n</code></pre>\n\n<p>what am i missing here?</p>\n"}, {"tags": ["javascript", "ruby", "cucumber", "capybara", "appium"], "answers": [{"comments": [{"owner": {"reputation": 102, "user_id": 9392472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUxxI.jpg?s=128&g=1", "display_name": "Stefan R.", "link": "https://stackoverflow.com/users/9392472/stefan-r"}, "edited": false, "score": 0, "creation_date": 1533113549, "post_id": 51628601, "comment_id": 90222431, "body": "Thank you for the answer. I will test this to see if it works as soon as possible. However, I wonder what the interface for the function passed as arguments[0] looks like. Based on the documentation i guess it is (object) =&gt; object since Ruby has to obtain the result from the function."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 102, "user_id": 9392472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUxxI.jpg?s=128&g=1", "display_name": "Stefan R.", "link": "https://stackoverflow.com/users/9392472/stefan-r"}, "edited": false, "score": 0, "creation_date": 1533115710, "post_id": 51628601, "comment_id": 90223769, "body": "@StefanR. Actually, according to the WebDriver spec it should be (object) =&gt; undefined"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1533112313, "last_edit_date": 1533112313, "creation_date": 1533111861, "answer_id": 51628601, "question_id": 51628163, "link": "https://stackoverflow.com/questions/51628163/how-to-call-async-javascript-function-from-ruby-with-capybara/51628601#51628601", "title": "How to call async javascript function from ruby with capybara?", "body": "<p>From the docs for <code>Session#evaluate_async_script</code> - <a href=\"https://www.rubydoc.info/gems/capybara/Capybara/Session#evaluate_async_script-instance_method\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/gems/capybara/Capybara/Session#evaluate_async_script-instance_method</a> - the important part is \"from a callback function which will be passed as the last argument to the script\". Your script isn't calling the callback function which would be available as <code>arguments[0]</code> so Capybara has no way of knowing it is done.</p>\n\n<p>For it to work you would need something along the lines of (untested)</p>\n\n<pre><code>result = Capybara.current_session.evaluate_async_script(\"\n  var cb = arguments[0];\n  window.signin('#{user.email}','#{user.password}', cb);\")\n</code></pre>\n\n<p>You could also pass the email and password in as arguments too if desired</p>\n\n<pre><code>result = Capybara.current_session.evaluate_async_script('\n  var cb = arguments[2];\n  window.signin(arguments[0], arguments[1], cb);', user.email, user.password)\n</code></pre>\n\n<p>Note this moves the callback function to <code>arguments[2]</code>, since you're passing 2 other arguments first.</p>\n\n<p>The bigger question is whether or not you even need to be using <code>evaluate_async_script</code>. It's only needed if you actually need the response from the async function, if not you can just call it with <code>execute_script</code> and wait for the visible page changes as normal.</p>\n"}], "owner": {"reputation": 102, "user_id": 9392472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUxxI.jpg?s=128&g=1", "display_name": "Stefan R.", "link": "https://stackoverflow.com/users/9392472/stefan-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 51628601, "answer_count": 1, "score": 1, "last_activity_date": 1533112313, "creation_date": 1533110234, "question_id": 51628163, "link": "https://stackoverflow.com/questions/51628163/how-to-call-async-javascript-function-from-ruby-with-capybara", "title": "How to call async javascript function from ruby with capybara?", "body": "<p>I have some E2E tests for a cross platform Ionic application. The tests are written in Ruby and they use <a href=\"https://rubygems.org/gems/appium_capybara\" rel=\"nofollow noreferrer\">appium_capybara</a>, <a href=\"https://rubygems.org/gems/capybara\" rel=\"nofollow noreferrer\">capybara</a> and <a href=\"https://rubygems.org/gems/selenium-webdriver\" rel=\"nofollow noreferrer\">selenium-webdriver</a>.</p>\n\n<p>The Ionic application has an async javascript function that can be used from the developer console to sign in to the app. I want to invoke this from the tests and I managed to do this from Ruby with a function called <a href=\"https://www.rubydoc.info/gems/capybara/Capybara%2FSession:evaluate_async_script\" rel=\"nofollow noreferrer\">evaluate_async_script</a>.</p>\n\n<p>However, while I have proof that the async function is actually executed, i get this error from Ruby: </p>\n\n<blockquote>\n  <p>Timed out waiting for asyncrhonous script result after 10033 ms (Selenium::WebDriver::Error::ScriptTimeoutError)</p>\n</blockquote>\n\n<p>Why does this happen? Any suggestions on how to make it work?</p>\n\n<p>The async function looks something like this:</p>\n\n<pre><code>export async function signin(user: string, pass: string,\n                             callback: (result: object) =&gt; object): \nPromise&lt;object&gt; {\n    if (typeof(window.authService) === 'object') {\n        const credentials: ICredentials = {\n            email: user,\n            password: pass,\n            rememberMe: false\n        };\n\n        await window.authService.authenticate(credentials);\n\n        const result = { message: 'YES!!' };\n        callback(result);\n        return result;\n    }\n    return { message: 'EMPTY STRING!!' };\n}\n</code></pre>\n\n<p>The call from Ruby looks like this:</p>\n\n<pre><code>result = Capybara.current_session\n    .evaluate_async_script(\"window.signin('#{user.email}',\n        '#{user.password}', (result) =&gt; { return result; })\n            .then(function(value) { alert(value.message); })\")\n</code></pre>\n\n<p>The alert pops up showing the 'YES!!' message, so I know that the function is executed. But for some reason Ruby never notices that the function has finished.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1533110084, "post_id": 51627930, "comment_id": 90220522, "body": "You are repeatedly overriding <code>&quot;args&quot;</code> key in your hashes. That said, this code does not work as expected and it requires a fix, not an optimization in the first place."}, {"owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533110217, "post_id": 51627930, "comment_id": 90220598, "body": "what if it is not overridden; let me update the question"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533110218, "post_id": 51627930, "comment_id": 90220599, "body": "I second @mudasobwa here. Before you optimize your code, you need to make it work. Does it work as per your expectation?"}], "answers": [{"comments": [{"owner": {"reputation": 1344, "user_id": 1866752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I18d.jpg?s=128&g=1", "display_name": "Saiqul Haq", "link": "https://stackoverflow.com/users/1866752/saiqul-haq"}, "edited": false, "score": 0, "creation_date": 1533112905, "post_id": 51628176, "comment_id": 90222066, "body": "downvoted because your code missed &#39;extensions&#39; key to read <code>*_basic_auth.crx</code> file, as you see that <code>extensions</code> key is an entry that added by him"}, {"owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "edited": false, "score": 0, "creation_date": 1533139760, "post_id": 51628176, "comment_id": 90240012, "body": "@mudasobwa Here, it throws error if the <code>&#39;STAGING&#39; =&gt;</code> is not assigned inside <code>EXT</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533139861, "post_id": 51628176, "comment_id": 90240075, "body": "<code>EXT</code> hash has a default value, so it\u2019s impossible. Also, when you are reporting \u201cthrows an error\u201d it makes sense to mention what error it \u201cis throwing.\u201d"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1533114133, "last_edit_date": 1533114133, "creation_date": 1533110289, "answer_id": 51628176, "question_id": 51627930, "link": "https://stackoverflow.com/questions/51627930/how-to-optimize-repeating-hash-in-ruby/51628176#51628176", "title": "How to optimize repeating hash in ruby?", "body": "<p>Just declare keys upfront:</p>\n\n<pre><code>COMMON_KEYS =\n  %w[disable-infobars disable-gpu\n     disable-extensions ignore-certificate-errors].freeze\nARGS_KEYS = {\n  'STAGING' =&gt; COMMON_KEYS + %w[headless],\n}.tap { |h| h.default = COMMON_KEYS }.freeze\nEXT = {\n  'PROD' =&gt; {}\n}.tap { |h| h.default = {\"extensions\" =&gt; Base64.strict_encode64(...)} }.freeze\n\ncaps =\n  Selenium::WebDriver::Remote::Capabilities.chrome(\n    \"chromeOptions\" =&gt; {\n       \"mobileEmulation\" =&gt; mobile_emulation,\n       \"args\" =&gt; KEYS[ENV['ENV'].upcase]\n    }.merge(EXT)\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1533110445, "post_id": 51628206, "comment_id": 90220723, "body": "This code is not idempotent. You modify the <code>options</code>, making it obviously failing on the subsequent run. Downvoted."}, {"owner": {"reputation": 1344, "user_id": 1866752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I18d.jpg?s=128&g=1", "display_name": "Saiqul Haq", "link": "https://stackoverflow.com/users/1866752/saiqul-haq"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533112759, "post_id": 51628206, "comment_id": 90221968, "body": "I assumed that <code>options</code> variable is not used anymore, it&#39;s only used by <code>Selenium::WebDriver::Remote::Capabilities.chrome</code> method"}], "tags": [], "owner": {"reputation": 1344, "user_id": 1866752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I18d.jpg?s=128&g=1", "display_name": "Saiqul Haq", "link": "https://stackoverflow.com/users/1866752/saiqul-haq"}, "is_accepted": true, "score": 1, "last_activity_date": 1533110395, "creation_date": 1533110395, "answer_id": 51628206, "question_id": 51627930, "link": "https://stackoverflow.com/questions/51627930/how-to-optimize-repeating-hash-in-ruby/51628206#51628206", "title": "How to optimize repeating hash in ruby?", "body": "<pre><code>options = {\n  'chromeOptions' =&gt; {\n    'mobileEmulation' =&gt; mobile_emulation,\n    'args' =&gt; ['disable-infobars',\n               'disable-gpu',\n               'disable-extensions',\n               'ignore-certificate-errors']\n  }\n}\n\nif ENV['ENV'].casecmp('PROD').zero?\n  options['chromeOptions']['args'].push('headless')\nelsif ENV['ENV'].casecmp('STAGING').zero? || ENV['ENV'].casecmp('PR').zero?\n  options['chromeOptions']['extensions'] = [\n    Base64.strict_encode64(File.open(\"../pf-utils/#{ENV['ENV'].downcase}_basic_auth.crx\", 'rb').read)\n  ]\nend\n\ncaps = Selenium::WebDriver::Remote::Capabilities.chrome(options)\n@driver = Selenium::WebDriver.for :chrome, desired_capabilities: caps\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1344, "user_id": 1866752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I18d.jpg?s=128&g=1", "display_name": "Saiqul Haq", "link": "https://stackoverflow.com/users/1866752/saiqul-haq"}, "edited": false, "score": 0, "creation_date": 1533113146, "post_id": 51628809, "comment_id": 90222203, "body": "downvoted because extensions could be nil, when ENV doesn&#39;t match with PROD nor STAGING, PR, so Hash#merge will raise TypeError because when extensions variable equal nil"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 1344, "user_id": 1866752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I18d.jpg?s=128&g=1", "display_name": "Saiqul Haq", "link": "https://stackoverflow.com/users/1866752/saiqul-haq"}, "edited": false, "score": 1, "creation_date": 1533119996, "post_id": 51628809, "comment_id": 90226566, "body": "@SaiqulHaq The OP&#39;s code will raise an error as well when <code>ENV</code> is neither <code>PROD</code>, <code>STAGING</code>, nor <code>PR</code> since <code>caps</code> is not defined in such case, which implies that <code>ENV</code> is in fact neither <code>PROD</code>, <code>STAGING</code>, nor <code>PR</code>. Your comment and down vote are invalid."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1533120140, "post_id": 51628809, "comment_id": 90226668, "body": "@mudasobwa Thanks for editing the answer to make it comply with such case anyway."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1533148869, "post_id": 51628809, "comment_id": 90244881, "body": "A variant; replace <code>}.merge(extensions)</code> with <code>}.merge(ENV[&#39;ENV&#39;].match?( &#47;\\ASTAGING|PR&#47;i) ? (&quot;extensions&quot; =&gt; [Base64....read)])  : {})</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1344, "user_id": 1866752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I18d.jpg?s=128&g=1", "display_name": "Saiqul Haq", "link": "https://stackoverflow.com/users/1866752/saiqul-haq"}, "edited": false, "score": 1, "creation_date": 1533149212, "post_id": 51628809, "comment_id": 90245039, "body": "@SaiqulHaq, if your objection has been addressed please consider removing your downvote. btw, regardless of whether I think your downvote was justified, kudos for owning up to it. I detest silent downvotes, SO&#39;s &quot;hit and runs&quot;."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1533114173, "last_edit_date": 1533114173, "creation_date": 1533112588, "answer_id": 51628809, "question_id": 51627930, "link": "https://stackoverflow.com/questions/51627930/how-to-optimize-repeating-hash-in-ruby/51628809#51628809", "title": "How to optimize repeating hash in ruby?", "body": "<pre><code>extensions =\ncase ENV['ENV'].upcase\nwhen 'STAGING', 'PR'\n  {\"extensions\" =&gt; [Base64.strict_encode64(File.open(\"../pf-utils/#{ENV['ENV'].downcase}_basic_auth.crx\", 'rb').read)]\n  }\nelse {}\nend\n@driver = Selenium::WebDriver.for :chrome, desired_capabilities: Selenium::WebDriver::Remote::Capabilities.chrome(\n    \"chromeOptions\" =&gt; {\n        \"mobileEmulation\" =&gt; mobile_emulation,\n        \"args\" =&gt; [\"headless\"]\n    }.merge(extensions))\n</code></pre>\n"}], "owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 51628206, "answer_count": 3, "score": -1, "last_activity_date": 1533114173, "creation_date": 1533109436, "last_edit_date": 1533110273, "question_id": 51627930, "link": "https://stackoverflow.com/questions/51627930/how-to-optimize-repeating-hash-in-ruby", "title": "How to optimize repeating hash in ruby?", "body": "<pre><code>  if ENV['ENV'].upcase == 'PROD'\n    caps = Selenium::WebDriver::Remote::Capabilities.chrome(\n        \"chromeOptions\" =&gt; {\n            \"mobileEmulation\" =&gt; mobile_emulation,\n            \"args\" =&gt; [\"headless\"]\n        })\n\n  elsif (ENV['ENV'].upcase == 'STAGING') || (ENV['ENV'].upcase == 'PR')\n    caps = Selenium::WebDriver::Remote::Capabilities.chrome(\n        \"chromeOptions\" =&gt; {\n            \"mobileEmulation\" =&gt; mobile_emulation,\n            \"extensions\" =&gt; [\n                Base64.strict_encode64(File.open(\"../pf-utils/#{ENV['ENV'].downcase}_basic_auth.crx\", 'rb').read)\n            ],\n            \"args\" =&gt; [\"headless\"]\n        })\n    @driver = Selenium::WebDriver.for :chrome, desired_capabilities: caps\n</code></pre>\n\n<p>Here, the below entry is newly added,</p>\n\n<pre><code>\"extensions\" =&gt; [\n            Base64.strict_encode64(File.open(\"../pf-utils/#{ENV['ENV'].downcase}_basic_auth.crx\", 'rb').read)\n        ],\n</code></pre>\n\n<p>In such case, how to optimize the above <code>if...else</code> statement to avoid repeating code </p>\n"}, {"tags": ["ruby", "testing", "rspec", "dry", "ruby-1.8"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1533105012, "post_id": 51625988, "comment_id": 90217772, "body": "Why not use a regular method? <code>def create_s(attr1); instance_double(...</code>"}, {"owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1533105248, "post_id": 51625988, "comment_id": 90217880, "body": "Because you can override <code>let</code> in different contexts if you need. If not, then method will work as well"}, {"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "edited": false, "score": 0, "creation_date": 1533107056, "post_id": 51625988, "comment_id": 90218820, "body": "You can override methods too, FYI"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "edited": false, "score": 0, "creation_date": 1533123318, "post_id": 51625988, "comment_id": 90228600, "body": "@matthewd: that&#39;d work if nested contexts were descendants of the outer contexts. I suspect this <i>is</i> the case, but can&#39;t check right now."}], "tags": [], "owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "is_accepted": false, "score": 2, "last_activity_date": 1533101961, "creation_date": 1533101961, "answer_id": 51625988, "question_id": 51625949, "link": "https://stackoverflow.com/questions/51625949/dry-double-in-rspec/51625988#51625988", "title": "DRY double in RSpec", "body": "<p>Use a function</p>\n\n<pre><code>let(:create_s) do\n    -&gt; |attr1| do\n         instance_double(Class1,\n                        :attr1 =&gt; attr1\n                        :attr2 =&gt; val2\n                        :attr3 =&gt; val3\n                        :attr4 =&gt; val4\n                        :attr5 =&gt; val5)\n    end\nend\n\nlet(:s1) { create_s.call(val1) }\nlet(:s2) { create_s.call(val0) }\nlet(:s3) { create_s.call(val6) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 413, "user_id": 3003043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02a71098a01da35634acb4fba010eebb?s=128&d=identicon&r=PG&f=1", "display_name": "adrienbourgeois", "link": "https://stackoverflow.com/users/3003043/adrienbourgeois"}, "is_accepted": true, "score": 4, "last_activity_date": 1533104025, "creation_date": 1533104025, "answer_id": 51626458, "question_id": 51625949, "link": "https://stackoverflow.com/questions/51625949/dry-double-in-rspec/51626458#51626458", "title": "DRY double in RSpec", "body": "<pre><code>let(:opts) { { :attr1 =&gt; val1,\n              :attr2 =&gt; val2,\n              :attr3 =&gt; val3,\n              :attr4 =&gt; val4,\n              :attr5 =&gt; val5 } }\n\nlet(:s1) { instance_double(Class1, opts) }\nlet(:s2) { instance_double(Class1, opts.merge(:attr1 =&gt; val0)) }\nlet(:s3) { instance_double(Class1, opts.merge(:attr1 =&gt; val6)) }\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 7061266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aafbc4e2ddaaa46b8de7ab91ad0571e8?s=128&d=identicon&r=PG&f=1", "display_name": "laahaa", "link": "https://stackoverflow.com/users/7061266/laahaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 51626458, "answer_count": 2, "score": 2, "last_activity_date": 1533113199, "creation_date": 1533101729, "last_edit_date": 1533113199, "question_id": 51625949, "link": "https://stackoverflow.com/questions/51625949/dry-double-in-rspec", "title": "DRY double in RSpec", "body": "<p>How to DRY(don't repeat yourself) the double in RSpec? For example:</p>\n\n<pre><code>let(:s1) {instance_double(Class1,\n                            :attr1 =&gt; val1,\n                            :attr2 =&gt; val2,\n                            :attr3 =&gt; val3,\n                            :attr4 =&gt; val4,\n                            :attr5 =&gt; val5)}\n\n\nlet(:s2) {instance_double(Class1,\n                            :attr1 =&gt; val0, # the only difference between s2 and s1\n                            :attr2 =&gt; val2,\n                            :attr3 =&gt; val3,\n                            :attr4 =&gt; val4,\n                            :attr5 =&gt; val5)}\n\nlet(:s3) {instance_double(Class1,\n                            :attr1 =&gt; val6, # the only difference between s3 and s1\n                            :attr2 =&gt; val2,\n                            :attr3 =&gt; val3,\n                            :attr4 =&gt; val4,\n                            :attr5 =&gt; val5)}\n</code></pre>\n\n<p>These 3 doubles are very similar and it seems we can refactor. But I tried:</p>\n\n<ol>\n<li><p>to make a basic hash for them:</p>\n\n<p>basic_hash = {attr2 => val2, attr3 => val3, attr4 => val4, attr5 => val5}</p></li>\n</ol>\n\n<p>And then modified this basic hash and pass it into instance_double, for example, pass it into <code>:s1</code>:</p>\n\n<pre><code>basic_hash_s1 = basic_hash.clone\nbasic_hash_s1[:attr1] = val1\nlet(:s3) {instance_double(Class1, basic_hash_s1)\n</code></pre>\n\n<p>But this doesn't work. I'm working on an existing project and the Rspec didn't give any error message(maybe the project has some setting?), it just jumped the whole spec file. </p>\n\n<ol start=\"2\">\n<li><p>I also tried to allow on double:</p>\n\n<p>allow(s1).to receive(:attr).and_return(val1)</p></li>\n</ol>\n\n<p>It still doesn't work.</p>\n\n<p>Somebody know how to refactor this? Thanks!</p>\n\n<p>======= edit =======</p>\n\n<p>I tried to create double Hash object and pass it into <code>:s1</code>, it can be passed, but I don't know how to modify the content in that double: I tried to modify it as the same way as modifying a regular Hash object but it didn't work.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 1, "creation_date": 1533093732, "post_id": 51624749, "comment_id": 90214653, "body": "<code>input.is_a?(String) &amp;&amp; input.casecmp(&#39;true&#39;).zero?</code> would have been far simpler. If the input is guaranteed to be a string it can be simplified even more."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1533104342, "post_id": 51624749, "comment_id": 90217487, "body": "@User7354632781 : Your method returns <code>nil</code> if either <code>input.present?</code> is false or if input is present, but is neither true or false (i.e. you can&#39;t distinguish on the caller side between missing input and incorrect input). Is this what you want?"}], "answers": [{"comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1533099431, "post_id": 51625170, "comment_id": 90215802, "body": "your <code>case</code> block needed to be <code>end</code>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1533099457, "last_edit_date": 1533099457, "creation_date": 1533096124, "answer_id": 51625170, "question_id": 51624749, "link": "https://stackoverflow.com/questions/51624749/return-boolean-value-based-on-string-boolean-input-values/51625170#51625170", "title": "Return boolean value based on string boolean input values", "body": "<p>I would go with <code>case</code>. Since there is a binary state, you probably need to decide what value is to be chosen for a fallback. E. g. when no parameter is present, you are likely still in a need to return something. I would return <code>false</code> for everything save for <code>'true'</code>:</p>\n\n<pre><code>def status(input)\n  case input\n  when 'true' then true\n  when 'false' then false\n  else false\n  end\nend\n</code></pre>\n\n<p>Or, even shorter (but less readable/idiomatic):</p>\n\n<pre><code>def status(input)\n  'true' == input\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1533110597, "post_id": 51625640, "comment_id": 90220808, "body": "There&#39;s also <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-casecmp-3F\" rel=\"nofollow noreferrer\"><code>casecmp?</code></a> (with a <code>?</code>)"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533110851, "post_id": 51625640, "comment_id": 90220937, "body": "Indeed you are right, completely forgot about that, thanks :) Will make the edit."}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 0, "last_activity_date": 1533110935, "last_edit_date": 1533110935, "creation_date": 1533099730, "answer_id": 51625640, "question_id": 51624749, "link": "https://stackoverflow.com/questions/51624749/return-boolean-value-based-on-string-boolean-input-values/51625640#51625640", "title": "Return boolean value based on string boolean input values", "body": "<p>The simplest solution, without overhead of switch statements, etc, is simply this:</p>\n\n<pre><code>def status(input)\n  input.is_a?(String) &amp;&amp; input.casecmp?('true')\nend\n</code></pre>\n\n<p><code>casecmp?</code> ensures <strong>case-insensitivity</strong>, so <code>'true'</code>, <code>'TRUE'</code>, <code>'True'</code>, and any variation of different cases would all return a boolean <code>true</code>. </p>\n\n<p>This could even be altered slightly more to simply ensure that input is a string by calling <code>to_s</code> on it, which will just return <code>self</code> if it is already a string.</p>\n\n<pre><code>def status(input)\n  input.to_s.casecmp?('true')\nend\n</code></pre>\n\n<p>The first is a bit safer, as depending on the object passed, <code>to_s</code> could have been overridden and supply unpredictable behavior, though highly unlikely.</p>\n\n<p>Another solution is using <code>downcase</code> and comparing with <code>==</code>, but <code>casecmp?</code> is more optimized for comparison, and does not create an additional string as <code>downcase</code> would.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-casecmp-3F\" rel=\"nofollow noreferrer\">Documentation for <code>case_cmp?</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1533106548, "creation_date": 1533106548, "answer_id": 51627100, "question_id": 51624749, "link": "https://stackoverflow.com/questions/51624749/return-boolean-value-based-on-string-boolean-input-values/51627100#51627100", "title": "Return boolean value based on string boolean input values", "body": "<p>It seems like you want to cast a string to a boolean and you are using Ruby on Rails. Why don't you use the same method that Rails itself uses to translate user input into a boolean?</p>\n\n<pre><code>def status(input)\n  ActiveRecord::Type::Boolean.new.type_cast_from_user(value)\nend\n</code></pre>\n\n<p>The name of the method changed in different versions of Rails. The above version is for Rails 4.2. Prior Rails 4.2 use <code>ActiveRecord::ConnectionAdapters::Column.value_to_boolean(value)</code> and since Rails 5 it is <code>ActiveRecord::Type::Boolean.new.cast(value)</code></p>\n\n<p>The advantage of using the build method it that it accepts not only the strings <code>'true'</code> and <code>'false'</code> but other common input and still returns a useful boolean.</p>\n"}], "owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1933, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1533110935, "creation_date": 1533092111, "last_edit_date": 1533094775, "question_id": 51624749, "link": "https://stackoverflow.com/questions/51624749/return-boolean-value-based-on-string-boolean-input-values", "title": "Return boolean value based on string boolean input values", "body": "<p>I have a paramter <code>params[:input]</code>, and its value is coming as <code>'true'</code> or <code>'false'</code> (boolean values in string).</p>\n\n<p>In database, the input values are stored as <code>1</code> and <code>0</code>. I need to return boolean values based on input string values. I created a function below to return boolean values.</p>\n\n<pre><code>def status(input)\n  return unless input.present?\n  return false if ['false'].include?(input.downcase)\n  return true if ['true'].include?(input.downcase)\nend\n</code></pre>\n\n<p>Not sure if this is the best way. Is there a better way to write this?</p>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1533088075, "post_id": 51623968, "comment_id": 90213540, "body": "I just updated the Watir website with a Guide on how to use Watir locators: <a href=\"http://watir.com/guides/locating/\" rel=\"nofollow noreferrer\">watir.com/guides/locating</a> Also, we recommend using a Hash as the selector now instead of an ordered pair of parameters (how, what), since multiple locators can be combined as necessary."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1533088550, "post_id": 51623968, "comment_id": 90213651, "body": "@titusfortner Hi It&#39;s an excellent read, and this page <code>http:&#47;&#47;xpathify.herokuapp.com&#47;</code> is awesome! Thanks for mentioning here."}], "answers": [{"tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": true, "score": 1, "last_activity_date": 1533086564, "creation_date": 1533086564, "answer_id": 51624116, "question_id": 51623968, "link": "https://stackoverflow.com/questions/51623968/submit-text-field-using-watir/51624116#51624116", "title": "Submit text field using watir", "body": "<p>You have to click this button </p>\n\n<pre><code>&lt;button type=\"submit\" aria-label=\"Search...\" class=\"s-btn s-btn__primary btn-topbar-primary js-search-submit\"&gt;&lt;svg aria-hidden=\"true\" class=\"svg-icon mx0 iconSearch\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\"&gt;&lt;path d=\"M12.86 11.32L18 16.5 16.5 18l-5.18-5.14v-.35a7 7 0 1 1 1.19-1.19h.35zM7 12A5 5 0 1 0 7 2a5 5 0 0 0 0 10z\"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;\n</code></pre>\n\n<p>The button has the type attribute with the value of <code>submit</code> so we can use that to locate that button, here is the code</p>\n\n<pre><code>browser.goto 'https://www.stackoverflow.com'\nbrowser.text_field(name: \"q\").set('user:963076')\nbrowser.button(type: 'submit').click\n</code></pre>\n"}], "owner": {"reputation": 11932, "user_id": 963076, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gWoml.jpg?s=128&g=1", "display_name": "ryvantage", "link": "https://stackoverflow.com/users/963076/ryvantage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 51624116, "answer_count": 1, "score": 0, "last_activity_date": 1533086564, "creation_date": 1533085164, "question_id": 51623968, "link": "https://stackoverflow.com/questions/51623968/submit-text-field-using-watir", "title": "Submit text field using watir", "body": "<p>I am trying to programmatically submit text into a text field using watir. I'm using Stack Overflow as a test site for the script.</p>\n\n<p>I was able to reference the search field (<code>name='q'</code>) but the submit button doesn't have an <code>id</code> or <code>name</code> attribute. So how do you reference the submit button programmatically and click it?</p>\n\n<p><a href=\"https://i.stack.imgur.com/1JeOS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1JeOS.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the code I have so far:</p>\n\n<pre><code>require 'watir'\nrequire 'pry'\n\nbrowser = Watir::Browser.new :chrome, headless: true\n\nbrowser.goto 'https://www.stackoverflow.com'\nbrowser.text_field(:name, \"q\").set('user:963076') #the search bar name='q'\nbrowser.button(#how do I reference the submit button?, '').click\nbrowser.screenshot.save 'screenafter.png' #the screenshot is so that I know what happened after clicking\n\nbrowser.close\nbrowser.quit\n</code></pre>\n\n<p>A direct answer to the question is good, but an explanation about how to find solutions to problems like this on your own is better and very much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1533081393, "post_id": 51623572, "comment_id": 90212304, "body": "Have you tried <code>@template.is_a?(MessengerTemplate)</code>?"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1533081622, "post_id": 51623572, "comment_id": 90212349, "body": "@jvillian your suggestion does return <code>True</code>. Isn&#39;t <code>JobTemplate</code> technically an instance of <code>MessengerTemplate</code>? I know if I did this in <code>Java</code> the <code>instanceOf</code> method would have passed as indicated here: <a href=\"https://stackoverflow.com/questions/6304056/does-instanceof-return-true-if-instance-of-a-parent\" title=\"does instanceof return true if instance of a parent\">stackoverflow.com/questions/6304056/&hellip;</a>"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1533082335, "post_id": 51623572, "comment_id": 90212480, "body": "Nope. <code>JobTemplate</code> is a <i>subclass</i> of <code>MessengerTemplate</code>. @template is an <i>instance</i> of <code>JobTemplate</code>. Please see answer for details. I don&#39;t know nothing about no Java."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1533089144, "post_id": 51623572, "comment_id": 90213768, "body": "I suspect you wish to correct the line <code>puts @template.instance_of? MessengerTemplate</code> so that it returns <code>true</code> if <code>@template</code> is an instance of <code>MessengerTemplate</code> or a subclass of <code>MessengerTemplate</code>. If so, please correct the statement of the problem."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1533149556, "post_id": 51623572, "comment_id": 90245208, "body": "You have awarded the greenie to an answer that conforms with the interpretation I gave in my comment above. However, you state, &quot;I&#39;m trying to check if a parameter passed to MessageBuilder#initialize is an instance of MessengerTemplate&quot;. That is incorrect and needs to be corrected."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1533088770, "post_id": 51623665, "comment_id": 90213694, "body": "...or <code>@template.class &lt;= MessengerTemplate</code> or <code>MessengerTemplate === @template</code> . See See <a href=\"http://ruby-doc.org/core-2.4.0/Module.html#method-i-3C-3D\" rel=\"nofollow noreferrer\">Module#&lt;=</a> and <a href=\"http://ruby-doc.org/core-2.4.0/Module.html#method-i-3D-3D-3D\" rel=\"nofollow noreferrer\">Module#===</a>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1533095820, "post_id": 51623665, "comment_id": 90215045, "body": "@CarySwoveland exactly. Strictly speaking, <code>Module#&lt;=</code> is the <b>only</b> way to check for requested <i>\u201cis an instance of MessengerTemplate\u201d</i>. <code>is_a?</code> will apparently return <code>true</code> for <i>modules</i>."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 4, "last_activity_date": 1533082142, "creation_date": 1533082142, "answer_id": 51623665, "question_id": 51623572, "link": "https://stackoverflow.com/questions/51623572/check-if-subclass-is-instance-of-parent/51623665#51623665", "title": "Check if subclass is instance of parent", "body": "<p>Try:</p>\n\n<pre><code>@template.is_a?(MessengerTemplate)\n</code></pre>\n\n<p>As noted in the <a href=\"https://ruby-doc.org/core-2.5.1/Object.html#method-i-is_a-3F\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Returns true if <em>class</em> is the class of <em>obj</em>, or if <em>class</em> is one of the superclasses of <em>obj</em> or modules included in <em>obj</em>.</p>\n</blockquote>\n\n<p><code>MessengerTemplate</code> is a superclass of <code>@template</code>, therefore <code>@template.is_a?(MessengerTemplate) =&gt; true</code>.</p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 51623665, "answer_count": 1, "score": 0, "last_activity_date": 1533095211, "creation_date": 1533081195, "last_edit_date": 1533094976, "question_id": 51623572, "link": "https://stackoverflow.com/questions/51623572/check-if-subclass-is-instance-of-parent", "title": "Check if subclass is instance of parent", "body": "<p>I've got the following three classes:</p>\n\n<pre><code>class MessageBuilder\n   def initialize(template)\n       @template = template\n       puts @template.instance_of? MessengerTemplate \n   end\nend\n\nclass MessengerTemplate\n    def initialize\n        @default_template_id = \"111111\"\n    end\nend\n\nclass JobTemplate &lt; MessengerTemplate\n    def initialize(name)\n        @name = name\n        @template_id = \"2222\"\n    end\nend\n</code></pre>\n\n<p>I'm trying to check if a parameter passed to <code>MessageBuilder#initialize</code> is an instance of <code>MessengerTemplate</code>. If not, I need to throw an error.</p>\n\n<p>When I call:</p>\n\n<pre><code>message = MessageBuilder.new(JobTemplate.new(\"Invoice\"))\n</code></pre>\n\n<p>the following line in the constructor:</p>\n\n<pre><code>puts @template.instance_of? MessengerTemplate\n</code></pre>\n\n<p>prints <code>FALSE</code>.</p>\n\n<p>Can someone please tell me what I am doing wrong here?</p>\n"}, {"tags": ["ruby", "windows", "openssl", "rubygems"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533091140, "post_id": 51622929, "comment_id": 90214183, "body": "What&#39;s your exact Ruby patchlevel (<code>ruby -v</code>)?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1533091294, "post_id": 51622929, "comment_id": 90214223, "body": "Note that you can manually download <a href=\"https://git.io/vQhWq\" rel=\"nofollow noreferrer\">git.io/vQhWq</a> , save it to disk, and run it yourself."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533112779, "post_id": 51622929, "comment_id": 90221981, "body": "Have you read/followed the official documentation relating to this SSL error? <a href=\"https://guides.rubygems.org/ssl-certificate-update/#installing-using-update-packages\" rel=\"nofollow noreferrer\">guides.rubygems.org/ssl-certificate-update/&hellip;</a>"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1533157118, "post_id": 51622929, "comment_id": 90248776, "body": "It looks like your proxy server isn&#39;t set up to correctly handle HTTPS traffic, or it has invalid certificates."}], "owner": {"reputation": 2724, "user_id": 4268602, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/730410991/picture?type=large", "display_name": "Daniel Paczuski Bak", "link": "https://stackoverflow.com/users/4268602/daniel-paczuski-bak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533076105, "creation_date": 1533075719, "last_edit_date": 1533076105, "question_id": 51622929, "link": "https://stackoverflow.com/questions/51622929/gem-update-doesnt-work", "title": "gem update doesn&#39;t work", "body": "<p>I am attempting to get ruby to run. My company uses a proxy server: <a href=\"http://proxy.hitachi-id.com:80\" rel=\"nofollow noreferrer\">http://proxy.hitachi-id.com:80</a></p>\n\n<p>And I am using precompiled ruby.</p>\n\n<p>I can add a source, but I cannot run <code>gem update</code> without a failure.</p>\n\n<pre><code>(inst1) (robotframework-Rs4th6sJ) Administrator@DANIE01-ROB1 Z:\\Users\\danie01\\fox\\test\\watir\n# gem sources --add http://rubygems.org\nhttps://rubygems.org is recommended for security over http://rubygems.org\n\nDo you want to add this insecure source? [yn]  y\nhttp://rubygems.org added to sources\n\n(inst1) (robotframework-Rs4th6sJ) Administrator@DANIE01-ROB1 Z:\\Users\\danie01\\fox\\test\\watir\n# gem update --system\nERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)\n    SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: tlsv1 alert protocol version (https://api.rubygems.org/specs.4.8.gz)\n</code></pre>\n\n<p>I followed <a href=\"https://bundler.io/v1.16/guides/rubygems_tls_ssl_troubleshooting_guide.html\" rel=\"nofollow noreferrer\">https://bundler.io/v1.16/guides/rubygems_tls_ssl_troubleshooting_guide.html</a></p>\n\n<p>Which says I need to run the following command:</p>\n\n<pre><code>ruby -ropen-uri -e 'eval open(\"https://git.io/vQhWq\").read'\n</code></pre>\n\n<p>But this command fails.</p>\n\n<p>If I do:</p>\n\n<pre><code>Administrator@DANIE01-ROB1 C:\\Users\\Administrator\n# set https_proxy=https://proxy.hitachi-id.com:80\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>Administrator@DANIE01-ROB1 C:\\Users\\Administrator\n# ruby -ropen-uri -e 'eval open(\"https://git.io/vQhWq\").read'\nC:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:249:in `open_http': Non-HTTP proxy URI: https://proxy.hitachi-id.com:80 (RuntimeError)\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:775:in `buffer_open'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:203:in `block in open_loop'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:201:in `catch'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:201:in `open_loop'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:146:in `open_uri'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:677:in `open'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:33:in `open'\n        from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>And if I do:</p>\n\n<pre><code>Administrator@DANIE01-ROB1 C:\\Users\\Administrator\n# set https_proxy=http://proxy.hitachi-id.com:80\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>Administrator@DANIE01-ROB1 C:\\Users\\Administrator\n# ruby -ropen-uri -e 'eval open(\"https://git.io/vQhWq\").read'\nC:/ruby/1.9.3/lib/ruby/1.9.1/net/http.rb:799:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL::SSL::SSLError)\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/net/http.rb:799:in `block in connect'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/timeout.rb:54:in `timeout'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/timeout.rb:99:in `timeout'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/net/http.rb:799:in `connect'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/net/http.rb:755:in `do_start'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/net/http.rb:744:in `start'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:306:in `open_http'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:775:in `buffer_open'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:203:in `block in open_loop'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:201:in `catch'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:201:in `open_loop'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:146:in `open_uri'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:677:in `open'\n        from C:/ruby/1.9.3/lib/ruby/1.9.1/open-uri.rb:33:in `open'\n        from -e:1:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 2, "creation_date": 1533074162, "post_id": 51622324, "comment_id": 90210579, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20183710/find-all-records-which-have-a-count-of-an-association-greater-than-zero\">Find all records which have a count of an association greater than zero</a>"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1533074484, "post_id": 51622324, "comment_id": 90210696, "body": "@JoshBrody I don\u2019t think it\u2019s a duplicate because they can have other associations I just want to ensure that they are not associated to the specific community through a community program but the same name can be connected to different community"}, {"owner": {"reputation": 628, "user_id": 8267417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qgllr-3VCV4/AAAAAAAAAAI/AAAAAAAAAAo/E_crAMNR-fM/photo.jpg?sz=128", "display_name": "gasc", "link": "https://stackoverflow.com/users/8267417/gasc"}, "edited": false, "score": 0, "creation_date": 1533092820, "post_id": 51622324, "comment_id": 90214516, "body": "Can you rephrase what you need to do? I understand this: You need all <code>ProgramName</code> that are 1) NOT associated  with any <code>CommunityProgram</code> and 2) Already associated with a <code>Community</code> ??"}, {"owner": {"reputation": 628, "user_id": 8267417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qgllr-3VCV4/AAAAAAAAAAI/AAAAAAAAAAo/E_crAMNR-fM/photo.jpg?sz=128", "display_name": "gasc", "link": "https://stackoverflow.com/users/8267417/gasc"}, "edited": false, "score": 0, "creation_date": 1533093248, "post_id": 51622324, "comment_id": 90214585, "body": "By the way, I think you&#39;re missing an association in your <code>CommunityProgram</code> model , a <code>belongs_to :community</code>"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 628, "user_id": 8267417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qgllr-3VCV4/AAAAAAAAAAI/AAAAAAAAAAo/E_crAMNR-fM/photo.jpg?sz=128", "display_name": "gasc", "link": "https://stackoverflow.com/users/8267417/gasc"}, "edited": false, "score": 0, "creation_date": 1533093910, "post_id": 51622324, "comment_id": 90214676, "body": "@gasc yes you are correct there is a missing association. I am using Stackoverflow on mobile so I can\u2019t edit it but the association should be ther"}], "answers": [{"comments": [{"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "edited": false, "score": 0, "creation_date": 1533079177, "post_id": 51622814, "comment_id": 90211856, "body": "<code>community_program</code> belongs to a <code>program_name</code> so I don&#39;t think I can create the scope you have described above."}], "tags": [], "owner": {"reputation": 34, "user_id": 4655818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d172695c3471bec15708f4dc09e1524?s=128&d=identicon&r=PG", "display_name": "Brittany Hicks", "link": "https://stackoverflow.com/users/4655818/brittany-hicks"}, "is_accepted": false, "score": -1, "last_activity_date": 1533075427, "last_edit_date": 1533075427, "creation_date": 1533074993, "answer_id": 51622814, "question_id": 51622324, "link": "https://stackoverflow.com/questions/51622324/rails-find-all-records-except-already-second-level-associated/51622814#51622814", "title": "Rails find all records except already second level associated", "body": "<p>You could do this a few different ways, depending on which controller/view you are displaying them on.</p>\n\n<p>Create an <a href=\"https://guides.rubyonrails.org/association_basics.html#scopes-for-has-many\" rel=\"nofollow noreferrer\">association</a> on the Community model:</p>\n\n<pre><code>has_many :unassigned_program_names, -&gt; { where community_program_id: nil }\n</code></pre>\n\n<p>Create a <a href=\"https://guides.rubyonrails.org/active_record_querying.html#scopes\" rel=\"nofollow noreferrer\">scope</a> like this on the ProgramName model:</p>\n\n<pre><code>scope :unassigned, -&gt; { where(community_program_id: nil) }\n</code></pre>\n\n<p>Hope this helps. :)</p>\n"}, {"comments": [{"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "edited": false, "score": 0, "creation_date": 1533666795, "post_id": 51634750, "comment_id": 90427280, "body": "If possible can you please explain why <code>select</code> is better than <code>pluck</code> in this situation even though <code>pluck</code> is supposed to be more efficient in general?"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "reply_to_user": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "edited": false, "score": 1, "creation_date": 1533670615, "post_id": 51634750, "comment_id": 90429155, "body": "<code>pluck</code> is not supposed to be more efficient in general :) The <code>select</code> is not <code>Enumerable#select</code> but chainable method of <code>ActiveRecord::Relation</code> like <code>where</code>, <code>order</code> etc. So, <code>except_relation = ...</code> does not produce real SQL query(like <code>pluck</code>) but just builds instance of <code>ActiveRecord::Relation</code>. And so last lines of code look like <code>Model.where.not(id: ar_relation)</code> which produces one SQL query like <code>SELECT * FROM program_names WHERE id NOT IN(SELECT program_name_id FROM ...)</code>"}], "tags": [], "owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1533646937, "last_edit_date": 1533646937, "creation_date": 1533130560, "answer_id": 51634750, "question_id": 51622324, "link": "https://stackoverflow.com/questions/51622324/rails-find-all-records-except-already-second-level-associated/51634750#51634750", "title": "Rails find all records except already second level associated", "body": "<p>Let <code>except_community</code> is a particular <code>Community</code> which associations should be excluded. Code below will produce one SQL query:</p>\n\n<pre><code>except_relation = except_community.\n  community_programs.\n  select(:program_name_id)\n\nProgramName.\n  where.not(id: except_relation)\n</code></pre>\n\n<p>You can add it as an instance method of <code>Community</code> model.</p>\n"}, {"tags": [], "owner": {"reputation": 628, "user_id": 8267417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qgllr-3VCV4/AAAAAAAAAAI/AAAAAAAAAAo/E_crAMNR-fM/photo.jpg?sz=128", "display_name": "gasc", "link": "https://stackoverflow.com/users/8267417/gasc"}, "is_accepted": false, "score": 1, "last_activity_date": 1533153716, "last_edit_date": 1533153716, "creation_date": 1533153125, "answer_id": 51641301, "question_id": 51622324, "link": "https://stackoverflow.com/questions/51622324/rails-find-all-records-except-already-second-level-associated/51641301#51641301", "title": "Rails find all records except already second level associated", "body": "<p>Maybe something like:</p>\n\n<pre><code>class Community &lt; ActiveRecord::Base\n  has_many :community_programs\nend\n\nclass CommunityProgram &lt; ActiveRecord::Base\n  belongs_to :program_name, optional: true\n  belongs_to :community\nend\n\nclass ProgramName &lt; ActiveRecord::Base\n  has_many :community_programs\nend\n\nsome_community            = Community.find some_community_id\nprograms_from_a_community = some_community.community_programs.map &amp;:id \nprogram_names_to_exclude  = CommunityProgram.where(id: programs_from_a_community)\n                                            .where.not(program_name_id: nil)\n                                            .map { |c_p| c_p.program_name.id }\nprogram_names             = ProgramName.where.not(id: program_names_to_exclude)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1533647031, "post_id": 51710978, "comment_id": 90415301, "body": "Thank you for edit proposal, I&#39;ve updated my answer with grammar fixes."}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 1, "creation_date": 1533647498, "post_id": 51710978, "comment_id": 90415635, "body": "You are wrong with your assumption: <code>select</code> in my answer does NOT build any ActiveRecord model instance, just ActiveRecord relation. My example produces only ONE sql query with SUB-select, when <code>pluck</code> one produces TWO sql queries and depends on <code>program_name_id</code> count. So, my answer &quot;is more efficient&quot; than <code>pluck</code> one :)"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1533666743, "post_id": 51710978, "comment_id": 90427249, "body": "@PavelMikhailyuk Yes, you are correct. My reasoning was flawed over here and running a <code>to_sql</code> followed with benchmarking clearly showed that <code>select</code> is more efficient in this case."}], "tags": [], "owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "is_accepted": false, "score": 0, "last_activity_date": 1533671095, "last_edit_date": 1533671095, "creation_date": 1533569166, "answer_id": 51710978, "question_id": 51622324, "link": "https://stackoverflow.com/questions/51622324/rails-find-all-records-except-already-second-level-associated/51710978#51710978", "title": "Rails find all records except already second level associated", "body": "<p>My edition for the answer I accepted earlier was rejected so I am adding it as another answer. The solution provided by Pavel Mikhailyuk fixed my issue.</p>\n\n<p>Since I wanted to find the most efficient query I could so I ended up updating it and using:</p>\n\n<pre><code>ProgramName.where.not(id: except_community.community_programs.pluck(:program_name_id))\n</code></pre>\n\n<p>EDIT: The selected answer is the more efficient than this.</p>\n"}], "owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 51634750, "answer_count": 4, "score": 0, "last_activity_date": 1533671095, "creation_date": 1533072427, "last_edit_date": 1533093792, "question_id": 51622324, "link": "https://stackoverflow.com/questions/51622324/rails-find-all-records-except-already-second-level-associated", "title": "Rails find all records except already second level associated", "body": "<p>I have the following models in my rails application </p>\n\n<p>Model <code>community</code>:</p>\n\n<pre><code>class Community &lt; ActiveRecord::Base\n  has_many :community_program\nend\n</code></pre>\n\n<p>Model <code>community_program</code>:</p>\n\n<pre><code>class CommunityProgram &lt; ActiveRecord::Base\n  belongs_to :program_name\nend\n</code></pre>\n\n<p>Model <code>program_name</code>:</p>\n\n<pre><code>class ProgramName &lt; ActiveRecord::Base\n  has_many :community_programs\nend\n</code></pre>\n\n<p>I am trying to find a way to pull all the <code>program_names</code> which don't belong to a <code>community_program</code> which has already been assigned to a <code>community</code>.</p>\n\n<p>I have been able to pull all <code>program_names</code> and then remove the <code>program_names</code> which are already associated with a <code>community</code> but that is very expensive. Can I directly pull the second level unassociated records?</p>\n\n<p><strong>EDIT: The question is different from the linked question since in this case, <code>program_name</code> might have an association with a Community Program for a different community but we still want to include that name if it doesn't have an association with the current <code>community</code>.</strong></p>\n\n<p>**EDIT 2: I want to extract all the Program Names which haven\u2019t yet been assigned to a Community Program associated with a particular Community. They can be associated with the Community Programs associated with a different community. The use case is that a user should be able to select a name from the list of remaining names and assign that to a community program associated with their community.</p>\n\n<p>Program names are global and although the program name for community programs of a particular community are unique but different communities can have community programs associated to the same program name**</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler", "rbenv", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 1475, "user_id": 1743874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/vQYev.png?s=128&g=1", "display_name": "Piccolo", "link": "https://stackoverflow.com/users/1743874/piccolo"}, "edited": false, "score": 0, "creation_date": 1533087712, "post_id": 51622293, "comment_id": 90213464, "body": "Have you tried re-installing the <code>bundler</code> gem? <code>gem install bundler</code>"}, {"owner": {"reputation": 591, "user_id": 1169939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRDKs.jpg?s=128&g=1", "display_name": "marksiemers", "link": "https://stackoverflow.com/users/1169939/marksiemers"}, "reply_to_user": {"reputation": 1475, "user_id": 1743874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/vQYev.png?s=128&g=1", "display_name": "Piccolo", "link": "https://stackoverflow.com/users/1743874/piccolo"}, "edited": false, "score": 0, "creation_date": 1533138418, "post_id": 51622293, "comment_id": 90239270, "body": "Yes, I&#39;ll enumerate the things I&#39;ve tried later today. In short, I have tried completely uninstalling bundler, and reinstalling it, and running rbenv rehash (even though you aren&#39;t supposed to need that anymore). I did a gem pristine as well. This may have to do with rails 4/5 binstubs and bundler binstubs not liking each other."}], "answers": [{"comments": [{"owner": {"reputation": 591, "user_id": 1169939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRDKs.jpg?s=128&g=1", "display_name": "marksiemers", "link": "https://stackoverflow.com/users/1169939/marksiemers"}, "edited": false, "score": 0, "creation_date": 1533138516, "post_id": 51627858, "comment_id": 90239334, "body": "All of the commands in the question are done from the project directory. Both <code>gem install</code> and <code>gem update</code> have been tried. As well as a <code>gem uninstall bundler</code> then a fresh <code>gem install bundler</code>"}], "tags": [], "owner": {"reputation": 429, "user_id": 7617687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb0c380ac37c50e2c0574e0ecec1a98?s=128&d=identicon&r=PG&f=1", "display_name": "radoAngelov", "link": "https://stackoverflow.com/users/7617687/radoangelov"}, "is_accepted": false, "score": 0, "last_activity_date": 1533109205, "creation_date": 1533109205, "answer_id": 51627858, "question_id": 51622293, "link": "https://stackoverflow.com/questions/51622293/fixing-your-ruby-version-is-2-4-4-but-your-gemfile-specified-2-5-1-error-with/51627858#51627858", "title": "Fixing &#39;Your Ruby version is 2.4.4, but your Gemfile specified 2.5.1&#39; error with rbenv and rails 5.2", "body": "<p>Are you executing the command <code>ruby -v</code> from inside the project dir? Also if you installed a new Ruby version, you should update your bundler as well. <code>gem install bundler</code> or <code>gem update bundler</code> will do this for you.</p>\n"}, {"tags": [], "owner": {"reputation": 1637, "user_id": 3353794, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/m0hyF.png?s=128&g=1", "display_name": "agbodike", "link": "https://stackoverflow.com/users/3353794/agbodike"}, "is_accepted": false, "score": 0, "last_activity_date": 1550555126, "creation_date": 1550555126, "answer_id": 54759577, "question_id": 51622293, "link": "https://stackoverflow.com/questions/51622293/fixing-your-ruby-version-is-2-4-4-but-your-gemfile-specified-2-5-1-error-with/54759577#54759577", "title": "Fixing &#39;Your Ruby version is 2.4.4, but your Gemfile specified 2.5.1&#39; error with rbenv and rails 5.2", "body": "<p>A bit late to the game, but perhaps this will prove helpful to somebody:</p>\n\n<p>TLDR; you may have a conflicting version manager.</p>\n\n<p>More background information:</p>\n\n<p>I use thoughtbot's laptop script to manage the software I install on my computer. I hadn't updated in quite a long. I finally updated, but found after the update that my applications were no longer working. After quite a bit of time spent following the usual suggestions for this issue I finally paid more attention to the actual errors I was receiving and noticed a reference to <code>asdf</code>. It turns out <code>asdf</code> is a general language version manager, and the scripts had started using it some time ago. I had never heard of it before that. I read a bit of the documentation, it sounded pretty good, so I removed <code>rbenv</code>, did the basic setup, and voila, my applications are working again! This is probably also relevant if one has other ruby version managers.</p>\n\n<p>The long story short, having multiple version managers is probably a bad idea, which could result in all kinds of problems running applications.</p>\n"}], "owner": {"reputation": 591, "user_id": 1169939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRDKs.jpg?s=128&g=1", "display_name": "marksiemers", "link": "https://stackoverflow.com/users/1169939/marksiemers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2184, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1550555126, "creation_date": 1533072266, "question_id": 51622293, "link": "https://stackoverflow.com/questions/51622293/fixing-your-ruby-version-is-2-4-4-but-your-gemfile-specified-2-5-1-error-with", "title": "Fixing &#39;Your Ruby version is 2.4.4, but your Gemfile specified 2.5.1&#39; error with rbenv and rails 5.2", "body": "<p>I know there are many many questions about this with various ruby versions. I believe I have exhausted all of the normal fixes (which usually work).</p>\n\n<p>This is an application that has been working, in the same environment that I have now for several months (and years before that for other people). It has previously worked with both ruby 2.4.4 and ruby 2.5.1 (switching with rbenv).</p>\n\n<p>I want ruby 2.5.1 and bundler is complaining that my ruby version is 2.4.4</p>\n\n<pre><code>$ bundle exec rspec\nYour Ruby version is 2.4.4, but your Gemfile specified 2.5.1\n\n$ rbenv exec bundle exec rspec\nYour Ruby version is 2.4.4, but your Gemfile specified 2.5.1\n</code></pre>\n\n<p><em>NOTE: <code>rspec</code> is the example but it is happening for any command prepended with <code>bundle exec</code></em></p>\n\n<p>I have checked all the places that I know about, and all the places that the internet has suggested I should look, and cannot find what is setting ruby to 2.4.4 (see details below).</p>\n\n<p>So the real question is - where is the next place to look for a mis-configured file for either <code>rbenv</code> or <code>bundler</code> or both?</p>\n\n<p>All of these things give me the correct ruby version</p>\n\n<p>The basics:</p>\n\n<pre><code>$ ruby -v\nruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux]\n\n$ which ruby\n/home/vagrant/.rbenv/shims/ruby\n\n$ rbenv which ruby\n/home/vagrant/.rbenv/versions/2.5.1/bin/ruby\n\n$ bundle -v\nBundler version 1.16.3\n\n$ which bundle\n/home/vagrant/.rbenv/shims/bundle\n\n$ rbenv which bundle\n/home/vagrant/.rbenv/versions/2.5.1/bin/bundle\n\n$ bundle platform --ruby\nruby 2.5.1p57\n\n$ rbenv version\n2.5.1 (set by /path/to/app/.ruby-version)\n\n$ rbenv local\n2.5.1\n\n$ rbenv global\n2.5.1\n\n$ head Gemfile -n 6\nsource 'https://rubygems.org'\ngit_source(:github) { |name| \"https://github.com/#{name}.git\" }\n\nruby '2.5.1'\n\ngem 'rails', '~&gt; 5.2.0'\n\n$ tail Gemfile.lock -n 5\nRUBY VERSION\n   ruby 2.5.1p57\n\nBUNDLED WITH\n   1.16.3\n</code></pre>\n\n<p><strong>bundle env</strong></p>\n\n<pre><code>$ bundle env\n\n## Environment\n\n```\nBundler       1.16.3\n  Platforms   ruby, x86_64-linux\nRuby          2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux]\n  Full Path   /home/vagrant/.rbenv/versions/2.5.1/bin/ruby\n  Config Dir  /home/vagrant/.rbenv/versions/2.5.1/etc\nRubyGems      2.7.6\n  Gem Home    /home/vagrant/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0\n  Gem Path    /home/vagrant/.gem/ruby/2.5.0:/home/vagrant/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0\n  User Path   /home/vagrant/.gem/ruby/2.5.0\n  Bin Dir     /home/vagrant/.rbenv/versions/2.5.1/bin\nTools\n  Git         1.9.1\n  RVM         not installed\n  rbenv       rbenv 1.1.1-37-g1c772d5\n\n  chruby      not installed\n```\n\n## Bundler Build Metadata\n\n```\nBuilt At          2018-07-17\nGit SHA           12e73cab7\nReleased Version  true\n```\n\n... (snip)\n\nRUBY VERSION\n   ruby 2.5.1p57\n\nBUNDLED WITH\n   1.16.3\n</code></pre>\n\n<p><strong>gem env</strong></p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 2.7.6\n  - RUBY VERSION: 2.5.1 (2018-03-29 patchlevel 57) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /home/vagrant/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0\n  - USER INSTALLATION DIRECTORY: /home/vagrant/.gem/ruby/2.5.0\n  - RUBY EXECUTABLE: /home/vagrant/.rbenv/versions/2.5.1/bin/ruby\n  - EXECUTABLE DIRECTORY: /home/vagrant/.rbenv/versions/2.5.1/bin\n  - SPEC CACHE DIRECTORY: /home/vagrant/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /home/vagrant/.rbenv/versions/2.5.1/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /home/vagrant/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0\n     - /home/vagrant/.gem/ruby/2.5.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /home/vagrant/.rbenv/versions/2.5.1/bin\n     - /home/vagrant/.rbenv/libexec\n     - /home/vagrant/.rbenv/plugins/ruby-build/bin\n     - /home/vagrant/.rbenv/shims\n     - /home/vagrant/.rbenv/shims\n     - /home/vagrant/.rbenv/shims\n     - /home/vagrant/.rbenv/bin\n     - /home/vagrant/.rbenv/shims\n     - /home/vagrant/.rbenv/bin\n</code></pre>\n\n<p><strong>cat</strong></p>\n\n<pre><code>$ cat /home/vagrant/.rbenv/versions/2.5.1/bin/bundler\n#!/home/vagrant/.rbenv/versions/2.5.1/bin/ruby\n#\n# This file was generated by RubyGems.\n#\n# The application 'bundler' is installed as part of a gem, and\n# this file is here to facilitate running it.\n#\n\nrequire 'rubygems'\n\nversion = \"&gt;= 0.a\"\n\nif ARGV.first\n  str = ARGV.first\n  str = str.dup.force_encoding(\"BINARY\") if str.respond_to? :force_encoding\n  if str =~ /\\A_(.*)_\\z/ and Gem::Version.correct?($1) then\n    version = $1\n    ARGV.shift\n  end\nend\n\nif Gem.respond_to?(:activate_bin_path)\nload Gem.activate_bin_path('bundler', 'bundler', version)\nelse\ngem \"bundler\", version\nload Gem.bin_path(\"bundler\", \"bundler\", version)\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1533095750, "post_id": 51622054, "comment_id": 90215029, "body": "What is the relation between <code>my_to_bool</code> and <code>convert</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1533095803, "post_id": 51622054, "comment_id": 90215041, "body": "Your <code>convert</code> code will not work unless <code>val</code> is a method. If you intended to be a local variable, it is not defined within its scope, and will raise an error."}], "answers": [{"comments": [{"owner": {"reputation": 49808, "user_id": 480943, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2a3cdbb4d1b3f2d07ee2f6a6559c7963?s=128&d=identicon&r=PG", "display_name": "Ben Lee", "link": "https://stackoverflow.com/users/480943/ben-lee"}, "edited": false, "score": 2, "creation_date": 1533071937, "post_id": 51622155, "comment_id": 90209854, "body": ":+1: for pointing out that this is probably a case where a set of constants/symbols would be more appropriate."}], "tags": [], "owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": true, "score": 7, "last_activity_date": 1533071601, "creation_date": 1533071601, "answer_id": 51622155, "question_id": 51622054, "link": "https://stackoverflow.com/questions/51622054/how-to-convert-nil-values-to-true-without-nilcheck/51622155#51622155", "title": "How to convert nil values to true without nilcheck", "body": "<p>If the only possible values are <code>true</code>, <code>false</code>, and <code>nil</code>, I might suggest</p>\n\n<pre><code>def convert\n  val != false\nend\n</code></pre>\n\n<p>Although, in fairness, this is violating the spirit of that guideline you mentioned. Having a value that can be <code>nil</code> <em>or</em> Boolean really feels like some kind of tri-state type, which would be better factored out into a set of better-named constants or even just symbols.</p>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 3, "last_activity_date": 1533103375, "creation_date": 1533103375, "answer_id": 51626307, "question_id": 51622054, "link": "https://stackoverflow.com/questions/51622054/how-to-convert-nil-values-to-true-without-nilcheck/51626307#51626307", "title": "How to convert nil values to true without nilcheck", "body": "<p>another way :</p>\n\n<pre><code>def convert(val)\n  [true, nil].include?(val)\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&gt; convert(true)\n#=&gt; true \n&gt; convert(nil)\n#=&gt; true \n&gt; convert(false)\n#=&gt; false \n</code></pre>\n"}], "owner": {"reputation": 4667, "user_id": 268673, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/33abb5182937ebcc3765f224aa74c16d?s=128&d=identicon&r=PG", "display_name": "AndreDurao", "link": "https://stackoverflow.com/users/268673/andredurao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 51622155, "answer_count": 2, "score": 1, "last_activity_date": 1533127776, "creation_date": 1533071075, "last_edit_date": 1533127776, "question_id": 51622054, "link": "https://stackoverflow.com/questions/51622054/how-to-convert-nil-values-to-true-without-nilcheck", "title": "How to convert nil values to true without nilcheck", "body": "<p>I have a variable <code>val</code>, which can be <code>nil</code>, <code>true</code>, or <code>false</code>. I'm writing a method <code>convert</code>, which converts the input <code>val</code> and returns the following value according to <code>val</code>:</p>\n\n<ul>\n<li><code>true</code> -> <code>true</code></li>\n<li><code>false</code> -> <code>false</code></li>\n<li><code>nil</code> -> <code>true</code></li>\n</ul>\n\n<p>I can do this with a <code>nil</code> check like:</p>\n\n<pre><code>def convert\n  val.nil? ? true : val\nend\n</code></pre>\n\n<p>How can I convert it without a <a href=\"https://github.com/troessner/reek/blob/v4.8.2/docs/Nil-Check.md\" rel=\"nofollow noreferrer\"><code>nil</code> check</a>?</p>\n"}, {"tags": ["ruby", "regex", "parsing"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1533068883, "post_id": 51621542, "comment_id": 90208574, "body": "This is all find and good until someone has &quot;Half a pound of butter&quot; or &quot;two whole eggs&quot; in the recipe."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1533068984, "post_id": 51621542, "comment_id": 90208623, "body": "Couple of tips: Instead of using the Perl-style <code>=~</code> operator, use <code>.match(...)</code> instead which makes what&#39;s going on a lot more clear. Secondly, use <code>&#47;\\A\\s*\\d\\s*\\w.*&#47;</code> as a way of anchoring it to the start of the line where they&#39;re could be a couple of spaces for no reason."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1533069068, "post_id": 51621542, "comment_id": 90208654, "body": "The way I usually approach problems like this is to get a corpus of data full of all sorts of ugly edge cases, then write a parser that handles them. The thing that&#39;ll save you here is <i>unit tests</i>, especially the sort where you can define the output in a standard form like JSON or YAML."}], "answers": [{"comments": [{"owner": {"reputation": 1485, "user_id": 2332825, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Ylq7x.jpg?s=128&g=1", "display_name": "T0ny lombardi", "link": "https://stackoverflow.com/users/2332825/t0ny-lombardi"}, "edited": false, "score": 0, "creation_date": 1533127983, "post_id": 51622128, "comment_id": 90231779, "body": "Thank you that has helped me a lot."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 1, "last_activity_date": 1533071457, "creation_date": 1533071457, "answer_id": 51622128, "question_id": 51621542, "link": "https://stackoverflow.com/questions/51621542/parsing-text-file-to-get-a-selection-of-text/51622128#51622128", "title": "Parsing text file to get a selection of text", "body": "<p>What I would do here, is instead of trying to match data that you likely have no control over, try to match that data that it looks like you might have some control over. Specifically, it looks to me like the lines <code>== Ingredients ==</code> and <code>== Directions ==</code> and <code>Category:Tomato Recipes</code> could possibly be part of the file format, not entered by the user. So, I'd just split the text up whenever you see a line that looks like that:</p>\n\n<pre><code>sections = list.each_line.slice_before do |line|\n  line.match?(/\\A(==|[a-zA-Z]+:)/)\nend.entries\n</code></pre>\n\n<p>and then you can just <code>assoc</code> the data out of the groups:</p>\n\n<pre><code>puts sections.assoc(\"== Ingredients ==\\n\")\nputs '---'\nputs sections.assoc(\"== Directions ==\\n\")\n</code></pre>\n\n<p>This still has some flaws (if the user enters something like <code>Note: Preheat oven first</code> as part of the directions, this would end up splitting that, thinking it's metadata), but should be a large step forward, and can be tweaked from here.</p>\n"}], "owner": {"reputation": 1485, "user_id": 2332825, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Ylq7x.jpg?s=128&g=1", "display_name": "T0ny lombardi", "link": "https://stackoverflow.com/users/2332825/t0ny-lombardi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 51622128, "answer_count": 1, "score": 0, "last_activity_date": 1533071457, "creation_date": 1533068738, "question_id": 51621542, "link": "https://stackoverflow.com/questions/51621542/parsing-text-file-to-get-a-selection-of-text", "title": "Parsing text file to get a selection of text", "body": "<p>I have a text file where I want to grab a section of text so I can put that into two arrays one being ingredients the other is directions. </p>\n\n<p>for the ingredients, I can do something like below but I can't guarantee the integrity of it.  </p>\n\n<pre><code>ingredients = []\nlist.each_line do |l|\n  ingredients &lt;&lt; l if l =~ /\\d\\s?\\w.*/\nend\n</code></pre>\n\n<p>this is the text blob : </p>\n\n<pre><code>635860\n581543\n2011-03-21T13:50:10Z\n\nImage:black bean soup.jpg|right|Mexican Black Bean Soup\n\n== Ingredients ==\n1lb black beans\n2 tbsp extra-virgin olive oil\n2 onions, large, diced\n6 cloves garlic, minced\n1 cup tomato, peeled, seeded, and chopped (fresh or canned)\n1 sprig epazote, fresh or dried (optional)\n1 tbsp chipotle pepper|chipotle chiles, canned, chopped (or \u00bc tsp cayenne)\n1 tsp cumin, ground\n1 tsp coriander seed|coriander, ground\n2 tsp salt\n\n== Directions ==\nSoak the black beans for 2 hours and drain.\nIn a deep pot, heat the olive oil over medium heat.\nAdd the onions and cook about 5 minutes.\nUntil translucent.\nAdd the black beans|beans, garlic, and 6 cups cold water.\nBring to a boil, skimming any foam that rises to the surface.\nReduce to a simmer.\nIn an hour or when the black beans|beans are soft, add the tomato, epazote, chipotle chile peppers|chile, cumin, coriander, and salt.\nContinue cooking until the black beans|beans start to break down and the broth begins to thicken.\nTaste for seasoning and add salt and pepper if needed.\nIf you\u2019re serving this soup immediately, you may want to thicken it by pur\u00e9eing a cup or two of the black beans|beans in a blender or food processor and then recombining them with the rest of the soup.\nThe soup will thicken on its own if refrigerated overnight.\n\nCategory:Black bean Recipes\nCategory:Chile pepper Recipes\nCategory:Chipotle pepper Recipes\nCategory:Epazote Recipes\nCategory:Mexican Soups\nCategory:Tomato Recipes\nbx0ztz9xbf8qr9z4gwkad26u6q3hly3\n</code></pre>\n"}, {"tags": ["ruby", "performance", "hash", "blockchain"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1533067792, "post_id": 51620938, "comment_id": 90208088, "body": "Why not use a built-in hashing method from the <a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/digest/rdoc/Digest/SHA2.html\" rel=\"nofollow noreferrer\">standard library</a>? These can benefit from optimizations written in C where your code can&#39;t."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 2, "creation_date": 1533068480, "post_id": 51620938, "comment_id": 90208375, "body": "Just wondering why you feel anything you write in Ruby is going to somehow be more efficient than Ruby&#39;s built-in hashing it performs on strings in C? Something wrong with <code>&quot;Hello, world!&quot;.hash</code>?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1533157267, "post_id": 51620938, "comment_id": 90248842, "body": "What kind of hash do you need? Ruby&#39;s built in hash is for making hash tables of objects, it isn&#39;t necessarily cryptographically secure."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1533067908, "post_id": 51621311, "comment_id": 90208140, "body": "Symbolizing arbitrary strings is not really a good plan as it clutters up the symbol table."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1533068029, "post_id": 51621311, "comment_id": 90208187, "body": "As I was pointing out in an edit when you were typing that, lol :)"}, {"owner": {"reputation": 33, "user_id": 7154971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce3389ce277bf316a11564983b192feb?s=128&d=identicon&r=PG&f=1", "display_name": "B. Abriatis", "link": "https://stackoverflow.com/users/7154971/b-abriatis"}, "edited": false, "score": 0, "creation_date": 1533069821, "post_id": 51621311, "comment_id": 90209024, "body": "I understand that I am trying to &quot;reinvent the wheel&quot; in a way instead of just using the built in hash function. The reason I am using this unwieldy function is because the block-chain file is already generated using those rules so I have to verify the hash of the block in the .txt file with the one I generate from this function. If I were generating the block-chain, I would use the built in method."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 1, "creation_date": 1533070000, "post_id": 51621311, "comment_id": 90209109, "body": "If you need to compare to an existing hash value generated by something else, then you have to implement it exactly the same. Efficiency is irrelevant if you are forced to an existing standard. You have to use it, no matter what it is. Could implement as C extension for a little boost, but not much can be done about that."}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 3, "last_activity_date": 1533068607, "last_edit_date": 1533068607, "creation_date": 1533067827, "answer_id": 51621311, "question_id": 51620938, "link": "https://stackoverflow.com/questions/51620938/ruby-help-improving-hashing-algorithm/51621311#51621311", "title": "Ruby: Help improving hashing algorithm", "body": "<p>First and foremost, it is extremely unlikely that you are going to create anything that is more efficient than simply using <code>String#hash</code>. This is a case of you trying to build a better mousetrap. </p>\n\n<p>Honestly, your hashing algorithm is very inefficient. The entire point of a hash is to be a fast, low-overhead way of quickly getting a \"unique\" (as unique as possible) integer to represent any object to avoid comparing by values.</p>\n\n<p>Using that as a premise, if you start doing any type of intense computation in a hash algorithm, it is already counter-productive. Once you start implementing <code>modulo</code> and <code>pow</code> functions, it is inefficient.</p>\n\n<p>Usually best practice involves taking a value(s) of the object that can be represented as integers, and performing bit operations on them, typically with prime numbers to help reduce hash collisions.</p>\n\n<pre><code>def hash\n  h = value1 ^ 393\n  h += value2 ^ 17\n  h\nend\n</code></pre>\n\n<p>In your example, you are for some reason forcing the hash to the max value of a 16-bit unsigned integer, when typically 32-bits is used, although if you are comparing on the Ruby-side, this would be 31-bits due to how Ruby masks Fixnum values. Fixnum was deprecated on the Ruby side as it should have been, but internally the same threshold exists between what how a <code>Bignum</code> and <code>Fixnum</code> are handled. The <code>Integer</code> class simply provides one interface on the Ruby side, as those two really should never have been exposed outside of the C code.</p>\n\n<p>In your specific example using strings, I would simply symbolize them. This guarantees a quick and efficient way that determines if two strings are equal without hardly any overhead, and comparing 2 symbols is the exact same as comparing 2 integers. There is a caveat to this method if you are comparing a vast number of strings. Once a symbol is created, it is alive for the life of the program. Any additional strings that equal to it will return the same symbol, but you cannot remove the memory of the symbol (just a few bytes) for as long as the program runs. Not good if using this method to compare thousands and thousands of unique strings.</p>\n"}], "owner": {"reputation": 33, "user_id": 7154971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce3389ce277bf316a11564983b192feb?s=128&d=identicon&r=PG&f=1", "display_name": "B. Abriatis", "link": "https://stackoverflow.com/users/7154971/b-abriatis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533068607, "creation_date": 1533066174, "question_id": 51620938, "link": "https://stackoverflow.com/questions/51620938/ruby-help-improving-hashing-algorithm", "title": "Ruby: Help improving hashing algorithm", "body": "<p>I am still relatively new to ruby as a language, but I know there are a lot of convenience methods built into the language. I am trying to generate a \"hash\" to check against in a low level block-chain verifier and I am wondering if there are any \"convenience methods\" that I could you to try to make this hashing algorithm more efficient. I think I can make this more efficient by utilizing ruby's max integer size, but I'm not sure. </p>\n\n<p>Below is the current code which takes in a string to hash, unpacks it into an array of UTF-8 values, does computationally intensive math to each one of those values, adds up all of those values after the math is done to them, takes that value modulo 65,536, and then returns the hex representation of that value.</p>\n\n<pre><code>def generate_hash(string)\n  unpacked_string = string.unpack('U*')\n  sum = 0\n  unpacked_string.each do |x|\n    sum += (x**2000) * ((x + 2)**21) - ((x + 5)**3)\n  end\n  new_val = sum % 65_536 # Gives a number from 0 to 65,535\n  new_val.to_s(16)\nend    \n</code></pre>\n\n<p>On very large block-chains there is a very large performance hit which I am trying to get around. Any help would be great!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage"], "owner": {"reputation": 501, "user_id": 2551298, "user_type": "registered", "accept_rate": 8, "profile_image": "https://graph.facebook.com/100000108838340/picture?type=large", "display_name": "Chris Root", "link": "https://stackoverflow.com/users/2551298/chris-root"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533062865, "creation_date": 1533062865, "question_id": 51620151, "link": "https://stackoverflow.com/questions/51620151/rails-active-storage-without-asset-pipeline", "title": "Rails Active Storage without asset pipeline", "body": "<p>I am switching from Paperclip to Active Storage in a Rails project. I have successfully done the migration. I have confirmed in a view that my model has an attachment but I'm getting an error which I think is regarding files Active Storage expects to be in the asset pipeline. This project doesn't use the asset pipeline.</p>\n\n<p>So when I do the following in the view.</p>\n\n<pre><code>&lt;%= image_tag @Entryform.logo %&gt;\n</code></pre>\n\n<p>I get a valid tag with a URL but then things go wrong.</p>\n\n<p>Console output is </p>\n\n<pre><code>Started GET \"/assets/jquery_ujs.self.js?body=1\" for 127.0.0.1 at 2018-07-31 10:56:30 -0500\nProcessing by ActiveStorage::BlobsController#show as HTML\n  Parameters: {\"signed_id\"=&gt;\"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBCdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--18406ee7b69394ebf89cb81d67eb2513b2ee6e45\", \"filename\"=&gt;\"2-1\"}\nStarted GET \"/assets/jquery.self.js?body=1\" for 127.0.0.1 at 2018-07-31 10:56:30 -0500\nActiveStorage::Blob Load (12.0ms)  SELECT  `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 2 LIMIT 1\nCompleted 500 Internal Server Error in 15ms (ActiveRecord: 12.0ms)\n</code></pre>\n\n<p>I ran the above query and it returns the correct record. That those js files are not in the asset pipeline is the only thing I see wrong here.</p>\n\n<p>The error I'm getting is the following.</p>\n\n<pre><code>NoMethodError - undefined method `url_expires_in' for nil:NilClass:\n</code></pre>\n\n<p>Is it possible to do this without the asset pipeline or is this error due to something else?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1533056185, "post_id": 51618431, "comment_id": 90202530, "body": "Have you looked into the <a href=\"https://guides.rubyonrails.org/active_record_validations.html\" rel=\"nofollow noreferrer\">:scope</a> option?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1533056302, "post_id": 51618431, "comment_id": 90202599, "body": "Check if this can help: <a href=\"https://stackoverflow.com/questions/42495133/rails-validation-if-one-condition-is-true\" title=\"rails validation if one condition is true\">stackoverflow.com/questions/42495133/&hellip;</a>"}, {"owner": {"reputation": 435, "user_id": 5136223, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Wl5tRylDc9g/AAAAAAAAAAI/AAAAAAAABJQ/ayueeKi75iw/photo.jpg?sz=128", "display_name": "Fernando Maymone", "link": "https://stackoverflow.com/users/5136223/fernando-maymone"}, "edited": false, "score": 0, "creation_date": 1533056556, "post_id": 51618431, "comment_id": 90202714, "body": "Thanks Gian. It can help. In my case, I will need for each type of source, a different validation."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1533070738, "post_id": 51618431, "comment_id": 90209419, "body": "@FernandoMaymone then maybe look into <a href=\"https://api.rubyonrails.org/?q=with_options\" rel=\"nofollow noreferrer\"><code>with_options</code></a> too"}], "owner": {"reputation": 435, "user_id": 5136223, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Wl5tRylDc9g/AAAAAAAAAAI/AAAAAAAABJQ/ayueeKi75iw/photo.jpg?sz=128", "display_name": "Fernando Maymone", "link": "https://stackoverflow.com/users/5136223/fernando-maymone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1533056546, "answer_count": 0, "score": 0, "last_activity_date": 1533058245, "creation_date": 1533055975, "last_edit_date": 1533058245, "question_id": 51618431, "link": "https://stackoverflow.com/questions/51618431/validate-uniquiness-before-save-with-condition", "closed_reason": "Duplicate", "title": "Validate uniquiness before save, with condition", "body": "<p>I have a class called JobOffer that belongs to a Source. Like this: </p>\n\n<pre><code> class JobOffer &lt; ApplicationRecord\n    include SoftDeletable\n    belongs_to :source\n    validates :email, uniqueness: true\n    validates :title, presence: true, if: :unique_from_source?\n\n    #for each kind of source, we will have uniquiness validation\n    def unique_from_source?\n\n      if self.source.is_a? WeWorkRemotelySource\n          we_work_remotely_uniquiness\n      end\n    end\n\n    def we_work_remotely_uniquiness\n\n    end\nend\n</code></pre>\n\n<p>I want to, depending on the type of the Source make some validations before save, to avoid duplicate fields. In this specific case, I want that, if: </p>\n\n<pre><code>self.source.is_a? WeWorkRemotelySource\n</code></pre>\n\n<p>Validates if the title AND the email are the same. If the title and email are the same we will NOT SAVE this entity. This is the rule of uniquiness for this specific case. </p>\n\n<p>How can I do this? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "best-in-place"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533055443, "post_id": 51618134, "comment_id": 90202151, "body": "What does &quot;(&lt;.b&gt;test&lt;./b&gt;) works (<b>test</b>)&quot; mean? Your question is ambiguously worded, and the title doesn&#39;t match the question (I think? ... Since you&#39;re actually saying that <code>sanitize</code> works, but <code>best_in_place</code> doesn&#39;t?)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533055604, "post_id": 51618134, "comment_id": 90202236, "body": "What input are you entering? (Suggestion: Write this formatted <code>as code</code> to avoid any ambiguity.) What data is being rendered in the HTML? (Suggestion: Again, write this formatted <code>as code</code> to avoid any ambiguity.) What are you expecting? What&#39;s the difference between the expectation and reality?"}, {"owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533055704, "post_id": 51618134, "comment_id": 90202289, "body": "I tried to mention what exactly I mean. You are right. Sanitize does work, I guess you are also right about best_in_place. I&#39;m really thinking about switching the inline-editing gem, since I have trouble doing multiple things with it. However, as the documentation states sanitize should work in the way I implemented it."}, {"owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533056045, "post_id": 51618134, "comment_id": 90202445, "body": "@TomLord updated my question. Hope this helps."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533056117, "post_id": 51618134, "comment_id": 90202490, "body": "Are you saying that the <b>jQuery input box, provided by <code>best_in_place</code></b> does not sanitize the HTML tags? (In which case, what has this question got to do with Rails&#39; <code>sanitize</code> method?)"}, {"owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533056330, "post_id": 51618134, "comment_id": 90202613, "body": "Sorry if I might have asked the question the wrong way. I guess yes, that is what I mean. (Since I am logged in and I use the best_in_place method you might be correct)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1533056443, "post_id": 51618134, "comment_id": 90202657, "body": "This is why we ask for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (emphasis here is on <i>Minimal</i>) on StackOverflow. If I understand correctly, your problem could be described by <b>one</b> line of code: <code>&lt;%=best_in_place @post, :body, :as =&gt; :textarea %&gt;</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533056695, "post_id": 51618134, "comment_id": 90202777, "body": "Are you saying that the <code>best_on_place</code> actually renders it in bold? Or does it render escaped text, like <code>&amp;ltb&amp;gt ipsum &amp;lt&#47;b&amp;gt</code>? In the case of the latter, that&#39;s correct behaviour. In other words, I&#39;m unsure what you mean by <i>&quot;doesn&#39;t get sanitized I guess&quot;</i>."}, {"owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1533056868, "post_id": 51618134, "comment_id": 90202864, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/177123/discussion-between-benl96-and-tom-lord\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "edited": false, "score": 1, "creation_date": 1533061092, "post_id": 51619709, "comment_id": 90204950, "body": "Yes! That solved my Issue. Thank you for mentioning this!"}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 1, "last_activity_date": 1533061028, "creation_date": 1533061028, "answer_id": 51619709, "question_id": 51618134, "link": "https://stackoverflow.com/questions/51618134/ruby-on-rails-best-in-place-sanitize-option-doesnt-work-properly/51619709#51619709", "title": "Ruby on Rails - best_in_place sanitize option doesn&#39;t work properly", "body": "<p>It seems there is an undocumented option:</p>\n\n<pre><code>raw: true\n</code></pre>\n\n<p>That will enable pure HTML to be rendered, without converting it to plain text before display. Someone else posted about the same problem on Github. See here:</p>\n\n<p><a href=\"https://github.com/bernat/best_in_place/issues/520\" rel=\"nofollow noreferrer\">https://github.com/bernat/best_in_place/issues/520</a></p>\n"}], "owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 51619709, "answer_count": 1, "score": 0, "last_activity_date": 1533061028, "creation_date": 1533054800, "last_edit_date": 1533055978, "question_id": 51618134, "link": "https://stackoverflow.com/questions/51618134/ruby-on-rails-best-in-place-sanitize-option-doesnt-work-properly", "title": "Ruby on Rails - best_in_place sanitize option doesn&#39;t work properly", "body": "<p>I am using the following code in my view:</p>\n\n<pre><code>&lt;div class=\"col-12 col-md-8\"&gt;\n    &lt;% if current_user == @post.user || current_user.try(:admin?) %&gt;\n        &lt;%=best_in_place @post, :body, :as =&gt; :textarea, inner_class: 'form-control', ok_button: 'update', ok_button_class: 'btn btn-outline-success btn-sm'%&gt;\n    &lt;% else %&gt;\n        &lt;p class=\"postbody\"&gt;&lt;%= sanitize @post.body %&gt;&lt;/p&gt;\n    &lt;% end %&gt;\n    &lt;div class=\"py-3\"&gt;\n</code></pre>\n\n<p>Input text:</p>\n\n<pre><code>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.\n</code></pre>\n\n<p>Expected: #code blocks doesn't accept html tags as it seems</p>\n\n<p>Lorem <b> ipsum </b> dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.</p>\n\n<p>Behavior</p>\n\n<pre><code>Lorem &lt;b&gt; ipsum &lt;/b&gt; dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.\n</code></pre>\n\n<p>If I am logged out my post.body gets sanitized.\n However, if I am logged in the text accepts html tags. (doesn't get sanitized I guess)\nIn the best_in_place documentation it says sanitize is set to true by default. I tried <code>sanitize: true</code> as well, still doesn't work.</p>\n\n<p>Does anyone know why it behaves like this?</p>\n\n<p>Best regards</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 2, "creation_date": 1533055033, "post_id": 51618032, "comment_id": 90201959, "body": "This seems like an <a href=\"https://meta.stackexchange.com/a/66378/140350\">XY problem</a>. It sounds like the problem you&#39;re trying to solve is that you&#39;re getting <code>\\u0000</code> in your params where you don&#39;t want it, but the question you&#39;ve asked is instead about how to implement a specific solution, which may or may not be the correct solution. I suggest expanding your question to describe the actual problem you have."}, {"owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1533056009, "post_id": 51618032, "comment_id": 90202430, "body": "Hi @JordanRunning the problem is that before I upgrade rails 5, I was able to pass in nil in my filters. Which I was able to pass down my filtering service, which would generate <code>is null</code> query. But now after the upgrade to rails5, when I send <code>nil</code> from client, blank <code>&#39;&#39;</code> arrives at the back-end and the service below is producing wrong query which compares some column to <code>&#39;&#39;</code> which is not the same thing. So I m trying to have this &#39;special&#39; case when they pass it, it will produce <code>is null</code> query"}], "answers": [{"comments": [{"owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "edited": false, "score": 0, "creation_date": 1533055722, "post_id": 51618164, "comment_id": 90202295, "body": "Hi @SRack I like both of your solutions, ideally I&#39;d like to keep the original params unmodified. I also tried second solution, it does not modify the hash, the first one works. thanks"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "edited": false, "score": 1, "creation_date": 1533056211, "post_id": 51618164, "comment_id": 90202546, "body": "Sorry, I was missing the <code>!</code> from <code>transform_values</code> - I&#39;ve updated the second solution now. Have also updated so your original params are preserved, while this returns the updated hash (as you want it). If you do want to modify the existing hash, remove the <code>dup</code>. Hopefully that does it for you @Remember_me :)"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "edited": false, "score": 0, "creation_date": 1533057852, "post_id": 51618164, "comment_id": 90203332, "body": "@Remember_me - I&#39;ve updated again, the last iteration was also removing the param you wanted to keep. Would recommend using the third, readable version."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1533136475, "post_id": 51618164, "comment_id": 90238004, "body": "What&#39;s the reasoning behind using <code>params.dup.transform_values!</code> instead of <code>params.transform_values</code> (no <code>!</code>)? The point of <code>transform_values!</code> is to modify the original object, but <code>dup</code> makes a copy of the object so the original isn&#39;t modified."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1533140545, "post_id": 51618164, "comment_id": 90240488, "body": "It <i>was</i> for the recursive call to the method @JordanRunning. One of the previous iterations required it, though I&#39;ve just tested it out and it seems this is no longer the case (thought it was still necessary). Thanks for the note - I&#39;ve updated to reflect this."}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 3, "last_activity_date": 1533140554, "last_edit_date": 1533140554, "creation_date": 1533054924, "answer_id": 51618164, "question_id": 51618032, "link": "https://stackoverflow.com/questions/51618032/iterate-over-nested-hash-and-modify-values-in-place/51618164#51618164", "title": "iterate over nested hash and modify values in place", "body": "<p>So, the problem you're facing is that you're modifying a local variable <code>value</code>. Were you to pass the entire params hash (or sub-hash) to <code>traverse</code>, you can then update the values as so:</p>\n\n<pre><code>def traverse(params)\n  params.each do |k, v|\n    traverse(v) if v.is_a? Hash        \n    params[k] = nil if v == '\\u0000'\n  end\nend\n\n# =&gt; {:filters=&gt;{:user=&gt;{:disabled_at=&gt;nil}, :importan_param=&gt;1}}\n</code></pre>\n\n<p>You can tidy this a little using <a href=\"https://ruby-doc.org/core-2.4.0/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\"><code>transform_values</code></a> if you're Ruby > 2.4:</p>\n\n<pre><code>def traverse(params)\n  params.dup.transform_values { |v| v == \"\\\\u0000\" ? nil : v.is_a?(Hash) ? traverse(v) : v }\nend\n\ntraverse(params)\n# =&gt; {:filters=&gt;{:user=&gt;{:disabled_at=&gt;nil}, :importan_param=&gt;1}}\nparams\n# =&gt; {:filters=&gt;{:user=&gt;{:disabled_at=&gt;\"\\\\u0000\"}, :importan_param=&gt;1}}\n</code></pre>\n\n<p>Or, far more readable:</p>\n\n<pre><code>def traverse(params)\n  params.dup.transform_values do |v| \n    next traverse(v) if v.is_a?(Hash)\n    v == \"\\\\u0000\" ? nil : v\n  end\nend\n</code></pre>\n\n<p>Hope that's useful - let me know how you get on or if you have any questions.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1533055125, "creation_date": 1533055125, "answer_id": 51618223, "question_id": 51618032, "link": "https://stackoverflow.com/questions/51618032/iterate-over-nested-hash-and-modify-values-in-place/51618223#51618223", "title": "iterate over nested hash and modify values in place", "body": "<p>You are abusing <code>each</code> for mapping. Mapping is to be done with <code>map</code>, <code>each</code> is for <em>iterating</em>.</p>\n\n<pre><code>def fix(hash)\n  hash.map do |k, v|\n    [k, case v\n        when Hash then fix(v)\n        when '\\u0000' then nil\n        else v\n        end]\n  end.to_h\nend\n</code></pre>\n"}], "owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1168, "favorite_count": 0, "accepted_answer_id": 51618164, "answer_count": 2, "score": 2, "last_activity_date": 1533140554, "creation_date": 1533054410, "question_id": 51618032, "link": "https://stackoverflow.com/questions/51618032/iterate-over-nested-hash-and-modify-values-in-place", "title": "iterate over nested hash and modify values in place", "body": "<p>I am trying to 'monkey patch' some code we have deployed without breaking the API consumer, basically I want to find param with a key value pair, with value equaling certain value('\\u0000') and set it to nil, here is what I have :</p>\n\n<pre><code>def traverse_param(key, value)\n  if value.is_a? Hash\n    value.each do |k, v|\n      return traverse_param(k, v)\n    end\n  end\n  if value == '\\u0000'\n     value = nil\n  end\nend\n</code></pre>\n\n<p>In rails 5 I cannot pass <code>nil</code> to the controller as it will be cast to <code>''</code> and I need to pass the <code>nil</code> in param onto the service doing the work below.</p>\n\n<p>Now since I can have nested params this is why I check if the param value is a <code>Hash</code>. I worked with this example :</p>\n\n<pre><code>params = {:filters=&gt;{:user=&gt;{:disabled_at=&gt;\"\\u0000\"}, :importan_param=&gt;1}}\nparams.each { |k, v| traverse_param(k,v)  }\n</code></pre>\n\n<p>I m trying to modify the value in place, but it does not seem to work? The code is entering the right places when I debug, but it's not producing desired outcome. Any ideas?</p>\n"}, {"tags": ["ruby", "postgresql", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1533054333, "post_id": 51617779, "comment_id": 90201581, "body": "Why don&#39;t you load all tickets for all rooms in one query? Please elaborate on how your fire the queries and how the result is used."}, {"owner": {"reputation": 99, "user_id": 9435011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-surR8ciCRkU/AAAAAAAAAAI/AAAAAAAAB9E/5G43kwUd2Io/photo.jpg?sz=128", "display_name": "Mohammed Sayer", "link": "https://stackoverflow.com/users/9435011/mohammed-sayer"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1533054593, "post_id": 51617779, "comment_id": 90201700, "body": "i am using a for loop to get number of rooms to display and from inside the loop i am calling that query using the room id as the the room number which is currently in the loop @spickermann, the reason i do this to get the count of  tickets only for that specific room"}, {"owner": {"reputation": 518, "user_id": 8905332, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qSGD6IOatlQ/AAAAAAAAAAI/AAAAAAAAAOA/lcytjZkeivA/photo.jpg?sz=128", "display_name": "ldeld", "link": "https://stackoverflow.com/users/8905332/ldeld"}, "edited": false, "score": 1, "creation_date": 1533054918, "post_id": 51617779, "comment_id": 90201887, "body": "Can you edit your question to show us how you select the rooms you have to display?"}, {"owner": {"reputation": 99, "user_id": 9435011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-surR8ciCRkU/AAAAAAAAAAI/AAAAAAAAB9E/5G43kwUd2Io/photo.jpg?sz=128", "display_name": "Mohammed Sayer", "link": "https://stackoverflow.com/users/9435011/mohammed-sayer"}, "edited": false, "score": 0, "creation_date": 1533055238, "post_id": 51617779, "comment_id": 90202052, "body": "i have updated the question @Ideld"}, {"owner": {"reputation": 803, "user_id": 3458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EtWor.jpg?s=128&g=1", "display_name": "Arye Eidelman", "link": "https://stackoverflow.com/users/3458162/arye-eidelman"}, "edited": false, "score": 0, "creation_date": 1533060710, "post_id": 51617779, "comment_id": 90204758, "body": "Maybe you can add an association that does a join when getting <code>Room.all</code> so that it has an <code>open_tickets_count</code> attribute. <a href=\"https://guides.rubyonrails.org/association_basics.html#options-for-belongs-to-counter-cache\" rel=\"nofollow noreferrer\">rails belongs-to counter-cache</a> may be what you need."}, {"owner": {"reputation": 803, "user_id": 3458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EtWor.jpg?s=128&g=1", "display_name": "Arye Eidelman", "link": "https://stackoverflow.com/users/3458162/arye-eidelman"}, "edited": false, "score": 1, "creation_date": 1533061257, "post_id": 51617779, "comment_id": 90205042, "body": "more on that here <a href=\"https://rubyplus.com/articles/3221-Counter-Cache-Column-in-Rails-5\" rel=\"nofollow noreferrer\">rubyplus.com..Counter-Cache-Column-in-Rails-5</a>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1533062762, "post_id": 51617779, "comment_id": 90205741, "body": "In the controller you set <code>@room</code>, but the view uses &#180;@rooms&#180;. That doesn&#39;t make sense."}, {"owner": {"reputation": 151, "user_id": 5568045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e61e6cb6006fa4bf4bb5d2c449d37e4?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan", "link": "https://stackoverflow.com/users/5568045/bogdan"}, "edited": false, "score": 0, "creation_date": 1533075363, "post_id": 51617779, "comment_id": 90210953, "body": "Can you show definition of <code>@rooms</code> instance var?"}, {"owner": {"reputation": 99, "user_id": 9435011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-surR8ciCRkU/AAAAAAAAAAI/AAAAAAAAB9E/5G43kwUd2Io/photo.jpg?sz=128", "display_name": "Mohammed Sayer", "link": "https://stackoverflow.com/users/9435011/mohammed-sayer"}, "reply_to_user": {"reputation": 151, "user_id": 5568045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e61e6cb6006fa4bf4bb5d2c449d37e4?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan", "link": "https://stackoverflow.com/users/5568045/bogdan"}, "edited": false, "score": 0, "creation_date": 1533141325, "post_id": 51617779, "comment_id": 90240941, "body": "<code>def all_rooms   @rooms = Room.all  end</code>  ` before_action :all_rooms, only: [:table_view, :rooms_import]` this is inside rooms controller @Bogdan"}, {"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1542107846, "post_id": 51617779, "comment_id": 93441408, "body": "Please check the spelling of your title: <a href=\"https://wiki.postgresql.org/wiki/Identity_Guidelines\" rel=\"nofollow noreferrer\">wiki.postgresql.org/wiki/Identity_Guidelines</a>"}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 9435011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-surR8ciCRkU/AAAAAAAAAAI/AAAAAAAAB9E/5G43kwUd2Io/photo.jpg?sz=128", "display_name": "Mohammed Sayer", "link": "https://stackoverflow.com/users/9435011/mohammed-sayer"}, "edited": false, "score": 0, "creation_date": 1533055483, "post_id": 51618280, "comment_id": 90202171, "body": "No i dont, i have done <code>Room.all</code> in my controller and using <code>rooms.each</code> in  the view and get the id in the view itself @spickermann"}, {"owner": {"reputation": 803, "user_id": 3458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EtWor.jpg?s=128&g=1", "display_name": "Arye Eidelman", "link": "https://stackoverflow.com/users/3458162/arye-eidelman"}, "edited": false, "score": 1, "creation_date": 1533056548, "post_id": 51618280, "comment_id": 90202711, "body": "<code>Ticket.all.group(:room_id).count</code> maybe? it seems like you&#39;re getting the data for all rooms, are you?"}, {"owner": {"reputation": 99, "user_id": 9435011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-surR8ciCRkU/AAAAAAAAAAI/AAAAAAAAB9E/5G43kwUd2Io/photo.jpg?sz=128", "display_name": "Mohammed Sayer", "link": "https://stackoverflow.com/users/9435011/mohammed-sayer"}, "edited": false, "score": 0, "creation_date": 1533056742, "post_id": 51618280, "comment_id": 90202800, "body": "changing the helper query wont help, because i use that helper query in view it will anyways fire the helper query for n number of times as i am calling that query inside the for loop"}, {"owner": {"reputation": 99, "user_id": 9435011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-surR8ciCRkU/AAAAAAAAAAI/AAAAAAAAB9E/5G43kwUd2Io/photo.jpg?sz=128", "display_name": "Mohammed Sayer", "link": "https://stackoverflow.com/users/9435011/mohammed-sayer"}, "edited": false, "score": 0, "creation_date": 1533056933, "post_id": 51618280, "comment_id": 90202896, "body": "if i create an array how will i match the index value to that specific room number to get the count value in the count variable inside my view, i have updated my question showing how am i using my helper method query inside my view @spickermann"}, {"owner": {"reputation": 99, "user_id": 9435011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-surR8ciCRkU/AAAAAAAAAAI/AAAAAAAAB9E/5G43kwUd2Io/photo.jpg?sz=128", "display_name": "Mohammed Sayer", "link": "https://stackoverflow.com/users/9435011/mohammed-sayer"}, "reply_to_user": {"reputation": 803, "user_id": 3458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EtWor.jpg?s=128&g=1", "display_name": "Arye Eidelman", "link": "https://stackoverflow.com/users/3458162/arye-eidelman"}, "edited": false, "score": 0, "creation_date": 1533057087, "post_id": 51618280, "comment_id": 90202969, "body": "yes in my view i am getting all the data of my room table, because i have to display it using multiple filters such as floor wise and etc.. @AryeDovEidelman"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1533057211, "post_id": 51618280, "comment_id": 90203034, "body": "Please show how you filter the rooms in the controller."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1533055362, "creation_date": 1533055362, "answer_id": 51618280, "question_id": 51617779, "link": "https://stackoverflow.com/questions/51617779/ruby-on-rails-postgres-query/51618280#51618280", "title": "Ruby-on-rails Postgres query", "body": "<p>I assume that you have a variable that contains all room ids. Then you can use <code>where</code> with this array and <code>count</code> with <code>group</code>:</p>\n\n<pre><code>Ticket.where(room_id: room_ids).group(:room_id).count\n</code></pre>\n\n<p>The return will look like this:</p>\n\n<pre><code>{ 1 =&gt; 5, 2 =&gt; 3 }\n</code></pre>\n\n<p>Which would mean there are 5 tickets for the room 1 and 3 tickets for the 2.</p>\n"}], "owner": {"reputation": 99, "user_id": 9435011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-surR8ciCRkU/AAAAAAAAAAI/AAAAAAAAB9E/5G43kwUd2Io/photo.jpg?sz=128", "display_name": "Mohammed Sayer", "link": "https://stackoverflow.com/users/9435011/mohammed-sayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542232265, "creation_date": 1533053515, "last_edit_date": 1542232265, "question_id": 51617779, "link": "https://stackoverflow.com/questions/51617779/ruby-on-rails-postgres-query", "title": "Ruby-on-rails Postgres query", "body": "<p>I have a ruby on rails application for hotels, the application has a room page. Hotel rooms can have tickets open for them of different sorts, in my room view, the room number are displayed and i am using this query inside my helper to get the count of tickets for individual room</p>\n\n<pre><code>helper/room.rb\nSELECT COUNT(*) FROM \"tickets\" WHERE \"tickets\".\"room_id\" = ? AND (status = ? OR status = ? )\n\nroom.slim\n\n- @rooms.each do |floor_number, rooms|\n\n  - if rooms.present?\n    h1.separator\n      - if (@current_view.eql? \"room_type\") || (params[:action].eql? \"room_type\")\n        span= floor_number\n      - else\n        span= \"Floor-#{floor_number}\"\n\n   .cards-container\n      - rooms.each do |room|\n\n= link_to get_show_page_url(room) do\n            .col-md-3.room-card_room.new-floor-other{ style=\"background-color:#{card_background_color(room, @maintenance_type, @inspection_type)}\" }\n              .new-floor-inner\n                  - if room.occupy_or_dnd? &amp;&amp; (!@current_view.eql? \"maintenance\") &amp;&amp; (!@current_view.eql? \"inspection\")\n                    span\n                      - if room.dnd?\n                        = image_tag('dnd', class: \"guest-occupy-img\")\n                      - else\n                        = image_tag('man_to_white', class: \"guest-occupy-img\")\n\n                  h4= room.location\n                  - if (@current_view.eql? \"maintenance\") || (@current_view.eql? \"inspection\")\n                    h6.room_status\n                      | (\n                      = last_maintained(room, @maintenance_type, @inspection_type)\n                      | )\n\n              span.room_hilton_honors= room.hilton_honors\n              - count = room.open_tickets_count || 0\n              - if count &gt; 0 &amp;&amp; (!@current_view.eql? \"maintenance\") &amp;&amp; (!@current_view.eql? \"inspection\")\n                span.circle = count\n\nroom_controller\nbefore_action :get_room, only: [:show, :update]\ndef get_room\n      @room = Room.find_by_id(params[:id])\n      @featured_tickets = ImportTicket.where(request_type: \"PREVENTIVE MAINTENANCE\", featured:true)\n    end\n</code></pre>\n\n<p>the <code>room.open_tickets_count</code> is the query which fires multiple times and the <code>open_tickets</code> is defined inside the helper and the count displays the number of ticket for that room</p>\n\n<p>this works fine but in terms of performance, its creates more processing time because this single query is fired multiple times in a single request. As if there are 100 rooms the query is fired for 100 times to check the total count of tickets for each room</p>\n\n<p>Is there a way through which i can achieve this with good performance time?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 803, "user_id": 3458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EtWor.jpg?s=128&g=1", "display_name": "Arye Eidelman", "link": "https://stackoverflow.com/users/3458162/arye-eidelman"}, "edited": false, "score": 0, "creation_date": 1533052191, "post_id": 51617212, "comment_id": 90200337, "body": "Is that the last rout in routes.rb? It should be. As they match in order."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9899928"}, "reply_to_user": {"reputation": 803, "user_id": 3458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EtWor.jpg?s=128&g=1", "display_name": "Arye Eidelman", "link": "https://stackoverflow.com/users/3458162/arye-eidelman"}, "edited": false, "score": 0, "creation_date": 1533056228, "post_id": 51617212, "comment_id": 90202558, "body": "@AryeDovEidelman i had not put it in the end. Now it works fine. Is it possible to flash a messge that route doesnt exist and user is redirected to root_url?"}], "answers": [{"tags": [], "owner": {"reputation": 432, "user_id": 5529252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9b93c1cab573e87ee3080d1baa70ee?s=128&d=identicon&r=PG&f=1", "display_name": "Bodh1004", "link": "https://stackoverflow.com/users/5529252/bodh1004"}, "is_accepted": true, "score": 3, "last_activity_date": 1533053910, "creation_date": 1533053910, "answer_id": 51617887, "question_id": 51617212, "link": "https://stackoverflow.com/questions/51617212/redirect-to-root-page-if-route-doesnt-exist-in-rails/51617887#51617887", "title": "Redirect to root page if route doesnt exist in rails", "body": "<p>Put this line at bottom of your routes.rb </p>\n\n<pre><code>match \"*path\" =&gt; redirect(\"/\")\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9899928"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 51617887, "answer_count": 1, "score": 1, "last_activity_date": 1533056283, "creation_date": 1533051540, "last_edit_date": 1533056283, "question_id": 51617212, "link": "https://stackoverflow.com/questions/51617212/redirect-to-root-page-if-route-doesnt-exist-in-rails", "title": "Redirect to root page if route doesnt exist in rails", "body": "<p>application_controller.rb</p>\n\n<pre><code>def index\n redirect_to root_url\nend\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>match \"*path\" =&gt; \"play#home\", via: [:get, :post]\n</code></pre>\n\n<p>the issue i am facing is it redirects all routes to the root_url even if the route exist.</p>\n\n<p>Any idea where I make a mistake.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "mailto"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10161343, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9czNH1Mvyr8/AAAAAAAAAAI/AAAAAAAAAJc/sj5Or5BVGEs/photo.jpg?sz=128", "display_name": "Anthony Healy", "link": "https://stackoverflow.com/users/10161343/anthony-healy"}, "edited": false, "score": 0, "creation_date": 1533117501, "post_id": 51617135, "comment_id": 90224999, "body": "thank you so much,, this worked an absolute treat."}, {"owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "reply_to_user": {"reputation": 1, "user_id": 10161343, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9czNH1Mvyr8/AAAAAAAAAAI/AAAAAAAAAJc/sj5Or5BVGEs/photo.jpg?sz=128", "display_name": "Anthony Healy", "link": "https://stackoverflow.com/users/10161343/anthony-healy"}, "edited": false, "score": 0, "creation_date": 1533118225, "post_id": 51617135, "comment_id": 90225462, "body": "I&#39;m glad I could help!"}], "tags": [], "owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "is_accepted": false, "score": 5, "last_activity_date": 1533052067, "last_edit_date": 1533052067, "creation_date": 1533051306, "answer_id": 51617135, "question_id": 51616797, "link": "https://stackoverflow.com/questions/51616797/ruby-mailto-adding-subject-and-body/51617135#51617135", "title": "Ruby mailto: adding subject and body", "body": "<p>You can use also ActionView helper <code>mail_to</code> which has additional <code>html_options</code> attributes for subject, body etc. </p>\n\n<p><pre><code>&lt;%= mail_to @article.user.email, \"Click to arrange swap\", subject: @article.artist, body: \"Your content #{request.original_url}\" %></pre></code></p>\n\n<p>For more info, you can look up to this <a href=\"https://apidock.com/rails/ActionView/Helpers/UrlHelper/mail_to\" rel=\"nofollow noreferrer\">link</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10161343, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9czNH1Mvyr8/AAAAAAAAAAI/AAAAAAAAAJc/sj5Or5BVGEs/photo.jpg?sz=128", "display_name": "Anthony Healy", "link": "https://stackoverflow.com/users/10161343/anthony-healy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "closed_date": 1533052041, "answer_count": 1, "score": 0, "last_activity_date": 1533052067, "creation_date": 1533050317, "last_edit_date": 1533051088, "question_id": 51616797, "link": "https://stackoverflow.com/questions/51616797/ruby-mailto-adding-subject-and-body", "closed_reason": "Duplicate", "title": "Ruby mailto: adding subject and body", "body": "<p>I am using the following with an embedded ruby tag to call the logged in users email address so it will populate the 'to' field when it opens the email client. </p>\n\n<pre><code>&lt;h4 align=\"center\"&gt;\n  &lt;%= link_to \"Click to arrange swap\",\n    \"mailto:#{@article.user.email}\", class: \"btn btn-xs btn-primary\"%&gt;\n&lt;/h4&gt;\n</code></pre>\n\n<p>But, I would like to add a subject (<code>article.artist</code>) to the email, and the URL of the page in the body of the email. \nAnyone any ideas. </p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["ruby", "parsing", "treetop"], "answers": [{"comments": [{"owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "edited": false, "score": 0, "creation_date": 1533245569, "post_id": 51618991, "comment_id": 90288311, "body": "Thanks works. But it slows down the parser significantly."}, {"owner": {"reputation": 3830, "user_id": 1177119, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a8513228d202b40141d295e840a4fa8?s=128&d=identicon&r=PG", "display_name": "Josh Voigts", "link": "https://stackoverflow.com/users/1177119/josh-voigts"}, "reply_to_user": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "edited": false, "score": 0, "creation_date": 1533314861, "post_id": 51618991, "comment_id": 90317187, "body": "It might help performance-wise to do <code>((!commentPortString .)* body)+ (!commentPortString .)*</code> instead, or to not match spaces inside <code>commentPortString</code> (I mean move it outside the rule). Just some ideas."}], "tags": [], "owner": {"reputation": 3830, "user_id": 1177119, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a8513228d202b40141d295e840a4fa8?s=128&d=identicon&r=PG", "display_name": "Josh Voigts", "link": "https://stackoverflow.com/users/1177119/josh-voigts"}, "is_accepted": true, "score": 1, "last_activity_date": 1533058163, "creation_date": 1533058163, "answer_id": 51618991, "question_id": 51616062, "link": "https://stackoverflow.com/questions/51616062/ruby-treetop-how-to-include-everything-that-does-not-match-the-grammar/51618991#51618991", "title": "Ruby Treetop how to include everything that does not match the grammar", "body": "<p>It's a common idiom in PEG grammars to repeatedly match any character <code>.</code> that isn't part of a rule <code>!body</code>. Something like this:</p>\n\n<pre><code>rule bodies\n  ((!body .)* body)+ (!body .)*\nend\n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 51618991, "answer_count": 1, "score": 1, "last_activity_date": 1533058163, "creation_date": 1533048026, "question_id": 51616062, "link": "https://stackoverflow.com/questions/51616062/ruby-treetop-how-to-include-everything-that-does-not-match-the-grammar", "title": "Ruby Treetop how to include everything that does not match the grammar", "body": "<p>I am tying to create a treetop grammar. I have created the rules to match sections in the file that are of interest to me.</p>\n\n<pre><code>grammar Sexp\n\n  rule bodies\n    body+\n  end\n\n  rule body\n    commentPortString (ifdef_blocks / interface)+ (!newLine)\n  end\n...\nend\n</code></pre>\n\n<p>How do I run this on a file to extract out the <code>bodies</code> and ignore other sections that I dont care about, or do I need to end up writing rules for those sections also?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 1, "creation_date": 1533046940, "post_id": 51615491, "comment_id": 90196612, "body": "<code>reject { |k, _| %w[created_at updated_at].include? k }</code>. Why not <code>except(&#39;created_at&#39;, &#39;updated_at&#39;)</code>?"}, {"owner": {"reputation": 710, "user_id": 6769558, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6c3dc2b239e077038e9d23b590da5854?s=128&d=identicon&r=PG&f=1", "display_name": "oneWorkingHeadphone", "link": "https://stackoverflow.com/users/6769558/oneworkingheadphone"}, "reply_to_user": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1533047288, "post_id": 51615491, "comment_id": 90196849, "body": "@Leo also works with except and saves a little space, thank you too!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1533047717, "post_id": 51615491, "comment_id": 90197174, "body": "@Leo basically because <code>except</code> is <code>Rails</code> and I try to avoid rails monkeypatching  bullshit whenever possible."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1533046444, "creation_date": 1533046444, "answer_id": 51615491, "question_id": 51615336, "link": "https://stackoverflow.com/questions/51615336/find-only-date-attributes-in-activerecord-object-with-mixed-column-types/51615491#51615491", "title": "Find only date attributes in ActiveRecord object with mixed column types", "body": "<p>If you want to exclude not dates and both <code>timestamp</code>s, you should do it explicitly:</p>\n\n<pre><code>Object.find(x).\n  attributes.\n  reject { |k, _| %w[created_at updated_at].include? k }.\n  select { |_, v| v.is_a? Date }.\n  values.\n  sort.\n  last\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 6769558, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6c3dc2b239e077038e9d23b590da5854?s=128&d=identicon&r=PG&f=1", "display_name": "oneWorkingHeadphone", "link": "https://stackoverflow.com/users/6769558/oneworkingheadphone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 51615491, "answer_count": 1, "score": 0, "last_activity_date": 1533046444, "creation_date": 1533046033, "question_id": 51615336, "link": "https://stackoverflow.com/questions/51615336/find-only-date-attributes-in-activerecord-object-with-mixed-column-types", "title": "Find only date attributes in ActiveRecord object with mixed column types", "body": "<p>I have an ActiveRecord object that has attributes that are either integers or dates. I need to find and return the oldest date (ignoring the created_at and updated_at fields).</p>\n\n<p>I thought I would be able to do a query for only the attributes with a type of date and then sort from there, but either that's not possible or I can't get the syntax right.</p>\n\n<p>I can get the values into an array with <code>Object.find(x).attributes.values.compact</code> but this includes the created_at and updated_at values as well as integers and then I'm still stuck on how to sort the result by date.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533045728, "post_id": 51615198, "comment_id": 90195737, "body": "Check your <code>Gemfile</code>. It probably has a ruby version hardcoded."}, {"owner": {"reputation": 321, "user_id": 7631261, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34c3f5c01682697bbf4c010f477c47f1?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7631261/owen"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1533046670, "post_id": 51615198, "comment_id": 90196424, "body": "i tried hard coding the verion number in the gem file with &quot;ruby &#39;2.5.1&#39;&quot; and typing &quot;bundle install&quot;:     C:\\Sites\\postgresapp&gt;bundle install Your Ruby version is 2.2.6, but your Gemfile specified 2.5.1. anyway the ruby environment i included above appears before loading any particular app. so i think it is not related to the gemfile or any particular project."}], "answers": [{"comments": [{"owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "edited": false, "score": 0, "creation_date": 1533048366, "post_id": 51616051, "comment_id": 90197697, "body": "You may also need to rewire git as the version used by RailsInstaller no longer works."}, {"owner": {"reputation": 321, "user_id": 7631261, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34c3f5c01682697bbf4c010f477c47f1?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7631261/owen"}, "edited": false, "score": 0, "creation_date": 1533057471, "post_id": 51616051, "comment_id": 90203156, "body": "yes i have been having a similar problem with git for a while since i updated but nothing happened in the same way. i have been getting round it by using the git GUI, but it is inconvenient. how to rewire git at the same time?"}, {"owner": {"reputation": 321, "user_id": 7631261, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34c3f5c01682697bbf4c010f477c47f1?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7631261/owen"}, "edited": false, "score": 0, "creation_date": 1533057831, "post_id": 51616051, "comment_id": 90203321, "body": "could you clarify the answer. should i only do ONE of those. how do i adjust the RailsInstaller scripts? (i dont know what a script is). how do i overwrite the old ruby? Should i type this --&gt; &quot;SET RUBY_DIR=%CD%&quot; exactly? I am not an expert in rails so a few more pointers would be useful. thanks"}, {"owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "reply_to_user": {"reputation": 321, "user_id": 7631261, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34c3f5c01682697bbf4c010f477c47f1?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7631261/owen"}, "edited": false, "score": 0, "creation_date": 1533063805, "post_id": 51616051, "comment_id": 90206192, "body": "Sorry, yes, only the backup plus one. The notes at the end refer to the moving pointers approach, not the overwrite approach."}, {"owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "reply_to_user": {"reputation": 321, "user_id": 7631261, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34c3f5c01682697bbf4c010f477c47f1?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7631261/owen"}, "edited": false, "score": 0, "creation_date": 1533065192, "post_id": 51616051, "comment_id": 90206833, "body": "No, that is a line in the setup batch file that you need to edit. If that is too difficult to figure out, maybe you should leave well enough alone and stick to the version of Ruby you have? Sorry, I cannot be more detailed in this venue."}], "tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": false, "score": 0, "last_activity_date": 1533048000, "creation_date": 1533048000, "answer_id": 51616051, "question_id": 51615198, "link": "https://stackoverflow.com/questions/51615198/why-is-rails-not-recognizing-newly-installed-version-of-ruby/51616051#51616051", "title": "Why is Rails not recognizing newly installed version of Ruby?", "body": "<p>RailsInstaller is hard coded to the version of Ruby it installs. \nYou can see this is the lines Ruby: bin and version.\nYou probably installed Ruby 2.5 somewhere else. There are two approaches you can take</p>\n\n<ul>\n<li>Before anything! Backup the RailsInstaller and Sites folders!!!! REALLY!</li>\n<li>Adjust the RailsInstaller scripts to point to your new Ruby</li>\n<li>Overwrite the older Ruby with the newer one and adjust the scripts where paths are different.</li>\n</ul>\n\n<p>The key file is C:\\RailsInstaller\\Rubyx.x.x\\setup_environment.bat</p>\n\n<p>I suspect the key line (near line 11) is</p>\n\n<p>SET RUBY_DIR=%CD%</p>\n\n<p>I <em>think</em> that if this is changed to the path of the Ruby you want to use, operation will shift to that version. Might also need to change</p>\n\n<p>SET ROOT_DIR=%CD%</p>\n\n<p>To point to the RailsInstaller main folder.</p>\n"}], "owner": {"reputation": 321, "user_id": 7631261, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34c3f5c01682697bbf4c010f477c47f1?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7631261/owen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533048000, "creation_date": 1533045649, "question_id": 51615198, "link": "https://stackoverflow.com/questions/51615198/why-is-rails-not-recognizing-newly-installed-version-of-ruby", "title": "Why is Rails not recognizing newly installed version of Ruby?", "body": "<p>I have recently installed ruby 2.5.1 seemingly successfully, however when I type the command <code>ruby -v</code> into the \"Command Prompt with ruby and rails\" it returns the old value of 2.2.6.  The strange thing is that when i type <code>ruby -v</code> into the normal Command prompt it returns the newly installed version 2.5.1.</p>\n\n<p>I feel that I must change the configuration of the Rails environment somehow. </p>\n\n<p>when I open the \"command prompt with ruby and rails\" it shows the following configuration</p>\n\n<pre><code>git:\n  user.name:  USER_NAME_HERE\n  user.email: EMAIL@********.com\n  version:    git version 1.9.4.msysgit.2\n\nruby:\n  bin:        C:/RailsInstaller/Ruby2.0.0/bin/ruby.exe\n  version:    ruby 2.2.6p396 (2016-11-15 revision 56800) [i386-mingw32]\n\nrails:\n  bin:        C:/RailsInstaller/Ruby2.0.0/bin/rails.bat\n  version:    Rails 5.1.6\n</code></pre>\n\n<p>How do I get Rails to recognize the newly installed version of ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "eager-loading"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1533041230, "post_id": 51613295, "comment_id": 90192687, "body": "<code>joins(element: :images)</code> should probably do."}, {"owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "edited": false, "score": 0, "creation_date": 1533042509, "post_id": 51613295, "comment_id": 90193580, "body": "I think <code>includes(element: :images)</code> is more appropriate"}, {"owner": {"reputation": 405, "user_id": 5639287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2da4e9be5bbf048854f4e1621bd193ee?s=128&d=identicon&r=PG&f=1", "display_name": "code monkey", "link": "https://stackoverflow.com/users/5639287/code-monkey"}, "reply_to_user": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "edited": false, "score": 0, "creation_date": 1533046208, "post_id": 51613295, "comment_id": 90196092, "body": "Both are returning active record association relation. What am I missing?  @LuizE. I was using joins for select.  <code>Measurement::ActiveRecord_AssociationRelation</code>"}, {"owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "edited": false, "score": 0, "creation_date": 1533046514, "post_id": 51613295, "comment_id": 90196313, "body": "did you do <code>@element.measurements.includes(images: :measurements).select(&#39;images.file&#39;)</code>? it might work"}, {"owner": {"reputation": 405, "user_id": 5639287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2da4e9be5bbf048854f4e1621bd193ee?s=128&d=identicon&r=PG&f=1", "display_name": "code monkey", "link": "https://stackoverflow.com/users/5639287/code-monkey"}, "edited": false, "score": 0, "creation_date": 1533047151, "post_id": 51613295, "comment_id": 90196741, "body": "Stil returning relation. But in console I see query for loading images.  SELECT &quot;images&quot;.* FROM &quot;images&quot; WHERE &quot;images&quot;.&quot;id&quot; IN (25, 26, 27, 28, 29, 30, 31)`  Tried without <code>select</code> and I got <code>Measuremets</code> without <code>images</code>."}, {"owner": {"reputation": 628, "user_id": 8267417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qgllr-3VCV4/AAAAAAAAAAI/AAAAAAAAAAo/E_crAMNR-fM/photo.jpg?sz=128", "display_name": "gasc", "link": "https://stackoverflow.com/users/8267417/gasc"}, "edited": false, "score": 0, "creation_date": 1533050611, "post_id": 51613295, "comment_id": 90199247, "body": "Can&#39;t you use that <code>Relation</code> object?  Maybe <code>your_relation.each</code> ? There you should have the model instances"}, {"owner": {"reputation": 405, "user_id": 5639287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2da4e9be5bbf048854f4e1621bd193ee?s=128&d=identicon&r=PG&f=1", "display_name": "code monkey", "link": "https://stackoverflow.com/users/5639287/code-monkey"}, "edited": false, "score": 0, "creation_date": 1533058091, "post_id": 51613295, "comment_id": 90203432, "body": "Yes I can. Didn&#39;t know that. Thaks guys for your help. My solution is:  <code>images = Measurement.where(element_id: @element.id).includes(:element_images)         images = images.map {|e| e.element_images}.reject!(&amp;:blank?).flatten</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1352, "user_id": 2460416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VjqNv.jpg?s=128&g=1", "display_name": "mpospelov", "link": "https://stackoverflow.com/users/2460416/mpospelov"}, "is_accepted": false, "score": 1, "last_activity_date": 1533122830, "last_edit_date": 1533122830, "creation_date": 1533104439, "answer_id": 51626555, "question_id": 51613295, "link": "https://stackoverflow.com/questions/51613295/rails-eager-loading-detected/51626555#51626555", "title": "Rails - eager loading detected", "body": "<p>Here is step by step replacing:</p>\n\n<pre><code>images = @element.measurements.map {|e| e.images}.reject!(&amp;:blank?)\n</code></pre>\n\n<p>For this line of code it is better to produce next relation</p>\n\n<pre><code>has_many :images, through: :measurements\n# OR for better naming\nhas_many :measurement_images, through: :measurements, source: :images\n</code></pre>\n\n<p>Then you can just do:</p>\n\n<pre><code>images = @element.measurement_images\n</code></pre>\n\n<p>Which will execute next SQL</p>\n\n<pre><code>SELECT * \nFROM images \nINNER JOIN measurements \nON measurements.id = images.measurement_id\nWHERE measurements.element_id = $1\n</code></pre>\n\n<p>So no need to reject blank images as <code>INNER JOIN</code> just do exactly that, throws away non-matching records, check out <a href=\"https://www.w3schools.com/sql/sql_join_inner.asp\" rel=\"nofollow noreferrer\">the doc</a></p>\n\n<p>After creating this <code>has_many through</code> relation, next code won't produce any N+1 issues:</p>\n\n<pre><code>images.map {|i| i.file.url}\n</code></pre>\n\n<p>Also you can minimize the output by adding <code>#select</code>, but I don't advise you to do that, as it complicates code a lot and heavily coupled on image library implementation, so in case of updating library you can break the code. \nBut for note, if you use <code>paperclip</code> gem with default URL generation pattern you can do something like this:</p>\n\n<pre><code>image_ulrs = @element\n  .measurement_images\n  .select(\n    :id,\n    :type, # if you have STI model\n    :&lt;your_file_field&gt;_file_name, \n    :&lt;your_file_field&gt;_updated_at\n  ).map { |i| i.file.url }\n</code></pre>\n\n<p><strong><code>&lt;your_file_field&gt;</code></strong> is the first argument which is passed to <code>has_attached_file</code> for example </p>\n\n<pre><code>has_attached_file :attachment\n</code></pre>\n\n<p>will result in</p>\n\n<pre><code>  ...  \n  .select(\n    :id,\n    :type, # if you have STI model\n    :attachment_file_name, \n    :attachment_updated_at\n  )\n</code></pre>\n\n<p>but again I do <strong>NOT</strong> suggest to do that as it does not give a lot of performance improvement but can be a headache in future.</p>\n"}], "owner": {"reputation": 405, "user_id": 5639287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2da4e9be5bbf048854f4e1621bd193ee?s=128&d=identicon&r=PG&f=1", "display_name": "code monkey", "link": "https://stackoverflow.com/users/5639287/code-monkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6213, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1533122830, "creation_date": 1533039701, "last_edit_date": 1533046055, "question_id": 51613295, "link": "https://stackoverflow.com/questions/51613295/rails-eager-loading-detected", "title": "Rails - eager loading detected", "body": "<p>I have 3 associated tables: <code>Elment</code>, <code>Measurement</code> and <code>Image</code>.</p>\n\n<p>Element <code>has_many</code> Measurements </p>\n\n<p>Measurements <code>has_many</code> Images, also Images <code>has_many</code> Measurements (N-N association)</p>\n\n<hr>\n\n<p>How can I minimize number of queries in </p>\n\n<pre><code>images = @element.measurements.map {|e| e.images}.reject!(&amp;:blank?)\nimages.flatten.map {|i| i.file.url}\n</code></pre>\n\n<p>For this code, there are N queries for every measurement. Can I minimize this with something like this: </p>\n\n<pre><code>@element.measurements.joins(:images).select('images.file')\n</code></pre>\n\n<p>Query: `</p>\n\n<pre><code>SELECT \"images.file\" FROM \"measurements\" \nINNER JOIN \"images\" ON \"element_images\".\"measurement_id\" = \"measurements\".\"id\" \nINNER JOIN \"images\" ON \"element_images\".\"id\" = \"images\".\"image_id\" \nWHERE \"measurements\".\"element_id\" = $1`\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 1, "last_activity_date": 1533041779, "last_edit_date": 1533041779, "creation_date": 1533040188, "answer_id": 51613448, "question_id": 51613240, "link": "https://stackoverflow.com/questions/51613240/active-record-array-array-query-to-check-records-that-are-present-in-an-array/51613448#51613448", "title": "Active Record Array array query - to check records that are present in an array", "body": "<p>Try <a href=\"https://www.postgresql.org/docs/9.1/static/functions-array.html\" rel=\"nofollow noreferrer\"><code>&amp;&amp;</code></a> overlap  operator.</p>\n\n<blockquote>\n  <p>overlap (have elements in common) </p>\n</blockquote>\n\n<pre><code>Objective.where(\"labels &amp;&amp; ARRAY[?]::varchar[]\", [\"textile\", \"Blazer\"])\n</code></pre>\n\n<p>If you have many rows, a GIN index can speed it up.</p>\n"}], "owner": {"reputation": 663, "user_id": 5110480, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/210fea696d0260204d18a7a7d54bf2dd?s=128&d=identicon&r=PG&f=1", "display_name": "Mahesh Mesta", "link": "https://stackoverflow.com/users/5110480/mahesh-mesta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 51613448, "answer_count": 1, "score": 0, "last_activity_date": 1533041779, "creation_date": 1533039516, "last_edit_date": 1533041283, "question_id": 51613240, "link": "https://stackoverflow.com/questions/51613240/active-record-array-array-query-to-check-records-that-are-present-in-an-array", "title": "Active Record Array array query - to check records that are present in an array", "body": "<p>I have an Objective model which has an attribute called as labels whose values are array data type. I need to query all the Objectives whose labels attribute has values that are present in some particular array.</p>\n\n<p>For Example:\nI have an array</p>\n\n<pre><code>a = [\"textile\", \"blazer\"]\n</code></pre>\n\n<p>the <code>Objective.labels</code> may have values as <code>[\"textile, \"ramen\"]</code></p>\n\n<p>I need to return all objectives that might have either \"textile\" or \"blazer\" as one of their labels array values</p>\n\n<p>I tried the following:</p>\n\n<pre><code>Objective.where(\"labels @&gt; ARRAY[?]::varchar[]\", [\"textile\"])\n</code></pre>\n\n<p>This returns some records.Now when I try</p>\n\n<pre><code>Objective.where(\"labels @&gt; ARRAY[?]::varchar[]\", [\"textile\", \"Blazer\"])\n</code></pre>\n\n<p>I expect it to return all Objectives which contains at-least one of the labels array value as textile or blazer.</p>\n\n<p>However, it returns an empty array. Any Solutions?</p>\n"}, {"tags": ["ruby", "zurb-foundation", "ruby-on-rails-4.2"], "answers": [{"tags": [], "owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "is_accepted": true, "score": 0, "last_activity_date": 1533037632, "creation_date": 1533037632, "answer_id": 51612697, "question_id": 51612339, "link": "https://stackoverflow.com/questions/51612339/how-to-wrap-data-equalizer-with-content-tag/51612697#51612697", "title": "How to wrap data-equalizer with content_tag", "body": "<p>Finally got the solution </p>\n\n<pre><code>content_tag :a, href: '/ussers/profile', target: '_blank' do\n        capture do\n          concat (content_tag :div, nil, :\"data-equalizer-watch\" =&gt; \"\", :class =&gt; 'list_users' do\n             concat (content_tag :h2, title)\n          end )\n        end\n      end\n</code></pre>\n\n<p>Took reference from this <a href=\"https://gist.github.com/bunnymatic/4222736\" rel=\"nofollow noreferrer\">link</a></p>\n"}], "owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 51612697, "answer_count": 1, "score": 0, "last_activity_date": 1533066131, "creation_date": 1533036589, "last_edit_date": 1533066131, "question_id": 51612339, "link": "https://stackoverflow.com/questions/51612339/how-to-wrap-data-equalizer-with-content-tag", "title": "How to wrap data-equalizer with content_tag", "body": "<p>I am trying to wrap div-equalizer-watch inside content_tag but the div-equalizer-watch is getting print <strong>(\n{:\"data-equalizer-watch\"=>\"\", :class=>\"list_users\"}</strong>). Can someone guide me where I am doing wrong</p>\n\n<p>Below, is the HTML which I am trying to write in rails helper with content_tag &amp; capture tag</p>\n\n<pre><code>&lt;a href=\"/ussers/profile\" target=\"_blank\"&gt;\n  &lt;div class=\"list_users\" data-equalizer-watch=\"\"&gt;\n    &lt;h2&gt;Cost&lt;/h2&gt;\n  &lt;/div&gt;\n&lt;/a&gt;\n\ncontent_tag :a, href: \"/ussers/profile\", target: '_blank' do\n  capture do\n    concat (content_tag :div, :\"data-equalizer-watch\" =&gt; \"\",:class =&gt; 'list_users')\n    concat (content_tag :h2, 'Cost')\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs"], "comments": [{"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 2, "creation_date": 1533036398, "post_id": 51612182, "comment_id": 90189214, "body": "Move request from <code>constructor</code> to <code>componentDidMount</code>"}, {"owner": {"reputation": 435, "user_id": 5136223, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Wl5tRylDc9g/AAAAAAAAAAI/AAAAAAAABJQ/ayueeKi75iw/photo.jpg?sz=128", "display_name": "Fernando Maymone", "link": "https://stackoverflow.com/users/5136223/fernando-maymone"}, "reply_to_user": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1533037144, "post_id": 51612182, "comment_id": 90189705, "body": "Thanks Leo. It works"}], "answers": [{"tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": true, "score": 1, "last_activity_date": 1533037034, "creation_date": 1533037034, "answer_id": 51612486, "question_id": 51612182, "link": "https://stackoverflow.com/questions/51612182/integration-in-react-with-ruby-on-rails/51612486#51612486", "title": "Integration in React with Ruby on Rails.", "body": "<p>dashboard.jsx:</p>\n\n<pre><code>import React from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport JobOffers from './JobOffers'\n\n\ndocument.addEventListener('DOMContentLoaded', () =&gt; {\n  ReactDOM.render(\n    &lt;JobOffers/&gt;,\n    document.body.appendChild(document.createElement('div')),\n  )\n})\n</code></pre>\n\n<p>JobOffers.jsx:</p>\n\n<pre><code>import React, { Component } from 'react'\nimport ReactDOM from 'react-dom'\n\nclass JobOffers extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      term: '',\n      autoCompleteResults: [],\n      itemSelected: {},\n      showItemSelected: false\n    };\n  }\n\n  componentDidMount() {\n    $.getJSON('/search?q=' + this.state.term)\n      .then(response =&gt; this.setState({ autoCompleteResults: response.items }))\n  }\n\n  getAutoCompleteResults(e){\n    this.setState({\n      term: e.target.value\n    }, () =&gt; {\n      $.getJSON('/search?q=' + this.state.term)\n        .then(response =&gt; this.setState({ autoCompleteResults: response.items }))\n    });\n  }\n\n  render(){\n    let autoCompleteList = this.state.autoCompleteResults.map((response, index) =&gt; {\n      return &lt;div key={index}&gt;\n        &lt;h2&gt;{response.title}&lt;/h2&gt;\n        &lt;p&gt;{response.description }&lt;/p&gt;\n      &lt;/div&gt;\n    });\n\n    return (\n      &lt;div&gt;\n        &lt;input ref={ (input) =&gt; { this.searchBar = input } } value={ this.state.term } onChange={ this.getAutoCompleteResults.bind(this) } type='text' placeholder='Search...' /&gt;\n        { autoCompleteList }\n      &lt;/div&gt;\n    )\n  }\n}\n\nexport default JobOffers;\n</code></pre>\n"}], "owner": {"reputation": 435, "user_id": 5136223, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Wl5tRylDc9g/AAAAAAAAAAI/AAAAAAAABJQ/ayueeKi75iw/photo.jpg?sz=128", "display_name": "Fernando Maymone", "link": "https://stackoverflow.com/users/5136223/fernando-maymone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 51612486, "answer_count": 1, "score": 0, "last_activity_date": 1533037034, "creation_date": 1533035959, "question_id": 51612182, "link": "https://stackoverflow.com/questions/51612182/integration-in-react-with-ruby-on-rails", "title": "Integration in React with Ruby on Rails.", "body": "<p>I was following the instructions from a tutorial about integrating React with Ruby on Rails. I installed webpack  'webpacker', 'haml' and 'ransack'. All my backend code is working right now. </p>\n\n<p>I created a view to point to my jsx files. On a Hello World attempt, the jsx its correctly rendered. My problem is after that.</p>\n\n<p>I created a JobOffers.jsx file. So, on my dashboard file i pointed to this other one.</p>\n\n<p>This is my dashboard.jsx </p>\n\n<pre><code>import React from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport JobOffers from './JobOffers'\n\n\ndocument.addEventListener('DOMContentLoaded', () =&gt; {\n  ReactDOM.render(\n    &lt;JobOffers/&gt;\n  )\n})\n</code></pre>\n\n<p>And this is my JobOffer.jsx</p>\n\n<pre><code>import React, { Component } from 'react'\nimport ReactDOM from 'react-dom'\n\nclass JobOffers extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      term: '',\n      autoCompleteResults: [],\n      itemSelected: {},\n      showItemSelected: false\n    };\n\n    $.getJSON('/search?q=' + this.state.term)\n      .then(response =&gt; this.setState({ autoCompleteResults: response.items }))\n  }\n\n  getAutoCompleteResults(e){\n    this.setState({\n      term: e.target.value\n    }, () =&gt; {\n      $.getJSON('/search?q=' + this.state.term)\n        .then(response =&gt; this.setState({ autoCompleteResults: response.items }))\n    });\n  }\n\n  render(){\n    let autoCompleteList = this.state.autoCompleteResults.map((response, index) =&gt; {\n      return &lt;div key={index}&gt;\n        &lt;h2&gt;{response.title}&lt;/h2&gt;\n        &lt;p&gt;{response.description }&lt;/p&gt;\n      &lt;/div&gt;\n    });\n\n    return (\n      &lt;div&gt;\n        &lt;input ref={ (input) =&gt; { this.searchBar = input } } value={ this.state.term } onChange={ this.getAutoCompleteResults.bind(this) } type='text' placeholder='Search...' /&gt;\n        { autoCompleteList }\n      &lt;/div&gt;\n    )\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () =&gt; {\n  ReactDOM.render(\n    &lt;JobOffers /&gt;,\n    document.body.appendChild(document.createElement('div')),\n  )\n});\n\nexport default JobOffers;\n</code></pre>\n\n<p>When I go to the page, it renders for less then one second the right input, and then disappears. Anyone know what Im doing wrong here? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1533035426, "post_id": 51611913, "comment_id": 90188659, "body": "I don&#39;t see where some of the information should be coming from. For instance, where is the variable <code>view</code> coming from in: <code>type:views</code>?"}, {"owner": {"reputation": 5, "user_id": 10155952, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RlNOyAIqZ2M/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q0GqUD3J9IEze2vF7YM10bgvJS-Q/mo/photo.jpg?sz=128", "display_name": "Mad Man", "link": "https://stackoverflow.com/users/10155952/mad-man"}, "reply_to_user": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1533035528, "post_id": 51611913, "comment_id": 90188712, "body": "you can put anything it doesn&#39;t matter"}, {"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1533035654, "post_id": 51611913, "comment_id": 90188780, "body": "Why don&#39;t you just loop through the hash and add an extra key to it on each iteration? This sample code doesn&#39;t make sense to me, so can&#39;t help you with the exact code, without seeing where the variables (like view) are being declared."}, {"owner": {"reputation": 5, "user_id": 10155952, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RlNOyAIqZ2M/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q0GqUD3J9IEze2vF7YM10bgvJS-Q/mo/photo.jpg?sz=128", "display_name": "Mad Man", "link": "https://stackoverflow.com/users/10155952/mad-man"}, "reply_to_user": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1533035755, "post_id": 51611913, "comment_id": 90188835, "body": "actual data is <a href=\"https://gist.github.com/nwoow/a5ce22fbae020925c2e52b0f7730c72a\" rel=\"nofollow noreferrer\">gist.github.com/nwoow/a5ce22fbae020925c2e52b0f7730c72a</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1533069288, "post_id": 51611913, "comment_id": 90208767, "body": "If <code>view</code> in <code>type:views</code> &quot;doesn&#39;t matter&quot;, change your example to one that that is complete, rather than asking each reader who wants to run your code to change it in some arbitrary manner. If <code>b</code> is your &quot;first array&quot;, write <code>b = [{ id: 5,...}</code>. More generally, when you give an example, make all values valid Ruby objects, assign a variable to each input object (so that readers can refer to those variables in answers and comments), make the example as  concise as possible and show your desired result (a Ruby object). Lastly, there&#39;s an object <code>nil</code>, but &quot;null&quot; is not defined."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10155952, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RlNOyAIqZ2M/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q0GqUD3J9IEze2vF7YM10bgvJS-Q/mo/photo.jpg?sz=128", "display_name": "Mad Man", "link": "https://stackoverflow.com/users/10155952/mad-man"}, "edited": false, "score": 0, "creation_date": 1533108468, "post_id": 51613206, "comment_id": 90219629, "body": "yes it is working is there any way to group data without group_by"}, {"owner": {"reputation": 103, "user_id": 8937642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/677745c2ebda486da271d4d33ed6fce2?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Marti", "link": "https://stackoverflow.com/users/8937642/alejandro-marti"}, "reply_to_user": {"reputation": 5, "user_id": 10155952, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RlNOyAIqZ2M/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q0GqUD3J9IEze2vF7YM10bgvJS-Q/mo/photo.jpg?sz=128", "display_name": "Mad Man", "link": "https://stackoverflow.com/users/10155952/mad-man"}, "edited": false, "score": 0, "creation_date": 1533124864, "post_id": 51613206, "comment_id": 90229591, "body": "There you go. I updated the answer in order to not use <code>group_by</code>. There are many ways to do this. I hope those helped."}], "tags": [], "owner": {"reputation": 103, "user_id": 8937642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/677745c2ebda486da271d4d33ed6fce2?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Marti", "link": "https://stackoverflow.com/users/8937642/alejandro-marti"}, "is_accepted": true, "score": 0, "last_activity_date": 1533124791, "last_edit_date": 1533124791, "creation_date": 1533039430, "answer_id": 51613206, "question_id": 51611913, "link": "https://stackoverflow.com/questions/51611913/getting-null-value-using-map-in-rails/51613206#51613206", "title": "Getting null value using map in Rails", "body": "<p>Being <code>b</code> the data you provided, and removing views since I don't know where that variable comes from... try this piece of code. I believe it achieves what you are trying to do</p>\n\n<pre><code>    grouped_data = b.group_by{ |data| data[:Vegetables]}\n\n    grouped_data.map{ |vegetable, values| \n        dataset = vegetable.to_s.gsub(\"_\",\" \")\n        {\n\n          legendText: dataset,\n          showInLegend: true,\n          dataPoints: values.map { |value|\n            { y: value[:Area], label: value[:Year] }\n          }\n        }\n     }\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>Without using <code>group_by</code>:</p>\n\n<pre><code>vegetables_hash = Hash.new\nb.each { |data| \n    dataset = data[:Vegetables].to_s.gsub(\"_\",\" \")\n    vegetables_hash[dataset] ||= { legendtext: dataset, showInLegend: true, dataPoints: []}\n    vegetables_hash[dataset][:dataPoints].push({ y: data[:Area], label: data[:Year] })\n}\n</code></pre>\n\n<p><code>vegetables_hash</code> has data grouped by vegetables in the desired format.\nLast step:</p>\n\n<pre><code>vegetables_hash.values\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10155952, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RlNOyAIqZ2M/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q0GqUD3J9IEze2vF7YM10bgvJS-Q/mo/photo.jpg?sz=128", "display_name": "Mad Man", "link": "https://stackoverflow.com/users/10155952/mad-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 51613206, "answer_count": 1, "score": -1, "last_activity_date": 1533124791, "creation_date": 1533035102, "last_edit_date": 1533042677, "question_id": 51611913, "link": "https://stackoverflow.com/questions/51611913/getting-null-value-using-map-in-rails", "title": "Getting null value using map in Rails", "body": "<p>I am getting null value when I am using if condition inside a map. I have an array and I looping through that.</p>\n\n<p>My first array is:</p>\n\n<pre><code>[\n    {\n        id: 5,\n        Vegetables: \"Cabbage\",\n        Area: 39,\n        Production: 695.33,\n        Year: 2014,\n        created_at: \"2018-07-18T06:23:11.000Z\",\n        updated_at: \"2018-07-18T06:23:11.000Z\"\n    },\n    {\n        id: 12,\n        Vegetables: \"Bittergourd\",\n        Area: 9.71,\n        Production: 67.25,\n        Year: 2014,\n        created_at: \"2018-07-18T06:23:11.000Z\",\n        updated_at: \"2018-07-18T06:23:11.000Z\"\n    },\n    # .....\n]\n</code></pre>\n\n<p>This is my array and and I using this code to loop:</p>\n\n<pre><code>ji1 = [\"Cabbage\",\"Bittergourd\"]\nhash_data = ji1.map do |col|\n  dataset = col.to_s.gsub(\"_\",\" \")\n  {\n    type: views,\n    legendText: dataset,\n    showInLegend: true,\n    dataPoints: b.reject{ |x| x[\"Districts\"] == \"Bihar\" }.map do |el|\n      if el[\"Vegetables\"] == \"Bittergourd\"\n        { y: el[\"Area\"], label: el[\"Year\"] }\n      end\n    end\n  }\nend\n</code></pre>\n\n<p>In this example <code>b</code> is my array I am getting this value. I want a result like this:</p>\n\n<pre><code>[\n  {\n    type: \"column\",\n    legendText: \"Cabbage\",\n    showInLegend: true,\n    dataPoints: [\n      {\n        y: 9.7,\n        label: 2014\n      }\n    ]\n  },\n  {\n    type: \"column\",\n    legendText: \"Bittergourd\",\n    showInLegend: true,\n    dataPoints: [\n      {\n        y: 39,\n        label: 2014\n      }\n      # .....\n    ]\n  }\n]\n</code></pre>\n\n<p>When I am running my loop I am getting a <code>null</code> value. Is there any way I can create a result like above using <code>map</code> with my array?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "wicked-pdf"], "comments": [{"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 1, "creation_date": 1533035539, "post_id": 51611861, "comment_id": 90188719, "body": "Isn&#39;t Wicked PDF using a HTML view? Wouldn&#39;t changing <code>\\r\\n</code> to <code>&lt;br &#47;&gt;</code> work?"}, {"owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "reply_to_user": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1533035627, "post_id": 51611861, "comment_id": 90188765, "body": "This is user input, they have a freehand text form"}, {"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1533035708, "post_id": 51611861, "comment_id": 90188812, "body": "Yes, so just translate linebreaks to &lt;br /&gt; before printing it to the HTML View you created for Wicked PDF."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533035811, "post_id": 51611861, "comment_id": 90188875, "body": "Rails has a <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format\" rel=\"nofollow noreferrer\"><code>simple_format</code></a> helper for this kind of conversion. Or wrap the text in a <code>&lt;pre&gt;</code> tag."}], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 3353316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06415305d9cde1d13a60e2a615307d14?s=128&d=identicon&r=PG", "display_name": "Charith H", "link": "https://stackoverflow.com/users/3353316/charith-h"}, "is_accepted": true, "score": 2, "last_activity_date": 1533040822, "creation_date": 1533040822, "answer_id": 51613644, "question_id": 51611861, "link": "https://stackoverflow.com/questions/51611861/cant-print-line-breaks-with-rails-and-wicked-pdf/51613644#51613644", "title": "Can&#39;t print line breaks with Rails and Wicked PDF", "body": "<p>Try using <a href=\"https://apidock.com/rails/v4.1.8/ActionView/Helpers/TextHelper/simple_format\" rel=\"nofollow noreferrer\">simple_format</a> to convert line breaks to html new line tags. This works well with pdf too.</p>\n\n<pre><code>&lt;%= simple_format p %&gt;\n</code></pre>\n\n<p><strong><em>Note:</em></strong> If you are using rich text editor (such as <a href=\"https://github.com/maclover7/trix\" rel=\"nofollow noreferrer\">trix_editor</a>) <code>.html_safe</code> will work with line breaks. But in this case, <code>.html_safe</code> doesn't work in PDFs.</p>\n"}], "owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 51613644, "answer_count": 1, "score": 0, "last_activity_date": 1533040822, "creation_date": 1533034904, "question_id": 51611861, "link": "https://stackoverflow.com/questions/51611861/cant-print-line-breaks-with-rails-and-wicked-pdf", "title": "Can&#39;t print line breaks with Rails and Wicked PDF", "body": "<p>My original text </p>\n\n<pre><code>test\\r\\n\\r\\ntest\\r\\n\\r\\ntest\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>p = @property.data\n</code></pre>\n\n<p>Result in PDF</p>\n\n<pre><code>test test test\n</code></pre>\n\n<p>I need instead:</p>\n\n<pre><code>test\n\ntest\n\ntest\n</code></pre>\n"}, {"tags": ["ruby", "net-http"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1533034924, "post_id": 51611475, "comment_id": 90188334, "body": "I don&#39;t see anything wrong with it. What&#39;s wrong? You tell us."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 4, "last_activity_date": 1533035447, "last_edit_date": 1533035447, "creation_date": 1533034095, "answer_id": 51611584, "question_id": 51611475, "link": "https://stackoverflow.com/questions/51611475/why-does-nethttpunknownresponse-kind-of-nethttpresponse-return-false/51611584#51611584", "title": "Why does &#39;Net::HTTPUnknownResponse.kind_of? Net::HTTPResponse&#39; return &#39;false&#39;?", "body": "<p><code>kind_of?</code> is used to check whether an object is an <em>instance</em> of a given class, e.g.</p>\n\n<pre><code>1.kind_of? Numeric\n#=&gt; true\n</code></pre>\n\n<p>You can't just replace the instance with its class:</p>\n\n<pre><code>Integer.kind_of? Numeric\n#=&gt; false\n</code></pre>\n\n<p>Because <code>Integer</code> (the class) is an instance of <code>Class</code>:</p>\n\n<pre><code>Integer.kind_of? Class\n#=&gt; true\n</code></pre>\n\n<p>Instead you can use <a href=\"http://ruby-doc.org/core-2.5.1/Module.html#method-i-3C\" rel=\"nofollow noreferrer\"><code>&lt;</code></a> to check whether the receiver is a subclass of a given class (or module, it's not limited to classes):</p>\n\n<pre><code>Integer &lt; Numeric\n#=&gt; true\n\nInteger &lt; Comparable\n#=&gt; true\n</code></pre>\n\n<p>In your specific case:</p>\n\n<pre><code>require 'net/http'\n\nNet::HTTPUnknownResponse &lt; Net::HTTPResponse\n#=&gt; true\n</code></pre>\n\n<p>Note that the above code will <em>always</em> return <code>true</code> (unless you change the class hierarchy). If you are using the <code>net/http</code> library, your response object should be an <em>instance</em> of <code>Net::HTTPUnknownResponse</code>, not the class itself.</p>\n"}], "owner": {"reputation": 1443, "user_id": 5759881, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/507efd9b9ead9d6fc1f5b89415941ba2?s=128&d=identicon&r=PG&f=1", "display_name": "Montenegrodr", "link": "https://stackoverflow.com/users/5759881/montenegrodr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 51611584, "answer_count": 1, "score": 2, "last_activity_date": 1533035447, "creation_date": 1533033737, "last_edit_date": 1533034865, "question_id": 51611475, "link": "https://stackoverflow.com/questions/51611475/why-does-nethttpunknownresponse-kind-of-nethttpresponse-return-false", "title": "Why does &#39;Net::HTTPUnknownResponse.kind_of? Net::HTTPResponse&#39; return &#39;false&#39;?", "body": "<p>I am using library <code>net/http</code>, and am trying to check if a response is type <code>Net::HTTPResponse</code>. I tried:</p>\n\n<pre><code>Net::HTTPUnknownResponse.kind_of? Net::HTTPResponse\n# =&gt; false\n</code></pre>\n\n<p>What's wrong?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1533031482, "post_id": 51610709, "comment_id": 90186105, "body": "Did you look at the source code?"}, {"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1533031645, "post_id": 51610709, "comment_id": 90186200, "body": "Yes, and I&#39;m still looking. I didn&#39;t find anything yet, any hint would be welcomed!"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1533037390, "post_id": 51610709, "comment_id": 90189865, "body": "@lurker A good documentation helps reader understand what is going on. Reading source code is not always fun. Also, a language should be something people can learn without any pre requisite."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 1, "creation_date": 1533038996, "post_id": 51610709, "comment_id": 90191018, "body": "@ArupRakshit looking at source is not &quot;fun&quot; always, but it is educational and should at least be given an examination when questions like this arise. This is a Ruby internals question which deserves a look at the source and is something that may not be explicitly documented. It&#39;s at least a starting point if nothing else. I didn&#39;t claim it would necessarily answer all the questions or even not raise new ones."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1533039337, "post_id": 51610709, "comment_id": 90191291, "body": "@lurker I don&#39;t agree with you. As per you, before learning Ruby, I first need to learn C. And before I learn C, I need to learn things on which C is written. What he asked is not related to Ruby internals. It is related how the inheritance and mixing works in Ruby."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533058101, "post_id": 51610709, "comment_id": 90203435, "body": "@ArupRakshit that&#39;s a fanciful extrapolation of what I was suggesting. I guess we&#39;ll just have to agree to disagree."}], "answers": [{"comments": [{"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 0, "creation_date": 1533032027, "post_id": 51610897, "comment_id": 90186434, "body": "Oh nice! So for my second example, it is the inclusion in <code>Kernel</code> as public methods of <code>JSON</code>, <code>j</code> and <code>jj</code>, that made it a private method for <code>NilClass</code>? The question being, when did it become private?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 1, "creation_date": 1533032327, "post_id": 51610897, "comment_id": 90186609, "body": "@UlysseBN these are <a href=\"http://ruby-doc.org/core-2.5.1/Module.html#method-i-module_function\" rel=\"nofollow noreferrer\">module functions</a> which are available as both, class methods and instance methods. Additionally, <i>&quot;The instance-method versions are made private&quot;</i>"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533032340, "post_id": 51610897, "comment_id": 90186625, "body": "<code>require</code> is a Kernel method. If you add to it, then you add to all, hence you only need to <code>require</code> a script once to make it accessible anywhere in the program."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 14, "last_activity_date": 1533032319, "last_edit_date": 1533032319, "creation_date": 1533031869, "answer_id": 51610897, "question_id": 51610709, "link": "https://stackoverflow.com/questions/51610709/what-is-the-purpose-of-nil-private-methods-in-ruby/51610897#51610897", "title": "What is the purpose of `nil` private methods in ruby?", "body": "<p><code>NilClass</code> does not declare any private instance method on it\u2019s own. They came from <code>Kernel</code> and <code>BasicObject</code>:</p>\n\n<pre><code>NilClass.ancestors\n#\u21d2 [NilClass, Object, PP::ObjectMixin, Kernel, BasicObject]\nNilClass.private_instance_methods -\n  (NilClass.ancestors - [NilClass]).flat_map(&amp;:private_instance_methods)\n#\u21d2 []\n</code></pre>\n\n<p>Any ruby class is derived from <code>BasicObject</code> and includes <code>Kernel</code>.</p>\n\n<p>Also, <a href=\"https://ruby-doc.org/core/Module.html#method-i-private_instance_methods\" rel=\"noreferrer\"><code>Module#private_instance_methods</code></a> accepts the boolean argument, which suppresses the output of inherited methods when set to <code>false</code>:</p>\n\n<pre><code>NilClass.private_instance_methods false\n#\u21d2 []\n</code></pre>\n\n<p><code>JSON</code> on the other hand monkey patches <code>NilClass</code> amongst all other classes:</p>\n\n<pre><code>require 'json'\nNilClass.ancestors\n#\u21d3 [NilClass, JSON::Ext::Generator::GeneratorMethods::NilClass,\n#   Object, JSON::Ext::Generator::GeneratorMethods::Object,\n#   PP::ObjectMixin, Kernel, BasicObject]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1533143359, "post_id": 51622011, "comment_id": 90242008, "body": "I don&#39;t see <code>foo</code> in my IRB. Probably you defined a method <code>foo</code> in IRB for testing something... <i>I&#39;m not quite sure how this might be used.</i> -- annoying side effect of Inheritance :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 1, "creation_date": 1533622379, "post_id": 51622011, "comment_id": 90400517, "body": "@Arup, I tracked down the two <code>foo</code> methods. I had defined them in my <code>.irbrc</code> file. I must have put them there for some testing and forgot to remove them."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1533622477, "last_edit_date": 1533622477, "creation_date": 1533070929, "answer_id": 51622011, "question_id": 51610709, "link": "https://stackoverflow.com/questions/51610709/what-is-the-purpose-of-nil-private-methods-in-ruby/51622011#51622011", "title": "What is the purpose of `nil` private methods in ruby?", "body": "<p>Here are <code>NilClass</code>'s private methods organized by owner. Notice that none of these methods are from <code>NilClass</code>, the module <code>JSON</code> or any nested module within <code>JSON</code>.</p>\n\n<pre><code>require 'json'\n\nnil.private_methods.sort.group_by { |m| NilClass.method(m).owner }\n  #=&gt; {Kernel=&gt;[:Array, :Complex, :Float, :Hash, :Integer, :JSON, :Rational,\n  #             :String, :__callee__, :__dir__, :__method__, :`, :abort,\n  #             :at_exit, :binding, :block_given?, :caller, :caller_locations,\n  #             :catch, :eval, :exec, :exit, :exit!, :fail, :fork, :format,\n  #             :gem, :gem_original_require, :gets, :global_variables,\n  #             :initialize_dup, :iterator?, :j, :jj, :lambda, :load,\n  #             :local_variables, :loop, :open, :p, :print, :printf, :proc,\n  #             :putc, :puts, :raise, :rand, :readline, :readlines, :require,\n  #             :require_relative, :respond_to_missing?, :select, :set_trace_func,\n  #             :sleep, :spawn, :sprintf, :srand, :syscall, :system, :test,\n  #             :throw, :trace_var, :trap, :untrace_var, :warn],\n  #    Object=&gt;[:DelegateClass, :default_src_encoding, :irb_binding],\n  #    Module=&gt;[:autoload, :autoload?, :initialize_clone, :initialize_copy],\n  #    Class =&gt;[:initialize], BasicObject=&gt;[:method_missing, :singleton_method_added,\n  #             :singleton_method_removed, :singleton_method_undefined]}\n</code></pre>\n\n<p>One could instead write</p>\n\n<pre><code>NilClass.private_instance_methods.sort.group_by { |m| NilClass.method(m).owner }\n</code></pre>\n\n<p>The second part of the question asks the purpose of each of these methods. I will take these in turn.</p>\n\n<p><em><code>:Array</code></em></p>\n\n<p>For example, <code>nil.send(:Array, 2) #=&gt; [2]</code>. I'm not quite sure how this might be used.</p>\n\n<p><em><code>:Complex</code></em></p>\n\n<p>For example, <code>nil.send(:Complex, 2,3) #=&gt; (2+3i)</code>.  I'm not quite sure how this might be used.</p>\n\n<p><em><code>:Float</code></em></p>\n\n<p>To be completed...</p>\n"}], "owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 51610897, "answer_count": 2, "score": 12, "last_activity_date": 1533622477, "creation_date": 1533031266, "question_id": 51610709, "link": "https://stackoverflow.com/questions/51610709/what-is-the-purpose-of-nil-private-methods-in-ruby", "title": "What is the purpose of `nil` private methods in ruby?", "body": "<p>Using ruby 2.3, and pry REPL, I have this funny result I cannot understand:</p>\n\n<pre><code>nil.private_methods\n# [:DelegateClass, :Digest, :sprintf, :format, :Integer, :Float, :String, :Array, :Hash, :throw, :iterator?, :block_given?, :catch, :loop, :Rational, :trace_var, :untrace_var, :Complex, :at_exit, :gem_original_require, :URI, :set_trace_func, :select, :caller, :caller_locations, :test, :fork, :`, :exit, :sleep, :respond_to_missing?, :load, :exec, :exit!, :syscall, :open, :printf, :print, :putc, :puts, :readline, :readlines, :p, :abort, :gets, :system, :spawn, :proc, :lambda, :srand, :pp, :rand, :initialize_copy, :initialize_clone, :initialize_dup, :Pathname, :trap, :gem, :BigDecimal, :require, :require_relative, :autoload, :autoload?, :binding, :local_variables, :warn, :raise, :fail, :global_variables, :__method__, :__callee__, :__dir__, :eval, :method_missing, :singleton_method_added, :singleton_method_removed, :singleton_method_undefined, :initialize]\n</code></pre>\n\n<p>It looks likes those private methods are linked to modules loaded:</p>\n\n<pre><code>methods = nil.private_methods.dup\nrequire \"json\"\nnil.private_methods - methods\n# [:j, :JSON, :jj]\n</code></pre>\n\n<p>I'm wondering about the purpose of those private methods and didn't find anything relevant on the internet.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "docker"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1533030763, "post_id": 51610229, "comment_id": 90185592, "body": "Add all related things, the script  you&#39;re launching the full error trace and so on."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1533032219, "post_id": 51610229, "comment_id": 90186553, "body": "Just so you know, ruby 1.8.7 reached EOL on July 31, 2014."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1533034244, "post_id": 51610229, "comment_id": 90187831, "body": "@SergioTulentsev <i>\u201cis there life after death\u201d</i> and other burning questions in today\u2019s newscast."}], "owner": {"reputation": 128, "user_id": 10049490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7fbd0da6a6d265009e468801b0a626c?s=128&d=identicon&r=PG&f=1", "display_name": "Sindhu Shree", "link": "https://stackoverflow.com/users/10049490/sindhu-shree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533031586, "creation_date": 1533029894, "last_edit_date": 1533031586, "question_id": 51610229, "link": "https://stackoverflow.com/questions/51610229/load-missing-constant-nameerror", "title": "load_missing_constant (NameError)", "body": "<p>System details:<br>\n-Linux<br>\n-Docker version 17.03.0-ce<br>\n-Ruby version 1.8.7<br>\n-Rails version 2.3.8.</p>\n\n<p>In the process of dockerizing a Ruby on Rails app, I'm faced with the following error on running script/server i.e. starting the rails' built-in web server:  </p>\n\n<blockquote>\n  <p>/usr/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:440:in <strong>`load_missing_constant': uninitialized constant Api::InjectTokenIntoCookies (NameError)</strong>  </p>\n</blockquote>\n\n<p>This particular file (InjectTokenIntoCookies) is present in a separate Plugins folder. The farthest I've gotten with resolving this issue is that it's a case of missing gems. However, setting up the entire rails environment in a docker container just adds to the complexity. </p>\n\n<p>\"RUN bundle install\" is included in the Dockerfile so that shouldn't be an issue. </p>\n\n<p>Full error trace:  </p>\n\n<pre><code>/usr/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:440:in `load_missing_constant': uninitialized constant Api::InjectTokenIntoCookies (NameError)\n    from /usr/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:80:in `const_missing'\n    from /bab/apps/site/config/initializers/api_middleware.rb:1\n    from /usr/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:145:in `load_without_new_constant_marking'\n    from /usr/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:145:in `load'\n    from /usr/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:521:in `new_constants_in'\n    from /usr/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:145:in `load'\n    from /usr/local/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/initializer.rb:622:in `load_application_initializers'\n    from /usr/local/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/initializer.rb:621:in `each'\n    from /usr/local/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/initializer.rb:621:in `load_application_initializers'\n    from /usr/local/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/initializer.rb:176:in `process'\n    from /usr/local/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/initializer.rb:113:in `send'\n    from /usr/local/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/initializer.rb:113:in `run'\n    from /bab/apps/site/config/environment.rb:6\n    from /usr/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:156:in `gem_original_require'\n    from /usr/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:156:in `require'\n    from /usr/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:156:in `require'\n    from /usr/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:521:in `new_constants_in'\n    from /usr/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:156:in `require'\n    from /usr/local/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/commands/server.rb:84\n    from /bab/apps/site/script/server:3:in `gem_original_require'\n    from /bab/apps/site/script/server:3:in `require'\n    from /bab/apps/site/script/server:3\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1533033395, "post_id": 51610397, "comment_id": 90187299, "body": "&lt;%=  @course.end_time.strftime(&#39;%H:%M:%S&#39;) %&gt; this is solved my problem. Thanks"}], "tags": [], "owner": {"reputation": 311, "user_id": 3948506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d528c41d82cb9c9d263f554a61d7fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Kshitij", "link": "https://stackoverflow.com/users/3948506/kshitij"}, "is_accepted": true, "score": 1, "last_activity_date": 1533032346, "last_edit_date": 1533032346, "creation_date": 1533030389, "answer_id": 51610397, "question_id": 51610117, "link": "https://stackoverflow.com/questions/51610117/time-format-using-helper-method-in-ruby-on-rails/51610397#51610397", "title": "time format using helper method in ruby on rails", "body": "<p>You can use <a href=\"https://apidock.com/ruby/DateTime/strftime\" rel=\"nofollow noreferrer\"><code>strftime</code></a> to achieve this.</p>\n\n<p><code>date.strftime('%H:%M:%S')</code></p>\n"}, {"tags": [], "owner": {"reputation": 414, "user_id": 6556383, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-rFjQCuJsaAk/AAAAAAAAAAI/AAAAAAAAEio/VDKKrZfNTtM/photo.jpg?sz=128", "display_name": "dendomenko", "link": "https://stackoverflow.com/users/6556383/dendomenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1533030396, "creation_date": 1533030396, "answer_id": 51610400, "question_id": 51610117, "link": "https://stackoverflow.com/questions/51610117/time-format-using-helper-method-in-ruby-on-rails/51610400#51610400", "title": "time format using helper method in ruby on rails", "body": "<p>Try to \n<code>strftime(\"%I:%M%p\")</code><br>\nAnd for more information look <a href=\"https://apidock.com/ruby/DateTime/strftime\" rel=\"nofollow noreferrer\">here</a> </p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1533032395, "post_id": 51610488, "comment_id": 90186652, "body": "where should I add this? should I define a method for this in the model or what?  I am new to this so I am asking.it might be silly question"}, {"owner": {"reputation": 432, "user_id": 5529252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9b93c1cab573e87ee3080d1baa70ee?s=128&d=identicon&r=PG&f=1", "display_name": "Bodh1004", "link": "https://stackoverflow.com/users/5529252/bodh1004"}, "reply_to_user": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1533035732, "post_id": 51610488, "comment_id": 90188824, "body": "you can write in view itself ."}], "tags": [], "owner": {"reputation": 432, "user_id": 5529252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9b93c1cab573e87ee3080d1baa70ee?s=128&d=identicon&r=PG&f=1", "display_name": "Bodh1004", "link": "https://stackoverflow.com/users/5529252/bodh1004"}, "is_accepted": false, "score": 0, "last_activity_date": 1533035792, "last_edit_date": 1533035792, "creation_date": 1533030621, "answer_id": 51610488, "question_id": 51610117, "link": "https://stackoverflow.com/questions/51610117/time-format-using-helper-method-in-ruby-on-rails/51610488#51610488", "title": "time format using helper method in ruby on rails", "body": "<p>Use code below it will solve your issue : </p>\n\n<pre><code>Time.parse(start_time).strftime(\"%H:%M\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1533087998, "creation_date": 1533087998, "answer_id": 51624284, "question_id": 51610117, "link": "https://stackoverflow.com/questions/51610117/time-format-using-helper-method-in-ruby-on-rails/51624284#51624284", "title": "time format using helper method in ruby on rails", "body": "<p>Rails has the <a href=\"https://api.rubyonrails.org/v5.2/classes/Time.html#method-i-to_formatted_s\" rel=\"nofollow noreferrer\"><code>to_formatted_s</code></a> helper method (which is aliased to <code>to_s</code>. This helper method has several date and time formats already defined and it is easy to define own formats.</p>\n\n<p>You are lucky because returning just the time without date information already exists:</p>\n\n<pre><code>start_date.to_s(:time)\n</code></pre>\n\n<p>The benefits of using named date and time formats in Rails over using <code>strftime</code> directly are that it makes it much easier to change formats later on because there is only one place to change. And that you can define formats that are depending on a locale.</p>\n"}], "owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 51610397, "answer_count": 4, "score": 0, "last_activity_date": 1533087998, "creation_date": 1533029554, "last_edit_date": 1533029879, "question_id": 51610117, "link": "https://stackoverflow.com/questions/51610117/time-format-using-helper-method-in-ruby-on-rails", "title": "time format using helper method in ruby on rails", "body": "<p>I have time data filed in my table</p>\n\n<pre><code>t.time \"start_time\"\nt.time \"end_time\"\n</code></pre>\n\n<p>and when I add the data it displays in this format</p>\n\n<pre><code>Start Time  2000-01-01 06:00:00 UTC\nEnd Time    2000-01-01 08:00:00 UTC\n</code></pre>\n\n<p>I want only time to be displayed? How do I do that.?</p>\n\n<p>my form is like this</p>\n\n<pre><code>      &lt;div class=\"form-group row\"&gt;\n         &lt;%= form.label :start_date, class: \"control-label text-right col-md-2\" %&gt;\n         &lt;div class=\"col-md-4\"&gt;\n           &lt;div class=\"input-group\"&gt;\n             &lt;%= form.text_field :start_date, id: :course_start_date, value: \"#{format_date(form.object.start_date)}\", class: \"form-control mydatepicker\" %&gt;\n             &lt;span class=\"input-group-addon\"&gt;&lt;i class=\"icon-calender\"&gt;&lt;/i&gt;&lt;/span&gt;\n         &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-group row\"&gt;\n         &lt;%= form.label :end_date, class: \"control-label text-right col-md-2\" %&gt;\n         &lt;div class=\"col-md-4\"&gt;\n           &lt;div class=\"input-group\"&gt;\n              &lt;%= form.text_field :end_date, id: :course_end_date, value: \"#{format_date(form.object.end_date)}\", class:\"form-control mydatepicker\" %&gt;\n              &lt;span class=\"input-group-addon\"&gt;&lt;i class=\"icon-calender\"&gt;&lt;/i&gt;&lt;/span&gt;\n           &lt;/div&gt;\n         &lt;/div&gt;\n      &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1533028472, "post_id": 51609634, "comment_id": 90184126, "body": "It seems you didn&#39;t end the <code>loop do</code> with an <code>end</code> where you finish your loop."}, {"owner": {"reputation": 3318, "user_id": 1715255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/052089e1ebdb07dabb8745fdc82b844f?s=128&d=identicon&r=PG&f=1", "display_name": "hotfix", "link": "https://stackoverflow.com/users/1715255/hotfix"}, "edited": false, "score": 1, "creation_date": 1533028493, "post_id": 51609634, "comment_id": 90184137, "body": "after <code>Hash[*cookie_parts.flatten]</code>is and else and where is your <code>if</code>?"}, {"owner": {"reputation": 19, "user_id": 9825021, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "digital king", "link": "https://stackoverflow.com/users/9825021/digital-king"}, "edited": false, "score": 0, "creation_date": 1533028612, "post_id": 51609634, "comment_id": 90184212, "body": "I did put an end, let me re edit that."}, {"owner": {"reputation": 311, "user_id": 3948506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d528c41d82cb9c9d263f554a61d7fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Kshitij", "link": "https://stackoverflow.com/users/3948506/kshitij"}, "edited": false, "score": 0, "creation_date": 1533029977, "post_id": 51609634, "comment_id": 90185045, "body": "I think you are getting error because of this,  <code>else     cookies = {}   end</code>  It has no <code>if</code> statement and it is expecting <code>end</code> for <code>loop do</code>, instead of <code>else</code>."}, {"owner": {"reputation": 19, "user_id": 9825021, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "digital king", "link": "https://stackoverflow.com/users/9825021/digital-king"}, "edited": false, "score": 0, "creation_date": 1533030214, "post_id": 51609634, "comment_id": 90185224, "body": "Makes Sense, How will I go about fixing this? Where exactly should I add the if statement."}, {"owner": {"reputation": 311, "user_id": 3948506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d528c41d82cb9c9d263f554a61d7fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Kshitij", "link": "https://stackoverflow.com/users/3948506/kshitij"}, "edited": false, "score": 0, "creation_date": 1533030820, "post_id": 51609634, "comment_id": 90185640, "body": "You didn&#39;t enter on which condition you want <code>cookies</code> to be processed. It should be like, <code>if your_condition</code> <code>cookies = method1</code> <code>else</code> <code>cookies = method2 # {}</code> <code>end</code> Also you didn&#39;t close <code>end</code> for your <code>loop</code>."}], "owner": {"reputation": 19, "user_id": 9825021, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "digital king", "link": "https://stackoverflow.com/users/9825021/digital-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533043486, "creation_date": 1533028240, "last_edit_date": 1533043486, "question_id": 51609634, "link": "https://stackoverflow.com/questions/51609634/ruby-server-rb-not-working-on-terminal", "title": "ruby server.rb not working on terminal", "body": "<p>Let me begin by saying I have very little knowledge of this topic. When I run ruby server.rb I get a syntax error. I fix the first error and I get another error so I'm not sure what is going on.</p>\n\n<p><strong>server.rb</strong></p>\n\n<pre><code>require 'socket'\nserver = TCPServer.new 9999\n\nPAGES = {\n  \"/\" =&gt; \"Hi, welcome to the home page!\",\n  \"/about\" =&gt; \"About us: we are http hackers\",\n  \"/news\" =&gt; \"We haven't made much news yet with this server, but stay tuned\"\n}\n\nPAGE_NOT_FOUND = \"Page not found type.\"\n\nloop do\n  session = server.accept\n  request = []\n  while (line = session.gets) &amp;&amp; (line.chomp.length &gt; 0)\n    request &lt;&lt; line.chomp\n  end\n  puts \"finished reading\"\n\n  http_method, path, protocol = request[0].split(' ') \n\n  cookie_header = request.detect { |line| line=~ /^Cookie: / }\n  cookie_parts = cookie_header.sub /^Cookie: /,''\n    cookie_parts = cookie_parts.split(';')\n    cookie_parts = cookie_parts.map { |cookie| cookie.split('=') }\n    cookies = Hash[*cookie_parts.flatten]\n  else\n    cookies = {}\n  end\n\n  cookies[\"session_key\"] ||=Time.now.to_f\n  count = cookies[\"session_count\"].to_i\n  count += 1\n  cookies[\"session_count\"] = count\n\n\n\n  if PAGES.keys.include? path\n    status = \"200 OK\"\n    response_body = PAGES[path]\n  else\n    status = \"404 Not Found\"\n    response_body = PAGE_NOT_FOUND\n  end\n\n  session.puts &lt;&lt;-HEREDOC\nHTTP/1.1 #{status}\nset-cookie:session_key=#{cookies[\"session_key\"]}\nget-cookie:session_count=#{cookies[\"session_count\"]}\n\n#{response_body}\nthis was visit number #{cookies[\"session_count\"]}\n  HEREDOC\n\n  session.close\nend\n</code></pre>\n\n<p>This is the first error.</p>\n\n<pre><code>server.rb:27: syntax error, unexpected keyword_else, expecting keyword_end\n   else\n       ^\n\nserver.rb:29: syntax error, unexpected keyword_end, expecting end-of-input\n   end\n      ^\n</code></pre>\n\n<p>I thought It would be fixed if I get rid of line 27 - 29 but I guess not.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 1, "creation_date": 1533025888, "post_id": 51608783, "comment_id": 90182582, "body": "&quot;blar blar (error text...)&quot; is what we need to see to help you..."}, {"owner": {"reputation": 1, "user_id": 10074773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0piKUe5M3FU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7r2sZbPjZ_DMLlQE24gMFZ1EflPlg/mo/photo.jpg?sz=128", "display_name": "CHOI JUN HO", "link": "https://stackoverflow.com/users/10074773/choi-jun-ho"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1533026170, "post_id": 51608783, "comment_id": 90182742, "body": "I edit it, please check this question... :("}, {"owner": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1533026471, "post_id": 51608783, "comment_id": 90182903, "body": "<code>user.id</code> should be <code>user_id</code> and <code>through: :likes</code>"}, {"owner": {"reputation": 1, "user_id": 10074773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0piKUe5M3FU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7r2sZbPjZ_DMLlQE24gMFZ1EflPlg/mo/photo.jpg?sz=128", "display_name": "CHOI JUN HO", "link": "https://stackoverflow.com/users/10074773/choi-jun-ho"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1533026619, "post_id": 51608783, "comment_id": 90182996, "body": "Thank you.. Easy error.. I understand it."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10074773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0piKUe5M3FU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7r2sZbPjZ_DMLlQE24gMFZ1EflPlg/mo/photo.jpg?sz=128", "display_name": "CHOI JUN HO", "link": "https://stackoverflow.com/users/10074773/choi-jun-ho"}, "is_accepted": true, "score": 0, "last_activity_date": 1533027332, "creation_date": 1533027332, "answer_id": 51609345, "question_id": 51608783, "link": "https://stackoverflow.com/questions/51608783/in-cloud9-when-i-using-rails-s-and-it-makes-this-error-what-is-it/51609345#51609345", "title": "In cloud9, when I using &#39;rails s&#39; and it makes this error. What is it?", "body": "<pre><code>user.id \n</code></pre>\n\n<p>should be </p>\n\n<pre><code>user_id\n</code></pre>\n\n<p>and </p>\n\n<pre><code>through: :likes\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10074773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0piKUe5M3FU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7r2sZbPjZ_DMLlQE24gMFZ1EflPlg/mo/photo.jpg?sz=128", "display_name": "CHOI JUN HO", "link": "https://stackoverflow.com/users/10074773/choi-jun-ho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 51609345, "answer_count": 1, "score": -3, "last_activity_date": 1533027833, "creation_date": 1533025607, "last_edit_date": 1533027833, "question_id": 51608783, "link": "https://stackoverflow.com/questions/51608783/in-cloud9-when-i-using-rails-s-and-it-makes-this-error-what-is-it", "title": "In cloud9, when I using &#39;rails s&#39; and it makes this error. What is it?", "body": "<pre><code>ec2-user:~/environment/research (master) $ rails s\n\n=&gt; Booting Puma\n=&gt; Rails 5.2.0 application starting in development \n=&gt; Run `rails server -h` for more startup options\nExiting\n\n/usr/local/rvm/gems/ruby-2.4.1/gems/bootsnap-1.3.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:50:in `load': /home/ec2-user/environment/research/app/models/user.rb:9: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '(' (SyntaxError)\n\ns_many :liked_posts, through :likes, source :post\n                             ^\n/home/ec2-user/environment/research/app/models/user.rb:12: syntax error, unexpected ':'\n    Like.find_by(user.id: self.id, post_id: post.id).pr\n                        ^\n/home/ec2-user/environment/research/app/models/user.rb:12: syntax error, unexpected tLABEL, expecting '='\n_by(user.id: self.id, post_id: post.id).present?\n                               ^\n/home/ec2-user/environment/research/app/models/user.rb:12: syntax error, unexpected ')', expecting keyword_end\nid: self.id, post_id: post.id).present?\n                             ^\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "installation"], "comments": [{"owner": {"reputation": 3428, "user_id": 4763309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcdc984b368da4f84e8f6fe92e5308a2?s=128&d=identicon&r=PG&f=1", "display_name": "mrkernelpanic", "link": "https://stackoverflow.com/users/4763309/mrkernelpanic"}, "edited": false, "score": 2, "creation_date": 1533023977, "post_id": 51608203, "comment_id": 90181494, "body": "Wow, 0 effort from you. If you would have looked into the naviagtion of your Link you would see &quot;Download&quot; and voila there is a section <code>Ways of Installing Ruby</code> which leads for windows to <a href=\"https://rubyinstaller.org/\" rel=\"nofollow noreferrer\">rubyinstaller.org</a>"}, {"owner": {"reputation": 31, "user_id": 10159250, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mXtNpMqqFy4/AAAAAAAAAAI/AAAAAAAABS0/BiVJ7lRV5b8/photo.jpg?sz=128", "display_name": "stark45", "link": "https://stackoverflow.com/users/10159250/stark45"}, "reply_to_user": {"reputation": 3428, "user_id": 4763309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcdc984b368da4f84e8f6fe92e5308a2?s=128&d=identicon&r=PG&f=1", "display_name": "mrkernelpanic", "link": "https://stackoverflow.com/users/4763309/mrkernelpanic"}, "edited": false, "score": 0, "creation_date": 1533029159, "post_id": 51608203, "comment_id": 90184541, "body": "@mrkernelpanic if I would have found an installer for the version 2.3.4 in the archives of rubyinstaller.org, why on earth would I go through the trouble of posting a question here."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533033002, "post_id": 51608203, "comment_id": 90187039, "body": "If you are absolutely stuck with that exact version without deviation, you are going to have to probably build from source. On Windows, this is not fun. You need to install a ming, msys, etc. get it all setup properly (all not fun, even for people who know what they are doing). Are you certain you need 2.3.4, that is a strangely specific requirement."}, {"owner": {"reputation": 31, "user_id": 10159250, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mXtNpMqqFy4/AAAAAAAAAAI/AAAAAAAABS0/BiVJ7lRV5b8/photo.jpg?sz=128", "display_name": "stark45", "link": "https://stackoverflow.com/users/10159250/stark45"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1533036037, "post_id": 51608203, "comment_id": 90189016, "body": "@ForeverZer0 It is indeed a strange requirement. I am trying to set up sharetribe locally; in their documentation, Sharetribe specifically asks you to set up Ruby 2.3.4. I tried setting it up with other versions of Ruby but they won&#39;t work :("}, {"owner": {"reputation": 784, "user_id": 7970365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ea30f5ef13a4593ad0eafd20304601?s=128&d=identicon&r=PG", "display_name": "D1ceWard", "link": "https://stackoverflow.com/users/7970365/d1ceward"}, "edited": false, "score": 0, "creation_date": 1533044934, "post_id": 51608203, "comment_id": 90195187, "body": "@stark45 if you have access to the Sharetribe <code>Gemfile</code> just change <code>ruby &#39;2.3.4&#39;</code> into <code>ruby &#39;2.3.3&#39;</code> or whatever version (2.4 shouldn&#39;t cause a lots incompatibilities issue with an Rails app)"}, {"owner": {"reputation": 63, "user_id": 3725578, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JSZfI.png?s=128&g=1", "display_name": "Janjua", "link": "https://stackoverflow.com/users/3725578/janjua"}, "edited": false, "score": 0, "creation_date": 1612342622, "post_id": 51608203, "comment_id": 116733845, "body": "@stark45 were you able to find a solution to this problem?"}], "answers": [{"comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 1, "creation_date": 1533032672, "post_id": 51609850, "comment_id": 90186823, "body": "Definitely don&#39;t go without DevKit. You will be quite screwed trying to install a vast number of extremely common and useful gems. It is bigger install, but as stated here, practically necessary on a non-*nix machine."}], "tags": [], "owner": {"reputation": 784, "user_id": 7970365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ea30f5ef13a4593ad0eafd20304601?s=128&d=identicon&r=PG", "display_name": "D1ceWard", "link": "https://stackoverflow.com/users/7970365/d1ceward"}, "is_accepted": false, "score": 0, "last_activity_date": 1533044523, "last_edit_date": 1533044523, "creation_date": 1533028870, "answer_id": 51609850, "question_id": 51608203, "link": "https://stackoverflow.com/questions/51608203/how-to-install-ruby-2-3-4-on-windows-without-the-rubyinstaller-2-3-4/51609850#51609850", "title": "How to install ruby 2.3.4 on windows without the RubyInstaller 2.3.4?", "body": "<blockquote>\n  <p>We have several tools on each major platform to install Ruby:</p>\n  \n  <p>...\n  On Windows machines, you can use RubyInstaller.</p>\n</blockquote>\n\n<p><a href=\"https://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">https://rubyinstaller.org/downloads/</a></p>\n\n<p>But the last ruby installer hotfix version is 2.3.3 for 2.3 version and without Devkit, which is almost mandatory on Windows.</p>\n\n<p><a href=\"https://rubyinstaller.org/downloads/archives/\" rel=\"nofollow noreferrer\">https://rubyinstaller.org/downloads/archives/</a></p>\n\n<p>So i recommend you to upgrade your Ruby version or switch environment since Windows is painfull and not for beginner (lots of issues with gems using C language).</p>\n\n<p>Upgrade from 2.3 to 2.4 (for example)\n<a href=\"https://wyeworks.com/blog/2016/6/22/behavior-changes-in-ruby-2.4\" rel=\"nofollow noreferrer\">https://wyeworks.com/blog/2016/6/22/behavior-changes-in-ruby-2.4</a></p>\n"}, {"tags": [], "owner": {"reputation": 2812, "user_id": 4433204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fbdb23ce46c68705323ecbb1d7f8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jaime", "link": "https://stackoverflow.com/users/4433204/jaime"}, "is_accepted": false, "score": 0, "last_activity_date": 1578078815, "last_edit_date": 1578078815, "creation_date": 1578070713, "answer_id": 59582429, "question_id": 51608203, "link": "https://stackoverflow.com/questions/51608203/how-to-install-ruby-2-3-4-on-windows-without-the-rubyinstaller-2-3-4/59582429#59582429", "title": "How to install ruby 2.3.4 on windows without the RubyInstaller 2.3.4?", "body": "<p>You may try the <a href=\"http://railsinstaller.org/en\" rel=\"nofollow noreferrer\">Rails installer for Windows, with Ruby 2.3.3</a>. It includes Ruby, Devkit and Git.</p>\n"}], "owner": {"reputation": 31, "user_id": 10159250, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mXtNpMqqFy4/AAAAAAAAAAI/AAAAAAAABS0/BiVJ7lRV5b8/photo.jpg?sz=128", "display_name": "stark45", "link": "https://stackoverflow.com/users/10159250/stark45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1588, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1578078815, "creation_date": 1533023699, "last_edit_date": 1533029513, "question_id": 51608203, "link": "https://stackoverflow.com/questions/51608203/how-to-install-ruby-2-3-4-on-windows-without-the-rubyinstaller-2-3-4", "title": "How to install ruby 2.3.4 on windows without the RubyInstaller 2.3.4?", "body": "<p>I have to stick with the version 2.3.4 mandatorily and I am not able to find any windows installer to install ruby 2.3.4. The only resource I found is a tar/zip file that is available at <a href=\"https://www.ruby-lang.org/en/news/2017/03/30/ruby-2-3-4-released/\" rel=\"nofollow noreferrer\">https://www.ruby-lang.org/en/news/2017/03/30/ruby-2-3-4-released/</a></p>\n\n<p>I have no idea how to install this,I struggled doing the same using PIK but that couldn't help either,can someone please provide some suggestions how to install 2.3.4 version of ruby.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533023193, "post_id": 51607986, "comment_id": 90181071, "body": "You are using too many instance variables. Use them only where you want to access them in some private method or in the views. Otherwise, prefer local variables."}, {"owner": {"reputation": 532, "user_id": 2256370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0385d51ad69470a8cd4d2f5fc63c7bc6?s=128&d=identicon&r=PG", "display_name": "Amirol Ahmad", "link": "https://stackoverflow.com/users/2256370/amirol-ahmad"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533023341, "post_id": 51607986, "comment_id": 90181141, "body": "@JagdeepSingh ya i will take note of that"}], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 8267417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qgllr-3VCV4/AAAAAAAAAAI/AAAAAAAAAAo/E_crAMNR-fM/photo.jpg?sz=128", "display_name": "gasc", "link": "https://stackoverflow.com/users/8267417/gasc"}, "edited": false, "score": 0, "creation_date": 1533039084, "post_id": 51608188, "comment_id": 90191083, "body": "A little suggestion. I&#39;ll probably change the instance variables to local variables, since (apparently) they&#39;re not used in any view or helper."}], "tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": true, "score": 5, "last_activity_date": 1533023661, "creation_date": 1533023661, "answer_id": 51608188, "question_id": 51607986, "link": "https://stackoverflow.com/questions/51607986/rails-fat-controller-if-else-condition/51608188#51608188", "title": "RAILS: fat controller IF ELSE condition", "body": "<pre><code>def check\n  @user = User.find_or_create_by(email: params[:friends][0])\n  @friend = User.find_or_create_by(email: params[:friends][1])\n\n  if Friendship.where(user: @user, friend: @friend).exists?\n    render json: {message: \"Relationship already establish\"}\n  else\n    @user.friendships.create(friend_id: @friend.id)\n    render json: {success: true}\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 532, "user_id": 2256370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0385d51ad69470a8cd4d2f5fc63c7bc6?s=128&d=identicon&r=PG", "display_name": "Amirol Ahmad", "link": "https://stackoverflow.com/users/2256370/amirol-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 51608188, "answer_count": 1, "score": -1, "last_activity_date": 1533029039, "creation_date": 1533022972, "question_id": 51607986, "link": "https://stackoverflow.com/questions/51607986/rails-fat-controller-if-else-condition", "title": "RAILS: fat controller IF ELSE condition", "body": "<p>i have a quite complicated if else condition in my method here and was thinking to make it simplify and easier to read.</p>\n\n<pre><code>def check\n  @friends = params[:friends]\n  @key = User.find_by_email @friends[0]\n  @val = User.find_by_email @friends[1]\n  user1 = User.where(email: @friends[0])\n  user2 = User.where(email: @friends[1])\n\n  if Friendship.where(user: @key, friend: @val).exists?\n    render json: {message: \"Relationship already establish\"}\n  else\n    if user1.exists? &amp;&amp; !user2.exists?\n      @user = @key\n      @friend = User.create email: @friends[1]\n      @user.friendships.create friend_id: @friend.id\n      render json: {success: true}\n\n    elsif !user1.exists? &amp;&amp; user2.exists?\n      @friend = @val\n      @user = User.create email: @friends[0]\n      @user.friendships.create friend_id: @friend.id\n      render json: {success: true}\n\n    elsif user1.exists? &amp;&amp; user2.exists?\n      if Friendship.where(user: @key, friend: @val).exists?\n        render json: {message: \"Relationship already establish\"}\n      else\n        @user = @key\n        @friend = @val\n        @user.friendships.create friend_id: @friend.id\n        render json: {success: true}\n      end\n\n    else\n      @user = User.create email: @friends[0]\n      @friend = User.create email: @friends[1]\n      @user.friendships.create friend_id: @friend.id\n\n      render json: {success: true}\n    end\n  end\nend\n</code></pre>\n\n<p>is there any other way to simplify this method but still give me the correct result</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10143007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081871b3706cdddba498168ed8dc4ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Amy", "link": "https://stackoverflow.com/users/10143007/amy"}, "edited": false, "score": 0, "creation_date": 1533030414, "post_id": 51607942, "comment_id": 90185359, "body": "the course controller is for the admin team , there all the courses should be displayed. But the course which is selected as published only those courses to be displayed in frontend page. I have updated my question it has my view code that is displayed in frontend"}, {"owner": {"reputation": 13, "user_id": 10143007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081871b3706cdddba498168ed8dc4ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Amy", "link": "https://stackoverflow.com/users/10143007/amy"}, "edited": false, "score": 0, "creation_date": 1533031365, "post_id": 51607942, "comment_id": 90186016, "body": "i changed that and when i try to publish a course it tells that it could not find the course id and shows error in this line"}, {"owner": {"reputation": 13, "user_id": 10143007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081871b3706cdddba498168ed8dc4ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Amy", "link": "https://stackoverflow.com/users/10143007/amy"}, "edited": false, "score": 0, "creation_date": 1533031369, "post_id": 51607942, "comment_id": 90186018, "body": "def fetch_course       @course = Course.find(params.require(:id)) end"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 13, "user_id": 10143007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081871b3706cdddba498168ed8dc4ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Amy", "link": "https://stackoverflow.com/users/10143007/amy"}, "edited": false, "score": 0, "creation_date": 1533031666, "post_id": 51607942, "comment_id": 90186219, "body": "This question is already very broad and this error is not directly related to what your original question was: &quot;Trouble in displaying published only courses to users&quot;. This answer hopefully solves that part of your application. For further issues, i would recommend you asking different question. Extending the scope of an existing question is not good practice."}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "reply_to_user": {"reputation": 13, "user_id": 10143007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081871b3706cdddba498168ed8dc4ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Amy", "link": "https://stackoverflow.com/users/10143007/amy"}, "edited": false, "score": 0, "creation_date": 1533032740, "post_id": 51607942, "comment_id": 90186861, "body": "@Amy, try <code>def fetch_course   @course = Course.friendly.find(params.require(:id)) end</code> or method that you used to find course before method publish. That answer is correct."}, {"owner": {"reputation": 13, "user_id": 10143007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081871b3706cdddba498168ed8dc4ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Amy", "link": "https://stackoverflow.com/users/10143007/amy"}, "edited": false, "score": 0, "creation_date": 1533032918, "post_id": 51607942, "comment_id": 90186970, "body": "ya the method is correct leo  but when i click on publish button it tells it cannot find the course, it throws the error"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 13, "user_id": 10143007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081871b3706cdddba498168ed8dc4ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Amy", "link": "https://stackoverflow.com/users/10143007/amy"}, "edited": false, "score": 0, "creation_date": 1533033087, "post_id": 51607942, "comment_id": 90187089, "body": "@Amy most probably, something is wrong with the way you send request to publish/unpublish courses. We can&#39;t tell what exactly unless we have the view code and server logs for the request."}, {"owner": {"reputation": 13, "user_id": 10143007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081871b3706cdddba498168ed8dc4ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Amy", "link": "https://stackoverflow.com/users/10143007/amy"}, "edited": false, "score": 0, "creation_date": 1533033676, "post_id": 51607942, "comment_id": 90187483, "body": "@JagdeepSingh in my course.index.view i have added a publish link for the course where it fetches the particular id of the course"}, {"owner": {"reputation": 13, "user_id": 10143007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081871b3706cdddba498168ed8dc4ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Amy", "link": "https://stackoverflow.com/users/10143007/amy"}, "edited": false, "score": 0, "creation_date": 1533033679, "post_id": 51607942, "comment_id": 90187487, "body": "&lt;% @courses.each do |course| %&gt; \t\t\t\t\t\t\t\t&lt;tr&gt; \t\t\t\t\t\t\t\t\t&lt;td&gt;&lt;%= course.id %&gt;&lt;/td&gt; \t\t\t\t\t\t\t\t\t&lt;td&gt; \t\t\t\t\t\t\t\t\t\t&lt;%= link_to &quot;Publish&quot;, publish_course_path(course), method: :put, data: { confirm: &#39;You want to publish the course?&#39; } %&gt; \t\t\t\t\t\t\t\t\t\t&lt;%= link_to &quot;UnPublish&quot;, unpublsh_course_path(@courses), method: :put, data: { confirm: &#39;You want to unpublish the course?&#39; } %&gt; \t\t\t\t\t\t\t\t\t&lt;/td&gt; \t\t\t\t\t\t\t\t&lt;/tr&gt; \t\t\t\t\t\t\t&lt;% end %&gt;"}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1533030708, "last_edit_date": 1533030708, "creation_date": 1533022805, "answer_id": 51607942, "question_id": 51607466, "link": "https://stackoverflow.com/questions/51607466/to-display-the-content-only-after-clicking-publish-button-in-ruby-on-rails/51607942#51607942", "title": "To display the content only after clicking publish button in Ruby on rails", "body": "<p><strong>Disclaimer:</strong> I don't know why are you cloning the course record just to make it published/unpublished. Below approach is a bit different from yours. Use if you feel it's better.</p>\n\n<hr>\n\n<p>Why do you have two separate columns to store the published/unpublished state? If one of them is <code>true</code>, other would (and should) always be <code>false</code>. Right?</p>\n\n<p>You can drop one of them, specifically <em>\"unpublish\"</em> and still handle this feature using another one (with a rename). <a href=\"https://edgeguides.rubyonrails.org/active_record_migrations.html#using-the-change-method\" rel=\"nofollow noreferrer\">Change your database schema</a> to following:</p>\n\n<pre><code>create_table \"courses\", force: :cascade do |t|\n  t.boolean \"published\"\n  t.index [\"slug\"], name: \"index_courses_on_slug\", unique: true\nend\n</code></pre>\n\n<p>Now, add routes and controller actions to update the state of a course:</p>\n\n<p><em>config/routes.rb</em></p>\n\n<pre><code>resources :courses do\n  member do\n    put :publish\n    put :unpublish\n  end\nend\n</code></pre>\n\n<p>Note, i used <code>put</code> instead of <code>get</code>, as we are updating the course record here and 'PUT' request is the appropriate request type to do that.</p>\n\n<p><em>courses_controller.rb</em></p>\n\n<pre><code>before_action :fetch_course, only: [:publish, :unpublish]\n\ndef publish\n  if @course.update(published: true)\n    render_success\n  else\n    render_failure\n  end\nend\n\ndef unpublish\n  if @course.update(published: false)\n    render_success\n  else\n    render_failure\n  end\nend\n\nprivate\n\ndef fetch_course\n  @course = Course.find(params.require(:id))\nend\n</code></pre>\n\n<p>I believe you already have the logic in view to make requests to these actions on clicking \"Publish\"/\"Unpublish\" button.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Including the logic to show only published courses to users:</p>\n\n<p>Add a <a href=\"https://guides.rubyonrails.org/active_record_querying.html#scopes\" rel=\"nofollow noreferrer\">scope</a> in <code>Course</code> model to fetch courses with <code>published: true</code>:</p>\n\n<p><em>models/course.rb</em></p>\n\n<pre><code>scope :published, -&gt; { where(published: true) }\n</code></pre>\n\n<p><em>whatever_controller.rb</em></p>\n\n<pre><code>def upcomingcourse\n  @users = User.order('created_at DESC')\n  @location = Location.friendly.find(params[:location])\n  @category = Category.friendly.find(params[:category])\n\n  @courses = @location ? @location.courses.published : []\n\n  # Don't know what are these, but it should work.\n  @events = @location&amp;.events || []\n  @courses = @courses + @events\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 10143007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081871b3706cdddba498168ed8dc4ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Amy", "link": "https://stackoverflow.com/users/10143007/amy"}, "edited": false, "score": 0, "creation_date": 1533033013, "post_id": 51609100, "comment_id": 90187046, "body": "Thanks for the reply"}], "tags": [], "owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "is_accepted": false, "score": 0, "last_activity_date": 1533026586, "creation_date": 1533026586, "answer_id": 51609100, "question_id": 51607466, "link": "https://stackoverflow.com/questions/51607466/to-display-the-content-only-after-clicking-publish-button-in-ruby-on-rails/51609100#51609100", "title": "To display the content only after clicking publish button in Ruby on rails", "body": "<p>In addition to what Jagdeep already suggested: I would change the show part to use a scope on the Course model:</p>\n\n<p>course.rb</p>\n\n<pre><code>class Course &lt; App:Model\n  scope :published, -&gt; { where(published: true) }\nend\n</code></pre>\n\n<p>Then update your show method like this:</p>\n\n<p>courses_controller.rb</p>\n\n<pre><code>class CoursesController &lt; ApplicationController\n\n  def show\n    @course = Course.published.find(params[:id])\n  end\n\nend\n</code></pre>\n\n<p>This will give a RecordNotFound error in case the record is not published. I guess this is more Rails'ish, by delegating this logic to the Model, instead of handling it in the controller.</p>\n"}], "owner": {"reputation": 13, "user_id": 10143007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081871b3706cdddba498168ed8dc4ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Amy", "link": "https://stackoverflow.com/users/10143007/amy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1533030708, "creation_date": 1533021180, "last_edit_date": 1533028727, "question_id": 51607466, "link": "https://stackoverflow.com/questions/51607466/to-display-the-content-only-after-clicking-publish-button-in-ruby-on-rails", "title": "To display the content only after clicking publish button in Ruby on rails", "body": "<p>I have a course module where once created it displays in the front end. I want to add a publish and unpublish button for that. Where only when publish button is clicked it should show the details in the front end. </p>\n\n<p>So for that i added the column in db.</p>\n\n<pre><code>create_table \"courses\", force: :cascade do |t|\n  t.boolean \"publish\"\n  t.boolean \"unpublish\"\n  t.index [\"slug\"], name: \"index_courses_on_slug\", unique: true\n end\n</code></pre>\n\n<p>routes:</p>\n\n<pre><code>resources :courses do\n  collection do\n    delete 'destroy_multiple'\n  end\n  member do\n    post :copy\n    get :publish\n    get :unpublish\n  end\nend\n</code></pre>\n\n<p>and in course_controller i defined an action</p>\n\n<pre><code>def publish\n publish_course = @course.dup\n publish_course.title = \"Copied from:#{@course.id} #{@course.title}\"\n respond_to do |format|\n   if clone_course.save\n     format.html { redirect_to publish_course, notice: \"Course was successfully published from #{@course.id}: #{@course.title}.\" }\n     format.json { render :show, status: :created, location: @publish_course }\n   else\n     format.html {  redirect_to courses_path, alert: \"Please try again. Something went wrong..\" }\n     format.json { render json: publish_course.errors, status: :unprocessable_entity }\n   end\n  end\nend\n</code></pre>\n\n<p>I need to wire it up with the frontend now. How to display this? Can anyone help?</p>\n\n<p>course would be displaced in this upcomingcourse.html.erb</p>\n\n<pre><code>&lt;div class=\"componentheading\"&gt;\n    &lt;h2&gt;&lt;%= @location.location_name %&gt;&lt;/h2&gt; &lt;h3&gt;Upcoming Courses at this location&lt;/h3&gt;\n&lt;/div&gt;\n&lt;% @courses.sort { |a,b| (a.try(:start_date) || a.try(:date))  &lt;=&gt; (b.try(:start_date) || b.try(:date)) }.each do |course|%&gt;\n   &lt;ul class=\"list-unstyled\"&gt;\n    &lt;li class=\"media\"&gt;\n       &lt;div class=\"mat_event_image_holder col-xs-12 col-sm-3 col-md-3 col-lg-2 \"&gt;\n          &lt;div class=\"mat_event_image_holder_inner\"&gt;\n            &lt;%=image_tag course.image_url, :size =&gt; \"150x200\", :class=&gt; 'uk-overlay-scale'%&gt;\n          &lt;/div&gt;\n       &lt;/div&gt;\n   &lt;/li&gt;\n  &lt;/ul&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p></p>\n\n<p>and the controller which renders that is </p>\n\n<pre><code>def upcomingcourse\n    @users = User.order('created_at DESC')\n    @location = Location.friendly.find(params[:location])\n    @category = Category.friendly.find(params[:category])\n    @courses = @location&amp;.courses || []\n    @events = @location&amp;.events || []\n    @courses  = @courses + @events\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "paperclip"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 3, "last_activity_date": 1533025187, "creation_date": 1533025187, "answer_id": 51608650, "question_id": 51607325, "link": "https://stackoverflow.com/questions/51607325/two-paperclip-attachments-pointing-to-same-file/51608650#51608650", "title": "Two Paperclip attachments pointing to same file", "body": "<p>No, Paperclip doesn't support this.</p>\n\n<p>And even if you managed to do this manually by manipulating values in the database, imagine what will happen, if one of the records is deleted...</p>\n"}], "owner": {"reputation": 119, "user_id": 4521784, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-ERW2wkdUi0s/AAAAAAAAAAI/AAAAAAAAAdk/ncXgiU_XLnY/photo.jpg?sz=128", "display_name": "Emil B&#230;kdahl", "link": "https://stackoverflow.com/users/4521784/emil-b%c3%a6kdahl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 51608650, "answer_count": 1, "score": 0, "last_activity_date": 1533025187, "creation_date": 1533020704, "question_id": 51607325, "link": "https://stackoverflow.com/questions/51607325/two-paperclip-attachments-pointing-to-same-file", "title": "Two Paperclip attachments pointing to same file", "body": "<p>Is it possible to copy a Paperclip attachment from one model to another without creating new files? In other words: Can two Paperclip instances point to the same file?</p>\n"}, {"tags": ["ruby", "error-handling", "hanami"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8346437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa6f13ae996d5ecf3972694d60f7f99?s=128&d=identicon&r=PG&f=1", "display_name": "user8346437", "link": "https://stackoverflow.com/users/8346437/user8346437"}, "edited": false, "score": 0, "creation_date": 1533030326, "post_id": 51609635, "comment_id": 90185297, "body": "Thanks. It seems right.  But the parameter validation can handle only BadRequest. How can I return different status code by the error raised inside of interactor? When <code>result.failure?</code> is true, I must know it failed with Database Error or RecordNotFound to return correct status code. I want to know the nice way to hide such a complexity from code."}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "reply_to_user": {"reputation": 41, "user_id": 8346437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa6f13ae996d5ecf3972694d60f7f99?s=128&d=identicon&r=PG&f=1", "display_name": "user8346437", "link": "https://stackoverflow.com/users/8346437/user8346437"}, "edited": false, "score": 0, "creation_date": 1533032108, "post_id": 51609635, "comment_id": 90186487, "body": "Raise an error on the wrapper is not a good idea. <code>nil</code> better than force exit with error RecordNotFound. Of course, you can do single <code>halt handle_error</code>, but no reason do something that would fail."}], "tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 0, "last_activity_date": 1533031185, "last_edit_date": 1533031185, "creation_date": 1533028248, "answer_id": 51609635, "question_id": 51607163, "link": "https://stackoverflow.com/questions/51607163/best-practice-of-error-handling-on-controller-and-interactor/51609635#51609635", "title": "Best practice of error handling on controller and interactor", "body": "<p>Hanami way is validating input parameters before each request handler. So, ClientError must be identified always before actions logic.</p>\n\n<pre><code>halt 400 unless params.valid? #halt ClientError\n#your code\nresult = users_show_interactor(id: params[:id])\nhalt 422 if result.failure? #ServerError\nhalt 404 unless result.user\n@user = result.user\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1586, "user_id": 1243967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af908b146b714030997e10a1f36f4410?s=128&d=identicon&r=PG", "display_name": "Aleksander Pohl", "link": "https://stackoverflow.com/users/1243967/aleksander-pohl"}, "is_accepted": false, "score": 1, "last_activity_date": 1533158860, "creation_date": 1533158860, "answer_id": 51642494, "question_id": 51607163, "link": "https://stackoverflow.com/questions/51607163/best-practice-of-error-handling-on-controller-and-interactor/51642494#51642494", "title": "Best practice of error handling on controller and interactor", "body": "<p>Not actually hanami-oriented way, but please have a look at <a href=\"http://dry-rb.org/gems/dry-monads/1.0/do-notation/\" rel=\"nofollow noreferrer\">dry-monads with do notation</a>. The basic idea is that you can write the interactor-like processing code in the following way</p>\n\n<pre><code>def some_action\n  value_1 = yield step_1\n  value_2 = yield step_2(value_1)\n  return yield(step_3(value_2))\nend \n\ndef step_1\n  if condition\n    Success(some_value)\n  else\n    Failure(:some_error_code)\n  end\nend\n\ndef step_2\n  if condition\n    Success(some_value)\n  else\n    Failure(:some_error_code_2)\n  end\nend\n</code></pre>\n\n<p>Then in the controller you can match the failures using <a href=\"http://dry-rb.org/gems/dry-matcher/\" rel=\"nofollow noreferrer\">dry-matcher</a>:</p>\n\n<pre><code>matcher.(result) do |m|\n  m.success do |v|\n    # ok\n  end\n\n  m.failure :some_error_code do |v|\n    halt 400\n  end\n\n  m.failure :some_error_2 do |v|\n    halt 422\n  end\nend\n</code></pre>\n\n<p>The matcher may be defined in the <code>prepend</code> code for all controller, so it's easy to remove the code duplication.</p>\n"}, {"tags": [], "owner": {"reputation": 1070, "user_id": 1401773, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/kxDMC.jpg?s=128&g=1", "display_name": "Rodrigo Vasconcelos", "link": "https://stackoverflow.com/users/1401773/rodrigo-vasconcelos"}, "is_accepted": false, "score": 0, "last_activity_date": 1535040281, "creation_date": 1535040281, "answer_id": 51990001, "question_id": 51607163, "link": "https://stackoverflow.com/questions/51607163/best-practice-of-error-handling-on-controller-and-interactor/51990001#51990001", "title": "Best practice of error handling on controller and interactor", "body": "<p>I normally go about by raising scoped errors in the interactor, then the controller only has to rescue the errors raised by the interactor and return the appropriate status response.</p>\n\n<p><strong>Interactor:</strong></p>\n\n<pre><code>module Users\n  class Delete\n    include Tnt::Interactor\n\n    class UserNotFoundError &lt; ApplicationError; end\n\n    def call(report_id)\n      deleted = UserRepository.new.delete(report_id)\n\n      fail_with!(UserNotFoundError) unless deleted\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>module Api::Controllers::Users\n  class Destroy\n    include Api::Action\n    include Api::Halt\n\n    params do\n      required(:id).filled(:str?, :uuid?)\n    end\n\n    def call(params)\n      halt 422 unless params.valid?\n\n      Users::Delete.new.call(params[:id])\n    rescue Users::Delete::UserNotFoundError =&gt; e\n      halt_with_status_and_error(404, e)\n    end\n  end\nend\n</code></pre>\n\n<p><code>fail_with!</code> and <code>halt_with_status_and_error</code> are helper methods common to my interactors and controllers, respectively.</p>\n\n<pre><code># module Api::Halt\ndef halt_with_status_and_error(status, error = ApplicationError)\n  halt status, JSON.generate(\n    errors: [{ key: error.key, message: error.message }],\n  )\nend\n\n# module Tnt::Interactor\ndef fail_with!(exception)\n  @__result.fail!\n  raise exception\nend\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8346437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa6f13ae996d5ecf3972694d60f7f99?s=128&d=identicon&r=PG&f=1", "display_name": "user8346437", "link": "https://stackoverflow.com/users/8346437/user8346437"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 809, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1544751429, "creation_date": 1533020122, "last_edit_date": 1544751429, "question_id": 51607163, "link": "https://stackoverflow.com/questions/51607163/best-practice-of-error-handling-on-controller-and-interactor", "title": "Best practice of error handling on controller and interactor", "body": "<pre><code># users_show_controller.rb\nclass Controllers::Users::Show\n  include Hanami::Action\n\n  params do\n    required(:id).filled(:str?)\n  end\n\n  def call(params)\n    result = users_show_interactor(id: params[:id])\n\n    halt 404 if result.failure?\n    @user = result.user\n  end\nend\n\n# users_show_interactor.rb\nclass Users::Show::Interactor\n  include Hanami::Interactor\n\n  expose :user\n  def call(:id)\n    @user = UserRepository.find_by(:id)\n  end\nend\n</code></pre>\n\n<p>I have a controller and a interactor like above.\nAnd I'm considering the better way to distinguish ClientError from ServerError, on the controller.</p>\n\n<p>I think It is nice if I could handle an error like below.</p>\n\n<pre><code>handle_exeption StandardError =&gt; :some_handler\n</code></pre>\n\n<p>But, hanami-interactor wraps errors raised inside themselves and so, controller receive errors through result object from interactor.</p>\n\n<p>I don't think that re-raising an error on the controller is good way.</p>\n\n<pre><code>result = some_interactor.call(params)\nraise result.error if result.failure\n</code></pre>\n\n<p>How about implementing the error handler like this?\nI know the <code>if</code> statement will increase easily and so this way is not smart.</p>\n\n<pre><code>def call(params)\n  result = some_interactor.call(params)\n  handle_error(result.error) if result.faulure?\nend\n\nprivate\n\ndef handle_error(error)\n  return handle_client_error(error) if error.is_a?(ClientError)\n  return server_error(error) if error.is_a?(ServerError)\nend\n</code></pre>\n"}, {"tags": ["ruby", "macos", "homebrew", "rbenv"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 2, "creation_date": 1533013743, "post_id": 51605677, "comment_id": 90176876, "body": "Ok, this comment is opinion based :) I suggest you to stick with Homebrew and rvm. Try follow this guide: <a href=\"https://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/\" rel=\"nofollow noreferrer\">moncefbelyamani.com/&hellip;</a>"}, {"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1533047283, "post_id": 51605677, "comment_id": 90196844, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/23781657/rbenv-installed-ruby-2-1-2-cannot-load-such-file-zlib-on-mac-osx-10-9-2\">rbenv installed ruby 2.1.2 cannot load such file -- zlib on MAC OSX 10.9.2</a>"}], "answers": [{"tags": [], "owner": {"reputation": 40432, "user_id": 1807667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/976dc9df3ea3d05a18e90f0cd9c29b7a?s=128&d=identicon&r=PG", "display_name": "Ortomala Lokni", "link": "https://stackoverflow.com/users/1807667/ortomala-lokni"}, "is_accepted": false, "score": 3, "last_activity_date": 1533051267, "creation_date": 1533051267, "answer_id": 51617121, "question_id": 51605677, "link": "https://stackoverflow.com/questions/51605677/getting-hard-time-installing-ruby-on-mac/51617121#51617121", "title": "Getting hard time installing Ruby on mac", "body": "<p>Homebrew has correctly installed the last version of ruby in <code>/usr/local/bin</code>. You can check it with:</p>\n\n<pre><code>/usr/local/bin/ruby --version\n</code></pre>\n\n<p>The macOS version of ruby is installed in <code>/usr/bin</code>. You can check it with:</p>\n\n<pre><code>/usr/bin/ruby --version\n</code></pre>\n\n<p>If you want to always run the Homebrew versions of installed tools, you have to put <code>/use/local/bin</code> before <code>/usr/bin</code> in your <code>PATH</code> environment variable. You can do this by adding the following line in your <code>~/.bash_profile</code>:</p>\n\n<pre><code>export PATH=\"/usr/local/bin:$PATH\"\n</code></pre>\n\n<p>P.S.: According to your macos ruby version, you don't have the last macOS version.</p>\n"}, {"tags": [], "owner": {"reputation": 3062, "user_id": 2223753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kCgjP.jpg?s=128&g=1", "display_name": "Aviram Fireberger", "link": "https://stackoverflow.com/users/2223753/aviram-fireberger"}, "is_accepted": false, "score": 0, "last_activity_date": 1597561301, "creation_date": 1597561301, "answer_id": 63434064, "question_id": 51605677, "link": "https://stackoverflow.com/questions/51605677/getting-hard-time-installing-ruby-on-mac/63434064#63434064", "title": "Getting hard time installing Ruby on mac", "body": "<p>The compile error log contains:</p>\n<blockquote>\n<p>The Ruby zlib extension was not compiled.</p>\n<p>ERROR: Ruby install aborted due to missing extensions</p>\n</blockquote>\n<p>Try installing &quot;zlib&quot; and then try again, by running:</p>\n<pre><code>brew install zlib\n</code></pre>\n"}], "owner": {"reputation": 8193, "user_id": 1471314, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/D8Djq.jpg?s=128&g=1", "display_name": "roger_that", "link": "https://stackoverflow.com/users/1471314/roger-that"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1597561301, "creation_date": 1533012922, "question_id": 51605677, "link": "https://stackoverflow.com/questions/51605677/getting-hard-time-installing-ruby-on-mac", "title": "Getting hard time installing Ruby on mac", "body": "<p>I am trying to install Ruby on my mac and that too the latest version but having trouble.</p>\n\n<p>The pre-installed ruby on mac is of verion <code>2.0</code> however, I need to upgrade the same to latest.</p>\n\n<p>I tried installing ruby with <code>Homebrew</code> like <code>brew install ruby</code> but whenever i check the version, it shows me the earlier version only. Refer Terminal screenshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Nkoxd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nkoxd.png\" alt=\"enter image description here\"></a></p>\n\n<p>Am trying to learn ruby  but this thing got me stuck for long. </p>\n\n<p>Have also tried another package manager <code>rbenv</code> and did <code>rbenv install 2.5.1</code> but that failed with the following error I have no idea about</p>\n\n<pre><code>The Ruby zlib extension was not compiled.\nERROR: Ruby install aborted due to missing extensions\nConfigure options used:\n  --prefix=/Users/vshukla/.rbenv/versions/2.5.1\n  --with-openssl-dir=/usr/local/opt/openssl\n  CC=clang\n  CFLAGS= -O3 -Wno-error=shorten-64-to-32 \n  LDFLAGS=-L/Users/vshukla/.rbenv/versions/2.5.1/lib \n  CPPFLAGS=-I/Users/vshukla/.rbenv/versions/2.5.1/include \n</code></pre>\n\n<p>Please guide.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "forms", "selectize.js"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 2, "creation_date": 1533019258, "post_id": 51605519, "comment_id": 90179013, "body": "Why don&#39;t you add your code (relevant only, if possible) to the question itself instead of attaching the links?"}, {"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533050176, "post_id": 51605519, "comment_id": 90198930, "body": "Thanks @JagdeepSingh I edited the question with the relevant code."}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1533294990, "post_id": 51605519, "comment_id": 90305308, "body": "where does it break? could you clearly distinct each step in this process and what are our clues on this malfunctions. 1) the user fills in the form (does it work? are the params submitted via http?) 2) the rails controller receives the request (what does not work here exactly? or is this totally outside your controller logic and inside the gem?) 3) model instance and saving (errors ..?)"}], "answers": [{"comments": [{"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1533415267, "post_id": 51673973, "comment_id": 90340543, "body": "Really appreciate this! Most detailed response I&#39;ve seen on Stackoverflow. I&#39;m definitely attempting to achieve Option 1. I wasn&#39;t aware of how to create the artist through Ajax, so you&#39;ve definitely pointed me in the right direction. First issue I ran into is that I have to pass <code>speaker_id</code> to the collection_select or else I get a <code>method missing</code> error on quotes/new, and then after that I had to remove <code>protect_from_forgery with: :exception</code> from my ApplicationController (as it also is in your demo app) or else I get this error\u2014<code>ActionController::InvalidAuthenticityToken</code>. Is that secure?"}, {"owner": {"reputation": 591, "user_id": 8502555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gysjl.jpg?s=128&g=1", "display_name": "e_a_o", "link": "https://stackoverflow.com/users/8502555/e-a-o"}, "reply_to_user": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1533512378, "post_id": 51673973, "comment_id": 90359527, "body": "Glad it helped in pointing you in the right direction.   Actually, the demo app was made with rails 5.2 which has <code>ActionController::Base.default_protect_from_forgery</code> set to true by default.  Can you add a link of what your code currently looks like so I can see if I can replicate the new errors you&#39;re having?"}, {"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 1, "creation_date": 1533515496, "post_id": 51673973, "comment_id": 90359985, "body": "Appreciate your help. Ended up switching to Option 2, with the modal because I realized there is another attribute other than just Name that needs to be set when creating a new artist."}], "tags": [], "owner": {"reputation": 591, "user_id": 8502555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gysjl.jpg?s=128&g=1", "display_name": "e_a_o", "link": "https://stackoverflow.com/users/8502555/e-a-o"}, "is_accepted": true, "score": 5, "last_activity_date": 1533305709, "last_edit_date": 1533305709, "creation_date": 1533303592, "answer_id": 51673973, "question_id": 51605519, "link": "https://stackoverflow.com/questions/51605519/how-to-use-selectize-js-to-find-or-create-a-rails-belongs-to-association/51673973#51673973", "title": "How to use Selectize.js to find or create a rails belongs_to association?", "body": "<p>If you must use the selectize user experience, you might need to create the artist/speaker via ajax using javascript. With the <code>selectize-rails</code> <a href=\"https://github.com/manuelvanrijn/selectize-rails\" rel=\"noreferrer\">gem</a>, <code>jquery-rails</code> and a bit of javascript code, you can either:</p>\n\n<ol>\n<li><p>create the artist/speaker via ajax and assign the value and id to the quotes form input - <a href=\"https://media.giphy.com/media/yMEow45RqC8HrOmmsD/giphy.gif\" rel=\"noreferrer\">see demo</a> or </p></li>\n<li><p>pop up a modal with the artist form, submit the form via ajax and assign the value and id to the quotes form input</p></li>\n</ol>\n\n<p>I've attempted to scaffold this <a href=\"https://github.com/esteedqueen/quotes-and-artists\" rel=\"noreferrer\">simple rails app</a> with a basic structure of what you're trying to achieve to show you an example of option 1. I've included setup instructions and a demo in the readme.</p>\n\n<p>Major changes required are:</p>\n\n<h3>Gem changes:</h3>\n\n<p>Add the <code>selectize-rails</code> and <code>jquery-rails</code> gems to your <code>Gemfile</code> and run bundle install.</p>\n\n<h3>HTML Form changes:</h3>\n\n<p>Add the selectize class to the collection_select input tag</p>\n\n<pre><code># /views/quotes/_form.html.erb\n\n&lt;%= f.collection_select :artist_id, Artist.order(:name), :id, :name, {prompt: 'Select an artist'}, {class: 'selectize'} %&gt;\n</code></pre>\n\n<h3>Javascript changes:</h3>\n\n<p>Create <code>/assets/javascript/quotes.js</code> and make the following changes.</p>\n\n<pre><code># /assets/javascript/quotes.js\n\n$(document).on(\"turbolinks:load\", function(){\n  $(\".selectize\").selectize({\n    create: function(input, callback) {\n      $.post('/artists.json', { artist: { name: input } })\n        .done(function(response){\n          console.log(response)\n          callback({value: response.id, text: response.name });\n        })\n    }\n    });\n})\n</code></pre>\n\n<h3>Modify your <code>artists_controller</code></h3>\n\n<p>Modify the <code>artists_controller#create</code> action method to be able to render json response.</p>\n\n<pre><code>  # POST /artists\n  # POST /artists.json\n  def create\n    @artist = Artist.new(artist_params)\n\n    respond_to do |format|\n      if @artist.save\n        format.html { redirect_to @artist, notice: 'Artist was successfully created.' }\n        format.json { render :show, status: :created, location: @artist }\n      else\n        format.html { render :new }\n        format.json { render json: @artist.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>You can also watch <a href=\"https://www.youtube.com/watch?v=cTbHCrm6uOU\" rel=\"noreferrer\">this GoRails video</a> to see how to achieve option 2.</p>\n"}, {"comments": [{"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1533515554, "post_id": 51691931, "comment_id": 90359995, "body": "This makes sense. Didn&#39;t realize I could create the association without the ID. Thanks for pointing that out."}], "tags": [], "owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "is_accepted": false, "score": 1, "last_activity_date": 1533450362, "creation_date": 1533450362, "answer_id": 51691931, "question_id": 51605519, "link": "https://stackoverflow.com/questions/51605519/how-to-use-selectize-js-to-find-or-create-a-rails-belongs-to-association/51691931#51691931", "title": "How to use Selectize.js to find or create a rails belongs_to association?", "body": "<p>If you're providing create-on-missing functionality, and the only needed value is the one in the selector input, consider skipping the <code>id</code> entirely:</p>\n\n<pre><code>class Quote &lt; ApplicationRecord\n  def speaker_name\n    speaker&amp;.name\n  end\n\n  def speaker_name=(name)\n    self.speaker = name.presence &amp;&amp; Artist.find_or_initialize_by(name: name)\n  end\n</code></pre>\n\n<p>And over in the view:</p>\n\n<pre><code>&lt;%= f.label :speaker, 'Who said it?' %&gt;\n&lt;%= f.collection_select :speaker_name, Artist.order(:name), :name, :name, {prompt: 'Select an artist'}, {class: 'form-control select-artist'} %&gt;\n</code></pre>\n\n<p>(with a matching change in <code>QuotesController#quote_params</code>)</p>\n\n<p>Then when you Selectize-ify the input, allowing new values to be typed, it should Just Work. Notably, this avoids eagerly creating the artist record via AJAX, which can create orphans if someone types an entry but then never submits the form.</p>\n"}], "owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1217, "favorite_count": 4, "accepted_answer_id": 51673973, "answer_count": 2, "score": 6, "last_activity_date": 1533450362, "creation_date": 1533011772, "last_edit_date": 1533050124, "question_id": 51605519, "link": "https://stackoverflow.com/questions/51605519/how-to-use-selectize-js-to-find-or-create-a-rails-belongs-to-association", "title": "How to use Selectize.js to find or create a rails belongs_to association?", "body": "<p>I'm having a hard time figuring out how to combine <a href=\"https://selectize.github.io/selectize.js/\" rel=\"noreferrer\">Selectize.js</a> with a belongs_to association in rails. I want to do something like this photo:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ol65m.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ol65m.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've attempted using <code>accepts_nested_attributes</code>, but that doesn't seem to work with a <code>belongs_to</code> relationship.</p>\n\n<p>I tried doing an auto-complete association like this <a href=\"http://railscasts.com/episodes/102-auto-complete-association-revised?view=asciicast\" rel=\"noreferrer\">railscast episode</a>.</p>\n\n<p>What I'd really like to do is use a Selectize style collection select to create the \"Speaker\" association if it's already in the database, but add a new one if it doesn't yet exist. Selectize enables me to add a new one, but I'm having trouble passing that through the form to create the new record in the associated model.  </p>\n\n<p>Here are my models:</p>\n\n<pre><code>class Quote &lt; ApplicationRecord\n  belongs_to :speaker,  class_name: \"Artist\"\n  belongs_to :topic,    class_name: \"Artist\"\nend\n</code></pre>\n\n<p><a href=\"https://gist.github.com/leemcalilly/f1f44617574b9706e415f342913e04b0\" rel=\"noreferrer\">Quote.rb</a></p>\n\n<pre><code>class Artist &lt; ApplicationRecord\n  has_many :spoken_quotes, class_name: \"Quote\", foreign_key: :speaker_id\n  has_many :topic_quotes,  class_name: \"Quote\", foreign_key: :topic_id\nend\n</code></pre>\n\n<p><a href=\"https://gist.github.com/leemcalilly/de615ea146159bb19059f5b68ad410c4\" rel=\"noreferrer\">Artist.rb</a></p>\n\n<p>And my form:</p>\n\n<pre><code>&lt;%= f.label :speaker, 'Who said it?' %&gt;\n&lt;%= f.collection_select :speaker_id, Artist.order(:name), :id, :name, {prompt: 'Select an artist'}, {class: 'form-control select-artist'} %&gt;\n</code></pre>\n\n<p><a href=\"https://gist.github.com/leemcalilly/2493f9b65025e6263eb1c99c94b35866\" rel=\"noreferrer\">_form.html.erb</a></p>\n\n<p>Controllers:</p>\n\n<p><a href=\"https://gist.github.com/leemcalilly/f9936be771d5bad500ee42ba53babd7a\" rel=\"noreferrer\">quotes_controller.rb</a></p>\n\n<p><a href=\"https://gist.github.com/leemcalilly/805020f958e09da21fd5dc48f4e099df\" rel=\"noreferrer\">artists_controller.rb</a></p>\n\n<p>How can I create a new Artist (as \"Speaker\") through the Quote.new form through the Selective-style collection select? The Selectize behavior is the user experience I'm looking for, I just can't figure out how to create the new Artist through the Quote form.</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1533012876, "post_id": 51605404, "comment_id": 90176640, "body": "I would argue that downloading files in a test is a code smell. IMO requests to the outside should always be stubbed in a test. Furthermore, it seems strange that the test download files and that the user should run rake to do something with these files. Can you please elaborate why you need to download the files? What do rspec and rake do with these files? Why do you need both tools?"}, {"owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1533035139, "post_id": 51605404, "comment_id": 90188481, "body": "@spickermann, gem does not download anything, so there isn&#39;t even anything to stub. Potentially huge binary files are needed for developers to run tests and benchmarks without storing them in git repo. Git LFS is of course is one of possible solutions but it: 1) hard to clean out from git log if you decide to 2) are limited by free quota (this is why I once decided to clean them out but had no success even with official scripts -- quota remained consumed even after they were be removed from the repo history), etc. so I put these files to an external enough reliable file storage."}], "answers": [{"tags": [], "owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "is_accepted": false, "score": 0, "last_activity_date": 1533015867, "creation_date": 1533015867, "answer_id": 51606138, "question_id": 51605404, "link": "https://stackoverflow.com/questions/51605404/where-do-i-put-common-development-methods-for-rspec-and-rake-in-my-gem-file-tree/51606138#51606138", "title": "Where do I put common development methods for rspec and rake in my gem file tree?", "body": "<p>There isn't really a standard for such a directory. The important part is to pick a name that, at a glance, doesn't sound like it's supposed to be included in the shipped gem.</p>\n\n<p>For some inspiration, rails/rails has a <code>tools</code>, and rubygems/rubygems has <code>util</code>. A top-level <code>support</code> seems like it'd make a fair choice too.</p>\n"}], "owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533015867, "creation_date": 1533010850, "question_id": 51605404, "link": "https://stackoverflow.com/questions/51605404/where-do-i-put-common-development-methods-for-rspec-and-rake-in-my-gem-file-tree", "title": "Where do I put common development methods for rspec and rake in my gem file tree?", "body": "<p>Here is current gem structure:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\u251c\u2500\u2500 Gemfile\n\u251c\u2500\u2500 LICENSE.txt\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 Rakefile\n\u251c\u2500\u2500 mygem.gemspec\n\u251c\u2500\u2500 images\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 1b1d4bde376084011d027bba1c047a4b.jpg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 1d468d064d2e26b5b5de9a0241ef2d4b.jpg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 309666c7b45ecbf8f13e85a0bd6b0a4c.jpg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 3f9f3db06db20d1d9f8188cd753f6ef4.jpg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 679634ff89a31279a39f03e278bc9a01.jpg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 6d97739b4a08f965dc9239dd24382e96.jpg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 71662d4d4029a3b41d47d5baf681ab9a.jpg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 92d90b8977f813af803c78107e7f698e.jpg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ad8a37f872956666c3077a3e9e737984.jpg\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 df0a3b93e9412536ee8a11255f974141.jpg\n\u251c\u2500\u2500 lib\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 mygem.rb\n\u2514\u2500\u2500 spec\n \u00a0\u00a0 \u2514\u2500\u2500 _spec.rb\n</code></pre>\n\n<p>The <code>./images</code> folder does not really exist until you run <code>rspec</code> the first time -- tests do download these binary files from a remote storage, use them and cache them here for later.<br>\nThere are also rake tasks that use these files and instead of leaving the developer a memo \"run this rake task only after you ran rspec\" I would like to put the download_and_keep() procedure in some common place callable by both rspec and rake. The question is <strong>what is the recommended place to put such method?</strong><br>\nThere is a folder <code>./spec/support</code> by rspec design but I'm thinking about switching to minitest so I need something more universal.</p>\n\n<p>P.S.: can't think up more tags for this question.</p>\n"}, {"tags": ["ruby", "oauth-2.0", "omniauth", "ruby-on-rails-5.1"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1533011941, "post_id": 51605346, "comment_id": 90176421, "body": "Devise is probably complaining that the email is nil."}, {"owner": {"reputation": 48, "user_id": 4471250, "user_type": "registered", "profile_image": "https://graph.facebook.com/1302047630/picture?type=large", "display_name": "Sasha Goldenson", "link": "https://stackoverflow.com/users/4471250/sasha-goldenson"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1533014577, "post_id": 51605346, "comment_id": 90177112, "body": "@JoshBrody I don&#39;t think that&#39;s the case. I have tried accounts that have email confirmed via <code>rails console</code> and they also do not work."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533019383, "post_id": 51605346, "comment_id": 90179084, "body": "<i>&quot;NormalUser type session never gets created&quot;</i> - Do you mean you are not able to create a <code>NormalUser</code> record OR not able to sign it in?"}, {"owner": {"reputation": 48, "user_id": 4471250, "user_type": "registered", "profile_image": "https://graph.facebook.com/1302047630/picture?type=large", "display_name": "Sasha Goldenson", "link": "https://stackoverflow.com/users/4471250/sasha-goldenson"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1533033469, "post_id": 51605346, "comment_id": 90187346, "body": "@jagdeep Not able to sign it in. The records exist. I used to be able to sign them in but don&#39;t see what changed via git and am unsure when it changed."}, {"owner": {"reputation": 48, "user_id": 4471250, "user_type": "registered", "profile_image": "https://graph.facebook.com/1302047630/picture?type=large", "display_name": "Sasha Goldenson", "link": "https://stackoverflow.com/users/4471250/sasha-goldenson"}, "edited": false, "score": 0, "creation_date": 1533090089, "post_id": 51605346, "comment_id": 90213966, "body": "I should also add that I&#39;m not using Devise."}], "owner": {"reputation": 48, "user_id": 4471250, "user_type": "registered", "profile_image": "https://graph.facebook.com/1302047630/picture?type=large", "display_name": "Sasha Goldenson", "link": "https://stackoverflow.com/users/4471250/sasha-goldenson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533090424, "creation_date": 1533010364, "last_edit_date": 1533090424, "question_id": 51605346, "link": "https://stackoverflow.com/questions/51605346/cant-create-sessions-for-some-of-my-sti-user-types-using-blizzards-omniauth-bn", "title": "Can&#39;t create sessions for some of my STI User types using Blizzard&#39;s omniauth-bnet gem", "body": "<p>I'm working on a Rails 5 app using the <code>omniauth-bnet</code> gem, not <code>devise</code>, have a Single Sign On through that gem, and have a few User types, using Single Table Inheritance. For whatever reason, the admin type can login fine, but the average User cannot create a session. Here's some of the relevant code.</p>\n\n<p>items_controller.rb:</p>\n\n<pre><code>before_action :check_authorization, except: [:show]\nbefore_action :check_for_email, except: [:show]\n...\nprivate\n\ndef check_authorization\n  unless current_user\n    redirect_to root_path\n  end\nend\n\ndef check_for_email\n  unless current_user.email\n    redirect_to signup_add_email_url\n  end\nend\n</code></pre>\n\n<p>sessions_controller.rb:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n\ndef create\n  begin\n    @user = User.from_omniauth(request.env['omniauth.auth'])\n    session[:user_id] = @user.id\n    flash[:success] = \"Well met, #{@user.name}!\"\n  rescue\n    flash[:warning] = \"There was an error while trying to create your \naccount...\"\n  end\n  redirect_to items_path\nend\n...\n</code></pre>\n\n<p>admin_user.rb:</p>\n\n<pre><code>class AdminUser &lt; User\nend\n</code></pre>\n\n<p>normal_user.rb:</p>\n\n<pre><code>class NormalUser &lt; User\nend\n</code></pre>\n\n<p>user.rb:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n...\n\nclass &lt;&lt; self\n  def from_omniauth(auth_hash)\n    user = find_or_create_by(name: auth_hash['info']['battletag'], uid: \nauth_hash['uid'], provider: auth_hash['provider'])\n    user.name = auth_hash['info']['battletag']\n    user.uid = auth_hash['uid']\n    user.token = auth_hash['credentials']['token']\n    user.save!\n    user\n  end\nend\n</code></pre>\n\n<p>routes.rb:</p>\n\n<pre><code>...\n# Auth\nget '/auth/:provider/callback', to: 'sessions#create'\n...\n</code></pre>\n\n<p>The logs show that my NormalUser type session never gets created. Yet the AdminUser type doesn't have any problem logging in...</p>\n\n<p>Any ideas? I've tried everything I can google or think of.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mechanize"], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1533006661, "creation_date": 1533006661, "answer_id": 51604934, "question_id": 51604782, "link": "https://stackoverflow.com/questions/51604782/mechanize-visit-a-link-and-get-page-title/51604934#51604934", "title": "Mechanize visit a link and get page title", "body": "<p>After clicking on the link, you don't need the block, you're already in a block, iterating over each anchor you found in your \"main\" URL.</p>\n\n<p>If you click any link, it returns you the page it points to (anchor's href). You can see this inspecting what's on your mechanize variable after that:</p>\n\n<pre><code>page.css(&lt;selector&gt;).each do |link|\n  mechanize.click(link)\n  mechanize\n\n=&gt; #&lt;Mechanize\n ...\n #&lt;Mechanize::Page\n  {url #&lt;URI::HTTPS https://www.theurbanlist.com/brisbane/directory/scout-cafe&gt;}\n  {meta_refresh}\n  {title \"Scout Cafe, Petrie Terrace | Brisbane | The Urban List\"}\n  {iframes\n</code></pre>\n\n<p>There you are. Mechanize handles for you now the data belonging to the current page. So now you're able to, through mechanize, using its <code>page</code> method, access its title and all others:</p>\n\n<pre><code>page.css('div[itemprop=\"articleBody\"] ol li a').each do |link|\n  mechanize.click(link)\n  puts \"Title: #{mechanize.page.title}\"\nend\n\nTitle: Scout Cafe, Petrie Terrace | Brisbane | The Urban List\nTitle: Southside Tea Room | Brisbane | The Urban List\nTitle: Spring Hill Deli Cafe, Spring Hill | Brisbane | The Urban List\n</code></pre>\n\n<p>Notice the use of the itemprop attribute isn't really needed, but I recommend you to add more specific CSS rules/selectors to make the elements easy to recognize.</p>\n"}], "owner": {"reputation": 824, "user_id": 5610600, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Szyb3uK2uU8/AAAAAAAAAAI/AAAAAAAAAJE/XuBsiUUU61c/photo.jpg?sz=128", "display_name": "Jem Built", "link": "https://stackoverflow.com/users/5610600/jem-built"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 51604934, "answer_count": 1, "score": 1, "last_activity_date": 1533542447, "creation_date": 1533005450, "last_edit_date": 1533542447, "question_id": 51604782, "link": "https://stackoverflow.com/questions/51604782/mechanize-visit-a-link-and-get-page-title", "title": "Mechanize visit a link and get page title", "body": "<p>I am using mechanize to scrape some data. Unfortunately I can't seem to get it to visit the link and get the page title of the visited page.</p>\n\n<p>here is my task:</p>\n\n<pre><code>task :estimateone =&gt; :environment do\n  require 'mechanize'\n\n  mechanize = Mechanize.new\n  page = mechanize.get('https://www.city.com/city/list/50-city-cafes-you-should-have-eaten-breakfast-at')\n  page.css('ol li a').each do |link|\n   mechanize.click(link).each do |property|\n        puts property.title\n      end\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "sorting"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1533003266, "post_id": 51604554, "comment_id": 90174790, "body": "Where does <code>nil</code> of <code>:to=&gt;nil</code> go? Please answer with edit."}], "answers": [{"comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 1, "creation_date": 1533011618, "post_id": 51604595, "comment_id": 90176348, "body": "1+ for passing number of arguments to <code>sort_by</code>"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 8, "last_activity_date": 1533009180, "last_edit_date": 1533009180, "creation_date": 1533003665, "answer_id": 51604595, "question_id": 51604554, "link": "https://stackoverflow.com/questions/51604554/sorting-array-of-hashes-based-on-multiple-values/51604595#51604595", "title": "Sorting array of hashes based on multiple values", "body": "<pre><code>arr = [ \n  {\n    :title=&gt;\"Working as a SSE\",\n    :organisation=&gt;{:id=&gt;428, :name=&gt;\"google\"},\n    :from=&gt;\"2018-6-1\",\n    :to=&gt;\"2017-6-1\"\n  }, {\n    :title=&gt;\"Concatenate two video files to single video in players\",\n    :organisation=&gt;{:id=&gt;197, :name=&gt;\"UNFPA\"},\n    :from=&gt;\"2014-1-1\",\n    :to=&gt;\"2015-12-1\"\n  }, {\n    :title=&gt;\"Highcharts Demo\",\n    :organisation=&gt;{:id=&gt;6, :name=&gt;\"UNDFS\"},\n    :from=&gt;\"2016-1-1\",\n    :to=&gt;\"2017-6-1\"\n  }, {\n    :title=&gt;\"Working as a Judicial Affairs\",\n    :organisation=&gt;{:id=&gt;427, :name=&gt;\"swtp\"},\n    :from=&gt;\"2017-1-1\",\n    :to=&gt;\"2018-6-1\"\n  }\n]\n</code></pre>\n\n<p></p>\n\n<pre><code>arr.sort_by { |h| [h[:to], h[:from], h[:organisation][:name], h[:title]] }\n  #=&gt; [{:title=&gt;\"Concatenate two video files to single video in players\",\n  #     :organisation=&gt;{:id=&gt;197, :name=&gt;\"UNFPA\"},\n  #     :from=&gt;\"2014-1-1\",\n  #     :to=&gt;\"2015-12-1\"},\n  #    {:title=&gt;\"Highcharts Demo\",\n  #     :organisation=&gt;{:id=&gt;6, :name=&gt;\"UNDFS\"},\n  #     :from=&gt;\"2016-1-1\",\n  #     :to=&gt;\"2017-6-1\"},\n  #    {:title=&gt;\"Working as a SSE\",\n  #     :organisation=&gt;{:id=&gt;428, :name=&gt;\"google\"},\n  #     :from=&gt;\"2018-6-1\",\n  #     :to=&gt;\"2017-6-1\"},\n  #    {:title=&gt;\"Working as a Judicial Affairs\",\n  #     :organisation=&gt;{:id=&gt;427, :name=&gt;\"swtp\"},\n  #     :from=&gt;\"2017-1-1\",\n  #     :to=&gt;\"2018-6-1\"}]\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-3C-3D-3E\" rel=\"noreferrer\">Array#&lt;=></a>, particularly the third paragraph of the doc, and <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-sort_by\" rel=\"noreferrer\">Enumerable#sort_by</a>.</p>\n"}], "owner": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1088, "favorite_count": 0, "accepted_answer_id": 51604595, "answer_count": 1, "score": 1, "last_activity_date": 1533017134, "creation_date": 1533003200, "last_edit_date": 1533017134, "question_id": 51604554, "link": "https://stackoverflow.com/questions/51604554/sorting-array-of-hashes-based-on-multiple-values", "title": "Sorting array of hashes based on multiple values", "body": "<p>I have an array of hashes:</p>\n\n<pre><code>[ \n  {\n    :title=&gt;\"Working as a SSE\",\n    :organisation=&gt;{:id=&gt;428, :name=&gt;\"google\"},\n    :from=&gt;\"2018-6-1\",\n    :to=&gt;nil\n  }, {\n    :title=&gt;\"Concatenate two video files to single video in players\",\n    :organisation=&gt;{:id=&gt;197, :name=&gt;\"UNFPA\"},\n    :from=&gt;\"2014-1-1\",\n    :to=&gt;\"2015-12-1\"\n  }, {\n    :title=&gt;\"Highcharts Demo\",\n    :organisation=&gt;{:id=&gt;6, :name=&gt;\"UNDFS\"},\n    :from=&gt;\"2016-1-1\",\n    :to=&gt;\"2017-6-1\"\n  }, {\n    :title=&gt;\"Working as a Judicial Affairs\",\n    :organisation=&gt;{:id=&gt;427, :name=&gt;\"swtp\"},\n    :from=&gt;\"2017-1-1\",\n    :to=&gt;\"2018-6-1\"\n  }\n]\n</code></pre>\n\n<p>I want to sort it in the following order:</p>\n\n<ol>\n<li>First sort is based on <code>to</code></li>\n<li>Second sort is based on <code>from</code></li>\n<li>Third sort is based on  <code>organisation name</code></li>\n<li>Finally, sort based on <code>title</code> </li>\n</ol>\n\n<p>Can anyone help me sort the array of hashes?</p>\n"}, {"tags": ["ruby", "parsing", "treetop"], "comments": [{"owner": {"reputation": 3830, "user_id": 1177119, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a8513228d202b40141d295e840a4fa8?s=128&d=identicon&r=PG", "display_name": "Josh Voigts", "link": "https://stackoverflow.com/users/1177119/josh-voigts"}, "edited": false, "score": 0, "creation_date": 1533046779, "post_id": 51603332, "comment_id": 90196497, "body": "To clarify, you want to extract everything from <code>\\\\Port</code> up to <code>ifdef</code> or including the <code>ifdef</code> block?"}, {"owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "reply_to_user": {"reputation": 3830, "user_id": 1177119, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a8513228d202b40141d295e840a4fa8?s=128&d=identicon&r=PG", "display_name": "Josh Voigts", "link": "https://stackoverflow.com/users/1177119/josh-voigts"}, "edited": false, "score": 0, "creation_date": 1533047561, "post_id": 51603332, "comment_id": 90197051, "body": "@JoshVoigts i want to extract till the <code>endif. it need not end in </code>endif, but will always end in a blank line. I would have multiple of these blocks and I want to extract all of them."}], "answers": [{"comments": [{"owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "edited": false, "score": 0, "creation_date": 1533047658, "post_id": 51615860, "comment_id": 90197125, "body": "Thanks, that was it. Did not know \\s included \\n. Thought that they are separate."}, {"owner": {"reputation": 3830, "user_id": 1177119, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a8513228d202b40141d295e840a4fa8?s=128&d=identicon&r=PG", "display_name": "Josh Voigts", "link": "https://stackoverflow.com/users/1177119/josh-voigts"}, "reply_to_user": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "edited": false, "score": 1, "creation_date": 1533048656, "post_id": 51615860, "comment_id": 90197906, "body": "Cool, glad I could help :)"}], "tags": [], "owner": {"reputation": 3830, "user_id": 1177119, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a8513228d202b40141d295e840a4fa8?s=128&d=identicon&r=PG", "display_name": "Josh Voigts", "link": "https://stackoverflow.com/users/1177119/josh-voigts"}, "is_accepted": true, "score": 1, "last_activity_date": 1533047508, "creation_date": 1533047508, "answer_id": 51615860, "question_id": 51603332, "link": "https://stackoverflow.com/questions/51603332/how-to-parse-multiple-lines-using-ruby-treetop/51615860#51615860", "title": "how to parse multiple lines using ruby treetop?", "body": "<p>Is something like below along the lines you're looking for. It's hard to understand your problem fully without a little more information.</p>\n\n<p>The <code>space</code> rule includes <code>\\s</code> which includes <code>\\n</code> already, so if you're looking for another <code>\\n</code>, it won't parse correctly. If you modify the <code>space</code> rule to be <code>[^\\S\\n]+</code> it will exclude <code>\\n</code> so you can look for it explicitly.</p>\n\n<p>If you're looking for a completely blank line to end the <code>Port.</code> block, you should look explicitly for <code>\"\\n\" (\"\\n\" / end_of_file)</code>.</p>\n\n<p>Hope that makes sense...</p>\n\n<pre><code>grammar Sexp\n\n  rule body\n    commentPortString interface* portEnd\n  end\n\n  rule interface\n    space? (intf / intfWithSize) space? \"\\n\" &lt;Interface&gt;\n  end\n\n  rule commentPortString\n    space? '//' space? portString space? \"\\n\" &lt;CommentPortString&gt;\n  end\n\n  rule portString\n    'Port' space? '.' &lt;PortString&gt;\n  end\n\n  # Port block ends with a blank line\n  rule portEnd\n    \"\\n\" / end_of_file\n  end\n\n  rule expression\n    space? '(' body ')' space? &lt;Expression&gt;\n  end\n\n  rule intf\n    (input / output) space wire:wireName space? ';' &lt;Intf&gt;\n  end\n\n  rule intfWithSize\n    (input / output) space? width:ifWidth space? wire:wireName space? ';' &lt;IntfWithSize&gt;\n  end\n\n  rule input\n    'input'\n  end\n\n  rule output\n    'output'\n  end\n\n  rule ifWidth\n    '[' space? msb:digits space? ':' space? lsb:digits ']' &lt;IfWidth&gt;\n  end\n\n  rule digits\n    [0-9]+\n  end\n\n  rule integer\n    ('+' / '-')? [0-9]+ &lt;IntegerLiteral&gt;\n  end\n\n  rule float\n    ('+' / '-')? [0-9]+ (('.' [0-9]+) / ('e' [0-9]+)) &lt;FloatLiteral&gt;\n  end\n\n  rule string\n    '\"' ('\\\"' / !'\"' .)* '\"' &lt;StringLiteral&gt;\n  end\n\n  rule signalTypeString\n    '\"' if_sig_name:signalType '\"' &lt;SignalTypeString&gt;\n  end\n\n  rule signalType\n    [a-zA-Z] [a-zA-Z0-9_]* (receiveLiteral / transmitLiteral) &lt;SignalType&gt;\n  end\n\n  rule receiveLiteral\n    '.receive'\n  end\n\n  rule transmitLiteral\n    '.transmit'\n  end\n\n  rule identifier\n    [a-zA-Z\\=\\*] [a-zA-Z0-9_\\=\\*]* &lt;Identifier&gt;\n  end\n\n  rule wireName\n    [a-zA-Z] [a-zA-Z0-9_]* &lt;WireName&gt;\n  end\n\n  rule non_space\n    !space .\n  end\n\n  rule space\n    [^\\S\\n]+\n  end\n\n  rule newLine\n    [\\n\\r]+\n  end\n\n  rule end_of_file\n    !.\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 51615860, "answer_count": 1, "score": 0, "last_activity_date": 1533047508, "creation_date": 1532991389, "question_id": 51603332, "link": "https://stackoverflow.com/questions/51603332/how-to-parse-multiple-lines-using-ruby-treetop", "title": "how to parse multiple lines using ruby treetop?", "body": "<p>I am new to <code>ruby</code> and <code>treetop</code>.</p>\n\n<p>I went through <a href=\"http://thingsaaronmade.com/blog/a-quick-intro-to-writing-a-parser-using-treetop.html\" rel=\"nofollow noreferrer\">this tutorial</a> and came up with the following set of rules.</p>\n\n<pre><code>grammar Sexp\n\n  rule body\n    commentPortString *(I am stuck here)*\n  end\n\n  rule interface\n    space? (intf / intfWithSize) space? ('\\n' / end_of_file) &lt;Interface&gt;\n  end\n\n  rule commentPortString\n    space? '//' space portString space? ('\\n' / end_of_file) &lt;CommentPortString&gt;\n  end\n\n  rule portString\n    'Port' space? '.' &lt;PortString&gt;\n  end\n\n  rule expression\n    space? '(' body ')' space? &lt;Expression&gt;\n  end\n\n  rule intf\n    (input / output) space wire:wireName space? ';' &lt;Intf&gt;\n  end\n\n  rule intfWithSize\n    (input / output) space? width:ifWidth space? wire:wireName space? ';' &lt;IntfWithSize&gt;\n  end\n\n  rule input\n    'input'\n  end\n\n  rule output\n    'output'\n  end\n\n  rule ifWidth\n    '[' space? msb:digits space? ':' space? lsb:digits ']' &lt;IfWidth&gt;\n  end\n\n  rule digits\n    [0-9]+\n  end\n\n  rule integer\n    ('+' / '-')? [0-9]+ &lt;IntegerLiteral&gt;\n  end\n\n  rule float\n    ('+' / '-')? [0-9]+ (('.' [0-9]+) / ('e' [0-9]+)) &lt;FloatLiteral&gt;\n  end\n\n  rule string\n    '\"' ('\\\"' / !'\"' .)* '\"' &lt;StringLiteral&gt;\n  end\n\n  rule signalTypeString\n    '\"' if_sig_name:signalType '\"' &lt;SignalTypeString&gt;\n  end\n\n  rule signalType\n    [a-zA-Z] [a-zA-Z0-9_]* (receiveLiteral / transmitLiteral) &lt;SignalType&gt;\n  end\n\n  rule receiveLiteral\n    '.receive'\n  end\n\n  rule transmitLiteral\n    '.transmit'\n  end\n\n  rule identifier\n    [a-zA-Z\\=\\*] [a-zA-Z0-9_\\=\\*]* &lt;Identifier&gt;\n  end\n\n  rule wireName\n    [a-zA-Z] [a-zA-Z0-9_]* &lt;WireName&gt;\n  end\n\n  rule non_space\n    !space .\n  end\n\n  rule space\n    [\\s\\t]+\n  end\n\n  rule newLine\n    [\\n\\r]+\n  end\n\n  rule end_of_file\n    !.\n  end\n\nend\n</code></pre>\n\n<p>I want the parser to extract out blobs such as the one below. It would always start with <code>Port.</code> and end with a blank line. </p>\n\n<pre><code>    // Port.\n    output        send;\n    input         free;\n    output        fgcg;\n    output[  2:0] state_id;\n    output[  1:0] stream_id;\n`ifdef SIMULATION\n    output[ 83:0] dbg_id;\n`endif\n</code></pre>\n\n<p>The rules mentioned above can identify all the lines in the text when passed individually but I am unable to extract out the blob. Also I just want to extract out the matching text and ignore the rest.</p>\n\n<p>Can someone point me in the right direction please.</p>\n"}, {"tags": ["ruby", "loops"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 4, "creation_date": 1532993257, "post_id": 51603256, "comment_id": 90173000, "body": "If you format (i.e. indent) your code, it should help ID your missing <code>end</code> statement."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1533032023, "post_id": 51603256, "comment_id": 90186432, "body": "Your method is way too long which makes it really hard to spot errors. From Robert C. Martin&#39;s <b>Clean Code</b> book: <i>&quot;Functions should not be 100 lines long. Functions should hardly ever be 20 lines long.&quot;</i>"}, {"owner": {"reputation": 1, "user_id": 10124796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48eea6dcfd289541ba7922aab21759b5?s=128&d=identicon&r=PG&f=1", "display_name": "Jbizzles", "link": "https://stackoverflow.com/users/10124796/jbizzles"}, "edited": false, "score": 0, "creation_date": 1533054298, "post_id": 51603256, "comment_id": 90201558, "body": "I have the code formatted on my end I was just having trouble getting it in the right format on here since it was one of my first times posting"}], "answers": [{"tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 1, "last_activity_date": 1532994119, "creation_date": 1532994119, "answer_id": 51603626, "question_id": 51603256, "link": "https://stackoverflow.com/questions/51603256/else-without-rescue-is-useless-and-expecting-keyword-end/51603626#51603626", "title": "else without rescue is useless and expecting keyword_end", "body": "<p>I would say that your code is horribly formatted, but it would first have to be formatted at all to be even that much. Once you format it, the answer is quite obvious, you have a mis-placed <code>end</code>.</p>\n\n<pre><code>puts \"Added #{resume_info[:title]}\"\n # Should be and end here for the \"do\" block above\nelse\n</code></pre>\n\n<p>Here is what it should be:</p>\n\n<pre><code>require 'nokogiri'\nrequire 'httparty'\nrequire 'byebug'\nrequire 'awesome_print'\nrequire 'watir'\n\ndef input #takes user input and grabs the url for that particular search\n\n  puts \"1) Enter the job title that you want to search for \\n\"\n  j_input = gets.chomp\n  job = j_input.split(/ /).join(\"+\")\n  puts \"================================= \\n\"\n\n  puts \"1/2)Do you want to input city-and-state(1) or zipcode(2)? \\n\"\n  choice = gets.chomp\n\n  if choice == \"1\"\n\n    puts \"2) Enter the city that you want to search for \\n\"\n    city_input = gets.chomp\n    city = city_input.split(/ /).join(\"+\")\n    puts \"================================= \\n\"\n\n    puts \"3) Enter the state that you want to search for \\n\"\n    state_input = gets.chomp\n    state = \"+\" + state_input\n\n    puts target_url = \"https://www.indeed.com/resumes/?q=#{job}&amp;l=#{city}%2C#{state}&amp;cb=jt\"\n\n\n  elsif choice == \"2\"\n\n    puts \"Enter the zipcode that you want to search for \\n\"\n    zipcode = gets.chomp\n\n    puts target_url = \"https://www.indeed.com/resumes?q=#{job}&amp;l=#{zipcode}&amp;cb=jt\"\n\n  else\n    puts \"error\"\n  end\n\n\n  unparsed_page = HTTParty.get(target_url)\n  parsed_page = Nokogiri::HTML(unparsed_page)\n  resume_listing = parsed_page.css('div.sre-entry')\n  per_page = resume_listing.count\n  resumes = Array.new\n  counter = 0\n  result_count = parsed_page.css('div#result_count').text.split(' ')[0].to_f\n  page_count = (result_count.to_f / per_page.to_f ).ceil\n  current_count = 0\n  byebug\n\n  if counter &lt;= 0\n    unparsed_page = HTTParty.get(target_url)\n    parsed_page = Nokogiri::HTML(unparsed_page)\n    resume_listing = parsed_page.css('div.sre-entry')\n    per_page = resume_listing.count\n    pagination_resume_listing.each do |resume_listing|\n\n      #resume_info = {\n\n      #   title:\n      #   link:\n      #   skills:\n      #   education:\n      #}\n      #resumes &lt;&lt; resume_info\n\n      puts \"Added #{resume_info[:title]}\"\n\n    end\n\n  else\n\n    while current_count &lt;= page_count * per_page\n      pagination_url = \"https://www.indeed.com/resumes?q=#{job}&amp;l=#{zipcode}&amp;co=US&amp;cb=jt&amp;start=#{current_count}\"\n      unparsed_pagination_page = HTTParty.get(pagination_url)\n      pagination_parsed_page = Nokogiri::HTML(unparsed_pagination_page)\n      pagination_resume_listing = pagination_parsed_page.css('div.sre-entry')\n      pagination_resume_listing.each do |resume_listing|\n\n        #resume_info = {\n\n        #   title:\n        #   link:\n        #   skills:\n        #   education:\n        #}\n        #resumes &lt;&lt; resume_info\n\n        puts \"Added #{resume_info[:title]}\"\n        current_count += 50\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Lesson here is to <strong>ALWAYS</strong> format your code, for everyone's sake, most of all your own. There is no excuse to not be formatted, and not doing so leads to trivial problems like this that are difficult to find.</p>\n\n<p><strong>NOTE</strong>\nI did not test this or run it, simply formatted, which made the mis-matched <code>end</code> obvious. </p>\n"}], "owner": {"reputation": 1, "user_id": 10124796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48eea6dcfd289541ba7922aab21759b5?s=128&d=identicon&r=PG&f=1", "display_name": "Jbizzles", "link": "https://stackoverflow.com/users/10124796/jbizzles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1532994119, "creation_date": 1532990721, "last_edit_date": 1532993178, "question_id": 51603256, "link": "https://stackoverflow.com/questions/51603256/else-without-rescue-is-useless-and-expecting-keyword-end", "title": "else without rescue is useless and expecting keyword_end", "body": "<p>This code gives me these errors in my ruby console:</p>\n\n<p>1) warning: else without rescue is useless</p>\n\n<p>2) syntax error, unexpected end-of-input, expecting keyword_end</p>\n\n<p>Why am I getting both of these errors at the same time?</p>\n\n<pre><code>require 'nokogiri'\nrequire 'httparty'\nrequire 'byebug'\nrequire 'awesome_print'\nrequire 'watir'\n\ndef input #takes user input and grabs the url for that particular search\n\nputs \"1) Enter the job title that you want to search for \\n\"\nj_input = gets.chomp\njob = j_input.split(/ /).join(\"+\")\nputs \"================================= \\n\"\n\nputs \"1/2)Do you want to input city-and-state(1) or zipcode(2)? \\n\"\nchoice = gets.chomp\n\n   if choice == \"1\"\n\n    puts \"2) Enter the city that you want to search for \\n\"\n    city_input = gets.chomp\n    city = city_input.split(/ /).join(\"+\")\n    puts \"================================= \\n\"\n\n    puts \"3) Enter the state that you want to search for \\n\"\n    state_input = gets.chomp\n    state = \"+\" + state_input\n\n    puts target_url = \"https://www.indeed.com/resumes/?q=#{job}&amp;l=#{city}%2C#{state}&amp;cb=jt\"\n\n\n  elsif choice == \"2\"\n\n    puts \"Enter the zipcode that you want to search for \\n\"\n    zipcode = gets.chomp\n\n    puts target_url = \"https://www.indeed.com/resumes?q=#{job}&amp;l=#{zipcode}&amp;cb=jt\"\n\n  else\n    puts \"error\"\n end\n\n\nunparsed_page = HTTParty.get(target_url)\nparsed_page = Nokogiri::HTML(unparsed_page)\nresume_listing = parsed_page.css('div.sre-entry')\nper_page = resume_listing.count\nresumes = Array.new\ncounter = 0\nresult_count = parsed_page.css('div#result_count').text.split(' ')[0].to_f\npage_count = (result_count.to_f / per_page.to_f ).ceil\ncurrent_count = 0\nbyebug\n\nif counter &lt;= 0\n    unparsed_page = HTTParty.get(target_url)\n    parsed_page = Nokogiri::HTML(unparsed_page)\n    resume_listing = parsed_page.css('div.sre-entry')\n    per_page = resume_listing.count\n    pagination_resume_listing.each do |resume_listing|\n\n    #resume_info = {\n\n    #   title:\n    #   link:\n    #   skills:\n    #   education:\n    #}\n    #resumes &lt;&lt; resume_info\n\nputs \"Added #{resume_info[:title]}\"\n\nelse\n\n   while current_count &lt;= page_count * per_page\n    pagination_url = \"https://www.indeed.com/resumes?q=#{job}&amp;l=#{zipcode}&amp;co=US&amp;cb=jt&amp;start=#{current_count}\"\n    unparsed_pagination_page = HTTParty.get(pagination_url)\n    pagination_parsed_page = Nokogiri::HTML(unparsed_pagination_page)\n    pagination_resume_listing = pagination_parsed_page.css('div.sre-entry')\n    pagination_resume_listing.each do |resume_listing|\n\n    #resume_info = {\n\n    #   title:\n    #   link:\n    #   skills:\n    #   education:\n    #}\n    #resumes &lt;&lt; resume_info\n\n    puts \"Added #{resume_info[:title]}\"\n    current_count += 50\n end\n\nend\nend\nend\nend\n</code></pre>\n\n<p>It won't allow me to fix the else without rescue issue without telling me that it expects an extra end at the end of my code. Of course when I put the end there it does nothing and says that it wants another end</p>\n"}, {"tags": ["javascript", "ruby", "ajax", "coffeescript"], "comments": [{"owner": {"reputation": 43, "user_id": 1681880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a4fb4c310045619308d03813f71404?s=128&d=identicon&r=PG", "display_name": "flewis", "link": "https://stackoverflow.com/users/1681880/flewis"}, "reply_to_user": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1533036283, "post_id": 51603115, "comment_id": 90189160, "body": "I&#39;m returning the model errors in json.  So on success I redirect but I want the json errors on failure.  It works fine as long as the Ajax event is handled globally (i.e. With document) but I get no response when I try to attach the handler to the specific form ID.  I&#39;m assuming I&#39;m missing something very simple in the script?  But I&#39;m stumped!"}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1533036542, "post_id": 51603115, "comment_id": 90189303, "body": "Sorry, there was a misspelling. Do you render your form via Ajax?"}, {"owner": {"reputation": 43, "user_id": 1681880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a4fb4c310045619308d03813f71404?s=128&d=identicon&r=PG", "display_name": "flewis", "link": "https://stackoverflow.com/users/1681880/flewis"}, "reply_to_user": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1533037042, "post_id": 51603115, "comment_id": 90189624, "body": "Nope, I am not re-rendering the form.  I&#39;m only returning the model.errors object back to the client via json:  render :json =&gt; { :error =&gt; @person.errors }, :status =&gt; 422"}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1533037879, "post_id": 51603115, "comment_id": 90190179, "body": "Try <code>$(&#39;#person_form input[type=submit]&#39;).on &quot;ajaxError&quot;, -&gt; alert(&#39;work&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 1681880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a4fb4c310045619308d03813f71404?s=128&d=identicon&r=PG", "display_name": "flewis", "link": "https://stackoverflow.com/users/1681880/flewis"}, "is_accepted": false, "score": 0, "last_activity_date": 1533080401, "last_edit_date": 1533080401, "creation_date": 1533074241, "answer_id": 51622688, "question_id": 51603115, "link": "https://stackoverflow.com/questions/51603115/cannot-attach-ajaxerror-handler-to-form-id/51622688#51622688", "title": "Cannot Attach ajax:error handler to Form ID", "body": "<p>I'm leaving this simple answer out here for anyone else who may run across this issue.  Hopefully, it's this simple for the next person.  It took me HOURS to track down the problem.</p>\n\n<p>It turns out the error was happening because of a very simple mistake:</p>\n\n<pre><code>&lt;%= form_for @person,\n      html: {\n        id: '#person_form',  &lt;= ERROR IS HERE!!\n        class: 'js_inline_validate'\n      },\n      data: { validate_url: validate_field_people_path },\n      remote: true,\n      url: people_path do |f| %&gt;\n</code></pre>\n\n<p>The #person_form should have been person_form (excluding the pound sign).  Just a very simple error in code I didn't catch when switching from script to ruby.</p>\n\n<p>The global event handler would catch the ajax:error and execute the code properly.  The pound sign in the identifier was preventing the proper registration of the local ajax event.  </p>\n"}], "owner": {"reputation": 43, "user_id": 1681880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a4fb4c310045619308d03813f71404?s=128&d=identicon&r=PG", "display_name": "flewis", "link": "https://stackoverflow.com/users/1681880/flewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533080401, "creation_date": 1532989738, "last_edit_date": 1533035365, "question_id": 51603115, "link": "https://stackoverflow.com/questions/51603115/cannot-attach-ajaxerror-handler-to-form-id", "title": "Cannot Attach ajax:error handler to Form ID", "body": "<p>I am having trouble binding an ajax:error response to a form ID.  Can someone point me in the right direction to solve this problem?</p>\n\n<p>Here is the code.</p>\n\n<pre><code>&lt;%= form_for @person,\n              html: {\n                id: '#person_form',\n                class: 'js_inline_validate'\n              },\n              data: { validate_url: validate_field_people_path },\n              remote: true,\n              url: people_path do |f| %&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;div class='form-group-label'&gt;\n      &lt;%= f.label :first_name %&gt;\n    &lt;/div&gt;\n    &lt;%= f.text_field :first_name,\n                      :id =&gt; 'first_name',\n                      class: 'js_new_person_frm_validate js_new_person_first_name' %&gt;\n    &lt;div class=\"text-error small\"&gt;\n      &lt;span&gt;\n        &lt;%= @person.errors.full_messages_for(:first_name).first if @person.errors[:first_name].any? %&gt;\n      &lt;/span&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;div class='form-group-label'&gt;\n      &lt;%= f.label :last_name %&gt;\n    &lt;/div&gt;\n    &lt;%= f.text_field :last_name,\n                      :id =&gt; 'last_name',\n                      class: 'js_new_person_frm_validate js_new_person_last_name' %&gt;\n    &lt;div class=\"text-error small\"&gt;\n      &lt;span&gt;\n                &lt;%= @person.errors.full_messages_for(:last_name).first if @person.errors[:last_name].any? %&gt;\n            &lt;/span&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.submit \"Create\", data: { disable_with: false } %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>class PeopleController &lt; ApplicationController\n\n  ......\n\n  def create\n    @person = Person.new(create_params)\n\n    if(@person.save)\n      flash[:success] = \"person created successfully\"\n      redirect_to root_path\n    else\n      respond_to do |format|\n        format.html { render :action =&gt; 'new' }\n        format.any(:js, :json) {\n          render :json =&gt; { :error =&gt; @person.errors }, :status =&gt; 422\n        }\n      end\n    end\n  end\n\n  .....\n\nend\n</code></pre>\n\n<p>CoffeeScript</p>\n\n<pre><code>$ -&gt;\n\n  $(\"#person_form\").on \"ajax:error\", (event, data, status, xhr) -&gt;\n    alert \"ajax:error!\"\n    #do more stuff   \n</code></pre>\n\n<p>The issue I cannot solve is this works as below when I use 'document', but I need this to be specific to my #person_form.  And I get no response when I replace document with my form_id.  Am I missing something simple here?</p>\n\n<pre><code>$ -&gt;\n\n      $(document).on \"ajax:error\", (event, data, status, xhr) -&gt;\n        alert \"ajax:error!\"\n        #do more stuff \n</code></pre>\n\n<p>Thank You!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 0, "last_activity_date": 1532997176, "creation_date": 1532997176, "answer_id": 51603950, "question_id": 51602429, "link": "https://stackoverflow.com/questions/51602429/ruby-on-rails-cannot-activate-tmail/51603950#51603950", "title": "Ruby on Rails: Cannot Activate tmail", "body": "<p>After updating your <code>Gemfile</code> always run <code>bundle install</code>.</p>\n\n<p>Also, when <code>bundle install</code> not help, try deleting your Gemfile.lock (file) and then do <code>bundle install</code>.</p>\n\n<p>When that not fix your issue try to run <code>bundle update</code> for resolving dependencies, but that command can update all gems, so be careful with this task.</p>\n"}], "owner": {"reputation": 346, "user_id": 5331859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8ddfcdd5d8fc6e4d7cebc17d48a19600?s=128&d=identicon&r=PG&f=1", "display_name": "zasman", "link": "https://stackoverflow.com/users/5331859/zasman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532997176, "creation_date": 1532985499, "question_id": 51602429, "link": "https://stackoverflow.com/questions/51602429/ruby-on-rails-cannot-activate-tmail", "title": "Ruby on Rails: Cannot Activate tmail", "body": "<p><code>\nGem::LoadError: can't activate tmail (= 1.2.3.1), already activated tmail-1.2.7.1. Make sure all dependencies are added to Gemfile.\n</code></p>\n\n<p>I get this when I run a certain rake task. I've added it to the Gemfile, and I've already run <code>gem uninstall tmail</code> and <code>gem install tmail</code>.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1532989140, "post_id": 51602311, "comment_id": 90172023, "body": "The space after each colon raises a syntax error. Please remove those space so that readers who wish to cut and paste your code don&#39;t have to do it themselves."}], "answers": [{"comments": [{"owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1532987047, "post_id": 51602603, "comment_id": 90171338, "body": "Thanks @Schwern so map will return me all items matching locale but i want to get whole items array with items in translations matching locale. sorry if i was not clear in my question. Please check the output i am expecting."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1532991217, "post_id": 51602603, "comment_id": 90172572, "body": "@User7354632781 I see. I&#39;ve added that code in, plus how to reorganize this into objects."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1532991195, "last_edit_date": 1532991195, "creation_date": 1532986493, "answer_id": 51602603, "question_id": 51602311, "link": "https://stackoverflow.com/questions/51602311/how-to-filter-an-array-of-objects/51602603#51602603", "title": "how to filter an array of objects", "body": "<p>To get just a single thing from a list, use <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-first\" rel=\"nofollow noreferrer\"><code>first</code></a>.</p>\n\n<pre><code># {:name=&gt;\"abcd\", :description=&gt;\"geiajfe\", :locale=&gt;:fr}\ntranslation_fr = item.fetch(:translations).first { |translation|\n  translation[:locale] == :fr\n}\n</code></pre>\n\n<p>To get this for all items, wrap it in a <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\"><code>map</code></a>.</p>\n\n<pre><code># [ {:name=&gt;\"abcd\", :description=&gt;\"geiajfe\", :locale=&gt;:fr}, ... ]\nitems_fr = test.fetch(:items).map { |item|\n  item.fetch(:translations).first { |translation|\n    translation[:locale] == :fr\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>To return the item + the chosen translation, you can return this from the <code>map</code>. But you need to be careful, <code>item</code> is not a copy. If you alter it in the <code>map</code> you alter it in <code>tests</code>. </p>\n\n<p>For example...</p>\n\n<pre><code>items_fr = test.fetch(:items).map { |item|\n  translation = item.fetch(:translations).first { |translation|\n    translation[:locale] == :fr\n  }\n  item[:translations] = [translation]\n  item\n}\n</code></pre>\n\n<p>This will return what you want.</p>\n\n<pre><code>{:id=&gt;\"cam-id-1\", :translations=&gt;[{:name=&gt;\"abcd\", :description=&gt;\"geiajfe\", :locale=&gt;:fr}]}\n</code></pre>\n\n<p>But it will also alter the items in <code>test</code>, they're the same objects. Instead you need to return a copy of each <code>item</code>. You can call <code>item = item.clone</code> and change the key, or you can use <a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\"><code>merge</code></a> in one step.</p>\n\n<pre><code>items_fr = test.fetch(:items).map { |item|\n  translation = item.fetch(:translations).first { |translation|\n    translation[:locale] == :fr\n  }\n  item.merge translations: [translation]\n}\n</code></pre>\n\n<p>Rather than altering <code>item[:translations]</code>, I'd recommend you add a new <code>translation</code> key for your chosen translation.</p>\n\n<pre><code># [ {:id=&gt;\"cam-id-1\", :translations=&gt;[{:name=&gt;\"abcd\", :description=&gt;\"geiajfe\", :locale=&gt;:fr}, {:name=&gt;\"bon jor\", :description=&gt;\"jwi nifneaoin ofieafi\", :locale=&gt;:de}, {:name=&gt;\"hello\", :description=&gt;\"hello abcd\", :locale=&gt;:en}], :translation=&gt;{:name=&gt;\"abcd\", :description=&gt;\"geiajfe\", :locale=&gt;:fr}} ]\nitems_fr = test.fetch(:items).map { |item|\n  translation = item.fetch(:translations).first { |translation|\n    translation[:locale] == :fr\n  }\n  item[:translation] = translation\n  item\n}\n</code></pre>\n\n<p>Now you can repeat this process to pick a new translation if necessary.</p>\n\n<hr>\n\n<p>You can improve this process in a few ways. First, if possible, change the <code>translation</code> array to a hash keyed on locale for faster lookup. Second, get everything into objects which encapsulates the details and allows for more complex behavior.</p>\n\n<pre><code>class Translations\n  attr_accessor :translations\n\n  def initialize\n    @translations = {}\n  end\n\n  # Get the translation for a locale\n  def for_locale(locale)\n    translations.fetch(locale)\n  end\n\n  # Add a translation for a locale\n  def add_translation(translation)\n    translations[translation.locale] = translation\n  end\n\n  # Import translations from an array. Reorganize\n  # them as a hash keyed on locale.\n  def import_from_array(translations)\n    translations.each do |import_translation|\n      add_translation Translation.new(import_translation)\n    end\n  end\nend\n\nclass Translation\n  attr_accessor :name, :description, :locale\n\n  def initialize(name:, description:, locale:)\n    @name = name\n    @description = description\n    @locale = locale\n  end\nend\n\nclass Item\n  attr_accessor :translations, :translation, :id\n\n  def initialize\n    @translations ||= Translations.new\n  end\n\n  def pick_translation(locale)\n    @translation = translations.for_locale(locale)\n  end\n\n  def import_from_hash(**args)\n    @id = args.fetch(:id)\n    translations.import_from_array( args.fetch(:translations) )\n  end\nend\n\nitems = test.fetch(:items).map do |import|\n  # parse\n  item = Item.new.import_from_hash(import)\n  # pick a translation\n  item.pick_translation(:fr)\n  # return the object\n  item\nend\n</code></pre>\n\n<p>For example, if these translations are repeated and the copies are taking up memory you could leverage the <a href=\"https://en.wikipedia.org/wiki/Flyweight_pattern\" rel=\"nofollow noreferrer\">Flyweight pattern</a>. Rather than each Item having its own copy, they could share the same Translation objects.</p>\n\n<hr>\n\n<p>I've used <a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-fetch\" rel=\"nofollow noreferrer\"><code>Hash#fetch</code></a> rather than <code>[]</code> so it will throw a <code>KeyError</code> exception if the required keys are missing.</p>\n"}], "owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532991195, "creation_date": 1532984910, "last_edit_date": 1532987256, "question_id": 51602311, "link": "https://stackoverflow.com/questions/51602311/how-to-filter-an-array-of-objects", "title": "how to filter an array of objects", "body": "<p>I have following array of objects</p>\n\n<pre><code>{\n  : items=&gt;[\n    {\n      : id=&gt;\"cam-id-1\",\n      : translations=&gt;[\n        {\n          : name=&gt;\"abcd\",\n          : description=&gt;\"geiajfe\",\n          : locale=&gt;: fr,\n          : createdAt=&gt;Fri,\n          27Jul201800: 00: 00UTC+00: 00,\n          : updatedAt=&gt;Fri,\n          27Jul201800: 00: 00UTC+00: 00\n        },\n        {\n          : name=&gt;\"bon jor\",\n          : description=&gt;\"jwi nifneaoin ofieafi\",\n          : locale=&gt;: de,\n          : createdAt=&gt;Fri,\n          27Jul201800: 00: 00UTC+00: 00,\n          : updatedAt=&gt;Fri,\n          27Jul201800: 00: 00UTC+00: 00\n        },\n        {\n          : name=&gt;\"hello\",\n          : description=&gt;\"hello abcd\",\n          : locale=&gt;: en,\n          : createdAt=&gt;Fri,\n          27Jul201800: 00: 00UTC+00: 00,\n          : updatedAt=&gt;Fri,\n          27Jul201800: 00: 00UTC+00: 00\n        }\n      ]\n    },\n    {\n      : id=&gt;\"cam-id-2\",\n      : translations=&gt;[\n\n      ]\n    }\n  ],\n}\n</code></pre>\n\n<p>I want to filter the translations array based on locale. so e.g if i pass locale = fr then return the whole object but only one object in translations since there's only one locale fr.</p>\n\n<p>so the output will be</p>\n\n<pre><code> {\n      : items=&gt;[\n        {\n          : id=&gt;\"cam-id-1\",\n          : translations=&gt;[\n            {\n              : name=&gt;\"abcd\",\n              : description=&gt;\"geiajfe\",\n              : locale=&gt;: fr,\n              : createdAt=&gt;Fri,\n              27Jul201800: 00: 00UTC+00: 00,\n              : updatedAt=&gt;Fri,\n              27Jul201800: 00: 00UTC+00: 00\n            }\n          ]\n        },\n        {\n          : id=&gt;\"cam-id-2\",\n          : translations=&gt;[\n\n          ]\n        }\n      ],\n    }\n</code></pre>\n\n<p>i created a method to filter translations but it just returns filtered translation and i dont think this is the right way.</p>\n\n<pre><code>  def filter_translations(test)\n    array = []\n    test[:items][0][:translations].each do |t|\n      array &lt;&lt; t if t[:locale].to_s.casecmp(locale.to_s).zero? || t[:locale].to_s.include?(locale.to_s)\n    end\n    array\n  end\n</code></pre>\n\n<p>any idea?</p>\n"}, {"tags": ["ruby", "ajax", "jsonp"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1532981222, "post_id": 51601232, "comment_id": 90169192, "body": "Shouldn&#39;t it be <code>res = Net::HTTP.get_response(uri).body</code>?"}, {"owner": {"reputation": 13, "user_id": 4959273, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b12d66858ddfd8812fe18cf33d45bb7a?s=128&d=identicon&r=PG&f=1", "display_name": "GTeley", "link": "https://stackoverflow.com/users/4959273/gteley"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533023726, "post_id": 51601232, "comment_id": 90181353, "body": "@casper unfortunately not.Same error. I&#39;m wondering if the jsonp callback isn&#39;t working. When specified on the cURL command it makes no difference, but specifying it in the Ajax call it doesn&#39;t seem to get called."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533033103, "post_id": 51601232, "comment_id": 90187103, "body": "If you found the solution you can answer and approve your own question. That way others will find the answer also if they have the same problem later."}, {"owner": {"reputation": 13, "user_id": 4959273, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b12d66858ddfd8812fe18cf33d45bb7a?s=128&d=identicon&r=PG&f=1", "display_name": "GTeley", "link": "https://stackoverflow.com/users/4959273/gteley"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533042556, "post_id": 51601232, "comment_id": 90193617, "body": "Well, the problem is partly solved. Doing a jQuery Ajax call works, but calling it from a Ruby controller returns the EPROTONOSUPPORT error."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533043039, "post_id": 51601232, "comment_id": 90193927, "body": "The call you are making is going to port 443. That&#39;s an SSL connection. Perhaps check if in general you&#39;re able to make SSL requests with Ruby. <code>Net::HTTP.get_response(URI(&#39;https:&#47;&#47;www.google.com&#47;&#39;))</code>? Something screwy with SSL and your Ruby setup?"}, {"owner": {"reputation": 13, "user_id": 4959273, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b12d66858ddfd8812fe18cf33d45bb7a?s=128&d=identicon&r=PG&f=1", "display_name": "GTeley", "link": "https://stackoverflow.com/users/4959273/gteley"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1533045704, "post_id": 51601232, "comment_id": 90195718, "body": "@Casper Thanks, I think you nailed it. SSL support is no issue, but I now realize that the server is in a FreeBSD jail behind a reverse proxy. And the jail itself has no IPv6 support. The called server is on IPv6 only, so that explains a lot."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 4959273, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b12d66858ddfd8812fe18cf33d45bb7a?s=128&d=identicon&r=PG&f=1", "display_name": "GTeley", "link": "https://stackoverflow.com/users/4959273/gteley"}, "is_accepted": false, "score": 0, "last_activity_date": 1533057844, "creation_date": 1533057844, "answer_id": 51618913, "question_id": 51601232, "link": "https://stackoverflow.com/questions/51601232/ruby-jsonp-returns-errnoeprotonosupport/51618913#51618913", "title": "Ruby JSONP returns Errno::EPROTONOSUPPORT", "body": "<p>Problem was triggered by not having IPv6 support in the FreeBSD jail in which the calling process runs. And the server which was called only has IPv6 connectivity.</p>\n"}], "owner": {"reputation": 13, "user_id": 4959273, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b12d66858ddfd8812fe18cf33d45bb7a?s=128&d=identicon&r=PG&f=1", "display_name": "GTeley", "link": "https://stackoverflow.com/users/4959273/gteley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533057844, "creation_date": 1532979891, "last_edit_date": 1533045760, "question_id": 51601232, "link": "https://stackoverflow.com/questions/51601232/ruby-jsonp-returns-errnoeprotonosupport", "title": "Ruby JSONP returns Errno::EPROTONOSUPPORT", "body": "<p>This one is driving me nuts.\nI have two websites who have to talk to each other trough JSONP.</p>\n\n<p>Site A checks in its database if some value is present and returns json data {\"result\":\"Found in library\"} if found.</p>\n\n<p>When doing a cURL from the command line, I get my data as expected.</p>\n\n<p>Doing a Ajax call from site B, I can see in the logging of site A that the request is handled correct, but site B complains about \"Unexpected end of data at line 1\" The inspector shows me no data at all, so I assume that is the problem. Where did the data go?</p>\n\n<p>As I don't want the inner workings of the Ajax call to be reveiled, I want to do it in the Ruby controller with a Net::HTTP call.\nAgain, I can see in the logging of site A that the call is handled correct and returns the result.\nThis time, Ruby logging shows:</p>\n\n<blockquote>\n  <p>Errno::EPROTONOSUPPORT (Failed to open TCP connection to xx.domain.com:443 (Protocol not supported - socket(2) for \"xx.domain.com\" port 443)):</p>\n</blockquote>\n\n<p>My controller in site B:</p>\n\n<pre><code>  def query\n    respond_to do |format|\n      format.js {\n        # Submit Ajax call\n        uri = URI(base_url + \"/data_subjects/query.json\")\n        data = {\n          key: api_key,\n          parmA: params[:parmA],\n          parmB: params[:parmB],\n        }\n        uri.query = URI.encode_www_form(data)\n        logger.info(\"QUERY: #{uri.inspect}\")\n        res = Net::HTTP.get_response(uri)\n        render :json, JSON.parse(res)\n      }\n    end\n  end\n</code></pre>\n\n<p>My controller in site A:</p>\n\n<pre><code>  def query\n    respond_to do |format|\n      format.json {\n        .... Do some stuff\n        if $rc == 1\n         render json: {:result =&gt; I18n.t(\"result_found\")}, status: :ok , :layout =&gt; false\n        else\n          render json: {result: I18n.t(\"result_not_found\")}, status: 404, :layout =&gt; false\n        end\n      }\n    end\n</code></pre>\n\n<p>As I said, using cURL everything looks okay, but with either jQuery or Ruby it fails.</p>\n\n<blockquote>\n  <p>UPDATE</p>\n</blockquote>\n\n<p>Okay, found it!\nAs it turns out, you need to specify \":callback => params[:callback]\" to the json response:</p>\n\n<pre><code>render json: {:result =&gt; I18n.t(\"result_found\")}, :callback =&gt; params[:callback], status: :ok , :layout =&gt; false\n</code></pre>\n"}, {"tags": ["ruby", "marathontesting"], "answers": [{"tags": [], "owner": {"reputation": 4934, "user_id": 600379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/144ef395886107735c191a9f949c5e0e?s=128&d=identicon&r=PG", "display_name": "Dakshinamurthy Karra", "link": "https://stackoverflow.com/users/600379/dakshinamurthy-karra"}, "is_accepted": true, "score": 0, "last_activity_date": 1533035411, "last_edit_date": 1533035411, "creation_date": 1533032018, "answer_id": 51610945, "question_id": 51600923, "link": "https://stackoverflow.com/questions/51600923/detecting-if-an-alert-with-a-specific-window-name-appears-using-marathon-testing/51610945#51610945", "title": "Detecting if an alert with a specific window name appears using Marathon Testing Tool/Ruby", "body": "<p>Try using <code>get_window</code> and check the title with what you are expecting. Alternatively you can execute arbitrary Java code using <code>driver.execute_script</code> that can look for alert windows and do the needful.</p>\n\n<pre><code>#{{{ Marathon\nrequire_fixture 'default'\n#}}} Marathon\n\ndef test\n\n    with_window(\"SwingSet3\") {\n        select(\"JOptionPane\", \"true\")\n\n        option = Random.rand(2)\n\n        if(option == 0)\n          click(\"Show Warning Dialog\")\n        else\n          click(\"Show Confirmation Dialog\")\n        end\n\n        if(get_window == \"Warning Dialog Example\")\n          with_window(\"Warning Dialog Example\") {\n              click(\"OK\")\n          }\n        end\n\n        if(get_window == \"Select an Option\")\n          with_window(\"Select an Option\") {\n              click(\"Yes\")\n          }\n\n          with_window(\"Message\") {\n              click(\"OK\")\n          }\n        end\n    }\n\nend\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4228621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3319295ca2f639f0a4ebab50b692451?s=128&d=identicon&r=PG&f=1", "display_name": "Zein", "link": "https://stackoverflow.com/users/4228621/zein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 51610945, "answer_count": 1, "score": 0, "last_activity_date": 1533035411, "creation_date": 1532978535, "question_id": 51600923, "link": "https://stackoverflow.com/questions/51600923/detecting-if-an-alert-with-a-specific-window-name-appears-using-marathon-testing", "title": "Detecting if an alert with a specific window name appears using Marathon Testing Tool/Ruby", "body": "<p>I currently am using Marathon (Java Automation tool for testing) that runs a Ruby script on a Java application and need to detect if a specific alert appears. For example, I want it to press \"Accept\" on a row in a while loop and handle potential pop-up alerts during the process. </p>\n\n<p>Only 2 pop-ups can appear during this process of accepting.</p>\n\n<p>If a popup with the window title \"Are you sure?\" appears, I want it to press enter or click \"OK\" as usual. </p>\n\n<p>But, if a popup with the window title \"Message\" (which indicates error), I want it to press \"OK\" and exit the while loop. Exiting the while loop should be trivial to code after I figure out a way to differentiate the two pop-ups.</p>\n"}, {"tags": ["ruby", "irb"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1532977473, "post_id": 51600562, "comment_id": 90167451, "body": "I can&#39;t repro this on my 2.5.1 setup (using <code>rbenv</code>)"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 5, "creation_date": 1532978818, "post_id": 51600562, "comment_id": 90168126, "body": "You&#39;re trying to run <code>irb --simple-prompt -rrbconfig</code> from inside irb, you should run that from the shell."}], "owner": {"reputation": 3399, "user_id": 8936320, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vF3VX.jpg?s=128&g=1", "display_name": "Ishan Patel", "link": "https://stackoverflow.com/users/8936320/ishan-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533642716, "creation_date": 1532977119, "last_edit_date": 1533642716, "question_id": 51600562, "link": "https://stackoverflow.com/questions/51600562/irb-simple-prompt-rrbconfig-not-working", "title": "irb --simple-prompt -rrbconfig not working", "body": "<p>I am new to Ruby programming. I am reading a book (The Well Grounded Rubyist Second Edition), which says following:</p>\n\n<blockquote>\n  <p>Ruby can tell you where its installation files are located. To get the\n  information while in an irb session, you need to preload a Ruby\n  library package called rbconfig into your irb session.</p>\n</blockquote>\n\n<pre><code>$ irb --simple-prompt -rrbconfig\n</code></pre>\n\n<p>But for some reason, I am getting following error.</p>\n\n<pre><code>Traceback (most recent call last):\n1: from /Users/ip/.rbenv/versions/2.5.0/bin/irb:11:in `&lt;main&gt;'\nSyntaxError ((irb):2: syntax error, unexpected unary-, expecting keyword_do or '{' or '('\nirb --simple-prompt -rrbconfig\n                    ^)\n</code></pre>\n"}, {"tags": ["ruby", "salesforce", "where", "each", "haml"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 3, "creation_date": 1532976604, "post_id": 51600399, "comment_id": 90167058, "body": "What is <code>@price_book</code>? Where do you define it? What is <code>GEA</code>? Do you mean <code>&quot;GEA&quot;</code>?"}, {"owner": {"reputation": 41, "user_id": 8094803, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206288964722050/picture?type=large", "display_name": "Kelly Pedrick", "link": "https://stackoverflow.com/users/8094803/kelly-pedrick"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1532980480, "post_id": 51600399, "comment_id": 90168853, "body": "@pricebook is calling code in the controller for that page.  No issues with that code, but it pulls back all items listed in the price book,  GEA is a product code on the pricebook. I would like the loop to only bring back items with a productCode of GEA,  I tried with quotes and got an error about where."}, {"owner": {"reputation": 41, "user_id": 8094803, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206288964722050/picture?type=large", "display_name": "Kelly Pedrick", "link": "https://stackoverflow.com/users/8094803/kelly-pedrick"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1532980802, "post_id": 51600399, "comment_id": 90168988, "body": "I am trying to follow this pattern <a href=\"https://stackoverflow.com/questions/18950402/if-condition-in-each-do-rails\" title=\"if condition in each do rails\">stackoverflow.com/questions/18950402/&hellip;</a>, but got the error listed."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8094803, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206288964722050/picture?type=large", "display_name": "Kelly Pedrick", "link": "https://stackoverflow.com/users/8094803/kelly-pedrick"}, "edited": false, "score": 0, "creation_date": 1532988107, "post_id": 51602051, "comment_id": 90171706, "body": "pricebook is calling a class in Salesforce that returns a set of records that meet the class criteria, so the list data comes from that system. @price_book, the logic however is in SF     def get_products     client = Restforce.new     result = client.get &#39;/services/apexrest/portal/pricebook/&#39;, :business_unit =&gt; ENV[&#39;BUSINESS_UNIT&#39;]     # todo: handle error response     puts &quot;get pricebook body \\n\\n&quot;     puts result.body     puts &quot;\\n&quot;     puts &quot;get pricebook body productList \\n\\n&quot;     puts result.body.productList     puts &quot;\\n&quot;     price_book = result.body.productList"}, {"owner": {"reputation": 41, "user_id": 8094803, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206288964722050/picture?type=large", "display_name": "Kelly Pedrick", "link": "https://stackoverflow.com/users/8094803/kelly-pedrick"}, "edited": false, "score": 0, "creation_date": 1532988144, "post_id": 51602051, "comment_id": 90171719, "body": "I am not sue what ActiveRecord::Relation is.  can you define that for me?  Thank You"}, {"owner": {"reputation": 41, "user_id": 8094803, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206288964722050/picture?type=large", "display_name": "Kelly Pedrick", "link": "https://stackoverflow.com/users/8094803/kelly-pedrick"}, "edited": false, "score": 0, "creation_date": 1532989123, "post_id": 51602051, "comment_id": 90172018, "body": "This is a section of the     @price_book.inspect      keyactivities=&quot;&lt;h1&gt;Key Actives:&lt;/h1&gt;&lt;br&gt;\\r\\n&lt;b&gt;A special combination of 19 unique bioactive ingredients work to actively support cytokines balance and enhance immune system health. Key chemistries include:&lt;/b&gt;&quot; productCode=&quot;GEA&quot; productDescription=&quot;&lt;b&gt;Maximize your health and recovery. Balance your immune system and invest your body\u2019s ultimate performance capabilities.*&lt;/b&gt;"}, {"owner": {"reputation": 41, "user_id": 8094803, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206288964722050/picture?type=large", "display_name": "Kelly Pedrick", "link": "https://stackoverflow.com/users/8094803/kelly-pedrick"}, "edited": false, "score": 0, "creation_date": 1532989199, "post_id": 51602051, "comment_id": 90172047, "body": "so it appears from this that productCode is coming over and &quot;GEA&quot; is a valid value."}, {"owner": {"reputation": 1707, "user_id": 3292174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNPrX.jpg?s=128&g=1", "display_name": "Michael Malov", "link": "https://stackoverflow.com/users/3292174/michael-malov"}, "reply_to_user": {"reputation": 41, "user_id": 8094803, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206288964722050/picture?type=large", "display_name": "Kelly Pedrick", "link": "https://stackoverflow.com/users/8094803/kelly-pedrick"}, "edited": false, "score": 0, "creation_date": 1533023075, "post_id": 51602051, "comment_id": 90181005, "body": "@KellyPedrick It is not clear to me what is <code>@price_book</code>. Can you put in the template <code>= @price_book.class</code> and give us output?"}], "tags": [], "owner": {"reputation": 1707, "user_id": 3292174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNPrX.jpg?s=128&g=1", "display_name": "Michael Malov", "link": "https://stackoverflow.com/users/3292174/michael-malov"}, "is_accepted": false, "score": 0, "last_activity_date": 1532983636, "creation_date": 1532983636, "answer_id": 51602051, "question_id": 51600399, "link": "https://stackoverflow.com/questions/51600399/ruby-haml-add-if-condition-to-each-do/51602051#51602051", "title": "Ruby HAML add If Condition to each.do", "body": "<p>If <code>@price_book</code> is an <code>ActiveRecord::Relation</code> object, not just array of <code>YourModel</code> and <code>productcode</code> is String column of <code>YourModel</code> then you can call additional ActiveRecord methods like where:</p>\n\n<pre><code>@price_book.where(:productcode =&gt; 'GEA')\n</code></pre>\n\n<p>If GEA, GFE are not variables defined in view then values should be in quotes (double quotes) <code>'GEA'</code>, <code>\"GFE\"</code>.</p>\n\n<hr>\n\n<p>You can put </p>\n\n<pre><code>= @price_book.inspect\n</code></pre>\n\n<p>in your template and get more info about it. Tell us what kind of object is <code>@price_book</code> and we will give you advice.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 8094803, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206288964722050/picture?type=large", "display_name": "Kelly Pedrick", "link": "https://stackoverflow.com/users/8094803/kelly-pedrick"}, "is_accepted": true, "score": 0, "last_activity_date": 1533145844, "creation_date": 1533145844, "answer_id": 51639431, "question_id": 51600399, "link": "https://stackoverflow.com/questions/51600399/ruby-haml-add-if-condition-to-each-do/51639431#51639431", "title": "Ruby HAML add If Condition to each.do", "body": "<p>I was able to apply the if filter logic to the loop with the following modification to the code</p>\n\n<pre><code>    - @price_book.select{ |prod| prod[:productCode] == \"GEA\" }.each do |prod|\n</code></pre>\n\n<p>This returned only items from the price book with a product code of GEA</p>\n"}], "owner": {"reputation": 41, "user_id": 8094803, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206288964722050/picture?type=large", "display_name": "Kelly Pedrick", "link": "https://stackoverflow.com/users/8094803/kelly-pedrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 51639431, "answer_count": 2, "score": 1, "last_activity_date": 1533145844, "creation_date": 1532976385, "question_id": 51600399, "link": "https://stackoverflow.com/questions/51600399/ruby-haml-add-if-condition-to-each-do", "title": "Ruby HAML add If Condition to each.do", "body": "<p>I have a haml ruby site that is pulling data from Salesforce.  What I need to be able to do is to set an if condition based on the productCode listed in SF.  The each.do establishes a loop to display the related data for each record in the loop.  </p>\n\n<p>The client would like productFamily specific pages.  So I need to loop through all items with a product code of GEA for one page and GFE for another page.</p>\n\n<pre><code>      .row\n    .col-xs-12\n      - @price_book.where(:productCode =&gt; GEA).each do |prod|\n\n        .row\n          .panel.panel-default\n            .panel-body\n              .col-xs-4\n                %img{:src =&gt; \"#{prod.productUrl}\", :height =&gt; \"200\", :width =&gt; \"150\"}\n</code></pre>\n\n<p>When I attempt to run this I get the following error:</p>\n\n<pre><code>ActionView::Template::Error (uninitialized constant ActionView::CompiledTemplates::GEA): \n7:  \n8:       .row \n9:         .col-xs-12 \n10:           - @price_book.where(:productcode =&gt; GEA).each do |prod| \n11:  \n12:             .row \n13:               .panel.panel-default \n</code></pre>\n\n<p>Thank You for your assistance, I am new to Ruby and modifying another Developers code.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 2, "creation_date": 1532976158, "post_id": 51600279, "comment_id": 90166863, "body": "Don&#39;t you think it should be <code>has_many :opportunity_enrolments</code> (plural)?"}, {"owner": {"reputation": 880, "user_id": 3334690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1a9715a46ee28e3151148688c0149f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3334690", "link": "https://stackoverflow.com/users/3334690/user3334690"}, "edited": false, "score": 0, "creation_date": 1532976301, "post_id": 51600279, "comment_id": 90166933, "body": "what does your schema look like for the three tables?"}, {"owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "edited": false, "score": 0, "creation_date": 1532976560, "post_id": 51600279, "comment_id": 90167044, "body": "@nathan I think <code>OpportunityEnrolment </code> this is join table but you have setup wrong association in this. Please go through below link. May be you can solve it on your own then. <a href=\"https://guides.rubyonrails.org/association_basics.html#the-has-many-through-association\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 35, "user_id": 10156878, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H1T4sH84Eao/AAAAAAAAAAI/AAAAAAAAAEk/8BIt4vW4CYs/photo.jpg?sz=128", "display_name": "Nathan M", "link": "https://stackoverflow.com/users/10156878/nathan-m"}, "edited": false, "score": 0, "creation_date": 1532978963, "post_id": 51600279, "comment_id": 90168192, "body": "Got the answer for this one. I was inconsistent in my singular/plural references in the model. The opportunity_enrolment relationship on users was just one of them. Also had an issue on the OpportunityEnrolment model as well. Thanks for your help!"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10156878, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H1T4sH84Eao/AAAAAAAAAAI/AAAAAAAAAEk/8BIt4vW4CYs/photo.jpg?sz=128", "display_name": "Nathan M", "link": "https://stackoverflow.com/users/10156878/nathan-m"}, "edited": false, "score": 0, "creation_date": 1532978810, "post_id": 51600411, "comment_id": 90168120, "body": "That worked! I think I over-thought my relationships, then started playing around singular/plural in the models and got in a spaghetti mess. Thanks for your help!"}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 1, "last_activity_date": 1532976465, "creation_date": 1532976465, "answer_id": 51600411, "question_id": 51600279, "link": "https://stackoverflow.com/questions/51600279/ruby-on-rails-wrong-foreign-key-used-in-has-many-through-join/51600411#51600411", "title": "Ruby on Rails - Wrong foreign key used in has_many through join", "body": "<p>Your <code>OpportunityEnrollment</code> table is the glue between your <code>Opportunity</code> and <code>Volunteer</code> classses and should really be using a <code>belongs_to</code>.  Plus, you can use the rails defaults which will interpret the class names and foreign keys for you.</p>\n\n<p>Also don't define a class called 'Volunteer' in  file called 'users.rb'</p>\n\n<p>opportunity.rb</p>\n\n<pre><code>class Opportunity &lt; ApplicationRecord\n  # note the plural below as per rails convention\n  has_many :opportunity_enrolments\n  has_many :volunteers, through: :opportunity_enrolments\nend\n</code></pre>\n\n<p>opportunity_enrolment.rb</p>\n\n<pre><code>class OpportunityEnrolment &lt; ApplicationRecord\n  belongs_to :opportunity\n  belongs_to :volunteer \nend\n</code></pre>\n\n<p>volunteer.rb</p>\n\n<pre><code>class Volunteer &lt; ApplicationRecord\n  has_many :opportunity_enrolments\n  has_many :opportunities, through: :opportunity_enrolments\nend\n</code></pre>\n\n<p>Your join table should have <code>opportunity_id</code> and <code>volunteer_id</code> fields.</p>\n"}], "owner": {"reputation": 35, "user_id": 10156878, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H1T4sH84Eao/AAAAAAAAAAI/AAAAAAAAAEk/8BIt4vW4CYs/photo.jpg?sz=128", "display_name": "Nathan M", "link": "https://stackoverflow.com/users/10156878/nathan-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 51600411, "answer_count": 1, "score": 1, "last_activity_date": 1532976465, "creation_date": 1532975803, "last_edit_date": 1532976115, "question_id": 51600279, "link": "https://stackoverflow.com/questions/51600279/ruby-on-rails-wrong-foreign-key-used-in-has-many-through-join", "title": "Ruby on Rails - Wrong foreign key used in has_many through join", "body": "<p>Rails 5.2, Postgres 10.4</p>\n\n<p>New to rails. I have a has_many :through relationship that I'm trying to join on, however, Rails seems to be using the wrong foreign key despite my definition.</p>\n\n<p>A user will enrol in many opportunities through opportunity enrolment. An opportunity could have many users enrol.</p>\n\n<p><strong>opportunity.rb</strong></p>\n\n<pre><code>class Opportunity &lt; ApplicationRecord\n  has_many :opportunity_enrolment, :class_name =&gt; 'OpportunityEnrolment', :foreign_key =&gt; \"opportunity_id\"\n  has_many :volunteers, through: :opportunity_enrolment, :foreign_key =&gt; \"opportunity_id\"\nend\n</code></pre>\n\n<p><strong>opportunity_enrolment.rb</strong></p>\n\n<pre><code>class OpportunityEnrolment &lt; ApplicationRecord\n  has_many :opportunities, foreign_key: \"id\"\n  has_many :volunteers, foreign_key: \"id\"\nend\n</code></pre>\n\n<p><strong>users.rb</strong></p>\n\n<pre><code>class Volunteer &lt; ApplicationRecord\n  has_many :opportunity_enrolment, :class_name =&gt; 'OpportunityEnrolment', foreign_key: \"volunteer_id\"\n  has_many :opportunities, through: :opportunity_enrolment, foreign_key: \"opportunity_id\"\nend\n</code></pre>\n\n<p>When showing a specific user and then joining that user to their opportunities, I get the very first record in the opportunities table as the join is created incorrectly.</p>\n\n<pre><code>&lt;% @volunteer.opportunities.each do |volunteerenrolment| %&gt;\n  &lt;table frame=\"box\"&gt;\n    &lt;tr&gt;&lt;td&gt;Name: &lt;%= volunteerenrolment.oppname %&gt;&lt;/td&gt;&lt;/tr&gt; --Oppname is in the opportunities table.\n    &lt;tr&gt;&lt;td&gt;Created: &lt;%= volunteerenrolment.created_at %&gt;&lt;/td&gt;&lt;/tr&gt;\n  &lt;/table&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Rails creates the following select statement.</p>\n\n<pre><code>SELECT \"opportunities\".* FROM \"opportunities\" INNER JOIN \"opportunity_enrolments\" ON \"opportunities\".\"id\" = \"opportunity_enrolments\".\"id\" WHERE \"opportunity_enrolments\".\"volunteer_id\" = $1\n</code></pre>\n\n<p>opportunity_enrolments.id is the primary key on the opportunity_enrolments table. I need my app to join on opportunity_enrolments.opportunity_id instead, like so:</p>\n\n<pre><code>SELECT \"opportunities\".* FROM \"opportunities\" INNER JOIN \"opportunity_enrolments\" ON \"opportunities\".\"id\" = \"opportunity_enrolments\".\"opportunity_id\" WHERE \"opportunity_enrolments\".\"volunteer_id\" = $1\n</code></pre>\n\n<p>For the life of me I don't know where Rails is pulling the incorrect foreign key from. I've tried to change it in my model multiple times, but Rails doesn't seem to look there. If I manually write the correct select statement using a .joins, then everything works perfect, but I want to keep in line with the \"convention over configuration\"</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "email"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1532975147, "post_id": 51600114, "comment_id": 90166380, "body": "What does a &quot;follow up&quot; email look like?"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1532975714, "post_id": 51600114, "comment_id": 90166637, "body": "you can schedule it with sidekiq and sidekiq-scheduler; you can use something like maily_herald; you can use actual third-party marketing automation services. there&#39;s really no limit."}], "answers": [{"tags": [], "owner": {"reputation": 628, "user_id": 8267417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qgllr-3VCV4/AAAAAAAAAAI/AAAAAAAAAAo/E_crAMNR-fM/photo.jpg?sz=128", "display_name": "gasc", "link": "https://stackoverflow.com/users/8267417/gasc"}, "is_accepted": false, "score": 0, "last_activity_date": 1532986466, "last_edit_date": 1532986466, "creation_date": 1532975873, "answer_id": 51600297, "question_id": 51600114, "link": "https://stackoverflow.com/questions/51600114/welcome-emails-in-ruby/51600297#51600297", "title": "Welcome emails in Ruby", "body": "<p>Since you are using Devise already, you can just overwrite the confirmation controller, try something like this.</p>\n\n<pre><code>class ConfirmationsController &lt; Devise::ConfirmationsController\n  # GET /resource/confirmation?confirmation_token=abcdef\n  def show\n    super do |resource|\n      YourMailerClass.follow_up(resource).deliver_later(wait_until: 1.day.from_now) if resource.errors.empty?\n    end\n  end\nend\n</code></pre>\n\n<p>You also need to update the <code>routes.rb</code> file, add the option <code>controllers: { confirmations: :confirmations }</code> at the end of the line where you define <code>devise_for</code> (restart your server after this).</p>\n\n<p>I'm assuming you already have a background jobs proccesor, like sidekiq</p>\n\n<p>Hope it helps</p>\n"}], "owner": {"reputation": 1, "user_id": 10156859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DWh5L.jpg?s=128&g=1", "display_name": "Steven F.", "link": "https://stackoverflow.com/users/10156859/steven-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532986466, "creation_date": 1532975043, "question_id": 51600114, "link": "https://stackoverflow.com/questions/51600114/welcome-emails-in-ruby", "title": "Welcome emails in Ruby", "body": "<p>I'm using Ruby and Devise:Confirmable. A day or so after a new user has registered and confirmed a new trial account we'd like to automatically send him or her a 'follow up email'. Is this something we should also do through devise, or is there a separate gem or process we should implement?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "postgresql", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 3, "user_id": 7077398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9cb4fbf8c3ac6bc9966dbab3374c03a?s=128&d=identicon&r=PG&f=1", "display_name": "Lancelot", "link": "https://stackoverflow.com/users/7077398/lancelot"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1532976129, "post_id": 51600023, "comment_id": 90166850, "body": "Yeah I was using order to sort using created_at"}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1532975641, "post_id": 51600119, "comment_id": 90166616, "body": "You might need to update the answer based on what field OP wants the records to be sorted. But so far so good."}], "tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1532976388, "last_edit_date": 1532976388, "creation_date": 1532975058, "answer_id": 51600119, "question_id": 51600023, "link": "https://stackoverflow.com/questions/51600023/how-to-fetch-only-those-fields-events-from-database-which-have-not-occurred-ye/51600119#51600119", "title": "How to fetch only those fields (events) from database which have not occurred yet in an event management webapp", "body": "<p>Assuming the date fields are <code>startsat</code> and <code>endsat</code> and model name is <code>Event</code>, you can make use of below query:</p>\n\n<pre><code>Event.where('startsat &gt; ?', Time.current).order(:created_at)\n =&gt; Records that start after current time\n</code></pre>\n\n<p>Find the documentation <a href=\"https://guides.rubyonrails.org/active_record_querying.html#conditions\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://guides.rubyonrails.org/active_record_querying.html#ordering\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 7077398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9cb4fbf8c3ac6bc9966dbab3374c03a?s=128&d=identicon&r=PG&f=1", "display_name": "Lancelot", "link": "https://stackoverflow.com/users/7077398/lancelot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 51600119, "answer_count": 1, "score": -2, "last_activity_date": 1532976388, "creation_date": 1532974594, "question_id": 51600023, "link": "https://stackoverflow.com/questions/51600023/how-to-fetch-only-those-fields-events-from-database-which-have-not-occurred-ye", "title": "How to fetch only those fields (events) from database which have not occurred yet in an event management webapp", "body": "<p>My database contains an events table with startsat and endsat timestamps which stores the datatime of the event's starting and ending time.\nI also have an index page to list all events but I want only those events to be displayed which are yet to occur, sorted in ascending order.</p>\n\n<p>My specifications:</p>\n\n<pre><code>Rails: 5.2.0\nDatabase: PostgreSQL (production) sqlite3 (dev)\n</code></pre>\n"}, {"tags": ["ruby", "io"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1532972223, "post_id": 51599329, "comment_id": 90164883, "body": "IIRC NTFS allows custom properties via ADS (Alternative Data Streams), but haven&#39;t thought about that for years. You&#39;d have to use a Windows-specific library to do that."}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1532977537, "post_id": 51599329, "comment_id": 90167490, "body": "I don&#39;t know if you can create a <i>new</i> attribute.  Can you describe a bit more about what you think the expected outcome would be, regardless of language?"}, {"owner": {"reputation": 806, "user_id": 3287961, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8fb185f8e48be3875ddf03d697ecae52?s=128&d=identicon&r=PG&f=1", "display_name": "lehermj", "link": "https://stackoverflow.com/users/3287961/lehermj"}, "edited": false, "score": 0, "creation_date": 1532980214, "post_id": 51599329, "comment_id": 90168729, "body": "I have a zip file which, among a bunch of valid xml files, there is a blank file whose name is an md5 hash (that was generated at the creation of this zip). I then have a java program which reads in the content in that zip and calculates a md5 then checks its calculation with the hash that was in the zip. I don&#39;t want to have to store the &quot;goal&quot; hash as a file inside of the zip."}], "answers": [{"comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1533052034, "post_id": 51602296, "comment_id": 90200233, "body": "Great suggestion. IMO a gem would be total overkill for this. Ruby was heavily inspired by Perl, so using it to glue together existing tools is one of its strong suits!"}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 2, "last_activity_date": 1533057344, "last_edit_date": 1533057344, "creation_date": 1532984835, "answer_id": 51602296, "question_id": 51599329, "link": "https://stackoverflow.com/questions/51599329/how-to-write-to-windows-file-properties-in-ruby/51602296#51602296", "title": "How to write to windows file properties in Ruby?", "body": "<p>Those attributes are specific to a Windows platform, and I am relatively certain there are no mechanisms built-into Ruby to alter them.</p>\n\n<p>This means you will either have to search for a gem that does it for you, or the simpler approach is to simply invoke platform commands to alter them. The <code>attrib</code> command is used for changing those, which can be invoked with <code>system</code>.</p>\n\n<p>Basic syntax is something like this:</p>\n\n<pre><code>attrib [+ attribute | - attribute] [pathname]\n</code></pre>\n\n<p>You <strong>CANNOT</strong> just add any attribute you want, there are specific flags, and they each mean something.</p>\n\n<ul>\n<li><strong>R</strong> = Read-only</li>\n<li><strong>H</strong> = Hidden</li>\n<li><strong>S</strong> = System</li>\n<li><strong>D</strong> = Directory</li>\n<li><strong>A</strong> = Archive</li>\n<li><strong>C</strong> = Compressed</li>\n<li><strong>E</strong> = Encrypted</li>\n<li><strong>N</strong> = Not Indexed</li>\n<li><strong>L</strong> = Re-parse Points</li>\n<li><strong>O</strong> = Offline</li>\n<li><strong>P</strong> = Sparse File</li>\n<li><strong>I</strong> = Not content indexed</li>\n<li><strong>T</strong> = Temporary</li>\n</ul>\n\n<p>So, if you wanted to add \"hidden\" attribute, and remove \"read-only\" attribute...</p>\n\n<pre><code>system 'attrib +H -R myfile.txt'\n</code></pre>\n\n<p>This is likely not a comprehensive list of the flags, but definitely the most common. The point being that you unfortunately cannot just add arbitrary strings, and altering them will have an effect on how the file is handled by Windows.</p>\n"}], "owner": {"reputation": 806, "user_id": 3287961, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8fb185f8e48be3875ddf03d697ecae52?s=128&d=identicon&r=PG&f=1", "display_name": "lehermj", "link": "https://stackoverflow.com/users/3287961/lehermj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1549950063, "creation_date": 1532971597, "last_edit_date": 1549950063, "question_id": 51599329, "link": "https://stackoverflow.com/questions/51599329/how-to-write-to-windows-file-properties-in-ruby", "title": "How to write to windows file properties in Ruby?", "body": "<p>I would like to create an attribute and store a value inside of the properties of a file on Windows. You can view such attributes when you write click the file properties>details. How would I create a new att/value here using Ruby?[![enter image description here][1]][1</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "bundler"], "comments": [{"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1532970832, "post_id": 51598997, "comment_id": 90164194, "body": "There is always additional information which gem did not install in the error message or at least some indication on what went wrong. Can you attach the full stacktrace? Also, which version of rails and ruby are you using?"}, {"owner": {"reputation": 11, "user_id": 10156546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDn5K.jpg?s=128&g=1", "display_name": "nosoul88", "link": "https://stackoverflow.com/users/10156546/nosoul88"}, "reply_to_user": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1532971639, "post_id": 51598997, "comment_id": 90164597, "body": "Thanks @jedi, the versions are the ones in the gemfile, I will add it on the body of the question: ruby 2.3.1 and rails 5.2.0"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1532972638, "post_id": 51598997, "comment_id": 90165098, "body": "Well, Heroku says &quot;It looks like you removed some gems from Gemfile and did not run bundle install prior deploying to Heroku&quot;. Did you run bundle  install after removing the gems?"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1532973128, "post_id": 51598997, "comment_id": 90165354, "body": "Try running this: <code>bundle; git add -f Gemfile.lock; git commit -am &quot;add gemfile.lock&quot;; git push heroku master</code>;"}, {"owner": {"reputation": 11, "user_id": 10156546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDn5K.jpg?s=128&g=1", "display_name": "nosoul88", "link": "https://stackoverflow.com/users/10156546/nosoul88"}, "reply_to_user": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1532973188, "post_id": 51598997, "comment_id": 90165385, "body": "Yes @jedi, Many, many times! and I added the changes with git add ., committed an pushed it."}, {"owner": {"reputation": 11, "user_id": 10156546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDn5K.jpg?s=128&g=1", "display_name": "nosoul88", "link": "https://stackoverflow.com/users/10156546/nosoul88"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1532973844, "post_id": 51598997, "comment_id": 90165722, "body": "@JoshBrody I manually deleted the Gemfile.lock file. After that I run bundle install from the docker container that is running the server and have all the dependencies. That made the  Gemfile.lock appears again. I added it, committed and pushed, with the same result :( ."}, {"owner": {"reputation": 12955, "user_id": 147390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/db953d125f5cc49756edb6149f1b813e?s=128&d=identicon&r=PG", "display_name": "Schneems", "link": "https://stackoverflow.com/users/147390/schneems"}, "edited": false, "score": 0, "creation_date": 1535402315, "post_id": 51598997, "comment_id": 91044258, "body": "Are you working from another branch? If so you have to <code>git push heroku &lt;branchname&gt;:master</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2131, "user_id": 2343935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/li569.png?s=128&g=1", "display_name": "grooveplex", "link": "https://stackoverflow.com/users/2343935/grooveplex"}, "edited": false, "score": 0, "creation_date": 1551291617, "post_id": 54911614, "comment_id": 96590708, "body": "Hey, thanks for writing an answer! Please <a href=\"https://stackoverflow.com/posts/54911614/edit\">edit</a> your answer to add a bit of detail about how your code works and how it will best solve OP&#39;s issue. Thanks! :)"}], "tags": [], "owner": {"reputation": 19, "user_id": 3330813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/llz1q.jpg?s=128&g=1", "display_name": "Wasik", "link": "https://stackoverflow.com/users/3330813/wasik"}, "is_accepted": false, "score": -2, "last_activity_date": 1551294069, "last_edit_date": 1551294069, "creation_date": 1551289919, "answer_id": 54911614, "question_id": 51598997, "link": "https://stackoverflow.com/questions/51598997/herokurails-failed-to-install-gems-via-bundler/54911614#54911614", "title": "[Heroku][Rails] ! Failed to install gems via Bundler", "body": "<p>Here are the steps to resolve that issue. For some reason, your <code>Gemfile.lock</code> file didn't get committed correctly.</p>\n\n<p>bundle your gems and add the file specifially, commit that and push back to heroku</p>\n\n<pre><code>bundle\ngit add -f Gemfile.lock\ngit commit -m 'added Gemfile.lock'\ngit push heroku master\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2301, "user_id": 4229573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e7951be77e4a473ae68428a91296b6?s=128&d=identicon&r=PG", "display_name": "Sawo Cliff", "link": "https://stackoverflow.com/users/4229573/sawo-cliff"}, "is_accepted": false, "score": 0, "last_activity_date": 1593678445, "creation_date": 1593678445, "answer_id": 62692126, "question_id": 51598997, "link": "https://stackoverflow.com/questions/51598997/herokurails-failed-to-install-gems-via-bundler/62692126#62692126", "title": "[Heroku][Rails] ! Failed to install gems via Bundler", "body": "<p>I found that adding the current ruby version you are running into the gem file then running</p>\n<p>bundle update --ruby</p>\n<p>does the job pretty well.</p>\n<p>This article from heroku explains more\n<a href=\"https://devcenter.heroku.com/articles/ruby-versions\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/ruby-versions</a></p>\n"}], "owner": {"reputation": 11, "user_id": 10156546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDn5K.jpg?s=128&g=1", "display_name": "nosoul88", "link": "https://stackoverflow.com/users/10156546/nosoul88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1040, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1593678445, "creation_date": 1532970176, "last_edit_date": 1532971729, "question_id": 51598997, "link": "https://stackoverflow.com/questions/51598997/herokurails-failed-to-install-gems-via-bundler", "title": "[Heroku][Rails] ! Failed to install gems via Bundler", "body": "<p>First of everything, this is my first question.\nI used Strack Overflow just for years, an I want to say thank you for every single guy that expend time Asking and Answering questions.\nYou guys made possible my career</p>\n\n<p>I'm trying to deploy a Rails app in Heroku but I'm receiving this error after pushing the branch:\n<strong>Failed to install gems via Bundler.</strong>\nMy gems files are really simples:</p>\n\n<p>Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\ngit_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\nruby '2.3.1'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.2.0'\ngem 'pg', '~&gt; 0.21'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'turbolinks', '~&gt; 5'\ngem 'jbuilder', '~&gt; 2.5'\ngem 'bootsnap', '&gt;= 1.1.0', require: false\ngem 'responders'\ngem 'dotenv-rails'\ngem 'active_model_serializers', '~&gt;0.9.4'\ngem 'httparty'\n\ngroup :development, :test do\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\nend\n\ngroup :development do\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\nend\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\n#gem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>Gemfile.lock:</p>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    actioncable (5.2.0)\n      actionpack (= 5.2.0)\n      nio4r (~&gt; 2.0)\n      websocket-driver (&gt;= 0.6.1)\n    actionmailer (5.2.0)\n      actionpack (= 5.2.0)\n      actionview (= 5.2.0)\n      activejob (= 5.2.0)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 2.0)\n    actionpack (5.2.0)\n      actionview (= 5.2.0)\n      activesupport (= 5.2.0)\n      rack (~&gt; 2.0)\n      rack-test (&gt;= 0.6.3)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    actionview (5.2.0)\n      activesupport (= 5.2.0)\n      builder (~&gt; 3.1)\n      erubi (~&gt; 1.4)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.3)\n    active_model_serializers (0.9.7)\n      activemodel (&gt;= 3.2)\n      concurrent-ruby (~&gt; 1.0)\n    activejob (5.2.0)\n      activesupport (= 5.2.0)\n      globalid (&gt;= 0.3.6)\n    activemodel (5.2.0)\n      activesupport (= 5.2.0)\n    activerecord (5.2.0)\n      activemodel (= 5.2.0)\n      activesupport (= 5.2.0)\n      arel (&gt;= 9.0)\n    activestorage (5.2.0)\n      actionpack (= 5.2.0)\n      activerecord (= 5.2.0)\n      marcel (~&gt; 0.3.1)\n    activesupport (5.2.0)\n      concurrent-ruby (~&gt; 1.0, &gt;= 1.0.2)\n      i18n (&gt;= 0.7, &lt; 2)\n      minitest (~&gt; 5.1)\n      tzinfo (~&gt; 1.1)\n    arel (9.0.0)\n    bindex (0.5.0)\n    bootsnap (1.3.1)\n      msgpack (~&gt; 1.0)\n    builder (3.2.3)\n    byebug (10.0.2)\n    concurrent-ruby (1.0.5)\n    crass (1.0.4)\n    dotenv (2.5.0)\n    dotenv-rails (2.5.0)\n      dotenv (= 2.5.0)\n      railties (&gt;= 3.2, &lt; 6.0)\n    erubi (1.7.1)\n    execjs (2.7.0)\n    ffi (1.9.25)\n    globalid (0.4.1)\n      activesupport (&gt;= 4.2.0)\n    httparty (0.16.2)\n      multi_xml (&gt;= 0.5.2)\n    i18n (1.0.1)\n      concurrent-ruby (~&gt; 1.0)\n    jbuilder (2.7.0)\n      activesupport (&gt;= 4.2.0)\n      multi_json (&gt;= 1.2)\n    listen (3.1.5)\n      rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n      rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n      ruby_dep (~&gt; 1.2)\n    loofah (2.2.2)\n      crass (~&gt; 1.0.2)\n      nokogiri (&gt;= 1.5.9)\n    mail (2.7.0)\n      mini_mime (&gt;= 0.1.1)\n    marcel (0.3.2)\n      mimemagic (~&gt; 0.3.2)\n    method_source (0.9.0)\n    mimemagic (0.3.2)\n    mini_mime (1.0.0)\n    mini_portile2 (2.3.0)\n    minitest (5.11.3)\n    msgpack (1.2.4)\n    multi_json (1.13.1)\n    multi_xml (0.6.0)\n    nio4r (2.3.1)\n    nokogiri (1.8.4)\n      mini_portile2 (~&gt; 2.3.0)\n    pg (0.21.0)\n    rack (2.0.5)\n    rack-test (1.1.0)\n      rack (&gt;= 1.0, &lt; 3)\n    rails (5.2.0)\n      actioncable (= 5.2.0)\n      actionmailer (= 5.2.0)\n      actionpack (= 5.2.0)\n      actionview (= 5.2.0)\n      activejob (= 5.2.0)\n      activemodel (= 5.2.0)\n      activerecord (= 5.2.0)\n      activestorage (= 5.2.0)\n      activesupport (= 5.2.0)\n      bundler (&gt;= 1.3.0)\n      railties (= 5.2.0)\n      sprockets-rails (&gt;= 2.0.0)\n    rails-dom-testing (2.0.3)\n      activesupport (&gt;= 4.2.0)\n      nokogiri (&gt;= 1.6)\n    rails-html-sanitizer (1.0.4)\n      loofah (~&gt; 2.2, &gt;= 2.2.2)\n    railties (5.2.0)\n      actionpack (= 5.2.0)\n      activesupport (= 5.2.0)\n      method_source\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.18.1, &lt; 2.0)\n    rake (12.3.1)\n    rb-fsevent (0.10.3)\n    rb-inotify (0.9.10)\n      ffi (&gt;= 0.5.0, &lt; 2)\n    responders (2.4.0)\n      actionpack (&gt;= 4.2.0, &lt; 5.3)\n      railties (&gt;= 4.2.0, &lt; 5.3)\n    ruby_dep (1.5.0)\n    sass (3.5.7)\n      sass-listen (~&gt; 4.0.0)\n    sass-listen (4.0.0)\n      rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n      rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n    sass-rails (5.0.7)\n      railties (&gt;= 4.0.0, &lt; 6)\n      sass (~&gt; 3.1)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n      tilt (&gt;= 1.1, &lt; 3)\n    sprockets (3.7.2)\n      concurrent-ruby (~&gt; 1.0)\n      rack (&gt; 1, &lt; 3)\n    sprockets-rails (3.2.1)\n      actionpack (&gt;= 4.0)\n      activesupport (&gt;= 4.0)\n      sprockets (&gt;= 3.0.0)\n    thor (0.20.0)\n    thread_safe (0.3.6)\n    tilt (2.0.8)\n    turbolinks (5.1.1)\n      turbolinks-source (~&gt; 5.1)\n    turbolinks-source (5.1.0)\n    tzinfo (1.2.5)\n      thread_safe (~&gt; 0.1)\n    uglifier (4.1.17)\n      execjs (&gt;= 0.3.0, &lt; 3)\n    web-console (3.6.2)\n      actionview (&gt;= 5.0)\n      activemodel (&gt;= 5.0)\n      bindex (&gt;= 0.4.0)\n      railties (&gt;= 5.0)\n    websocket-driver (0.7.0)\n      websocket-extensions (&gt;= 0.1.0)\n    websocket-extensions (0.1.3)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  active_model_serializers (~&gt; 0.9.4)\n  bootsnap (&gt;= 1.1.0)\n  byebug\n  dotenv-rails\n  httparty\n  jbuilder (~&gt; 2.5)\n  listen (&gt;= 3.0.5, &lt; 3.2)\n  pg (~&gt; 0.21)\n  rails (~&gt; 5.2.0)\n  responders\n  sass-rails (~&gt; 5.0)\n  turbolinks (~&gt; 5)\n  uglifier (&gt;= 1.3.0)\n  web-console (&gt;= 3.3.0)\n\nRUBY VERSION\n   ruby 2.3.1p112\n\nBUNDLED WITH\n   1.16.3\n</code></pre>\n\n<p><strong>Complete build log</strong></p>\n\n<pre><code> !     Warning: Multiple default buildpacks reported the ability to handle this app. The first buildpack in the list below will be used.\n\n            Detected buildpacks: Ruby,Node.js\n\n            See https://devcenter.heroku.com/articles/buildpacks#buildpack-detect-order\n\n-----&gt; Ruby app detected\n\n-----&gt; Compiling Ruby/Rails\n\n-----&gt; Using Ruby version: ruby-2.3.1\n\n-----&gt; Installing dependencies using bundler 1.15.2\n\n       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\n\n       You are trying to install in deployment mode after changing\n\n       your Gemfile. Run `bundle install` elsewhere and add the\n\n       updated Gemfile.lock to version control.\n\n\n\n       The dependencies in your gemfile changed\n\n\n\n       You have added to the Gemfile:\n\n       * responders\n\n       * dotenv-rails\n\n       * active_model_serializers (~&gt; 0.9.4)\n\n       * httparty\n\n\n\n       You have deleted from the Gemfile:\n\n       * capybara (&lt; 4.0, &gt;= 2.15)\n\n       * chromedriver-helper\n\n       * coffee-rails (~&gt; 4.2)\n\n       * selenium-webdriver\n\n       * spring\n\n       * spring-watcher-listen (~&gt; 2.0.0)\n\n       Bundler Output: You are trying to install in deployment mode after changing\n\n       your Gemfile. Run `bundle install` elsewhere and add the\n\n       updated Gemfile.lock to version control.\n\n\n\n       The dependencies in your gemfile changed\n\n\n\n       You have added to the Gemfile:\n\n       * responders\n\n       * dotenv-rails\n\n       * active_model_serializers (~&gt; 0.9.4)\n\n       * httparty\n\n\n\n       You have deleted from the Gemfile:\n\n       * capybara (&lt; 4.0, &gt;= 2.15)\n\n       * chromedriver-helper\n\n       * coffee-rails (~&gt; 4.2)\n\n       * selenium-webdriver\n\n       * spring\n\n       * spring-watcher-listen (~&gt; 2.0.0)\n\n !\n\n !     Failed to install gems via Bundler.\n\n !\n\n !     Push rejected, failed to compile Ruby app.\n\n !     Push failed\n</code></pre>\n\n<p>I already tried re-building my Gemfile.lock.\nI deleted it and run <strong>bundle update</strong> + <strong>bundle install</strong></p>\n\n<p>This is my first time in Heroku, and I afraid that maybe I'm pushing some incompatibles gems.</p>\n\n<p><strong><em>About the settings:</em></strong>\n<strong>ruby</strong> 2.3.1 and <strong>rails</strong> 5.2.0</p>\n\n<p>I will appreciate your help!</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "rspec", "circleci", "bisect"], "answers": [{"comments": [{"owner": {"reputation": 286, "user_id": 2555263, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/eH7bC.jpg?s=128&g=1", "display_name": "seanriordan08", "link": "https://stackoverflow.com/users/2555263/seanriordan08"}, "edited": false, "score": 0, "creation_date": 1533071593, "post_id": 51617168, "comment_id": 90209736, "body": "hahaha, there is a small chance of doom, yes - thanks for the sanity check"}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "reply_to_user": {"reputation": 286, "user_id": 2555263, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/eH7bC.jpg?s=128&g=1", "display_name": "seanriordan08", "link": "https://stackoverflow.com/users/2555263/seanriordan08"}, "edited": false, "score": 0, "creation_date": 1557832547, "post_id": 51617168, "comment_id": 98889449, "body": "By <code>doomed</code> I meant you&#39;ll not find &quot;general&quot; answer on the internet. It&#39;s probably still fixable, but working with this particular codebase."}], "tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 5, "last_activity_date": 1533051407, "creation_date": 1533051407, "answer_id": 51617168, "question_id": 51598322, "link": "https://stackoverflow.com/questions/51598322/rspec-bisect-runs-indefinitely/51617168#51617168", "title": "rspec Bisect Runs Indefinitely", "body": "<p>I can have some pointers for you on how to continue: </p>\n\n<p>First of all - at any point you can <code>Ctr-C</code> the process and <code>rspec</code> will output the so-far-minimal command to reproduce (hopefully it'll be smaller set that the {all_specs}. </p>\n\n<p>You should try this before it times out. There's a chance that the number of possible combinations to check is so big it just times out (e.g. it would succeed if it had more time). Then use this minimal command to run <code>--bisect</code> again. </p>\n\n<p>You can also try <code>--bisect=verbose</code> to get a better understanding of what is going on behind the scenes.</p>\n\n<p>Your whole suite seems to be pretty fast (~2 minutes) so it's weird it times out. There's (infinitely small) chance that the failure is only when running the whole suite in that particular order. If that's the case - you're basically doomed.</p>\n"}, {"tags": [], "owner": {"reputation": 2403, "user_id": 3245849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3181dccc04d3035f17b244f6c1a70a?s=128&d=identicon&r=PG&f=1", "display_name": "hirowatari", "link": "https://stackoverflow.com/users/3245849/hirowatari"}, "is_accepted": false, "score": 3, "last_activity_date": 1556640394, "last_edit_date": 1556640394, "creation_date": 1545419354, "answer_id": 53889685, "question_id": 51598322, "link": "https://stackoverflow.com/questions/51598322/rspec-bisect-runs-indefinitely/53889685#53889685", "title": "rspec Bisect Runs Indefinitely", "body": "<p>For me, the issue was that <code>--bisect</code> seems to do nothing if you're using spring.  Even with verbose, it gives no useful output.  My test suite should have ran in 10 seconds.</p>\n"}, {"comments": [{"owner": {"reputation": 722, "user_id": 4176104, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o-4sBN7VIvg/AAAAAAAAAAI/AAAAAAAAAPI/6l5cohiBifY/photo.jpg?sz=128", "display_name": "Patrick", "link": "https://stackoverflow.com/users/4176104/patrick"}, "edited": false, "score": 1, "creation_date": 1603753800, "post_id": 59620621, "comment_id": 114131501, "body": "Check out version 3.9.3 as well <a href=\"https://github.com/rspec/rspec-core/blob/v3.9.3/Changelog.md\" rel=\"nofollow noreferrer\">github.com/rspec/rspec-core/blob/v3.9.3/Changelog.md</a> which had a related bug fixed."}], "tags": [], "owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "is_accepted": false, "score": 5, "last_activity_date": 1578356350, "creation_date": 1578356350, "answer_id": 59620621, "question_id": 51598322, "link": "https://stackoverflow.com/questions/51598322/rspec-bisect-runs-indefinitely/59620621#59620621", "title": "rspec Bisect Runs Indefinitely", "body": "<p>It was <a href=\"https://github.com/rspec/rspec-core/pull/2669\" rel=\"noreferrer\">a bug</a>, and it has been recently fixed and <a href=\"https://github.com/rspec/rspec-core/blob/master/Changelog.md#391--2019-12-28\" rel=\"noreferrer\">released with <code>rspec-core</code> 3.9.1</a>.</p>\n"}], "owner": {"reputation": 286, "user_id": 2555263, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/eH7bC.jpg?s=128&g=1", "display_name": "seanriordan08", "link": "https://stackoverflow.com/users/2555263/seanriordan08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1578356350, "creation_date": 1532967650, "last_edit_date": 1532987747, "question_id": 51598322, "link": "https://stackoverflow.com/questions/51598322/rspec-bisect-runs-indefinitely", "title": "rspec Bisect Runs Indefinitely", "body": "<p>I'm seeing some unexpected behavior regarding <code>rspec --bisect</code> when running on circleci. Often times the bisect runs indefinitely until it times out after 5 hours. Bisecting appears to be working initially, but once it reaches the expected end, it begins to slowly examine subsets in the opposite direction until it times out.</p>\n\n<p>My Env:<br>\n     <code>Ruby 2.4.2p198 (2017-09-14 revision 59899) [x86_64-darwin16]</code><br>\n     <code>RSpec 3.7</code><br>\n       <code>- rspec-core 3.7.1</code><br>\n       <code>- rspec-expectations 3.7.0</code><br>\n       <code>- rspec-mocks 3.7.0</code><br>\n       <code>- rspec-rails 3.7.2</code><br>\n       <code>- rspec-support 3.7.1</code></p>\n\n<p>The command:<br>\n<code>DISABLE_SPRING=true RAILS_ENV=test bundle exec rspec #{all_specs} --order rand:21237 --bisect</code></p>\n\n<pre><code>Running suite to find failures... (1 minute 5.94 seconds)\nStarting bisect with 1 failing example and 424 non-failing examples.\nChecking that failure(s) are order-dependent... failure appears to be order-dependent\n\nRound 1: bisecting over non-failing examples 1-424 .. multiple culprits detected - splitting candidates (1 minute 26.35 seconds)\nRound 2: bisecting over non-failing examples 1-212 .. multiple culprits detected - splitting candidates (1 minute 29.08 seconds)\nRound 3: bisecting over non-failing examples 1-106 .. multiple culprits detected - splitting candidates (1 minute 26.57 seconds)\nRound 4: bisecting over non-failing examples 1-53 .. multiple culprits detected - splitting candidates (1 minute 23.85 seconds)\nRound 5: bisecting over non-failing examples 1-27 .. multiple culprits detected - splitting candidates (1 minute 29.03 seconds)\nRound 6: bisecting over non-failing examples 1-14 .. multiple culprits detected - splitting candidates (1 minute 21.54 seconds)\nRound 7: bisecting over non-failing examples 1-7 .. multiple culprits detected - splitting candidates (1 minute 28 seconds)\nRound 8: bisecting over non-failing examples 1-4 .. multiple culprits detected - splitting candidates (1 minute 30.43 seconds)\nRound 9: bisecting over non-failing examples 1-2 .. multiple culprits detected - splitting candidates (1 minute 28.99 seconds)\nRound 10: bisecting over non-failing examples 3-4 .. multiple culprits detected - splitting candidates (1 minute 26.5 seconds)\nRound 11: bisecting over non-failing examples 5-7 .. multiple culprits detected - splitting candidates (1 minute 54.99 seconds)\nRound 12: bisecting over non-failing examples 5-6 .. multiple culprits detected - splitting candidates (1 minute 42.05 seconds)\nRound 13: bisecting over non-failing examples 8-14 .. multiple culprits detected - splitting candidates (1 minute 46.97 seconds)\nRound 14: bisecting over non-failing examples 8-11 .. multiple culprits detected - splitting candidates (1 minute 38.02 seconds)\nRound 15: bisecting over non-failing examples 8-9 .. multiple culprits detected - splitting candidates (1 minute 35.84 seconds)\nRound 16: bisecting over non-failing examples 10-11 .. multiple culprits detected - splitting candidates (1 minute 23.13 seconds)\nRound 17: bisecting over non-failing examples 12-14 .. multiple culprits detected - splitting candidates (1 minute 23.11 seconds)\nRound 18: bisecting over non-failing examples 12-13 .. multiple culprits detected - splitting candidates (1 minute 36.75 seconds)\nRound 19: bisecting over non-failing examples 15-27 .. multiple culprits detected - splitting candidates (1 minute 29.76 seconds)\nRound 20: bisecting over non-failing examples 15-21 .. multiple culprits detected - splitting candidates (1 minute 39.97 seconds)\nRound 21: bisecting over non-failing examples 15-18 .. multiple culprits detected - splitting candidates (1 minute 35.21 seconds)\nRound 23: bisecting over non-failing examples 17-18 .. multiple culprits detected - splitting candidates (1 minute 29.7 seconds)\nRound 24: bisecting over non-failing examples 19-21 .. multiple culprits detected - splitting candidates (1 minute 29.41 seconds)\nRound 25: bisecting over non-failing examples 19-20 .. multiple culprits detected - splitting candidates (1 minute 31.41 seconds)\nRound 26: bisecting over non-failing examples 22-27 .. multiple culprits detected - splitting candidates (1 minute 25.67 seconds)\n...\nRound 183: bisecting over non-failing examples 181-186 .. multiple culprits detected - splitting candidates (1 minute 58.92 seconds)\nRound 184: bisecting over non-failing examples 181-183 .. multiple culprits detected - splitting candidates (1 minute 44.64 seconds)\nBuild timed out after 5h0m0s\n</code></pre>\n\n<p>Any idea what causes bisect to behave this way?\nThanks!</p>\n"}, {"tags": ["html", "ruby", "angular"], "comments": [{"owner": {"reputation": 1475, "user_id": 1743874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/vQYev.png?s=128&g=1", "display_name": "Piccolo", "link": "https://stackoverflow.com/users/1743874/piccolo"}, "edited": false, "score": 0, "creation_date": 1532968291, "post_id": 51597835, "comment_id": 90162884, "body": "It looks like your Angular code is trying to connect to <code>&#47;api&#47;v1&#47;companies&#47;:companyID</code> but your Sinatra code is listening for <code>&#47;companies&#47;:companyID</code>. Are you doing some sort of rewriting?"}, {"owner": {"reputation": 9, "user_id": 6706010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b420b0758ee87ca7fd0abc3b329bd9a6?s=128&d=identicon&r=PG&f=1", "display_name": "lassejoe", "link": "https://stackoverflow.com/users/6706010/lassejoe"}, "reply_to_user": {"reputation": 1475, "user_id": 1743874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/vQYev.png?s=128&g=1", "display_name": "Piccolo", "link": "https://stackoverflow.com/users/1743874/piccolo"}, "edited": false, "score": 0, "creation_date": 1532971119, "post_id": 51597835, "comment_id": 90164347, "body": "To answer your question @Piccolo I use a namespace found the solution my self.It was a server problem. needed to do configuration"}], "owner": {"reputation": 9, "user_id": 6706010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b420b0758ee87ca7fd0abc3b329bd9a6?s=128&d=identicon&r=PG&f=1", "display_name": "lassejoe", "link": "https://stackoverflow.com/users/6706010/lassejoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532965961, "creation_date": 1532965961, "question_id": 51597835, "link": "https://stackoverflow.com/questions/51597835/sinatra-angular-http-delete-404", "title": "Sinatra &amp; Angular $HTTP.delete 404", "body": "<p>Trying to delete from my API which is hosted on Heroku.\nIn Ruby file CROSS-ORIGIN is enable and I can get information from my API.\nAlthough I have a problem when I want to make a delete request to the server.\nI get an error 404 (Page not found), but when typing the url into the browser myself I can easily get this page.\ncURL call works fine without any problems too.</p>\n\n<p>script.js</p>\n\n<pre><code>$scope.DeleteData = function (index) {\n$scope.id = $scope.companies[index].companyID;\nvar deleteUrl = 'https://*****.herokuapp.com/api/v1/companies/' + $scope.id;\n$http.delete(deleteUrl,'DELETE').then(function(response){\n  console.log(response);\n},function(errorResponse){\n  console.log(errorResponse);\n });\n};\n</code></pre>\n\n<p>Ruby.rb</p>\n\n<pre><code>delete '/companies/:companyID' do\ntempCompanyID = params['companyID']\ncompany = Company.where(companyID: tempCompanyID).first\ncompany.destroy\nend\n</code></pre>\n\n<p>Html:</p>\n\n<pre><code>&lt;div ng-app=\"myApp\" ng-controller=\"companyCtrl\"&gt;\n      &lt;table class=\"table table-striped table-hover\"&gt;\n        &lt;thead class=\"thead-dark\"&gt;\n          &lt;th&gt;Company ID&lt;/th&gt;\n          &lt;th&gt;Company Name&lt;/th&gt;\n          &lt;th&gt;Address&lt;/th&gt;\n          &lt;th&gt;City&lt;/th&gt;\n          &lt;th&gt;Country&lt;/th&gt;\n          &lt;th&gt;Owners&lt;/th&gt;\n          &lt;th&gt;&lt;/th&gt;\n        &lt;/thead&gt;\n        &lt;tr ng-repeat=\"company in companies\"&gt;\n          &lt;td&gt;{{company.companyID}}&lt;/td&gt;\n          &lt;td&gt;{{company.companyName}}&lt;/td&gt;\n          &lt;td&gt;{{company.address}}&lt;/td&gt;\n          &lt;td&gt;{{company.city}}&lt;/td&gt;\n          &lt;td&gt;{{company.country}}&lt;/td&gt;\n          &lt;td&gt;{{company.owners}}&lt;/td&gt;\n          &lt;td&gt;&lt;button class=\"btn\" name=\"_method\" ng-click=\"DeleteData($index)\"&gt;Delete&lt;/button&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;/table&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>Chrome response:\n<a href=\"https://i.stack.imgur.com/f4YXO.png\" rel=\"nofollow noreferrer\">The response</a></p>\n"}, {"tags": ["ruby", "rspec", "console-application", "aruba"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1532965760, "post_id": 51597726, "comment_id": 90161462, "body": "Where run method is defined?"}, {"owner": {"reputation": 632, "user_id": 3751611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87c2bc16173615bc3d50cd7f47301057?s=128&d=identicon&r=PG&f=1", "display_name": "Plamen Tetevensky", "link": "https://stackoverflow.com/users/3751611/plamen-tetevensky"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1532966205, "post_id": 51597726, "comment_id": 90161743, "body": "According documentation (<a href=\"https://www.rubydoc.info/github/cucumber/aruba/Aruba/Api/Commands#run_command-instance_method\" rel=\"nofollow noreferrer\">rubydoc.info/github/cucumber/aruba/Aruba/Api/&hellip;</a>) it should be run_command, but it fails with Unknown command. Looks like <code>run</code> is the correct for this version of Aruba::Api. Documentation is w......."}, {"owner": {"reputation": 632, "user_id": 3751611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87c2bc16173615bc3d50cd7f47301057?s=128&d=identicon&r=PG&f=1", "display_name": "Plamen Tetevensky", "link": "https://stackoverflow.com/users/3751611/plamen-tetevensky"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1532966357, "post_id": 51597726, "comment_id": 90161841, "body": "&quot;Where run method is defined?&quot; - God knows..... found nothing on the net. :("}], "answers": [{"comments": [{"owner": {"reputation": 632, "user_id": 3751611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87c2bc16173615bc3d50cd7f47301057?s=128&d=identicon&r=PG&f=1", "display_name": "Plamen Tetevensky", "link": "https://stackoverflow.com/users/3751611/plamen-tetevensky"}, "edited": false, "score": 0, "creation_date": 1533480944, "post_id": 51631199, "comment_id": 90352178, "body": "Failure/Error: stop_all_commands            NameError:        undefined local variable or method `stop_all_commands&#39; for #&lt;RSpec::ExampleGroups::...."}], "tags": [], "owner": {"reputation": 315, "user_id": 6418561, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/b6VEr.jpg?s=128&g=1", "display_name": "shinglesmingles", "link": "https://stackoverflow.com/users/6418561/shinglesmingles"}, "is_accepted": false, "score": 0, "last_activity_date": 1533119787, "creation_date": 1533119787, "answer_id": 51631199, "question_id": 51597726, "link": "https://stackoverflow.com/questions/51597726/tests-using-aruba-with-rspec-failing-with-run-is-not-available-from-within-a/51631199#51631199", "title": "Tests, using Aruba with Rspec, failing with `run` is not available from within an example (e.g. an `it` block)", "body": "<p>As the error implies, you cannot call <code>run</code> within the <code>it</code> block. Aruba's documentation can get a bit confusing here because of the various branches, but the <code>run</code> method is still available in the <code>still</code> branch, with documentation found <a href=\"https://app.cucumber.pro/projects/aruba/documents/branch/still/features/api/command/run.feature\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Following the documentation, instead of defining <code>command</code>  within the <code>it</code> block, we can instead define it outside the block using <code>let</code>:</p>\n\n<pre><code>RSpec.describe 'Test Suite', type: :aruba do\n  context \"aruba test\" do\n    let(:command) { run(\"echo 'hello world'\") }\n    it \"has aruba set up\" do\n      stop_all_commands\n      expect(command.output).to eq(\"hello world\\n\")\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 632, "user_id": 3751611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87c2bc16173615bc3d50cd7f47301057?s=128&d=identicon&r=PG&f=1", "display_name": "Plamen Tetevensky", "link": "https://stackoverflow.com/users/3751611/plamen-tetevensky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533119787, "creation_date": 1532965592, "question_id": 51597726, "link": "https://stackoverflow.com/questions/51597726/tests-using-aruba-with-rspec-failing-with-run-is-not-available-from-within-a", "title": "Tests, using Aruba with Rspec, failing with `run` is not available from within an example (e.g. an `it` block)", "body": "<p>I need to test a console application and check printed output, using rspec script. Example:</p>\n\n<pre><code>RSpec.describe 'Test Suite', type: :aruba do\n\n  it \"has aruba set up\" do\n    command = run(\"echo 'hello world'\")\n    stop_all_commands\n    expect(command.output).to eq(\"hello world\\n\")\n  end\n</code></pre>\n\n<p>It fails with:</p>\n\n<pre><code>Failure/Error: command = run(\"echo 'hello world'\")\n   `run` is not available from within an example (e.g. an `it` block) or from constructs that run in the scope of an example (e.g. `before`, `let`, etc). It is only available on an example group (e.g. a `describe` or `context` block).\n</code></pre>\n\n<p>Aruba version 0.14.6, Rspec 3.7.0. Will appreciate any help. Thanks.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19325, "user_id": 67505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/094c0ec476b95ed7619d6a4cb918da78?s=128&d=identicon&r=PG", "display_name": "Chen Kinnrot", "link": "https://stackoverflow.com/users/67505/chen-kinnrot"}, "edited": false, "score": 0, "creation_date": 1532963099, "post_id": 51596852, "comment_id": 90159875, "body": "Looks like service doesnt have a column named location ids , its location id"}, {"owner": {"reputation": 26, "user_id": 9910742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/063ab111f026dfae039a3c4de516c132?s=128&d=identicon&r=PG&f=1", "display_name": "nicks6853", "link": "https://stackoverflow.com/users/9910742/nicks6853"}, "reply_to_user": {"reputation": 19325, "user_id": 67505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/094c0ec476b95ed7619d6a4cb918da78?s=128&d=identicon&r=PG", "display_name": "Chen Kinnrot", "link": "https://stackoverflow.com/users/67505/chen-kinnrot"}, "edited": false, "score": 0, "creation_date": 1532963255, "post_id": 51596852, "comment_id": 90159980, "body": "that is actually a type sorry about that, I fixed it"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1532963396, "post_id": 51596852, "comment_id": 90160054, "body": "You basically can only do a SQL <code>LIKE</code> query to get all rows that have the id somewhere in the <code>location_id</code> string. But I recommend not to follow this path for two reasons: 1) It will be very slow, because <code>LIKE</code> queries cannot use indexes. 2) You will have to deal with cases were searching for the ID <code>%123%</code> finds records with <code>location_id</code> like this: <code>1234, 4567</code>. My advice is: Do not fight Rails conventions, use a common <code>has_and_belongs_to</code> relation."}, {"owner": {"reputation": 26, "user_id": 9910742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/063ab111f026dfae039a3c4de516c132?s=128&d=identicon&r=PG&f=1", "display_name": "nicks6853", "link": "https://stackoverflow.com/users/9910742/nicks6853"}, "edited": false, "score": 0, "creation_date": 1532963505, "post_id": 51596852, "comment_id": 90160116, "body": "Does that mean having link_tables for my relationships would be simpler and more efficient even if it means having more tables?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1532963647, "post_id": 51596852, "comment_id": 90160220, "body": "Yes, that would be simpler to implement (because it follos Rails conventions) and would have a much better performance!"}, {"owner": {"reputation": 26, "user_id": 9910742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/063ab111f026dfae039a3c4de516c132?s=128&d=identicon&r=PG&f=1", "display_name": "nicks6853", "link": "https://stackoverflow.com/users/9910742/nicks6853"}, "edited": false, "score": 0, "creation_date": 1532963765, "post_id": 51596852, "comment_id": 90160299, "body": "Okay, I see. I was trying to avoid having a couple more tables but I think it just got more complicated in the end. Thanks for the help, I&#39;ll get to working on that."}, {"owner": {"reputation": 32469, "user_id": 1529673, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/O6MQS.jpg?s=128&g=1", "display_name": "Strawberry", "link": "https://stackoverflow.com/users/1529673/strawberry"}, "edited": false, "score": 0, "creation_date": 1532968298, "post_id": 51596852, "comment_id": 90162887, "body": "<code>comma-separated list of ids</code> - my heart sinks each time"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1532974664, "post_id": 51596852, "comment_id": 90166162, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35893755/rails-where-clause-when-something-is-stored-as-array\">Rails where clause when something is stored as array</a>"}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 8937642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/677745c2ebda486da271d4d33ed6fce2?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Marti", "link": "https://stackoverflow.com/users/8937642/alejandro-marti"}, "is_accepted": false, "score": 0, "last_activity_date": 1532966517, "last_edit_date": 1532966517, "creation_date": 1532965683, "answer_id": 51597755, "question_id": 51596852, "link": "https://stackoverflow.com/questions/51596852/selecting-records-where-the-id-is-in-a-list-of-id-stored-as-an-attribute/51597755#51597755", "title": "Selecting Records where the ID is in a list of ID stored as an attribute", "body": "<p>I agree with @spickermann. I strongly encourage you to use has_and_belongs_to_many or has_many :through relationships. Anyway, I believe this should work (not recommended).</p>\n\n<pre><code>Admin::Service.all.select{ |service| \n    service.location_ids.split(',').map(&amp;:to_i).include?(params[:location_id])\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 9910742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/063ab111f026dfae039a3c4de516c132?s=128&d=identicon&r=PG&f=1", "display_name": "nicks6853", "link": "https://stackoverflow.com/users/9910742/nicks6853"}, "is_accepted": true, "score": 0, "last_activity_date": 1533037790, "creation_date": 1533037790, "answer_id": 51612746, "question_id": 51596852, "link": "https://stackoverflow.com/questions/51596852/selecting-records-where-the-id-is-in-a-list-of-id-stored-as-an-attribute/51612746#51612746", "title": "Selecting Records where the ID is in a list of ID stored as an attribute", "body": "<p>I ended up adding link tables in my database. The work it took to add them is far less than the work it would have caused me to do later in my project.</p>\n\n<p><strong>Example of what I used</strong></p>\n\n<p>For my services, I created a table called location_services with attributes <code>ID</code>, <code>location_id</code>, <code>service_id</code>.\nIn my model for Service in Rails, I did</p>\n\n<p><strong>In my Service model</strong></p>\n\n<pre><code>class Service &lt; ApplicationRecord\n    has_many location_services, dependent: :destroy\n    has_many :locations, through: :location_services\n    accepts_nested_attributes_for :location_services\nend\n</code></pre>\n\n<p><strong>In my LocationService model</strong></p>\n\n<pre><code>class LocationService &lt; ApplicationRecord\n     belongs_to :location, optional: true\n     belongs_to :service, optional: true\nend\n</code></pre>\n\n<p><strong>And in my Location model</strong></p>\n\n<pre><code>class Location &lt; ApplicationRecord\n    has_many :location_services, dependent: :destroy\n    has_many :services, through: :location_services\nend\n</code></pre>\n\n<p>I then repeated these steps for each of my tables that had a many-to-many relationship to my <code>locations</code> table</p>\n"}], "owner": {"reputation": 26, "user_id": 9910742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/063ab111f026dfae039a3c4de516c132?s=128&d=identicon&r=PG&f=1", "display_name": "nicks6853", "link": "https://stackoverflow.com/users/9910742/nicks6853"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 51612746, "answer_count": 2, "score": 0, "last_activity_date": 1533037790, "creation_date": 1532962704, "last_edit_date": 1592644375, "question_id": 51596852, "link": "https://stackoverflow.com/questions/51596852/selecting-records-where-the-id-is-in-a-list-of-id-stored-as-an-attribute", "title": "Selecting Records where the ID is in a list of ID stored as an attribute", "body": "<p>I have these to tables in my database, <code>Locations</code> and <code>Services</code></p>\n<p>Each <code>Location</code> record has an attribute called <code>location_ids</code> which is a comma-separated list of ids*.</p>\n<p>*I represented my many-to-many relationship like this because I have many tables similar to <code>Services</code> and did not want to have a ton of link tables</p>\n<p><strong>my tables</strong></p>\n<pre><code>CREATE TABLE services (\n  id bigint(20) UNSIGNED NOT NULL,\n  location_ids varchar(255) DEFAULT NULL,\n  image varchar(255) DEFAULT NULL,\n  created_at timestamp NULL DEFAULT NULL,\n  created_by bigint(20) UNSIGNED NOT NULL DEFAULT '0',\n  updated_at timestamp NULL DEFAULT NULL,\n  updated_by bigint(20) UNSIGNED DEFAULT NULL\n);\n\nCREATE TABLE locations (\n  id bigint(20) UNSIGNED NOT NULL,\n  street1 varchar(255) DEFAULT NULL,\n  street2 varchar(255) DEFAULT NULL,\n  city varchar(255) DEFAULT NULL,\n  province varchar(255) DEFAULT NULL,\n  country varchar(255) DEFAULT NULL,\n  postal_code varchar(255) DEFAULT NULL,\n  phone1 varchar(45) DEFAULT NULL,\n  phone2 varchar(45) DEFAULT NULL,\n  fax varchar(255) DEFAULT NULL,\n  email varchar(255) DEFAULT NULL,\n  twitter_url varchar(255) DEFAULT NULL,\n  facebook_url varchar(255) DEFAULT NULL,\n  created_at timestamp NULL DEFAULT NULL,\n  created_by bigint(20) UNSIGNED NOT NULL DEFAULT '0',\n  updated_at timestamp NULL DEFAULT NULL,\n  updated_by bigint(20) UNSIGNED DEFAULT NULL\n);\n</code></pre>\n<p>I am trying to retrieve all the <code>Services</code> where the ID of a specific location (that I get from my params) is in that <code>location_ids</code> attribute.</p>\n<p><strong>This is the query that I have (doesn't work) it might make it clearer what I was trying to retrieve</strong></p>\n<p><code>Admin::Service.where(&quot;#{params[:location_id]} in (services.location_ids)&quot;)</code></p>\n<p>*params[:location_id] would be the id of the current location</p>\n<p>Any help would be greatly appreciated!</p>\n<p><strong>Update</strong></p>\n<p>I ended adding 5 link tables in my database, makes it easier and more accessible through Rails.\nThanks everyone who helped</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "carrierwave"], "comments": [{"owner": {"reputation": 19325, "user_id": 67505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/094c0ec476b95ed7619d6a4cb918da78?s=128&d=identicon&r=PG", "display_name": "Chen Kinnrot", "link": "https://stackoverflow.com/users/67505/chen-kinnrot"}, "edited": false, "score": 0, "creation_date": 1532962949, "post_id": 51596413, "comment_id": 90159779, "body": "check this out -<a href=\"https://github.com/dwilkie/carrierwave_direct\" rel=\"nofollow noreferrer\">github.com/dwilkie/carrierwave_direct</a>"}, {"owner": {"reputation": 405, "user_id": 5639287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2da4e9be5bbf048854f4e1621bd193ee?s=128&d=identicon&r=PG&f=1", "display_name": "code monkey", "link": "https://stackoverflow.com/users/5639287/code-monkey"}, "reply_to_user": {"reputation": 19325, "user_id": 67505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/094c0ec476b95ed7619d6a4cb918da78?s=128&d=identicon&r=PG", "display_name": "Chen Kinnrot", "link": "https://stackoverflow.com/users/67505/chen-kinnrot"}, "edited": false, "score": 0, "creation_date": 1532968890, "post_id": 51596413, "comment_id": 90163192, "body": "thanks @ChenKinnrot , but not solving my current problem"}], "answers": [{"tags": [], "owner": {"reputation": 405, "user_id": 5639287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2da4e9be5bbf048854f4e1621bd193ee?s=128&d=identicon&r=PG&f=1", "display_name": "code monkey", "link": "https://stackoverflow.com/users/5639287/code-monkey"}, "is_accepted": true, "score": 0, "last_activity_date": 1532970772, "creation_date": 1532970772, "answer_id": 51599136, "question_id": 51596413, "link": "https://stackoverflow.com/questions/51596413/ror-carrierwave-s3-storing-image-urls-via-api/51599136#51599136", "title": "RoR - Carrierwave + S3, storing image urls via API", "body": "<p>Found what I was looking for:  <a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki/How-to:-Upload-remote-image-urls-to-your-seedfile\" rel=\"nofollow noreferrer\">CarrierWave docs for \"Upload remote image urls to your seedfile\"</a></p>\n\n<hr>\n\n<p>\"...you can easily upload remote images by using <code>remote_[your_image_attribute_name]_url</code>\" </p>\n\n<p>So, in my case:</p>\n\n<pre><code>ElementImage.create!(remote_image_url: image_params[:image_url])\n</code></pre>\n\n<p>CarrierWave should throw an error if the url of the location is invalid.</p>\n"}], "owner": {"reputation": 405, "user_id": 5639287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2da4e9be5bbf048854f4e1621bd193ee?s=128&d=identicon&r=PG&f=1", "display_name": "code monkey", "link": "https://stackoverflow.com/users/5639287/code-monkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 51599136, "answer_count": 1, "score": 1, "last_activity_date": 1532970772, "creation_date": 1532961328, "last_edit_date": 1532969112, "question_id": 51596413, "link": "https://stackoverflow.com/questions/51596413/ror-carrierwave-s3-storing-image-urls-via-api", "title": "RoR - Carrierwave + S3, storing image urls via API", "body": "<p>I'm working on a system for <strong>uploading images</strong> to <strong>S3</strong> with <strong>Carrierwave</strong>. \nThere are two possible ways to upload image:</p>\n\n<ul>\n<li>Upload from file to S3</li>\n<li><strong>Manual upload via API</strong></li>\n</ul>\n\n<p>Upload from file is working great. File is formated in base64 and sent to server which is procesing and uploading with carrierwave to S3.</p>\n\n<p><strong>My questions starts here</strong>, with manual upload. Frontend is uploading images to S3 and sending image urls to server.\nHow do I store that urls with carrierwave? Like a simple string to image column or there is something more?</p>\n\n<p>So, how and where do I save S3 image url ? </p>\n\n<hr>\n\n<p>I tried something like this:</p>\n\n<pre><code>ElementImage.create(:image =&gt; image_params[:image_url])\n</code></pre>\n\n<p>Also with <code>image.url</code>, <code>image.base_path</code> </p>\n"}, {"tags": ["ruby", "google-api", "google-admin-sdk", "google-api-ruby-client"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10155339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9d4fbb02d94c5a9a1311d85c18ad7f?s=128&d=identicon&r=PG&f=1", "display_name": "J. Mag", "link": "https://stackoverflow.com/users/10155339/j-mag"}, "is_accepted": false, "score": 0, "last_activity_date": 1533291477, "creation_date": 1533291477, "answer_id": 51670471, "question_id": 51596400, "link": "https://stackoverflow.com/questions/51596400/how-can-i-make-transfers-using-google-data-transfer-api-in-ruby/51670471#51670471", "title": "How can I make transfers using Google Data Transfer API in Ruby", "body": "<p>I have found the issue. I had to refresh the token before calling insert_transfer.</p>\n\n<p>So the working code is as follows:</p>\n\n<pre><code>idOldUser = \"116170568974079979335\"\nidNewUser = \"105318746921076261308\"\n\natp = Google::Apis::AdminDatatransferV1::ApplicationTransferParam.new(\n    key: \"PRIVACY_LEVEL\",\n    value: [\"PRIVATE\", \"SHARED\"])\n\nappid =  435070579839 \nadt = Google::Apis::AdminDatatransferV1::ApplicationDataTransfer.new(\n    application_id: appid,\n    application_transfer_params: [atp])\n\ndt = Google::Apis::AdminDatatransferV1::DataTransfer.new(\n    kind: \"admin#datatransfer#DataTransfer\",\n    old_owner_user_id: idOldUser,\n    new_owner_user_id: idNewUser,\n    application_data_transfers: [adt])\n\nservice = Google::Apis::AdminDatatransferV1::DataTransferService.new\nservice.client_options.application_name = APPLICATION_NAME\nservice.authorization = authorize\nservice.insert_transfer(dt)\n</code></pre>\n\n<p>On the other hand, the order of the fields on the JSON we send matters. So if we change their order, we can receive a HTTP 200 response, while the data transfer will never be performed. That's why the JSON I was sending from API Explorer was not working.  </p>\n"}], "owner": {"reputation": 1, "user_id": 10155339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9d4fbb02d94c5a9a1311d85c18ad7f?s=128&d=identicon&r=PG&f=1", "display_name": "J. Mag", "link": "https://stackoverflow.com/users/10155339/j-mag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533291477, "creation_date": 1532961263, "last_edit_date": 1532962101, "question_id": 51596400, "link": "https://stackoverflow.com/questions/51596400/how-can-i-make-transfers-using-google-data-transfer-api-in-ruby", "title": "How can I make transfers using Google Data Transfer API in Ruby", "body": "<p>I'm writing a piece of code in Ruby for making data transfers using Google Data Transfer API. I specifically mean <a href=\"https://developers.google.com/admin-sdk/data-transfer/v1/reference/transfers/insert\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>The code I have is as follows:</p>\n\n<pre><code>idOldUser = \"116170568974079979335\"\nidNewUser = \"105318746921076261308\"\n\natp = Google::Apis::AdminDatatransferV1::ApplicationTransferParam.new(\n    key: \"PRIVACY_LEVEL\",\n    value: [\"PRIVATE\", \"SHARED\"])\n\nappid =  435070579839 \nadt = Google::Apis::AdminDatatransferV1::ApplicationDataTransfer.new(\n    application_id: appid,\n    application_transfer_params: [atp])\n\ndt = Google::Apis::AdminDatatransferV1::DataTransfer.new(\n    kind: \"admin#datatransfer#DataTransfer\",\n    old_owner_user_id: idOldUser,\n    new_owner_user_id: idNewUser,\n    application_data_transfers: [adt])\n\nservice = Google::Apis::AdminDatatransferV1::DataTransferService.new\nservice.insert_transfer(dt)\n</code></pre>\n\n<p>When I execute it, the following error appears:</p>\n\n<pre><code>/var/lib/gems/2.4.0/gems/google-api-client-0.23.4/lib/google/apis/core/http_command.rb:212:in `check_status': Unauthorized (Google::Apis::AuthorizationError)\nfrom /var/lib/gems/2.4.0/gems/google-api-client-0.23.4/lib/google/apis/core/api_command.rb:118:in `check_status'\nfrom /var/lib/gems/2.4.0/gems/google-api-client-0.23.4/lib/google/apis/core/http_command.rb:183:in `process_response'\n</code></pre>\n\n<p>I've also tried to execute it from API Explorer. The following JSON returns a  HTTP 200. Some minutes after that, I see in the new user's inbox a mail saying that the transfer is completed. Then I see in Calendar app an entry called \"Transfered from user\". However, it appears empty.</p>\n\n<pre><code>{\n  \"oldOwnerUserId\": \"116170568974079979335\",\n  \"newOwnerUserId\": \"105318746921076261308\",\n  \"kind\": \"admin#datatransfer#DataTransfer\",\n  \"applicationDataTransfers\": [\n    {\n      \"applicationId\": \"435070579839\",\n      \"applicationTransferParams\": [\n        {\n          \"key\": \"PRIVACY_LEVEL\",\n          \"value\": [\n            \"PRIVATE\",\n            \"SHARED\"\n          ]\n        }\n      ]\n    }\n  ]\n}\n</code></pre>\n\n<p>I have used this scope:    <a href=\"https://www.googleapis.com/auth/admin.datatransfer\" rel=\"nofollow noreferrer\">https://www.googleapis.com/auth/admin.datatransfer</a></p>\n\n<p>And curiously, the other methods of that library, such as list_applications, work for me. The only problem is with insert_transfer .</p>\n\n<p>Can you help me to make this data transfer working? If it's possible with Ruby, great. </p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "is_accepted": true, "score": 1, "last_activity_date": 1532961031, "creation_date": 1532961031, "answer_id": 51596320, "question_id": 51596251, "link": "https://stackoverflow.com/questions/51596251/grabbing-file-from-rails-public-directory-via-url/51596320#51596320", "title": "Grabbing file from Rails public directory via URL", "body": "<p>Just figured it out.  Do not put in <code>public</code> in the url:</p>\n\n<pre><code>localhost:3000/test.txt\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 51596320, "answer_count": 1, "score": 0, "last_activity_date": 1532961031, "creation_date": 1532960813, "question_id": 51596251, "link": "https://stackoverflow.com/questions/51596251/grabbing-file-from-rails-public-directory-via-url", "title": "Grabbing file from Rails public directory via URL", "body": "<p>I have read that everything stored within the <code>public</code> directory is literally publically accessible to everyone on the web.  I am having trouble trying to reproduce this.</p>\n\n<p><strong>Example</strong></p>\n\n<p>I store a file: <code>test.txt</code> inside the <code>public</code> directory.  I run <code>rails s</code> to boot up my server in the development environment, and I would think I can access that file by typing in the following URL:</p>\n\n<pre><code>localhost:3000/public/test.txt\n</code></pre>\n\n<p>That does not work though.  Any suggestions about what I am missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1532951690, "post_id": 51593222, "comment_id": 90152317, "body": "What does the <code>log</code> say?"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1532951762, "post_id": 51593222, "comment_id": 90152375, "body": "Try <code>before_action :authorize</code> or <code>beofre_filter :authenticate_admin!</code> I can&#39;t remember exactly, but in some version of rails they replaced <code>before_filter</code> with <code>before_action</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1532952128, "post_id": 51593222, "comment_id": 90152600, "body": "What is your question?"}, {"owner": {"reputation": 108, "user_id": 5235107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/506d9664c573c641b685493eb20b9b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5235107/swapnil"}, "reply_to_user": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1532953141, "post_id": 51593222, "comment_id": 90153237, "body": "@jedi before_action is new name for before_filter"}, {"owner": {"reputation": 108, "user_id": 5235107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/506d9664c573c641b685493eb20b9b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5235107/swapnil"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1532953264, "post_id": 51593222, "comment_id": 90153328, "body": "@TomLord updated log"}, {"owner": {"reputation": 108, "user_id": 5235107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/506d9664c573c641b685493eb20b9b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5235107/swapnil"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1532953359, "post_id": 51593222, "comment_id": 90153392, "body": "@sawa  Why not working? Is there anything wrong?"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1532953530, "post_id": 51593222, "comment_id": 90153513, "body": "Have you tried what I said?"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1532953579, "post_id": 51593222, "comment_id": 90153555, "body": "Do you have your own custom Devise controllers or you use the default ones?"}, {"owner": {"reputation": 108, "user_id": 5235107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/506d9664c573c641b685493eb20b9b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5235107/swapnil"}, "edited": false, "score": 0, "creation_date": 1532953822, "post_id": 51593222, "comment_id": 90153700, "body": "I have defined SessionsController and for now each method calls super."}, {"owner": {"reputation": 108, "user_id": 5235107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/506d9664c573c641b685493eb20b9b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5235107/swapnil"}, "reply_to_user": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1532954831, "post_id": 51593222, "comment_id": 90154294, "body": "@jedi before_filter --&gt;  before_action not worked."}], "answers": [{"comments": [{"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1532958536, "post_id": 51595135, "comment_id": 90156753, "body": "I agree. Also check your admin model permissions on the server as it seems he does not have proper permissions there."}, {"owner": {"reputation": 108, "user_id": 5235107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/506d9664c573c641b685493eb20b9b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5235107/swapnil"}, "edited": false, "score": 1, "creation_date": 1532959283, "post_id": 51595135, "comment_id": 90157251, "body": "It was a problem with sub-domain routing. I still have no idea from where it is getting called. It is meta programming, so difficult to find. Not a problem with permissions."}], "tags": [], "owner": {"reputation": 642, "user_id": 5709111, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vvrkX9_84h0/AAAAAAAAAAI/AAAAAAAAAt0/BTefFemQFvs/photo.jpg?sz=128", "display_name": "nikamanish", "link": "https://stackoverflow.com/users/5709111/nikamanish"}, "is_accepted": true, "score": 3, "last_activity_date": 1532964252, "last_edit_date": 1532964252, "creation_date": 1532957462, "answer_id": 51595135, "question_id": 51593222, "link": "https://stackoverflow.com/questions/51593222/devise-getting-401-unauthorized-right-after-sign-in/51595135#51595135", "title": "Devise getting 401 unauthorized right after sign in", "body": "<p>I think the application is fine. It has to do something with your server configurations. Something might be missing. </p>\n\n<p>As you said it is working locally, there might be something that you changed in your configurations for the server, that might be causing the problem. Check your config files, <code>application.rb</code> or any other subdomain files that you might be using.</p>\n"}], "owner": {"reputation": 108, "user_id": 5235107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/506d9664c573c641b685493eb20b9b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5235107/swapnil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 51595135, "answer_count": 1, "score": 0, "last_activity_date": 1532965277, "creation_date": 1532950961, "last_edit_date": 1532965277, "question_id": 51593222, "link": "https://stackoverflow.com/questions/51593222/devise-getting-401-unauthorized-right-after-sign-in", "title": "Devise getting 401 unauthorized right after sign in", "body": "<pre><code>Rails 4.2, Ruby 2.2.0, Devise 3.5.7\n</code></pre>\n\n<p>I have an <code>Admin</code> model. In ideal case after sign in, it should be redirected to homepage. But in my case, it is signing in successfully, but while redirecting, somehow authentication fails, causing it to redirect to the sign in page again.</p>\n\n<p>The controller which gets called is:</p>\n\n<pre><code>Class Admin::DashboardsController &lt; ApplicationController\n  before_action :authenticate_admin!\n  before_filter :authorize\n\n  def show\n\n  end\n\nend\n</code></pre>\n\n<p>In first view, I thought it is a problem with <code>authorize</code> method. But code never reaches it.\n<code>authenticate_admin!</code> is a devise method. And I don't know if there is a point in debugging.</p>\n\n<p>Surprisingly it works on local, but results in <code>401 Unauthorized</code> after deploying.</p>\n\n<p>Logs </p>\n\n<p><a href=\"https://i.stack.imgur.com/HPhEZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HPhEZ.png\" alt=\"enter image description here\"></a></p>\n"}]