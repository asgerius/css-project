[{"tags": ["ruby", "server", "config", "rack", "puma"], "answers": [{"comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1472687930, "post_id": 39260706, "comment_id": 65857380, "body": "You beat me! I took too long to write mine. :-)"}, {"owner": {"reputation": 8775, "user_id": 41906, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/50ef6e377deda11fae86e48314fc93fa?s=128&d=identicon&r=PG", "display_name": "Clint Pachl", "link": "https://stackoverflow.com/users/41906/clint-pachl"}, "edited": false, "score": 1, "creation_date": 1516993673, "post_id": 39260706, "comment_id": 83929462, "body": "The option sequence does not have to be the first line of config.ru (e.g., it could come after your require statements or even Builder#use), however, it must precede Builder#run. Nonetheless, it&#39;s probably best to put it at the top of the file like a shebang. <b>Note</b>, only the first option sequence found is parsed. See Builder.parse_file in lib/rack/builder.rb for details."}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": false, "score": 3, "last_activity_date": 1472687447, "creation_date": 1472687447, "answer_id": 39260706, "question_id": 39260374, "link": "https://stackoverflow.com/questions/39260374/set-server-options-inside-rackup-file/39260706#39260706", "title": "set server options inside rackup file", "body": "<p>You can specify options on a line staring with <code>#\\</code> in <code>config.ru</code> (it must be the first such line). You specify them as if you were specifying command line options to <code>rackup</code>:</p>\n\n<pre><code>#\\ -s puma -o 127.0.0.1 -p 3000 -O Threads=0:16 -O Verbose\n\n# require everything and set up middleware etc.\n\nrun MyApp\n</code></pre>\n\n<p>The <a href=\"https://github.com/rack/rack/wiki/(tutorial)-rackup-howto#config-file-syntax\" rel=\"nofollow\">docs for this are hidden away on the wiki</a>.</p>\n\n<p>Check <code>rackup -s puma -h</code> for the options you can use. <code>-O</code> passes the option through to the server you are using (Puma seems to accept <code>Threads</code> and <code>Verbose</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1472725916, "post_id": 39260752, "comment_id": 65872671, "body": "Whilst both were correct this is the more extensive answer."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 4, "last_activity_date": 1482451323, "last_edit_date": 1482451323, "creation_date": 1472687767, "answer_id": 39260752, "question_id": 39260374, "link": "https://stackoverflow.com/questions/39260374/set-server-options-inside-rackup-file/39260752#39260752", "title": "set server options inside rackup file", "body": "<p>It's not documented well because most people don't do what you're trying to do. :-) Folks typically store their Puma configuration in <a href=\"https://github.com/puma/puma#configuration-file\" rel=\"nofollow noreferrer\">config/puma.rb</a> or pass it on the command line e.g. in Procfile. </p>\n\n<p>I'm going to out on a limb here and assume your <code>App</code> is a Sinatra app or something similar. The main issue with trying to set these options in a Sinatra <code>configure {}</code> block is that by the time rackup is running the class and executing these statements it's already too late to set things like the port and thread pool size. As far as the missing <code>run</code> method goes, I think you just want <code>run App</code> in config.ru. Not sure what you're going for there.</p>\n\n<p>You can tell rackup to use Puma by adding this at the top of the file:</p>\n\n<pre><code>#\\ -s Puma\n</code></pre>\n\n<p>If you want to set the port or any other rackup options, you can do it like so:</p>\n\n<pre><code>#\\ -s Puma -p 3000\n</code></pre>\n\n<p>or, for Puma-specific options:</p>\n\n<pre><code>#\\ -s Puma -p 3000 -O Threads=0:16 -O Verbose=true\n</code></pre>\n\n<p>This is (mostly) documented in Puma's README <a href=\"https://github.com/puma/puma#rackup\" rel=\"nofollow noreferrer\">here</a>, and <a href=\"http://www.rubydoc.info/github/puma/puma/Rack/Handler/Puma\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Another option is to skip rackup and config.ru entirely and just build everything into your Sinatra app:</p>\n\n<pre><code>require 'sinatra/base'\nrequire 'puma'\n\nclass App &lt; Sinatra::Application\n  configure do\n    set :server, :puma\n    set :port, 3000\n    set :server_settings, :Threads =&gt; '0:16', :Verbose =&gt; true\n  end\n\n  run! if $0 == app_file\nend\n</code></pre>\n\n<p>Then you can just run your app like any normal Ruby script, e.g. <code>ruby app.rb</code>. </p>\n\n<p>At the end of the day, I would strongly recommend you explore creating a Puma configuration file and using that instead. It's just easier, cleaner, and more understandable. If you need to pull in the Puma settings from the environment or from the result of another method or process, you can do that in there. Best of luck.</p>\n"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1955, "favorite_count": 0, "accepted_answer_id": 39260752, "answer_count": 2, "score": 3, "last_activity_date": 1482451323, "creation_date": 1472684945, "last_edit_date": 1472685592, "question_id": 39260374, "link": "https://stackoverflow.com/questions/39260374/set-server-options-inside-rackup-file", "title": "set server options inside rackup file", "body": "<p>I'm trying set the server options I.E. port, host, etc but I can't find anything on how to do this from within the <code>config.ru</code> file.</p>\n\n<p>I've tried putting the config options into a hash and then doing:</p>\n\n<pre><code>configure { set :server, config[:server][:handler].to_sym }\nRack::Handler.default.run(App, config[:server])\n</code></pre>\n\n<p>Also tried:</p>\n\n<pre><code>Rack::Handler::pick(['puma']).run App, config[:server]\n</code></pre>\n\n<p>and even:</p>\n\n<pre><code>configure { set :server, config[:server].delete(:handler).to_sym }\n</code></pre>\n\n<p>so that the handler won't be in the server config hash and still...</p>\n\n<p>no dice.</p>\n\n<p>config hash is:</p>\n\n<pre><code>{\n  :handler =&gt; \"puma\", \n  :host    =&gt; \"127.0.0.1\", \n  :port    =&gt; 3000, \n  :threads =&gt; \"0:16\", \n  :verbose =&gt; true\n}\n</code></pre>\n\n<p>But the hash config just gets ignored, I set the port to <code>3000</code> but the app loads with <code>8080</code> as default.</p>\n\n<p>It also errors about there not being a <code>run</code> command present (well obviously, I'm not using it). </p>\n\n<p>So a fix for that would also be a nice.</p>\n\n<p>I'm sure there's a proper way to do this but why is it so hard to find it documented? I've done as many search terms into google as I can think of and yet nothing completely correct comes back.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472686359, "post_id": 39259946, "comment_id": 65857007, "body": "helpers are for views if you need to include this in a controller than <code>include</code> or <code>helper</code> methods are available for that. That being said I am not a big believer in the usefulness of &quot;helpers&quot; as they can create global ambiguity."}, {"owner": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472686787, "post_id": 39259946, "comment_id": 65857104, "body": "@engineersmnky Thanks for your answer. As my application going more complex, codes in controller also becoming tumid, do you know how to reduce the codes in controller if I do not move them the helper file ?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472691595, "post_id": 39259946, "comment_id": 65858211, "body": "Probably one of the most useful blog posts for SRP design patterns in rails <a href=\"http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/\" rel=\"nofollow noreferrer\">blog.codeclimate.com/blog/2012/10/17/&hellip;</a>"}, {"owner": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472692575, "post_id": 39259946, "comment_id": 65858403, "body": "@engineersmnky Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "is_accepted": false, "score": 0, "last_activity_date": 1472688130, "creation_date": 1472688130, "answer_id": 39260796, "question_id": 39259946, "link": "https://stackoverflow.com/questions/39259946/rails-controller-can-not-find-method-in-according-helper-file/39260796#39260796", "title": "Rails: Controller can not find method in according helper file", "body": "<p>If you are using  your module like that, you have to call is_c on an instance. This means that you will have to include DisplayHelper in the class associated with that instance.</p>\n\n<p>if you don't want to call it on an instance, then you can define is_c on the SELF:</p>\n\n<p>Try this:</p>\n\n<pre><code> module DisplayHelper\n        def self.is_c\n          a + b\n        end\nend\n</code></pre>\n\n<p>In the controller:</p>\n\n<blockquote>\n<pre><code>DisplayHelper.is_c\n</code></pre>\n</blockquote>\n\n<p>If you don't understand just comment and i'll try to explain. I hope all of that makes sense.</p>\n"}], "owner": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522736435, "creation_date": 1472682365, "last_edit_date": 1522736435, "question_id": 39259946, "link": "https://stackoverflow.com/questions/39259946/rails-controller-can-not-find-method-in-according-helper-file", "title": "Rails: Controller can not find method in according helper file", "body": "<pre><code>Controllers\n -concerns\n   -application_controller.rb\n   -display_controller.rb\n\nHelpers\n -application_helper.rb\n -display_controller.rb\n</code></pre>\n\n<p>In display_helper.rb</p>\n\n<pre><code>   module DisplayHelper\n        def is_c\n          a + b\n        end\n    end\n</code></pre>\n\n<p>In display_controller.rb</p>\n\n<pre><code>class DisplayController &lt; ApplicationController\n    include ApplicationHelper\n    include DisplayHelper\n\n    def update\n      @c = is_c\n    end\n\nend\n</code></pre>\n\n<p>The problem is if I want <code>@c = is_c</code> in update action work , I must do <code>include DisplayHelper</code> in Controller, otherwise the result of is_c can not be assigned to @c. Normally method in helper file can be used in accroding controller without including, but for this resource, why it does not work ? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "edited": false, "score": 0, "creation_date": 1472681659, "post_id": 39258967, "comment_id": 65855629, "body": "Add <code>puts response.body</code> after <code>render :template =&gt; &#39;static_pages&#47;home&#39;</code> and update your question with the output"}, {"owner": {"reputation": 31, "user_id": 5741195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b45430d0c5659a47eb7ae565a46f8bb4?s=128&d=identicon&r=PG&f=1", "display_name": "wayne_moon", "link": "https://stackoverflow.com/users/5741195/wayne-moon"}, "reply_to_user": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "edited": false, "score": 0, "creation_date": 1472682769, "post_id": 39258967, "comment_id": 65856001, "body": "Just updated. However I was also testing all the links on this page (I just didn&#39;t include those assert_selects in the code and output), and the &#39;Sign Up Now!&#39; link also outputted as having 0 occurences"}, {"owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "edited": false, "score": 0, "creation_date": 1472682968, "post_id": 39258967, "comment_id": 65856063, "body": "I wanted to see output from <code>puts response.body</code> command. The actual response generated during test"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1472710550, "post_id": 39258967, "comment_id": 65863090, "body": "is this using capybarra?"}, {"owner": {"reputation": 31, "user_id": 5741195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b45430d0c5659a47eb7ae565a46f8bb4?s=128&d=identicon&r=PG&f=1", "display_name": "wayne_moon", "link": "https://stackoverflow.com/users/5741195/wayne-moon"}, "edited": false, "score": 0, "creation_date": 1472749257, "post_id": 39258967, "comment_id": 65888899, "body": "I included the output of the puts command in the error message."}, {"owner": {"reputation": 31, "user_id": 5741195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b45430d0c5659a47eb7ae565a46f8bb4?s=128&d=identicon&r=PG&f=1", "display_name": "wayne_moon", "link": "https://stackoverflow.com/users/5741195/wayne-moon"}, "edited": false, "score": 0, "creation_date": 1472749276, "post_id": 39258967, "comment_id": 65888911, "body": "And no I am not using capybara."}], "owner": {"reputation": 31, "user_id": 5741195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b45430d0c5659a47eb7ae565a46f8bb4?s=128&d=identicon&r=PG&f=1", "display_name": "wayne_moon", "link": "https://stackoverflow.com/users/5741195/wayne-moon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472682494, "creation_date": 1472677392, "last_edit_date": 1472682494, "question_id": 39258967, "link": "https://stackoverflow.com/questions/39258967/issue-with-testing-for-presence-of-links-with-rspec-and-assert-select", "title": "Issue with testing for presence of links with rspec and assert_select", "body": "<p>I'm currently in the process of learning rspec by rewriting all the Rails Tutorial (Hartl) tests in rspec. I'm having an issue with testing for the presence of links using rspec. <strong>For whatever reason, my test fails when it seems like it definitely should pass; there are clearly links to the specified url, but it always says there are 0 found.</strong> </p>\n\n<p>The following is my rspec code to test for the presence of two links to the root path:</p>\n\n<pre><code>require 'spec_helper'\nrequire 'rails_helper'\n\ndescribe StaticPagesController, :type =&gt; :view do\n\n  it \"root path contains all expected links\" do \n    render :template =&gt; 'static_pages/home'\n    puts response.body\n    assert_template 'static_pages/home'\n    assert_select \"a[href=?]\", \"/\", count: 2\n  end\nend\n</code></pre>\n\n<p>The following is my error message: </p>\n\n<pre><code>waynesun95:~/workspace/sample_app (advanced-login) $ bundle exec rspec\nRubyDep: WARNING: Your Ruby is outdated/buggy. (To disable warnings, set RUBY_DEP_GEM_SILENCE_WARNINGS=1)\nRubyDep: WARNING: Your Ruby is: 2.3.0 (buggy). Recommendation: install 2.3.1.\n&lt;div class=\"center jumbotron\"&gt;  \n  &lt;h1&gt;Welcome to the Sample App&lt;/h1&gt;\n  &lt;h2&gt;\n    This is the home page for the \n    &lt;a href=\"http://www.railstutorial.org/\"&gt;Ruby on Rails Tutorial&lt;/a&gt;\n    sample application.\n  &lt;/h2&gt;\n\n  &lt;a class=\"btn btn-lg btn-primary\" href=\"/signup\"&gt;Sign up now!&lt;/a&gt;\n&lt;/div&gt;\n\n&lt;a href=\"http://rubyonrails.org/\"&gt;&lt;img alt=\"Rails logo\" src=\"/assets/rails-c094bc3a4bf50e5bb477109e5cb0d213af27ad75b481c4df249f50974dbeefe6.png\" /&gt;&lt;/a&gt;\n......F\n\nFailures:\n\n  1) StaticPagesController root path contains all expected links\n     Failure/Error: assert_select \"a[href=?]\", \"/\", count: 2\n\n     Minitest::Assertion:\n       Expected exactly 2 elements matching \"a[href=\"/\"]\", found 0..\n       Expected: 2\n         Actual: 0\n     # ./.bundle/ruby/2.3.0/gems/minitest-5.9.0/lib/minitest/assertions.rb:139:in `assert'\n     # ./.bundle/ruby/2.3.0/gems/minitest-5.9.0/lib/minitest/assertions.rb:174:in `assert_equal'\n     # ./.bundle/ruby/2.3.0/gems/rails-dom-testing-1.0.7/lib/rails/dom/testing/assertions/selector_assertions.rb:278:in `assert_size_match!'\n     # ./.bundle/ruby/2.3.0/gems/rails-dom-testing-1.0.7/lib/rails/dom/testing/assertions/selector_assertions.rb:175:in `block in assert_select'\n     # ./.bundle/ruby/2.3.0/gems/rails-dom-testing-1.0.7/lib/rails/dom/testing/assertions/selector_assertions.rb:174:in `tap'\n     # ./.bundle/ruby/2.3.0/gems/rails-dom-testing-1.0.7/lib/rails/dom/testing/assertions/selector_assertions.rb:174:in `assert_select'\n     # ./spec/users_signup_spec.rb:16:in `block (2 levels) in &lt;top (required)&gt;'\n\nFinished in 0.47062 seconds (files took 12.61 seconds to load)\n7 examples, 1 failure\n\nFailed examples:\n\nrspec ./spec/users_signup_spec.rb:6 # StaticPagesController root path contains all expected links\n</code></pre>\n\n<p>The error message says that it found 0 elements matching a[href=\"/\"]. However, upon inspection of the page that I am testing on, when I right click and 'inspect element' on the element that links to the root path, it is clearly linking to \"/\" (highlighted in picture below).\n <a href=\"http://i.stack.imgur.com/N5b5w.png\" rel=\"nofollow\">highlighted \"Home\" link clearly links to the path \"/\"</a></p>\n\n<p>Furthermore, I know I am on the correct template/view, because when I remove the assert_select line and only leave the render and assert_template lines, the code passes without a problem (further justification of this is that I get an error when I change the path in assert_template). </p>\n\n<p>I have no idea what is going on. It seems like it should be passing the test but it is not, and nothing I try seems to work. Any help is very appreciated!</p>\n"}, {"tags": ["ruby", "rubygems", "bundler", "gemspecs"], "answers": [{"comments": [{"owner": {"reputation": 5819, "user_id": 4385889, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V0hjo.png?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4385889/andrew"}, "reply_to_user": {"reputation": 15, "user_id": 3659234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11e2c4040b55dacdb30e68469337e310?s=128&d=identicon&r=PG&f=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/3659234/drew"}, "edited": false, "score": 0, "creation_date": 1472778580, "post_id": 39259704, "comment_id": 65900298, "body": "@Drew Have you checked out other posts on similar/the same error messages? Did a quick google search and found a lot of questions/answers. This might be up your alley: <a href=\"http://stackoverflow.com/questions/17936340/unresolved-specs-during-gemspecification-reset\" title=\"unresolved specs during gemspecification reset\">stackoverflow.com/questions/17936340/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5819, "user_id": 4385889, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V0hjo.png?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4385889/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1472681067, "creation_date": 1472681067, "answer_id": 39259704, "question_id": 39258929, "link": "https://stackoverflow.com/questions/39258929/ruby-unresolved-specs-during-gemspecification-reset-with-installed-gems/39259704#39259704", "title": "Ruby Unresolved specs during Gem::Specification.reset with installed gems", "body": "<p>The error looks pretty typical. It's saying it can't find the gem in your gemfile, which loads your dependencies. Usually bundle install adds them all with no probelms, but I've had issues like this before and had to manually put entries into the gemfile.</p>\n\n<p>In the case you're making an example for, try adding to the gemfile:</p>\n\n<pre><code>gem 'differ'\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 3659234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11e2c4040b55dacdb30e68469337e310?s=128&d=identicon&r=PG&f=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/3659234/drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1006, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472681067, "creation_date": 1472677243, "question_id": 39258929, "link": "https://stackoverflow.com/questions/39258929/ruby-unresolved-specs-during-gemspecification-reset-with-installed-gems", "title": "Ruby Unresolved specs during Gem::Specification.reset with installed gems", "body": "<p>I have a gem which we'll call  <code>mygem</code> that has an executable used as a CLI tool.</p>\n\n<p>The file <code>mygem/bin/mygem</code>:</p>\n\n<pre><code>#!/usr/bin/env ruby\nlib = File.expand_path('../lib', __FILE__)\n$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)\nrequire 'bundler/setup'\n....code goes here....\n</code></pre>\n\n<p><code>mygem.gemspec</code>:</p>\n\n<pre><code>Gem::Specification.new do |gem|\n  gem.bindir      = 'bin'\n  gem.executables = ['mygem']\nend\n</code></pre>\n\n<p>Build and install:</p>\n\n<pre><code>gem build mygem.gemspec\ngem install mygem-0.1.0.gem\n&lt;optionally bundle install, but that won't fix the error&gt;\n</code></pre>\n\n<p>And, at the end, I can successfully call <code>mygem</code> from the command line and the script runs.</p>\n\n<p>The issue is that it can only run from a folder that does <em>not</em> contain a <code>Gemfile</code>. When doing otherwise, the system outputs an error:</p>\n\n<pre><code>WARN: Unresolved specs during Gem::Specification.reset:\n      json (&gt;= 0)\nWARN: Clearing out unresolved specs.\nPlease report a bug if this causes problems.\nCould not find differ-0.1.2 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>The actual gems that show up in this error message vary depending on the Gemfile in the current directory.</p>\n\n<p>Running <code>bundle exec mygem</code> suppresses part of the error message, but still fails to execute unless <code>bundle install</code> is run on the <em>other</em> application's Gemfile:</p>\n\n<pre><code>Could not find differ-0.1.2 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>How can this be fixed?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "templates", "faraday"], "answers": [{"comments": [{"owner": {"reputation": 1216, "user_id": 597530, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/42f55e50947e30bcc0a67a21ccd63d14?s=128&d=identicon&r=PG", "display_name": "Adam Langsner", "link": "https://stackoverflow.com/users/597530/adam-langsner"}, "edited": false, "score": 0, "creation_date": 1472753679, "post_id": 39258998, "comment_id": 65891260, "body": "I was a bit hesitant to make a class for each tag in the XML that I needed to render but the code ended up looking really great. Thanks"}], "tags": [], "owner": {"reputation": 631, "user_id": 134327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW2l2.png?s=128&g=1", "display_name": "Mario Carrion", "link": "https://stackoverflow.com/users/134327/mario-carrion"}, "is_accepted": true, "score": 1, "last_activity_date": 1472677535, "creation_date": 1472677535, "answer_id": 39258998, "question_id": 39258575, "link": "https://stackoverflow.com/questions/39258575/generate-xml-request-payload-with-template-in-rails/39258998#39258998", "title": "Generate XML Request Payload with Template in Rails", "body": "<p>I've done a similar thing, the easiest way I found was to implement whatever XML classes I needed into a separated gem (you don't really have to do this you can just add the classes somewhere in the models folder, it made sense for my use case).</p>\n\n<p>I used <a href=\"https://github.com/Empact/roxml\" rel=\"nofollow\">ROXML</a> for this; after that you can simple call <code>root.to_xml.to_s</code> to render your string, see the examples on github, it's really straightforward.</p>\n"}], "owner": {"reputation": 1216, "user_id": 597530, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/42f55e50947e30bcc0a67a21ccd63d14?s=128&d=identicon&r=PG", "display_name": "Adam Langsner", "link": "https://stackoverflow.com/users/597530/adam-langsner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 0, "accepted_answer_id": 39258998, "answer_count": 1, "score": 0, "last_activity_date": 1472677535, "creation_date": 1472675774, "question_id": 39258575, "link": "https://stackoverflow.com/questions/39258575/generate-xml-request-payload-with-template-in-rails", "title": "Generate XML Request Payload with Template in Rails", "body": "<p>I'm working on a rails app that integrates with a 3rd party on the backend. To give a quick overview, a user will create an order in our web interface and that will persist a delayed job. So, the job runs outside of a web context and will send a request to this 3rd party. The 3rd party expects a POST with an XML payload in the request body.</p>\n\n<p>I'm currently using Faraday to do the request. I have a class that looks something like this:</p>\n\n<pre><code>class FooRequest\n  def response\n    connection.post(\"/foo\", xml)\n  end\n\n  private\n\n  def xml\n    xml = Builder::XmlMarkup.new\n    xml.root do\n      xml.foo \"something something\"\n    end\n\n    xml.target!\n  end      \n\n  def connection\n    @connection ||= Faraday.new(url: \"http://example.org\")\n  end\nend\n</code></pre>\n\n<p>The XML is actually bigger and more complex than that and so I don't want to build the xml in this class. I think having some sort of template is best. I'd either like to use Builder in a <code>xml.builder</code> file or just have raw XML in a erb file. Not sure which is best and how best to render a template in this context. I know that rails recently added the ability to render views outside of a controller context (<a href=\"https://medium.com/evil-martians/new-feature-in-rails-5-render-views-outside-of-actions-2fc1181e86a8#.s344qg5ue\" rel=\"nofollow\">https://medium.com/evil-martians/new-feature-in-rails-5-render-views-outside-of-actions-2fc1181e86a8#.s344qg5ue</a>) but I feel like that feature wasn't built for this use case. I also know that there are other templating languages like Liquid and maybe that's a better fit.</p>\n\n<p>Has anyone done this sort of thing in the past? Is there something I'm missing?\nAlso, if I do create a template file, should I put it in <code>/app/views</code>? It's not a view that my webapp would render, maybe I should have a <code>/app/templates</code> dir?</p>\n\n<p>PS: Rails's <code>to_xml</code> method is not robust enough for what I want (I need tag attributes and I don't want to represent a deep complex XML tree with a ruby hash).</p>\n"}, {"tags": ["jquery", "mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32469, "user_id": 1529673, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/O6MQS.jpg?s=128&g=1", "display_name": "Strawberry", "link": "https://stackoverflow.com/users/1529673/strawberry"}, "edited": false, "score": 3, "creation_date": 1472676351, "post_id": 39258475, "comment_id": 65853428, "body": "No screenshots thanks. Just provide proper  CREATE and INSERT statements AND a desired result"}, {"owner": {"reputation": 117, "user_id": 821757, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/2a46645c27ad78735036b9f52f0207c4?s=128&d=identicon&r=PG", "display_name": "Dango", "link": "https://stackoverflow.com/users/821757/dango"}, "reply_to_user": {"reputation": 32469, "user_id": 1529673, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/O6MQS.jpg?s=128&g=1", "display_name": "Strawberry", "link": "https://stackoverflow.com/users/1529673/strawberry"}, "edited": false, "score": 0, "creation_date": 1472676747, "post_id": 39258475, "comment_id": 65853593, "body": "Do I need to add two different datetime fields &quot;clock_in&quot; and &quot;clock_out&quot; or is having one &quot;time&quot; datetime field enough for hour calculations?"}], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 0, "last_activity_date": 1472707251, "creation_date": 1472707251, "answer_id": 39263207, "question_id": 39258475, "link": "https://stackoverflow.com/questions/39258475/calculating-multiple-datetimes-for-total-hours/39263207#39263207", "title": "Calculating multiple datetimes for total hours", "body": "<p>There are multiple ways that you can store timesheet information, two of them are:</p>\n\n<h3>Series of events</h3>\n\n<p>(Looks like this is what you do, according to the screenshot)</p>\n\n<p>Store a point in time, store the type of the event (in, out, lunch, break).\nThe types seem to be just variations of <strong>start</strong> and <strong>stop</strong> of work.\nA <strong>stop</strong> always needs a preceding <strong>start</strong> (can't stop unless you started) and a <strong>start</strong> always needs a <strong>stop</strong> event in order to be able to calculate the total hours worked (which is then the sum of all the differences between consecutive <strong>start</strong> and <strong>stop</strong> events)</p>\n\n<pre><code>13:00 in (start)\n14:00 break (stop)\n14:15 in (start)\n14:45 out (stop)\n\n=&gt; 1.5 hours\n</code></pre>\n\n<h3>Series of durations</h3>\n\n<p>You store either of </p>\n\n<ul>\n<li><strong>start</strong>/<strong>stop</strong></li>\n<li><strong>start</strong>/<strong>duration</strong></li>\n<li><strong>duration</strong> (if you do not care when in the day the work happened)</li>\n</ul>\n\n<p>I'd prefer the \"duration\" style, easier to calculate, less error prone (what happens if you don't clock out?)</p>\n"}], "owner": {"reputation": 117, "user_id": 821757, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/2a46645c27ad78735036b9f52f0207c4?s=128&d=identicon&r=PG", "display_name": "Dango", "link": "https://stackoverflow.com/users/821757/dango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1472707251, "creation_date": 1472675348, "question_id": 39258475, "link": "https://stackoverflow.com/questions/39258475/calculating-multiple-datetimes-for-total-hours", "title": "Calculating multiple datetimes for total hours", "body": "<p>Working on a rails 5.0.0 app which has a simple timecard module, I am trying to figure out how to compare all the datetimes in the \"time\" field and get total of hours worked... </p>\n\n<p>Solution can be either in ruby, mysql or jquery, since I am using all three in the application.  </p>\n\n<p>DB fields are: user, clock, time</p>\n\n<p>HTML: date and time located in the \"ts-time\" div </p>\n\n<pre><code>&lt;div class=\"ts-time\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Have provided a couple of screenshots below </p>\n\n<p>Thanks in advance!</p>\n\n<p><a href=\"https://i.stack.imgur.com/EwAaN.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EwAaN.jpg\" alt=\"enter image description here\"></a> </p>\n\n<p><a href=\"https://i.stack.imgur.com/u7NQr.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u7NQr.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "selenium", "rspec", "capybara"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1472677203, "post_id": 39258383, "comment_id": 65853834, "body": "have you tried moving the before block outside the context block? before hooks are contextual in nature <a href=\"http://www.rubydoc.info/gems/rspec-core/RSpec%2FCore%2FHooks%3Abefore\" rel=\"nofollow noreferrer\">RSpec::Core::Hooks#before</a>"}, {"owner": {"reputation": 1048, "user_id": 1229455, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33b2eaded72d87132039e6bb1f69641b?s=128&d=identicon&r=PG", "display_name": "carmenism", "link": "https://stackoverflow.com/users/1229455/carmenism"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472677842, "post_id": 39258383, "comment_id": 65854124, "body": "Good idea, but it didn&#39;t work.  I moved the <code>before</code> block out of the <code>context</code> and the first <code>it</code> passed but the other three <code>it</code>s failed.  :("}, {"owner": {"reputation": 1048, "user_id": 1229455, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33b2eaded72d87132039e6bb1f69641b?s=128&d=identicon&r=PG", "display_name": "carmenism", "link": "https://stackoverflow.com/users/1229455/carmenism"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472678074, "post_id": 39258383, "comment_id": 65854239, "body": "Played with it again.  I moved the <code>before</code> out of the <code>context</code> and changed it from <code>before(:all)</code> to <code>before(:each)</code>.  This works, but it revisits the page four separate times now.  I understand that is how <code>before(:each)</code> works, but it seems like <code>before(:all)</code> should also work."}], "answers": [{"comments": [{"owner": {"reputation": 1048, "user_id": 1229455, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33b2eaded72d87132039e6bb1f69641b?s=128&d=identicon&r=PG", "display_name": "carmenism", "link": "https://stackoverflow.com/users/1229455/carmenism"}, "edited": false, "score": 0, "creation_date": 1472678378, "post_id": 39259135, "comment_id": 65854370, "body": "Thanks for the explanation.  What do you mean about a view test versus a feature test?  I&#39;ve never heard of a view test.  For whatever it is worth, this is probably the simplest test I&#39;ll have others will log in and interact with the page more."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 1048, "user_id": 1229455, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33b2eaded72d87132039e6bb1f69641b?s=128&d=identicon&r=PG", "display_name": "carmenism", "link": "https://stackoverflow.com/users/1229455/carmenism"}, "edited": false, "score": 0, "creation_date": 1472678613, "post_id": 39259135, "comment_id": 65854467, "body": "@vulpix RSpec supports multiple types of tests - one of those is view specs - <a href=\"https://www.relishapp.com/rspec/rspec-rails/v/3-5/docs/view-specs/view-spec\" rel=\"nofollow noreferrer\">relishapp.com/rspec/rspec-rails/v/3-5/docs/view-specs/view-s&zwnj;&#8203;pec</a> - which are for testing things that should be rendered to a page.  Capybara includes its matchers into view specs so you can do things like <code>expect(rendered).to have_css(&#39;#login&#39;)</code>  .  It doesn&#39;t make much sense to have a feature test that just tests a login box exists since you should have a feature test that fills in that box, and if the box was missing it would error when you try to fill it."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 1048, "user_id": 1229455, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33b2eaded72d87132039e6bb1f69641b?s=128&d=identicon&r=PG", "display_name": "carmenism", "link": "https://stackoverflow.com/users/1229455/carmenism"}, "edited": false, "score": 0, "creation_date": 1472693650, "post_id": 39259135, "comment_id": 65858652, "body": "@vulpix If this answered the question for you, don&#39;t forget to accept it (the checkmark) so the question gets marked as answered."}, {"owner": {"reputation": 1048, "user_id": 1229455, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33b2eaded72d87132039e6bb1f69641b?s=128&d=identicon&r=PG", "display_name": "carmenism", "link": "https://stackoverflow.com/users/1229455/carmenism"}, "edited": false, "score": 0, "creation_date": 1472735535, "post_id": 39259135, "comment_id": 65879485, "body": "The part about view tests didn&#39;t make sense to me, so I was waiting for you to explain that before I accepted your answer.  Thanks for explaining it."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1472678162, "creation_date": 1472678162, "answer_id": 39259135, "question_id": 39258383, "link": "https://stackoverflow.com/questions/39258383/rspec-only-first-it-block-passes-and-capybara-or-selenium-redirects-page/39259135#39259135", "title": "RSpec only first `it` block passes and Capybara or Selenium redirects page", "body": "<p><code>before(:all)</code> runs the block once before evaluating the 'it' blocks.  This isn't going to work with a normal Capybara setup since Capybara resets the session after each test which includes a <code>visit 'about:blank'</code>.  If you want to keep one <code>expect</code> per <code>it</code> then your initial visit needs to be in a <code>before(:each)</code> block.  </p>\n\n<p>That being said, sticking to one expect per test doesn't make a lot of sense in feature tests where you should be testing page behavior (visit page, fill in fields, click buttons, etc) and a given test is going to expect multiple things to happen.  Your tests look they really belong as view tests and not feature tests.</p>\n\n<p>Additionally, you should be using the <code>have_title</code> matcher rather than using <code>eq</code> with page.title</p>\n"}], "owner": {"reputation": 1048, "user_id": 1229455, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33b2eaded72d87132039e6bb1f69641b?s=128&d=identicon&r=PG", "display_name": "carmenism", "link": "https://stackoverflow.com/users/1229455/carmenism"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 39259135, "answer_count": 1, "score": 0, "last_activity_date": 1472678162, "creation_date": 1472674941, "question_id": 39258383, "link": "https://stackoverflow.com/questions/39258383/rspec-only-first-it-block-passes-and-capybara-or-selenium-redirects-page", "title": "RSpec only first `it` block passes and Capybara or Selenium redirects page", "body": "<p>I've got a fairly simple testing scenario configured with RSpec, Capybara, and Selenium:</p>\n\n<pre><code>require './spec_helper'\n\nRSpec.describe 'test' do\n  title = 'My title'\n\n  context 'When I navigate to my page' do\n    before(:all) do\n      visit 'http://foo.com/'\n    end\n\n    it \"the page title is #{title}\" do\n      expect(page.title).to eq(title)\n    end\n\n    it 'there is an input for email' do\n      expect(page).to have_css('#login-u')\n    end\n\n    it 'there is an input for password' do\n      expect(page).to have_css('#login-p')\n    end\n\n    it 'there is an input for access token' do\n      expect(page).to have_css('#login-a')\n    end\n  end\nend\n</code></pre>\n\n<p>The page is navigated to, the first <code>it</code> passes, and then the page redirects to a blank page and the last three <code>it</code> blocks fail.</p>\n\n<p>Interestingly, if I move every <code>expect</code> statement into the first <code>it</code> block, then the test passes:</p>\n\n<pre><code>require './spec_helper'\n\nRSpec.describe 'test' do\n  title = 'My title'\n\n  context 'When I navigate to my page' do\n    before(:all) do\n      visit 'http://foo.com/'\n    end\n\n    it \"the page title is #{title}\" do\n      expect(page.title).to eq(title)\n      expect(page).to have_css('#login-u')\n      expect(page).to have_css('#login-p')\n      expect(page).to have_css('#login-a')\n    end\n  end\nend\n</code></pre>\n\n<p>Here are the contents of my <strong>Gemfile</strong>:</p>\n\n<pre><code>source \"https://rubygems.org\"\n\ngem 'rspec', '~&gt; 3.0'\ngem 'selenium-webdriver'\ngem 'capybara'\n</code></pre>\n\n<p>And here is my <strong>spec_helper.rb</strong>:</p>\n\n<pre><code>require 'rubygems'\nrequire 'bundler/setup'\nrequire 'rspec'\nrequire 'selenium-webdriver'\nrequire 'capybara/rspec'\n\nCapybara.default_driver = :selenium\n\nRSpec.configure do |config|\n  config.expect_with :rspec do |expectations|\n    expectations.include_chain_clauses_in_custom_matcher_descriptions = true\n  end\n\n  config.mock_with :rspec do |mocks|\n    mocks.verify_partial_doubles = true\n  end\n\n  config.shared_context_metadata_behavior = :apply_to_host_groups\n\n  config.include Capybara::DSL\nend\n</code></pre>\n\n<p>Does anyone have any suggestions?  From what I understand, it is a best practice to have one <code>expect</code> per <code>it</code>, so I really want to do it the first way if I can get it working.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "auto-generate"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472675490, "post_id": 39258295, "comment_id": 65853016, "body": "perhaps look at this gem: <a href=\"https://github.com/norman/friendly_id\" rel=\"nofollow noreferrer\">github.com/norman/friendly_id</a> However it&#39;s worth understanding how to do this without a gem, for learning purposes, since it&#39;s not that difficult to implement."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1472726133, "post_id": 39258295, "comment_id": 65872837, "body": "You shouldn&#39;t have <code>to_param</code> in the private part of your model definition. I&#39;ve modified my answer to clarify that."}], "answers": [{"comments": [{"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1472689001, "post_id": 39258747, "comment_id": 65857650, "body": "I get it. Nice way. But as the result link_to tag work different now. For example: it was <code>&lt;%= link_to @post %&gt;</code>, but now it works like this: <code>&lt;%= link_to @post.slug %&gt;</code> (in my app it <code>@post.random_link</code>). May be you could help me how to fix it?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1472711149, "post_id": 39258747, "comment_id": 65863391, "body": "No you can still do <code>link_to @post</code> because of the to_param change"}, {"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1472722154, "post_id": 39258747, "comment_id": 65870109, "body": "Add to question post what problem is appears"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1472726215, "post_id": 39258747, "comment_id": 65872905, "body": "I&#39;ve modified my answer to clarify, but basically you made <code>to_param</code> a private method, not a public method."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 3, "last_activity_date": 1472726100, "last_edit_date": 1472726100, "creation_date": 1472676521, "answer_id": 39258747, "question_id": 39258295, "link": "https://stackoverflow.com/questions/39258295/rails-how-to-change-automatic-generated-link/39258747#39258747", "title": "Rails, how to change automatic generated link", "body": "<p>The technique is referred to as <code>slugifying</code> and you need to do three things...</p>\n\n<p>(1) create a new field called <code>slug</code> in your <code>posts</code> table.</p>\n\n<p>(2) add this code to your <code>Post</code> model...</p>\n\n<pre><code>after_validation :generate_slug\n\nprivate\n\ndef generate_slug\n  self.slug = theme.parameterize.underscore\nend\n\npublic\n\ndef to_param\n  slug\nend\n</code></pre>\n\n<p>(3) finally, in your controllers where you have <code>find_post</code> methods, rewrite it to be...</p>\n\n<pre><code>def find_post\n  Post.find_by_slug(params[:id])\nend\n</code></pre>\n\n<p>The <code>to_param</code> method in the model is how things like <code>post_path(@post)</code> build the url... the <code>to_param</code> if not replaced substituted the <code>id</code> field but by writing your own <code>to_param</code> method you can ensure that the <code>slug</code> field is substituted instead.</p>\n\n<p>Ensure that 'to_param' is a public method!  Don't put it in the private part of your model.  You can do that by putting <code>public</code> immediately before the <code>to_param</code> method.  You should then put <code>private</code> after the method definition if subsequent methods are to be private.</p>\n"}], "owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 39258747, "answer_count": 1, "score": 0, "last_activity_date": 1472726100, "creation_date": 1472674584, "last_edit_date": 1472722110, "question_id": 39258295, "link": "https://stackoverflow.com/questions/39258295/rails-how-to-change-automatic-generated-link", "title": "Rails, how to change automatic generated link", "body": "<p>I have a RoR app. And in app users can create posts. I've connected Posts table in my <code>routes.rb</code> via <code>resources :posts</code>. And right now - link to created post look like: <code>http://mysitename.com/posts/1</code> (where 1 is post number). </p>\n\n<p>What i want to do, is to make rails  generate link to post. So users didn't see how much posts I have in my DB. And as result it must look like <code>http://mysitename.com/post/generatedlink</code>. It must generate, for example post theme.</p>\n\n<p>For start, we must create <code>link</code> column in Posts table. And make it to generate something like that:</p>\n\n<pre><code>@post.link = @post.theme.parameterize.underscore \n</code></pre>\n\n<p>But I don't understand, where to put this code.</p>\n\n<p>And the next problem is: \"How to replace <code>post/1</code> for <code>@post.link</code>?\"</p>\n\n<p>Hope, I make my self clear. If you'll say I can provide information, what is needed to resolve my question.</p>\n\n<p><em>UPDATE</em></p>\n\n<p>What I did after @SteveTurczyn advise.</p>\n\n<p>I've created new column, called <code>random_link</code> as a <code>string</code>.</p>\n\n<p>I didn't touch my <code>routes.rb</code>:</p>\n\n<pre><code>resources :posts\n</code></pre>\n\n<p>My <code>post.rb</code> (post model) look like this:</p>\n\n<pre><code>after_validation  :add_link \n\ndef add_link\n  self.random_link = self.theme.to_slug_param \n  # to_slug_param it's a gem for translating from other language into english\nend\n\ndef to_param\n  random_link\nend\n</code></pre>\n\n<p>I don't have find method. My <code>posts_controller.rb</code> look like this:</p>\n\n<pre><code>def show\n  @post = Post.find_by_random_link(params[:id])\n  right_menu_posts\n  random_link_to_other_post(@post)\nend\n\n  private \n\n  def random_link_to_other_post(post)\n    random_post = Post.where.not(id: post.id)\n    @random_post = random_post.sort_by {rand}.first\n  end\n\n  def right_menu_posts\n    @posts_for_video_in_right_menu = Post.where(video: true)\n  end\n</code></pre>\n\n<p>And html.erb:</p>\n\n<pre><code>&lt;%= @post.theme %&gt;\n&lt;%= @post.content %&gt;\n\n&lt;% for post in @random_post %&gt;\n  &lt;%= link_to post %&gt;\n&lt;% end %&gt;\n&lt;% for post in @posts_for_video_in_right_menu %&gt;\n  &lt;%= link_to post %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And on a main page (where i have a list of posts) a keep getting an error: <code>NoMethodError in Home#index private method 'to_param' called for #&lt;Post:0x007fae3096bf78&gt;</code>.</p>\n"}, {"tags": ["ruby", "csv", "ruby-1.8.7"], "comments": [{"owner": {"reputation": 1228, "user_id": 336881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8dc8f86200d462a189ced773511798f?s=128&d=identicon&r=PG", "display_name": "michau", "link": "https://stackoverflow.com/users/336881/michau"}, "edited": false, "score": 1, "creation_date": 1472675080, "post_id": 39258270, "comment_id": 65852803, "body": "Please post the content of file_name.csv, or at least the first lines."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1472675617, "post_id": 39258270, "comment_id": 65853062, "body": "If you&#39;re still using Ruby 1.8.7 you&#39;re in dire need of updating, but you might be able to muddle along using the <a href=\"http://ruby-doc.org/stdlib-1.8.7/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">CSV library</a> if you read the documentation carefully. Keep in mind this is <b>unsupported software</b> so you&#39;re basically on your own."}], "answers": [{"tags": [], "owner": {"reputation": 1228, "user_id": 336881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8dc8f86200d462a189ced773511798f?s=128&d=identicon&r=PG", "display_name": "michau", "link": "https://stackoverflow.com/users/336881/michau"}, "is_accepted": false, "score": 1, "last_activity_date": 1472677265, "creation_date": 1472677265, "answer_id": 39258936, "question_id": 39258270, "link": "https://stackoverflow.com/questions/39258270/how-to-read-csv-in-ruby-1-8-7/39258936#39258936", "title": "how to read CSV in ruby 1.8.7?", "body": "<p>Do it like this:</p>\n\n<pre><code>csv = CSV.read('file_name.csv')\n</code></pre>\n\n<p><code>\"r\"</code> is not a correct parameter for <a href=\"http://ruby-doc.org/stdlib-1.8.7/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow\"><code>CSV.read</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 9760, "user_id": 2951835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ft1ga.jpg?s=128&g=1", "display_name": "ahnbizcad", "link": "https://stackoverflow.com/users/2951835/ahnbizcad"}, "is_accepted": false, "score": 0, "last_activity_date": 1472677581, "creation_date": 1472677581, "answer_id": 39259009, "question_id": 39258270, "link": "https://stackoverflow.com/questions/39258270/how-to-read-csv-in-ruby-1-8-7/39259009#39259009", "title": "how to read CSV in ruby 1.8.7?", "body": "<p>The file line endings was the issue.\nI changed all of them to unix's LF.</p>\n"}], "owner": {"reputation": 9760, "user_id": 2951835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ft1ga.jpg?s=128&g=1", "display_name": "ahnbizcad", "link": "https://stackoverflow.com/users/2951835/ahnbizcad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1472677581, "creation_date": 1472674452, "last_edit_date": 1472676196, "question_id": 39258270, "link": "https://stackoverflow.com/questions/39258270/how-to-read-csv-in-ruby-1-8-7", "title": "how to read CSV in ruby 1.8.7?", "body": "<p>I just want to read a csv file and discard the header row.</p>\n\n<p>When I do <code>csv = CSV.read('file_name.csv','r')</code> I get </p>\n\n<blockquote>\n  <p>.rvm/rubies/ruby-1.8.7-head/lib/ruby/1.8/csv.rb:98:in `read': can't\n  convert String into Integer (TypeError)</p>\n</blockquote>\n\n<p>When I do </p>\n\n<pre><code>csv = CSV.open('file_name.csv','r')\ncsv.shift\n</code></pre>\n\n<p>I get </p>\n\n<blockquote>\n  <p>.rvm/rubies/ruby-1.8.7-head/lib/ruby/1.8/csv.rb:639:in `get_row':\n  CSV::IllegalFormatError (CSV::IllegalFormatError)\n  from .rvm/rubies/ruby-1.8.7-head/lib/ruby/1.8/csv.rb:567:in `shift'</p>\n</blockquote>\n\n<p>What is an example of successfully reading csv files and manipulating data in ruby 1.8.7?</p>\n\n<hr>\n\n<p><strong>edit:</strong></p>\n\n<p>first few lines of file_name.csv</p>\n\n<pre><code>Request, Target\nhttp://www.asdf.com/,http://www.asdf.com/\nhttp://www.asdf.com/_blank,http://www.asdf.com/\n\"http://www.asdf.com/,\",http://www.asdf.com/\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "server"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472674468, "post_id": 39258143, "comment_id": 65852503, "body": "I think the easiest way is to host them separately then redirect"}, {"owner": {"reputation": 3, "user_id": 6780427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80112855aa380ca5054f5484be8819a6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael G", "link": "https://stackoverflow.com/users/6780427/michael-g"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472676174, "post_id": 39258143, "comment_id": 65853341, "body": "Isn&#39;t that what I am doing or am I confused..? And redirect how?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6780427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80112855aa380ca5054f5484be8819a6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael G", "link": "https://stackoverflow.com/users/6780427/michael-g"}, "edited": false, "score": 0, "creation_date": 1472733023, "post_id": 39259731, "comment_id": 65877569, "body": "Thank you this worked with a small modification of setting config.asset_host = &quot;<a href=\"http://localhost:3333\" rel=\"nofollow noreferrer\">localhost:3333</a>&quot;"}], "tags": [], "owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "is_accepted": true, "score": 0, "last_activity_date": 1472681211, "creation_date": 1472681211, "answer_id": 39259731, "question_id": 39258143, "link": "https://stackoverflow.com/questions/39258143/routing-rails-apps-based-on-uri/39259731#39259731", "title": "Routing rails apps based on uri", "body": "<p>Your assets don't load correctly because Spree application is generating relative links to your assets, without <code>/store</code> prefix.</p>\n\n<p>You can fix that by changing <code>asset_host</code> config in your Spree aplication. Set this in <code>config/environments/development.rb</code></p>\n\n<pre><code>config.asset_host = \"http://localhost/store\"\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6780427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80112855aa380ca5054f5484be8819a6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael G", "link": "https://stackoverflow.com/users/6780427/michael-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 39259731, "answer_count": 1, "score": 0, "last_activity_date": 1472681211, "creation_date": 1472673965, "question_id": 39258143, "link": "https://stackoverflow.com/questions/39258143/routing-rails-apps-based-on-uri", "title": "Routing rails apps based on uri", "body": "<p>I am attempting to migrate two Ruby on Rails apps as they are currently hosted by the original developer who will not allow us access to change the code. The apps are a LocomotiveCMS_Engine and a Spree site. I have them rackup'd just fine running on port 3000 and 3333 respectively.</p>\n\n<p>What I'd like to know is how to make it so that when you go to the page i.e. localhost it will route you to port 3000 and when you go to localhost/store it will route you to port 3333. </p>\n\n<p>I attempted to use this: <a href=\"http://livsey.org/blog/2012/02/23/using-rack-proxy-to-serve-multiple-rails-apps-from-the-same-domain-and-port/\" rel=\"nofollow\">http://livsey.org/blog/2012/02/23/using-rack-proxy-to-serve-multiple-rails-apps-from-the-same-domain-and-port/</a> Which works for localhost requests, but when you go to localhost/store the assets of the page don't load correctly so there are no graphics on the page.</p>\n\n<p>I am not extremely familiar with Ruby on Rails so I'm doing my best to piece it together. Any advice would be appreciated!</p>\n"}, {"tags": ["ruby", "web-crawler", "mechanize"], "comments": [{"owner": {"reputation": 1291, "user_id": 2813071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4314026cf587ea9b3947ed1b0437857d?s=128&d=identicon&r=PG", "display_name": "hahcho", "link": "https://stackoverflow.com/users/2813071/hahcho"}, "edited": false, "score": 0, "creation_date": 1472736789, "post_id": 39258019, "comment_id": 65880468, "body": "You give the real site url because now there is no way to know that the site does not use Ajax calls or submiting forms or using javascript to render the page. Be aware that Mechanize does not execute js."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 1, "creation_date": 1472770407, "post_id": 39258019, "comment_id": 65898431, "body": "instead of page2, page3, page4 consider organizing it into methods, otherwise you&#39;ll go crazy"}], "owner": {"reputation": 1705, "user_id": 1060070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/30fc2666127827c20a1bef8802c5e755?s=128&d=identicon&r=PG", "display_name": "mamesaye", "link": "https://stackoverflow.com/users/1060070/mamesaye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472742410, "creation_date": 1472673482, "last_edit_date": 1472742410, "question_id": 39258019, "link": "https://stackoverflow.com/questions/39258019/ruby-mechanize-get-all-the-link-in-a-website-that-have-a-specific-word", "title": "ruby mechanize get all the link in a website that have a specific word", "body": "<p>I want to crawl a site but it just stop at the URL I give mechanize and it does not do a recursive crawl. The informations needed is on the 3rd level. first level has a calendar where each day is a link. The second level is the day of the month and the third level is the informations I need which is in the body (text).<br>\nThe links are 3 level deep:   </p>\n\n<p>_ calendar page        (1st level)<br>\n    <a href=\"https://i.stack.imgur.com/QkdhM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QkdhM.png\" alt=\"enter image description here\"></a>     </p>\n\n<p>____ day of the month  (2nd level)<br>\n   <a href=\"https://i.stack.imgur.com/XW2EP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XW2EP.png\" alt=\"enter image description here\"></a>     </p>\n\n<p>________ page with infos/text (3rd level)</p>\n\n<p>I don't go past the 1st page/level.    </p>\n\n<p>Here is my code :   </p>\n\n<pre><code>agent = Mechanize.new\npage = agent.get('http://mywebsite.com/calendarPageWithLinks.htm')\nputs page.title\npage.links.each do |link|\n    puts link.text\n    puts link.href\nend\n</code></pre>\n\n<p><strong>UPDATE</strong><br>\nI were able to access the different levels. Here the code used (it is not optimal).   </p>\n\n<pre><code>page.links.each do |link|\nputs \"--------------------------------- LEVEL 1 --------------------------------------------------\"\nputs link.text\nputs link.href\nif page2 = agent2.get(link.href)\nputs \"--------------------------------- LEVEL 2 --------------------------------------------------\"\n\npage2.links.each do |link2|\nputs \" ****** #{link2.text}\"\nputs \" ****** #{link2.href}\"\n    if page3 = agent3.get(link2.href)\n        puts \"--------------------------------- LEVEL 3 --------------------------------------------------\"\n        page3.links.each do |link3|\n            name = link3.href\n        if name.to_s.include? 'mailto:'\n            puts \" --------- #{link3.text}\"\n            puts \" --------- #{link3.href}\"\n        else\n        puts \" --------- #{link3.text}\"\n        puts \" --------- #{link3.href}\"\n            if page4 = agent4.get(link3.href)\n                puts \"--------------------------------- LEVEL 4 --------------------------------------------------\"\n                page4.links.each do |link4|\n                    puts \" +++++++++ #{link4.text}\"\n                    puts \" +++++++++ #{link4.href}\"\n                    name = link4.href\n                    if name.to_s.include? 'www.somesite.com'    \n                        puts \" ///////////// GOT IT !!!! /////////// #{link4.href}\"\n                        counterInfo += 1\n                    end\n                end\n                puts \" -----------------PAGE4 \"\n            end\n        end\n        end\n        puts \" -----------------PAGE3 \"\n    end\n    puts \" ***********PAGE2  \"\nend\nend\n\n puts \" counterInfo =  #{counterInfo} \"   \n end   \n</code></pre>\n"}, {"tags": ["ruby", "faraday", "unix-socket"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472671629, "post_id": 39257339, "comment_id": 65851052, "body": "If you&#39;re going to split arguments up over several lines use the regular brackets <code>(...)</code> to encapsulate those. The backslash here is highly irregular."}], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 832307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf687b7e2571caf63dbac5e257c1f4f?s=128&d=identicon&r=PG", "display_name": "a0s", "link": "https://stackoverflow.com/users/832307/a0s"}, "edited": false, "score": 0, "creation_date": 1561542374, "post_id": 39302283, "comment_id": 100095211, "body": "We have two options to fix this: 1) Fix UNIX_REGEXP   in <a href=\"https://github.com/puppetlabs/net_http_unix/blob/master/lib/net_x/http_unix.rb\" rel=\"nofollow noreferrer\">github.com/puppetlabs/net_http_unix/blob/master/lib/net_x/&hellip;</a> - add testing for file:// too or 2) Fix (or monkey patch) URI#to_s because it knows about file:// and postgres:// only - so you could make PR to ruby repo"}], "tags": [], "owner": {"reputation": 839, "user_id": 534458, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a64b086b589817d904b906acdbcd673?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/534458/aaron"}, "is_accepted": false, "score": 0, "last_activity_date": 1472863670, "creation_date": 1472863670, "answer_id": 39302283, "question_id": 39257339, "link": "https://stackoverflow.com/questions/39257339/using-faraday-to-make-http-requests-over-a-unix-socket/39302283#39302283", "title": "Using Faraday to make HTTP requests over a Unix socket", "body": "<p>After much looking around, the above code is actually perfectly fine!</p>\n\n<p>I was having problems because of how Ruby's <code>URI.parse</code> works. My URI was in the form of <code>unix:///path/to/socket</code>, which <code>URI.parse</code> parses to <code>unix:/path/to/socket</code>, which Net::Http::Unix in turn didn't parse as a Unix socket URL, because it expects a Unix socket URI to begin with <code>unix://</code>.</p>\n\n<p>The solution ended up being to use five slashes in my path, like so: <code>unix://///path/to/socket</code>. When you do this, <code>URI.parse</code> parses it to <code>unix:///path/to/socket</code>, <code>net_http_unix</code> sees that it starts with <code>unix://</code> and strips that part off, leaving <code>/path/to/socket</code> which we can connect to. </p>\n\n<p>In my case I was specifying an absolute path; if I had been using a relative path I may have been okay with <code>unix://relative/path/to/socket</code>.</p>\n\n<p>One caveat about my above code: the 4th argument to <code>Net::HttpGenericRequest.new</code> is just \"/\". That is suitable for me because I'm using RPC over HTTP which never has a relative URI; if you have those in your app or service you'll need a way to take the URI and separate the socket path from the relative path.</p>\n"}], "owner": {"reputation": 839, "user_id": 534458, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a64b086b589817d904b906acdbcd673?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/534458/aaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 464, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1472863670, "creation_date": 1472670800, "question_id": 39257339, "link": "https://stackoverflow.com/questions/39257339/using-faraday-to-make-http-requests-over-a-unix-socket", "title": "Using Faraday to make HTTP requests over a Unix socket", "body": "<p>I tried putting together a custom Faraday adapter to make HTTP requests using a Unix socket using NetX::HTTPUnix. The code looks like this:</p>\n\n<pre><code>module Faraday\n  class Adapter\n    class NetHttpUnix &lt; Faraday::Adapter::NetHttp\n      def perform_request(http, env)\n        if :get == env[:method] and !env[:body]\n          # prefer `get` to `request` because the former handles gzip (ruby 1.9)\n          http.get env[:url], env[:request_headers]\n        else\n          http.request create_request(env)\n        end\n      end\n\n      def create_request(env)\n        request = Net::HTTPGenericRequest.new \\\n          env[:method].to_s.upcase,    # request method\n          !!env[:body],                # is there request body\n          :head != env[:method],       # is there response body\n          \"/\",                   # request uri path (i'm just hard coding / because URI::Generic doesn't have a uri_path method\n          env[:request_headers]        # request headers\n\n        if env[:body].respond_to?(:read)\n          request.body_stream = env[:body]\n        else\n          request.body = env[:body]\n        end\n        request\n      end\n\n\n      def net_http_connection(env)\n        socket = env[:url].to_s\n        NetX::HTTPUnix.new(socket)\n      end\n    end\n  end\nend\n\nFaraday::Adapter.register_middleware net_http_unix: Faraday::Adapter::NetHttpUnix\n</code></pre>\n\n<p>However, when I try making a request with this adapter, I get a Faraday::ConnectionError. When I look at the exception backtrace I see that the code is attempting to open a TCP socket in http.rb. </p>\n\n<p>Does there exist a Faraday adapter already that works with Unix sockets? I don't want to reinvent the wheel here.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "documentation-generation", "annotate", "yard"], "answers": [{"tags": [], "owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "is_accepted": true, "score": 0, "last_activity_date": 1472670642, "creation_date": 1472670642, "answer_id": 39257295, "question_id": 39257294, "link": "https://stackoverflow.com/questions/39257294/how-do-i-get-annotate-models-gem-to-work-with-yard-in-markdown/39257295#39257295", "title": "How do I get `annotate_models` gem to work with yard in markdown?", "body": "<p>Annotate generates markdown compatible with <code>kramdown</code>, hence specifying <code>--markup markdown --markup-provider kramdown</code> in <code>.yardopts</code> fixes this.</p>\n\n<p>Here's the fixed render:</p>\n\n<p><a href=\"https://i.stack.imgur.com/q75hH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q75hH.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 39257295, "answer_count": 1, "score": 0, "last_activity_date": 1472670642, "creation_date": 1472670642, "question_id": 39257294, "link": "https://stackoverflow.com/questions/39257294/how-do-i-get-annotate-models-gem-to-work-with-yard-in-markdown", "title": "How do I get `annotate_models` gem to work with yard in markdown?", "body": "<p>How do I get <code>annotate_models</code> gem to work with yard in markdown?</p>\n\n<p>At the moment, I specify <code>--markup markdown</code> in <code>.yardopts</code> and use the following in <code>auto_annotate_models.rake</code>:</p>\n\n<pre><code>'format_markdown'         =&gt; 'true'\n</code></pre>\n\n<p>However, the markdown renders very weirdly. Here's how the file looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3qLeu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3qLeu.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 329, "user_id": 1919995, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/59f2e666102af47b6d8e989f7f435327?s=128&d=identicon&r=PG", "display_name": "Muhammad Yaseen", "link": "https://stackoverflow.com/users/1919995/muhammad-yaseen"}, "edited": false, "score": 0, "creation_date": 1472668949, "post_id": 39256557, "comment_id": 65849476, "body": "Try changing gem &#39;rails&#39;, &#39;4.2.4&#39; to gem &#39;rails&#39;, &#39;5&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6779432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23754e9b93e7678bfd80fcac1b867416?s=128&d=identicon&r=PG&f=1", "display_name": "Two Chainz", "link": "https://stackoverflow.com/users/6779432/two-chainz"}, "edited": false, "score": 0, "creation_date": 1472671217, "post_id": 39256638, "comment_id": 65850820, "body": "Is there an alternative to upgrading to rails 5?"}, {"owner": {"reputation": 1308, "user_id": 2212311, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0SVoC.jpg?s=128&g=1", "display_name": "shlajin", "link": "https://stackoverflow.com/users/2212311/shlajin"}, "reply_to_user": {"reputation": 1, "user_id": 6779432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23754e9b93e7678bfd80fcac1b867416?s=128&d=identicon&r=PG&f=1", "display_name": "Two Chainz", "link": "https://stackoverflow.com/users/6779432/two-chainz"}, "edited": false, "score": 0, "creation_date": 1472709690, "post_id": 39256638, "comment_id": 65862740, "body": "Not really, that one of the killer features of Rails 5... You can try to integrate <code>faye</code> right into the app, but it will require you to have a threaded server, such as <code>thin</code>. In most cases the most simple solution is to use a node.js app which serves the websockets and communicate to rails app (the most easy solution is by using some pub/sub technology... for instance, redis offers that)"}], "tags": [], "owner": {"reputation": 1308, "user_id": 2212311, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0SVoC.jpg?s=128&g=1", "display_name": "shlajin", "link": "https://stackoverflow.com/users/2212311/shlajin"}, "is_accepted": false, "score": 0, "last_activity_date": 1472668268, "creation_date": 1472668268, "answer_id": 39256638, "question_id": 39256557, "link": "https://stackoverflow.com/questions/39256557/sprocketsfilenotfound-at-couldnt-find-file-action-cable-with-type-applic/39256638#39256638", "title": "Sprockets::FileNotFound at / couldn&#39;t find file &#39;action_cable&#39; with type &#39;application/javascript&#39;", "body": "<p>ActionCable is a feature of Rails 5, but you specified Rails 4 in your Gemfile</p>\n"}, {"comments": [{"owner": {"reputation": 134, "user_id": 752076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b06c0083da96fe3dbda135161f744124?s=128&d=identicon&r=PG", "display_name": "fenton", "link": "https://stackoverflow.com/users/752076/fenton"}, "edited": false, "score": 0, "creation_date": 1495641108, "post_id": 40579786, "comment_id": 75342980, "body": "Thanks. I just needed a downgrade from Rails 5 to 4 (trying to use jruby with postgres... #pita) and this has saved my bacon!"}], "tags": [], "owner": {"reputation": 2845, "user_id": 5532671, "user_type": "registered", "profile_image": "https://graph.facebook.com/160510107633628/picture?type=large", "display_name": "Anton Nikiforov", "link": "https://stackoverflow.com/users/5532671/anton-nikiforov"}, "is_accepted": false, "score": 3, "last_activity_date": 1479078156, "creation_date": 1479078156, "answer_id": 40579786, "question_id": 39256557, "link": "https://stackoverflow.com/questions/39256557/sprocketsfilenotfound-at-couldnt-find-file-action-cable-with-type-applic/40579786#40579786", "title": "Sprockets::FileNotFound at / couldn&#39;t find file &#39;action_cable&#39; with type &#39;application/javascript&#39;", "body": "<p>SHORT ANSWER:</p>\n\n<p>Just delete <em>cable.js</em> in <em>/app/assets/javascripts/</em> and that should fix the problem. </p>\n\n<p>LONG ANSWER:</p>\n\n<p>To make sure you don't have this problem reappearing, here's a bit of retrospective speculation.</p>\n\n<p>My guess is that you have RoR 5.x installed in your system globally, and after you generated what you thought was a 4.x RoR app using </p>\n\n<pre><code>#rails _4.x.x_ new app_name\n</code></pre>\n\n<p>you ended up having a 5.x RoR app instead. Now, even if you manually update Gemfile indicating that you need rails 4.x.x, your project will \nstill have some leftovers, one of which being a cable.js file. That's how I think you got the error you see.</p>\n\n<p>Now, how to avoid this. From what I understand, the above method of enforcing the older rails version is undocumented and not always works. Here's another method that surely works.</p>\n\n<p>Suppose you have a 5.x RoR installed globally and want to enforce RoR v.4.x.x for a project called rails4_app, then:</p>\n\n<pre><code>#mkdir rails4_app\n#cd rails4_app\n#echo \"source 'https://rubygems.org'\" &gt; Gemfile\n#echo \"gem 'rails', '3.2.17'\" &gt;&gt; Gemfile\n#bundle install\n#bundle exec rails new . --force --skip-bundle\n#bundle update\n</code></pre>\n\n<p>And here you go - now you have your rails 4.x.x app bootstrapped.</p>\n"}], "owner": {"reputation": 1, "user_id": 6779432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23754e9b93e7678bfd80fcac1b867416?s=128&d=identicon&r=PG&f=1", "display_name": "Two Chainz", "link": "https://stackoverflow.com/users/6779432/two-chainz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2932, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479078156, "creation_date": 1472667985, "question_id": 39256557, "link": "https://stackoverflow.com/questions/39256557/sprocketsfilenotfound-at-couldnt-find-file-action-cable-with-type-applic", "title": "Sprockets::FileNotFound at / couldn&#39;t find file &#39;action_cable&#39; with type &#39;application/javascript&#39;", "body": "<p>New to ROR and working through a sample page but am experiencing the following error when I go to localhost:3000</p>\n\n<p><strong>couldn't find file 'action_cable' with type 'application/javascript'\n   Checked in these paths: &lt;...></strong></p>\n\n<p>I'm not sure what is causing this/how to fix but if I add \"layout false\" to my controller file then everything works ok.  Below are the files:</p>\n\n<p>Here is my gem file:</p>\n\n<pre><code>source 'https://rubygems.org'\nruby '2.3.0'\ngem 'rails', '4.2.4'\n\n# Rails defaults\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'byebug'\ngem 'web-console'\ngem 'spring'\ngem 'foundation-rails', '~&gt; 5.5'\ngem 'gibbon'\ngem 'high_voltage'\ngem 'simple_form'\ngroup :development do\n  gem 'better_errors'\n  gem 'quiet_assets'\n  gem 'rails_layout'\nend\ngem 'sqlite3'\ngroup :production do\n  gem 'pg'\n  gem 'rails_12factor'\nend\n</code></pre>\n\n<p>View file:</p>\n\n<pre><code> &lt;h1&gt;Home&lt;/h1&gt;\n &lt;p&gt;Welcome to the home of &lt;%= @owner.name %&gt;. &lt;/p&gt;\n &lt;p&gt;I was born on &lt;%= @owner.birthdate %&gt;\n &lt;p&gt;Only &lt;%= @owner.countdown %&gt; days until my birthday!&lt;/p&gt;\n</code></pre>\n\n<p>Model File:</p>\n\n<pre><code>class Owner\n    def name\n            name = 'Foobar Radigan'\n    end\n\n        def birthdate\n            birthdate = Date.new(1990,12,22)\n        end\n\n        def countdown\n                today = Date.today\n                birthday = Date.new(today.year, birthdate.month, birthdate.day)\n                if birthday &gt; today\n                        countdown = (birthday - today).to_i\n                else\n                        countdown = (birthday.next_year - today).to_i\n                end\n        end\n\nend\n</code></pre>\n\n<p>Controller file:</p>\n\n<pre><code> class VisitorsController &lt; ApplicationController\n        # Do not use layout\n        # layout false\n\n    def new\n            Rails.logger.debug 'DEBUG: entering new method'\n            @owner = Owner.new\n            render 'visitors/new'\n            Rails.logger.debug 'DEBUG: owner name is ' + @owner.name\n    end\n\nend\n</code></pre>\n\n<p>*Note that if uncomment the 'layout false' line everything works, but I have no layout.</p>\n"}, {"tags": ["json", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "is_accepted": true, "score": 2, "last_activity_date": 1472669143, "last_edit_date": 1472669143, "creation_date": 1472668202, "answer_id": 39256616, "question_id": 39256509, "link": "https://stackoverflow.com/questions/39256509/how-to-parse-and-iterate-a-json-using-ruby/39256616#39256616", "title": "how to parse and iterate a json using ruby", "body": "<p>Hopefully this code is self-explanatory:</p>\n\n<pre><code>require 'URI'\nrequire 'json'\n\nentries = JSON.parse(File.read('input.json'))\nentries.reject { |entry| entry[\"disabled\"] }.each do |entry|\n  puts URI::Generic.build({\n    :scheme =&gt; entry[\"scheme\"],\n    :host =&gt; entry[\"domain_name\"],\n    :fragment =&gt; entry[\"fragment\"],\n    :query =&gt; entry[\"query\"] &amp;&amp; URI.encode_www_form(entry[\"query\"]),\n    :path =&gt; entry[\"path\"] &amp;&amp; (\"/\" + entry[\"path\"])\n  }).to_s\nend\n\n# Output:\n# http://www.example.com/path/to/file#header2\n# https://www.stack.org/some/path?key1=val1&amp;key2=val2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1472668940, "creation_date": 1472668940, "answer_id": 39256831, "question_id": 39256509, "link": "https://stackoverflow.com/questions/39256509/how-to-parse-and-iterate-a-json-using-ruby/39256831#39256831", "title": "how to parse and iterate a json using ruby", "body": "<p>The first step is to turn this JSON into Ruby data:</p>\n\n<pre><code>require 'json'\n\ndata = JSON.load(DATA)\n</code></pre>\n\n<p>Then you need to iterate over this and reject all those that are flagged as disabled:</p>\n\n<pre><code>data.reject do |entry|\n  entry['disabled']\nend\n</code></pre>\n\n<p>Which you can chain together with an operation that leverages the URI library to build your output:</p>\n\n<pre><code>require 'uri'\n\nuris = data.reject do |entry|\n  entry['disabled']\nend.map do |entry|\n  case (entry['scheme'])\n  when 'https'\n    URI::HTTPS\n  else\n    URI::HTTP\n  end.build(\n    host: entry['domain_name'],\n    path: normalized_path(entry['path']), \n    query: entry['query'] &amp;&amp; URI.encode_www_form(entry['query'])\n  ).to_s\nend\n\n#=&gt; [\"http://www.example.com/path/to/file\", \"http://www.stack.org/some/path?key1=val1&amp;key2=val2\"]\n</code></pre>\n\n<p>This requires a function called <code>normalized_path</code> to deal with <code>nil</code> or invalid paths and fix them:</p>\n\n<pre><code>def normalized_path(path)\n  case (path and path[0,1])\n  when nil\n    '/'\n  when '/'\n    path\n  else\n    \"/#{path}\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2458, "user_id": 2136297, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/IcIiZ.jpg?s=128&g=1", "display_name": "satch_boogie", "link": "https://stackoverflow.com/users/2136297/satch-boogie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 39256616, "answer_count": 2, "score": -2, "last_activity_date": 1472669143, "creation_date": 1472667772, "question_id": 39256509, "link": "https://stackoverflow.com/questions/39256509/how-to-parse-and-iterate-a-json-using-ruby", "title": "how to parse and iterate a json using ruby", "body": "<p>Im a beginner with ruby and learning to iterate and parse json file. The contents inside input.json</p>\n\n<pre><code>[\n {\n        \"scheme\": \"http\",\n        \"domain_name\": \"www.example.com\",\n        \"path\": \"path/to/file\",\n        \"fragment\": \"header2\"\n    },\n    {\n        \"scheme\": \"http\",\n        \"domain_name\": \"www.example2.org\",\n        \"disabled\": true\n    },\n    {\n        \"scheme\": \"https\",\n        \"domain_name\": \"www.stack.org\",\n        \"path\": \"some/path\",\n        \"query\": {\n            \"key1\": \"val1\",\n            \"key2\": \"val2\"\n        }\n    }\n]\n</code></pre>\n\n<p>ho do I parse print the output as:</p>\n\n<pre><code>http://www.example.com/path/to/file#header2\nhttps://www.stack.org/some/path?key1=val1&amp;key2=val2\n</code></pre>\n\n<p>Any learning references would be very helpful.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1472675135, "post_id": 39256308, "comment_id": 65852840, "body": "Keep in mind that, prior to Ruby v1.9, there was no concept of hash keys having order, so if you only have the index into the array <code>hash.keys</code>, there&#39;s nothing you can do to make it work with pre-1.9 Ruby. Even if that&#39;s not a problem, I suggest you see if you can rework your code so you don&#39;t find yourself in that situation."}, {"owner": {"reputation": 1952, "user_id": 1567269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7e5ef5c449437de2befaf4851a80d2a4?s=128&d=identicon&r=PG", "display_name": "trueCamelType", "link": "https://stackoverflow.com/users/1567269/truecameltype"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1472675488, "post_id": 39256308, "comment_id": 65853014, "body": "Excellent suggestion.  Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 9254, "user_id": 625365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ab819ffb4ef53da36f840e46dd72e967?s=128&d=identicon&r=PG", "display_name": "spike", "link": "https://stackoverflow.com/users/625365/spike"}, "edited": false, "score": 1, "creation_date": 1472667405, "post_id": 39256402, "comment_id": 65848656, "body": "Ruby hashes aren&#39;t exactly sorted \u2013 they&#39;re ordered and retain insertion order."}, {"owner": {"reputation": 1952, "user_id": 1567269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7e5ef5c449437de2befaf4851a80d2a4?s=128&d=identicon&r=PG", "display_name": "trueCamelType", "link": "https://stackoverflow.com/users/1567269/truecameltype"}, "edited": false, "score": 0, "creation_date": 1472667822, "post_id": 39256402, "comment_id": 65848848, "body": "I&#39;m editing someone else&#39;s code, and they used a hash that never has more than one value, so ordering isn&#39;t a problem in this case, but thanks for pointing that out.  Also, not sure who downvoted.  I&#39;ll give it a try in a bit"}, {"owner": {"reputation": 642, "user_id": 4745520, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10200391026893649/picture?type=large", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4745520/jeff"}, "reply_to_user": {"reputation": 9254, "user_id": 625365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ab819ffb4ef53da36f840e46dd72e967?s=128&d=identicon&r=PG", "display_name": "spike", "link": "https://stackoverflow.com/users/625365/spike"}, "edited": false, "score": 1, "creation_date": 1472668505, "post_id": 39256402, "comment_id": 65849229, "body": "@spike hence the words <i>I&#39;m not entirely sure</i>. Im sorry for my verbiage but I wanted to inform the OP to be careful since hashes/lists are not always &#39;ordered&#39; in every language. I&#39;ll update my answer to be more clear."}, {"owner": {"reputation": 9254, "user_id": 625365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ab819ffb4ef53da36f840e46dd72e967?s=128&d=identicon&r=PG", "display_name": "spike", "link": "https://stackoverflow.com/users/625365/spike"}, "edited": false, "score": 0, "creation_date": 1476535273, "post_id": 39256402, "comment_id": 67392626, "body": "@Jeff sorry if the tone came across poorly in text! Just trying to help clarify."}], "tags": [], "owner": {"reputation": 642, "user_id": 4745520, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10200391026893649/picture?type=large", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4745520/jeff"}, "is_accepted": true, "score": 1, "last_activity_date": 1472668563, "last_edit_date": 1472668563, "creation_date": 1472667298, "answer_id": 39256402, "question_id": 39256308, "link": "https://stackoverflow.com/questions/39256308/how-can-i-replace-a-single-hash-value-in-ruby-by-using-its-number/39256402#39256402", "title": "How can I replace a single Hash Value in Ruby by using its number", "body": "<p>You can do <code>hashOne[hashOne.keys[3]] = 'rubypro'</code>. Also I remember reading that Hashes in ruby are ordered but I'm not entirely sure. (Be careful with using indices because  they may not be ordered in other languages) I would ensure that the keys are always returned in the same order before trying to assign a key with an index. </p>\n\n<p>If you really wanted to use an index, I'd recommend using an array because that's not the purpose of a key/value hash.</p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1472669499, "post_id": 39256404, "comment_id": 65849830, "body": "This creates a new key-value pair: <code>hashOne #=&gt; {&quot;dog&quot;=&gt;&quot;canine&quot;, &quot;cat&quot;=&gt;&quot;feline&quot;, &quot;me&quot;=&gt;&quot;rubynooby&quot;, nil=&gt;&quot;rubypro&quot;}</code>"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1472670609, "post_id": 39256404, "comment_id": 65850491, "body": "@sagarpandya82 good catch.. updated my answer. hope it works!!"}], "tags": [], "owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "is_accepted": false, "score": 1, "last_activity_date": 1472670517, "last_edit_date": 1472670517, "creation_date": 1472667315, "answer_id": 39256404, "question_id": 39256308, "link": "https://stackoverflow.com/questions/39256308/how-can-i-replace-a-single-hash-value-in-ruby-by-using-its-number/39256404#39256404", "title": "How can I replace a single Hash Value in Ruby by using its number", "body": "<p>You can try this:</p>\n\n<pre><code>hashOne[hashOne.keys.unshift('')[3]] = \"rubypro\"\n</code></pre>\n"}], "owner": {"reputation": 1952, "user_id": 1567269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7e5ef5c449437de2befaf4851a80d2a4?s=128&d=identicon&r=PG", "display_name": "trueCamelType", "link": "https://stackoverflow.com/users/1567269/truecameltype"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3509, "favorite_count": 0, "accepted_answer_id": 39256402, "answer_count": 2, "score": 2, "last_activity_date": 1472670517, "creation_date": 1472666941, "last_edit_date": 1472667289, "question_id": 39256308, "link": "https://stackoverflow.com/questions/39256308/how-can-i-replace-a-single-hash-value-in-ruby-by-using-its-number", "title": "How can I replace a single Hash Value in Ruby by using its number", "body": "<p>A fairly simple question, but I don't see it anywhere on SO, and I'm a Ruby noob.</p>\n\n<p>In Ruby, if I have a hash, similar to this.</p>\n\n<pre><code>hashOne = {'dog' =&gt; 'canine', 'cat' =&gt; 'feline', 'me' =&gt; 'rubynooby'}\n</code></pre>\n\n<p>And let's assume that I want to replace the value a couple of different ways.</p>\n\n<p><strong>Method 1</strong></p>\n\n<p>Let's say I want to replace the value of <code>me</code> with <code>rubypro</code>.  I've seen this done this way:</p>\n\n<pre><code>hashOne[:me] = \"rubypro\"\n</code></pre>\n\n<p>but I haven't seen a solution to replacing the value by which number it is, for example, let's assume that I always want to change the 3rd key (and assuming it starts on 1 and not 0)</p>\n\n<p><strong>Method 2</strong> - These don't work</p>\n\n<pre><code>hashOne[3] = \"rubypro\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>hashOne.values[3] = \"rubypro\"\n</code></pre>\n\n<p>I haven't seen any examples of this, or a question about it on SO.  Can someone point me in that direction?</p>\n\n<p>The reason I was trying to work on this, is because I have a Hash, where I don't know what the key is, but I know what I want the value to be.  It's weird, but that's where I'm at.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 6080426, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1161627533870442/picture?type=large", "display_name": "Kevin", "link": "https://stackoverflow.com/users/6080426/kevin"}, "edited": false, "score": 0, "creation_date": 1472665431, "post_id": 39255797, "comment_id": 65847516, "body": "Sure, but I don&#39;t know that the User model is being used by Devise. I found that if I do &quot;rails g devise somemodelname&quot; then I get a new model that seems to work. Maybe someone knows whether this is incorrect/correct practice?"}, {"owner": {"reputation": 1, "user_id": 2968185, "user_type": "registered", "profile_image": "https://graph.facebook.com/1742428437/picture?type=large", "display_name": "pankaj", "link": "https://stackoverflow.com/users/2968185/pankaj"}, "reply_to_user": {"reputation": 167, "user_id": 6080426, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1161627533870442/picture?type=large", "display_name": "Kevin", "link": "https://stackoverflow.com/users/6080426/kevin"}, "edited": false, "score": 0, "creation_date": 1472665890, "post_id": 39255797, "comment_id": 65847813, "body": "Yes, <code>rails generate devise MODEL</code> can be used to create new user modal having devise. but  in your code &#39;admin_users&#39; has devise enabled."}], "tags": [], "owner": {"reputation": 1, "user_id": 2968185, "user_type": "registered", "profile_image": "https://graph.facebook.com/1742428437/picture?type=large", "display_name": "pankaj", "link": "https://stackoverflow.com/users/2968185/pankaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1472665074, "creation_date": 1472665074, "answer_id": 39255797, "question_id": 39255694, "link": "https://stackoverflow.com/questions/39255694/how-to-use-a-different-model-than-users-with-devise/39255797#39255797", "title": "How to Use a different model than Users with devise", "body": "<p>There is on need to have different user model, you can have role in user modal to differentiate campaign, client and admin user.</p>\n"}, {"tags": [], "owner": {"reputation": 1308, "user_id": 2212311, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0SVoC.jpg?s=128&g=1", "display_name": "shlajin", "link": "https://stackoverflow.com/users/2212311/shlajin"}, "is_accepted": false, "score": 0, "last_activity_date": 1472667041, "creation_date": 1472667041, "answer_id": 39256334, "question_id": 39255694, "link": "https://stackoverflow.com/questions/39255694/how-to-use-a-different-model-than-users-with-devise/39256334#39256334", "title": "How to Use a different model than Users with devise", "body": "<p>If you need to have a functionality of devise in both models - it looks like you need a double devise. Since your regular <code>User</code> and <code>AdminUser</code> are totally different you can not really use STI (single table inheritance) or plain <code>role</code> attribute on the model. Basically, double devise means you can login into both accounts even simultaneously.</p>\n\n<p>If you just need to have a different devise model, then refer to the docs:\n<a href=\"http://devise.plataformatec.com.br/#configuring-models\" rel=\"nofollow\">http://devise.plataformatec.com.br/#configuring-models</a></p>\n\n<p>Simply run</p>\n\n<p><code>\nrails generate devise AdminUser\n</code></p>\n\n<p>and it will do the job for you. To get the instance of current user in controller use <code>current_admin_user</code> instead of <code>current_user</code> (works with other methods too, such as <code>user_session</code> -> <code>admin_user_session</code>)</p>\n"}, {"comments": [{"owner": {"reputation": 167, "user_id": 6080426, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1161627533870442/picture?type=large", "display_name": "Kevin", "link": "https://stackoverflow.com/users/6080426/kevin"}, "edited": false, "score": 0, "creation_date": 1472667527, "post_id": 39256380, "comment_id": 65848711, "body": "This is what I ended up doing/needing to do. Will update if this turns out to not be the case. Marking correct."}], "tags": [], "owner": {"reputation": 69, "user_id": 6775650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a3e2a490b75d038c928503f5f81f089?s=128&d=identicon&r=PG&f=1", "display_name": "deepanshu gupta", "link": "https://stackoverflow.com/users/6775650/deepanshu-gupta"}, "is_accepted": true, "score": 2, "last_activity_date": 1472667234, "creation_date": 1472667234, "answer_id": 39256380, "question_id": 39255694, "link": "https://stackoverflow.com/questions/39255694/how-to-use-a-different-model-than-users-with-devise/39256380#39256380", "title": "How to Use a different model than Users with devise", "body": "<p>You can create any number of devise models. Just the names of helper functions change like if you do</p>\n\n<pre><code>rails generate devise User\n</code></pre>\n\n<p>then helper functions will be</p>\n\n<pre><code>before_action :authenticate_user!\ncurrent_user\nuser_signed_in?\n</code></pre>\n\n<p>But if you do </p>\n\n<pre><code>rails generate devise Admin\n</code></pre>\n\n<p>then helper functions will be</p>\n\n<pre><code>before_action :authenticate_admin!\ncurrent_admin\nadmin_signed_in?\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 6080426, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1161627533870442/picture?type=large", "display_name": "Kevin", "link": "https://stackoverflow.com/users/6080426/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 39256380, "answer_count": 3, "score": 0, "last_activity_date": 1472667234, "creation_date": 1472664702, "question_id": 39255694, "link": "https://stackoverflow.com/questions/39255694/how-to-use-a-different-model-than-users-with-devise", "title": "How to Use a different model than Users with devise", "body": "<p>I have a rails application that creates a campaign that collects users emails and their IP. When this occurs, the information is used to create a User.</p>\n\n<p>However I need another user that can sign up and create an account to create and manage this campaign. I'm not exactly sure how to differentiate between the two as I am used to using only one User model.</p>\n\n<p>Below is the way its currently set up:</p>\n\n<p>Routes:</p>\n\n<pre><code>Name::Application.routes.draw do\n\n  ActiveAdmin.routes(self)\n\n  devise_for :admin_users, ActiveAdmin::Devise.config\n\n  root :to =&gt; \"users#new\"\n\n  post 'users/create' =&gt; 'users#create'\n  get 'refer-a-friend' =&gt; 'users#refer'\n  get 'privacy-policy' =&gt; 'users#policy'\n\n  unless Rails.application.config.consider_all_requests_local\n    get '*not_found', to: 'users#redirect', :format =&gt; false\n  end\nend\n</code></pre>\n\n<p>Schema:</p>\n\n<pre><code># encoding: UTF-8\n# This file is auto-generated from the current state of the database. Instead\n# of editing this file, please use the migrations feature of Active Record to\n# incrementally modify your database, and then regenerate this schema definition.\n#\n# Note that this schema.rb definition is the authoritative source for your\n# database schema. If you need to create the application database on another\n# system, you should be using db:schema:load, not running all the migrations\n# from scratch. The latter is a flawed and unsustainable approach (the more migrations\n# you'll amass, the slower it'll run and the greater likelihood for issues).\n#\n# It's strongly recommended that you check this file into your version control system.\n\nActiveRecord::Schema.define(version: 20130312045541) do\n\n  # These are extensions that must be enabled in order to support this database\n  enable_extension \"plpgsql\"\n\n  create_table \"active_admin_comments\", force: :cascade do |t|\n    t.string   \"resource_id\",   null: false\n    t.string   \"resource_type\", null: false\n    t.integer  \"author_id\"\n    t.string   \"author_type\"\n    t.text     \"body\"\n    t.datetime \"created_at\",    null: false\n    t.datetime \"updated_at\",    null: false\n    t.string   \"namespace\"\n  end\n\n  add_index \"active_admin_comments\", [\"author_type\", \"author_id\"], name: \"index_active_admin_comments_on_author_type_and_author_id\", using: :btree\n  add_index \"active_admin_comments\", [\"namespace\"], name: \"index_active_admin_comments_on_namespace\", using: :btree\n  add_index \"active_admin_comments\", [\"resource_type\", \"resource_id\"], name: \"index_active_admin_comments_on_resource_type_and_resource_id\", using: :btree\n\n  create_table \"admin_users\", force: :cascade do |t|\n    t.string   \"email\",                  default: \"\", null: false\n    t.string   \"encrypted_password\",     default: \"\", null: false\n    t.string   \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",          default: 0\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.datetime \"created_at\",                          null: false\n    t.datetime \"updated_at\",                          null: false\n  end\n\n  add_index \"admin_users\", [\"email\"], name: \"index_admin_users_on_email\", unique: true, using: :btree\n  add_index \"admin_users\", [\"reset_password_token\"], name: \"index_admin_users_on_reset_password_token\", unique: true, using: :btree\n\n  create_table \"delayed_jobs\", force: :cascade do |t|\n    t.integer  \"priority\",   default: 0\n    t.integer  \"attempts\",   default: 0\n    t.text     \"handler\"\n    t.text     \"last_error\"\n    t.datetime \"run_at\"\n    t.datetime \"locked_at\"\n    t.datetime \"failed_at\"\n    t.string   \"locked_by\"\n    t.string   \"queue\"\n    t.datetime \"created_at\",             null: false\n    t.datetime \"updated_at\",             null: false\n  end\n\n  add_index \"delayed_jobs\", [\"priority\", \"run_at\"], name: \"delayed_jobs_priority\", using: :btree\n\n  create_table \"ip_addresses\", force: :cascade do |t|\n    t.string   \"address\"\n    t.integer  \"count\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"email\"\n    t.string   \"referral_code\"\n    t.integer  \"referrer_id\"\n    t.datetime \"created_at\",    null: false\n    t.datetime \"updated_at\",    null: false\n  end\n\nend\n</code></pre>\n\n<p>Let me know if more information is needed and I'll gladly update it.</p>\n"}, {"tags": ["ruby", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 2302, "user_id": 2054434, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e8f5c753d781ce498b857ec9b7ce366f?s=128&d=identicon&r=PG&f=1", "display_name": "PlayHardGoPro", "link": "https://stackoverflow.com/users/2054434/playhardgopro"}, "edited": false, "score": 0, "creation_date": 1472671884, "post_id": 39257435, "comment_id": 65851182, "body": "Just installed in a location without spaces and BINGo. Thanks, bro !   I thought I could work around spaces using ` &quot; &quot;  ` or `  &#39; &#39; `, but you cant ;p"}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1472671136, "creation_date": 1472671136, "answer_id": 39257435, "question_id": 39255672, "link": "https://stackoverflow.com/questions/39255672/my-path-bad-interpreter-no-such-file-or-directory/39257435#39257435", "title": "/My/path bad interpreter: No such file or directory", "body": "<p>Something wasn't prepared for a path with spaces in it. Spaces in paths are very common on Windows, but not at all common on Unix for this very reason.</p>\n\n<p>Bash was trying to run <code>/g/Arquivos e Programas/Ruby23-x64/bin/jekyll</code> which it interpreted as run the program <code>/g/Arquivos</code> with the arguments <code>e</code>, and <code>Programas/Ruby23-x64/bin/jekyll</code>. It would have to be quoted like, <code>'/g/Arquivos e Programas/Ruby23-x64/bin/jekyll'</code> or the spaces escaped like <code>/g/Arquivos\\ e\\ Programas/Ruby23-x64/bin/jekyll</code></p>\n\n<p>The simple fix is to install Ruby to a path with no spaces in it. Like <code>G:\\Ruby\\</code>.</p>\n\n<p>The proper fix... well, there's likely to be a TON of places which will be broken by a path with spaces in it. <a href=\"https://github.com/jekyll/jekyll/issues/new\" rel=\"nofollow\">Report the bug to jekyll</a>.</p>\n"}], "owner": {"reputation": 2302, "user_id": 2054434, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e8f5c753d781ce498b857ec9b7ce366f?s=128&d=identicon&r=PG&f=1", "display_name": "PlayHardGoPro", "link": "https://stackoverflow.com/users/2054434/playhardgopro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 39257435, "answer_count": 1, "score": 1, "last_activity_date": 1472671136, "creation_date": 1472664646, "last_edit_date": 1472670429, "question_id": 39255672, "link": "https://stackoverflow.com/questions/39255672/my-path-bad-interpreter-no-such-file-or-directory", "title": "/My/path bad interpreter: No such file or directory", "body": "<p>I just followed <a href=\"http://jekyll-windows.juthilo.com/3-syntax-highlighting/\" rel=\"nofollow\">This Guide</a>. </p>\n\n<p>Installed Jekyll:  </p>\n\n<pre><code>$ gem install jekyll\nSuccessfully installed jekyll-3.2.1\nParsing documentation for jekyll-3.2.1\nDone installing documentation for jekyll after 1 seconds\n1 gem installed\n</code></pre>\n\n<p>But now when I try to run a command from prompt such as:  </p>\n\n<p><code>jekyll</code> or <code>jekyll --help</code>. it gives that message:  </p>\n\n<blockquote>\n  <p>bash: /g/Arquivos e Programas/Ruby23-x64/bin/jekyll: \"G:/Arquivos: bad interpreter: No such file or directory  </p>\n</blockquote>\n\n<p>And if I go through that path, it has 2 files named <code>Jekyll</code>.<br>\nA normal file and a bash file.</p>\n\n<p>What's wrong ?</p>\n"}, {"tags": ["java", "ruby"], "comments": [{"owner": {"reputation": 1, "user_id": 4001311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0591e9fa2edae13281a3715e8a5c45c5?s=128&d=identicon&r=PG", "display_name": "Shmully Wolfson", "link": "https://stackoverflow.com/users/4001311/shmully-wolfson"}, "edited": false, "score": 0, "creation_date": 1472664907, "post_id": 39255565, "comment_id": 65847223, "body": "I&#39;m not familiar with Java but found <a href=\"http://stackoverflow.com/a/2086837/4001311\">this</a> answer, hope it helps!"}, {"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 1, "creation_date": 1472669314, "post_id": 39255565, "comment_id": 65849715, "body": "A word of advice: looking for similarities between a language you know and a language you are learning can be a dead end, often resulting in a non-idiomatic and ugly code in a new language. I would rather focus on particular problems and how you address them in different languages. Pick one problem that is usually solved with static variables in Java, then ask what&#39;s the right way to solve it in Ruby. The answer might be class variable, but more often would be something apparently unrelated."}, {"owner": {"reputation": 3131, "user_id": 2056448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ee46b8bbaa7a18cb68e55bb0e25ff194?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/2056448/casey"}, "edited": false, "score": 0, "creation_date": 1472697430, "post_id": 39255565, "comment_id": 65859487, "body": "No, but I had the same mistaken intuition so I feel you."}, {"owner": {"reputation": 3131, "user_id": 2056448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ee46b8bbaa7a18cb68e55bb0e25ff194?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/2056448/casey"}, "reply_to_user": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1472697555, "post_id": 39255565, "comment_id": 65859523, "body": "@MladenJablanovi\u0107 I think it&#39;s pretty much inevitable that you are going to carry your previous intuitions forward into a new language and while that can lead you astray it also saves you a lot of time in most cases."}, {"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "reply_to_user": {"reputation": 3131, "user_id": 2056448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ee46b8bbaa7a18cb68e55bb0e25ff194?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/2056448/casey"}, "edited": false, "score": 0, "creation_date": 1472717028, "post_id": 39255565, "comment_id": 65866693, "body": "@Casey: Agreed, I&#39;m just saying, when asking a question (on SO or elsewhere), better start with &quot;how do I <i>solve this problem</i> here&quot; than &quot;how do I <i>use language A feature</i> here&quot;. A kind of XY problem, I guess."}], "answers": [{"comments": [{"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1472717457, "post_id": 39255735, "comment_id": 65866943, "body": "I would also mention that ivars could also be set on a <i>class object</i>."}, {"owner": {"reputation": 553, "user_id": 1445986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b4d1041fb9cb5fb2ccf2caaf977567e?s=128&d=identicon&r=PG", "display_name": "ComDubh", "link": "https://stackoverflow.com/users/1445986/comdubh"}, "edited": false, "score": 0, "creation_date": 1537350049, "post_id": 39255735, "comment_id": 91749281, "body": "Global variables are indeed to be avoided, but class variables are a perfectly appropriate solution when state is to be shared among instances of a class and its subclasses."}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 3, "last_activity_date": 1472747024, "last_edit_date": 1472747024, "creation_date": 1472664839, "answer_id": 39255735, "question_id": 39255565, "link": "https://stackoverflow.com/questions/39255565/are-ruby-class-variables-similar-to-the-java-static-variables/39255735#39255735", "title": "Are Ruby class variables similar to the Java static variables?", "body": "<p>I'm not familiar with java, but I can explain in Ruby terms. </p>\n\n<p>In Ruby, class variables have <code>@@</code> before the variable name. It doesn't behave as you think it should. Once a class variable is created, it is shared among all the subclasses. It is not limited to the class you create it in.</p>\n\n<p>As for global variables, it has <code>$</code> before the variable name. It does exactly what it sounds like it does, it is global and can be access anywhere.</p>\n\n<p>Both of the variables are not recommended in Ruby. You can do what you need using instance variables, which has <code>@</code> before the name. It is specific to the object. If you declare it in one object, it will not show up in another. </p>\n\n<p>I hope this clears this up. </p>\n"}, {"comments": [{"owner": {"reputation": 4227, "user_id": 437506, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/1f81d6e639fd42098d15302f098f0531?s=128&d=identicon&r=PG&f=1", "display_name": "Kedar Mhaswade", "link": "https://stackoverflow.com/users/437506/kedar-mhaswade"}, "edited": false, "score": 0, "creation_date": 1472669102, "post_id": 39255960, "comment_id": 65849576, "body": "It&#39;s also worth mentioning the difference in the value of <code>self</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 4227, "user_id": 437506, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/1f81d6e639fd42098d15302f098f0531?s=128&d=identicon&r=PG&f=1", "display_name": "Kedar Mhaswade", "link": "https://stackoverflow.com/users/437506/kedar-mhaswade"}, "edited": false, "score": 0, "creation_date": 1472669666, "post_id": 39255960, "comment_id": 65849933, "body": "Good point. <code>self</code> is always the context you&#39;re in unless you go out of your way to rebind, so there&#39;s that too."}, {"owner": {"reputation": 3131, "user_id": 2056448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ee46b8bbaa7a18cb68e55bb0e25ff194?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/2056448/casey"}, "edited": false, "score": 1, "creation_date": 1472698514, "post_id": 39255960, "comment_id": 65859749, "body": "AFAIK the big issue with class variables isn&#39;t so much having information shared across instances (after all, the class method thing doesn&#39;t solve it) but that <a href=\"http://archive.oreilly.com/pub/post/nubygems_dont_use_class_variab_1.html\" rel=\"nofollow noreferrer\">they can bowl over each other in unexpected ways</a>."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1472665607, "creation_date": 1472665607, "answer_id": 39255960, "question_id": 39255565, "link": "https://stackoverflow.com/questions/39255565/are-ruby-class-variables-similar-to-the-java-static-variables/39255960#39255960", "title": "Are Ruby class variables similar to the Java static variables?", "body": "<p>There's a lot of similarity between Ruby and Java by virtue of them being object-oriented, but their family tree is different. Ruby leans very heavily on <a href=\"https://en.wikipedia.org/wiki/Smalltalk\" rel=\"nofollow\">Smalltalk</a> while Java inherits from the <a href=\"https://en.wikipedia.org/wiki/C%2B%2B\" rel=\"nofollow\">C++</a> school of thinking.</p>\n\n<p>The difference here is that Ruby's concept of public/private/protected is a lot weaker, they're more suggestions than rules, and things like static methods or constants are more of a pattern than a construct in the language.</p>\n\n<p>Global variables are frowned on quite heavily, they can cause chaos if used liberally. The Ruby way is to namespace things:</p>\n\n<pre><code>$ugly_global = 0  # Not recommended, could conflict with other code\n                  # Ownership of this variable isn't made clear.\n\n$ugly_global += 1 # Works, but again, it's without context.\n\nmodule UglyCounter    # Defines a module/namespace to live in\n  def self.current    # Defines a clear interface to this value\n    @counter ||= 0    # Initializes a local instance variable\n  end\n\n  def self.current=(v)   # Allow modification of this value\n    @counter = v.to_i    # A chance to perform any casting/cleaning\n  end\nend\n\nUglyCounter.current += 1   # Modifies the state of a variable, but\n                           # the context is made clear.\n</code></pre>\n\n<p>Even a thin layer like this module gives you the ability to intercept read/write operations from this variable and alter the behaviour. Maybe you want to default to a particular value or convert values into a normalized form. With a bare global you have to repeat this code everywhere. Here you can consolidate it.</p>\n\n<p>Class variables are a whole different thing. They're also best avoided because sharing data between the class and instances of this class can be messy. They're two different contexts and that separation should be respected.</p>\n\n<pre><code>class MessyClass\n  @@shared = 0\n\n  def counter\n    @@shared\n  end\n\n  def counter=(v)\n    @@shared = v\n  end\nend\n</code></pre>\n\n<p>This is a pretty rough take on how to use a shared class-level instance variable. The problem here is each instance is directly modifying it, bypassing the class context, which means the class is helpless. This is fundamentally rude, the instance is over-extending its authority. A better approach is this:</p>\n\n<pre><code>class CleanerClass\n  def self.counter\n    @counter ||= 0\n  end\n\n  def self.counter=(v)\n    @counter = v.to_i\n  end\n\n  # These are reduced to simple bridge methods, nothing more. Because\n  # they simply forward calls there's no breach of authority.\n  def counter\n    self.class.counter\n  end\n\n  def counter=(v)\n    self.class.counter = v\n  end\nend\n</code></pre>\n\n<p>In many languages a static class method becomes available in the scope of an instance automatically, but this is not the case in Ruby. You must write bridge/proxy/delegate methods, the terminology here varying depending on what you're used to.</p>\n"}, {"tags": [], "owner": {"reputation": 3131, "user_id": 2056448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ee46b8bbaa7a18cb68e55bb0e25ff194?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/2056448/casey"}, "is_accepted": false, "score": 2, "last_activity_date": 1472698354, "creation_date": 1472698354, "answer_id": 39261969, "question_id": 39255565, "link": "https://stackoverflow.com/questions/39255565/are-ruby-class-variables-similar-to-the-java-static-variables/39261969#39261969", "title": "Are Ruby class variables similar to the Java static variables?", "body": "<p>One important difference is the way class methods and instance variables interact in Ruby in a way that static methods and instance variables cannot in Java.</p>\n\n<p>tadman's answer contains this code:</p>\n\n<pre><code>class CleanerClass\n  def self.counter\n    @counter ||= 0\n  end\n\n  def self.counter=(v)\n    @counter = v.to_i\n  end\nend\n</code></pre>\n\n<p>To the Java (and C#) programmers of the world, this code looks like it shouldn't work.  After all, in that model the idea of accessing an instance variable from a static method is incoherent (and won't even compile).  The whole point is that you haven't got an instance!</p>\n\n<p>However, in Ruby, every class definition itself an instance of the <code>Class</code> type.  The reference to <code>@counter</code> actually creates an instance variable on the <code>Class</code> object defining <code>CleanerClass</code>.  Changing it to <code>@@counter</code>, as it might seem to like like you should, will pollute other classes besides just the one in which you declare it.</p>\n"}], "owner": {"reputation": 18450, "user_id": 426493, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d5611bf4165ba8f4806886e2877bda48?s=128&d=identicon&r=PG", "display_name": "ab11", "link": "https://stackoverflow.com/users/426493/ab11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2106, "favorite_count": 0, "accepted_answer_id": 39255960, "answer_count": 3, "score": 3, "last_activity_date": 1472747024, "creation_date": 1472664266, "question_id": 39255565, "link": "https://stackoverflow.com/questions/39255565/are-ruby-class-variables-similar-to-the-java-static-variables", "title": "Are Ruby class variables similar to the Java static variables?", "body": "<p>I am transitioning to Ruby from Java and trying to understand Ruby scoping.</p>\n\n<p>It seems class variables behave the same as static variables in Java. Is this interpretation correct? If so, are Ruby global variables then equivalent to public static variables in Java?</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4455199"}, "edited": false, "score": 0, "creation_date": 1472666897, "post_id": 39255821, "comment_id": 65848382, "body": "It&#39;s perfect for the middle of the array! However, if <code>num &lt;= 2</code>, returns <code>[]</code> due to negative index on return array.   If <code>num &gt;= 9</code>, returns a shorter array, as <code>array[index + range]</code> doesn&#39;t exist."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1472666989, "post_id": 39255821, "comment_id": 65848441, "body": "What are the expectations for ranges outside of the array boundaries? does it truncate?  does it need to be exactly range length at the end?  There are edge cases here that you&#39;ll likely need to define before we can code more."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4455199"}, "edited": false, "score": 0, "creation_date": 1472667499, "post_id": 39255821, "comment_id": 65848697, "body": "Tried to address in edits.   <code>return_ary.length == init_ary.length if init_ary.length &lt; 5</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4455199"}, "edited": false, "score": 0, "creation_date": 1472667545, "post_id": 39255821, "comment_id": 65848721, "body": "<code>if init_ary.index(num) &lt; 2</code>    <code>return_ary.index(num)</code> 0 or 1, length still 5 (unless above), trailing numbers after"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4455199"}, "edited": false, "score": 0, "creation_date": 1472667561, "post_id": 39255821, "comment_id": 65848725, "body": "<code>elsif init_ary.index(num) &gt; init_ary.length - 2</code>   <code>return_ary.index(num)</code> 3 or 4, length still 5, more numbers before <code>num</code>"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": false, "score": 1, "last_activity_date": 1472665451, "last_edit_date": 1472665451, "creation_date": 1472665145, "answer_id": 39255821, "question_id": 39255473, "link": "https://stackoverflow.com/questions/39255473/how-to-select-element-and-surrounding-elements-from-array-preferring-return-arr/39255821#39255821", "title": "How to select element and surrounding elements from array, preferring return array with selected element in middle?", "body": "<p>It's not a one liner but maybe easier to understand?</p>\n\n<pre><code>input = (1..10)\n\ndef select_range(array, num, range)\n  index = array.index(num) # find the value\n  return [] if !index # return if the array doesn't include it\n\n  array[(index - range)..(index + range)] # return the range of elements\nend\n\np select_range(input.to_a, 5, 2)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[3, 4, 5, 6, 7]\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4455199"}, "edited": false, "score": 0, "creation_date": 1472668013, "post_id": 39255825, "comment_id": 65848941, "body": "Not totally clear on how option was supposed to address? I&#39;m sure you have something, just not seeing the correlation. I&#39;m getting <code>1 &lt;= option &gt;=4</code> truncating the returned array"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1472673444, "last_edit_date": 1472673444, "creation_date": 1472665162, "answer_id": 39255825, "question_id": 39255473, "link": "https://stackoverflow.com/questions/39255473/how-to-select-element-and-surrounding-elements-from-array-preferring-return-arr/39255825#39255825", "title": "How to select element and surrounding elements from array, preferring return array with selected element in middle?", "body": "<pre><code>def grab_part(arr, nbr, option=:avg)\n  return nil unless (1..arr.size).include?(nbr)\n  return nil if option!=:avg &amp;&amp; !(nbr-1...arr.size).include?(option)\n  first = (option==:avg) ? (arr.size-nbr)/2 : option-nbr+1\n  arr[first,nbr]\nend\n</code></pre>\n\n<p><code>nbr</code> is the size of the array to be returned. <code>option==:avg</code> if the \"middle\" of <code>arr</code> is to be returned; else <code>option</code> is an index into <code>arr</code> identifying the last element of the array to be returned.</p>\n\n<pre><code>arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\ngrab_part(arr,5)   #=&gt; [3, 4, 5, 6, 7]\ngrab_part(arr,5,9) #=&gt; [6, 7, 8, 9, 10]\ngrab_part(arr,5,4) #=&gt; [1, 2, 3, 4, 5]\n</code></pre>\n\n<p>The following shows returned values for other values of the second parameter of <code>grab_part</code>.</p>\n\n<pre><code>(1..arr.size).map do |n|\n  next if n==5\n  puts \"grab_part(arr,#{n}) \\#=&gt; #{ grab_part(arr,n) }\" \n  puts \"grab_part(arr,#{n},#{arr.size-1}) \\#=&gt; #{grab_part(arr,n,arr.size-1)}\"\n  puts \"grab_part(arr,#{n},#{n-1}) \\#=&gt; #{grab_part(arr,n,n-1)}\\n\"\nend\ngrab_part(arr,1)    #=&gt; [5]\ngrab_part(arr,1,9)  #=&gt; [10]\ngrab_part(arr,1,0)  #=&gt; [1]\ngrab_part(arr,2)    #=&gt; [5, 6]\ngrab_part(arr,2,9)  #=&gt; [9, 10]\ngrab_part(arr,2,1)  #=&gt; [1, 2]\ngrab_part(arr,3)    #=&gt; [4, 5, 6]\ngrab_part(arr,3,9)  #=&gt; [8, 9, 10]\ngrab_part(arr,3,2)  #=&gt; [1, 2, 3]\ngrab_part(arr,4)    #=&gt; [4, 5, 6, 7]\ngrab_part(arr,4,9)  #=&gt; [7, 8, 9, 10]\ngrab_part(arr,4,3)  #=&gt; [1, 2, 3, 4]\ngrab_part(arr,6)    #=&gt; [3, 4, 5, 6, 7, 8]\ngrab_part(arr,6,9)  #=&gt; [5, 6, 7, 8, 9, 10]\ngrab_part(arr,6,5)  #=&gt; [1, 2, 3, 4, 5, 6]\ngrab_part(arr,7)    #=&gt; [2, 3, 4, 5, 6, 7, 8]\ngrab_part(arr,7,9)  #=&gt; [4, 5, 6, 7, 8, 9, 10]\ngrab_part(arr,7,6)  #=&gt; [1, 2, 3, 4, 5, 6, 7]\ngrab_part(arr,8)    #=&gt; [2, 3, 4, 5, 6, 7, 8, 9]\ngrab_part(arr,8,9)  #=&gt; [3, 4, 5, 6, 7, 8, 9, 10]\ngrab_part(arr,8,7)  #=&gt; [1, 2, 3, 4, 5, 6, 7, 8]\ngrab_part(arr,9)    #=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]\ngrab_part(arr,9,9)  #=&gt; [2, 3, 4, 5, 6, 7, 8, 9, 10]\ngrab_part(arr,9,8)  #=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]\ngrab_part(arr,10)   #=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\ngrab_part(arr,10,9) #=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n</code></pre>\n\n<p>A few more.</p>\n\n<pre><code>grab_part(arr,5,6)  #=&gt; [5, 6, 7, 8, 9]\n  #=&gt; [3, 4, 5, 6, 7] \ngrab_part(arr,5,8)  #=&gt; [3, 4, 5, 6, 7] \n  #=&gt; [5, 6, 7, 8, 9] \ngrab_part(arr,5,3)  #=&gt; [5, 6, 7, 8, 9] \n  #=&gt; nil \ngrab_part(arr,5,10) #=&gt; [3, 4, 5, 6, 7] \n  #=&gt; nil \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1472665365, "post_id": 39255832, "comment_id": 65847477, "body": "He doesn&#39;t know where the starting index is so there&#39;s more work to do here  to make this complete."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4455199"}, "edited": false, "score": 0, "creation_date": 1472668168, "post_id": 39255832, "comment_id": 65849035, "body": "Sorry, wasn&#39;t clear in the initial post. Need the targeted number to be dynamic. This works great if I know the target number and where that number is in the array. However, becomes more difficult when trying to target the later numbers of the array. If <code>first input &gt; 5</code>, truncates array"}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1472665176, "creation_date": 1472665176, "answer_id": 39255832, "question_id": 39255473, "link": "https://stackoverflow.com/questions/39255473/how-to-select-element-and-surrounding-elements-from-array-preferring-return-arr/39255832#39255832", "title": "How to select element and surrounding elements from array, preferring return array with selected element in middle?", "body": "<p>To accomplish your task, you can use the <code>slice</code> method. Just fyi, <code>(1..10)</code> is a range object, not an array. To use the <code>slice</code> method, you need to change the range to an array first using <code>(1..10).to_a</code></p>\n\n<p><code>slice</code> takes two inputs, starting index, and length. So you can do <code>(1..10).to_a.slice(2,5)</code> to get <code>[3,4,5,6,7]</code></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4455199"}, "is_accepted": false, "score": 0, "last_activity_date": 1472677139, "creation_date": 1472677139, "answer_id": 39258905, "question_id": 39255473, "link": "https://stackoverflow.com/questions/39255473/how-to-select-element-and-surrounding-elements-from-array-preferring-return-arr/39258905#39258905", "title": "How to select element and surrounding elements from array, preferring return array with selected element in middle?", "body": "<p>Here is my current working solution. It's not as eloquent as I'd like, but it's effective for what I'm looking for. </p>\n\n<pre><code>def grab_neighbors(array, num, range)\n  index = array.index(num)\n  target_length = range * 2 + 1\n  if index &lt; range\n    return array.slice(0, target_length)\n  elsif index &gt;= (array.length - range)\n    return array.slice(-target_length, target_length)\n  else\n    return array[(index - range)..(index + range)]\n  end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4455199"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1472677139, "creation_date": 1472663952, "last_edit_date": 1472668594, "question_id": 39255473, "link": "https://stackoverflow.com/questions/39255473/how-to-select-element-and-surrounding-elements-from-array-preferring-return-arr", "title": "How to select element and surrounding elements from array, preferring return array with selected element in middle?", "body": "<p>Let <code>initial_array = (1..10).to_a</code>.</p>\n\n<p>I need it to be dynamic on number selection, but for an example: I need to select the number <code>5</code>, as well as two elements on either side. Ideally, this would return: <code>[3,4,5,6,7]</code>.</p>\n\n<p>I know I can use <a href=\"http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_cons\" rel=\"nofollow\">each_cons</a> to return the desired array length, with surrounding numbers. However, to select the desired element, I'm currently using <code>initial_array.each_cons(5).find {|ary| ary.include?(5)}</code>.</p>\n\n<p>This returns <code>[1,2,3,4,5]</code>, rather than the desired <code>[3,4,5,6,7]</code>.</p>\n\n<p>Additionally, I would like the function to work on both ends of the spectrum, with the returned array always at length <code>5</code>, unless <code>initial_array.length &lt; 5</code>, at which point <code>returned_array.length == intial_array.length</code>. </p>\n\n<p>Thus, <code>initial_array.solution_method(1)</code> returns <code>[1,2,3,4,5]</code>,</p>\n\n<p><code>initial_array.solution_method(10)</code> returns <code>[6,7,8,9,10]</code>,</p>\n\n<p><code>[1,2,3,].solution_method(2)</code> returns <code>[1,2,3]</code>.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "edited": false, "score": 0, "creation_date": 1472664657, "post_id": 39255448, "comment_id": 65847076, "body": "Is Javascript allowed?"}, {"owner": {"reputation": 117, "user_id": 821757, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/2a46645c27ad78735036b9f52f0207c4?s=128&d=identicon&r=PG", "display_name": "Dango", "link": "https://stackoverflow.com/users/821757/dango"}, "reply_to_user": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "edited": false, "score": 0, "creation_date": 1472664728, "post_id": 39255448, "comment_id": 65847121, "body": "javascript - jquery, why not =)"}], "answers": [{"tags": [], "owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "is_accepted": true, "score": 1, "last_activity_date": 1472665620, "creation_date": 1472665620, "answer_id": 39255963, "question_id": 39255448, "link": "https://stackoverflow.com/questions/39255448/rails-display-datetime-in-text-field/39255963#39255963", "title": "Rails display datetime in text field", "body": "<p>First change your code to this; </p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n&lt;%# f.label :time %&gt;\n&lt;%# f.datetime_select :time %&gt;\n&lt;p class=\"output_time\"&gt;&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Then find the id's of your datetime_select which are predefined by Rails. Find it by using inspect element. I will call the id's #id1 to #id5 just for explanation purposes.</p>\n\n<p>Then in jQuery do something like this;</p>\n\n<pre><code>$(\".output_time\").text( ($(\"#id3\").val()) + ' ' + ($(\"#id2\").find(\":selected\").text()) + ' ' +  ($(\"#id1\").val()) );\n\n$(\"#id3\").change(function()\n{\n  $('.output_time').text( ($(this).val()) + ' ' + ($(\"#id2\").find(\":selected\").text()) + ' ' +  ($(\"#id1\").val()) ) ;\n});\n$(\"#id2\").change(function()\n{\n  $('.output_time').text( ($(\"#id3\").val()) + ' ' + ($(this).find(\":selected\").text()) + ' ' + ($(\"#id1\").val()) ) ;\n});\n$(\"#id1\").change(function()\n{\n  $('.output_time').text( ($(\"#id3\").val()) + ' ' + ($(\"#id2\").find(\":selected\").text()) + ' ' + ($(this).val()) ) ;\n});\n</code></pre>\n\n<p>I used 3 id's here but you have 5 so you can just add those behind it, that way you can even learn some jQuery and make your own output format(DD-MM-YY-TT etc..).</p>\n"}], "owner": {"reputation": 117, "user_id": 821757, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/2a46645c27ad78735036b9f52f0207c4?s=128&d=identicon&r=PG", "display_name": "Dango", "link": "https://stackoverflow.com/users/821757/dango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 39255963, "answer_count": 1, "score": 2, "last_activity_date": 1472671351, "creation_date": 1472663854, "last_edit_date": 1472671351, "question_id": 39255448, "link": "https://stackoverflow.com/questions/39255448/rails-display-datetime-in-text-field", "title": "Rails display datetime in text field", "body": "<p>Have a _form.html.erb in which I want to display datetime in a text field instead of a dropdown menu. My code below does not display anything in my text field, how do I go about this...</p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n&lt;%# f.label :time %&gt;\n&lt;%# f.datetime_select :time %&gt;\n&lt;%= f.text_field:time, :value =&gt; timesheet.user, :readonly =&gt; true %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Illustration below</p>\n\n<p><a href=\"https://i.stack.imgur.com/Tmwcb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tmwcb.jpg\" alt=\"rails datetime into text field with datetime \"></a></p>\n\n<p>After @luissimo mentioned javascript I came up with a snipplet of code in jquery </p>\n\n<pre><code>var tm1 =  $( \"#timesheet_time_1i\" ).val();\nvar tm2 =  $( \"#timesheet_time_2i\" ).val();\nvar tm3 =  $( \"#timesheet_time_3i\" ).val();\nvar tm4 =  $( \"#timesheet_time_4i\" ).val();\nvar tm5 =  $( \"#timesheet_time_5i\" ).val();\nvar tm_all = tm1 + '-'+ tm2 + '-' + tm3 + ' ' + tm4 + ':' + tm5;   \n\n$('#timesheet_time').val(tm_all); \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "user-input"], "comments": [{"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1472662635, "post_id": 39255074, "comment_id": 65845993, "body": "I think the question would be more clearer if you give an example like a given array, given input and expected output."}, {"owner": {"reputation": 25, "user_id": 6654947, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210197050859998/picture?type=large", "display_name": "Austin Atendido", "link": "https://stackoverflow.com/users/6654947/austin-atendido"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1472667370, "post_id": 39255074, "comment_id": 65848642, "body": "Good point. I&#39;ll make sure to include that from now on."}], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1472664460, "creation_date": 1472664460, "answer_id": 39255614, "question_id": 39255074, "link": "https://stackoverflow.com/questions/39255074/view-entry-number-method-that-takes-user-inputed-integer-and-matches-that-intege/39255614#39255614", "title": "view entry number method that takes user inputed integer and matches that integer with array index to show an entry of address book", "body": "<p>How about something like this:</p>\n\n<pre><code>  def view_entry_number\n    ary = ['one','two','three']\n    print \"Enter entry number: \"\n    selection = gets.to_i\n    if (1..ary.length).include?(selection)\n      puts ary[selection - 1]\n    else\n      puts \"#{selection} is not a valid input\"\n    end\n  end\n</code></pre>\n\n<p>Which returns:</p>\n\n<pre><code>  2.3.1 :281 &gt; view_entry_number\n  Enter entry number: 1\n  one\n   =&gt; nil \n\n  2.3.1 :282 &gt; view_entry_number\n  Enter entry number: 2\n  two\n   =&gt; nil \n\n  2.3.1 :283 &gt; view_entry_number\n  Enter entry number: 3\n  three\n   =&gt; nil \n\n  2.3.1 :284 &gt; view_entry_number\n  Enter entry number: 4\n  4 is not a valid input\n   =&gt; nil \n\n  2.3.1 :285 &gt; view_entry_number\n  Enter entry number: 0\n  0 is not a valid input\n   =&gt; nil \n\n  2.3.1 :286 &gt; view_entry_number\n  Enter entry number: f\n  0 is not a valid input\n   =&gt; nil \n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6654947, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210197050859998/picture?type=large", "display_name": "Austin Atendido", "link": "https://stackoverflow.com/users/6654947/austin-atendido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472664460, "creation_date": 1472662306, "question_id": 39255074, "link": "https://stackoverflow.com/questions/39255074/view-entry-number-method-that-takes-user-inputed-integer-and-matches-that-intege", "title": "view entry number method that takes user inputed integer and matches that integer with array index to show an entry of address book", "body": "<p>My apologies if this is a duplicate but I couldn't find an answer that provides a solution to my problem. I'm trying to make a method for an address book that takes user input (integer) and matches that integer with the index of an array of entries then prints the entry to the user. Any help is greatly appreciated!!!</p>\n\n<pre><code>def view_entry_number\n    print \"Enter entry number: \"\n    selection = gets.to_i\n    case selection\n    when selection == (1...100) \n      system \"clear\"\n      puts entry.to_s\n    else\n      system \"clear\"\n      puts \"#{selection} is not a valid input\"\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby", "regex", "rspec", "matcher"], "comments": [{"owner": {"reputation": 1073, "user_id": 5715870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e7d59420f276b45ef3a56a2617dd5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "dhrubo_moy", "link": "https://stackoverflow.com/users/5715870/dhrubo-moy"}, "edited": false, "score": 0, "creation_date": 1472673252, "post_id": 39254886, "comment_id": 65851848, "body": "You probably need to write your own matcher with a different name."}], "answers": [{"tags": [], "owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "is_accepted": false, "score": 1, "last_activity_date": 1472827600, "creation_date": 1472827600, "answer_id": 39295195, "question_id": 39254886, "link": "https://stackoverflow.com/questions/39254886/rspec-starts-with-matcher-variant-using-regular-expressions/39295195#39295195", "title": "RSpec starts_with matcher variant using regular expressions", "body": "<p>It turns out that the solution is to use a combination of composing matchers and aliases:</p>\n\n<pre><code>it 'begins with the standard header' do\n  output = method_under_test\n  # output is an array of Strings\n  expect(output).to start_with(\n                a_string_matching(/foo/),\n                a_string_matching(/bar/)\n             )\nend\n</code></pre>\n"}], "owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1472827600, "creation_date": 1472661665, "question_id": 39254886, "link": "https://stackoverflow.com/questions/39254886/rspec-starts-with-matcher-variant-using-regular-expressions", "title": "RSpec starts_with matcher variant using regular expressions", "body": "<p>Is there a variant of the RSpec <code>start_with</code> matcher that will use regular expression matching instead of equality when examining arrays of strings?  (I don't mind writing my own; but I don't want to re-invent the wheel.)</p>\n\n<p>Specifically, I want to have a spec that looks like this:</p>\n\n<pre><code>it 'begins with the standard header' do\n  output = method_under_test\n  # output is an array of Strings\n  expect(output).to start_with([/foo/, /bar/])\nend\n</code></pre>\n\n<p>This spec should pass if <code>output[0]</code> matches <code>/foo/</code> and <code>output[1]</code> matches <code>/bar/</code>.</p>\n\n<p>Assuming I do need to write my own matcher, is there a way to \"overload\" <code>start_with</code>, or do I need to choose a different name?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 2, "last_activity_date": 1472693449, "last_edit_date": 1472693449, "creation_date": 1472666141, "answer_id": 39256109, "question_id": 39254640, "link": "https://stackoverflow.com/questions/39254640/how-to-use-postgres-avg-function-with-order-clause-from-rails/39256109#39256109", "title": "How to use postgres AVG() function with order clause from Rails", "body": "<p>An ActiveRecord query like this:</p>\n\n<pre><code>company.daily_data.select('AVG(volume) as average_volume').order(date: :desc)\n</code></pre>\n\n<p>doesn't really make much sense. <code>avg</code> is an aggregate function in SQL so it needs to operate on a groups of rows. But you're not telling the database how to group the rows, you're telling the database to compute the average volume over the entire table and then order that single value by something that doesn't exist in the final result set.</p>\n\n<p>Throwing a <code>limit</code> in:</p>\n\n<pre><code>company.daily_data\n       .select('AVG(volume) as average_volume')\n       .order(date: :desc)\n       .limit(10)\n</code></pre>\n\n<p>won't help either because the <code>limit</code> is applied <em>after</em> the <code>order</code> and by then you've already confused the database with your attempted <code>avg(volume)</code>.</p>\n\n<p>I'd probably use a derived table if I was doing this in SQL, something like:</p>\n\n<pre><code>select avg(volume) as average_volume\nfrom (\n  select volume\n  from where_ever...\n  where what_ever...\n  order by date desc\n  limit 10\n) dt\n</code></pre>\n\n<p>The derived table in the <code>FROM</code> clause finds the <code>volume</code>s that you want and then the overall query averages those 10 <code>volume</code>s.</p>\n\n<p>Alternatively, you could use a subquery to grab the rows of interest:</p>\n\n<pre><code>select avg(volume) as average_volume\nfrom where_ever...\nwhere id in (\n  select id\n  from where_ever...\n  where what_ever...\n  order by date desc\n  limit 10\n)\n</code></pre>\n\n<p>The subquery approach is fairly straight forward to implement with ActiveRecord, something like this:</p>\n\n<pre><code>ten_most_recent = company.daily_data.select(:id).order(:date =&gt; :desc).limit(10)\ncompany.daily_data.where(:id =&gt; ten_most_recent).average(:volume)\n</code></pre>\n\n<p>If you throw a <code>to_sql</code> call on the end of the second line you should see something that looks like the subquery SQL.</p>\n\n<p>You can also make the derived table approach work with ActiveRecord but it is a little less natural. There is a <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-from\" rel=\"nofollow\"><code>from</code> method</a> in ActiveRecord that will take an ActiveRecord query to build the <code>from (select ...)</code> derived table construction but you'll want to be sure to manually name the derived table:</p>\n\n<pre><code>ten_most_recent = company.daily_data.select(:volume).order(:date =&gt; :desc).limit(10)\nAnyModelAtAll.from(ten_most_recent, 'dt').average('dt.volume')\n</code></pre>\n\n<p>You have to use a string argument to <code>average</code> and include the <code>dt.</code> prefix to keep ActiveRecord from trying to add its own table name.</p>\n\n<p>Of course you'd hide all this stuff in a method somewhere so that you could hide the details. Perhaps an extension method on the <code>daily_data</code> association:</p>\n\n<pre><code>has_many :daily_data, ... do\n  def average_volume(days)\n    #...\n  end\nend\n</code></pre>\n\n<p>so that you could say things like:</p>\n\n<pre><code>company.daily_data.average_volume(11)\n</code></pre>\n"}], "owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 661, "favorite_count": 0, "accepted_answer_id": 39256109, "answer_count": 1, "score": 1, "last_activity_date": 1472693449, "creation_date": 1472660779, "last_edit_date": 1472666147, "question_id": 39254640, "link": "https://stackoverflow.com/questions/39254640/how-to-use-postgres-avg-function-with-order-clause-from-rails", "title": "How to use postgres AVG() function with order clause from Rails", "body": "<p>I have a model <code>Company</code> and <code>Company</code> has many <code>DailyData</code>.\nAnd <code>DailyData</code> has columns <code>volume</code> and <code>date</code></p>\n\n<p>To calculate average volume of recent 10 business days I wrote like:</p>\n\n<pre><code>class Array\n  def sum\n    inject(0) { |result, el| result + el }\n  end\n\n  def mean\n    sum.to_d / size\n  end\nend\n\ncompany = Company.first\ncompany.daily_data.order(date: :desc).limit(10).pluck(:volume).mean\n</code></pre>\n\n<p>This code works fine, but I want to use postgres <code>AVG()</code> function.</p>\n\n<pre><code>company.daily_data.select('AVG(volume) as average_volume').order(date: :desc)\n</code></pre>\n\n<p>This code ends up with error:</p>\n\n<pre><code>PG::GroupingError: ERROR:  column \"daily_data.date\" must appear in the GROUP BY clause or be used in an aggregate function\n</code></pre>\n\n<p>But If I put <code>.group(:date)</code> in method chain, the sql reurns multiple results.\nHow can I get recent 10 volumes average value by using postgresql <code>AVG()</code> function?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 108, "user_id": 4061698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b6a8f09e39df1462c69c9cd2e776fd?s=128&d=identicon&r=PG&f=1", "display_name": "prashant", "link": "https://stackoverflow.com/users/4061698/prashant"}, "edited": false, "score": 1, "creation_date": 1472660860, "post_id": 39254614, "comment_id": 65845077, "body": "This is because your route for the action is created for GET request and your link is sending GET request so it working.But button_to is sending request as POST request which is not matching to any route."}, {"owner": {"reputation": 1073, "user_id": 5715870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e7d59420f276b45ef3a56a2617dd5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "dhrubo_moy", "link": "https://stackoverflow.com/users/5715870/dhrubo-moy"}, "reply_to_user": {"reputation": 108, "user_id": 4061698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b6a8f09e39df1462c69c9cd2e776fd?s=128&d=identicon&r=PG&f=1", "display_name": "prashant", "link": "https://stackoverflow.com/users/4061698/prashant"}, "edited": false, "score": 0, "creation_date": 1472661298, "post_id": 39254614, "comment_id": 65845307, "body": "Great. Added <code>method: &quot;get&quot;</code> and boom, it worked. Thank you so much."}, {"owner": {"reputation": 108, "user_id": 4061698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b6a8f09e39df1462c69c9cd2e776fd?s=128&d=identicon&r=PG&f=1", "display_name": "prashant", "link": "https://stackoverflow.com/users/4061698/prashant"}, "edited": false, "score": 1, "creation_date": 1472661371, "post_id": 39254614, "comment_id": 65845348, "body": "if you want to use button_to for get request. Use it like this: <code>&lt;%= link_to &#39;Download File&#39;, download_file_home_path, method: :get %&gt;</code> and it will work."}, {"owner": {"reputation": 1073, "user_id": 5715870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e7d59420f276b45ef3a56a2617dd5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "dhrubo_moy", "link": "https://stackoverflow.com/users/5715870/dhrubo-moy"}, "reply_to_user": {"reputation": 108, "user_id": 4061698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b6a8f09e39df1462c69c9cd2e776fd?s=128&d=identicon&r=PG&f=1", "display_name": "prashant", "link": "https://stackoverflow.com/users/4061698/prashant"}, "edited": false, "score": 0, "creation_date": 1472661471, "post_id": 39254614, "comment_id": 65845399, "body": "Yup. Did that. And it worked. Thanks for your comment. :)"}], "answers": [{"tags": [], "owner": {"reputation": 1073, "user_id": 5715870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e7d59420f276b45ef3a56a2617dd5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "dhrubo_moy", "link": "https://stackoverflow.com/users/5715870/dhrubo-moy"}, "is_accepted": true, "score": 0, "last_activity_date": 1472670519, "last_edit_date": 1472670519, "creation_date": 1472661278, "answer_id": 39254787, "question_id": 39254614, "link": "https://stackoverflow.com/questions/39254614/rails-button-to-is-not-working-with-send-file-method/39254787#39254787", "title": "Rails &#39;button_to&#39; is not working with &#39;send_file&#39; method", "body": "<p>Following @prashant 's comment,</p>\n\n<blockquote>\n  <p>This is because your route for the action is created for GET request and your link is sending GET request so it working.But button_to is sending request as POST request which is not matching to any route.</p>\n</blockquote>\n\n<p>So adding <code>method: 'get'</code> fixed the problem.</p>\n\n<p>The view should look like following:</p>\n\n<pre><code>&lt;%= button_to 'Download Report', download_file_home_path, method: 'get' %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44, "user_id": 6768800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46c224a1a2c8ec3cecb66ac360d6595e?s=128&d=identicon&r=PG&f=1", "display_name": "SignorHarry", "link": "https://stackoverflow.com/users/6768800/signorharry"}, "is_accepted": false, "score": 1, "last_activity_date": 1472661487, "creation_date": 1472661487, "answer_id": 39254838, "question_id": 39254614, "link": "https://stackoverflow.com/questions/39254614/rails-button-to-is-not-working-with-send-file-method/39254838#39254838", "title": "Rails &#39;button_to&#39; is not working with &#39;send_file&#39; method", "body": "<p>Ok, try it:</p>\n\n<pre><code>&lt;%= button_to 'your_button_name', your_path, method: 'get' %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1073, "user_id": 5715870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e7d59420f276b45ef3a56a2617dd5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "dhrubo_moy", "link": "https://stackoverflow.com/users/5715870/dhrubo-moy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 39254787, "answer_count": 2, "score": 0, "last_activity_date": 1472670519, "creation_date": 1472660687, "question_id": 39254614, "link": "https://stackoverflow.com/questions/39254614/rails-button-to-is-not-working-with-send-file-method", "title": "Rails &#39;button_to&#39; is not working with &#39;send_file&#39; method", "body": "<p>In the view, suppose I have a button. If I click on it, it should trigger the file download. </p>\n\n<p>In my view I have:</p>\n\n<pre><code>&lt;%= link_to 'Download File', download_file_home_path %&gt;\n</code></pre>\n\n<p>In routes.rb</p>\n\n<pre><code>resources :homes, only: [:update] do\n  member do\n    get 'download_file'\n  end\nend\n</code></pre>\n\n<p>In homes_controller.rb</p>\n\n<pre><code>def download_file\n  send_file \"path/to/file.pdf\"\nend\n</code></pre>\n\n<p>When I click on the link, everything works perfectly and it triggers download. But I need a button instead of link. When I use the <code>button_to</code> method, it fails and I get following error:</p>\n\n<pre><code>ActionController::RoutingError (No route matches [POST] \"/source_machines/4/download_report\"):\n  actionpack (4.2.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'\n  newrelic_rpm (3.16.1.320) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  actionpack (4.2.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n  newrelic_rpm (3.16.1.320) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  railties (4.2.5) lib/rails/rack/logger.rb:38:in `call_app'\n  railties (4.2.5) lib/rails/rack/logger.rb:20:in `block in call'\n  activesupport (4.2.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n  activesupport (4.2.5) lib/active_support/tagged_logging.rb:26:in `tagged'\n  activesupport (4.2.5) lib/active_support/tagged_logging.rb:68:in `tagged'\n  railties (4.2.5) lib/rails/rack/logger.rb:20:in `call'\n  newrelic_rpm (3.16.1.320) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  actionpack (4.2.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n  newrelic_rpm (3.16.1.320) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'\n  newrelic_rpm (3.16.1.320) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  rack (1.6.4) lib/rack/runtime.rb:18:in `call'\n  newrelic_rpm (3.16.1.320) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  activesupport (4.2.5) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n  newrelic_rpm (3.16.1.320) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  rack-rewrite (1.5.1) lib/rack/rewrite.rb:24:in `call'\n  newrelic_rpm (3.16.1.320) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  rack (1.6.4) lib/rack/lock.rb:17:in `call'\n  newrelic_rpm (3.16.1.320) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'\n  newrelic_rpm (3.16.1.320) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  railties (4.2.5) lib/rails/engine.rb:518:in `call'\n  railties (4.2.5) lib/rails/application.rb:165:in `call'\n  railties (4.2.5) lib/rails/railtie.rb:194:in `public_send'\n  railties (4.2.5) lib/rails/railtie.rb:194:in `method_missing'\n  newrelic_rpm (3.16.1.320) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  rack (1.6.4) lib/rack/deflater.rb:35:in `call'\n  newrelic_rpm (3.16.1.320) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  rack (1.6.4) lib/rack/content_length.rb:15:in `call'\n  puma (3.6.0) lib/puma/configuration.rb:225:in `call'\n  puma (3.6.0) lib/puma/server.rb:578:in `handle_request'\n  puma (3.6.0) lib/puma/server.rb:415:in `process_client'\n  puma (3.6.0) lib/puma/server.rb:275:in `block in run'\n  puma (3.6.0) lib/puma/thread_pool.rb:116:in `call'\n  puma (3.6.0) lib/puma/thread_pool.rb:116:in `block in spawn_thread'\n  logging (2.1.0) lib/logging/diagnostic_context.rb:450:in `call'\n  logging (2.1.0) lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'\n</code></pre>\n\n<p>My question is why does it works with <code>link_to</code> and does not work with <code>button_to</code> method, and what can I do to make it work with <code>button_to</code></p>\n"}, {"tags": ["ruby", "encryption", "blowfish"], "comments": [{"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1472660445, "post_id": 39253988, "comment_id": 65844845, "body": "Looks like a bug in crypt gem to me, but cannot confirm. Does it work when you provide handcrafted data?"}], "answers": [{"tags": [], "owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "is_accepted": true, "score": 3, "last_activity_date": 1472661377, "creation_date": 1472661377, "answer_id": 39254809, "question_id": 39253988, "link": "https://stackoverflow.com/questions/39253988/nomethoderror-when-trying-to-decrypt-data-using-blowfish/39254809#39254809", "title": "NoMethodError when trying to decrypt data using Blowfish", "body": "<p>The culprit is this <code>b</code> method. It was introduced in <a href=\"https://ruby-doc.org/core-2.0.0/String.html#method-i-b\" rel=\"nofollow\">Ruby 2.0</a>. As you can see in the documentation it is returning copy of a string with ASCII-8BIT encoding. You can either update ruby version or monkey-patch String class to add this method. It is normally implemented in C, but I think this Ruby implementation will work as well:</p>\n\n<pre><code>class String\n  def b\n    self.dup.force_encoding(\"ASCII-8BIT\")\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 626, "user_id": 539529, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/99b9813828c1980aaed21241da0739d1?s=128&d=identicon&r=PG", "display_name": "Ken", "link": "https://stackoverflow.com/users/539529/ken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 39254809, "answer_count": 1, "score": 1, "last_activity_date": 1472893489, "creation_date": 1472658550, "last_edit_date": 1472893489, "question_id": 39253988, "link": "https://stackoverflow.com/questions/39253988/nomethoderror-when-trying-to-decrypt-data-using-blowfish", "title": "NoMethodError when trying to decrypt data using Blowfish", "body": "<p>I'm trying to decrypt some data I'm fetching from an API and getting some weird errors.</p>\n\n<p><strong>Some background</strong></p>\n\n<p>The data I'm fetching was encrypted using Blowfish and then encoded to a base64 string and made available in a JSON string. Here's a sample of what that JSON string looks like</p>\n\n<pre><code>{\"payload\":\"BR0UzF38W4oVB7fjP6WgClqdaMKIYTl661mpneqoXQYIYkBQvjlMQZ+yn....\"} \n</code></pre>\n\n<p>In my Ruby script I'm doing the following:</p>\n\n<pre><code>require 'crypt/blowfish'\nrequire 'base64'\n\n# get json data\nresponse = Net::HTTP.get(URI('http://www.url-to-json.com'))\nresults  = JSON.parse(response)\n\n# decode the base64 results\ndecoded = Base64.decode64(results['payload'])\n\n# setup blowfish object with key\nblowfish = Crypt::Blowfish.new('my_secret_key')\n\n# decrypt the data\nputs blowfish.decrypt_string(decoded)\n</code></pre>\n\n<p>And this is the error that is returned:</p>\n\n<pre><code>/Users/Ken/.rvm/gems/ruby-1.9.3-p327@vs/gems/crypt-2.2.1/lib/crypt/stringxor.rb:4:in `^': undefined method `b' for \"java.uti\":String (NoMethodError)\n    from /Users/Ken/.rvm/gems/ruby-1.9.3-p327@vs/gems/crypt-2.2.1/lib/crypt/cbc.rb:62:in `decrypt_stream'\n    from /Users/Ken/.rvm/gems/ruby-1.9.3-p327@vs/gems/crypt-2.2.1/lib/crypt/cbc.rb:115:in `decrypt_string'\n    from /Users/Ken/Code/vs/scripts/test.rb:55:in `run'\n    from init.rb:43:in `&lt;main&gt;'\n</code></pre>\n\n<p>Do you have any insight on what could be causing that error? I've been debugging it for hours and can't seem to make any progress. My best guess is that it's an encoding issue but when I force the encoding using <code>force_encoding()</code> I get the same errors.</p>\n\n<p>And in case you're wondering I'm locked into Ruby version 1.9.3-p327 for this app.</p>\n\n<p>Thanks in advance for any help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "omniauth", "omniauth-twitter"], "answers": [{"tags": [], "owner": {"reputation": 440, "user_id": 1373795, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cda789b249853d6fd41ec3281fe03097?s=128&d=identicon&r=PG", "display_name": "Evan Hammer", "link": "https://stackoverflow.com/users/1373795/evan-hammer"}, "is_accepted": false, "score": 0, "last_activity_date": 1482351221, "creation_date": 1482351221, "answer_id": 41271180, "question_id": 39253985, "link": "https://stackoverflow.com/questions/39253985/how-to-get-the-auth-url-from-an-omniauth-provider-without-redirect/41271180#41271180", "title": "How to get the auth URL from an OmniAuth provider without redirect", "body": "<p>Yes, Omniauth provides a helper function for you:</p>\n\n<pre><code>user_omniauth_authorize_path(key)\n# for your case\nuser_omniauth_authorize_path(\"twitter\")\n</code></pre>\n\n<p>Check out <a href=\"https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview\" rel=\"nofollow noreferrer\">their Devise overview</a>.</p>\n"}], "owner": {"reputation": 2612, "user_id": 106717, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/82437d8be141d96116e840f6a47cbe63?s=128&d=identicon&r=PG", "display_name": "Peter Sankauskas", "link": "https://stackoverflow.com/users/106717/peter-sankauskas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 495, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482351221, "creation_date": 1472658542, "question_id": 39253985, "link": "https://stackoverflow.com/questions/39253985/how-to-get-the-auth-url-from-an-omniauth-provider-without-redirect", "title": "How to get the auth URL from an OmniAuth provider without redirect", "body": "<p>How do you get the URL that OmniAuth redirect to when you go to <code>/auth/twitter</code>?</p>\n\n<p>I am building an API server and just want to pass the URL in JSON to the client so it can do whatever it needs to with the URL.</p>\n\n<p>I think what I want is the result of the strategy's <code>request_phase</code> as that looks to be the auth URL, but how do I get that in a new controller so I can do:</p>\n\n<pre><code>class MyOauthController &lt; ApplicationController\n  # GET /my_oauth/signin/twitter.json\n  def signin\n    url = ???\n    render json: {signin_url: url}\n  end\n</code></pre>\n\n<p>Is there a clean way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "nomethoderror"], "comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1472658667, "post_id": 39253898, "comment_id": 65843854, "body": "Can you post the whole form?"}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1472660506, "post_id": 39253898, "comment_id": 65844881, "body": "did you create and run a migration to add the cupon code?"}, {"owner": {"reputation": 43, "user_id": 2284348, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b1ee4edd7020336d2e1fc516e60b9d4f?s=128&d=identicon&r=PG", "display_name": "user2284348", "link": "https://stackoverflow.com/users/2284348/user2284348"}, "edited": false, "score": 0, "creation_date": 1472671198, "post_id": 39253898, "comment_id": 65850811, "body": "Yes, I did, in the table transactions. This is what i did: rails generate migration AddCuponCodeColumnToTransactions cupon_code:integer"}, {"owner": {"reputation": 43, "user_id": 2284348, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b1ee4edd7020336d2e1fc516e60b9d4f?s=128&d=identicon&r=PG", "display_name": "user2284348", "link": "https://stackoverflow.com/users/2284348/user2284348"}, "edited": false, "score": 0, "creation_date": 1472671378, "post_id": 39253898, "comment_id": 65850908, "body": "I did post the hole form Rusian, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 2284348, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b1ee4edd7020336d2e1fc516e60b9d4f?s=128&d=identicon&r=PG", "display_name": "user2284348", "link": "https://stackoverflow.com/users/2284348/user2284348"}, "edited": false, "score": 0, "creation_date": 1472773436, "post_id": 39265748, "comment_id": 65899192, "body": "So i must say in attributes that transactions belong_to item category?"}, {"owner": {"reputation": 896, "user_id": 2574605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjKz8.jpg?s=128&g=1", "display_name": "roadev", "link": "https://stackoverflow.com/users/2574605/roadev"}, "edited": false, "score": 0, "creation_date": 1473302280, "post_id": 39265748, "comment_id": 66091145, "body": "Yes... if transactions belongs to item categories, it should be <code>belongs_to</code> in Transactions model. And finally, if item category has many transactions, it should be explicit in the Item category model ( <code>has_many :transactions</code> )"}], "tags": [], "owner": {"reputation": 64, "user_id": 2032036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b21c3b761017d93051f722d4271807?s=128&d=identicon&r=PG", "display_name": "Rajeswari K", "link": "https://stackoverflow.com/users/2032036/rajeswari-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1472716356, "creation_date": 1472716356, "answer_id": 39265748, "question_id": 39253898, "link": "https://stackoverflow.com/questions/39253898/nomethoderror-in-item-categoriesnew/39265748#39265748", "title": "NoMethodError in Item_categories#new", "body": "<p>Is transactions part of the @item_category?\nAll the attributes inside the object @item_category only will be available inside the form_for. If the attributes of transactions are not setup to be accessible from @item_category, it will not work.</p>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 43, "user_id": 2284348, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b1ee4edd7020336d2e1fc516e60b9d4f?s=128&d=identicon&r=PG", "display_name": "user2284348", "link": "https://stackoverflow.com/users/2284348/user2284348"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1472716356, "creation_date": 1472658282, "last_edit_date": 1472671342, "question_id": 39253898, "link": "https://stackoverflow.com/questions/39253898/nomethoderror-in-item-categoriesnew", "title": "NoMethodError in Item_categories#new", "body": "<p>I have the next problem: </p>\n\n<p>Showing /Users/felipevelasquez/Desktop/APPS/meetrico2/meetrico-production/app/views/item_categories/_form.html.haml where line #40 raised:</p>\n\n<p>undefined method `cupon_code' for #</p>\n\n<p>Extracted source (around line #40):</p>\n\n<pre><code>37:   %p\n38:     = f.label :cupon_code, \"Codigo de cupon\"\n39:     %br/\n40:     = f.text_field :cupon_code\n41:   %p.columns\n42:     = f.label :num_tables, \"No. Prod:\"\n43:     %br/\n</code></pre>\n\n<p>Trace of template inclusion: app/views/item_categories/new.html.haml</p>\n\n<p>Rails.root: /Users/felipevelasquez/Desktop/APPS/meetrico2/meetrico-production\nApplication Trace | Framework Trace | Full Trace</p>\n\n<p>app/views/item_categories/_form.html.haml:40:in <code>block in _app_views_item_categories__form_html_haml__1368949097161944936_70115358072760'\napp/views/item_categories/_form.html.haml:1:in</code>_app_views_item_categories__form_html_haml__1368949097161944936_70115358072760'\napp/views/item_categories/new.html.haml:4:in <code>_app_views_item_categories_new_html_haml__3526667596950049714_70115303712400'\nconfig/initializers/quiet_assets.rb:13:in</code>call_with_quiet_assets'</p>\n\n<p>Request</p>\n\n<p>Parameters:</p>\n\n<p>None</p>\n\n<p>Show session dump</p>\n\n<p>Show env dump\nResponse</p>\n\n<p>Headers:</p>\n\n<p>None</p>\n\n<p>I created the field in my db cupon_code, here is my schema: </p>\n\n<pre><code>create_table \"transactions\", :force =&gt; true do |t|\n    t.integer  \"order_id\"\n    t.string   \"action\"\n    t.integer  \"amount\"\n    t.boolean  \"success\"\n    t.string   \"authorization\"\n    t.string   \"message\"\n    t.text     \"params\"\n    t.datetime \"created_at\",    :null =&gt; false\n    t.datetime \"updated_at\",    :null =&gt; false\n    t.integer  \"cupon_code\"\n</code></pre>\n\n<p>Can anyone see where is the problem?</p>\n\n<p>This is the hole form: </p>\n\n<pre><code>= form_for @item_category, html: { class: 'upload-file-or-text'} do |f|\n  %p\n    = f.label :coworking_space, \"Coworking Space\"\n    %br/\n    = select_tag \"item_category[coworking_space_id]\", options_from_collection_for_select(@coworking_spaces, \"id\", \"name\", @item_category.coworking_space_id)\n  %p\n    = f.label :name, \"Nombre\"\n    %br/\n    = f.text_field :name, :required=&gt;\"required\",:title=&gt;\"Este campo es obligatorio\"\n  %p.columns\n    = f.label :image_text_url, \"Url de Imagen o Icono\"\n    %br/\n    = f.text_area :image_text_url, :size =&gt; \"40x4\", class: 'image-text'\n  %p.columns\n    = f.label :image_file, \"O sube una imagen\"\n    - if @item_category.image_file?\n      %br/\n      = image_tag @item_category.image_url, class: 'image-thumb'\n      %label\n        = f.check_box :remove_image_file, class: 'remove-ckeck'\n        Eliminar image?\n    %br/\n    = f.file_field :image_file, class: 'image-file'\n  %p.alert-message.hide\n    Debe elegir alguna de estas opciones\n  %p\n    = f.label :description, \"Descripci\u00f3n\"\n    %br/\n    = f.text_area :description, :size =&gt; \"40x4\"\n  %p\n    = f.label :notification_body, \"Cuerpo de Notificacion\"\n    %br/\n    = f.text_area :notification_body, :size =&gt; \"40x4\"\n  %p\n    = f.check_box :promo_header\n    L\u00ednea de Producto de la cabecera\n  %p\n    = f.label :cupon_code, \"Codigo de cupon\"\n    %br/\n    = f.text_field :cupon_code\n  %p.columns\n    = f.label :num_tables, \"No. Prod:\"\n    %br/\n    = f.text_field :num_tables\n  %p.columns\n    = f.label :reserved, \"Reservas:\"\n    %br/\n    = f.text_field :reserved\n  %p\n    = f.label :normal_price, t(:normal_sale_price)\n    %label\n      = \"en #{@item_category.coworking_space.city.currency.name rescue \" \"}\"\n    %br/\n    = f.text_field :normal_price\n  %p.columns\n    = f.label :green, \"Green:\"\n    %label\n      = \"en #{@item_category.coworking_space.city.currency.name rescue \" \"}\"\n    %br/\n    = f.text_field :green\n  %p.columns\n    = f.label :green, \"Yellow:\"\n    %label\n      = \"en #{@item_category.coworking_space.city.currency.name rescue \" \"}\"\n    %br/\n    = f.text_field :yellow\n  %p.columns\n    = f.label :green, \"Red:\"\n    %label\n      = \"en #{@item_category.coworking_space.city.currency.name rescue \" \"}\"\n    %br/\n    = f.text_field :red\n  %p\n    = f.label :target_url, t(:target_url)\n    %br/\n    = f.text_field :target_url\n  %p= f.submit\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "null", "return"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1472657997, "post_id": 39253617, "comment_id": 65843443, "body": "I suppose that you have tried to create a book from a form via your <code>BooksController</code>. Could you show the parameters that have been passed to your controller? You find them in your application&#39;s log file."}, {"owner": {"reputation": 496, "user_id": 5537203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88445e66d439bb5df0fdf9876049cbdc?s=128&d=identicon&r=PG&f=1", "display_name": "pk-n", "link": "https://stackoverflow.com/users/5537203/pk-n"}, "edited": false, "score": 2, "creation_date": 1472658035, "post_id": 39253617, "comment_id": 65843467, "body": "Try to create a new record and see even that doesn&#39;t have description. from Console"}, {"owner": {"reputation": 1066, "user_id": 2692292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc9547cefa57fafd20952ccf570251a?s=128&d=identicon&r=PG", "display_name": "romainsalles", "link": "https://stackoverflow.com/users/2692292/romainsalles"}, "edited": false, "score": 0, "creation_date": 1472660248, "post_id": 39253617, "comment_id": 65844738, "body": "Which version of Rails are you using ? Do you have the &quot;protected_attributes&quot; gem declared in your Gemfile ? Do you have a &quot;attr_accessible&quot; in your <code>Book</code>model ?"}, {"owner": {"reputation": 1810, "user_id": 1301840, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ad9bbcb458c0923c2946f85b6b98107b?s=128&d=identicon&r=PG&f=1", "display_name": "lusketeer", "link": "https://stackoverflow.com/users/1301840/lusketeer"}, "edited": false, "score": 0, "creation_date": 1472660712, "post_id": 39253617, "comment_id": 65844998, "body": "doesn&#39;t look like there&#39;s anything wrong. Since you queried for <code>Book.first</code>, maybe that one doesn&#39;t have description in the first place? Can you check if there are books in the db that have description?"}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1472660814, "post_id": 39253617, "comment_id": 65845048, "body": "Hi Anna, welcome on SO. I flagged your question, because we might need more information (<a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>). Maybe just your first book got wrong. Check <code>Book.last</code> to see if there the description got saved."}, {"owner": {"reputation": 15, "user_id": 6779343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209505451685521/picture?type=large", "display_name": "Anna Daviduk", "link": "https://stackoverflow.com/users/6779343/anna-daviduk"}, "edited": false, "score": 0, "creation_date": 1472660886, "post_id": 39253617, "comment_id": 65845091, "body": ".rvm/gems/ruby-2.1.3 . I dont have &quot;attr_accessible&quot;  and &quot;protected_attributes&quot; gem . Maybe that is the reason, I have very old version."}, {"owner": {"reputation": 15, "user_id": 6779343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209505451685521/picture?type=large", "display_name": "Anna Daviduk", "link": "https://stackoverflow.com/users/6779343/anna-daviduk"}, "edited": false, "score": 0, "creation_date": 1472661070, "post_id": 39253617, "comment_id": 65845183, "body": "The same with book.last.  &#39;@book= Book.last   Book Load (1.3ms)  SELECT  &quot;books&quot;.* FROM &quot;books&quot;   ORDER BY &quot;books&quot;.&quot;id&quot; DESC LIMIT 1  =&gt; #&lt;Book id: 2, title: &quot;The Book of Eli&quot;, description: nil, author: &quot;Ger&#228;ten&quot;, created_at: &quot;2016-09-01 13:42:45&quot;, updated_at: &quot;2016-09-01 13:42:45&quot;&gt;&#39;      ..very strange"}, {"owner": {"reputation": 1066, "user_id": 2692292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc9547cefa57fafd20952ccf570251a?s=128&d=identicon&r=PG", "display_name": "romainsalles", "link": "https://stackoverflow.com/users/2692292/romainsalles"}, "edited": false, "score": 0, "creation_date": 1472673206, "post_id": 39253617, "comment_id": 65851816, "body": "In your <b>Gemfile.lock</b>, which version of rails to you have? (here: <code>rails (5.0.0.1)</code>, the version is 5.0.0.1)."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472658268, "post_id": 39253879, "comment_id": 65843629, "body": "This is a comment not an answer."}, {"owner": {"reputation": 15, "user_id": 6779343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209505451685521/picture?type=large", "display_name": "Anna Daviduk", "link": "https://stackoverflow.com/users/6779343/anna-daviduk"}, "edited": false, "score": 0, "creation_date": 1472663697, "post_id": 39253879, "comment_id": 65846534, "body": "Where I can check params hash? Do you mean this : &#39;def book_params       \tparams.require(:book).permit(:description, :title,  :author)       end&#39;"}, {"owner": {"reputation": 108, "user_id": 4061698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b6a8f09e39df1462c69c9cd2e776fd?s=128&d=identicon&r=PG&f=1", "display_name": "prashant", "link": "https://stackoverflow.com/users/4061698/prashant"}, "edited": false, "score": 0, "creation_date": 1472664563, "post_id": 39253879, "comment_id": 65847024, "body": "no, if you are running app on your local in development mode, then check the log where your rails server is running. When you submit the form, log would be generating there. There you can see the params hash passed to that action."}], "tags": [], "owner": {"reputation": 108, "user_id": 4061698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b6a8f09e39df1462c69c9cd2e776fd?s=128&d=identicon&r=PG&f=1", "display_name": "prashant", "link": "https://stackoverflow.com/users/4061698/prashant"}, "is_accepted": false, "score": 0, "last_activity_date": 1472658271, "last_edit_date": 1472658271, "creation_date": 1472658222, "answer_id": 39253879, "question_id": 39253617, "link": "https://stackoverflow.com/questions/39253617/why-attribute-description-returns-nil/39253879#39253879", "title": "why attribute :description returns nil", "body": "<p>Check params hash passed to create action to create book. I think description would be missing.</p>\n\n<p>Can you please paste the params hash here ?</p>\n"}], "owner": {"reputation": 15, "user_id": 6779343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209505451685521/picture?type=large", "display_name": "Anna Daviduk", "link": "https://stackoverflow.com/users/6779343/anna-daviduk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472661545, "creation_date": 1472657390, "last_edit_date": 1472661545, "question_id": 39253617, "link": "https://stackoverflow.com/questions/39253617/why-attribute-description-returns-nil", "title": "why attribute :description returns nil", "body": "<p>I can't find the error why attribute <code>:description</code> returns <code>nil</code>.\nFrom <code>rails console</code>:</p>\n\n<pre><code>@book = Book.first\n# Book Load (0.7ms)  SELECT  \"books\".* FROM \"books\"   ORDER BY \"books\".\"id\" ASC LIMIT 1\n#=&gt; #&lt;Book id: 1, title: \"A Game of Thrones\", description: nil, author: \"George R. R. Martin \", created_at: \"2016-09-01 13:27:09\", updated_at: \"2016-09-01 13:27:09\"&gt; \n</code></pre>\n\n<p><code>books_controller.rb</code></p>\n\n<pre><code>class BooksController &lt; ApplicationController\n\n  before_action :find_book, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @books = Book.all.order(\"created_at DESC\")\n  end\n\n  def show\n    @book = Book.find(params[:id])\n  end\n\n  def new\n    @book = Book.new\n  end\n\n  def create\n    @book = Book.new(book_params)\n\n    if @book.save\n      redirect_to root_path\n    else\n      render 'new'\n    end\n  end\n\n  private\n\n  def book_params\n    params.require(:book).permit(:description, :title,  :author)\n  end\n\n  def find_book\n    @book = Book.find(params[:id])\n  end\n\nend\n</code></pre>\n\n<p><code>_form.html.erb</code></p>\n\n\n\n<pre><code>&lt;%= f.input :title, label: \"Book Title\" %&gt;\n&lt;%= f.input :description %&gt;\n&lt;%= f.input :author %&gt;\n&lt;%= f.button :submit %&gt;\n</code></pre>\n\n\n\n<p>'show.html.erb'</p>\n\n<pre><code>&lt;h2&gt;&lt;%= @book.title %&gt;&lt;/h2&gt;\n&lt;h3&gt;&lt;%= @book.author %&gt;&lt;/h3&gt;\n&lt;h2&gt;&lt;%= @book.description %&gt;&lt;/h2&gt;\n</code></pre>\n\n<p>routs.rb</p>\n\n<p>'Rails.application.routes.draw do\n  resources :books\n  root 'books#index'\nend'</p>\n"}, {"tags": ["ruby", "sequel"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6779286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUfcR.jpg?s=128&g=1", "display_name": "Steve S.", "link": "https://stackoverflow.com/users/6779286/steve-s"}, "edited": false, "score": 0, "creation_date": 1472821200, "post_id": 39255227, "comment_id": 65919687, "body": "Thanks Jeremy...  The ultimate goal of my attempt at using pagination was to be able to roll through large datasets without loading it all in memory at once. Since I can do that by just using .each on the regular dataset, I don&#39;t really have to use paging. I agree that this is likely a problem with the teradata adapter."}], "tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1472662946, "creation_date": 1472662946, "answer_id": 39255227, "question_id": 39253549, "link": "https://stackoverflow.com/questions/39253549/sequelmodel-paginate-each-page-only-returns-first-page-of-data/39255227#39255227", "title": "Sequel::Model paginate/each_page only returns first page of data", "body": "<p>Maybe <code>page.first</code> is removing the offset from the dataset?  I can't recreate your results.  It's possible the issue is in the teradata adapter (which is external adapter not part of Sequel itself).  You may want to try <code>page.from_self.first</code>, or <code>page.limit(1).all[0]</code> and see if the results are different, as well as post an SQL log (which you can probably generate using <code>tera_db.loggers &lt;&lt; Logger.new($stdout)</code>)</p>\n"}], "owner": {"reputation": 13, "user_id": 6779286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUfcR.jpg?s=128&g=1", "display_name": "Steve S.", "link": "https://stackoverflow.com/users/6779286/steve-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 374, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472662946, "creation_date": 1472657195, "question_id": 39253549, "link": "https://stackoverflow.com/questions/39253549/sequelmodel-paginate-each-page-only-returns-first-page-of-data", "title": "Sequel::Model paginate/each_page only returns first page of data", "body": "<p>I know I am very close to getting this code working, but must be missing something simple. </p>\n\n<p>I have a series of teradata and oracle tables which I've abstracted using sequel::model. Ive loaded the pagination extension to the database. I can get a dataset returned but no matter what I do, I can't get it to give me anything other than the first page. </p>\n\n<p>Here is an example of how Ive abstracted the tables. </p>\n\n<pre><code>module MyDB\n   class MyTable&lt; Sequel::Model(tera_db[\"#{$env[:my_db]}__my_table\".to_sym])\n      @factory_name = :my_factory\n      set_primary_key [:my_primary_key]\n      @typecast_on_assignment = false\n   end\nend\n</code></pre>\n\n<p>Here is how Ive implemented some test code around each_page</p>\n\n<pre><code>MyDB::MyTable.order(:my_primary_key).each_page(1000) do |page|\n   p page.current_page_record_count\n   p page.count\n   p page.first\nend\n</code></pre>\n\n<p>There are 87,675 records in the dataset. The last two iterations output from this loop are: </p>\n\n<p>1000</p>\n\n<p>1000</p>\n\n<p>values={:key1=>12345, :key2=>14.58, :key3=> 155.44}</p>\n\n<p>675</p>\n\n<p>1000</p>\n\n<p>values={:key1=>12345, :key2=>14.58, :key3=> 155.44}</p>\n\n<p>So...the proper number of pages are being created. And the underlying count of paged records is correct. But when I try to get the actual values in the page, it only gets the records from the first page including the record count.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["ruby", "string", "buffer"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1472656854, "post_id": 39253219, "comment_id": 65842684, "body": "Mutating a shared variable across threads is non-deterministic in MRI."}], "answers": [{"comments": [{"owner": {"reputation": 1036, "user_id": 2862506, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/77c34b0d2ce5de52863e0081abed5640?s=128&d=identicon&r=PG&f=1", "display_name": "0xAffe", "link": "https://stackoverflow.com/users/2862506/0xaffe"}, "edited": false, "score": 0, "creation_date": 1473418313, "post_id": 39253453, "comment_id": 66144078, "body": "I will accept this answer, because it might be a good way for others, even tough it didn&#39;t work for me. I&#39;m doing an interpreter and sometimes the interpreter expects more input. In that case I just ask the user for more input. Queues didn&#39;t work, because my read-thread will die if the queue is empty."}], "tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": true, "score": 2, "last_activity_date": 1472656896, "creation_date": 1472656896, "answer_id": 39253453, "question_id": 39253219, "link": "https://stackoverflow.com/questions/39253219/ruby-stringio-for-concurrent-reading-and-writing/39253453#39253453", "title": "Ruby StringIO for concurrent reading and writing", "body": "<p>You should consider using a <a href=\"http://ruby-doc.org/core-2.3.1/Queue.html\" rel=\"nofollow\">Queue</a>.  If you do not need thread safety, then a simple array might be fine too.</p>\n"}, {"tags": [], "owner": {"reputation": 6512, "user_id": 479017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22ae097c3ff959de22ef4e352e2b5272?s=128&d=identicon&r=PG", "display_name": "Duke", "link": "https://stackoverflow.com/users/479017/duke"}, "is_accepted": false, "score": 0, "last_activity_date": 1572376022, "creation_date": 1572376022, "answer_id": 58613904, "question_id": 39253219, "link": "https://stackoverflow.com/questions/39253219/ruby-stringio-for-concurrent-reading-and-writing/58613904#58613904", "title": "Ruby StringIO for concurrent reading and writing", "body": "<p>If your program is single-threaded, try coroutines, aka blocks.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def do_stuff\n  yield rand(100)\nend\n\n100.times do\n  do_stuff { |response| puts response }\nend\n\n</code></pre>\n"}], "owner": {"reputation": 1036, "user_id": 2862506, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/77c34b0d2ce5de52863e0081abed5640?s=128&d=identicon&r=PG&f=1", "display_name": "0xAffe", "link": "https://stackoverflow.com/users/2862506/0xaffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 768, "favorite_count": 0, "accepted_answer_id": 39253453, "answer_count": 2, "score": 3, "last_activity_date": 1572376022, "creation_date": 1472656139, "question_id": 39253219, "link": "https://stackoverflow.com/questions/39253219/ruby-stringio-for-concurrent-reading-and-writing", "title": "Ruby StringIO for concurrent reading and writing", "body": "<p>I'm looking for some <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/stringio/rdoc/StringIO.html\" rel=\"nofollow\">StringIO</a>-similar class, that allows me to write and read concurrently from different parts of my program.<br>\nFrom one part of the program I want to write (append) characters to the buffer, from another part I want to read them.   </p>\n\n<p>The problem with StringIO is the following:  </p>\n\n<pre><code>buffer = StringIO.new\nbuffer.write \"Foobar\"      # Write to the buffer\nbuffer.rewind              # Move the pointer to beginning\nbuffer.getc                #=&gt; F\nbuffer.getc                #=&gt; o\n\nbuffer.write(\"something\")  # Write more to the buffer\nbuffer.string              #=&gt; Fosomething\nbuffer.getc                #=&gt; nil\nbuffer.pos                 #=&gt; 11\n</code></pre>\n\n<p>Whenever I write to the buffer, it is written to the current position. Aterwards the position is moved to the last written characters.</p>\n\n<p>What I need is a StringBuffer with two seperate positions for reading and writing, instead of only one. Does something like this exist in ruby or do I have to do in on my own?</p>\n"}, {"tags": ["ruby", "apache", "fastcgi", "mod-fcgid", "fcgid"], "answers": [{"tags": [], "owner": {"reputation": 747, "user_id": 4473858, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh6.googleusercontent.com/-0gSPQeIfbB4/AAAAAAAAAAI/AAAAAAAABUI/oQNW0_x0vo0/photo.jpg?sz=128", "display_name": "Garreth", "link": "https://stackoverflow.com/users/4473858/garreth"}, "is_accepted": false, "score": 0, "last_activity_date": 1472725370, "creation_date": 1472725370, "answer_id": 39268961, "question_id": 39253208, "link": "https://stackoverflow.com/questions/39253208/fcgi-ruby-gem-not-found-when-using-apache/39268961#39268961", "title": "FCGI Ruby Gem not found when using apache", "body": "<p>My problem was caused by the fact that Ruby was installed using RVM.  There was some issue with the script from apache accessing some parts of the RVM instillation.  The solution was to remove the RVM ruby install and reinstall ruby from source.</p>\n"}], "owner": {"reputation": 747, "user_id": 4473858, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh6.googleusercontent.com/-0gSPQeIfbB4/AAAAAAAAAAI/AAAAAAAABUI/oQNW0_x0vo0/photo.jpg?sz=128", "display_name": "Garreth", "link": "https://stackoverflow.com/users/4473858/garreth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472725370, "creation_date": 1472656107, "question_id": 39253208, "link": "https://stackoverflow.com/questions/39253208/fcgi-ruby-gem-not-found-when-using-apache", "title": "FCGI Ruby Gem not found when using apache", "body": "<p>I am using Apache with FastCGI to run a ruby application.  I have installed the apache fcgi module and also the Ruby fcgi gem.</p>\n\n<p>When I run the fcgi script 'search.fcgi' like so</p>\n\n<pre><code>ruby search.fcgi\n</code></pre>\n\n<p>It runs successfully.  However when starting Apache I get the following error in my log file when it tries to run the same script:</p>\n\n<pre><code>/usr/local/rvm/rubies/ruby-2.1.8/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- fcgi (LoadError)\nfrom /usr/local/rvm/rubies/ruby-2.1.8/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nfrom /home/user/fcgi/search.fcgi:13:in `&lt;main&gt;'\n</code></pre>\n\n<p>Line 13 in search.fcgi is simply\n<code>require 'fcgi'</code></p>\n\n<p>It appears as though when running through Apache it is unable to detect the installed gem.  I have loaded irb and and run <code>require 'fcgi'</code> which returns true.</p>\n\n<p>Am I missing something here?  Some path or config item I need to set?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1472655171, "post_id": 39252750, "comment_id": 65841502, "body": "Not sure what you desired output is but <code>VALUES.map(&amp;:to_i).shuffle.each_slice(4).map{|a| a.count {|e| e &gt; 0} }</code> will return an <code>Array</code> with a size of 4 of the elements counted as being greater than 0."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1472656057, "post_id": 39252750, "comment_id": 65842130, "body": "I&#39;m curious \u2013 what is your algorithm supposed to accomplish?"}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1472656765, "post_id": 39252750, "comment_id": 65842623, "body": "Point about the ArgumentError is that <code>%w{1 2 3}</code> creates an array of Strings (&#39;letters&#39;, which are unclear about how to behave when asked if greater than 0), not numbers."}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1472655390, "post_id": 39252922, "comment_id": 65841658, "body": "Why are you creating an array of strings, only to convert them back into integers? Just create an array of integers."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1472655426, "post_id": 39252922, "comment_id": 65841679, "body": "Good point. Made the changes. I was working on the existing steps taken by OP."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1472655537, "post_id": 39252922, "comment_id": 65841765, "body": "You are STILL creating an array of strings, only to covert them back into integers."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1472655575, "post_id": 39252922, "comment_id": 65841783, "body": "<code>[-5, -4, -3, -2, -1, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5]</code> -- there."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1472655604, "post_id": 39252922, "comment_id": 65841813, "body": "Instead of <code>s.select{ |x| x &gt; 0 }.count</code> you can use <code>s.count { |x| x &gt; 0 }</code> or \u2013 in recent Ruby&#39;s \u2013 <code>s.count(&amp;:positive?)</code>"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1472655655, "post_id": 39252922, "comment_id": 65841846, "body": "@stefan, Tom: Thanks. Did the changes. :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1472655844, "post_id": 39252922, "comment_id": 65841977, "body": "Just one minor nitpick: <a href=\"http://ruby-doc.org/core-2.3.1/Kernel.html#method-i-rand\" rel=\"nofollow noreferrer\"><code>rand</code></a> is also a global function, I&#39;d use another name."}, {"owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "edited": false, "score": 0, "creation_date": 1472656019, "post_id": 39252922, "comment_id": 65842096, "body": "Thanks for the inputs guys! I&#39;ve pretty much just been copy/paste/hacking at other bits of code that I&#39;ve found on the net. Still working on learning Ruby properly ;)  Addendum... Would like to +1 this answer but I have 0 reputation -.-"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1472663852, "post_id": 39252922, "comment_id": 65846609, "body": "There&#39;s no need for <code>.to_a</code>."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1472664146, "post_id": 39252922, "comment_id": 65846771, "body": "@CarySwoveland: Thanks. I should have been careful while crafting this answer. :D I used OP&#39;s existing steps and just highlighted where thing was wrong."}], "tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": false, "score": 2, "last_activity_date": 1472664094, "last_edit_date": 1472664094, "creation_date": 1472655236, "answer_id": 39252922, "question_id": 39252750, "link": "https://stackoverflow.com/questions/39252750/using-ruby-how-can-i-get-a-count-for-all-positive-numbers-from-a-slice-of-an-ar/39252922#39252922", "title": "Using Ruby, how can I get a count for all positive numbers from a slice of an array?", "body": "<p><code>rand.each_slice(4).to_a</code> doens't convert the original array in slice. You need to assign it to a variable before you operate further.</p>\n\n<pre><code>VALUES = [-5, -4, -3, -2, -1, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5]\n#=&gt; [-5, -4, -3, -2, -1, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5]\n\nrandom_arr = VALUES.shuffle\n#=&gt; [2, 5, 4, -4, 0, 0, -1, 0, -5, 1, -3, 0, 0, -2, 0, 3]\n\nslice = random_arr.each_slice(4)\n#=&gt; [[2, 5, 4, -4], [0, 0, -1, 0], [-5, 1, -3, 0], [0, -2, 0, 3]]\n\nslice.map { |s| s.count{ |x| x &gt; 0 } }\n# =&gt; [3, 0, 1, 1]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "edited": false, "score": 1, "creation_date": 1472656244, "post_id": 39253122, "comment_id": 65842256, "body": "Tom,  this is also a really slick answer but I&#39;m not entirely sure how to get the outputs after the .shuffle steps ;-;"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "edited": false, "score": 0, "creation_date": 1472656381, "post_id": 39253122, "comment_id": 65842345, "body": "You didn&#39;t really specify which outputs you actually wanted ;)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "edited": false, "score": 0, "creation_date": 1472656450, "post_id": 39253122, "comment_id": 65842403, "body": "Anyway, you can just perform these steps one at a time, and save variables along the way, if you wish. For example: <code>shuffled = VALUES.shuffle; sliced = shuffled.each_slice(4); ....</code>"}, {"owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "edited": false, "score": 0, "creation_date": 1472656496, "post_id": 39253122, "comment_id": 65842440, "body": "Yeah... I guess I really only explained the -functional- parts that I wanted... d-oh...  The idea is to be able to grab the values so that I can assign them to other strings... i.e. character attributes for an RPG"}, {"owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "edited": false, "score": 0, "creation_date": 1472656936, "post_id": 39253122, "comment_id": 65842744, "body": "I think I got what I was looking for with big props to everyone here :D"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 1, "last_activity_date": 1472655847, "creation_date": 1472655847, "answer_id": 39253122, "question_id": 39252750, "link": "https://stackoverflow.com/questions/39252750/using-ruby-how-can-i-get-a-count-for-all-positive-numbers-from-a-slice-of-an-ar/39253122#39253122", "title": "Using Ruby, how can I get a count for all positive numbers from a slice of an array?", "body": "<p>Here's more of a \"code golf\" answer:</p>\n\n<pre><code>VALUES = [-5, -4, -3, -2, -1, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5]\n\nVALUES\n  .shuffle                         # shuffle the array\n  .each_slice(4)                   # split into equal* parts\n  .map{ |s| s.count(&amp;:positive?) } # count up the values greater than zero\n  .shuffle                         # and shuffle those counts\n</code></pre>\n\n<p>*If your original array's length is not divisible by 4, then the last slice will be shorter than the rest.</p>\n"}, {"tags": [], "owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "is_accepted": false, "score": 0, "last_activity_date": 1472657244, "creation_date": 1472657244, "answer_id": 39253567, "question_id": 39252750, "link": "https://stackoverflow.com/questions/39252750/using-ruby-how-can-i-get-a-count-for-all-positive-numbers-from-a-slice-of-an-ar/39253567#39253567", "title": "Using Ruby, how can I get a count for all positive numbers from a slice of an array?", "body": "<p>This is what I ended up with. Big thanks for everyone inputs :D</p>\n\n<pre><code>VALUES = [-5, -4, -3, -2, -1, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5]\n\nshuffled = VALUES.shuffle;\n\nputs \"The shuffled values are #{shuffled}\"\n\nsliced = shuffled\n  .each_slice(4)\n  .map{ |s| s.count(&amp;:positive?) }\n  .shuffle;\n\nputs \"The sliced values are #{sliced}\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "edited": false, "score": 0, "creation_date": 1472664166, "post_id": 39255461, "comment_id": 65846783, "body": "Cary, thank you for commenting.   The shuffle is more about pseudo-randomizing choices that would otherwise be made by a human. What I am doing is essentially making a quick-n-dirty way to assign values that have no human bias. Hence I&#39;m not super worried about probabilities."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "edited": false, "score": 0, "creation_date": 1472664528, "post_id": 39255461, "comment_id": 65847001, "body": "Your second shuffle is analogous to <code>arr.shuffle.shuffle</code> instead of <code>arr.shuffle</code>. If you compare the probability distributions of the returned values with and without a final <code>.shuffle</code>, you would find they are identical. That&#39;s why I say the final shuffle serves no purpose."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1472663911, "creation_date": 1472663911, "answer_id": 39255461, "question_id": 39252750, "link": "https://stackoverflow.com/questions/39252750/using-ruby-how-can-i-get-a-count-for-all-positive-numbers-from-a-slice-of-an-ar/39255461#39255461", "title": "Using Ruby, how can I get a count for all positive numbers from a slice of an array?", "body": "<pre><code>arr = [-5, -4, -3, -2, -1, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5]\n\narr.shuffle.map { |n| n&gt;0 ? 1 : 0 }.each_slice(4).map { |a| a.reduce(:+) }\n  #=&gt; [1, 1, 0, 3]\n</code></pre>\n\n<p>From a probabilistic standpoint, shuffling the returned array serves no purpose.</p>\n"}], "owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1307, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1472664094, "creation_date": 1472654759, "question_id": 39252750, "link": "https://stackoverflow.com/questions/39252750/using-ruby-how-can-i-get-a-count-for-all-positive-numbers-from-a-slice-of-an-ar", "title": "Using Ruby, how can I get a count for all positive numbers from a slice of an array?", "body": "<p>I am working on a, seemingly, simple Ruby application that I would eventually like to port to Rails. However I am getting stuck on understanding how, best, to slice the array so that I can evaluate the elements. </p>\n\n<p>NOTE: I am not worried about golfing the code, but any suggestions or cleanup would be greatly appreciated :D</p>\n\n<p><strong>In brief:</strong> </p>\n\n<p>I want to be able to shuffle an array, slice it into equal parts, count up the values greater than zero, and shuffle those counts.</p>\n\n<p>Plaintext Example:</p>\n\n<pre><code>Set an array to (-2 -1 0 0 1 2)\n\nShuffle so that (0 2 -1 0 1 -2)\n\nFirst slice (0 2)\n    Count of values &gt; 0 = 1\n\nSecond slice (-1 0)\n    Count of values &gt; 0 = 0\n\nThird slice (1 -2)\n    Count of values &gt; 0 = 1\n\nArray of counted values is now = (1 0 1)\n\nWhich are shuffled into (0 1 1)\n</code></pre>\n\n<p><strong>Long Version:</strong> </p>\n\n<p>Given an array of:</p>\n\n<pre><code>VALUES = %w(-5 -4 -3 -2 -1 0 0 0 0 0 0 1 2 3 4 5)\n</code></pre>\n\n<p>Shuffle those values:</p>\n\n<pre><code>rand = VALUES.shuffle\n</code></pre>\n\n<p>Then slice the array into 4 parts (each slice should have 4 elements)</p>\n\n<pre><code>rand.each_slice(4).to_a\n</code></pre>\n\n<p>Now I want to take each slice and count the number of values above zero.\nHowever this is where I am getting stuck. </p>\n\n<p>Namely, how do I pick slice1, slice2...sliceN?</p>\n\n<p>I also tried to run with:</p>\n\n<pre><code>rand[0..3].select {|e| e &gt; 0}.size\n</code></pre>\n\n<p>But that gives me an error (after commenting out the rand.each_slice(4).to_a)</p>\n\n<pre><code>ruby char_gen.rb \nchar_gen.rb:18:in `&gt;': comparison of String with 0 failed (ArgumentError)\n    from char_gen.rb:18:in `block in &lt;main&gt;'\n    from char_gen.rb:18:in `select'\n    from char_gen.rb:18:in `&lt;main&gt;'\n</code></pre>\n\n<p>I think if I can get passed this I can figure out the rest, but the -FINAL- Step would be to build an array from the counted values and shuffle those as well...</p>\n\n<p>Here is the full block of code that I am hacking away at. </p>\n\n<pre><code>    # Initialize some variables\n    VALUES = %w(-5 -4 -3 -2 -1 0 0 0 0 0 0 1 2 3 4 5)\n\n    # Shuffle skill values\n    rand = VALUES.shuffle\n\n    #rand.each_slice(4).to_a\n\n    rand[0..3].select {|e| e &gt; 0}.size\n\n    #group2 = rand[4..7]\n    #group3 = rand[8..11]\n    #group4 = rand[12..15]\n\n    #violence = group1.select {|e| e &lt; 0}.count\n    #charisma = group2.select {|e| e &lt; 0}.count\n    #intellegence = stat[2]\n    #mechanics = stat[3]\n\n\n    puts(\"\n    -------------------\n    Stats:\n    -------------------\n    Violence: #{violence}, Charisma: #{charisma}, Intellegence: #{intellegence}, Mechanics: #{mechanics}\n\n    -------------------\n    Skills:\n    -------------------\n    Athletics: #{rand[0]}   Guns: #{rand[4]}    Melee: #{rand[8]}   Throw: #{rand[12]}\n    Science: #{rand[1]} Psychology: #{rand[5]}  Bureaucracy: #{rand[9]} Local\\ Knowledge: #{rand[13]}\n    Bluff: #{rand[2]}   Charm: #{rand[6]}   Intimidate: #{rand[10]} Stealth: #{rand[14]}\n    Operate: #{rand[3]}     Engineer: #{rand[7]}    Program: #{rand[11]}    Demolitions: #{rand[15]}\n\n    \")\n</code></pre>\n"}, {"tags": ["ruby", "monitoring"], "comments": [{"owner": {"reputation": 637, "user_id": 4689935, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QEHKO.png?s=128&g=1", "display_name": "Crixx93", "link": "https://stackoverflow.com/users/4689935/crixx93"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 2, "creation_date": 1472654507, "post_id": 39252525, "comment_id": 65841000, "body": "Genetic algorithms"}, {"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 2, "creation_date": 1472654700, "post_id": 39252525, "comment_id": 65841157, "body": "What form does the &quot;saved state&quot; take?"}, {"owner": {"reputation": 637, "user_id": 4689935, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QEHKO.png?s=128&g=1", "display_name": "Crixx93", "link": "https://stackoverflow.com/users/4689935/crixx93"}, "edited": false, "score": 2, "creation_date": 1472654878, "post_id": 39252525, "comment_id": 65841282, "body": "Save the state of all the variables, and resume the execution using that saved state"}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 1, "creation_date": 1472654949, "post_id": 39252525, "comment_id": 65841339, "body": "Why in the world you would use ruby for such complex thing? You better use some super computer or at least buy you a power saver. LOL. upvoted."}, {"owner": {"reputation": 637, "user_id": 4689935, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QEHKO.png?s=128&g=1", "display_name": "Crixx93", "link": "https://stackoverflow.com/users/4689935/crixx93"}, "edited": false, "score": 3, "creation_date": 1472655602, "post_id": 39252525, "comment_id": 65841810, "body": "My intention is to teach college studens about genetic algorithms, because ruby language is so easy to read (compare to C/C++) I chose that one, but dimensionality of the problem is more troublesome than I thought."}, {"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 2, "creation_date": 1472655759, "post_id": 39252525, "comment_id": 65841916, "body": "Leaving aside the time to save/recover, you probably want to look at Marshal: <a href=\"http://ruby-doc.org/core-2.3.1/Marshal.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.3.1/Marshal.html</a>."}, {"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 0, "creation_date": 1472656162, "post_id": 39252525, "comment_id": 65842203, "body": "You would then want to <code>Marshal.load()</code> or <code>Marhsal.restore()</code>."}, {"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 0, "creation_date": 1472656263, "post_id": 39252525, "comment_id": 65842270, "body": "To be clear: you save the state with <code>Marshal.dump()</code>, and restore with those."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 2, "creation_date": 1472656362, "post_id": 39252525, "comment_id": 65842337, "body": "Depending on the complexity of the state you have to save, a way to do this is saving a JSON string with all needed stated. At restart you&#39;d just need to read it, put everything in the correct place and go ahead with your processing."}, {"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 2, "creation_date": 1472657177, "post_id": 39252525, "comment_id": 65842878, "body": "@EddeAlmeida: The one advantage <code>Marshal.dump()&#47;.restore</code> has over JSON is storage density, and thus load time (depending on the data/implementation, the time to create objects from the raw data is generally similar, but the read time from the disk can be very different if you have data in binary form)."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 1, "creation_date": 1472657879, "post_id": 39252525, "comment_id": 65843357, "body": "@DerrellDurrett, thanks for the explanation. I&#39;ll read a bit more about Marshal.dump(). Never used it, &#39;cause I never had to store this much information. For small block, JSON is enough."}], "answers": [{"tags": [], "owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "is_accepted": true, "score": 1, "last_activity_date": 1472657983, "creation_date": 1472657983, "answer_id": 39253795, "question_id": 39252525, "link": "https://stackoverflow.com/questions/39252525/how-can-i-restart-a-ruby-program/39253795#39253795", "title": "How can I restart a Ruby program?", "body": "<p>(Comments into an answer.)</p>\n\n<p>You'll probably want to use <code>Marshal[1]</code>. To save state, you <code>dump()</code>, and to restore state you either <code>load()</code> or <code>restore()</code>. The details of the process are going to strongly depend on the way the objects are interconnected, and the amount of data you are saving. If the data are small enough, you can even use JSON, and forgo <code>Marshal</code>.</p>\n\n<p>You may have to experiment with the best choice for <strong><em>how</em></strong> to <code>dump()/load()</code> your data, because if you have one over-arching object loading all of that data into memory can really bog you down (even with an enormous amount of memory available to you). You may instead need to break that monolith into many smaller objects that are individually marshalled, and then marshal their container. </p>\n"}], "owner": {"reputation": 637, "user_id": 4689935, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QEHKO.png?s=128&g=1", "display_name": "Crixx93", "link": "https://stackoverflow.com/users/4689935/crixx93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 39253795, "answer_count": 1, "score": 1, "last_activity_date": 1472657983, "creation_date": 1472654167, "question_id": 39252525, "link": "https://stackoverflow.com/questions/39252525/how-can-i-restart-a-ruby-program", "title": "How can I restart a Ruby program?", "body": "<p>I'm running a ruby program for a personal project, and because it takes around 20 hours to finish the execution I want to \"save the state\" of the program every hour or so, in case there is power outage in my building.</p>\n\n<p>I want to be able to restart the execution using the last \"saved state\" of the program. But I don't know if there is tool for doing that or if have to hard code the entire thing my self.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1066, "user_id": 2692292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc9547cefa57fafd20952ccf570251a?s=128&d=identicon&r=PG", "display_name": "romainsalles", "link": "https://stackoverflow.com/users/2692292/romainsalles"}, "edited": false, "score": 0, "creation_date": 1472673083, "post_id": 39251516, "comment_id": 65851747, "body": "Hugo, did my solution worked for you? Do you need more information?"}], "answers": [{"tags": [], "owner": {"reputation": 1497, "user_id": 1006398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f83262f6f5908e9fb61d743a66644ea6?s=128&d=identicon&r=PG", "display_name": "Hugo Demiglio", "link": "https://stackoverflow.com/users/1006398/hugo-demiglio"}, "is_accepted": false, "score": 0, "last_activity_date": 1472651357, "creation_date": 1472651357, "answer_id": 39251517, "question_id": 39251516, "link": "https://stackoverflow.com/questions/39251516/how-to-disable-rails-5-x-request-id-header/39251517#39251517", "title": "How to disable Rails 5 &quot;X-Request-Id&quot; header", "body": "<p>You can disable this header information, setting by nil this request attribute.</p>\n\n<pre><code>request.request_id = nil\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7048, "user_id": 594349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d39ea5b1c103f8d6631d495165a583e?s=128&d=identicon&r=PG", "display_name": "Spajus", "link": "https://stackoverflow.com/users/594349/spajus"}, "edited": false, "score": 0, "creation_date": 1486386880, "post_id": 39253529, "comment_id": 71308590, "body": "This is the correct answer, in alignment with official documentation: <a href=\"http://guides.rubyonrails.org/configuring.html#configuring-middleware\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/configuring.html#configuring-middlewa&zwnj;&#8203;re</a>"}], "tags": [], "owner": {"reputation": 1066, "user_id": 2692292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc9547cefa57fafd20952ccf570251a?s=128&d=identicon&r=PG", "display_name": "romainsalles", "link": "https://stackoverflow.com/users/2692292/romainsalles"}, "is_accepted": false, "score": 5, "last_activity_date": 1472660342, "last_edit_date": 1472660342, "creation_date": 1472657134, "answer_id": 39253529, "question_id": 39251516, "link": "https://stackoverflow.com/questions/39251516/how-to-disable-rails-5-x-request-id-header/39253529#39253529", "title": "How to disable Rails 5 &quot;X-Request-Id&quot; header", "body": "<p>You can disable it by adding this line in your <strong>config/application.rb</strong> file:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>config.middleware.delete ActionDispatch::RequestId\n</code></pre>\n"}], "owner": {"reputation": 1497, "user_id": 1006398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f83262f6f5908e9fb61d743a66644ea6?s=128&d=identicon&r=PG", "display_name": "Hugo Demiglio", "link": "https://stackoverflow.com/users/1006398/hugo-demiglio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 981, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1472660342, "creation_date": 1472651357, "question_id": 39251516, "link": "https://stackoverflow.com/questions/39251516/how-to-disable-rails-5-x-request-id-header", "title": "How to disable Rails 5 &quot;X-Request-Id&quot; header", "body": "<p>On Rails 5, all requests includes an unique identifier accessible on application and displayed on HTTP response headers, called \"X-Request-Id\".</p>\n\n<p>This identifier is very useful for debugging and logging, but I'm having trouble with this in a very old web client.</p>\n\n<p>I tried to clear the header but it did not work.</p>\n\n<pre><code>response.headers['X-Request-Id'] = nil\n</code></pre>\n\n<p>How can I remove this information from headers?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "string"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1472650979, "post_id": 39251236, "comment_id": 65838276, "body": "What kind of year? Or any 4 subsequent digits?"}, {"owner": {"reputation": 1484, "user_id": 1601772, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/C4CW3.jpg?s=128&g=1", "display_name": "ABrowne", "link": "https://stackoverflow.com/users/1601772/abrowne"}, "edited": false, "score": 0, "creation_date": 1472651223, "post_id": 39251236, "comment_id": 65838480, "body": "Please can you provide some examples of the data you are parsing. Without context in the data it&#39;s impossible to provide a solution. If you used the above on the following it would trigger false positives: &#39;The code to the safe is 0034&#39;. or &#39;we should meet up are 0800 for coffee&#39;"}, {"owner": {"reputation": 3032, "user_id": 6341510, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/28d1da138966966ff82959171f915dd3?s=128&d=identicon&r=PG&f=1", "display_name": "AaronDT", "link": "https://stackoverflow.com/users/6341510/aarondt"}, "edited": false, "score": 0, "creation_date": 1472651653, "post_id": 39251236, "comment_id": 65838846, "body": "Thank you very much for the quick response! In my case false positives are not that big of a problem since I expect them not to occur due to the nature of the data. I updated my code to give an example of the data I parse"}], "answers": [{"comments": [{"owner": {"reputation": 3032, "user_id": 6341510, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/28d1da138966966ff82959171f915dd3?s=128&d=identicon&r=PG&f=1", "display_name": "AaronDT", "link": "https://stackoverflow.com/users/6341510/aarondt"}, "edited": false, "score": 0, "creation_date": 1472652011, "post_id": 39251591, "comment_id": 65839110, "body": "Thank you very much, this is great! How would I include the case where I have a year as &quot;2014/15&quot; and I want to extract only &quot;2014&quot; ?"}, {"owner": {"reputation": 3032, "user_id": 6341510, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/28d1da138966966ff82959171f915dd3?s=128&d=identicon&r=PG&f=1", "display_name": "AaronDT", "link": "https://stackoverflow.com/users/6341510/aarondt"}, "edited": false, "score": 0, "creation_date": 1472652890, "post_id": 39251591, "comment_id": 65839736, "body": "Thank you very much! Do I still use the .scan ? i.e. .scan(s[/\\b\\d{4}\\b/])?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 3032, "user_id": 6341510, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/28d1da138966966ff82959171f915dd3?s=128&d=identicon&r=PG&f=1", "display_name": "AaronDT", "link": "https://stackoverflow.com/users/6341510/aarondt"}, "edited": false, "score": 0, "creation_date": 1472653030, "post_id": 39251591, "comment_id": 65839827, "body": "See <a href=\"https://ideone.com/Md0Msr\" rel=\"nofollow noreferrer\">ideone.com/Md0Msr</a>: <code>&quot;1948, 2945 and 3456 are years here.&quot;.scan(&#47;\\b\\d{4}\\b&#47;)</code> -&gt; <code>1948</code>, <code>2945</code>, <code>3456</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1472653276, "post_id": 39251591, "comment_id": 65840011, "body": "Note that you can omit <code>!</code> and <code>.nil?</code> in an <code>if</code> clause, i.e. <code>if string =~ &#47;\\b\\d{4}\\b&#47;</code> works just as well."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1472653379, "post_id": 39251591, "comment_id": 65840101, "body": "@Stefan Yeah, I just wanted to output similar to <i>TRUE</i> :) I edited the answer to include this way of using the regex."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1472653424, "last_edit_date": 1472653424, "creation_date": 1472651581, "answer_id": 39251591, "question_id": 39251236, "link": "https://stackoverflow.com/questions/39251236/extract-year-from-string-check-if-successful/39251591#39251591", "title": "Extract year from string, check if successful", "body": "<p>If you want to match standalone 4 digit string, you may consider a regex with word boundaries:</p>\n\n<pre><code>!('It is 2016 now.' =~ /\\b\\d{4}\\b/).nil? # =&gt; true\n</code></pre>\n\n<p>or - a more real world sample usage:</p>\n\n<pre><code>if string =~ /\\b\\d{4}\\b/ \n</code></pre>\n\n<p>The <code>\\b\\d{4}\\b</code> matches any 4 digits that are not preceded nor followed with word characters (digits, letters or underscore), so there will be no match in <code>02312345</code>.</p>\n\n<p>Also, in case you want to precise to current century, or the 20th century, you may use  <code>/\\b(?:19|20)\\d{2}\\b/</code> regex.</p>\n\n<p>To extract the digits, use <code>s[/\\b\\d{4}\\b/]</code>.</p>\n\n<pre><code>'It was in 2015/16.'[/\\b\\d{4}\\b/] # =&gt; 2015\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/vwJGrB\" rel=\"nofollow\">Ruby demo</a></p>\n"}], "owner": {"reputation": 3032, "user_id": 6341510, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/28d1da138966966ff82959171f915dd3?s=128&d=identicon&r=PG&f=1", "display_name": "AaronDT", "link": "https://stackoverflow.com/users/6341510/aarondt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 39251591, "answer_count": 1, "score": 1, "last_activity_date": 1472653424, "creation_date": 1472650718, "last_edit_date": 1472651556, "question_id": 39251236, "link": "https://stackoverflow.com/questions/39251236/extract-year-from-string-check-if-successful", "title": "Extract year from string, check if successful", "body": "<p>I would like to check whether a year was found within a string. Something like  </p>\n\n<pre><code>if string.scan(/\\d{4}/).first == TRUE\n</code></pre>\n\n<p>for example a string looks like \"there were 3 earthquakes in 2007\"</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 378, "user_id": 6757245, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f324b8903d6c8ceae5f7f1897c8080af?s=128&d=identicon&r=PG&f=1", "display_name": "bill", "link": "https://stackoverflow.com/users/6757245/bill"}, "edited": false, "score": 0, "creation_date": 1472651161, "post_id": 39251283, "comment_id": 65838419, "body": "Ok gonna take a look at this and other answers, I added another magic example by the way"}], "tags": [], "owner": {"reputation": 1228, "user_id": 336881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8dc8f86200d462a189ced773511798f?s=128&d=identicon&r=PG", "display_name": "michau", "link": "https://stackoverflow.com/users/336881/michau"}, "is_accepted": false, "score": 0, "last_activity_date": 1472650838, "creation_date": 1472650838, "answer_id": 39251283, "question_id": 39250963, "link": "https://stackoverflow.com/questions/39250963/understanding-passing-by-value-vs-reference-in-this-ruby-example/39251283#39251283", "title": "Understanding passing by value vs. reference in this Ruby example", "body": "<p>It actually has nothing to do with passing parameters to methods. I extracted important parts from your examples:</p>\n\n<pre><code>baz = 'value'\nbar = baz\nbar = 'reference'\nputs baz\nbar = baz\nbar.replace 'reference'\nputs baz\n</code></pre>\n\n<p>You may think of variables as pointers. When you use <code>=</code>, you make a variable point to something different, and the original value remains unchanged, and can be accessed through other variables that point at it. But when you use <code>replace</code>, you change the content of the string the variable points at.</p>\n"}, {"comments": [{"owner": {"reputation": 378, "user_id": 6757245, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f324b8903d6c8ceae5f7f1897c8080af?s=128&d=identicon&r=PG&f=1", "display_name": "bill", "link": "https://stackoverflow.com/users/6757245/bill"}, "edited": false, "score": 0, "creation_date": 1472651074, "post_id": 39251324, "comment_id": 65838343, "body": "You totally lost me on the second experiment part.. my brain doesent get it -__-"}, {"owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "edited": false, "score": 0, "creation_date": 1472651225, "post_id": 39251324, "comment_id": 65838486, "body": "<code>bar</code> is not initialised to a copy of <code>baz</code> when you call <code>foo</code>. It refers to the same object in this first moment."}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 378, "user_id": 6757245, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f324b8903d6c8ceae5f7f1897c8080af?s=128&d=identicon&r=PG&f=1", "display_name": "bill", "link": "https://stackoverflow.com/users/6757245/bill"}, "edited": false, "score": 0, "creation_date": 1472651504, "post_id": 39251324, "comment_id": 65838717, "body": "@bill I reworded. If that&#39;s not clearer, let me know what part isn&#39;t clear."}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "edited": false, "score": 0, "creation_date": 1472651577, "post_id": 39251324, "comment_id": 65838784, "body": "@FranMartinez it is initialized to a copy of the <i>reference</i>."}, {"owner": {"reputation": 378, "user_id": 6757245, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f324b8903d6c8ceae5f7f1897c8080af?s=128&d=identicon&r=PG&f=1", "display_name": "bill", "link": "https://stackoverflow.com/users/6757245/bill"}, "edited": false, "score": 0, "creation_date": 1472652050, "post_id": 39251324, "comment_id": 65839139, "body": "OoOoOoOoOoOoOo Makes sense.. Is the first example the same logic for my newly edited example?"}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1472652327, "post_id": 39251324, "comment_id": 65839338, "body": "Actually it&#39;s the second and third examples that are almost the same. I added that to my answer."}, {"owner": {"reputation": 378, "user_id": 6757245, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f324b8903d6c8ceae5f7f1897c8080af?s=128&d=identicon&r=PG&f=1", "display_name": "bill", "link": "https://stackoverflow.com/users/6757245/bill"}, "edited": false, "score": 0, "creation_date": 1472653176, "post_id": 39251324, "comment_id": 65839938, "body": "But I thought the third example is the same as the first, we use <code>=</code> since <code>a_hash</code> is a copy it doesent change the original <code>hash</code>"}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1472653559, "post_id": 39251324, "comment_id": 65840237, "body": "In the third example you copy <code>hash</code> (which a reference to an object) to <code>a_hash</code> (which is a copy, but refers to the same object). You then call a method (<code>[]=</code>) on that object which changes its state. That&#39;s much like example 2, where you called <code>replace</code> on the string."}, {"owner": {"reputation": 378, "user_id": 6757245, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f324b8903d6c8ceae5f7f1897c8080af?s=128&d=identicon&r=PG&f=1", "display_name": "bill", "link": "https://stackoverflow.com/users/6757245/bill"}, "edited": false, "score": 0, "creation_date": 1472654071, "post_id": 39251324, "comment_id": 65840649, "body": "I never knew calling <code>[]</code> is calling a method... so basically almost in all cases we will get <code>reference</code>?. The only time we really get value is when directly setting the method variable to something else (<code>bar = reference</code>)"}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1472654608, "post_id": 39251324, "comment_id": 65841077, "body": "That is, in the first example, the method gets a copy of the reference but you don&#39;t do anything to it before you overwrite it, so the object that <code>baz</code> points to is unchanged."}, {"owner": {"reputation": 378, "user_id": 6757245, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f324b8903d6c8ceae5f7f1897c8080af?s=128&d=identicon&r=PG&f=1", "display_name": "bill", "link": "https://stackoverflow.com/users/6757245/bill"}, "edited": false, "score": 0, "creation_date": 1472739696, "post_id": 39251324, "comment_id": 65882790, "body": "Hi, I asked a new question here <a href=\"http://stackoverflow.com/questions/39274077/what-is-the-usage-of-self-in-this-ruby-example\" title=\"what is the usage of self in this ruby example\">stackoverflow.com/questions/39274077/&hellip;</a>. If you have time you can check it out"}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 1, "last_activity_date": 1472652306, "last_edit_date": 1472652306, "creation_date": 1472650922, "answer_id": 39251324, "question_id": 39250963, "link": "https://stackoverflow.com/questions/39250963/understanding-passing-by-value-vs-reference-in-this-ruby-example/39251324#39251324", "title": "Understanding passing by value vs. reference in this Ruby example", "body": "<p>Ruby is pass-by-value, but the values are references to objects.</p>\n\n<p>In your first experiment, <code>baz</code> is a reference to the string <code>\"value\"</code>. <code>bar</code> is initialized to a copy of <code>baz</code> (that is, a copy of the reference) when you call <code>foo</code>. You then overwrite <code>bar</code> with a reference to the string <code>\"reference\"</code>. Since <code>bar</code> is a copy, overwriting it doesn't change <code>baz</code>.</p>\n\n<p>In your second experiment, again, <code>baz</code> is a reference to the string <code>\"value\"</code> and <code>bar</code> is initialized to a copy of <code>baz</code> when you call <code>foo</code>. This time you don't overwrite <code>bar</code>, but call a method on it. Although <code>bar</code> is a copy of <code>baz</code>, they refer to the same object (the string <code>\"value\"</code>). Calling the method changes the state of that object. You then call <code>to_s</code> on <code>baz</code> (indirectly, by substituting it into <code>\"Ruby is pass-by-#{baz}\"</code>), and <code>to_s</code> returns the new state.</p>\n\n<p>Your third experiment is a lot like the second. In the method, you change the state of the object referred to by the copy of the reference, then, outside the method, you read the new state back through the original reference.</p>\n"}, {"tags": [], "owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1472651563, "last_edit_date": 1495541309, "creation_date": 1472650947, "answer_id": 39251335, "question_id": 39250963, "link": "https://stackoverflow.com/questions/39250963/understanding-passing-by-value-vs-reference-in-this-ruby-example/39251335#39251335", "title": "Understanding passing by value vs. reference in this Ruby example", "body": "<p>In first case you use <code>bar = 'reference'</code> which creates new object. In second one <code>.replace</code> changes the object you apply it to. You can ensure this by <code>.object_id</code> method. For example:</p>\n\n<pre><code>def foo_eql(bar)\n  bar = 'reference'\n  puts bar.object_id\n  bar\nend\n\ndef foo_replace(bar)\n  bar.replace 'reference'\n  puts bar.object_id\n  bar\nend\n\nbaz = 'value'\nputs baz.object_id #Here you will get original baz object_id\nres1 = foo_eql(baz) #Here you will get printed new object_id\nres2 = foo_replace(baz) #Here you will get printed original baz object_id\nputs \"foo_eql: Ruby is pass-by-#{res1}\"\n=&gt; foo_eql: Ruby is pass-by-reference\nputs \"foo_replace: Ruby is pass-by-#{res2}\"\n=&gt; foo_replace: Ruby is pass-by-reference\n</code></pre>\n\n<p>So there is no magic at all. In your example with hashes you do not create new Hash object but modify existing one. But you can create new one with method like this:</p>\n\n<pre><code>def my_foo(a_hash)\n  a_hash = a_hash.merge({\"test\" =&gt; \"reference\"})\nend\nmy_foo(hash)\nputs \"Ruby is pass-by-#{hash[\"test\"]}\"\n</code></pre>\n\n<p>Basically  you pass the reference to an object in \"<strong>value</strong>\" way. For better understanding check <a href=\"https://stackoverflow.com/a/1872159/4470392\">this post</a> and comments to it.</p>\n"}, {"comments": [{"owner": {"reputation": 378, "user_id": 6757245, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f324b8903d6c8ceae5f7f1897c8080af?s=128&d=identicon&r=PG&f=1", "display_name": "bill", "link": "https://stackoverflow.com/users/6757245/bill"}, "edited": false, "score": 0, "creation_date": 1472651338, "post_id": 39251350, "comment_id": 65838587, "body": "it seems .<code>replace</code> doesent*  change the <code>object_id</code>, why is that? Also I added another  example wit hashes if you would like to take a look at that."}], "tags": [], "owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "is_accepted": false, "score": 1, "last_activity_date": 1472650969, "creation_date": 1472650969, "answer_id": 39251350, "question_id": 39250963, "link": "https://stackoverflow.com/questions/39250963/understanding-passing-by-value-vs-reference-in-this-ruby-example/39251350#39251350", "title": "Understanding passing by value vs. reference in this Ruby example", "body": "<p>Very interesting thing.</p>\n\n<p>Play with the <code>object_id</code>s, you will see what ruby is doing bellow the scenes:</p>\n\n<pre><code>def foo(bar)\n  puts bar.object_id\n  bar = 'reference'\n  puts bar.object_id\nend\n\nbaz = 'value'\nputs baz.object_id\nfoo(baz)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>&gt; baz = 'value'\n=&gt; \"value\"\n\n&gt; puts baz.object_id\n70241392845040\n\n&gt; foo(baz)\n70241392845040\n70241392866940\n</code></pre>\n\n<p>After the local assign <code>bar = 'reference'</code>, the local variable <code>bar</code> will reference another object, so it won't change the original one.</p>\n\n<p>It seems that in some cases it will make a <code>dup</code> of your object.</p>\n"}, {"tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": false, "score": 1, "last_activity_date": 1472651129, "creation_date": 1472651129, "answer_id": 39251422, "question_id": 39250963, "link": "https://stackoverflow.com/questions/39250963/understanding-passing-by-value-vs-reference-in-this-ruby-example/39251422#39251422", "title": "Understanding passing by value vs. reference in this Ruby example", "body": "<p>Maybe this will help to understand it:</p>\n\n<pre><code>x = 'ab'\nx.object_id\n=&gt; 70287848748000 # a place in memory\n\nx = 'cd'\nx.object_id\n=&gt; 70287848695760 # other place in memory (other object)\n\nx.replace('xy')\nx.object_id\n=&gt; 70287848695760 # the same place in memory (the same object)\n</code></pre>\n"}], "owner": {"reputation": 378, "user_id": 6757245, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f324b8903d6c8ceae5f7f1897c8080af?s=128&d=identicon&r=PG&f=1", "display_name": "bill", "link": "https://stackoverflow.com/users/6757245/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 39251324, "answer_count": 5, "score": 2, "last_activity_date": 1472652306, "creation_date": 1472650033, "last_edit_date": 1495540301, "question_id": 39250963, "link": "https://stackoverflow.com/questions/39250963/understanding-passing-by-value-vs-reference-in-this-ruby-example", "title": "Understanding passing by value vs. reference in this Ruby example", "body": "<p>After reading <a href=\"https://stackoverflow.com/questions/1872110/is-ruby-pass-by-reference-or-by-value\">Is ruby pass by reference or value?</a> I have learned a lot, but I am left with more questions than I had before reading it (which I suppose is good).</p>\n\n<p>Consider the following example </p>\n\n<pre><code>def foo(bar) \n  bar = 'reference' \nend\nbaz = 'value' \nfoo(baz)\nputs \"Ruby is pass-by-#{baz}\"\n</code></pre>\n\n<p><strong>Output</strong>\n<code>Ruby is pass-by-value</code></p>\n\n<p><strong>Here is my attempt to dissect how this works:</strong></p>\n\n<p>First, in the global scope <code>baz</code> has the value <code>value</code>.</p>\n\n<p>Now <code>foo</code> takes a parameter, whatever you pass into it, is on a <code>local</code> level. </p>\n\n<p>Therefore when we pass <code>baz</code> in, there is ANOTHER <code>baz</code> that is equal to <code>reference</code> but this is on the <strong>local level</strong>, as a result, when we puts this on a <strong>global</strong> level it prints <code>value</code>.</p>\n\n<p><strong>Now consider another example</strong></p>\n\n<pre><code>def foo(bar)\n  bar.replace 'reference' \nend\nbaz = 'value'\nfoo(baz)\nputs \"Ruby is pass-by-#{baz}\"\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<p><code>Ruby is pass-by-reference</code></p>\n\n<p>If what I said above is true, does the <code>.replace</code> method here change the global <code>baz</code>? Am I interpreting this correctly? Please feel free to point out any mistakes in my attempts, I have no clue if im on the right track.</p>\n\n<p>Thanks!</p>\n\n<p>EDIT</p>\n\n<p><strong>More Magic</strong></p>\n\n<pre><code>def my_foo(a_hash)\n  a_hash[\"test\"]=\"reference\"\nend;\n\nhash = {\"test\"=&gt;\"value\"}\nmy_foo(hash)\nputs \"Ruby is pass-by-#{hash[\"test\"]}\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 438, "user_id": 5356066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fbc5de86d0f92b9fcef669e6337a127d?s=128&d=identicon&r=PG&f=1", "display_name": "ineedahero", "link": "https://stackoverflow.com/users/5356066/ineedahero"}, "edited": false, "score": 0, "creation_date": 1472650261, "post_id": 39250996, "comment_id": 65837748, "body": "I tried that too, same error: undefined method &quot;emails&quot;"}], "tags": [], "owner": {"reputation": 9254, "user_id": 625365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ab819ffb4ef53da36f840e46dd72e967?s=128&d=identicon&r=PG", "display_name": "spike", "link": "https://stackoverflow.com/users/625365/spike"}, "is_accepted": false, "score": 1, "last_activity_date": 1472650129, "creation_date": 1472650129, "answer_id": 39250996, "question_id": 39250944, "link": "https://stackoverflow.com/questions/39250944/rails-associations-dont-work/39250996#39250996", "title": "Rails Associations don&#39;t work", "body": "<p>You're confusing the concept of classes and instances. You need an instance of the <code>User</code> class in order to build associated relations. The error you're getting (<code>NoMethodError: undefined method emails for #&lt;Class:0x00000006c16e88&gt;</code>) hints to this, since it's telling you you're trying to call the method <code>emails</code> on a Class object.</p>\n\n<p>Try something like:</p>\n\n<pre><code>my_user = User.new\nmy_user.emails.build\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 438, "user_id": 5356066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fbc5de86d0f92b9fcef669e6337a127d?s=128&d=identicon&r=PG&f=1", "display_name": "ineedahero", "link": "https://stackoverflow.com/users/5356066/ineedahero"}, "edited": false, "score": 0, "creation_date": 1472650420, "post_id": 39251001, "comment_id": 65837889, "body": "result: undefined method `emails&#39; for #&lt;User:0x00000004c34318&gt;"}, {"owner": {"reputation": 1364, "user_id": 5737512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nfjfF.jpg?s=128&g=1", "display_name": "Kaushlendra Tomar", "link": "https://stackoverflow.com/users/5737512/kaushlendra-tomar"}, "reply_to_user": {"reputation": 438, "user_id": 5356066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fbc5de86d0f92b9fcef669e6337a127d?s=128&d=identicon&r=PG&f=1", "display_name": "ineedahero", "link": "https://stackoverflow.com/users/5356066/ineedahero"}, "edited": false, "score": 0, "creation_date": 1472651058, "post_id": 39251001, "comment_id": 65838327, "body": "please check after remove unloadable this will be work"}, {"owner": {"reputation": 438, "user_id": 5356066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fbc5de86d0f92b9fcef669e6337a127d?s=128&d=identicon&r=PG&f=1", "display_name": "ineedahero", "link": "https://stackoverflow.com/users/5356066/ineedahero"}, "edited": false, "score": 0, "creation_date": 1472651721, "post_id": 39251001, "comment_id": 65838895, "body": "Woah, in my user class I had a trailing comma that caused an error -- but now I get this error: &quot;ActiveRecord::UnknownAttributeError: unknown attribute &#39;user_id&#39; for Email&quot;"}, {"owner": {"reputation": 1364, "user_id": 5737512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nfjfF.jpg?s=128&g=1", "display_name": "Kaushlendra Tomar", "link": "https://stackoverflow.com/users/5737512/kaushlendra-tomar"}, "reply_to_user": {"reputation": 438, "user_id": 5356066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fbc5de86d0f92b9fcef669e6337a127d?s=128&d=identicon&r=PG&f=1", "display_name": "ineedahero", "link": "https://stackoverflow.com/users/5356066/ineedahero"}, "edited": false, "score": 0, "creation_date": 1472666670, "post_id": 39251001, "comment_id": 65848259, "body": "add the user_id field in your email table"}], "tags": [], "owner": {"reputation": 1364, "user_id": 5737512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nfjfF.jpg?s=128&g=1", "display_name": "Kaushlendra Tomar", "link": "https://stackoverflow.com/users/5737512/kaushlendra-tomar"}, "is_accepted": false, "score": 1, "last_activity_date": 1472650142, "creation_date": 1472650142, "answer_id": 39251001, "question_id": 39250944, "link": "https://stackoverflow.com/questions/39250944/rails-associations-dont-work/39251001#39251001", "title": "Rails Associations don&#39;t work", "body": "<p>Please use like this </p>\n\n<pre><code>@email = User.first.emails.build\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 438, "user_id": 5356066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fbc5de86d0f92b9fcef669e6337a127d?s=128&d=identicon&r=PG&f=1", "display_name": "ineedahero", "link": "https://stackoverflow.com/users/5356066/ineedahero"}, "edited": false, "score": 0, "creation_date": 1472663649, "post_id": 39255368, "comment_id": 65846503, "body": "So making it &quot;belongs_to&quot; doesn&#39;t already generate user_id? interesting"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 438, "user_id": 5356066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fbc5de86d0f92b9fcef669e6337a127d?s=128&d=identicon&r=PG&f=1", "display_name": "ineedahero", "link": "https://stackoverflow.com/users/5356066/ineedahero"}, "edited": false, "score": 0, "creation_date": 1472665580, "post_id": 39255368, "comment_id": 65847593, "body": "@ineedahero: <a href=\"http://edgeguides.rubyonrails.org/association_basics.html#the-belongs-to-association\" rel=\"nofollow noreferrer\">Read more</a> about it."}], "tags": [], "owner": {"reputation": 146, "user_id": 4312983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95a0511f986dc14803c6bd64fc589bbe?s=128&d=identicon&r=PG&f=1", "display_name": "kclowes", "link": "https://stackoverflow.com/users/4312983/kclowes"}, "is_accepted": true, "score": 2, "last_activity_date": 1472663561, "creation_date": 1472663561, "answer_id": 39255368, "question_id": 39250944, "link": "https://stackoverflow.com/questions/39250944/rails-associations-dont-work/39255368#39255368", "title": "Rails Associations don&#39;t work", "body": "<p>First, you'll need to make sure you have a <code>user_id</code> attribute on your email table in the database. If you don't have one, you can add it with a migration. </p>\n\n<p>Then, you need to tell Rails which instance of a user's emails you want to look at. So, you'll need to make sure you have a user in the database (<code>user = User.create</code>) and then that user's emails can be found using <code>user.emails</code>. </p>\n"}], "owner": {"reputation": 438, "user_id": 5356066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fbc5de86d0f92b9fcef669e6337a127d?s=128&d=identicon&r=PG&f=1", "display_name": "ineedahero", "link": "https://stackoverflow.com/users/5356066/ineedahero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 39255368, "answer_count": 3, "score": 0, "last_activity_date": 1472663561, "creation_date": 1472649981, "last_edit_date": 1472651788, "question_id": 39250944, "link": "https://stackoverflow.com/questions/39250944/rails-associations-dont-work", "title": "Rails Associations don&#39;t work", "body": "<p>I've read through many tutorials, and copied their code exactly, yet what they claim works for them doesn't work for me.</p>\n\n<p>I'm making a most basic \"has_many\" and \"belongs_to\" association, but rails refuses to acknowledge any association whatsoever.</p>\n\n<p>A user \"has_many\" emails. Emails \"belong_to\" user. Here's my code:</p>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  unloadable\n\n  has_many :emails\n  accepts_nested_attributes_for :emails,\n    :allow_destroy =&gt; true,\n  #  :reject_if     =&gt; :all_blank\nend\n</code></pre>\n\n<p>email.rb</p>\n\n<pre><code>class Email &lt; ActiveRecord::Base\n  unloadable\n\n  belongs_to :user\nend\n</code></pre>\n\n<p>Then, in the console:</p>\n\n<pre><code>User.emails.build\nNoMethodError: undefined method `emails' for #&lt;Class:0x00000006c16e88&gt;\n</code></pre>\n\n<p>Indeed, this \"NoMethodError\" persists no matter what.</p>\n\n<p>As of now, my guess is that a capacitor in my hardware burnt out while I was installing rails, causing everything to work except this one thing. Or maybe it's something else :p </p>\n\n<p>EDIT:</p>\n\n<p>Another console attempt:</p>\n\n<pre><code>my_user = User.new\nmy_user.emails.build\n</code></pre>\n\n<p>Also results in an undefined \"emails\" method.</p>\n\n<p>I noticed that my original user class has a bad comma at the end; removing that, I get this error:</p>\n\n<pre><code>ActiveRecord::UnknownAttributeError: unknown attribute 'user_id' for Email.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "bundle", "metasploit"], "comments": [{"owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "edited": false, "score": 0, "creation_date": 1472648657, "post_id": 39250399, "comment_id": 65836613, "body": "can you please give your gemfile and ruby version here?"}, {"owner": {"reputation": 415, "user_id": 4857623, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/E42ao.jpg?s=128&g=1", "display_name": "marc_s", "link": "https://stackoverflow.com/users/4857623/marc-s"}, "reply_to_user": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "edited": false, "score": 0, "creation_date": 1472648893, "post_id": 39250399, "comment_id": 65836777, "body": "@SantoshSharma Dont know how to do that(Im a newbie), can you tell me how to do so?"}, {"owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "edited": false, "score": 0, "creation_date": 1472656472, "post_id": 39250399, "comment_id": 65842421, "body": "please see link that u r given here. in that question gemfile available"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1524132772, "post_id": 39250399, "comment_id": 86852240, "body": "I&#39;m voting to close this question as off-topic because it is about using a non-programming tool, and SO is for programming questions."}], "answers": [{"comments": [{"owner": {"reputation": 415, "user_id": 4857623, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/E42ao.jpg?s=128&g=1", "display_name": "marc_s", "link": "https://stackoverflow.com/users/4857623/marc-s"}, "edited": false, "score": 0, "creation_date": 1472691222, "post_id": 39253964, "comment_id": 65858139, "body": "Up voted because this caused <code>bundle install</code> to work just fine, But I&#39;m still getting errors on running <code>msfconsole</code>"}, {"owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "reply_to_user": {"reputation": 415, "user_id": 4857623, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/E42ao.jpg?s=128&g=1", "display_name": "marc_s", "link": "https://stackoverflow.com/users/4857623/marc-s"}, "edited": false, "score": 0, "creation_date": 1472834125, "post_id": 39253964, "comment_id": 65927933, "body": "It might still be helpful to others if you posted the error and solution ;) Either way nice work on fixing it!"}], "tags": [], "owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "is_accepted": true, "score": 6, "last_activity_date": 1472658477, "last_edit_date": 1492086990, "creation_date": 1472658477, "answer_id": 39253964, "question_id": 39250399, "link": "https://stackoverflow.com/questions/39250399/metasploit-update-error-in-bundle-install-nokogiri-1-6-8/39253964#39253964", "title": "Metasploit Update: Error In Bundle Install ( nokogiri 1.6.8 )", "body": "<p>@RUser98 -- </p>\n\n<p>I found this answer on the Unix Stack Exchange site maybe it will help you?</p>\n\n<blockquote>\n  <p>If you get a error installing <code>nokogiri-1.6.8</code> try to:</p>\n\n<pre><code>sudo apt-get install libxslt-dev libxml2-dev zlib1g-dev --yes \n</code></pre>\n</blockquote>\n\n<p>Source: \n<a href=\"https://unix.stackexchange.com/a/298159\">https://unix.stackexchange.com/a/298159</a></p>\n\n<p>I've also had numerous issues with installing/updating Metasploit on Kali each time something new so I feel your pain </p>\n"}, {"tags": [], "owner": {"reputation": 776, "user_id": 2442149, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1bd5ca914d6d68a00f18c36b5b03a755?s=128&d=identicon&r=PG", "display_name": "bpereira", "link": "https://stackoverflow.com/users/2442149/bpereira"}, "is_accepted": false, "score": 6, "last_activity_date": 1514567939, "creation_date": 1514567939, "answer_id": 48026084, "question_id": 39250399, "link": "https://stackoverflow.com/questions/39250399/metasploit-update-error-in-bundle-install-nokogiri-1-6-8/48026084#48026084", "title": "Metasploit Update: Error In Bundle Install ( nokogiri 1.6.8 )", "body": "<p>If you're having this problem On MacOS when trying to install Nokogiri, you can run <code>xcode-select --install</code> and try again :)</p>\n"}], "owner": {"reputation": 415, "user_id": 4857623, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/E42ao.jpg?s=128&g=1", "display_name": "marc_s", "link": "https://stackoverflow.com/users/4857623/marc-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4837, "favorite_count": 0, "accepted_answer_id": 39253964, "answer_count": 2, "score": -2, "last_activity_date": 1520239829, "creation_date": 1472648462, "last_edit_date": 1495541848, "question_id": 39250399, "link": "https://stackoverflow.com/questions/39250399/metasploit-update-error-in-bundle-install-nokogiri-1-6-8", "title": "Metasploit Update: Error In Bundle Install ( nokogiri 1.6.8 )", "body": "<p>Metasploit was working fine until this morning when I updated it with <code>msfupdate</code>, then all went to heck.</p>\n\n<p>Typing <code>msfconsole</code> Now gives me this error:</p>\n\n<pre><code>Could not find nokogiri-1.6.8 in any of the sources\nRun bundle install to install missing gems.\n</code></pre>\n\n<p>I went and typed <code>bundle install</code>.  It was going fine until this happened:</p>\n\n<pre><code>Installing nokogiri 1.6.8 with native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n/usr/bin/ruby2.2 -r ./siteconf20160831-24032-1wim46x.rb extconf.rb --use-system-libraries\nUsing pkg-config version 1.1.7\nchecking if the C compiler accepts ... yes\nBuilding nokogiri using system libraries.\nchecking for libxml-2.0... no\nchecking for libxslt... no\nchecking for libexslt... no\nERROR: cannot discover where libxml2 is located on your system. please make sure pkg-config is installed.\n* extconf.rb failed *\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/usr/bin/$(RUBY_BASE_NAME)2.2\n    --help\n    --clean\n    --use-system-libraries\n    --with-zlib-dir\n    --without-zlib-dir\n    --with-zlib-include\n    --without-zlib-include=${zlib-dir}/include\n    --with-zlib-lib\n    --without-zlib-lib=${zlib-dir}/lib\n    --with-xml2-dir\n    --without-xml2-dir\n    --with-xml2-include\n    --without-xml2-include=${xml2-dir}/include\n    --with-xml2-lib\n    --without-xml2-lib=${xml2-dir}/lib\n    --with-libxml-2.0-config\n    --without-libxml-2.0-config\n    --with-pkg-config\n    --without-pkg-config\n    --with-pkg-config\n    --without-pkg-config\n    --with-override-variables\n    --without-override-variables\n    --with-xslt-dir\n    --without-xslt-dir\n    --with-xslt-include\n    --without-xslt-include=${xslt-dir}/include\n    --with-xslt-lib\n    --without-xslt-lib=${xslt-dir}/lib\n    --with-libxslt-config\n    --without-libxslt-config\n    --with-pkg-config\n    --without-pkg-config\n    --with-exslt-dir\n    --without-exslt-dir\n    --with-exslt-include\n    --without-exslt-include=${exslt-dir}/include\n    --with-exslt-lib\n    --without-exslt-lib=${exslt-dir}/lib\n    --with-libexslt-config\n    --without-libexslt-config\n    --with-pkg-config\n    --without-pkg-config\n\nextconf failed, exit code 1\n\nGem files will remain installed in /usr/share/metasploit-framework/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.8 for inspection.\nResults logged to /usr/share/metasploit-framework/vendor/bundle/ruby/2.2.0/extensions/x86-linux/2.2.0/nokogiri-1.6.8/gem_make.out\nUsing rack-test 0.6.3\nUsing faraday 0.9.2\nUsing jsobfu 0.4.1\nUsing packetfu 1.1.11\nUsing rex-arch 0.1.1\nUsing rex-ole 0.1.2\nUsing rex-random_identifier 0.1.0\nUsing rex-zip 0.1.0\nUsing simplecov 0.12.0\nUsing activesupport 4.2.7.1\nUsing tzinfo-data 1.2016.6\nAn error occurred while installing nokogiri (1.6.8), and Bundler cannot\ncontinue.\nMake sure that gem install nokogiri -v '1.6.8' succeeds before bundling.\n</code></pre>\n\n<p>I started searching and came across <a href=\"https://stackoverflow.com/questions/29020478/error-installing-nokogiri-on-bundle-install-but-already-installed\">this</a>, which suggested that I should run <code>bundle config build.nokogiri --use-system-libraries</code></p>\n\n<p>But again, nothing.  I also tried <code>gem install nokogiri -v 1.6.8</code>.  I also tried even older versions: <code>gem install nokogiri -v 1.6.0</code>.</p>\n\n<p>I'm using Kali.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> I think the solution is that I should reinstall Kali; One thing i learned from all this is to <strong>NEVER</strong> update MSF :D</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "rails-routing", "lets-encrypt"], "comments": [{"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 1, "creation_date": 1472648590, "post_id": 39250336, "comment_id": 65836560, "body": "Have you taken a look at this? <a href=\"http://stackoverflow.com/questions/5369654/why-do-routes-with-a-dot-in-a-parameter-fail-to-match\" title=\"why do routes with a dot in a parameter fail to match\">stackoverflow.com/questions/5369654/&hellip;</a>"}, {"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 0, "creation_date": 1472648630, "post_id": 39250336, "comment_id": 65836592, "body": "Or this? <a href=\"http://www.virtuouscode.com/2010/06/18/rails-3-resource-routes-with-dots-or-how-to-make-a-ruby-developer-go-a-little-bit-insane/\" rel=\"nofollow noreferrer\">virtuouscode.com/2010/06/18/&hellip;</a>"}, {"owner": {"reputation": 518, "user_id": 2130053, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RpKRC.jpg?s=128&g=1", "display_name": "Patrick O&#39;Grady", "link": "https://stackoverflow.com/users/2130053/patrick-ogrady"}, "reply_to_user": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 2, "creation_date": 1472655612, "post_id": 39250336, "comment_id": 65841819, "body": "@steel yes - and both those methods work to add dots within the segment, but it still doesn&#39;t work if the dot is the first character in the segment"}], "answers": [{"tags": [], "owner": {"reputation": 518, "user_id": 2130053, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RpKRC.jpg?s=128&g=1", "display_name": "Patrick O&#39;Grady", "link": "https://stackoverflow.com/users/2130053/patrick-ogrady"}, "is_accepted": true, "score": 1, "last_activity_date": 1472728557, "creation_date": 1472728557, "answer_id": 39270069, "question_id": 39250336, "link": "https://stackoverflow.com/questions/39250336/cant-create-a-route-that-has-a-segment-with-a-leading-dot-in-rails-to-verify-l/39270069#39270069", "title": "Can&#39;t create a route that has a segment with a leading dot in Rails (to verify Let&#39;s Encrypt)", "body": "<p>The problem was with the <strong>rack-zippy</strong> gem. When I removed the gem and the initializer, the route worked fine.</p>\n\n<p>Not sure if the root cause was gzipping in general, this particular gem, or the fact that the gem was apparently redundant for my Rails 5 app. From the <a href=\"https://github.com/eliotsykes/rack-zippy\" rel=\"nofollow\">rack-zippy github page</a>: </p>\n\n<blockquote>\n  <p>Want to use rack-zippy with a Rails v4.2 or greater app? Its\n  recommended you don't! Rails 4.2+ now supports serving gzipped files\n  directly so there's no need for rack-zippy in Rails 4.2+ apps.</p>\n</blockquote>\n\n<p>If anybody else is having a similar issue, I would look for any gems or customization that affect your middleware.</p>\n"}], "owner": {"reputation": 518, "user_id": 2130053, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RpKRC.jpg?s=128&g=1", "display_name": "Patrick O&#39;Grady", "link": "https://stackoverflow.com/users/2130053/patrick-ogrady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 2, "accepted_answer_id": 39270069, "answer_count": 1, "score": 5, "last_activity_date": 1472728557, "creation_date": 1472648299, "question_id": 39250336, "link": "https://stackoverflow.com/questions/39250336/cant-create-a-route-that-has-a-segment-with-a-leading-dot-in-rails-to-verify-l", "title": "Can&#39;t create a route that has a segment with a leading dot in Rails (to verify Let&#39;s Encrypt)", "body": "<p>In my Rails 5 app on Heroku, I'm trying to create a route for this URL: <a href=\"http://beta.example.com/.well-known/acme-challenge/some-key\" rel=\"noreferrer\">http://beta.example.com/.well-known/acme-challenge/some-key</a>, so I can verify my server with Let's Encrypt to get an SSL certificate. But I can't get the route to work with a leading dot or period in any segment of the route, it just returns 404 Not Found.</p>\n\n<p>In other words, the dot at the beginning of <code>.well-known</code> is screwing things up. I can get a route to work without the dot, or if the dot is somewhere else (e.g. <code>well.known</code>), but if the dot is the first character in the segment, it doesn't work.</p>\n\n<p>I started with this:</p>\n\n<pre><code>get \"/.well-known/acme-challenge/:id\" =&gt; \"pages#letsencrypt\"\n</code></pre>\n\n<p>When that didn't work, I tried using a (<a href=\"http://edgeguides.rubyonrails.org/routing.html#dynamic-segments\" rel=\"noreferrer\">dynamic segment</a>):</p>\n\n<pre><code>get ':letsencrypt_route/acme-challenge/:id', to: \"pages#letsencrypt\", letsencrypt_route: /[^\\/]+/\n</code></pre>\n\n<p>This will allow a dot anywhere in the segment... except as the first character, which is where I need it.</p>\n\n<p>Any idea what's causing this? When I try and navigate to a URL that has a leading dot in a segment, it doesn't even show anything in my log, it's just an immediate 404.</p>\n\n<p>I've seen some people having this issue on both Rails 4 and Rails 5, and it's happening for me using either Thin or Puma, and in both development and production. I've also tried using a couple of the letsencrypt gems, but it stalls at the same point.</p>\n\n<p>Here is my Gemfile with the gems in both environments:</p>\n\n<pre><code>source \"https://rubygems.org\"\n\nruby \"2.3.1\"\n\ngem \"rails\", \"5.0.0.1\"\n\ngem \"pg\", \"0.18.4\" # postgresql database\ngem \"twitter-bootstrap-rails\", \"~&gt; 3.2.2\"\n\ngem \"active_median\", \"~&gt; 0.1.0\" # used with chartkick for graph reporting\ngem \"activerecord-session_store\", require: false # save session to database\ngem \"acts-as-taggable-on\", git: \"https://github.com/mbleigh/acts-as-taggable-on\" # tagging\ngem \"administrate\", git: \"https://github.com/heyogrady/administrate\", branch: \"rails5\"\ngem \"analytics-ruby\", \"~&gt; 2.0.0\", require: \"segment/analytics\" # segment.io\ngem \"arel\"\ngem \"autoprefixer-rails\" # for CSS vendor prefixes\ngem \"bootbox-rails\", \"~&gt;0.4\" # wrappers for javascript dialogs\ngem \"bootstrap-switch-rails\" # bootstrap-switch.js\ngem \"bourbon\"\ngem \"bower-rails\" # install front-end components\ngem \"browser\" # For variants support\ngem \"carrierwave\" # for handling file uploads\ngem \"carmen-rails\" # country and region selection\ngem \"chartkick\", \"~&gt; 1.2.4\" # used to provide nice looking charts\ngem \"chronic\" # natural language date parser\ngem \"codemirror-rails\", \"&gt;= 5.11\" # display source code in pattern library\ngem \"coffee-rails\", \"&gt;= 4.1.1\"\ngem \"coffee-script-source\", \"&gt;= 1.8.0\" # Coffee script source\ngem \"country_select\" # HTML list of countries\ngem \"dalli\" # for memcached\ngem \"delayed_job_active_record\", \"&gt;= 4.1\" # background job processing\ngem \"delayed_job_web\", \"&gt;= 1.2.10\" # web interface for delayed job\ngem \"devise\", \"&gt;= 4.2.0\"\ngem \"devise-async\", git: \"https://github.com/mhfs/devise-async\", branch: \"devise-4.x\" # for user authentication\ngem \"flamegraph\" # super pretty flame graphs\ngem \"fog\", require: false # for handling s3\n# gem \"font_assets\" # Handle Cross-Origin Resource Sharing on fonts\ngem \"font_assets\", git: \"https://github.com/ericallam/font_assets\", ref: \"457dcfddc4318e83679e9a0935612924b7717085\"\ngem \"friendly_id\", \"~&gt; 5.1.0\"\ngem \"fullcontact\" # social profile info from fullcontact.com\ngem \"fuzzy_match\" # used by smart_csv_parser for contact &amp; address mapping\ngem \"google-api-client\", \"&lt; 0.9\", require: \"google/api_client\" # connecting to Google API\ngem \"groupdate\", \"~&gt; 2.1.1\" # used with chartkick for graph reporting\ngem \"handy\", git: \"https://github.com/heyogrady/handy\"\ngem \"hike\" # finds files in a set of paths\ngem \"honeybadger\" # for error tracking\ngem \"intercom-rails\" # tracking user behavior\ngem \"jbuilder\", \"&gt;= 2.4.1\" # for building JSON\ngem \"jquery-fileupload-rails\", \"~&gt; 0.4.6\" # file uploads\ngem \"jquery-rails\" # jQuery\ngem \"jquery-ui-rails\" # jQuery UI\ngem \"json\" # for parsing JSON\ngem \"kaminari\" # pagination\ngem \"le\" # logentries\ngem \"less-rails\", \"&gt;= 2.7.1\" # LESS =&gt; CSS\ngem \"lograge\" # better log formatting\ngem \"mandrill-api\" # sending and tracking emails\ngem \"mechanize\" # for screen scraping\ngem \"memory_profiler\" # lets us use rack-mini-profilers GC features\ngem \"mini_magick\" # processing images\ngem \"newrelic_rpm\" # monitor app performance\ngem \"nylas\", \"1.1.0\" # emails, calendar, contacts via Nylas.com\ngem \"oink\"\ngem \"omniauth\" # third party authentication\ngem \"omniauth-google-oauth2\" # Google authentication\ngem \"omnicontacts\" # retrieve contacts from email providers\ngem \"open_uri_redirections\" # allow OpenURI redirections from HTTP to HTTPS\ngem \"paper_trail\" # maintain record of stripe plans &amp; subscriptions\ngem \"prawn-labels\" # PDF labels\ngem \"puma\" # server\ngem \"public_activity\" # for model activity tracking\ngem \"rack-mini-profiler\", require: false # display page load time badge\ngem \"rack-timeout\" # raise error if Puma doesn't respond in given time\ngem \"rack-zippy\" # serve gzipped assets\ngem \"rails-deprecated_sanitizer\" # Our app uses old sanitizer methods.\ngem \"react-rails\", \"~&gt; 1.6.0\"\ngem \"responders\", \"~&gt; 2.0\" # respond_with and respond_to methods\ngem \"rest-client\"\ngem \"sass-rails\", \"&gt;= 5.0.3\"\ngem \"semantic-ui-sass\", git: \"https://github.com/heyogrady/semantic-ui-sass\"\ngem \"select2-rails\" # select/search/dropdown box\ngem \"selenium-webdriver\", require: false # screen-scraping\ngem \"signet\"\ngem \"simple_form\", \"&gt;= 3.2.1\" # forms made easy for rails\ngem \"sinatra\", git: \"https://github.com/sinatra/sinatra\"\ngem \"stripe\", \"~&gt; 1.15.0\" # charging customers\ngem \"stripe_event\" # Stripe webhook integration\ngem \"stackprof\" # a stack profiler\ngem \"state_machines-activemodel\", \"&gt;= 0.4.0.pre\"\ngem \"state_machines-activerecord\", \"&gt;= 0.4.0.pre\"\ngem \"toastr-rails\" # display toaster notifications\ngem \"therubyracer\", platforms: :ruby\ngem \"turbolinks\", \"~&gt; 5.0.0.beta\" # faster page loads\ngem \"twilio-ruby\" # phone and SMS services\ngem \"twitter-typeahead-rails\", \"~&gt; 0.11.1.pre.corejavascript\" # typeahead.js - autocomplete\ngem \"uglifier\", \"&gt;= 1.0.3\"\ngem \"uuidtools\"\ngem \"valid_email\" # email validation\ngem \"wicked\" # multi-page wizard forms\ngem \"yaml_db\", git: \"https://github.com/heyogrady/yaml_db\", branch: \"monkey-patch-rails-5\" # import/export yml-&gt;db\ngem \"yaml_dump\", git: \"https://github.com/vanboom/yaml_dump\" # dump db records to yaml files\n# gem \"zeroclipboard-rails\", \"~&gt; 0.1.1\" # copy to clipboard\n</code></pre>\n"}, {"tags": ["ruby", "performance", "scalability"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472646021, "post_id": 39249429, "comment_id": 65834634, "body": "&quot;that contain the digits 0, 2, 4, 5, 6, 8&quot; - I&#39;m pretty sure that&#39;s a wrong approach for efficient Eratosthenes&#39; sieve. You want to skip the numbers where its <i>last</i> digit is one of those, don&#39;t you?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472646084, "post_id": 39249429, "comment_id": 65834685, "body": "Also, don&#39;t mutate the array you&#39;re currently iterating. This should explain the &quot;doesn&#39;t remove all the numbers I want it to&quot;"}, {"owner": {"reputation": 151, "user_id": 5140582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b90035afc80bb17238a58d0e039eedac?s=128&d=identicon&r=PG&f=1", "display_name": "Ciaran", "link": "https://stackoverflow.com/users/5140582/ciaran"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472646833, "post_id": 39249429, "comment_id": 65835241, "body": "My reasons for removing 0, 2, 4, 5, 6, 8 are separate to my initial search for primes. I already have my primes array and I want to cull that further. Second point is duly noted."}], "answers": [{"comments": [{"owner": {"reputation": 1228, "user_id": 336881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8dc8f86200d462a189ced773511798f?s=128&d=identicon&r=PG", "display_name": "michau", "link": "https://stackoverflow.com/users/336881/michau"}, "edited": false, "score": 0, "creation_date": 1472646916, "post_id": 39249668, "comment_id": 65835320, "body": "The task is not to remove even numbers (primes other than 2 aren&#39;t even anyway), but all numbers that contain even digits."}, {"owner": {"reputation": 151, "user_id": 5140582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b90035afc80bb17238a58d0e039eedac?s=128&d=identicon&r=PG&f=1", "display_name": "Ciaran", "link": "https://stackoverflow.com/users/5140582/ciaran"}, "edited": false, "score": 0, "creation_date": 1472647021, "post_id": 39249668, "comment_id": 65835421, "body": "This does nothing for my already formed list of primes seen as none will be evenly divided by 2. What I&#39;m looking for my program to do is remove primes like 23, 47, 277 etc. because they have 2, 4 and 2 in them respectively."}], "tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 0, "last_activity_date": 1472646466, "creation_date": 1472646466, "answer_id": 39249668, "question_id": 39249429, "link": "https://stackoverflow.com/questions/39249429/efficiency-of-searching-a-large-list-of-numbers-for-certain-digits/39249668#39249668", "title": "Efficiency of searching a large list of numbers for certain digits", "body": "<p>I should think that you're looking for something like:</p>\n\n<pre><code>primes.reject!{|num| num % 2 == 0}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 151, "user_id": 5140582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b90035afc80bb17238a58d0e039eedac?s=128&d=identicon&r=PG&f=1", "display_name": "Ciaran", "link": "https://stackoverflow.com/users/5140582/ciaran"}, "edited": false, "score": 0, "creation_date": 1472647457, "post_id": 39249766, "comment_id": 65835752, "body": "This seems to give me two different answers. If I run the first one I get 1111 primes left in my array and if I run the second I have 3217 primes remaining."}, {"owner": {"reputation": 1228, "user_id": 336881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8dc8f86200d462a189ced773511798f?s=128&d=identicon&r=PG", "display_name": "michau", "link": "https://stackoverflow.com/users/336881/michau"}, "reply_to_user": {"reputation": 151, "user_id": 5140582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b90035afc80bb17238a58d0e039eedac?s=128&d=identicon&r=PG&f=1", "display_name": "Ciaran", "link": "https://stackoverflow.com/users/5140582/ciaran"}, "edited": false, "score": 0, "creation_date": 1472647576, "post_id": 39249766, "comment_id": 65835839, "body": "Ah, sorry, I didn&#39;t notice your list includes 5, I thought it was only even numbers. I&#39;ve edited my answer, try it now."}], "tags": [], "owner": {"reputation": 1228, "user_id": 336881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8dc8f86200d462a189ced773511798f?s=128&d=identicon&r=PG", "display_name": "michau", "link": "https://stackoverflow.com/users/336881/michau"}, "is_accepted": true, "score": 1, "last_activity_date": 1472647507, "last_edit_date": 1472647507, "creation_date": 1472646730, "answer_id": 39249766, "question_id": 39249429, "link": "https://stackoverflow.com/questions/39249429/efficiency-of-searching-a-large-list-of-numbers-for-certain-digits/39249766#39249766", "title": "Efficiency of searching a large list of numbers for certain digits", "body": "<p>The problem with your approach is that each <code>delete</code> rewrites the array, and it's called for every deleted item, so the complexity of the algorithm is O(n^2) instead of O(n).</p>\n\n<p>You should do something like this:</p>\n\n<pre><code>primes.reject!{|num| [\"0\", \"2\", \"4\", \"5\", \"6\", \"8\"].any? { |digit| num.to_s.include?(digit) }}\n</code></pre>\n\n<p>Or simply:</p>\n\n<pre><code>primes.reject!{|num| num.to_s[/[024568]/]}\n</code></pre>\n\n<p>It's just a matter of style, but I'd put everything together in one line (note the lack of <code>!</code> in <code>reject</code> here):</p>\n\n<pre><code>primes = eratosthenes(N).reject{|num| num.to_s[/[024568]/]}\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 5140582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b90035afc80bb17238a58d0e039eedac?s=128&d=identicon&r=PG&f=1", "display_name": "Ciaran", "link": "https://stackoverflow.com/users/5140582/ciaran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 39249766, "answer_count": 2, "score": 0, "last_activity_date": 1472647603, "creation_date": 1472645857, "last_edit_date": 1472647603, "question_id": 39249429, "link": "https://stackoverflow.com/questions/39249429/efficiency-of-searching-a-large-list-of-numbers-for-certain-digits", "title": "Efficiency of searching a large list of numbers for certain digits", "body": "<p>I have the following code where <code>eratosthenes(N)</code> returns an array of primes from 1 to N. What I want to do is remove any numbers from this list that contain the digits 0, 2, 4, 5, 6, 8. My code seems quite inefficient and wrong as it takes about 20 seconds (<code>eratosthenes(N)</code> is instantaneous) to get to just 100,000 and doesn't remove all the numbers I want it to. Is there a better, scalable solution to this problem?</p>\n\n<pre><code>N = 1_000_000\nprimes = eratosthenes(N)\n\nprimes.each do |num|\n  if [\"0\", \"2\", \"4\", \"5\", \"6\", \"8\"].any? { |digit| num.to_s.include?(digit) }\n      primes.delete(num)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "mathematical-expressions"], "comments": [{"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 1, "creation_date": 1472645688, "post_id": 39249294, "comment_id": 65834418, "body": "So what&#39;s the question?"}, {"owner": {"reputation": 1, "user_id": 4545273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fmkjk.jpg?s=128&g=1", "display_name": "Jai Nanda Kumar", "link": "https://stackoverflow.com/users/4545273/jai-nanda-kumar"}, "reply_to_user": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1474025319, "post_id": 39249294, "comment_id": 66375190, "body": "I would want to execute the formula, given that A,B,C have values and return the answer."}], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 0, "last_activity_date": 1472649369, "creation_date": 1472649369, "answer_id": 39250696, "question_id": 39249294, "link": "https://stackoverflow.com/questions/39249294/solving-dynamic-mathematical-formula-with-nested-parentheses-in-ruby/39250696#39250696", "title": "Solving dynamic mathematical formula with nested parentheses in ruby", "body": "<p>You can write a parser for your expressions. Take a look at <a href=\"http://treetop.rubyforge.org/\" rel=\"nofollow\">Treetop</a> or <a href=\"http://kschiess.github.io/\" rel=\"nofollow\">Parslet</a>.</p>\n\n<p>Or take a look at an existing math expression parser like <a href=\"https://github.com/rubysolo/dentaku\" rel=\"nofollow\">Dentaku</a> where you can supply custom functions.</p>\n"}], "owner": {"reputation": 1, "user_id": 4545273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fmkjk.jpg?s=128&g=1", "display_name": "Jai Nanda Kumar", "link": "https://stackoverflow.com/users/4545273/jai-nanda-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1472649369, "creation_date": 1472645471, "last_edit_date": 1472648877, "question_id": 39249294, "link": "https://stackoverflow.com/questions/39249294/solving-dynamic-mathematical-formula-with-nested-parentheses-in-ruby", "title": "Solving dynamic mathematical formula with nested parentheses in ruby", "body": "<p>I am having saving dynamic mathematical formula as string. I have two predefined functions like <code>avg(A,B)</code> and <code>best_of(1,A,B)</code>.The formula can consist of any mathematical operator, with nested parenthesis. </p>\n\n<p>How do I execute the formula in ruby. The following are few formula formats,</p>\n\n<pre><code>avg(A,B,C)+D\n\nbest_of(1,A,B,C)+avg(D,E)\n\navg(best_of(1,A,B)+C+D)+E \n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6760768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xf9tm.jpg?s=128&g=1", "display_name": "Sim", "link": "https://stackoverflow.com/users/6760768/sim"}, "is_accepted": false, "score": -1, "last_activity_date": 1472644823, "creation_date": 1472644823, "answer_id": 39249081, "question_id": 39248985, "link": "https://stackoverflow.com/questions/39248985/ruby-error-array-cant-be-coerced-into-fixnum/39249081#39249081", "title": "Ruby Error: Array can&#39;t be coerced into Fixnum", "body": "<p>Nevermind! I realized that when passing an array using *args, it becomes and array of arrays.</p>\n"}, {"tags": [], "owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "is_accepted": false, "score": 0, "last_activity_date": 1472644850, "creation_date": 1472644850, "answer_id": 39249091, "question_id": 39248985, "link": "https://stackoverflow.com/questions/39248985/ruby-error-array-cant-be-coerced-into-fixnum/39249091#39249091", "title": "Ruby Error: Array can&#39;t be coerced into Fixnum", "body": "<p>The problem is different. In <code>numbers.each</code> you iterate over list of arguments, however with <code>multiply([2, 3, 4, 5])</code> you are passing one argument, which is an array. The list of arguments is <code>[[2, 3, 4, 5]]</code>. So in the only iteration, you are trying to do:</p>\n\n<pre><code>1 *= [2, 3, 4, 5]\n</code></pre>\n\n<p>This basically makes no sense to Ruby, so it throws an error.</p>\n\n<p>You should call <code>multiply</code> method with a list of arguments, not ona array argument:</p>\n\n<p>multiply(2, 3, 4, 5)</p>\n\n<p>Then it will work.</p>\n"}, {"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 1, "last_activity_date": 1472644907, "creation_date": 1472644907, "answer_id": 39249109, "question_id": 39248985, "link": "https://stackoverflow.com/questions/39248985/ruby-error-array-cant-be-coerced-into-fixnum/39249109#39249109", "title": "Ruby Error: Array can&#39;t be coerced into Fixnum", "body": "<p><code>multiply</code> expects an arbitrary number of parameters. You pass only one parameter, which is an array. On the first iteration, <code>number</code> is the whole array. Hence the error message.</p>\n\n<p>You have to fix the call, either </p>\n\n<pre><code> multiply(*[2, 3, 4, 5])\n</code></pre>\n\n<p>or, simpler,</p>\n\n<pre><code> multiply(2, 3, 4, 5)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1472645113, "creation_date": 1472645113, "answer_id": 39249187, "question_id": 39248985, "link": "https://stackoverflow.com/questions/39248985/ruby-error-array-cant-be-coerced-into-fixnum/39249187#39249187", "title": "Ruby Error: Array can&#39;t be coerced into Fixnum", "body": "<p>If you want to be able to use array as input, you can use to <code>flatten</code> method on the <code>numbers</code> array.</p>\n\n<pre><code>def multiply(*numbers)\n    product = 1\n    numbers.flatten.each{|number|\n        product *= number\n    }\n    return product\nend\n\nputs multiply([2, 3, 4, 5]) #=&gt; 120\n</code></pre>\n\n<p>The flatten method will take a 2d array and turn into a simple array.</p>\n\n<p>This will also work</p>\n\n<pre><code>multiply([2, 3, 4, 5], 2, 2) #=&gt; 480\n</code></pre>\n\n<p>In this case, </p>\n\n<pre><code>numbers = [[2, 3, 4, 5], 2, 2]\n</code></pre>\n\n<p>After you apply the flatten method, you get</p>\n\n<pre><code>[2, 3, 4, 5, 2, 2]\n</code></pre>\n\n<p>Then you can begin to multiply each number.</p>\n\n<p>As it is normal in Ruby, there is usually a method that do what you are looking to do. In this case, <code>inject</code>, and <code>reduce</code> can accomplish what you are looking for. </p>\n\n<pre><code>def multiply(*numbers)\n    numbers.flatten.reduce(&amp;:*)\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6760768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xf9tm.jpg?s=128&g=1", "display_name": "Sim", "link": "https://stackoverflow.com/users/6760768/sim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1243, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1472652682, "creation_date": 1472644508, "last_edit_date": 1472652682, "question_id": 39248985, "link": "https://stackoverflow.com/questions/39248985/ruby-error-array-cant-be-coerced-into-fixnum", "title": "Ruby Error: Array can&#39;t be coerced into Fixnum", "body": "<p>I'm currently working on a simple multiplying method. </p>\n\n<p>CODE:</p>\n\n<pre><code>def multiply(*numbers)\n    product = 1\n    numbers.each{|number|\n        product *= number\n    }\n    return product\nend\n\n puts multiply([2, 3, 4, 5])\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<p><code>*': Array can't be coerced into Fixnum (TypeError)\n    from calculator.rb:26:in</code>block in multiply'\n    from calculator.rb:24:in <code>each'\n    from calculator.rb:24:in</code>multiply'\n    from calculator.rb:31:in `'</p>\n\n<p>I get this error. It seems the method isn't allowing me to use \".each\" on the array.</p>\n\n<p>Also, I want to keep the parameter as *numbers in case it's not an array but two numbers to multiply. I should bring it to your attention that the method works fine when the parameter being passed are two numbers and not an array (i.e. multiply(2, 4)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "applicationcontroller"], "comments": [{"owner": {"reputation": 366, "user_id": 6290418, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1397498576945426/picture?type=large", "display_name": "Kapitula Alexey", "link": "https://stackoverflow.com/users/6290418/kapitula-alexey"}, "edited": false, "score": 0, "creation_date": 1472643996, "post_id": 39248723, "comment_id": 65833275, "body": "Did you check this question? <a href=\"http://stackoverflow.com/questions/6011764/specify-which-controllers-to-exclude-from-before-filter\" title=\"specify which controllers to exclude from before filter\">stackoverflow.com/questions/6011764/&hellip;</a>"}, {"owner": {"reputation": 1281, "user_id": 3792227, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c984652030be2f364e1219541e178fb5?s=128&d=identicon&r=PG&f=1", "display_name": "anyavacy", "link": "https://stackoverflow.com/users/3792227/anyavacy"}, "reply_to_user": {"reputation": 366, "user_id": 6290418, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1397498576945426/picture?type=large", "display_name": "Kapitula Alexey", "link": "https://stackoverflow.com/users/6290418/kapitula-alexey"}, "edited": false, "score": 0, "creation_date": 1472644210, "post_id": 39248723, "comment_id": 65833412, "body": "thnks but it does not answer my question."}], "answers": [{"comments": [{"owner": {"reputation": 1281, "user_id": 3792227, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c984652030be2f364e1219541e178fb5?s=128&d=identicon&r=PG&f=1", "display_name": "anyavacy", "link": "https://stackoverflow.com/users/3792227/anyavacy"}, "edited": false, "score": 0, "creation_date": 1472644364, "post_id": 39248883, "comment_id": 65833517, "body": "the problem is that if I put it in application_controller it will be execute before ALL action. and I want it to be execute only for about 20% of the actions not ALL of them. I have about 70 actions and I want the before_filter to be executed before only 12 actions"}, {"owner": {"reputation": 182, "user_id": 6071580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3d669f89b8f9c0fd29c068969ad569?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/6071580/kushal"}, "reply_to_user": {"reputation": 1281, "user_id": 3792227, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c984652030be2f364e1219541e178fb5?s=128&d=identicon&r=PG&f=1", "display_name": "anyavacy", "link": "https://stackoverflow.com/users/3792227/anyavacy"}, "edited": false, "score": 0, "creation_date": 1472644522, "post_id": 39248883, "comment_id": 65833633, "body": "so for that you can have <code>skip_before_filter :method_defined_in_application_controller except: [:methods_for_which_it_should_execute]</code> now it will run for only those 20% of actions. you have to define this in the controllers where you need it to execute for certain methods"}], "tags": [], "owner": {"reputation": 182, "user_id": 6071580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3d669f89b8f9c0fd29c068969ad569?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/6071580/kushal"}, "is_accepted": false, "score": 1, "last_activity_date": 1472646589, "last_edit_date": 1472646589, "creation_date": 1472644229, "answer_id": 39248883, "question_id": 39248723, "link": "https://stackoverflow.com/questions/39248723/run-before-filter-an-large-number-of-actions-in-ruby-on-rails-4/39248883#39248883", "title": "Run before filter an large number of actions in Ruby on Rails 4", "body": "<p>why not <code>ApplicationController</code> ? If you define any <code>before_filter</code> in application controller then it is going to be executed on each request.</p>\n\n<p>Now you are saying it looks repetitive but it actually don't. mentioning <code>before_filter</code> in <code>application_controller.rb</code> actually represents DRY AKA you don't have to specify that <code>before_filter</code> anywhere else.</p>\n\n<p>Of course not all of the 9 controllers are going to get execute at the same time so <code>ApplicationController</code> is a preferred way</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  ...\n  before_filter :pre_execute_action\n  ...\nend\nclass MyController &lt; ApplicationController\n  ...\n  skip_before_filter :pre_execute_action, except: [:methods_for_which_it_should_execute]\n  ...\nend\n</code></pre>\n\n<p>try above code as a reference</p>\n"}], "owner": {"reputation": 1281, "user_id": 3792227, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c984652030be2f364e1219541e178fb5?s=128&d=identicon&r=PG&f=1", "display_name": "anyavacy", "link": "https://stackoverflow.com/users/3792227/anyavacy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472646589, "creation_date": 1472643778, "question_id": 39248723, "link": "https://stackoverflow.com/questions/39248723/run-before-filter-an-large-number-of-actions-in-ruby-on-rails-4", "title": "Run before filter an large number of actions in Ruby on Rails 4", "body": "<p>I have lots of controller in my Rails application, and I need to use a <code>before_filter</code> before some actions in different controllers. The before filter will execute the same code of all these actions. Is there a clean DRY way(in <code>application_controller</code> for instance) to specify the list of actions that should run this <code>before_filter</code>? I have tried to use <code>before_filer</code> in all controllers(9), but this looks so repetitive since it is the same code.</p>\n"}, {"tags": ["css", "ruby", "nanoc"], "answers": [{"tags": [], "owner": {"reputation": 2120, "user_id": 5269656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0dfd1b93980e4b8cfce61147693c20c1?s=128&d=identicon&r=PG&f=1", "display_name": "TechnicalTophat", "link": "https://stackoverflow.com/users/5269656/technicaltophat"}, "is_accepted": true, "score": 1, "last_activity_date": 1472734171, "creation_date": 1472734171, "answer_id": 39272027, "question_id": 39248490, "link": "https://stackoverflow.com/questions/39248490/nanoc-filter-for-scss/39272027#39272027", "title": "Nanoc filter for SCSS", "body": "<p>I found a utility called <a href=\"http://compass-style.org/\" rel=\"nofollow\">Compass</a> that gives you filter options for SCSS.</p>\n"}, {"tags": [], "owner": {"reputation": 4346, "user_id": 4505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/359e9388d41980e168f4ccd54e7397fa?s=128&d=identicon&r=PG", "display_name": "Eero", "link": "https://stackoverflow.com/users/4505/eero"}, "is_accepted": false, "score": 0, "last_activity_date": 1527512293, "creation_date": 1527512293, "answer_id": 50567065, "question_id": 39248490, "link": "https://stackoverflow.com/questions/39248490/nanoc-filter-for-scss/50567065#50567065", "title": "Nanoc filter for SCSS", "body": "<p>Use the SASS filter as outlined in <a href=\"https://stackoverflow.com/questions/13397472/how-can-i-get-the-nanoc-sass-filter-to-use-scss-syntax?rq=1\">How can I get the nanoc SASS filter to use SCSS syntax?</a></p>\n\n<pre><code>filter :sass, syntax: :scss\n</code></pre>\n"}], "owner": {"reputation": 2120, "user_id": 5269656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0dfd1b93980e4b8cfce61147693c20c1?s=128&d=identicon&r=PG&f=1", "display_name": "TechnicalTophat", "link": "https://stackoverflow.com/users/5269656/technicaltophat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 39272027, "answer_count": 2, "score": 1, "last_activity_date": 1527512293, "creation_date": 1472643170, "question_id": 39248490, "link": "https://stackoverflow.com/questions/39248490/nanoc-filter-for-scss", "title": "Nanoc filter for SCSS", "body": "<p>I'm writing a site using nanoc and ruby, and I want to use SCSS. But I'm having a bit of an issue. No matter what I try, I cannot get my SCSS file to convert and output as compiled CSS. It either throws an error or comes through as exactly the same file type. My Ruby rules file and directory structure is below, please help!</p>\n\n<pre><code>#!/usr/bin/env ruby\n\ncompile '/**/*.html' do\n  layout '/default.*'\nend\n\n# This is an example rule that matches Markdown (.md) files, and filters them\n# using the :kramdown filter. It is commented out by default, because kramdown\n# is not bundled with Nanoc or Ruby.\n#\n#compile '/**/*.md' do\n#  filter :kramdown\n#  layout '/default.*'\n#end\n\nroute '/**/*.{html,md}' do\n  if item.identifier =~ '/index.*'\n    '/index.html'\n  else\n    item.identifier.without_ext + '/index.html'\n  end\nend\n\ncompile '/assets/SCSS/' do\n  filter :scss =&gt; :css\n  write @item.identifier.without_ext + '.css'\n end\n\ncompile '/assets/images/*' do\n  write item.identifier.to_s\nend\n\ncompile '/**/*' do\n  write item.identifier.to_s\nend\n\nlayout '/**/*', :erb\n</code></pre>\n\n<p>Here is my directory structure:</p>\n\n<pre><code>root\n|\n|\\_content\n|  |\n|   \\_assets\n|     |\n|      \\_test.scss\n\\_public\n  |\n   \\_assets\n     |\n      \\_test.scss &lt;-------- This should be compiled CSS\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "string"], "comments": [{"owner": {"reputation": 45, "user_id": 6695009, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fba7f125cbe594ce538e3a175841b7be?s=128&d=identicon&r=PG&f=1", "display_name": "Ash Kashyap", "link": "https://stackoverflow.com/users/6695009/ash-kashyap"}, "reply_to_user": {"reputation": 176, "user_id": 2347723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f2981c438a27fc16bf2b8edc2b74944?s=128&d=identicon&r=PG", "display_name": "Sam Farmer", "link": "https://stackoverflow.com/users/2347723/sam-farmer"}, "edited": false, "score": 0, "creation_date": 1472642282, "post_id": 39247943, "comment_id": 65832129, "body": "uniq and squeeze method ... hard coding using index variables"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 3, "creation_date": 1472642436, "post_id": 39247943, "comment_id": 65832234, "body": "@AshKashyap show us your efforts, StackOverflow it&#39;s not a write-code-for-me service."}], "answers": [{"tags": [], "owner": {"reputation": 5251, "user_id": 903842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfe7b10dbda86c6cb930c1ae40abfc2c?s=128&d=identicon&r=PG", "display_name": "Nimir", "link": "https://stackoverflow.com/users/903842/nimir"}, "is_accepted": false, "score": 3, "last_activity_date": 1472644952, "last_edit_date": 1472644952, "creation_date": 1472644528, "answer_id": 39248990, "question_id": 39247943, "link": "https://stackoverflow.com/questions/39247943/how-to-remove-a-consecutively-repeating-character-in-a-string/39248990#39248990", "title": "How to remove a consecutively repeating character in a string?", "body": "<p>Try this:</p>\n\n<pre><code>items = \"1 1 3 3 3 2 2 2 2 14 14 14 11 11 11 2\"\n\nitems.split(' ').chunk(&amp;:itself).collect(&amp;:first)\n\n#&gt; [\"1\", \"3\", \"2\", \"14\", \"11\", \"2\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "is_accepted": true, "score": 0, "last_activity_date": 1472658507, "creation_date": 1472658507, "answer_id": 39253973, "question_id": 39247943, "link": "https://stackoverflow.com/questions/39247943/how-to-remove-a-consecutively-repeating-character-in-a-string/39253973#39253973", "title": "How to remove a consecutively repeating character in a string?", "body": "<pre><code>string_data = \"1 1 3 3 3 2 2 2 2 14 14 14 11 11 11 2\"\n\nstring_data.split(' ').chunk(&amp;:itself).collect(&amp;:first).join(' ')\n</code></pre>\n\n<p>output will be <code>\"1 3 2 14 11 2\"</code></p>\n"}], "owner": {"reputation": 45, "user_id": 6695009, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fba7f125cbe594ce538e3a175841b7be?s=128&d=identicon&r=PG&f=1", "display_name": "Ash Kashyap", "link": "https://stackoverflow.com/users/6695009/ash-kashyap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 39253973, "answer_count": 2, "score": -3, "last_activity_date": 1472658507, "creation_date": 1472641612, "last_edit_date": 1472641931, "question_id": 39247943, "link": "https://stackoverflow.com/questions/39247943/how-to-remove-a-consecutively-repeating-character-in-a-string", "title": "How to remove a consecutively repeating character in a string?", "body": "<p>Consider my input :-</p>\n\n<pre><code>\"1 1 3 3 3 2 2 2 2 14 14 14 11 11 11 2\"\n</code></pre>\n\n<p>I want the output to be </p>\n\n<pre><code>\"1 3 2 14 11 2\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing", "rails-engines"], "owner": {"reputation": 800, "user_id": 3290423, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf08b4a89aa05d600469502f103c187a?s=128&d=identicon&r=PG&f=1", "display_name": "rico_mac", "link": "https://stackoverflow.com/users/3290423/rico-mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1472641128, "creation_date": 1472641128, "question_id": 39247743, "link": "https://stackoverflow.com/questions/39247743/rails-mounting-engine-inside-nested-routes", "title": "Rails: mounting engine inside nested routes", "body": "<p>I am trying to mount an engine at two different points in the same app. </p>\n\n<p>The first point, which is working, is at the root level 'localhost:3000/news'.</p>\n\n<p>The second is one resource deep, with the desired url structure something like this: 'localhost:3000/venues/1/news'. This is not working. </p>\n\n<p>I am initialising the engine in the host app routes file like this </p>\n\n<pre><code>  mount NewsEngine::Engine =&gt; \"/\" \n  resources :venues do\n    mount NewsEngine::Engine =&gt; \"/\" \n  end\n</code></pre>\n\n<p>Running rake routes however only yields the first level of routes.</p>\n\n<pre><code>newsitems GET  /news(.:format)              news_engine/newsitems#index                                       \n newsitem GET  /news/:newsitem_id(.:format) news_engine/newsitems#show \n</code></pre>\n\n<p>Weirdly, referencing even the first level raises an error:</p>\n\n<pre><code>=link_to \"News\", intertain_news_engine.newsitems_path\n=&gt; No route matches {:action=&gt;\"index\"} missing required keys: [:venue_id]\n</code></pre>\n\n<p>I would have expect this error trying to call <code>venue_newsitems_path</code> but not <code>newsitems_path</code></p>\n\n<p>The routes file in the engine itself looks like this. </p>\n\n<pre><code>NewsEngine::Engine.routes.draw do\n  resources :newsitems, param: :newsitem_id,\n                        only: [:index, :show],\n                        path: 'news'\n\nend\n</code></pre>\n\n<p>Venues are retrieved using config blocks in the host application that tell the engine to call a before_action method from the host app application controller - though I can't see how this would be a problem as it currently seems solely down to the routing. </p>\n"}, {"tags": ["jquery", "ruby", "ajax", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "is_accepted": false, "score": 0, "last_activity_date": 1472662489, "creation_date": 1472662489, "answer_id": 39255118, "question_id": 39246954, "link": "https://stackoverflow.com/questions/39246954/how-to-avoid-304-not-modified-in-rails4-ajax-not-working/39255118#39255118", "title": "How to avoid 304 not modified in rails4, ajax not working", "body": "<p>Remove Turbolinks from your project. You need to do couple of steps:</p>\n\n<ul>\n<li>remove <code>turbolinks</code> gem from Gemfile</li>\n<li>remove requires from application.js and application.css</li>\n<li>remove data-turbolinks-track from you application layout file</li>\n</ul>\n"}], "owner": {"reputation": 41, "user_id": 6747136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9edc0170c23cee2cc769f06c82fb386?s=128&d=identicon&r=PG&f=1", "display_name": "Rebecca", "link": "https://stackoverflow.com/users/6747136/rebecca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472662489, "creation_date": 1472638859, "question_id": 39246954, "link": "https://stackoverflow.com/questions/39246954/how-to-avoid-304-not-modified-in-rails4-ajax-not-working", "title": "How to avoid 304 not modified in rails4, ajax not working", "body": "<p>I'm a beginner in rails and making a simple application with it. But every time I refresh or reload a page, it returns 304 not modified status, and ajax doesn't work at all! It really bothers a lot. I have set <code>config.action_controller.perform_caching = false</code>\nand added <code>$.ajaxSetup({cache: false});</code>\nand even<code>Cache-Control:no-cache</code>\nto the application.js.<br>It just can't work.<br>\nIs there any effective way to make ajax working?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "translate", "login-page"], "comments": [{"owner": {"reputation": 667, "user_id": 2621588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ccecbafbc40137219b7a2b36f1edf7f?s=128&d=identicon&r=PG", "display_name": "Sarcastic", "link": "https://stackoverflow.com/users/2621588/sarcastic"}, "edited": false, "score": 0, "creation_date": 1472642672, "post_id": 39246641, "comment_id": 65832392, "body": "Devise by default does not support internationalized view. Use this gem for views: <a href=\"https://github.com/tigrish/devise-i18n\" rel=\"nofollow noreferrer\">github.com/tigrish/devise-i18n</a>"}, {"owner": {"reputation": 5, "user_id": 6225473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9bc0bf6bed8af86df071296fecfe6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy Jon", "link": "https://stackoverflow.com/users/6225473/jimmy-jon"}, "reply_to_user": {"reputation": 667, "user_id": 2621588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ccecbafbc40137219b7a2b36f1edf7f?s=128&d=identicon&r=PG", "display_name": "Sarcastic", "link": "https://stackoverflow.com/users/2621588/sarcastic"}, "edited": false, "score": 0, "creation_date": 1472648221, "post_id": 39246641, "comment_id": 65836320, "body": "Thank you, that worked a bit. Now the &quot;password&quot;-text is in the language I want it to be. &quot;Sign Up&quot; and &quot;Forgot your Password&quot; on the bottom of the page is still in English though."}], "owner": {"reputation": 5, "user_id": 6225473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9bc0bf6bed8af86df071296fecfe6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy Jon", "link": "https://stackoverflow.com/users/6225473/jimmy-jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472637993, "creation_date": 1472637993, "question_id": 39246641, "link": "https://stackoverflow.com/questions/39246641/translate-log-in-page-ruby-on-rails", "title": "Translate Log-in-Page Ruby on rails", "body": "<p>I created the blog application from the rails tutorial with \"rails new blog\".</p>\n\n<p>There is a page that can only be loaded when you login with your username.</p>\n\n<p>The log in page is automatically generated via rails.</p>\n\n<p>I want to translate the log in page.</p>\n\n<p>I changed the default_locale to :de in my <strong>application.rb</strong>. It looks like this:</p>\n\n<pre><code>...\n\nmodule Blog\n  class Application &lt; Rails::Application\n    config.active_record.raise_in_transactional_callbacks = true\n    config.i18n.default_locale = :de\n  end\nend\n</code></pre>\n\n<p>even <code>&lt;%= I18n.locale %&gt;</code> on my index page says \"de\".</p>\n\n<p>On the log in page ther is still \"password/ Sign Up /...\" in English.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1357, "user_id": 6229122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tQUnBjPGP9o/AAAAAAAAAAI/AAAAAAAACww/wJS82aCB06E/photo.jpg?sz=128", "display_name": "Alex Suslyakov", "link": "https://stackoverflow.com/users/6229122/alex-suslyakov"}, "edited": false, "score": 0, "creation_date": 1472639300, "post_id": 39247049, "comment_id": 65830019, "body": "You&#39;re right. Maybe i gave not enough information, I&#39;ve got a bit more complex case."}, {"owner": {"reputation": 1357, "user_id": 6229122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tQUnBjPGP9o/AAAAAAAAAAI/AAAAAAAACww/wJS82aCB06E/photo.jpg?sz=128", "display_name": "Alex Suslyakov", "link": "https://stackoverflow.com/users/6229122/alex-suslyakov"}, "edited": false, "score": 0, "creation_date": 1472639982, "post_id": 39247049, "comment_id": 65830501, "body": "@AndreyDeineko thanks, your example works correctly. It&#39;s my mistake, I&#39;ve being using .clone on <code>instance</code>,  not on <code>data</code>"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1472639656, "last_edit_date": 1472639656, "creation_date": 1472639132, "answer_id": 39247049, "question_id": 39246459, "link": "https://stackoverflow.com/questions/39246459/how-to-get-cloned-value-of-singletons-instance-variable-in-ruby/39247049#39247049", "title": "How to get cloned value of Singleton&#39;s instance variable in Ruby?", "body": "<p>I think you're mixing something up.</p>\n\n<pre><code>class MySingleton\n  include Singleton\n  attr_reader :data\n\n  def initialize\n    @data = {a: 1, b: 2}\n  end\nend\n\nfoo = MySingleton.instance.data.clone\n#=&gt; {:a=&gt;1, :b=&gt;2}\nfoo[:c] = 3\n#=&gt; 3\nfoo\n#=&gt; {:a=&gt;1, :b=&gt;2, :c=&gt;3}\nMySingleton.instance.data\n#=&gt; {:a=&gt;1, :b=&gt;2}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1985, "user_id": 1629709, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ykH7V.png?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1629709/sebastian"}, "is_accepted": false, "score": 2, "last_activity_date": 1472639350, "creation_date": 1472639350, "answer_id": 39247137, "question_id": 39246459, "link": "https://stackoverflow.com/questions/39246459/how-to-get-cloned-value-of-singletons-instance-variable-in-ruby/39247137#39247137", "title": "How to get cloned value of Singleton&#39;s instance variable in Ruby?", "body": "<p>I've tried with <code>.clone</code> and <code>.dup</code> and they both seem to work for me.</p>\n\n<pre><code>require 'singleton'\n\nclass MySingleton\n    include Singleton\n    attr_accessor :data\nend\n\nMySingleton.instance.data = {}\nfoo = MySingleton.instance.data\nfoo[:bar] = 'buzz'\nputs foo # {:bar=&gt;\"buzz\"}\nputs MySingleton.instance.data # {:bar=&gt;\"buzz\"}\n\nMySingleton.instance.data = {}\nfoo = MySingleton.instance.data.dup # or .clone\nfoo[:bar] = 'buzz'\nputs foo # {:bar=&gt;\"buzz\"}\nputs MySingleton.instance.data # {}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11713, "user_id": 1153747, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/df9d48b6e2ae6cdedf4c39c2e58df851?s=128&d=identicon&r=PG", "display_name": "Boris Stitnicky", "link": "https://stackoverflow.com/users/1153747/boris-stitnicky"}, "is_accepted": false, "score": 0, "last_activity_date": 1472639733, "creation_date": 1472639733, "answer_id": 39247274, "question_id": 39246459, "link": "https://stackoverflow.com/questions/39246459/how-to-get-cloned-value-of-singletons-instance-variable-in-ruby/39247274#39247274", "title": "How to get cloned value of Singleton&#39;s instance variable in Ruby?", "body": "<p>The concept of singleton pattern in Ruby has changed over time. Using <code>include Singleton</code> to implement explicit singleton classes has become fringe practice. Normally, you contruct an object eg. by calling <code>Object.new</code> and work with its singleton class <code>Object.new.singleton_class</code>, like this:</p>\n\n<pre><code>o = Object.new\nclass &lt;&lt; o\n  attr_reader :data\nend\n</code></pre>\n\n<p>And you have a fully functional singleton with custom selector <code>#data</code>.</p>\n"}], "owner": {"reputation": 1357, "user_id": 6229122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tQUnBjPGP9o/AAAAAAAAAAI/AAAAAAAACww/wJS82aCB06E/photo.jpg?sz=128", "display_name": "Alex Suslyakov", "link": "https://stackoverflow.com/users/6229122/alex-suslyakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 1, "accepted_answer_id": 39247049, "answer_count": 3, "score": 2, "last_activity_date": 1472641730, "creation_date": 1472637504, "last_edit_date": 1472641730, "question_id": 39246459, "link": "https://stackoverflow.com/questions/39246459/how-to-get-cloned-value-of-singletons-instance-variable-in-ruby", "title": "How to get cloned value of Singleton&#39;s instance variable in Ruby?", "body": "<p>I've some (a bit custom)singleton, that has <code>attr_reader :data</code>, which contains Hash.</p>\n\n<p>I want to get this data and sometimes add there specific values.\nBut when I set data into variable, it turns out, that variable contains <strong><em>link</em></strong> on data, not the <strong><em>copy</em></strong>.</p>\n\n<p><strong>UPDATED</strong>\nCode of my 'singleton':</p>\n\n<pre><code>class Company\n  FILE_PATH = \"#{Rails.root}/config/company.yml\"\n  attr_reader :data\n  def self.instance\n    @instance ||= new\n  end\n\n  def self.path\n    FILE_PATH\n  end\n\n  def save data\n    File.open(FILE_PATH, 'w') { |file| file.write(data.to_yaml) }\n    set_data\n  end\n\n  private\n  def initialize\n    set_data\n  end\n\n  def set_data\n    @data = HashWithIndifferentAccess.new(YAML.load(File.read(FILE_PATH)))\n  end\nend\n</code></pre>\n\n<p>Usage example:</p>\n\n<pre><code>Company.instance.data[:bar]\n =&gt; nil \nfoo = Company.instance.data\nfoo[:bar] = 'buzz'\nCompany.instance.data[:bar]\n =&gt; 'buzz' \n</code></pre>\n\n<p>How can I put copy of data to variable? I've tried <code>.dup</code> and <code>.copy</code>, but it didn't help.</p>\n\n<p>(<strong>UPD:</strong> I've tried to use these methods on <code>instance</code>, not on <code>data</code>. My fault. Thanks everyone, who answered to me.)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1472640837, "post_id": 39246198, "comment_id": 65831115, "body": "what about <code>get api_user_path(current_user)</code>?"}, {"owner": {"reputation": 173, "user_id": 3344159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100000854115468/picture?type=large", "display_name": "Konrad Janczyk", "link": "https://stackoverflow.com/users/3344159/konrad-janczyk"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1472642373, "post_id": 39246198, "comment_id": 65832185, "body": "Nope, it&#39;s in that &quot;and others&quot; part. In fact it was my first approach. Sorry for being so vague!"}], "answers": [{"tags": [], "owner": {"reputation": 173, "user_id": 3344159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100000854115468/picture?type=large", "display_name": "Konrad Janczyk", "link": "https://stackoverflow.com/users/3344159/konrad-janczyk"}, "is_accepted": true, "score": 1, "last_activity_date": 1607078633, "last_edit_date": 1607078633, "creation_date": 1472812394, "answer_id": 39290272, "question_id": 39246198, "link": "https://stackoverflow.com/questions/39246198/rspec-no-route-matches-on-scoped-api-route/39290272#39290272", "title": "Rspec: &quot;No route matches&quot; on scoped api route", "body": "<p>The problem was in a typo 'constrains' in routes file:</p>\n<pre><code>scope module: :v1, constrains: ApiConstraints.new(version: 1, default: true) do\n</code></pre>\n<p>Should be 'constraints', only <code>t</code> missing.</p>\n"}], "owner": {"reputation": 173, "user_id": 3344159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100000854115468/picture?type=large", "display_name": "Konrad Janczyk", "link": "https://stackoverflow.com/users/3344159/konrad-janczyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 39290272, "answer_count": 1, "score": 1, "last_activity_date": 1607078633, "creation_date": 1472636822, "question_id": 39246198, "link": "https://stackoverflow.com/questions/39246198/rspec-no-route-matches-on-scoped-api-route", "title": "Rspec: &quot;No route matches&quot; on scoped api route", "body": "<p>I've got problem with RSpec and scoped route. Route looks like this</p>\n\n<pre><code>      namespace :api do\n    scope module: :v1, constrains: ApiConstraints.new(version: 1, default: true) do\n      resources :users, except:[:new]\n    end \nend\n</code></pre>\n\n<p>and spec (spec/controllers/api/v1/users_controller_spec.rb) looks like this:</p>\n\n<pre><code>RSpec.describe Api::V1::UsersController, type: :controller do\n  let(:current_user) { FactoryGirl.create(:user) }\n\n  before do\n    allow(controller).to receive(:authenticate_request!).and_return(true)\n  end\n\n  describe 'GET #show' do\n    it 'should show user details' do\n      get api_user_path(current_user.id.to_s), nil, { 'Accept' =&gt; 'application/app.com; version=1' }\n      expect(response).to have_http_status(:success)\n    end\n  end\nend\n</code></pre>\n\n<p>I'm getting this error:</p>\n\n<pre><code>ActionController::UrlGenerationError:\n   No route matches {:action=&gt;\"/api/users/57c6a615fd32bd11444f792f\", :controller=&gt;\"api/v1/users\"}\n</code></pre>\n\n<p>I've tried \"api_user_url\", :show and others but I think that the problem lays in that scope. My routes looks like this: </p>\n\n<pre><code>               api_users GET      /api/users(.:format)               api/v1/users#index {:constrains=&gt;#&lt;ApiConstraints:0x007fe6824dce50 @version=1, @default=true&gt;}\n                     POST     /api/users(.:format)               api/v1/users#create {:constrains=&gt;#&lt;ApiConstraints:0x007fe6824dce50 @version=1, @default=true&gt;}\n       edit_api_user GET      /api/users/:id/edit(.:format)      api/v1/users#edit {:constrains=&gt;#&lt;ApiConstraints:0x007fe6824dce50 @version=1, @default=true&gt;}\n            api_user GET      /api/users/:id(.:format)           api/v1/users#show {:constrains=&gt;#&lt;ApiConstraints:0x007fe6824dce50 @version=1, @default=true&gt;}\n                     PATCH    /api/users/:id(.:format)           api/v1/users#update {:constrains=&gt;#&lt;ApiConstraints:0x007fe6824dce50 @version=1, @default=true&gt;}\n                     PUT      /api/users/:id(.:format)           api/v1/users#update {:constrains=&gt;#&lt;ApiConstraints:0x007fe6824dce50 @version=1, @default=true&gt;}\n                     DELETE   /api/users/:id(.:format)           api/v1/users#destroy {:constrains=&gt;#&lt;ApiConstraints:0x007fe6824dce50 @version=1, @default=true&gt;}\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "payment-gateway", "payment"], "answers": [{"tags": [], "owner": {"reputation": 330, "user_id": 4827700, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-aM7fUoHjQGc/AAAAAAAAAAI/AAAAAAAAAFY/zriOP126N1Y/photo.jpg?sz=128", "display_name": "Chaudhary Prakash", "link": "https://stackoverflow.com/users/4827700/chaudhary-prakash"}, "is_accepted": true, "score": 2, "last_activity_date": 1474629333, "creation_date": 1474629333, "answer_id": 39659427, "question_id": 39246166, "link": "https://stackoverflow.com/questions/39246166/integrate-payment-gateway-with-rails/39659427#39659427", "title": "Integrate payment Gateway with rails", "body": "<p>use <code>gem 'stripe'</code>through easy to Integrate payment Gateway with rails  </p>\n\n<p><a href=\"https://github.com/stripe/stripe-ruby\" rel=\"nofollow\">Stripe Docs</a></p>\n"}], "owner": {"reputation": 83, "user_id": 6590939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2s7sc.jpg?s=128&g=1", "display_name": "Rajnik", "link": "https://stackoverflow.com/users/6590939/rajnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1031, "favorite_count": 0, "accepted_answer_id": 39659427, "answer_count": 1, "score": 0, "last_activity_date": 1474629333, "creation_date": 1472636725, "last_edit_date": 1472724457, "question_id": 39246166, "link": "https://stackoverflow.com/questions/39246166/integrate-payment-gateway-with-rails", "title": "Integrate payment Gateway with rails", "body": "<p>Right now we are owner of site. And we do have 2 types of users. One can organize events and another users can sponser that event. so what I actually need is that once sponsor will do payment to event organizer then entire payment will go in our account.</p>\n\n<p>after verification from our side we will keep 20% of total payment in my account and remaining will goes into event organizer's account.</p>\n\n<p>Any Payment gateway provide this kind of setting.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "drop-down-menu", "erb"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1472634532, "post_id": 39245260, "comment_id": 65826601, "body": "You can always create a class/module with the options as a constant, or something like that, and then use it to generate your options from this array whenever you need it in the system."}, {"owner": {"reputation": 361, "user_id": 6665764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wh8CZ.jpg?s=128&g=1", "display_name": "inveterateliterate", "link": "https://stackoverflow.com/users/6665764/inveterateliterate"}, "edited": false, "score": 0, "creation_date": 1472634739, "post_id": 39245260, "comment_id": 65826727, "body": "Here are some helpful references on building forms in rails: <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a> <a href=\"http://guides.rubyonrails.org/form_helpers.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/form_helpers.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": true, "score": 1, "last_activity_date": 1472636985, "last_edit_date": 1472636985, "creation_date": 1472636485, "answer_id": 39246063, "question_id": 39245260, "link": "https://stackoverflow.com/questions/39245260/storing-the-drop-down-options-of-a-rails-form-just-using-the-variable-in-that/39246063#39246063", "title": "Storing the drop-down options of a rails form &amp; just using the variable in that form", "body": "<p>The rails helper method <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select\" rel=\"nofollow\"><code>select</code></a> allows you to pass in arrays or hashes to create the options fields.</p>\n\n<p>Using <code>select</code>, you'll then need to define data in an object that can be used in the relevant parts of your application. One way to do that is to use a module. For example:</p>\n\n<pre><code>module DropDownOptions\n  def number_options\n    {\"One\" =&gt; 1, \"Two\" =&gt; 2, \"Three\" =&gt; 3}\n  end\n\n  def foo_options\n    {\"Foo\" =&gt; \"Bar\"}\n  end\nend\n</code></pre>\n\n<p>You'll then need to put that code in your app folder. I'd put it in <code>app/tools/drop_down_options.rb</code> if there was nowhere more obvious to put it.</p>\n\n<p>Then you can add it to your helpers:</p>\n\n<pre><code>module ApplicationHelper\n  include DropDownOptions\nend\n</code></pre>\n\n<p>And that will allow you to do this in a view:</p>\n\n<pre><code>&lt;%= select(\"post\", \"number_id\", number_options) %&gt;\n</code></pre>\n\n<p>If you need to use the hash to convert back the other way in your model, you can include it there too:</p>\n\n<pre><code>class Post &lt;&lt; ActiveRecord::Base\n  include DropDownOptions\nend\n</code></pre>\n\n<p>And then the <code>number_options</code> method will be available within a post instance. Allowing you to do something like this:</p>\n\n<pre><code>class Post &lt;&lt; ActiveRecord::Base\n  include DropDownOptions\n\n  def number_label\n    number_options.invert[number_id] if number_id?\n  end\nend\n</code></pre>\n\n<p>By putting the options into a module, you can use them wherever they are needed. For example, if you prefer to user presenters or decorators instead of helper methods, just include the module in those objects.</p>\n"}], "owner": {"reputation": 41, "user_id": 5980930, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-VXPSXy0_hpI/AAAAAAAAAAI/AAAAAAAAADk/Dpu_l2o_Iag/photo.jpg?sz=128", "display_name": "Prakadeessh Arunachalam", "link": "https://stackoverflow.com/users/5980930/prakadeessh-arunachalam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 1, "accepted_answer_id": 39246063, "answer_count": 1, "score": 2, "last_activity_date": 1472636985, "creation_date": 1472634379, "last_edit_date": 1472634624, "question_id": 39245260, "link": "https://stackoverflow.com/questions/39245260/storing-the-drop-down-options-of-a-rails-form-just-using-the-variable-in-that", "title": "Storing the drop-down options of a rails form &amp; just using the variable in that form", "body": "<p>I am building a rails app.</p>\n\n<p>I have drop-down fields with same options in different forms. I would like to store the options in a separate location and just use the variable in the drop-down field instead of typing in the options in each form.</p>\n\n<p>Please help me with a small code code snippet or point me to a code-base</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "imagemagick"], "comments": [{"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1472635215, "post_id": 39245197, "comment_id": 65827010, "body": "Can you clearly show what the error is? Just not understandable."}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1472636078, "post_id": 39245197, "comment_id": 65827709, "body": "Just follow the instruction will help you <a href=\"https://gist.github.com/rodleviton/74e22e952bd6e7e5bee1\" rel=\"nofollow noreferrer\">Install</a>"}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1472644758, "post_id": 39245197, "comment_id": 65833785, "body": "Is your issue has been solved or still have ?"}, {"owner": {"reputation": 1114, "user_id": 5934752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7tGT8.jpg?s=128&g=1", "display_name": "Ravi Mariya", "link": "https://stackoverflow.com/users/5934752/ravi-mariya"}, "edited": false, "score": 1, "creation_date": 1472650804, "post_id": 39245197, "comment_id": 65838137, "body": "it should be <code>sudo apt-get install php5-imagick</code>"}, {"owner": {"reputation": 157, "user_id": 6403814, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-sVhYTv2ERdw/AAAAAAAAAAI/AAAAAAAAALk/g2eCSydNIyM/photo.jpg?sz=128", "display_name": "Anubhi Golechha", "link": "https://stackoverflow.com/users/6403814/anubhi-golechha"}, "reply_to_user": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1472710685, "post_id": 39245197, "comment_id": 65863152, "body": "@VKatz it is not resolved ."}, {"owner": {"reputation": 157, "user_id": 6403814, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-sVhYTv2ERdw/AAAAAAAAAAI/AAAAAAAAALk/g2eCSydNIyM/photo.jpg?sz=128", "display_name": "Anubhi Golechha", "link": "https://stackoverflow.com/users/6403814/anubhi-golechha"}, "reply_to_user": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1472713280, "post_id": 39245197, "comment_id": 65864458, "body": "@VKatz I tried as per your instruction but it is showing an error root@indiba2:~# wget <a href=\"http://www.imagemagick.org/download/ImageMagick-6.8.7-7.tar.gz\" rel=\"nofollow noreferrer\">imagemagick.org/download/ImageMagick-6.8.7-7.tar.gz</a> --2016-09-01 12:29:42--  <a href=\"http://www.imagemagick.org/download/ImageMagick-6.8.7-7.tar.gz\" rel=\"nofollow noreferrer\">imagemagick.org/download/ImageMagick-6.8.7-7.tar.gz</a> Resolving www.imagemagick.org (www.imagemagick.org)... 198.72.81.86 Connecting to www.imagemagick.org (www.imagemagick.org)|198.72.81.86|:80... connected. HTTP request sent, awaiting response... 404 Not Found 2016-09-01 12:29:43 ERROR 404: Not Found."}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1472728636, "post_id": 39245197, "comment_id": 65874576, "body": "try with this [<a href=\"https://www.enovate.co.uk/web-design-blog/2015/02/25/how-to-install-imagemagick-from-source-on-ubuntu-14.04](link)\" rel=\"nofollow noreferrer\">enovate.co.uk/web-design-blog/2015/02/25/&hellip;</a>"}], "owner": {"reputation": 157, "user_id": 6403814, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-sVhYTv2ERdw/AAAAAAAAAAI/AAAAAAAAALk/g2eCSydNIyM/photo.jpg?sz=128", "display_name": "Anubhi Golechha", "link": "https://stackoverflow.com/users/6403814/anubhi-golechha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1472635691, "creation_date": 1472634190, "last_edit_date": 1472635691, "question_id": 39245197, "link": "https://stackoverflow.com/questions/39245197/installation-failure-of-imagemagick", "title": "Installation failure of imagemagick", "body": "<p>I am trying to install imagemagick gem in Ruby on Rails: </p>\n\n<blockquote>\n  <p>ImageMagick 7.0.2-9 Q16 i686 2016-08-26 <a href=\"http://www.imagemagick.org\" rel=\"nofollow\">http://www.imagemagick.org</a><br>\n  Copyright: Copyright (C) 1999-2016 ImageMagick\n  Studio LLC License: <a href=\"http://www.imagemagick.org/script/license.php\" rel=\"nofollow\">http://www.imagemagick.org/script/license.php</a><br>\n  Features: Cipher DPC HDRI OpenMP Delegates (built-in): bzlib jbig jng jpeg lzma png tiff xml zlib     </p>\n</blockquote>\n\n<p><code>indiba@indiba2:~$     apt-get install php5-imagick</code></p>\n\n<blockquote>\n  <p>E: Could\n  not open lock file /var/lib/dpkg/lock - open (13: Permission denied)<br>\n  E: Unable to lock the administration directory (/var/lib/dpkg/), are\n  you root? </p>\n</blockquote>\n\n<p><code>indiba@indiba2:~$     service php5-fpm restart php5-fpm</code></p>\n\n<blockquote>\n  <p>unrecognized service </p>\n</blockquote>\n\n<p><code>indiba@indiba2:~$     dpkg -r imagemagick-6.9.0</code></p>\n\n<blockquote>\n  <p>dpkg: error: requested operation requires superuser privilege</p>\n</blockquote>\n"}, {"tags": ["ruby", "cucumber", "metaprogramming", "method-missing"], "comments": [{"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1472636310, "post_id": 39245171, "comment_id": 65827870, "body": "Try here: Post is titled: &quot;Override method_missing for class and instance methods?&quot; and you might get some ideas of how to do it. <a href=\"http://stackoverflow.com/questions/22846777/override-method-missing-for-class-and-instance-methods\" title=\"override method missing for class and instance methods\">stackoverflow.com/questions/22846777/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 1, "last_activity_date": 1472649870, "last_edit_date": 1495540304, "creation_date": 1472649870, "answer_id": 39250901, "question_id": 39245171, "link": "https://stackoverflow.com/questions/39245171/where-should-i-define-method-missing-in-a-cucumber-ruby-framework/39250901#39250901", "title": "Where should I define method_missing in a Cucumber Ruby framework?", "body": "<p>Define <code>method_missing</code> like you would any Cucumber helper method, in an <code>.rb</code> file in the <code>support</code> directory and in a module which you then pass to <a href=\"https://stackoverflow.com/questions/25530123/what-object-is-in-play-for-instance-variables-i-e-what-is-self-in-cucumber-st/25541579#25541579\">the Cucumber <code>World</code></a>:</p>\n\n<pre><code>module MethodMissing\n  def method_missing(method)\n    puts \"You said #{method}\"\n  end\nend\nWorld MethodMissing\n</code></pre>\n\n<p>You can then call missing methods in step definitions.</p>\n\n<p>Like any Cucumber helper method, <code>method_missing</code> should be defined only on the Cucumber <code>World</code>. If you defined it at the top level of the support file, it would be defined on the Ruby top-level object and available everywhere, which is unparsimonious and might break other code.</p>\n\n<p>I deliberately didn't defer to <code>super</code>, since the <code>World</code> doesn't define <code>method_missing</code>, or define <code>respond_to_missing?</code>, since I didn't have any plans to call <code>method(:foo)</code> on the <code>World</code>, but you can do those things if you prefer to always do them when you define <code>method_missing</code>.</p>\n"}], "owner": {"reputation": 1245, "user_id": 2243534, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8yiGS.jpg?s=128&g=1", "display_name": "Aks..", "link": "https://stackoverflow.com/users/2243534/aks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 39250901, "answer_count": 1, "score": 1, "last_activity_date": 1472650020, "creation_date": 1472634111, "last_edit_date": 1472650020, "question_id": 39245171, "link": "https://stackoverflow.com/questions/39245171/where-should-i-define-method-missing-in-a-cucumber-ruby-framework", "title": "Where should I define method_missing in a Cucumber Ruby framework?", "body": "<p>I have a Ruby-Cucumber framework. I need to use the method <code>method_missing</code> to avoid writing a few repetitive functions. Where should I place my <code>method_missing</code>? In any <code>.rb</code> file under the <code>support</code> folder? Or should it go in some different specific file?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 1308, "user_id": 2212311, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0SVoC.jpg?s=128&g=1", "display_name": "shlajin", "link": "https://stackoverflow.com/users/2212311/shlajin"}, "edited": false, "score": 0, "creation_date": 1472634133, "post_id": 39244706, "comment_id": 65826322, "body": "You are not really &quot;merging&quot; scopes, you are making a &quot;search&quot; on top of the other search and by analysing output sql I can tell it works just fine. What is the intended result \u2013 you want to the result of both queries unioned in a one response?"}, {"owner": {"reputation": 664, "user_id": 2115659, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4bb8dcdb24fc93682c2a3a3bbf2675d?s=128&d=identicon&r=PG", "display_name": "Derk153", "link": "https://stackoverflow.com/users/2115659/derk153"}, "reply_to_user": {"reputation": 1308, "user_id": 2212311, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0SVoC.jpg?s=128&g=1", "display_name": "shlajin", "link": "https://stackoverflow.com/users/2212311/shlajin"}, "edited": false, "score": 0, "creation_date": 1472634555, "post_id": 39244706, "comment_id": 65826613, "body": "@shlajin For example, <code>search_by_tags</code> returns users array with ids [1, 2, 3], <code>children_in_ages</code> returns users array with ids [2, 3, 4]. Expected result should be array of users with ids [2, 3]. So, yes, I need a union of both queries"}, {"owner": {"reputation": 1308, "user_id": 2212311, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0SVoC.jpg?s=128&g=1", "display_name": "shlajin", "link": "https://stackoverflow.com/users/2212311/shlajin"}, "edited": false, "score": 0, "creation_date": 1472666180, "post_id": 39244706, "comment_id": 65847998, "body": "I&#39;m hardly trying to understand what are you trying to achieve with the <code>having(&#39;COUNT(tags.id) &gt;= ?&#39;, ids.count)</code>, but I can not. What is the purpose of <code>search_by_tags</code> method? It&#39;s not just &quot;show users, which are associated with specified tags&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 664, "user_id": 2115659, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4bb8dcdb24fc93682c2a3a3bbf2675d?s=128&d=identicon&r=PG", "display_name": "Derk153", "link": "https://stackoverflow.com/users/2115659/derk153"}, "is_accepted": true, "score": 0, "last_activity_date": 1473339622, "creation_date": 1473339622, "answer_id": 39391663, "question_id": 39244706, "link": "https://stackoverflow.com/questions/39244706/rails-5-wrong-result-in-scope-chaining/39391663#39391663", "title": "Rails 5. Wrong result in scope chaining", "body": "<p>I've found solution for my issue.</p>\n\n<p>Proper way to select users with specific tags:</p>\n\n<p><strong>models/user.rb</strong></p>\n\n<pre><code>scope :search_by_tags, -&gt; (ids) { where(id: UserTag.users_with_tags(ids)) unless ids.blank? }\n</code></pre>\n\n<p><strong>models/user_tag.rb</strong></p>\n\n<pre><code>scope :users_with_tags, -&gt; (ids) {\n  select(:user_id).where(tag: ids).having('COUNT(user_id) &gt;= ?', ids.count).group('user_id')\n}\n</code></pre>\n\n<p>In this way, chaining with other scopes is working correct</p>\n"}], "owner": {"reputation": 664, "user_id": 2115659, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4bb8dcdb24fc93682c2a3a3bbf2675d?s=128&d=identicon&r=PG", "display_name": "Derk153", "link": "https://stackoverflow.com/users/2115659/derk153"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 39391663, "answer_count": 1, "score": 1, "last_activity_date": 1473339622, "creation_date": 1472632784, "question_id": 39244706, "link": "https://stackoverflow.com/questions/39244706/rails-5-wrong-result-in-scope-chaining", "title": "Rails 5. Wrong result in scope chaining", "body": "<p>I have next models</p>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :user_tags, dependent: :destroy\n  has_many :tags, through: :user_tags\n  has_many :children, foreign_key: 'parent_id', dependent: :destroy\n</code></pre>\n\n<p><strong>tag.rb</strong></p>\n\n<pre><code>class Tag &lt; ApplicationRecord\n  has_many :user_tags, dependent: :destroy\n  has_many :users, through: :user_tags\n</code></pre>\n\n<p><strong>user_tag.rb</strong></p>\n\n<pre><code>class UserTag &lt; ApplicationRecord\n  belongs_to :tag\n  belongs_to :user\n</code></pre>\n\n<p><strong>child.rb</strong></p>\n\n<pre><code>class Child &lt; ApplicationRecord\n  belongs_to :parent, class_name: 'User'\n</code></pre>\n\n<p>In model user I have several scopes.</p>\n\n<p>Select users, associated with ALL of required tags:</p>\n\n<pre><code>scope :search_by_tags, -&gt; (ids) {\n  joins(:tags).where(tags: {id: ids}).having('COUNT(tags.id) &gt;= ?', ids.count).group('users.id') \n}\n</code></pre>\n\n<p>Which, generates next SQL request</p>\n\n<pre><code>SELECT \"users\".* FROM \"users\" INNER JOIN \"user_tags\" ON \"user_tags\".\"user_id\" = \"users\".\"id\" INNER JOIN \"tags\" ON \"tags\".\"id\" = \"user_tags\".\"tag_id\" WHERE \"tags\".\"id\" IN (17, 37, 70, 8, 11, 3, 91, 64) GROUP BY users.id HAVING (COUNT(tags.id) &gt;= 8)\n</code></pre>\n\n<p>Other scope select users, associated with children in specific ages</p>\n\n<pre><code>scope :children_in_ages, -&gt; (age_ranges) {\n    joins(:children).where(children_ages_query(age_ranges))\n      .where.not(children: {gender: -1}).group('users.id')\n}\n\ndef self.children_ages_query(age_ranges)\n    child_table = Child.arel_table\n    range_conditions = age_ranges.map { |r| child_table[:birth_date].in(r) }\n    range_conditions.inject(range_conditions.shift, &amp;:and).to_sql\nend\n</code></pre>\n\n<p>where <code>age_ranges</code> is array of dates. This scope generates next SQL query:</p>\n\n<pre><code>SELECT \"users\".* FROM \"users\" INNER JOIN \"children\" ON \"children\".\"parent_id\" = \"users\".\"id\" WHERE (\"children\".\"birth_date\" BETWEEN '2016-02-29 08:35:00.322919' AND '2016-08-31 08:35:00.327283') AND (\"children\".\"gender\" != $1) GROUP BY users.id\n</code></pre>\n\n<p>Separately, scopes are working correct, but when I'm merging scopes, I have wrong result.</p>\n\n<pre><code>User.children_in_ages(a).search_by_tags(ids)\n  User Load (85.2ms)  SELECT \"users\".* FROM \"users\" INNER JOIN \"children\" ON \"children\".\"parent_id\" = \"users\".\"id\" INNER JOIN \"user_tags\" ON \"user_tags\".\"user_id\" = \"users\".\"id\" INNER JOIN \"tags\" ON \"tags\".\"id\" = \"user_tags\".\"tag_id\" WHERE (\"children\".\"birth_date\" BETWEEN '2016-02-29 08:35:00.322919' AND '2016-08-31 08:35:00.327283') AND (\"children\".\"gender\" != $1) AND \"tags\".\"id\" IN (17, 37, 70, 8, 11, 3, 91, 64) GROUP BY users.id HAVING (COUNT(tags.id) &gt;= 8)\n</code></pre>\n\n<p>Any ideas what could be wrong?</p>\n"}, {"tags": ["android", "ruby", "cucumber", "calabash", "calabash-android"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1472652635, "post_id": 39244469, "comment_id": 65839550, "body": "Is the jmespath gem installed?"}, {"owner": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "reply_to_user": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1472653168, "post_id": 39244469, "comment_id": 65839935, "body": "No. It is not. But I can&#39;t install just the gem, because I need to upload my calabash test project to cloud to run, I need all the 3rd party library ruby files put under <code>support&#47;</code> directory of my test project"}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1472653206, "post_id": 39244469, "comment_id": 65839967, "body": "Can you add jmespath to your Gemfile?"}, {"owner": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "reply_to_user": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1472653318, "post_id": 39244469, "comment_id": 65840042, "body": "@DaveSchweisguth, I am not sure, I can have a try, but I don&#39;t find how to add it to Gemfile"}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1472653596, "post_id": 39244469, "comment_id": 65840272, "body": "Do you have a Gemfile? If so you could add it to your question. I don&#39;t know if you do or not, but if you did it would probably be the way to fix the problem."}, {"owner": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "reply_to_user": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1472654370, "post_id": 39244469, "comment_id": 65840894, "body": "I can create a Gemfile, but I mean in Gemfile, how to add the jmepath library?"}], "answers": [{"comments": [{"owner": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "edited": false, "score": 0, "creation_date": 1473073896, "post_id": 39327615, "comment_id": 65990009, "body": "But calabahs-android cannot load/install the gems. My problem is how to make calabash-android be able to load the gems so that my test code which invoke the 3rd party gem functions can run."}, {"owner": {"reputation": 1410, "user_id": 3890924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uy8Gd.jpg?s=128&g=1", "display_name": "alannichols", "link": "https://stackoverflow.com/users/3890924/alannichols"}, "reply_to_user": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "edited": false, "score": 0, "creation_date": 1473074844, "post_id": 39327615, "comment_id": 65990555, "body": "If you do a bundle install before it runs, it should be able to load them.  Is that not working?"}, {"owner": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "edited": false, "score": 0, "creation_date": 1473075094, "post_id": 39327615, "comment_id": 65990668, "body": "No, that is not working, I can run my standalone ruby script which has <code>require aws-sdk</code>, but if I start running calabash test which loads my standalone ruby file, it complains undefined module <code>aws-sdk</code>."}, {"owner": {"reputation": 1410, "user_id": 3890924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uy8Gd.jpg?s=128&g=1", "display_name": "alannichols", "link": "https://stackoverflow.com/users/3890924/alannichols"}, "reply_to_user": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "edited": false, "score": 0, "creation_date": 1473075238, "post_id": 39327615, "comment_id": 65990743, "body": "Just to check you have run <code>bundle install</code> then <code>bundle exec calabash-android run myApp.apk DEBUG=1</code>"}, {"owner": {"reputation": 1410, "user_id": 3890924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uy8Gd.jpg?s=128&g=1", "display_name": "alannichols", "link": "https://stackoverflow.com/users/3890924/alannichols"}, "reply_to_user": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "edited": false, "score": 0, "creation_date": 1473165467, "post_id": 39327615, "comment_id": 66028105, "body": "How did you get on?"}], "tags": [], "owner": {"reputation": 1410, "user_id": 3890924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uy8Gd.jpg?s=128&g=1", "display_name": "alannichols", "link": "https://stackoverflow.com/users/3890924/alannichols"}, "is_accepted": false, "score": 0, "last_activity_date": 1473067843, "last_edit_date": 1495539966, "creation_date": 1473067843, "answer_id": 39327615, "question_id": 39244469, "link": "https://stackoverflow.com/questions/39244469/use-third-party-ruby-library-in-my-calabash-tests-but-get-error/39327615#39327615", "title": "Use third party ruby library in my calabash tests, but get error", "body": "<p>You need to install the jmespath gem to use it.  To install it you need to add it to your gemfile.  You can specify a local copy of a gem as follows</p>\n\n<pre><code>gem \"foo\", :path =&gt; \"/path/to/foo\"\n</code></pre>\n\n<p>Example taken from this question / answer - <a href=\"https://stackoverflow.com/questions/4487948/how-can-i-specify-a-local-gem-in-my-gemfile\">How can I specify a local gem in my Gemfile?</a></p>\n"}], "owner": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1473067843, "creation_date": 1472632079, "last_edit_date": 1472640556, "question_id": 39244469, "link": "https://stackoverflow.com/questions/39244469/use-third-party-ruby-library-in-my-calabash-tests-but-get-error", "title": "Use third party ruby library in my calabash tests, but get error", "body": "<p>My calabash android test project has the following structure:</p>\n\n<pre><code>-- myApp.apk\n-- features (directory)\n          |-- my-feature-1-file-name.feature\n          |-- step_definitions (directory)\n          |      calabash_steps.rb\n          |-- support (directory)\n          |      thirdPartyLib.rb\n</code></pre>\n\n<p>My calabash test steps need to use a third party library <strong>thirdPartyLib.rb</strong>. As you see above, under <code>features/</code> directory, I have a <code>support/</code> directory, there, I have a <strong>thirdPartyLib.rb</strong> ruby file.</p>\n\n<p>Inside <strong>thirdPartyLib.rb</strong> , the 1st line of code is this:</p>\n\n<pre><code>require 'jmespath'\n...\n</code></pre>\n\n<p>When I go to my project root, and run the test by command <code>calabash-android run myApp.apk DEBUG=1</code> , I get the following error:</p>\n\n<pre><code>DEBUG: Setting Android SDK location to $ANDROID_HOME\nDEBUG: Android SDK location set to '/Users/John/Library/Android/sdk'\nDEBUG: Set aapt path to '/Users/John/Library/Android/sdk/build-tools/23.0.3/aapt'\nDEBUG: Set zipalign path to '/Users/John/Library/Android/sdk/build-tools/23.0.3/zipalign'\nDEBUG: Set adb path to '/Users/John/Library/Android/sdk/platform-tools/adb'\nDEBUG: Set android jar path to '/Users/John/Library/Android/sdk/platforms/android-24/android.jar'\nDEBUG: Setting Java SDK location to $JAVA_HOME\nDEBUG: Java SDK location set to '/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home'\nDEBUG: Found java on PATH\nDEBUG: Set java path to '/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/bin/java'\nDEBUG: Found keytool on PATH\nDEBUG: Set keytool path to '/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/bin/keytool'\nDEBUG: Found jarsigner on PATH\nDEBUG: Set jarsigner path to '/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/bin/jarsigner'\ncannot load such file -- jmespath (LoadError)\n\n/Users/John/.calabash/sandbox/Rubies/2.1.6-p336/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n/Users/John/.calabash/sandbox/Rubies/2.1.6-p336/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n/Users/John/my-calabash-test/features/support/thirdPartyLib.rb:1:in `&lt;top (required)&gt;'\n...\n</code></pre>\n\n<p>So, it is a loading error, it looks like calabash-android cannot load file <code>jmespath (LoadError)</code>that is declared in <strong>thirdPartLib.rb</strong> . How can I get rid of this error?</p>\n"}, {"tags": ["php", "ruby-on-rails", "ruby", "windows-server-2012-r2"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 6136189, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1300042436676175/picture?type=large", "display_name": "Akif Hazarvi", "link": "https://stackoverflow.com/users/6136189/akif-hazarvi"}, "edited": false, "score": 0, "creation_date": 1472630577, "post_id": 39243917, "comment_id": 65824081, "body": "Can you explain a bit how can i use this method if you can give an example or something."}, {"owner": {"reputation": 182, "user_id": 6071580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3d669f89b8f9c0fd29c068969ad569?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/6071580/kushal"}, "reply_to_user": {"reputation": 47, "user_id": 6136189, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1300042436676175/picture?type=large", "display_name": "Akif Hazarvi", "link": "https://stackoverflow.com/users/6136189/akif-hazarvi"}, "edited": false, "score": 0, "creation_date": 1472630704, "post_id": 39243917, "comment_id": 65824152, "body": "you can have a look <a href=\"https://www.practicingruby.com/articles/ways-to-load-code\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 1719, "user_id": 1950763, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NzirI.jpg?s=128&g=1", "display_name": "Caffeine Coder", "link": "https://stackoverflow.com/users/1950763/caffeine-coder"}, "edited": false, "score": 0, "creation_date": 1472631027, "post_id": 39243917, "comment_id": 65824357, "body": "@KushalMistry Can you please add the important part of code from the link you shared in your answer , coz over the time links go dead and if someone in future wants to refer then it tends to get difficult ."}], "tags": [], "owner": {"reputation": 182, "user_id": 6071580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3d669f89b8f9c0fd29c068969ad569?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/6071580/kushal"}, "is_accepted": false, "score": -1, "last_activity_date": 1472630445, "creation_date": 1472630445, "answer_id": 39243917, "question_id": 39243862, "link": "https://stackoverflow.com/questions/39243862/how-to-run-ruby-file-from-php-code/39243917#39243917", "title": "How to run ruby file from php code", "body": "<p>you can use <code>load</code> method of <code>Kernel</code>. see the documentation at <a href=\"http://ruby-doc.org/core-2.2.1/Kernel.html#method-i-load\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.1/Kernel.html#method-i-load</a></p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 6136189, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1300042436676175/picture?type=large", "display_name": "Akif Hazarvi", "link": "https://stackoverflow.com/users/6136189/akif-hazarvi"}, "edited": false, "score": 0, "creation_date": 1472631121, "post_id": 39244000, "comment_id": 65824409, "body": "First one returned the error &quot;ruby is not recognized as an internal or external command &quot;, operable program or batch file"}, {"owner": {"reputation": 890, "user_id": 4537270, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ihOUv.jpg?s=128&g=1", "display_name": "XsiSec", "link": "https://stackoverflow.com/users/4537270/xsisec"}, "reply_to_user": {"reputation": 47, "user_id": 6136189, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1300042436676175/picture?type=large", "display_name": "Akif Hazarvi", "link": "https://stackoverflow.com/users/6136189/akif-hazarvi"}, "edited": false, "score": 0, "creation_date": 1472631181, "post_id": 39244000, "comment_id": 65824447, "body": "Have you installed ruby?  also take look on <a href=\"http://stackoverflow.com/questions/4619996/how-to-run-ruby-python-scripts-from-inside-php-passing-and-receiving-parameters?noredirect=1&amp;lq=1\" title=\"how to run ruby python scripts from inside php passing and receiving parameters\">stackoverflow.com/questions/4619996/&hellip;</a>"}, {"owner": {"reputation": 47, "user_id": 6136189, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1300042436676175/picture?type=large", "display_name": "Akif Hazarvi", "link": "https://stackoverflow.com/users/6136189/akif-hazarvi"}, "edited": false, "score": 0, "creation_date": 1472631293, "post_id": 39244000, "comment_id": 65824512, "body": "Ruby is installed and i can run it through command line. When i try to run it through php code it doesn&#39;t work."}, {"owner": {"reputation": 47, "user_id": 6136189, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1300042436676175/picture?type=large", "display_name": "Akif Hazarvi", "link": "https://stackoverflow.com/users/6136189/akif-hazarvi"}, "edited": false, "score": 0, "creation_date": 1472631377, "post_id": 39244000, "comment_id": 65824555, "body": "Yup  I don&#39;t have server/phpadmin/ruby installation, can you guide me how to install it?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 47, "user_id": 6136189, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1300042436676175/picture?type=large", "display_name": "Akif Hazarvi", "link": "https://stackoverflow.com/users/6136189/akif-hazarvi"}, "edited": false, "score": 0, "creation_date": 1472635166, "post_id": 39244000, "comment_id": 65826979, "body": "@AkifHazarvi : Is the directory with the Ruby binary present in the PATH at the time when you execute the command? Output the PATH just before running Ruby."}, {"owner": {"reputation": 47, "user_id": 6136189, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1300042436676175/picture?type=large", "display_name": "Akif Hazarvi", "link": "https://stackoverflow.com/users/6136189/akif-hazarvi"}, "edited": false, "score": 0, "creation_date": 1472637514, "post_id": 39244000, "comment_id": 65828722, "body": "Nop, How can i find the ruby binay path?"}], "tags": [], "owner": {"reputation": 890, "user_id": 4537270, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ihOUv.jpg?s=128&g=1", "display_name": "XsiSec", "link": "https://stackoverflow.com/users/4537270/xsisec"}, "is_accepted": false, "score": 1, "last_activity_date": 1472631044, "last_edit_date": 1495540849, "creation_date": 1472630727, "answer_id": 39244000, "question_id": 39243862, "link": "https://stackoverflow.com/questions/39243862/how-to-run-ruby-file-from-php-code/39244000#39244000", "title": "How to run ruby file from php code", "body": "<p>I am not sure if this is what you looking for but see below :)</p>\n\n<p>Se example below:</p>\n\n<pre><code>&lt;?php\n$descriptorspec = array(\n   0 =&gt; array(\"pipe\", \"r\"),  // stdin is a pipe that the child will read from\n   1 =&gt; array(\"pipe\", \"w\"),  // stdout is a pipe that the child will write to\n   2 =&gt; array(\"file\", \"./error-output.txt\", \"a\") // stderr is a file to write to\n);\n$process = proc_open('ruby ./test.rb', $descriptorspec, $pipes);\n\nif (is_resource($process)) {\n    // $pipes now looks like this:\n    // 0 =&gt; writeable handle connected to child stdin\n    // 1 =&gt; readable handle connected to child stdout\n    // Any error output will be appended to /tmp/error-output.txt\n\n    fwrite($pipes[0], 'hello world');\n    fclose($pipes[0]);\n\n    echo stream_get_contents($pipes[1]);\n    fclose($pipes[1]);\n\n    // It is important that you close any pipes before calling\n    // proc_close in order to avoid a deadlock\n    $return_value = proc_close($process);\n\n    echo \"command returned $return_value\\n\";\n}\n?&gt;\n</code></pre>\n\n<p>Save it as \nSave this as \"test.php\":</p>\n\n<p>source:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4619996/how-to-run-ruby-python-scripts-from-inside-php-passing-and-receiving-parameters\">Run Ruby/Python from PHP Code</a></p>\n\n<p>Here is another good example:</p>\n\n<pre><code>//PHP script to execute ruby scripts when the host doesn't have a cgi handler for .rb\n//Use with this .htaccess:\n\n/*\nOptions +FollowSymlinks\nRewriteEngine on\nRewriteRule ^(.*)\\.rb$ handler.php?rb=$1.rb [NC,QSA]\n*/\n\n$file = $_GET['rb'];\n\nif(in_array($file, scandir('.')))\n{\nforeach($_REQUEST as $key=&gt;$value) if($key != 'rb') $args .= \" $key=\".urlencode($value);\necho exec(escapeshellcmd('./'.$file.$args));\n}\nelse\n{\necho '404- Page not found';\n}\n?&gt;\n</code></pre>\n\n<p>Regards</p>\n\n<p>Daniel</p>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 6136189, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1300042436676175/picture?type=large", "display_name": "Akif Hazarvi", "link": "https://stackoverflow.com/users/6136189/akif-hazarvi"}, "is_accepted": false, "score": 0, "last_activity_date": 1472645048, "creation_date": 1472645048, "answer_id": 39249165, "question_id": 39243862, "link": "https://stackoverflow.com/questions/39243862/how-to-run-ruby-file-from-php-code/39249165#39249165", "title": "How to run ruby file from php code", "body": "<p>It worked by adding <code>exec(\"filename\");</code>\nBefore it was written something like this exec('ruby filename');\nThank you very much everyone for their responses.</p>\n"}], "owner": {"reputation": 47, "user_id": 6136189, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1300042436676175/picture?type=large", "display_name": "Akif Hazarvi", "link": "https://stackoverflow.com/users/6136189/akif-hazarvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1149, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1472645066, "creation_date": 1472630280, "last_edit_date": 1472645066, "question_id": 39243862, "link": "https://stackoverflow.com/questions/39243862/how-to-run-ruby-file-from-php-code", "title": "How to run ruby file from php code", "body": "<p>tried these commands</p>\n\n<pre><code>exec(\"ruby helloword.rb\");\nsystem (\"ruby helloword.rb\");\n</code></pre>\n\n<p>Running php on windows server 2012R2\nI just want the ruby class to run as it will read and write results from text file and than i can user those text files.\nIs there any simple way to get this done.\nTried almost everything on stackoverflow. So please dont mark this as duplicate. </p>\n"}, {"tags": ["android", "ruby", "cucumber", "calabash", "calabash-android"], "comments": [{"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1472629559, "post_id": 39243465, "comment_id": 65823532, "body": "did you try <code>Then I wait for &quot;final_result&quot; to appear</code>?"}, {"owner": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "reply_to_user": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1472630530, "post_id": 39243465, "comment_id": 65824058, "body": "@Blackbelt, Like I said in my question, the string I am waiting for can be localized to other language, the <code>Then I wait for &quot;final_result&quot; to appear</code> is waiting for the text &quot;final_result&quot; to appear, I need to wait for the string id to appear, not the string text."}, {"owner": {"reputation": 143, "user_id": 2087433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b2a6f94f29920fdcc4de55cd5566f31?s=128&d=identicon&r=PG", "display_name": "Mauricio Togneri", "link": "https://stackoverflow.com/users/2087433/mauricio-togneri"}, "edited": false, "score": 0, "creation_date": 1486201104, "post_id": 39243465, "comment_id": 71251146, "body": "I recommend you to try this library: <a href=\"https://github.com/mauriciotogneri/green-coffee\" rel=\"nofollow noreferrer\">github.com/mauriciotogneri/green-coffee</a>  It&#39;s based on Espresso, so tests run faster than using Calabash. Also, you will not have synchronization issues."}], "answers": [{"comments": [{"owner": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "edited": false, "score": 0, "creation_date": 1472655584, "post_id": 39252567, "comment_id": 65841792, "body": "Thanks, I will have a try. By the way, where can i find all the available functions like <code>wait_for_element_exists(...)</code> for creating custom steps?"}, {"owner": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "edited": false, "score": 0, "creation_date": 1472665912, "post_id": 39252567, "comment_id": 65847823, "body": "I tried your solution, I get this error : <code>undefined local variable or method </code>key&#39; for #&lt;Object:0x007fbaaa1931f8&gt; (NameError)`"}, {"owner": {"reputation": 61, "user_id": 5368006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894716fe8a2aa2b435386a4961d9c601?s=128&d=identicon&r=PG&f=1", "display_name": "Krumons", "link": "https://stackoverflow.com/users/5368006/krumons"}, "reply_to_user": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "edited": false, "score": 0, "creation_date": 1472732298, "post_id": 39252567, "comment_id": 65877070, "body": "Yeah, sorry, my mistake. You should use the same variable in the step definition.   Also, your strings file might be in a different format, so in <code>get_string_from_strings_file</code>, you can use whatever you like to get the info you need. This is just an example"}], "tags": [], "owner": {"reputation": 61, "user_id": 5368006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894716fe8a2aa2b435386a4961d9c601?s=128&d=identicon&r=PG&f=1", "display_name": "Krumons", "link": "https://stackoverflow.com/users/5368006/krumons"}, "is_accepted": false, "score": 0, "last_activity_date": 1472654292, "creation_date": 1472654292, "answer_id": 39252567, "question_id": 39243465, "link": "https://stackoverflow.com/questions/39243465/calabash-android-wait-for-string-with-id-to-appear/39252567#39252567", "title": "calabash-android: wait for string with id to appear", "body": "<p>Example of the step. You can substitute the <code>*</code> with whatever class you're using for the label.</p>\n\n<pre><code>Then(/^I wait for text with id \"(.*?)\" to appear$/) do |id|\n    wait_for_element_exists(\u201c* id:\u2019#{key}\u2019\u201d)\nend\n</code></pre>\n\n<p>And then just use it in step definition:</p>\n\n<pre><code>Then I wait for text with id \"final_result\" to appear\n</code></pre>\n\n<p>Also, if you do not like the idea of id's, you can create a method that will return the string itself, based on the language, and key you pass to it, and you can deal with localization that way. For example a rough skeleton with xml strings file</p>\n\n<pre><code>def get_string_from_strings_file(key, language)\n    file_path = \"#{PATH_TO_STRINGS_DIR}/#{language}\"\n    xml_string = File.open(file_path)\n    s = string_xml.xpath(\"//string[@name='#{key}']/text()\")\n    raise 'No string found' if s == nil\n    s\nend\n</code></pre>\n\n<p>And the check for text in the step.</p>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 4918966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391d0aafa6db5acb06ffe1632f579b68?s=128&d=identicon&r=PG&f=1", "display_name": "nimesh", "link": "https://stackoverflow.com/users/4918966/nimesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1474872656, "creation_date": 1474872656, "answer_id": 39696384, "question_id": 39243465, "link": "https://stackoverflow.com/questions/39243465/calabash-android-wait-for-string-with-id-to-appear/39696384#39696384", "title": "calabash-android: wait for string with id to appear", "body": "<p>fin\nYou can wait for the element first using wait_poll method. and once it appears you can get its text value. As that string would be as one the attribute value of the element.  check out the code of .feature file</p>\n\n<pre><code>Then I should wait for the text Final Result\n</code></pre>\n\n<p>and code behind in your .rb file,</p>\n\n<pre><code>Then(/^I should wait for the text Final Result$/) do\n#this wait_poll method will wait untill element with specified id exists.\nwait_poll(:until_exists =&gt; \"* marked:'#{id}'\", :timeout =&gt; 20)do\n#code, you can run while waiting\nend\nend\n</code></pre>\n"}], "owner": {"reputation": 35461, "user_id": 959734, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/44608a8e81f8ca8ee21619d07df32b92?s=128&d=identicon&r=PG", "display_name": "Leem.fin", "link": "https://stackoverflow.com/users/959734/leem-fin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1474872656, "creation_date": 1472629032, "last_edit_date": 1472640214, "question_id": 39243465, "link": "https://stackoverflow.com/questions/39243465/calabash-android-wait-for-string-with-id-to-appear", "title": "calabash-android: wait for string with id to appear", "body": "<p>I am using <a href=\"https://github.com/calabash/calabash-android\" rel=\"nofollow\">calabash-android</a> to test my app. In its <a href=\"https://github.com/calabash/calabash-android/blob/master/ruby-gem/lib/calabash-android/canned_steps.md\" rel=\"nofollow\">pre-defined steps</a> it has a bunch of \"wait\" steps, but it only has \"Then I wait for view with id to appear\". </p>\n\n<p>I need to wait for a string <code>R.string.final_result</code> to appear.</p>\n\n<p>I am wondering, how can I <strong>wait for a string with id to appear</strong>? I need to wait for the id of string resource ,because the string could be localized in my app.</p>\n\n<p>If it is impossible to do with pre-defined steps, how can I create a step to do it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 0, "creation_date": 1472627435, "post_id": 39242952, "comment_id": 65822317, "body": "I was never a big fan of <code>unless</code>. Any other way? If not, looks good to me."}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "reply_to_user": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 1, "creation_date": 1472627482, "post_id": 39242952, "comment_id": 65822349, "body": "@Sylar:  <code>unless</code> is sugar for <code>if !(expression)</code>.  It negates the expression without the need to specify the <code>!</code> there."}, {"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1472627574, "post_id": 39242952, "comment_id": 65822408, "body": "You can use <code>if not</code>, if you don&#39;t want to use <code>unless</code>"}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 1, "creation_date": 1472627688, "post_id": 39242952, "comment_id": 65822474, "body": "Nah it&#39;s cool. I would work with <code>unless</code>. Never knew about that as I never liked <code>unless</code>. Thanks."}], "tags": [], "owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "is_accepted": true, "score": 5, "last_activity_date": 1472627761, "last_edit_date": 1472627761, "creation_date": 1472627391, "answer_id": 39242952, "question_id": 39242942, "link": "https://stackoverflow.com/questions/39242942/check-if-false-then-run-code/39242952#39242952", "title": "Check if false then run code", "body": "<p>Use <code>unless</code></p>\n\n<pre><code>unless Model.exists?(table_column: 'joe')\n  # run code\nend\n</code></pre>\n\n<p>or <code>if not</code></p>\n\n<pre><code>if not Model.exists?(table_column: 'joe') \n  # run code\nend\n</code></pre>\n\n<p>or </p>\n\n<pre><code>if Model.find_by(table_column: 'joe').blank?\n  # run code\nend\n</code></pre>\n\n<p>Hope that helps!</p>\n"}, {"comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1472635441, "post_id": 39243880, "comment_id": 65827175, "body": "Dont&#39;t do <code>== false</code> for checking whether a condition is not fulfilled! Ruby has two ways to represent falsehood: <code>FalseClass</code> and <code>NilClass</code>. With your approach, you catch only the former. The comparision <b>is</b> useful, if you work with three-valued logic. For instance, you have a function where the output can be <i>true</i>, <i>false</i> and <i>don&#39;t know</i>, and you decide to model this using <code>true</code>, <code>false</code> and <code>nil</code>. In this case, you would indeed compare by <code>... == false</code>."}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1472635676, "post_id": 39243880, "comment_id": 65827365, "body": "@user1934428: exactly. :)"}], "tags": [], "owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "is_accepted": false, "score": 1, "last_activity_date": 1472630325, "creation_date": 1472630325, "answer_id": 39243880, "question_id": 39242942, "link": "https://stackoverflow.com/questions/39242942/check-if-false-then-run-code/39243880#39243880", "title": "Check if false then run code", "body": "<p>To add some other popular choices (@RSB: feel free to copy these into your answer):</p>\n\n<p>Using '!':</p>\n\n<pre><code>if !Model.exists?(table_column: 'joe')\n  # A single '!' negates\nend\n</code></pre>\n\n<p>Using '==':</p>\n\n<pre><code>if Model.exists?(table_column: 'joe') == false\n  # compared against false\nend\n</code></pre>\n\n<p>Note that there are slight (but potentially dramatic) differences  in the approaches, search the web for \"falsey\", \"truthy\" or \"truthiness\" and your favorite programming language.</p>\n\n<p>Which solution to choose depends a lot on your style and the expression you have at hand (the <code>my_value == false</code> one for example is really explicit and will not hit if <code>my_value = nil</code>).</p>\n"}], "owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 39242952, "answer_count": 2, "score": 0, "last_activity_date": 1472630325, "creation_date": 1472627351, "question_id": 39242942, "link": "https://stackoverflow.com/questions/39242942/check-if-false-then-run-code", "title": "Check if false then run code", "body": "<p>I want to test something. If <code>false</code> do this. I wish not to test for true, only false. My code looks like this and I only need to do something if false:</p>\n\n<pre><code>if Model.exists?(table_column: 'joe')\n  # this part is blank\nelse\n# run this code\nend\n</code></pre>\n\n<p>My code runs after the <code>else</code> which is what I want. Is there a clean rails/ruby method that tests for false? My code would only run if false, not true.</p>\n\n<p>If duplicate, I'll gladly delete. Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 4646312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972a4cc5a1f9c163c534f1f08f1cfe5c?s=128&d=identicon&r=PG&f=1", "display_name": "Pigius", "link": "https://stackoverflow.com/users/4646312/pigius"}, "is_accepted": false, "score": 0, "last_activity_date": 1472643518, "creation_date": 1472643518, "answer_id": 39248629, "question_id": 39242654, "link": "https://stackoverflow.com/questions/39242654/custom-mailer-for-other-than-admin-and-user-in-devise-rails/39248629#39248629", "title": "Custom mailer for other than admin and user in Devise Rails", "body": "<p>I created decorator for user:</p>\n\n<pre><code> def inactive_designer\nUser::PANEL_LEVEL_INACTIVE_MODERATOR\nend\n</code></pre>\n\n<p>With code above, I can use just inactive_moderator instead of typing     User::PANEL_LEVEL_INACTIVE_MODERATOR</p>\n\n<p>And in custom_devise_mailer.rb</p>\n\n<pre><code>  def confirmation_instructions(record, token, opts = {})\nif record.class.name == 'User' &amp;&amp; record.panel_level != record.decorate.inactive_moderator\n  opts[:template_path] = 'devise_users/mailer'\nelse if record.class.name == 'Admin'\n       opts[:template_path] = 'devise_admins/mailer'\n     else if record.decorate.inactive_moderator == record.panel_level &amp;&amp; record.class.name != 'Admin'\n            opts[:template_path] = 'devise_moderators/mailer'\n          end\n     end\nend\n</code></pre>\n\n<p>Use the decorator and make a few conditional, to distinguish roles.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 4646312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972a4cc5a1f9c163c534f1f08f1cfe5c?s=128&d=identicon&r=PG&f=1", "display_name": "Pigius", "link": "https://stackoverflow.com/users/4646312/pigius"}, "edited": false, "score": 1, "creation_date": 1472654337, "post_id": 39252121, "comment_id": 65840865, "body": "Thank you :) it&#39;s more transparent solution than mine."}], "tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": true, "score": 1, "last_activity_date": 1472653046, "creation_date": 1472653046, "answer_id": 39252121, "question_id": 39242654, "link": "https://stackoverflow.com/questions/39242654/custom-mailer-for-other-than-admin-and-user-in-devise-rails/39252121#39252121", "title": "Custom mailer for other than admin and user in Devise Rails", "body": "<p>Your if statements are very twisted.\nYou can increase readability by simplifying them, by abstracting some logic into decorators.\nI gues that you have decorators for Admin and User classes:</p>\n\n<pre><code># in UserDecorator\ndef devise_mailer\n  if object.panel_level = User::PANEL_LEVEL_INACTIVE_MODERATOR\n    'devise_moderators/mailer'\n  else\n    'devise_users/mailer'\n  end\nend\n\n# in AdminDecorator\ndef devise_mailer\n  'devise_admins/mailer'\nend\n</code></pre>\n\n<p>Having that your <code>custom_devise_mailer.rb</code> can be simplified to:</p>\n\n<pre><code>def confirmation_instructions(record, token, opts = {})\n  opts[:template_path] = resource.decorate.devise_mailer\n  super\nend\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4646312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972a4cc5a1f9c163c534f1f08f1cfe5c?s=128&d=identicon&r=PG&f=1", "display_name": "Pigius", "link": "https://stackoverflow.com/users/4646312/pigius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 39252121, "answer_count": 2, "score": 1, "last_activity_date": 1472653046, "creation_date": 1472626387, "last_edit_date": 1472627047, "question_id": 39242654, "link": "https://stackoverflow.com/questions/39242654/custom-mailer-for-other-than-admin-and-user-in-devise-rails", "title": "Custom mailer for other than admin and user in Devise Rails", "body": "<p>I have a problem, with Devise. I created new role other than admin and user in devise Rails. Here how it looks like in  user.rb model</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    PANEL_LEVELS = [PANEL_LEVEL_NORMAL = 'normal', PANEL_LEVEL_INACTIVE_MODERATOR = 'inactive_moderator', PANEL_LEVEL_DESIGNER = 'moderator']\n</code></pre>\n\n<p>When somebody creates new moderator account, it will become inactive moderator.</p>\n\n<p>Main problem for me, is to send custom confirmation mail to moderator, this is how I tried to do it from custom_devise_mailer:</p>\n\n<pre><code> def confirmation_instructions(record, token, opts = {})\nif record.class.name == 'User'\n  opts[:template_path] = 'devise_users/mailer'\nelse if resource.panel_level == User::PANEL_LEVEL_INACTIVE_MODERATOR\n       opts[:template_path] = 'devise_moderators/mailer'\n     else\n       opts[:template_path] = 'devise_admins/mailer'\n     end\nend\nopts[:template_name] = :confirmation_instructions\nsuper\n\n\nend\n</code></pre>\n\n<p>Where </p>\n\n<pre><code>      resource.panel_level = User::PANEL_LEVEL_INACTIVE_MODERATOR if params.fetch('account') { nil } == 'moderator'\n</code></pre>\n\n<p>But it's sending default mail for devise_user.  Naturally I have views for moderator mailer, and method for sending it.</p>\n"}, {"tags": ["ruby", "google-sheets-api", "google-api-ruby-client"], "answers": [{"tags": [], "owner": {"reputation": 5385, "user_id": 936494, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/TCqih.jpg?s=128&g=1", "display_name": "Jignesh Gohel", "link": "https://stackoverflow.com/users/936494/jignesh-gohel"}, "is_accepted": false, "score": 0, "last_activity_date": 1472685344, "creation_date": 1472685344, "answer_id": 39260432, "question_id": 39242603, "link": "https://stackoverflow.com/questions/39242603/google-sheets-v4-api-ruby-trying-to-update-values-in-cells-in-a-column-but-the/39260432#39260432", "title": "Google Sheets v4 API Ruby - Trying to update values in cells in a column but the updates are not happening", "body": "<p>This is solved. </p>\n\n<p>The solution is to use Symbol-keys, instead of String-keys in ValueRangeObject. That is I had to change my <code>value_range_object</code> from following</p>\n\n<pre><code>{\n  \"major_dimension\" =&gt; \"ROWS\",\n  \"values\" =&gt; [\n     [\"Item\", \"Cost\", \"Stocked\", \"Ship Date\"],\n     [\"Wheel\", \"$20.50\", \"4\", \"3/1/2016\"],\n     [\"Door\", \"$15\", \"2\", \"3/15/2016\"],\n     [\"Engine\", \"$100\", \"1\", \"30/20/2016\"],\n     [\"Totals\", \"=SUM(B2:B4)\", \"=SUM(C2:C4)\", \"=MAX(D2:D4)\"]\n   ]\n}\n</code></pre>\n\n<p>TO</p>\n\n<pre><code>value_range_object = {\n  major_dimension: \"ROWS\",\n  values: [\n     [\"Item\", \"Cost\", \"Stocked\", \"Ship Date\"],\n     [\"Wheel\", \"$20.50\", \"4\", \"3/1/2016\"],\n     [\"Door\", \"$15\", \"2\", \"3/15/2016\"],\n     [\"Engine\", \"$100\", \"1\", \"30/20/2016\"],\n     [\"Totals\", \"=SUM(B2:B4)\", \"=SUM(C2:C4)\", \"=MAX(D2:D4)\"]\n   ]\n}\n</code></pre>\n\n<p>Take a note that hash keys are Symbols and not Strings.</p>\n\n<p>Looks like a simple thing but took me few hours to figure out this.</p>\n\n<p>More details can be found at <a href=\"https://github.com/google/google-api-ruby-client/issues/462#issuecomment-243927914\" rel=\"nofollow\">https://github.com/google/google-api-ruby-client/issues/462#issuecomment-243927914</a></p>\n\n<p>Thanks.</p>\n"}], "owner": {"reputation": 5385, "user_id": 936494, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/TCqih.jpg?s=128&g=1", "display_name": "Jignesh Gohel", "link": "https://stackoverflow.com/users/936494/jignesh-gohel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2025, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531947197, "creation_date": 1472626210, "last_edit_date": 1531947197, "question_id": 39242603, "link": "https://stackoverflow.com/questions/39242603/google-sheets-v4-api-ruby-trying-to-update-values-in-cells-in-a-column-but-the", "title": "Google Sheets v4 API Ruby - Trying to update values in cells in a column but the updates are not happening", "body": "<p><strong>Ruby: 2.3.1</strong></p>\n\n<p><strong>Rails: 5.0.0</strong></p>\n\n<p>I have a sheet containing data like below: A, B , C, D represents the columns name in the sheet and 1, 2, 3 represents the row numbers.</p>\n\n<p><a href=\"https://i.stack.imgur.com/8gQDj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8gQDj.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have written a script mentioned about <a href=\"https://stackoverflow.com/q/39216040/936494\">here</a> and from it I am trying to update the values in cells <strong>B2</strong> and <strong>B3</strong> and for updating I am using the following code:</p>\n\n<pre><code>spreadsheet_id = \"&lt;My Private Spreadsheet ID&gt;\"\n\nrange = 'Sheet1!B2:B3'\n\nvalue_range_object = { \n  \"majorDimension\"=&gt;\"COLUMNS\", \n  \"values\"=&gt;[\n     [9, 18] # B2 should be updated with value 9 and B3 should be updated with value 18\n   ]\n}\n\nservice = Google::Apis::SheetsV4::SheetsService.new\nservice.authorization = authorization\nupdate_res = service.update_spreadsheet_value(spreadsheet_id, range, value_range_object, value_input_option: 'USER_ENTERED')\n\nputs \"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; update_res: #{update_res.inspect}\"\n</code></pre>\n\n<p>But that puts is printing </p>\n\n<pre><code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; update_res: #&lt;Google::Apis::SheetsV4::UpdateValuesResponse:0x000000068acc70 @updated_range=\"Sheet1!B2\", @spreadsheet_id=\"&lt;My Private Spreadsheet ID&gt;\"&gt;\n</code></pre>\n\n<p>and there are no updates made to the sheet.</p>\n\n<p>As per the <a href=\"https://developers.google.com/sheets/samples/writing\" rel=\"nofollow noreferrer\">documentation</a> when an update is successful following kind of response should be received</p>\n\n<pre><code>{\n  \"spreadsheetId\": spreadsheetId,\n  \"updatedRange\": \"Sheet1!B1:D5\",\n  \"updatedRows\": 3,\n  \"updatedColumns\": 2,\n  \"updatedCells\": 6,\n}\n</code></pre>\n\n<p>Comparing that with the response I am getting there is definitely something which is missing or incorrect in my code and which is hampering the updates to be applied.</p>\n\n<p>Can I please get some guidance to get past my problem and hence achieve my desired goal? </p>\n\n<p><strong>Update</strong></p>\n\n<p>I tried out this with a slightly different approach following the example given at <a href=\"https://developers.google.com/sheets/samples/writing#write_a_single_range\" rel=\"nofollow noreferrer\">https://developers.google.com/sheets/samples/writing#write_a_single_range</a></p>\n\n<p>As part of this I created a fresh new blank sheet on Google Drive, shared it with my Service Account and tried to update it with the following code:</p>\n\n<pre><code>require 'google/apis/sheets_v4'\n\nENV[\"GOOGLE_ACCOUNT_TYPE\"] = 'service_account'\nENV[\"GOOGLE_CLIENT_EMAIL\"] = '&lt;client_email_from_downloaded_json_here&gt;'\nENV[\"GOOGLE_PRIVATE_KEY\"] = \"&lt;private_key_from_downloaded_json_here&gt;\"\n\nSCOPE = Google::Apis::SheetsV4::AUTH_SPREADSHEETS\n\nauthorization = Google::Auth.get_application_default(SCOPE)\n\n# Initialize the API\nservice = Google::Apis::SheetsV4::SheetsService.new\nservice.authorization = authorization\n\nspreadsheet_id = '&lt;MY SPREADSHEET ID HERE&gt;'\n\nsheet_name = 'Sheet1'\n\nrange = \"Sheet1!A1:D5\"\n\nvalue_range_object = {\n  \"majorDimension\" =&gt; \"ROWS\",\n  \"values\" =&gt; [\n     [\"Item\", \"Cost\", \"Stocked\", \"Ship Date\"],\n     [\"Wheel\", \"$20.50\", \"4\", \"3/1/2016\"],\n     [\"Door\", \"$15\", \"2\", \"3/15/2016\"],\n     [\"Engine\", \"$100\", \"1\", \"30/20/2016\"],\n     [\"Totals\", \"=SUM(B2:B4)\", \"=SUM(C2:C4)\", \"=MAX(D2:D4)\"]\n   ]\n}\n\n\nupdate_res = service.update_spreadsheet_value(spreadsheet_id, range, value_range_object, value_input_option: 'USER_ENTERED')\n\nputs \"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; update_res: #{update_res.inspect}\"\n</code></pre>\n\n<p>But strangely that is also not working. I am getting the following response</p>\n\n<pre><code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; update_res: #&lt;Google::Apis::SheetsV4::UpdateValuesResponse:0x00000006540348 @updated_range=\"Sheet1!A1\", @spreadsheet_id=\"MY SPREADSHEET ID HERE\"&gt;\n</code></pre>\n\n<p>and the sheet is also blank after executing the code.</p>\n\n<p>Can anybody please take a look into this and comment on what is going on?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rubygems"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1472626982, "post_id": 39242327, "comment_id": 65822042, "body": "Tried it. But i guess it does not provide a method to skip a particular set of weekdays when using <code>interval</code>. May be you can write your own logic to generate this list of days. Should be easy."}, {"owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "edited": false, "score": 0, "creation_date": 1472627493, "post_id": 39242327, "comment_id": 65822360, "body": "I think the gem works as expected, the behaviour you want is not the one with the least surprise. I think a feature like <code>:use_only =&gt; :workdays</code> or <code>:use_only =&gt; [:mo, :tue]</code> would be best."}], "answers": [{"tags": [], "owner": {"reputation": 3381, "user_id": 220679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5c165ffc801b46ddff8851d5b49bf3e?s=128&d=identicon&r=PG", "display_name": "Ginty", "link": "https://stackoverflow.com/users/220679/ginty"}, "is_accepted": false, "score": 1, "last_activity_date": 1473232467, "creation_date": 1473232467, "answer_id": 39363470, "question_id": 39242327, "link": "https://stackoverflow.com/questions/39242327/anyone-here-used-recurrence-gem/39363470#39363470", "title": "Anyone here used Recurrence Gem?", "body": "<p>Sorry it doesn't specifically answer your question, but just to say that I have used the Icecube gem in the past and it worked well, including exceptions:</p>\n\n<p><a href=\"https://github.com/seejohnrun/ice_cube\" rel=\"nofollow\">https://github.com/seejohnrun/ice_cube</a></p>\n"}], "owner": {"reputation": 263, "user_id": 1317482, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/67c8af56d3d1b0fb756a18f0be21c943?s=128&d=identicon&r=PG", "display_name": "Berimbolo", "link": "https://stackoverflow.com/users/1317482/berimbolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473232467, "creation_date": 1472625325, "question_id": 39242327, "link": "https://stackoverflow.com/questions/39242327/anyone-here-used-recurrence-gem", "title": "Anyone here used Recurrence Gem?", "body": "<p>I just found out about this gem a couple of weeks ago that exactly serves my purpose (<a href=\"https://github.com/fnando/recurrence\" rel=\"nofollow\">https://github.com/fnando/recurrence</a>). Seems to work fine until I started implementing the :except feature doesn't seem to be working as intended. I did write the issue to the gem owner but seems to be inactive at the moment. </p>\n\n<p>I was hoping someone has used this and fond some work around or have any suggestions. Please check the scenario below.</p>\n\n<p>Scenario</p>\n\n<p>r = Recurrence.new( {:interval=>3, :starts=>Wed, 31 Aug 2016, :until=>Mon, 31 Oct 2016, :except=>[Sat, 03 Sep 2016, Sun, 04 Sep 2016, Sat, 10 Sep 2016, Sun, 11 Sep 2016, Sat, 17 Sep 2016, Sun, 18 Sep 2016, Sat, 24 Sep 2016, Sun, 25 Sep 2016, Sat, 01 Oct 2016, Sun, 02 Oct 2016, Sat, 08 Oct 2016, Sun, 09 Oct 2016, Sat, 15 Oct 2016, Sun, 16 Oct 2016, Sat, 22 Oct 2016, Sun, 23 Oct 2016, Sat, 29 Oct 2016, Sun, 30 Oct 2016]})</p>\n\n<p>Note: The :except dates are basically excluding all saturday and sunday.</p>\n\n<p>Interval: 3 days (item should appear every 3rd day)\nExpected Dates: \nAug 31,  Sept 5, Sept 8, Sept 13</p>\n\n<p>Results:\nAug 31, Sept 6, Sept 9, Sept 12</p>\n\n<p>If you can see, it got messed up during Sept 5 instead appearing on Sept 6. </p>\n\n<p>Aug 31 is wednesday so on the 3rd day excluding sat sun should have been Sept 5.</p>\n"}, {"tags": ["php", "python", "ruby", "content-management-system", "lexical-analysis"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1472633555, "post_id": 39242269, "comment_id": 65825985, "body": "monkeylearn is an option"}], "answers": [{"tags": [], "owner": {"reputation": 182, "user_id": 6071580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3d669f89b8f9c0fd29c068969ad569?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/6071580/kushal"}, "is_accepted": false, "score": 0, "last_activity_date": 1472630261, "creation_date": 1472630261, "answer_id": 39243858, "question_id": 39242269, "link": "https://stackoverflow.com/questions/39242269/categorizing-natural-content/39243858#39243858", "title": "Categorizing natural content", "body": "<p>Ther is a rubygem which can help you out in this. check <a href=\"https://github.com/alexandru/stuff-classifier\" rel=\"nofollow\">this</a></p>\n"}], "owner": {"reputation": 28684, "user_id": 510754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1850623d675fdf6b04f01fc0740ee24c?s=128&d=identicon&r=PG", "display_name": "Rinto George", "link": "https://stackoverflow.com/users/510754/rinto-george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1472630261, "creation_date": 1472625113, "last_edit_date": 1495540301, "question_id": 39242269, "link": "https://stackoverflow.com/questions/39242269/categorizing-natural-content", "title": "Categorizing natural content", "body": "<p>My question is how to extract a relevant category from a natural content.</p>\n\n<p>For example, below is a news article from a newspaper.</p>\n\n<blockquote>\n  <p>Arsenal have completed the signing of Shkodran Mustafi from Valencia as the Gunners enter deadline day having made six signings this summer, in the form of Lucas Perez, Granit Xhaka, and the young trio of Rob Holding, Takuma Asano and Kelechi Nwakali, alongside the German international. The news comes hours after the north London club announced the transfer of Perez to the Emirates, which is likely to see an end to their transfer business this summer.</p>\n</blockquote>\n\n<p>I want likely to  categorize this content in category <strong>Sports</strong>. Is there any well written library in any programming languages like python,php,ruby?</p>\n\n<p>Question inspiration : <a href=\"http://www.newsnow.co.uk/\" rel=\"nofollow noreferrer\">http://www.newsnow.co.uk/</a></p>\n\n<p>I saw one another question related to this but the answer not satisfying my requirement.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/820296/auto-categorization-of-content\">Auto Categorization of Content</a></p>\n"}, {"tags": ["ruby", "utf-8"], "comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1472625018, "post_id": 39242138, "comment_id": 65820931, "body": "Out of curiosity, why? JSON is typically transmitted with content-type <code>application&#47;json; charset=utf-8</code>, so it may be fine to simply include these characters in your JSON."}, {"owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1472625425, "post_id": 39242138, "comment_id": 65821111, "body": "Good question. I am trying to port a longer python code to ruby. It involves some AWS4 signatures (not fun...). My port works when using English characters as input, and I am getting errors from AWS4 when using non English characters. The above question is what I pinpointed as the first difference between the two implementations."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1472625543, "post_id": 39242138, "comment_id": 65821171, "body": "OK. I&#39;ve had to do similar things in the past for the Facebook Graph API, so I understand. Ruby and Python just handle these things so differently. Like, why is the &quot;c&quot; in <code>\\u00c8G</code> in the Python example lowercase, but the &quot;G&quot; is capitalized? I can show you how to convert it to these escape sequences in Ruby, but Ruby capitalizes all the alphabetical characters, making this very tricky to get right."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1472625846, "post_id": 39242138, "comment_id": 65821352, "body": "Oh, herp, that&#39;s the G from the input data. Right. Working on a solution for you."}], "answers": [{"comments": [{"owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "edited": false, "score": 0, "creation_date": 1472628499, "post_id": 39243028, "comment_id": 65822972, "body": "wow thats a mouthful... :) - thanks for the effort and well documented answer."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "edited": false, "score": 0, "creation_date": 1472628618, "post_id": 39243028, "comment_id": 65823044, "body": "You&#39;re quite welcome! As I mentioned above, I&#39;ve wrestled with this before so I had a good idea where to start from. Good luck!"}, {"owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "edited": false, "score": 0, "creation_date": 1472630329, "post_id": 39243028, "comment_id": 65823963, "body": "If nothing else, this answer makes me think the problem lies elsewhere. I will of course accept the answer once I have made some more tests, and once the chance of other illuminating answers fades."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "edited": false, "score": 1, "creation_date": 1472670428, "post_id": 39243028, "comment_id": 65850387, "body": "@DannyB The problem is that the existing code that you&#39;re trying to port relies on very specific ways that Python 1. encodes data as UTF-16, 2. represents UTF escape sequences, and 3. formats encoded JSON. Ruby does it differently\u2014not wrong, just differently\u2014and the checksums don&#39;t match. All or most of this could be avoided by just working with UTF-8 data, which is perfectly valid JSON, but unfortunately you&#39;re dealing with an external system with some &quot;quirks&quot; that you must emulate."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 1, "last_activity_date": 1538595753, "last_edit_date": 1538595753, "creation_date": 1472627608, "answer_id": 39243028, "question_id": 39242138, "link": "https://stackoverflow.com/questions/39242138/encode-string-as-uxxxx/39243028#39243028", "title": "Encode string as \\uXXXX", "body": "<p>Surely someone will come along with a more elegant (or at least a more efficient and robust) solution, but here's one for the time being:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'json'\nrequire 'digest'\n\ntext = '\u00c0\u00c8G'\n  .encode('UTF-16')                          # convert UTF-8 characters to UTF-16\n  .inspect                                   # escape UTF-16 characters and convert back to UTF-8\n  .sub(/^\"\\\\u[Ff][Ee][Ff][Ff](.*?)\"$/, '\\1') # remove outer quotes and BOM\n  .gsub(/\\\\u\\w{4}/, &amp;:downcase!)             # downcase alphas in escape sequences\n\njs = { data: text }                          # wrap in containing data structure\n  .to_json(:space=&gt;' ')                      # convert to JSON with spaces after colons\n  .gsub(/\\\\\\\\u(?=\\w{4})/, '\\\\u')             # remove extra backslashes\n\nputs 'Ruby:', js, Digest::SHA256.hexdigest(js)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ ./test.rb \nRuby:\n{\"data\": \"\\u00c0\\u00c8G\"}\na6366cbd6750dc25ceba65dce8fe01f283b52ad189f2b54ba1bfb39c7a0b96d3\n</code></pre>\n"}], "owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 39243028, "answer_count": 1, "score": 0, "last_activity_date": 1538595753, "creation_date": 1472624599, "last_edit_date": 1495541785, "question_id": 39242138, "link": "https://stackoverflow.com/questions/39242138/encode-string-as-uxxxx", "title": "Encode string as \\uXXXX", "body": "<p>I am trying to port a code from python to ruby, and having difficulties in one of the functions that encodes a UTF-8 string to JSON.</p>\n\n<p>I have stripped down the code to what I believe is my problem.</p>\n\n<p>I would like to make ruby output the exact same output as python.</p>\n\n<h2>The python code:</h2>\n\n<pre><code>#!/usr/bin/env python\n# encoding: utf-8\n\nimport json\nimport hashlib\n\ntext = \"\u00c0\u00c8G\"\njs = json.dumps( { 'data': text } )\n\nprint 'Python:'\nprint js\nprint hashlib.sha256(js).hexdigest()\n</code></pre>\n\n<h2>The ruby code:</h2>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'json'\nrequire 'digest'\n\ntext = \"\u00c0\u00c8G\"\nobj = {'data': text}\n# js = obj.to_json # not using this, in order to get the space below\njs = %Q[{\"data\": \"#{text}\"}]\n\nputs 'Ruby:'\nputs js\nputs Digest::SHA256.hexdigest js\n</code></pre>\n\n<h2>When I run both, this is the output:</h2>\n\n<pre><code>$ ./test.rb &amp;&amp; ./test.py\nRuby:\n{\"data\": \"\u00c0\u00c8G\"}\n6cbe518180308038557d28ecbd53af66681afc59aacfbd23198397d22669170e\nPython:\n{\"data\": \"\\u00c0\\u00c8G\"}\na6366cbd6750dc25ceba65dce8fe01f283b52ad189f2b54ba1bfb39c7a0b96d3\n</code></pre>\n\n<p>What do I need to change in the ruby code to make its output identical to the python output (at least the final hash)?</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>I have tried things from <a href=\"https://stackoverflow.com/questions/5560914/how-do-i-escape-a-unicode-string-with-ruby\">this SO question</a> (and others) without success.</li>\n<li>The code above produces identical results when using only english characters, so I know the hashing is the same.</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "loops", "ruby-on-rails-4", "iteration"], "comments": [{"owner": {"reputation": 2292, "user_id": 5448888, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/898095120243525/picture?type=large", "display_name": "Chakreshwar Sharma", "link": "https://stackoverflow.com/users/5448888/chakreshwar-sharma"}, "edited": false, "score": 0, "creation_date": 1472624937, "post_id": 39242107, "comment_id": 65820890, "body": ":Pass one more parameter &amp; use that parameter for the condition. By using this way you will have to use only 1 function instead of 11"}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 1, "creation_date": 1472639457, "post_id": 39242107, "comment_id": 65830125, "body": "Check <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>, too :)"}], "answers": [{"comments": [{"owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "edited": false, "score": 0, "creation_date": 1472627543, "post_id": 39242356, "comment_id": 65822384, "body": "Good one. I don&#39;t understand why this response has been downvoted. The best solution to resolve this repetition problem is to use metaprogramming, and is what this solution is doing. Don&#39;t downvote before understanding the proposed solution, please! It takes time to understand the problem and to propose a good solution"}], "tags": [], "owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "is_accepted": true, "score": 1, "last_activity_date": 1472625407, "creation_date": 1472625407, "answer_id": 39242356, "question_id": 39242107, "link": "https://stackoverflow.com/questions/39242107/many-very-similar-functions-spaghetti-code-fix/39242356#39242356", "title": "Many very similar functions, spaghetti code fix?", "body": "<p>you can make array of strings</p>\n\n<pre><code>arr = ['acceptance','start', ...]\n</code></pre>\n\n<p>in next step:</p>\n\n<pre><code>arr.each do |method|\n\n  define_method ( 'pending_#{method}'.to_sym ) do |order_fulfillments|\n    order_fulfillments.each do |order_fulfillment|\n      next unless order_fulfillment.fulfillment_time_calculator.\n      send('pending_#{method}?'); collect_fulfillments(\n            order_fulfillment.status,\n            order_fulfillment\n          )\n    end\n  end\nend\n</code></pre>\n\n<p>for more information about  <a href=\"http://apidock.com/ruby/Module/define_method\" rel=\"nofollow\">define_method</a></p>\n"}, {"comments": [{"owner": {"reputation": 151, "user_id": 6721436, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/92f391d6f5d1a7c0c2757ea600cb92d1?s=128&d=identicon&r=PG&f=1", "display_name": "Giovani", "link": "https://stackoverflow.com/users/6721436/giovani"}, "edited": false, "score": 0, "creation_date": 1472625801, "post_id": 39242408, "comment_id": 65821325, "body": "what is <code>+ &quot;?&quot;</code>? Can pass another condition in there? also, what is the <code>&amp;block</code> for?"}, {"owner": {"reputation": 5417, "user_id": 724561, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/101c16321b71a279daca4e5c33256e21?s=128&d=identicon&r=PG", "display_name": "klaffenboeck", "link": "https://stackoverflow.com/users/724561/klaffenboeck"}, "reply_to_user": {"reputation": 151, "user_id": 6721436, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/92f391d6f5d1a7c0c2757ea600cb92d1?s=128&d=identicon&r=PG&f=1", "display_name": "Giovani", "link": "https://stackoverflow.com/users/6721436/giovani"}, "edited": false, "score": 0, "creation_date": 1472625866, "post_id": 39242408, "comment_id": 65821365, "body": "this is the name of your current method plus a <code>?</code> added at the end, just like in your code snippets. <code>&amp;block</code> in this case is not needed, but a general convention to write <code>method_missing</code>, since it will catch all method-calls that are not defined in your class, even those you pass a block to."}], "tags": [], "owner": {"reputation": 5417, "user_id": 724561, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/101c16321b71a279daca4e5c33256e21?s=128&d=identicon&r=PG", "display_name": "klaffenboeck", "link": "https://stackoverflow.com/users/724561/klaffenboeck"}, "is_accepted": false, "score": 0, "last_activity_date": 1472630647, "last_edit_date": 1472630647, "creation_date": 1472625578, "answer_id": 39242408, "question_id": 39242107, "link": "https://stackoverflow.com/questions/39242107/many-very-similar-functions-spaghetti-code-fix/39242408#39242408", "title": "Many very similar functions, spaghetti code fix?", "body": "<p>You could use something like <code>method_missing</code>.</p>\n\n<p>At the bottom of your class, put something like this:</p>\n\n<pre><code>def order_fulfillment_check(method, order_fulfillment)\n  case method\n    when \"picked_up\" then return order_fulfillment.handed_over_late? &amp;&amp; order_fulfillment.fulfillment_time_calculator.pending_handover?\n    ...\n    ... [more case statements] ...\n    ...\n    else return order_fulfillment.fulfillment_time_calculator.send(method + \"?\")\n  end\nend\n\ndef method_missing(method_name, args*, &amp;block)\n  args[0].each do |order_fulfillment|\n    next unless order_fulfillment_check(method_name, order_fulfillment); \n    collect_fulfillments(\n        order_fulfillment.status,\n        order_fulfillment\n      )\n  end\nend\n</code></pre>\n\n<p>Depending on your requirements, you could check if the method_name starts with \"pending_\".</p>\n\n<p>Please note, this code is untested, but it should be somewhere along the line.</p>\n\n<p>Also, as a sidenote, <code>order_fulfillment.fulfillment_time_calculator.some_random_method</code> is actually a violation of the <a href=\"http://en.wikipedia.org/wiki/Law_of_Demeter\" rel=\"nofollow\">law of demeter</a>. You might want to adress this.</p>\n"}, {"comments": [{"owner": {"reputation": 151, "user_id": 6721436, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/92f391d6f5d1a7c0c2757ea600cb92d1?s=128&d=identicon&r=PG&f=1", "display_name": "Giovani", "link": "https://stackoverflow.com/users/6721436/giovani"}, "edited": false, "score": 0, "creation_date": 1472627542, "post_id": 39242435, "comment_id": 65822382, "body": "looks good! @spickermann I added a small question in &quot;edit2&quot; yet. would you take a look please? :)"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 151, "user_id": 6721436, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/92f391d6f5d1a7c0c2757ea600cb92d1?s=128&d=identicon&r=PG&f=1", "display_name": "Giovani", "link": "https://stackoverflow.com/users/6721436/giovani"}, "edited": false, "score": 0, "creation_date": 1472631287, "post_id": 39242435, "comment_id": 65824508, "body": "You can slice symbols by translation it to a string first: <code>:deliverer_started.to_s.slice(&#39;_&#39;).first #=&gt; &#39;deliverer&#39;</code>. I am not sure how that fits to my answer."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 4, "last_activity_date": 1472626501, "last_edit_date": 1472626501, "creation_date": 1472625657, "answer_id": 39242435, "question_id": 39242107, "link": "https://stackoverflow.com/questions/39242107/many-very-similar-functions-spaghetti-code-fix/39242435#39242435", "title": "Many very similar functions, spaghetti code fix?", "body": "<p>You can pass another parameter when you use that parameter to decide what condition to check. Just store all possible conditions as lambdas in a hash:</p>\n\n<pre><code>FULFILLMENT_ACTIONS = {\n  pending_acceptance: lambda { |fulfillment| fulfillment.fulfillment_time_calculator.pending_acceptance? }, \n  pending_start:      lambda { |fulfillment| fulfillment.fulfillment_time_calculator.pending_acceptance? },\n  picked_up:          lambda { |fulfillment| fulfillment.handed_over_late? &amp;&amp; fulfillment.fulfillment_time_calculator.pending_handover? }\n}\n\ndef process_fulfillments(type, order_fulfillments)\n  condition = FULFILLMENT_ACTIONS.fetch(type)\n\n  order_fulfillments.each do |order_fulfillment|\n    next unless condition.call(order_fulfillment)\n    collect_fulfillments(order_fulfillment.status, order_fulfillment)\n  end\nend\n</code></pre>\n\n<p>To be called like:</p>\n\n<pre><code>process_fulfillments(:pending_acceptance, order_fulfillments)\nprocess_fulfillments(:pending_start, order_fulfillments)\nprocess_fulfillments(:picked_up, order_fulfillments)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "is_accepted": false, "score": 1, "last_activity_date": 1472650058, "last_edit_date": 1472650058, "creation_date": 1472631383, "answer_id": 39244207, "question_id": 39242107, "link": "https://stackoverflow.com/questions/39242107/many-very-similar-functions-spaghetti-code-fix/39244207#39244207", "title": "Many very similar functions, spaghetti code fix?", "body": "<p>While <code>next</code> is handy it comes late(r) in the code and is thus a bit more difficult to grasp. I would first select on the list, then do the action. (Note that this is only possible if your 'check' does not have side effects like in <code>order_fullfillment.send_email_and_return_false_if_fails</code>).</p>\n\n<p>So if tests can be complex I would start the refactoring by expressing the selection criteria and then pulling out the processing of these items (wich also matches more the method names you have given), somewhere in the middle it might look like this:</p>\n\n<pre><code>def pending_acceptance(order_fulfillments)\n  order_fulfillments.select do |o|\n    o.fulfillment_time_calculator.pending_acceptance?\n  end\nend\n\ndef picked_up(order_fulfillments)\n  order_fulfillments.select do |order_fulfillment|\n    order_fulfillment.handed_over_late? &amp;&amp; order_fulfillment.\n          fulfillment_time_calculator.pending_handover?\n  end\nend\n\ndef calling_code\n  # order_fulfillments = OrderFulFillments.get_from_somewhere\n  # Now, filter\n  collect_fulfillments(pending_start      order_fulfillments)\n  collect_fulfillments(picked_up          order_fulfillments)\nend\n\ndef collect_fullfillments order_fulfillments\n  order_fulfillments.each {|of| collect_fullfillment(of) }\nend\n</code></pre>\n\n<p>You'll still have 11 (+1) methods, but imho you express more what you are up to - and your colleagues will grok what happens fast, too. Given your example and question I think you should aim for a simple, expressive solution. If you are more \"hardcore\", use the more functional lambda approach given in the other solutions. Also, note that these approaches could be combined (by passing an iterator).</p>\n"}], "owner": {"reputation": 151, "user_id": 6721436, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/92f391d6f5d1a7c0c2757ea600cb92d1?s=128&d=identicon&r=PG&f=1", "display_name": "Giovani", "link": "https://stackoverflow.com/users/6721436/giovani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 39242356, "answer_count": 4, "score": 2, "last_activity_date": 1472650058, "creation_date": 1472624468, "last_edit_date": 1472627460, "question_id": 39242107, "link": "https://stackoverflow.com/questions/39242107/many-very-similar-functions-spaghetti-code-fix", "title": "Many very similar functions, spaghetti code fix?", "body": "<p>I have approx 11 functions that look like this:</p>\n\n<pre><code>def pending_acceptance(order_fulfillments)\n  order_fulfillments.each do |order_fulfillment|\n    next unless order_fulfillment.fulfillment_time_calculator.\n        pending_acceptance?; collect_fulfillments(\n          order_fulfillment.status,\n          order_fulfillment\n        )\n  end\nend\n\ndef pending_start(order_fulfillments)\n  order_fulfillments.each do |order_fulfillment|\n    next unless order_fulfillment.fulfillment_time_calculator.\n        pending_start?; collect_fulfillments(\n          order_fulfillment.status,\n          order_fulfillment\n        )\n  end\nend\n</code></pre>\n\n<p>The iteration is always the same, but <code>next unless</code> conditions are different. In case you wonder: it's <code>next unless</code> and <code>;</code> in it because RuboCop was complaining about it. Is there a solution to implement it better? I hate this spaghetti code. Something like passing the condition into \"iterate_it\" function or so...</p>\n\n<p>edit: Cannot just pass another parameter because the conditions are double sometimes:</p>\n\n<pre><code>def picked_up(order_fulfillments)\n      order_fulfillments.each do |order_fulfillment|\n        next unless\n          order_fulfillment.handed_over_late? &amp;&amp; order_fulfillment.\n              fulfillment_time_calculator.pending_handover?\n                collect_fulfillments(\n                  order_fulfillment.status,\n                  order_fulfillment\n                )\n      end\n    end\n</code></pre>\n\n<p>edit2: One question yet: how could I slice a symbol, to get a user role from a status? Something like: \n<code>:deliverer_started =&gt; :deliverer or 'deliverer'</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "facebook-graph-api", "koala"], "comments": [{"owner": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1472626555, "post_id": 39242033, "comment_id": 65821782, "body": "How to extend tokens is described in detail in the docs. // But in general, you should have a logged-in user when you are performing searches. You should not use this endpoint to built anything that just constantly \u201csucks\u201d data, without an actual user requesting it. Search results are tailored to users anyway."}, {"owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "reply_to_user": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1477301371, "post_id": 39242033, "comment_id": 67693873, "body": "@CBroe so you mean we should access with a user account from the server to perform the request? I know how to log in via javascript, but how would you do that on rails?"}, {"owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "edited": false, "score": 0, "creation_date": 1477302267, "post_id": 39242033, "comment_id": 67694406, "body": "I solved using <code>Koala::Facebook::OAuth.new( myAppID, mySecretToken ).get_app_access_token</code>"}], "owner": {"reputation": 848, "user_id": 5693666, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh6.googleusercontent.com/-tgv0wKzJq78/AAAAAAAAAAI/AAAAAAAAAAA/tOO0Hgof7r0/photo.jpg?sz=128", "display_name": "Syed Asad Abbas Zaidi", "link": "https://stackoverflow.com/users/5693666/syed-asad-abbas-zaidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1472624151, "creation_date": 1472624151, "question_id": 39242033, "link": "https://stackoverflow.com/questions/39242033/koala-ruby-facebook-refresh-access-token", "title": "Koala Ruby Facebook: Refresh access token", "body": "<p>I am using facebook koala gem in RoR. I just want to use it to search events and places. So I do not need any authentication for any user. I simply want to just use an access token to fire the search API. But the access token I'm using is from the Graph API explorer, so it expires after a certain period of time. I want to use an access token for life long and if not then wanted a way to refresh the expired access token in Koala Gem.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 325, "user_id": 4643690, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9_dmW_kS7R0/AAAAAAAAAAI/AAAAAAAAAAw/AeA0aY62T0w/photo.jpg?sz=128", "display_name": "bk chovatiya", "link": "https://stackoverflow.com/users/4643690/bk-chovatiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1472623174, "creation_date": 1472623174, "answer_id": 39241796, "question_id": 39241518, "link": "https://stackoverflow.com/questions/39241518/retrieve-particular-fields-from-mongomapper-using-rails/39241796#39241796", "title": "Retrieve particular fields from mongomapper using rails", "body": "<p>Try This:</p>\n\n<pre><code>Image.fields(:file_size).all.to_json(:only =&gt; :file_size)\n</code></pre>\n"}], "owner": {"reputation": 270, "user_id": 4666827, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e8bc26ae2ce01301ba02947fdc771e9e?s=128&d=identicon&r=PG&f=1", "display_name": "Pritika", "link": "https://stackoverflow.com/users/4666827/pritika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 12, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472623174, "creation_date": 1472621884, "question_id": 39241518, "link": "https://stackoverflow.com/questions/39241518/retrieve-particular-fields-from-mongomapper-using-rails", "title": "Retrieve particular fields from mongomapper using rails", "body": "<p>As per documentation \"<a href=\"http://mongomapper.com/documentation/plugins/querying.html#fields\" rel=\"nofollow\">http://mongomapper.com/documentation/plugins/querying.html#fields</a>\" I am using the following code to retrieve \"file_size\" from Image table:</p>\n\n<pre><code>Image.where(:user_id =&gt; \"#{self.id}\").fields(:file_size).all\n</code></pre>\n\n<p>But its fetching all the fields from Image table.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 703, "user_id": 981021, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c10b08c870d65791f78c952910d0134f?s=128&d=identicon&r=PG", "display_name": "Jonathan Chow", "link": "https://stackoverflow.com/users/981021/jonathan-chow"}, "edited": false, "score": 0, "creation_date": 1472620880, "post_id": 39241035, "comment_id": 65819190, "body": "that&#39;s a really quick and detailed answer, thanks! Upvoted."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 3, "last_activity_date": 1472620435, "last_edit_date": 1472620435, "creation_date": 1472619398, "answer_id": 39241035, "question_id": 39240978, "link": "https://stackoverflow.com/questions/39240978/ruby-pipe-operator-on-nil-and-array/39241035#39241035", "title": "Ruby pipe operator on nil and array", "body": "<p><code>nil</code> is the receiver in your example, and <a href=\"http://ruby-doc.org/core-2.3.1/NilClass.html#method-i-7C\" rel=\"nofollow\"><code>NilClass#|</code></a> coerces the right-hand side of the expression (the argument) to a boolean value. The expression is the equivalent of <code>nil | !!([\"foo\", \"bar\"])</code>, and because <code>nil</code> is always falsey and arrays are never falsey, it reduces to <code>false | true</code>, which will always return true. The same is true for other non-falsey values on the right-hand side:</p>\n\n<pre><code>irb(main):001:0&gt; nil|0\n=&gt; true\nirb(main):002:0&gt; nil|1\n=&gt; true\nirb(main):003:0&gt; nil|\"foo\"\n=&gt; true\nirb(main):004:0&gt; nil|true\n=&gt; true\nirb(main):005:0&gt; nil|false\n=&gt; false\nirb(main):006:0&gt; nil|nil\n=&gt; false\n</code></pre>\n\n<p>You can keep doing what you're doing, but if the receiver might be <code>nil</code> (or really anything other than an array), you should coerce it into an array to get the <a href=\"http://ruby-doc.org/core-2.3.1/Array.html#method-i-7C\" rel=\"nofollow\"><code>Array#|</code></a> behavior you desire. Fortunately, there's a really neat and easy way to do that in Ruby:</p>\n\n<pre><code>[*nil] | [\"foo\", \"bar\"]\n</code></pre>\n\n<p>This \"does the right thing\" in a variety of cases:</p>\n\n<pre><code>irb(main):001:0&gt; [*nil] | [\"foo\", \"bar\"]\n=&gt; [\"foo\", \"bar\"]\nirb(main):002:0&gt; var = \"foo\"\n=&gt; \"foo\"\nirb(main):003:0&gt; [*var] | [\"foo\", \"bar\"]\n=&gt; [\"foo\", \"bar\"]\nirb(main):004:0&gt; var = [\"bar\"]\n=&gt; [\"bar\"]\nirb(main):005:0&gt; [*var] | [\"foo\", \"bar\"]\n=&gt; [\"bar\", \"foo\"]\nirb(main):006:0&gt; var = []\n=&gt; []\nirb(main):007:0&gt; [*var] | [\"foo\", \"bar\"]\n=&gt; [\"foo\", \"bar\"]\nirb(main):008:0&gt; var = nil\n=&gt; nil\nirb(main):009:0&gt; [*var] | [\"foo\", \"bar\"]\n=&gt; [\"foo\", \"bar\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 702, "user_id": 2813483, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a806405fb6823e63f56544a44d1323b1?s=128&d=identicon&r=PG&f=1", "display_name": "tessie", "link": "https://stackoverflow.com/users/2813483/tessie"}, "is_accepted": false, "score": 1, "last_activity_date": 1472621388, "creation_date": 1472621388, "answer_id": 39241432, "question_id": 39240978, "link": "https://stackoverflow.com/questions/39240978/ruby-pipe-operator-on-nil-and-array/39241432#39241432", "title": "Ruby pipe operator on nil and array", "body": "<p>| is actually bitwise or in ruby.It means integers are treated as sequence of bytes instead of whole numbers.It takes the logical inclusion OR operation of corresponding bits</p>\n\n<pre><code>1|0  =&gt; 1\n1|1 =&gt; 1\n1|2 =&gt; 3 \n</code></pre>\n\n<p>incase of boolean operator it is similar to ||</p>\n\n<pre><code>true|false =&gt; true\nfalse|false =&gt; false\nnil|false =&gt; false\n</code></pre>\n\n<p>false|obj => true or false\nnil|obj => true or false\n. it turns out nilclass is overridden</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.0.0/NilClass.html#method-i-7C\" rel=\"nofollow\">http://ruby-doc.org/core-2.0.0/NilClass.html#method-i-7C</a></p>\n\n<p>in case of array it is neither bitwise or or logical or but array union .please find the documentation.\n<a href=\"http://docs.ruby-lang.org/en/2.0.0/Array.html\" rel=\"nofollow\">http://docs.ruby-lang.org/en/2.0.0/Array.html</a></p>\n"}], "owner": {"reputation": 703, "user_id": 981021, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c10b08c870d65791f78c952910d0134f?s=128&d=identicon&r=PG", "display_name": "Jonathan Chow", "link": "https://stackoverflow.com/users/981021/jonathan-chow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 1, "accepted_answer_id": 39241035, "answer_count": 2, "score": 1, "last_activity_date": 1472621388, "creation_date": 1472619075, "question_id": 39240978, "link": "https://stackoverflow.com/questions/39240978/ruby-pipe-operator-on-nil-and-array", "title": "Ruby pipe operator on nil and array", "body": "<p>So I have been using | to merge two arrays and get unique values. </p>\n\n<p>but I found out that <code>nil | [\"foo\", \"bar\"]</code> returns <code>true</code> instead of <code>[\"foo\", \"bar\"]</code>.</p>\n\n<p>Can someone explain this behaviour? Ruby version is 2.2.1 if that matters.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting", "group-by"], "answers": [{"comments": [{"owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1472618760, "post_id": 39240772, "comment_id": 65818476, "body": "You will need to style it. I can add some minimal style to my example"}, {"owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1472618833, "post_id": 39240772, "comment_id": 65818497, "body": "I added some line breaks."}, {"owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1472619572, "post_id": 39240772, "comment_id": 65818703, "body": "I added a new answer."}], "tags": [], "owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "is_accepted": true, "score": 1, "last_activity_date": 1472619555, "last_edit_date": 1472619555, "creation_date": 1472617859, "answer_id": 39240772, "question_id": 39240715, "link": "https://stackoverflow.com/questions/39240715/how-to-sort-group-by-month-and-year-in-view/39240772#39240772", "title": "How to sort group_by month and year in view?", "body": "<p>I would start by sorting the keys and then look up the challenges while iterating through those keys.</p>\n\n<pre><code>&lt;% @past_challenges_by_years.keys.sort.each do |(year, month)| %&gt;\n  &lt;%= year %&gt;\n  &lt;br /&gt;\n  &lt;%= month %&gt;\n  &lt;br /&gt;\n  &lt;% @past_challenges_by_years[[year, month]].each do |challenge| %&gt;\n    &lt;%= challenge %&gt;\n    &lt;br /&gt;\n</code></pre>\n\n<p>Edit: Here is a new solution that only displays years and months once.</p>\n\n<pre><code>@past_challenges_by_years.keys.map { |a| a[0] }.uniq.sort.each do |year|\n  puts year\n  @past_challenges_by_years.keys.select { |a| a[0] == year }.map { |a| a[1] }.uniq.sort.each do |month|\n    puts month\n    @past_challenges_by_years[[year, month]].each do |challenge|\n      puts challenge\n    end\n  end\nend\n</code></pre>\n\n<p>I think it should be simple enough to convert to ERB.</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 39240772, "answer_count": 1, "score": 0, "last_activity_date": 1472620009, "creation_date": 1472617512, "last_edit_date": 1472620009, "question_id": 39240715, "link": "https://stackoverflow.com/questions/39240715/how-to-sort-group-by-month-and-year-in-view", "title": "How to sort group_by month and year in view?", "body": "<p><strong>pages_controller.rb</strong></p>\n\n<pre><code>@past_challenges_by_years = @past_challenges.group_by { |t| [t.deadline.year, t.deadline.month] }\n</code></pre>\n\n<p>How can I break it down in the view with year and then subdivide it with month like this:</p>\n\n<pre><code>2014 # Years\n 01 # Months\n   Challenge\n   Challenge\n 02\n   Challenge\n 08\n   Challenge\n2016\n 03\n   Challenge\n 08\n   Challenge\n</code></pre>\n\n<p><strong>view.html.erb</strong></p>\n\n<pre><code>&lt;% @past_challenges_by_years.sort.each do |year, challenges| %&gt;\n  &lt;%= year %&gt;\n  &lt;%= month %&gt; # I don't know how to define this.\n  &lt;% for challenge in challenges %&gt;\n    etc...\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1472615048, "post_id": 39240337, "comment_id": 65817573, "body": "<code>array.map(&amp;:object_id)</code> can be illuminating."}], "answers": [{"comments": [{"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 0, "creation_date": 1472615477, "post_id": 39240354, "comment_id": 65817670, "body": "Or even <code>Array.new(3) { |i| [i + 2] * 10 }</code> which is shorter to type and some people may find more intuitive."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 5, "last_activity_date": 1472614789, "creation_date": 1472614789, "answer_id": 39240354, "question_id": 39240337, "link": "https://stackoverflow.com/questions/39240337/why-does-this-code-populate-every-array/39240354#39240354", "title": "Why does this code populate every array?", "body": "<p><code>Array.new(3, [])</code> is not equivalent to <code>[[],[],[]]</code>. It is equivalent to <code>array = []; [array, array, array]</code>, an array of three references to the same array. After <code>array[0] &lt;&lt; 2</code>, you have <code>[[2], [2], [2]]</code>, because all three elements point at the same array.</p>\n\n<p>What you want is <code>Array.new(3) { [] }</code>, with a block specifying the default; this way, a new <code>[]</code> is created for each element.</p>\n\n<p>Even better, your whole code can be written as:</p>\n\n<pre><code>Array.new(3) { |i| Array.new(10, i + 2) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "is_accepted": false, "score": 1, "last_activity_date": 1472614943, "creation_date": 1472614943, "answer_id": 39240372, "question_id": 39240337, "link": "https://stackoverflow.com/questions/39240337/why-does-this-code-populate-every-array/39240372#39240372", "title": "Why does this code populate every array?", "body": "<p>The initializer you use is meant to be used with immutable objects, like creating an array of n times the same integer. For mutable objects use the block version. Here's the solution to your problem:</p>\n\n<pre><code>array = Array.new(3) { [] }\n\n10.times do\n  array[0] &lt;&lt; 2\n  array[1] &lt;&lt; 3\n  array[2] &lt;&lt; 4\nend\n\narray[0]\n#=&gt; [2, 2, 2, 2, 2, 2, 2, 2, 2, 2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 197, "user_id": 6759340, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210589863527104/picture?type=large", "display_name": "Waqar Ul Aziz", "link": "https://stackoverflow.com/users/6759340/waqar-ul-aziz"}, "is_accepted": false, "score": 1, "last_activity_date": 1472615262, "creation_date": 1472615262, "answer_id": 39240400, "question_id": 39240337, "link": "https://stackoverflow.com/questions/39240337/why-does-this-code-populate-every-array/39240400#39240400", "title": "Why does this code populate every array?", "body": "<p>Read the documentation</p>\n\n<blockquote>\n  <p>The second argument populates the array with references to the same\n  object. Therefore, it is only recommended in cases when you need to\n  instantiate arrays with natively immutable objects such as Symbols,\n  numbers, true or false.</p>\n  \n  <p>To create an array with separate objects a block can be passed\n  instead. This method is safe to use with mutable objects such as\n  hashes, strings or other arrays:</p>\n</blockquote>\n\n<pre><code>Array.new(4) { Hash.new } #=&gt; [{}, {}, {}, {}]\n</code></pre>\n\n<blockquote>\n  <p>This is also a quick way to build up multi-dimensional arrays:</p>\n</blockquote>\n\n<pre><code>empty_table = Array.new(3) { Array.new(3) }\n</code></pre>\n\n<p>Therefore, your code first line should be</p>\n\n<pre><code>array = Array.new(3) { Array.new(3) }\n</code></pre>\n"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 39240354, "answer_count": 3, "score": 1, "last_activity_date": 1472615262, "creation_date": 1472614662, "question_id": 39240337, "link": "https://stackoverflow.com/questions/39240337/why-does-this-code-populate-every-array", "title": "Why does this code populate every array?", "body": "<p>I have this piece of code that creates an array of arrays (<code>[[],[],[]]</code>) and an iterator that attempts to populate the respective arrays with numbers (shown below)</p>\n\n<pre><code>array = Array.new(3,[])\n10.times do\n  array[0] &lt;&lt; 2\n  array[1] &lt;&lt; 3\n  array[2] &lt;&lt; 4\nend\n</code></pre>\n\n<p>When I execute this code, I expected to see this</p>\n\n<pre><code>[[2,2,2,2,etc....],[3,3,3,3,etc...],[4,4,4,4,4...etc]]\n</code></pre>\n\n<p>but instead I get this:</p>\n\n<pre><code>[[2,3,4,2,3,4,2,3,4....repeat],[2,3,4,2,3,4,2,3,4....repeat],[2,3,4,2,3,4,2,3,4....repeat]]\n</code></pre>\n\n<p>I've tried to walk through it with <code>byebug</code> and it makes no sense to me. What is going on here?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "json", "ruby", "highcharts"], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472615221, "post_id": 39240387, "comment_id": 65817608, "body": "don&#39;t you need to use <code>raw</code> too? I always use the two in conjunction."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472615282, "post_id": 39240387, "comment_id": 65817622, "body": "<code>.raw</code> is equivalent to <code>.to_s.html_safe</code> but as this is already a string by virtue of <code>to_json</code> it&#39;s not necessary. If you like the <code>.raw</code> notation, you can use that instead, but <code>.html_safe.raw</code> is overkill."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472615388, "post_id": 39240387, "comment_id": 65817644, "body": "the syntax i use is <code>raw &quot;string&quot;.html_safe</code> but thanks for the info."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472615453, "post_id": 39240387, "comment_id": 65817666, "body": "I&#39;d stick with just <code>.html_safe</code> as you&#39;re doubling up on work otherwise."}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "edited": false, "score": 0, "creation_date": 1472617060, "post_id": 39240387, "comment_id": 65818042, "body": "@tadman, thanks for the speedy reply. Once I execute the <code>.to_json.html_safe</code> and the array becomes a string. Would I need to then reconstruct it into an array in my <code>js.erb</code> file?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472617304, "post_id": 39240387, "comment_id": 65818101, "body": "If you&#39;re writing a JSON file the last thing you want to be doing is <i>parsing</i> JSON data."}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "edited": false, "score": 0, "creation_date": 1472618100, "post_id": 39240387, "comment_id": 65818292, "body": "Maybe I prematurely closed this question then.... Could you point me to an online resource that I could read up on this perhaps? What I want is to return my array object with strings in it so I can place the data in my highchart xAxis plot. It won&#39;t work with a string such as <code>&quot;[&quot;2.3&quot;]&quot;</code>. I need <code>[&quot;2.3&quot;]</code>. I definitely need to read up more on this."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472663192, "post_id": 39240387, "comment_id": 65846285, "body": "You might want to use <a href=\"https://github.com/rails/jbuilder\" rel=\"nofollow noreferrer\">Jbuilder</a> to create a pure JSON view instead of dealing with all of this escaping stuff. Another option is <code>render(json: @foo_bar.to_json)</code> in your controller."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1472615161, "creation_date": 1472615161, "answer_id": 39240387, "question_id": 39240224, "link": "https://stackoverflow.com/questions/39240224/how-can-i-unescape-and-remove-quot-from-data-served-by-rails-into-javascript/39240387#39240387", "title": "How can I unescape and remove quot; from data served by rails into javascript", "body": "<p>You're inlining data that's being treated as HTML \"unsafe\", so you have to declare it as safe in your template.</p>\n\n<pre><code>&lt;%= @foo_bar.to_json.html_safe %&gt;\n</code></pre>\n\n<p>Note that when you declare something as \"safe\" that means you're confident you're not exposing yourself to XSS attacks because you're using some other escape method. In your case make sure you're emitting properly escaped JavaScript or JSON.</p>\n"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 923, "favorite_count": 0, "accepted_answer_id": 39240387, "answer_count": 1, "score": 1, "last_activity_date": 1472615161, "creation_date": 1472613746, "question_id": 39240224, "link": "https://stackoverflow.com/questions/39240224/how-can-i-unescape-and-remove-quot-from-data-served-by-rails-into-javascript", "title": "How can I unescape and remove quot; from data served by rails into javascript", "body": "<p>This question has been asked a few times on stackoverflow but I've yet to find a way how to unescape double quotes from a rails instance variable that I am trying to serve up in order for my highcharts to make use in my respective <code>js.erb</code> file.</p>\n\n<p>Here is the code that I have:</p>\n\n<pre><code>class FooController &lt; ApplicationController\n  def foo\n    @foo_bar = @foo.map { |f| f.version }\n  end\nend\n</code></pre>\n\n<p>The <code>@foo_bar</code> instance variable should return <code>[\"1.2.3\",\"3.0\",\"4.5\"]</code>. Instead I keep getting this <code>[&amp;quot;1.2.3&amp;quot;, &amp;quot;3.0quot;,quot;4.5quot]</code>; and I can't seem to remove this. I've tried using Rail's <code>escape_javascript</code> method but it still doesn't work. I've tried <code>JSON.parse(instance_variable)</code> and that didn't work either. Lastly, I tried to <code>.gsub</code> the quotes and manually replace them with <code>\\\"</code> and that didn't work either. Why won't the double quotes escape and how can I get this at the root of the problem? I've tried to solve this both server and client side but to no avail. Does anyone have anymore suggestions?</p>\n"}, {"tags": ["ruby", "recursion", "hash"], "comments": [{"owner": {"reputation": 1650, "user_id": 814564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FjIP.jpg?s=128&g=1", "display_name": "Jake H", "link": "https://stackoverflow.com/users/814564/jake-h"}, "edited": false, "score": 3, "creation_date": 1472614131, "post_id": 39240219, "comment_id": 65817372, "body": "Quick, dirty, and totally inefficient: <code>JSON.parse(h.to_json)</code>"}, {"owner": {"reputation": 1073, "user_id": 5715870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e7d59420f276b45ef3a56a2617dd5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "dhrubo_moy", "link": "https://stackoverflow.com/users/5715870/dhrubo-moy"}, "reply_to_user": {"reputation": 1650, "user_id": 814564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FjIP.jpg?s=128&g=1", "display_name": "Jake H", "link": "https://stackoverflow.com/users/814564/jake-h"}, "edited": false, "score": 0, "creation_date": 1472614384, "post_id": 39240219, "comment_id": 65817424, "body": "Awesome!!! Worked! Thanks a lot. :)"}], "answers": [{"tags": [], "owner": {"reputation": 1650, "user_id": 814564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FjIP.jpg?s=128&g=1", "display_name": "Jake H", "link": "https://stackoverflow.com/users/814564/jake-h"}, "is_accepted": false, "score": 3, "last_activity_date": 1472614375, "creation_date": 1472614375, "answer_id": 39240297, "question_id": 39240219, "link": "https://stackoverflow.com/questions/39240219/how-to-recursively-convert-keys-of-ruby-hashes-that-are-symbols-to-string/39240297#39240297", "title": "How to recursively convert keys of Ruby Hashes that are symbols to String", "body": "<p>Didn't test this, but looks about right:</p>\n\n<pre><code>def stringify_all_keys(hash)\n  stringified_hash = {}\n  hash.each do |k, v|\n    stringified_hash[k.to_s] = v.is_a?(Hash) ? stringify_all_keys(v) : v\n  end\n  stringified_hash\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1650, "user_id": 814564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FjIP.jpg?s=128&g=1", "display_name": "Jake H", "link": "https://stackoverflow.com/users/814564/jake-h"}, "edited": false, "score": 0, "creation_date": 1472614939, "post_id": 39240349, "comment_id": 65817547, "body": "This is preferred to my answer, if you are on a stack w/activesupport. The only thing to be aware of is that any symbols inside of arrays anywhere in the hash will also be converted to strings."}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "reply_to_user": {"reputation": 1650, "user_id": 814564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FjIP.jpg?s=128&g=1", "display_name": "Jake H", "link": "https://stackoverflow.com/users/814564/jake-h"}, "edited": false, "score": 0, "creation_date": 1472615141, "post_id": 39240349, "comment_id": 65817595, "body": "Uhm, no, they won&#39;t: <code>{ &#39;foo&#39; =&gt; [&#39;a&#39;, &#39;b&#39;] }.deep_symbolize_keys #=&gt; {:foo=&gt;[&quot;a&quot;, &quot;b&quot;]}</code>. <code>deep_symbolize_keys</code> uses <code>deep_transform_keys</code> internally, which as the name implies only works on the keys, not the values of the hash."}, {"owner": {"reputation": 1650, "user_id": 814564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FjIP.jpg?s=128&g=1", "display_name": "Jake H", "link": "https://stackoverflow.com/users/814564/jake-h"}, "edited": false, "score": 0, "creation_date": 1472615423, "post_id": 39240349, "comment_id": 65817655, "body": "I stand corrected. That being said, keys which are arrays of symbols will be converted to arrays to strings, which is not what I said but is a difference from the specifics of the implementation in the question. edit: actually, i take that back, array keys are just straight up to_s&#39;d: <code>{ [:a,:z] =&gt; [:b,:c] }.deep_stringify_keys # {&quot;[:a, :z]&quot;=&gt;[:b, :c]}</code>"}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "reply_to_user": {"reputation": 1650, "user_id": 814564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FjIP.jpg?s=128&g=1", "display_name": "Jake H", "link": "https://stackoverflow.com/users/814564/jake-h"}, "edited": false, "score": 1, "creation_date": 1472615656, "post_id": 39240349, "comment_id": 65817697, "body": "<code>deep_stringify_keys == deep_transform_keys(&amp;:to_s)</code>, so no surprises there."}, {"owner": {"reputation": 1650, "user_id": 814564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FjIP.jpg?s=128&g=1", "display_name": "Jake H", "link": "https://stackoverflow.com/users/814564/jake-h"}, "edited": false, "score": 0, "creation_date": 1472615955, "post_id": 39240349, "comment_id": 65817774, "body": "Embarrassingly I was surprised, the transform is only deep on the value side. IMO a deep operation implies propagating everywhere <i>shrug</i>, apologies for my ignorance."}], "tags": [], "owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "is_accepted": true, "score": 10, "last_activity_date": 1472614736, "creation_date": 1472614736, "answer_id": 39240349, "question_id": 39240219, "link": "https://stackoverflow.com/questions/39240219/how-to-recursively-convert-keys-of-ruby-hashes-that-are-symbols-to-string/39240349#39240349", "title": "How to recursively convert keys of Ruby Hashes that are symbols to String", "body": "<p>If you are using <code>ActiveSupport</code> already or are open to using it, then <a href=\"http://api.rubyonrails.org/classes/Hash.html#method-i-deep_stringify_keys\" rel=\"noreferrer\">deep_stringify_keys</a> is what you're looking for.</p>\n\n<pre><code>hash = { person: { name: 'Rob', age: '28' } }\n\nhash.deep_stringify_keys\n# =&gt; {\"person\"=&gt;{\"name\"=&gt;\"Rob\", \"age\"=&gt;\"28\"}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": false, "score": 2, "last_activity_date": 1522318654, "creation_date": 1522318654, "answer_id": 49553523, "question_id": 39240219, "link": "https://stackoverflow.com/questions/39240219/how-to-recursively-convert-keys-of-ruby-hashes-that-are-symbols-to-string/49553523#49553523", "title": "How to recursively convert keys of Ruby Hashes that are symbols to String", "body": "<p>Quick'n'dirty if your values are basic objects like strings, numbers, etc:</p>\n\n<pre><code>require 'json'\nJSON.parse(JSON.dump(hash))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 266, "user_id": 7050499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SbgKd.jpg?s=128&g=1", "display_name": "Abdullah Fadhel", "link": "https://stackoverflow.com/users/7050499/abdullah-fadhel"}, "is_accepted": false, "score": 0, "last_activity_date": 1583723436, "creation_date": 1583723436, "answer_id": 60594284, "question_id": 39240219, "link": "https://stackoverflow.com/questions/39240219/how-to-recursively-convert-keys-of-ruby-hashes-that-are-symbols-to-string/60594284#60594284", "title": "How to recursively convert keys of Ruby Hashes that are symbols to String", "body": "<p>using plain ruby code, the below code could help.\nyou can monkey patched it to the ruby Hash, to use it like this <code>my_hash.deeply_stringfy_keys</code>\nhowever, I do not recommend monkey batching ruby.</p>\n\n<p>you can adjust the method to provide the <code>deeply_strigify_keys!</code> (bang) version of it.</p>\n\n<p>in case you want to make a different method witch does not stringify recursively, or to control the level of stringifying then consider re-writing the below method logic so you can have it written better with considering the other variation mentioned above. </p>\n\n<pre><code>def deeply_stringify_keys(hash)\n  stringified_hash = {}\n  hash.each do |k, v|\n    if v.is_a?(Hash)\n      stringified_hash[k.to_s] = deeply_stringify_keys(v)\n    elsif v.is_a?(Array)\n      stringified_hash[k.to_s] = v.map {|i| i.is_a?(Hash)? deeply_stringify_keys(i) : i}\n    else\n      stringified_hash[k.to_s] = v\n    end\n  end\n  stringified_hash\nend\n</code></pre>\n"}], "owner": {"reputation": 1073, "user_id": 5715870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e7d59420f276b45ef3a56a2617dd5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "dhrubo_moy", "link": "https://stackoverflow.com/users/5715870/dhrubo-moy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2780, "favorite_count": 4, "accepted_answer_id": 39240349, "answer_count": 4, "score": 4, "last_activity_date": 1583723436, "creation_date": 1472613691, "question_id": 39240219, "link": "https://stackoverflow.com/questions/39240219/how-to-recursively-convert-keys-of-ruby-hashes-that-are-symbols-to-string", "title": "How to recursively convert keys of Ruby Hashes that are symbols to String", "body": "<p>Suppose I have following hash or nested hash:</p>\n\n<pre><code>h = { :a1 =&gt; { :b1 =&gt; \"c1\" },\n      :a2 =&gt; { :b2 =&gt; \"c2\"},\n      :a3 =&gt; { :b3 =&gt; \"c3\"} }\n</code></pre>\n\n<p>I want to create a method that takes hash as a parameter and recursively convert all the keys (keys that are symbol eg. <code>:a1</code>) to String (eg. <code>\"a1\"</code>). So far I have come up with the following method which doesn't work and returns <code>{\"a1\"=&gt;{:b1=&gt;\"c1\"}, \"a2\"=&gt;{:b2=&gt;\"c2\"}, \"a3\"=&gt;{:b3=&gt;\"c3\"}}</code>.:</p>\n\n<pre><code>def stringify_all_keys(hash)\n    stringified_hash = {}\n    hash.each do |k, v|\n        stringified_hash[k.to_s] = v\n        if v.class == Hash\n            stringify_all_keys(stringified_hash[k.to_s])\n        end\n    end\n    stringified_hash\nend\n</code></pre>\n\n<p>What am I doing wrong and how do a get all the keys converted to string like this:</p>\n\n<pre><code>{\"a1\"=&gt;{\"b1\"=&gt;\"c1\"}, \"a2\"=&gt;{\"b2\"=&gt;\"c2\"}, \"a3\"=&gt;{\"b3\"=&gt;\"c3\"}}\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1580, "user_id": 449531, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b0281ec467c331131a3a679c82b29360?s=128&d=identicon&r=PG", "display_name": "zhon", "link": "https://stackoverflow.com/users/449531/zhon"}, "edited": false, "score": 0, "creation_date": 1472612301, "post_id": 39240024, "comment_id": 65816963, "body": "Take a look at the <code>Thread</code> library."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472615392, "post_id": 39240024, "comment_id": 65817645, "body": "To do two things at once you either have to use two threads or have an event loop running with timers in it, like <a href=\"http://www.rubydoc.info/gems/eventmachine/frames\" rel=\"nofollow noreferrer\">EventMachine</a> or <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/curses/rdoc/Curses.html\" rel=\"nofollow noreferrer\">Curses</a>."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472615417, "post_id": 39240419, "comment_id": 65817651, "body": "Your typing while trying to answer will be pushed around by the timer itself, but hey, this <i>technically</i> works."}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472615516, "post_id": 39240419, "comment_id": 65817677, "body": "is there a way to stop the timer thread based on the value of <code>$answer</code>? I couldn&#39;t find anything on it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472615627, "post_id": 39240419, "comment_id": 65817693, "body": "Another important note: Don&#39;t recommend people use global variables like <code>$answer</code>."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1472616144, "post_id": 39240419, "comment_id": 65817829, "body": "to stop the countdown, you can <code>break if student_answer</code> inside <code>5.downto(0)</code> loop. (You will also have to deal with not displaying &quot;Time is up&quot;.) Or you can directly stop the thread with <code>Thread.exit</code>. It is cleaner to have the thread suicide than trying to kill it from outside."}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1472615951, "last_edit_date": 1472615951, "creation_date": 1472615393, "answer_id": 39240419, "question_id": 39240024, "link": "https://stackoverflow.com/questions/39240024/ruby-how-to-require-user-input-while-simultaneously-showing-a-countdown/39240419#39240419", "title": "Ruby -- How to require user input while simultaneously showing a countdown", "body": "<p>Threading is the answer. Here's what I did. It isn't perfect, but it gets the job done. </p>\n\n<pre><code>student_answer = nil\n\ntimer = Thread.new do\n  5.downto(0) do |i|\n    puts \"\\r00:00:#{'%02d' % i}\"\n    sleep 1\n  end\n  puts 'Time is up'\nend\n\nanswer = Thread.new do\n  puts 'What is your answer?'\n  student_answer = gets.chomp\nend \n\nanswer.join(5)\ntimer.join\n\nif $answer.nil?\n  puts 'No Answer'\nelse\n  puts \"Your answer is #{student_answer }\"\nend\n</code></pre>\n\n<p>This code will produce the following output</p>\n\n<pre><code>What is your answer?\n\n00:00:05\n\n00:00:04\n\n00:00:03\n\n00:00:02\n\n00:00:01\n\n00:00:00\nTime is up\nNo Answer\n</code></pre>\n\n<p>Of course, you can enter your answer at anytime, but the answer thread is killed about 5 seconds, and you can no longer enter any answer. </p>\n\n<p>Unfortunately, I can not figure out how to kill the timer thread once an answer is inputted. If anyone have any ideas, please let me know. </p>\n"}], "owner": {"reputation": 11, "user_id": 2997234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23cefa18384214061587bc4a9284b93d?s=128&d=identicon&r=PG&f=1", "display_name": "user2997234", "link": "https://stackoverflow.com/users/2997234/user2997234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1472615951, "creation_date": 1472612014, "question_id": 39240024, "link": "https://stackoverflow.com/questions/39240024/ruby-how-to-require-user-input-while-simultaneously-showing-a-countdown", "title": "Ruby -- How to require user input while simultaneously showing a countdown", "body": "<p>(Warning: I'm relatively new to Ruby.) </p>\n\n<p>I'm writing a simple math script that will help my kids learn their addition facts. I want to show a countdown that they need to beat with their answers. So, for instance, while they're watching a countdown go from 5 to 0, they need to press '6 + enter' in order to correctly answer 3 + 3 = ?. The '6 + enter' should stop the countdown and advance them to the next question.</p>\n\n<p>Currently, this is the code for my countdown:</p>\n\n<blockquote>\n<pre><code>5.downto(0) do |i|\n  print \"\\r00:00:#{'%02d' % i}\"\n  sleep 1\nend\n</code></pre>\n</blockquote>\n\n<p>This works, as far as it goes. It gives me the countdown that I want. The problem is that I need to solicit an answer from the user that will interrupt this countdown -- while the countdown process is still running. As it stands, I could put a</p>\n\n<blockquote>\n  <p>answer = gets.chomp</p>\n</blockquote>\n\n<p>after the countdown, but that's obviously not going to help me very much.</p>\n\n<p>Any ideas? I've tried to read up on how to run simultaneous processes, but the explanations have been a bit difficult to follow, and none of the ones that I read about seemed to allow the kind of user interaction I'm after.</p>\n\n<p>Thanks in advance for your help.!</p>\n"}, {"tags": ["ruby", "inheritance", "macros"], "answers": [{"comments": [{"owner": {"reputation": 40317, "user_id": 417872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/281ef5c710467e0260b07f301c4ede3d?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/417872/andrew"}, "edited": false, "score": 0, "creation_date": 1472614316, "post_id": 39240186, "comment_id": 65817416, "body": "I tried several variations of this and couldn&#39;t get it to work... did you test this?"}, {"owner": {"reputation": 40317, "user_id": 417872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/281ef5c710467e0260b07f301c4ede3d?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/417872/andrew"}, "edited": false, "score": 0, "creation_date": 1472615949, "post_id": 39240186, "comment_id": 65817769, "body": "Okay, there was something wrong in my test I guess because I see your repl works. Thanks :)"}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1472613375, "creation_date": 1472613375, "answer_id": 39240186, "question_id": 39239911, "link": "https://stackoverflow.com/questions/39239911/ruby-inheritable-class-macro/39240186#39240186", "title": "Ruby inheritable class macro", "body": "<pre><code>class Base\n  def self.option(name,val)\n    options[name] = val\n  end\n\n  def self.options\n    @options ||= {}\n  end\nend\n\nclass Foo &lt; Base    \n  option :one, 1\n  option :two, 2\nend\n\nclass Bar &lt; Foo\n  @options = superclass.options.clone\n  option :three, 3\nend\n\nclass Baz &lt; Foo\n  @options = superclass.options.clone\n  option :four, 4\nend\n\nputs Foo.options #=&gt; {:one =&gt; 1, :two =&gt; 2}\nputs Bar.options #=&gt; {:one =&gt; 1, :two =&gt; 2, :three =&gt; 3}\nputs Baz.options #=&gt; {:one =&gt; 1, :two =&gt; 2, :four  =&gt; 4}\n</code></pre>\n\n<p>This is the only thing I can think of that will work, you simply clone <code>@options</code> from the superclass. This way, each class will have their own individual instance variable.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472615522, "post_id": 39240395, "comment_id": 65817678, "body": "Pretty close here but the <code>.dup</code> call means you&#39;re ignorant of any changes the superclass makes after the fact."}, {"owner": {"reputation": 631, "user_id": 134327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW2l2.png?s=128&g=1", "display_name": "Mario Carrion", "link": "https://stackoverflow.com/users/134327/mario-carrion"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472615671, "post_id": 39240395, "comment_id": 65817701, "body": "Question mentions nothing regarding observing the original macro."}, {"owner": {"reputation": 40317, "user_id": 417872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/281ef5c710467e0260b07f301c4ede3d?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/417872/andrew"}, "edited": false, "score": 0, "creation_date": 1472616079, "post_id": 39240395, "comment_id": 65817807, "body": "Yeah the dup is fine in this case. This is a nice clean solution. I tried something similar and it didn&#39;t work, but honestly I don&#39;t know why. Must have typed something wrong I guess. Thank you for straightening it out for me in any case :)"}], "tags": [], "owner": {"reputation": 631, "user_id": 134327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW2l2.png?s=128&g=1", "display_name": "Mario Carrion", "link": "https://stackoverflow.com/users/134327/mario-carrion"}, "is_accepted": true, "score": 1, "last_activity_date": 1472615223, "creation_date": 1472615223, "answer_id": 39240395, "question_id": 39239911, "link": "https://stackoverflow.com/questions/39239911/ruby-inheritable-class-macro/39240395#39240395", "title": "Ruby inheritable class macro", "body": "<p>I believe this is what you need:</p>\n\n<pre><code>class Base\n  def self.option(name, val)\n    options[name] = val\n  end\n\n  def self.options\n    @options ||= if self.superclass.respond_to?(:options)\n                   self.superclass.options.dup\n                 else\n                   {}\n                 end\n  end\nend\n\nclass Foo &lt; Base\n  option :one, 1\n  option :two, 2\nend\n\nclass Bar &lt; Foo\n  option :three, 3\nend\n\nclass Hello &lt; Bar\n  option :world, 4\nend\n\nputs Foo.options # {:one=&gt;1, :two=&gt;2}\nputs Bar.options # {:one=&gt;1, :two=&gt;2, :three=&gt;3}\nputs Hello.options #{:one=&gt;1, :two=&gt;2, :three=&gt;3, :world=&gt;4}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1472616021, "creation_date": 1472616021, "answer_id": 39240513, "question_id": 39239911, "link": "https://stackoverflow.com/questions/39239911/ruby-inheritable-class-macro/39240513#39240513", "title": "Ruby inheritable class macro", "body": "<p>If you want one that's generic enough to adapt to changes made in the base class after a subclass has been derived from it:</p>\n\n<pre><code>class Base\n  def self.option(name,val)\n    @options ||= { }\n\n    @options[name] = val\n  end\n\n  def self.options\n    @options ||= { }\n\n    if (self == Base)\n      @options\n    else\n      @options.merge(self.superclass.options)\n    end\n  end\nend\n\nclass Foo &lt; Base\n  option :one, 1\n  option :two, 2\nend\n\nclass SubFoo &lt; Foo\n  option :three, 3\nend\n\nFoo.options\n#=&gt; {:one =&gt; 1, :two =&gt; 2}\nSubFoo.options\n#=&gt; {:three=&gt;3, :one=&gt;1, :two=&gt;2}\n\nclass Foo\n  option :four, 4\nend\n\nFoo.options\n#=&gt; {:one=&gt;1, :two=&gt;2, :four=&gt;4}\nSubFoo.options\n#=&gt; {:three=&gt;3, :one=&gt;1, :two=&gt;2, :four=&gt;4}\n</code></pre>\n"}], "owner": {"reputation": 40317, "user_id": 417872, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/281ef5c710467e0260b07f301c4ede3d?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/417872/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 1, "accepted_answer_id": 39240395, "answer_count": 3, "score": 1, "last_activity_date": 1472616021, "creation_date": 1472611069, "question_id": 39239911, "link": "https://stackoverflow.com/questions/39239911/ruby-inheritable-class-macro", "title": "Ruby inheritable class macro", "body": "<p>Let's say I want to make a macro in Ruby.</p>\n\n<pre><code>class Base\n  def self.option(name,val)\n    options[name] = val\n  end\n\n  def self.options\n    @options ||= {}\n  end\nend\n\nclass Foo &lt; Base\n  option :one, 1\n  option :two, 2\nend\n\nFoo.options #=&gt; {:one =&gt; 1, :two =&gt; 2}\n</code></pre>\n\n<p>OK, easy enough.</p>\n\n<p>But what if I want to inherit Foo?</p>\n\n<pre><code>class Bar &lt; Foo\nend\n\nBar.options #=&gt; {}\n</code></pre>\n\n<p>That sucks.</p>\n\n<p>So it's clear the issue is the class instance variable is unique per class, ie. <code>@options</code> inside <code>Bar</code> is not the same as <code>@options</code> inside <code>Foo</code>.</p>\n\n<p>So maybe a class variable? I've never been able to figure out a valid use for one of those, let's try it.</p>\n\n<pre><code># the rest of the code unchanged\nclass Base\n  def self.options\n    @@options ||= {}\n  end\nend\n\nBar.options #=&gt; {:one =&gt; 1, :two =&gt; 2}\n</code></pre>\n\n<p>Hey that worked!  ...     didn't it?</p>\n\n<pre><code>class Baz &lt; Foo\n  option :three, 3\nend\n\nFoo.options #=&gt; {:one =&gt; 1, :two =&gt; 2, :three =&gt; 3}\nBar.options #=&gt; {:one =&gt; 1, :two =&gt; 2, :three =&gt; 3}\nBaz.options #=&gt; {:one =&gt; 1, :two =&gt; 2, :three =&gt; 3}\n</code></pre>\n\n<p>X-|</p>\n\n<p>Ok so, I've been googling around about this and I'm not seeing anything helpful. I tried a few variations on trying to read the superclass options (if defined) but got nowhere. I figured I may as well ask.</p>\n\n<p>Any of you know how to do this? Or is it just not possible...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1472607104, "post_id": 39239310, "comment_id": 65815893, "body": "This doesn&#39;t make a lot of sense. What sort of object is <code>@variable</code> going to be?"}, {"owner": {"reputation": 51, "user_id": 6776642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb41d16ccb9ac7db1d33455eb24e6169?s=128&d=identicon&r=PG&f=1", "display_name": "Lucho Tc", "link": "https://stackoverflow.com/users/6776642/lucho-tc"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472672380, "post_id": 39239310, "comment_id": 65851417, "body": "@tadman i have updated my post"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 6776642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb41d16ccb9ac7db1d33455eb24e6169?s=128&d=identicon&r=PG&f=1", "display_name": "Lucho Tc", "link": "https://stackoverflow.com/users/6776642/lucho-tc"}, "edited": false, "score": 0, "creation_date": 1472607902, "post_id": 39239414, "comment_id": 65816057, "body": "The issue is that if I use the default serializer I don&#39;t have this problem. Isn&#39;t there anything i can do?"}], "tags": [], "owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "is_accepted": false, "score": 3, "last_activity_date": 1472607194, "creation_date": 1472607194, "answer_id": 39239414, "question_id": 39239310, "link": "https://stackoverflow.com/questions/39239310/active-record-undefined-method-read-attribute-for-serialization/39239414#39239414", "title": "Active Record undefined method read_attribute_for_serialization", "body": "<blockquote>\n  <p>either a single object or an empty Active Record Relation</p>\n</blockquote>\n\n<p>I think this is the issue. I think you should either</p>\n\n<ul>\n<li>always return a collection. a collection of a single object or empty collection</li>\n<li>either return a single object or nil</li>\n</ul>\n\n<p>With the first option, you could always use <code>each_serializer</code>. With the second option, you could always use <code>serializer</code>.</p>\n"}], "owner": {"reputation": 51, "user_id": 6776642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb41d16ccb9ac7db1d33455eb24e6169?s=128&d=identicon&r=PG&f=1", "display_name": "Lucho Tc", "link": "https://stackoverflow.com/users/6776642/lucho-tc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1767, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1472608131, "creation_date": 1472606098, "last_edit_date": 1472608131, "question_id": 39239310, "link": "https://stackoverflow.com/questions/39239310/active-record-undefined-method-read-attribute-for-serialization", "title": "Active Record undefined method read_attribute_for_serialization", "body": "<p>I have a rails scope that gets the first record of a table and assings it to a @variable. It returns either a single object or an empty Active Record Relation. My problem is that i'm using a custom serializer to render the json but if the scope returns an empty Active Record Relation I get the \"Active Record undefined method read_attribute_for_serialization\" unless i use each_serializer, but if the the scope returns an object i have to render it using serializer: \nIs there any way of solving this without doing this : </p>\n\n<pre><code>if @variable.blank?\n  render json: @variable, each_serializer: CustomSerializer\nelse\n  render json: @variable, serializer: CustomSerializer\nend\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>I have to get the latest record from the Products table.\nSo i have defined a scope like this:</p>\n\n<pre><code>scope :last_by_period, -&gt; { order('period desc').first }\n</code></pre>\n\n<p>So this scope returns an empty Active Record Relation if there are no Products records in my db.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "heroku"], "comments": [{"owner": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "edited": false, "score": 3, "creation_date": 1472599737, "post_id": 39238458, "comment_id": 65814289, "body": "By any chance, does your environment have the <a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html#running-migrations\" rel=\"nofollow noreferrer\"><code>VERSION</code></a> environment variable set?"}, {"owner": {"reputation": 3259, "user_id": 1991663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cfd405e9cee8f34cb31443ce9a8426e6?s=128&d=identicon&r=PG", "display_name": "Dan Williams", "link": "https://stackoverflow.com/users/1991663/dan-williams"}, "reply_to_user": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "edited": false, "score": 0, "creation_date": 1472601162, "post_id": 39238458, "comment_id": 65814645, "body": "it does but to &#39;v3&#39;"}, {"owner": {"reputation": 3259, "user_id": 1991663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cfd405e9cee8f34cb31443ce9a8426e6?s=128&d=identicon&r=PG", "display_name": "Dan Williams", "link": "https://stackoverflow.com/users/1991663/dan-williams"}, "reply_to_user": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "edited": false, "score": 0, "creation_date": 1472601376, "post_id": 39238458, "comment_id": 65814688, "body": "@RobertNubel I think that might have been it!   You sir are amazing!"}, {"owner": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "edited": false, "score": 0, "creation_date": 1472607826, "post_id": 39238458, "comment_id": 65816042, "body": "Awesome, I&#39;ll transfer to an answer then."}], "answers": [{"comments": [{"owner": {"reputation": 1167, "user_id": 1658272, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/40806a8a10e8676108a748839c7d3ce2?s=128&d=identicon&r=PG", "display_name": "nrser", "link": "https://stackoverflow.com/users/1658272/nrser"}, "edited": false, "score": 0, "creation_date": 1511790643, "post_id": 39239531, "comment_id": 81980756, "body": "Wait wait wait... I just lost production data because a container had a <code>VERSION</code> env var set, <code>rake</code> decided to pick that up as an <i>argument</i> - though it&#39;s an incredibly common term and appeared nowhere on the command line - and then, though it&#39;s in <code>production</code> mode and the value of <code>VERSION</code> was not anywhere close to a legit migration version - Rails deleted data with no warning via dropping columns? I&#39;m not even sure what to think of this."}, {"owner": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "reply_to_user": {"reputation": 1167, "user_id": 1658272, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/40806a8a10e8676108a748839c7d3ce2?s=128&d=identicon&r=PG", "display_name": "nrser", "link": "https://stackoverflow.com/users/1658272/nrser"}, "edited": false, "score": 0, "creation_date": 1511799697, "post_id": 39239531, "comment_id": 81986667, "body": "@nrser agreed, it&#39;s a poor design decision that was left in to keep backwards compatibility. It&#39;s too late to help you now, but a fix to only allow valid migration versions was just merged this month: <a href=\"https://github.com/rails/rails/pull/30714\" rel=\"nofollow noreferrer\">github.com/rails/rails/pull/30714</a>"}, {"owner": {"reputation": 1167, "user_id": 1658272, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/40806a8a10e8676108a748839c7d3ce2?s=128&d=identicon&r=PG", "display_name": "nrser", "link": "https://stackoverflow.com/users/1658272/nrser"}, "edited": false, "score": 0, "creation_date": 1511826716, "post_id": 39239531, "comment_id": 82000038, "body": "Wow... I mean, for as horrible as taking arguments from a source you have terrible visibility into and that can be mutated by all sorts of other stuff on the system is, that&#39;s <code>rake</code>&#39;s thing and not really Rails&#39; fault, but, for f&#39;s sake, I would expect Rails to say &quot;hey, this is a production DB and I&#39;m about to trash data, that cool?&quot; <b>Especially</b> when it&#39;s doing so <i>because it couldn&#39;t make sense of an &#39;argument&#39; that I may have not even provided</i>."}], "tags": [], "owner": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "is_accepted": true, "score": 2, "last_activity_date": 1472608245, "creation_date": 1472608245, "answer_id": 39239531, "question_id": 39238458, "link": "https://stackoverflow.com/questions/39238458/heroku-run-rake-dbmigrate-reverts-migrations/39239531#39239531", "title": "heroku run rake db:migrate reverts migrations", "body": "<p><code>rake db:migrate</code> will, without any arguments, only migrate <em>up</em> to the latest version. If you ever see it migrate down, you most likely have the <code>VERSION</code> environment variable set to some value (see <a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html#running-migrations\" rel=\"nofollow\">the docs</a> for explanation of how that variable works), and Rails is trying to migrate to that version.</p>\n\n<p>In your case, per the comments, it looks like you'd set <code>VERSION=v3</code> in your environment. Rails is likely casting <code>v3</code> to <code>0</code> and trying to migrate <em>all</em> migrations down.</p>\n"}], "owner": {"reputation": 3259, "user_id": 1991663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cfd405e9cee8f34cb31443ce9a8426e6?s=128&d=identicon&r=PG", "display_name": "Dan Williams", "link": "https://stackoverflow.com/users/1991663/dan-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 39239531, "answer_count": 1, "score": 2, "last_activity_date": 1472608245, "creation_date": 1472598967, "question_id": 39238458, "link": "https://stackoverflow.com/questions/39238458/heroku-run-rake-dbmigrate-reverts-migrations", "title": "heroku run rake db:migrate reverts migrations", "body": "<p>I am running my app on heroku, using the heroku pg stack, and when I run db:migrate it reverts my previous migrations instead of moving forward.</p>\n\n<p><code>rake db:version</code> shows the current migration</p>\n\n<pre><code>Current version: 20160516172744\n</code></pre>\n\n<p><code>rake db:migrate:status</code> shows all migrations as up</p>\n\n<pre><code>......(more above all up)\n   up     20160512175053  Create spree roles permissions.spree admin roles and access\n   up     20160512175054  Add editable is default and index on editable is default and name to spree roles.spree admin roles and access\n   up     20160513135317  Add indexes for speed\n   up     20160513140704  Add filter search params to spree product\n   up     20160516172744  Add tsvector colums to spree products\n</code></pre>\n\n<p>But when I hit heroku run rake db:migrate this is the output:</p>\n\n<pre><code>Migrating to AddTsvectorColumsToSpreeProducts (20160516172744)\n== 20160516172744 AddTsvectorColumsToSpreeProducts: reverting =================\n-- execute(\"      DROP FUNCTION IF EXISTS spree_products_tsv_trigger() CASCADE;\\n\")\n   -&gt; 0.0031s\n-- remove_index(:spree_products, :tsv)\n   -&gt; 0.0058s\n-- remove_column(:spree_products, :tsv)\n   -&gt; 0.0025s\n== 20160516172744 AddTsvectorColumsToSpreeProducts: reverted (0.0122s) ========\n\nMigrating to AddFilterSearchParamsToSpreeProduct (20160513140704)\n== 20160513140704 AddFilterSearchParamsToSpreeProduct: reverting ==============\n-- remove_column(:spree_products, :designer_id)\n   -&gt; 0.0062s\n-- remove_column(:spree_products, :main_taxon_id)\n   -&gt; 0.0024s\n-- remove_column(:spree_products, :colour_id)\n   -&gt; 0.0025s\n-- remove_column(:spree_products, :size_id)\n   -&gt; 0.0045s\n-- remove_column(:spree_products, :condition_id)\n   -&gt; 0.0023s\n-- remove_column(:spree_products, :on_site)\n   -&gt; 0.0023s\n-- remove_column(:spree_products, :sgd_price)\n   -&gt; 0.0025s\n-- remove_column(:spree_products, :search_designer)\n   -&gt; 0.0022s\n-- remove_column(:spree_products, :search_category)\n   -&gt; 0.0021s\n-- remove_column(:spree_products, :search_sku)\n   -&gt; 0.0022s\n== 20160513140704 AddFilterSearchParamsToSpreeProduct: reverted (0.0341s) =====\n.....(cont.)\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>-Dan</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "railstutorial.org", "puma"], "answers": [{"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 1, "last_activity_date": 1472597545, "creation_date": 1472597545, "answer_id": 39238267, "question_id": 39238257, "link": "https://stackoverflow.com/questions/39238257/rails-tutorial-2-2-puma-server/39238267#39238267", "title": "Rails Tutorial 2.2: Puma Server", "body": "<p><code>$IP</code> is not defined in your environment, so <code>rails server</code> is trying to use <code>-p</code> as the IP address. Try this:</p>\n\n<pre><code>rails server -b ${IP:-127.0.0.1} -p ${PORT:-3000}\n</code></pre>\n\n<p>Alternatively, set these environment variables with <code>export</code> before running <code>rails server -b $IP -p $PORT</code>:</p>\n\n<pre><code>export IP=127.0.0.1\nexport PORT=3000\n</code></pre>\n\n<p>Or if you're fine with Rails' defaults, just forget all this and run <code>rails server</code>. :-) </p>\n"}, {"tags": [], "owner": {"reputation": 120, "user_id": 6776402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648bd8fee1119286e56fac507f66094a?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/6776402/brian"}, "is_accepted": false, "score": 1, "last_activity_date": 1472597984, "creation_date": 1472597984, "answer_id": 39238330, "question_id": 39238257, "link": "https://stackoverflow.com/questions/39238257/rails-tutorial-2-2-puma-server/39238330#39238330", "title": "Rails Tutorial 2.2: Puma Server", "body": "<p>If you are running locally you should be able to use <code>rails server</code> without arguments. If you are using the Hartl tutorial, it presumes you are using a web-based IDE that requires the extra arguments.</p>\n"}, {"tags": [], "owner": {"reputation": 1048, "user_id": 6166821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LpwuPY2Vfjw/AAAAAAAAAAI/AAAAAAAADS0/aT3BFBVyQEQ/photo.jpg?sz=128", "display_name": "Hasmukh Rathod", "link": "https://stackoverflow.com/users/6166821/hasmukh-rathod"}, "is_accepted": false, "score": 0, "last_activity_date": 1472601541, "creation_date": 1472601541, "answer_id": 39238789, "question_id": 39238257, "link": "https://stackoverflow.com/questions/39238257/rails-tutorial-2-2-puma-server/39238789#39238789", "title": "Rails Tutorial 2.2: Puma Server", "body": "<p>If you are using <code>cloud based IDE</code>, you need to listen at <code>particular IP &amp; PORT</code>. For example, <code>C9</code>, you need to listen to <code>0.0.0.0 and 8080</code>. So they have setup <code>environment variables, $IP &amp; $PORT.</code> </p>\n\n<p>If you execute, </p>\n\n<pre><code>echo $IP  ###gives 0.0.0.0\necho $PORT ###gives 8080\n\nrails s -b $IP -p $PORT  ##Rails x.x.x application starting in development on http://0.0.0.0:8080\n</code></pre>\n\n<p>The <code>-b</code> option binds Rails to the specified IP, by default it is localhost.</p>\n\n<p>If you are on your local machine, run</p>\n\n<pre><code>rails s ### Rails x.x.x application starting in development on http://localhost:3000\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6712052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b6bfe366a9e74009a3a7edda2078d99?s=128&d=identicon&r=PG&f=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/6712052/zero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1472601541, "creation_date": 1472597429, "question_id": 39238257, "link": "https://stackoverflow.com/questions/39238257/rails-tutorial-2-2-puma-server", "title": "Rails Tutorial 2.2: Puma Server", "body": "<p>I'm trying to learn Rails from the Rails Tutorial book, got lubuntu so I could try to get the best experience possible. Now I'm stuck on something that should be easy and straight forward.</p>\n\n<p>We're creating a little \"toy app\" a very basic twitter like thing, still at the very beginning, we used: </p>\n\n<pre><code>$ rails generate scaffold User name:string email:string\n</code></pre>\n\n<p>To generate a User Table if I'm not mistaken and then:</p>\n\n<pre><code>$ rails db:migrate\n</code></pre>\n\n<p>I guess to update a preexisting table structure (not sure, but it's said that later everything will be explained).</p>\n\n<p>Finally we are supposed to run this:</p>\n\n<pre><code> $ rails server -b $IP -p $PORT\n</code></pre>\n\n<p>In a differente tab, I did and got this error:</p>\n\n<pre><code>~/workspace/toy_app$ rails server -b $IP -p $PORT\n=&gt; Booting Puma\n=&gt; Rails 5.0.0.1 application starting in development on http://-p:3000\n=&gt; Run `rails server -h` for more startup options\nPuma starting in single mode...\n* Version 3.4.0 (ruby 2.3.1-p112), codename: Owl Bowl Brawl\n* Min threads: 5, max threads: 5\n* Environment: development\n* Listening on tcp://-p:3000\nExiting\n/var/lib/gems/2.3.0/gems/puma-3.4.0/lib/puma/binder.rb:255:in `initialize': getaddrinfo: Name or service not known (SocketError)\n    from /var/lib/gems/2.3.0/gems/puma-3.4.0/lib/puma/binder.rb:255:in `new'\n    from /var/lib/gems/2.3.0/gems/puma-3.4.0/lib/puma/binder.rb:255:in `add_tcp_listener'\n    from /var/lib/gems/2.3.0/gems/puma-3.4.0/lib/puma/binder.rb:102:in `block in parse'\n    from /var/lib/gems/2.3.0/gems/puma-3.4.0/lib/puma/binder.rb:85:in `each'\n    from /var/lib/gems/2.3.0/gems/puma-3.4.0/lib/puma/binder.rb:85:in `parse'\n    from /var/lib/gems/2.3.0/gems/puma-3.4.0/lib/puma/runner.rb:129:in `load_and_bind'\n    from /var/lib/gems/2.3.0/gems/puma-3.4.0/lib/puma/single.rb:84:in `run'\n    from /var/lib/gems/2.3.0/gems/puma-3.4.0/lib/puma/launcher.rb:172:in `run'\n    from /var/lib/gems/2.3.0/gems/puma-3.4.0/lib/rack/handler/puma.rb:51:in `run'\n    from /var/lib/gems/2.3.0/gems/rack-2.0.1/lib/rack/server.rb:296:in `start'\n    from /var/lib/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/commands/server.rb:79:in `start'\n    from /var/lib/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:90:in `block in server'\n    from /var/lib/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:85:in `tap'\n    from /var/lib/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:85:in `server'\n    from /var/lib/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n    from /var/lib/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n    from /home/zero/workspace/toy_app/bin/rails:9:in `require'\n    from /home/zero/workspace/toy_app/bin/rails:9:in `&lt;top (required)&gt;'\n    from /var/lib/gems/2.3.0/gems/spring-1.7.2/lib/spring/client/rails.rb:28:in `load'\n    from /var/lib/gems/2.3.0/gems/spring-1.7.2/lib/spring/client/rails.rb:28:in `call'\n    from /var/lib/gems/2.3.0/gems/spring-1.7.2/lib/spring/client/command.rb:7:in `call'\n    from /var/lib/gems/2.3.0/gems/spring-1.7.2/lib/spring/client.rb:30:in `run'\n    from /var/lib/gems/2.3.0/gems/spring-1.7.2/bin/spring:49:in `&lt;top (required)&gt;'\n    from /var/lib/gems/2.3.0/gems/spring-1.7.2/lib/spring/binstub.rb:11:in `load'\n    from /var/lib/gems/2.3.0/gems/spring-1.7.2/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n    from /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /home/zero/workspace/toy_app/bin/spring:13:in `&lt;top (required)&gt;'\n    from bin/rails:3:in `load'\n    from bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>Is anything corrupted? Did I do anything wrong? I went to check the files I remembered seeing puma (in the app folder) on and it's in the gem file:</p>\n\n<pre><code>gem 'puma',         '3.4.0'\n</code></pre>\n\n<p>And the puma.rb file (took out the comments):</p>\n\n<pre><code>threads_count = ENV.fetch(\"RAILS_MAX_THREADS\") { 5 }.to_i\nthreads threads_count, threads_count\n\nport        ENV.fetch(\"PORT\") { 3000 }\n\nenvironment ENV.fetch(\"RAILS_ENV\") { \"development\" }\n\nplugin :tmp_restart\n</code></pre>\n\n<p>I was going to put all the files mentioned but it's tons of code, if there's any that's useful I'll post it, I don't want to spam with possible useless code.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rufus-scheduler"], "answers": [{"tags": [], "owner": {"reputation": 3437, "user_id": 10762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?s=128&d=identicon&r=PG", "display_name": "jmettraux", "link": "https://stackoverflow.com/users/10762/jmettraux"}, "is_accepted": false, "score": 0, "last_activity_date": 1472678984, "last_edit_date": 1472678984, "creation_date": 1472609208, "answer_id": 39239653, "question_id": 39238024, "link": "https://stackoverflow.com/questions/39238024/will-rails-rufus-scheduler-job-skips-if-its-overlap-variable-false-and-mutex-var/39239653#39239653", "title": "Will Rails Rufus scheduler job skips if its overlap variable false and mutex variable exists?", "body": "<p>There are two cases to consider, the single process case and the multi process case.</p>\n\n<p>The multi process case happens when your Rails uses a server made/tuned to use multiple Ruby processes.</p>\n\n<p>By server, I mean Webrick, Unicorn, Passenger, Puma, etc...</p>\n\n<p>In both cases, the overlap is considered before the mutex.</p>\n\n<p>In the single process case the <code>overlap =&gt; false</code> will kick in first and the scheduler will skip the incoming, overlapping job. The mutex will then be considered (if the job isn't overlapping) and might make the job wait until the mutex is freed by an instance of the same job or an instance of a job pointing to that same mutex.</p>\n\n<p>In the multiple process case, you might end up having a scheduler in each of your Ruby processes and <code>overlap</code> and <code>mutex</code> might <em>appear</em> to be not respected, while, in their local Ruby Process they are, but since you have more than one process with each a scheduler...</p>\n\n<p>If you have a server giving you multiple Ruby processes and you want to have a single rufus-scheduler working on its jobs, you have to read <a href=\"https://github.com/jmettraux/rufus-scheduler#lockfile--mylockfiletxt\" rel=\"nofollow\">https://github.com/jmettraux/rufus-scheduler#lockfile--mylockfiletxt</a> and <a href=\"https://github.com/jmettraux/rufus-scheduler#scheduler_lock\" rel=\"nofollow\">https://github.com/jmettraux/rufus-scheduler#scheduler_lock</a> There are also multiple stackoverflow questions dedicated to this subject.</p>\n"}], "owner": {"reputation": 19, "user_id": 3994753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZfdIV.jpg?s=128&g=1", "display_name": "Chanduru Pushpalingam", "link": "https://stackoverflow.com/users/3994753/chanduru-pushpalingam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1472678984, "creation_date": 1472595968, "question_id": 39238024, "link": "https://stackoverflow.com/questions/39238024/will-rails-rufus-scheduler-job-skips-if-its-overlap-variable-false-and-mutex-var", "title": "Will Rails Rufus scheduler job skips if its overlap variable false and mutex variable exists?", "body": "<pre><code>scheduler.every '1m', :overlap =&gt; false, :mutex =&gt; \"my_lock\" do\n   something...\nend\n</code></pre>\n\n<p>will this scheduler's job wait for the previous run to finish or skips if it finds that previous run is still running?</p>\n"}, {"tags": ["ruby", "amazon-sqs", "peddler"], "answers": [{"tags": [], "owner": {"reputation": 5872, "user_id": 464685, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1e9ce2c15d24684d45ae475c5d9fc4d4?s=128&d=identicon&r=PG", "display_name": "Pablo Cantero", "link": "https://stackoverflow.com/users/464685/pablo-cantero"}, "is_accepted": false, "score": 3, "last_activity_date": 1524138035, "last_edit_date": 1524138035, "creation_date": 1472852102, "answer_id": 39301002, "question_id": 39237914, "link": "https://stackoverflow.com/questions/39237914/how-to-receive-notifications-from-a-amazon-sqs-queue/39301002#39301002", "title": "How to receive notifications from a Amazon SQS queue", "body": "<p>IMO <a href=\"https://github.com/phstc/shoryuken\" rel=\"nofollow noreferrer\">Shoryuken</a> is currently the most efficient way for polling SQS messages in Ruby.</p>\n\n<p>You can go ahead and use only the <code>aws-sdk</code>, that would work - with certain limitations. If you go on that path, you will ended implementing a lot of stuff around the <code>aws-sdk</code>, which Shoryuken already does. With the sdk you can receive messages in a loop, call a Ruby class to consume them etc. Shoryuken is a process for polling messages, which uses multithread for performance wise. Besides that, a single process can receive messages from multiple queues.</p>\n\n<blockquote>\n  <p>It seems like the SQS queue should just be like a webhook that I can subscribe to, too receive notices. But I'm not seeing that option anywhere.</p>\n</blockquote>\n\n<p>That is not SQS, the service that's like that is AWS SNS. If Amazon Marketplace can also integrate with SNS, you can implement a pub/sub calling webhooks.</p>\n\n<p>PS: Shoryuken author here :)</p>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 781, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524138035, "creation_date": 1472595361, "question_id": 39237914, "link": "https://stackoverflow.com/questions/39237914/how-to-receive-notifications-from-a-amazon-sqs-queue", "title": "How to receive notifications from a Amazon SQS queue", "body": "<p>What is the most efficient way to receive messages from a Amazon SQS queue?</p>\n\n<p>I've been using the Peddler Gem to create, register and subscribe to an Amazon SQS queue that captures Amazon Marketplace order changes. All good there, the SQS queue is receiving the messages fine. The next step I'm a bit fuzzy on and need some help before I go down a rabbit hole. </p>\n\n<p>It seems like the SQS queue should just be like a webhook that I can subscribe to, too receive notices. But I'm not seeing that option anywhere.</p>\n\n<p>But then it looks like I can use the Shoryuken Gem or maybe Amazon's own AWS SDK for Ruby to create workers to poll the queue in order to get notified of new messages.</p>\n\n<p>Is the Shoryuken gem the most efficient way to pull messages from SQS? Or is there a better way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 3, "creation_date": 1472595384, "post_id": 39237760, "comment_id": 65812965, "body": "I don&#39;t have enough information to help. You should describe in more detail what you are doing. How exactly are you inserting elements one by one? Did you initialize the <code>material.user_ids</code> before appending with <code>&lt;&lt;</code>? What do you mean by &quot;it does not work&quot;? How exactly did you diagnose this? Many things could have gone wrong, so being specific is important. For example, add an excerpt from what you did on the Rails console. Also, please improve your writing. It is riddled with errors."}], "answers": [{"tags": [], "owner": {"reputation": 318, "user_id": 2959090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecab5392ceea34c60ad3d723617d127a?s=128&d=identicon&r=PG&f=1", "display_name": "siopao", "link": "https://stackoverflow.com/users/2959090/siopao"}, "is_accepted": true, "score": 4, "last_activity_date": 1472599893, "creation_date": 1472599893, "answer_id": 39238592, "question_id": 39237760, "link": "https://stackoverflow.com/questions/39237760/rails-can-not-insert-element-to-array/39238592#39238592", "title": "Rails: can not insert element to array", "body": "<p>This is because the shovel method only works for objects. Do this instead.</p>\n\n<pre><code>material.users &lt;&lt; user\n</code></pre>\n\n<p>Read here for other ways of adding associations - <a href=\"http://edgeguides.rubyonrails.org/association_basics.html#has-many-association-reference\" rel=\"nofollow\">http://edgeguides.rubyonrails.org/association_basics.html#has-many-association-reference</a></p>\n"}], "owner": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 39238592, "answer_count": 1, "score": 1, "last_activity_date": 1472599893, "creation_date": 1472594466, "question_id": 39237760, "link": "https://stackoverflow.com/questions/39237760/rails-can-not-insert-element-to-array", "title": "Rails: can not insert element to array", "body": "<p>Model</p>\n\n<pre><code>Material\nUser\nMaterials_Users(Join table)\n</code></pre>\n\n<p>In console, when I try <code>material.user_ids = [1,2]</code> , it works well. But when I try to insert element one by one, like <code>material.user_ids &lt;&lt; 3</code> , it does not work, the array turn to empty and nothing is inserted into the array.</p>\n\n<p>How to solve this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting", "file-upload"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 6776200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ff5ebd1731ce945971321213f0f404a?s=128&d=identicon&r=PG&f=1", "display_name": "BlueDevilPride", "link": "https://stackoverflow.com/users/6776200/bluedevilpride"}, "edited": false, "score": 0, "creation_date": 1472596515, "post_id": 39237557, "comment_id": 65813322, "body": "I&#39;m relatively new to Ruby and my initial instinct was to add sort, sort_by or order to the controller or HTML.  Could the order be accomplished in those places too, or just the model?"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 137, "user_id": 6776200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ff5ebd1731ce945971321213f0f404a?s=128&d=identicon&r=PG&f=1", "display_name": "BlueDevilPride", "link": "https://stackoverflow.com/users/6776200/bluedevilpride"}, "edited": false, "score": 0, "creation_date": 1472597061, "post_id": 39237557, "comment_id": 65813505, "body": "@BlueDevilPride When you use <code>option_groups_from_collection_for_select</code> you work with Model <code>Bank</code>, so it&#39;s mean that you should make order in Model, in Controller you also can use <code>sort</code> or <code>sort_by</code> but only when you will work with controller)"}, {"owner": {"reputation": 137, "user_id": 6776200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ff5ebd1731ce945971321213f0f404a?s=128&d=identicon&r=PG&f=1", "display_name": "BlueDevilPride", "link": "https://stackoverflow.com/users/6776200/bluedevilpride"}, "edited": false, "score": 0, "creation_date": 1472597163, "post_id": 39237557, "comment_id": 65813538, "body": "Got it. Thanks for the clarity."}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": true, "score": 0, "last_activity_date": 1472593426, "creation_date": 1472593426, "answer_id": 39237557, "question_id": 39237264, "link": "https://stackoverflow.com/questions/39237264/sort-imported-file-ruby/39237557#39237557", "title": "sort imported file ruby", "body": "<p>If I right understand your problem, and if your model State looks like:</p>\n\n<pre><code>class State &lt; ..\n    has_many :banks\n    etc..\nend\n</code></pre>\n\n<p>This correction should help you, I think.</p>\n\n<pre><code>class State &lt; ..\n    has_many :banks, -&gt; { order(\"banks.name\") }\n    etc..\nend\n</code></pre>\n\n<p>P.S. \nIf you will use <code>find_by</code> your code would be more clearer)</p>\n\n<pre><code>attributes['state'] = State.find_by(name: attributes['state'])\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 6776200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ff5ebd1731ce945971321213f0f404a?s=128&d=identicon&r=PG&f=1", "display_name": "BlueDevilPride", "link": "https://stackoverflow.com/users/6776200/bluedevilpride"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 39237557, "answer_count": 1, "score": 0, "last_activity_date": 1472593426, "creation_date": 1472592049, "question_id": 39237264, "link": "https://stackoverflow.com/questions/39237264/sort-imported-file-ruby", "title": "sort imported file ruby", "body": "<p>When previously importing my CSV file the data would upload sorted, but now, for no apparent reason, it's not coming out sorted after being uploaded and I'm having difficulty figuring out how to get it to sort.  </p>\n\n<p>To fix this, I'm looking at my file upload code and HTML code. I built a dynamic drop down box whereby the user selects a state, which populates the next drop down box with all bank listed in that state by bank name.  I need the bank names in the second drop down box to appear alphabetically.  Previously, when I uploaded my CSV file, the bank names would appear alphabetically, but now it's not doing that.  </p>\n\n<p>Any help would be greatly appreciated. Probably something silly I'm overlooking here.</p>\n\n<p>FDIC MODEL</p>\n\n<pre><code>  def self.import(file)\n        CSV.foreach(file.path, headers: true) do |row|\n        attributes = row.to_hash\n        attributes['state'] = State.where(name: attributes['state']).first\n        Fdic.create! attributes\n       end \n      end\n</code></pre>\n\n<p>HTML</p>\n\n<pre><code>  &lt;h4&gt;Select a State&lt;/h4&gt;\n&lt;%= select_tag :state, options_for_select(State.all.pluck(:name)), include_blank: \"States\" %&gt;\n\n  &lt;h4&gt;Select a Bank&lt;/h4&gt;\n&lt;%= select_tag :bank, option_groups_from_collection_for_select(@states, :fdic, :name, :id, :bank), include_blank: \"Select a Bank\" %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 443, "user_id": 5948237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/338252eadaab6846d185b8927a05e621?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Chavda", "link": "https://stackoverflow.com/users/5948237/vivek-chavda"}, "edited": false, "score": 0, "creation_date": 1472592731, "post_id": 39237250, "comment_id": 65811991, "body": "Not a ruby expert, but maybe you can pass in the desired redirect url as a parameter? Then you could redirect to it if it&#39;s passed in after every login. Otherwise you would have to add another such configuration for every workflow, and you might have many more in the future."}], "answers": [{"tags": [], "owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "is_accepted": true, "score": 0, "last_activity_date": 1472607313, "last_edit_date": 1472607313, "creation_date": 1472594392, "answer_id": 39237744, "question_id": 39237250, "link": "https://stackoverflow.com/questions/39237250/rails-devise-how-to-redirect-to-a-specific-page-after-login/39237744#39237744", "title": "Rails/Devise How to redirect to a specific page after login", "body": "<p>Easy! Why not try:</p>\n\n<p><code>URI(request.referer).path</code>  ? </p>\n\n<p>Now you can basically identify the path where you came from.</p>\n\n<p>You can also store the page where you came from in a session. e.g.</p>\n\n<pre><code>session[:intended_url] = request.url\n</code></pre>\n\n<p>hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 325, "user_id": 4643690, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9_dmW_kS7R0/AAAAAAAAAAI/AAAAAAAAAAw/AeA0aY62T0w/photo.jpg?sz=128", "display_name": "bk chovatiya", "link": "https://stackoverflow.com/users/4643690/bk-chovatiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1472619073, "creation_date": 1472619073, "answer_id": 39240977, "question_id": 39237250, "link": "https://stackoverflow.com/questions/39237250/rails-devise-how-to-redirect-to-a-specific-page-after-login/39240977#39240977", "title": "Rails/Devise How to redirect to a specific page after login", "body": "<p>Try This one</p>\n\n<pre><code>if resource.class == User &amp;&amp; current_user\n    user_dashboard_path\nelse\n    super\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1114, "user_id": 5934752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7tGT8.jpg?s=128&g=1", "display_name": "Ravi Mariya", "link": "https://stackoverflow.com/users/5934752/ravi-mariya"}, "is_accepted": false, "score": 0, "last_activity_date": 1472619495, "creation_date": 1472619495, "answer_id": 39241053, "question_id": 39237250, "link": "https://stackoverflow.com/questions/39237250/rails-devise-how-to-redirect-to-a-specific-page-after-login/39241053#39241053", "title": "Rails/Devise How to redirect to a specific page after login", "body": "<p>i think you should pass your params with session path inside your new_user_session_path form like <code>url: session_path(resource_name, :registration_process =&gt; true)</code>\nafter that you can use <code>if params[:registration_process]</code></p>\n"}], "owner": {"reputation": 105, "user_id": 5484879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-9qfjsZcHZVU/AAAAAAAAAAI/AAAAAAAAABI/mfj7gxHoBTc/photo.jpg?sz=128", "display_name": "Vinicius Martinson", "link": "https://stackoverflow.com/users/5484879/vinicius-martinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 39237744, "answer_count": 3, "score": 0, "last_activity_date": 1472619495, "creation_date": 1472591952, "question_id": 39237250, "link": "https://stackoverflow.com/questions/39237250/rails-devise-how-to-redirect-to-a-specific-page-after-login", "title": "Rails/Devise How to redirect to a specific page after login", "body": "<p>After <code>login</code> and <code>signup</code>, I want to redirect the user to a specific page only if the user came from a specific page.</p>\n\n<p>What I have tried to do so far \u2013 using <code>devise</code>:</p>\n\n<ol>\n<li><p>I added a parameter to a link and checked that parameter in the login page. Using the method <code>after_sign_in_path_for(resource)</code> from <code>devise</code>, I created a conditional to that parameter. If <code>true</code>, the page would be redirect to my wanted page</p>\n\n<p><strong>Link</strong></p>\n\n<pre><code>&lt;%= link_to \"Login before continuing\", new_user_session_path(:registration_process =&gt; true)\n</code></pre>\n\n<p><strong>On <code>ApplicationController.rb</code></strong></p>\n\n<pre><code>def after_sign_in_path_for(resource)\n if params[:registration_process]\n    leads_path  # desired page\n else\n   super\n end\nend\n</code></pre></li>\n</ol>\n\n<p>This is not working.</p>\n\n<p>I don't know if using <code>params</code> is the best option, since I want to do the same with the sign up page.</p>\n\n<p>Thank you very much. Any help will be much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nomethoderror"], "comments": [{"owner": {"reputation": 141, "user_id": 1982033, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bwD37.jpg?s=128&g=1", "display_name": "Tijmenh", "link": "https://stackoverflow.com/users/1982033/tijmenh"}, "edited": false, "score": 0, "creation_date": 1472592825, "post_id": 39237189, "comment_id": 65812024, "body": "You&#39;re using <code>f.</code> for the fields but I don&#39;t see a <code>form_for</code>? see <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.ht&zwnj;&#8203;ml</a>  you don&#39;t define the <code>f</code> in your code."}, {"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1472594640, "post_id": 39237189, "comment_id": 65812714, "body": "Is <code>undefined method </code>map_text_url&#39; for #` really all you get? I&#39;d expect it to say what the receiver was right after the <code>#</code>. Also, please show the stacktrace."}, {"owner": {"reputation": 43, "user_id": 2284348, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b1ee4edd7020336d2e1fc516e60b9d4f?s=128&d=identicon&r=PG", "display_name": "user2284348", "link": "https://stackoverflow.com/users/2284348/user2284348"}, "edited": false, "score": 0, "creation_date": 1472596352, "post_id": 39237189, "comment_id": 65813271, "body": "Hello Rafael, i`m new with ruby, could you explain me how to look for the stacktrace? Thanks Tijmenh i saw the link of FormHelper, but i have this code running in my server propertly in <a href=\"http://meetrico.com\" rel=\"nofollow noreferrer\">meetrico.com</a> i supose if its running there is no problem with te form, i think this is with my db."}, {"owner": {"reputation": 43, "user_id": 2284348, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b1ee4edd7020336d2e1fc516e60b9d4f?s=128&d=identicon&r=PG", "display_name": "user2284348", "link": "https://stackoverflow.com/users/2284348/user2284348"}, "edited": false, "score": 0, "creation_date": 1472615995, "post_id": 39237189, "comment_id": 65817786, "body": "Hi guys! i solved it! It was an error in the migrations in database, thats fixed now. Thanks for helping!"}], "owner": {"reputation": 43, "user_id": 2284348, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b1ee4edd7020336d2e1fc516e60b9d4f?s=128&d=identicon&r=PG", "display_name": "user2284348", "link": "https://stackoverflow.com/users/2284348/user2284348"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472591642, "creation_date": 1472591642, "question_id": 39237189, "link": "https://stackoverflow.com/questions/39237189/nomethoderror-in-coworking-spaces", "title": "NoMethodError in Coworking_spaces", "body": "<p>i'm having this error: </p>\n\n<p>undefined method `map_text_url' for #</p>\n\n<p>This is my /Users/felipevelasquez/Desktop/APPS/meetrico/meetrico-production/app/views/coworking_spaces/_form.html.haml </p>\n\n<pre><code>23:   .field.columns\n24:     = f.label :map_text_url, \"Url Imagen del mapa\"\n25:     %br/\n26:     = f.text_area :map_text_url, :size =&gt; \"40x4\", class: 'image-text'\n27:   .field.columns\n28:     = f.label :map_file, \"O sube una imagen\"\n29:     - if @coworking_space.map_file?\n</code></pre>\n\n<p>Trace of template inclusion: app/views/coworking_spaces/new.html.haml</p>\n\n<p>This is my new.html.haml</p>\n\n<pre><code>%h1 Nuevo Espacio\n= render 'form'\n= link_to 'Back', coworking_spaces_path\n</code></pre>\n\n<p>Where is the error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "twilio"], "comments": [{"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1472591126, "post_id": 39236559, "comment_id": 65811295, "body": "Have you tried <code>render xml: &#39;&#39;</code>?"}, {"owner": {"reputation": 205, "user_id": 2730377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5094e247d1815f43a9d50fd50ac22b?s=128&d=identicon&r=PG&f=1", "display_name": "dumbname92", "link": "https://stackoverflow.com/users/2730377/dumbname92"}, "reply_to_user": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1472595253, "post_id": 39236559, "comment_id": 65812913, "body": "Same result.  Also tried:"}, {"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1472595907, "post_id": 39236559, "comment_id": 65813143, "body": "What did you try? Your comment is empty after the colon. What do you mean by &quot;result&quot;? The HTML response? Next, try adding a <code>.xml</code> suffix to the request URL, i.e. <code>http:&#47;&#47;www.mycoolurl.com&#47;confirmation.xml</code>."}, {"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1472596053, "post_id": 39236559, "comment_id": 65813191, "body": "If that does not solve your problem, please add the relevant portions from your Rails server log, i.e. everything from <code>Started GET</code> to <code>Completed</code> for that request. And please clearly state what the expected/required response should be. (Please don&#39;t assume we know twilio.)"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1472599685, "post_id": 39236559, "comment_id": 65814278, "body": "I&#39;m looking into this and I promise that Heroku doesn&#39;t hate Twilio, I&#39;ve used it a bunch of times for different things. Are you actually using the Heroku URL though, as the HTML response, starting with an HTML4 doctype and including your Heroku URL in a <code>frame</code> just seems totally out of place to me."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472602648, "post_id": 39236559, "comment_id": 65814967, "body": "Try adding <code>format: :xml</code> to your route?"}, {"owner": {"reputation": 205, "user_id": 2730377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5094e247d1815f43a9d50fd50ac22b?s=128&d=identicon&r=PG&f=1", "display_name": "dumbname92", "link": "https://stackoverflow.com/users/2730377/dumbname92"}, "reply_to_user": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1472607013, "post_id": 39236559, "comment_id": 65815875, "body": "@philnash:  The weird thing about this response is I don&#39;t know where it&#39;s coming from.  I am definitely using my actual domain and I didn&#39;t code any of that response."}, {"owner": {"reputation": 205, "user_id": 2730377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5094e247d1815f43a9d50fd50ac22b?s=128&d=identicon&r=PG&f=1", "display_name": "dumbname92", "link": "https://stackoverflow.com/users/2730377/dumbname92"}, "reply_to_user": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1472607355, "post_id": 39236559, "comment_id": 65815953, "body": "@Raffael:  Sorry, I tried <code>render xml: &quot;&lt;Response&gt;&quot;</code> (an empty TwiML response), <code>@response = &quot;&lt;Response&gt;&quot; render xml: @response.to_xml</code>, <code>respond_with(&quot;&lt;Response&gt;&quot;)</code>"}, {"owner": {"reputation": 205, "user_id": 2730377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5094e247d1815f43a9d50fd50ac22b?s=128&d=identicon&r=PG&f=1", "display_name": "dumbname92", "link": "https://stackoverflow.com/users/2730377/dumbname92"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472611906, "post_id": 39236559, "comment_id": 65816877, "body": "@engineersmnky: <code>format: :xml</code> produced the same error."}, {"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1472626245, "post_id": 39236559, "comment_id": 65821594, "body": "I feel like you only read the first sentence of my two comments. Why do I even bother?"}, {"owner": {"reputation": 205, "user_id": 2730377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5094e247d1815f43a9d50fd50ac22b?s=128&d=identicon&r=PG&f=1", "display_name": "dumbname92", "link": "https://stackoverflow.com/users/2730377/dumbname92"}, "reply_to_user": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1472653127, "post_id": 39236559, "comment_id": 65839904, "body": "@Raffael I tried your suggestions and they didn&#39;t work (thanks anyway).  Sorry I hurt your feeling but if you had bothered to read the question thoroughly you&#39;d know what the expected response is."}, {"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1472675681, "post_id": 39236559, "comment_id": 65853094, "body": "kk, np. Got a bit frustrated because I felt like I could have helped if you had added that log excerpt to your question. Good luck!"}], "owner": {"reputation": 205, "user_id": 2730377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5094e247d1815f43a9d50fd50ac22b?s=128&d=identicon&r=PG&f=1", "display_name": "dumbname92", "link": "https://stackoverflow.com/users/2730377/dumbname92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1472588914, "creation_date": 1472588914, "question_id": 39236559, "link": "https://stackoverflow.com/questions/39236559/how-to-send-an-acceptable-response-when-trying-to-receive-sms-with-twilio-herok", "title": "How to send an acceptable response when trying to receive SMS with Twilio, Heroku, and Rails?", "body": "<p>So I had (most) of the following setup working on a Twilio test number last week.  I was running from localhost:300 using ngrok to receive the POST from twilio.  Everything worked great: didn't need blank-response.xml.erb, just rendered <code>:nothing =&gt; true</code> and the message came in and was handled by the controller - simple.</p>\n\n<p>Today I am trying to deploy the app on heroku (and am switching credentials to a paid account) and keep recieving the following error in the Twilio console:</p>\n\n<pre><code>12200 Schema validation warning\nCvc-elt.1: Cannot find the declaration of element 'html'.\n</code></pre>\n\n<p>I have tried rendering the xml response a half dozen different ways with the most textbook version outlined below.  My problem is the response <strong>never</strong> changes (from what's also listed below).  I don't know if I'm missing something stupid or if Heroku hates Twilio or what and I'm at a loss as to what to do at this point.  Any help is welcome!</p>\n\n<h1>Code samples</h1>\n\n<p>url (Twilio webhook): </p>\n\n<pre><code>http://www.mycoolurl.com/confirmation\n</code></pre>\n\n<p>routes.rb:</p>\n\n<pre><code>post 'confirmation' =&gt; 'appointments#confirm'\n</code></pre>\n\n<p>appointments_controller:</p>\n\n<pre><code>def confirm\n    incoming_message_body = params[\"Body\"]\n    from_number = params[\"From\"]\n\n    if incoming_message_body.downcase.match(\"yes\")\n        puts \"CONFIRMED for #{from_number}\"\n    elsif incoming_message_body.downcase.match(\"no\")\n        puts \"CANCELED for #{from_number}\"\n    end     \n\n    render 'blank-response.xml.erb', :content_type =&gt; 'text/xml'\nend\n</code></pre>\n\n<p>blank-response.xml.erb</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Response&gt;&lt;/Response&gt;\n</code></pre>\n\n<p>Response from my Rails App:</p>\n\n<pre><code>&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\"\n\"http://www.w3.org/TR/html4/strict.dtd\"&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;My Cool Website&lt;/title&gt;\n    &lt;META name=\"description\" content=\"some stupid blurb about this site\"&gt;\n    &lt;META name=\"keywords\" content=\"a bunch of cool keywords\"&gt;\n        &lt;/head&gt;\n        &lt;frameset rows=\"100%,*\" border=\"0\"&gt;\n        &lt;frame src=\"https://cool-name-24253.herokuapp.com/confirmation\" frameborder=\"0\" /&gt;\n            &lt;frame frameborder=\"0\" noresize /&gt;\n        &lt;/frameset&gt;\n        &lt;!-- pageok --&gt;\n        &lt;!-- 06 --&gt;\n        &lt;!-- --&gt;\n    &lt;/html&gt;\n</code></pre>\n"}, {"tags": ["ruby", "parsing", "bigdata"], "comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1472588794, "post_id": 39236494, "comment_id": 65810136, "body": "<a href=\"https://github.com/ohler55/ox\" rel=\"nofollow noreferrer\">github.com/ohler55/ox</a>"}, {"owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "edited": false, "score": 0, "creation_date": 1472590181, "post_id": 39236494, "comment_id": 65810841, "body": "Did you see this post? <a href=\"http://stackoverflow.com/questions/6675128/how-do-i-use-nokogirixmlreader-to-parse-large-xml-files\" title=\"how do i use nokogirixmlreader to parse large xml files\">stackoverflow.com/questions/6675128/&hellip;</a> I usually use Nokogiri and stream the XML."}], "answers": [{"tags": [], "owner": {"reputation": 1321, "user_id": 295249, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4b5d3f44648280afd22cea934becf3f6?s=128&d=identicon&r=PG", "display_name": "Martin Velez", "link": "https://stackoverflow.com/users/295249/martin-velez"}, "is_accepted": false, "score": 2, "last_activity_date": 1472599704, "creation_date": 1472599704, "answer_id": 39238567, "question_id": 39236494, "link": "https://stackoverflow.com/questions/39236494/parsing-of-big-file-with-ruby/39238567#39238567", "title": "Parsing of big file with Ruby", "body": "<p>I parsed a 40GB file using <code>Nokogiri::XML::Reader</code>.</p>\n\n<p>Structure of my XML file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;posts&gt;\n   &lt;row Id=\"4\"&gt;\n   &lt;row Id=\"5\"&gt;\n&lt;/posts&gt;\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>require 'nokogiri'\n\nfname = \"Posts.xml\"\nxml = Nokogiri::XML::Reader(File.open(fname))\nxml.each do |posts|\n  posts.each do |post|\n    next if post.node_type == 14 # TYPE_SIGNIFICANT_WHITESPACE\n    # do something with post\n  end\nend \n</code></pre>\n\n<p>I think the answer depends on how you plan to use the data.  In my case, I simply needed to stream the post nodes.  </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2231831"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505886753, "creation_date": 1472588677, "last_edit_date": 1506102531, "question_id": 39236494, "link": "https://stackoverflow.com/questions/39236494/parsing-of-big-file-with-ruby", "title": "Parsing of big file with Ruby", "body": "<p>I need to parse extremely big XML file (near 50GB), how I can do it with Ruby? It's not possible to split it on chunks, I'v already tried. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested", "fields-for"], "comments": [{"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1472594583, "post_id": 39235979, "comment_id": 65812690, "body": "It would be very useful if you pasted in the models so people can better understand the relationships"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1472686348, "post_id": 39235979, "comment_id": 65857003, "body": "it&#39;s extremely helpful understanding the relationships. but i cannot clearly understand your question."}], "owner": {"reputation": 47, "user_id": 6105893, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a3df7ff9bbb1b204ac3664e7bd45e0d3?s=128&d=identicon&r=PG", "display_name": "Leandro Pons Malheiros", "link": "https://stackoverflow.com/users/6105893/leandro-pons-malheiros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472651764, "creation_date": 1472586620, "last_edit_date": 1472651764, "question_id": 39235979, "link": "https://stackoverflow.com/questions/39235979/nested-fields-without-fields-for", "title": "Nested fields without fields_for", "body": "<p>Well, I have one has_many :through relationship between a Project and a Material models. A Project is composed by X Components(x is the number of sub-divisions that Materials has, and Components are the junction model for Materials/Projects), and I want to filter the other sub-divisions in each collection select, like here :</p>\n\n<p><a href=\"https://i.stack.imgur.com/1reuJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1reuJ.jpg\" alt=\"Collection Select\"></a></p>\n\n<p>The problem is that I cannot put all the fields for each sub-division in the fields_for form, because it would repeat the fields for each instance of Component created, and that's not what I want. Is there a way to set up the nested form without fields_for?</p>\n\n<p>Material Model :</p>\n\n<p><a href=\"https://i.stack.imgur.com/Qxf6W.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Qxf6W.jpg\" alt=\"Material Model\"></a></p>\n\n<p>Project Model :</p>\n\n<p><a href=\"https://i.stack.imgur.com/O1wT7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O1wT7.jpg\" alt=\"Project Model\"></a></p>\n\n<p>Thanks for the attention!</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1472585641, "post_id": 39235657, "comment_id": 65808493, "body": "can&#39;t you save the result from the <code>b</code> method as a constant?"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1472585678, "post_id": 39235657, "comment_id": 65808508, "body": "@davidhu2000 That&#39;s what he is doing in last snippet."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 3, "creation_date": 1472585773, "post_id": 39235657, "comment_id": 65808547, "body": "Just an aside, you shouldn&#39;t use <code>is_</code> prefixes. The method should just be called <code>jpg?</code>."}], "answers": [{"comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1472586313, "post_id": 39235811, "comment_id": 65808860, "body": "Certainly if you assign to a variable it cannot cache the result because reusing the object ID would be inconsistent with the language model. But it could be cached in OP&#39;s first example without harm. I would guess that this is Ruby-VM-dependent."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1472586606, "post_id": 39235811, "comment_id": 65809040, "body": "If I assign to a variable (and not a constant), it&#39;s scope is limited within that method and on each invocation of method, a new space/new-object will spring in existence, even in first example of OP."}], "tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": false, "score": 1, "last_activity_date": 1472587520, "last_edit_date": 1495541875, "creation_date": 1472585930, "answer_id": 39235811, "question_id": 39235657, "link": "https://stackoverflow.com/questions/39235657/ruby-string-literals-cached/39235811#39235811", "title": "ruby string literals cached?", "body": "<p>To answer your question:</p>\n\n<blockquote>\n  <p>Is the ruby interpreter smart enough to cache the result of b()</p>\n</blockquote>\n\n<p>No. It's against the Ruby core concepts. A string literal like that will be treated as new object everytime.</p>\n\n<pre><code>def foo\n  x = 'foo'\n  puts x.object_id\nend\n\n&gt; foo\n70281000268840\n&gt; foo\n70281000264340\n</code></pre>\n\n<p>Your second alternative is the better way to do this. Constant should be defined once. And it will hold single space in memory.</p>\n\n<p>You can also define the same with <code>String::JPG_SIGNATURE = \"\\xFF\\xD8\\xFF\".b</code></p>\n\n<p><strong>Edit</strong>: Read the <a href=\"https://stackoverflow.com/a/39235908/1376448\">kcdragon's answer</a>. He suggested <code>freeze</code> to handle it and benchmark number for same are really pretty!</p>\n"}, {"comments": [{"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1472587273, "post_id": 39235908, "comment_id": 65809391, "body": "Awesome. Didn&#39;t know freeze could be used in this too."}], "tags": [], "owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "is_accepted": false, "score": 3, "last_activity_date": 1472586300, "creation_date": 1472586300, "answer_id": 39235908, "question_id": 39235657, "link": "https://stackoverflow.com/questions/39235657/ruby-string-literals-cached/39235908#39235908", "title": "ruby string literals cached?", "body": "<p>No, by default Ruby will create a new copy of the <code>String</code> but you can prevent this by freezing the <code>String</code></p>\n\n<pre><code>class String\n  def is_jpg?\n    start_with? \"\\xFF\\xD8\\xFF\".freeze.b\n  end\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>class String\n  JPG_SIGNATURE = \"\\xFF\\xD8\\xFF\".freeze.b\n  def is_jpg?\n    start_with? JPG_SIGNATURE\n  end\nend\n</code></pre>\n\n<p>You can read more about this in this article. <a href=\"http://blog.honeybadger.io/when-to-use-freeze-and-frozen-in-ruby/\" rel=\"nofollow\">http://blog.honeybadger.io/when-to-use-freeze-and-frozen-in-ruby/</a></p>\n"}, {"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1472587635, "creation_date": 1472587635, "answer_id": 39236234, "question_id": 39235657, "link": "https://stackoverflow.com/questions/39235657/ruby-string-literals-cached/39236234#39236234", "title": "ruby string literals cached?", "body": "<p>I benchmarked three implementations: normal without optimization, using a const, and using a frozen string.</p>\n\n<pre><code>            user     system      total        real\nnormal  0.270000   0.000000   0.270000 (  0.272052)\nconst   0.160000   0.000000   0.160000 (  0.155427)\nfreeze  0.240000   0.000000   0.240000 (  0.238170)\n</code></pre>\n\n<p>It appears that on my machine using the official Ruby VM, the string is not cached because using a const does provide a speed boost. Freezing the string also provides a boost but a substantially smaller one.</p>\n\n<p>Note that I had to call the method <em>millions</em> of times in order to see any appreciable difference. I would classify this as premature optimization unless your profiling has showed this specific method to be a serious bottleneck.</p>\n"}], "owner": {"reputation": 1913, "user_id": 190758, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b59befb7ff007ff9d3ba609206d30529?s=128&d=identicon&r=PG", "display_name": "jph", "link": "https://stackoverflow.com/users/190758/jph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1472587635, "creation_date": 1472585384, "last_edit_date": 1472585537, "question_id": 39235657, "link": "https://stackoverflow.com/questions/39235657/ruby-string-literals-cached", "title": "ruby string literals cached?", "body": "<p>I have code of this form:</p>\n\n<pre><code>class String\n  def is_jpg?\n    start_with? \"\\xFF\\xD8\\xFF\".b\n  end\nend\n</code></pre>\n\n<p>String#b returns a copy of a string but encoded as ASCII-8BIT.  My question</p>\n\n<p>Is the ruby interpreter smart enough to cache the result of b() in the example above such that calls to this method for different String instances don't have to create a new copy of \"\\xFF\\xD8\\xFF\" each time?  Or should I do something like:</p>\n\n<pre><code>class String\n  JPG_SIGNATURE = \"\\xFF\\xD8\\xFF\".b\n  def is_jpg?\n    start_with? JPG_SIGNATURE\n  end\nend\n</code></pre>\n\n<p>Does the answer depend on the ruby version and/or interpreter?  I'm using MRI 2.2.x soon to be 2.3.x.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "bitnami"], "comments": [{"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1472586117, "post_id": 39235176, "comment_id": 65808750, "body": "Did you restart the server?"}, {"owner": {"reputation": 95, "user_id": 6763750, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c0fe498419fcc4b294635ad689ce0118?s=128&d=identicon&r=PG&f=1", "display_name": "itchyspacesuit", "link": "https://stackoverflow.com/users/6763750/itchyspacesuit"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1472586151, "post_id": 39235176, "comment_id": 65808765, "body": "Yup sorry should have mentioned that."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1472587415, "post_id": 39235176, "comment_id": 65809458, "body": "<code>&#47;welcome&#47;index</code> brings the right page?"}, {"owner": {"reputation": 95, "user_id": 6763750, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c0fe498419fcc4b294635ad689ce0118?s=128&d=identicon&r=PG&f=1", "display_name": "itchyspacesuit", "link": "https://stackoverflow.com/users/6763750/itchyspacesuit"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1472589170, "post_id": 39235176, "comment_id": 65810335, "body": "I&#39;m not sure I know what you mean. I tried accessing serverip:3000/welcome/index and I get No route matches [GET] &quot;/welcome/index&quot;  Rails.root: /opt/bitnami/projects/sample  Application Trace | Framework Trace | Full Trace Routes  Routes match in priority from top to bottom  You don&#39;t have any routes defined!  Please add some routes in config/routes.rb.  This would indicate to me that the root is still not set properly but I don&#39;t know how I could set it other than what I have added to the routes.rb file.... Please let me know if you have any thoughts!"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1472589467, "post_id": 39235176, "comment_id": 65810477, "body": "Your <code>routes.rb</code> is correct and it should work. Only possibility I can think of - This code is not checked in at the place you are running this server at."}, {"owner": {"reputation": 95, "user_id": 6763750, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c0fe498419fcc4b294635ad689ce0118?s=128&d=identicon&r=PG&f=1", "display_name": "itchyspacesuit", "link": "https://stackoverflow.com/users/6763750/itchyspacesuit"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1472589669, "post_id": 39235176, "comment_id": 65810578, "body": "Wow. yup you were right. I was running a script to start the server which I had mistakenly set up to run from the sample folder. Thank you so much for your help. Maybe you could add an answer so I can give you some points for your trouble."}], "answers": [{"tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": true, "score": 0, "last_activity_date": 1472589940, "creation_date": 1472589940, "answer_id": 39236800, "question_id": 39235176, "link": "https://stackoverflow.com/questions/39235176/does-anyone-know-why-a-default-rails-app-on-the-bitnami-stack-would-refuse-to-al/39236800#39236800", "title": "Does anyone know why a default rails app on the bitnami stack would refuse to allow the app root to be set?", "body": "<p>Two possibilities:</p>\n\n<ol>\n<li>You didn't restart the rails server after you generated controller. Though, <code>/welcome/index</code> etc should still work without restart.</li>\n<li>Your server is running from directory which doesn't have this code checked in. As your error log doesn't reports absence of routes altogether.</li>\n</ol>\n"}], "owner": {"reputation": 95, "user_id": 6763750, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c0fe498419fcc4b294635ad689ce0118?s=128&d=identicon&r=PG&f=1", "display_name": "itchyspacesuit", "link": "https://stackoverflow.com/users/6763750/itchyspacesuit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 39236800, "answer_count": 1, "score": 0, "last_activity_date": 1472589940, "creation_date": 1472583666, "question_id": 39235176, "link": "https://stackoverflow.com/questions/39235176/does-anyone-know-why-a-default-rails-app-on-the-bitnami-stack-would-refuse-to-al", "title": "Does anyone know why a default rails app on the bitnami stack would refuse to allow the app root to be set?", "body": "<p>I have just begun using rails so I apologize if this is a dumb question, but I have been googling for a few hours and I'm starting to get really frustrated. </p>\n\n<p>I've set up an AWS Bitnami Rails stack using the free one on the AWS Marketplace, and I've been following the tutorial at <a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow\">http://guides.rubyonrails.org/getting_started.html</a> to start getting my head around running an app functionally. (I've already done rails for zombies and ruby 101)</p>\n\n<p>Basically, I get to section 4.3 which is supposed to set me up with the basic routing for the app and I can't seem to get it to work. No matter what I put in the routing file of the welcome_controller, the app just serves the template index file located at <code>/opt/bitnami/ruby/lib/ruby/gems/2.3.0/gems/railties-4.2.5.1/lib/rails/templates/rails/welcome/index.html.erb</code> </p>\n\n<p>My routes.rb file is </p>\n\n<pre><code>Rails.application.routes.draw do\n\n  get 'welcome/index'\n\n  # The priority is based upon order of creation: first created -&gt; highest priority.\n  # See how all your routes lay out with \"rake routes\".\n\n  # You can have the root of your site routed with \"root\"\n  root 'welcome#index'\n</code></pre>\n\n<p>and my welcome_controller is</p>\n\n<pre><code>    class WelcomeController &lt; ApplicationController\n  def index\n  end\nend\n</code></pre>\n\n<p>I really hope someone can help. </p>\n\n<p>I'm guessing this is some sort of really stupid config error but I have a feeling others might have it as well so maybe this could be of use in the future.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "is_accepted": false, "score": 4, "last_activity_date": 1472583330, "creation_date": 1472583330, "answer_id": 39235101, "question_id": 39235038, "link": "https://stackoverflow.com/questions/39235038/ruby-on-rails-tutorial-if-user-id-sessionuser-id/39235101#39235101", "title": "Ruby on Rails tutorial if (user_id = session[:user_id])", "body": "<p>You are allowed to use the assignment operator in an <code>if</code> statement because an assignment is an expression. The result of the assignment expression is the value of what you are assigning.</p>\n\n<p>In this case, if <code>session[:user_id]</code> is not <code>nil</code> or <code>false</code>, the result of the <code>if</code> branch will be called and <code>user_id</code> will be set to the result of <code>session[:user_id]</code>. If <code>session[:user_id]</code> is <code>nil</code> or <code>false</code> it will still be assigned to <code>user_id</code> but the logic inside the <code>if</code> will not evaluate.</p>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 6483534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e412bcc5112603d95c87d380a48f43c?s=128&d=identicon&r=PG&f=1", "display_name": "PS.", "link": "https://stackoverflow.com/users/6483534/ps"}, "is_accepted": false, "score": 0, "last_activity_date": 1472583333, "creation_date": 1472583333, "answer_id": 39235103, "question_id": 39235038, "link": "https://stackoverflow.com/questions/39235038/ruby-on-rails-tutorial-if-user-id-sessionuser-id/39235103#39235103", "title": "Ruby on Rails tutorial if (user_id = session[:user_id])", "body": "<p>I believe this is what the assignment operator is trying to say... This is saying that if @current_user value is null, then set that equal to user_id. Otherwise, keep the @current_user value. You can read it as <code>@current_user = @current_user || User.find_by(id: user_id)</code></p>\n"}, {"tags": [], "owner": {"reputation": 745, "user_id": 3033467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8a33988a3dc0d009236304ff4ad8d615?s=128&d=identicon&r=PG&f=1", "display_name": "user3033467", "link": "https://stackoverflow.com/users/3033467/user3033467"}, "is_accepted": false, "score": 1, "last_activity_date": 1472583375, "creation_date": 1472583375, "answer_id": 39235118, "question_id": 39235038, "link": "https://stackoverflow.com/questions/39235038/ruby-on-rails-tutorial-if-user-id-sessionuser-id/39235118#39235118", "title": "Ruby on Rails tutorial if (user_id = session[:user_id])", "body": "<p>This is equivalent to doing this:</p>\n\n<pre><code>user_id = session[:user_id]\nif user_id\n  @current_user ||= User.find_by(id: user_id)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1472583980, "post_id": 39235128, "comment_id": 65807530, "body": "It&#39;s not exactly the same. In the first example user_id&#39;s scope is just the body of the if. In the latter user_id is defined after the if as well."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1472584262, "post_id": 39235128, "comment_id": 65807686, "body": "@Ursus: wrong. Give it a try in irb. <code>if</code> is not a scope-gate in Ruby. A new scope is created whenever you define a class, module, or method. Read more about that in Scope Gate section here - <a href=\"http://hopsoft.github.io/blog/ruby-metaprogramming-idioms/\" rel=\"nofollow noreferrer\">hopsoft.github.io/blog/ruby-metaprogramming-idioms</a>"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 1, "creation_date": 1472584506, "post_id": 39235128, "comment_id": 65807846, "body": "<code>x = false; puts &#39;foo&#39; if (y=x); y #=&gt; false</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1472584540, "post_id": 39235128, "comment_id": 65807869, "body": "It&#39;s important to note that logically true and false in Ruby are quite different from other languages, they&#39;re unusually strict. The only logically false values are <code>nil</code> and <code>false</code>, that&#39;s it. 0, an empty string or array, they&#39;re all considered <i>truthful</i> from a logical perspective."}], "tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": true, "score": 7, "last_activity_date": 1472583440, "creation_date": 1472583440, "answer_id": 39235128, "question_id": 39235038, "link": "https://stackoverflow.com/questions/39235038/ruby-on-rails-tutorial-if-user-id-sessionuser-id/39235128#39235128", "title": "Ruby on Rails tutorial if (user_id = session[:user_id])", "body": "<p>This is one of the syntactic sugar in Ruby. </p>\n\n<p>Ruby allows you to assign variables in conditionals and returns the value</p>\n\n<p><code>x = true #=&gt; returns true</code></p>\n\n<pre><code>if (user_id = session[:user_id])\n  @current_user ||= User.find_by(id: user_id)\nend\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>user_id = session[:user_id]\nif user_id\n  @current_user ||= User.find_by(id: user_id)\nend\n</code></pre>\n\n<p>Saves you a line. \nIn case, <code>session[:user_id]</code> is falsy, it assigns the false value to <code>user_id</code> and doesn't execute the block.</p>\n"}], "owner": {"reputation": 43, "user_id": 4759396, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Jl9XQ.png?s=128&g=1", "display_name": "Simonas", "link": "https://stackoverflow.com/users/4759396/simonas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 0, "accepted_answer_id": 39235128, "answer_count": 4, "score": 1, "last_activity_date": 1472591614, "creation_date": 1472583077, "last_edit_date": 1472591614, "question_id": 39235038, "link": "https://stackoverflow.com/questions/39235038/ruby-on-rails-tutorial-if-user-id-sessionuser-id", "title": "Ruby on Rails tutorial if (user_id = session[:user_id])", "body": "<p>I am following <a href=\"https://www.railstutorial.org/book\" rel=\"nofollow\">ruby on rails</a> tutorial by Michael Hartl and I don't get how he's using assignment operator inside if condintion:</p>\n\n<pre><code>if (user_id = session[:user_id])\n      @current_user ||= User.find_by(id: user_id)\nend\n</code></pre>\n\n<p>Can someone please explain the logic behind it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "edited": false, "score": 1, "creation_date": 1472582418, "post_id": 39234591, "comment_id": 65806742, "body": "What does your Gemfile look like?"}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1472582712, "post_id": 39234591, "comment_id": 65806904, "body": "check out this <a href=\"https://github.com/rbenv/rbenv/issues/364\" rel=\"nofollow noreferrer\">link</a>. It may be a file path issue."}], "owner": {"reputation": 127, "user_id": 6762037, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Ti4ZjJMl88k/AAAAAAAAAAI/AAAAAAAAAAs/txwyCYI7DCk/photo.jpg?sz=128", "display_name": "Juan del Carmen Grados V&#225;squez", "link": "https://stackoverflow.com/users/6762037/juan-del-carmen-grados-v%c3%a1squez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1472637771, "creation_date": 1472581464, "last_edit_date": 1472637771, "question_id": 39234591, "link": "https://stackoverflow.com/questions/39234591/why-does-bundle-install-fail-and-force-me-to-gem-install-myself", "title": "Why does &#39;bundle install&#39; fail and force me to &#39;gem install&#39; myself?", "body": "<p>I have executed the command </p>\n\n<pre><code>bundle install \n</code></pre>\n\n<p>In my Ruby on Rails projects, and I get the following error message</p>\n\n<pre><code>An error occurred while installing bcrypt (3.1.10), and Bundler cannot continue. \nMake sure that `gem install bcrypt -v '3.1.10'` succeeds before bundling.\n</code></pre>\n\n<p>After executing</p>\n\n<pre><code>gem install bcrypt -v '3.1.10'\n</code></pre>\n\n<p>the problem disappears. My question is why it's necessary sometimes to install some gems in a direct way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472581528, "post_id": 39234354, "comment_id": 65806298, "body": "hard to say how you should keep track of the ids without knowing your use case. But saving them to a file seems a reasonable enough approach."}], "answers": [{"comments": [{"owner": {"reputation": 8066, "user_id": 4272549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1hvwh.jpg?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4272549/123"}, "edited": false, "score": 0, "creation_date": 1472582009, "post_id": 39234592, "comment_id": 65806535, "body": "So there&#39;s no way to do something like: <code>invalidIds = &quot;model_type_id NOT IN (#{validIdList})&quot;</code>"}, {"owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "edited": false, "score": 0, "creation_date": 1472582731, "post_id": 39234592, "comment_id": 65806912, "body": "You should not make a list of all the possible wrong ids. Your ID is a number up-to 2^64 ( or 1.84 x 10^19 ) minus the number of valid IDs. The computing required could render your site useless."}, {"owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "edited": false, "score": 0, "creation_date": 1472582763, "post_id": 39234592, "comment_id": 65806930, "body": "I may not understand what it is you are trying to do, it seems like you are mixing index/show responsibilities together.  Is this a search action?"}], "tags": [], "owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "is_accepted": false, "score": 1, "last_activity_date": 1472581981, "last_edit_date": 1472581981, "creation_date": 1472581465, "answer_id": 39234592, "question_id": 39234354, "link": "https://stackoverflow.com/questions/39234354/ror-keep-track-of-invalid-id-s-in-index-method/39234592#39234592", "title": "RoR - Keep track of invalid ID &#39;s in index method", "body": "<p>if you have standard resources <code>resources :something</code> then if you mean an invalid route like this</p>\n\n<p><code>/something/#{invalid_id}</code></p>\n\n<p>Then you will not catch these in the index action, they will be in the show action.  You could accomplish this in a <code>before_filter</code> in order to slightly reduce the amount of conditional logic in your show action.  </p>\n\n<p>In controller</p>\n\n<p><code>before_filter :check_valid_id, only: [:show]</code></p>\n\n<p>and in your private section of controller</p>\n\n<p><code>def check_valid_id\n  unless find_something\n    log(params[:id])\n    redirect_to :index\n  end\nend\n</code></p>\n\n<p>You may also want to check_valid_id in other member routes such as edit, update, destroy and provide a flash message that the id was invalid</p>\n"}], "owner": {"reputation": 8066, "user_id": 4272549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1hvwh.jpg?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4272549/123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472581981, "creation_date": 1472580592, "last_edit_date": 1472581034, "question_id": 39234354, "link": "https://stackoverflow.com/questions/39234354/ror-keep-track-of-invalid-id-s-in-index-method", "title": "RoR - Keep track of invalid ID &#39;s in index method", "body": "<p>I want my <code>index()</code> method to let me know when an invalid ID has been passed in, but I don't want the page to barf with a 500.  I want (and have set up) the index method to skip model ID's it's unaware of - However, I want to keep track of those invalid model ID's somehow.  </p>\n\n<pre><code>authorize :read\ndef index\n  modelIds = []\n  validIdList = \"\"\n  models = ModelType.get_all_model_names()\n  models.each do |model|\n    id = ModelType.get_id(model)\n    modelIds.push(id)\n  end\n  validIdList = modelIds.join(', ')\n  @filter = \"model_type_id IN (#{validIdList})\"\nend\n</code></pre>\n\n<p>How can I keep track of the invalid ID's that <code>index()</code> runs into?</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472840030, "post_id": 39234325, "comment_id": 65930985, "body": "Don&#39;t forget to actually accept answers by clicking the checkmark. This allows the question to be shown as answered. You seem to utilize this community for answers but habitually forgo the respect of accepting them as accurate."}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 3636388, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6466644a0ef8d77f6e2dfbb0ae0e8554?s=128&d=identicon&r=PG&f=1", "display_name": "user3636388", "link": "https://stackoverflow.com/users/3636388/user3636388"}, "edited": false, "score": 0, "creation_date": 1472581836, "post_id": 39234464, "comment_id": 65806451, "body": "Thanks! That helps"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1472582386, "last_edit_date": 1472582386, "creation_date": 1472580977, "answer_id": 39234464, "question_id": 39234325, "link": "https://stackoverflow.com/questions/39234325/how-to-array-wrap-an-hash-of-hashes/39234464#39234464", "title": "How to array_wrap an hash of hashes", "body": "<p>This should do it:</p>\n\n<pre><code>hash = {\"C\"=&gt;{\"CPS\"=&gt;{\"CP\"=&gt;{\"name\"=&gt;\"a\"}}}}\nval = hash[\"C\"][\"CPS\"][\"CP\"]\nval_as_arr = [val] # can optionally call flatten here\nhash[\"C\"][\"CPS\"][\"CP\"] = val_as_arr\nputs hash\n# =&gt; {\"C\"=&gt;{\"CPS\"=&gt;{\"CP\"=&gt; [{\"name\" =&gt; \"a\"}] }}}\n</code></pre>\n\n<p>basically</p>\n\n<ol>\n<li>get the value</li>\n<li>convert to array</li>\n<li>set the value</li>\n</ol>\n\n<p>There is no iteration required here i.e. <code>map</code> or <code>reduce</code></p>\n"}, {"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472583089, "post_id": 39234726, "comment_id": 65807094, "body": "Thanks for sharing that is a useful patterns for nested hashes"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472650575, "post_id": 39234726, "comment_id": 65838006, "body": "@maxpleaner Updated my answer to provide a more flexible version."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 3, "last_activity_date": 1472684341, "last_edit_date": 1472684341, "creation_date": 1472581931, "answer_id": 39234726, "question_id": 39234325, "link": "https://stackoverflow.com/questions/39234325/how-to-array-wrap-an-hash-of-hashes/39234726#39234726", "title": "How to array_wrap an hash of hashes", "body": "<p>Another option is to use <code>tap</code> </p>\n\n<pre><code>inv[\"C\"][\"CPS\"].tap do |h|\n  h[\"CP\"] = [h[\"CP\"]] #or Array.wrap(h[\"CP\"]) in rails\nend\ninv\n#=&gt; {\"C\"=&gt;{\"CPS\"=&gt;{\"CP\"=&gt;[{\"name\"=&gt;\"a\"}]}}} \n</code></pre>\n\n<p><code>tap</code> will yield the current object so you can modify it in place.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Inspired by @CarySwoveland's broader application you could use something like this as well. </p>\n\n<pre><code>class HashWrapper\n  attr_reader :original_hash\n  attr_accessor :target_keys\n\n  def initialize(h,*target_keys)\n    @original_hash = h \n    @target_keys = target_keys\n  end\n\n  def wrapped_hash\n    @wrapped_hash ||= {}\n  end\n\n  def wrap_me\n    original_hash.each do |k,v|\n      value = v.is_a?(Hash) ? HashWrapper.new(v,*target_keys).wrap_me : v\n      wrapped_hash[k] = wrap(k,value)\n    end\n    wrapped_hash\n  end\nprivate\n  def wrap(k,v)\n    target_keys.include?(k) ? [v] : v\n  end\nend\n</code></pre>\n\n<p>Then implementation is as follows</p>\n\n<pre><code>wrapper = HashWrapper.new(inv,\"CP\")\nwrapper.wrap_me\n#=&gt; {\"C\"=&gt;\n      {\"CPS\"=&gt;\n        {\"CP\"=&gt;\n           [\n            {\"name\"=&gt;\"a\"}\n           ]\n        }\n      }\n    } \nnew_wrapper = HashWrapper.new(inv,\"CP\",\"CPS\")\nnew_wrapper.wrap_me\n#=&gt; {\"C\"=&gt;\n      {\"CPS\"=&gt;\n         [\n           {\"CP\"=&gt;\n             [\n              {\"name\"=&gt;\"a\"}\n             ]\n           }\n         ]\n      }\n    }\n</code></pre>\n\n<p>This assumes unique keys all the way through the hierarchy otherwise nested keys of the same name will be wrapped in the same fashion from the bottom up.\ne.g.</p>\n\n<pre><code>inv = {\"C\"=&gt;{\"CPS\"=&gt;{\"CP\"=&gt;{\"name\"=&gt;\"a\"}},\"CP\" =&gt; \"higher level\"}}\nHashWrapper.new(inv,\"CP\").wrap_me\n#=&gt; {\"C\"=&gt;\n      {\"CPS\"=&gt;\n        {\"CP\"=&gt;\n           [\n             {\"name\"=&gt;\"a\"}\n           ]\n      }, \n      \"CP\"=&gt;\n        [\n         \"higher level\" \n        ]\n      }\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472650031, "post_id": 39235473, "comment_id": 65837591, "body": "While this does not seem to produce the desired result you did inspire me to write a far more flexible version see my updated answer."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1472585798, "last_edit_date": 1472585798, "creation_date": 1472584710, "answer_id": 39235473, "question_id": 39234325, "link": "https://stackoverflow.com/questions/39234325/how-to-array-wrap-an-hash-of-hashes/39235473#39235473", "title": "How to array_wrap an hash of hashes", "body": "<p>I suggest you use recursion, in the form of a compact and easily readable method that has broader application than solutions that only work with your specific hash.</p>\n\n<pre><code>def wrap_it(h)\n  h.each { |k,v| h[k] = v.is_a?(Hash) ? wrap_it(v) : [v] }\n  h\nend\n\nh = { \"C\"=&gt;{ \"CPS\"=&gt;{ \"CP\"=&gt;{ \"name\"=&gt;\"a\" } } } }\nwrap_it(h)\n  #=&gt; {\"C\"=&gt;{\"CPS\"=&gt;{\"CP\"=&gt;{\"name\"=&gt;[\"a\"]}}}}\n\nh = { \"C\"=&gt;{ \"CPS\"=&gt;{ \"CP\"=&gt;{ \"CPPS\"=&gt; { \"name\"=&gt;\"cat\" } } } } }\nwrap_it(h)\n  #=&gt; {\"C\"=&gt;{\"CPS\"=&gt;{\"CP\"=&gt;{\"CPPS\"=&gt;{\"name\"=&gt;[\"cat\"]}}}}}\n\nh = { \"C\"=&gt;{ \"CPS\"=&gt;{ \"CP\"=&gt;{ \"CPPS\"=&gt; { \"name\"=&gt;\"cat\" } },\n                      \"DP\"=&gt;{ \"CPPPS\"=&gt;\"dog\" } } } }\nwrap_it(h)\n  #=&gt; {\"C\"=&gt;{\"CPS\"=&gt;{\"CP\"=&gt;{\"CPPS\"=&gt;{\"name\"=&gt;[\"cat\"]}}, \"DP\"=&gt;{\"CPPPS\"=&gt;[\"dog\"]}}}}\n</code></pre>\n"}], "owner": {"reputation": 154, "user_id": 3636388, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6466644a0ef8d77f6e2dfbb0ae0e8554?s=128&d=identicon&r=PG&f=1", "display_name": "user3636388", "link": "https://stackoverflow.com/users/3636388/user3636388"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1472684341, "creation_date": 1472580473, "last_edit_date": 1472581119, "question_id": 39234325, "link": "https://stackoverflow.com/questions/39234325/how-to-array-wrap-an-hash-of-hashes", "title": "How to array_wrap an hash of hashes", "body": "<pre><code>inv = {\"C\"=&gt;{\"CPS\"=&gt;{\"CP\"=&gt;{\"name\"=&gt;\"a\"}}}} is my object\n</code></pre>\n\n<p>I want</p>\n\n<pre><code>inv = {\"C\"=&gt;{\"CPS\"=&gt;{\"CP\"=&gt;[{\"name\"=&gt;\"a\"}]}}}\n</code></pre>\n\n<p>I tried</p>\n\n<pre><code>inv[\"C\"][\"CPS\"].inject({}) do |result, (k, v)|\n  k = Array.wrap(v)\nend\n\n=&gt;  [{\"name\"=&gt;\"a\"}]\n</code></pre>\n\n<p>but still <code>inv={\"C\"=&gt;{\"CPS\"=&gt;{\"CP\"=&gt;{\"name\"=&gt;\"a\"}}}}</code></p>\n\n<p>tries <code>map</code> also</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 1513, "user_id": 1334750, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0vTHg.png?s=128&g=1", "display_name": "Pawe\u0142 Duda", "link": "https://stackoverflow.com/users/1334750/pawe%c5%82-duda"}, "edited": false, "score": 1, "creation_date": 1472581797, "post_id": 39234300, "comment_id": 65806427, "body": "You seem to have an extra &lt;% end %&gt; tag in the first code snippet"}, {"owner": {"reputation": 79, "user_id": 6470117, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/770318833089384/picture?type=large", "display_name": "Marcos Collado", "link": "https://stackoverflow.com/users/6470117/marcos-collado"}, "reply_to_user": {"reputation": 1513, "user_id": 1334750, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0vTHg.png?s=128&g=1", "display_name": "Pawe\u0142 Duda", "link": "https://stackoverflow.com/users/1334750/pawe%c5%82-duda"}, "edited": false, "score": 0, "creation_date": 1472583553, "post_id": 39234300, "comment_id": 65807302, "body": "I have added and removed every single one of them trying to track it but it didnt seem to work could you please point out wich?"}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 2, "creation_date": 1472583990, "post_id": 39234300, "comment_id": 65807534, "body": "at the end of first group of code, you have <code>&lt;%end%&gt;</code> followed on the next line by <code>&lt;% end %&gt;</code>, you should only have one."}, {"owner": {"reputation": 79, "user_id": 6470117, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/770318833089384/picture?type=large", "display_name": "Marcos Collado", "link": "https://stackoverflow.com/users/6470117/marcos-collado"}, "edited": false, "score": 0, "creation_date": 1472585691, "post_id": 39234300, "comment_id": 65808516, "body": "I managed to fix it with your help guys, thank you very much"}], "owner": {"reputation": 79, "user_id": 6470117, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/770318833089384/picture?type=large", "display_name": "Marcos Collado", "link": "https://stackoverflow.com/users/6470117/marcos-collado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472584622, "creation_date": 1472580387, "last_edit_date": 1472584622, "question_id": 39234300, "link": "https://stackoverflow.com/questions/39234300/attempting-to-link-projects-to-show", "title": "Attempting to link projects to show", "body": "<p>So I have a list of projects, and I try to make an each do in wich each of them should lead to its own project, but instead I get an error 'unexpected keyword_ensure', expecting end-of-input</p>\n\n<p>, however, I keep checking them all and none seems to be missing.</p>\n\n<p></p>\n\n<pre><code>    &lt;h1 id=title&gt;Projects&lt;/h1&gt;\n        &lt;div id=\"post_wrap\" class=\"skiny_wrap\"&gt;\n            &lt;% @projects.each do |project|  %&gt;\n                &lt;div class=\"post\"&gt;\n                    &lt;h2 class=\"name\"&gt;&lt;%= project.name %&gt; &lt;/h2&gt;\n                    &lt;p class=\"description\"&gt;&lt;%= project.description %&gt; &lt;/p&gt;\n\n                    &lt;% if project.has_photo? %&gt;\n                         &lt;%= link_to project.name, project do %&gt;\n                                 &lt;div class=\"img_container\" style=\"background-image: url(/photo_store/&lt;%=project1.id%&gt;.&lt;%=project1.extension%&gt;)\"&gt;&lt;/div&gt;\n                         &lt;% end %&gt;\n                    &lt;%else%&gt;\n                            &lt;p&gt; theres nothing here &lt;/p&gt;\n\n                    &lt;%end%&gt;\n\n                    &lt;p class=\"category\"&gt;&lt;%= project1.category %&gt; &lt;/p&gt;\n                    &lt;p class=\"date\"&gt;&lt;%= project1.created_at.strftime('%A, %B %d') %&gt; &lt;/p&gt;\n                    &lt;hr&gt;\n                &lt;/div&gt;\n                &lt;%end%&gt;\n                &lt;% end %&gt;\n\n        &lt;/div&gt;\n</code></pre>\n\n<p>What is going wrong? I can imagine one, is that that is not how you are meant to link to show however it is what my investigation lead to, please help me out.</p>\n\n<pre><code>&lt;br&gt;&lt;br&gt;\n&lt;h2&gt;&lt;%=@project.name%&gt;&lt;/h2&gt;\n&lt;br&gt;\n&lt;%=@project.link%&gt;\n&lt;br&gt;&lt;br&gt;\n&lt;%=@project.description%&gt;\n&lt;br&gt;&lt;br&gt;\nTheme: &lt;%=@project.category%&gt;\n&lt;br&gt;&lt;br&gt;\n&lt;%= link_to \"Edit\", edit_post_path(@project) %&gt;\n&lt;%= link_to \"Delete\", post_path(@project), method: :delete, data:{ } %&gt;\n</code></pre>\n\n<p>That is the Erb to the show, as you can see is very simple..</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "scaffold"], "answers": [{"comments": [{"owner": {"reputation": 1498, "user_id": 3719597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7bLC.jpg?s=128&g=1", "display_name": "ollpu", "link": "https://stackoverflow.com/users/3719597/ollpu"}, "edited": false, "score": 0, "creation_date": 1472583745, "post_id": 39234328, "comment_id": 65807405, "body": "In the controller, you can do: <code>Timesheet.new(user: current_user.email)</code> (in the new-action in place of <code>Timesheet.new</code>), to preset the value. The user can still change it in the form, though."}], "tags": [], "owner": {"reputation": 1498, "user_id": 3719597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7bLC.jpg?s=128&g=1", "display_name": "ollpu", "link": "https://stackoverflow.com/users/3719597/ollpu"}, "is_accepted": true, "score": 1, "last_activity_date": 1472580501, "creation_date": 1472580501, "answer_id": 39234328, "question_id": 39234246, "link": "https://stackoverflow.com/questions/39234246/rails-modify-scaffold-form/39234328#39234328", "title": "Rails Modify Scaffold Form", "body": "<p>The form is in an automatically generated partial, located in <code>app/views/timesheets/_form.html.erb</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 44, "user_id": 6768800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46c224a1a2c8ec3cecb66ac360d6595e?s=128&d=identicon&r=PG&f=1", "display_name": "SignorHarry", "link": "https://stackoverflow.com/users/6768800/signorharry"}, "is_accepted": false, "score": 0, "last_activity_date": 1472586113, "creation_date": 1472586113, "answer_id": 39235863, "question_id": 39234246, "link": "https://stackoverflow.com/questions/39234246/rails-modify-scaffold-form/39235863#39235863", "title": "Rails Modify Scaffold Form", "body": "<p>Ok, in: app/views/timesheets - you should find your form. If you change something in form, check it with your 'new' merhod (or with last method - if you didn't change/add anything: this method will get your params) in controller.</p>\n"}, {"tags": [], "owner": {"reputation": 4562, "user_id": 1660318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nKue0.jpg?s=128&g=1", "display_name": "Nesha Zoric", "link": "https://stackoverflow.com/users/1660318/nesha-zoric"}, "is_accepted": false, "score": 0, "last_activity_date": 1519297539, "creation_date": 1519297539, "answer_id": 48925859, "question_id": 39234246, "link": "https://stackoverflow.com/questions/39234246/rails-modify-scaffold-form/48925859#48925859", "title": "Rails Modify Scaffold Form", "body": "<p>When you run </p>\n\n<pre><code>$rails generate scaffold &lt;name&gt;\n</code></pre>\n\n<p>you will auto-generate a ready to use controller, model, and views with a full CRUD (Create, Read, Update, Delete) web interface.</p>\n\n<p>You can modify each of the CRUD operations to your liking, in your case timesheets view which is located in app/views/timesheets/.</p>\n"}], "owner": {"reputation": 117, "user_id": 821757, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/2a46645c27ad78735036b9f52f0207c4?s=128&d=identicon&r=PG", "display_name": "Dango", "link": "https://stackoverflow.com/users/821757/dango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 0, "accepted_answer_id": 39234328, "answer_count": 3, "score": 0, "last_activity_date": 1519297539, "creation_date": 1472580229, "question_id": 39234246, "link": "https://stackoverflow.com/questions/39234246/rails-modify-scaffold-form", "title": "Rails Modify Scaffold Form", "body": "<p>Using rails 5.0.0 for building a simple timecard module for a web application.  My question is how do I go about modifying a form which is automatically being rendered by rails scaffold </p>\n\n<pre><code>rails g scaffold Timesheet user:string clock:string time:datetime \n</code></pre>\n\n<p>=== new.html.erb file ===</p>\n\n<pre><code>&lt;%= render 'form', timesheet: @timesheet %&gt;\n</code></pre>\n\n<p>In the user string want to add &lt;%= current_user.email %> and in clock string want to add a drop-down?  What is the best way to do this? Already have database table in place etc... </p>\n\n<p>Illustration below </p>\n\n<p><a href=\"https://i.stack.imgur.com/aGGDe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aGGDe.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 0, "creation_date": 1472580499, "post_id": 39234180, "comment_id": 65805734, "body": "You always get <code>false</code> when you <code>require &#39;bigdecimal&#39;</code>?"}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "reply_to_user": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 0, "creation_date": 1472580552, "post_id": 39234180, "comment_id": 65805763, "body": "It&#39;s the first Im requiring it so I dont know if I should see either true or false. But now, it&#39;s always false."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472582532, "post_id": 39234180, "comment_id": 65806805, "body": "Not getting this error. Tried <code>ruby 2.0.0p247 (2013-06-27 revision 41674) [x86_64-linux]</code> and <code>ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]</code>. Are you <b>sure</b> that this is the line causing the error?"}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472582627, "post_id": 39234180, "comment_id": 65806860, "body": "@maxpleaner To confirm, a gem in my gemfile is causing this so it&#39;s not ruby issue at all. Sorry for the troubles."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472583019, "post_id": 39234180, "comment_id": 65807052, "body": "I wouldn&#39;t say it&#39;s not a ruby issue if it&#39;s a gem. But if you got it sorted out I&#39;m glad"}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472583722, "post_id": 39234180, "comment_id": 65807386, "body": "@maxpleaner Not as yet. I have a rails 4 project without the issue, with same gems as in rails 5 so I&#39;m digging around. I&#39;ll update when I&#39;ve found something."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472583762, "post_id": 39234180, "comment_id": 65807410, "body": "You can show the stack trace here if you need more help."}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472584025, "post_id": 39234180, "comment_id": 65807558, "body": "@maxpleaner Thanks. I&#39;ve updated post."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472584746, "post_id": 39234180, "comment_id": 65807990, "body": "@Sylar have you run <code>bundle update xeroizer</code>? Seems like there is a <a href=\"https://github.com/waynerobinson/xeroizer/pull/301\" rel=\"nofollow noreferrer\">related issue</a> which was recently resolved"}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 0, "creation_date": 1472584966, "post_id": 39234180, "comment_id": 65808110, "body": "Yes I did. At first I thought it was xeriozer so I went ahead and install a rails 4 project with same gems. Rails 4 rails console, BigDecimal works great. Maybe xeroizer not compatible with rails 5. I have not yet tried another rails 5 project without xeroizer. 99.99% says it&#39;s xeroizer with rails 5."}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472586176, "post_id": 39234180, "comment_id": 65808782, "body": "@maxpleaner Got it! In gemfile under group development, I have <code>gem &#39;awesome_print&#39;, :require =&gt; &#39;ap&#39;</code> uninstalled that and all is well. Know of a fix?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472586294, "post_id": 39234180, "comment_id": 65808850, "body": "@Sylar don&#39;t know. Personally I&#39;m a big fan of awesome print but it does do some core patches, <a href=\"https://github.com/awesome-print/awesome_print/tree/master/lib/awesome_print/core_ext\" rel=\"nofollow noreferrer\">see here</a>"}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 0, "creation_date": 1472586418, "post_id": 39234180, "comment_id": 65808925, "body": "Thanks. I&#39;ll dig around why I get this error. Thanks for the support."}], "owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 484, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472584002, "creation_date": 1472580011, "last_edit_date": 1472584002, "question_id": 39234180, "link": "https://stackoverflow.com/questions/39234180/stack-level-too-deep-with-ruby", "title": "Stack level too deep with ruby", "body": "<p>I am not doing anything fancy here; nothing. As a noob, could someone explain to me why this is happening? I am following <a href=\"https://ruby-doc.org/stdlib-2.3.1/libdoc/bigdecimal/rdoc/BigDecimal.html\" rel=\"nofollow\">this tutorial</a> and I got the error:</p>\n\n<p><strong>Rails Console:</strong></p>\n\n<pre><code>require 'bigdecimal' #=&gt; false\n\nsum = BigDecimal.new(\"0\") #=&gt; stack level too deep\n</code></pre>\n\n<p>So I thought, let me install <a href=\"https://github.com/ruby/bigdecimal\" rel=\"nofollow\">BigDecimal</a> and all would be ok. No. Same issue. Is this an issue with <code>ruby 2.3.1p112</code>? Does it has any affiliation with Rails 5 that Im using? Im in the console, not Rails. Thanks.</p>\n\n<p>Stack Trace:</p>\n\n<pre><code>irb(main):001:0&gt; BigDecimal.new(\"2.11\")\nSystemStackError: stack level too deep\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/xeroizer-2.16.4/lib/big_decimal_to_s.rb:4:in `to_s_with_default_format'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/core_ext/big_decimal/conversions.rb:9:in `to_s'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/xeroizer-2.16.4/lib/big_decimal_to_s.rb:4:in `to_s_with_default_format'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/core_ext/big_decimal/conversions.rb:9:in `to_s'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/xeroizer-2.16.4/lib/big_decimal_to_s.rb:4:in `to_s_with_default_format'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/core_ext/big_decimal/conversions.rb:9:in `to_s'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/xeroizer-2.16.4/lib/big_decimal_to_s.rb:4:in `to_s_with_default_format'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/core_ext/big_decimal/conversions.rb:9:in `to_s'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/xeroizer-2.16.4/lib/big_decimal_to_s.rb:4:in `to_s_with_default_format'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/core_ext/big_decimal/conversions.rb:9:in `to_s'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/xeroizer-2.16.4/lib/big_decimal_to_s.rb:4:in `to_s_with_default_format'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/core_ext/big_decimal/conversions.rb:9:in `to_s'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/xeroizer-2.16.4/lib/big_decimal_to_s.rb:4:in `to_s_with_default_format'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/core_ext/big_decimal/conversions.rb:9:in `to_s'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/xeroizer-2.16.4/lib/big_decimal_to_s.rb:4:in `to_s_with_default_format'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/core_ext/big_decimal/conversions.rb:9:in `to_s'\n... 10876 levels...\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:287:in `load'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:287:in `block in load'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:259:in `load_dependency'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:287:in `load'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/spring-1.7.2/lib/spring/commands/rails.rb:6:in `call'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/spring-1.7.2/lib/spring/command_wrapper.rb:38:in `call'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/spring-1.7.2/lib/spring/application.rb:191:in `block in serve'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/spring-1.7.2/lib/spring/application.rb:161:in `fork'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/spring-1.7.2/lib/spring/application.rb:161:in `serve'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/spring-1.7.2/lib/spring/application.rb:131:in `block in run'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/spring-1.7.2/lib/spring/application.rb:125:in `loop'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/spring-1.7.2/lib/spring/application.rb:125:in `run'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/spring-1.7.2/lib/spring/application/boot.rb:19:in `&lt;top (required)&gt;'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/sylar/.rbenv/versions/2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from -e:1:in `&lt;main&gt;'\nirb(main):002:0&gt;\n</code></pre>\n"}, {"tags": ["ruby", "database", "sinatra", "session-cookies", "datamapper"], "comments": [{"owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "edited": false, "score": 0, "creation_date": 1472579531, "post_id": 39233919, "comment_id": 65805215, "body": "Are you storing it in the session and rendering it in a view within the same HTTP request or are you storing it in the session and then displaying it in the view in a later HTTP request?"}, {"owner": {"reputation": 20, "user_id": 4540567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434c744c10279f3a35167726fd1c9797?s=128&d=identicon&r=PG&f=1", "display_name": "Dittoslash", "link": "https://stackoverflow.com/users/4540567/dittoslash"}, "reply_to_user": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "edited": false, "score": 0, "creation_date": 1472579579, "post_id": 39233919, "comment_id": 65805246, "body": "After the first code block, a redirect happens and it gets rendered there."}], "answers": [{"comments": [{"owner": {"reputation": 20, "user_id": 4540567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434c744c10279f3a35167726fd1c9797?s=128&d=identicon&r=PG&f=1", "display_name": "Dittoslash", "link": "https://stackoverflow.com/users/4540567/dittoslash"}, "edited": false, "score": 0, "creation_date": 1472581367, "post_id": 39234223, "comment_id": 65806205, "body": "First dosen&#39;t work because to.a dosen&#39;t seem to work."}], "tags": [], "owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "is_accepted": true, "score": 0, "last_activity_date": 1472580162, "creation_date": 1472580162, "answer_id": 39234223, "question_id": 39233919, "link": "https://stackoverflow.com/questions/39233919/datamapper-resource-becomes-collection-in-session-value/39234223#39234223", "title": "Datamapper resource becomes collection in session value", "body": "<p>I would try casting the result of <code>get_event</code> to an <code>Array</code>. There might be an issue with storing <code>DataMapper::Collection</code> in the session.</p>\n\n<pre><code>session[\"lastLDEvent\"] = ldg.get_event.to_a\n</code></pre>\n\n<p>If that doesn't work, you may need to store the IDs and then re-query the events.</p>\n\n<pre><code>session[\"lastLDEvent\"] = ldg.get_event.map(&amp;:id)\n</code></pre>\n"}], "owner": {"reputation": 20, "user_id": 4540567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434c744c10279f3a35167726fd1c9797?s=128&d=identicon&r=PG&f=1", "display_name": "Dittoslash", "link": "https://stackoverflow.com/users/4540567/dittoslash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 39234223, "answer_count": 1, "score": 0, "last_activity_date": 1477089744, "creation_date": 1472579075, "last_edit_date": 1477089744, "question_id": 39233919, "link": "https://stackoverflow.com/questions/39233919/datamapper-resource-becomes-collection-in-session-value", "title": "Datamapper resource becomes collection in session value", "body": "<p>After running a function that (blah) returns a Datamapper object (LuckEvent), my code stores that in a Rack session. This is read in a HAML view, which consistently returns a DataMapper::Collection.<br>\nCode for getting the LuckEvent:</p>\n\n<pre><code>puts \"|LX| Jumped, getting event\"\nsession[\"lastLDEvent\"] = ldg.get_event\nputs \"|LX| Jump event: #{session[\"lastLDEvent\"].inspect}\" #Consistently returns the right value.\n</code></pre>\n\n<p>Code for viewing it in HAML:</p>\n\n<pre><code>.w3-container.w3-pale-blue\n  = session[\"lastLDEvent\"].class if session[\"lastLDEvent\"] #Consistently returns DataMapper::Collection.\n</code></pre>\n\n<p>Switching that to <code>.inspect</code> consistently returns [].</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1472587435, "post_id": 39233563, "comment_id": 65809468, "body": "You could replace <code>if self.instance_of? NilClass</code> (<code>self.</code> not needed, btw) with <code>if nil?</code>. (see <a href=\"http://ruby-doc.org/core-2.3.0/Object.html#method-i-nil-3F\" rel=\"nofollow noreferrer\">Object#nil?</a>.) For many subclass of <code>Object</code>--but not all--you could write <code>replace yield if nil?</code>."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1472586539, "post_id": 39233698, "comment_id": 65808996, "body": "Is &quot;completely impossible&quot; less likely than &quot;impossible&quot;?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1472590319, "post_id": 39233698, "comment_id": 65810913, "body": "There&#39;s a lot of &quot;impossible&quot; things in Ruby that are simply crazy to think about doing. For example: Redefining what <code>+</code> and <code>-</code> mean on numbers, or making <code>true</code> show up as <code>false</code> when <code>inspect</code>-ed."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1472578284, "creation_date": 1472578284, "answer_id": 39233698, "question_id": 39233563, "link": "https://stackoverflow.com/questions/39233563/assign-object-variable-within-instance-method/39233698#39233698", "title": "Assign object variable within instance method", "body": "<p><code>self = x</code> is completely impossible. You can't tell an object what it is, that never changes. If it's created with a particular class, it dies with that very same class. All you can do is make modifications to that object or its associated class, but the object's class is immutable.</p>\n\n<p>The only reason <code>@x ||= y</code> works is because <code>@x</code> is simply a variable, it's a pointer to an object, which is something you can reassign. Saying <code>@x = z</code> does not change the object, it only changes the pointer. <code>self</code> is a special case, it refers to the context you're operating within, and that cannot be reassigned.</p>\n\n<p>Keep in mind if by some fluke your <code>self = yield</code> call succeeded you'd redefine what <code>nil</code> is <em>program-wide</em>.</p>\n\n<p>This whole effort is misguided, the <code>||=</code> pattern is pretty much idiomatic Ruby at this point. If you want to improve on that pattern then what you want to do is make some <a href=\"http://www.justinweiss.com/articles/4-simple-memoization-patterns-in-ruby-and-one-gem/\" rel=\"nofollow\">alternative to memoize</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 5, "last_activity_date": 1472579050, "last_edit_date": 1472579050, "creation_date": 1472578473, "answer_id": 39233749, "question_id": 39233563, "link": "https://stackoverflow.com/questions/39233563/assign-object-variable-within-instance-method/39233749#39233749", "title": "Assign object variable within instance method", "body": "<p>If your initialization logic is non-trivial and spans several lines (which, I assume, was the premise of the question), here's what you can do, in idiomatic ruby:</p>\n\n<pre><code>@my_variable ||= begin\n  # code block\nend\n</code></pre>\n\n<p>What I normally do is splitting the logic in two parts. Memoization is separated from calculation. You have this in your first line.</p>\n\n<pre><code>def stats\n  @stats ||= compute_stats\nend\n\ndef compute_stats\n  ...\nend\n</code></pre>\n\n<p>I find this pattern of XXX + compute_XXX quite easy to recognize/follow.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1472579374, "post_id": 39233954, "comment_id": 65805133, "body": "That&#39;s a big gun you&#39;re giving :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1472590409, "post_id": 39233954, "comment_id": 65810956, "body": "Although I think this sort of heavy-handed patching is a bad habit to get into, giving you +1 for sheer bravado. Do try and use <code>\\A</code> and <code>\\z</code> in your regular expressions as the <code>^</code> and <code>$</code> counterparts are newline sensitive. The expression should be: <code>\\A\\w+\\z</code> since <code>\\w</code> is shorthand for <code>[a-zA-Z0-9_]</code>."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1473023130, "post_id": 39233954, "comment_id": 65974903, "body": "FYI your regular expression is overly strict, for example <code>@\ud83d\udc31</code> is a legal instance variable."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 2, "last_activity_date": 1472579645, "last_edit_date": 1472579645, "creation_date": 1472579202, "answer_id": 39233954, "question_id": 39233563, "link": "https://stackoverflow.com/questions/39233563/assign-object-variable-within-instance-method/39233954#39233954", "title": "Assign object variable within instance method", "body": "<p>As tadman says, you can't write <code>self =</code>. But you could write a method which takes the name of the instance variable and sets it. </p>\n\n<p>You have comments saying this is 'inelegant' or 'misguided'. Although I don't share this judgement, it is good practice to write unpretentious code that uses standard conventions as much as possible. This helps others comprehend your code easily. I.e. it's probably not productive to write alternate syntaxes for such fundamental ruby methods like <code>||=</code> ; other people will have to do lots of digging through your code to understand how things work. </p>\n\n<p>That being said, in the interest of teaching how to make Ruby do what you want, I can  suggest this <code>Object</code> method for this purpose:</p>\n\n<pre><code>class Object\n    def assign(key)\n      # make sure the key is a valid instance variable\n      unless key =~ /^[A-Za-z0-9\\_]+$/ \n        raise ArgumentError, \"#{key} is not a valid ivar name\"\n      end\n\n      if instance_variable_get(\"@#{key}\").nil?\n        instance_variable_set(\"@#{key}\", yield)\n      end\n    end\nend\n\n# example\nclass Foo\n  def set_bsd\n    assign(\"bsd\", yield)\n  end\nend\nfoo = Foo.new\nfoo.assign(\"my_ivar\") { \"val\" }\nfoo\n# =&gt; #&lt;Foo:0x007fc2e4ccaca0 @asd=1&gt;\nfoo.set_bsd { 2 }\nfoo\n# =&gt; #&lt;Foo:0x007fc2e4ccaca0 @asd=1 @bsd = 2&gt;\n</code></pre>\n\n<hr>\n\n<p>although I would recommend against patching <code>Object</code> in this way - it's too generic a class and could have unintended conflicts with internal functionality. Rather, add this functionality to a custom class/module and either <code>include</code> the module or inherit the class. </p>\n"}], "owner": {"reputation": 508, "user_id": 2382295, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/2jW04.jpg?s=128&g=1", "display_name": "Matthew Pautzke", "link": "https://stackoverflow.com/users/2382295/matthew-pautzke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1472579645, "creation_date": 1472577779, "question_id": 39233563, "link": "https://stackoverflow.com/questions/39233563/assign-object-variable-within-instance-method", "title": "Assign object variable within instance method", "body": "<p>I often use the ||= operator to cut down on redundant calls.  I want to take something like this</p>\n\n<pre><code>@my_variable ||= my_calculation_method\n</code></pre>\n\n<p>and turn it into</p>\n\n<pre><code>@my_variable.assign { code_block }\n</code></pre>\n\n<p>using this idea</p>\n\n<pre><code>class Object\n    def assign\n      if self.instance_of? NilClass\n          self = yield\n      end\n    end\nend\n</code></pre>\n\n<p>As you may have already guessed, assigning <code>self</code> does not make sense and does not work.</p>\n\n<p>How do you go about accessing the <code>@my_variable</code> pointer within the <code>assign</code> method to modify the value? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1472573846, "post_id": 39231079, "comment_id": 65802110, "body": "<code>&#47;app</code> is not a valid hostname component."}], "answers": [{"comments": [{"owner": {"reputation": 1498, "user_id": 3719597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7bLC.jpg?s=128&g=1", "display_name": "ollpu", "link": "https://stackoverflow.com/users/3719597/ollpu"}, "edited": false, "score": 1, "creation_date": 1472579355, "post_id": 39233553, "comment_id": 65805119, "body": "The port should probably be omitted from the <code>host:</code>, since it&#39;s described in <code>port:</code>."}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1472582641, "post_id": 39233553, "comment_id": 65806866, "body": "Host and Port works. <code>relative_url_root</code> does not. Getting closer"}], "tags": [], "owner": {"reputation": 3646, "user_id": 316545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbbca9a5c1f45d8b5888a793d570709?s=128&d=identicon&r=PG", "display_name": "Jason Noble", "link": "https://stackoverflow.com/users/316545/jason-noble"}, "is_accepted": false, "score": 1, "last_activity_date": 1472580849, "last_edit_date": 1495542169, "creation_date": 1472577740, "answer_id": 39233553, "question_id": 39231079, "link": "https://stackoverflow.com/questions/39231079/rails-mailer-does-not-pick-up-on-the-host/39233553#39233553", "title": "Rails Mailer does not pick up on the host", "body": "<p>To expand on tadman's comment... Your host should only have the 'localhost' portion and a separate port option:</p>\n\n<pre><code>config.action_mailer.default_url_options = {\n  host: 'localhost',\n  port: 3000\n}\n</code></pre>\n\n<p>As for making the app load under /app:</p>\n\n<pre><code>config.relative_url_root = \"/app\"\n</code></pre>\n\n<p>(See see <a href=\"https://stackoverflow.com/questions/3355319/rails-app-in-a-subdirectory\">Rails app in a subdirectory</a> for details)</p>\n"}, {"tags": [], "owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "is_accepted": true, "score": 1, "last_activity_date": 1518728515, "creation_date": 1518728515, "answer_id": 48816203, "question_id": 39231079, "link": "https://stackoverflow.com/questions/39231079/rails-mailer-does-not-pick-up-on-the-host/48816203#48816203", "title": "Rails Mailer does not pick up on the host", "body": "<p>Using <code>script_name</code> did the trick:</p>\n\n<pre><code>config.action_mailer.default_url_options = { \n  host: 'localhost', \n  port: 3000, \n  script_name: '/app' \n}\n</code></pre>\n"}], "owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 48816203, "answer_count": 2, "score": 0, "last_activity_date": 1518728515, "creation_date": 1472569485, "last_edit_date": 1472573835, "question_id": 39231079, "link": "https://stackoverflow.com/questions/39231079/rails-mailer-does-not-pick-up-on-the-host", "title": "Rails Mailer does not pick up on the host", "body": "<p>Site is in sub-directory <code>/app</code></p>\n\n<p>In development.rb: </p>\n\n<pre><code>config.action_mailer.default_url_options = {\n  host: 'localhost:3000/app'\n}\n</code></pre>\n\n<p>Url generated in the mailer <code>item_url(1)</code>:</p>\n\n<p><code>localhost/item/1</code>, it should be: <code>localhost:3000/app/item/1</code></p>\n\n<p>How do I replace <code>localhost</code> with <code>localhost:3000/app</code>?</p>\n\n<p>This is in Rails 4.1.15.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1472576859, "post_id": 39230367, "comment_id": 65803759, "body": "This is more about fundamental knowledge of how ruby works than rails - i would recommend you start with something like <a href=\"http://tryruby.org\" rel=\"nofollow noreferrer\">tryruby.org</a> to figure out the basics of the language before you start learning rails."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4316530, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f7dbc5462abea34190ea97d1090dabf6?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/4316530/eric"}, "edited": false, "score": 0, "creation_date": 1472569123, "post_id": 39230503, "comment_id": 65798744, "body": "Thanks @Kamil but I still don&#39;t get it... In a nutshell, what I am trying to do is to pass a <code>params</code> in my url like this <code>http:&#47;&#47;example.com&#47;twits?filter=like</code> and so ordering my list of tweets by the number of like. Sorry for that as I am pretty new at Rails and Ruby !"}], "tags": [], "owner": {"reputation": 277, "user_id": 6770601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83c06b3b12c1782276623ef08355495?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil", "link": "https://stackoverflow.com/users/6770601/kamil"}, "is_accepted": false, "score": 0, "last_activity_date": 1472567900, "creation_date": 1472567900, "answer_id": 39230503, "question_id": 39230367, "link": "https://stackoverflow.com/questions/39230367/rails5-ordering-with-class-method-and-params/39230503#39230503", "title": "Rails5 - Ordering with Class method and params", "body": "<p>It fails because you defined method self.most_liked without parameters, and then you try to pass a parameter Twit.most_liked(params[:filter]).</p>\n\n<p>You should define method </p>\n\n<pre><code>def most_liked(some_variable)\n</code></pre>\n\n<p>or chain it with another method like this:</p>\n\n<pre><code>Twit.where(params[:filter]).most_liked\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 4316530, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f7dbc5462abea34190ea97d1090dabf6?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/4316530/eric"}, "edited": false, "score": 0, "creation_date": 1472658823, "post_id": 39241101, "comment_id": 65843950, "body": "Thanks @SignorHarry !!"}], "tags": [], "owner": {"reputation": 44, "user_id": 6768800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46c224a1a2c8ec3cecb66ac360d6595e?s=128&d=identicon&r=PG&f=1", "display_name": "SignorHarry", "link": "https://stackoverflow.com/users/6768800/signorharry"}, "is_accepted": true, "score": 0, "last_activity_date": 1472623205, "last_edit_date": 1472623205, "creation_date": 1472619721, "answer_id": 39241101, "question_id": 39230367, "link": "https://stackoverflow.com/questions/39230367/rails5-ordering-with-class-method-and-params/39241101#39241101", "title": "Rails5 - Ordering with Class method and params", "body": "<p>It can't work, because you try use never created metod. You created </p>\n\n<blockquote>\n  <p>def self.most_liked\n       order(like: :desc)\n     end</p>\n</blockquote>\n\n<p>But later you call 'most_liked(bla-bla)'.</p>\n\n<p>You should: </p>\n\n<ul>\n<li><p>Add param to your method:</p>\n\n<blockquote>\n  <p>def self.most_liked(var1)</p>\n</blockquote></li>\n<li><p>Or create method:</p>\n\n<blockquote>\n  <p>def most_liked(var1)\n  Twit.where(x=>var1).order(like: :desc)\n  end</p>\n</blockquote></li>\n<li><p>Or change call of this method to:\nModel.query.method - so:</p>\n\n<blockquote>\n  <p>Twit.where(params[:filter]).most_liked</p>\n</blockquote></li>\n</ul>\n"}], "owner": {"reputation": 75, "user_id": 4316530, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f7dbc5462abea34190ea97d1090dabf6?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/4316530/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 39241101, "answer_count": 2, "score": 0, "last_activity_date": 1472623205, "creation_date": 1472567586, "last_edit_date": 1472576895, "question_id": 39230367, "link": "https://stackoverflow.com/questions/39230367/rails5-ordering-with-class-method-and-params", "title": "Rails5 - Ordering with Class method and params", "body": "<p>In Rails, I want to order some tweets by number of likes desc using <code>params</code>and I am stuck..</p>\n\n<p>I wrote a simple Class method in my model:</p>\n\n<pre><code>class Twit &lt; ApplicationRecord\n\ndef self.most_liked\n order(like: :desc)\nend\n\nend\n</code></pre>\n\n<p>And here is my method in my controller:</p>\n\n<pre><code>class TwitsController &lt; ApplicationController\n\n def index\n  if params[:filter]\n   @twits = Twit.most_liked(params[:filter])\n  else\n   @twits = Twit.all\n  end\n end\n\nend\n</code></pre>\n\n<p>If I only use <code>@twits = Twit.most_liked</code>, it works fine, but when I add my condition with <code>params</code> it fails.</p>\n\n<p>Thank you !</p>\n"}]