[{"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "material-design-lite"], "comments": [{"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1527730018, "post_id": 50614670, "comment_id": 88240682, "body": "Could you add your complete schema?"}, {"owner": {"reputation": 141, "user_id": 5956611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JyC9N.jpg?s=128&g=1", "display_name": "Jos&#233; Antonio Camus Godoy", "link": "https://stackoverflow.com/users/5956611/jos%c3%a9-antonio-camus-godoy"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1527733635, "post_id": 50614670, "comment_id": 88241439, "body": "@SebastianPalma no, the &quot;friend&quot; table does not exist. A friend is a user after all."}, {"owner": {"reputation": 141, "user_id": 5956611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JyC9N.jpg?s=128&g=1", "display_name": "Jos&#233; Antonio Camus Godoy", "link": "https://stackoverflow.com/users/5956611/jos%c3%a9-antonio-camus-godoy"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1527734075, "post_id": 50614670, "comment_id": 88241541, "body": "@SebastianPalma And no, when trying for console it throws the same error."}, {"owner": {"reputation": 141, "user_id": 5956611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JyC9N.jpg?s=128&g=1", "display_name": "Jos&#233; Antonio Camus Godoy", "link": "https://stackoverflow.com/users/5956611/jos%c3%a9-antonio-camus-godoy"}, "reply_to_user": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1527734306, "post_id": 50614670, "comment_id": 88241599, "body": "@thesecretmaster Now it is added"}, {"owner": {"reputation": 141, "user_id": 5956611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JyC9N.jpg?s=128&g=1", "display_name": "Jos&#233; Antonio Camus Godoy", "link": "https://stackoverflow.com/users/5956611/jos%c3%a9-antonio-camus-godoy"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1527734606, "post_id": 50614670, "comment_id": 88241677, "body": "@SebastianPalma But when mapping the class in the following way &quot;belongs_to: friend, class_name:&quot; User &quot;&quot;, I am not making the reference in the correct way? : c"}], "answers": [{"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 6, "last_activity_date": 1527738280, "creation_date": 1527738280, "answer_id": 50616320, "question_id": 50614670, "link": "https://stackoverflow.com/questions/50614670/activerecordstatementinvalid-sqlite3sqlexception-no-such-table/50616320#50616320", "title": "ActiveRecord::StatementInvalid. SQLite3::SQLException: no such table", "body": "<p>You need to change this migration. Because of foreign key constraint database is trying to find <code>friend</code> record with the id <code>friend_id</code></p>\n\n<pre><code>class CreateFriendships &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :friendships do |t|\n      t.references :user, foreign_key: true\n      t.references :friend, foreign_key: true\n      t.string :status\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>You need to remove the <code>foreign_key</code> from references</p>\n\n<pre><code>t.references :friend, foreign_key: false\n</code></pre>\n\n<p>add the <a href=\"https://apidock.com/rails/ActiveRecord/ConnectionAdapters/SchemaStatements/add_foreign_key\" rel=\"noreferrer\">foreign_key</a> manually </p>\n\n<pre><code>add_foreign_key :friendships, :users, column: :friend_id\n</code></pre>\n\n<p>The final content of the migration</p>\n\n<pre><code>class CreateFriendships &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :friendships do |t|\n      t.references :user, foreign_key: true\n\n      t.references :friend, foreign_key: false\n      # OR\n      # t.integer :friend_id, index: true #=&gt; Alternative to above line\n\n      t.string :status\n\n      t.timestamps\n    end\n    add_foreign_key :friendships, :users, column: :friend_id\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 5956611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JyC9N.jpg?s=128&g=1", "display_name": "Jos&#233; Antonio Camus Godoy", "link": "https://stackoverflow.com/users/5956611/jos%c3%a9-antonio-camus-godoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2188, "favorite_count": 0, "accepted_answer_id": 50616320, "answer_count": 1, "score": 4, "last_activity_date": 1527738280, "creation_date": 1527723130, "last_edit_date": 1527734994, "question_id": 50614670, "link": "https://stackoverflow.com/questions/50614670/activerecordstatementinvalid-sqlite3sqlexception-no-such-table", "title": "ActiveRecord::StatementInvalid. SQLite3::SQLException: no such table", "body": "<p>I'm creating a social network and I've a problem when adding a \"Friend request\".\nWhen I press the \"Add friend\" button, the Rails console shows me the following.</p>\n\n<p><a href=\"https://i.stack.imgur.com/QxMS7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QxMS7.jpg\" alt=\"Console error\"></a></p>\n\n<p>Migration Friendships:</p>\n\n<pre><code>class CreateFriendships &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :friendships do |t|\n      t.references :user, foreign_key: true\n      t.references :friend, foreign_key: true\n      t.string :status\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>class FriendshipsController &lt; ApplicationController\n    before_action :find_friend,except: [:index,:update]\n    before_action :find_friendship, only: [:update]\n\n    def create\n        friendship = Friendship.new(user: current_user, friend: @friend)\n        respond_to do |format|\n            if friendship.save\n                format.html { redirect_to @friend }\n                format.js\n            else\n                format.html {redirect_to @friend, notice: \"Error!\"}\n                format.js\n            end\n        end\n    end \n\n    private     \n    def find_friend\n        @friend = User.find(params[:friend_id])\n    end\nend\n</code></pre>\n\n<p>Model Friendship:</p>\n\n<pre><code>class Friendship &lt; ApplicationRecord\n  include AASM\n  belongs_to :user\n  belongs_to :friend, class_name: \"User\"\n  validates :user_id, uniqueness:{scope: :friend_id} \n\n  aasm column: \"status\" do\n    state :pending, initial: true\n    state :active\n    state :denied\n    state :blocked\n    event :accepted do\n        transitions from: [:pending], to: [:active]\n    end\n\n    event :rejected do\n        transitions from: [:pending, :active], to: [:denied]\n    end\n\n    event :eliminated do\n        transitions from: [:pending, :active, :denied], to: [:blocked]\n    end\n  end\nend\n</code></pre>\n\n<p>Model User:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n\n  validates :rut, presence: true, uniqueness: true, rut: true\n  validates :username, presence: true\n  validates :name, presence: true\n  validates :email, presence: true\n\n  validate :validate_username_regex\n\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable, :omniauthable,\n         :omniauth_providers =&gt; [:facebook]\n\n\n  has_many :posts\n  has_many :friendships\n\n  ...\n  def self.from_omniauth(auth)\n    where(provider: auth[\"provider\"], uid: auth[\"uid\"]).first_or_create do |user|\n        if auth[:info]\n            user.email = auth[:info][:email]\n            user.name = auth[:info][:name]\n        end\n        user.password = Devise.friendly_token[0,20]\n    end\n  end\n  ...\n  private\n    def validate_username_regex\n      unless username =~ /\\A[a-zA-Z]*[a-zA-Z][a-zA-Z0-9_]*\\z/\n        errors.add(:username,\"XYZ...\")\n        errors.add(:username,\"XXXYYYZZZ...\")\n      end\n    end\nend\n</code></pre>\n\n<p>Add friend button:</p>\n\n<pre><code>=grid xs:4,sm:2 do\n    =button_to friendships_path(friend_id: @user.id),\n     method: :post, remote: true, :\"data-type\" =&gt; \"script\",\n     class:\"mdl-button mdl-js-button mdl-button--fab \n     mdl-js-ripple-effect\" do\n        %i.material-icons person_add\n</code></pre>\n\n<p>Schema:</p>\n\n<pre><code>  create_table \"friendships\", force: :cascade do |t|\n    t.integer \"user_id\"\n    t.integer \"friend_id\"\n    t.string \"status\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"friend_id\"], name: \"index_friendships_on_friend_id\"\n    t.index [\"user_id\"], name: \"index_friendships_on_user_id\"\n  end\n\n  create_table \"posts\", force: :cascade do |t|\n    t.text \"body\"\n    t.integer \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"user_id\"], name: \"index_posts_on_user_id\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string \"email\", default: \"\", null: false\n    t.string \"username\", default: \"\", null: false\n    t.string \"name\"\n    t.string \"last_name\"\n    t.string \"rut\", default: \"\", null: false\n    t.string \"bio\"\n    t.string \"uid\"\n    ...\n    end\n\nend\n</code></pre>\n\n<p>Rails: Rails 5.1.6</p>\n\n<p>Ruby: ruby 2.3.1p112 (2016-04-26) [x86_64-linux-gnu]</p>\n\n<p>Any idea? :c thx!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "ruby-on-rails-2"], "comments": [{"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1527721691, "post_id": 50614448, "comment_id": 88238794, "body": "You don&#39;t have a <code>.ruby-version</code> file in your root directory by chance, do you?"}, {"owner": {"reputation": 151, "user_id": 9277463, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JYQDrVIYJyQ/AAAAAAAAAAI/AAAAAAAACwQ/wFD8MSfoWpg/photo.jpg?sz=128", "display_name": "Stella Han", "link": "https://stackoverflow.com/users/9277463/stella-han"}, "reply_to_user": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1527722227, "post_id": 50614448, "comment_id": 88238924, "body": "@NMPennypacker nope don&#39;t have a .ruby-version file in my root dir"}, {"owner": {"reputation": 599, "user_id": 7705063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37860e53fcef10930532ba0e8c0a2188?s=128&d=identicon&r=PG", "display_name": "Ricky Brown", "link": "https://stackoverflow.com/users/7705063/ricky-brown"}, "edited": false, "score": 0, "creation_date": 1527724141, "post_id": 50614448, "comment_id": 88239372, "body": "I see a &#39;pg&#39; gem in your gemfile. Have you provisioned the Heroku Postgres addon first before deploying the codebase?"}, {"owner": {"reputation": 151, "user_id": 9277463, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JYQDrVIYJyQ/AAAAAAAAAAI/AAAAAAAACwQ/wFD8MSfoWpg/photo.jpg?sz=128", "display_name": "Stella Han", "link": "https://stackoverflow.com/users/9277463/stella-han"}, "reply_to_user": {"reputation": 599, "user_id": 7705063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37860e53fcef10930532ba0e8c0a2188?s=128&d=identicon&r=PG", "display_name": "Ricky Brown", "link": "https://stackoverflow.com/users/7705063/ricky-brown"}, "edited": false, "score": 0, "creation_date": 1527724879, "post_id": 50614448, "comment_id": 88239547, "body": "@RickyBrown yep postgres is provisioned on Heroku"}, {"owner": {"reputation": 599, "user_id": 7705063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37860e53fcef10930532ba0e8c0a2188?s=128&d=identicon&r=PG", "display_name": "Ricky Brown", "link": "https://stackoverflow.com/users/7705063/ricky-brown"}, "edited": false, "score": 0, "creation_date": 1527725392, "post_id": 50614448, "comment_id": 88239693, "body": "@StellaHan is this a private project, or would you mind sharing the codebase?"}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1527729544, "post_id": 50614448, "comment_id": 88240602, "body": "@StellaHan It&#39;s be great if you could write that up as an answer to help anyone else who has the same question in the future."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 9277463, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JYQDrVIYJyQ/AAAAAAAAAAI/AAAAAAAACwQ/wFD8MSfoWpg/photo.jpg?sz=128", "display_name": "Stella Han", "link": "https://stackoverflow.com/users/9277463/stella-han"}, "is_accepted": false, "score": 8, "last_activity_date": 1527730182, "creation_date": 1527730182, "answer_id": 50615411, "question_id": 50614448, "link": "https://stackoverflow.com/questions/50614448/failed-to-push-to-heroku-ruby-2-3-4/50615411#50615411", "title": "Failed to push to Heroku (Ruby 2.3.4)", "body": "<p>Heroku now requires Ruby version 2.4.4 so I had to include that into the Gemfile. </p>\n\n<p>Include this at the top of your gem file:\nruby \"2.4.4\"</p>\n\n<p>See this document for more details: \n<a href=\"https://devcenter.heroku.com/articles/ruby-support#ruby-versions\" rel=\"noreferrer\">https://devcenter.heroku.com/articles/ruby-support#ruby-versions</a></p>\n"}, {"tags": [], "owner": {"reputation": 1575, "user_id": 6064543, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/8ctqb.jpg?s=128&g=1", "display_name": "Roger Perez", "link": "https://stackoverflow.com/users/6064543/roger-perez"}, "is_accepted": false, "score": 0, "last_activity_date": 1545939145, "creation_date": 1545939145, "answer_id": 53949959, "question_id": 50614448, "link": "https://stackoverflow.com/questions/50614448/failed-to-push-to-heroku-ruby-2-3-4/53949959#53949959", "title": "Failed to push to Heroku (Ruby 2.3.4)", "body": "<p>If you update it within the gemfile from whatever version you have to an accepted version you may get the following issue when you try and run <code>bundle</code> or <code>bundle install</code>:</p>\n\n<p><code>Your Ruby version is 2.3.3, but your Gemfile specified 2.4.5</code></p>\n\n<p>You can run the command below.</p>\n\n<p>If you're using rvm:</p>\n\n<p><code>rvm install 2.5.3\n rvm use 2.5.3</code></p>\n\n<p>For additional solutions check out solution below.</p>\n\n<p>Checkout: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/37914702/how-to-fix-your-ruby-version-is-2-3-0-but-your-gemfile-specified-2-2-5-while\">How to fix \u201cYour Ruby version is 2.3.0, but your Gemfile specified 2.2.5\u201d while server starting</a></p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 10743490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca2a6036b35563d477dd9fee65048b55?s=128&d=identicon&r=PG&f=1", "display_name": "viveksrivastava", "link": "https://stackoverflow.com/users/10743490/viveksrivastava"}, "is_accepted": false, "score": 1, "last_activity_date": 1563110917, "creation_date": 1563110917, "answer_id": 57027858, "question_id": 50614448, "link": "https://stackoverflow.com/questions/50614448/failed-to-push-to-heroku-ruby-2-3-4/57027858#57027858", "title": "Failed to push to Heroku (Ruby 2.3.4)", "body": "<p>Your ruby version 2.3.4 will no longer support from Heroku-18. You should go with heroku older version Heroku-14.</p>\n\n<p>use this command to switch to Heroku-14</p>\n\n<p>heroku stack:set cedar-14 -a your-app-name</p>\n"}], "owner": {"reputation": 151, "user_id": 9277463, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JYQDrVIYJyQ/AAAAAAAAAAI/AAAAAAAACwQ/wFD8MSfoWpg/photo.jpg?sz=128", "display_name": "Stella Han", "link": "https://stackoverflow.com/users/9277463/stella-han"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2713, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1563110917, "creation_date": 1527721423, "question_id": 50614448, "link": "https://stackoverflow.com/questions/50614448/failed-to-push-to-heroku-ruby-2-3-4", "title": "Failed to push to Heroku (Ruby 2.3.4)", "body": "<p>I keep getting this error while trying to push to heroku. Didn't have any problem a couple of days ago and I made no changes to my gemfile. </p>\n\n<p>Here is the error that I'm getting when I push to heroku. It says \"An error occurred while installing ruby-2.3.4\", but I don't specify in my gem ruby-2.3.4 either, so there's no commenting out this line as suggested by some other stackoverflow answers.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Stellas-MBP:curlav StellaHan$ git push heroku master\r\nCounting objects: 9, done.\r\nDelta compression using up to 8 threads.\r\nCompressing objects: 100% (9/9), done.\r\nWriting objects: 100% (9/9), 1.19 KiB | 0 bytes/s, done.\r\nTotal 9 (delta 7), reused 0 (delta 0)\r\nremote: Compressing source files... done.\r\nremote: Building source:\r\nremote:\r\nremote: -----&gt; Ruby app detected\r\nremote: -----&gt; Compiling Ruby/Rails\r\nremote:        Command: 'set -o pipefail; curl -L --fail --retry 5 --retry-delay 1 --connect-timeout 3 --max-time 30 https://s3-external-1.amazonaws.com/heroku-buildpack-ruby/heroku-18/ruby-2.3.4.tgz -s -o - | tar zxf - ' failed on attempt 1 of 3.\r\nremote:        Command: 'set -o pipefail; curl -L --fail --retry 5 --retry-delay 1 --connect-timeout 3 --max-time 30 https://s3-external-1.amazonaws.com/heroku-buildpack-ruby/heroku-18/ruby-2.3.4.tgz -s -o - | tar zxf - ' failed on attempt 2 of 3.\r\nremote:  !\r\nremote:  !     An error occurred while installing ruby-2.3.4\r\nremote:  !\r\nremote:  !     Heroku recommends you use the latest supported Ruby version listed here:\r\nremote:  !     https://devcenter.heroku.com/articles/ruby-support#supported-runtimes\r\nremote:  !\r\nremote:  !     For more information on syntax for declaring a Ruby version see:\r\nremote:  !     https://devcenter.heroku.com/articles/ruby-versions\r\nremote:  !\r\nremote:  !\r\nremote:  !     Debug InformationCommand: 'set -o pipefail; curl -L --fail --retry 5 --retry-delay 1 --connect-timeout 3 --max-time 30 https://s3-external-1.amazonaws.com/heroku-buildpack-ruby/heroku-18/ruby-2.3.4.tgz -s -o - | tar zxf - ' failed unexpectedly:\r\nremote:  !\r\nremote:  !     gzip: stdin: unexpected end of file\r\nremote:  !     tar: Child returned status 1\r\nremote:  !     tar: Error is not recoverable: exiting now\r\nremote:  !\r\nremote:  !     Push rejected, failed to compile Ruby app.\r\nremote:\r\nremote:  !     Push failed\r\nremote: Verifying deploy...\r\nremote:\r\nremote: !\tPush rejected to fierce-shore-32264.\r\nremote:\r\nTo https://git.heroku.com/fierce-shore-32264.git\r\n ! [remote rejected] master -&gt; master (pre-receive hook declined)\r\nerror: failed to push some refs to 'https://git.heroku.com/fierce-shore-32264.git'</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Here is my gemfile:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>source 'https://rubygems.org'\r\n\r\ngit_source(:github) do |repo_name|\r\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\r\n  \"https://github.com/#{repo_name}.git\"\r\nend\r\n\r\n\r\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\r\ngem 'rails', '~&gt; 5.0.3'\r\n# Use Puma as the app server\r\ngem 'puma', '~&gt; 3.0'\r\ngem 'pg', '~&gt; 0.20'\r\n\r\n# Use SCSS for stylesheets\r\ngem 'sass-rails', '~&gt; 5.0'\r\n# Use Uglifier as compressor for JavaScript assets\r\ngem 'uglifier', '&gt;= 1.3.0'\r\n# Use CoffeeScript for .coffee assets and views\r\ngem 'coffee-rails', '~&gt; 4.2'\r\n# See https://github.com/rails/execjs#readme for more supported runtimes\r\n# gem 'therubyracer', platforms: :ruby\r\n\r\n# Use jquery as the JavaScript library\r\ngem 'jquery-rails'\r\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\r\ngem 'turbolinks', '~&gt; 5'\r\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\r\ngem 'jbuilder', '~&gt; 2.5'\r\n# Use Redis adapter to run Action Cable in production\r\n# gem 'redis', '~&gt; 3.0'\r\n# Use ActiveModel has_secure_password\r\n# gem 'bcrypt', '~&gt; 3.1.7'\r\n\r\n# Use Capistrano for deployment\r\n# gem 'capistrano-rails', group: :development\r\n\r\ngroup :development, :test do\r\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\r\n  gem 'byebug', platform: :mri\r\nend\r\n\r\ngroup :development do\r\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\r\n  gem 'web-console', '&gt;= 3.3.0'\r\n  gem 'listen', '~&gt; 3.0.5'\r\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\r\n  gem 'spring'\r\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\r\nend\r\n\r\ngroup :production do\r\n  gem 'rails_12factor'\r\nend\r\n\r\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\r\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\r\n\r\ngem 'bootstrap-sass', '~&gt; 3.3.7'\r\ngem 'devise', '~&gt; 4.2'\r\n\r\ngem 'toastr-rails', \"~&gt; 1.0\"\r\n\r\ngem 'omniauth', '~&gt; 1.6'\r\ngem 'omniauth-facebook', '~&gt; 4.0'\r\ngem 'paperclip', '~&gt; 5.1.0'\r\ngem 'geocoder'\r\n\r\ngem 'jquery-ui-rails', '~&gt; 5.0'\r\ngem 'momentjs-rails', '~&gt; 2.17.1'\r\n\r\ngem 'ransack', '~&gt; 1.7'\r\ngem 'twilio-ruby', '~&gt; 4.11.1'\r\ngem 'fullcalendar-rails', '~&gt; 3.4.0'\r\n\r\ngem 'stripe', '~&gt; 3.0.0'\r\ngem 'rails-assets-card', source: 'https://rails-assets.org'\r\n\r\ngem 'omniauth-stripe-connect', '~&gt; 2.10.0'\r\ngem 'jquery-timepicker-addon-rails'\r\n\r\ngem 'boxr'\r\ngem 'redis', '~&gt; 3.0'\r\ngem 'aws-sdk', '~&gt; 2.8'</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["arrays", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 4, "creation_date": 1527723886, "post_id": 50614259, "comment_id": 88239321, "body": "To do what? Can you explain further what you&#39;re trying to do?"}, {"owner": {"reputation": 17, "user_id": 9131953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53bbad14fe04e9c03742c968dddaaa89?s=128&d=identicon&r=PG&f=1", "display_name": "Adeeb_Alqubati", "link": "https://stackoverflow.com/users/9131953/adeeb-alqubati"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1527729045, "post_id": 50614259, "comment_id": 88240510, "body": "I&#39;m sorry for my bad english. I have modified the question."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1527743593, "post_id": 50614259, "comment_id": 88243845, "body": "What is <code>n</code>? ..."}, {"owner": {"reputation": 324, "user_id": 3713745, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/dCxa9.jpg?s=128&g=1", "display_name": "Joe Sebin", "link": "https://stackoverflow.com/users/3713745/joe-sebin"}, "edited": false, "score": 0, "creation_date": 1527744402, "post_id": 50614259, "comment_id": 88244144, "body": "&quot; I want to remove all elements but the elements at index between k + 1 and n&quot; can you rephrase this ?"}, {"owner": {"reputation": 17, "user_id": 9131953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53bbad14fe04e9c03742c968dddaaa89?s=128&d=identicon&r=PG&f=1", "display_name": "Adeeb_Alqubati", "link": "https://stackoverflow.com/users/9131953/adeeb-alqubati"}, "edited": false, "score": 0, "creation_date": 1527801644, "post_id": 50614259, "comment_id": 88276179, "body": "You can see the picture that I&#39;ve uploaded to explain the problem with details . thanks"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7107433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a26817c4c725688fc8eef1d4008e2e5?s=128&d=identicon&r=PG", "display_name": "yilmazgunalp", "link": "https://stackoverflow.com/users/7107433/yilmazgunalp"}, "is_accepted": false, "score": 2, "last_activity_date": 1527729698, "creation_date": 1527729698, "answer_id": 50615359, "question_id": 50614259, "link": "https://stackoverflow.com/questions/50614259/symmetrical-array-in-ruby/50615359#50615359", "title": "symmetrical array in ruby", "body": "<pre><code>flowers = [0, 1, 2, 3, 4, 5, 0, 7, 3, 4]\nprint flowers\nputs \" \"\nputs \"What Is Number Of K ?\"\nk = gets.to_i\np flowers.slice(k+1..-1)*2\nputs \"Done!\"\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 9131953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53bbad14fe04e9c03742c968dddaaa89?s=128&d=identicon&r=PG&f=1", "display_name": "Adeeb_Alqubati", "link": "https://stackoverflow.com/users/9131953/adeeb-alqubati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1528058046, "creation_date": 1527719975, "last_edit_date": 1528058046, "question_id": 50614259, "link": "https://stackoverflow.com/questions/50614259/symmetrical-array-in-ruby", "title": "symmetrical array in ruby", "body": "<p>I have this array:</p>\n\n<pre><code>flowers = [0, 1, 2, 3, 4, 5, 0, 7, 3, 4]\n</code></pre>\n\n<p>The user inputs as example <code>k=5</code>.i want to get Symmetry array like this :</p>\n\n<pre><code>[0, 7, 3, 4 , 0, 7, 3, 4]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/f2D7D.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>This is my attempt:</p>\n\n<pre><code>flowers = [0, 1, 2, 3, 4, 5, 0, 7, 3, 4]\n\nprint flowers\nputs \" \"\nputs \"What Is Number Of K ?\"\nk = gets.to_i\nflowers.delete_at(k)\nprint flowers\nn = flowers.count\nputs flowers.count\nfor i in flowers do\n  if ((flowers.values_at(n - 1)) == (flowers.values_at(k - 1)))\n    puts \"yyyyyyyyyyyy\"\n    k -= 1\n    n -= 1\n  else\n    flowers.delete_at(k)\n    puts \"nnnnnnnnnnnn\"\n    # flowers.drop(i)\n    k -= 1\n    n -= 1\n  end\nend\nputs \"Done!\"\nprint flowers\n</code></pre>\n\n<p>Any help? how can I do that?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 3, "creation_date": 1527711569, "post_id": 50612766, "comment_id": 88235473, "body": "Not a ruby developer, but it any other language I would consider this a hack, and would suggest you might use a subclass instead."}, {"owner": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 3, "creation_date": 1527711794, "post_id": 50612766, "comment_id": 88235572, "body": "I&#39;m not suggesting that what you want to do is impossible or that it will result in the apocalypse, but you almost certainly don&#39;t want to do what you are asking to do."}, {"owner": {"reputation": 383, "user_id": 3985721, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9bee4235ea6f190c87d8162dfcc75009?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Hadik", "link": "https://stackoverflow.com/users/3985721/josh-hadik"}, "reply_to_user": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1527712025, "post_id": 50612766, "comment_id": 88235685, "body": "@Evert yes it most definitely is a hack, I just can&#39;t seem to find a pattern I like better yet."}, {"owner": {"reputation": 383, "user_id": 3985721, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9bee4235ea6f190c87d8162dfcc75009?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Hadik", "link": "https://stackoverflow.com/users/3985721/josh-hadik"}, "reply_to_user": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 0, "creation_date": 1527712123, "post_id": 50612766, "comment_id": 88235721, "body": "@MarcTalbot Honestly laughed reading that. Yeah it&#39;s a little crazy. I&#39;m gonna update the question with an example of what specifically I&#39;m trying to accomplish and maybe one of you guys will be able to see a better way."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1527712708, "post_id": 50612766, "comment_id": 88235933, "body": "<code>MyConstant = SomeClass.new</code> is a little misleading as <code>MyConstant</code> is an instance of <code>SomeClass</code> not a class, you&#39;d normally say <code>MY_CONSTANT = SomeClass.new</code> to avoid confusion. The object referenced by <code>MY_CONSTANT</code> doesn&#39;t really have a name unless you add a name by hand (i.e. <code>def name</code> or equivalent in <code>SomeClass</code>) in the same way that <code>6</code> in <code>six = 6</code> doesn&#39;t have a name."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1527713531, "post_id": 50612766, "comment_id": 88236239, "body": "You might want to have a look at how certain gems resolve your issue. <a href=\"https://rubygems.org/gems/ruby-enum\" rel=\"nofollow noreferrer\">rubygems.org/gems/ruby-enum</a>"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1527713938, "post_id": 50612766, "comment_id": 88236390, "body": "You could also let your <code>Enum</code> class extend from the <code>Class</code> class, add some of your generic enum logic and go from there."}, {"owner": {"reputation": 383, "user_id": 3985721, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9bee4235ea6f190c87d8162dfcc75009?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Hadik", "link": "https://stackoverflow.com/users/3985721/josh-hadik"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1527714217, "post_id": 50612766, "comment_id": 88236506, "body": "@JohanWentholt How do you extend from the class Class? I just tried subclassing it the standard way and it gave the error &#39;can&#39;t make subclass of Class.&#39;"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1527717526, "post_id": 50612766, "comment_id": 88237675, "body": "@JoshHadik I never tried it myself, I assumed it would work. I&#39;ll post a solution for you below."}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 3985721, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9bee4235ea6f190c87d8162dfcc75009?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Hadik", "link": "https://stackoverflow.com/users/3985721/josh-hadik"}, "edited": false, "score": 0, "creation_date": 1527713696, "post_id": 50612970, "comment_id": 88236300, "body": "Thanks for the response! Yeah I guess what I&#39;m trying to figure out is what that sneaky thing that Ruby does is. But I&#39;m getting the feeling that&#39;s not gonna be possible. At least not in any sane way."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 383, "user_id": 3985721, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9bee4235ea6f190c87d8162dfcc75009?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Hadik", "link": "https://stackoverflow.com/users/3985721/josh-hadik"}, "edited": false, "score": 0, "creation_date": 1527718439, "post_id": 50612970, "comment_id": 88237939, "body": "It never occurred to me to test that behaviour until you asked your question, and the result surprised me. I thought there&#39;d be no difference between <code>x = Class.new</code> and <code>X = Class.new</code> but there&#39;s actually a huge difference. This is even the case with deferred initialization as I show in an edit here. Is there some kind of ill-documented &quot;I&#39;ve been assigned to a constant&quot; method called on objects?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1527750269, "post_id": 50612970, "comment_id": 88246711, "body": "@tadman: No. The language spec says that modules &quot;magically&quot; get a name when they are first assigned to a constant, but the language spec does not specify that it has to happen via a hook method, in fact, it doesn&#39;t specify any specific mechanism <i>at all</i>."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 4, "last_activity_date": 1527718432, "last_edit_date": 1527718432, "creation_date": 1527712513, "answer_id": 50612970, "question_id": 50612766, "link": "https://stackoverflow.com/questions/50612766/any-way-capture-the-name-of-a-constant-on-declaration/50612970#50612970", "title": "any way capture the name of a constant on declaration?", "body": "<p>A variable is just a way of referring to an object, and the variable's name is irrelevant. If you say <code>X = Y</code> and <code>Y</code> happens to be a class, then the <code>Y</code> class already has the name <code>\"Y\"</code>, so you can't change that.</p>\n\n<p>As far as Ruby is concerned <code>X</code> and <code>Y</code> are indistinguishable.</p>\n\n<p>If you want to alter the name you can make a subclass even if that subclass doesn't do anything different:</p>\n\n<pre><code>X = Class.new(Y)\nX.name\n# =&gt; \"X\"\nZ = X\nZ.name\n# =&gt; \"X\"\n</code></pre>\n\n<p>That way preserves the name properly but only in the context of the initialization. I think Ruby does something sneaky and if a new class is being assigned to a constant it assigns a name, but for ordinary variables it does not:</p>\n\n<pre><code>x = Class.new(Y)\nx.name\n# =&gt; nil\n</code></pre>\n\n<p>So this is a special case.</p>\n\n<p>The key here is that there's a huge difference between a subclass, which does impact the name, and a variable reference, which doesn't.</p>\n\n<p>There's some other strange stuff going on here as it seems like the class somehow \"knows\" when it's being assigned to something and if that something is a constant it steals the constant's name for itself:</p>\n\n<pre><code>z = Class.new\nz.name\n# =&gt; nil\nZ = z\nz.name\n# =&gt; \"Z\"\n</code></pre>\n\n<p>As they say in programming: \"Wat?\"</p>\n"}, {"comments": [{"owner": {"reputation": 383, "user_id": 3985721, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9bee4235ea6f190c87d8162dfcc75009?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Hadik", "link": "https://stackoverflow.com/users/3985721/josh-hadik"}, "edited": false, "score": 0, "creation_date": 1527865310, "post_id": 50613971, "comment_id": 88302988, "body": "Hey man, sorry for the delayed response, just got a chance to look at this. Thanks so much for the response, saved me a lot of time!"}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1527719853, "last_edit_date": 1527719853, "creation_date": 1527717918, "answer_id": 50613971, "question_id": 50612766, "link": "https://stackoverflow.com/questions/50612766/any-way-capture-the-name-of-a-constant-on-declaration/50613971#50613971", "title": "any way capture the name of a constant on declaration?", "body": "<p>Your <code>Enum</code> class could look something like this:</p>\n\n<pre><code>class Enum\n\n  def initialize(name, &amp;blk)\n    @defined_options = {}\n    @name = name.freeze\n    instance_eval(&amp;blk)\n    @defined_options.freeze\n  end\n\n  def [](key)\n    if @defined_options.key? key\n      @defined_options[key].value\n    else\n      unfound_option = Option.new(@name, key)\n      raise \"Option #{unfound_option} not found.\"\n    end\n  end\n\n  def to_s\n    \"#{@name}\"\n  end\n\n  def inspect\n    keys = @defined_options.keys.join(',')\n    \"#&lt;#{self}::{#{keys}}&gt;\"\n  end\n\n  class Option\n    attr_reader :value\n\n    def initialize(enum_name, key)\n      @value_initialized = false\n      @enum_name = enum_name\n      @key = key\n    end\n\n    def set(value)\n      if @value_initialized\n        raise \"Value for #{self} can't be set to #{value} \" +\n              \"because it is already initialized to #{@value}\"\n      else\n        @value_initialized = true\n        @value = value.freeze\n      end\n    end\n\n    def to_s\n      \"#{@enum_name}::#{@key}\"\n    end\n\n    def inspect\n      \"#&lt;#{self}&gt;\"\n    end\n\n  end\n\nprivate\n\n  def option(sym)\n    unless @defined_options.key? sym\n      option = Option.new(@name, sym)\n      @defined_options[sym] = option\n    end\n\n    @defined_options[sym]\n  end\n\nend\n</code></pre>\n\n<p>Now you can almost keep the syntax you have in your question, and do the following:</p>\n\n<pre><code>class Pizza \n  attr_reader :topping\n\n  # I had to add the name in the initializer for better error reporting.\n  Toppings = Enum.new('Toppings') do\n    option(:pepperoni).set(\"Pepperoni\")\n    option(:sausage).set(\"Sausage\")\n    option(:mushrooms).set(\"Mushrooms\")\n  end\n\n  def set_topping(symbol)\n    @topping = Toppings[symbol]\n  end\nend\n\npizza = Pizza.new\n\n### Happy Case\npizza.set_topping(:pepperoni)\n#=&gt; \"Pepperoni\"\n\n### Sad Case (Error message shown below is what I'm trying to figure out)\npizza.set_topping(:spinach)\n#=&gt; RuntimeError: Option Toppings::spinach not found.\n</code></pre>\n\n<p>This might give you an idea how to solve this issue. This is just a rough sketch of the class and could probably be tweaked to your needs.</p>\n"}], "owner": {"reputation": 383, "user_id": 3985721, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9bee4235ea6f190c87d8162dfcc75009?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Hadik", "link": "https://stackoverflow.com/users/3985721/josh-hadik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1527719853, "creation_date": 1527711460, "last_edit_date": 1527713185, "question_id": 50612766, "link": "https://stackoverflow.com/questions/50612766/any-way-capture-the-name-of-a-constant-on-declaration", "title": "any way capture the name of a constant on declaration?", "body": "<p>I have a class. Let's call it SomeClass:</p>\n\n<pre><code>class SomeClass\nend\n</code></pre>\n\n<p>Instead of defining instances of this class the normal way, I would like to define them all using a constant:</p>\n\n<pre><code>MyConstant = SomeClass.new\n</code></pre>\n\n<p>I want to be able to capture the name of the constant that some class was set too, in much the same way that standard ruby classes do with the .class method.</p>\n\n<pre><code>MyConstant.name #-&gt; \"MyConstant\"\n</code></pre>\n\n<p>I want to be able to do this to render better error messages from all instances of some class, like so: </p>\n\n<pre><code>class SomeClass \n  def display_error_message \n    \"Error, some class #{self.name} has a problem\"\n  end\nend\n\nMyConstant.display_error_message\n#-&gt; \"Error, some class MyConstant has a problem\"\n</code></pre>\n\n<p>Any way to accomplish this? </p>\n\n<p>EDIT </p>\n\n<hr>\n\n<p>Here's an example to clarify what I'm shooting for. </p>\n\n<p>(Enum is the name of the class I'm creating, which is meant to act similar to Swifts 'Enum' type. Basically it sets a predefined list of options (:pepperoni, :sausage, :mushroom) with a raw_value (\"Pepperoni\", \"Sausage\", \"Mushroom\".) Obviously in this example a hash or a simple algorithm for converting a symbol to an UpperCamel case string could work, but in reality the enum class will do a lot more, but this example shows the gist of it.</p>\n\n<pre><code>class Pizza \n  attr_reader :topping\n\n  Toppings = Enum.new do \n    option(:pepperoni).set(\"Pepperoni\")\n    option(:sausage).set(\"Sausage\")\n    option(:mushrooms).set(\"Mushrooms\")\n  end\n\n  def set_topping(symbol)\n    @topping = Toppings[symbol]\n  end\nend\n\npizza = Pizza.new\n\n### Happy Case\npizza.set_topping(:pepperoni)\n\n### Sad Case (Error message shown below is what I'm trying to figure out)\npizza.set_topping(:spinach)\n#-&gt; Error. enum Toppings has no option spinach\n</code></pre>\n"}, {"tags": ["ruby", "ubuntu", "rbenv"], "comments": [{"owner": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 0, "creation_date": 1527711227, "post_id": 50612319, "comment_id": 88235339, "body": "Is that ordering correct?  &quot;I installed ruby&quot; followed by &quot;I installed rbenv&quot;?  What rubies does rbenv tell you are installed?"}, {"owner": {"reputation": 45, "user_id": 2229608, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6lIqC.jpg?s=128&g=1", "display_name": "user2229608", "link": "https://stackoverflow.com/users/2229608/user2229608"}, "reply_to_user": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 0, "creation_date": 1527711779, "post_id": 50612319, "comment_id": 88235566, "body": "I have no output from rbenv, like it does nothing. You&#39;re right, I probably installed rbenv and then set ruby to 2.4.0. I remember it being set, but not installing. But then I&#39;d expect the other commands to not work at all."}, {"owner": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 0, "creation_date": 1527711964, "post_id": 50612319, "comment_id": 88235656, "body": "The other commands work because you have a ruby installed.  Install plugin that lets you install rubies, then use that to install 2.4.0, then you should be good to go."}, {"owner": {"reputation": 45, "user_id": 2229608, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6lIqC.jpg?s=128&g=1", "display_name": "user2229608", "link": "https://stackoverflow.com/users/2229608/user2229608"}, "reply_to_user": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 0, "creation_date": 1527712489, "post_id": 50612319, "comment_id": 88235852, "body": "I&#39;m not sure I got this part ? Install plugin that lets you install rubies, then use that to install 2.4.0"}, {"owner": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 0, "creation_date": 1527725976, "post_id": 50612319, "comment_id": 88239822, "body": "rbenv doesn&#39;t by itself install rubies out of the box.  Generally you need to install the <a href=\"https://github.com/rbenv/ruby-build#readme\" rel=\"nofollow noreferrer\">github.com/rbenv/ruby-build#readme</a> plugin, which will enable the rbenv install command."}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1527730092, "post_id": 50612319, "comment_id": 88240696, "body": "As Marc said, you need to install ruby-build (a rbenv plugin). This issue could also be caused by you not running <code>rbenv rehash</code>."}, {"owner": {"reputation": 45, "user_id": 2229608, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6lIqC.jpg?s=128&g=1", "display_name": "user2229608", "link": "https://stackoverflow.com/users/2229608/user2229608"}, "edited": false, "score": 0, "creation_date": 1527747962, "post_id": 50612319, "comment_id": 88245540, "body": "Oh, I can get what you meant. But I installed the plugin as shown in my path. So, it still does not make sense to me ;)"}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 2229608, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6lIqC.jpg?s=128&g=1", "display_name": "user2229608", "link": "https://stackoverflow.com/users/2229608/user2229608"}, "is_accepted": false, "score": 0, "last_activity_date": 1527752212, "creation_date": 1527752212, "answer_id": 50619073, "question_id": 50612319, "link": "https://stackoverflow.com/questions/50612319/ruby-gem-rbenv-command-not-found/50619073#50619073", "title": "ruby, gem, rbenv command not found", "body": "<p>So, it turns out I figured it out myself.</p>\n\n<p>What I was missing (rbenv doctor helped me) was to have shims in my PATH. Adding </p>\n\n<pre><code>eval \"$(rbenv init -)\"  \n</code></pre>\n\n<p>did the trick.</p>\n"}, {"tags": [], "owner": {"reputation": 1000, "user_id": 7620733, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yUUYCvAxgik/AAAAAAAAAAI/AAAAAAAAABU/PxmuI8XsFh0/photo.jpg?sz=128", "display_name": "Hariharan L", "link": "https://stackoverflow.com/users/7620733/hariharan-l"}, "is_accepted": false, "score": 2, "last_activity_date": 1527785500, "last_edit_date": 1527785500, "creation_date": 1527784756, "answer_id": 50629032, "question_id": 50612319, "link": "https://stackoverflow.com/questions/50612319/ruby-gem-rbenv-command-not-found/50629032#50629032", "title": "ruby, gem, rbenv command not found", "body": "<p>Complete setup commands for rbenv in linux machines\nInitial setup</p>\n\n<pre><code>git clone https://github.com/rbenv/rbenv.git ~/.rbenv\ncd ~/.rbenv &amp;&amp; src/configure &amp;&amp; make -C src\necho 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc \n~/.rbenv/bin/rbenv init\n</code></pre>\n\n<p>check whether <code>eval \"$(rbenv init -)\"</code> is present in <code>~/.bashrc</code>. If not present run the following command </p>\n\n<pre><code>echo 'eval \"$(rbenv init -)\"' &gt;&gt; ~/.bashrc\n</code></pre>\n\n<p>Then, </p>\n\n<pre><code>source ~/.bashrc\nmkdir -p \"$(rbenv root)\"/plugins\ngit clone https://github.com/rbenv/ruby-build.git \"$(rbenv root)\"/plugins/ruby-build\nsource ~/.bashrc\nrbenv rehash\n</code></pre>\n\n<p>Now, rbenv installed. Now install your ruby version ( change the version below to your version). And set that to global version. (Use latest stable version as global as it is a good practice. You can set local versions differently depending on your working project)</p>\n\n<pre><code>rbenv install 2.5.1\nrbenv global 2.5.1\n</code></pre>\n\n<p>Finished. </p>\n"}], "owner": {"reputation": 45, "user_id": 2229608, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6lIqC.jpg?s=128&g=1", "display_name": "user2229608", "link": "https://stackoverflow.com/users/2229608/user2229608"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1335, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1527785500, "creation_date": 1527709393, "last_edit_date": 1527735558, "question_id": 50612319, "link": "https://stackoverflow.com/questions/50612319/ruby-gem-rbenv-command-not-found", "title": "ruby, gem, rbenv command not found", "body": "<p>I've been setting up some ruby dependencies throughout a day on my Lubuntu (18.04) in VM. <strike>I installed <strong>ruby 2.4.0</strong> and then installed <strong>rbenv</strong> and set 2.4.0 as global version to be used</strike> (probably reverse order). Then I installed bundler and started installing dependencies for my Sinatra app. Since I needed some native extension I also installed libpq-dev via sudo apt-get install, installed pg gem and ran bundler again. And then  I have</p>\n\n<pre><code>Command 'ruby' not found, but can be installed with:\nsudo apt install ruby\n</code></pre>\n\n<p>Same with <i>bundle</i> or <i>gem</i> commands.</p>\n\n<p>I can see that I have rbenv in /home/michalvantuch/.rbenv/bin/rbenv and also /home/michalvantuch/.rbenv/versions/2.4.0/. </p>\n\n<p>My path:</p>\n\n<pre><code>/home/michalvantuch/.rbenv/plugins/ruby-build/bin:/home/michalvantuch/.rbenv/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games\n</code></pre>\n\n<p>My bash history:</p>\n\n<pre><code>bundle install\ngem install pg -v '0.21.0' --source 'https://rubygems.org/'\nvi /home/michalvantuch/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/extensions/x86_64-linux/2.4.0-static/pg-0.21.0/mkmf.log\nsudo apt-get install libpq-dev\ngem install pg -v '0.21.0' --source 'https://rubygems.org/'\nbundle install\ngem list --local\ncd /home/michalvantuch/.rbenv/bin/\nls -lah\nC rbenv -&gt; ../libexec/rbenv\ncd rbenv -&gt; ../libexec/rbenv\ncd rbenv\ncd ../libexec/\nls -lah\npwd\ncd ..\n</code></pre>\n\n<p>I'm weary and not sure how to fix this. Did I mess up with the system privileges ?</p>\n"}, {"tags": ["ruby", "rest", "https", "net-http"], "answers": [{"comments": [{"owner": {"reputation": 1447, "user_id": 6020034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/20fc6f63f649759b7b7c10ca5e7adef0?s=128&d=identicon&r=PG&f=1", "display_name": "mdo123", "link": "https://stackoverflow.com/users/6020034/mdo123"}, "edited": false, "score": 0, "creation_date": 1527712077, "post_id": 50611633, "comment_id": 88235704, "body": "thank you.  I had to also set http.use_ssl = true.  Bonus points for stearing me to Postman!"}], "tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": true, "score": 1, "last_activity_date": 1527706394, "creation_date": 1527706394, "answer_id": 50611633, "question_id": 50611436, "link": "https://stackoverflow.com/questions/50611436/convert-curl-put-to-ruby-nethttp/50611633#50611633", "title": "convert curl PUT to ruby net:http", "body": "<p>Converted via Postman.</p>\n\n<pre><code>require 'uri'\nrequire 'net/http'\n\nurl = URI(\"https://some.domain/repository/npm/-/user/org.couchdb.user:anonymous\")\n\nhttp = Net::HTTP.new(url.host, url.port)\n\nrequest = Net::HTTP::Put.new(url)\nrequest[\"Accept\"] = 'application/json'\nrequest[\"Content-Type\"] = 'application/json'\nrequest[\"Cache-Control\"] = 'no-cache'\nrequest[\"Postman-Token\"] = '9e3622cd-fda5-458d-2521-325849546ef7'\nrequest.body = \"{\\\"name\\\": \\\"anonymous\\\", \\\"password\\\": \\\"obfuscated\\\"}\"\n\nresponse = http.request(request)\nputs response.read_body\n</code></pre>\n"}], "owner": {"reputation": 1447, "user_id": 6020034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/20fc6f63f649759b7b7c10ca5e7adef0?s=128&d=identicon&r=PG&f=1", "display_name": "mdo123", "link": "https://stackoverflow.com/users/6020034/mdo123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 50611633, "answer_count": 1, "score": 0, "last_activity_date": 1527706394, "creation_date": 1527705481, "question_id": 50611436, "link": "https://stackoverflow.com/questions/50611436/convert-curl-put-to-ruby-nethttp", "title": "convert curl PUT to ruby net:http", "body": "<p>I've searched all over the interwebs and read through <a href=\"https://ruby-doc.org/stdlib-2.4.2/libdoc/net/http/rdoc/Net/HTTP.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.4.2/libdoc/net/http/rdoc/Net/HTTP.html</a></p>\n\n<p>I'm still unable to get the right syntax to convert the following curl command to ruby.  I'll spare you all the different ways I've tried.  Can someone please give me an example of what this should look like in Ruby?</p>\n\n<pre><code>curl -k -s -H \"Accept: application/json\" -H \"Content-Type:application/json\" -X PUT --data '{\"name\": \"anonymous\", \"password\": \"obfuscated\"}' https://some.domain/repository/npm/-/user/org.couchdb.user:anonymous\n</code></pre>\n\n<p>All the examples I see are with POST not PUT </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "parameters"], "comments": [{"owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 1, "creation_date": 1527703377, "post_id": 50610754, "comment_id": 88231737, "body": "Can you dump the console log (with <code>params</code>) after performing <code>create</code> and <code>update</code> action you mentioned about?"}, {"owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "edited": false, "score": 0, "creation_date": 1527709706, "post_id": 50610754, "comment_id": 88234698, "body": "This sounds like an issue with StrongParameters and whatever your form is posting.  Can you provide your full Rails log for the GoalsController#goals_completed action please?"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527706366, "post_id": 50611156, "comment_id": 88233165, "body": "might want to add <code>method: :get</code> given the routes posted or recommend a routing verb change"}, {"owner": {"reputation": 37, "user_id": 8414445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/982b2118940a96e980309539049758c7?s=128&d=identicon&r=PG&f=1", "display_name": "Olliedee", "link": "https://stackoverflow.com/users/8414445/olliedee"}, "edited": false, "score": 0, "creation_date": 1527706992, "post_id": 50611156, "comment_id": 88233475, "body": "Thanks @Mark. I&#39;ve changed it to the below:     <code>&lt;%= form_for @goal, :url =&gt; url_for(:controller =&gt; &#39;goal&#39;, :action =&gt; &#39;goal_completed&#39;) do |form| %&gt;</code> but still getting the same error."}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1527704262, "creation_date": 1527704262, "answer_id": 50611156, "question_id": 50610754, "link": "https://stackoverflow.com/questions/50610754/param-is-missing-or-the-value-is-empty-adding-fields-to-existing-model/50611156#50611156", "title": "param is missing or the value is empty- Adding fields to existing model?", "body": "<p>You're still hitting the update method. </p>\n\n<p>To hit a different method, follow <a href=\"https://stackoverflow.com/questions/5320414/form-for-but-to-post-to-a-different-action\">form_for but to post to a different action</a></p>\n\n<p>form_for @goal, :url => url_for(:controller => 'goal', :action => 'goal_completed')</p>\n"}, {"tags": [], "owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "is_accepted": true, "score": 0, "last_activity_date": 1527722838, "last_edit_date": 1527722838, "creation_date": 1527714487, "answer_id": 50613375, "question_id": 50610754, "link": "https://stackoverflow.com/questions/50610754/param-is-missing-or-the-value-is-empty-adding-fields-to-existing-model/50613375#50613375", "title": "param is missing or the value is empty- Adding fields to existing model?", "body": "<p>You have the <code>param is missing or the value is empty: goal</code> error because your goal_review_params are indeed missing.</p>\n\n<p>When you redirect your created/updated goal to the \"goal_completed\" view form, you're doing a \"get\" request. And as you defined it in your routes, the request is going to read the named method inside the controller and stop at this line:</p>\n\n<pre><code>if @goal.update(goal_review_params)\n</code></pre>\n\n<p>at this point of the request all the <code>goal_review_params</code> are missing because you have a GET like this:</p>\n\n<blockquote>\n  <p>Started GET \"/goals/4/goal_completed\" for ...<br>\n  Processing by GoalsController#goal_completed as HTML<br>\n     Parameters: {\"id\"=>\"4\"}</p>\n</blockquote>\n\n<p>To achieve what you want you can create two custom routes, one for \"GET\" one for \"PATCH\", or if you really want only one action, handle multiple requests on it like that:</p>\n\n<pre><code>resources :goals do\n  member do\n    get 'goal_completed'  #&lt;== to get the view form\n    patch 'goal_completed' #&lt;== to handle the update fields\n  end\nend\n</code></pre>\n\n<p>in your controller:</p>\n\n<pre><code>def goal_completed\n  if request.patch?\n    respond_to do |format|\n      if @goal.update(goal_review_params)\n        format.html { redirect_to @goal, notice: 'Goal review was successfully updated.' }\n        format.json { render :show, status: :ok, location: @goal }\n      else\n        format.html { redirect_to goal_completed_goal_path(@goal) }\n        format.json { render json: @goal.errors, status: :unprocessable_entity }\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>and in your view form specify the custom path of your submit to prevent the basic \"update\" action:</p>\n\n<pre><code>&lt;%= form_for @goal, url: goal_completed_goal_path(@goal) do |form| %&gt;\n  # the form\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8414445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/982b2118940a96e980309539049758c7?s=128&d=identicon&r=PG&f=1", "display_name": "Olliedee", "link": "https://stackoverflow.com/users/8414445/olliedee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 50613375, "answer_count": 2, "score": 0, "last_activity_date": 1527722838, "creation_date": 1527702650, "last_edit_date": 1527702979, "question_id": 50610754, "link": "https://stackoverflow.com/questions/50610754/param-is-missing-or-the-value-is-empty-adding-fields-to-existing-model", "title": "param is missing or the value is empty- Adding fields to existing model?", "body": "<p>I have a model of goals with a number of attributes.</p>\n\n<p>Once a goal is complete, it's marked as complete on a button press and then redirected to a new form which can add additional attributes to the goal model.</p>\n\n<p>To me it made sense to store them on the goal model, as they are only ever linked to the goal, however, I can't get it to work correctly as I always get param is missing or the value is empty: goal.</p>\n\n<p>Goal params are used as the standard CRUD params.</p>\n\n<p>The goal_review_params are used once the goal is complete.</p>\n\n<p>Is this possible to do outside of the 'update' action?</p>\n\n<p>Controller:</p>\n\n<pre><code>class GoalsController &lt; ApplicationController\n  before_action :authenticate_user!, except: [:index, :show, :completedgoals]\n  before_action :set_goal, only: [:show, :edit, :update, :destroy, :mark_completed, :goal_completed ]\n\n def goal_completed\n    @authorize\n    if @goal.update(goal_review_params)\n        format.html { redirect_to @goal, notice: 'Goal review was successfully updated.' }\n        format.json { render :show, status: :ok, location: @goal }\n      else\n        format.html { redirect_to goal_completed_goal_path(@goal) }\n        format.json { render json: @goal.errors, status: :unprocessable_entity }\n      end\n  end\n\n\n\nprivate\n    def set_goal\n      @goal = Goal.find(params[:id])\n    end\n\n#category_ids:[] needs to be added back to goal_params when they're added back in\n    def goal_params\n      params.require(:goal).permit(:goalname, :goaldesc, :goalhow, :goalwhy, :goalreward, :goalduedate, :goalstatus )\n    end\n\n    def goal_review_params\n      params.require(:goal).permit(:goaldifficult, :goallearned, :goalnext)\n    end\n</code></pre>\n\n<p>View:</p>\n\n<pre><code> &lt;%= form_for (@goal) do |form| %&gt;\n&lt;div class=\"col-md-12 goalform\"&gt;\n    &lt;%= form.label :goaldifficult, value: \"Name your Goal\" %&gt;&lt;br&gt;\n    &lt;%= form.text_field :goaldifficult, :rows =&gt; 2, style: 'width:80%;', \n    placeholder: \"...'\" %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"col-md-12 goalform\"&gt;\n    &lt;%= form.label :goallearned, value: \"Name your Goal\" %&gt;&lt;br&gt;\n    &lt;%= form.text_field :goallearned, :rows =&gt; 2, style: 'width:80%;', \n    placeholder: \"...'\" %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"col-md-12 goalform\"&gt;\n    &lt;%= form.label :goalnext, value: \"Name your Goal\" %&gt;&lt;br&gt;\n    &lt;%= form.text_field :goalnext, :rows =&gt; 2, style: 'width:80%;', \n    placeholder: \"...'\" %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"col-md-12 goalform\"&gt;\n    &lt;%= form.submit class:\"btn btn-primary\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n  \n\n<p>Routes:</p>\n\n<pre><code> resources :goals do\n    ...\n    member do\n      get 'goal_completed', to: 'goals#goal_completed', as: 'goal_completed'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1527702286, "post_id": 50610563, "comment_id": 88231185, "body": "Not quite clear, but maybe you can save something into a session variable and if the variable exists, then the link redirects to somewhere. Or some javascript acting on the button."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1527706795, "post_id": 50610563, "comment_id": 88233367, "body": "I think you may be able to use authenticity token and the <code>protect_from_forgery</code> method. See <a href=\"http://api.rubyonrails.org/v5.0/classes/ActionController/RequestForgeryProtection.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/v5.0/classes/ActionController/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1527745934, "post_id": 50617337, "comment_id": 88244699, "body": "* Rails UJS actually creates a hidden form with javascript and submits it when you use <code>link_to &quot;Foo&quot;, &quot;&#47;foo&quot;, method: &quot;POST&quot;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6158284"}, "edited": false, "score": 0, "creation_date": 1527746259, "post_id": 50617337, "comment_id": 88244823, "body": "I forgot to tell, that web-service using Ruby 1.8.7"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1527746349, "post_id": 50617337, "comment_id": 88244857, "body": "Thats pretty much irrelevant since we are talking about some pretty basic web principles here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6158284"}, "edited": false, "score": 0, "creation_date": 1527746482, "post_id": 50617337, "comment_id": 88244906, "body": "The web-service is not written by me, so i don&#39;t know all the stuff there. That&#39;s why im asking. It takes some time too look into the ws. Too big."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1527745887, "last_edit_date": 1527745887, "creation_date": 1527745163, "answer_id": 50617337, "question_id": 50610563, "link": "https://stackoverflow.com/questions/50610563/ruby-disable-to-use-link-massively/50617337#50617337", "title": "Ruby: Disable to use link massively", "body": "<p>You're using the wrong HTTP method.</p>\n\n<p>If you want to create an non-idempotent operation you should be using one of the non-idempotent methods such as POST, PATCH, PUT or DELETE not GET.</p>\n\n<p>POST, PATCH, PUT or DELETE requests are only sent by the browser by form submission*. You can't just enter the URL into the browser window as it will be sent as a GET request. The browser also warns the user if they refresh the window.</p>\n\n<p>If you want to limit the operation to being performed once you would either need to save a flag on the model or a token passed through the form or some other way of saving the application state.</p>\n\n<p>But maybe you should look at how to throttle the resource per user instead.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6158284"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 50617337, "answer_count": 1, "score": 0, "last_activity_date": 1527746275, "creation_date": 1527701803, "last_edit_date": 1527746275, "question_id": 50610563, "link": "https://stackoverflow.com/questions/50610563/ruby-disable-to-use-link-massively", "title": "Ruby: Disable to use link massively", "body": "<p>So here is the link <code>http://127.0.0.1:3000/zones/create_value_zone_printout?value_zone=3-0010000-001</code>, it can be used massively(repeated) always, i need to correct that and switch that off. What i mean by that? The link should be only working by pressing the button, not entering in browser. Maybe try to encrypt the link? Maybe someone have any idea?</p>\n\n<pre><code>  def create_value_zone_printout\n    @service = \"value_zones\"\n\n    if !public_user?\n      return unless check_service_permissions\n    end\n\n    respond_to do |format|\n      format.html do\n        rep_id = Report.get_printout_file_id('VALUE_ZONE', session, {:value_zones =&gt; params[:value_zone]})\n        unless rep_id.blank? or rep_id.is_a?(Array)\n          return permission_denied(SilentError.new(\"K\u013c\u016bda veidojot izdruku!\", rep_id.to_s, true))\n        end\n        add_service_to_user_orders(nil, [params[:value_zone]], rep_id) unless public_user?\n\n        file_data = Attachment.find_by_id(rep_id.first.keys.first)\n        send_data(file_data.data_buffered, :filename =&gt; file_data.file_name)\n\n        file_data.destroy if public_user?\n      end\n    end\n  end\n\n  map.resources :zones, :collection =&gt; {:create_value_zone_printout =&gt; :get}\n\n\n&lt;%= link_to 'sagatavot izdruku',  {:controller =&gt; \"zones\", :action =&gt; \"create_value_zone_printout\", :value_zone =&gt; @zone.zone_name}, :class=&gt;\"print\" %&gt;\n</code></pre>\n\n<p>P.S Only the <code>value_zone</code> id is changing in the link for each position, maybe just set only 1 request per value_zone? But its not good idea.</p>\n\n<p>Ruby V.: 1.8.7</p>\n"}, {"tags": ["ruby", "heroku", "omniauth", "basic-authentication"], "answers": [{"tags": [], "owner": {"reputation": 1344, "user_id": 773830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/22539805d7c9a021067cce41f352eeba?s=128&d=identicon&r=PG", "display_name": "demental", "link": "https://stackoverflow.com/users/773830/demental"}, "is_accepted": false, "score": 0, "last_activity_date": 1527702376, "creation_date": 1527702376, "answer_id": 50610685, "question_id": 50610453, "link": "https://stackoverflow.com/questions/50610453/oauth-client-with-a-doorkeeper-provider-behind-basic-authentication/50610685#50610685", "title": "Oauth client with a Doorkeeper provider behind basic authentication", "body": "<p>Aaaah finally it did not take me too much time to find the solution (actually writing that question was part of it :))</p>\n\n<p>So omniauth-oauth2 strategy uses the <a href=\"https://github.com/oauth-xx/oauth2\" rel=\"nofollow noreferrer\">Oauth gem</a> which in turn uses the awesome <a href=\"https://github.com/lostisland/faraday\" rel=\"nofollow noreferrer\">Faraday HTTP library</a>. It was not so hard to find a way to <a href=\"https://github.com/lostisland/faraday/issues/221\" rel=\"nofollow noreferrer\">setup a proxy in Faraday</a>.</p>\n\n<p>My Omniauth stragegy now looks like this :</p>\n\n<pre><code>require 'omniauth-oauth2'\n\nmodule OmniAuth\n  module Strategies\n    class MyAuth &lt; OmniAuth::Strategies::OAuth2\n      option :name, \"MyAuth\"\n\n      # Added Basic auth credentials for staging environment\n      option :client_options, {:site =&gt; \"https://youshall:notpass@my-staging-server.info\"}\n\n      uid{ raw_info['id'] }\n\n      info do\n        {\n          remote_id: raw_info['remote_id'],\n          name: raw_info['name'],\n          email: raw_info['email']\n        }\n      end\n\n      extra do\n        {\n          'raw_info' =&gt; raw_info\n        }\n      end\n\n      # Adding the proxy here\n      def client\n        super.tap do |c|\n          c.connection.proxy(ENV[\"OAUTH_PROXY_URL\"]) if ENV[\"OAUTH_PROXY_URL\"]\n        end\n      end\n      def raw_info\n        @raw_info ||= access_token.get('/api/me').parsed\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>And now I just need to whitelist my proxy IP to bypass the Basic authentication on the Oauth server. Voil\u00e0 !</p>\n"}], "owner": {"reputation": 1344, "user_id": 773830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/22539805d7c9a021067cce41f352eeba?s=128&d=identicon&r=PG", "display_name": "demental", "link": "https://stackoverflow.com/users/773830/demental"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527702559, "creation_date": 1527701347, "last_edit_date": 1527702559, "question_id": 50610453, "link": "https://stackoverflow.com/questions/50610453/oauth-client-with-a-doorkeeper-provider-behind-basic-authentication", "title": "Oauth client with a Doorkeeper provider behind basic authentication", "body": "<p>We are setting up a Doorkeeper provider on our main app to enable Oauth2 authentication on some side applications. Everything's working fine on our production environement.</p>\n\n<p>On the staging environment that's another story, because our staging applications are behind basic authentication :</p>\n\n<pre><code>config.middleware.insert_after(::Rack::Runtime,\n                               'Rack::Auth::Basic',\n                               \"Staging\") do |user, password|\n                                 [user, password] == [ENV['STAGING_USERNAME'], ENV['STAGING_PASSWORD']]\n                              end\nend\n</code></pre>\n\n<p>Which means the Oauth endpoint must pass thru this Basic authentication. Here is the Oauth client configuration :</p>\n\n<pre><code>require 'omniauth-oauth2'\n\nmodule OmniAuth\n  module Strategies\n    class MyAuth &lt; OmniAuth::Strategies::OAuth2\n      option :name, \"MyAuth\"\n\n      # Added Basic auth credentials for staging environment\n      option :client_options, {:site =&gt; \"https://youshall:notpass@my-staging-server.info\"}\n\n      uid{ raw_info['id'] }\n\n      info do\n        {\n          remote_id: raw_info['remote_id'],\n          name: raw_info['name'],\n          email: raw_info['email']\n        }\n      end\n\n      extra do\n        {\n          'raw_info' =&gt; raw_info\n        }\n      end\n\n      def raw_info\n        @raw_info ||= access_token.get('/api/me').parsed\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>But Oauth seems not to be able to parse the URI including, as I get the following error when trying to get credentials :</p>\n\n<pre><code>Encoding::UndefinedConversionError: \"\\xC3\" from ASCII-8BIT to UTF-8\n- 51 non-project frames\n1\nFile \"/app/vendor/bundle/ruby/2.4.0/gems/oauth2-1.2.0/lib/oauth2/error.rb\" line 30 in encode\n2\nFile \"/app/vendor/bundle/ruby/2.4.0/gems/oauth2-1.2.0/lib/oauth2/error.rb\" line 30 in error_message\n3\nFile \"/app/vendor/bundle/ruby/2.4.0/gems/oauth2-1.2.0/lib/oauth2/error.rb\" line 17 in initialize\n4\nFile \"/app/vendor/bundle/ruby/2.4.0/gems/oauth2-1.2.0/lib/oauth2/client.rb\" line 112 in new\n5\nFile \"/app/vendor/bundle/ruby/2.4.0/gems/oauth2-1.2.0/lib/oauth2/client.rb\" line 112 in request\n6\nFile \"/app/vendor/bundle/ruby/2.4.0/gems/oauth2-1.2.0/lib/oauth2/client.rb\" line 138 in get_token\n7\nFile \"/app/vendor/bundle/ruby/2.4.0/gems/oauth2-1.2.0/lib/oauth2/strategy/auth_code.rb\" line 29 in get_token\n8\nFile \"/app/vendor/bundle/ruby/2.4.0/gems/omniauth-oauth2-1.4.0/lib/omniauth/strategies/oauth2.rb\" line 89 in build_access_token\n9\nFile \"/app/vendor/bundle/ruby/2.4.0/gems/omniauth-oauth2-1.4.0/lib/omniauth/strategies/oauth2.rb\" line 73 in callback_phase\n10\nFile \"/app/vendor/bundle/ruby/2.4.0/gems/omniauth-1.3.1/lib/omniauth/strategy.rb\" line 227 in callback_call\n11\nFile \"/app/vendor/bundle/ruby/2.4.0/gems/omniauth-1.3.1/lib/omniauth/strategy.rb\" line 184 in call!\n12\nFile \"/app/vendor/bundle/ruby/2.4.0/gems/omniauth-1.3.1/lib/omniauth/strategy.rb\" line 164 in call\n13\nFile \"/app/vendor/bundle/ruby/2.4.0/gems/omniauth-1.3.1/lib/omniauth/builder.rb\" line 63 in call\n</code></pre>\n\n<p>I couldn't find anyway to provide Basic auth credentials for Omniauth or Omniauth::Oauth2 if Oauth server is behind such authentication.</p>\n\n<p>Another way could be to whitelist IP address of staging clients on the staging Oauth server. As we are using Heroku, apps run on highly dynamic IP addresses. Some heroku addons allow to route outbound trafic through statig IPs BUT I need to programmatically setup a proxy. And I could not find the way to configure this proxy for Oauth requests.</p>\n\n<p>Anybody ran into such issue and found a workaround ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave"], "comments": [{"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 0, "creation_date": 1527695201, "post_id": 50608779, "comment_id": 88227307, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16918588/uploading-a-remote-file-url-from-rails-console-with-carrierwave\">Uploading a remote file url from Rails Console with Carrierwave</a>"}], "answers": [{"comments": [{"owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "edited": false, "score": 0, "creation_date": 1527696019, "post_id": 50608831, "comment_id": 88227776, "body": "so it&#39;s <code>remote_document_url</code> ?"}], "tags": [], "owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "is_accepted": true, "score": 1, "last_activity_date": 1527695165, "creation_date": 1527695165, "answer_id": 50608831, "question_id": 50608779, "link": "https://stackoverflow.com/questions/50608779/uploading-pdf-document-with-carrier-wave-from-remote-url/50608831#50608831", "title": "Uploading pdf document with carrier wave from remote url", "body": "<p>From <a href=\"http://Source:%20https://github.com/carrierwaveuploader/carrierwave/wiki/How-to:-Upload-remote-image-urls-to-your-seedfile\" rel=\"nofollow noreferrer\">Carrierwave wiki</a>:</p>\n\n<blockquote>\n  <p>If you're looking to quickly generate some seed data for your application and don't want to upload images already stored in your\n  application you can easily upload remote images by using\n  <code>remote_[your_image_attribute_name]_url</code></p>\n\n<pre><code>    Galaxy.destroy_all\n    Galaxy.create!(name: 'Andromeda', remote_photo_url: 'http://apod.nasa.gov/apod/image/1407/m31_bers_960.jpg', address: 'next to the Milky Way')\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "accepted_answer_id": 50608831, "answer_count": 1, "score": 0, "last_activity_date": 1527695165, "creation_date": 1527695010, "question_id": 50608779, "link": "https://stackoverflow.com/questions/50608779/uploading-pdf-document-with-carrier-wave-from-remote-url", "title": "Uploading pdf document with carrier wave from remote url", "body": "<p>I m trying to generate some test data on the test environment, and have some random PDF urls that we can use for testing. My AR class looks like this :</p>\n\n<pre><code>class PDF::Template &lt; ActiveRecord::Base\n  mount_uploader :document, PdfUploader\nend\n</code></pre>\n\n<p>Using ruby code or code that I can run via rake task or via rails console? How can I upload something from random pdf url?</p>\n"}, {"tags": ["ruby", "ubuntu", "docker", "heroku", "ubuntu-18.04"], "owner": {"reputation": 3433, "user_id": 1103543, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35b084b94a763fa752804c4aa692fd5a?s=128&d=identicon&r=PG", "display_name": "JacobEvelyn", "link": "https://stackoverflow.com/users/1103543/jacobevelyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1527694992, "creation_date": 1527694992, "question_id": 50608772, "link": "https://stackoverflow.com/questions/50608772/ruby-gems-with-c-extensions-not-building-in-ubuntu", "title": "Ruby gems with C extensions not building in Ubuntu", "body": "<p>I'm trying to base a <code>Dockerfile</code> off of Heroku's new <code>heroku/heroku:18</code> image (which uses Ubuntu 18.04) and running into some issues that I didn't have in their very old <code>heroku/cedar:14</code> base image, I believe due to them having <a href=\"https://devcenter.heroku.com/articles/stack-packages\" rel=\"nofollow noreferrer\">different preinstalled packages</a>. (I updated the base image to <a href=\"https://devcenter.heroku.com/articles/heroku-18-stack\" rel=\"nofollow noreferrer\"><code>heroku/heroku:18</code></a> because I want to use the <a href=\"https://github.com/rails/webpacker\" rel=\"nofollow noreferrer\"><code>webpacker</code></a> gem and in Cedar-14 I was getting: <code>Webpacker requires Node.js &gt;= 6.0.0 and you are using 0.10.25</code>. If there's an easy way to install a newer Node in the older base image I'd love to hear it!)</p>\n\n<p>My problem is that no gems with C extensions (like <code>puma</code>, <code>pg</code>, <code>msgpack</code>, etc. etc.) install successfully with this new base Docker image. The error messages vary slightly from gem to gem but all generally say:</p>\n\n<pre><code>The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\n</code></pre>\n\n<p>Various GitHub issues with similar problems have had me try:</p>\n\n<ul>\n<li><code>apt-get install</code>ing:\n\n<ul>\n<li><code>build-essential</code></li>\n<li><code>libpq-dev</code></li>\n<li><code>libssl-dev</code></li>\n<li><code>openssl</code></li>\n<li><code>libssl1.0-dev</code></li>\n<li><code>gcc</code></li>\n<li><code>gcc-5</code></li>\n<li><code>automake</code></li>\n<li><code>make</code></li>\n</ul></li>\n<li>Using <code>heroku/heroku:18-build</code> instead of <code>heroku/heroku:18</code></li>\n</ul>\n\n<p>None of these solutions solves the issue.</p>\n\n<p>For reference, here are the relevant parts of my <code>Dockerfile</code>:</p>\n\n<pre><code>FROM heroku/heroku:18\n\nRUN apt-get update &amp;&amp; apt-get install -y nodejs --no-recommends\n\nRUN (mkdir -p /ruby &amp;&amp; cd /ruby &amp;&amp; curl https://s3-external-1.amazonaws.com/heroku-buildpack-ruby/heroku-18/ruby-2.5.0.tgz -s -o - | tar xzf - --no-same-owner)\n\nENV GEM_HOME=/ruby/gems GEM_PATH=/ruby/gems\n\nRUN gem install bundler\n\nRUN bundle install\n</code></pre>\n"}, {"tags": ["ruby", "unary-operator"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1527696492, "post_id": 50608600, "comment_id": 88228068, "body": "Ruby&#39;s convention is to omit empty argument lists, so <code>new()</code> becomes simply <code>new</code>. It&#39;s less syntax, easier to follow."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 5708657, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rgiRr-vm8yA/AAAAAAAAAAI/AAAAAAAAAFk/_hYSAxe1vJY/photo.jpg?sz=128", "display_name": "Cristian Contreras", "link": "https://stackoverflow.com/users/5708657/cristian-contreras"}, "edited": false, "score": 0, "creation_date": 1527700032, "post_id": 50608642, "comment_id": 88229892, "body": "Interesting, I thought the operator (=+) existed like it does in Java , but that does not seem to be the case. Thank you very much for the explanation."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1527706908, "post_id": 50608642, "comment_id": 88233427, "body": "@CarySwoveland I\u2019ll defer to your expertise; I have used the term token instead."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1527707345, "post_id": 50608642, "comment_id": 88233652, "body": "Bathsheba, you anticipated my comments. Whether <code>=+</code> (and more generally <code>=o</code>, where  <code>o</code> is any binary operator) is an operator is somewhat contested. Many references, such as <a href=\"https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators\" rel=\"nofollow noreferrer\">Wikibooks</a>, lists <code>=+</code> as an operator. However, <a href=\"https://ruby-doc.org/core-2.5.0/doc/syntax/assignment_rdoc.html\" rel=\"nofollow noreferrer\">Ruby docs</a> and authoritative books such as <a href=\"https://www.safaribooksonline.com/library/view/the-ruby-programming/9780596516178/ch04s05.html\" rel=\"nofollow noreferrer\">The Ruby Programming Language</a> (p. 95) refer to such constructs as <i>abbreviated assignment</i>. (cont.)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1527707351, "post_id": 50608642, "comment_id": 88233655, "body": "...As <code>x =+ y</code> is expanded to <code>x = x + y</code> when Ruby code is parsed, it seems to me to be a form of <a href=\"https://blog.appsignal.com/2018/02/20/ruby-magic-syntactic-sugar-methods.html\" rel=\"nofollow noreferrer\">syntactic sugar</a>, which argues against it being called an operator. To make things more confusing, while Ruby docs list its operators (most of which are implemented as methods), I do not believe it actually defines what constitutes an operator."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 6, "last_activity_date": 1527707010, "last_edit_date": 1527707010, "creation_date": 1527694631, "answer_id": 50608642, "question_id": 50608600, "link": "https://stackoverflow.com/questions/50608600/what-is-the-difference-between-and-in-ruby/50608642#50608642", "title": "what is the difference between += and =+ in ruby?&quot;", "body": "<p>There's no such token as <code>=+</code>; it's actually <em>two</em> tokens: assignment followed by the unary <code>+</code> operator; the latter is essentially a no-op, so <code>@@num_things =+ 1</code> is equivalent to <code>@@num_things = 1</code>.</p>\n\n<p>Since there is a <code>+=</code> token, the language parser will parse it as a single token.</p>\n\n<p>(In the early formulations of BCPL which was the precursor to C, the modern <code>-=</code> operator was written as <code>=-</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "is_accepted": false, "score": 1, "last_activity_date": 1527710197, "creation_date": 1527710197, "answer_id": 50612517, "question_id": 50608600, "link": "https://stackoverflow.com/questions/50608600/what-is-the-difference-between-and-in-ruby/50612517#50612517", "title": "what is the difference between += and =+ in ruby?&quot;", "body": "<p>Here's why:</p>\n\n<p><code>y += x</code> is the same as <code>y = x + y</code>.  <code>+=</code> works in Ruby like it does in so many other programming languages.</p>\n\n<p><code>y =+ x</code> is the same as <code>y = +x</code> is the same as <code>y = x</code>.  Ruby sees <code>=+</code> as two operators, not one.  This also holds for negative values of <code>x</code>, too.</p>\n"}], "owner": {"reputation": 83, "user_id": 5708657, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rgiRr-vm8yA/AAAAAAAAAAI/AAAAAAAAAFk/_hYSAxe1vJY/photo.jpg?sz=128", "display_name": "Cristian Contreras", "link": "https://stackoverflow.com/users/5708657/cristian-contreras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 50608642, "answer_count": 2, "score": 0, "last_activity_date": 1527710197, "creation_date": 1527694527, "last_edit_date": 1527694904, "question_id": 50608600, "link": "https://stackoverflow.com/questions/50608600/what-is-the-difference-between-and-in-ruby", "title": "what is the difference between += and =+ in ruby?&quot;", "body": "<p>The += and =+ is not working as I would expect. The following code outputs the correct value for @@num_things.</p>\n\n<pre><code>   class Thing\n     @@num_things = 0 # class variable\n\n     def initialize()\n       @@num_things += 1 # increment @@num_things\n     end\n\n     def value\n       @@num_things\n     end\n\n   end\n\n   t1 =Thing.new()\n   puts t1.value\n   t2 =Thing.new()\n   puts t2.value\n   t3 =Thing.new()\n   puts t3.value\n</code></pre>\n\n<p>The output is :</p>\n\n<pre><code>   1\n   2\n   3\n</code></pre>\n\n<p>However, if you invert the expression from += to be =+ now the output becomes </p>\n\n<pre><code>   1\n   1\n   1\n</code></pre>\n\n<p>What am i missing? I would expect the output to be the same in both cases once the value is called.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "has-many-through", "jointable"], "comments": [{"owner": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 0, "creation_date": 1527693015, "post_id": 50607452, "comment_id": 88225909, "body": "Firstly, you&#39;ll want to pluralize your <code>has_many</code> associations, e.g. <code>has_many :feedback_q_results</code>"}, {"owner": {"reputation": 11, "user_id": 7443518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f597754ee05a6e6ab17b277b0e6d4f4c?s=128&d=identicon&r=PG&f=1", "display_name": "jtw", "link": "https://stackoverflow.com/users/7443518/jtw"}, "reply_to_user": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 0, "creation_date": 1527693160, "post_id": 50607452, "comment_id": 88226003, "body": "Really? I always thought models should be singular? Either way, if I&#39;m not mistaken it shouldn&#39;t effect functionality....."}, {"owner": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 0, "creation_date": 1527694555, "post_id": 50607452, "comment_id": 88226917, "body": "The name of the model is singular, yes, such as <code>FeedbackQ</code>, but associations are &quot;english-ized&quot;. <code>has_many</code> is plural, <code>has_one</code> and <code>belongs_to</code> are singular."}, {"owner": {"reputation": 11, "user_id": 7443518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f597754ee05a6e6ab17b277b0e6d4f4c?s=128&d=identicon&r=PG&f=1", "display_name": "jtw", "link": "https://stackoverflow.com/users/7443518/jtw"}, "reply_to_user": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 0, "creation_date": 1527695021, "post_id": 50607452, "comment_id": 88227199, "body": "@XMLSlayer. Understood. That makes sense. Updated question."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1527695561, "post_id": 50607452, "comment_id": 88227534, "body": "Did I understand correctly - you want to add some existing feedback_qs to the given result? Or you want to create a new feedback_q for the given result?"}, {"owner": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 0, "creation_date": 1527695879, "post_id": 50607452, "comment_id": 88227704, "body": "Ah, almost, <code>feedback_q_results</code> instead of <code>feedback_qs_results</code>. Just pluralize at the end."}, {"owner": {"reputation": 11, "user_id": 7443518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f597754ee05a6e6ab17b277b0e6d4f4c?s=128&d=identicon&r=PG&f=1", "display_name": "jtw", "link": "https://stackoverflow.com/users/7443518/jtw"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1527695938, "post_id": 50607452, "comment_id": 88227735, "body": "@Vasilisa - Given an existing result, and a feedback_q, I want to add an entry to the join table, feedback_qs_results"}, {"owner": {"reputation": 11, "user_id": 7443518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f597754ee05a6e6ab17b277b0e6d4f4c?s=128&d=identicon&r=PG&f=1", "display_name": "jtw", "link": "https://stackoverflow.com/users/7443518/jtw"}, "reply_to_user": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 0, "creation_date": 1527696080, "post_id": 50607452, "comment_id": 88227810, "body": "@XMLSlayer - got it. Edited question."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1527696750, "post_id": 50607452, "comment_id": 88228215, "body": "You need to add checkboxes/multi-select with all FeedbackQs. In this case you&#39;ll get an array of feedback_qs_ids, and you can just update the given result with its value. Try in console <code>Result.first.feedback_qs_ids</code>. Sorry, I can&#39;t provide example of code, because I can&#39;t remember when I  wrote a form without simple_form :)"}, {"owner": {"reputation": 11, "user_id": 7443518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f597754ee05a6e6ab17b277b0e6d4f4c?s=128&d=identicon&r=PG&f=1", "display_name": "jtw", "link": "https://stackoverflow.com/users/7443518/jtw"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1527708702, "post_id": 50607452, "comment_id": 88234252, "body": "@Vasilisa The input that will get recorded (besides result_id and feedback_q_id) is the text from the text box, so no need for checkbox or multiselect....."}, {"owner": {"reputation": 11, "user_id": 7443518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f597754ee05a6e6ab17b277b0e6d4f4c?s=128&d=identicon&r=PG&f=1", "display_name": "jtw", "link": "https://stackoverflow.com/users/7443518/jtw"}, "reply_to_user": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 0, "creation_date": 1527710355, "post_id": 50607452, "comment_id": 88234998, "body": "@XMLSlayer Just a note, I actually found this SO article - <a href=\"https://stackoverflow.com/questions/11590469/rails-naming-convention-for-join-table\" title=\"rails naming convention for join table\">stackoverflow.com/questions/11590469/&hellip;</a> that says both tables in the join table should be pluralized as well, ie feedback_qs_results"}, {"owner": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 0, "creation_date": 1527712376, "post_id": 50607452, "comment_id": 88235803, "body": "@jtw If we&#39;re coming from SQL-land, then yes both names should be plural, but table names aren&#39;t necessarily important when defining associations. You can actually define them either way, Rails will figure it out, but I&#39;ve never seen an association defined with both names being pluralized."}, {"owner": {"reputation": 11, "user_id": 7443518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f597754ee05a6e6ab17b277b0e6d4f4c?s=128&d=identicon&r=PG&f=1", "display_name": "jtw", "link": "https://stackoverflow.com/users/7443518/jtw"}, "reply_to_user": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 0, "creation_date": 1527712760, "post_id": 50607452, "comment_id": 88235951, "body": "@XMLSlayer I only pluralized the last word in my models. However, in the rails command line, I&#39;m getting the following error - relation &quot;feedback_q_results&quot; does not exist.....see my comments in the answer below....Any idea why rails can&#39;t find this relation?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7443518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f597754ee05a6e6ab17b277b0e6d4f4c?s=128&d=identicon&r=PG&f=1", "display_name": "jtw", "link": "https://stackoverflow.com/users/7443518/jtw"}, "edited": false, "score": 0, "creation_date": 1527708153, "post_id": 50608315, "comment_id": 88233997, "body": "When I entered result.feedback_qs &lt;&lt; feedback_q, it gave me the error &quot;relation &quot;feedback_q_results&quot; does not exist&quot;.... My table is named feedback_qs_results which explains that......What is odd is that table was named using the &quot;rails g CreateJoinTableResultFeedbackQs&quot; command"}, {"owner": {"reputation": 11, "user_id": 7443518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f597754ee05a6e6ab17b277b0e6d4f4c?s=128&d=identicon&r=PG&f=1", "display_name": "jtw", "link": "https://stackoverflow.com/users/7443518/jtw"}, "edited": false, "score": 0, "creation_date": 1527714589, "post_id": 50608315, "comment_id": 88236631, "body": "@ Hula_Zell, any ideas?"}], "tags": [], "owner": {"reputation": 690, "user_id": 4807892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27c4610432efdb0b9ba0224b7892a10?s=128&d=identicon&r=PG&f=1", "display_name": "Hula_Zell", "link": "https://stackoverflow.com/users/4807892/hula-zell"}, "is_accepted": false, "score": 0, "last_activity_date": 1527705088, "last_edit_date": 1527705088, "creation_date": 1527693613, "answer_id": 50608315, "question_id": 50607452, "link": "https://stackoverflow.com/questions/50607452/unable-to-add-rows-to-join-table-in-rails-5-app/50608315#50608315", "title": "Unable to add rows to join table in rails 5 app", "body": "<p>If your has_many associations are working correctly, then in the rails console you should be able to do:</p>\n\n<pre><code>&gt; result.feedback_qs\n=&gt; []\n</code></pre>\n\n<p>and </p>\n\n<pre><code>&gt; feedback_q.results\n=&gt; []\n</code></pre>\n\n<p>Where <code>result</code> and <code>feedback_q</code> are are <code>Result</code> and <code>FeedbackQ</code> objects, respectively.</p>\n\n<p>To associate a feedback_q to a result, simply:</p>\n\n<pre><code>&gt; result.feedback_qs &lt;&lt; feedback_q\n</code></pre>\n\n<p>This should create a record in the <code>feedback_q_result</code> table. \nNow, when you do</p>\n\n<pre><code>&gt; result.feedback_qs\n</code></pre>\n\n<p>It should return the <code>feedback_q</code> record that you just added. </p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7443518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f597754ee05a6e6ab17b277b0e6d4f4c?s=128&d=identicon&r=PG&f=1", "display_name": "jtw", "link": "https://stackoverflow.com/users/7443518/jtw"}, "is_accepted": true, "score": 0, "last_activity_date": 1528205515, "last_edit_date": 1528205515, "creation_date": 1528146391, "answer_id": 50688769, "question_id": 50607452, "link": "https://stackoverflow.com/questions/50607452/unable-to-add-rows-to-join-table-in-rails-5-app/50688769#50688769", "title": "Unable to add rows to join table in rails 5 app", "body": "<p>I altered my original models. One issue I ran into was simple naming convention in rails, so I simplified the table names to eliminate that from the equation. New models:</p>\n\n<pre><code># result.rb\nhas_many :feedbacks\nhas_many :questions, :through =&gt; :feedbacks\n\n# question.rb\nhas_many :feedbacks\nhas_many :results, :through =&gt; :feedbacks\n\n# feedback.rb\nbelongs_to :question\nbelongs_to :result\nvalidates_uniqueness_of :question_id, scope: :result_id\n</code></pre>\n\n<p>form in my view:</p>\n\n<pre><code>&lt;%= form_for :result, url: feedback_create_result_path(result), method: :post do |form| %&gt;\n    &lt;% Question.all.each do |question| %&gt;\n    &lt;div class=\"col field\"&gt;\n    &lt;p&gt;\n        &lt;%= form.label :question, question.question_text %&gt;\n    &lt;/p&gt;\n        &lt;%= hidden_field_tag 'question[][id]', question.id %&gt;\n        &lt;%= text_area_tag 'question[][answer]', \"\", id: \"question_\" + question.id.to_s, class: \"stretch_textarea\" %&gt;\n    &lt;/div&gt;\n    &lt;% end %&gt;   \n\n&lt;div class=\"actions\"&gt;\n    &lt;%= form.submit \"Submit\", class: \"btn btn-primary\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n  \n\n<p>This <a href=\"https://stackoverflow.com/questions/30306668/passing-extra-attributes-to-join-table-when-populating-the-form-with-collection\">SO page</a> helped quite a bit as well. </p>\n"}], "owner": {"reputation": 11, "user_id": 7443518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f597754ee05a6e6ab17b277b0e6d4f4c?s=128&d=identicon&r=PG&f=1", "display_name": "jtw", "link": "https://stackoverflow.com/users/7443518/jtw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 50688769, "answer_count": 2, "score": 0, "last_activity_date": 1528205515, "creation_date": 1527691121, "last_edit_date": 1527696054, "question_id": 50607452, "link": "https://stackoverflow.com/questions/50607452/unable-to-add-rows-to-join-table-in-rails-5-app", "title": "Unable to add rows to join table in rails 5 app", "body": "<p>I have three tables - result, feedback_qs, and feedback_qs_results (join table). Given an existing result and feedback_qs, I want to populate the join table with the result_id, feedback_q_id and the subsequent answer (text_area).</p>\n\n<p>I believe the relationships are correct....</p>\n\n<pre><code># result.rb\nhas_many :feedback_q_results\nhas_many :feedback_qs, :through =&gt; :feedback_q_results\n\n# feedback_q.rb\nhas_many :feedback_q_results\nhas_many :results, :through =&gt; :feedback_q_results\n\n# feedback_q_result.rb\nbelongs_to :result\nbelongs_to :feedback_q\n</code></pre>\n\n<p>I have access to the result_id (result/result.id/feedback) via config/routes.rb below...</p>\n\n<pre><code>resources :results do\n  member do\n    get 'feedback'\n    post 'feedback_create'\n  end\nend\n</code></pre>\n\n<p>What would this form look like to populate the join table? Something similar to this (I realize this isn't correct)...? How do I take in the data through the post_controller to populate the join table? Or should it go through another controller?</p>\n\n<pre><code>&lt;%= form_for :result, url: feedback_create_result_path(result), method: :post do |form| %&gt;\n  &lt;% for q in FeedbackQ.all %&gt;\n  &lt;div class=\"col field\"&gt;\n    &lt;p&gt;\n      &lt;%= form.label q.question_text %&gt;\n    &lt;/p&gt;\n    &lt;%= text_area_tag id: q.id %&gt;\n  &lt;/div&gt;\n  &lt;% end %&gt; \n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= form.submit \"Submit\", class: \"btn btn-primary\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>What would my feedback_create method look like? While I've seen several questions regarding rails' many to many relationships and populating join tables, none of those use cases seems to suit my need. Thanks in advance.</p>\n\n<p>Update - My use case is this: user takes an exam (called a result), and they then review the proctor by answering feedback questions. I want to record the feedback in the join table</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rspec", "fabricator"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527689294, "post_id": 50606583, "comment_id": 88223195, "body": "Does your user table have a <code>company_id</code> column because the error suggests it does not"}, {"owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527690942, "post_id": 50606583, "comment_id": 88224438, "body": "@engineersmnky yeah, it does. sorry, forgot to add schema (updated question now)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527692039, "post_id": 50606583, "comment_id": 88225232, "body": "Are you sure that your test database includes that column again because the error is stating that <code>company_id</code> is not an attribute of <code>User</code>. Make sure that the spec_helper file includes this line <code>ActiveRecord::Migration.maintain_test_schema!</code> or try running <code>RAILS_ENV=test rake db:migrate</code>"}, {"owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527692362, "post_id": 50606583, "comment_id": 88225465, "body": "Great! This did it. If you could explain a bit more what this line does and how come my databases were not synched, I&#39;d happily mark it as the accepted answer."}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 1, "last_activity_date": 1527730793, "last_edit_date": 1527730793, "creation_date": 1527692908, "answer_id": 50608068, "question_id": 50606583, "link": "https://stackoverflow.com/questions/50606583/rails-rspec-fabricator-testing-associations-activemodelmissingattributeerr/50608068#50608068", "title": "rails/rspec: Fabricator - testing associations (ActiveModel::MissingAttributeError)", "body": "<p>I would write up my own answer but I am not sure that I could describe it better than <code>RSpec</code> already has so this is taken directly from <a href=\"https://relishapp.com/rspec/rspec-rails/docs/upgrade\" rel=\"nofollow noreferrer\">Here</a>: </p>\n\n<blockquote>\n  <p><strong>Rails 4.x <code>ActiveRecord::Migration</code> pending migration checks</strong></p>\n  \n  <p>If you are not using <code>ActiveRecord</code> you do not need to worry about these\n  settings.</p>\n  \n  <p>Users of Rails 4.x can now take advantage of improved schema migration and sync abilities. Prior to RSpec 3, users were required to manually run migrations in both the development and test environments. Additionally, the behavior differed depending on if the specs were run via <code>rake</code> or via the standalone <code>rspec</code> command.</p>\n  \n  <p>With the release of Rails 4, new APIs have been exposed on\n  <code>ActiveRecord::Migration</code>. This allows RSpec to take advantage of these new\n  standard migration checks, mirroring behavior across the board.</p>\n  \n  <ul>\n  <li><p>Rails 4.0.x</p>\n  \n  <p>Add the following to the top of the <code>rails_helper</code> file after Rails has\n  been required:</p>\n\n<pre><code> ActiveRecord::Migration.check_pending!\n</code></pre>\n  \n  <p>This will raise an exception if there are any pending schema changes. Users will still be required to manually keep the development and test environments in sync.</p></li>\n  <li><p>Rails 4.1+</p>\n  \n  <p>With this release there was an exciting new feature. Users no longer need to keep the development and test environments in sync. To take advantage of this add the following to the top of the <code>rails_helper</code> file after Rails has been required:</p>\n\n<pre><code> ActiveRecord::Migration.maintain_test_schema!\n</code></pre>\n  \n  <p>What this does is that rather than just raising when the test schema has\n  pending migrations, Rails will try to load the schema. An exception will\n  now only be raised if there are pending migrations afterwards the schema\n  has been loaded.</p>\n  \n  <p>There are a few caveates to be aware of when using this:</p>\n  \n  <ul>\n  <li><p>Migrations still need to be run manually; although now this only has to be done in the 'development' environment</p></li>\n  <li><p>An exception will be raised If the schema has not been initialized. The exception will provide instructions stating <code>rake db:migrate</code> needs to be run.</p></li>\n  </ul></li>\n  </ul>\n  \n  <p>It is possible to opt-out of checking for pending migrations. Since this is\n  actually a feature of Rails, the change needs to be done as part of the Rails\n  configuration. To do this, add the following to your <code>config/environments/test.rb</code> file:</p>\n\n<pre><code>config.active_record.maintain_test_schema = false\n</code></pre>\n  \n  <p>New RSpec projects don't need to worry about these commands as the <code>rails generate rspec:install</code> will add them automatically.</p>\n</blockquote>\n"}], "owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 50608068, "answer_count": 1, "score": 0, "last_activity_date": 1527730793, "creation_date": 1527688624, "last_edit_date": 1527690911, "question_id": 50606583, "link": "https://stackoverflow.com/questions/50606583/rails-rspec-fabricator-testing-associations-activemodelmissingattributeerr", "title": "rails/rspec: Fabricator - testing associations (ActiveModel::MissingAttributeError)", "body": "<p>I am writing tests for my models and came across an error I can't seem to resolve. I'm using rspec and Fabricator. Things work fine when being tested in isolation but when I try to test for associations I get an ActiveModel::MissingAttributeError.</p>\n\n<p><strong>models/user.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  ...\n  validates :email, uniqueness: true, presence: true\n  belongs_to :company, required: false\nend\n</code></pre>\n\n<p><strong>models/company.rb</strong></p>\n\n<pre><code>class Company &lt; ApplicationRecord\n  validates :organisation_number, uniqueness: true, presence: true\n  has_many :users, dependent: :destroy\nend\n</code></pre>\n\n<p><strong>schema</strong></p>\n\n<pre><code>create_table \"companies\", force: :cascade do |t|\n  t.string \"organisation_number\"\n  ...\nend\n\ncreate_table \"users\", id: :serial, force: :cascade do |t|\n    t.string \"email\", default: \"\", null: false\n    ...\n    t.bigint \"company_id\"\n    t.index [\"company_id\"], name: \"index_users_on_company_id\"\n    ...\n  end\n</code></pre>\n\n<p><strong>fabricators/user_fabricator.rb</strong></p>\n\n<pre><code>Fabricator :user do\n  email { Faker::Internet.email }\n  password '123456'\n  confirmed_at Time.now\nend\n</code></pre>\n\n<p><strong>fabricators/company_fabricator.rb</strong></p>\n\n<pre><code>Fabricator :company do\n  organisation_number { Faker::Company.swedish_organisation_number }\nend\n</code></pre>\n\n<p><strong>spec/user_spec.rb</strong> (first test passes, the second fails)</p>\n\n<pre><code>describe User do\n  context '#create' do\n    it 'Creates a user when correct email and password provided' do\n      user = Fabricate(:user)\n      expect(user).to be_valid\n    end\n    it 'Lets assign a company to user' do\n      company = Fabricate(:company)\n      expect(Fabricate.build :user, company: company).to be_valid\n    end\n  end\nend\n</code></pre>\n\n<p>I also tried adding a company straight to the User fabricator, like so (which seems to me like a correct implementation of the <a href=\"https://www.fabricationgem.org/\" rel=\"nofollow noreferrer\">documentation</a>):</p>\n\n<pre><code>Fabricator :user do\n  email { Faker::Internet.email }\n  password '123456'\n  confirmed_at Time.now\n  company\nend\n</code></pre>\n\n<p>and the other way around, adding users to the Company fabricator, like so:</p>\n\n<pre><code>Fabricator :company do\n  organisation_number { Faker::Company.swedish_organisation_number }\n  users(count: 3) { Fabricate(:user) }\nend\n</code></pre>\n\n<p>but both approaches left me with the same error:</p>\n\n<p>User#create Lets assign a company to user \nFailure/Error: company = Fabricate(:company)<br>\nActiveModel::MissingAttributeError: can't write unknown attribute 'company_id'</p>\n\n<p>Any suggestions on what I'm doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1527685415, "post_id": 50605337, "comment_id": 88220225, "body": "<code>video_params</code> is not a number, so <code>@video.category_ids = [video_params]</code> does not work. That&#39;s what the error is telling you,"}, {"owner": {"reputation": 38, "user_id": 9429285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0461bc35dc0a45e82674449bc821cbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Radek", "link": "https://stackoverflow.com/users/9429285/radek"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527685702, "post_id": 50605337, "comment_id": 88220428, "body": "So what i should write there, becouse how i write @video.category_ids = &quot;request with form&quot; it works but  value is empty and record don&#39;t save in pivot table"}], "answers": [{"comments": [{"owner": {"reputation": 38, "user_id": 9429285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0461bc35dc0a45e82674449bc821cbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Radek", "link": "https://stackoverflow.com/users/9429285/radek"}, "edited": false, "score": 0, "creation_date": 1527687806, "post_id": 50605990, "comment_id": 88222077, "body": "Thanks for your answer when i&#39;ve made your changes there is no errors but record don&#39;t save in pvot table"}, {"owner": {"reputation": 166, "user_id": 5961910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GmFPy.jpg?s=128&g=1", "display_name": "Stephan Wiehr", "link": "https://stackoverflow.com/users/5961910/stephan-wiehr"}, "reply_to_user": {"reputation": 38, "user_id": 9429285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0461bc35dc0a45e82674449bc821cbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Radek", "link": "https://stackoverflow.com/users/9429285/radek"}, "edited": false, "score": 0, "creation_date": 1527688073, "post_id": 50605990, "comment_id": 88222293, "body": "Can you post what the function <code>video_params</code> returns?"}, {"owner": {"reputation": 38, "user_id": 9429285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0461bc35dc0a45e82674449bc821cbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Radek", "link": "https://stackoverflow.com/users/9429285/radek"}, "edited": false, "score": 0, "creation_date": 1527688312, "post_id": 50605990, "comment_id": 88222442, "body": "{&quot;title&quot;=&gt;&quot;sdsd&quot;, &quot;url&quot;=&gt;&quot;sdsd&quot;, &quot;description&quot;=&gt;&quot;sdsd&quot;, &quot;category_ids&quot;=&gt;[&quot;&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;]} and what first record i array categoty_ids is empty ? mamy this is reason ?"}, {"owner": {"reputation": 38, "user_id": 9429285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0461bc35dc0a45e82674449bc821cbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Radek", "link": "https://stackoverflow.com/users/9429285/radek"}, "edited": false, "score": 0, "creation_date": 1527688515, "post_id": 50605990, "comment_id": 88222604, "body": "When i chceck this array category_ids return [ ]"}, {"owner": {"reputation": 166, "user_id": 5961910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GmFPy.jpg?s=128&g=1", "display_name": "Stephan Wiehr", "link": "https://stackoverflow.com/users/5961910/stephan-wiehr"}, "reply_to_user": {"reputation": 38, "user_id": 9429285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0461bc35dc0a45e82674449bc821cbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Radek", "link": "https://stackoverflow.com/users/9429285/radek"}, "edited": false, "score": 0, "creation_date": 1527688588, "post_id": 50605990, "comment_id": 88222668, "body": "Updated the change proposal for <code>video_params</code>, see above"}], "tags": [], "owner": {"reputation": 166, "user_id": 5961910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GmFPy.jpg?s=128&g=1", "display_name": "Stephan Wiehr", "link": "https://stackoverflow.com/users/5961910/stephan-wiehr"}, "is_accepted": true, "score": 2, "last_activity_date": 1527688549, "last_edit_date": 1527688549, "creation_date": 1527686938, "answer_id": 50605990, "question_id": 50605337, "link": "https://stackoverflow.com/questions/50605337/i-cant-save-record-in-sqlite-rails/50605990#50605990", "title": "I can&#39;t save record in sqlite Rails", "body": "<p>I would suggest the following changes:</p>\n\n<ol>\n<li><p>In _form.html.erb pluralize the name of the select, i.e. change</p>\n\n<pre><code>&lt;%= f.select(:category_id, @categories.map{|t| [t.name, t.id]}, {}, :multiple =&gt; true, :class =&gt; 'custom-select') %&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;%= f.select(:category_ids, @categories.map{|t| [t.name, t.id]}, {}, :multiple =&gt; true, :class =&gt; 'custom-select') %&gt;\n</code></pre></li>\n<li><p>In videos_controller.rb change</p>\n\n<pre><code>def video_params\n  params.require(:video).permit(:title, :url, :description, category_attributes: [:id]).merge(user_id: session[:user_id])\nend\n</code></pre>\n\n<p>to</p>\n\n<pre><code>def video_params\n  params[:video][:category_ids].reject!(&amp;:blank?) unless params[:video][:category_ids].nil?\n  params.require(:video).permit(:title, :url, :description, category_ids: []).merge(user_id: session[:user_id])\nend\n</code></pre></li>\n<li><p>Also in videos_controller.rb remove</p>\n\n<pre><code>@video.category_ids = [video_params]\n</code></pre>\n\n<p>to leave things to the constructor</p></li>\n</ol>\n\n<p>Regarding 2. I am not 100% sure about the exact solution, maybe you should also reject the empty id you have in your parameters (according to the provided screenshot, use <code>.reject!(&amp;:blank?)</code> for that) - for analyzing further problems check the output of the <code>video_params</code> function before passing it to the constructor - it basically should look like a hash representation of the expected object.</p>\n\n<p><strong>edit</strong> Updated the change proposal for 2. regarding category_ids</p>\n"}], "owner": {"reputation": 38, "user_id": 9429285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0461bc35dc0a45e82674449bc821cbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Radek", "link": "https://stackoverflow.com/users/9429285/radek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 50605990, "answer_count": 1, "score": 1, "last_activity_date": 1527688549, "creation_date": 1527685037, "last_edit_date": 1527685392, "question_id": 50605337, "link": "https://stackoverflow.com/questions/50605337/i-cant-save-record-in-sqlite-rails", "title": "I can&#39;t save record in sqlite Rails", "body": "<p>I try save record on database, in pivot table but I have a error(screen) if I write <code>@video.category_ids = 1</code> it works but category id = 1 in database</p>\n\n<p>Below I put my code if you neeed more information please write.</p>\n\n<p>videos_controller.rb</p>\n\n<pre><code>class VideosController &lt; ApplicationController\n\n  layout 'master'\n  before_action :chceck_login\n\n  def index\n    @videos = Video.sortASC\n  end\n\n  def new\n    @categories = Category.all\n  end\n\n  def create\n    @video = Video.new(video_params)\n    @video.category_ids = [video_params]\n    if @video.save\n      flash[:notice] = 'The movie has been added successfuly'\n      redirect_to(:action =&gt; 'index')\n    else\n      @categories = Category.all\n      render('new')\n    end\n  end\n\n  def show\n  end\n\n  def edit\n  end\n\n  def delete\n  end\n\n  private\n\n  def video_params\n    params.require(:video).permit(:title, :url, :description, category_attributes: [:id]).merge(user_id: session[:user_id])\n  end\n\nend\n</code></pre>\n\n<p>_form_html.erb</p>\n\n<pre><code>&lt;div class=\"input-group mb-3\"&gt;\n  &lt;div class=\"input-group-prepend\"&gt;\n    &lt;span class=\"input-group-text\" id=\"basic-addon1\"&gt;&lt;i class=\"fas fa-tag\"&gt;&lt;/i&gt;&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;%= f.text_field :title, placeholder: 'Title', :class =&gt; 'form-control', :id =&gt; 'title' %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"input-group mb-3\"&gt;\n  &lt;div class=\"input-group-prepend\"&gt;\n    &lt;span class=\"input-group-text\" id=\"basic-addon1\"&gt;&lt;i class=\"fas fa-link\"&gt;&lt;/i&gt;&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;%= f.text_field :url, placeholder: 'URL', :class =&gt; 'form-control', :id =&gt; 'url' %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"input-group mb-3\"&gt;\n  &lt;div class=\"input-group-prepend\"&gt;\n    &lt;span class=\"input-group-text\" id=\"basic-addon1\"&gt;&lt;i class=\"fas fa-edit\"&gt;&lt;/i&gt;&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;%= f.text_area :description, placeholder: 'Description', rows: 5, :class =&gt; 'form-control', :id =&gt; 'description' %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"input-group mb-3\"&gt;\n  &lt;div class=\"input-group-prepend\"&gt;\n    &lt;span class=\"input-group-text\" id=\"basic-addon1\"&gt;&lt;i class=\"fas fa-sitemap\"&gt;&lt;/i&gt;&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;%= f.select(:category_id, @categories.map{|t| [t.name, t.id]}, {}, :multiple =&gt; true, :class =&gt; 'custom-select') %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>video.rb</p>\n\n<pre><code>class Video &lt; ApplicationRecord\n\n  belongs_to :user\n  has_and_belongs_to_many :categories\n\n  scope :sortASC, lambda{order(\"videos.created_at ASC\")}\n\nend\n</code></pre>\n\n<p>new.html.erb</p>\n\n<pre><code>&lt;% @page_title = 'Add Film' %&gt;\n\n&lt;div class='container'&gt;\n  &lt;div class='row'&gt;\n    &lt;div class='col s-6'&gt;\n      &lt;div class=\"jumbotron jumbotron-fluid bg-info\"&gt;\n        &lt;div class=\"container\"&gt;\n          &lt;h1 class=\"display-4 text-center\"&gt;ADD NEW FILM &lt;i class=\"fas fa-plus\"&gt;&lt;/i&gt;&lt;/h1&gt;\n          &lt;p class=\"lead\"&gt;This is a modified jumbotron that occupies the entire horizontal space of its parent.&lt;/p&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class='col s-6'&gt;\n      &lt;%= form_for(:video, :url =&gt; {:action =&gt; 'create'}) do |f| %&gt;\n        &lt;%= render(:partial =&gt; 'form', :locals =&gt; {:f =&gt; f}) %&gt;\n        &lt;%= submit_tag('Add Film', :class =&gt; 'btn btn-primary float-right') %&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Error \n<a href=\"https://imgur.com/7P4WpMU\" rel=\"nofollow noreferrer\">https://imgur.com/7P4WpMU</a></p>\n\n<p>If you want I have put my project on Github. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 1, "creation_date": 1527683033, "post_id": 50604445, "comment_id": 88218475, "body": "You can take reference from this: <a href=\"https://stackoverflow.com/questions/9879169/how-to-get-twitter-bootstrap-navigation-to-show-active-link\" title=\"how to get twitter bootstrap navigation to show active link\">stackoverflow.com/questions/9879169/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1527684707, "post_id": 50604672, "comment_id": 88219692, "body": "Is this better than including the code directly such as: <code>&lt;%= &#39;active&#39; if current_page?(root_path) %&gt;</code>?"}, {"owner": {"reputation": 635, "user_id": 8439462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/boggA.jpg?s=128&g=1", "display_name": "Talha Junaid", "link": "https://stackoverflow.com/users/8439462/talha-junaid"}, "reply_to_user": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 1, "creation_date": 1527685339, "post_id": 50604672, "comment_id": 88220172, "body": "Both are same logically, but defining a function is better in a sense it makes your code reusable and clean."}], "tags": [], "owner": {"reputation": 635, "user_id": 8439462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/boggA.jpg?s=128&g=1", "display_name": "Talha Junaid", "link": "https://stackoverflow.com/users/8439462/talha-junaid"}, "is_accepted": true, "score": 2, "last_activity_date": 1527683229, "creation_date": 1527683229, "answer_id": 50604672, "question_id": 50604445, "link": "https://stackoverflow.com/questions/50604445/assigning-active-class-for-bootstrap-nav-pills-ruby-on-rails/50604672#50604672", "title": "Assigning active class for bootstrap Nav-pills - Ruby on Rails", "body": "<p>You can do this by defining a function in your application_helper.rb</p>\n\n<pre><code>def active_class(path)\n \"active\" if current_page?(path)\nend\n</code></pre>\n\n<p><code>current_page?</code> method will return active if the user is on the same url as passed in path parameter. checkout its <a href=\"https://apidock.com/rails/ActionView/Helpers/UrlHelper/current_page%3F\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n\n<p>Then in view you can use it like this.</p>\n\n<pre><code>&lt;li class=\"&lt;%= active_class new_user_session_path %&gt;\"&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 7908053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8223cdb7fe5f3ad33fe3fedd2e41dbeb?s=128&d=identicon&r=PG&f=1", "display_name": "Snawar Latif", "link": "https://stackoverflow.com/users/7908053/snawar-latif"}, "is_accepted": false, "score": 0, "last_activity_date": 1527695725, "creation_date": 1527695725, "answer_id": 50608983, "question_id": 50604445, "link": "https://stackoverflow.com/questions/50604445/assigning-active-class-for-bootstrap-nav-pills-ruby-on-rails/50608983#50608983", "title": "Assigning active class for bootstrap Nav-pills - Ruby on Rails", "body": "<p>i prefer you to use these helpers below one is for single path \neg:</p>\n\n<pre><code>&lt;li class=\"&lt;%= active_class(first_path) %&gt;\"&gt;\n\ndef active_class(link_path)\n current_page?(link_path) ? 'active' : ''\nend\n</code></pre>\n\n<p>this one is for multiple array of links \neg </p>\n\n<pre><code>&lt;li class=\"&lt;%= active_class_multiple([first_path, second_path]) %&gt;\"&gt;\n\n# pass array of paths to get current page active link\ndef active_class_multiple(array)\n  array.include?(request.path) ? 'active' : ''\nend\n</code></pre>\n"}], "owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 50604672, "answer_count": 2, "score": -1, "last_activity_date": 1527695725, "creation_date": 1527682459, "last_edit_date": 1527685165, "question_id": 50604445, "link": "https://stackoverflow.com/questions/50604445/assigning-active-class-for-bootstrap-nav-pills-ruby-on-rails", "title": "Assigning active class for bootstrap Nav-pills - Ruby on Rails", "body": "<p>I have a blog section in my rails app and was wondering what a good way to handle assigning the CSS class <code>active</code> would be, based on the page that would be open.</p>\n\n<p>Should this be done via <code>.erb</code> with <code>if</code> and <code>do</code> statements? It would need to reflect the category the post is in.</p>\n\n<p><strong>Blog Category Table:</strong></p>\n\n<pre><code>create_table \"blog_categories\", force: :cascade do |t|\n  t.string \"name\"\n  t.integer \"parent_id\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\nend\n</code></pre>\n\n<p><strong>Posts Table Column:</strong> <code>t.integer \"category_id\"</code> - This is stored  to relate to the <code>.id</code> of the cat.</p>\n\n<p>My categories are represented with a <code>parent_id</code> of <code>NULL</code> and subcategories are those with a <code>parent_id</code> set to the <code>.id</code> of the main category.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "is_accepted": false, "score": 1, "last_activity_date": 1527710833, "creation_date": 1527710833, "answer_id": 50612628, "question_id": 50604346, "link": "https://stackoverflow.com/questions/50604346/how-to-calculate-the-eigenvector-of-a-many-to-many-model/50612628#50612628", "title": "How to calculate the eigenvector of a many-to-many model?", "body": "<p>Using Ruby's Matrix::EigenvalueDecomposition class perhaps?</p>\n\n<pre><code>m = Matrix[ [1, 2, 3], [4, 5, 6], [7, 8, 9] ]\nMatrix::EigenvalueDecomposition.new(m).eigenvalues\n  =&gt; [16.116843969807057, -1.1168439698070447, -8.046297179356069e-16] \n\nMatrix::EigenvalueDecomposition.new(m).eigenvectors\n  =&gt; [Vector[0.23197068724628633, 0.5253220933012341, 0.8186734993561815], Vector[0.8169642040610365, 0.09018835790853766, -0.6365874882439635], Vector[0.40824829046386324, -0.8164965809277259, 0.40824829046386263]] \n</code></pre>\n\n<p>See\n<a href=\"https://docs.ruby-lang.org/en/2.5.0/Matrix/EigenvalueDecomposition.html\" rel=\"nofollow noreferrer\">https://docs.ruby-lang.org/en/2.5.0/Matrix/EigenvalueDecomposition.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 8834422, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-djVL1US9WUc/AAAAAAAAAAI/AAAAAAAAACM/U6K1PDEd1tc/photo.jpg?sz=128", "display_name": "Amadeus Pagel", "link": "https://stackoverflow.com/users/8834422/amadeus-pagel"}, "is_accepted": false, "score": 0, "last_activity_date": 1527775141, "creation_date": 1527775141, "answer_id": 50626092, "question_id": 50604346, "link": "https://stackoverflow.com/questions/50604346/how-to-calculate-the-eigenvector-of-a-many-to-many-model/50626092#50626092", "title": "How to calculate the eigenvector of a many-to-many model?", "body": "<p>Use <a href=\"https://github.com/dcadenas/rankable_graph\" rel=\"nofollow noreferrer\">rankable_graph</a>.</p>\n\n<p>A \"gem mostly writen in C with a pretty Ruby wrapper. It's intended to be used for big but not huge graphs, as those are better processed with a map-reduce distributed solution.\"</p>\n"}], "owner": {"reputation": 75, "user_id": 8834422, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-djVL1US9WUc/AAAAAAAAAAI/AAAAAAAAACM/U6K1PDEd1tc/photo.jpg?sz=128", "display_name": "Amadeus Pagel", "link": "https://stackoverflow.com/users/8834422/amadeus-pagel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1527775141, "creation_date": 1527682163, "question_id": 50604346, "link": "https://stackoverflow.com/questions/50604346/how-to-calculate-the-eigenvector-of-a-many-to-many-model", "title": "How to calculate the eigenvector of a many-to-many model?", "body": "<p>I have a many to many model representing a dependency graph. How can I calculate the eigenvector of that graph?</p>\n\n<p>There's a Relation model:</p>\n\n<pre><code>class Relation &lt; ApplicationRecord\n    belongs_to :dependency, class_name: \"Article\"\n    belongs_to :dependent, class_name: \"Article\"\nend\n</code></pre>\n\n<p>And a Relation table:</p>\n\n<pre><code>create_table \"relations\", force: :cascade do |t|\n    t.integer \"dependency_id\"\n    t.integer \"dependent_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"user_id\"\n    t.index [\"dependency_id\", \"dependent_id\", \"user_id\"], name: \"index_relations_on_dependency_id_and_dependent_id_and_user_id\", unique: true\n    t.index [\"dependency_id\"], name: \"index_relations_on_dependency_id\"\n    t.index [\"dependent_id\"], name: \"index_relations_on_dependent_id\"\n    t.index [\"user_id\"], name: \"index_relations_on_user_id\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "sendmail", "ruby-on-rails-4.2"], "comments": [{"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 2, "creation_date": 1527680871, "post_id": 50603633, "comment_id": 88216946, "body": "I don&#39;t know exactly what you mean by &quot;is in the E-Mail body&quot;, maybe it&#39;s confusing because your mail client show&#39;s it somehow inline? but from the EML I can say that it&#39;s stored as an attachment"}, {"owner": {"reputation": 386, "user_id": 7141412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff78855b8cb85ac032aca87155063a5?s=128&d=identicon&r=PG&f=1", "display_name": "MysteriousNothing", "link": "https://stackoverflow.com/users/7141412/mysteriousnothing"}, "reply_to_user": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1527681339, "post_id": 50603633, "comment_id": 88217265, "body": "@siegy22 After sending mail I receive email with this text in body section I ment."}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1527681438, "post_id": 50603633, "comment_id": 88217338, "body": "Can you upload your E-Mail? the .eml file?"}], "answers": [{"comments": [{"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 1, "creation_date": 1527681512, "post_id": 50604070, "comment_id": 88217395, "body": "Can you describe what you changed and why?"}, {"owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "reply_to_user": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1527681803, "post_id": 50604070, "comment_id": 88217599, "body": "mailer.attachments[&#39;errors_in_address_table.csv&#39;] = saved_file #changed this line"}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1527682397, "post_id": 50604070, "comment_id": 88218046, "body": "The API does not say anything about this: <a href=\"http://api.rubyonrails.org/v5.0/classes/ActionMailer/Base.html#method-i-attachments\" rel=\"nofollow noreferrer\">api.rubyonrails.org/v5.0/classes/ActionMailer/&hellip;</a>"}, {"owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "reply_to_user": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1527683192, "post_id": 50604070, "comment_id": 88218593, "body": "As stated in  <a href=\"http://api.rubyonrails.org/v5.0/classes/ActionMailer/Base.html#method-i-attachments\" rel=\"nofollow noreferrer\">api.rubyonrails.org/v5.0/classes/ActionMailer/&hellip;</a> ,  mail.attachments[&#39;filename.jpg&#39;] = File.read(&#39;/path/to/filename.jpg&#39;)  Need to specify the file path in attachments"}, {"owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "edited": false, "score": 0, "creation_date": 1527685322, "post_id": 50604070, "comment_id": 88220163, "body": "yes..I have also written the same things..  mail.attachments[&#39;filename.jpg&#39;] = File.read(&#39;/path/to/filename.jpg&#39;)"}], "tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": false, "score": -1, "last_activity_date": 1527681380, "creation_date": 1527681380, "answer_id": 50604070, "question_id": 50603633, "link": "https://stackoverflow.com/questions/50603633/rails-mail-attachment-is-in-e-mail-body/50604070#50604070", "title": "Rails mail attachment is in e-mail body", "body": "<p>As per the description shared, it seems like you need to modify attachments code</p>\n\n<pre><code>saved_file = Rails.root.join('db', 'fix_db', 'errors_in_address_table.csv')\nmailer = ActionMailer::Base.mail(from: 'no-replay@test.com', to:    'test@test.com', subject: 'Errors in database', body: '', content_type: 'multipart/mixed')\nmailer.attachments['errors_in_address_table.csv'] = saved_file\nmailer.deliver\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 386, "user_id": 7141412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff78855b8cb85ac032aca87155063a5?s=128&d=identicon&r=PG&f=1", "display_name": "MysteriousNothing", "link": "https://stackoverflow.com/users/7141412/mysteriousnothing"}, "edited": false, "score": 0, "creation_date": 1527760374, "post_id": 50613180, "comment_id": 88252547, "body": "No, I do not have view for mailer. I needed to keep it simple as possible. Can I do it without adding view for mailer?"}], "tags": [], "owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "is_accepted": false, "score": 0, "last_activity_date": 1527721685, "last_edit_date": 1527721685, "creation_date": 1527713503, "answer_id": 50613180, "question_id": 50603633, "link": "https://stackoverflow.com/questions/50603633/rails-mail-attachment-is-in-e-mail-body/50613180#50613180", "title": "Rails mail attachment is in e-mail body", "body": "<p>I have some different bits of code for attachment in my app, I am not sure this could work for you but you may give it a try. </p>\n\n<p>Try to replace your block </p>\n\n<pre><code>saved_file = Rails.root.join('db', 'fix_db', 'errors_in_address_table.csv')\nmailer = ActionMailer::Base.mail(from: 'no-replay@test.com', to: 'test@test.com', subject: 'Errors in database', body: '', content_type: 'multipart/mixed')\nmailer.attachments['errors_in_address_table.csv'] = { mime_type: 'text/csv', content: File.read(saved_file) }\nmailer.deliver\n</code></pre>\n\n<p>with the following which is a bit simpler: </p>\n\n<pre><code>attachments['errors_in_address_table.csv'] = open(Rails.root.join('db', 'fix_db', 'errors_in_address_table.csv')).read\nmail(from: 'no-replay@test.com', to: 'test@test.com', subject: 'Errors in database', body: '')\n</code></pre>\n\n<p>This is really a trial and error approach. I will delete if it doesn't work.</p>\n\n<p>Also do you have a view for your mailer ?</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 14057492, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/2c6146851075055f3470c0d447534ea9?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/14057492/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1596682302, "creation_date": 1596682302, "answer_id": 63276149, "question_id": 50603633, "link": "https://stackoverflow.com/questions/50603633/rails-mail-attachment-is-in-e-mail-body/63276149#63276149", "title": "Rails mail attachment is in e-mail body", "body": "<p>For anyone else stumbling across this, this should work (at least in Rails 6+) from the Rails console:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>mailer = ActionMailer::Base.new\nmailer.attachments['errors_in_address_table.csv'] = File.read(saved_file)\nmailer.mail(from: 'from@test.com', to: 'to@test.com', subject: 'Errors', body: '').deliver\n</code></pre>\n"}], "owner": {"reputation": 386, "user_id": 7141412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff78855b8cb85ac032aca87155063a5?s=128&d=identicon&r=PG&f=1", "display_name": "MysteriousNothing", "link": "https://stackoverflow.com/users/7141412/mysteriousnothing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1388, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1596682302, "creation_date": 1527680086, "last_edit_date": 1527690155, "question_id": 50603633, "link": "https://stackoverflow.com/questions/50603633/rails-mail-attachment-is-in-e-mail-body", "title": "Rails mail attachment is in e-mail body", "body": "<p>I need to send simple mail with an attachment. Right now it sends an email but attachment is in the e-mail body like this. \n<a href=\"https://i.stack.imgur.com/Kt8q3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Kt8q3.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>--\nContent-Type: text/csv;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment;\n filename=errors_in_address_table.csv\nContent-ID: &lt;5b0e7d6b4abff_10c12ac224c8b0d4994d@development.mail&gt;\n</code></pre>\n\n<p><strong>Current code to send email</strong></p>\n\n<pre><code>saved_file = Rails.root.join('db', 'fix_db', 'errors_in_address_table.csv')\nmailer = ActionMailer::Base.mail(from: 'no-replay@test.com', to: 'test@test.com', subject: 'Errors in database', body: '', content_type: 'multipart/mixed')\nmailer.attachments['errors_in_address_table.csv'] = { mime_type: 'text/csv', content: File.read(saved_file) }\nmailer.deliver\n</code></pre>\n\n<p>I tried to get this to work correctly for hours. Maybe some more experienced coder can help me.</p>\n"}, {"tags": ["ruby", "regex", "string"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1527680103, "post_id": 50603609, "comment_id": 88216405, "body": "I&#39;m a bit scared off when I see that only the first row has 4 actual columns, while all other rows only have 3.  Is this a typo, or is your data actually like this?"}, {"owner": {"reputation": 6227, "user_id": 808533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/qSPq0.jpg?s=128&g=1", "display_name": "prasad.surase", "link": "https://stackoverflow.com/users/808533/prasad-surase"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1527680315, "post_id": 50603609, "comment_id": 88216547, "body": "@TimBiegeleisen its the actual data."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1527680865, "post_id": 50603609, "comment_id": 88216938, "body": "What are column delimiters? If you can define the pattern, you may use a regex. Else, you should do that manually."}, {"owner": {"reputation": 6227, "user_id": 808533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/qSPq0.jpg?s=128&g=1", "display_name": "prasad.surase", "link": "https://stackoverflow.com/users/808533/prasad-surase"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1527681177, "post_id": 50603609, "comment_id": 88217144, "body": "@WiktorStribi\u017cew we don&#39;t have any column delimiters. The presence of more than 1 space can be assumed to be. The only thing that we have is the string with newline chars. I broke the string on newline char and have this array. Only regex wont help cause the last row string has only 2 words which logically belong to the last column."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1527681353, "post_id": 50603609, "comment_id": 88217273, "body": "So, you asked a question that has no answer as you have no specifications."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527681446, "post_id": 50603609, "comment_id": 88217344, "body": "That data is supposed to be read column-wise not row-wise."}, {"owner": {"reputation": 6227, "user_id": 808533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/qSPq0.jpg?s=128&g=1", "display_name": "prasad.surase", "link": "https://stackoverflow.com/users/808533/prasad-surase"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1527681528, "post_id": 50603609, "comment_id": 88217408, "body": "@WiktorStribi\u017cew not completely true. the array is a collection of strings. the words in each string start at any index. We can assume that the words in the following strings will start at the same indices as the words in the first one."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1527681628, "post_id": 50603609, "comment_id": 88217473, "body": "Then post your code. Without it, the question is off-topic."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527681639, "post_id": 50603609, "comment_id": 88217481, "body": "<i>&quot;will start at the same indices&quot;</i> \u2013 they don&#39;t, your first row is off by 2 chars."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527681674, "post_id": 50603609, "comment_id": 88217501, "body": "@prasad.surase where does the data come from?"}, {"owner": {"reputation": 6227, "user_id": 808533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/qSPq0.jpg?s=128&g=1", "display_name": "prasad.surase", "link": "https://stackoverflow.com/users/808533/prasad-surase"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1527682106, "post_id": 50603609, "comment_id": 88217807, "body": "@WiktorStribi\u017cew i am currently trying to use &quot;a,b,c,d = arr.first.scan(/\\s{2,}\\S{2}/).map{|substr| arr.first.index(substr.strip) }&quot;"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527682224, "post_id": 50603609, "comment_id": 88217896, "body": "Thanks for the edit. I assume your PDF is <a href=\"http://highcourtofsikkim.nic.in/hcs/sites/default/files/Cause%20List/20062017_3008_1001.pdf\" rel=\"nofollow noreferrer\">20062017_3008_1001.pdf</a>? If so, your PDF library did a lousy job. The PDF already contains columns. Try to select the text with Adobe Acrobat (or any other sane PDF tool) and you&#39;ll see that it gets selected column-wise (not row-wise)."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527682325, "post_id": 50603609, "comment_id": 88217989, "body": "BTW, your first column is probably off by 2 characters because you are missing the initial <code>3)</code>."}, {"owner": {"reputation": 6227, "user_id": 808533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/qSPq0.jpg?s=128&g=1", "display_name": "prasad.surase", "link": "https://stackoverflow.com/users/808533/prasad-surase"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527682336, "post_id": 50603609, "comment_id": 88218003, "body": "@Stefan agreed that it&#39;s an lousy job but its not generated by us. else, we wouldn&#39;t be parsing it. It should be programatically solvable."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527682429, "post_id": 50603609, "comment_id": 88218064, "body": "@prasad.surase the PDF is fine, they did a good job. It&#39;s your parsing tool that is faulty. It doesn&#39;t handle the text flow correctly."}, {"owner": {"reputation": 6227, "user_id": 808533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/qSPq0.jpg?s=128&g=1", "display_name": "prasad.surase", "link": "https://stackoverflow.com/users/808533/prasad-surase"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527682532, "post_id": 50603609, "comment_id": 88218129, "body": "@stefan I get the first string after using docsplit. The problem is, thats all the data I have. I am trying to find a solution or pointers to the possible approaches that can get me a solution."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527682904, "post_id": 50603609, "comment_id": 88218387, "body": "<i>&quot;after using docsplit&quot;</i> \u2013 show your code, please. How to you invoke docsplit?"}, {"owner": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "edited": false, "score": 1, "creation_date": 1527726309, "post_id": 50603609, "comment_id": 88239886, "body": "Parsing stuff like this into data structures has literally been my profession for most of the last 28 years.  Unfortunately, there is no generic answer; you will have to [a] make up a spec that fits the data, [b] write custom parser code to that spec, [c] pray to the god(s) that the data never violates your made-up spec in the future.  I am actually using my experience in this field to create a more generic tool, but it is extremely proprietary, and very expensive.  :)"}, {"owner": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "edited": false, "score": 0, "creation_date": 1527728350, "post_id": 50603609, "comment_id": 88240359, "body": "Step 1: develop a &quot;column analyzer&quot; class that injests multiple lines and analyzes them for column left/right positions, and spits them out.  This would probably iteratively use <code>String#match</code> and <code>MatchData#offset</code> to find column starting/ending positions.  The patterns <code>\\s\\s\\w</code> and <code>\\w\\s\\s</code> would be useful for left/right column positions.  The analysis would adjust based on min (for left) and max(for right) before returning.  Step 2: use the column positions from the analysis and extract strings using <code>String#[]</code> and <code>String#strip!</code>"}], "answers": [{"tags": [], "owner": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "is_accepted": true, "score": 1, "last_activity_date": 1527740720, "last_edit_date": 1527740720, "creation_date": 1527736693, "answer_id": 50616135, "question_id": 50603609, "link": "https://stackoverflow.com/questions/50603609/split-a-array-of-strings-of-words-while-maintaining-the-word-column-order/50616135#50616135", "title": "split a array of strings of words while maintaining the word column order", "body": "<p>Here's my solution based on my comment above:</p>\n\n<pre><code>require 'pp'\n\ntest_array = [\"        WP(PIL)/7/2013        PUBLIC AND PANCHAYAT               MS PEMA BHUTIA            MR. S.K. CHETTRI,\",\n\"                                KABI LUNGCHUK                      MS PANILA THEENGH         ASST. GOVT.\",\n\"                                CONSTITUENCY, NORTH                MS MON MAYA SUBBA         ADVOCATE\",\n\"                                SIKKIM                             MS TASHI DOMA SHERPA      MR. KARMA THINLAY,\",\n\"                                Vs                                 MR SANGAY GURMEY          CENTRAL GOVT.\",\n\"                                THE SECRETARY, MINISTRY            BHUTIA                    COUNSEL\",\n\"                                OF SURFACE TRANSPORT               MR. JORGAY NAMKA          MR THINLAY DORJEE\",\n\"                                AND ORS.                           MR. ZANGPO SHERPA,        BHUTIA\",\n\"                                                                   AMICUS CURIAE             MS POLLIN RAI, ASST.\",\n\"                                                                                             GOVT. ADVOCATE\"]\n\nclass ColumnAnalyzer\n\n  attr_reader :columns\n  attr_accessor :array\n\n  def initialize(array)\n    @array = array\n    analyze\n  end\n\n  def analyze\n    lefts = Array.new\n    rights = Array.new\n    @array.each do |line|\n      pos_left =  Array.new\n      deconstruct = line.dup\n      col = 0\n      while m = deconstruct.match(/\\s\\s[^\\s]{1}/) do\n        left = m.offset(0)[0]+1\n        pos_left[col] = col == 0 ? left : left + pos_left[col-1]\n        col += 1\n        deconstruct = deconstruct[left+1..-1]\n      end\n      lefts.push pos_left\n      pos_right = Array.new\n      deconstruct = line.dup\n      col = 0\n      while m = deconstruct.match(/[^\\s]{1}\\s\\s/) do\n        right = m.offset(0)[0]\n        pos_right[col] = col == 0 ? right : right + pos_right[col-1]\n        col += 1\n        deconstruct = deconstruct[right+1..-1]\n      end\n      pos_right.push line.length\n      rights.push pos_right\n    end\n    cols_l = lefts.collect { |a| a.size }.max \n    cols_r = rights.collect { |a| a.size }.max\n    cols = [cols_l,cols_r].max # no. of columns\n    @columns = Array.new\n    (0..cols-1).each do |col|\n      @columns[col] = Hash.new\n      @columns[col][:l] = lefts.map { |a| a[col] }.min\n      lefts.select { |a| a.size &lt; cols }.map! { |a| a.unshift 0 }\n      rights.select { |a| a.size &lt; cols }.map! { |a| a.unshift 0 }\n    end\n    (0..cols-1).each do |col|\n      @columns[col][:r]  = rights.map { |a| a[col] }.max\n    end\n  end\n\n  def extract\n    data = Array.new\n    @array.each do |line|\n      line_array = Array.new\n      @columns.each do |col|\n        line_array.push line[col[:l]..col[:r]].strip!\n      end\n      data.push line_array\n    end\n    data\n  end\n\nend\n\nca = ColumnAnalyzer.new(test_array)\ndata = ca.extract\npp ca.columns\npp data\n\n=&gt; [{:l=&gt;7, :r=&gt;21}, {:l=&gt;28, :r=&gt;54}, {:l=&gt;62, :r=&gt;85}, {:l=&gt;87, :r=&gt;113}]\n[[\"WP(PIL)/7/2013\",\n  \"PUBLIC AND PANCHAYAT\",\n  \"MS PEMA BHUTIA\",\n  \"MR. S.K. CHETTRI,\"],\n [\"\", \"KABI LUNGCHUK\", \"MS PANILA THEENGH\", \"ASST. GOVT.\"],\n [\"\", \"CONSTITUENCY, NORTH\", \"MS MON MAYA SUBBA\", \"ADVOCATE\"],\n [\"\", \"SIKKIM\", \"MS TASHI DOMA SHERP\", \"MR. KARMA THINLAY,\"],\n [\"\", \"Vs\", \"MR SANGAY GURMEY\", \"CENTRAL GOVT.\"],\n [\"\", \"THE SECRETARY, MINISTRY\", \"BHUTIA\", \"COUNSEL\"],\n [\"\", \"OF SURFACE TRANSPORT\", \"MR. JORGAY NAMKA\", \"MR THINLAY DORJEE\"],\n [\"\", \"AND ORS.\", \"MR. ZANGPO SHERPA,\", \"BHUTIA\"],\n [\"\", \"\", \"AMICUS CURIAE\", \"MS POLLIN RAI, ASST.\"],\n [\"\", \"\", \"\", \"GOVT. ADVOCATE\"]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "edited": false, "score": 1, "creation_date": 1527738270, "post_id": 50616280, "comment_id": 88242511, "body": "You&#39;ll note that my solution above (which you accepted, thanks) does not depend on there being 4 columns, any number of columns will work.  There are other ways to make it fail, though, like there not being 2 spaces in front of the first column, or overlapping columns (the left of column 2 is left of the right of column 1)."}], "tags": [], "owner": {"reputation": 6227, "user_id": 808533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/qSPq0.jpg?s=128&g=1", "display_name": "prasad.surase", "link": "https://stackoverflow.com/users/808533/prasad-surase"}, "is_accepted": false, "score": 0, "last_activity_date": 1527737998, "creation_date": 1527737998, "answer_id": 50616280, "question_id": 50603609, "link": "https://stackoverflow.com/questions/50603609/split-a-array-of-strings-of-words-while-maintaining-the-word-column-order/50616280#50616280", "title": "split a array of strings of words while maintaining the word column order", "body": "<p>I fixed the above problem. Its not a perfect solution but it works for most of the cases.</p>\n\n<p>I have assumed that the first string in the array is the longest(has data for all columns).</p>\n\n<p>Docsplit is irrelevant in the context of the current question. Anyways, add in Gemfile</p>\n\n<pre><code>gem 'docsplit', git: 'git@github.com:prasadsurase/docsplit.git', branch: 'layout-nopgbrk-support'\n</code></pre>\n\n<p>Run the below code in console to get the text from pdf.</p>\n\n<pre><code>Docsplit.extract_text(pdf_file_path, { layout: true, nopgbrk: true, output: \"#{Rails.root}/tmp/pdf_to_text/\" })\n</code></pre>\n\n<p>Assuming that are only 4 logical columns of data</p>\n\n<pre><code>indices = arr.first.scan(/\\s{2,}\\S{2,3}\\s{1}*/).map{|substr| arr.first.index(substr.strip) }\ncount = indices.count\nactual_data = arr.map do |str|\n  record = []\n  count.times do |i|\n    record &lt;&lt; [count - 1  == i ? str[indices[i]..-1] : str[indices[i]..indices[i+1] - 1]]\n  end\n  record\nend\n\ndetails = [:first, :second, :third, :fourth].map do |indx|\n  actual_data.map(&amp;indx).join('').strip.gsub(/\\s+/, ' ')\nend\n</code></pre>\n\n<p><strong>details</strong> is an array of 4 strings.</p>\n"}], "owner": {"reputation": 6227, "user_id": 808533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/qSPq0.jpg?s=128&g=1", "display_name": "prasad.surase", "link": "https://stackoverflow.com/users/808533/prasad-surase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 50616135, "answer_count": 2, "score": 1, "last_activity_date": 1527740720, "creation_date": 1527679987, "last_edit_date": 1527681730, "question_id": 50603609, "link": "https://stackoverflow.com/questions/50603609/split-a-array-of-strings-of-words-while-maintaining-the-word-column-order", "title": "split a array of strings of words while maintaining the word column order", "body": "<p>I have a string as</p>\n\n<pre><code>        WP(PIL)/7/2013        PUBLIC AND PANCHAYAT               MS PEMA BHUTIA            MR. S.K. CHETTRI,\\n                                KABI LUNGCHUK                      MS PANILA THEENGH         ASST. GOVT.\\n                                CONSTITUENCY, NORTH                MS MON MAYA SUBBA         ADVOCATE\\n                                SIKKIM                             MS TASHI DOMA SHERPA      MR. KARMA THINLAY,\\n                                Vs                                 MR SANGAY GURMEY          CENTRAL GOVT.\\n                                THE SECRETARY, MINISTRY            BHUTIA                    COUNSEL\\n                                OF SURFACE TRANSPORT               MR. JORGAY NAMKA          MR THINLAY DORJEE\\n                                AND ORS.                           MR. ZANGPO SHERPA,        BHUTIA\\n                                                                   AMICUS CURIAE             MS POLLIN RAI, ASST.\\n                                                                                             GOVT. ADVOCATE\\n\n</code></pre>\n\n<p>which I split using the '\\n' char. It results in</p>\n\n<pre><code>[\"        WP(PIL)/7/2013        PUBLIC AND PANCHAYAT               MS PEMA BHUTIA            MR. S.K. CHETTRI,\",\n\"                                KABI LUNGCHUK                      MS PANILA THEENGH         ASST. GOVT.\",\n\"                                CONSTITUENCY, NORTH                MS MON MAYA SUBBA         ADVOCATE\",\n\"                                SIKKIM                             MS TASHI DOMA SHERPA      MR. KARMA THINLAY,\",\n\"                                Vs                                 MR SANGAY GURMEY          CENTRAL GOVT.\",\n\"                                THE SECRETARY, MINISTRY            BHUTIA                    COUNSEL\",\n\"                                OF SURFACE TRANSPORT               MR. JORGAY NAMKA          MR THINLAY DORJEE\",\n\"                                AND ORS.                           MR. ZANGPO SHERPA,        BHUTIA\",\n\"                                                                   AMICUS CURIAE             MS POLLIN RAI, ASST.\",\n\"                                                                                             GOVT. ADVOCATE\"]\n</code></pre>\n\n<p>I would like to extract the 4 columns for each row(ie convert array of strings to matrix). Also, the extracted string should belong to the associated column. eg 'GOVT. ADVOCATE' in the last string should belong extracted as ['', '', '', 'GOVT. ADVOCATE']</p>\n\n<p>I am using <strong>docsplit</strong> library to parse pdf which has tabular data. The problem is that each row in the pdf has internal table which is similar to the array of strings that are specified below.</p>\n\n<p>I tried getting the index of the first char of word for each column as a reference and use those values for processing the strings but haven't been able to have a working solution.</p>\n"}, {"tags": ["ruby", "recursion"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1527679934, "post_id": 50603451, "comment_id": 88216298, "body": "Yes it does. You just need to be informed: add <code>puts 0</code> before <code>return 0</code>"}, {"owner": {"reputation": 9, "user_id": 9869877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de31ab40174c924c7b38704e10069e7?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9869877/j-doe"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1527680019, "post_id": 50603451, "comment_id": 88216353, "body": "If i do that it returns <code>SystemStackError (stack level too deep)</code>"}, {"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 1, "creation_date": 1527680316, "post_id": 50603451, "comment_id": 88216548, "body": "There is nothing special about recursion in Ruby. Calling <code>switch_digit(0)</code> returns 0."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9869877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de31ab40174c924c7b38704e10069e7?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9869877/j-doe"}, "edited": false, "score": 0, "creation_date": 1527681001, "post_id": 50603792, "comment_id": 88217031, "body": "So, once it hits the base case going down it goes back up the stack using the value of the previous stack?"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "reply_to_user": {"reputation": 9, "user_id": 9869877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de31ab40174c924c7b38704e10069e7?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9869877/j-doe"}, "edited": false, "score": 0, "creation_date": 1527682734, "post_id": 50603792, "comment_id": 88218255, "body": "hitting the base case and then going back up the stack is spot on but I&#39;d think of it as passing results back up the stack rather than using the value of the previous stack. I&#39;ve updated the answer to clarify a bit so you can see how results from lower down the stack plug in to expressions higher up the stack to eventually result in the overall answer."}], "tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": false, "score": 0, "last_activity_date": 1527682881, "last_edit_date": 1527682881, "creation_date": 1527680532, "answer_id": 50603792, "question_id": 50603451, "link": "https://stackoverflow.com/questions/50603451/how-does-recursion-work-in-ruby/50603792#50603792", "title": "How does recursion work in ruby?", "body": "<p>The base case returns 0, but the <em>overall</em> result is determined by the <code>return switch_digit(num/10) * 10 + digit</code></p>\n\n<p>Follow the code through with a smaller example e.g. <code>switch_digit(15)</code>:</p>\n\n<pre><code>num &lt;= 0 # no\ndigit = num % 10 # 5\ndigit == 5 # yep, so swap it for a 7\n\nreturn switch_digit(num/10) * 10 + 7\n</code></pre>\n\n<p><code>num/10</code> is 1 so what does the recursive <code>switch_digit(1)</code> evaluate to?</p>\n\n<pre><code>num &lt;= 0 # no\ndigit = num % 10 # 1\ndigit == 1 # so leave it unchanged\nreturn switch_digit(num/10) * 10 + 1 \n</code></pre>\n\n<p><code>num/10</code> is 0 so <strong>now</strong> we hit the base case</p>\n\n<pre><code>switch_digit(15) == switch_digit(1) * 10 + 7\nswitch_digit(1) == switch_digit(0) * 10 + 1\nswitch_digit(0) == 0 # the base case\n</code></pre>\n\n<p>working back up, plugging in values from lower down results:</p>\n\n<pre><code>switch_digit(1) == 0 * 10 + 1  == 1\nswitch_digit(15) == 1 * 10 + 7 == 17\n</code></pre>\n\n<hr>\n\n<p>I'd also add that there's nothing specific to Ruby about how recursion is handled here. Any other descriptions of recursion, or classic example such as a <a href=\"https://en.wikipedia.org/wiki/Recursion_(computer_science)#Recursive_programs\" rel=\"nofollow noreferrer\">recursive factorial function</a> should help you get a better understanding.</p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1527681518, "creation_date": 1527681518, "answer_id": 50604122, "question_id": 50603451, "link": "https://stackoverflow.com/questions/50603451/how-does-recursion-work-in-ruby/50604122#50604122", "title": "How does recursion work in ruby?", "body": "<p>I added a little change to your code, to be aware it's working.</p>\n\n<p>Finally I also expected the value of the method was 0, but it is not.\nThe end is reached, but the returned value is not 0. <strong>Why?</strong></p>\n\n<pre><code>def switch_digit(num, array)\n  if num &lt;= 0\n    array &lt;&lt; num\n    p array\n    puts \"The end\"\n    return 0\n  end\n  digit = num % 10\n  array &lt;&lt; [digit, num]\n  if (digit == 5) \n    digit = 7\n  end\n  return p switch_digit(num/10, array) * 10 + digit\nend\n\np \"returned value = \" + switch_digit(123456789, Array.new).to_s\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>#=&gt; [[9, 123456789], [8, 12345678], [7, 1234567], [6, 123456], [5, 12345], [4, 1234], [3, 123], [2, 12], [1, 1], 0]\n#=&gt; The end\n#=&gt; 1\n#=&gt; 12\n#=&gt; 123\n#=&gt; 1234\n#=&gt; 12347\n#=&gt; 123476\n#=&gt; 1234767\n#=&gt; 12347678\n#=&gt; 123476789\n#=&gt; \"returned value = 123476789\"\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9869877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de31ab40174c924c7b38704e10069e7?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9869877/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1527682881, "creation_date": 1527679475, "question_id": 50603451, "link": "https://stackoverflow.com/questions/50603451/how-does-recursion-work-in-ruby", "title": "How does recursion work in ruby?", "body": "<p>I have this method which switches the number digit 5 with 7.</p>\n\n<pre><code>def switch_digit(num)\n   if num &lt;= 0\n     return 0\n   end\n\n  digit = num % 10\n\n  if (digit == 5) \n    digit = 7\n  end\n\n  return switch_digit(num/10) * 10 + digit\nend\n\nswitch_digit(5952)\n</code></pre>\n\n<p>Can someone explain why once the method hits the base case it doesn't return 0? </p>\n\n<p>How does this recursive method actually work? Does it append the returned digit with the next digit?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "http", "faraday"], "answers": [{"tags": [], "owner": {"reputation": 87, "user_id": 1653264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d64b0a734bdf139e7dbe76bc003413f?s=128&d=identicon&r=PG", "display_name": "kernelsmith", "link": "https://stackoverflow.com/users/1653264/kernelsmith"}, "is_accepted": false, "score": 0, "last_activity_date": 1548886236, "creation_date": 1548886236, "answer_id": 54450342, "question_id": 50603335, "link": "https://stackoverflow.com/questions/50603335/retry-post-request-on-202-response-faraday-gem/54450342#54450342", "title": "Retry POST request on 202 response - Faraday gem", "body": "<p>in theory 202 is a success <a href=\"https://httpstatuses.com/202\" rel=\"nofollow noreferrer\">https://httpstatuses.com/202</a>, it's an acceptance of an asynchronous request, so you really should only have to send your post once, and if you get a 202, you're done your job. That link states \"There is no facility in HTTP for re-sending a status code from an asynchronous operation.\" So, I think you'd really need to be checking for completion another way. However, you could do something like this (just spitballing here):</p>\n\n<pre><code>   conn = Faraday.new(url: url, :ssl =&gt; {:verify =&gt; verify_ssl_cert}) do |faraday|\n        faraday.adapter Faraday.default_adapter\n   end\n   response = conn.get\n   while response.status == 202\n      # repeat code above\n   end\n</code></pre>\n\n<p>But you run various risks like infinitely looping</p>\n"}], "owner": {"reputation": 121, "user_id": 6568169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209bb9e3607cb6dadea76fa24016f2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Yaroslav V.", "link": "https://stackoverflow.com/users/6568169/yaroslav-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 395, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548886236, "creation_date": 1527679124, "question_id": 50603335, "link": "https://stackoverflow.com/questions/50603335/retry-post-request-on-202-response-faraday-gem", "title": "Retry POST request on 202 response - Faraday gem", "body": "<p>I need <code>Faraday</code> to retry my <strong>POST</strong> request every time when it gets 202 http status as a response. I am aware of <a href=\"https://www.rubydoc.info/github/lostisland/faraday/Faraday/Request/Retry\" rel=\"nofollow noreferrer\">this module</a>, yet I don't really get how to make use of it, since 202 doesn't throw an error or something and <strong>retry_if:</strong> block is not called for 202 response. </p>\n\n<p>I had some success with <a href=\"https://github.com/grokify/faraday_middleware-request-retry\" rel=\"nofollow noreferrer\">this middleware</a> but it resends request only once, while 202 response may occur 2 and more times in a row.</p>\n\n<p>I wonder if someone could show me a way to do it using <code>retry</code> module or Faraday middleware.</p>\n"}, {"tags": ["ruby", "vagrant"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1527677034, "post_id": 50602603, "comment_id": 88214315, "body": "It looks like <code>config.vm.box</code> expects the version and <code>ENV[&#39;VAGRANT_DEV_BOX&#39;]</code> contains this <code>&quot;debian-VAGRANTSLASH-jessie64&quot;</code>. It has nothing to do with <code>|| &quot;ubuntu&#47;xenial64&quot;</code> part since it never gets executed."}, {"owner": {"reputation": 6685, "user_id": 5045227, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/33d94e8bd370131f074aeb3e26622e8f?s=128&d=identicon&r=PG&f=1", "display_name": "BugHunterUK", "link": "https://stackoverflow.com/users/5045227/bughunteruk"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1527677065, "post_id": 50602603, "comment_id": 88214339, "body": "<code>ENV[&#39;VAGRANT_DEV_BOX&#39;]</code> is null at this point as it hasn&#39;t been set. <code>config.vm.box</code> expects a string such as <code>ubuntu&#47;xenial64</code>. Edited question."}], "answers": [{"tags": [], "owner": {"reputation": 6685, "user_id": 5045227, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/33d94e8bd370131f074aeb3e26622e8f?s=128&d=identicon&r=PG&f=1", "display_name": "BugHunterUK", "link": "https://stackoverflow.com/users/5045227/bughunteruk"}, "is_accepted": true, "score": 5, "last_activity_date": 1527680035, "creation_date": 1527680035, "answer_id": 50603620, "question_id": 50602603, "link": "https://stackoverflow.com/questions/50602603/setting-a-default-value-in-vagrantfile-if-env-variable-not-set/50603620#50603620", "title": "Setting a default value in Vagrantfile if env. variable not set", "body": "<p>This is thanks to <code>double-p</code> on #vagrant, freenode:</p>\n\n<blockquote>\n  <p><code>&lt;double-p&gt;</code> you cannot just inline ruby.. put this above vagrant-configure, like:</p>\n</blockquote>\n\n<pre><code>port = ENV[\"HOST_PORT\"] || 8080\n\nVagrant.configure(\"2\") do |config|\n  # Ubuntu 14.04 LTS\n  config.vm.box = \"ubuntu/trusty64\"\n  config.vm.network \"forwarded_port\", guest: 80, host: port\n  config.vm.provision \"shell\", path: \"vagrant/provision.sh\"\nend\n</code></pre>\n"}], "owner": {"reputation": 6685, "user_id": 5045227, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/33d94e8bd370131f074aeb3e26622e8f?s=128&d=identicon&r=PG&f=1", "display_name": "BugHunterUK", "link": "https://stackoverflow.com/users/5045227/bughunteruk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1307, "favorite_count": 0, "accepted_answer_id": 50603620, "answer_count": 1, "score": 3, "last_activity_date": 1527680035, "creation_date": 1527676876, "last_edit_date": 1527677337, "question_id": 50602603, "link": "https://stackoverflow.com/questions/50602603/setting-a-default-value-in-vagrantfile-if-env-variable-not-set", "title": "Setting a default value in Vagrantfile if env. variable not set", "body": "<p>I'm trying to do something like the following to set a default value if an environment variable is not set:</p>\n\n<pre><code>config.vm.box = ENV['VAGRANT_DEV_BOX'] || \"ubuntu/xenial64\"\n</code></pre>\n\n<p>Which causes the following error:</p>\n\n<pre><code>/opt/vagrant/embedded/lib/ruby/2.4.0/rubygems/version.rb:208:in `initialize': Malformed version number string debian-VAGRANTSLASH-jessie64 (ArgumentError)\n</code></pre>\n\n<p>The <code>VAGRANT_DEV_BOX</code> variable hasn't been set at this point. Confirmed like so:</p>\n\n<pre><code>server \ud83e\udd84  echo $VAGRANT_DEV_BOX\n\nserver \ud83e\udd84\n</code></pre>\n\n<p>Is it possible to do this in Ruby and/or Vagrantfile?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "schema"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1527675095, "post_id": 50601920, "comment_id": 88213084, "body": "Can you provide a sample of the JSON?"}, {"owner": {"reputation": 189, "user_id": 1374690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77598b399ed55cf7c6aab654dc33595?s=128&d=identicon&r=PG", "display_name": "Radhika", "link": "https://stackoverflow.com/users/1374690/radhika"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1527675623, "post_id": 50601920, "comment_id": 88213427, "body": "{   &quot;$schema&quot;: &quot;<a href=\"http://json-schema.org/draft-03/schema#\" rel=\"nofollow noreferrer\">json-schema.org/draft-03/schema#</a>&quot;,   &quot;title&quot;: &quot;A boolean&quot;,   &quot;description&quot;: &quot;A simple boolean data type as schema root&quot;,   &quot;type&quot;: &quot;boolean&quot; }  This is just a simple."}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 1374690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77598b399ed55cf7c6aab654dc33595?s=128&d=identicon&r=PG", "display_name": "Radhika", "link": "https://stackoverflow.com/users/1374690/radhika"}, "edited": false, "score": 0, "creation_date": 1528199491, "post_id": 50603536, "comment_id": 88407929, "body": "Thanks, Can I customize the form builder helpers to make this loop dynamic? i.e the helper need to handle generating the form elements based on the JSON data say., which you have mentioned."}, {"owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "reply_to_user": {"reputation": 189, "user_id": 1374690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77598b399ed55cf7c6aab654dc33595?s=128&d=identicon&r=PG", "display_name": "Radhika", "link": "https://stackoverflow.com/users/1374690/radhika"}, "edited": false, "score": 0, "creation_date": 1528208172, "post_id": 50603536, "comment_id": 88414062, "body": "You can do it using something like <a href=\"https://coderwall.com/p/-biuug/custom-form-builders-in-rails\" rel=\"nofollow noreferrer\">this</a>. If you want to keep it simple then I think that view helper or partial would do the job."}], "tags": [], "owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "is_accepted": false, "score": 1, "last_activity_date": 1527679765, "creation_date": 1527679765, "answer_id": 50603536, "question_id": 50601920, "link": "https://stackoverflow.com/questions/50601920/json-schema-to-html-form-in-ruby/50603536#50603536", "title": "JSON Schema to HTML form in Ruby", "body": "<p>It will not be possible to create a form out of ANY JSON schema. IF you have created some format, you can create the form out of it.</p>\n\n<p>For example,</p>\n\n<pre><code>json = [\n    {\n        \"name\": \"Book Name\",\n        \"type\": \"integer\",\n        \"is_required\": true,\n        \"placeholder\": \"Closed Deals\"\n    },\n    {\n        \"name\": \"No of Pages\",\n        \"field_type\": \"date\",\n        \"is_required\": true,\n        \"placeholder\": \"Enter time spent in minutes\"\n    },\n    {\n        \"name\": \"Published On\",\n        \"type\": \"date\",\n        \"unit\": \"date\",\n        \"placeholder\": \"Date\"\n    }\n]\n</code></pre>\n\n<p>Now we need to iterate through the data and create the form:</p>\n\n<pre><code>&lt;%= form_for &lt;your_model&gt; %&gt;\n   &lt;% json.each do |field_data| %&gt;\n     &lt;%= f.text_field field_data['name'], type: field_data['field_type'], required: field_data['is_required'], placeholder: field_data['placeholder'] %&gt;\n   &lt;% end %&gt;\n   &lt;%= submit_tag %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 1374690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77598b399ed55cf7c6aab654dc33595?s=128&d=identicon&r=PG", "display_name": "Radhika", "link": "https://stackoverflow.com/users/1374690/radhika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527693527, "creation_date": 1527674759, "last_edit_date": 1527693527, "question_id": 50601920, "link": "https://stackoverflow.com/questions/50601920/json-schema-to-html-form-in-ruby", "title": "JSON Schema to HTML form in Ruby", "body": "<p>I would like to generate a HTML form out of JSON schema in Ruby. Can anyone help me out how this can be done ? or do we have any library to accomplish this?</p>\n\n<p>The whole idea is, the inputted JSON Schema with elements should be converted to a HTML form.</p>\n\n<pre><code>{  \n   \"$schema\": \"json-schema.org/draft-03/schema#\",\n   \"title\": \"A boolean\",\n   \"description\": \"A simple boolean data type as schema root\",\n   \"type\": \"boolean\"\n} \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527673668, "post_id": 50601446, "comment_id": 88212125, "body": "Rails provides a built-in framework for running background tasks: <a href=\"http://guides.rubyonrails.org/active_job_basics.html\" rel=\"nofollow noreferrer\"><code>ActiveJob</code></a>. Use that, unless you have a good reason not to."}, {"owner": {"reputation": 23, "user_id": 8902212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0686aa86dd3d2a2597d6938e11708c?s=128&d=identicon&r=PG&f=1", "display_name": "sokse", "link": "https://stackoverflow.com/users/8902212/sokse"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527673737, "post_id": 50601446, "comment_id": 88212173, "body": "I do not want jobs sorry."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527673800, "post_id": 50601446, "comment_id": 88212205, "body": "What you are describing - &quot;forking the process&quot;, and running some asynchronous task, <b>is</b> a background job. What makes you say this is unsuitable?"}, {"owner": {"reputation": 23, "user_id": 8902212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0686aa86dd3d2a2597d6938e11708c?s=128&d=identicon&r=PG&f=1", "display_name": "sokse", "link": "https://stackoverflow.com/users/8902212/sokse"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527674204, "post_id": 50601446, "comment_id": 88212490, "body": "Jobs are not suited because they are not for the sort of task my application needs."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1527675835, "post_id": 50601446, "comment_id": 88213569, "body": ".....And what sort of task is it that your application needs? A &quot;job&quot; is a very generic concept; it can be <i>any</i> asynchronous task. This question looks almost certainly like an <a href=\"https://meta.stackexchange.com/q/66377/369864\">XY problem</a> to me: You&#39;re insisting on getting help with a chosen solution, rather than explaining the original problem to be solved."}, {"owner": {"reputation": 23, "user_id": 8902212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0686aa86dd3d2a2597d6938e11708c?s=128&d=identicon&r=PG&f=1", "display_name": "sokse", "link": "https://stackoverflow.com/users/8902212/sokse"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527676178, "post_id": 50601446, "comment_id": 88213763, "body": "I&#39;ve looked extensively into jobs.   I do not need a polling mechanism as my tasks are to be done immediately. I do not need my taks to be done in the near future/future.  My tasks can run for days on end, weeks even.   My tasks need to be able to be stopped at any time. Started/stopped.   I need processes.   I had a working system one liner for testing purposes and I can&#39;t seem to find my way back to it. And I dont understand why my code doesn&#39;t work here."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1527677039, "post_id": 50601446, "comment_id": 88214319, "body": "I tested <a href=\"https://ruby-doc.org/core-2.1.2/Process.html#method-c-detach\" rel=\"nofollow noreferrer\">this</a> example un my controller ant it worked. In terminal I got <code>Processing by HomeController#index as HTML   PID STAT 80352 Z+</code>. Also this worked:     <code>@p1 = fork { puts &#39;---&#39;*100}     Process.detach(@p1)</code>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527677322, "post_id": 50601446, "comment_id": 88214516, "body": "@sokse (1) What does polling have to do with this? Neither of us mentioned that. (2) Your tasks are to be done immediately ... not in the future/near future ... and can run for days on end. OK, so use <code>#perform_now</code> from <code>ActiveJob</code>! This will start the task immediately, and it can run for as long as you like. (3) Stopping tasks -- This can be done many ways; the implementation depends on what your task is actually doing, but since you never showed this in your question I cannot advise much further. For example, if you&#39;re using <code>sidekiq</code> then you could just scale down workers on that queue."}, {"owner": {"reputation": 23, "user_id": 8902212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0686aa86dd3d2a2597d6938e11708c?s=128&d=identicon&r=PG&f=1", "display_name": "sokse", "link": "https://stackoverflow.com/users/8902212/sokse"}, "edited": false, "score": 0, "creation_date": 1527677866, "post_id": 50601446, "comment_id": 88214859, "body": "Sorry I meant queueing instead of polling, my bad.   Queueing implies that there&#39;s a queue, workers working on tasks one by one right? It&#39;s not done all at the same time.   The tasks for my application need to be all done at the same time, turned on or off when the user wants. This kind of thing.   I really looked a lot into jobs and I knew that I could make it immediate but I can&#39;t wrap around my head the fact that there&#39;s a &quot;queue&quot;? I really dont think it&#39;s fit for my needs.  And I&#39;ve understood that my main problem right now is that the process is run by the rails server."}, {"owner": {"reputation": 23, "user_id": 8902212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0686aa86dd3d2a2597d6938e11708c?s=128&d=identicon&r=PG&f=1", "display_name": "sokse", "link": "https://stackoverflow.com/users/8902212/sokse"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1527677889, "post_id": 50601446, "comment_id": 88214880, "body": "@iGian thanks I&#39;ve realised the process actually runs, just not by who I want it to run."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1527678137, "post_id": 50601446, "comment_id": 88215056, "body": "Also detached an infinite loop process. What I noticed is that I can kill the process while the rails server keeps running. If I kill the server I can not kill the process anymore by <code>kill -9 PID</code>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527680177, "post_id": 50601446, "comment_id": 88216453, "body": "@sokse If you really want to run the whole task in one big process (even though it takes several days), ignoring the fact that this is probably a bad solution (see: XY problem), then you will only have one job on the &quot;queue&quot; and therefore there&#39;s no real need to even think of it as a &quot;queue&quot;! It&#39;s simply a background task. By following the approach I keep repeating, your process will be run by whatever adapter you choose - e.g. <code>resque</code>, <code>sidekiq</code> or <code>delayed_job</code> - and will not be dependant on the rails server."}, {"owner": {"reputation": 23, "user_id": 8902212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0686aa86dd3d2a2597d6938e11708c?s=128&d=identicon&r=PG&f=1", "display_name": "sokse", "link": "https://stackoverflow.com/users/8902212/sokse"}, "edited": false, "score": 0, "creation_date": 1527680820, "post_id": 50601446, "comment_id": 88216905, "body": "And I can use this jobs with no queue system to run these taks all at the same exact time?  So user A could run his task and user B could run his task and they&#39;ll both be executed in parallel(like processes are)?  Or user A runs task1 and task2 in parallel for example?  Thanks a lot for the help, it sure would make stuff much easier for me if I can use jobs. I was thinking I need to have a ruby program that spawns/kills children processes and that communicates with the rails app.  I think that can get pretty messy fast.   Thanks a lot for your help by the way!"}, {"owner": {"reputation": 313, "user_id": 705131, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ffc11b71e3b26a9bec0acb31a2b1cda3?s=128&d=identicon&r=PG", "display_name": "kfrz", "link": "https://stackoverflow.com/users/705131/kfrz"}, "edited": false, "score": 0, "creation_date": 1527682884, "post_id": 50601446, "comment_id": 88218366, "body": "<a href=\"http://guides.rubyonrails.org/active_job_basics.html\" rel=\"nofollow noreferrer\">ActiveJob</a> is most definitely what you need @sokse - from your latest comment it seems you want to allow your User to start a Process that runs at any given time, concurrent with other users (to some maximum determined by your hardware/code efficiency). What I&#39;m not sure is if you can send signals to running processes in the case you need interactivity - anyone have thoughts on that?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8902212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0686aa86dd3d2a2597d6938e11708c?s=128&d=identicon&r=PG&f=1", "display_name": "sokse", "link": "https://stackoverflow.com/users/8902212/sokse"}, "edited": false, "score": 0, "creation_date": 1527682533, "post_id": 50603949, "comment_id": 88218130, "body": "I just tried doing exec eval(&quot;my code&quot;) inside the &#39;fork do&#39; and it gets run by the server.   What am I doing wrong?"}, {"owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "reply_to_user": {"reputation": 23, "user_id": 8902212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0686aa86dd3d2a2597d6938e11708c?s=128&d=identicon&r=PG&f=1", "display_name": "sokse", "link": "https://stackoverflow.com/users/8902212/sokse"}, "edited": false, "score": 0, "creation_date": 1527682758, "post_id": 50603949, "comment_id": 88218271, "body": "<code>exec</code> will execute the code on the system(your OS). Whereas <code>fork</code> will create a child thread from main Rails process. More info about <code>fork</code> here: <a href=\"http://www.tweetegy.com/2012/04/forking-ruby-processes-or-how-to-fork-ruby/\" rel=\"nofollow noreferrer\">tweetegy.com/2012/04/forking-ruby-processes-or-how-to-fork-r&zwnj;&#8203;uby</a>"}], "tags": [], "owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "is_accepted": false, "score": 0, "last_activity_date": 1527681022, "creation_date": 1527681022, "answer_id": 50603949, "question_id": 50601446, "link": "https://stackoverflow.com/questions/50601446/launching-a-process-from-inside-a-controller-in-rails/50603949#50603949", "title": "Launching a process from inside a controller in rails", "body": "<p>You can execute a shell command from inside your Rails controller using <code>exec</code>. </p>\n\n<p>I hope you are looking for the same. The process you start on the system will be totally independent of the Rails server and will be visible under <code>ps</code> command if it is running when you hit the command.</p>\n\n<p>Documentation: <a href=\"http://ruby-doc.org/core-2.5.1/Kernel.html#method-i-exec\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.5.1/Kernel.html#method-i-exec</a></p>\n"}], "owner": {"reputation": 23, "user_id": 8902212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0686aa86dd3d2a2597d6938e11708c?s=128&d=identicon&r=PG&f=1", "display_name": "sokse", "link": "https://stackoverflow.com/users/8902212/sokse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527690599, "creation_date": 1527673439, "last_edit_date": 1527690599, "question_id": 50601446, "link": "https://stackoverflow.com/questions/50601446/launching-a-process-from-inside-a-controller-in-rails", "title": "Launching a process from inside a controller in rails", "body": "<p>I want to start a process from inside a controller. \nI've tried the usual </p>\n\n<pre><code>pid = fork do\n code\nend\n\nProcess.detach(pid)\n</code></pre>\n\n<p>But nothing is happening. When I try with eval(code) in the fork block the code runs but it's the actual rails server/puma running it. This means that when I kill the process I also shut down the whole server.</p>\n\n<p>I had some code before that I lost that worked and I'm nearly sure it used exec or eval or something like this that created a process(and therefore returned a pid to be able to kill it later) and I remember checking with ps that it was run by something of rails but not the actual whole server. </p>\n\n<p>Why isn't the fork do block enough for it to work? What's the way to do it?\nAnd, for non-testing purposes and actual implementation, how can I make it run totally independent from the rails server? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527694167, "post_id": 50601206, "comment_id": 88226664, "body": "So Every class should be a Proxy Class? e.g <code>ProxyString</code>, <code>ProxyHash</code>, etc. Also why should calling <code>test</code> with arguments not error out neither definition of <code>test</code> accepts arguments?"}, {"owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527701708, "post_id": 50601206, "comment_id": 88230887, "body": "Yup, Every class should become a proxy class. ProxyString, ProxyHash galore! And @Why should calling test with arguments not error - Because it is never called with arguments... Look at the code again <code>puts PApplication.test()</code> &lt;-- No arguments"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527705842, "post_id": 50610637, "comment_id": 88232904, "body": "But this does not do what you had requested. You asked that all objects be wrapped as proxy objects so where is <code>ProxyString</code> in say <code>Application.to_s</code>?"}, {"owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527711671, "post_id": 50610637, "comment_id": 88235511, "body": "@engineersmnky Well the <code>to_s</code> method doesn&#39;t belong to <code>Application</code>. It belongs to the <code>BasicObject</code> class. If <code>Application</code> returned a String then you do get a <a href=\"https://i.imgur.com/JzYar9B.png\" rel=\"nofollow noreferrer\"><code>ProxyString</code></a>. But you are correct that <code>to_s</code> indeed does not return a <code>ProxyString</code>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527712566, "post_id": 50610637, "comment_id": 88235889, "body": "Well technically it belongs to <code>Object</code> and in addition if <code>ProxyApplication</code> returned a <code>String</code> it would still just be a  <code>String</code>  but can you explain the purpose of this pattern if you can so easily break the encapsulation?"}, {"owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527713706, "post_id": 50610637, "comment_id": 88236302, "body": "Specifically a ruby C plugin I use implements ruby class instances in a way that is not extendable by conventional means. (It does not inherit methods from the class directly). So this pattern is only for wrapping these classes in an extendable and convenient way."}], "tags": [], "owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "is_accepted": true, "score": 0, "last_activity_date": 1527805313, "last_edit_date": 1527805313, "creation_date": 1527702142, "answer_id": 50610637, "question_id": 50601206, "link": "https://stackoverflow.com/questions/50601206/delegating-everything-but-allowing-the-possibility-to-pre-extend-our-proxy-class/50610637#50610637", "title": "Delegating everything but allowing the possibility to pre-extend our proxy classes", "body": "<p>Due to numerous limitations with the initial idea of packing all the calls into a single class, I redesigned it a bit, but it works in exactly the same way.</p>\n\n<pre><code>def proxy__enwrap(obj)\n    isClass = obj.is_a?(Class)\n    oldClass = isClass ? obj : obj.class\n    sNewClass = \"Proxy#{oldClass.to_s}\"\n    code = &lt;&lt;-EOF\n        class #{sNewClass}\n            include InstanceProxy\n            def self.__cinit__(obj)\n                @@__cobj__ = obj\n            end\n            def self.__cget__\n                @@__cobj__\n            end\n            def self.method_missing(m,*args,&amp;block)\n                if @@__cobj__.respond_to? m\n                    retVal = @@__cobj__.public_send(m,*args,*block)\n                    return proxy__enwrap(retVal)\n                else\n                    puts \"ERROR \" + m.to_s + \"(\" + args.to_s + \") + block?\"\n                    #Throw error\n                end\n            end\n        end\n        #{sNewClass}.__cinit__(#{oldClass.to_s})\n        if isClass\n            return #{sNewClass}\n        else\n            return #{sNewClass}.new(obj)\n        end\n    EOF\n\n    ::Kernel.eval(code)\nend\n\nmodule InstanceProxy\n    def method_missing(m,*args,&amp;block)\n        retVal = @__obj__.__send__(m,*args,&amp;block)\n        return proxy__enwrap(retVal)\n    end\n    def initialize(obj)\n        @__obj__ = obj\n    end\nend\n\nXXApplication = Application\n::Object.const_set \"Application\", proxy__enwrap(Application)\n</code></pre>\n\n<p>Currently the only issue is that the object doesn't wrap correctly around yielded objects... I'm not sure if that's even possible though.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I've improved the system to also wrap objects passed in as blocks:</p>\n\n<pre><code>def proxy__enwrap(obj)\n    isClass = obj.is_a?(Class)\n    oldClass = isClass ? obj : obj.class\n    sNewClass = \"Proxy#{oldClass.to_s}\"\n    code = &lt;&lt;-EOF\n        class #{sNewClass}\n            include InstanceProxy\n            def self.__cinit__(obj)\n                @@__cobj__ = obj\n            end\n            def self.__cget__\n                @@__cobj__\n            end\n            def self.to_ary\n                #fix for puts (puts calls to_ary. see: https://stackoverflow.com/questions/8960685/ruby-why-does-puts-call-to-ary)\n                [self.to_s]\n            end\n            def self.method_missing(m,*args,&amp;block)\n                #Wrap block arguments:\n                newBlock = Proc.new {}\n                if block_given?\n                    newBlock = Proc.new do |*args|\n                        args = args.map {|arg| proxy__enwrap(arg)}\n                        block.call(*args)\n                    end\n                end\n\n                #Call delegated functions. Raise error if object doesn't respond to method.\n                #Return wrapped value\n                if @@__cobj__.respond_to? m\n                    retVal = @@__cobj__.public_send(m,*args,*block)\n                    return proxy__enwrap(retVal)\n                else\n                    raise ArgumentError.new(\"Method '\\#\\{m.to_s}' doesn't exist.\")\n                end\n            end\n        end\n        #{sNewClass}.__cinit__(#{oldClass.to_s})\n        if isClass\n            return #{sNewClass}\n        else\n            return #{sNewClass}.new(obj)\n        end\n    EOF\n\n    ::Kernel.eval(code)\nend\n\nmodule InstanceProxy\n    def method_missing(m,*args,&amp;block)\n        #Wrap block arguments:\n        newBlock = Proc.new {}\n        if block_given?\n            newBlock = Proc.new do |*args|\n                args = args.map {|arg| proxy__enwrap(arg)}\n                block.call(*args)\n            end\n        end\n\n        #Call delegated functions. Raise error if object doesn't respond to method.\n        #Return wrapped value\n        if @__obj__.respond_to? m\n            retVal = @__obj__.__send__(m,*args,&amp;newBlock)\n            return proxy__enwrap(retVal)\n        else\n            raise ArgumentError.new(\"Method '#{m.to_s}' doesn't exist.\")\n        end\n    end\n    def initialize(obj)\n        @__obj__ = obj\n    end\n    def to_ary\n        #fix for puts (puts calls to_ary. see: https://stackoverflow.com/questions/8960685/ruby-why-does-puts-call-to-ary)\n        [self.to_s]\n    end\nend\n\n#\nXXApplication = Application\n\n#Silence warnings of overwriting constant\noriginal_verbosity = $VERBOSE\n$VERBOSE = nil\n    ::Object.const_set \"Application\", proxy__enwrap(Application)\n$VERBOSE = original_verbosity\n</code></pre>\n"}], "owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 50610637, "answer_count": 1, "score": 0, "last_activity_date": 1527805313, "creation_date": 1527672776, "question_id": 50601206, "link": "https://stackoverflow.com/questions/50601206/delegating-everything-but-allowing-the-possibility-to-pre-extend-our-proxy-class", "title": "Delegating everything but allowing the possibility to pre-extend our proxy classes", "body": "<p>Given a set of class definitions:</p>\n\n<pre><code>class Application\n    def self.open_current\n        return Current.new()\n    end\nend\nclass Current\n    def get_row(row)\n        Row.new(row)\n    end\nend\nclass Row\n    def get_col(row)\n        #...\n    end\nend\n</code></pre>\n\n<p>Design a Proxy class which will:</p>\n\n<ul>\n<li><p>Create <code>Proxy&lt;&lt;Class&gt;&gt;</code> versions of each class which are extendable via</p>\n\n<pre><code>class ProxyApplication\n    def myMethod()\n        #...\n    end\nend\n#...\n</code></pre></li>\n<li><p>Wrap all return values of all methods in each class such that a proxied class is always used instead of a standard class. I.E.</p>\n\n<pre><code>app = Proxy.new(Application) #app == ProxyApplication\ncurrent = app.open_current   #current == #&lt;ProxyCurrent&gt;\n</code></pre></li>\n</ul>\n\n<p>Ultimately, the definition of Proxy must be dynamic rather than static definitions.</p>\n\n<p>I've been working on this problem for about 6 hours now. I've got <a href=\"https://gist.github.com/sancarn/d84a76e36a94c8dbcb5244caede45bd0\" rel=\"nofollow noreferrer\">the following code</a>. This includes 3 sections:</p>\n\n<ul>\n<li>Initial class setup</li>\n<li>Proxy class definition</li>\n<li>Testing proxy class</li>\n</ul>\n\n<p>Currently I've got to the point where <code>pApplication=Proxy.new(Application)</code> returns <code>#&lt;Proxy&gt;</code> and <code>pApplication.open_current</code> returns <code>#&lt;ProxyCurrent&gt;</code> which seems kind of on the correct line. However currently it errors when delegate.rb tries to call <code>test()</code> with 2,3 arguments instead of 0...</p>\n\n<p>But my question is, realistically am I going about this correctly? Is using <code>SimpleDelegator</code> the easiest way to do this? One current problem is I'm basically having to add new functionality to the existing SimpleDelegator. I've also looked at using <code>Forwardable</code>, but having to delegate methods manually is not where I want to go with this project, if possible.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "sinatra", "padrino"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 2404974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/506384dc15adb0897f4d5db82fd2618c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2404974/levi"}, "edited": false, "score": 0, "creation_date": 1527672322, "post_id": 50600805, "comment_id": 88211119, "body": "Great this is working thanks, I was trying about sinatra style, but this is possibility too. Thank you"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527672415, "post_id": 50600805, "comment_id": 88211190, "body": "From the source code, it seems like path can also be a regexp, so <code>get %r{&#47;(company|about)}</code> could work as well (haven&#39;t tried it)."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527673196, "post_id": 50600805, "comment_id": 88211770, "body": "(Haven&#39;t tried it either, but) don&#39;t forget to anchor the regex with <code>^ ... $</code>! Otherwise you could hijack all sorts of other routes, like <code>&#47;not&#47;about&#47;the&#47;company</code>."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1527672031, "last_edit_date": 1527672031, "creation_date": 1527671657, "answer_id": 50600805, "question_id": 50600660, "link": "https://stackoverflow.com/questions/50600660/padrino-multilpe-url-for-one-route-code/50600805#50600805", "title": "Padrino multilpe url for one route code", "body": "<p>The route file is a ruby file. You can do this with a simple loop:</p>\n\n<pre><code>['/company', '/about'].each do |route|\n  get route do\n    # ...\n  end\nend\n</code></pre>\n\n<p>From <a href=\"https://github.com/padrino/padrino-framework/blob/f7d6950bc71f3b9578857c52714b1f20577205b1/padrino-core/lib/padrino-core/application/routing.rb#L356-L362\" rel=\"nofollow noreferrer\">the source code</a>:</p>\n\n<pre><code>def get(path, *args, &amp;block)\n  conditions = @conditions.dup\n  route('GET', path, *args, &amp;block)\n\n  @conditions = conditions\n  route('HEAD', path, *args, &amp;block)\nend\n</code></pre>\n\n<p>You can see that the <code>get</code> method only takes a single path.</p>\n"}], "owner": {"reputation": 87, "user_id": 2404974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/506384dc15adb0897f4d5db82fd2618c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2404974/levi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 50600805, "answer_count": 1, "score": 1, "last_activity_date": 1527673174, "creation_date": 1527671261, "last_edit_date": 1527672056, "question_id": 50600660, "link": "https://stackoverflow.com/questions/50600660/padrino-multilpe-url-for-one-route-code", "title": "Padrino multilpe url for one route code", "body": "<p>I would like to handle multiple URLs with one route code.</p>\n\n<p>I am trying something like this:</p>\n\n<pre><code>get '/company', '/about' do \n  ...\nend\n</code></pre>\n\n<p>but it does not work. For <code>/company</code>, I get 200, but for <code>/about</code>, I get 404.</p>\n\n<p>Is there such way to do this?</p>\n"}, {"tags": ["ruby", "sha256", "digest"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527670152, "post_id": 50599799, "comment_id": 88209591, "body": "If you (monkey)patch <code>Digest.hexencode</code>, the latter would call the new implementation (of course) and the former would still call the original one. Not sure if that&#39;s the reason, though."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1527673111, "post_id": 50599799, "comment_id": 88211704, "body": "The values returned are always the same. \u201cAlmost\u201d means the former is a class method and the latter instantiates <code>Digest::Instance</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 0, "last_activity_date": 1527671316, "creation_date": 1527671316, "answer_id": 50600684, "question_id": 50599799, "link": "https://stackoverflow.com/questions/50599799/ruby-difference-between-hexencode-and-hexdigest/50600684#50600684", "title": "Ruby: difference between hexencode and hexdigest", "body": "<p>As in the module <a href=\"https://ruby-doc.org/stdlib-2.4.2/libdoc/digest/rdoc/Digest/Instance.html\" rel=\"nofollow noreferrer\">Digest::Instance</a> described <code>hexdigest(string)</code> return <code>hexencode_str_new(value);</code>. In the module <a href=\"https://ruby-doc.org/stdlib-2.4.2/libdoc/digest/rdoc/Digest.html\" rel=\"nofollow noreferrer\">Digest</a> described <code>hexencode(string)</code> return <code>hexencode_str_new(value);</code> too. So, there are no differences if use same instance type. \"almost\" because in the documentation example can be Digest::SHA512 or other.</p>\n"}], "owner": {"reputation": 2652, "user_id": 968531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/181a8764ddf31a43d2f740e61be7ad73?s=128&d=identicon&r=PG", "display_name": "NobodysNightmare", "link": "https://stackoverflow.com/users/968531/nobodysnightmare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 605, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527671316, "creation_date": 1527668692, "question_id": 50599799, "link": "https://stackoverflow.com/questions/50599799/ruby-difference-between-hexencode-and-hexdigest", "title": "Ruby: difference between hexencode and hexdigest", "body": "<p>Today I read the documentation on Rubies hexdigest method, e.g.</p>\n\n<pre><code>Digest::SHA256.hexdigest('123')\n=&gt; \"a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3\"\n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/stdlib-2.4.2/libdoc/digest/rdoc/Digest/Class.html#method-c-hexdigest\" rel=\"nofollow noreferrer\">The documentation</a> says:</p>\n\n<blockquote>\n  <p>Returns the hex-encoded hash value of a given string. This is <strong>almost</strong> equivalent to <code>Digest.hexencode(Digest::Class.new(*parameters).digest(string))</code>.</p>\n</blockquote>\n\n<p>Highlighting is by me: What does almost mean here? How is it different?</p>\n\n<p>Of course my example string above yields the same result:</p>\n\n<pre><code>Digest.hexencode(Digest::SHA256.digest('123'))\n=&gt; \"a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3\"\n</code></pre>\n\n<p>Can anyone point me to the cases where the result can be different? I want to understand whether the \"almost\" points to an important difference or if the difference is irrelevant for me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "loops"], "comments": [{"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1527668693, "post_id": 50599572, "comment_id": 88208655, "body": "Why not just update_attribute(:email, (&quot;DeletedUserEmail&quot;+(id.to_s))) ?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527668877, "post_id": 50599572, "comment_id": 88208763, "body": "<code>validates_uniqueness_of :email, unless: :deleted_at</code> would only validate if the user&#39;s <code>deleted_at</code> attribute isn&#39;t set."}, {"owner": {"reputation": 37, "user_id": 4114632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7eaa4e6fb7df90ee0e34f42764e210?s=128&d=identicon&r=PG&f=1", "display_name": "Madduck", "link": "https://stackoverflow.com/users/4114632/madduck"}, "reply_to_user": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1527669098, "post_id": 50599572, "comment_id": 88208934, "body": "@leo I had not even considered that.. Thank you a lot. That quickly solved it and was a lot easier than the convoluted ways I considered"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527670384, "post_id": 50599572, "comment_id": 88209737, "body": "You don&#39;t have to put parentheses around strings \u2013 just write <code>&quot;DeletedUser&quot;</code> instead of <code>(&quot;DeletedUser&quot;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4114632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7eaa4e6fb7df90ee0e34f42764e210?s=128&d=identicon&r=PG&f=1", "display_name": "Madduck", "link": "https://stackoverflow.com/users/4114632/madduck"}, "edited": false, "score": 0, "creation_date": 1527669030, "post_id": 50599824, "comment_id": 88208883, "body": "Wow.. I hadn&#39;t considered that at all. Thank you, that solved it and made it waaay easier"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527670238, "post_id": 50599824, "comment_id": 88209648, "body": "You would typically use <code>&quot;DeletedUserEmail#{id}&quot;</code>"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527690618, "post_id": 50599824, "comment_id": 88224209, "body": "@stefan you are correct... I like to minimise refactoring changes in an OP&#39;s post that don&#39;t directly relate to the answer.  Either that, or I&#39;m lazy. :)"}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 4, "last_activity_date": 1527668764, "creation_date": 1527668764, "answer_id": 50599824, "question_id": 50599572, "link": "https://stackoverflow.com/questions/50599572/creating-a-loop-within-a-method-that-keeps-track-of-variable-n/50599824#50599824", "title": "Creating a loop within a method that keeps track of variable n", "body": "<p>You already have a unique counter... the id of the record.</p>\n\n<pre><code>update_attribute(:email, (\"DeletedUserEmail\"+(id.to_s)))\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4114632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7eaa4e6fb7df90ee0e34f42764e210?s=128&d=identicon&r=PG&f=1", "display_name": "Madduck", "link": "https://stackoverflow.com/users/4114632/madduck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 50599824, "answer_count": 1, "score": 1, "last_activity_date": 1527668768, "creation_date": 1527667996, "last_edit_date": 1527668768, "question_id": 50599572, "link": "https://stackoverflow.com/questions/50599572/creating-a-loop-within-a-method-that-keeps-track-of-variable-n", "title": "Creating a loop within a method that keeps track of variable n", "body": "<p>I am trying to delete users and their emails from a database, and instead of completely removing the user, I have opted to soft delete the user, overwriting their username and email in case they want to sign up again in the future. Users cannot have duplicate emails, so I have to overwrite with a unique email each time.</p>\n\n<p>The method to soft delete and overwrite Username and Email for accounts looks like this:</p>\n\n<pre><code>def soft_delete\n  n = 1\n  y = n + 1\n  update_attribute(:name, (\"DeletedUser\"))\n  update_attribute(:email, (\"DeletedUserEmail\"+(y.to_s)))\n  update_attribute(:deleted_at, Time.current)\nend\n</code></pre>\n\n<p>It works only for the first user that deletes their account. The second user gets the error that the email already exists.</p>\n\n<p>I tried different ways of implementing this so that <code>y</code> keeps the count of the variable <code>n</code>, which increase as with users.</p>\n\n<p>How would I go about this in the best way? I considered making a for loop. I also looked through <a href=\"https://www.tutorialspoint.com/ruby/ruby_loops.htm\" rel=\"nofollow noreferrer\">this</a>, and came across: </p>\n\n<pre><code>(0..5).each do |i|\n  puts \"Value of local variable is #{i}\"\nend\n</code></pre>\n\n<p>But not sure if it would be the best way to implement this function.</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1527664862, "post_id": 50598509, "comment_id": 88206294, "body": "Can you show your attempt?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1527664962, "post_id": 50598509, "comment_id": 88206358, "body": "To solve this particular example, you can iterate over each row of input CSV and in each iteration, add as many new rows in new (output) CSV as many values does second column has."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1527665403, "post_id": 50598509, "comment_id": 88206657, "body": "Better you fix your col separators, you have both <code>|</code> and <code>,</code>. Then you can <a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">CSV class</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1527667020, "post_id": 50598509, "comment_id": 88207654, "body": "That does not look like CSV. Nor is your array actually an array."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5448792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe6aefa960587c0100f9fb0f52b0aa1?s=128&d=identicon&r=PG", "display_name": "shnog", "link": "https://stackoverflow.com/users/5448792/shnog"}, "edited": false, "score": 0, "creation_date": 1527853276, "post_id": 50598819, "comment_id": 88295303, "body": "I just wanted to &quot;|&quot; for express csv contents. I knew how to write csv table by &quot;,&quot;.  Thanks.  And, I can&#39;t understand line 8th yet.  row[&#39;url&#39;] = url  how should I undertand this mean?"}, {"owner": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "reply_to_user": {"reputation": 13, "user_id": 5448792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe6aefa960587c0100f9fb0f52b0aa1?s=128&d=identicon&r=PG", "display_name": "shnog", "link": "https://stackoverflow.com/users/5448792/shnog"}, "edited": false, "score": 0, "creation_date": 1528146332, "post_id": 50598819, "comment_id": 88387257, "body": "You <i>have</i> to use a different delimiter between fields, and the values of a field which is itself a list.  You can&#39;t do <code>3,urlC,urlD,nameC,typeC</code> and   <code>4,urlE,nameE,typeE</code> in the same file -- that is not machine parsable."}, {"owner": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "reply_to_user": {"reputation": 13, "user_id": 5448792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe6aefa960587c0100f9fb0f52b0aa1?s=128&d=identicon&r=PG", "display_name": "shnog", "link": "https://stackoverflow.com/users/5448792/shnog"}, "edited": false, "score": 0, "creation_date": 1528146746, "post_id": 50598819, "comment_id": 88387377, "body": "As far as the syntax <code>row[&#39;url&#39;] = url</code>: at the point that this executes, <code>row</code> is an object of type <code>CSV::Row</code>, which has a <code>[]=</code> method.  So you are calling <code>CSV::Row#[]=</code> and passing it the value of <code>url</code>.  See the ruby core docs on CSV::Row: <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/csv/rdoc/CSV/Row.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.5.1/libdoc/csv/rdoc/CSV/&hellip;</a>."}, {"owner": {"reputation": 13, "user_id": 5448792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe6aefa960587c0100f9fb0f52b0aa1?s=128&d=identicon&r=PG", "display_name": "shnog", "link": "https://stackoverflow.com/users/5448792/shnog"}, "edited": false, "score": 0, "creation_date": 1528357312, "post_id": 50598819, "comment_id": 88478783, "body": "I did my DL tool what I needed thank of your advice. Really thank you so much sir."}], "tags": [], "owner": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "is_accepted": true, "score": 1, "last_activity_date": 1527666003, "last_edit_date": 1527666003, "creation_date": 1527665461, "answer_id": 50598819, "question_id": 50598509, "link": "https://stackoverflow.com/questions/50598509/how-to-separate-two-data-in-one-cell-on-csv-by-ruby/50598819#50598819", "title": "How to separate two data in one cell on csv by ruby", "body": "<p>The header row has a different separator than the data. That's a problem. You need to change the header row to use <code>|</code> instead of <code>,</code>.  Then:</p>\n\n<pre><code>require 'csv'\nrequire 'pp'\n\narray = Array.new\nCSV.foreach(\"test.csv\", col_sep: '|', headers: true) do |row|\n  if row['url'][/,/]\n    row['url'].split(',').each do |url|\n      row['url'] = url\n      array.push row.to_h.values\n    end\n  else\n    array.push row.to_h.values\n  end\nend\n\npp array\n\n=&gt; [[\"1\", \"urlA\", \"nameA\", \"typeA\"],\n    [\"2\", \"urlB\", \"nameB\", \"typeB\"],\n    [\"3\", \"urlC\", \"nameC\", \"typeC\"],\n    [\"3\", \"urlD\", \"nameC\", \"typeC\"],\n    [\"4\", \"urlE\", \"nameE\", \"typeE\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1528189897, "creation_date": 1528189897, "answer_id": 50696334, "question_id": 50598509, "link": "https://stackoverflow.com/questions/50598509/how-to-separate-two-data-in-one-cell-on-csv-by-ruby/50696334#50696334", "title": "How to separate two data in one cell on csv by ruby", "body": "<p>You'll need to test the fifth column to see how the line should be parsed. If you see a fifth element (row[4]) output the line twice replacing the url column</p>\n\n<pre><code>array = Array.new\nCSV.foreach(\"test.csv\") do |row|\n  if row[4]\n    array &lt;&lt; [row[0..1], row[3..4]].flatten\n    array &lt;&lt; [[row[0]], row[2..4]].flatten\n  else\n    array &lt;&lt; row\n  end\nend\np array\n</code></pre>\n\n<p>In your example you had asterisks but I'm assuming that was just to emphasise the lines for which you want special handling.  If you do want asterisks, you can modify the two array shovel commands appropriately.</p>\n"}], "owner": {"reputation": 13, "user_id": 5448792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe6aefa960587c0100f9fb0f52b0aa1?s=128&d=identicon&r=PG", "display_name": "shnog", "link": "https://stackoverflow.com/users/5448792/shnog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 50598819, "answer_count": 2, "score": 0, "last_activity_date": 1528189897, "creation_date": 1527664466, "last_edit_date": 1528187530, "question_id": 50598509, "link": "https://stackoverflow.com/questions/50598509/how-to-separate-two-data-in-one-cell-on-csv-by-ruby", "title": "How to separate two data in one cell on csv by ruby", "body": "<p>I want to change CSV file content:</p>\n\n<pre><code>itemId,url,name,type\n1|urlA|nameA|typeA\n2|urlB|nameB|typeB\n3|urlC,urlD|nameC|typeC\n4|urlE|nameE|typeE\n</code></pre>\n\n<p>into an array:</p>\n\n<pre><code>[itemId,url,name,type]\n[1,urlA,nameA,typeA]\n[2,urlB,nameB,typeB]\n[**3**,**urlC**,nameC,typeC]\n[**3**,**urlD**,nameC,typeC]\n[4,urlE,nameE,typeE]\n</code></pre>\n\n<p>Could anybody teach me how to do it?\nFinally, I'm going to DL url files(.jpg)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "comments": [{"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 1, "creation_date": 1527664213, "post_id": 50598408, "comment_id": 88205881, "body": "what have you tried so far? what did not work?"}, {"owner": {"reputation": 11, "user_id": 9868528, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Amit Nanda", "link": "https://stackoverflow.com/users/9868528/amit-nanda"}, "reply_to_user": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1527664325, "post_id": 50598408, "comment_id": 88205948, "body": "I have been thinking about solutions and got two approaches:-                    1. Delete job from other queue and add in new queue                                2. Trying to find any inbuilt feature of sidekiq which can help. As we already have a cross queue check, it doesn&#39;t allow us to add new job, what I am looking for is replacing old job."}, {"owner": {"reputation": 11, "user_id": 9868528, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Amit Nanda", "link": "https://stackoverflow.com/users/9868528/amit-nanda"}, "reply_to_user": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1527664478, "post_id": 50598408, "comment_id": 88206034, "body": "Any way i can get job id of existing queue job if duplicate is found. That way i will have exact job to delete and also would be able to add new job properly in other queue."}], "owner": {"reputation": 11, "user_id": 9868528, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Amit Nanda", "link": "https://stackoverflow.com/users/9868528/amit-nanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527664140, "creation_date": 1527664140, "question_id": 50598408, "link": "https://stackoverflow.com/questions/50598408/replace-sidekiq-job-with-new-instance-in-new-queue-if-duplicate-exist-in-other-q", "title": "Replace sidekiq job with new instance in new queue if duplicate exist in other queue", "body": "<p>My concern is that I have various queues of different priorities. (Eg: Q1,Q2,Q3).\nIf I have a job in a lower priority queue (say Q2), after some time i want to move it to higher priority queue (say Q1).</p>\n\n<p>I am using sidekiq \"cross-queue\" uniqueness to check if duplicate job doesn't exist in some other queue. If it exist I want to change priority.</p>\n\n<p>Event is Cron triggered after every 1 minute.</p>\n\n<p>Need help on how to implement the same</p>\n"}, {"tags": ["ruby", "header", "instagram", "httparty"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1527664480, "post_id": 50598105, "comment_id": 88206035, "body": "What do you mean by &quot;<i>didn&#39;t work</i>&quot;?"}, {"owner": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "edited": false, "score": 0, "creation_date": 1527664613, "post_id": 50598105, "comment_id": 88206125, "body": "Please provide a minimal, complete, verifiable example that reproduces the problem.  <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 21, "user_id": 7346575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EUyh6f8vFak/AAAAAAAAAAI/AAAAAAAAAUY/Qq2b7meaMRY/photo.jpg?sz=128", "display_name": "Hossam Hossny", "link": "https://stackoverflow.com/users/7346575/hossam-hossny"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1527671498, "post_id": 50598105, "comment_id": 88210529, "body": "@JagdeepSingh didn&#39;t work means it passes no headers at all and returning 403 unauthorized."}, {"owner": {"reputation": 21, "user_id": 7346575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EUyh6f8vFak/AAAAAAAAAAI/AAAAAAAAAUY/Qq2b7meaMRY/photo.jpg?sz=128", "display_name": "Hossam Hossny", "link": "https://stackoverflow.com/users/7346575/hossam-hossny"}, "reply_to_user": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "edited": false, "score": 0, "creation_date": 1527671540, "post_id": 50598105, "comment_id": 88210563, "body": "@Tom  I have edited my question to reproduce the issue."}, {"owner": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "edited": false, "score": 0, "creation_date": 1527724698, "post_id": 50598105, "comment_id": 88239495, "body": "I recommend running the <code>curl</code> command which works with <code>--verbose</code> or <code>--trace</code>.  You may find there is more back-and-forth; <code>curl</code> will follow redirects, for example.  You would then have to implement whatever back-and-forth happens in your ruby code.  <code>curl</code> will also store and re-use cookies handed to it; you might have to do the same in your code."}, {"owner": {"reputation": 21, "user_id": 7346575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EUyh6f8vFak/AAAAAAAAAAI/AAAAAAAAAUY/Qq2b7meaMRY/photo.jpg?sz=128", "display_name": "Hossam Hossny", "link": "https://stackoverflow.com/users/7346575/hossam-hossny"}, "edited": false, "score": 0, "creation_date": 1527734039, "post_id": 50598105, "comment_id": 88241532, "body": "I didn&#39;t miss trying curl with the -v but I am getting 200 Ok and SSL handshakes, nothing fishy like redirects or anything. I think I need to run the HTTParty one with a <code>verbose</code> option to get more debugging info. Let&#39;s not also forget that the code has actually worked for Rohan, so it should be something machine specific."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7346575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EUyh6f8vFak/AAAAAAAAAAI/AAAAAAAAAUY/Qq2b7meaMRY/photo.jpg?sz=128", "display_name": "Hossam Hossny", "link": "https://stackoverflow.com/users/7346575/hossam-hossny"}, "edited": false, "score": 0, "creation_date": 1527671790, "post_id": 50600495, "comment_id": 88210751, "body": "It does work for you exactly as is but using http? I have had issues on some other machine with https but when I passed <code>:verify =&gt; false</code> I managed to get passed through the SSL error. Can you try with that in https and let me know?"}, {"owner": {"reputation": 21, "user_id": 7346575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EUyh6f8vFak/AAAAAAAAAAI/AAAAAAAAAUY/Qq2b7meaMRY/photo.jpg?sz=128", "display_name": "Hossam Hossny", "link": "https://stackoverflow.com/users/7346575/hossam-hossny"}, "edited": false, "score": 0, "creation_date": 1527671990, "post_id": 50600495, "comment_id": 88210891, "body": "It still gives me forbidden even with http"}, {"owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "reply_to_user": {"reputation": 21, "user_id": 7346575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EUyh6f8vFak/AAAAAAAAAAI/AAAAAAAAAUY/Qq2b7meaMRY/photo.jpg?sz=128", "display_name": "Hossam Hossny", "link": "https://stackoverflow.com/users/7346575/hossam-hossny"}, "edited": false, "score": 0, "creation_date": 1527672166, "post_id": 50600495, "comment_id": 88211016, "body": "are you able to open www.instagram.com in browser?"}, {"owner": {"reputation": 21, "user_id": 7346575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EUyh6f8vFak/AAAAAAAAAAI/AAAAAAAAAUY/Qq2b7meaMRY/photo.jpg?sz=128", "display_name": "Hossam Hossny", "link": "https://stackoverflow.com/users/7346575/hossam-hossny"}, "edited": false, "score": 0, "creation_date": 1527672345, "post_id": 50600495, "comment_id": 88211138, "body": "Yes, I am. Are you getting 200 ok and a json response?"}, {"owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "reply_to_user": {"reputation": 21, "user_id": 7346575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EUyh6f8vFak/AAAAAAAAAAI/AAAAAAAAAUY/Qq2b7meaMRY/photo.jpg?sz=128", "display_name": "Hossam Hossny", "link": "https://stackoverflow.com/users/7346575/hossam-hossny"}, "edited": false, "score": 0, "creation_date": 1527673271, "post_id": 50600495, "comment_id": 88211812, "body": "yes..then it might be possible that you are unable to access the account of the particular user"}, {"owner": {"reputation": 21, "user_id": 7346575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EUyh6f8vFak/AAAAAAAAAAI/AAAAAAAAAUY/Qq2b7meaMRY/photo.jpg?sz=128", "display_name": "Hossam Hossny", "link": "https://stackoverflow.com/users/7346575/hossam-hossny"}, "edited": false, "score": 0, "creation_date": 1527673505, "post_id": 50600495, "comment_id": 88211999, "body": "nope, this doesn&#39;t work for me using any usernames. I am not sure how it can work for you but not for me, I was almost sure that I am doing something wrong passing the headers but obviously something else is wrong."}, {"owner": {"reputation": 21, "user_id": 7346575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EUyh6f8vFak/AAAAAAAAAAI/AAAAAAAAAUY/Qq2b7meaMRY/photo.jpg?sz=128", "display_name": "Hossam Hossny", "link": "https://stackoverflow.com/users/7346575/hossam-hossny"}, "edited": false, "score": 0, "creation_date": 1527673878, "post_id": 50600495, "comment_id": 88212263, "body": "I have tried the same on another machine but it didn&#39;t work neither. Am I missing some gem? That&#39;s the only thing I can think of, even though if that&#39;s the case it should produce an error for me."}], "tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1527670747, "creation_date": 1527670747, "answer_id": 50600495, "question_id": 50598105, "link": "https://stackoverflow.com/questions/50598105/httparty-headers/50600495#50600495", "title": "Httparty headers", "body": "<p>The url with SSL returned error but below mentioned worked for me.</p>\n\n<p>Try using it with http (without https)</p>\n\n<pre><code>HTTParty.get(\"http://www.instagram.com/#{username}/?__a=1\", :headers =&gt; {\"x-instagram-gis\" =&gt; Digest::MD5.hexdigest(\"#{rhx_gis}:/#{username}/\")})\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7346575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EUyh6f8vFak/AAAAAAAAAAI/AAAAAAAAAUY/Qq2b7meaMRY/photo.jpg?sz=128", "display_name": "Hossam Hossny", "link": "https://stackoverflow.com/users/7346575/hossam-hossny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 470, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527673303, "creation_date": 1527663198, "last_edit_date": 1527673303, "question_id": 50598105, "link": "https://stackoverflow.com/questions/50598105/httparty-headers", "title": "Httparty headers", "body": "<p>What is wrong with this?</p>\n\n<pre><code>HTTParty.get(\"https://www.instagram.com/#{username}/?__a=1\", :headers =&gt; {\"x-instagram-gis\" =&gt; Digest::MD5.hexdigest(\"#{rhx_gis}:/#{username}/\")})\n</code></pre>\n\n<p>If I do the same thing using <code>curl</code> passing the headers via <code>--header</code>, it works.</p>\n\n<pre><code>curl \"https://www.instagram.com/hossamhossny/\" | grep \"rhx_gis\"\n</code></pre>\n\n<p>We can then grab <code>rhx_gis</code> value then MD5 <code>\"&lt;rhx_gis&gt;:/username/\"</code> as <code>\"1ba367317d3c842eb4e940f1d62b29f2:/hossamhossny/\"</code> to produce the value of <code>x-instagram-gis</code> as <code>\"2830c5bff8e05b755724df2c6286f2b4\"</code>.</p>\n\n<p>Now with curl I can do that..</p>\n\n<pre><code>curl --header \"x-instagram-gis:2830c5bff8e05b755724df2c6286f2b4\" \"https://www.instagram.com/hossamhossny/?__a=1\"\n</code></pre>\n\n<p>Which produces the desired output..</p>\n\n<pre><code>{\"logging_page_id\":\"profilePage_3669759838\",\"show_suggested_profiles\":false,\"graphql\":{\"user\":{\"biography\":\"\",\"blocked_by_viewer\":false,\"country_block\":false,\"external_url\":null,\"external_url_linkshimmed\":null,\"edge_followed_by\":{\"count\":222},\"followed_by_viewer\":false,\"edge_follow\":{\"count\":55},\"follows_viewer\":false,\"full_name\":\"Hossam SAld HossNy\",\"has_blocked_viewer\":false,\"highlight_reel_count\":0,\"has_requested_viewer\":false,\"id\":\"3669759838\",\"is_private\":false,\"is_verified\":false,\"mutual_followers\":null,\"profile_pic_url\":\"https://scontent-dfw5-1.cdninstagram.com/vp/6d079f6b5b60323cbfc4442c460d0e52/5BA22630/t51.2885-19/s150x150/13628116_1250649874979851_160235967_a.jpg\",\"profile_pic_url_hd\":\"https://scontent-dfw5-1.cdninstagram.com/vp/6d079f6b5b60323cbfc4442c460d0e52/5BA22630/t51.2885-19/s150x150/13628116_1250649874979851_160235967_a.jpg\",\"requested_by_viewer\":false,\"username\":\"hossamhossny\",\"connected_fb_page\":null,\"edge_felix_video_timeline\":{\"count\":0,\"page_info\":{\"has_next_page\":false,\"end_cursor\":null},\"edges\":[]},\"edge_owner_to_timeline_media\":{\"count\":0,\"page_info\":{\"has_next_page\":false,\"end_cursor\":null},\"edges\":[]},\"edge_saved_media\":{\"count\":0,\"page_info\":{\"has_next_page\":false,\"end_cursor\":null},\"edges\":[]},\"edge_media_collections\":{\"count\":0,\"page_info\":{\"has_next_page\":false,\"end_cursor\":null},\"edges\":[]}}}}\n</code></pre>\n\n<p>Switching back to <code>HTTParty</code> I tried this:</p>\n\n<pre><code>HTTParty.get(\"http://www.instagram.com/#{username}/?__a=1\", :headers =&gt; {\"x-instagram-gis\" =&gt; \"2830c5bff8e05b755724df2c6286f2b4\"})\n</code></pre>\n\n<p>but that didn't work either; 403 unauthorized error. My problem is that I am not able to pass the headers properly using HTTParty.</p>\n"}, {"tags": ["ruby", "image", "rubygems", "carrierwave"], "answers": [{"tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 0, "last_activity_date": 1527665121, "last_edit_date": 1527665121, "creation_date": 1527661321, "answer_id": 50597603, "question_id": 50597452, "link": "https://stackoverflow.com/questions/50597452/rendering-the-default-image-when-the-user-removes-the-current-image/50597603#50597603", "title": "Rendering the default image when the user removes the current image", "body": "<p>Depends on what the result of this method intends to be. Is it a link? If so, then <a href=\"http://api.rubyonrails.org/v5.0/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-image_path\" rel=\"nofollow noreferrer\">image_path</a> method might help to construct such a link:</p>\n\n<pre><code>module ApplicationHelper\n  def avatar(image)\n    image || image_path('100_2.jpg')\n  end\nend\n</code></pre>\n\n<p>Or you might want to <a href=\"https://github.com/carrierwaveuploader/carrierwave#providing-a-default-url\" rel=\"nofollow noreferrer\">provide a default url</a> to your uploader:</p>\n\n<pre><code>class MyUploader &lt; CarrierWave::Uploader::Base\n  def default_url(*args)\n    ActionController::Base.helpers.asset_path(\"100_2.jpg\")\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9483211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223c16110028f3b6ca4cd40e1a4719ce?s=128&d=identicon&r=PG&f=1", "display_name": "Renusudhan", "link": "https://stackoverflow.com/users/9483211/renusudhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 50597603, "answer_count": 1, "score": -1, "last_activity_date": 1527665121, "creation_date": 1527660656, "last_edit_date": 1527662484, "question_id": 50597452, "link": "https://stackoverflow.com/questions/50597452/rendering-the-default-image-when-the-user-removes-the-current-image", "title": "Rendering the default image when the user removes the current image", "body": "<p>I'm trying to render the default image when the user removes the current image. I used the carrier wave gem for uploading the image. This is my application.helper.rb code. Application.helper.rb:</p>\n\n<pre><code>module ApplicationHelper\n\n  def avatar(image)\n    return '100_2.jpg' unless image\n\n    image\n\n  end\n</code></pre>\n\n<p>I put this code for rendering the default image, but it does not work. How can I change the code to render the default image?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 2, "creation_date": 1527658367, "post_id": 50596944, "comment_id": 88203008, "body": "<code>x = x+1</code> is only invoked in <code>else</code> part of your logic, so it&#39;s not incremented because it gets it unless clause (and skips the else block). What control flow are you looking for?"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 1, "creation_date": 1527658422, "post_id": 50596944, "comment_id": 88203034, "body": "I think you are getting confused between <code>loops</code> and <code>conditional statements</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1527661987, "post_id": 50596944, "comment_id": 88204658, "body": "Are you looking for <a href=\"http://ruby-doc.org/core-2.5.1/doc/syntax/control_expressions_rdoc.html#label-until+Loop\" rel=\"nofollow noreferrer\"><code>until</code></a>?"}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1527658374, "creation_date": 1527658374, "answer_id": 50596983, "question_id": 50596944, "link": "https://stackoverflow.com/questions/50596944/can-unless-value-be-incremented/50596983#50596983", "title": "Can &#39;unless&#39; value be incremented?", "body": "<p>Your question is not clear. But it is clear that the only place in your code that increments a variable:</p>\n\n<pre><code>x = x + 1\n</code></pre>\n\n<p>is not executed because the condition <code>unless x &gt;= 2</code> is always met.</p>\n"}], "owner": {"reputation": 1190, "user_id": 7387029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c97ae40b1e69f860fa2d85f6ee0f4aa5?s=128&d=identicon&r=PG&f=1", "display_name": "anish anil", "link": "https://stackoverflow.com/users/7387029/anish-anil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1527698841, "answer_count": 1, "score": -4, "last_activity_date": 1527658534, "creation_date": 1527658219, "last_edit_date": 1527658534, "question_id": 50596944, "link": "https://stackoverflow.com/questions/50596944/can-unless-value-be-incremented", "closed_reason": "Needs details or clarity", "title": "Can &#39;unless&#39; value be incremented?", "body": "<p>I'm testing the reserved word <code>unless</code> with the following code, which increments the value of <code>x</code>.</p>\n\n<pre><code>x = 1\nunless x &gt;= 2\n  puts \"x is less than 2\"\nelse\n  puts \"x is greater than 2\"\n  x = x + 1\nend\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>x is less than 2\n</code></pre>\n\n<p>Does <code>unless</code> support the increment of <code>x</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 335, "user_id": 2896763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4170f4863165d5f5a744efa5f3d9d9f5?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/2896763/jon"}, "is_accepted": true, "score": 0, "last_activity_date": 1527656411, "creation_date": 1527656411, "answer_id": 50596699, "question_id": 50596568, "link": "https://stackoverflow.com/questions/50596568/does-not-pass-authorization-devise-auth-token/50596699#50596699", "title": "Does not pass authorization (devise auth token)", "body": "<p>It looks like blocks are not supported in devise_parameter_sanitizer. <a href=\"https://github.com/lynndylanhurley/devise_token_auth/issues/758#issuecomment-280797969\" rel=\"nofollow noreferrer\">https://github.com/lynndylanhurley/devise_token_auth/issues/758#issuecomment-280797969</a></p>\n"}], "owner": {"reputation": 23, "user_id": 9867785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca82add522db9436e6e78524a394d3c4?s=128&d=identicon&r=PG&f=1", "display_name": "user9867785", "link": "https://stackoverflow.com/users/9867785/user9867785"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 50596699, "answer_count": 1, "score": 2, "last_activity_date": 1527656411, "creation_date": 1527655687, "question_id": 50596568, "link": "https://stackoverflow.com/questions/50596568/does-not-pass-authorization-devise-auth-token", "title": "Does not pass authorization (devise auth token)", "body": "<p>I am using <a href=\"https://github.com/lynndylanhurley/devise_token_auth\" rel=\"nofollow noreferrer\">Devise auth token</a> gem for authenticating some parts of my rails app. But when I try to log in, I get the following error:</p>\n\n<blockquote>\n  <p>POST <a href=\"http://localhost:3000/auth/sign_in\" rel=\"nofollow noreferrer\">http://localhost:3000/auth/sign_in</a> 500 (Internal Server Error)</p>\n</blockquote>\n\n<p>Here is the complete trace:</p>\n\n<blockquote>\n  <p>Started POST \"/auth/sign_in\" for 10.12.4.5 at 2018-05-30 09:29:36\n  +0500 Processing by DeviseTokenAuth::SessionsController#create as JSON   Parameters: {\"login\"=>\"admin\", \"password\"=>\"[FILTERED]\",\n  \"session\"=>{\"login\"=>\"admin\", \"password\"=>\"[FILTERED]\"}} Completed 500\n  Internal Server Error in 14ms (ActiveRecord: 0.0ms)</p>\n  \n  <p>NoMethodError (undefined method `each' for</p>\n  \n  <h1>):</h1>\n  \n  <p>devise_token_auth (0.1.43)\n  app/controllers/devise_token_auth/application_controller.rb:35:in\n  <code>params_for_resource' devise_token_auth (0.1.43)\n  app/controllers/devise_token_auth/sessions_controller.rb:129:in\n  </code>resource_params' devise_token_auth (0.1.43)\n  app/controllers/devise_token_auth/sessions_controller.rb:13:in\n  <code>create' actionpack (5.1.6)\n  lib/action_controller/metal/basic_implicit_render.rb:4:in\n  </code>send_action' actionpack (5.1.6)\n  lib/abstract_controller/base.rb:186:in <code>process_action' actionpack\n  (5.1.6) lib/action_controller/metal/rendering.rb:30:in\n  </code>process_action' actionpack (5.1.6)\n  lib/abstract_controller/callbacks.rb:20:in <code>block in process_action'\n  activesupport (5.1.6) lib/active_support/callbacks.rb:131:in\n  </code>run_callbacks' actionpack (5.1.6)\n  lib/abstract_controller/callbacks.rb:19:in <code>process_action' actionpack\n  (5.1.6) lib/action_controller/metal/rescue.rb:20:in</code>process_action'\n  actionpack (5.1.6)\n  lib/action_controller/metal/instrumentation.rb:32:in <code>block in\n  process_action' activesupport (5.1.6)\n  lib/active_support/notifications.rb:166:in</code>block in instrument'\n  activesupport (5.1.6)\n  lib/active_support/notifications/instrumenter.rb:21:in <code>instrument'\n  activesupport (5.1.6) lib/active_support/notifications.rb:166:in\n  </code>instrument' actionpack (5.1.6)\n  lib/action_controller/metal/instrumentation.rb:30:in <code>process_action'\n  actionpack (5.1.6)\n  lib/action_controller/metal/params_wrapper.rb:252:in</code>process_action'\n  activerecord (5.1.6)\n  lib/active_record/railties/controller_runtime.rb:22:in\n  <code>process_action' actionpack (5.1.6)\n  lib/abstract_controller/base.rb:124:in</code>process' actionpack (5.1.6)\n  lib/action_controller/metal.rb:189:in <code>dispatch' actionpack (5.1.6)\n  lib/action_controller/metal.rb:253:in</code>dispatch' actionpack (5.1.6)\n  lib/action_dispatch/routing/route_set.rb:49:in <code>dispatch' actionpack\n  (5.1.6) lib/action_dispatch/routing/route_set.rb:31:in</code>serve'\n  actionpack (5.1.6) lib/action_dispatch/routing/mapper.rb:16:in <code>block\n  in &lt;class:Constraints&gt;' actionpack (5.1.6)\n  lib/action_dispatch/routing/mapper.rb:46:in</code>serve' actionpack (5.1.6)\n  lib/action_dispatch/journey/router.rb:50:in <code>block in serve'\n  actionpack (5.1.6) lib/action_dispatch/journey/router.rb:33:in</code>each'\n  actionpack (5.1.6) lib/action_dispatch/journey/router.rb:33:in <code>serve'\n  actionpack (5.1.6) lib/action_dispatch/routing/route_set.rb:844:in\n  </code>call' warden (1.2.7) lib/warden/manager.rb:36:in <code>block in call'\n  warden (1.2.7) lib/warden/manager.rb:35:in</code>catch' warden (1.2.7)\n  lib/warden/manager.rb:35:in <code>call' rack (2.0.5) lib/rack/etag.rb:25:in\n  </code>call' rack (2.0.5) lib/rack/conditional_get.rb:38:in <code>call' rack\n  (2.0.5) lib/rack/head.rb:12:in</code>call' activerecord (5.1.6)\n  lib/active_record/migration.rb:556:in <code>call' actionpack (5.1.6)\n  lib/action_dispatch/middleware/callbacks.rb:26:in</code>block in call'\n  activesupport (5.1.6) lib/active_support/callbacks.rb:97:in\n  <code>run_callbacks' actionpack (5.1.6)\n  lib/action_dispatch/middleware/callbacks.rb:24:in</code>call' actionpack\n  (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in <code>call'\n  actionpack (5.1.6)\n  lib/action_dispatch/middleware/debug_exceptions.rb:59:in</code>call'\n  actionpack (5.1.6)\n  lib/action_dispatch/middleware/show_exceptions.rb:31:in <code>call'\n  railties (5.1.6) lib/rails/rack/logger.rb:36:in</code>call_app' railties\n  (5.1.6) lib/rails/rack/logger.rb:24:in <code>block in call' activesupport\n  (5.1.6) lib/active_support/tagged_logging.rb:69:in</code>block in tagged'\n  activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in\n  <code>tagged' activesupport (5.1.6)\n  lib/active_support/tagged_logging.rb:69:in</code>tagged' railties (5.1.6)\n  lib/rails/rack/logger.rb:24:in <code>call' actionpack (5.1.6)\n  lib/action_dispatch/middleware/remote_ip.rb:79:in</code>call' actionpack\n  (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in <code>call' rack\n  (2.0.5) lib/rack/runtime.rb:22:in</code>call' activesupport (5.1.6)\n  lib/active_support/cache/strategy/local_cache_middleware.rb:27:in\n  <code>call' actionpack (5.1.6)\n  lib/action_dispatch/middleware/executor.rb:12:in</code>call' actionpack\n  (5.1.6) lib/action_dispatch/middleware/static.rb:125:in <code>call' rack\n  (2.0.5) lib/rack/sendfile.rb:111:in</code>call' rack-cors (1.0.2)\n  lib/rack/cors.rb:97:in <code>call' railties (5.1.6)\n  lib/rails/engine.rb:522:in</code>call' puma (3.11.4)\n  lib/puma/configuration.rb:225:in <code>call' puma (3.11.4)\n  lib/puma/server.rb:632:in</code>handle_request' puma (3.11.4)\n  lib/puma/server.rb:446:in <code>process_client' puma (3.11.4)\n  lib/puma/server.rb:306:in</code>block in run' puma (3.11.4)\n  lib/puma/thread_pool.rb:120:in `block in spawn_thread'</p>\n</blockquote>\n\n<p>How can I fix the error?</p>\n\n<p>application_controller.rb:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::API\n\n  include DeviseTokenAuth::Concerns::SetUserByToken\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n\n  protected\n\n  def configure_permitted_parameters\n\n    devise_parameter_sanitizer.permit(:sign_up) { |u| u.permit(:login, :first_name, :patronymic, :last_name, :email, :password, :password_confirmation) }    \n    devise_parameter_sanitizer.permit(:sign_in) { |u| u.permit(:login, :password) }    \n    devise_parameter_sanitizer.permit(:account_update) { |u| u.permit(:password, :password_confirmation, :current_password) }    \n\n  end\nend\n</code></pre>\n\n<p>user.rb:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  self.table_name = 'DASHBOARD.V_L_USERS'\n  self.primary_key = 'user_id'\n  devise :database_authenticatable, :validatable, :authentication_keys =&gt; [:login]\n  include DeviseTokenAuth::Concerns::User\n\n  has_many :permission_references, as: :source\n  accepts_nested_attributes_for :permission_references, :allow_destroy =&gt; true\n  has_many :user_roles\n  has_many :spr_dashboards, foreign_key: 'l_users_id'\n  accepts_nested_attributes_for :user_roles, :allow_destroy =&gt; true\n\n  def email_required?\n    false\n  end\n\n  def password_required?\n    false\n  end\n\n  def is_participant\n    (read_attribute(:is_participant) == \"Y\")\n  end\n\n  def is_participant=(value)\n    write_attribute(:is_participant, (value == \"1\") ? \"Y\" : \"N\")\n  end\n\n  def children_users_ids\n    ActiveRecord::Base.connection.select_values &lt;&lt;-SQL.strip_heredoc\n      SELECT l_users_id_right\n      FROM DASHBOARD.V_L_USERS_RIGHTS\n      WHERE l_users_id = #{user_id}\n    SQL\n  end\nend\n</code></pre>\n\n<p>routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n  mount_devise_token_auth_for 'User', at: 'auth'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "drop-down-menu"], "comments": [{"owner": {"reputation": 335, "user_id": 2896763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4170f4863165d5f5a744efa5f3d9d9f5?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/2896763/jon"}, "edited": false, "score": 0, "creation_date": 1527654935, "post_id": 50596418, "comment_id": 88202004, "body": "So use just want to use the &quot;type&quot; column as a string and you do not want to use single table inheritance? Can you try setting <code>self.inheritance_column = nil</code> in the User model?"}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 1, "creation_date": 1527655158, "post_id": 50596418, "comment_id": 88202073, "body": "<code>type</code> is a reserved keyword for AR. <a href=\"http://reservedwords.herokuapp.com/words?utf8=%E2%9C%93&amp;q%5Bword_or_notes_cont%5D=type\" rel=\"nofollow noreferrer\">reservedwords.herokuapp.com/&hellip;</a>. Change the column name."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527655353, "post_id": 50596418, "comment_id": 88202123, "body": "... or tell Rails that <code>type</code> is not your inheritance column, see <a href=\"https://stackoverflow.com/q/7134559/477037\">Rails \u2014 use type column without STI?</a>"}, {"owner": {"reputation": 89, "user_id": 9489349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311f6f5bab6da02e18d5819a55a77bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/9489349/harini"}, "reply_to_user": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1527657142, "post_id": 50596418, "comment_id": 88202633, "body": "@Emu thank you it worked."}], "answers": [{"tags": [], "owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "is_accepted": true, "score": 1, "last_activity_date": 1527658630, "creation_date": 1527658630, "answer_id": 50597030, "question_id": 50596418, "link": "https://stackoverflow.com/questions/50596418/uninitialized-constant-degreeerror/50597030#50597030", "title": "uninitialized constant Degree(error)", "body": "<p>I am posting my comment as an answer so that anyone can reference that in future:</p>\n\n<p><code>type</code> is a reserved keyword for AR. Check list of reserve active record keywords from <a href=\"http://reservedwords.herokuapp.com/words/type?q[word_or_notes_cont]=type\" rel=\"nofollow noreferrer\">here</a>. Change the column name. It will resolve the error.</p>\n"}], "owner": {"reputation": 89, "user_id": 9489349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311f6f5bab6da02e18d5819a55a77bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/9489349/harini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 50597030, "answer_count": 1, "score": 0, "last_activity_date": 1527658630, "creation_date": 1527654610, "question_id": 50596418, "link": "https://stackoverflow.com/questions/50596418/uninitialized-constant-degreeerror", "title": "uninitialized constant Degree(error)", "body": "<p>I am getting the error <code>uninitialized constant Degree</code>. I have a column in database with column name <code>type</code>. When i give data to that field and save, the data i gave is getting saved in database but error message is displayed after that and i am not able to reload that page.</p>\n\n<p>Controller code</p>\n\n<pre><code>class ProfileController &lt; ApplicationController\n  before_action :set_user, only: %i[index update_profile]\n\n  def index; end \n  def update_profile\n    if @user.update(user_params)\n      redirect_to profile_index_path, notice: 'Profile was successfully updated.'\n    else\n      render :index\n    end\n  end\nprivate\n\n  def set_user\n    @user = User.find(current_user.id)\n    @user.education || @user.build_education\n  end\n\n  def user_params\n    params.require(:user).permit(:name, education_attributes: %i[id type name issue_institute education_status])\n  end\nend\n</code></pre>\n\n<p>education.rb</p>\n\n<pre><code>class Education &lt; ApplicationRecord\n  belongs_to :user\n\n  validates_presence_of :user_id\nend\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_one :education, dependent: :destroy\n  accepts_nested_attributes_for :education\nend\n</code></pre>\n\n<p>View code</p>\n\n<pre><code>&lt;%= form_for(@user, url: {action: 'update_profile'}, html: {class: 'm-form m-form--fit m-form--label-align-right'}) do |f| %&gt;\n&lt;%= f.fields_for :education, @user.education do |e| %&gt;\n&lt;%= e.select :type, options_for_select(%w(Degree Certification), params[:type]), prompt: 'Degree/Certification', class: 'form-control m-input' %&gt;\n&lt;%= end %&gt;\n&lt;%= f.submit 'Save Changes'%&gt;\n&lt;%= end %&gt;\n</code></pre>\n\n<p>Terminal Log when i save that field</p>\n\n<pre><code>Started PATCH \"/profile/update_profile\" for 127.0.0.1 at 2018-05-30 09:04:37 +0530\nProcessing by ProfileController#update_profile as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"9QiEdSxqwkhHqZHiraiQjJcUvUS+oJknYjYaxWUSQrh+je0ASeYQvs//Z+p+oZkOqyAiwxc3nsxp/iohO9B1BA==\", \"user\"=&gt;{\"name\"=&gt;\"Admin\", \"email\"=&gt;\"admin@gmail.com\", \"address_attributes\"=&gt;{\"area\"=&gt;\"5, nehru Street\", \"city\"=&gt;\"pune\", \"state\"=&gt;\"mumbai\", \"country\"=&gt;\"india\", \"postcode\"=&gt;\"626781\", \"id\"=&gt;\"1\"}, \"education_attributes\"=&gt;{\"type\"=&gt;\"Degree\", \"name\"=&gt;\"ffgxh\", \"issue_institute\"=&gt;\"\", \"education_status\"=&gt;\"\", \"id\"=&gt;\"1\"}, \"fee_attributes\"=&gt;{\"fee_hour\"=&gt;\"\", \"fee_month\"=&gt;\"\", \"id\"=&gt;\"1\"}}, \"commit\"=&gt;\"Save Changes\"}\n  User Load (0.3ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 ORDER BY `users`.`id` ASC LIMIT 1\n  User Load (0.2ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1\n  Address Load (0.2ms)  SELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`user_id` = 2 LIMIT 1\n  Fee Load (0.2ms)  SELECT  `fees`.* FROM `fees` WHERE `fees`.`user_id` = 2 LIMIT 1\n  Education Load (0.2ms)  SELECT  `educations`.* FROM `educations` WHERE `educations`.`user_id` = 2 LIMIT 1\nUnpermitted parameter: :email\n   (0.2ms)  BEGIN\n  SQL (0.4ms)  UPDATE `educations` SET `type` = 'Degree', `updated_at` = '2018-05-30 03:34:37' WHERE `educations`.`id` = 1\n   (5.3ms)  COMMIT\nRedirected to http://localhost:3000/profile\nCompleted 302 Found in 19ms (ActiveRecord: 7.1ms)\n\n\nStarted GET \"/profile\" for 127.0.0.1 at 2018-05-30 09:04:37 +0530\nProcessing by ProfileController#index as HTML\n  User Load (0.7ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 ORDER BY `users`.`id` ASC LIMIT 1\n  User Load (0.3ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1\n  Address Load (0.4ms)  SELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`user_id` = 2 LIMIT 1\n  Fee Load (0.3ms)  SELECT  `fees`.* FROM `fees` WHERE `fees`.`user_id` = 2 LIMIT 1\n  Education Load (0.8ms)  SELECT  `educations`.* FROM `educations` WHERE `educations`.`user_id` = 2 LIMIT 1\nCompleted 401 Unauthorized in 12ms (ActiveRecord: 2.4ms)\n\n\n\nNameError - uninitialized constant Degree:\n  app/controllers/profile_controller.rb:41:in `set_user'\n</code></pre>\n\n<p>Data gets saved but i have error page after that. Can someone help me with it? Thanks in advance.</p>\n"}, {"tags": ["ruby", "string", "parsing", "hash", "nested"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1527654739, "post_id": 50596370, "comment_id": 88201949, "body": "what do you mean, that data is already a hash"}, {"owner": {"reputation": 15, "user_id": 9116166, "user_type": "registered", "profile_image": "https://graph.facebook.com/2016289465283296/picture?type=large", "display_name": "Salman Shaik", "link": "https://stackoverflow.com/users/9116166/salman-shaik"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1527655160, "post_id": 50596370, "comment_id": 88202075, "body": "Data was in hash and I wrote it to file. After reading it from the same file, how can I parse back to hash"}], "answers": [{"comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1527655739, "post_id": 50596538, "comment_id": 88202223, "body": "only if you don&#39;t have any security concerns, which is never the case I assume"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1527655958, "post_id": 50596538, "comment_id": 88202285, "body": "Always prefer <code>JSON#parse</code> over <code>eval</code>."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1527657239, "post_id": 50596538, "comment_id": 88202656, "body": "@Subash, good point I edited. Thanks."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1527657389, "post_id": 50596538, "comment_id": 88202703, "body": "@mudasobwa, thanks for the suggestion, I added the point, changing the string to be compliant with the format."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1527660338, "post_id": 50596538, "comment_id": 88203810, "body": "Never use &quot;eval&quot;, it should not even be there in the answer as first option. &quot;eval&quot; is a security risk!"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1527664654, "post_id": 50596538, "comment_id": 88206158, "body": "@pascalbetz, picked up your warning. I added an alert for security risk. But I replied to the question and to the string as provided JSON::parse doesn&#39;t apply."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 0, "last_activity_date": 1527664477, "last_edit_date": 1527664477, "creation_date": 1527655441, "answer_id": 50596538, "question_id": 50596370, "link": "https://stackoverflow.com/questions/50596370/how-to-convert-a-nested-hash-which-is-in-string-back-into-a-hash/50596538#50596538", "title": "How to convert a nested hash which is in string back into a hash?", "body": "<p><a href=\"https://stackoverflow.com/questions/1667630/how-do-i-convert-a-string-object-into-a-hash-object\">Already in SO.</a></p>\n\n<p><strong>WARNING SECURITY RISK!</strong></p>\n\n<p>For your string you need to pass to <code>eval</code>, but this is a <strong><a href=\"https://stackoverflow.com/a/637431/5239030\">SECURITY RISK</a></strong></p>\n\n<pre><code>string = '{\"SONGS\"=&gt;{1=&gt;[\"2018-05-29 18:19:14 +0530\", \"HAPPY\", \"Meri Sapnon Ki Rani\"]}}'\np eval(string).class\n</code></pre>\n\n<p>If you need to store data structures in files, I suggest you to take a look at YAML module. Look at <a href=\"https://stackoverflow.com/a/30718500/5239030\">this post</a>, for example.</p>\n\n<p><strong>As suggested in comments:</strong></p>\n\n<ul>\n<li>Consider also security concerns, <a href=\"https://stackoverflow.com/a/637431/5239030\">look this post</a>.</li>\n<li>Consider to change a little bit the string syntax to use a JSON structure. See below.</li>\n</ul>\n\n<p>Use of JSON:</p>\n\n<pre><code>require 'json'\njson_string = '{\"songs\":{\"1\":{\"date\": \"2018-05-29 18:19:14 +0530\", \"title\":\"HAPPY\", \"name\":\"Meri Sapnon Ki Rani\"}}}'\np JSON::parse(json_string).class\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9116166, "user_type": "registered", "profile_image": "https://graph.facebook.com/2016289465283296/picture?type=large", "display_name": "Salman Shaik", "link": "https://stackoverflow.com/users/9116166/salman-shaik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1527655971, "accepted_answer_id": 50596538, "answer_count": 1, "score": 1, "last_activity_date": 1527664477, "creation_date": 1527654296, "last_edit_date": 1527655203, "question_id": 50596370, "link": "https://stackoverflow.com/questions/50596370/how-to-convert-a-nested-hash-which-is-in-string-back-into-a-hash", "closed_reason": "Duplicate", "title": "How to convert a nested hash which is in string back into a hash?", "body": "<p>I stored my <em>nested hash</em> in a file, and while retrieving it, I want to it back in a <strong>hash</strong> form instead of <strong>string</strong>. When I read a file it will give me a <strong>string</strong> and then how can I parse it back to a <strong>hash</strong>. \nThis is the string hash in the file: </p>\n\n<pre><code>{\"SONGS\"=&gt;{1=&gt;[\"2018-05-29 18:19:14 +0530\", \"HAPPY\", \"Meri Sapnon Ki Rani\"]}}\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1527653236, "post_id": 50596235, "comment_id": 88201578, "body": "What is your question?"}, {"owner": {"reputation": 1000, "user_id": 7620733, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yUUYCvAxgik/AAAAAAAAAAI/AAAAAAAAABU/PxmuI8XsFh0/photo.jpg?sz=128", "display_name": "Hariharan L", "link": "https://stackoverflow.com/users/7620733/hariharan-l"}, "edited": false, "score": 0, "creation_date": 1527654266, "post_id": 50596235, "comment_id": 88201825, "body": "do you have Gemfile in your workspace? you should move to your workspace and check whether the Gemfile is present and do <code>bundle install</code> there."}, {"owner": {"reputation": 1000, "user_id": 7620733, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yUUYCvAxgik/AAAAAAAAAAI/AAAAAAAAABU/PxmuI8XsFh0/photo.jpg?sz=128", "display_name": "Hariharan L", "link": "https://stackoverflow.com/users/7620733/hariharan-l"}, "edited": false, "score": 0, "creation_date": 1527654309, "post_id": 50596235, "comment_id": 88201837, "body": "if you don&#39;t have Gemfile there then do <code>bundle init</code>"}], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 1605773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c17f3c4c4e43fe9e05fe4fe7d4ec8a?s=128&d=identicon&r=PG", "display_name": "Juan Manuel", "link": "https://stackoverflow.com/users/1605773/juan-manuel"}, "edited": false, "score": 1, "creation_date": 1561061393, "post_id": 50597308, "comment_id": 99951654, "body": "&quot;bundle init&quot; helped me"}], "tags": [], "owner": {"reputation": 429, "user_id": 7617687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb0c380ac37c50e2c0574e0ecec1a98?s=128&d=identicon&r=PG&f=1", "display_name": "radoAngelov", "link": "https://stackoverflow.com/users/7617687/radoangelov"}, "is_accepted": false, "score": 7, "last_activity_date": 1527659996, "creation_date": 1527659996, "answer_id": 50597308, "question_id": 50596235, "link": "https://stackoverflow.com/questions/50596235/could-not-locate-gemfile-even-though-bundler-is-successfully-installed/50597308#50597308", "title": "Could Not locate gemfile even though bundler is successfully installed", "body": "<p>Do you have <code>Gemfile</code> in your workspace directory? </p>\n\n<ul>\n<li><p>If \"yes\", please make sure it is in the correct directory - > <code>path_to_your_app/Gemfile</code> and has <em>no</em> extensions - ><code>Gemfile.rb</code> is incorrect.</p></li>\n<li><p>If \"no\" , please run <code>bundle init</code> first and after that <code>bundle install</code>. </p></li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 9867771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93153d10478cef204d2a49d751bdae7d?s=128&d=identicon&r=PG&f=1", "display_name": "Natalie", "link": "https://stackoverflow.com/users/9867771/natalie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5424, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1527659996, "creation_date": 1527653160, "question_id": 50596235, "link": "https://stackoverflow.com/questions/50596235/could-not-locate-gemfile-even-though-bundler-is-successfully-installed", "title": "Could Not locate gemfile even though bundler is successfully installed", "body": "<p>I was able to install this </p>\n\n<pre><code>~/workspace $ gem install bundler\nSuccessfully installed bundler-1.16.2\n1 gem installed\n</code></pre>\n\n<p>However when I put in bundle install, I keep getting</p>\n\n<pre><code>Could not locate Gemfile\n</code></pre>\n\n<p>I tried updating and cd to my workspace but I'm still getting the same problem</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime", "activesupport"], "answers": [{"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 4, "last_activity_date": 1527650772, "last_edit_date": 1527650772, "creation_date": 1527650370, "answer_id": 50595887, "question_id": 50595754, "link": "https://stackoverflow.com/questions/50595754/how-to-use-active-support-core-ext-date-and-time/50595887#50595887", "title": "how to use active support core ext date and time", "body": "<p>Those modules <code>date_and_time</code> are there because they are modules that are included by all of the <code>Date</code>, <code>Time</code> and <code>DateTime</code> core extensions. Those modules extend those classes with the same methods. Hence they are grouped under Date <em>and</em> Time, because you get the same new methods across all classes.</p>\n\n<p>So, they are modules, meant to be included as extensions. You cannot require them separately and expect new functionality, unless you are meaning to use them to extend class functionality through <code>include</code>.</p>\n\n<p>Here's an example directly from the Rails source on how it's used (taken from <code>core_ext/date/calculations</code> in this case):</p>\n\n<pre><code>require \"active_support/core_ext/date_and_time/calculations\"\n\nclass Date\n  include DateAndTime::Calculations\n  ...\nend\n</code></pre>\n\n<p>You can <a href=\"https://github.com/rails/rails/tree/87d9228d9d2225296f68795ef685f617a844f4df/activesupport/lib/active_support/core_ext\" rel=\"nofollow noreferrer\">look at the source yourself</a>, or <a href=\"http://api.rubyonrails.org/classes/DateAndTime/Calculations.html\" rel=\"nofollow noreferrer\">check out the docs</a> for the added methods.</p>\n\n<p>For example, with that extension in both <code>Date</code> and <code>Time</code>, you can now do:</p>\n\n<pre><code>Time.now.last_year\nDate.today.last_year\n</code></pre>\n\n<p>Same method is available, for both classes.</p>\n"}], "owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 50595887, "answer_count": 1, "score": 1, "last_activity_date": 1527650772, "creation_date": 1527649048, "last_edit_date": 1527650393, "question_id": 50595754, "link": "https://stackoverflow.com/questions/50595754/how-to-use-active-support-core-ext-date-and-time", "title": "how to use active support core ext date and time", "body": "<p>What is <code>active_support/core_ext/date_and_time/calculations</code> for? There are <code>/date</code>, <code>/time</code>, and <code>/date_time</code> for <code>Date</code>, <code>Time</code> and <code>DateTime</code>, respectively. But what is <code>/date_and_time</code> for?</p>\n\n<p>I tried to require it instead of <code>date_time</code>, then I got NoMethodError for the methods defined in the file.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1527642110, "post_id": 50594916, "comment_id": 88199085, "body": "what do you get when you call <code>to_s</code> on <code>estimate</code> object ?"}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1527643827, "creation_date": 1527643827, "answer_id": 50595166, "question_id": 50594916, "link": "https://stackoverflow.com/questions/50594916/ruby-api-response-how-to-action/50595166#50595166", "title": "Ruby API response - how to action", "body": "<p>You're talking to the API via a library, normally you'd follow the documentation of that library <a href=\"https://github.com/sishen/uber-ruby\" rel=\"nofollow noreferrer\">uber-ruby</a>.</p>\n\n<p>Unfortunately that library doesn't document what an <code>Uber::Price</code> does. It's a safe guess that Uber::Price has the same fields as in the API documentation. <a href=\"https://github.com/sishen/uber-ruby/blob/master/lib/uber/models/price.rb\" rel=\"nofollow noreferrer\">Peaking at the code for Uber::Price</a> we see this is basically correct.</p>\n\n<pre><code>attr_accessor :product_id, :currency_code, :display_name,\n              :estimate, :low_estimate, :high_estimate,\n              :surge_multiplier, :duration, :distance\n</code></pre>\n\n<p>You can access the API fields with <code>estimate.field</code>. For example, to see all estimates and durations...</p>\n\n<pre><code>estimates = ride()\n\nestimates.each do |estimate|\n    puts \"Taking a #{estimate.display_name} will cost #{estimate.estimate} #{estimate.currency_code} and take #{estimate.duration / 60} minutes\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1527721122, "post_id": 50596785, "comment_id": 88238628, "body": "Some enterprising user could <a href=\"https://github.com/AnkurGel/uber-ruby/blob/master/README.md\" rel=\"nofollow noreferrer\">update the README.md</a> or <a href=\"https://yardoc.org/\" rel=\"nofollow noreferrer\">add detailed documentation</a>."}], "tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": false, "score": 2, "last_activity_date": 1527657177, "creation_date": 1527657177, "answer_id": 50596785, "question_id": 50594916, "link": "https://stackoverflow.com/questions/50594916/ruby-api-response-how-to-action/50596785#50596785", "title": "Ruby API response - how to action", "body": "<p>I am the maintainer and co-author of <a href=\"https://github.com/AnkurGel/uber-ruby\" rel=\"nofollow noreferrer\"><code>uber-ruby</code></a> gem. @Schwern is correct, the client library gives the attributes same as that in uber api response's structure. I should probably indicate that in the documentation.</p>\n\n<p>Please also note that test specs of the gem are 100% covered and it can give you the idea of how to interact with the gem, wherever it's unclear. </p>\n\n<p>For price estimate, you can refer to <a href=\"https://github.com/AnkurGel/uber-ruby/blob/master/spec/lib/api/price_estimates_spec.rb#L61-L73\" rel=\"nofollow noreferrer\">https://github.com/AnkurGel/uber-ruby/blob/master/spec/lib/api/price_estimates_spec.rb#L61-L73</a> </p>\n"}], "owner": {"reputation": 685, "user_id": 3630417, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QEJwi.jpg?s=128&g=1", "display_name": "Pere", "link": "https://stackoverflow.com/users/3630417/pere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 50595166, "answer_count": 2, "score": 2, "last_activity_date": 1527657177, "creation_date": 1527641432, "question_id": 50594916, "link": "https://stackoverflow.com/questions/50594916/ruby-api-response-how-to-action", "title": "Ruby API response - how to action", "body": "<p>Learning Ruby &amp; APIs. Practicing with the Uber API. Wrote a script to estimate the price of a ride. </p>\n\n<pre><code>require 'uber'\nrequire 'geocoder'\n\ndef ride()\n\n    # print \"start? \"\n    # location_start = gets.chomp\n    # print \"finish? \"\n    # location_end = gets.chomp\n\n    coordinates_start = Geocoder.coordinates(\"dublin\") # gets a location for start and transforms into lat long\n    coordinates_end = Geocoder.coordinates(\"dalkey\") # gets a location for start and transforms into lat long\n\n    client = Uber::Client.new do |config|\n      config.server_token  = \"{SERVER_TOKEN}\"\n      config.sandbox       = true\n    end\n    estimate = client.price_estimations(start_latitude: coordinates_start[0], start_longitude: coordinates_start[1],\n                             end_latitude: coordinates_end[0], end_longitude: coordinates_end[1])\n    estimate\n\nend\n\nputs ride\n</code></pre>\n\n<p>the output of estimate has the format <code>#&lt;Uber::Price:0x00007fc663821b90&gt;</code>. I run <code>estimate.class</code> and it's an array. I run <code>estimate[0].class</code> and I get <code>Uber::Price</code>. How can I extract the values that I should be getting from Uber's API response? [0]</p>\n\n<p>[0] <a href=\"https://developer.uber.com/docs/riders/references/api/v1.2/estimates-price-get#response\" rel=\"nofollow noreferrer\">https://developer.uber.com/docs/riders/references/api/v1.2/estimates-price-get#response</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2133, "user_id": 3820185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XZmR.jpg?s=128&g=1", "display_name": "wiesion", "link": "https://stackoverflow.com/users/3820185/wiesion"}, "edited": false, "score": 0, "creation_date": 1527636602, "post_id": 50594312, "comment_id": 88197876, "body": "Please post your <code>routes.rb</code> as well"}, {"owner": {"reputation": 21499, "user_id": 19839, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/971cfac6afb23c0f0fd3623284a02a81?s=128&d=identicon&r=PG", "display_name": "csexton", "link": "https://stackoverflow.com/users/19839/csexton"}, "edited": false, "score": 0, "creation_date": 1527645728, "post_id": 50594312, "comment_id": 88199818, "body": "This seems like it is a choice between adding a column to bookings (e.g. a boolean <code>bookings.approved</code>) or a new <code>approvals</code> table. Do you need to know who approved it and when? Can the approval have other information associated with it? If so a new <code>approvals</code> resource may save you work in the long run."}], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 3, "last_activity_date": 1527637046, "creation_date": 1527637046, "answer_id": 50594417, "question_id": 50594312, "link": "https://stackoverflow.com/questions/50594312/how-to-add-approve-booking-requests-in-rails/50594417#50594417", "title": "How to add approve booking requests in Rails?", "body": "<p>You can do something like:</p>\n\n<pre><code>resources :bookings do \n  member do\n    post :approve\n  end\nend\n</code></pre>\n\n<p>Which will give you (on <code>rake routes</code>):</p>\n\n<pre><code>approve_booking POST   /bookings/:id/approve(.:format)         bookings#approve\n       bookings GET    /bookings(.:format)                     bookings#index\n                POST   /bookings(.:format)                     bookings#create\n    new_booking GET    /bookings/new(.:format)                 bookings#new\n   edit_booking GET    /bookings/:id/edit(.:format)            bookings#edit\n        booking GET    /bookings/:id(.:format)                 bookings#show\n                PATCH  /bookings/:id(.:format)                 bookings#update\n                PUT    /bookings/:id(.:format)                 bookings#update\n                DELETE /bookings/:id(.:format)                 bookings#destroy\n</code></pre>\n\n<p>And then do:</p>\n\n<pre><code>&lt;td&gt;\n  &lt;%= link_to 'Approve', approve_booking_path(booking), class: \"button-xs success\", method: :post %&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p>BTW, you say you have a <code>status</code> field, but in your controller method, you do:</p>\n\n<pre><code>@booking.update(state: \"approved\")\n</code></pre>\n\n<p><code>state</code> != <code>status</code>...</p>\n"}], "owner": {"reputation": 708, "user_id": 8005612, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fe32b531eb7d09e29b64d71d392ba9fc?s=128&d=identicon&r=PG&f=1", "display_name": "jungleMan", "link": "https://stackoverflow.com/users/8005612/jungleman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 50594417, "answer_count": 1, "score": -1, "last_activity_date": 1527637046, "creation_date": 1527636061, "question_id": 50594312, "link": "https://stackoverflow.com/questions/50594312/how-to-add-approve-booking-requests-in-rails", "title": "How to add approve booking requests in Rails?", "body": "<p>I have a Bookings resources. To approve the bookings, I added in my BookingsController the <strong>approve</strong> method:</p>\n\n<pre><code>def approve\n@booking = Booking.find_by_id(params[:id])\n @booking.update(state: \"approved\")\n if @booking.state == \"approved\"\n   flash[:success] = \"Booking successfully approved\"\n   redirect_to bookings_path\n else\n   flash[:error] = \"Booking not approved\"\n   redirect_to bookings_path\n end\n</code></pre>\n\n<p>end</p>\n\n<p>To approve a booking, I used the link:</p>\n\n<pre><code>&lt;td&gt;&lt;%= link_to 'Approve', bookings_approve(id: booking.id), class: \"button-xs success\" %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>I am not sure about the link to approve and the corresponding routes definition. How do I defined the routes and the link to aprrove ? </p>\n\n<p>Each booking has a status field which I want to change to 'approved' when the Approve button is pressed . \nThanks in advance !</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-kubernetes-engine", "google-cloud-logging"], "comments": [{"owner": {"reputation": 1737, "user_id": 3688301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/498f7da4b8d27da4ce1dfee0c85faa1f?s=128&d=identicon&r=PG&f=1", "display_name": "Faizan", "link": "https://stackoverflow.com/users/3688301/faizan"}, "edited": false, "score": 0, "creation_date": 1530133227, "post_id": 50593285, "comment_id": 89132470, "body": "Looking at the update it seems like you have resolved this issue. If yes, can you go ahead and post that as an answer for other community users looking at this thread."}], "answers": [{"tags": [], "owner": {"reputation": 173, "user_id": 688981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/258fde7f4cd725f5df724091682735d2?s=128&d=identicon&r=PG", "display_name": "Craig S. Cottingham", "link": "https://stackoverflow.com/users/688981/craig-s-cottingham"}, "is_accepted": true, "score": 0, "last_activity_date": 1530147008, "creation_date": 1530147008, "answer_id": 51073250, "question_id": 50593285, "link": "https://stackoverflow.com/questions/50593285/stackdriver-logging-in-a-rails-app-in-gke-is-not-working/51073250#51073250", "title": "Stackdriver logging in a Rails app in GKE is not working", "body": "<p>After much web searching, I managed to turn up <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues/2025\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues/2025</a> which suggests that the namespace to which log messages are sent is determined by the value of an environment variable, and that said env var is not being set automatically in GKE containers. (It has supposedly been resolved by <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-ruby/pull/2071\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/google-cloud-ruby/pull/2071</a> but I don't think that's live yet, at least not in my cluster.) I forced the env var in my deployment file, and IIRC that worked. (I no longer have access to that cluster, so I can't verify that.)</p>\n"}, {"tags": [], "owner": {"reputation": 1323, "user_id": 9743418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRhlh.jpg?s=128&g=1", "display_name": "Alioua", "link": "https://stackoverflow.com/users/9743418/alioua"}, "is_accepted": false, "score": 0, "last_activity_date": 1530203622, "creation_date": 1530203622, "answer_id": 51087722, "question_id": 50593285, "link": "https://stackoverflow.com/questions/50593285/stackdriver-logging-in-a-rails-app-in-gke-is-not-working/51087722#51087722", "title": "Stackdriver logging in a Rails app in GKE is not working", "body": "<p>Google-Cloud-Env gem has released this morning <a href=\"https://rubygems.org/gems/google-cloud-env/versions/1.0.2\" rel=\"nofollow noreferrer\">the version (1.0.2)</a> you may update your bundle.</p>\n"}], "owner": {"reputation": 173, "user_id": 688981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/258fde7f4cd725f5df724091682735d2?s=128&d=identicon&r=PG", "display_name": "Craig S. Cottingham", "link": "https://stackoverflow.com/users/688981/craig-s-cottingham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "accepted_answer_id": 51073250, "answer_count": 2, "score": 2, "last_activity_date": 1530203622, "creation_date": 1527629565, "last_edit_date": 1527631357, "question_id": 50593285, "link": "https://stackoverflow.com/questions/50593285/stackdriver-logging-in-a-rails-app-in-gke-is-not-working", "title": "Stackdriver logging in a Rails app in GKE is not working", "body": "<p>Ruby 2.3.6, Rails 4.2.6, Stackdriver 0.15.0</p>\n\n<p>Following the directions at <a href=\"https://cloud.google.com/logging/docs/setup/ruby\" rel=\"nofollow noreferrer\">https://cloud.google.com/logging/docs/setup/ruby</a>, I've added the <code>stackdriver</code> gem to <code>Gemfile</code>. From what I can tell, I shouldn't <strong>need</strong> to do anything else.</p>\n\n<p>However, I'm not seeing any log messages from within Rails showing up in Stackdriver. I've even tried <code>exec</code>ing a shell in the container, running <code>bundle exec rails console</code>, and explicitly logging with <code>Rails.logger.error \"this is a log message\"</code>.</p>\n\n<p><code>config.google_cloud.use_logging = true</code> and <code>config.log_level = :debug</code>, FWIW.</p>\n\n<p><strong>UPDATE</strong>: I took a closer look at the logger instance with <code>pp Rails.logger</code>, and it contains this:</p>\n\n<pre><code>@resource=\n  #&lt;Google::Cloud::Logging::Resource:0x0000558b075d1f50\n   @labels={:cluster_name=&gt;\"onehq-cluster\", :namespace_id=&gt;\"default\"},\n   @type=\"container\"&gt;,\n</code></pre>\n\n<p>My container is running in the <code>staging</code> namespace, which would explain why I'm not seeing log messages. When I look in the Stackdriver log viewer in the <code>default</code> namespace, lo, there are logs. Unfortunately, sending all messages to <code>default</code> won't do me any good, because I have apps running in two namespaces, and I need to be able to tell them apart.</p>\n\n<p>I tried adding additional configuration:</p>\n\n<pre><code>config.google_cloud.logging.monitored_resource.type = \"container\"\nconfig.google_cloud.logging.monitored_resource.labels = { cluster_name: \"my-cluster\", namespace_id: \"staging\" }\n</code></pre>\n\n<p>And now <code>Rails.logger.error \"this is a log message\"</code> doesn't show up <em>anywhere</em>.</p>\n\n<p><strong>UPDATE 2</strong>: After much web searching, I managed to turn up <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues/2025\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues/2025</a> which suggests that the namespace to which log messages are sent is determined by the value of an environment variable, and that said env var is not being set automatically in GKE containers. (It has supposedly been resolved by <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-ruby/pull/2071\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/google-cloud-ruby/pull/2071</a> but I don't think that's live yet, at least not in my cluster.) I'll try forcing the env var in my deployment file, and if that works I'll convert the last part of this to an answer.</p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 357, "user_id": 1644355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cUHei.png?s=128&g=1", "display_name": "Przemek Mroczek", "link": "https://stackoverflow.com/users/1644355/przemek-mroczek"}, "is_accepted": false, "score": 1, "last_activity_date": 1527629143, "creation_date": 1527629143, "answer_id": 50593182, "question_id": 50593116, "link": "https://stackoverflow.com/questions/50593116/chef-resource-block-syntax/50593182#50593182", "title": "chef resource block syntax", "body": "<p>It's a syntax for writing methods, in ruby you can omit parentheses. Whole chef is written in ruby and using ruby dsl</p>\n"}, {"comments": [{"owner": {"reputation": 565, "user_id": 6756794, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/207464d2ce680a26d729e4090aa89a85?s=128&d=identicon&r=PG&f=1", "display_name": "zanyman", "link": "https://stackoverflow.com/users/6756794/zanyman"}, "edited": false, "score": 0, "creation_date": 1527881436, "post_id": 50593606, "comment_id": 88310726, "body": "what does the &quot;self&quot; mean?"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 565, "user_id": 6756794, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/207464d2ce680a26d729e4090aa89a85?s=128&d=identicon&r=PG&f=1", "display_name": "zanyman", "link": "https://stackoverflow.com/users/6756794/zanyman"}, "edited": false, "score": 0, "creation_date": 1527888310, "post_id": 50593606, "comment_id": 88313220, "body": "In Ruby, that&#39;s a method that always returns a reference to the current object in whatever context you happen to be in. The first one is a reference to the <code>Chef::Recipe</code> object, the second to an instance of <code>Chef::Resource::Template</code>."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1527631293, "creation_date": 1527631293, "answer_id": 50593606, "question_id": 50593116, "link": "https://stackoverflow.com/questions/50593116/chef-resource-block-syntax/50593606#50593606", "title": "chef resource block syntax", "body": "<p>To expand on Przemek's answer a bit, It's all Ruby but Chef applies a lot of special stuff to make the DSL look more declarative. If you add back all the optional-y things, it's maybe a bit clearer how this works (not an exact translation because of the block):</p>\n\n<pre><code>self.template('/var/www/html/index.html', do # ~FC033\n  self.source('index.html.erb')\n  ...\nend)\n</code></pre>\n\n<p><code>template()</code> is a method call that takes a resource name and a block which forms the resource body (blocks are a feature of ruby that allows easily passing an anonymous chuck of code to a method). As part of running that <code>template()</code> method, it creates a <code>Chef::Resource::Template</code> object instance, and then runs the provided block against it. <code>source()</code> is a method on that <code>Template</code> class which gets or sets the <code>@source</code> instance variable, in this case we're setting it.</p>\n"}], "owner": {"reputation": 565, "user_id": 6756794, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/207464d2ce680a26d729e4090aa89a85?s=128&d=identicon&r=PG&f=1", "display_name": "zanyman", "link": "https://stackoverflow.com/users/6756794/zanyman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1527631293, "creation_date": 1527628834, "last_edit_date": 1527629306, "question_id": 50593116, "link": "https://stackoverflow.com/questions/50593116/chef-resource-block-syntax", "title": "chef resource block syntax", "body": "<p>I'm new to Chef and Ruby.</p>\n\n<pre><code>template '/var/www/html/index.html' do # ~FC033\n  source 'index.html.erb'\n  mode '0644'\n  owner 'web_admin'\n  group 'web_admin'\nend\n</code></pre>\n\n<p>What is the syntax inside the block, for example, source 'index.html.erb', like a [space] b, is this syntax defined in Ruby or as a additional DSL part in Chef?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1527627618, "post_id": 50592801, "comment_id": 88195084, "body": "<code>&#47;records&#47;share&#47;:id</code> != <code>&#47;records&#47;:id&#47;share</code>. Try the latter."}, {"owner": {"reputation": 361, "user_id": 3135351, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/LNjMQ.jpg?s=128&g=1", "display_name": "pw94", "link": "https://stackoverflow.com/users/3135351/pw94"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1527627975, "post_id": 50592801, "comment_id": 88195213, "body": "I made an error in the description. It doesn&#39;t change anything."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1527628521, "post_id": 50592801, "comment_id": 88195445, "body": "Why not just use post and be done with it?"}], "answers": [{"tags": [], "owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "is_accepted": true, "score": 3, "last_activity_date": 1527629805, "creation_date": 1527629805, "answer_id": 50593332, "question_id": 50592801, "link": "https://stackoverflow.com/questions/50592801/add-custom-put-method-to-generated-controller/50593332#50593332", "title": "Add custom put method to generated controller", "body": "<p>According to the <a href=\"https://apidock.com/rails/ActionView/Helpers/FormTagHelper/form_tag\" rel=\"nofollow noreferrer\"><code>form_tag</code> source code</a>, the parameters you pass to the helper are all considered as <code>url_for_options</code> and return a wrong output like this:</p>\n\n<pre><code>&lt;form action=\"/records/2/share?method=put&amp;amp;remote=true\" method=\"post\"&gt;\n</code></pre>\n\n<p>You need to specify which parameters are <code>url_for_options</code> and which are only <code>options</code>:</p>\n\n<pre><code>&lt;%= form_tag({controller: \"records\", action: \"share\"}, method: 'put', remote: true) do %&gt;\n</code></pre>\n"}], "owner": {"reputation": 361, "user_id": 3135351, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/LNjMQ.jpg?s=128&g=1", "display_name": "pw94", "link": "https://stackoverflow.com/users/3135351/pw94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 50593332, "answer_count": 1, "score": 1, "last_activity_date": 1527629805, "creation_date": 1527627345, "last_edit_date": 1527627919, "question_id": 50592801, "link": "https://stackoverflow.com/questions/50592801/add-custom-put-method-to-generated-controller", "title": "Add custom put method to generated controller", "body": "<p>I have <code>records_controller</code> generated through the regular generator scaffold_controller. I would like to add custom method, lets call it <code>share</code> in order to pass there only one parameter with email address. If email exists in my database I would like to add associated within <code>id</code> to <code>record</code>.</p>\n\n<p>I added share method to <code>records_controller</code>:</p>\n\n<pre><code>  def share\n    logger.info record_params\n    logger.info params\n    # check email in db and add id\n    respond_to do |format|\n      format.js\n    end\n  end\n</code></pre>\n\n<p>form on show view:</p>\n\n<pre><code>&lt;%= form_tag(controller: \"records\", action: \"share\", method: \"put\", remote: true) do %&gt;\n  &lt;%= label_tag(:user_email, \"Share for:\") %&gt;\n  &lt;%= text_field_tag(:user_email) %&gt;\n  &lt;%= submit_tag(\"Share\") %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>and rule in <em>routes</em>:</p>\n\n<pre><code>  put    '/records/:id/share', to: 'records#share'\n</code></pre>\n\n<p>Form renders fine but when I press click I get error:</p>\n\n<pre><code>ActionController::RoutingError (No route matches [POST] \"/records/2/share\"):\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1527625925, "post_id": 50592294, "comment_id": 88194316, "body": "Where are these files located? If they are under <code>app</code>, then you shouldn&#39;t need to <code>require</code> them as they will be autoloaded."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1527626169, "post_id": 50592294, "comment_id": 88194427, "body": "Autoload but it is required to respect naming convention, see <a href=\"https://stackoverflow.com/a/47119792/5239030\">here</a>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1527627102, "post_id": 50592294, "comment_id": 88194862, "body": "It would be very unusual for a file in a rails project <i>not</i> to contain a class, or a module. So putting classes into a folder named <code>lib&#47;classes</code> is almost certainly a bad design! What do these classes do? Are they plain old ruby objects, or does <code>Messenger</code> subclass   e.g. <code>ActiveRecord::Base</code>? At the very least, if there&#39;s really no better place to put these files, you could do something like: <code>lib&#47;messengers&#47;{base,sms,email}.rb</code>. Then inside, <code>module Messenger; class Sms &lt; Base; ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 4, "last_activity_date": 1527632403, "creation_date": 1527632403, "answer_id": 50593805, "question_id": 50592294, "link": "https://stackoverflow.com/questions/50592294/proper-way-to-instantiate-subclass-ruby-on-rails/50593805#50593805", "title": "Proper Way to Instantiate Subclass Ruby on Rails", "body": "<p>Perhaps you should consider putting these in a directory named <code>messengers</code> under <code>app</code>, like: </p>\n\n<pre><code>- app\n  |- messengers\n     |- messenger_base.rb\n     |- email_messenger.rb\n     |- sms_messenger.rb\n</code></pre>\n\n<p>And then define your classes like: </p>\n\n<pre><code>class MessengerBase\n  #methods defined here:\nend\n\nclass EmailMessenger &lt; MessengerBase\n  #send email and other email related stuff\nend\n\nclass SmsMessenger &lt; MessengerBase\n  #send text messages and other related stuff\nend\n</code></pre>\n\n<p>IMO, a name like <code>EmailMessenger</code> is clearer than just <code>Email</code>. With this, autoloading should work fine and no need for <code>require</code> statements.</p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 50593805, "answer_count": 1, "score": 0, "last_activity_date": 1527632403, "creation_date": 1527624997, "question_id": 50592294, "link": "https://stackoverflow.com/questions/50592294/proper-way-to-instantiate-subclass-ruby-on-rails", "title": "Proper Way to Instantiate Subclass Ruby on Rails", "body": "<p>I've got 3 classes with the Parent being <code>Messenger</code> like so:</p>\n\n<pre><code>class Messenger\n    #methods defined here:\nend\n\nclass Email &lt; Messenger\n    #send email and other email related stuff\nend\n\nclass Sms &lt; Messenger\n    #send text messages and other related stuff\nend\n</code></pre>\n\n<p>In my Rails controller I want to either instantiate a new email or sms object and send a message via the appropriate messaging channel. How do I need to setup my require statements? I'm mainly familiar with Java so I'd usually just import the classes but I wasn't sure of the correct Ruby way of doing this.</p>\n\n<p>I had previously put these three lines at the top of my controller:</p>\n\n<pre><code>require \"#{Rails.root}/lib/classes/email.rb\"\nrequire \"#{Rails.root}/lib/classes/sms.rb\" \nrequire \"#{Rails.root}/lib/classes/messenger.rb\" \n</code></pre>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["ruby", "xamarin", "server", "wallet"], "answers": [{"tags": [], "owner": {"reputation": 21499, "user_id": 19839, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/971cfac6afb23c0f0fd3623284a02a81?s=128&d=identicon&r=PG", "display_name": "csexton", "link": "https://stackoverflow.com/users/19839/csexton"}, "is_accepted": false, "score": 1, "last_activity_date": 1527646496, "creation_date": 1527646496, "answer_id": 50595450, "question_id": 50592006, "link": "https://stackoverflow.com/questions/50592006/lib-pass-server-ctl-s-failed/50595450#50595450", "title": "lib/pass_server_ctl -s failed", "body": "<p>The <code>yaml</code> library is part of the Ruby standard library, so you should not need to install that from Ruby Gems.</p>\n\n<p>Looks like the jsonip.com service is now redirecting to HTTPS URLs. I don't have access to the WalletCompanionFiles code, but my guess is that somewhere in <code>lib/pass_server_ctl</code> it references that URL but uses the HTTP protocol. </p>\n\n<p>You should be able to replace that URL with <code>https://jsonip.com/</code> and get past the open-uri error. </p>\n\n<p><em>tl;dr</em>: Just add an <code>s</code> to <code>http</code> on line 30 of <code>lib/pass_server_ctl</code></p>\n"}], "owner": {"reputation": 23, "user_id": 9398980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d70e15b7d25227c38cc33a689f8487c?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/9398980/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527646496, "creation_date": 1527623775, "question_id": 50592006, "link": "https://stackoverflow.com/questions/50592006/lib-pass-server-ctl-s-failed", "title": "lib/pass_server_ctl -s failed", "body": "<p>I am trying to setup an Apple Wallet Pass server. I downloaded WalletCompanionFiles from Apple developper site. I have xcode 9.3.1 and I have xcode command line tools installed. </p>\n\n<p>I did the following command :</p>\n\n<pre><code>$ sudo gem install sinatra sequel sqlite3 rubyzip rack yaml json terminal-table\n</code></pre>\n\n<p>Most of it succeded except I have the following error :</p>\n\n<pre><code>ERROR:  Could not find a valid gem 'yaml' (&gt;= 0) in any repository\nERROR:  Possible alternatives: zaml, cyaml, faml, haml, maml\n</code></pre>\n\n<p>Then I entered the next command, but it failed and I am not sure how to fix this :</p>\n\n<pre><code>$ lib/pass_server_ctl -s\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/open-uri.rb:225:in `open_loop': redirection forbidden: http://jsonip.com -&gt; https://jsonip.com/ (RuntimeError)\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/open-uri.rb:151:in `open_uri'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/open-uri.rb:717:in `open'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/open-uri.rb:35:in `open'\n    from lib/pass_server_ctl:30:in `setup_hostname'\n    from lib/pass_server_ctl:228:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "edited": false, "score": 0, "creation_date": 1527621887, "post_id": 50591415, "comment_id": 88192418, "body": "Are you sure the field is actually visible within the viewport? Are you capturing screenshots and/or HTML upon failure to confirm?"}], "answers": [{"comments": [{"owner": {"reputation": 945, "user_id": 138594, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/53d61531d5f438c5d8f801fd1f0179d2?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/138594/john-y"}, "edited": false, "score": 0, "creation_date": 1527665673, "post_id": 50591565, "comment_id": 88206832, "body": "Thanks \u2014 I haven&#39;t checked this yet, but I suspect this is what Bootstrap&#39;s doing. I&#39;ll give it a try tonight and mark this as accepted if I can get it going. Is spec_helper.rb the best place for the custom selector?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 945, "user_id": 138594, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/53d61531d5f438c5d8f801fd1f0179d2?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/138594/john-y"}, "edited": false, "score": 0, "creation_date": 1527697261, "post_id": 50591565, "comment_id": 88228512, "body": "@JohnY When using custom selectors I usually put them in their own file(s) and then require them after Capybara has been included in <code>rails_helper</code>, either specifically or via a <code>spec&#47;support&#47;**&#47;*</code> include.  <code>spec_helper</code> would work too as long as Capybara is already loaded."}, {"owner": {"reputation": 945, "user_id": 138594, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/53d61531d5f438c5d8f801fd1f0179d2?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/138594/john-y"}, "edited": false, "score": 0, "creation_date": 1527705248, "post_id": 50591565, "comment_id": 88232626, "body": "Thanks \u2014 the first two methods work, but I get <code>Capybara::ElementNotFound: Unable to find non-visible css &quot;input[type=\\&quot;radio\\&quot;]&quot; that is a sibling of visible bootstrap_radio &quot;Hidden&quot;</code> from the custom selector. I&#39;m not sure if this is because Bootstrap 4 sets the <code>z-index</code> to -1 rather than setting <code>visibility: hidden</code>."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 945, "user_id": 138594, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/53d61531d5f438c5d8f801fd1f0179d2?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/138594/john-y"}, "edited": false, "score": 0, "creation_date": 1527708634, "post_id": 50591565, "comment_id": 88234219, "body": "@JohnY then try changing to <code>visible: :all</code> instead of <code>visible: :hidden</code> in the filter. Also don&#39;t forget to accept the answer (checkmark) so the question gets marked as answered."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1527624797, "last_edit_date": 1527624797, "creation_date": 1527621953, "answer_id": 50591565, "question_id": 50591415, "link": "https://stackoverflow.com/questions/50591415/capybara-not-matching-radio-buttons-in-rspec-test/50591565#50591565", "title": "Capybara not matching radio buttons in rspec test", "body": "<p>I'll 99.9% guarantee you the radio input isn't actually visible and has been replaced by an image using CSS (and maybe some JS).  You could do</p>\n\n<pre><code>expect(page).to have_checked_field('Hidden', visible: false)\n</code></pre>\n\n<p>or you could do something slightly more complicated that verifies the label is actually visible like</p>\n\n<pre><code>expect(page).to have_css('input:checked + label', exact_text: 'Hidden')\n</code></pre>\n\n<p>Another solution if you're dealing with a lot of these radio buttons is to write a custom selector type something like</p>\n\n<pre><code>Capybara.add_selector(:bootstrap_radio) do \n  xpath do |locator|\n    XPath.descendant(:input)[XPath.attr(:type) == 'radio'].following_sibling(:label)[XPath.string.n.is(locator)]\n  end\n\n  filter(:checked) do |node, value|\n    node.sibling('input[type=\"radio\"]', visible: :hidden).checked? == value\n  end\nend\n</code></pre>\n\n<p>which would then allow you to do</p>\n\n<pre><code>expect(page).to have_selector(:bootstrap_radio, 'Hidden', checked: true)\n</code></pre>\n\n<p>and then you could write helper methods like <code>have_checked_bootstrap_radio</code> if wanted.  Note: this code was off the cuff so the XPath/CSS expressions may not be 100% correct but the general idea is sound :)</p>\n"}], "owner": {"reputation": 945, "user_id": 138594, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/53d61531d5f438c5d8f801fd1f0179d2?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/138594/john-y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 50591565, "answer_count": 1, "score": 0, "last_activity_date": 1527626062, "creation_date": 1527621312, "last_edit_date": 1527626062, "question_id": 50591415, "link": "https://stackoverflow.com/questions/50591415/capybara-not-matching-radio-buttons-in-rspec-test", "title": "Capybara not matching radio buttons in rspec test", "body": "<p>I'm trying to write a test for a Bootstrap form using rspec. I have the following code:</p>\n\n<pre><code>&lt;div id=\"published\" class=\"col-sm-auto\"&gt;\n  &lt;div class=\"custom-control custom-radio custom-control-inline\"&gt;\n    &lt;%= form.radio_button :published, true, checked: page.published?, class: 'custom-control-input' %&gt;\n    &lt;%= form.label :published, 'Published', value: true, class: 'custom-control-label' %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"custom-control custom-radio custom-control-inline\"&gt;\n    &lt;%= form.radio_button :published, false, checked: !page.published?, class: 'custom-control-input' %&gt;\n    &lt;%= form.label :published, 'Hidden', value: false, class: 'custom-control-label' %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>which generates the following HTML:</p>\n\n<pre><code>&lt;div id=\"published\" class=\"col-sm-auto\"&gt;\n  &lt;div class=\"custom-control custom-radio custom-control-inline\"&gt;\n    &lt;input class=\"custom-control-input\" type=\"radio\" value=\"true\" name=\"page[published]\" id=\"page_published_true\" /&gt;\n    &lt;label class=\"custom-control-label\" for=\"page_published_true\"&gt;Published&lt;/label&gt;\n  &lt;/div&gt;\n  &lt;div class=\"custom-control custom-radio custom-control-inline\"&gt;\n    &lt;input class=\"custom-control-input\" type=\"radio\" value=\"false\" checked=\"checked\" name=\"page[published]\" id=\"page_published_false\" /&gt;\n    &lt;label class=\"custom-control-label\" for=\"page_published_false\"&gt;Hidden&lt;/label&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>When I run this test, it fails with the message</p>\n\n<pre><code>it 'should default to unpublished' do\n  expect(page).to have_checked_field('Hidden')\nend\n</code></pre>\n\n<p>giving the message <code>expected to find visible field \"page[published]\" that is checked and not disabled but there were no matches. Also found \"\", \"\", which matched the selector but not all filters.</code></p>\n\n<p>Looking at the HTML in the inspector, the field is visible and not disabled, and there is a label that matches the text. I have no idea what the two empty strings are about.</p>\n\n<p>Please could somebody tell me why <code>have_checked_field</code> isn't matching? I'm really not keen on writing a more brittle test that uses <code>has_css</code> or <code>has_xpath</code> to look for an input tag with a specific ID \u2014\u00a0the whole point is that the user should see a field labelled \"Hidden\" and it should be checked, regardless of what's happening behind the scenes!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "sendgrid"], "comments": [{"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1527615401, "post_id": 50589869, "comment_id": 88189200, "body": "It&#39;s possible that this could be resolved with <code>require_dependency</code>, but hard to tell without a stack trace."}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 1, "creation_date": 1527615618, "post_id": 50589869, "comment_id": 88189321, "body": "@JaredBeck I&#39;ve updated the error in the question. As long as I don&#39;t <code>include SendGrid</code> I don&#39;t get the error but then I&#39;m not able to initialize the objects because they don&#39;t exist."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1527615673, "post_id": 50589869, "comment_id": 88189345, "body": "@CannonMoyer you would need to reference the objects using their full name space e.g. <code>SendGrid::Mail</code>, <code>SendGrid::Email</code> (etc.) rather than <code>include SendGrid</code>"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527615944, "post_id": 50589869, "comment_id": 88189479, "body": "@engineersmnky I&#39;ve updated the question to include my the class where I implement calls to the API. Can you please explain further?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527616130, "post_id": 50589869, "comment_id": 88189585, "body": "I am not sure how to explain further. <code>SendGrid</code> has its own module name space. remove <code>include SendGrid</code> and then append <code>SendGrid::</code> to the classes needed like <code>Mail</code>, <code>Email</code>, <code>Content</code>,<code>Subsitution</code>, etc. or I guess you could <code>include SendGrid</code> inside the class declaration e.g. <code>class SendGridEmail; include SendGrid; #...; end</code> but now you would have 2 scopes <code>SendGridEmail</code> and top level <code>SendGrid</code> that refer to the same exact thing. e.g. <code>SendGridEmail::Email</code> is the same as <code>SendGrid::Email</code> so If I were you I would stick to the first suggestion to avoid ambiguity"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527616399, "post_id": 50589869, "comment_id": 88189720, "body": "@engineersmnky Wonderful, I&#39;ve got it working now. Thanks!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1527617816, "post_id": 50589869, "comment_id": 88190456, "body": "Note that Ruby has some pretty strong code conventions that you should follow unless you have a very compelling reason to deviate. A) Indent with two spaces. B) Omit empty argument lists (e.g. <code>def initialize</code> instead of <code>def initialize()</code>) C) Indent the body of your <code>class</code>, don&#39;t leave it flush left. D) There&#39;s tools like <a href=\"https://github.com/bbatsov/rubocop\" rel=\"nofollow noreferrer\">Rubocop</a> and <a href=\"https://codeclimate.com\" rel=\"nofollow noreferrer\">Code Climate</a> that can scan your code and make recommendations like this automatically that are worth using."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 1, "creation_date": 1527703626, "post_id": 50589869, "comment_id": 88231858, "body": "Is that API key live/production/functional? If so, might want to redact it, but also expire it and regenerate a new one"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1527617991, "creation_date": 1527617991, "answer_id": 50590601, "question_id": 50589869, "link": "https://stackoverflow.com/questions/50589869/conflicting-class-name-in-rails/50590601#50590601", "title": "Conflicting Class Name in Rails", "body": "<p>Using <code>include</code> messes up namespaces, so it's best to just not do that. Ruby has a singular global namespace unlike things like Python and Node, so you need to be very careful when importing.</p>\n\n<p>If you <code>include SendGrid</code> and that has a <code>SendGrid::Attachment</code> class then Ruby will try and reconcile that with your <code>Attachment</code> class later, which will fail.</p>\n\n<p>The best plan is to update your code to include the <code>SendGrid::</code> prefix on everything. A well-designed library will be cleanly namespaced to avoid this problem.</p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 50590601, "answer_count": 1, "score": 1, "last_activity_date": 1527714907, "creation_date": 1527614966, "last_edit_date": 1527714907, "question_id": 50589869, "link": "https://stackoverflow.com/questions/50589869/conflicting-class-name-in-rails", "title": "Conflicting Class Name in Rails", "body": "<p>I'm trying to use the <code>sendgrid-ruby</code> API to send emails. I have a <code>Attachment</code> model that I use to keep track of uploaded files in an AWS bucket. </p>\n\n<p>I just tried running bundle install after setting</p>\n\n<pre><code>gem 'sendgrid-ruby' \n</code></pre>\n\n<p>in my Gemfile, but upon loading the app after installing the gem, I get the following error:</p>\n\n<pre><code>TypeError (superclass mismatch for class Attachment):\n\napp/models/attachment.rb:1:in `&lt;top (required)&gt;'\napp/controllers/jobs_controller.rb:182:in `edit'\n</code></pre>\n\n<p>Is there anyway to fix this without changing the name of my model?</p>\n\n<p>UPDATE:</p>\n\n<p>My SendGridEmail class:</p>\n\n<pre><code>require 'sendgrid-ruby'\ninclude SendGrid\n\nclass SendGridEmail\n\n  def initialize \n  end\n\n  def send_message\n    mail = Mail.new\n    mail.from = Email.new(email: 'test@example.com')\n    mail.subject = 'I\\'m replacing the subject tag'\n    personalization = Personalization.new\n    personalization.add_to(Email.new(email: 'cannon.moyer@treadmilldoctor.com'))\n    personalization.add_substitution(Substitution.new(key: '-name-', value: 'Example User'))\n    personalization.add_substitution(Substitution.new(key: '-city-', value: 'Denver'))\n    mail.add_personalization(personalization)\n    mail.add_content(Content.new(type: 'text/html', value: 'I\\'m replacing the &lt;strong&gt;body tag&lt;/strong&gt;'))\n    mail.template_id = '7fd8c267-9a3c-4093-8989-3df163e87c47'\n\n    sg = SendGrid::API.new(api_key: \"xxxxxxxxxxxxxxxxxxxxxx\")\n    begin\n        response = sg.client.mail._(\"send\").post(request_body: mail.to_json)\n    rescue Exception =&gt; e\n        puts e.message\n    end\n    puts response.status_code\n    puts response.body\n\n    puts response.headers\n  end\n\n  def create_notification\n    @customer.notifications.create(name: \"Manually Text Job to Customer\", to: \"+1\", notification_type: \"Manual Job Notification\")\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1527614474, "post_id": 50589693, "comment_id": 88188781, "body": "you can do it, inside <code>config&#47;application.rb</code> you can add something like this to autoload custom folders <code>config.autoload_paths += %W(#{config.root}&#47;lib)</code>"}, {"owner": {"reputation": 2084, "user_id": 3141240, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bc520eb2dcd6c23a18369425666faae8?s=128&d=identicon&r=PG&f=1", "display_name": "Ravenstine", "link": "https://stackoverflow.com/users/3141240/ravenstine"}, "reply_to_user": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1527615111, "post_id": 50589693, "comment_id": 88189053, "body": "@mr_sudaca That does not work for me.  Rails does not load any of the API code.  tried <code>config.autoload_paths += %W(#{config.root}&#47;api)</code>"}, {"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 3, "creation_date": 1527615270, "post_id": 50589693, "comment_id": 88189130, "body": "I see what you&#39;re going for, but this is one of the strongest conventions in rails and if you break it, the next person who has to work on the project will be confused."}, {"owner": {"reputation": 2084, "user_id": 3141240, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bc520eb2dcd6c23a18369425666faae8?s=128&d=identicon&r=PG&f=1", "display_name": "Ravenstine", "link": "https://stackoverflow.com/users/3141240/ravenstine"}, "reply_to_user": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1527616043, "post_id": 50589693, "comment_id": 88189526, "body": "@JaredBeck That&#39;s a good point.  I think I&#39;ll not do that after all, though I&#39;d still be curious if this convention is possible to break."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1527616219, "post_id": 50589693, "comment_id": 88189629, "body": "Changing that will probably also break IDEs and other Rails specific tools, maybe even Gems."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527616576, "post_id": 50589693, "comment_id": 88189814, "body": "@Ravenstine you can just create a sub folder in &quot;app&quot; for the <code>API</code> we do this all the time for name spacing purposes. To avoid breaking <code>Autoload</code> our directory tree is simply &quot;app/api/api&quot;  and then everything below that starts with <code>module API; #class declarations; end</code>. You may have to add an inflection too so that <code>rails</code> does not look for <code>Api</code> instead of <code>API</code>.e.g. <code>ActiveSupport::Inflector.inflections(:en) { |inflect| inflect.acronym &#39;API&#39; }</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1527619420, "post_id": 50589693, "comment_id": 88191259, "body": "Calling something &quot;application&quot; doesn&#39;t mean it isn&#39;t an API. The term&#39;s used in the <a href=\"https://en.wikipedia.org/wiki/OSI_model\" rel=\"nofollow noreferrer\">OSI Layer Model</a> to refer to <a href=\"https://en.wikipedia.org/wiki/Application_layer\" rel=\"nofollow noreferrer\">&quot;user software&quot;</a> that runs on computers as distinct from underlying hardware and lower-level protocols. An API is an &quot;application layer&quot; concern."}], "answers": [{"comments": [{"owner": {"reputation": 2084, "user_id": 3141240, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bc520eb2dcd6c23a18369425666faae8?s=128&d=identicon&r=PG&f=1", "display_name": "Ravenstine", "link": "https://stackoverflow.com/users/3141240/ravenstine"}, "edited": false, "score": 0, "creation_date": 1527632571, "post_id": 50593435, "comment_id": 88196817, "body": "Yeah, I&#39;m convinced that&#39;s the right answer.  I ended up leaving <code>app</code> as-is and moving my frontend app to a directory <code>frontend</code> at the same level."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 4, "last_activity_date": 1527630395, "creation_date": 1527630395, "answer_id": 50593435, "question_id": 50589693, "link": "https://stackoverflow.com/questions/50589693/is-it-possible-to-change-the-name-of-the-app-folder-in-a-rails-application/50593435#50593435", "title": "Is it possible to change the name of the &quot;app&quot; folder in a Rails application?", "body": "<p>You can probably get it working by adding some hacks and fixes here and there. And then it will break again with the next gem/tool/IDE/plugin/... </p>\n\n<p>Rails is strongly based on conventions, the <code>app</code> directory is one of them. Leaving as it is will save you lots of troubles.</p>\n"}], "owner": {"reputation": 2084, "user_id": 3141240, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bc520eb2dcd6c23a18369425666faae8?s=128&d=identicon&r=PG&f=1", "display_name": "Ravenstine", "link": "https://stackoverflow.com/users/3141240/ravenstine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 50593435, "answer_count": 1, "score": 0, "last_activity_date": 1527630395, "creation_date": 1527614241, "question_id": 50589693, "link": "https://stackoverflow.com/questions/50589693/is-it-possible-to-change-the-name-of-the-app-folder-in-a-rails-application", "title": "Is it possible to change the name of the &quot;app&quot; folder in a Rails application?", "body": "<p>When using Rails to only write an API, the term \"app\" seems less appropriate than something like \"api\".  Is it possible to configure Rails to use a different folder besides \"app\" to load controllers, models, etc.?  Preferably, I'd like my frontend code(outside the Rails asset pipeline) to live in \"app\", so creating a symlink isn't a preferable solution.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1527612935, "post_id": 50589261, "comment_id": 88188098, "body": "Would you mind to try <code>Kernel.const_get &#39;String&#39;</code>?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1527613051, "post_id": 50589261, "comment_id": 88188153, "body": "can you say any info about your ruby version / platform? <code>Object.const_get(&#39;String&#39;)</code> works for me."}, {"owner": {"reputation": 61, "user_id": 8212516, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a46fcf100e4fc354aef50b62e4c8d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/8212516/robin"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1527613089, "post_id": 50589261, "comment_id": 88188175, "body": "@mudasobwa I tried that as well. But I got  <b>uninitialized constant Kernel::String (NameError)</b>"}, {"owner": {"reputation": 61, "user_id": 8212516, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a46fcf100e4fc354aef50b62e4c8d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/8212516/robin"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1527613180, "post_id": 50589261, "comment_id": 88188212, "body": "@maxpleaner That&#39;s working for me in the rails console but when I put that in the script it&#39;s not working. I am using ruby 2.4.4"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1527613309, "post_id": 50589261, "comment_id": 88188266, "body": "For me both ways work on <code>ruby 2.4.1p111</code>. No need to require anything."}, {"owner": {"reputation": 61, "user_id": 8212516, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a46fcf100e4fc354aef50b62e4c8d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/8212516/robin"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1527613381, "post_id": 50589261, "comment_id": 88188297, "body": "@iGian are you trying in the rails console?  I am trying to execute that from a ruby file"}, {"owner": {"reputation": 908, "user_id": 337583, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3f9891033c378bec381a9ef587696f7d?s=128&d=identicon&r=PG", "display_name": "daryn", "link": "https://stackoverflow.com/users/337583/daryn"}, "edited": false, "score": 0, "creation_date": 1527613951, "post_id": 50589261, "comment_id": 88188572, "body": "Just to clarify, are you literally passing in a string value of &#39;String&#39;, or arbitrary strings (&#39;foo&#39;, &#39;Bar&#39;,&#39;Number&#39;)?  The latter will return a NameError, typically either &#39;uninitialized constant&#39; or &#39;wrong constant name&#39;, unless the name is an exact class name."}, {"owner": {"reputation": 61, "user_id": 8212516, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a46fcf100e4fc354aef50b62e4c8d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/8212516/robin"}, "reply_to_user": {"reputation": 908, "user_id": 337583, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3f9891033c378bec381a9ef587696f7d?s=128&d=identicon&r=PG", "display_name": "daryn", "link": "https://stackoverflow.com/users/337583/daryn"}, "edited": false, "score": 0, "creation_date": 1527614813, "post_id": 50589261, "comment_id": 88188934, "body": "@daryn This is what I am doing from inside a ruby script. <b>Object.const_get(&#39;Assignment&#39;)</b>  This is throwing me an error."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1527616539, "post_id": 50589261, "comment_id": 88189799, "body": "@Robin for me works in Rails Terminal and in Ruby script"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527616942, "post_id": 50589261, "comment_id": 88190012, "body": "@Robin is the <code>Assignment</code> class actually loaded at the time of the call?( e.g. via <code>require &#39;assigments&#39;</code> ) <code>Module#const_get</code> will require such a thing as it will not &quot;autoload&quot; undeclared constants the way rails does"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1527617466, "post_id": 50589261, "comment_id": 88190281, "body": "Additionally since you are requiring <code>ActiveSupport</code> you can use the constantize method via <code>ActiveSupport::Inflector.constantize(&quot;String&quot;)</code> or by addition <code>require &#39;active_support&#47;core_ext&#47;string&#39;</code> after <code>require &#39;active_support&#39;</code> and then <code>&quot;String&quot;.constantize</code> or even <code>&quot;string&quot;.classify.constantize</code> will work for you"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1527612893, "post_id": 50589336, "comment_id": 88188071, "body": "This makes no sense, <code>const_get</code> equally accepts both <code>String</code> and <code>Symbol</code> instances."}, {"owner": {"reputation": 61, "user_id": 8212516, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a46fcf100e4fc354aef50b62e4c8d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/8212516/robin"}, "edited": false, "score": 0, "creation_date": 1527612950, "post_id": 50589336, "comment_id": 88188104, "body": "Thanks for the response, Philip. Neither I didn&#39;t understand why the question got a downvote. I tried your option but still, I am getting <b>NameError Exception: uninitialized constant String</b>"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1527613191, "post_id": 50589336, "comment_id": 88188218, "body": "I didn&#39;t get a NameError I just got <code>String</code>; that&#39;s why I posted."}], "tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": false, "score": 0, "last_activity_date": 1527612661, "creation_date": 1527612661, "answer_id": 50589336, "question_id": 50589261, "link": "https://stackoverflow.com/questions/50589261/convert-strings-to-class-names-in-ruby/50589336#50589336", "title": "Convert Strings to Class Names in ruby", "body": "<p>Pass a symbol: <code>Object.const_get(:String)</code>.</p>\n\n<p>Not sure why you received a down-vote. People should explain why they do that in a comment; the alternative is just passive-aggressive...</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1527622929, "creation_date": 1527622929, "answer_id": 50591805, "question_id": 50589261, "link": "https://stackoverflow.com/questions/50589261/convert-strings-to-class-names-in-ruby/50591805#50591805", "title": "Convert Strings to Class Names in ruby", "body": "<p>The conventional way of assigning a name to an anonymous class is as follows.</p>\n\n<pre><code>bub = Class.new do\n  def b\n    'hi'\n  end\nend\n\nstr = 'Bubba'\nObject.const_set(str, bub)\n\nBubba.is_a?(Class)\n  #=&gt; true\nBubba.new.b\n  #=&gt; \"hi\"\n</code></pre>\n\n<p>Is that what you want to do? If so, as you see, you need to use <a href=\"https://ruby-doc.org/core-2.1.0/Module.html#method-i-const_set\" rel=\"nofollow noreferrer\">Module#const_set</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 429, "user_id": 7617687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb0c380ac37c50e2c0574e0ecec1a98?s=128&d=identicon&r=PG&f=1", "display_name": "radoAngelov", "link": "https://stackoverflow.com/users/7617687/radoangelov"}, "is_accepted": false, "score": 0, "last_activity_date": 1527627549, "creation_date": 1527627549, "answer_id": 50592840, "question_id": 50589261, "link": "https://stackoverflow.com/questions/50589261/convert-strings-to-class-names-in-ruby/50592840#50592840", "title": "Convert Strings to Class Names in ruby", "body": "<p>Do you try to use <code>const_get</code> only for a class or it is under a namespace like <code>ModuleA::ModuleB::ClassName</code>?</p>\n\n<p>Also converting a string to a class name makes a new class or assigns the value to it?</p>\n\n<p>I am asking these questions because the answer will affect the method you have to use. Maybe <code>const_set</code> instead of <code>const_get</code> is the correct approach, I don't know. </p>\n"}, {"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 0, "last_activity_date": 1527631033, "creation_date": 1527631033, "answer_id": 50593557, "question_id": 50589261, "link": "https://stackoverflow.com/questions/50589261/convert-strings-to-class-names-in-ruby/50593557#50593557", "title": "Convert Strings to Class Names in ruby", "body": "<p>From the comments you gave it looks like <code>'String'</code> is just an example and not the value that you literally pass to <code>const_get</code>. The actual value apparently is 'Assignment', is this correct?</p>\n\n<p>When you execute <code>Object.const_get('Assignment')</code> and you receive the <code>uninitialized constant</code> error it indicates that at this point the class <code>Assignment</code> has not been loaded yet.</p>\n\n<p>When you are using <code>Rails</code> then a lot of autoloading takes place if the files are in the right folder and the classes follow the naming conventions. Since you are running a \"standalone\" ruby script,  autoloading does not take place and you will need to load the file yourself.</p>\n\n<p>Adding a line like </p>\n\n<p><code>require_relative \"somepath/assignment\"</code></p>\n\n<p>should work. <code>somepath</code> needs to be adapted to the directory/file layout you have. It will load the file and execute the ruby code in that file.\nIf <code>assignment.rb</code> defines something like</p>\n\n<pre><code>class Assignment\nend\n</code></pre>\n\n<p>Then the <code>const_get</code> will work.</p>\n\n<p>That being said: what is your exact use case for this? Why do you need to dynamically find classes? Also Note that this opens up your app to (an unlikely) potential security issues if you let user input define what classes are loaded. </p>\n"}], "owner": {"reputation": 61, "user_id": 8212516, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a46fcf100e4fc354aef50b62e4c8d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/8212516/robin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 837, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1527631033, "creation_date": 1527612342, "last_edit_date": 1527615816, "question_id": 50589261, "link": "https://stackoverflow.com/questions/50589261/convert-strings-to-class-names-in-ruby", "title": "Convert Strings to Class Names in ruby", "body": "<p>I am trying to write a script in ruby which involves converting a string to Class Names. Since I am using pure ruby I cannot use <code>.constantize</code>.\nI have tried using <code>Object.const_get('String')</code> but not sure why it is throwing a  <code>uninitialized constant String (NameError)</code></p>\n\n<p>I have <code>require 'active_support'</code> on the top of the file</p>\n"}, {"tags": ["ruby", "rspec", "acceptance-testing", "beaker"], "answers": [{"tags": [], "owner": {"reputation": 247, "user_id": 8481019, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-esk-uHv4jQA/AAAAAAAAAAI/AAAAAAAABLU/xYKQmyqp6KU/photo.jpg?sz=128", "display_name": "Ginnie Hench", "link": "https://stackoverflow.com/users/8481019/ginnie-hench"}, "is_accepted": false, "score": 0, "last_activity_date": 1527611130, "creation_date": 1527611130, "answer_id": 50588919, "question_id": 50588568, "link": "https://stackoverflow.com/questions/50588568/beaker-rspec-running-system-command/50588919#50588919", "title": "Beaker Rspec running system command", "body": "<p>Rspec is probably not looking in the directories that you are needing it to look at. You probably need a line similar to the following into your <code>rails_helper.rb</code> or <code>spec_helper.rb</code> file:</p>\n\n<pre><code>Dir[Rails.root.join('app/policies/**/*.rb')].each { |f| require f }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 3713107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/E6Gzn.jpg?s=128&g=1", "display_name": "CyrodiilSavior", "link": "https://stackoverflow.com/users/3713107/cyrodiilsavior"}, "is_accepted": false, "score": 0, "last_activity_date": 1527617376, "creation_date": 1527617376, "answer_id": 50590440, "question_id": 50588568, "link": "https://stackoverflow.com/questions/50588568/beaker-rspec-running-system-command/50590440#50590440", "title": "Beaker Rspec running system command", "body": "<p>Turns out the issue is the system function would run whatever command I specify locally on the host machine but the VM I was trying to run the puppet environment in. Ended up using the on(server, 'COMMAND') function instead.</p>\n"}], "owner": {"reputation": 115, "user_id": 3713107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/E6Gzn.jpg?s=128&g=1", "display_name": "CyrodiilSavior", "link": "https://stackoverflow.com/users/3713107/cyrodiilsavior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1527617376, "creation_date": 1527609796, "question_id": 50588568, "link": "https://stackoverflow.com/questions/50588568/beaker-rspec-running-system-command", "title": "Beaker Rspec running system command", "body": "<p>I'm building an acceptance test for puppet on windows where I need to make sure certain security policies where indeed changed after the manifest is applied. I have</p>\n\n<pre><code>it 'should modify security policy' do\n     system(\"secedit.exe /export /areas SECURITYPOLICY /cfg C:\\policy.txt\")\n     File.read('C:\\policy.txt').should include \"Banner Title\"\nend\n</code></pre>\n\n<p>When I run this I get a no such file or directory in reference to the file I'm creating, this leads me to believe the initial command pulling the policies into a file isn't being run.</p>\n\n<p>Is there something I'm doing wrong?</p>\n"}, {"tags": ["ruby", "functional-programming", "currying"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 3, "creation_date": 1527610029, "post_id": 50588336, "comment_id": 88186616, "body": "There is a feature request on the Ruby issue tracker for <code>Proc#rcurry</code>, but so far nobody has been able to provide a compelling use case other than &quot;it should be there because symmetry&quot;."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1527611738, "post_id": 50588336, "comment_id": 88187486, "body": "You can feign a right side curry using <code>each_with_object</code> due to the way argument passing works for that method specifically eg. <code>list.each_with_object(1).map(&amp;at) #=&gt; [12,22,32,42]</code>"}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "edited": false, "score": 1, "creation_date": 1527630458, "post_id": 50588336, "comment_id": 88196195, "body": "This is correct, and your disappointment is well founded.  You should be able to curry at any argument position.  Basically, this boils down to ruby not having great support for functional programming."}], "answers": [{"tags": [], "owner": {"reputation": 869, "user_id": 1757430, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Yz7Eo.jpg?s=128&g=1", "display_name": "Walerian Sobczak", "link": "https://stackoverflow.com/users/1757430/walerian-sobczak"}, "is_accepted": true, "score": 1, "last_activity_date": 1548406206, "creation_date": 1548406206, "answer_id": 54361793, "question_id": 50588336, "link": "https://stackoverflow.com/questions/50588336/currying-out-of-order-in-ruby/54361793#54361793", "title": "Currying out of order in Ruby", "body": "<p>Currently <strong>standard library of Ruby doesn't provide such option</strong>.</p>\n\n<p>However you could easily implement a custom method which allows you to change the order of the arguments of Procs and lambdas. For example I'll present an imitation of Haskell's <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:flip\" rel=\"nofollow noreferrer\"><code>flip</code></a> function:</p>\n\n<blockquote>\n  <p><code>flip f</code> takes its (first) two arguments in the reverse order of <code>f</code></p>\n</blockquote>\n\n<p>How would it look like in Ruby?</p>\n\n<pre><code>def flip\n  lambda do |function|\n    -&gt;(first, second, *tail) { function.call(second, first, *tail) }.curry\n  end\nend\n</code></pre>\n\n<p>And now we can use this method to change the order of our lambdas.</p>\n\n<pre><code>concat = -&gt;(x, y) { x + y }\nconcat.call(\"flip\", \"flop\") # =&gt; \"flipflop\"\n\nflipped_concat = flip.call(concat)\nflipped_concat.call(\"flip\", \"flop\") # =&gt; \"flopflip\"\n</code></pre>\n"}], "owner": {"reputation": 799, "user_id": 139299, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/167372e60b77c07e81a41a36f7d4f1b5?s=128&d=identicon&r=PG", "display_name": "Nossidge", "link": "https://stackoverflow.com/users/139299/nossidge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 1, "accepted_answer_id": 54361793, "answer_count": 1, "score": 5, "last_activity_date": 1548406206, "creation_date": 1527608907, "question_id": 50588336, "link": "https://stackoverflow.com/questions/50588336/currying-out-of-order-in-ruby", "title": "Currying out of order in Ruby", "body": "<p>In Ruby, is there a way to curry function arguments out of the order in which \nthey were originally declared?</p>\n\n<p>Here's a really simple example to demonstrate what I mean:</p>\n\n<pre><code># Example data, an array of arrays\nlist = [\n  [11, 12, 13, 14],\n  [21, 22, 23, 24],\n  [31, 32, 33, 34],\n  [41, 42, 43, 44]\n]\n\n# Declare a simple lambda\nat = -&gt;(arr, i) { arr[i] }\n</code></pre>\n\n<p>To return the first element of the first array, the second element of the\nsecond array, etc. you can just use <code>#with_index</code>:</p>\n\n<pre><code># Supply the lambda with each array, and then each index\np list.map.with_index(&amp;at)\n\n# =&gt; [11, 22, 33, 44]\n</code></pre>\n\n<p>But this use case is somewhat contrived. A more realistic use for this <code>&amp;at</code>\nlambda would be to return, for example, the second element in each of the arrays.</p>\n\n<p>It seems I would have to redeclare the lambda with swapped arguments, because\nthe argument I want to curry is not in the first position:</p>\n\n<pre><code># The same lambda, but with swapped argument positions\nat = -&gt;(i, arr) { arr[i] }\n\n# Supply the lambda with the integer 1, and then each array\np list.map(&amp;at.curry[1])\n\n# =&gt; [12, 22, 32, 42]\n</code></pre>\n\n<p>Or by creating a proxy interface like the below:</p>\n\n<pre><code>at_swap = -&gt;(i, arr) { at.call(arr, i) }\n</code></pre>\n\n<p>Is this correct? Is there no way to curry out of order? I feel like this\nwould be useful to enable us to better reuse procs and methods, but perhaps\nI've overlooked something.</p>\n\n<hr>\n\n<p>There are some similar questions on this site, but none have concrete answers or workarounds.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13233875/ruby-reverse-currying-is-this-possible\">Ruby Reverse Currying: Is this possible?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/34079551/ruby-rcurry-how-i-can-implement-proc-right-currying\">Ruby rcurry. How I can implement proc \u201cright\u201d currying?\n</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/34869659/currying-a-proc-with-keyword-arguments\">Currying a proc with keyword arguments\n</a></p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "automated-tests", "capybara"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1527604057, "post_id": 50585587, "comment_id": 88182903, "body": "Does <code>export LC_ALL=en_US.UTF-8</code> and maybe <code>export LANG=en_US.UTF-8</code> on remote help?"}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1527607800, "post_id": 50585587, "comment_id": 88185311, "body": "Is the site using a font that isn&#39;t available on the remote machine?"}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 9864348, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UQw3vVdSHFk/AAAAAAAAAAI/AAAAAAAAAeo/bF8mFvMmKyw/photo.jpg?sz=128", "display_name": "Batuhan Kilic", "link": "https://stackoverflow.com/users/9864348/batuhan-kilic"}, "is_accepted": false, "score": 0, "last_activity_date": 1527609245, "creation_date": 1527609245, "answer_id": 50588424, "question_id": 50585587, "link": "https://stackoverflow.com/questions/50585587/character-encoding-issuebroken-characters-while-getting-screenshots-on-test-au/50588424#50588424", "title": "Character encoding issue(broken characters) while getting screenshots on test automation", "body": "<p>installing liberation fonts to docker image fixed the problem</p>\n\n<pre><code>yum -y install liberation-*\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 3417395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55649b04ea13e2ab4dfd74bf93aa4333?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/3417395/joe"}, "is_accepted": false, "score": 0, "last_activity_date": 1593998454, "last_edit_date": 1593998454, "creation_date": 1528186691, "answer_id": 50695372, "question_id": 50585587, "link": "https://stackoverflow.com/questions/50585587/character-encoding-issuebroken-characters-while-getting-screenshots-on-test-au/50695372#50695372", "title": "Character encoding issue(broken characters) while getting screenshots on test automation", "body": "<p>Install fonts on your docker image. This works for me!</p>\n<pre><code>yum groupinstall -y Fonts\n</code></pre>\n"}], "owner": {"reputation": 66, "user_id": 9864348, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UQw3vVdSHFk/AAAAAAAAAAI/AAAAAAAAAeo/bF8mFvMmKyw/photo.jpg?sz=128", "display_name": "Batuhan Kilic", "link": "https://stackoverflow.com/users/9864348/batuhan-kilic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 419, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1593998454, "creation_date": 1527600386, "last_edit_date": 1527603963, "question_id": 50585587, "link": "https://stackoverflow.com/questions/50585587/character-encoding-issuebroken-characters-while-getting-screenshots-on-test-au", "title": "Character encoding issue(broken characters) while getting screenshots on test automation", "body": "<p>We have an automation project which is developed with selenium webdriver and ruby(capybara).\nWe collect screenshots when test case fails. Screenshots are totally fine when we run cases on our local machines. But when we run them on remote machine, we are facing with an character encoding problem on the screenshots. \nDo you have any idea to fix this problem?</p>\n\n<p>Sample screenshot:</p>\n\n<p><img src=\"https://i.stack.imgur.com/vn7JN.png\" alt=\"screenshot\"></p>\n\n<p>Chromedriver version: <code>2.38.552522</code></p>\n\n<p>Chrome version: <code>Google Chrome 66.0.3359.139</code></p>\n\n<p>Remote machine: </p>\n\n<pre><code>NAME=\"CentOS Linux\"\nVERSION=\"7 (Core)\"\nID=\"centos\"\nID_LIKE=\"rhel fedora\"\nVERSION_ID=\"7\"\nPRETTY_NAME=\"CentOS Linux 7 (Core)\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:centos:centos:7\"\nHOME_URL=\"https://www.centos.org/\"\nBUG_REPORT_URL=\"https://bugs.centos.org/\"\n\nCENTOS_MANTISBT_PROJECT=\"CentOS-7\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\nREDHAT_SUPPORT_PRODUCT=\"centos\"\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\n</code></pre>\n\n<p>Driver configuration:</p>\n\n<pre><code>Capybara.default_driver = :headless_chrome\n  Capybara.javascript_driver = :headless_chrome   \n  Capybara.register_driver :chrome do |app|\n    Capybara::Selenium::Driver.new(app, browser: :chrome)\n  end    \n  Capybara.register_driver :headless_chrome do |app|\n    options = Selenium::WebDriver::Chrome::Options.new\n    options.add_argument 'headless'\n    options.add_argument 'disable-gpu'\n    options.add_argument 'disable-popup-blocking'\n    options.add_argument 'no-sandbox'\n    Capybara::Selenium::Driver.new app, browser: :chrome, options: options\n  end\n</code></pre>\n\n<p>Collect screenshot:</p>\n\n<pre><code>page.save_screenshot('testResults/report_smoke_mobile/screenshot_'+scenario.name+'.png')\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-maps", "ruby-on-rails-3", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9783543, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214091178226239/picture?type=large", "display_name": "Benjamin Richard", "link": "https://stackoverflow.com/users/9783543/benjamin-richard"}, "edited": false, "score": 0, "creation_date": 1527611351, "post_id": 50587331, "comment_id": 88187288, "body": "I put the fields like the documentation : &#39;        &lt;!-- All fields are hidden because the javascript will set their value automatically --&gt;         &lt;% for attr in JT::Rails::Address.fields %&gt;           &lt;%= f.hidden_field &quot;address_#{attr}&quot;, class: &quot;jt-address-field-#{attr}&quot; %&gt;         &lt;% end %&gt;&#39; and I restart the server but it put a new error message : undefined method `address_formatted_address&#39; for #&lt;User:0x00007fbad57c03e8&gt; Did you mean?  address_before_last_save"}, {"owner": {"reputation": 357, "user_id": 1644355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cUHei.png?s=128&g=1", "display_name": "Przemek Mroczek", "link": "https://stackoverflow.com/users/1644355/przemek-mroczek"}, "reply_to_user": {"reputation": 9, "user_id": 9783543, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214091178226239/picture?type=large", "display_name": "Benjamin Richard", "link": "https://stackoverflow.com/users/9783543/benjamin-richard"}, "edited": false, "score": 0, "creation_date": 1527613101, "post_id": 50587331, "comment_id": 88188182, "body": "<a href=\"https://github.com/jonathantribouharet/jt-rails-address/issues/5\" rel=\"nofollow noreferrer\">github.com/jonathantribouharet/jt-rails-address/issues/5</a> There is a problem with migration in this gem"}, {"owner": {"reputation": 9, "user_id": 9783543, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214091178226239/picture?type=large", "display_name": "Benjamin Richard", "link": "https://stackoverflow.com/users/9783543/benjamin-richard"}, "edited": false, "score": 0, "creation_date": 1527617786, "post_id": 50587331, "comment_id": 88190442, "body": "Thanks, it works, no more error, but a bug : I can&#39;t write the address : See on my post up"}, {"owner": {"reputation": 357, "user_id": 1644355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cUHei.png?s=128&g=1", "display_name": "Przemek Mroczek", "link": "https://stackoverflow.com/users/1644355/przemek-mroczek"}, "reply_to_user": {"reputation": 9, "user_id": 9783543, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214091178226239/picture?type=large", "display_name": "Benjamin Richard", "link": "https://stackoverflow.com/users/9783543/benjamin-richard"}, "edited": false, "score": 0, "creation_date": 1527618944, "post_id": 50587331, "comment_id": 88191017, "body": "I would seriously reconsider dumping this gem, it below 20 stars, it\u2019s not reliable enough"}, {"owner": {"reputation": 9, "user_id": 9783543, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214091178226239/picture?type=large", "display_name": "Benjamin Richard", "link": "https://stackoverflow.com/users/9783543/benjamin-richard"}, "edited": false, "score": 0, "creation_date": 1527620277, "post_id": 50587331, "comment_id": 88191691, "body": "Do you know another gem to do that ?"}, {"owner": {"reputation": 357, "user_id": 1644355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cUHei.png?s=128&g=1", "display_name": "Przemek Mroczek", "link": "https://stackoverflow.com/users/1644355/przemek-mroczek"}, "reply_to_user": {"reputation": 9, "user_id": 9783543, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214091178226239/picture?type=large", "display_name": "Benjamin Richard", "link": "https://stackoverflow.com/users/9783543/benjamin-richard"}, "edited": false, "score": 0, "creation_date": 1527620797, "post_id": 50587331, "comment_id": 88191926, "body": "Use geocoder with some js plugin. You need to code that, sometimes there isn\u2019t gem for everything and gems can only help to some extent"}], "tags": [], "owner": {"reputation": 357, "user_id": 1644355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cUHei.png?s=128&g=1", "display_name": "Przemek Mroczek", "link": "https://stackoverflow.com/users/1644355/przemek-mroczek"}, "is_accepted": false, "score": 0, "last_activity_date": 1527605486, "creation_date": 1527605486, "answer_id": 50587331, "question_id": 50585028, "link": "https://stackoverflow.com/questions/50585028/how-to-add-address-to-users-with-google-map-and-jt-rails-address/50587331#50587331", "title": "How to add address to users with Google map and jt-rails-address?", "body": "<p>First, you should add fields like in documentation or scope them using <code>select</code>, now you have code that will create  duplicated hidden fields.</p>\n\n<p>You should check from rails console that method address is available on <code>User</code> instance of model.` Maybe you forgot to run migration or didn't restart server after installing this gem as this is js gem and will need restart.</p>\n\n<p>Hope this answers your questions. Add comment to this answer if problem is still there.</p>\n"}], "owner": {"reputation": 9, "user_id": 9783543, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214091178226239/picture?type=large", "display_name": "Benjamin Richard", "link": "https://stackoverflow.com/users/9783543/benjamin-richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527617704, "creation_date": 1527598672, "last_edit_date": 1527617704, "question_id": 50585028, "link": "https://stackoverflow.com/questions/50585028/how-to-add-address-to-users-with-google-map-and-jt-rails-address", "title": "How to add address to users with Google map and jt-rails-address?", "body": "<p>I'm new on rails. I work on a project, and I try to add physical address to my users. I want that the address can be help-complete with Google map for later exploitation. I find the <a href=\"https://github.com/jonathantribouharet/jt-rails-address\" rel=\"nofollow noreferrer\">jt-rails-address</a> wich look like perfect for my project. But I can't implement it. I need complete address (street, zip code, city &amp; country).</p>\n\n<p>add_address_to_users.rb :</p>\n\n<pre><code>class AddAddressToUsers &lt; ActiveRecord::Migration[5.1]\n def change\n  add_column :users, :address, :address\n end\nend\n</code></pre>\n\n<p>form edit.html.erb :</p>\n\n<pre><code>&lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n  &lt;%= form_for (@user), :html =&gt; { :multipart =&gt; true } do |f| %&gt;\n  &lt;%= render 'shared/error_messages' %&gt;\n\n  &lt;%= f.label :phone, \"T\u00e9l\u00e9phone :\" %&gt;\n  &lt;%= f.phone_field :phone, class: 'form-control' %&gt;\n\n  &lt;%= f.label :address, \"Addresse :\" %&gt;\n  &lt;div class=\"jt-address-autocomplete\"&gt;\n    &lt;!-- This field is used to search the address on Google Maps --&gt;\n    &lt;%= f.text_field :address, class: 'jt-address-search' %&gt;\n\n    &lt;!-- All fields are hidden because the javascript will set their value automatically --&gt;\n    &lt;% for attr in JT::Rails::Address.fields %&gt;\n    &lt;%= f.hidden_field \"address_#{street}\", class: \"jt-address-field-#{street}\" %&gt;\n    &lt;% end %&gt;\n\n    &lt;% for attr in JT::Rails::Address.fields %&gt;\n    &lt;%= f.hidden_field \"address_#{zip_code}\", class: \"jt-address-field-#{zip_code}\" %&gt;\n    &lt;% end %&gt;\n\n    &lt;% for attr in JT::Rails::Address.fields %&gt;\n    &lt;%= f.hidden_field \"address_#{city}\", class: \"jt-address-field-#{city}\" %&gt;\n    &lt;% end %&gt;\n\n\n    &lt;% for attr in JT::Rails::Address.fields %&gt;\n    &lt;%= f.hidden_field \"address_#{country}\", class: \"jt-address-field-#{country}\" %&gt;\n    &lt;% end %&gt;\n\n  &lt;/div&gt;\n\n    &lt;%= f.submit \"Enregistrer les changements\", class: \"btn btn-primary\" %&gt;\n   &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>application.js :</p>\n\n<pre><code>// This function is call when Google Maps is loaded\nwindow.googleMapInitialize = function(){\n\n// Simple usage\n$('.jt-address-autocomplete').jt_address();\n\n };\n</code></pre>\n\n<p>I have already put :address in my user_params in the users controller and   has_address :address in the user model\nI also have put my Google Api.</p>\n\n<p>My actual error : </p>\n\n<blockquote>\n  <p>undefined local variable or method `street' for #&lt;#:0x00007fe91dfaefc0></p>\n</blockquote>\n\n<p>Thanks in advance for your help.</p>\n\n<blockquote>\n  <p>No more error but a bug, maybe because of Google Map, I don't know how\n  to resolve it, I can't write the adress and there is an error message :</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/N6WJP.png\" rel=\"nofollow noreferrer\">problem</a></p>\n\n<p>Here the code of the inspector :\n    http://maps.gstatic.com/mapfiles/api-3/images/icon_error.png);\"></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527598138, "post_id": 50584783, "comment_id": 88178836, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. &quot;I get an error&quot; is not sufficient information for us to diagnose the problem. What code produces the error? What exactly does the error say?"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1527598218, "post_id": 50584783, "comment_id": 88178881, "body": "where do you define the constant?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7454000"}, "edited": false, "score": 0, "creation_date": 1527598429, "post_id": 50584783, "comment_id": 88179015, "body": "I&#39;m declaring the constant directly after the before filters in the controller, here is the error when trying to access one of the views <code>uninitialized constant SubscriptionsController::ACTIONS_TO_SKIP</code>"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 2, "creation_date": 1527599185, "post_id": 50584783, "comment_id": 88179499, "body": "ok, then define constant before its used :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7454000"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1527603462, "post_id": 50584783, "comment_id": 88182494, "body": "@apneadiving good call, don&#39;t I feel silly"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1527603870, "post_id": 50584783, "comment_id": 88182775, "body": "this is how we all learn you know..."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7454000"}, "edited": false, "score": 0, "creation_date": 1527602261, "post_id": 50585214, "comment_id": 88181636, "body": "I think this will do, just unless: instead of if: , I want to NOT do the before filter if action_to_skip? is true, I&#39;m gonna give it a go"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7454000"}, "edited": false, "score": 0, "creation_date": 1527603882, "post_id": 50585214, "comment_id": 88182779, "body": "Tried this but it execute the before filter anyway"}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1527610873, "post_id": 50585214, "comment_id": 88187033, "body": "<a href=\"https://apidock.com/rails/v4.0.2/AbstractController/Callbacks/ClassMethods/before_action\" rel=\"nofollow noreferrer\">apidock.com/rails/v4.0.2/AbstractController/Callbacks/&hellip;</a> I tried before publishing the answer. It must work. Can you provide part of your code?"}], "tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 0, "last_activity_date": 1527599554, "last_edit_date": 1527599554, "creation_date": 1527599253, "answer_id": 50585214, "question_id": 50584783, "link": "https://stackoverflow.com/questions/50584783/pass-constant-to-rails-before-filter-exceptions/50585214#50585214", "title": "Pass constant to rails before filter exceptions", "body": "<p>You can try something like this:</p>\n\n<pre><code>before_filter :my_before_filter, if: :action_to_skip?\n\ndef action_to_skip?\n  %w[some_action another_action yet_another_action].member?(action_name)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 1, "last_activity_date": 1527602401, "creation_date": 1527602401, "answer_id": 50586278, "question_id": 50584783, "link": "https://stackoverflow.com/questions/50584783/pass-constant-to-rails-before-filter-exceptions/50586278#50586278", "title": "Pass constant to rails before filter exceptions", "body": "<p>You will need to declare the constant BEFORE the call to skip. The file is interpreted top down.</p>\n\n<pre><code>class FoosController\n  ACTIONS_TO_SKIP = [:yes, :this, :and, :something, :more]\n\n  before_filter :setup_plan, except: ACTIONS_TO_SKIP\nend\n</code></pre>\n\n<p>Note that in recent Rails versions this is now called <code>before_action</code>:\n<a href=\"https://stackoverflow.com/questions/16519828/rails-4-before-filter-vs-before-action\">Rails 4: before_filter vs. before_action</a>\n(perhaps you want to upgrade...)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7454000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 50586278, "answer_count": 2, "score": 0, "last_activity_date": 1527602401, "creation_date": 1527597967, "last_edit_date": 1527598228, "question_id": 50584783, "link": "https://stackoverflow.com/questions/50584783/pass-constant-to-rails-before-filter-exceptions", "title": "Pass constant to rails before filter exceptions", "body": "<p>I've got several before filters similar to:\n<code>before_filter :setup_plan, except: :some_action, :another_action, :yet_another_action</code></p>\n\n<p>But I have a 3 or 4 exceptions to many before filters. At first I was going to change the logic in all of my before_filter methods, but I found myself repeating a lot of code. In a more perfect world I would have a seperate controller for the actions I want to add, but I've got to add the actions in the same controller, and work around the structure that's already in place.</p>\n\n<p>What I want to do is create a constant or variable with the methods I want to skip in my before filters, such as</p>\n\n<pre><code>ACTIONS_TO_SKIP = [:some_action, :another_action, :yet_another_action]\n</code></pre>\n\n<p>And then simply use <code>before_filter :setup_plan, except: ACTIONS_TO_SKIP</code></p>\n\n<p>I get an uninitialized constant error when doing this.  I tried moving this to a method in a helper and also got an undefined method error. \nI know I'm missing something, but can't figure it out.  Is there really no way to pass an method or constant that returns an array of methods I want to skip in my before filters? Just trying to make my controller a little bit cleaner and less verbose.</p>\n"}, {"tags": ["ios", "ruby", "cocoapods", "post-install"], "owner": {"reputation": 11, "user_id": 9864229, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Martin Eberl", "link": "https://stackoverflow.com/users/9864229/martin-eberl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527596723, "creation_date": 1527596538, "last_edit_date": 1527596723, "question_id": 50584315, "link": "https://stackoverflow.com/questions/50584315/get-app-targets-or-appname-on-cocoapod-post-install", "title": "Get App-Target(s) or Appname on CocoaPod post_install", "body": "<p>Is there any way to access the apps target names (and NOT the pods target name) within the post_install cocoa-pods script?</p>\n\n<pre><code>platform :ios, '9.0'\n\ntarget 'MyProject' do\n  pod '...'\nend\n\npost_install do |installer|\n  # i need my application target 'MyProject' here\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "is_accepted": true, "score": 0, "last_activity_date": 1527624128, "creation_date": 1527624128, "answer_id": 50592102, "question_id": 50584131, "link": "https://stackoverflow.com/questions/50584131/maintain-indexes-directly-in-mongodb-and-avoid-the-rails-app-overwriting-them/50592102#50592102", "title": "Maintain indexes directly in MongoDB and avoid the Rails app overwriting them", "body": "<p>First of all, don't run <code>remove_indexes</code>. I haven't done that a single time in the 9 years I'm using mongodb and mongoid.</p>\n\n<p>The indexes that you write into your model are only used for the <code>create_index</code> rake task and nowhere else (I could think of) and my own workflow is to create a new index through the mongo console, usually to figure out the best index variant (things like order of the components do matter after all) before adding it in the model for future reference. Read up on the <a href=\"https://docs.mongodb.com/manual/reference/method/db.collection.createIndex/\" rel=\"nofollow noreferrer\">mongodb docs about createIndex</a>.</p>\n"}], "owner": {"reputation": 34, "user_id": 2226653, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78cf12ddf9d6ac72738374643c135e14?s=128&d=identicon&r=PG", "display_name": "JohnSmith1976", "link": "https://stackoverflow.com/users/2226653/johnsmith1976"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 50592102, "answer_count": 1, "score": 1, "last_activity_date": 1527624128, "creation_date": 1527595979, "question_id": 50584131, "link": "https://stackoverflow.com/questions/50584131/maintain-indexes-directly-in-mongodb-and-avoid-the-rails-app-overwriting-them", "title": "Maintain indexes directly in MongoDB and avoid the Rails app overwriting them", "body": "<p>We have two Rails 5 apps that shares a clustered MongoDB, hosted on <a href=\"https://mlab.com\" rel=\"nofollow noreferrer\">mlab.com</a>.</p>\n\n<p>We define our fields/indexes through the models. The apps don't know about each others fields/indexes, and it needs to stay that way:</p>\n\n<pre><code># app 1\nclass Order\n  include Mongoid::Document\n  field :order_number,            type: String\n  belongs_to :status,             inverse_of: :orders\n  index({ order_number: 1 },      { background: true })\n  index({ status_id: 1 },         { background: true })\nend\n\n# app 2\nclass Order\n  include Mongoid::Document\n  field :order_number,            type: String\n  field :internal_comment,        type: String\n  index({ order_number: 1 },      { background: true })\n  index({ internal_comment: 1 },  { background: true })\nend\n</code></pre>\n\n<p>With only one app, we would simply maintain indexing with:</p>\n\n<pre><code>bundle exec rake db:mongoid:remove_indexes\nbundle exec rake db:mongoid:create_indexes\n</code></pre>\n\n<p>But this would make each app cancel out each others indexing.</p>\n\n<p><strong>Is it possible to create/remove indexes directly in MongoDB, and avoid the Rails apps overwriting it?</strong></p>\n\n<hr>\n\n<p>To better understand the situation, consider the following series of events.</p>\n\n<p>First, app 1 inserts new orders:</p>\n\n<pre><code># app 1\nOrder.collection.insert_many(\n  [\n    {_id:             BSON::ObjectId('5b04208483c336a17ada564c'),\n      order_number:   \"1\",\n      status_id:      BSON::ObjectId('59db682c17be4a0005eb246a')\n    },\n    ...\n  ]\n)\n</code></pre>\n\n<p>Here we are facing problems with the indexing of <code>internal_comment</code>, because the index is not registered with both apps. </p>\n\n<p>Next, app 2 queries for orders that has a <code>internal_comment</code>. It will be slow if indexing don't work properly:</p>\n\n<pre><code># app 2\nOrder.collection.find(\n  {\n    internal_comment: { \"$ne\": nil }\n  }\n).to_a\n</code></pre>\n\n<p>Finally, app 2 updates one of the orders (that was inserted by app 1). I am not sure how that affects the indexing of the <code>status_id</code> and <code>internal_comment</code> fields.</p>\n\n<pre><code># app 2 updates the order:\nOrder.collection.update_one(\n  {\n    _id:              BSON::ObjectId('5b04208483c336a17ada564c'),\n    internal_comment: \"foo\"\n  }\n)\n</code></pre>\n"}, {"tags": ["ruby", "local-variables"], "comments": [{"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 3, "creation_date": 1527589996, "post_id": 50582150, "comment_id": 88173271, "body": "<code>a,b,c = values</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1527590393, "post_id": 50582150, "comment_id": 88173530, "body": "You wrote that you have an array of variables, but you cannot. <code>[a, b, c]</code> is not an array of variables. They are actually some values that are referred to by the respective variables."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1527591326, "post_id": 50582150, "comment_id": 88174159, "body": "<i>&quot;Initially i have ... Now, I have ...&quot;</i> \u2013 I don&#39;t follow. What is it that you have and what is it that you want? i.e. what&#39;s your actual input and your expected result?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1527591897, "post_id": 50582150, "comment_id": 88174587, "body": "Thanks for the clarification. One more thing: why do you call <code>a,b,c = [10,20,30]</code> an &quot;array of variables&quot;? <code>[10,20,30]</code> is an array, but an array of <i>numbers</i>. <code>a, b, c = ...</code> on the other hand is an <i>assignment</i>. Could you elaborate, please?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1527592029, "post_id": 50582150, "comment_id": 88174674, "body": "And regarding <i>&quot;... any way to assign values to variables without iterating&quot;</i> \u2013 how would you solve it <b>with</b> iterating? An attempted solution could shed some light on the problem."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527599756, "post_id": 50582150, "comment_id": 88179870, "body": "<code>d = (a,b,c = [1,2,3])</code> should do this for you although I am not sure why you would need to do this when <code>d == [1,2,3]</code> but the opposite would also work <code>a,b,c = d = [1,2,3]</code>"}, {"owner": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "edited": false, "score": 0, "creation_date": 1527663668, "post_id": 50582150, "comment_id": 88205575, "body": "Without knowing the actual problem, I have a suspicion that replacing the <code>Array</code> with a <code>Hash</code> is probably the answer."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1527591266, "post_id": 50582202, "comment_id": 88174116, "body": "What happened with <code>d</code>?"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1527591701, "post_id": 50582202, "comment_id": 88174449, "body": "OP has changed the question from <a href=\"https://stackoverflow.com/revisions/35816090-c8a1-4132-ac82-ff01331bcf27/view-source\">stackoverflow.com/revisions/&hellip;</a> ."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1527593110, "post_id": 50582202, "comment_id": 88175389, "body": "I know. The OP only changed the variable name from <code>variables</code> to <code>d</code>. What happened with <code>variables</code>, then?"}], "tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": false, "score": 5, "last_activity_date": 1527592240, "last_edit_date": 1527592240, "creation_date": 1527590079, "answer_id": 50582202, "question_id": 50582150, "link": "https://stackoverflow.com/questions/50582150/assign-array-of-values-to-array-of-variables/50582202#50582202", "title": "Assign array of values to array of variables", "body": "<p>Use </p>\n\n<pre><code>a,b,c = values\na #=&gt; 1\nb #=&gt; 2\nc #=&gt; 3\n</code></pre>\n\n<p>For the updated portion:\nHaving <code>d = [a,b,c]</code> and thinking of assigning <code>d = values</code> and expecting a,b,c to change wouldn't work, because <code>d = [a,b,c]</code> is an assignment, <code>d</code> is set as <code>[10,20,30]</code>.</p>\n\n<p>Probably, something like this may help in understanding how you can achieve this:</p>\n\n<p>a, b, c = [10, 20, 30]</p>\n\n<pre><code>values = [1,2,3]\nd = -&gt; (x) { a, b, c = x }\na #=&gt; 10\nb #=&gt; 20\nc #=&gt; 30\nd.call values\na #=&gt; 1\nb #=&gt; 2\nc #=&gt; 3\n</code></pre>\n\n<p><code>d</code> in above case is a <code>lambda</code>, they are named block which can be invoked later. They bind with the variables in current scope, so they can change them when invoked (by <code>d.call</code>)</p>\n"}], "owner": {"reputation": 37, "user_id": 9730679, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YURL3Q3qxio/AAAAAAAAAAI/AAAAAAAAABI/Q6ZfAhvXrVw/photo.jpg?sz=128", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/9730679/naveen-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527592240, "creation_date": 1527589913, "last_edit_date": 1527591546, "question_id": 50582150, "link": "https://stackoverflow.com/questions/50582150/assign-array-of-values-to-array-of-variables", "title": "Assign array of values to array of variables", "body": "<p>I have array of variables like </p>\n\n<p><code>a,b,c = [10,20,30]</code></p>\n\n<p>and</p>\n\n<p><code>values = [1, 2, 3]</code></p>\n\n<p>and assinged variables a,b,c to d like below</p>\n\n<p><code>d = [a,b,c]</code></p>\n\n<p>Is there any way to assign values to variables without iterating, like \n<code>d = values</code> so that I get the following?</p>\n\n<p>a = 1, b = 2, c = 3</p>\n"}, {"tags": ["ruby", "activerecord"], "comments": [{"owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 0, "creation_date": 1527600568, "post_id": 50581839, "comment_id": 88180504, "body": "Your question is unclear. Please show us the relevant parts of your model definitions."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1527617957, "post_id": 50584820, "comment_id": 88190515, "body": "I would not recommend the <code>map</code> call here <code>materials_with_abs.map{|m| m.id }</code> this can be handled without the need to iterate using <code>select</code> which will create a sub-query rather than a potentially enormous list. e.g. <code>@place.materials.where.not(id: materials_with_abc.select(:id))</code>. This avoids your fetch first concern"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527666115, "post_id": 50584820, "comment_id": 88207112, "body": "OMG that is an awesome suggestion! Thanks!!"}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 2, "last_activity_date": 1527666109, "last_edit_date": 1527666109, "creation_date": 1527598057, "answer_id": 50584820, "question_id": 50581839, "link": "https://stackoverflow.com/questions/50581839/activerecord-find-parent-based-on-non-existent-child/50584820#50584820", "title": "ActiveRecord find parent based on non-existent child", "body": "<p>From the other answers/comments I deduce you do not only want to find the materials linked to an attribute that is not called 'abc' but also exclude the materials that have a link to attribute <code>abc</code>.</p>\n\n<p>First find all materials having an attribute abc </p>\n\n<pre><code>materials_with_abc = @place.materials.joins(:attribute_types)\n                                     .where(attribute_types: {name: 'abc'})\n</code></pre>\n\n<p>Then find all materials not linked to abc is then pretty easy </p>\n\n<pre><code>@place.materials.where.not(id: materials_with_abs.select(:id))\n</code></pre>\n\n<p>(I wrote it with map first, which is sub-optimal to say the least, but thanks to the tip from @enigineersmnky this generates a single query and is executed completely in the database and very efficient. No need to hand-code sql either!)</p>\n"}], "owner": {"reputation": 422, "user_id": 723236, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/xOBxR.png?s=128&g=1", "display_name": "IBG", "link": "https://stackoverflow.com/users/723236/ibg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 50584820, "answer_count": 1, "score": 0, "last_activity_date": 1527666109, "creation_date": 1527589000, "last_edit_date": 1527593655, "question_id": 50581839, "link": "https://stackoverflow.com/questions/50581839/activerecord-find-parent-based-on-non-existent-child", "title": "ActiveRecord find parent based on non-existent child", "body": "<p>Suppose there is Material with has_many relationship with AttributeType. I can find the Parent of Children which name is equal to \"abc\". I want to find the Parent which does not contain a Child whose name is equal to \"abc\". I've already tried something like this:</p>\n\n<pre><code>attribute_types = @place.materials.collect(&amp;:attribute_types).flatten.select{|at| at.name != \"abc\"}.flatten\n</code></pre>\n\n<p>but since it only does not pick up the child with the name \"abc\", it still gets the siblings. So when I use:</p>\n\n<pre><code>materials = @place.materials.where(id: attribute_types.map(&amp;:material)).uniq\n</code></pre>\n\n<p>It still gets the record that I don't need.</p>\n\n<p>What I'm looking for is when a several materials has attribute_types 'abc', 'def' and 'ghi', I want to look for the material that doesn't have 'abc'. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "parameters", "simple-form"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1527590410, "post_id": 50581716, "comment_id": 88173543, "body": "<code>simple_form_for(resource, as: resource_name, url: password_path(resource_name, email: params[:email]), html: {...</code>"}, {"owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1527591354, "post_id": 50581716, "comment_id": 88174181, "body": "@Vasilisa this doesn&#39;t seem to change anything: I still have the param available on the form page but not after submit."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1527591740, "post_id": 50581716, "comment_id": 88174473, "body": "Did you remove name and value from button?"}, {"owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1527591951, "post_id": 50581716, "comment_id": 88174629, "body": "@Vasilisa I didn&#39;t before (wasn&#39;t really clear from your comment) but tried it now - no change."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1527592265, "post_id": 50581716, "comment_id": 88174812, "body": "Sorry, just noticed - you already have input for email. Why do you want to pass it one more time? And what do you have now in params after submitting form?"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1527592913, "post_id": 50581716, "comment_id": 88175250, "body": "just add a hidden field to your form, you can retrieve this param from the form params in the controller."}, {"owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1527593174, "post_id": 50581716, "comment_id": 88175448, "body": "@Vasilisa I don&#39;t want to pass it one more time, I&#39;d just like to keep it in params after redirection. Right now after submit my params are <code>{&quot;controller&quot;=&gt;&quot;devise&#47;sessions&quot;, &quot;action&quot;=&gt;&quot;new&quot;}</code>"}, {"owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1527593230, "post_id": 50581716, "comment_id": 88175494, "body": "@Maxence I tried with a hidden field but that also doesn&#39;t let me pass the param to the page after redirection on submit."}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1527593650, "post_id": 50581716, "comment_id": 88175795, "body": "Well this is the purpose of instance variable to pass data from controller to the view...?"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1527596612, "post_id": 50581716, "comment_id": 88177787, "body": "<code>{&quot;controller&quot;=&gt;&quot;devise&#47;sessions&quot;, &quot;action&quot;=&gt;&quot;new&quot;}</code> isn&#39;t equal <code>password_path(resource_name)</code>, I suppose. It should be devise/passwords, action create. Something goes totally wrong. Do you have any authorization restrictions?"}, {"owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "edited": false, "score": 1, "creation_date": 1527596854, "post_id": 50581716, "comment_id": 88177946, "body": "You are in <code>devise&#47;sessions&#47;new</code> when you click &quot;Forgot password&quot; and get taken to <code>devise&#47;passwords&#47;new</code>, and the original idea was to redirect back to login after an email is submitted (so you&#39;d be back at <code>sessions&#47;new</code>), with the email already filled in from params."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1527598416, "post_id": 50581716, "comment_id": 88179010, "body": "Your form goes to devise/passwords/create, which redirects you to devise/session/new. So you need to change Devise::PasswordsController, not the form"}], "answers": [{"comments": [{"owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "edited": false, "score": 0, "creation_date": 1527596169, "post_id": 50583783, "comment_id": 88177452, "body": "I&#39;m using devise passwords_controller and the <code>after_sending_reset_password_instructions_path_for</code> method. I&#39;d like to redirect to a static page saying something like &quot;Password reset instructions were sent to #{params[:email]}&quot;. I tried with <code>def after_sending_reset_password_instructions_path_for(resource_&zwnj;&#8203;name)     password_reset_path(email: params[:email])   end</code> but  that also doesn&#39;t seem to pass the param."}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "reply_to_user": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "edited": false, "score": 0, "creation_date": 1527597980, "post_id": 50583783, "comment_id": 88178723, "body": "Devise? @Maxence already given the correct answer how to do that for Devise."}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "reply_to_user": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "edited": false, "score": 1, "creation_date": 1527598242, "post_id": 50583783, "comment_id": 88178893, "body": "Also if you want not display email in URL, you can save email in the user session and then put that into view as variable @email = session[&#39;email&#39;]"}], "tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 0, "last_activity_date": 1527594944, "creation_date": 1527594944, "answer_id": 50583783, "question_id": 50581716, "link": "https://stackoverflow.com/questions/50581716/rails-simple-form-passing-params-on-submit/50583783#50583783", "title": "Rails simple_form: passing params on submit", "body": "<p>You describe in comments the situation when some params were passed to the controller and then happens some redirect. So, redirect do fire some new action that doesn't know what parameters was passed to prev action.</p>\n\n<p>You must pass that parameters handly. For example</p>\n\n<pre><code>redirect_to resource_path(resource, email: params[:email])\n</code></pre>\n\n<p>But, if you want to show the same view as before use render instead redirect.</p>\n"}, {"comments": [{"owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "edited": false, "score": 0, "creation_date": 1527597811, "post_id": 50584464, "comment_id": 88178624, "body": "Thanks! This does exactly what I needed."}], "tags": [], "owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "is_accepted": true, "score": 1, "last_activity_date": 1527596973, "creation_date": 1527596973, "answer_id": 50584464, "question_id": 50581716, "link": "https://stackoverflow.com/questions/50581716/rails-simple-form-passing-params-on-submit/50584464#50584464", "title": "Rails simple_form: passing params on submit", "body": "<p>Just declare your after password reset path so that you can pass a param : </p>\n\n<pre><code>def after_sending_reset_password_instructions_path_for(resource_name) \n  my_path(email: resource.email)\nend\n</code></pre>\n\n<p>This should work if your route to your successful password reset page is a <code>collection</code> path. If it is a <code>member</code> path, then just add resource like : </p>\n\n<pre><code> def after_sending_reset_password_instructions_path_for(resource_name) \n   my_path(resource, email: resource.email)\n end\n</code></pre>\n\n<p>But I dont recommend using a <code>member</code> because it could leak data.</p>\n"}], "owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1489, "favorite_count": 0, "accepted_answer_id": 50584464, "answer_count": 2, "score": 0, "last_activity_date": 1527596973, "creation_date": 1527588604, "question_id": 50581716, "link": "https://stackoverflow.com/questions/50581716/rails-simple-form-passing-params-on-submit", "title": "Rails simple_form: passing params on submit", "body": "<p>I'd like to pass custom params when user submits a form. I found this <a href=\"https://stackoverflow.com/questions/17916316/is-there-a-way-to-pass-params-when-clicking-submit-button-in-simple-form-view-in?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">question</a> but I still didn't get it to work. </p>\n\n<p>These are my params on the form page: <code>{\"email\"=&gt;\"user@example.com\", \"controller\"=&gt;\"devise/passwords\", \"action\"=&gt;\"new\"}</code></p>\n\n<p>Here's my form :</p>\n\n<pre><code>%h2 Forgot your password?\n= simple_form_for(resource, as: resource_name, url: password_path(resource_name), html: { method: :post }) do |f|   =\nf.error_notification   \n.form-inputs\n  = f.input :email, required: true, autofocus: true, input_html: { value: params[:email] }   \n.form-actions\n  = f.button :button, 'Submit', type: 'submit', name: 'email', value: params[:email]\n</code></pre>\n\n<p>Was this behaviour depreciated at some point or am I doing something wrong?\nI'm using ruby 2.5.1 and rails 5.2.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "instance-method"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1527588285, "post_id": 50581559, "comment_id": 88172219, "body": "Try using if statement this way: <code>does something if performed?</code>"}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 0, "creation_date": 1527594538, "post_id": 50581559, "comment_id": 88176394, "body": "By convention, Ruby/Rails methods ending in <code>?</code> shouldn&#39;t ever appear on their own like this. The <code>?</code> indicates it&#39;s a query function that doesn&#39;t alter any state, in which case putting it on its own line serves no purpose."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "reply_to_user": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 0, "creation_date": 1527594694, "post_id": 50581559, "comment_id": 88176486, "body": "@mahemoff for completeness: it doesn&#39;t alter any state, <i>and returns a boolean</i> (true or false)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9673474"}, "edited": false, "score": 0, "creation_date": 1527592399, "post_id": 50581834, "comment_id": 88174908, "body": "Thank you for your general explanation. It certainly helps, but in reference to my original question: is this also possible in an if else statement?"}, {"owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "edited": false, "score": 0, "creation_date": 1527593436, "post_id": 50581834, "comment_id": 88175665, "body": "@KellyHuliselan Yes, it is meant to be used in a condition."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9673474"}, "edited": false, "score": 0, "creation_date": 1527595225, "post_id": 50581834, "comment_id": 88176798, "body": "Thank you for taking to time to answer my question!"}], "tags": [], "owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "is_accepted": false, "score": 1, "last_activity_date": 1527588992, "creation_date": 1527588992, "answer_id": 50581834, "question_id": 50581559, "link": "https://stackoverflow.com/questions/50581559/how-to-use-rails-instance-public-method-performed-in-if-else/50581834#50581834", "title": "How to use Rails instance public method performed? in if-else", "body": "<p>It's meant for your controller action (A) to be able to call other controller methods (M), and then render or redirect in (A) only if none of (M) have performed a render/redirect.</p>\n\n<p>Read the source code, it's pretty simple and explicit: <a href=\"https://apidock.com/rails/ActionController/Metal/performed%3F\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActionController/Metal/performed%3F</a></p>\n\n<p>For example:</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController                                                                                                                                                                                  \n  def show                                                                                                                                                                                                                        \n    check_identity                                                                                                                                                                                                                \n    render :show unless performed?                                                                                                                                                                                                \n  end                                                                                                                                                                                                                             \n\n  def check_identity                                                                                                                                                                                                              \n    redirect_to root_path, notice: \"You're not allowed to be here\" unless user_signed_in?                                                                                                                                         \n  end                                                                                                                                                                                                                             \nend\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9673474"}, "edited": false, "score": 0, "creation_date": 1527594921, "post_id": 50583386, "comment_id": 88176617, "body": "Do you place the if-else statement in the same method or in the receiving (RecordsController index) method? EDIT: I get it now. Thank you for your effort!"}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1527595256, "post_id": 50583386, "comment_id": 88176823, "body": "If I understand you truly, it&#39;s not important"}], "tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 2, "last_activity_date": 1527593737, "creation_date": 1527593737, "answer_id": 50583386, "question_id": 50581559, "link": "https://stackoverflow.com/questions/50581559/how-to-use-rails-instance-public-method-performed-in-if-else/50583386#50583386", "title": "How to use Rails instance public method performed? in if-else", "body": "<p><code>performed?</code> just tests if render or redirect has already happened. That doesn't check what view was sent to the user. That check only \"you define path yourself or it must be done automatically\".</p>\n\n<p>Try something like this:</p>\n\n<pre><code>if condition\n  does something\n  redirect_to(records_path)\nend\nif performed?\n  does another thing\nelse\n  yet another thing\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 1, "last_activity_date": 1527594799, "creation_date": 1527594799, "answer_id": 50583736, "question_id": 50581559, "link": "https://stackoverflow.com/questions/50581559/how-to-use-rails-instance-public-method-performed-in-if-else/50583736#50583736", "title": "How to use Rails instance public method performed? in if-else", "body": "<p>In a controller action, when we type <code>render</code> or <code>redirect_to</code> those are not immediately executed, but they are queued and will be executed after the completion of the method. So this allows to have double renders or redirect_to in a controller action, and this will generate an error (because then rails has no idea which to execute). So that is why in rails they have added a method <code>performed?</code> which will indicate if a <code>render</code> or <code>redirect_to</code> has already been called (queued) or not. </p>\n\n<p>In most cases this is not really needed because normally your controller code is pretty simple. </p>\n\n<p>To clarify: <code>performed?</code> does not actually test the <code>redirect_to</code> has been done, it just tests a render or redirect-to was called/queued. Furthermore the <code>redirect_to</code> does not return a boolean indicating whether it was done or not. </p>\n\n<p>So your code should be like this: </p>\n\n<pre><code>if condition\n  does something\nelse \n  redirect_to(records_path)\nend \nif performed?\n  # the redirect-to was executed\n  does another thing # but not a render or redirect\nelse\n  yet another thing \n  # and could be a render or redirect \n  # if not the normal view will be rendered\nend\n</code></pre>\n\n<p>Please not that in this simple example the <code>performed?</code> is just the negative of <code>condition</code> so you could easily squash those together. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9673474"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 50583736, "answer_count": 3, "score": 1, "last_activity_date": 1527594799, "creation_date": 1527588123, "last_edit_date": 1527588289, "question_id": 50581559, "link": "https://stackoverflow.com/questions/50581559/how-to-use-rails-instance-public-method-performed-in-if-else", "title": "How to use Rails instance public method performed? in if-else", "body": "<p>How does one use the Ruby on Rails method performed? in an if else statement?</p>\n\n<p>I tried to use this StackOverflow <a href=\"https://stackoverflow.com/questions/26446375/is-it-possible-in-rails-to-check-whether-a-redirect-or-render-had-already-been-i\">anwser</a> in my example below:</p>\n\n<pre><code>if condition\n  does something\nelsif redirect_to(records_path)\n  performed?\n  does another thing\nelse\n  yet another thing\nend\n</code></pre>\n\n<p>But this only redirects without checking if it is performed. </p>\n\n<p>I want it to check if the redirect to records_path is performed and when true do something (or \"does another thing\" in my example)</p>\n\n<p>I also tried this:</p>\n\n<pre><code>elseif records_path.performed?\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>elseif redirect_to(records_path) performed?()\n</code></pre>\n\n<p>And all things in between. </p>\n\n<p>Can somebody explain how it's done and how I could've get it from the <a href=\"http://api.rubyonrails.org/classes/ActionController/Metal.html#method-i-performed-3F\" rel=\"nofollow noreferrer\">docs</a>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1527586769, "post_id": 50581097, "comment_id": 88171292, "body": "this is 2 queries :) <code>Post.where(user_id: users)</code> is 1 and would still work"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1527587592, "post_id": 50581097, "comment_id": 88171816, "body": "You can use <code>joins</code>."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 1, "last_activity_date": 1527586704, "creation_date": 1527586704, "answer_id": 50581097, "question_id": 50581048, "link": "https://stackoverflow.com/questions/50581048/get-associated-records-for-an-array-of-object/50581097#50581097", "title": "Get associated records for an array of object", "body": "<p>You can get all the posts that belong to specified users like this:</p>\n\n<pre><code># users: ActiveRecord relation containing some of users\nposts = Post.where(user_id: users.pluck(:id))\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8927599"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 50581097, "answer_count": 1, "score": 0, "last_activity_date": 1527587675, "creation_date": 1527586542, "question_id": 50581048, "link": "https://stackoverflow.com/questions/50581048/get-associated-records-for-an-array-of-object", "title": "Get associated records for an array of object", "body": "<p>How can I get associated records for an array of objects?</p>\n\n<p>Associations: </p>\n\n<p><strong>user.rb:</strong></p>\n\n<pre><code>has_many :posts\n</code></pre>\n\n<p><strong>post.rb</strong></p>\n\n<pre><code>belongs_to :user \n</code></pre>\n\n<p>Below will return an array of posts of the first user</p>\n\n<pre><code>User.first.posts\n</code></pre>\n\n<p>How can I get the associated records for an array of user?</p>\n\n<p>Is iterating through the array is the only way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "rails-activestorage"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1527586262, "post_id": 50580912, "comment_id": 88170956, "body": "Please dont post an images of code, post actual code."}, {"owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1527587101, "post_id": 50580912, "comment_id": 88171515, "body": "Sorry, I&#39;ll update my question"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527587438, "post_id": 50580912, "comment_id": 88171727, "body": "Are the images perhaps taking a long time to load because they&#39;re very big files? Nothing about your code indicates to me that ruby/rails/active storage is the source of the problem."}, {"owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "edited": false, "score": 0, "creation_date": 1527588462, "post_id": 50580912, "comment_id": 88172339, "body": "All the images are between 60-200KB, so no :)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527609599, "post_id": 50580912, "comment_id": 88186390, "body": "Have you looked at the network tab in your browser when loading the page? Do you see what the bottleneck is? Assuming it&#39;s something in your rails application, which action specifically is it? What does the rails log say?"}, {"owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527676322, "post_id": 50580912, "comment_id": 88213859, "body": "Hi again @TomLord, I added the logs in the description as the network tab. About the action, is just a index page that shows some vehicles images, scopes to filter that vehicles by manufacturer and model and the paths to edit and delete the same vehicles, nothing too complex."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527677467, "post_id": 50580912, "comment_id": 88214617, "body": "Can you find the slow request in the log? It&#39;s not easy for me to even read that, since you&#39;ve posted an image of the code (!!) and I can&#39;t use CTRL+F. Where are the requests that took 10+ seconds?"}, {"owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "edited": false, "score": 0, "creation_date": 1527678808, "post_id": 50580912, "comment_id": 88215543, "body": "I&#39;m sorry about the images, but please understand that I can&#39;t put so much code in here...it&#39;s already too long that description. About the logs, its weird because the times are normal..each request are all under 100ms, and in the most cases are like 40, 50 or 60 ms..."}], "answers": [{"tags": [], "owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "is_accepted": false, "score": 0, "last_activity_date": 1527690283, "creation_date": 1527690283, "answer_id": 50607175, "question_id": 50580912, "link": "https://stackoverflow.com/questions/50580912/rails-5-2-active-storage-too-slow/50607175#50607175", "title": "Rails 5.2 - Active Storage - Too slow?", "body": "<p>I found the problem. In my config/environments/development.rb I had this command to not restart my server every time I change something on a controller: config.reload_classes_only_on_change = false</p>\n\n<p>If I remove that line, everything works smooth (except when I change something in the controller I have to restart de server xD)</p>\n\n<p>Best regards!</p>\n"}], "owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1627, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1527690283, "creation_date": 1527586179, "last_edit_date": 1527676015, "question_id": 50580912, "link": "https://stackoverflow.com/questions/50580912/rails-5-2-active-storage-too-slow", "title": "Rails 5.2 - Active Storage - Too slow?", "body": "<p>First of all, I'm new on Rails and my English isn't that great, so please bear with me :)</p>\n\n<p>I updated my Rails for the 5.2 version and installed the active storage. I can upload images or attachments and that's working well. The problem is when I try to get the images, they take about 30sec-60sec just to appear on the screen. That's not normal, so for sure I did something wrong.</p>\n\n<p>My installation process was the follow:</p>\n\n<p>rails active_storage:install</p>\n\n<p>rails db:migrate</p>\n\n<p>'schema': </p>\n\n<pre><code>create_table \"active_storage_attachments\", force: :cascade do |t|\n  t.string \"name\", null: false\n  t.string \"record_type\", null: false\n  t.integer \"record_id\", null: false\n  t.integer \"blob_id\", null: false\n  t.datetime \"created_at\", null: false\n  t.index [\"blob_id\"], name: \"index_active_storage_attachments_on_blob_id\"\n  t.index [\"record_type\", \"record_id\", \"name\", \"blob_id\"], name: \"index_active_storage_attachments_uniqueness\", unique: true\nend\n\ncreate_table \"active_storage_blobs\", force: :cascade do |t|\n  t.string \"key\", null: false\n  t.string \"filename\", null: false\n  t.string \"content_type\"\n  t.text \"metadata\"\n  t.bigint \"byte_size\", null: false\n  t.string \"checksum\", null: false\n  t.datetime \"created_at\", null: false\n  t.index [\"key\"], name: \"index_active_storage_blobs_on_key\", unique: true\n end\n</code></pre>\n\n<p>'storage.yml':</p>\n\n<pre><code>local:\n service: Disk\n root: &lt;%= Rails.root.join(\"storage\") %&gt;\n</code></pre>\n\n<p>On 'config/environments/development.rb':</p>\n\n<pre><code>config.active_storage.service = :local\n</code></pre>\n\n<p>After that I updated my model:</p>\n\n<pre><code>class Vehicle &lt; ApplicationRecord\n belongs_to :model\n belongs_to :manufacturer\n has_and_belongs_to_many :features\n\n has_one_attached :banner_image\n has_many_attached :images\nend\n</code></pre>\n\n<p>Then updated my params in the controller:</p>\n\n<pre><code>def vehicle_params\n  params.require(:vehicle).permit(:date, :kms, :power, :cc, :version, :transmission, :fuel, :category, :seats, :doors, :color, :condition, :warranty, :manufacturer_id, :model_id, {feature_ids: []}, :banner_image, images: [])\nend\n</code></pre>\n\n<p>Follow by my form:</p>\n\n<pre><code>&lt;p&gt;\n  &lt;span&gt;Imagen de apresenta\u00e7\u00e3o: &lt;/span&gt;\n  &lt;%= f.file_field :banner_image %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;span&gt;Imagens: &lt;/span&gt;\n  &lt;%= f.file_field :images, multiple: true %&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>And at last my index:</p>\n\n<pre><code>&lt;% @vehicles.each do |vehicle| %&gt;\n  &lt;%= link_to \"Editar\", edit_vehicle_path(vehicle) %&gt; |\n  &lt;%= link_to \"X\", vehicle, method: :delete, data: {confirm: \"Tem a certeza que quer eliminar este veiculo?\"} %&gt;\n  &lt;%= link_to vehicle do %&gt;\n    &lt;% if vehicle.banner_image.attached? %&gt;\n      &lt;%= image_tag (vehicle.banner_image) %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n  &lt;%= vehicle.manufacturer.name %&gt; &lt;%= vehicle.model.name %&gt; &lt;%= vehicle.version %&gt;\n  &lt;hr /&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I also installed Mini-Magick gem (and ImageMagick as required), but I'm not using it yet.</p>\n\n<p>Versions: </p>\n\n<ul>\n<li>ImageMagick 6.8.9-9)</li>\n<li>Ruby 2.3.1p112</li>\n<li>Rails 5.2.0</li>\n</ul>\n\n<p>Network tab:\nAs you can see, it take far too long to get the images.\n<a href=\"https://i.stack.imgur.com/4cpcx.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4cpcx.jpg\" alt=\"Network\"></a></p>\n\n<p>Logs: I also include the logs, but TBH I can't understand much there, so maybe you can detect something wrong.\n<a href=\"https://i.stack.imgur.com/pJJXh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pJJXh.jpg\" alt=\"logs-part-1\"></a><a href=\"https://i.stack.imgur.com/2qEOu.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2qEOu.jpg\" alt=\"logs-part-2\"></a><a href=\"https://i.stack.imgur.com/ZprAG.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZprAG.jpg\" alt=\"logs-part-3\"></a><a href=\"https://i.stack.imgur.com/Ws8nm.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ws8nm.jpg\" alt=\"logs-part-4\"></a></p>\n\n<p>I don't know if I didn't do something or if I did something wrong, but the truth is when I load my index page my images takes really long time to show up...</p>\n\n<p>Hope someone can help me. Thank you in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1527582660, "post_id": 50579281, "comment_id": 88168619, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What is <code>myformattedstring</code>? What do you mean by <i>&quot;its corresponding values are not reflected&quot;</i>? What <i>are</i> the values, and what result <i>do</i> you get?"}, {"owner": {"reputation": 59, "user_id": 9804392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mallela SriPrakash", "link": "https://stackoverflow.com/users/9804392/mallela-sriprakash"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527613686, "post_id": 50579281, "comment_id": 88188444, "body": "I have a config table as below: S.NO\tTableName\tSourceColumns 1\t\tA\t\t\ta,b,c,d 2\t\tB\t\t\tp,q,r,s,t,u 3\t\tC\t\t\tm,n,o,p,q 4\t\tD\t\t\tx,y,z  &gt;CSV.open(&#39;C:\\Actual\\Test.csv&#39;, &#39;w&#39;) do |csv| \t&gt;result.each do |eachrow| \t\t&gt;csv &lt;&lt; [&quot;#{eachrow[&#39;a&#39;]}&quot;,&quot;#{eachrow[&#39;b&#39;]}&quot;,&quot;#{eachrow[&#39;c&#39;]}&quot;,&quot;#{ea&zwnj;&#8203;chrow[&#39;d&#39;]}&quot;] \t&gt;end &gt;end  I am constructing the string per my source columns and passing to query myformattedstring=&quot;#{eachrow[&#39;a&#39;]}&quot;,&quot;#{eachrow[&#39;b&#39;]}&quot;,&quot;#{eac&zwnj;&#8203;hrow[&#39;c&#39;]}&quot;,&quot;#{eachr&zwnj;&#8203;ow[&#39;d&#39;]}&quot;  CSV.open(&#39;C:\\Actual\\Test.csv&#39;, &#39;w&#39;) do |csv| \tresult.each do |eachrow| \t\tcsv &lt;&lt; [myformattedstring] \tend end"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527623483, "post_id": 50579281, "comment_id": 88193181, "body": "Can you please <a href=\"https://stackoverflow.com/posts/50579281/edit\">edit your post</a> to include all important information, properly formatted. That comment is extremely difficult to read."}, {"owner": {"reputation": 59, "user_id": 9804392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mallela SriPrakash", "link": "https://stackoverflow.com/users/9804392/mallela-sriprakash"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527624177, "post_id": 50579281, "comment_id": 88193483, "body": "Updated in the actual query"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527625637, "post_id": 50579281, "comment_id": 88194188, "body": "Your question is still not entirely clear, because I don&#39;t know how to <b>reproduce</b> it. When you say &quot;I have a config table&quot;, what exactly does that mean? What format is that data in? How are you reading it with the ruby script? Moreover, in your code sample you use the variable <code>result</code> (which is crucial to your question), yet you never show us what <code>result</code> is actually equal to!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527625811, "post_id": 50579281, "comment_id": 88194265, "body": "The main point to your question, I think, is that you want to programatically fetch values like <code>eachrow[&#39;a&#39;]</code> rather than hardcoding stings like <code>&#39;a&#39;</code>. Perhaps all you need to do is: <code>csv &lt;&lt; eachrow.values</code>?? If this is the case, then the variable is confusingly named."}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 8332606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g4gQv.jpg?s=128&g=1", "display_name": "CecileV", "link": "https://stackoverflow.com/users/8332606/cecilev"}, "is_accepted": false, "score": 0, "last_activity_date": 1527602747, "creation_date": 1527602747, "answer_id": 50586415, "question_id": 50579281, "link": "https://stackoverflow.com/questions/50579281/how-to-write-data-to-excel-file/50586415#50586415", "title": "How to write data to excel file", "body": "<p>If you want to insert only 1 column in your csv containing <code>myformattedstring</code>, you need to put the double quotes only at the beginning and the end of your string, and interpolate all the <code>#{}</code> inside those quotes, as opposed to repeating the quotes</p>\n"}], "owner": {"reputation": 59, "user_id": 9804392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mallela SriPrakash", "link": "https://stackoverflow.com/users/9804392/mallela-sriprakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1527624144, "creation_date": 1527581007, "last_edit_date": 1527624144, "question_id": 50579281, "link": "https://stackoverflow.com/questions/50579281/how-to-write-data-to-excel-file", "title": "How to write data to excel file", "body": "<p>I have a config table as below: </p>\n\n<pre><code>S.NO    TableName   SourceColumns \n1          A         a,b,c,d \n2          B         p,q,r,s,t,u \n3          C         m,n,o,p,q \n4          D         x,y,z \n</code></pre>\n\n<p>Here, result object consists of SourceColumns of each record from the table.\nFor instance, here it gets the 1 record values. Then I am writing those values to CSV(excel) file. This works.</p>\n\n<pre><code>CSV.open('C:\\Actual\\Test.csv', 'w') do |csv| \n   result.each do |eachrow| \n   csv &lt;&lt; [\"#{eachrow['a']}\",\"#{eachrow['b']}\",\"#{eachrow['c']}\",\"#{eachrow['d']}\"] \n  end\nend\n</code></pre>\n\n<p>As, I have hardcoded my values in the above query, I am constructing the string per my SourceColumns and passing to query as below:</p>\n\n<pre><code>myformattedstring=\"#{eachrow['a']}\",\"#{eachrow['b']}\",\"#{eachrow['c']}\",\"#{eachrow['d']}\" \n\nCSV.open('C:\\Actual\\Test.csv', 'w') do |csv| \n   result.each do |eachrow| \n   csv &lt;&lt; [myformattedstring] \n   end \nend\n</code></pre>\n\n<p>Now, the data is being treated as string. How, can i pass my string to the CSV so that I can write the actual values</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1527578820, "post_id": 50578463, "comment_id": 88166329, "body": "Given a string like <code>&quot;a-f&quot;</code>, it is easy to list all characters corresponding to it, but to parse an arbitrary regex is not that easy."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1527578980, "post_id": 50578463, "comment_id": 88166425, "body": "\u201cI would like to write a spec for each character allowed by my regex\u201d\u2014OMG. Why would you want to test a ruby regexp engine in the first place?"}, {"owner": {"reputation": 1907, "user_id": 1902570, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/110a426ea70c739aa926efef57ab8428?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/1902570/leo"}, "edited": false, "score": 0, "creation_date": 1527579237, "post_id": 50578463, "comment_id": 88166570, "body": "i dont want to test regex engine. i want to write specific tests for speciifc characters that are not supposed be allowed in my app, and that should be COVERED by regex"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1527579968, "post_id": 50578463, "comment_id": 88167018, "body": "Unicode 10.0 defines 136,690 characters, do you want to list all of them? ;-)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1527600102, "post_id": 50578463, "comment_id": 88180134, "body": "do you mean something like <code>(&quot;a&quot;..&quot;f&quot;).to_a | (&quot;&amp;&quot;..&quot;9&quot;).to_a #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;&amp;&quot;, &quot;&#39;&quot;, &quot;(&quot;, &quot;)&quot;, &quot;*&quot;, &quot;+&quot;, &quot;,&quot;, &quot;-&quot;, &quot;.&quot;, &quot;&#47;&quot;, &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot; 3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1527581677, "post_id": 50579359, "comment_id": 88168063, "body": "Funny, but the loop fails at the first invalid codepoint which is not necessarily the last one. BTW, it should be <code>codepoint += 1</code>"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527582263, "post_id": 50579359, "comment_id": 88168380, "body": "@Stefan: Isn&#39;t the codepoint range contiguous??? I wonder how we then could determine that we have exhausted all possibilities... This is more tricky than I thought."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527583313, "post_id": 50579359, "comment_id": 88169015, "body": "@Stefan : Just checked <a href=\"https://en.wikipedia.org/wiki/Unicode#Code_point_planes_and_blocks\" rel=\"nofollow noreferrer\">this Wiki</a>. There are indeed gaps!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1527583367, "post_id": 50579359, "comment_id": 88169044, "body": "The Unicode characters are grouped in <i>planes</i> and each plane can contain several <i>blocks</i>.  The codepoints in a plane and in a block are contiguous and non-overlapping, but not all codepoints define a character, e.g. the <a href=\"https://en.wikipedia.org/wiki/Greek_and_Coptic\" rel=\"nofollow noreferrer\">Greek and Coptic</a> block only defines 135 out of 144 possible characters. In addition, some codepoints may be reserved, like U+D800, the one which makes your script fail."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527584159, "post_id": 50579359, "comment_id": 88169538, "body": "<i>&quot;I wonder how we then could determine that we have exhausted all possibilities&quot;</i> \u2013 if you really wanted to traverse all defined characters, you should probably refer to the <a href=\"http://unicode.org/ucd/\" rel=\"nofollow noreferrer\">Unicode Character Database</a>."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527584428, "post_id": 50579359, "comment_id": 88169678, "body": "@Stefan : I updated my solution. Do you think this would do the trick?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527591622, "post_id": 50579359, "comment_id": 88174382, "body": "\ud83d\udc4d for your effort, but I doubt this is what the OP had in mind ;-)"}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": true, "score": 1, "last_activity_date": 1527584318, "last_edit_date": 1527584318, "creation_date": 1527581290, "answer_id": 50579359, "question_id": 50578463, "link": "https://stackoverflow.com/questions/50578463/can-i-list-all-characters-not-matching-a-regex/50579359#50579359", "title": "Can I list all characters not matching a regex?", "body": "<p>Something along this:</p>\n\n<pre><code>(0..0x02FFFF).each do |codepoint|\n  begin\n    character = codepoint.chr(Encoding::UTF_8)\n    # .... Test your regexp here\n  rescue RangeError\n    # Ignore gaps in codepoint\n  end\nend\n</code></pre>\n\n<p>As @Stefan said in his comment: You will test quite some amount of characters with this.... </p>\n\n<p>BUG FIXED, thanks to Stefan</p>\n\n<p>FIXED: Dealing with gaps in the Unicode code point range. Note that I omitted the Unicode planes 3-16 in my solution.</p>\n"}], "owner": {"reputation": 1907, "user_id": 1902570, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/110a426ea70c739aa926efef57ab8428?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/1902570/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 50579359, "answer_count": 1, "score": -3, "last_activity_date": 1527584318, "creation_date": 1527578212, "last_edit_date": 1527578573, "question_id": 50578463, "link": "https://stackoverflow.com/questions/50578463/can-i-list-all-characters-not-matching-a-regex", "title": "Can I list all characters not matching a regex?", "body": "<p>I have a regex that has different ranges included, like <code>a-f</code> and <code>&amp;-9</code>. Is there a way to list all characters included in this range, or to put it the other way around, characters that are not included? I would like to write a spec for each character allowed by my regex.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 166, "user_id": 5961910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GmFPy.jpg?s=128&g=1", "display_name": "Stephan Wiehr", "link": "https://stackoverflow.com/users/5961910/stephan-wiehr"}, "edited": false, "score": 2, "creation_date": 1527578992, "post_id": 50578378, "comment_id": 88166431, "body": "Stupid question: How about simply using &#39;+&#39; to get the sum and comparison operators to identify the max?"}, {"owner": {"reputation": 683, "user_id": 1013849, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/70ae6393e30e2ce8c0e1cc24355040e7?s=128&d=identicon&r=PG", "display_name": "rlsaj", "link": "https://stackoverflow.com/users/1013849/rlsaj"}, "reply_to_user": {"reputation": 166, "user_id": 5961910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GmFPy.jpg?s=128&g=1", "display_name": "Stephan Wiehr", "link": "https://stackoverflow.com/users/5961910/stephan-wiehr"}, "edited": false, "score": 0, "creation_date": 1527579470, "post_id": 50578378, "comment_id": 88166709, "body": "Thanks for the reply @Stephanie.  Still learning, and I was a bit reluctant to post the message in fear of it being a stupid question."}, {"owner": {"reputation": 166, "user_id": 5961910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GmFPy.jpg?s=128&g=1", "display_name": "Stephan Wiehr", "link": "https://stackoverflow.com/users/5961910/stephan-wiehr"}, "edited": false, "score": 0, "creation_date": 1527580314, "post_id": 50578378, "comment_id": 88167237, "body": "Just to prevent any misunderstanding: I was rather referring to my question being stupid not yours - what I was proposing is exactly what @widjajayd gave as an answer."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1527580521, "post_id": 50578378, "comment_id": 88167357, "body": "You should use <code>snake_case</code> instead of <code>camelCase</code> for variable names. And try to find more expressive names, maybe <code>max_length</code> or <code>total_height</code> instead of <code>temp_...</code>"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1527580251, "post_id": 50578973, "comment_id": 88167189, "body": "It should be the other way round: determine maximum length / width and sum the heights."}, {"owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1527580492, "post_id": 50578973, "comment_id": 88167342, "body": "there two things from the comments before source code he is asking about highest height but from the source code he wrote @tempheight as highest value, but I think he get my message"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1527580649, "post_id": 50578973, "comment_id": 88167447, "body": "Oh, indeed, that is rather confusing :-)"}, {"owner": {"reputation": 683, "user_id": 1013849, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/70ae6393e30e2ce8c0e1cc24355040e7?s=128&d=identicon&r=PG", "display_name": "rlsaj", "link": "https://stackoverflow.com/users/1013849/rlsaj"}, "edited": false, "score": 0, "creation_date": 1527585233, "post_id": 50578973, "comment_id": 88170247, "body": "thanks for working out my mess @widjajayd, what you assumed was correct."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 683, "user_id": 1013849, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/70ae6393e30e2ce8c0e1cc24355040e7?s=128&d=identicon&r=PG", "display_name": "rlsaj", "link": "https://stackoverflow.com/users/1013849/rlsaj"}, "edited": false, "score": 1, "creation_date": 1527595406, "post_id": 50578973, "comment_id": 88176932, "body": "@rlsaj as you probably know, there&#39;s an <i>edit</i> button under your question, so you can still clarify / fix it."}], "tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": true, "score": 3, "last_activity_date": 1527579874, "creation_date": 1527579874, "answer_id": 50578973, "question_id": 50578378, "link": "https://stackoverflow.com/questions/50578378/sum-of-values-in-loop-and-keeping-highest-value/50578973#50578973", "title": "Sum of values in loop and keeping highest value", "body": "<p>here probably can help</p>\n\n<pre><code>@tempLength = 0\n@tempWidth = 0\n@tempHeight = 0\nparams[:rate][:items].each do |item|\n  item = item[:product_id]\n  puts \"Item details\"\n  puts item\n  @productDimensions = Product.where(:product_id =&gt; item).first\n  @tempLength = @tempLength + @productDimensions.length\n  @tempWidth  = @tempWidth  + @productDimensions.width\n  if @productDimensions.height &gt; @tempHeight\n    @tempHeight = @productDimensions.height \n  end\nend\n# @tempLength = total of all tempLength values\n# @tempWidth = total of all tempHeight values\n# @tempHeight = keep highest value\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 166, "user_id": 5961910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GmFPy.jpg?s=128&g=1", "display_name": "Stephan Wiehr", "link": "https://stackoverflow.com/users/5961910/stephan-wiehr"}, "is_accepted": false, "score": 1, "last_activity_date": 1527581061, "creation_date": 1527581061, "answer_id": 50579298, "question_id": 50578378, "link": "https://stackoverflow.com/questions/50578378/sum-of-values-in-loop-and-keeping-highest-value/50579298#50579298", "title": "Sum of values in loop and keeping highest value", "body": "<p>Maybe another suggestion that may result in better performance:</p>\n\n<pre><code>@tempLength = 0\n@tempWidth = 0\n@tempHeight = 0\nproduct_ids = []\nparams[:rate][:items].each do |item|\n  product_ids &lt;&lt; item[:product_id]\nend\n\n# Filter products according to collected product_ids\n@products = Product.where(:product_id =&gt; product_ids)\n\n# Let ActiveRecord do the work\n@tempLength = @products.sum('length')\n@tempWidth  = @products.sum('width')\n@tempHeight = @products.maximum('height')\n\n# @tempLength = total of all tempLength values\n# @tempWidth = total of all tempHeight values\n# @tempHeight = keep highest value\n</code></pre>\n"}], "owner": {"reputation": 683, "user_id": 1013849, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/70ae6393e30e2ce8c0e1cc24355040e7?s=128&d=identicon&r=PG", "display_name": "rlsaj", "link": "https://stackoverflow.com/users/1013849/rlsaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 50578973, "answer_count": 2, "score": 0, "last_activity_date": 1527676364, "creation_date": 1527577959, "last_edit_date": 1527676364, "question_id": 50578378, "link": "https://stackoverflow.com/questions/50578378/sum-of-values-in-loop-and-keeping-highest-value", "title": "Sum of values in loop and keeping highest value", "body": "<p>I am trying to calculate the shipping dimensions of multiple products. I want to return the largest value of <code>@tempLength</code> and <code>@tempWidth</code> and sum up all <code>@tempHeight</code>s in my loop: </p>\n\n<pre><code>@tempLength = 0\n@tempWidth = 0\n@tempHeight = 0\n\nparams[:rate][:items].each do |item|\n  item = item[:product_id]\n  puts \"Item details\"\n  puts item\n  @productDimensions = Product.where(:product_id =&gt; item).first\n  @tempLength = @productDimensions.length\n  @tempWidth = @productDimensions.width\n  @tempHeight = @productDimensions.height\n  # tempLength = maximum length value\n  # tempWidth = maximum width value\n  # tempHeight = sum of all heights\nend\n</code></pre>\n\n<p>I know I have to use <code>sum(&amp;:symbol)</code>, but I'm stuck. What's the best approach?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "passenger"], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 9799599, "user_type": "registered", "profile_image": "https://graph.facebook.com/2199878486705391/picture?type=large", "display_name": "Yijia Su", "link": "https://stackoverflow.com/users/9799599/yijia-su"}, "is_accepted": false, "score": 1, "last_activity_date": 1527577655, "creation_date": 1527577655, "answer_id": 50578285, "question_id": 50578141, "link": "https://stackoverflow.com/questions/50578141/how-to-solve-your-ruby-version-is-2-3-1-but-your-gemfile-specified-2-5-1/50578285#50578285", "title": "How to solve Your Ruby version is 2.3.1, but your Gemfile specified 2.5.1?", "body": "<p>try use RVM (<a href=\"https://rvm.io/\" rel=\"nofollow noreferrer\">https://rvm.io/</a>) and install proper version of ruby and set the default.</p>\n"}, {"tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": false, "score": 0, "last_activity_date": 1527611099, "creation_date": 1527611099, "answer_id": 50588910, "question_id": 50578141, "link": "https://stackoverflow.com/questions/50578141/how-to-solve-your-ruby-version-is-2-3-1-but-your-gemfile-specified-2-5-1/50588910#50588910", "title": "How to solve Your Ruby version is 2.3.1, but your Gemfile specified 2.5.1?", "body": "<p>Change the version in your <code>Gemfile</code> back to 2.5.1, and run <code>bundle install</code>. This should update your Gemfile.lock, and will re-install or update dependencies if needed.</p>\n\n<p>After that, try starting with passenger</p>\n\n<p>The folder named <code>2.3.0</code> is a red herring, I believe. I've noticed the folder name doesn't seem to sync with the ruby version so I would ignore that.</p>\n"}], "owner": {"reputation": 169, "user_id": 8223967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/60f05fe9d2060200b910202b7eb21175?s=128&d=identicon&r=PG&f=1", "display_name": "Jasjeet Singh", "link": "https://stackoverflow.com/users/8223967/jasjeet-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1558, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1527611099, "creation_date": 1527577127, "last_edit_date": 1527577429, "question_id": 50578141, "link": "https://stackoverflow.com/questions/50578141/how-to-solve-your-ruby-version-is-2-3-1-but-your-gemfile-specified-2-5-1", "title": "How to solve Your Ruby version is 2.3.1, but your Gemfile specified 2.5.1?", "body": "<p>Hello I'm using Phusion Passenger and NGINX to run a RoR app.\nbut got this error\nThe Phusion Passenger application server tried to start the web application. But the application itself (and not Passenger) encountered an internal error.</p>\n\n<p>Error details:</p>\n\n<pre><code>Your Ruby version is 2.3.1, but your Gemfile specified 2.5.1 (Bundler::RubyVersionMismatch)\n  /var/lib/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/definition.rb:491:in `validate_ruby!'\n  /var/lib/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/definition.rb:466:in `validate_runtime!'\n  /var/lib/gems/2.3.0/gems/bundler-1.16.2/lib/bundler.rb:101:in `setup'\n  /var/lib/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/setup.rb:20:in `&lt;top (required)&gt;'\n  /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n  /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n  /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:363:in `activate_gem'\n  /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:221:in `block in run_load_path_setup_code'\n  /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:527:in `running_bundler'\n  /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:220:in `run_load_path_setup_code'\n  /usr/share/passenger/helper-scripts/rack-preloader.rb:91:in `preload_app'\n  /usr/share/passenger/helper-scripts/rack-preloader.rb:189:in `block in &lt;module:App&gt;'\n  /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:380:in `run_block_and_record_step_progress'\n  /usr/share/passenger/helper-scripts/rack-preloader.rb:188:in `&lt;module:App&gt;'\n  /usr/share/passenger/helper-scripts/rack-preloader.rb:30:in `&lt;module:PhusionPassenger&gt;'\n  /usr/share/passenger/helper-scripts/rack-preloader.rb:29:in `&lt;main&gt;'\nThe stdout/stderr output of the subprocess so far is:\n\nError: The application encountered the following error: Your Ruby version is 2.3.1, but your Gemfile specified 2.5.1 (Bundler::RubyVersionMismatch)\n    /var/lib/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/definition.rb:491:in `validate_ruby!'\n    /var/lib/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/definition.rb:466:in `validate_runtime!'\n    /var/lib/gems/2.3.0/gems/bundler-1.16.2/lib/bundler.rb:101:in `setup'\n    /var/lib/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/setup.rb:20:in `&lt;top (required)&gt;'\n    /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:363:in `activate_gem'\n    /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:221:in `block in run_load_path_setup_code'\n    /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:527:in `running_bundler'\n    /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:220:in `run_load_path_setup_code'\n    /usr/share/passenger/helper-scripts/rack-preloader.rb:91:in `preload_app'\n    /usr/share/passenger/helper-scripts/rack-preloader.rb:189:in `block in &lt;module:App&gt;'\n    /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:380:in `run_block_and_record_step_progress'\n    /usr/share/passenger/helper-scripts/rack-preloader.rb:188:in `&lt;module:App&gt;'\n    /usr/share/passenger/helper-scripts/rack-preloader.rb:30:in `&lt;module:PhusionPassenger&gt;'\n    /usr/share/passenger/helper-scripts/rack-preloader.rb:29:in `&lt;main&gt;'\n</code></pre>\n\n<p>Then I check my installed ruby version. ruby -v</p>\n\n<pre><code>ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux]\nrbenv 1.1.1-30-gc8ba27f\nRails 5.2.0\n</code></pre>\n\n<p>But there is not any gem folder 2.5.1 inside /var/lib/gems directory.\nonly 2.3.0 folder exists.</p>\n\n<p>and even ruby version 2.5.1 not present in /usr/lib/ruby/ directory. only 2.3.0 present.</p>\n\n<p>EDIT: I also tried to change the ruby version inside my Gemfile but got an error.</p>\n\n<pre><code>Your Ruby version is 2.5.1, but your Gemfile specified 2.3.1\n</code></pre>\n\n<p>But when I start my app with <code>rails s</code> the app bootups.</p>\n"}, {"tags": ["ruby", "scrapy"], "owner": {"reputation": 499, "user_id": 4829617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5c44A.png?s=128&g=1", "display_name": "Dhurba Baral", "link": "https://stackoverflow.com/users/4829617/dhurba-baral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1527570720, "creation_date": 1527570720, "question_id": 50576710, "link": "https://stackoverflow.com/questions/50576710/missing-x-cache-proxyname-from-response-header-in-scrapoxy", "title": "Missing `x-cache-proxyname` from response header in scrapoxy", "body": "<p>I've been scraping some URL having throttling limit using scrapoxy. Whenever it blocks the URL after a certain time, it won't return x-cache-proxyname in the response header so that I can't stop that particular instance and create another one. Below is the full header response.</p>\n\n<pre><code>{\"content-type\"=&gt;[\"text/html\"],\n \"content-length\"=&gt;[\"110778\"],\n \"connection\"=&gt;[\"close\"],\n \"date\"=&gt;[\"Sun, 27 May 2018 18:20:37 GMT\"],\n \"last-modified\"=&gt;[\"Wed, 12 Apr 2017 09:12:05 GMT\"],\n \"etag\"=&gt;[\"\\\"c465e20f1a2c5681318061d5321e2368\\\"\"],\n \"accept-ranges\"=&gt;[\"bytes\"],\n \"server\"=&gt;[\"AmazonS3\"],\n \"x-cache\"=&gt;[\"Error from cloudfront\"],\n \"via\"=&gt;[\"1.1 7f43afdd7e6d9ba0ebc0701aab572252.cloudfront.net (CloudFront)\"],\n \"x-amz-cf-id\"=&gt;[\"dYWVQe6v1cb7JLQy0WnJE9KP0mtZGyrumbNdORIyaOo7MeaOExpf2w==\"]}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 1364, "user_id": 5737512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nfjfF.jpg?s=128&g=1", "display_name": "Kaushlendra Tomar", "link": "https://stackoverflow.com/users/5737512/kaushlendra-tomar"}, "edited": false, "score": 2, "creation_date": 1527569982, "post_id": 50576508, "comment_id": 88162319, "body": "can you please give me the example?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527576487, "post_id": 50576508, "comment_id": 88164983, "body": "<i>&quot;JSON strings that may contain \\n, \\t&quot;</i> \u2013 do you want to remove formatting or does its data contain these characters?"}, {"owner": {"reputation": 363, "user_id": 5549118, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1528435484134902/picture?type=large", "display_name": "Pirun Seng", "link": "https://stackoverflow.com/users/5549118/pirun-seng"}, "reply_to_user": {"reputation": 1364, "user_id": 5737512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nfjfF.jpg?s=128&g=1", "display_name": "Kaushlendra Tomar", "link": "https://stackoverflow.com/users/5737512/kaushlendra-tomar"}, "edited": false, "score": 0, "creation_date": 1527577614, "post_id": 50576508, "comment_id": 88165641, "body": "@Sunny I&#39;ve added my sample params of JSON string."}, {"owner": {"reputation": 363, "user_id": 5549118, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1528435484134902/picture?type=large", "display_name": "Pirun Seng", "link": "https://stackoverflow.com/users/5549118/pirun-seng"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527577630, "post_id": 50576508, "comment_id": 88165653, "body": "@Stefan I want to remove those characters."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527577645, "post_id": 50576508, "comment_id": 88165661, "body": "Where do these tabs and newlines come from in the first place?"}, {"owner": {"reputation": 363, "user_id": 5549118, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1528435484134902/picture?type=large", "display_name": "Pirun Seng", "link": "https://stackoverflow.com/users/5549118/pirun-seng"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527578201, "post_id": 50576508, "comment_id": 88165973, "body": "@Stefan it comes with text copied from Ms. Office Word/PDF and paste it in <a href=\"https://formbuilder.online/\" rel=\"nofollow noreferrer\">formBuilder</a> field label."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1527575530, "post_id": 50576654, "comment_id": 88164452, "body": "FYI <code>squish</code> is equivalent to <code>str.gsub(&#47;[[:space:]]+&#47;, &#39; &#39;).strip</code>"}, {"owner": {"reputation": 363, "user_id": 5549118, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1528435484134902/picture?type=large", "display_name": "Pirun Seng", "link": "https://stackoverflow.com/users/5549118/pirun-seng"}, "edited": false, "score": 0, "creation_date": 1527577716, "post_id": 50576654, "comment_id": 88165701, "body": "@Deepak in my case, either <code>squish</code> or <code>squish!</code> do not help."}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 4, "last_activity_date": 1527570449, "creation_date": 1527570449, "answer_id": 50576654, "question_id": 50576508, "link": "https://stackoverflow.com/questions/50576508/how-to-delete-non-text-characters-new-line-tab-etc-from-params-of-json-strin/50576654#50576654", "title": "How to delete non text characters, new line, tab, etc, from params of JSON string", "body": "<p>You can make use of <a href=\"https://apidock.com/rails/String/squish\" rel=\"nofollow noreferrer\"><strong><code>squish</code></strong></a> or <a href=\"https://apidock.com/rails/v4.2.7/String/squish%21\" rel=\"nofollow noreferrer\"><strong><code>squish!</code></strong></a></p>\n\n<pre><code>\"  Some text \\n\\n and a tab \\t\\t with new line \\n\\n  \".squish\n#=&gt; \"Some text and a tab with new line\"\n</code></pre>\n\n<p><code>Squish</code> removes all the whitespace chars on both ends and grouping remaining whitespace chars (<code>\\n</code>, <code>\\t</code>, <code>space</code>) in one space </p>\n"}, {"tags": [], "owner": {"reputation": 1364, "user_id": 5737512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nfjfF.jpg?s=128&g=1", "display_name": "Kaushlendra Tomar", "link": "https://stackoverflow.com/users/5737512/kaushlendra-tomar"}, "is_accepted": true, "score": 2, "last_activity_date": 1527582430, "creation_date": 1527582430, "answer_id": 50579669, "question_id": 50576508, "link": "https://stackoverflow.com/questions/50576508/how-to-delete-non-text-characters-new-line-tab-etc-from-params-of-json-strin/50579669#50579669", "title": "How to delete non text characters, new line, tab, etc, from params of JSON string", "body": "<p>I think this one may help you,</p>\n\n<p><code>JSON.parse(string).map{ |a| a['label'] = a['label'].squish; a}</code></p>\n"}], "owner": {"reputation": 363, "user_id": 5549118, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1528435484134902/picture?type=large", "display_name": "Pirun Seng", "link": "https://stackoverflow.com/users/5549118/pirun-seng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1233, "favorite_count": 0, "accepted_answer_id": 50579669, "answer_count": 2, "score": 4, "last_activity_date": 1527582430, "creation_date": 1527569519, "last_edit_date": 1527577515, "question_id": 50576508, "link": "https://stackoverflow.com/questions/50576508/how-to-delete-non-text-characters-new-line-tab-etc-from-params-of-json-strin", "title": "How to delete non text characters, new line, tab, etc, from params of JSON string", "body": "<p>I have JSON strings that may contain <code>\\n</code>, <code>\\t</code>, which I don't want to save into database. <code>strip_tags</code> helps only with simple strings. I am using <code>gsub(/(\\\\n)|(\\\\t)/, \"\")</code>.</p>\n\n<p>I wonder if there is another Rails helper method or a better way to achieve this.</p>\n\n<p>e.g</p>\n\n<pre><code>\"[{\\\"type\\\":\\\"checkbox-group\\\",\\\"label\\\":\\\"\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nFill in\\\\nthe Gap (Please\\\\nfill in the blank box with correct wor\\\",\\\"name\\\":\\\"checkbox-group-1527245153706\\\",\\\"values\\\":[{\\\"label\\\":\\\"Option 1\\\",\\\"value\\\":\\\"option-1\\\",\\\"selected\\\":true}]},{\\\"type\\\":\\\"text\\\",\\\"label\\\":\\\"\\\\n\\\\t\\\\t\\\\n\\\\t\\\\n\\\\t\\\\n\\\\t\\\\t\\\\n\\\\t\\\\t\\\\t\\\\n\\\\t\\\\t\\\\t\\\\t\\\\n\\\\t\\\\t\\\\t\\\\t\\\\t\\\\n\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\n\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\n\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\tWhat are the unique features of\\\\ne-commerce, digital markets, and\\\\ndigital goods?\u00a0\\\\n\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\n\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\n\\\\t\\\\t\\\\t\\\\t\\\\t\\\\n\\\\t\\\\t\\\\t\\\\t\\\\n\\\\t\\\\t\\\\t\\\\n\\\\t\\\\t\\\",\\\"className\\\":\\\"form-control\\\",\\\"name\\\":\\\"text-1527245426509\\\",\\\"subtype\\\":\\\"text\\\"}]\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2298, "user_id": 5883753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b32d66e6c723279fdfc2a90b269a070c?s=128&d=identicon&r=PG&f=1", "display_name": "fongfan999", "link": "https://stackoverflow.com/users/5883753/fongfan999"}, "edited": false, "score": 0, "creation_date": 1527571885, "post_id": 50576400, "comment_id": 88162921, "body": "You was asking where to put your module <code>Base</code>, right?"}, {"owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "reply_to_user": {"reputation": 2298, "user_id": 5883753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b32d66e6c723279fdfc2a90b269a070c?s=128&d=identicon&r=PG&f=1", "display_name": "fongfan999", "link": "https://stackoverflow.com/users/5883753/fongfan999"}, "edited": false, "score": 0, "creation_date": 1527575119, "post_id": 50576400, "comment_id": 88164247, "body": "Yes, I&#39;d like to know where it should go if it&#39;s included in multiple classes. Also, I&#39;d like to know how to structure the application directory if it goes into one class."}], "answers": [{"comments": [{"owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "edited": false, "score": 0, "creation_date": 1527577125, "post_id": 50578043, "comment_id": 88165355, "body": "I would prefer to use composition over inheritance. Although right now it&#39;s only counting, I anticipate there will be other reactionable things that are required."}, {"owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "edited": false, "score": 0, "creation_date": 1527577250, "post_id": 50578043, "comment_id": 88165439, "body": "I want to define this behavior in <code>&#47;app&#47;decorators&#47;reactionable&#47;base.rb</code>. If <code>module Base</code> was defined here, would there be a way to <code>include</code> it into both <code>PostDecorator</code> and <code>CommentDecorator</code> is what I&#39;m hoping to know."}, {"owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "reply_to_user": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "edited": false, "score": 1, "creation_date": 1527577436, "post_id": 50578043, "comment_id": 88165543, "body": "<code>include Roles::ReactionsCountable</code> in both decorator classes."}], "tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": true, "score": 1, "last_activity_date": 1527576774, "creation_date": 1527576774, "answer_id": 50578043, "question_id": 50576400, "link": "https://stackoverflow.com/questions/50576400/how-to-properly-use-base-scope-in-rails/50578043#50578043", "title": "How to properly use base scope in Rails", "body": "<p>First of all, I would figure out a better name for the included module. It could be treated as a <em>role</em>, using which you would enrich classes. This role would have declared a bunch of <code>*_count</code> methods that counts smth in <code>reactions</code>.\nSo I would name it <code>ReactionsCountable</code> and additionally put it into namespace to distinguish from the decorators: <code>Roles::ReactionsCountable</code>.</p>\n\n<p>Then I would put it into:</p>\n\n<pre><code>/app/decorators\n  /roles\n    /reactions_countable.rb\n  /comment.rb\n  /post.rb\n</code></pre>\n\n<p>Other soulution would be to use classic inheritence. Here the <code>Base</code> name would make sense IMO:</p>\n\n<pre><code>class BaseDecorator &lt; ApplicationDecorator\n  # declare `*_count` methods here\n\nclass PostDecorator &lt; BaseDecorator\nclass CommentDecorator &lt; BaseDecorator\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "edited": false, "score": 0, "creation_date": 1527579363, "post_id": 50578458, "comment_id": 88166646, "body": "Yes. That&#39;s exactly what I meant. Sorry for not beign more precise describing it ;)"}], "tags": [], "owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "is_accepted": false, "score": 0, "last_activity_date": 1527578202, "creation_date": 1527578202, "answer_id": 50578458, "question_id": 50576400, "link": "https://stackoverflow.com/questions/50576400/how-to-properly-use-base-scope-in-rails/50578458#50578458", "title": "How to properly use base scope in Rails", "body": "<p>I figured it out with Maicher's answer.</p>\n\n<p>If a <code>CommentDecorator</code> is inside of <code>./app/decorators/comment_decorator.rb</code>, and we want to include a module, <code>ReactionablesCountable</code>, then we need to create a file inside of <code>./app/decorators/roles/reactions_countable.rb</code> that has module nesting which reflects the path to the file. For example, the first constant in the <code>include</code>, (<code>Roles</code>) points to the folder Rails will look for it, the second (<code>ReactionsCountable</code>), is the name of the file.</p>\n\n<p>The module needs to be nested within this file as well. I've shown it below.</p>\n\n<pre><code>module Roles\n  module ReactionsCountable\n    # methods defined here.\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 50578043, "answer_count": 2, "score": 3, "last_activity_date": 1527605644, "creation_date": 1527568763, "last_edit_date": 1527589049, "question_id": 50576400, "link": "https://stackoverflow.com/questions/50576400/how-to-properly-use-base-scope-in-rails", "title": "How to properly use base scope in Rails", "body": "<p>I have two models that share the behavior. Both <code>Post</code> and <code>Comment</code> can have reactions.</p>\n\n<pre><code># ./app/models/post.rb\nclass Post &lt; ApplicationRecord\n  has_many :reactions, as: :reactionable\nend\n\n# ./app/models/comment.rb\nclass Comment &lt; ApplicationRecord\n  has_many :reactions, as: :reactionable\nend\n</code></pre>\n\n<p>When I decorate them, I end up with a lot of exact same methods.</p>\n\n<pre><code># ./app/decorators/post_decorator.rb\nclass PostDecorator &lt; ApplicationDecorator\n  delegate_all\n\n  def reactions_total_count\n    object.reactions.count\n  end\n\n  def reactions_type(kind)\n    object.reactions.collect(&amp;:reaction_type).inject(0) {|counter, item| counter += item == kind ?  1 : 0}\n  end\n\n  def likes_count\n    reactions_type('like')\n  end\n\n  def hearts_count\n    reactions_type('heart')\n  end\n\n  def wows_count\n    reactions_type('wow')\n  end\n\n  def laughs_count\n    reactions_type('laugh')\n  end\n\n  def sads_count\n    reactions_type('sad')\n  end\nend\n\n\n# ./app/decorators/comment.rb\nclass CommentDecorator &lt; ApplicationDecorator\n  delegate_all\n\n  def reactions_total_count\n    object.reactions.count\n  end\n\n  def reactions_type(kind)\n    object.reactions.collect(&amp;:reaction_type).inject(0) {|counter, item| counter += item == kind ?  1 : 0}\n  end\n\n  def likes_count\n    reactions_type('like')\n  end\n\n  def hearts_count\n    reactions_type('heart')\n  end\n\n  def wows_count\n    reactions_type('wow')\n  end\n\n  def laughs_count\n    reactions_type('laugh')\n  end\n\n  def sads_count\n    reactions_type('sad')\n  end\nend\n</code></pre>\n\n<p>I want it to look something like this, but don't know where to put the files, and exactly which technique I should use (<code>include</code> vs. <code>extend</code>).</p>\n\n<pre><code># ./app/decorators/base.rb\nmodule Base\n  # methods defined here\nend\n\n# ./app/decorators/post.rb\nclass PostDecorator &lt; ApplicationDecorator\n  delegate_all\n  include Base\nend\n\n# ./app/decorators/comment.rb\nclass CommentDecorator &lt; ApplicationDecorator\n  delegate_all\n  include Base\nend\n</code></pre>\n\n<p>Please advise. I know there is a better approach that I just can't seem to get right.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 2298, "user_id": 5883753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b32d66e6c723279fdfc2a90b269a070c?s=128&d=identicon&r=PG&f=1", "display_name": "fongfan999", "link": "https://stackoverflow.com/users/5883753/fongfan999"}, "edited": false, "score": 1, "creation_date": 1527572091, "post_id": 50575978, "comment_id": 88162992, "body": "Hi @Coda Chang, is there any callbacks when a choice is saved?"}, {"owner": {"reputation": 696, "user_id": 3101782, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a7f2da739317a5199362dd7b998ad967?s=128&d=identicon&r=PG", "display_name": "Disha", "link": "https://stackoverflow.com/users/3101782/disha"}, "edited": false, "score": 0, "creation_date": 1527573004, "post_id": 50575978, "comment_id": 88163339, "body": "You could try batches - <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Batches.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Batches.html</a>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 2298, "user_id": 5883753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b32d66e6c723279fdfc2a90b269a070c?s=128&d=identicon&r=PG&f=1", "display_name": "fongfan999", "link": "https://stackoverflow.com/users/5883753/fongfan999"}, "edited": false, "score": 0, "creation_date": 1527578712, "post_id": 50575978, "comment_id": 88166265, "body": "@fongfan999 is on the right track: do it all inside the database."}, {"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "reply_to_user": {"reputation": 2298, "user_id": 5883753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b32d66e6c723279fdfc2a90b269a070c?s=128&d=identicon&r=PG&f=1", "display_name": "fongfan999", "link": "https://stackoverflow.com/users/5883753/fongfan999"}, "edited": false, "score": 0, "creation_date": 1527587361, "post_id": 50575978, "comment_id": 88171680, "body": "@fongfan999, yeah, it will return <code>true</code> if save successfully."}], "answers": [{"comments": [{"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1527587058, "post_id": 50577048, "comment_id": 88171485, "body": "Oh, but in this way, the q still need to be <code>save</code> for 1000 times."}, {"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1527587273, "post_id": 50577048, "comment_id": 88171633, "body": "I&#39;ve updated my question. the way is a good way to save <code>find</code> query, but I am looking for saving the <code>update</code> query."}, {"owner": {"reputation": 1513, "user_id": 5746504, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-4c57-sWfrFM/AAAAAAAAAAI/AAAAAAAACog/XNKIq-S6CDg/photo.jpg?sz=128", "display_name": "Moamen Naanou", "link": "https://stackoverflow.com/users/5746504/moamen-naanou"}, "reply_to_user": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1527595147, "post_id": 50577048, "comment_id": 88176755, "body": "@CodaChang if you are using <code>MySQL 8.0+</code> you can use <code>update_all</code> and make use of DB functionality <code>REGEXP_REPLACE</code> as per this answer <a href=\"https://stackoverflow.com/a/49925597/5746504\">stackoverflow.com/a/49925597/5746504</a>"}, {"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1527652921, "post_id": 50577048, "comment_id": 88201509, "body": "Unfortunately, I am using MySQL 5.6, but it&#39;s also a good reference. Thx."}], "tags": [], "owner": {"reputation": 1513, "user_id": 5746504, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-4c57-sWfrFM/AAAAAAAAAAI/AAAAAAAACog/XNKIq-S6CDg/photo.jpg?sz=128", "display_name": "Moamen Naanou", "link": "https://stackoverflow.com/users/5746504/moamen-naanou"}, "is_accepted": false, "score": 1, "last_activity_date": 1527572587, "creation_date": 1527572587, "answer_id": 50577048, "question_id": 50575978, "link": "https://stackoverflow.com/questions/50575978/rails-update-multiple-record-with-hash/50577048#50577048", "title": "Rails update multiple record with hash", "body": "<p>You are hitting the db 1000 times sequentially to get each record separately, try to use single query to get all records you need to update:</p>\n\n<pre><code>SUBST = ''.freeze\nre = /&lt;p&gt;|&lt;\\/p&gt;/m\nQuestionChoice.where('id &lt;= 1000').map do |q| \n  q.selections.gsub!(re, SUBST) \n  q.save! if q.changed?\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2298, "user_id": 5883753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b32d66e6c723279fdfc2a90b269a070c?s=128&d=identicon&r=PG&f=1", "display_name": "fongfan999", "link": "https://stackoverflow.com/users/5883753/fongfan999"}, "is_accepted": false, "score": 1, "last_activity_date": 1548336128, "last_edit_date": 1548336128, "creation_date": 1527604187, "answer_id": 50586937, "question_id": 50575978, "link": "https://stackoverflow.com/questions/50575978/rails-update-multiple-record-with-hash/50586937#50586937", "title": "Rails update multiple record with hash", "body": "<p>I used to face this problem and I solved it. Try to the following:</p>\n\n<p>MySQL 8.0+:</p>\n\n<pre><code>QuestionChoice.where(id: 1..1000).update_all(\"selections = REGEXP_REPLACE(selections, '&lt;p&gt;|&lt;\\/p&gt;', '')\")\n</code></pre>\n\n<p>Others:</p>\n\n<pre><code>QuestionChoice.where(id: 1..1000).update_all(\"selections = REPLACE(selections, '&lt;/p&gt;', '')\")\n</code></pre>\n\n<p>or</p>\n\n<pre><code>QuestionChoice.where(id: 1..1000).update_all %{\n  selections =\n    CASE \n    WHEN selections RLIKE '&lt;p&gt;|&lt;\\/p&gt;' \n    THEN REPLACE(selections,'&lt;p&gt;|&lt;\\/p&gt;', '')\n    END \n    WHERE selections RLIKE '&lt;p&gt;|&lt;\\/p&gt;'\n}\n</code></pre>\n\n<p><strong>IMPORTANT</strong>: Try to put a few backlashes (<code>\\</code>) to your regex pattern in the clause if needed.</p>\n"}], "owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548336128, "creation_date": 1527565141, "last_edit_date": 1527587207, "question_id": 50575978, "link": "https://stackoverflow.com/questions/50575978/rails-update-multiple-record-with-hash", "title": "Rails update multiple record with hash", "body": "<p>I need to update my data iteratively.</p>\n\n<p>But the following way I achieved is the way too time-consuming.</p>\n\n<p>Can I update multiple records with an <code>id-value</code> hash?</p>\n\n<pre><code>SUBST = ''.freeze\nre = /&lt;p&gt;|&lt;\\/p&gt;/m\n(1..1000).each do |id|\n  choice = QuestionChoice.find id\n  choice.selections.gsub!(re, SUBST)\n  choice.save! if choice.changed?\nend\n</code></pre>\n\n<h2>Update:</h2>\n\n<p>Since I found out my code could be improved by using <code>where</code></p>\n\n<p>Like the following </p>\n\n<pre><code>QuestionChoice.where(id: (1..1000)).each do |choice|\n  choice.selections.gsub!(re, SUBST)\n  choice.save! if choice.changed?\nend\n</code></pre>\n\n<p>But now I still need to call <code>save!</code> for every record which will cost much time.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1527564746, "post_id": 50575784, "comment_id": 88160962, "body": "You are going to need a <code>&lt;%= form_tag ... %&gt;</code> around that <code>submit_tag</code>. Look that up to get started on adding a form that POSTs to a controller &quot;action&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7107433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a26817c4c725688fc8eef1d4008e2e5?s=128&d=identicon&r=PG", "display_name": "yilmazgunalp", "link": "https://stackoverflow.com/users/7107433/yilmazgunalp"}, "is_accepted": false, "score": 0, "last_activity_date": 1527573394, "creation_date": 1527573394, "answer_id": 50577214, "question_id": 50575784, "link": "https://stackoverflow.com/questions/50575784/ruby-need-the-ability-to-add-a-function-to-button/50577214#50577214", "title": "Ruby - Need the ability to add a function to button", "body": "<p>You can use button_to view helper in your erb file</p>\n\n<pre><code> &lt;%= button_to \"Join Activity\", controller: \"users\", action: \"join\", data: {\"any data you would like to send\"}, remote: true %&gt;\n</code></pre>\n\n<p>This will submit a form (POST request) in the background (thanks to <em>'remote'</em> option) to users controllers join method with data object.</p>\n\n<p>You can then use that data in Users controller join method to update the user or the activity according to your business logic. </p>\n\n<p>If instead you want to submit to a different controller just change the options to button_to helper.</p>\n\n<p>Dont forget to add the routes to your routes file such as</p>\n\n<pre><code>post 'users/join', to: 'users#join'\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 8502602, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wk__T8zontw/AAAAAAAAAAI/AAAAAAAAANw/79eaQxtWWA0/photo.jpg?sz=128", "display_name": "Belal Kamara", "link": "https://stackoverflow.com/users/8502602/belal-kamara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527573394, "creation_date": 1527563306, "question_id": 50575784, "link": "https://stackoverflow.com/questions/50575784/ruby-need-the-ability-to-add-a-function-to-button", "title": "Ruby - Need the ability to add a function to button", "body": "<p>I am trying to add the function where the user is able to 'Join' a activity once the button is clicked. However i'm not sure how to add the function in a method.\nI currently have the code below in my html.erb file</p>\n\n<pre><code>&lt;div class=\"actions\"&gt;\n  &lt;%= submit_tag 'Join', name: 'join_event', class: \"btn btn-sm btn-success \" %&gt;\n&lt;/div&gt; \n</code></pre>\n\n<p>and the code I am not sure how to add it to the controller I was thinking of adding a method called join_event but not sure of the syntax to add where it adds a 'activity' to a user.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1527556664, "post_id": 50574820, "comment_id": 88159453, "body": "That&#39;s not the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many\" rel=\"nofollow noreferrer\">signature of <code>has_many</code> in Rails 5.2</a>. What version of Rails are you looking at?"}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1527557514, "post_id": 50574820, "comment_id": 88159595, "body": "@Schwern this is ActiveRecord 4.2.7 from Rails 4"}], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1527560237, "post_id": 50575333, "comment_id": 88160073, "body": "A lot of view helpers (such as <code>link_to</code>, <code>tag.span</code>, ...) do similar argument list interpreting so that they can pretend to have different signatures when you use them with a block. This is a fairly common pattern in Rails with all its DWIM attitude."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 1, "last_activity_date": 1527560892, "last_edit_date": 1527560892, "creation_date": 1527558876, "answer_id": 50575333, "question_id": 50574820, "link": "https://stackoverflow.com/questions/50574820/hashes-as-arguments-and-default-argument-values/50575333#50575333", "title": "Hashes as arguments and default argument values", "body": "<p>The hash was assigned to the <code>scope</code> parameter, since it was passed in as the second parameter, thus leaving <code>options</code> to get its default value of <code>{}</code>. But, ActiveRecord swaps the parameters around if you pass a hash as the second value. This is handled in <a href=\"https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/associations/builder/association.rb\" rel=\"nofollow noreferrer\"><code>Builder::Association</code></a> (which is used because <code>Builder::HasMany</code> inherits from <code>Builder:: CollectionAssociation</code>  which in turn inherits from <code>Builder::Association</code>). The <a href=\"https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/associations/builder/association.rb#L28\" rel=\"nofollow noreferrer\"><code>build</code></a> class method calls <a href=\"https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/associations/builder/association.rb#L44\" rel=\"nofollow noreferrer\"><code>create_builder</code></a> which then passes the arguments onto <a href=\"https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/associations/builder/association.rb#L50\" rel=\"nofollow noreferrer\"><code>initialize</code></a> which checks</p>\n\n<pre><code>if scope.is_a?(Hash)\n  options = scope\n  scope   = nil\nend\n</code></pre>\n\n<p>So no built-in ruby behind-the-scenes magic, <code>ActiveRecord</code> just chose to do a check to see if you passed a <code>Hash</code> as the second parameter and 'fix' it for you, instead of forcing you to pass <code>nil</code>.</p>\n\n<hr>\n\n<p><a href=\"https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/associations/builder/collection_association.rb#L17\" rel=\"nofollow noreferrer\"><code>CollectionAssociation</code></a> does override the <code>initialize</code> method, but you can see they do call super at the start of the method, making sure that <code>Association#initialize</code> gets called first and this param swapping happens.</p>\n"}, {"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1527564636, "post_id": 50575481, "comment_id": 88160939, "body": "AFAIK Rails4 still supported Ruby versions that didn&#39;t have keyword arguments. I&#39;m not certain about that but it is important to keep in mind that there are layers of history behind this stuff."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1527560489, "creation_date": 1527560489, "answer_id": 50575481, "question_id": 50574820, "link": "https://stackoverflow.com/questions/50574820/hashes-as-arguments-and-default-argument-values/50575481#50575481", "title": "Hashes as arguments and default argument values", "body": "<p>First, the definition of <code>has_many</code> changed between Rails 4 and Rails 5. Let's start with Rails 4.</p>\n\n<h1>Rails 4</h1>\n\n<p>You are correct that something fishy is going on here. Rails is cheating. I'm going to guess for backwards compatibilty with older versions of Ruby which didn't have as rich an argument syntax as now.</p>\n\n<p><code>name</code>, <code>scope</code>, and <code>options</code> are all positional arguments. We can define <code>has_many</code> to see what's going on.</p>\n\n<pre><code>def has_many(name, scope = nil, options = {}, &amp;extension)\n  puts \"name: #{name}\"\n  puts \"scope: #{scope}\"\n  puts \"options: #{options}\"\n  puts \"extension: #{extension}\"\nend\n</code></pre>\n\n<p>If we run <code>has_many :subscribers, through: :subscriptions, source: :user</code>...</p>\n\n<pre><code>name: subscribers\nscope: {:through=&gt;:subscriptions, :source=&gt;:user}\noptions: {}\nextension: \n</code></pre>\n\n<p>Well that's not right. <a href=\"https://github.com/rails/rails/blob/v4.2.10/activerecord/lib/active_record/associations.rb#L1258\" rel=\"nofollow noreferrer\">Let's look at its source</a>...</p>\n\n<pre><code>def has_many(name, scope = nil, options = {}, &amp;extension)\n  reflection = Builder::HasMany.build(self, name, scope, options, &amp;extension)\n  Reflection.add_reflection self, name, reflection\nend\n</code></pre>\n\n<p>The arguments are passed through to <a href=\"https://github.com/rails/rails/blob/v4.2.10/activerecord/lib/active_record/associations/builder/association.rb#L28\" rel=\"nofollow noreferrer\"><code>Builder::HasMany.build</code></a> which calls <code>create_builder model, name, scope, options, &amp;block</code>. That calls <code>new(model, name, scope, options, &amp;block)</code> to create a new instance. <a href=\"https://github.com/rails/rails/blob/v4.2.10/activerecord/lib/active_record/associations/builder/association.rb#L50\" rel=\"nofollow noreferrer\">In its initializer</a> we find this...</p>\n\n<pre><code>def initialize(model, name, scope, options)\n  # TODO: Move this to create_builder as soon we drop support to activerecord-deprecated_finders.\n  if scope.is_a?(Hash)\n    options = scope\n    scope   = nil\n  end\n  ...\n</code></pre>\n\n<p>So it's just cheating. If <code>scope</code> is a hash it switches it to <code>options</code>. This is a pretty nasty hack, seeing as how the wrong arguments go through several layers of method calls before they're fixed.</p>\n\n<h1>Rails 5</h1>\n\n<p>Rails 5 changed the signature of <code>has_many</code>.</p>\n\n<pre><code>def has_many(name, scope = nil, **options, &amp;extension)\n  puts \"name: #{name}\"\n  puts \"scope: #{scope}\"\n  puts \"options: #{options}\"\n  puts \"extension: #{extension}\"\nend\n\nhas_many :subscribers, through: :subscriptions, source: :user\n</code></pre>\n\n<p>And now it works as it's supposed to.</p>\n\n<pre><code>name: subscribers\nscope: \noptions: {:through=&gt;:subscriptions, :source=&gt;:user}\nextension: \n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core-2.5.1/doc/syntax/calling_methods_rdoc.html#label-Hash+to+Keyword+Arguments+Conversion\" rel=\"nofollow noreferrer\"><code>**</code> converts keyword arguments to a hash</a> and this makes it work.</p>\n\n<ul>\n<li><code>name</code> is a required <a href=\"https://ruby-doc.org/core-2.5.1/doc/syntax/calling_methods_rdoc.html#label-Positional+Arguments\" rel=\"nofollow noreferrer\">positional argument</a>.</li>\n<li><code>scope = nil</code> is a <a href=\"https://ruby-doc.org/core-2.5.1/doc/syntax/calling_methods_rdoc.html#label-Default+Positional+Arguments\" rel=\"nofollow noreferrer\">positional argument that has a default</a>, so it's optional.</li>\n<li><code>**options</code> is a <a href=\"https://ruby-doc.org/core-2.5.1/doc/syntax/calling_methods_rdoc.html#label-Keyword+Arguments\" rel=\"nofollow noreferrer\">keyword argument</a> that will <a href=\"https://ruby-doc.org/core-2.5.1/doc/syntax/calling_methods_rdoc.html#label-Hash+to+Keyword+Arguments+Conversion\" rel=\"nofollow noreferrer\">convert the keywords into a hash</a>.</li>\n<li><code>&amp;extension</code> is a <a href=\"https://ruby-doc.org/core-2.5.1/doc/syntax/calling_methods_rdoc.html#label-Block+Argument\" rel=\"nofollow noreferrer\">block argument</a>.</li>\n</ul>\n\n<p>When you call <code>has_many :subscribers, through: :subscriptions, source: :user</code> this is what happens.</p>\n\n<ol>\n<li>Ruby needs the first positional <code>name</code> so it takes <code>:subscribers</code>.</li>\n<li>Ruby needs the second positional <code>scope</code>, but it's run out of positional, the rest of the arguments are keywords, so it uses the default <code>nil</code>.</li>\n<li>Ruby slurps up the keywords and puts them in the <code>options</code> hash.</li>\n<li><code>extension</code> is a block argument and it's fine if those are left off.</li>\n</ol>\n\n<p>You can read more about how argument processing happens in Ruby in the <a href=\"https://ruby-doc.org/core-2.5.1/doc/syntax/calling_methods_rdoc.html#label-Keyword+Arguments\" rel=\"nofollow noreferrer\">Calling Methods document</a>.</p>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 1, "accepted_answer_id": 50575481, "answer_count": 2, "score": 1, "last_activity_date": 1527562917, "creation_date": 1527554050, "last_edit_date": 1527562917, "question_id": 50574820, "link": "https://stackoverflow.com/questions/50574820/hashes-as-arguments-and-default-argument-values", "title": "Hashes as arguments and default argument values", "body": "<p>I am perusing some of the Rails internals, particularly the has_many method. It shows the following examples:</p>\n\n<pre><code>  # Option examples:\n  #   has_many :comments, -&gt; { order \"posted_on\" }\n  #   has_many :comments, -&gt; { includes :author }\n  #   has_many :people, -&gt; { where(deleted: false).order(\"name\") }, class_name: \"Person\"\n  #   has_many :tracks, -&gt; { order \"position\" }, dependent: :destroy\n  #   has_many :comments, dependent: :nullify\n  #   has_many :tags, as: :taggable\n  #   has_many :reports, -&gt; { readonly }\n  #   has_many :subscribers, through: :subscriptions, source: :user\n  def has_many(name, scope = nil, options = {}, &amp;extension)\n    reflection = Builder::HasMany.build(self, name, scope, options, &amp;extension)\n    Reflection.add_reflection self, name, reflection\n  end\n</code></pre>\n\n<p>Look at this one in particular:</p>\n\n<pre><code>has_many :subscribers, through: :subscriptions, source: :user\n</code></pre>\n\n<p>The second argument is a hash. And I noticed it gets assigned to the options local variable. But why didn't it get assigned to the scope variable, since the scope variable is the second argument in the argument list? Why was the scope variable skipped during assignment? I no that it sets a default value of nil, if no second argument is passed in, but in fact a second argument was passed in.          </p>\n"}, {"tags": ["ruby", "encryption", "rsa", "private-key", "public-key"], "answers": [{"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 6, "last_activity_date": 1527552811, "creation_date": 1527552811, "answer_id": 50574724, "question_id": 50574673, "link": "https://stackoverflow.com/questions/50574673/need-a-working-ruby-basic-rsa-private-public-key-example/50574724#50574724", "title": "Need a working Ruby basic RSA Private Public key example", "body": "<p>You base 64 encode the encrypted string, but you don\u2019t decode it before decrypting. Since the base 64 encoded string is longer than the encrypted string, and longer than the modulus, you get the error.</p>\n\n<p>Try base 64 decoding before encrypting:</p>\n\n<pre><code>my_string = pri_key.private_decrypt(Base64.decode64(encrypted_string))\n</code></pre>\n"}], "owner": {"reputation": 418, "user_id": 336879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/304a917272a2cf18e14934ad00303f90?s=128&d=identicon&r=PG", "display_name": "Adjam", "link": "https://stackoverflow.com/users/336879/adjam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1358, "favorite_count": 0, "accepted_answer_id": 50574724, "answer_count": 1, "score": 0, "last_activity_date": 1527552811, "creation_date": 1527552249, "question_id": 50574673, "link": "https://stackoverflow.com/questions/50574673/need-a-working-ruby-basic-rsa-private-public-key-example", "title": "Need a working Ruby basic RSA Private Public key example", "body": "<p>I've been able to create private and public keys with some success, and to encode a message, but on decoding the message I get thrown an error</p>\n\n<p>My code so far is:</p>\n\n<pre><code>require 'openssl'\nrequire 'base64'\n\n\nkey = OpenSSL::PKey::RSA.generate(2048)\n\npri_key = key\npub_key = key.public_key\n\nstring = 'Hello World!';\n\nrsa_public_key = OpenSSL::PKey::RSA.new(pub_key)\nencrypted_string = Base64.encode64(rsa_public_key.public_encrypt(string))\n\nputs \"Encrypted Message:\"\nputs encrypted_string\n\n# This creates an error\nmy_string = pri_key.private_decrypt(encrypted_string)\n\n\nputs \"The decoded message\"\nputs my_string\n</code></pre>\n\n<p>This throws this error after printing the encoded message</p>\n\n<pre><code>Example Decrypt.txt:25:in `private_decrypt': data greater than mod len (OpenSSL::PKey::RSAError)\n        from Example Decrypt.txt:25:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash", "nested"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1527566971, "post_id": 50574658, "comment_id": 88161467, "body": "What is your question?"}, {"owner": {"reputation": 21, "user_id": 3186276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60661bc48c22b91b9fe05cdebf5ea468?s=128&d=identicon&r=PG&f=1", "display_name": "user3186276", "link": "https://stackoverflow.com/users/3186276/user3186276"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1527571269, "post_id": 50574658, "comment_id": 88162713, "body": "The question is implied and I imagine doesn\u2019t  need to be explicit for the brilliant minds of this forum. If not, then how do I achieve the above?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1527609567, "post_id": 50574658, "comment_id": 88186373, "body": "What sawa means is: &quot;What is the specific problem with the code you have written trying to solve this problem&quot;. As it stands now, it looks like you want us to write your code for you, so it would be best if you included the code you have written, the error message you are getting, and also explain the rules how to convert the input into the output instead of just giving a single example."}, {"owner": {"reputation": 21, "user_id": 3186276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60661bc48c22b91b9fe05cdebf5ea468?s=128&d=identicon&r=PG&f=1", "display_name": "user3186276", "link": "https://stackoverflow.com/users/3186276/user3186276"}, "edited": false, "score": 0, "creation_date": 1527699583, "post_id": 50574658, "comment_id": 88229659, "body": "Understood. I have since solved this issue. Thanks to all for your assistance, code or otherwise."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1527560482, "last_edit_date": 1527560482, "creation_date": 1527554335, "answer_id": 50574846, "question_id": 50574658, "link": "https://stackoverflow.com/questions/50574658/turn-nested-hash-into-single-hash/50574846#50574846", "title": "Turn nested hash into single hash", "body": "<pre><code>h = { \"2018-05-16\"=&gt;{\n        \"ABCD\"=&gt;{\n          929119=&gt;0.14174555,\n          338296=&gt;0.13858019,\n          332058=&gt;0.13680765,\n          449614=&gt;0.13679536\n        }\n      }\n    }\n\ndat, v = h.first\n  #=&gt; [\"2018-05-16\", {\"ABCD\"=&gt;{929119=&gt;0.14174555, 338296=&gt;0.13858019,\n                               332058=&gt;0.13680765, 449614=&gt;0.13679536}}]\nloc, f = v.first\n  #=&gt; [\"ABCD\", {929119=&gt;0.14174555, 338296=&gt;0.13858019, 332058=&gt;0.13680765,\n  #             449614=&gt;0.13679536}]\ng = {\"target_date\"=&gt;dat, \"location\"=&gt;loc }\n  #=&gt; {\"target_date\"=&gt;\"2018-05-16\", \"location\"=&gt;\"ABCD\"}\nf.map { |k,v| g.merge(\"id\"=&gt;k, \"value\"=&gt;v) }\n  #=&gt; [{\"target_date\"=&gt;\"2018-05-16\", \"location\"=&gt;\"ABCD\", \"id\"=&gt;929119,\n  #     \"value\"=&gt;0.14174555},\n  #    {\"target_date\"=&gt;\"2018-05-16\", \"location\"=&gt;\"ABCD\", \"id\"=&gt;338296,\n  #     \"value\"=&gt;0.13858019},\n  #    {\"target_date\"=&gt;\"2018-05-16\", \"location\"=&gt;\"ABCD\", \"id\"=&gt;332058,\n  #     \"value\"=&gt;0.13680765},\n  #    {\"target_date\"=&gt;\"2018-05-16\", \"location\"=&gt;\"ABCD\", \"id\"=&gt;449614,\n  #     \"value\"=&gt;0.13679536}]\n</code></pre>\n\n<p>Another way--which can be generalized--follows.</p>\n\n<pre><code>h.each_with_object([]) do |(k0,v0),arr|\n  v0.each do |k1,v1|\n    v1.each.map do |k2,v2| \n      arr &lt;&lt; { \"target_date\"=&gt;k0, \"location\"=&gt;k1, \"id\"=&gt;k2, \"value\"=&gt;v2 }\n    end\n  end\nend\n  #=&gt; &lt;same as for first method&gt;\n</code></pre>\n\n<p>Note that this works with hashes having multiple dates and/or locations, such as the following.</p>\n\n<pre><code>{ \"2018-05-16\"=&gt;{ \"ABCD\"=&gt;{ 92=&gt;0.14, 44=&gt;0.13 }, \"EFGH\"=&gt;{ 12=&gt;0.24, 34=&gt;0.23 } },\n  \"2018-05-17\"=&gt;{ \"ABCD\"=&gt;{ 52=&gt;0.34, 34=&gt;0.33 }, \"EFGH\"=&gt;{ 42=&gt;0.44, 74=&gt;0.43 } } }\n</code></pre>\n\n<p>For this hash the following array would be returned.</p>\n\n<pre><code>[{\"target_date\"=&gt;\"2018-05-16\", \"location\"=&gt;\"ABCD\", \"id\"=&gt;92, \"value\"=&gt;0.14},\n {\"target_date\"=&gt;\"2018-05-16\", \"location\"=&gt;\"ABCD\", \"id\"=&gt;44, \"value\"=&gt;0.13},\n {\"target_date\"=&gt;\"2018-05-16\", \"location\"=&gt;\"EFGH\", \"id\"=&gt;12, \"value\"=&gt;0.24},\n {\"target_date\"=&gt;\"2018-05-16\", \"location\"=&gt;\"EFGH\", \"id\"=&gt;34, \"value\"=&gt;0.23},\n {\"target_date\"=&gt;\"2018-05-17\", \"location\"=&gt;\"ABCD\", \"id\"=&gt;52, \"value\"=&gt;0.34},\n {\"target_date\"=&gt;\"2018-05-17\", \"location\"=&gt;\"ABCD\", \"id\"=&gt;34, \"value\"=&gt;0.33},\n {\"target_date\"=&gt;\"2018-05-17\", \"location\"=&gt;\"EFGH\", \"id\"=&gt;42, \"value\"=&gt;0.44},\n {\"target_date\"=&gt;\"2018-05-17\", \"location\"=&gt;\"EFGH\", \"id\"=&gt;74, \"value\"=&gt;0.43}]\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3186276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60661bc48c22b91b9fe05cdebf5ea468?s=128&d=identicon&r=PG&f=1", "display_name": "user3186276", "link": "https://stackoverflow.com/users/3186276/user3186276"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 50574846, "answer_count": 1, "score": -1, "last_activity_date": 1527566959, "creation_date": 1527552043, "last_edit_date": 1527566959, "question_id": 50574658, "link": "https://stackoverflow.com/questions/50574658/turn-nested-hash-into-single-hash", "title": "Turn nested hash into single hash", "body": "<p>I want to turn this sample data:</p>\n\n<pre><code>{\"2018-05-16\"=&gt;{\n  \"ABCD\"=&gt;{929119=&gt;0.14174555, 338296=&gt;0.13858019, 332058=&gt;0.13680765, 449614=&gt;0.13679536}}}\n</code></pre>\n\n<p>into this single array of hashes:</p>\n\n<pre><code>[\n  {\"target_date\"=&gt;\"2018-05-16\", \"location\"=&gt;\"ABCD\", \"id\"=&gt;929119, \"value\"=&gt;0.14174555},\n  {\"target_date\"=&gt;\"2018-05-16\", \"location\"=&gt;\"ABCD\", \"id\"=&gt;338296, \"value\"=&gt;0.13858019},\n  {\"target_date\"=&gt;\"2018-05-16\", \"location\"=&gt;\"ABCD\", \"id\"=&gt;332058, \"value\"=&gt;0.13680765},\n  {\"target_date\"=&gt;\"2018-05-16\", \"location\"=&gt;\"ABCD\", \"id\"=&gt;449614, \"value\"=&gt;0.13679536}\n]\n</code></pre>\n"}, {"tags": ["ruby", "bash", "chef-infra", "chef-recipe"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9753902"}, "edited": false, "score": 0, "creation_date": 1527597702, "post_id": 50574872, "comment_id": 88178545, "body": "As for knowing if it is successful, I am not really sure how tableau even works tbh. I am just tasked with making a cookbook that follows the same steps as a confluence guide we have.I will ask about what success looks like for this case."}, {"owner": {"reputation": 3665, "user_id": 9797143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/173377baee1db5827d6a9be47a5c082c?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Miller", "link": "https://stackoverflow.com/users/9797143/brandon-miller"}, "edited": false, "score": 0, "creation_date": 1527597806, "post_id": 50574872, "comment_id": 88178622, "body": "All good. Just a suggestion. Everything improves with time. Sometimes getting things to work is the first and most important step."}], "tags": [], "owner": {"reputation": 3665, "user_id": 9797143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/173377baee1db5827d6a9be47a5c082c?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Miller", "link": "https://stackoverflow.com/users/9797143/brandon-miller"}, "is_accepted": true, "score": 1, "last_activity_date": 1527555226, "last_edit_date": 1527555226, "creation_date": 1527554564, "answer_id": 50574872, "question_id": 50574031, "link": "https://stackoverflow.com/questions/50574031/chef-run-bash-block-only-after-other-bash-block-on-first-run/50574872#50574872", "title": "Chef run bash block only after other bash block on first run", "body": "<p>You'll want to combine a few methods here:</p>\n\n<ul>\n<li>You want to make sure resources that are notified aren't <strong>also</strong> running on their own. So, their actions should be set to <code>:nothing</code>. That way they aren't running on their own, then being notified to run again conditionally. The action you define as part of your <a href=\"https://docs.chef.io/resource_common.html#notifications\" rel=\"nofollow noreferrer\">subscribe</a> is the action it will take when notified.</li>\n<li>You also want to be sure that the lock files are only created if the resource they lock is actually run. So, they should also be set to nothing and be notified with the <code>:create</code> action.</li>\n<li>Use Chef <a href=\"https://docs.chef.io/resource_common.html#guards\" rel=\"nofollow noreferrer\">Guards</a> to check for existence of the lock files. This way you'll still see specific output that the resource was skipped (due to guard), rather then ignored all together.</li>\n</ul>\n\n<h2>Example using your code:</h2>\n\n<h3>Use a not_if guard so the resource will not run if the file defined by the tsm_login_lock variable exists. Additionally notify the lock file to be created.</h3>\n\n<pre><code>bash 'login_tsm' do\n  user tableau_user\n  cwd tableau_user_home\n  code &lt;&lt;-EOH\n    source /etc/profile.d/tableau_server.sh\n    tsm login -u #{tableau_user} -p #{password}\n    tsm settings import -f  /home/analytics/setting_file.json\n    tsm pending-changes apply\n    tsm licenses activate -k #{key}\n    tsm register --file #{registration}\n    tsm pending-changes apply\n  EOH\n  notifies :run, \"bash[tsm_init]\", :immediately\n  notifies :create, \"file[#{tsm_login_lock}]\", :immediately\n  not_if { ::File.exist?(tsm_login_lock) }\nend\n</code></pre>\n\n<h3>Have this resource do nothing on its own unless notified by the resource it's locking</h3>\n\n<pre><code>file tsm_login_lock do\n  mode '0644'\n  content 'tableau server stareted'\n  action :nothing\nend\n</code></pre>\n\n<h3>Similarly, this resource should have a not_if guard for the init lock file. In addition it should have a default action of nothing since it receives a notification from the login resource. Finally, notify it's lock file to be created.</h3>\n\n<pre><code>bash 'tsm_init' do\n  user tableau_user\n  cwd tableau_user_home\n  code &lt;&lt;-EOH\n    tsm initialize --start-server --request-timeout 1800\n  EOH\n  action :nothing\n  not_if { ::File.exist?(tsm_init_lock) }\n  notifies :run, \"bash[tsm_2]\", :immediately\n  notifies :create, \"file[#{tsm_init_lock}]\", :immediately\nend\n</code></pre>\n\n<h3>Have this init lock file resource do nothing on it's own, should only be notified by the resource it locks</h3>\n\n<pre><code>file tsm_init_lock do\n  mode '0644'\n  content 'tableau server initialized'\n  action :nothing\nend\n</code></pre>\n\n<p><strong>Finally</strong>, I'd highly recommend finding out what you'd consider a successful login for Tableau and for init. Ask yourself how you'd check these if you logged in to the server. Use these verifications for guards instead of lock files. In general you want to use guards where ever needed to be sure resources are idempotent. Review the link above on guards for complete details on how guards work.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9753902"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 50574872, "answer_count": 1, "score": 1, "last_activity_date": 1527555226, "creation_date": 1527546185, "question_id": 50574031, "link": "https://stackoverflow.com/questions/50574031/chef-run-bash-block-only-after-other-bash-block-on-first-run", "title": "Chef run bash block only after other bash block on first run", "body": "<p>I am using chef to do this:</p>\n\n<p>I am trying to have a bash block run only after the previous one runs, simple enough, I use notify. I also want there to be a lock file check on the initial run and the second (is there a better way to make sure it only runs when the previous bash block runs?).</p>\n\n<p>Here is my current chef code:</p>\n\n<pre><code>if not File.exist? tsm_login_lock\n  bash 'login_tsm' do\n    user tableau_user\n    cwd tableau_user_home\n    code &lt;&lt;-EOH\n      source /etc/profile.d/tableau_server.sh\n      tsm login -u #{tableau_user} -p #{password}\n      tsm settings import -f  /home/analytics/setting_file.json\n      tsm pending-changes apply\n      tsm licenses activate -k #{key}\n      tsm register --file #{registration}\n      tsm pending-changes apply\n    EOH\n    notifies :run, \"bash[tsm_init]\", :immediately\n  end\n file tsm_login_lock do\n   mode '0644'\n   content 'tableau server stareted'\n end\nend\n\nif not File.exist? tsm_init_lock\n  bash 'tsm_init' do\n    user tableau_user\n    cwd tableau_user_home\n    code &lt;&lt;-EOH\n      tsm initialize --start-server --request-timeout 1800\n    EOH\n    notifies :run, \"bash[tsm_2]\", :immediately\n  end\n  file tsm_init_lock do\n    mode '0644'\n    content 'tableau server initialized'\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "websocket", "ruby-on-rails-5", "amazon-elastic-beanstalk", "passenger"], "comments": [{"owner": {"reputation": 1612, "user_id": 1146473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/798f66c6c7e53703e2a30ff911b0e884?s=128&d=identicon&r=PG", "display_name": "ekampp", "link": "https://stackoverflow.com/users/1146473/ekampp"}, "edited": false, "score": 0, "creation_date": 1527682760, "post_id": 50573641, "comment_id": 88218273, "body": "You can read a little more about the 499 error code here: <a href=\"https://httpstatuses.com/499\" rel=\"nofollow noreferrer\">httpstatuses.com/499</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "edited": false, "score": 0, "creation_date": 1527789335, "post_id": 50615735, "comment_id": 88270218, "body": "I already found and tryed this script, but it&#39;s overwritting the passenger script configuration and creating another listener in the port 80 that is used by the same passenger. And as I stated in the last part of the question, the issue is related with a gem parsing a binary string with wrong encoding."}], "tags": [], "owner": {"reputation": 599, "user_id": 7705063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37860e53fcef10930532ba0e8c0a2188?s=128&d=identicon&r=PG", "display_name": "Ricky Brown", "link": "https://stackoverflow.com/users/7705063/ricky-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1527733196, "creation_date": 1527733196, "answer_id": 50615735, "question_id": 50573641, "link": "https://stackoverflow.com/questions/50573641/actioncable-in-elasticbeanstalk-fails-with-untraceable-error/50615735#50615735", "title": "ActionCable in ElasticBeanstalk fails with untraceable error", "body": "<p>For the default Ruby AWS stack (you mentioned), you will need to edit the default nginx configuration to support websockets. The default nginx config for the Elastic Beanstalk/Ruby/Puma stack <a href=\"https://github.com/awslabs/elastic-beanstalk-docs/blob/master/configuration-files/aws-provided/security-configuration/https-redirect/ruby-puma/https-redirect-ruby-puma.config\" rel=\"nofollow noreferrer\">can be found here.</a></p>\n\n<p>Basically, you will need to add these http headers for websockets: </p>\n\n<pre><code>proxy_set_header Upgrade $http_upgrade;\nproxy_set_header Connection \"Upgrade\";\n</code></pre>\n\n<p>A way to go about doing this is to add an <code>.ebextensions</code> folder in your project's root directory, and place a config file inside with a customized version of the default configuration. Ex:</p>\n\n<pre><code># .ebextensions/001_nginx.conf\n\nfiles:\n   \"/opt/elasticbeanstalk/support/conf/webapp_healthd.conf\":\n     owner: root\n     group: root\n     mode: \"000644\"\n     content: |\n       upstream my_app {\n         server unix:///var/run/puma/my_app.sock;\n       }\n\n       log_format healthd '$msec\"$uri\"'\n                       '$status\"$request_time\"$upstream_response_time\"'\n                       '$http_x_forwarded_for';\n\n       server {\n         listen 80;\n         server_name _ localhost; # need to listen to localhost for worker tier\n\n         if ($time_iso8601 ~ \"^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2})\") {\n           set $year $1;\n           set $month $2;\n           set $day $3;\n           set $hour $4;\n         }\n\n         access_log  /var/log/nginx/access.log  main;\n         access_log /var/log/nginx/healthd/application.log.$year-$month-$day-$hour healthd;\n\n         location / {\n           proxy_pass http://my_app; # match the name of upstream directive which is defined above\n           proxy_set_header Host $host;\n           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n           proxy_http_version 1.1;\n           proxy_set_header Upgrade $http_upgrade;\n           proxy_set_header Connection \"Upgrade\";\n         }\n\n         location /assets {\n           alias /var/app/current/public/assets;\n           gzip_static on;\n           gzip on;\n           expires max;\n           add_header Cache-Control public;\n         }\n\n         location /public {\n           alias /var/app/current/public;\n           gzip_static on;\n           gzip on;\n           expires max;\n           add_header Cache-Control public;\n         }\n       }\n\ncontainer_commands:\n  99_restart_nginx:\n    command: \"service nginx restart || service nginx start\"\n</code></pre>\n\n<p>After deploying this config, If you have SSH setup for your EB instance you can SSH in and check your nginx config to see if your modified version is being used. If you're not seeing changes here or in the logs and this is not a production instance, you might want to consider rebuilding the environment from the AWS console.</p>\n"}], "owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 424, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527733196, "creation_date": 1527543354, "last_edit_date": 1527553337, "question_id": 50573641, "link": "https://stackoverflow.com/questions/50573641/actioncable-in-elasticbeanstalk-fails-with-untraceable-error", "title": "ActionCable in ElasticBeanstalk fails with untraceable error", "body": "<p>The ElasticBeanstalk is an Application Load Balancer configuration. It's a Ruby on Rails, with Passenger, Puma and NGINX (Default Ruby AWS Stack).</p>\n\n<p>I'm forcing ssl, and I have everything working perfectly, except for the websockets, that seems to be (blocked|discarded|broken). </p>\n\n<p>The first error is displayed in the console: (URL is my domain)</p>\n\n<pre><code>WebSocket connection to 'wss://&lt;URL&gt;/cable' failed: WebSocket is closed before the connection is established.\n</code></pre>\n\n<p>This request fails with <code>(OPCODE -1)</code> in the frontend.</p>\n\n<p>By checking the server logs, I have <code>access.log</code> that's showing: </p>\n\n<p><code>/cable\"499</code> which is not a very descripting error.</p>\n\n<p>And the rails <code>production.log</code> shows:</p>\n\n<pre><code>Started GET \"/cable/\" [WebSocket] for 152.170.14.251 at 2018-05-28 21:01:27 +0000\n\nSuccessfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: upgrade, HTTP_UPGRADE: websocket)\n\nRegistered connection (Z2lkOi8vYXNlc29yLWFwcC9JZGVudGl0eS81:Z2lkOi8vYXNlc29yLWFwcC9Vc2VyLzI)\n\nWebSocket error occurred: wrong number of arguments (given 2, expected 1)\n</code></pre>\n\n<p>Sometimes I saw this other error:</p>\n\n<pre><code>NoMethodError: undefined method `+' for nil:NilClass\n\nFile \"/opt/rubies/ruby-2.5.1/lib/ruby/gems/2.5.0/gems/websocket-driver-0.7.0/lib/websocket/driver/hybi.rb\" line 11 in generate_accept\nFile \"/opt/rubies/ruby-2.5.1/lib/ruby/gems/2.5.0/gems/websocket-driver-0.7.0/lib/websocket/driver/hybi.rb\" line 76 in initialize\nFile \"/opt/rubies/ruby-2.5.1/lib/ruby/gems/2.5.0/gems/websocket-driver-0.7.0/lib/websocket/driver.rb\" line 160 in new\nFile \"/opt/rubies/ruby-2.5.1/lib/ruby/gems/2.5.0/gems/websocket-driver-0.7.0/lib/websocket/driver.rb\" line 160 in rack\nFile \"/opt/rubies/ruby-2.5.1/lib/ruby/gems/2.5.0/gems/actioncable-5.2.0/lib/action_cable/connection/client_socket.rb\" line 47 in initialize\n</code></pre>\n\n<p>And that file showed that a key is missing.</p>\n\n<p>By following that error I found this issue:</p>\n\n<p><a href=\"https://github.com/rails/rails/issues/30908\" rel=\"nofollow noreferrer\">Rails Issue</a></p>\n\n<p>That lead me to this final file:</p>\n\n<p><a href=\"https://github.com/faye/websocket-driver-ruby/blob/master/lib/websocket/driver/hybi.rb#L72\" rel=\"nofollow noreferrer\">File variable that seems to be missing</a></p>\n\n<p>That finally lead me to this configurations that might be the ones missing:</p>\n\n<p><a href=\"https://github.com/faye/websocket-driver-ruby#usage\" rel=\"nofollow noreferrer\">socket.env</a></p>\n\n<p>After a lot of investigation I ended up in the gem source code, and looks like the encoding of some characters is failing and creating a weird string that ActionCable is not able to parse:</p>\n\n<p><a href=\"https://github.com/faye/websocket-driver-ruby/issues/60\" rel=\"nofollow noreferrer\">Open Issue in Github</a></p>\n"}, {"tags": ["ruby", "cucumber", "constants"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7374141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28380867bee3445026f13f1324694aa?s=128&d=identicon&r=PG&f=1", "display_name": "Plato", "link": "https://stackoverflow.com/users/7374141/plato"}, "edited": false, "score": 0, "creation_date": 1527680006, "post_id": 50579943, "comment_id": 88216346, "body": "Thank you for your answer. So, another questions is: As u can see I&#39;ve used a <code>.dup</code> method, which copies value from constant. Also, while using <code>.dup</code> I printed <code>object_id</code> of each <code>temp</code> and ID was different every time. Why in this case it works the same?"}, {"owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "reply_to_user": {"reputation": 33, "user_id": 7374141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28380867bee3445026f13f1324694aa?s=128&d=identicon&r=PG&f=1", "display_name": "Plato", "link": "https://stackoverflow.com/users/7374141/plato"}, "edited": false, "score": 0, "creation_date": 1527842720, "post_id": 50579943, "comment_id": 88288885, "body": "Examine the object id&#39;s of the things in the duplicated structure and see if those are the same. My answer is about giving you the tools to work out whats going on, I can&#39;t offer more than that, it would take too much time, sorry."}], "tags": [], "owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "is_accepted": true, "score": 0, "last_activity_date": 1527583345, "creation_date": 1527583345, "answer_id": 50579943, "question_id": 50573432, "link": "https://stackoverflow.com/questions/50573432/cucumberruby-constants-strange-behavior/50579943#50579943", "title": "[Cucumber]Ruby constants strange behavior", "body": "<p>If you debug in your step definitions and examine self you can find out the answer. The following is speculation:</p>\n\n<p>When you add a module to World this means that the contents of that module are available to every step definitions, because inside a step definition self is World. When you define a <code>Cons</code> as a constant you set a value that is designed to not be able to be changed. It lives for the life of the containing object. So <code>Cons</code> will be the same hash in every step definition (look at the object ids to confirm this). When you use def you are calling the method so you will be getting a different hash in every step definition.</p>\n"}], "owner": {"reputation": 33, "user_id": 7374141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28380867bee3445026f13f1324694aa?s=128&d=identicon&r=PG&f=1", "display_name": "Plato", "link": "https://stackoverflow.com/users/7374141/plato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 50579943, "answer_count": 1, "score": 0, "last_activity_date": 1527583345, "creation_date": 1527541723, "question_id": 50573432, "link": "https://stackoverflow.com/questions/50573432/cucumberruby-constants-strange-behavior", "title": "[Cucumber]Ruby constants strange behavior", "body": "<p>I found pretty strange behavior that I can't explain by myself. Looks like if u use Cucumber and Constants at the same time Ruby will save local variables between Scenarios.\nIn Cucumber test.feature file I have steps like this</p>\n\n<pre><code>    Feature: Test\n\n  Scenario Outline: Test outline\n    Given Set data\n      |user_id  |hash  |\n      |&lt;user_id&gt;|&lt;hash&gt;|\n\n    Examples:\n      |user_id|hash|\n      |king   |xfgh|\n\n  Scenario Outline: What is going on\n    Given Set data\n      |shop_id|\n      |&lt;shop_id&gt;|\n\n    Examples:\n      |shop_id|\n      |554    |\n</code></pre>\n\n<p>Than I have steps.rb file like this:</p>\n\n<pre><code>   Given(/^Set data$/) do |table|\n  # table is a table.hashes.keys # =&gt; [:smth]\n  temp = Constants::Cons.dup\n  table.hashes[0].each do |key, values|\n    temp[:bodyData][eval(\":#{key}\")] = values\n  end\n  puts(\"temp: #{temp}\")\nend\n</code></pre>\n\n<p>file cmodule.rb:</p>\n\n<pre><code>module Constants\n\n Cons =\n {\n     :toService =&gt; \"Microcontrol\",\n     :bodyData=&gt;{}\n }\n\nend\n</code></pre>\n\n<p>And file env.rb:</p>\n\n<pre><code>require_relative 'cmodule'\nWorld(Constants)\n</code></pre>\n\n<p>So, than I run file test.feature my output looks like this:</p>\n\n<pre><code>temp: {:toService=&gt;\"Microcontrol\", :bodyData=&gt;{:user_id=&gt;\"king\", :hash=&gt;\"xfgh\"}}\n\ntemp: {:toService=&gt;\"Microcontrol\", :bodyData=&gt;{:user_id=&gt;\"king\", :hash=&gt;\"xfgh\", :shop_id=&gt;\"554\"}}\n</code></pre>\n\n<p>So, the question is, why is my second Scenario Outline gives output like this:</p>\n\n<pre><code>temp: {:toService=&gt;\"Microcontrol\", :bodyData=&gt;{:user_id=&gt;\"king\", :hash=&gt;\"xfgh\", :shop_id=&gt;\"554\"}}\n</code></pre>\n\n<p>And not like this (that's what I've expected from scenario to do at first):</p>\n\n<pre><code>temp: {:toService=&gt;\"Microcontrol\", :bodyData=&gt;{:shop_id=&gt;\"554\"}}\n</code></pre>\n\n<p>But there's more, I've started an experiment and changed my cmodule.rb to:</p>\n\n<pre><code>module Constants\n def self.cons\n   {\n       :toService =&gt; \"Microcontrol\",\n       :bodyData=&gt;{}\n   }\n end\n\nend\n</code></pre>\n\n<p>Also changed steps.rb:</p>\n\n<pre><code>Given(/^Set data$/) do |table|\n  # table is a table.hashes.keys # =&gt; [:smth]\n  temp = Constants.cons.dup\n  table.hashes[0].each do |key, values|\n    temp[:bodyData][eval(\":#{key}\")] = values\n  end\n  puts(\"temp: #{temp}\")\nend\n</code></pre>\n\n<p>After running test.feature I've got:</p>\n\n<pre><code>temp: {:toService=&gt;\"Microcontrol\", :bodyData=&gt;{:user_id=&gt;\"king\", :hash=&gt;\"xfgh\"}}\n\ntemp: {:toService=&gt;\"Microcontrol\", :bodyData=&gt;{:shop_id=&gt;\"554\"}}\n</code></pre>\n\n<p>So, I'cant figure out why does it work with def and doesn't work with Constants?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 4, "creation_date": 1527538669, "post_id": 50572220, "comment_id": 88155515, "body": "The return value <code>{1=&gt;[0], 3=&gt;[1], 4=&gt;[2], 5=&gt;[3], 6=&gt;[4,5,6]}</code> would be easier to compute and I think you&#39;d also find it more convenient for further processing. Also, please don&#39;t be vague about what you want. For example, rather than, &quot;something like&quot;, write, &quot;the following&quot;."}, {"owner": {"reputation": 1850, "user_id": 5281047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R6JZs.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5281047/gabriel"}, "edited": false, "score": 0, "creation_date": 1527539573, "post_id": 50572220, "comment_id": 88155808, "body": "Try <code>array.each_with_index.inject(Hash.new([])) { |acc, (x, i)| acc.merge({x =&gt; acc[x] + [i]}) }</code>, it may be a better fit, as suggested by Cary."}, {"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "reply_to_user": {"reputation": 1850, "user_id": 5281047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R6JZs.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5281047/gabriel"}, "edited": false, "score": 2, "creation_date": 1527543914, "post_id": 50572220, "comment_id": 88156972, "body": "Note that there are some <a href=\"https://stackoverflow.com/q/2698460/211563\">caveats to passing <code>[]</code> to <code>Hash.new</code></a> (though they\u2019re avoided in @Gabriel\u2019s particular snippet)."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 2102958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d9c225c9d28de695546f549fe4b36f15?s=128&d=identicon&r=PG", "display_name": "Rubee", "link": "https://stackoverflow.com/users/2102958/rubee"}, "edited": false, "score": 0, "creation_date": 1527538445, "post_id": 50572494, "comment_id": 88155431, "body": "Thanks for your answer! For context Im just doing some problems, this one is to find the indices of elements in an array that sum to a given number."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 139, "user_id": 2102958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d9c225c9d28de695546f549fe4b36f15?s=128&d=identicon&r=PG", "display_name": "Rubee", "link": "https://stackoverflow.com/users/2102958/rubee"}, "edited": false, "score": 0, "creation_date": 1527539207, "post_id": 50572494, "comment_id": 88155686, "body": "@Strobes hmm well it&#39;s like Cary said in a comment .. it&#39;s better to make all values arrays"}, {"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 1, "creation_date": 1527543477, "post_id": 50572494, "comment_id": 88156877, "body": "There\u2019s nothing un-idomatic about <code>Hash.new(0)</code>, generally. It\u2019s just that the O.P. made no use of the default value in their code, which makes it wholly unnecessary in that context."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 0, "creation_date": 1527545018, "post_id": 50572494, "comment_id": 88157262, "body": "@AndrewMarshall ah ok, I had a brain fart and forgot what the argument did. Edited answer."}, {"owner": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 0, "creation_date": 1527555612, "post_id": 50572494, "comment_id": 88159271, "body": "Small quibble to the comments - I don&#39;t think the use of Hash.new(0) is &quot;unnecessary&quot; here - it&#39;s explicitly incorrect.  You could do this with Hash.new(0) in place of {} and you&#39;d get the same &quot;answer&quot; when you inspect the hash.  Where it suddenly becomes wrong is when you ask for result[:d], which should be giving you the location of the symbol :d in the array.  The hash created with a default of 0 will dutifully report that result[:d] is 0, which is almost certainly not what the OP is looking for."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 3, "last_activity_date": 1527577735, "last_edit_date": 1527577735, "creation_date": 1527535695, "answer_id": 50572494, "question_id": 50572220, "link": "https://stackoverflow.com/questions/50572220/create-a-hash-out-of-an-array-where-the-values-are-the-indices-of-the-elements/50572494#50572494", "title": "Create a hash out of an array where the values are the indices of the elements", "body": "<p>You can change the logic to special-case the situation when the key already exists, turning it into an array and pushing the new index:</p>\n\n<pre><code>arr = %i{a a b a c}\n\nresult = arr.each.with_object({}).with_index do |(elem, memo), idx|\n  memo[elem] = memo.key?(elem) ? [*memo[elem], idx] : idx\nend\n\nputs result\n# =&gt; {:a=&gt;[0, 1, 3], :b=&gt;2, :c=&gt;4}\n</code></pre>\n\n<p>It's worth mentioning, though, that whatever you're trying to do here could possibly be accomplished in a different way ... we have no context. In general, it's a good idea to keep key-val data types uniform, e.g. the fact that values here can be numbers or arrays is a bit of a code smell.</p>\n\n<p>Also note that it doesn't make sense to use <code>Hash.new(0)</code> here unless you're intentionally setting a default value (which there's no reason to do). Use <code>{}</code> instead</p>\n"}, {"comments": [{"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 0, "creation_date": 1527543660, "post_id": 50572820, "comment_id": 88156915, "body": "Why <code>map!</code> instead of <code>map</code> at the start?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 0, "creation_date": 1527557493, "post_id": 50572820, "comment_id": 88159591, "body": "@AndrewMarshall, yes. Why? Actually it is not needed. I updated."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 2, "last_activity_date": 1527572393, "last_edit_date": 1527572393, "creation_date": 1527537601, "answer_id": 50572820, "question_id": 50572220, "link": "https://stackoverflow.com/questions/50572220/create-a-hash-out-of-an-array-where-the-values-are-the-indices-of-the-elements/50572820#50572820", "title": "Create a hash out of an array where the values are the indices of the elements", "body": "<p>I'm adding my two cents:</p>\n\n<pre><code>array = [1,3,4,5,6,6,6,8,8,8,9,7,7,7]\n\nhash = {}\narray.map.with_index {|val, idx| [val, idx]}.group_by(&amp;:first).map do |k, v|\n  hash[k] = v[0][1] if v.size == 1\n  hash[k] = v.map(&amp;:last) if v.size &gt; 1\nend\n\np hash #=&gt; {1=&gt;0, 3=&gt;1, 4=&gt;2, 5=&gt;3, 6=&gt;[4, 5, 6], 8=&gt;[7, 8, 9], 9=&gt;10, 7=&gt;[11, 12, 13]}\n</code></pre>\n\n<p>It fails with duplicated element not adjacent, of course.</p>\n\n<p>This is the expanded version, step by step, to show how it works.</p>\n\n<p>The basic idea is to build a temporary array with pairs of value and index, then work on it.</p>\n\n<pre><code>array = [1,3,4,5,6,6,6]\n\ntmp_array = []\narray.each_with_index do |val, idx|\n  tmp_array &lt;&lt; [val, idx]\nend\np tmp_array #=&gt; [[1, 0], [3, 1], [4, 2], [5, 3], [6, 4], [6, 5], [6, 6]]\n\ntmp_hash = tmp_array.group_by { |e| e[0] }\np tmp_hash #=&gt; {1=&gt;[[1, 0]], 3=&gt;[[3, 1]], 4=&gt;[[4, 2]], 5=&gt;[[5, 3]], 6=&gt;[[6, 4], [6, 5], [6, 6]]}\n\nhash = {}\ntmp_hash.map do |k, v|\n  hash[k] = v[0][0] if v.size == 1\n  hash[k] = v.map {|e| e[1]} if v.size &gt; 1\nend\n\np hash #=&gt; {1=&gt;1, 3=&gt;3, 4=&gt;4, 5=&gt;5, 6=&gt;[4, 5, 6]}\n</code></pre>\n\n<p>It can be written as one line as:</p>\n\n<pre><code>hash = {}\narray.map.with_index.group_by(&amp;:first).map { |k, v| v.size == 1 ? hash[k] = v[0][1] : hash[k] = v.map(&amp;:last) }\np hash\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 2102958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d9c225c9d28de695546f549fe4b36f15?s=128&d=identicon&r=PG", "display_name": "Rubee", "link": "https://stackoverflow.com/users/2102958/rubee"}, "edited": false, "score": 0, "creation_date": 1527622782, "post_id": 50573846, "comment_id": 88192839, "body": "Thanks for the detailed answer \ud83d\udc4d"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1527560109, "last_edit_date": 1527560109, "creation_date": 1527544779, "answer_id": 50573846, "question_id": 50572220, "link": "https://stackoverflow.com/questions/50572220/create-a-hash-out-of-an-array-where-the-values-are-the-indices-of-the-elements/50573846#50573846", "title": "Create a hash out of an array where the values are the indices of the elements", "body": "<p>If you are prepared to accept</p>\n\n<pre><code>{ 1=&gt;[0], 3=&gt;[1], 4=&gt;[2], 5=&gt;[3], 6=&gt;[4,5,6] }\n</code></pre>\n\n<p>as the return value you may write the following.</p>\n\n<pre><code>array.each_with_index.group_by(&amp;:first).transform_values { |v| v.map(&amp;:last) }\n  #=&gt; {1=&gt;[0], 3=&gt;[1], 4=&gt;[2], 5=&gt;[3], 6=&gt;[4, 5, 6]}\n</code></pre>\n\n<p>The first step in this calculation is the following.</p>\n\n<pre><code>array.each_with_index.group_by(&amp;:first)\n  #=&gt; {1=&gt;[[1, 0]], 3=&gt;[[3, 1]], 4=&gt;[[4, 2]], 5=&gt;[[5, 3]], 6=&gt;[[6, 4], [6, 5], [6, 6]]}\n</code></pre>\n\n<p>This may help readers to follow the subsequent calculations.</p>\n\n<p>I think you will find this return value generally more convenient to use than the one given in the question.</p>\n\n<p>Here are a couple of examples where it's clearly preferable for all values to be arrays. Let:</p>\n\n<pre><code>h_orig = { 1=&gt;0,   3=&gt;1,   4=&gt;2,   5=&gt;3,   6=&gt;[4,5,6] }\nh_mod    { 1=&gt;[0], 3=&gt;[1], 4=&gt;[2], 5=&gt;[3], 6=&gt;[4,5,6] }\n</code></pre>\n\n<p><em>Create a hash <code>h</code> whose keys are unique elements of <code>array</code> and whose values are the numbers of times the key appears in the array</em></p>\n\n<pre><code>h_mod.transform_values(&amp;:count)\n  #=&gt; {1=&gt;1, 3=&gt;1, 4=&gt;1, 5=&gt;1, 6=&gt;3}\nh_orig.transform_values { |v| v.is_a?(Array) ? v.count : 1 }\n</code></pre>\n\n<p><em>Create a hash <code>h</code> whose keys are unique elements of <code>array</code> and whose values equal the index of the first instance of the element in the array.</em></p>\n\n<pre><code>h_mod.transform_values(&amp;:min)\n  #=&gt; {1=&gt;0, 3=&gt;1, 4=&gt;2, 5=&gt;3, 6=&gt;4}\nh_orig.transform_values { |v| v.is_a?(Array) ? v.min : v }\n</code></pre>\n\n<p>In these examples, given <code>h_orig</code>, we could alternatively convert values that are indices to arrays containing a single index.</p>\n\n<pre><code>h_orig.transform_values { |v| [*v].count }\nh_orig.transform_values { |v| [*v].min }\n</code></pre>\n\n<p>This is hardly proof that it is generally more convenient for all values to be arrays, but that has been my experience and the experience of many others.</p>\n"}], "owner": {"reputation": 139, "user_id": 2102958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d9c225c9d28de695546f549fe4b36f15?s=128&d=identicon&r=PG", "display_name": "Rubee", "link": "https://stackoverflow.com/users/2102958/rubee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 50572820, "answer_count": 3, "score": -1, "last_activity_date": 1527577735, "creation_date": 1527534073, "last_edit_date": 1527567351, "question_id": 50572220, "link": "https://stackoverflow.com/questions/50572220/create-a-hash-out-of-an-array-where-the-values-are-the-indices-of-the-elements", "title": "Create a hash out of an array where the values are the indices of the elements", "body": "<p>I have an array and I want to create a hash whose keys are the elements of the array and whose values are (an array of) the indices of the array. I want to get something like:</p>\n\n<pre><code>array = [1,3,4,5]\n... # =&gt; {1=&gt;0, 3=&gt;1, 4=&gt;2, 5=&gt;3}\n\narray = [1,3,4,5,6,6,6]\n... # =&gt; {1=&gt;0, 3=&gt;1, 4=&gt;2, 5=&gt;3, 6=&gt;[4,5,6]}\n</code></pre>\n\n<p>This code:</p>\n\n<pre><code>hash = Hash.new 0\narray.each_with_index do |x, y|\n  hash[x] = y\nend\n</code></pre>\n\n<p>works fine only if I don't have duplicate elements. When I have duplicate elements, it does not.</p>\n\n<p>Any idea on how I can get something like this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1527532776, "post_id": 50571927, "comment_id": 88153498, "body": "Your automated tests pass if you leave out the <code>require &#39;csv&#39;</code>, right?"}, {"owner": {"reputation": 372, "user_id": 9141855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68f4ad4f0df2aaf0d37f23cf960ce52?s=128&d=identicon&r=PG&f=1", "display_name": "Max Forasteiro", "link": "https://stackoverflow.com/users/9141855/max-forasteiro"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1527533278, "post_id": 50571927, "comment_id": 88153662, "body": "yeah, but that ensures that will it works on normal execution?"}, {"owner": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "edited": false, "score": 0, "creation_date": 1527533916, "post_id": 50571927, "comment_id": 88153884, "body": "Personally I would just to indicated that it is being used in that file. In my experience I work with CSV in a service or lib file and it feels better to add the <code>require</code> and give it a more rounded look. This is even more true if the file could be run independent or rails. (I do write ruby scripts without rails)"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1527534670, "post_id": 50571927, "comment_id": 88154130, "body": "It&#39;s in the stdlib, not a gem. You can put the require call in application.rb and use it from everywhere"}], "answers": [{"comments": [{"owner": {"reputation": 1856, "user_id": 848915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/uTSIa.png?s=128&g=1", "display_name": "Daryll Santos", "link": "https://stackoverflow.com/users/848915/daryll-santos"}, "edited": false, "score": 0, "creation_date": 1527561601, "post_id": 50573202, "comment_id": 88160335, "body": "I concur, great answer. Is there a specific con to multiple <code>require &#39;csv&#39;</code>s? From my understanding doing a multiple require would just return <code>false</code>. So just the performance hit of Ruby checking if the CSV library is loaded?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 1856, "user_id": 848915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/uTSIa.png?s=128&g=1", "display_name": "Daryll Santos", "link": "https://stackoverflow.com/users/848915/daryll-santos"}, "edited": false, "score": 1, "creation_date": 1527584238, "post_id": 50573202, "comment_id": 88169573, "body": "@DaryllSantos Not really; the performance cost of multiple <code>require</code>s is negligible (and will only happen when first parsing the file, as you say). The only real &quot;downside&quot; to having multiple <code>require</code> statements is cluttering the code - which, again, isn&#39;t a big deal for the sake of just one line!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1527584295, "post_id": 50573202, "comment_id": 88169602, "body": "On the rare occasion that you do need to force re-evaluation of a file, you should use <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-load\" rel=\"nofollow noreferrer\"><code>load</code></a> instead of <code>require</code>."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 11, "last_activity_date": 1527540700, "last_edit_date": 1527540700, "creation_date": 1527540012, "answer_id": 50573202, "question_id": 50571927, "link": "https://stackoverflow.com/questions/50571927/do-i-really-need-to-require-csv-gem-with-rails/50573202#50573202", "title": "Do I really need to require csv gem with Rails?", "body": "<p>The <a href=\"https://ruby-doc.org/stdlib/libdoc/csv/rdoc/CSV.html\" rel=\"noreferrer\"><code>CSV</code> library</a> is part of the ruby standard library; it is not a gem (i.e. a third party library).</p>\n\n<p>As with all of the standard library (unlike the <em>core</em> library), <code>csv</code> is not automatically loaded by the ruby interpreter. So yes, <strong>somewhere</strong> in your application you do need to <code>require</code> it:</p>\n\n<pre><code>irb(main):001:0&gt; CSV\nNameError: uninitialized constant CSV\n        from (irb):1\n        from /Users/tomlord/.rbenv/versions/2.4.4/bin/irb:11:in `&lt;main&gt;'\nirb(main):002:0&gt; require 'csv'\n=&gt; true\nirb(main):003:0&gt; CSV\n=&gt; CSV\n</code></pre>\n\n<p>In a large project such as a rails application, you may find that <code>csv</code> has actually been already loaded; perhaps somewhere \"obscure\" like within a gem, or somewhere in <code>config/initializers/*</code>, or <code>config/application.rb</code>.</p>\n\n<p>However, it's generally a bad idea to rely on libraries being loaded in \"unrelated\" places like this; doing so could lead to to inadvertently breaking other code when you change it, or gradually loading more and more libraries here, even when some are no longer needed.</p>\n\n<p>So to cut a long story short: Yes, I would recommend writing <code>require 'csv'</code> at the top of any file which uses the <code>CSV</code> library. Or, within a larger project which will <em>clearly</em> need this library loaded and used in many places, you <em>could</em> consider just loading it globally in places like <code>config/application.rb</code></p>\n"}], "owner": {"reputation": 372, "user_id": 9141855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68f4ad4f0df2aaf0d37f23cf960ce52?s=128&d=identicon&r=PG&f=1", "display_name": "Max Forasteiro", "link": "https://stackoverflow.com/users/9141855/max-forasteiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1140, "favorite_count": 1, "accepted_answer_id": 50573202, "answer_count": 1, "score": 5, "last_activity_date": 1527540700, "creation_date": 1527532613, "question_id": 50571927, "link": "https://stackoverflow.com/questions/50571927/do-i-really-need-to-require-csv-gem-with-rails", "title": "Do I really need to require csv gem with Rails?", "body": "<p>My question is simple:</p>\n\n<p>Do I have to <code>require 'csv'</code> on a class using Ruby on Rails?</p>\n\n<p>If i open a <code>rails console</code> and tryied to use CSV gem it works, but do I have to do that in the file?</p>\n"}, {"tags": ["ruby", "internationalization", "padrino"], "comments": [{"owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "edited": false, "score": 0, "creation_date": 1527618948, "post_id": 50571922, "comment_id": 88191021, "body": "I tried Sinatra way <code>get &quot;&#47;category&quot;, &quot;&#47;kategorie&quot; do</code> It works, but how to do it in padrino still I cannot handle. I need two names for one controller?"}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "is_accepted": false, "score": 0, "last_activity_date": 1527669436, "creation_date": 1527669436, "answer_id": 50600043, "question_id": 50571922, "link": "https://stackoverflow.com/questions/50571922/padrino-framework-i18n-routes-translation/50600043#50600043", "title": "Padrino framework I18n routes translation", "body": "<p>I will answer myself, better way is to handle multiple routes, by Padrino or Sinatra style, I am trying to do according the documentation, but still not working</p>\n"}], "owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527669436, "creation_date": 1527532583, "question_id": 50571922, "link": "https://stackoverflow.com/questions/50571922/padrino-framework-i18n-routes-translation", "title": "Padrino framework I18n routes translation", "body": "<p>I have a question about localization, I am trying to do multilingual routes, using I18n.</p>\n\n<p>I am using translations in my project, but, I would like to do this</p>\n\n<pre><code>get \"/#{I18n.t('routes.kategorie')}\" do ...\n</code></pre>\n\n<p>but, loading crashes on\n! Unable to load application: Mustermann::CompileError: capture name can't be empty: \"/translation missing: cs.routes.kategorie\"\nbundler: failed to load command: puma (/usr/local/bin/puma)\nMustermann::CompileError: capture name can't be empty: \"/translation missing: cs.routes.kategorie\"\nbut when I start my app (without that route) with pry, I can use this translation</p>\n\n<pre><code>[3] pry(#&lt;Osadababa::App&gt;)&gt; t('routes.kategorie')\n=&gt; \"kategorie\"\n[4] pry(#&lt;Osadababa::App&gt;)&gt; I18n.locale = :en\n=&gt; :en\n[5] pry(#&lt;Osadababa::App&gt;)&gt; t('routes.kategorie')\n=&gt; \"category\"\n</code></pre>\n\n<p>For both languages.\nI am working in toplevel app.</p>\n\n<p>Please any suggestions?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "introspection", "delegation"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1527534417, "post_id": 50571986, "comment_id": 88154046, "body": "You could use <a href=\"http://ruby-doc.org/core-2.4.0/Module.html#method-i-3C\" rel=\"nofollow noreferrer\">Module#&lt;</a> in your definition of <code>is_a?</code>.."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1527533588, "last_edit_date": 1527533588, "creation_date": 1527532861, "answer_id": 50571986, "question_id": 50571634, "link": "https://stackoverflow.com/questions/50571634/ruby-is-a-and-instance-of-in-basicobject/50571986#50571986", "title": "Ruby: is_a? and instance_of? in BasicObject", "body": "<p><code>::Kernel.send(name,*args, &amp;blk)</code> calls the method <code>name</code> on the class <code>Kernel</code> with the arguments <code>args</code> and the block <code>&amp;blk</code>.</p>\n\n<p>When you run <code>my.is_a? My</code> <code>name</code> is <code>:is_a?</code>, <code>*args</code> is <code>My</code>, and <code>&amp;blk</code> is <code>nil</code>. You're really running <code>Kernel.is_a? My</code>.</p>\n\n<p>Instead, if you want to reimplement <code>is_a?</code> for <code>BasicObject</code> you can walk your class's <code>ancestors</code>...</p>\n\n<pre><code>  def is_a?(target)\n    # I don't know how to get the current class from an instance\n    # that isn't an Object, so I'm hard coding the class instead.\n    return ::My.ancestors.include?(target)\n  end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 841, "user_id": 6231595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4sEPs.jpg?s=128&g=1", "display_name": "MVP", "link": "https://stackoverflow.com/users/6231595/mvp"}, "edited": false, "score": 0, "creation_date": 1527590639, "post_id": 50578756, "comment_id": 88173713, "body": "Good idea of the MyKernel, it was what I was looking for. Thank you"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1527579507, "last_edit_date": 1527579507, "creation_date": 1527579114, "answer_id": 50578756, "question_id": 50571634, "link": "https://stackoverflow.com/questions/50571634/ruby-is-a-and-instance-of-in-basicobject/50578756#50578756", "title": "Ruby: is_a? and instance_of? in BasicObject", "body": "<p>You can steal <code>is_a?</code> from <code>Kernel</code>:</p>\n\n<pre><code>class My &lt; BasicObject\n  define_method(:is_a?, ::Kernel.method(:is_a?))\nend\n\nm = My.new\nm.is_a?(My)          #=&gt; true\nm.is_a?(BasicObject) #=&gt; true\nm.is_a?(Object)      #=&gt; false\n</code></pre>\n\n<p>If you're going to build your own object hierarchy, you could also define your own <code>Kernel</code>, something like:</p>\n\n<pre><code>module MyKernel\n  [:is_a?, :instance_of?, :class].each do |m|\n    define_method(m, ::Kernel.method(m))\n  end\nend\n\nclass My &lt; BasicObject\n  include ::MyKernel\nend\n</code></pre>\n"}], "owner": {"reputation": 841, "user_id": 6231595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4sEPs.jpg?s=128&g=1", "display_name": "MVP", "link": "https://stackoverflow.com/users/6231595/mvp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 50578756, "answer_count": 2, "score": 0, "last_activity_date": 1527579507, "creation_date": 1527530990, "question_id": 50571634, "link": "https://stackoverflow.com/questions/50571634/ruby-is-a-and-instance-of-in-basicobject", "title": "Ruby: is_a? and instance_of? in BasicObject", "body": "<p>How do is_a? and instance_of? methods work with a subclass of BasicObject ?</p>\n\n<pre><code>class My &lt; BasicObject\n  DELEGATE = [:is_a?, :instance_of?]\n  def method_missing(name, *args, &amp;blk)\n    superclass unless DELEGATE.include? name\n    ::Kernel.send(name,*args, &amp;blk) \n  end\nend\n\nmy = My.new\nmy.is_a? BasicObject  #=&gt; true\nmy.is_a? My           #=&gt; false ???\nmy.instance_of? My    #=&gt; false ???\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems", "mailboxer"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1527536810, "post_id": 50571501, "comment_id": 88154912, "body": "So <code>GET &#47;users&#47;:id</code> (i.e. <code>UsersController#show</code>) uses that <code>show.html.erb</code> view and that view uses the <code>_conversation.html.erb</code> partial? But <code>UsersController#show</code> doesn&#39;t set <code>@conversation</code>? BTW, I generally find that using instance variables to tunnel information into partials just leads to pain and suffering, things are easier to understand when you&#39;re more explicit about how the data moves around."}, {"owner": {"reputation": 467, "user_id": 5323216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206553142180222/picture?type=large", "display_name": "Aly Dabbous", "link": "https://stackoverflow.com/users/5323216/aly-dabbous"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1527539244, "post_id": 50571501, "comment_id": 88155702, "body": "No show.html of Users model renders the show.html of the conversations_controller. That&#39;s it. Why do I need to set @conversation to in the UsersController#show?"}, {"owner": {"reputation": 467, "user_id": 5323216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206553142180222/picture?type=large", "display_name": "Aly Dabbous", "link": "https://stackoverflow.com/users/5323216/aly-dabbous"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1527539370, "post_id": 50571501, "comment_id": 88155747, "body": "@muistooshort tagging u"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1527539915, "post_id": 50571501, "comment_id": 88155904, "body": "The only <code>receipts_for</code> call you have is <code>@conversation.receipts_for</code> in the partial, the only thing I see that uses that partial is <code>show.html.erb</code> for (apparently) your users. The error is telling you that <code>@conversation</code> is <code>nil</code> in the partial. &quot;show.html of Users model renders the show.html of the conversations_controller&quot; doesn&#39;t make sense to me; models don&#39;t render anything, controllers do; methods in <code>ConversationsController</code> render views from <code>app&#47;views&#47;conversations&#47;</code> unless you make special arrangements."}], "answers": [{"comments": [{"owner": {"reputation": 467, "user_id": 5323216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206553142180222/picture?type=large", "display_name": "Aly Dabbous", "link": "https://stackoverflow.com/users/5323216/aly-dabbous"}, "edited": false, "score": 0, "creation_date": 1527585745, "post_id": 50573907, "comment_id": 88170609, "body": "Hi @Ginnie :) Thanks for helping out. I&#39;m gradually trying to understand the problem and the cause for error. But can you elaborate more on what you mean by: &quot;That suggests to me that you&#39;re looking for a conversation based a mailbox belonging to the current_user, which might be what you want (in which case, your models need to have the appropriate associations defined)&quot;. What associations exactly should I make in the model? And what model exactly? The User model? Or the conversation model? Sorry if I&#39;m not getting this! And thank you for being patient with me . I&#39;m still a newbie in all this!"}, {"owner": {"reputation": 247, "user_id": 8481019, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-esk-uHv4jQA/AAAAAAAAAAI/AAAAAAAABLU/xYKQmyqp6KU/photo.jpg?sz=128", "display_name": "Ginnie Hench", "link": "https://stackoverflow.com/users/8481019/ginnie-hench"}, "reply_to_user": {"reputation": 467, "user_id": 5323216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206553142180222/picture?type=large", "display_name": "Aly Dabbous", "link": "https://stackoverflow.com/users/5323216/aly-dabbous"}, "edited": false, "score": 0, "creation_date": 1527602999, "post_id": 50573907, "comment_id": 88182153, "body": "After posting my comment, I came across a Go Rails episode, which is implementing the same mailboxer gem. The author has a link to the source code so you can see how they set everything up. They are using the same value assignment that you have, so you can probably ignore my advice about the cumbersome value assignment for this particular problem.   Episode: <a href=\"https://gorails.com/episodes/in-app-messaging-between-users\" rel=\"nofollow noreferrer\">gorails.com/episodes/in-app-messaging-between-users</a> Code on GitHub: <a href=\"https://github.com/gorails-screencasts/gorails-episode-105/blob/master/app/models/user.rb\" rel=\"nofollow noreferrer\">github.com/gorails-screencasts/gorails-episode-105/blob/mast&zwnj;&#8203;er/&hellip;</a>"}, {"owner": {"reputation": 247, "user_id": 8481019, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-esk-uHv4jQA/AAAAAAAAAAI/AAAAAAAABLU/xYKQmyqp6KU/photo.jpg?sz=128", "display_name": "Ginnie Hench", "link": "https://stackoverflow.com/users/8481019/ginnie-hench"}, "reply_to_user": {"reputation": 467, "user_id": 5323216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206553142180222/picture?type=large", "display_name": "Aly Dabbous", "link": "https://stackoverflow.com/users/5323216/aly-dabbous"}, "edited": false, "score": 0, "creation_date": 1527603055, "post_id": 50573907, "comment_id": 88182199, "body": "If you are new to Rails, I would spend time understanding how to set up has_many and belongs_to associations and look at what methods you get when you have those associations set up properly."}], "tags": [], "owner": {"reputation": 247, "user_id": 8481019, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-esk-uHv4jQA/AAAAAAAAAAI/AAAAAAAABLU/xYKQmyqp6KU/photo.jpg?sz=128", "display_name": "Ginnie Hench", "link": "https://stackoverflow.com/users/8481019/ginnie-hench"}, "is_accepted": true, "score": 2, "last_activity_date": 1527601989, "last_edit_date": 1527601989, "creation_date": 1527545196, "answer_id": 50573907, "question_id": 50571501, "link": "https://stackoverflow.com/questions/50571501/undefined-method-receipts-for-for-nilnilclass-mailboxer-gem-rails/50573907#50573907", "title": "(undefined method `receipts_for&#39; for nil:NilClass - MailBoxer Gem Rails", "body": "<p>I\u2019ll piggy-back on what <a href=\"https://stackoverflow.com/users/479863/mu-is-too-short\">@mu is too short</a> said. It\u2019s important to pay attention to the whole error message.  \u201cundefined method receipts_for for nil:NilClass\u201d is telling you that the receiver of the  <code>receipts_for</code> method is nil.  <code>@conversation.receipts_for(current_user)</code> looks to be the only place where <code>receipts_for</code> is used, so I would start debugging by making sure <code>@conversation</code> is assigned the value of an existing ActiveRecord-backed conversation object.</p>\n\n<p>There seems to be too a lot going on, so I don't know how to offer you a quick fix. The value assignment in your <code>ConversationsController#show</code> method, <code>@conversation= current_user.mailbox.conversation.find(params[:id])</code> looks cumbersome. That suggests to me that you're looking for a <code>conversation</code> based on a <code>mailbox</code> belonging to the <code>current_user</code>, which might be what you want (in which case, you need to have the appropriate <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">associations</a> defined in your models). </p>\n\n<p>However, since the chain ends with <code>conversation.find(params[:id])</code>, I'm guessing that <code>current_user.mailbox</code> is not needed. Alternatively, if your <code>params</code> don't actually have a conversation id, then maybe that's what you need to focus on.</p>\n\n<p>The good news is you can probably figure out how to define <code>@conversation</code> if you stick <a href=\"https://github.com/deivid-rodriguez/byebug\" rel=\"nofollow noreferrer\">byebug</a> (or <a href=\"https://github.com/pry/pry\" rel=\"nofollow noreferrer\">binding.pry</a>, depending on what you have installed) at the top of your <code>show</code> method and in your view partial:</p>\n\n<pre><code># In the controller:\n\n  def show\n    binding.pry\n    @conversation = current_user.mailbox.conversation.find(params[:id])\n  end\n\n\n# in the view\n&lt;% binding.pry %&gt;\n</code></pre>\n"}], "owner": {"reputation": 467, "user_id": 5323216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206553142180222/picture?type=large", "display_name": "Aly Dabbous", "link": "https://stackoverflow.com/users/5323216/aly-dabbous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 50573907, "answer_count": 1, "score": 0, "last_activity_date": 1527601989, "creation_date": 1527530337, "question_id": 50571501, "link": "https://stackoverflow.com/questions/50571501/undefined-method-receipts-for-for-nilnilclass-mailboxer-gem-rails", "title": "(undefined method `receipts_for&#39; for nil:NilClass - MailBoxer Gem Rails", "body": "<p>I'm using the mailboxer gem to build a messaging system between users for my rails application. For some reason, I'm getting this error: </p>\n\n<p>(undefined method `receipts_for' for nil:NilClass) </p>\n\n<p>Maybe it's because I should define 'receipts_for' somewhere in my controller or in the mailboxer.rb? I tried a few things.. but unfortunately none of them were successful. </p>\n\n<p>This is my routes.rb: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Rails.application.routes.draw do\r\n  root   'static_pages#home'\r\n  get    '/help',    to: 'static_pages#help'\r\n  get    '/about',   to: 'static_pages#about'\r\n  get    '/contact', to: 'static_pages#contact'\r\n  get    '/signup',  to: 'users#new'\r\n  get    '/login',   to: 'sessions#new'\r\n  get    'search/index'\r\n  post   '/login',   to: 'sessions#create'\r\n  delete '/logout',  to: 'sessions#destroy'\r\n  resources :users do\r\n    member do\r\n      get :following, :followers\r\n    end\r\n  end\r\n  resources :conversations do\r\n    resources :messages\r\n  end\r\n  resources :account_activations, only: [:edit]\r\n  resources :password_resets,     only: [:new, :create, :edit, :update]\r\n  resources :microposts,          only: [:create, :destroy]\r\n  resources :relationships,       only: [:create, :destroy]\r\n  resources :searches\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This is my conversations controller: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class ConversationsController &lt; ApplicationController\r\n\r\n  def show\r\n    @conversation = current_user.mailbox.conversation.find(params[:id])\r\n  end\r\n\r\n\r\n  def new\r\n    @recipients = User.find(params[:user_id])\r\n  end\r\n\r\n  def create\r\n    recipient = User.find(params[:user_id])\r\n    receipt = current_user.send_message(recipient, params[:body])\r\n    redirect_to conversation_path(receipt.conversation)\r\n  end\r\n\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This is my messages_controller: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class MessagesController &lt; ApplicationController\r\n  before_action :set_conversation\r\n\r\n  def create\r\n    receipt = current_user.send_message(@conversation, body)\r\n    redirect_to receipt.conversation\r\n  end\r\n\r\n  private\r\n\r\n  def set_conversation\r\n    @conversation = current_user.mailbox.conversations.find(params[:conversation_id])\r\n  end\r\n\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The messaging system I'm building precisely, is a messaging system where the 'current_user' can go to the profile page of any user on the application and message him/her via the profile page. So this means that I'm rendering show.html.erb of the conversation model inside the show.html.erb of my users model. Here is the code of both views: </p>\n\n<p>show.html.erb - Users Model:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;% provide(:title, @user.name) %&gt;\r\n&lt;div class=\"row\"&gt;\r\n  &lt;aside class=\"col-md-4\"&gt;\r\n    &lt;section&gt;\r\n      &lt;h1&gt;\r\n        &lt;%= gravatar_for @user %&gt;\r\n        &lt;%= @user.name %&gt;\r\n      &lt;/h1&gt;\r\n    &lt;/section&gt;\r\n    &lt;section class=\"stats\"&gt;\r\n      &lt;%= render 'shared/stats' %&gt;\r\n    &lt;/section&gt;\r\n      &lt;h6&gt;\r\n        &lt;%= @user.gender %&gt;\r\n      &lt;/h6&gt;\r\n    &lt;%= render \"conversations/conversation\" %&gt;\r\n  &lt;/aside&gt;\r\n  &lt;div class=\"col-md-8\"&gt;\r\n    &lt;%= render 'follow_form' if logged_in? %&gt;\r\n    &lt;% if @user.microposts.any? %&gt;\r\n      &lt;h3&gt;Microposts (&lt;%= @user.microposts.count %&gt;)&lt;/h3&gt;\r\n      &lt;ol class=\"microposts\"&gt;\r\n        &lt;%= render @microposts %&gt;\r\n      &lt;/ol&gt;\r\n      &lt;%= will_paginate @microposts %&gt;\r\n    &lt;% end %&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>_conversation.html.erb - show view of the conversations model. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;% @conversation.receipts_for(current_user).each do |receipt| %&gt;\r\n    &lt;div&gt;\r\n        &lt;%= receipt.message.body %&gt;\r\n    &lt;/div&gt;\r\n&lt;% end %&gt;\r\n\r\n\r\n&lt;%= form_tag conversation_messages_path(@conversation), method: post do  %&gt;\r\n    &lt;div&gt;\r\n        &lt;%= text_area_tag :body %&gt;\r\n    &lt;/div&gt;\r\n\r\n    &lt;%= submit_tag %&gt;\r\n&lt;% end %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>So how exactly can I define the 'receipts_for' method for my mailboxer? Or is something else wrong with my code? </p>\n\n<p>Any help would be much appreciated!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form"], "comments": [{"owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 1, "creation_date": 1527527796, "post_id": 50570905, "comment_id": 88151594, "body": "Can you paste the error log so that it can be known which line is exactly throwing the error?"}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "reply_to_user": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 0, "creation_date": 1527528690, "post_id": 50570905, "comment_id": 88151984, "body": "@KartikeyTanna Sure, the full trace from the browser page?"}, {"owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 1, "creation_date": 1527528738, "post_id": 50570905, "comment_id": 88152007, "body": "Yes, that would help. Also, add all the content of  <code>posts&#47;new.html.erb</code> file."}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "reply_to_user": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 0, "creation_date": 1527528968, "post_id": 50570905, "comment_id": 88152116, "body": "@KartikeyTanna There, it should all be there now. Thanks for asking for them!"}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "reply_to_user": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 0, "creation_date": 1527529336, "post_id": 50570905, "comment_id": 88152269, "body": "@KartikeyTanna I also gave some more info on what data I was calling through the simple_form collection (at the top of the question)."}, {"owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 0, "creation_date": 1527529826, "post_id": 50570905, "comment_id": 88152450, "body": "Are you sure you need <code>grouped_select</code>? Do you want to group categories under select box?"}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "reply_to_user": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 0, "creation_date": 1527531175, "post_id": 50570905, "comment_id": 88152955, "body": "@KartikeyTanna I may not need it, no. I wanted a drop-down holding all of the categories in the blog_categories table by name, then when I select one of the names it will represent the value of its ID. Store it under the <code>category_id</code> in the posts table to reference to. (unless of course, this approach is far from practical) - I don&#39;t really know if my logic makes any sense."}], "answers": [{"comments": [{"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1527531368, "post_id": 50571672, "comment_id": 88153024, "body": "Thanks, it worked! Is there any way to segregate the listed values in the dropdown based on their <code>parent_id</code>?"}, {"owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "reply_to_user": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1527531647, "post_id": 50571672, "comment_id": 88153113, "body": "@Jake how have you defined parent categories? In another model?"}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1527531817, "post_id": 50571672, "comment_id": 88153166, "body": "It&#39;s actually through the <code>blog_category</code> Model: <code>has_many :sub_blog_categories, class_name: &quot;Category&quot;, foreign_key: :parent_id</code> to illiminate the need for a <code>:subcategory</code> table/column. I found out about this via <a href=\"https://stackoverflow.com/questions/39281493/association-between-category-subcategory-and-lawyer/39281891?noredirect=1#comment88014351_39281891\" title=\"association between category subcategory and lawyer\">stackoverflow.com/questions/39281493/&hellip;</a> in case you wanted to learn more."}, {"owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "reply_to_user": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1527532216, "post_id": 50571672, "comment_id": 88153302, "body": "Does this work <code>&lt;%= f.input :category_id, collection: BlogCategory.all, as: :grouped_select, group_method: :sub_blog_categories %&gt;</code>"}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1527532709, "post_id": 50571672, "comment_id": 88153477, "body": "No, an error is raised stating: <code>uninitialized constant BlogCategory::Category</code>"}, {"owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "reply_to_user": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1527533044, "post_id": 50571672, "comment_id": 88153578, "body": "<code>&lt;%= f.input :category_id, collection: BlogCategory.where(parent_id: nil), as: :grouped_select, group_method: :sub_blog_categories  %&gt; </code> If this one does not work, please create a Github repo with the code."}], "tags": [], "owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "is_accepted": true, "score": 1, "last_activity_date": 1527531177, "creation_date": 1527531177, "answer_id": 50571672, "question_id": 50570905, "link": "https://stackoverflow.com/questions/50570905/assigning-ruby-on-rails-posts-to-blog-categories-via-simple-form-gem/50571672#50571672", "title": "Assigning ruby on rails Posts to Blog categories (via simple_form gem)", "body": "<p>The error is in this line:</p>\n\n<pre><code>&lt;%= f.input :category_id, collection: @categories, as: :grouped_select, label_method: :name, value_method: :id , input_html: { class: \"form-control center\" } %&gt;\n</code></pre>\n\n<p>The following solutions might work for you. Replace the line with any of the solutions:</p>\n\n<p><code>&lt;%= f.association :category %&gt;</code></p>\n\n<pre><code>&lt;%= f.input :category_id, collection: BlogCategory.all, value_method: :id, label_method: :name %&gt;\n</code></pre>\n"}], "owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 50571672, "answer_count": 1, "score": 0, "last_activity_date": 1527531177, "creation_date": 1527527396, "last_edit_date": 1527529280, "question_id": 50570905, "link": "https://stackoverflow.com/questions/50570905/assigning-ruby-on-rails-posts-to-blog-categories-via-simple-form-gem", "title": "Assigning ruby on rails Posts to Blog categories (via simple_form gem)", "body": "<p>I'm trying to link associate blog posts with categories through the following <code>simple_form</code> where the <code>label_method: :name</code>and <code>value_method: :id</code> are both pointing to the <code>blog_categories</code> table values:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-xs-12\"&gt;\n    &lt;%= render 'shared/exitBlocker' %&gt;\n    &lt;h1 class=\"page-section\"&gt;New Blog Post&lt;/h1&gt;\n    &lt;div class=\"wellington center news-form\"&gt;\n      &lt;%= simple_form_for @post, url: posts_path do |f| %&gt;\n        &lt;%= render 'shared/error_messages', object: f.object %&gt;\n        &lt;%= f.input :title, input_html: { maxlength: 51 }, class: \"form-control center\" %&gt;\n        &lt;%= f.input :summary, input_html: { maxlength: 300 }, class: \"form-control center\" %&gt;\n        &lt;%= f.input :category_id, collection: @categories, as: :grouped_select, label_method: :name, value_method: :id , input_html: { class: \"form-control center\" } %&gt;\n        &lt;%= f.input :thumbnail_link, class: \"form-control center\" %&gt;\n        &lt;%= f.input :body, :as =&gt; :ckeditor, input_html: {:ckeditor =&gt; {:toolbar =&gt; 'FULL'}}, class: \"form-control left\" %&gt;\n        &lt;%= f.submit \"Post\", id: \"saveChange\", class: \"btn btn-success btn-block\" %&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;&lt;!-- Content row --&gt;\n&lt;/div&gt;&lt;!-- Content container --&gt;\n</code></pre>\n\n<p>The form works fine without applying the blog categories, but it raises an error when I load the <code>posts/new</code> page: <code>nil is not a symbol nor a string</code></p>\n\n<p>BlogCategory <code>has_many :posts</code> | Post <code>belongs_to :blog_category</code></p>\n\n<p>My <code>posts</code> and <code>blog_categories</code> tables:</p>\n\n<pre><code>create_table \"posts\", force: :cascade do |t|\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.string \"title\"\n  t.text \"body\"\n  t.string \"summary\"\n  t.string \"thumbnail_link\"\n  t.integer \"category_id\"\nend\n\ncreate_table \"blog_categories\", force: :cascade do |t|\n  t.string \"name\"\n  t.integer \"parent_id\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\nend\n</code></pre>\n\n<p>Full trace:</p>\n\n<pre><code>actionview (5.1.5) lib/action_view/helpers/form_options_helper.rb:458:in `block in option_groups_from_collection_for_select'\nactionview (5.1.5) lib/action_view/helpers/form_options_helper.rb:456:in `map'\nactionview (5.1.5) lib/action_view/helpers/form_options_helper.rb:456:in `option_groups_from_collection_for_select'\nactionview (5.1.5) lib/action_view/helpers/tags/grouped_collection_select.rb:23:in `render'\nactionview (5.1.5) lib/action_view/helpers/form_options_helper.rb:258:in `grouped_collection_select'\nactionview (5.1.5) lib/action_view/helpers/form_options_helper.rb:841:in `grouped_collection_select'\nsimple_form (3.5.1) lib/simple_form/inputs/grouped_collection_select_input.rb:10:in `input'\nsimple_form (3.5.1) lib/simple_form/wrappers/leaf.rb:20:in `call'\nsimple_form (3.5.1) lib/simple_form/wrappers/leaf.rb:20:in `render'\nsimple_form (3.5.1) lib/simple_form/wrappers/many.rb:29:in `block in render'\nsimple_form (3.5.1) lib/simple_form/wrappers/many.rb:27:in `each'\nsimple_form (3.5.1) lib/simple_form/wrappers/many.rb:27:in `render'\nsimple_form (3.5.1) lib/simple_form/wrappers/root.rb:16:in `render'\nsimple_form (3.5.1) lib/simple_form/form_builder.rb:123:in `input'\napp/views/posts/new.html.erb:11:in `block in _app_views_posts_new_html_erb__847991209_125594352'\nactionview (5.1.5) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'\nactionview (5.1.5) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'\nactionview (5.1.5) lib/action_view/helpers/capture_helper.rb:39:in `capture'\nactionview (5.1.5) lib/action_view/helpers/form_helper.rb:450:in `form_for'\nsimple_form (3.5.1) lib/simple_form/action_view_extensions/form_helper.rb:27:in `block in simple_form_for'\nsimple_form (3.5.1) lib/simple_form/action_view_extensions/form_helper.rb:46:in `with_simple_form_field_error_proc'\nsimple_form (3.5.1) lib/simple_form/action_view_extensions/form_helper.rb:26:in `simple_form_for'\napp/views/posts/new.html.erb:7:in `_app_views_posts_new_html_erb__847991209_125594352'\nactionview (5.1.5) lib/action_view/template.rb:157:in `block in render'\nactivesupport (5.1.5) lib/active_support/notifications.rb:168:in `instrument'\nactionview (5.1.5) lib/action_view/template.rb:352:in `instrument_render_template'\nactionview (5.1.5) lib/action_view/template.rb:155:in `render'\nactionview (5.1.5) lib/action_view/renderer/template_renderer.rb:52:in `block (2 levels) in render_template'\nactionview (5.1.5) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'\nactivesupport (5.1.5) lib/active_support/notifications.rb:166:in `block in instrument'\nactivesupport (5.1.5) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.1.5) lib/active_support/notifications.rb:166:in `instrument'\nactionview (5.1.5) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'\nactionview (5.1.5) lib/action_view/renderer/template_renderer.rb:51:in `block in render_template'\nactionview (5.1.5) lib/action_view/renderer/template_renderer.rb:59:in `render_with_layout'\nactionview (5.1.5) lib/action_view/renderer/template_renderer.rb:50:in `render_template'\nactionview (5.1.5) lib/action_view/renderer/template_renderer.rb:14:in `render'\nactionview (5.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'\nactionview (5.1.5) lib/action_view/renderer/renderer.rb:23:in `render'\nactionview (5.1.5) lib/action_view/rendering.rb:103:in `_render_template'\nactionpack (5.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'\nactionview (5.1.5) lib/action_view/rendering.rb:83:in `render_to_body'\nactionpack (5.1.5) lib/action_controller/metal/rendering.rb:52:in `render_to_body'\nactionpack (5.1.5) lib/action_controller/metal/renderers.rb:141:in `render_to_body'\nactionpack (5.1.5) lib/abstract_controller/rendering.rb:24:in `render'\nactionpack (5.1.5) lib/action_controller/metal/rendering.rb:36:in `render'\nactionpack (5.1.5) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'\nactivesupport (5.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'\nC:/RailsInstaller/Ruby2.3.0/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'\nactivesupport (5.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'\nactionpack (5.1.5) lib/action_controller/metal/instrumentation.rb:44:in `block in render'\nactionpack (5.1.5) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'\nactiverecord (5.1.5) lib/active_record/railties/controller_runtime.rb:29:in `cleanup_view_runtime'\nactionpack (5.1.5) lib/action_controller/metal/instrumentation.rb:43:in `render'\nmeta-tags (2.8.0) lib/meta_tags/controller_helper.rb:20:in `render'\nactionpack (5.1.5) lib/action_controller/metal/implicit_render.rb:33:in `default_render'\nactionpack (5.1.5) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'\nactionpack (5.1.5) lib/action_controller/metal/basic_implicit_render.rb:4:in `tap'\nactionpack (5.1.5) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'\nactionpack (5.1.5) lib/abstract_controller/base.rb:186:in `process_action'\nactionpack (5.1.5) lib/action_controller/metal/rendering.rb:30:in `process_action'\nactionpack (5.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (5.1.5) lib/active_support/callbacks.rb:131:in `run_callbacks'\nactionpack (5.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (5.1.5) lib/action_controller/metal/rescue.rb:20:in `process_action'\nactionpack (5.1.5) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (5.1.5) lib/active_support/notifications.rb:166:in `block in instrument'\nactivesupport (5.1.5) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.1.5) lib/active_support/notifications.rb:166:in `instrument'\nactionpack (5.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (5.1.5) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'\nactiverecord (5.1.5) lib/active_record/railties/controller_runtime.rb:22:in `process_action'\nactionpack (5.1.5) lib/abstract_controller/base.rb:124:in `process'\nactionview (5.1.5) lib/action_view/rendering.rb:30:in `process'\nactionpack (5.1.5) lib/action_controller/metal.rb:189:in `dispatch'\nactionpack (5.1.5) lib/action_controller/metal.rb:253:in `dispatch'\nactionpack (5.1.5) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'\nactionpack (5.1.5) lib/action_dispatch/routing/route_set.rb:31:in `serve'\nactionpack (5.1.5) lib/action_dispatch/journey/router.rb:50:in `block in serve'\nactionpack (5.1.5) lib/action_dispatch/journey/router.rb:33:in `each'\nactionpack (5.1.5) lib/action_dispatch/journey/router.rb:33:in `serve'\nactionpack (5.1.5) lib/action_dispatch/routing/route_set.rb:844:in `call'\nrack (2.0.4) lib/rack/etag.rb:25:in `call'\nrack (2.0.4) lib/rack/conditional_get.rb:25:in `call'\nrack (2.0.4) lib/rack/head.rb:12:in `call'\nrack (2.0.4) lib/rack/session/abstract/id.rb:232:in `context'\nrack (2.0.4) lib/rack/session/abstract/id.rb:226:in `call'\nactionpack (5.1.5) lib/action_dispatch/middleware/cookies.rb:613:in `call'\nactiverecord (5.1.5) lib/active_record/migration.rb:556:in `call'\nactionpack (5.1.5) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'\nactivesupport (5.1.5) lib/active_support/callbacks.rb:97:in `run_callbacks'\nactionpack (5.1.5) lib/action_dispatch/middleware/callbacks.rb:24:in `call'\nactionpack (5.1.5) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.1.5) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'\nweb-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'\nweb-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'\nweb-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'\nweb-console (3.5.1) lib/web_console/middleware.rb:18:in `call'\nactionpack (5.1.5) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\nrailties (5.1.5) lib/rails/rack/logger.rb:36:in `call_app'\nrailties (5.1.5) lib/rails/rack/logger.rb:24:in `block in call'\nactivesupport (5.1.5) lib/active_support/tagged_logging.rb:69:in `block in tagged'\nactivesupport (5.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (5.1.5) lib/active_support/tagged_logging.rb:69:in `tagged'\nrailties (5.1.5) lib/rails/rack/logger.rb:24:in `call'\nsprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'\nactionpack (5.1.5) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\nactionpack (5.1.5) lib/action_dispatch/middleware/request_id.rb:25:in `call'\nrack (2.0.4) lib/rack/method_override.rb:22:in `call'\nrack (2.0.4) lib/rack/runtime.rb:22:in `call'\nactivesupport (5.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'\nactionpack (5.1.5) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.1.5) lib/action_dispatch/middleware/static.rb:125:in `call'\nrack (2.0.4) lib/rack/sendfile.rb:111:in `call'\nrailties (5.1.5) lib/rails/engine.rb:522:in `call'\npuma (3.11.3) lib/puma/configuration.rb:225:in `call'\npuma (3.11.3) lib/puma/server.rb:624:in `handle_request'\npuma (3.11.3) lib/puma/server.rb:438:in `process_client'\npuma (3.11.3) lib/puma/server.rb:302:in `block in run'\npuma (3.11.3) lib/puma/thread_pool.rb:120:in `block in spawn_thread'\n</code></pre>\n\n<p>The way I'm trying to populate the selector dropdown via Posts_controller's <code>new</code> method: <code>@categories = BlogCategory.all</code></p>\n\n<p>I'm not quite sure if I am doing this properly. If so, what is the best approach to this?</p>\n"}, {"tags": ["ruby", "model-view-controller", "routes"], "answers": [{"comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 1, "creation_date": 1527529057, "post_id": 50571076, "comment_id": 88152147, "body": "This answer is close, but not <i>quite</i> right. In the first part describing route changes without changing anything in the controller, changing to <code>resources :receivers...</code> would break the <code>index</code> action because that would be routed to <code>ReceiversController</code>."}, {"owner": {"reputation": 821, "user_id": 2510165, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1ac62cb336029440d39950b9045408d4?s=128&d=identicon&r=PG", "display_name": "Cherry", "link": "https://stackoverflow.com/users/2510165/cherry"}, "edited": false, "score": 0, "creation_date": 1527608303, "post_id": 50571076, "comment_id": 88185605, "body": "Thanks, That was really helpful!"}], "tags": [], "owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "is_accepted": true, "score": 3, "last_activity_date": 1527529291, "last_edit_date": 1527529291, "creation_date": 1527528243, "answer_id": 50571076, "question_id": 50570814, "link": "https://stackoverflow.com/questions/50570814/how-to-mask-url-rails/50571076#50571076", "title": "How to mask URL rails", "body": "<p>Without changing anything in your controller, you can do the following:</p>\n\n<pre><code>resources :receivers, only: [:index, :update], controller: 'senders'\n get '/receivers/:id', constraints: { :id =&gt; /[0-9]+/ }, to: 'senders#show'\n put '/receivers/:id', constraints: { :id =&gt; /[0-9]+/ }, to: 'senders#update'\n get '/receivers/:id/check_status/:ip_index', constraints: { :id =&gt; /[0-9]+/, :ip_index =&gt; /[0-3]/ }, to: 'senders#check_status'\n</code></pre>\n\n<p>But you should also change your controller name and do the following:</p>\n\n<p>First change your controller name.<br>\nRename <code>app/controllers/senders_controller.rb</code> to <code>app/controllers/receivers_controller.rb</code></p>\n\n<p>And change the first line in the controller:<br>\n<code>SendersController &lt; ApplicationController</code> to <code>ReceiversController &lt; ApplicationController</code></p>\n\n<p>Then finally, change your <code>config/routes.rb</code> as below:</p>\n\n<pre><code>resources :receivers, only: [:index, :update]\n     get '/receivers/:id', constraints: { :id =&gt; /[0-9]+/ }, to: 'receivers#show'\n     put '/receivers/:id', constraints: { :id =&gt; /[0-9]+/ }, to: 'receivers#update'\n     get '/receivers/:id/check_status/:ip_index', constraints: { :id =&gt; /[0-9]+/, :ip_index =&gt; /[0-3]/ }, to: 'receivers#check_status'\n</code></pre>\n\n<p>You can know more about Rails routing from the <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}], "owner": {"reputation": 821, "user_id": 2510165, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1ac62cb336029440d39950b9045408d4?s=128&d=identicon&r=PG", "display_name": "Cherry", "link": "https://stackoverflow.com/users/2510165/cherry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 2, "accepted_answer_id": 50571076, "answer_count": 1, "score": 1, "last_activity_date": 1527529291, "creation_date": 1527526904, "last_edit_date": 1527528033, "question_id": 50570814, "link": "https://stackoverflow.com/questions/50570814/how-to-mask-url-rails", "title": "How to mask URL rails", "body": "<p>I am new to Rails. here trying to replace a word in URL. My <code>routes.rb</code> is:</p>\n\n<pre><code>resources :senders, only: [:index, :update]\n get '/senders/:id', constraints: { :id =&gt; /[0-9]+/ }, to: 'senders#show'\n put '/senders/:id', constraints: { :id =&gt; /[0-9]+/ }, to: 'senders#update'\n get '/senders/:id/check_status/:ip_index', constraints: { :id =&gt; /[0-9]+/, :ip_index =&gt; /[0-3]/ }, to: 'senders#check_status'\n</code></pre>\n\n<p>It shows in the url link as </p>\n\n<pre><code>localhost:3000/senders\n</code></pre>\n\n<p>but I want it to show as </p>\n\n<pre><code>localhost:3000/receivers\n</code></pre>\n\n<p>What are the changes I have to make to show receivers/173?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1527526877, "creation_date": 1527526877, "answer_id": 50570809, "question_id": 50570714, "link": "https://stackoverflow.com/questions/50570714/how-do-i-add-liking-and-commenting-to-activestorage-blobs/50570809#50570809", "title": "How do I add liking and commenting to ActiveStorage blobs", "body": "<p>At the very least you can do this by introducing an intermediary model (which will be the target of likes/reactions and will host the upload)</p>\n\n<pre><code>class Post\n  has_many :likable_photos\nend\n\nclass LikablePhoto\n  has_many :likes, as: :likeable # or however else you decide to store likes\n  has_many :reactions, as: :reactionable    \n\n  has_one_attached :upload\nend\n</code></pre>\n"}], "owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527526877, "creation_date": 1527526339, "question_id": 50570714, "link": "https://stackoverflow.com/questions/50570714/how-do-i-add-liking-and-commenting-to-activestorage-blobs", "title": "How do I add liking and commenting to ActiveStorage blobs", "body": "<p>The title says it all. How can I define relationships on <code>ActiveStorage::Attachment</code>'s which are associated with my model? I want to be able to <code>comment</code> and <code>react</code> to the <code>photos</code> as well as the <code>Post</code>.</p>\n\n<pre><code>class Post &lt; ApplicationRecord\n  belongs_to :user\n  has_many :comments, as: :commentable\n  has_many :reactions, as: :reactionable\n\n  has_many_attached :uploads\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "imgur"], "comments": [{"owner": {"reputation": 301, "user_id": 8759209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AhiT4Z0WHsg/AAAAAAAAAAI/AAAAAAAAANk/8ZIAOkPCMA8/photo.jpg?sz=128", "display_name": "Artem Ignatiev", "link": "https://stackoverflow.com/users/8759209/artem-ignatiev"}, "edited": false, "score": 0, "creation_date": 1527525081, "post_id": 50570357, "comment_id": 88150516, "body": "If you refer to it as <code>imgur_link</code>, than in <code>text_field_tag</code> you should also call it <code>imgur_link</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9850109"}, "reply_to_user": {"reputation": 301, "user_id": 8759209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AhiT4Z0WHsg/AAAAAAAAAAI/AAAAAAAAANk/8ZIAOkPCMA8/photo.jpg?sz=128", "display_name": "Artem Ignatiev", "link": "https://stackoverflow.com/users/8759209/artem-ignatiev"}, "edited": false, "score": 0, "creation_date": 1527525503, "post_id": 50570357, "comment_id": 88150685, "body": "Fair point. Fixing atm ;)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9850109"}, "edited": false, "score": 0, "creation_date": 1527536285, "post_id": 50570709, "comment_id": 88154708, "body": "Yup. Exactly that. I managed to pass the variable properly  and make the view itself work. Now I&#39;m fixing my Service Objects as apparently I failed to write them correctly. I&#39;m much closer though. Thanks for the pointers!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9850109"}, "edited": false, "score": 0, "creation_date": 1527608131, "post_id": 50570709, "comment_id": 88185506, "body": "Done. Sorry for the delay."}], "tags": [], "owner": {"reputation": 301, "user_id": 8759209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AhiT4Z0WHsg/AAAAAAAAAAI/AAAAAAAAANk/8ZIAOkPCMA8/photo.jpg?sz=128", "display_name": "Artem Ignatiev", "link": "https://stackoverflow.com/users/8759209/artem-ignatiev"}, "is_accepted": true, "score": 0, "last_activity_date": 1527526328, "creation_date": 1527526328, "answer_id": 50570709, "question_id": 50570357, "link": "https://stackoverflow.com/questions/50570357/render-results-on-show-without-storing-data-in-activestorage/50570709#50570709", "title": "Render results on #show without storing data in ActiveStorage", "body": "<p>There is no reason you should put something into storage just in order to display it. If you get to a point when you have the results in your controller, you could just pass them to view in some <code>@variable</code></p>\n\n<p>As I see, you have set up the form for step 1. If you also have <code>routes.rb</code> call 'images#show' for <code>POST /images</code>, then you will have <code>params[:imgur_link]</code> available in your show action. This should do:</p>\n\n<pre><code># config/routes.rb\nYourApplication.routes.draw do \n  # ...\n  post '/images' =&gt; 'images#show'\nend\n</code></pre>\n\n<p>Now you have to somehow process that link. Since I don't know what your results should be, I'm going to assume that you have two classes, <code>Service1</code> and <code>Service2</code>, both of which accept an URL and return collection of results, and both collections hold the elements of the same class. Then you can leave only unique results for your <code>show</code> view, like this:</p>\n\n<pre><code># app/controllers/images_controller.rb\nclass ImagesController &lt; ApplicationController\n  def show\n    link = params[:imgur_link]\n    results1 = Service1.new(link).results\n    results2 = Service2.new(link).results\n\n    @results = (results1 + results2).uniq\n  end\nend\n</code></pre>\n\n<p>Then you can do something with <code>@results</code> in your <code>show</code> view. E.g.</p>\n\n<pre><code># app/views/images/show.html.erb\n&lt;% @results.each do |result| %&gt;\n  &lt;%= result.inspect %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9850109"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 50570709, "answer_count": 1, "score": 0, "last_activity_date": 1527526328, "creation_date": 1527524787, "question_id": 50570357, "link": "https://stackoverflow.com/questions/50570357/render-results-on-show-without-storing-data-in-activestorage", "title": "Render results on #show without storing data in ActiveStorage", "body": "<p>I'm learning RoR by building my first app (yay!). I gotta a question thought as rails guides do not cover this topic: </p>\n\n<p><strong>How to render unique results on #show to a user without storing any data in a model?</strong></p>\n\n<p>Steps I want to take:</p>\n\n<ol>\n<li>Create a basic <em>index</em> view with a form_tag that will allow user to submit a link (string) and click submit button</li>\n<li>Write Service Objects that will allow me to parse that link and create a response I want user to see</li>\n<li>I want to write a #show method in a separate controller that will allow me to display all the data. (I also want to parse my params[:link] in that method using Service Objects.</li>\n<li>I want to finally display this data in a table in #show view (probably I need to create a unique #show/[:id] for each user?</li>\n</ol>\n\n<p>Here's what my app looks like at the moment (more or less):</p>\n\n<p><strong>Static Controller</strong> (just to render index.html.erb with a form)</p>\n\n<pre><code>class StaticController &lt; ApplicationController\n  def index\n  end\nend\n</code></pre>\n\n<p><strong>Static Index view</strong> (yup, parsing imgur link here)</p>\n\n<pre><code>&lt;h1&gt;Hello Rails!&lt;/h1&gt;\n\n&lt;%= form_tag(\"/images\", method: \"post\") do %&gt;\n  &lt;p&gt;\n    &lt;%= label_tag(:imgur_link) %&gt;&lt;br&gt;\n    &lt;%= text_field_tag(:imgur) %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= submit_tag(\"Get my cards\") %&gt;\n  &lt;/p&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p><strong>Images Controller (where all the magic SHOULD happen)</strong></p>\n\n<pre><code>class ImagesController &lt; ApplicationController\n\n  def show\n    @collection = params[:imgur_link]\n    @service1 = service1.new(*args).call\n    @service2 = service2.new(*args).call\n    ...\n  end\nend\n</code></pre>\n\n<p><strong>Images Show view</strong></p>\n\n<p>Empty as I'm stuck with the Images controller at the moment.</p>\n\n<p>Any help would be more than appreciated.\nThanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "ruby-on-rails-4", "server"], "comments": [{"owner": {"reputation": 3207, "user_id": 1127732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf50a128608800d7c43129ba90e7ae9?s=128&d=identicon&r=PG", "display_name": "khaled_gomaa", "link": "https://stackoverflow.com/users/1127732/khaled-gomaa"}, "edited": false, "score": 1, "creation_date": 1527520532, "post_id": 50569239, "comment_id": 88148512, "body": "It prohibits it for good reasons! Can you provide more information? (initializers, database.yml, WEBrick config) any kind of information that you feel is relevant."}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1527520700, "post_id": 50569239, "comment_id": 88148603, "body": "The &quot;disregard&quot;-edit, what shall it mean? Should we delete this question?"}, {"owner": {"reputation": 3207, "user_id": 1127732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf50a128608800d7c43129ba90e7ae9?s=128&d=identicon&r=PG", "display_name": "khaled_gomaa", "link": "https://stackoverflow.com/users/1127732/khaled-gomaa"}, "edited": false, "score": 0, "creation_date": 1527521355, "post_id": 50569239, "comment_id": 88148924, "body": "Let&#39;s give them a chance to fix the question. Can you add the command that you used to run this?"}, {"owner": {"reputation": 37, "user_id": 7766467, "user_type": "registered", "profile_image": "https://graph.facebook.com/281509445620078/picture?type=large", "display_name": "Jack Carter", "link": "https://stackoverflow.com/users/7766467/jack-carter"}, "edited": false, "score": 0, "creation_date": 1527521496, "post_id": 50569239, "comment_id": 88148992, "body": "the disregard is there to tell you to ignore all of the text after it as its only purpose is to allow me to post this question with this little info"}, {"owner": {"reputation": 37, "user_id": 7766467, "user_type": "registered", "profile_image": "https://graph.facebook.com/281509445620078/picture?type=large", "display_name": "Jack Carter", "link": "https://stackoverflow.com/users/7766467/jack-carter"}, "edited": false, "score": 0, "creation_date": 1527521528, "post_id": 50569239, "comment_id": 88149008, "body": "i used the &quot;rails server&quot; command"}, {"owner": {"reputation": 37, "user_id": 7766467, "user_type": "registered", "profile_image": "https://graph.facebook.com/281509445620078/picture?type=large", "display_name": "Jack Carter", "link": "https://stackoverflow.com/users/7766467/jack-carter"}, "edited": false, "score": 0, "creation_date": 1527522895, "post_id": 50569239, "comment_id": 88149644, "body": "im using webrick 1.3.1 and ruby 2.3.1 if that helps"}, {"owner": {"reputation": 301, "user_id": 8759209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AhiT4Z0WHsg/AAAAAAAAAAI/AAAAAAAAANk/8ZIAOkPCMA8/photo.jpg?sz=128", "display_name": "Artem Ignatiev", "link": "https://stackoverflow.com/users/8759209/artem-ignatiev"}, "edited": false, "score": 0, "creation_date": 1527523608, "post_id": 50569239, "comment_id": 88149919, "body": "Do you have <code>localhost</code> entry in your hosts file? The question was <a href=\"https://stackoverflow.com/questions/28768934/rails-server-cannot-start-getaddrinfo-nodename-nor-servname-provided-or-not-k\">already asked</a>"}, {"owner": {"reputation": 37, "user_id": 7766467, "user_type": "registered", "profile_image": "https://graph.facebook.com/281509445620078/picture?type=large", "display_name": "Jack Carter", "link": "https://stackoverflow.com/users/7766467/jack-carter"}, "edited": false, "score": 0, "creation_date": 1527523825, "post_id": 50569239, "comment_id": 88150015, "body": "what does that mean"}], "answers": [{"tags": [], "owner": {"reputation": 429, "user_id": 7617687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb0c380ac37c50e2c0574e0ecec1a98?s=128&d=identicon&r=PG&f=1", "display_name": "radoAngelov", "link": "https://stackoverflow.com/users/7617687/radoangelov"}, "is_accepted": false, "score": 1, "last_activity_date": 1527524003, "creation_date": 1527524003, "answer_id": 50570188, "question_id": 50569239, "link": "https://stackoverflow.com/questions/50569239/cant-start-my-rails-server-linux/50570188#50570188", "title": "cant start my rails server [linux]", "body": "<p>Try adding <code>127.0.0.1 localhost</code> to your <code>/etc/hosts</code> file. Also always run the <code>rails server</code> command using <code>bundle</code> -> <code>bundle exec rails server</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 7766467, "user_type": "registered", "profile_image": "https://graph.facebook.com/281509445620078/picture?type=large", "display_name": "Jack Carter", "link": "https://stackoverflow.com/users/7766467/jack-carter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1527527919, "creation_date": 1527520032, "last_edit_date": 1527527919, "question_id": 50569239, "link": "https://stackoverflow.com/questions/50569239/cant-start-my-rails-server-linux", "title": "cant start my rails server [linux]", "body": "<p>When running the rails server command from the directory that contains my app i get this error message:</p>\n\n<pre><code>=&gt; Booting WEBrick\n=&gt; Rails 4.2.0 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Ctrl-C to shutdown server\n[2018-05-28 15:55:12] INFO  WEBrick 1.3.1\n[2018-05-28 15:55:12] INFO  ruby 2.3.1 (2016-04-26) [x86_64-linux-gnu]\nExiting\n/usr/lib/ruby/2.3.0/socket.rb:231:in `getaddrinfo': getaddrinfo: Name or service not known (SocketError)\n    from /usr/lib/ruby/2.3.0/socket.rb:231:in `foreach'\n    from /usr/lib/ruby/2.3.0/socket.rb:757:in `tcp_server_sockets'\n    from /usr/lib/ruby/2.3.0/webrick/utils.rb:65:in `create_listeners'\n    from /usr/lib/ruby/2.3.0/webrick/server.rb:134:in `listen'\n    from /usr/lib/ruby/2.3.0/webrick/server.rb:115:in `initialize'\n    from /usr/lib/ruby/2.3.0/webrick/httpserver.rb:47:in `initialize'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/rack-1.6.10/lib/rack/handler/webrick.rb:31:in `new'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/rack-1.6.10/lib/rack/handler/webrick.rb:31:in `run'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/rack-1.6.10/lib/rack/server.rb:287:in `start'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/railties-4.2.0/lib/rails/commands/server.rb:80:in `start'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:75:in `tap'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:75:in `server'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/railties-4.2.0/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from /home/jack/Desktop/Rails/MegsBlog/bin/rails:9:in `require'\n    from /home/jack/Desktop/Rails/MegsBlog/bin/rails:9:in `&lt;top (required)&gt;'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `load'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `call'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/spring-2.0.2/lib/spring/client/command.rb:7:in `call'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/spring-2.0.2/lib/spring/client.rb:30:in `run'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/spring-2.0.2/bin/spring:49:in `&lt;top (required)&gt;'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `load'\n    from /home/jack/Desktop/Rails/MegsBlog/vendor/bundle/ruby/2.3.0/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `&lt;top (required)&gt;'\n    from /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n    from /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n    from /home/jack/Desktop/Rails/MegsBlog/bin/spring:15:in `&lt;top (required)&gt;'\n    from bin/rails:3:in `load'\n    from bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 301, "user_id": 8759209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AhiT4Z0WHsg/AAAAAAAAAAI/AAAAAAAAANk/8ZIAOkPCMA8/photo.jpg?sz=128", "display_name": "Artem Ignatiev", "link": "https://stackoverflow.com/users/8759209/artem-ignatiev"}, "edited": false, "score": 0, "creation_date": 1527523436, "post_id": 50568810, "comment_id": 88149852, "body": "What is your desired result? Are you expecting the times that are already entered to be static/not editable? To be absent from the edit form?"}, {"owner": {"reputation": 1545, "user_id": 4708773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1365fd163d419008009cb165ba8a37ed?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Luna", "link": "https://stackoverflow.com/users/4708773/victor-luna"}, "reply_to_user": {"reputation": 301, "user_id": 8759209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AhiT4Z0WHsg/AAAAAAAAAAI/AAAAAAAAANk/8ZIAOkPCMA8/photo.jpg?sz=128", "display_name": "Artem Ignatiev", "link": "https://stackoverflow.com/users/8759209/artem-ignatiev"}, "edited": false, "score": 0, "creation_date": 1527523886, "post_id": 50568810, "comment_id": 88150042, "body": "@ArtemIgnatiev I want to be able to edit and delete the times on edit. The expected result is that on create I can add multiple times and on edit I am still able to change those times, delete them or add new times."}, {"owner": {"reputation": 301, "user_id": 8759209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AhiT4Z0WHsg/AAAAAAAAAAI/AAAAAAAAANk/8ZIAOkPCMA8/photo.jpg?sz=128", "display_name": "Artem Ignatiev", "link": "https://stackoverflow.com/users/8759209/artem-ignatiev"}, "edited": false, "score": 0, "creation_date": 1527524366, "post_id": 50568810, "comment_id": 88150237, "body": "For me, it is unclear what the result you have obtained so far, and what is missing from it to be what you are trying to achieve. Also it could also be helpful if you share your controller code beyond the <code>new</code> action."}, {"owner": {"reputation": 175, "user_id": 5942959, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5216decc83b01a432785867d467f39a5?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5942959/daniel"}, "reply_to_user": {"reputation": 301, "user_id": 8759209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AhiT4Z0WHsg/AAAAAAAAAAI/AAAAAAAAANk/8ZIAOkPCMA8/photo.jpg?sz=128", "display_name": "Artem Ignatiev", "link": "https://stackoverflow.com/users/8759209/artem-ignatiev"}, "edited": false, "score": 0, "creation_date": 1527524965, "post_id": 50568810, "comment_id": 88150467, "body": "I agree with @ArtemIgnatiev. link_to_add/remove_fields methods would be useful, also your JS code.   As I had some encounters with nested fields, I would recommend you use a dedicated gem ( cocoon would be my 1st solution, nested_form gem 2nd one) .It won&#39;t be hard to adapt it to what you already done and it will ease your work a lot."}, {"owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 0, "creation_date": 1527528926, "post_id": 50568810, "comment_id": 88152097, "body": "@VictorLuna you want all 7 days as a location in one single form or each day as its own separate form e.g. one form submit will post data of all the seven days and timings or one at a time?"}, {"owner": {"reputation": 1545, "user_id": 4708773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1365fd163d419008009cb165ba8a37ed?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Luna", "link": "https://stackoverflow.com/users/4708773/victor-luna"}, "reply_to_user": {"reputation": 175, "user_id": 5942959, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5216decc83b01a432785867d467f39a5?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5942959/daniel"}, "edited": false, "score": 0, "creation_date": 1527529647, "post_id": 50568810, "comment_id": 88152386, "body": "@Daniel I added an update, where I was able to find the solution. Not sure if this is the best way though. I know about the gems, I would just like to try this for educational purposes."}, {"owner": {"reputation": 1545, "user_id": 4708773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1365fd163d419008009cb165ba8a37ed?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Luna", "link": "https://stackoverflow.com/users/4708773/victor-luna"}, "reply_to_user": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 0, "creation_date": 1527529896, "post_id": 50568810, "comment_id": 88152485, "body": "@KartikeyTanna 7 days in one form and each day has many times. The params should look something like &quot;&quot;times_attributes&quot;=&gt;{&quot;0&quot;=&gt;{&quot;weekday_id&quot;=&gt;&quot;0&quot;, &quot;time&quot;=&gt;&quot;11:00 AM&quot;, &quot;_destroy&quot;=&gt;&quot;false&quot;},  &quot;11234515621321&quot;=&gt;{&quot;weekday_id&quot;=&gt;&quot;0&quot;, &quot;time&quot;=&gt;&quot;02:00 PM&quot;, &quot;_destroy&quot;=&gt;&quot;false&quot;},  &quot;1&quot;=&gt;{&quot;weekday_id&quot;=&gt;&quot;1&quot;, &quot;time&quot;=&gt;&quot;01:00 PM&quot;, &quot;_destroy&quot;=&gt;&quot;false&quot;}.....}"}, {"owner": {"reputation": 1545, "user_id": 4708773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1365fd163d419008009cb165ba8a37ed?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Luna", "link": "https://stackoverflow.com/users/4708773/victor-luna"}, "reply_to_user": {"reputation": 301, "user_id": 8759209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AhiT4Z0WHsg/AAAAAAAAAAI/AAAAAAAAANk/8ZIAOkPCMA8/photo.jpg?sz=128", "display_name": "Artem Ignatiev", "link": "https://stackoverflow.com/users/8759209/artem-ignatiev"}, "edited": false, "score": 0, "creation_date": 1527530103, "post_id": 50568810, "comment_id": 88152569, "body": "@ArtemIgnatiev the expected result is one table that holds multiple times with the location id and the weekday_id. The form is in the location view where it has 7 days of the week and you can add multiple time to each day. The reason I did not put the controller beyond new, its because the rest of it its irrelevant. It is the usual respond_to location.save and location.update(location_params)"}], "answers": [{"comments": [{"owner": {"reputation": 1545, "user_id": 4708773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1365fd163d419008009cb165ba8a37ed?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Luna", "link": "https://stackoverflow.com/users/4708773/victor-luna"}, "edited": false, "score": 0, "creation_date": 1527536782, "post_id": 50572304, "comment_id": 88154901, "body": "Thank you for your answer, however this is not what I am looking for. I want to create times with days that are associated to one location. I tried the method you suggested by creating 7 times in new action without success. That will create  as I need to add the times to a day. Some days might not have times. In edit part on the question. I was able to find the solution. However, I am not sure this is the right way to do it"}], "tags": [], "owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "is_accepted": false, "score": 0, "last_activity_date": 1527534564, "creation_date": 1527534564, "answer_id": 50572304, "question_id": 50568810, "link": "https://stackoverflow.com/questions/50568810/fields-for-nested-attributes-inside-loop-in-rails-form/50572304#50572304", "title": "Fields for nested attributes inside loop in rails form", "body": "<p>Providing the basic solution here. You might need to refactor it.</p>\n\n<p>We are creating seven instances of the Location. Each for a weekday. Although I have not added <code>weekday_id</code> column in my solution. I believe you can take care of it.</p>\n\n<p>Then under <code>create</code> method, we are taking each param and whitelist them using <code>locations_params</code> method and then create the record.</p>\n\n<p><code>_form.html.erb</code></p>\n\n<pre><code>&lt;%= form_tag locations_path do |main_form| %&gt;\n  &lt;% @locations.each do |location| %&gt;\n    &lt;%= fields_for 'locations[]', location do |f| %&gt;\n      &lt;%= f.label :name %&gt;\n      &lt;%= f.text_field :name %&gt; &lt;br&gt;\n      &lt;%= f.fields_for :timings, f.object.timings.build do |timing_form| %&gt;\n        &lt;%= timing_form.label :start_time %&gt;\n        &lt;%= timing_form.text_field :start_time, type: \"time\" %&gt; &lt;br&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n  &lt;%= submit_tag %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><code>locations_controller.rb</code></p>\n\n<pre><code>class LocationsController &lt; ApplicationController\n  def new\n    @locations = []\n    7.times do\n      @locations &lt;&lt; Location.new\n    end\n  end\n\n  def create\n    params[:locations].each do |location|\n      Location.create!(locations_params(location))\n    end\n    redirect_to root_path\n  end\n\n  private\n\n  def locations_params(my_params)\n    my_params.permit(:name, :timings_attributes =&gt; [:start_time, :id, :_destroy, :locatino_id])\n  end\nend\n</code></pre>\n\n<p><code>location.rb</code></p>\n\n<pre><code>class Location &lt; ApplicationRecord\n  has_many :timings\n  accepts_nested_attributes_for :timings\nend\n</code></pre>\n\n<p>Explanation of creating multiple records can be found <a href=\"http://vicfriedman.github.io/blog/2015/07/18/create-multiple-objects-from-single-form-in-rails/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I have not added <code>link_to_add_fields</code> option under the form. You can refer to <a href=\"http://railscasts.com/episodes/197-nested-model-form-part-2\" rel=\"nofollow noreferrer\">Railscast episode</a> you mentioned in the question or use something like <a href=\"https://github.com/nathanvda/cocoon\" rel=\"nofollow noreferrer\">cocoon</a></p>\n"}, {"tags": [], "owner": {"reputation": 1545, "user_id": 4708773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1365fd163d419008009cb165ba8a37ed?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Luna", "link": "https://stackoverflow.com/users/4708773/victor-luna"}, "is_accepted": false, "score": 1, "last_activity_date": 1527594635, "creation_date": 1527594635, "answer_id": 50583677, "question_id": 50568810, "link": "https://stackoverflow.com/questions/50568810/fields-for-nested-attributes-inside-loop-in-rails-form/50583677#50583677", "title": "Fields for nested attributes inside loop in rails form", "body": "<p>I think there might be another way to do this. If so please do not hesitate to point that out and answer this question. However, if someone is looking for a solution with a similar problem this is what I did.</p>\n\n<p>I iterate through the days of the week and then on <code>create</code>, <code>_current_time</code> will return <code>true</code>, which can be used as the record_object argument for  <code>fields_for</code>. It takes a <code>record_object</code> but I have none on <code>create</code> so the <code>true</code> will suffice (not sure 100% why). Then on <code>update</code>, I iterate through the times that have a day of the week and skip the creation of fields that have not.</p>\n\n<p>_form.html.erb</p>\n\n<pre><code>&lt;% (0..6).each do |idx| %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-2\"&gt;\n      &lt;p&gt;&lt;%= I18n.t('date.day_names')[idx] %&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-5\"&gt;\n      &lt;div id=\"time&lt;%= idx %&gt;\"&gt;\n        &lt;% _current_time = @location.new_record? ? @location.times.build : @times.where(location_id: idx) %&gt;\n        &lt;% unless _current_time.blank? %&gt;\n          &lt;%= form.fields_for :times, _current_time do |f| %&gt;\n            &lt;%= render \"time_fields\", :form =&gt; f, :idx =&gt; idx %&gt;\n          &lt;% end %&gt;\n        &lt;% end %&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-3\"&gt;\n      &lt;%= link_to_add_fields \"Add Time\", \"btn\", \"repeater-add\", \"time#{idx}\",  form, :times, idx %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The add button will create a new time in either situation using the appropriate index for the day of the week. In the edit part on this question you can see the full implementation. Only the <code>_form.html.erb</code> was causing the issue, so I am posting just this piece as an answer.</p>\n"}], "owner": {"reputation": 1545, "user_id": 4708773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1365fd163d419008009cb165ba8a37ed?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Luna", "link": "https://stackoverflow.com/users/4708773/victor-luna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1527594635, "creation_date": 1527518568, "last_edit_date": 1527529427, "question_id": 50568810, "link": "https://stackoverflow.com/questions/50568810/fields-for-nested-attributes-inside-loop-in-rails-form", "title": "Fields for nested attributes inside loop in rails form", "body": "<p>I tried to do something like google my business where you have the days of the week and you can add multiple times to it. I follow the <a href=\"http://railscasts.com/episodes/197-nested-model-form-part-2\" rel=\"nofollow noreferrer\">rail cast nested model form</a>, but I have not been able to make it work the way I would like to.</p>\n\n<p>I want to have a location with the 7 days of the week and you can add multiple times to each day. Create method seems to work as expected as the form is there from scratch. Then when I go into edit, each day has all the times that were saved on create. </p>\n\n<p>I would just like some guidance in this issue. Thanks!</p>\n\n<p>_from.html.erb</p>\n\n<pre><code>&lt;% (0..6).each do |idx| %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-2\"&gt;\n      &lt;p&gt;&lt;% I18n.t('date.day_names')[idx] %&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-5\"&gt;\n      &lt;%= form.fields_for :times do |f| %&gt;\n        &lt;%= render \"time_fields\", :form =&gt; f %&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-3\"&gt;\n      &lt;%= link_to_add_fields \"Add Time\", \"btn\", \"repeater-add\",  form, :times %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>_time_fields.html.erb</p>\n\n<pre><code>&lt;div class=\"weekday-time\" id=\"time\"&gt;\n  &lt;%= form.hidden_field :weekday_id, value: form.options[:child_index] %&gt;\n  &lt;div class=\"col-md-9\"&gt;\n    &lt;div class=\"input-group bootstrap-timepicker timepicker\"&gt;\n      &lt;%= form.text_field :time, id: \"timepicker\" %&gt;\n      &lt;span class=\"input-group-addon\"&gt;&lt;i class=\"glyphicon glyphicon-time\"&gt;&lt;/i&gt;&lt;/span&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-3\"&gt;\n      &lt;%= link_to_remove_fields \"Delete Time, \"btn\", \"repeater-remove\", form %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>def new\n  @location = Location.new\n  @location.times.build\nend\n</code></pre>\n\n<p>Models</p>\n\n<pre><code>class Time &lt; ApplicationRecord\n  belongs_to :location, optional: true\nend\n\nclass Location &lt; ApplicationRecord\n  has_many :times, dependent: :destroy\n  accepts_nested_attributes_for :times\nend\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>After trying different things I got the result that I wanted. However, not sure if this is the best way to do it.</p>\n\n<p>application_helper.rb</p>\n\n<pre><code>module ApplicationHelper\n  def link_to_remove_fields(name, html_class, data_attr, html_id, form)\n    form.hidden_field(:_destroy) + link_to_function(name, html_class, html_id, data_attr, \"remove_fields(this)\")\n  end\n\n  def link_to_add_fields(name, html_class, html_id, data_attr, form, association, idx)\n    new_object = form.object.class.reflect_on_association(association).klass.new\n    fields = form.fields_for(association, new_object, :child_index =&gt; \"new_#{association}\") do |builder|\n      render(association.to_s.singularize + \"_fields\", :form =&gt; builder, idx: idx)\n    end\n    link_to_function(name, html_class, html_id, data_attr, \"add_fields(this, \\\"#{association}\\\", \\\"#{escape_javascript(fields)}\\\")\")\n  end\n\n  def link_to_function(name, html_class, html_id, data_attr, *args, &amp;block)\n     html_options = args.extract_options!.symbolize_keys\n\n     function = block_given? ? update_page(&amp;block) : args[0] || ''\n     onclick = \"#{\"#{html_options[:onclick]}; \" if html_options[:onclick]}#{function}; return false;\"\n     href = html_options[:href] || '#'\n\n     content_tag(:a, name, html_options.merge(:href =&gt; href, :onclick =&gt; onclick, :class =&gt; html_class, :id =&gt; html_id, :data_attr =&gt; data_attr))\n  end  \nend\n</code></pre>\n\n<p>location_controller.rb</p>\n\n<pre><code>def new\n  @location = Location.new\nend\n\ndef edit\n  @times = Times.where(location_id: @location.id)\nend\n</code></pre>\n\n<p>_time_fields.html.erb</p>\n\n<pre><code>&lt;div class=\"weekday-time\" id=\"time\"&gt;\n  &lt;%= form.hidden_field :weekday_id, value: idx %&gt;\n  &lt;div class=\"col-md-9\"&gt;\n    &lt;div class=\"input-group bootstrap-timepicker timepicker\"&gt;\n      &lt;%= form.text_field :time, id: \"timepicker\" %&gt;\n      &lt;span class=\"input-group-addon\"&gt;&lt;i class=\"glyphicon glyphicon-time\"&gt;&lt;/i&gt;&lt;/span&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-md-3\"&gt;\n    &lt;%= link_to_remove_fields \"Delete Time, \"btn\", \"plahecolder\", \"repeater-remove\", form %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>_form.html.erb</p>\n\n<pre><code>&lt;% (0..6).each do |idx| %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-2\"&gt;\n      &lt;p&gt;&lt;%= I18n.t('date.day_names')[idx] %&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-5\"&gt;\n      &lt;div id=\"time&lt;%= idx %&gt;\"&gt;\n        &lt;% _current_time = @location.new_record? ? @location.times.build : @times.where(location_id: idx) %&gt;\n        &lt;% unless _current_time.blank? %&gt;\n          &lt;%= form.fields_for :times, _current_time do |f| %&gt;\n            &lt;%= render \"time_fields\", :form =&gt; f, :idx =&gt; idx %&gt;\n          &lt;% end %&gt;\n        &lt;% end %&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;!-- add button --&gt;\n    &lt;div class=\"col-md-3\"&gt;\n      &lt;%= link_to_add_fields \"Add Time\", \"btn\", \"repeater-add\", \"time#{idx}\",  form, :times, idx %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>js</p>\n\n<pre><code>function remove_fields(link) {\n  $(link).prev(\"input[type=hidden]\").val(\"true\");\n  $(link).closest(\".weekday-time\").hide();\n}\n\nfunction add_fields(link, association, content) {\n  let _attr = $(link).attr('data_attr');\n  var new_id = new Date().getTime();\n  var regexp = new RegExp(\"new_\" + association, \"g\");\n  $(content.replace(regexp, new_id)).insertAfter($(\"#\" + _attr));\n}\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1132, "user_id": 1154044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b042060fc12ff39b4fbe94dcec7d8598?s=128&d=identicon&r=PG", "display_name": "cnnr", "link": "https://stackoverflow.com/users/1154044/cnnr"}, "edited": false, "score": 0, "creation_date": 1527512700, "post_id": 50567155, "comment_id": 88144272, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/36896936/optimization-for-finding-perfect-square-algorithm\">Optimization for finding perfect-square algorithm</a>"}, {"owner": {"reputation": 363, "user_id": 7534274, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9TCm.jpg?s=128&g=1", "display_name": "Xullnn", "link": "https://stackoverflow.com/users/7534274/xullnn"}, "edited": false, "score": 0, "creation_date": 1527512882, "post_id": 50567155, "comment_id": 88144360, "body": "<code>Math</code> should be capitalized, like <code>return true if Math.sqrt(x).is_a?(Integer</code>) . Also the name of the method could better to be <code>is_square?(x)</code>"}, {"owner": {"reputation": 80, "user_id": 9474631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sarah", "link": "https://stackoverflow.com/users/9474631/sarah"}, "edited": false, "score": 0, "creation_date": 1527513081, "post_id": 50567155, "comment_id": 88144480, "body": "Thank you.  I have just done that but it&#39;s still returning the following error messages:# main.rb:4:in <code>is_square&#39; main.rb:11:in </code>block (2 levels) in  &#39; /runner/frameworks/ruby/cw-2.rb:180:in <code>wrap_error&#39; &#47;runner&#47;frameworks&#47;ruby&#47;cw-2.rb:72:in </code>it&#39; /runner/frameworks/ruby/cw-2.rb:206:in <code>it&#39; main.rb:10:in </code>block in  &#39; /runner/frameworks/ruby/cw-2.rb:55:in <code>block in describe&#39; &#47;runner&#47;frameworks&#47;ruby&#47;cw-2.rb:46:in </code>measure&#39; /runner/frameworks/ruby/cw-2.rb:51:in <code>describe&#39; &#47;runner&#47;frameworks&#47;ruby&#47;cw-2.rb:202:in </code>describe&#39; main.rb:9:in ` &#39;"}, {"owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "edited": false, "score": 0, "creation_date": 1527513226, "post_id": 50567155, "comment_id": 88144568, "body": "What are you using to run the program?"}, {"owner": {"reputation": 80, "user_id": 9474631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sarah", "link": "https://stackoverflow.com/users/9474631/sarah"}, "edited": false, "score": 0, "creation_date": 1527513754, "post_id": 50567155, "comment_id": 88144853, "body": "It&#39;s on codewars.  It&#39;s still full of errors even when I divide by 1 to avoid getting a float... Don&#39;t worry, your answer was still very useful and helped me to learn more about coding!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1527520777, "post_id": 50567155, "comment_id": 88148640, "body": "What do you mean &quot;isn&#39;t working&quot;?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1527609783, "post_id": 50567155, "comment_id": 88186482, "body": "Can you explain what &quot;it doesn&#39;t work&quot; means? Do you get an error? If yes, what is the error? Do you get a wrong result? If yes, what is the result you get and what is the result you expect (and why do you expect to get that result)? Did you read what the documentation of <code>Math::sqrt</code> says about what it returns?"}], "answers": [{"comments": [{"owner": {"reputation": 80, "user_id": 9474631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sarah", "link": "https://stackoverflow.com/users/9474631/sarah"}, "edited": false, "score": 0, "creation_date": 1527513382, "post_id": 50567291, "comment_id": 88144659, "body": "Thank you. I have only recently started learning, hence the style errors."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1527525351, "post_id": 50567291, "comment_id": 88150634, "body": "The original version of the <a href=\"https://pragprog.com/book/ruby4/programming-ruby-1-9-2-0\" rel=\"nofollow noreferrer\">Pickaxe Book</a> is available <a href=\"http://ruby-doc.com/docs/ProgrammingRuby/\" rel=\"nofollow noreferrer\">for free</a> and is a great introduction to the Ruby language and its style conventions."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 4, "last_activity_date": 1527513540, "last_edit_date": 1527513540, "creation_date": 1527513041, "answer_id": 50567291, "question_id": 50567155, "link": "https://stackoverflow.com/questions/50567155/how-can-i-check-for-a-perfect-square-in-ruby/50567291#50567291", "title": "How can I check for a perfect square in Ruby?", "body": "<ol>\n<li>You mispelled <code>Math</code>, which is constant holding module designed for mathematic operations.</li>\n<li><code>Math.sqrt(9)</code> also returns float, so this isn't gonna work either. But you can check the remainder of division by <code>1</code>. </li>\n<li>Apart from this, the style in which you wrote this method is really bad, it can be written much better. </li>\n</ol>\n\n<p>To summarize, I would do something like this:</p>\n\n<pre><code>def is_square?(x)\n  (Math.sqrt(x) % 1).zero?\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80, "user_id": 9474631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sarah", "link": "https://stackoverflow.com/users/9474631/sarah"}, "edited": false, "score": 0, "creation_date": 1527513344, "post_id": 50567298, "comment_id": 88144640, "body": "Thank you!  This is a very detailed explanation :)"}], "tags": [], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "is_accepted": false, "score": 1, "last_activity_date": 1527513057, "creation_date": 1527513057, "answer_id": 50567298, "question_id": 50567155, "link": "https://stackoverflow.com/questions/50567155/how-can-i-check-for-a-perfect-square-in-ruby/50567298#50567298", "title": "How can I check for a perfect square in Ruby?", "body": "<p>First, you need to capitalise <code>math</code> to <code>Math</code>.</p>\n\n<p>The other problem with this code is the return value of <code>Math.sqrt</code>. Suppose you supply <code>4</code> as the value of <code>x</code>. <code>Math.sqrt</code> <em>always</em> returns a Float (a decimal), even if that Float happens to be a round number, so the result would be <code>2.0</code>. As far as Ruby is concerned, and most programming languages for that matter, <code>2.0</code> isn't an Integer. It's still a Float, just one which doesn't have any decimal portion.</p>\n\n<p>The easiest way to check if a Float is an integer is to mod it by 1 (that is, divide it by 1 and get the remainder), which may be done using <code>%</code>, and then check that this remainder is 0.</p>\n\n<pre><code>def is_square(x)\n  return true if Math.sqrt(x) % 1 == 0\nend\n</code></pre>\n\n<p>This function still isn't perfect though; it returns <code>true</code> for a square and <code>nil</code> for a non-square. It'd make more sense for it to return <code>false</code> for a non-square instead.</p>\n\n<p>This can be done by removing the <code>if</code>, and simply returning the result of the conditional. Also, <code>return</code> in Ruby isn't required for the last statement of a block.</p>\n\n<pre><code>def is_square(x)\n  Math.sqrt(x) % 1 == 0\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": false, "score": 3, "last_activity_date": 1527513070, "creation_date": 1527513070, "answer_id": 50567306, "question_id": 50567155, "link": "https://stackoverflow.com/questions/50567155/how-can-i-check-for-a-perfect-square-in-ruby/50567306#50567306", "title": "How can I check for a perfect square in Ruby?", "body": "<p>The result is aways a float:</p>\n\n<pre><code>Math.sqrt(4)\n# =&gt; 2.0\n\nMath.sqrt(4).class\n#  =&gt; Float\n</code></pre>\n\n<p>You need to check if the result is a number without decimal points:</p>\n\n<pre><code>def is_square(x)\n  Math.sqrt(x) % 1 == 0\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "is_accepted": false, "score": 0, "last_activity_date": 1527520616, "creation_date": 1527520616, "answer_id": 50569393, "question_id": 50567155, "link": "https://stackoverflow.com/questions/50567155/how-can-i-check-for-a-perfect-square-in-ruby/50569393#50569393", "title": "How can I check for a perfect square in Ruby?", "body": "<p>The result of <code>Math#sqrt</code> will never be an integer type, even for perfect squares. In general, type checks are not very helpful in Ruby.</p>\n\n<p>Instead, there are a couple strategies you can use to determine if a number is integer in Ruby.</p>\n\n<h2>Compare against coerced value:</h2>\n\n<pre><code>x == x.to_int\n</code></pre>\n\n<h2>Check if the denominator is 1:</h2>\n\n<pre><code>x.denominator == 1\n</code></pre>\n\n<h2>Check if the remainder modulo 1 is 0:</h2>\n\n<pre><code>x % 1 == 0\n</code></pre>\n\n<hr>\n\n<p>As an aside, idiomatic Ruby also doesn't use prefixes like <code>is_</code>, but instead adds a suffix question mark to predicate methods:</p>\n\n<pre><code>def perfect_square?(x)\n  # Implementation\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 0, "last_activity_date": 1606151447, "creation_date": 1606151447, "answer_id": 64972999, "question_id": 50567155, "link": "https://stackoverflow.com/questions/50567155/how-can-i-check-for-a-perfect-square-in-ruby/64972999#64972999", "title": "How can I check for a perfect square in Ruby?", "body": "<p>Since Ruby 2.5 the Integer class has <a href=\"https://ruby-doc.org/core-2.5.0/Integer.html#method-c-sqrt\" rel=\"nofollow noreferrer\">sqrt</a> , which returns the integer square root.</p>\n<pre><code>def is_square?(x)\n  Integer.sqrt(x) ** 2  == x\nend\n</code></pre>\n"}], "owner": {"reputation": 80, "user_id": 9474631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sarah", "link": "https://stackoverflow.com/users/9474631/sarah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3017, "favorite_count": 0, "answer_count": 5, "score": -2, "last_activity_date": 1606151447, "creation_date": 1527512587, "last_edit_date": 1527570136, "question_id": 50567155, "link": "https://stackoverflow.com/questions/50567155/how-can-i-check-for-a-perfect-square-in-ruby", "title": "How can I check for a perfect square in Ruby?", "body": "<p>I'm trying to check whether a number is a perfect square.</p>\n\n<p>This is my code:</p>\n\n<pre><code>def is_square(x)\n  return true if\n  math.sqrt(x).is_a? Integer\nend\n</code></pre>\n\n<p>Any idea why it doesn't work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1527511405, "post_id": 50566629, "comment_id": 88143448, "body": "<a href=\"https://stackoverflow.com/questions/89650/how-do-you-pass-arguments-to-define-method\" title=\"how do you pass arguments to define method\">stackoverflow.com/questions/89650/&hellip;</a>"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1527519212, "post_id": 50566629, "comment_id": 88147824, "body": "<code>pluralize</code> instead of <code>#{type}s</code>"}], "answers": [{"tags": [], "owner": {"reputation": 222, "user_id": 4335261, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/70a9df46e2e314ac0c7ea6d195baff0e?s=128&d=identicon&r=PG&f=1", "display_name": "Szymon", "link": "https://stackoverflow.com/users/4335261/szymon"}, "is_accepted": false, "score": 1, "last_activity_date": 1527511374, "creation_date": 1527511374, "answer_id": 50566780, "question_id": 50566629, "link": "https://stackoverflow.com/questions/50566629/rails-use-define-method-for-assignment-method-is-not-working/50566780#50566780", "title": "Rails use define_method for assignment method is not working", "body": "<p>You have to write something like this to make it work:</p>\n\n<pre><code>define_method \"#{type}s=\" do |objects|\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": true, "score": 2, "last_activity_date": 1527511404, "creation_date": 1527511404, "answer_id": 50566794, "question_id": 50566629, "link": "https://stackoverflow.com/questions/50566629/rails-use-define-method-for-assignment-method-is-not-working/50566794#50566794", "title": "Rails use define_method for assignment method is not working", "body": "<p><code>define_method</code> expects method name, not signature.</p>\n\n<pre><code>define_method \"#{type}s=\" do |objects|\n  puts objects\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1527514979, "creation_date": 1527514979, "answer_id": 50567824, "question_id": 50566629, "link": "https://stackoverflow.com/questions/50566629/rails-use-define-method-for-assignment-method-is-not-working/50567824#50567824", "title": "Rails use define_method for assignment method is not working", "body": "<p><code>\ndefine_method(symbol) { block } \u2192 symbol\n</code>\nThe actual method is in the block, and the params of block is the params of the actual method. Here is the description from Ruby docs. \nDefines an instance method in the receiver. The method parameter can be a Proc, a Method or an UnboundMethod object. If a block is specified, it is used as the method body. This block is evaluated using instance_eval, a point that is tricky to demonstrate because define_method is private. (This is why we resort to the send hack in this example.)</p>\n"}], "owner": {"reputation": 6665, "user_id": 650690, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/kxpMI.png?s=128&g=1", "display_name": "Petran", "link": "https://stackoverflow.com/users/650690/petran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 50566794, "answer_count": 3, "score": 0, "last_activity_date": 1527514979, "creation_date": 1527510948, "question_id": 50566629, "link": "https://stackoverflow.com/questions/50566629/rails-use-define-method-for-assignment-method-is-not-working", "title": "Rails use define_method for assignment method is not working", "body": "<p>I have a constant</p>\n\n<pre><code>TYPES = %w(car truck)\n</code></pre>\n\n<p>I want to define custom assignment methods dynalically </p>\n\n<pre><code>TYPES.each do |type|\n  define_method \"#{type}s=(objects)\" do\n</code></pre>\n\n<p>But it doesn't work, \nwhen I call</p>\n\n<pre><code>myobject.cars=objects\n</code></pre>\n\n<p>I am getting an error method doesn't exists although I can trace it</p>\n\n<pre><code>puts myobject.methods\n</code></pre>\n\n<p>does have a method</p>\n\n<pre><code>cars=(objects)\n</code></pre>\n"}, {"tags": ["ruby", "string"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1527511547, "creation_date": 1527511547, "answer_id": 50566833, "question_id": 50566512, "link": "https://stackoverflow.com/questions/50566512/scan-match-incorrect-input-error-messages/50566833#50566833", "title": "Scan/Match incorrect input error messages", "body": "<p>You might use <a href=\"http://www.rexegg.com/regex-lookarounds.html\" rel=\"nofollow noreferrer\">negative lookarounds</a>:</p>\n\n<pre><code>#\u21d2\u00a0[\"xxx test\", \"&lt;ex=1&gt;\"]\nm.scan(/&lt;ex=1&gt;(?!test).{,4}|.{,4}(?&lt;!&lt;ex=1&gt;)test/).map do |msg|\n  \"&lt;ex=1&gt;test expected, #{msg} got\"\nend.join(', ')\n</code></pre>\n\n<p>We scan the string for either <code>&lt;ex=1&gt;</code> not followed by <code>test</code> or vice versa. Also, we grab up to 4 characters that violate the rule for the more descriptive message.</p>\n"}], "owner": {"reputation": 17, "user_id": 6273607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ffb96b1c4ed9e4409ed0b018e9645a4?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby Learner", "link": "https://stackoverflow.com/users/6273607/ruby-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 50566833, "answer_count": 1, "score": 0, "last_activity_date": 1527569986, "creation_date": 1527510617, "last_edit_date": 1527569986, "question_id": 50566512, "link": "https://stackoverflow.com/questions/50566512/scan-match-incorrect-input-error-messages", "title": "Scan/Match incorrect input error messages", "body": "<p>I am trying to count the correct inputs from the user. An input looks like:</p>\n\n<pre><code>m = \"&lt;ex=1&gt;test xxxx &lt;ex=1&gt;test xxxxx test &lt;ex=1&gt;\"\n</code></pre>\n\n<p>The tag <code>ex=1</code> and the word <code>test</code> have to be connected and in this particular order to count as correct. In case of an invalid input, I want to send the user an error message that explains the error.</p>\n\n<p>I tried to do it as written below:</p>\n\n<pre><code>ex_test_size = m.scan(/&lt;ex=1&gt;test/).size  # =&gt; 2\ntest_size = m.scan(/test/).size  # =&gt; 3\nex_size = m.scan(/&lt;ex=1&gt;/).size  # =&gt; 3\n\nputs \"lack of tags(&lt;ex=1&gt;)\" if ex_test_size &lt; ex_size\nputs \"Lack of the word(test)\" if ex_test_size &lt; test_size\n</code></pre>\n\n<p>I believe it can be written in a better way as the way I wrote, I guess, is prone to errors. How can I make sure that all the errors will be found and shown to the user?</p>\n"}, {"tags": ["html", "ruby", "slider", "shopify", "liquid"], "comments": [{"owner": {"reputation": 602, "user_id": 3342628, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/eStRY.png?s=128&g=1", "display_name": "Manjunath", "link": "https://stackoverflow.com/users/3342628/manjunath"}, "edited": false, "score": 0, "creation_date": 1527510379, "post_id": 50566312, "comment_id": 88142862, "body": "You might have to check the theme files and check which .template file has your product images listed. I think it will be a loop with same class or under some other class. So target it using any slider like slick or owl slider plugins."}], "answers": [{"tags": [], "owner": {"reputation": 570, "user_id": 4015870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ot1PS.png?s=128&g=1", "display_name": "itsdarrylnorris", "link": "https://stackoverflow.com/users/4015870/itsdarrylnorris"}, "is_accepted": false, "score": 1, "last_activity_date": 1527532716, "creation_date": 1527532716, "answer_id": 50571952, "question_id": 50566312, "link": "https://stackoverflow.com/questions/50566312/product-page-images-slider-in-one-line-with-supply-theme-shopify/50571952#50571952", "title": "Product page images slider in one line with supply theme &quot;shopify&quot;", "body": "<p>One way to do it is to use a javascript library that will help you build a slider. A very popular library is <a href=\"https://owlcarousel2.github.io/OwlCarousel2/\" rel=\"nofollow noreferrer\">Owl Carousel</a>.</p>\n\n<p>I will recommend you to check out the demo of their <a href=\"https://owlcarousel2.github.io/OwlCarousel2/demos/basic.html\" rel=\"nofollow noreferrer\">basic carousel</a>.</p>\n\n<p>You can use the basic carousel and have another image tag that you are going to change base onClick on the picture that they click on the carousel.</p>\n"}, {"comments": [{"owner": {"reputation": 393, "user_id": 6399127, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/284c279ef66682bb64409ea3e0d89d18?s=128&d=identicon&r=PG&f=1", "display_name": "sam0101", "link": "https://stackoverflow.com/users/6399127/sam0101"}, "edited": false, "score": 0, "creation_date": 1527594867, "post_id": 50579459, "comment_id": 88176585, "body": "TY, will check it and back to you ;)"}], "tags": [], "owner": {"reputation": 505, "user_id": 5871172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-h0d2n4YEXl8/AAAAAAAAAAI/AAAAAAAAADA/0_AfEyGV_NA/photo.jpg?sz=128", "display_name": "Niraj patel", "link": "https://stackoverflow.com/users/5871172/niraj-patel"}, "is_accepted": false, "score": 1, "last_activity_date": 1527581680, "creation_date": 1527581680, "answer_id": 50579459, "question_id": 50566312, "link": "https://stackoverflow.com/questions/50566312/product-page-images-slider-in-one-line-with-supply-theme-shopify/50579459#50579459", "title": "Product page images slider in one line with supply theme &quot;shopify&quot;", "body": "<p>There is product.liquid file in templat folder you have to edit that find \"product.images\" and apply Slick Slider on there.\nIf there any Need i can help you.\nI am a shopify Expert with have 3 years experience on theme development and customizations</p>\n"}], "owner": {"reputation": 393, "user_id": 6399127, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/284c279ef66682bb64409ea3e0d89d18?s=128&d=identicon&r=PG&f=1", "display_name": "sam0101", "link": "https://stackoverflow.com/users/6399127/sam0101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1470, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1527581680, "creation_date": 1527510004, "question_id": 50566312, "link": "https://stackoverflow.com/questions/50566312/product-page-images-slider-in-one-line-with-supply-theme-shopify", "title": "Product page images slider in one line with supply theme &quot;shopify&quot;", "body": "<p>I want to make my images on the product page in one line and adding a slider. I am using a supply theme in shopify. I contact shopify and they told me that I have to pay for an expert, but I want to do it myself. does anyone have any information how to make these changes? Here is an example of product images that I want to add- <a href=\"https://smileathome.store/products/new-hot-super-powerful-fixate-gel-pad-strong-stick-glue-anywhere-wall-sticker-brand-convenient-gel-pad-portable\" rel=\"nofollow noreferrer\">product page</a></p>\n\n<p>The images are not on the same line.</p>\n"}, {"tags": ["ruby", "ssh", "server", "telnet"], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 5615805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be870b4579c74edf96d6c8208e68c67f?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Faldo", "link": "https://stackoverflow.com/users/5615805/robert-faldo"}, "edited": false, "score": 0, "creation_date": 1527510583, "post_id": 50566424, "comment_id": 88142975, "body": "Thank you so much! I think something that I&#39;ve just realised is that we&#39;re currently not on the same network. Usually we would be (you&#39;d be in the same classroom environment) but today is a UK bank holiday (a national day off) and therefore we&#39;re working from home.   Out of interest - is there a way to connect to someone who&#39;s not in the same network?"}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 1, "creation_date": 1527510655, "post_id": 50566424, "comment_id": 88143018, "body": "You could also use <code>TCPServer.new(&#39;0.0.0.0&#39;, &lt;port&gt;)</code>, right?"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1527602057, "post_id": 50566424, "comment_id": 88181512, "body": "Yes, 0.0.0.0 should work as well. Thanks, i&#39;ll add it to my answer :-)"}, {"owner": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "edited": false, "score": 0, "creation_date": 1527662017, "post_id": 50566424, "comment_id": 88204667, "body": "Same network or no, <code>TCPServer.new(2345)</code> binds to <code>localhost</code> only.  You cannot connect to that from another machine, period, even if its on the same LAN.  This question is more about networking than ruby."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 0, "last_activity_date": 1527601882, "last_edit_date": 1527601882, "creation_date": 1527510356, "answer_id": 50566424, "question_id": 50566173, "link": "https://stackoverflow.com/questions/50566173/simple-server-created-in-ruby-tcpserver-how-to-access-from-another-ip/50566424#50566424", "title": "Simple server created in Ruby (TCPServer), how to access from another IP?", "body": "<p>If your OS does not accept connections then there is nothing you can do about it on the Ruby level. You will need to disable the Firewall or add an exception for this port.</p>\n\n<p>Here are the three steps you'll need to take:</p>\n\n<p><strong>Make sure you bind the TCPServer to the \"public\" IP</strong></p>\n\n<p>Update: as @siegy22 pointed out in the comments: you can also use \"0.0.0.0\".</p>\n\n<p>You can find it in the Network Preferences or through <code>ipconfig</code></p>\n\n<pre><code>en0: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500\n    ether ca:fe:ca:fe:ca:fe\n    inet y.y.y.y netmask 0xffffff00 broadcast x.x.x.x\n    media: autoselect\n    status: active\n</code></pre>\n\n<p>Here <code>y.y.y.y</code> is the IP you are interested in. Create the TCTServer like so:</p>\n\n<pre><code>TCPServer.new(\"y.y.y.y\", 2345)\n</code></pre>\n\n<p><strong>Stop the Firewall of your Mac (or allow specific connection to that Port)</strong></p>\n\n<p>This you can do in Preferences/Securiry Section. </p>\n\n<p><em>RE-ENABLE it again after testing</em></p>\n\n<p><strong>Connect to the server from another computer</strong></p>\n\n<pre><code>telnet y.y.y.y 2345\n</code></pre>\n\n<p>The above steps assume both computers are in the same Network, no connection through internet. Should you be on a different Network (e.g. bot connected to the internet) there are two solutions that come to my mind</p>\n\n<ol>\n<li>Tunnel: Use a service such as ngrok (<a href=\"https://ngrok.com/\" rel=\"nofollow noreferrer\">https://ngrok.com/</a>) to create a tunnel to your server with a public address. Follow the instructions and you will receive a public address that your peer can use to connect.</li>\n<li>you could look up your public IP through a service (something like <a href=\"https://www.whatismyip.com/what-is-my-public-ip-address/\" rel=\"nofollow noreferrer\">https://www.whatismyip.com/what-is-my-public-ip-address/</a>) and then use this IP to connect. This might not work without further changes to your Network since your Router/Modem might/should block incoming connections and you would need to have some sort of forwarding to your Computer.</li>\n</ol>\n\n<p>I suggest you try ngrok (or something similar) first.</p>\n"}], "owner": {"reputation": 109, "user_id": 5615805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be870b4579c74edf96d6c8208e68c67f?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Faldo", "link": "https://stackoverflow.com/users/5615805/robert-faldo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527601882, "creation_date": 1527509503, "question_id": 50566173, "link": "https://stackoverflow.com/questions/50566173/simple-server-created-in-ruby-tcpserver-how-to-access-from-another-ip", "title": "Simple server created in Ruby (TCPServer), how to access from another IP?", "body": "<pre><code>require 'socket'  # Provides TCPServer and TCPSocket classes\n\n# Initialize a TCPServer object that will listen\n# on localhost:2345 for incoming connections\nserver = TCPServer.new(2345)\n\n\nloop do \n  # Wait until a client connects, then return a TCPSocket\n  # that can be used in a similar fashion to other Ruby\n  # I/O objects. (In fact, TCPSocket is a subclass of IO.)\n  socket = server.accept\n\n  socket.puts \"What do you say?\"\n\n  they_said = socket.gets.chomp\n\n  until they_said == \"quit\"\n    socket.puts \"You said: #{they_said}!\"\n    they_said = socket.gets.chomp\n  end\n\n  socket.puts \"You said: #{they_said}. Goodbye!\"\n\n  # Close the socket, terminating the connection\n  socket.close\n\n  end\n</code></pre>\n\n<p>In above code I've created a simple server in ruby (a topic I've just been introduced to). As part of the exercise, I have following instruction: </p>\n\n<p>\"Connect to your pair's laptop from your laptop. You'll need the network IP address of the laptop with the server on it for this\"</p>\n\n<p>We were using telnet, but it looks like we can't use that with our Macs because it's not allowed on High Siera (at least without further configuration). </p>\n\n<p>Can anyone suggest how we would do this, or point me in direction of material that will help?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1527506458, "post_id": 50565082, "comment_id": 88140512, "body": "There&#39;s no reason for this to work as you expect. Neither <code>include</code> nor <code>prepend</code> works on &#39;class methods&#39;."}, {"owner": {"reputation": 13, "user_id": 9083504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8430f5aff636fc0349e4d39f65a9983d?s=128&d=identicon&r=PG&f=1", "display_name": "Keith.Y", "link": "https://stackoverflow.com/users/9083504/keith-y"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1527508053, "post_id": 50565082, "comment_id": 88141484, "body": "@MarekLipka got it, thank u so much"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1527528034, "post_id": 50565234, "comment_id": 88151693, "body": "For those challenged by <code>class &lt;&lt; self</code>, it might be clearer to write <code>singleton_class.prepend PrependedModule::ClassMethods</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1527546563, "post_id": 50565234, "comment_id": 88157630, "body": "Back in the old days we didn&#39;t have <code>singleton_class</code>! :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1527567160, "post_id": 50565234, "comment_id": 88161522, "body": "@SergioTulentsev I doubt there was <code>prepend</code> back in that Stone Age."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1527506468, "creation_date": 1527506468, "answer_id": 50565234, "question_id": 50565082, "link": "https://stackoverflow.com/questions/50565082/ruby-prepend-doesnt-work-for-class-method/50565234#50565234", "title": "Ruby prepend doesn&#39;t work for class method", "body": "<p>Singleton classes do not work that way. You need to explicitly <code>prepend</code> the methods to the eigenclass of <code>SomeClass</code>:</p>\n\n<pre><code>module PrependedModule\n  module ClassMethods\n    def klass_method\n      puts 'PrependedModule klass_method'\n    end\n  end\n\n  def instance_method_a\n    puts 'PrepenedModule instance method'\n  end\nend\n\nclass SomeClass\n  # prepending to the class\n  prepend PrependedModule\n  class &lt;&lt; self\n    # prepending to the eigenclass\n    prepend PrependedModule::ClassMethods\n  end\n\n  def self.klass_method\n    puts 'SomeClass klass_method'\n  end\n\n  def instance_method_a\n    puts 'SomeClass instance_method'\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1527609910, "post_id": 50571950, "comment_id": 88186550, "body": "You don&#39;t need to call them instance methods. In fact, <i>there is only one kind of method in Ruby</i>, so there is no need to qualify them. But modules can have instances, for example every array is an instance of <code>Enumerable</code> (as well as of <code>Array</code>, <code>Object</code>, <code>Kernel</code>, and <code>BasicObject</code>)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1527617553, "post_id": 50571950, "comment_id": 88190324, "body": "@J&#246;rg, I may not need to call them <i>instance methods</i>, but everyone else will continue to do so, because it&#39;s part of the language (e.g., <a href=\"http://ruby-doc.org/core-2.4.0/Module.html#method-i-instance_methods\" rel=\"nofollow noreferrer\">Module#instance_methods</a>). <code>[].instance_of?(Enumerable) #=&gt; false</code>, so I don&#39;t know how you have defined <i>instance</i> in your second sentence. I know you&#39;ve said many times there is only one kind of method in Ruby. I would like to discuss that with you sometime but I don&#39;t think this is the place."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1527671707, "post_id": 50571950, "comment_id": 88210683, "body": "<code>instance_of?</code> only checks for direct instances. <code>kind_of?</code> or <code>is_a?</code> also checks transitively."}, {"owner": {"reputation": 2673, "user_id": 95705, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/f855da2838e28f18e3fdff4300d5c556?s=128&d=identicon&r=PG", "display_name": "Edward Ocampo-Gooding", "link": "https://stackoverflow.com/users/95705/edward-ocampo-gooding"}, "edited": false, "score": 1, "creation_date": 1585972504, "post_id": 50571950, "comment_id": 107959912, "body": "@CarySwoveland I learned a lot from your answer! Thanks for posting."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1527546328, "last_edit_date": 1527546328, "creation_date": 1527532709, "answer_id": 50571950, "question_id": 50565082, "link": "https://stackoverflow.com/questions/50565082/ruby-prepend-doesnt-work-for-class-method/50571950#50571950", "title": "Ruby prepend doesn&#39;t work for class method", "body": "<p>With <code>include</code> or <code>prepend</code> you can only gain access to a module's instance methods<sup>1</sup>. You therefore might ask if there is any reason to define module methods on a module. The answer is a resounding \"yes\". There are two reasons you might want to do that.</p>\n\n<p>The first has nothing to do with including or prepending the module. You need only look at the module <a href=\"http://ruby-doc.org/core-2.4.0/Math.html\" rel=\"nofollow noreferrer\">Math</a> to understand why you might want to do that. All methods defined on <code>Math</code> are module methods. These constitute a library of useful functions. They are of course methods, but since all have <code>Math</code> as their receiver, they behave like functions in non-OOP languages. </p>\n\n<p>The second reason is that you might want to define a <a href=\"https://www.sitepoint.com/rubys-important-hook-methods/\" rel=\"nofollow noreferrer\">callback method</a> (aka <em>hook</em> method) on a module that is to be included or prepended by another module. The main ones are <a href=\"https://ruby-doc.org/core-2.5.0/Module.html#method-i-included\" rel=\"nofollow noreferrer\">Module#included</a>, <a href=\"https://ruby-doc.org/core-2.5.0/Module.html#method-i-prepended\" rel=\"nofollow noreferrer\">Module#prepended</a>, <a href=\"https://ruby-doc.org/core-2.5.0/Module.html#method-i-extended\" rel=\"nofollow noreferrer\">Module#extended</a>, <a href=\"https://ruby-doc.org/core-2.5.0/Class.html#method-i-inherited\" rel=\"nofollow noreferrer\">Class#inherited</a> and <a href=\"https://ruby-doc.org/core-2.5.0/BasicObject.html#method-i-method_missing\" rel=\"nofollow noreferrer\">BasicObject#method_missing</a>. The last of these is an instance method; the others are module methods. An example of <code>Module#prepended</code> is given below.</p>\n\n<p>@mudasoba has shown how to confine instance methods to a sub-module <code>Sub</code> of <code>Mod</code> so that <code>Mod::Sub</code> can be prepended (or included) to a class's (or module's) singleton class. A commonly-used <em>pattern</em> for doing that employs the callback <code>Module#prepended</code>. It follows.</p>\n\n<pre><code>module PrependedModule\n  module ClassMethods\n    def klass_method\n      puts 'PrependedModule klass_method'\n    end\n  end\n\n  def instance_method_a\n    puts 'PrepenedModule instance method'\n  end\n\n  def self.prepended(mod)\n    mod.singleton_class.prepend(ClassMethods)\n  end\nend\n\nclass SomeClass\n  def self.klass_method\n    puts 'SomeClass klass_method'\n  end\n\n  def instance_method_a\n    puts 'SomeClass instance_method'\n  end\n\n  prepend PrependedModule\nend\n\nSomeClass.klass_method\n  # PrependedModule klass_method\nSomeClass.new.instance_method_a\n  # PrepenedModule instance method\n</code></pre>\n\n<p><sup>1 I've always found it curious that <em>instance methods</em> can be defined on modules (that are not classes), considering that such modules cannot have instances. True, these methods become instance methods in classes that include or prepend the module, but keep in mind that those modules can be included or prepended by other modules (that are not classes) as well. One might therefore expect such methods to have some name other than \"instance method\". Finding a suitable alternative would be a challenge, however, which is perhaps one reason why that nomenclature has persisted.</sup></p>\n"}], "owner": {"reputation": 13, "user_id": 9083504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8430f5aff636fc0349e4d39f65a9983d?s=128&d=identicon&r=PG&f=1", "display_name": "Keith.Y", "link": "https://stackoverflow.com/users/9083504/keith-y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1245, "favorite_count": 0, "accepted_answer_id": 50565234, "answer_count": 2, "score": 1, "last_activity_date": 1527546328, "creation_date": 1527505955, "question_id": 50565082, "link": "https://stackoverflow.com/questions/50565082/ruby-prepend-doesnt-work-for-class-method", "title": "Ruby prepend doesn&#39;t work for class method", "body": "<p>I'm trying to use prepend method in ruby to overwrite methods of a class, here is how my code works:</p>\n\n<pre><code>module PrependedModule\n  def self.klass_method\n    puts 'PrependedModule klass_method'\n  end\n\n  def instance_method_a\n    puts 'PrepenedModule instance method'\n  end\nend\n\nclass SomeClass\n  prepend PrependedModule\n\n  def self.klass_method\n    puts 'SomeClass klass_method'\n  end\n\n  def instance_method_a\n    puts 'SomeClass instance_method'\n  end\nend\n\nSomeClass.klass_method\nSomeClass.new.instance_method_a\n\n#output:\n#SomeClass klass_method\n#PrependedModule instance method\n\n#expected:\n#PrependedModule klass_method\n#PrependedModule instance method\n</code></pre>\n\n<p>The output of this script is shown above, as we can see, the instance method <code>instance_method_a</code> was overwritten by module <code>PrependedModule</code>, but  not the class method <code>klass_method</code>, when I called <code>klass_method</code> on <code>SomeClass</code>, it still executes it's origin method, instead of the one defined in <code>PrependedModule</code>.</p>\n\n<p>I'm confused about this and don't know what happend with class methods when using prepend. It would be a great help if anyone can solve this question for me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "edited": false, "score": 0, "creation_date": 1527505660, "post_id": 50564705, "comment_id": 88140012, "body": "I think it&#39;s perfect"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1527506574, "post_id": 50564705, "comment_id": 88140591, "body": "<code>(params[:from_date]..params[:to_date]).cover? product.created_at</code>"}, {"owner": {"reputation": 3, "user_id": 9858294, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dexter morgan", "link": "https://stackoverflow.com/users/9858294/dexter-morgan"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1527507818, "post_id": 50564705, "comment_id": 88141350, "body": "@mudasobwa its working fine, how cover? is different from include?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1527508092, "post_id": 50564705, "comment_id": 88141512, "body": "<a href=\"https://ruby-doc.org/core-2.5.1/Range.html#method-i-include-3F\" rel=\"nofollow noreferrer\"><code>Range#include?</code></a>  performs additional checks for whether the range is integer (click on \u201cview source\u201d.)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9858294, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dexter morgan", "link": "https://stackoverflow.com/users/9858294/dexter-morgan"}, "edited": false, "score": 0, "creation_date": 1527507435, "post_id": 50565447, "comment_id": 88141131, "body": "can&#39;t do that, because <code>product</code> is not coming from <code>Product.all</code>, It&#39;s coming from `@page_instance.users.includes(:products).map(&amp;:products), end result will be array anyway"}, {"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 1, "creation_date": 1527516638, "post_id": 50565447, "comment_id": 88146411, "body": "then you can instead of doing an include, change it for a join like this @page_instance.users.joins(:products).where(...) and do the filter there. if you really need the complete array first and then filter, the solution that you have at the moment is the one to go."}], "tags": [], "owner": {"reputation": 429, "user_id": 7617687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb0c380ac37c50e2c0574e0ecec1a98?s=128&d=identicon&r=PG&f=1", "display_name": "radoAngelov", "link": "https://stackoverflow.com/users/7617687/radoangelov"}, "is_accepted": false, "score": 1, "last_activity_date": 1527507131, "creation_date": 1527507131, "answer_id": 50565447, "question_id": 50564705, "link": "https://stackoverflow.com/questions/50564705/how-to-filter-array-with-date-range/50565447#50565447", "title": "how to filter array with date range?", "body": "<p>Have you thought of improving the SQL query? It looks like your array contains the <code>Products</code> that are result from a query like <code>Product.all</code>. Maybe you can change that to something like:</p>\n\n<pre><code>Product.where(\"created_at &gt;= :from_date AND created_at &lt;= :to_date\",\n  {from_date: params[:from_date], to_date: params[:to_date]})\n</code></pre>\n\n<p>I think that is more efficient approach because you will improve your app performance. And from my point of view the code looks more understandable this way.</p>\n"}], "owner": {"reputation": 3, "user_id": 9858294, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dexter morgan", "link": "https://stackoverflow.com/users/9858294/dexter-morgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527507131, "creation_date": 1527504749, "last_edit_date": 1527505749, "question_id": 50564705, "link": "https://stackoverflow.com/questions/50564705/how-to-filter-array-with-date-range", "title": "how to filter array with date range?", "body": "<pre><code>array = [#&lt;Product id: 206, product: \"first product\", created_at: \"2018-05-28 09:50:26\", updated_at: \"2018-05-28 09:50:26\"&gt;, #&lt;Product id: 207, product: \"second product\" ,created_at: \"2018-05-28 09:50:46\", updated_at: \"2018-05-28 09:50:46\"]\n\nparams[:from_date] = \"2018-04-28 09:50:26\"\n\nparams[:to_date] = \"2018-05-28 09:50:46\"\n</code></pre>\n\n<p>I'm filtering the above array with the following params <code>(params[:from_date], params[:to_date])</code>  using the below <code>select</code> statement.</p>\n\n<pre><code>array.select { |product| product.created_at &gt;= params[:from_date] &amp;&amp; product.created_at &lt;= params[:to_date] }\n</code></pre>\n\n<p>I think there are more efficient methods than the above.</p>\n\n<p>Are there any other methods to tackle this issue in a more efficient way?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "edited": false, "score": 0, "creation_date": 1527504027, "post_id": 50564400, "comment_id": 88139113, "body": "Which accents in particular do you wish to preserve? What languages are you dealing with?"}, {"owner": {"reputation": 403, "user_id": 6227057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e899d21cb72710b518e844a244e410a?s=128&d=identicon&r=PG", "display_name": "Ernesto G", "link": "https://stackoverflow.com/users/6227057/ernesto-g"}, "reply_to_user": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "edited": false, "score": 0, "creation_date": 1527504553, "post_id": 50564400, "comment_id": 88139410, "body": "Spanish and Catalonian, so I need to support both acute and grave accents"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1527511210, "post_id": 50564400, "comment_id": 88143339, "body": "<code>string.gsub(&#47;[[:punct:]]&#47;, &#39;&#39;)</code> removes punctuation characters."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1527506163, "post_id": 50564469, "comment_id": 88140325, "body": "Try <code>&quot;man\u0303ana&quot;</code>."}], "tags": [], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "is_accepted": false, "score": 0, "last_activity_date": 1527504247, "last_edit_date": 1527504247, "creation_date": 1527503897, "answer_id": 50564469, "question_id": 50564400, "link": "https://stackoverflow.com/questions/50564400/remove-non-alphanumeric-chars-from-string-preserving-accentuated-chars/50564469#50564469", "title": "Remove non alphanumeric chars from string preserving accentuated chars", "body": "<p>Borrowing from answers to <a href=\"https://stackoverflow.com/questions/20690499/concrete-javascript-regex-for-accented-characters-diacritics\">this question</a>, the regex character range for many, but not all, accented characters is <code>\u00c0-\u00ff</code>. Therefore, to match these too, you can simply add this to your existing ranges:</p>\n\n<pre><code>string.gsub(/[^0-9A-Za-z\u00c0-\u00ff]/, '')\n</code></pre>\n\n<p>It largely depends on the accents you're looking for, since there are too many accents to easily match <em>all</em> of them. This example regex will preserve for instance acute/grave accents, but misses crescents:</p>\n\n<pre><code>puts \"I went to a caf\u00e9.\".gsub(/[^0-9A-Za-z\u00c0-\u00ff]/, '') # Iwenttoacaf\u00e9\nputs \"Ahoj, sv\u011bte!\".gsub(/[^0-9A-Za-z\u00c0-\u00ff]/, '')      # Ahojsvte\n</code></pre>\n\n<p>This might be fine for your use case, but if you're dealing with, say, Czech text, you might need additional character ranges to match crescents.</p>\n"}, {"comments": [{"owner": {"reputation": 403, "user_id": 6227057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e899d21cb72710b518e844a244e410a?s=128&d=identicon&r=PG", "display_name": "Ernesto G", "link": "https://stackoverflow.com/users/6227057/ernesto-g"}, "edited": false, "score": 0, "creation_date": 1527505835, "post_id": 50564896, "comment_id": 88140120, "body": "Looks promising but it doesn&#39;t work, <code>&quot;t&#243;rica&quot;.gsub(&#47;[^[:alnum]]&#47;, &#39;&#39;)</code> returns <code>&quot;a&quot;</code>"}, {"owner": {"reputation": 429, "user_id": 7617687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb0c380ac37c50e2c0574e0ecec1a98?s=128&d=identicon&r=PG&f=1", "display_name": "radoAngelov", "link": "https://stackoverflow.com/users/7617687/radoangelov"}, "reply_to_user": {"reputation": 403, "user_id": 6227057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e899d21cb72710b518e844a244e410a?s=128&d=identicon&r=PG", "display_name": "Ernesto G", "link": "https://stackoverflow.com/users/6227057/ernesto-g"}, "edited": false, "score": 0, "creation_date": 1527506486, "post_id": 50564896, "comment_id": 88140533, "body": "Sorry I am missing one semicolon <code>:</code> in the example. It is edited now."}, {"owner": {"reputation": 403, "user_id": 6227057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e899d21cb72710b518e844a244e410a?s=128&d=identicon&r=PG", "display_name": "Ernesto G", "link": "https://stackoverflow.com/users/6227057/ernesto-g"}, "edited": false, "score": 0, "creation_date": 1527507623, "post_id": 50564896, "comment_id": 88141230, "body": "Thank you, that works. I will accept mudasobwa though since he answered before, still appreciated for your answer."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 403, "user_id": 6227057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e899d21cb72710b518e844a244e410a?s=128&d=identicon&r=PG", "display_name": "Ernesto G", "link": "https://stackoverflow.com/users/6227057/ernesto-g"}, "edited": false, "score": 0, "creation_date": 1527507690, "post_id": 50564896, "comment_id": 88141266, "body": "@ErnestoG no, this does not work. Try <code>&quot;man\u0303ana&quot;.gsub(&#47;[^[:alpha:]]&#47;, &#39;&#39;)</code>."}, {"owner": {"reputation": 403, "user_id": 6227057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e899d21cb72710b518e844a244e410a?s=128&d=identicon&r=PG", "display_name": "Ernesto G", "link": "https://stackoverflow.com/users/6227057/ernesto-g"}, "edited": false, "score": 0, "creation_date": 1527507831, "post_id": 50564896, "comment_id": 88141355, "body": "You are right sorry. It is weird though, if I type &quot;ma&#241;ana&quot; myself it works, if I copy your &quot;ma&#241;ana&quot; it doesn&#39;t (it outputs &quot;manana&quot;)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 403, "user_id": 6227057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e899d21cb72710b518e844a244e410a?s=128&d=identicon&r=PG", "display_name": "Ernesto G", "link": "https://stackoverflow.com/users/6227057/ernesto-g"}, "edited": false, "score": 2, "creation_date": 1527508273, "post_id": 50564896, "comment_id": 88141621, "body": "@ErnestoG it\u2019s not weird and I explained this behavior in my answer. When you type it using your keyboard, it spits out the <i>already combined</i> value. Even the length of these strings differs: <code>%w|man\u0303ana ma&#241;ana|.map(&amp;:length) #\u21d2\u00a0[7, 6]</code>. That\u2019s the reason of using <code>unicode_normalize(:nfc)</code> and that\u2019s why I wrote other answers here are <i>wrong</i>."}, {"owner": {"reputation": 403, "user_id": 6227057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e899d21cb72710b518e844a244e410a?s=128&d=identicon&r=PG", "display_name": "Ernesto G", "link": "https://stackoverflow.com/users/6227057/ernesto-g"}, "edited": false, "score": 0, "creation_date": 1527508453, "post_id": 50564896, "comment_id": 88141721, "body": "Perfectly clear now, thank you for such an accurate answer"}], "tags": [], "owner": {"reputation": 429, "user_id": 7617687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb0c380ac37c50e2c0574e0ecec1a98?s=128&d=identicon&r=PG&f=1", "display_name": "radoAngelov", "link": "https://stackoverflow.com/users/7617687/radoangelov"}, "is_accepted": false, "score": 1, "last_activity_date": 1527506545, "last_edit_date": 1527506545, "creation_date": 1527505335, "answer_id": 50564896, "question_id": 50564400, "link": "https://stackoverflow.com/questions/50564400/remove-non-alphanumeric-chars-from-string-preserving-accentuated-chars/50564896#50564896", "title": "Remove non alphanumeric chars from string preserving accentuated chars", "body": "<p>You can also use a <code>POSIX bracket expression</code>. You will find all needed <a href=\"https://ruby-doc.org/core-2.1.1/Regexp.html#class-Regexp-label-Character+Classes\" rel=\"nofollow noreferrer\">documentation</a> in the ruby-docs.</p>\n\n<p>In your case you can use either:</p>\n\n<pre><code>string.gsub(/[^[:alpha:]]/, '')\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>string.gsub(/[^[:alnum:]]/, '')\n</code></pre>\n\n<p>From the documentation:</p>\n\n<blockquote>\n  <p>/[[:alnum:]]/ - Alphabetic and numeric character</p>\n  \n  <p>/[[:alpha:]]/ - Alphabetic character</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "edited": false, "score": 0, "creation_date": 1527507512, "post_id": 50565033, "comment_id": 88141173, "body": "This answer seems much more sensible and comprehensive than mine. I&#39;ll have to remember this in future; thanks!"}, {"owner": {"reputation": 403, "user_id": 6227057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e899d21cb72710b518e844a244e410a?s=128&d=identicon&r=PG", "display_name": "Ernesto G", "link": "https://stackoverflow.com/users/6227057/ernesto-g"}, "edited": false, "score": 0, "creation_date": 1527507681, "post_id": 50565033, "comment_id": 88141259, "body": "Thank you, I have to use <code>&quot;Bar&#231;a&quot;.unicode_normalize(:nfc).gsub(&#47;[^\\p{L}]&#47;, &#39;&#39;)</code> since I&#39;m in Ruby 2.3.1, but it works."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1527507768, "post_id": 50565033, "comment_id": 88141313, "body": "Oh, indeed, I mistakenly thought <code>unicode_normalize</code> was introduced in <code>2.5</code> only. Will update the answer."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1527507784, "last_edit_date": 1527507784, "creation_date": 1527505806, "answer_id": 50565033, "question_id": 50564400, "link": "https://stackoverflow.com/questions/50564400/remove-non-alphanumeric-chars-from-string-preserving-accentuated-chars/50565033#50565033", "title": "Remove non alphanumeric chars from string preserving accentuated chars", "body": "<p>Both answers given here so far are plain wrong.</p>\n\n<p>There are two types of accents in the modern unicode: composed and combined diacritics (decomposed.) With Ruby 2.3+ everything is easy:</p>\n\n<pre><code>\"Bar\u00e7a\".unicode_normalize(:nfc).scan(/\\p{L}/)\n#\u21d2\u00a0[\"B\", \"a\", \"r\", \"\u00e7\", \"a\"]\n</code></pre>\n\n<p>The above will work no matter how \u201c\u00e7\u201d was constructed, as a Latin1 composed character, or as a combined diacritics.</p>\n\n<p>That said, to remove all <em>non</em> letters, one would do:</p>\n\n<pre><code>\"Bar\u00e7a\".unicode_normalize(:nfc).gsub(/[^\\p{L}]/, '')\n</code></pre>\n\n<p>Before Ruby 2.3 there was no standard way to normalize a string to composed form, and while for \u201cma\u00f1ana\u201d the simple range <code>\u00c0..\u00ff</code> would work (composed form,) for \u201cman\u0303ana\u201d it won\u2019t (combined diacritics.) You might ensure there is a difference yourself by copy-pasting both into your <code>irb</code> shell.</p>\n"}], "owner": {"reputation": 403, "user_id": 6227057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e899d21cb72710b518e844a244e410a?s=128&d=identicon&r=PG", "display_name": "Ernesto G", "link": "https://stackoverflow.com/users/6227057/ernesto-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 50565033, "answer_count": 3, "score": 0, "last_activity_date": 1527507784, "creation_date": 1527503681, "last_edit_date": 1527504580, "question_id": 50564400, "link": "https://stackoverflow.com/questions/50564400/remove-non-alphanumeric-chars-from-string-preserving-accentuated-chars", "title": "Remove non alphanumeric chars from string preserving accentuated chars", "body": "<p>I need to remove the chars such as \"+\", \"/\", \"_\" and similar from strings in order to perform a search method. </p>\n\n<p>According to other question here, I had this using the gsub method, the problem is that it also substitutes the accentuated letters, which I don't want to:</p>\n\n<p><code>string.gsub(/[^0-9A-Za-z]/, '')</code></p>\n\n<p>EDIT: The languagues I need to support are spanish and catalonian.</p>\n\n<p>Is there any way to adapt the expresion to preserve the letters with accents?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bcrypt-ruby"], "answers": [{"comments": [{"owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "edited": false, "score": 0, "creation_date": 1527505501, "post_id": 50564786, "comment_id": 88139925, "body": "Suppose I want to write a rspec test, where I validate the the current password and then update the current password with new password. In this case how will I achieve this?"}], "tags": [], "owner": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "is_accepted": false, "score": 0, "last_activity_date": 1527504979, "creation_date": 1527504979, "answer_id": 50564786, "question_id": 50564211, "link": "https://stackoverflow.com/questions/50564211/brcrypt-authenticate-method-not-working-with-already-brcypt-value/50564786#50564786", "title": "Brcrypt authenticate method not working with already brcypt value", "body": "<p>In you first line you pass the digested password, that (depending on your implementation or gem you are using) should be an one-way encrypted string from the original password. You have no way to verify this digest without the original password.</p>\n\n<p>While <code>try</code> is a great thing, it hides away all useful errors you could get.\nYour code would be better if you split up finding the user and authenticating the password.</p>\n"}], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527504979, "creation_date": 1527503055, "question_id": 50564211, "link": "https://stackoverflow.com/questions/50564211/brcrypt-authenticate-method-not-working-with-already-brcypt-value", "title": "Brcrypt authenticate method not working with already brcypt value", "body": "<p>I have a User Model with encryption using brcypt gem.</p>\n\n<p>However, when I am using the following code it is returning false as result.</p>\n\n<pre><code>User.find(117).try(:authenticate ,User.find(117).password_digest)\n</code></pre>\n\n<p>But below mentioned command works fine: </p>\n\n<pre><code>User.find(117).try(:authenticate ,\"password\")\n</code></pre>\n\n<p>It returns true.</p>\n\n<p>So how can I achieve the first conditions when I need to validate the password already stored in the database.</p>\n\n<p>Any help would be appreciated!!</p>\n"}, {"tags": ["ruby-on-rails", "angularjs", "json", "ruby", "restangular"], "comments": [{"owner": {"reputation": 13470, "user_id": 3092377, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/8lUZ9.jpg?s=128&g=1", "display_name": "Shashank Vivek", "link": "https://stackoverflow.com/users/3092377/shashank-vivek"}, "edited": false, "score": 1, "creation_date": 1527504121, "post_id": 50563990, "comment_id": 88139159, "body": "Checkout  <a href=\"https://www.w3schools.com/jsref/jsref_encodeURIComponent.asp\" rel=\"nofollow noreferrer\">w3schools.com/jsref/jsref_encodeURIComponent.asp</a> and then pass the output to the req"}], "answers": [{"tags": [], "owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "is_accepted": true, "score": 0, "last_activity_date": 1527504107, "creation_date": 1527504107, "answer_id": 50564520, "question_id": 50563990, "link": "https://stackoverflow.com/questions/50563990/pass-json-with-special-characters-angularjs-to-ruby/50564520#50564520", "title": "Pass json with special characters angularjs to ruby", "body": "<p>You need to encode your params first.</p>\n\n<p>So the encoded params will be: \n<code>{\"content\":\"my search is %3B and :\", \"options\":[]}</code> </p>\n\n<p>The following is also valid:\n<code>%7B%22content%22%3A%22my+search+is+%3B+and+%3A%22%2C+%22options%22%3A%5B%5D%7D</code></p>\n\n<p>You can encode URL using: <a href=\"https://www.w3schools.com/tags/ref_urlencode.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/tags/ref_urlencode.asp</a></p>\n\n<p>I am sure Angular will must have some library to encode the URLs.</p>\n\n<p>You could also use native <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent\" rel=\"nofollow noreferrer\">Javascript URL encoder</a>.  </p>\n\n<p>The <a href=\"https://stackoverflow.com/questions/33764518/how-to-unescape-in-query-string-double-semicolons\">similar question</a> was already answered on SO. </p>\n"}], "owner": {"reputation": 33, "user_id": 9208386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1419980fa9cebcee684de990d6256c19?s=128&d=identicon&r=PG&f=1", "display_name": "NEENU JOHNSON", "link": "https://stackoverflow.com/users/9208386/neenu-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 50564520, "answer_count": 1, "score": 0, "last_activity_date": 1527585709, "creation_date": 1527502286, "last_edit_date": 1527585709, "question_id": 50563990, "link": "https://stackoverflow.com/questions/50563990/pass-json-with-special-characters-angularjs-to-ruby", "title": "Pass json with special characters angularjs to ruby", "body": "<p>I need to make a search form, where the back end used is ruby and front end is angular. the search query is generated in angular in json format and is passed to ruby via restangular service.</p>\n\n<p>Its working fine. But when we tested the search string with semicolon it returned 500 Internal error. The first line <code>puts params[:search]</code> gives <code>{\"content\":\"my search is</code> for the actual json string <code>{\"content\":\"my search is ; and :\", \"options\":[]}</code></p>\n\n<p>Please help me on how to handle it \"<strong>;</strong>\" also please let me know what all characters I need to be handled.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows-10", "bcrypt-ruby", "rails-5.1.6"], "comments": [{"owner": {"reputation": 6486, "user_id": 1116230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55a894894150db28d6641f0c57e48bac?s=128&d=identicon&r=PG", "display_name": "Nico Haase", "link": "https://stackoverflow.com/users/1116230/nico-haase"}, "edited": false, "score": 0, "creation_date": 1527501651, "post_id": 50563751, "comment_id": 88137758, "body": "Can you share the code you use?"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1527502008, "post_id": 50563751, "comment_id": 88137980, "body": "Are you using windows or linux ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9857635"}, "reply_to_user": {"reputation": 6486, "user_id": 1116230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55a894894150db28d6641f0c57e48bac?s=128&d=identicon&r=PG", "display_name": "Nico Haase", "link": "https://stackoverflow.com/users/1116230/nico-haase"}, "edited": false, "score": 0, "creation_date": 1527502077, "post_id": 50563751, "comment_id": 88138020, "body": "@NicoHaase There is nothing wrong in code. Because it was working before and i referred this <a href=\"https://stackoverflow.com/questions/29293321/ruby-on-windows-causes-error-cannot-load-such-file-bcrypt-ext/33593911#33593911\" title=\"ruby on windows causes error cannot load such file bcrypt ext\">stackoverflow.com/questions/29293321/&hellip;</a> every time but now it is not working"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9857635"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1527502121, "post_id": 50563751, "comment_id": 88138040, "body": "@Vishal  yes i have installed ubuntu on windows"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1527502183, "post_id": 50563751, "comment_id": 88138077, "body": "@Amy install <code>sudo apt-get install libgmp-dev libgmp3-dev</code>"}, {"owner": {"reputation": 6486, "user_id": 1116230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55a894894150db28d6641f0c57e48bac?s=128&d=identicon&r=PG", "display_name": "Nico Haase", "link": "https://stackoverflow.com/users/1116230/nico-haase"}, "edited": false, "score": 0, "creation_date": 1527502237, "post_id": 50563751, "comment_id": 88138102, "body": "It&#39;s fine that there is &quot;nothing wrong in code&quot;, but without some sample code, we&#39;re not able to reproduce the problem"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9857635"}, "edited": false, "score": 0, "creation_date": 1527504199, "post_id": 50563751, "comment_id": 88139197, "body": "@NicoHaaseI have used devise gem for login functions. I have edited the post. plz, check the code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9857635"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1527504556, "post_id": 50563751, "comment_id": 88139413, "body": "@Vishal  I installed that but it is not working"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9857635"}, "edited": false, "score": 0, "creation_date": 1527574571, "post_id": 50566635, "comment_id": 88164001, "body": "The link helped me a lot. Thanks for that.I solved the issue."}], "tags": [], "owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "is_accepted": true, "score": 1, "last_activity_date": 1527510961, "creation_date": 1527510961, "answer_id": 50566635, "question_id": 50563751, "link": "https://stackoverflow.com/questions/50563751/loading-errorbcrypt/50566635#50566635", "title": "Loading error:bcrypt", "body": "<p>The gem's version you're trying to install might not be available yet on Windows. Have you tried installing a previous version of bcrypt? Or take a look at <a href=\"https://github.com/codahale/bcrypt-ruby/issues/139\" rel=\"nofollow noreferrer\">https://github.com/codahale/bcrypt-ruby/issues/139</a>, multiple solutions are provided.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9857635"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 50566635, "answer_count": 1, "score": 2, "last_activity_date": 1527510961, "creation_date": 1527501595, "last_edit_date": 1527510620, "question_id": 50563751, "link": "https://stackoverflow.com/questions/50563751/loading-errorbcrypt", "title": "Loading error:bcrypt", "body": "<p>I have created a admin panel using ROR platform. Now whenever I try to login I'm getting this error :</p>\n\n<blockquote>\n  <p>Cannot load such file bcrypt_ext</p>\n</blockquote>\n\n<p>I have come across this error in the past but used to rectify it by uninstalling and reinstalling it using the below steps:</p>\n\n<ol>\n<li>shut down all rails servers</li>\n<li>uninstall all versions of bcrypt</li>\n<li>manually install v3.1.1 (gem install bcrypt --platform=ruby)</li>\n<li>update gem files of projects </li>\n</ol>\n\n<p>But this time nothing works. I have referred many links but none helped. </p>\n\n<p>i'am working using Windows 10, Rails 5.1.6 and Ruby 2.3.3.</p>\n\n<p>i have used devise gem for login function and my user model looks like this</p>\n\n<pre><code>class User &lt; ApplicationRecord\n devise :database_authenticatable,#, :registerable,\n     :recoverable, :rememberable, :trackable, :validatable \n end \n</code></pre>\n\n<p>admin.controller</p>\n\n<pre><code>class AdminController &lt; ActionController::Base\n protect_from_forgery with: :exception\n before_action :authenticate_user!\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 28132, "user_id": 79980, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/09bbc36d6eb2bfdc5b54cf56f73e88f2?s=128&d=identicon&r=PG", "display_name": "useranon", "link": "https://stackoverflow.com/users/79980/useranon"}, "edited": false, "score": 0, "creation_date": 1539082637, "post_id": 50563645, "comment_id": 92363995, "body": "Can you specify what have you removed to make it work."}], "tags": [], "owner": {"reputation": 170, "user_id": 8574151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313acf5cfe0a0a7e497c9bb49578e75d?s=128&d=identicon&r=PG&f=1", "display_name": "Deno", "link": "https://stackoverflow.com/users/8574151/deno"}, "is_accepted": true, "score": 0, "last_activity_date": 1527501300, "creation_date": 1527501300, "answer_id": 50563645, "question_id": 50563227, "link": "https://stackoverflow.com/questions/50563227/tcp-connection-error-when-outgoing-post/50563645#50563645", "title": "TCP connection error when outgoing post", "body": "<p>The error because of url including \"https://\" , work after remove \"https://\" from url </p>\n"}], "owner": {"reputation": 170, "user_id": 8574151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313acf5cfe0a0a7e497c9bb49578e75d?s=128&d=identicon&r=PG&f=1", "display_name": "Deno", "link": "https://stackoverflow.com/users/8574151/deno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 50563645, "answer_count": 1, "score": 0, "last_activity_date": 1527501300, "creation_date": 1527500009, "last_edit_date": 1527501203, "question_id": 50563227, "link": "https://stackoverflow.com/questions/50563227/tcp-connection-error-when-outgoing-post", "title": "TCP connection error when outgoing post", "body": "<p>I try to apply an sms api to my code to my system and stuck at posting data. I  followed the sample code found online to post the data, but getting the error at below. I'm sure the host is valid and my internet connection is fine.</p>\n\n<blockquote>\n  <p>`rescue in block in connect': Failed to open TCP connection to\n  <a href=\"https://rest-api.moceansms.com:443\" rel=\"nofollow noreferrer\">https://rest-api.moceansms.com:443</a> (getaddrinfo: No such host is\n  known. ) (SocketError)</p>\n</blockquote>\n\n<p>Below is my code</p>\n\n<pre><code>require \"net/http\"\nurl = 'https://rest-api.moceansms.com'\nuri = '/rest/1/sms'\nparams = {'mocean-api-key'=&gt;'mykey','mocean-api-secret'=&gt;'secret','mocean-to'=&gt;'60162211800','mocean-from'=&gt;'63001','mocean-text'=&gt;'Hello world!!!'}\n\nbegin\n    http = Net::HTTP.new(url,443)  \n    http.use_ssl = true\n    request = Net::HTTP::Post.new(uri)\n    if params.size &gt; 0\n        request.form_data = params\n    end\n    puts http.request(request)\nrescue Exception\n    raise Exception.new('Unable connect to host')\nend\n</code></pre>\n"}]