[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1475104768, "post_id": 39759038, "comment_id": 66814177, "body": "<a href=\"http://apidock.com/rails/ActiveRecord/Migration/CheckPending\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/Migration/CheckPending</a>"}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 2, "creation_date": 1475104826, "post_id": 39759038, "comment_id": 66814190, "body": "In my experience it usually does this by default by displaying a generic &quot;We&#39;re sorry, something went wrong&quot; message when you try to hit the site.  Is this something that you&#39;re not seeing when you visit the site?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1475113885, "post_id": 39759038, "comment_id": 66815987, "body": "you could just put a <code>rake db:migrate</code> shell call in your <code>application.rb</code>."}, {"owner": {"reputation": 10234, "user_id": 138513, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/42b570f6f4312a872c2fc671e3ddc82b?s=128&d=identicon&r=PG", "display_name": "Trejkaz", "link": "https://stackoverflow.com/users/138513/trejkaz"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1475120006, "post_id": 39759038, "comment_id": 66817424, "body": "@Makoto Correct, the site loads as per normal, yes. The attribute in question just shows the null value everywhere. I think &quot;We&#39;re sorry, something went wrong&quot; only happens if you actually hit some code which fails. For instance, when we switched to Devise, the database still had crypted_password because the admin hadn&#39;t run that migration yet. That did show the &quot;something went wrong&quot; screen, but not because Rails had detected that the migration didn&#39;t run, just by pure luck that the login screen happened to use the attribute which changed."}, {"owner": {"reputation": 10234, "user_id": 138513, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/42b570f6f4312a872c2fc671e3ddc82b?s=128&d=identicon&r=PG", "display_name": "Trejkaz", "link": "https://stackoverflow.com/users/138513/trejkaz"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1475120072, "post_id": 39759038, "comment_id": 66817437, "body": "@maxpleaner I&#39;m scared that if the migration breaks, it might do something irreparable to the data. Usually it&#39;s better practice to do it as a deliberate step."}], "owner": {"reputation": 10234, "user_id": 138513, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/42b570f6f4312a872c2fc671e3ddc82b?s=128&d=identicon&r=PG", "display_name": "Trejkaz", "link": "https://stackoverflow.com/users/138513/trejkaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479358637, "creation_date": 1475104565, "last_edit_date": 1479358637, "question_id": 39759038, "link": "https://stackoverflow.com/questions/39759038/can-i-configure-rails-production-to-fail-on-startup-if-migrations-are-incomplete", "title": "Can I configure Rails production to fail on startup if migrations are incomplete?", "body": "<p>There is some issue going on with our staging server (staging environment is almost identical to production) where values for computed attributes aren't present for all the existing model objects. Of course, it works in my development environment.</p>\n\n<p>The values are inserted by a migration. Problem is, since it's the kind of migration which just changes data in the database and doesn't change the schema, it's impossible to know whether the admin forgot to run it.</p>\n\n<p>Meanwhile, when you run Rails tests, it refuses to run the tests at all if any migrations haven't been run. This sounds like something that should be done for production as well. I'm not sure why it isn't the default, but is there some way to do it?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I feel like I'm most of the way to figuring this out. There is a <code>db:abort_if_pending_migrations</code> task. I can't use the task, since I don't know whether the sysadmin will bypass that, but the code in it is useful.</p>\n\n<p>So in an initialiser, I put:</p>\n\n<pre><code>pending_migrations = ActiveRecord::Migrator.open(ActiveRecord::Tasks::DatabaseTasks.migrations_paths).pending_migrations\n\nif pending_migrations.any?\n  puts \"You have #{pending_migrations.size} pending #{pending_migrations.size &gt; 1 ? 'migrations:' : 'migration:'}\"\n  pending_migrations.each do |pending_migration|\n    puts '  %4d %s' % [pending_migration.version, pending_migration.name]\n  end\n  abort %{Run `rails db:migrate` to update your database then try again.}\nend\n</code></pre>\n\n<p>And this does work. But now there is a new problem - I can't run <code>db:migrate</code> either, since migrations also run the initialisers!</p>\n\n<p>Is there a good way to tell the difference between Rails starting up to run migrations and other situations?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree", "money-rails", "solidus"], "owner": {"reputation": 330, "user_id": 6267537, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154135589772152/picture?type=large", "display_name": "Jonathan Chevalier", "link": "https://stackoverflow.com/users/6267537/jonathan-chevalier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1475183417, "creation_date": 1475103053, "last_edit_date": 1475183417, "question_id": 39758825, "link": "https://stackoverflow.com/questions/39758825/solidus-2-0-0-and-currency-symbol-position-not-working", "title": "Solidus 2.0.0 and currency symbol_position not working", "body": "<p>I am having difficulties to change the symbol position from \"$ 100.00\" to \"100.00 $\" in Solidus 2.0.0</p>\n\n<p>I overided app/lib/spree/money.rb and I have added this line for</p>\n\n<pre><code> self.default_formatting_rules = {\n symbol_position: :after }\n</code></pre>\n\n<p>and basically when I am testing the code below its working :</p>\n\n<pre><code>pry(main)&gt; ::Money.default_formatting_rules = { symbol_position: :after }\n  =&gt; {:symbol_position=&gt;:after}\n[2] pry(main)&gt; Spree::Money.new(100).to_s\n  =&gt; \"100.00 $\"\n</code></pre>\n\n<p>But in my view it still showing the price as \"$ 100.00\", do you have any idea where this could come from ? I would greatly apreciate your help.</p>\n\n<p>Thanks a lot.</p>\n\n<p><strong>EDIT : Find the answer</strong> </p>\n\n<p>Actually the file money.rb is a gem file so it can not be overwritten (from what i understand) so i created </p>\n\n<p>/config/initializers/money_new_and_formatting.rb  </p>\n\n<p>Spree::Money.default_formatting_rules[:symbol_position] =  :after</p>\n\n<p>So its loading all the gem and environment and then Im accessing the Money class via the initializer folder and modifying the format.</p>\n\n<p>Cheers.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model-view-controller", "stripe-payments"], "comments": [{"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1475101316, "post_id": 39758330, "comment_id": 66813205, "body": "Without seeing your controller code, it&#39;s impossible to say for sure, but I strongly your validations haven&#39;t run <i>yet</i>, because you haven&#39;t done anything yet that triggers validations. Validations are only run when you try to save a record, if you explicitly call the <code>valid?</code> method, situations like that."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1475101889, "post_id": 39758330, "comment_id": 66813380, "body": "I&#39;ve just added controller. I&#39;m intrigued by your views - could you explain a little more what you mean, please?"}], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1475149391, "post_id": 39759495, "comment_id": 66832918, "body": "Where exactly do I do this? I&#39;ve placed it under def reserve(booking_params) and I&#39;m getting the same error. Do I need to make a @booking.reserve call in the controller?"}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1475187058, "post_id": 39759495, "comment_id": 66855775, "body": "You already have a call to <code>@booking.reserve</code> in the controller. That said, the <code>ActiveRecord::Base#valid?</code> doesn&#39;t raise exceptions, it just returns <code>true</code> or <code>false</code>, so, you need something like <code>if self.valid? proceed with the reservation else throw a fit end</code>. You could also just <code>save!</code> the booking record before even attempting to process the reservation, though that may require you to re-think other aspects of your workflow."}], "tags": [], "owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "is_accepted": false, "score": 0, "last_activity_date": 1475108357, "creation_date": 1475108357, "answer_id": 39759495, "question_id": 39758330, "link": "https://stackoverflow.com/questions/39758330/rails-argumenterror-in-bookingscontrollercreate-cant-multiply-a-money-by-a/39759495#39759495", "title": "Rails - ArgumentError in BookingsController#create, Can&#39;t multiply a Money by a NilClass&#39;s value", "body": "<p>In <code>BookingsController#create</code>, on  you call <code>@event.bookings.new(bookings_params)</code>. This creates a new <code>Booking</code> <em>object</em> in memory, but it doesn't yet create a <code>Booking</code> <em>record</em> in the database. It's always perfectly valid to call <code>Model.new()</code> with no arguments, even if you have plenty of validations; you'll just receive a model object that isn't valid. You can then do what you like with it, such as calling methods on it, setting attributes, checking to see if it <em>is</em> valid (with the <code>valid?</code> method), etc. As long as you've made it valid before you call <code>save</code> (or <code>save!</code>), everything is fine as far as the model object is concerned.</p>\n\n<p>So when, a few lines later, you call <code>@booking.reserve(booking_params['stripe_token'])</code>, which in turn calls <code>event.price * quantity</code>, you have no guarantee that <code>quantity</code> is not nil (or even \"apple\") because you haven't performed validations yet.</p>\n\n<p>There are a couple of ways you can work through this; the simplest would just be to check <code>self.valid?</code> from within <code>Booking#reserve</code>, before you do anything else with it.</p>\n"}], "owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475108357, "creation_date": 1475099876, "last_edit_date": 1475101850, "question_id": 39758330, "link": "https://stackoverflow.com/questions/39758330/rails-argumenterror-in-bookingscontrollercreate-cant-multiply-a-money-by-a", "title": "Rails - ArgumentError in BookingsController#create, Can&#39;t multiply a Money by a NilClass&#39;s value", "body": "<p>I'm getting the error code above in my Rails app when attempting to implement a payment/reservation process which allows a user to be able to book &amp; pay for spaces on an event. \nPreviously my code would only allow for a user to pay for one event space at a time. My code below is an attempt for a user to be able to pay for any number of spaces they require, subject to availability.\nThis is my model code -</p>\n\n<p><strong>Booking.rb</strong></p>\n\n<pre><code>   class Booking &lt; ActiveRecord::Base\n\n    belongs_to :event\n    belongs_to :user\n\n    validates :quantity, presence: true, numericality: { greater_than: 0 }\n    validates :total_amount, presence: true, numericality: { greater_than: 0 }\n    validates :event, presence: true, numericality: {greater_than_or_equal_to: 0 }\n\n    before_save :set_price_to_zero_if_free\n\n    def set_price_to_zero_if_free\n       self.event.price &gt;= 1    unless self.event.is_free\n    end\n\n    def reserve(stripe_token)\n        # Don't process this booking if it isn't valid\n        #if valid?\n\n                # Free events don't need to do anything special\n                if event.is_free?\n                save!\n\n                # Paid events should charge the customer's card\n                else\n\n                    begin\n                        self.total_amount = event.price * quantity\n                        charge = Stripe::Charge.create(\n                            amount: total_amount,\n                            currency: \"gbp\",\n                            source: stripe_token, \n                            description: \"Booking created for amount #{total_amount}\")\n                        self.stripe_charge_id = charge.id\n                        save!\n                    rescue Stripe::CardError =&gt; e\n                    errors.add(:base, e.message)\n                    false\n                end\n            end \n        #end\n    end\nend\n</code></pre>\n\n<p>And controller -</p>\n\n<p><strong>bookings_controller.rb</strong></p>\n\n<pre><code>    class BookingsController &lt; ApplicationController\n\n    before_action :authenticate_user!\n\n    def new\n        # booking form\n        # I need to find the event that we're making a booking on\n        @event = Event.find(params[:event_id])\n        # and because the event \"has_many :bookings\"\n        @booking = @event.bookings.new(quantity: params[:quantity])\n        # which person is booking the event?\n        @booking.user = current_user\n        #@booking.quantity = @booking.quantity\n        #@total_amount = @booking.quantity.to_f * @event.price.to_f\n\n\n    end\n\n    def create\n\n        # actually process the booking\n        @event = Event.find(params[:event_id])\n        @booking = @event.bookings.new(booking_params)\n        @booking.user = current_user\n\n            if \n                @booking.reserve(booking_params['stripe_token'])\n                flash[:success] = \"Your place on our event has been booked\"\n                redirect_to event_path(@event)\n            else\n                flash[:error] = \"Booking unsuccessful\"\n                render \"new\"\n            end\n    end\n\n\n    private\n\n    def booking_params\n        params.require(:booking).permit(:stripe_token, :quantity, :event_id, :stripe_charge_id, :total_amount)\n    end\n\n\n\nend\n</code></pre>\n\n<p>I'm pretty sure this points to 'quality' having a nil value. What I'm unclear on is why the validation hasn't sorted this out? What else could be causing this and if the validation isn't working, why not?</p>\n\n<p>Here's my Booking table in my schema. Do I need to add a default value here? How do I do the migration to add a default value? -</p>\n\n<pre><code>  create_table \"bookings\", force: :cascade do |t|\n    t.integer  \"event_id\"\n    t.integer  \"user_id\"\n    t.string   \"stripe_token\"\n    t.datetime \"created_at\",       null: false\n    t.datetime \"updated_at\",       null: false\n    t.integer  \"quantity\"\n    t.integer  \"total_amount\"\n    t.string   \"stripe_charge_id\"\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "error-handling", "airbrake"], "comments": [{"owner": {"reputation": 1564, "user_id": 511205, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d00fdaffce0316eaf114de1f9ea274cf?s=128&d=identicon&r=PG", "display_name": "kyrylo", "link": "https://stackoverflow.com/users/511205/kyrylo"}, "edited": false, "score": 1, "creation_date": 1475100186, "post_id": 39758257, "comment_id": 66812785, "body": "Are you 100% sure this doesn&#39;t work? Do you see anything strange in the logs? You should find those parameters in the Occurrences tab, inside the &quot;Parameters&quot; panel. By the way, I highly recommend to upgrade to Airbrake v5 because v4 meets its end of life in 2 months. See: <a href=\"https://github.com/airbrake/airbrake/issues/596\" rel=\"nofollow noreferrer\">github.com/airbrake/airbrake/issues/596</a>"}, {"owner": {"reputation": 366, "user_id": 4885544, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh5.googleusercontent.com/-H0p6asvUOZI/AAAAAAAAAAI/AAAAAAAAAM4/FJqaX7xIMtQ/photo.jpg?sz=128", "display_name": "sclem72", "link": "https://stackoverflow.com/users/4885544/sclem72"}, "reply_to_user": {"reputation": 1564, "user_id": 511205, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d00fdaffce0316eaf114de1f9ea274cf?s=128&d=identicon&r=PG", "display_name": "kyrylo", "link": "https://stackoverflow.com/users/511205/kyrylo"}, "edited": false, "score": 0, "creation_date": 1475100666, "post_id": 39758257, "comment_id": 66812966, "body": "I. Am. So sorry for wasting your time, that solution actually does work, after refreshing my sidekiq server, it works like a charm. I apologize. Thank you for your answer!"}], "owner": {"reputation": 366, "user_id": 4885544, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh5.googleusercontent.com/-H0p6asvUOZI/AAAAAAAAAAI/AAAAAAAAAM4/FJqaX7xIMtQ/photo.jpg?sz=128", "display_name": "sclem72", "link": "https://stackoverflow.com/users/4885544/sclem72"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517657299, "creation_date": 1475099471, "last_edit_date": 1517657299, "question_id": 39758257, "link": "https://stackoverflow.com/questions/39758257/passing-parameters-to-airbrake", "title": "Passing parameters to Airbrake", "body": "<p>I am using the Airbrake gem v 4.3.8 and so far, it is working well and sending notifications and emails without issue. Here is how my code is set up:</p>\n\n<pre><code>begin\n    # Do something crazy\nrescue TypeError =&gt; e\n    Airbrake.notify(e)\nend \n</code></pre>\n\n<p>I do know that you can edit the parameters, similar to how airbrake records parameters by default when you don't use the notify method. I am trying to find the correct syntax for editing the parameters of an Airbrake notification / log.\nI have tried something similar to this: <code>Airbrake.notify(e, parameters: {test: 'this is a test'})</code> but that didn't seem to work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime", "datetime-format"], "comments": [{"owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "edited": false, "score": 0, "creation_date": 1475099714, "post_id": 39758242, "comment_id": 66812592, "body": "can you confirm your <code>show_params</code> method contains a <code>date</code> value? also, can you edit in what the resulting html is from that form"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1475099967, "post_id": 39758242, "comment_id": 66812694, "body": "I&#39;m pretty sure <code>date</code> is a reserved word... could you try changing the field name to <code>show_date</code> (use a migration with <code>rename_column :shows, :date, :show_date</code>) and, of course, change the field name in the code and see if that makes a difference?"}, {"owner": {"reputation": 148, "user_id": 5161457, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/oIdj6.png?s=128&g=1", "display_name": "Jillian Hoenig", "link": "https://stackoverflow.com/users/5161457/jillian-hoenig"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1475100333, "post_id": 39758242, "comment_id": 66812847, "body": "Thanks for your comment @SteveTurczyn. It still doesn&#39;t work, even after I change the name of the attribute in the db and elsewhere, though..."}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1475114892, "post_id": 39758242, "comment_id": 66816208, "body": "Can you just change ` if @show.save` to ` if @show.save!` and see what the console says?  Also what is the param being passed in as the date?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1475136230, "post_id": 39758242, "comment_id": 66824112, "body": "@ruby_newbie not sure that&#39;s useful.  The record is being saved successfully, but with nil as the date."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1475136456, "post_id": 39758242, "comment_id": 66824248, "body": "I think there may be a problem with the date formatting from the form. Add the line <code>gem &#39;pry&#39;</code> to a development or development/test group and then insert the line <code>binding.pry</code> after <code>def create</code> and <code>def update</code>.  Run the development server, try to save a Show, and when the console stops, type <code>params</code> and <code>show_params</code> to see what the <code>show_date</code> parameter looks like."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1475137241, "post_id": 39758242, "comment_id": 66824743, "body": "Oh, and add what your <code>show_params</code> looks like to your original question."}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1475161762, "post_id": 39758242, "comment_id": 66842226, "body": "Can you please post the params.  Everyone has asked for the params, please provide them."}, {"owner": {"reputation": 148, "user_id": 5161457, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/oIdj6.png?s=128&g=1", "display_name": "Jillian Hoenig", "link": "https://stackoverflow.com/users/5161457/jillian-hoenig"}, "reply_to_user": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1475187564, "post_id": 39758242, "comment_id": 66855908, "body": "ok @ruby_newbie not sure what you&#39;re asking for. Do you mean my method &quot;show_params&quot;? If that&#39;s the case it&#39;s there. You&#39;ll just need to hover over the code and scroll down a little...."}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1475241091, "post_id": 39758242, "comment_id": 66877619, "body": "What we are asking for are the actual params.  You can find out what they are by following SteveTurczyn&#39;s instructions above with pry.  You can also put the line <code>puts params</code> after <code>def create</code> and <code>def update</code> and read the value from the logs.  Pry is an awesome tool though if you haven&#39;t used it before."}, {"owner": {"reputation": 148, "user_id": 5161457, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/oIdj6.png?s=128&g=1", "display_name": "Jillian Hoenig", "link": "https://stackoverflow.com/users/5161457/jillian-hoenig"}, "edited": false, "score": 0, "creation_date": 1475701128, "post_id": 39758242, "comment_id": 67054122, "body": "Ah. Okay, here are the params =&gt; {&quot;utf8&quot;=&gt;&quot;\u2713&quot;,  &quot;authenticity_token&quot;=&gt;&quot;ZiLHEGkMS8HSirVbWw4pkProaiVDHWXNrEAHe&zwnj;&#8203;OyQyzo=&quot;,  &quot;show&quot;=&gt;{&quot;name&quot;=&gt;&quot;test&quot;, &quot;show_date&quot;=&gt;&quot;1922-09-09 00:00:00&quot;, &quot;location&quot;=&gt;&quot;test&quot;, &quot;description&quot;=&gt;&quot;test&quot;, &quot;link&quot;=&gt;&quot;test&quot;},  &quot;commit&quot;=&gt;&quot;Submit&quot;,  &quot;action&quot;=&gt;&quot;create&quot;,  &quot;controller&quot;=&gt;&quot;shows&quot;}"}, {"owner": {"reputation": 148, "user_id": 5161457, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/oIdj6.png?s=128&g=1", "display_name": "Jillian Hoenig", "link": "https://stackoverflow.com/users/5161457/jillian-hoenig"}, "edited": false, "score": 0, "creation_date": 1475701189, "post_id": 39758242, "comment_id": 67054142, "body": "I&#39;ve tried a number of different formats, but this is the format I was able to save successfully in the console"}], "owner": {"reputation": 148, "user_id": 5161457, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/oIdj6.png?s=128&g=1", "display_name": "Jillian Hoenig", "link": "https://stackoverflow.com/users/5161457/jillian-hoenig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 412, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475099374, "creation_date": 1475099374, "question_id": 39758242, "link": "https://stackoverflow.com/questions/39758242/datetime-attribute-not-saving-to-database", "title": "Datetime attribute not saving to database", "body": "<p>I have a model that has a datetime attribute \"date\" in a model called \"show.\" however, when I try to save values for date in a form, whatever I input evaluates to nil. I noticed that this also is how \"created_at\" and \"updated_at\" evaluate.</p>\n\n<p>I am able to save values for 'date' in the rails console...</p>\n\n<p>Does anyone have an idea about why this happens? See my controller and form below.</p>\n\n<p>new.html.erb</p>\n\n<pre><code>Add a show\n\n&lt;%= form_for @show do |f| %&gt;\n  &lt;%= f.text_field :name, placeholder: \"name\", onclick: \"this.placeholder=''\", onblur: \"this.placeholder='name'\" %&gt;\n  &lt;%= f.datetime_field :date %&gt;\n  &lt;%= f.text_field :location, placeholder: \"location\", onclick: \"this.placeholder=''\", onblur: \"this.placeholder='location'\" %&gt;\n  &lt;%= f.file_field :flyer, placeholder: \"flyer\", onclick: \"this.placeholder=''\", onblur: \"this.placeholder='flyer'\" %&gt;\n  &lt;%= f.text_field :description, placeholder: \"description\", onclick: \"this.placeholder=''\", onblur: \"this.placeholder='description'\" %&gt;\n  &lt;%= f.submit \"Submit\", class: 'btn' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>shows_controller.rb</p>\n\n<pre><code>class ShowsController &lt; ApplicationController\n  def index\n    @shows = Show.all    \n  end\n\n  def new\n    @show = Show.new\n  end\n\n  def create\n    @show = Show.new(show_params)\n    if @show.save\n        redirect_to shows_path, notice: \"You've successfully uploaded a show.\"\n    else\n      redirect_to new_show_path, alert: \"Show could not be uploaded please try again.\"\n    end\n  end\n\n  def edit  \n    @show = Show.find(params[:id])\n  end\n  def update\n    @show = Show.find(params[:id])\n    if @show.update(show_params)\n      redirect_to shows_path, notice: \"You've updated a show.\"\n    else\n      redirect_to edit_show_path(@show), alert: \"That show was not updated.\"\n    end\n  end\n  def destroy\n    show = Show.find(params[:id])\n    if show.destroy\n      redirect_to shows_path, notice: \"#{show.name} has been deleted.\"\n    else\n      redirect_to show_path(show), alert: \"#{show.name} has not been deleted.\"\n    end\n  end\n  def show_params\n    params.require(:show).permit(:name, :date, :location, :flyer, :description)\n  end\nend\n</code></pre>\n\n<p>Note: I've tries using \"datetime_select\" as well.</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe", "chefdk"], "answers": [{"tags": [], "owner": {"reputation": 408, "user_id": 6829425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w7px6.jpg?s=128&g=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6829425/sid"}, "is_accepted": true, "score": 0, "last_activity_date": 1475113796, "creation_date": 1475113796, "answer_id": 39760137, "question_id": 39758158, "link": "https://stackoverflow.com/questions/39758158/what-is-the-difference-between-quotation-marks-and-the-colon-in-chef-attributes/39760137#39760137", "title": "What is the difference between quotation marks and the colon in chef attributes?", "body": "<p>Yes...colons are used for defining symbols while strings are defined by quotes... so:</p>\n\n<p><code>:variable1</code> is a symbol named variable1</p>\n\n<p><code>:'variable is 1'</code> is a symbol</p>\n\n<p><code>'variable1'</code>  - is a string</p>\n\n<p><code>\"variable#{1}\"</code>  - is a string that could have variables defined in it. Double quotes interpret the string while single quotes use the string as is.</p>\n\n<p>and </p>\n\n<p>'variable1'.to_sym is same as :variable1</p>\n"}, {"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1475118725, "creation_date": 1475118725, "answer_id": 39760808, "question_id": 39758158, "link": "https://stackoverflow.com/questions/39758158/what-is-the-difference-between-quotation-marks-and-the-colon-in-chef-attributes/39760808#39760808", "title": "What is the difference between quotation marks and the colon in chef attributes?", "body": "<p>As mentioned in Sid's answer, <code>:foo</code> is a symbol while <code>\"foo\"</code> and <code>'foo'</code> are strings. For node attributes we automatically convert things for you so both styles will work. The Foodcritic rules are there to ensure a consistent style in all your Chef code. If you don't have a reason to do otherwise, we recommend the string style as quoted strings are common in many programming languages and so are more likely to be understood by less Ruby-fluent readers.</p>\n"}], "owner": {"reputation": 35, "user_id": 5227026, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207155307831769/picture?type=large", "display_name": "ih16", "link": "https://stackoverflow.com/users/5227026/ih16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 2, "accepted_answer_id": 39760137, "answer_count": 2, "score": 1, "last_activity_date": 1475118725, "creation_date": 1475099021, "question_id": 39758158, "link": "https://stackoverflow.com/questions/39758158/what-is-the-difference-between-quotation-marks-and-the-colon-in-chef-attributes", "title": "What is the difference between quotation marks and the colon in chef attributes?", "body": "<p>I am currently creating a wrapper cookbook, while trying to restrict myself to the correct formatting by using Rubocop and Foodcritic. However, I constantly get the following errors:</p>\n\n<pre><code>Use strings in preference to symbols to access node attributes\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Access node attributes in a consistent manner\n</code></pre>\n\n<p>this made me wonder, Is there a difference between colons and quotation marks?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer", "mailer"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 4220103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a59a7d12cd105ad3a6ea102b336266e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4220103/sam"}, "edited": false, "score": 0, "creation_date": 1475106204, "post_id": 39758951, "comment_id": 66814505, "body": "I actually had a view already. I posted the html version, but there is a text one as well"}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 0, "last_activity_date": 1475103936, "creation_date": 1475103936, "answer_id": 39758951, "question_id": 39757868, "link": "https://stackoverflow.com/questions/39757868/usermailer-preview-issues-ruby-on-rails/39758951#39758951", "title": "UserMailer Preview issues Ruby on Rails", "body": "<p>You also need to create at least one <a href=\"http://guides.rubyonrails.org/action_mailer_basics.html#mailer-views\" rel=\"nofollow\">view template</a> for the mailer under <code>app/views/user_mailer</code>.  </p>\n\n<p>At its simplest, this can be a file called <code>account_activation.text.erb</code> containing some static text that will become the body of the email.</p>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 1264916, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e978b2580690e5cece6ef9427685eef6?s=128&d=identicon&r=PG", "display_name": "dugq", "link": "https://stackoverflow.com/users/1264916/dugq"}, "is_accepted": false, "score": 1, "last_activity_date": 1483896267, "last_edit_date": 1483896267, "creation_date": 1483893240, "answer_id": 41534971, "question_id": 39757868, "link": "https://stackoverflow.com/questions/39757868/usermailer-preview-issues-ruby-on-rails/41534971#41534971", "title": "UserMailer Preview issues Ruby on Rails", "body": "<p>What url are you trying to go to? I had this same issue, and it was because I was leaving the \"rails\" portion of the url out (because I thought that part was specific to the tutorial author's particular development environment (it's not)).</p>\n\n<p>Try going to <a href=\"http://localhost:3000/rails/mailers\" rel=\"nofollow noreferrer\">http://localhost:3000/rails/mailers</a>, which should list links to your previews.</p>\n"}], "owner": {"reputation": 101, "user_id": 4220103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a59a7d12cd105ad3a6ea102b336266e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4220103/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 931, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1483896267, "creation_date": 1475097637, "last_edit_date": 1475106156, "question_id": 39757868, "link": "https://stackoverflow.com/questions/39757868/usermailer-preview-issues-ruby-on-rails", "title": "UserMailer Preview issues Ruby on Rails", "body": "<p>I'm going through the Ruby on Rails tutorial and having trouble getting my UserMailer preview to work.  </p>\n\n<p>The error I am getting is that when I go to the server, it says <code>Mailer preview 'user_mailer/account_activation' not found</code>.</p>\n\n<p>I am following the code step by step, but it is not working. Here is what I have.</p>\n\n<p>app/mailers/user_mailer.rb\n    class UserMailer &lt; ApplicationMailer</p>\n\n<pre><code>  def account_activation(user)\n    @user = user\n    mail to: user.email, subject: \"Account activation\"\n  end\n</code></pre>\n\n<p>test/mailers/previews/user_mailer_previews</p>\n\n<pre><code>class UserMailerPreview &lt; ActionMailer::Preview\n\n  # Preview this email at\n  # http://localhost:3000/rails/mailers/user_mailer/account_activation\n  def account_activation\n    user = User.first\n    user.activation_token = User.new_token\n    UserMailer.account_activation(user)\n  end\n</code></pre>\n\n<p>config/environments/development.rb</p>\n\n<pre><code>  config.action_mailer.raise_delivery_errors = true\n  config.action_mailer.delivery_method = :test\n  host = 'localhost:3000'\n  config.action_mailer.default_url_options = { host: host, protocol: 'https' }\n</code></pre>\n\n<p>I have read and reread the code on the site <a href=\"https://www.railstutorial.org/book/account_activation\" rel=\"nofollow\">https://www.railstutorial.org/book/account_activation</a> and tried changing things out but had no luck</p>\n\n<p>Thank you in advance!</p>\n\n<p>edit: I actually already have a view, sorry should have included it earlier.</p>\n\n<p>app/views/user_mailer/account_activation.html.erb</p>\n\n<pre><code>&lt;h1&gt;Sample App&lt;/h1&gt;\n\n&lt;p&gt;Hi &lt;%= @user.name %&gt;,&lt;/p&gt;\n\n&lt;p&gt;\n  Welcome to the Sample App! Click on the link below to activate your account:\n&lt;/p&gt;\n\n&lt;%= link_to \"Activate\", edit_account_activation_url(@user.activation_token,\n                                                    email: @user.email) %&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "is_accepted": true, "score": 1, "last_activity_date": 1475096646, "last_edit_date": 1475096646, "creation_date": 1475096139, "answer_id": 39757490, "question_id": 39757436, "link": "https://stackoverflow.com/questions/39757436/ruby-string-interpolation-issue-with-net-imap-library/39757490#39757490", "title": "ruby string interpolation issue with net/imap library", "body": "<p><code>%y</code> in <a href=\"https://ruby-doc.org/core-2.3.0/Time.html#method-i-strftime\" rel=\"nofollow\"><code>Time#strftime</code></a> is the 2-digit year, and <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/net/imap/rdoc/Net/IMAP.html#method-i-search\" rel=\"nofollow\"><code>Net::IMAP#search</code> requires a 4-digit year</a>. You want <code>%Y</code>:</p>\n\n<pre><code>Time.now.strftime('%d-%b-%y') # =&gt; \"28-Sep-16\"\nTime.now.strftime('%d-%b-%Y') # =&gt; \"28-Sep-2016\"\n</code></pre>\n\n<p>This isn't just a requirement of Net::IMAP, it's actually <a href=\"https://tools.ietf.org/html/rfc3501#page-84\" rel=\"nofollow\">defined by the IMAP specification</a> on pages 84 and 85.</p>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 39757490, "answer_count": 1, "score": 0, "last_activity_date": 1475096646, "creation_date": 1475095906, "question_id": 39757436, "link": "https://stackoverflow.com/questions/39757436/ruby-string-interpolation-issue-with-net-imap-library", "title": "ruby string interpolation issue with net/imap library", "body": "<p>I am using ruby's built-in imap/net library. There seems to be an issue with string interpolation. The following works fine:</p>\n\n<pre><code>imap = Net::IMAP.new('imap.gmail.com',993, true)\nimap.login('myuser@gmail.com','password')    \nimap.select('INBOX')\nids = imap.search([\"SINCE\", \"26-Sep-2016\"])\n =&gt; [1, 2] \n</code></pre>\n\n<p>I used a string literal above. However, when I replace the string literal with the following, an error occurs:</p>\n\n<pre><code>imap = Net::IMAP.new('imap.gmail.com',993, true)\nimap.login('myuser@gmail.com','password')    \nimap.select('INBOX')\nids = imap.search([\"SINCE\", Time.now.strftime('%d-%b-%y')])\n =&gt; Net::IMAP::BadResponseError: Could not parse command\n</code></pre>\n\n<p>What does only a string literal work when the result of Time.now.strftime is a string literal? This is a standard library in ruby, so for sure it must work. What am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "fullcalendar"], "comments": [{"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1475096392, "post_id": 39757392, "comment_id": 66811091, "body": "I think step 3 is your problem"}, {"owner": {"reputation": 39, "user_id": 5463466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7cda16219496e2a4035c184917506da?s=128&d=identicon&r=PG&f=1", "display_name": "jkloster7", "link": "https://stackoverflow.com/users/5463466/jkloster7"}, "reply_to_user": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1475097070, "post_id": 39757392, "comment_id": 66811452, "body": "Ok I will look at it. Can you elaborate? What is wrong with step 3? How should I change it?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1475097081, "post_id": 39757392, "comment_id": 66811457, "body": "check your javascript errors in devtools. You probably have to use document ready as well, see <a href=\"http://stackoverflow.com/questions/18770517/rails-4-how-to-use-document-ready-with-turbo-links\" title=\"rails 4 how to use document ready with turbo links\">stackoverflow.com/questions/18770517/&hellip;</a>"}, {"owner": {"reputation": 39, "user_id": 5463466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7cda16219496e2a4035c184917506da?s=128&d=identicon&r=PG&f=1", "display_name": "jkloster7", "link": "https://stackoverflow.com/users/5463466/jkloster7"}, "edited": false, "score": 0, "creation_date": 1475097333, "post_id": 39757392, "comment_id": 66811582, "body": "I tried to add each of these individually but it didn&#39;t seem to fix the problem.   $document.ready(function(){ \t(&#39;#calendar&#39;).fullCalendar({}); })  $(document).on(&#39;turbolinks:load&#39;, function() {    (&#39;#calendar&#39;).fullCalendar({});  });"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5463466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7cda16219496e2a4035c184917506da?s=128&d=identicon&r=PG&f=1", "display_name": "jkloster7", "link": "https://stackoverflow.com/users/5463466/jkloster7"}, "edited": false, "score": 0, "creation_date": 1475098153, "post_id": 39757787, "comment_id": 66811957, "body": "Ok great. I will try these suggestions and see what happens. Thanks!"}, {"owner": {"reputation": 39, "user_id": 5463466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7cda16219496e2a4035c184917506da?s=128&d=identicon&r=PG&f=1", "display_name": "jkloster7", "link": "https://stackoverflow.com/users/5463466/jkloster7"}, "edited": false, "score": 0, "creation_date": 1475160505, "post_id": 39757787, "comment_id": 66841283, "body": "I&#39;ve tried everything and it&#39;s not working. Could it be a problem with my jquery? I have tried linking to a cdn, downloading a file, etc. But it&#39;s not working. My javascript works just fine. Here is what the head of my application.html.erb file looks like..."}, {"owner": {"reputation": 39, "user_id": 5463466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7cda16219496e2a4035c184917506da?s=128&d=identicon&r=PG&f=1", "display_name": "jkloster7", "link": "https://stackoverflow.com/users/5463466/jkloster7"}, "edited": false, "score": 0, "creation_date": 1475160564, "post_id": 39757787, "comment_id": 66841331, "body": "&lt;script src=&quot;<a href=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js&quot;&gt;&lt;/script\" rel=\"nofollow noreferrer\">ajax.googleapis.com/ajax/libs/jquery/3.1.0/&hellip;</a>&gt;   &lt;%= stylesheet_link_tag    &#39;application&#39;, media: &#39;all&#39;, &#39;data-turbolinks-track&#39; =&gt; true %&gt;   &lt;%= javascript_include_tag &#39;jquery-3.1.0&#39;, &#39;application&#39; %&gt;   &lt;%= javascript_include_tag &#39;application&#39;, &#39;data-turbolinks-track&#39; =&gt; true %&gt;   &lt;%= csrf_meta_tags %&gt;"}, {"owner": {"reputation": 39, "user_id": 5463466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7cda16219496e2a4035c184917506da?s=128&d=identicon&r=PG&f=1", "display_name": "jkloster7", "link": "https://stackoverflow.com/users/5463466/jkloster7"}, "edited": false, "score": 0, "creation_date": 1475160685, "post_id": 39757787, "comment_id": 66841421, "body": "In the console it is telling me that the files are not found."}, {"owner": {"reputation": 39, "user_id": 5463466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7cda16219496e2a4035c184917506da?s=128&d=identicon&r=PG&f=1", "display_name": "jkloster7", "link": "https://stackoverflow.com/users/5463466/jkloster7"}, "edited": false, "score": 0, "creation_date": 1475160931, "post_id": 39757787, "comment_id": 66841615, "body": "So sorry I kept messing with it and now my test JQuery is working, however I still can&#39;t get the fullCalendar to work. I&#39;ll keep at it."}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "reply_to_user": {"reputation": 39, "user_id": 5463466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7cda16219496e2a4035c184917506da?s=128&d=identicon&r=PG&f=1", "display_name": "jkloster7", "link": "https://stackoverflow.com/users/5463466/jkloster7"}, "edited": false, "score": 0, "creation_date": 1475161152, "post_id": 39757787, "comment_id": 66841790, "body": "are you actually giving it event data?"}], "tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": true, "score": 3, "last_activity_date": 1475097337, "creation_date": 1475097337, "answer_id": 39757787, "question_id": 39757392, "link": "https://stackoverflow.com/questions/39757392/fullcalendar-in-ruby-on-rails-is-not-working/39757787#39757787", "title": "FullCalendar In Ruby on Rails Is Not Working", "body": "<p>You have to add options to the <code>fullCalendar</code> plugin so that it knows where to fetch event data from:</p>\n\n<pre><code>$('#calendar').fullCalendar({\n    eventSources: [\"/events\"]\n});\n</code></pre>\n\n<p>In the above example <code>/events</code> is a path to a controller of yours from which you will respond with Event Data</p>\n\n<p><a href=\"https://fullcalendar.io/docs/event_data/\" rel=\"nofollow\">https://fullcalendar.io/docs/event_data/</a></p>\n\n<p>Alternatively, you can provide your own event data directly to the <code>fullCalendar</code> plugin:</p>\n\n<pre><code>$('#calendar').fullCalendar({\n    events: [\n        {\n            title  : 'event1',\n            start  : '2010-01-01'\n        },\n        {\n            title  : 'event2',\n            start  : '2010-01-05',\n            end    : '2010-01-07'\n        },\n        {\n            title  : 'event3',\n            start  : '2010-01-09T12:30:00',\n            allDay : false // will make the time show\n        }\n    ]\n});\n</code></pre>\n\n<p><a href=\"https://fullcalendar.io/docs/event_data/events_array/\" rel=\"nofollow\">https://fullcalendar.io/docs/event_data/events_array/</a></p>\n\n<p>It will also help to place the plugin initializer inside a jQuery ready function so that the DOM loads first:</p>\n\n<pre><code>$(function() {\n  $('#calendar').fullCalendar({ eventSources: [\"/events\"] });\n})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6004157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/913f3317a71c92b3cf6a8a5d39c6226b?s=128&d=identicon&r=PG&f=1", "display_name": "sschlegelmilch", "link": "https://stackoverflow.com/users/6004157/sschlegelmilch"}, "is_accepted": false, "score": 1, "last_activity_date": 1525356379, "creation_date": 1525356379, "answer_id": 50157053, "question_id": 39757392, "link": "https://stackoverflow.com/questions/39757392/fullcalendar-in-ruby-on-rails-is-not-working/50157053#50157053", "title": "FullCalendar In Ruby on Rails Is Not Working", "body": "<p>I have been wrestling with FullCalendar for weeks. I know the question was posted some 20 months ago but perhaps my answer will help others in the future.</p>\n\n<p>Make sure your date format is correct! If it works by setting the event data directly such as Diego suggested above then you know that\u2019s the problem.</p>\n\n<p>start : \u20182018-05-03\u2019 or \u20182018\u201305-03 12:30\u2019 works</p>\n\n<p>Transferring event data from ruby (or other application language) to json is problematic. Some have suggested using the \u2018gon\u2019 gem but I am still working on that. </p>\n"}], "owner": {"reputation": 39, "user_id": 5463466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7cda16219496e2a4035c184917506da?s=128&d=identicon&r=PG&f=1", "display_name": "jkloster7", "link": "https://stackoverflow.com/users/5463466/jkloster7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1616, "favorite_count": 0, "accepted_answer_id": 39757787, "answer_count": 2, "score": 1, "last_activity_date": 1525356379, "creation_date": 1475095744, "last_edit_date": 1475097100, "question_id": 39757392, "link": "https://stackoverflow.com/questions/39757392/fullcalendar-in-ruby-on-rails-is-not-working", "title": "FullCalendar In Ruby on Rails Is Not Working", "body": "<p>I'm trying to add a calendar to my web app but it's not working. I followed the instructions below and I can't get the calendar to populate.</p>\n\n<p>Do I need to write all the Javascript as well? This seems like a quick step to install a calendar. I'm sure I'm missing some steps for installation but this is what I found online.</p>\n\n<ol>\n<li><p>Add to gemfile\u2028   </p>\n\n<pre><code>gem 'fullcalendar-rails'\ngem 'momentjs-rails'\n</code></pre></li>\n</ol>\n\n<p>\n\u20282. Bundle install and restart rails server.</p>\n\n<p>\u20283. Add to application.js\u2028   </p>\n\n<pre><code>    //= require moment \n    //= require fullcalendar\n    $('#calendar').fullCalendar({});\n</code></pre>\n\n<ol start=\"4\">\n<li><p>Add to application.css\u2028 </p>\n\n<pre><code>*= require fullcalendar\n</code></pre></li>\n<li><p>In view, include the following html:\u2028 </p>\n\n<pre><code>&lt;div id=\"calendar\"&gt;&lt;/div&gt;\n</code></pre></li>\n</ol>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 3629, "user_id": 337446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/04ed2b23acc1400315dd1fb5f364b065?s=128&d=identicon&r=PG", "display_name": "swrobel", "link": "https://stackoverflow.com/users/337446/swrobel"}, "edited": false, "score": 0, "creation_date": 1475102032, "post_id": 39757272, "comment_id": 66813413, "body": "Thanks for the answers so far. Is there not a way to do this without two passes through gsub?"}], "answers": [{"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1475096326, "post_id": 39757474, "comment_id": 66811054, "body": "Also, see <a href=\"http://www.tutorialspoint.com/execute_ruby_online.php?PID=0Bw_CjBb95KQMUkFROTlJbmVjTTA\" rel=\"nofollow noreferrer\">this online demo</a>. Also, to support the <i>balanced</i> parentheses in Group 2, you might want to change the Group 2 pattern to <code>(\\((?:[^()]++|\\g&lt;2&gt;)*\\))</code>. See <a href=\"http://rubular.com/r/mXy2sEpnyV\" rel=\"nofollow noreferrer\">this Rubular demo</a>."}, {"owner": {"reputation": 854, "user_id": 1023151, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/247ed0c5f19ca3c7ab6004245a0000e6?s=128&d=identicon&r=PG", "display_name": "mosid", "link": "https://stackoverflow.com/users/1023151/mosid"}, "edited": false, "score": 0, "creation_date": 1475947430, "post_id": 39757474, "comment_id": 67152277, "body": "Your answer i think is the closest one,but  there is something wrong here, &quot;mixin&quot; is a keyword in sass(output), not less(input). the word &quot;mixin&quot; in the input could be of any value. But the output MUST contain the keyword @mixin."}, {"owner": {"reputation": 854, "user_id": 1023151, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/247ed0c5f19ca3c7ab6004245a0000e6?s=128&d=identicon&r=PG", "display_name": "mosid", "link": "https://stackoverflow.com/users/1023151/mosid"}, "edited": false, "score": 0, "creation_date": 1475948091, "post_id": 39757474, "comment_id": 67152518, "body": "And the mixin in the output begins with &quot;@&quot; not &quot;#&quot;"}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 0, "last_activity_date": 1475096059, "creation_date": 1475096059, "answer_id": 39757474, "question_id": 39757272, "link": "https://stackoverflow.com/questions/39757272/regular-expression-replacement-to-convert-less-mixins-to-scss/39757474#39757474", "title": "Regular Expression replacement to convert Less mixins to Scss", "body": "<p>I suggest adding two capturing groups round the subvalues you need and using an additional <code>gsub</code> in the first <code>gsub</code> block to replace the <code>;</code> with <code>,</code> only in the 2nd group.</p>\n\n<p>See</p>\n\n<pre><code>s = \".mixin(0; 1; 2);\"\nputs s.gsub(/\\.([\\w\\-]+)(\\(.*\\))/) { \"##{$1}#{$2.gsub(/;/, ',')}\" }\n# =&gt; #mixin(0, 1, 2); \n</code></pre>\n\n<p>The pattern details:</p>\n\n<ul>\n<li><code>\\.</code> - a literal dot</li>\n<li><code>([\\w\\-]+)</code>  - Group 1 capturing 1 or more word chars (<code>[a-zA-Z0-9_]</code>) or <code>-</code></li>\n<li><code>(\\(.*\\))</code> - Group 2 capturing a <code>(</code>, then any 0+ chars other than linebreak symbols as many as possible up to the last <code>)</code> and the last <code>)</code>. <strong>NOTE</strong>: if there are multiple values, use <em>lazy matching</em> - <code>(\\(.*?\\))</code>  - here.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1475096092, "creation_date": 1475096092, "answer_id": 39757478, "question_id": 39757272, "link": "https://stackoverflow.com/questions/39757272/regular-expression-replacement-to-convert-less-mixins-to-scss/39757478#39757478", "title": "Regular Expression replacement to convert Less mixins to Scss", "body": "<p>Here you go:</p>\n\n<pre><code>less_style = \".mixin(0; 1; 2);\"\n\n# convert the first period to @\nless_style.gsub! /^\\./, '@'\n\n# convert the inner semicolons to commas\nscss_style = less_style.gsub /(?&lt;=[\\(\\d]);/, ','\n\nscss_style\n# =&gt; \"@mixin(0, 1, 2);\"\n</code></pre>\n\n<p>The second regex is using positive lookbehinds. You can read about those here: <a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"nofollow\">http://www.regular-expressions.info/lookaround.html</a></p>\n\n<p>I also use this neat web app to play around with regexes: <a href=\"http://rubular.com/\" rel=\"nofollow\">http://rubular.com/</a></p>\n"}, {"tags": [], "owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "is_accepted": false, "score": 0, "last_activity_date": 1475181558, "last_edit_date": 1475181558, "creation_date": 1475107835, "answer_id": 39759436, "question_id": 39757272, "link": "https://stackoverflow.com/questions/39757272/regular-expression-replacement-to-convert-less-mixins-to-scss/39759436#39759436", "title": "Regular Expression replacement to convert Less mixins to Scss", "body": "<p>This will get you a single pass through gsub:</p>\n\n<pre><code>\".mixin(0; 1; 2);\".gsub(/(?&lt;!\\));|\\./, \";\" =&gt; \",\", \".\" =&gt; \"@\")\n =&gt; \"@mixin(0, 1, 2);\" \n</code></pre>\n\n<p>It's an OR regex with a hash for the replacement parameters.</p>\n\n<p>Assuming from your example that you just want to replace semicolons not following close parens(negative lookbehind): <code>(?&lt;!\\));</code></p>\n\n<p>You can modify/build on this with other expressions. Even add more OR conditions to the regex.</p>\n\n<p>Also, you can use the block version of gsub if you need more options.</p>\n"}], "owner": {"reputation": 3629, "user_id": 337446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/04ed2b23acc1400315dd1fb5f364b065?s=128&d=identicon&r=PG", "display_name": "swrobel", "link": "https://stackoverflow.com/users/337446/swrobel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1475181558, "creation_date": 1475095327, "last_edit_date": 1475173248, "question_id": 39757272, "link": "https://stackoverflow.com/questions/39757272/regular-expression-replacement-to-convert-less-mixins-to-scss", "title": "Regular Expression replacement to convert Less mixins to Scss", "body": "<p>I'm looking to convert Less mixin calls to their equivalents in Scss:</p>\n\n<ol>\n<li><code>.mixin();</code> should become <code>@mixin();</code></li>\n<li><code>.mixin(0);</code> should become <code>@mixin(0);</code></li>\n<li><code>.mixin(0; 1; 2);</code> should become <code>@mixin(0, 1, 2);</code></li>\n</ol>\n\n<p>I'm having the most difficulty with the third example, as I essentially need to match <code>n</code> groups separated by semicolons, and replace those with the same groups separated by commas. I suppose this relies on some sort of repeating groups functionality in regexes that I'm not familiar with.</p>\n\n<p>It's not simply enough to simply replace semicolons within paren - I need a regex that will only match the <code>\\.[\\w\\-]+\\(.*\\)</code> format of mixins, but obviously with some magic in the second match group to handle the 3rd example above.</p>\n\n<p>I'm doing this in Ruby, so if you're able to provide replacement syntax that's compatible with <code>gsub</code>, that would be awesome. <strong>I would like a single regex replacement, something that doesn't require multiple passes to clean up the semicolons.</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 880, "user_id": 3334690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1a9715a46ee28e3151148688c0149f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3334690", "link": "https://stackoverflow.com/users/3334690/user3334690"}, "edited": false, "score": 0, "creation_date": 1475095804, "post_id": 39757076, "comment_id": 66810801, "body": "Your given example of games.attributes[&#39;dlc&#39;] is one that has two values.  What are you expecting for those?"}, {"owner": {"reputation": 1516, "user_id": 541135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bY90S.jpg?s=128&g=1", "display_name": "Technoh", "link": "https://stackoverflow.com/users/541135/technoh"}, "reply_to_user": {"reputation": 880, "user_id": 3334690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1a9715a46ee28e3151148688c0149f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3334690", "link": "https://stackoverflow.com/users/3334690/user3334690"}, "edited": false, "score": 0, "creation_date": 1475106250, "post_id": 39757076, "comment_id": 66814512, "body": "That <code>game.attributes[&#39;dlc&#39;]</code> is an array (or hash) with all values."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1475114012, "post_id": 39757076, "comment_id": 66816026, "body": "map through the records to turn each one into a hash, you can have the hash include associated records this way too."}, {"owner": {"reputation": 1516, "user_id": 541135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bY90S.jpg?s=128&g=1", "display_name": "Technoh", "link": "https://stackoverflow.com/users/541135/technoh"}, "edited": false, "score": 0, "creation_date": 1475245817, "post_id": 39757076, "comment_id": 66880745, "body": "This was my thought too. I was thinking of using the <code>after_find</code> callback, can you think of anything that would render this inefficient?"}], "answers": [{"comments": [{"owner": {"reputation": 1516, "user_id": 541135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bY90S.jpg?s=128&g=1", "display_name": "Technoh", "link": "https://stackoverflow.com/users/541135/technoh"}, "edited": false, "score": 0, "creation_date": 1475245559, "post_id": 39760186, "comment_id": 66880576, "body": "Sorry if it wasn&#39;t clear, <code>Game</code> objects have <code>Attribute</code> objects, some of which - sometimes more than one per <code>Game</code> - have a property <code>name</code> equal to <code>dlc</code>. My thought after some more research was to use the <code>after_find</code> callback to <code>map</code> through all attributes of a game and put them in a hash."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 1516, "user_id": 541135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bY90S.jpg?s=128&g=1", "display_name": "Technoh", "link": "https://stackoverflow.com/users/541135/technoh"}, "edited": false, "score": 0, "creation_date": 1475256753, "post_id": 39760186, "comment_id": 66886851, "body": "oh, i see what you mean now. your focus is on making a special case for hash key collision, so that when reading the values get turned into an array. What is the benefit of structuring hashes like this in the first place if you&#39;re going to have to jump hoops to get the data out? Regardless, I&#39;ll update my answer showing you."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1475256973, "last_edit_date": 1475256973, "creation_date": 1475114155, "answer_id": 39760186, "question_id": 39757076, "link": "https://stackoverflow.com/questions/39757076/how-can-i-transform-linked-records-into-a-hash/39760186#39760186", "title": "How can I transform linked records into a hash?", "body": "<p>If you have a list of records like <code>games = Game.all</code>\nand <code>Game</code> objects have associated <code>DLC</code> objects, you can do this:</p>\n\n<pre><code>game_hashes_with_dlc_info = games.map do |game|\n  game.attributes.merge(dlc: game.dlc.map(&amp;:attributes))\nend\n</code></pre>\n\n<hr>\n\n<p>in response to your comment</p>\n\n<p>Given a hash like <code>{ foo: \"1\", foo: \"2\", bar: \"1\", bar: \"2\" }</code></p>\n\n<p>that you want to turn into <code>{ foo: [\"1\", \"2\"], bar: [\"1\", \"2\"] }</code></p>\n\n<pre><code>hash_1.reduce({}) do |new_hash, (hash_1_key, hash_1_val)|\n  if new_hash.has_key? hash_1_key\n    new_hash[hash_1_key].push(hash_1_val)\n  else\n    new_hash[hash_1_key] = [hash_1_val]\n  end\n  new_hash\nend\n</code></pre>\n\n<p>this has the effect of making <em>all</em> the hash values arrays, which may not be what you want. </p>\n"}, {"tags": [], "owner": {"reputation": 880, "user_id": 3334690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1a9715a46ee28e3151148688c0149f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3334690", "link": "https://stackoverflow.com/users/3334690/user3334690"}, "is_accepted": false, "score": 0, "last_activity_date": 1475590131, "creation_date": 1475590131, "answer_id": 39854505, "question_id": 39757076, "link": "https://stackoverflow.com/questions/39757076/how-can-i-transform-linked-records-into-a-hash/39854505#39854505", "title": "How can I transform linked records into a hash?", "body": "<p>You could probably use group_by to get what you want.  Something along the lines of the following will probably work.</p>\n\n<pre><code>class Game &lt; ActiveRecord::Base\n    has_many :game_attributes, :class_name =&gt; \"Attribute\"\n\n    def game_attributes\n        result = super\n        result.to_a.group_by{|a| a[\"name\"]}\n    end\nend\n</code></pre>\n\n<p>This means that game.game_attributes[\"dlc\"] will return all Attribute objects associated with that game.  This does end up hiding the active record relation so you may want to define a new method rather than override this one depending on what you intend to do.</p>\n"}], "owner": {"reputation": 1516, "user_id": 541135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bY90S.jpg?s=128&g=1", "display_name": "Technoh", "link": "https://stackoverflow.com/users/541135/technoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475590131, "creation_date": 1475094559, "question_id": 39757076, "link": "https://stackoverflow.com/questions/39757076/how-can-i-transform-linked-records-into-a-hash", "title": "How can I transform linked records into a hash?", "body": "<p>I am building an application with a database table for games. All games have different attributes, although some attributes are the same for each game, mostly name and type. I store all the attributes in a separate table so that they can be searchable. Every game has a <code>has_many</code> relationship to attributes.</p>\n\n<pre><code>Table games\nid       int     primary key\nname     string  unique\ntype     string\n\nTable attributes\nid       int     primary_key\ngame_id  int\nname     string\nvalue    text\n</code></pre>\n\n<p>For example the game \"Nyan Cat Adventures in Space\" (made up name) could have the following attributes:</p>\n\n<pre><code>id   game_id    name      value\n4    344        dlc       99\n5    344        packages  2209\n6    344        language  \"Space Cat\"\n7    344        dlc       551\n</code></pre>\n\n<p>I need the attributes to be fully searchable (and indexed). I would like to be able to transform the attributes into a hash so that I could access certain attributes like this: <code>game.attributes['dlc']</code>. Note however that some attributes can have the same name. What is the best way to achieve this, should I extend ActiveRecord::Base? Is there a function or callback I can use?</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-ec2", "aws-sdk"], "answers": [{"comments": [{"owner": {"reputation": 1310, "user_id": 4308473, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3Pk1P.png?s=128&g=1", "display_name": "Berlin", "link": "https://stackoverflow.com/users/4308473/berlin"}, "edited": false, "score": 0, "creation_date": 1475101168, "post_id": 39757818, "comment_id": 66813146, "body": "thanks @Nathan, when I tried to print the snapshots ids <code>puts snapshot.snapshot_id</code> I got an error <code>method_missing&#39;: undefined method </code>snapshot_id&#39; for #&lt;Seahorse::Client::Response:0x00000002bb9340&gt; (NoMethodError)` `"}, {"owner": {"reputation": 1310, "user_id": 4308473, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3Pk1P.png?s=128&g=1", "display_name": "Berlin", "link": "https://stackoverflow.com/users/4308473/berlin"}, "edited": false, "score": 0, "creation_date": 1475101603, "post_id": 39757818, "comment_id": 66813305, "body": "also another error with your soultion :/  <code>include?&#39;: undefined method each&#39; for #&lt;struct Aws::EC2::Types::Tag key=&quot;GROUP&quot;, value=&quot;PROD&quot;&gt; (NoMethodError)</code>"}, {"owner": {"reputation": 375, "user_id": 2130922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ac51d388c5372658b6ff54b968e713?s=128&d=identicon&r=PG", "display_name": "Nathan V", "link": "https://stackoverflow.com/users/2130922/nathan-v"}, "reply_to_user": {"reputation": 1310, "user_id": 4308473, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3Pk1P.png?s=128&g=1", "display_name": "Berlin", "link": "https://stackoverflow.com/users/4308473/berlin"}, "edited": false, "score": 2, "creation_date": 1475127659, "post_id": 39757818, "comment_id": 66819609, "body": "Updated code block; I just tested this in IRB and it runs fine. I get back an empty set [] for the tags since I don&#39;t have snapshot_expire as a tag anywhere but it runs and prints out nicely."}, {"owner": {"reputation": 1310, "user_id": 4308473, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3Pk1P.png?s=128&g=1", "display_name": "Berlin", "link": "https://stackoverflow.com/users/4308473/berlin"}, "edited": false, "score": 0, "creation_date": 1475127835, "post_id": 39757818, "comment_id": 66819682, "body": "nice, thanks~ the result of <code>tagkeyexpire</code> is <code>[#&lt;struct Aws::EC2::Types::Tag key=&quot;snapshot_expire&quot;, value=&quot;2016-09-30 04:30:11 +0000&quot;&gt;]</code>, is there a way to take only the date ? <code>2016-09-30</code>, to do something with ruby."}, {"owner": {"reputation": 1310, "user_id": 4308473, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3Pk1P.png?s=128&g=1", "display_name": "Berlin", "link": "https://stackoverflow.com/users/4308473/berlin"}, "edited": false, "score": 0, "creation_date": 1475128274, "post_id": 39757818, "comment_id": 66819856, "body": "or maybe is it possible to get only the value of the <code>tag.key</code>  <code>snapshot_expire</code> ?"}, {"owner": {"reputation": 375, "user_id": 2130922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ac51d388c5372658b6ff54b968e713?s=128&d=identicon&r=PG", "display_name": "Nathan V", "link": "https://stackoverflow.com/users/2130922/nathan-v"}, "reply_to_user": {"reputation": 1310, "user_id": 4308473, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3Pk1P.png?s=128&g=1", "display_name": "Berlin", "link": "https://stackoverflow.com/users/4308473/berlin"}, "edited": false, "score": 0, "creation_date": 1475129247, "post_id": 39757818, "comment_id": 66820251, "body": "Updated, see above. :)"}, {"owner": {"reputation": 1310, "user_id": 4308473, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3Pk1P.png?s=128&g=1", "display_name": "Berlin", "link": "https://stackoverflow.com/users/4308473/berlin"}, "edited": false, "score": 0, "creation_date": 1475151584, "post_id": 39757818, "comment_id": 66834637, "body": "do you know maybe why when I tried to delete snapshot with <code>snapshot.delete</code> or <code>snapshot.delete_snapshot</code> , I got an error <code>undefined method delete_snapshot&#39; for #&lt;Aws::EC2::Types::Snapshot:0x00000001ab7c18&gt; (NoMethodError)</code> or <code>undefined method delete&#39; for #&lt;Aws::EC2::Types::Snapshot:0x00000001d3ee28&gt; (NoMethodError)</code>"}, {"owner": {"reputation": 375, "user_id": 2130922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ac51d388c5372658b6ff54b968e713?s=128&d=identicon&r=PG", "display_name": "Nathan V", "link": "https://stackoverflow.com/users/2130922/nathan-v"}, "reply_to_user": {"reputation": 1310, "user_id": 4308473, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3Pk1P.png?s=128&g=1", "display_name": "Berlin", "link": "https://stackoverflow.com/users/4308473/berlin"}, "edited": false, "score": 1, "creation_date": 1475187707, "post_id": 39757818, "comment_id": 66855948, "body": "The snapshot object is just the response. You can feed the snap ID into the ec2.delete_snapshot call and that will do it (looks like you found that already). :)"}], "tags": [], "owner": {"reputation": 375, "user_id": 2130922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ac51d388c5372658b6ff54b968e713?s=128&d=identicon&r=PG", "display_name": "Nathan V", "link": "https://stackoverflow.com/users/2130922/nathan-v"}, "is_accepted": true, "score": 1, "last_activity_date": 1475129225, "last_edit_date": 1475129225, "creation_date": 1475097440, "answer_id": 39757818, "question_id": 39756997, "link": "https://stackoverflow.com/questions/39756997/ruby-aws-sdk-v2-how-to-get-the-value-of-snapshot-tag/39757818#39757818", "title": "ruby aws sdk v2 how to get the value of snapshot tag", "body": "<p>Reference: <a href=\"http://docs.aws.amazon.com/sdkforruby/api/Aws/EC2/Client.html#describe_snapshots-instance_method\" rel=\"nofollow\">http://docs.aws.amazon.com/sdkforruby/api/Aws/EC2/Client.html#describe_snapshots-instance_method</a></p>\n\n<p>The 'snapshots' are returned as objects. You can get the specific snapshot data from the object using methods; see the documentation above. The snapshot ID is available by calling snapshot.snapshot_id. Tags are snapshot.tags.</p>\n\n<pre><code>require 'aws-sdk'\nrequire 'date'\nec2 = Aws::EC2::Client.new(region: 'us-east-1')\n\nsnapshot_response = ec2.describe_snapshots(owner_ids:['xxx'])\nsnapshot_response.snapshots.each do |snapshot|\n  tagkeyexpire = snapshot.tags.select{|tag| tag.key == 'snapshot_expire'}\n  snapid = snapshot.snapshot_id\n  expiredate = Date.parse(tagkeyexpire[0].value) unless tagkeyexpire == []\n  puts \"#{snapid} : #{expiredate}\"\nend\n</code></pre>\n\n<p>Output looks like</p>\n\n<pre><code>snap-01234567 : 2016-09-30\n</code></pre>\n"}], "owner": {"reputation": 1310, "user_id": 4308473, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3Pk1P.png?s=128&g=1", "display_name": "Berlin", "link": "https://stackoverflow.com/users/4308473/berlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "accepted_answer_id": 39757818, "answer_count": 1, "score": 0, "last_activity_date": 1475129225, "creation_date": 1475094218, "last_edit_date": 1475127375, "question_id": 39756997, "link": "https://stackoverflow.com/questions/39756997/ruby-aws-sdk-v2-how-to-get-the-value-of-snapshot-tag", "title": "ruby aws sdk v2 how to get the value of snapshot tag", "body": "<p>The result of <code>p snapshot.tags</code> is:</p>\n\n<pre><code>[#&lt;struct Aws::EC2::Types::Tag key=\"snapshot_expire\", value=\"2016-09-23 08:30:12 +0000\"&gt;]\n</code></pre>\n\n<p>How do I get only the value of Tag Key <code>snapshot_expire</code> without the hour:sec:min (2016-09-23) ?</p>\n\n<p>This is my code:</p>\n\n<pre><code>resp = ec2.describe_snapshots(owner_ids:['1234']) #.each do |snapshot|\nresp.snapshots.each do |snapshot|\n  p snapshot.snapshot_id\n  p snapshot.tags\nend\n</code></pre>\n\n<p>I know that the regular aws cli tool has this option.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "rest-client", "facebook-marketing-api"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475105756, "post_id": 39757149, "comment_id": 66814402, "body": "You&#39;re sending JSON, so use the <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/json/rdoc/index.html\" rel=\"nofollow noreferrer\">JSON</a> class to process the hash, which will do what you did, only it&#39;s a well-tested wheel that knows how to handle corner cases."}], "tags": [], "owner": {"reputation": 199, "user_id": 2113272, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/L91NR.jpg?s=128&g=1", "display_name": "Machinerium", "link": "https://stackoverflow.com/users/2113272/machinerium"}, "is_accepted": false, "score": 0, "last_activity_date": 1475094808, "creation_date": 1475094808, "answer_id": 39757149, "question_id": 39756802, "link": "https://stackoverflow.com/questions/39756802/restclient-cant-add-custom-audience-via-api-on-facebook/39757149#39757149", "title": "RestClient: Can&#39;t add custom audience via API on Facebook", "body": "<p>So , the solution was to stringify FB's payload param .</p>\n\n<pre><code>payload =  {:payload =&gt; \"{\\\"schema\\\":[\\\"FN\\\",\\\"LN\\\",\\\"EMAIL\\\"],\\\"data\\\":[[\\\"31c88cbf2ceeb43fce68f027c10dd71b053672ce771fa5e4fc22422e633c6f11\\\",\\\"3565d65adb5cc2043e09097ee55ad430333a2a9a08a3a2b82c158b160ff12454\\\",\\\"d66746d2a1a6d488601e5603b8e9540c03e7e8063ae8aa921a3860007f478761\\\"],[\\\"3f03df52a32aafde65e6ee94b351970e0fa1481337b6b02f5f607d3357c1c368\\\",\\\"2ef9487065c3616d7c108c4b1c81e1b3afeee48f0373f7d5f5220bbc38db8ef5\\\",\\\"e4e91c99e2ae79c614e35de6cb429c32510dc2ecbf11c2a6e45a5872693542e6\\\"],[\\\"2de75eeda225156c96688715f0c2f86276dc0f10453dad716b9419729c46c5b8\\\",\\\"68c91edc2305b00a20a7febc616d2925e58bdbdf27fdcef8f84a1d1d8f37b3af\\\",\\\"a63ef4bd9dd5985f46674b4fb7f98b63c7144aae9b243281d01a66ad7659247e\\\"]]}\",\n   :access_token =&gt; \"XXXXXX\",\n   :multipart =&gt; true }\nurl = \"https://graph.facebook.com/v2.7/XXXXXXX/users\"\nrequest = RestClient::Request.new(\n :method =&gt; :post, :url =&gt; url, :payload=&gt;payload)\nresponse = request.execute\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1475105970, "creation_date": 1475105970, "answer_id": 39759211, "question_id": 39756802, "link": "https://stackoverflow.com/questions/39756802/restclient-cant-add-custom-audience-via-api-on-facebook/39759211#39759211", "title": "RestClient: Can&#39;t add custom audience via API on Facebook", "body": "<p>The JSON class will do that:</p>\n\n<pre><code>require 'json'\n\npayload = {\n  :payload =&gt; \n  {\n    :schema =&gt; [\"FN\", \"LN\", \"EMAIL\"],\n    :data =&gt; [\n      [\"foo\", \"bar\", \"baz\"],\n      [\"foo\", \"bar\", \"baz\"],\n      [\"foo\", \"bar\", \"baz\"]\n    ]\n  },\n  :access_token =&gt; \"&lt;ACCESS_TOKEN&gt;\",\n  :multipart =&gt; true \n}\n\npayload[:payload].to_json\n# =&gt; \"{\\\"schema\\\":[\\\"FN\\\",\\\"LN\\\",\\\"EMAIL\\\"],\\\"data\\\":[[\\\"foo\\\",\\\"bar\\\",\\\"baz\\\"],[\\\"foo\\\",\\\"bar\\\",\\\"baz\\\"],[\\\"foo\\\",\\\"bar\\\",\\\"baz\\\"]]}\"\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 2113272, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/L91NR.jpg?s=128&g=1", "display_name": "Machinerium", "link": "https://stackoverflow.com/users/2113272/machinerium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475105970, "creation_date": 1475093468, "question_id": 39756802, "link": "https://stackoverflow.com/questions/39756802/restclient-cant-add-custom-audience-via-api-on-facebook", "title": "RestClient: Can&#39;t add custom audience via API on Facebook", "body": "<p>I'm trying to add custom audience on Facebook using Ruby <strong>restclient gem</strong> but there is something with the payload param that's not working.\nI'm setting \"multipart\" param to the payload for RestClient but this doesn't work neither. I get always a <code>RestClient::BadRequest: 400 Bad Request</code></p>\n\n<p>Here is an example of what I'm doing , any guest?</p>\n\n<pre><code>payload =  {:payload =&gt; \n   {:schema=&gt;[\"FN\", \"LN\", \"EMAIL\"],\n    :data=&gt;[\n     [\"31c88cbf2ceeb43fce68f027c10dd71b053672ce771fa5e4fc22422e633c6f11\",\n      \"3565d65adb5cc2043e09097ee55ad430333a2a9a08a3a2b82c158b160ff12454\",\n      \"d66746d2a1a6d488601e5603b8e9540c03e7e8063ae8aa921a3860007f478761\"],\n     [\"3f03df52a32aafde65e6ee94b351970e0fa1481337b6b02f5f607d3357c1c368\",\n      \"2ef9487065c3616d7c108c4b1c81e1b3afeee48f0373f7d5f5220bbc38db8ef5\",\n      \"e4e91c99e2ae79c614e35de6cb429c32510dc2ecbf11c2a6e45a5872693542e6\"],\n     [\"2de75eeda225156c96688715f0c2f86276dc0f10453dad716b9419729c46c5b8\",\n      \"68c91edc2305b00a20a7febc616d2925e58bdbdf27fdcef8f84a1d1d8f37b3af\",\n      \"a63ef4bd9dd5985f46674b4fb7f98b63c7144aae9b243281d01a66ad7659247e\"]]\n    },\n   :access_token =&gt; \"&lt;ACCESS_TOKEN&gt;\",\n   :multipart =&gt; true }\nurl = \"https://graph.facebook.com/v2.7/&lt;AUDIENCE_ID&gt;/users\"   \n\nrequest = RestClient::Request.new(\n:method =&gt; :post,\n:url =&gt; url,\n:payload=&gt;payload)\nresponse = request.execute\n</code></pre>\n\n<p>Building the request like this:</p>\n\n<pre><code>@payload=\"--474291\\r\\nContent-Disposition: form-data; name=\\\"payload[schema][]\\\"\\r\\n\\r\\nFN\\r\\n--474291\\r\\nContent-Disposition: form-data; name=\\\"payload[schema][]\\\"\\r\\n\\r\\nLN\\r\\n--474291\\r\\nContent-Disposition: form-data; name=\\\"payload[schema][]\\\"\\r\\n\\r\\nEMAIL\\r\\n--474291\\r\\nContent-Disposition: form-data; name=\\\"payload[data][]\\\"\\r\\n\\r\\n31c88cbf2ceeb43fce68f027c10dd71b053672ce771fa5e4fc22422e633c6f11\\r\\n--474291\\r\\nContent-Disposition: form-data; name=\\\"payload[data][]\\\"\\r\\n\\r\\n3565d65adb5cc2043e09097ee55ad430333a2a9a08a3a2b82c158b160ff12454\\r\\n--474291\\r\\nContent-Disposition: form-data; name=\\\"payload[data][]\\\"\\r\\n\\r\\nd66746d2a1a6d488601e5603b8e9540c03e7e8063ae8aa921a3860007f478761\\r\\n--474291\\r\\nContent-Disposition: form-data; name=\\\"payload[data][]\\\"\\r\\n\\r\\n3f03df52a32aafde65e6ee94b351970e0fa1481337b6b02f5f607d3357c1c368\\r\\n--474291\\r\\nContent-Disposition: form-data; name=\\\"payload[data][]\\\"\\r\\n\\r\\n2ef9487065c3616d7c108c4b1c81e1b3afeee48f0373f7d5f5220bbc38db8ef5\\r\\n--474291\\r\\nContent-Disposition: form-data; name=\\\"payload[data][]\\\"\\r\\n\\r\\ne4e91c99e2ae79c614e35de6cb429c32510dc2ecbf11c2a6e45a5872693542e6\\r\\n--474291\\r\\nContent-Disposition: form-data; name=\\\"payload[data][]\\\"\\r\\n\\r\\n2de75eeda225156c96688715f0c2f86276dc0f10453dad716b9419729c46c5b8\\r\\n--474291\\r\\nContent-Disposition: form-data; name=\\\"payload[data][]\\\"\\r\\n\\r\\n68c91edc2305b00a20a7febc616d2925e58bdbdf27fdcef8f84a1d1d8f37b3af\\r\\n--474291\\r\\nContent-Disposition: form-data; name=\\\"payload[data][]\\\"\\r\\n\\r\\na63ef4bd9dd5985f46674b4fb7f98b63c7144aae9b243281d01a66ad7659247e\\r\\n--474291\\r\\nContent-Disposition: form-data; name=\\\"access_token\\\"\\r\\n\\r\\nXXXXXXXXXXXXXXXXXXXX\\r\\n--474291--\\r\\n\"\n</code></pre>\n\n<p>CURL Example that works:</p>\n\n<pre><code>curl \\\n  -F 'payload={ \n    \"schema\": [ \n      \"FN\", \n      \"LN\", \n      \"EMAIL\" \n    ], \n    \"data\": [[\"31c88cbf2ceeb43fce68f027c10dd71b053672ce771fa5e4fc22422e633c6f11\",\n      \"3565d65adb5cc2043e09097ee55ad430333a2a9a08a3a2b82c158b160ff12454\",\n      \"d66746d2a1a6d488601e5603b8e9540c03e7e8063ae8aa921a3860007f478761\"],\n     [\"3f03df52a32aafde65e6ee94b351970e0fa1481337b6b02f5f607d3357c1c368\",\n      \"2ef9487065c3616d7c108c4b1c81e1b3afeee48f0373f7d5f5220bbc38db8ef5\",\n      \"e4e91c99e2ae79c614e35de6cb429c32510dc2ecbf11c2a6e45a5872693542e6\"],\n     [\"2de75eeda225156c96688715f0c2f86276dc0f10453dad716b9419729c46c5b8\",\n      \"68c91edc2305b00a20a7febc616d2925e58bdbdf27fdcef8f84a1d1d8f37b3af\",\n      \"a63ef4bd9dd5985f46674b4fb7f98b63c7144aae9b243281d01a66ad7659247e\"]] \n  }' \\\n  -F 'access_token=XXXXX' \\\n  https://graph.facebook.com/v2.7/XXXX/users --trace-ascii /dev/stdout\n</code></pre>\n"}, {"tags": ["ruby", "configuration"], "comments": [{"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1475127591, "post_id": 39756573, "comment_id": 66819591, "body": "I don&#39;t fully get the question yet. What output are you expecting from <code>f = Foo.new; f.dog_breed = :chimp; puts Foo.dog_breed</code>? What constants in the class help you?"}], "answers": [{"comments": [{"owner": {"reputation": 8384, "user_id": 627408, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/GO0oW.png?s=128&g=1", "display_name": "kreek", "link": "https://stackoverflow.com/users/627408/kreek"}, "edited": false, "score": 0, "creation_date": 1475164114, "post_id": 39762512, "comment_id": 66843773, "body": "Yes the example was a bit random, it&#39;s more for configuration and the example makes it look like it could be handled by inheritance (breed &lt; dog) but thanks good answer :)"}], "tags": [], "owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "is_accepted": true, "score": 1, "last_activity_date": 1475129270, "last_edit_date": 1495535266, "creation_date": 1475128933, "answer_id": 39762512, "question_id": 39756573, "link": "https://stackoverflow.com/questions/39756573/ruby-class-instance-variable-configuration-pattern/39762512#39762512", "title": "ruby class instance variable configuration pattern", "body": "<p>Your example is a bit weird I think :)\nAnyway, one way to avoid writing the accessors (the <strong>assignment</strong> - accessor is problematic in my eyes - especially in the given example) is to define constants, as in the example below. If however you need runtime-assignments, please edit your question (and thus render this answer invalid :) except you want to mess with runtime constant assignment, which is possible but messy).</p>\n\n<pre><code>module DogMixin\n  # **include** DogMixin to get `Class.dog_breed`\n  class &lt;&lt; self\n    def included(base)\n      def base.dog_breed\n        self::DOG_BREED || \"pug\"\n      end\n    end\n  end\n\n  # **extend** DogMixin to get `instance.dog_breed`\n  def dog_breed\n    self.class.const_get(:DOG_BREED) || \"pug\"\n  end\nend\n\nclass Foomer\n  DOG_BREED = 'foomer'\n  extend  DogMixin\n  include DogMixin\nend\n\nf = Foomer.new\nputs Foomer.dog_breed\nputs f.dog_breed\n\n# If I understand you correctly, this is the most important (?):\nf.dog_breed == Foomer.dog_breed #=&gt; true\n</code></pre>\n\n<p>It took some reading of <a href=\"https://stackoverflow.com/questions/1897699/in-ruby-allowing-mixed-in-class-methods-access-to-class-constants\">(In Ruby) allowing mixed-in class methods access to class constants</a> to get the Instance-And-Class Constant lookup from a module, but it works. I am not sure if I really like the solution though. Good question, although you could add a little detail.</p>\n"}], "owner": {"reputation": 8384, "user_id": 627408, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/GO0oW.png?s=128&g=1", "display_name": "kreek", "link": "https://stackoverflow.com/users/627408/kreek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 39762512, "answer_count": 1, "score": 2, "last_activity_date": 1475129270, "creation_date": 1475092595, "question_id": 39756573, "link": "https://stackoverflow.com/questions/39756573/ruby-class-instance-variable-configuration-pattern", "title": "ruby class instance variable configuration pattern", "body": "<p>I'm trying to make a DSL like configuration for classes that include a module but to have the configured variable available to both class and instance methods seems to require littering the module with access methods. Is there a more elegant way to do this?</p>\n\n<pre><code>module DogMixin  \n  class &lt;&lt; self\n    def included(base)\n      base.extend ClassMethods\n    end\n  end\n\n  module ClassMethods\n    def breed(value)\n      @dog_breed = value\n    end\n\n    def dog_breed\n      @dog_breed\n    end\n  end\nend\n\nclass Foo\n  include DogMixin\n\n  breed :havanese\nend\n\nputs Foo.dog_breed\n# not implemented but should be able to do this as well\nf = Foo.new\nf.dog_breed\n</code></pre>\n"}, {"tags": ["python", "ruby", "rubygems", "ubuntu-14.04", "jekyll"], "comments": [{"owner": {"reputation": 726, "user_id": 5450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7D0G.jpg?s=128&g=1", "display_name": "Hamim Al Mahdi Russell", "link": "https://stackoverflow.com/users/5450651/hamim-al-mahdi-russell"}, "edited": false, "score": 0, "creation_date": 1475092779, "post_id": 39756515, "comment_id": 66809062, "body": "Try <code>sudo apt-get remove ruby</code>     <code>sudo apt-get install ruby1.9.1-dev</code>     <code>gem install jekyll</code>"}, {"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 1, "creation_date": 1475094384, "post_id": 39756515, "comment_id": 66809964, "body": "Use <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">github.com/rbenv/rbenv</a>"}, {"owner": {"reputation": 77, "user_id": 6692920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d3aedcd191550fd12fb57def6e5028d3?s=128&d=identicon&r=PG&f=1", "display_name": "John77", "link": "https://stackoverflow.com/users/6692920/john77"}, "reply_to_user": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1475385057, "post_id": 39756515, "comment_id": 66918861, "body": "@DavidJacquel thanks. plz give a few steps on what to do wrt the problem. i will accept the answer. thanks."}, {"owner": {"reputation": 724, "user_id": 2632107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6114b3072f3fd075698d514a5d1c05?s=128&d=identicon&r=PG", "display_name": "S0AndS0", "link": "https://stackoverflow.com/users/2632107/s0ands0"}, "edited": false, "score": 0, "creation_date": 1557973060, "post_id": 39756515, "comment_id": 98948027, "body": "Might be worth the time to check a related <a href=\"https://stackoverflow.com/a/56157908/2632107\">answer</a> that&#39;ll show some methods of setting-up a user account for non-<code>sudo</code> installed Gems... aside from account setup <code>sudo</code> isn&#39;t required when using <i><code>gem install someThing</code></i> via one of the <i>proper</i> ways."}], "owner": {"reputation": 77, "user_id": 6692920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d3aedcd191550fd12fb57def6e5028d3?s=128&d=identicon&r=PG&f=1", "display_name": "John77", "link": "https://stackoverflow.com/users/6692920/john77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475097876, "creation_date": 1475092413, "last_edit_date": 1475092763, "question_id": 39756515, "link": "https://stackoverflow.com/questions/39756515/cant-install-jekyll", "title": "Can&#39;t Install Jekyll", "body": "<p>I get the error (Ubuntu 14.04):</p>\n\n<pre><code>sudo gem install \n\njekyllBuilding native extensions.  This could take a while...\nERROR:  Error installing jekyll:\n    ERROR: Failed to build gem native extension.\n\n    /usr/bin/ruby2.1 extconf.rb\nmkmf.rb can't find header files for ruby at /usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.1.0/gems/ffi-1.9.14 for inspection.\nResults logged to /var/lib/gems/2.1.0/extensions/x86_64-linux/2.1.0/ffi-1.9.14/gem_make.out\n</code></pre>\n\n<p>Common solutions like installing ruby-dev are not working.</p>\n\n<p>Please help.Thanks.</p>\n"}, {"tags": ["arrays", "ruby", "swift", "enumerator", "equivalent"], "comments": [{"owner": {"reputation": 44271, "user_id": 78336, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/896cfc242a7762467c2a0b2af86598e5?s=128&d=identicon&r=PG", "display_name": "neoneye", "link": "https://stackoverflow.com/users/78336/neoneye"}, "edited": false, "score": 0, "creation_date": 1516060233, "post_id": 39756309, "comment_id": 83528287, "body": "A similar question is here: <a href=\"https://stackoverflow.com/q/26395766/78336\">stackoverflow.com/q/26395766/78336</a>"}], "answers": [{"comments": [{"owner": {"reputation": 44271, "user_id": 78336, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/896cfc242a7762467c2a0b2af86598e5?s=128&d=identicon&r=PG", "display_name": "neoneye", "link": "https://stackoverflow.com/users/78336/neoneye"}, "edited": false, "score": 0, "creation_date": 1475091961, "post_id": 39756389, "comment_id": 66808587, "body": "very elegant solution. Thank you Kevin"}, {"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 1, "creation_date": 1475092003, "post_id": 39756389, "comment_id": 66808612, "body": "I&#39;m glad someone has been giving this some thought. Can we generalize this so that we don&#39;t have to hard-code the <code>2</code> of <code>each_cons(2)</code>?"}, {"owner": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "edited": false, "score": 0, "creation_date": 1475092014, "post_id": 39756389, "comment_id": 66808623, "body": "However, Swift doesn&#39;t have a general version of <code>zip</code>: this only works for pairs."}, {"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "reply_to_user": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "edited": false, "score": 1, "creation_date": 1475092064, "post_id": 39756389, "comment_id": 66808654, "body": "@JoshCaswell Correct. I have a more general solution but it is sort of horribly inefficient."}], "tags": [], "owner": {"reputation": 168655, "user_id": 582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ev49G.png?s=128&g=1", "display_name": "Lily Ballard", "link": "https://stackoverflow.com/users/582/lily-ballard"}, "is_accepted": true, "score": 6, "last_activity_date": 1475093066, "last_edit_date": 1475093066, "creation_date": 1475091898, "answer_id": 39756389, "question_id": 39756309, "link": "https://stackoverflow.com/questions/39756309/swift-equivalent-of-rubys-each-cons/39756389#39756389", "title": "Swift equivalent of Ruby&#39;s &quot;each_cons&quot;", "body": "<pre><code>zip(votes, votes.dropFirst())\n</code></pre>\n\n<p>This produces a sequence of tuples.</p>\n\n<h1>Example</h1>\n\n<pre><code>struct Pair {\n    let left: String\n    let right: String\n}\nlet votes = [\"a\", \"b\", \"c\", \"d\"]\nlet pairs = zip(votes, votes.dropFirst()).map {\n    Pair(left: $0, right: $1)\n}\nprint(pairs)\n// [Pair(left: \"a\", right: \"b\"), Pair(left: \"b\", right: \"c\"), Pair(left: \"c\", right: \"d\")]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "is_accepted": false, "score": 2, "last_activity_date": 1475092256, "creation_date": 1475092256, "answer_id": 39756476, "question_id": 39756309, "link": "https://stackoverflow.com/questions/39756309/swift-equivalent-of-rubys-each-cons/39756476#39756476", "title": "Swift equivalent of Ruby&#39;s &quot;each_cons&quot;", "body": "<p>This is the general solution I came up with, but it seems sort of horribly inefficient. To implement <code>each_cons(n)</code>, set my <code>clump</code> to <code>n</code>:</p>\n\n<pre><code>        let arr = [1,2,3,4,5,6,7,8]\n        let clump = 2\n        let cons : [[Int]] = arr.reduce([[Int]]()) {\n            memo, cur in\n            var memo = memo\n            if memo.count == 0 {\n                return [[cur]]\n            }\n            if memo.count &lt; arr.count - clump + 1 {\n                memo.append([])\n            }\n            return memo.map {\n                if $0.count == clump {\n                    return $0\n                }\n                var arr = $0\n                arr.append(cur)\n                return arr\n            }\n        }\n</code></pre>\n"}], "owner": {"reputation": 44271, "user_id": 78336, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/896cfc242a7762467c2a0b2af86598e5?s=128&d=identicon&r=PG", "display_name": "neoneye", "link": "https://stackoverflow.com/users/78336/neoneye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 39756389, "answer_count": 2, "score": 5, "last_activity_date": 1475093066, "creation_date": 1475091674, "question_id": 39756309, "link": "https://stackoverflow.com/questions/39756309/swift-equivalent-of-rubys-each-cons", "title": "Swift equivalent of Ruby&#39;s &quot;each_cons&quot;", "body": "<h1>Ruby</h1>\n\n<p>Ruby has <a href=\"https://ruby-doc.org/core-2.1.0/Enumerable.html#method-i-each_cons\" rel=\"noreferrer\">each_cons</a> that can be used like this</p>\n\n<pre><code>class Pair\n    def initialize(left, right)\n        @left = left\n        @right = right\n    end\nend\nvotes = [\"a\", \"b\", \"c\", \"d\"]\npairs = votes.each_cons(2).map { |vote| Pair.new(*vote) }\np pairs\n# [#&lt;Pair @left=\"a\", @right=\"b\"&gt;, #&lt;Pair @left=\"b\", @right=\"c\"&gt;, #&lt;Pair @left=\"c\", @right=\"d\"&gt;]\n</code></pre>\n\n<h1>Swift</h1>\n\n<p>The same code in swift, but without the <code>each_cons</code> function</p>\n\n<pre><code>struct Pair {\n    let left: String\n    let right: String\n}\nlet votes = [\"a\", \"b\", \"c\", \"d\"]\nvar pairs = [Pair]()\nfor i in 1..&lt;votes.count {\n    let left = votes[i-1]\n    let right = votes[i]\n    pairs.append(Pair(left: left, right: right))\n}\nprint(pairs)\n// [Pair(left: \"a\", right: \"b\"), Pair(left: \"b\", right: \"c\"), Pair(left: \"c\", right: \"d\")]\n</code></pre>\n\n<p>How can this swift code be made shorter or simpler?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1475096892, "post_id": 39756467, "comment_id": 66811360, "body": "So it&#39;d be <code>API::Apple.new(Database::Apple.first)</code>? Does that <code>super</code> call the initialize method of the SimpleDelegator?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1475097102, "post_id": 39756467, "comment_id": 66811469, "body": "@Jwan622 yes and yes :)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1475092199, "creation_date": 1475092199, "answer_id": 39756467, "question_id": 39756171, "link": "https://stackoverflow.com/questions/39756171/best-way-to-mass-assign-attr-accessors-in-ruby-with-the-attributes-of-a-rails-ob/39756467#39756467", "title": "Best way to mass assign attr_accessors in ruby with the attributes of a Rails object", "body": "<p>Something along these lines could do it for you.</p>\n\n<pre><code>class API::Apple &lt; SimpleDelegator\n\n  # pass a `Database::Apple` instance to initializer\n  def initialize(database_apple)\n    @database_apple = database_apple\n    super\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p><a href=\"https://ruby-doc.org/stdlib-2.1.0/libdoc/delegate/rdoc/SimpleDelegator.html\" rel=\"nofollow\"><code>SimpleDelegator</code></a></p>\n  \n  <p>A concrete implementation of <a href=\"https://ruby-doc.org/stdlib-2.1.0/libdoc/delegate/rdoc/Delegator.html\" rel=\"nofollow\"><code>Delegator</code></a>, this class provides the\n  means to delegate all supported method calls to the object passed into\n  the constructor.</p>\n</blockquote>\n\n<p>So in other words any instance of your <code>API::Apple</code> PORO will have access to all 100 attributes of the <code>Database::Apple</code> instance.</p>\n"}], "owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "accepted_answer_id": 39756467, "answer_count": 1, "score": 1, "last_activity_date": 1475098430, "creation_date": 1475091229, "last_edit_date": 1475098430, "question_id": 39756171, "link": "https://stackoverflow.com/questions/39756171/best-way-to-mass-assign-attr-accessors-in-ruby-with-the-attributes-of-a-rails-ob", "title": "Best way to mass assign attr_accessors in ruby with the attributes of a Rails object", "body": "<p>In short, I want to mass assign a PORO with no database with like 100 attr_accessors with the attributes of a Rails object. The point of this is to expose an object over the API that is not an ActiveRecord Object and this API is being used internally right now and is not separated over a service. What can be done?</p>\n\n<p>Assume we have a database-backed <code>Database::Apple</code> class with attributes. I can get them all in a hash using:</p>\n\n<p><code>Database::Apple.first.attributes</code></p>\n\n<p>Say the PORO is called <code>API::Apple</code></p>\n\n<p>If I initialize an <code>API::Apple</code>, how can I mass assign all of its <code>attr_accessor</code>s with the attributes of the database-backed <code>Apple</code>. Is there an easy way to do this? Does something like this exist?</p>\n\n<p><code>Database::Apple.new.attributes = API::Apple.first.attributes</code>?</p>\n"}, {"tags": ["ruby", "chef-infra", "cookbook"], "answers": [{"comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1475119371, "post_id": 39755632, "comment_id": 66817288, "body": "As you might imagine from something in 2013, that post is wildly out of date. Please disregard most of it."}], "tags": [], "owner": {"reputation": 530, "user_id": 1590250, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/73b93ca2be9a048dd685b13fa8053c7f?s=128&d=identicon&r=PG", "display_name": "iGallina", "link": "https://stackoverflow.com/users/1590250/igallina"}, "is_accepted": false, "score": 0, "last_activity_date": 1475089207, "creation_date": 1475089207, "answer_id": 39755632, "question_id": 39755314, "link": "https://stackoverflow.com/questions/39755314/how-would-i-include-and-configure-a-ruby-library-in-a-chef-recipe/39755632#39755632", "title": "How would I include and configure a ruby library in a Chef recipe?", "body": "<p>Installing gems with Chef is relatively painless. Most of the time, you can use the gem_package resource, which behaves very similarly to the native package resource:</p>\n\n<p><code>gem_package 'httparty'</code></p>\n\n<p>You can even specify the gem version to install:</p>\n\n<p><code>gem_package 'httparty' do\n  version '0.12.0'\nend</code></p>\n\n<p>You may have also seen the chef_gem resource. What's the difference?</p>\n\n<blockquote>\n  <p>The chef_gem and gem_package resources are both used to install Ruby\n  gems. For any machine on which the chef-client is installed, there are\n  two instances of Ruby. One is the standard, system-wide instance of\n  Ruby and the other is a dedicated instance that is available only to\n  the chef-client. Use the chef_gem resource to install gems into the\n  instance of Ruby that is dedicated to the chef-client. Use the\n  gem_package resource to install all other gems (i.e. install gems\n  system-wide).</p>\n</blockquote>\n\n<p>source: <a href=\"https://sethvargo.com/using-gems-with-chef/\" rel=\"nofollow\">https://sethvargo.com/using-gems-with-chef/</a></p>\n"}, {"comments": [{"owner": {"reputation": 162, "user_id": 3956630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzNBP.jpg?s=128&g=1", "display_name": "Yugendran", "link": "https://stackoverflow.com/users/3956630/yugendran"}, "edited": false, "score": 0, "creation_date": 1548269542, "post_id": 39760915, "comment_id": 95485286, "body": "This saved my chef recipe as the system gems were not loaded by <i>require</i>. I had download the gem for chef specifically using the above command. Then use the below line to make it load  <code>chef_gem &quot;down&quot;</code> <code>require &#39;down&#39;</code>"}, {"owner": {"reputation": 1693, "user_id": 124731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5e6e4fcd509c1b53f0c2410a7d7c29?s=128&d=identicon&r=PG", "display_name": "Jason Crease", "link": "https://stackoverflow.com/users/124731/jason-crease"}, "edited": false, "score": 0, "creation_date": 1594035122, "post_id": 39760915, "comment_id": 110975529, "body": "@coderanger Thanks, but you say &#39;make sure to run it during the &#39;compile phase&#39; but you have <code>compile_time false</code>. Is this a typo or have I misunderstood?"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 2, "last_activity_date": 1475119533, "creation_date": 1475119533, "answer_id": 39760915, "question_id": 39755314, "link": "https://stackoverflow.com/questions/39755314/how-would-i-include-and-configure-a-ruby-library-in-a-chef-recipe/39760915#39760915", "title": "How would I include and configure a ruby library in a Chef recipe?", "body": "<p>You want to use the <code>chef_gem</code> resource, but make sure to run it during the compile phase:</p>\n\n<pre><code>chef_gem 'diplomat' do\n  action :nothing\n  compile_time false\nend.run_action(:install)\nrequire 'diplomat'\n</code></pre>\n"}], "owner": {"reputation": 542, "user_id": 2355672, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/86581e72b97e7fa33e636150365bcf20?s=128&d=identicon&r=PG", "display_name": "asdoylejr", "link": "https://stackoverflow.com/users/2355672/asdoylejr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 1, "accepted_answer_id": 39760915, "answer_count": 2, "score": 3, "last_activity_date": 1475119533, "creation_date": 1475088090, "question_id": 39755314, "link": "https://stackoverflow.com/questions/39755314/how-would-i-include-and-configure-a-ruby-library-in-a-chef-recipe", "title": "How would I include and configure a ruby library in a Chef recipe?", "body": "<p>I want to include the Diplomat gem in my Chef cookbook so that I can perform Consul variable lookups in .erb templates.</p>\n\n<p>I need to configure the Consul URL:</p>\n\n<pre><code>irb(main):015:0&gt; require 'diplomat'\nirb(main):016:0&gt; Diplomat.configure do |config|\nirb(main):017:1*   config.url = \"consulurl:80\"\nirb(main):018:1&gt; end\n</code></pre>\n\n<p>Set a variable as the URL path:</p>\n\n<pre><code>irb(main):020:0&gt; kv_path = \"path/to/variable\"\n=&gt; \"path/to/variable\"\n</code></pre>\n\n<p>And finally, perform the lookup within the templates.</p>\n\n<pre><code>irb(main):022:0&gt; foo = Diplomat::Kv.get(kv_path + '/test_foo_123')\n=&gt; \"bar\"\n</code></pre>\n\n<p>Where in the cookbook would I need to write the configuration code above such that I can perform variable lookups within .erb templates?</p>\n"}, {"tags": ["ruby", "design-patterns"], "answers": [{"comments": [{"owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "edited": false, "score": 0, "creation_date": 1475091681, "post_id": 39755507, "comment_id": 66808438, "body": "That makes sense! Didn&#39;t think of using hash before. Thank you!"}], "tags": [], "owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "is_accepted": false, "score": 1, "last_activity_date": 1475088734, "creation_date": 1475088734, "answer_id": 39755507, "question_id": 39755088, "link": "https://stackoverflow.com/questions/39755088/how-to-update-two-arguments-at-the-same-time-using-ruby-observer-method/39755507#39755507", "title": "How to update two arguments at the same time using Ruby Observer method?", "body": "<p>It's very weird error, but i find solution that can help you. You can use one argument and include 2 values there.</p>\n\n<pre><code>def order=(opts={})\n    @order = opts[:new_order]\n    @order_price = opts[:new_price]\n    notify_observers\nend\n</code></pre>\n\n<p>and call this function:</p>\n\n<pre><code>igg.order= {new_order: 'yumyy better donut', new_price: 15 }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "edited": false, "score": 0, "creation_date": 1475092480, "post_id": 39755602, "comment_id": 66808887, "body": "Such a simple solution! Why didn&#39;t I think of that? Thanks!! Also, thanks for pointing out that <code>=</code> can only accept 1 arg. I didn&#39;t know that before. That knowledge will come in handy :)"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 2, "last_activity_date": 1475333483, "last_edit_date": 1475333483, "creation_date": 1475089091, "answer_id": 39755602, "question_id": 39755088, "link": "https://stackoverflow.com/questions/39755088/how-to-update-two-arguments-at-the-same-time-using-ruby-observer-method/39755602#39755602", "title": "How to update two arguments at the same time using Ruby Observer method?", "body": "<p>Assignment <code>=</code> is meant to accept a single argument to be assigned.(or the same number of elements as variables in the event of parallel assignment)</p>\n\n<p>You could do this as: </p>\n\n<pre><code>def order=(args)\n  @order = args[0]\n  @order_price = args[1]\n  notify_observers\nend\n</code></pre>\n\n<p>Then call like </p>\n\n<pre><code>igg.order=[\"yummy butter donut\", 15]\n</code></pre>\n\n<p>or use an options <code>Hash</code> as @BartekGladys suggested but both solutions seem awful and fallible to say the least and would require knowledge of the internals of the method in order to utilize it correctly.   </p>\n\n<p>Also currently even if this method worked it would be extremely confusing to future you or anyone looking at your code base because you have an instance variable <code>@order</code> so the assumption would be <code>order=(val)</code> would assign that variable. </p>\n\n<p>You would be better off with a method called <code>change_order</code> that accepts <code>order</code> and <code>order_price</code> and this would eliminate all confusion as to whats happening.  </p>\n\n<pre><code>def change_order(new_order, new_price)\n    @order = new_order\n    @order_price = new_price\n    notify_observers\nend\n</code></pre>\n\n<p>and then reading it makes more sense too.</p>\n\n<pre><code>igg = Customer.new(\"Iggy\", \"Bacon Donut\", 10)\n#Currently seems like it is assigning order to an Array maybe? \nigg.order=(\"yummy butter donut\", 15)\n#New much clearer as to the implementation and purpose of changing an order\nigg.change_order(\"yummy butter donut\", 15)  \n</code></pre>\n"}], "owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 39755602, "answer_count": 2, "score": 1, "last_activity_date": 1475333483, "creation_date": 1475087356, "question_id": 39755088, "link": "https://stackoverflow.com/questions/39755088/how-to-update-two-arguments-at-the-same-time-using-ruby-observer-method", "title": "How to update two arguments at the same time using Ruby Observer method?", "body": "<p>I am studying Ruby's <a href=\"http://designpatternsinruby.com/\" rel=\"nofollow\">Design Pattern</a> and came across Observer method. I tried to customize my own observer method to help me understand it but it returns an error. Here is what I came up with:</p>\n\n<pre><code>class YummyTastyDonut\n    def update(changed_order)\n        puts \"Kitchen: Yo, change the order to #{changed_order.order}!\"\n        puts \"Front: Order for #{changed_order.name}!\"\n        puts \"Front: The price will now be #{changed_order.order_price} \"\n    end\nend\n\n\nclass Customer\n    attr_reader :name, :order\n    attr_accessor :order_price\n\n    def initialize(name, order, order_price)\n        @name = name\n        @order = order\n        @order_price = order_price\n        @observers = []\n    end\n\n    def order=(new_order, new_price)\n        @order = new_order\n        @order_price = new_price\n        notify_observers\n    end\n\n    def notify_observers\n        @observers.each do |observer|\n            observer.update(self)\n        end\n    end\n\n    def add_observer(observer)\n        @observers &lt;&lt; observer\n    end\n\n    def delete_observer(observer)\n        @observers.delete(observer)\n    end\nend\n</code></pre>\n\n<p>If you read the book, I changed the class names, but the essence is the same. One thing I changed is <code>order=</code> method; it now accepts two arguments instead of one. </p>\n\n<p>The goal is, after creating new <code>Customer</code>, I want the new customer to be able to change my order and notify <code>YummyTastyDonut</code>. However, I want to be able to update two things: the <code>order</code> and <code>order_price</code> (obviously, if I change my order, the price will also change). I want <code>YummyTastyDonut</code> to respond to my change. </p>\n\n<pre><code>igg = Customer.new(\"Iggy\", \"Bacon Donut\", 10)\n=&gt; #&lt;Customer:0x0056212e48a940 @name=\"Iggy\", @order=\"Bacon Donut\", @order_price=10, @observers=[]&gt;\n\ndonut = YummyTastyDonut.new\n=&gt; #&lt;YummyTastyDonut:0x0056212e4894c8&gt;\n\n## Updating my order and order_price ##\n\n   igg.order = (\"yummy butter donut\", 15)\n#(repl):1: syntax error, unexpected ',', expecting ')'\n#igg.order = (\"yummy butter donut\", 15)\n</code></pre>\n\n<p>If I use this <code>order=</code> method that accepts only one argument, it works just as expected. </p>\n\n<pre><code>def order=(new_order)\n    @order = new_order\n    notify_observers\nend\n\n igg.order = \"Triple bacon donut explosion\"\nKitchen: Yo, change the order to Triple bacon donut explosion!\nFront: Order for Iggy!\nFront: The price will now be 10 \n</code></pre>\n\n<p>What do I have to change so I can update both <code>order</code> and <code>order_price</code> simultaneously?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9917, "user_id": 1586221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/96ab4c67eb62b315a8e7584f7dfd547a?s=128&d=identicon&r=PG", "display_name": "tompave", "link": "https://stackoverflow.com/users/1586221/tompave"}, "edited": false, "score": 2, "creation_date": 1475087258, "post_id": 39754982, "comment_id": 66806223, "body": "Hi, and welcome on StackOverflow. It sounds like you&#39;re following Michael Hartl&#39;s <i>Ruby on Rails Tutorial</i>. Your best chance to get an answer it to provide more details, which will also make your question easier to be found and more useful for other users. For example, add the code you already have, what you expect it to do, and what&#39;s happening instead."}, {"owner": {"reputation": 1079, "user_id": 4584772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/800138940080213/picture?type=large", "display_name": "Josh Hunter", "link": "https://stackoverflow.com/users/4584772/josh-hunter"}, "edited": false, "score": 0, "creation_date": 1475087974, "post_id": 39754982, "comment_id": 66806608, "body": "If you return @user.microposts, what happens?  Or, if you prefer, if you enter User.first.microposts in the console, what happens?  It sounds like you either need to set up the associations in the models or you may have them set up and don&#39;t know how to access associated objects."}, {"owner": {"reputation": 1, "user_id": 6895404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e9025fa4319b27b44ad3b8b1857d43?s=128&d=identicon&r=PG&f=1", "display_name": "Stabilo Boss", "link": "https://stackoverflow.com/users/6895404/stabilo-boss"}, "edited": false, "score": 0, "creation_date": 1475152047, "post_id": 39754982, "comment_id": 66834977, "body": "Result of @user.micropost is #&lt;Micropost::ActiveRecord_Associations_CollectionProxy:0x007&zwnj;&#8203;f7700138fc0&gt;. User.first.microposts gets the the infromation that I want. I already have has_many: microposts in my user and belongs_to to Micrposts. Where should I put the code to get the User.micropost.first?"}], "answers": [{"tags": [], "owner": {"reputation": 631, "user_id": 4317818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d20fc3295b4007514988a170af35ab?s=128&d=identicon&r=PG", "display_name": "rikola", "link": "https://stackoverflow.com/users/4317818/rikola"}, "is_accepted": false, "score": 0, "last_activity_date": 1475088231, "creation_date": 1475088231, "answer_id": 39755352, "question_id": 39754982, "link": "https://stackoverflow.com/questions/39754982/how-to-connect-2-models-in-rails-5/39755352#39755352", "title": "How to connect 2 Models in rails 5", "body": "<p>What you are looking to do is to make a simple model relation. You can do this by defining the relationship in the relevant model file.</p>\n\n<p>Lets say you wanted to link the post to the user based on a foreign key relationship linking the user_id field on post to the id field on user. In the posts model file, do something like this:</p>\n\n<pre><code>belongs_to :user\n</code></pre>\n\n<p>That lets ruby know how to structure the queries properly when joining data across models.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6895404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e9025fa4319b27b44ad3b8b1857d43?s=128&d=identicon&r=PG&f=1", "display_name": "Stabilo Boss", "link": "https://stackoverflow.com/users/6895404/stabilo-boss"}, "edited": false, "score": 0, "creation_date": 1475155252, "post_id": 39755739, "comment_id": 66837336, "body": "I already have these in my code, what should i do next to get the value of User.first.microposts and show it in the html file?"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1475089616, "creation_date": 1475089616, "answer_id": 39755739, "question_id": 39754982, "link": "https://stackoverflow.com/questions/39754982/how-to-connect-2-models-in-rails-5/39755739#39755739", "title": "How to connect 2 Models in rails 5", "body": "<p>According to the description in question you should have something like</p>\n\n<p><strong><em>app/models/user.rb</em></strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Migration\n  has_many :microposts\n  # attributes :id, :name, :email\nend \n</code></pre>\n\n<p><strong><em>app/models/micropost.rb</em></strong></p>\n\n<pre><code>class Micropost &lt; ActiveRecord::Migration\n  belongs_to :user\n  # attributes :id, :user_id, :post\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6895404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e9025fa4319b27b44ad3b8b1857d43?s=128&d=identicon&r=PG&f=1", "display_name": "Stabilo Boss", "link": "https://stackoverflow.com/users/6895404/stabilo-boss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475089616, "creation_date": 1475087000, "last_edit_date": 1475087310, "question_id": 39754982, "link": "https://stackoverflow.com/questions/39754982/how-to-connect-2-models-in-rails-5", "title": "How to connect 2 Models in rails 5", "body": "<p>I want the user show page to display the content of the user\u2019s first micropost.\nI already have user that accepts name and email and micropost that accepts the post and user id. My guess is I need to connect the user of the micropost to the id of user but i don'tknow how.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "heroku"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1475086954, "post_id": 39754878, "comment_id": 66806053, "body": "You need to rewrite your seeds file so that it can run against existing data. There is no magic way of doing this."}, {"owner": {"reputation": 664, "user_id": 5200126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zG1IH.jpg?s=128&g=1", "display_name": "heyitsjhu", "link": "https://stackoverflow.com/users/5200126/heyitsjhu"}, "edited": false, "score": 0, "creation_date": 1475087075, "post_id": 39754878, "comment_id": 66806115, "body": "running <code>heroku rake db:migrate</code> will update your schema with the new price column in the items table. It shouldn&#39;t affect the users table unless there&#39;s some sort of association between prices and users you didn&#39;t mention."}, {"owner": {"reputation": 664, "user_id": 5200126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zG1IH.jpg?s=128&g=1", "display_name": "heyitsjhu", "link": "https://stackoverflow.com/users/5200126/heyitsjhu"}, "edited": false, "score": 0, "creation_date": 1475087243, "post_id": 39754878, "comment_id": 66806210, "body": "by the way, you can try something similar in development by adding a column to a table, running just <code>rake db:migrate</code> to update the schema, and then confirm that the users you created are still there in development."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1475089672, "post_id": 39754878, "comment_id": 66807531, "body": "Is <code>Item#name</code> unique or is there some other way to uniquely identifier your seeded data? Does your seeds file really only create five <code>Item</code>s?"}], "answers": [{"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 0, "last_activity_date": 1475090578, "creation_date": 1475090578, "answer_id": 39756000, "question_id": 39754878, "link": "https://stackoverflow.com/questions/39754878/updating-columns-in-heroku-production-vs-local/39756000#39756000", "title": "Updating columns in heroku production vs local", "body": "<p>You can make use of <a href=\"http://apidock.com/rails/v4.0.2/ActiveRecord/Relation/find_or_create_by\" rel=\"nofollow\"><strong><code>find_or_create_by</code></strong></a>. Just create another migration and loop over the seeds. As for heroku this will be a safer way to change seeds without losing production data. </p>\n\n<pre><code>class AddPriceToItemSeeds &lt; ActiveRecord::Migration\n  def change\n    items= [\n      {name: \"Kale\", type: \"veggie\", price: 2},\n      {name: \"Apple\", type: \"fruit\", price: 1},\n      {name: \"MF Kombucha\", type: \"drink\", price: 10000},\n      {name: \"Cider\", type: \"drink\", price: 2},\n      {name: \"Carrot\", type: \"veggie\", price: 1}\n    ]\n    items.each do |item|\n      Item.find_or_create_by(name: item[:name], type: item[:type]) do |record|\n        record.price= item[:price]\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4455199"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 39756000, "answer_count": 1, "score": 0, "last_activity_date": 1475090578, "creation_date": 1475086641, "question_id": 39754878, "link": "https://stackoverflow.com/questions/39754878/updating-columns-in-heroku-production-vs-local", "title": "Updating columns in heroku production vs local", "body": "<p>I have a Ruby on Rails (v 4.2.0) app this is deployed to Heroku, with a PostgresQL database.</p>\n\n<p>I have a number of objects in my db that I populate with my seeds.rb file: </p>\n\n<pre><code>Item.create([\n  {name: \"Kale\", type: \"veggie\"},\n  {name: \"Apple\", type: \"fruit\"},\n  {name: \"MF Kombucha\", type: \"drink\"},\n  {name: \"Cider\", type: \"drink\"},\n  {name: \"Carrot\", type: \"veggie\"}\n  ])\n</code></pre>\n\n<p>I need to add a column to my <code>items</code> table, <code>:price</code>: </p>\n\n<p><code>rails g migration AddPriceToItems</code></p>\n\n<pre><code>class AddPriceToItems &lt; ActiveRecord::Migration\n  def change\n    add_column :items, :price, :integer\n  end\nend\n</code></pre>\n\n<p>I then update my seeds file: </p>\n\n<pre><code>Item.create([\n  {name: \"Kale\", type: \"veggie\", price: 2},\n  {name: \"Apple\", type: \"fruit\", price: 1},\n  {name: \"MF Kombucha\", type: \"drink\", price: 10000},\n  {name: \"Cider\", type: \"drink\", price: 2},\n  {name: \"Carrot\", type: \"veggie\", price: 1}\n  ])\n</code></pre>\n\n<p>Locally, this is totally fine. I sync this new data with other data in the seeds file: </p>\n\n<p><code>rake db:drop</code></p>\n\n<p><code>rake db:create</code></p>\n\n<p><code>rake db:migrate</code></p>\n\n<p><code>rake db:seed</code></p>\n\n<p>However, in production, the database now has user entered data. Dropping the database would mean dropping the user data.</p>\n\n<p>Is there a way to sync the new seeds file with the production database, without having to drop the database? Ideally, this would be more efficient than <code>heroku run rails c</code> and manually editing all the info in my console.</p>\n"}, {"tags": ["php", "ruby", "rubygems", "codeigniter-3", "webhooks"], "answers": [{"tags": [], "owner": {"reputation": 2244, "user_id": 3711213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ddce440a771246719f9dcbd3b5479547?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3711213/franco"}, "is_accepted": false, "score": 2, "last_activity_date": 1475176262, "last_edit_date": 1475176262, "creation_date": 1475164171, "answer_id": 39774796, "question_id": 39754140, "link": "https://stackoverflow.com/questions/39754140/ultrahook-and-mamp-pro-4-0-5-in-codeigniter-on-mac-el-capitan/39774796#39774796", "title": "Ultrahook and MAMP PRO 4.0.5 in Codeigniter on Mac El Capitan", "body": "<p>Ok! It took two days to figure out what was going wrong and now everything is working correctly.</p>\n\n<p>So, as a dedicated SO user i feel that I must share what I have found out.</p>\n\n<p>First think to be mentioned is that ruby has a very general way to\nreport the generated errors and if you don't know nothing (as I do)\nabout ruby then you have a problem .</p>\n\n<p>Even thought I had a look at the ruby code by the complaining method <code>initialize</code> and I found out that noting was wrong with that.</p>\n\n<p>I am on Mac El Capitan and using MAMP PRO 4.0.5 as my local server and Codeigniter 3 as framework and I want to use ultrahook in order to test the Stripe webhook events locally before everithing goes in production.</p>\n\n<p>The first thing to be aware is the MAMP configuration.\nIf you are planning to use ultrahook and want install it take care that this checkbox option (located under the Ryby tab on the left) is unchecked:</p>\n\n<pre><code>Make ruby available in the command line\n</code></pre>\n\n<p>Why?</p>\n\n<p>If you install ultrahook with this option checked, the gem will be installed in:</p>\n\n<pre><code>/Applications/MAMP/Library/lib/ruby/gems/2.3.0/gems\n</code></pre>\n\n<p>And you don't want that. You normally would install it in the usr/bin</p>\n\n<p>Now. at this time, due to the new security policy El Capitan do not allow you to write in this folder. What we do now?</p>\n\n<p>Just install it in in the usr/local/bin.</p>\n\n<pre><code>$ gem install -n /usr/local/bin ultrahook\n</code></pre>\n\n<p>Once done you will be able to do the normal stuff explained in the <a href=\"http://www.ultrahook.com/\" rel=\"nofollow\">http://www.ultrahook.com/</a>. I am sorry but I would like to explain to you the complete process but it will go out the scope of this post.</p>\n\n<p>At this point you will than be able to use ultrahook and to register your webhook by Stripe.</p>\n\n<p>The last important thing is to exclude the controller you are using (the page which will respond to the Stripe webhook events)\nto be blocked by the csrf protection.</p>\n\n<pre><code>$config['csrf_exclude_uris'] = array('stripe/webhook');\n</code></pre>\n\n<p>Or whatever you have defined in your $route[''].</p>\n\n<p>If you forget to do this you will get a 403 response, which means <code>forbidden</code>.</p>\n\n<p>The other important thing is, when you are checking the Stripe response you need to be in the terminal where you are requesting the connection through your ultrahook namespace in order to see the incoming event sent to you.</p>\n\n<p>I hope this will help someone having hard time trying to make this work.</p>\n\n<p>If you have any additional question I will be glad to help you out.</p>\n"}], "owner": {"reputation": 2244, "user_id": 3711213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ddce440a771246719f9dcbd3b5479547?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3711213/franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475176262, "creation_date": 1475083984, "last_edit_date": 1475164587, "question_id": 39754140, "link": "https://stackoverflow.com/questions/39754140/ultrahook-and-mamp-pro-4-0-5-in-codeigniter-on-mac-el-capitan", "title": "Ultrahook and MAMP PRO 4.0.5 in Codeigniter on Mac El Capitan", "body": "<p>I have successfully installed ultrahook.\nI had to install this in usr/local/bin on Mac El Capitan, because I was not able (due to the new security policy) to install it in usr/bin.</p>\n\n<p>When I run the command:</p>\n\n<pre><code>ultrahook &lt;my.namespace&gt;  https://localhost:8890\n</code></pre>\n\n<p>I get this message:</p>\n\n<pre><code>Authenticated as &lt;namespace_name&gt;\nForwarding activated...\nhttp://&lt;namespace_name&gt;.ultrahook.com -&gt;https://localhost:8890\n</code></pre>\n\n<p>So it seems that everything is up and running.</p>\n\n<p>But when I send a test notification from Stripe via this above mentioned webhook the following error will show in the terminal:</p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:878:in `initialize': getaddrinfo: nodename nor servname provided, or not known (SocketError)\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:878:in `open'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:878:in `block in connect'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/timeout.rb:52:in `timeout'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:877:in `connect'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:862:in `do_start'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:851:in `start'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1373:in `request'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1396:in `send_entity'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1184:in `post'\n    from /Library/Ruby/Gems/2.0.0/gems/ultrahook-0.1.4/lib/ultrahook/client.rb:127:in `http_post'\n    from /Library/Ruby/Gems/2.0.0/gems/ultrahook-0.1.4/lib/ultrahook/client.rb:116:in `process_request'\n    from /Library/Ruby/Gems/2.0.0/gems/ultrahook-0.1.4/lib/ultrahook/client.rb:90:in `process'\n    from /Library/Ruby/Gems/2.0.0/gems/ultrahook-0.1.4/lib/ultrahook/client.rb:160:in `block (3 levels) in init_stream'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:411:in `call_block'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:402:in `&lt;&lt;'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:106:in `read'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http/response.rb:313:in `read_chunked'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http/response.rb:276:in `block in read_body_0'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http/response.rb:269:in `inflater'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http/response.rb:274:in `read_body_0'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http/response.rb:201:in `read_body'\n    from /Library/Ruby/Gems/2.0.0/gems/ultrahook-0.1.4/lib/ultrahook/client.rb:155:in `block (2 levels) in init_stream'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1419:in `block (2 levels) in transport_request'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http/response.rb:162:in `reading_body'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1418:in `block in transport_request'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1409:in `catch'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1409:in `transport_request'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1382:in `request'\n    from /Library/Ruby/Gems/2.0.0/gems/ultrahook-0.1.4/lib/ultrahook/client.rb:153:in `block in init_stream'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:852:in `start'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:582:in `start'\n    from /Library/Ruby/Gems/2.0.0/gems/ultrahook-0.1.4/lib/ultrahook/client.rb:148:in `init_stream'\n    from /Library/Ruby/Gems/2.0.0/gems/ultrahook-0.1.4/lib/ultrahook/client.rb:65:in `start'\n    from /Library/Ruby/Gems/2.0.0/gems/ultrahook-0.1.4/bin/ultrahook:6:in `&lt;top (required)&gt;'\n    from /usr/local/bin/ultrahook:22:in `load'\n    from /usr/local/bin/ultrahook:22:in `&lt;main&gt;'\n</code></pre>\n\n<p>I have never used ruby or ruby gems before, so I can not figure out what all this means and how to solve this issue.</p>\n\n<p>Any help will be much appreciated</p>\n\n<p>Thanks</p>\n\n<p>In the mean while I have tried a lot of combinations but this error persists after the registration of the endpoint:</p>\n\n<pre><code>ultrahook stripe http://site-gen:8888/stripe19440207\nAuthenticated as bootsweaver\nForwarding activated...\nhttp://stripe.bootsweaver.ultrahook.com -&gt; http://site-gen:8888/stripe19440207\n</code></pre>\n\n<p>Getting the response it remain just the same:</p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:878:in `initialize': getaddrinfo: nodename nor servname provided, or not known (SocketError)\n</code></pre>\n\n<p>Please help me out with this, I am busy with this  from yesterday already and I have not idea of this all means.</p>\n\n<p>I can not go on with my work and I am stuck.</p>\n\n<p>Thank you guys</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1475083707, "post_id": 39754033, "comment_id": 66804083, "body": "How do you try to retrieve the film from the hash?"}, {"owner": {"reputation": 41, "user_id": 4167936, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/72f7e0ee0db60d1bc1f09886ec61d3a7?s=128&d=identicon&r=PG&f=1", "display_name": "SG17", "link": "https://stackoverflow.com/users/4167936/sg17"}, "reply_to_user": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1475083784, "post_id": 39754033, "comment_id": 66804119, "body": "@Bustikiller I think that will be asked further in the problem but it will not let me get to the next step it says that I am not adding the title and rating to the movie hash"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4167936, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/72f7e0ee0db60d1bc1f09886ec61d3a7?s=128&d=identicon&r=PG&f=1", "display_name": "SG17", "link": "https://stackoverflow.com/users/4167936/sg17"}, "edited": false, "score": 0, "creation_date": 1475084021, "post_id": 39754119, "comment_id": 66804232, "body": "still getting the same error message of: It looks like you didn&#39;t add  to the movies hash!"}], "tags": [], "owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "is_accepted": false, "score": 0, "last_activity_date": 1475083910, "creation_date": 1475083910, "answer_id": 39754119, "question_id": 39754033, "link": "https://stackoverflow.com/questions/39754033/code-academy-help-ruby/39754119#39754119", "title": "Code Academy Help - Ruby", "body": "<p>Probably your hash expects symbol keys and you are adding string keys. Try: </p>\n\n<pre><code>movies[title.to_sym] = rating\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 4167936, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/72f7e0ee0db60d1bc1f09886ec61d3a7?s=128&d=identicon&r=PG&f=1", "display_name": "SG17", "link": "https://stackoverflow.com/users/4167936/sg17"}, "edited": false, "score": 0, "creation_date": 1475089091, "post_id": 39755261, "comment_id": 66807235, "body": "i still get an error I think it must be a bug on codecadmey"}, {"owner": {"reputation": 1073, "user_id": 5715870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e7d59420f276b45ef3a56a2617dd5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "dhrubo_moy", "link": "https://stackoverflow.com/users/5715870/dhrubo-moy"}, "reply_to_user": {"reputation": 41, "user_id": 4167936, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/72f7e0ee0db60d1bc1f09886ec61d3a7?s=128&d=identicon&r=PG&f=1", "display_name": "SG17", "link": "https://stackoverflow.com/users/4167936/sg17"}, "edited": false, "score": 0, "creation_date": 1475089279, "post_id": 39755261, "comment_id": 66807341, "body": "Damn it!! Ya I think its a bug. Cause I can add to the <code>movies</code> hash successfully with your code in my machine."}], "tags": [], "owner": {"reputation": 1073, "user_id": 5715870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e7d59420f276b45ef3a56a2617dd5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "dhrubo_moy", "link": "https://stackoverflow.com/users/5715870/dhrubo-moy"}, "is_accepted": false, "score": 0, "last_activity_date": 1475088371, "last_edit_date": 1475088371, "creation_date": 1475087924, "answer_id": 39755261, "question_id": 39754033, "link": "https://stackoverflow.com/questions/39754033/code-academy-help-ruby/39755261#39755261", "title": "Code Academy Help - Ruby", "body": "<p>If you added movie \"Shinning\" with a rating 10 for example, may be Code Academy is expecting the <code>movies</code> hash to be equal to <code>{:Batman=&gt;10, :Shinning=&gt;10}</code>, but with your code we will have <code>movies</code> equal to <code>{:Batman=&gt;10, \"Shinning\"=&gt;\"10\"}</code>. If that is the case then you have to keep in mind following things:</p>\n\n<ol>\n<li>Keys of the hash should be a symbol, not a string (eg. <code>:Batman</code>, not <code>\"Batman\"</code>)</li>\n<li>Value (rating) should be an integer, not a string. (<code>10</code>, not <code>\"10\"</code>)</li>\n</ol>\n\n<p>So replace this line:</p>\n\n<pre><code>movies[title] = rating\n</code></pre>\n\n<p>with following:</p>\n\n<pre><code>movies[title.to_sym] = rating.to_i\n</code></pre>\n\n<p>That's the only explanation I could come up with. However, if that is not the case, then I'd say your code is fine and new key value do get added in the <code>movies</code> hash.</p>\n"}, {"tags": [], "owner": {"reputation": 1670, "user_id": 6886515, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fcszT.jpg?s=128&g=1", "display_name": "Black Enigma", "link": "https://stackoverflow.com/users/6886515/black-enigma"}, "is_accepted": false, "score": 1, "last_activity_date": 1475095064, "last_edit_date": 1475095064, "creation_date": 1475093920, "answer_id": 39756914, "question_id": 39754033, "link": "https://stackoverflow.com/questions/39754033/code-academy-help-ruby/39756914#39756914", "title": "Code Academy Help - Ruby", "body": "<p>Your code is actually right</p>\n\n<p>I can confirm that it's a bug from codecademy because my solution is virtually similar and it passed<a href=\"https://i.stack.imgur.com/xCvr9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xCvr9.png\" alt=\"My code is similar to yours\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/oYk67.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oYk67.png\" alt=\"That shows the code passed\"></a></p>\n\n<p>I faced the same challenge on Codecademy. I think your first option is to ensure the <code>movies</code> hash is not altered and it includes <strong>exactly all the movies that were part of the question</strong>. Problem with Codecademy is that it actually checks for return value and not code or logic so sometimes you can getaway by writing code that will pass the submission even when it shouldn't</p>\n\n<p>If that doesn't solve it, alternatively reset the code and type the solution in again and submit. Hopefully this should rectify the problem. I had to do this a couple of times before it worked as codecademy seems to have a couple of bugs. All the best and hope this spolves it</p>\n"}, {"comments": [{"owner": {"reputation": 408, "user_id": 6829425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w7px6.jpg?s=128&g=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6829425/sid"}, "edited": false, "score": 0, "creation_date": 1475103237, "post_id": 39758778, "comment_id": 66813756, "body": "...and there is an extra comma after the only row in &quot;movies&quot; hash"}], "tags": [], "owner": {"reputation": 408, "user_id": 6829425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w7px6.jpg?s=128&g=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6829425/sid"}, "is_accepted": true, "score": 0, "last_activity_date": 1475102727, "creation_date": 1475102727, "answer_id": 39758778, "question_id": 39754033, "link": "https://stackoverflow.com/questions/39754033/code-academy-help-ruby/39758778#39758778", "title": "Code Academy Help - Ruby", "body": "<p>This was very tempting :) So, I actually logged into codeacademy, found the example and worked on it. Codeacademy only accepts your assignment if the results are as it expects, irrespective of whether its right or not. So I tried varied answers, till I got what codeacademy likes.<a href=\"https://i.stack.imgur.com/Sfj9X.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sfj9X.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Also, in your code, you are creating a hash with symbols when the assignment is for strings. Plus you are not converting your input values to symbols. So, even though your solution may work it will fail on CodeAcademy.</p>\n"}], "owner": {"reputation": 41, "user_id": 4167936, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/72f7e0ee0db60d1bc1f09886ec61d3a7?s=128&d=identicon&r=PG&f=1", "display_name": "SG17", "link": "https://stackoverflow.com/users/4167936/sg17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 39758778, "answer_count": 4, "score": 1, "last_activity_date": 1475102727, "creation_date": 1475083614, "question_id": 39754033, "link": "https://stackoverflow.com/questions/39754033/code-academy-help-ruby", "title": "Code Academy Help - Ruby", "body": "<p>It is asking me to do the following:</p>\n\n<p>1.\nInside your when \"add\" block, remove the puts \"Added!\" statement.</p>\n\n<p>In its place, prompt the user for a movie title. Save the result in a new variable called title. (Your code already has an example of how to do this!)</p>\n\n<p>Next, prompt the user for the rating of the movie. Save that in a new variable called rating.</p>\n\n<p>Add that movie/rating pair to the movies hash and puts a message indicating the pair was added. (No need for to_sym or to_i just yet!)</p>\n\n<p>I am putting this and getting an error that i didn't add  to the movies hash!</p>\n\n<pre><code>movies = {\n     Batman: 10,\n}\n\nputs \"What is your favorite movie?\"\nchoice = gets.chomp\n\ncase choice\n when 'add' \n     puts \"What movie do you want to add?\"\n      title = gets.chomp\n\n     puts \"Whats the rating (1-10)?\"\n      rating = gets.chomp\n\n     movies[title] = rating\n     puts \"#{title} has been added with a rating of #{rating}!\"\n\n when \"update\"\n     puts \"Updated!\"\n when \"display\"\n     puts \"Movies!\"\n when \"delete\"\n     puts \"Deleted!\"\n else\n     puts \"Error!\"\nend\n</code></pre>\n"}, {"tags": ["ruby", "bit-manipulation"], "answers": [{"comments": [{"owner": {"reputation": 977, "user_id": 822097, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f237d6e50798147a98e388a15c6b45bf?s=128&d=identicon&r=PG", "display_name": "zimkies", "link": "https://stackoverflow.com/users/822097/zimkies"}, "edited": false, "score": 1, "creation_date": 1475084534, "post_id": 39754053, "comment_id": 66804543, "body": "So a[a.bit_length -1] returns 1 for a = 5. It should be 0. But a[a.size] seems to work well. Thanks for a pointer in the right direction!"}, {"owner": {"reputation": 1983, "user_id": 2830652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99L9k.png?s=128&g=1", "display_name": "sokkyoku", "link": "https://stackoverflow.com/users/2830652/sokkyoku"}, "reply_to_user": {"reputation": 977, "user_id": 822097, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f237d6e50798147a98e388a15c6b45bf?s=128&d=identicon&r=PG", "display_name": "zimkies", "link": "https://stackoverflow.com/users/822097/zimkies"}, "edited": false, "score": 0, "creation_date": 1475084709, "post_id": 39754053, "comment_id": 66804662, "body": "Edited my answer because I realised a downfall of <code>bit_length</code>. Don&#39;t use <code>size</code>, it gives you the amount of bytes used to represent your number. it is entirely coincidental that you get the right result, try it with <code>-17999</code> rather than <code>5</code> and you&#39;ll see"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 977, "user_id": 822097, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f237d6e50798147a98e388a15c6b45bf?s=128&d=identicon&r=PG", "display_name": "zimkies", "link": "https://stackoverflow.com/users/822097/zimkies"}, "edited": false, "score": 0, "creation_date": 1475085811, "post_id": 39754053, "comment_id": 66805302, "body": "@zimkies Since <code>size</code> gives the number of bytes, a simple variant of your comment seems to work:  <code>a[a.size * 8 - 1]</code>"}, {"owner": {"reputation": 1983, "user_id": 2830652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99L9k.png?s=128&g=1", "display_name": "sokkyoku", "link": "https://stackoverflow.com/users/2830652/sokkyoku"}, "edited": false, "score": 0, "creation_date": 1475086696, "post_id": 39754053, "comment_id": 66805894, "body": "Your solution will work as long as you are certain that negative numbers are stored as their 2s complement in ruby (or at least on the platform you&#39;re targetting)"}, {"owner": {"reputation": 977, "user_id": 822097, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f237d6e50798147a98e388a15c6b45bf?s=128&d=identicon&r=PG", "display_name": "zimkies", "link": "https://stackoverflow.com/users/822097/zimkies"}, "edited": false, "score": 0, "creation_date": 1475086729, "post_id": 39754053, "comment_id": 66805919, "body": "Ah, yes, size is wrong. But <code>a[a.bit_length + 1]</code> seems to be the most efficient answer."}], "tags": [], "owner": {"reputation": 1983, "user_id": 2830652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99L9k.png?s=128&g=1", "display_name": "sokkyoku", "link": "https://stackoverflow.com/users/2830652/sokkyoku"}, "is_accepted": true, "score": 4, "last_activity_date": 1475087072, "last_edit_date": 1475087072, "creation_date": 1475083671, "answer_id": 39754053, "question_id": 39753873, "link": "https://stackoverflow.com/questions/39753873/how-can-i-access-a-ruby-integers-sign-bit/39754053#39754053", "title": "How can I access a ruby integer&#39;s sign bit?", "body": "<p>You can understand this by looking at the documentation for <code>Fixnum#[]</code> :</p>\n\n<blockquote>\n  <p>Returns the +n+th bit in the binary representation of fix, where fix[0] is the least significant bit</p>\n</blockquote>\n\n<p><a href=\"https://ruby-doc.org/core-2.2.0/Fixnum.html#method-i-5B-5D\" rel=\"nofollow\">https://ruby-doc.org/core-2.2.0/Fixnum.html#method-i-5B-5D</a></p>\n\n<p>A <code>Fixnum</code> is not an array, thus its <code>#[]</code> function can (and does) behave differently to what you'd expect from an array.</p>\n\n<h1>Solution 1</h1>\n\n<p>To access the most significant bit you can use <code>#bit_length - 1</code></p>\n\n<pre><code>&gt; a = 5\n=&gt; 5\n&gt; a[a.bit_length - 1]\n=&gt; 1\n</code></pre>\n\n<p>However, <strong>this excludes the sign bit for negative numbers</strong>, so to get the sign bit, do not remove 1 from the <code>bit_length</code></p>\n\n<pre><code>&gt; a = -5\n=&gt; 5\n&gt; a[a.bit_length]\n=&gt; 1\n&gt; a = 42\n=&gt; 42\n&gt; a[a.bit_length]\n=&gt; 0\n</code></pre>\n\n<h1>Solution 2</h1>\n\n<p>You could also just use a <code>&lt; 0</code> comparison:</p>\n\n<pre><code>&gt; a = -5\n=&gt; -5\n&gt; sign_bit = a &lt; 0 ? 1 : 0\n=&gt; 1\n</code></pre>\n\n<h1>Solution 3</h1>\n\n<p>First of all, let's read the documentation for <code>#size</code>:</p>\n\n<blockquote>\n  <p>Returns the number of bytes in the machine representation of fix.</p>\n</blockquote>\n\n<p>From the implementation of the function we can gather that if the stored number is inside the bounds of a 32-bit signed integer if will be stored in one. In this case <code>#size</code> returns <code>4</code>. If it is larger it will be stored in a 64-bit integer and <code>#size</code> will return <code>8</code>.</p>\n\n<p>However not all of these bits are in use. If you store the number <code>5</code> (0b101) your 32 bits will be occupied as such</p>\n\n<pre><code>10100000 00000000 00000000 00000000\n</code></pre>\n\n<p>Negative numbers are most of the time stored as the 2s complement (not sure if applicable for ruby) which would mean that if you store the number <code>-5</code> your 32 bits will be occupied as such</p>\n\n<pre><code>11011111 11111111 11111111 11111111\n</code></pre>\n\n<p>Thus you can also access the sign bit with the following code:</p>\n\n<pre><code>x[x.size * 8 - 1]\n</code></pre>\n\n<hr>\n\n<h1>Bonus</h1>\n\n<p>If you're curious about why <code>5[-1]</code> does not throw an exception and still returns a number, you can look at the source code for <code>Fixnum#[]</code> (on the documentation page previously mentioned).</p>\n\n<pre><code>if (i &lt; 0) return INT2FIX(0);\n</code></pre>\n\n<p>It is made to just return <code>0</code> if your index is a negative number.</p>\n"}], "owner": {"reputation": 977, "user_id": 822097, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f237d6e50798147a98e388a15c6b45bf?s=128&d=identicon&r=PG", "display_name": "zimkies", "link": "https://stackoverflow.com/users/822097/zimkies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 777, "favorite_count": 0, "accepted_answer_id": 39754053, "answer_count": 1, "score": 6, "last_activity_date": 1475087072, "creation_date": 1475083081, "question_id": 39753873, "link": "https://stackoverflow.com/questions/39753873/how-can-i-access-a-ruby-integers-sign-bit", "title": "How can I access a ruby integer&#39;s sign bit?", "body": "<p>I would like to access a ruby integer's sign bit directly.</p>\n\n<p>Ruby allows access to an int's bits through the <code>[]</code> operator:\n<code>\n1[0] -&gt; 1\n2[1] -&gt; 1\n</code></p>\n\n<p>I tried <code>-1[-1]</code> (to access the last one), but that doesn't work. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475083276, "post_id": 39753678, "comment_id": 66803836, "body": "Didn&#39;t you mean <code>cattr_accessor</code>? :)"}, {"owner": {"reputation": 270444, "user_id": 405017, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2024054e404233ed97b7d9287aff103d?s=128&d=identicon&r=PG", "display_name": "Phrogz", "link": "https://stackoverflow.com/users/405017/phrogz"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475083376, "post_id": 39753678, "comment_id": 66803892, "body": "cattr_accessor is the better name, but it&#39;s just an alias to mattr_accessor (per the link I gave)."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 6, "creation_date": 1475084547, "post_id": 39753678, "comment_id": 66804551, "body": "Also as a note this need not have an accessor method as <code>Object#instance_variable_get</code> will allow access to all instance variables (<code>@</code>) and <code>Object#class_variable_get</code> offers the same for class variables (<code>@@</code>) without the need for an explicit getter method e.g. <code>TestClass.instance_variable_get(:@variable)</code> or <code>TestClass.class_variable_get(:@@variable)</code>"}, {"owner": {"reputation": 279, "user_id": 5917243, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-qtep2iMqRfc/AAAAAAAAAAI/AAAAAAAAABE/OpjnOORf7ac/photo.jpg?sz=128", "display_name": "Vladislav Aniskin", "link": "https://stackoverflow.com/users/5917243/vladislav-aniskin"}, "edited": false, "score": 0, "creation_date": 1475165292, "post_id": 39753678, "comment_id": 66844528, "body": "Thanks, it&#39;s work! I was hoping to see more flexibility on the ruby. It turns out we use the getter instead of direct access to the variables, it will not be comfortable with a small pojo objects."}, {"owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1525511785, "post_id": 39753678, "comment_id": 87392181, "body": "@engineersmnky, if you publish this as an answer, I&#39;ll upvote."}, {"owner": {"reputation": 1392, "user_id": 4553442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1bqCL.jpg?s=128&g=1", "display_name": "Tom Hundt", "link": "https://stackoverflow.com/users/4553442/tom-hundt"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1565627530, "post_id": 39753678, "comment_id": 101403284, "body": "Re accessing instance/class variables (mainly from the console), for me it worked like <code>FooClass.class_variable_set(:@@foo, &#39;bar&#39;)</code> and <code>FooClass.class_variable_get(:@@foo)</code>, and for instances <code>foo_class.instance_variable_set(:@foo, &#39;baz&#39;)</code> and <code>foo_class.instance_variable_get(:@foo)</code>.  They accept either symbols <code>:@foo</code> or strings <code>&#39;@foo&#39;</code>.  (Thanks @engineersmnky for posting.)"}], "tags": [], "owner": {"reputation": 270444, "user_id": 405017, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2024054e404233ed97b7d9287aff103d?s=128&d=identicon&r=PG", "display_name": "Phrogz", "link": "https://stackoverflow.com/users/405017/phrogz"}, "is_accepted": true, "score": 30, "last_activity_date": 1475119740, "last_edit_date": 1475119740, "creation_date": 1475082391, "answer_id": 39753678, "question_id": 39753594, "link": "https://stackoverflow.com/questions/39753594/how-do-i-access-class-variable/39753678#39753678", "title": "How do I access class variable?", "body": "<p>In Ruby, reading and writing to <code>@instance</code> variables (and <code>@@class</code> variables) of an object must be done through a method on that object. For example:</p>\n\n<pre><code>class TestClass\n  @@variable = \"var\"\n  def self.variable\n    # Return the value of this variable\n    @@variable\n  end\nend\n\np TestClass.variable #=&gt; \"var\"\n</code></pre>\n\n<p>Ruby has some built-in methods to create simple accessor methods for you. If you will use an instance variable on the class (instead of a class variable):</p>\n\n<pre><code>class TestClass\n  @variable = \"var\"\n  class &lt;&lt; self\n    attr_accessor :variable\n  end\nend\n</code></pre>\n\n<p>Ruby on Rails offers <a href=\"http://apidock.com/rails/Module/mattr_accessor\" rel=\"noreferrer\">a convenience method</a> specifically for class variables:</p>\n\n<pre><code>class TestClass\n  mattr_accessor :variable\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 279, "user_id": 5917243, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-qtep2iMqRfc/AAAAAAAAAAI/AAAAAAAAABE/OpjnOORf7ac/photo.jpg?sz=128", "display_name": "Vladislav Aniskin", "link": "https://stackoverflow.com/users/5917243/vladislav-aniskin"}, "edited": false, "score": 0, "creation_date": 1475164877, "post_id": 39753712, "comment_id": 66844269, "body": "Thanks bro, but unfortunately, this has caused tighter error."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 279, "user_id": 5917243, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-qtep2iMqRfc/AAAAAAAAAAI/AAAAAAAAABE/OpjnOORf7ac/photo.jpg?sz=128", "display_name": "Vladislav Aniskin", "link": "https://stackoverflow.com/users/5917243/vladislav-aniskin"}, "edited": false, "score": 0, "creation_date": 1475164941, "post_id": 39753712, "comment_id": 66844309, "body": "@VladislavAniskin this could not have caused error because it is correct (one of few) way to access class variable."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 279, "user_id": 5917243, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-qtep2iMqRfc/AAAAAAAAAAI/AAAAAAAAABE/OpjnOORf7ac/photo.jpg?sz=128", "display_name": "Vladislav Aniskin", "link": "https://stackoverflow.com/users/5917243/vladislav-aniskin"}, "edited": false, "score": 0, "creation_date": 1475165393, "post_id": 39753712, "comment_id": 66844589, "body": "@VladislavAniskin how did you come up with <code>this has caused tighter error</code>? Did you even tried it?"}, {"owner": {"reputation": 279, "user_id": 5917243, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-qtep2iMqRfc/AAAAAAAAAAI/AAAAAAAAABE/OpjnOORf7ac/photo.jpg?sz=128", "display_name": "Vladislav Aniskin", "link": "https://stackoverflow.com/users/5917243/vladislav-aniskin"}, "edited": false, "score": 0, "creation_date": 1475165643, "post_id": 39753712, "comment_id": 66844754, "body": "Maybe it&#39;s because of the platform. I try, I saw the same thing/"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 279, "user_id": 5917243, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-qtep2iMqRfc/AAAAAAAAAAI/AAAAAAAAABE/OpjnOORf7ac/photo.jpg?sz=128", "display_name": "Vladislav Aniskin", "link": "https://stackoverflow.com/users/5917243/vladislav-aniskin"}, "edited": false, "score": 0, "creation_date": 1475165693, "post_id": 39753712, "comment_id": 66844770, "body": "@VladislavAniskin impossible, unless you&#39;re on windows :D This code is 101% working and correct, I assure you"}, {"owner": {"reputation": 279, "user_id": 5917243, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-qtep2iMqRfc/AAAAAAAAAAI/AAAAAAAAABE/OpjnOORf7ac/photo.jpg?sz=128", "display_name": "Vladislav Aniskin", "link": "https://stackoverflow.com/users/5917243/vladislav-aniskin"}, "edited": false, "score": 0, "creation_date": 1475165878, "post_id": 39753712, "comment_id": 66844879, "body": "I believe, but I is not the first oddity. with the operator of the regular expression = ~ have an error, too, that there is no such statement."}, {"owner": {"reputation": 279, "user_id": 5917243, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-qtep2iMqRfc/AAAAAAAAAAI/AAAAAAAAABE/OpjnOORf7ac/photo.jpg?sz=128", "display_name": "Vladislav Aniskin", "link": "https://stackoverflow.com/users/5917243/vladislav-aniskin"}, "edited": false, "score": 0, "creation_date": 1475166000, "post_id": 39753712, "comment_id": 66844936, "body": "Under the windows? never bro!"}, {"owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "edited": false, "score": 0, "creation_date": 1492536334, "post_id": 39753712, "comment_id": 74012476, "body": "OMG, why you blame Windows? Do you know how computer works at all? p RUBY_VERSION"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "edited": false, "score": 0, "creation_date": 1492536521, "post_id": 39753712, "comment_id": 74012621, "body": "@Nakilon 1) didn&#39;t know &quot;OMG&quot; is still used on the internet :) 2) It was almost a year ago. 3) It was an innocent joke, not more than that."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1492536990, "post_id": 39753712, "comment_id": 74012904, "body": "I wonder, why the downvote? I&#39;d be glad to improve the answer."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 3, "last_activity_date": 1554537394, "last_edit_date": 1554537394, "creation_date": 1475082514, "answer_id": 39753712, "question_id": 39753594, "link": "https://stackoverflow.com/questions/39753594/how-do-i-access-class-variable/39753712#39753712", "title": "How do I access class variable?", "body": "<p>You have to access the class variable correctly. One of the ways is as follows:</p>\n\n<pre><code>class TestClass\n  @@varible = \"var\"\n\n  class &lt;&lt; self\n    def variable\n      @@varible\n    end\n  end\n\n # above is the same as\n # def self.variable\n #   @@variable\n # end\nend\n\nTestClass.variable\n#=&gt; \"var\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4079667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c929a06e3fde9ddef019e9b88bb7aebb?s=128&d=identicon&r=PG&f=1", "display_name": "zhu jiang", "link": "https://stackoverflow.com/users/4079667/zhu-jiang"}, "is_accepted": false, "score": 2, "last_activity_date": 1559371473, "creation_date": 1559371473, "answer_id": 56404473, "question_id": 39753594, "link": "https://stackoverflow.com/questions/39753594/how-do-i-access-class-variable/56404473#56404473", "title": "How do I access class variable?", "body": "<p>hava other method</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class RubyList\n  @@geek = \"Matz\"\n  @@country = 'USA'\nend\nRubyList.class_variable_set(:@@geek, 'Matz rocks!')\nputs RubyList.class_variable_get(:@@geek)\n</code></pre>\n"}], "owner": {"reputation": 279, "user_id": 5917243, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-qtep2iMqRfc/AAAAAAAAAAI/AAAAAAAAABE/OpjnOORf7ac/photo.jpg?sz=128", "display_name": "Vladislav Aniskin", "link": "https://stackoverflow.com/users/5917243/vladislav-aniskin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35080, "favorite_count": 3, "accepted_answer_id": 39753678, "answer_count": 3, "score": 21, "last_activity_date": 1559371473, "creation_date": 1475082107, "last_edit_date": 1475082897, "question_id": 39753594, "link": "https://stackoverflow.com/questions/39753594/how-do-i-access-class-variable", "title": "How do I access class variable?", "body": "<pre><code>class TestController &lt; ApplicationController\n\n  def test\n    @goodbay = TestClass.varible\n  end\nend\n\nclass TestClass\n  @@varible = \"var\"\nend\n</code></pre>\n\n<p>and i get error </p>\n\n<pre><code>undefined method 'varible' for TestClass:Class \n</code></pre>\n\n<p>on the line <code>@goodbay = TestClass.varible</code> </p>\n\n<p>What is wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "cocoon-gem"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4435207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Amf9S4bIlLg/AAAAAAAAAAI/AAAAAAAAADM/sGR-Wvt_InI/photo.jpg?sz=128", "display_name": "Rocky ram", "link": "https://stackoverflow.com/users/4435207/rocky-ram"}, "edited": false, "score": 0, "creation_date": 1475080300, "post_id": 39752955, "comment_id": 66802138, "body": "I also added :done inside the paramater now  but another problem occur updated in my question"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 1, "creation_date": 1475150883, "post_id": 39752955, "comment_id": 66834073, "body": "You will have to add at least <code>:id</code> and  <code>:_destroy</code>. Please check <a href=\"https://github.com/nathanvda/cocoon#strong-parameters-gotcha\" rel=\"nofollow noreferrer\">documentation</a>"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 1, "last_activity_date": 1475080060, "creation_date": 1475080060, "answer_id": 39752955, "question_id": 39752759, "link": "https://stackoverflow.com/questions/39752759/what-to-do-with-error-please-review-the-problems-below-using-cocoon-gem/39752955#39752955", "title": "What to do with error &#39;Please review the problems below:&#39; using cocoon gem?", "body": "<p>The console log shows: <code>Unpermitted parameter: done</code></p>\n\n<p>This is because in your controller, only these parameters are permitted:</p>\n\n<pre><code>params.require(:goal).permit(:name, :purpose, :deadline, actions_attributes: [:step])\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4435207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Amf9S4bIlLg/AAAAAAAAAAI/AAAAAAAAADM/sGR-Wvt_InI/photo.jpg?sz=128", "display_name": "Rocky ram", "link": "https://stackoverflow.com/users/4435207/rocky-ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 994, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477535096, "creation_date": 1475079434, "last_edit_date": 1477535096, "question_id": 39752759, "link": "https://stackoverflow.com/questions/39752759/what-to-do-with-error-please-review-the-problems-below-using-cocoon-gem", "title": "What to do with error &#39;Please review the problems below:&#39; using cocoon gem?", "body": "<p>I am creating an ruby on rails 5 application. It is a todolist kind of application and using simple_form, haml-rails and cocoon gem. This is a application with nested form.</p>\n\n<ol>\n<li><p>Generated a scaffold for goal and created model for action\nGoal.rb and Action.rb</p>\n\n<blockquote>\n<pre><code>class Goal &lt; ApplicationRecord\n  has_many :actions\n  accepts_nested_attributes_for :actions, reject_if: :all_blank\nend\n\nclass Action &lt; ApplicationRecord\n  belongs_to :goal\nend\n</code></pre>\n</blockquote>\n\n<ol start=\"2\">\n<li>Then added the actions_attribute to permit in the params </li>\n</ol></li>\n</ol>\n\n<blockquote>\n<pre><code>class GoalsController &lt; ApplicationController   before_action :set_goal, only: [:show, :edit, :update, :destroy]   def index\n    @goals = Goal.all   end   def show   end   def new\n    @goal = Goal.new   end   def edit   end   def create\n    @goal = Goal.new(goal_params)\n    respond_to do |format|\n      if @goal.save\n        format.html { redirect_to @goal, notice: 'Goal was successfully created.' }\n        format.json { render :show, status: :created, location: @goal }\n      else\n        format.html { render :new }\n        format.json { render json: @goal.errors, status: :unprocessable_entity }\n      end\n    end   end   def update\n    respond_to do |format|\n      if @goal.update(goal_params)\n        format.html { redirect_to @goal, notice: 'Goal was successfully updated.' }\n        format.json { render :show, status: :ok, location: @goal }\n      else\n        format.html { render :edit }\n        format.json { render json: @goal.errors, status: :unprocessable_entity }\n      end\n    end   end   def destroy\n    @goal.destroy\n    respond_to do |format|\n      format.html { redirect_to goals_url, notice: 'Goal was successfully destroyed.' }\n      format.json { head :no_content }\n    end   end   private\n    def set_goal\n      @goal = Goal.find(params[:id])\n    end\n    def goal_params\n      params.require(:goal).permit(:name, :purpose, :deadline, actions_attributes: [:step])\n    end\n</code></pre>\n  \n  <p>end</p>\n</blockquote>\n\n<ol start=\"3\">\n<li>Forms for both form.html and action.html</li>\n</ol>\n\n<p><strong>_form.html.haml</strong></p>\n\n<blockquote>\n<pre><code>= simple_form_for(@goal) do |f|\n  = f.error_notification\n\n  .form-inputs\n    = f.input :name\n    = f.input :purpose\n    = f.input :deadline\n    %h3 Actions\n    #tasks\n      = f.simple_fields_for :actions do |action|\n        = render 'action_fields', f: action\n      .links\n        = link_to_add_association 'Add', f, :actions\n\n  .form-actions\n    = f.button :submit\n</code></pre>\n  \n  <p>// action.html.haml<br>\n      .nested-fields\n        = f.input :step\n        = f.input :done, as: :boolean\n        = link_to_remove_association \"remove task\", f</p>\n</blockquote>\n\n<p>log in the console when i submit form</p>\n\n<pre><code>Processing by GoalsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"jel0g+oCkNaspe7T9dz7suDczIOdoKJqPqPDK9ta0WLPbwaSPBwshrDD2BrNAFeLoDx+0/soe11MWaZaH8cQoA==\", \"goal\"=&gt;{\"name\"=&gt;\"ja\", \"purpose\"=&gt;\"asdfd\", \"deadline\"=&gt;\"asdfasd\", \"actions_attributes\"=&gt;{\"0\"=&gt;{\"step\"=&gt;\"ARasd\", \"done\"=&gt;\"1\", \"_destroy\"=&gt;\"false\"}, \"1475080334356\"=&gt;{\"step\"=&gt;\"\", \"done\"=&gt;\"0\", \"_destroy\"=&gt;\"false\"}}}, \"commit\"=&gt;\"Create Goal\"}\nUnpermitted parameter: _destroy\nUnpermitted parameter: _destroy\n   (0.5ms)  BEGIN\n   (0.5ms)  ROLLBACK\n  Rendering goals/new.html.haml within layouts/application\n  Rendered goals/_action_fields.html.haml (18.5ms)\n  Rendered goals/_action_fields.html.haml (26.5ms)\n  Rendered goals/_action_fields.html.haml (19.0ms)\n  Rendered goals/_form.html.haml (252.5ms)\n  Rendered goals/new.html.haml within layouts/application (309.0ms)\nCompleted 200 OK in 932ms (Views: 898.5ms | ActiveRecord: 1.0ms)\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/MLbtT.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capistrano", "rails-console"], "comments": [{"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1475079243, "post_id": 39752623, "comment_id": 66801423, "body": "do you have the <code>~&#47;myapp&#47;current&#47;bin</code> folder and does it contain <code>rails</code> ?"}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1475079313, "post_id": 39752623, "comment_id": 66801473, "body": "Yes it&#39;s in there, it seems to be empty though.... at least if I <code>ls</code>into it"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1475079440, "post_id": 39752623, "comment_id": 66801552, "body": "yes, it should have the executable files. Check your Github repo, whether it has all the executable files with <code>bin</code> or not."}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1475079577, "post_id": 39752623, "comment_id": 66801637, "body": "I checked, it is full of files in the Github repo"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1475079617, "post_id": 39752623, "comment_id": 66801670, "body": "check <code>deploy.rb</code>, remove <code>bin</code> from <code>set :linked_dirs</code> and deploy once again, you should now expect to get all the executable files in your production."}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1475079685, "post_id": 39752623, "comment_id": 66801729, "body": "I did that, Im deploying again now, crossing my fingers :)"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1475080022, "post_id": 39752623, "comment_id": 66801955, "body": "Check the above comment, let me know if it works!"}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1475080079, "post_id": 39752623, "comment_id": 66801995, "body": "No it&#180;s not working, I still get the same options list for rails, but the <code>bin</code>is now full of files..."}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 1, "creation_date": 1475080258, "post_id": 39752623, "comment_id": 66802110, "body": "<code>RAILS_ENV=production bundle exec rails c</code> - which error it is showing ?"}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1475080513, "post_id": 39752623, "comment_id": 66802270, "body": "I put it in Edit to the question please see it there"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1475081389, "post_id": 39752623, "comment_id": 66802813, "body": "So, it opened your console as I see <code>Loading production environment (Rails 4.2.5)   irb(main):001:0&gt;</code>  , right ?"}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1475081714, "post_id": 39752623, "comment_id": 66803031, "body": "Yep, it did, is this the way to do this then?"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1475082072, "post_id": 39752623, "comment_id": 66803229, "body": "Yes, this is the way! I am extending this as an answer."}], "answers": [{"comments": [{"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "edited": false, "score": 0, "creation_date": 1475083310, "post_id": 39753665, "comment_id": 66803854, "body": "Thank you so much, this really helps me alot"}, {"owner": {"reputation": 6399, "user_id": 5800592, "user_type": "registered", "accept_rate": 93, "profile_image": "https://graph.facebook.com/783606718977/picture?type=large", "display_name": "Wylliam Judd", "link": "https://stackoverflow.com/users/5800592/wylliam-judd"}, "edited": false, "score": 1, "creation_date": 1539040565, "post_id": 39753665, "comment_id": 92348591, "body": "<code>RAILS_ENV=production bundle exec rails c</code> was all I needed."}], "tags": [], "owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "is_accepted": true, "score": 8, "last_activity_date": 1526328601, "last_edit_date": 1526328601, "creation_date": 1475082358, "answer_id": 39753665, "question_id": 39752623, "link": "https://stackoverflow.com/questions/39752623/accessing-rails-console-after-deploy-to-server/39753665#39753665", "title": "accessing Rails Console after deploy to server", "body": "<p>You are missing executable files of <code>bin</code> folder in <strong>Production</strong> after Capistrano deployment.</p>\n\n<p>You need to remove <code>bin</code> from <code>set :linked_dirs</code> from your Capistrano <code>deploy.rb</code> in order to avoid symlinking it.</p>\n\n<p>You can again try <code>cap production deploy</code>, it would take all the executable files from <code>bin</code> to Production.</p>\n\n<p>Now, you can access the rails console using:</p>\n\n<pre><code>RAILS_ENV=production bundle exec rails c\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "edited": false, "score": 0, "creation_date": 1475109238, "post_id": 39755034, "comment_id": 66815134, "body": "If I use the <code>capistrano-rails-console&#39; gem and </code>cd` into    <code>deploy@myapp:~&#47;myapp&#47;current$</code> I get this error <code>(Backtrace restricted to imported tasks) cap aborted! LoadError: cannot load such file -- capistrano&#47;rbenv &#47;home&#47;deploy&#47;hlinreykdal&#47;releases&#47;20160929002954&#47;Capfile:25:&zwnj;&#8203;in &#39;require&#39; &#47;home&#47;deploy&#47;hlinreykdal&#47;releases&#47;20160929002954&#47;Capfile:25:&zwnj;&#8203;in &#39;&lt;top (required)&gt;&#39; (See full trace by running task with --trace)</code>"}, {"owner": {"reputation": 220, "user_id": 1681709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gq5zF.jpg?s=128&g=1", "display_name": "Jason Brodie", "link": "https://stackoverflow.com/users/1681709/jason-brodie"}, "reply_to_user": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "edited": false, "score": 0, "creation_date": 1475111501, "post_id": 39755034, "comment_id": 66815561, "body": "Are you missing dependencies for it? Are you using rbenv?  I would have to see your gemfile and capfile to know what you are doing."}], "tags": [], "owner": {"reputation": 220, "user_id": 1681709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gq5zF.jpg?s=128&g=1", "display_name": "Jason Brodie", "link": "https://stackoverflow.com/users/1681709/jason-brodie"}, "is_accepted": false, "score": 1, "last_activity_date": 1475087192, "creation_date": 1475087192, "answer_id": 39755034, "question_id": 39752623, "link": "https://stackoverflow.com/questions/39752623/accessing-rails-console-after-deploy-to-server/39755034#39755034", "title": "accessing Rails Console after deploy to server", "body": "<p>If you are using Capistrano 3, you can include the rails:console option which will allow you to do this from your local machine to gain access to the console on the remote host:</p>\n\n<p><code>bundle exec cap production rails:console</code></p>\n\n<p><a href=\"https://rubygems.org/gems/capistrano-rails-console\" rel=\"nofollow\">https://rubygems.org/gems/capistrano-rails-console</a></p>\n"}, {"tags": [], "owner": {"reputation": 382, "user_id": 6930102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bf4ed3ad0a38ae8d7f43a2f1502e09d0?s=128&d=identicon&r=PG&f=1", "display_name": "edrich13", "link": "https://stackoverflow.com/users/6930102/edrich13"}, "is_accepted": false, "score": -1, "last_activity_date": 1485853018, "creation_date": 1485853018, "answer_id": 41953312, "question_id": 39752623, "link": "https://stackoverflow.com/questions/39752623/accessing-rails-console-after-deploy-to-server/41953312#41953312", "title": "accessing Rails Console after deploy to server", "body": "<p>check if rvm and regarding gemset is suitable for the app</p>\n\n<pre><code>rvm gemset list \nrvm list\n</code></pre>\n\n<p>and then do</p>\n\n<pre><code>bin/rails rails c -e production\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 969, "user_id": 326242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35cde28dc376b1403cf4de6cbebc80e5?s=128&d=identicon&r=PG", "display_name": "Andrew Koster", "link": "https://stackoverflow.com/users/326242/andrew-koster"}, "edited": false, "score": 0, "creation_date": 1576746766, "post_id": 54986045, "comment_id": 105000890, "body": "This works, but only if you add <code>-e development</code> or <code>-e production</code> or whatever to specify the correct environment. <code>bundle exec rails c -e production</code>"}], "tags": [], "owner": {"reputation": 1443, "user_id": 4064922, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-2_1oNmjkoec/AAAAAAAAAAI/AAAAAAAAAXE/OTUcRfaAZeM/photo.jpg?sz=128", "display_name": "Aboozar Rajabi", "link": "https://stackoverflow.com/users/4064922/aboozar-rajabi"}, "is_accepted": false, "score": 1, "last_activity_date": 1551712250, "creation_date": 1551712250, "answer_id": 54986045, "question_id": 39752623, "link": "https://stackoverflow.com/questions/39752623/accessing-rails-console-after-deploy-to-server/54986045#54986045", "title": "accessing Rails Console after deploy to server", "body": "<p>The Rails project is deployed in <code>/deploy/your_project_name/current</code> on the server by default. So, you can access it via SSH or ... and run <code>bundle exec rails c</code> to access the Rails console. It works for me!</p>\n"}], "owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2705, "favorite_count": 1, "accepted_answer_id": 39753665, "answer_count": 4, "score": 4, "last_activity_date": 1551712250, "creation_date": 1475078952, "last_edit_date": 1475080480, "question_id": 39752623, "link": "https://stackoverflow.com/questions/39752623/accessing-rails-console-after-deploy-to-server", "title": "accessing Rails Console after deploy to server", "body": "<p>I\u00b4m having trouble to access the rails console in production.</p>\n\n<p>I used <code>Capistrano</code>to deploy the app to a VPS</p>\n\n<p>If I cd to <code>deploy@myapp:~/myapp/current$</code>and run <code>bundle exec rails c</code>there I always get the option list for creating new rails project, like <code>rails new</code></p>\n\n<p>I've also tried <code>bundle exec rails console --production</code>and <code>rails console</code>etc all with the same outcome.</p>\n\n<p>the thing is I must be able to access the console because I have to create an admin user for <code>active admin</code></p>\n\n<p>might be worth adding that I'm using Passenger/Capistrano and Nginx on Ubuntu 16</p>\n\n<p>Does anyone know what is going on here? Am I doing something wrong?</p>\n\n<p><strong>*EDIT</strong></p>\n\n<p>After running <code>RAILS_ENV=production bundle exec rails c</code> I get this message</p>\n\n<pre><code> Looks like your app's ./bin/rails is a stub that was generated by Bundler.\n\n In Rails 4, your app's bin/ directory contains executables that are  versioned\n like any other source code, rather than stubs that are generated on demand.\n\n  Here's how to upgrade:\n\n  bundle config --delete bin    # Turn off Bundler's stub generator\n   rake rails:update:bin         # Use the new Rails 4 executables\n  git add bin                   # Add bin/ to source control\n\n   You may need to remove bin/ from your .gitignore as well.\n\n  When you install a gem whose executable you want to use in your app,\n  generate it and add it to source control:\n\n  bundle binstubs some-gem-name\n  git add bin/new-executable\n\n  Loading production environment (Rails 4.2.5)\n  irb(main):001:0&gt; \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1475078715, "post_id": 39752352, "comment_id": 66801069, "body": "You have two M&#39;s there."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475078774, "post_id": 39752352, "comment_id": 66801109, "body": "it&#39;s not clear. You want to display the alias? Or accept it as input?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1475078845, "post_id": 39752352, "comment_id": 66801174, "body": "<code>U = June</code>? <code>G = August</code>? <code>Y = July</code>? <code>C = October</code>? This sounds like a terrible idea..."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1475078928, "post_id": 39752352, "comment_id": 66801221, "body": "Why not use the 3-letter abbreviations (Jan, Feb, Mar, ...) that Rails already provides?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1475080409, "post_id": 39752352, "comment_id": 66802212, "body": "isn&#39;t it nonsense? Why do you try to invent the wheel when solution is already there? (see @TomLord&#39;s comment)"}, {"owner": {"reputation": 161, "user_id": 4004942, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/623ed68b3e10da70d284d7d0e52c73e0?s=128&d=identicon&r=PG&f=1", "display_name": "EpixRu", "link": "https://stackoverflow.com/users/4004942/epixru"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475096052, "post_id": 39752352, "comment_id": 66810924, "body": "@SergioTulentsev I apologize about that, it was a typo.  I corrected it now.    Similar to a timestamp, I want rails to record the alias in the database, when a form is submitted."}, {"owner": {"reputation": 161, "user_id": 4004942, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/623ed68b3e10da70d284d7d0e52c73e0?s=128&d=identicon&r=PG&f=1", "display_name": "EpixRu", "link": "https://stackoverflow.com/users/4004942/epixru"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475097596, "post_id": 39752352, "comment_id": 66811711, "body": "@AndreyDeineko I wish we could use the built-in month abbreviations.  That would make my life a lot easier.  I plan on concatenating this data to form a batch code number.  My goal is to keep our batch code number as short as possible.  That is why I am trying to figure out how to get rails to record these 1-character aliases instead of a month abbreviation or month number."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 4004942, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/623ed68b3e10da70d284d7d0e52c73e0?s=128&d=identicon&r=PG&f=1", "display_name": "EpixRu", "link": "https://stackoverflow.com/users/4004942/epixru"}, "edited": false, "score": 0, "creation_date": 1476333799, "post_id": 39763176, "comment_id": 67302621, "body": "I am having trouble getting this to work.  When I save the record, it keeps saving a 0.  When I change <code>self.month_abbr = MONTH_ABBRS[created_at.month]</code> to <code>self.month_abbr = created_at.month</code>, it records a 10 when the record is saved (which is correct).  I tried your code in the irb and works fine, so I am not sure what I am doing wrong."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 161, "user_id": 4004942, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/623ed68b3e10da70d284d7d0e52c73e0?s=128&d=identicon&r=PG&f=1", "display_name": "EpixRu", "link": "https://stackoverflow.com/users/4004942/epixru"}, "edited": false, "score": 0, "creation_date": 1476347323, "post_id": 39763176, "comment_id": 67308952, "body": "What is the the type of <code>created_abbr</code> column?"}, {"owner": {"reputation": 161, "user_id": 4004942, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/623ed68b3e10da70d284d7d0e52c73e0?s=128&d=identicon&r=PG&f=1", "display_name": "EpixRu", "link": "https://stackoverflow.com/users/4004942/epixru"}, "edited": false, "score": 0, "creation_date": 1476427883, "post_id": 39763176, "comment_id": 67349784, "body": "Wow I can&#39;t believe I didn&#39;t think about that!  month_abbr was set to integer, I changed it to string and it WORKS NOW!  Thank you so much @sergiotulentsev"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 0, "last_activity_date": 1475131361, "creation_date": 1475131361, "answer_id": 39763176, "question_id": 39752352, "link": "https://stackoverflow.com/questions/39752352/assign-alias-to-month-names-with-ruby-on-rails-4/39763176#39763176", "title": "Assign alias to Month names with Ruby on Rails 4", "body": "<p>This seems easy. Just map the month number to code once at record creation time.</p>\n\n<pre><code>class Order\n  MONTH_ABBRS = {\n    1 =&gt; 'J',\n    2 =&gt; 'F', \n    3 =&gt; 'R',\n    ...\n  }\n\n  before_create :save_month_abbr\n\n  private\n\n  def save_month_abbr\n    self.month_abbr = MONTH_ABBRS[created_at.month]\n    # also you can create your order number here, or whatever\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 4004942, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/623ed68b3e10da70d284d7d0e52c73e0?s=128&d=identicon&r=PG&f=1", "display_name": "EpixRu", "link": "https://stackoverflow.com/users/4004942/epixru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 39763176, "answer_count": 1, "score": 0, "last_activity_date": 1475131361, "creation_date": 1475078139, "last_edit_date": 1475097851, "question_id": 39752352, "link": "https://stackoverflow.com/questions/39752352/assign-alias-to-month-names-with-ruby-on-rails-4", "title": "Assign alias to Month names with Ruby on Rails 4", "body": "<p>In my Ruby on Rails application, when a user submits a form, I want to be able to capture the current month and year that the form was created in.  However, for the month, I want to be able to use an alias for a month instead of Rails using the actual month name.  So for example:</p>\n\n<ul>\n<li>J = January </li>\n<li>F = February </li>\n<li>R = March </li>\n<li>A = April </li>\n<li>M = May </li>\n<li>U = June </li>\n<li>Y = July </li>\n<li>G = August </li>\n<li>S = September </li>\n<li>C = October </li>\n<li>N = November </li>\n<li>D = December</li>\n</ul>\n\n<p>The closest solution I have been able to find it to use the Rails Internationalization (I18n) API.  Does anyone know if there is a better or easier way of doing this rather than creating a fake language to give me localized month names?</p>\n\n<p><strong>More information</strong></p>\n\n<p>My intention is for rails to record the new alias in the database under the column month_abbr. Which stands for month abbreviation.  So if I submitted the form in the month of October, the letter \"C\" would be recorded in the database. Similar to how a timestamp is automatically recorded for each record, I want to capture just the month and record a single character alias.</p>\n\n<p>Peeking further behind the curtain, we need the month abbreviation to be only 1 character.  In the future this month abbreviation will be concatenated into a batch code number. We are trying to keep the batch code number as short as possible, that is why we cannot use the built in month abbreviations.  They are simply too long.</p>\n"}, {"tags": ["ruby", "ruby-1.9.3"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1475078198, "post_id": 39752340, "comment_id": 66800723, "body": "I don&#39;t see how; without knowing the max length of a key there&#39;s no way to know your indentation level."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1475078559, "post_id": 39752340, "comment_id": 66800974, "body": "Look at <code>awesome_print</code> gem"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1475078628, "post_id": 39752340, "comment_id": 66801022, "body": "Yep, ap might be enough to meet your requirements."}, {"owner": {"reputation": 55, "user_id": 5655765, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5171e863cd43a19f6554bb9a0b8a7839?s=128&d=identicon&r=PG&f=1", "display_name": "abd", "link": "https://stackoverflow.com/users/5655765/abd"}, "edited": false, "score": 0, "creation_date": 1475084057, "post_id": 39752340, "comment_id": 66804254, "body": "I have been looking into removing the quotes and arrows in awesome_print but didn&#39;t find a way to it"}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 0, "last_activity_date": 1475079884, "creation_date": 1475079884, "answer_id": 39752901, "question_id": 39752340, "link": "https://stackoverflow.com/questions/39752340/print-hash-in-ruby-with-indentation-for-each-line/39752901#39752901", "title": "Print hash in ruby with indentation for each line", "body": "<p>Given this example. I think something as simple as finding the max length and padding using sprintf would be sufficient eg </p>\n\n<pre><code>def justified_printing_hash(h)\n  max_length = h.keys.max_by(&amp;:length).length\n  h.each {|k,v| puts sprintf(\"%&lt;key&gt;#{max_length}s %&lt;value&gt;d\",{key:k,value:v}) }\nend\n</code></pre>\n\n<p>Usage as </p>\n\n<pre><code>x = {\"abc\" =&gt; 12,\"abcdef\" =&gt; 44, \"sryyy\" =&gt; 5}\njustified_printing_hash(x)\n   abc 12\nabcdef 44\n sryyy 5\n#=&gt; {\"abc\" =&gt; 12,\"abcdef\" =&gt; 44, \"sryyy\" =&gt; 5}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1475087243, "creation_date": 1475087243, "answer_id": 39755050, "question_id": 39752340, "link": "https://stackoverflow.com/questions/39752340/print-hash-in-ruby-with-indentation-for-each-line/39755050#39755050", "title": "Print hash in ruby with indentation for each line", "body": "<p>Or to little update @engineersmnky you can do it by this:</p>\n\n<pre><code>x = {\"abc\" =&gt; 12,\"abcdef\" =&gt; 44, \"sryyy\" =&gt; 5}\nx.each do |key, value|\n   p \"#{key.rjust(x.keys.max_by(&amp;:length).length)} #{value}\"\nend\n\n&gt;    abc 12\n&gt; abcdef 44\n&gt;  sryyy 5\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5655765, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5171e863cd43a19f6554bb9a0b8a7839?s=128&d=identicon&r=PG&f=1", "display_name": "abd", "link": "https://stackoverflow.com/users/5655765/abd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475087243, "creation_date": 1475078095, "last_edit_date": 1475086343, "question_id": 39752340, "link": "https://stackoverflow.com/questions/39752340/print-hash-in-ruby-with-indentation-for-each-line", "title": "Print hash in ruby with indentation for each line", "body": "<p>I am trying to print a hash of strings and integers in ruby in the following format:</p>\n\n<pre><code>x = {\"abc\" =&gt; 12,\"abcdef\" =&gt; 44, \"sryyy\" =&gt; 5}\nputs x\n</code></pre>\n\n<p>the output should look like:</p>\n\n<pre><code>   abc 12  \nabcdef 44  \n sryyy 5\n</code></pre>\n\n<p>I can get the max length of each string then indent each line according to that, but is there any easier way to do it? or is there a method that does this already?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "asset-pipeline", "erb", "production"], "answers": [{"tags": [], "owner": {"reputation": 1348, "user_id": 2337967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d99b9f9fecef213745ac58a511ab4845?s=128&d=identicon&r=PG", "display_name": "Scott B", "link": "https://stackoverflow.com/users/2337967/scott-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1476290229, "creation_date": 1476290229, "answer_id": 40003867, "question_id": 39752252, "link": "https://stackoverflow.com/questions/39752252/rails-4-1-6-asset-pipeline-not-loading-assets-and-javascript-in-production/40003867#40003867", "title": "Rails 4.1.6 Asset pipeline not loading assets and javascript in production", "body": "<p>So it turned out to be a simple solution. I was using docker to push to production and needed to add this line to my Dockerfile</p>\n\n<pre><code>RUN rake assets:precompile\n</code></pre>\n\n<p>This precompiles the assets and adds the fingerprint so they can be served in production. Cheers!</p>\n"}], "owner": {"reputation": 1348, "user_id": 2337967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d99b9f9fecef213745ac58a511ab4845?s=128&d=identicon&r=PG", "display_name": "Scott B", "link": "https://stackoverflow.com/users/2337967/scott-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1409, "favorite_count": 0, "accepted_answer_id": 40003867, "answer_count": 1, "score": 4, "last_activity_date": 1491449966, "creation_date": 1475077911, "last_edit_date": 1475173784, "question_id": 39752252, "link": "https://stackoverflow.com/questions/39752252/rails-4-1-6-asset-pipeline-not-loading-assets-and-javascript-in-production", "title": "Rails 4.1.6 Asset pipeline not loading assets and javascript in production", "body": "<p>I have a ruby on rails web server that I am trying to deploy in production. I am having trouble getting the assets to load in production: .css, .js, and images (seems to work fine in development, due to ). </p>\n\n<p>Here is my production.rb</p>\n\n<pre><code>Rails.application.configure do\n\n  # Code is not reloaded between requests.\n  config.cache_classes = true\n\n  # Eager load code on boot. This eager loads most of Rails and\n  # your application in memory, allowing both threaded web servers\n  # and those relying on copy on write to perform better.\n  # Rake tasks automatically ignore this option for performance.\n  config.eager_load = true\n\n  # Full error reports are disabled and caching is turned on.\n  config.consider_all_requests_local       = false\n  config.action_controller.perform_caching = true\n\n  config.serve_static_files = true\n\n  # Compress JavaScripts and CSS.\n  config.assets.js_compressor = :uglifier\n\n  # Do not fallback to assets pipeline if a precompiled asset is missed.\n  config.assets.compile = false\n\n  # Generate digests for assets URLs.\n  config.assets.digest = true\nend\n</code></pre>\n\n<p>I used to have a deployed version of this same server and its tags looked like this in application.html.erb:</p>\n\n<pre><code>&lt;head&gt;\n  &lt;%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= csrf_meta_tags %&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>in production (loaded css/js)</p>\n\n<pre><code>&lt;link data-turbolinks-track=\"true\" href=\"/assets/application-06ed3643d0bf74fdf192f533cc269506.css\" media=\"all\" rel=\"stylesheet\" /&gt;\n&lt;script data-turbolinks-track=\"true\" src=\"/assets/application-f134ff018deb0477bd5ad046d853559d.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>When my application is deployed now it looks like this (without the fingerprint). The precompile seems to not be working. There are no files generated in public/assets which is a problem. Currently my application manifest looks like this</p>\n\n<pre><code>&lt;link data-turbolinks-track=\"true\" href=\"/stylesheets/application.css\" media=\"all\" rel=\"stylesheet\" /&gt;\n&lt;script data-turbolinks-track=\"true\" src=\"/javascripts/application.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I believe there is something wrong in regards to the asset pipeline and precompiling assets. It should generate the fingerprint version of the css and js and use them. Even running rake assets:precompile on my production server doesn't work. How do I get rails to use the fingerprint version?</p>\n\n<p>In playing around with certain settings I was able to get it to work by changing these settings:</p>\n\n<pre><code>config.assets.compile = true\n\n\nRails.application.config.assets.precompile &lt;&lt; /(^[^_\\/]|\\/[^_])[^\\/]*$/\n</code></pre>\n\n<p>I believe this will drastically slow down performance as I don't want to compile in production. I need to correct way to solve this problem. Any help would be greatly appreciated!</p>\n\n<p>Note: I also noticed that I have a application.js in /assets/javascripts but I have a application.css.scss in /assets/stylesheets -- not sure if this would affect it</p>\n"}, {"tags": ["json", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1565, "user_id": 6830898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecEgQ.jpg?s=128&g=1", "display_name": "fylie", "link": "https://stackoverflow.com/users/6830898/fylie"}, "is_accepted": true, "score": 0, "last_activity_date": 1475078140, "creation_date": 1475078140, "answer_id": 39752353, "question_id": 39752015, "link": "https://stackoverflow.com/questions/39752015/grabbing-specific-values-from-json/39752353#39752353", "title": "Grabbing specific values from JSON", "body": "<p>Your problem is that response['weather'] is an array, so you won't be able to access ['weather']['description'], instead you will have to do something like ['weather'][0]['description'].</p>\n\n<pre><code>2.3.0 :020 &gt; puts parsed['weather'][0]['description']\nmoderate rain\n2.3.0 :021 &gt; puts parsed['main']['humidity']\n100\n2.3.0 :022 &gt; puts parsed['wind']['speed']\n5.17\n2.3.0 :025 &gt; puts parsed['main']['temp']\n58.8\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4110892, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Nl9nk.jpg?s=128&g=1", "display_name": "Nathan Thompson", "link": "https://stackoverflow.com/users/4110892/nathan-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 39752353, "answer_count": 1, "score": 0, "last_activity_date": 1475078140, "creation_date": 1475077157, "question_id": 39752015, "link": "https://stackoverflow.com/questions/39752015/grabbing-specific-values-from-json", "title": "Grabbing specific values from JSON", "body": "<p>So here is what i'm trying to do. I'm building a simply Ruby file that will as the user for input, a city, and then return weather results for that city. I've never written in Ruby nor have I ever used API's. But here is my attempt. </p>\n\n<p>The API response below:</p>\n\n<pre><code>&gt; {\"coord\"=&gt;{\"lon\"=&gt;-85.68, \"lat\"=&gt;40.11}, \"weather\"=&gt;[{\"id\"=&gt;501,\n&gt; \"main\"=&gt;\"Rain\", \"description\"=&gt;\"moderate rain\", \"icon\"=&gt;\"10d\"}],\n&gt; \"base\"=&gt;\"stations\", \"main\"=&gt;{\"temp\"=&gt;57.78, \"pressure\"=&gt;1009,\n&gt; \"humidity\"=&gt;100, \"temp_min\"=&gt;57, \"temp_max\"=&gt;60.01},\n&gt; \"wind\"=&gt;{\"speed\"=&gt;5.17, \"deg\"=&gt;116.005}, \"rain\"=&gt;{\"1h\"=&gt;1.02},\n&gt; \"clouds\"=&gt;{\"all\"=&gt;92}, \"dt\"=&gt;1475075671, \"sys\"=&gt;{\"type\"=&gt;3,\n&gt; \"id\"=&gt;187822, \"message\"=&gt;0.1645, \"country\"=&gt;\"US\",\n&gt; \"sunrise\"=&gt;1475062634, \"sunset\"=&gt;1475105280}, \"id\"=&gt;4917592,\n&gt; \"name\"=&gt;\"Anderson\", \"cod\"=&gt;200} [Finished in 2.0s]\n</code></pre>\n\n<p>The Ruby file below:</p>\n\n<pre><code>require 'net/http'\nrequire 'json'\n\nurl = 'http://api.openweathermap.org/data/2.5/weather?q=anderson&amp;APPID=5c89010425b4d730b7558f57234ea3c8&amp;units=imperial'\nuri = URI(url)\nresponse = Net::HTTP.get(uri)\nparsed = JSON.parse(response)\nputs parsed #Print this so I can see results\ninputs temp = JSON.parse(response)['main']['temp']\nputs desc = JSON.parse(response)['weather']['description']\nputs humid = JSON.parse(response)['main']['humidity']\nputs wind = JSON.parse(response)['wind']['speed']\n</code></pre>\n\n<p>What I was trying to do was only pull out a few items like temperature,description, humidity, and wind. But I can't seem to get it right. I keep getting undefined errors with each attempt.\n(Wanting to complete this without using gems or anything that isn't already built into Ruby) (I have not written the parts for user input yet)</p>\n"}, {"tags": ["ruby", "bigcommerce"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6438501"}, "is_accepted": false, "score": 0, "last_activity_date": 1475496099, "creation_date": 1475496099, "answer_id": 39831102, "question_id": 39752007, "link": "https://stackoverflow.com/questions/39752007/getting-an-error-when-trying-to-connect-to-the-bigcommerce-api-with-ruby/39831102#39831102", "title": "Getting an error when trying to connect to the Bigcommerce API with Ruby", "body": "<p>tldr: you're environment variables aren't actually being set :p</p>\n\n<p>Sounds like your environment variables aren't actually being set. \nI say this because the error <code>Failed to open TCP connection to :80</code>, does not list any URL, but only the port. </p>\n\n<p>To confirm, within your code, can you simply run:\n<code>puts ENV['BC_API_ENDPOINT_LEGACY']</code>, and see if anything is printed?</p>\n\n<p>An alternative is to just hardcode your credentials, and not rely on environment variables. </p>\n\n<pre><code>Bigcommerce.configure do |config|\n  config.auth     = 'legacy'\n  config.url      = 'https://url.com'\n  config.username = 'api_username'\n  config.api_key  = 'api_key'\nend\n</code></pre>\n\n<p>FYI, the way you set an environment variable would generally be (from the command line):<br/>\n<code>export BC_API_ENDPOINT_LEGACY=\"https://url.com\"</code> <br/>\nAnd then confirm it is set by <code>echo $BC_API_ENDPOINT_LEGACY</code></p>\n\n<p>You can view <a href=\"http://railsapps.github.io/rails-environment-variables.html\" rel=\"nofollow\">this link</a> for other options on setting environment variables for your RoR app. </p>\n"}], "owner": {"reputation": 83, "user_id": 3608770, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/feVtb.png?s=128&g=1", "display_name": "rjfrizz", "link": "https://stackoverflow.com/users/3608770/rjfrizz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475496099, "creation_date": 1475077117, "last_edit_date": 1475124082, "question_id": 39752007, "link": "https://stackoverflow.com/questions/39752007/getting-an-error-when-trying-to-connect-to-the-bigcommerce-api-with-ruby", "title": "Getting an error when trying to connect to the Bigcommerce API with Ruby", "body": "<p>I'm new to Ruby and to the BC API so there may be something obvious that I'm missing. When I'm running the following code with the proper details replaced with my store's legacy API credentials:</p>\n\n<pre><code>require 'bigcommerce'\n\nBigcommerce.configure do |config|\n  config.auth = 'legacy'\n  # You will get this url when registering for an API key\n  config.url = ENV['BC_API_ENDPOINT_LEGACY']\n  config.username = ENV['BC_USERNAME']\n  config.api_key = ENV['BC_API_KEY']\nend\n\nputs Bigcommerce::System.time\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>.../lib/ruby/2.3.0/net/http.rb:882:in `rescue in block in connect': Failed to open TCP connection to :80 (Connection refused - connect(2) for nil port 80) (Faraday::ConnectionFailed)\n</code></pre>\n\n<p>I appreciate any pointers.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "asset-pipeline"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1475075917, "last_edit_date": 1592644375, "creation_date": 1475075917, "answer_id": 39751540, "question_id": 39751463, "link": "https://stackoverflow.com/questions/39751463/ruby-on-rails-asset-organisation-folders/39751540#39751540", "title": "Ruby on Rails asset organisation folders", "body": "<p>As described in the <a href=\"http://guides.rubyonrails.org/asset_pipeline.html\" rel=\"nofollow noreferrer\">asset pipeline guide</a>:</p>\n<blockquote>\n<ul>\n<li><p>app/assets is for assets that are owned by the application, such as custom images, JavaScript files or stylesheets.</p>\n</li>\n<li><p>lib/assets is for your own libraries' code that doesn't really fit into the scope of the application or those libraries which are shared across applications.</p>\n</li>\n<li><p>vendor/assets is for assets that are owned by outside entities, such as code for JavaScript plugins and CSS frameworks. Keep in mind that third party code with references to other files also processed by the asset Pipeline (images, stylesheets, etc.), will need to be rewritten to use helpers like asset_path.</p>\n</li>\n</ul>\n</blockquote>\n<p>Me, I only use app and vendor. My stuff goes to app, naturally. And 3rd party stuff (jquery plugins, bootstrap themes and whatnot) goes to vendor.</p>\n"}, {"tags": [], "owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "is_accepted": false, "score": 1, "last_activity_date": 1475076047, "creation_date": 1475076047, "answer_id": 39751579, "question_id": 39751463, "link": "https://stackoverflow.com/questions/39751463/ruby-on-rails-asset-organisation-folders/39751579#39751579", "title": "Ruby on Rails asset organisation folders", "body": "<blockquote>\n  <p>app/assets</p>\n</blockquote>\n\n<p>It should include all the assets written by you and only relevant to your project.</p>\n\n<blockquote>\n  <p>lib/assets</p>\n</blockquote>\n\n<p>It should include all the assets which are created by you but can be extracted to be used by another project.</p>\n\n<blockquote>\n  <p>vendor/assets</p>\n</blockquote>\n\n<p>It should include all the assets downloaded/purchased from third party like Bootstrap.</p>\n"}], "owner": {"reputation": 682, "user_id": 2014905, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/09f1059060a2a998cfeb08531cdffe92?s=128&d=identicon&r=PG&f=1", "display_name": "kklw", "link": "https://stackoverflow.com/users/2014905/kklw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 39751540, "answer_count": 2, "score": 0, "last_activity_date": 1475076047, "creation_date": 1475075696, "question_id": 39751463, "link": "https://stackoverflow.com/questions/39751463/ruby-on-rails-asset-organisation-folders", "title": "Ruby on Rails asset organisation folders", "body": "<p>I'm using ruby on rails 5. What is the difference app/assets, lib/assets and vendor/asset? </p>\n\n<p>If I write my own js scripts should they be included in the app/assets? How about if I use a bootstrap library where should I put it at?</p>\n\n<p>And regardless which folder they are in, i am able to access them using <code>javascript_include_tag</code>? Example:</p>\n\n<pre><code>javascript_include_tag \"xmlhr\"\n</code></pre>\n"}, {"tags": ["ruby", "flat-file"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475094318, "post_id": 39754912, "comment_id": 66809923, "body": "I don&#39;t think ObjectSpace mumbo-jumbo is relevant here. Do you think he has hundreds-thousands of PStore objects randomly lying around?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475094355, "post_id": 39754912, "comment_id": 66809945, "body": "Also, the question was: how to truncate the store?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475094527, "post_id": 39754912, "comment_id": 66810047, "body": "Also, no need for shelling out when there is ruby api for deleting files :)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475094755, "post_id": 39754912, "comment_id": 66810188, "body": "@SergioTulentsev to truncate the store (if I understand it correctly) one just would iterate over table&#39;s keys (<code>store.roots</code>) and delete them, unless there is more efficient one-go method for it."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475094880, "post_id": 39754912, "comment_id": 66810267, "body": "@SergioTulentsev about ObjectSpace - you must be right, just didn&#39;t think of a better way to get all <code>PStore</code> objects. What do you mean by &quot;shelling out&quot;? If you mean <code>rm</code> thing - it&#39;s just that I wasn&#39;t able to delete the file with <code>File.delete</code> - or did I just have something messed up? I always appreciate your input, so thx in advance!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475095344, "post_id": 39754912, "comment_id": 66810538, "body": "Yes, &quot;to shell out&quot; means going to the OS/shell to do some stuff. In this case, deleting a file by executing <code>rm</code> command in a subprocess. It&#39;s interesting, why couldn&#39;t you delete it with <code>File.delete</code>? Perhaps the file was still open by the store?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475095391, "post_id": 39754912, "comment_id": 66810566, "body": "&quot;a better way to get all PStore objects&quot; - there is only one object in the question. :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475095450, "post_id": 39754912, "comment_id": 66810599, "body": "Yes, I think the way to go is iterate roots and delete them in a transaction. Could you put that into the answer (and remove the objectspace part)?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475095621, "post_id": 39754912, "comment_id": 66810695, "body": "@SergioTulentsev edited.  just tried it now and <code>File.delete(File.absolute_path(store.path))</code> and got <code>Errno::ENOENT: No such file or directory @ unlink_internal - &#47;path&#47;to&#47;data.pstore</code>.. (<code>&quot;data.pstore&quot;</code> is a filename)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475095686, "post_id": 39754912, "comment_id": 66810741, "body": "When I do <code>File.delete(store.path)</code> it returns <code>1</code>, but I still can access <code>store</code> object.."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475131650, "post_id": 39754912, "comment_id": 66821497, "body": "@SergioTulentsev edited the answer, don&#39;t know why yesterday I wrote it the way I did..?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1475133117, "post_id": 39754912, "comment_id": 66822328, "body": "Yep, that&#39;s what I meant \ud83d\udc4d"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 4, "last_activity_date": 1475131609, "last_edit_date": 1475131609, "creation_date": 1475086781, "answer_id": 39754912, "question_id": 39751449, "link": "https://stackoverflow.com/questions/39751449/clearing-or-deleting-a-ruby-pstore/39754912#39754912", "title": "Clearing or Deleting a Ruby PStore", "body": "<p>What you're looking for is <a href=\"http://ruby-doc.org/stdlib-1.9.2/libdoc/pstore/rdoc/PStore.html#method-i-delete\" rel=\"nofollow\"><code>delete</code></a>:</p>\n\n<pre><code>store.transaction { store.delete(key) }\n\n\nstore = PStore.new(\"data.pstore\")\n#=&gt; #&lt;PStore:0x007fd67f35a040 @abort=false, @filename=\"data.pstore\", @lock=#&lt;Thread::Mutex:0x007fd67f359f28&gt;, @thread_safe=false, @ultra_safe=false&gt;\nstore.transaction { store[:foo] = :bar }\n# =&gt; #&lt;PStore:0x007fd67f35a040 @abort=false, @filename=\"data.pstore\", @lock=#&lt;Thread::Mutex:0x007fd67f359f28&gt;, @rdonly=false, @table={:foo=&gt;:bar}, @thread_safe=false, @ultra_safe=false&gt;\nstore.transaction { store.delete(:foo) }\n#=&gt; :bar\nstore\n#=&gt; #&lt;PStore:0x007fd67f35a040 @abort=false, @filename=\"data.pstore\", @lock=#&lt;Thread::Mutex:0x007fd67f359f28&gt;, @thread_safe=false, @ultra_safe=false\n</code></pre>\n\n<p>If you want to truncate the <code>store</code> you can iterate over the <code>roots</code> and delete them in a transaction:</p>\n\n<pre><code>store.transaction do\n  store.roots.each do |root|\n    store.delete(root)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2195, "user_id": 1051849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/34e899fe8264a48cd991fccb24c06bf3?s=128&d=identicon&r=PG&f=1", "display_name": "user1051849", "link": "https://stackoverflow.com/users/1051849/user1051849"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 39754912, "answer_count": 1, "score": 4, "last_activity_date": 1548924959, "creation_date": 1475075639, "last_edit_date": 1548924959, "question_id": 39751449, "link": "https://stackoverflow.com/questions/39751449/clearing-or-deleting-a-ruby-pstore", "title": "Clearing or Deleting a Ruby PStore", "body": "<p>I've been experimenting with PStore to hold relatively large numbers of hash values using:</p>\n\n<pre><code> require \"pstore\"\n store = PStore.new(\"data.pstore\")\n</code></pre>\n\n<p>Seeing as this is stored in a file full of now-useless data, how do I clear or delete the \"store\" programatically? Obviously I could just delete the <code>store.pstore</code> file, but what i'm looking for is the PStore equivalent of:</p>\n\n<pre><code>DELETE FROM store WHERE 1=1;\n</code></pre>\n"}, {"tags": ["ruby", "testing", "tdd", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 7482819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d8b68c0f55ab69ac4cf4e09a45e197?s=128&d=identicon&r=PG", "display_name": "Sorebrez", "link": "https://stackoverflow.com/users/7482819/sorebrez"}, "is_accepted": false, "score": 3, "last_activity_date": 1476733967, "last_edit_date": 1476733967, "creation_date": 1476733585, "answer_id": 40094455, "question_id": 39751320, "link": "https://stackoverflow.com/questions/39751320/michael-hartls-rails-5-tutorial-chapter-10-listing-10-56-test-if-the-admin-at/40094455#40094455", "title": "Michael Hartl&#39;s Rails 5 tutorial chapter 10, listing 10.56, test if the admin attribute is forbidden", "body": "<p>This error is intended. As the exercise says you added <code>:admin</code> to permitted params before.</p>\n\n<p>Your test now will send the patch request and set <code>admin: true</code> for @other_user (which is possible here, since you added <code>:admin</code> to permitted params). After that you use <code>\"assert_not\"</code> which will raise the error, since the test expects that</p>\n\n<pre><code>@other_user.reload.admin? \n</code></pre>\n\n<p>will be false but in your case its true. Deleting <code>:admin</code> from permitted params in <code>app/controllers/users_controller.rb</code> will change your test to green.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2348368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f4aa1557399345fb834367e96385e6?s=128&d=identicon&r=PG", "display_name": "Alistair Norman", "link": "https://stackoverflow.com/users/2348368/alistair-norman"}, "is_accepted": false, "score": 1, "last_activity_date": 1530751379, "last_edit_date": 1530751379, "creation_date": 1530749310, "answer_id": 51181948, "question_id": 39751320, "link": "https://stackoverflow.com/questions/39751320/michael-hartls-rails-5-tutorial-chapter-10-listing-10-56-test-if-the-admin-at/51181948#51181948", "title": "Michael Hartl&#39;s Rails 5 tutorial chapter 10, listing 10.56, test if the admin attribute is forbidden", "body": "<p>The following should give you a non-erroring test that will fail when you allow admin to be altered as you have.</p>\n\n<pre><code>test \"should not allow the admin attribute to be edited via the web\" do\n      log_in_as(@other_user)\n      assert_not @other_user.admin?\n      patch user(@other_user), params: { \n                               user: { password: \"\",\n                                       password_confirmation: \"\",\n                                       admin: true }\n      assert_not @other_user.reload.admin?\n end\n</code></pre>\n"}], "owner": {"reputation": 429, "user_id": 6382445, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh3.googleusercontent.com/-hRx6Nx98ohw/AAAAAAAAAAI/AAAAAAAAAQg/nEgNYfxdGXg/photo.jpg?sz=128", "display_name": "o.O", "link": "https://stackoverflow.com/users/6382445/o-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1530751379, "creation_date": 1475075271, "last_edit_date": 1475075530, "question_id": 39751320, "link": "https://stackoverflow.com/questions/39751320/michael-hartls-rails-5-tutorial-chapter-10-listing-10-56-test-if-the-admin-at", "title": "Michael Hartl&#39;s Rails 5 tutorial chapter 10, listing 10.56, test if the admin attribute is forbidden", "body": "<p>I was trying to pass the exercise in <a href=\"https://www.railstutorial.org/book/updating_and_deleting_users//\" rel=\"nofollow\">listing 10.56</a>  and test if the admin attribute is forbidden.\nI added admin parameter in </p>\n\n<p><strong>app/controllers/users_controller.rb</strong></p>\n\n<pre><code>def user_params\n      params.require(:user).permit(:name, :email, :password,\n                                   :password_confirmation,\n                                   :admin)\nend\n</code></pre>\n\n<p>also, filled necessary parts in </p>\n\n<p><strong>test/controllers/users_controller_test.rb</strong></p>\n\n<pre><code>test \"should not allow the admin attribute to be edited via the web\" do\n      log_in_as(@other_user)\n      assert_not @other_user.admin?\n      patch :update, id: @other_user, user: { password: \"\",\n                                              password_confirmation: \"\",\n                                              admin: true }\n      assert_not @other_user.reload.admin?\n end\n</code></pre>\n\n<p>Still, I am getting unknown error after test:</p>\n\n<pre><code>ERROR[\"test_should_not_allow_the_admin_attribute_to_be_edited_via_the_web\", UsersControllerTest, 3.2600422599352896]\n test_should_not_allow_the_admin_attribute_to_be_edited_via_the_web#UsersControllerTest (3.26s)\nURI::InvalidURIError:         URI::InvalidURIError: bad URI(is not URI?): http://www.example.com:80update\n            test/controllers/users_controller_test.rb:37:in `block in &lt;class:UsersControllerTest&gt;'\n</code></pre>\n\n<p>Anyone here was dealing with the same problem?</p>\n"}, {"tags": ["arrays", "json", "ruby", "ruby-1.9.3"], "answers": [{"tags": [], "owner": {"reputation": 953, "user_id": 1993536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17a3a074b629368c391549294af55654?s=128&d=identicon&r=PG", "display_name": "izaban", "link": "https://stackoverflow.com/users/1993536/izaban"}, "is_accepted": true, "score": 0, "last_activity_date": 1498070010, "last_edit_date": 1498070010, "creation_date": 1475076161, "answer_id": 39751630, "question_id": 39751119, "link": "https://stackoverflow.com/questions/39751119/ruby-array-of-json-object-access-a-value/39751630#39751630", "title": "ruby array of json object access a value", "body": "<p>You can access you data using the following code:</p>\n\n<pre><code>data = JSON.parse(line) \ndata.each do |d|\n  puts \"#{d}\"\n  puts \"#{d} label: #{d[\"label\"]}\"\n  puts \"#{d} value: #{d[\"value\"]}\"\nend  \n</code></pre>\n\n<p>After parsing the line with <code>JSON.parse</code>, your <code>data</code> variable will contain an array of hashes. When you iterate over this array , the block variable <code>d</code> is assigned to one of these hashes.</p>\n\n<p>So, the first call to <code>puts</code> in this example will show the entire hash assigned to the variable <code>d</code>, and the second one will show the entire hash followed by the value assigned to the key <code>label</code> of that hash.</p>\n\n<p>Similarly, the third line shows how to access the value stored in the <code>value</code> key.</p>\n"}], "owner": {"reputation": 1705, "user_id": 1060070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/30fc2666127827c20a1bef8802c5e755?s=128&d=identicon&r=PG", "display_name": "mamesaye", "link": "https://stackoverflow.com/users/1060070/mamesaye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1347, "favorite_count": 0, "accepted_answer_id": 39751630, "answer_count": 1, "score": 0, "last_activity_date": 1498070010, "creation_date": 1475074716, "question_id": 39751119, "link": "https://stackoverflow.com/questions/39751119/ruby-array-of-json-object-access-a-value", "title": "ruby array of json object access a value", "body": "<p>I have an array of json object called line:    </p>\n\n<pre><code>[{\"label\":\"Name\",\"value\":\"Bob\",\"identifier\":\"field2\",\"type\":\"oneLineText\",\"page\":1,\"page_name\":\"Step 1\",\"width\":\"100%\"},{\"label\":\"Email\",\"value\":\"bob@compagny.com\",\"identifier\":\"field3\",\"type\":\"email\",\"page\":1,\"page_name\":\"Step 1\",\"width\":\"100%\"},{\"label\":\"Phone Number\",\"value\":\"\",\"identifier\":\"field7\",\"type\":\"oneLineText\",\"page\":1,\"page_name\":\"Step 1\",\"width\":\"100%\"},{\"label\":\"Comments\",\"value\":\"some information about the compagny\",\"identifier\":\"field5\",\"type\":\"textarea\",\"page\":1,\"page_name\":\"Step 1\",\"width\":\"100%\"}]\n</code></pre>\n\n<p>How do i access the value of label comment :<br>\n<code>\"label\":\"Comments\",\"value\":\"some information about the compagny\"</code>   </p>\n\n<p>Here is my code:  </p>\n\n<pre><code>data = JSON.parse(line) \ndata.each do |key, value|\n    puts \"#{key}\"\n    puts \"#{key} name: #{value[\"name\"]}\"\n    puts \"#{key} value: #{value[\"value\"]}\\n\"\n    label  = value[\"name\"]\n    value = value[\"value\"]\n    if (label eq \"label\") &amp;&amp; (value eq \"Comments\")\n         puts \"#{key} value: #{value[\"value\"]}\\n\"\n    end\nend     \n</code></pre>\n\n<p>I got an error after first object id parsed:      </p>\n\n<pre><code>{\"label\"=&gt;\"Name\", \"value\"=&gt;\"Bob\", \"identifier\"=&gt;\"field2\", \"type\"=&gt;\"oneLineText\", \"page\"=&gt;1, \"page_name\"=&gt;\"Step 1\", \"width\"=&gt;\"100%\"}\nundefined method `[]' for nil:NilClass (NoMethodError)` \n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "rake", "foreman"], "answers": [{"tags": [], "owner": {"reputation": 970, "user_id": 2453205, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/29545f469803d1dcad06bdbe3cbc9bf5?s=128&d=identicon&r=PG", "display_name": "Kenshin", "link": "https://stackoverflow.com/users/2453205/kenshin"}, "is_accepted": true, "score": 1, "last_activity_date": 1475094131, "creation_date": 1475094131, "answer_id": 39756965, "question_id": 39751020, "link": "https://stackoverflow.com/questions/39751020/not-able-to-reset-foreman-admin-password-using-foreman-rake/39756965#39756965", "title": "Not able to reset foreman admin password using foreman-rake", "body": "<p>I am posting answer for my own question</p>\n\n<p>Its not permission.... \nIts <strong>permissions</strong></p>\n\n<p>when we get errors like this, just type <code>--tasks</code> at the end of the command and  see rake list, make sure the one you are trying exists in that list..,</p>\n\n<p>correct command:</p>\n\n<pre><code>sudo foreman-rake permissions:reset PASSWORD=secret\n</code></pre>\n\n<p>On running the above command, its likely that you might get another error</p>\n\n<pre><code>ERF42-7495\n\"Cannot find user foreman_admin when switching context\" or \"Cannot find user foreman_api_admin when switching context\"\n</code></pre>\n\n<p>To fix this, just type the below command</p>\n\n<pre><code>foreman-rake db:seed\n</code></pre>\n"}], "owner": {"reputation": 970, "user_id": 2453205, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/29545f469803d1dcad06bdbe3cbc9bf5?s=128&d=identicon&r=PG", "display_name": "Kenshin", "link": "https://stackoverflow.com/users/2453205/kenshin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 841, "favorite_count": 1, "accepted_answer_id": 39756965, "answer_count": 1, "score": 0, "last_activity_date": 1475094131, "creation_date": 1475074447, "question_id": 39751020, "link": "https://stackoverflow.com/questions/39751020/not-able-to-reset-foreman-admin-password-using-foreman-rake", "title": "Not able to reset foreman admin password using foreman-rake", "body": "<p>I am trying to migrate database to mysql from sqlite. Database migrated successfully using foreman-mysql2. After restarting foreman, I wasn't allowed to login with admin/changeme. </p>\n\n<p>I then tried to reset password using the below command</p>\n\n<pre><code>foreman-rake permission-reset password=secret\n</code></pre>\n\n<p>But I am getting the below error</p>\n\n<p>rake aborted!</p>\n\n<p>Don't know how to build task 'permission:reset' (see --tasks)\n/usr/share/foreman/vendor/ruby/1.9.1/gems/rake-10.5.0/lib/rake/task_manager.rb:62:in <code>[]'\n/usr/share/foreman/vendor/ruby/1.9.1/gems/rake-10.5.0/lib/rake/application.rb:149:in</code>invoke_task'\n/usr/share/foreman/vendor/ruby/1.9.1/gems/rake-10.5.0/lib/rake/application.rb:106:in <code>block (2 levels) in top_level'\n/usr/share/foreman/vendor/ruby/1.9.1/gems/rake-10.5.0/lib/rake/application.rb:106:in</code>each'\n/usr/share/foreman/vendor/ruby/1.9.1/gems/rake-10.5.0/lib/rake/application.rb:106:in <code>block in top_level'\n/usr/share/foreman/vendor/ruby/1.9.1/gems/rake-10.5.0/lib/rake/application.rb:115:in</code>run_with_threads'\n/usr/share/foreman/vendor/ruby/1.9.1/gems/rake-10.5.0/lib/rake/application.rb:100:in <code>top_level'\n/usr/share/foreman/vendor/ruby/1.9.1/gems/rake-10.5.0/lib/rake/application.rb:78:in</code>block in run'\n/usr/share/foreman/vendor/ruby/1.9.1/gems/rake-10.5.0/lib/rake/application.rb:176:in <code>standard_exception_handling'\n/usr/share/foreman/vendor/ruby/1.9.1/gems/rake-10.5.0/lib/rake/application.rb:75:in</code>run'\n/usr/bin/rake1.9.1:32:in `'</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authorize.net"], "owner": {"reputation": 347, "user_id": 2666049, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0c9f68f875bf135b7fcca0c33b16c4c0?s=128&d=identicon&r=PG", "display_name": "palash-kulkarni", "link": "https://stackoverflow.com/users/2666049/palash-kulkarni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1475121283, "creation_date": 1475073404, "last_edit_date": 1475121283, "question_id": 39750603, "link": "https://stackoverflow.com/questions/39750603/getting-an-error-while-creating-customer-profile-in-authorize-net", "title": "Getting an error while creating customer profile in authorize.net", "body": "<p>I am creating the Customer Profile in which i want to store shipping address of customer.\nFor this the code is -</p>\n\n<pre><code>  customer_profile_request = CreateCustomerProfileRequest.new\n  customer_profile_request.profile = CustomerProfileType.new(Digest::MD5.hexdigest(user.email)[0,10], user.full_name, user.email,nil,nil)\n  full_address = user.customer_addresses.primary_address.try(:truncate_full_address) || 'Address'\n  customer_profile_request.profile.shipToList = CustomerAddressType.new(user.first_name, \n    user.last_name, nil, full_address, \n    user.customer_addresses.primary_address.city, \n    user.customer_addresses.primary_address.state, user.customer_detail.zipcode, nil, nil, nil)\n  customer_profile_response = initialize_transaction.create_customer_profile(customer_profile_request)\n</code></pre>\n\n<p>And i am getting an error -</p>\n\n<p>\"The element 'shipToList' in namespace 'AnetApi/xml/v1/schema/AnetApiSchema.xsd' cannot contain text. List of possible elements expected: 'firstName, lastName, company, address, city, state, zip, country, phoneNumber, faxNumber, email' in namespace 'AnetApi/xml/v1/schema/AnetApiSchema.xsd'.\"</p>\n\n<p>Am i missing something?</p>\n"}, {"tags": ["ruby", "rkt"], "answers": [{"comments": [{"owner": {"reputation": 1066, "user_id": 3215470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rclPe.jpg?s=128&g=1", "display_name": "Andy Jones", "link": "https://stackoverflow.com/users/3215470/andy-jones"}, "edited": false, "score": 0, "creation_date": 1476886304, "post_id": 40121225, "comment_id": 67537529, "body": "I was hoping for a workaround for 230, I suppose. But from the dearth of comments here I&#39;m guessing there isn&#39;t one.  So your answer is clearly the correct one."}], "tags": [], "owner": {"reputation": 26, "user_id": 7039751, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/69c3e5c5b99b3e3b8b0d473ee36b8ebf?s=128&d=identicon&r=PG", "display_name": "user7039751", "link": "https://stackoverflow.com/users/7039751/user7039751"}, "is_accepted": true, "score": 0, "last_activity_date": 1476845091, "creation_date": 1476845091, "answer_id": 40121225, "question_id": 39750554, "link": "https://stackoverflow.com/questions/39750554/how-do-i-get-around-rkts-systemd-nspawn-symlink-issue/40121225#40121225", "title": "How do I get around Rkt&#39;s systemd-nspawn symlink issue?", "body": "<p>upgrade to systemd version greater than 230. </p>\n"}], "owner": {"reputation": 1066, "user_id": 3215470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rclPe.jpg?s=128&g=1", "display_name": "Andy Jones", "link": "https://stackoverflow.com/users/3215470/andy-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 40121225, "answer_count": 1, "score": 0, "last_activity_date": 1476845091, "creation_date": 1475073264, "last_edit_date": 1475135695, "question_id": 39750554, "link": "https://stackoverflow.com/questions/39750554/how-do-i-get-around-rkts-systemd-nspawn-symlink-issue", "title": "How do I get around Rkt&#39;s systemd-nspawn symlink issue?", "body": "<p>I'm trying to make a simple Ruby app in a Rkt container, but my build script keeps giving me variations on:</p>\n\n<pre><code>Warning: \"/bin/sh\" is a symlink, which systemd-nspawn version 219 might error on\nDirectory /too/long/for/so/.acbuild/target lacks the binary to execute or doesn't \n    look like a binary tree. Refusing.\nrun: non-zero exit code: 1\nEnding the build\n</code></pre>\n\n<p><strong>Can anyone tell me the usual way to work around this?</strong></p>\n\n<p>Here is my build script:</p>\n\n<pre><code>#!/usr/bin/env bash\nset -e\n\nacbuildend () {\n    export EXIT=$?;\n    acbuild --debug end &amp;&amp; exit $EXIT;\n}\nacbuild --debug begin\ntrap acbuildend EXIT\n\nrm -f sputnik2.aci\n\nacbuild set-name jhallpr.com/sputnik\n\nacbuild dependency add quay.io/coreos/alpine-sh\nacbuild run -- apk update\nacbuild run -- apk add ruby ruby-io-console\n\nacbuild copy-to-dir ./sputnik2 /usr/src/app/sputnik2\nacbuild set-working-directory /usr/src/app/sputnik2\n\nacbuild run -- gem install bundler --no-doc --no-ri\nacbuild run -- /bin/sh -c \"bundle install\"     # &lt;-- *falls over here*\n\nacbuild set-exec -- /usr/bin/ruby sputnik2.rb\nacbuild write sputnik2.aci\n</code></pre>\n\n<p>Note that I'm shelling out here (<code>acbuild run -- /bin/sh -c...</code>) because bundler complains when it is run as root.  But the symlink thing seems to be a very common problem.  For example, if I install bundler via <code>acbuild run -- apk add</code>, the script complains that <code>bundle</code> is a symlink...</p>\n"}, {"tags": ["ruby", "uri", "userinfo"], "comments": [{"owner": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "edited": false, "score": 1, "creation_date": 1475074113, "post_id": 39750056, "comment_id": 66797882, "body": "Can you not just escape forward slash in <code>client&#47;secretjiberish</code> with <code>%2F</code>?."}, {"owner": {"reputation": 696, "user_id": 1565015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vuTRE.jpg?s=128&g=1", "display_name": "Marko \u0106ilimkovi\u0107", "link": "https://stackoverflow.com/users/1565015/marko-%c4%86ilimkovi%c4%87"}, "reply_to_user": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "edited": false, "score": 0, "creation_date": 1475078587, "post_id": 39750056, "comment_id": 66800996, "body": "@Rashmirathi How can I access it? If I do something like:  escaped_url = URI.escape(url, &#39;/&#39;) and then URI(url) I can&#39;t use any of the URI methods since they all return nil."}, {"owner": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "edited": false, "score": 0, "creation_date": 1475089830, "post_id": 39750056, "comment_id": 66807580, "body": "I mean only escape it in the part <code>clientjiberish:client&#47;secretjiberish </code>, so url becomes <code>https:&#47;&#47;clientjiberish:client%2Fsecretjiberish@api.example.c&zwnj;&#8203;om&#47;users?username=tr&zwnj;&#8203;alala</code>."}, {"owner": {"reputation": 696, "user_id": 1565015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vuTRE.jpg?s=128&g=1", "display_name": "Marko \u0106ilimkovi\u0107", "link": "https://stackoverflow.com/users/1565015/marko-%c4%86ilimkovi%c4%87"}, "reply_to_user": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "edited": false, "score": 0, "creation_date": 1475136513, "post_id": 39750056, "comment_id": 66824278, "body": "I receive a string <code>&#39;https:&#47;&#47;clientjiberish:clientsecretjiberish@api.example.com&zwnj;&#8203;&#47;users?username=tral&zwnj;&#8203;ala&#39;</code>. How do I just escape that part of the string?"}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 830729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc50393ddd41509bfb8a8f2ebe0d6a5e?s=128&d=identicon&r=PG", "display_name": "Kapitol", "link": "https://stackoverflow.com/users/830729/kapitol"}, "is_accepted": false, "score": 0, "last_activity_date": 1485964080, "creation_date": 1485964080, "answer_id": 41983966, "question_id": 39750056, "link": "https://stackoverflow.com/questions/39750056/how-to-parse-url-with-forward-slash-in-userinfo-part/41983966#41983966", "title": "How to parse URL with forward slash in userinfo part", "body": "<pre><code>url = 'https://clientjiberish:client/secretjiberish@api.example.com/users?username=tralala'\nUSER_INFO_REGEX = /\\Ahttp[s]+:\\/\\/(.*)@.*\\z/i\nuser_info = USER_INFO_REGEX.match(url)[1]\nparsed_user_info = user_info.gsub(/\\//, '%2F')\nurl = url.gsub(Regexp.new(user_info), parsed_user_info)\nuri = URI(url)\n</code></pre>\n\n<p><code>USER_INFO_REGEX</code> matches the string between <code>https://</code> and <code>@api.example.com...</code>. Just escape the user info string and replace it in the url.</p>\n"}], "owner": {"reputation": 696, "user_id": 1565015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vuTRE.jpg?s=128&g=1", "display_name": "Marko \u0106ilimkovi\u0107", "link": "https://stackoverflow.com/users/1565015/marko-%c4%86ilimkovi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1075, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1485964080, "creation_date": 1475071997, "question_id": 39750056, "link": "https://stackoverflow.com/questions/39750056/how-to-parse-url-with-forward-slash-in-userinfo-part", "title": "How to parse URL with forward slash in userinfo part", "body": "<p>I have a URL of this format:</p>\n\n<pre><code>https://clientjiberish:clientsecretjiberish@api.example.com/users?username=tralala\n</code></pre>\n\n<p>when I do:</p>\n\n<pre><code>url = 'https://clientjiberish:clientsecretjiberish@api.example.com/users?username=tralala'\nuri = URI(url)\n</code></pre>\n\n<p>I get all that I need.</p>\n\n<pre><code>uri.host =&gt; \"api.example.com\"\nuri.userinfo =&gt; \"clientjiberish:clientsecretjiberish\"\nuri.path =&gt; '/users'\nuri.scheme =&gt; 'https'\n</code></pre>\n\n<p>The problem rises when the userinfo part has a forward slash in it. I have no power to change the API that serves the API keys, so I need to figure out a way to extract the mentioned parts of the URI.</p>\n\n<p>Here's an example on what you can test the URI:</p>\n\n<pre><code>url = 'https://clientjiberish:client/secretjiberish@api.example.com/users?username=tralala'\nuri = URI(url)\n</code></pre>\n\n<p>The error:</p>\n\n<blockquote>\n  <p>URI::InvalidURIError: bad URI(is not URI?)</p>\n</blockquote>\n\n<p>I found out that you can create your own parser like this:</p>\n\n<pre><code>parser = URI::Parser.new(:RESERVED =&gt; \";/?:@&amp;=+$,\\\\[\\\\]\")\nuri = parser.parse(url)\n</code></pre>\n\n<p>but I don't know enough about regex to make it work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2041, "user_id": 2071800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1f877eccccc9e714b4d4fe03917f2a7?s=128&d=identicon&r=PG", "display_name": "Joe Half Face", "link": "https://stackoverflow.com/users/2071800/joe-half-face"}, "edited": false, "score": 0, "creation_date": 1475072744, "post_id": 39750321, "comment_id": 66796852, "body": "I though that the point of rescue_from is that I don&#39;t need to include rescue in each method. I have 20 of them"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 2041, "user_id": 2071800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1f877eccccc9e714b4d4fe03917f2a7?s=128&d=identicon&r=PG", "display_name": "Joe Half Face", "link": "https://stackoverflow.com/users/2071800/joe-half-face"}, "edited": false, "score": 0, "creation_date": 1475073067, "post_id": 39750321, "comment_id": 66797076, "body": "you can put a rescuing logic into one method which takes a block and than in every other method pass the whole logic as a parameter to this method. But this looks dirty and pointless. See <a href=\"http://stackoverflow.com/questions/16567243/rescue-all-errors-of-a-specific-type-inside-a-module\">this thread</a> for implementation details"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1475074459, "post_id": 39750321, "comment_id": 66798155, "body": "congratulations you &quot;catched&quot; it :)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1475073734, "last_edit_date": 1475073734, "creation_date": 1475072613, "answer_id": 39750321, "question_id": 39749668, "link": "https://stackoverflow.com/questions/39749668/why-including-rescuable-module-doesnt-work/39750321#39750321", "title": "Why including Rescuable module doesn&#39;t work?", "body": "<p>Here is how it should be used:</p>\n\n<pre><code>class MyKlass\n  include ActiveSupport::Rescuable\n  # define a method, which will do something for you, when exception is caught\n  rescue_from Exception, with: :my_rescue\n\n  def some_method(&amp;block)\n    yield\n  rescue Exception =&gt; exception\n    rescue_with_handler(exception) || raise\n  end\n\n  # do whatever you want with exception, for example, write it to logs\n  def my_rescue(exception)\n    puts \"Exception catched! #{exception.class}: #{exception.message}\"\n  end\nend\n\nMyKlass.new.some_method { 0 / 0 }\n# Exception catched! ZeroDivisionError: divided by 0\n#=&gt; true\n</code></pre>\n\n<p>It goes without saying, that rescuing <code>Exception</code> is a crime.</p>\n"}], "owner": {"reputation": 2041, "user_id": 2071800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1f877eccccc9e714b4d4fe03917f2a7?s=128&d=identicon&r=PG", "display_name": "Joe Half Face", "link": "https://stackoverflow.com/users/2071800/joe-half-face"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "accepted_answer_id": 39750321, "answer_count": 1, "score": 2, "last_activity_date": 1475073734, "creation_date": 1475070986, "question_id": 39749668, "link": "https://stackoverflow.com/questions/39749668/why-including-rescuable-module-doesnt-work", "title": "Why including Rescuable module doesn&#39;t work?", "body": "<pre><code>class MyKlass\n\n  include ActiveSupport::Rescuable\n\n  rescue_from Exception do\n    return \"rescued\"\n  end\n\n  #other stuff\nend\n</code></pre>\n\n<p>MyKlass is pure ruby object, but defined inside Rails application.</p>\n\n<p>If I try to invoke MyKlass instance in rails console and then apply to it method which certainly should raise Exception, nothing happens other than error expected to be rescued. </p>\n"}, {"tags": ["ruby", "image", "image-processing", "cmd"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6893801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9e7301086bd717bce26c42085086261?s=128&d=identicon&r=PG&f=1", "display_name": "Theotrix", "link": "https://stackoverflow.com/users/6893801/theotrix"}, "edited": false, "score": 0, "creation_date": 1475072558, "post_id": 39749756, "comment_id": 66796701, "body": "Thank you for the fast response, do you have any suggestions on how to implement this in Ruby?"}, {"owner": {"reputation": 725, "user_id": 3244341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nHmU2.jpg?s=128&g=1", "display_name": "cagatayodabasi", "link": "https://stackoverflow.com/users/3244341/cagatayodabasi"}, "reply_to_user": {"reputation": 13, "user_id": 6893801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9e7301086bd717bce26c42085086261?s=128&d=identicon&r=PG&f=1", "display_name": "Theotrix", "link": "https://stackoverflow.com/users/6893801/theotrix"}, "edited": false, "score": 0, "creation_date": 1475151872, "post_id": 39749756, "comment_id": 66834841, "body": "I really don&#39;t know anything about Ruby sorry about that, but just read the image and split the RGB channels of both image. Then, compare R1-R2, G1-G2, B1-B2. This will give you the difference."}], "tags": [], "owner": {"reputation": 725, "user_id": 3244341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nHmU2.jpg?s=128&g=1", "display_name": "cagatayodabasi", "link": "https://stackoverflow.com/users/3244341/cagatayodabasi"}, "is_accepted": true, "score": 0, "last_activity_date": 1475071196, "creation_date": 1475071196, "answer_id": 39749756, "question_id": 39749202, "link": "https://stackoverflow.com/questions/39749202/comparing-the-same-images-with-different-format-jpg-bmp-png-etc/39749756#39749756", "title": "Comparing the same images with different format(.jpg, .bmp, .png, etc)", "body": "<p>ImageMagick can handle this by compare command. </p>\n\n<p>Usage: </p>\n\n<pre><code>compare im1.png im2.bmp result.jpg\n</code></pre>\n\n<p>It marks the changed areas with red. After that you can easily check if it's changed or not. </p>\n\n<p>Example: (Note that input images are from slightly different angles, so they are not the same.)</p>\n\n<pre><code>compare orig0.bmp orig1.jpg compare.jpg\n</code></pre>\n\n<p>orig0.bmp\n<a href=\"https://i.stack.imgur.com/DC541.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DC541.png\" alt=\"enter image description here\"></a></p>\n\n<p>orig1.jpg\n<a href=\"https://i.stack.imgur.com/A0Qqt.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A0Qqt.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>compare.jpg\n<a href=\"https://i.stack.imgur.com/1BNqG.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1BNqG.jpg\" alt=\"enter image description here\"></a> </p>\n"}], "owner": {"reputation": 13, "user_id": 6893801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9e7301086bd717bce26c42085086261?s=128&d=identicon&r=PG&f=1", "display_name": "Theotrix", "link": "https://stackoverflow.com/users/6893801/theotrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 39749756, "answer_count": 1, "score": 1, "last_activity_date": 1475072307, "creation_date": 1475069877, "last_edit_date": 1475072307, "question_id": 39749202, "link": "https://stackoverflow.com/questions/39749202/comparing-the-same-images-with-different-format-jpg-bmp-png-etc", "title": "Comparing the same images with different format(.jpg, .bmp, .png, etc)", "body": "<p>I need to check if 2 images have been modified. I have the original image which I input it through 2 different tools, finally resulting the 2nd image. \nThe tools only alter the format of the image; the inputted image can be of any type (.jpg, .bmp, etc), and the first tool converts the image to .bmp and the second tool converts it to .png.\nHow can I check if the images display the same thing, with a certain threshold of course. (via cmd if possible, after that I'll write a script in Ruby)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1475069021, "post_id": 39748710, "comment_id": 66793753, "body": "thanks! but I have following error now <code>Missing template api&#47;v1&#47;users&#47;testaaa with {:locale=&gt;[:en], :formats=&gt;[:json], :variants=&gt;[], :handlers=&gt;[:erb, :builder, :raw, :ruby, :coffee, :jbuilder]}. Searched in:</code>"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1475069203, "post_id": 39748710, "comment_id": 66793884, "body": "@Toshi google it and you&#39;ll for sure be good ;) for now the issue you asked about is solved. If you won&#39;t be able to resolve it, ask a new question :)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1475069340, "post_id": 39748710, "comment_id": 66793999, "body": "@Toshi try <code>render json: { test: &#39;test&#39; }, status: :ok</code> ;)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1475069861, "post_id": 39748710, "comment_id": 66794460, "body": "@Toshi did you see the edited answer? It should not now throw the error it did before"}, {"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1475071096, "post_id": 39748710, "comment_id": 66795509, "body": "I looked up and installed &#39;responders&#39; gem but it doesn&#39;t work...maybe another issue. Usually respond_to &#39;json&#39; would be the defacto when developing api. <code>respond_to json</code> means &#39;returns json format&#39; if anything else is specified right?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1475071442, "post_id": 39748710, "comment_id": 66795839, "body": "@Toshi <code>means &#39;returns json format&#39; if anything else is specified right</code> yep :)"}, {"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1475077708, "post_id": 39748710, "comment_id": 66800426, "body": "Thanks you so much, and I got it now :))"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1475069374, "last_edit_date": 1475069374, "creation_date": 1475068643, "answer_id": 39748710, "question_id": 39748661, "link": "https://stackoverflow.com/questions/39748661/unable-to-autoload-constant-apiv1userscontroller/39748710#39748710", "title": "Unable to autoload constant Api::V1::UsersController", "body": "<p>The problem is as stated:</p>\n\n<p><code>controllers/api/v1/users_controller.rb</code> defines <code>UsersController</code> class, not <code>Api::V1::UsersController</code>.</p>\n\n<p>The solution looks as follows:</p>\n\n<pre><code>#controllers/api/v1/users_controller.rb\nmodule Api\n  module V1\n    class UsersController &lt; ActionController::Base\n      def index\n        render json: { test: 'test' }, status: :ok\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1840, "favorite_count": 0, "accepted_answer_id": 39748710, "answer_count": 1, "score": 2, "last_activity_date": 1475069482, "creation_date": 1475068546, "last_edit_date": 1475069482, "question_id": 39748661, "link": "https://stackoverflow.com/questions/39748661/unable-to-autoload-constant-apiv1userscontroller", "title": "Unable to autoload constant Api::V1::UsersController", "body": "<p>I've been developing API, but when I access the endpoint <code>Unable to autoload constant Api::V1::UsersController, expected /Users/toshikiinami/Desktop/billing/app/controllers/api/v1/users_controller.rb to define it</code> comes out.</p>\n\n<ul>\n<li>I use rails 4.2.3</li>\n</ul>\n\n<p>Any ideas to configure the subdomain endpoint properly?</p>\n\n<p><code>config/routes.rb</code></p>\n\n<pre><code>Rails.application.routes.draw do    \n  namespace :api, defaults: { format: :json }, constraints: { subdomain: 'api' }, path: '/'  do\n    scope module: :v1 do\n      resources :users, only: [:index]\n    end\n  end\nend\n</code></pre>\n\n<p><code>controllers/api/v1/users_controller.rb</code></p>\n\n<pre><code>class UsersController &lt; ActionController::Base\n  def index\n    render 'test' =&gt; 'json'\n  end\nend\n</code></pre>\n\n<p><code>/etc/hosts</code></p>\n\n<pre><code>##\n# Host Database\n#\n# localhost is used to configure the loopback interface\n# when the system is booting.  Do not change this entry.\n##\n127.0.0.1 localhost\n127.0.0.1 api.localhost.local\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1475068484, "post_id": 39748275, "comment_id": 66793326, "body": "you can create an attr_accessor for url e.g <code>attr_accessor :url</code> this will give you <code>url</code> and <code>url=(val)</code> methods in the class for gettting and setting the instance variable <code>@url</code>. The other items like body, document, etc. are just local variables to <code>get_page_listings</code> method and will not be accessible from a class or instance perspective."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1475068621, "post_id": 39748275, "comment_id": 66793432, "body": "Are you <b>sure</b> that&#39;s what your code looks like? Or did you place the <code>binding.pry</code> <i>below</i> the <code>end</code>, instead of above it?"}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1475068780, "post_id": 39748275, "comment_id": 66793543, "body": "@engineersmnky intuitively what you says makes sense. I wasn&#39;t trying to access <code>body</code> and <code>document</code> outside of the <code>get_page_listings</code> method. So they should be accessible. I am pretty sure that it should be accessible where the <code>binding.pry</code> is. Also, I tried adding <code>attr_accessor :url</code> right above my <code>initialize</code> method and I still can&#39;t access <code>url</code> from my pry command line....aka...that still doesn&#39;t work."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475068814, "post_id": 39748275, "comment_id": 66793574, "body": "@agree that most likely <code>binding.pry</code> is put before the last <code>end</code>"}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1475068845, "post_id": 39748275, "comment_id": 66793599, "body": "@TomLord I am 100% sure. The pry binding is in the right place, i.e. within the <code>get_page_listings</code> method...which is why I am so confused. Although, to be fair....I am sure the main issue is that <code>@url</code> is nil, within <code>get_page_listings</code>. Once that&#39;s true, then everything else won&#39;t work. So I am trying to figure out why that is nil."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1475068945, "post_id": 39748275, "comment_id": 66793683, "body": "but this <code>NameError: undefined local variable or method &#39;url&#39; for YPCrawler::PageCrawler:Class</code> does not look like binding is in the right place.."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1475069182, "post_id": 39748275, "comment_id": 66793872, "body": "<code>NameError: undefined local variable or method &#39;document&#39; for YPCrawler::PageCrawler:Class</code> also looks like the <code>binding.pry</code> is in the wrong place. Not only is the variable undefined (?!), but the stack trace is odd. Perhaps you have a <b>second</b> <code>binding.pry</code> in that file, which the actually the one being picked up???"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1475069276, "post_id": 39748275, "comment_id": 66793944, "body": "(Because in answer to your original question, the code <i>should</i> work perfectly fine. <code>@url</code> is defined in the initializer, and can be accessed in the method.)"}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475069311, "post_id": 39748275, "comment_id": 66793964, "body": "Guys, I updated the question with screenshots of both my code and the Terminal. Refresh."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1475069377, "post_id": 39748275, "comment_id": 66794027, "body": "@marcamillion i see you screenshots and the first one looks right but the second one is wrong and you can tell by the fact that the bindings are in different places. They might be on the same &quot;line&quot; but it is clear in the second screenshot that the binding is on the class and not inside the method just by looking at the end tags"}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1475069435, "post_id": 39748275, "comment_id": 66794082, "body": "@engineersmnky I agree. Not sure why the binding is appearing there. That&#39;s very bizarre."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1475069499, "post_id": 39748275, "comment_id": 66794131, "body": "did you load this in pry and then make changes without reloading pry?"}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475069610, "post_id": 39748275, "comment_id": 66794225, "body": "No, so the structure is I have a <code>lib&#47;yp-crawler.rb</code>, that requires the <code>page-crawler.rb</code>. The <code>binding.pry</code> is within the <code>page-crawler.rb</code> file, but to run this program I simply do <code>ruby lib&#47;yp-crawler.rb</code> at the command line and it auto halts execution at the <code>binding.pry</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1475069643, "post_id": 39748275, "comment_id": 66794251, "body": "@marcamillion Look at your second screenshot: The <code>binding.pry</code> <b>was</b> in the wrong place. You need to reload <code>pry</code> when making changes to the code."}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475069705, "post_id": 39748275, "comment_id": 66794306, "body": "How do I &#39;reload pry&#39;? I am not loading it in the first place. I simply just hit <code>exit</code> when I am in pry, and then retype <code>ruby lib&#47;yp-crawler.rb</code>. How do I manually reload pry if not by doing that?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1475069735, "post_id": 39748275, "comment_id": 66794329, "body": "Save the file. Hit exit. Re-run it. It will now work."}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475070241, "post_id": 39748275, "comment_id": 66794794, "body": "I updated the question with a link to a video of my entire workflow. Please tell me what I am missing."}], "answers": [{"comments": [{"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475069658, "post_id": 39749084, "comment_id": 66794261, "body": "Refresh the question to see a screenshot of my code. Also see my last comment on the question to see how I execute the code. It&#39;s not the wrong version."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475069807, "post_id": 39749084, "comment_id": 66794406, "body": "@marcamillion may it be you just run the wrong file? Because there is no magic in programming."}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475070143, "post_id": 39749084, "comment_id": 66794696, "body": "Refresh the question again. I put more details about my code structure and layout."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1475070219, "post_id": 39749084, "comment_id": 66794776, "body": "I&#39;m 99.9% sure you are either not saving the file, or running the wrong file, or not restarting the <code>pry</code> session."}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475070280, "post_id": 39749084, "comment_id": 66794824, "body": "LOL...this is gonna be HILARIOUS when someone else discovers it wasn&#39;t that :D. I added a video of my workflow. Refresh the question and tell me what I am missing please."}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475070320, "post_id": 39749084, "comment_id": 66794855, "body": "Btw, you guys could be right. I just can&#39;t see it or see how I should be doing something different. Is it the way I am requiring &#39;pry&#39;?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475070529, "post_id": 39749084, "comment_id": 66795042, "body": "@marcamillion can you run <code>self.class</code> while you&#39;re in console? if that returns <code>Class</code> (and it would) - it is what&#39;s in my answer :) And thus I won&#39;t help you - you&#39;ll just have to see step by step where you have duplicated file or whatsoever..."}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475070792, "post_id": 39749084, "comment_id": 66795260, "body": "It does return <code>Class</code>, but your comment is unhelpful to helping me figure it out. I am not running this within a &#39;console&#39;. I am running it within a fully self-contained ruby instance, which I do exit and restart on each time. It is very possible that I am not loading pry properly, but obviously I don&#39;t know how to fix that which is why I am asking here."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475070845, "post_id": 39749084, "comment_id": 66795306, "body": "@marcamillion but hitting <code>binding.pry</code> puts you into console, that what i meant. Can you scan your whole project on <code>binding.pry</code> occurrences? Might be helpful"}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475071264, "post_id": 39749084, "comment_id": 66795663, "body": "Oooohh....you are correct. It seems that my path in my main file was incorrect, and there was a duplicate file. Thanks!"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475071398, "post_id": 39749084, "comment_id": 66795797, "body": "@marcamillion glad you&#39;ve found it (you did, right?)"}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475071484, "post_id": 39749084, "comment_id": 66795873, "body": "I did find it. The issue I am now having is that now my <code>get_page_listings</code> method doesn&#39;t seem to get triggered. Should I be able to just call <code>get_page_listings</code> outside of that method, within the class, and it should call it and trigger my <code>binding.pry</code>?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 1, "creation_date": 1475071624, "post_id": 39749084, "comment_id": 66795968, "body": "@marcamillion you should add <code>PageCrawler.new.get_page_listings</code> to the end of your file to call the method"}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475071627, "post_id": 39749084, "comment_id": 66795971, "body": "Aka...I am now doing this: <code>get_page_listings</code> and am getting <code>undefined method </code>get_page_listings&#39; `."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475071665, "post_id": 39749084, "comment_id": 66795997, "body": "@marcamillion yea, you can not do this inside the class, because the reciever is class itself, and it is an instance method"}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475071713, "post_id": 39749084, "comment_id": 66796033, "body": "Ahh perfect. Your suggestion re: <code>PageCrawler.new.get_page_listings</code> works. So I guess I should call this method from within another file, eh?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475071759, "post_id": 39749084, "comment_id": 66796063, "body": "@marcamillion you can call it from within anywhere as long as this anywhere is aware of <code>PageCrawler</code> class :)"}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 1, "creation_date": 1475071856, "post_id": 39749084, "comment_id": 66796130, "body": "Ahh ok. That makes sense. Thanks much!"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1475069755, "last_edit_date": 1475069755, "creation_date": 1475069585, "answer_id": 39749084, "question_id": 39748275, "link": "https://stackoverflow.com/questions/39748275/how-do-i-use-instance-variables-initialized-in-my-initialize-method-in-other-met/39749084#39749084", "title": "How do I use instance variables initialized in my initialize method in other methods?", "body": "<p>I bet your code looks as follows:</p>\n\n<pre><code>module YPCrawler\n  class PageCrawler\n    attr_reader :url\n    def initialize(url)\n      @url = 'http://www.someurl.com'\n    end\n\n    def get_page_listings\n      body = Net::HTTP.get(URI.parse(@url))\n      document = Oga.parse_html(body)    \n      bizlistings = document.css('div.result')\n    end\n    binding.pry    \n  end\nend\n</code></pre>\n\n<p>Even though <em>you might have</em> moved the <code>binding.pry</code> into method, most likely you did not reload the console, so it executes the \"wrong\" version.</p>\n\n<p>From your screenshots it is clear that either file is not reloaded or you just made changes to wrong file.</p>\n"}], "owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 39749084, "answer_count": 1, "score": 0, "last_activity_date": 1475070120, "creation_date": 1475067503, "last_edit_date": 1475070120, "question_id": 39748275, "link": "https://stackoverflow.com/questions/39748275/how-do-i-use-instance-variables-initialized-in-my-initialize-method-in-other-met", "title": "How do I use instance variables initialized in my initialize method in other methods?", "body": "<p>This is what my class looks like:</p>\n\n<pre><code>require 'oga'\nrequire 'net/http'\nrequire 'pry'\n\nmodule YPCrawler\n  class PageCrawler\n    def initialize(url)\n      @url = 'http://www.someurl.com'\n    end\n\n    def get_page_listings\n      body = Net::HTTP.get(URI.parse(@url))\n      document = Oga.parse_html(body)    \n      bizlistings = document.css('div.result')\n      binding.pry    \n    end\n\n  end\nend\n</code></pre>\n\n<p>Yet when I get thrown into <code>pry</code>, I see this:</p>\n\n<pre><code>[1] pry(YPCrawler::PageCrawler)&gt; @url\n=&gt; nil\n[2] pry(YPCrawler::PageCrawler)&gt; body\nNameError: undefined local variable or method `body' for YPCrawler::PageCrawler:Class\nfrom (pry):2:in `&lt;class:PageCrawler&gt;'\n[3] pry(YPCrawler::PageCrawler)&gt; document\nNameError: undefined local variable or method `document' for YPCrawler::PageCrawler:Class\nfrom (pry):3:in `&lt;class:PageCrawler&gt;'\n[4] pry(YPCrawler::PageCrawler)&gt; bizlistings\nNameError: undefined local variable or method `bizlistings' for YPCrawler::PageCrawler:Class\nfrom (pry):4:in `&lt;class:PageCrawler&gt;'\n[5] pry(YPCrawler::PageCrawler)&gt; url\nNameError: undefined local variable or method `url' for YPCrawler::PageCrawler:Class\nDid you mean?  URI\nfrom (pry):5:in `&lt;class:PageCrawler&gt;'\n[6] pry(YPCrawler::PageCrawler)&gt; @url\n=&gt; nil\n</code></pre>\n\n<p>Why can I not access <code>@url</code> that was initialized in my <code>def initialize</code> method?</p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>Added Screenshots of what my code and the terminal PRY session really look like, since there was some disbelief about the position of my <code>binding.pry</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PI3BY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PI3BY.png\" alt=\"code\"></a>\n<a href=\"https://i.stack.imgur.com/Bo2yo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Bo2yo.png\" alt=\"terminal\"></a></p>\n\n<p><strong>Edit 2</strong></p>\n\n<p>My main <code>lib/yp-crawler.rb</code> file looks like this:</p>\n\n<pre><code>require_relative \"yp-crawler/version\"\nrequire_relative \"yp-crawler/page-crawler\"\nrequire_relative \"yp-crawler/listing-crawler\"\n\nmodule YPCrawler\nend\n</code></pre>\n\n<p>So the code that is run above is my <code>yp-crawler/page-crawler.rb</code> file, which I included in my <code>lib/yp-crawler.rb</code> file.</p>\n\n<p><strong>Edit 3</strong></p>\n\n<p>Here is a recording of my entire workflow. Please tell me what I am missing:</p>\n\n<p><a href=\"https://www.dropbox.com/s/jp1abthfkiplb4p/Pry-not-cooperating.webm?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/jp1abthfkiplb4p/Pry-not-cooperating.webm?dl=0</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1475067561, "post_id": 39748221, "comment_id": 66792590, "body": "<code>filter</code> is defined in <code>Tuto</code> but it seems you want it defined in <code>Category</code> based on this line <code>Category.filter(params[:filter])</code>"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1475067641, "post_id": 39748221, "comment_id": 66792653, "body": "you don&#39;t have <code>filter</code> method in Category class, thus  <code>Category.filter(params[:filter])</code> fails"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "edited": false, "score": 0, "creation_date": 1475068617, "post_id": 39748372, "comment_id": 66793428, "body": "I moved filter in model category :) but It doesn&#39;t filter as expected, I will update my question thanks a lot"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1475070160, "post_id": 39748372, "comment_id": 66794711, "body": "@Nelly-Johan see my edit.  You had a wrong syntax in where clause. Make sure to accept the answer if that solved your issue"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475073248, "post_id": 39748372, "comment_id": 66797210, "body": "@Nelly-Johan you can create a new question unless you&#39;ve solved it already"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "edited": false, "score": 0, "creation_date": 1475073712, "post_id": 39748372, "comment_id": 66797560, "body": "Not solved totally... I will try again, btw I accept your answer that was very helpful !"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475073955, "post_id": 39748372, "comment_id": 66797749, "body": "@Nelly-Johan the <code>where</code> should just work. Check it again please, if not - indeed ask a new question :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "edited": false, "score": 0, "creation_date": 1475074149, "post_id": 39748372, "comment_id": 66797912, "body": "I will, stay tuned ;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "edited": false, "score": 0, "creation_date": 1475074825, "post_id": 39748372, "comment_id": 66798418, "body": "just in case here it is my new question <a href=\"http://stackoverflow.com/questions/39751149/rails4-malformed-format-string\" title=\"rails4 malformed format string\">stackoverflow.com/questions/39751149/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "edited": false, "score": 0, "creation_date": 1475075132, "post_id": 39748372, "comment_id": 66798644, "body": "I tried yes but nothing is fitered, with the other I have the &quot;malformed string thing&quot;"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 0, "last_activity_date": 1475073928, "last_edit_date": 1592644375, "creation_date": 1475067734, "answer_id": 39748372, "question_id": 39748221, "link": "https://stackoverflow.com/questions/39748221/undefined-method-filter-for-class0x007fc0600be140/39748372#39748372", "title": "Undefined method `filter&#39; for #&lt;Class:0x007fc0600be140&gt;", "body": "<p>This line</p>\n<pre><code>Category.filter(params[:filter])\n</code></pre>\n<p>fails because you simply do not have method <code>filter</code> defined for <code>Category</code> class.</p>\n<h1>EDIT</h1>\n<pre><code>where(&quot;name LIKE '%#{filter}%'&quot;).order(created_at: :desc)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 0, "accepted_answer_id": 39748372, "answer_count": 1, "score": 1, "last_activity_date": 1475325865, "creation_date": 1475067366, "last_edit_date": 1495539952, "question_id": 39748221, "link": "https://stackoverflow.com/questions/39748221/undefined-method-filter-for-class0x007fc0600be140", "title": "Undefined method `filter&#39; for #&lt;Class:0x007fc0600be140&gt;", "body": "<p>I've received help from another <a href=\"https://stackoverflow.com/questions/39736700/rails-4-researches-doesnt-display?noredirect=1#comment66772227_39736700\">question</a> but now I have this error</p>\n\n<pre><code>undefined method `filter' for #&lt;Class:0x007fc0600be140&gt;`\n</code></pre>\n\n<p>I am trying to filter by categories (Category were created in the console, like Category.create(name: \"Ruby\") and so on...)</p>\n\n<pre><code>2.3.1 :009 &gt; Category.all\n  Category Load (0.2ms)  SELECT \"categories\".* FROM \"categories\"\n =&gt; #&lt;ActiveRecord::Relation [#&lt;Category id: 1, name: \"Ruby\", created_at: \"2016-09-26 09:03:17\", updated_at: \"2016-09-26 09:03:17\"&gt;, #&lt;Category id: 2, name: \"Rails4\", created_at: \"2016-09-26 09:03:25\", updated_at: \"2016-09-27 14:32:39\"&gt;, #&lt;Category id: 3, name: \"Rails5\", created_at: \"2016-09-26 09:03:30\", updated_at: \"2016-09-27 14:35:25\"&gt;, #&lt;Category id: 4, name: \"Heroku\", created_at: \"2016-09-26 09:03:35\", updated_at: \"2016-09-27 14:35:47\"&gt;, #&lt;Category id: 5, name: \"AWS-Amazon\", created_at: \"2016-09-26 09:03:43\", updated_at: \"2016-09-26 09:03:43\"&gt;]&gt;\n</code></pre>\n\n<p><strong>My model tuto</strong></p>\n\n<pre><code>class Tuto &lt; ActiveRecord::Base\n  acts_as_votable\n  belongs_to :user\n  belongs_to :category\n  validates :category_id, presence: true\n\n\n  def self.search(search)\n    if search\n      where([\"title LIKE ?\",\"%#{search}%\"]).order('created_at DESC')\n    else\n      all\n    end\n  end\n#moved this method in category.rb\n  #def self.filter(filter)\n    #if filter\n      #where([\"name LIKE ?\",\"%#{filter}%\"]).order('created_at DESC')\n    #else\n      #all\n    #end\n  #end\nend\n</code></pre>\n\n<p><strong>My tutos controller</strong></p>\n\n<pre><code>class TutosController &lt; ApplicationController\n  before_action :authenticate_user!, only: [:new, :create]\n  before_action :set_tuto, only: [:show, :edit, :update, :destroy, :upvote]\n\n\n  def index\n  #binding.pry\n    if params[:search].present?\n      @tutos = Tuto.search(params[:search]).includes(:user, :category)\n    else\n      @tutos = Tuto.all.includes(:user, :category)\n    end\n\n    if params[:filter].present?\n      @categories = Category.filter(params[:filter])\n    else\n      @categories = Category.all\n    end\n  end\n\n\n  def show\n    @tuto = Tuto.find(params[:id])\n    @user = User.all\n  end\n\n  def new\n    @tuto = Tuto.new\n  end\n\n  def edit\n  end\n\n  def create\n\n    @tuto = Tuto.new(tuto_params)\n    @tuto.user_id = current_user.id\n\n    respond_to do |format|\n      if @tuto.save\n        flash[:success] = \"Test\"\n        format.html { redirect_to @tuto, notice: 'Tuto was successfully created.' }\n        format.json { render :show, status: :created, location: @tuto }\n      else\n        format.html { render :new }\n        format.json { render json: @tuto.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def update\n    respond_to do |format|\n      if @tuto.update(tuto_params)\n        format.html { redirect_to @tuto, notice: 'Tuto was successfully updated.' }\n        format.json { render :show, status: :ok, location: @tuto }\n      else\n        format.html { render :edit }\n        format.json { render json: @tuto.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n\n  def destroy\n    @tuto.destroy\n    respond_to do |format|\n      format.html { redirect_to tutos_url, notice: 'Tuto was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n\n  def upvote\n    @tuto.upvote_by current_user\n    redirect_to :back\n  end\n\n\n  private\n\n\n    def set_tuto\n      @tuto = Tuto.find(params[:id])\n    end\n\n    def tuto_params\n      params.require(:tuto).permit(:title, :content, :id, :user_id, :category_id)\n    end\nend\n</code></pre>\n\n<p><strong>The view index</strong></p>\n\n<pre><code>.container\n  .row\n    h1.text-gray Tutorials \n  .row.search_banner\n    .col-xs-3\n      =form_tag tutos_path, :method =&gt; 'get' do \n        =text_field_tag :search, params[:search],  placeholder:\"Search by keywords\"\n        =submit_tag \"Search\", class:'btn btn-xs btn-default btn-search'\n\n    .col-xs-3\n      =form_tag tutos_path, :method =&gt; 'get' do \n        =select_tag :filter, options_for_select(Category.all.map{|c| c.name}, params[:filter])\n        =submit_tag \"Search\", class:\"btn btn-xs btn-default btn-search\"\n</code></pre>\n\n<h1>EDIT and new trouble....</h1>\n\n<p>I've moved the <code>self_filter</code>method into my category model and it looks better even though I still can't filter by categories... When I select for exemple \"heroku\" everything is still here... What could be wrong?</p>\n\n<pre><code>class Category &lt; ActiveRecord::Base\n  has_many :tutos\n\n  def self.filter(filter)\n    if filter\n      where([\"name LIKE ?\",\"%#{filter}%\"]).order('created_at DESC')\n    else\n      all\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "sublimetext3"], "comments": [{"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1475067490, "post_id": 39748157, "comment_id": 66792530, "body": "whats not working?, your program is working fine in my pc."}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1475067525, "post_id": 39748157, "comment_id": 66792556, "body": "you tried ruby guess.rb?"}, {"owner": {"reputation": 199, "user_id": 6128680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6rkvb.jpg?s=128&g=1", "display_name": "trying...", "link": "https://stackoverflow.com/users/6128680/trying"}, "reply_to_user": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1475067526, "post_id": 39748157, "comment_id": 66792558, "body": "I couldn&#39;t see the results in the build session in sublimetext3"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1475067573, "post_id": 39748157, "comment_id": 66792599, "body": "Most text editors don&#39;t support interactive sessions, you have to run it from the terminal."}, {"owner": {"reputation": 199, "user_id": 6128680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6rkvb.jpg?s=128&g=1", "display_name": "trying...", "link": "https://stackoverflow.com/users/6128680/trying"}, "edited": false, "score": 0, "creation_date": 1475067629, "post_id": 39748157, "comment_id": 66792643, "body": "ok, let me try from my command prompt"}, {"owner": {"reputation": 199, "user_id": 6128680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6rkvb.jpg?s=128&g=1", "display_name": "trying...", "link": "https://stackoverflow.com/users/6128680/trying"}, "edited": false, "score": 0, "creation_date": 1475067850, "post_id": 39748157, "comment_id": 66792828, "body": "is there any error in my code, have you got the guess == secret session after few tries. If yes, please tell me a best editor for ruby"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1475067932, "post_id": 39748157, "comment_id": 66792891, "body": "there is no wrong in your code, try all the 3 values."}, {"owner": {"reputation": 199, "user_id": 6128680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6rkvb.jpg?s=128&g=1", "display_name": "trying...", "link": "https://stackoverflow.com/users/6128680/trying"}, "edited": false, "score": 0, "creation_date": 1475068107, "post_id": 39748157, "comment_id": 66793013, "body": "its working,so  &quot;NO IDE&quot; for ruby right"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 1, "creation_date": 1475068412, "post_id": 39748157, "comment_id": 66793261, "body": "<a href=\"http://stackoverflow.com/questions/16991/what-ruby-ide-do-you-prefer\">check this link</a>"}, {"owner": {"reputation": 199, "user_id": 6128680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6rkvb.jpg?s=128&g=1", "display_name": "trying...", "link": "https://stackoverflow.com/users/6128680/trying"}, "reply_to_user": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1475068544, "post_id": 39748157, "comment_id": 66793367, "body": "thanks @sravan, i have downloaded that IDE already but I haven&#39;t installed it let me check that for you"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1475068589, "post_id": 39748157, "comment_id": 66793409, "body": "okay, carry on."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 6128680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6rkvb.jpg?s=128&g=1", "display_name": "trying...", "link": "https://stackoverflow.com/users/6128680/trying"}, "edited": false, "score": 0, "creation_date": 1475069044, "post_id": 39748602, "comment_id": 66793772, "body": "I have installed that package into the sublimetext3 folder but still Im unable to see the launch session you said"}, {"owner": {"reputation": 10249, "user_id": 1329116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e58c33b56b00d4148810d427a04e21e0?s=128&d=identicon&r=PG", "display_name": "idleberg", "link": "https://stackoverflow.com/users/1329116/idleberg"}, "reply_to_user": {"reputation": 199, "user_id": 6128680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6rkvb.jpg?s=128&g=1", "display_name": "trying...", "link": "https://stackoverflow.com/users/6128680/trying"}, "edited": false, "score": 0, "creation_date": 1475069273, "post_id": 39748602, "comment_id": 66793941, "body": "What do you mean by \u201cinstalled into the Sublime Text folder\u201d? Package Control is the recommended way to install packages, just follow the steps described in <a href=\"https://github.com/wuub/SublimeREPL#installation\" rel=\"nofollow noreferrer\">instructions</a>."}, {"owner": {"reputation": 199, "user_id": 6128680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6rkvb.jpg?s=128&g=1", "display_name": "trying...", "link": "https://stackoverflow.com/users/6128680/trying"}, "edited": false, "score": 0, "creation_date": 1475069456, "post_id": 39748602, "comment_id": 66794092, "body": "Im getting this error in tools -&gt; SublimeREPL, `to_specs&#39;: Could not find &#39;pry&#39; (&gt;= 0) among 9 total gem(s) (Gem::LoadError)"}, {"owner": {"reputation": 10249, "user_id": 1329116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e58c33b56b00d4148810d427a04e21e0?s=128&d=identicon&r=PG", "display_name": "idleberg", "link": "https://stackoverflow.com/users/1329116/idleberg"}, "reply_to_user": {"reputation": 199, "user_id": 6128680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6rkvb.jpg?s=128&g=1", "display_name": "trying...", "link": "https://stackoverflow.com/users/6128680/trying"}, "edited": false, "score": 0, "creation_date": 1475069507, "post_id": 39748602, "comment_id": 66794140, "body": "Well, just install Pry then: <code>sudo gem install pry</code>. You should probably make your Ruby homework before diving deep into it."}, {"owner": {"reputation": 199, "user_id": 6128680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6rkvb.jpg?s=128&g=1", "display_name": "trying...", "link": "https://stackoverflow.com/users/6128680/trying"}, "edited": false, "score": 0, "creation_date": 1475069842, "post_id": 39748602, "comment_id": 66794443, "body": "I get a new error after insatlling pry gem, `&lt;main&gt;&#39;: uninitialized constant Pry::InputCompleter (NameError)"}, {"owner": {"reputation": 10249, "user_id": 1329116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e58c33b56b00d4148810d427a04e21e0?s=128&d=identicon&r=PG", "display_name": "idleberg", "link": "https://stackoverflow.com/users/1329116/idleberg"}, "reply_to_user": {"reputation": 199, "user_id": 6128680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6rkvb.jpg?s=128&g=1", "display_name": "trying...", "link": "https://stackoverflow.com/users/6128680/trying"}, "edited": false, "score": 0, "creation_date": 1475069893, "post_id": 39748602, "comment_id": 66794491, "body": "You should probably start a new question for your new problem"}, {"owner": {"reputation": 10249, "user_id": 1329116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e58c33b56b00d4148810d427a04e21e0?s=128&d=identicon&r=PG", "display_name": "idleberg", "link": "https://stackoverflow.com/users/1329116/idleberg"}, "reply_to_user": {"reputation": 199, "user_id": 6128680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6rkvb.jpg?s=128&g=1", "display_name": "trying...", "link": "https://stackoverflow.com/users/6128680/trying"}, "edited": false, "score": 1, "creation_date": 1475070568, "post_id": 39748602, "comment_id": 66795076, "body": "Take a look at this <a href=\"https://github.com/wuub/SublimeREPL/issues/336\" rel=\"nofollow noreferrer\">issue</a> on GitHub, installing these version will fix your NameError"}], "tags": [], "owner": {"reputation": 10249, "user_id": 1329116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e58c33b56b00d4148810d427a04e21e0?s=128&d=identicon&r=PG", "display_name": "idleberg", "link": "https://stackoverflow.com/users/1329116/idleberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1475068544, "last_edit_date": 1475068544, "creation_date": 1475068393, "answer_id": 39748602, "question_id": 39748157, "link": "https://stackoverflow.com/questions/39748157/a-string-output-is-not-showing-ruby/39748602#39748602", "title": "a string output is not showing ruby", "body": "<p>Since the Sublime Text console does not accept any input, you need to install package like <a href=\"https://packagecontrol.io/packages/SublimeREPL\" rel=\"nofollow\">SublimeREPL</a>. You can launch it from <em>Tools > SublimeREPL > Ruby</em>.</p>\n"}], "owner": {"reputation": 199, "user_id": 6128680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6rkvb.jpg?s=128&g=1", "display_name": "trying...", "link": "https://stackoverflow.com/users/6128680/trying"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475068544, "creation_date": 1475067203, "question_id": 39748157, "link": "https://stackoverflow.com/questions/39748157/a-string-output-is-not-showing-ruby", "title": "a string output is not showing ruby", "body": "<p>I'm tried these ruby code lines to run in <strong>sublimeText3</strong> but I dont get any error even in <strong>view ->show console</strong>. Show result shows me that the coding is building, but I couldn't see any output there. The below code is what I'm trying.</p>\n\n<p>guess.rb</p>\n\n<pre><code>words = ['foobar', 'baz', 'quux']\nsecret = words[rand(3)]\n\nprint \"guess? \"\nwhile guess = STDIN.gets\n  guess.chop!\n  if guess == secret\n    puts \"You win!\"\n    break\n  else\n    puts \"Sorry, you lose.\"\n  end\n  print \"guess? \"\nend\nputs \"The word was \", secret, \".\"\n</code></pre>\n"}, {"tags": ["ruby", "travis-ci"], "comments": [{"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1475066633, "post_id": 39747715, "comment_id": 66791895, "body": "looking at <a href=\"http://stackoverflow.com/questions/33965755/how-to-get-travis-to-fail-if-tests-do-not-have-enough-coverage-for-python\" title=\"how to get travis to fail if tests do not have enough coverage for python\">stackoverflow.com/questions/33965755/&hellip;</a> i think you may need to run the coverage using <code>coverage run</code> before you can use coverage report"}, {"owner": {"reputation": 111, "user_id": 6070958, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/267b9e19e33143b759550c8dbaf9e5a8?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/6070958/vlad"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1475066981, "post_id": 39747715, "comment_id": 66792153, "body": "@KimmoLehto this is a rails app, so I am not sure if I can run that. I am using a gem called simplecov which is basically runing the coverage for me and reporting it when the <code>rspec</code> command is finished."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1475068277, "post_id": 39747715, "comment_id": 66793145, "body": "coverage is maybe a python command. you may need a script that parses your coverage/index.html and returns 1 unless coverage = 100. Example: <code>grep &quot;covered_percent&quot; coverage&#47;index.html | cut -d&#39;&gt;&#39; -f3 | cut -d&#39;.&#39; -f1 | fgrep 100 || exit 1</code>"}, {"owner": {"reputation": 111, "user_id": 6070958, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/267b9e19e33143b759550c8dbaf9e5a8?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/6070958/vlad"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1475068579, "post_id": 39747715, "comment_id": 66793399, "body": "ok, so how would that script look like? @KimmoLehto"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1475068602, "post_id": 39747715, "comment_id": 66793416, "body": "Found a better solution, in answer."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 6070958, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/267b9e19e33143b759550c8dbaf9e5a8?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/6070958/vlad"}, "edited": false, "score": 0, "creation_date": 1475136733, "post_id": 39748659, "comment_id": 66824408, "body": "@kimmo.lehto: great idea. Will that make Travis fail though?"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "reply_to_user": {"reputation": 111, "user_id": 6070958, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/267b9e19e33143b759550c8dbaf9e5a8?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/6070958/vlad"}, "edited": false, "score": 0, "creation_date": 1475156695, "post_id": 39748659, "comment_id": 66838435, "body": "Yes. The rspec test run will exit with non zero exit code. If exit code == 0 travis will say success, if something else it will say failure."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "reply_to_user": {"reputation": 111, "user_id": 6070958, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/267b9e19e33143b759550c8dbaf9e5a8?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/6070958/vlad"}, "edited": false, "score": 0, "creation_date": 1475220607, "post_id": 39748659, "comment_id": 66865739, "body": "@Vlad nice. then you should mark my answer as the answer :)"}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": true, "score": 3, "last_activity_date": 1475068885, "last_edit_date": 1475068885, "creation_date": 1475068542, "answer_id": 39748659, "question_id": 39747715, "link": "https://stackoverflow.com/questions/39747715/make-travis-fail-if-the-coverage-is-not-above-a-threshold-ruby/39748659#39748659", "title": "Make Travis fail if the coverage % is not above a threshold (Ruby)", "body": "<p><a href=\"https://github.com/colszowka/simplecov#customizing-exit-behaviour\" rel=\"nofollow\">SimpleCov README</a> describes exit behavior.</p>\n\n<p>You can make simplecov fail the rspec test run if the coverage is below a set value.</p>\n\n<p>Put this to spec helper right before simplecov is started:</p>\n\n<pre><code>SimpleCov.minimum_coverage 100\n</code></pre>\n\n<p>After that you can remove the coverage script line from .travis.yml</p>\n"}], "owner": {"reputation": 111, "user_id": 6070958, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/267b9e19e33143b759550c8dbaf9e5a8?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/6070958/vlad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 730, "favorite_count": 1, "accepted_answer_id": 39748659, "answer_count": 1, "score": 1, "last_activity_date": 1475068885, "creation_date": 1475066126, "question_id": 39747715, "link": "https://stackoverflow.com/questions/39747715/make-travis-fail-if-the-coverage-is-not-above-a-threshold-ruby", "title": "Make Travis fail if the coverage % is not above a threshold (Ruby)", "body": "<p>How can I make Travis CI build fail if my coverage report is not 100%?\nMy .travis.yaml looks like this:</p>\n\n<pre><code>language: ruby\nrvm:\n   - 2.2.4\ninstall: bundle install\nscript:\n  - rspec spec/features/*\n  - coverage report --fail-under=100\n</code></pre>\n\n<p>But this is coming out with this error in Travis: \n   The command \"coverage report --fail-under=100\" exited with 127.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1475065632, "post_id": 39747442, "comment_id": 66791132, "body": "Have you had a go? We may be able to help you with a current strategy you have?"}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "reply_to_user": {"reputation": 1128, "user_id": 3973117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f52a78aa4cf83a8372e28a27ce3511c?s=128&d=identicon&r=PG", "display_name": "jan.zikan", "link": "https://stackoverflow.com/users/3973117/jan-zikan"}, "edited": false, "score": 1, "creation_date": 1475065701, "post_id": 39747442, "comment_id": 66791192, "body": "@kallax, that won&#39;t work, he&#39;s not removing redundant values, he&#39;s removing value pairs, like north and south"}, {"owner": {"reputation": 167, "user_id": 6758433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154048264753472/picture?type=large", "display_name": "Jack Kelly", "link": "https://stackoverflow.com/users/6758433/jack-kelly"}, "edited": false, "score": 0, "creation_date": 1475066224, "post_id": 39747442, "comment_id": 66791584, "body": "I&#39;m pretty sure I have to use delete_if here but I can&#39;t figure out exactly how to use it. I&#39;m still new to ruby."}, {"owner": {"reputation": 167, "user_id": 6758433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154048264753472/picture?type=large", "display_name": "Jack Kelly", "link": "https://stackoverflow.com/users/6758433/jack-kelly"}, "edited": false, "score": 0, "creation_date": 1475066412, "post_id": 39747442, "comment_id": 66791721, "body": "I&#39;ve tried creating a unique array then subtracting that from the original array. This works for the first problem but not the second."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 6758433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154048264753472/picture?type=large", "display_name": "Jack Kelly", "link": "https://stackoverflow.com/users/6758433/jack-kelly"}, "edited": false, "score": 0, "creation_date": 1475066946, "post_id": 39747918, "comment_id": 66792129, "body": "I feel like this solution has gone over my head a little. Thank you!"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 167, "user_id": 6758433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154048264753472/picture?type=large", "display_name": "Jack Kelly", "link": "https://stackoverflow.com/users/6758433/jack-kelly"}, "edited": false, "score": 0, "creation_date": 1475067018, "post_id": 39747918, "comment_id": 66792184, "body": "@JackKelly I can explain, just point to the part that confuses you. You can try it step by step in the REPL as well."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 4, "last_activity_date": 1475068426, "last_edit_date": 1475068426, "creation_date": 1475066591, "answer_id": 39747918, "question_id": 39747442, "link": "https://stackoverflow.com/questions/39747442/how-do-i-remove-opposite-values-from-an-array/39747918#39747918", "title": "How do I remove opposite values from an array?", "body": "<pre><code>OPPOSITES = {\n  'NORTH' =&gt; 'SOUTH',\n  'WEST'  =&gt; 'EAST',\n  'EAST'  =&gt; 'WEST',\n  'SOUTH' =&gt; 'NORTH',\n}\n\nfrequencies = plan.group_by(&amp;:itself).map do |direction, occurrences|\n  [direction, occurrences.size]\nend.to_h\n\nOPPOSITES.flat_map do |direction, opposite_direction|\n  uncounteracted_occurances =\n    frequencies[direction] - frequencies[opposite_direction]\n\n  [direction] * [uncounteracted_occurances, 0].max\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1475088644, "post_id": 39752506, "comment_id": 66806990, "body": "I initially had a long-winded conventional answer, then read @stefan&#39;s lovely answer, which gave me the idea for this."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1475088575, "last_edit_date": 1475088575, "creation_date": 1475078649, "answer_id": 39752506, "question_id": 39747442, "link": "https://stackoverflow.com/questions/39747442/how-do-i-remove-opposite-values-from-an-array/39752506#39752506", "title": "How do I remove opposite values from an array?", "body": "<pre><code>def simplify(plan)\n  h = { \"SOUTH\"=&gt;\"NORTH\", \"NORTH\"=&gt;\"SOUTH\", \"EAST\"=&gt;\"WEST\", \"WEST\"=&gt;\"EAST\" }\n  plan.each_with_object([]) { |direction, arr|\n    (idx = arr.index(h[direction])) ? arr.delete_at(idx) : arr &lt;&lt; direction }\nend\n\nsimplify [\"NORTH\", \"SOUTH\", \"SOUTH\", \"EAST\", \"WEST\", \"NORTH\", \"WEST\"]\n  #=&gt; [\"WEST\"] \nsimplify [\"NORTH\", \"SOUTH\", \"EAST\", \"WEST\", \"NORTH\", \"WEST\", \"WEST\"]\n  #=&gt; [\"NORTH\", \"WEST\", \"WEST\"] \nsimplify [\"NORTH\", \"EAST\", \"WEST\", \"NORTH\", \"WEST\"]\n  #=&gt; [\"NORTH\", \"NORTH\", \"WEST\"] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475085262, "post_id": 39754220, "comment_id": 66804955, "body": "awesome approach!"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475085636, "post_id": 39754220, "comment_id": 66805188, "body": "I mean it - love the solution, it&#39;s really easy to understand just by reading without even stopping to think about it - I wish I could upvote more."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 6, "last_activity_date": 1475084202, "creation_date": 1475084202, "answer_id": 39754220, "question_id": 39747442, "link": "https://stackoverflow.com/questions/39747442/how-do-i-remove-opposite-values-from-an-array/39754220#39754220", "title": "How do I remove opposite values from an array?", "body": "<p>Given an array of directions:</p>\n\n<pre><code>plan = %w[NORTH SOUTH SOUTH EAST WEST NORTH WEST]\n#=&gt; [\"NORTH\", \"SOUTH\", \"SOUTH\", \"EAST\", \"WEST\", \"NORTH\", \"WEST\"]\n</code></pre>\n\n<p>I would translate the directions into <code>x</code> and <code>y</code> coordinates:</p>\n\n<pre><code>x, y = 0, 0\n\nplan.each do |direction|\n  case direction\n  when 'NORTH' then y += 1\n  when 'EAST'  then x += 1\n  when 'SOUTH' then y -= 1\n  when 'WEST'  then x -= 1\n  end\nend\n</code></pre>\n\n<p><code>'NORTH'</code> increments <code>y</code>, <code>'SOUTH'</code> decrements <code>y</code>, same for <code>'EAST'</code> / <code>'WEST'</code> and <code>x</code>.</p>\n\n<p>With the example array this gives:</p>\n\n<pre><code>x #=&gt; -1\ny #=&gt; 0\n</code></pre>\n\n<p>These have to be translated back to an array of directions:</p>\n\n<pre><code>[\n  *Array.new(y.abs) { y.positive? ? 'NORTH' : 'SOUTH' },\n  *Array.new(x.abs) { x.positive? ? 'EAST' : 'WEST' }\n]\n#=&gt; [\"WEST\"]\n</code></pre>\n\n<p>Although this is not the shortest code, it's relatively easy to grasp IMO.</p>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1475110692, "last_edit_date": 1475110692, "creation_date": 1475095609, "answer_id": 39757353, "question_id": 39747442, "link": "https://stackoverflow.com/questions/39747442/how-do-i-remove-opposite-values-from-an-array/39757353#39757353", "title": "How do I remove opposite values from an array?", "body": "<p>This is an approach which should be straightforward to follow. As with my deleted nearly-answer it's considering directions on a numerical 2D-plane but without the unnecessary complexity (pun intended). As a result this is conceptually similar to the excellent answer already posted by @Stefan.</p>\n\n<pre><code>def kanye plan\n  r = plan.count(\"EAST\")  - plan.count(\"WEST\")\n  i = plan.count(\"NORTH\") - plan.count(\"SOUTH\")\n\n  res = []\n  r.positive? ? r.times { res &lt;&lt; \"EAST\" }  : (-r).times { res &lt;&lt; \"WEST\" }\n  i.positive? ? i.times { res &lt;&lt; \"NORTH\" } : (-i).times { res &lt;&lt; \"SOUTH\" }\n  res\nend\n</code></pre>\n\n<p>Examples:</p>\n\n<pre><code>plan = [\"NORTH\", \"SOUTH\", \"SOUTH\", \"EAST\", \"WEST\", \"NORTH\", \"WEST\"]\nkanye plan #=&gt; [\"WEST\"]\n\nplan = [\"NORTH\", \"WEST\", \"SOUTH\", \"EAST\"]\nkanye plan #=&gt; []\n\nplan = [\"NORTH\"]\nkanye plan #=&gt; [\"NORTH\"]\n\nplan = []\nkanye plan #=&gt; []\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 841, "user_id": 6231595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4sEPs.jpg?s=128&g=1", "display_name": "MVP", "link": "https://stackoverflow.com/users/6231595/mvp"}, "is_accepted": false, "score": 0, "last_activity_date": 1477555105, "last_edit_date": 1477555105, "creation_date": 1477497261, "answer_id": 40266865, "question_id": 39747442, "link": "https://stackoverflow.com/questions/39747442/how-do-i-remove-opposite-values-from-an-array/40266865#40266865", "title": "How do I remove opposite values from an array?", "body": "<p>We can use the Argand-Gauss plane to represent the geographical coordinates, where the real part we will tell the north-south movements while the imaginary part the east-west direction. \nIn this way it will be sufficient to run a simple sum of complex numbers.</p>\n\n<pre><code>plan=[\"NORTH\", \"SOUTH\", \"SOUTH\", \"EAST\", \"WEST\", \"NORTH\", \"WEST\"]\ndict = {\"NORTH\"=&gt;1, \"SOUTH\"=&gt;-1, \"EAST\"=&gt;(0+1i), \"WEST\"=&gt;(0-1i)}\n\n# We substitute for each direction a complex number\ndict.each{|coord,number| plan.map!{|item| item==coord ? number : item}}\n# We run a simple sum\ndirection = plan.reduce(&amp;:+)  # (0-1i)\nputs dict.key(direction)   #=&gt; WEST\n\nre=direction.real\nim=direction.imag\n\nif re!=0 and im!=0\n  puts \"Direction: #{re.abs} #{dict.key(re/re.abs)} #{im.abs} #{dict.key((im/im.abs) *(1i))}\"\nelsif re!=0 and im==0\n  puts \"Direction: #{re.abs} #{dict.key(re/re.abs)}\"\nelsif re==0 and im!=0\n   puts \"Direction: #{im.abs} #{dict.key((im/im.abs) *(1i))}\"\nelse\n  puts \"I did not move\"\nend\n\n#=&gt; Direction: 1 WEST\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 6758433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154048264753472/picture?type=large", "display_name": "Jack Kelly", "link": "https://stackoverflow.com/users/6758433/jack-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 1, "accepted_answer_id": 39754220, "answer_count": 5, "score": 7, "last_activity_date": 1477555105, "creation_date": 1475065472, "last_edit_date": 1475066939, "question_id": 39747442, "link": "https://stackoverflow.com/questions/39747442/how-do-i-remove-opposite-values-from-an-array", "title": "How do I remove opposite values from an array?", "body": "<p>I have a problem where I am trying to create an array of directions in which each direction is not redundant.</p>\n\n<pre><code>plan = [\"NORTH\", \"SOUTH\", \"SOUTH\", \"EAST\", \"WEST\", \"NORTH\", \"WEST\"]\n</code></pre>\n\n<p>As you can see most of the values in this plan are redundant and you may as well simply tell the person to go <code>\"WEST\"</code>. </p>\n\n<pre><code>plan = [\"NORTH\", \"WEST\", \"SOUTH\", \"EAST\"]\n</code></pre>\n\n<p>I also want the plan above to return an empty array.</p>\n"}, {"tags": ["ruby", "mechanize"], "answers": [{"tags": [], "owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "is_accepted": true, "score": 2, "last_activity_date": 1475065761, "creation_date": 1475065761, "answer_id": 39747558, "question_id": 39747282, "link": "https://stackoverflow.com/questions/39747282/mechanize-fill-form-with-square-brackets-in-input-name/39747558#39747558", "title": "Mechanize - Fill form with square brackets in input name", "body": "<p>Try Following.</p>\n\n<pre><code>a = Mechanize.new\npage = a.get(\"http://myurl.com\")\nfirst_form = page.form('item')\n\ntitle_field = first_form.field_with(:name =&gt; \"title[en_US]\")\ntitle_field.value = \"whatever_title\"\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>a = Mechanize.new\npage = a.get(\"http://myurl.com\")\nfirst_form = page.form('item')\n\nfirst_form['title[en_US]'] = \"title\"\n</code></pre>\n"}], "owner": {"reputation": 606, "user_id": 5143565, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/UL3LT.jpg?s=128&g=1", "display_name": "Rubyx", "link": "https://stackoverflow.com/users/5143565/rubyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 39747558, "answer_count": 1, "score": 2, "last_activity_date": 1486742433, "creation_date": 1475065057, "last_edit_date": 1486742433, "question_id": 39747282, "link": "https://stackoverflow.com/questions/39747282/mechanize-fill-form-with-square-brackets-in-input-name", "title": "Mechanize - Fill form with square brackets in input name", "body": "<p>I'm trying to fill a form with Mechanize. It works but some of the input name have [] inside and it fails.</p>\n\n<pre><code>&lt;input id=\"titleen_US\" type=\"text\" name=\"title[en_US]\" value=\"\"&gt; \n</code></pre>\n\n<p>I tried </p>\n\n<pre><code>a = Mechanize.new\npage = a.get(\"http://myurl.com\")\nfirst_form = page.form('item')\nfirst_form.title[en_US] = 'This is my title'\n</code></pre>\n\n<p>But i have <code>undefined method 'title='</code>.\n Any idea? thx</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 1, "creation_date": 1475065606, "post_id": 39747140, "comment_id": 66791114, "body": "have you tried <code>require_relative &quot;file-a&quot;</code>?"}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 1, "creation_date": 1475065841, "post_id": 39747140, "comment_id": 66791304, "body": "@davidhu2000 Bruv...perfect. That worked. Add it as an answer, and I will accept that. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1475066524, "post_id": 39747655, "comment_id": 66791797, "body": "Out of curiosity, was this a new change since 1.8/1.9?"}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": true, "score": 5, "last_activity_date": 1475065947, "creation_date": 1475065947, "answer_id": 39747655, "question_id": 39747140, "link": "https://stackoverflow.com/questions/39747140/ruby-require-cannot-load-such-file-loaderror/39747655#39747655", "title": "Ruby `require&#39;: cannot load such file (LoadError)", "body": "<p>According to API Dock, <code>require_relative</code> is what you need.</p>\n\n<blockquote>\n  <p>Ruby tries to load the library named string relative to the requiring\n  file\u2019s path. If the file\u2019s path cannot be determined a LoadError is\n  raised. If a file is loaded true is returned and false otherwise.</p>\n</blockquote>\n\n<p>So all you have to do is </p>\n\n<pre><code>require_relative \"file-a\"\nrequire_relative \"file-b\"\nrequire_relative \"file-c\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1475069891, "post_id": 39749139, "comment_id": 66794490, "body": "I was just going to post this."}], "tags": [], "owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "is_accepted": false, "score": 3, "last_activity_date": 1475071327, "last_edit_date": 1475071327, "creation_date": 1475069705, "answer_id": 39749139, "question_id": 39747140, "link": "https://stackoverflow.com/questions/39747140/ruby-require-cannot-load-such-file-loaderror/39749139#39749139", "title": "Ruby `require&#39;: cannot load such file (LoadError)", "body": "<p>Another thing you can do is to add the directory to <code>$LOAD_PATH</code> (this is how most of the gems require files).<br>\n<code>$LOAD_PATH</code> (aka <code>$:</code>) is where ruby looks for a file when you call <code>require</code>.</p>\n\n<p>So you can try this code</p>\n\n<pre><code># lib/yp-crawler.rb\n\n$LOAD_PATH.unshift File.expand_path('..', __FILE__)\n# it can be $LOAD_PATH.push also\n\nrequire \"yp-crawler/file-c\"\nrequire \"yp-crawler/file-b\"\nrequire \"yp-crawler/file-a\"\n\nmodule YPCrawler\nend\n</code></pre>\n\n<p><em>P.S.</em>\nFor example you can <a href=\"https://github.com/thoughtbot/paperclip/blob/master/paperclip.gemspec#L1\" rel=\"nofollow\">see</a> how paperclip does the same thing.</p>\n"}], "owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17111, "favorite_count": 1, "accepted_answer_id": 39747655, "answer_count": 2, "score": 4, "last_activity_date": 1475071327, "creation_date": 1475064673, "question_id": 39747140, "link": "https://stackoverflow.com/questions/39747140/ruby-require-cannot-load-such-file-loaderror", "title": "Ruby `require&#39;: cannot load such file (LoadError)", "body": "<p>I have a directory structure that looks like this:</p>\n\n<pre><code> - lib\n   - yp-crawler (directory)\n      - file-a.rb\n      - file-b.rb\n      - file-c.rb\n   - yp-crawler.rb\n</code></pre>\n\n<p>My <code>lib/yp-crawler.rb</code> file looks like this:</p>\n\n<pre><code>require \"yp-crawler/file-c\"\nrequire \"yp-crawler/file-b\"\nrequire \"yp-crawler/file-a\"\n\nmodule YPCrawler\nend\n</code></pre>\n\n<p>When I try to run my file at the command line by doing this:</p>\n\n<pre><code>ruby lib/yp-crawler.rb\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>`require': cannot load such file -- yp-crawler/file-c (LoadError)\n    from .rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from lib/yp-crawler.rb:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>What could be causing this?</p>\n"}, {"tags": ["ruby", "rspec", "sublimetext3"], "comments": [{"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 1, "creation_date": 1475068563, "post_id": 39746969, "comment_id": 66793387, "body": "Turn the setting <code>show_errors_inline</code> off in your user preferences."}, {"owner": {"reputation": 1336, "user_id": 692751, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/32584d657817b051b2a10bb5a2551238?s=128&d=identicon&r=PG", "display_name": "Erem", "link": "https://stackoverflow.com/users/692751/erem"}, "reply_to_user": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 0, "creation_date": 1475074942, "post_id": 39746969, "comment_id": 66798506, "body": "Thank you kind sir!"}], "answers": [{"tags": [], "owner": {"reputation": 1336, "user_id": 692751, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/32584d657817b051b2a10bb5a2551238?s=128&d=identicon&r=PG", "display_name": "Erem", "link": "https://stackoverflow.com/users/692751/erem"}, "is_accepted": false, "score": 2, "last_activity_date": 1475075063, "creation_date": 1475075063, "answer_id": 39751245, "question_id": 39746969, "link": "https://stackoverflow.com/questions/39746969/sublime-text-shell-command-output/39751245#39751245", "title": "Sublime text shell command output", "body": "<p>As @OdatNard suggested, you need to set <code>show_errors_inline</code> to false.</p>\n\n<p>This feature has been introduced in Build 3124:</p>\n\n<blockquote>\n  <p>Build errors are now shown inline at the location where they occurred. This is controlled with the show_errors_inline setting.</p>\n</blockquote>\n\n<p>Check the changelog here: <a href=\"https://www.sublimetext.com/3\" rel=\"nofollow\">https://www.sublimetext.com/3</a>, Build 3124.</p>\n"}], "owner": {"reputation": 1336, "user_id": 692751, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/32584d657817b051b2a10bb5a2551238?s=128&d=identicon&r=PG", "display_name": "Erem", "link": "https://stackoverflow.com/users/692751/erem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "closed_date": 1475161930, "answer_count": 1, "score": 0, "last_activity_date": 1475075063, "creation_date": 1475064296, "question_id": 39746969, "link": "https://stackoverflow.com/questions/39746969/sublime-text-shell-command-output", "closed_reason": "Duplicate", "title": "Sublime text shell command output", "body": "<p>I'm having those lines overlaying my code every time a ruby test fails (using <a href=\"https://github.com/astrauka/TestRSpec\" rel=\"nofollow noreferrer\">TestRspec</a>):</p>\n\n<p><a href=\"https://i.stack.imgur.com/WYRL7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WYRL7.png\" alt=\"enter image description here\"></a></p>\n\n<p>How to make them not appear?\nIt's driving me nuts.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1475064989, "post_id": 39746936, "comment_id": 66790673, "body": "BTW, you can use <code>@random_image = &quot;#{rand(1..10)}.jpg&quot;</code> or \u2013 if these are just placeholders \u2013 <code>@random_image = @images.sample</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2224, "user_id": 4269732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/swGs5.jpg?s=128&g=1", "display_name": "Qaisar Nadeem", "link": "https://stackoverflow.com/users/4269732/qaisar-nadeem"}, "is_accepted": true, "score": 14, "last_activity_date": 1597896259, "last_edit_date": 1597896259, "creation_date": 1475064699, "answer_id": 39747153, "question_id": 39746936, "link": "https://stackoverflow.com/questions/39746936/rails-how-to-convert-img-src-to-image-tag-in-rails-app/39747153#39747153", "title": "Rails: How to convert &lt;img src= &gt; to image_tag in rails app", "body": "<pre><code>&lt;%= image_tag &quot;rand_front/#{@random_image}&quot;, style: 'height:50vw;width:100vw;margin-bottom:20px;' %&gt;\n</code></pre>\n<p><code>image_tag</code> will automatically add <code>assets</code> at start of the path</p>\n<p>check <a href=\"http://apidock.com/rails/ActionView/Helpers/AssetTagHelper/image_tag\" rel=\"nofollow noreferrer\">Image Tag</a>  for Documentation</p>\n"}, {"tags": [], "owner": {"reputation": 1670, "user_id": 6886515, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fcszT.jpg?s=128&g=1", "display_name": "Black Enigma", "link": "https://stackoverflow.com/users/6886515/black-enigma"}, "is_accepted": false, "score": 1, "last_activity_date": 1475067082, "creation_date": 1475067082, "answer_id": 39748108, "question_id": 39746936, "link": "https://stackoverflow.com/questions/39746936/rails-how-to-convert-img-src-to-image-tag-in-rails-app/39748108#39748108", "title": "Rails: How to convert &lt;img src= &gt; to image_tag in rails app", "body": "<p>If I am not mistaken you have a <code>rand_front</code> folder in your assets folder so you should call <code>image_tag(\"#{@random_image}\")</code> since by default the <code>image_tag</code> helper should check all the folders in the assets directory for the image name</p>\n\n<p>For the CSS properties you can consider using the <code>options</code> hash which would allow you to pass in the CSS properties as keys with your desired values</p>\n\n<p><code>image_tag(\"#{@random_image}\", height: 20, width: 20)</code> You can check out the documentation in the previous answer</p>\n"}, {"tags": [], "owner": {"reputation": 1339, "user_id": 8698679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1iU56.jpg?s=128&g=1", "display_name": "Jonathan Sanchez", "link": "https://stackoverflow.com/users/8698679/jonathan-sanchez"}, "is_accepted": false, "score": 1, "last_activity_date": 1506741268, "creation_date": 1506741268, "answer_id": 46499241, "question_id": 39746936, "link": "https://stackoverflow.com/questions/39746936/rails-how-to-convert-img-src-to-image-tag-in-rails-app/46499241#46499241", "title": "Rails: How to convert &lt;img src= &gt; to image_tag in rails app", "body": "<p>This is what Ruby on Rails is explicitly processing</p>\n\n<pre><code> &lt;%= image_tag(\"source\", {:style =&gt; \"width:100px;\"}) %&gt;\n</code></pre>\n\n<p>(meaning that Ruby allows you to use this code with out the ( { } ), </p>\n\n<p>For me, first starting out its important to know that this is how Ruby on Rails actually running the code.  </p>\n\n<p>In other words YES you could leave the ( { } ) formality out because Ruby will understand your code, hope that helps to clarify some...  </p>\n"}], "owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29372, "favorite_count": 3, "accepted_answer_id": 39747153, "answer_count": 3, "score": 10, "last_activity_date": 1597896259, "creation_date": 1475064219, "last_edit_date": 1595861532, "question_id": 39746936, "link": "https://stackoverflow.com/questions/39746936/rails-how-to-convert-img-src-to-image-tag-in-rails-app", "title": "Rails: How to convert &lt;img src= &gt; to image_tag in rails app", "body": "<p>This is my first post here and it might sound awfully stupid. Im building my first rails app.</p>\n\n<p>I have this line in my <code>index.html.erb</code></p>\n\n<pre><code>    &lt;img src=\"/assets/rand_front/&lt;%= @random_image%&gt;\", style='height:50vw;width:100vw;margin-bottom:20px;' &gt;\n</code></pre>\n\n<p>I want to use <code>image_tag</code>instead  of the <code>img src</code></p>\n\n<p>What is the correct way to wrap it around the code?</p>\n\n<p>So far I've tried <code>&lt;%= image_tag ( \"/assets/rand_front/&lt;%= @random_image%&gt;\", style='height:50vw;width:100vw;margin-bottom:20px;') %&gt;</code></p>\n\n<p>and \n<code>&lt;%= image_tag ( \"/assets/rand_front/&lt;%= @random_image%&gt;\"), style='height:50vw;width:100vw;margin-bottom:20px;' %&gt;</code></p>\n\n<p>and many other versions, but none seems to work, what am I doing wrong? and how should I write it properly?</p>\n\n<p>this <code>&lt;%= @random_image%&gt;</code> bit is taking this variable from the <code>index</code> method in the controller.</p>\n\n<pre><code>def index\n   @products = Product.all.order(created_at: :desc).group_by(&amp;:category_id)\n    @images  = [\"1.jpg\", \"2.jpg\", \"3.jpg\", \"4.jpg\", \"5.jpg\", \"6.jpg\", \"7.jpg\", \"8.jpg\", \"9.jpg\", \"10.jpg\"]\n    @random_no = rand(10)\n    @random_image = @images[@random_no]\nend\n</code></pre>\n"}, {"tags": ["ruby", "time", "milliseconds"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 2, "creation_date": 1475063680, "post_id": 39746672, "comment_id": 66789717, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1414951/how-do-i-get-elapsed-time-in-milliseconds-in-ruby\">How do I get elapsed time in milliseconds in Ruby?</a>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1475064185, "post_id": 39746672, "comment_id": 66790074, "body": "<i>&quot;I didn&#39;t find solutions that Ruby can handle calculating with milliseconds.&quot;</i> -- Here&#39;s the current timestamp, represented in milliseconds: <code>Time.now.to_f</code>"}, {"owner": {"reputation": 168, "user_id": 6612827, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PEmILoyFBFs/AAAAAAAAAAI/AAAAAAAAABM/8rOj8IIQc9Y/photo.jpg?sz=128", "display_name": "Quackerjack", "link": "https://stackoverflow.com/users/6612827/quackerjack"}, "edited": false, "score": 1, "creation_date": 1475064227, "post_id": 39746672, "comment_id": 66790112, "body": "I dont want current Milliseconds i want calculation of the Time Object with it.  I need a 1 day scope beginning and end of day. And that in described iso format"}, {"owner": {"reputation": 168, "user_id": 6612827, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PEmILoyFBFs/AAAAAAAAAAI/AAAAAAAAABM/8rOj8IIQc9Y/photo.jpg?sz=128", "display_name": "Quackerjack", "link": "https://stackoverflow.com/users/6612827/quackerjack"}, "edited": false, "score": 1, "creation_date": 1475064629, "post_id": 39746672, "comment_id": 66790401, "body": "Maybe my question is not clear enough. Is there a way to add 1 millisecond to a Time/DateTime Object?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475065453, "post_id": 39746672, "comment_id": 66791007, "body": "why would you need this?"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 1, "creation_date": 1475065602, "post_id": 39746672, "comment_id": 66791109, "body": "With your latest comment, we now know this is not a duplicate of the nominated examplar.  I&#39;ve edit the question according to that comment."}, {"owner": {"reputation": 168, "user_id": 6612827, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PEmILoyFBFs/AAAAAAAAAAI/AAAAAAAAABM/8rOj8IIQc9Y/photo.jpg?sz=128", "display_name": "Quackerjack", "link": "https://stackoverflow.com/users/6612827/quackerjack"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475066461, "post_id": 39746672, "comment_id": 66791753, "body": "Thx for editing!  @AndreyDeineko: Because i grab data from an webservice every day for that day. Our service provider build it with that iso formatting so i can define a begin and end time. When i do without that millisecond subtracted it is possible that i get data which was calculated for <code>2016-09-28T22:00:00.000Z</code> today as end scope and tomorrow as beginning scope."}], "answers": [{"tags": [], "owner": {"reputation": 168, "user_id": 6612827, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PEmILoyFBFs/AAAAAAAAAAI/AAAAAAAAABM/8rOj8IIQc9Y/photo.jpg?sz=128", "display_name": "Quackerjack", "link": "https://stackoverflow.com/users/6612827/quackerjack"}, "is_accepted": true, "score": 6, "last_activity_date": 1475067684, "last_edit_date": 1475067684, "creation_date": 1475065859, "answer_id": 39747612, "question_id": 39746672, "link": "https://stackoverflow.com/questions/39746672/add-1-millisecond-to-a-time-datetime-object/39747612#39747612", "title": "Add 1 millisecond to a Time/DateTime object", "body": "<p>Ok i found a solution. With real calculation i looks like.</p>\n\n<pre><code>time_end = ((Date.today + 1).to_time - 1/1001).utc.iso8601(3)\n=&gt; \"2016-09-28T21:59:59.999Z\"\n</code></pre>\n\n<p><strong>EXAMPLE</strong></p>\n\n<p>Formatting in iso8601(3) is only to show behavior.</p>\n\n<pre><code>irb(main):055:0&gt; Date.today.to_time.iso8601(3)\n=&gt; \"2016-09-28T00:00:00.000+02:00\n</code></pre>\n\n<p>Adding a millisecond\"</p>\n\n<pre><code>irb(main):058:0&gt; (Date.today.to_time + 1/1000.0).iso8601(3)\n=&gt; \"2016-09-28T00:00:00.001+02:00\"\n</code></pre>\n\n<p>Subtract a millisecond</p>\n\n<pre><code>!DONT USE, see result with subtracted 2 milliseconds!\nirb(main):060:0&gt; (Date.today.to_time - 1/1000.0).iso8601(3)\n=&gt; \"2016-09-27T23:59:59.998+02:00\"\n\nUSE\nirb(main):061:0&gt; (Date.today.to_time - 1/1001.0).iso8601(3)\n=&gt; \"2016-09-27T23:59:59.999+02:00\"\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 6612827, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PEmILoyFBFs/AAAAAAAAAAI/AAAAAAAAABM/8rOj8IIQc9Y/photo.jpg?sz=128", "display_name": "Quackerjack", "link": "https://stackoverflow.com/users/6612827/quackerjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3579, "favorite_count": 0, "accepted_answer_id": 39747612, "answer_count": 1, "score": 6, "last_activity_date": 1475067684, "creation_date": 1475063512, "last_edit_date": 1475065555, "question_id": 39746672, "link": "https://stackoverflow.com/questions/39746672/add-1-millisecond-to-a-time-datetime-object", "title": "Add 1 millisecond to a Time/DateTime object", "body": "<p>Is there a way to add 1 millisecond to a Time/DateTime object in Ruby?</p>\n\n<p>For an Webservice Request i need a time scoping with milliseconds:</p>\n\n<pre><code>irb(main):034:0&gt; time_start = Date.today.to_time.utc.iso8601(3)\n=&gt; \"2016-09-27T22:00:00.000Z\"\n\nirb(main):035:0&gt; time_end = ((Date.today + 1).to_time).utc.iso8601(3)\n=&gt; \"2016-09-28T22:00:00.000Z\"\n-- or --\nirb(main):036:0&gt; time_end = ((Date.today + 1).to_time - 1).utc.iso8601(3)\n=&gt; \"2016-09-28T21:59:59.000Z\"\n</code></pre>\n\n<p>So I'm near my prefered solution, but time_end should be <code>2016-09-28T21:59:59.999Z</code>.</p>\n\n<p>I didn't find solutions that Ruby can handle calculating with milliseconds. I only did it with strftime, but it would be great if there is a possibility to calculate.</p>\n\n<pre><code>-- This works, but hard coded --\ntime_end = ((Date.today + 1).to_time - 1).utc.strftime(\"%Y-%m-%dT%H:%M:%S.999Z\")\n=&gt; \"2016-09-28T21:59:59.999Z\"\n</code></pre>\n\n<p>FYI: I'm on plain Ruby, no Rails.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "swagger", "swagger-ui", "http-authentication"], "comments": [{"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475061939, "post_id": 39745970, "comment_id": 66788549, "body": "do use use devise? you can mount it only for users based on some criteria."}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475061961, "post_id": 39745970, "comment_id": 66788569, "body": "No i am not using devise"}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475062062, "post_id": 39745970, "comment_id": 66788636, "body": "you don&#39;t have any authentication?"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475062255, "post_id": 39745970, "comment_id": 66788760, "body": "have authentication. Its authentication for page not login etc"}], "answers": [{"comments": [{"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475062029, "post_id": 39746113, "comment_id": 66788620, "body": "seems like very bad design, doesn&#39;t it?"}, {"owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475062625, "post_id": 39746113, "comment_id": 66789006, "body": "Why? If it will be plugged under unobvious route, IMHO can be an appriopriate solution."}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475062868, "post_id": 39746113, "comment_id": 66789159, "body": "As for me I don&#39;t like to mess up application logic with HTTP server configuration. Maybe I don&#39;t understand something is it somehow better than using rails http basic authentication?"}, {"owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 1, "creation_date": 1475064901, "post_id": 39746113, "comment_id": 66790606, "body": "True, but as I understood, he can not do it in Rails controller, because the request doesn&#39;t go through a controller but directly access the pregenerated files in <code>public</code> dir."}], "tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": false, "score": 1, "last_activity_date": 1475061991, "creation_date": 1475061991, "answer_id": 39746113, "question_id": 39745970, "link": "https://stackoverflow.com/questions/39745970/how-to-secure-swagger-page-in-rails/39746113#39746113", "title": "How to secure swagger page in rails?", "body": "<p>The HTTP autentication can be done on Nginx (or Apache) level.</p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1475061991, "creation_date": 1475061594, "question_id": 39745970, "link": "https://stackoverflow.com/questions/39745970/how-to-secure-swagger-page-in-rails", "title": "How to secure swagger page in rails?", "body": "<p>In my project there is a documentation of API's by using swagger which URL is like <strong>http//www.example.com/api</strong>. Issue is that these are public and anyone can see that. I want to secure this link so that anyone can't see these API's.</p>\n\n<p>I see <code>http_authentication</code> and <code>basic_authentication</code> but it can't work on swagger because it is in public. How I secure that page?</p>\n"}, {"tags": ["mysql", "ruby", "ssh"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 345923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2aeac0cb448f4a728ae92b0d9f74c73?s=128&d=identicon&r=PG", "display_name": "devyn furthermore", "link": "https://stackoverflow.com/users/345923/devyn-furthermore"}, "is_accepted": false, "score": 0, "last_activity_date": 1475577369, "creation_date": 1475577369, "answer_id": 39850084, "question_id": 39745900, "link": "https://stackoverflow.com/questions/39745900/mysql2-error-on-reading-inital-communication-packets/39850084#39850084", "title": "mysql2: error on reading inital communication packets", "body": "<p>Ok, I finally have the solution. Coding was OK, another provider worked fine. So not always it is wrong code. Finally, somebody else was to blame!\nHave a nice day,\nDevyn</p>\n"}], "owner": {"reputation": 1, "user_id": 345923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2aeac0cb448f4a728ae92b0d9f74c73?s=128&d=identicon&r=PG", "display_name": "devyn furthermore", "link": "https://stackoverflow.com/users/345923/devyn-furthermore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475577369, "creation_date": 1475061377, "question_id": 39745900, "link": "https://stackoverflow.com/questions/39745900/mysql2-error-on-reading-inital-communication-packets", "title": "mysql2: error on reading inital communication packets", "body": "<p>following setup: ruby script on raspbian, external database (connection with ssh and msyql2).\nProblem: Gateway and port generation is OK, but trying to establish a mysql connection fails everytime with \"Lost connection to MySQL server at 'reading initial communication packet', system error: 0\".\nStackoverflowing and google tips didn't help this far, so here am I. My code below:</p>\n\n<pre><code>gateway = Net::SSH::Gateway.new('external_server', 'username', {:password =&gt; 'password', :port =&gt; '22'})\nport = gateway.open(\"127.0.0.1\", 3306, 3307)\n#if gateway and port generation successful\n  database = Mysql2::Client.new(:host =&gt; \"127.0.0.1\", :port =&gt; port, :username =&gt; 'user_extern', :password =&gt; 'password_extern', :database =&gt; 'database_extern')\n  #do some stuff with database.query(\"\")\ndatabase.close\ngateway.close(port)\n</code></pre>\n\n<p>and the \"Mysql2::Client.new\" fails with  described error.\nAlready tried: \n- restart\n- unbind 127.0.0.1\n- bind to 0.0.0.0\n- took \"localhost\"\n- changed hosts.allow to ALL</p>\n\n<p>Maybe you can add something to that list which I overlooked or I should have a try with?\n(Note: if/else and exception handling have been removed for the sake of readability)</p>\n\n<p>Thanks in advance!\n/Devyn</p>\n"}, {"tags": ["ruby", "openstack", "openstack-swift"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6893287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86ea03f496fcc6ce2beec5572859d6c4?s=128&d=identicon&r=PG&f=1", "display_name": "umar sheikh", "link": "https://stackoverflow.com/users/6893287/umar-sheikh"}, "is_accepted": false, "score": 0, "last_activity_date": 1475152698, "creation_date": 1475152698, "answer_id": 39770565, "question_id": 39745635, "link": "https://stackoverflow.com/questions/39745635/ruby-openstack-swift-client-that-works-with-v3-identify-version/39770565#39770565", "title": "ruby openstack swift client that works with v3 identify version", "body": "<p>So it looks like none of the ruby sdks work as of now with keystone v3.</p>\n\n<p>i figured out that i need to do three requests only:\n1) login\n2) upload contents\n3) download data</p>\n\n<p>so i decided to use curl and plain old ruby for now to work with openstack.</p>\n"}], "owner": {"reputation": 11, "user_id": 6893287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86ea03f496fcc6ce2beec5572859d6c4?s=128&d=identicon&r=PG&f=1", "display_name": "umar sheikh", "link": "https://stackoverflow.com/users/6893287/umar-sheikh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475152698, "creation_date": 1475060566, "question_id": 39745635, "link": "https://stackoverflow.com/questions/39745635/ruby-openstack-swift-client-that-works-with-v3-identify-version", "title": "ruby openstack swift client that works with v3 identify version", "body": "<p>I have nearly tried every gem listed on <a href=\"https://wiki.openstack.org/wiki/SDKs\" rel=\"nofollow\">https://wiki.openstack.org/wiki/SDKs</a> to make a client work with openstack, but so far none of them is working.</p>\n\n<p>Is there any ruby swift client that can work with openstack? my openstack has the following environment variables</p>\n\n<pre><code>export OS_PROJECT_DOMAIN_NAME=default\nexport OS_USER_DOMAIN_NAME=default\nexport OS_PROJECT_NAME=somename\nexport OS_USERNAME=somename\nexport OS_PASSWORD=somelongpassword\nexport OS_AUTH_URL=http://someurl:5000/v3\nexport OS_IDENTITY_API_VERSION=3\nexport OS_IMAGE_API_VERSION=2\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "redmine"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1475058884, "post_id": 39744027, "comment_id": 66786404, "body": "It looks like there was a <a href=\"https://github.com/rubygems/rubygems/issues/1420\" rel=\"nofollow noreferrer\">bug</a> reported a while ago, which has been fixed. Try running <code>gem update --system</code> to update rubygems. If this issue is happening within a specific bundle, then try: <code>bundle clean; gem install executable-hooks</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1475058894, "post_id": 39744027, "comment_id": 66786410, "body": "Also, by the way, ruby <code>2.3.3</code> hasn&#39;t been released yet; looking at the stack trace, you&#39;re using <code>2.3.0</code>. You may want to fix that title :)"}], "owner": {"reputation": 1, "user_id": 6892894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c13c35d89f645d39476602fef920061d?s=128&d=identicon&r=PG&f=1", "display_name": "do_link", "link": "https://stackoverflow.com/users/6892894/do-link"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475114535, "creation_date": 1475056491, "last_edit_date": 1475114535, "question_id": 39744027, "link": "https://stackoverflow.com/questions/39744027/warble-config-error-for-redmine-3-3-ruby-2-3-0", "title": "warble config error for Redmine 3.3, ruby 2.3.0", "body": "<p>I installed warbler gem to package rails applications as Java web application .war files.</p>\n\n<p>but i got error after type command:</p>\n\n<p><code>warble config</code></p>\n\n<p>Here is the error message:</p>\n\n<pre><code>/home/run/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in `method_missing': undefined method `this' for #&lt;Gem::Specification:0x117d47c warbler-2.0.3&gt; (NoMethodError)\n    from /home/run/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:1057:in `find_active_stub_by_path'\n    from /home/run/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:64:in `require'\n    from /home/run/.rvm/gems/ruby-2.3.0/gems/warbler-2.0.3/bin/warble:10:in `&lt;top (required)&gt;'\n    from /home/run/.rvm/gems/ruby-2.3.0/bin/warble:23:in `load'\n    from /home/run/.rvm/gems/ruby-2.3.0/bin/warble:23:in `&lt;main&gt;'\n    from /home/run/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `eval'\n    from /home/run/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>Thx for Tom Lord.  After updating gem, the \"warble config\" was ok.\nBut when i type :</p>\n\n<pre><code>warble\n</code></pre>\n\n<p>I got another error:</p>\n\n<pre><code> [run@localhost redmine-3.3]$ gem update --system\nLatest version currently installed. Aborting.\n[run@localhost redmine-3.3]$ warble \n/home/run/.rvm/gems/ruby-2.3.0/gems/htmlentities-4.3.1/lib/htmlentities/mappings/expanded.rb:465: warning: key \"inodot\" is duplicated and overwritten on line 466\napplication directory `lang' does not exist or is not a directory; skipping\nwarble aborted!\n/home/run/.rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/errors.rb:41:in `build_message': undefined method `size' for #&lt;Bundler::SpecSet:0x0000000240beb8&gt; (NoMethodError)\n    from /home/run/.rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/errors.rb:34:in `message'\n    from /home/run/.rvm/gems/ruby-2.3.0/gems/rake-11.3.0/lib/rake/application.rb:224:in `display_exception_message_details'\n    from /home/run/.rvm/gems/ruby-2.3.0/gems/rake-11.3.0/lib/rake/application.rb:211:in `display_exception_details'\n    from /home/run/.rvm/gems/ruby-2.3.0/gems/rake-11.3.0/lib/rake/application.rb:200:in `display_error_message'\n    from /home/run/.rvm/gems/ruby-2.3.0/gems/rake-11.3.0/lib/rake/application.rb:187:in `rescue in standard_exception_handling'\n    from /home/run/.rvm/gems/ruby-2.3.0/gems/rake-11.3.0/lib/rake/application.rb:178:in `standard_exception_handling'\n    from /home/run/.rvm/gems/ruby-2.3.0/gems/rake-11.3.0/lib/rake/application.rb:77:in `run'\n    from /home/run/.rvm/gems/ruby-2.3.0/gems/warbler-2.0.3/lib/warbler/application.rb:79:in `run'\n    from /home/run/.rvm/gems/ruby-2.3.0/gems/warbler-2.0.3/lib/warbler/application.rb:74:in `run'\n    from /home/run/.rvm/gems/ruby-2.3.0/gems/warbler-2.0.3/bin/warble:11:in `&lt;top (required)&gt;'\n    from /home/run/.rvm/gems/ruby-2.3.0/bin/warble:23:in `load'\n    from /home/run/.rvm/gems/ruby-2.3.0/bin/warble:23:in `&lt;main&gt;'\n    from /home/run/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `eval'\n    from /home/run/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475056651, "post_id": 39743951, "comment_id": 66784793, "body": "there <b>is no</b> question in your question"}, {"owner": {"reputation": 45, "user_id": 3601765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6b987c0f19f94d124d4dc94395054de?s=128&d=identicon&r=PG&f=1", "display_name": "michaelprog", "link": "https://stackoverflow.com/users/3601765/michaelprog"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475056923, "post_id": 39743951, "comment_id": 66785022, "body": "hi @AndreyDeineko, I added a question. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 3601765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6b987c0f19f94d124d4dc94395054de?s=128&d=identicon&r=PG&f=1", "display_name": "michaelprog", "link": "https://stackoverflow.com/users/3601765/michaelprog"}, "edited": false, "score": 0, "creation_date": 1475058583, "post_id": 39744738, "comment_id": 66786213, "body": "hi @Sergio, thanks for the advice. It works properly in the rspec."}, {"owner": {"reputation": 45, "user_id": 3601765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6b987c0f19f94d124d4dc94395054de?s=128&d=identicon&r=PG&f=1", "display_name": "michaelprog", "link": "https://stackoverflow.com/users/3601765/michaelprog"}, "edited": false, "score": 0, "creation_date": 1475061068, "post_id": 39744738, "comment_id": 66787939, "body": "yes, it works now. I just followed your recommendations. Thanks for the help @Sergio."}, {"owner": {"reputation": 45, "user_id": 3601765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6b987c0f19f94d124d4dc94395054de?s=128&d=identicon&r=PG&f=1", "display_name": "michaelprog", "link": "https://stackoverflow.com/users/3601765/michaelprog"}, "edited": false, "score": 0, "creation_date": 1475061543, "post_id": 39744738, "comment_id": 66788294, "body": "I accept it but it doesn&#39;t reflect publicly because my reputation is below 15."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 45, "user_id": 3601765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6b987c0f19f94d124d4dc94395054de?s=128&d=identicon&r=PG&f=1", "display_name": "michaelprog", "link": "https://stackoverflow.com/users/3601765/michaelprog"}, "edited": false, "score": 0, "creation_date": 1475062739, "post_id": 39744738, "comment_id": 66789084, "body": "@micmicsuarez: hm, interesting. Never heard of this. You&#39;re talking about the green checkmark, right?"}, {"owner": {"reputation": 45, "user_id": 3601765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6b987c0f19f94d124d4dc94395054de?s=128&d=identicon&r=PG&f=1", "display_name": "michaelprog", "link": "https://stackoverflow.com/users/3601765/michaelprog"}, "edited": false, "score": 0, "creation_date": 1475065443, "post_id": 39744738, "comment_id": 66791002, "body": "sorry @Sergio, I clicked the wrong button. It is now accepted. Thanks :)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 3, "last_activity_date": 1475058160, "creation_date": 1475058160, "answer_id": 39744738, "question_id": 39743951, "link": "https://stackoverflow.com/questions/39743951/how-can-i-mock-the-creation-of-directory-in-rspec/39744738#39744738", "title": "How can I mock the creation of directory in rspec?", "body": "<ol>\n<li>Use <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/fileutils/rdoc/FileUtils.html#method-c-mkdir\" rel=\"nofollow\">ruby tools</a> for creating directory instead of shelling out.</li>\n<li>Move your expectation into the fakefs block.</li>\n</ol>\n"}], "owner": {"reputation": 45, "user_id": 3601765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6b987c0f19f94d124d4dc94395054de?s=128&d=identicon&r=PG&f=1", "display_name": "michaelprog", "link": "https://stackoverflow.com/users/3601765/michaelprog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 939, "favorite_count": 0, "accepted_answer_id": 39744738, "answer_count": 1, "score": 3, "last_activity_date": 1475058160, "creation_date": 1475056353, "last_edit_date": 1475057750, "question_id": 39743951, "link": "https://stackoverflow.com/questions/39743951/how-can-i-mock-the-creation-of-directory-in-rspec", "title": "How can I mock the creation of directory in rspec?", "body": "<p>This is the method that creates a directory.</p>\n\n<pre><code>def create_directory(path)\n   system 'mkdir', '-p', path\nend\n</code></pre>\n\n<p>I created an <code>rspec</code> for this method and used <code>fakefs</code> to mock the creation of directory.</p>\n\n<pre><code>it 'should create directory given path as parameter' do\n     FakeFS do\n       create_directory(DIRECTORY_PATH)\n     end\n     expect(File.exists?(DIRECTORY_PATH)).to be_truthy\nend\n</code></pre>\n\n<p>When I execute the <code>rspec</code> command, I got this error.</p>\n\n<pre><code>    Failures:\n\n      1) common Test for common method use should create file given file as parameter\n         Failure/Error: expect(File.exists?(DIRECTORY_PATH)).to be_truthy\n\n           expected: truthy value\n                got: false\n         # ./spec/unit/lib/common_spec.rb:16:in `block (3 levels) in &lt;top (required)&gt;'\n\n    Finished in 0.01474 seconds (files took 0.10763 seconds to load)\n    2 examples, 1 failure\n\n    Failed examples:\n\n    rspec ./spec/unit/lib/common_spec.rb:12 # common Test for common method use should create file given file as parameter\n</code></pre>\n\n<p>How to mock the creation of directory using rspec or fakefs?</p>\n"}, {"tags": ["ruby", "minitest", "approximate"], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 7, "last_activity_date": 1475055582, "last_edit_date": 1475055582, "creation_date": 1475055181, "answer_id": 39743449, "question_id": 39743448, "link": "https://stackoverflow.com/questions/39743448/what-is-the-difference-between-minitests-assert-in-delta-and-assert-in-epsilon/39743449#39743449", "title": "What is the difference between MiniTest&#39;s assert_in_delta and assert_in_epsilon methods?", "body": "<p>The key difference is:</p>\n\n<ul>\n<li><code>assert_in_delta</code> is for <strong>absolute</strong> errors.</li>\n<li><code>assert_in_epsilon</code> is for <strong>relative</strong> errors.</li>\n</ul>\n\n<p>These are two different types of <a href=\"https://en.wikipedia.org/wiki/Approximation_error\" rel=\"noreferrer\">approximation error</a>:</p>\n\n<blockquote>\n  <p>The absolute error is the magnitude of the difference between the exact value and the approximation.</p>\n  \n  <p>The relative error is the absolute error divided by the magnitude of the exact value.</p>\n</blockquote>\n\n<hr>\n\n<p><code>assert_in_delta</code> is easiest to understand, and will most commonly be used in tests.</p>\n\n<p>In the documentation's example: <code>assert_in_delta Math::PI, (22.0 / 7.0), 0.01</code>, this assertion will <strong>pass</strong> because <code>22.0/7 - Math::PI == 0.001264...</code>, which is less than the allowed <code>delta</code> of <code>0.01</code>.</p>\n\n<hr>\n\n<p>(From <a href=\"https://en.wikipedia.org/wiki/Approximation_error#Uses_of_relative_error\" rel=\"noreferrer\">wikipedia</a>)</p>\n\n<p><code>assert_in_epsilon</code> is often used to compare approximations of numbers of wildly differing size.</p>\n\n<p>For example, approximating the number <code>1,000</code> with an absolute error of <code>3</code> is, in most applications, much worse than approximating the number <code>1,000,000</code> with an absolute error of <code>3</code>; in the first case the relative error is <code>0.003</code> and in the second it is only <code>0.000003</code>.</p>\n\n<p>To write this example in <code>MiniTest</code>, suppose we have an array of two values which we want to check are \"approximately equal to\" <code>1,000</code> and <code>1,000,000</code> respectively. We could write the following:</p>\n\n<pre><code># Using the default `epsilon` of 0.001\nassert_in_epsilon(1_000, actual[0])\nassert_in_epsilon(1_000_000, actual[1])\n</code></pre>\n\n<p>This would be functionally equivalent to writing:</p>\n\n<pre><code>assert_in_delta(1_000, actual[0], 1)\nassert_in_delta(1_000_000, actual[1], 1000)\n</code></pre>\n"}], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1059, "favorite_count": 0, "accepted_answer_id": 39743449, "answer_count": 1, "score": 8, "last_activity_date": 1475055582, "creation_date": 1475055181, "question_id": 39743448, "link": "https://stackoverflow.com/questions/39743448/what-is-the-difference-between-minitests-assert-in-delta-and-assert-in-epsilon", "title": "What is the difference between MiniTest&#39;s assert_in_delta and assert_in_epsilon methods?", "body": "<p>Here is <a href=\"http://apidock.com/ruby/MiniTest/Assertions/assert_in_delta\" rel=\"noreferrer\">documentation for <code>assert_in_delta</code></a>:</p>\n\n<blockquote>\n<pre><code>assert_in_delta(exp, act, delta = 0.001, msg = nil) public\n</code></pre>\n  \n  <p>For comparing Floats. Fails unless exp and act are within delta of each other.</p>\n\n<pre><code>assert_in_delta Math::PI, (22.0 / 7.0), 0.01\n</code></pre>\n</blockquote>\n\n<p>And here is the <a href=\"http://apidock.com/ruby/MiniTest/Assertions/assert_in_epsilon\" rel=\"noreferrer\">documentation for <code>assert_in_epsilon</code></a></p>\n\n<blockquote>\n<pre><code>assert_in_epsilon(a, b, epsilon = 0.001, msg = nil) public\n</code></pre>\n  \n  <p>For comparing Floats. Fails unless exp and act have a relative error less than epsilon.</p>\n</blockquote>\n\n<p>These look very similar; what exactly is the difference? When would you use one method over the other?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1475055664, "post_id": 39743299, "comment_id": 66783967, "body": "What should be returned if the string is empty?"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1492778684, "post_id": 39743299, "comment_id": 74137941, "body": "See also <a href=\"http://stackoverflow.com/questions/5661466/test-if-string-is-a-number-in-ruby-on-rails/5661695\" title=\"test if string is a number in ruby on rails\">stackoverflow.com/questions/5661466/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 4, "creation_date": 1475065455, "post_id": 39743495, "comment_id": 66791008, "body": "This is smart. You can also go with a variation of your answer and @Stefan&#39;s suggestion <code>string.scan(&#47;^\\d+$&#47;).any?</code> which reads quite nicely I think."}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1475067475, "post_id": 39743495, "comment_id": 66792520, "body": "As for me the answer as it is now is more first-look-understandable ;) Just looking for nondigit symbol. If there isn&#39;t one - check has passed."}], "tags": [], "owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "is_accepted": true, "score": 37, "last_activity_date": 1557226645, "last_edit_date": 1557226645, "creation_date": 1475055274, "answer_id": 39743495, "question_id": 39743299, "link": "https://stackoverflow.com/questions/39743299/check-if-a-string-contains-only-digits-in-ruby/39743495#39743495", "title": "Check if a string contains only digits in ruby", "body": "<p>You can try the following</p>\n\n<pre><code>def check_string(string)\n  string.scan(/\\D/).empty?\nend\n</code></pre>\n\n<p>It would be truthy if string contains only digits or if it is an empty string. Otherwise returns false.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1475057672, "post_id": 39743621, "comment_id": 66785593, "body": "Wouldn&#39;t work for <code>string = &#39;0&#39;</code> \u2013 why not simply <code>&#47;^\\d+$&#47;</code> or <code>&#47;\\A\\d+\\z&#47;</code>?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1475057787, "post_id": 39743621, "comment_id": 66785666, "body": "@Stefan <code>&#47;^\\d+$&#47;</code> makes perfect sense!"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 2, "creation_date": 1475060020, "post_id": 39743621, "comment_id": 66787214, "body": "@AndreyDeineko This fails the premise for the string &quot;foobar\\n123&quot; since your regex matches here. You actually want to use <code>&#47;\\A\\d+\\z&#47;</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1475074866, "post_id": 39743621, "comment_id": 66798459, "body": "seems this could be simplified to just <code>string =~ &#47;\\A\\d+\\z&#47; ? true : false</code> this handles all the cases and will return false on an empty string since it contains no numbers."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 1, "last_activity_date": 1475060086, "last_edit_date": 1475060086, "creation_date": 1475055605, "answer_id": 39743621, "question_id": 39743299, "link": "https://stackoverflow.com/questions/39743299/check-if-a-string-contains-only-digits-in-ruby/39743621#39743621", "title": "Check if a string contains only digits in ruby", "body": "<p>You can use Regexp for it:</p>\n\n<pre><code>def check_string(string)\n  raise 'Empty string passed' if string.empty?\n\n  /\\A\\d+\\z/ === string\nend\n\ncheck_string '123'\n#=&gt; true\ncheck_string '0123'\n#=&gt; true\ncheck_string '0'\n#=&gt; true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1563827460, "last_edit_date": 1563827460, "creation_date": 1475220550, "answer_id": 39786002, "question_id": 39743299, "link": "https://stackoverflow.com/questions/39743299/check-if-a-string-contains-only-digits-in-ruby/39786002#39786002", "title": "Check if a string contains only digits in ruby", "body": "<pre><code>def check_string(str)\n  str !~ /\\D/\nend\n\ncheck_string '123'\n  #=&gt; true\ncheck_string ''\n  #=&gt; true\ncheck_string '1a2'\n  #=&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10280, "user_id": 874283, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/8bbcdae54d8cd930405e57162e1522d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Xu", "link": "https://stackoverflow.com/users/874283/zack-xu"}, "is_accepted": false, "score": 2, "last_activity_date": 1536926109, "creation_date": 1536926109, "answer_id": 52331481, "question_id": 39743299, "link": "https://stackoverflow.com/questions/39743299/check-if-a-string-contains-only-digits-in-ruby/52331481#52331481", "title": "Check if a string contains only digits in ruby", "body": "<p>A number can be negative, or a float.  So if these are allowed, consider this solution:</p>\n\n<pre><code>def is_numberic?(str)\n    str == \"#{str.to_f}\" || str == \"#{str.to_i}\"\nend\n</code></pre>\n\n<p>some input which evaluate to true</p>\n\n<pre><code>pry(main)&gt; is_numberic? '5'\n=&gt; true\npry(main)&gt; is_numberic? '58127721'\n=&gt; true\npry(main)&gt; is_numberic? '58127721.737673'\n=&gt; true\npry(main)&gt; is_numberic? '0'\n=&gt; true\npry(main)&gt; is_numberic? '1818'\n=&gt; true\npry(main)&gt; is_numberic? '0.1'\n=&gt; true\npry(main)&gt; is_numberic? '0.0'\n=&gt; true\npry(main)&gt; is_numberic? '11.29'\n=&gt; true\npry(main)&gt; is_numberic? '-0.12'\n=&gt; true\npry(main)&gt; is_numberic? '-29'\n=&gt; true\n</code></pre>\n\n<p>the input which evaluate to false</p>\n\n<pre><code>pry(main)&gt; is_numberic? '10 years'\n=&gt; false\npry(main)&gt; is_numberic? '01'\n=&gt; false\npry(main)&gt; is_numberic? '00'\n=&gt; false\npry(main)&gt; is_numberic? '0.10'\n=&gt; false\npry(main)&gt; is_numberic? ''\n=&gt; false\n</code></pre>\n\n<p>As you can see, there're several cases which probably should be supported, eg <code>'0.10'</code>, but are not.  In this case, the permitted input is <code>'0.1'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 9152071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef60d8177160b33b53d719a576568b3?s=128&d=identicon&r=PG&f=1", "display_name": "Tilak M Divakar", "link": "https://stackoverflow.com/users/9152071/tilak-m-divakar"}, "is_accepted": false, "score": 1, "last_activity_date": 1546897077, "creation_date": 1546897077, "answer_id": 54082241, "question_id": 39743299, "link": "https://stackoverflow.com/questions/39743299/check-if-a-string-contains-only-digits-in-ruby/54082241#54082241", "title": "Check if a string contains only digits in ruby", "body": "<p>We can also use the \"match\" function to do this.</p>\n\n<pre><code>\"1234\".match(/\\D/)\n#=&gt; nil\n\"1234foo\".match(/\\D/)\n#=&gt; #&lt;MatchData \"f\"&gt;\n</code></pre>\n\n<p><a href=\"https://apidock.com/ruby/String/match\" rel=\"nofollow noreferrer\">match (String) - APIdock</a></p>\n"}, {"comments": [{"owner": {"reputation": 280, "user_id": 4173627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WVGiZ.png?s=128&g=1", "display_name": "IMP1", "link": "https://stackoverflow.com/users/4173627/imp1"}, "edited": false, "score": 2, "creation_date": 1584630955, "post_id": 60760002, "comment_id": 107500922, "body": "Your <code>str2</code> is not a string. Try this with <code>str2 = &quot;9&quot;</code> and see if it works (It does not)."}], "tags": [], "owner": {"reputation": 109, "user_id": 163838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619d625bb46122d40efe72b5e26b896b?s=128&d=identicon&r=PG", "display_name": "Chnikki", "link": "https://stackoverflow.com/users/163838/chnikki"}, "is_accepted": false, "score": -3, "last_activity_date": 1584630770, "creation_date": 1584630770, "answer_id": 60760002, "question_id": 39743299, "link": "https://stackoverflow.com/questions/39743299/check-if-a-string-contains-only-digits-in-ruby/60760002#60760002", "title": "Check if a string contains only digits in ruby", "body": "<p>If anyone is searching for another way to determine if string is numeric -> is to use \"is_a? Numeric\". <a href=\"https://apidock.com/ruby/Object/is_a%3F\" rel=\"nofollow noreferrer\">Is_a? reference documentation</a></p>\n\n<pre><code>\"namaste\".is_a? Numeric\n=&gt; false\n\n6.is_a? Numeric\n=&gt; true\n\nstr1 = \"foo\"\nstr2 = 9\n\nstr1.is_a? Numeric\n=&gt; false\nstr2.is_a? Numeric\n=&gt; true\n</code></pre>\n\n<p>You can also use:</p>\n\n<pre><code>7.is_a?(Numeric)\n=&gt; true\n\n\"too\".is_a?(Numeric)\n=&gt; false\n</code></pre>\n\n<p>Basically it's determining if a class is a type of class object.  I just found this and thought I would share.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 14698397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8pY7J.png?s=128&g=1", "display_name": "Kaiizer", "link": "https://stackoverflow.com/users/14698397/kaiizer"}, "is_accepted": false, "score": 2, "last_activity_date": 1613037672, "creation_date": 1613037672, "answer_id": 66152473, "question_id": 39743299, "link": "https://stackoverflow.com/questions/39743299/check-if-a-string-contains-only-digits-in-ruby/66152473#66152473", "title": "Check if a string contains only digits in ruby", "body": "<p>this is my proposition for detecting if it's a float number</p>\n<pre><code>def check(string)\n  scan = string.scan(/\\D/)\n  scan.size == 0 || (scan.size == 1 &amp;&amp; scan.first == &quot;.&quot;) # or &quot;,&quot; depend on your separator\nend\n</code></pre>\n<p>example of use:</p>\n<pre><code>check(&quot;123&quot;) =&gt; true\ncheck(&quot;12.3&quot;) =&gt; true\ncheck(&quot;12e3&quot;) =&gt; false\ncheck(&quot;12.3.2&quot;) =&gt; false\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 5944173, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/17c020e20b93d05e245104b055d7ab69?s=128&d=identicon&r=PG&f=1", "display_name": "Palak Chaudhary", "link": "https://stackoverflow.com/users/5944173/palak-chaudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17842, "favorite_count": 3, "accepted_answer_id": 39743495, "answer_count": 7, "score": 13, "last_activity_date": 1613037672, "creation_date": 1475054849, "last_edit_date": 1475058155, "question_id": 39743299, "link": "https://stackoverflow.com/questions/39743299/check-if-a-string-contains-only-digits-in-ruby", "title": "Check if a string contains only digits in ruby", "body": "<p>I have a string which is passed as a parameter to a function. Here, I want to check if the string contains only numbers. So I had a check like below:</p>\n\n<pre><code>def check_string(string)\n  result = false\n  if string.to_i.to_s.eql? string\n    result =  true\n  end\n  result\nend\n</code></pre>\n\n<p>But the problem arises when a string starts with 0. In that case, a false is returned.</p>\n\n<pre><code>check_string('123')  #=&gt; true\ncheck_string('0123') #=&gt; false\n</code></pre>\n\n<p>How can I solve this issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 1, "creation_date": 1475054317, "post_id": 39742918, "comment_id": 66783010, "body": "At least you should show us your nginx configuration, your application server (e.g. puma, passenger, ...) configuration and your Rails  controllers (maybe models too, depending on whether you have image post-processes)."}, {"owner": {"reputation": 1970, "user_id": 4195825, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d5a6be8edab9c465df099f8c74b3f576?s=128&d=identicon&r=PG&f=1", "display_name": "px06", "link": "https://stackoverflow.com/users/4195825/px06"}, "edited": false, "score": 0, "creation_date": 1475055007, "post_id": 39742918, "comment_id": 66783505, "body": "<a href=\"http://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size\" rel=\"nofollow noreferrer\"><code>client_max_body_size</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 48, "user_id": 4172006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5DFc.jpg?s=128&g=1", "display_name": "sudhakar", "link": "https://stackoverflow.com/users/4172006/sudhakar"}, "is_accepted": false, "score": 2, "last_activity_date": 1475054967, "creation_date": 1475054967, "answer_id": 39743347, "question_id": 39742918, "link": "https://stackoverflow.com/questions/39742918/while-uploading-heavy-images-server-takes-too-much-time-and-then-it-gives-blank/39743347#39743347", "title": "while uploading heavy images, server takes too much time and then it gives blank page(nginx, rails)", "body": "<p>Use client_max_body_size 100M; Also increase the timeout.</p>\n\n<p>nginx error log will indicate the root cause. Please check that too</p>\n"}], "owner": {"reputation": 3, "user_id": 6168534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb55bd8c400ebb6f4a04470e84ca9a5b?s=128&d=identicon&r=PG&f=1", "display_name": "Sunil Kumar", "link": "https://stackoverflow.com/users/6168534/sunil-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475054967, "creation_date": 1475053952, "question_id": 39742918, "link": "https://stackoverflow.com/questions/39742918/while-uploading-heavy-images-server-takes-too-much-time-and-then-it-gives-blank", "title": "while uploading heavy images, server takes too much time and then it gives blank page(nginx, rails)", "body": "<p>When I upload heavy / more than 6 images, nginx server goes down and it gives blank page. what should I do in this case? Is there any configuration needed for nginx?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1475050752, "post_id": 39741410, "comment_id": 66780597, "body": "Are you <i>sure</i> about being on <code>5.0.0.1</code>, not <code>5.0.0.0</code>? I&#39;ve just been reading through <a href=\"https://github.com/rails/rails/issues/25185\" rel=\"nofollow noreferrer\">this issue</a> and the associated pull requests; it looks like the bug has been fixed? I&#39;ll try to recreate it as you describe, though..."}, {"owner": {"reputation": 343, "user_id": 3624306, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/223302169/picture?type=large", "display_name": "TheMinimalCriminal", "link": "https://stackoverflow.com/users/3624306/theminimalcriminal"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1475051528, "post_id": 39741410, "comment_id": 66781063, "body": "If I run <code>rails -v</code> I get <code>Rails 5.0.0.1</code>, and running <code>gem list rails -all</code> shows just 5.0.0.1 installed"}, {"owner": {"reputation": 343, "user_id": 3624306, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/223302169/picture?type=large", "display_name": "TheMinimalCriminal", "link": "https://stackoverflow.com/users/3624306/theminimalcriminal"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1475052000, "post_id": 39741410, "comment_id": 66781402, "body": "Gemfile lists <code>gem &#39;rails&#39;, &#39;~&gt; 5.0.0&#39;, &#39;&gt;= 5.0.0.1&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1374, "user_id": 265333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/98166dc4b406cd4093a80da28c42759d?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/265333/aaron"}, "edited": false, "score": 1, "creation_date": 1484055702, "post_id": 39829685, "comment_id": 70344743, "body": "Can confirm that updating to 5.0.1 did fix this issue"}, {"owner": {"reputation": 4659, "user_id": 3164751, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jLKLy.jpg?s=128&g=1", "display_name": "Amrinder Singh", "link": "https://stackoverflow.com/users/3164751/amrinder-singh"}, "reply_to_user": {"reputation": 1374, "user_id": 265333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/98166dc4b406cd4093a80da28c42759d?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/265333/aaron"}, "edited": false, "score": 1, "creation_date": 1507719993, "post_id": 39829685, "comment_id": 80320725, "body": "@Aaron Confirmed"}], "tags": [], "owner": {"reputation": 343, "user_id": 3624306, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/223302169/picture?type=large", "display_name": "TheMinimalCriminal", "link": "https://stackoverflow.com/users/3624306/theminimalcriminal"}, "is_accepted": false, "score": 10, "last_activity_date": 1475491256, "creation_date": 1475491256, "answer_id": 39829685, "question_id": 39741410, "link": "https://stackoverflow.com/questions/39741410/rails-5-cipher-key-key-must-be-32-bytes-error/39829685#39829685", "title": "Rails 5 cipher.key &quot;key must be 32 bytes&quot; error", "body": "<p>Ok, there was a slight misunderstanding on my part, looks like the fix is coming in 5.0.1 not 5.0.0.1</p>\n\n<p><a href=\"https://github.com/rails/rails/issues/26694\" rel=\"noreferrer\">https://github.com/rails/rails/issues/26694</a></p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 7939429, "user_type": "registered", "profile_image": "https://graph.facebook.com/1889705817934339/picture?type=large", "display_name": "Naomi Wu", "link": "https://stackoverflow.com/users/7939429/naomi-wu"}, "is_accepted": false, "score": 1, "last_activity_date": 1495598525, "creation_date": 1495598525, "answer_id": 44148765, "question_id": 39741410, "link": "https://stackoverflow.com/questions/39741410/rails-5-cipher-key-key-must-be-32-bytes-error/44148765#44148765", "title": "Rails 5 cipher.key &quot;key must be 32 bytes&quot; error", "body": "<p>try this:</p>\n\n<pre><code>rake db:create\nrake db:migrate\n</code></pre>\n\n<p>then, the most important thing:</p>\n\n<pre><code>bundle update\n</code></pre>\n\n<p>This works for me. </p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 4426280, "user_type": "registered", "profile_image": "https://graph.facebook.com/754960953/picture?type=large", "display_name": "Bater", "link": "https://stackoverflow.com/users/4426280/bater"}, "is_accepted": false, "score": 1, "last_activity_date": 1504249127, "creation_date": 1504249127, "answer_id": 45994836, "question_id": 39741410, "link": "https://stackoverflow.com/questions/39741410/rails-5-cipher-key-key-must-be-32-bytes-error/45994836#45994836", "title": "Rails 5 cipher.key &quot;key must be 32 bytes&quot; error", "body": "<p>Use <code>random_key</code> so it always fit.</p>\n\n<pre><code>key = cipher.random_key\ncipher.key = key\n</code></pre>\n\n<p>reference <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/openssl/rdoc/OpenSSL/Cipher.html\" rel=\"nofollow noreferrer\">http://ruby-doc.org/stdlib-2.0.0/libdoc/openssl/rdoc/OpenSSL/Cipher.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 12442, "user_id": 849697, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0c91f58ffa7bbf4151cae13b5c8b9ccd?s=128&d=identicon&r=PG", "display_name": "xxjjnn", "link": "https://stackoverflow.com/users/849697/xxjjnn"}, "is_accepted": false, "score": 2, "last_activity_date": 1511866561, "creation_date": 1511866561, "answer_id": 47529831, "question_id": 39741410, "link": "https://stackoverflow.com/questions/39741410/rails-5-cipher-key-key-must-be-32-bytes-error/47529831#47529831", "title": "Rails 5 cipher.key &quot;key must be 32 bytes&quot; error", "body": "<p>Finally found problem! It was from a bugfix... <a href=\"https://bugs.ruby-lang.org/issues/12561\" rel=\"nofollow noreferrer\">https://bugs.ruby-lang.org/issues/12561</a></p>\n\n<p>If you are using cipher e.g. 'aes-256-cfb', the <code>key_len</code> is 32, found by:</p>\n\n<pre><code>require 'openssl'\ncipher = OpenSSL::Cipher.new('aes-256-cfb')\ncipher.key_len # =&gt; 32\n</code></pre>\n\n<p>We had mistakenly thought we needed to send a 256 character nonce, but actually you are supposed to send a 32 character nonce - or\n use <code>cipher.random_key</code> (which internally uses the <code>key_len</code>). It never used to be a problem because openssl truncated the nonce... but now you need to send the right lengthed nonce.</p>\n\n<p>We got this error upgrading ruby from 2.3.4 to 2.4.2.</p>\n"}, {"tags": [], "owner": {"reputation": 1211, "user_id": 3443386, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2cd6c337c90bd83c227471a4c7c81112?s=128&d=identicon&r=PG&f=1", "display_name": "FlyingV", "link": "https://stackoverflow.com/users/3443386/flyingv"}, "is_accepted": false, "score": 1, "last_activity_date": 1515340614, "last_edit_date": 1515340614, "creation_date": 1515340140, "answer_id": 48138826, "question_id": 39741410, "link": "https://stackoverflow.com/questions/39741410/rails-5-cipher-key-key-must-be-32-bytes-error/48138826#48138826", "title": "Rails 5 cipher.key &quot;key must be 32 bytes&quot; error", "body": "<p><strong>Solution</strong>: </p>\n\n<ol>\n<li>Edit your Gemfile</li>\n<li>Add the following line: gem 'rails', '~> 5.0.0', '>= 5.0.0.1'</li>\n<li>bundle install</li>\n<li>Optional: I am using ruby2-4.1 . (rvm install ruby-2.4.1)</li>\n</ol>\n\n<p><strong>Rational</strong>: The rails version prior to 5.0.0 seems to have a bug that causes this issue. The bug has been resolved in the latest version of Rails.  If you hare following the Rails Installation Guide (<a href=\"http://railsapps.github.io/installrubyonrails-mac.html\" rel=\"nofollow noreferrer\">http://railsapps.github.io/installrubyonrails-mac.html</a>) you will probably encounter this problem as of this posting date.</p>\n\n<p>This fix does work, and is verified by </p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7710710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c83f52dbbe6b4442aedaaf475d61f02?s=128&d=identicon&r=PG&f=1", "display_name": "DVislearning", "link": "https://stackoverflow.com/users/7710710/dvislearning"}, "is_accepted": false, "score": 1, "last_activity_date": 1520229567, "creation_date": 1520229567, "answer_id": 49104329, "question_id": 39741410, "link": "https://stackoverflow.com/questions/39741410/rails-5-cipher-key-key-must-be-32-bytes-error/49104329#49104329", "title": "Rails 5 cipher.key &quot;key must be 32 bytes&quot; error", "body": "<p>I was having this problem too and fixed it by running</p>\n\n<pre><code>bundle update\n</code></pre>\n\n<p>Make sure that you have the latest version of rails installed.</p>\n"}, {"tags": [], "owner": {"reputation": 175, "user_id": 4949887, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b-MBYZruWrM/AAAAAAAAAAI/AAAAAAAAAD8/v7P08JEdRRU/photo.jpg?sz=128", "display_name": "Ahmed J.", "link": "https://stackoverflow.com/users/4949887/ahmed-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1523957845, "creation_date": 1523957845, "answer_id": 49874689, "question_id": 39741410, "link": "https://stackoverflow.com/questions/39741410/rails-5-cipher-key-key-must-be-32-bytes-error/49874689#49874689", "title": "Rails 5 cipher.key &quot;key must be 32 bytes&quot; error", "body": "<p>Had the same error:\nRunning bundle update should do the trick</p>\n"}, {"tags": [], "owner": {"reputation": 357, "user_id": 5440570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad3b37a8bee584196c4cd00c9168605d?s=128&d=identicon&r=PG&f=1", "display_name": "Govind shaw", "link": "https://stackoverflow.com/users/5440570/govind-shaw"}, "is_accepted": false, "score": 2, "last_activity_date": 1558432326, "last_edit_date": 1558432326, "creation_date": 1558430667, "answer_id": 56235184, "question_id": 39741410, "link": "https://stackoverflow.com/questions/39741410/rails-5-cipher-key-key-must-be-32-bytes-error/56235184#56235184", "title": "Rails 5 cipher.key &quot;key must be 32 bytes&quot; error", "body": "<p>Please use <strong>Digest::MD5</strong> to achive 32 bytes</p>\n\n<pre><code>require 'openssl'\nrequire 'digest'\nrequire 'base64'\n\ndata = \"encrypt me\"\nsecret_key = \"asd3dssdf34HDas\"\nc = OpenSSL::Cipher.new(\"aes-256-cbc\")\nc.encrypt\nc.key = Digest::MD5.hexdigest(secret_key) # this will convert key length into 32\nencrypted_data = c.update(data.to_s) + c.final\nencrypted_data = Base64.urlsafe_encode64(encrypted_data, padding: false) #padding: false will remove '/', '+' from encrypted data\nencrypted_data.gsub! \"\\n\",\"\"\n</code></pre>\n\n<p>Or Simply use <strong>secret key</strong> of length 32 bytes</p>\n\n<pre><code>data = \"encrypt me\"\nsecret_key = \"Aswertyuioasdfghjkqwertyuiqwerty\"\nc = OpenSSL::Cipher.new(\"aes-256-cbc\")\nc.encrypt\nc.key = secret_key \nencrypted_data = c.update(data.to_s) + c.final\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 226, "user_id": 815381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b48fe2947e5e8f42060c7a16c57b74a?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/815381/chris"}, "is_accepted": false, "score": 1, "last_activity_date": 1566567486, "creation_date": 1566567486, "answer_id": 57627542, "question_id": 39741410, "link": "https://stackoverflow.com/questions/39741410/rails-5-cipher-key-key-must-be-32-bytes-error/57627542#57627542", "title": "Rails 5 cipher.key &quot;key must be 32 bytes&quot; error", "body": "<p>This issue turns out to be connected to the key you are using. Without changing your key you can use the code below to transform your key to 32 bytes:</p>\n\n<blockquote>\n  <p>attr_encrypted :attribute, key: ENV['MY_KEY'].bytes[0..31].pack( \"c\" * 32 )</p>\n</blockquote>\n"}], "owner": {"reputation": 343, "user_id": 3624306, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/223302169/picture?type=large", "display_name": "TheMinimalCriminal", "link": "https://stackoverflow.com/users/3624306/theminimalcriminal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12949, "favorite_count": 3, "answer_count": 9, "score": 15, "last_activity_date": 1566567486, "creation_date": 1475049591, "question_id": 39741410, "link": "https://stackoverflow.com/questions/39741410/rails-5-cipher-key-key-must-be-32-bytes-error", "title": "Rails 5 cipher.key &quot;key must be 32 bytes&quot; error", "body": "<p>Brand new Rails application.</p>\n\n<p>Rails version 5.0.0.1, Ruby version 2.4.0preview2.</p>\n\n<p>Create application \"demo\", run a simple scaffold generate Product, and get an error when trying to view the scaffold's overview page (base index file still loads the Welcome to Rails screen fine):</p>\n\n<p>ArgumentError in ProductsController#index\nkey must be 32 bytes:</p>\n\n<pre><code>  cipher = new_cipher\n  cipher.encrypt\n  cipher.key = @secret\n\n  # Rely on OpenSSL for the initialization vector\n  iv = cipher.random_iv\n</code></pre>\n\n<p>The problem line is apparently cipher.key = @secret.</p>\n\n<p>I've seen various mentions on the github repo for Rails mentioning this issue, but all implied it was now resolved in Rails 5.0.0.1</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475050581, "post_id": 39741141, "comment_id": 66780504, "body": "can&#39;t reproduce"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475050556, "post_id": 39741650, "comment_id": 66780492, "body": "Your guess is correct, I think, but it&#39;s the other method that should be fixed."}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475051612, "post_id": 39741650, "comment_id": 66781119, "body": "@SergioTulentsev try No:2 :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475051723, "post_id": 39741650, "comment_id": 66781211, "body": "Nope, get_group_name returns key, not value."}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1475052608, "last_edit_date": 1475052608, "creation_date": 1475050351, "answer_id": 39741650, "question_id": 39741141, "link": "https://stackoverflow.com/questions/39741141/ruby-checking-if-string-contains-substring/39741650#39741650", "title": "Ruby Checking if string contains substring", "body": "<p>I think, this problem could appear when your log file doesn't have lines that include any of your @@groups.keys, so for solve this problem, you can add this lines: </p>\n\n<pre><code>@@groups = {\n    \"_LINUX_TEST_\" =&gt; \"Linux_tests\",\n    \"_WINDOWS_TEST_\" =&gt; \"Windows_tests\"\n  }\n\n  def get_group_name(searchLine)\n    @@groups[@@groups.keys.find { |key| searchLine.include? key }]\n  end\n\n  def get_group_name_from_file(fileName)\n    # fileName - filename or path to the file.txt\n    file = File.open(fileName)\n    while (line = file.gets)\n      found = get_group_name(line)\n      return found if found\n    end\n  end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 616, "user_id": 1557759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3917f89ae36db46cf7321648d465df?s=128&d=identicon&r=PG", "display_name": "Anuja", "link": "https://stackoverflow.com/users/1557759/anuja"}, "edited": false, "score": 0, "creation_date": 1475050917, "post_id": 39741734, "comment_id": 66780694, "body": "One more option:     def get_group_name(searchLine)      @groups.keys.detect do |i|         if searchLine.include? i           return @groups[i]       end   end end"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475051002, "post_id": 39741734, "comment_id": 66780742, "body": "if we use detect, we don&#39;t need <code>if</code> or <code>return</code>"}, {"owner": {"reputation": 616, "user_id": 1557759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3917f89ae36db46cf7321648d465df?s=128&d=identicon&r=PG", "display_name": "Anuja", "link": "https://stackoverflow.com/users/1557759/anuja"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475051139, "post_id": 39741734, "comment_id": 66780826, "body": "We need it because iteration is over the keys and not value. So it will return key but we want value."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1475051368, "post_id": 39741734, "comment_id": 66780958, "body": "Ah, right. In this case, this is a very bad usage of <code>detect</code>, I think. You only use it for its implicit <code>nil</code> return value (if nothing found). Misleading. I like the first one better. :)"}], "tags": [], "owner": {"reputation": 616, "user_id": 1557759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3917f89ae36db46cf7321648d465df?s=128&d=identicon&r=PG", "display_name": "Anuja", "link": "https://stackoverflow.com/users/1557759/anuja"}, "is_accepted": false, "score": 1, "last_activity_date": 1475050959, "last_edit_date": 1475050959, "creation_date": 1475050623, "answer_id": 39741734, "question_id": 39741141, "link": "https://stackoverflow.com/questions/39741141/ruby-checking-if-string-contains-substring/39741734#39741734", "title": "Ruby Checking if string contains substring", "body": "<p>It happens when it returns the output returned by <em>each</em> method if control doesn't reach upto:</p>\n\n<pre><code>return @group[i];\n</code></pre>\n\n<p>You can update method as:</p>\n\n<pre><code>def get_group_name(searchLine)\n  @@groups.keys.each do |i| \n    if searchLine.include? i\n      return @@groups[i]\n    end\n  end\n  return nil\nend\n</code></pre>\n\n<p>One more option:</p>\n\n<pre><code>def get_group_name(searchLine)\n  @groups.keys.detect do |i|\n    if searchLine.include? i\n      return @groups[i]\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 5253297, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/60884f5bd733dee926e8beb3bde8ef83?s=128&d=identicon&r=PG&f=1", "display_name": "kater", "link": "https://stackoverflow.com/users/5253297/kater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 935, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475052608, "creation_date": 1475048805, "last_edit_date": 1475049231, "question_id": 39741141, "link": "https://stackoverflow.com/questions/39741141/ruby-checking-if-string-contains-substring", "title": "Ruby Checking if string contains substring", "body": "<p>I have many log files, each contains a line like this one:</p>\n\n<pre><code>THIS LINE IS DIFFERENT CASE_WINDOWS_TEST_00 PASSED\n</code></pre>\n\n<p>I'm searching if line contains \"_XXX_TEST_\" string. I created a hash:</p>\n\n<pre><code>@@groups = {\n    \"_LINUX_TEST_\" =&gt; \"Linux_tests\",\n    \"_WINDOWS_TEST_\" =&gt; \"Windows_tests\"\n}\n</code></pre>\n\n<p>To check if the line contains a substring (a key from @@groups) I implemented method get_group_name which returns a value from @@groups.</p>\n\n<pre><code>def get_group_name(searchLine)\n    @@groups.keys.each do |i| \n        if searchLine.include? i\n            return @@groups[i]\n        end\n    end\nend\n</code></pre>\n\n<p>It works fine, returns proper values. I use this method in another method that iterates through log file.</p>\n\n<pre><code>def get_group_name_from_file(fileName)\n    # fileName - filename or path to the file.txt\n    file = File.open(fileName)\n    while (line = file.gets)\n        found = get_group_name(line)\n        if found \n            return found\n        end\n    end\nend\n</code></pre>\n\n<p>And here is the problem. Method get_group_name_from_file returns list of keys from @@groups hash instead of one string (a value from that hash).</p>\n"}, {"tags": ["ruby", "zsh", "rbenv"], "comments": [{"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475047035, "post_id": 39740522, "comment_id": 66778319, "body": "do you have <code>rbenv</code> in your PATH? try <code>export PATH=&quot;$HOME&#47;.rbenv&#47;bin:$PATH&quot;</code> and then <code>eval &quot;$(rbenv init -)&quot;</code> in your <code>~&#47;.zshrc</code>"}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475047313, "post_id": 39740522, "comment_id": 66778484, "body": "I am on Sierra, have everything working. Also you should have xcode installed? Do you have it?"}, {"owner": {"reputation": 392, "user_id": 1973798, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/yhvRF.png?s=128&g=1", "display_name": "Andrea Moro", "link": "https://stackoverflow.com/users/1973798/andrea-moro"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475048245, "post_id": 39740522, "comment_id": 66779084, "body": "the path above is not in place, but when I rub rbenv from the same terminal windows that gets executed, so this doesn&#39;t sound to be the problem? A which rbenv returns the following path /local/bin/rbenv"}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475048561, "post_id": 39740522, "comment_id": 66779273, "body": "yes, I removed this line with PATH and it seems like it still works..."}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1475173990, "post_id": 39756026, "comment_id": 66849443, "body": "This doesn&#39;t answer the question so much as make it moot. I&#39;d just delete it."}, {"owner": {"reputation": 392, "user_id": 1973798, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/yhvRF.png?s=128&g=1", "display_name": "Andrea Moro", "link": "https://stackoverflow.com/users/1973798/andrea-moro"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1475272755, "post_id": 39756026, "comment_id": 66893823, "body": "Well, not sure why you believe it does not answer. It does IMHO as a copy and paste from what it is proposed doesn&#39;t seem to work."}], "tags": [], "owner": {"reputation": 392, "user_id": 1973798, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/yhvRF.png?s=128&g=1", "display_name": "Andrea Moro", "link": "https://stackoverflow.com/users/1973798/andrea-moro"}, "is_accepted": false, "score": 0, "last_activity_date": 1487429532, "last_edit_date": 1487429532, "creation_date": 1475090674, "answer_id": 39756026, "question_id": 39740522, "link": "https://stackoverflow.com/questions/39740522/eval-rbenv-init-does-not-work-when-referenced-from-zshrc-os-x/39756026#39756026", "title": "eval &quot;$(rbenv init -)&quot; does not work when referenced from ~/.zshrc (OS X)", "body": "<p>Ok, I've raked the net for 30 minutes without results, so I did a simple test. \nInstead of copy and pasting the results proposed by the <code>rbenv init</code>, I typed what is proposed into the ~/.zshrc file to get it working like a charm.</p>\n\n<p>I can only assume that some characters shown on screen are encoded in some different way, hence they generate the problem.  </p>\n"}], "owner": {"reputation": 392, "user_id": 1973798, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/yhvRF.png?s=128&g=1", "display_name": "Andrea Moro", "link": "https://stackoverflow.com/users/1973798/andrea-moro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2028, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487429532, "creation_date": 1475046971, "question_id": 39740522, "link": "https://stackoverflow.com/questions/39740522/eval-rbenv-init-does-not-work-when-referenced-from-zshrc-os-x", "title": "eval &quot;$(rbenv init -)&quot; does not work when referenced from ~/.zshrc (OS X)", "body": "<p>This is one those strange things, although I'm sure the most recent installation of Sierra has something to do with this.\nIn fact, yesterday night I had to completely (manually remove) the whole rbenv folder to make it working again.</p>\n\n<p>In a nutshell, the following <code>eval \"$(rbenv init -)\"</code> has been added immediately after the PATH declaration in the ~/.zshrc file. \nHowever, when launching the iTerm console, that line pass ignored and in fact all the gems under the shims are ignored. This should also result in the default ruby version to be loaded, which is not the case as a <code>ruby -v</code> returns my global 2.3.1 recently installed.</p>\n\n<p>The funny thing is that a <code>eval \"$(rbenv init -)\"</code> at a command line properly resolve and all works fine after that. </p>\n\n<p>I have another Mac, where I can't install Sierra and the same settings, same ZSH version etc. works just fine.</p>\n\n<p>Does anybody experience the same?</p>\n\n<p>Thanks\nAndrea</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 0, "creation_date": 1475046304, "post_id": 39740123, "comment_id": 66777872, "body": "Do you have validations in your model? If there is could you show it?"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 4942627, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b2f3b69e4d2fcc4c9aec1a1410a9dc78?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/4942627/jack"}, "edited": false, "score": 0, "creation_date": 1475046568, "post_id": 39740335, "comment_id": 66778040, "body": "returns undefined method create_boostdet"}, {"owner": {"reputation": 671, "user_id": 5742949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3912a535b54d364d6922df433db50512?s=128&d=identicon&r=PG&f=1", "display_name": "Shabini Rajadas", "link": "https://stackoverflow.com/users/5742949/shabini-rajadas"}, "reply_to_user": {"reputation": 169, "user_id": 4942627, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b2f3b69e4d2fcc4c9aec1a1410a9dc78?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/4942627/jack"}, "edited": false, "score": 0, "creation_date": 1475049104, "post_id": 39740335, "comment_id": 66779615, "body": "The above code is still valid if your belongs_to was correct. check this link <a href=\"http://guides.rubyonrails.org/v2.3.11/association_basics.html#belongs-to-association-reference\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/v2.3.11/&hellip;</a>"}], "tags": [], "owner": {"reputation": 671, "user_id": 5742949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3912a535b54d364d6922df433db50512?s=128&d=identicon&r=PG&f=1", "display_name": "Shabini Rajadas", "link": "https://stackoverflow.com/users/5742949/shabini-rajadas"}, "is_accepted": false, "score": -1, "last_activity_date": 1475046472, "creation_date": 1475046472, "answer_id": 39740335, "question_id": 39740123, "link": "https://stackoverflow.com/questions/39740123/rake-dbseed-not-inputting-all-of-my-data/39740335#39740335", "title": "rake db:seed not inputting all of my data", "body": "<p>Can you please use the build command from rails to create boostdet. Please check the code below,</p>\n\n<pre><code>@boost = Boost.create(title: \"gg\", slogan: \"Ej\", rating: \"u\", bonus: \"y\", image: \"\")\n@boost.create_boostdet(name: \"t\", title: \"u\", slogan: \"y\", point1: \"t\", point2: \"rs\", rating:  \"f\",timeframe: \"r\", price: \"Ss\", image: \"\")\n@boost.create_boostdet(name: \"g\", title: \"s\", slogan: \"x\", point1: \"e\", point2: \"Cg\", rating: \"3\", timeframe: \"g\", price: \"t\", image: \"\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "is_accepted": false, "score": 0, "last_activity_date": 1475047015, "last_edit_date": 1475047015, "creation_date": 1475046633, "answer_id": 39740396, "question_id": 39740123, "link": "https://stackoverflow.com/questions/39740123/rake-dbseed-not-inputting-all-of-my-data/39740396#39740396", "title": "rake db:seed not inputting all of my data", "body": "<p>Try this:</p>\n\n<pre><code>b1 = Boost.create(title: \"gg\", slogan: \"Ej\", rating: \"u\", bonus: \"y\", image: \"\")\nb1.boostdets.create(name: \"t\", title: \"u\", slogan: \"y\", point1: \"t\", point2: \"rs\", rating:  \"f\",timeframe: \"r\", price: \"Ss\", image: \"\")\nb1.boostdets.create(name: \"g\", title: \"s\", slogan: \"x\", point1: \"e\", point2: \"Cg\", rating: \"3\", timeframe: \"g\", price: \"t\", image: \"\")\n</code></pre>\n\n<p>And take note if you are using <code>belongs_to</code> it should be singular so instead of:</p>\n\n<pre><code>belongs_to :boosts\n</code></pre>\n\n<p>it should be:</p>\n\n<pre><code>belongs_to :boost\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 4942627, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b2f3b69e4d2fcc4c9aec1a1410a9dc78?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/4942627/jack"}, "edited": false, "score": 0, "creation_date": 1475047838, "post_id": 39740405, "comment_id": 66778802, "body": "Infact what actually made my code work was taking the s out of belongs_to :boosts into belongs_to :boost. I do like that i don&#39;t have to manually pass the boost_id though. Thank you"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 3, "last_activity_date": 1475046653, "creation_date": 1475046653, "answer_id": 39740405, "question_id": 39740123, "link": "https://stackoverflow.com/questions/39740123/rake-dbseed-not-inputting-all-of-my-data/39740405#39740405", "title": "rake db:seed not inputting all of my data", "body": "<p>Create <code>boostdets</code> using the association. This way you don't need to manually pass the <code>boost_id</code></p>\n\n<pre><code>boost = Boost.create(title: \"gg\", slogan: \"Ej\", rating: \"u\", bonus: \"y\", image: \"\")\nboost.boostdets.create(name: \"t\", title: \"u\", slogan: \"y\", point1: \"t\", point2: \"rs\", rating:  \"f\",timeframe: \"r\", price: \"Ss\", image: \"\")\nboost.boostdets.create(name: \"g\", title: \"s\", slogan: \"x\", point1: \"e\", point2: \"Cg\", rating: \"3\", timeframe: \"g\", price: \"t\", image: \"\")\n</code></pre>\n\n<p>One more thing you need to change the association <code>belongs_to :boosts</code> to <code>belongs_to :boost</code></p>\n\n<pre><code>class Boostdet &lt; ApplicationRecord\n  belongs_to :boost\nend\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4942627, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b2f3b69e4d2fcc4c9aec1a1410a9dc78?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/4942627/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 39740405, "answer_count": 3, "score": -1, "last_activity_date": 1475047015, "creation_date": 1475045871, "last_edit_date": 1475046780, "question_id": 39740123, "link": "https://stackoverflow.com/questions/39740123/rake-dbseed-not-inputting-all-of-my-data", "title": "rake db:seed not inputting all of my data", "body": "<p>I am having issues of my <code>rake db:seed</code> not being applied to the correct values when I attempt to seed. I also get no error when I <code>rake db:seed</code> which is why I am unsure what is wrong.</p>\n\n<p>Here are the migration files:\nBoostdets:</p>\n\n<pre><code>class CreateBoostdets &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :boostdets do |t|\n      t.string :name\n      t.string :title\n      t.string :slogan\n      t.string :point1\n      t.string :point2\n      t.string :rating\n      t.string :timeframe\n      t.string :price\n      t.string :image\n      t.references :boost\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Boosts:</p>\n\n<pre><code>class CreateBoosts &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :boosts do |t|\n      t.string :title\n      t.string :slogan\n      t.string :rating\n      t.string :bonus\n      t.string :image\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Here is a sample of my seed file:</p>\n\n<pre><code>b1 = Boost.create(title: \"gg\", slogan: \"Ej\", rating: \"u\", bonus: \"y\", image: \"\")\nBoostdet.create(name: \"t\", title: \"u\", slogan: \"y\", point1: \"t\", point2: \"rs\", rating:  \"f\",timeframe: \"r\", price: \"Ss\", image: \"\", boost_id: b1.id)\nBoostdet.create(name: \"g\", title: \"s\", slogan: \"x\", point1: \"e\", point2: \"Cg\", rating: \"3\", timeframe: \"g\", price: \"t\", image: \"\", boost_id: b1.id)\n</code></pre>\n\n<p>I am unsure what I'm doing wrong since there is no seeding error given it just passes onto the next bash line with no message.</p>\n\n<p><strong>EDIT</strong>\nModels with validation </p>\n\n<pre><code>class Boostdet &lt; ApplicationRecord\n  belongs_to :boosts\nend\n\nclass Boost &lt; ApplicationRecord\n  has_many :boostdets\nend\n</code></pre>\n"}, {"tags": ["ruby", "cocos2d-x", "rubymotion", "motion-game"], "owner": {"reputation": 549, "user_id": 4947269, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1397f42749534d69c2e174bd265e2016?s=128&d=identicon&r=PG&f=1", "display_name": "M1LKYW4Y", "link": "https://stackoverflow.com/users/4947269/m1lkyw4y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1475073897, "creation_date": 1475045675, "last_edit_date": 1475073897, "question_id": 39740046, "link": "https://stackoverflow.com/questions/39740046/rubymotion-image-from-url-in-motion-game", "title": "RubyMotion Image from URL in Motion-Game", "body": "<p>I am using RubyMotion motion-game.  I am trying to create a sprite, or ui widget, or really almost any other class that has an image associated with it.  The trick is I want to create it from a URL, not a file.  </p>\n\n<p>Is there is an existing way to do this in motion-game?  How?\nI see api methods like MG::Sprite.new and MG::Web.new but am unsure of how to take data from a url and display it as a sprite.</p>\n\n<p>If it doesn't exist would the solution involve exposing cocos stuff in C++?  Any help or examples of something similar would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation"], "comments": [{"owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "edited": false, "score": 0, "creation_date": 1475038906, "post_id": 39738273, "comment_id": 66774408, "body": "you&#39;re already validating against a regex.. is <code>presence: true</code> required in your validation ?"}, {"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "reply_to_user": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "edited": false, "score": 0, "creation_date": 1475039498, "post_id": 39738273, "comment_id": 66774602, "body": "yes, that is true. but why it works for email, but not uuid?"}, {"owner": {"reputation": 2210, "user_id": 4082957, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c549b569c2faad6f2fad9c385527406?s=128&d=identicon&r=PG&f=1", "display_name": "geoandri", "link": "https://stackoverflow.com/users/4082957/geoandri"}, "edited": false, "score": 0, "creation_date": 1475039744, "post_id": 39738273, "comment_id": 66774695, "body": "The message suggests that uuid never reaches the controller. Have you added uuid in the permitted  params in users controllers?"}, {"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1475039839, "post_id": 39738273, "comment_id": 66774733, "body": "oh. yes I do. params.require(:user_info).permit(:uuid, :name, :email)"}, {"owner": {"reputation": 2210, "user_id": 4082957, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c549b569c2faad6f2fad9c385527406?s=128&d=identicon&r=PG&f=1", "display_name": "geoandri", "link": "https://stackoverflow.com/users/4082957/geoandri"}, "edited": false, "score": 0, "creation_date": 1475039981, "post_id": 39738273, "comment_id": 66774784, "body": "Try to remove &#39;presence: true&#39;, send and invalid format and see if format validation  actually returns the error message."}, {"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1475040067, "post_id": 39738273, "comment_id": 66774820, "body": "yeah it does. it returns the error message."}, {"owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "edited": false, "score": 0, "creation_date": 1475041365, "post_id": 39738273, "comment_id": 66775297, "body": "i guess you got it working"}, {"owner": {"reputation": 923, "user_id": 3270255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hz8rZ.jpg?s=128&g=1", "display_name": "Snm Maurya", "link": "https://stackoverflow.com/users/3270255/snm-maurya"}, "edited": false, "score": 0, "creation_date": 1475045535, "post_id": 39738273, "comment_id": 66777419, "body": "the validation is being used by you is right. Can u give me an example for which its not working"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1475056957, "post_id": 39738273, "comment_id": 66785049, "body": "Why are you letting users change their uuid?"}, {"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1475057896, "post_id": 39738273, "comment_id": 66785730, "body": "@max I&#39;ve been developing another subsystem. When users try to register , we need to check if it&#39;s valid format. Changing uuid is not happened."}, {"owner": {"reputation": 139, "user_id": 4897853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-X6bEFr2uPH8/AAAAAAAAAAI/AAAAAAAAAIA/woalj8BFE9s/photo.jpg?sz=128", "display_name": "Daniil Maksimov", "link": "https://stackoverflow.com/users/4897853/daniil-maksimov"}, "edited": false, "score": 0, "creation_date": 1475075940, "post_id": 39738273, "comment_id": 66799209, "body": "@Toshi Did you try separate validations?"}, {"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "reply_to_user": {"reputation": 139, "user_id": 4897853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-X6bEFr2uPH8/AAAAAAAAAAI/AAAAAAAAAIA/woalj8BFE9s/photo.jpg?sz=128", "display_name": "Daniil Maksimov", "link": "https://stackoverflow.com/users/4897853/daniil-maksimov"}, "edited": false, "score": 0, "creation_date": 1475077590, "post_id": 39738273, "comment_id": 66800347, "body": "@DaniilMaksimov Yes I did. I updated my question."}, {"owner": {"reputation": 139, "user_id": 4897853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-X6bEFr2uPH8/AAAAAAAAAAI/AAAAAAAAAIA/woalj8BFE9s/photo.jpg?sz=128", "display_name": "Daniil Maksimov", "link": "https://stackoverflow.com/users/4897853/daniil-maksimov"}, "edited": false, "score": 0, "creation_date": 1475130811, "post_id": 39738273, "comment_id": 66821030, "body": "Maybe you have method <code>uuid</code> and it overrides attribute."}], "owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475077559, "creation_date": 1475038203, "last_edit_date": 1475077559, "question_id": 39738273, "link": "https://stackoverflow.com/questions/39738273/rails4-validation-order-return-cant-be-blank-instead-of-invalid-format", "title": "Rails4 validation order; return &#39;can&#39;t be blank&#39; instead of invalid format", "body": "<p>I set up the validator for <code>uuid</code>.</p>\n\n<p>in <code>app/model/user.rb</code></p>\n\n<pre><code>  VALID_UUID_REGEX = /\\A[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}\\z/i\n  validates :uuid, presence: true, uniqueness: true, format: { with: VALID_UUID_REGEX, message: 'invalid uuid format' }\n</code></pre>\n\n<p>and it works. However when I insert some uuid with invalid format, it returns <code>uuid: can't be blank</code> error, instead of <code>invalid uuid format</code>.</p>\n\n<p>Any ideas? Maybe some validation orders?\n( I use almost the same validator for <code>email</code>, and it works.)</p>\n\n<p><strong>UPDATE</strong>\nI also tried separate validation, but the result is the same.</p>\n\n<pre><code>  validates :uuid, presence: true, uniqueness: true\n\n  VALID_UUID_REGEX = /\\A[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}\\z/i\n  validates :uuid, format: { with: VALID_UUID_REGEX, message: 'invalid uuid format' }\n</code></pre>\n"}, {"tags": ["ruby", "sockets"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1475116931, "post_id": 39738233, "comment_id": 66816700, "body": "I don\u2019t really know this stuff well enough to write a proper answer, but it looks like you are leaving connections in the <code>TIME_WAIT</code> state (there also appears to be a bug in the Mac implementation of <code>netstat</code> that means it isn\u2019t showing those connections). You can fix it by adding <code>socket.setsockopt(:SOCKET, :REUSEADDR, true)</code> before the call to <code>bind</code>."}, {"owner": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1475189250, "post_id": 39738233, "comment_id": 66856372, "body": "@matt - adding that fixes the problem. Now I&#39;m a bit unclear if I am making a mistake in leaving the connections in <code>TIME_WAIT</code> - (or is this sort of thing unavoidable and everyone that does this sort of thing always enables <code>:REUSEADDR</code>). Thanks for the answer!"}], "owner": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1475107106, "creation_date": 1475037949, "last_edit_date": 1475107106, "question_id": 39738233, "link": "https://stackoverflow.com/questions/39738233/ruby-errnoeaddrinuse-for-simple-socket-example", "title": "Ruby Errno::EADDRINUSE For Simple Socket Example", "body": "<p>I'm perplexed by some socket code using <code>IO.select</code> that doesn't cleanup after running:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'socket'\n\ndef run(socket)\n  loop do\n    begin\n      selections, _, _ = IO.select([socket])\n      io, _ = selections\n      begin\n        connection, _ = io.accept\n        puts \"ACCEPTED: #{connection.inspect}\"\n      ensure\n        puts \"CLOSING: #{connection.inspect}\"\n        connection.close\n        puts \"CLOSED: #{connection.inspect}\"\n      end\n    rescue Interrupt\n      puts \"INTERRUPTED\"\n      break\n    end\n  end\nend\n\nbegin\n  socket = Socket.new(:INET, :STREAM)\n  socket.bind(Socket.pack_sockaddr_in(5000, '0.0.0.0'))\n  socket.listen(4)\n  puts \"LISTENING: #{socket.inspect}\"\n  run(socket)\nensure\n  puts \"CLOSING: #{socket.inspect}\"\n  socket.close\n  puts \"CLOSED: #{socket.inspect}\"\nend\n</code></pre>\n\n<p>Running the program and sending an interrupt signal gives prints:</p>\n\n<pre><code>ruby script.rb \nLISTENING: #&lt;Socket:fd 7&gt;\n^CINTERRUPTED\nCLOSING: #&lt;Socket:fd 7&gt;\nCLOSED: #&lt;Socket:(closed)&gt;\n</code></pre>\n\n<p>Running the program another time and making a request gives:</p>\n\n<pre><code>ruby script.rb \nLISTENING: #&lt;Socket:fd 7&gt;\n\ncurl 0.0.0.0:5000\n\nACCEPTED: #&lt;Socket:fd 8&gt;\nCLOSING: #&lt;Socket:fd 8&gt;\nCLOSED: #&lt;Socket:(closed)&gt;\n\ncurl: empty reply from server\n\n^CINTERRUPTED\nCLOSING: #&lt;Socket:fd 7&gt;\nCLOSED: #&lt;Socket:(closed)&gt;\n</code></pre>\n\n<p>Despite the debug info seeming normal - quickly running the program again gives:</p>\n\n<pre><code>ruby script.rb\nscript.rb:25:in `bind': Address already in use - bind(2) for 0.0.0.0:5000 (Errno::EADDRINUSE)\nfrom script.rb:25:in `&lt;main&gt;'\n</code></pre>\n\n<p>The socket eventually binds again (with a long pause in between runs). What isn't getting cleaned up? The logs make it seem like each call is getting cleaned up.</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 3, "creation_date": 1475034611, "post_id": 39737697, "comment_id": 66773252, "body": "In Python, this would happen because <code>[[]]*3</code> results in a list of three of the same list (same object). Thus, when you append to it, it shows up in all the keys. Using <code>[[], [], []]</code> would not result in this issue, but I don&#39;t know enough Ruby to know if it&#39;s the same."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1475034693, "post_id": 39737697, "comment_id": 66773276, "body": "What&#39;s the object _id of each value in the hash?"}, {"owner": {"reputation": 1984, "user_id": 2623749, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fcbbc9a5894aea56bce09a71a25e560f?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/2623749/lokesh"}, "edited": false, "score": 0, "creation_date": 1475035110, "post_id": 39737697, "comment_id": 66773360, "body": "They all have same <code>object_id</code>"}, {"owner": {"reputation": 1984, "user_id": 2623749, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fcbbc9a5894aea56bce09a71a25e560f?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/2623749/lokesh"}, "edited": false, "score": 0, "creation_date": 1475035685, "post_id": 39737697, "comment_id": 66773514, "body": "I see why this is so now. What&#39;s the workaround to achieve the same functionality? For example I can&#39;t type <code>[]</code> a 100 times if I want <code>[[]]*100</code>."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 4, "creation_date": 1475035778, "post_id": 39737697, "comment_id": 66773546, "body": "Replace <code>[[]]*3</code> with <code>Array.new(3) { [] }</code>"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1475035841, "post_id": 39737697, "comment_id": 66773561, "body": "@JaredGoguen: Precisely correct, same reasoning in Ruby and Python for this."}, {"owner": {"reputation": 5463, "user_id": 4695064, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-KpAhKljoGO4/AAAAAAAAAAI/AAAAAAAAAHU/fb44qBeaDww/photo.jpg?sz=128", "display_name": "raj", "link": "https://stackoverflow.com/users/4695064/raj"}, "edited": false, "score": 1, "creation_date": 1475035928, "post_id": 39737697, "comment_id": 66773581, "body": "Or you can use <code>a[1] = [2]</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1475043735, "post_id": 39737697, "comment_id": 66776454, "body": "In the last three years, askers suspected their problem was the result of a Ruby bug 382 times. It turned out it actually was a bug 3 times. (Source: D. Trump.)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1475043904, "post_id": 39737697, "comment_id": 66776525, "body": "@CarySwoveland My laughter must\u2019ve been heard in Denver, CO. Brilliant."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1475043955, "post_id": 39737697, "comment_id": 66776544, "body": "@mudasobwa, I wouldn&#39;t know about Denver, but it didn&#39;t make it to Victoria."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1475044094, "post_id": 39737697, "comment_id": 66776615, "body": "@CarySwoveland I bet it\u2019s because [as I was told] Canada has soundproof borders."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1475044963, "post_id": 39737697, "comment_id": 66777089, "body": "Hint: how many arrays did you create?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1475047337, "post_id": 39737697, "comment_id": 66778498, "body": "Another way to do the same thing: <code>[1, 2, 3].each_with_object({}) { |k, h| h[k] = [] }</code> - this way you avoid creating the useless array of arrays, and directly make (and populate) a hash. Also, possibly off-topic, but you might actually be gunning for this: <code>a = Hash.new { |h, k| h[k] = [] }</code>. This will give you an empty hash, but with a new <code>Array</code> as a default value for every key. <code>a[1] &lt;&lt; 2; a[2] &lt;&lt; 3; a[2] &lt;&lt; 4; a</code> will give you <code>{1=&gt;[2], 2=&gt;[3, 4]}</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1475044512, "post_id": 39738447, "comment_id": 66776828, "body": "very nice detailed explanation 1+"}], "tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": true, "score": 4, "last_activity_date": 1475039068, "creation_date": 1475039068, "answer_id": 39738447, "question_id": 39737697, "link": "https://stackoverflow.com/questions/39737697/ruby-hash-bug-anomality-or-normal/39738447#39738447", "title": "Ruby hash bug, anomality or normal?", "body": "<p>It is expected, since when you're creating the second array in <code>zip</code> is the same object:</p>\n\n<pre><code>a = [1, 2, 3].zip([[]]*3)\n #=&gt; [[1, []], [2, []], [3, []]]\na.map{|aa| aa.last.object_id }\n #=&gt; [70307853627580, 70307853627580, 70307853627580]\n</code></pre>\n\n<p>So, when you try to update that object, it gets reflected across the object <code>a</code>:</p>\n\n<pre><code>a[0][1] &lt;&lt; 2\n #=&gt; [2]\np a\n #=&gt; [[1, [2]], [2, [2]], [3, [2]]]\n</code></pre>\n\n<p>To create an <a href=\"https://ruby-doc.org/core-2.2.0/Array.html\" rel=\"nofollow\">array</a> with separate objects a block can be passed instead. This method is safe to use with mutable objects such as hashes, strings or other arrays:</p>\n\n<pre><code>a = [1, 2, 3].zip( Array.new(3) { [] } )\n #=&gt; [[1, []], [2, []], [3, []]]\na[0][1] &lt;&lt; 2\n #=&gt; [2]\np a\n #=&gt; [[1, [2]], [2, []], [3, []]]\n</code></pre>\n\n<p>I would encourage you to read <a href=\"http://tenderlovemaking.com/2015/02/11/weird-stuff-with-hashes.html\" rel=\"nofollow\">this article</a> which talks about such scenarios with hashes by Aaron Patterson.</p>\n"}], "owner": {"reputation": 1984, "user_id": 2623749, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fcbbc9a5894aea56bce09a71a25e560f?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/2623749/lokesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 39738447, "answer_count": 1, "score": -1, "last_activity_date": 1475039068, "creation_date": 1475034448, "question_id": 39737697, "link": "https://stackoverflow.com/questions/39737697/ruby-hash-bug-anomality-or-normal", "title": "Ruby hash bug, anomality or normal?", "body": "<p>Is the following, a Ruby bug or perfectly normal?</p>\n\n<pre><code>&gt; a = [1, 2, 3].zip([[]]*3).to_h\n=&gt; {1=&gt;[], 2=&gt;[], 3=&gt;[]}\n&gt; a[1] &lt;&lt; 2\n=&gt; [2]\n&gt; a\n=&gt; {1=&gt;[2], 2=&gt;[2], 3=&gt;[2]}\n</code></pre>\n\n<p>I do not expect all values to get appended by <code>2</code> as I only meant to add <code>2</code> in the place where key is <code>1</code>.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1475037485, "post_id": 39737570, "comment_id": 66774021, "body": "Any particular reason you&#39;re not using an XML parser for this?"}], "answers": [{"comments": [{"owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "edited": false, "score": 0, "creation_date": 1475042402, "post_id": 39737702, "comment_id": 66775793, "body": "Thanks Amadan. I don&#39;t know those gems. I will have a look."}, {"owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "edited": false, "score": 0, "creation_date": 1475043246, "post_id": 39737702, "comment_id": 66776201, "body": "Just a note. Even if I remove the (?&lt;sentence_id&gt;) it still only returns the same small sample data set."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1475044458, "last_edit_date": 1475044458, "creation_date": 1475034476, "answer_id": 39737702, "question_id": 39737570, "link": "https://stackoverflow.com/questions/39737570/matchdata-not-returning-the-same-data-set-as-scan/39737702#39737702", "title": "Matchdata not returning the same data set as scan", "body": "<p><a href=\"https://ruby-doc.org/core-2.3.0/Regexp.html#class-Regexp-label-Capturing\" rel=\"nofollow\">From Ruby docs</a>:</p>\n\n<blockquote>\n  <p><strong>Note:</strong> A regexp can't use named backreferences and numbered backreferences simultaneously.</p>\n</blockquote>\n\n<p>It is not a difference between <code>scan</code> and <code>match</code>; you're using different regexps. In your second regexp, <code>(?&lt;sentence_id&gt;...)</code> is the only capture, as <code>(...)</code> don't work.</p>\n\n<p>Obligatory note: this would be soo much easier if you used Nokogiri, Oga, REXML, or any other XML parsing engine, rather than regexp.</p>\n\n<p>EDIT:</p>\n\n<pre><code>re = /&lt;w:ins.+?w:rsidR=\"([A-Z0-9]+)\".+?&lt;w:t&gt;(\\w+).+?w:rsidDel=\"([A-Z0-9]+)\".+?&lt;w:delText&gt;(\\w+)/m\n\ntext.scan(re)\n# =&gt; [[\"003566BF\", \"went\", \"003566BF\", \"goes\"], [\"003566BF\", \"purchase\", \"003566BF\", \"buy\"], [\"008C3761\", \"replace\", \"008C3761\", \"reason\"], [\"009D3E86\", \"place\", \"009D3E86\", \"store\"]] \n\nre.match(text)\n# =&gt; #&lt;MatchData \"&lt;w:ins w:id=\\\"0\\\" w:author=\\\"Mitchell Gou\\\"\\nw:date=\\\"2016-09-28T09:15:00Z\\\"&gt;&lt;w:r\\nw:rsidR=\\\"003566BF\\\"&gt;&lt;w:t&gt;went&lt;/w:t&gt;&lt;/w:r&gt;&lt;/w:ins&gt;&lt;w:del w:id=\\\"1\\\"\\nw:author=\\\"Mitchell Gou\\\" w:date=\\\"2016-09-28T09:15:00Z\\\"&gt;&lt;w:r\\nw:rsidDel=\\\"003566BF\\\"&gt;&lt;w:delText&gt;goes\" 1:\"003566BF\" 2:\"went\" 3:\"003566BF\" 4:\"goes\"&gt;\n\nre.match(text).captures\n# =&gt; [\"003566BF\", \"went\", \"003566BF\", \"goes\"]\n\n[].tap { |r|\n  p = 0\n  while m = re.match(text, p)\n    r &lt;&lt; m.captures\n    p = m.end(0)\n  end\n}\n# =&gt; [[\"003566BF\", \"went\", \"003566BF\", \"goes\"], [\"003566BF\", \"purchase\", \"003566BF\", \"buy\"], [\"008C3761\", \"replace\", \"008C3761\", \"reason\"], [\"009D3E86\", \"place\", \"009D3E86\", \"store\"]] \n</code></pre>\n"}], "owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475044458, "creation_date": 1475033481, "question_id": 39737570, "link": "https://stackoverflow.com/questions/39737570/matchdata-not-returning-the-same-data-set-as-scan", "title": "Matchdata not returning the same data set as scan", "body": "<p>Given the following text:</p>\n\n<pre><code>text = '&lt;w:body&gt;&lt;w:p\nw14:paraId=\"56037BEC\" w14:textId=\"3419ABF1\" w:rsidR=\"001665B3\"\nw:rsidRDefault=\"008B4AC6\"&gt;&lt;w:r&gt;&lt;w:t xml:space=\"preserve\"&gt;This is the\nstory of a man who &lt;/w:t&gt;&lt;/w:r&gt;&lt;w:ins w:id=\"0\" w:author=\"Mitchell Gou\"\nw:date=\"2016-09-28T09:15:00Z\"&gt;&lt;w:r\nw:rsidR=\"003566BF\"&gt;&lt;w:t&gt;went&lt;/w:t&gt;&lt;/w:r&gt;&lt;/w:ins&gt;&lt;w:del w:id=\"1\"\nw:author=\"Mitchell Gou\" w:date=\"2016-09-28T09:15:00Z\"&gt;&lt;w:r\nw:rsidDel=\"003566BF\"&gt;&lt;w:delText&gt;goes&lt;/w:delText&gt;&lt;/w:r&gt;&lt;/w:del&gt;&lt;w:r&gt;&lt;w:t\nxml:space=\"preserve\"&gt; to the store to &lt;/w:t&gt;&lt;/w:r&gt;&lt;w:ins w:id=\"2\"\nw:author=\"Mitchell Gou\" w:date=\"2016-09-28T09:15:00Z\"&gt;&lt;w:r\nw:rsidR=\"003566BF\"&gt;&lt;w:t&gt;purchase&lt;/w:t&gt;&lt;/w:r&gt;&lt;/w:ins&gt;&lt;w:del w:id=\"3\"\nw:author=\"Mitchell Gou\" w:date=\"2016-09-28T09:15:00Z\"&gt;&lt;w:r\nw:rsidDel=\"003566BF\"&gt;&lt;w:delText&gt;buy&lt;/w:delText&gt;&lt;/w:r&gt;&lt;/w:del&gt;&lt;w:r&gt;&lt;w:t\nxml:space=\"preserve\"&gt; some milk.&lt;/w:t&gt;&lt;/w:r&gt;&lt;w:r w:rsidR=\"008C3761\"&gt;&lt;w:t\nxml:space=\"preserve\"&gt; The was a &lt;/w:t&gt;&lt;/w:r&gt;&lt;w:ins w:id=\"4\"\nw:author=\"Mitchell Gou\" w:date=\"2016-09-28T09:18:00Z\"&gt;&lt;w:r\nw:rsidR=\"008C3761\"&gt;&lt;w:t&gt;replace&lt;/w:t&gt;&lt;/w:r&gt;&lt;/w:ins&gt;&lt;w:del w:id=\"5\"\nw:author=\"Mitchell Gou\" w:date=\"2016-09-28T09:18:00Z\"&gt;&lt;w:r\nw:rsidR=\"008C3761\"\nw:rsidDel=\"008C3761\"&gt;&lt;w:delText&gt;reason&lt;/w:delText&gt;&lt;/w:r&gt;&lt;/w:del&gt;&lt;w:r\nw:rsidR=\"008C3761\"&gt;&lt;w:t xml:space=\"preserve\"&gt; to remove the milk that\nwas already inside the man\u2019s house.&lt;/w:t&gt;&lt;/w:r&gt;&lt;w:r\nw:rsidR=\"009D3E86\"&gt;&lt;w:t xml:space=\"preserve\"&gt; He wanted to\nre&lt;/w:t&gt;&lt;/w:r&gt;&lt;w:ins w:id=\"6\" w:author=\"Mitchell Gou\"\nw:date=\"2016-09-28T09:22:00Z\"&gt;&lt;w:r\nw:rsidR=\"009D3E86\"&gt;&lt;w:t&gt;place&lt;/w:t&gt;&lt;/w:r&gt;&lt;/w:ins&gt;&lt;w:bookmarkStart\nw:id=\"7\" w:name=\"_GoBack\"/&gt;&lt;w:bookmarkEnd w:id=\"7\"/&gt;&lt;w:del w:id=\"8\"\nw:author=\"Mitchell Gou\" w:date=\"2016-09-28T09:22:00Z\"&gt;&lt;w:r\nw:rsidR=\"009D3E86\"\nw:rsidDel=\"009D3E86\"&gt;&lt;w:delText&gt;store&lt;/w:delText&gt;&lt;/w:r&gt;&lt;/w:del&gt;&lt;w:r\nw:rsidR=\"009D3E86\"&gt;&lt;w:t xml:space=\"preserve\"&gt; the\nmilk.&lt;/w:t&gt;&lt;/w:r&gt;&lt;/w:p&gt;&lt;w:sectPr w:rsidR=\"001665B3\"\nw:rsidSect=\"00521CD0\"&gt;&lt;w:pgSz w:w=\"11900\" w:h=\"16840\"/&gt;&lt;w:pgMar\nw:top=\"1440\" w:right=\"1440\" w:bottom=\"1440\" w:left=\"1440\" w:header=\"708\"\nw:footer=\"708\" w:gutter=\"0\"/&gt;&lt;w:cols w:space=\"708\"/&gt;&lt;w:docGrid\nw:linePitch=\"360\"/&gt;&lt;/w:sectPr&gt;&lt;/w:body&gt;'\n</code></pre>\n\n<p>And using the following regex:</p>\n\n<pre><code>scan_result = text.scan(/&lt;w:ins.+?w:rsidR=\"([A-Z0-9]+)\".+?&lt;w:t&gt;(\\w+).+?w:rsidDel=\"([A-Z0-9]+)\".+?&lt;w:delText&gt;(\\w+)/m)\n</code></pre>\n\n<p>I get the following result:</p>\n\n<pre><code>[[\"003566BF\", \"went\", \"003566BF\", \"goes\"], [\"003566BF\", \"purchase\", \"003566BF\", \"buy\"], [\"008C3761\", \"replace\", \"008C3761\", \"reason\"], [\"009D3E86\", \"place\", \"009D3E86\", \"store\"]]\n</code></pre>\n\n<p>However using matchdata does not return the same data set:</p>\n\n<pre><code>/&lt;w:ins.+?w:rsidR=\"(?&lt;sentence_id&gt;[A-Z0-9]+)\".+?&lt;w:t&gt;(\\w+).+?w:rsidDel=\"([A-Z0-9]+)\".+?&lt;w:delText&gt;(\\w+)/m.match(text)\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>&lt;w:ins w:id=\"0\" w:author=\"Mitchell Gould\"\nw:date=\"2016-09-28T09:15:00Z\"&gt;&lt;w:r\nw:rsidR=\"003566BF\"&gt;&lt;w:t&gt;went&lt;/w:t&gt;&lt;/w:r&gt;&lt;/w:ins&gt;&lt;w:del w:id=\"1\"\nw:author=\"Mitchell Gould\" w:date=\"2016-09-28T09:15:00Z\"&gt;&lt;w:r\nw:rsidDel=\"003566BF\"&gt;&lt;w:delText&gt;goes\n</code></pre>\n\n<p>It does not seem to match all of the data. Why is this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows-7", "rubygems", "stomp"], "comments": [{"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475035698, "post_id": 39737459, "comment_id": 66773522, "body": "have you installed stomp gem? please show output of <code>gem which stomp</code>."}, {"owner": {"reputation": 7470, "user_id": 628242, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/01b9988af2a27e49c4d59ef2bff15f12?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/628242/lokesh"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475035893, "post_id": 39737459, "comment_id": 66773571, "body": "@Aleksey: It says &quot;ERROR:  Can&#39;t find ruby library file or shared library stomp&quot;. Can you give me the command to install Stomp?"}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475036009, "post_id": 39737459, "comment_id": 66773597, "body": "To install a gem run <code>gem install GEMNAME</code>. In this particular case <code>gem install stomp</code>"}, {"owner": {"reputation": 7470, "user_id": 628242, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/01b9988af2a27e49c4d59ef2bff15f12?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/628242/lokesh"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475036273, "post_id": 39737459, "comment_id": 66773671, "body": "@Aleksey: Thanks a lot. Finally the issue is resolved. If you can add your comment as answer then i will accept it."}], "answers": [{"tags": [], "owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "is_accepted": true, "score": 2, "last_activity_date": 1475037422, "last_edit_date": 1475037422, "creation_date": 1475036416, "answer_id": 39737988, "question_id": 39737459, "link": "https://stackoverflow.com/questions/39737459/getting-error-while-running-ruby-script/39737988#39737988", "title": "Getting error while running ruby script", "body": "<p>Seems like you don't have <code>stomp</code> gem installed.<br>\nYou can install any gem you want with <code>gem install GEMNAME</code>.</p>\n\n<p>In your particular case <code>GEMNAME</code> is <code>stomp</code>.<br>\nSo try to run <code>gem install stomp</code> and run your script once again.</p>\n\n<p><em>P.S.</em><br>\nBy default <code>gem install</code> command uses <a href=\"https://rubygems.org/\" rel=\"nofollow\">rubygems</a> as gem source.<br>\nSo you can always check out gem names here.</p>\n"}], "owner": {"reputation": 7470, "user_id": 628242, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/01b9988af2a27e49c4d59ef2bff15f12?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/628242/lokesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 39737988, "answer_count": 1, "score": 0, "last_activity_date": 1475037422, "creation_date": 1475032619, "question_id": 39737459, "link": "https://stackoverflow.com/questions/39737459/getting-error-while-running-ruby-script", "title": "Getting error while running ruby script", "body": "<p>I am trying to run a ruby script which is basically a Stomp client to make call to ActiveMQ broker.</p>\n\n<p>When i run the script, i get this error:</p>\n\n<pre><code>going to startC:/Ruby22-x64/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:5\n4:in `require': cannot load such file -- stomp (LoadError)\n        from C:/Ruby22-x64/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54\n:in `require'\n        from C:/Users/lokesh.kumar/Documents/issues/ActiveMQ-slowness/activemq-c\nacti-plugin.rb:34:in `&lt;main&gt;'\n</code></pre>\n\n<p>Following is the result of command <code>gem env</code> </p>\n\n<pre><code>C:\\Users\\lokesh.kumar&gt;gem env\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.4.5.1\n  - RUBY VERSION: 2.2.5 (2016-04-26 patchlevel 319) [x64-mingw32]\n  - INSTALLATION DIRECTORY: C:/Ruby22-x64/lib/ruby/gems/2.2.0\n  - RUBY EXECUTABLE: C:/Ruby22-x64/bin/ruby.exe\n  - EXECUTABLE DIRECTORY: C:/Ruby22-x64/bin\n  - SPEC CACHE DIRECTORY: Z:/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: C:/ProgramData\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x64-mingw32\n  - GEM PATHS:\n     - C:/Ruby22-x64/lib/ruby/gems/2.2.0\n     - Z:/.gem/ruby/2.2.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - C:\\oracle\\product\\11.2.0\\client_1\\bin\n     - C:\\Windows\\system32\n     - C:\\Windows\n     - C:\\Windows\\System32\\Wbem\n     - C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\\n     - C:\\Program Files\\TortoiseHg\\\n     - C:\\Program Files\\TortoiseSVN\\bin\n     - C:\\Program Files (x86)\\Enterprise Vault\\EVClient\\\n     - C:\\Program Files (x86)\\ATI Technologies\\ATI.ACE\\Core-Static\n     - C:\\Program Files (x86)\\GitExtensions\\\n     - C:\\Program Files (x86)\\AMD\\ATI.ACE\\Core-Static\n     - C:\\Program Files (x86)\\Skype\\Phone\\\n     - c:\\Program Files\\TortoiseGit\\bin\n     - C:\\Ruby22-x64\\bin\n     - C:\\Users\\lokesh.kumar\\.babun\n     - D:\\Installations\\apache-maven-3.2.5\\bin\n     - C:\\Program Files\\Java\\jdk1.8.0_91\\bin\n</code></pre>\n\n<p>I have never worked in Ruby, so it might be a basic installation mistake. Any pointers to resolve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu-16.04", "mysql2"], "answers": [{"comments": [{"owner": {"reputation": 477, "user_id": 4040068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ec4f6494657810aff1586dae56e46f?s=128&d=identicon&r=PG&f=1", "display_name": "bugybunny", "link": "https://stackoverflow.com/users/4040068/bugybunny"}, "edited": false, "score": 0, "creation_date": 1475096797, "post_id": 39745512, "comment_id": 66811308, "body": "I don\u2019t know why but this fixed my problem I had a problem similiar to OPs. Thank you so much! I had gcc installed, no updates available and an errormessage about an unsupported gcc compiler flag."}], "tags": [], "owner": {"reputation": 36, "user_id": 6893282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee82f76e03dc8445adaa0b854a8105e7?s=128&d=identicon&r=PG&f=1", "display_name": "anon", "link": "https://stackoverflow.com/users/6893282/anon"}, "is_accepted": true, "score": 2, "last_activity_date": 1475060226, "creation_date": 1475060226, "answer_id": 39745512, "question_id": 39737364, "link": "https://stackoverflow.com/questions/39737364/error-installing-mysql2-gem-on-ubuntu-16-04lts/39745512#39745512", "title": "Error installing mysql2 gem on Ubuntu 16.04LTS", "body": "<p>Try install gcc and make. This work for me.</p>\n\n<pre><code>apt-get install gcc make\n</code></pre>\n"}], "owner": {"reputation": 593, "user_id": 1371410, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9dda381cb2a69dda3727f7a25520c726?s=128&d=identicon&r=PG", "display_name": "cpliu338", "link": "https://stackoverflow.com/users/1371410/cpliu338"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 2, "accepted_answer_id": 39745512, "answer_count": 1, "score": 1, "last_activity_date": 1475060226, "creation_date": 1475031888, "last_edit_date": 1495542877, "question_id": 39737364, "link": "https://stackoverflow.com/questions/39737364/error-installing-mysql2-gem-on-ubuntu-16-04lts", "title": "Error installing mysql2 gem on Ubuntu 16.04LTS", "body": "<p>I tried sudo gem install mysql2 -v '0.4.4' and got error.  Checking /var/lib/gems/2.3.0/extensions/x86_64-linux/2.3.0/mysql2-0.4.4/mkmf.log:</p>\n\n<pre><code>\"gcc -o conftest -I/usr/include/x86_64-linux-gnu/ruby-2.3.0 -I/usr/include/ruby-2.3.0/ruby/backward -I/usr/include/ruby-2.3.0 -I. -Wdate-time -D_FORTIFY_SOURCE=2   -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -fPIC conftest.c  -L. -L/usr/lib/x86_64-linux-gnu -L. -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now -fstack-protector -rdynamic -Wl,-export-dynamic     -lruby-2.3  -lpthread -lgmp -ldl -lcrypt -lm   -lc\"\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: int main(int argc, char **argv)\n4: {\n5:   return 0;\n6: }\n/* end */\n</code></pre>\n\n<p>So it seems to me ruby.h was the problem.  But I can find it in:</p>\n\n<pre><code>/usr/include/ruby-2.3.0/ruby/ruby.h\n/usr/include/ruby-2.3.0/ruby.h\n</code></pre>\n\n<p>I checked <a href=\"https://stackoverflow.com/questions/20559255/error-while-installing-json-gem-mkmf-rb-cant-find-header-files-for-ruby\">Error while installing json gem &#39;mkmf.rb can&#39;t find header files for ruby&#39;</a> but in fact I have installed ruby development.</p>\n\n<p>sudo dpkg -l | grep ruby also shows I have:</p>\n\n<pre><code>sudo dpkg -l | grep ruby\nii  libruby2.3:amd64                      2.3.1-2~16.04                     amd64        Libraries necessary to run Ruby 2.3\nii  rake                                  10.5.0-2                          all          ruby make-like utility\nii  ruby                                  1:2.3.0+1                         all          Interpreter of object-oriented scripting language Ruby (default version)\nii  ruby-bundler                          1.11.2-1                          all          Manage Ruby application dependencies (runtime)\nii  ruby-dev:amd64                        1:2.3.0+1                         amd64        Header files for compiling extension modules for Ruby (default version)\nii  ruby-did-you-mean                     1.0.0-2                           all          smart error messages for Ruby &gt; 2.3\nii  ruby-eventmachine                     1.0.7-3build3                     amd64        Ruby/EventMachine library\nii  ruby-minitest                         5.8.4-2                           all          Ruby test tools supporting TDD, BDD, mocking, and benchmarking\nii  ruby-molinillo                        0.4.3-1                           all          generic dependency resolution algorithm\nii  ruby-mysql                            2.9.1-1ubuntu1                    amd64        MySQL module for Ruby\nii  ruby-mysql2                           0.4.3-2ubuntu2                    amd64        simple, fast MySQL library for Ruby\nii  ruby-net-http-persistent              2.9.4-1                           all          Manages persistent connections using Net::HTTP\nii  ruby-net-telnet                       0.1.1-2                           all          telnet client library\nii  ruby-power-assert                     0.2.7-1                           all          library showing values of variables and method calls in an expression\nii  ruby-test-unit                        3.1.7-2                           all          unit testing framework for Ruby\nii  ruby-thor                             0.19.1-2                          all          Ruby scripting framework\nii  ruby2.3                               2.3.1-2~16.04                     amd64        Interpreter of object-oriented scripting language Ruby\nii  ruby2.3-dev:amd64                     2.3.1-2~16.04                     amd64        Header files for compiling extension modules for the Ruby 2.3\nii  rubygems-integration                  1.10                              all          integration of Debian Ruby packages with Rubygems\n</code></pre>\n\n<p>So how can I fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "callback"], "comments": [{"owner": {"reputation": 7832, "user_id": 2497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d33a294d8b03b0eec187cb1dc4d8d7?s=128&d=identicon&r=PG", "display_name": "Srdjan Pejic", "link": "https://stackoverflow.com/users/2497/srdjan-pejic"}, "edited": false, "score": 1, "creation_date": 1475030318, "post_id": 39737122, "comment_id": 66772270, "body": "Is there a reason for this needing to be a callback rather than explicit actions taken closer to the call sites?"}, {"owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "edited": false, "score": 0, "creation_date": 1475030757, "post_id": 39737122, "comment_id": 66772372, "body": "you can try using single line for both create/save callback scenarios <code>after_commit :email_alert, :if =&gt; :persisted?</code>"}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 0, "last_activity_date": 1475043281, "last_edit_date": 1475043281, "creation_date": 1475042468, "answer_id": 39739120, "question_id": 39737122, "link": "https://stackoverflow.com/questions/39737122/callback-is-fired-twice/39739120#39739120", "title": "Callback is fired twice", "body": "<blockquote>\n  <p>Anyway, my current problem is that the email_alert is getting\n  triggered twice.</p>\n</blockquote>\n\n<p>The only callbacks, that have <code>on</code> option are:</p>\n\n<ul>\n<li><code>before_validation</code></li>\n<li><code>after_commit</code></li>\n</ul>\n\n<p><code>after_save</code> does not have this option, thus it is being fired on save (along with <code>after_commit</code>).</p>\n\n<p>You can use <a href=\"http://apidock.com/rails/ActiveRecord/Callbacks/after_update\" rel=\"nofollow\"><code>after_update</code></a>, or <code>before_validation</code> <code>on: :update</code>.</p>\n\n<p>But I would sit and think of a way to make this a single callback, having it <code>before_validation</code>, and performing logic <strong>inside</strong> the callback's method.</p>\n"}], "owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 39739120, "answer_count": 1, "score": 1, "last_activity_date": 1475116158, "creation_date": 1475030034, "last_edit_date": 1475116158, "question_id": 39737122, "link": "https://stackoverflow.com/questions/39737122/callback-is-fired-twice", "title": "Callback is fired twice", "body": "<p>I've been trying to debug this code for awhile to no success...</p>\n\n<p>I have callback on my <code>Order</code> object to send a confirmation email email after the Terms of Service have been agreed to. There are 2 ways in which a user could place the order:</p>\n\n<ol>\n<li>The user places (<code>create</code>) the order and agrees to the Terms of Service on the spot </li>\n<li>The user places (<code>create</code>) the order but waits to agree to the Terms of Service => At some later point the user agrees to the Terms of Service (<code>update</code>)</li>\n</ol>\n\n<p>Thus, my callback code looks like this:</p>\n\n<pre><code>class Order\n  include ActiveModel::Dirty\n\n  # for scenario 1\n  after_commit :email_alert, on: :create \n\n  #for scenario 2, executes only if agree_tos is changed because user could update other\n  #things about the order WITHOUT agreeing to terms. Also agree_tos_changed? is enough\n  #because it will only ever change to true, there's no nil or false option \n  after_save :email_alert, on: :update, if: :agree_tos_changed? \nend\n</code></pre>\n\n<p><code>ActiveModel::Dirty</code> is working fine because I have it elsewhere. Anyway, my current problem is that the <code>email_alert</code> is getting triggered twice. But I can't figure out why since the code seems MECE enough to me...</p>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1475100181, "post_id": 39736915, "comment_id": 66812783, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. When asking about a problem with code we need the minimum input data (HTML in this case) that demonstrates the problem in the question itself. Don&#39;t ask us to go to a site and read through an entire page as it slows down our response time for you and affects our ability to help others. You should never need to chain each tag using <code>css</code> or <code>search</code>. Instead use more complex selectors that jump from landmark to landmark to the target in the markup. That is less fragile. Also, you should wait longer before selecting an answer."}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 5264722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d51852beefbdf3ba06c3f65217435606?s=128&d=identicon&r=PG&f=1", "display_name": "PiperWarrior", "link": "https://stackoverflow.com/users/5264722/piperwarrior"}, "edited": false, "score": 0, "creation_date": 1475030056, "post_id": 39737063, "comment_id": 66772207, "body": "I meant changing local variable link in block to link = row.css(&#39;td&#39;)[4].class gives Nokogiri::XML::Element"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 191, "user_id": 5264722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d51852beefbdf3ba06c3f65217435606?s=128&d=identicon&r=PG&f=1", "display_name": "PiperWarrior", "link": "https://stackoverflow.com/users/5264722/piperwarrior"}, "edited": false, "score": 1, "creation_date": 1475030174, "post_id": 39737063, "comment_id": 66772238, "body": "I know what you meant. It does for 80 rows (the ones with 12 <code>td</code>); not for the first one (the one with no <code>td</code>)."}, {"owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "edited": false, "score": 1, "creation_date": 1475030347, "post_id": 39737063, "comment_id": 66772280, "body": "@Amadan is right, the first row has a <code>th</code> instead of <code>td</code> that&#39;s because you getting <code>NoMethodError</code> <code>values = row.css(&#39;td&#39;).map(&amp;:text) =&gt; []</code>"}, {"owner": {"reputation": 191, "user_id": 5264722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d51852beefbdf3ba06c3f65217435606?s=128&d=identicon&r=PG&f=1", "display_name": "PiperWarrior", "link": "https://stackoverflow.com/users/5264722/piperwarrior"}, "edited": false, "score": 0, "creation_date": 1475030960, "post_id": 39737063, "comment_id": 66772401, "body": "@Amadan I ignored the first row by using each_with_index and iterating only when index != 0. That worked."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 1, "last_activity_date": 1475030206, "last_edit_date": 1475030206, "creation_date": 1475029572, "answer_id": 39737063, "question_id": 39736915, "link": "https://stackoverflow.com/questions/39736915/cannot-access-nokogiri-element-within-block/39737063#39737063", "title": "Cannot access Nokogiri element within block", "body": "<p>The crucial insight is that in the first case, <code>own_table.css('tr')</code> returns a <code>NodeSet</code>, <code>.css('td')</code> finds all the <code>td</code> that is descendant to any nodes in that nodeset, then finds the fourth one (speaking as a programmer, fifth for normal people :P ).</p>\n\n<p>The second snippet treats each row individually as a <code>Node</code>, then finds all descendant <code>td</code>, then picks the fourth one.</p>\n\n<p>So if you have this structure:</p>\n\n<pre><code>tr id=1\n  td id=2\n  td id=3\ntr id=4\n  td id=5\n  td id=6\n  td id=7\n  td id=8\n  td id=9\n</code></pre>\n\n<p>then the first snippet will give you the id 7 td (it being the fourth td in all tr); the second snippet would try to find the fourth <code>td</code> in id 1 tr, then fourth <code>td</code> in id 4 tr, but it errors out because id 1 tr doesn't have a fourth td.</p>\n\n<p>Edit: Specifically, having checked your URL, the first <code>tr</code> has no <code>td</code>; all the others have 12. So <code>own_table.css('tr')[0].css('td')[4].class</code> is <code>NilClass</code>, not <code>Nokogiri::XML::Element</code> as you report.</p>\n"}, {"comments": [{"owner": {"reputation": 191, "user_id": 5264722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d51852beefbdf3ba06c3f65217435606?s=128&d=identicon&r=PG&f=1", "display_name": "PiperWarrior", "link": "https://stackoverflow.com/users/5264722/piperwarrior"}, "edited": false, "score": 0, "creation_date": 1475110618, "post_id": 39758569, "comment_id": 66815400, "body": "Also, in the code above, doc.css(&#39;div&#39;).css(&#39;span&#39;).css(&#39;p&#39;).to_html does not work as specified (it returns an empty string). If you remove, css(&#39;span&#39;), it does."}, {"owner": {"reputation": 191, "user_id": 5264722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d51852beefbdf3ba06c3f65217435606?s=128&d=identicon&r=PG&f=1", "display_name": "PiperWarrior", "link": "https://stackoverflow.com/users/5264722/piperwarrior"}, "edited": false, "score": 0, "creation_date": 1475111750, "post_id": 39758569, "comment_id": 66815603, "body": "Very instructive post. The code does look cleaner and does not repeat when rid of chaining."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 191, "user_id": 5264722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d51852beefbdf3ba06c3f65217435606?s=128&d=identicon&r=PG&f=1", "display_name": "PiperWarrior", "link": "https://stackoverflow.com/users/5264722/piperwarrior"}, "edited": false, "score": 0, "creation_date": 1475253004, "post_id": 39758569, "comment_id": 66884929, "body": "<code>If you remove, css(&#39;span&#39;)</code>... That&#39;s because I forgot to update the example to the version with the <code>span</code> tags. I&#39;ll update it."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1493057292, "last_edit_date": 1495540017, "creation_date": 1475101289, "answer_id": 39758569, "question_id": 39736915, "link": "https://stackoverflow.com/questions/39736915/cannot-access-nokogiri-element-within-block/39758569#39758569", "title": "Cannot access Nokogiri element within block", "body": "<p>Consider this:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML(&lt;&lt;EOT)\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;div&gt;&lt;span&gt;&lt;p&gt;foo&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;\n    &lt;div id=\"bar\"&gt;&lt;span&gt;&lt;p&gt;bar&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\nEOT\n</code></pre>\n\n<p>If I chain the methods I'm going to find all matching <code>&lt;p&gt;</code> nodes inside the <code>&lt;div&gt;</code>s:</p>\n\n<pre><code>doc.css('div').css('span').css('p').to_html\n# =&gt; \"&lt;p&gt;foo&lt;/p&gt;&lt;p&gt;bar&lt;/p&gt;\"\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>doc.css('div').css('p').to_html\n# =&gt; \"&lt;p&gt;foo&lt;/p&gt;&lt;p&gt;bar&lt;/p&gt;\"\n</code></pre>\n\n<p>That's equivalent to using the following selectors, only they are a bit more efficient as they don't involve calling libXML multiple times:</p>\n\n<pre><code>doc.css('div span p').to_html\n# =&gt; \"&lt;p&gt;foo&lt;/p&gt;&lt;p&gt;bar&lt;/p&gt;\"\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>doc.css('div p').to_html\n# =&gt; \"&lt;p&gt;foo&lt;/p&gt;&lt;p&gt;bar&lt;/p&gt;\"\n</code></pre>\n\n<p>Really you should find landmarks in the target markup and leapfrog from one to the next, not step from tag to tag:</p>\n\n<pre><code>doc.css('#bar p').to_html\n# =&gt; \"&lt;p&gt;bar&lt;/p&gt;\"\n</code></pre>\n\n<p>If your intention was to find all matches then replace <code>#bar</code> with <code>div</code> in the above selector and it'll loosen the search.</p>\n\n<p>Finally, if your goal is to extract the text of a set of nodes, you don't want to use something like:</p>\n\n<pre><code>doc.css('bar p').text\n</code></pre>\n\n<p><code>css</code>, like <code>search</code> and <code>xpath</code> returns a NodeSet and <code>text</code> will concatenate the text from all returned nodes, making it difficult to retrieve the text from the individual nodes. Instead use:</p>\n\n<pre><code>doc.css('bar p').map(&amp;:text)\n</code></pre>\n\n<p>which will return an array containing the text of each node found:</p>\n\n<pre><code>doc.css('div p').text\n# =&gt; \"foobar\"\n</code></pre>\n\n<p>versus:</p>\n\n<pre><code>doc.css('div p').map(&amp;:text)\n# =&gt; [\"foo\", \"bar\"]\n</code></pre>\n\n<p>See \"<a href=\"https://stackoverflow.com/questions/43594656/how-to-avoid-joining-all-text-from-nodes-when-scraping\">How to avoid joining all text from Nodes when scraping</a>\" also.</p>\n"}], "owner": {"reputation": 191, "user_id": 5264722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d51852beefbdf3ba06c3f65217435606?s=128&d=identicon&r=PG&f=1", "display_name": "PiperWarrior", "link": "https://stackoverflow.com/users/5264722/piperwarrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 2, "accepted_answer_id": 39737063, "answer_count": 2, "score": 0, "last_activity_date": 1493057292, "creation_date": 1475028317, "question_id": 39736915, "link": "https://stackoverflow.com/questions/39736915/cannot-access-nokogiri-element-within-block", "title": "Cannot access Nokogiri element within block", "body": "<p>I run the following successfully:</p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\n\nown = Nokogiri::HTML(open('https://www.sec.gov/cgi-bin/own-disp?action=getowner&amp;CIK=0001513362'))\nown_table = own.css('table#transaction-report')\n\np own_table.css('tr').css('td')[4].css('a').attr('href').value\n</code></pre>\n\n<p><strong>=> \"/Archives/edgar/data/0001513362/000162828016019444/0001628280-16-019444-index.htm\"</strong></p>\n\n<p>However, when I try to use the element above in a block (as shown in code below), I get a NoMethodError for nil:NilClass.</p>\n\n<p>I am confused, because I thought that the local variable link in the block would be the same object as in the code above.</p>\n\n<p>Furthermore, if I change the definition of link below to:</p>\n\n<p>link = row.css('td')[4].class</p>\n\n<p>I get a hash without error, saying the value of link is Nokogiri::XML::Element. </p>\n\n<p>Can anyone explain, why I have a Nokogiri::XML::Element object, but cannot run the css method on it. Especially when I can run it in the first snippet?  </p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\n\nown = Nokogiri::HTML(open('https://www.sec.gov/cgi-bin/own-disp?action=getowner&amp;CIK=0001513362'))\nown_table = own.css('table#transaction-report')\n\n\nown_table.css('tr').each do |row|\n  names = [:acq, :transaction_date, :execution_date, :issuer, :form, :transaction_type, :direct_or_indirect_ownership, :number_of_securities_transacted, :number_of_securities_owned, :line_number, :issuer_cik, :security_name, :url]\n  values = row.css('td').map(&amp;:text)\n  link = row.css('td')[4].css('a').attr('href').value\n  values &lt;&lt; link\n  hash = Hash[names.zip values]\n  puts hash\nend\n\nsecown.rb:11:in `block in &lt;main&gt;': undefined method `css' for nil:NilClass (NoMethodError)\n    from /Users/piperwarrior/.rvm/gems/ruby-2.2.1/gems/nokogiri-1.6.7.2/lib/nokogiri/xml/node_set.rb:187:in `block in each'\n    from /Users/piperwarrior/.rvm/gems/ruby-2.2.1/gems/nokogiri-1.6.7.2/lib/nokogiri/xml/node_set.rb:186:in `upto'\n    from /Users/piperwarrior/.rvm/gems/ruby-2.2.1/gems/nokogiri-1.6.7.2/lib/nokogiri/xml/node_set.rb:186:in `each'\n    from secown.rb:8:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "filterrific"], "answers": [{"tags": [], "owner": {"reputation": 336, "user_id": 7581599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvNsr.jpg?s=128&g=1", "display_name": "csonti", "link": "https://stackoverflow.com/users/7581599/csonti"}, "is_accepted": false, "score": 0, "last_activity_date": 1504183132, "creation_date": 1504183132, "answer_id": 45981671, "question_id": 39736417, "link": "https://stackoverflow.com/questions/39736417/view-is-not-updating-after-applying-filter-ruby-rails-filterrific/45981671#45981671", "title": "view is not updating after applying filter [ruby rails filterrific]", "body": "<p>To me this did the trick:</p>\n\n<ul>\n<li>In app/assets/javascripts/application.js, I've put the line \"//= require turbolinks\" after \"//= require filterrific/filterrific-jquery\" (earlier it was before it)</li>\n<li>After doing the above, filtering or sorting happened still only when I hit refresh in the browser, and I didn't find a solution to that, so I rather added a form submit button as mentioned in \"Disable AJAX auto form submits\" in the documentation (<a href=\"http://filterrific.clearcove.ca/pages/action_view_api.html\" rel=\"nofollow noreferrer\">http://filterrific.clearcove.ca/pages/action_view_api.html</a>). This way you should still click a button or hit Enter, but at least filtering / sorting works.</li>\n</ul>\n\n<p>One more thing: I had also a problem when wanting to sort according to a field in another table (following a belongs_to foreign key relationship). If I did it as mentioned in the source of the sample app in github (<a href=\"https://github.com/jhund/filterrific_demo/blob/master/app/models/student.rb\" rel=\"nofollow noreferrer\">https://github.com/jhund/filterrific_demo/blob/master/app/models/student.rb</a>):</p>\n\n<p>\"order(\"LOWER(countries.name) #{ direction }\").includes(:country)\"</p>\n\n<p>I got an SQL error. When I have changed it to something like</p>\n\n<p>\"joins(:country).order(\"LOWER(countries.name) #{ direction }\")\"</p>\n\n<p>it solved the problem.</p>\n"}], "owner": {"reputation": 939, "user_id": 6636242, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8303e67cc4bc87a8c8d288b58ea73ff6?s=128&d=identicon&r=PG&f=1", "display_name": "krs8888", "link": "https://stackoverflow.com/users/6636242/krs8888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 380, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1504183132, "creation_date": 1475024022, "question_id": 39736417, "link": "https://stackoverflow.com/questions/39736417/view-is-not-updating-after-applying-filter-ruby-rails-filterrific", "title": "view is not updating after applying filter [ruby rails filterrific]", "body": "<p>I have a simple table which displays all the users and its attributes id,name,age,status,location. I want to filter on age and status.</p>\n\n<pre><code>Id name age status location\n1  xz    22  single  ca\n2  yy    23  married ma\n</code></pre>\n\n<p>I am using <a href=\"http://filterrific.clearcove.ca/\" rel=\"nofollow\">filterrific</a> plugin and able to display the list and the filter dropdown.</p>\n\n<p>My user.rb</p>\n\n<pre><code> filterrific(\n    available_filters: [\n      :with_status,\n      :with_age\n    ]\n  )\n\n  scope :with_age, lambda { |age|\n    where(age: [*age])\n  }\n\n  scope :with_status, lambda { |status|\n    where(status: [*status])\n  }\n\n\n  def self.options_for_select\n    order('LOWER(status)').map { |e| [e.status] }.uniq\n  end\n  def self.options_for_select2\n    order('LOWER(age)').map { |e| [e.age] }.uniq\n  end\n</code></pre>\n\n<p>The controller index looks like </p>\n\n<pre><code>def index\n    @filterrific = initialize_filterrific(\n      User,\n      params[:filterrific],\n      select_options: {\n        with_status: User.options_for_select,\n        with_clearance_batch_id: User.options_for_select2\n      },\n      default_filter_params: {},\n      available_filters: [],\n    ) or return\n\n    @users = @filterrific.find\n    respond_to do |format|\n      format.html\n      format.js\n    end\n\n  end\n</code></pre>\n\n<p>the index.html.erb looks like </p>\n\n<pre><code>&lt;%= form_for_filterrific @filterrific do |f| %&gt;\n\n  &lt;div&gt;\n    age\n    &lt;%= f.select(\n      :with_age,\n      @filterrific.select_options[:with_age],\n      { include_blank: '- Any -' },\n      {class: 'form-control' }\n    ) %&gt;\n  &lt;/div&gt;\n  &lt;div&gt;\n    status\n    &lt;%= f.select(\n      :with_status,\n      @filterrific.select_options[:with_status],\n      { include_blank: '- Any -' },\n    ) %&gt;\n  &lt;/div&gt;\n\n&lt;% end %&gt;\n\n&lt;%= render(\n  partial: 'browse_users/list',\n  locals: { users: @users }\n) %&gt;\n</code></pre>\n\n<p>When I go to the page I am able to see all the users. Now when I filter nothing happens. I still see all the users. Not sure what is happening. I have feeling that my scope filter is not getting applied.</p>\n"}, {"tags": ["ruby", "email"], "comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1475021701, "post_id": 39736096, "comment_id": 66770184, "body": "have you tried <code>message.body.decoded</code>?"}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1475023073, "post_id": 39736096, "comment_id": 66770555, "body": "@davidhu2000 yes and the decoded didn&#39;t do anything differently"}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1475024898, "creation_date": 1475024898, "answer_id": 39736506, "question_id": 39736096, "link": "https://stackoverflow.com/questions/39736096/remove-header-characters-from-email-body/39736506#39736506", "title": "Remove header characters from email body", "body": "<p>Those aren't mail headers. That's <a href=\"https://en.wikipedia.org/wiki/MIME\" rel=\"nofollow\">MIME</a> headers in the body of the message. You have a <a href=\"https://en.wikipedia.org/wiki/MIME#Multipart_messages\" rel=\"nofollow\">multi-part email</a>, usually used to provide both text and HTML versions of the same content.</p>\n\n<p>Each part is treated as another Mail::Message to be processed separately. See <a href=\"https://github.com/mikel/mail#reading-a-multipart-email\" rel=\"nofollow\">Reading a Multipart Email</a>.</p>\n\n<pre><code>mail = Mail.read('multipart_email')\n\nmail.multipart?          #=&gt; true\nmail.parts.length        #=&gt; 2\nmail.body.preamble       #=&gt; \"Text before the first part\"\nmail.body.epilogue       #=&gt; \"Text after the last part\"\nmail.parts.map { |p| p.content_type }  #=&gt; ['text/plain', 'application/pdf']\nmail.parts.map { |p| p.class }         #=&gt; [Mail::Message, Mail::Message]\nmail.parts[0].content_type_parameters  #=&gt; {'charset' =&gt; 'ISO-8859-1'}\nmail.parts[1].content_type_parameters  #=&gt; {'name' =&gt; 'my.pdf'}\n</code></pre>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 39736506, "answer_count": 1, "score": 2, "last_activity_date": 1475024898, "creation_date": 1475021194, "question_id": 39736096, "link": "https://stackoverflow.com/questions/39736096/remove-header-characters-from-email-body", "title": "Remove header characters from email body", "body": "<p>I am using net::imap and mail ruby gem. I want to get the email body text, but not the headers. Unfortunately it is returning the header information with the body:</p>\n\n<pre><code>require 'net/imap'\nrequire 'mail'\nimap = Net::IMAP.new('imap.gmail.com',993, true)\nimap.login('user@gmail.com','password')    \nimap.select('INBOX')\nimap.search(['SINCE', Time.now.strftime('%d-%b-%y')])\nraw_message = imap.fetch(1,'RFC822').first.attr['RFC822']\nmessage = Mail.read_from_string raw_message\n\nmessage.body\n =&gt; #&lt;Mail::Body:0x007fa3f4354e00 @boundary=\"94eb2c13d952954cbc053d82a0e7\", @preamble=\"\", @epilogue=\"\", @charset=\"US-ASCII\", @part_sort_order=[\"text/plain\", \"text/enriched\", \"text/html\"], @parts=[#&lt;Mail::Part:70171076755380, Multipart: false, Headers: &lt;Content-Type: text/plain; charset=UTF-8&gt;&gt;, #&lt;Mail::Part:70171076752140, Multipart: false, Headers: &lt;Content-Type: text/html; charset=UTF-8&gt;&gt;], @raw_source=\"--94eb2c13d952954cbc053d82a0e7\\r\\nContent-Type: text/plain; charset=UTF-8\\r\\n\\r\\ntest body\\r\\n\\r\\n--94eb2c13d952954cbc053d82a0e7\\r\\nContent-Type: text/html; charset=UTF-8\\r\\n\\r\\n&lt;div dir=\\\"ltr\\\"&gt;test body&lt;/div&gt;\\r\\n\\r\\n--94eb2c13d952954cbc053d82a0e7--\", @encoding=\"7bit\"&gt; \nmessage.body.raw_source\n =&gt; \"--94eb2c13d952954cbc053d82a0e7\\r\\nContent-Type: text/plain; charset=UTF-8\\r\\n\\r\\ntest body\\r\\n\\r\\n--94eb2c13d952954cbc053d82a0e7\\r\\nContent-Type: text/html; charset=UTF-8\\r\\n\\r\\n&lt;div dir=\\\"ltr\\\"&gt;test body&lt;/div&gt;\\r\\n\\r\\n--94eb2c13d952954cbc053d82a0e7--\" \n</code></pre>\n\n<p>How do I get just the body text?   </p>\n"}, {"tags": ["ruby", "set", "divide", "ruby-2.3.1"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1475027033, "post_id": 39736038, "comment_id": 66771460, "body": "Where you say, &quot;... My input was this..&quot;, I assume the first line (2.5) is the threshold value, the second line gives the number of pairs for which a proximity value is given and the last three lines are of the form <code>value1 value2 proximity_value</code>. If that is correct, it would be much easier for readers to follow the question if you just said that."}, {"owner": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1475044310, "post_id": 39736038, "comment_id": 66776738, "body": "What is &quot;(2.5)&quot;? I wanted to be formal in order to be clear. But sometimes dispensing with formality is better. I see what you are saying. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475044109, "post_id": 39736624, "comment_id": 66776621, "body": "Thank you.  &quot;The Ruby way&quot; by Hal Fulton says &quot;If the arity is 2, it (divide) will perform calls of the form block.call(a,b) to determine\t whether these two items belong together.&quot; And I did get true for block.call(1,2) and block.call(2,5). Can you please cite any reference for &quot;divide will only divide where both block.call(a, b) &amp;&amp; block.call(b, a)&quot;? Also, aren&#39;t  the i and j in |i,j| supposed to be generic elements of sv so that i and j actually stand for s[0] and s[1]? Indeed, I got true exactly for (1,2) and (2,5). Also, in your solution edges[[v1, v2]] || edges[[v1, v2]] = edges[[v1,v2]]."}, {"owner": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475044433, "post_id": 39736624, "comment_id": 66776789, "body": "Did you mean to write  edges[[v1, v2]] || edges[[v2, v1]]?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475044483, "post_id": 39736624, "comment_id": 66776808, "body": "Derp. Yes, I did. Fixed."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475045173, "post_id": 39736624, "comment_id": 66777203, "body": "&quot;Can you please cite any reference&quot; - Looked in the source. <code>Set#divide</code> uses <code>TSort#each_strongly_connected_component</code>; &quot;strongly connected components&quot; are a set of nodes where there is a path from each node to every other node. For example, in [1-&gt;2, 2-&gt;3, 3-&gt;1, 3-&gt;4], nodes 1, 2, 3 are strongly connected. <code>Set#divides</code> will in your case create a graph [1-&gt;2; 2-&gt;5] - but there is no path from 5 to 2 or from 5 to 1 or from 2 to 1, thus 1, 2 and 5 are not strongly connected, thus you get five individual groups."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475045254, "post_id": 39736624, "comment_id": 66777250, "body": "In my example the graph <code>Set#divide</code> creates internally is [1-&gt;2, 2-&gt;1, 2-&gt;5, 5-&gt;2], so you can get from any node to any other (for example, from 5 to 1 you can get by taking 5-&gt;2, 2-&gt;1), thus [1, 2, 5] are a set of strongly connected components, and it works. Indeed, none of this is reflected in RubyDoc."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475045606, "post_id": 39736624, "comment_id": 66777468, "body": "Also notice that in the original example the criterion that was used was <code>{ |i,j| (i - j).abs == 1 }</code>, which is reflexive; it would be much simpler to write <code>{ |i,j| i - j == 1 }</code>, but then it wouldn&#39;t have worked."}, {"owner": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475045751, "post_id": 39736624, "comment_id": 66777548, "body": "Your code worked even before &quot;fixing&quot; it. It worked even when you had the accidentally redundant edges[[v1, v2]] in edges[[v1, v2]] || edges[[v1, v2]]=edges[[v1, v2]]. Does this not indicate that it is enough only for block.call(a,b) to be true? Also, in your example of strongly connected component I suppose 1-&gt;4 and 2-&gt;4 need to be there. Your code may have worked, but I am a little confused since it worked only with edges[[v1,v2]]."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475046012, "post_id": 39736624, "comment_id": 66777710, "body": "For me, <code>edges[[v1, v2]] || edges[[v1, v2]]=edges[[v1, v2]]</code> makes the code not work; with <code>edges[[v1, v2]] || edges[[v1, v2]]=edges[[v2, v1]]</code>, it does (Ruby 2.3.1). In my example, [1, 2, 3] are a strongly connected subgraph, as they make a circle - you can reach any of them from any other (possibly by going through the third one); node 4 is not strongly connected with them, because while there is a way to get from any of [1, 2, 3] to 4 (e.g. 1-&gt;2-&gt;3-&gt;4), there is no way to get from 4 to any of them."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475046157, "post_id": 39736624, "comment_id": 66777784, "body": "Besides the possibility that another Ruby is doing something different than mine, another possibility is that the input file that you provided is not your real input file, and the input file you tested on actually does provide a reflexive relation (i.e. if there is a row <code>1 2 0.3</code>, there is also a row <code>2 1 0.3</code>)."}, {"owner": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475085766, "post_id": 39736624, "comment_id": 66805276, "body": "I think I know what the problem is. Although I got true for (1,2), I got false for (2,1). That explains it. What should I read to be able to write &quot;Rubyic&quot; code?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475109089, "post_id": 39736624, "comment_id": 66815099, "body": "This might sound flippant, but it&#39;s the only answer I know: Lots of Rubyish code :P"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 1, "last_activity_date": 1475044495, "last_edit_date": 1475044495, "creation_date": 1475025989, "answer_id": 39736624, "question_id": 39736038, "link": "https://stackoverflow.com/questions/39736038/divide-function-for-set-in-ruby-2-3-1/39736624#39736624", "title": "divide function for set in Ruby 2.3.1", "body": "<p><code>divide</code> will only divide where both <code>block.call(a, b)</code> &amp;&amp; <code>block.call(b, a)</code>. Make your <code>se</code> reflexive (i.e. insert also the edges 2-1, 4-3 and 5-2) and it will work. Alternately, make your block return <code>true</code> if either <code>edge.new(i,j)</code> or <code>edge.new(j, i)</code> is in <code>se</code>. There is also an error about types: you're creating an edge from strings (<code>edge.new(s[0],s[1])</code>, but testing against an edge from integers (<code>edge.new(i,j)</code>), so the membership test will fail.</p>\n\n<p>That said, this is very unRubyish code. If I were to rewrite it, it would go like this:</p>\n\n<pre><code>require 'set'\n\nEdge = Struct.new(:v1, :v2, :p)\nedges = {}\nvertices = Set.new\n\nt = gets.chomp.to_f\nn = gets.chomp.to_i\nn.times do\n  v1, v2, p = *gets.chomp.split\n  v1 = v1.to_i\n  v2 = v2.to_i\n  p = p.to_f\n  edge = Edge.new(v1, v2, p)\n\n  edges[[v1, v2]] = edge\n  vertices &lt;&lt; v1 &lt;&lt; v2\nend\n\nc = vertices.divide { |v1, v2|\n  (edge = edges[[v1, v2]] || edges[[v2, v1]]) &amp;&amp; edge.p &gt;= t\n}\n\np c\n# =&gt; #&lt;Set: {#&lt;Set: {1, 2, 5}&gt;, #&lt;Set: {3}&gt;, #&lt;Set: {4}&gt;}&gt;\n</code></pre>\n\n<p>Basically - use a hash so you can always find an edge quickly by its indices, use <code>&lt;&lt;</code> for putting things into other things, remember that the whole point of a set is that it won't insert the same thing twice, objects are truthy so you don't have to explicitly test for <code>!= nil</code>, never ever using <code>for</code> :)</p>\n"}, {"comments": [{"owner": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475087805, "post_id": 39754425, "comment_id": 66806508, "body": "Beautiful. I sensed an intuitive need for _ when I was writing the code before I chanced upon divide. Now I know why they call Ruby zen-like. Thank you very much. I am still stuck in C/C++. How do I get into the Ruby mode?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475090152, "post_id": 39754425, "comment_id": 66807700, "body": "I had not been aware of <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/set/rdoc/Set.html#method-i-divide\" rel=\"nofollow noreferrer\">Set#divide</a>, and am glad to have made the acquaintance. As to how to think in Ruby, aside from recommendations you&#39;ll find for books, blogs and other internet resources, keep posting questions here, and (especially) at SO&#39;s sister-site <a href=\"http://codereview.stackexchange.com/questions/tagged/ruby\">Code Review</a>. Code Review is for working code that you&#39;d like improve; SO is for fixing broken code and getting solutions to coding problems."}, {"owner": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "edited": false, "score": 0, "creation_date": 1475091556, "post_id": 39754425, "comment_id": 66808364, "body": "Thank you. That helps. I think &quot;divide&quot; internally would do what you did above."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1475197144, "last_edit_date": 1475197144, "creation_date": 1475084972, "answer_id": 39754425, "question_id": 39736038, "link": "https://stackoverflow.com/questions/39736038/divide-function-for-set-in-ruby-2-3-1/39754425#39754425", "title": "divide function for set in Ruby 2.3.1", "body": "<p><em>Edit:</em> I discovered that I answered a question that wasn't asked. I mistakenly thought that when <code>[d,e]</code> with proximity <em>less</em> than the threshold is considered, <code>d</code> and <code>e</code> are to be added to one of the (partially-built) sets if there is a \"path\" from <code>d</code> or <code>e</code> to one element of that set. I will leave my answer, however, as it may be of interest to  anyone wanting to solve the problem I've addressed.</p>\n\n<hr>\n\n<p>Here's another way, that doesn't use <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/set/rdoc/Set.html#method-i-divide\" rel=\"nofollow\">Set#divide</a>.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>require 'set'\n\ndef setify(distances, threshold)\n  sets = []\n  g = distances.dup\n  while (ret = g.find { |_,prox| prox &gt;= threshold })\n    (n1,n2),_ = ret\n    s = [n1,n2].to_set\n    g.delete [n1,n2]\n    while (ret = g.find { |(n1,n2),_| s.include?(n1) || s.include?(n2) })\n      pair,_ = ret\n      s.merge pair   \n      g.delete pair\n    end\n    sets &lt;&lt; s\n  end\n  g.keys.flatten.each { |k| sets &lt;&lt; [k].to_set }\n  sets\nend\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>threshold = 0.2\n\ndistances = { [1,2]=&gt;0.3, [3,4]=&gt;0.1, [2,5]=&gt;0.25 }\nsetify(distances, threshold)\n  #=&gt; [#&lt;Set: {1, 2, 5}&gt;, #&lt;Set: {3}&gt;, #&lt;Set: {4}&gt;] \n\ndistances = { [1,2]=&gt;0.3, [3,4]=&gt;0.1, [6,8]=&gt;0.2, [2,5]=&gt;0.25, [8,10]=&gt;0 }\nsetify(distances, threshold)\n  #=&gt; [#&lt;Set: {1, 2, 5}&gt;, #&lt;Set: {6, 8, 10}&gt;, #&lt;Set: {3}&gt;, #&lt;Set: {4}&gt;] \n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>Suppose</p>\n\n<pre><code>threshold = 0.2\ndistances = { [1,2]=&gt;0.3, [3,4]=&gt;0.1, [6,8]=&gt;0.2, [2,5]=&gt;0.25, [8,10]=&gt;0 }\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>sets = []\ng = distances.dup\n  #=&gt; {[1, 2]=&gt;0.3, [3, 4]=&gt;0.1, [6, 8]=&gt;0.2, [2, 5]=&gt;0.25, [8, 10]=&gt;0}\n</code></pre>\n\n<p>As</p>\n\n<pre><code>ret = g.find { |_,prox| prox &gt;= threshold }\n  #=&gt; [[1, 2], 0.3]\n</code></pre>\n\n<p>is truthy, we enter the (outer) <code>while</code> loop. We now with to construct a connected set <code>s</code> that includes <code>1</code> and <code>2</code>.</p>\n\n<pre><code>(n1,n2),_ = ret\n  #=&gt; [[1, 2], 0.3] \ns = [n1,n2].to_set\n  #=&gt; #&lt;Set: {1, 2}&gt;\n</code></pre>\n\n<p>Since <code>[n1,n2]</code> has been dealt with, we must remove that key from <code>g</code> (hence, the need for <code>g = distances.dup</code>, to avoid mutating <code>distances</code>).</p>\n\n<pre><code>g.delete [n1,n2]\n  #=&gt; 0.3\n</code></pre>\n\n<p>Let's see <code>g</code> now.</p>\n\n<pre><code>g #=&gt; {[3, 4]=&gt;0.1, [6, 8]=&gt;0.2, [2, 5]=&gt;0.25, [8, 10]=&gt;0} \n</code></pre>\n\n<p>Now look for another key, <code>[a,b]</code>, in <code>g</code> (not the music key of 'g'), such that <code>a</code> or <code>b</code> (or both) are in the set <code>s</code>. If such a key is found, attempt to add <code>a</code> and <code>b</code> to <code>s</code> and delete the key <code>[a,b]</code> from <code>g</code>. (At most one of the two elements of that key will be added to the set).</p>\n\n<pre><code>ret = g.find { |(n1,n2),_| s.include?(n1) || s.include?(n2) }\n  #=&gt; [[2, 5], 0.25]\n</code></pre>\n\n<p>A key-value pair is found, so we enter the loop</p>\n\n<pre><code>pair,_ = ret\n  #=&gt; [[2, 5], 0.25]\npair\n  #=&gt; [2, 5] \ns.merge pair   \n  #=&gt; #&lt;Set: {1, 2, 5}&gt; \ng.delete pair\n  #=&gt; 0.25 \ng\n  #=&gt; {[3, 4]=&gt;0.1, [6, 8]=&gt;0.2, [8, 10]=&gt;0} \n</code></pre>\n\n<p>Now execute the <code>while</code> expression again.</p>\n\n<pre><code>ret = g.find { |(n1,n2),_| s.include?(n1) || s.include?(n2) }\n  #=&gt; nil\n</code></pre>\n\n<p>As no more keys of <code>g</code> are \"connected\" to elements of <code>s</code> we add <code>s</code> to <code>sets</code>,</p>\n\n<pre><code>sets &lt;&lt; s\n  #=&gt; [#&lt;Set: {1, 2, 5}&gt;]\n</code></pre>\n\n<p>and look to continue in the outer loop.</p>\n\n<pre><code>ret = g.find { |_,prox| prox &gt;= threshold }\n  #=&gt; [[6, 8], 0.2] \n</code></pre>\n\n<p>We have found the start of another set having at least one pair that meets the threshold, we we create a new set and delete the associated key of <code>g</code>,</p>\n\n<pre><code>(n1,n2),_ = ret\n  #=&gt; [[6, 8], 0.2]\nn1 #=&gt; 6\nn2 #=&gt; 8\n\ns = [n1,n2].to_set\n  #=&gt; #&lt;Set: {6, 8}&gt; \ng.delete [n1,n2]\n  #=&gt; 0.2 \ng #=&gt; {[3, 4]=&gt;0.1, [8, 10]=&gt;0} \n</code></pre>\n\n<p>and set about building that set.</p>\n\n<pre><code>ret = g.find { |(n1,n2),_| s.include?(n1) || s.include?(n2) }\n  #=&gt; [[8, 10], 0] \npair,_ = ret\n  #=&gt; [[8, 10], 0] \ns.merge pair   \n  #=&gt; #&lt;Set: {6, 8, 10}&gt; \ng.delete pair\n  #=&gt; 0 \ng #=&gt; {[3, 4]=&gt;0.1} \n\nret = g.find { |(n1,n2),_| s.include?(n1) || s.include?(n2) }\n  #=&gt; nil\n</code></pre>\n\n<p>so we are finished building the set <code>s</code>.</p>\n\n<pre><code>sets &lt;&lt; s\n  #=&gt; [#&lt;Set: {1, 2, 5}&gt;, #&lt;Set: {6, 8, 10}&gt;] \n</code></pre>\n\n<p>Once again, try to enter the outer loop (i.e., see if there is another set containing a pair of elements with proximity that meets the threshold).</p>\n\n<pre><code>ret = g.find { |_,prox| prox &gt;= threshold }\n  #=&gt; nil\n</code></pre>\n\n<p>Each of the elements of the keys in what's left of <code>g</code> must therefore comprise it's own set.</p>\n\n<pre><code>b = g.keys\n  #=&gt; [[3, 4]] \nc = b.flatten\n  #=&gt; [3, 4] \nc.each { |k| sets &lt;&lt; [k].to_set }\n  #=&gt; [3, 4] \n</code></pre>\n\n<p>Return <code>sets</code></p>\n\n<pre><code>sets\n  #=&gt; [#&lt;Set: {1, 2, 5}&gt;, #&lt;Set: {6, 8, 10}&gt;, #&lt;Set: {3}&gt;, #&lt;Set: {4}&gt;]\n</code></pre>\n"}], "owner": {"reputation": 386, "user_id": 2371765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/828620e4f6b1e9788a29d39e0a7d88b0?s=128&d=identicon&r=PG", "display_name": "user17144", "link": "https://stackoverflow.com/users/2371765/user17144"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 39736624, "answer_count": 2, "score": 2, "last_activity_date": 1478675949, "creation_date": 1475020617, "last_edit_date": 1478675949, "question_id": 39736038, "link": "https://stackoverflow.com/questions/39736038/divide-function-for-set-in-ruby-2-3-1", "title": "divide function for set in Ruby 2.3.1", "body": "<p>The below is from Ruby 2.3.1 documentation for dividing a set into a set of its subsets based on certain criteria applied to each pair of elements in the original set. Basically, if two numbers in the set are within 1 unit of each other, they fall in the same subset in the set of subsets of the original set.</p>\n\n<pre><code>    require 'set'\nnumbers = Set[1, 3, 4, 6, 9, 10, 11]\nset = numbers.divide { |i,j| (i - j).abs == 1 }\np set     # =&gt; #&lt;Set: {#&lt;Set: {1}&gt;, \n          #            #&lt;Set: {11, 9, 10}&gt;,\n          #            #&lt;Set: {3, 4}&gt;,\n</code></pre>\n\n<p>I think the problem on which I am working could use this function. This is the problem. There is a set S of n things together with a proximity function on pairs of things from S that has positive values for some of the pairs in this set. For pairs whose values for the proximity function is not specified, it may be assumed that these values are 0. There is also a threshold parameter. The objective of the program is to induce a partition (a set of pair-wise disjoint and mutually exhaustive subsets of the set) on the set S such that two things fall into the same subset if their proximity function value exceeds the threshold parameter (converse need not be true).</p>\n\n<p>The input to this program is of this form</p>\n\n<p>t&lt;-threshold parameter (a float greater than 0)</p>\n\n<p>n&lt;- number of lines to follow  (integer)</p>\n\n<p>Thing_i_1 Thing_j_1 proximity_ij_1  (Thing_i_1 and Thing_j_1 are integers and proximity_ij_1 is float and is greater than 0) </p>\n\n<p>....\n....\nThing_i_n Thing_j_n proximity_ij_n  </p>\n\n<p>The output is the aforementioned set of pairwise disjoint and mutually exhaustive subsets of the original set such that two things with the proximity function value at least equal to the threshold parameter fall into the same subset.</p>\n\n<p>I wrote the program below to accomplish this, but it fails to form subsets of the set in question. My input was this</p>\n\n<pre><code>0.2\n3\n1 2 0.3\n3 4 0.1\n2 5 0.25\n</code></pre>\n\n<p>Output should be {{1,2,5},{3},{4}} because 1,2 should fall into the same subset and so should 2,5 since proximity function value in each case exceeds the threshold parameter (so 1 and 5 effectively fall into the same subset), and 3 and 4 form subsets of their own.</p>\n\n<pre><code>require 'set'\nt=gets.chomp.to_f\nn=gets.chomp.to_i\nedge=Struct.new(:n1,:n2)\nse=Array.new\naf=Array.new\nsv=Set.new\n\nfor i in (0..n-1)\n    s=gets.chomp.split(\" \")\n    se.insert(-1,edge.new(s[0],s[1]))\n\n        af.insert(-1,s[2].to_f)\n\n    if (sv.member? s[0])==false \n        sv.add(s[0])\n    end\n    if (sv.member? s[1])==false \n        sv.add(s[1])\n    end\nend\n\n    c=sv.divide { |i,j|  (k=se.index(edge.new(i,j)))!=nil  &amp;&amp; af[k]&gt;=t }\np c\n</code></pre>\n\n<p>Output:  </p>\n\n<pre><code>#&lt;Set: {#&lt;Set: {\"5\"}&gt;, #&lt;Set: {\"2\"}&gt;, #&lt;Set: {\"1\"}&gt;, #&lt;Set: {\"3\"}&gt;, #&lt;Set: {\"4\"}\n&gt;}&gt;\n</code></pre>\n\n<p>The divide function does not seem to work. Am I doing anything wrong? Why am I getting five disjoint subsets instead of the expected three? I printed out the values of the condition in the divide block and got true exactly for 1,2 and 2,5 but yet 1, 2 and 5 end up in different subsets. Can someone help? Thank you.</p>\n"}, {"tags": ["ruby", "web-scraping", "mechanize", "mechanize-ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475020366, "post_id": 39735948, "comment_id": 66769837, "body": "How did you get the HTML? If Mechanize can&#39;t find that tag either the selector is wrong or the tag doesn&#39;t actually exist in Mechanize&#39;s world. Adding <code>sleep</code> won&#39;t help because Mechanize grabs the page then waits for you to tell it what element to find; It doesn&#39;t recursively walk the page and retrieve everything like a browser would, which also means if sections of the page are loaded dynamically then Mechanize will never see them. Use <code>nokogiri</code> at the command-line to load the page then use <code>@doc.at(&#39;#searchResultsBox &gt; div.listings-wrap &gt; ul &gt; li:nth-child(1) &gt; a&#39;)</code> and see if it works."}, {"owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "edited": false, "score": 0, "creation_date": 1475058879, "post_id": 39735948, "comment_id": 66786400, "body": "try following <code>page.at(&#39;div#searchResultsBox a&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": false, "score": 0, "last_activity_date": 1475048519, "creation_date": 1475048519, "answer_id": 39741057, "question_id": 39735948, "link": "https://stackoverflow.com/questions/39735948/using-page-at-with-css-selector-in-mechanize/39741057#39741057", "title": "Using page.at with CSS selector in Mechanize", "body": "<p>Maybe the website content is loaded dynamically, by JavaScript.</p>\n\n<p>Inspect the content of your <code>page</code> variable and see if the content there is complete or not.</p>\n\n<p>If the content is incomplete, it means that there has to be some other requests, to the serwer returning that data. You can search for them opening Chrome DevTools (or other tool). In the tab \"Network\" you will see all requests made by website. Search for the one containing data that you need and then scrape it by Mechanize.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5535484"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 594, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475048519, "creation_date": 1475019853, "last_edit_date": 1475020189, "question_id": 39735948, "link": "https://stackoverflow.com/questions/39735948/using-page-at-with-css-selector-in-mechanize", "title": "Using page.at with CSS selector in Mechanize", "body": "<p>I am trying to scrape a webpage with Mechanize, with the following structure:</p>\n\n<pre><code>&lt;div id=\"searchResultsBox\"&gt;  \n    &lt;div class=\"listings-wrap\"&gt;\n      &lt;div class=\"listings-header\"&gt;\n        &lt;div class=\"listing-cat\"&gt;Category&lt;/div&gt;\n        &lt;div class=\"listing-name\"&gt;Name&lt;/div&gt;\n      &lt;/div&gt;\n      &lt;ul class=\"listings\"&gt;\n        &lt;li class=\"listing\"&gt;\n          &lt;a href=\"/ShowRatings.jsp?tid=1143052\"&gt;\n            &lt;span class=\"listing-cat\"&gt;\n              &lt;span class=\"icon\"&gt;&lt;/span&gt;\n              TEXT\n              &lt;/span&gt;\n            &lt;span class=\"listing-name\"&gt;\n              &lt;span class=\"main\"&gt;TEXT&lt;/span&gt;\n              &lt;span class=\"sub\"&gt;TEXT&lt;/span&gt;\n            &lt;/span&gt;\n          &lt;/a&gt;\n        &lt;/li&gt;\n         ...\n</code></pre>\n\n<p>I want to navigate to the page behind the <code>&lt;a&gt;</code> HTML element. Right now, I have:</p>\n\n<pre><code>agent = Mechanize.new\npage = agent.get(\"URL\")\npage = page.at('#searchResultsBox &gt; div.listings-wrap &gt; ul &gt; li:nth-child(1) &gt; a')\n</code></pre>\n\n<p>but it keeps returning NIL (verified by <code>puts page.class</code>).</p>\n\n<p>I  also tried using <code>sleep</code> to try to ensure that pages have time to load before continuing.</p>\n\n<p>Is there anything I am doing wrong? I thought using the CSS selector would do the trick. </p>\n"}, {"tags": ["ruby", "regex", "text", "pattern-matching"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1475018134, "post_id": 39735478, "comment_id": 66769239, "body": "is <code>GmbH</code> correct?"}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 1, "creation_date": 1475018450, "post_id": 39735478, "comment_id": 66769318, "body": "it&#39;s like LLC, but in German. It stands for <a href=\"https://en.wikipedia.org/wiki/Gesellschaft_mit_beschr%C3%A4nkter_Haftung\" rel=\"nofollow noreferrer\">Gesellschaft mit beschr&#228;nkter Haftung</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1475018383, "creation_date": 1475018383, "answer_id": 39735757, "question_id": 39735478, "link": "https://stackoverflow.com/questions/39735478/regular-expression-for-legal-case-names/39735757#39735757", "title": "Regular expression for legal case names", "body": "<p>Here's what I came up with to match both cases. </p>\n\n<pre><code>(([A-Z]('[A-Z]|[a-z][A-Z])?[a-z]+[A-Z]?|&amp;)\\s)+(v\\s)(([A-Z]('[A-Z]|[a-z][A-Z])?[a-z]+[A-Z]?|&amp;)\\s)+\\[\\d{4}\\]\\s[A-Z]+\\s\\d+\n</code></pre>\n\n<p>Here's the breakdown</p>\n\n<pre><code>(([A-Z]('[A-Z]|[a-z][A-Z])?[a-z]+[A-Z]?|&amp;)\\s)+\n</code></pre>\n\n<p>This will match <code>&amp;</code>, and words like <code>Adam</code>, <code>O'Neal</code>, <code>McCarthy</code>, it takes into account the different case possibilities for names. </p>\n\n<pre><code>(v\\s)\n</code></pre>\n\n<p>This will match the letter <code>v</code> followed by a space</p>\n\n<pre><code>(([A-Z]('[A-Z]|[a-z][A-Z])?[a-z]+[A-Z]?|&amp;)\\s)+\n</code></pre>\n\n<p>Same as before.</p>\n\n<pre><code>\\[\\d{4}\\]\\s\n</code></pre>\n\n<p>This will match <code>[</code>, then 4 numbers, then <code>]</code></p>\n\n<pre><code>[A-Z]+\\s\\d+\n</code></pre>\n\n<p>This last part will the 4 capital letters, then the digits. I'm not sure if the letters and numbers are limited in some way, if the capital letters is always 4 letters, and the numbers are 3 to 4 digits, you can do this</p>\n\n<pre><code>[A-Z]{4}\\s\\d{3,4}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2165, "user_id": 5411494, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/47324eb5ef759f8acc34ece3e28223b9?s=128&d=identicon&r=PG", "display_name": "Marcel", "link": "https://stackoverflow.com/users/5411494/marcel"}, "is_accepted": false, "score": 0, "last_activity_date": 1475019298, "creation_date": 1475019298, "answer_id": 39735871, "question_id": 39735478, "link": "https://stackoverflow.com/questions/39735478/regular-expression-for-legal-case-names/39735871#39735871", "title": "Regular expression for legal case names", "body": "<p>This regex matches with both example:</p>\n\n<pre><code>([A-Z][A-Za-z\\s]+|\\s&amp;\\s).*(\\sv\\s)[^\\[]*\\[[0-9]{4}\\]\\s[A-Z]+\\s[0-9]+\n</code></pre>\n\n<p>But if it doesn't work for another one, just pass me the text that I will try to adapt my answer.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1475050162, "last_edit_date": 1475050162, "creation_date": 1475025632, "answer_id": 39736591, "question_id": 39735478, "link": "https://stackoverflow.com/questions/39735478/regular-expression-for-legal-case-names/39736591#39736591", "title": "Regular expression for legal case names", "body": "<p>I would not attempt to match the string with a single regex. Consider the following.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>R1 = /\n     \\s+v\\s+ # match 'v' preceded by &gt;= 1 spaces and followed by &gt;= 1 spaces\n     |       # or\n     \\s+\\[   # match a left bracket preceded by &gt;=1 spaces\n     |       # or\n     \\]\\s+   # match a right bracket followed by &gt;=1 spaces\n     /x      # free-spacing regex definition mode \n\ndef legal_case_name?(str)\n  party1, party2, year, id = str.split R1\n  valid_party?(party1) &amp;&amp; valid_party?(party2) &amp;&amp; valid_year?(year) &amp;&amp; valid_id?(id)\nend\n\ndef valid_party?(party)\n  return false if party.nil?       \n  party.split.all? { |word| word == '&amp;' || word =~ /\\A[[:alpha:]]+\\z/ }\nend\n\ndef valid_year?(year)\n  return false unless year =~ /\\A\\d{4}\\z/\n  (1950..2040).cover? year.to_i\nend\n\nR2 = /\n     EWHC\\s+\\d{4}  # match 'EWHC' followed by &gt;= 1 spaces and then 4 digits\n     |             # or\n     PNLR\\s+\\d{3}  # match 'PNLR' followed by &gt;= 1 spaces and then 3 digits\n     |             # or\n     ABC\\s+\\d{5}   # match 'ABC' followed by &gt;= 1 spaces and then 5 digits\n     /x      # free-spacing regex definition mode \n\ndef valid_id?(id)\n  (id =~ R2) ? true : false\nend\n</code></pre>\n\n<p>Some of these methods would probably need to be modified to reflect requirements.</p>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>legal_case_name? \"Seele GmbH &amp; Co v Tokyo Insurance Ltd [2009] EWHC 2066\"\n  #=&gt; true\nlegal_case_name? \"Darlington Soc v Scourfield &amp; McCarthy [1999] PNLR 365\"\n  #=&gt; true\nlegal_case_name? \"Darlington Soc vs Scourfield &amp; McCarthy [1999] PNLR 365\"\n  #=&gt; false\nlegal_case_name? \"Darlington Soc v Scourfield &amp; McCarthy [1921] PNLR 365\"\n  #=&gt; false\nlegal_case_name? \"Darlington Soc v Scourfield &amp; McCarthy [1921] PNLR 3652\"\n  #=&gt; false\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>Suppose</p>\n\n<pre><code>str = \"Seele GmbH &amp; Co v Tokyo Insurance Ltd [2009] EWHC 2066\"\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>party1, party2, year, id = str.split R1\n  #=&gt; [\"Seele GmbH &amp; Co\", \"Tokyo Insurance Ltd\", \"2009\", \"EWHC 2066\"]\nparty1\n  #=&gt; \"Seele GmbH &amp; Co\" \nparty2\n  #=&gt; \"Tokyo Insurance Ltd\" \nyear\n  #=&gt; \"2009\" \nid\n  #=&gt; \"EWHC 2066\" \nvalid_party?(party1)\n  #=&gt; true \nvalid_party?(party2)\n  #=&gt; true \nvalid_year?(year)\n  #=&gt; true \nvalid_id?(id)\n  #=&gt; true \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1475032013, "last_edit_date": 1475032013, "creation_date": 1475030698, "answer_id": 39737223, "question_id": 39735478, "link": "https://stackoverflow.com/questions/39735478/regular-expression-for-legal-case-names/39737223#39737223", "title": "Regular expression for legal case names", "body": "<pre><code>CASE_REGEXP = %r{\n  (?&lt;spaces&gt;    \\s+ ){0}\n  (?&lt;capword&gt;   [[:upper:]] [[:alpha:]']+ ){0}\n  (?&lt;titleword&gt; \\g&lt;capword&gt; | &amp; ){0}\n  (?&lt;title&gt;     \\g&lt;capword&gt; (?:\\g&lt;spaces&gt; \\g&lt;titleword&gt;)* ){0}\n  (?&lt;year&gt;      \\[ \\d{4} \\] | \\( \\d{4} \\) ){0}\n  (?&lt;endbit&gt;    [[:upper:]]+ \\g&lt;spaces&gt; \\d+ ){0}\n\n  \\g&lt;title&gt; \\g&lt;spaces&gt; v \\g&lt;spaces&gt; \\g&lt;title&gt;\n  \\g&lt;spaces&gt; \\g&lt;year&gt;\n  \\g&lt;spaces&gt; \\g&lt;endbit&gt;\n}x\n</code></pre>\n\n<p>Ruby's Oniguruma is very powerful, and gives you the ability to write very legible regular expressions even when you need something more complex. </p>\n\n<p>EDIT: forgot about the year and whatever the other thing at the end is. Will fix in a bit. </p>\n\n<p>EDIT2: added.</p>\n"}], "owner": {"reputation": 363, "user_id": 1022788, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b4ecbc749253a9c05f1ff0d830b92aec?s=128&d=identicon&r=PG", "display_name": "user1022788", "link": "https://stackoverflow.com/users/1022788/user1022788"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1475050162, "creation_date": 1475016338, "question_id": 39735478, "link": "https://stackoverflow.com/questions/39735478/regular-expression-for-legal-case-names", "title": "Regular expression for legal case names", "body": "<p>I am trying to write a regular expression for use in a Ruby program which matches legal case names in plain text.</p>\n\n<p>I have come up with the following regular expression:</p>\n\n<pre><code>((([[:upper:]])+\\s)?((([[:upper:]]+([[:lower:]])+)\\s)+v\\s((\\b[[:upper:]]([[:lower:]])+)\\s?)+(\\(|\\[)+\\d+(\\)|\\])\\s(\\d+\\s)?\\w+\\s(\\w+)?(\\s)?(\\d+)?))\n</code></pre>\n\n<p>This almost does what I want but there are some edge cases where it fails to match.  I need an expression which will match the following cases (including the citation at the end):</p>\n\n<ol>\n<li><p>Seele Austria GmbH &amp; Co v Tokyo Marine Europe Insurance Ltd [2009] EWHC 2066</p></li>\n<li><p>Darlington Building Society v O'Rourke James Scourfield &amp; McCarthy [1999] PNLR 365</p></li>\n</ol>\n\n<p>The expression that I have written works on the basis that legal case titles will be a series of Title Case Words with a v in the middle.  However, the ampersands in both of the above examples, together with the GmbH in example 1 are throwing things off and I only get a partial match (from Co v ... ) against 1.  I get no match at all for 2.</p>\n\n<p>If anyone can show me how to change my expression so as to match both the above examples, I'd appreciate it.  The expression is also pretty unwieldy as it stands - maybe it can be simplified?</p>\n"}, {"tags": ["ruby", "bcrypt"], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 3984266, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1114110863/picture?type=large", "display_name": "Lincoln Kupke", "link": "https://stackoverflow.com/users/3984266/lincoln-kupke"}, "is_accepted": false, "score": 0, "last_activity_date": 1475081474, "creation_date": 1475081474, "answer_id": 39753401, "question_id": 39735477, "link": "https://stackoverflow.com/questions/39735477/bcrypt-3-1-11-error-when-runing-bundle-install/39753401#39753401", "title": "bcrypt-3.1.11 error when runing bundle install", "body": "<p>Restarted computer and it began working again. Very weird bug</p>\n"}], "owner": {"reputation": 63, "user_id": 3984266, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1114110863/picture?type=large", "display_name": "Lincoln Kupke", "link": "https://stackoverflow.com/users/3984266/lincoln-kupke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 656, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475081474, "creation_date": 1475016331, "question_id": 39735477, "link": "https://stackoverflow.com/questions/39735477/bcrypt-3-1-11-error-when-runing-bundle-install", "title": "bcrypt-3.1.11 error when runing bundle install", "body": "<p>I was working on a file today and all of a sudden when bundling I get an error about bcrypt 3.1.11 . I have scoured the internet as to how to solve this.</p>\n\n<pre><code>$ bundle install\nFetching gem metadata from https://rubygems.org/.........\nFetching version metadata from https://rubygems.org/...\nFetching dependency metadata from https://rubygems.org/..\nResolving dependencies.................................\nUsing rake 11.3.0\n/Users/linc/.gem/ruby/2.2.3/gems/bundler-1.11.2/lib/bundler.rb:289: warning: Insecure world writable dir /usr/local/sbin in PATH, mode 040777\nUsing i18n 0.7.0\nUsing json 1.8.3\nUsing minitest 5.9.1\nUsing thread_safe 0.3.5\nUsing builder 3.2.2\nUsing erubis 2.7.0\nUsing mini_portile2 2.1.0\nUsing pkg-config 1.1.7\nUsing rack 1.6.4\nUsing mime-types-data 3.2016.0521\nUsing arel 6.0.3\nUsing addressable 2.4.0\nInstalling bcrypt 3.1.11 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n/Users/linc/.rubies/ruby-2.2.3/bin/ruby -r ./siteconf20160927-27635-1pd08jr.rb extconf.rb\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling bcrypt_ext.c\nclang: error: unable to execute command: Segmentation fault: 11\nclang: error: clang frontend command failed due to signal (use -v to see invocation)\nApple LLVM version 8.0.0 (clang-800.0.38)\nTarget: x86_64-apple-darwin15.6.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\nclang: note: diagnostic msg: PLEASE submit a bug report to http://developer.apple.com/bugreporter/ and include the crash backtrace, preprocessed source, and associated run script.clang: note: diagnostic msg:\n********************\nPLEASE ATTACH THE FOLLOWING FILES TO THE BUG REPORT:\nPreprocessed source(s) and associated run script(s) are located at:\nclang: note: diagnostic msg: /var/folders/0v/x6vrj7v12hd5bghty3yqt7sr0000gn/T/bcrypt_ext-b63617.c\nclang: note: diagnostic msg: /var/folders/0v/x6vrj7v12hd5bghty3yqt7sr0000gn/T/bcrypt_ext-b63617.sh\nclang: note: diagnostic msg:\n********************\nmake: *** [bcrypt_ext.o] Error 254\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/linc/.gem/ruby/2.2.3/gems/bcrypt-3.1.11 for inspection.\nResults logged to /Users/linc/.gem/ruby/2.2.3/extensions/x86_64-darwin-14/2.2.0-static/bcrypt-3.1.11/gem_make.out\nUsing bundler 1.11.2\nUsing coderay 1.1.1\nUsing concurrent-ruby 1.0.2\nUsing docile 1.1.5\nUsing simplecov-html 0.10.0\nUsing tins 1.12.0\nUsing thor 0.19.1\nUsing orm_adapter 0.5.0\nUsing diff-lcs 1.2.5\nUsing execjs 2.7.0\nUsing sass 3.4.22\nUsing method_source 0.8.2\nUsing pg 0.19.0\nUsing slop 3.6.0\nUsing puma 3.6.0\nUsing rails_serve_static_assets 0.0.5\nUsing rails_stdout_logging 0.0.5\nUsing rspec-support 3.5.0\nUsing tilt 2.0.5\nUsing shoulda-context 1.2.1\nUsing valid_attribute 2.0.0\nUsing tzinfo 1.2.2\nUsing nokogiri 1.6.8\nUsing rack-test 0.6.3\nUsing warden 1.2.6\nUsing mime-types 3.1\nUsing launchy 2.4.3\nAn error occurred while installing bcrypt (3.1.11), and Bundler cannot continue.\nMake sure that `gem install bcrypt -v '3.1.11' succeeds before bundling.\n</code></pre>\n\n<p>I have done the <code>xcode-select --install</code> and <code>bundle installed</code> and still get the same error.\nI have <code>gem uninstall bcrypt \"3.1.11\"</code> and <code>gem installed bcrypt \"3.1.11\"</code> again and still get the same error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "versioning"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1475016693, "post_id": 39735277, "comment_id": 66768868, "body": "I&#39;d avoid using versioning in names until you at least have 2 different versions... so just call it <code>authenticate_user!</code> until you have two different ways of authenticating, then you could have <code>authenticate_v1_user</code> vs <code>authenticate_v2_user</code> to differentiate... though tbh I&#39;d handle different ways of doing things using <code>roles</code> instead (still keep the v1 etc in the routes)."}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 1888107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0mNE.jpg?s=128&g=1", "display_name": "SVetter", "link": "https://stackoverflow.com/users/1888107/svetter"}, "is_accepted": false, "score": 0, "last_activity_date": 1475051932, "last_edit_date": 1495535246, "creation_date": 1475051932, "answer_id": 39742172, "question_id": 39735277, "link": "https://stackoverflow.com/questions/39735277/rails-api-with-versioning-version-in-helper-names/39742172#39742172", "title": "Rails API with versioning: version in helper names", "body": "<p>Okay, I've kept searching a bit and found a solution, which works (even though it feels a bit too \"hacky\" for my taste):</p>\n\n<pre><code>namespace :v1, as: '' do\n    # V1 stuff\n    resources :users\n    mount_devise_token_auth_for 'User', at: 'auth'\nend\n</code></pre>\n\n<p>So the <code>as: ''</code> does the trick. (Answer taken from: <a href=\"https://stackoverflow.com/questions/17343504/adding-prefix-to-a-named-route-helper-under-namespace\">Adding prefix to a named route helper under namespace</a>)</p>\n\n<p>If I'd ever want the \"v1\" back into my helper names, I guess I could manually add them per route with for example: <code>as: 'new_v1_user_sesssion'</code></p>\n"}], "owner": {"reputation": 111, "user_id": 1888107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0mNE.jpg?s=128&g=1", "display_name": "SVetter", "link": "https://stackoverflow.com/users/1888107/svetter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475051932, "creation_date": 1475015179, "question_id": 39735277, "link": "https://stackoverflow.com/questions/39735277/rails-api-with-versioning-version-in-helper-names", "title": "Rails API with versioning: version in helper names", "body": "<p>(Ruby 2.3.1, Rails 5.0.0.1) </p>\n\n<p>I've already implemented an API versioning in the URI and added devise token auth like this:</p>\n\n<pre><code>constraints subdomain: 'api' do\n    scope module: 'api' do  \n        namespace :v1 do\n            # V1 stuff\n            resources :users\n            mount_devise_token_auth_for 'User', at: 'auth'\n        end\n    end\nend\n</code></pre>\n\n<p>The result of 'rake routes' (example row) therefore is:</p>\n\n<pre><code>v1_user GET /v1/users/:id(.:format) api/v1/users#show {:subdomain=&gt;\"api\"}\n</code></pre>\n\n<p>Now in my controller, any helper related to the user contains the \"v1\" versioning. E.g.:</p>\n\n<pre><code>before_action :authenticate_v1_user!\n</code></pre>\n\n<p>I'm new to this concept, but should this not be avoided? If I'll ever upgrade to a v2, I'd have to go through all those helpers and make sure I'll change it to prevent it from breaking? Or how would the upgrade process look like?</p>\n\n<p>Thanks for your feedback! This might be a very easy question, but I'm a bit confused.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 1838, "user_id": 56082, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7d8f27df91b3d4b2a43606598ab75029?s=128&d=identicon&r=PG", "display_name": "Streamline", "link": "https://stackoverflow.com/users/56082/streamline"}, "edited": false, "score": 0, "creation_date": 1475016021, "post_id": 39735386, "comment_id": 66768663, "body": "Thanks for the explanation, now the conflict message makes sense. So this is saying it will never be possible to use json v2.0.2 with rails v4.2.7?"}], "tags": [], "owner": {"reputation": 91, "user_id": 1391017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66bc7084ccb1f1d863de7377b4df85ad?s=128&d=identicon&r=PG", "display_name": "Evan Keller", "link": "https://stackoverflow.com/users/1391017/evan-keller"}, "is_accepted": true, "score": 3, "last_activity_date": 1475015785, "creation_date": 1475015785, "answer_id": 39735386, "question_id": 39735114, "link": "https://stackoverflow.com/questions/39735114/how-to-resolve-bundler-gem-version-conflict-with-json-gem/39735386#39735386", "title": "How to resolve bundler gem version conflict with json gem", "body": "<p>The json requirement has two parts.  The first is <code>&gt;= 1.7.7</code> meaning the Gem must be greater than or equal to 1.7.7.  2.0.2 is, in fact, greater than 1.7.7, so you satisfy that requirement.  However, the second part of that is that it must also be <code>~&gt; 1.7</code> (pronounced \"tiddle-wakka\") is what's called a Pessimistic Constraint. It required that the first elements of the version number match but the last can be greater than or equal to the number given.  So, for example, 1.7.0 would satisfy the constraint. As would 1.7.9 or 1.9.9, or even 1.423.8. However, 2.0.0 would fail that constraint because the major version number doesn't match the given value of \"1\".</p>\n"}, {"tags": [], "owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "is_accepted": false, "score": 0, "last_activity_date": 1475016050, "creation_date": 1475016050, "answer_id": 39735430, "question_id": 39735114, "link": "https://stackoverflow.com/questions/39735114/how-to-resolve-bundler-gem-version-conflict-with-json-gem/39735430#39735430", "title": "How to resolve bundler gem version conflict with json gem", "body": "<p>The <code>~&gt;</code> is what is called a pessimistic version constraint. Check out here:</p>\n\n<p><a href=\"http://guides.rubygems.org/patterns/#pessimistic-version-constraint\" rel=\"nofollow\">http://guides.rubygems.org/patterns/#pessimistic-version-constraint</a></p>\n\n<p>You'll find a section there on compound requirements which is basically what it looks like activesupport is doing for its json requirement.</p>\n\n<p>Long story short, the <code>~&gt;</code> basically makes the json version match only minor versions of json <code>1.7</code> where the patch version is 7 or higher.</p>\n\n<p>There is some discussion on whether or not to implement a bundler option for overriding gem versions specified in gemspecs here: <a href=\"https://github.com/bundler/bundler/issues/4552\" rel=\"nofollow\">https://github.com/bundler/bundler/issues/4552</a>, but for now, there is no such option...</p>\n\n<p>So, it looks like the only thing you could possibly try is upgrading activesupport to activesupport 5 or higher (where they got rid of the json dependency), which could very well break your dependencies much in this same way if Rails has minor version pinning for activesupport and the rest of its gem dependencies.</p>\n"}], "owner": {"reputation": 1838, "user_id": 56082, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7d8f27df91b3d4b2a43606598ab75029?s=128&d=identicon&r=PG", "display_name": "Streamline", "link": "https://stackoverflow.com/users/56082/streamline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2611, "favorite_count": 0, "accepted_answer_id": 39735386, "answer_count": 2, "score": 2, "last_activity_date": 1475016050, "creation_date": 1475014128, "last_edit_date": 1475015641, "question_id": 39735114, "link": "https://stackoverflow.com/questions/39735114/how-to-resolve-bundler-gem-version-conflict-with-json-gem", "title": "How to resolve bundler gem version conflict with json gem", "body": "<p>I want to update the json gem to version 2.0.2 in my app. It is currently loaded as a dependency at version 1.8.3.</p>\n\n<p>So, I added</p>\n\n<pre><code>gem 'json', '&gt;= 2.0.2'\n</code></pre>\n\n<p>to my Gemfile and I type </p>\n\n<pre><code>bundle update json\n</code></pre>\n\n<p>and I get</p>\n\n<pre><code>Fetching gem metadata from https://rubygems.org/..........\nFetching version metadata from https://rubygems.org/..\nFetching dependency metadata from https://rubygems.org/.\nResolving dependencies...\nBundler could not find compatible versions for gem \"json\":\nIn Gemfile:\njson (&gt;= 2.0.2)\n\npaperclip (~&gt; 4.2.0) was resolved to 4.2.4, which depends on\n  activesupport (&gt;= 3.2.0) was resolved to 4.2.7, which depends on\n    json (&gt;= 1.7.7, ~&gt; 1.7)\n</code></pre>\n\n<p>Which doesn't make sense to me because <em>I thought</em> the <code>json (&gt;= 1.7.7, ~&gt; 1.7)</code> is saying that activesupport 4.2.7 is dependent on <strong>at least version 1.7.7</strong> of the json gem, so 2.0.2 should not be a conflict, no?</p>\n\n<p>What is the correct interpretation here?</p>\n\n<p>What steps can I take so that I can add json v2.0.2 gem to my rails v4.2.7 app successfully?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 6826962, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d88a6f9a90db4926365a4bcc59ea98c0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/6826962/paul"}, "edited": false, "score": 0, "creation_date": 1475054734, "post_id": 39735270, "comment_id": 66783310, "body": "The error is still there, I really don&#39;t know why it doesnt work properly."}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "reply_to_user": {"reputation": 71, "user_id": 6826962, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d88a6f9a90db4926365a4bcc59ea98c0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/6826962/paul"}, "edited": false, "score": 0, "creation_date": 1475058855, "post_id": 39735270, "comment_id": 66786386, "body": "can you show your full error log from your terminal?"}, {"owner": {"reputation": 71, "user_id": 6826962, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d88a6f9a90db4926365a4bcc59ea98c0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/6826962/paul"}, "edited": false, "score": 0, "creation_date": 1475064435, "post_id": 39735270, "comment_id": 66790250, "body": "<a href=\"http://hpics.li/1bff42f\" rel=\"nofollow noreferrer\">hpics.li/1bff42f</a>  I got an other error when I open the rails console and create a Image object :<a href=\"http://hpics.li/1bff42f\" rel=\"nofollow noreferrer\">hpics.li/1bff42f</a>  I post on the first post the code of my model."}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "reply_to_user": {"reputation": 71, "user_id": 6826962, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d88a6f9a90db4926365a4bcc59ea98c0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/6826962/paul"}, "edited": false, "score": 0, "creation_date": 1475065227, "post_id": 39735270, "comment_id": 66790843, "body": "What happens when you change attribute :title, :validate =&gt; true to attribute :title, presence: true and also please add your schema.rb to your post."}, {"owner": {"reputation": 71, "user_id": 6826962, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d88a6f9a90db4926365a4bcc59ea98c0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/6826962/paul"}, "edited": false, "score": 0, "creation_date": 1475069193, "post_id": 39735270, "comment_id": 66793879, "body": "With presence nothing change, I post the schema.rb up."}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "reply_to_user": {"reputation": 71, "user_id": 6826962, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d88a6f9a90db4926365a4bcc59ea98c0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/6826962/paul"}, "edited": false, "score": 0, "creation_date": 1475070142, "post_id": 39735270, "comment_id": 66794695, "body": "In your post action change do this @image = Image.new(params[:image]) ---- remove the &#39;s&#39; from images"}], "tags": [], "owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "is_accepted": false, "score": 0, "last_activity_date": 1475015148, "creation_date": 1475015148, "answer_id": 39735270, "question_id": 39734691, "link": "https://stackoverflow.com/questions/39734691/undefined-method-images-path-error-in-rails/39735270#39735270", "title": "undefined method `images_path&#39; Error in rails", "body": "<p>Do this in your routes.rb file:</p>\n\n<pre><code>resources \"images\", only: [:crea, :post], path: 'images'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 174, "user_id": 4870465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6T3ds.jpg?s=128&g=1", "display_name": "Hugo David Farji", "link": "https://stackoverflow.com/users/4870465/hugo-david-farji"}, "is_accepted": true, "score": 0, "last_activity_date": 1475068978, "creation_date": 1475068978, "answer_id": 39748835, "question_id": 39734691, "link": "https://stackoverflow.com/questions/39734691/undefined-method-images-path-error-in-rails/39748835#39748835", "title": "undefined method `images_path&#39; Error in rails", "body": "<p>By default <code>simple_forms</code> search the <code>images_path</code> with <code>POST</code> Method, that means the <code>create</code> action of your controller</p>\n\n<p>But you have this</p>\n\n<pre><code>  resources \"images\", only: [:crea, :post]\n  # Many other code\n  get 'images/crea'\n</code></pre>\n\n<p>You can try changing the <code>resources</code> line to</p>\n\n<pre><code>  resources \"images\", only: [:crea, :create]\n</code></pre>\n\n<p>and in your controller</p>\n\n<pre><code>  class ImagesController &lt; ApplicationController\n    layout 'home2'\n    #before_action :set_image, only: [:show, :edit, :update, :destroy]\n    def crea\n      @image = Image.new\n    end\n\n    def create\n      @image = Image.new(params[:images])\n    end\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 6826962, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d88a6f9a90db4926365a4bcc59ea98c0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/6826962/paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1475070614, "creation_date": 1475070614, "answer_id": 39749497, "question_id": 39734691, "link": "https://stackoverflow.com/questions/39734691/undefined-method-images-path-error-in-rails/39749497#39749497", "title": "undefined method `images_path&#39; Error in rails", "body": "<p>Thank you both, The solutions was concerning the name like Hugo describe it, thanks again.\nNow, I have to pay more attention about the naming.</p>\n"}], "owner": {"reputation": 71, "user_id": 6826962, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d88a6f9a90db4926365a4bcc59ea98c0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/6826962/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 39748835, "answer_count": 3, "score": 1, "last_activity_date": 1475070614, "creation_date": 1475012149, "last_edit_date": 1475069305, "question_id": 39734691, "link": "https://stackoverflow.com/questions/39734691/undefined-method-images-path-error-in-rails", "title": "undefined method `images_path&#39; Error in rails", "body": "<p>I got an error and I dont know where it come from, this is my code <strong>images_controller.rb</strong></p>\n\n<pre><code>class ImagesController &lt; ApplicationController\n  layout 'home2'\n  #before_action :set_image, only: [:show, :edit, :update, :destroy]\n  def crea\n    @image = Image.new\n  end\n\n  def post\n    @image = Image.new(params[:images])\n  end\nend\n</code></pre>\n\n<p><strong>post.html.erb</strong></p>\n\n<pre><code>&lt;h2 align=\"center\"&gt;Post your own creation right here !&lt;/h2&gt;\n&lt;br&gt;\n&lt;div align=\"center\"&gt;\n  &lt;%= link_to 'Back', '/showcase', :class =&gt; \"buttonShow\" %&gt;\n&lt;/div&gt;\n&lt;%= simple_form_for @image do |f| %&gt;\n  &lt;%= f.input :title, :required =&gt; true %&gt;\n  &lt;%= f.input :description, :required =&gt; true %&gt;\n  &lt;%= f.input :nickname, :required =&gt; true %&gt;\n  &lt;%= f.button :submit, \"Post !\", :class =&gt; \"buttonShow\"  %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  resources \"images\", only: [:crea, :post]\n  resources \"contacts\", only: [:new, :create]\n  get 'contacts/contact'\n\n  get 'images/crea'\n  get 'images/post'\n\n  get 'auth/auth'\n\n  root \"auth#auth\"\n  #get 'contact' =&gt; 'contacts#contact'\n  get 'showcase' =&gt; 'images#crea'\n  get 'showcase/post' =&gt; 'images#post'\n  #resources \"contacts\", only: [:new, :create]\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p>I got always the same error who don't help me a lot :</p>\n\n<pre><code>undefined method `images_path' for #&lt;#&lt;Class:0x007ffe6c718578&gt;:0x007ffe6c68ab38&gt;\nDid you mean?  image_alt\n</code></pre>\n\n<p>The line of code, where the error is supposed to be is according to the ruby error :</p>\n\n<pre><code>&lt;%= simple_form_for @image do |f| %&gt;\n</code></pre>\n\n<p>this is my models :       </p>\n\n<pre><code>class Image &lt; ApplicationRecord\n      attribute :title,      :validate =&gt; true\n      attribute :description,     :validate =&gt; /\\A([\\w\\.%\\+\\-]+)@([\\w\\-]+\\.)+([\\w]{2,})\\z/i\n      attribute :nickname, :validate =&gt; /\\A([\\w\\.%\\+\\-]+)@([\\w\\-]+\\.)+([\\w]{2,})\\z/i\n</code></pre>\n\n<p>end</p>\n\n<hr>\n\n<pre><code>ActiveRecord::Schema.define(version: 20160927210003) do\n\n      create_table \"contacts\", force: :cascade do |t|\n        t.string   \"name\"\n        t.string   \"email\"\n        t.string   \"message\"\n        t.datetime \"created_at\", null: false\n        t.datetime \"updated_at\", null: false\n      end\n\n      create_table \"images\", force: :cascade do |t|\n        t.string   \"title\"\n        t.string   \"description\"\n        t.string   \"nickname\"\n        t.string   \"image_filename\"\n        t.datetime \"created_at\",     null: false\n        t.datetime \"updated_at\",     null: false\n      end\n\n    end\n</code></pre>\n\n<p>Thank's in advance,\nSee you soon,</p>\n"}, {"tags": ["ruby", "xcode", "rubymotion"], "comments": [{"owner": {"reputation": 186, "user_id": 136385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36ea58289890176b6170e382b3194fe?s=128&d=identicon&r=PG", "display_name": "wndxlori", "link": "https://stackoverflow.com/users/136385/wndxlori"}, "edited": false, "score": 0, "creation_date": 1478215762, "post_id": 39734397, "comment_id": 68075899, "body": "Can you mention what version of Ruby you are running? (Run <code>ruby -v</code>)"}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "edited": false, "score": 0, "creation_date": 1479656110, "post_id": 39734397, "comment_id": 68639490, "body": "Did you make sure to have up tp date rubymotion and used bundle to update your gems?"}], "owner": {"reputation": 1401, "user_id": 2723934, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/025a08b4c87bf427fffab6600dea6ae8?s=128&d=identicon&r=PG&f=1", "display_name": "miler350", "link": "https://stackoverflow.com/users/2723934/miler350"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475010820, "creation_date": 1475010820, "question_id": 39734397, "link": "https://stackoverflow.com/questions/39734397/rubymotion-rake-failed-new-app", "title": "RubyMotion Rake failed - New App", "body": "<p>ran these commands:</p>\n\n<p><code>create HelloWorld</code></p>\n\n<p><code>cd HelloWorld</code></p>\n\n<p><code>rake</code></p>\n\n<p>Error:</p>\n\n<p><code>libc++abi.dylib: terminating with uncaught exception of type NSException</code></p>\n\n<p><code>================================================================================\nThe application terminated. A crash report file may have been generated by the\nsystem, use</code>rake crashlog' to open it. Use <code>rake debug=1' to restart the app\nin the debugger.\n================================================================================</code></p>\n\n<p><code>rake aborted!</code></p>\n\n<p><code>TypeError: no implicit conversion from nil to integer\n/Library/RubyMotion/lib/motion/project/template/ios.rb:243:in</code>exit'\n/Library/RubyMotion/lib/motion/project/template/ios.rb:243:in <code>block in &lt;top (required)&gt;'</code></p>\n"}, {"tags": ["ruby", "rubygems", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 1, "creation_date": 1475010695, "post_id": 39734112, "comment_id": 66766623, "body": "is there any error backtrace?"}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475010810, "post_id": 39734112, "comment_id": 66766678, "body": "<code>image</code> in <code>recipe_params</code> is just a string (you have just <code>f.input :image</code>)?"}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475011365, "post_id": 39734112, "comment_id": 66766941, "body": "try to change your image input to <code>f.input :image, as: :file, ...</code>"}, {"owner": {"reputation": 73, "user_id": 6508111, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/7TItl.jpg?s=128&g=1", "display_name": "elmuzyk", "link": "https://stackoverflow.com/users/6508111/elmuzyk"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475019907, "post_id": 39734112, "comment_id": 66769742, "body": "Thanks for your answer but it didn&#39;t work :/"}], "owner": {"reputation": 73, "user_id": 6508111, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/7TItl.jpg?s=128&g=1", "display_name": "elmuzyk", "link": "https://stackoverflow.com/users/6508111/elmuzyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475009525, "creation_date": 1475009525, "question_id": 39734112, "link": "https://stackoverflow.com/questions/39734112/papercliperror-in-recipescontrollercreate", "title": "Paperclip::Error in RecipesController#create", "body": "<p>I have problem with <strong>gem 'paperclip', '~> 5.1'</strong> in Rails5. When I create an recipe with an image there's an error: </p>\n\n<p><strong>Paperclip::Error in RecipesController#create</strong></p>\n\n<p><strong>There was an error processing the thumbnail for 3c39a73424a219191afdb65e04f66d5d20160927-18689-1c0lj5f</strong></p>\n\n<p>pointing to the controller create method.\nI have <em>installed ImageMagic</em></p>\n\n<p>This is recipe controller:</p>\n\n<pre><code>class RecipesController &lt; ApplicationController\nbefore_action :find_recipe, only: [:show, :edit, :update, :destroy]\ndef index\n    @recipe = Recipe.all.order(\"created_at DESC\")\nend\n\ndef new\n    @recipe = Recipe.new\nend\n\ndef show\nend\n\ndef create\n    @recipe = Recipe.new(recipe_params)\n    if @recipe.save\n        redirect_to @recipe, notice: 'Succesfully created new recipe'\n    else\n        render 'new'\n    end\nend\n\ndef edit\nend\n\ndef update\n    if @recipe.update(recipe_params)\n        redirect_to @recipe\n    else\n        render 'edit'\n    end\nend\n\ndef destroy\n    @recipe.destroy\n    redirect_to root_path, notice:\"Succesfully deleted\"\nend\n\nprivate\n\ndef recipe_params\n  params.require(:recipe).permit(:title, :description, :image)\nend\n\ndef find_recipe\n    @recipe = Recipe.find(params[:id])\nend\n</code></pre>\n\n<p>end</p>\n\n<p>This is model:</p>\n\n<pre><code>class Recipe &lt; ApplicationRecord\nhas_attached_file :image, styles: { medium: \"400x400#&gt;\" }\nvalidates_attachment_content_type :image, content_type: /\\Aimage\\/.*\\z/\n</code></pre>\n\n<p>end</p>\n\n<p>and the _form.html.haml</p>\n\n<pre><code>= simple_form_for @recipe, html: { multipart: true } do |f|\n    - if @recipe.errors.any?\n        #errors\n            %p\n                = @recipe.errors.count\n                Prevented this recipe froms saving\n            %ul\n                - @recipe.errors.full_messages.each do |msg|\n                    %li= msg\n    .panel-body\n        = f.input :title, input_html: { class: 'form-control' }\n        = f.input :description, input_html: { class: 'form-control' }\n        = f.input :image, input_html: { class: 'form-control' }\n\n    = f.button :submit, class: \"btn btn-primary\"\n</code></pre>\n\n<p>and migration file for paperclip:</p>\n\n<pre><code>class AddAttachmentImageToRecipes &lt; ActiveRecord::Migration\n  def self.up\n    change_table :recipes do |t|\n      t.attachment :image\n    end\n  end\n\n  def self.down\n     remove_attachment :recipes, :image\n  end\nend\n</code></pre>\n\n<p>Can anyone help, please?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1475013052, "post_id": 39733862, "comment_id": 66767673, "body": "seems pretty arbitrary to me. whatever keeps things DRY works."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1475057128, "post_id": 39733862, "comment_id": 66785188, "body": "You can do this with a form wizard without mangling your app into one controller which violates SRP"}], "owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1475008595, "creation_date": 1475008595, "question_id": 39733862, "link": "https://stackoverflow.com/questions/39733862/admin-vs-non-admin-controllers", "title": "Admin vs non-admin controllers", "body": "<p>So I recognize that Rails is a pretty opinionated language... which is why I feel like there's a definite Rails answer to this question. I'm trying to write the routing/ controllers for the following ADMIN user flow:</p>\n\n<ol>\n<li>admin reviews/updates orders (has a <code>get</code> and <code>post</code>)</li>\n<li>admin reviews/updates items in orders (has a <code>get</code> and <code>post</code>)</li>\n<li>admin approves items in orders (has a <code>get</code> and <code>post</code>)</li>\n<li>admin approves orders (has a <code>get</code> and <code>post</code>)</li>\n</ol>\n\n<p>(Approval is not the same as update in this circumstance, so it's fairly important to differentiate that well)</p>\n\n<p>This is literally a 1-2-3-4 step process flow, so I'm frankly thinking of doing everything under an <code>AdminsController</code>, with methods that follow the flow:</p>\n\n<pre><code>def step_1_get\n  orders_to_show = Order.where(...)\nend\n\ndef step_1_post\n  order_params =\n  # some kind of order update\nend\n\ndef step_2_get\n  items_to_show = Item.where(...)\nend\n\ndef step_2_post\nend\n\n...\n</code></pre>\n\n<p>Similarly, I'd have all the views organized in steps under the admin folder.</p>\n\n<p>I feel this would be much more clear than having a bunch of methods littered through the <code>OrdersController</code> and <code>ItemsController</code> even though I'm kind of breaking MVC. But again, what's the Railsy way of doing this? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "filterrific"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1475009255, "post_id": 39733731, "comment_id": 66765903, "body": "What have you tried? The tutorial you posted is very straight forward about implementation"}, {"owner": {"reputation": 939, "user_id": 6636242, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8303e67cc4bc87a8c8d288b58ea73ff6?s=128&d=identicon&r=PG&f=1", "display_name": "krs8888", "link": "https://stackoverflow.com/users/6636242/krs8888"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1475010261, "post_id": 39733731, "comment_id": 66766421, "body": "I followed that but I am not sure where I am going wrong. I get an error &#39;undefined method page&#39;"}, {"owner": {"reputation": 939, "user_id": 6636242, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8303e67cc4bc87a8c8d288b58ea73ff6?s=128&d=identicon&r=PG&f=1", "display_name": "krs8888", "link": "https://stackoverflow.com/users/6636242/krs8888"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1475010781, "post_id": 39733731, "comment_id": 66766665, "body": "this is what i tried <a href=\"http://stackoverflow.com/questions/39719100/using-filterrific-gem-to-filter-table-by-column\" title=\"using filterrific gem to filter table by column\">stackoverflow.com/questions/39719100/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1475049593, "creation_date": 1475049593, "answer_id": 39741413, "question_id": 39733731, "link": "https://stackoverflow.com/questions/39733731/how-to-filter-table-by-column-in-ruby-rails/39741413#39741413", "title": "how to filter table by column in ruby rails", "body": "<p>I think, <a href=\"http://railscasts.com/episodes/228-sortable-table-columns?autoplay=true\" rel=\"nofollow\">this</a> cast can help you perfect without any gems.</p>\n"}], "owner": {"reputation": 939, "user_id": 6636242, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8303e67cc4bc87a8c8d288b58ea73ff6?s=128&d=identicon&r=PG&f=1", "display_name": "krs8888", "link": "https://stackoverflow.com/users/6636242/krs8888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3809, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1475049593, "creation_date": 1475008108, "last_edit_date": 1495535649, "question_id": 39733731, "link": "https://stackoverflow.com/questions/39733731/how-to-filter-table-by-column-in-ruby-rails", "title": "how to filter table by column in ruby rails", "body": "<p>I am displaying a list of user in my table (no pagination). User contains id, name, age, status, location. I want to allow the list to be filtered by age or status. How do I do this in ruby rails ? I tried using <a href=\"http://filterrific.clearcove.ca/\" rel=\"nofollow noreferrer\">filterrific</a>  but stuck since last two days <a href=\"https://stackoverflow.com/questions/39719100/using-filterrific-gem-to-filter-table-by-column\">here</a></p>\n\n<pre><code>Id name age status location\n1  xz    22  single  ca\n2  yy    23  married ma\n</code></pre>\n\n<p>view </p>\n\n<pre><code>&lt;table&gt;\n    &lt;tr&gt;\n      &lt;th&gt;id&lt;/th&gt;\n      &lt;th&gt;name&lt;/th&gt;\n      &lt;th&gt;age&lt;/th&gt;\n      &lt;th&gt;status&lt;/th&gt;\n      &lt;th&gt;location&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;% items.each do |item| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= item.id %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= item.name %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= item.age %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= item.status %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= item.lcation %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/table&gt;\n</code></pre>\n\n<p>controller</p>\n\n<pre><code> def index\n    @items  = User.all\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "fixtures"], "comments": [{"owner": {"reputation": 1153, "user_id": 337461, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c2e959ce22855a0e0be0cad58530399d?s=128&d=identicon&r=PG", "display_name": "dknight", "link": "https://stackoverflow.com/users/337461/dknight"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1475006051, "post_id": 39733089, "comment_id": 66764149, "body": "Clearly that is equal to 979462526."}], "answers": [{"comments": [{"owner": {"reputation": 1153, "user_id": 337461, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c2e959ce22855a0e0be0cad58530399d?s=128&d=identicon&r=PG", "display_name": "dknight", "link": "https://stackoverflow.com/users/337461/dknight"}, "edited": false, "score": 0, "creation_date": 1475006822, "post_id": 39733333, "comment_id": 66764609, "body": "Interesting. Thanks for the explanation. The idea was to refer to the user object&#39;s id value in stores.yml. Do you know how to do it?"}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "reply_to_user": {"reputation": 1153, "user_id": 337461, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c2e959ce22855a0e0be0cad58530399d?s=128&d=identicon&r=PG", "display_name": "dknight", "link": "https://stackoverflow.com/users/337461/dknight"}, "edited": false, "score": 0, "creation_date": 1475006895, "post_id": 39733333, "comment_id": 66764648, "body": "I don&#39;t usually use fixtures, give me some time to check it."}, {"owner": {"reputation": 1153, "user_id": 337461, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c2e959ce22855a0e0be0cad58530399d?s=128&d=identicon&r=PG", "display_name": "dknight", "link": "https://stackoverflow.com/users/337461/dknight"}, "edited": false, "score": 0, "creation_date": 1475006991, "post_id": 39733333, "comment_id": 66764687, "body": "Sure. If you can add that, it will be really helpful."}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "reply_to_user": {"reputation": 1153, "user_id": 337461, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c2e959ce22855a0e0be0cad58530399d?s=128&d=identicon&r=PG", "display_name": "dknight", "link": "https://stackoverflow.com/users/337461/dknight"}, "edited": false, "score": 0, "creation_date": 1475007543, "post_id": 39733333, "comment_id": 66764988, "body": "did read this <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/FixtureSet.html\" rel=\"nofollow noreferrer\">guide</a>? Section <b>Label references for associations (belongs_to, has_one, has_many)</b>. I will update my answer, not sure if it works but you can try it"}], "tags": [], "owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "is_accepted": true, "score": 1, "last_activity_date": 1475008064, "last_edit_date": 1475008064, "creation_date": 1475006495, "answer_id": 39733333, "question_id": 39733089, "link": "https://stackoverflow.com/questions/39733089/why-does-id-value-change-when-referring-fixtures-in-rails/39733333#39733333", "title": "Why does id value change when referring fixtures in rails", "body": "<p>I think <code>ActiveRecord::FixtureSet.identify(:first_user)</code> has nothing to do with <code>first_user</code> fixture itself.<br>\nSee <a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L576\" rel=\"nofollow\">source code</a>.</p>\n\n<p>According to comment it just generates identifier for a given label. In you case it's <code>:first_user</code>.</p>\n\n<p>So you can just open <code>rails console</code> and do it by hands </p>\n\n<pre><code>Zlib.crc32('first_user') % (2 ** 30 - 1) \n# =&gt; 979462526\n</code></pre>\n\n<p>And you will get just the same number.<br>\nSo it has nothing to do with any particular fixture (since I don't have any fixtures).</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Maybe you should try to use associations instead of linking ids directly.</p>\n\n<pre><code># users.yml\nfirst_user:\n  name: User1\n  ...\n\n# stores.yml\none:\n  name: MyFirstString\n  user: first_user\n</code></pre>\n\n<p>This way I hope it should work like expected.</p>\n"}], "owner": {"reputation": 1153, "user_id": 337461, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c2e959ce22855a0e0be0cad58530399d?s=128&d=identicon&r=PG", "display_name": "dknight", "link": "https://stackoverflow.com/users/337461/dknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 39733333, "answer_count": 1, "score": 1, "last_activity_date": 1475008064, "creation_date": 1475005563, "question_id": 39733089, "link": "https://stackoverflow.com/questions/39733089/why-does-id-value-change-when-referring-fixtures-in-rails", "title": "Why does id value change when referring fixtures in rails", "body": "<p>I have the following fixtures.</p>\n\n<pre><code>users.yml\n\nfirst_user:\n  name: User1\n  password_hash: &lt;%= BCrypt::Engine.hash_secret('password', '$2a$10$xKPXy2QabH6ThBjo7gNB8O') %&gt;\n  password_salt: $2a$10$xKPXy2QabH6ThBjo7gNB8O\n  role: 1\n\nstores.yml\none:\n  name: MyFirstString\n  user_id: &lt;%= ActiveRecord::FixtureSet.identify(:first_user) %&gt;\n</code></pre>\n\n<p>However, when I load <code>Store.first.user_id</code> I get the value as <code>979462526</code> while <code>User.first.id</code> is <code>980190962</code>. I think these values should not be different. Please correct my understanding or point out error in my code if any. The model structure is: a user has many stores.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1475006897, "last_edit_date": 1475006897, "creation_date": 1475005145, "answer_id": 39732989, "question_id": 39732958, "link": "https://stackoverflow.com/questions/39732958/how-to-test-a-method-with-more-than-one-optional-output/39732989#39732989", "title": "how to test a method with more than one optional output?", "body": "<pre><code>\"One\" || \"Two\"\n</code></pre>\n\n<p>expression is always evaluated to <code>'One'</code>, because <code>\"One\"</code> is <code>truthy</code> value, so it never reaches to <code>\"Two\"</code> part.</p>\n\n<p>You can go with </p>\n\n<pre><code>class StringTest &lt; Test::Unit::TestCase\n  def test_respond\n    assert %w(One Two).include?(game)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 6888969, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ad17c6acb0d182f7576fd0dbb030177b?s=128&d=identicon&r=PG&f=1", "display_name": "AbUndZu", "link": "https://stackoverflow.com/users/6888969/abundzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 39732989, "answer_count": 1, "score": 0, "last_activity_date": 1475006897, "creation_date": 1475004988, "last_edit_date": 1475005390, "question_id": 39732958, "link": "https://stackoverflow.com/questions/39732958/how-to-test-a-method-with-more-than-one-optional-output", "title": "how to test a method with more than one optional output?", "body": "<p>I have the following code:</p>\n\n<pre><code>def game\n  case rand(2)\n  when 0\n    \"One\"\n  when 1\n    \"Two\"\n  end\nend\n</code></pre>\n\n<p>Now I want to test it, so I wrote the following test:</p>\n\n<pre><code>require_relative 'random.rb'\nrequire 'test/unit'\n\nclass StringTest &lt; Test::Unit::TestCase\n\n  def test_respond\n    assert_equal(\"One\" || \"Two\", game)\n  end\n\nend\n</code></pre>\n\n<p>But, the test only sees <code>\"One\"</code>, <code>\"Two\"</code> isn't seen. How I can fix it? Should I use something other than <code>||</code>? Or another function?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3258, "user_id": 1147918, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OQ9iv.png?s=128&g=1", "display_name": "Joe C", "link": "https://stackoverflow.com/users/1147918/joe-c"}, "edited": false, "score": 1, "creation_date": 1475004683, "post_id": 39732813, "comment_id": 66763399, "body": "Doesn&#39;t look like you have an end tag for your form_for."}, {"owner": {"reputation": 1401, "user_id": 2723934, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/025a08b4c87bf427fffab6600dea6ae8?s=128&d=identicon&r=PG&f=1", "display_name": "miler350", "link": "https://stackoverflow.com/users/2723934/miler350"}, "edited": false, "score": 1, "creation_date": 1475004734, "post_id": 39732813, "comment_id": 66763430, "body": "He needs <code>elsif</code>...he&#39;s rendering two <code>else</code> statements."}, {"owner": {"reputation": 3258, "user_id": 1147918, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OQ9iv.png?s=128&g=1", "display_name": "Joe C", "link": "https://stackoverflow.com/users/1147918/joe-c"}, "edited": false, "score": 1, "creation_date": 1475005423, "post_id": 39732813, "comment_id": 66763811, "body": "Second else is for the nested if. It&#39;s not best practice, but there&#39;s nothing wrong with that syntactically speaking."}], "answers": [{"tags": [], "owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "is_accepted": false, "score": 1, "last_activity_date": 1475012535, "last_edit_date": 1475012535, "creation_date": 1475006596, "answer_id": 39733360, "question_id": 39732813, "link": "https://stackoverflow.com/questions/39732813/more-efficent-way-to-write-this-if-statement-clean-up-code/39733360#39733360", "title": "More efficent way to write this if statement? (Clean up code)", "body": "<p>You don't need to nest a new <code>if</code> block inside of the first <code>else</code>.</p>\n\n<p>Also, as @JoeC pointed out in the comments, you need a closing <code>&lt;% end %&gt;</code> for your <code>form_for</code>.</p>\n\n<pre><code>&lt;% if @user.bio.present? %&gt;\n  &lt;p class=\"user-bio\"&gt;&lt;%= @user.bio %&gt;&lt;/p&gt;\n&lt;% elsif @user == current_user %&gt;\n  &lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, multipart: true }) do |f| %&gt;\n    &lt;%= devise_error_messages! %&gt;\n    &lt;div class=\"input-group\"&gt;\n      &lt;%= f.text_field :bio, class: \"form-control\" %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"actions\"&gt;\n      &lt;%= f.submit \"Update\", class: \"btn-signin\" %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;% else %&gt;\n  &lt;p class=\"user-bio\"&gt;\n    Sorry, this user hasn't written anything about themselves yet.\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>If you think this is still too much tag soup, you could put the form inside of a partial named <code>_form.html.erb</code> and render it. That way the main view template is focused on the logic of what to display rather than getting into the details of the form.</p>\n\n<pre><code>&lt;% if @user.bio.present? %&gt;\n  &lt;p class=\"user-bio\"&gt;&lt;%= @user.bio %&gt;&lt;/p&gt;\n&lt;% elsif @user == current_user %&gt;\n  &lt;%= render 'form' %&gt;\n&lt;% else %&gt;\n  &lt;p class=\"user-bio\"&gt;\n    Sorry, this user hasn't written anything about themselves yet.\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The last thing that I'll point out is that you may want to switch around the first and second <code>if</code> tests. The way your logic is laid out, the user would never be able to edit their bio after they've entered one.</p>\n"}, {"tags": [], "owner": {"reputation": 408, "user_id": 6890702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434e060d4bf038d595449d2fa8638b95?s=128&d=identicon&r=PG&f=1", "display_name": "scieslak", "link": "https://stackoverflow.com/users/6890702/scieslak"}, "is_accepted": false, "score": 1, "last_activity_date": 1475019854, "creation_date": 1475019854, "answer_id": 39735949, "question_id": 39732813, "link": "https://stackoverflow.com/questions/39732813/more-efficent-way-to-write-this-if-statement-clean-up-code/39735949#39735949", "title": "More efficent way to write this if statement? (Clean up code)", "body": "<p>I agree 100% with Chris Peters. You can place the form code into a separate file called partial:</p>\n\n<p><strong><em>app/views/YOUR_CONTROLLER_NAME/_form.html.erb</em></strong></p>\n\n<pre><code> &lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name), \n                        html: { method: :put, multipart: true }) do |f| %&gt;\n\n   &lt;%= devise_error_messages! %&gt;\n     &lt;div class=\"input-group\"&gt;\n       &lt;%= f.text_field :bio, class: \"form-control\" %&gt;\n     &lt;/div&gt;\n\n     &lt;div class=\"actions\"&gt;\n       &lt;%= f.submit \"Update\", class: \"btn-signin\" %&gt;\n     &lt;/div&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>Some information about partials you can find here: <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials\" rel=\"nofollow\">http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials</a></p>\n\n<p>If you decide to follow Chris's advice, you can transform the code further:</p>\n\n<pre><code>&lt;% if @user.bio.present? %&gt;\n  &lt;p class=\"user-bio\"&gt;&lt;%= @user.name %&gt;&lt;/p&gt;\n&lt;% else %&gt;\n  &lt;%= render 'form' if @user == current_user %&gt;\n  &lt;p class=\"user-bio\"&gt;\n    Sorry, this user hasn't written anything yet.\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Ruby If statements examples: <a href=\"https://www.natashatherobot.com/ruby-shorthands-if-then-else/\" rel=\"nofollow\">Great Ruby Shorthands For If\u2026Then\u2026Else</a></p>\n\n<p>You can also consider using content tags as below:</p>\n\n<pre><code>&lt;% if @user.bio.present? %&gt;\n  &lt;%= content_tag(:p, @user.name, class: \"user-bio\") %&gt;\n&lt;% else %&gt;\n  &lt;%= render 'form' if @user == current_user %&gt;\n  &lt;% no_bio_msg = \"Sorry, this user hasn't written anything yet.\" %&gt;\n  &lt;%= content_tag(:p, no_bio_msg, class: \"user-bio\") %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Hope this will help.</p>\n"}], "owner": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1475019854, "creation_date": 1475004457, "question_id": 39732813, "link": "https://stackoverflow.com/questions/39732813/more-efficent-way-to-write-this-if-statement-clean-up-code", "title": "More efficent way to write this if statement? (Clean up code)", "body": "<p>Originally, the idea was if the user had written a bio, show it on their profile. Otherwise, display a message.</p>\n\n<pre><code>&lt;% if @user.bio.present? %&gt;\n  &lt;p class=\"user-bio\"&gt;&lt;%= @user.bio %&gt;&lt;/p&gt;\n&lt;% else %&gt;\n  &lt;% if @user == current_user %&gt;\n    &lt;p class=\"user-bio\"&gt;Press the green edit button and write something interesting about yourself.&lt;/p&gt;\n  &lt;% else %&gt;\n    &lt;p class=\"user-bio\"&gt;Sorry, this user hasn't written anything about themselves yet.&lt;/p&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Then I thought of a way to improve this feature. Instead of making the user navigate to their settings page (devise/registrations/edit), let them edit their bio straight from their profile page (users/show).</p>\n\n<p>To do this, the bio will be an input field that just looks like text, but when hovered over or clicked on, the user can see they can edit the text.</p>\n\n<p>So I made this mock up version below and added resources to my user controller. But I get an error with the last <code>else</code> tag. I'm new to rails (and ruby) and I think this code is quite messy. Could someone with more experience help me write a better if statement that solves the same problem. I need a cleaner solution.</p>\n\n<pre><code>    &lt;% if @user.bio.present? %&gt;\n      &lt;p class=\"user-bio\"&gt;&lt;%= @user.bio %&gt;&lt;/p&gt;\n    &lt;% else %&gt;\n      &lt;% if @user == current_user %&gt;\n        &lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, multipart: true }) do |f| %&gt;\n          &lt;%= devise_error_messages! %&gt;\n            &lt;div class=\"input-group\"&gt;\n              &lt;%= f.text_field :bio, class: \"form-control\" %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"actions\"&gt;\n              &lt;%= f.submit \"Update\", class: \"btn-signin\" %&gt;\n            &lt;/div&gt;\n      &lt;% else %&gt;\n        &lt;p class=\"user-bio\"&gt;Sorry, this user hasn't written anything about themselves yet.&lt;/p&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "activerecord", "rspec", "memoization"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475003083, "post_id": 39732183, "comment_id": 66762573, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, especially &quot;<a href=\"http://catb.org/esr/faqs/smart-questions.html\" rel=\"nofollow noreferrer\">How To Ask Questions The Smart Way</a>&quot;. Grammar is important on Stack Overflow. We&#39;re creating a reference book so please put in the effort to use spell checking and proper formatting."}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 4, "last_activity_date": 1475002610, "last_edit_date": 1475002610, "creation_date": 1475002309, "answer_id": 39732265, "question_id": 39732183, "link": "https://stackoverflow.com/questions/39732183/how-does-rpsecs-let-use-memoization/39732265#39732265", "title": "How does rpsec&#39;s &quot;let&quot; use memoization?", "body": "<blockquote>\n  <p>Are they saying that the expression for :count is only evaluated once\n  for a spec, and again between every spec?</p>\n</blockquote>\n\n<p>answer from <a href=\"https://www.relishapp.com/rspec/rspec-core/v/3-5/docs/helper-methods/let-and-let\" rel=\"nofollow\">docs</a>:</p>\n\n<blockquote>\n  <p>The value will be cached across multiple calls in the same example but\n  not across examples.</p>\n</blockquote>\n\n<p>So yes, it will be evaluated once for every example.</p>\n\n<p>In other words the value will be evaluated once per <code>it</code> block.</p>\n\n<p>I find their example super expressive, look:</p>\n\n<pre><code>$count = 0\nRSpec.describe \"let\" do\n  let(:count) { $count += 1 }\n\n  # count will not change no matter how many times we reference it in this it block\n  it \"memoizes the value\" do\n    expect(count).to eq(1) # evaluated (set to 1)\n    expect(count).to eq(1) # did not change (still 1)\n  end\n\n  # count will be set to 2 and remain 2 untill the end of the block\n  it \"is not cached across examples\" do\n    expect(count).to eq(2) # evaluated in new it block\n  end\nend\n</code></pre>\n\n<p>We referenced <code>count</code> twice in <code>memoizes the value</code> example, but it was evaluated only once.</p>\n"}], "owner": {"reputation": 723, "user_id": 4400355, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/PrAnD.jpg?s=128&g=1", "display_name": "Ryder Bergerud", "link": "https://stackoverflow.com/users/4400355/ryder-bergerud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1475003619, "creation_date": 1475002016, "last_edit_date": 1475003619, "question_id": 39732183, "link": "https://stackoverflow.com/questions/39732183/how-does-rpsecs-let-use-memoization", "title": "How does rpsec&#39;s &quot;let&quot; use memoization?", "body": "<p>It says in \"<a href=\"https://www.relishapp.com/rspec/rspec-core/v/3-5/docs/helper-methods/let-and-let\" rel=\"nofollow\">RSpec Core 3.5</a>\": </p>\n\n<blockquote>\n  <p>Use <code>let</code> to define a memoized helper method</p>\n</blockquote>\n\n<p>I don't find their example very clear.  Are they saying that the expression for <code>:count</code> is only evaluated once for a spec, and again between every spec?</p>\n\n<p>I'm interested particularly in understanding how memoization with <code>let</code> would work with an ActiveRecord object.</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1475000811, "post_id": 39731821, "comment_id": 66761267, "body": "Perhaps this will give some pointer  <a href=\"http://stackoverflow.com/questions/3262697/how-do-i-get-the-version-from-a-gemspec-file\" title=\"how do i get the version from a gemspec file\">stackoverflow.com/questions/3262697/&hellip;</a>"}, {"owner": {"reputation": 357162, "user_id": 28804, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/015c999a9db79ffb3030b3cc207d0be8?s=128&d=identicon&r=PG", "display_name": "mipadi", "link": "https://stackoverflow.com/users/28804/mipadi"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1475000987, "post_id": 39731821, "comment_id": 66761380, "body": "@WandMaker: Yeah, I guess that could work. I&#39;d like to query the gem database somehow, but I guess I can construct a path to the gemspec instead."}], "answers": [{"tags": [], "owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "is_accepted": false, "score": 0, "last_activity_date": 1475013412, "creation_date": 1475013412, "answer_id": 39734964, "question_id": 39731821, "link": "https://stackoverflow.com/questions/39731821/can-i-programmatically-retrieve-a-gems-spec-from-the-gem-itself/39734964#39734964", "title": "Can I programmatically retrieve a gem&#39;s spec from the gem itself?", "body": "<p>Since your gem is definitionally already loaded by this point, <code>Gem.loaded_specs['name-of-your-gem']</code> will give you what you want.</p>\n\n<p><a href=\"http://www.rubydoc.info/github/rubygems/rubygems/Gem.loaded_specs\" rel=\"nofollow\">Documentation for <code>Gem.loaded_specs</code></a></p>\n"}], "owner": {"reputation": 357162, "user_id": 28804, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/015c999a9db79ffb3030b3cc207d0be8?s=128&d=identicon&r=PG", "display_name": "mipadi", "link": "https://stackoverflow.com/users/28804/mipadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475013412, "creation_date": 1475000722, "question_id": 39731821, "link": "https://stackoverflow.com/questions/39731821/can-i-programmatically-retrieve-a-gems-spec-from-the-gem-itself", "title": "Can I programmatically retrieve a gem&#39;s spec from the gem itself?", "body": "<p>I have a gem. Is there a way to retrieve the gem's specification from within the gem itself?</p>\n\n<p>Specifically, I have some metadata that I want to retrieve and display when running one of the gem's executables. Is there a way to retrieve that metadata from within the gem?</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe"], "comments": [{"owner": {"reputation": 5, "user_id": 6889537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/153e03448348b649fd14bbe9cc94ca9a?s=128&d=identicon&r=PG&f=1", "display_name": "hamdani", "link": "https://stackoverflow.com/users/6889537/hamdani"}, "edited": false, "score": 0, "creation_date": 1475000639, "post_id": 39731733, "comment_id": 66761158, "body": "The attribute set in attributes/default.rb file is default[&#39;jdk&#39;][&#39;installer&#39;] = &#39;jdk-7u85-linux-x64&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 6889537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/153e03448348b649fd14bbe9cc94ca9a?s=128&d=identicon&r=PG&f=1", "display_name": "hamdani", "link": "https://stackoverflow.com/users/6889537/hamdani"}, "edited": false, "score": 0, "creation_date": 1475028359, "post_id": 39735192, "comment_id": 66771795, "body": "Wonderful, thanks a lot. How to access the ruby block attribute value outside ruby block for later usage in the recipe? I have tried #{node.default[&#39;tar_folder&#39;]} but it is empty."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 5, "user_id": 6889537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/153e03448348b649fd14bbe9cc94ca9a?s=128&d=identicon&r=PG&f=1", "display_name": "hamdani", "link": "https://stackoverflow.com/users/6889537/hamdani"}, "edited": false, "score": 0, "creation_date": 1475043319, "post_id": 39735192, "comment_id": 66776243, "body": "You are probably running in to compile bs converge issues. Check out <a href=\"https://coderanger.net/two-pass/\" rel=\"nofollow noreferrer\">coderanger.net/two-pass</a>"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 0, "last_activity_date": 1475014665, "creation_date": 1475014665, "answer_id": 39735192, "question_id": 39731733, "link": "https://stackoverflow.com/questions/39731733/how-to-access-node-attributes-and-recipe-variables-in-ruby-block/39735192#39735192", "title": "How to access node attributes and recipe variables in ruby_block", "body": "<p>You need double quotes. Single quotes in Ruby do not support the <code>#{foo}</code> interpolation syntax.</p>\n"}], "owner": {"reputation": 5, "user_id": 6889537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/153e03448348b649fd14bbe9cc94ca9a?s=128&d=identicon&r=PG&f=1", "display_name": "hamdani", "link": "https://stackoverflow.com/users/6889537/hamdani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 854, "favorite_count": 0, "accepted_answer_id": 39735192, "answer_count": 1, "score": 0, "last_activity_date": 1475014665, "creation_date": 1475000415, "last_edit_date": 1475003612, "question_id": 39731733, "link": "https://stackoverflow.com/questions/39731733/how-to-access-node-attributes-and-recipe-variables-in-ruby-block", "title": "How to access node attributes and recipe variables in ruby_block", "body": "<p>New to chef development :), the variable value from an attribute does not seem to be visible in the ruby block. </p>\n\n<pre><code>installer = node['jdk']['installer']\n\nruby_block \"tar-folder-name\" do\n        block do\n                command = 'tar -tvf /tmp/#{installer}.tar.gz | head -1 | awk \\'{print $NF}\\''\n                command_out = shell_out(command)\n                node.default['tar_folder'] = command_out.stdout\n        end\n        action :run\nend\n</code></pre>\n\n<p>It works when I hardcode the variable value:</p>\n\n<pre><code>command = 'tar -tvf /tmp/jdk-7u85-linux-x64.tar.gz | head -1 | awk \\'{print $NF}\\''\n</code></pre>\n\n<p>How can I use the node attributes in the ruby_block?\nMoreover, how can I use a variable value from a ruby block outside ruby block? For info, when I try to use node.tar_folder, it does not have the value extracted in ruby block.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["html", "ruby", "model-view-controller", "ruby-on-rails-5", "embedded-ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1474999117, "post_id": 39730807, "comment_id": 66760301, "body": "is <code>new_user_path</code> routed to <code>&#47;signup</code> ? Probably not as I would assume it would be something like <code>post &#39;&#47;signup&#39;, to: &#39;users#create&#39;, as: :signup_path</code> and you would use sign up path. Also for edit this should probably be <code>user_path(@user.id)</code> but without seeing your routes I can not be sure."}, {"owner": {"reputation": 101, "user_id": 4220103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a59a7d12cd105ad3a6ea102b336266e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4220103/sam"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1474999460, "post_id": 39730807, "comment_id": 66760471, "body": "So I changed it to signup_path and I also changed it to user_path(@user.id) and it worked! Thank you!"}], "owner": {"reputation": 101, "user_id": 4220103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a59a7d12cd105ad3a6ea102b336266e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4220103/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474999275, "creation_date": 1474997009, "last_edit_date": 1474999275, "question_id": 39730807, "link": "https://stackoverflow.com/questions/39730807/factoring-out-embedded-ruby-code-in-a-view-mvc", "title": "Factoring out embedded ruby code in a view (MVC)", "body": "<p>I am doing Michael Hartl's railstutorial.org and I am trying to do an exercise factoring out a form in a view. Here is the link to the chapter, and the problem is associated with listing 10.5, 10.6 and 10.7. I am trying to figure out exactly how to provide the proper <code>:url</code>, at least that's what I think I'm doing.</p>\n\n<p><a href=\"https://www.railstutorial.org/book/updating_and_deleting_users\" rel=\"nofollow\">https://www.railstutorial.org/book/updating_and_deleting_users</a></p>\n\n<p>Here is my code:<br>\n_form.html.erb  </p>\n\n<pre><code>&lt;%= form_for @user, :url =&gt; yield(:url) do |f| %&gt;  \n     ...  \n&lt;% end %&gt;\n</code></pre>\n\n<p>edit.html.erb  </p>\n\n<pre><code>&lt;% provide(:title, 'Edit user') %&gt;\n&lt;% provide(:button_text, 'Save changes') %&gt;\n&lt;% provide(:url, edit_user_path(current_user)) %&gt;\n&lt;h1&gt;Update your profile&lt;/h1&gt;\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n    &lt;%= render 'form' %&gt;\n    &lt;div class=\"gravatar_edit\"&gt;\n      &lt;%= gravatar_for @user %&gt;\n      &lt;a href=\"http://gravatar.com/emails\" target=\"_blank\"&gt;Change&lt;/a&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>new.html.erb</p>\n\n<pre><code>&lt;% provide(:title, 'Sign up') %&gt;\n&lt;% provide(:button_text, 'Create my account') %&gt;\n&lt;% provide(:url, new_user_path) %&gt;\n&lt;h1&gt;Sign up&lt;/h1&gt;\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n    &lt;%= render 'form' %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I have tried repeatedly to get this to work, trying various ways, but so far, to no avail. Here is the test that is failing:  </p>\n\n<pre><code> FAIL[\"test_invalid_signup_information\", UsersSignupTest, 2.447965808212757]\n test_invalid_signup_information#UsersSignupTest (2.45s)\n        Expected at least 1 element matching \"form[action=\"/signup\"]\", found 0..\n        Expected 0 to be &gt;= 1.\n        test/integration/users_signup_test.rb:8:in `block in &lt;class:UsersSignupTest&gt;'\n</code></pre>\n\n<p>and the code for it:  </p>\n\n<pre><code>  test \"invalid signup information\" do\n    get signup_path\n    assert_response :success\n    assert_select \"form[action=\\\"/signup\\\"]\"\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>  get     '/signup',  to: 'users#new'\n  post    '/signup',  to: 'users#create'\n  patch   '/signup',  to: 'users#update'\n</code></pre>\n\n<p>Any help would be greatly appreciated!</p>\n"}, {"tags": ["ruby", "ubuntu", "supervisord"], "comments": [{"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1475070676, "post_id": 39730806, "comment_id": 66795164, "body": "I might suggest using Foreman to export to supervisor, and see if you get anything different. <a href=\"https://ddollar.github.io/foreman/#EXPORT-FORMATS\" rel=\"nofollow noreferrer\">ddollar.github.io/foreman/#EXPORT-FORMATS</a>  Also, for what it&#39;s worth, when I search for your particular error, it has something to do with RVM and environment variables. Might be another place to start."}, {"owner": {"reputation": 6601, "user_id": 1672458, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/F1hky.png?s=128&g=1", "display_name": "vaindil", "link": "https://stackoverflow.com/users/1672458/vaindil"}, "reply_to_user": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1475176460, "post_id": 39730806, "comment_id": 66850813, "body": "@Matt I tried Foreman, using <code>foreman start</code> works perfectly, but the exported output for supervisord does not work. I&#39;ll add that to the question momentarily."}, {"owner": {"reputation": 13468, "user_id": 635887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a54e77591e1f9a75d3be9a195db45f?s=128&d=identicon&r=PG", "display_name": "Ray Hunter", "link": "https://stackoverflow.com/users/635887/ray-hunter"}, "edited": false, "score": 0, "creation_date": 1502830881, "post_id": 39730806, "comment_id": 78361257, "body": "So the problem is the <code>bundle</code> script has the following <code>#!&#47;usr&#47;bin&#47;env ruby_executable_hooks</code> line at the start. The <code>env</code> command cannot find the <code>ruby_executable_hooks</code> script in the same directory. I might require some <code>environment</code> settings in the <code>supervisor</code> configuration."}, {"owner": {"reputation": 13468, "user_id": 635887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a54e77591e1f9a75d3be9a195db45f?s=128&d=identicon&r=PG", "display_name": "Ray Hunter", "link": "https://stackoverflow.com/users/635887/ray-hunter"}, "edited": false, "score": 0, "creation_date": 1502832918, "post_id": 39730806, "comment_id": 78362174, "body": "I added the correct paths to the <code>environment</code> in the <code>supervisor</code> config and that should have worked; however that did not work for me. The error still is happening."}], "answers": [{"comments": [{"owner": {"reputation": 1425, "user_id": 906133, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/sscnX.jpg?s=128&g=1", "display_name": "Milad Rezazadeh", "link": "https://stackoverflow.com/users/906133/milad-rezazadeh"}, "edited": false, "score": 1, "creation_date": 1566289663, "post_id": 45702383, "comment_id": 101599698, "body": "Thanks, I am using rbenv and passed the bundler path to the startup script and it worked. &quot;/root/.rbenv/shims/bundler&quot;"}], "tags": [], "owner": {"reputation": 13468, "user_id": 635887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a54e77591e1f9a75d3be9a195db45f?s=128&d=identicon&r=PG", "display_name": "Ray Hunter", "link": "https://stackoverflow.com/users/635887/ray-hunter"}, "is_accepted": false, "score": 1, "last_activity_date": 1502835386, "creation_date": 1502835386, "answer_id": 45702383, "question_id": 39730806, "link": "https://stackoverflow.com/questions/39730806/run-bundle-exec-middleman-server-with-supervisor/45702383#45702383", "title": "Run &#39;bundle exec middleman server&#39; with supervisor", "body": "<p>Here is what I did to get it working:</p>\n\n<p><code>rvm wrapper ruby-version-here executable-hooks</code></p>\n\n<p>ex: <code>rvm wrapper ruby-2.3.1 executable-hooks</code></p>\n\n<p>Once I added that to the wrapper, then added the wrapper path to my <code>supervisor</code> configuration it all started working.</p>\n\n<p>Your command might be like this now:</p>\n\n<p><code>command=/home/vaindil/.rvm/wrappers/ruby-2.3.1/bundle exec middleman server</code></p>\n"}], "owner": {"reputation": 6601, "user_id": 1672458, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/F1hky.png?s=128&g=1", "display_name": "vaindil", "link": "https://stackoverflow.com/users/1672458/vaindil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1055, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502835386, "creation_date": 1474997008, "last_edit_date": 1475176675, "question_id": 39730806, "link": "https://stackoverflow.com/questions/39730806/run-bundle-exec-middleman-server-with-supervisor", "title": "Run &#39;bundle exec middleman server&#39; with supervisor", "body": "<p>I'm working with <a href=\"https://github.com/lord/slate\" rel=\"nofollow\">slate</a>, which runs a web server with <code>bundle exec middleman server</code>. I'd like to persist this with supervisor, but I can't figure out how. Running the command normally from within the directory works just fine. The config I've tried is below, as is the error I get when running it.</p>\n\n<p>How can I properly run this as a daemon?</p>\n\n<p>supervisor .conf file:</p>\n\n<pre><code>[program:slate]\ndirectory=/home/vaindil/slate\ncommand=/home/vaindil/.rvm/gems/ruby-2.3.1/bin/bundle exec middleman server\nautostart=true\nautorestart=true\nstderr_logfile=/var/log/slate.err.log\nstdout_logfile=/var/log/slate.out.log\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>/usr/bin/env: ruby_executable_hooks: No such file or directory\n</code></pre>\n\n<p><strong>UPDATE:</strong> Per Matt's request in the comments, I tried running Foreman and exporting to supervisord. I get a different error from that.</p>\n\n<p>The output supervisord config:</p>\n\n<pre><code>[program:app-web-1]\ncommand=bundle exec middleman server\nautostart=true\nautorestart=true\nstopsignal=QUIT\nstdout_logfile=/var/log/web-1.log\nstderr_logfile=/var/log/web-1.error.log\ndirectory=/home/vaindil/slate\nenvironment=PORT=\"4567\"\n\n[group:app]\nprograms=app-web-1\n</code></pre>\n\n<p>The errors:</p>\n\n<pre><code>Warning: the running version of Bundler is older than /\nthe version that created the lockfile. We suggest you /\nupgrade to the latest version of Bundler by running `gem install bundler`.\nbundler: command not found: middleman\nInstall missing gem executables with `bundle install`\n</code></pre>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1474998127, "post_id": 39730742, "comment_id": 66759751, "body": "... and what is the response (in your browser)?"}, {"owner": {"reputation": 174, "user_id": 4139135, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1782720305/picture?type=large", "display_name": "Raphael Onofre", "link": "https://stackoverflow.com/users/4139135/raphael-onofre"}, "reply_to_user": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1474998300, "post_id": 39730742, "comment_id": 66759862, "body": "Only the headers are working fine."}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1474998937, "post_id": 39730742, "comment_id": 66760218, "body": "It doesn&#39;t look like you&#39;re doing anything to the body. You iterate over <code>@keys</code> but not <code>@values</code> which I assume you want in the <code>tbody</code>. Can you post that code?"}, {"owner": {"reputation": 174, "user_id": 4139135, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1782720305/picture?type=large", "display_name": "Raphael Onofre", "link": "https://stackoverflow.com/users/4139135/raphael-onofre"}, "reply_to_user": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1474999389, "post_id": 39730742, "comment_id": 66760439, "body": "@diego.greyrobot i&#39;ve updated the problem description"}, {"owner": {"reputation": 174, "user_id": 4139135, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1782720305/picture?type=large", "display_name": "Raphael Onofre", "link": "https://stackoverflow.com/users/4139135/raphael-onofre"}, "reply_to_user": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1475000158, "post_id": 39730742, "comment_id": 66760869, "body": "@peter working but just appeared the first row of the json"}, {"owner": {"reputation": 174, "user_id": 4139135, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1782720305/picture?type=large", "display_name": "Raphael Onofre", "link": "https://stackoverflow.com/users/4139135/raphael-onofre"}, "reply_to_user": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1475000929, "post_id": 39730742, "comment_id": 66761342, "body": "@peter Yes, i think the tbody is correct. When i run a &quot;p @values&quot; is showing what&#39;s in the view. I&#39;m trying to guess how can I call all the values."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1475001077, "post_id": 39730742, "comment_id": 66761430, "body": "was ont the wrong path, thought you didn&#39;t get all your values but it&#39;s about how to present them, see my answer&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 4139135, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1782720305/picture?type=large", "display_name": "Raphael Onofre", "link": "https://stackoverflow.com/users/4139135/raphael-onofre"}, "edited": false, "score": 0, "creation_date": 1475001216, "post_id": 39731884, "comment_id": 66761516, "body": "I&#39;m understanding now, but on the controller how can i pass all the values? Using  (at)values =  (at)banks.values gives me an error of &#39;undefined methods &#39;values&#39;&#39;."}, {"owner": {"reputation": 174, "user_id": 4139135, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1782720305/picture?type=large", "display_name": "Raphael Onofre", "link": "https://stackoverflow.com/users/4139135/raphael-onofre"}, "edited": false, "score": 0, "creation_date": 1475001952, "post_id": 39731884, "comment_id": 66761936, "body": "The question is: what can i pass to the controller for the view works correctly with this &lt;tbody&gt; you&#39;ve posted?"}, {"owner": {"reputation": 174, "user_id": 4139135, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1782720305/picture?type=large", "display_name": "Raphael Onofre", "link": "https://stackoverflow.com/users/4139135/raphael-onofre"}, "edited": false, "score": 0, "creation_date": 1475003192, "post_id": 39731884, "comment_id": 66762637, "body": "Peter, thanks for your help. Finally i&#39;ve got the &#39;array of arrays&#39; thing, i was trying to understand it!"}, {"owner": {"reputation": 174, "user_id": 4139135, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1782720305/picture?type=large", "display_name": "Raphael Onofre", "link": "https://stackoverflow.com/users/4139135/raphael-onofre"}, "edited": false, "score": 0, "creation_date": 1475004848, "post_id": 39731884, "comment_id": 66763491, "body": "Sure! Accepted!"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": true, "score": 1, "last_activity_date": 1475002800, "last_edit_date": 1475002800, "creation_date": 1475000938, "answer_id": 39731884, "question_id": 39730742, "link": "https://stackoverflow.com/questions/39730742/dynamically-display-hashes-data-json-in-the-view/39731884#39731884", "title": "Dynamically display hashes/data/JSON in the view", "body": "<p>If I understand you correctly, you want to show the values in separate td tags, you can do that like this. The @values is an array of arrays (the rows) which contain the cell values.</p>\n\n<pre><code>&lt;tbody&gt;\n &lt;% @values.each do |row| %&gt;\n  &lt;tr&gt;\n    &lt;% row.each do |value| %&gt;\n     &lt;td&gt;&lt;%= value %&gt;&lt;/td&gt;\n    &lt;%end%&gt;\n  &lt;/tr&gt;\n &lt;% end %&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>EDIT: you get your array of arrays like this</p>\n\n<pre><code>banks.map{|x| x.values}\n#[[247, \"246\", \"ABC BANK S.A.\"], [248, \"25\", \"Beta Bank\"]]\n</code></pre>\n\n<p>and you pass it to your view like this, not sure if necessary</p>\n\n<pre><code>erb :list, :locals =&gt; {values: @values, keys: @keys}\n</code></pre>\n"}], "owner": {"reputation": 174, "user_id": 4139135, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1782720305/picture?type=large", "display_name": "Raphael Onofre", "link": "https://stackoverflow.com/users/4139135/raphael-onofre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 39731884, "answer_count": 1, "score": 1, "last_activity_date": 1475018851, "creation_date": 1474996764, "last_edit_date": 1475018851, "question_id": 39730742, "link": "https://stackoverflow.com/questions/39730742/dynamically-display-hashes-data-json-in-the-view", "title": "Dynamically display hashes/data/JSON in the view", "body": "<p>I'm trying to dynamically insert headers and tbody into the HTML using Ruby and Sinatra. Until the moment i've got the headers but i'm not having success on the body.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>get '/list' do\n urlData = \"http://localhost:3000/data\"\n responseData = RestClient.get urlData\n\n @banks = JSON.parse(responseData.body)\n @keys = @banks[0].keys # OK\n @values =  @banks.map(&amp;:values) # Trying to put in the html\n\n erb :list\n\nend\n</code></pre>\n\n<p>The view, as follows:</p>\n\n<pre><code>&lt;thead&gt;\n &lt;tr&gt;\n  &lt;% @keys.each do |key| %&gt;\n   &lt;th&gt;&lt;%= key %&gt;&lt;/th&gt;\n  &lt;% end %&gt;\n &lt;/tr&gt;\n&lt;/thead&gt;\n\n&lt;tbody&gt;\n &lt;% @values.each do |value| %&gt;\n  &lt;tr&gt;\n   &lt;td&gt;&lt;%= value %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n &lt;% end %&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>The JSON format:</p>\n\n<pre><code>[\n {\n  \"ID\": 247,\n  \"Code\": \"246\",\n  \"Name\": \"ABC BANK S.A.\"\n },\n {\n  \"ID\": 248,\n  \"Code\": \"25\",\n  \"Name\": \"Beta Bank\"\n }, ...\n]\n</code></pre>\n\n<p>How is displaying:\n<a href=\"https://i.stack.imgur.com/i1x5L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i1x5L.png\" alt=\"enter image description here\"></a>\nA way to solve is placing kind of a increment, like</p>\n\n<pre><code>&lt;%= value[0] %&gt;\n</code></pre>\n\n<p>but i can't find an elegant way.</p>\n"}, {"tags": ["ruby", "docker", "swagger", "swagger-codegen"], "answers": [{"comments": [{"owner": {"reputation": 2248, "user_id": 3038677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/297e51c02b57e01d3fd06980f674e1b6?s=128&d=identicon&r=PG", "display_name": "mycargus", "link": "https://stackoverflow.com/users/3038677/mycargus"}, "edited": false, "score": 1, "creation_date": 1475096348, "post_id": 39737603, "comment_id": 66811067, "body": "Thank you for clarifying and offering helpful info! After digging into the swagger-generator container&#39;s logs, I saw the error being raised was something like &quot;connection refused by &lt;swaggerUrl&gt;&quot;. And yet the error according to the output of the curl request was &quot;invalid swagger definition.&quot; Not so helpful output, that. :(  I got it working after correcting the swaggerUrl option to <code>http:&#47;&#47;api&#47;apidocs.json</code>"}], "tags": [], "owner": {"reputation": 6261, "user_id": 420797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/caMVL.jpg?s=128&g=1", "display_name": "fehguy", "link": "https://stackoverflow.com/users/420797/fehguy"}, "is_accepted": true, "score": 8, "last_activity_date": 1475033752, "creation_date": 1475033752, "answer_id": 39737603, "question_id": 39730438, "link": "https://stackoverflow.com/questions/39730438/how-do-i-use-the-public-swagger-generator-docker-image-to-generate-a-client/39737603#39737603", "title": "How do I use the public swagger-generator docker image to generate a client?", "body": "<p>indeed you are correct, the docker image you're referring to is the same image used at <a href=\"http://generator.swagger.io\" rel=\"noreferrer\">http://generator.swagger.io</a></p>\n\n<p>The issue you're having is the input parameter isn't correct.  </p>\n\n<p>Now to get it right, please note that the swagger-generator has a web interface.  So once you start it up, like the instructions say, open it in a browser.  For example (replace the GENERATOR_HOST with your machine's IP address):</p>\n\n<pre><code>docker run -d -e GENERATOR_HOST=http://192.168.99.100 -p 80:8080 swaggerapi/swagger-generator\n</code></pre>\n\n<p>then you can open the swagger-ui on <code>http://192.168.99.100</code></p>\n\n<p>The important part here is that you can use the UI to see the call syntax.  If you're generating a client, go to <code>http://192.168.99.100/#!/clients/generateClient</code> select the language you want to generate and click the payload on the right.  Replace the <code>swaggerUrl</code> field with the address of your server and voila.</p>\n\n<p>You can use the output in the curl to figure out how to call from the command line.  It should be easy from there.</p>\n\n<p>Please keep in mind that just because a 3rd party tool says the swagger definition is valid doesn't mean it actually is.  I don't think that's your issue, though, but 3rd party tool mileage may vary...</p>\n"}], "owner": {"reputation": 2248, "user_id": 3038677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/297e51c02b57e01d3fd06980f674e1b6?s=128&d=identicon&r=PG", "display_name": "mycargus", "link": "https://stackoverflow.com/users/3038677/mycargus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3906, "favorite_count": 2, "accepted_answer_id": 39737603, "answer_count": 1, "score": 9, "last_activity_date": 1475033752, "creation_date": 1474995650, "question_id": 39730438, "link": "https://stackoverflow.com/questions/39730438/how-do-i-use-the-public-swagger-generator-docker-image-to-generate-a-client", "title": "How do I use the public swagger-generator docker image to generate a client?", "body": "<p>We have a fully dockerized web app with a valid Swagger definition for the API. The API runs in its own docker container, and we're using docker-compose to orchestrate everything. I want to generate a Ruby client based on the Swagger definition located at <code>http://api:8443/apidocs.json</code>.</p>\n\n<p>I've poured through the documentation <a href=\"https://github.com/swagger-api/swagger-codegen\">here</a>, which led me to <a href=\"https://hub.docker.com/r/swaggerapi/swagger-generator/\">Swagger's public docker image</a> for generating client and server code. Sadly the documentation is lacking and offers no examples for actually generating a client with the docker image.</p>\n\n<p>The <a href=\"https://github.com/swagger-api/swagger-codegen/blob/master/modules/swagger-generator/Dockerfile\">Dockerfile</a> indicates its container runs a web service, which I can only assume is the dockerized version of <a href=\"http://generator.swagger.io\">http://generator.swagger.io</a>. As such, I would expect to be able to generate a client with the following command: </p>\n\n<p><code>curl -X POST -H \"content-type:application/json\" -d \\\n'{\"swaggerUrl\":\"http://api:8443/apidocs\"}' \\\nhttp://swagger-generator:8080/api/gen/clients/ruby</code></p>\n\n<p>No luck here. I keep getting \"invalid swagger definition\" even though I've confirmed the swagger definition is valid with <code>(npm -q install -g swagger-tools &gt;/dev/null) &amp;&amp; swagger-tools validate http://api:8443/apidocs</code>.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1474994797, "post_id": 39730142, "comment_id": 66757759, "body": "What&#39;s wrong with <code>chars.map(&amp;:to_i)</code>? It works. If you&#39;re using that frequently enough it&#39;s an irritation make a method that does it for you."}, {"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1474994954, "post_id": 39730142, "comment_id": 66757843, "body": "As I said, nothing wrong with it. On the contrary, I like it. I am just wondering if there are more ways."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1474996949, "post_id": 39730142, "comment_id": 66759001, "body": "That&#39;s a pretty minimal approach, but if you want you can extend Integer to have a method called <code>digits</code> that does this."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1474997121, "post_id": 39730142, "comment_id": 66759114, "body": "Well the numbers are in denary so you could deconstruct them with this in mind."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1474997312, "post_id": 39730142, "comment_id": 66759237, "body": "We don&#39;t need a second question for the &quot;best&quot; answer, and your titles shouldn&#39;t include &quot;best&quot; in them. The &quot;best&quot; is implied by asking the question; obviously you&#39;re interested in the <i>best</i> answer or we wouldn&#39;t have a system where voting causes the higher-voted answers to bubble upwards."}], "owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1474994765, "answer_count": 0, "score": 0, "last_activity_date": 1475052295, "creation_date": 1474994679, "last_edit_date": 1475052295, "question_id": 39730142, "link": "https://stackoverflow.com/questions/39730142/how-to-split-a-number-into-an-array-of-its-digits-in-ruby", "closed_reason": "Duplicate", "title": "How to split a number into an array of its digits (in Ruby)?", "body": "<p><strong>How to split a number into an array of its digits?</strong></p>\n\n<p><code>123</code> should become <code>[1,2,3]</code></p>\n\n<p>I found this <a href=\"https://www.ruby-forum.com/topic/217041\" rel=\"nofollow\">thread</a> in the Ruby forum when I was looking for an idiomatic solution to the question above. The solutions there are working for me and they seem fine, I am using <code>.to_s.chars.map(&amp;:to_i)</code></p>\n\n<p>But the thread is quite old, and I want to known if there are better, maybe newer ways to solve the task, given that Ruby as a language has developed further? </p>\n\n<p><strong>Known solutions:</strong></p>\n\n<p><code>.to_s.chars.map(&amp;:to_i)</code></p>\n\n<p><code>12345.to_s.scan(/./)</code></p>\n\n<p>How do you solve it? Why?\nTo me as a beginner, seeing different ways to solve a problem helps a lot to \nunderstand the language and its use better. So, thanks for your input!</p>\n"}, {"tags": ["ruby", "twitter-bootstrap", "gruntjs", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 2735, "user_id": 1575941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e353fb2e064b3f9977b1791c78081ec5?s=128&d=identicon&r=PG", "display_name": "Vino", "link": "https://stackoverflow.com/users/1575941/vino"}, "is_accepted": false, "score": 0, "last_activity_date": 1476383620, "creation_date": 1476383620, "answer_id": 40028470, "question_id": 39730094, "link": "https://stackoverflow.com/questions/39730094/grunt-bundler-failed-to-load-command-scss-lint/40028470#40028470", "title": "Grunt - bundler: failed to load command: scss-lint", "body": "<p>Not sure what the issue is, but <code>scss-lint</code> is basically a syntax checker.  I find that if I remove <code>scss-lint</code> that TWBS complies.</p>\n\n<p>Try:</p>\n\n<pre><code>sudo gem uninstall scss-lint\n</code></pre>\n\n<p>Hopefully there will be a better answer than this, but for now this will get you going.</p>\n"}], "owner": {"reputation": 1798, "user_id": 2258038, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BkEQe.jpg?s=128&g=1", "display_name": "albertski", "link": "https://stackoverflow.com/users/2258038/albertski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 538, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1476383620, "creation_date": 1474994524, "question_id": 39730094, "link": "https://stackoverflow.com/questions/39730094/grunt-bundler-failed-to-load-command-scss-lint", "title": "Grunt - bundler: failed to load command: scss-lint", "body": "<p>I have bootstrap 4 set up locally and when I ran grunt watch I get the following warning:</p>\n\n<pre><code>Running \"scsslint:docs\" (scsslint) task\nWarning: \nbundleExec options set but no Bundler executable found in your PATH.\nMore info: https://github.com/ahmednuaman/grunt-scss-lint\n Use --force to continue.\n\nAborted due to warnings. \n</code></pre>\n\n<p>To fix this I ran the following command:</p>\n\n<pre><code>sudo gem install bundler -n /usr/local/bin\n</code></pre>\n\n<p>Then I got the following message:</p>\n\n<pre><code>Running \"scsslint:docs\" (scsslint) task\nRunning scss-lint on docs\n&gt;&gt; 1. Please make sure you have ruby installed: `ruby -v`\n&gt;&gt; 2. Install the `scss-lint` gem by running:\n&gt;&gt; gem update --system &amp;&amp; gem install scss-lint\n</code></pre>\n\n<p>So I ran the following commands:</p>\n\n<pre><code>sudo gem update --system -n /usr/local/bin\nsudo gem install scss_lint -n /usr/local/bin\n</code></pre>\n\n<p>Now when I run grunt watch I get the following:</p>\n\n<pre><code>Running \"scsslint:docs\" (scsslint) task\nRunning scss-lint on docs\nbundler: failed to load command: scss-lint (/usr/local/bin/scss-lint)\nWarning: Task \"scsslint:docs\" failed. Use --force to continue.\n</code></pre>\n\n<p>I am on OSX El Capitan. Anyone have an idea how to fix this?</p>\n\n<p>FYI I had to use the -n /usr/local/bin parameter on the commands because it would give me </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1474995520, "post_id": 39730350, "comment_id": 66758184, "body": "Thanks again for your answer!  Would you mind explaining why <code>lambda</code> is considered better than <code>-&gt;</code>?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 1, "creation_date": 1474995622, "post_id": 39730350, "comment_id": 66758227, "body": "@Neil it&#39;s just a &quot;prefered&quot; syntax, that Ruby community in the &quot;person&quot; of <a href=\"https://github.com/bbatsov/rubocop\" rel=\"nofollow noreferrer\">Rubocop</a> decided to be conventional. Basically use <code>lambda</code> over <code>-&gt;</code> for multiline scope in Rails"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 1, "creation_date": 1474995702, "post_id": 39730350, "comment_id": 66758276, "body": "@Neil I would definitely recommend you to install Rubocop and use it in your projects - you can sometimes even learn something, not to mention improvement in coding style you gain with it ;)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1474995315, "creation_date": 1474995315, "answer_id": 39730350, "question_id": 39730089, "link": "https://stackoverflow.com/questions/39730089/scope-change-from-pure-string-syntax-to-hash-syntax/39730350#39730350", "title": "Scope Change from Pure String Syntax to Hash Syntax", "body": "<p>The only way I <a href=\"http://apidock.com/rails/ActiveRecord/QueryMethods/order#1652-Ordering-on-associations-using-merge\" rel=\"nofollow\">have found</a> to not using plain string is <code>merge</code>:</p>\n\n<pre><code>scope :order_by_fiscal_year_and_money_type, lambda {\n  joins(money_pot: [:fiscal_year, :money_type])\n    .merge(FiscalYears.order(end_date: :desc)\n    .merge(MoneyType.order(:short_name)\n}\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 39730350, "answer_count": 1, "score": 1, "last_activity_date": 1475008420, "creation_date": 1474994511, "last_edit_date": 1475008420, "question_id": 39730089, "link": "https://stackoverflow.com/questions/39730089/scope-change-from-pure-string-syntax-to-hash-syntax", "title": "Scope Change from Pure String Syntax to Hash Syntax", "body": "<p>I have the following scope within a model:</p>\n\n<pre><code>class Office &lt; ApplicationRecord\n  belongs_to :money_pot\n  has_one :fiscal_year, through: :money_pot\n  has_one :money_type, through: :money_pot\n\n  scope :order_by_fiscal_year_and_money_type, -&gt; {\n      joins(money_pot: [:fiscal_year, :money_type])\n      .order(\"fiscal_years.end_date desc, money_types.short_name\")}\nend\n</code></pre>\n\n<p>This scope does work.  However: I would like to switch from the \"pure string\" syntax to the \"hash\" syntax within that <code>order</code> clause.  I am having trouble I think due to the fact that the <code>order</code> clause within the scope is on the associations.</p>\n\n<p>Here is what I have tried but it didn't work:</p>\n\n<pre><code>scope :order_by_fiscal_year_and_grant_type, -&gt; {\n    joins(money_pot: [:fiscal_year, :money_type])\n    .order(fiscal_years: {end_date: :desc}, money_types: {short_name: :asc})}\n</code></pre>\n\n<p>Here is the error it returns:</p>\n\n<blockquote>\n  <p>Direction \"{:end_date=>:desc}\" is invalid. Valid directions are: [:asc, :desc, :ASC, :DESC, \"asc\", \"desc\", \"ASC\", \"DESC\"]</p>\n</blockquote>\n\n<p>I have looked at the <a href=\"http://guides.rubyonrails.org/active_record_querying.html#ordering\" rel=\"nofollow\">ordering section</a> and the <a href=\"http://guides.rubyonrails.org/active_record_querying.html#hash-conditions\" rel=\"nofollow\">hash conditions</a> section of the Active Record Query Interface Rails Guides.</p>\n\n<p>How can I convert this scope completely into the hash syntax?</p>\n"}]