[{"tags": ["ruby-on-rails", "ruby", "twilio", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 408, "user_id": 370845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mbYfz.jpg?s=128&g=1", "display_name": "Will Mavis", "link": "https://stackoverflow.com/users/370845/will-mavis"}, "edited": false, "score": 0, "creation_date": 1528732408, "post_id": 50731176, "comment_id": 88609310, "body": "Silly question, but did you look at the example issues on the page it references? <a href=\"https://www.twilio.com/docs/errors/20404\" rel=\"nofollow noreferrer\">twilio.com/docs/errors/20404</a>"}, {"owner": {"reputation": 570, "user_id": 5347656, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50c696cb8d82b2701f5e9267a6a1a775?s=128&d=identicon&r=PG&f=1", "display_name": "frillybob", "link": "https://stackoverflow.com/users/5347656/frillybob"}, "reply_to_user": {"reputation": 408, "user_id": 370845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mbYfz.jpg?s=128&g=1", "display_name": "Will Mavis", "link": "https://stackoverflow.com/users/370845/will-mavis"}, "edited": false, "score": 0, "creation_date": 1528840195, "post_id": 50731176, "comment_id": 88657355, "body": "@WillMavis Of course, that&#39;s not helping at all. It&#39;s some combination of running in production, using elastic beanstalk, and twilio at the same time."}, {"owner": {"reputation": 408, "user_id": 370845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mbYfz.jpg?s=128&g=1", "display_name": "Will Mavis", "link": "https://stackoverflow.com/users/370845/will-mavis"}, "edited": false, "score": 0, "creation_date": 1528853682, "post_id": 50731176, "comment_id": 88660446, "body": "When it is working in development, does it log the resources it is accessing (something like &quot;The requested resource /2010-04-01/Accounts/REMOVED/Messages.json&quot;)?  If so, does comparing those resources give any indication to what&#39;s different about production?"}], "answers": [{"comments": [{"owner": {"reputation": 570, "user_id": 5347656, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50c696cb8d82b2701f5e9267a6a1a775?s=128&d=identicon&r=PG&f=1", "display_name": "frillybob", "link": "https://stackoverflow.com/users/5347656/frillybob"}, "edited": false, "score": 0, "creation_date": 1529269164, "post_id": 50850929, "comment_id": 88800728, "body": "Perfect thank you! I would suggest that this guide be updated to remove the SECRET_KEY_BASE references in regards to the twilio configuration. <a href=\"https://www.twilio.com/blog/2017/12/send-sms-ruby-rails-5-coffee.html\" rel=\"nofollow noreferrer\">twilio.com/blog/2017/12/send-sms-ruby-rails-5-coffee.html</a>"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 570, "user_id": 5347656, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50c696cb8d82b2701f5e9267a6a1a775?s=128&d=identicon&r=PG&f=1", "display_name": "frillybob", "link": "https://stackoverflow.com/users/5347656/frillybob"}, "edited": false, "score": 0, "creation_date": 1529453448, "post_id": 50850929, "comment_id": 88875201, "body": "Ah, thanks. That is an odd way to place the env variables in that blog post. I&#39;ll see about updating it."}], "tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": true, "score": 2, "last_activity_date": 1528957662, "creation_date": 1528957662, "answer_id": 50850929, "question_id": 50731176, "link": "https://stackoverflow.com/questions/50731176/cannot-send-messages-in-production-elastic-beanstalk/50850929#50850929", "title": "Cannot send messages in production (elastic beanstalk)", "body": "<p>Twilio developer evangelist here.</p>\n\n<p>It appears you have your secrets.yml file setting everything to your Rails application secret key base. It should probably look more like:</p>\n\n<pre><code> production:\n  secret_key_base: asdfff\n  twilio_account_sid:  &lt;%= ENV.fetch(\"TWILIO_ACCOUNT_SID\", \"asdf\") %&gt;\n  twilio_auth_token:  &lt;%= ENV.fetch(\"TWILIO_AUTH_TOKEN\", \"asdf\") %&gt;\n  twilio_phone_number:  &lt;%= ENV.fetch(\"TWILIO_PHONE_NUMBER\", \"asdf\") %&gt;\n</code></pre>\n\n<p>You should then get those three other environment variables from your <a href=\"https://www.twilio.com/console\" rel=\"nofollow noreferrer\">Twilio console</a> and set them using the same command:</p>\n\n<pre><code>eb setenv TWILIO_ACCOUNT_SID=ACXXXXXXXXX TWILIO_AUTH_TOKEN=YYYYYYYYYYY TWILIO_PHONE_NUMBER=+15551234567\n</code></pre>\n\n<p>Let me know if that helps at all.</p>\n"}], "owner": {"reputation": 570, "user_id": 5347656, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50c696cb8d82b2701f5e9267a6a1a775?s=128&d=identicon&r=PG&f=1", "display_name": "frillybob", "link": "https://stackoverflow.com/users/5347656/frillybob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 50850929, "answer_count": 1, "score": 0, "last_activity_date": 1528957662, "creation_date": 1528329034, "last_edit_date": 1528415694, "question_id": 50731176, "link": "https://stackoverflow.com/questions/50731176/cannot-send-messages-in-production-elastic-beanstalk", "title": "Cannot send messages in production (elastic beanstalk)", "body": "<p>I cannot get my applications sending messages in productions in AWS's Elastic Beanstalk. I have my application working in dev. When I transfer to production in elastic beanstalk I get an issue sending messages. </p>\n\n<pre><code>[HTTP 404] 20404 : Unable to create record The requested resource /2010-04-01/Accounts/REMOVED/Messages.json was not found https://www.twilio.com/docs/errors/20404\n</code></pre>\n\n<p>I think I have the secrets.yml file setup correctly. Below is a redacted version. </p>\n\n<pre><code>development:\n  secret_key_base: asdfff\n  twilio_account_sid:  &lt;%= ENV.fetch(\"SECRET_KEY_BASE\", \"asdf\") %&gt;\n  twilio_auth_token:  &lt;%= ENV.fetch(\"SECRET_KEY_BASE\", \"asdf\") %&gt;\n  twilio_phone_number:  &lt;%= ENV.fetch(\"SECRET_KEY_BASE\", \"asdf\") %&gt;\n\ntest:\n  secret_key_base: asdfff\n  twilio_account_sid:  &lt;%= ENV.fetch(\"SECRET_KEY_BASE\", \"asdf\") %&gt;\n  twilio_auth_token:  &lt;%= ENV.fetch(\"SECRET_KEY_BASE\", \"asdf\") %&gt;\n  twilio_phone_number:  &lt;%= ENV.fetch(\"SECRET_KEY_BASE\", \"asdf\") %&gt;\n\nproduction:\n  secret_key_base: asdfff\n  twilio_account_sid:  &lt;%= ENV.fetch(\"SECRET_KEY_BASE\", \"asdf\") %&gt;\n  twilio_auth_token:  &lt;%= ENV.fetch(\"SECRET_KEY_BASE\", \"asdf\") %&gt;\n  twilio_phone_number:  &lt;%= ENV.fetch(\"SECRET_KEY_BASE\", \"asdf\") %&gt;\n</code></pre>\n\n<p>I have also run this command to update my secrets. </p>\n\n<pre><code>eb setenv SECRET_KEY_BASE=$(rails secret)\n</code></pre>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["ruby", "macos", "installation", "rubygems", "pry"], "comments": [{"owner": {"reputation": 25126, "user_id": 578288, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5b2b185c814bb25f2f95a1152e58f033?s=128&d=identicon&r=PG", "display_name": "Rory O&#39;Kane", "link": "https://stackoverflow.com/users/578288/rory-okane"}, "edited": false, "score": 0, "creation_date": 1528483173, "post_id": 50731140, "comment_id": 88540681, "body": "Run <code>brew doctor</code> and see if it warns you about anything related to permissions. Also check if the <code>ruby</code> and <code>gem</code> you are running really come from Homebrew and not from the system Ruby."}], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 9916210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tjO6F.png?s=128&g=1", "display_name": "Delmys Asteroraena", "link": "https://stackoverflow.com/users/9916210/delmys-asteroraena"}, "is_accepted": false, "score": 1, "last_activity_date": 1528848083, "creation_date": 1528848083, "answer_id": 50827412, "question_id": 50731140, "link": "https://stackoverflow.com/questions/50731140/gem-install-pry-filepermissionerror/50827412#50827412", "title": "gem install pry FilePermissionError", "body": "<p>Common Practices when something says what you don't have permission to perform an action:</p>\n\n<ol>\n<li>Try to execute the command with <code>sudo</code> prefix (<code>sudo gem install pry</code>).</li>\n<li>Execute the command as <code>root</code> (Not recommended due to potential issues). </li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 9194312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc6a7a5f3fc503bb32d534ecf224f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Wus92", "link": "https://stackoverflow.com/users/9194312/wus92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528848083, "creation_date": 1528328714, "question_id": 50731140, "link": "https://stackoverflow.com/questions/50731140/gem-install-pry-filepermissionerror", "title": "gem install pry FilePermissionError", "body": "<p>When I tried to install pry on terminal, it keeps telling me </p>\n\n<pre><code>$ gem install pry\nWhile executing gem ... (Gem::FilePermissionError)\n    You don't have write permissions for the /Library/Ruby/Gems/2.3.0 \ndirectory.\n</code></pre>\n\n<p>I've tried to update gem, using homebrew to install ruby. but still get the same error. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing"], "comments": [{"owner": {"reputation": 59, "user_id": 8463672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d602d4ba1efc894cbc324864199e14bf?s=128&d=identicon&r=PG", "display_name": "SMHauck", "link": "https://stackoverflow.com/users/8463672/smhauck"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1528331747, "post_id": 50731060, "comment_id": 88470653, "body": "You&#39;re correct, name is the uniq field. It&#39;s where it is failing ...   UNIQUE constraint failed: people.name:"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1528340133, "post_id": 50731060, "comment_id": 88472463, "body": "Right, thanks. You&#39;re probably accidentally re-using a name without cleaning up the database between tests. I use RSpec so I can&#39;t say much more."}], "answers": [{"tags": [], "owner": {"reputation": 31606, "user_id": 227863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AtDIv.jpg?s=128&g=1", "display_name": "stephenmurdoch", "link": "https://stackoverflow.com/users/227863/stephenmurdoch"}, "is_accepted": false, "score": 1, "last_activity_date": 1528333835, "creation_date": 1528333835, "answer_id": 50731642, "question_id": 50731060, "link": "https://stackoverflow.com/questions/50731060/ruby-rails-5-1-6-tests-fail-on-unique-column/50731642#50731642", "title": "Ruby Rails 5.1.6 tests fail on unique column", "body": "<p>I'm guessing you're using autogenerated tests containing the following code:</p>\n\n<pre><code>test 'create' do\n  assert_difference 'People.count' do\n    post people_url, params: { people: { name: people(:one).name }}\n  end\nend\n</code></pre>\n\n<p>Can you see what's happening? The test rails generates for your create action uses the name attribute for the first people fixture. Change it to something like this:</p>\n\n<pre><code>test 'create' do\n  assert_difference 'People.count' do\n    post people_url, params: { people: { name: 'Matz' }}\n  end\nend\n</code></pre>\n\n<p>That might do it. Good luck.</p>\n"}], "owner": {"reputation": 59, "user_id": 8463672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d602d4ba1efc894cbc324864199e14bf?s=128&d=identicon&r=PG", "display_name": "SMHauck", "link": "https://stackoverflow.com/users/8463672/smhauck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528333835, "creation_date": 1528328102, "question_id": 50731060, "link": "https://stackoverflow.com/questions/50731060/ruby-rails-5-1-6-tests-fail-on-unique-column", "title": "Ruby Rails 5.1.6 tests fail on unique column", "body": "<p>I'm trying to run out of the box tests but they are failing on a unique column. Anyone else having this issue?</p>\n\n<pre><code>rails new MyApp\nrails g scaffold Person name:string:uniq note:text\nrails db:migrate\n</code></pre>\n\n<p>Edited my fixture to:</p>\n\n<pre><code>one:\n  name: ONE\n  note: MyText\n\ntwo:\n  name: TWO\n  note: MyText\n</code></pre>\n\n<p>The people_controller_test.rb has this to load the initial fixture:</p>\n\n<pre><code>class PeopleControllerTest &lt; ActionDispatch::IntegrationTest\n  setup do\n    @person = people(:one)\n  end\n</code></pre>\n\n<p>But it looks like it's loading both as I find this in the database:</p>\n\n<pre><code>sqlite&gt; select * from people;\n298486374|TWO|MyText|2018-06-06 23:21:29.686780|2018-06-06 23:21:29.686780\n980190962|ONE|MyText|2018-06-06 23:21:29.686780|2018-06-06 23:21:29.686780\n</code></pre>\n\n<p>I'm getting this error:</p>\n\n<pre><code>Error:\nPeopleControllerTest#test_should_create_person:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: people.name: INSERT INTO \"people\" (\"name\", \"note\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?)\n    app/controllers/people_controller.rb:30:in `block in create'\n    app/controllers/people_controller.rb:29:in `create'\n    test/controllers/people_controller_test.rb:20:in `block (2 levels) in &lt;class:PeopleControllerTest&gt;'\n    test/controllers/people_controller_test.rb:19:in `block in &lt;class:PeopleControllerTest&gt;'\n\n\nbin/rails test test/controllers/people_controller_test.rb:18\n\n.\n\nFinished in 0.848814s, 8.2468 runs/s, 8.2468 assertions/s.\n7 runs, 7 assertions, 0 failures, 1 errors, 0 skips\n</code></pre>\n\n<p>Removing the test.sqlite3 file doesn't fix it. (I've seen folks have issues with non-uniq data)</p>\n\n<p>I'm using Rails 5.1.6 with Ruby 2.4.1p111. </p>\n\n<p>Any help is appreciated.</p>\n\n<p>Thanks</p>\n\n<p>bill</p>\n"}, {"tags": ["mysql", "sql", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1528327583, "post_id": 50730737, "comment_id": 88469637, "body": "Always, <i>always</i> use placeholder values for data. Seeing things like <code>#{num}</code> in your query is extremely concerning, that&#39;s how you get <a href=\"http://bobby-tables.com/\" rel=\"nofollow noreferrer\">SQL injection bugs</a> and all the horrible problems that come with that. You&#39;re using a placeholder for some values (e.g. <code>list.state</code>) but you <i>must</i> use placeholders for <i>all</i> values. The problem seems to be you&#39;re not using the correct method to execute this query, as <code>query</code> doesn&#39;t support placeholder values, so you need to find the method that does."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528327670, "post_id": 50730737, "comment_id": 88469660, "body": "Which Ruby driver for MySQL are you using? If you&#39;re using the low-level driver, like the <code>mysql2</code> gem, it&#39;s very feature limited and hard to use. Instead use a layer like ActiveRecord or <a href=\"https://github.com/jeremyevans/sequel\" rel=\"nofollow noreferrer\">Sequel</a> which helps abstract some of these low-level concerns away."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1528329708, "post_id": 50730737, "comment_id": 88470164, "body": "i have not seen this sort of thing and am not sure it&#39;s valid: <code>ORDER BY list.person, list.state=&#39;closed&#39; DESC</code> .. why do you put the equality check in the ORDER BY?"}], "answers": [{"tags": [], "owner": {"reputation": 196, "user_id": 8889610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad83ed667a27f95f1bd6d003a5432f73?s=128&d=identicon&r=PG&f=1", "display_name": "Karen Vicknair", "link": "https://stackoverflow.com/users/8889610/karen-vicknair"}, "is_accepted": false, "score": 2, "last_activity_date": 1528330885, "creation_date": 1528330885, "answer_id": 50731362, "question_id": 50730737, "link": "https://stackoverflow.com/questions/50730737/syntax-error-in-sql-query-not-able-to-find-mistake/50731362#50731362", "title": "Syntax Error in SQL query. Not able to find mistake", "body": "<p>Look at the ORDER BY part of the query</p>\n\n<pre><code>ORDER BY list.person, list.state='closed' DESC, list.updated_at DESC \n</code></pre>\n\n<p>list.state should not have an ='closed' </p>\n\n<p>Just try changing the it all to</p>\n\n<pre><code>ORDER BY list.person, list.state DESC, list.updated_at DESC\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": -1, "last_activity_date": 1528354673, "creation_date": 1528354673, "answer_id": 50734764, "question_id": 50730737, "link": "https://stackoverflow.com/questions/50730737/syntax-error-in-sql-query-not-able-to-find-mistake/50734764#50734764", "title": "Syntax Error in SQL query. Not able to find mistake", "body": "<p>I think you are using the wrong character for double quotes. You have <code>\u201c</code>. Try <code>\"</code> instead.</p>\n"}], "owner": {"reputation": 1, "user_id": 9905909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b295b36e5d9b2b1feb1c2d829849e5d0?s=128&d=identicon&r=PG&f=1", "display_name": "altruistic spork", "link": "https://stackoverflow.com/users/9905909/altruistic-spork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528354673, "creation_date": 1528325763, "last_edit_date": 1528354575, "question_id": 50730737, "link": "https://stackoverflow.com/questions/50730737/syntax-error-in-sql-query-not-able-to-find-mistake", "title": "Syntax Error in SQL query. Not able to find mistake", "body": "<p>I am writing tests for my database in mysql.</p>\n\n<pre><code>con.query(\u201cSELECT  `list`.* FROM `list`  WHERE `list`.`place` = 86 AND `list`.`person` = \\\"#{person_id}\\\" AND (( (list.state = 'open' AND num=\\\"#{num}\\\") || (list.state = ?) )) AND (list.updated_at &gt; \\\"2018-06-05\\\") ORDER BY list.person, list.state='closed' DESC, list.updated_at DESC LIMIT 50 OFFSET 1\u201d)\n</code></pre>\n\n<p><code>list</code> is a table, and <code>num</code>, <code>place</code>, and <code>person</code> are values of a single item from list. I'm also using this in a ruby script.</p>\n\n<p>I get a syntax error. The error message is:</p>\n\n<p><code>You have an error in your SQL syntax check the manual that corresponds to your MySQL server version for the right syntax to use near \u2018`?) )) AND (list.update_at &gt; \u201c2018-06-05\u201d)) ORDER BY list.person, or`\u2019</code></p>\n\n<p>I cannot figure out the issue. Please help me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "deployment", "capistrano", "digital-ocean"], "comments": [{"owner": {"reputation": 24970, "user_id": 73673, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/H81Fx.jpg?s=128&g=1", "display_name": "berkes", "link": "https://stackoverflow.com/users/73673/berkes"}, "edited": false, "score": 0, "creation_date": 1528362236, "post_id": 50730369, "comment_id": 88481778, "body": "We need more information. Can you run <code>bundle exec rake assets precompile</code> locally? And what about locally but using <code>RAILS_ENV=production</code> before that command?  Reading the code of the MessageEncryptor makes me beleive there is some important variable missing on your server. But maybe the asset compilation does not work at all."}, {"owner": {"reputation": 133, "user_id": 8399239, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qNTUfvECo7g/AAAAAAAAAAI/AAAAAAAAEYw/Cs7yJq15yao/photo.jpg?sz=128", "display_name": "Hemershon Silva", "link": "https://stackoverflow.com/users/8399239/hemershon-silva"}, "reply_to_user": {"reputation": 24970, "user_id": 73673, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/H81Fx.jpg?s=128&g=1", "display_name": "berkes", "link": "https://stackoverflow.com/users/73673/berkes"}, "edited": false, "score": 0, "creation_date": 1528373959, "post_id": 50730369, "comment_id": 88489473, "body": "When doing cap production deploy the entire process to when the bundle exec rak assets: precompile arrives, the error returns as ActiveSupport :: MessageEncryptor :: InvalidMessage:"}, {"owner": {"reputation": 24970, "user_id": 73673, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/H81Fx.jpg?s=128&g=1", "display_name": "berkes", "link": "https://stackoverflow.com/users/73673/berkes"}, "edited": false, "score": 0, "creation_date": 1528381143, "post_id": 50730369, "comment_id": 88494793, "body": "I understand that. But I asked what happens when you run <code>bundle exec rake assets::precompile</code> locally. And what happens when you run <code>RAILS_ENV=production bundle exec rake assets:precompile</code> locally."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 3900354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c099c6f33ebb7b9ecebe1da4f1ce24d?s=128&d=identicon&r=PG&f=1", "display_name": "chrichar", "link": "https://stackoverflow.com/users/3900354/chrichar"}, "is_accepted": false, "score": 0, "last_activity_date": 1528745407, "creation_date": 1528745407, "answer_id": 50804793, "question_id": 50730369, "link": "https://stackoverflow.com/questions/50730369/im-trying-to-deploy-in-the-digital-ocean-when-the-final-part-arrives-activesup/50804793#50804793", "title": "I&#39;m trying to deploy in the digital ocean, when the final part arrives ActiveSupport::MessageEncryptor::InvalidMessage", "body": "<p>Try adding this to your <code>deploy.rb</code> file</p>\n\n<p><code>before \"deploy:assets:precompile\", \"bundle:install\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 2704360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74b4b1d0423640d853ef16da0bfc67d?s=128&d=identicon&r=PG&f=1", "display_name": "Howardsun", "link": "https://stackoverflow.com/users/2704360/howardsun"}, "is_accepted": true, "score": 0, "last_activity_date": 1533869563, "creation_date": 1533869563, "answer_id": 51778253, "question_id": 50730369, "link": "https://stackoverflow.com/questions/50730369/im-trying-to-deploy-in-the-digital-ocean-when-the-final-part-arrives-activesup/51778253#51778253", "title": "I&#39;m trying to deploy in the digital ocean, when the final part arrives ActiveSupport::MessageEncryptor::InvalidMessage", "body": "<p>I have encountered your problem and solved it.    </p>\n\n<p>The reason of problem is rails 5.2.0 couldn't get your <code>secret_key_base</code>. You can use <code>gem dotrails</code> in <code>Gemfile</code> and then type command in terminal at local machine: <code>bundle install</code>.    </p>\n\n<p>Then add <code>.env</code> to <code>shared/</code> directory at rails app of remote machine and its content is <code>SECRET_KEY_BASE = 'YOURSECRETKEY'</code>. Also add <code>.env</code> to <code>config/deploy.rb</code> file such as </p>\n\n<pre><code>\nappend :linked_files, \".env\"\n</code></pre>    \n\n<p>Kindly reminder: add <code>.env</code> to your <code>.gitignore</code> file.</p>\n\n<p>Last, deploy your app again by capistrano.</p>\n\n<p>Cheers,</p>\n"}], "owner": {"reputation": 133, "user_id": 8399239, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qNTUfvECo7g/AAAAAAAAAAI/AAAAAAAAEYw/Cs7yJq15yao/photo.jpg?sz=128", "display_name": "Hemershon Silva", "link": "https://stackoverflow.com/users/8399239/hemershon-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 1, "accepted_answer_id": 51778253, "answer_count": 2, "score": 0, "last_activity_date": 1533869563, "creation_date": 1528323068, "question_id": 50730369, "link": "https://stackoverflow.com/questions/50730369/im-trying-to-deploy-in-the-digital-ocean-when-the-final-part-arrives-activesup", "title": "I&#39;m trying to deploy in the digital ocean, when the final part arrives ActiveSupport::MessageEncryptor::InvalidMessage", "body": "<p>I'm trying to deploy in the digital ocean, when the final part arrives ~ / .rvm / bin / rvm 2.4.4 from the bundle exec rake assets: precompile\nit returns this error ActiveSupport :: MessageEncryptor :: InvalidMessage: ActiveSupport :: MessageEncryptor :: InvalidMessage Who can give me a power already thank you!</p>\n\n<pre><code>00:06 deploy:assets:precompile\n  01 ~/.rvm/bin/rvm 2.4.4 do bundle exec rake assets:precompile\n  01 rake aborted!\n  01 ActiveSupport::MessageEncryptor::InvalidMessage: ActiveSupport::MessageEncryptor::InvalidMessage\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/message_encryptor.rb:206:in `rescue in _decrypt'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/message_encryptor.rb:183:in `_decrypt'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/message_encryptor.rb:157:in `decrypt_and_verify'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/messages/rotator.rb:21:in `decrypt_and_verify'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/encrypted_file.rb:79:in `decrypt'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/encrypted_file.rb:42:in `read'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/encrypted_configuration.rb:21:in `read'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/encrypted_configuration.rb:33:in `config'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/encrypted_configuration.rb:38:in `options'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/core_ext/module/delegation.rb:271:in `method_missin\u2026\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/railties-5.2.0/lib/rails/application.rb:433:in `secret_key_base'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/railties-5.2.0/lib/rails/application.rb:176:in `key_generator'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/globalid-0.4.1/lib/global_id/railtie.rb:26:in `block (2 levels) in &lt;class:Railtie&gt;'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/lazy_load_hooks.rb:69:in `block in execute_hook'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/lazy_load_hooks.rb:62:in `with_execution_control'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/lazy_load_hooks.rb:67:in `execute_hook'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/lazy_load_hooks.rb:52:in `block in run_load_hooks'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/lazy_load_hooks.rb:51:in `each'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/lazy_load_hooks.rb:51:in `run_load_hooks'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/railties-5.2.0/lib/rails/application/finisher.rb:75:in `block in &lt;module:Finisher&gt;'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/railties-5.2.0/lib/rails/initializable.rb:32:in `instance_exec'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/railties-5.2.0/lib/rails/initializable.rb:32:in `run'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/railties-5.2.0/lib/rails/initializable.rb:61:in `block in run_initializers'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/railties-5.2.0/lib/rails/initializable.rb:60:in `run_initializers'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/railties-5.2.0/lib/rails/application.rb:361:in `initialize!'\n  01 /var/www/jrpescados/releases/20180606215329/config/environment.rb:5:in `&lt;main&gt;'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in req\u2026\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with\u2026\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/railties-5.2.0/lib/rails/application.rb:337:in `require_environment!'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/railties-5.2.0/lib/rails/application.rb:520:in `block in run_tasks_blocks'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/sprockets-rails-3.2.1/lib/sprockets/rails/task.rb:62:in `block (2 levels) in define'\n  01 /var/www/jrpescados/shared/bundle/ruby/2.4.0/gems/rake-12.3.1/exe/rake:27:in `&lt;top (required)&gt;'\n  01 /home/deploy/.rvm/rubies/ruby-2.4.4/bin/bundle:30:in `block in &lt;main&gt;'\n  01 /home/deploy/.rvm/rubies/ruby-2.4.4/bin/bundle:22:in `&lt;main&gt;'\n  01 /home/deploy/.rvm/gems/ruby-2.4.4/bin/ruby_executable_hooks:15:in `eval'\n  01 /home/deploy/.rvm/gems/ruby-2.4.4/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["json", "ruby", "tcp"], "answers": [{"comments": [{"owner": {"reputation": 418, "user_id": 336879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/304a917272a2cf18e14934ad00303f90?s=128&d=identicon&r=PG", "display_name": "Adjam", "link": "https://stackoverflow.com/users/336879/adjam"}, "edited": false, "score": 0, "creation_date": 1528326885, "post_id": 50730517, "comment_id": 88469462, "body": "This doesn&#39;t work for me because of the line &#39;hash = JSON.parse(response)&#39;. It crashes the server. It stops output like &quot;puts &#39;abc&#39; &quot; for example. Why is this?"}], "tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": false, "score": 3, "last_activity_date": 1528324140, "creation_date": 1528324140, "answer_id": 50730517, "question_id": 50730323, "link": "https://stackoverflow.com/questions/50730323/json-no-longer-parsable-after-being-sent-through-tcp-in-ruby/50730517#50730517", "title": "JSON no longer parsable after being sent through TCP in Ruby", "body": "<p>In your server you wrote <code>response.to_json</code>. This turns a string to JSON, then throws it away. And I don't like the <code>.chomp</code>, either.</p>\n\n<p>Try </p>\n\n<pre><code>response = client.gets\nhash = JSON.parse(response)\n</code></pre>\n\n<p>Now <code>hash</code> is a Ruby Hash object with your data in it, and <code>hash['b']</code> should work correctly.</p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528404748, "post_id": 50736697, "comment_id": 88507664, "body": "for safety reasons I would recommend <code>JSON::parse</code> over <code>JSON::load</code>"}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": false, "score": 1, "last_activity_date": 1528439936, "last_edit_date": 1528439936, "creation_date": 1528360846, "answer_id": 50736697, "question_id": 50730323, "link": "https://stackoverflow.com/questions/50730323/json-no-longer-parsable-after-being-sent-through-tcp-in-ruby/50736697#50736697", "title": "JSON no longer parsable after being sent through TCP in Ruby", "body": "<p>The problem is that <code>.to_json</code> does not parse JSON inside a string and replace itself with the result. It is used to convert the string into a format that is an acceptable JSON value.</p>\n\n<pre><code>require 'json'\nstring = \"abc\"\nputs string\nputs string.to_json\n</code></pre>\n\n<p>This will output:</p>\n\n<pre><code>abc\n\"abc\"\n</code></pre>\n\n<p>The method is added to the <code>String</code> class by the JSON generator and it uses it internally to generate the JSON document.</p>\n\n<p>But why does your <code>response['b']</code> return <code>\"b\"</code>?</p>\n\n<p>Because Ruby strings have a method called <code>[]</code> that can be used to:</p>\n\n<ul>\n<li>Return a substring: <code>\"abc\"[0,2] =&gt; \"ab\"</code></li>\n<li>Return a single character from index: <code>\"abc\"[1] =&gt; \"b\"</code></li>\n<li>Return a substring if the string contains it: <code>\"abc\"[\"bc\"] =&gt; \"bc\"</code>, <code>\"abc\"[\"fg\"] =&gt; nil</code></li>\n<li>Return a regexp match: <code>\"abc\"[/^a([a-z])c/, 1] =&gt; \"b\"</code></li>\n<li>and possibly some other ways I can't think of right now.</li>\n</ul>\n\n<p>So this happens because your response is a string that has the character \"b\" in it:</p>\n\n<pre><code>response = \"something with a b\"\nputs response[\"b\"]\n# outputs b\nputs response[\"x\"]\n# outputs a blank line because response does not contain \"x\".\n</code></pre>\n\n<p>Instead of <code>.to_json</code> your code has to call <code>JSON.parse</code> or <code>JSON.load</code>:</p>\n\n<pre><code>data = JSON.parse(response)\nputs data['b']\n</code></pre>\n"}], "owner": {"reputation": 418, "user_id": 336879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/304a917272a2cf18e14934ad00303f90?s=128&d=identicon&r=PG", "display_name": "Adjam", "link": "https://stackoverflow.com/users/336879/adjam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528439936, "creation_date": 1528322832, "last_edit_date": 1528323266, "question_id": 50730323, "link": "https://stackoverflow.com/questions/50730323/json-no-longer-parsable-after-being-sent-through-tcp-in-ruby", "title": "JSON no longer parsable after being sent through TCP in Ruby", "body": "<p>I've created a basic client and server that pass a string, which I've changed to JSON instead. But the JSON string is only parsable before it gets sent through TCP. After it's sent, the string version is identical (after a chomp), but on the server side it no longer processes the JSON correctly. Here is some of my code (with other bits trimmed)</p>\n\n<p>Some of the client code</p>\n\n<pre><code>require 'json'\nrequire 'socket'\n\nfoo = {'a' =&gt; 1, 'b' =&gt; 2, 'c' =&gt; 3}\n\nputs foo.to_s + \".......\"\n\nfoo.to_json\nputs foo['b'] # =&gt; outputs the correct '2' answer\n\nclient = TCPSocket.open('localhost', 2000)\nclient.puts json\nclient.close;\n</code></pre>\n\n<p>Some of the server code</p>\n\n<pre><code>require 'socket'\nrequire 'json'\nserver = TCPServer.open(2000)\n\nwhile true\n\n  client = server.accept # Accept client\n  response = client.gets\n\n  print response\n  response = response.chomp\n  response.to_json\n\n  puts response['b'] # =&gt; outputs 'b'\n\nend\n</code></pre>\n\n<p>The output 'b' should be '2' instead. How do I fix this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "namespaces", "kubernetes"], "comments": [{"owner": {"reputation": 1, "user_id": 9905794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3237b5838f458a503080d31d516a1d59?s=128&d=identicon&r=PG&f=1", "display_name": "ma ra", "link": "https://stackoverflow.com/users/9905794/ma-ra"}, "edited": false, "score": 0, "creation_date": 1528325572, "post_id": 50730161, "comment_id": 88469104, "body": "it&#39;s @kube_client.create_namespace namespace"}], "answers": [{"tags": [], "owner": {"reputation": 7068, "user_id": 2718151, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7fbf5d5ebe5c06ec8f0db845d356b157?s=128&d=identicon&r=PG", "display_name": "Nicola Ben", "link": "https://stackoverflow.com/users/2718151/nicola-ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1528490192, "creation_date": 1528490192, "answer_id": 50768063, "question_id": 50730161, "link": "https://stackoverflow.com/questions/50730161/kubeclient-create-namespace-nomethoderror/50768063#50768063", "title": "kubeclient create_namespace NoMethodError", "body": "<p>This is a snippet from a <a href=\"https://github.com/abonas/kubeclient/blob/master/test/test_namespace.rb\" rel=\"nofollow noreferrer\">test</a>:</p>\n\n<pre><code>namespace = Kubeclient::Resource.new\nnamespace.metadata = {}\nnamespace.metadata.name = 'development'\n\nclient = Kubeclient::Client.new('http://localhost:8080/api/')\ncreated_namespace = client.create_namespace(namespace)\nassert_instance_of(Kubeclient::Resource, created_namespace)\nassert_equal(namespace.metadata.name, created_namespace.metadata.name)\n</code></pre>\n\n<p>You forgot parenthesis.</p>\n"}], "owner": {"reputation": 1, "user_id": 9905794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3237b5838f458a503080d31d516a1d59?s=128&d=identicon&r=PG&f=1", "display_name": "ma ra", "link": "https://stackoverflow.com/users/9905794/ma-ra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528490192, "creation_date": 1528321966, "question_id": 50730161, "link": "https://stackoverflow.com/questions/50730161/kubeclient-create-namespace-nomethoderror", "title": "kubeclient create_namespace NoMethodError", "body": "<p>I have a program in ruby which creates deployments, services and ing in a specific namespace. When I want to create a namespace, it complains for NoMethodError.</p>\n\n<p>This is the code:</p>\n\n<pre><code>namespace = Kubeclient::Resource.new\nnamespace.metadata = {}\nnamespace.metadata.name = ns\n@kube_client.create_daemon_set namespace\n</code></pre>\n\n<p>And this is the exception:</p>\n\n<pre><code>Exception occurred undefined method `create_namespace' for #&lt;Kubeclient::Client:0x0000000267b810&gt;\n</code></pre>\n\n<p>All other functions including creating deployment and service works fine.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "centos"], "comments": [{"owner": {"reputation": 2117, "user_id": 3709300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oqNTQ.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/3709300/justin"}, "edited": false, "score": 0, "creation_date": 1528322284, "post_id": 50729894, "comment_id": 88468117, "body": "Can you post the full output you get when trying to install?"}, {"owner": {"reputation": 1, "user_id": 9498097, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o6UsaT6QvnI/AAAAAAAAAAI/AAAAAAAAANk/oEmY807JUsQ/photo.jpg?sz=128", "display_name": "imen", "link": "https://stackoverflow.com/users/9498097/imen"}, "reply_to_user": {"reputation": 2117, "user_id": 3709300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oqNTQ.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/3709300/justin"}, "edited": false, "score": 0, "creation_date": 1528360397, "post_id": 50729894, "comment_id": 88480524, "body": "done, i just updated the post with more error details, thank you"}, {"owner": {"reputation": 408, "user_id": 370845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mbYfz.jpg?s=128&g=1", "display_name": "Will Mavis", "link": "https://stackoverflow.com/users/370845/will-mavis"}, "edited": false, "score": 0, "creation_date": 1528733234, "post_id": 50729894, "comment_id": 88609747, "body": "A Google search for &quot;libicu-dev centos&quot; shows something named libicu-devel for me (<a href=\"https://www.google.com/search?q=libicu-dev+centos\" rel=\"nofollow noreferrer\">google.com/search?q=libicu-dev+centos</a>).  Do you want to see if installing that will fix your issue?  Let me know if it does not."}, {"owner": {"reputation": 2989, "user_id": 1009655, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/K3jdk.png?s=128&g=1", "display_name": "Frederik Spang", "link": "https://stackoverflow.com/users/1009655/frederik-spang"}, "edited": false, "score": 0, "creation_date": 1531498419, "post_id": 50729894, "comment_id": 89633835, "body": "Looks like <code>icu4c</code> is missing."}], "owner": {"reputation": 1, "user_id": 9498097, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o6UsaT6QvnI/AAAAAAAAAAI/AAAAAAAAANk/oEmY807JUsQ/photo.jpg?sz=128", "display_name": "imen", "link": "https://stackoverflow.com/users/9498097/imen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528360348, "creation_date": 1528320596, "last_edit_date": 1528360348, "question_id": 50729894, "link": "https://stackoverflow.com/questions/50729894/error-installing-charlock-holmes-on-centos", "title": "Error Installing charlock_holmes on centos", "body": "<p>I am trying to install charlock_holmes gem on centos but i keep on getting </p>\n\n<pre><code>Installing charlock_holmes 0.7.6 with native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\ncurrent directory:\n/usr/local/rvm/gems/ruby-2.2.5/gems/charlock_holmes- \n0.7.6/ext/charlock_holmes\n/usr/local/rvm/rubies/ruby-2.2.5/bin/ruby -r ./siteconf20180607-1811- \n1cbsady.rb\n extconf.rb --with-icu-dir=C:UsersmadprogDesktopicusourcesdistusrlocal\n--with-icui18nlib=icuin --with-icudatalib=icudt\nchecking for main() in -licuin... no\nwhich: no brew in\n(/usr/local/rvm/gems/ruby-2.2.5/bin:/usr/local/rvm/gems/ruby- \n2.2.5@global/bin:/usr/local/rvm/rubies/ruby- \n2.2.5/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/usr/local/\nrvm/bin:/root/bin)\nchecking for main() in -licuin... no\n\n\n***** icu required (brew install icu4c or apt-get install libicu-dev)\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You \nmay need configuration options.\n\nTo see why this extension failed to compile, please check the mkmf.log which \ncan be found here:\n\n/usr/local/rvm/gems/ruby-2.2.5/extensions/x86_64- \n linux/2.2.0/charlock_holmes-0.7.6/mkmf.log\n\nextconf failed, exit code 1\n\nAn error occurred while installing charlock_holmes (0.7.6), and Bundler\ncannot continue.\n\nIn Gemfile:\ncopyright-header was resolved to 1.0.22, which depends on\ngithub-linguist was resolved to 6.2.0, which depends on\n  charlock_holmes\n</code></pre>\n\n<p>i also tried installing libicu-dev and this is what i get \n    no package libicu-dev available.\n    Error : nothing to do \nplease help, thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1528326631, "post_id": 50729881, "comment_id": 88469390, "body": "when you say it doesn&#39;t work, do you get an error message in the query, do you get data in the wrong order?"}, {"owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1528347513, "post_id": 50729881, "comment_id": 88474151, "body": "For the both cases it&#39;s showing <code>undefined method order for #&lt;Array:0x007f11cc242e50&gt;</code>"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1528348768, "post_id": 50729881, "comment_id": 88474596, "body": "can you specify the version of ruby, rails that you are using"}, {"owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1528349126, "post_id": 50729881, "comment_id": 88474727, "body": "I think the issue has solved by answer, thanks"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1528349968, "post_id": 50729881, "comment_id": 88475050, "body": "parent and jobs_count is fields of category table . right ?"}, {"owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1528353332, "post_id": 50729881, "comment_id": 88476531, "body": "Yes! that is @Vishal"}], "answers": [{"comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 1, "creation_date": 1528348802, "post_id": 50733433, "comment_id": 88474609, "body": "It&#39;s always better to do the sorting in database if you can, its much faster than doing it in ruby"}], "tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": true, "score": 3, "last_activity_date": 1528348735, "creation_date": 1528348735, "answer_id": 50733433, "question_id": 50729881, "link": "https://stackoverflow.com/questions/50729881/how-to-make-order-in-group-by-records-query-in-rails/50733433#50733433", "title": "How to make order in group_by records query in rails", "body": "<p>You can be using <code>sort_by</code> method like on the <code>childs.each</code> block like the following </p>\n\n<pre><code>childs.sort_by{|j| - j.jobs_count }.each do |name|\n</code></pre>\n\n<p>So the full code is:</p>\n\n<pre><code>cat.each do |parent, childs|\n   = parent\n   childs.sort_by{|j| - j.jobs_count }.each do |name|\n     = name.name\n   end\nend\n</code></pre>\n\n<p>It should work.</p>\n"}], "owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 50733433, "answer_count": 1, "score": 2, "last_activity_date": 1528348735, "creation_date": 1528320518, "last_edit_date": 1528347490, "question_id": 50729881, "link": "https://stackoverflow.com/questions/50729881/how-to-make-order-in-group-by-records-query-in-rails", "title": "How to make order in group_by records query in rails", "body": "<p>This is my current code</p>\n\n<pre><code>cat = Category.select(:id, :name, :parent, :jobs_count).group_by{|p| p.parent}\n\ncat.each do |parent, childs|\n   = parent\n   childs.each do |name|\n     = name.name\n   end\nend\n</code></pre>\n\n<p>the results of this are,</p>\n\n<p><strong>Technology</strong> (The parent)</p>\n\n<ul>\n<li>Ruby</li>\n<li>Rails</li>\n<li>Programming</li>\n</ul>\n\n<p>Now I want to order <code>childs</code> records by <code>jobs_count</code>, I am trying to do it using the code below,</p>\n\n<pre><code>childs.order(jobs_count: :desc).each do |name|\nError:\n=&gt; undefined method `order' for #&lt;Array:0x007f11cc08a2c0&gt;\n</code></pre>\n\n<p>also like that into main query</p>\n\n<pre><code>Category.select(:id, :name, :parent, :jobs_count).group_by{|p| p.parent}.order(jobs_count: :desc)\nError:\n#=&gt; undefined method `order' for #&lt;Array:0x007f11cc242e50&gt;\n</code></pre>\n\n<p>It not working for me, how can I order the records by <code>jobs_count</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1009, "user_id": 2502605, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7f3824de8433c834eecb229b79608412?s=128&d=identicon&r=PG&f=1", "display_name": "Roko", "link": "https://stackoverflow.com/users/2502605/roko"}, "is_accepted": false, "score": 0, "last_activity_date": 1528543233, "creation_date": 1528543233, "answer_id": 50773712, "question_id": 50729731, "link": "https://stackoverflow.com/questions/50729731/rails-admin-dynamic-fields/50773712#50773712", "title": "Rails Admin dynamic fields", "body": "<p>Your <code>Event</code> model is missing <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\">accepts_nested_attributes_for</a>\nWhich allow <em>Event</em> model to save <em>EventTime</em> Records as well.</p>\n\n<pre><code>model Event &lt; ActiveRecord::Base \n  has_many :event_times\n  accepts_nested_attributes_for :event_times\nend\n</code></pre>\n"}], "owner": {"reputation": 376, "user_id": 7271772, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef9b3cffd3ca044729a43c23f7232d9?s=128&d=identicon&r=PG&f=1", "display_name": "George Morris", "link": "https://stackoverflow.com/users/7271772/george-morris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528543233, "creation_date": 1528319773, "question_id": 50729731, "link": "https://stackoverflow.com/questions/50729731/rails-admin-dynamic-fields", "title": "Rails Admin dynamic fields", "body": "<p>I have a model Event that has an attribute <code>number_of_events</code>. Then I have another model EventTime.</p>\n\n<pre><code>model Event &lt; ActiveRecord::Base \n  has_many :event_times\nend\n\nmodel EventTime &lt; ActiveRecord::Base\n  belongs_to :event\n  # and a bunch of fields such as event start, max attendees, ...\nend\n</code></pre>\n\n<p>Please note that I cannot alter attributes!</p>\n\n<p>In rails admin, whenever number_of_events changes, it should create a new row with even_time fields.</p>\n\n<p>For example, when <code>number_of_events</code> is set to  5, it should create 5 rows, each row containing all the fields from EventTime. After the submission of Event, it should create 5 EventTime records with event_id of my event.</p>\n\n<p>I already have a way to display the fields and the number of rows accordingly to the number_of_events. However, I have an issue creating the records.</p>\n\n<pre><code>config.model Event do\n\n    edit do\n      field :number_of_events\n      field :event_times do\n        partial :event_times_partial\n      end\n    end\nend\n</code></pre>\n\n<p>My question is - how can I create data accordingly to my view or parameters that I pass through? Is there a way how to override controller?</p>\n"}, {"tags": ["ruby", "selenium", "rspec", "capybara"], "comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1528316536, "post_id": 50728637, "comment_id": 88465787, "body": "Try this xpath <code>&#47;&#47;td[@id=&#39;one&#39;]&#47;span</code>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1528316966, "post_id": 50728637, "comment_id": 88465971, "body": "@Rajagopalan What difference do you think changing to XPath would make here when the question is about the text content not finding the element?"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1528317362, "post_id": 50728637, "comment_id": 88466143, "body": "He is not pointing to the exact node from which he wants to extract the text."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1528318153, "post_id": 50728637, "comment_id": 88466491, "body": "@Rajagopalan That&#39;s not really relevant here, since if that made a difference then you&#39;d just expect the return to have even more whitespace (the whitespace inside the td).  The issue is, as mentioned in my answer, that browsers ignore/collapse most normal whitespace in HTML documents when displaying the document.  Also if selecting the exact element was going to make a difference the OP would be better just sticking with CSS <code>#one span</code> than swapping to XPath."}], "answers": [{"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1528317466, "post_id": 50728987, "comment_id": 88466200, "body": "Is it? Can you locate one of the above text node by writing <code>&#47;&#47;span[text()=&#39;FOOO&#39;]</code> ?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1528318046, "post_id": 50728987, "comment_id": 88466458, "body": "@Rajagopalan No you can&#39;t because XPath is applied to the literal document.  However a browser processes that document and applies the HTML rules for ignoring/collapsing a lot of the whitespace in the document (load the OPs HTML in a browser and see if the leading and trailing whitespace shows - hint: it doesn&#39;t)"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1528809914, "post_id": 50728987, "comment_id": 88641780, "body": "If I load in the recent version of firefox, it collapses the spaces but If I load in in Firefox ESR last version, it doesn&#39;t collapses the spaces."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1528816734, "post_id": 50728987, "comment_id": 88646482, "body": "@Rajagopalan no clue what you&#39;ve done to your FF 52.8.1 ESR  then, because it behaves just like the current release on mine (with regards to whitespace collapsing during display).  Collapsing of whitespace has been part of the HTML spec for a very long time, and if it wasn&#39;t done correctly in FF52 it would have broken pretty much every website out there."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1528818146, "post_id": 50728987, "comment_id": 88647339, "body": "I don&#39;t know that&#39;s the way it&#39;s appear to me. Its firefox 52.7"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 0, "last_activity_date": 1528316689, "creation_date": 1528316689, "answer_id": 50728987, "question_id": 50728637, "link": "https://stackoverflow.com/questions/50728637/how-do-i-get-the-text-of-a-capybara-element-including-leading-whitespace/50728987#50728987", "title": "How do I get the text of a capybara element including leading whitespace.", "body": "<p>The leading and trailing whitespace would be collapsed/ignored by your browser so Capybara does the same. If you want that whitespace to actually be visible in the browser you need to replace the spaces with non-breaking spaces (&amp;nbsp;) in your HTML and then Capybara will return them as well.</p>\n"}], "owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528316689, "creation_date": 1528315303, "question_id": 50728637, "link": "https://stackoverflow.com/questions/50728637/how-do-i-get-the-text-of-a-capybara-element-including-leading-whitespace", "title": "How do I get the text of a capybara element including leading whitespace.", "body": "<p>I am trying to write an rspec/capybara/selenium spec that deals with verifying of whitespace. Basically I have a form that can be filled out and once it is saved, the information renders as a row in a table. The issue that I am having is that once I get to a certain td or span and I call <code>.text</code> on it, what is being returned is stripped of the leading and trailing white space. So if you look at the sample below, if I call <code>find('#one').text</code> what is returned is <code>'FOOO'</code>. What I want to be returned is <code>'   FOOO   '</code> (I.E. including the leading and trailing whitespace). </p>\n\n<pre><code>&lt;tr id=\"myRow\"&gt;\n    &lt;td id=\"one\"&gt;\n        &lt;span&gt;  FOOO   &lt;/span&gt;\n    &lt;/td&gt;\n    &lt;td id=\"two\"&gt;\n        &lt;span&gt;  BAR      &lt;/span&gt;\n    &lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1944, "user_id": 877383, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/kds3Y.jpg?s=128&g=1", "display_name": "dc10", "link": "https://stackoverflow.com/users/877383/dc10"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1528314961, "post_id": 50728414, "comment_id": 88465066, "body": "@jvillian I do need a namespace. Furthermore it shouldnt make any difference to have another subfolder, since the same naming works with models"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1528315272, "post_id": 50728414, "comment_id": 88465225, "body": "Did by <code>app&#47;lib&#47;itunes</code> you mean <code>app&#47;lib&#47;itunes&#47;itunes_client.rb</code>?"}, {"owner": {"reputation": 1944, "user_id": 877383, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/kds3Y.jpg?s=128&g=1", "display_name": "dc10", "link": "https://stackoverflow.com/users/877383/dc10"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1528315372, "post_id": 50728414, "comment_id": 88465273, "body": "@AndreyDeineko right.  it somehow feels odd to me to put all the libs right under app since i will end up having all the libs mixed with controllers views and models"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1528315675, "post_id": 50728414, "comment_id": 88465407, "body": "Did you stop your server, do <code>spring stop</code> and restart your server?"}, {"owner": {"reputation": 1944, "user_id": 877383, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/kds3Y.jpg?s=128&g=1", "display_name": "dc10", "link": "https://stackoverflow.com/users/877383/dc10"}, "edited": false, "score": 0, "creation_date": 1528315819, "post_id": 50728414, "comment_id": 88465470, "body": "I don&#39;t use spring in this case. I started the app with rubymine in debug mode"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 2, "creation_date": 1528315838, "post_id": 50728414, "comment_id": 88465480, "body": "<code>config.eager_load = true</code> from <a href=\"https://stackoverflow.com/a/40019108\">here</a>, maybe? For me it worked."}, {"owner": {"reputation": 1944, "user_id": 877383, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/kds3Y.jpg?s=128&g=1", "display_name": "dc10", "link": "https://stackoverflow.com/users/877383/dc10"}, "edited": false, "score": 0, "creation_date": 1528316034, "post_id": 50728414, "comment_id": 88465572, "body": "eager_load ist set to false in development but I have the following:   %w(lib presenters interactors finders strategies services serializers).each do |dir|     config.autoload_paths += %W(#{config.root}/app/#{dir})   end"}, {"owner": {"reputation": 1944, "user_id": 877383, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/kds3Y.jpg?s=128&g=1", "display_name": "dc10", "link": "https://stackoverflow.com/users/877383/dc10"}, "edited": false, "score": 1, "creation_date": 1528316306, "post_id": 50728414, "comment_id": 88465695, "body": "eager_load = true fixed it ,so adding the lib folder to autload_paths is apparently not sufficient?! What is the impact of eager_load set to true?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1528316921, "post_id": 50728414, "comment_id": 88465956, "body": "@dc10 it would like for your class to be nested inside the module e.g. <code>module Itunes; class ItunesClient &lt; ItunesBaseClient;end;end</code> it has to do with the way constant look up and module nesting works in ruby. This <a href=\"https://cirw.in/blog/constant-lookup.html\" rel=\"nofollow noreferrer\">Article</a> does a nice job of explaining it. When you eager load the class is loaded into the global namespace as <code>Itunes::ItunesClient</code> rather than loading the module <code>Itunes</code> into the global name space and loading <code>ItunesClient</code> into the <code>Itunes</code> namespace. While these seem similar they have a different impact"}, {"owner": {"reputation": 1944, "user_id": 877383, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/kds3Y.jpg?s=128&g=1", "display_name": "dc10", "link": "https://stackoverflow.com/users/877383/dc10"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528317084, "post_id": 50728414, "comment_id": 88466022, "body": "@engineersmnky I tried the module syntax as well and it was not taking effect. nevertheless the eager_load setting fixed it"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1528397901, "post_id": 50728414, "comment_id": 88504324, "body": "I&#39;m getting this error: <a href=\"https://stackoverflow.com/questions/44465118/rails-5-1-unknown-firstpos-nilclass-issue-reloading-application\" title=\"rails 5 1 unknown firstpos nilclass issue reloading application\">stackoverflow.com/questions/44465118/&hellip;</a> maybe due to <code>config.eager_load = true</code>. Aren&#39;t you?"}, {"owner": {"reputation": 1944, "user_id": 877383, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/kds3Y.jpg?s=128&g=1", "display_name": "dc10", "link": "https://stackoverflow.com/users/877383/dc10"}, "edited": false, "score": 0, "creation_date": 1528399845, "post_id": 50728414, "comment_id": 88505233, "body": "yes, I got this one as well, I had to stop spring"}], "owner": {"reputation": 1944, "user_id": 877383, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/kds3Y.jpg?s=128&g=1", "display_name": "dc10", "link": "https://stackoverflow.com/users/877383/dc10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1242, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1528315557, "creation_date": 1528314446, "last_edit_date": 1528315557, "question_id": 50728414, "link": "https://stackoverflow.com/questions/50728414/unable-to-autoload-constant", "title": "Unable to autoload constant", "body": "<p>In rails 5.2 I have a small lib\nwhich is under app/lib/itunes (everything under app/lib should be autoloaded right?).\nNevertheless I get a load error when I start sidekiq</p>\n\n<pre><code>    LoadError: Unable to autoload constant Itunes::ItunesClient, \nexpected /app/lib/itunes/itunes_client.rb to define it\n2018-06-06T19:38:49.560Z 46606 TID-ov5d572iq WARN: \n.rvm/gems/ruby-2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:503:in `load_missing_constant'\n.rvm/gems/ruby-2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:193:in `const_missing'\n/app/interactors/fetch_itunes_app_service.rb:4:in `call'\n\n\n\nclass FetchItunesAppService\n  include Interactor\n  def call\n    @client = Itunes::ItunesClient.new\n    ...\n  end\nend\n\n\n#app/lib/itunes/itunes_client.rb    \nclass Itunes::ItunesClient &lt; Itunes::ItunesBaseClient\n\n...\nend\n\n#app/lib/itunes/itunes_base_client.rb\nclass Itunes::ItunesBaseClient\n...\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1528314378, "post_id": 50728137, "comment_id": 88464773, "body": "Perhaps you meant <code>@product_attachments</code>?"}, {"owner": {"reputation": 153, "user_id": 8334151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6758c1aa78966372db24e441484a264?s=128&d=identicon&r=PG&f=1", "display_name": "KH_", "link": "https://stackoverflow.com/users/8334151/kh"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1528314956, "post_id": 50728137, "comment_id": 88465064, "body": "Thanks @jvillian, I tried that and got the error <code>undefined method first for nil:NilClass</code>"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1528316628, "creation_date": 1528316628, "answer_id": 50728966, "question_id": 50728137, "link": "https://stackoverflow.com/questions/50728137/how-to-display-image-in-index-view/50728966#50728966", "title": "How to display image in index view", "body": "<p>I would expect that the following works:</p>\n\n<pre><code>&lt;%= image_tag product.product_attachments.first.image_url.to_s %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 8334151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6758c1aa78966372db24e441484a264?s=128&d=identicon&r=PG&f=1", "display_name": "KH_", "link": "https://stackoverflow.com/users/8334151/kh"}, "edited": false, "score": 0, "creation_date": 1528317133, "post_id": 50728980, "comment_id": 88466045, "body": "this worked thanks. I would like to display only the first image but for some reason using the first method as suggested by Spickermann returns error. Do you maybe know why?"}], "tags": [], "owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "is_accepted": false, "score": 1, "last_activity_date": 1528316670, "creation_date": 1528316670, "answer_id": 50728980, "question_id": 50728137, "link": "https://stackoverflow.com/questions/50728137/how-to-display-image-in-index-view/50728980#50728980", "title": "How to display image in index view", "body": "<p>If i understand well your snippets, the model you mount the ImageUploader is <code>ProductAttachment</code> (which have the attribute <code>image</code>) so you can remove <code>mount_uploader :image, ImageUploader</code> of your <code>Product</code> model.</p>\n\n<p>The image is mounted on every <code>product_attachments</code> for one product. Just display the images inside the partial by iterating through product_attachments:</p>\n\n<pre><code>&lt;% product.product_attachments.each do |attachment| %&gt;\n  &lt;%= image_tag(attachment.image.url) %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 504, "user_id": 6007401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5db6f7de076ae3e9e278f1cffa02326?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6007401/john-doe"}, "is_accepted": true, "score": 1, "last_activity_date": 1528716812, "creation_date": 1528716812, "answer_id": 50796756, "question_id": 50728137, "link": "https://stackoverflow.com/questions/50728137/how-to-display-image-in-index-view/50796756#50796756", "title": "How to display image in index view", "body": "<p>Try this:</p>\n\n<blockquote>\n<pre><code>image_tag(product.product_attachments.first.image.url.to_s)\n</code></pre>\n</blockquote>\n\n<p>It should work. I realized that sometimes image_url doesn't work as expected but image.url does.</p>\n"}], "owner": {"reputation": 153, "user_id": 8334151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6758c1aa78966372db24e441484a264?s=128&d=identicon&r=PG&f=1", "display_name": "KH_", "link": "https://stackoverflow.com/users/8334151/kh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 50796756, "answer_count": 3, "score": 1, "last_activity_date": 1528716812, "creation_date": 1528313262, "last_edit_date": 1528314268, "question_id": 50728137, "link": "https://stackoverflow.com/questions/50728137/how-to-display-image-in-index-view", "title": "How to display image in index view", "body": "<p>I am using carrierwave and trying to display images of products in the index view. This are my models, controllers and views</p>\n\n<p>product.rb</p>\n\n<pre><code> class Product &lt; ActiveRecord::Base\n   has_many :order_items\n   belongs_to :category, required: false\n   has_many :product_attachments\n   accepts_nested_attributes_for :product_attachments\n\n   mount_uploader :image, ImageUploader\n   default_scope { where(active: true) }\nend\n</code></pre>\n\n<p>product_attachment.rb</p>\n\n<pre><code>   class ProductAttachment &lt; ApplicationRecord\n     mount_uploader :image, ImageUploader\n     belongs_to :product\n   end\n</code></pre>\n\n<p>products_controller.rb (extract)</p>\n\n<pre><code>class ProductsController &lt; ApplicationController\n  def index\n  @products = Product.all\n  @order_item = current_order.order_items.new\nend\n\n\ndef show\n  @product = Product.find(params[:id])\n  @product_attachments = @product.product_attachments.all\nend\n\ndef new\n  @product = Product.new\n  @product_attachment = @product.product_attachments.build\n  @categories = Category.all.map{|c| [ c.name, c.id ] }\nend\n\ndef create\n  @product = Product.new(product_params)\n  @product.category_id = params[:category_id] \n\n  respond_to do |format|\n  if @product.save\n    params[:product_attachments]['image'].each do |a|\n      @product_attachment = @product.product_attachments.create!(:image =&gt; a,     :product_id =&gt; @product.id)\n    end\n    format.html { redirect_to @product, notice: 'Product was successfully created.' }\n  else\n    format.html { render action: 'new' }\n   end\n  end\nend\n\nprivate\n  def product_params\n    params.require(:product).permit(:name,:price, :active,  :description, product_attachments_attributes: \n[:id, :product_id, :image], category_attributes: [:category_id, :category])\n   end\nend\n</code></pre>\n\n<p>index.html.erb</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-xs-offset-1 \"&gt;\n   &lt;% @products.each do |product| %&gt;\n     &lt;%= render \"product_row\", product: product, order_item: @order_item %&gt;\n   &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>_product_row.html.erb</p>\n\n<pre><code>&lt;div class=\"well\"&gt;\n\n  &lt;div class=\"row\"&gt;\n\n  &lt;div class=\"container-fluid row\"&gt;\n  &lt;div class=\"col-md-5 col-lg-5 col-sm-5 col-xs-5 binder\"&gt;\n    &lt;br&gt;&lt;%= image_tag product.image_url.to_s %&gt;&lt;br&gt;&lt;br&gt;\n &lt;/div&gt;\n  &lt;div class=\"col-md-4 col-lg-4 col-sm-4 col-xs-4 binder\"&gt;\n    &lt;h4 class=\"text-left\"&gt;&lt;%= product.name.split.map(&amp;:capitalize).join(' ') %&gt; &lt;/h4&gt;\n    &lt;h4 class=\"text-left\"&gt;&lt;span style=\"color: green\"&gt;&lt;%= number_to_currency(product.price, :unit =&gt; \"\u20ac\") %&gt;&lt;/span&gt;&lt;/h4&gt;\n    &lt;h4&gt;&lt;%= link_to Category.find(product.category_id).name, category_path(product.category_id) %&gt;&lt;/h4&gt;\n    &lt;h6 class=\"text-left\"&gt;&lt;%= link_to 'Delete', product_path(product), method: :delete,\n          data: { confirm: 'Are you sure?' } %&gt;&lt;/h6&gt;&lt;br&gt;&lt;br&gt;\n  &lt;/div&gt;\n\n &lt;div class=\"col-md-3 col-lg-3 col-sm-3 col-xs-3 binder\"&gt;\n\n  &lt;%= form_for order_item, remote: true do |f| %&gt;\n    &lt;div class=\"input-group\"&gt;\n      &lt;%= f.number_field :quantity, value: 1, class: \"form-control\", min: 1 %&gt;\n      &lt;div class=\"input-group-btn\"&gt;\n        &lt;%= f.hidden_field :product_id, value: product.id %&gt;\n        &lt;%= f.submit \"Add to Cart\", class: \"btn btn-primary text-right\" %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n &lt;/div&gt;\n &lt;/div&gt;\n\n &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>With <code>&lt;%= image_tag product.image_url.to_s %&gt;</code> the image doesn't appear. When I change it to <code>&lt;%= image_tag product_attachments.first.image_url.to_s %&gt;</code> I get the following error:</p>\n\n<pre><code> undefined local variable or method `product_attachments' for #&lt;#&lt;Class:0x00007f28544ccc68&gt;:0x00007f285dd3aab8&gt;\n</code></pre>\n\n<p>I am pretty new to Ruby and don't know what I am doing wrong or how to fix this. Any help would be appreciated. I am using Ruby version 2.5.1 and rails 5.2.0 on ubuntu.</p>\n"}, {"tags": ["python", "ruby", "visibility"], "comments": [{"owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "edited": false, "score": 0, "creation_date": 1528311358, "post_id": 50727556, "comment_id": 88463385, "body": "It&#39;s a bit hacky, but this answer seems to show a way to do this in Ruby <a href=\"https://stackoverflow.com/a/10535890/2230115\">stackoverflow.com/a/10535890/2230115</a>"}, {"owner": {"reputation": 175, "user_id": 6601225, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a53f7e9bb9e21d71a76b057a2b7d9faa?s=128&d=identicon&r=PG&f=1", "display_name": "class_OpenGL", "link": "https://stackoverflow.com/users/6601225/class-opengl"}, "reply_to_user": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "edited": false, "score": 0, "creation_date": 1528311566, "post_id": 50727556, "comment_id": 88463481, "body": "It could be a nice solution, but it uses files. I have to add a lot of classes, and I should not add all of them in a single file"}, {"owner": {"reputation": 175, "user_id": 6601225, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a53f7e9bb9e21d71a76b057a2b7d9faa?s=128&d=identicon&r=PG&f=1", "display_name": "class_OpenGL", "link": "https://stackoverflow.com/users/6601225/class-opengl"}, "reply_to_user": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "edited": false, "score": 0, "creation_date": 1528311622, "post_id": 50727556, "comment_id": 88463510, "body": "I will test it if I canuse this feature"}, {"owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "edited": false, "score": 0, "creation_date": 1528311663, "post_id": 50727556, "comment_id": 88463527, "body": "Sorry, I misunderstood your question then. I&#39;m sure you could do something similar with modules"}, {"owner": {"reputation": 175, "user_id": 6601225, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a53f7e9bb9e21d71a76b057a2b7d9faa?s=128&d=identicon&r=PG&f=1", "display_name": "class_OpenGL", "link": "https://stackoverflow.com/users/6601225/class-opengl"}, "reply_to_user": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "edited": false, "score": 0, "creation_date": 1528314037, "post_id": 50727556, "comment_id": 88464613, "body": "I couldn&#39;t find any way to do this"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528317466, "post_id": 50727556, "comment_id": 88466201, "body": "Is this what you are looking for? <a href=\"https://blog.arkency.com/2016/02/private-classes-in-ruby/\" rel=\"nofollow noreferrer\">blog.arkency.com/2016/02/private-classes-in-ruby</a> <code>private_constant</code> would allow you to make a class private inside a module.  e.g. <code>module Foo; class Bar; end; private_constant :Bar;end</code> would cause <code>Foo::Bar</code> to raise a <code>NameError</code> if accessed from outside of the context of <code>Foo</code>"}, {"owner": {"reputation": 175, "user_id": 6601225, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a53f7e9bb9e21d71a76b057a2b7d9faa?s=128&d=identicon&r=PG&f=1", "display_name": "class_OpenGL", "link": "https://stackoverflow.com/users/6601225/class-opengl"}, "edited": false, "score": 0, "creation_date": 1528318007, "post_id": 50727556, "comment_id": 88466444, "body": "I&#39;m looking to change the visibility of individual methods, not the entire class"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528335699, "post_id": 50727556, "comment_id": 88471484, "body": "You mean the <code>private</code> keyword? Eg <code>class Foo; private; def some_method;end;end;</code>? This will make <code>some_method</code> private to instances of the class <code>Foo</code> Sorry your question is a bit unclear"}, {"owner": {"reputation": 175, "user_id": 6601225, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a53f7e9bb9e21d71a76b057a2b7d9faa?s=128&d=identicon&r=PG&f=1", "display_name": "class_OpenGL", "link": "https://stackoverflow.com/users/6601225/class-opengl"}, "edited": false, "score": 0, "creation_date": 1528350213, "post_id": 50727556, "comment_id": 88475152, "body": "I&#39;m sorry so much. I will add an example"}], "answers": [{"tags": [], "owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "is_accepted": false, "score": 0, "last_activity_date": 1528436223, "last_edit_date": 1528436223, "creation_date": 1528383099, "answer_id": 50744284, "question_id": 50727556, "link": "https://stackoverflow.com/questions/50727556/how-to-give-methods-package-private-visibility-in-ruby-or-python/50744284#50744284", "title": "How to give methods package-private visibility in Ruby or Python", "body": "<p>It's not pretty, but I was able to get this working using the <code>binding_of_caller</code> gem.\nJust do <code>gem install binding_of_caller</code> and the below code should work for what you need.</p>\n\n<p>Please note that this is heavily copied from <a href=\"https://stackoverflow.com/a/10535890/2230115\">https://stackoverflow.com/a/10535890/2230115</a> and you should definitely upvote it :)</p>\n\n<pre><code>require 'binding_of_caller'\nclass Object\n  @@module_scoped_methods = []\n\n  def module_visibility(method_name, module_name)\n    method_name = method_name.to_sym\n    module_name = module_name.to_sym\n    new_method_name = \"module_only_#{method_name}\".to_sym\n    self.send(:alias_method, new_method_name, method_name)\n    self.send(:undef_method, method_name)\n    self.send(:private, new_method_name)\n    @@module_scoped_methods &lt;&lt; [method_name, module_name]\n  end\n\n  alias_method :old_method_missing, :method_missing\n  undef_method :method_missing\n  def method_missing(method_name, *arg, &amp;block)\n    method_ob = @@module_scoped_methods.find { |m| m[0] == method_name }\n    if method_ob\n      if binding.of_caller(1).eval('self.class').ancestors.find {|m| m.name.split('::').map{|c|c.to_sym}.include? method_ob[1]}\n        self.send(\"module_only_#{method_name}\".to_sym,*arg,&amp;block)\n      else\n        raise \"Method #{method_name} is called outside the set module.\"\n      end\n    else\n      old_method_missing(method_name, arg, block)\n    end\n  end\nend\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>module A\n  class Test\n    def test\n      5\n    end\n    #Method name, and module wanted to be scoped to.\n    #Required since you can have nested modules.\n    module_visibility :test, :A \n  end\n  class B\n    def test\n      A::Test.new.test\n    end\n  end\nend\n# raises runtime error \"method test is called outside the set module\nA::Test.new.test\nA::B.new.test # =&gt; 5\n</code></pre>\n\n<h2>How it works:</h2>\n\n<p>We alter the Object class to keep track of a list of methods that have been restricted to module visibility. This stores a two element array with the method name, and the module it's been scoped to. It then changes the name of the method to <code>module_only_&lt;originalname&gt;</code> and makes it private.</p>\n\n<p>Then, so that we can call it, we override <code>method_missing</code>, so that it checks for that method in the list of methods we've assigned to module scope. It checks the ancestors of the caller's class for the module it's been scoped to. If any of the ancestors are the module it's been scoped to, it calls the method. If not, it raises an error that it's not called in the module you scoped it to.</p>\n"}], "owner": {"reputation": 175, "user_id": 6601225, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a53f7e9bb9e21d71a76b057a2b7d9faa?s=128&d=identicon&r=PG&f=1", "display_name": "class_OpenGL", "link": "https://stackoverflow.com/users/6601225/class-opengl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528483606, "creation_date": 1528311023, "last_edit_date": 1528483606, "question_id": 50727556, "link": "https://stackoverflow.com/questions/50727556/how-to-give-methods-package-private-visibility-in-ruby-or-python", "title": "How to give methods package-private visibility in Ruby or Python", "body": "<p>Java has a visibility named <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"nofollow noreferrer\">package-private</a>, which means that something can only be accessed inside the package it is defined in, and not outside. I'm wondering if there is any way to add this feature to Ruby (with modules) or Python.</p>\n\n<p>Here is an example of what I'm looking for:</p>\n\n<pre><code>module Foo\n  class FooClass\n    def print_message_package\n      # Some line to test that the last caller is in module Foo\n      puts 'Hello'\n    end\n\n    def print_message_public\n      print_message_package\n    end\n  end\nend\n\ntest = Foo::FooClass.new\n# I would like that following line raises an error, because it is not called inside module Foo\ntest.print_message_package\n# This line should not raise an error:\ntest.print_message_public\n</code></pre>\n"}, {"tags": ["ruby", "sh"], "comments": [{"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1528361701, "post_id": 50725536, "comment_id": 88481379, "body": "(it&#39;s not stuck forever, if you exit the &quot;appium&quot; app, your script will continue)"}, {"owner": {"reputation": 1655, "user_id": 1289629, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/udDdo.png?s=128&g=1", "display_name": "Vighnesh Pai", "link": "https://stackoverflow.com/users/1289629/vighnesh-pai"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1528363079, "post_id": 50725536, "comment_id": 88482368, "body": "Thanks for letting me know kimmo lehto"}], "answers": [{"comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "reply_to_user": {"reputation": 1655, "user_id": 1289629, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/udDdo.png?s=128&g=1", "display_name": "Vighnesh Pai", "link": "https://stackoverflow.com/users/1289629/vighnesh-pai"}, "edited": false, "score": 0, "creation_date": 1528305134, "post_id": 50725598, "comment_id": 88460155, "body": "@VighneshPai: Glad I could help!"}], "tags": [], "owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "is_accepted": true, "score": 5, "last_activity_date": 1528303622, "creation_date": 1528303622, "answer_id": 50725598, "question_id": 50725536, "link": "https://stackoverflow.com/questions/50725536/ruby-exucution-stuck-at-system-line/50725598#50725598", "title": "Ruby exucution stuck at system() line", "body": "<p><code>system</code> blocks until the command it runs has completed. To run a command and return immediately, use <a href=\"http://ruby-doc.org/core-2.5.1/Process.html#method-c-spawn\" rel=\"noreferrer\"><code>Process#spawn</code></a>:</p>\n\n<pre><code>def execution_start\n  puts \"About to start\"\n  pid = Process.spawn(\"appium\")\n  puts \"Done!!\"\nend\n</code></pre>\n\n<p>You can then use the returned PID to monitor whether the process has finished executing, and with what exit code, later in your program.</p>\n\n<p>(Note that, per the documentation, you need to <code>Process#wait</code> the PID eventually, or at least register disinterest using <code>Process#detach</code> to prevent the subprocess from becoming a zombie.)</p>\n"}], "owner": {"reputation": 1655, "user_id": 1289629, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/udDdo.png?s=128&g=1", "display_name": "Vighnesh Pai", "link": "https://stackoverflow.com/users/1289629/vighnesh-pai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 50725598, "answer_count": 1, "score": 1, "last_activity_date": 1528354755, "creation_date": 1528303416, "last_edit_date": 1528354755, "question_id": 50725536, "link": "https://stackoverflow.com/questions/50725536/ruby-exucution-stuck-at-system-line", "title": "Ruby exucution stuck at system() line", "body": "<p>This is my code snippet</p>\n\n<pre><code>def execution_start\n  puts \"About to start\"\n  system(\"appium\")\n  puts \"Done!!\"\nend\n</code></pre>\n\n<p>When executing this I see the output <code>About to start</code>, and appium server is launched. But after that, I do not see anything happening. It's stuck forever. Any idea?</p>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 3, "creation_date": 1528303716, "post_id": 50725202, "comment_id": 88459401, "body": "<code>declare_method</code> is not a <code>method</code> but <code>define_method</code> as mentioned is a <code>method</code>. The rest of your code does not really make sense to me e.g. you are calling <code>yield</code> and yielding the actual block rather than yielding too it?"}, {"owner": {"reputation": 95, "user_id": 1409334, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43430118a9cc9853d94c0350b7529c16?s=128&d=identicon&r=PG", "display_name": "John Stoner", "link": "https://stackoverflow.com/users/1409334/john-stoner"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528310210, "post_id": 50725202, "comment_id": 88462815, "body": "good catch with <code>declare_method</code>. Corrected. Also, Ruby has about five ways to pass a block to a method, and I found the most obscure one. Also corrected--no need to mention <code>block</code> at all. Does that help?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1528311551, "post_id": 50725202, "comment_id": 88463471, "body": "I don&#39;t understand what you are trying to do. If you call <code>detect(:foo)</code> and <code>detect(:bar)</code> is that intended to create methods <code>foo</code> and <code>bar</code> that perform the same operations and have the same return values? btw, you missed correcting one <code>declare_method</code>."}, {"owner": {"reputation": 95, "user_id": 1409334, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43430118a9cc9853d94c0350b7529c16?s=128&d=identicon&r=PG", "display_name": "John Stoner", "link": "https://stackoverflow.com/users/1409334/john-stoner"}, "edited": false, "score": 0, "creation_date": 1528312621, "post_id": 50725202, "comment_id": 88463964, "body": "That would create <code>detect_foo</code> and <code>detect_bar</code> methods that have the same operations/return values, yes."}], "answers": [{"tags": [], "owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "is_accepted": false, "score": 1, "last_activity_date": 1528309076, "last_edit_date": 1528309076, "creation_date": 1528308727, "answer_id": 50726969, "question_id": 50725202, "link": "https://stackoverflow.com/questions/50725202/dynamically-adding-a-method-to-a-module-in-ruby/50726969#50726969", "title": "dynamically adding a method to a module in Ruby", "body": "<p>Try this:</p>\n\n<pre><code>module Foo\n  def detect(this_message, &amp;block)\n    # boilerplate stuff using instance_variable_get(blah) and\n    # calling methods on instance variables...\n    yield block\n    # more boilerplate stuff\n    self.class.send(:define_method, \"detect_#{this_message.to_s}\") do\n        puts \"This is templated detection code for #{this_message.to_s}\"\n        # blah\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 1409334, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43430118a9cc9853d94c0350b7529c16?s=128&d=identicon&r=PG", "display_name": "John Stoner", "link": "https://stackoverflow.com/users/1409334/john-stoner"}, "edited": false, "score": 0, "creation_date": 1528326478, "post_id": 50730378, "comment_id": 88469344, "body": "I made my code less abstract and closer to the code I am actually writing. I have other code that initiates long processes over a network, and here I am polling to see if they finish before a timeout. I have a state machine that persists (coded elsewhere) in case my process dies while waiting, so I can wake up again knowing where I was."}, {"owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 0, "creation_date": 1528412429, "post_id": 50730378, "comment_id": 88510267, "body": "Have you tried using AASM gem? Its a state machine for ruby classes and offers detection methods for each state. <a href=\"https://github.com/aasm/aasm\" rel=\"nofollow noreferrer\">github.com/aasm/aasm</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 0, "creation_date": 1528414283, "post_id": 50730378, "comment_id": 88510758, "body": "@sakurashinken, no I&#39;m not familiar with it, but I confess that in light of John&#39;s comment I don&#39;t understand the question, so cannot determine if the gem would be helpful here."}, {"owner": {"reputation": 95, "user_id": 1409334, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43430118a9cc9853d94c0350b7529c16?s=128&d=identicon&r=PG", "display_name": "John Stoner", "link": "https://stackoverflow.com/users/1409334/john-stoner"}, "edited": false, "score": 0, "creation_date": 1528489484, "post_id": 50730378, "comment_id": 88543273, "body": "@sakurashinksen yes, aasm is the state machine being used by this object. It didn&#39;t seem relevant to my question so I didn&#39;t mention it here."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1528323112, "creation_date": 1528323112, "answer_id": 50730378, "question_id": 50725202, "link": "https://stackoverflow.com/questions/50725202/dynamically-adding-a-method-to-a-module-in-ruby/50730378#50730378", "title": "dynamically adding a method to a module in Ruby", "body": "<p>In a comment on the question the OP made it clear that all the methods created would perform the same operations and return the same values. This means that all the instance methods created after the first can simply be made <em>aliases</em> of the original instance method. (It's not clear why doing that would be helpful, but that's beside the point.) In the module <code>Foo</code> I have called that original instant method <code>boilerplate</code>. We could write the following:</p>\n\n<pre><code>module Foo\n  def detect(method_name)\n    self.class.send(:alias_method, method_name, :boilerplate)\n  end\n\n  def boilerplate\n    yield \"Spud\"\n  end\nend\n\nclass Bar\n  include Foo\nend\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.4.0/Module.html#method-i-alias_method\" rel=\"nofollow noreferrer\">Module#alias_method</a>. We need to use <code>send</code> because <code>alias_method</code> is a private method.</p>\n\n<p>We may now write the following.</p>\n\n<pre><code>Bar.instance_methods &amp;&amp; [:detect, :boilerplate]\n  #=&gt; [:detect, :boilerplate]\n\nb = Bar.new\nb.detect(:say)\nb.detect(\"hey\")\n\nBar.instance_methods(false)\n  #=&gt; [:say, :hey]\n\nb.say { |name| \"My name is #{name}\" }\n  #=&gt; \"My name is Spud\"\nb.hey { |name| \"My name is #{name}\" }\n  #=&gt; \"My name is Spud\"\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 1409334, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43430118a9cc9853d94c0350b7529c16?s=128&d=identicon&r=PG", "display_name": "John Stoner", "link": "https://stackoverflow.com/users/1409334/john-stoner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528326218, "creation_date": 1528302220, "last_edit_date": 1528326218, "question_id": 50725202, "link": "https://stackoverflow.com/questions/50725202/dynamically-adding-a-method-to-a-module-in-ruby", "title": "dynamically adding a method to a module in Ruby", "body": "<p>so I have a bunch of code that looks like this:</p>\n\n<pre><code>module Foo\n  def detect(this_message)\n    #check for timeout\n    if Time.now &gt; instance_variable_get(\"@#{this_message}_timeout\".to_sym)\n      @state_machine.method(\"#{this_message}_timed_out\".to_sym).call\n      return\n    end\n    yield\n    record\n  rescue StandardError =&gt; e\n    # retry on exception\n    @state_machine.method(\"#{this_message}_retry\".to_sym).call(exception: e)\n  end\n\n  # a bunch of these\n  def detect_blah\n    detect(:blah) do\n      # detection code\n      @state_machine.method(\"#{this_message}_detected\".to_sym).call\n      # or failed, you get the idea\n    end\n  end\nend\n\n...\nclass Bar\n  include Foo\n  # more stuff\nend\n</code></pre>\n\n<p>I want to eliminate the <code>def detect_blah</code> declaration. I want to just say <code>detect(:blah)</code> and have it add a <code>detect_blah</code> method dynamically, that includes all the same processing as above, including the yielded block.</p>\n\n<p>I've tried a few permutations of <code>define_method</code>.</p>\n\n<ul>\n<li><p>If I just call <code>define_method</code> from <code>detect</code> I get NoMethodError, which makes sense because we're calling detect at module construction time and the module (class?) can't call its own methods when it isn't built (right?).</p></li>\n<li><p>If I add it to a different module and include that module in this one I get the same error. </p></li>\n<li><p>I've seen code that does <code>self.class.send(:define_method, method_name, method_definition)</code> but I don't think I'm getting far enough for that to work.</p></li>\n<li><p>maybe there's a way to do this via the metaclass... for classes. Not seeing how to do it for a module. Hm.</p></li>\n</ul>\n\n<p>Is there a reasonable way to do what I want to do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "dependencies", "gemfile", "gemfile.lock"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1528301975, "post_id": 50725082, "comment_id": 88458481, "body": "The &quot;nuclear bomb&quot; approach: <code>rm Gemfile.lock; bundle install</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1528302085, "post_id": 50725082, "comment_id": 88458533, "body": "The reason this is &quot;nuclear&quot; is that lots of other gem dependencies could get updated along the way. If this is a big application, and you need to be more careful about updating one thing at a time, don&#39;t do that. Otherwise, do."}, {"owner": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 0, "creation_date": 1528302092, "post_id": 50725082, "comment_id": 88458539, "body": "Do you have older versions of your Gemfile.lock in version control the way that every tutorial suggests you do?"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 1, "creation_date": 1528302126, "post_id": 50725082, "comment_id": 88458563, "body": "Hi Nathan! Welcome to Stack Overflow! Please update your question with a more descriptive title. Imagine what it would be like if every Rails question here was titled &quot;How to fix this issue?&quot;"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1528302135, "post_id": 50725082, "comment_id": 88458571, "body": "The &quot;careful&quot; approach: Figure out why this happened!! You should almost never edit the <code>Gemfile.lock</code> manually, but that appears to be what you&#39;ve done here. Are you using source control? Can you <code>diff</code> the file, or otherwise check its history?"}, {"owner": {"reputation": 9, "user_id": 5075337, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IQcPElfq3AQ/AAAAAAAAAAI/AAAAAAAACT4/8yNRWGUJ8D8/photo.jpg?sz=128", "display_name": "Nathan Tibbitts", "link": "https://stackoverflow.com/users/5075337/nathan-tibbitts"}, "edited": false, "score": 0, "creation_date": 1528302647, "post_id": 50725082, "comment_id": 88458831, "body": "Tom, I never edited the gemfile.lock. I just looked at it, without changing a single character or byte of code."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1528302942, "post_id": 50725082, "comment_id": 88458979, "body": "@NathanTibbitts Unless something <i>very</i> unusual happened, you must have done, accidentally. Would you be able to give reproduction steps for your problem? I&#39;ve tried &quot;just looking at it&quot;, and it didn&#39;t break ;)"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1528304265, "post_id": 50725082, "comment_id": 88459685, "body": "Gemfile.lock is just a snapshot your Gemfile at a very moment you run <code>bundle install</code> . <code>bundle install</code> fetch all gems from your gemfile and adds some more dependent gems. It is unlikely that a dependency is missing. But if it is the case, just delete the Gemfile.lock and run a <code>bundle install</code> again. everything should be fine after that. Though as @TomLord advised, it will recreate a new snapshot of bundle install. Which may be different from your previous Gemfile.lock eventhough the Gemfile is the same. This happens because unversionned gems are updated."}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1528304373, "post_id": 50725082, "comment_id": 88459748, "body": "If all your gems are versioned like this <code>gem &#39;bootstrap-sass&#39;, &#39;3.3.7&#39;</code> then you should not really worry. Otherwise if you have gems like <code>gem &#39;devise&#39;</code> it will probably update the gem Devise with a new version. You seem to be beginning a new application then dont worry too much and kill gemfile.lock and do a new bundle install."}, {"owner": {"reputation": 9, "user_id": 5075337, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IQcPElfq3AQ/AAAAAAAAAAI/AAAAAAAACT4/8yNRWGUJ8D8/photo.jpg?sz=128", "display_name": "Nathan Tibbitts", "link": "https://stackoverflow.com/users/5075337/nathan-tibbitts"}, "edited": false, "score": 0, "creation_date": 1534366328, "post_id": 50725082, "comment_id": 90684685, "body": "I tried the nuclear approach, and now I can&#39;t start the server."}, {"owner": {"reputation": 9, "user_id": 5075337, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IQcPElfq3AQ/AAAAAAAAAAI/AAAAAAAACT4/8yNRWGUJ8D8/photo.jpg?sz=128", "display_name": "Nathan Tibbitts", "link": "https://stackoverflow.com/users/5075337/nathan-tibbitts"}, "edited": false, "score": 0, "creation_date": 1534366462, "post_id": 50725082, "comment_id": 90684737, "body": "This is what happens when I try bundle install now. Note: I do not have sudo access as this is the family computer. <a href=\"https://pastebin.com/T1SiyE4Z\" rel=\"nofollow noreferrer\">pastebin.com/T1SiyE4Z</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9897356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f282bec77261e9f3f4a8099b20a6695?s=128&d=identicon&r=PG&f=1", "display_name": "NensiMakwana", "link": "https://stackoverflow.com/users/9897356/nensimakwana"}, "is_accepted": false, "score": 1, "last_activity_date": 1528459554, "creation_date": 1528459554, "answer_id": 50760299, "question_id": 50725082, "link": "https://stackoverflow.com/questions/50725082/gemfile-lock-is-corrupt-gem-missing-from-the-dependencies-section/50760299#50760299", "title": "Gemfile.lock is corrupt, gem missing from the DEPENDENCIES section", "body": "<p>Delete the Gemfile.lock</p>\n\n<p>and again do</p>\n\n<pre><code>bundle install\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5075337, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IQcPElfq3AQ/AAAAAAAAAAI/AAAAAAAACT4/8yNRWGUJ8D8/photo.jpg?sz=128", "display_name": "Nathan Tibbitts", "link": "https://stackoverflow.com/users/5075337/nathan-tibbitts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528459554, "creation_date": 1528301799, "last_edit_date": 1528303414, "question_id": 50725082, "link": "https://stackoverflow.com/questions/50725082/gemfile-lock-is-corrupt-gem-missing-from-the-dependencies-section", "title": "Gemfile.lock is corrupt, gem missing from the DEPENDENCIES section", "body": "<p>It says that my <code>Gemfile.lock</code> is corrupt. The exact message is \"Your Gemfile.lock is corrupt. The following gem is missing from the DEPENDENCIES\nsection: 'mini_portile2'\" How would I go about fixing this? This is also my <code>Gemfile.lock</code>:</p>\n\n<pre><code> GEM\n      remote: https://rubygems.org/\n      specs:\n        actionmailer (4.2.6)\n          actionpack (= 4.2.6)\n          actionview (= 4.2.6)\n          activejob (= 4.2.6)\n          mail (~&gt; 2.5, &gt;= 2.5.4)\n          rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n        actionpack (4.2.6)\n          actionview (= 4.2.6)\n          activesupport (= 4.2.6)\n          rack (~&gt; 1.6)\n          rack-test (~&gt; 0.6.2)\n          rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n          rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n        actionview (4.2.6)\n          activesupport (= 4.2.6)\n          builder (~&gt; 3.1)\n          erubis (~&gt; 2.7.0)\n          rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n          rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n        activejob (4.2.6)\n          activesupport (= 4.2.6)\n          globalid (&gt;= 0.3.0)\n        activemodel (4.2.6)\n          activesupport (= 4.2.6)\n          builder (~&gt; 3.1)\n        activerecord (4.2.6)\n          activemodel (= 4.2.6)\n          activesupport (= 4.2.6)\n          arel (~&gt; 6.0)\n        activesupport (4.2.6)\n          i18n (~&gt; 0.7)\n          json (~&gt; 1.7, &gt;= 1.7.7)\n          minitest (~&gt; 5.1)\n          thread_safe (~&gt; 0.3, &gt;= 0.3.4)\n          tzinfo (~&gt; 1.1)\n        arel (6.0.3)\n        binding_of_caller (0.7.2)\n          debug_inspector (&gt;= 0.0.1)\n        builder (3.2.2)\n        byebug (5.0.0)\n          columnize (= 0.9.0)\n        coffee-rails (4.1.0)\n          coffee-script (&gt;= 2.2.0)\n          railties (&gt;= 4.0.0, &lt; 5.0)\n        coffee-script (2.4.1)\n          coffee-script-source\n          execjs\n        coffee-script-source (1.9.1.1)\n        columnize (0.9.0)\n        debug_inspector (0.0.2)\n        erubis (2.7.0)\n        execjs (2.6.0)\n        globalid (0.3.6)\n          activesupport (&gt;= 4.1.0)\n        i18n (0.7.0)\n        jbuilder (2.3.1)\n          activesupport (&gt;= 3.0.0, &lt; 5)\n          multi_json (~&gt; 1.2)\n        jquery-rails (4.0.5)\n          rails-dom-testing (~&gt; 1.0)\n          railties (&gt;= 4.2.0)\n          thor (&gt;= 0.14, &lt; 2.0)\n        json (1.8.3)\n        loofah (2.0.3)\n          nokogiri (&gt;= 1.5.9)\n        mail (2.6.3)\n          mime-types (&gt;= 1.16, &lt; 3)\n        mime-types (2.6.1)\n        minitest (5.8.4)\n        multi_json (1.11.2)\n        nokogiri (1.6.7.2)\n        rack (1.6.4)\n        rack-test (0.6.3)\n          rack (&gt;= 1.0)\n        rails (4.2.6)\n          actionmailer (= 4.2.6)\n          actionpack (= 4.2.6)\n          actionview (= 4.2.6)\n          activejob (= 4.2.6)\n          activemodel (= 4.2.6)\n          activerecord (= 4.2.6)\n          activesupport (= 4.2.6)\n          bundler (&gt;= 1.3.0, &lt; 2.0)\n          railties (= 4.2.6)\n          sprockets-rails\n        rails-deprecated_sanitizer (1.0.3)\n          activesupport (&gt;= 4.2.0.alpha)\n        rails-dom-testing (1.0.6)\n          activesupport (&gt;= 4.2.0.beta, &lt; 5.0)\n          nokogiri (~&gt; 1.6.0)\n          rails-deprecated_sanitizer (&gt;= 1.0.1)\n        rails-html-sanitizer (1.0.3)\n          loofah (~&gt; 2.0)\n        railties (4.2.6)\n          actionpack (= 4.2.6)\n          activesupport (= 4.2.6)\n          rake (&gt;= 0.8.7)\n          thor (&gt;= 0.18.1, &lt; 2.0)\n        rake (10.5.0)\n        rdoc (4.2.1)\n        sass (3.4.21)\n        sass-rails (5.0.4)\n          railties (&gt;= 4.0.0, &lt; 5.0)\n          sass (~&gt; 3.1)\n          sprockets (&gt;= 2.8, &lt; 4.0)\n          sprockets-rails (&gt;= 2.0, &lt; 4.0)\n          tilt (&gt;= 1.1, &lt; 3)\n        sdoc (0.4.1)\n          json (~&gt; 1.7, &gt;= 1.7.7)\n          rdoc (~&gt; 4.0)\n        spring (1.3.6)\n        sprockets (3.3.0)\n          rack (~&gt; 1.0)\n        sprockets-rails (2.3.2)\n          actionpack (&gt;= 3.0)\n          activesupport (&gt;= 3.0)\n          sprockets (&gt;= 2.8, &lt; 4.0)\n        sqlite3 (1.3.11)\n        thor (0.19.1)\n        thread_safe (0.3.5)\n        tilt (2.0.1)\n        turbolinks (2.5.3)\n          coffee-rails\n        tzinfo (1.2.2)\n          thread_safe (~&gt; 0.1)\n        uglifier (2.7.2)\n          execjs (&gt;= 0.3.0)\n          json (&gt;= 1.8.0)\n        web-console (2.2.1)\n          activemodel (&gt;= 4.0)\n          binding_of_caller (&gt;= 0.7.2)\n          railties (&gt;= 4.0)\n          sprockets-rails (&gt;= 2.0, &lt; 4.0)\n\n    PLATFORMS\n      ruby\n\n    DEPENDENCIES\n      byebug\n      coffee-rails (~&gt; 4.1.0)\n      jbuilder (~&gt; 2.0)\n      jquery-rails\n      rails (= 4.2.6)\n      sass-rails (~&gt; 5.0)\n      sdoc (~&gt; 0.4.0)\n      spring\n      sqlite3\n      turbolinks\n      uglifier (&gt;= 1.3.0)\n      web-console (~&gt; 2.0)\n    BUNDLED WITH\n       1.11.2\n</code></pre>\n\n<p>How would I go about fixing this, exactly?\nIf you need anymore information, I'd be willing to provide it!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "has-many", "belongs-to"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1528301354, "post_id": 50724841, "comment_id": 88458174, "body": "Inspect <code>book</code> and <code>author</code>. Because you do <code>new</code>, and not <code>create</code>, neither have an <code>id</code>. So, the association can&#39;t be set correctly with <code>book.author = author</code> (there is no <code>author.id</code> to set as <code>author_id</code> on <code>book</code>)."}, {"owner": {"reputation": 21, "user_id": 3029832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb628fcae9378fb5961506c2e286a5d0?s=128&d=identicon&r=PG&f=1", "display_name": "meacuna", "link": "https://stackoverflow.com/users/3029832/meacuna"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1528301925, "post_id": 50724841, "comment_id": 88458465, "body": "@jvillian I understand that, but I expected the association to be stored in memory, just as (I think) it does when using <code>collection&lt;&lt;(object)</code> instead of <code>association=(associate)</code>."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1528302658, "post_id": 50724841, "comment_id": 88458837, "body": "I don&#39;t know what you mean by &#39;stored in memory&#39; when there is no foreign key to be set on <code>book.author_id</code>. You could, however, take a look at the source code and I&#39;m sure all would be made clear. BTW, I suspect that if you look in your console you might also find some illuminating information."}], "answers": [{"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1528319915, "creation_date": 1528319915, "answer_id": 50729758, "question_id": 50724841, "link": "https://stackoverflow.com/questions/50724841/rails-has-many-and-belongs-to-association-methods-with-unexpected-behaviour/50729758#50729758", "title": "Rails has_many and belongs_to association methods with unexpected behaviour", "body": "<p><code>author.books &lt;&lt; book</code> builds an <code>ActiveRecord::Associations::CollectionProxy</code>. So with <code>author.books.include? book</code> you are checking if it exists inside that collection (not yet stored in db): it's true.</p>\n\n<p>With just <code>book.save</code> you can save both <code>book</code> and <code>author</code>.</p>\n\n<p>Conversely, <code>book.author = author</code> is just an assignment. You need to <code>author.save</code> and <code>book.save</code> to effectively build the relation. If you check author.books.include?(book) after the two save, if becomes true.</p>\n\n<p>Try it in rails console.</p>\n"}], "owner": {"reputation": 21, "user_id": 3029832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb628fcae9378fb5961506c2e286a5d0?s=128&d=identicon&r=PG&f=1", "display_name": "meacuna", "link": "https://stackoverflow.com/users/3029832/meacuna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528319915, "creation_date": 1528300971, "question_id": 50724841, "link": "https://stackoverflow.com/questions/50724841/rails-has-many-and-belongs-to-association-methods-with-unexpected-behaviour", "title": "Rails has_many and belongs_to association methods with unexpected behaviour", "body": "<p>I recently stumbled upon a strange behaviour with some of the methods added by <code>belongs_to</code> and <code>has_many</code>.</p>\n\n<p>Consider the following scenario, as presented by <a href=\"http://edgeguides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">Rail's Active Record Association guide</a>.</p>\n\n<pre><code>class Author &lt; ApplicationRecord\n  has_many :books, inverse_of: :author\nend\n\nclass Book &lt; ApplicationRecord\n  belongs_to :author, inverse_of: :books\nend\n</code></pre>\n\n<p>If I use <code>belongs_to</code>'s <code>association=(associate)</code> <a href=\"http://edgeguides.rubyonrails.org/association_basics.html#belongs-to-association-reference\" rel=\"nofollow noreferrer\">method</a>, I loose reference to book from author:</p>\n\n<pre><code>book = Book.new\nauthor = Author.new\nbook.author = author\nauthor.books.include?(book) # false, expected true\nauthor.books.empty? # true, expected to contain book\n</code></pre>\n\n<p>But if I make the association with <code>has_many</code>'s <code>collection&lt;&lt;(object)</code> <a href=\"http://edgeguides.rubyonrails.org/association_basics.html#has-many-association-reference\" rel=\"nofollow noreferrer\">method</a>, the reference persists as expected:</p>\n\n<pre><code>book = Book.new\nauthor = Author.new\nauthor.books &lt;&lt; book\nauthor.books.include?(book) # true, as expected\nauthor.books.empty? # false, as expected\nbook.author == author # true, as expected\n</code></pre>\n\n<p>Is this the expected behaviour? I don't quite understand why the first case does not store the association from <code>author</code> to <code>book</code>.</p>\n\n<p>I'm using ruby 2.5.1 and rails 5.2.0.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "sendgrid", "sendgrid-api-v3"], "answers": [{"comments": [{"owner": {"reputation": 2327, "user_id": 1253189, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/56aa566c099ed8007c7ecbecb48de061?s=128&d=identicon&r=PG", "display_name": "Tom Pinchen", "link": "https://stackoverflow.com/users/1253189/tom-pinchen"}, "edited": false, "score": 0, "creation_date": 1528362522, "post_id": 50733897, "comment_id": 88481950, "body": "Thanks for your answer but unfortunately I am receiving a 400 error message when using this. My implementation is exactly as you have it an i&#39;ve updated my question with the error i&#39;m received. Thanks again for any help you can provide."}, {"owner": {"reputation": 1513, "user_id": 5746504, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-4c57-sWfrFM/AAAAAAAAAAI/AAAAAAAACog/XNKIq-S6CDg/photo.jpg?sz=128", "display_name": "Moamen Naanou", "link": "https://stackoverflow.com/users/5746504/moamen-naanou"}, "reply_to_user": {"reputation": 2327, "user_id": 1253189, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/56aa566c099ed8007c7ecbecb48de061?s=128&d=identicon&r=PG", "display_name": "Tom Pinchen", "link": "https://stackoverflow.com/users/1253189/tom-pinchen"}, "edited": false, "score": 0, "creation_date": 1528364898, "post_id": 50733897, "comment_id": 88483715, "body": "@TomPinchen can you please try to replace <code>mail = Mail.new(from, subject, to, content)</code> with <code>mail = SendGrid::Mail.new(from, subject, to, content)</code>"}, {"owner": {"reputation": 2327, "user_id": 1253189, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/56aa566c099ed8007c7ecbecb48de061?s=128&d=identicon&r=PG", "display_name": "Tom Pinchen", "link": "https://stackoverflow.com/users/1253189/tom-pinchen"}, "edited": false, "score": 0, "creation_date": 1528383364, "post_id": 50733897, "comment_id": 88496373, "body": "Amazing! This has worked, thanks so much for your help :)"}, {"owner": {"reputation": 4401, "user_id": 305306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D87pc.png?s=128&g=1", "display_name": "Earl Jenkins", "link": "https://stackoverflow.com/users/305306/earl-jenkins"}, "edited": false, "score": 0, "creation_date": 1605112939, "post_id": 50733897, "comment_id": 114554006, "body": "Hurray for the update about the namespace conflict for <code>Mail</code>. That code is straight off their Ruby integration page, and also duplicated in the sendgrid-ruby documentation, and it <i>doesn&#39;t work</i>. So annoying."}], "tags": [], "owner": {"reputation": 1513, "user_id": 5746504, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-4c57-sWfrFM/AAAAAAAAAAI/AAAAAAAACog/XNKIq-S6CDg/photo.jpg?sz=128", "display_name": "Moamen Naanou", "link": "https://stackoverflow.com/users/5746504/moamen-naanou"}, "is_accepted": true, "score": 3, "last_activity_date": 1528609788, "last_edit_date": 1528609788, "creation_date": 1528351151, "answer_id": 50733897, "question_id": 50724802, "link": "https://stackoverflow.com/questions/50724802/where-to-put-ruby-helpers-sendgrid-v3-send-api/50733897#50733897", "title": "Where to put ruby helpers Sendgrid V3 Send API", "body": "<p>You need to use <a href=\"http://guides.rubyonrails.org/action_mailer_basics.html\" rel=\"nofollow noreferrer\">Action Mailer</a>:</p>\n\n<p>First create a mailer class to add your mail details (i.e. UserMailer):</p>\n\n<pre><code>$ bin/rails generate mailer UserMailer\n</code></pre>\n\n<p>it will create the following files:</p>\n\n<pre><code>create  app/mailers/user_mailer.rb\ncreate  app/mailers/application_mailer.rb\ninvoke  erb\ncreate    app/views/user_mailer\ncreate    app/views/layouts/mailer.text.erb\ncreate    app/views/layouts/mailer.html.erb\ninvoke  test_unit\ncreate    test/mailers/user_mailer_test.rb\ncreate    test/mailers/previews/user_mailer_preview.rb\n</code></pre>\n\n<p>Now edit the file <code>app/mailers/user_mailer.rb</code>:</p>\n\n<pre><code>require 'sendgrid-ruby'\ninclude SendGrid\n\nclass UserMailer &lt; ApplicationMailer\n  def send_task_complete_email\n    from = Email.new(email: 'test@example.com')\n    to = Email.new(email: 'test@example.com')\n    subject = 'Sending with SendGrid is Fun'\n    content = Content.new(type: 'text/plain', value: 'and easy to do anywhere, even with Ruby')\n    mail = Mail.new(from, subject, to, content)\n\n    sg = SendGrid::API.new(api_key: ENV['SENDGRID_API_KEY'])\n    response = sg.client.mail._('send').post(request_body: mail.to_json)\n    puts response.status_code\n    puts response.body\n    puts response.headers\n  end\nend\n</code></pre>\n\n<p>Then you can simply send emails using this code:</p>\n\n<pre><code>UserMailer.send_task_complete_email.deliver_now\n</code></pre>\n\n<p>Or from rake task:</p>\n\n<pre><code>desc \"Testing Email Rake\"\ntask :test_sendgrid =&gt; :environment do\n  puts 'Starting Sendgrid Email Test'\n  UserMailer.send_task_complete_email.deliver_now\n  puts 'Sendgrid Email Test Complete'\nend \n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>Because there is <code>Mail</code> module in Rails, you need to specify the correct SendGrid Mail module by changing:</p>\n\n<pre><code> mail = Mail.new(from, subject, to, content)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>mail = SendGrid::Mail.new(from, subject, to, content)\n</code></pre>\n"}], "owner": {"reputation": 2327, "user_id": 1253189, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/56aa566c099ed8007c7ecbecb48de061?s=128&d=identicon&r=PG", "display_name": "Tom Pinchen", "link": "https://stackoverflow.com/users/1253189/tom-pinchen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 50733897, "answer_count": 1, "score": 0, "last_activity_date": 1528609788, "creation_date": 1528300817, "last_edit_date": 1528362464, "question_id": 50724802, "link": "https://stackoverflow.com/questions/50724802/where-to-put-ruby-helpers-sendgrid-v3-send-api", "title": "Where to put ruby helpers Sendgrid V3 Send API", "body": "<p>I am trying to integrate Sendgrid using their <a href=\"https://github.com/sendgrid/sendgrid-ruby\" rel=\"nofollow noreferrer\">Github documentation</a>. </p>\n\n<p>In their examples they suggest that you create a Mail Helper class but give very little guidance on how to actually do this.</p>\n\n<p>I have a scheduled Rake task running using Heroku Scheduler that I would like to send an email when the task is complete and was hoping to use Sendgrid for this. </p>\n\n<p>Currently I have the following code in <code>/lib/tasks/scheduler.rake</code></p>\n\n<pre><code>require 'sendgrid-ruby'\ninclude SendGrid\n\ndesc \"Testing Email Rake\"\ntask :test_sendgrid =&gt; :environment do\n  puts 'Starting Sendgrid Email Test'\n  send_task_complete_email()\n  puts 'Sendgrid Email Test Complete'\nend \n\ndef send_task_complete_email\n  from = Email.new(email: 'test@example.com')\n  to = Email.new(email: 'test@example.com')\n  subject = 'Sending with SendGrid is Fun'\n  content = Content.new(type: 'text/plain', value: 'and easy to do anywhere, even with Ruby')\n  mail = Mail.new(from, subject, to, content)\n\n  sg = SendGrid::API.new(api_key: ENV['SENDGRID_API_KEY'])\n  response = sg.client.mail._('send').post(request_body: mail.to_json)\n  puts response.status_code\n  puts response.body\n  puts response.headers\nend\n</code></pre>\n\n<p>I don't have the helper classes added anywhere as I am not sure which bits to add or where to put them. At the moment when I run this task I receive a <code>400 Bad request</code> error back from Sendgrid and I believe it's because I don't have these helpers in place. </p>\n\n<p>Any advice to fix this would be much appreciated as when I try to integrate without using the helpers and instead writing out the JSON I can successfully send the email but receive a <code>TypeError: Mail is not a module</code> when I try to deploy to Heroku.</p>\n\n<p><strong>UPDATE: ERROR RECEIVED USING ANSWER BELOW</strong></p>\n\n<pre><code>400\n{\"errors\":[{\"message\":\"Invalid type. Expected: object, given: string.\",\"field\":\"(root)\",\"help\":\"http://sendgrid.com/docs/API_Reference/Web_API_v3/Mail/errors.html#-Request-Body-Parameters\"}]}\n{\"server\"=&gt;[\"nginx\"], \"date\"=&gt;[\"Thu, 07 Jun 2018 09:02:42 GMT\"], \"content-type\"=&gt;[\"application/json\"], \"content-length\"=&gt;[\"191\"], \"connection\"=&gt;[\"close\"], \"access-control-allow-origin\"=&gt;[\"https://sendgrid.api-docs.io\"], \"access-control-allow-methods\"=&gt;[\"POST\"], \"access-control-allow-headers\"=&gt;[\"Authorization, Content-Type, On-behalf-of, x-sg-elas-acl\"], \"access-control-max-age\"=&gt;[\"600\"], \"x-no-cors-reason\"=&gt;[\"https://sendgrid.com/docs/Classroom/Basics/API/cors.html\"]}\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 363, "user_id": 7534274, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9TCm.jpg?s=128&g=1", "display_name": "Xullnn", "link": "https://stackoverflow.com/users/7534274/xullnn"}, "edited": false, "score": 0, "creation_date": 1528304435, "post_id": 50724722, "comment_id": 88459786, "body": "Thanks! I mistook that it&#39;s not an integer triggered <code>.call</code>, it&#39;s just I used <code>.()</code> method which is the shortcut for <code>call()</code>."}], "tags": [], "owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "is_accepted": true, "score": 3, "last_activity_date": 1528300613, "creation_date": 1528300613, "answer_id": 50724722, "question_id": 50724293, "link": "https://stackoverflow.com/questions/50724293/how-the-call-method-be-triggered-by-a-returning-integer-in-ruby/50724722#50724722", "title": "How the &#39;.call&#39; method be triggered by a returning integer in Ruby?", "body": "<p><code>.()</code> is just a shortcut for <code>.call()</code> Yes, the call method is usually used to run proc objects, but that doesn't make it anything special, just a regular method that a proc object has implemented. If you define it to do something else, the shortcut still works as normal</p>\n"}], "owner": {"reputation": 363, "user_id": 7534274, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9TCm.jpg?s=128&g=1", "display_name": "Xullnn", "link": "https://stackoverflow.com/users/7534274/xullnn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 2, "accepted_answer_id": 50724722, "answer_count": 1, "score": 1, "last_activity_date": 1528300613, "creation_date": 1528299271, "question_id": 50724293, "link": "https://stackoverflow.com/questions/50724293/how-the-call-method-be-triggered-by-a-returning-integer-in-ruby", "title": "How the &#39;.call&#39; method be triggered by a returning integer in Ruby?", "body": "<p>I encountered a code kata, it asks to implement a <code>add(n)</code> method which can chain multiple numbers then add them up, like:</p>\n\n<pre><code>add(1).(2).(3).(4).(5);  # =&gt; 15\n</code></pre>\n\n<p>When I first started\uff0cI thought it might involve <code>method_missing</code> method, so I firstly made a simplified version to see how the <code>*args</code> were handled when I was chaining a <code>.(n)</code> after a method which would return a integer, I chose <code>rand</code> to do this. </p>\n\n<pre><code>def method_missing(m, *args)\n  p m\n  p args\nend\n\n&gt; rand(10).(9).(8)\n# some other methods add empty array\n:call\n[9]\n:call\n[8]\n =&gt; [8]\n</code></pre>\n\n<p>Then I found the following chained <code>.(n)</code> just call <code>.call</code> method and take <code>n</code> as its parameter. Based on <a href=\"https://stackoverflow.com/questions/26580516/ruby-dot-parenthesis-call-syntax\">another similar question</a> I just rewrite the <code>call</code> method in <code>class Integer</code>:</p>\n\n<pre><code>class Integer\n  def call(x)\n    self + x\n  end\nend\n\n\ndef add(n)\n  n\nend\n</code></pre>\n\n<p>Then I get the result. </p>\n\n<p>The question is I knew that the <code>.call</code> method is usually sent to a <a href=\"http://ruby-doc.org/core-2.5.1/Method.html#method-i-call\" rel=\"nofollow noreferrer\">Proc object</a>. But here the <code>add(n)</code> (as well as <code>rand</code> and other methods returning an integer) just simply returns a integer. </p>\n\n<p>Why this can trigger <code>call</code> method? Did I miss something?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528318097, "post_id": 50724274, "comment_id": 88466472, "body": "Your <code>PlayCardService</code> does not seem to implement <code>as_json</code>"}, {"owner": {"reputation": 105, "user_id": 8085613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e4bb88cb80e591f8522e6927463096?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis CHEVREUX", "link": "https://stackoverflow.com/users/8085613/alexis-chevreux"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528357040, "post_id": 50724274, "comment_id": 88478626, "body": "@engineersmnky it&#39;s work with out a as_json"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 8085613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e4bb88cb80e591f8522e6927463096?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis CHEVREUX", "link": "https://stackoverflow.com/users/8085613/alexis-chevreux"}, "edited": false, "score": 0, "creation_date": 1528357189, "post_id": 50724820, "comment_id": 88478713, "body": "Yeah but why <code>to_json</code> was call automaticaly on show but not on create ?"}, {"owner": {"reputation": 141, "user_id": 7929744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6807ea854a921d6bce5c91e2c6d2b809?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Szambela\u0144czyk", "link": "https://stackoverflow.com/users/7929744/karol-szambela%c5%84czyk"}, "reply_to_user": {"reputation": 105, "user_id": 8085613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e4bb88cb80e591f8522e6927463096?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis CHEVREUX", "link": "https://stackoverflow.com/users/8085613/alexis-chevreux"}, "edited": false, "score": 0, "creation_date": 1528386809, "post_id": 50724820, "comment_id": 88498678, "body": "look here: <a href=\"https://apidock.com/rails/ActionController/Base/render\" rel=\"nofollow noreferrer\">apidock.com/rails/ActionController/Base/render</a> in Rendering JSON part: &quot;It\u2019s not necessary to call to_json on the object you want to render, since render will automatically do that for you&quot;"}, {"owner": {"reputation": 105, "user_id": 8085613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e4bb88cb80e591f8522e6927463096?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis CHEVREUX", "link": "https://stackoverflow.com/users/8085613/alexis-chevreux"}, "edited": false, "score": 0, "creation_date": 1528392407, "post_id": 50724820, "comment_id": 88501559, "body": "Yeah but I have to do on my object but not on my hash I don&#39;t understand"}, {"owner": {"reputation": 141, "user_id": 7929744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6807ea854a921d6bce5c91e2c6d2b809?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Szambela\u0144czyk", "link": "https://stackoverflow.com/users/7929744/karol-szambela%c5%84czyk"}, "reply_to_user": {"reputation": 105, "user_id": 8085613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e4bb88cb80e591f8522e6927463096?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis CHEVREUX", "link": "https://stackoverflow.com/users/8085613/alexis-chevreux"}, "edited": false, "score": 0, "creation_date": 1528394646, "post_id": 50724820, "comment_id": 88502638, "body": "ActiveRecord is a complex object and i think to_json is necessary to give option of overwriting serialization procedure (as_json method in model definition)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528407683, "post_id": 50724820, "comment_id": 88508898, "body": "<code>to_json</code> will use <code>as_json</code> to define the structure you should write a custom <code>as_json</code> not a custom <code>to_json</code> then it should render appropriately without the explicit call"}], "tags": [], "owner": {"reputation": 141, "user_id": 7929744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6807ea854a921d6bce5c91e2c6d2b809?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Szambela\u0144czyk", "link": "https://stackoverflow.com/users/7929744/karol-szambela%c5%84czyk"}, "is_accepted": true, "score": 0, "last_activity_date": 1528300894, "creation_date": 1528300894, "answer_id": 50724820, "question_id": 50724274, "link": "https://stackoverflow.com/questions/50724274/rails-rendering-why-have-to-call-to-json/50724820#50724820", "title": "Rails rendering why have to call .to_json", "body": "<p>In show function there is record.attributes, so You get hash after <em>attributes</em> method which can be rendered as json. In create function You are rendering activerecord, where you can use <em>attributes</em> method too or just convert it with <em>to_json</em>. Consider using jbuilder to render json</p>\n"}], "owner": {"reputation": 105, "user_id": 8085613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e4bb88cb80e591f8522e6927463096?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis CHEVREUX", "link": "https://stackoverflow.com/users/8085613/alexis-chevreux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 50724820, "answer_count": 1, "score": 1, "last_activity_date": 1528453607, "creation_date": 1528299200, "last_edit_date": 1528453607, "question_id": 50724274, "link": "https://stackoverflow.com/questions/50724274/rails-rendering-why-have-to-call-to-json", "title": "Rails rendering why have to call .to_json", "body": "<p>I work on a <code>Rails API</code>, and I want to render some binary in json. To do that I convert my binary in hex to render it.</p>\n\n<p>So I have </p>\n\n<pre><code>#&lt;PlayCard id: 3, card_id: 12, atk: 10, hp: 9, deck_id: nil, game_id: nil, uid: \".dk\\x8A\", created_at: \"2018-06-06 15:17:25\", updated_at: \"2018-06-06 15:17:25\", user_id: 27&gt;\n(byebug) play_card.to_json\n{\"id\"=&gt;3, \"card_id\"=&gt;12, \"atk\"=&gt;10, \"hp\"=&gt;9, \"deck_id\"=&gt;nil, \"game_id\"=&gt;nil, \"uid\"=&gt;\"2e646b8a\", \"created_at\"=&gt;Wed, 06 Jun 2018 17:17:25 CEST +02:00, \"updated_at\"=&gt;Wed, 06 Jun 2018 17:17:25 CEST +02:00, \"user_id\"=&gt;27}\n</code></pre>\n\n<p>My question is about the rendering of my object. With my method <code>show</code> I Have no problem but with my method <code>create</code> I have to call <code>my_object.to_json</code> did you have an idea ? With out the <code>.to_json</code> I have a <code>ActionDispatch::TestResponse</code> object.</p>\n\n<pre><code>def show\n  record = PlayCard.find_by(id: params[:id])\n  if record.present?\n    render json: record.attributes.except('uid'), status: :ok\n  else\n    render json: {}, status: :no_content\n  end\nend\n\ndef create\n  play_card = PlayCardsService.create(play_card_params)\n  if play_card.valid?\n    render json: play_card.to_json, status: :created\n  else\n    render json: { status: 'KO', errors: play_card.errors.full_messages }, status: :unprocessable_entity\n  end\nend\n\nclass PlayCardsService\n\n  class &lt;&lt; self\n\n    def create(play_card_params)\n      PlayCard.create(play_card_params)\n    end\n\n  end\n\nend\n\ndef to_json(options = {})\n  bin = bin_to_hex(self.uid)\n  self.uid = nil\n  json = self.as_json\n  json['uid'] = bin\n  json\nend\n\ndef bin_to_hex(s)\n  s.each_byte.map { |b| b.to_s(16).rjust(2,'0') }.join\nend\n</code></pre>\n\n<p>SOLUTION:\nI have to override <code>as_json</code> and not <code>to_json</code>. Look the comment of @engineersmnky.</p>\n\n<p>Thanks for your help</p>\n\n<p>Have a nice day,</p>\n"}, {"tags": ["ruby", "unit-testing", "rspec", "chef-infra", "octal"], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 9903972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0e131651aae798f5cfd340ae0abba4?s=128&d=identicon&r=PG&f=1", "display_name": "sg95", "link": "https://stackoverflow.com/users/9903972/sg95"}, "is_accepted": false, "score": 0, "last_activity_date": 1528311441, "creation_date": 1528311441, "answer_id": 50727690, "question_id": 50723818, "link": "https://stackoverflow.com/questions/50723818/chef-exec-rspec-error-raise-argumenterror-error-outside-examples/50727690#50727690", "title": "Chef Exec Rspec Error: raise ArgumentError (Error outside examples)", "body": "<p>Update: I was running ChefDK 2.5.3 and updated to 3.0.36 and the issue went away. I don't know if there was a compatibility issue or if the files were messed up and a fresh install solved the issue.</p>\n"}, {"tags": [], "owner": {"reputation": 3556, "user_id": 506908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c874984f69ef596764255efcd79113?s=128&d=identicon&r=PG", "display_name": "lamont", "link": "https://stackoverflow.com/users/506908/lamont"}, "is_accepted": true, "score": 1, "last_activity_date": 1528314367, "creation_date": 1528314367, "answer_id": 50728397, "question_id": 50723818, "link": "https://stackoverflow.com/questions/50723818/chef-exec-rspec-error-raise-argumenterror-error-outside-examples/50728397#50728397", "title": "Chef Exec Rspec Error: raise ArgumentError (Error outside examples)", "body": "<p>This has nothing to do with rspec, or even chefspec, but with a patch in rubygems 2.7.6 which broke berkshelf and has been addressed in mixlib-archive:</p>\n\n<p><a href=\"https://github.com/berkshelf/berkshelf/issues/1744\" rel=\"nofollow noreferrer\">https://github.com/berkshelf/berkshelf/issues/1744</a></p>\n"}], "owner": {"reputation": 3, "user_id": 9903972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0e131651aae798f5cfd340ae0abba4?s=128&d=identicon&r=PG&f=1", "display_name": "sg95", "link": "https://stackoverflow.com/users/9903972/sg95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "accepted_answer_id": 50728397, "answer_count": 2, "score": 0, "last_activity_date": 1528314367, "creation_date": 1528297844, "question_id": 50723818, "link": "https://stackoverflow.com/questions/50723818/chef-exec-rspec-error-raise-argumenterror-error-outside-examples", "title": "Chef Exec Rspec Error: raise ArgumentError (Error outside examples)", "body": "<p>I've been getting this error as of recent for a couple cookbooks I'm trying to test with \"chef exec rspec\":</p>\n\n<pre><code>An error occurred in a `before(:suite)` hook.\nFailure/Error: raise ArgumentError, \"#{str.inspect} is not an octal string\"\n\nArgumentError:\n  \"\\x80\\x00\\x00\\x00\\e\\xC4dx\" is not an octal string\n# /opt/chefdk/embedded/lib/ruby/site_ruby/2.4.0/rubygems/package/tar_header.rb:128:in `strict_oct'\n# /opt/chefdk/embedded/lib/ruby/site_ruby/2.4.0/rubygems/package/tar_header.rb:108:in `from'\n# /opt/chefdk/embedded/lib/ruby/site_ruby/2.4.0/rubygems/package/tar_reader.rb:59:in `each'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/mixlib-archive-0.4.1/lib/mixlib/archive/tar.rb:27:in `block in extract'\n# /opt/chefdk/embedded/lib/ruby/site_ruby/2.4.0/rubygems/package/tar_reader.rb:29:in `new'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/mixlib-archive-0.4.1/lib/mixlib/archive/tar.rb:118:in `reader'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/mixlib-archive-0.4.1/lib/mixlib/archive/tar.rb:25:in `extract'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/mixlib-archive-0.4.1/lib/mixlib/archive.rb:33:in `extract'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/berkshelf-6.3.1/lib/berkshelf/community_rest.rb:16:in `unpack'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/berkshelf-6.3.1/lib/berkshelf/community_rest.rb:102:in `download'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/berkshelf-6.3.1/lib/berkshelf/downloader.rb:70:in `try_download'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/berkshelf-6.3.1/lib/berkshelf/downloader.rb:40:in `block in download'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/berkshelf-6.3.1/lib/berkshelf/downloader.rb:39:in `each'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/berkshelf-6.3.1/lib/berkshelf/downloader.rb:39:in `download'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/berkshelf-6.3.1/lib/berkshelf/installer.rb:108:in `install'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/berkshelf-6.3.1/lib/berkshelf/installer.rb:181:in `block (2 levels) in install_from_universe'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/safe_task_executor.rb:24:in `block in execute'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/synchronization/mri_lockable_object.rb:38:in `block in synchronize'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/synchronization/mri_lockable_object.rb:38:in `synchronize'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/synchronization/mri_lockable_object.rb:38:in `synchronize'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/safe_task_executor.rb:19:in `execute'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/ivar.rb:170:in `safe_execute'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/future.rb:52:in `block in execute'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:348:in `run_task'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:337:in `block (3 levels) in create_worker'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `loop'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `block (2 levels) in create_worker'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `catch'\n# /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `block in create_worker'\n# \n#   Showing full backtrace because every line was filtered out.\n#   See docs for RSpec::Configuration#backtrace_exclusion_patterns and\n#   RSpec::Configuration#backtrace_inclusion_patterns for more information.\n\nFinished in 1.36 seconds (files took 7.16 seconds to load)\n0 examples, 0 failures, 1 error occurred outside of examples\n</code></pre>\n\n<p>This also prevents it from recognizing any unit tests written (as you can see it recognizes 0 examples). When I run chef exec rspec on any other cookbooks I have done in the past, I don't have this issue. I noticed it's tracing the issue back to chefdk on my Mac, but I've researched everywhere for this issue and can't find anything on it and am not sure what this error is trying to tell me. I'm a novice to Chef, so if anyone can guide me in the right direction or tell me what this error may mean, it would be a good start.</p>\n\n<p>One pattern I noticed is that the 2 cookbooks I have this issue with, were cloned over https rather than ssh. I have no idea if this has anything to do with it or just purely coincidental.</p>\n\n<p>I also noticed whenever I comment out \"require spec helper\" in the spec files for the cookbooks, this error goes away and starts recognizing unit tests written in the spec file. But doing so, is not a long-term solution and am not sure if it's properly testing the examples.</p>\n\n<p>I've also updated ruby on my Mac to 2.4.1</p>\n"}, {"tags": ["ruby", "oop"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1528297655, "post_id": 50723561, "comment_id": 88455781, "body": "<i>&quot;had to call accounts.accounts to obtain the list&quot;</i> \u2013 well, the list should be encapsulated within <code>AccountsCollection</code>. Why do you need / want to have direct access to it?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1528297707, "post_id": 50723561, "comment_id": 88455806, "body": "The question here is why you needed a new class in the first place? With the current implementation I would just use a plain array. If there is some more significant functionality there, it will guide you to a better name. Anyway, if for whatever reason you stick with <code>AccountsCollection</code>, just rename the <code>accounts</code> method to <code>to_a</code>."}, {"owner": {"reputation": 55, "user_id": 9903911, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-576O_HJtl9c/AAAAAAAAAAI/AAAAAAAAABM/v9u4bFJyxrA/photo.jpg?sz=128", "display_name": "Keith Chong", "link": "https://stackoverflow.com/users/9903911/keith-chong"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1528298603, "post_id": 50723561, "comment_id": 88456442, "body": "@ndn owh that&#39;s because i left out a few attributes.there are other attrs such as credit, debit and balance. Sorry I should have included it in there.  I left out another method for accountscollection, which is create or initialize get_user(name) || add_new_account(name)"}], "answers": [{"comments": [{"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 2, "creation_date": 1528297784, "post_id": 50723695, "comment_id": 88455867, "body": "It can be argued that <code>show</code> might not be the best name here. Assuming that you want to extract an array from this collection, the idiomatic ruby way would be to use the <code>to_a</code> method."}, {"owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "reply_to_user": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 0, "creation_date": 1528297871, "post_id": 50723695, "comment_id": 88455937, "body": "Right, I agree <code>to_a</code> would be better. Updated, thanks"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1528298140, "post_id": 50723695, "comment_id": 88456115, "body": "You might want to <code>dup</code> the array to prevent direct modification."}], "tags": [], "owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "is_accepted": false, "score": 2, "last_activity_date": 1528297863, "last_edit_date": 1528297863, "creation_date": 1528297526, "answer_id": 50723695, "question_id": 50723561, "link": "https://stackoverflow.com/questions/50723561/store-a-collection-of-ruby-objects/50723695#50723695", "title": "Store a collection of Ruby objects", "body": "<p>Really it looks good to me other than the naming looking awkward. If it was me, I'd have the names like this so it looks good using it.</p>\n\n<pre><code>class AccountsCollection\n  def initialize\n    @accounts = []\n  end\n\n  def add(user)\n    accounts &lt;&lt; Account.new(user)\n  end\n\n  def to_a\n    @accounts\n  end\nend\n</code></pre>\n\n<p>Then your code would look like</p>\n\n<pre><code>accounts = AccountsCollection.new\n =&gt; #&lt;AccountsCollection:0x00007fc76ba70b18 @accounts=[]&gt;\n\naccounts.add('A')\naccounts.add('B')\naccounts.add('C')\n\naccounts.to_a\n =&gt;[\n   #&lt;Account:0x00007fc76b933890 @user_name=\"A\"&gt;,\n   #&lt;Account:0x00007fc76bc76d68 @user_name=\"B\"&gt;,\n   #&lt;Account:0x00007fc76c88c2d8 @user_name=\"C\"&gt;\n ]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 9903911, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-576O_HJtl9c/AAAAAAAAAAI/AAAAAAAAABM/v9u4bFJyxrA/photo.jpg?sz=128", "display_name": "Keith Chong", "link": "https://stackoverflow.com/users/9903911/keith-chong"}, "edited": false, "score": 0, "creation_date": 1528352083, "post_id": 50725478, "comment_id": 88475921, "body": "Thank you Simple Line! This is very helpful. =)"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 0, "last_activity_date": 1528303235, "creation_date": 1528303235, "answer_id": 50725478, "question_id": 50723561, "link": "https://stackoverflow.com/questions/50723561/store-a-collection-of-ruby-objects/50725478#50725478", "title": "Store a collection of Ruby objects", "body": "<p>The code smell, IMO, with your code is simply that it's a collection, but I can't treat it like a collection. For instance, if I wanted all the accounts that had more than 10 credits, I would have to pull the array of accounts out of the collection to do it:</p>\n\n<pre><code>accounts.accounts.select { |account| account.credit &gt; 10 }\n</code></pre>\n\n<p>whereas what you'd really want is to be able to just query the collection for it:</p>\n\n<pre><code>accounts.select { |account| account.credit &gt; 10 }\n</code></pre>\n\n<p>To make your collection feel more like a collection, you need to include <a href=\"https://ruby-doc.org/core/Enumerable.html\" rel=\"nofollow noreferrer\"><code>Enumerable</code></a> which requires that you implement the <code>each</code> method:</p>\n\n<pre><code>class AccountsCollection\n  include Enumerable\n\n  def initialize\n    @accounts = []\n  end\n\n  def add(user_name)\n    @accounts &lt;&lt; Account.new(user_name)\n\n    self # return self because that's more in-line with other collections\n  end\n\n  def each\n    return to_enum(__method__) { @accounts.size } unless block_given?\n\n    @accounts.each { |account| yield account }\n  end\nend\n</code></pre>\n\n<p>and with just that you can now treat your collection like the other collections in ruby:</p>\n\n<pre><code>accounts = AccountsCollection.new\naccounts.add('A').add('B').add('C')\n\naccounts.each.with_index do |account, index|\n  # I changed the attr_reader in Account to attr_accessor just to illustrate\n  account.credit = index * 10\nend\n\naccounts.select { |account| account.credit &gt; 10 }\n# =&gt; [#&lt;Account:0x00007fe50d894208 @user_name=\"C\", @credit=20, @debit=0&gt;]\n</code></pre>\n\n<p>and if you want it as an array, you automatically got a <code>to_a</code> method as well:</p>\n\n<pre><code>accounts.to_a\n# =&gt; [#&lt;Account:0x00007f879a094538 @user_name=\"A\", @credit=0, @debit=0&gt;,\n#     #&lt;Account:0x00007f879a094308 @user_name=\"B\", @credit=10, @debit=0&gt;,\n#     #&lt;Account:0x00007f879a0968b0 @user_name=\"C\", @credit=20, @debit=0&gt;]\n</code></pre>\n\n<p>this (by default) will create a new array by going through the <code>each</code> method so the array won't be directly modified (though the contents still can be)</p>\n\n<pre><code>accounts.to_a[1].debit = 15\naccounts.to_a &lt;&lt; 'not an account'\n\naccounts.to_a\n# =&gt; [#&lt;Account:0x00007fb51c08a9c0 @user_name=\"A\", @credit=0, @debit=0&gt;,\n#     #&lt;Account:0x00007fb51c08a6a0 @user_name=\"B\", @credit=10, @debit=15&gt;,\n#     #&lt;Account:0x00007fb51c08a588 @user_name=\"C\", @credit=20, @debit=0&gt;]\n</code></pre>\n\n<p>You can always replace any method of <code>Enumerable</code> with a better, custom implementation if you want:</p>\n\n<pre><code>def to_a\n  @accounts.dup\nend\n</code></pre>\n\n<p>Now things are starting to feel and smell a whole lot better, with minimal work, and others trying to use your <code>AccountsCollection</code> will be thoroughly pleased that they have access to all the search and traversal methods they're used to.</p>\n"}], "owner": {"reputation": 55, "user_id": 9903911, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-576O_HJtl9c/AAAAAAAAAAI/AAAAAAAAABM/v9u4bFJyxrA/photo.jpg?sz=128", "display_name": "Keith Chong", "link": "https://stackoverflow.com/users/9903911/keith-chong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 50725478, "answer_count": 2, "score": 2, "last_activity_date": 1528354322, "creation_date": 1528297164, "last_edit_date": 1528354322, "question_id": 50723561, "link": "https://stackoverflow.com/questions/50723561/store-a-collection-of-ruby-objects", "title": "Store a collection of Ruby objects", "body": "<p>I am trying to store a collection of objects within another object. I completed a coding challenge that looks like the following.</p>\n\n<p>First the singular object:</p>\n\n<pre><code>class Account\n  attr_reader :user_name, :credit, :debit\n\n  def initialize(user_name)\n    @user_name = user_name\n    @credit = 0\n    @debit = 0\n  end\nend\n</code></pre>\n\n<p>Next the collection:</p>\n\n<pre><code>class AccountsCollection\n  attr_reader :accounts\n\n  def initialize\n    @accounts = []\n  end\n\n  def add_new_account(user)\n    accounts &lt;&lt; Account.new(user)\n  end\n\n  ...\nend\n</code></pre>\n\n<p>This is how I use it:</p>\n\n<pre><code>accounts = AccountsCollection.new\n# =&gt; #&lt;AccountsCollection:0x00007fc76ba70b18 @accounts=[]&gt;\naccounts.add_new_account('A')\naccounts.add_new_account('B')\naccounts.add_new_account('C')\naccounts.accounts\n# =&gt;[\n#     #&lt;Account:0x00007fc76b933890 @user_name=\"A\"&gt;,\n#     #&lt;Account:0x00007fc76bc76d68 @user_name=\"B\"&gt;,\n#     #&lt;Account:0x00007fc76c88c2d8 @user_name=\"C\"&gt;\n#   ]\n</code></pre>\n\n<p>I wanted to use it like this:</p>\n\n<pre><code>class Display\n  attr_reader :accounts\n\n  def initialize(accounts)\n    @accounts = accounts\n  end\n\n  def display_inline\n    accounts.each do |account|\n      #do something\n  end\n  ...\nend\n\nDisplay.new(accounts.accounts).display_inline\n</code></pre>\n\n<p>But I have to call <code>accounts.accounts</code> to obtain the list of account objects. Is this weird? Can anyone show me how I can do this better?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "centos7"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 7583489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6A5Pu.jpg?s=128&g=1", "display_name": "Rowan A. Boat", "link": "https://stackoverflow.com/users/7583489/rowan-a-boat"}, "edited": false, "score": 0, "creation_date": 1528298661, "post_id": 50723685, "comment_id": 88456488, "body": "Would I still use URLs for starting/stopping an external program?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 29, "user_id": 7583489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6A5Pu.jpg?s=128&g=1", "display_name": "Rowan A. Boat", "link": "https://stackoverflow.com/users/7583489/rowan-a-boat"}, "edited": false, "score": 0, "creation_date": 1528299852, "post_id": 50723685, "comment_id": 88457279, "body": "Yes, because the link is on the front end. The URL will point the link to the correction <code>Controller#action</code> on the back end, where you can interact with the external program. I suppose you <i>could</i> do this entirely on the front end, but that&#39;s a matter of preference, I guess."}, {"owner": {"reputation": 29, "user_id": 7583489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6A5Pu.jpg?s=128&g=1", "display_name": "Rowan A. Boat", "link": "https://stackoverflow.com/users/7583489/rowan-a-boat"}, "edited": false, "score": 0, "creation_date": 1528304071, "post_id": 50723685, "comment_id": 88459585, "body": "Thank you for your help. Would the URL point to a JavaScript file that undergoes the actions? would this JS go in the controllers folder or would it be in the current HTML file? Sorry, I&#39;m new to this."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 29, "user_id": 7583489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6A5Pu.jpg?s=128&g=1", "display_name": "Rowan A. Boat", "link": "https://stackoverflow.com/users/7583489/rowan-a-boat"}, "edited": false, "score": 0, "creation_date": 1528310535, "post_id": 50723685, "comment_id": 88462979, "body": "If you&#39;re using the <code>link_to</code> approach, the URL points to a route that you&#39;ve defined in <code>routes.rb</code>. Your decisions regarding javascript (that handles either the remote <code>link_to</code> or <code>on. &#39;click&#39;</code>) are subject to personal preferences. Some people use <code>js.erb</code> (I <b>never ever</b> use <code>js.erb</code>). Other people put the js in views. I use JQuery and a lot of my js is developed as JQuery plugins. That&#39;s a much broader topic. Are you coding as a student? A hobby? For work?"}, {"owner": {"reputation": 29, "user_id": 7583489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6A5Pu.jpg?s=128&g=1", "display_name": "Rowan A. Boat", "link": "https://stackoverflow.com/users/7583489/rowan-a-boat"}, "edited": false, "score": 0, "creation_date": 1528317429, "post_id": 50723685, "comment_id": 88466179, "body": "I&#39;m coding for work. It&#39;s pretty much like an internship. I&#39;ve just dug into the assets folder and realized that&#39;s where the js scripts and stylesheets are supposed to be edited, so that makes things easier. I&#39;m slowly starting to understand how all the directories work together in Ruby on Rails apps, but still unsure exactly how the MVC system works"}, {"owner": {"reputation": 29, "user_id": 7583489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6A5Pu.jpg?s=128&g=1", "display_name": "Rowan A. Boat", "link": "https://stackoverflow.com/users/7583489/rowan-a-boat"}, "edited": false, "score": 0, "creation_date": 1529091571, "post_id": 50723685, "comment_id": 88765746, "body": "I&#39;m having trouble making the links actually connect to any javascript. How do you link these via the routes.rb file? I&#39;ve been researching this for a few days and can&#39;t find a straightforward answer."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 29, "user_id": 7583489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6A5Pu.jpg?s=128&g=1", "display_name": "Rowan A. Boat", "link": "https://stackoverflow.com/users/7583489/rowan-a-boat"}, "edited": false, "score": 0, "creation_date": 1529093743, "post_id": 50723685, "comment_id": 88766520, "body": "Hoo boy. You&#39;ll have to give me more than that. When you click on the link, do you get the appropriate activity on the server? (You can observe the activity in your console.) If not, what&#39;s happening? If so, is it that nothing happens on the front end (in your browser) after you&#39;ve clicked the link?"}, {"owner": {"reputation": 29, "user_id": 7583489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6A5Pu.jpg?s=128&g=1", "display_name": "Rowan A. Boat", "link": "https://stackoverflow.com/users/7583489/rowan-a-boat"}, "edited": false, "score": 0, "creation_date": 1529093856, "post_id": 50723685, "comment_id": 88766560, "body": "I apologize for being vague. Yes, there is activity that comes on my console but nothing changes on the page. I&#39;m trying to change an image when the link is clicked. I don&#39;t understand how to actually activate the js. The activity appears to be rendering the same page again"}, {"owner": {"reputation": 29, "user_id": 7583489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6A5Pu.jpg?s=128&g=1", "display_name": "Rowan A. Boat", "link": "https://stackoverflow.com/users/7583489/rowan-a-boat"}, "edited": false, "score": 0, "creation_date": 1529095670, "post_id": 50723685, "comment_id": 88767185, "body": "This is probably a basic rails questions, because I&#39;m not sure how to make any js work in a rails app in general. But for some reason I just can&#39;t find info on how to do this. Thank you very much"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 29, "user_id": 7583489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6A5Pu.jpg?s=128&g=1", "display_name": "Rowan A. Boat", "link": "https://stackoverflow.com/users/7583489/rowan-a-boat"}, "edited": false, "score": 0, "creation_date": 1529104114, "post_id": 50723685, "comment_id": 88769321, "body": "I do JS in a decidedly non-Rails way because I find the Rails way to be jenk. I never use <code>.js.erb</code> files and I turn turbolinks off on all my projects. So, I probably can&#39;t be much help to you. All I can say is read, read, read."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 2, "last_activity_date": 1528300089, "last_edit_date": 1528300089, "creation_date": 1528297496, "answer_id": 50723685, "question_id": 50723186, "link": "https://stackoverflow.com/questions/50723186/ruby-on-rails-how-to-create-multiple-buttons-for-starting-and-stopping-a-program/50723685#50723685", "title": "Ruby on Rails how to create multiple buttons for starting and stopping a program", "body": "<p>No, you don't need a form. Just do something like</p>\n\n<pre><code>&lt;%= link_to \"Start\", your_start_url, id: 'start-button', class: 'btn btn-primary', remote: true %&gt;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>&lt;%= link_to \"Stop\", your_stop_url, id: 'stop-button', class: 'btn btn-danger', remote: true %&gt;\n</code></pre>\n\n<p>You can style the links to look like a button. Of, if you're using Bootstrap, then Bootstrap will do the styling for you.</p>\n\n<p>You probably want to set the <code>disabled</code> class for the links depending on whether the program is currently running or not. Given <code>remote: true</code>, you can use JS to reset the <code>disabled</code> class based on what the user clicks (using an <code>.on 'click'</code> or <code>.click</code> handler).</p>\n\n<p>I suppose you could do this entirely on the front end. In which case you might do something like:</p>\n\n<pre><code>&lt;div id: 'start-button', class: 'btn btn-primary'&gt;&lt;/div&gt;\n</code></pre>\n\n<p>And then in your JS, you could do something like (using JQuery and coffescript):</p>\n\n<pre><code>$('#start-button').on 'click', (e) =&gt;\n  # do some stuff\n</code></pre>\n\n<p>Personally, I prefer to handle stuff like third party programs on the back end. But, skin the cat however you prefer.</p>\n"}], "owner": {"reputation": 29, "user_id": 7583489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6A5Pu.jpg?s=128&g=1", "display_name": "Rowan A. Boat", "link": "https://stackoverflow.com/users/7583489/rowan-a-boat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1528344818, "accepted_answer_id": 50723685, "answer_count": 1, "score": 0, "last_activity_date": 1528300089, "creation_date": 1528296050, "question_id": 50723186, "link": "https://stackoverflow.com/questions/50723186/ruby-on-rails-how-to-create-multiple-buttons-for-starting-and-stopping-a-program", "closed_reason": "Needs more focus", "title": "Ruby on Rails how to create multiple buttons for starting and stopping a program", "body": "<p>I'm trying to create an application on Linux CentOS 7 using Ruby on Rails (Ruby 2.4.1 &amp; Rails 5.2.0) where it displays a program that's running and gives you several buttons to stop or start the program. Would I do this in a form or would this be some other kind of process? I've looked this up for a while and couldn't find an answer. I'm also not sure how to send this code to start or stop the program, but I'm guessing I will need JavaScript for this task.</p>\n\n<p>This is the code I've gotten from the Getting Started with Rails tutorial:</p>\n\n<pre><code>&lt;%= form_with scope: :article, url: articles_path, local: true do |form| %&gt;\n  &lt;p&gt;\n    &lt;%= form.label :title %&gt;&lt;br&gt;\n    &lt;%= form.text_field :title %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= form.label :text %&gt;&lt;br&gt;\n    &lt;%= form.text_area :text %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><a href=\"http://guides.rubyonrails.org/v5.2/getting_started.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/v5.2/getting_started.html</a></p>\n\n<p>However, I don't know how to put a button outside of a submit button like this, and I cannot edit the text on the button's label. Also, to reiterate, I'm not sure if a form is what's needed for this task.</p>\n"}, {"tags": ["ruby", "parsing", "yaml"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1528295988, "post_id": 50723103, "comment_id": 88454654, "body": "What do you mean? <code>- value</code> is the yml representation of an <code>Array</code> can you please explain why this causes and issue?"}, {"owner": {"reputation": 23530, "user_id": 347964, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/bE90m.png?s=128&g=1", "display_name": "flyx", "link": "https://stackoverflow.com/users/347964/flyx"}, "edited": false, "score": 2, "creation_date": 1528301912, "post_id": 50723103, "comment_id": 88458457, "body": "There are no arrays in YAML, only sequences. both <code>[&quot;&#47;bin&#47;bash&quot;]</code> and <code>- &quot;&#47;bin&#47;bash&quot;</code> are valid and equivalent representations of a YAML sequence. Implementations are forbidden to treat them differently. What&#39;s your problem with it?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1528308734, "post_id": 50723103, "comment_id": 88462085, "body": "Per the above comments: <a href=\"http://yaml-online-parser.appspot.com/?yaml=inline%3A+%5B+a1%2C+a2+%5D%0Ablock%3A%0A++-+b1%0A++-+b2&amp;type=json\" rel=\"nofollow noreferrer\">yaml-online-parser.appspot.com/&hellip;</a>"}, {"owner": {"reputation": 1208, "user_id": 1994642, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6d10dec11b43697624be6ce3b87c6a2c?s=128&d=identicon&r=PG", "display_name": "stiller_leser", "link": "https://stackoverflow.com/users/1994642/stiller-leser"}, "edited": false, "score": 0, "creation_date": 1528358261, "post_id": 50723103, "comment_id": 88479319, "body": "Thank you all for answering. I have no problem with either of them, I guess I am just not sure if K8S would handle them the same way in this specific situation ( <code>command</code> and <code>args</code>), since I can not remember seing this being written in the YAML representation (meaning <code>- &quot;&#47;bin&#47;bash&quot;</code>) anywhere."}], "owner": {"reputation": 1208, "user_id": 1994642, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6d10dec11b43697624be6ce3b87c6a2c?s=128&d=identicon&r=PG", "display_name": "stiller_leser", "link": "https://stackoverflow.com/users/1994642/stiller-leser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528393976, "creation_date": 1528295814, "last_edit_date": 1528393976, "question_id": 50723103, "link": "https://stackoverflow.com/questions/50723103/psych-to-yaml-do-not-replace-array-of-string", "title": "Psych to_yaml do not replace array of string", "body": "<p>I am doing some replacements in a kubernetes deployment file using a ruby script and the YAML functionality. My issue now is that the following string:</p>\n\n<pre><code>spec:\n  containers:\n  - name: container-name\n    image: my-image\n    imagePullPolicy: IfNotPresent\n    command: [\"/bin/bash\"]\n    args: [\"-c\", \"/bin/start.sh\"]\n</code></pre>\n\n<p>gets turned into </p>\n\n<pre><code>spec:\n    containers:\n    - name: container-name\n      image: my-image\n      imagePullPolicy: IfNotPresent\n      command:\n      - \"/bin/bash\"\n      args:\n      - \"-c\"\n      - \"/bin/start.sh\"\n</code></pre>\n\n<p>when I call <code>.to_yaml</code> on it. </p>\n\n<p>I need to preserve the <code>[]</code> for <code>command</code> and <code>args</code>. Is there a way around <code>.to_yaml</code> replacing the square brackets when the content of the \"array\" consists only of strings (since I want - for example - an array of ports to be turned into a yaml array)?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 3, "last_activity_date": 1528297008, "last_edit_date": 1528297008, "creation_date": 1528295760, "answer_id": 50723081, "question_id": 50722750, "link": "https://stackoverflow.com/questions/50722750/ruby-on-rails-api-update-record-only-if-user-logged-in-matches-email/50723081#50723081", "title": "Ruby On Rails API Update Record Only If User Logged In Matches Email", "body": "<p>Perhaps give something like this a try:</p>\n\n<pre><code>  def update\n    if authorized?\n      establishment.assign_attributes(establishment_params)\n      if establishment.valid?\n        establishment.save!\n        render json: {status: 'Information Updated'}, status: :ok\n      else\n        render json: {status: 'Not Updated', errors: establishment.errors.full_messages}, status: :unprocessable_entity\n      end\n    else\n      render json: {status: 'Not Verified'}, status: :unauthorized\n    end\n  end\n\nprivate\n\n  def authorized?\n    # Guessing at how to access email addresses. You'll need to fix to fit\n    # your actual record structures.\n    return false unless current_user &amp;&amp; current_user.email_address\n    return false unless establishment &amp;&amp; establishment.email_address\n    current_user.email_address == establishment.email_address\n  end\n\n  def establishment\n    # memoization for @establishment\n    @establishment ||= find_establishment \n  end\n\n  def find_establishment\n    # Will throw an error if Establishment not found. Guessing on \n    # params[:id]. You'll need to correct to wherever/however you \n    # pass in the Establishment id.\n    Establishment.find(params[:id])\n  end\n</code></pre>\n\n<p>In creating your API, you probably want to use <code>:unprocessable_entity</code> and <code>:unauthorized</code> in ways that are reasonably conventional. Returning status of <code>:unprocessable_entity</code> when a user is unauthorized seems unconventional to me. I would suggest that's what the status <code>:unauthorized</code> is for. </p>\n\n<p>Also, personally, I prefer the memoization approach to the <code>before_action</code> approach. In the past, I have found (in my own projects) that using <code>before_action</code> can lead to difficult-to-diagnose bugs. But then again, I am adept at creating difficult-to-diagnose bugs. So, proceed as you prefer.</p>\n\n<p>Oh, and finally, I used <code>assign_attributes</code> instead of <code>update</code>. <code>assign_attributes</code> doesn't do a save, which provides you with the opportunity to do <code>establishment.valid?</code> and handle the case where the provided attributes are not valid. In such a case, the <code>:unprocessable_entity</code> status is (appropriately) returned along with full error messages.</p>\n\n<p>If you like, you could go a little overboard and do something like:</p>\n\n<pre><code>  def update\n    authorized ? update : unauthorized\n  end\n\nprivate\n\n  def authorized?\n    return false unless current_user &amp;&amp; current_user.email_address\n    return false unless establishment &amp;&amp; establishment.email_address\n    current_user.email_address == establishment.email_address\n  end\n\n  def establishment\n    @establishment ||= find_establishment \n  end\n\n  def find_establishment\n    Establishment.find(params[:id])\n  end\n\n  def unauthorized\n    render json: {status: 'Not Verified'}, status: :unauthorized\n  end\n\n  def update\n    establishment.assign_attributes(establishment_params)\n    establishment.valid ? save_and_return : return_errors\n  end\n\n  def save_and_return\n    establishment.save!\n    render json: {status: 'Information Updated'}, status: :ok\n  end\n\n  def return_errors\n    render json: {status: 'Not Updated', errors: establishment.errors.full_messages}, status: :unprocessable_entity\n  end\n</code></pre>\n\n<p>Personally, I like a lot of tiny methods each of which has a very specific purpose as opposed to large methods that have a lot going on in them. This is a bit overboard in this particular use case. </p>\n"}], "owner": {"reputation": 137, "user_id": 9806161, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CTQd9Cj53xQ/AAAAAAAAAAI/AAAAAAAAKlw/OlIcklr5Uug/photo.jpg?sz=128", "display_name": "Ray Zuchowski", "link": "https://stackoverflow.com/users/9806161/ray-zuchowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 50723081, "answer_count": 1, "score": 0, "last_activity_date": 1528297008, "creation_date": 1528294755, "question_id": 50722750, "link": "https://stackoverflow.com/questions/50722750/ruby-on-rails-api-update-record-only-if-user-logged-in-matches-email", "title": "Ruby On Rails API Update Record Only If User Logged In Matches Email", "body": "<p>Hey everyone so i am currently writing an API on Ruby on Rails and kind of hit a brick wall on updating an establishment in the database. </p>\n\n<p>What i am trying to accomplish:</p>\n\n<p>If the user who is currently logged in has the same matching email as the email address associated with an establishment, allow that user to update the establishments information.</p>\n\n<p>Unfortunately I'm stuck on trying to figure out how to verify the current user who is logged in matches the establishments email on file. Any Help id appreciate. Thank you</p>\n\n<p>Here is my Code:</p>\n\n<pre><code>def update\n    establishment = Establishment.update(establishment_params)\n    current_user ||= User.find(session[:user_id]) if session[:user_id]\n\n    if !session[:user_id]\n      render json: {status: 'Information Updated'}, status: :ok\n    else\n      render json: {status: 'Not Verified'}, status: :unprocessable_entity\n    end\n  end\n\n  def establishment_params\n    params.permit(\n      :name,\n      :address,\n      :city,\n      :state,\n      :zipcode,\n      :phone    \n    )\n  end\n</code></pre>\n"}, {"tags": ["ruby", "sinatra"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9726814"}, "is_accepted": true, "score": 0, "last_activity_date": 1528304520, "creation_date": 1528304520, "answer_id": 50725818, "question_id": 50722433, "link": "https://stackoverflow.com/questions/50722433/why-doesnt-require-all-work-inside-a-sinatra-helper/50725818#50725818", "title": "Why doesn&#39;t require_all work inside a Sinatra helper?", "body": "<p>The solution is simply to user <code>load_all</code> instead of <code>require_all</code>.</p>\n\n<p>The code would not load not because of some lexical scoping issue but because of that <code>require_all</code> does not load twice the same file. Therefore using <code>load_all</code> solves the problem.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9726814"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 50725818, "answer_count": 1, "score": 0, "last_activity_date": 1528304520, "creation_date": 1528293858, "question_id": 50722433, "link": "https://stackoverflow.com/questions/50722433/why-doesnt-require-all-work-inside-a-sinatra-helper", "title": "Why doesn&#39;t require_all work inside a Sinatra helper?", "body": "<p>So I have a function <code>reload_config</code> inside a Sinatra helper module which is defined below in <code>helpers.rb</code>.</p>\n\n<pre><code>module Web\n  module Helpers\n    def reload_config\n      require_all 'config/*.rb'\n    end\n  end\nend\n</code></pre>\n\n<p>It is then loaded in <code>Web::Base</code> the recommended way using <code>helpers  Web::Helpers</code>.</p>\n\n<p>Inside <code>config</code> there is a file called <code>redis.rb</code> which is then loaded by <code>reload_config</code>. At least it should be. Calling on <code>require_all</code> inside my <code>config.ru</code> (top level) effectively loads the content of <code>redis.rb</code>, but inside my helper module it does not.</p>\n\n<p><code>redis.rb</code> contains assignments to <code>configatron.redis</code> (which should be accessible from any scope level right?)</p>\n\n<p>Another troubling fact: if I change the path I give to <code>require_all</code> it raises an exception.</p>\n\n<p>Also, if I write, for example, <code>puts \"Haaaaa!\"</code> inside the <code>redis.rb</code>, it is executed when loaded from <code>config.ru</code> but not when loaded from <code>helpers.rb</code>.</p>\n\n<p>What could be the cause of this ? If it has to do with lexical scoping, then why is it impossible to actually execute statements such as <code>puts</code> or <code>configatron.foo = 'hello'</code> ?</p>\n\n<p>Note that <code>require_all</code> and <code>configatron</code> are loaded in <code>config.ru</code>.</p>\n"}, {"tags": ["jquery", "html", "ruby", "ajax", "sinatra"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528293317, "post_id": 50722115, "comment_id": 88452814, "body": "do you mean <code>runFeature(params[&#39;link&#39;])</code>? What is <code>runFeature</code> what is <code>HashValue</code>? Have you actually tried anything? If so what? Did you look at the url that the ajax request actually submits to?"}, {"owner": {"reputation": 1, "user_id": 9726551, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KLnetODR0EQ/AAAAAAAAAAI/AAAAAAAAAIc/pltYPYVlKm0/photo.jpg?sz=128", "display_name": "Spencer Axford", "link": "https://stackoverflow.com/users/9726551/spencer-axford"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528293812, "post_id": 50722115, "comment_id": 88453138, "body": "Hi, link was supposed to be changed to HashValue and runFeature is a ruby function that I did not think was important, Im new to web development so I was not sure the best way to approach the problem, I tried using global variables similar to how I passed in the hash but they are not button specific."}], "answers": [{"tags": [], "owner": {"reputation": 1149, "user_id": 5189813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c07348b72ac4c884aeb7be435ec2a2d8?s=128&d=identicon&r=PG&f=1", "display_name": "Wamadahama", "link": "https://stackoverflow.com/users/5189813/wamadahama"}, "is_accepted": false, "score": 0, "last_activity_date": 1528293575, "creation_date": 1528293575, "answer_id": 50722339, "question_id": 50722115, "link": "https://stackoverflow.com/questions/50722115/pass-html-attribute-through-ajax-to-backend-ruby/50722339#50722339", "title": "Pass HTML attribute through ajax to backend ruby", "body": "<p>You should be able to access passed data from the ajax using <code>params[:link]</code> or <code>params['link']</code></p>\n"}, {"tags": [], "owner": {"reputation": 152, "user_id": 8537414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26e5657f119d17b6de0b97b6d89301b0?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Cipolla", "link": "https://stackoverflow.com/users/8537414/antonio-cipolla"}, "is_accepted": false, "score": 0, "last_activity_date": 1528296651, "creation_date": 1528296651, "answer_id": 50723379, "question_id": 50722115, "link": "https://stackoverflow.com/questions/50722115/pass-html-attribute-through-ajax-to-backend-ruby/50723379#50723379", "title": "Pass HTML attribute through ajax to backend ruby", "body": "<p>You should change the datatype value from GET to POST</p>\n\n<pre><code>  (document).ready(() =&gt; {\n  $('.trial-version').on('click', () =&gt; {\n        $.ajax({\n                    type: \"POST\",\n                    url: '/run_feature',\n                    dataType: \"script\",\n                    data: {HashValue: this.attr(\"name\")}\n        });\n     });\n});\n</code></pre>\n\n<p>and then change the function name from \n       get '/run_feature' do \nto\n       post 'run_feature' do</p>\n"}], "owner": {"reputation": 1, "user_id": 9726551, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KLnetODR0EQ/AAAAAAAAAAI/AAAAAAAAAIc/pltYPYVlKm0/photo.jpg?sz=128", "display_name": "Spencer Axford", "link": "https://stackoverflow.com/users/9726551/spencer-axford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528296651, "creation_date": 1528292840, "last_edit_date": 1528293546, "question_id": 50722115, "link": "https://stackoverflow.com/questions/50722115/pass-html-attribute-through-ajax-to-backend-ruby", "title": "Pass HTML attribute through ajax to backend ruby", "body": "<p>I am dynamically creating buttons in HTML using Sinatra, there is a button for every Key in a Hash at any given runtime there could be more or less buttons due to the changing size of the Hash. When I click a button I want to pass the value associated with that Key back to my Ruby backend.</p>\n\n<p>My Ruby code is </p>\n\n<pre><code>#app.rb\nrequire 'sinatra'\nrequire 'net/http'\nrequire_relative './hashmaker.rb'\n\nenable :sessions\nset :views, \"views\"\nset :bind, '0.0.0.0'\n\nget '/' do\n\n    @hash = hashmaker.make_crazy_changing_hash(from_a_directory_of_files)\nerb: index\nend\n\nget \"/run_feature\" do \nreturn runFeature(HashValue)\n</code></pre>\n\n<p>I made a table in HTML that has a button for each hash key</p>\n\n<pre><code>    &lt;html&gt;\n    &lt;head&gt;\n            &lt;title&gt;Test&lt;/title&gt;\n            &lt;script src=\"https://code.jquery.com/jquery-1.10.2.min.js\"&gt; . \n&lt;/script&gt;\n            &lt;script src=\"ajax.js\"&gt;&lt;/script&gt;\n            &lt;link href=\"style.css\" type=\"text/css\" rel=\"stylesheet\"&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;div style=\"overflow-x:auto;\"&gt;\n        &lt;table&gt;\n                &lt;% @hash.keys.each do |feat| %&gt;\n                &lt;tr&gt;\n                        &lt;td&gt;&lt;%= feat %&gt;&lt;/td&gt;\n                &lt;% @hash[feat].each do |elem| %&gt;\n                  &lt;td&gt;\n                         &lt;button class=\"trial-version\" name=&lt;%= elem[1] %&gt;&gt;&lt;%= elem[0] %&gt;&lt;/button&gt;\n                  &lt;/td&gt;\n                &lt;% end %&gt;\n                &lt;/tr&gt;\n                &lt;% end %&gt;\n        &lt;/table&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I have attempted to add the value of the hash as the name of the button, then I want to pass that name, using ajax in my jquery onclick method to the Ruby backend /run_feature get.</p>\n\n<p>My current ajax looks like this currently:</p>\n\n<pre><code>  (document).ready(() =&gt; {\n  $('.trial-version').on('click', () =&gt; {\n        $.ajax({\n                    type: \"GET\",\n                    url: '/run_feature',\n                    dataType: \"script\",\n                    data: {HashValue: this.attr(\"name\")}\n        });\n  });\n});\n</code></pre>\n\n<p>How do I properly get this name attribute through to my backend method?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1528294544, "post_id": 50721844, "comment_id": 88453641, "body": "Ruby magic is often the problem, not the solution :-)"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1528577715, "post_id": 50721844, "comment_id": 88563751, "body": "@Stefan Golden words. I will quote it and put it at my workplace! :D"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 4, "last_activity_date": 1528292341, "last_edit_date": 1528292341, "creation_date": 1528292110, "answer_id": 50721872, "question_id": 50721844, "link": "https://stackoverflow.com/questions/50721844/ruby-take-method-name-as-an-argument-then-message-it-to-an-object/50721872#50721872", "title": "Ruby, take method name as an argument, then message it to an object", "body": "<p>Try <a href=\"https://ruby-doc.org/core/Object.html#method-i-public_send\" rel=\"nofollow noreferrer\"><code>Object#public_send</code></a>:</p>\n\n<pre><code>def foo(arg1, arg2, some_method_name)\n  arg1.public_send(some_method_name, arg2)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "is_accepted": false, "score": 0, "last_activity_date": 1528292390, "creation_date": 1528292390, "answer_id": 50721966, "question_id": 50721844, "link": "https://stackoverflow.com/questions/50721844/ruby-take-method-name-as-an-argument-then-message-it-to-an-object/50721966#50721966", "title": "Ruby, take method name as an argument, then message it to an object", "body": "<p>In Ruby, method calls are just messages sent to the object.</p>\n\n<p>You're looking for </p>\n\n<pre><code>def foo(arg1, arg2, some_method_name)\n  arg1.send(some_method_name.to_s, arg2)\nend\n</code></pre>\n\n<p>Note that this method can access both public and private methods of the class; this is probably desired for testing, but if you want it to fail for private methods, just use <code>public_send</code></p>\n\n<pre><code>def foo(arg1, arg2, some_method_name)\n  arg1.public_send(some_method_name.to_s, arg2)\nend\n</code></pre>\n\n<p>If you may have an existing send method defined on that object, just replace <code>send</code> with <code>__send__</code></p>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.5.1/Object.html#method-i-send\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.5.1/Object.html#method-i-send</a> for more information</p>\n"}, {"tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": false, "score": 0, "last_activity_date": 1528293972, "creation_date": 1528293972, "answer_id": 50722469, "question_id": 50721844, "link": "https://stackoverflow.com/questions/50721844/ruby-take-method-name-as-an-argument-then-message-it-to-an-object/50722469#50722469", "title": "Ruby, take method name as an argument, then message it to an object", "body": "<p>Will also suggest to rather have such method where you can supply variable arguments to method</p>\n\n<pre><code>def foo(arg1, method_name, *args)\n  arg1.public_send(method_name, *args) # dynamically dispatch the method with the relevant arguments\nend\nfoo(\"kiddorails\", :upcase)        # KIDDORAILS\nfoo(\"kiddorails\", :gsub, 's', '') # kiddorail\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9903602, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ruby Ruby", "link": "https://stackoverflow.com/users/9903602/ruby-ruby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1528293972, "creation_date": 1528292028, "question_id": 50721844, "link": "https://stackoverflow.com/questions/50721844/ruby-take-method-name-as-an-argument-then-message-it-to-an-object", "title": "Ruby, take method name as an argument, then message it to an object", "body": "<p>what is the best way to create a method with a such behavior?</p>\n\n<pre><code>def foo(arg1, arg2, some_method_name)\n  arg1.some_method_name(arg2)\nend\n</code></pre>\n\n<p>I know there should be some Ruby magic, simple and pure.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1528287767, "post_id": 50719697, "comment_id": 88449045, "body": "Can <code>a</code> or <code>b</code> contain duplicates?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1528298927, "post_id": 50719697, "comment_id": 88456677, "body": "1. Your next-to-last line (<code>res_array</code>) should follow what is now your last line (<code>end</code>); 2. <code>present?</code> is unnecessary, as <code>find_index</code> returns <code>nil</code> or a truthy value (an index); 3. one Ruby convention is for the name of a block variable to begin with an underscore (e.g., <code>_element</code> or, commonly, <code>_</code>) if the variable is not used in the block calculation, but  here <code>_element</code> Is used in the calculation."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528300039, "post_id": 50719697, "comment_id": 88457402, "body": "Please answer @Stefan\u2019s question. Could one have <code>a = [1,1]</code> and <code>b = [1,1]</code>? If so, should the return value be <code>[0,0]</code> or <code>[0,1]</code>? Please edit your question to state whether duplicates are permitted, and if they are, whether they are \u201cused up\u201d when there is a match. Moreover, when (as here) someone asks for clarification of a question, it is both rude and unprofessional to leave their comment unanswered."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1528355287, "post_id": 50719697, "comment_id": 88477636, "body": "What is &quot;subarray&quot;? What is &quot;main array&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1528291740, "post_id": 50719734, "comment_id": 88451704, "body": "@Stefan\u2019s solution is <code>O(N)</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1528292086, "post_id": 50719734, "comment_id": 88451956, "body": "Yep. In hindsight, it was obvious :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 6, "last_activity_date": 1528285852, "creation_date": 1528285852, "answer_id": 50719734, "question_id": 50719697, "link": "https://stackoverflow.com/questions/50719697/how-to-get-the-indices-of-subarray-in-large-array/50719734#50719734", "title": "How to get the indices of subarray in large array", "body": "<pre><code>b.map { |e| a.index(e) }.compact\n#\u21d2 [2, 4, 7, 9]\n</code></pre>\n\n<p>or, more concise:</p>\n\n<pre><code>b.map(&amp;a.method(:index)).compact\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1528291768, "post_id": 50720027, "comment_id": 88451723, "body": "This is definitely a way to go if performance is to be taken into account."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 7, "last_activity_date": 1528295201, "last_edit_date": 1528295201, "creation_date": 1528286860, "answer_id": 50720027, "question_id": 50719697, "link": "https://stackoverflow.com/questions/50719697/how-to-get-the-indices-of-subarray-in-large-array/50720027#50720027", "title": "How to get the indices of subarray in large array", "body": "<p>If performance matters (i.e. if your arrays are <em>huge</em>), you can build a hash of all number-index pairs in <code>a</code>, using <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-each_with_index\" rel=\"nofollow noreferrer\"><code>each_with_index</code></a> and <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-to_h\" rel=\"nofollow noreferrer\"><code>to_h</code></a>:</p>\n\n<pre><code>a.each_with_index.to_h\n#=&gt; {1=&gt;0, 2=&gt;1, 3=&gt;2, 4=&gt;3, 5=&gt;4, 6=&gt;5, 7=&gt;6, 8=&gt;7, 9=&gt;8, 10=&gt;9}\n</code></pre>\n\n<p>A hash allows fetching the values (i.e. indices) for the numbers in <code>b</code> much faster (as opposed to traversing an array each time), e.g. via <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-values_at\" rel=\"nofollow noreferrer\"><code>values_at</code></a>:</p>\n\n<pre><code>a.each_with_index.to_h.values_at(*b)\n#=&gt; [2, 4, 7, 9, nil]\n</code></pre>\n\n<p>Use <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-compact\" rel=\"nofollow noreferrer\"><code>compact</code></a> to eliminate <code>nil</code> values:</p>\n\n<pre><code>a.each_with_index.to_h.values_at(*b).compact\n#=&gt; [2, 4, 7, 9]\n</code></pre>\n\n<p>or alternatively <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-slice\" rel=\"nofollow noreferrer\"><code>slice</code></a> and <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-values\" rel=\"nofollow noreferrer\"><code>values</code></a>:</p>\n\n<pre><code>a.each_with_index.to_h.slice(*b).values\n#=&gt; [2, 4, 7, 9]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 7755288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d667a4f6415eddb5abbd701b6296eadc?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh V", "link": "https://stackoverflow.com/users/7755288/rajesh-v"}, "is_accepted": false, "score": 0, "last_activity_date": 1528287556, "creation_date": 1528287556, "answer_id": 50720242, "question_id": 50719697, "link": "https://stackoverflow.com/questions/50719697/how-to-get-the-indices-of-subarray-in-large-array/50720242#50720242", "title": "How to get the indices of subarray in large array", "body": "<p>Here is another simpler solution, </p>\n\n<pre><code>indxs = a.each_with_index.to_h\n(a&amp;b).map{|e| indxs[e]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1528828384, "last_edit_date": 1528828384, "creation_date": 1528785660, "answer_id": 50810728, "question_id": 50719697, "link": "https://stackoverflow.com/questions/50719697/how-to-get-the-indices-of-subarray-in-large-array/50810728#50810728", "title": "How to get the indices of subarray in large array", "body": "<p>All the answers so far traverse all of <code>a</code> once (@Stefan's) or traverse all or part of <code>a</code> <code>b.size</code> times. My answer traverses part or all of <code>a</code> once. It is relatively efficient when <code>a</code> is large, <code>b</code> is small relative to <code>a</code> and all elements in <code>b</code> appear in <code>a</code>.</p>\n\n<p>My solution is particularly efficient when <code>a</code> is ordered in such a way that the elements of <code>b</code> typically appear towards the beginning of <code>a</code>. For example, <code>a</code> might be a list of last names sorted by decreasing frequency of occurrence in the general population (e.g., <code>['smith', 'jones',...]</code>) and <code>b</code> is a list of names to look up in <code>a</code>.</p>\n\n<p><code>a</code> and <code>b</code> may contain duplicates<sup>1</sup> and not all elements of <code>b</code> are guaranteed to be in <code>a</code>. I assume <code>b</code> is not empty.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>require 'set'\n\ndef lookup_index(a, b)\n  b_set = b.to_set\n  b_hash = {}\n  a.each_with_index do |n,i|\n    next unless b_set.include?(n)\n    b_hash[n] = i\n    b_set.delete(n)\n    break if b_set.empty?\n  end\n  b_hash.values_at(*b)\nend\n</code></pre>\n\n<p>I converted <code>b</code> to a set to make lookups comparable in speed to hash lookups (which should not be surprising considering that sets are implemented with an underlying hash). Hash lookups are very fast, of course.</p>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>a = [1,2,3,4,5,6,7,8,9,10,8]\nb = [3,5,8,10,11,5]\n</code></pre>\n\n<p>Note that in this example both <code>a</code> and <code>b</code> contain duplicates and <code>11</code> in <code>b</code> is not present in <code>a</code>.</p>\n\n<pre><code>lookup_index(a, b)\n  #=&gt; [2, 4, 7, 9, nil, 4]\n</code></pre>\n\n<p>Observe the array returned contains the index <code>4</code> twice, once for each <code>5</code> in <code>b</code>. Also, the array contains <code>nil</code> at index <code>4</code> to show that it is <code>b[4] #=&gt; 11</code> that does not appear in <code>a</code>. Without the <code>nil</code> placeholder there would be no means to map the elements of <code>b</code> to indices in <code>a</code>. If, however, the <code>nil</code> placeholder is not desired, one may replace <code>b_hash.values_at(*b)</code> with <code>b_hash.values_at(*b).compact</code>, or, if duplicates are unwanted, with <code>b_hash.values_at(*b).compact.uniq</code>. </p>\n\n<p>As a second example suppose we are given the following.</p>\n\n<pre><code>a = [*1..10_000]\nb = 10.times.map { rand(100) }.shuffle\n  #=&gt; [30, 62, 36, 24, 41, 27, 83, 61, 15, 55]\nlookup_index(a, b)\n  #=&gt; [29, 61, 35, 23, 40, 26, 82, 60, 14, 54]\n</code></pre>\n\n<p>Here the solution was found after the first <code>83</code> elements of <code>a</code> were enumerated.</p>\n\n<p><sup>1 My solution would be no more efficient if duplicates were not permitted in <code>a</code> and/or <code>b</code>.</sup></p>\n"}], "owner": {"reputation": 135, "user_id": 3289271, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/16e85c82d6452e78bb26ac140d9a42fa?s=128&d=identicon&r=PG&f=1", "display_name": "Ghanshyam Anand", "link": "https://stackoverflow.com/users/3289271/ghanshyam-anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 50719734, "answer_count": 4, "score": 0, "last_activity_date": 1528828384, "creation_date": 1528285743, "last_edit_date": 1528355275, "question_id": 50719697, "link": "https://stackoverflow.com/questions/50719697/how-to-get-the-indices-of-subarray-in-large-array", "title": "How to get the indices of subarray in large array", "body": "<p>I have two arrays as follows:</p>\n\n<pre><code>a = [1,2,3,4,5,6,7,8,9,10]\nb = [3,5,8,10,11]\n</code></pre>\n\n<p>I want to find the index of subarray in main array if a number is present. The expected output is:</p>\n\n<pre><code>res = [2,4,7,9] \n</code></pre>\n\n<p>I have done as follows:</p>\n\n<pre><code>[3,5,8,10,11].each do |_element|\n  res_array = []\n  if [1,2,3,4,5,6,7,8,9,10].find_index(_element).present?\n   res_array &lt;&lt; (header_array.find_index(_element)\n  end\n  res_array\n end\n</code></pre>\n\n<p>But I think there is a better approach to do this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1095, "user_id": 1451128, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/7MUJn.jpg?s=128&g=1", "display_name": "Raju akula", "link": "https://stackoverflow.com/users/1451128/raju-akula"}, "edited": false, "score": 0, "creation_date": 1528282281, "post_id": 50718264, "comment_id": 88445422, "body": "yes, agree. But could not achieve my expected result through only <code>where</code> and need to do operation over the AR collection it should return the AR collection but not array."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1095, "user_id": 1451128, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/7MUJn.jpg?s=128&g=1", "display_name": "Raju akula", "link": "https://stackoverflow.com/users/1451128/raju-akula"}, "edited": false, "score": 0, "creation_date": 1528282347, "post_id": 50718264, "comment_id": 88445461, "body": "@Rajuakula you asked - I answered. Ask a new question showing specific issue, so that you can get specific answer."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1095, "user_id": 1451128, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/7MUJn.jpg?s=128&g=1", "display_name": "Raju akula", "link": "https://stackoverflow.com/users/1451128/raju-akula"}, "edited": false, "score": 1, "creation_date": 1528282411, "post_id": 50718264, "comment_id": 88445512, "body": "@Rajuakula also, I noticed you never accept the answers to your questions - I suggest you start accepting the correct answers if they work for you - this way you let the community know that your problem is solved."}, {"owner": {"reputation": 1095, "user_id": 1451128, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/7MUJn.jpg?s=128&g=1", "display_name": "Raju akula", "link": "https://stackoverflow.com/users/1451128/raju-akula"}, "edited": false, "score": 0, "creation_date": 1528282765, "post_id": 50718264, "comment_id": 88445774, "body": "its not solve my problem. <code>@projects.reject!{|p| p.status=&#39;failed&#39;}</code> also will return the class as <code>ActiveRecord::Relation</code>. Of course definitely will accept the right answer if its solve my problem. thanks"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 1, "last_activity_date": 1528282804, "last_edit_date": 1592644375, "creation_date": 1528281326, "answer_id": 50718264, "question_id": 50718174, "link": "https://stackoverflow.com/questions/50718174/remove-skip-few-objects-from-activerecord-relation-collection-in-rails4/50718264#50718264", "title": "Remove/skip few objects from ActiveRecord_Relation collection in rails4", "body": "<p>You would be better of using the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-where\" rel=\"nofollow noreferrer\"><code>ActiveRecord::QueryMethods#where</code></a>:</p>\n<pre><code>@project.where.not(status: :failed)\n</code></pre>\n<p><code>@projects.class</code> would return you a <code>ActiveRecord::Relation</code> object, which does not implement <code>reject!</code> method, thus you can't &quot;modify&quot; it as you try. And it won't make sense to be able to do so anyway.</p>\n<h1>EDIT: (since the OP was edited)</h1>\n<p>I am sure your thing could be achieved by using query interface, but since you can not provide the concrete example, here's a non-efficient way, but why would you care about efficiency, right?</p>\n<pre><code>project_ids = @projects.reject { |p| p.status == &quot;failed&quot; }.map(&amp;:id)\nnew_at_collection = Product.where(id: project_ids)\n</code></pre>\n"}], "owner": {"reputation": 1095, "user_id": 1451128, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/7MUJn.jpg?s=128&g=1", "display_name": "Raju akula", "link": "https://stackoverflow.com/users/1451128/raju-akula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528282804, "creation_date": 1528281028, "last_edit_date": 1528282440, "question_id": 50718174, "link": "https://stackoverflow.com/questions/50718174/remove-skip-few-objects-from-activerecord-relation-collection-in-rails4", "title": "Remove/skip few objects from ActiveRecord_Relation collection in rails4", "body": "<p>If you use select!,reject!,delete_if on AR collection</p>\n\n<p><code>@projects = Project.all</code> (has 3 records with status column value 'failed')</p>\n\n<pre><code>@projects.reject!{|p| p.status==\"failed\"} (has 0 records now)\n</code></pre>\n\n<p>But <code>@projects.count</code> => giving the result as 3 still</p>\n\n<p>Means If we try to do any querying on @projects which is still using old collection(3 records).</p>\n\n<p>Any suggestions? why its using old collection since have already filtered it by reject operation. and don't want it to use old AR collection.</p>\n\n<p>Using AR <code>where</code>, we can achieve it but in my case, using <code>where</code> only could not achieve my result and need to some operation over the AR collection and it should return AR only not Array.  </p>\n"}, {"tags": ["json", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1528280649, "post_id": 50717867, "comment_id": 88444428, "body": "<i>Sidenote:</i> the object you have posted is a ruby hash, not a JSON."}], "answers": [{"comments": [{"owner": {"reputation": 1990, "user_id": 4952770, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/GMmxH.jpg?s=128&g=1", "display_name": "Junaid Farooq", "link": "https://stackoverflow.com/users/4952770/junaid-farooq"}, "edited": false, "score": 0, "creation_date": 1528285630, "post_id": 50718011, "comment_id": 88447574, "body": "Okay I am extending it a little bit, If After getting that <code>Path</code> ones, As you see there are few tag values, And If I want to get all those where You can say Tag&#39;s Anger has value 1?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 1990, "user_id": 4952770, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/GMmxH.jpg?s=128&g=1", "display_name": "Junaid Farooq", "link": "https://stackoverflow.com/users/4952770/junaid-farooq"}, "edited": false, "score": 0, "creation_date": 1528287097, "post_id": 50718011, "comment_id": 88448581, "body": "Updated my answer"}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1528287090, "last_edit_date": 1528287090, "creation_date": 1528280520, "answer_id": 50718011, "question_id": 50717867, "link": "https://stackoverflow.com/questions/50717867/filtering-json-with-different-head-value-in-ruby/50718011#50718011", "title": "filtering json with different head value in ruby", "body": "<p>You can use <a href=\"https://apidock.com/ruby/Hash/select\" rel=\"nofollow noreferrer\">select</a> on Hash for this:</p>\n\n<pre><code>hash = {\"1515599671\"=&gt;{\"Path\"=&gt;\"images/1515599671.jpeg\", \"Tags\"=&gt;{\"Anger\"=&gt;0, \"Disgust\"=&gt;0, \"FaceDetected\"=&gt;1, \"Fear\"=&gt;0, \"Happiness\"=&gt;0, \"LargeFaceDetected\"=&gt;0, \"MotionDetected\"=&gt;0, \"Neutral\"=&gt;0, \"Sadness\"=&gt;0, \"Surprise\"=&gt;0}}, \"1525357331\"=&gt;{\"Tags\"=&gt;{\"Anger\"=&gt;0, \"Disgust\"=&gt;0, \"FaceDetected\"=&gt;0, \"Fear\"=&gt;0, \"Happiness\"=&gt;0, \"LargeFaceDetected\"=&gt;0, \"MotionDetected\"=&gt;0, \"Neutral\"=&gt;0, \"Sadness\"=&gt;0, \"Surprise\"=&gt;0}}, \"1525357336\"=&gt;{\"Tags\"=&gt;{\"Anger\"=&gt;0, \"Disgust\"=&gt;0, \"FaceDetected\"=&gt;0, \"Fear\"=&gt;0, \"Happiness\"=&gt;0, \"LargeFaceDetected\"=&gt;0, \"MotionDetected\"=&gt;0, \"Neutral\"=&gt;0, \"Sadness\"=&gt;0, \"Surprise\"=&gt;0}}, \"1525357341\"=&gt;{\"Tags\"=&gt;{\"Anger\"=&gt;0, \"Disgust\"=&gt;0, \"FaceDetected\"=&gt;0, \"Fear\"=&gt;0, \"Happiness\"=&gt;0, \"LargeFaceDetected\"=&gt;0, \"MotionDetected\"=&gt;0, \"Neutral\"=&gt;0, \"Sadness\"=&gt;0, \"Surprise\"=&gt;0}}, \"1525357346\"=&gt;{\"Tags\"=&gt;{\"Anger\"=&gt;0, \"Disgust\"=&gt;0, \"FaceDetected\"=&gt;0, \"Fear\"=&gt;0, \"Happiness\"=&gt;0, \"LargeFaceDetected\"=&gt;0, \"MotionDetected\"=&gt;0, \"Neutral\"=&gt;0, \"Sadness\"=&gt;0, \"Surprise\"=&gt;0}}, \"1525357448\"=&gt;{\"Path\"=&gt;\"images/1525357448.jpeg\", \"Tags\"=&gt;{\"Anger\"=&gt;0, \"Disgust\"=&gt;0, \"FaceDetected\"=&gt;1, \"Fear\"=&gt;0, \"Happiness\"=&gt;0, \"LargeFaceDetected\"=&gt;0, \"MotionDetected\"=&gt;0, \"Neutral\"=&gt;0, \"Sadness\"=&gt;0, \"Surprise\"=&gt;0}}, \"1525357449\"=&gt;{\"Path\"=&gt;\"images/1525357449.jpeg\", \"Tags\"=&gt;{\"Anger\"=&gt;0, \"Disgust\"=&gt;0, \"FaceDetected\"=&gt;1, \"Fear\"=&gt;0, \"Happiness\"=&gt;0, \"LargeFaceDetected\"=&gt;0, \"MotionDetected\"=&gt;0, \"Neutral\"=&gt;0, \"Sadness\"=&gt;0, \"Surprise\"=&gt;0}}}\n\nhash.select { |key, value| value['Path'] }    # Returns key-value pairs only with 'Path' set in its value. Modify the condition to remove empty strings, if you need to\n =&gt; {\"1515599671\"=&gt;{\"Path\"=&gt;\"images/1515599671.jpeg\", \"Tags\"=&gt;{\"Anger\"=&gt;0, \"Disgust\"=&gt;0, \"FaceDetected\"=&gt;1, \"Fear\"=&gt;0, \"Happiness\"=&gt;0, \"LargeFaceDetected\"=&gt;0, \"MotionDetected\"=&gt;0, \"Neutral\"=&gt;0, \"Sadness\"=&gt;0, \"Surprise\"=&gt;0}}, \"1525357448\"=&gt;{\"Path\"=&gt;\"images/1525357448.jpeg\", \"Tags\"=&gt;{\"Anger\"=&gt;0, \"Disgust\"=&gt;0, \"FaceDetected\"=&gt;1, \"Fear\"=&gt;0, \"Happiness\"=&gt;0, \"LargeFaceDetected\"=&gt;0, \"MotionDetected\"=&gt;0, \"Neutral\"=&gt;0, \"Sadness\"=&gt;0, \"Surprise\"=&gt;0}}, \"1525357449\"=&gt;{\"Path\"=&gt;\"images/1525357449.jpeg\", \"Tags\"=&gt;{\"Anger\"=&gt;0, \"Disgust\"=&gt;0, \"FaceDetected\"=&gt;1, \"Fear\"=&gt;0, \"Happiness\"=&gt;0, \"LargeFaceDetected\"=&gt;0, \"MotionDetected\"=&gt;0, \"Neutral\"=&gt;0, \"Sadness\"=&gt;0, \"Surprise\"=&gt;0}}}\n\n\n# Question update\nhash.select { |key, value| value['Path'] &amp;&amp; value['Tags'] &amp;&amp; (value['Tags']['Anger'] == 1) }    # Select those with 'Path' set and 'Tags.Anger' with value 1\n =&gt; {}     # You don't have any such objects in your example\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1990, "user_id": 4952770, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/GMmxH.jpg?s=128&g=1", "display_name": "Junaid Farooq", "link": "https://stackoverflow.com/users/4952770/junaid-farooq"}, "edited": false, "score": 0, "creation_date": 1528280831, "post_id": 50718042, "comment_id": 88444547, "body": "I requested for a json with only Path values included"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1990, "user_id": 4952770, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/GMmxH.jpg?s=128&g=1", "display_name": "Junaid Farooq", "link": "https://stackoverflow.com/users/4952770/junaid-farooq"}, "edited": false, "score": 1, "creation_date": 1528281378, "post_id": 50718042, "comment_id": 88444891, "body": "Then <code>hash.iteraptor.select(&#47;\\APath\\z&#47;)</code> would do. Also, again, it\u2019s <b>not</b> a JSON by any mean, it\u2019s a ruby hash."}, {"owner": {"reputation": 1990, "user_id": 4952770, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/GMmxH.jpg?s=128&g=1", "display_name": "Junaid Farooq", "link": "https://stackoverflow.com/users/4952770/junaid-farooq"}, "edited": false, "score": 0, "creation_date": 1528281435, "post_id": 50718042, "comment_id": 88444922, "body": "Okay, do you really think for this purpose its good to use an external lib?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1990, "user_id": 4952770, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/GMmxH.jpg?s=128&g=1", "display_name": "Junaid Farooq", "link": "https://stackoverflow.com/users/4952770/junaid-farooq"}, "edited": false, "score": 0, "creation_date": 1528281555, "post_id": 50718042, "comment_id": 88444995, "body": "It seems you were unable to come to solution yourself; that usually means that using a <code>gem</code> is a good way to go. If you don\u2019t want to use an external lib, feel free to copy-paste the solution from there (you might notice it\u2019s not as trivial.)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1528280597, "creation_date": 1528280597, "answer_id": 50718042, "question_id": 50717867, "link": "https://stackoverflow.com/questions/50717867/filtering-json-with-different-head-value-in-ruby/50718042#50718042", "title": "filtering json with different head value in ruby", "body": "<p>You can use <a href=\"https://github.com/am-kantox/iteraptor\" rel=\"nofollow noreferrer\"><code>iteraptor</code></a> gem for that purpose:</p>\n\n<pre><code>require 'iteraptor'\nhash = { ... }\n\nkeys = hash.iteraptor.select(/\\APath\\z/).keys\n#\u21d2 [\"1515599671\", \"1525357448\", \"1525357449\"]\n\nhash.select { |k, _| keys.include? k }\n</code></pre>\n"}], "owner": {"reputation": 1990, "user_id": 4952770, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/GMmxH.jpg?s=128&g=1", "display_name": "Junaid Farooq", "link": "https://stackoverflow.com/users/4952770/junaid-farooq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 50718011, "answer_count": 2, "score": -3, "last_activity_date": 1528291826, "creation_date": 1528280096, "last_edit_date": 1528291826, "question_id": 50717867, "link": "https://stackoverflow.com/questions/50717867/filtering-json-with-different-head-value-in-ruby", "title": "filtering json with different head value in ruby", "body": "<p>I have this kind of hash</p>\n\n<pre><code>{\"1515599671\"=&gt;\n  {\"Path\"=&gt;\"images/1515599671.jpeg\",\n   \"Tags\"=&gt;\n    {\"Anger\"=&gt;0,\n     \"Disgust\"=&gt;0,\n     \"FaceDetected\"=&gt;1,\n     \"Fear\"=&gt;0,\n     \"Happiness\"=&gt;0,\n     \"LargeFaceDetected\"=&gt;0,\n     \"MotionDetected\"=&gt;0,\n     \"Neutral\"=&gt;0,\n     \"Sadness\"=&gt;0,\n     \"Surprise\"=&gt;0}},\n \"1525357331\"=&gt;\n  {\"Tags\"=&gt;\n    {\"Anger\"=&gt;0,\n     \"Disgust\"=&gt;0,\n     \"FaceDetected\"=&gt;0,\n     \"Fear\"=&gt;0,\n     \"Happiness\"=&gt;0,\n     \"LargeFaceDetected\"=&gt;0,\n     \"MotionDetected\"=&gt;0,\n     \"Neutral\"=&gt;0,\n     \"Sadness\"=&gt;0,\n     \"Surprise\"=&gt;0}},\n \"1525357336\"=&gt;\n  {\"Tags\"=&gt;\n    {\"Anger\"=&gt;0,\n     \"Disgust\"=&gt;0,\n     \"FaceDetected\"=&gt;0,\n     \"Fear\"=&gt;0,\n     \"Happiness\"=&gt;0,\n     \"LargeFaceDetected\"=&gt;0,\n     \"MotionDetected\"=&gt;0,\n     \"Neutral\"=&gt;0,\n     \"Sadness\"=&gt;0,\n     \"Surprise\"=&gt;0}},\n \"1525357341\"=&gt;\n  {\"Tags\"=&gt;\n    {\"Anger\"=&gt;0,\n     \"Disgust\"=&gt;0,\n     \"FaceDetected\"=&gt;0,\n     \"Fear\"=&gt;0,\n     \"Happiness\"=&gt;0,\n     \"LargeFaceDetected\"=&gt;0,\n     \"MotionDetected\"=&gt;0,\n     \"Neutral\"=&gt;0,\n     \"Sadness\"=&gt;0,\n     \"Surprise\"=&gt;0}},\n \"1525357346\"=&gt;\n  {\"Tags\"=&gt;\n    {\"Anger\"=&gt;0,\n     \"Disgust\"=&gt;0,\n     \"FaceDetected\"=&gt;0,\n     \"Fear\"=&gt;0,\n     \"Happiness\"=&gt;0,\n     \"LargeFaceDetected\"=&gt;0,\n     \"MotionDetected\"=&gt;0,\n     \"Neutral\"=&gt;0,\n     \"Sadness\"=&gt;0,\n     \"Surprise\"=&gt;0}},\n \"1525357448\"=&gt;\n  {\"Path\"=&gt;\"images/1525357448.jpeg\",\n   \"Tags\"=&gt;\n    {\"Anger\"=&gt;0,\n     \"Disgust\"=&gt;0,\n     \"FaceDetected\"=&gt;1,\n     \"Fear\"=&gt;0,\n     \"Happiness\"=&gt;0,\n     \"LargeFaceDetected\"=&gt;0,\n     \"MotionDetected\"=&gt;0,\n     \"Neutral\"=&gt;0,\n     \"Sadness\"=&gt;0,\n     \"Surprise\"=&gt;0}},\n \"1525357449\"=&gt;\n  {\"Path\"=&gt;\"images/1525357449.jpeg\",\n   \"Tags\"=&gt;\n    {\"Anger\"=&gt;0,\n     \"Disgust\"=&gt;0,\n     \"FaceDetected\"=&gt;1,\n     \"Fear\"=&gt;0,\n     \"Happiness\"=&gt;0,\n     \"LargeFaceDetected\"=&gt;0,\n     \"MotionDetected\"=&gt;0,\n     \"Neutral\"=&gt;0,\n     \"Sadness\"=&gt;0,\n     \"Surprise\"=&gt;0}}}\n</code></pre>\n\n<p>In which many of the values don't have a <code>Path</code> and few of them have a path, I want to filter this hash to get a hash in which there will be only those values which have Path within them, I have tried to do .each and map but its not working on it? any help will be appreciated thanks</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1528288318, "post_id": 50717794, "comment_id": 88449407, "body": "See the <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-c-new-label-Common+gotchas\" rel=\"nofollow noreferrer\">Common gotchas</a> section in the docs for <code>Array.new</code>."}], "answers": [{"tags": [], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "is_accepted": true, "score": 3, "last_activity_date": 1528280168, "creation_date": 1528280168, "answer_id": 50717889, "question_id": 50717794, "link": "https://stackoverflow.com/questions/50717794/how-to-push-element-to-array-in-array/50717889#50717889", "title": "How to push element to array in array?", "body": "<p>The problem isn't the way you're pushing, it's the way you're creating the array.</p>\n\n<p>The array is initialised with 5 <em>references to the same array</em>, so when you modify one of them, all of the other copies change too.</p>\n\n<p>You need to create the array using a different method, so that you create five <em>different arrays</em> rather than five <em>copies of the same array</em>. This can be done like so:</p>\n\n<pre><code>arr = Array.new(5) { [] }\n</code></pre>\n\n<p>The block (the bit between <code>{}</code>) is executed to create all 5 array items, so you end up with 5 different arrays.</p>\n\n<p>Your code then works as expected:</p>\n\n<pre><code>arr = Array.new(5) { [] }\n=&gt; [[], [], [], [], []]\n\narr[3].push(\"foo\")\n=&gt; [\"foo\"]\n\narr\n=&gt; [[], [], [], [\"foo\"], []]\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 8567436, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O7Cd0.png?s=128&g=1", "display_name": "luke.hawk", "link": "https://stackoverflow.com/users/8567436/luke-hawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 50717889, "answer_count": 1, "score": 0, "last_activity_date": 1528280168, "creation_date": 1528279883, "question_id": 50717794, "link": "https://stackoverflow.com/questions/50717794/how-to-push-element-to-array-in-array", "title": "How to push element to array in array?", "body": "<p>Let's say I would like to create a new array of arrays </p>\n\n<pre><code>arr = Array.new(5,[])\n=&gt; [[], [], [], [], []]\n</code></pre>\n\n<p>How can I specifically push an element to one of those arrays? </p>\n\n<p>When I try to push to only one of the arrays, the value is always added to all of them:</p>\n\n<pre><code>arr[3].push(\"foo\")\n=&gt; [\"foo\"]\n\narr\n=&gt; [[\"foo\"], [\"foo\"], [\"foo\"], [\"foo\"], [\"foo\"]]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1393, "user_id": 975932, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/428d0b7ba2b58e8d5a996fc7342142b2?s=128&d=identicon&r=PG", "display_name": "Umair Abid", "link": "https://stackoverflow.com/users/975932/umair-abid"}, "edited": false, "score": 0, "creation_date": 1528279371, "post_id": 50716713, "comment_id": 88443611, "body": "if you only need to list them in groued order why are you applying a where condition?"}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "edited": false, "score": 0, "creation_date": 1528281126, "post_id": 50717881, "comment_id": 88444723, "body": "Now showing triple not double see the query from log <code>SELECT COUNT(*) FROM &quot;jobs&quot; INNER JOIN &quot;job_categories&quot; ON &quot;job_categories&quot;.&quot;job_id&quot; = &quot;jobs&quot;.&quot;id&quot; INNER JOIN &quot;job_categories&quot; &quot;job_categories_jobs_join&quot; ON &quot;job_categories_jobs_join&quot;.&quot;job_id&quot; = &quot;jobs&quot;.&quot;id&quot; INNER JOIN &quot;categories&quot; ON &quot;categories&quot;.&quot;id&quot; = &quot;job_categories_jobs_join&quot;.&quot;category_id&quot; WHERE (lower(categories.parent) LIKE lower(&#39;%Technology%&#39;))</code>"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "edited": false, "score": 0, "creation_date": 1528281263, "post_id": 50717881, "comment_id": 88444812, "body": "add <code>.distinct</code> at end of relation."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "edited": false, "score": 0, "creation_date": 1528281273, "post_id": 50717881, "comment_id": 88444819, "body": "<code>Job.joins(:job_categories).joins(:categories).where(&#39;lower(c&zwnj;&#8203;ategories.parent) LIKE lower(?)&#39;, &quot;%#{params[:parent]}%&quot;).distinct</code>"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "edited": false, "score": 0, "creation_date": 1528281338, "post_id": 50717881, "comment_id": 88444866, "body": "the benefit of this query is it <i>remains</i> an ActiveRelation which will enable you to chain with other queries and join if needed."}], "tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": true, "score": 5, "last_activity_date": 1528294732, "last_edit_date": 1528294732, "creation_date": 1528280134, "answer_id": 50717881, "question_id": 50716713, "link": "https://stackoverflow.com/questions/50716713/how-to-search-group-by-with-association-in-rails/50717881#50717881", "title": "How to search group_by with association in Rails", "body": "<p>Your associations are correct, you can retrieve all unique jobs for some categories by following:</p>\n\n<pre><code>Job.joins(:job_categories).joins(:categories).where('lower(categories.parent) LIKE lower(?)', \"%#{params[:parent]}%\").distinct\n</code></pre>\n\n<p>This will join the <code>jobs</code> with the intermediate table <code>job_categories</code> and <code>jobs</code> on relevant keys and <code>where</code> clause will then allow you to be selective on what you want to retrieve.</p>\n\n<pre><code>SELECT DISTINCT \"jobs\" .*\nFROM \"jobs\" INNER\nJOIN \"job_categories\" ON \"job_categories\" .\"job_id\" = \"jobs\" .\"id\" INNER\nJOIN \"job_categories\" \"job_categories_jobs_join\" ON \"job_categories_jobs_join\" .\"job_id\" = \"jobs\" .\"id\" INNER\nJOIN \"categories\" ON \"categories\" .\"id\" = \"job_categories_jobs_join\" .\"category_id\"\nWHERE\n(\n lower ( categories.parent ) LIKE lower ( \"Technology\" ) )\n</code></pre>\n\n<p><strong>Update</strong>:\nActually, we don't need to have explicit join to <code>job_categories</code> either, the following should suffice:</p>\n\n<pre><code>Job.joins(:categories).where('lower(categories.parent) LIKE lower(?)', \"%#{params[:parent]}%\").distinct\n\nSELECT DISTINCT \"jobs\".* FROM \"jobs\" INNER JOIN \"job_categories\" ON \"job_categories\".\"job_id\" = \"jobs\".\"id\" INNER JOIN \"categories\" ON \"categories\".\"id\" = \"job_categories\".\"category_id\" WHERE (lower ( categories.parent ) LIKE lower ( \"Technology\" ))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 1, "last_activity_date": 1528287061, "creation_date": 1528287061, "answer_id": 50720075, "question_id": 50716713, "link": "https://stackoverflow.com/questions/50716713/how-to-search-group-by-with-association-in-rails/50720075#50720075", "title": "How to search group_by with association in Rails", "body": "<p>Just few other options to fetch and group records with association has_many_through:</p>\n\n<pre><code># Filtering by query\nJob.joins(:categories).select('jobs.id, jobs.name, categories.parent').where('lower(categories.parent) LIKE lower(?)', \"Technology\").distinct.inspect\n# =&gt; #&lt;ActiveRecord::Relation [#&lt;Job id: 1, name: \"Developer\"&gt;, #&lt;Job id: 2, name: \"Debugger\"&gt;]&gt;\n\n# Grouping by categories.parent, return a hash\nJob.joins(:categories).select('jobs.id, jobs.name, categories.parent').all.distinct.group_by(&amp;:parent)\n# =&gt; {\"Technology\"=&gt;[#&lt;Job id: 1, name: \"Developer\"&gt;, #&lt;Job id: 2, name: \"Debugger\"&gt;], \"Mechanics\"=&gt;[#&lt;Job id: 3, name: \"Technic\"&gt;]}\n\n# Accessing the hash by key\nJob.joins(:categories).select('jobs.id, jobs.name, categories.parent').all.distinct.group_by(&amp;:parent)[\"Technology\"]\n#=&gt; [#&lt;Job id: 1, name: \"Developer\"&gt;, #&lt;Job id: 2, name: \"Debugger\"&gt;]\n</code></pre>\n"}], "owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "accepted_answer_id": 50717881, "answer_count": 2, "score": 3, "last_activity_date": 1528294732, "creation_date": 1528276962, "last_edit_date": 1528278435, "question_id": 50716713, "link": "https://stackoverflow.com/questions/50716713/how-to-search-group-by-with-association-in-rails", "title": "How to search group_by with association in Rails", "body": "<p>I don't know how I describe this question, at first I want show my model which maintaining a relation like below</p>\n\n<p>category.rb</p>\n\n<pre><code>class Category &lt; ApplicationRecord\n  has_many :job_categories, dependent: :destroy\n  has_many :jobs, through: :job_categories\nend\n</code></pre>\n\n<p>job.rb</p>\n\n<pre><code>class Job &lt; ApplicationRecord\n  has_many :job_categories, dependent: :destroy\n  has_many :categories, through: :job_categories\nend\n</code></pre>\n\n<p>job_category.rb</p>\n\n<pre><code>class JobCategory &lt; ApplicationRecord\n  belongs_to :category, counter_cache: :jobs_count\n  belongs_to :job\nend\n</code></pre>\n\n<p>schema.rb</p>\n\n<pre><code>create_table \"categories\", force: :cascade do |t|\n  t.string \"name\"\n  t.string \"parent\"\nend\n</code></pre>\n\n<p>the <code>parent</code> is a column which maintain the group like <code>Technology</code> and under this <code>ruby,rails,programming</code> etc which is Technology related.</p>\n\n<p>Below is my query for showing group by category </p>\n\n<pre><code>Category.select(:id, :name, :parent).group_by{|p| p.parent}\n</code></pre>\n\n<p>and it's showing like this </p>\n\n<p><strong>Technology</strong></p>\n\n<ul>\n<li>ruby</li>\n<li>rails</li>\n<li>etc</li>\n</ul>\n\n<p>Now I want to show all jobs in group by <strong>Technology</strong>, I have a query for this like </p>\n\n<pre><code>Job.joins(:categories).where('lower(categories.parent) LIKE lower(?)', \"%#{params[:parent]}%\")\n</code></pre>\n\n<p>and it's showing wrong output like if I have only one job which categories is <code>ruby,rails</code> then this one job is showing two times, one for ruby and one for rails.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1528277169, "post_id": 50716215, "comment_id": 88442092, "body": "Can you be a bit more specific? What code are you trying to execute? Mail is delivered asynchronously - so it&#39;s probably best to trigger whatever &quot;after-delivery&quot; behaviour you want within the <code>action</code> method above. More specifically, after calling <code>mail</code> within that method."}, {"owner": {"reputation": 518, "user_id": 8905332, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qSGD6IOatlQ/AAAAAAAAAAI/AAAAAAAAAOA/lcytjZkeivA/photo.jpg?sz=128", "display_name": "ldeld", "link": "https://stackoverflow.com/users/8905332/ldeld"}, "edited": false, "score": 0, "creation_date": 1528278907, "post_id": 50716215, "comment_id": 88443327, "body": "I use <a href=\"https://github.com/collectiveidea/delayed_job\" rel=\"nofollow noreferrer\">Delayed Job</a> to send mail asynchonously, and it allows you to implement a success hook on your job (see the <code>Hooks</code> section on the linked repo)"}], "answers": [{"tags": [], "owner": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "is_accepted": false, "score": 1, "last_activity_date": 1528277497, "creation_date": 1528277497, "answer_id": 50716902, "question_id": 50716215, "link": "https://stackoverflow.com/questions/50716215/action-mailer-delivred-success/50716902#50716902", "title": "action mailer delivred success", "body": "<p>You can use rails action mails observer method. <a href=\"http://api.rubyonrails.org/v5.0/classes/ActionMailer/Base.html\" rel=\"nofollow noreferrer\">rails api</a> - Observing and Intercepting Mails</p>\n\n<p>for example you can create a mailer observer</p>\n\n<pre><code>class UserMailerObserver\n  def self.delivered_email(mail)\n    # code to be executed\n  end\nend\n</code></pre>\n\n<p>And then registering the observer </p>\n\n<pre><code># config/initializers/mailer.rb\nActionMailer::Base.register_observer(UserMailerObserver)\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 3840725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5un6e.jpg?s=128&g=1", "display_name": "jpheos", "link": "https://stackoverflow.com/users/3840725/jpheos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528277497, "creation_date": 1528275445, "question_id": 50716215, "link": "https://stackoverflow.com/questions/50716215/action-mailer-delivred-success", "title": "action mailer delivred success", "body": "<p>There is a way to execute code if delivred success in ActionMailer?</p>\n\n<p>My case:</p>\n\n<pre><code>class UserMailer &lt; ActionMailer::Base\n  def action\n  end\nend\n\nUserMailer.action.deliver_later!\n</code></pre>\n\n<p>How can I execute code after mail delivered?</p>\n"}, {"tags": ["ruby", "class"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1528274817, "post_id": 50715938, "comment_id": 88440539, "body": "Can&#39;t you use constants name spaced in the class?"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1528275010, "post_id": 50715938, "comment_id": 88440653, "body": "Isn&#39;t the block supposed to be the <code>do_GET</code> method`?"}, {"owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1528275100, "post_id": 50715938, "comment_id": 88440718, "body": "@sawa I had also thought the same, but figured that it was really no better than using a global variable, given that multiple instances of this class may be running/initialising at one time (given my particular use case). I probably should have made port a constructor variable in the example."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1528275210, "post_id": 50715938, "comment_id": 88440782, "body": "If each instance needs to have different values, then why do you want those to be shared within the class? That is contradictory."}, {"owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1528275784, "post_id": 50715938, "comment_id": 88441131, "body": "@KimmoLehto indeed! Apologies, I didn&#39;t paste this code directly. This has now been changed."}, {"owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1528275896, "post_id": 50715938, "comment_id": 88441208, "body": "@sawa I think you&#39;re missing the point. The whole point of the class is such that: <code>MyClass.new(&quot;&lt;html&gt;hello&lt;&#47;html&gt;&quot;,12357)</code> and <code>MyClass.new(&quot;&lt;html&gt;world&lt;&#47;html&gt;&quot;,12358)</code> will produce 2 separate running servers, each with different default pages."}], "answers": [{"tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": true, "score": 1, "last_activity_date": 1528360015, "last_edit_date": 1528360015, "creation_date": 1528277518, "answer_id": 50716909, "question_id": 50715938, "link": "https://stackoverflow.com/questions/50715938/inject-current-class-property-into-new-classs-constructor/50716909#50716909", "title": "Inject current class property into new class&#39;s constructor", "body": "<p><strong>Note</strong>: @engineersmnky 's answer is a lot better for your specific usecase. This answer could be of interest to someone looking for a solution to similar, but not <code>WEBrick::HTTPServlet::AbstractServlet</code> related problem.</p>\n\n<p>You could define a class instance variable accessor and pass in the <code>defaultHtml</code> after dynamically creating the class, like so:</p>\n\n<pre><code>class MyServer\n  def initialize(defaultHTML)\n    @defaultHtml = defaultHTML\n    @server = WEBrick::HTTPServer.new(\n      :Port =&gt; 12357,\n      :DocumentRoot = Dir.pwd\n    )\n    defaultGetHandler = Class.new(WEBrick::HTTPServlet::AbstractServlet) do\n      class &lt;&lt; self\n        attr_accessor :defaultHtml  # class level attr_accessor\n      end\n\n      def do_GET(request,response)\n        if request.path.to_s == \"/\"\n          # reference to class level instance variable:\n          response.body = self.class.defaultHtml \n        end\n      end\n    end\n\n    defaultGetHandler.defaultHtml = @defaultHtml\n\n    @server.mount \"/\", defaultGetHandler\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1528295103, "last_edit_date": 1528295103, "creation_date": 1528294360, "answer_id": 50722626, "question_id": 50715938, "link": "https://stackoverflow.com/questions/50715938/inject-current-class-property-into-new-classs-constructor/50722626#50722626", "title": "Inject current class property into new class&#39;s constructor", "body": "<p>It appears <code>WEBrick::HTTPServlet::AbstractServlet</code> already offers an appropriate interface for this (<a href=\"https://ruby-doc.org/stdlib-2.2.4/libdoc/webrick/rdoc/WEBrick/HTTPServlet/AbstractServlet.html#method-c-get_instance\" rel=\"nofollow noreferrer\">Documentation</a>) e.g. </p>\n\n<pre><code> class DefaultGetHandler &lt; WEBrick::HTTPServlet::AbstractServlet\n   def initialize(server,default_html)\n     super(server)\n     @default_html = default_html\n   end \n   def do_GET(request,response)\n     if request.path.to_s == \"/\"\n      response.body = @default_html\n     end\n   end\n end\n</code></pre>\n\n<p>Then <code>MyServer</code> becomes </p>\n\n<pre><code>class MyServer\n  def initialize(default_html)\n    @server = WEBrick::HTTPServer.new(\n      :Port =&gt; 12357,\n      :DocumentRoot = Dir.pwd\n    )\n\n    @server.mount \"/\", DefaultGetHandler, default_html\n  end\nend\n</code></pre>\n\n<p>This will allow you to avoid all the anonymous class definitions you are creating right now and provide you with a cleaner implementation of your custom class. You could name space <code>DefaultGetHandler</code> inside <code>MyServer</code> if you'd like to maintain the encapsulation you currently have</p>\n"}], "owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 50716909, "answer_count": 2, "score": 1, "last_activity_date": 1528360015, "creation_date": 1528274614, "last_edit_date": 1528275753, "question_id": 50715938, "link": "https://stackoverflow.com/questions/50715938/inject-current-class-property-into-new-classs-constructor", "title": "Inject current class property into new class&#39;s constructor", "body": "<p>I am trying to create a class which initializes a WEBrick server which contains a WEBrick servlet which returns some default HTML string if no request path is given. </p>\n\n<p>The main issue is I'd be injecting an instance variable of the current class into the constructor of a new class, and this is something I don't really know how to do.</p>\n\n<pre><code>class MyServer\n  def initialize(defaultHTML)\n    @defaultHtml = defaultHTML\n    @server = WEBrick::HTTPServer.new(\n      :Port =&gt; 12357,\n      :DocumentRoot = Dir.pwd\n    )\n    defaultGetHandler = Class.new(WEBrick::HTTPServlet::AbstractServlet) do\n      def do_GET(request,response)\n        if request.path.to_s == \"/\"\n          response.body = #SOMEHOW get @defaultHTML here...?\n        end\n      end\n    end\n    @server.mount \"/\", defaultGetHandler\n  end\nend\n</code></pre>\n\n<p>I expect this is possible. I have tried using global variables already and these do work alright, however it's not exactly ideal.</p>\n"}, {"tags": ["ruby", "fiber"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528272290, "post_id": 50715149, "comment_id": 88439061, "body": "Might be worth noting that it can also be invoked via <code>create { test }</code>."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 4, "last_activity_date": 1528272365, "last_edit_date": 1528272365, "creation_date": 1528272018, "answer_id": 50715149, "question_id": 50715023, "link": "https://stackoverflow.com/questions/50715023/how-to-create-a-fiber-using-method-instead-of-a-code-block/50715149#50715149", "title": "How to create a fiber using &#39;method&#39; instead of a code block", "body": "<p>Just convert the method to block:</p>\n\n<pre><code>def test\n  Fiber.yield 2.71\n  Fiber.yield 3.14\n  Fiber.yield 42\nend\n\ndef create(&amp;process)\n  @fiber = Fiber.new(&amp;process)\nend\n\ncreate(&amp;method(:test))\n\n@fiber.resume # =&gt; 2.71\n@fiber.resume # =&gt; 3.14\n@fiber.resume # =&gt; 42\n</code></pre>\n"}], "owner": {"reputation": 3380, "user_id": 3308570, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Mzz9.jpg?s=128&g=1", "display_name": "JustWe", "link": "https://stackoverflow.com/users/3308570/justwe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 50715149, "answer_count": 1, "score": 0, "last_activity_date": 1528272681, "creation_date": 1528271565, "last_edit_date": 1528272681, "question_id": 50715023, "link": "https://stackoverflow.com/questions/50715023/how-to-create-a-fiber-using-method-instead-of-a-code-block", "title": "How to create a fiber using &#39;method&#39; instead of a code block", "body": "<p>Instead of doing this,</p>\n\n<pre><code>@fiber = Fiber.new do\n  # ...\nend\n</code></pre>\n\n<p>I am trying to do something like this:</p>\n\n<pre><code>def test\n  yield\n  # ...\nend\n\ndef create(process)\n  @fiber = Fiber.new(process)\nend\n\ncreate(method(:test))\n</code></pre>\n\n<p>How can I make the <code>Fiber</code> code look like the completed part?</p>\n"}, {"tags": ["ruby", "windows", "ruby-on-rails-3", "registry", "win32ole"], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 672753, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c10c8d26c821786eb09bcf4859434a21?s=128&d=identicon&r=PG", "display_name": "pooja", "link": "https://stackoverflow.com/users/672753/pooja"}, "edited": false, "score": 0, "creation_date": 1528366936, "post_id": 50714892, "comment_id": 88485133, "body": "This works. thanks for the suggestion. Open the feature request <a href=\"https://github.com/ruby/bugs.ruby-lang.org/issues/89\" rel=\"nofollow noreferrer\">github.com/ruby/bugs.ruby-lang.org/issues/89</a>"}], "tags": [], "owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "is_accepted": true, "score": 2, "last_activity_date": 1528271158, "creation_date": 1528271158, "answer_id": 50714892, "question_id": 50713867, "link": "https://stackoverflow.com/questions/50713867/ruby-how-to-read-registry-keys-for-32-bit-and-64-bit-applications-from-32-bit/50714892#50714892", "title": "Ruby - how to read registry keys for 32 bit and 64 bit applications from 32 bit ruby", "body": "<p>Apparently <code>win32/registry</code> is not defining the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa384129(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>KEY_WOW64_{32,64}KEY</code> flags</a> which are used to do that. But since Ruby allows re-opening classes and modules you can easily add them on your own: </p>\n\n<pre><code>module Win32::Registry::Constants\n  KEY_WOW64_64KEY = 0x0100\n  KEY_WOW64_32KEY = 0x0200\nend\n</code></pre>\n\n<p>To read a 64-bit key:</p>\n\n<pre><code>reg = Win32::Registry::HKEY_LOCAL_MACHINE.open('SOFTWARE\\app_path',\n        Win32::Registry::KEY_READ | Win32::Registry::KEY_WOW64_64KEY)\n</code></pre>\n\n<p>To read a 32-bit key:</p>\n\n<pre><code>reg = Win32::Registry::HKEY_LOCAL_MACHINE.open('SOFTWARE\\app_path',\n        Win32::Registry::KEY_READ | Win32::Registry::KEY_WOW64_32KEY)\n</code></pre>\n\n<p>You can open a feature request for that on <a href=\"https://bugs.ruby-lang.org/\" rel=\"nofollow noreferrer\">Ruby's bug tracker</a> (or I can do it for you if you prefer).</p>\n"}], "owner": {"reputation": 299, "user_id": 672753, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c10c8d26c821786eb09bcf4859434a21?s=128&d=identicon&r=PG", "display_name": "pooja", "link": "https://stackoverflow.com/users/672753/pooja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "accepted_answer_id": 50714892, "answer_count": 1, "score": 0, "last_activity_date": 1528271158, "creation_date": 1528267695, "question_id": 50713867, "link": "https://stackoverflow.com/questions/50713867/ruby-how-to-read-registry-keys-for-32-bit-and-64-bit-applications-from-32-bit", "title": "Ruby - how to read registry keys for 32 bit and 64 bit applications from 32 bit ruby", "body": "<p>I am using ruby 32 bit in my application. I am using \"win32/registry\" for reading registry keys.</p>\n\n<p>When i use </p>\n\n<pre><code>reg = Win32::Registry::HKEY_LOCAL_MACHINE.open('SOFTWARE\\app_path')\nreg_typ, reg_val = reg.read('somekey')\n</code></pre>\n\n<p>It by default reads in path </p>\n\n<blockquote>\n  <p>HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\app_path</p>\n</blockquote>\n\n<p>.</p>\n\n<p>Now some of the applications are 64 bit and I want to check for </p>\n\n<blockquote>\n  <p>HKEY_LOCAL_MACHINE\\SOFTWARE\\app_path</p>\n</blockquote>\n\n<p>h. But, by default it always try to find under \"WOW6432Node\"</p>\n\n<p>Any suggestion on what I am missing and how can i read registry for both 32 and 64 bit applications from ruby?</p>\n"}, {"tags": ["ruby", "recursion", "fibonacci"], "comments": [{"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 2, "creation_date": 1528265414, "post_id": 50713133, "comment_id": 88435314, "body": "That is called as recursion. It&#39;s when a function calls itself directly or indirectly to gather the final result. Read more about it here - <a href=\"https://www.geeksforgeeks.org/recursion/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/recursion</a> or in computer science channel of stackexchange"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528267013, "post_id": 50713133, "comment_id": 88436012, "body": "It means that <code>xyz(4)</code> is calculated via <code>xyz(3) + xyz(2)</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 4, "creation_date": 1528268293, "post_id": 50713133, "comment_id": 88436747, "body": "Your question is unclear: in your title, you ask how a case statement (which doesn&#39;t actually exist in Ruby, Ruby only has case expressions and no case statements) works in a function (which Ruby doesn&#39;t have, Ruby only has methods, blocks, lambdas and procs, but no functions). Then in the body, you ask how a specific method call works. Can you clarify what it is you are interested in?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528292175, "post_id": 50713133, "comment_id": 88452018, "body": "additionally many rubyists would consider a case expression (especially this one) code smell. Instead a guard clause would be sufficient such that <code>def xyz(n); return n unless n &gt; 1; xyz(n - 1) + xyz(n - 2); end;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8602070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a2be4a0ab30c3277b46622482d144d?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8602070/alex"}, "edited": false, "score": 0, "creation_date": 1528280182, "post_id": 50713889, "comment_id": 88444125, "body": "Appreciate ... well understood"}], "tags": [], "owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "is_accepted": true, "score": 3, "last_activity_date": 1528267749, "creation_date": 1528267749, "answer_id": 50713889, "question_id": 50713133, "link": "https://stackoverflow.com/questions/50713133/how-does-case-statement-work-in-a-function/50713889#50713889", "title": "How does &#39;case&#39; statement work in a function?", "body": "<p>It is a <code>recursive</code> function, calling a funciton by <code>itself</code></p>\n\n<p>Here are the different <code>steps of the function execution</code> and the <code>output</code> from each step:</p>\n\n<p><strong>Step 1:</strong></p>\n\n<pre><code>def xyz(n)\n    n = 4.\n    case n\n    when 0\n        0\n    when 1\n        1\n    else\n        n = 4, so it comes here and calls\n        xyz(n - 1) + xyz(n - 2)\n        xyz(3) + xyz(2) // no result\n    end\nend\n</code></pre>\n\n<p><strong>No o/p as both conditions make recursive call</strong></p>\n\n<hr>\n\n<p><strong>Step 2:</strong></p>\n\n<pre><code>def xyz(n)\n    n = 3.\n    case n\n    when 0\n        0\n    when 1\n        1\n    else\n        n = 3, so it comes here and calls\n        xyz(n - 1) + xyz(n - 2)\n        xyz(2) + xyz(1) // recursion stops here as case 1 is 1 // so o/p is 1 for hjere\n    end\nend\n</code></pre>\n\n<p><strong>o/p is one as xyz(1) will execute to 1.\nCurrent O/p: 1\nOverall O/p: 1</strong></p>\n\n<hr>\n\n<p><strong>Step 3:</strong></p>\n\n<pre><code>def xyz(n)\n    n = 2.\n    case n\n    when 0\n        0\n    when 1\n        1\n    else\n        n = 2, so it comes here and calls\n        xyz(n - 1) + xyz(n - 2)\n        xyz(1) + xyz(0) // 1\n    end\nend\n</code></pre>\n\n<p><strong>Here o/p is  1 again since <code>xyz(1)</code> will execute to <code>1</code>, \nCurrent O/p: 1\nOverall O/p: 1 + 1 ==> 2</strong></p>\n\n<hr>\n\n<p><strong>Step 4:</strong></p>\n\n<pre><code>def xyz(n)\n    n = 2.\n    case n\n    when 0\n        0\n    when 1\n        1 // 1\n    else\n        n = 1, I wont come here\n        xyz(n - 1) + xyz(n - 2)\n    end\nend\n</code></pre>\n\n<p><strong>Here o/p is  1 again since <code>case 1</code> will execute to <code>1</code>, \nCurrent O/p: 1\nOverall O/p: 1 + 1 + 1 ==> 3</strong></p>\n\n<hr>\n\n<p><strong>So,the final output is <code>3</code></strong></p>\n"}], "owner": {"reputation": 43, "user_id": 8602070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a2be4a0ab30c3277b46622482d144d?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8602070/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 50713889, "answer_count": 1, "score": 1, "last_activity_date": 1528267749, "creation_date": 1528264772, "last_edit_date": 1528267563, "question_id": 50713133, "link": "https://stackoverflow.com/questions/50713133/how-does-case-statement-work-in-a-function", "title": "How does &#39;case&#39; statement work in a function?", "body": "<p>I have the following ruby code:</p>\n\n<pre><code>def xyz(n)\n  case n\n  when 0\n    0\n  when 1\n    1\n  else\n    xyz(n - 1) + xyz(n - 2)\n  end\nend\n\nputs xyz(ARGF.gets.to_i)\n</code></pre>\n\n<p>I executed the code as:</p>\n\n<pre><code>Ruby$ echo \"4\" | ruby test.rb\n</code></pre>\n\n<p>I want to know how the answer becomes <code>3</code>. I don't understand the:</p>\n\n<pre><code>xyz(n - 1) + xyz(n - 2)\n</code></pre>\n\n<p>part of the code. Please explain.</p>\n"}, {"tags": ["ruby", "mustache"], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1528290376, "post_id": 50712923, "comment_id": 88450696, "body": "While this is correct (although I have used the second implementation in some internal libraries where I had full and total control of the yml files). <a href=\"https://yehudakatz.com/2011/11/19/how-to-marshal-procs-using-rubinius/\" rel=\"nofollow noreferrer\">This article</a> on how it can be done in rubinius makes for an interesting read."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1528263668, "creation_date": 1528263668, "answer_id": 50712923, "question_id": 50712338, "link": "https://stackoverflow.com/questions/50712338/allow-lambdas-with-mustache-on-command-line/50712923#50712923", "title": "Allow lambdas with mustache on command line?", "body": "<blockquote>\n  <p>Can I get the same result from the command line as when I use mustache from IRB?</p>\n</blockquote>\n\n<p>No, you cannot.</p>\n\n<p>The reason you get different results is that in IRB you pass <em>a ruby hash object</em>, having two keys. The key <code>:wrapped</code> <em>is an instance of <code>proc</code></em>.</p>\n\n<p>In YAML, OTOH, you have both values <em>as strings</em>. YAML has a very limited support of storing objects and I am not aware of any extension allowing the serialization of <code>proc</code>s. The nai\u0308ve attempt does not work:</p>\n\n<pre><code>{wrapped: proc { |text| \"&lt;b&gt;#{text}&lt;/b&gt;\" }}.to_yaml\n#\u21d2\u00a0\"---\\n:wrapped: !ruby/object:Proc {}\\n\"\n</code></pre>\n\n<p>Obviously, when loaded back, this will become a NOOP. You might hack this behaviour with something like:</p>\n\n<pre><code>YAML.load_file('/path/to/your/file.yaml').\n  map { |k, v| [k, v.start_with?('proc') ? eval(v) : v] }.\n  to_h[:wrapped].('Hi!')\n#\u21d2 \"&lt;b&gt;Hi!&lt;/b&gt;\"\n</code></pre>\n\n<p>But I would strongly suggest not to do that.</p>\n"}], "owner": {"reputation": 11, "user_id": 9900691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272c9c85e7f6b8f6c7ede1ef30ed4570?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/9900691/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 50712923, "answer_count": 1, "score": 0, "last_activity_date": 1528263668, "creation_date": 1528259865, "question_id": 50712338, "link": "https://stackoverflow.com/questions/50712338/allow-lambdas-with-mustache-on-command-line", "title": "Allow lambdas with mustache on command line?", "body": "<p>If I try to use ruby lambdas in my YAML frontmatter with command line mustache, it is treated as if it was straight text.</p>\n\n<p>E.g. test.yaml:</p>\n\n<pre><code>name: Willy  \nwrapped: proc { |text| \"&lt;b&gt;#{text}&lt;/b&gt;\" }\n</code></pre>\n\n<p>template.mustache:</p>\n\n<pre><code>{{#wrapped}}\n{{name}} is awesome.\n{{/wrapped}}\n</code></pre>\n\n<p>Result on the command line:</p>\n\n<pre><code>$ mustache test.yaml template.mustache  \nWilly is awesome.\n</code></pre>\n\n<p>On the other hand, in IRB:</p>\n\n<pre><code>irb(main):032:0&gt; Mustache.render(\"{{#wrapped}}{{name}} is awesome.  \n{{/wrapped}}\", name: \"Willy\", wrapped: proc {|text| \"&lt;b&gt;#{text}&lt;/b&gt;\"  \n})\n\n=&gt; \"&lt;b&gt;Willy is awesome.&lt;/b&gt;\"\n</code></pre>\n\n<p>Can I get the same result from the command line as when I use mustache from IRB?</p>\n"}, {"tags": ["ruby", "methods"], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 4112224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh5.googleusercontent.com/-hFw5rXmfl5Q/AAAAAAAAAAI/AAAAAAAAADk/xZAkY0JoWwE/photo.jpg?sz=128", "display_name": "Peter Nguyen", "link": "https://stackoverflow.com/users/4112224/peter-nguyen"}, "edited": false, "score": 0, "creation_date": 1528260790, "post_id": 50711611, "comment_id": 88433745, "body": "Thank you. It works. My string contains many characters, I have to use <code>gsub</code> to exclude them so I cannot use the built-in method alone. I updated my solution in the answer below"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "reply_to_user": {"reputation": 329, "user_id": 4112224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh5.googleusercontent.com/-hFw5rXmfl5Q/AAAAAAAAAAI/AAAAAAAAADk/xZAkY0JoWwE/photo.jpg?sz=128", "display_name": "Peter Nguyen", "link": "https://stackoverflow.com/users/4112224/peter-nguyen"}, "edited": false, "score": 0, "creation_date": 1528261486, "post_id": 50711611, "comment_id": 88433971, "body": "@PeterNguyen glad to be of help"}], "tags": [], "owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "is_accepted": false, "score": 6, "last_activity_date": 1528253711, "creation_date": 1528253711, "answer_id": 50711611, "question_id": 50711573, "link": "https://stackoverflow.com/questions/50711573/how-to-create-a-global-string-method/50711611#50711611", "title": "How to create a global string method", "body": "<p>you can open up any class in ruby to add methods to it, for your case you can do</p>\n\n<pre><code>class String\n  def convert_to_date\n    # do something with the string, self will contain the value of the string \n  end\nend\n</code></pre>\n\n<p>This will make that method available to any string object so make sure you know what you are doing and there are no side effects.</p>\n\n<p>This is called monkey patching, I'm not sure if this is the best way for your use case without more context</p>\n\n<p>If you're just trying to convert string date to date or time object, there already are methods like <code>Time.parse</code> or <code>DateTime.parse</code></p>\n"}, {"comments": [{"owner": {"reputation": 329, "user_id": 4112224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh5.googleusercontent.com/-hFw5rXmfl5Q/AAAAAAAAAAI/AAAAAAAAADk/xZAkY0JoWwE/photo.jpg?sz=128", "display_name": "Peter Nguyen", "link": "https://stackoverflow.com/users/4112224/peter-nguyen"}, "edited": false, "score": 0, "creation_date": 1528260364, "post_id": 50711658, "comment_id": 88433624, "body": "Thank you for your answer and deep explanation, this helps me understand a lot. But I need <code>convert_to_date</code> method can use in all contexts like: model, controller and views. And seems like refinement class method cannot use in views. I have found a solution, and I post it below"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1528263806, "post_id": 50711658, "comment_id": 88434694, "body": "This is a proper way to go."}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 1, "creation_date": 1528264491, "post_id": 50711658, "comment_id": 88434967, "body": "I agree, didn&#39;t know about refinements, thanks @max pleaner"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 9, "last_activity_date": 1528254090, "creation_date": 1528254090, "answer_id": 50711658, "question_id": 50711573, "link": "https://stackoverflow.com/questions/50711573/how-to-create-a-global-string-method/50711658#50711658", "title": "How to create a global string method", "body": "<p>As an alternative to patching you can also define patches via refinements. This will make the patch only available in a certain scope. This isn't necessarily an issue with <code>String.convert_to_date</code>, but in a large scale project it's often recommended to avoid outright monkeypatching, to avoid conflicts with gems' code.</p>\n\n<p>A refinement is defined and used like so:</p>\n\n<pre><code>module StringRefinement\n  refine String do\n    def convert_to_date\n      self + \" world\"\n    end\n  end\nend\n\nclass SomeClass\n  using StringRefinement\n  \"hello\".convert_to_date # =&gt; \"hello world\"\nend\n\n\"hello\".convert_to_date # =&gt; NoMethodError\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1528263841, "post_id": 50712452, "comment_id": 88434712, "body": "This is absolutely the same as what @Subash suggested. Downvoted."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1528268866, "post_id": 50712452, "comment_id": 88437095, "body": "Sure you can. Once again: there is <b>no difference</b> between these two solutions, save for yours produces an invalid half-functional, includable to only classes defining <code>+(String)</code> instance method module."}], "tags": [], "owner": {"reputation": 329, "user_id": 4112224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh5.googleusercontent.com/-hFw5rXmfl5Q/AAAAAAAAAAI/AAAAAAAAADk/xZAkY0JoWwE/photo.jpg?sz=128", "display_name": "Peter Nguyen", "link": "https://stackoverflow.com/users/4112224/peter-nguyen"}, "is_accepted": false, "score": -2, "last_activity_date": 1528260688, "creation_date": 1528260688, "answer_id": 50712452, "question_id": 50711573, "link": "https://stackoverflow.com/questions/50711573/how-to-create-a-global-string-method/50712452#50712452", "title": "How to create a global string method", "body": "<p>Thanks @Subash and @max pleaner, your answers helped me found a solution. And here is my solution:</p>\n\n<p>in config/initializers/StringRefinementDate.rb:</p>\n\n<pre><code>module StringRefinementDate\n  def convert_to_date\n    self + \" world\"\n  end\nend\nString.include StringRefinementDate\n</code></pre>\n\n<p>In <code>models</code>, <code>controllers</code>, and <code>views</code> just use:</p>\n\n<pre><code>\"hello\".convert_to_date # =&gt; \"hello world\"\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 4112224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh5.googleusercontent.com/-hFw5rXmfl5Q/AAAAAAAAAAI/AAAAAAAAADk/xZAkY0JoWwE/photo.jpg?sz=128", "display_name": "Peter Nguyen", "link": "https://stackoverflow.com/users/4112224/peter-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1528262512, "creation_date": 1528253319, "last_edit_date": 1528262512, "question_id": 50711573, "link": "https://stackoverflow.com/questions/50711573/how-to-create-a-global-string-method", "title": "How to create a global string method", "body": "<p>I want to create a global <code>String</code> method used as: <code>\"string\".convert_to_date</code> that I can use it in the same way as <code>\"abc\".length</code> or <code>\"abc\".upcase</code>.</p>\n\n<p>How can I define <code>convert_to_date</code> method?</p>\n"}, {"tags": ["ruby", "rubygems", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 3150583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a093b0adcd9c04de5d2a880e9d035b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3150583", "link": "https://stackoverflow.com/users/3150583/user3150583"}, "edited": false, "score": 0, "creation_date": 1528284799, "post_id": 50711861, "comment_id": 88447072, "body": "I have updated to the latest version and now get a different error. It seems that jekyll is looking for Ruby in the wrong place. Can I point it to the correct location? I updated my post with the error."}, {"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "reply_to_user": {"reputation": 115, "user_id": 3150583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a093b0adcd9c04de5d2a880e9d035b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3150583", "link": "https://stackoverflow.com/users/3150583/user3150583"}, "edited": false, "score": 0, "creation_date": 1528288329, "post_id": 50711861, "comment_id": 88449415, "body": "it seems it still take <code>ruby 2.1.3</code>, do you have rvm? wt was the output of <code>ruby --version</code> cmd."}, {"owner": {"reputation": 115, "user_id": 3150583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a093b0adcd9c04de5d2a880e9d035b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3150583", "link": "https://stackoverflow.com/users/3150583/user3150583"}, "edited": false, "score": 0, "creation_date": 1528292180, "post_id": 50711861, "comment_id": 88452022, "body": "<code>ruby --version</code>  produces <code>ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin17]</code>"}, {"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "reply_to_user": {"reputation": 115, "user_id": 3150583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a093b0adcd9c04de5d2a880e9d035b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3150583", "link": "https://stackoverflow.com/users/3150583/user3150583"}, "edited": false, "score": 0, "creation_date": 1528292465, "post_id": 50711861, "comment_id": 88452242, "body": "strange in your error it shows <code>2.1.3</code>. I suggest you to use <code>rvm</code> to manage ruby versions"}], "tags": [], "owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "is_accepted": false, "score": 1, "last_activity_date": 1528255852, "creation_date": 1528255852, "answer_id": 50711861, "question_id": 50711410, "link": "https://stackoverflow.com/questions/50711410/error-building-new-jekyll-site/50711861#50711861", "title": "Error Building New Jekyll Site", "body": "<p>You need to upgrade the ruby version I check its working for 2.3.4\nwhen I tried to use it for <code>2.1.3</code> I got the error:</p>\n\n<pre><code>ERROR:  Error installing jekyll:\n    ruby_dep requires Ruby version &gt;= 2.2.5, ~&gt; 2.2.\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 3150583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a093b0adcd9c04de5d2a880e9d035b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3150583", "link": "https://stackoverflow.com/users/3150583/user3150583"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528284971, "creation_date": 1528251807, "last_edit_date": 1528284971, "question_id": 50711410, "link": "https://stackoverflow.com/questions/50711410/error-building-new-jekyll-site", "title": "Error Building New Jekyll Site", "body": "<p>I've tried making a blog with Jekyll a few times and have always run into this issue across multiple versions of OSX, Ruby etc. After I run:</p>\n\n<pre><code>jekyll new myblog\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>/Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass/script/functions.rb:2054: warning: else without rescue is useless\n/Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass/script/functions.rb:2060: warning: else without rescue is useless\n/Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass/script/functions.rb:2099: warning: else without rescue is useless\n/Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require': /Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass/script/functions.rb:2050: syntax error, unexpected modifier_if (SyntaxError)\n          if separator.value == 'auto'\n            ^\n/Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass/script/functions.rb:2054: syntax error, unexpected ',', expecting keyword_end\n/Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass/script/functions.rb:2060: syntax error, unexpected ')', expecting keyword_end\n/Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass/script/functions.rb:2095: syntax error, unexpected modifier_if\n          if separator.value == 'auto'\n            ^\n/Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass/script/functions.rb:2099: syntax error, unexpected ')', expecting keyword_end\n/Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass/script/functions.rb:2885: syntax error, unexpected keyword_end, expecting end-of-input\n    from /Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    from /Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass/script.rb:34:in `&lt;module:Script&gt;'\n    from /Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass/script.rb:8:in `&lt;module:Sass&gt;'\n    from /Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass/script.rb:3:in `&lt;top (required)&gt;'\n    from /Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    from /Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    from /Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass/engine.rb:47:in `&lt;top (required)&gt;'\n    from /Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    from /Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    from /Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/sass-3.5.1/lib/sass.rb:99:in `&lt;top (required)&gt;'\n    from /Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    from /Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    from /Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/jekyll-sass-converter-1.5.0/lib/jekyll/converters/scss.rb:3:in `&lt;top (required)&gt;'\n    from /Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    from /Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    from /Users/NuriAmari/.rvm/gems/ruby-2.1.3@global/gems/jekyll-sass-converter-1.5.0/lib/jekyll-sass-converter.rb:2:in `&lt;top (required)&gt;'\n    from /Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    from /Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    from /Users/NuriAmari/.rvm/gems/ruby-2.1.3/gems/jekyll-3.8.3/lib/jekyll.rb:200:in `&lt;top (required)&gt;'\n    from /Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    from /Users/NuriAmari/.rvm/rubies/ruby-2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    from /Users/NuriAmari/.rvm/gems/ruby-2.1.3/gems/jekyll-3.8.3/exe/jekyll:8:in `&lt;top (required)&gt;'\n    from /Users/NuriAmari/.rvm/gems/ruby-2.1.3/bin/jekyll:23:in `load'\n    from /Users/NuriAmari/.rvm/gems/ruby-2.1.3/bin/jekyll:23:in `&lt;main&gt;'\n    from /Users/NuriAmari/.rvm/gems/ruby-2.1.3/bin/ruby_executable_hooks:15:in `eval'\n    from /Users/NuriAmari/.rvm/gems/ruby-2.1.3/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>I'm running High Sierra v 10.13.3 and have tried all the troubleshooting suggestions I could find. Thanks in advance.</p>\n\n<p>EDIT:</p>\n\n<p>I actually already had the latest version of Ruby installed but reinstalled just to be sure. I now get this error when I try to make a new jekyll site:</p>\n\n<pre><code>/Users/NuriAmari/.rvm/gems/ruby-2.1.3/bin/jekyll: No such file or directory\n</code></pre>\n\n<p>Any other tips?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "initialization", "instance", "local-variables"], "answers": [{"tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": true, "score": 3, "last_activity_date": 1528653632, "last_edit_date": 1528653632, "creation_date": 1528249868, "answer_id": 50711189, "question_id": 50711092, "link": "https://stackoverflow.com/questions/50711092/trouble-in-understanding-the-difference-between-the-use-of-self-and-in-initial/50711189#50711189", "title": "Trouble in understanding the difference between the use of self and @ in initialize(constructor) of Ruby class", "body": "<p>When you use <code>attr_accessor :venue</code>, you're essentially doing this.</p>\n\n<pre><code>def venue\n  @venue\nend \n\ndef venue=(value)\n  @venue = value\nend \n</code></pre>\n\n<p>When you do <code>attr_writer :venue</code>, you're doing</p>\n\n<pre><code>def venue=(val)\n  @venue = val \nend \n</code></pre>\n\n<p>When you do <code>attr_reader :venue</code>, you're doing</p>\n\n<pre><code>def venue\n  @venue \nend\n</code></pre>\n\n<p>Note that an <code>@instance_variable</code> is <code>nil</code> by default, or if it's uninitialized. To see this in action, type <code>irb</code> in your terminal and press enter. Then, type a single <code>@</code>, and spam a bunch of characters after it. <code>@ausdhyf934234092348</code> will be nil. </p>\n\n<p>When you're inside <code>Ticket#initialize</code>, you're acting as an instance of the object, thus <code>self</code> will return the current instance. <code>self.class</code> will return the class, and give you access to any class-level methods.</p>\n\n<pre><code>class Ticket\n  VENUE_SIZES = [:small, :large]\n\n  def self.venue_sizes\n    VENUE_SIZES\n  end \n\n  def initialize(venue, date)\n    # ... \n    self.venue_sizes # NoMethodError\n    self.class.venue_sizes # [:small, :large]\n  end \n\nend\n</code></pre>\n\n<p>Going up the chain, if you're acting as the class and not an instance of a class, calling <code>self.class</code> \u2014 or <code>self.class.class</code> if you're acting as an instance, will return <code>Class</code></p>\n\n<p><code>attr_accessor</code> is simply syntactical sugar; it was made because of the mundane chore of having to write those getter/setter methods over and over again. There are cooler problems to solve, like writing our own <code>nadnerb_accessor</code> in Ruby (though <code>attr_accessor</code> is implemented in C):</p>\n\n<pre><code>class Ticket\n  def self.nadnerb_accessor(*names)\n    names.each do |name|\n      define_method(name) do\n        instance_variable_get(:\"@#{name}\")\n      end\n      define_method(\"#{name}=\") do |value|\n        instance_variable_set(:\"@#{name}\", value)\n      end\n    end\n  end\n\n  nadnerb_accessor :venue, :price\n\n  def initialize(venue, price)\n    self.venue = venue\n    self.price = price\n  end\n\n  def inspect\n    \"#&lt;Ticket @venue=\\\"#{@venue}\\\" @price=\\\"#{@price}\\\"&gt;\"\n  end\nend\n\nticket = Ticket.new(\"StackOverflow\", \"$5\")\nputs ticket.inspect \n</code></pre>\n\n<hr>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 2, "last_activity_date": 1528262151, "last_edit_date": 1528262151, "creation_date": 1528250782, "answer_id": 50711292, "question_id": 50711092, "link": "https://stackoverflow.com/questions/50711092/trouble-in-understanding-the-difference-between-the-use-of-self-and-in-initial/50711292#50711292", "title": "Trouble in understanding the difference between the use of self and @ in initialize(constructor) of Ruby class", "body": "<p>Pretty the same, but one is viewed as variable (@) the other as method (thanks to getter and setter). <strong>Example 4 \"unveils the trick\".</strong></p>\n\n<p>I hope the following examples could be self explanatory:</p>\n\n<hr>\n\n<h2>Example 1</h2>\n\n<pre><code>class Ticket\n\n  attr_accessor :venue\n\n  def initialize(venue)\n    self.venue = venue\n  end\n\n  def are_the_same?\n    p self.venue == @venue\n    p self.venue === @venue\n    p self.venue.eql? @venue\n    p self.venue.equal? @venue\n  end\n\nend\n\nticket = Ticket.new('Broadway') # this is an instance of Ticket\n\nticket.are_the_same?\n\n#=&gt; true\n#=&gt; true\n#=&gt; true\n#=&gt; true\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/7156955/whats-the-difference-between-equal-eql-and\">See this great post for equals</a>.</p>\n\n<hr>\n\n<h2>Example 2</h2>\n\n<pre><code>class Ticket\n\n  @@double_arroba = 'class variable' # class variable\n  attr_accessor :venue\n\n  def initialize(venue)\n    self.venue = venue\n  end\n\n  def whats_self?\n    p self # instance itself\n  end\n\n  def venue_self\n    p self.venue # instance itself  calling its variable\n  end\n\n  def venue_arroba\n    p @venue # instance variable directly\n  end\n\n  def whats_double_arroba # instance method using a class variable\n    p @@double_arroba\n  end\n\n  def self.whats_double_arroba # class method using a class variable\n    p @@double_arroba\n  end\n\n  def self.whats_self? # class method calling itself\n    p self\n  end\n\nend\n\nticket = Ticket.new('Broadway') # this is an instance of Ticket\n\np ticket #=&gt; #&lt;Ticket:0x007fb3fb0f1868 @venue=\"Broadway\"&gt;\nticket.whats_self? #&lt;Ticket:0x007fb3fb0f1868 @venue=\"Broadway\"&gt;\np ticket.venue #=&gt; \"Broadway\" #thanks to attr_accessor\nticket.venue_self #=&gt; \"Broadway\"\nticket.venue_arroba #=&gt; \"Broadway\"\n\nticket.whats_double_arroba #=&gt; \"class variable\"\nTicket.whats_double_arroba #=&gt; \"class variable\"\nTicket.whats_self? #=&gt; Ticket\n</code></pre>\n\n<hr>\n\n<h2>Example 3</h2>\n\n<p><strong>What happen if you remove attr_accessor?</strong></p>\n\n<pre><code>class Ticket\n\n  # attr_accessor :venue #comment out attr_accessor\n\n  def initialize(venue)\n    # self.venue = venue # venue method is not defined\n    @venue = venue # so you need to use @\n  end\n\n  def venue_self\n    # p self.venue # not working, self method is not available is nota available\n  end\n\n  def venue_arroba\n    p @venue # instance variable directly\n  end\n\nend\n\nticket = Ticket.new('Broadway') # this is an instance of Ticket\n\np ticket #=&gt; #&lt;Ticket:0x007fb3fb0f1868 @venue=\"Broadway\"&gt;\n# p ticket.venue # does not work, no access\nticket.venue_self #=&gt; nil, because commented the method code\nticket.venue_arroba #=&gt; \"Broadway\"\n# ticket.whats_double_arroba # not working\n</code></pre>\n\n<hr>\n\n<h2>Example 4</h2>\n\n<p><strong>The trick: getter and setter</strong></p>\n\n<pre><code># class with getter and setter\n\nclass Ticket\n\n  def venue=(value) # setter (attr_reader)\n    @venue = value\n  end\n\n  def venue # getter (attr_writer)\n    @venue\n  end\n\n  def self_venue\n    self.venue # (*) you can omit self and write just venue\n  end\n\nend\n\nticket = Ticket.new # ticket is the instance\nticket.venue=\"Brodway\" # setter method .venue= in action\np ticket.venue #=&gt; \"Brodway\" # getter method .venue in action\np ticket.self_venue #=&gt; \"Brodway\" # calls the method .self_venue on the instance, which calls the getter method .venue (*)\n\n\n# or write simply this code below, to let ruby build itself getter and setter\n\nclass Ticket\n\n  attr_accessor :venue\n\nend\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 9803237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549ea1590447cf15756fd4835f8403b8?s=128&d=identicon&r=PG&f=1", "display_name": "D1D2D3D4D5", "link": "https://stackoverflow.com/users/9803237/d1d2d3d4d5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 50711189, "answer_count": 2, "score": 2, "last_activity_date": 1528653632, "creation_date": 1528248918, "last_edit_date": 1528272418, "question_id": 50711092, "link": "https://stackoverflow.com/questions/50711092/trouble-in-understanding-the-difference-between-the-use-of-self-and-in-initial", "title": "Trouble in understanding the difference between the use of self and @ in initialize(constructor) of Ruby class", "body": "<p>I'm working my way through the \"Well Grounded Rubyist\" book and I was hoping to get some clarification on my understanding of self vs. @ for initialize. </p>\n\n<p>There's a point where you create a simple Ticket class using \"self.\" to set a venue and date. In broad strokes I understand that \"self.\" is setting the venue and date for the current instance of Ticket, while @ is setting up an instance variable...but I'm not too sure why not use an instance variable instead? </p>\n\n<p>From just playing around with it, both seem to be valid as I can access the date or venue successfully on a new instance of Ticket using either @ or self for the initialize.</p>\n\n<pre><code>class Ticket\n  attr_accessor :venue, :date\n  def initialize(venue, date)\n    self.venue = venue\n    self.date = date\n  end\nend\n</code></pre>\n\n<p>Any help to clear up my understanding would be much appreciated!</p>\n"}, {"tags": ["ruby", "class", "instance-variables"], "comments": [{"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 2, "creation_date": 1528248179, "post_id": 50710399, "comment_id": 88430982, "body": "I&#39;m not able to see this happen, running your code &quot;HERE2&quot; is always just 1 character shorter than &quot;HERE&quot;, is because &quot;HERE2&quot; actually gets output before the current guess is added and then &quot;HERE&quot; is output. Do you have any further information to help reproduce it?"}, {"owner": {"reputation": 47, "user_id": 9226882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee8ddf3acfc2dd7ff02846885c2126a?s=128&d=identicon&r=PG&f=1", "display_name": "Bri Expost", "link": "https://stackoverflow.com/users/9226882/bri-expost"}, "edited": false, "score": 0, "creation_date": 1528248778, "post_id": 50710399, "comment_id": 88431091, "body": "<a href=\"https://imgur.com/a/jUkjHaz\" rel=\"nofollow noreferrer\">imgur.com/a/jUkjHaz</a>  I&#39;m running an RSPEC test and Im also using puts/prints to test what gets pushed into the @guessed_letters successfully. Im sorry if its hard to read Im still learning ruby."}, {"owner": {"reputation": 47, "user_id": 9226882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee8ddf3acfc2dd7ff02846885c2126a?s=128&d=identicon&r=PG&f=1", "display_name": "Bri Expost", "link": "https://stackoverflow.com/users/9226882/bri-expost"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1528249202, "post_id": 50710399, "comment_id": 88431179, "body": "-edit- This is the rspec that Im running <a href=\"https://repl.it/@dnangels/RSPECHangman\" rel=\"nofollow noreferrer\">repl.it/@dnangels/RSPECHangman</a>"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 9226882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee8ddf3acfc2dd7ff02846885c2126a?s=128&d=identicon&r=PG&f=1", "display_name": "Bri Expost", "link": "https://stackoverflow.com/users/9226882/bri-expost"}, "edited": false, "score": 0, "creation_date": 1528252204, "post_id": 50711396, "comment_id": 88431789, "body": "I kind of understand...? But that doesnt seem to explain that in the second iteration of &quot;HERE2&quot; is it blank when you could see HERE in the first iteration to have an &quot;e&quot; in it already. <a href=\"https://imgur.com/a/jUkjHaz\" rel=\"nofollow noreferrer\">imgur.com/a/jUkjHaz</a> Why is HERE2 an empty array even though HERE has an &quot;e&quot; and their addressing the same instance variable?"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "reply_to_user": {"reputation": 47, "user_id": 9226882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee8ddf3acfc2dd7ff02846885c2126a?s=128&d=identicon&r=PG&f=1", "display_name": "Bri Expost", "link": "https://stackoverflow.com/users/9226882/bri-expost"}, "edited": false, "score": 1, "creation_date": 1528252368, "post_id": 50711396, "comment_id": 88431822, "body": "The first &quot;HERE2&quot; is from the other test (&quot;returns the most common letter in #candidate_words&quot;), and then when that test finishes, you throw away that <code>guesser</code> and get a fresh one, that hasn&#39;t made any guesses. And you wouldn&#39;t want the state to carry over from one test to the other like that, tests should be runnable in random order...not reliant on any other test to have ran before it"}, {"owner": {"reputation": 47, "user_id": 9226882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee8ddf3acfc2dd7ff02846885c2126a?s=128&d=identicon&r=PG&f=1", "display_name": "Bri Expost", "link": "https://stackoverflow.com/users/9226882/bri-expost"}, "edited": false, "score": 0, "creation_date": 1528252492, "post_id": 50711396, "comment_id": 88431845, "body": "Ah... okay I see. Thank you very much for helping me out. I guess I have to figure out another way to code the guessing method"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 1, "last_activity_date": 1528251971, "last_edit_date": 1528251971, "creation_date": 1528251669, "answer_id": 50711396, "question_id": 50710399, "link": "https://stackoverflow.com/questions/50710399/somehow-accessing-different-instance-variables/50711396#50711396", "title": "Somehow Accessing Different Instance Variables", "body": "<p>So you're problem is that in the following RSpec test case, the \"HERE2\" is an empty array and doesn't contain the guess \"e\", yet:</p>\n\n<pre><code>describe \"Phase III\" do\n  describe \"#guess\" do\n    let(:guesser) { ComputerPlayer.new([\"reel\",\"keel\",\"meet\"]) }\n    before(:each) { guesser.register_secret_length(4) }\n\n    context \"when a guess has been made\" do\n      it \"returns the most common letter in the remaining #candidate_words\" do\n      board = [nil, \"e\", \"e\", nil]\n\n      expect(guesser.guess(board)).to eq(\"l\")\n    end\n  end\nend\n</code></pre>\n\n<p>The reason for this is you haven't told any code that you have guessed \"e\", yet (i.e., you haven't called <code>processed_most_common</code> with \"e\"). You only tell the <code>guesser</code> that the board is in a state such that the 2 middle letters are \"e\".</p>\n\n<p>If we were to, for example, change the test to:</p>\n\n<pre><code>context \"when a guess has been made\" do\n  it \"returns the most common letter in the remaining #candidate_words\" do\n    board = [nil, \"e\", \"e\", nil]\n\n    guesser.guess(board) # guesses 'e' and marks it as guessed.\n    expect(guesser.guess(board)).to eq(\"l\")\n  end\nend\n</code></pre>\n\n<p>Now, we've got the board in a state such that it knows that \"e\" is in the middle 2 positions, and then we tell it to guess the most common letter, which is still \"e\" because <code>guesser</code> doesn't know that it guessed it yet (because it hasn't). After that, we tell it to guess the next letter, which this time is \"l\", and the \"HERE2\" code correctly outputs that \"e\" has already been guessed (because it has).</p>\n\n<p>There are other ways to fix this, you just need to make sure <code>processed_most_common</code> gets called with \"e\", to fix the issue you're seeing. But if you have the code go through the entire guess process, you don't end up missing out on any other steps that might be expected that you had gone through.</p>\n"}], "owner": {"reputation": 47, "user_id": 9226882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee8ddf3acfc2dd7ff02846885c2126a?s=128&d=identicon&r=PG&f=1", "display_name": "Bri Expost", "link": "https://stackoverflow.com/users/9226882/bri-expost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528292865, "creation_date": 1528242237, "last_edit_date": 1528292865, "question_id": 50710399, "link": "https://stackoverflow.com/questions/50710399/somehow-accessing-different-instance-variables", "title": "Somehow Accessing Different Instance Variables", "body": "<pre><code>class Hangman\n  attr_reader :guesser, :referee, :board \n  def initialize(options = {})\n    @guesser = options[:guesser]\n    @referee = options[:referee]    #class objects\n  end\n\n  def play\n    setup\n    take_turn until over?\n    conclude\n  end\n\n\n  def setup\n    secret_length = @referee.pick_secret_word\n    @guesser.register_secret_length(secret_length)\n    @board = Array.new(secret_length)\n  end\n\n  def take_turn\n    letter = @guesser.guess(@board)\n    correct_indicies = @referee.check_guess(letter)\n    self.update_board(letter,correct_indicies)\n    @guesser.handle_response(letter,correct_indicies)\n  end\n\n  def update_board(letter,correct_indicies)\n    correct_indicies.each{|index| @board[index] = letter}\n  end\n\n  private\n\n    def over?\n      @board.count(nil) == 0\n    end\n\n    def conclude\n      puts \"Congrats the game is over.\"\n      puts \"The hidden word was #{board.join}\"\n    end\n\nend\n\n\n\nclass HumanPlayer\n\n  def initialize\n    @guessed_letters = []\n  end\n\n  def pick_secret_word\n    puts \"Enter the length of your word.\"\n    gets.chomp.to_i\n  end\n\n  def register_secret_length(length)\n    puts \"The length of the word is #{length}\"\n  end\n\n  def guess(board)\n    print_board(board)\n    print \"&gt; \"\n    guess = gets.chomp\n    processed_guess(guess)\n  end\n\n  def check_guess(letter)\n    puts \"The letter, #{letter}, guessed was at these indicies.\"\n    puts \"Input formart ex. (2 4 6)\"\n    indicies = gets.chomp.split(\" \").map(&amp;:to_i)\n  end\n\n  def handle_response(letter, indicies)\n    puts \"Found #{letter} at positions #{indicies}\"\n  end\n\n  private\n\n    def print_board(board)\n      board_string = board.map do |el|\n        el.nil? ? \"_\" : el\n      end.join(\"\")\n      puts \"Secret word: #{board_string}\"\n    end\n\n    def processed_guess(guess)\n      unless @guessed_letters.include?(guess) || guess.length &gt; 1 \n        @guessed_letters &lt;&lt; guess\n        return guess\n      else\n        puts \"You have already guessed #{guess}\"\n        puts \"Please try again.\"\n        puts \"You have guessed #{@guessed_letters}\"\n        print \"&gt; \"\n        guess = gets.chomp\n        processed_guess(guess)\n      end\n    end\n\nend\n\nclass ComputerPlayer\n  attr_reader :secret_word, :secret_word_length, :candidate_words, \n:guessed_letters\n  def initialize(dictionary = ComputerPlayer.default_dictionary)\n    @dictionary = dictionary\n    @alphabet = (\"a\"..\"z\").to_a\n    @guessed_letters = []\n  end\n\n  def self.default_dictionary\n    contents = File.readlines(\"dictionary.txt\").map{|word| word.chomp}\n  end\n\n\n  def pick_secret_word\n    @secret_word = @dictionary.sample\n    print @secret_word\n    secret_word_length = @secret_word.length\n  end\n\n  def check_guess(letter)\n    secret_word_arr =   @secret_word.chars\n    secret_word_arr.each_index.select{|index| @secret_word[index] == letter}\n  end\n\n  def register_secret_length(secret_length)\n    @candidate_words = @dictionary.select{|word| word.length == secret_length}\n  end\n\n  def guess(board)\n    print_board(board)\n    letter = guess_most_common\n    processed_most_common(letter)\n    puts \"HERE #{@guessed_letters}\"\n    letter\n  end\n\n  def handle_response(letter, indicies)\n    @candidate_words.select! do |word|\n      indicies == word.chars.each_index.select {|index| word[index] == letter} #so the problem here is if you guess \"r\" give correct index of [0] and it checks \"rear\" it would assume its correct even tho theres an extra \"r\" \n    end\n     puts \"Found #{letter} at positions #{indicies}\"\n\n  end\n\n\n  def guess_most_common\n    puts \"HERE2 #{@guessed_letters}\"\n    most_common_hash = Hash.new(0)\n    uniq_candidate_arr = @candidate_words.map{|word| word.chars.uniq.join}\n    uniq_candidate_arr.join.each_char{|char| most_common_hash[char] += 1 unless @guessed_letters.include?(char)\n  p char}\n    print \"#{most_common_hash}\"\n    most_common_letter = most_common_hash.sort_by{|key,value| value}.reverse.to_h.keys.first\n\n  end\n\n\n  private\n\n    def print_board(board)\n      board_string = board.map do |el|\n        el.nil? ? \"_\" : el\n      end.join(\"\")\n      puts \"Secret word: #{board_string}\"\n    end\n\n    def processed_most_common(letter)\n      @guessed_letters &lt;&lt; letter unless @guessed_letters.include?(letter)\n    end \nend\n\nif __FILE__ == $PROGRAM_NAME\n  my_computer = ComputerPlayer.new\n  my_human = HumanPlayer.new\n\n  game = Hangman.new({guesser:my_human, referee:my_computer})\n\n  game.play\nend\n</code></pre>\n\n<p>Sorry if this is crappy format but I am working on a Hangman Project but got stuck. I am trying to make the ComputerPlayer guess the most common letter. After it guesses the most common letter, it will guess the next most common letter and so fourth. </p>\n\n<p>I've made a @guessed_letters = [] to keep track of the letters I've already guessed so I wont count it the next time the computer guesses a letter.</p>\n\n<p>Problem is that @guessed_letter does not keep track of my guessed letters correctly. I printed them in 2 areas. One in class ComputerPlayer#guess and one in ComputerPlayer#guess_most_common. The guess method prints @guessed_letters array correctly with the letters already guessed. guess_most_common method always prints a empty @guessed_letters array. How is that possible that they're both printing different things?</p>\n"}, {"tags": ["python", "ruby", "pseudocode"], "answers": [{"tags": [], "owner": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "is_accepted": false, "score": 2, "last_activity_date": 1528262584, "last_edit_date": 1528262584, "creation_date": 1528238391, "answer_id": 50709899, "question_id": 50709676, "link": "https://stackoverflow.com/questions/50709676/what-does-inject-do/50709899#50709899", "title": "What does &#39;inject&#39; do?", "body": "<p>It is equivalent to </p>\n\n<pre><code>val = 1.0\n(0..seq.size - 2).each do |i|\n    val = val * rates[seq[i]][seq[i+1]]\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528290642, "post_id": 50710357, "comment_id": 88450876, "body": "Why python when the question is clearly tagged <code>ruby</code>?"}, {"owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 3, "creation_date": 1528314593, "post_id": 50710357, "comment_id": 88464872, "body": "A misguided question editor removed the code which says &quot;I&#39;ve been translating Ruby to Python...&quot;   I&#39;m reverting the edit."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528315013, "post_id": 50710357, "comment_id": 88465101, "body": "Very well I have additionally added the <a href=\"https://stackoverflow.com/questions/tagged/python\">python</a> tag too"}], "tags": [], "owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "is_accepted": true, "score": 2, "last_activity_date": 1528241918, "creation_date": 1528241918, "answer_id": 50710357, "question_id": 50709676, "link": "https://stackoverflow.com/questions/50709676/what-does-inject-do/50710357#50710357", "title": "What does &#39;inject&#39; do?", "body": "<p>In pseudocode, given a 2D array \"rates\" and a single array \"seq\":</p>\n\n<pre><code>val = 1.0\nfor each consecutive pair(s,t) of values in seq:\n    val = product * rates[s][t]\n</code></pre>\n\n<p>So if <code>seq = [1,2,3]</code>, this gives the product <code>rates[1][2] * rates[2][3]</code></p>\n\n<p>In python:</p>\n\n<pre><code>val = 1.0\nfor i in range(len(seq)-1):\n     val*=rates[seq[i]][seq[i+1]]\n</code></pre>\n\n<p>or </p>\n\n<pre><code>reduce(lambda v,i: v*rates[seq[i]][seq[i+1]], range(len(seq)-1), 1.0) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 429, "user_id": 7617687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb0c380ac37c50e2c0574e0ecec1a98?s=128&d=identicon&r=PG&f=1", "display_name": "radoAngelov", "link": "https://stackoverflow.com/users/7617687/radoangelov"}, "is_accepted": false, "score": 2, "last_activity_date": 1528268906, "last_edit_date": 1592644375, "creation_date": 1528268906, "answer_id": 50714196, "question_id": 50709676, "link": "https://stackoverflow.com/questions/50709676/what-does-inject-do/50714196#50714196", "title": "What does &#39;inject&#39; do?", "body": "<p><code>inject</code> is an &quot;accumulator&quot; method in Ruby. If you hear this word for first time, you can take a look at this <a href=\"http://interactivepython.org/runestone/static/thinkcspy/Functions/TheAccumulatorPattern.html\" rel=\"nofollow noreferrer\">article</a>. Here is the <a href=\"https://apidock.com/ruby/Enumerable/inject\" rel=\"nofollow noreferrer\">API doc</a> for the method. Also an <a href=\"https://wikimatze.de/method-alias-in-ruby/\" rel=\"nofollow noreferrer\">alias method</a> of <code>inject</code> is <code>reduce</code> - depending on the context in which you use it, your code may become more readable and meaningful.</p>\n<p>In your example the <code>1.0</code> value is just the start value for the method to accumulate on. If for example your <code>seq</code> has a length of 3 (<code>[1,2,3]</code>), your loop will execute the following steps:</p>\n<ol>\n<li><code>1.0 *= rates[1][2]             #=&gt; i = 0</code></li>\n<li><code>1.0*rates[1][2] *= rates[2][3] #=&gt; i = 1 = seq.size - 2</code></li>\n</ol>\n<p>At the end the loop will return the accumulated <code>val</code> variable.</p>\n"}], "owner": {"reputation": 585, "user_id": 1998692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yliWY.jpg?s=128&g=1", "display_name": "Callam Delaney", "link": "https://stackoverflow.com/users/1998692/callam-delaney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 50710357, "answer_count": 3, "score": -1, "last_activity_date": 1528314958, "creation_date": 1528236876, "last_edit_date": 1528314958, "question_id": 50709676, "link": "https://stackoverflow.com/questions/50709676/what-does-inject-do", "title": "What does &#39;inject&#39; do?", "body": "<p>I've been translating some Ruby code to Python but this has me stumped.</p>\n\n<p>Could somebody please break down what this <code>inject</code> function is doing?</p>\n\n<pre><code>val = (0..seq.size - 2).inject(1.0) do |v, i|\n  v * rates[seq[i]][seq[i+1]]\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex", "variables"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1528262901, "post_id": 50709665, "comment_id": 88434413, "body": "What is your question?"}], "answers": [{"comments": [{"owner": {"reputation": 633, "user_id": 1450038, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c23651e2f4131512ccaa5a216bfde5aa?s=128&d=identicon&r=PG", "display_name": "Brian D", "link": "https://stackoverflow.com/users/1450038/brian-d"}, "edited": false, "score": 0, "creation_date": 1528239168, "post_id": 50709824, "comment_id": 88429026, "body": "Lovely! I tried pretty much everything <i>but</i> that. Perfect response!"}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "reply_to_user": {"reputation": 633, "user_id": 1450038, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c23651e2f4131512ccaa5a216bfde5aa?s=128&d=identicon&r=PG", "display_name": "Brian D", "link": "https://stackoverflow.com/users/1450038/brian-d"}, "edited": false, "score": 0, "creation_date": 1528239195, "post_id": 50709824, "comment_id": 88429032, "body": "@BrianD: Glad it helped you!"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1528392358, "post_id": 50709824, "comment_id": 88501538, "body": "Why not <code>.gsub(&#39;\\n&#39;, &quot;\\n&quot;)</code>?"}], "tags": [], "owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "is_accepted": true, "score": 2, "last_activity_date": 1528392444, "last_edit_date": 1528392444, "creation_date": 1528237770, "answer_id": 50709824, "question_id": 50709665, "link": "https://stackoverflow.com/questions/50709665/inserting-newlines-n-into-gsub-replace-arguments/50709824#50709824", "title": "Inserting newlines (\\n) into gsub replace arguments", "body": "<p><code>\\n</code> is the escape code for newline. <code>\\</code> escapes <em>only</em> work in literal strings included in Ruby source files. When read in from outside sources, <code>\\n</code> is just the literal characters <code>\\</code> and <code>n</code>.</p>\n\n<p>An easy fix, if you want to be able to specify newlines using <code>\\n</code> in your input file, is to add</p>\n\n<pre><code>replace = replace.gsub('\\n', \"\\n\")\n</code></pre>\n\n<p>Before you use <code>replace</code>. This replaces literal <code>\\n</code>'s in <code>replace</code> with actual newlines.</p>\n"}], "owner": {"reputation": 633, "user_id": 1450038, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c23651e2f4131512ccaa5a216bfde5aa?s=128&d=identicon&r=PG", "display_name": "Brian D", "link": "https://stackoverflow.com/users/1450038/brian-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 50709824, "answer_count": 1, "score": 0, "last_activity_date": 1528392444, "creation_date": 1528236814, "last_edit_date": 1528264072, "question_id": 50709665, "link": "https://stackoverflow.com/questions/50709665/inserting-newlines-n-into-gsub-replace-arguments", "title": "Inserting newlines (\\n) into gsub replace arguments", "body": "<p>I tried to insert newlines into a <code>gsub</code> replacement pattern. It works if the replacement is double quoted string literal like <code>\"text\\ntext\"</code>, but not if the replacement is a variable. This may be related to how I refer to my replacement strings.</p>\n\n<p>If I do:</p>\n\n<pre><code>replace = \"\\n// some text\"\ntext.gsub!(/#{find}/, replace)\n</code></pre>\n\n<p>it works just fine.</p>\n\n<p>But when the replacement string that contains <code>\\n</code> is written in a file,</p>\n\n<pre><code>\\n// some text\n</code></pre>\n\n<p>read via <code>File.open</code>, and is stored as a string, then the replacements:</p>\n\n<pre><code>text.gsub!(/#{find}/, \"#{replace}\")\ntext.gsub!(/#{find}/, replace)\n</code></pre>\n\n<p>insert literal <code>\\n</code> characters.</p>\n"}, {"tags": ["ruby", "gmail", "imap"], "comments": [{"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1528266204, "post_id": 50709540, "comment_id": 88435627, "body": "The correct mailbox name depends on the gmail user. It&#39;s never just &#39;Trash&#39;. It&#39;ll be something like &#39;[Gmail]/Trash&#39;. Apart from that the code looks good."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9900135, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hhTRrmAyCmc/AAAAAAAAAAI/AAAAAAAAAG0/xBehhF6gDxc/photo.jpg?sz=128", "display_name": "SKYLARR WATSON", "link": "https://stackoverflow.com/users/9900135/skylarr-watson"}, "is_accepted": false, "score": 1, "last_activity_date": 1528407082, "creation_date": 1528407082, "answer_id": 50750446, "question_id": 50709540, "link": "https://stackoverflow.com/questions/50709540/deleting-gmail-messages-in-rubys-imap-module/50750446#50750446", "title": "Deleting Gmail messages in Ruby&#39;s Imap module", "body": "<p>TL;DR: Change the name of Trash to [Gmail]/Trash</p>\n\n<p>So as it turns out, I can answer my own question thanks to arnt ( a commenter on the original question). All I had to do was change the name of Trash to [Gmail]/Trash.</p>\n"}], "owner": {"reputation": 21, "user_id": 9900135, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hhTRrmAyCmc/AAAAAAAAAAI/AAAAAAAAAG0/xBehhF6gDxc/photo.jpg?sz=128", "display_name": "SKYLARR WATSON", "link": "https://stackoverflow.com/users/9900135/skylarr-watson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528407082, "creation_date": 1528235973, "last_edit_date": 1528266113, "question_id": 50709540, "link": "https://stackoverflow.com/questions/50709540/deleting-gmail-messages-in-rubys-imap-module", "title": "Deleting Gmail messages in Ruby&#39;s Imap module", "body": "<p>thanks for clicking here to possibly help me, or yourself if you're in search of an answer and it's been found.</p>\n\n<p>I've been trying to figure out how to delete messages that have a specific subject from my gmail inbox using Ruby's IMAP module for the past weeks or two, and I cannot get any advice or any other code to work. This is my current script:</p>\n\n<pre><code>require 'net/imap'\nimap = Net::IMAP.new(\"imap.googlemail.com\", 993, true)\nimap.login('*censored*', '*censored*')\nimap.examine('INBOX')\nimap.search([\"SUBJECT\", \"testkeyword\"]).each do |message_id|\n  imap.copy(message_id, \"Trash\")\n  imap.store(message_id, \"+FLAGS\", [:Deleted])\nend\nimap.close\nimap.logout\nimap.disconnect\n</code></pre>\n"}, {"tags": ["ruby", "jekyll", "jekyll-extensions", "jekyll-theme"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9900071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0bjfN.jpg?s=128&g=1", "display_name": "Spiker01", "link": "https://stackoverflow.com/users/9900071/spiker01"}, "edited": false, "score": 0, "creation_date": 1528286448, "post_id": 50710277, "comment_id": 88448150, "body": "I gave up Jekyll. When installing any theme, Gem incompatibility occurs. Authors of repositories with plugins for jekyll do not support backwards compatibility, apparently, or can not do it because of new technologies. And in one good theme there are a lot of plugins. One plugin can depend on another. In addition, in one theme there are a lot of plugins that use different versions of the same one plugin."}, {"owner": {"reputation": 1, "user_id": 9900071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0bjfN.jpg?s=128&g=1", "display_name": "Spiker01", "link": "https://stackoverflow.com/users/9900071/spiker01"}, "edited": false, "score": 0, "creation_date": 1528286460, "post_id": 50710277, "comment_id": 88448160, "body": "I tried to install the theme <a href=\"http://idratherbewriting.com/documentation-theme-jekyll/\" rel=\"nofollow noreferrer\">idratherbewriting.com/documentation-theme-jekyll</a> but faced many problems. I have already entered all the commands, bundle update ok, bundle install ok. But the commands: jekyll serve -w and bundle exec jekyll serve -w produce errors, after solving one of which another appears, it is almost eternally infinite. Maybe it should be in the generators of sites, but I decided to try something else and compare it."}], "tags": [], "owner": {"reputation": 13, "user_id": 3597508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88473f11a59731bf1bbeb19686145a65?s=128&d=identicon&r=PG", "display_name": "Rojo", "link": "https://stackoverflow.com/users/3597508/rojo"}, "is_accepted": false, "score": 0, "last_activity_date": 1528241453, "creation_date": 1528241453, "answer_id": 50710277, "question_id": 50709412, "link": "https://stackoverflow.com/questions/50709412/how-to-install-the-required-version-of-packages-jekyll-plugins-in-the-bundle-m/50710277#50710277", "title": "How to install the required version of packages (jekyll-plugins) in the bundle manager?", "body": "<p>You have to ensure that the command <code>bundle install</code> completes with no errors.</p>\n\n<p>Once it says all the gems have been installed, start the server with <code>bundle exec jekyll serve -w</code> to ensure that the correct gem versions are used.</p>\n\n<p>Have in mind that Jekyll will halt the execution if there are configuration errors or missing template/asset files that have been declared.</p>\n"}], "owner": {"reputation": 1, "user_id": 9900071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0bjfN.jpg?s=128&g=1", "display_name": "Spiker01", "link": "https://stackoverflow.com/users/9900071/spiker01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1528241453, "creation_date": 1528235239, "question_id": 50709412, "link": "https://stackoverflow.com/questions/50709412/how-to-install-the-required-version-of-packages-jekyll-plugins-in-the-bundle-m", "title": "How to install the required version of packages (jekyll-plugins) in the bundle manager?", "body": "<p>I do not write very well in English, but I hope you understand me.</p>\n\n<p>I decided to install the theme in my project on jekyll. Moved to the project folder. I ran the boundle install command, but some packages (from gemfile) were not installed. For example nakogiri since in my system there was no libxml2-dev (like so) for unpacking gem and (or) working with it (I so understood it). After fixing this and installing nokogiri, I started the Jekyll server with the command: jekyll serve -w. The server did not start because there were no packages:</p>\n\n<pre><code>listen (~&gt; 3.0)\nrouge (&lt;4,&gt; = 1.7)\nrb-fsevent (&gt; = 0.9.4, ~&gt; 0.9)\nffi (&lt;2,&gt; = 0.5.0)\n</code></pre>\n\n<p>I installed the packages manually, but the latest versions of the packages were installed (Maybe it was not entirely reasonable at that time). Now the server does not work, does not start, requiring exactly these package versions, but boundle unstall does not fix the package versions, but writes that everything is fine.</p>\n\n<p>I decided to install the package from the console by hand:</p>\n\n<pre><code>sudo bundle install --gemfile = listen-3.1\nDo not run Bundler as root. Bundler can ask for sudo if it is needed, and install your bundle as root will break this application for\nall non-root users on this machine.\n\n[!] There was an error parsing `listen-3.1`: No such file or directory @ rb_sysopen - /home/user01/jekyllsites/myblog01/listen-3.1. Bundler can not continue.\n</code></pre>\n\n<p>I did this not work.</p>\n\n<p>Question: What command from the console to install exactly the right version of packages?</p>\n\n<p>Thank you for watching.</p>\n"}, {"tags": ["ruby", "pry"], "answers": [{"tags": [], "owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "is_accepted": false, "score": 1, "last_activity_date": 1528257827, "creation_date": 1528257827, "answer_id": 50712091, "question_id": 50709236, "link": "https://stackoverflow.com/questions/50709236/how-do-you-change-the-color-of-the-output-for-an-object-in-pry/50712091#50712091", "title": "How do you change the color of the output for an object in Pry?", "body": "<p>Pry uses <a href=\"https://github.com/rubychan/coderay\" rel=\"nofollow noreferrer\">Coderay</a> for formatting the color of the output. You might need to customize the <a href=\"http://coderay.rubychan.de/doc/CodeRay/Scanners/Ruby.html\" rel=\"nofollow noreferrer\">Ruby scanner</a> to define a new token (similar to :float, :integer, :constant etc.,) and then define the formatting/color for the <a href=\"https://github.com/rubychan/coderay/blob/master/lib/coderay/encoders/terminal.rb\" rel=\"nofollow noreferrer\">terminal</a>.</p>\n"}], "owner": {"reputation": 383, "user_id": 3985721, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9bee4235ea6f190c87d8162dfcc75009?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Hadik", "link": "https://stackoverflow.com/users/3985721/josh-hadik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528257827, "creation_date": 1528234319, "question_id": 50709236, "link": "https://stackoverflow.com/questions/50709236/how-do-you-change-the-color-of-the-output-for-an-object-in-pry", "title": "How do you change the color of the output for an object in Pry?", "body": "<p>I'm building an object that is somewhat similar to nil, it's called nil_query, and is an instance of a singleton class called NilQuery.</p>\n\n<p>I would like this class to display in a similar fashion to true, false, and nil when called in Pry, meaning I want it to display in it's own special color, rather than just white:</p>\n\n<p><a href=\"https://i.stack.imgur.com/LJlat.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LJlat.png\" alt=\"enter image description here\"></a></p>\n\n<p>My first thought (which is how I got the results in picture above) was to just change the string from the inspect method of NilQuery to include color formatting:</p>\n\n<pre><code>class NilQuery\n  def inspect\n    \"\\e[36;1mnil_query\\e[0m\"\n  end\nend\n</code></pre>\n\n<p>This, of course, is a terrible idea since it changes the way that all errors are displayed to include the string of numbers defining the terminal output. So if I were to call a random undefined method in nil_query, the error would look like:</p>\n\n<pre><code>NoMethodError: undefined method `random_method' for \"\\e[36;1mnil_query\\e[0m\":NilQuery\n</code></pre>\n\n<p>Are their any good solutions out there? I tried looking into pretty print a bit but struggled to find any good documentation on how to use it.</p>\n\n<p>TL;DR - How can I change the color and format that a specific object or value shows up as in Pry?</p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 1541378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62406de1f543c145c5edbb12489ee7d6?s=128&d=identicon&r=PG", "display_name": "Ravish Shetty", "link": "https://stackoverflow.com/users/1541378/ravish-shetty"}, "edited": false, "score": 0, "creation_date": 1528298093, "post_id": 50709232, "comment_id": 88456079, "body": "i get this message     &#39;bundle&#39; is not recognized as an internal or external command, operable program or batch file.  when i run the below command  C:\\Users\\USERNAME&gt;bundle open nexpose_servicenow"}, {"owner": {"reputation": 429, "user_id": 7617687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb0c380ac37c50e2c0574e0ecec1a98?s=128&d=identicon&r=PG&f=1", "display_name": "radoAngelov", "link": "https://stackoverflow.com/users/7617687/radoangelov"}, "reply_to_user": {"reputation": 1, "user_id": 1541378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62406de1f543c145c5edbb12489ee7d6?s=128&d=identicon&r=PG", "display_name": "Ravish Shetty", "link": "https://stackoverflow.com/users/1541378/ravish-shetty"}, "edited": false, "score": 0, "creation_date": 1528358482, "post_id": 50709232, "comment_id": 88479434, "body": "Did you run <code>gem install bundler</code> ?"}], "tags": [], "owner": {"reputation": 429, "user_id": 7617687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb0c380ac37c50e2c0574e0ecec1a98?s=128&d=identicon&r=PG&f=1", "display_name": "radoAngelov", "link": "https://stackoverflow.com/users/7617687/radoangelov"}, "is_accepted": false, "score": 2, "last_activity_date": 1528234282, "creation_date": 1528234282, "answer_id": 50709232, "question_id": 50709138, "link": "https://stackoverflow.com/questions/50709138/how-do-we-debug-a-3rd-party-ruby-gems-in-a-windows-machine/50709232#50709232", "title": "How do we debug a 3rd party ruby gems in a Windows machine", "body": "<p>You have the gems on your local machine. </p>\n\n<ol>\n<li><p>Run <code>bundle open gem_name</code> and you will open the gem source code. If you don't configure a text editor for this command you will have to do it. Add a break point where you want to debug) byebug or debugger for example).</p></li>\n<li><p>In the <code>Gemfile</code> of your main app find the gem you just changed. Add the <code>path</code> option to it -> <code>gem_name, path: 'local_machine_path_to_the_gem</code>.</p></li>\n<li><p>Run <code>bundle install</code> again.</p></li>\n<li><p>Start debugging by testing the code that calla the gem. </p></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 1541378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62406de1f543c145c5edbb12489ee7d6?s=128&d=identicon&r=PG", "display_name": "Ravish Shetty", "link": "https://stackoverflow.com/users/1541378/ravish-shetty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528259828, "creation_date": 1528233824, "last_edit_date": 1528259828, "question_id": 50709138, "link": "https://stackoverflow.com/questions/50709138/how-do-we-debug-a-3rd-party-ruby-gems-in-a-windows-machine", "title": "How do we debug a 3rd party ruby gems in a Windows machine", "body": "<p>I am running a Ruby gem in a Windows virtual machine. \nThis is a 3rd party gem used to integrate 2 systems (servicenow and nexpose).\nI have no expertise in Ruby or Ruby gems so let me know how we can do this.</p>\n"}, {"tags": ["ruby", "httparty", "net-http", "open-uri", "faraday"], "answers": [{"tags": [], "owner": {"reputation": 2133, "user_id": 3820185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XZmR.jpg?s=128&g=1", "display_name": "wiesion", "link": "https://stackoverflow.com/users/3820185/wiesion"}, "is_accepted": true, "score": 1, "last_activity_date": 1528237154, "last_edit_date": 1528237154, "creation_date": 1528233997, "answer_id": 50709185, "question_id": 50708934, "link": "https://stackoverflow.com/questions/50708934/ascii-ruby-net-http-changing-request-uri/50709185#50709185", "title": "ASCII ruby net/http changing request uri", "body": "<p><code>,</code> is a legal character in a query (extended clarification is here <a href=\"https://stackoverflow.com/a/31300627/3820185\">https://stackoverflow.com/a/31300627/3820185</a>) </p>\n\n<p><code>ERB::Util.url_encode</code> instead <a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB/Util.html#method-c-url_encode\" rel=\"nofollow noreferrer\">does</a> replace <code>[^a-zA-Z0-9_\\-.]</code>:</p>\n\n<pre><code># File erb.rb, line 930\ndef url_encode(s)\n  s.to_s.dup.force_encoding(\"ASCII-8BIT\").gsub(/[^a-zA-Z0-9_\\-.]/n) {\n    sprintf(\"%%%02X\", $&amp;.unpack(\"C\")[0])\n  }\nend\n</code></pre>\n\n<p>So when doing the request, most probably the query is re-parsed to conform to the actual standards.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Also you don't need to use <code>ERB::Util.url_encode</code> at all, you can just pass your URL to <code>URI</code>, it will propery escape it according to the standards.</p>\n\n<pre><code>irb(main):001:0&gt; require 'net/http'\n=&gt; true\nirb(main):002:0&gt; link = URI 'http://example.com?q=Hello, World'\n=&gt; #&lt;URI::HTTP http://example.com?q=Hello,%20World&gt;\nirb(main):003:0&gt;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6181869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56622256b2c9f57197f6bf15fc6ecc5b?s=128&d=identicon&r=PG&f=1", "display_name": "Mro", "link": "https://stackoverflow.com/users/6181869/mro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 50709185, "answer_count": 1, "score": 0, "last_activity_date": 1528237154, "creation_date": 1528232804, "question_id": 50708934, "link": "https://stackoverflow.com/questions/50708934/ascii-ruby-net-http-changing-request-uri", "title": "ASCII ruby net/http changing request uri", "body": "<p>I need to perform a very specific request on a legacy system and discovered that during a get request the http libraries are changing any <code>%2C</code> back to a <code>,</code>. \nSame issue with net-http, httparty, faraday, and open-uri using different implementations</p>\n\n<pre><code>2.5.0 :001 &gt; require 'net/http'\n=&gt; true \n2.5.0 :002 &gt; require 'erb'\n=&gt; true \n2.5.0 :003 &gt; link = \"http://example.com?q=\" + ERB::Util.url_encode(\"Hello, World\")\n=&gt; \"http://example.com?q=Hello%2C%20World\" \n2.5.0 :004 &gt; uri = URI(link)\n=&gt; #&lt;URI::HTTP http://example.com?q=Hello%2C%20World&gt; \n2.5.0 :005 &gt; res = Net::HTTP.get_response(uri)\n=&gt; #&lt;Net::HTTPOK 200 OK readbody=true&gt; \n</code></pre>\n\n<p>All this looks good until I look at the actual request with VCR</p>\n\n<pre><code>http_interactions:\n  - request:\n    method: get\n    uri: http://example.com/?q=Hello,%20World\n    body:\n      encoding: US-ASCII\n      string: ''\n...\n</code></pre>\n\n<p>How do I keep the request to be <code>http://example.com?q=Hello%2C%20World</code>?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9899847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5bfa8f762f760f79ab1e38ad75947b?s=128&d=identicon&r=PG&f=1", "display_name": "user9899847", "link": "https://stackoverflow.com/users/9899847/user9899847"}, "edited": false, "score": 0, "creation_date": 1528404063, "post_id": 50708665, "comment_id": 88507365, "body": "Thanks @wiesion. That helped but caused another issue. I was able to bundle install on v2.5.1 but it is failing on the other version, saying that it needs ruby &gt;1.9. I am not sure what my gemfile path is set to how to update that for different projects."}, {"owner": {"reputation": 11, "user_id": 9899847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5bfa8f762f760f79ab1e38ad75947b?s=128&d=identicon&r=PG&f=1", "display_name": "user9899847", "link": "https://stackoverflow.com/users/9899847/user9899847"}, "edited": false, "score": 0, "creation_date": 1528602165, "post_id": 50708665, "comment_id": 88567465, "body": "It is trying to download concurrent-ruby 1.0.5 when i bundle install. The insrallation fails saying that it needs ruby &gt;1.9. I do not have concurrent-ruby 1.0.5  in my gemfile but for some reason it is trying to install."}], "tags": [], "owner": {"reputation": 2133, "user_id": 3820185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XZmR.jpg?s=128&g=1", "display_name": "wiesion", "link": "https://stackoverflow.com/users/3820185/wiesion"}, "is_accepted": false, "score": 2, "last_activity_date": 1528231511, "creation_date": 1528231511, "answer_id": 50708665, "question_id": 50708484, "link": "https://stackoverflow.com/questions/50708484/how-can-i-create-multiple-gemfile-to-run-with-different-ruby-version-with-uru/50708665#50708665", "title": "How can I create multiple Gemfile to run with different Ruby version with Uru?", "body": "<p>I would discourage from creating multiple gemsets, it will be a maintenance mess (that probably accounts for gemsets for different rubys as well), also there is a clean way to manage multiple ruby versions within a Gemset (given that you are 100% sure that you only serve to those versions):</p>\n\n<pre><code>if Gem::Version.new('1.8.7') == Gem::Version.new(RUBY_VERSION)\n   # your gemspec for 1.8.7\nelse\n   # your gemspec for 2.5.1\n</code></pre>\n\n<p>Using <code>Gemfile::Version</code> allows you to do version comparisons, for instance:</p>\n\n<pre><code>Gem::Version.new('1.8.7') &lt; Gem::Version.new('2.5.1')\n# =&gt; true\n</code></pre>\n\n<p>See the <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/rubygems/rdoc/Gem/Version.html\" rel=\"nofollow noreferrer\">docs</a> for more information</p>\n"}], "owner": {"reputation": 11, "user_id": 9899847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5bfa8f762f760f79ab1e38ad75947b?s=128&d=identicon&r=PG&f=1", "display_name": "user9899847", "link": "https://stackoverflow.com/users/9899847/user9899847"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528231511, "creation_date": 1528230675, "question_id": 50708484, "link": "https://stackoverflow.com/questions/50708484/how-can-i-create-multiple-gemfile-to-run-with-different-ruby-version-with-uru", "title": "How can I create multiple Gemfile to run with different Ruby version with Uru?", "body": "<p>How can I create multiple Gemfile to run with different Ruby version? I am using Uru to manage ruby versions and was wondering if we have something like create gemsets in RVM.\nI want to be able to run a Gemfile for Ruby v1.8.7 and another for v2.5.1. </p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "mailjet"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6405267, "user_type": "registered", "profile_image": "https://graph.facebook.com/1212705345436103/picture?type=large", "display_name": "Lisa", "link": "https://stackoverflow.com/users/6405267/lisa"}, "is_accepted": false, "score": 1, "last_activity_date": 1529330589, "creation_date": 1529330589, "answer_id": 50911270, "question_id": 50707827, "link": "https://stackoverflow.com/questions/50707827/ruby-in-rails-mailjet-jsonparseerror/50911270#50911270", "title": "ruby in Rails - mailjet jsonparseError", "body": "<p>Have you tried to remove this line in your initializer:\n<code>config.api_version = 'v3.1'</code></p>\n\n<p>Because this version is limited to Send API. Hope it helps</p>\n"}], "owner": {"reputation": 31, "user_id": 9225310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23bfbfe1008c3c6ffc1ac9ba46b3f36?s=128&d=identicon&r=PG&f=1", "display_name": "SmackerJacker", "link": "https://stackoverflow.com/users/9225310/smackerjacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529330589, "creation_date": 1528227854, "last_edit_date": 1528242033, "question_id": 50707827, "link": "https://stackoverflow.com/questions/50707827/ruby-in-rails-mailjet-jsonparseerror", "title": "ruby in Rails - mailjet jsonparseError", "body": "<p>Good evening community ,\ni have a problem,\ni am able to send emails with mailjet but i am not able to retrieve or add people to Lists. Everytime i get the following JSON-Parse Error. Do you have any idea, why i get this error?</p>\n\n<p>Example:</p>\n\n<pre><code>[1] pry(main)&gt; Mailjet::Listrecipient.all(limit: 0)\n</code></pre>\n\n<p>Why is it even html? When i explicit write (format: :json) i still get this error.\nMaybe i just do a stupid error, but atm, i dont see what i am doing wrong.</p>\n\n<p>Thanks in advance</p>\n\n<pre><code>JSON::ParserError: 822: unexpected token at \n '&lt;html&gt;\n &lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;\n &lt;body bgcolor=\"white\"&gt;\n &lt;center&gt;&lt;h1&gt;404 Not Found&lt;/h1&gt;&lt;/center&gt;\n &lt;hr&gt;&lt;center&gt;nginx&lt;/center&gt;\n &lt;/body&gt;\n&lt;/html&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "tcp", "tcpclient"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1528224416, "post_id": 50706987, "comment_id": 88423072, "body": "Tip: If you&#39;re sending arbitrary files, use <code>read</code> and <code>write</code> on fixed-length chunks. <code>gets</code> is for line-based files and will act really strangely on binary data, possibly even wrecking it due to CR-LF conversion."}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1528224455, "post_id": 50706987, "comment_id": 88423092, "body": "What have you tried? Can you show us the server program that isn&#39;t working?"}, {"owner": {"reputation": 418, "user_id": 336879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/304a917272a2cf18e14934ad00303f90?s=128&d=identicon&r=PG", "display_name": "Adjam", "link": "https://stackoverflow.com/users/336879/adjam"}, "edited": false, "score": 0, "creation_date": 1528224855, "post_id": 50706987, "comment_id": 88423267, "body": "tadman: It doesn&#39;t have to use gets, thanks for the tip! Linuxios, I&#39;vee added my server code, but it doesn&#39;t seem to work. I&#39;m too new to TCP to figure out without a working code example. I&#39;ve tried copying different snippets of code but there doesn&#39;t seem to be a definitive stack overflow answer to this problem that works. I&#39;ve got a work around using MySQL but its very cumbersome"}], "answers": [{"comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1528225713, "post_id": 50707287, "comment_id": 88423658, "body": "And just note that this particular example only serves one client, and then shuts down."}, {"owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1528226178, "post_id": 50707287, "comment_id": 88423861, "body": "Right. It looked like that was what he was aiming for in his example. Updated to make that more clear"}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1528226246, "post_id": 50707287, "comment_id": 88423907, "body": "Oh, definitely. Just wanted that to be stated explicitly for future viewers."}, {"owner": {"reputation": 418, "user_id": 336879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/304a917272a2cf18e14934ad00303f90?s=128&d=identicon&r=PG", "display_name": "Adjam", "link": "https://stackoverflow.com/users/336879/adjam"}, "edited": false, "score": 0, "creation_date": 1528227545, "post_id": 50707287, "comment_id": 88424545, "body": "I love the simplicity, that&#39;s how I learn best. Sadly it gives an error, I&#39;ve updated the question to include command prompts error message. I hope I can get it to run, stack overflow is lacking a simple working example for Ruby"}, {"owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "edited": false, "score": 0, "creation_date": 1528227838, "post_id": 50707287, "comment_id": 88424669, "body": "Are you sure you don&#39;t have another socket bound to that port? If a socket is currently bound to that port you&#39;ll get that error."}], "tags": [], "owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "is_accepted": false, "score": 2, "last_activity_date": 1528226138, "last_edit_date": 1528226138, "creation_date": 1528225634, "answer_id": 50707287, "question_id": 50706987, "link": "https://stackoverflow.com/questions/50706987/code-for-sending-a-message-or-file-over-tcp-in-ruby/50707287#50707287", "title": "Code for sending a message or file over TCP in Ruby", "body": "<p>Taking the documentation from <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/socket/rdoc/Socket.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.5.1/libdoc/socket/rdoc/Socket.html</a>, you seem to be looking for something like this:</p>\n\n<pre><code>require 'socket'\nserver = TCPServer.new(1540)\nclient = server.accept\nclient.puts \"GETHELLO\"\nclient.close\nserver.close\n</code></pre>\n\n<p>More generally, if you'd like the server accessible for multiple clients to request data from, you'd have a loop running like</p>\n\n<pre><code>loop do\n  client = server.accept\n  client.puts \"gethello\"\n  client.close\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 418, "user_id": 336879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/304a917272a2cf18e14934ad00303f90?s=128&d=identicon&r=PG", "display_name": "Adjam", "link": "https://stackoverflow.com/users/336879/adjam"}, "edited": false, "score": 0, "creation_date": 1528228237, "post_id": 50707764, "comment_id": 88424848, "body": "This code works on my machine first try! Big thanks rahul as well as others!"}], "tags": [], "owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "is_accepted": true, "score": 3, "last_activity_date": 1528227655, "creation_date": 1528227655, "answer_id": 50707764, "question_id": 50706987, "link": "https://stackoverflow.com/questions/50706987/code-for-sending-a-message-or-file-over-tcp-in-ruby/50707764#50707764", "title": "Code for sending a message or file over TCP in Ruby", "body": "<p>@adjam you haven't created a TcpServer,\n<a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/TCPSocket.html\" rel=\"nofollow noreferrer\">TCPSocket</a>  is used to create TCP/IP client socket</p>\n\n<p>To create TCP/IP server you have to use <a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/TCPServer.html\" rel=\"nofollow noreferrer\">TCPServer</a></p>\n\n<p>EX:\nTcp/ip Server code:</p>\n\n<pre><code>require 'socket'\nserver = TCPServer.open(2000)\nclient = server.accept # Accept client\nwhile (response = client.gets) # read data send by client\n print response\nend\n</code></pre>\n\n<p>Tcp/ip Client code:</p>\n\n<pre><code>require 'socket'\nclient = TCPSocket.open('localhost', 2000)\nclient.puts \"hello\"\nclient.close;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 13890295, "user_type": "registered", "profile_image": "https://graph.facebook.com/917118264975438/picture?type=large", "display_name": "Bibin Venugopal", "link": "https://stackoverflow.com/users/13890295/bibin-venugopal"}, "is_accepted": false, "score": 0, "last_activity_date": 1598196876, "last_edit_date": 1598196876, "creation_date": 1598127524, "answer_id": 63540740, "question_id": 50706987, "link": "https://stackoverflow.com/questions/50706987/code-for-sending-a-message-or-file-over-tcp-in-ruby/63540740#63540740", "title": "Code for sending a message or file over TCP in Ruby", "body": "<p><code>tcp_server.rb</code></p>\n<pre class=\"lang-rb prettyprint-override\"><code>require &quot;socket&quot;\n\nserver = TCPServer.new(1234)\n\nloop do  # Keep the server alive\n  session = server.accept\n  puts &quot;Request arrived&quot;\n  session.write &quot;Time is #{Time.now}&quot; # Send data to client\n  session.close\nend\n</code></pre>\n<p><code>tcp_client.rb</code></p>\n<pre class=\"lang-rb prettyprint-override\"><code>require &quot;socket&quot;\n\nsocket = TCPSocket.open(&quot;localhost&quot;, 1234)\nputs socket.gets # Print sever response\nsocket.close\n</code></pre>\n<hr />\n<p>Now  - If you want two-way communication between server and client use following</p>\n<p><code>tcp_client.rb</code></p>\n<pre class=\"lang-rb prettyprint-override\"><code>require &quot;socket&quot;\n\nsocket = TCPSocket.open(&quot;localhost&quot;, 1234)\nsocket.puts &quot;Sample data to server&quot; # Send data to server\nputs socket.gets # Print sever response\nsocket.close\n</code></pre>\n<p><code>tcp_server.rb</code></p>\n<pre class=\"lang-rb prettyprint-override\"><code>require &quot;socket&quot;\n\nserver = TCPServer.new 1234\n\nloop do\n  session = server.accept\n  puts &quot;Data recieved - #{session.gets}&quot; # Read data from client\n  session.write &quot;Time is #{Time.now}&quot; # Send data to clent\n  session.close\nend\n</code></pre>\n"}], "owner": {"reputation": 418, "user_id": 336879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/304a917272a2cf18e14934ad00303f90?s=128&d=identicon&r=PG", "display_name": "Adjam", "link": "https://stackoverflow.com/users/336879/adjam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1259, "favorite_count": 0, "accepted_answer_id": 50707764, "answer_count": 3, "score": 1, "last_activity_date": 1598196876, "creation_date": 1528224297, "last_edit_date": 1528228011, "question_id": 50706987, "link": "https://stackoverflow.com/questions/50706987/code-for-sending-a-message-or-file-over-tcp-in-ruby", "title": "Code for sending a message or file over TCP in Ruby", "body": "<p>I've been trying for a couple of days with limited success to use TCP to make two ruby programs on the same or different machines communicate.</p>\n\n<p>I'm looking for example 'client' and 'server' scripts that will work straight away, once I've chosen ports that work.</p>\n\n<p>Client code I found that seems to work, shown below.</p>\n\n<p>But I haven't got a server working with it.</p>\n\n<pre><code># Seems to work for some reason\nrequire 'socket'\n\ntcp_client=TCPSocket.new('localhost',1540)\nwhile grab_string=tcp_client.gets\nputs(grab_string)\nend\ntcp_client.close\n</code></pre>\n\n<p>I'm interested in the simplest possible solution, that works on my machine.</p>\n\n<p>All it has to do is send a string. The answer I'm looking for is just like <a href=\"https://stackoverflow.com/questions/27241804/sending-a-file-over-tcp-sockets-in-python\">this</a> but with ruby, instead of python.</p>\n\n<p>Feel free to change the code for client and server, with only half the puzzle in place I'm not sure if its works or not.</p>\n\n<p>Server code</p>\n\n<pre><code># Server\nrequire 'socket'\n\nsock = TCPSocket.new('localhost', 1540)\nsock.write 'GETHELLO'\nputs sock.read(5) # Since the response message has 5 bytes.\nsock.close\n</code></pre>\n\n<p>Using the code suggested by kennycoc I get the following error message</p>\n\n<pre><code>Server.rb:3:in `initialize': Only one usage of each socket address (protocol/network address/port) is normally permitted. - bind(2) for nil port 1540 (Errno::EADDRINUSE)\n        from Server.rb:3:in `new'\n        from Server.rb:3:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 969, "user_id": 2744963, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d54577f9d444943e85dafbbd7ab0b85e?s=128&d=identicon&r=PG", "display_name": "Justus Eapen", "link": "https://stackoverflow.com/users/2744963/justus-eapen"}, "edited": false, "score": 0, "creation_date": 1528220988, "post_id": 50706098, "comment_id": 88421342, "body": "Hmm. Sounds like it might be an issue with your js loading. Can you show us the <code>&lt;head&gt;</code> in your layout?"}, {"owner": {"reputation": 689, "user_id": 9899126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w3N3oKCO2bw/AAAAAAAAAAI/AAAAAAAAGaw/bT7zqY0zqy4/photo.jpg?sz=128", "display_name": "LaurenAH", "link": "https://stackoverflow.com/users/9899126/laurenah"}, "reply_to_user": {"reputation": 969, "user_id": 2744963, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d54577f9d444943e85dafbbd7ab0b85e?s=128&d=identicon&r=PG", "display_name": "Justus Eapen", "link": "https://stackoverflow.com/users/2744963/justus-eapen"}, "edited": false, "score": 0, "creation_date": 1528223512, "post_id": 50706098, "comment_id": 88422614, "body": "Sure, I attached the entire head in codepen: <a href=\"https://codepen.io/lahesty/pen/bKeNVo\" rel=\"nofollow noreferrer\">codepen.io/lahesty/pen/bKeNVo</a> It&#39;s quite extensive (we&#39;re using a lot of js, google charts, etc, so I thought I&#39;d include the whole thing)"}], "owner": {"reputation": 689, "user_id": 9899126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w3N3oKCO2bw/AAAAAAAAAAI/AAAAAAAAGaw/bT7zqY0zqy4/photo.jpg?sz=128", "display_name": "LaurenAH", "link": "https://stackoverflow.com/users/9899126/laurenah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528220799, "creation_date": 1528220799, "question_id": 50706098, "link": "https://stackoverflow.com/questions/50706098/page-height-will-expand-upon-refresh-only-not-initial-load-bootstrap", "title": "Page Height will expand upon refresh only, not initial load (Bootstrap)", "body": "<p>When I load the page for the first time and the table I have within it is empty, the page/footer/etc. will come up and sit right beneath it, rather than extend to the bottom of the viewport as I want. However, that does happen when I refresh.</p>\n\n<p>I have form helpers to load content in side the main layout. They're each in a container tag. I tried many different combinations of setting my elements/divs to height:100% but none worked. They still only looked closer to how I want them after refresh. Happens on multiple browsers.\nRails 5\nRuby 2.3.1</p>\n\n<p>In my application.html.erb:</p>\n\n<pre><code>    &lt;div class=&lt;%= (defined? @home) ? \"home\" : \"pages\" %&gt;&gt;\n    &lt;div id=\"page-wrapper\" class=\"page-wrapper\" &gt;       \n        &lt;%= bootstrap_flash %&gt;        \n        &lt;%= yield %&gt;   \n    &lt;/div&gt; \n    &lt;%= render \"footer\" %&gt;\n</code></pre>\n\n<p>CSS:</p>\n\n<pre><code>    .home #page-wrapper {\n      padding-left: 0px;\n      margin: 0 0 0 0px!important;\n    }\n    .footer {\n    height: 60px;\n    position: relative;\n    bottom: 0;\n    border-top: 1px solid transparent;\n    border-top-color: #e7e7e7;\n    margin: auto;\n    }\n</code></pre>\n\n<p>Let me know if there's any other info I can give.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "graphql", "apollo-client", "graphql-ruby"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 5300561, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-palbVoDM4l0/AAAAAAAAAAI/AAAAAAAAAqg/4k8_ap60nvI/photo.jpg?sz=128", "display_name": "Vimox Shah", "link": "https://stackoverflow.com/users/5300561/vimox-shah"}, "edited": false, "score": 0, "creation_date": 1528264503, "post_id": 50706931, "comment_id": 88434972, "body": "I did not get can you explain little bit more? how can I store file before sending data to resolver? @mohsen-zarezardeyni"}], "tags": [], "owner": {"reputation": 856, "user_id": 2586595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EZf6q.jpg?s=128&g=1", "display_name": "Mohsen ZareZardeyni", "link": "https://stackoverflow.com/users/2586595/mohsen-zarezardeyni"}, "is_accepted": false, "score": -4, "last_activity_date": 1557146951, "last_edit_date": 1557146951, "creation_date": 1528224130, "answer_id": 50706931, "question_id": 50705123, "link": "https://stackoverflow.com/questions/50705123/how-can-i-pass-multipart-form-data-and-file-upload-using-graphql-ruby-at-servers/50706931#50706931", "title": "how can I pass multipart form-data and file upload using graphql-ruby at serverside?", "body": "<p>Define a <code>File</code> type in your schema. submit the form normally!\nIn the server side, before sending data to <code>GraphQL resolver</code>, save the file and store change the variable!</p>\n\n<p>something like <a href=\"https://github.com/jaydenseric/apollo-upload-server\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Apollo Server 2 has file upload support! use <a href=\"https://blog.apollographql.com/file-uploads-with-apollo-server-2-0-5db2f3f60675\" rel=\"nofollow noreferrer\">this article</a> from Apollo in order to have file upload support in your backend:</p>\n"}], "owner": {"reputation": 71, "user_id": 5300561, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-palbVoDM4l0/AAAAAAAAAAI/AAAAAAAAAqg/4k8_ap60nvI/photo.jpg?sz=128", "display_name": "Vimox Shah", "link": "https://stackoverflow.com/users/5300561/vimox-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1896, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1557146951, "creation_date": 1528216972, "question_id": 50705123, "link": "https://stackoverflow.com/questions/50705123/how-can-i-pass-multipart-form-data-and-file-upload-using-graphql-ruby-at-servers", "title": "how can I pass multipart form-data and file upload using graphql-ruby at serverside?", "body": "<p>below code is for mutation</p>\n\n<pre><code>field :companyUpdate, Types::CompanyType do\n    argument :id, !types.ID\n    argument :file, Types::FileType\n    resolve -&gt; (obj, args, ctx) {\n      company = ::Network::Company.find(args[:id])\n      company.update!(logo: args[:file])\n      company\n    }\n  end\n</code></pre>\n\n<p>and file_type.rb is </p>\n\n<pre><code>    Types::FileType = GraphQL::ScalarType.define do\n  name 'File'\n  description 'action_dispatch_uploaded_file'\n  coerce_input -&gt;(action_dispatch_uploaded_file, ctx) {\n    action_dispatch_uploaded_file\n  }\nend\n</code></pre>\n\n<p>it is not working. apollo client is using apollo-upload-client for uploading the file but it gives error as file is null.\nwhat's the solution?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 2, "creation_date": 1528218282, "post_id": 50705096, "comment_id": 88420104, "body": "It&#39;s &#39;un-Rails-y&#39; to put a <code>find_each</code> query directly into your view. You should probably start by getting that into a single query in the controller (use joins instead of nested <code>find_each</code> to avoid n+1 issues), store it in an instance variable, and the use that instance variable in the view"}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "reply_to_user": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1528223016, "post_id": 50705096, "comment_id": 88422382, "body": "@NMPennypacker Thanks, I tried to use <code>@categories = BlogCategory.top_level.joins(params[:id])</code> in my <code>index</code> method but it raised a SyntaxError. Did I pass the wrong argument through? I implemented it into my view via this code: <code>&lt;% @categories do |category| %&gt;</code>"}, {"owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "edited": false, "score": 1, "creation_date": 1528225146, "post_id": 50705096, "comment_id": 88423401, "body": "The html dropdowns are what you are trying to achieve by iterating on BlogCategory ? What action does <code>link_to &quot;BLOG&quot;, blog_path</code> trigger ?"}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "reply_to_user": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "edited": false, "score": 0, "creation_date": 1528227027, "post_id": 50705096, "comment_id": 88424278, "body": "@sovalina Oh, that just intended to link to the blogs main page (it&#39;s currently an old link pointing to the url: <code>&#47;posts</code> instead of what I&#39;m on right now which is <code>&#47;blog_categories</code> I might switch it back though once I figure all of this out."}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "reply_to_user": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "edited": false, "score": 0, "creation_date": 1528388959, "post_id": 50705096, "comment_id": 88499837, "body": "@sovalina and yes, I&#39;m trying to use the HTML dropdowns to iterate through BlogCategory."}, {"owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "edited": false, "score": 1, "creation_date": 1528398507, "post_id": 50705096, "comment_id": 88504582, "body": "@Jake how do you get your <code>params[:id]</code> inside your index view ? if you want to iterate through all your blog_categories why do you want to reach one specific <code>@category</code> inside your index controller ?"}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "reply_to_user": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "edited": false, "score": 0, "creation_date": 1528402140, "post_id": 50705096, "comment_id": 88506413, "body": "@sovalina I updated my question with my <code>private</code> code. I want to iterate through every <code>sub_category</code> so I can display only one subcategory at a time (or all subcategories under a specific main category). - ex: I want to go take a look at all of the software reviews on the website, so I click on the software link under the reviews dropdown and have it isolate the posts with a <code>blog_category_id</code> of that specific category."}], "answers": [{"comments": [{"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1528721633, "post_id": 50789323, "comment_id": 88602327, "body": "Thanks, I actually don&#39;t want to show every category at once in any case but would want to show every subcategory of a single main category. Also, how would I make it so by default, only the 5 most recent posts of any category are displayed on the index? I&#39;m not very familiar with jquery either, I just wasn&#39;t sure if it would be the only way to solve this."}, {"owner": {"reputation": 6692, "user_id": 762747, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2e07fdac9a5b0de8a17a0e5b6a77acef?s=128&d=identicon&r=PG", "display_name": "amit_saxena", "link": "https://stackoverflow.com/users/762747/amit-saxena"}, "reply_to_user": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 1, "creation_date": 1528750678, "post_id": 50789323, "comment_id": 88617808, "body": "I don&#39;t exactly get what you are trying to say here, but if you only want to show 1 category and all it&#39;s subcategories on index page, then change the controller query to <code>BlogCategory.find(params[:id]).includes(sub_categories: :posts)</code>. If you want to show all categories, but show subcategories only on clicking a category, then generate the complete view as I suggest and then use jquery to show/hide relevant elements in the HTML on category clicks."}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1528750968, "post_id": 50789323, "comment_id": 88617909, "body": "Oh, I was trying to get something where a link like: <code>&lt;li role=&quot;presentation&quot;&gt;&lt;a href=&quot;#&quot;&gt;All &lt;%= category.name %&gt;&lt;&#47;a&gt;&lt;&#47;li&gt;</code> to display all of the posts that belong to subcategories that belong to the main category."}, {"owner": {"reputation": 6692, "user_id": 762747, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2e07fdac9a5b0de8a17a0e5b6a77acef?s=128&d=identicon&r=PG", "display_name": "amit_saxena", "link": "https://stackoverflow.com/users/762747/amit-saxena"}, "reply_to_user": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1528751031, "post_id": 50789323, "comment_id": 88617928, "body": "As for limiting results to only 5 recent posts, it probably isn&#39;t possible using a single ActiveRecord query. You&#39;ll have to iterate on all sub_categories, and query posts of each sub_category with <code>.limit(5)</code>. Having said that, that&#39;s too many queries for a single page. You probably need to make some architectural changes to your app, and probably need to cache recent 5 posts per sub_category somewhere (redis, memcached). You can then query this cache to render your index page, which should be very fast, and you&#39;ll not even need to hit the database."}, {"owner": {"reputation": 6692, "user_id": 762747, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2e07fdac9a5b0de8a17a0e5b6a77acef?s=128&d=identicon&r=PG", "display_name": "amit_saxena", "link": "https://stackoverflow.com/users/762747/amit-saxena"}, "reply_to_user": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 1, "creation_date": 1528751217, "post_id": 50789323, "comment_id": 88617994, "body": "I believe &quot;main category&quot; is the category on which the user clicked. If you want it on the same page, use jquery to show the subcategories and posts of this category and hide everything else. Look at the jquery example link I shared. If you want the user to land on a different page on that link click, then the new controller action should do the query <code>BlogCategory.find(params[:id]).includes(sub_categories: :posts)</code> and render a new view with sub_categories and posts obtained from this query."}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1528751586, "post_id": 50789323, "comment_id": 88618128, "body": "I would like it to be on a seperate page but don&#39;t know how to apply all of this code to make it happen. I&#39;ve tried to use that query and it raises this error: <code>ActiveRecord::RecordNotFound in BlogCategoriesController#index</code> &quot;Couldn&#39;t find BlogCategory with &#39;id&#39;=&quot;"}, {"owner": {"reputation": 6692, "user_id": 762747, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2e07fdac9a5b0de8a17a0e5b6a77acef?s=128&d=identicon&r=PG", "display_name": "amit_saxena", "link": "https://stackoverflow.com/users/762747/amit-saxena"}, "reply_to_user": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1528753262, "post_id": 50789323, "comment_id": 88618741, "body": "If you want that to happen on a separate page, you&#39;ll need to have 2 actions and routes. The first page just displays the categories, and all those categories are links to the second action. The links will have the category id in the URL and clicking it will call a different action, which will query the sub_categories and posts for the category (as I suggested), and render the new view for this second action. I suggest that you read through the rails guide to get a better understanding of how a rails application and routes work. I hope this makes sense."}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1528832253, "post_id": 50789323, "comment_id": 88654140, "body": "I would also add that this same navigation system is used on each <code>posts.show</code> so it would have to link to the specific subcategory&#39;s posts based on the selection."}, {"owner": {"reputation": 6692, "user_id": 762747, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2e07fdac9a5b0de8a17a0e5b6a77acef?s=128&d=identicon&r=PG", "display_name": "amit_saxena", "link": "https://stackoverflow.com/users/762747/amit-saxena"}, "reply_to_user": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1529065779, "post_id": 50789323, "comment_id": 88752753, "body": "Probably you should explore Ajax calls as well. That way you will not need to load the menus every time (less queries). You can just load a partial with the posts on each category click."}], "tags": [], "owner": {"reputation": 6692, "user_id": 762747, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2e07fdac9a5b0de8a17a0e5b6a77acef?s=128&d=identicon&r=PG", "display_name": "amit_saxena", "link": "https://stackoverflow.com/users/762747/amit-saxena"}, "is_accepted": false, "score": 3, "last_activity_date": 1528678380, "creation_date": 1528678380, "answer_id": 50789323, "question_id": 50705096, "link": "https://stackoverflow.com/questions/50705096/display-specific-category-based-on-link-pressed-ruby-on-rails/50789323#50789323", "title": "Display specific category based on link pressed | Ruby on Rails", "body": "<p>Looking at your code and question, it seems you want to show all the categories, their sub categories and the posts in each sub category on your index page. I am assuming you have a finite number of posts, else you might want to limit it to n (5?) number of posts per sub category. If so, you can have the following controller:</p>\n\n<pre><code>def index\n  @categories = BlogCategory.top_level.includes(sub_categories: :posts)\nend\n</code></pre>\n\n<p>Then in the view, you can easily access <code>@categories</code>, <code>@categories[i].sub_categories</code> and <code>@categories[i].sub_categories[j].posts</code> without any extra queries being triggered from the view. Something on the lines of:</p>\n\n<pre><code>&lt;% @categories.each do |category| %&gt;\n  &lt;li role=\"presentation\" class=\"dropdown\"&gt;\n  &lt;a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\"&gt;\n    &lt;%= category.name %&gt; &lt;span class=\"caret\"&gt;&lt;/span&gt;\n  &lt;/a&gt;\n  &lt;ul class=\"dropdown-menu\"&gt;\n    &lt;% category.sub_categories.each do |sub_category| %&gt;\n      &lt;li role=\"presentation\"&gt;&lt;a href=\"#\"&gt;&lt;%= sub_category.name %&gt;&lt;/a&gt;&lt;/li&gt;\n      &lt;!-- And if you want to show the posts here, then loop through sub_category.posts --&gt;\n    &lt;% end %&gt;\n  &lt;/ul&gt;\n  &lt;/li&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>You can use jquery to show and hide relevant sub categories and posts depending on what the user clicks. Here's an example:\n<a href=\"http://api.jquery.com/show/\" rel=\"nofollow noreferrer\">http://api.jquery.com/show/</a></p>\n"}, {"tags": [], "owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "is_accepted": true, "score": 0, "last_activity_date": 1530232897, "creation_date": 1530232897, "answer_id": 51092835, "question_id": 50705096, "link": "https://stackoverflow.com/questions/50705096/display-specific-category-based-on-link-pressed-ruby-on-rails/51092835#51092835", "title": "Display specific category based on link pressed | Ruby on Rails", "body": "<p><strong>This is the solution I found to work for me:</strong></p>\n\n<p>You can link to an item in a table (in this case the blog_categories table) by using the respective <code>id</code> (or <code>slug</code> if you're using them) in a link path.</p>\n\n<p>Example: The subcategory you want to link to has an <code>id</code> of \"1\" (or a slug of \"reviews\") you can link to it like so:</p>\n\n<p>With ID: <code>&lt;a href=\"/blog_category/1\"&gt;Reviews&lt;/a&gt;</code></p>\n\n<p>With Slug: <code>&lt;a href=\"/blog/reviews\"&gt;All Reviews&lt;/a&gt;</code></p>\n\n<p>This can be done for all of the links in a dropdown:</p>\n\n<pre><code>&lt;li role=\"presentation\" class=\"dropdown\"&gt;\n  &lt;a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\"&gt;CATEGORIES &lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/a&gt;\n  &lt;ul class=\"dropdown-menu\"&gt;\n    &lt;!-- without slugs --&gt;\n    &lt;li role=\"presentation\"&gt;&lt;a href=\"/blog_categories/1\"&gt;Reviews&lt;/a&gt;&lt;/li&gt;\n    &lt;li role=\"presentation\"&gt;&lt;a href=\"/blog_categories/2\"&gt;Tutorials&lt;/a&gt;&lt;/li&gt;\n    &lt;!-- with slugs --&gt;\n    &lt;li role=\"presentation\"&gt;&lt;a href=\"/blog/reviews\"&gt;Reviews&lt;/a&gt;&lt;/li&gt;\n    &lt;li role=\"presentation\"&gt;&lt;a href=\"/blog/tutorials\"&gt;Tutorials&lt;/a&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>Basically the format of these links will be <code>&lt;a href=\"/[table_name]/[table_item]&gt;Link text&lt;/a&gt;</code></p>\n"}], "owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 0, "accepted_answer_id": 51092835, "answer_count": 2, "score": 8, "last_activity_date": 1530232897, "creation_date": 1528216874, "last_edit_date": 1528823497, "question_id": 50705096, "link": "https://stackoverflow.com/questions/50705096/display-specific-category-based-on-link-pressed-ruby-on-rails", "title": "Display specific category based on link pressed | Ruby on Rails", "body": "<p>I have a blog that renders every single category with all of their respective sub_categories on the same page. (index view) I have a nav section that I want to utilize to render only a specific subcategories' posts based on the link pressed. I don't know if this is possible with ruby alone, so I thought JQuery might be the way.</p>\n\n<p><strong>blog_categories index.html.erb:</strong></p>\n\n<pre><code>&lt;%= link_to \"BLOG\", blog_path %&gt; &lt;!-- Will render latest posts. --&gt;\n\n&lt;li role=\"presentation\" class=\"dropdown\"&gt;\n  &lt;a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\"&gt;\n    NEWS &lt;span class=\"caret\"&gt;&lt;/span&gt;\n  &lt;/a&gt;\n  &lt;ul class=\"dropdown-menu\"&gt;\n    &lt;li role=\"presentation\"&gt;&lt;a href=\"#\"&gt;All News&lt;/a&gt;&lt;/li&gt; &lt;!-- Will render all subcategories that belong to the \"news\" category --&gt;\n    &lt;li role=\"presentation\"&gt;&lt;a href=\"#\"&gt;Good News&lt;/a&gt;&lt;/li&gt;\n    &lt;li role=\"presentation\"&gt;&lt;a href=\"#\"&gt;Bad News&lt;/a&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n&lt;/li&gt;\n\n&lt;li role=\"presentation\" class=\"dropdown\"&gt;\n  &lt;a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\"&gt;\n    REVIEWS &lt;span class=\"caret\"&gt;&lt;/span&gt;\n  &lt;/a&gt;\n  &lt;ul class=\"dropdown-menu\"&gt;\n    &lt;li role=\"presentation\"&gt;&lt;a href=\"#\"&gt;All Reviews&lt;/a&gt;&lt;/li&gt;\n    &lt;li role=\"presentation\"&gt;&lt;a href=\"#\"&gt;Software&lt;/a&gt;&lt;/li&gt;\n    &lt;li role=\"presentation\"&gt;&lt;a href=\"#\"&gt;Hardware&lt;/a&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n&lt;/li&gt;\n\n&lt;% BlogCategory.top_level.find_each do |category| %&gt;\n  &lt;% category.sub_categories.find_each do |sub_category| %&gt;\n    &lt;% sub_category.posts.find_each do |post| %&gt;\n\n      &lt;%= link_to post do %&gt;\n        ...\n      &lt;% end %&gt;\n\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>The blog_categories_controller:</strong></p>\n\n<pre><code>def index\n  @category = BlogCategory.find_by_id(params[:id])\n  unless @category.nil? # Allows for categories to have nothing in them, eliminating the NoMethodError\n    @sub_category = @category.sub_categories.first\n    @posts = @subcategory.posts\n  end\nend\n\n\nprivate\n\n  def cat_params\n    params.require(:blog_category).permit(:name, :parent_id, :sub_category)\n  end\n</code></pre>\n\n<p>My <code>sub_categories</code> are related to main categories through a <code>parent_id</code> column in the <code>blog_categories</code> table via self-referential relation.</p>\n\n<p>I've read a bit about active record querying on <a href=\"http://guides.rubyonrails.org/active_record_querying.html#conditions\" rel=\"noreferrer\">guides.rubyonrails.org</a> and seen something about conditions such as <code>Client.where(\"orders_count = ?\", params[:orders])</code> Could this be used?</p>\n\n<p>If this isn't the proper way of using the HTML dropdowns to iterate through BlogCategory, I would love to know what way would be best to handle this problem, thank you!</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1528216602, "post_id": 50704751, "comment_id": 88419234, "body": "This a curious approach. I wonder why you didn&#39;t make <code>Country</code> and <code>Region</code> and associate them. Life would be somewhat easier."}, {"owner": {"reputation": 1796, "user_id": 2809686, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/df4c97dd08b33a8a0684cd226bfe89ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kingsley Simon", "link": "https://stackoverflow.com/users/2809686/kingsley-simon"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1528218072, "post_id": 50704751, "comment_id": 88420014, "body": "@jvillian because i am getting my list of regions and countries from the ISO3166 global configuration and each of those records is tied to a company so meaning there is a company id field for each of those records. Making a Country and Region table will require manual entry of records into these table which i feel is nt necessary"}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 7755288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d667a4f6415eddb5abbd701b6296eadc?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh V", "link": "https://stackoverflow.com/users/7755288/rajesh-v"}, "is_accepted": false, "score": 0, "last_activity_date": 1528216553, "creation_date": 1528216553, "answer_id": 50704992, "question_id": 50704751, "link": "https://stackoverflow.com/questions/50704751/sql-query-where-array-is-in-array-field/50704992#50704992", "title": "SQL Query Where Array is in Array Field", "body": "<p>There is no direct approach to query serialized data. But the other work around is by selecting/filtering from all the results. Eg:</p>\n\n<blockquote>\n  <p>Model.all.select{|s| (s.countries &amp;['Malaysia',\n  'Singapore']).present?}</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528291252, "post_id": 50706632, "comment_id": 88451329, "body": "This is the correct answer. In order to find out if a value is contained in a <code>postgres</code> array column you must search all the values in the array using <code>value = ANY(column)</code>. This means that if you want to search for multiple values you will need need to search them independently using <code>OR</code>. If you wanted to make sure that both Malaysia and Singapore existed you could use <code>AND</code> instead via  <code>query = query.where(&quot;:name = ANY(country_list.countries)&quot;, name: c)</code> inside the loop"}], "tags": [], "owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "is_accepted": false, "score": 1, "last_activity_date": 1528223281, "last_edit_date": 1528223281, "creation_date": 1528222971, "answer_id": 50706632, "question_id": 50704751, "link": "https://stackoverflow.com/questions/50704751/sql-query-where-array-is-in-array-field/50706632#50706632", "title": "SQL Query Where Array is in Array Field", "body": "<p>Try out this:</p>\n\n<pre><code>countries = ['Malaysia', 'Singapore']\nquery = CountryList.where(\":name = ANY(country_list.countries)\", name: countries[0])\n\ncountries[1..-1].each do |c|\n  query = query.or(CountryList.where(\":name = ANY(country_list.countries)\", name: c))\n end\nquery\n</code></pre>\n\n<p>Have Checked its working</p>\n\n<p><a href=\"https://i.stack.imgur.com/e62e9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e62e9.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 1796, "user_id": 2809686, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/df4c97dd08b33a8a0684cd226bfe89ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kingsley Simon", "link": "https://stackoverflow.com/users/2809686/kingsley-simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1528223281, "creation_date": 1528215600, "last_edit_date": 1528215852, "question_id": 50704751, "link": "https://stackoverflow.com/questions/50704751/sql-query-where-array-is-in-array-field", "title": "SQL Query Where Array is in Array Field", "body": "<p>I have a table which has an array field called <code>countries</code> So lets say for example in this table called <code>country_list</code> i have the following records</p>\n\n<pre><code>Name         Countries\nAsia         ['Malaysia, Singapore, Hong Kong]\nWorldwide    ['Malaysia, Singapore, Hong Kong, Croatia, USA]\n</code></pre>\n\n<p>Now if i want to query this table to find out which records have <code>['Malaysia, 'Singapore']</code>, how do i write the query in my ruby console.</p>\n\n<p>I tried to do this but it didnt work </p>\n\n<p><code>CountryList.where(\"countries IN (['Malaysia', 'Singapore'])\")</code> \nbut it didnt work as expected. </p>\n\n<p>Any help is appreciated</p>\n"}, {"tags": ["ruby", "hash", "cucumber"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 2, "creation_date": 1528215572, "post_id": 50704641, "comment_id": 88418716, "body": "This may just be me, but I&#39;m not finding this too clear - could you expand with example input, what you&#39;ve tried and desired output please?"}, {"owner": {"reputation": 405, "user_id": 1947573, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e203c0cfcdf3f8a3f44e7353dfade700?s=128&d=identicon&r=PG", "display_name": "RV_Dev", "link": "https://stackoverflow.com/users/1947573/rv-dev"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1528216042, "post_id": 50704641, "comment_id": 88418977, "body": "@SRack I do not want to pass the whole table just the few selected rows. how can I do this?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1528222216, "post_id": 50704641, "comment_id": 88421978, "body": "are you trying to connvert the hash back to table-formatted string? Can you try passing in that value manually, to see if it works first?"}, {"owner": {"reputation": 405, "user_id": 1947573, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e203c0cfcdf3f8a3f44e7353dfade700?s=128&d=identicon&r=PG", "display_name": "RV_Dev", "link": "https://stackoverflow.com/users/1947573/rv-dev"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1528225297, "post_id": 50704641, "comment_id": 88423466, "body": "@max pleaner no it does not work and yes I would love to convert the hash back to table"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1528239876, "post_id": 50704641, "comment_id": 88429209, "body": "So, if you tried manually entering in the table value and it didn&#39;t work, why do you want to do it? Can show your attempt to manually pass in the table string?"}], "answers": [{"tags": [], "owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "is_accepted": false, "score": 0, "last_activity_date": 1528283051, "creation_date": 1528283051, "answer_id": 50718826, "question_id": 50704641, "link": "https://stackoverflow.com/questions/50704641/converting-hash-into-multiline-argument-in-ruby/50718826#50718826", "title": "Converting hash into multiline argument in ruby", "body": "<p>Don't nest steps you are just asking for trouble. Instead extract a helper method and call that instead. This will make passing parameters much simpler. So in your code you can replace </p>\n\n<p><code>step('I verify that following transactions are reported', table)</code> </p>\n\n<p>with</p>\n\n<p><code>verify_table(...)</code></p>\n\n<p>This gives you much greater control over the params and how you process them, and makes the call much simpler.</p>\n\n<p>Nesting steps is a cucumber anti-pattern.</p>\n"}], "owner": {"reputation": 405, "user_id": 1947573, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e203c0cfcdf3f8a3f44e7353dfade700?s=128&d=identicon&r=PG", "display_name": "RV_Dev", "link": "https://stackoverflow.com/users/1947573/rv-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528283051, "creation_date": 1528215181, "last_edit_date": 1528216002, "question_id": 50704641, "link": "https://stackoverflow.com/questions/50704641/converting-hash-into-multiline-argument-in-ruby", "title": "Converting hash into multiline argument in ruby", "body": "<p>Hi I am calling a step in another step and both the steps uses table as argument. My issue is when I am in step 1 I am converting the table in to hash and accessing the values from it. Now my issue is I want to pass the same hash or current row values to the step called in it. How should I do it? Format of the table in feature file and code is as below:</p>\n\n<p>Table I have to pass or atleast the rows I am interested in:</p>\n\n<pre><code>   |column_a|column_b|column_c|\n   |1       |2       |3       |\n   |4       |2       |6       |\n   |3       |1       |7       |  \n\nAnd(/^I verify the structure$/) do |table|\n  hashes = table.hashes\n  hashes.each do |deeplink_url|\n    if deeplink_url['column_b'] == '2'\n    step('I verify that following transactions are reported', table)\n  end\nend\n</code></pre>\n\n<p>The table I am passing is the same table used in the step it self. My idea is to pass the current row:</p>\n\n<pre><code>step('I verify that following transactions are reported', deeplink_url['column_b','column_c'])\n</code></pre>\n\n<p>But the above line gives an error that it is not multiline argument.\nIs there a way to convert the hash back to table or pass that particular row only from the table?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": true, "score": 4, "last_activity_date": 1528264681, "last_edit_date": 1528264681, "creation_date": 1528214266, "answer_id": 50704384, "question_id": 50704113, "link": "https://stackoverflow.com/questions/50704113/finding-the-first-decimal-in-a-string/50704384#50704384", "title": "Finding the first decimal in a string", "body": "<p>You could use <code>String#scan</code> for this particular problem</p>\n\n<pre><code>def decimal_splits(string)\n  string.scan(/\\d+\\.\\d{2}/)\nend\n</code></pre>\n\n<p>To break down the regular expression:</p>\n\n<ul>\n<li><code>\\d+</code> 1 or more number of digits </li>\n<li><code>\\.</code> the decimal point</li>\n<li><code>\\d{2}</code> two digits</li>\n</ul>\n\n<p>The result will be an array of matches for the expression.</p>\n\n<pre><code>decimal_splits(\"9.1110.00\")\n#=&gt; [\"9.11\", \"10.00\"]\ndecimal_splits(\"12.2113.00\")\n#=&gt; [\"12.21\", \"13.00\"]\ndecimal_splits(\"1.211.90\")\n#=&gt; [\"1.21\", \"1.90\"]\ndecimal_splits(\"10.119.55\")\n#=&gt; [\"10.11\", \"9.55\"]\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 9177662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/676fe695fafe582e6e14ab6ac0b98696?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9177662/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 50704384, "answer_count": 1, "score": 1, "last_activity_date": 1528264681, "creation_date": 1528213412, "last_edit_date": 1528264588, "question_id": 50704113, "link": "https://stackoverflow.com/questions/50704113/finding-the-first-decimal-in-a-string", "title": "Finding the first decimal in a string", "body": "<p>I have strings that consist of two lots of numbers. I am trying to split them into two substrings so that there are two decimal places after each decimal. </p>\n\n<p>I have this code:</p>\n\n<pre><code>if homeodds.length == 10 then\n   homeoddsp = homeodds[0,5].to_f\n   bookieh = homeodds[5,5].to_f\nelse\n   homeoddsp = homeodds[0,4].to_f\n   bookieh = homeodds[4,4].to_f\nend\n</code></pre>\n\n<p>It handles an eight figure string fine:\n<code>\"1.211.90\"</code> translates to <code>\"1.21\"</code> and <code>\"1.90\"</code>.</p>\n\n<p>and a ten figure string also works:\n<code>\"12.2113.00\"</code> translates to <code>\"12.21\"</code> and <code>\"13.00\"</code>.</p>\n\n<p>When I have a nine figure string like <code>\"9.1110.00\"</code> or <code>\"10.119.55\"</code>, I need to find out where the first decimal is, and take two digits after that so that the remainder becomes the second substring. These cases, I can't consistently do.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "activesupport"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 8365170, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-grpYLaqf-EI/AAAAAAAAAAI/AAAAAAAAEOY/QoKUJgUHPlo/photo.jpg?sz=128", "display_name": "Kriseq", "link": "https://stackoverflow.com/users/8365170/kriseq"}, "edited": false, "score": 0, "creation_date": 1528213393, "post_id": 50704052, "comment_id": 88417409, "body": "The result is the same as from my query  &#39;[2, 1, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3]&#39;"}], "tags": [], "owner": {"reputation": 357, "user_id": 9211857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7afb28e1b7699679e48fbe62caaac9?s=128&d=identicon&r=PG&f=1", "display_name": "Vijay Atmin", "link": "https://stackoverflow.com/users/9211857/vijay-atmin"}, "is_accepted": false, "score": 0, "last_activity_date": 1528213222, "creation_date": 1528213222, "answer_id": 50704052, "question_id": 50703950, "link": "https://stackoverflow.com/questions/50703950/rails-with-postgresql-extract-field-from-time-is-not-working/50704052#50704052", "title": "Rails with postgresql: extract field from time is not working", "body": "<p>Just use  <code>DeliveryTimeslot.all.order(\"start DESC\").map(&amp;:id)</code></p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 8365170, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-grpYLaqf-EI/AAAAAAAAAAI/AAAAAAAAEOY/QoKUJgUHPlo/photo.jpg?sz=128", "display_name": "Kriseq", "link": "https://stackoverflow.com/users/8365170/kriseq"}, "edited": false, "score": 0, "creation_date": 1528285502, "post_id": 50718671, "comment_id": 88447490, "body": "This is the way faster than my approach :D"}], "tags": [], "owner": {"reputation": 357, "user_id": 9211857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7afb28e1b7699679e48fbe62caaac9?s=128&d=identicon&r=PG&f=1", "display_name": "Vijay Atmin", "link": "https://stackoverflow.com/users/9211857/vijay-atmin"}, "is_accepted": true, "score": 0, "last_activity_date": 1528282620, "creation_date": 1528282620, "answer_id": 50718671, "question_id": 50703950, "link": "https://stackoverflow.com/questions/50703950/rails-with-postgresql-extract-field-from-time-is-not-working/50718671#50718671", "title": "Rails with postgresql: extract field from time is not working", "body": "<p>Found the solution. It worked with my existing application</p>\n\n<p>Try it</p>\n\n<p><code>DeliveryTimeslot.all.order('start DESC').sort_by {|item| item.start.to_date}.map{|item| item.id}</code></p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 8365170, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-grpYLaqf-EI/AAAAAAAAAAI/AAAAAAAAEOY/QoKUJgUHPlo/photo.jpg?sz=128", "display_name": "Kriseq", "link": "https://stackoverflow.com/users/8365170/kriseq"}, "is_accepted": false, "score": 0, "last_activity_date": 1528285375, "creation_date": 1528285375, "answer_id": 50719578, "question_id": 50703950, "link": "https://stackoverflow.com/questions/50703950/rails-with-postgresql-extract-field-from-time-is-not-working/50719578#50719578", "title": "Rails with postgresql: extract field from time is not working", "body": "<p>Problem solved.</p>\n\n<p>I believe the answer is that this issue is caused by construction of db itself. In postgresql doc:(<a href=\"https://www.postgresql.org/docs/9.2/static/datatype-datetime.html\" rel=\"nofollow noreferrer\" title=\"documentation\">https://www.postgresql.org/docs/9.2/static/datatype-datetime.html</a>)\nthey say:</p>\n\n<blockquote>\n  <p>We do not recommend using the type time with time zone</p>\n</blockquote>\n\n<p>...and ActiveRecord is messing somehow with ActiveSupport::TimeWithZone.</p>\n\n<p>A colleague told me to sort it by extracted hour.\nIn psql it looks ok:</p>\n\n<pre><code>kriseqsdb=# SELECT EXTRACT (HOUR FROM start) AS extracted_hour, * FROM delivery_timeslots ORDER BY EXTRACT (HOUR FROM start) DESC;\n extracted_hour | id |  start   |   stop   |         created_at         |         updated_at         \n----------------+----+----------+----------+----------------------------+----------------------------\n             23 |  2 | 23:00:00 | 00:00:00 | 2016-10-05 14:57:39.981764 | 2017-03-16 09:40:25.960571\n             22 |  1 | 22:00:00 | 23:00:00 | 2016-10-05 14:57:39.960375 | 2017-03-16 09:40:25.738402\n             21 | 24 | 21:00:00 | 22:00:00 | 2016-10-05 14:57:40.381005 | 2017-03-16 09:40:27.558225\n             20 | 23 | 20:00:00 | 21:00:00 | 2016-10-05 14:57:40.362648 | 2017-03-16 09:40:27.485668\n             19 | 22 | 19:00:00 | 20:00:00 | 2016-10-05 14:57:40.347286 | 2017-03-16 09:40:27.413084\n             18 | 21 | 18:00:00 | 19:00:00 | 2016-10-05 14:57:40.329297 | 2017-03-16 09:40:27.340032\n             17 | 20 | 17:00:00 | 18:00:00 | 2016-10-05 14:57:40.309307 | 2017-03-16 09:40:27.267091\n             16 | 19 | 16:00:00 | 17:00:00 | 2016-10-05 14:57:40.291424 | 2017-03-16 09:40:27.194525\n             15 | 18 | 15:00:00 | 16:00:00 | 2016-10-05 14:57:40.261229 | 2017-03-16 09:40:27.122137\n             14 | 17 | 14:00:00 | 15:00:00 | 2016-10-05 14:57:40.244531 | 2017-03-16 09:40:27.049617\n             13 | 16 | 13:00:00 | 14:00:00 | 2016-10-05 14:57:40.228901 | 2017-03-16 09:40:26.977144\n             12 | 15 | 12:00:00 | 13:00:00 | 2016-10-05 14:57:40.2118   | 2017-03-16 09:40:26.904671\n             11 | 14 | 11:00:00 | 12:00:00 | 2016-10-05 14:57:40.194678 | 2017-03-16 09:40:26.832177\n             10 | 13 | 10:00:00 | 11:00:00 | 2016-10-05 14:57:40.175353 | 2017-03-16 09:40:26.759804\n              9 | 12 | 09:00:00 | 10:00:00 | 2016-10-05 14:57:40.159382 | 2017-03-16 09:40:26.687357\n              8 | 11 | 08:00:00 | 09:00:00 | 2016-10-05 14:57:40.144921 | 2017-03-16 09:40:26.614746\n              7 | 10 | 07:00:00 | 08:00:00 | 2016-10-05 14:57:40.127898 | 2017-03-16 09:40:26.542091\n              6 |  9 | 06:00:00 | 07:00:00 | 2016-10-05 14:57:40.106023 | 2017-03-16 09:40:26.469586\n              5 |  8 | 05:00:00 | 06:00:00 | 2016-10-05 14:57:40.082284 | 2017-03-16 09:40:26.397126\n              4 |  7 | 04:00:00 | 05:00:00 | 2016-10-05 14:57:40.06161  | 2017-03-16 09:40:26.324512\n              3 |  6 | 03:00:00 | 04:00:00 | 2016-10-05 14:57:40.046009 | 2017-03-16 09:40:26.251731\n              2 |  5 | 02:00:00 | 03:00:00 | 2016-10-05 14:57:40.03066  | 2017-03-16 09:40:26.178915\n              1 |  4 | 01:00:00 | 02:00:00 | 2016-10-05 14:57:40.015266 | 2017-03-16 09:40:26.106172\n              0 |  3 | 00:00:00 | 01:00:00 | 2016-10-05 14:57:39.996529 | 2017-03-16 09:40:26.033393\n(24 rows)\n</code></pre>\n\n<p>and so it does via rails console:</p>\n\n<pre><code>DeliveryTimeslot.connection.select_all(\"SELECT EXTRACT (HOUR FROM start) AS extracted_hour, * FROM delivery_timeslots ORDER BY EXTRACT (HOUR FROM start) DESC\")\n=&gt;\n[23.0, 2, \"23:00:00\", \"00:00:00\", \"2016-10-05 14:57:39.981764\", \"2017-03-16 09:40:25.960571\"],\n   [22.0, 1, \"22:00:00\", \"23:00:00\", \"2016-10-05 14:57:39.960375\", \"2017-03-16 09:40:25.738402\"],\n   [21.0, 24, \"21:00:00\", \"22:00:00\", \"2016-10-05 14:57:40.381005\", \"2017-03-16 09:40:27.558225\"],\n   [20.0, 23, \"20:00:00\", \"21:00:00\", \"2016-10-05 14:57:40.362648\", \"2017-03-16 09:40:27.485668\"],\n   [19.0, 22, \"19:00:00\", \"20:00:00\", \"2016-10-05 14:57:40.347286\", \"2017-03-16 09:40:27.413084\"],\n   [18.0, 21, \"18:00:00\", \"19:00:00\", \"2016-10-05 14:57:40.329297\", \"2017-03-16 09:40:27.340032\"],\n   [17.0, 20, \"17:00:00\", \"18:00:00\", \"2016-10-05 14:57:40.309307\", \"2017-03-16 09:40:27.267091\"],\n   [16.0, 19, \"16:00:00\", \"17:00:00\", \"2016-10-05 14:57:40.291424\", \"2017-03-16 09:40:27.194525\"],\n   [15.0, 18, \"15:00:00\", \"16:00:00\", \"2016-10-05 14:57:40.261229\", \"2017-03-16 09:40:27.122137\"],\n   [14.0, 17, \"14:00:00\", \"15:00:00\", \"2016-10-05 14:57:40.244531\", \"2017-03-16 09:40:27.049617\"],\n   [13.0, 16, \"13:00:00\", \"14:00:00\", \"2016-10-05 14:57:40.228901\", \"2017-03-16 09:40:26.977144\"],\n   [12.0, 15, \"12:00:00\", \"13:00:00\", \"2016-10-05 14:57:40.2118\", \"2017-03-16 09:40:26.904671\"],\n   [11.0, 14, \"11:00:00\", \"12:00:00\", \"2016-10-05 14:57:40.194678\", \"2017-03-16 09:40:26.832177\"],\n   [10.0, 13, \"10:00:00\", \"11:00:00\", \"2016-10-05 14:57:40.175353\", \"2017-03-16 09:40:26.759804\"],\n   [9.0, 12, \"09:00:00\", \"10:00:00\", \"2016-10-05 14:57:40.159382\", \"2017-03-16 09:40:26.687357\"],\n   [8.0, 11, \"08:00:00\", \"09:00:00\", \"2016-10-05 14:57:40.144921\", \"2017-03-16 09:40:26.614746\"],\n   [7.0, 10, \"07:00:00\", \"08:00:00\", \"2016-10-05 14:57:40.127898\", \"2017-03-16 09:40:26.542091\"],\n   [6.0, 9, \"06:00:00\", \"07:00:00\", \"2016-10-05 14:57:40.106023\", \"2017-03-16 09:40:26.469586\"],\n   [5.0, 8, \"05:00:00\", \"06:00:00\", \"2016-10-05 14:57:40.082284\", \"2017-03-16 09:40:26.397126\"],\n   [4.0, 7, \"04:00:00\", \"05:00:00\", \"2016-10-05 14:57:40.06161\", \"2017-03-16 09:40:26.324512\"],\n   [3.0, 6, \"03:00:00\", \"04:00:00\", \"2016-10-05 14:57:40.046009\", \"2017-03-16 09:40:26.251731\"],\n   [2.0, 5, \"02:00:00\", \"03:00:00\", \"2016-10-05 14:57:40.03066\", \"2017-03-16 09:40:26.178915\"],\n   [1.0, 4, \"01:00:00\", \"02:00:00\", \"2016-10-05 14:57:40.015266\", \"2017-03-16 09:40:26.106172\"],\n   [0.0, 3, \"00:00:00\", \"01:00:00\", \"2016-10-05 14:57:39.996529\", \"2017-03-16 09:40:26.033393\"]\n</code></pre>\n\n<p>In that case it is ok for me as this was my main concern. But to be clear about my question and get proper array I just mapped it by extracted_hour:</p>\n\n<pre><code>DeliveryTimeslot.connection.select_all(\"SELECT EXTRACT (HOUR FROM start) AS extracted_hour, * FROM delivery_timeslots ORDER BY EXTRACT (HOUR FROM start) DESC\").rows.map { |row| row[0].to_i }\n</code></pre>\n\n<p>and basically got what I've asked about.</p>\n\n<pre><code>    =&gt; [23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0]\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8365170, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-grpYLaqf-EI/AAAAAAAAAAI/AAAAAAAAEOY/QoKUJgUHPlo/photo.jpg?sz=128", "display_name": "Kriseq", "link": "https://stackoverflow.com/users/8365170/kriseq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 50718671, "answer_count": 3, "score": 2, "last_activity_date": 1528285375, "creation_date": 1528212900, "question_id": 50703950, "link": "https://stackoverflow.com/questions/50703950/rails-with-postgresql-extract-field-from-time-is-not-working", "title": "Rails with postgresql: extract field from time is not working", "body": "<p>I have a problem with ordering a collection by hour. But first things first.</p>\n\n<p>Project details:</p>\n\n<pre><code>Rails version             5.1.3\nRuby version              2.4.1-p111 (x86_64-linux)\nDatabase adapter          postgresql\n</code></pre>\n\n<p>This is how my collection looks like:</p>\n\n<pre><code> #&lt;DeliveryTimeslot:0x00562dd1ad2690\n  id: 1,\n  start: Sun, 02 Jan 2000 01:00:00 +03 +03:00,\n  stop: Sun, 02 Jan 2000 02:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:39 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:25 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1abcf98\n  id: 2,\n  start: Sun, 02 Jan 2000 02:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 03:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:39 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:25 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1ad23c0\n  id: 3,\n  start: Sat, 01 Jan 2000 03:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 04:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:39 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1ad1e70\n  id: 4,\n  start: Sat, 01 Jan 2000 04:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 05:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1ad1470\n  id: 5,\n  start: Sat, 01 Jan 2000 05:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 06:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1ad0bd8\n  id: 6,\n  start: Sat, 01 Jan 2000 06:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 07:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1acfdc8\nid: 7,\n  start: Sat, 01 Jan 2000 07:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 08:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1acf7b0\n  id: 8,\n  start: Sat, 01 Jan 2000 08:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 09:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1acf198\n  id: 9,\n  start: Sat, 01 Jan 2000 09:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 10:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1acee00\n  id: 10,\n  start: Sat, 01 Jan 2000 10:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 11:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1aceb80\n  id: 11,\n  start: Sat, 01 Jan 2000 11:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 12:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1ace838\n  id: 12,\n  start: Sat, 01 Jan 2000 12:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 13:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1ace4c8\n  id: 13,\nstart: Sat, 01 Jan 2000 13:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 14:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1acdde8\n  id: 14,\n  start: Sat, 01 Jan 2000 14:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 15:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1acd758\n  id: 15,\n  start: Sat, 01 Jan 2000 15:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 16:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1acd168\n  id: 16,\n  start: Sat, 01 Jan 2000 16:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 17:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:26 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1acce20\n  id: 17,\n  start: Sat, 01 Jan 2000 17:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 18:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:27 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1acc678\n  id: 18,\n  start: Sat, 01 Jan 2000 18:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 19:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:27 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1abfb30\n  id: 19,\n  start: Sat, 01 Jan 2000 19:00:00 +03 +03:00,\nstop: Sat, 01 Jan 2000 20:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:27 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1abf220\n  id: 20,\n  start: Sat, 01 Jan 2000 20:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 21:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:27 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1abea78\n  id: 21,\n  start: Sat, 01 Jan 2000 21:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 22:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:27 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1abe500\n  id: 22,\n  start: Sat, 01 Jan 2000 22:00:00 +03 +03:00,\n  stop: Sat, 01 Jan 2000 23:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:27 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1abdf10\n  id: 23,\n  start: Sat, 01 Jan 2000 23:00:00 +03 +03:00,\n  stop: Sun, 02 Jan 2000 00:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:27 +03 +03:00&gt;,\n #&lt;DeliveryTimeslot:0x00562dd1abd3f8\n  id: 24,\n  start: Sun, 02 Jan 2000 00:00:00 +03 +03:00,\n  stop: Sun, 02 Jan 2000 01:00:00 +03 +03:00,\n  created_at: Wed, 05 Oct 2016 17:57:40 +03 +03:00,\n  updated_at: Thu, 16 Mar 2017 12:40:27 +03 +03:00&gt;]\n</code></pre>\n\n<p>Both <code>start</code> and <code>stop</code> columns are t.time in schema (so records are <code>ActiveSupport::TimeWithZone</code>).</p>\n\n<p>What I want to do is to order them by hour and I have to do it using SQL statements.</p>\n\n<p>So I have tried this:</p>\n\n<pre><code>DeliveryTimeslot.all.order(\"EXTRACT (HOUR FROM start) DESC\").map(&amp;:id)\n</code></pre>\n\n<p>and I expected to get array like this:</p>\n\n<pre><code>[23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 24]\n</code></pre>\n\n<p>but instead I've got this:</p>\n\n<pre><code>[2, 1, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3]\n</code></pre>\n\n<p>My thought was that this is because three records (with ids 1, 2 and 24) have a different start date (2nd of january while rest of them have 1st of january). Isn't the query I've wrote above supposed to extract hour from time type record? Is it really because of date? IDK why this is not working and basically I can't change anything in DB. Any hints what I am doing wrong? Any hints for make it without any changes in DB?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1528212354, "post_id": 50703674, "comment_id": 88416781, "body": "&quot;but I am having a lot of difficulty conceptualizing the interaction between the player and the opponents&quot; - Can you be specific about what issues you are running into?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1528213786, "post_id": 50703674, "comment_id": 88417660, "body": "Since you seem to have working code and are just having a hard time organizing the design in your head, have you tried <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>?"}, {"owner": {"reputation": 11, "user_id": 8981615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed158e63bb4af375e3868857f014fefe?s=128&d=identicon&r=PG&f=1", "display_name": "FreeG", "link": "https://stackoverflow.com/users/8981615/freeg"}, "edited": false, "score": 0, "creation_date": 1528214041, "post_id": 50703674, "comment_id": 88417801, "body": "Thanks Max, I will have a look at that."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8981615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed158e63bb4af375e3868857f014fefe?s=128&d=identicon&r=PG&f=1", "display_name": "FreeG", "link": "https://stackoverflow.com/users/8981615/freeg"}, "edited": false, "score": 0, "creation_date": 1528214113, "post_id": 50704301, "comment_id": 88417838, "body": "Thank-you for the advice!"}], "tags": [], "owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "is_accepted": false, "score": 0, "last_activity_date": 1528214019, "creation_date": 1528214019, "answer_id": 50704301, "question_id": 50703674, "link": "https://stackoverflow.com/questions/50703674/text-based-game-in-ruby-developing-a-battle-system/50704301#50704301", "title": "Text-Based game in Ruby - Developing a battle system", "body": "<p>You should probably have some kind of environment class to keep track of all your characters. This could be expanded upon to allow movement, etc. Something super simple could look like this:</p>\n\n<pre><code>class Environment\n  def initialize(player, baddies)\n    @player = player\n    @baddies = baddies\n  end\n\n  def play_game\n    @baddies.each do |baddie|\n      baddie.interact(@player)\n    end\n  end\nend\n\nbaddies = 3.times.map do\n  Opponent.new\nend\nEnvironment.new(Player.new, baddies).play_game\n</code></pre>\n\n<p>Also, your code as presented won't work. Your <code>hurt</code> methods are acting like they accept an <code>amount</code> parameter, but you don't ever declare that; you call player.add_points, but don't define that method.. Let me know if you have any other specific questions</p>\n"}], "owner": {"reputation": 11, "user_id": 8981615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed158e63bb4af375e3868857f014fefe?s=128&d=identicon&r=PG&f=1", "display_name": "FreeG", "link": "https://stackoverflow.com/users/8981615/freeg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1528214019, "creation_date": 1528212128, "last_edit_date": 1528212935, "question_id": 50703674, "link": "https://stackoverflow.com/questions/50703674/text-based-game-in-ruby-developing-a-battle-system", "title": "Text-Based game in Ruby - Developing a battle system", "body": "<p>I am currently trying to implement a battle system within a text-based game that I am writing. The player will go from room to room, and sometimes face multiple opponents. </p>\n\n<p>I would like to:</p>\n\n<ul>\n<li><p>have the player start off with a max number of hit points, and have that decline as the game progresses</p></li>\n<li><p>pre-determine the strength (max hit points) of each opponent</p></li>\n<li><p>have the player face many opponents at a time</p></li>\n</ul>\n\n<p>This is what I have so far, but I am having a lot of difficulty conceptualizing the interaction between the player and the opponents. Also, how would I have the player face multiple opponents in succession? </p>\n\n<p>Any tips would help quite a lot! </p>\n\n<p>Thanks!</p>\n\n<p>GF</p>\n\n<p>Code:</p>\n\n<pre><code>class Player \n    attr_accessor :hit_points, :attack_power\n\n    def initialize\n        @hit_points = MAX_HIT_POINTS\n        @attack_power = rand(2 .. 15)\n    end \n\n    def alive?\n        @hit_points &gt; 0 \n    end \n\n    def hurt \n        @hit_points -= amount \n    end \n\n    def print_status\n        puts \"*\" * 80 \n        puts \"HP: #{@hit_points}/#{MAX_HIT_POINTS}\"\n        puts \"*\" * 80 \n    end     \n end \n\nclass Opponent\n    attr_accessor :hit_points, :attack_power\n\n    def initialize\n        @hit_points = MAX_HIT_POINTS\n        @attack_power = rand(1 .. 10)\n    end \n\n    def alive?\n        @hit_points &gt; 0 \n    end \n\n    def hurt \n        @hit_points -= amount \n    end \n\n    def interact(player)\n        player_damage_done = 0 \n        player_damage_taken = 0 \n        while player.alive?\n            hurt(player.attack_power)\n            player_damage_done += player.attack_power\n            break unless alive?\n            player.hurt(@attack_power)\n            player_damage_taken += @attack_power\n        end \n\n        if player.alive?\n            print \"You took #{player_damage_taken} damage and dealt #       {player_damage_done} damage, killing your opponent.\"\n            print \"\\n\"\n            player.addPoints(player_damage_taken + player_damage_done)\n        else \n            print \"Your opponent was too powerful and you died.\"\n            death \n        end     \n    end \nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1528212635, "post_id": 50703633, "comment_id": 88416958, "body": "This question may help you: <a href=\"https://stackoverflow.com/questions/44731592/cant-find-gem-railties-0-a-gemgemnotfoundexception\" title=\"cant find gem railties 0 a gemgemnotfoundexception\">stackoverflow.com/questions/44731592/&hellip;</a>"}, {"owner": {"reputation": 59, "user_id": 9804392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mallela SriPrakash", "link": "https://stackoverflow.com/users/9804392/mallela-sriprakash"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1528213310, "post_id": 50703633, "comment_id": 88417363, "body": "No luck @SaraTibbetts"}], "answers": [{"tags": [], "owner": {"reputation": 1114, "user_id": 5934752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7tGT8.jpg?s=128&g=1", "display_name": "Ravi Mariya", "link": "https://stackoverflow.com/users/5934752/ravi-mariya"}, "is_accepted": false, "score": 0, "last_activity_date": 1528261941, "creation_date": 1528261941, "answer_id": 50712644, "question_id": 50703633, "link": "https://stackoverflow.com/questions/50703633/getting-error-while-running-rails-command-rails-5-1-0-new-test1-at-root-leve/50712644#50712644", "title": "Getting error while running rails command &quot;rails _5.1.0_ new test1&quot; at root level", "body": "<p>you don't have rails 5.1.0 installed on your system</p>\n\n<p>first, install rails 5.1.0 with <code>gem install rails -v 5.1.0</code></p>\n\n<p>then <code>rails _5.1.0_ new test1</code></p>\n"}], "owner": {"reputation": 59, "user_id": 9804392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mallela SriPrakash", "link": "https://stackoverflow.com/users/9804392/mallela-sriprakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528261941, "creation_date": 1528212023, "question_id": 50703633, "link": "https://stackoverflow.com/questions/50703633/getting-error-while-running-rails-command-rails-5-1-0-new-test1-at-root-leve", "title": "Getting error while running rails command &quot;rails _5.1.0_ new test1&quot; at root level", "body": "<p>I am running the below command in command prompt but getting the following error:</p>\n\n<pre><code>Command: rails _5.1.0_ new test1\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>C:\\&gt;rails _5.1.0_ new test1\nTraceback (most recent call last):\n        2: from C:/Ruby25-x64/bin/rails:23:in `&lt;main&gt;'\n        1: from C:/Ruby25-x64/lib/ruby/site_ruby/2.5.0/rubygems.rb:308:in `activate_bin_path'\nC:/Ruby25-x64/lib/ruby/site_ruby/2.5.0/rubygems.rb:289:in `find_spec_for_exe': can't find gem railties (= 5.1.0) with executable rails (Gem::GemNotFoundException)\n</code></pre>\n"}, {"tags": ["ruby", "windows"], "comments": [{"owner": {"reputation": 669, "user_id": 8060919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dRTpK.png?s=128&g=1", "display_name": "Drew Jex", "link": "https://stackoverflow.com/users/8060919/drew-jex"}, "edited": false, "score": 0, "creation_date": 1528215240, "post_id": 50703333, "comment_id": 88418519, "body": "I&#39;m curious about the answer to this as well."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1528226183, "post_id": 50703333, "comment_id": 88423862, "body": "I guess the first question is why do you need that specific TEENY version rather than say <code>2.3.3</code> which was literally released 5 days later (which might explain the lack of port to windows)"}, {"owner": {"reputation": 21, "user_id": 9894107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac90e636fe5488565a3d481600adc8f?s=128&d=identicon&r=PG&f=1", "display_name": "utesfanacd", "link": "https://stackoverflow.com/users/9894107/utesfanacd"}, "edited": false, "score": 0, "creation_date": 1528229281, "post_id": 50703333, "comment_id": 88425340, "body": "I can look into that as well, but I&#39;m new to Ruby so I don&#39;t know the differences yet."}, {"owner": {"reputation": 380, "user_id": 8016768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39bfe45a303d7156e630c1bbaa3eb9b?s=128&d=identicon&r=PG&f=1", "display_name": "chemical", "link": "https://stackoverflow.com/users/8016768/chemical"}, "edited": false, "score": 0, "creation_date": 1528250821, "post_id": 50703333, "comment_id": 88431500, "body": "From reading the release logs Ruby 2.3.3 just offers bug fixes over Ruby 2.3.2, so your code will run fine on Ruby 2.3.3 (If it was truly written on 2.3.2 and not an older version)"}, {"owner": {"reputation": 21, "user_id": 9894107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac90e636fe5488565a3d481600adc8f?s=128&d=identicon&r=PG&f=1", "display_name": "utesfanacd", "link": "https://stackoverflow.com/users/9894107/utesfanacd"}, "edited": false, "score": 0, "creation_date": 1528314191, "post_id": 50703333, "comment_id": 88464679, "body": "Yeah, that&#39;s the direction we&#39;re planning on going."}], "owner": {"reputation": 21, "user_id": 9894107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac90e636fe5488565a3d481600adc8f?s=128&d=identicon&r=PG&f=1", "display_name": "utesfanacd", "link": "https://stackoverflow.com/users/9894107/utesfanacd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528211171, "creation_date": 1528211171, "question_id": 50703333, "link": "https://stackoverflow.com/questions/50703333/install-ruby-2-3-2-on-windows-10", "title": "Install Ruby 2.3.2 on Windows 10", "body": "<p>I have an old Ruby 2.3.2 app I've been asked to help maintain on Windows 10. <code>RubyInstaller</code> (<a href=\"https://rubyinstaller.org/downloads/archives/\" rel=\"nofollow noreferrer\">https://rubyinstaller.org/downloads/archives/</a>) would normally be great, but it seems like 2.3.2 was not ported over.</p>\n\n<p>Since <code>RubyInstaller</code> was not an option, installing RVM on the Windows Subsystem for Linux was the next option. While this sometimes works, it has issues with our VPN pretty regularly, which seems like a recurring issue with WSL (<a href=\"https://github.com/Microsoft/WSL/issues/1350\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/WSL/issues/1350</a> &amp;&amp; <a href=\"https://github.com/Microsoft/WSL/issues/416\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/WSL/issues/416</a>).</p>\n\n<p>Is there a way to convert any of the 2.3.2 builds (<a href=\"https://www.ruby-lang.org/en/news/2016/11/15/ruby-2-3-2-released/\" rel=\"nofollow noreferrer\">https://www.ruby-lang.org/en/news/2016/11/15/ruby-2-3-2-released/</a>) to run on windows?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1528211020, "creation_date": 1528211020, "answer_id": 50703283, "question_id": 50703206, "link": "https://stackoverflow.com/questions/50703206/raise-an-error-if-methods-parameters-do-not-meet-certain-criteria/50703283#50703283", "title": "Raise an error if method&#39;s parameters do not meet certain criteria", "body": "<p>Yes, of corse. Something like this</p>\n\n<pre><code>class EvenInteger\n  def initialize(number)\n    if number.odd?\n      raise StandardError\n    end\n    @value = number\n  end\n\n  attr_reader :value\nend\n\nEvenInteger.new(3)\n=&gt; StandardError (StandardError)\nEvenInteger.new(4).value\n=&gt; 4\n</code></pre>\n\n<p>Or maybe you can raise an <code>ArgumentError</code> or even define your specific subclass of <code>StandardError</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1528211068, "creation_date": 1528211068, "answer_id": 50703296, "question_id": 50703206, "link": "https://stackoverflow.com/questions/50703206/raise-an-error-if-methods-parameters-do-not-meet-certain-criteria/50703296#50703296", "title": "Raise an error if method&#39;s parameters do not meet certain criteria", "body": "<p>Sure, just raise an error in the <code>initialize</code> method:</p>\n\n<pre><code>class EnventInt\n  def initialize(x)\n    @x = x\n\n    raise ArgumentError, \"x must be even\" unless @x.even?\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1528226464, "post_id": 50703319, "comment_id": 88424019, "body": "This is the best answer so as to avoid a <code>NoMethodError</code> for <code>#even?</code> or <code>#odd?</code> when given an object that does not have these methods and to avoid allowing an object that is not an <code>Integer</code> but has implemented these methods to pass through. My only thought though is this should raise an <code>ArgumentError</code> as that is the actual issue rather than a <code>RuntimeError</code> which is not very explicit. Some explanation would be nice as well"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1528231445, "post_id": 50703319, "comment_id": 88426344, "body": "@engineersmnky true that, edited the answer with these edits :) Thanks!"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 2, "last_activity_date": 1528235972, "last_edit_date": 1528235972, "creation_date": 1528211124, "answer_id": 50703319, "question_id": 50703206, "link": "https://stackoverflow.com/questions/50703206/raise-an-error-if-methods-parameters-do-not-meet-certain-criteria/50703319#50703319", "title": "Raise an error if method&#39;s parameters do not meet certain criteria", "body": "<p>Basically, you need to check whether the provided argument meets the criteria and if yes - do whatever the method should do, otherwise raise the exception:</p>\n\n<pre><code>class EventInt\n  def initialize(x)\n    if x.is_a?(Integer) &amp;&amp; x.even?\n      @x = x\n    else\n      raise 'Argument should be an even integer'\n    end\n  end\nend\n\nEventInt.new(1)\n#=&gt; RuntimeError: Argument should be an even integer\nEventInt.new(1.1)\n#=&gt; RuntimeError: Argument should be an even integer\nEventInt.new(1.2)\n#=&gt; RuntimeError: Argument should be an even integer\nEventInt.new(2)\n#=&gt; #&lt;A:0x00007fca4c9a0498 @even_int=2&gt;\n</code></pre>\n\n<p>Actually, it would make more sense to return a specific error, namely <code>ArgumentError</code>:</p>\n\n<pre><code>raise ArgumentError, 'Argument should be an even integer'\n</code></pre>\n\n<p>Or, if you want to have your custom error class, you could do the following:</p>\n\n<pre><code>NotEvenIntegerArgumentError = Class.new(ArgumentError)\n</code></pre>\n\n<p>and then in <code>initialize</code>:</p>\n\n<pre><code>raise NotEvenIntegerArgumentError, 'Argument should be an even integer'\n</code></pre>\n\n<p>Or, if you want, you can set up a default exception message in your exception class. The whole code would look as follows</p>\n\n<pre><code>class EventInt\n  NotEvenIntegerArgumentError = Class.new(ArgumentError) do\n    def message\n      'Argument should be an even integer'\n    end\n  end\n\n  def initialize(x)\n    if x.is_a?(Integer) &amp;&amp; x.even?\n      @x = x\n    else\n      raise NotEvenIntegerArgumentError\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 363, "user_id": 7534274, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9TCm.jpg?s=128&g=1", "display_name": "Xullnn", "link": "https://stackoverflow.com/users/7534274/xullnn"}, "is_accepted": false, "score": -1, "last_activity_date": 1528212877, "creation_date": 1528212877, "answer_id": 50703941, "question_id": 50703206, "link": "https://stackoverflow.com/questions/50703206/raise-an-error-if-methods-parameters-do-not-meet-certain-criteria/50703941#50703941", "title": "Raise an error if method&#39;s parameters do not meet certain criteria", "body": "<p>You could use Ruby's <code>raise</code> method to raise an error, furthermore, you also could writing a message to tell user why this happened.</p>\n\n<pre><code>class EvenInt\n  attr_reader :x\n  def initialize(integer)\n    raise ArgumentError, \"Number shoud be even.\" unless integer.even?\n    @x = integer\n  end\nend\n</code></pre>\n\n<p>If you try:</p>\n\n<pre><code>&gt; EvenInt.new(2)\n=&gt; #&lt;EvenInt:0x00007fbc81019830 @x=2&gt;\n\n&gt; EvenInt.new(3)\nTraceback ......\n......\nArgumentError (Number shoud be even.)\n</code></pre>\n\n<p>The <code>ArgumentError</code> indicates the specific error type which you could specify. Then you leave a message to user why this was wrong.</p>\n"}], "owner": {"reputation": 166, "user_id": 9623419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6738475bc5f747a2ef54cde73b091372?s=128&d=identicon&r=PG&f=1", "display_name": "Balocre", "link": "https://stackoverflow.com/users/9623419/balocre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1113, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1528264897, "creation_date": 1528210775, "last_edit_date": 1528264897, "question_id": 50703206, "link": "https://stackoverflow.com/questions/50703206/raise-an-error-if-methods-parameters-do-not-meet-certain-criteria", "title": "Raise an error if method&#39;s parameters do not meet certain criteria", "body": "<p>Is it possible to prevent an object from being initialized and raise an error if some parameters passed to the initialize method don't match certain conditions?</p>\n\n<p>For example, if I define a class <code>EvenInt</code> that has one attribute <code>x</code> that must be an even integer, is it possible to prevent an object of this class from being initialized, for instance, if I pass <code>3</code> as a parameter?</p>\n\n<p>If so, could you quickly explain how to do so, particularly how to raise errors?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1528210390, "post_id": 50702950, "comment_id": 88415507, "body": "You need to use gem &#39;active_model_serializers&#39;"}, {"owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 0, "creation_date": 1528211934, "post_id": 50702950, "comment_id": 88416534, "body": "I did not get what do you want to achieve?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528226897, "post_id": 50702950, "comment_id": 88424216, "body": "<code>Something.includes(:user).references(:user)</code> will eager load the <code>User</code> for <code>Something</code> and you can access it via the instance method <code>user</code> without executing a new query."}], "answers": [{"tags": [], "owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "is_accepted": true, "score": 0, "last_activity_date": 1528210886, "creation_date": 1528210886, "answer_id": 50703234, "question_id": 50702950, "link": "https://stackoverflow.com/questions/50702950/rails-include-relation-model-into-model/50703234#50703234", "title": "Rails include relation model into model", "body": "<p>Add the following gem to your Gemfile</p>\n\n<pre><code>gem 'active_model_serializers'\n</code></pre>\n\n<p>Then install it using bundle</p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>You can generate a serializer as follows</p>\n\n<pre><code>rails g serializer something\nrails g serializer user\n</code></pre>\n\n<p>it will create Serializer class file in</p>\n\n<pre><code># app/serializers/something_serializer.rb\n\n    class SomethingSerializer &lt; ActiveModel::Serializer\n       attributes :id, \n\n       has_many :users \n    end\n\n# app/serializers/user_serializer.rb\n   class UserSerializer &lt; ActiveModel::Serializer\n       attributes :id, :name\n    end \n</code></pre>\n\n<p>In controller </p>\n\n<pre><code>def index\n  @something = Something.includes(:users).all\n\n\n  render json: @something\nend\n</code></pre>\n"}], "owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 50703234, "answer_count": 1, "score": 0, "last_activity_date": 1528210886, "creation_date": 1528210012, "question_id": 50702950, "link": "https://stackoverflow.com/questions/50702950/rails-include-relation-model-into-model", "title": "Rails include relation model into model", "body": "<pre><code>class Something\n  belongs_to :User\nend\n\nclass User\n  has_many :something\nend\n</code></pre>\n\n<p>I can call Something.all and get the object array</p>\n\n<pre><code>[#&lt;Something:0x0000558f81437158\n  id: \"c2c0506e-57db-4d39-8f5b-20fde15aa1a4\",\n  user_id:\"XXX-XXX\"&gt;]\n</code></pre>\n\n<p>When I use <code>Something.includes(:user)</code> I get the exact same result.\nI was under the impression that I get some included user object inside my something object.\nWhen I use for example <code>Something.all.as_json(includes: :user)</code> I get a merged json hash. Issue is I don't want a merged json hash. Is there something wrong somewhere in my models or how does <code>.includes</code> work? </p>\n\n<p>Usecase would be my index action that responses automatically with json and I just need to build the correct object hash without writing as_json all over the place.</p>\n\n<p>Anyone? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 0, "creation_date": 1528208296, "post_id": 50701908, "comment_id": 88414156, "body": "Can you show the code of your controller?"}, {"owner": {"reputation": 9, "user_id": 9783543, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214091178226239/picture?type=large", "display_name": "Benjamin Richard", "link": "https://stackoverflow.com/users/9783543/benjamin-richard"}, "reply_to_user": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 0, "creation_date": 1528213137, "post_id": 50701908, "comment_id": 88417269, "body": "@KartikeyTanna : I edit my post with the users controller"}, {"owner": {"reputation": 9, "user_id": 9783543, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214091178226239/picture?type=large", "display_name": "Benjamin Richard", "link": "https://stackoverflow.com/users/9783543/benjamin-richard"}, "reply_to_user": {"reputation": 1321, "user_id": 2422068, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/608060c57e57d2a4989c6b82a8a1f289?s=128&d=identicon&r=PG", "display_name": "Kartikey Tanna", "link": "https://stackoverflow.com/users/2422068/kartikey-tanna"}, "edited": false, "score": 0, "creation_date": 1528796288, "post_id": 50701908, "comment_id": 88632772, "body": "I&#39;m still stuck on this feature, could someone help me? thank you in advance !"}], "owner": {"reputation": 9, "user_id": 9783543, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214091178226239/picture?type=large", "display_name": "Benjamin Richard", "link": "https://stackoverflow.com/users/9783543/benjamin-richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528213096, "creation_date": 1528206901, "last_edit_date": 1528213096, "question_id": 50701908, "link": "https://stackoverflow.com/questions/50701908/how-implement-filters-on-my-users-index", "title": "How Implement filters on my users index?", "body": "<p>I work on an application and I try to implement a filter for my users index. I try a lot of solutions on the web but not successfully. I need to filter with mother_tongue, locality, and after availability (with a calendar).</p>\n\n<p>I first try with <a href=\"https://rubyplus.com/articles/3381-Simple-Search-Form-in-Rails-5\" rel=\"nofollow noreferrer\">a simple search form solution</a>, but I think it's not the best solution, so I try with <a href=\"https://www.justinweiss.com/articles/search-and-filter-rails-models-without-bloating-your-controller/\" rel=\"nofollow noreferrer\">Justin Weiss solution</a> but it didn't work, so I try to put my own filters in my user model but it's unsuccessfully :</p>\n\n<p>model :</p>\n\n<pre><code>include Filterable\n\ndef self.apply_filters(params)\nuser = self\nuser = user_by_mother_tongue(mother_tongue: params[:mother_tongue]) if params[:mother_tongue].present?\nuser = user_by_locality(locality: params[:locality]) if params[:locality].present?\nuser\nend\n</code></pre>\n\n<p>Being blocked, so I decided to prioprise on the filters mother_tongue and locality and keep filter calendar for later, however I can not find a way out ...</p>\n\n<p>my users controller :</p>\n\n<p>before :</p>\n\n<pre><code>def index\n @users = User.where(activated: true).paginate(page: params[:page])\nend\n</code></pre>\n\n<p>after :</p>\n\n<pre><code>  def index\n   @users = User.filter(params.slice(:mother_tongue, :locality))\n  end\n</code></pre>\n\n<p>index.html.erb :</p>\n\n<pre><code>&lt;% provide(:title, 'Liste des utilisateurs') %&gt;\n&lt;h1&gt;Liste des utilisateurs :&lt;/h1&gt;\n\n&lt;%= form_tag(users_path, method: :get) do %&gt;\n &lt;%= label_tag :mother_tongue, \"Langue :\" %&gt;\n &lt;%= text_field_tag :mother_tongue, params[:mother_tongue] %&gt;\n\n &lt;%= label_tag :locality, \"Ville :\" %&gt;\n &lt;%= text_field_tag :locality, params[:locality] %&gt;\n\n &lt;%= submit_tag 'Search', name: nil %&gt;\n&lt;% end %&gt;\n\n&lt;table&gt;\n &lt;thead&gt;\n   &lt;tr&gt;\n    &lt;th&gt;&lt;/th&gt;\n   &lt;/tr&gt;\n &lt;/thead&gt;\n\n &lt;tbody&gt;\n  &lt;tr&gt;\n    &lt;% for user in @users %&gt;\n      &lt;div class='user'&gt;\n        &lt;strong&gt; &lt;%= user.fname %&gt; &lt;/strong&gt;\n      &lt;/div&gt;\n       &lt;%= link_to 'Savoir plus', user_path(user) %&gt;\n    &lt;% end %&gt;\n  &lt;/tr&gt;       \n&lt;/tbody&gt;\n</code></pre>\n\n<p></p>\n\n<p>models/concern/filterable.rb :</p>\n\n<pre><code>module Filterable\n  extend ActiveSupport::Concern\n\n  module ClassMethods\n    def filter(filtering_params)\n      results = self.where(nil)\n        filtering_params.each do |key, value|\n          results = results.public_send(key, value) if value.present?\n        end\n      results\n    end\n  end\nend\n</code></pre>\n\n<p>Thanks in advance for your help !</p>\n\n<blockquote>\n  <p>UsersController :</p>\n</blockquote>\n\n<pre><code>class UsersController &lt; ApplicationController\nbefore_action :logged_in_user, only: [:edit, :update, :destroy]\nbefore_action :correct_user,   only: [:edit, :update]\nbefore_action :admin_user,     only: [:index, :destroy]\n\ndef first; end\ndef second; end\ndef third; end\n ...\ndef index\n  @users = User.filter(params.slice(:mother_tongue, :locality))\nend\n ...\nprivate\n\ndef user_params\n  params.require(:user).permit(:fname, :lname, :email, :password,\n                               :password_confirmation, :photo, :birthdate, :mother_tongue, :coach, :phone, :street_number, :locality, :route, :administrativearea_level_1, :country, :postal_code, spoken_language_ids:[])\nend\n ...\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 1, "creation_date": 1528206716, "post_id": 50701722, "comment_id": 88412964, "body": "This question may help you: <a href=\"https://stackoverflow.com/questions/4503550/route-alias-in-rails\">stackoverflow.com/questions/4503550/route-alias-in-rails</a>"}, {"owner": {"reputation": 1114, "user_id": 5934752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7tGT8.jpg?s=128&g=1", "display_name": "Ravi Mariya", "link": "https://stackoverflow.com/users/5934752/ravi-mariya"}, "edited": false, "score": 0, "creation_date": 1528207730, "post_id": 50701722, "comment_id": 88413713, "body": "check my answer here for creating custom route names <a href=\"https://stackoverflow.com/a/39464704/5934752\">stackoverflow.com/a/39464704/5934752</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 1, "creation_date": 1528215109, "post_id": 50702280, "comment_id": 88418447, "body": "Re the last part, if it&#39;s a huge pain to replace all paths, you could add the <code>as</code> option, i.e. <code>get &#39;welcome&#47;teacher&#39; =&gt; &#39;welcome#usertypeone&#39;, as: &#39;welcome_usertypeone&#39;</code>. <a href=\"http://guides.rubyonrails.org/routing.html#generating-paths-and-urls-from-code\" rel=\"nofollow noreferrer\">More here</a>."}, {"owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 1, "creation_date": 1528215768, "post_id": 50702280, "comment_id": 88418820, "body": "@SRack brings up a great point. It depends on how particular you are on cruft and technical debt (like keeping old things around because of fear of updating), but <code>as:</code> is definitely viable here."}], "tags": [], "owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "is_accepted": true, "score": 3, "last_activity_date": 1528207884, "creation_date": 1528207884, "answer_id": 50702280, "question_id": 50701722, "link": "https://stackoverflow.com/questions/50701722/change-url-name-in-rails/50702280#50702280", "title": "change url name in rails", "body": "<p>If you're explicitly defining the route (as you are, as opposed to using <code>resource</code> etc) you can configure the route as you'd like.</p>\n\n<pre><code>get 'welcome/teacher' =&gt; 'welcome#usertypeone'\n</code></pre>\n\n<p>This will make <code>www.mywebsite.com/welcome/teacher</code> route to the same controller and action.</p>\n\n<p>You will, however, need to update the route throughout your application from <code>welcome_usertypeone_path</code> to <code>welcome_teacher_path</code>. Your text editor probably has a search and replace function making this a 10 second step.</p>\n"}, {"tags": [], "owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "is_accepted": false, "score": -1, "last_activity_date": 1528276382, "last_edit_date": 1528276382, "creation_date": 1528208100, "answer_id": 50702354, "question_id": 50701722, "link": "https://stackoverflow.com/questions/50701722/change-url-name-in-rails/50702354#50702354", "title": "change url name in rails", "body": "<p>You can go to your <code>routes.rb</code> file and try: </p>\n\n<p><code>get 'welcome/teacher' =&gt; 'welcome#usertypeone'</code></p>\n\n<p>Then you should get the url you require: <code>www.mywebsite/welcome/teacher</code></p>\n"}, {"tags": [], "owner": {"reputation": 8973, "user_id": 831564, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b7b5cb565edb37aac67f053f64f0324f?s=128&d=identicon&r=PG", "display_name": "Marlin Pierce", "link": "https://stackoverflow.com/users/831564/marlin-pierce"}, "is_accepted": false, "score": 0, "last_activity_date": 1528230218, "creation_date": 1528230218, "answer_id": 50708388, "question_id": 50701722, "link": "https://stackoverflow.com/questions/50701722/change-url-name-in-rails/50708388#50708388", "title": "change url name in rails", "body": "<p>Maybe what you want looks like this:</p>\n\n<pre><code>get 'welcome/:user_type' =&gt; 'welcome#usertypeone'\n</code></pre>\n\n<p>This will take whatever is after the <code>welcome/</code> and put it in <code>params</code> as <code>params[:user_type]</code>, but it will still go to the <code>WelcomesController</code> and the <code>usertypeone</code> action.</p>\n"}], "owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1125, "favorite_count": 0, "accepted_answer_id": 50702280, "answer_count": 3, "score": 0, "last_activity_date": 1528276382, "creation_date": 1528206367, "question_id": 50701722, "link": "https://stackoverflow.com/questions/50701722/change-url-name-in-rails", "title": "change url name in rails", "body": "<p>I have a route in my rails application:</p>\n\n<pre><code>get 'welcome/usertypeone' =&gt; 'welcome#usertypeone'\n</code></pre>\n\n<p>This doesnot look good in the browser as the URL comes out like:</p>\n\n<pre><code>www.mywebsite/welcome/usertypeone\n</code></pre>\n\n<p>Any way I could change the way the url looks to something like:</p>\n\n<pre><code>www.mywebsite/welcome/teacher\n</code></pre>\n\n<p>without needing to change the route itself as i would need to change it in loads of places. Just seeing if there is a better solution to this.</p>\n"}, {"tags": ["arrays", "ruby", "sorting", "hash"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1528205083, "post_id": 50701188, "comment_id": 88411715, "body": "I am tempted to <a href=\"https://stackoverflow.com/questions/5483889/how-to-sort-an-array-of-hashes-in-ruby\">close it as a duplicate</a>"}, {"owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "edited": false, "score": 1, "creation_date": 1528205214, "post_id": 50701188, "comment_id": 88411825, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5483889/how-to-sort-an-array-of-hashes-in-ruby\">How to sort an array of hashes in ruby</a>"}, {"owner": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "reply_to_user": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "edited": false, "score": 0, "creation_date": 1528205568, "post_id": 50701188, "comment_id": 88412102, "body": "@JosephCho I checked this post, and it didn&#39;t help me cause I did the same and it doesn&#39;t sort my array of hashes..."}, {"owner": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1528205584, "post_id": 50701188, "comment_id": 88412116, "body": "@Stefan I don&#39;t get a error message, but it doesn&#39;t sort my array of hashes."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528205609, "post_id": 50701188, "comment_id": 88412132, "body": "@No&#233;mieHarvey thanks for the edit and the clarification. Unfortunately, that hash is invalid and would result in a <code>SyntaxError</code>. For example, it should be <code>:id =&gt; ...</code> or <code>&quot;id&quot; =&gt; ...</code> \u2013 same for the values. Without a working hash, it&#39;s unclear what&#39;s causing the problem."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1528205952, "post_id": 50701188, "comment_id": 88412387, "body": "Copy and paste just one of your hashes into <code>irb</code>, I got lots of informative errors when I did so.  Your hash definitions aren&#39;t valid."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1528215878, "post_id": 50701188, "comment_id": 88418884, "body": "&quot;unstable&quot; does not mean it doesn&#39;t work - it means that when 2 distances happen to be the same, then the order of the 2 is not guaranteed to be maintained."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1528205943, "post_id": 50701499, "comment_id": 88412383, "body": "You don&#39;t have to <code>split</code> \u2013 <code>to_f</code> ignores tailing characters, i.e. <code>&#39;3.9 km&#39;.to_f</code> returns <code>3.9</code>."}, {"owner": {"reputation": 2623, "user_id": 1127025, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MIc39.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1127025/stefan"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1528206085, "post_id": 50701499, "comment_id": 88412498, "body": "@Stefan, fixed."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 6, "creation_date": 1528206779, "post_id": 50701499, "comment_id": 88413015, "body": "<i>&quot;@Stefan, fixed. \u2013 Stefan&quot;</i> \u2013 that has a nice schizophrenic touch \ud83d\ude43"}], "tags": [], "owner": {"reputation": 2623, "user_id": 1127025, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MIc39.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1127025/stefan"}, "is_accepted": true, "score": 6, "last_activity_date": 1528206513, "last_edit_date": 1528206513, "creation_date": 1528205770, "answer_id": 50701499, "question_id": 50701188, "link": "https://stackoverflow.com/questions/50701188/ruby-sort-by-array-of-hashes/50701499#50701499", "title": "Ruby - Sort by array of hashes", "body": "<p>Assuming that each distance is given as a string, you need to convert it to a float to effectively sort by distance.</p>\n\n<pre><code>@fournisseurs = [\n{ id: 10592,\n  nom: 'Carrossier Procolor Armand-Paris (Garage Michel Tondreau)',\n  distance: '3.9 km',\n  dispos: nil\n},\n{ id: 10463,\n  nom: 'Carrossier Procolor Grand Beauport(Garage Michel Tondreau)',\n  distance: '3.8 km',\n  dispos: nil\n}, \n{ id: 10594,\n  nom: 'Honda Charlesbourg',\n  distance: '5.2 km',\n  dispos: nil\n}, \n{ id: 10508,\n  nom: 'Carrossier ProColor Charlesbourg',\n  distance: '15.5 km',\n  dispos: nil\n}]\n\n\n@fournisseurs.sort_by! { |f| f[:distance].to_f}\n\n\nputs @fournisseurs.inspect\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 50701499, "answer_count": 1, "score": 1, "last_activity_date": 1528215556, "creation_date": 1528204884, "last_edit_date": 1528215556, "question_id": 50701188, "link": "https://stackoverflow.com/questions/50701188/ruby-sort-by-array-of-hashes", "title": "Ruby - Sort by array of hashes", "body": "<p>I have this array of hashes:</p>\n\n<pre><code>@fournisseurs = [\n{ id: 10592,\n  nom: 'Carrossier Procolor Armand-Paris (Garage Michel Tondreau)',\n  distance: '3.9 km',\n  dispos: nil\n},\n{ id: 10463,\n  nom: 'Carrossier Procolor Grand Beauport(Garage Michel Tondreau)',\n  distance: '3.8 km',\n  dispos: nil\n}, \n{ id: 10594,\n  nom: 'Honda Charlesbourg',\n  distance: '5.2 km',\n  dispos: nil\n}, \n{ id: 10508,\n  nom: 'Carrossier ProColor Charlesbourg',\n  distance: '15.5 km',\n  dispos: nil\n}]\n</code></pre>\n\n<p>And I would like to sort it by distance. I tried <code>@fournisseurs.sort_by! { |fournisseur| fournisseur[:distance]}</code>, but it doesn't sort my array of hashes. I read that <code>sort_by!</code>was unstable. How can I do that?</p>\n\n<p>Thanks in advance !</p>\n"}, {"tags": ["ruby", "methods"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1528204598, "post_id": 50700980, "comment_id": 88411329, "body": "You will need to pass arguments to <code>can_execute(?)</code> method to use them inside it."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1528204688, "post_id": 50700980, "comment_id": 88411389, "body": "Why is your <code>can_execute</code> also actually <i>executes</i> methods? If you want to keep the behaviour, then yes, simply pass the needed arguments to it."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1528204784, "post_id": 50700980, "comment_id": 88411456, "body": "separate <code>can_execute?</code> and <code>execute</code> into two methods or remove <code>can_</code> part from the method, cause it makes it ambiguous"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1528204832, "post_id": 50700980, "comment_id": 88411500, "body": "Oh, Andrey, long time no see. :)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1528204900, "post_id": 50700980, "comment_id": 88411550, "body": "@SergioTulentsev I was on a long&#39;ish vacation (since late December). Getting back to work and, hopefully, to SO :D Glad to read you :)"}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "edited": false, "score": 1, "creation_date": 1528205033, "post_id": 50700980, "comment_id": 88411670, "body": "Suddenly it feels like I am on Reddit! ;)"}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1528205224, "post_id": 50700980, "comment_id": 88411836, "body": "@JagdeepSingh What I am not sure of is some of these methods take multiple hash arguments and I dont know the proper way to dynamically include them in <code>public_send</code>. I can easily hard code them individually for each of those methods, problem is I got 4-5 classes each containing 8-10 methods and half of those methods dont take arguments."}, {"owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "edited": false, "score": 0, "creation_date": 1528206514, "post_id": 50700980, "comment_id": 88412821, "body": "You should add the rails tag! (since you&#39;re using class_methods which is rails only)"}], "answers": [{"tags": [], "owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "is_accepted": true, "score": 7, "last_activity_date": 1528207271, "last_edit_date": 1528207271, "creation_date": 1528206573, "answer_id": 50701790, "question_id": 50700980, "link": "https://stackoverflow.com/questions/50700980/ruby-public-send-method-with-hash-params-where-applicable/50701790#50701790", "title": "Ruby public_send method with hash params where applicable", "body": "<p>You'll need to pass the arguments to <code>can_execute</code> so it can pass them to <code>public_send</code>. The splat operator is your friend here. When used as parameter, it will wrap any number of arguments into an array with it's name. When used on an array, it breaks the array down into arguments to pass to a method.</p>\n\n<p>In addition to that, <code>class</code> is a keyword. The convention is to call it <code>klass</code>, but it can be whatever you want (other than class)</p>\n\n<p>With that in mind, our new method looks like this:</p>\n\n<pre><code>def can_execute (klass, method_name, *args)\n  if klass.respond_to?(method_name.to_sym) &amp;&amp; klass.class_methods.include?(method_name.to_sym)\n    klass.public_send(method_name, *args)\n  end\nend\n</code></pre>\n\n<p>Then to call, it can have parameters or not. No need to check first:</p>\n\n<pre><code>can_execute('teststring', :slice, 1, 5) # =&gt; \"ests\"\ncan_execute('teststring', :upcase) # =&gt; \"TESTSTRING\"\n</code></pre>\n\n<p>If you have another reason to want to check the params, you can use <a href=\"https://ruby-doc.org/core-2.5.1/Method.html#method-i-arity\" rel=\"noreferrer\"><code>Method#arity</code></a> or <a href=\"https://ruby-doc.org/core-2.5.1/Method.html#method-i-parameters\" rel=\"noreferrer\"><code>Method#parameters</code></a>. Something like this with results for <code>#slice</code></p>\n\n<pre><code>klass.method(method_name.to_sym).arity # =&gt; -1\nklass.method(method_name.to_sym).parameters # =&gt; [[:rest]]\n</code></pre>\n"}], "owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1337, "favorite_count": 0, "accepted_answer_id": 50701790, "answer_count": 1, "score": 3, "last_activity_date": 1528207271, "creation_date": 1528204351, "question_id": 50700980, "link": "https://stackoverflow.com/questions/50700980/ruby-public-send-method-with-hash-params-where-applicable", "title": "Ruby public_send method with hash params where applicable", "body": "<p><em>Tldr: I am trying to use public_send to call methods but some of these methods require arguments as well. How to check which requires arguments and  add those as arguments and include them in the call</em>  </p>\n\n<p>I have an array of methods in a class like this<br>\n<code>class_methods = [:first, :second, :third, :fourth] ...</code></p>\n\n<p>I defined a <code>can_execute</code> method to check if the class has the method, if so it will execute.</p>\n\n<pre><code>def can_execute (class, method_name)\n  if class.respond_to?(method_name.to_sym) &amp;&amp; class.class_methods.include?(method_name.to_sym)\n    class.public_send(method_name)\n  end\nend\n</code></pre>\n\n<p>When user supplies any of those <code>class_method</code> as an argument, I can call them like this<br>\n<code>can_execute(class, method_name)</code></p>\n\n<p>Problem is some of those methods accepts hash as arguments, like<br>\n<code>class.first(Value: true)</code>  or<br>\n<code>class.second(Id: 0, Value: \"string\")</code></p>\n\n<p>But some dont<br>\n<code>class.third</code></p>\n\n<p>I am not sure how to include the params hash some of these <code>class_methods</code> require?</p>\n\n<p>I do have the option to check what arguments these methods require by calling, <code>method_args</code> on them, like  </p>\n\n<pre><code>class.method_args(:first)\n-&gt; [:Value]\n\nclass.method_args(:second)\n=&gt; [:Id, :Value]\n\nclass.method_args(:third)\n=&gt; []\n</code></pre>\n"}, {"tags": ["ruby", "rest", "api", "twitter", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 467, "user_id": 6863652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ee89337e6aead8c5203cbac4fccc5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Mansi Shah", "link": "https://stackoverflow.com/users/6863652/mansi-shah"}, "edited": false, "score": 1, "creation_date": 1528275284, "post_id": 50702083, "comment_id": 88440824, "body": "Yes header is added to set Content-Type, but still facing same error."}, {"owner": {"reputation": 1277, "user_id": 1737811, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab510b7d0d145c538fcc7638395ee703?s=128&d=identicon&r=PG", "display_name": "mutantkeyboard", "link": "https://stackoverflow.com/users/1737811/mutantkeyboard"}, "reply_to_user": {"reputation": 467, "user_id": 6863652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ee89337e6aead8c5203cbac4fccc5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Mansi Shah", "link": "https://stackoverflow.com/users/6863652/mansi-shah"}, "edited": false, "score": 0, "creation_date": 1528284200, "post_id": 50702083, "comment_id": 88446698, "body": "How do you send this? I&#39;d <code>require &#39;json&#39;</code> and then say for example <code>options={:event=&gt;   {:type=&gt;&quot;message_create&quot;,    :message_create=&gt;     {:target=&gt;{:recipient_id=&gt;&quot;1234&quot;},      :message_data=&gt;{:text=&gt;&quot;test&quot;}}}}</code>, and then send <code>options.to_json</code>. Also, according to documentation <code>Setting Content-Length may also be required if it is not automatically.</code>"}, {"owner": {"reputation": 467, "user_id": 6863652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ee89337e6aead8c5203cbac4fccc5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Mansi Shah", "link": "https://stackoverflow.com/users/6863652/mansi-shah"}, "edited": false, "score": 0, "creation_date": 1528379617, "post_id": 50702083, "comment_id": 88493582, "body": "I am implementing it through Twitter gem, and updating Headers in it is also raising another error."}], "tags": [], "owner": {"reputation": 1277, "user_id": 1737811, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab510b7d0d145c538fcc7638395ee703?s=128&d=identicon&r=PG", "display_name": "mutantkeyboard", "link": "https://stackoverflow.com/users/1737811/mutantkeyboard"}, "is_accepted": false, "score": 1, "last_activity_date": 1528207343, "creation_date": 1528207343, "answer_id": 50702083, "question_id": 50700916, "link": "https://stackoverflow.com/questions/50700916/how-to-send-new-direct-message-through-twitter-api-https-api-twitter-com-1-1-d/50702083#50702083", "title": "How to send new direct message through Twitter API https://api.twitter.com/1.1/direct_messages/events/new.json?", "body": "<p>Have you tried setting <code>Content-Type ('application/json')</code>? in your content header before sending? </p>\n\n<p>It is one of the most common issues. </p>\n\n<p>You can do so by doing something similar to:</p>\n\n<pre><code>before_filter :set_content_type\n  def set_content_type\n    @headers[\"Content-Type\"] = \"application/json; charset=utf-8\"\n  end\n</code></pre>\n\n<p>It will force your application to append the <code>Content-Type</code> on each request.</p>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 8788238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wUhUnhFE4g8/AAAAAAAAAAI/AAAAAAAAAL0/DzCbGGG_7NY/photo.jpg?sz=128", "display_name": "pedro casas", "link": "https://stackoverflow.com/users/8788238/pedro-casas"}, "is_accepted": false, "score": 0, "last_activity_date": 1530041211, "creation_date": 1530041211, "answer_id": 51050127, "question_id": 50700916, "link": "https://stackoverflow.com/questions/50700916/how-to-send-new-direct-message-through-twitter-api-https-api-twitter-com-1-1-d/51050127#51050127", "title": "How to send new direct message through Twitter API https://api.twitter.com/1.1/direct_messages/events/new.json?", "body": "<p>https://github.com/J7mbo/twitter-api-php/blob/master/TwitterAPIExchange.php</p>\n\n<p>usa la clase  <strong>TwitterAPIExchange</strong> y aplica estos cambios.</p>\n\n<p>Yo lo solucione modificando la clase as\u00ed:</p>\n\n<p>a la clase <strong>TwitterAPIExchange</strong> , a\u00f1ade la propiedad</p>\n\n<pre><code>public $appjson;\n</code></pre>\n\n<p>en <strong>public function __construct(array $settings)</strong> a\u00f1ade la inicializaci\u00f3n.</p>\n\n<pre><code>$this-&gt;appjson=false;\n</code></pre>\n\n<p>en <strong>public function performRequest($return = true, $curlOptions = array())</strong></p>\n\n<p>remplaza</p>\n\n<pre><code>$header = array($this-&gt;buildAuthorizationHeader($this-&gt;oauth), 'Expect:');\n</code></pre>\n\n<p>por</p>\n\n<pre><code>if ($this-&gt;appjson) {\n$header = array('Content-Type: application/json',$this-&gt;buildAuthorizationHeader($this-&gt;oauth), 'Expect:');\n} else {\n$header = array($this-&gt;buildAuthorizationHeader($this-&gt;oauth), 'Expect:');\n}\n</code></pre>\n\n<p>para finalizar usa:</p>\n\n<pre><code>.....\n$twitter = new TwitterAPIExchange($settings);\n......\n......\n$twitter-&gt;appjson=true;\n$twitter-&gt;buildOauth($url, $requestMethod)\n-&gt;performRequest(true,\narray( CURLOPT_POSTFIELDS =&gt; $params)\n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7539779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kjngi.jpg?s=128&g=1", "display_name": "hypo30cal", "link": "https://stackoverflow.com/users/7539779/hypo30cal"}, "is_accepted": false, "score": 0, "last_activity_date": 1571789945, "creation_date": 1571789945, "answer_id": 58513853, "question_id": 50700916, "link": "https://stackoverflow.com/questions/50700916/how-to-send-new-direct-message-through-twitter-api-https-api-twitter-com-1-1-d/58513853#58513853", "title": "How to send new direct message through Twitter API https://api.twitter.com/1.1/direct_messages/events/new.json?", "body": "<p>I got similar error and it turned out the data format I was sending the request in was a bit wrong. I was using python requests with the following headers:</p>\n\n<pre><code>HEADERS = {\n    'Content-type': 'application/json',\n    'Accept': 'application/json'\n}\n</code></pre>\n\n<p>But still using <code>json.dumps()</code> on the actual data, the request was subsequently inconsistent with bad data, it all worked when I just sent the data without <code>dumps'ing</code> it.</p>\n\n<p>This might not really help but just check your data integrity.</p>\n"}], "owner": {"reputation": 467, "user_id": 6863652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ee89337e6aead8c5203cbac4fccc5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Mansi Shah", "link": "https://stackoverflow.com/users/6863652/mansi-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 928, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1610617892, "creation_date": 1528204180, "question_id": 50700916, "link": "https://stackoverflow.com/questions/50700916/how-to-send-new-direct-message-through-twitter-api-https-api-twitter-com-1-1-d", "title": "How to send new direct message through Twitter API https://api.twitter.com/1.1/direct_messages/events/new.json?", "body": "<p>I am implementing Twitter new Direct message API,\n<a href=\"https://developer.twitter.com/en/docs/direct-messages/sending-and-receiving/api-reference/new-event\" rel=\"nofollow noreferrer\">https://api.twitter.com/1.1/direct_messages/events/new.json</a></p>\n\n<p>I am facing error,\n415 Unsupported Media Type</p>\n\n<p>I am able to call it via TWURL tool and currently I am sending simple text message through it.</p>\n\n<p>From error code, I understand that either there is content-type issue or payload is in incorrect format.</p>\n\n<p>I am passing payload as,</p>\n\n<pre><code>options = {\n      \"event\": {\n        \"type\": \"message_create\",\n        \"message_create\": {\n          \"target\": {\n            \"recipient_id\": \"1234\"\n          },\n          \"message_data\": {\n            \"text\": \"test\"\n          }\n        }\n      }\n    }\n</code></pre>\n\n<p>Payload is converted to usual Ruby hash, i.e. :key => \"value\"</p>\n\n<pre><code>{:event=&gt;\n  {:type=&gt;\"message_create\",\n   :message_create=&gt;\n    {:target=&gt;{:recipient_id=&gt;\"1234\"},\n     :message_data=&gt;{:text=&gt;\"test\"}}}}\n</code></pre>\n\n<p>How to preserve third party API request format?</p>\n\n<p>Any suggestion will be great help.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "import", "ruby-hash"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1528204004, "post_id": 50700567, "comment_id": 88410948, "body": "Can you show db schema for <code>jobs</code> table?"}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 1, "creation_date": 1528204759, "post_id": 50700567, "comment_id": 88411436, "body": "Apparently the <code>:hashtag</code> has two different <code>hash</code> for me, seems like one is stored as US-ASCII, and one (the parsed) in UTF-8. Funny that I was able to reproduce this only by pasting this into my irb."}, {"owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "reply_to_user": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1528206632, "post_id": 50700567, "comment_id": 88412919, "body": "@siegy22 ahhhhhhhhhhh!!! It&#39;s so obvious looking back on it. Thank you so so much, I&#39;ve spent hours trying to work out why this wasn&#39;t working. That&#39;s totally solved it, thank you! If you put this as an answer, I&#39;ll accept it."}], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "edited": false, "score": 0, "creation_date": 1528217974, "post_id": 50701842, "comment_id": 88419967, "body": "Thank you again, so much!"}], "tags": [], "owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "is_accepted": true, "score": 1, "last_activity_date": 1528206721, "creation_date": 1528206721, "answer_id": 50701842, "question_id": 50700567, "link": "https://stackoverflow.com/questions/50700567/hash-created-from-csv-row-not-behaving-like-a-normal-hash/50701842#50701842", "title": "Hash created from CSV row not behaving like a normal hash", "body": "<p>Apparently the <code>:hashtag</code> has two different encodings for me, seems like one is stored as US-ASCII, and one (the parsed) in UTF-8. Funny that I was able to reproduce this only by pasting this into my irb.</p>\n\n<p>To solve this, make sure they have the same encoding \ud83d\ude04</p>\n"}], "owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 50701842, "answer_count": 1, "score": 0, "last_activity_date": 1528206721, "creation_date": 1528203159, "question_id": 50700567, "link": "https://stackoverflow.com/questions/50700567/hash-created-from-csv-row-not-behaving-like-a-normal-hash", "title": "Hash created from CSV row not behaving like a normal hash", "body": "<p>I'm getting some weird issues. I'm trying to allow importing of a CSV into my model. I'm getting an <code>unknown attribute '\ufeffhashtag' for Job.</code> error, but that's not the issue. My model definitely has a <code>hashtag</code> column.</p>\n\n<p>When I get the error, if I try doing <code>job.to_hash</code> I get <code>{\"\ufeffhashtag\"=&gt;\"apples\", \"number\"=&gt;\"10\", \"job_type\"=&gt;\"0\"}</code> and if I do <code>job.to_hash.symbolize_keys</code> (with or without a <code>!</code>) I get <code>{:\ufeffhashtag=&gt;\"apples\", :number=&gt;\"10\", :job_type=&gt;\"0\"}</code></p>\n\n<p>However, here comes the issue. Both of these seem to be of the <code>Hash</code> class when I call <code>.class</code> on them. But if I try assigning it to a variable and calling <code>[\"hashtag\"]</code> or <code>[:hashtag]</code> on it, it returns <code>nil</code>.</p>\n\n<p>Example of what I mean:</p>\n\n<pre><code>&gt;&gt; foo = job.to_hash.symbolize_keys\n=&gt; {:\ufeffhashtag=&gt;\"apples\", :number=&gt;\"10\", :job_type=&gt;\"0\"}\n&gt;&gt; bar = {hashtag: \"apples\", number: \"10\", job_type: \"0\"}\n=&gt; {:hashtag=&gt;\"apples\", :number=&gt;\"10\", :job_type=&gt;\"0\"}\n&gt;&gt; foo == bar\n=&gt; false\n\n\n&gt;&gt; foo.class\n=&gt; Hash\n&gt;&gt; foo.class == bar.class\n=&gt; true\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>class Job &lt; ApplicationRecord\n  require 'csv'\n\n  def self.import(file)\n    file = CSV.read(file.path, headers:true)\n    file.each { |job| Job.create(job.to_hash)}\n  end\nend\n</code></pre>\n\n<p>CSV:</p>\n\n<pre><code>hashtag,number,job_type\napples,10,0\nbees,10,0\ncarrots,10,0\n</code></pre>\n\n<p>I really don't see what's going wrong... I'm literally copying and pasting the <code>foo</code> variable above into a new variable and it works, yet the original doesn't, despite, despite apparently being a hash as well.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "passenger", "redmine"], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 9720216, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nicolas S.", "link": "https://stackoverflow.com/users/9720216/nicolas-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1528203170, "creation_date": 1528203170, "answer_id": 50700579, "question_id": 50700335, "link": "https://stackoverflow.com/questions/50700335/rails-passenger-nginx-404-not-found/50700579#50700579", "title": "Rails + Passenger + Nginx 404 Not found", "body": "<p><strong>Got it !</strong></p>\n\n<p><code>tracker-continuity</code> not <code>trackeur-continuity</code></p>\n"}], "owner": {"reputation": 101, "user_id": 9720216, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nicolas S.", "link": "https://stackoverflow.com/users/9720216/nicolas-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 965, "favorite_count": 0, "accepted_answer_id": 50700579, "answer_count": 1, "score": 0, "last_activity_date": 1528203170, "creation_date": 1528202463, "question_id": 50700335, "link": "https://stackoverflow.com/questions/50700335/rails-passenger-nginx-404-not-found", "title": "Rails + Passenger + Nginx 404 Not found", "body": "<p>I'm working with Rails + Passenger + Nginx</p>\n\n<p>My project (Redmine) is in /var/www/tracker-continuity/current (and project in public).</p>\n\n<p>I don't know why when I try to access to my serveur it's always a 404 Error page. We can see it in log</p>\n\n<pre><code>[ N 2018-06-05 14:23:20.6491 20067/T1 age/Cor/CoreMain.cpp:1236 ]: Starting Passenger core...\n[ N 2018-06-05 14:23:20.6494 20067/T1 age/Cor/CoreMain.cpp:251 ]: Passenger core running in multi-application mode.\n[ N 2018-06-05 14:23:20.6631 20067/T1 age/Cor/CoreMain.cpp:971 ]: Passenger core online, PID 20067\n\n2018/06/05 14:23:31 [error] 20084#20084: *1 \"/var/www/trackeur-continuity/current/public/index.html\" is not found (2: No such file or directory), client: someIp, server: hideUrl, request: \"GET / HTTP/1.1\", host: \"hideIp\"\n</code></pre>\n\n<p>Here, part of my <code>nginx.conf</code> and my vhost conf. Extracted from a Nginx dump configuration. (Only Passenger parts)</p>\n\n<pre><code>error_log  /var/log/nginx/error.log warn;\npid  /var/run/nginx.pid;\nuser  www-data;\nworker_processes  4;\n\n\ninclude /etc/nginx/modules-enabled/*.conf;\n\nhttp {\n\n    ...\n}\n\n\n# configuration file /etc/nginx/conf.d/mod-http-passenger.conf:\n### Begin automatically installed Phusion Passenger config snippet ###\npassenger_root /usr/lib/ruby/vendor_ruby/phusion_passenger/locations.ini;\npassenger_ruby /usr/bin/passenger_free_ruby;\n### End automatically installed Phusion Passenger config snippet ###\n\n\n}\n\nserver {\n\nlisten 80;\nserver_name default_server ;\n\ncharset utf-8;\nroot /var/www/trackeur-continuity/current/public;\n\naccess_log /var/log/nginx/access.log timed_combined buffer=16k;\nerror_log /var/log/nginx/error.log;\n\npassenger_enabled on;\nrails_env development;\nclient_max_body_size 110m;\n\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1528196933, "post_id": 50698441, "comment_id": 88406324, "body": "nginx is redirecting the request before it hits your app, meaning any changes you make to the rails app won&#39;t take effect"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1528196940, "post_id": 50698441, "comment_id": 88406331, "body": "Can you post your nginx conf file please?"}, {"owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1528197016, "post_id": 50698441, "comment_id": 88406399, "body": "I think this might cause because of name <code>asset</code> you are using. You can try debugging on your local by running the app in <code>production</code> env &amp; <code>precompiling</code> rails assets."}, {"owner": {"reputation": 162, "user_id": 5625947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6624a0395d868b2f9a308f8346f0139?s=128&d=identicon&r=PG&f=1", "display_name": "Yewness", "link": "https://stackoverflow.com/users/5625947/yewness"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1528197686, "post_id": 50698441, "comment_id": 88406795, "body": "@Mark Is this the issue?  `        location /assets {           alias /var/app/current/public/assets;           gzip_static on;           gzip on;           expires max;            add_header Access-Control-Allow-Credentials &#39;true&#39;;           add_header Access-Control-Allow-Methods &#39;GET, POST, HEAD, OPTIONS&#39;;         }`  This is in my .ebextension conf file."}], "answers": [{"comments": [{"owner": {"reputation": 1135, "user_id": 182474, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f1b4c99243b0e9b58cd0b1558bd72aa5?s=128&d=identicon&r=PG", "display_name": "Gabor Garami", "link": "https://stackoverflow.com/users/182474/gabor-garami"}, "edited": false, "score": 2, "creation_date": 1528203482, "post_id": 50699189, "comment_id": 88410587, "body": "I highly recommend to rename the RESTful route, because some poorly written gems do not use <code>assets.prefix</code> but the hardcoded <code>&#47;assets</code> path. Nested routes could be also fine if it is possible."}, {"owner": {"reputation": 162, "user_id": 5625947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6624a0395d868b2f9a308f8346f0139?s=128&d=identicon&r=PG&f=1", "display_name": "Yewness", "link": "https://stackoverflow.com/users/5625947/yewness"}, "edited": false, "score": 0, "creation_date": 1528348948, "post_id": 50699189, "comment_id": 88474667, "body": "Thanks for the answer. I added prefix but nevertheless the load balancer tries to load from the public/assets folder before the route. Therefore, I decided to change psuedo-naming the route by using <code>resources :asssets</code>. Only downside is I wouldn&#39;t be able to use the convention for forms. At least, I can understand the naming and it solves my problem. Up for you!"}], "tags": [], "owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "is_accepted": true, "score": 2, "last_activity_date": 1528206611, "last_edit_date": 1528206611, "creation_date": 1528198781, "answer_id": 50699189, "question_id": 50698441, "link": "https://stackoverflow.com/questions/50698441/rails-assets-controller-serves-public-assets-instead-of-assets-index-page/50699189#50699189", "title": "Rails assets controller serves public assets instead of assets&#39; index page", "body": "<p>It's a name collision of the routes you're creating.</p>\n\n<p>As of default, rails assets are stored in <code>public/assets</code>. Rails then tries to use <a href=\"https://www.nginx.com/resources/wiki/start/topics/examples/xsendfile/\" rel=\"nofollow noreferrer\">xsendfile</a> (if you have it correctly configured) to deliver the given asset from the public directory.</p>\n\n<p>To avoid these collision, you can either change your RESTful route to a name other than <code>:assets</code> or you can customize the asset prefix with this code:</p>\n\n<pre><code># config/application.rb\nconfig.assets.prefix = '/some_other_path'\n</code></pre>\n\n<p>EDIT: I highly recommend to rename the RESTful route, because some poorly written gems do not use assets.prefix but the hardcoded <code>/assets</code> path. Nested routes could be also fine if it is possible. (Thanks to Gabor Garami)</p>\n"}], "owner": {"reputation": 162, "user_id": 5625947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6624a0395d868b2f9a308f8346f0139?s=128&d=identicon&r=PG&f=1", "display_name": "Yewness", "link": "https://stackoverflow.com/users/5625947/yewness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 50699189, "answer_count": 1, "score": 0, "last_activity_date": 1528206611, "creation_date": 1528196431, "last_edit_date": 1528205499, "question_id": 50698441, "link": "https://stackoverflow.com/questions/50698441/rails-assets-controller-serves-public-assets-instead-of-assets-index-page", "title": "Rails assets controller serves public assets instead of assets&#39; index page", "body": "<p>In my Rails app, I have an assets controller (Since the requirement of the model name is Asset).</p>\n\n<p>I use \n<code>resources :assets</code>\nto route my controller to this URL to display /assets.</p>\n\n<p>Everything works fine in the development mode. However, after I deployed the application on AWS Beanstalk, it displays Error 404 from Nginx. </p>\n\n<p>After going through Nginx error log file in <code>/var/log/nginx/error.log</code>, I found this.</p>\n\n<pre><code>open() \"/var/app/current/public/assets\" failed (2: No such file or directory), client: 172.31.21.101, server: _, request: \"GET /assets?status=active HTTP/1.1\"\n</code></pre>\n\n<p>What I understand from the log, it means the application tries to look for assets  <code>/var/app/current/public/assets</code> instead of <code>GET /assets</code> route.</p>\n\n<p>Therefore, my question is, how can I make the application serve the assets folder the view file? Or is there any workaround? One solution I can think of is changing the assets folder to something else.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "deployment"], "comments": [{"owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1528198458, "post_id": 50698418, "comment_id": 88407258, "body": "what ruby version are you using for your local development?"}, {"owner": {"reputation": 169, "user_id": 12070078, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCrzc6Qguv3LQi6XgShuRyCVaqRLgc0s40mnkCHuw=k-s128", "display_name": "Misha Krul", "link": "https://stackoverflow.com/users/12070078/misha-krul"}, "reply_to_user": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1528198612, "post_id": 50698418, "comment_id": 88407347, "body": "I&#39;m using ruby 2.3.4p301"}, {"owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 1, "creation_date": 1528198828, "post_id": 50698418, "comment_id": 88407501, "body": "Try using <code>ruby 2.4</code> as heroku is using that ruby version. From your errors it seems to be a ruby version error only."}, {"owner": {"reputation": 169, "user_id": 12070078, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCrzc6Qguv3LQi6XgShuRyCVaqRLgc0s40mnkCHuw=k-s128", "display_name": "Misha Krul", "link": "https://stackoverflow.com/users/12070078/misha-krul"}, "reply_to_user": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1528199534, "post_id": 50698418, "comment_id": 88407958, "body": "That&#39;s not solving the problem.  I did <code>rvm reinstall ruby 2.4</code>, <code>rvm use 2.4</code>, <code>heroku restart</code>, then deployed."}], "answers": [{"tags": [], "owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "is_accepted": true, "score": 3, "last_activity_date": 1528201313, "creation_date": 1528201313, "answer_id": 50699984, "question_id": 50698418, "link": "https://stackoverflow.com/questions/50698418/application-error-on-heroku-not-specifying-the-correct-port/50699984#50699984", "title": "Application Error on Heroku - not specifying the correct port?", "body": "<p><code>Fixnum</code> &amp; <code>Bignum</code> are now deprecated &amp; should be used <code>Integer</code> instead from <code>Ruby 2.4</code>. I am also seeing that you are using <code>rails 4.2.5</code> which is not compatible with <code>Ruby 2.4</code>.</p>\n\n<blockquote>\n  <p>You would need to upgrade your rails version to atleast <code>Rails 4.2.8</code>.</p>\n</blockquote>\n\n<p>Ref:</p>\n\n<ul>\n<li><a href=\"https://github.com/rails/rails/issues/27670#issuecomment-272433797\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/issues/27670#issuecomment-272433797</a></li>\n</ul>\n"}], "owner": {"reputation": 169, "user_id": 12070078, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCrzc6Qguv3LQi6XgShuRyCVaqRLgc0s40mnkCHuw=k-s128", "display_name": "Misha Krul", "link": "https://stackoverflow.com/users/12070078/misha-krul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 50699984, "answer_count": 1, "score": 0, "last_activity_date": 1528201313, "creation_date": 1528196361, "last_edit_date": 1528198458, "question_id": 50698418, "link": "https://stackoverflow.com/questions/50698418/application-error-on-heroku-not-specifying-the-correct-port", "title": "Application Error on Heroku - not specifying the correct port?", "body": "<p>I am unable to view my running application on Heroku. I'm receiving the standard <code>Application Error</code> screen -</p>\n\n<blockquote>\n  <p>An error occurred in the application and your page could not be served. If you are the application owner, check your logs for details.</p>\n</blockquote>\n\n<p>Heroku Logs:</p>\n\n<pre><code>2018-06-05T10:50:18.031804+00:00 heroku[web.1]: State changed from starting to crashed\n2018-06-05T10:50:22.184406+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=m-k-blog.herokuapp.com request_id=8ba945a9-49a0-4e08-8ec9-2103dd7b207a fwd=\"174.109.209.147\" dyno= connect= service= status=503 bytes= protocol=https\n2018-06-05T10:50:25.677788+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=m-k-blog.herokuapp.com request_id=65b41c1d-87a7-40d8-8b09-32c39fb9a4fc fwd=\"174.109.209.147\" dyno= connect= service= status=503 bytes= protocol=https\n2018-06-05T10:50:26.459018+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=m-k-blog.herokuapp.com request_id=a660a55b-d00a-477d-8a2b-7b0b7093410e fwd=\"174.109.209.147\" dyno= connect= service= status=503 bytes= protocol=https\n</code></pre>\n\n<p>My procfile currently contains:\n<code>web: bundle exec rackup config.ru -p $PORT -E $RACK_ENV</code></p>\n\n<p>I changed it to the following to see what would happen, and the Application Error persisted:\n<code>web: bundle exec rails server -p $PORT</code></p>\n\n<p>I believe the problem is that it's not getting the right port, but I'm not able to find a working solution for this on SO.</p>\n\n<hr>\n\n<p>UPDATE (7:10am):</p>\n\n<p>When I run <code>heroku run rails console</code> I receive the following logs:</p>\n\n<pre><code>/app/vendor/bundle/ruby/2.4.0/gems/activesupport-4.2.5/lib/active_support/core_ext/numeric/conversions.rb:121: warning: constant ::Fixnum is deprecated\n/app/vendor/bundle/ruby/2.4.0/gems/activesupport-4.2.5/lib/active_support/core_ext/numeric/conversions.rb:121: warning: constant ::Bignum is deprecated\n/app/vendor/bundle/ruby/2.4.0/gems/activesupport-4.2.5/lib/active_support/core_ext/numeric/conversions.rb:124:in `block (2 levels) in &lt;class:Numeric&gt;': stack level too deep (SystemStackError)\n        from /app/vendor/bundle/ruby/2.4.0/gems/activesupport-4.2.5/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\n        from /app/vendor/bundle/ruby/2.4.0/gems/activesupport-4.2.5/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\n        from /app/vendor/bundle/ruby/2.4.0/gems/activesupport-4.2.5/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\n        from /app/vendor/bundle/ruby/2.4.0/gems/activesupport-4.2.5/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\n        from /app/vendor/bundle/ruby/2.4.0/gems/activesupport-4.2.5/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\n        from /app/vendor/bundle/ruby/2.4.0/gems/activesupport-4.2.5/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\n        from /app/vendor/bundle/ruby/2.4.0/gems/activesupport-4.2.5/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\n        from /app/vendor/bundle/ruby/2.4.0/gems/activesupport-4.2.5/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\n         ... 8070 levels...\n        from /app/vendor/bundle/ruby/2.4.0/gems/railties-4.2.5/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n        from /app/vendor/bundle/ruby/2.4.0/gems/railties-4.2.5/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n        from /app/bin/rails:9:in `require'\n        from /app/bin/rails:9:in `&lt;main&gt;'\n</code></pre>\n\n<hr>\n\n<p>UPDATE (7:17am):\nI tried <code>Restarting all Dynos</code> on Heroku but it didn't work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "error-handling", "devise"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1528196199, "post_id": 50698096, "comment_id": 88405841, "body": "Where is the form in your <code>views&#47;devise&#47;sessions&#47;new</code> template? That page should surely contain more than just a couple of <code>flash</code> messages!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1528196340, "post_id": 50698096, "comment_id": 88405924, "body": "As for your second question, what is causing the error? Are you perhaps requiring users to already be logged in when unlocking the account (which wouldn&#39;t make sense)? Have you verified that the unlock token gets saved correctly in the database?"}, {"owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1528197263, "post_id": 50698096, "comment_id": 88406542, "body": "@TomLord yeah, the form is obviously there, I just didn&#39;t think it was relevant so I didn&#39;t paste it but can add it now. As for the second question I didn&#39;t do any setup of my own so I don&#39;t think I&#39;m requiring them to be logged in. I can also see the token in the db but it&#39;s not the same token as in the email so I&#39;m not sure how to verify if they&#39;re correct."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1528197389, "post_id": 50698096, "comment_id": 88406612, "body": "If the token in the db and email are different, then it&#39;s <i>not</i> correct! Please clarify exactly what you mean by that. What are you looking at in the database and email?"}, {"owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1528198105, "post_id": 50698096, "comment_id": 88407064, "body": "@TomLord I really appreciate you taking your time to look into my problem but perhaps you could cut down on the exclamation marks a little ;-) What I mean is the following: <code>User.first.unlock_token </code>=&gt; &quot;95923c615feeb3781dc2584e339a89bc4c4e9b4710924727f976dcf618f&zwnj;&#8203;2a707&quot;` and my mailer generates the token as follows: <code>link_to &#39;Unlock my account&#39;, unlock_url(@resource, unlock_token: @token) =&gt; http:&#47;&#47;localhost:3000&#47;users&#47;unlock?unlock_token=3D6ne-CyRyzg&zwnj;&#8203;nuHuFSZ2iB</code>. I was reading about tokens not being stored literally in the db for security reasons, that&#39;s what I meant by them not being the same."}, {"owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1528205819, "post_id": 50698096, "comment_id": 88412292, "body": "@TomLord Since I figured out what the second issue was about, it clarifies the tokens questions: while my <code>unlock_token</code> in the db was &#39;<a href=\"http://localhost:3000/users/unlock?unlock_token=3DqjycRsszb=\" rel=\"nofollow noreferrer\">localhost:3000/users/unlock?unlock_token=3DqjycRsszb=</a> tKZjXDGsB4&#39; and the <code>unlock_token</code> in the link was &#39;qjycRsszbtKZjXDGsB4P&#39; I was able to successfully unlock the acount through the link."}], "answers": [{"tags": [], "owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "is_accepted": true, "score": 7, "last_activity_date": 1528298201, "creation_date": 1528298201, "answer_id": 50723946, "question_id": 50698096, "link": "https://stackoverflow.com/questions/50698096/devise-lockable-last-attempt-warning-not-displaying/50723946#50723946", "title": "Devise: lockable - last_attempt_warning not displaying", "body": "<p>After lots of digging, I managed to solve both issues:</p>\n\n<h3>Warning message not displaying</h3>\n\n<p>The first issue was caused by the config:</p>\n\n<p><strong>config/initializers/devise.rb</strong></p>\n\n<pre><code>config.paranoid = true\n</code></pre>\n\n<p>If you have a look at the <a href=\"https://github.com/plataformatec/devise/blob/master/lib/devise/models/lockable.rb#L121\" rel=\"noreferrer\">devise module</a>:  </p>\n\n<blockquote>\n  <p>If set to paranoid mode, do not show the locked message because it\n  leaks the existence of an account.</p>\n</blockquote>\n\n<p>Depending on your security requirements, you can either change this value to <code>false</code> or keep the emails secret and not provide feedback.\nIf you're interested in customising your message on failed log in attempts I strongly recommend reading <a href=\"https://stackoverflow.com/questions/44004275/custom-message-on-devise-lockable-n-th-attempt\">this</a>.</p>\n\n<hr>\n\n<h3>Invalid authorisation token</h3>\n\n<p>The second issue was caused by me copying the link directly from the source code of the email - since <code>=</code> is encoded as <code>3D=</code>, the link was obviously breaking. Further explanation <a href=\"https://stackoverflow.com/questions/31895282/escaping-of-rails-generated-url\">here</a>. </p>\n\n<p><em>Hope this helps someone if they run into similar issues.</em></p>\n"}], "owner": {"reputation": 507, "user_id": 8194624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toohL.jpg?s=128&g=1", "display_name": "Joanna Gaudyn", "link": "https://stackoverflow.com/users/8194624/joanna-gaudyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 0, "accepted_answer_id": 50723946, "answer_count": 1, "score": 4, "last_activity_date": 1528298226, "creation_date": 1528195309, "last_edit_date": 1528298226, "question_id": 50698096, "link": "https://stackoverflow.com/questions/50698096/devise-lockable-last-attempt-warning-not-displaying", "title": "Devise: lockable - last_attempt_warning not displaying", "body": "<p>I'm trying to implement the <code>:lockable</code> module to my devise following <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Add-:lockable-to-Users\" rel=\"nofollow noreferrer\">this wiki</a> but ran into some issues. In development, when login attempted more than <code>maximum_attempts</code> times, the <code>failed_attempts</code> attribute gets updated correctly and the user account gets locked but:</p>\n\n<p>1) despite <code>config.last_attempt_warning = true</code> no warning message is displayed</p>\n\n<p>2) I get an <code>unlock_instructions</code> email, but when I copy paste the link into the browser, I get an <code>invalid authorisation token</code> error.</p>\n\n<p><strong>config/initializers/devise.rb</strong></p>\n\n<pre><code># ==&gt; Configuration for :lockable\nconfig.lock_strategy = :failed_attempts\nconfig.unlock_keys = [:email]\nconfig.unlock_strategy = :email\nconfig.maximum_attempts = 3\nconfig.last_attempt_warning = true\n</code></pre>\n\n<p><strong>models/user.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  devise :database_authenticatable, :confirmable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable, :lockable\nend\n</code></pre>\n\n<p><strong>views/devise/sessions/new</strong></p>\n\n<pre><code>= flash[:alert] if flash[:alert]\n= flash[:notice] if flash[:notice]\n\n= simple_form_for(resource, as: resource_name, url: session_path(resource_name)) do |f|\n  .form-inputs\n    = f.input :email, required: false, autofocus: true\n    = f.input :password, required: false, autocomplete: \"off\"\n    = f.input :remember_me, as: :boolean if devise_mapping.rememberable?\n  .form-actions\n    = f.button :submit, \"Log in\"\n</code></pre>\n\n<p><strong>db/migrate/YYYYMMDDxxx_add_lockable_to_devise.rb</strong></p>\n\n<pre><code>class AddLockableToUsers &lt; ActiveRecord::Migration[5.2]\n  def change\n    add_column :users, :failed_attempts, :integer, default: 0, null: false\n    add_column :users, :unlock_token, :string\n    add_column :users, :locked_at, :datetime\n    add_index :users, :unlock_token, unique: true\n  end\nend\n</code></pre>\n\n<p>I don't have any migrations pending, also tried resetting the db and restarting the server but with no luck.\nAny ideas on what I'm doing wrong? Thanks in advance.</p>\n"}, {"tags": ["ruby", "cucumber", "watir"], "comments": [{"owner": {"reputation": 20303, "user_id": 2333222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6705fd44c36d033f0ceae77259913e74?s=128&d=identicon&r=PG", "display_name": "SubOptimal", "link": "https://stackoverflow.com/users/2333222/suboptimal"}, "edited": false, "score": 0, "creation_date": 1529590985, "post_id": 50697278, "comment_id": 88938242, "body": "Based on the warning message I would check if it could be configured on the <a href=\"http://www.jetbrains.com/teamcity/\" rel=\"nofollow noreferrer\">TeamCity server</a>."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 5, "creation_date": 1529668455, "post_id": 50697278, "comment_id": 88969245, "body": "I think you should just log a bug with Teamcity. They&#39;ve had compatibility <a href=\"https://youtrack.jetbrains.com/issue/RUBY-17157\" rel=\"nofollow noreferrer\">problems with their formatter and Cucumber before</a>."}, {"owner": {"reputation": 313, "user_id": 4056267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K1jA0.jpg?s=128&g=1", "display_name": "Dana Scheider", "link": "https://stackoverflow.com/users/4056267/dana-scheider"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 2, "creation_date": 1537813477, "post_id": 50697278, "comment_id": 91911946, "body": "Cucumber maintainer here. I totally agree with @JustinKo. If that doesn&#39;t get you anywhere I&#39;d ask the Cucumber mailing list to see if anybody else has dealt with this problem. It wouldn&#39;t solve the issue since that&#39;s with TeamCity but somebody might know a way to work around it."}, {"owner": {"reputation": 2164, "user_id": 7121619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e413a729d8325c52d4861a97a928959?s=128&d=identicon&r=PG&f=1", "display_name": "Marit", "link": "https://stackoverflow.com/users/7121619/marit"}, "edited": false, "score": 0, "creation_date": 1572602110, "post_id": 50697278, "comment_id": 103617695, "body": "This looks like something TeamCity needs to fix (and you might need to wait for their fix before upgrading your Cucumber version)."}], "answers": [{"tags": [], "owner": {"reputation": 2164, "user_id": 7121619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e413a729d8325c52d4861a97a928959?s=128&d=identicon&r=PG&f=1", "display_name": "Marit", "link": "https://stackoverflow.com/users/7121619/marit"}, "is_accepted": false, "score": 1, "last_activity_date": 1583394178, "creation_date": 1583394178, "answer_id": 60540357, "question_id": 50697278, "link": "https://stackoverflow.com/questions/50697278/the-formatter-teamcitycucumberformatter-is-using-the-deprecated-formatter/60540357#60540357", "title": "The formatter &#39;Teamcity::Cucumber::Formatter&#39; is using the deprecated formatter API", "body": "<p>As suggested by several people in comments, this means that Teamcity needs to update the version of the Cucumber Formatter they are using. \nOnce they have, you might need to update your version of Teamcity.</p>\n"}], "owner": {"reputation": 111, "user_id": 6760979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HX3Si7VFLck/AAAAAAAAAAI/AAAAAAAAGPc/4vmaDb0ErTI/photo.jpg?sz=128", "display_name": "Girish Bhamare", "link": "https://stackoverflow.com/users/6760979/girish-bhamare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "answer_count": 1, "score": 11, "last_activity_date": 1583394178, "creation_date": 1528192669, "last_edit_date": 1528192955, "question_id": 50697278, "link": "https://stackoverflow.com/questions/50697278/the-formatter-teamcitycucumberformatter-is-using-the-deprecated-formatter", "title": "The formatter &#39;Teamcity::Cucumber::Formatter&#39; is using the deprecated formatter API", "body": "<p>I am using cucumber version 3.1.0. While executing <code>cucumber-ruby</code> test, I get the following warning:</p>\n\n<pre><code>WARNING: The formatter Teamcity::Cucumber::Formatter is using the deprecated formatter API which will be removed in v4.0 of Cucumber.\n</code></pre>\n\n<p>I have no clue where to change this. Where can I change the <code>Teamcity::Cucumber::Formatter</code>, and which formatter would you recommend to use instead?</p>\n"}, {"tags": ["arrays", "ruby", "regex", "linux", "shell"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1528191838, "post_id": 50696916, "comment_id": 88403042, "body": "Is that a JSON response? If so, you should parse it appropriately."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1528192053, "post_id": 50696916, "comment_id": 88403198, "body": "This is not a job for regex, or assuming certain offsets like <code>-6..-4</code>. That&#39;s a JSON response. Use <code>JSON.parse(reponse)</code>. If you could please provide a <b>complete</b> (properly formatted) response sample, then I could show with certainty how exactly to write it, but your current question shows only the last section of the JSON."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1528192338, "post_id": 50696916, "comment_id": 88403376, "body": "Why do you want &quot;100&quot; only?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1528192700, "post_id": 50696916, "comment_id": 88403601, "body": "It is not a JSON response. It is not valid JSON."}, {"owner": {"reputation": 41, "user_id": 8994552, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Fuz2c3oi-Wg/AAAAAAAAAAI/AAAAAAAAAPg/GlrkZXwhwTw/photo.jpg?sz=128", "display_name": "sajeesh krishnan", "link": "https://stackoverflow.com/users/8994552/sajeesh-krishnan"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1528199136, "post_id": 50696916, "comment_id": 88407694, "body": "@TomLord I have pasted the JSON output in the question, I thought popping the last value of the array would be easy... thats why didnt convert it to JSON at first."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1528201754, "post_id": 50696916, "comment_id": 88409511, "body": "@sawa I was (rightly) assuming that the original post only contained a sample of the response, not the full data. The full data is, indeed, valid JSON."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528205379, "post_id": 50696916, "comment_id": 88411950, "body": "@sajeeshkrishnan JSON is text, i.e. the response is just a long <i>string</i> at first. You have to <i>parse</i> it in order to convert it to objects."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1528209232, "post_id": 50696916, "comment_id": 88414749, "body": "@sajeeshkrishnan, do you want the last <b>key</b> where the value is 100? Your requirements are not clear. If you want the last <b>value</b> where the value is 100, you can just write <code>value=100</code> and be done with it."}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1528201936, "post_id": 50698528, "comment_id": 88409614, "body": "The question specified ruby, not .Net. Also, I would presume you can&#39;t make assumptions such as &quot;the last key in the JSON data will be <code>1528190991</code>&quot;."}], "tags": [], "owner": {"reputation": 66, "user_id": 6546221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4305f23a60e9bf39853b8e8ac2a9b482?s=128&d=identicon&r=PG&f=1", "display_name": "MarcSanchez", "link": "https://stackoverflow.com/users/6546221/marcsanchez"}, "is_accepted": false, "score": 0, "last_activity_date": 1528196691, "creation_date": 1528196691, "answer_id": 50698528, "question_id": 50696916, "link": "https://stackoverflow.com/questions/50696916/regex-to-match-the-last-value-in-given-data/50698528#50698528", "title": "Regex to match the last value in given data", "body": "<hr>\n\n<p>If the response is a json response, you must use a json parser else if is not a json response, you can use a regex expression with a Regex Object.</p>\n\n<p>In case of a json response, assuming that the object is something like is declared into the variable response of the next code, you can parse it into a JObject. (using Newtonsoft.Json available from nuget repository).</p>\n\n<p>See the next example : </p>\n\n<pre><code>string response = \"[{\\\"response\\\":{\\\"1528190345\\\":100,\\\"1528190346\\\":100,\\\"1528190368\\\":100,\\\"1528190414\\\":100,\\\"1528190439\\\":99,\\\"1528190440\\\":99,\\\"1528190463\\\":100,\\\"1528190485\\\":100,\\\"1528190508\\\":100,\\\"1528190550\\\":100,\\\"1528190575\\\":100,\\\"1528190576\\\":100,\\\"1528190599\\\":100,\\\"1528190600\\\":100,\\\"1528190622\\\":100,\\\"1528190667\\\":100,\\\"1528190688\\\":100,\\\"1528190689\\\":100,\\\"1528190712\\\":100,\\\"1528190736\\\":100,\\\"1528190762\\\":100,\\\"1528190785\\\":100,\\\"1528190786\\\":100,\\\"1528190807\\\":100,\\\"1528190828\\\":100,\\\"1528190853\\\":100,\\\"1528190877\\\":100,\\\"1528190901\\\":100,\\\"1528190925\\\":100,\\\"1528190948\\\":100,\\\"1528190968\\\":100,\\\"1528190991\\\":100}}]\";\n\nList&lt;Dictionary&lt;string, Dictionary&lt;string, int&gt;&gt;&gt; values = JsonConvert.DeserializeObject&lt;List&lt;Dictionary&lt;string, Dictionary&lt;string, int&gt;&gt;&gt;&gt;(response);\nDictionary&lt;string, Dictionary&lt;string, int&gt;&gt; firstLevel = values[0]; // Access to the first object of the list closed with ']'\nDictionary&lt;string, int&gt; secondLevel = firstLevel[\"response\"]; // Access to the first object response and get's it's object context of first '}' starting from the end of response\n\n/** This is an option, if you ever knows the name of the element (1528190991) */\nint thirdLevel = secondLevel[\"1528190991\"];  // Access to the last element of the object by it's name, context of second '}' starting from the end of response.\nConsole.WriteLine(thirdLevel);\n\n/** This is another option if you doesn't know the name of the element and wants ever the last element. */\nList&lt;int&gt; listOfValues = secondLevel.Values.ToList();\nConsole.WriteLine(listOfValues[listOfValues.Count-1]);\n</code></pre>\n\n<p><strong>Note that i've chenged a little bit your response adding [{\\\"response\\\":{\\\" at the start to become a json response.</strong></p>\n\n<p>If is not a json response you can use this pattern with regular expression : </p>\n\n<pre><code>:(.{2,6})}}\\]$\n</code></pre>\n\n<p>Hope will help!</p>\n"}, {"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1528201635, "creation_date": 1528201635, "answer_id": 50700074, "question_id": 50696916, "link": "https://stackoverflow.com/questions/50696916/regex-to-match-the-last-value-in-given-data/50700074#50700074", "title": "Regex to match the last value in given data", "body": "<p>When dealing with JSON data, it's almost always better to parse the data properly rather than using regex against the string.</p>\n\n<p>In this case, we can do:</p>\n\n<pre><code>JSON.parse(response)['dps'].values.last #=&gt; 100\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8994552, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Fuz2c3oi-Wg/AAAAAAAAAAI/AAAAAAAAAPg/GlrkZXwhwTw/photo.jpg?sz=128", "display_name": "sajeesh krishnan", "link": "https://stackoverflow.com/users/8994552/sajeesh-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 50700074, "answer_count": 2, "score": -1, "last_activity_date": 1528201635, "creation_date": 1528191596, "last_edit_date": 1528198846, "question_id": 50696916, "link": "https://stackoverflow.com/questions/50696916/regex-to-match-the-last-value-in-given-data", "title": "Regex to match the last value in given data", "body": "<p>I get data from a URL, and am working on the data to check for a few conditions. The data from the URL look like this:</p>\n\n<p><code>1528190345\":100,\"1528190346\":100,\"1528190368\":100,\"1528190414\":100,\"1528190439\":99,\"1528190440\":99,\"1528190463\":100,\"1528190485\":100,\"1528190508\":100,\"1528190550\":100,\"1528190575\":100,\"1528190576\":100,\"1528190599\":100,\"1528190600\":100,\"1528190622\":100,\"1528190667\":100,\"1528190688\":100,\"1528190689\":100,\"1528190712\":100,\"1528190736\":100,\"1528190762\":100,\"1528190785\":100,\"1528190786\":100,\"1528190807\":100,\"1528190828\":100,\"1528190853\":100,\"1528190877\":100,\"1528190901\":100,\"1528190925\":100,\"1528190948\":100,\"1528190968\":100,\"1528190991\":100}}]</code></p>\n\n<p>====</p>\n\n<p>I have converted that too JSON </p>\n\n<p>{\"metric\"=>\"Insta_real-unique_value\", \"tags\"=>{\"host\"=>\"letme.quickly.com\", \"tier\"=>\"2\", \"device\"=>\"tester1\", \"dc\"=>\"xxx\"}, \"aggregateTags\"=>[\"device_name\", \"device_ip\"], \"dps\"=>{\"1526972408\"=>100, \"1526972424\"=>100, \"1526972440\"=>100, \"1526972456\"=>100, \"1526972472\"=>100, \"1526972488\"=>100, \"1526972504\"=>100, \"1526972520\"=>100, \"1526972536\"=>100, \"1526972552\"=>100, \"1526972568\"=>100, \"1526972569\"=>100, \"1526972584\"=>100, \"1526972585\"=>100, \"1526972601\"=>100, \"1526972617\"=>100, \"1526972633\"=>100, \"1526972649\"=>100, \"1526972665\"=>100, \"1526972681\"=>100}}</p>\n\n<p>I want to extract the value that corresponds to 100. When I do this:</p>\n\n<pre><code>url = \"#{URL}\"\nuri = URI(url)\nresponse = Net::HTTP.get(uri)\nvalue = response[-6..-4]\nputs value\n</code></pre>\n\n<p>I get the last value, but when the last value changes to <code>99/9/0</code>, it prints <code>:99</code> or <code>\":9</code>. </p>\n\n<p>Is there a way to get the exact value as is?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mechanize"], "answers": [{"comments": [{"owner": {"reputation": 4700, "user_id": 1686604, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0yN8A.jpg?s=128&g=1", "display_name": "Archonic", "link": "https://stackoverflow.com/users/1686604/archonic"}, "edited": false, "score": 0, "creation_date": 1613083211, "post_id": 50700930, "comment_id": 116974916, "body": "There&#39;s no way that was the issue."}], "tags": [], "owner": {"reputation": 37, "user_id": 9527948, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BGxba.jpg?s=128&g=1", "display_name": "Qumber Ali", "link": "https://stackoverflow.com/users/9527948/qumber-ali"}, "is_accepted": true, "score": -3, "last_activity_date": 1528204219, "creation_date": 1528204219, "answer_id": 50700930, "question_id": 50696610, "link": "https://stackoverflow.com/questions/50696610/opensslsslsslerror-ssl-connect-syscall-returned-5-errno-0-state-sslv3-tls-w/50700930#50700930", "title": "OpenSSL::SSL::SSLError: SSL_connect SYSCALL returned=5 errno=0 state=SSLv3/TLS write client hello", "body": "<p>I found issue by myself. The issue was the version of ruby, my version is 2.4.1 so I change it to 2.3.1. And it works for me.</p>\n"}], "owner": {"reputation": 37, "user_id": 9527948, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BGxba.jpg?s=128&g=1", "display_name": "Qumber Ali", "link": "https://stackoverflow.com/users/9527948/qumber-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1095, "favorite_count": 0, "accepted_answer_id": 50700930, "answer_count": 1, "score": 1, "last_activity_date": 1528204219, "creation_date": 1528190610, "question_id": 50696610, "link": "https://stackoverflow.com/questions/50696610/opensslsslsslerror-ssl-connect-syscall-returned-5-errno-0-state-sslv3-tls-w", "title": "OpenSSL::SSL::SSLError: SSL_connect SYSCALL returned=5 errno=0 state=SSLv3/TLS write client hello", "body": "<pre><code>agent = Mechanize.new\nagent.redirect_ok = true\nagent.read_timeout = 300\nagent.ssl_version = :TLSv1\nagent.verify_mode = OpenSSL::SSL::VERIFY_NONE\nagent.get('https://consumer.etoolbox.buildingcommission.com.au/Pages/Search.aspx')\n</code></pre>\n\n<p>its not running, it gave this error.</p>\n\n<blockquote>\n  <p>OpenSSL::SSL::SSLError: SSL_connect SYSCALL returned=5 errno=0\n  state=SSLv3/TLS write client hello</p>\n</blockquote>\n"}, {"tags": ["ruby", "ssh"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528193821, "post_id": 50696075, "comment_id": 88404276, "body": "So <code>[&#39;ruby&#39;, &#39;path&#47;to&#47;receiver.rb&#39;, psw].shelljoin</code> didn&#39;t work either?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528193913, "post_id": 50696075, "comment_id": 88404341, "body": "BTW, this is certainly not an encoding problem \u2013 <code>$</code> has the same value in both, UTF-8 and ASCII."}, {"owner": {"reputation": 2597, "user_id": 3032364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zN0X3.jpg?s=128&g=1", "display_name": "Gsk", "link": "https://stackoverflow.com/users/3032364/gsk"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528194693, "post_id": 50696075, "comment_id": 88404850, "body": "@Stefan thanks, title and tags fixed"}, {"owner": {"reputation": 2597, "user_id": 3032364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zN0X3.jpg?s=128&g=1", "display_name": "Gsk", "link": "https://stackoverflow.com/users/3032364/gsk"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528194942, "post_id": 50696075, "comment_id": 88404982, "body": "@Stefan <code>[&#39;ruby&#39;, &#39;path&#47;to&#47;receiver.rb&#39;, psw].shelljoin</code> works. If you want to post it as an answer I can accept the solution"}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1528195390, "creation_date": 1528195390, "answer_id": 50698121, "question_id": 50696075, "link": "https://stackoverflow.com/questions/50696075/symbols-through-ssh/50698121#50698121", "title": "Symbols through SSH", "body": "<p>You have to properly <em>escape</em> the arguments, e.g. via <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/shellwords/rdoc/Shellwords.html#method-c-shelljoin\" rel=\"nofollow noreferrer\"><code>shelljoin</code></a>:</p>\n\n<pre><code>require 'shellwords'\n\npsw = \"TEst$1234\"\n['ruby', 'path/to/receiver.rb', psw].shelljoin\n#=&gt; \"ruby path/to/receiver.rb TEst\\\\$1234\"\n</code></pre>\n"}], "owner": {"reputation": 2597, "user_id": 3032364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zN0X3.jpg?s=128&g=1", "display_name": "Gsk", "link": "https://stackoverflow.com/users/3032364/gsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 50698121, "answer_count": 1, "score": -1, "last_activity_date": 1528195390, "creation_date": 1528188966, "last_edit_date": 1528194315, "question_id": 50696075, "link": "https://stackoverflow.com/questions/50696075/symbols-through-ssh", "title": "Symbols through SSH", "body": "<p>I am trying to open an SSH connection from a local machine to a remote machine by running <code>sender.rb</code> on the local machine, and call a script <code>receiver.rb</code> on the remote machine, providing a password as argument.</p>\n\n<h3>sender.rb</h3>\n\n<pre><code>require 'net/ssh'\n\nssh_opts = {\n    :host_name=&gt;\"19.09.20.18\",\n    :user=&gt;\"manual-ace\",\n    :password=&gt;\"42bike24\",\n    :port=&gt;1800,\n    :auth_methods=&gt;[\"password\"],\n}\n\nNet::SSH.start(nil, nil, ssh_opts) do |ssh|\n  psw = \"TEst$1234\".encode(\"UTF-8\")\n  p ssh.exec!(\"ruby path/to/receiver.rb #{psw}\")\nend\n</code></pre>\n\n<h3>receiver.rb</h3>\n\n<pre><code>ARGV.each do |my_str|\n  p my_str # OUTPUT: \"TEst234\"\nend\n</code></pre>\n\n<p>I have a problem seemingly related to bash interpreting the string as a command. Symbols in the password are not received as they are sent. <code>$1</code> is removed from the text. Inserting <code>$</code> removes the following character; having two or more <code>$</code> removes all characters between the first one and the character following the last one (<code>T$Es$t12$34</code> becomes <code>T4</code>). Some other characters such as <code>&lt;&gt;\\;\"</code> have the same behaviour or raise <code>bash: (command): command not found</code>.</p>\n\n<p>I tried working with <a href=\"https://stackoverflow.com/questions/6835846\">encoding</a> and <a href=\"https://stackoverflow.com/questions/17476389\"><code>Shellwords</code></a>. I'd like to to use <a href=\"https://www.owasp.org/index.php/Password_special_characters\" rel=\"nofollow noreferrer\">special characters for passwords</a> such as <code>!\"#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~</code>, although <a href=\"https://ux.stackexchange.com/questions/72568\">any printable character that the user inputs should be allowed</a>.</p>\n"}, {"tags": ["ruby", "encryption", "hash"], "comments": [{"owner": {"reputation": 667, "user_id": 4097470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e18a78f4c5f640539775e532d78313?s=128&d=identicon&r=PG&f=1", "display_name": "VirtualMichael", "link": "https://stackoverflow.com/users/4097470/virtualmichael"}, "edited": false, "score": 0, "creation_date": 1528187819, "post_id": 50695667, "comment_id": 88400628, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2624192/good-hash-function-for-strings\">Good Hash Function for Strings</a>"}, {"owner": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 1, "creation_date": 1528187904, "post_id": 50695667, "comment_id": 88400662, "body": "HMAC their email with your secret key and use the first 8 bytes to produce an unsigned 64-bit integer.  Concatenate to 6 digits and add 111111 if less than 10000."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 667, "user_id": 4097470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e18a78f4c5f640539775e532d78313?s=128&d=identicon&r=PG&f=1", "display_name": "VirtualMichael", "link": "https://stackoverflow.com/users/4097470/virtualmichael"}, "edited": false, "score": 0, "creation_date": 1528187979, "post_id": 50695667, "comment_id": 88400692, "body": "@VirtualMichael Sorry, I didn&#39;t specify this question is about Ruby.  Your suggested duplicate is about Java.  I know some of the logic will transfer  but I don&#39;t think enough to make this a duplicate.  Also, my question is more specific in terms of the end result - the other question is quite general."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 0, "creation_date": 1528188026, "post_id": 50695667, "comment_id": 88400717, "body": "@LukeJoshuaPark nice idea to use the email, thanks"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 0, "creation_date": 1528188072, "post_id": 50695667, "comment_id": 88400746, "body": "@LukeJoshuaPark any chance you could expand your comment into an answer with Ruby code?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 0, "creation_date": 1528188640, "post_id": 50695667, "comment_id": 88401071, "body": "@LukeJoshuaPark thanks but I think this is it - I use the last 6 digits of the decimal number rather than the first.  <code>Digest::SHA1.hexdigest(&#39;foofoo@example.com-SECRETKEY&#39;).to_i(&zwnj;&#8203;16).to_s.split(&quot;&quot;)[-&zwnj;&#8203;6..-1].join()</code> =&gt; <code>978099</code>.  As you suggest if the resulting number starts with a zero I can add 111111 to it."}, {"owner": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 2, "creation_date": 1528188739, "post_id": 50695667, "comment_id": 88401129, "body": "Yep that looks about right.  You should really use an HMAC rather than directly hashing, though.  Hashing with an appended key can lead to <a href=\"https://crypto.stackexchange.com/questions/6493/what-is-the-difference-between-a-hmac-and-a-hash-of-data?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">security vulnerabilities</a>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528192512, "post_id": 50695667, "comment_id": 88403477, "body": "What&#39;s the problem you are trying to solve by sending a 6-digit number via email?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528193947, "post_id": 50695667, "comment_id": 88404365, "body": "@Stefan to validate the email address, basically, without creating any orders or other records on our system.  It&#39;s like &quot;You must be able to receive an email from us in order to progress any further through this multi-step process&quot;.  The user gets the email and types the code into the form."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528194281, "post_id": 50695667, "comment_id": 88404589, "body": "@Stefan the actual <b>problem</b> is that people (bored kids I think, we provide software to schools) are getting quotes for subscriptions from us with bogus email addresses, which creates an admin overhead.  We want to stop them from even creating the quote request in the first place.  The email validation will not 100% stop this but it will reduce it."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528195297, "post_id": 50695667, "comment_id": 88405203, "body": "I&#39;d store the confirmation code either inside the user record (if you have one) or in the user&#39;s session (using an <a href=\"http://guides.rubyonrails.org/security.html#encrypted-session-storage\" rel=\"nofollow noreferrer\">encrypted session storage</a>)."}], "answers": [{"tags": [], "owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "is_accepted": false, "score": 0, "last_activity_date": 1528211970, "creation_date": 1528211970, "answer_id": 50703618, "question_id": 50695667, "link": "https://stackoverflow.com/questions/50695667/encrypt-or-hash-a-string-to-decimal-numbers-in-ruby/50703618#50703618", "title": "Encrypt or hash a string to decimal numbers in Ruby", "body": "<p><strong>Note:</strong> <em>Do not use this as a security measure. You've stated that you intend to use this only as a kind of diy captcha system, and this answer is provided in that context.</em></p>\n\n<p>OpenSSL provides good hash functions. Once you have the hash in hex the <code>to_i</code> method takes a base argument, so converting to decimal is simple. Then back to a string because that makes it easier to get the last characters.</p>\n\n<pre><code>require 'openssl'\nhash = OpenSSL::Digest::SHA256.hexdigest('user@example.com' + Random.new_seed.to_s)\nmessage = hash.to_i(16).to_s.chars.last(6).join\n</code></pre>\n\n<p>You could then store any part of this along with an expiration time.</p>\n"}], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528211970, "creation_date": 1528187647, "last_edit_date": 1528187913, "question_id": 50695667, "link": "https://stackoverflow.com/questions/50695667/encrypt-or-hash-a-string-to-decimal-numbers-in-ruby", "title": "Encrypt or hash a string to decimal numbers in Ruby", "body": "<p>In one of our signup processes, in a Ruby on Rails app, I want to send someone an email with a 6-digit numerical code that they need to copy or type into a box on the page.</p>\n\n<p>How I thought I might do it is to have a string on the page, in a hidden field, say, which, on generating the email, gets combined with some secret key from our codebase, then hashed or encrypted to a series of decimal numbers.  I then take the last six of these and put them in the email.</p>\n\n<p>When the form is submitted, with the original string, and the 6 digits the user has typed in, I can repeat the process on the string and test that it produces the same six digits as the user entered.</p>\n\n<p>The question is:  how do I hash/encrypt a string to get a series of decimal numbers?\u00a0  The original string can be anything (including a different set of decimal numbers), it just needs to be something that is randomly generated really.  </p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 2470, "user_id": 1013142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd97eb9f014330c6063dfadb77bbd5de?s=128&d=identicon&r=PG", "display_name": "Sudipta Mondal", "link": "https://stackoverflow.com/users/1013142/sudipta-mondal"}, "edited": false, "score": 2, "creation_date": 1528183060, "post_id": 50694259, "comment_id": 88397829, "body": "what code have you tried so far for solving this ?"}, {"owner": {"reputation": 357, "user_id": 9211857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7afb28e1b7699679e48fbe62caaac9?s=128&d=identicon&r=PG&f=1", "display_name": "Vijay Atmin", "link": "https://stackoverflow.com/users/9211857/vijay-atmin"}, "reply_to_user": {"reputation": 2470, "user_id": 1013142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd97eb9f014330c6063dfadb77bbd5de?s=128&d=identicon&r=PG", "display_name": "Sudipta Mondal", "link": "https://stackoverflow.com/users/1013142/sudipta-mondal"}, "edited": false, "score": 0, "creation_date": 1528183204, "post_id": 50694259, "comment_id": 88397921, "body": "Tried <code>example.shuffle</code>. But it shuffles all elements. And also <code>example.shuffle[0..4]</code>. It results array of shuffled elements <code>[2,3,1,5,4]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1528183679, "post_id": 50694324, "comment_id": 88398221, "body": "Or <code>a[0...5]</code> to make it a little more obvious."}], "tags": [], "owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "is_accepted": false, "score": 2, "last_activity_date": 1528183269, "creation_date": 1528183269, "answer_id": 50694324, "question_id": 50694259, "link": "https://stackoverflow.com/questions/50694259/how-to-shuffle-the-first-n-elements-in-array/50694324#50694324", "title": "How to shuffle the first n elements in array", "body": "<pre><code>a = [1, 2, 3, 4, 5, 6, 7, 8, 9] \na[0..4].shuffle + a[5..-1]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1528183643, "post_id": 50694364, "comment_id": 88398202, "body": "You can use <code>drop(5)</code> instead of <code>last(4)</code>, so you don&#39;t have to calculate the difference."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528211232, "post_id": 50694364, "comment_id": 88416070, "body": "You appear to agree with @Stefan that your answer would be improved by using <code>drop</code> rather than <code>last</code>. If so (and I think most Rubiests would agree), your answer would be cleaner if you simply made that change and omitted  your \u201cEDIT\u201d (so no mention would be made of <code>last</code>). Moreover, you thanked Stefan in a comment (the place to do that, IMO), so there\u2019s no need to do that in your answer as well."}], "tags": [], "owner": {"reputation": 518, "user_id": 8905332, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qSGD6IOatlQ/AAAAAAAAAAI/AAAAAAAAAOA/lcytjZkeivA/photo.jpg?sz=128", "display_name": "ldeld", "link": "https://stackoverflow.com/users/8905332/ldeld"}, "is_accepted": false, "score": 2, "last_activity_date": 1528184253, "last_edit_date": 1528184253, "creation_date": 1528183421, "answer_id": 50694364, "question_id": 50694259, "link": "https://stackoverflow.com/questions/50694259/how-to-shuffle-the-first-n-elements-in-array/50694364#50694364", "title": "How to shuffle the first n elements in array", "body": "<pre><code>example = [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\nexample.first(5).shuffle + example.last(4)\n</code></pre>\n\n<p>will return the array you need, although it might not be the most elegant solution</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>As @Stefan commented, you can use <code>drop</code> so you don't have to calculate the length of the remaining array:</p>\n\n<pre><code>example.first(5).shuffle + example.drop(5)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1528188234, "post_id": 50694370, "comment_id": 88400843, "body": "A small point: the OP has not made it clear whether the array is to be mutated, but the reference to <code>example.shuffle</code> may suggest that it is not to be mutated."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 11, "last_activity_date": 1528183799, "last_edit_date": 1528183799, "creation_date": 1528183457, "answer_id": 50694370, "question_id": 50694259, "link": "https://stackoverflow.com/questions/50694259/how-to-shuffle-the-first-n-elements-in-array/50694370#50694370", "title": "How to shuffle the first n elements in array", "body": "<p>You can <em>get</em> the first 5 elements via <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-5B-5D\" rel=\"noreferrer\"><code>[]</code></a>:</p>\n\n<pre><code>example[0, 5]\n#=&gt; [1, 2, 3, 4, 5]\n</code></pre>\n\n<p>Likewise, you can <em>set</em> the first 5 element via <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-5B-5D-3D\" rel=\"noreferrer\"><code>[]=</code></a>:</p>\n\n<pre><code>example[0, 5] = [5, 4, 3, 2, 1]\n#=&gt; [5, 4, 3, 2, 1]\n\nexample\n#=&gt; [5, 4, 3, 2, 1, 6, 7, 8, 9]\n</code></pre>\n\n<p>So to <code>shuffle</code> the first 5 elements, you could use:</p>\n\n<pre><code>example[0, 5] = example[0, 5].shuffle\n#=&gt; [3, 2, 1, 4, 5]\n\nexample\n#=&gt; [3, 2, 1, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<p>Note that <code>example[0, 5].shuffle!</code> would <em>not</em> work because <code>Array#[]</code> returns a new array instead of a reference to a subarray (there's no such thing in Ruby).</p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1528203384, "post_id": 50700289, "comment_id": 88410515, "body": "you could make it &quot;less destructive&quot; via <code>example.unshift(*example.shift(5).shuffle)</code>. This will still mutate <code>example</code> but <code>example</code> will still contain all the original elements. Not dissimilar from the elected answer"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1528205371, "post_id": 50700289, "comment_id": 88411943, "body": "@engineersmnky, great! I was looking for a splat solution like yours but I was not able: you would get my UP. Destructive: I mean that changes the original array: <code>example = example.shift(5).shuffle + example</code>. While  <code>example.first(5).shuffle + example.last(4)</code> is not."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1528202314, "creation_date": 1528202314, "answer_id": 50700289, "question_id": 50694259, "link": "https://stackoverflow.com/questions/50694259/how-to-shuffle-the-first-n-elements-in-array/50700289#50700289", "title": "How to shuffle the first n elements in array", "body": "<p>I'm late, but my two cents.\nThis is destructive.</p>\n\n<pre><code>example.shift(5).shuffle + example\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 1, "last_activity_date": 1528209765, "last_edit_date": 1528209765, "creation_date": 1528207589, "answer_id": 50702174, "question_id": 50694259, "link": "https://stackoverflow.com/questions/50694259/how-to-shuffle-the-first-n-elements-in-array/50702174#50702174", "title": "How to shuffle the first n elements in array", "body": "<p>A few more fun ways: (All non destructive)</p>\n\n<pre><code> a =[*1..9]\n\n a.each_slice(5).to_a.tap do |f| \n   f.first.shuffle!\n end.reduce(:+)\n\n a.reduce([]) do |memo,n|\n   (memo &lt;&lt; n).size == 5 ? memo.shuffle : memo\n end\n\n a.partition.with_index do |_,i| \n   i &lt; 5 \n end.inject { |memo,p| memo.shuffle.concat(p) }\n\n a.values_at(*[*0..4].shuffle).push(*a.drop(5)) \n</code></pre>\n\n<p>I also really like this one but only if all the elements are guaranteed unique</p>\n\n<pre><code> a.take(5).shuffle | a\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 9211857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7afb28e1b7699679e48fbe62caaac9?s=128&d=identicon&r=PG&f=1", "display_name": "Vijay Atmin", "link": "https://stackoverflow.com/users/9211857/vijay-atmin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 50694370, "answer_count": 5, "score": 0, "last_activity_date": 1528209765, "creation_date": 1528183031, "last_edit_date": 1528183935, "question_id": 50694259, "link": "https://stackoverflow.com/questions/50694259/how-to-shuffle-the-first-n-elements-in-array", "title": "How to shuffle the first n elements in array", "body": "<p>Let:</p>\n\n<pre><code>example = [1,2,3,4,5,6,7,8,9]\n</code></pre>\n\n<p>I want to shuffle its first five elements. Other elements have to remain under the same index, e.g.:</p>\n\n<pre><code>[2,4,1,3,5,6,7,8,9]\n[3,1,4,5,2,6,7,8,9]\n# etc\n</code></pre>\n\n<p>I've tried <code>example.shuffle</code>, but it shuffles all elements.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redmine-plugins"], "comments": [{"owner": {"reputation": 21, "user_id": 9895413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e0c67567b6ab7ef658be442afef6dd?s=128&d=identicon&r=PG&f=1", "display_name": "mfedossa", "link": "https://stackoverflow.com/users/9895413/mfedossa"}, "edited": false, "score": 0, "creation_date": 1528970949, "post_id": 50693460, "comment_id": 88712504, "body": "Ok so for people that would find this post, the solution was simple.  gem install and bundle all the correct versions in your Gemfile, rails s your app, check your environment (rails r &quot;puts Rails.env&quot;), change it to prod (export RAILS_ENV=&quot;production&quot;), and then you can &quot;rails generate redmine_plugin &lt;plug_name&gt;&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9895413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e0c67567b6ab7ef658be442afef6dd?s=128&d=identicon&r=PG&f=1", "display_name": "mfedossa", "link": "https://stackoverflow.com/users/9895413/mfedossa"}, "edited": false, "score": 0, "creation_date": 1528251608, "post_id": 50701344, "comment_id": 88431662, "body": "Thank you for the answer, but being in my rails app and doing the command it tells me: $ rails generate redmine_plugin Plugin_test  Running via Spring preloader in process 11306 Could not find generator &#39;redmine_plugin&#39;. Maybe you meant &#39;test_unit:plugin&#39;, &#39;resource_route&#39; or &#39;channel&#39; Run <code>rails generate --help</code> for more options.  So if I&#39;m in the rails app, why it stills doesn&#39;t work?"}, {"owner": {"reputation": 1114, "user_id": 5934752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7tGT8.jpg?s=128&g=1", "display_name": "Ravi Mariya", "link": "https://stackoverflow.com/users/5934752/ravi-mariya"}, "reply_to_user": {"reputation": 21, "user_id": 9895413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e0c67567b6ab7ef658be442afef6dd?s=128&d=identicon&r=PG&f=1", "display_name": "mfedossa", "link": "https://stackoverflow.com/users/9895413/mfedossa"}, "edited": false, "score": 0, "creation_date": 1528260616, "post_id": 50701344, "comment_id": 88433696, "body": "well i never created redmine plugin, but did you setup the redmine in your local machine and able to run it?"}, {"owner": {"reputation": 21, "user_id": 9895413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e0c67567b6ab7ef658be442afef6dd?s=128&d=identicon&r=PG&f=1", "display_name": "mfedossa", "link": "https://stackoverflow.com/users/9895413/mfedossa"}, "edited": false, "score": 0, "creation_date": 1528265653, "post_id": 50701344, "comment_id": 88435408, "body": "I use docker to have a Redmine image (i don&#39;t know if what i say is understanble), but i tried to run Redmine and it works locally. Somebody told me that maybe the basic configuration of docker unables to run correctly some redmine commands such as the redmine_plugin generator. but as i&#39;m totally new to docker and redmine, it will be difficult for me to set it correctly. i will try to install a virtual machine to run redmine, hopping the commands needed respond. Thank you anyway Ravi"}], "tags": [], "owner": {"reputation": 1114, "user_id": 5934752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7tGT8.jpg?s=128&g=1", "display_name": "Ravi Mariya", "link": "https://stackoverflow.com/users/5934752/ravi-mariya"}, "is_accepted": false, "score": 0, "last_activity_date": 1528260643, "last_edit_date": 1528260643, "creation_date": 1528205323, "answer_id": 50701344, "question_id": 50693460, "link": "https://stackoverflow.com/questions/50693460/redmine-plugin-creation-could-not-find-generator-redmine-plugin/50701344#50701344", "title": "Redmine plugin creation - Could not find generator &#39;redmine_plugin&#39;", "body": "<p>well simple problem, you're running command from outside of your redmine app directory, you need to go into your redmine app directory, after that you can run <code>rails generate redmine_plugin Plugin_test</code> from there</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 9895413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e0c67567b6ab7ef658be442afef6dd?s=128&d=identicon&r=PG&f=1", "display_name": "mfedossa", "link": "https://stackoverflow.com/users/9895413/mfedossa"}, "edited": false, "score": 0, "creation_date": 1529029930, "post_id": 50859697, "comment_id": 88738745, "body": "Thanks Akiko, yes I will let Docker aside for the moment (even if it&#39;s a useful tool), and stay on the &quot;normal way&quot;."}, {"owner": {"reputation": 1, "user_id": 5705762, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-u8byGs9Ys5A/AAAAAAAAAAI/AAAAAAAAAts/a0nFiLmyN8g/photo.jpg?sz=128", "display_name": "Akiko Takano", "link": "https://stackoverflow.com/users/5705762/akiko-takano"}, "reply_to_user": {"reputation": 21, "user_id": 9895413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e0c67567b6ab7ef658be442afef6dd?s=128&d=identicon&r=PG&f=1", "display_name": "mfedossa", "link": "https://stackoverflow.com/users/9895413/mfedossa"}, "edited": false, "score": 0, "creation_date": 1529056719, "post_id": 50859697, "comment_id": 88747969, "body": "Maybe you can also run rails generate redmine_plugin command in a Redmine\u2019s container, with using docker exec command. In case using docker, it is easy to use docker-compose.yml included in a same repository."}], "tags": [], "owner": {"reputation": 1, "user_id": 5705762, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-u8byGs9Ys5A/AAAAAAAAAAI/AAAAAAAAAts/a0nFiLmyN8g/photo.jpg?sz=128", "display_name": "Akiko Takano", "link": "https://stackoverflow.com/users/5705762/akiko-takano"}, "is_accepted": false, "score": 0, "last_activity_date": 1528986035, "creation_date": 1528986035, "answer_id": 50859697, "question_id": 50693460, "link": "https://stackoverflow.com/questions/50693460/redmine-plugin-creation-could-not-find-generator-redmine-plugin/50859697#50859697", "title": "Redmine plugin creation - Could not find generator &#39;redmine_plugin&#39;", "body": "<p>As Ravi mentioned above, you need to go into your redmine app directory instead of your rails app directory.</p>\n\n<p>Or, maybe you can exec plugin generate command via docker run command.</p>\n\n<pre><code># e.g. In case plugin name is \u201cmyplugin\"\ndocker run --name=redmine -it --rm \\\n  --volume=/srv/docker/redmine/redmine:/home/redmine/data \\\n  sameersbn/redmine:3.4.4-2 \\\n  app:rails generate redmine_plugin myplugin\n</code></pre>\n\n<p>If this works fine, plugin directory named \u201cmyplugin\u201d will be generated under /srv/docker/redmine/redmine/plugins/ directory.</p>\n\n<p>Personally, I think, you had batter not use docker to create and development Redmine\u2019s plugin, especially if you are not familiar with Redmine and Docker so much.</p>\n\n<p>I hope this would be any help.</p>\n"}], "owner": {"reputation": 21, "user_id": 9895413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e0c67567b6ab7ef658be442afef6dd?s=128&d=identicon&r=PG&f=1", "display_name": "mfedossa", "link": "https://stackoverflow.com/users/9895413/mfedossa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 320, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1528986035, "creation_date": 1528180194, "last_edit_date": 1528943485, "question_id": 50693460, "link": "https://stackoverflow.com/questions/50693460/redmine-plugin-creation-could-not-find-generator-redmine-plugin", "title": "Redmine plugin creation - Could not find generator &#39;redmine_plugin&#39;", "body": "<p>I run Redmine 3.4 with Rails (5.2.0) and Docker 18.03.1-ce on Ubuntu 16.04 Xenial (which is new for me), following this GitHub repository: <a href=\"https://github.com/sameersbn/docker-redmine\" rel=\"nofollow noreferrer\">https://github.com/sameersbn/docker-redmine</a></p>\n\n<p>I create my Rails app in the same folder where the docker-compose.yml has been created, and cd to it.</p>\n\n<p>Then I have the exact same problem than described in this Redmine post (<a href=\"http://www.redmine.org/boards/3/topics/48309?r=48507#message-48507\" rel=\"nofollow noreferrer\">http://www.redmine.org/boards/3/topics/48309?r=48507#message-48507</a>): when I try the command rails generate redmine_plugin Plug_test, this two error messages appear:</p>\n\n<ul>\n<li>Running via Spring preloader in process 32109 </li>\n<li>Could not find generator 'redmine_plugin'</li>\n</ul>\n\n<p>So I try the commands that Keith suggested, and running the generate command again, the Spring error message disappear, but the generate command still doesn't work (Could not find generator 'redmine_plugin').</p>\n\n<p>Any idea what to do? I don't know if I'm going in the right direction.</p>\n\n<p>Thanks a lot for your help.</p>\n"}, {"tags": ["arrays", "ruby", "sorting"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1528176468, "post_id": 50692210, "comment_id": 88394652, "body": "Have you tried anything?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1528179490, "post_id": 50692210, "comment_id": 88395969, "body": "<a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-sort_by\" rel=\"nofollow noreferrer\">Enumerable#sort_by</a> is the method of choice here, but you could use <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-sort\" rel=\"nofollow noreferrer\">Array#sort</a>:  <code>arr.sort { |a,b| a[3] &lt;=&gt; b[3] }</code> if the sort index were <code>3</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1528185288, "post_id": 50692369, "comment_id": 88399138, "body": "not interested in following the ruby community style guides? <a href=\"https://github.com/rubocop-hq/ruby-style-guide\" rel=\"nofollow noreferrer\">github.com/rubocop-hq/ruby-style-guide</a>"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 6, "last_activity_date": 1528185030, "last_edit_date": 1528185030, "creation_date": 1528174914, "answer_id": 50692369, "question_id": 50692210, "link": "https://stackoverflow.com/questions/50692210/ruby-sort-array-of-arrays-by-subindex-alphabetically/50692369#50692369", "title": "Ruby sort array of arrays by subindex alphabetically", "body": "<p>If the index is <code>3</code>, then:</p>\n\n<pre><code>arr_of_arrs.sort_by{|a| a[3]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 2, "last_activity_date": 1528174921, "creation_date": 1528174921, "answer_id": 50692370, "question_id": 50692210, "link": "https://stackoverflow.com/questions/50692210/ruby-sort-array-of-arrays-by-subindex-alphabetically/50692370#50692370", "title": "Ruby sort array of arrays by subindex alphabetically", "body": "<p>To sort by the fourth element (i.e. index 3):</p>\n\n<pre><code>arr_of_arrs.sort_by { |a| a[3] }\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>index = -&gt;(i) { -&gt;(a) { a[i] } }\narr_of_arrs.sort_by(&amp;index[3])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 5662649, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c66fd33748de9a2bcc009f8cf1316ecd?s=128&d=identicon&r=PG&f=1", "display_name": "Lyres", "link": "https://stackoverflow.com/users/5662649/lyres"}, "edited": false, "score": 0, "creation_date": 1528204387, "post_id": 50692534, "comment_id": 88411191, "body": "Thank you for the further explanation."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1528179039, "last_edit_date": 1528179039, "creation_date": 1528175970, "answer_id": 50692534, "question_id": 50692210, "link": "https://stackoverflow.com/questions/50692210/ruby-sort-array-of-arrays-by-subindex-alphabetically/50692534#50692534", "title": "Ruby sort array of arrays by subindex alphabetically", "body": "<p>The questions asks how one can sort arrays by a single index. As others have shown how that can be done I've chosen to provide a generalized solution that addresses tie-breaking.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def sort_by_index(arr, *idx_order)\n  arr.sort_by { |a| a.values_at(*idx_order) }\nend\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>arr = [[\"cart\", \"disk\", \"halt\", \"walk\"],\n       [\"prot\", \"waco\", \"beau\", \"drab\"],\n       [\"meet\", \"disk\", \"seem\", \"beam\"],\n       [\"find\", \"asks\", \"noun\", \"keen\"],\n       [\"jive\", \"disk\", \"look\", \"beam\"]]\n</code></pre>\n\n<p>Note that <code>arr</code> differs from the array given in the OP's example.</p>\n\n<p><em>Sort by index 1</em></p>\n\n<pre><code>sort_by_index(arr, 1)\n  #=&gt; [[\"find\", \"asks\", \"noun\", \"keen\"],\n  #    [\"cart\", \"disk\", \"halt\", \"walk\"],\n  #    [\"meet\", \"disk\", \"seem\", \"beam\"],\n  #    [\"jive\", \"disk\", \"look\", \"beam\"],\n  #    [\"prot\", \"waco\", \"beau\", \"drab\"]]\n</code></pre>\n\n<p><em>Sort by index 1, break ties with index 3</em></p>\n\n<pre><code>sort_by_index(arr, 1, 3)\n  #=&gt; [[\"find\", \"asks\", \"noun\", \"keen\"],\n  #    [\"meet\", \"disk\", \"seem\", \"beam\"],\n  #    [\"jive\", \"disk\", \"look\", \"beam\"],\n  #    [\"cart\", \"disk\", \"halt\", \"walk\"],\n  #    [\"prot\", \"waco\", \"beau\", \"drab\"]]\n</code></pre>\n\n<p><em>Sort by index 1, break ties with index 3, break ties on first two indices with index 2</em></p>\n\n<pre><code>sort_by_index(arr, 1, 3, 2)\n  #=&gt; [[\"find\", \"asks\", \"noun\", \"keen\"],\n  #    [\"jive\", \"disk\", \"look\", \"beam\"],\n  #    [\"meet\", \"disk\", \"seem\", \"beam\"], \n  #    [\"cart\", \"disk\", \"halt\", \"walk\"],\n  #    [\"prot\", \"waco\", \"beau\", \"drab\"]]\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>Consider the second example, where <code>idx_order = [1, 3]</code>. Then, when sorting, elements <code>a</code> (\"rows\") of <code>arr</code> are compared by</p>\n\n<pre><code>a.values_at(*idx_order) #=&gt; a.values_at(1, 3)\n</code></pre>\n\n<p>When comparing the first two elements of <code>arr</code> (<code>arr[0]</code> and <code>arr[1]</code>), the ordering of the following two arrays is determined:</p>\n\n<pre><code>[\"cart\",\"disk\",\"halt\",\"walk\"].values_at(1, 3) #=&gt; [\"disk\", \"walk\"]\n[\"prot\",\"waco\",\"beau\",\"drab\"].values_at(1, 3) #=&gt; [\"waco\", \"drab\"]\n</code></pre>\n\n<p>The method <a href=\"https://ruby-doc.org/core-2.5.0/Array.html#method-i-3C-3D-3E\" rel=\"nofollow noreferrer\">Array#&lt;=></a> is used to determine the order of these two 2-element arrays. (See, in particular, the third paragraph of the doc, which explains how arrays are compared \"element-wise\".)</p>\n\n<p>Since</p>\n\n<pre><code>\"disk\" &lt;=&gt; \"waco\" #=&gt; -1\n</code></pre>\n\n<p><code>arr[0]</code> is found be precede <code>arr[1]</code> in the sort order.</p>\n\n<p>Now suppose we compare <code>arr[0]</code> and <code>arr[2]</code>:</p>\n\n<pre><code>[\"cart\",\"disk\",\"halt\",\"walk\"].values_at(1, 3) #=&gt; [\"disk\", \"walk\"]\n[\"meet\",\"disk\",\"seem\",\"beam\"].values_at(1, 3) #=&gt; [\"disk\", \"beam\"]\n</code></pre>\n\n<p>As both of these 2-element arrays have <code>\"disk\"</code> at index <code>0</code>, we must compare <code>\"walk\"</code> and <code>\"beam\"</code> to determine the tie-breaker:</p>\n\n<pre><code>[\"disk\", \"walk\"] &lt;=&gt; [\"disk\", \"beam\"] #=&gt; 1\n</code></pre>\n\n<p>which tells us that <code>arr[2]</code> precedes <code>arr[0]</code> in the sort ordering.</p>\n"}], "owner": {"reputation": 183, "user_id": 5662649, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c66fd33748de9a2bcc009f8cf1316ecd?s=128&d=identicon&r=PG&f=1", "display_name": "Lyres", "link": "https://stackoverflow.com/users/5662649/lyres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 50692369, "answer_count": 3, "score": -2, "last_activity_date": 1528185030, "creation_date": 1528173944, "last_edit_date": 1528182075, "question_id": 50692210, "link": "https://stackoverflow.com/questions/50692210/ruby-sort-array-of-arrays-by-subindex-alphabetically", "title": "Ruby sort array of arrays by subindex alphabetically", "body": "<p>I have an array of arrays:</p>\n\n<pre><code>arr_of_arrs = [\n  [\"cart\", \"disk\", \"halt\", \"walk\"],\n  [\"prot\", \"waco\", \"beau\", \"drab\"],\n  [\"meet\", \"lick\", \"look\", \"itch\"],\n  [\"find\", \"asks\", \"noun\", \"keen\"],\n  [\"jive\", \"moon\", \"seem\", \"beam\"]\n]\n</code></pre>\n\n<p>How could I sort this array of arrays by the alphabetical order of the elements at specified index of the subarrays, say index 3, so its new order would be:</p>\n\n<pre><code>[\n  [\"jive\", \"moon\", \"seem\", \"beam\"],\n  [\"prot\", \"waco\", \"beau\", \"drab\"],\n  [\"meet\", \"lick\", \"look\", \"itch\"],\n  [\"find\", \"asks\", \"noun\", \"keen\"],\n  [\"cart\", \"disk\", \"halt\", \"walk\"]\n] #                        ^^^^^^ index 3 is ordered\n</code></pre>\n"}, {"tags": ["ruby", "namespaces"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1528174707, "post_id": 50691988, "comment_id": 88394108, "body": "Why not write a quick&#39;n&#39;dirty shell script with a bit of <code>sed</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528192854, "post_id": 50691988, "comment_id": 88403695, "body": "<i>&quot;I don&#39;t want to type in the long format&quot;</i> \u2013 you mean when creating a new class / module?"}, {"owner": {"reputation": 968, "user_id": 989133, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UwgZk.jpg?s=128&g=1", "display_name": "Arindam", "link": "https://stackoverflow.com/users/989133/arindam"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528197445, "post_id": 50691988, "comment_id": 88406644, "body": "@Stefan yes while creating the class/module"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528197964, "post_id": 50691988, "comment_id": 88406970, "body": "This sounds like something your editor / IDE should help you with."}], "answers": [{"tags": [], "owner": {"reputation": 340, "user_id": 6855759, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3UfK3V6lnPY/AAAAAAAAAAI/AAAAAAAAAlU/CG1lontACf0/photo.jpg?sz=128", "display_name": "Caleb Keene", "link": "https://stackoverflow.com/users/6855759/caleb-keene"}, "is_accepted": true, "score": 2, "last_activity_date": 1528178589, "last_edit_date": 1528178589, "creation_date": 1528173717, "answer_id": 50692168, "question_id": 50691988, "link": "https://stackoverflow.com/questions/50691988/how-to-add-module-namespace-to-a-ruby-class-module/50692168#50692168", "title": "How to add module namespace to a ruby class/module?", "body": "<p>It seems like what you're asking is kinda multi-faceted, but if you just want to use the class in another file without having to type out the namespace each time then a simple solution would just be to redefine it in the file you want to use it in</p>\n\n<pre><code>ClassName = A::B::C::D::ClassName\n</code></pre>\n\n<p>Then you can just do <code>ClassName.method</code> just fine</p>\n"}], "owner": {"reputation": 968, "user_id": 989133, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UwgZk.jpg?s=128&g=1", "display_name": "Arindam", "link": "https://stackoverflow.com/users/989133/arindam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 50692168, "answer_count": 1, "score": 0, "last_activity_date": 1528178589, "creation_date": 1528172501, "question_id": 50691988, "link": "https://stackoverflow.com/questions/50691988/how-to-add-module-namespace-to-a-ruby-class-module", "title": "How to add module namespace to a ruby class/module?", "body": "<p>I want to add a namespace to a class/module I'm defining, but I don't want to type in the long format</p>\n\n<p><code>class A::B::C::D::&lt;ClassName&gt;</code></p>\n\n<p>OR</p>\n\n<pre><code>module A\n  module B\n    module C\n      module D\n        class ClassName\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>In other words, I just want to define the class <code>class ClassName</code> and then need a way to send this class to live under the namespace <code>A::B::C::D</code></p>\n\n<p>So that I can write a bunch of code like so:</p>\n\n<pre><code># File Name: a/b/c/d/some_class.rb\nclass SomeClass\n  include SomeModule\n  # class content\nend\n\n# File Name: a/b/c/d/some_module.rb\nmodule SomeModule\n  # module content\nend\n</code></pre>\n\n<p>Because there are too many modules in my codebase, I don't want to type in the prefixing namespace everytime. But I want to say something like this at the end:</p>\n\n<pre><code>SomeClass.add_to_namespace(A::B::C::D)\nSomeModule.add_to_namespace(A::B::C::D)\n</code></pre>\n\n<p><strong>Important:</strong> This should also affect class namespace lookup so that Ruby/Rails doesn't complain like:</p>\n\n<p><code>expected a/b/c/d/some_class.rb to define SomeClass</code></p>\n\n<p>Question: Will <code>include</code>-ing my class in the namespace have the same effect?</p>\n\n<pre><code>module A::B::C::D\n  include ClassName\nend\n</code></pre>\n"}, {"tags": ["html", "css", "ruby", "mime-types", "mime"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528172199, "post_id": 50691921, "comment_id": 88393421, "body": "Can you include the error <i>text</i> in the body of your question? Images, especially links to images, are problematic for some people and can&#39;t be indexed properly, meaning that other people looking for the same error can&#39;t find this question and any answers it might have."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528172254, "post_id": 50691921, "comment_id": 88393433, "body": "This seems to be a server-side issue, your CSS is being served up as HTML. On servers like Apache <code>httpd</code> this requires identifying <code>.css</code> files with the right MIME type (<code>text&#47;css</code>)."}, {"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 0, "creation_date": 1528193758, "post_id": 50691921, "comment_id": 88404234, "body": "Related: <a href=\"https://stackoverflow.com/q/43532944/1016716\">css was not loaded because its MIME type, \u201ctext/html\u201d, is not \u201ctext/css\u201d</a> and <a href=\"https://stackoverflow.com/q/41769001/1016716\">yii2 css file won&#39;t load because it&#39;s MIME type text/html is not text/css on windows7 apache server</a> and <a href=\"https://stackoverflow.com/q/39241820/1016716\">Server responds by \u201ctext/html\u201d to a \u201ctext/css\u201d request</a> and <a href=\"https://stackoverflow.com/q/45534501/1016716\">Page CSS will not load - simple html and js file</a> and <a href=\"https://stackoverflow.com/q/11480347/1016716\">.js and .css files are loading as text/html in my JSP page</a>"}], "answers": [{"tags": [], "owner": {"reputation": 340, "user_id": 6855759, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3UfK3V6lnPY/AAAAAAAAAAI/AAAAAAAAAlU/CG1lontACf0/photo.jpg?sz=128", "display_name": "Caleb Keene", "link": "https://stackoverflow.com/users/6855759/caleb-keene"}, "is_accepted": false, "score": 0, "last_activity_date": 1528173115, "last_edit_date": 1528173115, "creation_date": 1528172320, "answer_id": 50691966, "question_id": 50691921, "link": "https://stackoverflow.com/questions/50691921/refused-to-apply-style-because-mime-type-is-not-supported/50691966#50691966", "title": "Refused to apply style because MIME type is not supported", "body": "<p>I imagine you'd want <code>text/css</code> for your stylesheets, and <code>application/javascript</code> for the JS files.</p>\n\n<p>According to the sinatra docs, the incoming request object can be accessed from the request level</p>\n\n<pre><code>get '/foo' do\n  t = %w[text/css text/html application/javascript]\n  request.accept              # ['text/html', '*/*']\n  request.accept? 'text/xml'  # true\n  request.preferred_type(t)   # 'text/html'\nend\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9867771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93153d10478cef204d2a49d751bdae7d?s=128&d=identicon&r=PG&f=1", "display_name": "Natalie", "link": "https://stackoverflow.com/users/9867771/natalie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2384, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1598184543, "creation_date": 1528171992, "last_edit_date": 1580302563, "question_id": 50691921, "link": "https://stackoverflow.com/questions/50691921/refused-to-apply-style-because-mime-type-is-not-supported", "title": "Refused to apply style because MIME type is not supported", "body": "<p>I keep getting an error that says that the MIME type ('text/html') isn't executable or not a supported stylesheet MIME type and that strict MIME checking is enabled.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pGeUL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pGeUL.png\" alt=\"Error shown\"></a></p>\n\n<p>My code that links it is</p>\n\n<pre><code>&lt;link href=\"vendor/bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\"&gt;\n\n&lt;!-- Custom styles for this template --&gt;\n&lt;link href=\"css/heroic-features.css\" rel=\"stylesheet\"&gt;\n\n&lt;!-- Bootstrap core JavaScript --&gt;\n&lt;script src=\"vendor/jquery/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"vendor/bootstrap/js/bootstrap.bundle.min.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>This is how the template is supposed to look</p>\n\n<p><a href=\"https://i.stack.imgur.com/4sU78.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4sU78.png\" alt=\"Template\"></a></p>\n\n<p>However, this is what it looks like</p>\n\n<p><a href=\"https://i.stack.imgur.com/VJSEZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VJSEZ.png\" alt=\"Template\"></a></p>\n\n<p>Do I need to change text/html into something else? </p>\n\n<pre><code>accepts: {\n        \"*\": allTypes,\n        text: \"text/plain\",\n        html: \"text/html\",\n        xml: \"application/xml, text/xml\",\n        json: \"application/json, text/javascript\"\n    }, \n</code></pre>\n\n<p>Sinatra is telling me to do this</p>\n\n<p><a href=\"https://i.stack.imgur.com/PxAPY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PxAPY.png\" alt=\"this\"></a></p>\n\n<p>but I've tried and it doesn't work</p>\n\n<p>Is there anything I should change or add to my code so that the css works?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "blob", "rails-activestorage"], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 6701820, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q_9g0OuM9ZQ/AAAAAAAAAAI/AAAAAAAAAEw/ktX4E3hT93s/photo.jpg?sz=128", "display_name": "TheVinspro", "link": "https://stackoverflow.com/users/6701820/thevinspro"}, "edited": false, "score": 1, "creation_date": 1533261801, "post_id": 51633030, "comment_id": 90292066, "body": "I was also thinking same after a lot of searching solutions. I tried this but nothing worked. Then I stopped rails up-gradation."}, {"owner": {"reputation": 361, "user_id": 4968403, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-tpcgZvb1Kg0/AAAAAAAAAAI/AAAAAAAAAAA/GTFUDUKoP7A/photo.jpg?sz=128", "display_name": "Kiran Patil", "link": "https://stackoverflow.com/users/4968403/kiran-patil"}, "edited": false, "score": 0, "creation_date": 1546505004, "post_id": 51633030, "comment_id": 94873868, "body": "I am also facing the same issue. They say that they are going to fix it before rails 6 beta release which is scheduled to release on Jan 15 2019."}], "tags": [], "owner": {"reputation": 56, "user_id": 1455981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a5b31917e2015f9aac0ba4b904a2ffc?s=128&d=identicon&r=PG", "display_name": "Cuong Nguyen Minh", "link": "https://stackoverflow.com/users/1455981/cuong-nguyen-minh"}, "is_accepted": false, "score": 0, "last_activity_date": 1533169169, "last_edit_date": 1533169169, "creation_date": 1533125577, "answer_id": 51633030, "question_id": 50691823, "link": "https://stackoverflow.com/questions/50691823/undefined-local-variable-or-method-mimes-for-respond-to-for-devisecontrollerc/51633030#51633030", "title": "undefined local variable or method `mimes_for_respond_to&#39; for DeviseController:Class error in Rails 6.0.0.0.alpha", "body": "<p><code>responder</code> is a dependency of <code>devise</code> gem and others. </p>\n\n<p>When trying to upgrading Rails (from 5.1.6 to 5.2.1) and Gemfile, somehow the <code>responder</code> gem was downgraded to version 0.6.5 (may be it was related to one of my gem in Gemfile)</p>\n\n<p>Update the <code>responder</code> gem to latest version may fix this. For now it is version 2.4.0 which should work with devise 4.4.3</p>\n\n<p><code>bundle update responders</code></p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 301, "user_id": 6701820, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q_9g0OuM9ZQ/AAAAAAAAAAI/AAAAAAAAAEw/ktX4E3hT93s/photo.jpg?sz=128", "display_name": "TheVinspro", "link": "https://stackoverflow.com/users/6701820/thevinspro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1533169169, "creation_date": 1528171408, "last_edit_date": 1528173640, "question_id": 50691823, "link": "https://stackoverflow.com/questions/50691823/undefined-local-variable-or-method-mimes-for-respond-to-for-devisecontrollerc", "title": "undefined local variable or method `mimes_for_respond_to&#39; for DeviseController:Class error in Rails 6.0.0.0.alpha", "body": "<p>I was working on Devise + active storage, need a method  <a href=\"http://edgeapi.rubyonrails.org/classes/ActiveStorage/Blob.html#method-i-open\" rel=\"nofollow noreferrer\">ActiveStorage::Blob#open</a> which is available currently only in rails 6 vdersion so upgraded rails 5.2 to rails 6.0.0.alpha. After upgrading I'm getting this <a href=\"https://github.com/plataformatec/devise/issues/3160\" rel=\"nofollow noreferrer\">error</a>. I tried many solutions but none of them work.</p>\n\n<pre><code>    Started GET \"/admins/sign_in\" for 127.0.0.1 at 2018-06-05 08:23:21 +0530\n   (1.9ms)  SELECT \"schema_migrations\".\"version\" FROM \"schema_migrations\" ORDER BY \"schema_migrations\".\"version\" ASC\n  \u21b3 /home/rotlu_crush/.rvm/gems/ruby-2.4.1/gems/activerecord-5.2.0/lib/active_record/log_subscriber.rb:98\n\nActionController::RoutingError (undefined local variable or method `mimes_for_respond_to' for DeviseController:Class):\n\ndevise (4.4.3) app/controllers/devise_controller.rb:18:in `&lt;class:DeviseController&gt;'\ndevise (4.4.3) app/controllers/devise_controller.rb:4:in `&lt;main&gt;'\nbootsnap (1.3.0) lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:100:in `load'\nbootsnap (1.3.0) lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:100:in `load'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:468:in `block in load_file'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:653:in `new_constants_in'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:467:in `load_file'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:365:in `block in require_or_load'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:37:in `block in load_interlock'\nactivesupport (5.2.0) lib/active_support/dependencies/interlock.rb:14:in `block in loading'\nactivesupport (5.2.0) lib/active_support/concurrency/share_lock.rb:151:in `exclusive'\nactivesupport (5.2.0) lib/active_support/dependencies/interlock.rb:13:in `loading'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:37:in `load_interlock'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:348:in `require_or_load'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:502:in `load_missing_constant'\nbootsnap (1.3.0) lib/bootsnap/load_path_cache/core_ext/active_support.rb:43:in `load_missing_constant'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:193:in `const_missing'\ndevise (4.4.3) app/controllers/devise/sessions_controller.rb:3:in `&lt;main&gt;'\nbootsnap (1.3.0) lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:100:in `load'\nbootsnap (1.3.0) lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:100:in `load'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:468:in `block in load_file'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:653:in `new_constants_in'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:467:in `load_file'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:365:in `block in require_or_load'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:37:in `block in load_interlock'\nactivesupport (5.2.0) lib/active_support/dependencies/interlock.rb:14:in `block in loading'\nactivesupport (5.2.0) lib/active_support/concurrency/share_lock.rb:151:in `exclusive'\nactivesupport (5.2.0) lib/active_support/dependencies/interlock.rb:13:in `loading'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:37:in `load_interlock'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:348:in `require_or_load'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:502:in `load_missing_constant'\nbootsnap (1.3.0) lib/bootsnap/load_path_cache/core_ext/active_support.rb:43:in `load_missing_constant'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:193:in `const_missing'\nactivesupport (5.2.0) lib/active_support/inflector/methods.rb:285:in `const_get'\nactivesupport (5.2.0) lib/active_support/inflector/methods.rb:285:in `block in constantize'\nactivesupport (5.2.0) lib/active_support/inflector/methods.rb:281:in `each'\nactivesupport (5.2.0) lib/active_support/inflector/methods.rb:281:in `inject'\nactivesupport (5.2.0) lib/active_support/inflector/methods.rb:281:in `constantize'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:574:in `get'\nactivesupport (5.2.0) lib/active_support/dependencies.rb:605:in `constantize'\nactionpack (5.2.0) lib/action_dispatch/http/request.rb:88:in `controller_class_for'\nactionpack (5.2.0) lib/action_dispatch/http/request.rb:81:in `controller_class'\nactionpack (5.2.0) lib/action_dispatch/routing/route_set.rb:46:in `controller'\nactionpack (5.2.0) lib/action_dispatch/routing/route_set.rb:32:in `serve'\nactionpack (5.2.0) lib/action_dispatch/routing/mapper.rb:18:in `block in &lt;class:Constraints&gt;'\nactionpack (5.2.0) lib/action_dispatch/routing/mapper.rb:48:in `serve'\nactionpack (5.2.0) lib/action_dispatch/journey/router.rb:52:in `block in serve'\nactionpack (5.2.0) lib/action_dispatch/journey/router.rb:35:in `each'\nactionpack (5.2.0) lib/action_dispatch/journey/router.rb:35:in `serve'\nactionpack (5.2.0) lib/action_dispatch/routing/route_set.rb:840:in `call'\nrack-pjax (1.0.0) lib/rack/pjax.rb:12:in `call'\nremotipart (1.4.2) lib/remotipart/middleware.rb:32:in `call'\nwarden (1.2.7) lib/warden/manager.rb:36:in `block in call'\nwarden (1.2.7) lib/warden/manager.rb:35:in `catch'\nwarden (1.2.7) lib/warden/manager.rb:35:in `call'\nrack (2.0.5) lib/rack/tempfile_reaper.rb:15:in `call'\nrack (2.0.5) lib/rack/etag.rb:25:in `call'\nrack (2.0.5) lib/rack/conditional_get.rb:25:in `call'\nrack (2.0.5) lib/rack/head.rb:12:in `call'\nactionpack (5.2.0) lib/action_dispatch/http/content_security_policy.rb:18:in `call'\nrack (2.0.5) lib/rack/session/abstract/id.rb:232:in `context'\nrack (2.0.5) lib/rack/session/abstract/id.rb:226:in `call'\nactionpack (5.2.0) lib/action_dispatch/middleware/cookies.rb:670:in `call'\nactiverecord (5.2.0) lib/active_record/migration.rb:559:in `call'\nactionpack (5.2.0) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'\nactivesupport (5.2.0) lib/active_support/callbacks.rb:98:in `run_callbacks'\nactionpack (5.2.0) lib/action_dispatch/middleware/callbacks.rb:26:in `call'\nactionpack (5.2.0) lib/action_dispatch/middleware/executor.rb:14:in `call'\nactionpack (5.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'\nweb-console (3.6.2) lib/web_console/middleware.rb:135:in `call_app'\nweb-console (3.6.2) lib/web_console/middleware.rb:30:in `block in call'\nweb-console (3.6.2) lib/web_console/middleware.rb:20:in `catch'\nweb-console (3.6.2) lib/web_console/middleware.rb:20:in `call'\nactionpack (5.2.0) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'\nrailties (5.2.0) lib/rails/rack/logger.rb:38:in `call_app'\nrailties (5.2.0) lib/rails/rack/logger.rb:26:in `block in call'\nactivesupport (5.2.0) lib/active_support/tagged_logging.rb:71:in `block in tagged'\nactivesupport (5.2.0) lib/active_support/tagged_logging.rb:28:in `tagged'\nactivesupport (5.2.0) lib/active_support/tagged_logging.rb:71:in `tagged'\nrailties (5.2.0) lib/rails/rack/logger.rb:26:in `call'\nsprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'\nactionpack (5.2.0) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'\nactionpack (5.2.0) lib/action_dispatch/middleware/request_id.rb:27:in `call'\nrack (2.0.5) lib/rack/method_override.rb:22:in `call'\nrack (2.0.5) lib/rack/runtime.rb:22:in `call'\nactivesupport (5.2.0) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'\nactionpack (5.2.0) lib/action_dispatch/middleware/executor.rb:14:in `call'\nactionpack (5.2.0) lib/action_dispatch/middleware/static.rb:127:in `call'\nrack (2.0.5) lib/rack/sendfile.rb:111:in `call'\nrailties (5.2.0) lib/rails/engine.rb:524:in `call'\npuma (3.11.4) lib/puma/configuration.rb:225:in `call'\npuma (3.11.4) lib/puma/server.rb:632:in `handle_request'\npuma (3.11.4) lib/puma/server.rb:446:in `process_client'\npuma (3.11.4) lib/puma/server.rb:306:in `block in run'\npuma (3.11.4) lib/puma/thread_pool.rb:120:in `block in spawn_thread'\n</code></pre>\n\n<p>Gem file:</p>\n\n<pre><code>ruby '2.4.1'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\n# gem 'rails', '~&gt; 5.2.0'\ngem \"rails\", github: \"rails/rails\"\n# Use postgresql as the database for Active Record\ngem 'pg', '&gt;= 0.18', '&lt; 2.0'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.11'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'mini_racer', platforms: :ruby\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 4.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use ActiveStorage variant\n# gem 'mini_magick', '~&gt; 4.8'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n# \ngem 'figaro'\ngem 'devise'\n# gem 'rails_admin', github: 'dtcristo/rails_admin', branch: 'active_storage'\ngem 'rails_admin', github: 'dtcristo/rails_admin', branch: 'active_storage'\n# gem 'rails_admin'\ngem 'rails_admin_rollincode'\n# gem \"wysiwyg-rails\"\ngem \"activerecord-import\"\ngem \"simple_xlsx_reader\"\n</code></pre>\n\n<p>If any one had same issue, please help to resolve this issue. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "devise", "omniauth-facebook"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1528176223, "post_id": 50691816, "comment_id": 88394565, "body": "In callback action to the oauth request, build the user and check if it is valid. If not, render a user form with most details prefilled (fetched from facebook) and other details shall be filled by user."}, {"owner": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1528180995, "post_id": 50691816, "comment_id": 88396687, "body": "You won\u2019t <i>get</i> an e-mail address for every Facebook user \u2013 lots of them might not even have one on file with Facebook, if they signed up using their mobile \u2026"}], "answers": [{"tags": [], "owner": {"reputation": 1957, "user_id": 816534, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/70bacfa0a93dfc516f0e328c8baf7010?s=128&d=identicon&r=PG", "display_name": "gdurelle", "link": "https://stackoverflow.com/users/816534/gdurelle"}, "is_accepted": false, "score": 0, "last_activity_date": 1528193305, "creation_date": 1528193305, "answer_id": 50697481, "question_id": 50691816, "link": "https://stackoverflow.com/questions/50691816/prompt-user-for-email-when-signup-with-facebook-and-removed-access-to-email/50697481#50697481", "title": "Prompt user for email when signup with facebook and removed access to email", "body": "<p>If the user refuse to communicate its email, asking for it anyway will not make him happy...</p>\n\n<p>The best thing to do is to respect that and create a migration to remove the requirement on the email field.</p>\n\n<pre><code>change_column :users, :email, :string, null: true\n</code></pre>\n\n<p>do not forget to remote index and foreign_keys too</p>\n\n<p>To Identify your user i sugges tyou associate an <code>Identity</code> model to it, that will handle the return fields : <code>provider_id, provider_name, name, username</code>, etc.\nThus you can add more social identifications easily.</p>\n"}, {"tags": [], "owner": {"reputation": 1393, "user_id": 975932, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/428d0b7ba2b58e8d5a996fc7342142b2?s=128&d=identicon&r=PG", "display_name": "Umair Abid", "link": "https://stackoverflow.com/users/975932/umair-abid"}, "is_accepted": false, "score": 0, "last_activity_date": 1528193847, "creation_date": 1528193847, "answer_id": 50697663, "question_id": 50691816, "link": "https://stackoverflow.com/questions/50691816/prompt-user-for-email-when-signup-with-facebook-and-removed-access-to-email/50697663#50697663", "title": "Prompt user for email when signup with facebook and removed access to email", "body": "<p>If you can live without email then @gdurelle will work but considering that will be highly unlikely since email is used for number of purposes in the applications specially for communicating with user, you might want to take one of the following options when user refuses to give permission for email address,</p>\n\n<ul>\n<li><p>When user returns to your app, tell them they cannot sign up without and it is mandatory for them in order to use app. With that, also let them know that you have proper privacy and data protection policy and they need not to worry</p></li>\n<li><p>In case user still refuses give them an option to sign up without facebook and plain email/password way and later ask for the permissions for facebook when you will already have the email address</p></li>\n</ul>\n"}], "owner": {"reputation": 65, "user_id": 9873649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/124027872e933d237200b4e30218186b?s=128&d=identicon&r=PG&f=1", "display_name": "manohar vadapalli", "link": "https://stackoverflow.com/users/9873649/manohar-vadapalli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528193847, "creation_date": 1528171361, "question_id": 50691816, "link": "https://stackoverflow.com/questions/50691816/prompt-user-for-email-when-signup-with-facebook-and-removed-access-to-email", "title": "Prompt user for email when signup with facebook and removed access to email", "body": "<p>I'm building a rails application and usign devise and omniauth-facebook for facebook authentication.</p>\n\n<p>When the user signup with facebook, facebook prompts user to give access to the fields we requested.</p>\n\n<p>If the user un checked the email field, facebook doesn't return email. But devise needs email field to create a user.\nHow can I handle this situation?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pagination", "limit", "offset"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1528170822, "post_id": 50691233, "comment_id": 88393084, "body": "not clear to me how the first snippet relates to the other two."}, {"owner": {"reputation": 5, "user_id": 9826220, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Amit Bisht", "link": "https://stackoverflow.com/users/9826220/amit-bisht"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1528172456, "post_id": 50691233, "comment_id": 88393474, "body": "they the function definition, for functions used in first snippet"}], "owner": {"reputation": 5, "user_id": 9826220, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Amit Bisht", "link": "https://stackoverflow.com/users/9826220/amit-bisht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528184497, "creation_date": 1528166276, "last_edit_date": 1528175251, "question_id": 50691233, "link": "https://stackoverflow.com/questions/50691233/pagination-on-two-active-record-objects", "title": "Pagination on two Active record objects", "body": "<pre><code>taxon = Spree::Taxon.find_by_permalink('categories/outlet')    \non_sale_products = taxon.products.on_hand\ndiscontinued_variant_products = load_products_with_discontinued_variants\n@PageItemLimit = 4\n if params[:page]\n  offset = (params[:page].to_i) *  @PageItemLimit\nelse\n  offset = 0\nend\nproducts = discontinued_variant_products | on_sale_products\nproducts = products[(offset) , @PageItemLimit]\n</code></pre>\n\n<hr>\n\n<pre><code>def load_products_with_discontinued_variants\n key = Spree::Product.discontinued_variants_cache_key\n  product_ids = Rails.cache.fetch key, expires_at: 1.day do\n   Spree::Product\n    .with_discontinued_variants\n    .select { |product| product.variants.any? { |v| v.on_sale? &amp;&amp; \n     v.in_stock? } }\n    .pluck(:id)\n    end\n Spree::Product.with_discontinued_variants.where(\"id IN (?)\", product_ids)\nend\n</code></pre>\n\n<hr>\n\n<pre><code>add_search_scope :with_discontinued_variants do\n select(' distinct spree_products.*').includes(variants: { prices: { \n  sale_prices: :calculator }}).where(discontinued_variants: true)\nend\n</code></pre>\n\n<p>This is my current set-up for pagination,</p>\n\n<p>discontinued_variant_products is of type active record relation object.\non_sale_products is of type active record associations.</p>\n\n<p>currently the offset, limit logic is applied to products which are an array, holding the result of active record object unions (All of the data).\nI want to use the limit and offset keyword on the active record object for pagination but as they are two objects, handling limit-offset on both \nseparately is giving incorrect results, can some provide me with correct logic for it or if the two active record objects can be merged into a new Active record object,\nlimit-offset can be applied to it easily.</p>\n"}, {"tags": ["ruby", "sequel"], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 4, "last_activity_date": 1528289384, "last_edit_date": 1528289384, "creation_date": 1528229749, "answer_id": 50708263, "question_id": 50690724, "link": "https://stackoverflow.com/questions/50690724/sequel-query-with-join-and-condition-on-the-other-table/50708263#50708263", "title": "Sequel query with join and condition on the other table", "body": "<p><strong>Disclaimer: I have never actually used <code>sequel</code></strong>  </p>\n\n<p>There appears to be a method <a href=\"https://www.rubydoc.info/github/jeremyevans/sequel/Sequel%2FDataset:qualify\" rel=\"nofollow noreferrer\"><code>Sequel::Dataset#qualify</code></a> that will do exactly what you are asking and should result in:</p>\n\n<pre><code>select first.* from first \n  join second on first.second_id = second.id\n  where second.deactivated = false\n</code></pre>\n\n<p>I think the implementation would look like: </p>\n\n<pre><code>First.join(:second, id: :second_id)\n    .where(Sequel[:second][:deactivated] =&gt; false) \n    #OR .where(\"second.deactivated\": false)\n    #OR .where{[[second[:deactivated],false]]}\n    .qualify\n    .paged_each do |first|\n      # magic happens here\n    end\n</code></pre>\n\n<p>Now if <code>First</code> and <code>Second</code> are properly associated <code>Sequel::Model</code>s it appears the join condition can be inferred through <code>association_join</code> <a href=\"https://github.com/jeremyevans/sequel#joining-with-associations\" rel=\"nofollow noreferrer\">See Here from the docs</a> e.g. </p>\n\n<pre><code>First.association_join(:second)\n    .where(Sequel[:second][:deactivated] =&gt; false)\n    .qualify\n    .paged_each do |first|\n      # magic happens here\n    end\n</code></pre>\n"}], "owner": {"reputation": 26640, "user_id": 13163, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/67f7ed4d56aafb0563abfe2c74697a3d?s=128&d=identicon&r=PG", "display_name": "Krzysztof Kozmic", "link": "https://stackoverflow.com/users/13163/krzysztof-kozmic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1678, "favorite_count": 1, "accepted_answer_id": 50708263, "answer_count": 1, "score": 4, "last_activity_date": 1528289384, "creation_date": 1528161119, "last_edit_date": 1528256420, "question_id": 50690724, "link": "https://stackoverflow.com/questions/50690724/sequel-query-with-join-and-condition-on-the-other-table", "title": "Sequel query with join and condition on the other table", "body": "<p>I'm pretty new to Sequel and I'm scratching my head trying to figure out how to get Sequel's API to generate the following trivial SQL:</p>\n\n<pre><code>          select f.* from first f\n          join second s on f.second_id = s.id\n          where s.deactivated = false\n</code></pre>\n\n<p>The best I could come up with is:</p>\n\n<pre><code>      First.join(:second, deactivated: false, id: :second_id)\n        .paged_each do |first|\n          # magic happens here\n        end\n</code></pre>\n\n<p>But that does <code>select *</code> not <code>select first.*</code> and as a result gets confused about what <code>id</code> to order by for paging and throws <code>PG::AmbiguousColumn: ERROR:  ORDER BY \"id\" is ambiguous</code></p>\n\n<p>This is using Sequel 5.9.0 and Postres 10.</p>\n\n<h1>Solution</h1>\n\n<p>Thanks to @engineersmnky's suggestion about <code>qualify</code> and some further reading here's the approach I ended up using.</p>\n\n<pre><code>      First.join(:second, id: :second_id, deactivated: false)\n        .qualify\n        .stream.each do |first|\n          # magic happens here\n        end\n</code></pre>\n\n<p>The <code>qualify</code> method call resolves the ambiguity (and ensures only first table gets returned.</p>\n\n<p>I also added <code>sequel_pg</code> gem so I can use <code>stream.each</code> rather than <code>paged_each</code>. This has a better performance but also removes the need for the <code>order by id</code> that was causing me grief initially.</p>\n"}, {"tags": ["ruby", "testing", "rspec", "hook"], "answers": [{"tags": [], "owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "is_accepted": false, "score": 1, "last_activity_date": 1528161169, "creation_date": 1528161169, "answer_id": 50690732, "question_id": 50690703, "link": "https://stackoverflow.com/questions/50690703/run-after-block-after-specific-test-in-rspec/50690732#50690732", "title": "Run after block after specific test in Rspec", "body": "<p>Yes you can do that, have a look <a href=\"https://github.com/rspec/rspec-core/issues/1200\" rel=\"nofollow noreferrer\">here</a> </p>\n\n<p>You can achieve that using <code>metadata</code> in rspec</p>\n\n<pre><code>RSpec.configure do |config|\n  config.treat_symbols_as_metadata_keys_with_true_values = true\nend\n\ndescribe \"Skip hook demo\" do\n  # If prior to RSpec 2.99.0.beta1\n  after do\n    puts \"before hook\" unless example.metadata[:skip]\n  end\n\n  # If RSpec 2.99.0.beta1 or later\n  after do |example|\n    puts \"before hook\" unless example.metadata[:skip]\n  end\n\n  it \"will use before hook\" do\n  end\n\n  it \"will not use before hook\", :skip do\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "is_accepted": true, "score": 6, "last_activity_date": 1528161548, "creation_date": 1528161548, "answer_id": 50690763, "question_id": 50690703, "link": "https://stackoverflow.com/questions/50690703/run-after-block-after-specific-test-in-rspec/50690763#50690763", "title": "Run after block after specific test in Rspec", "body": "<p>You should use <code>context</code>s to do this. Something like:</p>\n\n<pre><code>describe \"describe\" do\n  context 'logged in' do\n    before(:each) do\n      # thing that happens in logged in context\n    end\n\n    after(:each) do\n      # thing that happens in logged in context\n    end\n\n    it \"test1\" do\n    end\n  end\n\n  context 'not logged in' do\n    # No before/after hooks here. Just beautiful test isolation\n\n    it \"test2\" do\n    end\n  end\nend\n</code></pre>\n\n<p>Having if/else conditions in before/after blocks is a code smell. Don't do it that way. It'll only make your tests brittle, error prone, and hard to change.</p>\n"}, {"tags": [], "owner": {"reputation": 340, "user_id": 6855759, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3UfK3V6lnPY/AAAAAAAAAAI/AAAAAAAAAlU/CG1lontACf0/photo.jpg?sz=128", "display_name": "Caleb Keene", "link": "https://stackoverflow.com/users/6855759/caleb-keene"}, "is_accepted": false, "score": 2, "last_activity_date": 1528174090, "creation_date": 1528174090, "answer_id": 50692236, "question_id": 50690703, "link": "https://stackoverflow.com/questions/50690703/run-after-block-after-specific-test-in-rspec/50692236#50692236", "title": "Run after block after specific test in Rspec", "body": "<p>The best way to do this is just use a <code>context</code>. For your example:</p>\n\n<pre><code>describe \"AutomateFr33k's fr33ky tests\" do\n\n  it \"runs test1\" do\n    expect(true).to be_true\n  end\n\n  context \"do something afterwards\" do\n    after { puts \"running something after test2!\" }\n\n    it \"runs test2\" do\n      expect(5).not_to eq(4)\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 404, "user_id": 4898339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-sGdV0oV4vfk/AAAAAAAAAAI/AAAAAAAAAbI/VR3u5V41qlU/photo.jpg?sz=128", "display_name": "AutomateFr33k", "link": "https://stackoverflow.com/users/4898339/automatefr33k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 0, "accepted_answer_id": 50690763, "answer_count": 3, "score": 3, "last_activity_date": 1528194111, "creation_date": 1528160963, "last_edit_date": 1528194111, "question_id": 50690703, "link": "https://stackoverflow.com/questions/50690703/run-after-block-after-specific-test-in-rspec", "title": "Run after block after specific test in Rspec", "body": "<p>Is there a way I can run the after/before block after/before a specific test using labels?</p>\n\n<p>I have 3 <code>it</code> blocks </p>\n\n<pre><code>describe \"describe\" do\n\n  it \"test1\" do\n  end\n\n  it \"test2\" do\n  end\n\n  after(&lt;&lt;what goes here??&gt;&gt;) do\n  end\n\nend\n</code></pre>\n\n<p>How do I run the after block only after test2? Is that possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1528158690, "post_id": 50690451, "comment_id": 88390731, "body": "What code are you executing that leads to the error? Can you show a stack trace?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1528158746, "post_id": 50690451, "comment_id": 88390749, "body": "Assuming that the error occurs in your <code>index</code> action here: <code>@sub_category = @category.sub_categories.first</code>, then your error has nothing to do with your associations. Instead, apparently, <code>BlogCategory.find_by_id(params[:id])</code> has returned <code>nil</code> which, as stated in the error, does not respond to <code>sub_categories</code>."}, {"owner": {"reputation": 2133, "user_id": 3820185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XZmR.jpg?s=128&g=1", "display_name": "wiesion", "link": "https://stackoverflow.com/users/3820185/wiesion"}, "edited": false, "score": 0, "creation_date": 1528158950, "post_id": 50690451, "comment_id": 88390798, "body": "<code>@category</code> can be <code>nil</code> because of <code>find_by</code> - use <code>find</code> and in this case rails will raise a <code>404 Not found</code> automatically"}], "answers": [{"tags": [], "owner": {"reputation": 547, "user_id": 6792180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mpzfa.jpg?s=128&g=1", "display_name": "Andres23Ramirez", "link": "https://stackoverflow.com/users/6792180/andres23ramirez"}, "is_accepted": true, "score": 2, "last_activity_date": 1528158769, "creation_date": 1528158769, "answer_id": 50690481, "question_id": 50690451, "link": "https://stackoverflow.com/questions/50690451/undefined-method-sub-categories-for-nilnilclass/50690481#50690481", "title": "undefined method `sub_categories&#39; for nil:NilClass", "body": "<p>You can add a validation</p>\n\n<pre><code>def index\n  @category = BlogCategory.find_by_id(params[:id])\n  unless @category.nil?\n      @sub_category = @category.sub_categories.first\n      @posts = @subcategory.posts\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 50690481, "answer_count": 1, "score": -1, "last_activity_date": 1528158769, "creation_date": 1528158492, "question_id": 50690451, "link": "https://stackoverflow.com/questions/50690451/undefined-method-sub-categories-for-nilnilclass", "title": "undefined method `sub_categories&#39; for nil:NilClass", "body": "<p>I'm trying to make a category system for my blog but I've hit this error. Each <code>blog_category</code> can have multiple <code>sub_categories</code> by having <code>parent_id</code> pointing to the id of the main category. Some <code>sub_categories</code> and main <code>blog_categories</code> don't have anything in them. How would I prevent this <code>NoMethodError</code> from hitting?</p>\n\n<p>BlogCategoriesController:</p>\n\n<pre><code>class BlogCategoriesController &lt; ApplicationController\n\ndef index\n  @category = BlogCategory.find_by_id(params[:id])\n  @sub_category = @category.sub_categories.first\n  @posts = @subcategory.posts\nend\n\nprivate\n\n  def cat_params\n    params.require(:blog_category).permit(:name, :parent_id, :sub_category)\n  end\n\nend\n</code></pre>\n\n<p>BlogCategory Model:</p>\n\n<pre><code>class BlogCategory &lt; ApplicationRecord\n  has_many :posts\n\n  # This is called a self referential relation. This is where records in a table may point to other records in the same table.\n  has_many :sub_categories, class_name: \"BlogCategory\", foreign_key: :parent_id\n\n  # This is a scope to load the top level categories and eager-load their posts, subcategories, and the subcategories' posts too.\n  scope :top_level, -&gt; { where(parent_id: nil).includes :posts, sub_categories: :posts }\nend\n</code></pre>\n\n<p>The Posts point to the blog category via <code>t.integer \"blog_category_id\"</code> in the post table and has a <code>belongs_to :blog_category</code> in the Post model.</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "activerecord", "asset-pipeline"], "answers": [{"tags": [], "owner": {"reputation": 605, "user_id": 3270926, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/FHlQp.jpg?s=128&g=1", "display_name": "youssef", "link": "https://stackoverflow.com/users/3270926/youssef"}, "is_accepted": false, "score": 0, "last_activity_date": 1528159426, "creation_date": 1528159426, "answer_id": 50690554, "question_id": 50689835, "link": "https://stackoverflow.com/questions/50689835/rails-variables-inside-the-css-file/50690554#50690554", "title": "Rails Variables inside the CSS file", "body": "<p>I think the best way is to keep your script file at the server side, So you can easily modify your script depending on user database options</p>\n\n<p>for example: </p>\n\n<p>place a new route in routs.rb </p>\n\n<pre><code>post '/users/modify_style', :to =&gt; 'users#modify_style', :as =&gt; modify_style\n</code></pre>\n\n<p>then allow the route to respond to user by JavaScript file, for example if the user needs to change the main color of HTML template using a button or a link; so the form button in template may look like: </p>\n\n<pre><code>&lt;%= button_to 'apply style', modify_style_path, :data =&gt; {:user_id =&gt; current_user.id}, :remote =&gt; true %&gt; \n</code></pre>\n\n<p>or </p>\n\n<pre><code>&lt;%= link_to 'apply style', modify_style_path(:user_id =&gt; current_user.id), :method =&gt; :post, :remote =&gt; true %&gt;\n</code></pre>\n\n<p>so <code>remote: true</code> option will allow sending data to server through AJAX without refreshing the page. </p>\n\n<p>at users_controller.rb </p>\n\n<pre><code>def modify_style \n    user = User.find(params[:user_id])\n    @main_color = user.main_color\n    respond_to do |format|\n       format.js { render  'some_file.js.erb' }\n    end\n\nend \n</code></pre>\n\n<p>and in your js file: </p>\n\n<pre><code>$('#some_element_id_to_change_color_for').css('color', '&lt;%= @main_color %&gt;')\n</code></pre>\n\n<p>or you can add <code>modify_style</code> action code directly to the original action which load your page to appy user style once the page is loaded.</p>\n"}, {"tags": [], "owner": {"reputation": 962, "user_id": 6895607, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BMhRG.jpg?s=128&g=1", "display_name": "Gaudam Thiyagarajan", "link": "https://stackoverflow.com/users/6895607/gaudam-thiyagarajan"}, "is_accepted": false, "score": 0, "last_activity_date": 1528174076, "creation_date": 1528174076, "answer_id": 50692235, "question_id": 50689835, "link": "https://stackoverflow.com/questions/50689835/rails-variables-inside-the-css-file/50692235#50692235", "title": "Rails Variables inside the CSS file", "body": "<p>I would suggest you to directly use it in the erb file something like </p>\n\n<p>my.html.erb</p>\n\n<pre><code>&lt;html&gt;\n&lt;!-- my html -- &gt;\n&lt;/html&gt;\n\n&lt;style&gt;\n &lt;%= my_css.html_safe %&gt;\n&lt;/style&gt;\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 1420014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QH0Cj.jpg?s=128&g=1", "display_name": "Vaibhav Maheshwari", "link": "https://stackoverflow.com/users/1420014/vaibhav-maheshwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528174076, "creation_date": 1528152817, "last_edit_date": 1528153308, "question_id": 50689835, "link": "https://stackoverflow.com/questions/50689835/rails-variables-inside-the-css-file", "title": "Rails Variables inside the CSS file", "body": "<p>I have CSS file that needs to be embedded by the user. Now for the user to customize the CSS file as he/she wishes (change the colors and font-size mainly) I have to store that information in database file, append that information to specfic CSS file and then enable that user to embed it. </p>\n\n<p>I would get the id of the User that I wish to change. So color codes stored are basically extracted from, </p>\n\n<pre><code>User.find(params[:id]).main_color \n# This would return =&gt; #fffff \n</code></pre>\n\n<p>This what my embed code looks like right now, </p>\n\n<pre><code>&lt;link href=\"link.com/initial.css\" type=\"text/css\" rel=\"stylesheet\" /&gt; \n&lt;script type=\"text/javascript\" data-user=\"18\" src=\"link.com/some_file.js\" /&gt;\n</code></pre>\n\n<p>Here data-user is the id of the user who is modifying the CSS file. (The IFrame is being embedded using the javascript file)</p>\n\n<p>How should I modify my embed code and fetch the custom variables from my database in order to make the CSS cstomizable as the user wants? </p>\n\n<p>Thanks in advance. </p>\n\n<p>P.S I have thought of rewriting the CSS in the view(.html.erb file) and using !important there along with proper color codes selected by the user but that approach is not exactly very efficient.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "asset-pipeline", "vendor"], "comments": [{"owner": {"reputation": 1185, "user_id": 1162817, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/90eUU.png?s=128&g=1", "display_name": "Artur Haddad", "link": "https://stackoverflow.com/users/1162817/artur-haddad"}, "edited": false, "score": 0, "creation_date": 1528151843, "post_id": 50689690, "comment_id": 88389091, "body": "I added this to my initializers/assets.rb without success: Rails.application.config.assets.paths += Dir[&quot;#{Rails.root}/vendor/plugins/*&quot;].sort_by { |dir| -dir.size }"}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1528193007, "post_id": 50697376, "comment_id": 88403784, "body": "IMHO I would get rid of the <code>plugins</code> directory. Less configuration is usually a good thing."}, {"owner": {"reputation": 1185, "user_id": 1162817, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/90eUU.png?s=128&g=1", "display_name": "Artur Haddad", "link": "https://stackoverflow.com/users/1162817/artur-haddad"}, "edited": false, "score": 0, "creation_date": 1528425296, "post_id": 50697376, "comment_id": 88513101, "body": "I placed plugins folder inside vendor/assets/ and then i could skip the &quot;config.assets.paths&quot; code. I was struggling with the files path, which you nailed with the requires. Thanks!"}, {"owner": {"reputation": 1185, "user_id": 1162817, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/90eUU.png?s=128&g=1", "display_name": "Artur Haddad", "link": "https://stackoverflow.com/users/1162817/artur-haddad"}, "edited": false, "score": 0, "creation_date": 1528425387, "post_id": 50697376, "comment_id": 88513125, "body": "Using gem for ckeditor would be easier, the problem is that i need to install 15 libs of specific versions to integrate a html admin dashboard, so it will be easier if i use the files that comes with the package. That&#39;s why i need the plugin&#39;s folder."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 5, "last_activity_date": 1528192944, "creation_date": 1528192944, "answer_id": 50697376, "question_id": 50689690, "link": "https://stackoverflow.com/questions/50689690/how-to-fetch-assets-inside-vendor-subfolders-in-rails/50697376#50697376", "title": "How to fetch assets inside vendor subfolders in Rails?", "body": "<p>First add the <code>/vendor/plugins</code> directory to the assets load path:</p>\n\n<pre><code>module MyApp\n  class Application &lt; Rails::Application\n    config.assets.paths &lt;&lt; Rails.root.join(\"vendor\", \"plugins\")\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration should go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded.\n  end\nend\n</code></pre>\n\n<p>However adding a directory to the assets load path does not mean that Sprockets will search all the subdirectories recursively. Nor is it a very good idea to configure it to do so.</p>\n\n<p>You still need to provide a complete path from <code>/vendor/plugins</code>.</p>\n\n<p>app/assets/javascripts/application.js:</p>\n\n<pre><code>//= require ckeditor/js/Chart\n</code></pre>\n\n<p>app/assets/stylesheets/application.css:</p>\n\n<pre><code>*= require ckeditor/css/chart.min\n</code></pre>\n\n<p>Or you can just use the <a href=\"https://github.com/galetahub/ckeditor\" rel=\"noreferrer\">Rails integration gem</a> and skip all the hassle.</p>\n"}], "owner": {"reputation": 1185, "user_id": 1162817, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/90eUU.png?s=128&g=1", "display_name": "Artur Haddad", "link": "https://stackoverflow.com/users/1162817/artur-haddad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1729, "favorite_count": 0, "accepted_answer_id": 50697376, "answer_count": 1, "score": 3, "last_activity_date": 1528192944, "creation_date": 1528151792, "question_id": 50689690, "link": "https://stackoverflow.com/questions/50689690/how-to-fetch-assets-inside-vendor-subfolders-in-rails", "title": "How to fetch assets inside vendor subfolders in Rails?", "body": "<p>I need to install a series of libs in my application, keeping them in their respective folders inside <code>/vendor/plugins/</code></p>\n\n<p>Example, the ckeditor library:</p>\n\n<ul>\n<li>Main folder in <code>/vendor/plugins/ckeditor/</code></li>\n<li>js file in <code>/vendor/plugins/ckeditor/js/Chart.js</code></li>\n<li>css file in <code>/vendor/plugins/ckeditor/css/chart.min.css</code></li>\n</ul>\n\n<p>So that I can import into my application.scss like this:</p>\n\n<pre><code>*= require chart.min\n</code></pre>\n\n<p>And in my application.js like this:</p>\n\n<pre><code>//= require Chart.js\n</code></pre>\n\n<p>When I try to do this rails only accesses the folder <code>/vendor/assets/plugins/</code> plugins, generating the error:</p>\n\n<pre><code>could not find file 'chart.min' with type 'text/css'\n</code></pre>\n\n<p>How do I get the project to scan all of the vendor's subfolders until find the file I'm importing?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528150535, "post_id": 50689507, "comment_id": 88388755, "body": "Hint: You can call <code>parse</code> on anything you want."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528155209, "post_id": 50689507, "comment_id": 88389968, "body": "@tadman Yes, but I would still need to parse the string into args, right? The docs say &quot;parse(*argv, into: nil) Parses command line arguments argv in order when environment variable POSIXLY_CORRECT is set, and in permutation mode otherwise.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": true, "score": 3, "last_activity_date": 1528154870, "last_edit_date": 1528154870, "creation_date": 1528154563, "answer_id": 50690033, "question_id": 50689507, "link": "https://stackoverflow.com/questions/50689507/how-to-parse-a-string-to-make-objects-suitable-for-inserting-into-argv/50690033#50690033", "title": "How to parse a string to make objects suitable for inserting into ARGV?", "body": "<p>Shellwords is the Ruby library that handles this kind of thing, and it can be accomplished by something like this:</p>\n\n<pre><code>[6] pry(main)&gt; require 'shellwords'\nfalse\n[7] pry(main)&gt; Shellwords.shellsplit %Q{ arg1 \"arg2a arg2b\"}\n[\n    [0] \"arg1\",\n    [1] \"arg2a arg2b\"\n]\n</code></pre>\n\n<p>Prepending these to an array can be done like this:</p>\n\n<pre><code>[13] pry(main)&gt; my_argv = %w(foo bar) # create a sample array to illustrate\n[\n    [0] \"foo\",\n    [1] \"bar\"\n]\n\n[18] pry(main)&gt; my_argv.unshift(Shellwords.shellsplit %Q{ arg1 \"arg2a arg2b\"}).flatten!\n[\n    [0] \"arg1\",\n    [1] \"arg2a arg2b\",\n    [2] \"foo\",\n    [3] \"bar\"\n]\n</code></pre>\n"}], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 50690033, "answer_count": 1, "score": 0, "last_activity_date": 1528154870, "creation_date": 1528150485, "question_id": 50689507, "link": "https://stackoverflow.com/questions/50689507/how-to-parse-a-string-to-make-objects-suitable-for-inserting-into-argv", "title": "How to parse a string to make objects suitable for inserting into ARGV?", "body": "<p>I'm using <code>optparse</code> to parse the command line in a Ruby program.</p>\n\n<p>I'd like to add the ability for the user to have an environment variable <code>MYAPP_OPTIONS</code> with a string containing options that would normally be specified on the command line, e.g. <code>--verbose</code>. I'd like to prepend <code>ARGV</code> with these options.</p>\n\n<p>Is there already some kind of built in way to do this? I know how I could manipulate the <code>ARGV</code> array directly, but how would I parse the string into the list of ARG's? It's not as simple as splitting on spaces because the space might be quoted and part of an argument.</p>\n"}, {"tags": ["ruby", "streaming", "metasploit"], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1528242058, "question_id": 447871}, "owner": {"reputation": 153, "user_id": 9902414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5658ab1f7f51c540a3899a7866c20c17?s=128&d=identicon&r=PG&f=1", "display_name": "mohamed", "link": "https://stackoverflow.com/users/9902414/mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1628, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1552242477, "creation_date": 1528149954, "last_edit_date": 1536534602, "question_id": 50710374, "link": "https://stackoverflow.com/questions/50710374/audio-streaming-using-metasploit", "title": "Audio streaming using metasploit", "body": "<p>I want to make a microphone audio stream in metasploit like webcam_stream,so I added some codes to the ruby script at : <strong><em>(/usr/share/metasploit-framework/lib/rex/post/meterpreter/ui/console/command_dispatcher/stdapi/webcam.rb</em></strong>), the added piece of code is:</p>\n\n<pre><code>def cmd_mic_stream(*args)\n\nprint_status(\"Starting...\")\nstream_path = Rex::Text.rand_text_alpha(8) + \".wav\"\nplayer_path = Rex::Text.rand_text_alpha(8) + \".html\"\nduration = 2\nview     = true\ntimeout  = 1800\n\nrecord_mic_opts = Rex::Parser::Arguments.new(\n  \"-h\" =&gt; [ false, \"Help Banner\" ],\n  \"-d\" =&gt; [ true, \"The stream duration in seconds (Default:2)\" ], # 1/30 min\n  \"-s\" =&gt; [ true, \"The stream file path (Default: '#{stream_path}')\" ],\n  \"-t\" =&gt; [ true, \"The stream player path (Default: #{player_path})\"],\n  \"-v\" =&gt; [ true, \"Automatically view the stream (Default: '#{view}')\" ]\n)\n\n record_mic_opts.parse(args) do |opt, _idx, val|\n  case opt\n  when \"-h\"\n    print_line(\"Usage: record_mic [options]\\n\")\n    print_line(\"Records audio from the default microphone.\")\n    print_line(record_mic_opts.usage)\n    return\n  when \"-d\" \n    duration = val.to_i\n  when \"-s\"\n    stream_path = val\n  when \"-t\"\n    player_path = val\n  when \"-v\"\n    view = true if val =~ /^(f|n|0)/i\n  end\nend\n\nprint_status(\"Preparing player...\")\n&lt;!--\n    html = %|&lt;html&gt;\n&lt;head&gt;\n&lt;META HTTP-EQUIV=\"PRAGMA\" CONTENT=\"NO-CACHE\"&gt;\n&lt;META HTTP-EQUIV=\"CACHE-CONTROL\" CONTENT=\"NO-CACHE\"&gt;\n&lt;title&gt;Metasploit webcam_stream - #{client.sock.peerhost}&lt;/title&gt;\n&lt;script language=\"javascript\"&gt;\nfunction updateStatus(msg) {\n  var status = document.getElementById(\"status\");\n  status.innerText = msg;\n}\n\nfunction noAudio() {\n  document.getElementById(\"streamer\").style = \"display:none\";\n  updateStatus(\"Waiting\");\n}\n\nvar i = 0;\nfunction updateAudio() {\n  var audio = document.getElementById(\"streamer\");\n  audio.src = \"#{stream_path}#\" + i;\n  audio.style = \"display:\";\n  updateStatus(\"Playing\");\n  i++;\n  audio.load();\n  audio.play();\n}\n\nsetInterval(function() {\n  updateAudio();\n},25);\n\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;noscript&gt;\n  &lt;h2&gt;&lt;font color=\"red\"&gt;Error: You need Javascript enabled to watch the stream.&lt;/font&gt;&lt;/h2&gt;\n&lt;/noscript&gt;\n&lt;pre&gt;\nTarget IP  : #{client.sock.peerhost}\nStart time : #{Time.now}\nStatus     : &lt;span id=\"status\"&gt;&lt;/span&gt;\n&lt;/pre&gt;\n&lt;br&gt;\n&lt;audio controls autoplay&gt;\n  &lt;source onerror=\"noAudio()\" id=\"streamer\" type=\"audio/wav\"&gt;\nYour browser does not support the audio element.\n&lt;/audio&gt; \n&lt;br&gt;&lt;br&gt;\n&lt;a href=\"http://www.metasploit.com\" target=\"_blank\"&gt;www.metasploit.com&lt;/a&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n    |\n--&gt;\n\n::File.open(player_path, 'wb') do |f|\n  f.write(html)\nend\nif view\n  print_status(\"Opening player at: #{player_path}\")\n  Rex::Compat.open_file(player_path)\nelse\n  print_status(\"Please open the player manually with a browser: #{player_path}\")\nend\n\nprint_status(\"Streaming...\")\nbegin\n  ::Timeout.timeout(timeout) do\n    while client do\n      data = client.webcam.record_mic(duration)\n      if data\n         ::File.open(stream_path, 'wb') do |d|\n         d.write(data)\n        end\n        data = nil\n        sleep(5)\n      end\n    end\n  end\nrescue ::Timeout::Error\nend\n\nprint_status(\"Stopped\")\nend\n</code></pre>\n\n<p>you may notice that it is similar to webcam_stream command,the problem here is that the browser opens , status outputs \"playing\" , but the audio doesn't play anything , it's just empty what may have caused that ?</p>\n"}, {"tags": ["ruby", "mri"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9726814"}, "edited": false, "score": 1, "creation_date": 1528147604, "post_id": 50688926, "comment_id": 88387692, "body": "You could check <code>parse.y</code> in the repo. Read <a href=\"https://stackoverflow.com/questions/663027/ruby-grammar#16629318\">this</a>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1528175322, "post_id": 50688926, "comment_id": 88394280, "body": "It is correct that there is no mention of <code>&amp;:</code>. There is no such thing."}, {"owner": {"reputation": 778, "user_id": 6499999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48bb54922bb8f6ad1b5ba41fd3e9bf1b?s=128&d=identicon&r=PG", "display_name": "JoL", "link": "https://stackoverflow.com/users/6499999/jol"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1528221256, "post_id": 50688926, "comment_id": 88421489, "body": "@sawa I know, but if it did mention the acceptance of objects as blocks by converting them via <code>#to_proc</code> with that syntax (<code>&amp;</code> argument prefix), I&#39;d still expect an example in the document to contain the substring <code>&amp;:</code>, since the most common use case is with symbol literals."}, {"owner": {"reputation": 778, "user_id": 6499999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48bb54922bb8f6ad1b5ba41fd3e9bf1b?s=128&d=identicon&r=PG", "display_name": "JoL", "link": "https://stackoverflow.com/users/6499999/jol"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1528222062, "post_id": 50688926, "comment_id": 88421914, "body": "@sawa In other words, the goal was to quickly find if the document mentioned that feature, so the best bet was to quickly search for <code>&amp;:</code> with Ctrl-F, not because the <code>&amp;</code> argument prefix could only be used with symbols, but because it was the most likely substring I could guess to be present in the part I was looking for (probably in an example of usage) to take me directly to it."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1528183171, "post_id": 50689302, "comment_id": 88397905, "body": "Unfortunately, the docs only show the explicit proc-to-block conversion and don&#39;t even mention the (much more common) implicit conversion via <code>to_proc</code>."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 4, "last_activity_date": 1528150159, "last_edit_date": 1528150159, "creation_date": 1528149300, "answer_id": 50689302, "question_id": 50688926, "link": "https://stackoverflow.com/questions/50688926/whats-the-most-official-documentation-of-or-way-to-learn-rubys-syntax/50689302#50689302", "title": "What&#39;s the most official documentation of or way to learn Ruby&#39;s syntax?", "body": "<p>The canonical documentation of Ruby's syntax is maintained along with with language's source code in the <code>doc/syntax</code> directory. You can read it on <a href=\"https://github.com/ruby/ruby/tree/v2_5_1/doc/syntax\" rel=\"nofollow noreferrer\">GitHub</a> or e.g. on <a href=\"https://ruby-doc.org/core-2.5.1/doc/syntax/assignment_rdoc.html\" rel=\"nofollow noreferrer\">ruby-doc.org</a>.</p>\n\n<p>There, you will find <a href=\"https://ruby-doc.org/core/doc/syntax/calling_methods_rdoc.html#label-Receiver\" rel=\"nofollow noreferrer\">the description</a> of the <code>&amp;.</code> operator:</p>\n\n<blockquote>\n  <p>You may use <code>&amp;.</code> to designate a receiver, then <code>my_method</code> is not invoked and the result is <code>nil</code> when the receiver is <code>nil</code>. In that case, the arguments of <code>my_method</code> are not evaluated.</p>\n</blockquote>\n\n<p>as well as <a href=\"https://ruby-doc.org/core/doc/syntax/calling_methods_rdoc.html#label-Proc+to+Block+Conversion\" rel=\"nofollow noreferrer\">the logic</a> to convert a Proc object (or more correctly: an object which can be converted to a Proc) to a block:</p>\n\n<blockquote>\n  <p>You can convert a proc or lambda to a block argument with the <code>&amp;</code> operator:</p>\n\n<pre><code>argument = proc { |a| puts \"#{a.inspect} was yielded\" }\n\nmy_method(&amp;argument)\n</code></pre>\n</blockquote>\n\n<p>Here, the interesting thing to note is that Symbols respond to <a href=\"https://ruby-doc.org/core/Symbol.html#method-i-to_proc\" rel=\"nofollow noreferrer\"><code>to_proc</code></a> which allows Symbols to act like procs (and thus can be converted to a proc and subsequently to a block when used to call a method with e.g. <code>my_method(&amp;:foo)</code>.</p>\n\n<p>In general, to learn about Ruby's syntax and approach to programming, you could start with one of several books, e.g. <a href=\"https://pragprog.com/book/ruby4/programming-ruby-1-9-2-0\" rel=\"nofollow noreferrer\">Programming Ruby 1.9 and 2.0</a>. In general, books tend to take some time (usually a few years) from start to publishing and thus tend to not cover the very latest language additions. However, they can give you a good overview about the language and its core concepts.</p>\n\n<p>There are some additions in newer versions of Ruby which make some things easier, like the <code>&amp;.</code> operator added in Ruby 2.3 or things like default frozen strings. While these additions are useful, you will usually stumble upon them when you start to actually programming in Ruby. Here, it might then be useful to follow the <a href=\"https://www.ruby-lang.org/en/news/\" rel=\"nofollow noreferrer\">release news</a> where new features and notable changes are briefly described.</p>\n"}], "owner": {"reputation": 778, "user_id": 6499999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48bb54922bb8f6ad1b5ba41fd3e9bf1b?s=128&d=identicon&r=PG", "display_name": "JoL", "link": "https://stackoverflow.com/users/6499999/jol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 50689302, "answer_count": 1, "score": 2, "last_activity_date": 1528150159, "creation_date": 1528147179, "question_id": 50688926, "link": "https://stackoverflow.com/questions/50688926/whats-the-most-official-documentation-of-or-way-to-learn-rubys-syntax", "title": "What&#39;s the most official documentation of or way to learn Ruby&#39;s syntax?", "body": "<p>There's <a href=\"https://ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html</a>, by Yukihiro Matsumoto himself, but given that I can't find mention of <code>&amp;.</code> (e.g. <code>a&amp;.b</code>) or <code>&amp;:</code> (e.g. <code>m(&amp;:f)</code>), it doesn't seem very updated. I remember once upon a time there was one person that was trying to document it based on MRI's unit tests, but gave up and abandoned the project because of lack of collaboration from the developers.</p>\n\n<p>Right now, it seems the only way to learn is by stumbling on new syntax by accident on StackOverflow or some open source ruby project.</p>\n"}, {"tags": ["ruby", "ruby-2.3"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1528146834, "post_id": 50688818, "comment_id": 88387412, "body": "<code>please read &#47;Users&#47;someuser&#47;.rvm&#47;log&#47;1528143943_ruby-2.3.4&#47;make.log</code> Do you have Xcode Command Line Tools installed?"}, {"owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528147539, "post_id": 50688818, "comment_id": 88387663, "body": "Hey @tadman, I have pasted bottom few lines of make.log file above. Yes, I do have Xcode installed in my system. How does it help?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528148942, "post_id": 50688818, "comment_id": 88388190, "body": "Xcode and Xcode Command-Line Tools are different. What does the output of <code>clang -v</code> say? If that doesn&#39;t exist: <code>xcode-select --install</code>."}, {"owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528160257, "post_id": 50688818, "comment_id": 88391050, "body": "@tadman, Below is the output :   Apple LLVM version 8.0.0 (clang-800.0.38) Target: x86_64-apple-darwin16.7.0 Thread model: posix InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeD&zwnj;&#8203;efault.xctoolchain/u&zwnj;&#8203;sr/bin"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528161013, "post_id": 50688818, "comment_id": 88391187, "body": "Looks like that part is installed correctly, which is good, but this permission denied thing looks like a permission error when installing with <code>rvm</code> which means you may need to <code>sudo</code> it or fix your permissions."}, {"owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528164260, "post_id": 50688818, "comment_id": 88391823, "body": "@tadman, running <code>rvm</code> with <code>sudo</code> gives me following error:      <code>Checking requirements for osx_brew.   Error: Running Homebrew as root is extremely dangerous and no longer supported.   As Homebrew does not drop privileges on installation you would be giving all .  build scripts full access to your system</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528168537, "post_id": 50688818, "comment_id": 88392588, "body": "The best option is to fix the permissions on your <code>~&#47;.rvm</code> directory to ensure you can write to everything in there. I&#39;m not sure how <code>brew</code> factors in here since you&#39;re asking about RVM."}, {"owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528247062, "post_id": 50688818, "comment_id": 88430775, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/172546/discussion-between-chuchoo-and-tadman\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 9116014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBXEe.jpg?s=128&g=1", "display_name": "Raja Sharma", "link": "https://stackoverflow.com/users/9116014/raja-sharma"}, "edited": false, "score": 1, "creation_date": 1586338586, "post_id": 50710905, "comment_id": 108089525, "body": "I have the same issue but this solution did not help me."}], "tags": [], "owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "is_accepted": true, "score": 0, "last_activity_date": 1528247022, "creation_date": 1528247022, "answer_id": 50710905, "question_id": 50688818, "link": "https://stackoverflow.com/questions/50688818/not-able-to-install-ruby-2-3-4/50710905#50710905", "title": "not able to install ruby-2.3.4", "body": "<p><code>rvm reload</code> did the magic. Running <code>rvm install ruby-2.3.4</code> after running <code>rvm reload</code> worked like a charm.</p>\n"}], "owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 857, "favorite_count": 0, "accepted_answer_id": 50710905, "answer_count": 1, "score": 0, "last_activity_date": 1528247022, "creation_date": 1528146574, "last_edit_date": 1528147425, "question_id": 50688818, "link": "https://stackoverflow.com/questions/50688818/not-able-to-install-ruby-2-3-4", "title": "not able to install ruby-2.3.4", "body": "<p>I am trying to install ruby-2.3.4 in my mac but without luck. Below is system's spec:</p>\n\n<p>macOS Sierra\nVersion 10.12.6</p>\n\n<p>I have ruby 2.0 by default and I managed to install ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin16]</p>\n\n<p>Below is the error thrown when I do <code>rvm install ruby-2.3.4</code></p>\n\n<pre><code>ruby-2.3.4 - #removing src/ruby-2.3.4..\nSearching for binary rubies, this might take some time.\nNo binary rubies available for: osx/10.12/x86_64/ruby-2.3.4.\nContinuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.\nChecking requirements for osx.\nCertificates bundle '/usr/local/etc/openssl/cert.pem' is already up to date.\nRequirements installation successful.\nInstalling Ruby from source to: /Users/someuser/.rvm/rubies/ruby-2.3.4, this may take a while depending on your cpu(s)...\nruby-2.3.4 - #downloading ruby-2.3.4, this may take a while depending on your connection...\nruby-2.3.4 - #extracting ruby-2.3.4 to /Users/someuser/.rvm/src/ruby-2.3.4.....\nruby-2.3.4 - #applying patch /Users/someuser/.rvm/patches/ruby/ruby_2_3_gcc7.patch.\nruby-2.3.4 - #applying patch /Users/someuser/.rvm/patches/ruby/2.3.4/fix_rb_thread_fd_close.patch.\nruby-2.3.4 - #applying patch /Users/someuser/.rvm/patches/ruby/2.3.4/random_c_using_NR_prefix.patch.\nruby-2.3.4 - #configuring...........................................................\nruby-2.3.4 - #post-configuration.\nruby-2.3.4 - #compiling...........\nError running '__rvm_make -j8',\nplease read /Users/someuser/.rvm/log/1528143943_ruby-2.3.4/make.log\nThere has been an error while running make. Halting the installation.\n</code></pre>\n\n<p>Any insight/idea what might be going on ?</p>\n\n<p>Below are the bottom lines of the make.log file. </p>\n\n<pre><code>compiling enc/unicode.c\ncompiling enc/utf_8.c\ncompiling enc/trans/newline.c\n1 warning generated.\nlinking miniruby\ngenerating encdb.h\nmake: ./miniruby: Permission denied\nmake: ./miniruby: Permission denied\nmake: *** [.rbconfig.time] Error 1\nmake: *** Waiting for unfinished jobs....\nmake: *** [encdb.h] Error 1\n++ return 2\n</code></pre>\n\n<p>Clearly, it's saying Permission denied. But I am not sure what kind of permission is it talking about ? I am able to install <code>ruby 2.5.1p57</code> without any problem. </p>\n"}, {"tags": ["ruby", "mri"], "comments": [{"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1528146196, "post_id": 50688653, "comment_id": 88387190, "body": "I don&#39;t think that ruby has such thing but I can&#39;t be sure, ruby does have some features from common functional languages but its main paradigm is the object oriented paradigm"}], "answers": [{"tags": [], "owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "is_accepted": false, "score": 2, "last_activity_date": 1528149862, "creation_date": 1528149862, "answer_id": 50689409, "question_id": 50688653, "link": "https://stackoverflow.com/questions/50688653/is-there-valid-ruby-syntax-for-as-patterns-in-parameters-like-1-2-map-xy/50689409#50689409", "title": "Is there valid Ruby syntax for as-patterns in parameters like `[[1, 2]].map {|xy@(x, y)| [xy, x + y]}`?", "body": "<p>As far as I know, ruby does not currently (2018-06-04) have that feature.</p>\n\n<p>There isn't a formal spec of the ruby language to refer to, but there is  <a href=\"https://github.com/ruby/spec\" rel=\"nofollow noreferrer\">The Ruby Spec Suite</a>. Check out <a href=\"https://github.com/ruby/spec/blob/master/language/block_spec.rb\" rel=\"nofollow noreferrer\">language/block_spec.rb</a> for some weird and unusual examples of block params.</p>\n\n<p>Block arguments are surprisingly powerful, and support optional args, splats, post-args, destructuring, nested destructuring, keyword arguments, block-level variables. It's pretty impressive.</p>\n\n<p>If you can read C (I can't) and you really want to dig into this further, you can find the definition of block arguments in the interpreter grammar at <a href=\"https://github.com/ruby/ruby/blob/1c1ff52f43368f8a10b584d2c3ee63eaae162b8b/parse.y#L2980\" rel=\"nofollow noreferrer\">parse.y:2980</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 778, "user_id": 6499999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48bb54922bb8f6ad1b5ba41fd3e9bf1b?s=128&d=identicon&r=PG", "display_name": "JoL", "link": "https://stackoverflow.com/users/6499999/jol"}, "edited": false, "score": 0, "creation_date": 1528152314, "post_id": 50689592, "comment_id": 88389206, "body": "The code I used for the first pattern already works as-is with ruby, so a workaround is not needed. The example you gave for the second pattern simply does <code>[y, z]</code>, so I guess the answer is no."}], "tags": [], "owner": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "is_accepted": false, "score": 0, "last_activity_date": 1528151157, "creation_date": 1528151157, "answer_id": 50689592, "question_id": 50688653, "link": "https://stackoverflow.com/questions/50688653/is-there-valid-ruby-syntax-for-as-patterns-in-parameters-like-1-2-map-xy/50689592#50689592", "title": "Is there valid Ruby syntax for as-patterns in parameters like `[[1, 2]].map {|xy@(x, y)| [xy, x + y]}`?", "body": "<p>Not sure about the <code>as-patterns</code> but in ruby you can implement similar thing using <code>lambda</code> &amp; <code>proc</code> </p>\n\n<p>For 1st Pattern</p>\n\n<pre><code>2.3.1 :030 &gt; pattern = Proc.new {|x, y, z| x + (y * z) }\n =&gt; #&lt;Proc:0x007fa6fd5a2188@(irb):30&gt; \n2.3.1 :031 &gt; func = lambda { |arr| arr.map {|ar| pattern.call(*ar)} }\n =&gt; #&lt;Proc:0x007fa6fddc1328@(irb):31 (lambda)&gt; \n2.3.1 :032 &gt; func.call([[1,2,3], [4,5,6]])\n =&gt; [7, 34] \n</code></pre>\n\n<p>For 2nd Pattern</p>\n\n<pre><code>2.3.1 :033 &gt; pattern = Proc.new {|x, y, z| [x + (y * z), [y, z]] }\n =&gt; #&lt;Proc:0x007fa6ffba5150@(irb):33&gt; \n2.3.1 :034 &gt; func = lambda { |arr| arr.map {|ar| pattern.call(*ar)} }\n =&gt; #&lt;Proc:0x007fa6fdd60aa0@(irb):34 (lambda)&gt; \n2.3.1 :035 &gt; func.call([[1,2,3], [4,5,6]])\n =&gt; [[7, [2, 3]], [34, [5, 6]]] \n</code></pre>\n"}], "owner": {"reputation": 778, "user_id": 6499999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48bb54922bb8f6ad1b5ba41fd3e9bf1b?s=128&d=identicon&r=PG", "display_name": "JoL", "link": "https://stackoverflow.com/users/6499999/jol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1528168492, "answer_count": 2, "score": 3, "last_activity_date": 1528151157, "creation_date": 1528145769, "question_id": 50688653, "link": "https://stackoverflow.com/questions/50688653/is-there-valid-ruby-syntax-for-as-patterns-in-parameters-like-1-2-map-xy", "closed_reason": "Duplicate", "title": "Is there valid Ruby syntax for as-patterns in parameters like `[[1, 2]].map {|xy@(x, y)| [xy, x + y]}`?", "body": "<p>Given that the following currently works in Ruby like a very limited version of Haskell's constructor pattern matching:</p>\n\n<pre><code>[[1,[2,3]]].map {|(x, (y, z))| x + y * z} #=&gt; [7]\n</code></pre>\n\n<p>I wonder if it also supports a syntax for \"as-patterns\" (what Haskell calls them), which is basically putting multiple bindings on the same arguments, like so:</p>\n\n<pre><code>[[1,[2,3]]].map {|(x, yz@(y, z))| [x + y * z, yz]} #=&gt; [7, [2,3]]\n</code></pre>\n\n<p>I tried <code>@</code> and other symbols, but they all resulted in syntax errors.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "schema"], "comments": [{"owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "edited": false, "score": 0, "creation_date": 1528136338, "post_id": 50686252, "comment_id": 88382832, "body": "Given the requirements you\u2019ve identified the first step would likely be to have Rules use a polymorphic relationship to \u201csubject\u201d which could be either Group or User."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1528193742, "post_id": 50686252, "comment_id": 88404223, "body": "Reducing the amount of tables / objects is not always a good idea. Its better to have the right parts that do a single job well then cramming everything into a small set of god-objects. If you&#39;re designing your application from a &quot;having too many classes is hard - waah&quot; mindset instead of actually looking at the requirements and the SRP and how to make it extendable you&#39;re doing it wrong."}], "answers": [{"comments": [{"owner": {"reputation": 880, "user_id": 3334690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1a9715a46ee28e3151148688c0149f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3334690", "link": "https://stackoverflow.com/users/3334690/user3334690"}, "edited": false, "score": 0, "creation_date": 1528136693, "post_id": 50686593, "comment_id": 88382988, "body": "Out of curiosity what does your index/es on the has_a table look like?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 880, "user_id": 3334690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1a9715a46ee28e3151148688c0149f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3334690", "link": "https://stackoverflow.com/users/3334690/user3334690"}, "edited": false, "score": 0, "creation_date": 1528137967, "post_id": 50686593, "comment_id": 88383573, "body": "In the migration, I do something like: <code>add_index :haseds, [:hased_type, :hased_id]</code> and similar for <code>hasers</code>."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1528138089, "last_edit_date": 1528138089, "creation_date": 1528136495, "answer_id": 50686593, "question_id": 50686252, "link": "https://stackoverflow.com/questions/50686252/how-do-i-to-properly-relate-objects-in-rails-with-out-making-separate-tables-for/50686593#50686593", "title": "How do I to properly relate objects in rails with out making separate tables for correlations", "body": "<p>Yeah, I didn't want to create a whole bunch of many-to-many tables either. So, here's how I do it (roughly).</p>\n\n<p>I created a class called 'HasA' that looks something like: </p>\n\n<pre><code># == Schema Information\n#\n# Table name: has_as\n#\n#  id              :integer          not null, primary key\n#  haser_type      :string           not null\n#  haser_id        :integer          not null\n#  hased_type:     :string           not null\n#  hased_id:       :integer          not null\n#  created_at      :datetime         not null\n#  updated_at      :datetime         not null\n#\nclass HasA &lt; ActiveRecord::Base\n  validates :haser_type, :haser_id, :hased_type, :hased_id, presence: true\n  belongs_to :hased, polymorphic: true\n  belongs_to :haser, polymorphic: true\nend\n</code></pre>\n\n<p>Then I created a module (actually, a collection of modules) that let me do something like: </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  acts_as_having :groups, :rules\nend\n</code></pre>\n\n<p>And </p>\n\n<pre><code>class Rule &lt; ActiveRecord::Base\n  acts_as_had_by :groups, :users\nend\n</code></pre>\n\n<p>So that I can do things like: </p>\n\n<pre><code>@user.groups            \n@user.groups &lt;&lt; @group  \n@user.groups.destroy(@group)\n@user.group_ids\n@user.groups.where(id: 4)\n@user.groups.new(id: 5, name: 'foo')\n</code></pre>\n\n<p>And so on (essentially replicating many of the standard methods provided by <code>has_many</code>).</p>\n\n<p>I can also do:</p>\n\n<pre><code>@rule.groups\n@rule.users\n</code></pre>\n\n<p>Now, I can associate any models I want without having to have unique associations tables. There's just one <code>HasA</code> table that associates everything. And I can do all sorts of operations on the associated records without having to write any additional code. Which, I think, is what you're looking for.</p>\n\n<p>Naturally, I bundled it all up as a gem so that I can include it in all my projects. 'Cause who wants to code something more than once?</p>\n"}], "owner": {"reputation": 17, "user_id": 4191906, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-X9u7H0ZmqTI/AAAAAAAAAAI/AAAAAAAAAAA/1ijppa07y3I/photo.jpg?sz=128", "display_name": "Brian", "link": "https://stackoverflow.com/users/4191906/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528138089, "creation_date": 1528134953, "question_id": 50686252, "link": "https://stackoverflow.com/questions/50686252/how-do-i-to-properly-relate-objects-in-rails-with-out-making-separate-tables-for", "title": "How do I to properly relate objects in rails with out making separate tables for correlations", "body": "<p>I am trying to figure out how to reduce the amount of tables / objects in my rails application. Here is an example of several objects and their relations. As of now there is no data, so I can edit these relations as needed. For this example there are 3 objects, Users, groups, and Rules<br><br></p>\n\n<blockquote>\n  <p>Users<br>     Relations<br>       belongs_to_and_has_many Groups<br>\n        belongs_to_and_has_many Rules<br><br></p>\n  \n  <p>Groups<br>    Relations<br>       #Used to have sub_groups<br>\n        belongs_to_and_has_many Groups<br>      belongs_to_and_has_many\n  Users<br>         belongs_to_and_has_many Rules<br><br></p>\n  \n  <p>Rules<br>     Relations<br>       #Used to have sub_rules<br>\n        belongs_to_and_has_many Rules  <br>         belongs_to_and_has_many\n  Groups<br>        belongs_to_and_has_many Users<br></p>\n</blockquote>\n\n<p><br>\nRequirements: <br><br>\nI don\u2019t want to have tables for each of the relations.<br><br>\nA user may not have any groups or rules, or may have different rules depending on the group.<br><br>\nA group may not have any rules or may have several rules.<br><br>\nA rule may be part of only a group, user, or both.<br><br><br>\nQuestions:<br><br>\n<p>How do I store several groups in a rule object, in the groups field? <br><br>\n    I don\u2019t want to have a separate relational table for each relation because our system has 30 tables with a lot of these different scenarios of relations. There should be a way to store the relation in a array I just never have don\u2019t that before and historically always created separate tables / objects for those kinds of relations.<br><br>\nDo I create and store the relations as an array? <br><br>\nWould Rails know how to add / remove from there or would that be more on the GUI to remove / edit and just save the new array of objects on save?</p>\n"}]