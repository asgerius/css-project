[{"tags": ["ruby-on-rails", "ruby", "carrierwave"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443657977, "post_id": 32877388, "comment_id": 53586087, "body": "Your code sample is not syntactically correct. You&#39;re missing an <code>end</code>. When submitting code it&#39;s essential it is acceptable to Ruby."}, {"owner": {"reputation": 319, "user_id": 4114099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9276d01d9e11a5166d5c0dde6c00617?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Slaton", "link": "https://stackoverflow.com/users/4114099/matthew-slaton"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443663840, "post_id": 32877388, "comment_id": 53587354, "body": "Thank you, fixed the end part, but still not working."}], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 4114099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9276d01d9e11a5166d5c0dde6c00617?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Slaton", "link": "https://stackoverflow.com/users/4114099/matthew-slaton"}, "edited": false, "score": 0, "creation_date": 1443725001, "post_id": 32893144, "comment_id": 53618587, "body": "Okay, I had to install avconv on the server. Also, i changed  <code>temp_path = Tempfile.new([File.basename(current_path), &#39;.mp3&#39;]).path</code> to <code>temp_path = &quot;#{current_path}#{Time.now.strftime(&#39;%Y-%m-%d_%H-%M-%S&#39;)}&quot;</code> because avconv was asking if I wanted to overwrite the original file. I am having one issue now. File.unlink is removing the tmp/ file but carrierwave still stores the original uploaded file in its directory along with the newly created mp3 file."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 319, "user_id": 4114099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9276d01d9e11a5166d5c0dde6c00617?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Slaton", "link": "https://stackoverflow.com/users/4114099/matthew-slaton"}, "edited": false, "score": 0, "creation_date": 1443730626, "post_id": 32893144, "comment_id": 53621564, "body": "That would be a separate question."}, {"owner": {"reputation": 319, "user_id": 4114099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9276d01d9e11a5166d5c0dde6c00617?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Slaton", "link": "https://stackoverflow.com/users/4114099/matthew-slaton"}, "edited": false, "score": 0, "creation_date": 1443731160, "post_id": 32893144, "comment_id": 53621805, "body": "Thanks, I made a separate question."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 3, "last_activity_date": 1443720145, "last_edit_date": 1443720145, "creation_date": 1443719488, "answer_id": 32893144, "question_id": 32877388, "link": "https://stackoverflow.com/questions/32877388/convert-wav-into-mp3-using-ffmpg-with-the-carrier-wave-gem/32893144#32893144", "title": "Convert WAV into MP3 using FFMPG with the carrier_wave gem", "body": "<p>One thing I see is:</p>\n\n<pre><code>`ffmpeg -t 15 -i #{current_path} -acodec libmp3lame -f mp3 #{temp_path}`\n</code></pre>\n\n<p>If <code>ffmpeg</code> is not in your path then the OS won't be able to find it, and will return an error, however, because you're using backticks, the OS can't return a string from STDERR, which is where the error would be displayed. Backticks only return STDOUT.</p>\n\n<p>To debug this try this from the command-line:</p>\n\n<pre><code>which ffmpeg\n</code></pre>\n\n<p>If <code>ffmpeg</code> is found, instead of:</p>\n\n<pre><code>`ffmpeg -t 15 -i #{current_path} -acodec libmp3lame -f mp3 #{temp_path}`\n</code></pre>\n\n<p>Try:</p>\n\n<pre><code>puts `which ffmpeg`\n</code></pre>\n\n<p>and see what is output.</p>\n\n<p>I suspect it's not in your path, so you'll have to locate where it is and provide the full path to where it is on disk.</p>\n\n<p>Also, it's better to move the original file, move the new file to the original file's name, then delete the original or leave it as a \".bak\" file. That way the original is kept until all the code has processed:</p>\n\n<pre><code>  FileUtils.mv(current_path, current_path + '.bak')\n  FileUtils.mv(temp_path, current_path)\n  File.unlink(current_path + '.bak') # &lt;-- optional\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 4114099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9276d01d9e11a5166d5c0dde6c00617?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Slaton", "link": "https://stackoverflow.com/users/4114099/matthew-slaton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 0, "accepted_answer_id": 32893144, "answer_count": 1, "score": 2, "last_activity_date": 1443720145, "creation_date": 1443657174, "last_edit_date": 1443663474, "question_id": 32877388, "link": "https://stackoverflow.com/questions/32877388/convert-wav-into-mp3-using-ffmpg-with-the-carrier-wave-gem", "title": "Convert WAV into MP3 using FFMPG with the carrier_wave gem", "body": "<p>Inside my \"wave_uploader.rb\" script I have the following code:</p>\n\n<pre><code>class PictureUploader &lt; CarrierWave::Uploader::Base\n  include CarrierWave::MiniMagick\n  include CarrierWave::MimeTypes\n\n  version :wav do\n    process :convert_to_mp3\n\n    def convert_to_mp3\n      temp_path = Tempfile.new([File.basename(current_path), '.mp3']).path\n\n      `ffmpeg -t 15 -i #{current_path} -acodec libmp3lame -f mp3 #{temp_path}`\n\n      File.unlink(current_path)\n      FileUtils.mv(temp_path, current_path)\n    end\n\n    def full_filename(for_file)\n      super.chomp(File.extname(super)) + '.mp3'\n    end\n  end\n</code></pre>\n\n<p>I am trying to convert the WAV file into a 20 second MP3 file and delete the WAV file once it is converted. The code above runs but I can't find the converted MP3 file so I am guessing it did not work correctly. </p>\n\n<p>At the end of wave_uploader.rb I have code that returns the unique name once it is processed but I commented out the code out thinking the code below was causing the WAV file not to be converted to an MP3.</p>\n\n<pre><code># def filename\n#   \"#{secure_token}.#{file.extension}\" if original_filename.present?\n# end\n\n# def secure_token\n#   var = :\"@#{mounted_as}_secure_token\"\n#   model.instance_variable_get(var) or model.instance_variable_set(var, SecureRandom.uuid)\nend\n</code></pre>\n\n<p>Any help would be greatly appreciated on how to get this working right.   </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 2, "creation_date": 1443657137, "post_id": 32877329, "comment_id": 53585901, "body": "<a href=\"https://stackoverflow.com/questions/18193792/where-is-rubys-string-literal-juxtaposition-feature-officially-documented\" title=\"where is rubys string literal juxtaposition feature officially documented\">stackoverflow.com/questions/18193792/&hellip;</a>"}, {"owner": {"reputation": 9727, "user_id": 688355, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6e2d06b47875015baccb84aba90d64c5?s=128&d=identicon&r=PG", "display_name": "Bob Kuhar", "link": "https://stackoverflow.com/users/688355/bob-kuhar"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1443741995, "post_id": 32877329, "comment_id": 53625572, "body": "While the answer is the same, I don&#39;t think this is a duplicate of the &quot;where is juxtaposition documented&quot; question."}], "answers": [{"comments": [{"owner": {"reputation": 9727, "user_id": 688355, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6e2d06b47875015baccb84aba90d64c5?s=128&d=identicon&r=PG", "display_name": "Bob Kuhar", "link": "https://stackoverflow.com/users/688355/bob-kuhar"}, "edited": false, "score": 0, "creation_date": 1443657898, "post_id": 32877382, "comment_id": 53586071, "body": "Oh my.  You learn something new everyday. <a href=\"https://stackoverflow.com/questions/18193792/where-is-rubys-string-literal-juxtaposition-feature-officially-documented\" title=\"where is rubys string literal juxtaposition feature officially documented\">stackoverflow.com/questions/18193792/&hellip;</a> <a href=\"http://stackoverflow.com/questions/12120944/how-does-concatenation-of-two-string-literals-work\" title=\"how does concatenation of two string literals work\">stackoverflow.com/questions/12120944/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "is_accepted": true, "score": 2, "last_activity_date": 1443657124, "creation_date": 1443657124, "answer_id": 32877382, "question_id": 32877329, "link": "https://stackoverflow.com/questions/32877329/surprising-string-concatenation/32877382#32877382", "title": "Surprising string concatenation", "body": "<p>This only works for string literals, and a part of the literal syntax. </p>\n\n<p>If you have 2 string literals with just whitespace between them, they get turned into a single string. It's a convention borrowed from later versions of C.</p>\n"}], "owner": {"reputation": 9727, "user_id": 688355, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6e2d06b47875015baccb84aba90d64c5?s=128&d=identicon&r=PG", "display_name": "Bob Kuhar", "link": "https://stackoverflow.com/users/688355/bob-kuhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "closed_date": 1443659377, "accepted_answer_id": 32877382, "answer_count": 1, "score": 5, "last_activity_date": 1443657124, "creation_date": 1443656843, "question_id": 32877329, "link": "https://stackoverflow.com/questions/32877329/surprising-string-concatenation", "closed_reason": "Duplicate", "title": "Surprising string concatenation", "body": "<p>I am surprised by some string concatenation I've stumbled upon in a codebase I support.  Why, or how really, does the following manage to concatenate two strings together?</p>\n\n<pre><code>queue_name = 'gen-request-' \"#{ENV['USERNAME'].gsub('.','')}\"\n=&gt; \"gen-request-robertkuhar\"\n</code></pre>\n\n<p>I had expected to see a '+' between the two strings, but its not there.  Is it implied or something?</p>\n\n<p>I know this just makes more sense with up-the-middle string interpolation.  Thats not what I'm asking.  I want to know what it is about the language syntax that allows this to work in the first place.</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 12011, "user_id": 641451, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/IcOuq.jpg?s=128&g=1", "display_name": "mgarciaisaia", "link": "https://stackoverflow.com/users/641451/mgarciaisaia"}, "is_accepted": false, "score": 2, "last_activity_date": 1443654077, "creation_date": 1443654077, "answer_id": 32876895, "question_id": 32876794, "link": "https://stackoverflow.com/questions/32876794/is-it-possible-to-alter-an-array-objects-length/32876895#32876895", "title": "Is it possible to alter an Array object&#39;s length?", "body": "<p>As <code>Array</code> are mutables, you can alter it's contents:</p>\n\n<pre><code>class Array\n  def change_self\n    self.clear\n    self.concat [5, 5, 5]\n  end\nend\n</code></pre>\n\n<p>You modify the array so it becomes empty, and then add all the elements from the target array. They still are two different objects (ie, <code>myAry.object_id</code> would differ from <code>[5, 5, 5].object_id</code>), but now they are equivalent arrays.</p>\n\n<p>Moreover, the array <em>still is the same</em> that before - just it's content changed:</p>\n\n<pre><code>myAry = [1, 2, 3]\notherRef = myAry\npreviousId = myAry.object_id\npreviousHash = myAry.hash\nmyAry.change_self\nputs \"myAry is now #{myAry}\"\nputs \"Hash changed from #{previousHash} to #{myAry.hash}\"\nputs \"ID #{previousId} remained as #{myAry.object_id}, as it's still the same instance\"\nputs \"otherRef points to the same instance - it shows the changes, too: #{otherRef}\"\n</code></pre>\n\n<p>Anyway, I really don't know why one would want to do this - are you solving the right problem, or just kidding with the language?</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443717902, "post_id": 32877325, "comment_id": 53615050, "body": "You could also use <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\">Array#[&#93;=</a>: <code>arr = [1,2,3]; id = arr.object_id; arr[0..-1] = [4,5]; arr #=&gt; [4, 5]; arr.object_id == id #=&gt; true</code>."}], "tags": [], "owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "is_accepted": false, "score": 4, "last_activity_date": 1443656813, "creation_date": 1443656813, "answer_id": 32877325, "question_id": 32876794, "link": "https://stackoverflow.com/questions/32876794/is-it-possible-to-alter-an-array-objects-length/32877325#32877325", "title": "Is it possible to alter an Array object&#39;s length?", "body": "<pre><code>arr = [1,2,3,4,5]\narr.replace([5,5,5])\n</code></pre>\n\n<p>I wouldn't monkey-patch a new method into Array; especially since it already exists. <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-replace\" rel=\"nofollow\">Array#replace</a></p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 5, "last_activity_date": 1443659428, "creation_date": 1443659428, "answer_id": 32877710, "question_id": 32876794, "link": "https://stackoverflow.com/questions/32876794/is-it-possible-to-alter-an-array-objects-length/32877710#32877710", "title": "Is it possible to alter an Array object&#39;s length?", "body": "<p>You are asking three very different questions in your title and in your text:</p>\n\n<blockquote>\n  <p>Is it possible to alter an <code>Array</code> object's length using an <code>Array</code> method?</p>\n</blockquote>\n\n<p>Yes, there are 20 methods which can (potentially) change the length of an <code>Array</code>:</p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-3C-3C\"><code>&lt;&lt;</code></a> increases the length by 1</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-5B-5D-3D\"><code>[]=</code></a> can alter the length arbitrarily, depending on arguments</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-clear\"><code>clear</code></a> sets the length to 0</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-compact-21\"><code>compact!</code></a> can decrease the length, depending on contents</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-concat\"><code>concat</code></a> can increase the length, depending on arguments</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-delete\"><code>delete</code></a> can decrease the length, depending on arguments and contents</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-delete_at\"><code>delete_at</code></a> can decrease the length, depending on arguments</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-delete_if\"><code>delete_if</code></a> / <a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-reject-21\"><code>reject!</code></a> can decrease the length, depending on arguments and contents</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-fill\"><code>fill</code></a> can increase the length, depending on arguments</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-insert\"><code>insert</code></a> increases the length</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-keep_if\"><code>keep_if</code></a> / <a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-select-21\"><code>select!</code></a> can decrease the length, depending on arguments and contents</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-pop\"><code>pop</code></a> decreases the length</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-push\"><code>push</code></a> increases the length</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-replace\"><code>replace</code></a> can alter the length arbitrarily, depending on arguments and contents (it simply replaces the <code>Array</code> completely with a different <code>Array</code>)</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-shift\"><code>shift</code></a> decreases the length</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-slice-21\"><code>slice!</code></a> decreases the length</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-uniq-21\"><code>uniq!</code></a> can decrease the length, depending on contents</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-unshift\"><code>unshift</code></a> increases the length</li>\n</ul>\n\n<blockquote>\n  <p>When monkey patching the Array class, how does one alter \"self\" to be a totally new array? How do I fill in the commented portion below?</p>\n\n<pre><code>class Array\n def change_self\n   #make this array be [5,5,5] no matter what\n end\nend\n</code></pre>\n</blockquote>\n\n<pre><code>class Array\n  def change_self\n    replace([5, 5, 5])\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>How are these values actually stored in the <code>Array</code> object?</p>\n</blockquote>\n\n<p>We don't know. The Ruby Language Specification does not prescribe any particular storage mechanism or implementation strategy. Implementors are free to implement <code>Array</code>s any way they like, as long as they obey the contracts of the <code>Array</code> methods.</p>\n\n<p>As an example, here's the <code>Array</code> implementation in <a href=\"http://rubini.us/\">Rubinius</a>, which I find fairly readable (at least more so than YARV):</p>\n\n<ul>\n<li><a href=\"https://github.com/rubinius/rubinius/blob/master/vm/builtin/array.cpp\"><code>vm/builtin/array.cpp</code></a>: certain core methods and data structures</li>\n<li><a href=\"https://github.com/rubinius/rubinius/blob/master/kernel/bootstrap/array.rb\"><code>kernel/bootstrap/array.rb</code></a>: a minimal implementation for bootstrapping the Rubinius kernel</li>\n<li><a href=\"https://github.com/rubinius/rubinius/blob/master/kernel/common/array.rb\"><code>kernel/common/array.rb</code></a>: the bulk of the implementation</li>\n</ul>\n\n<p>For comparison, here is <a href=\"http://topazruby.com/\">Topaz</a>'s implementation:</p>\n\n<ul>\n<li><a href=\"https://github.com/topazproject/topaz/blob/master/lib-topaz/array.rb\"><code>lib-topaz/array.rb</code></a></li>\n</ul>\n\n<p>And <a href=\"http://jruby.org/\">JRuby</a>:</p>\n\n<ul>\n<li><a href=\"https://github.com/jruby/jruby/blob/master/core/src/main/java/org/jruby/RubyArray.java\"><code>core/src/main/java/org/jruby/RubyArray.java</code></a></li>\n</ul>\n"}], "owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 32877710, "answer_count": 3, "score": 0, "last_activity_date": 1443681722, "creation_date": 1443653396, "last_edit_date": 1495540705, "question_id": 32876794, "link": "https://stackoverflow.com/questions/32876794/is-it-possible-to-alter-an-array-objects-length", "title": "Is it possible to alter an Array object&#39;s length?", "body": "<p>How does one alter <code>self</code> in an <code>Array</code> to be a totally new array? How do I fill in the commented portion below?</p>\n\n<pre><code>class Array\n  def change_self\n    #make this array be `[5,5,5]`\n  end\nend\n</code></pre>\n\n<p>I understand this: <a href=\"https://stackoverflow.com/questions/25834446\">Why can&#39;t I change the value of self?</a> and know I can't just assign <code>self</code> to a new object. When I do:</p>\n\n<pre><code>arr = [1,2,3,4,5]\n</code></pre>\n\n<p><code>arr</code> contains a reference to an <code>Array</code> object. I can add a method to <code>Array</code> class that alters an array, something like:</p>\n\n<pre><code> self[0] = 100\n</code></pre>\n\n<p>but is it possible to change the length of the array referenced by <code>arr</code>?\nHow are these values stored in the <code>Array</code> object?</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-ec2", "ec2-ami"], "comments": [{"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1443658620, "post_id": 32876732, "comment_id": 53586235, "body": "Switch from the old, per-service cli tools to the newer unified awscli? And see <a href=\"http://docs.aws.amazon.com/cli/latest/reference/ec2/bundle-instance.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/cli/latest/reference/ec2/&hellip;</a>."}, {"owner": {"reputation": 2652, "user_id": 200304, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/88ded01f5ac55b85bb3dd544dce38989?s=128&d=identicon&r=PG", "display_name": "Johannes Ernst", "link": "https://stackoverflow.com/users/200304/johannes-ernst"}, "reply_to_user": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1443659833, "post_id": 32876732, "comment_id": 53586481, "body": "This seems to be Windows VMs only? I cannot find anything equivalent for Linux VMs in those tools."}, {"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1443661762, "post_id": 32876732, "comment_id": 53586885, "body": "Apologies, was not aware of that limitation. Are you running this in eu-central-1 (hence v4 signing)? If this process works in other regions then I&#39;d raise an issue with AWS."}], "answers": [{"comments": [{"owner": {"reputation": 10314, "user_id": 807797, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4072657366a6ad674347c2a216318623?s=128&d=identicon&r=PG", "display_name": "CodeMed", "link": "https://stackoverflow.com/users/807797/codemed"}, "edited": false, "score": 0, "creation_date": 1611096641, "post_id": 33006655, "comment_id": 116340004, "body": "Administrator access is not secure and thus should not be used for PROD.  To demonstrate, here is what the AWS portal applies when one follows the instructions given in your answer: <code>{   &quot;Version&quot;: &quot;2012-10-17&quot;,   &quot;Statement&quot;: [     {       &quot;Effect&quot;: &quot;Allow&quot;,       &quot;Action&quot;: &quot;*&quot;,       &quot;Resource&quot;: &quot;*&quot;     }   ] }</code>"}], "tags": [], "owner": {"reputation": 656, "user_id": 5380111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-68pRBbXLtmc/AAAAAAAAAAI/AAAAAAAAEtg/xuwfiw5vYk0/photo.jpg?sz=128", "display_name": "Novice_JS", "link": "https://stackoverflow.com/users/5380111/novice-js"}, "is_accepted": false, "score": 0, "last_activity_date": 1444278526, "creation_date": 1444278526, "answer_id": 33006655, "question_id": 32876732, "link": "https://stackoverflow.com/questions/32876732/ec2-upload-bundle-signature-version-4-authentication-failed-trying-different-s/33006655#33006655", "title": "ec2-upload-bundle: Signature version 4 authentication failed, trying different signature version, which fails too", "body": "<p>Try giving admin permissions to current user which you are using.\nGo to IAM->select the user->permissions-> attach policy as \"AdministratorAccess\"\nNow run the command again in ec2 instance and hopefully it will work.</p>\n"}], "owner": {"reputation": 2652, "user_id": 200304, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/88ded01f5ac55b85bb3dd544dce38989?s=128&d=identicon&r=PG", "display_name": "Johannes Ernst", "link": "https://stackoverflow.com/users/200304/johannes-ernst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 601, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489081267, "creation_date": 1443652996, "question_id": 32876732, "link": "https://stackoverflow.com/questions/32876732/ec2-upload-bundle-signature-version-4-authentication-failed-trying-different-s", "title": "ec2-upload-bundle: Signature version 4 authentication failed, trying different signature version, which fails too", "body": "<pre><code># ec2-upload-bundle --access-key AKxxxx --secret-key xxxx --bucket something-i-own --manifest image1.img.manifest.xml\nDigest::Digest is deprecated; use Digest\nDigest::Digest is deprecated; use Digest\nDigest::Digest is deprecated; use Digest\nDigest::Digest is deprecated; use Digest\nDigest::Digest is deprecated; use Digest\nSignature version 4 authentication failed, trying different signature version\nERROR: Error talking to S3: Server.NotImplemented(501): A header you provided implies functionality that is not implemented\n</code></pre>\n\n<p>This is: ec2-ami-tools 1.5.7 on Arch Linux latest, running on an EC2 instance.</p>\n\n<p>I understand the Digest related messages are about an obsolete Ruby API that however still works. The NotImplemented is more concerning ...</p>\n\n<p>How can I upload my bundle?</p>\n"}, {"tags": ["ruby", "serialization", "marshalling"], "answers": [{"comments": [{"owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "edited": false, "score": 0, "creation_date": 1443657360, "post_id": 32877159, "comment_id": 53585954, "body": "Exactly what I needed. Just a clarification. First you create an array of all but the excluded instance variables. Then you use <code>inject</code> to create a <code>hash</code> with the remaining ones that will look something like <code>{@baz =&gt; 3}</code> etc.. Finally you return this <code>hash</code>. If this is correct shouldn&#39;t <code>vars</code> be outside the loop?"}, {"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "reply_to_user": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "edited": false, "score": 0, "creation_date": 1443660058, "post_id": 32877159, "comment_id": 53586529, "body": "@Rojj, nope, inject passes the return value from the block back in as the first argument to the next iteration in the block, the final iteration on the block returns the return value from the final block call, hence <code>vars</code> is recursively passed into the block and then returned as the return value for the <code>marshal_dump</code> method."}, {"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "reply_to_user": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "edited": false, "score": 0, "creation_date": 1443660173, "post_id": 32877159, "comment_id": 53586555, "body": "Forgot to mention, when you call inject with an argument, that argument is also passed as the initial value to the block (which is why the <code>inject({})</code> essentially instantiates vars). Read up more here: <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.3/Enumerable.html#method-i-inject</a>"}], "tags": [], "owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "is_accepted": true, "score": 5, "last_activity_date": 1443655776, "creation_date": 1443655776, "answer_id": 32877159, "question_id": 32876672, "link": "https://stackoverflow.com/questions/32876672/how-to-exclude-an-instance-variable-from-marshal-dump/32877159#32877159", "title": "How to exclude an instance variable from marshal dump", "body": "<p>You can very easily write a <code>marshal_dump</code> and <code>marshal_load</code> method that marshals all but a specified number of instance variables. Here's a fairly generic example of something you could do:</p>\n\n<pre><code>class MarshalTest\n  attr_reader :foo, :bar, :baz, :t\n  UNMARSHALED_VARIABLES = [:@foo, :@bar]\n\n  def initialize(foo = nil, bar = nil, baz = nil, t = nil)\n    @foo = foo\n    @bar = bar\n    @baz = baz\n    @t = t\n  end\n\n  def marshal_dump\n    instance_variables.reject{|m| UNMARSHALED_VARIABLES.include? m}.inject({}) do |vars, attr|\n      vars[attr] = instance_variable_get(attr)\n      vars\n    end\n  end\n\n  def marshal_load(vars)\n    vars.each do |attr, value|\n      instance_variable_set(attr, value) unless UNMARSHALED_VARIABLES.include?(attr)\n    end\n  end\nend\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>1.9.3-p550 :026 &gt; m = MarshalTest.new(1, 2, 3, 4)\n =&gt; #&lt;MarshalTest:0x007ff73194cae8 @foo=1, @bar=2, @baz=3, @t=4&gt;\n1.9.3-p550 :027 &gt; m.foo\n =&gt; 1\n1.9.3-p550 :028 &gt; m.bar\n =&gt; 2\n1.9.3-p550 :029 &gt; m.baz\n =&gt; 3\n1.9.3-p550 :030 &gt; m.t\n =&gt; 4\n1.9.3-p550 :031 &gt; s = Marshal.dump(m)\n =&gt; \"\\x04\\bU:\\x10MarshalTest{\\a:\\t@bazi\\b:\\a@ti\\t\"\n1.9.3-p550 :032 &gt; n = Marshal.load(s)\n =&gt; #&lt;MarshalTest:0x007ff73112b828 @baz=3, @t=4&gt;\n1.9.3-p550 :033 &gt; n.foo\n =&gt; nil\n1.9.3-p550 :034 &gt; n.bar\n =&gt; nil\n1.9.3-p550 :035 &gt; n.baz\n =&gt; 3\n1.9.3-p550 :036 &gt; n.t\n =&gt; 4\n</code></pre>\n\n<p>As you can see, the instance variables <code>foo</code> and <code>bar</code> were ignored in the marshaling/unmarshaling.</p>\n"}], "owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "accepted_answer_id": 32877159, "answer_count": 1, "score": 0, "last_activity_date": 1444530365, "creation_date": 1443652696, "last_edit_date": 1444530365, "question_id": 32876672, "link": "https://stackoverflow.com/questions/32876672/how-to-exclude-an-instance-variable-from-marshal-dump", "title": "How to exclude an instance variable from marshal dump", "body": "<p>My object contains an instance variable that point to a File object amongst several other attributes. Because of this <code>Marshal</code> cannot serialize it. How can I write a bespoke <code>dump</code> method so to exclude only that instance variable?</p>\n\n<pre><code>class Area\n  attr_accessor :area\n  attr_reader :several_other_attributes\n  ........\n\n  def initialize(name)\n    @area = name\n    @several_other_attributes = ....\n\n    @log = File.open( 'test.log', 'w')\n  end\nend\n</code></pre>\n"}, {"tags": ["python", "ruby", "zlib"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1443658629, "post_id": 32876435, "comment_id": 53586240, "body": "<a href=\"https://eval.in/private/218ffe66e3b623\" rel=\"nofollow noreferrer\">Python3</a> has the same result as <a href=\"https://eval.in/private/beab37209801b1\" rel=\"nofollow noreferrer\">Ruby</a>. Maybe looking up <code>zlib</code> changes between 2 and 3 might help."}, {"owner": {"reputation": 3937, "user_id": 1234765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07b5487c337b6cf2a392ccbd41ef1696?s=128&d=identicon&r=PG", "display_name": "Almaron", "link": "https://stackoverflow.com/users/1234765/almaron"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1443723824, "post_id": 32876435, "comment_id": 53618007, "body": "Looks like there are differences in zlib implementation in python2 and python3 that are not documented."}], "owner": {"reputation": 3937, "user_id": 1234765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07b5487c337b6cf2a392ccbd41ef1696?s=128&d=identicon&r=PG", "display_name": "Almaron", "link": "https://stackoverflow.com/users/1234765/almaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1443651094, "creation_date": 1443651094, "question_id": 32876435, "link": "https://stackoverflow.com/questions/32876435/zlib-difference-between-python-and-ruby", "title": "Zlib difference between Python and Ruby", "body": "<p>So I'm rewriting a relatively complex script from Python into Ruby (as a part of rebuilding the whole legacy app).\nEverything worked out just fine, except 1 point, where I need to compress a string to a certain format.</p>\n\n<p>Here's the original Python code:</p>\n\n<pre><code> gz = zlib.compressobj(9, zlib.DEFLATED, zlib.MAX_WBITS | 16)\n zstr = gz.compress(jcomment) + gz.flush() \n</code></pre>\n\n<p>Here's my Ruby equivalent:</p>\n\n<pre><code>gz = Zlib::Deflate.new 9, Zlib::MAX_WBITS | 16\nzstr = gz.deflate(jcomment) + gz.flush(Zlib::FINISH)\n</code></pre>\n\n<p>But it's nowhere near the same result. </p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["ruby", "ssh", "capistrano"], "comments": [{"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 0, "creation_date": 1443649919, "post_id": 32876187, "comment_id": 53583775, "body": "Could be a whole host of things, can you manually ssh into your box? Also, does your sshd configuration limit the number of simultaneous sessions?"}, {"owner": {"reputation": 21, "user_id": 1880123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3d59f328693521785d4f135d44c2b8b?s=128&d=identicon&r=PG", "display_name": "Kirsten Larsen", "link": "https://stackoverflow.com/users/1880123/kirsten-larsen"}, "reply_to_user": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 0, "creation_date": 1443650394, "post_id": 32876187, "comment_id": 53583969, "body": "I will check. I can&#39;t remember how to ssh manually (using Digital Ocean droplet). It was working, and I was able to connect using ssh initially... I also am not sure how to check my sshd config limitations, so I will look into that."}], "answers": [{"comments": [{"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1443652121, "post_id": 32876552, "comment_id": 53584522, "body": "I&#39;ve seen coffee shops do strange stuff (as well as lots of corp lans/public wifi) in regards to blocking. Things like only allow 80/443 via a proxy, etc.. so that makes sense."}], "tags": [], "owner": {"reputation": 21, "user_id": 1880123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3d59f328693521785d4f135d44c2b8b?s=128&d=identicon&r=PG", "display_name": "Kirsten Larsen", "link": "https://stackoverflow.com/users/1880123/kirsten-larsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1443651791, "creation_date": 1443651791, "answer_id": 32876552, "question_id": 32876187, "link": "https://stackoverflow.com/questions/32876187/the-deploy-has-failed-with-an-error-sshkitrunnerexecuteerror-exception-w/32876552#32876552", "title": "The deploy has failed with an error: #&lt;SSHKit::Runner::ExecuteError: Exception while executing on host xxx: Connection refused - connect(2)&gt;", "body": "<p>Oh boy, this is so silly. I went back to my office and it worked. It must've been blocked by the location I was at! I was trying everything. Connecting to ssh, etc wasn't working. And now it's fine.</p>\n"}], "owner": {"reputation": 21, "user_id": 1880123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3d59f328693521785d4f135d44c2b8b?s=128&d=identicon&r=PG", "display_name": "Kirsten Larsen", "link": "https://stackoverflow.com/users/1880123/kirsten-larsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 500, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443652838, "creation_date": 1443649759, "question_id": 32876187, "link": "https://stackoverflow.com/questions/32876187/the-deploy-has-failed-with-an-error-sshkitrunnerexecuteerror-exception-w", "title": "The deploy has failed with an error: #&lt;SSHKit::Runner::ExecuteError: Exception while executing on host xxx: Connection refused - connect(2)&gt;", "body": "<p>I've searched the forums to find similar bugs but have not found a solution. I literally just deployed to my staging site 30 minutes ago. And now it is giving me an error. I've been using the same method for months now, so I have no idea what's changed.</p>\n\n<p>Just running this Capistrano script: \n    <code>scripts/deploy staging</code></p>\n\n<p>And I get this error:</p>\n\n<pre><code>The deploy has failed with an error:   \n#&lt;SSHKit::Runner::ExecuteError: Exception while executing on host xxxx: Connection refused - connect(2)&gt;\n</code></pre>\n\n<p>Clearly an ssh issue. But why would it be working one second, then not the next? </p>\n\n<p>I also don't want to mess anything up on my production server.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-s3"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443649089, "post_id": 32875928, "comment_id": 53583411, "body": "If you can access it from a browser and not from code I&#39;d suspect that they&#39;re sniffing the user-agent information and crashing on their end. Try setting your code&#39;s user-agent to that of your browser and see what happens. Alternately, they could be looking for the cookie so you&#39;ll need to figure out how to cache/capture that and return it."}], "answers": [{"tags": [], "owner": {"reputation": 26940, "user_id": 106410, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Sw9rk.png?s=128&g=1", "display_name": "Zepplock", "link": "https://stackoverflow.com/users/106410/zepplock"}, "is_accepted": false, "score": 0, "last_activity_date": 1443649168, "creation_date": 1443649168, "answer_id": 32876054, "question_id": 32875928, "link": "https://stackoverflow.com/questions/32875928/cant-download-a-file-error-500/32876054#32876054", "title": "Can&#39;t download a file, error 500", "body": "<p>Your browser is already authenticated and has a cookie which allows you to download the file.</p>\n\n<p>You need to make sure that your Rails app has proper credentials to download the file (I can't in my browser, it asks for username/password)</p>\n"}], "owner": {"reputation": 2120, "user_id": 978151, "user_type": "registered", "accept_rate": 35, "profile_image": "https://graph.facebook.com/1197256483/picture?type=large", "display_name": "Roberto Pezzali", "link": "https://stackoverflow.com/users/978151/roberto-pezzali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443649168, "creation_date": 1443648481, "last_edit_date": 1443649159, "question_id": 32875928, "link": "https://stackoverflow.com/questions/32875928/cant-download-a-file-error-500", "title": "Can&#39;t download a file, error 500", "body": "<p>I'm trying to download a zipped file from Amazon Datafeed url and then decompress it.</p>\n\n<p>This is my code:</p>\n\n<pre><code>    open('public/files/amazon_ce.xml', 'w') do |local_file|\n      open('https://assoc-datafeeds-eu.amazon.com/datafeed/it_amazon_ce.xml.gz', :http_basic_authentication=&gt;[USERNAME, PASSWORD]) do |remote_file|\n        local_file.write(Zlib::GzipReader.new(remote_file).read)\n      end\n    end\n</code></pre>\n\n<p>If I try with another file everything is ok, but not with this Amazon file: the error is:</p>\n\n<pre><code>OpenURI::HTTPError: 500 Internal Server Error\n</code></pre>\n\n<p>I logged the request when I download the same file using the browser...</p>\n\n<pre><code>GET /datafeed/getFeed?filename=it_amazon_ce.xml.gz HTTP/1.1\nHost: assoc-datafeeds-eu.amazon.com:443\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\nAccept-Encoding: gzip, deflate, sdch\nAccept-Language: it-IT,it;q=0.8,en-US;q=0.6,en;q=0.4\nCookie: xxxxx\nReferer: https://assoc-datafeeds-eu.amazon.com/datafeed/listFeeds?format=text/html\nUpgrade-Insecure-Requests: 1\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.101 Safari/537.36\n\nHTTP/1.1 302 Moved Temporarily\nCache-Control: no-cache\nContent-Length: 0\nDate: Wed, 30 Sep 2015 21:24:22 GMT\nExpires: Thu, 01 Jan 1970 00:00:00 UTC\nLocation: http://prod-deamazon.outputs.datafeeds.s3.amazonaws.com/it_amazon_dvd.xml.gz?Signature=xxxx&amp;AWSAccessKeyId=xxxx&amp;Expires=xxxx\nPragma: No-cache\nServer: Apache-Coyote/1.1\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec"], "comments": [{"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 1, "creation_date": 1443648822, "post_id": 32875902, "comment_id": 53583314, "body": "Can you show some of the code you&#39;re actually calling? Unless you overrode the initializer for the ActiveRecord class then I&#39;m willing to bet there&#39;s another line of code in something like a before block that is calling save on this object or doing a create somewhere."}, {"owner": {"reputation": 6654, "user_id": 654457, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8806c26cc5687109c0669221ab54ecb7?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nelson", "link": "https://stackoverflow.com/users/654457/ben-nelson"}, "reply_to_user": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 0, "creation_date": 1443655097, "post_id": 32875902, "comment_id": 53585371, "body": "Ah! I think I found it. It appears that when dependency objects are saved, if they have a dependency on an object in ActiveRecord that is in memory that object will also be saved to the database. This seems to be my problem, I have other dependencies that get created and saved to the database and they save the object that I only create in memory. I have updated my question with what I believe is the problem."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 2, "creation_date": 1443673392, "post_id": 32875902, "comment_id": 53589518, "body": "Looks like you&#39;ve answered your question. In stead of putting it in your question, why not create an Answer so that people know that there is a solution to this problem :)"}], "answers": [{"tags": [], "owner": {"reputation": 6654, "user_id": 654457, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8806c26cc5687109c0669221ab54ecb7?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nelson", "link": "https://stackoverflow.com/users/654457/ben-nelson"}, "is_accepted": true, "score": 0, "last_activity_date": 1443713188, "creation_date": 1443713188, "answer_id": 32891367, "question_id": 32875902, "link": "https://stackoverflow.com/questions/32875902/rspec-triggering-after-save-callback-on-in-memory-instance-of-object-creation/32891367#32891367", "title": "RSpec triggering after_save callback on in memory instance of object creation", "body": "<p>So it appears that if you have a dependency object that relies on the in memory ActiveRecord object and then that object is saved to the database, the in memory object will also be saved.</p>\n\n<p>For example.</p>\n\n<pre><code>obj = ObjectType.new(parameters)\nDependencyObject.create(relies_on: obj)\n</code></pre>\n\n<p>The <code>obj</code> object will be persisted to the database first and then the <code>DependencyObject</code> will be saved. This can lead to very strange callback behavior if you have a callback on <code>obj</code> on after_create or something it will get called at the execution of the save for <code>DependencyObject</code> and then the save for the other object will occur. Can be very frustrating.</p>\n"}], "owner": {"reputation": 6654, "user_id": 654457, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8806c26cc5687109c0669221ab54ecb7?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nelson", "link": "https://stackoverflow.com/users/654457/ben-nelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 32891367, "answer_count": 1, "score": 0, "last_activity_date": 1443713188, "creation_date": 1443648389, "last_edit_date": 1443655340, "question_id": 32875902, "link": "https://stackoverflow.com/questions/32875902/rspec-triggering-after-save-callback-on-in-memory-instance-of-object-creation", "title": "RSpec triggering after_save callback on in memory instance of object creation", "body": "<p>When I am testing for a particular project I create a new instance of an ActiveRecord object using</p>\n\n<pre><code>ObjectType.new(parameters)\n</code></pre>\n\n<p>This instantiation in RSpec 3.3 (the latest version) calls the after_save callback within that model though. This behavior does not match what actually happens in the development environment and what I expect when that new instance in memory is created. Additionally if I do a binding.pry on the test that this is ran on I can examine the database and in fact there is a persisted object in the database that is created by RSpec instead of just using the in memory object.</p>\n\n<p>Why is this behavior occurring and how should I fix it?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>So it appears that if you have a dependency object that relies on the in memory ActiveRecord object and then that object is saved to the database, the in memory object will also be saved.</p>\n\n<p>For example.</p>\n\n<pre><code>obj = ObjectType.new(parameters)\nDependencyObject.create(relies_on: obj)\n</code></pre>\n\n<p>The <code>obj</code> object will be persisted to the database first and then the DependencyObject will be saved.</p>\n"}, {"tags": ["ruby", "voltrb"], "comments": [{"owner": {"reputation": 177, "user_id": 3579220, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f6b81754a3c31823dfee76236d6ffe6?s=128&d=identicon&r=PG&f=1", "display_name": "user3579220", "link": "https://stackoverflow.com/users/3579220/user3579220"}, "edited": false, "score": 0, "creation_date": 1443650273, "post_id": 32875823, "comment_id": 53583926, "body": "The new method in my controller has one line and is as follows: &#39;self.model = store._offices.buffer&#39;"}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 1, "creation_date": 1443799766, "post_id": 32875823, "comment_id": 53649365, "body": "We need to see your <code>new</code> code to help, and the exception backtrace would also be useful."}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1453648834, "post_id": 32875823, "comment_id": 57684321, "body": "And where do you call &quot;name&quot; at all? on what object? because that is nil, and you have not told us anything about it."}], "answers": [{"tags": [], "owner": {"reputation": 152, "user_id": 738271, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95a3d1d01cb5d23c6363c2037f9743d6?s=128&d=identicon&r=PG", "display_name": "djboardman", "link": "https://stackoverflow.com/users/738271/djboardman"}, "is_accepted": false, "score": 0, "last_activity_date": 1449481471, "creation_date": 1449481471, "answer_id": 34130516, "question_id": 32875823, "link": "https://stackoverflow.com/questions/32875823/action-not-being-called-on-page-load/34130516#34130516", "title": "Action not being called on page load", "body": "<p>My guess is that you're referring to <code>{{ name }}</code> rather than <code>{{ _name }}</code> in your view. Try the underscore notation or define an <code>Offices</code> model with a <code>name</code> field. The docs on that are <a href=\"http://docs.voltframework.com/en/docs/models.html\" rel=\"nofollow\">here</a>.</p>\n\n<p>I get the <code>AttributeBinding</code> error if I don't use the underscore notation on an attribute that's not defined on a model.</p>\n"}], "owner": {"reputation": 177, "user_id": 3579220, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f6b81754a3c31823dfee76236d6ffe6?s=128&d=identicon&r=PG&f=1", "display_name": "user3579220", "link": "https://stackoverflow.com/users/3579220/user3579220"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449481471, "creation_date": 1443647977, "question_id": 32875823, "link": "https://stackoverflow.com/questions/32875823/action-not-being-called-on-page-load", "title": "Action not being called on page load", "body": "<p>In my ruby Volt project, I am getting the following error:</p>\n\n<pre><code>AttributeBinding Error: #&lt;NoMethodError: 'undefined method `name' for nil'&gt;\n</code></pre>\n\n<p>I know that it is coming from trying to access the name attribute on the model while it is nil. My routes file is the following:</p>\n\n<pre><code>client '/practices/new', component: 'admin', controller: 'offices', action: 'new'\n</code></pre>\n\n<p>The method 'new' assigns the model to a buffer but it is not being called on the page load. Anyone know why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1443647042, "post_id": 32875547, "comment_id": 53582558, "body": "Are you providing the ID along with the request when you go to update the entity?"}, {"owner": {"reputation": 1234, "user_id": 3093312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sh2eh.jpg?s=128&g=1", "display_name": "Bryan Dimas", "link": "https://stackoverflow.com/users/3093312/bryan-dimas"}, "edited": false, "score": 1, "creation_date": 1443647240, "post_id": 32875547, "comment_id": 53582641, "body": "what does your routes.rb file look like? The update does not work because of the type of request (PATCH), probably not because of anything else."}], "answers": [{"comments": [{"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1443649542, "post_id": 32875664, "comment_id": 53583614, "body": "This code is not really that good - let me write an answer to give you some ideas"}], "tags": [], "owner": {"reputation": 363, "user_id": 1313890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c5007ee5885e0f591564691905de1b30?s=128&d=identicon&r=PG", "display_name": "Shane McGarry", "link": "https://stackoverflow.com/users/1313890/shane-mcgarry"}, "is_accepted": false, "score": 0, "last_activity_date": 1443647281, "creation_date": 1443647281, "answer_id": 32875664, "question_id": 32875547, "link": "https://stackoverflow.com/questions/32875547/weird-routing-behavior-in-rails/32875664#32875664", "title": "Weird Routing Behavior in Rails", "body": "<p>I found the problem.  It was something really stupid.  I had the following line in my route.config:</p>\n\n<pre><code>match ':controller(/:action(/:id))', :via =&gt; [:get, :post]\n</code></pre>\n\n<p>I just needed to change this to:</p>\n\n<pre><code>match ':controller(/:action(/:id))', :via =&gt; [:get, :post, :patch, :put, :delete]\n</code></pre>\n\n<p>Now it handles updates (i.e. patch / put)</p>\n"}, {"comments": [{"owner": {"reputation": 363, "user_id": 1313890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c5007ee5885e0f591564691905de1b30?s=128&d=identicon&r=PG", "display_name": "Shane McGarry", "link": "https://stackoverflow.com/users/1313890/shane-mcgarry"}, "edited": false, "score": 0, "creation_date": 1443687438, "post_id": 32876381, "comment_id": 53595664, "body": "So I get what you are saying.  But even if I organised it this way, would it work without the changes I made to the route.config? The underlying problem was that the route was only configured to look for get and post verbs and this call was using a patch verb so the route wasn&#39;t configured.  Wouldn&#39;t I still have to add the code in my answer to the route.config even if i reorganised the controllers as you suggest?"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "reply_to_user": {"reputation": 363, "user_id": 1313890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c5007ee5885e0f591564691905de1b30?s=128&d=identicon&r=PG", "display_name": "Shane McGarry", "link": "https://stackoverflow.com/users/1313890/shane-mcgarry"}, "edited": false, "score": 0, "creation_date": 1443687526, "post_id": 32876381, "comment_id": 53595714, "body": "If you just wanted to make it work with <code>put&#47;patch</code>, you&#39;d use the <code>via</code> attribute to define them. The problem is deeper than that, though; as mentioned in the answer."}, {"owner": {"reputation": 363, "user_id": 1313890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c5007ee5885e0f591564691905de1b30?s=128&d=identicon&r=PG", "display_name": "Shane McGarry", "link": "https://stackoverflow.com/users/1313890/shane-mcgarry"}, "edited": false, "score": 0, "creation_date": 1443689842, "post_id": 32876381, "comment_id": 53597052, "body": "I understand its deeper than that :) I just wasn&#39;t sure if I would get the same error if I reorganised everything as you suggested or if the reorganisation would just cause everything to work because of the way Rails is designed. In other MVC frameworks I&#39;ve worked with, you typically need to be explicit in your route creation."}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "reply_to_user": {"reputation": 363, "user_id": 1313890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c5007ee5885e0f591564691905de1b30?s=128&d=identicon&r=PG", "display_name": "Shane McGarry", "link": "https://stackoverflow.com/users/1313890/shane-mcgarry"}, "edited": false, "score": 0, "creation_date": 1443691345, "post_id": 32876381, "comment_id": 53598033, "body": "hehehe Yes this is why I was trying to explain about the &quot;Rails&quot; paradigm - many people coming from other MVC frameworks don&#39;t get how simple Rails has been created. It&#39;s kind of like socialism, it works if you want to be conventional, if you do your own thing, you have to understand the system to keep it succinct."}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": true, "score": 0, "last_activity_date": 1443650822, "creation_date": 1443650822, "answer_id": 32876381, "question_id": 32875547, "link": "https://stackoverflow.com/questions/32875547/weird-routing-behavior-in-rails/32876381#32876381", "title": "Weird Routing Behavior in Rails", "body": "<p>I winced when looking over your code, here's how I'd have done it:</p>\n\n<pre><code>#config/routes.rb\nresources :rooms do\n   resources :bookings #-&gt; url.com/rooms/:room_id/bookings/new\nend\n\n#app/controllers/bookings_controller.rb\nclass BookingsController &lt; ApplicationController\n   before_action :set_room\n   def new\n      @booking = room.bookings.new\n   end\n\n   def create\n      @booking = room.bookings.new booking_params\n      @booking.save\n   end\n\n   def update\n      @booking = room.bookings.update booking_params\n   end\n\n   private\n\n   def set_room\n      @room = Room.find params[:room_id]\n   end\n\n   def booking_params\n      params.require(:booking).permit(:x, :y, :z)\n   end\nend\n</code></pre>\n\n<p>This setup is pretty standard with Rails (IE <a href=\"http://guides.rubyonrails.org/routing.html#resources-on-the-web\" rel=\"nofollow noreferrer\">resourceful routes</a>):</p>\n\n<blockquote>\n  <p>Browsers request pages from Rails by making a request for a URL using\n  a specific HTTP method, such as GET, POST, PATCH, PUT and DELETE. Each\n  method is a request to perform an operation on the resource. A\n  resource route maps a number of related requests to actions in a\n  single controller.</p>\n</blockquote>\n\n<p>Observing this principle would likely resolve your \"weird\" routing errors due to their cohesion with the other aspects of the Rails system.</p>\n\n<p>For example:</p>\n\n<pre><code>#app/controllers/accounts_controller.rb\nclass AccountsController &lt; ApplicationController\n   #-&gt; this shouldn't have a \"book\" action unless necessary. Your case is not necessary\nend\n</code></pre>\n\n<p>--</p>\n\n<p>The problem you have is that you're not adhering to the Rails' convention of keeping your system object-orientated.</p>\n\n<p>The importance of this is huge; Rails is designed to make it as simple as possible to <a href=\"https://en.wikipedia.org/wiki/Create,_read,_update_and_delete\" rel=\"nofollow noreferrer\">CRUD (create read update destroy)</a> data objects. These objects are built from database data in the \"models\":</p>\n\n<p><a href=\"https://i.stack.imgur.com/pPo2j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pPo2j.png\" alt=\"enter image description here\"></a></p>\n\n<p>I use this picture a lot - it shows how Rails should work. You build objects in your <code>Models</code> which you manipulate in your controllers. The views show it all to the user.</p>\n\n<p>Thus, when you're looking at your code, I would keep it as simple as possible:</p>\n\n<pre><code>#app/models/room.rb\nclass Room &lt; ActiveRecord::Base\n   has_many :bookings\n   has_many :users, through: :bookings\n   belongs_to :type\nend\n\n#app/models/booking.rb\nclass Booking &lt; ActiveRecord::Base\n   belongs_to :room\n   belongs_to :user\nend\n\n#app/models/user.rb\nclass User &lt; ActiveRecord::Base\n   has_many :bookings\n   has_many :rooms, through: :bookings\nend\n</code></pre>\n\n<p>This will allow you to call the following:</p>\n\n<pre><code>@room = Room.find 1\n@room.bookings #-&gt; collection of bookings per room\n</code></pre>\n\n<p>You could also do something like the following (simple) for the views:</p>\n\n<pre><code>#app/views/bookings/new.html.erb\n&lt;%= form_for @booking do |f| %&gt;\n   &lt;%= f.text_field :x %&gt;\n   &lt;%= f.text_field :y %&gt;\n   &lt;%= f.text_field :z %&gt;\n   &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 1313890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c5007ee5885e0f591564691905de1b30?s=128&d=identicon&r=PG", "display_name": "Shane McGarry", "link": "https://stackoverflow.com/users/1313890/shane-mcgarry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 32876381, "answer_count": 2, "score": 1, "last_activity_date": 1443650822, "creation_date": 1443646868, "question_id": 32875547, "link": "https://stackoverflow.com/questions/32875547/weird-routing-behavior-in-rails", "title": "Weird Routing Behavior in Rails", "body": "<p>I'm using rails 4.2.  I have created a form that submits to a particular action in my controller.  Here is the beginning of the form code and the controller definition:</p>\n\n<p><strong>view.html.erb</strong></p>\n\n<pre><code>&lt;div id=\"account-booking\" class=\"tab-pane\"&gt;\n  &lt;%= form_for @booking_info, url: { action: 'book' } do |b| %&gt;\n      &lt;fieldset class=\"group column-1\"&gt;\n        &lt;legend&gt;Booking Preference for &lt;%= Rails.configuration.x.app_settings.year %&gt;&lt;/legend&gt;\n\n        &lt;div class=\"group column-full radio-list\"&gt;\n          &lt;%= label_tag('Select Room Type') %&gt;\n          &lt;% @available_rooms.each do |rt| %&gt;\n              &lt;div class=\"radio-item\"&gt;\n                &lt;!--\n                &lt;%= b.radio_button :room_type_id, rt.id, :class =&gt; 'rb_room_type inline', :onclick =&gt; fetch_room_info_path(:id =&gt; rt.id), :remote =&gt; true %&gt;\n                &lt;%= b.radio_button :room_type_id, rt.id, :class =&gt; 'rb_room_type inline', :onclick =&gt; 'render_room_info('+ rt.id.to_s + ');' %&gt;\n                --&gt;\n                &lt;%= b.radio_button :room_type_id, rt.id, :class =&gt; 'rb_room_type inline' %&gt;\n                &lt;%= content_tag :span, rt.name  %&gt;\n                &lt;a data-toggle=\"tooltip\" data-placement=\"right\" title=\"&lt;%= rt.description %&gt;\"&gt;\n                  &lt;%= image_tag \"tooltip.png\", :class=&gt;\"tooltip-icon\" %&gt;\n                &lt;/a&gt;\n              &lt;/div&gt;\n          &lt;% end %&gt;\n\n          &lt;%= b.label :roommate_preference, 'Roommate Preference' %&gt;\n          &lt;%= b.text_area :roommate_preference, :class =&gt; 'form-control' %&gt;\n\n          &lt;div class=\"account-checkbox-options\"&gt;\n            &lt;%= b.label :is_flexible, class: 'checkbox inline' do %&gt;\n                &lt;%= b.check_box :is_flexible %&gt;\n                I am flexible with regards to my room choice.\n            &lt;% end %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;!--\n        &lt;div id=\"estimated-due\" class=\"group column-2\"&gt;\n\n        &lt;/div&gt;\n        --&gt;\n      &lt;/fieldset&gt;\n\n      &lt;fieldset class=\"group column-2 account-preferences\"&gt;\n        &lt;legend&gt;Your Room Information for &lt;%= Rails.configuration.x.app_settings.year %&gt;&lt;/legend&gt;\n        &lt;div class=\"group column-1\"&gt;\n          &lt;div class=\"group column-full add-tabbing\"&gt;\n            &lt;%= label_tag('Selected Room:') %&gt;\n            &lt;span&gt;&lt;%= @booking_info.room_type.blank? ? '&lt;No Room Selected&gt;' : @booking_info.room_type.name  %&gt;&lt;/span&gt;\n          &lt;/div&gt;\n\n          &lt;div class=\"group column-full add-tabbing\"&gt;\n            &lt;%= label_tag('Assigned Room:') %&gt;\n            &lt;span&gt;&lt;%= @booking_info.assigned_type.blank? ? '&lt;No Room Assigned&gt;' : @booking_info.assigned_type.name  %&gt;&lt;/span&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"group column-2\"&gt;\n          &lt;div class=\"group column-full add-tabbing\"&gt;\n            &lt;%= label_tag('Total Due:') %&gt;\n            &lt;span &gt;&lt;%= number_to_currency(@booking_info.total_due.blank? ? 0.00 : @booking_info.total_due) %&gt;&lt;/span&gt;\n          &lt;/div&gt;\n          &lt;div class=\"group column-full add-tabbing\"&gt;\n            &lt;%= label_tag('Current Balance:') %&gt;\n            &lt;span&gt;&lt;%= number_to_currency(@booking_info.outstanding_balance.blank? ? 0.00 : @booking_info.outstanding_balance) %&gt;&lt;/span&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;% unless @booking_info.assigned_type.blank? %&gt;\n            &lt;div class=\"group column-full\"&gt;\n              &lt;h2&gt;Assigned Room Information&lt;/h2&gt;\n            &lt;/div&gt;\n        &lt;% end %&gt;\n      &lt;/fieldset&gt;\n\n      &lt;div class=\"account-buttons\"&gt;\n        &lt;%= b.submit 'Submit', class: 'btn btn-danger' %&gt;\n        &lt;%= link_to 'Cancel', '/pages/home', class: 'link-button-cancel' %&gt;\n      &lt;/div&gt;\n\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>account_controller.rb</strong></p>\n\n<pre><code>def book\n    @booking = PersonRoom.new(booking_params)\n    @requested_room = RoomType.find(params[:person_room][:room_type_id])\n    @booking.room_type = @requested_room\n\n    if update_booking @booking\n      redirect_to :controller =&gt; 'account', :action =&gt; 'view'\n    else\n      render('view')\n    end\n end\n</code></pre>\n\n<p>All of this works beautifully when there is no PersonRoom record (e.g. if I'm doing an insert).  However, if I try to update the record, using the same exact form / action (because both the view and the action are exactly the same regardless of whether i'm inserting or updating), I get an error when I click \"Submit\":  </p>\n\n<p>No route matches [PATCH] \"/account/book\"</p>\n\n<p>This makes no sense.  I'm on the exact same page.  I just used all of this code to create the record, so the route clearly exists (because it calls /account/book). Now I want to update but suddenly the route doesn't match? And it never even breaks into the code because it doesn't call the controller action.  This makes zero sense to me.  Hope someone can help.</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1443646549, "post_id": 32875243, "comment_id": 53582329, "body": "I made good experiences with <a href=\"https://rubygems.org/gems/axlsx\" rel=\"nofollow noreferrer\">axlsx</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443650015, "post_id": 32875243, "comment_id": 53583813, "body": "Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, <a href=\"http://meta.stackoverflow.com/questions/254393\">describe the problem</a> and what has been done so far to solve it."}], "answers": [{"tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": true, "score": 2, "last_activity_date": 1443645989, "creation_date": 1443645989, "answer_id": 32875331, "question_id": 32875243, "link": "https://stackoverflow.com/questions/32875243/ruby-gem-to-write-to-excel/32875331#32875331", "title": "Ruby Gem to write to excel?", "body": "<p>Have you tried <a href=\"https://github.com/zdavatz/spreadsheet\" rel=\"nofollow\">The Ruby Spreadsheet</a>? </p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'spreadsheet'\n\n# Begin Test\nprint \"Spreadsheet Test\\n\"\n\n# Create the rows to be inserted\nrow_1 = ['A1', 'B1']\nrow_2 = ['A2', 'B2']\n\n# Create a new Workbook\nnew_book = Spreadsheet::Workbook.new\n\n# Create the worksheet\nnew_book.create_worksheet :name =&gt; 'Sheet Name'\n\n# Add row_1\nnew_book.worksheet(0).insert_row(0, row_1)\n\n# Write the file\nnew_book.write('test.xls')\n</code></pre>\n"}], "owner": {"reputation": 253, "user_id": 4871679, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-aT1umkX0nWM/AAAAAAAAAAI/AAAAAAAAACg/BmZvsDIxRcY/photo.jpg?sz=128", "display_name": "Anders", "link": "https://stackoverflow.com/users/4871679/anders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1554, "favorite_count": 0, "accepted_answer_id": 32875331, "answer_count": 1, "score": 1, "last_activity_date": 1443645989, "creation_date": 1443645675, "question_id": 32875243, "link": "https://stackoverflow.com/questions/32875243/ruby-gem-to-write-to-excel", "title": "Ruby Gem to write to excel?", "body": "<p>I'm currently writing a ruby script that will make changes to excel documents based off of certain criteria's I set. I've been using the ruby gem 'roo' to do the reading aspect of the script but haven't been able to find a suitable writer. I've tried RubyXL and spreadsheet but I haven't been able to get them to work. Is there a simpler alternative to writing or a better gem to use out there for writing to excel? </p>\n"}, {"tags": ["ruby", "learn-ruby-the-hard-way"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1443646683, "post_id": 32875109, "comment_id": 53582401, "body": "The triple quotes are a Python thing . A single <code>&quot;</code> is enough in Ruby."}, {"owner": {"reputation": 1066, "user_id": 1449926, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0d203a22a644907b1352a7de11a4a73e?s=128&d=identicon&r=PG", "display_name": "Mikey T.K.", "link": "https://stackoverflow.com/users/1449926/mikey-t-k"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1443733022, "post_id": 32875109, "comment_id": 53622741, "body": "It&#39;s a direct quote from the book."}], "answers": [{"comments": [{"owner": {"reputation": 1066, "user_id": 1449926, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0d203a22a644907b1352a7de11a4a73e?s=128&d=identicon&r=PG", "display_name": "Mikey T.K.", "link": "https://stackoverflow.com/users/1449926/mikey-t-k"}, "edited": false, "score": 0, "creation_date": 1443645677, "post_id": 32875216, "comment_id": 53581877, "body": "<i>sigh</i> - it&#39;s the small things, and I overlooked this when helping my buddy out. Thanks :)"}], "tags": [], "owner": {"reputation": 2473, "user_id": 4683460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24dafd813f96fc34b9b3f7c0455f9011?s=128&d=identicon&r=PG", "display_name": "Joel C", "link": "https://stackoverflow.com/users/4683460/joel-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1443645563, "creation_date": 1443645563, "answer_id": 32875216, "question_id": 32875109, "link": "https://stackoverflow.com/questions/32875109/learn-ruby-the-hard-way-missing-puts-output-on-exercise-14/32875216#32875216", "title": "&quot;Learn ruby the hard way&quot; missing puts output on exercise 14", "body": "<p>You have an <strong>=</strong> after the puts on line 8. Removing it should fix the issue.</p>\n"}], "owner": {"reputation": 1066, "user_id": 1449926, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0d203a22a644907b1352a7de11a4a73e?s=128&d=identicon&r=PG", "display_name": "Mikey T.K.", "link": "https://stackoverflow.com/users/1449926/mikey-t-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1443662666, "accepted_answer_id": 32875216, "answer_count": 1, "score": 0, "last_activity_date": 1443645563, "creation_date": 1443645178, "question_id": 32875109, "link": "https://stackoverflow.com/questions/32875109/learn-ruby-the-hard-way-missing-puts-output-on-exercise-14", "closed_reason": "Not suitable for this site", "title": "&quot;Learn ruby the hard way&quot; missing puts output on exercise 14", "body": "<p>I'm currently working on exercise 14 with a friend, which is some really simple string interpolation and user input grabbing. My code looks like this:</p>\n\n<pre><code>user_name = ARGV.first                                                          \nprompt = '&gt; '\n\nputs \"Hi #{user_name}.\"\nputs \"I'd like to ask you a few questions.\"\nputs \"Do you like me #{user_name}? \", prompt\nlikes = $stdin.gets.chomp\n\nputs = \"Where do you live #{user_name}? \", prompt\nlives = $stdin.gets.chomp\n\nputs \"What kind of computer do you have? \", prompt\ncomputer = $stdin.gets.chomp\n\nputs \"\"\"\nAlright, so you said #{likes} about liking me.\nYou live in #{lives}. Not sure where that is.\nAnd you have a #{computer} computer. Nice.\n\"\"\"\n</code></pre>\n\n<p>Should work pretty simply, but what I'm finding is that after the <code>likes=</code> line, the next line prompting for \"where do you live\" is not displayed on the screen, yet the <code>lives=</code> is prompted for. That is, immediately after entering the \"likes\", the \"lines\" prompt is jumped to without showing me the prompt output from before! The next prompt starting at <code>computer=</code> works as expected.</p>\n\n<p>I'm using ruby 2.1.2, but the same behavior appears on 2.2.3, and an online REPL <a href=\"https://repl.it/BMPJ\" rel=\"nofollow\">here</a></p>\n\n<p>Why does this happen?</p>\n"}, {"tags": ["ruby", "sinatra", "asset-pipeline", "nomethoderror", "stylesheet-link-tag"], "comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1443648064, "post_id": 32874843, "comment_id": 53583003, "body": "does it really work when you write `&lt;%= partial :header %&gt;  for erb partials? i&#39;ve always seen and used &lt;%= erb :header %&gt;. btw, why are you trying to pipe rails specific methods?"}, {"owner": {"reputation": 33, "user_id": 5297238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bd05f2b7d045bd04c8f67023027daf9?s=128&d=identicon&r=PG", "display_name": "Salah Kayali", "link": "https://stackoverflow.com/users/5297238/salah-kayali"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 1, "creation_date": 1443648275, "post_id": 32874843, "comment_id": 53583077, "body": "Hey man. Yup, it does, but that&#39;s because I added a special gem called &#39;sinatra-partial&#39; which makes using partials a lot easier. You should check it out and check the documentation, as the normal &lt;%= erb :header %&gt; didn&#39;t suit my needs, mainly because I like how partials are handled in rails."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5297238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bd05f2b7d045bd04c8f67023027daf9?s=128&d=identicon&r=PG", "display_name": "Salah Kayali", "link": "https://stackoverflow.com/users/5297238/salah-kayali"}, "edited": false, "score": 0, "creation_date": 1443648029, "post_id": 32875006, "comment_id": 53582985, "body": "Thanks a lot! That solved the problem. I ran into another one though, I hope you can help. It now gives me the error: Sass::SyntaxError at / File to import not found or unreadable: bootstrap-sprockets. This is really weird, as i have the gem installed (i used rails-assets). I will edit the main post the code from the gemfile."}, {"owner": {"reputation": 33, "user_id": 5297238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bd05f2b7d045bd04c8f67023027daf9?s=128&d=identicon&r=PG", "display_name": "Salah Kayali", "link": "https://stackoverflow.com/users/5297238/salah-kayali"}, "edited": false, "score": 0, "creation_date": 1443653875, "post_id": 32875006, "comment_id": 53585046, "body": "Hey @photoionized i&#39;m sorry to bother you but were you able to look at this?"}, {"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "reply_to_user": {"reputation": 33, "user_id": 5297238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bd05f2b7d045bd04c8f67023027daf9?s=128&d=identicon&r=PG", "display_name": "Salah Kayali", "link": "https://stackoverflow.com/users/5297238/salah-kayali"}, "edited": false, "score": 0, "creation_date": 1443656010, "post_id": 32875006, "comment_id": 53585606, "body": "Looks to me like <code>bootstrap-sprockets</code> is from the <code>bootstrap-sass</code> project. I don&#39;t see it in your Gemfile. Try adding <code>gem &#39;bootstrap-sass&#39;</code> to your Gemfile"}, {"owner": {"reputation": 33, "user_id": 5297238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bd05f2b7d045bd04c8f67023027daf9?s=128&d=identicon&r=PG", "display_name": "Salah Kayali", "link": "https://stackoverflow.com/users/5297238/salah-kayali"}, "edited": false, "score": 0, "creation_date": 1443658082, "post_id": 32875006, "comment_id": 53586111, "body": "Hey @photoionized thanks, I fixed it. It turned out that the bootstrap-sass gem that I installed from rails-assets.org simply wasn&#39;t cutting it, so I installed it from rubygems. I also has to require bundler in the app.rb file. Thanks for helping me solve these problems."}], "tags": [], "owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "is_accepted": true, "score": 0, "last_activity_date": 1443644837, "creation_date": 1443644837, "answer_id": 32875006, "question_id": 32874843, "link": "https://stackoverflow.com/questions/32874843/sinatra-nomethoderror-at-undefined-method-stylesheet-link-tag-for/32875006#32875006", "title": "Sinatra NoMethodError at / undefined method `stylesheet_link_tag&#39; for #", "body": "<p>Your problem is that <code>stylesheet_link_tag</code> and <code>javascript_include_tag</code> are a part of ActionView, one of the gems underlying Rails (i.e. see <code>ActionView::Helpers::AssetTagHelper</code>).</p>\n\n<p>According to the <code>sinatra-asset-pipeline</code> documentation:</p>\n\n<blockquote>\n  <p>Now when everything is in place you can use all helpers provided by\n  sprockets-helpers</p>\n</blockquote>\n\n<p>Looking at a <code>sprocket-helpers</code> example you need to do something like this:</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" href=\"&lt;%= stylesheet_path 'application' %&gt;\"&gt;\n&lt;script src=\"&lt;%= javascript_path 'application' %&gt;\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>So what you're looking for is <code>stylesheet_path</code> and <code>javascript_path</code> rather than <code>stylesheet_link_tag</code> and <code>javascript_include_tag</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 5297238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bd05f2b7d045bd04c8f67023027daf9?s=128&d=identicon&r=PG", "display_name": "Salah Kayali", "link": "https://stackoverflow.com/users/5297238/salah-kayali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1203, "favorite_count": 0, "accepted_answer_id": 32875006, "answer_count": 1, "score": 2, "last_activity_date": 1443648156, "creation_date": 1443644226, "last_edit_date": 1443648156, "question_id": 32874843, "link": "https://stackoverflow.com/questions/32874843/sinatra-nomethoderror-at-undefined-method-stylesheet-link-tag-for", "title": "Sinatra NoMethodError at / undefined method `stylesheet_link_tag&#39; for #", "body": "<p>I am currently making an app with sinatra and i've been working for hours to try to implement bootstrap in it, and realizing how much easier it is in rails.</p>\n\n<p>Anyways, when i run the web server and go to /, I see an error relating to the line <code>&lt;%= stylesheet_link_tag 'app', media: 'all' %&gt;</code> which I put in my app.erb view(the index of my webapp). This line is meant to load an scss file in the assets/stylesheets folder, and the file contains the @import values for bootstrap.</p>\n\n<p>I'm using the sinatra-asset-pipeline gem, and I've set it up correctly according to the instructions on the github page. I've been trying lots of things for the past 4 hours and nothing has worked. Here's the code for the most important files:</p>\n\n<p><strong>assets/stylesheets/app.scss</strong>:</p>\n\n<pre><code>@import \"bootstrap-sprockets\";\n@import \"bootstrap\";\n</code></pre>\n\n<p><strong>views/app.erb</strong>:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\n  &lt;head&gt;\n    &lt;title&gt;Salah Kayali&lt;/title&gt;\n    &lt;%= stylesheet_link_tag 'app', media: 'all' %&gt;\n    &lt;%= javascript_include_tag 'app' %&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;%= partial :header %&gt;\n  &lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>app.rb</strong>:</p>\n\n<pre><code>require 'sinatra/partial'\nrequire 'rubygems'\nrequire 'sinatra'\n# set :bind, '0.0.0.0'\nrequire 'sinatra/asset_pipeline'\n\nclass App &lt; Sinatra::Base\n    register Sinatra::Partial\n    configure do\n    set :assets_precompile, %w(app.js app.scss *.png *.jpg *.svg *.eot *.ttf *.woff)\n    set :assets_css_compressor, :sass\n    set :assets_js_compressor, :uglifier\n        register Sinatra::AssetPipeline\n\n        if defined?(RailsAssets)\n      RailsAssets.load_paths.each do |path|\n        settings.sprockets.append_path(path)\n      end\n    end\n  end\n\n  enable :partial_underscores\n    set :partial_template_engine, :erb\n\n  get '/' do\n    erb :app\n  end\n  run! if __FILE__ == $0\nend\n</code></pre>\n\n<p><strong>config.ru</strong>:</p>\n\n<pre><code>require 'rubygems'\nrequire 'bundler'\nBundler.require\nrun App\n</code></pre>\n\n<p><strong>Rakefile</strong>:</p>\n\n<pre><code>require 'sinatra/asset_pipeline/task'\nrequire './app'\n\nSinatra::AssetPipeline::Task.define! App\n</code></pre>\n\n<p><strong>Gemfile</strong>:</p>\n\n<pre><code>source \"https://rubygems.org\"\nruby \"2.2.3\"\n\ngem 'bundler', '~&gt; 1.10.6'\n\ngem 'sinatra', require: 'sinatra/base'\ngem 'sinatra-asset-pipeline', require: 'sinatra/asset_pipeline'\n\ngem 'thin', '~&gt; 1.6.4'\n\ngem 'sass', '~&gt; 3.4.18'\n\ngem 'coffee-script', '~&gt; 2.4.1'\n\ngem 'uglifier', '~&gt; 2.7.2'\n\ngem 'rack-coffee', '~&gt; 1.0.3'\n\ngem 'sinatra-partial'\n\nsource 'https://rails-assets.org' do\n  gem 'rails-assets-jquery'\n  gem 'rails-assets-bootstrap-sass'\nend\n</code></pre>\n\n<p>I hope someone can help, as I really don't know what to do. I'm normally used to rails, where the asset-pipeline already exists and takes care of everything. I'm forcing myself to make this webapp with sinatra, though, so that I can really understand what actually happens when you \"automagically\" create things with rails.</p>\n\n<p>Here is a link to a screenshot of the error output in my browser: <a href=\"http://puu.sh/ktUIA/1d8396b034.png\" rel=\"nofollow\">http://puu.sh/ktUIA/1d8396b034.png</a></p>\n"}, {"tags": ["ruby", "rubygems", "will-paginate"], "comments": [{"owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "edited": false, "score": 0, "creation_date": 1443645901, "post_id": 32874818, "comment_id": 53581989, "body": "so that is the code for your controller, what does the code in your view look like? also, have you debugged to see what the value of user is?"}], "answers": [{"tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 0, "last_activity_date": 1443712890, "creation_date": 1443712890, "answer_id": 32891260, "question_id": 32874818, "link": "https://stackoverflow.com/questions/32874818/ruby-2-1-and-mislav-will-paginate-2-3-10-shows-error-nomethoderror-undefined-m/32891260#32891260", "title": "Ruby 2.1 and mislav-will_paginate 2.3.10 shows ERROR: NoMethodError: undefined method `paginate&#39;", "body": "<p>Most likely <code>paginate</code> is a dataset method, not a class method (this is true for Sequel's pagination extension, not sure about will_paginate). If you want <code>User.paginate</code> to work:</p>\n\n<pre><code>def User.paginate(*args)\n  dataset.paginate(*args)\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5394800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36482b20bbec91c49e48ae1db320d594?s=128&d=identicon&r=PG&f=1", "display_name": "bgDanielle", "link": "https://stackoverflow.com/users/5394800/bgdanielle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 32891260, "answer_count": 1, "score": 0, "last_activity_date": 1443712890, "creation_date": 1443644124, "last_edit_date": 1443645120, "question_id": 32874818, "link": "https://stackoverflow.com/questions/32874818/ruby-2-1-and-mislav-will-paginate-2-3-10-shows-error-nomethoderror-undefined-m", "title": "Ruby 2.1 and mislav-will_paginate 2.3.10 shows ERROR: NoMethodError: undefined method `paginate&#39;", "body": "<p>Does anyone know what I'm doing wrong here, I installed Ruby 2.1, Sequel-4.26.0 gem and mislav-will_paginate-2.3.10 gem, but when i try to use the paginate function, i keep getting the following error:</p>\n\n<p><strong>Code:</strong></p>\n\n<p>@user = User.paginate(:page => 1, :per_page => 2)</p>\n\n<p><strong>Error message:</strong></p>\n\n<p>\"ERROR: NoMethodError: undefined method `paginate' for #\"</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "nokogiri", "libxml2"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443722483, "post_id": 32874786, "comment_id": 53617300, "body": "<code>&#47;usr&#47;local&#47;Cellar</code> doesn&#39;t exist on a vanilla Mac OS system. Perhaps you used Homebrew?"}], "tags": [], "owner": {"reputation": 300, "user_id": 3826285, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/lRpcN.png?s=128&g=1", "display_name": "StormyKnight", "link": "https://stackoverflow.com/users/3826285/stormyknight"}, "is_accepted": false, "score": 0, "last_activity_date": 1443643985, "creation_date": 1443643985, "answer_id": 32874786, "question_id": 32874785, "link": "https://stackoverflow.com/questions/32874785/install-of-nokogiri-fails-though-libxml2-was-installed/32874786#32874786", "title": "Install of Nokogiri fails though libxml2 was installed", "body": "<ol>\n<li>Move to <code>/usr/local/Cellar/libxml2/2.9.2/lib</code>.</li>\n<li>Run the file called <code>xml2Conf.sh</code>.</li>\n<li>Run <code>gem install nokogiri -- --use-system-libraries</code>.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 300, "user_id": 3826285, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/lRpcN.png?s=128&g=1", "display_name": "StormyKnight", "link": "https://stackoverflow.com/users/3826285/stormyknight"}, "edited": false, "score": 0, "creation_date": 1443755990, "post_id": 32893992, "comment_id": 53628811, "body": "That&#39;s in my history, so apparently I tried it at some point. I don&#39;t remember what the output from it said."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 300, "user_id": 3826285, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/lRpcN.png?s=128&g=1", "display_name": "StormyKnight", "link": "https://stackoverflow.com/users/3826285/stormyknight"}, "edited": false, "score": 0, "creation_date": 1443804573, "post_id": 32893992, "comment_id": 53651936, "body": "Often your best/fastest path to an answer of this sort, is to take it to the IRC channel associated with that particular piece of code. The people who specialize in that particular subject tend to hang out there. From the documentation: <code>The IRC channel is #nokogiri on freenode.</code> IRC works well because, similar to chat here, it allows questions and answers, however on IRC it&#39;s obvious the subject is Nokogiri."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1443804652, "last_edit_date": 1495540311, "creation_date": 1443722449, "answer_id": 32893992, "question_id": 32874785, "link": "https://stackoverflow.com/questions/32874785/install-of-nokogiri-fails-though-libxml2-was-installed/32893992#32893992", "title": "Install of Nokogiri fails though libxml2 was installed", "body": "<p>Have you tried the Nokogiri <a href=\"http://www.nokogiri.org/tutorials/installing_nokogiri.html#mac_os_x\" rel=\"nofollow noreferrer\">Mac OS installation notes</a>?</p>\n\n<blockquote>\n  <p>\u201cI\u2019m on a fresh Yosemite installation.\u201d</p>\n  \n  <p>Team Nokogiri has reproduced an issue with brand-spanking-new Yosemite installations, which can be corrected by running:</p>\n\n<pre><code>gem update --system\n</code></pre>\n</blockquote>\n\n<p>There's also \"<a href=\"https://stackoverflow.com/q/6277456/128421\">Nokogiri installation fails -libxml2 is missing</a>\" and \"<a href=\"https://stackoverflow.com/q/29206849/128421\">Install Nokogiri on Yosemite 10.10.3</a>\".</p>\n"}], "owner": {"reputation": 300, "user_id": 3826285, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/lRpcN.png?s=128&g=1", "display_name": "StormyKnight", "link": "https://stackoverflow.com/users/3826285/stormyknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443804652, "creation_date": 1443643985, "last_edit_date": 1443755834, "question_id": 32874785, "link": "https://stackoverflow.com/questions/32874785/install-of-nokogiri-fails-though-libxml2-was-installed", "title": "Install of Nokogiri fails though libxml2 was installed", "body": "<p><code>gem install nokogiri</code> fails with <code>libxml2 is missing</code>.</p>\n\n<p>Details of the message show:</p>\n\n<pre><code>checking for xmlParseDoc() in libxml/parser.h... no\nchecking for xmlParseDoc() in -lxml2... no\nchecking for xmlParseDoc() in -llibxml2... no\n</code></pre>\n\n<p>This is in spite of the fact that I've confirmed the installation of libxml2.</p>\n\n<p>All efforts at passing the library's location using the command line flag have failed.</p>\n\n<p>I'm running:</p>\n\n<ul>\n<li>Ruby 2.2.0p0 (2014-12-25 revision 49005) [x86_64-darwin14]</li>\n<li>Mac Yosemite</li>\n<li>Installed with homebrew</li>\n</ul>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-4", "public-activity"], "comments": [{"owner": {"reputation": 2133, "user_id": 3820185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XZmR.jpg?s=128&g=1", "display_name": "wiesion", "link": "https://stackoverflow.com/users/3820185/wiesion"}, "edited": false, "score": 1, "creation_date": 1443644077, "post_id": 32874670, "comment_id": 53581114, "body": "At first glance, it looks like you should write a migration file which adds <code>activities</code> to the already existing posts. See <a href=\"http://www.rubydoc.info/gems/public_activity/PublicActivity/Common:create_activity\" rel=\"nofollow noreferrer\">rubydoc.info/gems/public_activity/PublicActivity/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 16822, "user_id": 560073, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-A_vJq0ilPI8/AAAAAAAAAAI/AAAAAAAAAJI/dKesA-ExUzA/photo.jpg?sz=128", "display_name": "Linus Oleander", "link": "https://stackoverflow.com/users/560073/linus-oleander"}, "is_accepted": false, "score": 1, "last_activity_date": 1451961636, "creation_date": 1451961636, "answer_id": 34603356, "question_id": 32874670, "link": "https://stackoverflow.com/questions/32874670/rails-gem-public-activity-for-earlier-posts/34603356#34603356", "title": "Rails gem - Public Activity for earlier posts", "body": "<p>You've to create the old activities manually using <code>create_activity</code> method. I created a rake task for this.</p>\n\n<pre><code>task public_activity_migration: :environment do\n  User.find_each do |user|\n    [:comments, :friends].each do |relation|\n      user.send(relation).find_each do |obj|\n        obj.create_activity :create, owner: user, created_at: obj.created_at\n        print \".\"\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>The code above will create activities for the comment and friend model. If  you're not using <a href=\"https://github.com/rails/strong_parameters\" rel=\"nofollow\">strong params</a> you also need to allow the <code>created_at</code> attribute to be set on the <code>PublicActivity::Activity</code> model. This can be done by adding the following code before running your task.</p>\n\n<pre><code>class PublicActivity::Activity\n  attr_accessible :created_at\nend\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4854499, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fd7566b0e36cf19aef6b5a8493af481e?s=128&d=identicon&r=PG&f=1", "display_name": "phenomenon", "link": "https://stackoverflow.com/users/4854499/phenomenon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1451961636, "creation_date": 1443643514, "question_id": 32874670, "link": "https://stackoverflow.com/questions/32874670/rails-gem-public-activity-for-earlier-posts", "title": "Rails gem - Public Activity for earlier posts", "body": "<p>The gem does not recognize earlier post which were created before the gem was added.\nIt only started working, when fresh posts were created. Why was that?</p>\n\n<p>And, how to have those earlier posts get covered by <code>public_activity</code></p>\n\n<p>Thanks.<br>\n<em>Gem setup according to author site.</em></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "railstutorial.org"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5005151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9HGPY.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5005151/john"}, "edited": false, "score": 0, "creation_date": 1443650009, "post_id": 32874852, "comment_id": 53583812, "body": "Jason, I understand your answer, can you clarify the        @@ -1 +1,40 @@ aspect of the error message.  I get that its telling me there is discrepancy in the output  but I&#39;m not grasping  what -1, +1, 40 means&gt; Is it trivial or something that will be helpful to know in the future?"}, {"owner": {"reputation": 2553, "user_id": 4443890, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2601f3b9ff36beb56eaa3ddee2a3f6e9?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4443890/jason"}, "reply_to_user": {"reputation": 37, "user_id": 5005151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9HGPY.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5005151/john"}, "edited": false, "score": 0, "creation_date": 1443653259, "post_id": 32874852, "comment_id": 53584837, "body": "I&#39;m not sure, but I think the <code>40</code> refers to the number of lines in the actual output and one of those <code>1</code>&#39;s refers to the number of lines in the expected output. You don&#39;t have 40 lines in the error message that you posted, but it seems like some lines are missing. Where are the <code>&lt;html&gt;</code> and <code>&lt;body&gt;</code> tags?"}, {"owner": {"reputation": 2553, "user_id": 4443890, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2601f3b9ff36beb56eaa3ddee2a3f6e9?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4443890/jason"}, "reply_to_user": {"reputation": 37, "user_id": 5005151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9HGPY.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5005151/john"}, "edited": false, "score": 0, "creation_date": 1443659509, "post_id": 32874852, "comment_id": 53586429, "body": "@JohnMayo I found <a href=\"http://unix.stackexchange.com/questions/81998/understaning-of-diff-output\">this</a>. Apparently it&#39;s the unified diff format."}, {"owner": {"reputation": 37, "user_id": 5005151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9HGPY.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5005151/john"}, "edited": false, "score": 0, "creation_date": 1443665031, "post_id": 32874852, "comment_id": 53587600, "body": "@ Jason, I edited out the &lt;html&gt; and &lt;body&gt; tags and part of the test output b/c I figured it would be irrelevant, thought better of it and [wrongly] thought I put all relevant test output back.  Thanks again!"}], "tags": [], "owner": {"reputation": 2553, "user_id": 4443890, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2601f3b9ff36beb56eaa3ddee2a3f6e9?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4443890/jason"}, "is_accepted": true, "score": 0, "last_activity_date": 1443644253, "creation_date": 1443644253, "answer_id": 32874852, "question_id": 32874565, "link": "https://stackoverflow.com/questions/32874565/rails-test-password-reset-failure-expected-actual-1-1-40/32874852#32874852", "title": "Rails test password reset failure --- expected +++ actual @@ -1 +1,40 @@", "body": "<p>The last line of your <code>password_reset</code> test should be</p>\n\n<pre><code>assert_match CGI::escape(user.email), mail.body.encoded\n</code></pre>\n\n<p>instead of <code>assert_equal</code>.</p>\n\n<p>That line is supposed to be looking for the email address in the body, not checking to see if the email address is equal to the entire body.</p>\n"}], "owner": {"reputation": 37, "user_id": 5005151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9HGPY.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5005151/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 32874852, "answer_count": 1, "score": 2, "last_activity_date": 1443644253, "creation_date": 1443643073, "last_edit_date": 1495541653, "question_id": 32874565, "link": "https://stackoverflow.com/questions/32874565/rails-test-password-reset-failure-expected-actual-1-1-40", "title": "Rails test password reset failure --- expected +++ actual @@ -1 +1,40 @@", "body": "<p>I'm completely new to Ruby on Rails.  I have a failing password_reset_test ( Hartls' Ruby on Rails tutorial 10.48).To date I have:</p>\n\n<p>1) compared my code to the source code in github</p>\n\n<p>2) read documentation about mini-test reporters here: <a href=\"http://docs.seattlerb.org/minitest/Minitest/Assertions.html\" rel=\"nofollow noreferrer\">http://docs.seattlerb.org/minitest/Minitest/Assertions.html</a></p>\n\n<p>3) compared my problem to similar issues I found here on stackoverflow: <a href=\"https://stackoverflow.com/questions/31799519/password-reset-test-failing-in-m-hartls-ruby-on-rails-tutorial-3rd-edition-c\">Password Reset Test failing in M.Hartl&#39;s Ruby on Rails Tutorial (3rd edition), Chapter 10 (10.54)</a></p>\n\n<p>4) inserted byebug to see if I could understand where it's going wrong</p>\n\n<p>Here is the failed test</p>\n\n<pre><code> FAIL[\"test_password_reset\", UserMailerTest, 2015-09-12      04:04:59 +0000]\n test_password_reset#UserMailerTest (1442030699.96s)\n     --- expected\n    +++ actual\n    @@ -1 +1,40 @@\n    -\"michael%40example.com\"\n    +\"\\r\n    +----==_mimepart_560b45e51fccd_2eb1adb3302011d\\r\n    +Content-Type: text/plain;\\r\n    + charset=UTF-8\\r\n    +Content-Transfer-Encoding: 7bit\\\n    +\\r\n    +\\r\n    +\\r\n    +To reset your password click on the link below:\\r\n    +\\r\n    +http://example.com/password_resets/wAd2d-u4_dQlm4kdlhzRWA/edit?email=michael%40example.com\\r\n    +\\r\n    +This link will expire in two hours.\\r\n    +\\r\n    +If you did not request your password to be reset, please ignore this email and your password will stay as it is.\\r\n    +\\r\n    +----==_mimepart_560b45e51fccd_2eb1adb3302011d\\r\n    +Content-Type: text/html;\\r\n    + charset=UTF-8\\r\n    +Content-Transfer-Encoding: 7bit\\r\n    +\\r        \n    +&lt;a href=\\\"http://example.com/password_resets/wAd2d-u4_dQlm4kdlhzRWA/edit?email=michael%40example.com\\\"&gt;Reset password&lt;/a&gt;\\r\n    +\\r\n    +&lt;/p&gt;This link will expire in two hours.&lt;/p&gt;\\r\n    +\\r\n    +&lt;p&gt;\\r\n    +  If you did not request your password to be reset, please ignore this email and your password will stay as it is.\\r\n    +&lt;/p&gt;\\r\n    +\\r\n    +  &lt;/body&gt;\\r\n    +&lt;/html&gt;\\r\n    +\\r\n    +----==_mimepart_560b45e51fccd_2eb1adb3302011d--\\r\n    +\"\n    test/mailers/user_mailer_test.rb:24:in `block in &lt;class:UserMailerTest&gt;'\n</code></pre>\n\n<p>Here is user_mailer_test.rb:</p>\n\n<pre><code>class UserMailerTest &lt; ActionMailer::TestCase\n\n  test \"password_reset\" do\n    user = users(:michael)\n    user.reset_token = User.new_token\n    mail = UserMailer.password_reset(user)\n    assert_equal \"Password reset\", mail.subject\n    assert_equal [user.email], mail.to\n    assert_equal [\"noreply@example.com\"], mail.from\n    assert_match user.reset_token,        mail.body.encoded\n    assert_equal CGI::escape(user.email), mail.body.encoded\n  end\n</code></pre>\n\n<p>Here is user_mailer.rb </p>\n\n<pre><code>class UserMailer &lt; ApplicationMailer\n  def password_reset(user)\n    @user = user\n    mail to: user.email, subject: \"Password reset\"\n  end\n</code></pre>\n\n<p>And this is from the models/user.rb</p>\n\n<pre><code>    # Sets the password reset attributes\n    def create_reset_digest\n       self.reset_token = User.new_token\n       update_attribute(:reset_digest, User.digest(reset_token))\n       update_attribute(:reset_sent_at, Time.zone.now)\n    end\n\n    # Sends password reset email.\n    def send_password_reset_email\n        UserMailer.password_reset(self).deliver_now\n    end\n</code></pre>\n\n<p>Up to this point I've been find out what the error messages mean. Thanks in advance , this noobie greatly appreciates your time and help!</p>\n"}, {"tags": ["ruby", "hash", "push-back"], "comments": [{"owner": {"reputation": 507, "user_id": 1262164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/603992781533eb1746d44fb50d5d13b1?s=128&d=identicon&r=PG", "display_name": "Ahmed Fathy", "link": "https://stackoverflow.com/users/1262164/ahmed-fathy"}, "edited": false, "score": 0, "creation_date": 1443642979, "post_id": 32874517, "comment_id": 53580608, "body": "I can&#39;t really see how that&#39;s a hash. Where are the keys and the values?"}, {"owner": {"reputation": 143, "user_id": 4835916, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/7ad65ac8d7cb329eefd0fd5a74f6376e?s=128&d=identicon&r=PG&f=1", "display_name": "Rails Rails", "link": "https://stackoverflow.com/users/4835916/rails-rails"}, "reply_to_user": {"reputation": 507, "user_id": 1262164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/603992781533eb1746d44fb50d5d13b1?s=128&d=identicon&r=PG", "display_name": "Ahmed Fathy", "link": "https://stackoverflow.com/users/1262164/ahmed-fathy"}, "edited": false, "score": 0, "creation_date": 1443643084, "post_id": 32874517, "comment_id": 53580645, "body": "The keys are implicit. I need them as I&#39;m going to iterate using an <code>each</code>"}, {"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 1, "creation_date": 1443643232, "post_id": 32874517, "comment_id": 53580699, "body": "I think you just want nested arrays... <code>[[1111, 4, 20]] &lt;&lt; [3333, 2, 70] # [[1111, 4, 20], [3333, 2, 70]]</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1443646557, "post_id": 32874517, "comment_id": 53582333, "body": "<i>&quot;I have a hash as follows: <code>hash = {[1111, 4, 20]}</code>&quot;</i> - there&#39;s no such hash, that gives a syntax error. Please show your actual code."}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 1, "creation_date": 1443649180, "post_id": 32874517, "comment_id": 53583453, "body": "@RailsRails ok, let&#39;s say keys are implicit - at least implicit for us, the nebbish mortals :) but what about the second array? do you want to append this array to the implicit key&#39;s value array, or  as any other explicit-but-implicit key&#39;s value?"}], "answers": [{"tags": [], "owner": {"reputation": 507, "user_id": 1262164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/603992781533eb1746d44fb50d5d13b1?s=128&d=identicon&r=PG", "display_name": "Ahmed Fathy", "link": "https://stackoverflow.com/users/1262164/ahmed-fathy"}, "is_accepted": false, "score": 1, "last_activity_date": 1443643266, "creation_date": 1443643266, "answer_id": 32874609, "question_id": 32874517, "link": "https://stackoverflow.com/questions/32874517/how-to-push-an-array-into-a-hash-in-ruby/32874609#32874609", "title": "How to push an array into a hash in ruby", "body": "<p>What you're trying to have here is not a Hash. It's an Array of arrays.\nThe syntax you wrote is not a valid Ruby syntax.</p>\n\n<p>To add an item to an Array use <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-3C-3C\" rel=\"nofollow\" title=\"&lt;&lt;\">&lt;&lt;</a>.</p>\n\n<p>For example:</p>\n\n<pre><code>array = [[1111, 4, 20]]\n</code></pre>\n\n<p>To add an item you do:</p>\n\n<pre><code>array &lt;&lt; [3333, 2, 70]\n</code></pre>\n\n<p>your array would be:</p>\n\n<pre><code>[[1111, 4, 20], [3333, 2, 70]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 764, "user_id": 846138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0d3d3b1f3b9dbf8d87e6e4fab79358?s=128&d=identicon&r=PG", "display_name": "grimsock", "link": "https://stackoverflow.com/users/846138/grimsock"}, "is_accepted": false, "score": 1, "last_activity_date": 1444341760, "last_edit_date": 1444341760, "creation_date": 1443643438, "answer_id": 32874657, "question_id": 32874517, "link": "https://stackoverflow.com/questions/32874517/how-to-push-an-array-into-a-hash-in-ruby/32874657#32874657", "title": "How to push an array into a hash in ruby", "body": "<p>It won't work. You probably want store those arrays in another array like this:</p>\n\n<pre><code>a = [[1111, 4, 20]]\na &lt;&lt; [3333, 2, 70]\n=&gt; [[1111, 4, 20], [3333, 2, 70]]\n</code></pre>\n\n<p>Is that what you were looking for?</p>\n\n<p>\"A Hash is a dictionary-like collection of unique keys and their values. Also called associative arrays, they are similar to Arrays, but where an Array uses integers as its index, a Hash allows you to use any object type.\"</p>\n\n<p>Please read more about ruby arrays and hashes:\n<a href=\"http://ruby-doc.org/core-2.2.0/Array.html\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Array.html</a>\n<a href=\"http://ruby-doc.org/core-2.2.0/Hash.html\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Hash.html</a></p>\n"}], "owner": {"reputation": 143, "user_id": 4835916, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/7ad65ac8d7cb329eefd0fd5a74f6376e?s=128&d=identicon&r=PG&f=1", "display_name": "Rails Rails", "link": "https://stackoverflow.com/users/4835916/rails-rails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2543, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1444341760, "creation_date": 1443642890, "question_id": 32874517, "link": "https://stackoverflow.com/questions/32874517/how-to-push-an-array-into-a-hash-in-ruby", "title": "How to push an array into a hash in ruby", "body": "<p>I didn't find in the internet something that answers specifically my question.</p>\n\n<p>I have a hash as follows:</p>\n\n<pre><code>hash = {[1111, 4, 20]}\n</code></pre>\n\n<p>And i want to push another array (<code>[3333, 2, 70]</code>) to that hash to get something like: </p>\n\n<pre><code>hash = {[1111, 4, 20], [3333, 2, 70]}\n</code></pre>\n\n<p>How can achieve this ?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "unit-testing", "integration-testing", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 21877, "user_id": 131227, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/60e3c03e227b84e2898c29fd711cae5b?s=128&d=identicon&r=PG", "display_name": "z5h", "link": "https://stackoverflow.com/users/131227/z5h"}, "edited": false, "score": 1, "creation_date": 1443655596, "post_id": 32875244, "comment_id": 53585489, "body": "I&#39;m not testing sidekiq. My code does <code>a=f(x); Worker.perform_async(a); y(a)</code>. I can&#39;t run that code in a test environment with any data that causes the task to fail. Happy to discuss on github and create a pull request if you think it makes sense. If not, it&#39;s your project and I thank you for the work."}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "reply_to_user": {"reputation": 21877, "user_id": 131227, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/60e3c03e227b84e2898c29fd711cae5b?s=128&d=identicon&r=PG", "display_name": "z5h", "link": "https://stackoverflow.com/users/131227/z5h"}, "edited": false, "score": 1, "creation_date": 1443656904, "post_id": 32875244, "comment_id": 53585833, "body": "That&#39;s because you are running <code>inline</code>.  Use <code>fake</code> mode for that test. <a href=\"https://github.com/mperham/sidekiq/wiki/Testing\" rel=\"nofollow noreferrer\">github.com/mperham/sidekiq/wiki/Testing</a>"}, {"owner": {"reputation": 9248, "user_id": 109561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33233d5bae5b1c8d8053dfa3b4e18267?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/109561/gerry"}, "edited": false, "score": 10, "creation_date": 1501055192, "post_id": 32875244, "comment_id": 77603052, "body": "@MikePerham along the same vein. Without retries in testing, how would you do an end to end test that has a external endpoint where timeouts must be retried until success. The success leads to other actions. This is not testing Sidekiq, but retries are part of the successful flow which would work outside of the testing environment. You could just test that Sidekiq is sent the right info, but then it wouldn&#39;t be an end to end test."}, {"owner": {"reputation": 8220, "user_id": 2771889, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c568088e59a0fe4e38016d2707f48fb4?s=128&d=identicon&r=PG&f=1", "display_name": "thisismydesign", "link": "https://stackoverflow.com/users/2771889/thisismydesign"}, "edited": false, "score": 0, "creation_date": 1557134713, "post_id": 32875244, "comment_id": 98650743, "body": "There&#39;re multiple ways to define custom error handling with sidekiq which is definitely your code that you want to test."}], "tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": true, "score": 7, "last_activity_date": 1443645675, "creation_date": 1443645675, "answer_id": 32875244, "question_id": 32874510, "link": "https://stackoverflow.com/questions/32874510/how-can-i-test-sidekiq-job-failures/32875244#32875244", "title": "How can I test Sidekiq job failures?", "body": "<p>It's designed to be hard because you shouldn't do it.  You should not be testing Sidekiq functionality.  Test your own code, not features provided by other libraries/frameworks.</p>\n"}], "owner": {"reputation": 21877, "user_id": 131227, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/60e3c03e227b84e2898c29fd711cae5b?s=128&d=identicon&r=PG", "display_name": "z5h", "link": "https://stackoverflow.com/users/131227/z5h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3417, "favorite_count": 0, "accepted_answer_id": 32875244, "answer_count": 1, "score": 8, "last_activity_date": 1443645675, "creation_date": 1443642875, "question_id": 32874510, "link": "https://stackoverflow.com/questions/32874510/how-can-i-test-sidekiq-job-failures", "title": "How can I test Sidekiq job failures?", "body": "<p>A job in sidekiq, upon exception, will be put on the retry queue.</p>\n\n<p>Because of that, and because the task is run asynchronously,  <code>MyWorker.perform_async(...)</code> can never throw an exception generated in the task code.</p>\n\n<p>In testing, however, an exception that occurs in the task does not cause the task to be put in the retry queue. The exception bubbles up out of <code>perform_async</code>. </p>\n\n<p>So what happens in tests is something that cannot possible occur when running the code.</p>\n\n<p>What, then, is the best way to test code that triggers jobs that can fail and be put on the retry queue?</p>\n\n<p>Note that the following seems to have no effect in testing:<br>\n<code>Sidekiq.default_worker_options = { :retry =&gt; true}</code></p>\n"}, {"tags": ["ruby", "vagrantfile"], "comments": [{"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 0, "creation_date": 1443642887, "post_id": 32874423, "comment_id": 53580573, "body": "I think you can use something like: <code>http_proxy = ENV[&#39;env_http_proxy&#39;] || ENV[&#39;http_proxy&#39;] || nil</code>"}], "answers": [{"tags": [], "owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "is_accepted": true, "score": 3, "last_activity_date": 1443644431, "last_edit_date": 1443644431, "creation_date": 1443644069, "answer_id": 32874802, "question_id": 32874423, "link": "https://stackoverflow.com/questions/32874423/ruby-check-if-either-of-two-variables-exist/32874802#32874802", "title": "ruby - check if either of two variables exist", "body": "<pre><code>t = ENV['env_http_proxy'] || ENV['http_proxy']\n</code></pre>\n\n<p>As a general rule, don't use <code>defined?</code> for anything.  It's a metaprogramming primitive intended for implementing something occasionally called <em>magic</em><sup>1.</sup>.</p>\n\n<p>The <code>e1 ? e2 : e3</code> operator works just like C, testing expression e1 and then taking the value of e2 or e3.  It's not used as much in Ruby as in other languages.</p>\n\n<p>Since ENV is a hash-like object, it will return <code>nil</code> when no key exists, and one of the zillion awesome features of Ruby is the way the <code>||</code> operator returns the value of the true expression.\n<hr>\n<sup>1. <em>Magic</em>: noun, see: <a href=\"https://en.wikipedia.org/wiki/Ruby_on_Rails\" rel=\"nofollow\">Ruby on Rails.</a></sup></p>\n"}], "owner": {"reputation": 2863, "user_id": 1675384, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f1954353e8bf19f1ce9a7ac1cfd32ca8?s=128&d=identicon&r=PG", "display_name": "Anshu Prateek", "link": "https://stackoverflow.com/users/1675384/anshu-prateek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 978, "favorite_count": 0, "accepted_answer_id": 32874802, "answer_count": 1, "score": 0, "last_activity_date": 1443644431, "creation_date": 1443642474, "question_id": 32874423, "link": "https://stackoverflow.com/questions/32874423/ruby-check-if-either-of-two-variables-exist", "title": "ruby - check if either of two variables exist", "body": "<p>I need to check if either of two environment variables env_http_proxy or http_proxy are set. If either is set, assign the value to a local variable. If neither of them exist, then the local variable should be set to nil.</p>\n\n<pre><code>http_proxy = defined?(ENV['env_http_proxy']) ? ENV['env_http_proxy'] : defined?(ENV['http_proxy']) ? ENV['http_proxy'] : nil\n</code></pre>\n\n<p>Whats wrong with this? this seem to work for the first variable but not for the second variable.\n(PS: If it matters, I am trying to use this in a Vagrantfile)</p>\n\n<p>Also, can someone please explain the above syntax. I am ruby noob. A quick search only showed the <a href=\"http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-defined-3F\" rel=\"nofollow\">defined?()</a> function. But  not the above extended syntax.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2678, "user_id": 2483138, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1320d18fa8806488f96baad70b29ce4c?s=128&d=identicon&r=PG", "display_name": "ABMagil", "link": "https://stackoverflow.com/users/2483138/abmagil"}, "edited": false, "score": 0, "creation_date": 1443643652, "post_id": 32874354, "comment_id": 53580894, "body": "Can you add some details about what your <i>specific</i> problem is?  For instance, your code that builds the excel file, the output and what you&#39;re expecting?"}], "answers": [{"comments": [{"owner": {"reputation": 118524, "user_id": 3146, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/acc637690f49e2b5a2146deb17874d6f?s=128&d=identicon&r=PG", "display_name": "1800 INFORMATION", "link": "https://stackoverflow.com/users/3146/1800-information"}, "edited": false, "score": 0, "creation_date": 1443643642, "post_id": 32874619, "comment_id": 53580887, "body": "Welcome to StackOverflow! Please edit your answer to provide some context on how this code example should be used, and how it will help to solve the problem."}, {"owner": {"reputation": 118524, "user_id": 3146, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/acc637690f49e2b5a2146deb17874d6f?s=128&d=identicon&r=PG", "display_name": "1800 INFORMATION", "link": "https://stackoverflow.com/users/3146/1800-information"}, "edited": false, "score": 0, "creation_date": 1443644431, "post_id": 32874619, "comment_id": 53581288, "body": "Hi @fgc29, in that case, you should write what you just wrote as an edit to your question, instead of as a comment answer. You can always edit your own questions to do so."}], "tags": [], "owner": {"reputation": 36, "user_id": 4096171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e22ce7ef2baa9f41c2a1e028d4a89cf?s=128&d=identicon&r=PG&f=1", "display_name": "fgc29", "link": "https://stackoverflow.com/users/4096171/fgc29"}, "is_accepted": true, "score": 2, "last_activity_date": 1443644614, "last_edit_date": 1443644614, "creation_date": 1443643299, "answer_id": 32874619, "question_id": 32874354, "link": "https://stackoverflow.com/questions/32874354/rails-to-excel-with-associations/32874619#32874619", "title": "Rails to excel with associations", "body": "<pre><code># install in a gem file or in the terminal to test\n# gem install spreadsheet\n\n\nrequire 'spreadsheet'\n\nSpreadsheet.client_encoding = 'UTF-8'\n\nbook = Spreadsheet::Workbook.new\nsheet1 = book.create_worksheet :name =&gt; 'test'\n\nmoney_format = Spreadsheet::Format.new :number_format =&gt; \"#,##0.00 [$\u20ac-407]\"\ndate_format = Spreadsheet::Format.new :number_format =&gt; 'MM.DD.YYYY'\n\n# set default column formats\nsheet1.column(1).default_format = money_format\nsheet1.column(2).default_format = date_format\n\n# depending on your data you obviously have to create a loop that fits  the format of your data\nsheet1.row(0).push \"just text\", 5.98, DateTime.now\n\nbook.write 'sample.xls'\n</code></pre>\n\n<p>The above code example writes the data to columns you create. You can have your info in csv style. So if you're returning objects you can just get values for each object and join the array with ',' separation and loop through.</p>\n"}], "owner": {"reputation": 61, "user_id": 3548398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0f3ba4716d0edfe5e7b8e2b4131c195?s=128&d=identicon&r=PG&f=1", "display_name": "user3548398", "link": "https://stackoverflow.com/users/3548398/user3548398"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 32874619, "answer_count": 1, "score": 0, "last_activity_date": 1443644614, "creation_date": 1443642230, "question_id": 32874354, "link": "https://stackoverflow.com/questions/32874354/rails-to-excel-with-associations", "title": "Rails to excel with associations", "body": "<p>i'am new on rails , i've spent my day looking for solution to export my data into excel file.</p>\n\n<p>I've tryed to_xls, simple_xlxs and other gems, also i've tryed to render xml template , but i've no success.</p>\n\n<p>So i have <strong>associations</strong> between 2 models:</p>\n\n<p>Call model:</p>\n\n<pre><code>class Call &lt; ActiveRecord::Base\n  belongs_to :number\n  has_many :results\nend\n</code></pre>\n\n<p>and my <strong>result</strong> model:</p>\n\n<pre><code>class Result &lt; ActiveRecord::Base\n  belongs_to :call\nend\n</code></pre>\n\n<p>So i need to genrate excel tables with my OWN headers in table calle'd as i want. \nAnd also i wan't that in this excel file will be columns from my associeted model</p>\n\n<p>What can i do?\nThanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "heroku", "push"], "comments": [{"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "edited": false, "score": 0, "creation_date": 1443657034, "post_id": 32874220, "comment_id": 53585870, "body": "Looks like it is still complaining about boostrap files. The step it is failing on is <code>rake assets:precompile</code>. You might be requiring it in your application.js. Make sure that file exists and if it doesn&#39;t, add it or remove the dependency. You can run <code>rake assets:precompile</code> locally to test if it works without doing a full push to heroku."}, {"owner": {"reputation": 31, "user_id": 5386202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7081b2235278c7803f267ce8f249db?s=128&d=identicon&r=PG&f=1", "display_name": "Tyrant Davis", "link": "https://stackoverflow.com/users/5386202/tyrant-davis"}, "reply_to_user": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "edited": false, "score": 0, "creation_date": 1443726225, "post_id": 32874220, "comment_id": 53619229, "body": "Awesome! That helped. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5386202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7081b2235278c7803f267ce8f249db?s=128&d=identicon&r=PG&f=1", "display_name": "Tyrant Davis", "link": "https://stackoverflow.com/users/5386202/tyrant-davis"}, "edited": false, "score": 0, "creation_date": 1443726239, "post_id": 32878019, "comment_id": 53619243, "body": "That did it. Thanks for the help &amp; advice!"}], "tags": [], "owner": {"reputation": 34, "user_id": 4655818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d172695c3471bec15708f4dc09e1524?s=128&d=identicon&r=PG", "display_name": "Brittany Hicks", "link": "https://stackoverflow.com/users/4655818/brittany-hicks"}, "is_accepted": false, "score": 0, "last_activity_date": 1443662288, "creation_date": 1443662288, "answer_id": 32878019, "question_id": 32874220, "link": "https://stackoverflow.com/questions/32874220/heroku-push-several-solutions-failed/32878019#32878019", "title": "Heroku Push- Several solutions failed", "body": "<p>It doesn't seem to be installing bootstap in production. Make sure you have bootstrap included in your Gemfile correctly and not only included in development. </p>\n"}], "owner": {"reputation": 31, "user_id": 5386202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7081b2235278c7803f267ce8f249db?s=128&d=identicon&r=PG&f=1", "display_name": "Tyrant Davis", "link": "https://stackoverflow.com/users/5386202/tyrant-davis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1443670270, "creation_date": 1443641618, "question_id": 32874220, "link": "https://stackoverflow.com/questions/32874220/heroku-push-several-solutions-failed", "title": "Heroku Push- Several solutions failed", "body": "<p>Full disclosure- I am a new to coding. </p>\n\n<p>Initially when I tried the command $ git push heroku master -I received the following error, \"uninitialized constant Devise\". </p>\n\n<p>I moved the gem devise(Gemfile) from (group :development, :test do)  to (group :production do) to no avail. I even tried it moving outside the previously mentioned groups. This was returned as a result: failed to push some refs to '<a href=\"https://git.heroku.com\" rel=\"nofollow\">https://git.heroku.com</a>.</p>\n\n<p>Following that I ran the push commands again and received this error 'FileNotFound: couldn't find file 'bootstrap-sprockets' with type'application/javascript.' I removed the bootstrap-sprockets from your application.js subsequently. That failed also. I moved everything back to its original place and tried to push again and this what returned:</p>\n\n<pre><code>Counting objects: 229, done.\nDelta compression using up to 8 threads.\nCompressing objects: 100% (208/208), done.\nWriting objects: 100% (229/229), 41.31 KiB | 0 bytes/s, done.\nTotal 229 (delta 66), reused 0 (delta 0)\nremote: Compressing source files... done.\nremote: Building source:\nremote: \nremote: -----&gt; Ruby app detected\nremote: -----&gt; Compiling Ruby/Rails\nremote: -----&gt; Using Ruby version: ruby-2.0.0\nremote: -----&gt; Installing dependencies using bundler 1.9.7\nremote:        Running: \n\n    bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deploymen\n    remote:        Fetching gem metadata from https://rubygems.org/...........\n    remote:        Fetching version metadata from https://rubygems.org/...\n    remote:        Fetching dependency metadata from https://rubygems.org/..\n    remote:        Rubygems 2.0.14 is not threadsafe, so your gems must be installed one at a time. Upgrade to Rubygems 2.1.0 or higher to enable parallel gem installation.\nremote:        Installing rake 10.4.2\nremote:        Installing i18n 0.7.0\nremote:        Installing json 1.8.3\nremote:        Installing minitest 5.7.0\nremote:        Installing thread_safe 0.3.5\nremote:        Installing tzinfo 1.2.2\nremote:        Installing activesupport 4.2.1\nremote:        Installing builder 3.2.2\nremote:        Installing erubis 2.7.0\nremote:        Installing mini_portile 0.6.2\nremote:        Installing nokogiri 1.6.6.2\nremote:        Installing rails-deprecated_sanitizer 1.0.3\nremote:        Installing rails-dom-testing 1.0.6\nremote:        Installing loofah 2.0.2\nremote:        Installing rails-html-sanitizer 1.0.2\nremote:        Installing actionview 4.2.1\nremote:        Installing rack 1.6.1\nremote:        Installing rack-test 0.6.3\nremote:        Installing actionpack 4.2.1\nremote:        Installing globalid 0.3.5\nremote:        Installing activejob 4.2.1\nremote:        Installing mime-types 2.6.1\nremote:        Installing mail 2.6.3\nremote:        Installing actionmailer 4.2.1\nremote:        Installing activemodel 4.2.1\nremote:        Installing arel 6.0.0\nremote:        Installing activerecord 4.2.1\nremote:        Installing bcrypt 3.1.10\nremote:        Installing coffee-script-source 1.9.1.1\nremote:        Installing execjs 2.5.2\nremote:        Installing coffee-script 2.4.1\nremote:        Installing thor 0.19.1\nremote:        Installing railties 4.2.1\nremote:        Installing coffee-rails 4.1.0\nremote:        Installing orm_adapter 0.5.0\nremote:        Installing responders 2.1.0\nremote:        Installing warden 1.2.3\nremote:        Installing devise 3.5.2\nremote:        Installing multi_json 1.11.1\nremote:        Installing jbuilder 2.2.16\nremote:        Installing jquery-rails 4.0.3\nremote:        Installing pg 0.17.1\nremote:        Using bundler 1.9.7\nremote:        Installing sprockets 3.2.0\nremote:        Installing sprockets-rails 2.3.1\nremote:        Installing rails 4.2.1\nremote:        Installing rails_serve_static_assets 0.0.4\nremote:        Installing rails_stdout_logging 0.0.4\nremote:        Installing rails_12factor 0.0.2\nremote:        Installing rdoc 4.2.0\nremote:        Installing sass 3.4.14\nremote:        Installing tilt 1.4.1\nremote:        Installing sass-rails 5.0.3\nremote:        Installing sdoc 0.4.1\nremote:        Installing turbolinks 2.5.3\nremote:        Installing uglifier 2.7.1\nremote:        Bundle complete! 16 Gemfile dependencies, 56 gems now installed.\nremote:        Gems in the groups development and test were not installed.\nremote:        Bundled gems are installed into ./vendor/bundle.\nremote:        Post-install message from rdoc:\nremote:        Depending on your version of ruby, you may need to install ruby rdoc/ri data:\nremote:        &lt;= 1.8.6 : unsupported\nremote:        = 1.8.7 : gem install rdoc-data; rdoc-data --install\nremote:        = 1.9.1 : gem install rdoc-data; rdoc-data --install\nremote:        &gt;= 1.9.2 : nothing to do! Yay!\nremote:        Bundle completed (86.26s)\nremote:        Cleaning up the bundler cache.\nremote: -----&gt; Preparing app for Rails asset pipeline\nremote:        Running: rake assets:precompile\nremote:        rake aborted!\nremote:        Sprockets::FileNotFound: couldn't find file 'bootstrap' with type 'application/javascript'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/app/assets/javascripts/application.js:17\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/resolve.rb:64:in `resolve!'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:399:in `resolve'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:207:in `process_require_directive'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:180:in `block in process_directives'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:178:in `each'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:178:in `process_directives'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:83:in `_call'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/directive_processor.rb:68:in `call'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:75:in `call_processor'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:57:in `block in call_processors'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:56:in `reverse_each'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:56:in `call_processors'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:86:in `load_asset_by_uri'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:45:in `block in load'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:155:in `fetch_asset_from_dependency_cache'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:38:in `load'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/cached_environment.rb:20:in `block in initialize'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/cached_environment.rb:47:in `yield'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/cached_environment.rb:47:in `load'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/bundle.rb:23:in `block in call'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/utils.rb:183:in `dfs'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/bundle.rb:24:in `call'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:75:in `call_processor'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:57:in `block in call_processors'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:56:in `reverse_each'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/processor_utils.rb:56:in `call_processors'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:86:in `load_asset_by_uri'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:45:in `block in load'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:155:in `fetch_asset_from_dependency_cache'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/loader.rb:38:in `load'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/cached_environment.rb:20:in `block in initialize'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/cached_environment.rb:47:in `yield'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/cached_environment.rb:47:in `load'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/base.rb:63:in `find_asset'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/base.rb:70:in `find_all_linked_assets'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/manifest.rb:138:in `block in find'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/legacy.rb:114:in `block (2 levels) in logical_paths'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/path_utils.rb:223:in `block in stat_tree'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/path_utils.rb:207:in `block in stat_directory'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/path_utils.rb:204:in `each'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/path_utils.rb:204:in `stat_directory'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/path_utils.rb:222:in `stat_tree'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/legacy.rb:105:in `each'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/legacy.rb:105:in `block in logical_paths'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/legacy.rb:104:in `each'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/legacy.rb:104:in `logical_paths'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/manifest.rb:136:in `find'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/sprockets/manifest.rb:162:in `compile'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-rails-2.3.1/lib/sprockets/rails/task.rb:70:in `block (3 levels) in define'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-3.2.0/lib/rake/sprocketstask.rb:147:in `with_logger'\nremote:        /tmp/build_b8ba7c7f8f9b9d6606dccf954e43d1c0/vendor/bundle/ruby/2.0.0/gems/sprockets-rails-2.3.1/lib/sprockets/rails/task.rb:69:in `block (2 levels) in define'\nremote:        Tasks: TOP =&gt; assets:precompile\nremote:        (See full trace by running task with --trace)\nremote:  !\nremote:  !     Precompiling assets failed.\nremote:  !\nremote: \nremote:  !     Push rejected, failed to compile Ruby app\nremote: \nremote: Verifying deploy....\nremote: \nremote: !       Push rejected to (app_name).\nremote: \nTo https://git.heroku.com/app_name.git\n ! [remote rejected] master -&gt; master (pre-receive hook declined)\nerror: failed to push some refs to 'https://git.heroku.com/app_name.git'\n_________________________________________________________________________\n</code></pre>\n\n<p>I have tried several solutions. I cannot figure it out. Everything was moving along swimmingly. Any idea what I need to do to resolve this issue? App_name is just a replacement for the original name by the way. </p>\n\n<p>Any help is much appreciated. Thanks in advance.</p>\n"}, {"tags": ["android", "ruby", "touch", "calabash-android"], "comments": [{"owner": {"reputation": 15222, "user_id": 3131147, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/HOOno.jpg?s=128&g=1", "display_name": "AdamMc331", "link": "https://stackoverflow.com/users/3131147/adammc331"}, "edited": false, "score": 0, "creation_date": 1443641144, "post_id": 32874090, "comment_id": 53579764, "body": "Have you tried adding the <code>android:autoLink=&quot;web&quot;</code> attribute to your TextView? That way it will highlight any links in there and you can click on them."}, {"owner": {"reputation": 79, "user_id": 4550797, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/9419s.jpg?s=128&g=1", "display_name": "Nir Ortal", "link": "https://stackoverflow.com/users/4550797/nir-ortal"}, "reply_to_user": {"reputation": 15222, "user_id": 3131147, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/HOOno.jpg?s=128&g=1", "display_name": "AdamMc331", "link": "https://stackoverflow.com/users/3131147/adammc331"}, "edited": false, "score": 0, "creation_date": 1443947696, "post_id": 32874090, "comment_id": 53688821, "body": "how can I add that? (new to Ruby :))"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4550797, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/9419s.jpg?s=128&g=1", "display_name": "Nir Ortal", "link": "https://stackoverflow.com/users/4550797/nir-ortal"}, "edited": false, "score": 0, "creation_date": 1443947656, "post_id": 32902175, "comment_id": 53688812, "body": "that&#39;s won&#39;t work - it will try to touch the middle of the sentence and not in the end of the sentence (where is the link located) --- I added &#39;show touches&#39; option to the device and i see that it is trying to touch there. thx!"}, {"owner": {"reputation": 217, "user_id": 5088949, "user_type": "registered", "profile_image": "https://graph.facebook.com/1099408896739989/picture?type=large", "display_name": "Hikaryu", "link": "https://stackoverflow.com/users/5088949/hikaryu"}, "reply_to_user": {"reputation": 79, "user_id": 4550797, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/9419s.jpg?s=128&g=1", "display_name": "Nir Ortal", "link": "https://stackoverflow.com/users/4550797/nir-ortal"}, "edited": false, "score": 0, "creation_date": 1444201956, "post_id": 32902175, "comment_id": 53796711, "body": "np. mate at least i help that much ;)"}, {"owner": {"reputation": 812, "user_id": 951917, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Bogl2.jpg?s=128&g=1", "display_name": "Bulma", "link": "https://stackoverflow.com/users/951917/bulma"}, "reply_to_user": {"reputation": 79, "user_id": 4550797, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/9419s.jpg?s=128&g=1", "display_name": "Nir Ortal", "link": "https://stackoverflow.com/users/4550797/nir-ortal"}, "edited": false, "score": 0, "creation_date": 1444268319, "post_id": 32902175, "comment_id": 53835112, "body": "@NirOrtal How to resolve it ? Can you share me more detail because I&#39;m invest in this case. Thanks !"}, {"owner": {"reputation": 79, "user_id": 4550797, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/9419s.jpg?s=128&g=1", "display_name": "Nir Ortal", "link": "https://stackoverflow.com/users/4550797/nir-ortal"}, "edited": false, "score": 0, "creation_date": 1444284053, "post_id": 32902175, "comment_id": 53839604, "body": "I created a non-elegant solution. I hope it will help-still looking for a different solution and when I find it I will update the thread: First I found the \u2018y\u2019: <code>y = query(\u201c* text:\u2019 to login, press here\u2019\u201d) [0][&#39;rect&#39;][&#39;y&#39;]</code> Then I found the \u2018x\u2019 size of the device: <code>xx = query(\u201c* text:\u2019 to login, press here\u2019\u201d,:width)[0]</code> Now, I know that the link is located around &#188; size of the width from the left: <code>x = xx&#47;4</code> And then I press on it: <code>perform_action(&#39;long_press_coordinate&#39; , x , y)</code> Tried that on 2 different device resolutions: 1080x1920 and 720x1280 and on both of them it works fine. Thank you,"}], "tags": [], "owner": {"reputation": 217, "user_id": 5088949, "user_type": "registered", "profile_image": "https://graph.facebook.com/1099408896739989/picture?type=large", "display_name": "Hikaryu", "link": "https://stackoverflow.com/users/5088949/hikaryu"}, "is_accepted": false, "score": 0, "last_activity_date": 1443769899, "creation_date": 1443769899, "answer_id": 32902175, "question_id": 32874090, "link": "https://stackoverflow.com/questions/32874090/calabash-android-trying-to-touch-a-link-that-part-of-a-sentence/32902175#32902175", "title": "Calabash-android: Trying to &#39;touch&#39; a link that part of a sentence", "body": "<p>Have you tried this ? :  </p>\n\n<pre><code>Then /^I touch the \"([^\\\"]*)\" text$/ do |text|\n      tap_when_element_exists(\"* {text CONTAINS[c] '#{text}'}\")\n    end\n</code></pre>\n\n<p>can you provide me more info in what container it is would like to see what is above and under this. Thank You ;)</p>\n"}], "owner": {"reputation": 79, "user_id": 4550797, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/9419s.jpg?s=128&g=1", "display_name": "Nir Ortal", "link": "https://stackoverflow.com/users/4550797/nir-ortal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450126050, "creation_date": 1443641046, "last_edit_date": 1450126050, "question_id": 32874090, "link": "https://stackoverflow.com/questions/32874090/calabash-android-trying-to-touch-a-link-that-part-of-a-sentence", "title": "Calabash-android: Trying to &#39;touch&#39; a link that part of a sentence", "body": "<p>One of my tests is to press on a link. </p>\n\n<p>The problem is that the link is part of the sentence:\n\u201cto login, press here\u201d (the \u201chere\u201d is the link).</p>\n\n<p>It won\u2019t work if I\u2019m trying to touch the sentence itself. -> <code>touch(query(\u201c* text:\u2019 to login, press here\u2019\u201d))</code></p>\n\n<p>Any idea how can I touch the link only?</p>\n\n<p>Tried to use the x/y positions, but tested it on other Android devices and it won\u2019t work correctly (resolution issue).</p>\n\n<p>The <code>query(\u201c*\u201d)</code> result:</p>\n\n<pre><code>`\"id\" =&gt; nil,\n           \"enabled\" =&gt; true,\n\"contentDescription\" =&gt; nil,\n              \"text\" =&gt; to login, press here\",\n           \"visible\" =&gt; true,\n               \"tag\" =&gt; nil,\n       \"description\" =&gt; \"md5434416eb11d5314a89721b66815c1e97.RichText{52847bcc VFED..CL ......I. 0,805-1080,1014}\",\n             \"class\" =&gt; \"md5434416eb11d5314a89721b66815c1e97.RichText\",\n              \"rect\" =&gt; {\n    \"center_y\" =&gt; 984,\n    \"center_x\" =&gt; 540,\n      \"height\" =&gt; 209,\n           \"y\" =&gt; 880,\n       \"width\" =&gt; 1080,\n           \"x\" =&gt; 0`\n</code></pre>\n\n<p>Your thoughts?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 178, "user_id": 2746942, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/665887422/picture?type=large", "display_name": "davidt", "link": "https://stackoverflow.com/users/2746942/davidt"}, "is_accepted": false, "score": 1, "last_activity_date": 1443720677, "creation_date": 1443720677, "answer_id": 32893455, "question_id": 32873705, "link": "https://stackoverflow.com/questions/32873705/open-uri-alternative-getting-a-response-from-a-website/32893455#32893455", "title": "Open-Uri Alternative - Getting a response from a website", "body": "<p>Turns out the gzip encoding is not accepted by default. Or at least that's what I'm guessing. \nThe following works.</p>\n\n<pre><code>res = open(\"http://demo.imqs.co.za/version\", \"Accept-Encoding\" =&gt; \"plain\").read\n</code></pre>\n\n<p>Interesting how this changed from Ruby 2.0.0+</p>\n"}, {"tags": [], "owner": {"reputation": 178, "user_id": 2746942, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/665887422/picture?type=large", "display_name": "davidt", "link": "https://stackoverflow.com/users/2746942/davidt"}, "is_accepted": false, "score": 1, "last_activity_date": 1444085260, "creation_date": 1444085260, "answer_id": 32959098, "question_id": 32873705, "link": "https://stackoverflow.com/questions/32873705/open-uri-alternative-getting-a-response-from-a-website/32959098#32959098", "title": "Open-Uri Alternative - Getting a response from a website", "body": "<p>Another neat solution for this.</p>\n\n<pre><code>require 'rest-client'\n\nurl = \"http://demo.imqs.co.za/version\"\n\ndef get_response(url)\n  begin\n    return RestClient.get(url, {:accept =&gt; :json})\n  rescue RestClient::GatewayTimeout \n    \"GatewayTimeout\"\n  rescue RestClient::RequestTimeout\n    \"RequestTimeout\"\n  rescue SocketError\n    \"SocketError\"\n  end\nend   \n\np get_response(url)\n\n# =&gt; \"{\\\"buildNumber\\\": 2535, \\\"buildDate\\\": \\\"2015-09-30 17:41:42 +0200\\\", \\\"timestamp\\\": 1444085042 }\"\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 2746942, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/665887422/picture?type=large", "display_name": "davidt", "link": "https://stackoverflow.com/users/2746942/davidt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1019, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444085260, "creation_date": 1443639607, "last_edit_date": 1444084986, "question_id": 32873705, "link": "https://stackoverflow.com/questions/32873705/open-uri-alternative-getting-a-response-from-a-website", "title": "Open-Uri Alternative - Getting a response from a website", "body": "<p>The following code works in Ruby 1.9.3p-551</p>\n\n<pre><code>require \"open-uri\"\n\nres = open(\"http://demo.imqs.co.za/version\").read\n\np res =&gt; {\"buildNumber\": 2496, \"buildDate\": \"2015-09-29 11:18:02 +0200\", \"timestamp\": 1443639212 }\n</code></pre>\n\n<p>In any Ruby version higher than 1.9.3 I get the following error;</p>\n\n<pre><code>from /Users/imac/.rbenv/versions/2.1.0/lib/ruby/2.1.0/net/http/response.rb:357:in `finish': incorrect header check (Zlib::DataError)\n</code></pre>\n\n<p>I need to use a higher version as this will be used in a Rails 4 app.\nAny ideas for alternatives? </p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "forms", "mongodb"], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 1354836, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f15b618f82d71e9bf1e1e8edb7424d6c?s=128&d=identicon&r=PG", "display_name": "Gcap", "link": "https://stackoverflow.com/users/1354836/gcap"}, "edited": false, "score": 0, "creation_date": 1443656258, "post_id": 32873790, "comment_id": 53585666, "body": "thanks! it&#39;s only one word so I didn&#39;t see the need for an underscore?"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "reply_to_user": {"reputation": 370, "user_id": 1354836, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f15b618f82d71e9bf1e1e8edb7424d6c?s=128&d=identicon&r=PG", "display_name": "Gcap", "link": "https://stackoverflow.com/users/1354836/gcap"}, "edited": false, "score": 0, "creation_date": 1443656526, "post_id": 32873790, "comment_id": 53585737, "body": "@Gcap - yes, no underscore, but it shouldn&#39;t start with capital letter."}], "tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": true, "score": 0, "last_activity_date": 1443639933, "creation_date": 1443639933, "answer_id": 32873790, "question_id": 32873669, "link": "https://stackoverflow.com/questions/32873669/ruby-on-rails-display-array-in-text-field-with-semicolon-delimeters/32873790#32873790", "title": "ruby on rails - display array in text_field with semicolon delimeters", "body": "<p>Try</p>\n\n<pre><code>&lt;%= f.text_field :Tags, value: f.object.Tags.join('; ') %&gt;\n</code></pre>\n\n<p>BTW, converntion in ruby is to write variables and methods names in underscore notation.</p>\n"}], "owner": {"reputation": 370, "user_id": 1354836, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f15b618f82d71e9bf1e1e8edb7424d6c?s=128&d=identicon&r=PG", "display_name": "Gcap", "link": "https://stackoverflow.com/users/1354836/gcap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "accepted_answer_id": 32873790, "answer_count": 1, "score": 1, "last_activity_date": 1443639933, "creation_date": 1443639486, "question_id": 32873669, "link": "https://stackoverflow.com/questions/32873669/ruby-on-rails-display-array-in-text-field-with-semicolon-delimeters", "title": "ruby on rails - display array in text_field with semicolon delimeters", "body": "<p>I have a ruby on rails form that displays values of an array stored in a mongodb document. <br>\nIn my _form.html.erb file:\n<code>&lt;%=f.text_field :Tags%&gt;</code>. This displays the tags array in the text field separated by spaces. <br>\nFor example in my tags array I have: <strong>[\"Recon\",\"Scanning\",\"Network\"]</strong>. But in the text field on the web page it is displayed as <strong>\"Recon Scanning Network\"</strong>.\n<em>I want it to display on the web page as <strong>\"Recon; Scannnig; Network\"</em></strong> because I have a method in my model to split the input by semicolon: <br></p>\n\n<pre><code>def Tags=(values)\n  values = values.split(\";\")\n  write_attribute(:Tags, values.reject(&amp;:blank?))\nend\n</code></pre>\n\n<p>With it being displayed with just spaces, it doesn't save back to the database properly. It'll save the array as [\"Recon Scanning Network\"] instead :\\ </p>\n\n<p>So the question is, how can I get my arrays to display in a <code>text_field</code> seperated by semicolons?</p>\n"}, {"tags": ["ruby", "selenium"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 3, "creation_date": 1443636710, "post_id": 32872948, "comment_id": 53577507, "body": "run_tests is instance method, and will call itself and hence create an infinite loop, can you move it outside of class?"}, {"owner": {"reputation": 39, "user_id": 5049723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/829057babec4294d1d72360d23e7cd0d?s=128&d=identicon&r=PG&f=1", "display_name": "cody short", "link": "https://stackoverflow.com/users/5049723/cody-short"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1443636975, "post_id": 32872948, "comment_id": 53577662, "body": "Ah.. i should have thought of that! potentially.. Could I perhaps remove run_tests from the list, or I could also place it in the constructor. Actually, the class constructor doesn&#39;t work. I can look into doing it outside of the class, but would love to know how to remove a method!"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443637467, "post_id": 32872948, "comment_id": 53577917, "body": "Use <code>reject</code> to skip the method name? Write a <code>next if</code> in the <code>each</code> block that senses the method name? It&#39;s a simple loop and the normal methods of ignoring something will work."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443638108, "post_id": 32872948, "comment_id": 53578241, "body": "<code>(klass.instance_methods(false)-[:run_tests]).each...</code> seems easiest. Another way would be to make <code>run_tests</code> <code>private</code> and invoke it with <code>FadTest.send(:run_tests)</code>, as <a href=\"http://ruby-doc.org/core-2.2.0/Module.html#method-i-instance_methods\" rel=\"nofollow noreferrer\">Module#instance_methods</a> only returns public and protected methods."}], "answers": [{"tags": [], "owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "is_accepted": false, "score": 0, "last_activity_date": 1445271010, "last_edit_date": 1495541671, "creation_date": 1445271010, "answer_id": 33219150, "question_id": 32872948, "link": "https://stackoverflow.com/questions/32872948/how-to-invoke-all-instance-methods-of-a-class-in-ruby/33219150#33219150", "title": "How to invoke all instance methods of a class in Ruby?", "body": "<p><a href=\"https://stackoverflow.com/questions/32872948/how-do-i-call-all-instance-methods-in-ruby#comment53577507_32872948\">As mentioned by Wand Maker</a>, <code>run_tests</code> involves recursion. Your code is being executed in the following manner:</p>\n\n<ol>\n<li>Find the class of some object</li>\n<li>Call <code>SomeClass.instance_methods.each {}</code></li>\n<li>Once you reach <code>run_tests</code>, you start the iteration over again.</li>\n<li>Infinite loop -- you never reach the remaining instance methods.</li>\n</ol>\n\n<p>I am not sure how you have designed your tests, so here are a few options to solve the problem</p>\n\n<p>If all tested objects have the class <code>FadTest</code>, you can edit the logic within the iteration, my preferred solution is <a href=\"https://stackoverflow.com/questions/32872948/how-do-i-call-all-instance-methods-in-ruby#comment53577917_32872948\">what the Tin Man suggested</a></p>\n\n<pre><code>klass.instance_methods(false).each do |method|\n  next if method == :run_tests\n  # ...\nend\n</code></pre>\n\n<p>Only problem is that you are still scanning the <code>:run_tests</code> element. If you want to remain full proof and not have <code>:run_tests</code> in the array, you can try <a href=\"https://stackoverflow.com/questions/32872948/how-do-i-call-all-instance-methods-in-ruby#comment53578241_32872948\">what Cary Swoveland suggested</a>:</p>\n\n<pre><code>(klass.instance_methods(false) - [:run_tests]).each {}\n</code></pre>\n\n<p>If the class of the tested object <em>is not</em> <code>FadTest</code>, then I would suggest a rewrite of the method.</p>\n\n<pre><code>def self.run_tests(object)\n  klass = object.class\n  klass.instance_methods(false).each {}\nend\n\nFadTest.run_tests(some_object)\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5049723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/829057babec4294d1d72360d23e7cd0d?s=128&d=identicon&r=PG&f=1", "display_name": "cody short", "link": "https://stackoverflow.com/users/5049723/cody-short"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445271082, "creation_date": 1443636611, "last_edit_date": 1445271082, "question_id": 32872948, "link": "https://stackoverflow.com/questions/32872948/how-to-invoke-all-instance-methods-of-a-class-in-ruby", "title": "How to invoke all instance methods of a class in Ruby?", "body": "<p>I'm currently working on throwing together my own little test method runner script.</p>\n\n<p>I need some way to call all of the methods in a class. When I invoke the <code>run_tests</code> method, my program is stuck in an infinite loop. What is causing this and what are some solutions?</p>\n\n<pre><code>class FadTest &lt; SeleniumTest\n  def can_open_page\n    @driver.get(@base_url + \"/\")\n    wait_element_present(:link, \"DOCTORS\")\n    @driver.find_element(:link, \"DOCTORS\").click\n    puts \"page opened\"\n  end\n\n  def test_method\n    puts \"it works\"\n  end\n\n  def run_tests\n    klass = self.class\n    klass.instance_methods(false).each do |method|\n      klass.instance_method(method).bind(self).call\n    end\n  end \nend\n</code></pre>\n"}, {"tags": ["ruby", "oop", "functional-programming"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1443639684, "post_id": 32872790, "comment_id": 53579095, "body": "I don&#39;t understand how any of the methods you showed could conceivably mutate the class. There must be something else going on you&#39;re not showing us. Also, what do you mean by &quot;old class&quot; and &quot;new class&quot;? I can only see one class here, <code>ConnectFour</code>."}, {"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1443640071, "post_id": 32872790, "comment_id": 53579281, "body": "@J&#246;rgWMittag added a significant method, probably my terminology was not precise as when I said class, I really meant a variable containing a particular instance of the class"}, {"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 0, "creation_date": 1443640274, "post_id": 32872790, "comment_id": 53579361, "body": "Please can share the constructor method of <code>ConnectFour</code>? I&#39;m pretty sure there is the issue, Don&#39;t send <code>@board</code> instead send <code>@board.clone</code> or <code>@board.dup</code>"}, {"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "reply_to_user": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 0, "creation_date": 1443640409, "post_id": 32872790, "comment_id": 53579424, "body": "@Aguardientico added, thanks for your effort even if my question is incomplete :D"}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1443637314, "last_edit_date": 1443637314, "creation_date": 1443636894, "answer_id": 32873015, "question_id": 32872790, "link": "https://stackoverflow.com/questions/32872790/copy-a-class-so-that-the-old-class-is-not-modified-when-i-modify-the-new-one-in/32873015#32873015", "title": "Copy a class so that the old class is not modified when I modify the new one in Ruby", "body": "<p>You could make a deep copy of the class:</p>\n\n<pre><code>new_class = Marshal.load(Marshal.dump(ConnectFour))\n</code></pre>\n\n<p>and go from there (<code>dummy = new_class.new(@board)</code>, etc.).</p>\n"}, {"comments": [{"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "edited": false, "score": 0, "creation_date": 1443640707, "post_id": 32873971, "comment_id": 53579561, "body": "Thanks a lot, so the problem was that <code>@board</code> was really shared by all COnnectFour instances?"}, {"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "edited": false, "score": 0, "creation_date": 1443640770, "post_id": 32873971, "comment_id": 53579587, "body": "Wait a second I think I still got the problem, I thank you very much anyway"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1443640892, "post_id": 32873971, "comment_id": 53579648, "body": "This will only duplicate the <code>@board</code> array, not the arrays contained within the <code>@board</code> array. The <i>real</i> problem is that Ruby is an object-oriented language, not an array-of-arrays-of-integers-oriented language, so you should really use a <code>Board</code> object for your board, not an array-of-arrays-of-integers."}, {"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1443640968, "post_id": 32873971, "comment_id": 53579684, "body": "@J&#246;rgWMittag I understand that the problem is more deep than it seemed, the lack of support that Ruby shows comes from my non-compliance to OO"}, {"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 0, "creation_date": 1443641795, "post_id": 32873971, "comment_id": 53580083, "body": "it looks like rails has a <code>deep_dup</code> method <a href=\"http://apidock.com/rails/v4.0.2/Array/deep_dup\" rel=\"nofollow noreferrer\">apidock.com/rails/v4.0.2/Array/deep_dup</a>  updating the answer"}], "tags": [], "owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "is_accepted": true, "score": 1, "last_activity_date": 1443641849, "last_edit_date": 1443641849, "creation_date": 1443640653, "answer_id": 32873971, "question_id": 32872790, "link": "https://stackoverflow.com/questions/32872790/copy-a-class-so-that-the-old-class-is-not-modified-when-i-modify-the-new-one-in/32873971#32873971", "title": "Copy a class so that the old class is not modified when I modify the new one in Ruby", "body": "<p>I think it is related to the current status of @board, if you change your <code>ConnectFour#initialize</code> to looks like following I think it should be work</p>\n\n<pre><code>def initialize(board)\n  @board = board.dup\nend\n</code></pre>\n\n<p>If you are using rails you can use <code>deep_dup</code></p>\n\n<pre><code>def initialize(board)\n  @board = board.deep_dup\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "reply_to_user": {"reputation": 3605, "user_id": 1454048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GlhDH.jpg?s=128&g=1", "display_name": "admdrew", "link": "https://stackoverflow.com/users/1454048/admdrew"}, "edited": false, "score": 0, "creation_date": 1443642370, "post_id": 32874117, "comment_id": 53580339, "body": "@admdrew I am talking to myself in second person to make the post more readable for future visitors"}, {"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "edited": false, "score": 1, "creation_date": 1443642610, "post_id": 32874117, "comment_id": 53580449, "body": "@admdrew first person now."}], "tags": [], "owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "is_accepted": false, "score": 1, "last_activity_date": 1443642593, "last_edit_date": 1443642593, "creation_date": 1443641162, "answer_id": 32874117, "question_id": 32872790, "link": "https://stackoverflow.com/questions/32872790/copy-a-class-so-that-the-old-class-is-not-modified-when-i-modify-the-new-one-in/32874117#32874117", "title": "Copy a class so that the old class is not modified when I modify the new one in Ruby", "body": "<p>A hack to solve my problem is:</p>\n\n<pre><code>def initialize(board)\n  @board = board.map(&amp;:dup)\nend\n</code></pre>\n\n<p>But as @J\u00f6rgWMittag noted I should really make my code more OO to fit with Ruby style and this workaround will not be needed anymore.</p>\n"}], "owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 32873971, "answer_count": 3, "score": -1, "last_activity_date": 1443642593, "creation_date": 1443635999, "last_edit_date": 1443640379, "question_id": 32872790, "link": "https://stackoverflow.com/questions/32872790/copy-a-class-so-that-the-old-class-is-not-modified-when-i-modify-the-new-one-in", "title": "Copy a class so that the old class is not modified when I modify the new one in Ruby", "body": "<p>I have some a <code>ConnectFour</code> class and I have a method:</p>\n\n<pre><code>def apply_move!(column_number, symbol, row_number = 0)\n  # Some gravity logic\n  @board[row_number][column_number] = symbol\nend\n</code></pre>\n\n<p>That modifies the class in place.</p>\n\n<p>I tried writing a wrapper around it that returns a board and does not change the original, so that Function Programming techniques could be used.</p>\n\n<p>My attempt is:</p>\n\n<pre><code>def apply_move(column_number, symbol)\n  dummy = ConnectFour.new(@board)\n  dummy.apply_move!(column_number, symbol)\n  dummy\nend\n</code></pre>\n\n<p>But the trouble is that modifying <code>dummy</code> also modifies the original class itself! How could I modify <code>dummy</code> and <code>dummy</code> only?</p>\n\n<p><strong>More code and context</strong></p>\n\n<p>You probably are interested in:</p>\n\n<pre><code>class CpuWinIfPossible &lt; Player\n  def decide_move(board)\n    (0...6).find do |move|\n      board.apply_move(move, self.symbol).is_won?(self.symbol)\n    end || (0...6).to_a.sample\n  end\nend\n</code></pre>\n\n<p>Here I loop and execute <code>apply_move</code> to my board, as you can see from my definition above, <code>apply_move</code> should not change the board, but the board shows 7 (+ 1) moves after this code is run: it looks like this:</p>\n\n<pre><code>Player X: Where would you like to play (Number from 1 to 7) ? \n2\n\n\n\n\n O   O \nOXOOOO \nThe winner is O\n</code></pre>\n\n<p><strong>The constructor</strong></p>\n\n<pre><code>class ConnectFour\n  attr_accessor :board\n\n\n  def initialize(board)\n    @board = board\n  end\n</code></pre>\n"}, {"tags": ["ruby", "file", "dir"], "comments": [{"owner": {"reputation": 45, "user_id": 3275083, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/wE43v.jpg?s=128&g=1", "display_name": "User_28", "link": "https://stackoverflow.com/users/3275083/user-28"}, "edited": false, "score": 0, "creation_date": 1443636881, "post_id": 32872665, "comment_id": 53577607, "body": "Don&#39;t give me down vote.. If ppl know d mistake means help it. Without knowing or understanding or knowing the answer how can u down vote?  leave ppl to post their questions to find answers"}, {"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "edited": false, "score": 2, "creation_date": 1443637066, "post_id": 32872665, "comment_id": 53577710, "body": "Please execute the code, and see if it works, if it does not, give a precise error message or explain why the observed behaviour is wrong"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 1, "creation_date": 1443637181, "post_id": 32872665, "comment_id": 53577768, "body": "<code>File.write(&quot;#{Dir.pwd}&#47;#{gets}&quot;, &#39;How this is working?&#39;)</code>. I&#39;ll let you figure it out how this is working. Probably you should look at <a href=\"http://ruby-doc.org/core/classes/File.html\" rel=\"nofollow noreferrer\">File class</a> and its parent <a href=\"http://www.ruby-doc.org/core-1.9.3/IO.html\" rel=\"nofollow noreferrer\">IO class</a>. After that consider it homework and change it to serve your purposes. Regards"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443637837, "post_id": 32872665, "comment_id": 53578115, "body": "Don&#39;t beg people to not give down votes. Instead, make sure you&#39;ve asked a well thought-out question. You <i>could</i> have tested your code in IRB to figure out whether it was valid, or simply run it and Ruby will tell you when you try to run it. Those are the very first things you should do, and when you&#39;ve read the documentation and exhausted your resources, THEN show what you&#39;ve tried and say why it didn&#39;t work and we&#39;ll be glad to help."}, {"owner": {"reputation": 45, "user_id": 3275083, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/wE43v.jpg?s=128&g=1", "display_name": "User_28", "link": "https://stackoverflow.com/users/3275083/user-28"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443932601, "post_id": 32872665, "comment_id": 53685984, "body": "@the Tin Man I&#39;m not begging here..thanks for your info"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443638147, "post_id": 32873090, "comment_id": 53578256, "body": "Rather than assign <code>open</code> to a variable then later <code>close</code> it, use the block form of <code>open</code>."}], "tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": true, "score": 3, "last_activity_date": 1443638104, "last_edit_date": 1443638104, "creation_date": 1443637173, "answer_id": 32873090, "question_id": 32872665, "link": "https://stackoverflow.com/questions/32872665/how-to-write-a-file-in-specific-path-in-ruby/32873090#32873090", "title": "How to write a file in specific path in ruby", "body": "<p>Your code has multiple errors. Have you ever tried to execute the script?</p>\n\n<p>Your script ends with:</p>\n\n<pre><code>test.rb:7: unknown regexp options - fldr\ntest.rb:7: syntax error, unexpected end-of-input\n    F = open.(Dir.pwd, /data/folder /#{@file_name },w+)\n</code></pre>\n\n<p>First: You need to define the strings with <code>'</code> or <code>\"</code>:</p>\n\n<pre><code>file_name = gets \nF = open.(Dir.pwd, \"/data/folder/#{@file_name}\",\"w+\")\n</code></pre>\n\n<p>Some other errors:</p>\n\n<ul>\n<li>You use <code>file_name</code> and later <code>@file_name</code>. </li>\n<li>The <code>open</code> method belongs to <code>File</code> and needs two parameters.</li>\n<li>The file is defined as a constant <code>F</code>. I would use a variable.</li>\n<li>The path must be concatenated. I'd use <code>File.join</code> for it.</li>\n<li>You don't close the file.</li>\n</ul>\n\n<p>After all these changes you get:</p>\n\n<pre><code>file_name = gets\nf = File.open(File.join(Dir.pwd, \"/data/folder/#{file_name}\"),\"w+\")\n##\nf.close\n</code></pre>\n\n<p>and the error:</p>\n\n<pre><code>  test.rb:29:in `initialize': No such file or directory @ rb_sysopen - C:/Temp/data/folder/sdssd (Errno::ENOENT)\n</code></pre>\n\n<p>The folder must exist, so you must create it first.</p>\n\n<p>Now the script looks like:</p>\n\n<pre><code>require 'fileutils'\ndirname = \"data/folder\"\nfile_name = gets.strip\nFileUtils.mkdir_p(dirname) unless Dir.exists?(dirname)\nf = File.open(File.join(Dir.pwd, dirname, file_name),\"w+\")\n##fill the content\nf.close\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 3275083, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/wE43v.jpg?s=128&g=1", "display_name": "User_28", "link": "https://stackoverflow.com/users/3275083/user-28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5425, "favorite_count": 0, "accepted_answer_id": 32873090, "answer_count": 1, "score": 1, "last_activity_date": 1443638104, "creation_date": 1443635511, "last_edit_date": 1443636570, "question_id": 32872665, "link": "https://stackoverflow.com/questions/32872665/how-to-write-a-file-in-specific-path-in-ruby", "title": "How to write a file in specific path in ruby", "body": "<p>I want to save my files in specific path.. \nI have used like this</p>\n\n<pre><code>file_name = gets \nF = open.(Dir.pwd, /data/folder /#{@file_name },w+)\n</code></pre>\n\n<p>I'm not sure whether the above line is correct or not! Where Dir.pwd tell the directory path followed by my folder path and the file name given.</p>\n\n<p>It should get store the value on the specific path with the specific file name given. Can anyone tell me how to do that.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "resque"], "comments": [{"owner": {"reputation": 1634, "user_id": 319297, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tyBYy.png?s=128&g=1", "display_name": "Zahid", "link": "https://stackoverflow.com/users/319297/zahid"}, "edited": false, "score": 0, "creation_date": 1443636602, "post_id": 32872659, "comment_id": 53577449, "body": "What is the code for RegistrationEmails::LeadCreatedFollowupJob?"}, {"owner": {"reputation": 1588, "user_id": 3442951, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/oqtiY.png?s=128&g=1", "display_name": "Will Taylor", "link": "https://stackoverflow.com/users/3442951/will-taylor"}, "reply_to_user": {"reputation": 1634, "user_id": 319297, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tyBYy.png?s=128&g=1", "display_name": "Zahid", "link": "https://stackoverflow.com/users/319297/zahid"}, "edited": false, "score": 0, "creation_date": 1443637631, "post_id": 32872659, "comment_id": 53578012, "body": "Fixed now - the itterative enqueuing was a red herring"}], "owner": {"reputation": 1588, "user_id": 3442951, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/oqtiY.png?s=128&g=1", "display_name": "Will Taylor", "link": "https://stackoverflow.com/users/3442951/will-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443637687, "creation_date": 1443635495, "last_edit_date": 1443637687, "question_id": 32872659, "link": "https://stackoverflow.com/questions/32872659/redis-iteratively-creating-broken-queues-similar-to-failed", "title": "Redis iteratively creating broken queues similar to: [&quot;[[:failed, []], []]&quot;, []]", "body": "<p>\"Fixed\"</p>\n\n<p>The problem 'went away' when I reset my server. Seems like resque stores info on the server until it can put it into redis.</p>\n\n<p>Original Problem:</p>\n\n<p>I'm using Resque with Redis, with Ruby on Rails.</p>\n\n<p>My Redis has gone a bit mad. It's creating many broken queues.</p>\n\n<p>When I click on \"Stats\" I get this error:</p>\n\n<pre><code>RuntimeError at /resque/stats/resque\ncan't add a new key into hash during iteration\n</code></pre>\n\n<p>I've tried <code>redis.flushall</code>, to no effect.</p>\n\n<p>Here's the full list of broken queues: <a href=\"http://snag.gy/a3owG.jpg\" rel=\"nofollow\">http://snag.gy/a3owG.jpg</a></p>\n\n<pre><code>Name    Jobs\n[\"[[:failed, []], []]\", []] 0\n[\"[[[:failed, []], []], []]\", []]   0\n[\"[[[[:failed, []], []], []], []]\", []] 0\n[:failed, []]   0\n[[\"[[:failed, []], []]\", []], []]   0\n[[\"[[[:failed, []], []], []]\", []], []] 0\n[[\"[[[[:failed, []], []], []], []]\", []], []]   0\n[[:failed, []], []] 0\n[[[\"[[:failed, []], []]\", []], []], []] 0\n[[[\"[[[:failed, []], []], []]\", []], []], []]   0\n[[[\"[[[[:failed, []], []], []], []]\", []], []], []] 0\n[[[:failed, []], []], []]   0\n[[[[\"[[:failed, []], []]\", []], []], []], []]   0\n[[[[\"[[[:failed, []], []], []]\", []], []], []], []] 0\n[[[[\"[[[[:failed, []], []], []], []]\", []], []], []], []]   0\n[[[[:failed, []], []], []], []] 0\n[[[[[\"[[:failed, []], []]\", []], []], []], []], []] 0\n[[[[[\"[[[:failed, []], []], []]\", []], []], []], []], []]   0\n[[[[[\"[[[[:failed, []], []], []], []]\", []], []], []], []], []] 0\n[[[[[:failed, []], []], []], []], []]   0\n[[[[[[\"[[:failed, []], []]\", []], []], []], []], []], []]   0\n[[[[[[\"[[[:failed, []], []], []]\", []], []], []], []], []], []] 0\n[[[[[[:failed, []], []], []], []], []], []] 0\n[[[[[[[\"[[:failed, []], []]\", []], []], []], []], []], []], []] 0\n[[[[[[[:failed, []], []], []], []], []], []], []]   0\n[[[[[[[[:failed, []], []], []], []], []], []], []], []] 0\n[[[[[[[[[:failed, []], []], []], []], []], []], []], []], []]   0\nfailed  0\n</code></pre>\n\n<p>Here's the code to create tasks - I believe this might explain the iteration.</p>\n\n<pre><code>class RegistrationEmails::LeadCreatedJob\n  @queue = :slow_emails\n\n  def self.perform(application_id)\n\n    # No check - send it when added\n    application = Application.find_by_id(application_id)\n    if application\n      # Send email\n      LeadMailer.lead_created(application_id).deliver_now\n\n      # Queue second part of campaign\n      Resque.enqueue_in(1.minute, RegistrationEmails::LeadCreatedFollowupJob, application_id)\n    end\n\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1443634525, "post_id": 32872316, "comment_id": 53576396, "body": "Here&#39;s something else for you to mull over: <code>h[:narf]</code> =&gt; <code>{&quot;bar&quot; =&gt; 6}</code>. That&#39;s a hint."}], "answers": [{"tags": [], "owner": {"reputation": 10298, "user_id": 1205299, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/31432723c324f68bc45e86f197c4c1eb?s=128&d=identicon&r=PG", "display_name": "davidrac", "link": "https://stackoverflow.com/users/1205299/davidrac"}, "is_accepted": false, "score": 2, "last_activity_date": 1443634600, "creation_date": 1443634600, "answer_id": 32872424, "question_id": 32872316, "link": "https://stackoverflow.com/questions/32872316/ruby-unexpected-result-from-hash-keys-in-multi-dimensional-hash/32872424#32872424", "title": "Ruby: Unexpected result from Hash.keys in multi-dimensional hash", "body": "<p>The line <code>h.default = {}</code> means that the default value that is returned in case the key is missing is <code>{}</code>. Moreover, it is this particular hash instance that will be returned.</p>\n\n<p>The line <code>h[\"foo\"][\"bar\"] = 6</code> looks for the key <code>foo</code> and when it can't find it, it fetches the default value <code>{}</code> and inserts into it the key <code>bar</code> and value <code>6</code>. The hash is still empty after this.</p>\n\n<p>This is the reason why you see these results.</p>\n\n<p>You may use <a href=\"http://docs.ruby-lang.org/en/2.0.0/Hash.html#method-i-default_proc-3D\" rel=\"nofollow\">default_proc</a> to also set the key.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1443636120, "post_id": 32872452, "comment_id": 53577211, "body": "Consider replacing the third line with <code>g=h[&quot;foo&quot;] #=&gt; {}; g.object_id #=&gt; 70256236167680; g[&quot;bar&quot;]=6  #=&gt; 6; h[&quot;foo&quot;].object_id #=&gt; 70256236167680</code>."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443636311, "post_id": 32872452, "comment_id": 53577304, "body": "@CarySwoveland, which third line?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443636422, "post_id": 32872452, "comment_id": 53577355, "body": "@CarySwoveland, they are about the same size. xd"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1443638708, "post_id": 32872452, "comment_id": 53578588, "body": "Using <code>h.default = {}</code> means all elements of the hash would point to the same object in memory. <code>h[&quot;foo&quot;][&quot;bar&quot;].object_id #=&gt; 13</code> and <code>h[&quot;baz&quot;][&#39;bar&#39;].object_id #=&gt; 13</code>. That&#39;s NOT how you want a hash to behave."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1443639011, "post_id": 32872452, "comment_id": 53578764, "body": "@theTinMan, I know, it was a copy-paste from OP&#39;s question. This is what I did to show that if he accesses another key, he will get the same hash. This was not my recommendation, but the explanation of the problem. The actual solution is the second part of the answer, which is to use the hash constructor with block."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443639290, "post_id": 32872452, "comment_id": 53578903, "body": "@theTinMan, could you read the question and answer once more and reconsider?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443643220, "post_id": 32872452, "comment_id": 53580697, "body": "Your &quot;real answer&quot; is only delaying the inevitable. The problem is that the default for dynamically creating hashes has to take into account how deeply that hash could nest."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1443643876, "post_id": 32872452, "comment_id": 53581010, "body": "@theTinMan, no it isn&#39;t. There is no infinite nesting here. There is only one level of nesting. Did you try my solution in the console? The constructor block is being executed each time a new key is being accessed. There wont be value sharing between different keys."}, {"owner": {"reputation": 1076, "user_id": 3149905, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aaf014fd437ba8b791eaef24adda04d3?s=128&d=identicon&r=PG&f=1", "display_name": "BobDoolittle", "link": "https://stackoverflow.com/users/3149905/bobdoolittle"}, "edited": false, "score": 1, "creation_date": 1443645517, "post_id": 32872452, "comment_id": 53581807, "body": "I have used this answer&#39;s suggested solution and it neatly solved my stated problem. It explained what was wrong with my approach, pointed me to a useful constructor pattern for Hash which can be used to initialize new keys, and gave me a solution for my specific problem. Thanks for an answer which is clear, concise, and illuminating!"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1443635069, "last_edit_date": 1443635069, "creation_date": 1443634707, "answer_id": 32872452, "question_id": 32872316, "link": "https://stackoverflow.com/questions/32872316/ruby-unexpected-result-from-hash-keys-in-multi-dimensional-hash/32872452#32872452", "title": "Ruby: Unexpected result from Hash.keys in multi-dimensional hash", "body": "<p>You just set the default value that will be returned if no value is found. This doesn't change the fact that there is no value assigned to <code>h[\"foo\"]</code>. <code>{\"bar\"=&gt;6}</code> will be the value for any key which is not found.</p>\n\n<pre><code>h = {}\nh.default = {}      # =&gt; {}\nh[\"foo\"][\"bar\"] = 6 # =&gt; 6\nh[\"foo\"]            # =&gt; {\"bar\"=&gt;6}\nh[\"baz\"]            # =&gt; {\"bar\"=&gt;6}\n</code></pre>\n\n<p>If you wanted a hash which returns and sets values of missing keys to empty hashes, you have to do:</p>\n\n<pre><code>h = Hash.new { |hash, key| hash[key] = {} }\nh[\"foo\"][\"bar\"] = 6  # =&gt; 6\nh                    # =&gt; {:foo=&gt;{:bar=&gt;6}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1443643403, "last_edit_date": 1495542143, "creation_date": 1443642506, "answer_id": 32874432, "question_id": 32872316, "link": "https://stackoverflow.com/questions/32872316/ruby-unexpected-result-from-hash-keys-in-multi-dimensional-hash/32874432#32874432", "title": "Ruby: Unexpected result from Hash.keys in multi-dimensional hash", "body": "<p>Meditate on this:</p>\n\n<pre><code>h={} #=&gt; {}\nh['foo'] #=&gt; nil\n</code></pre>\n\n<p>Because <code>['foo']</code> doesn't exist trying to access it results in a nil. That means that trying to access a sub-hash of <code>'foo'</code> would fail:</p>\n\n<pre><code>h['foo']['bar']\n\nNoMethodError: undefined method `[]' for nil:NilClass\n</code></pre>\n\n<p>That'd be the equivalent of using:</p>\n\n<pre><code>nil['bar']\n\nNoMethodError: undefined method `[]' for nil:NilClass\n</code></pre>\n\n<p>We can fix this by defining what <code>h['foo']</code> is:</p>\n\n<pre><code>h['foo'] = {} #=&gt; {}\n</code></pre>\n\n<p>It's defined, so when we request its value we get an empty hash:</p>\n\n<pre><code>h['foo'] #=&gt; {}\n</code></pre>\n\n<p>And now <code>h['foo']['bar']</code> will return something expected, a nil:</p>\n\n<pre><code>h['foo']['bar'] # =&gt; nil\n</code></pre>\n\n<p>And, at that point an assignment to <code>h['foo']['bar']</code> will make sense:</p>\n\n<pre><code>h['foo']['bar'] = 6 \n</code></pre>\n\n<p>And looking at <code>h</code> shows we've got a hash of hashes:</p>\n\n<pre><code>h # =&gt; {\"foo\"=&gt;{\"bar\"=&gt;6}}\n</code></pre>\n\n<p>Using <code>h.default = {}</code> is an attempt to work around the problem of <code>h['foo']</code> returning nil:</p>\n\n<pre><code>h = {}\nh.default = {}\nh # =&gt; {}\nh['foo'] # =&gt; {}\n</code></pre>\n\n<p>And, yes, it does that, but it also introduces a MAJOR problem. We expect hashes to return the value of the key consistently, but <code>h.default = {}</code> has set up a problem. Normally we want a hash to behave like this:</p>\n\n<pre><code>h = {}\nh # =&gt; {}\nh['foo'] = {}\nh['bar'] = {}\nh # =&gt; {\"foo\"=&gt;{}, \"bar\"=&gt;{}}\nh['foo']['baz'] = 1\nh['bar']['baz'] = 2\nh # =&gt; {\"foo\"=&gt;{\"baz\"=&gt;1}, \"bar\"=&gt;{\"baz\"=&gt;2}}\nh['foo'].object_id # =&gt; 70179045516300\nh['bar'].object_id # =&gt; 70179045516280\nh['foo']['baz'].object_id # =&gt; 3\nh['bar']['baz'].object_id # =&gt; 5\n</code></pre>\n\n<p>Using <code>h.default = {}</code> breaks that. We knew <code>h['foo']</code> existed and we'd expect that <code>h['bar']</code> would be non-existent or point to a different key/value pair in memory, but it won't:</p>\n\n<pre><code>h = {}\nh.default = {}\nh # =&gt; {}\nh['foo']['baz'] = 1\nh['bar']['baz'] = 2\nh # =&gt; {}\nh['foo'].object_id # =&gt; 70142994238340\nh['bar'].object_id # =&gt; 70142994238340\nh['foo']['baz'] # =&gt; 2\nh['bar']['baz'] # =&gt; 2\nh['foo']['baz'].object_id # =&gt; 5\nh['bar']['baz'].object_id # =&gt; 5\n</code></pre>\n\n<p>You <em>really</em> don't want that to happen as it's totally alien and unexpected behavior, which would make your code break in weird and wonderful ways, plus make you hated by anyone else maintaining/debugging your code.</p>\n\n<p>The whole problem is the use of <code>h.default = {}</code> because it doesn't mean \"always use a new hash\" it means \"always use this hash\".</p>\n\n<p>Instead, something like this would work and fix the problem:</p>\n\n<pre><code>h = Hash.new{ |hash,key| hash[key] = Hash.new(&amp;hash.default_proc) }\n\nh['foo']['baz'] = 1\nh['bar']['baz'] = 2\nh # =&gt; {\"foo\"=&gt;{\"baz\"=&gt;1}, \"bar\"=&gt;{\"baz\"=&gt;2}}\nh['foo'].object_id # =&gt; 70109399098340\nh['bar'].object_id # =&gt; 70109399098320\nh['foo']['baz'] # =&gt; 1\nh['bar']['baz'] # =&gt; 2\nh['foo']['baz'].object_id # =&gt; 3\nh['bar']['baz'].object_id # =&gt; 5\n</code></pre>\n\n<p>At this point, the hash should behave as expected and nobody would want to hunt you down. There are some gotchas to this solution but it's a better building block. See \"<a href=\"https://stackoverflow.com/q/10253105/128421\">Dynamically creating a multi-dimensional hash in Ruby</a>\" for more information.</p>\n"}], "owner": {"reputation": 1076, "user_id": 3149905, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aaf014fd437ba8b791eaef24adda04d3?s=128&d=identicon&r=PG&f=1", "display_name": "BobDoolittle", "link": "https://stackoverflow.com/users/3149905/bobdoolittle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 32872452, "answer_count": 3, "score": 0, "last_activity_date": 1443643403, "creation_date": 1443634263, "last_edit_date": 1443634581, "question_id": 32872316, "link": "https://stackoverflow.com/questions/32872316/ruby-unexpected-result-from-hash-keys-in-multi-dimensional-hash", "title": "Ruby: Unexpected result from Hash.keys in multi-dimensional hash", "body": "<p>I have the following small sequence, which makes no sense to me:</p>\n\n<pre><code>irb(main):001:0&gt; h = {}\n=&gt; {}\nirb(main):002:0&gt; h.default = {}\n=&gt; {}\nirb(main):003:0&gt; h[\"foo\"][\"bar\"] = 6\n=&gt; 6\nirb(main):004:0&gt; h.length\n=&gt; 0\nirb(main):005:0&gt; h.keys\n=&gt; []\nirb(main):006:0&gt; h[\"foo\"]\n=&gt; {\"bar\"=&gt;6}\n</code></pre>\n\n<p>How is is that step 5 returns an empty list of keys, and step 4 indicates the length of <code>h</code> is <code>0</code>, yet I can see in step 6 that <code>\"foo\"</code> is a valid key and has an associated value. I would expect <code>keys</code> to return <code>[\"foo\"]</code>, and <code>length</code> to return <code>1</code>.</p>\n\n<p>What am I misunderstanding? Note this is Ruby 1.9.3p0</p>\n\n<p>Also note this works correctly:</p>\n\n<pre><code>irb(main):001:0&gt; h = {}\n=&gt; {}\nirb(main):002:0&gt; h[\"foo\"] = {}\n=&gt; {}\nirb(main):003:0&gt; h[\"foo\"][\"bar\"] = 6\n=&gt; 6\nirb(main):004:0&gt; h.length\n=&gt; 1\nirb(main):005:0&gt; h.keys\n=&gt; [\"foo\"]\nirb(main):006:0&gt; h[\"foo\"]\n=&gt; {\"bar\"=&gt;6}\n</code></pre>\n\n<p>The only difference is the use of Hash.default to set the default value and skip the explicit initialization of <code>h[\"foo\"]</code>. Is this a bug?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443634813, "post_id": 32872171, "comment_id": 53576566, "body": "Why do you assume this requires the use of a regular expression?"}], "answers": [{"tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": false, "score": 3, "last_activity_date": 1443633807, "creation_date": 1443633807, "answer_id": 32872191, "question_id": 32872171, "link": "https://stackoverflow.com/questions/32872171/how-in-ruby-delete-all-non-digits-symbols-except-commas-and-dashes/32872191#32872191", "title": "How in ruby delete all non-digits symbols (except commas and dashes)", "body": "<pre><code>[^0-9,-]+\n</code></pre>\n\n<p>This should do it for you.Replace by <code>empty string</code>.See demo.</p>\n\n<p><a href=\"https://regex101.com/r/vV1wW6/44\" rel=\"nofollow\">https://regex101.com/r/vV1wW6/44</a></p>\n"}, {"tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": false, "score": 0, "last_activity_date": 1443634131, "creation_date": 1443634131, "answer_id": 32872278, "question_id": 32872171, "link": "https://stackoverflow.com/questions/32872171/how-in-ruby-delete-all-non-digits-symbols-except-commas-and-dashes/32872278#32872278", "title": "How in ruby delete all non-digits symbols (except commas and dashes)", "body": "<p>Use <a href=\"http://ruby-doc.org/core-2.1.4/String.html#method-i-gsub\" rel=\"nofollow\"><code>String#gsub</code></a> with a pattern that matches everything except what you want to keep, and replace it with the empty string. In a reguar expression, the <a href=\"http://www.regular-expressions.info/charclass.html\" rel=\"nofollow\">negated character class</a> <code>[^whatever]</code> matches everything <em>except</em> the characters in the \"whatever\", so this works:</p>\n\n<pre><code>a_string.gsub /[^0-9,-]/, ''\n</code></pre>\n\n<p>Note that the hyphen has to come last, as otherwise it will be interpreted as a range indicator.</p>\n\n<p>To demonstrate, I put all your \"before\" strings into an Array and used <a href=\"http://ruby-doc.org/core-2.1.4/Enumerable.html#method-i-map\" rel=\"nofollow\"><code>Enumerable#map</code></a> to run the above <code>gsub</code> call on all of them, producing an Array of the \"after\" strings:</p>\n\n<pre><code>[\"!1,2e,3,6..-10\", \"ffff5-10....\", \"1.2,15\"].map { |s| s.gsub /[^0-9,-]/, '' }\n\n# =&gt; [\"1,2,3,6-10\", \"5-10\", \"12,15\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1443634155, "creation_date": 1443634155, "answer_id": 32872282, "question_id": 32872171, "link": "https://stackoverflow.com/questions/32872171/how-in-ruby-delete-all-non-digits-symbols-except-commas-and-dashes/32872282#32872282", "title": "How in ruby delete all non-digits symbols (except commas and dashes)", "body": "<pre><code>\"!1,2e,3,6..-10\".gsub(/[^\\d,-]+/, '') # =&gt; \"1,2,3,6-10\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1443634676, "creation_date": 1443634676, "answer_id": 32872444, "question_id": 32872171, "link": "https://stackoverflow.com/questions/32872171/how-in-ruby-delete-all-non-digits-symbols-except-commas-and-dashes/32872444#32872444", "title": "How in ruby delete all non-digits symbols (except commas and dashes)", "body": "<p>We must have at least one non-regex solution:</p>\n\n<pre><code>def keep_some(str, keepers)\n  str.delete(str.delete(keepers))\nend\n\nkeep_some(\"!1,2e,3,6..-10\", \"0123456789,-\")\n  #=&gt; \"1,2,3,6-10\" \nkeep_some(\"ffff5-10....\", \"0123456789,-\")\n  #=&gt; \"5-10\"\nkeep_some(\"1.2,15\", \"0123456789,-\")\n  #=&gt; \"12,15\"\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 3884510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/186c90d5aec520181c5a25a92c817db1?s=128&d=identicon&r=PG&f=1", "display_name": "Sveredyuk", "link": "https://stackoverflow.com/users/3884510/sveredyuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "accepted_answer_id": 32872282, "answer_count": 4, "score": 1, "last_activity_date": 1443634676, "creation_date": 1443633756, "question_id": 32872171, "link": "https://stackoverflow.com/questions/32872171/how-in-ruby-delete-all-non-digits-symbols-except-commas-and-dashes", "title": "How in ruby delete all non-digits symbols (except commas and dashes)", "body": "<p>I meet some hard task for me. I has a string which need to parse into array and some other elements. I have a troubles with <strong>REGEXP</strong> so wanna ask help.</p>\n\n<p>I need delete from string <em>all non-digits, except commas (,) and dashes (-)</em></p>\n\n<p><strong>For example:</strong></p>\n\n<pre><code>\"!1,2e,3,6..-10\" =&gt; \"1,2,3,6-10\"\n\"ffff5-10....\" =&gt; \"5-10\"\n\"1.2,15\" =&gt; \"12,15\"\n</code></pre>\n\n<p>and so.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rss"], "comments": [{"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 1, "creation_date": 1443630501, "post_id": 32871090, "comment_id": 53574165, "body": "Unless construction.com builds the feed dynamically and gives you the option of limiting it, no."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1443630744, "post_id": 32871090, "comment_id": 53574318, "body": "<code>.xml</code> extension makes me think about this is plain text file, regenerated on the content changes. Besides weird hack with opening raw socket to this server, getting chunks and terminating on superfluous chunk (yeah, just kidding,) there is no way to force remote server to serve a part of the file it has."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443634072, "post_id": 32871090, "comment_id": 53576134, "body": "RSS is XML. It&#39;s valid to use a .xml extension since it&#39;s the content that is important. The .xml is only one part of the name of the resource. And, terminating an XML feed early will only result in corrupted XML."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443634283, "post_id": 32871090, "comment_id": 53576251, "body": "Welcome to Stack Overflow. &quot;Is there a simple way to do this&quot;? On SO we help you fix your code, but we need to see what you&#39;ve tried. What&#39;s in <code>@rss_industry</code>? How are you parsing that structure/object? Typical feeds are a single chunk of all articles and once parsed it&#39;s up to you to extract what you want. So what have you tried?"}], "answers": [{"tags": [], "owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "is_accepted": true, "score": 0, "last_activity_date": 1443639553, "last_edit_date": 1443639553, "creation_date": 1443631593, "answer_id": 32871566, "question_id": 32871090, "link": "https://stackoverflow.com/questions/32871090/limit-an-rss-feed-in-ruby/32871566#32871566", "title": "Limit an RSS Feed in Ruby", "body": "<p>It doesn't look like that's a feature in the <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/rss/rdoc/RSS.html\" rel=\"nofollow\">stdlib RSS::Parser</a> class. </p>\n\n<p>There are other ways to parse RSS. </p>\n\n<p>But there's probably no way to avoid <em>fetching</em> the entire XML file over HTTP, even if you're only interested in the first X items. And you've fetched it, there's probably no great way to avoid <em>parsing</em> the entire XML, even if you only want certain parts of it. There might be <em>some</em> complicated way using a streaming XML parser, but unless the XML file is <em>really</em> huge, you probably don't want to go down there. </p>\n\n<p>Instead, if you are only interested in the first X items in the feed, why not just only look at those?</p>\n\n<pre><code> feed = RSS::Parser.parse('http://construction.com/rss/construction.xml', false)\n\n all_items = feed.items\n first_10_items = feed.items.slice(0, 10)\n</code></pre>\n"}], "owner": {"reputation": 2248, "user_id": 1558132, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8b8f159143056627925a4ed59ff724bb?s=128&d=identicon&r=PG", "display_name": "mack", "link": "https://stackoverflow.com/users/1558132/mack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 32871566, "answer_count": 1, "score": 1, "last_activity_date": 1443639553, "creation_date": 1443630047, "question_id": 32871090, "link": "https://stackoverflow.com/questions/32871090/limit-an-rss-feed-in-ruby", "title": "Limit an RSS Feed in Ruby", "body": "<p>This seems like such a simple thing that it isn't worth a question, but I haven't yet found the answer! I am parsing an RSS feed using </p>\n\n<pre><code>@rss_industry = RSS::Parser.parse('http://construction.com/rss/construction.xml', false)\n</code></pre>\n\n<p>This brings back the entire feed. I simply want to limit the number of items returned. Is there a simple way to do this?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "url", "selenium", "cucumber", "capybara"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3333857"}, "edited": false, "score": 0, "creation_date": 1443629847, "post_id": 32870984, "comment_id": 53573761, "body": "Thanks for the input Tom. I did consider that I was grabbing the URL too quickly so I entered a breakpoint (pry) and gave it plenty of time to wait then manually checked the $session.current_url and it never grabs the correct one. I forgot to mention that this behavior is only in IE. When i run the same code with firefox or chrome browsers everything works fine."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1443630016, "post_id": 32870984, "comment_id": 53573860, "body": "Ah -- sounds like possibly an issue with the iedriverserver then"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1443630551, "post_id": 32870984, "comment_id": 53574210, "body": "<a href=\"https://github.com/angular/protractor/issues/132\" rel=\"nofollow noreferrer\">github.com/angular/protractor/issues/132</a> is people having the same issue but I don&#39;t find a report of it to the selenium/iedriver project"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 1, "last_activity_date": 1443629629, "creation_date": 1443629629, "answer_id": 32870984, "question_id": 32870660, "link": "https://stackoverflow.com/questions/32870660/how-does-capybara-selenium-grab-current-url-issue-with-single-page-site/32870984#32870984", "title": "How does capybara/selenium grab current URL? Issue with single page site", "body": "<p>Capybara grabs the current_url by querying the browser - it doesn't cache it.  The issue you're probably running into is that clicking the link to move to the next page doesn't wait for the page change to happen, so if you call current_url before the page load has happened you'll still get the original url.  There are two solutions for that - 1. use capybara to look for content that doesn't appear until the new page is loaded ( have_content ), 2. use the has_current_path? method which will wait/retry for a period of time until the current_path/url match</p>\n\n<pre><code>$session.has_current_path?('expected path')\n</code></pre>\n\n<p>There are options if you want to match against the full url, and you can use a regex to match as well - <a href=\"http://www.rubydoc.info/gems/capybara/Capybara/SessionMatchers#has_current_path%3F-instance_method\" rel=\"nofollow\">http://www.rubydoc.info/gems/capybara/Capybara/SessionMatchers#has_current_path%3F-instance_method</a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3333857"}, "is_accepted": false, "score": 0, "last_activity_date": 1443710018, "creation_date": 1443710018, "answer_id": 32890230, "question_id": 32870660, "link": "https://stackoverflow.com/questions/32870660/how-does-capybara-selenium-grab-current-url-issue-with-single-page-site/32890230#32890230", "title": "How does capybara/selenium grab current URL? Issue with single page site", "body": "<p>Thanks to Tom Walpole for finding the bug report for this issue. This link sums up the root of the issue and provides a few workarounds if anyone else is encountering this issue. </p>\n\n<p><a href=\"https://github.com/angular/protractor/issues/132\" rel=\"nofollow\">https://github.com/angular/protractor/issues/132</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3333857"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443710018, "creation_date": 1443628698, "last_edit_date": 1443629886, "question_id": 32870660, "link": "https://stackoverflow.com/questions/32870660/how-does-capybara-selenium-grab-current-url-issue-with-single-page-site", "title": "How does capybara/selenium grab current URL? Issue with single page site", "body": "<p>I am using ruby and capybara(which leverages selenium) to automate walking through a website. After navigating to a new page I verify that the new page URL is what i'm expecting. My issue comes when I walk through an order funnel that is a single page but loads different views.</p>\n\n<p>Some code...</p>\n\n<p>I create my session instance then have additional code opening the browser and walking to a certain point in the website that I wont include</p>\n\n<pre><code>$session = Capybara::Session.new(:selenium)\n</code></pre>\n\n<p>My line for checking the browser URL without search params ie: everything after '?'</p>\n\n<pre><code>if url == $session.current_url.to_s.split(\"?\")[0]\n        urlCorrect = true\nend\n</code></pre>\n\n<p>This code works fine when my URL is </p>\n\n<p><a href=\"https://www.homepage.com\" rel=\"nofollow\">https://www.homepage.com</a>  </p>\n\n<p>Then I click on a link that takes me to my order funnel ... <a href=\"https://www.homepage.com/order#/orderpage1?option1=something&amp;option2=somethingelse\" rel=\"nofollow\">https://www.homepage.com/order#/orderpage1?option1=something&amp;option2=somethingelse</a>  </p>\n\n<p>My function still matches the expected URL. But the issue comes when I move to the second page of the order funnel : </p>\n\n<p><a href=\"https://www.homepage.com/order#/orderpage2?option1=something&amp;option2=somethingelse\" rel=\"nofollow\">https://www.homepage.com/order#/orderpage2?option1=something&amp;option2=somethingelse</a> </p>\n\n<p>My capybara code to get current url still returns the URL from orderpage1. Im guessing its because there is no postback when moving from orderpage1 to orderpage2 but i dont know how to force a postback or tell capybara to re-grab the url</p>\n\n<p>Any advice will be appreciated.</p>\n\n<p>Thanks</p>\n\n<p>Quick Edit: I forgot to mention this behavior is only in IE. Chrome and Firefox both work correctly with the exact same code</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 0, "creation_date": 1443630625, "post_id": 32870180, "comment_id": 53574251, "body": "Use an <code>--exclude-pattern</code>: <a href=\"https://www.relishapp.com/rspec/rspec-core/v/3-3/docs/configuration/exclude-pattern\" rel=\"nofollow noreferrer\">relishapp.com/rspec/rspec-core/v/3-3/docs/configuration/&hellip;</a>"}, {"owner": {"reputation": 8371, "user_id": 1094339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cibe3.png?s=128&g=1", "display_name": "Deekor", "link": "https://stackoverflow.com/users/1094339/deekor"}, "reply_to_user": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 0, "creation_date": 1443643207, "post_id": 32870180, "comment_id": 53580693, "body": "@photoionized this worked perfect. Care to post an answer so I can give you credit?"}, {"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 0, "creation_date": 1443643631, "post_id": 32870180, "comment_id": 53580876, "body": "sure, thing, just posted :)"}], "answers": [{"tags": [], "owner": {"reputation": 704, "user_id": 5381965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3cac966fa9d72c6da3e472e1a1dfd3a?s=128&d=identicon&r=PG", "display_name": "Ricardo Emerson", "link": "https://stackoverflow.com/users/5381965/ricardo-emerson"}, "is_accepted": false, "score": 2, "last_activity_date": 1443631941, "last_edit_date": 1443631941, "creation_date": 1443631377, "answer_id": 32871495, "question_id": 32870180, "link": "https://stackoverflow.com/questions/32870180/rspec-run-all-tests-except-a-specific-folder/32871495#32871495", "title": "Rspec run all tests except a specific folder", "body": "<p>Take a look at <a href=\"https://www.relishapp.com/rspec/rspec-core/v/3-3/docs/filtering/exclusion-filters\" rel=\"nofollow\">Exclusion filters</a> in Rspec Project, might help.</p>\n\n<p>You also can run only tests that you want with <a href=\"https://www.relishapp.com/rspec/rspec-core/v/3-3/docs/filtering/inclusion-filters\" rel=\"nofollow\">Inclusion filters</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 1, "creation_date": 1524329462, "post_id": 32874693, "comment_id": 86932319, "body": "FYI, you can also exclude multiple directories (or patterns) by separating them by commas, <code>&quot;spec&#47;foldername1&#47;**&#47;*_spec.rb, spec&#47;foldername2&#47;**&#47;*_spec.rb&quot;</code>"}], "tags": [], "owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "is_accepted": true, "score": 48, "last_activity_date": 1443643607, "creation_date": 1443643607, "answer_id": 32874693, "question_id": 32870180, "link": "https://stackoverflow.com/questions/32870180/rspec-run-all-tests-except-a-specific-folder/32874693#32874693", "title": "Rspec run all tests except a specific folder", "body": "<p>Use an <code>--exclude-pattern</code>, they're quite convenient:</p>\n\n<p><a href=\"https://www.relishapp.com/rspec/rspec-core/v/3-3/docs/configuration/exclude-pattern\">https://www.relishapp.com/rspec/rspec-core/v/3-3/docs/configuration/exclude-pattern</a></p>\n\n<p>One of the nice things about them:</p>\n\n<blockquote>\n  <p>The <code>--exclude-pattern</code> flag accepts shell style glob unions</p>\n</blockquote>\n\n<p>So you could do something like <code>rspec --exclude-pattern \"spec/{foldername1,foldername2}/**/*_spec.rb\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 1750, "user_id": 1332421, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1b1c083cac69b849f641f2362b93c3e5?s=128&d=identicon&r=PG", "display_name": "Kosmonaut", "link": "https://stackoverflow.com/users/1332421/kosmonaut"}, "is_accepted": false, "score": 0, "last_activity_date": 1589344211, "creation_date": 1589344211, "answer_id": 61766471, "question_id": 32870180, "link": "https://stackoverflow.com/questions/32870180/rspec-run-all-tests-except-a-specific-folder/61766471#61766471", "title": "Rspec run all tests except a specific folder", "body": "<p>I know the question is for RSpec, however, I was trying to figure out how to do this with minitest and the --exclude flag only filters on name, not file location.</p>\n\n<p>To do this with file location in minitest you need to add a rake task.</p>\n\n<p>lib/tasks/test.rake</p>\n\n<pre><code># lib/tasks/test.rake\n\nRake::Task[\"test:system\"].clear\n\nnamespace :test do\n  desc \"Run all system tests except test/serial folder\"\n  task system: \"test:prepare\" do\n    $: &lt;&lt; \"test\"\n    test_files = FileList[\"test/system/**/*_test.rb\"].exclude(\n      \"test/system/serial/**/*_test.rb\"\n    )\n    Rails::TestUnit::Runner.run(test_files)\n  end\n\n  desc \"Run all serial test folder\"\n  task serial: \"test:prepare\" do\n    $: &lt;&lt; \"test\"\n    test_files = FileList[\"test/system/serial/*_test.rb\"]\n    Rails::TestUnit::Runner.run(test_files)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 8371, "user_id": 1094339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cibe3.png?s=128&g=1", "display_name": "Deekor", "link": "https://stackoverflow.com/users/1094339/deekor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12619, "favorite_count": 1, "accepted_answer_id": 32874693, "answer_count": 3, "score": 26, "last_activity_date": 1589344211, "creation_date": 1443627273, "question_id": 32870180, "link": "https://stackoverflow.com/questions/32870180/rspec-run-all-tests-except-a-specific-folder", "title": "Rspec run all tests except a specific folder", "body": "<p>The project I'm working on has a fairly large test suite. I am currently writing test that passes when I run it alone but when I run the entire test suite <code>$rspec</code> I get some really funky behavior that causes the test to fail.</p>\n\n<p>Right now the test is nested like this:</p>\n\n<pre><code>spec/folder1/folder2/folder3/test.rb\n</code></pre>\n\n<p>Each of these commands run the test fine and everything passes:</p>\n\n<pre><code>$rspec spec/folder1/folder2/folder3\n$rspec spec/folder1/folder2\n$rspec spec/folder1/\n</code></pre>\n\n<p>There are about 10 other folders at the same level as <code>folder1</code> that I would like to individually not run with the rest of the suite in order to determine which folder contains tests that are breaking the test I am working on.</p>\n\n<p>Is this possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "exception", "zlib"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443627421, "post_id": 32870168, "comment_id": 53572136, "body": "What do you mean, you don&#39;t know the exception? <code>Zlib::BufError</code> is the exception."}, {"owner": {"reputation": 1670, "user_id": 2879095, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55e57925a99ca7e09d2e6e0d232e6734?s=128&d=identicon&r=PG", "display_name": "Arthur", "link": "https://stackoverflow.com/users/2879095/arthur"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443627767, "post_id": 32870168, "comment_id": 53572363, "body": "I have tried rescue Zlib::BufError and it keeps telling me it is an unknown error.  I thought this would too but was getting that unknown error.  I will try again and look into why that could be.  Thanks for the reply."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443627922, "post_id": 32870168, "comment_id": 53572465, "body": "what do you mean, &quot;unknown error&quot;?"}, {"owner": {"reputation": 1670, "user_id": 2879095, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55e57925a99ca7e09d2e6e0d232e6734?s=128&d=identicon&r=PG", "display_name": "Arthur", "link": "https://stackoverflow.com/users/2879095/arthur"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443628034, "post_id": 32870168, "comment_id": 53572528, "body": "I do not have the exact message but it was along the lines of &quot;undefined exception zlib:buferror&quot;  I could have typo&#39;d something.  I have added the begin rescue back in and will see what happens."}, {"owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "edited": false, "score": 0, "creation_date": 1443712721, "post_id": 32870168, "comment_id": 53611987, "body": "There&#39;s something amiss here.  This is a report of a <code>Z_BUF_ERROR</code> being returned by zlib.  What it means is that that particular call of <code>inflate()</code> or <code>deflate()</code> could not make any progress due to not having any input or not having any output space.  This error is not fatal.  You can always continue by providing more input or more output space.  So something should try to keep going and you should not get this error, unless it is being used to indicate something else.  E.g. an incomplete zlib stream being decoded."}, {"owner": {"reputation": 1670, "user_id": 2879095, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55e57925a99ca7e09d2e6e0d232e6734?s=128&d=identicon&r=PG", "display_name": "Arthur", "link": "https://stackoverflow.com/users/2879095/arthur"}, "edited": false, "score": 0, "creation_date": 1443719331, "post_id": 32870168, "comment_id": 53615716, "body": "Yea.  I am pulling JSON from the bing geocode API and every so often it was throwing that error, maybe a time out or not getting all the data, my internet connection is very flaky.  As mentioned before I was trying to rescue the ZLib::BufError but I needed to include zlib for some reason.  Answer below."}], "answers": [{"comments": [{"owner": {"reputation": 1670, "user_id": 2879095, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55e57925a99ca7e09d2e6e0d232e6734?s=128&d=identicon&r=PG", "display_name": "Arthur", "link": "https://stackoverflow.com/users/2879095/arthur"}, "edited": false, "score": 0, "creation_date": 1443631516, "post_id": 32870423, "comment_id": 53574766, "body": "This was it.  Thanks!"}], "tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 1, "last_activity_date": 1443628444, "last_edit_date": 1443628444, "creation_date": 1443627977, "answer_id": 32870423, "question_id": 32870168, "link": "https://stackoverflow.com/questions/32870168/how-can-i-catch-zlibbuferror-in-my-ruby-on-rails-code/32870423#32870423", "title": "How can I catch Zlib::BufError in my Ruby on Rails code?", "body": "<p>To ensure <code>Zlib</code> is available, you need to <code>require 'zlib'</code> in the file where you want to catch the error. It doesn't look like <code>Geocoder</code> has declared that as a dependency itself anywhere, so it may not be loaded when your <code>rescue</code> line is being evaluated.</p>\n\n<pre><code>require 'zlib'\n\nbegin\n  Geocoder.search('110 William St, 28th Floor New York, NY 10038')\nrescue Zlib::BufError =&gt; boom\n  puts 'Stack Overflow appears to have moved.'\nend\n</code></pre>\n"}], "owner": {"reputation": 1670, "user_id": 2879095, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55e57925a99ca7e09d2e6e0d232e6734?s=128&d=identicon&r=PG", "display_name": "Arthur", "link": "https://stackoverflow.com/users/2879095/arthur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 32870423, "answer_count": 1, "score": 0, "last_activity_date": 1443628793, "creation_date": 1443627260, "last_edit_date": 1443628793, "question_id": 32870168, "link": "https://stackoverflow.com/questions/32870168/how-can-i-catch-zlibbuferror-in-my-ruby-on-rails-code", "title": "How can I catch Zlib::BufError in my Ruby on Rails code?", "body": "<p>I have built an app with Rails. I have a large list of addresses which I am standardizing via the Bing/Google API using Geocoder.  This is my current call to get the adddress info:</p>\n\n<pre><code>Geocoder.search(address)\n</code></pre>\n\n<p>This works perfectly fine and I can parse the response JSON. However when I leave the script running it sometimes falls over with the following error:</p>\n\n<pre><code>Zlib::BufError: buffer error\n</code></pre>\n\n<p>Instead of the script falling over I would like to catch this error and continue with the script. How could I do this with Ruby? I am not sure which exception to catch, if any.</p>\n"}, {"tags": ["ruby", "regex", "character-class"], "comments": [{"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1443626216, "post_id": 32869682, "comment_id": 53571307, "body": "What is your expected result?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1443626910, "post_id": 32869682, "comment_id": 53571773, "body": "That&#39;s what it does, return only the first matched result."}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1443632168, "post_id": 32869682, "comment_id": 53575153, "body": "Is this what you want? <a href=\"http://stackoverflow.com/questions/6804557/how-do-i-get-the-match-data-for-all-occurrences-of-a-ruby-regular-expression-in\" title=\"how do i get the match data for all occurrences of a ruby regular expression in\">stackoverflow.com/questions/6804557/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443627047, "post_id": 32869843, "comment_id": 53571863, "body": "<code>#scan</code> won&#39;t return MatchDatas though."}, {"owner": {"reputation": 2159, "user_id": 4898937, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/iwgDT.jpg?s=128&g=1", "display_name": "ciaoben", "link": "https://stackoverflow.com/users/4898937/ciaoben"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443685784, "post_id": 32869843, "comment_id": 53594794, "body": "@SergioTulentsev Is there a <code>scan</code> -like method that returns matchdata?"}, {"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1443686280, "post_id": 32869843, "comment_id": 53595070, "body": "see @jrochkkind comment,  <a href=\"http://stackoverflow.com/questions/6804557/how-do-i-get-the-match-data-for-all-occurrences-of-a-ruby-regular-expression-in\" title=\"how do i get the match data for all occurrences of a ruby regular expression in\">stackoverflow.com/questions/6804557/&hellip;</a>   shows a way to get them as match data"}], "tags": [], "owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "is_accepted": false, "score": 2, "last_activity_date": 1443626340, "creation_date": 1443626340, "answer_id": 32869843, "question_id": 32869682, "link": "https://stackoverflow.com/questions/32869682/why-does-not-return-both-angle-brackets-with-stringmatch/32869843#32869843", "title": "Why does /[&lt;&gt;]/ not return both angle brackets with String#match?", "body": "<p><code>#match</code> only returns the first match as you have seen as MatchData,  <code>#scan</code> will return all matches.  </p>\n\n<pre><code>&gt;&gt; a=\"&lt;1acf457f477b41d4a363e89a1d0a6e57@Open-Xchange&gt;\"\n=&gt; \"&lt;1acf457f477b41d4a363e89a1d0a6e57@Open-Xchange&gt;\"\n&gt;&gt; a.scan /[&lt;&gt;]/\n=&gt; [\"&lt;\", \"&gt;\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1443627268, "post_id": 32870123, "comment_id": 53572039, "body": "I think he understands the pattern just fine (meaning, it&#39;s not The problem here)"}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 1, "last_activity_date": 1443627453, "last_edit_date": 1443627453, "creation_date": 1443627090, "answer_id": 32870123, "question_id": 32869682, "link": "https://stackoverflow.com/questions/32869682/why-does-not-return-both-angle-brackets-with-stringmatch/32870123#32870123", "title": "Why does /[&lt;&gt;]/ not return both angle brackets with String#match?", "body": "<h2>Problem</h2>\n\n<p>You are misunderstanding your expression. <code>/[&lt;&gt;]/</code> means:</p>\n\n<blockquote>\n  <p>Match a single character from the character class, which may be either <code>&lt;</code> or <code>&gt;</code>.</p>\n</blockquote>\n\n<p>Ruby is correctly giving you exactly what you've asked for in your pattern.</p>\n\n<h2>Solution</h2>\n\n<p>If you're expecting the entire string between the two characters, you need a different pattern. For example:</p>\n\n<pre><code>\"&lt;1acf457f477b41d4a363e89a1d0a6e57@Open-Xchange&gt;\".match /&lt;.*?&gt;/\n#=&gt; #&lt;MatchData \"&lt;1acf457f477b41d4a363e89a1d0a6e57@Open-Xchange&gt;\"&gt;\n</code></pre>\n\n<p>Alternatively, if you just want to match all the instances of <code>&lt;</code> or <code>&gt;</code> in your string, then you should use <a href=\"http://ruby-doc.org/core-2.2.3/String.html#method-i-scan\" rel=\"nofollow\">String#scan</a> with a character class or alternation. In this particular case, the results will be identical either way. For example:</p>\n\n<pre><code>\"&lt;1acf457f477b41d4a363e89a1d0a6e57@Open-Xchange&gt;\".scan /&lt;|&gt;/\n#=&gt; [\"&lt;\", \"&gt;\"]\n\n\"&lt;1acf457f477b41d4a363e89a1d0a6e57@Open-Xchange&gt;\".scan /[&lt;&gt;]/\n#=&gt; [\"&lt;\", \"&gt;\"]\n</code></pre>\n"}], "owner": {"reputation": 2159, "user_id": 4898937, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/iwgDT.jpg?s=128&g=1", "display_name": "ciaoben", "link": "https://stackoverflow.com/users/4898937/ciaoben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1443627704, "creation_date": 1443625929, "last_edit_date": 1443627704, "question_id": 32869682, "link": "https://stackoverflow.com/questions/32869682/why-does-not-return-both-angle-brackets-with-stringmatch", "title": "Why does /[&lt;&gt;]/ not return both angle brackets with String#match?", "body": "<p>I expect this example to match the two characters <code>&lt;</code>and <code>&gt;</code>:</p>\n\n<pre><code>a = \"&lt;1acf457f477b41d4a363e89a1d0a6e57@Open-Xchange&gt;\"\na.match /[&lt;&gt;]/\n# =&gt; #&lt;MatchData \"&lt;\"&gt;\n</code></pre>\n\n<p>It matches only the first character. Why?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1428, "user_id": 4156793, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a0abab859fc0ae6541c3f63d7777f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Raaz", "link": "https://stackoverflow.com/users/4156793/raaz"}, "edited": false, "score": 0, "creation_date": 1443624934, "post_id": 32869146, "comment_id": 53570456, "body": "@HarishVed, please read the question again. I know that a constant will be accessible throught the app. But here, the value in the variable is not set until the user inserts a value in a form field and submits it"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443635582, "post_id": 32869146, "comment_id": 53576956, "body": "&quot;the value in the variable is not set until the user inserts a value in a form field and submits it&quot; And what&#39;s the problem? You can&#39;t use it before you know what the user is going to enter, so code needing it can&#39;t be called. If it does try then it sounds like your code has real problems. Once it&#39;s submitted you <i>could</i> set a global variable and use that, but globals are major code smell unless you know why you should use them. Use a database or an instance variable. As is, the question isn&#39;t well defined."}], "answers": [{"comments": [{"owner": {"reputation": 1428, "user_id": 4156793, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a0abab859fc0ae6541c3f63d7777f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Raaz", "link": "https://stackoverflow.com/users/4156793/raaz"}, "edited": false, "score": 0, "creation_date": 1443624830, "post_id": 32869201, "comment_id": 53570389, "body": "yes I know that, but I want a variable that is accessible to the whole app and not just to current block or class."}], "tags": [], "owner": {"reputation": 1353, "user_id": 3255845, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/NlYHy.png?s=128&g=1", "display_name": "luke", "link": "https://stackoverflow.com/users/3255845/luke"}, "is_accepted": false, "score": 0, "last_activity_date": 1443635365, "last_edit_date": 1443635365, "creation_date": 1443624610, "answer_id": 32869201, "question_id": 32869146, "link": "https://stackoverflow.com/questions/32869146/how-do-i-declare-a-variable-that-is-accessible-throughout-the-whole-rails-applic/32869201#32869201", "title": "How do I declare a variable that is accessible throughout the whole Rails application?", "body": "<p><code>title</code> is a local variable. They only exists within its scope, which is the current block.</p>\n\n<p><code>@title</code> is a instance variable, and it is available to all methods within the class.</p>\n\n<p>You can read more in \"<a href=\"http://strugglingwithruby.blogspot.dk/2010/03/variables.html\" rel=\"nofollow\">Struggling With Ruby: Variables</a>\".</p>\n\n<p>In Ruby on Rails, declaring your variables in your controller as instance variables like <code>@title</code> makes them available to your view.</p>\n"}, {"comments": [{"owner": {"reputation": 1428, "user_id": 4156793, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a0abab859fc0ae6541c3f63d7777f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Raaz", "link": "https://stackoverflow.com/users/4156793/raaz"}, "edited": false, "score": 0, "creation_date": 1443625281, "post_id": 32869412, "comment_id": 53570702, "body": "Is there a way without using the database?"}, {"owner": {"reputation": 2659, "user_id": 483133, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NcB9j.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/483133/phil"}, "reply_to_user": {"reputation": 1428, "user_id": 4156793, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a0abab859fc0ae6541c3f63d7777f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Raaz", "link": "https://stackoverflow.com/users/4156793/raaz"}, "edited": false, "score": 2, "creation_date": 1443625679, "post_id": 32869412, "comment_id": 53570963, "body": "If you need persistence, even if the server goes down, then you&#39;ll need to write the value to a file on a file system shared across all servers behind the load balancer if you don&#39;t use a database. Since this is a rails app, I assumed you are already using a database. Are you not? If you are, what is your concern about using the database for persistence? It is what it is designed to do."}, {"owner": {"reputation": 1428, "user_id": 4156793, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a0abab859fc0ae6541c3f63d7777f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Raaz", "link": "https://stackoverflow.com/users/4156793/raaz"}, "edited": false, "score": 0, "creation_date": 1443625872, "post_id": 32869412, "comment_id": 53571085, "body": "Well, after submitting the form , the value is not stored in the database. I was trying to put it in a variable that would be accessible throughout the whole app. But looks like I have to persist it into the database."}, {"owner": {"reputation": 41278, "user_id": 84631, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/181035f8aac1cb68d50dc58b67dc0349?s=128&d=identicon&r=PG", "display_name": "Mischa", "link": "https://stackoverflow.com/users/84631/mischa"}, "edited": false, "score": 2, "creation_date": 1443625893, "post_id": 32869412, "comment_id": 53571098, "body": "You can retrieve it from the database and store it in an instance variable in a <code>before_action</code> in your <code>ApplicationController</code>. Then it&#39;ll be always available in your controllers."}, {"owner": {"reputation": 1428, "user_id": 4156793, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a0abab859fc0ae6541c3f63d7777f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Raaz", "link": "https://stackoverflow.com/users/4156793/raaz"}, "reply_to_user": {"reputation": 41278, "user_id": 84631, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/181035f8aac1cb68d50dc58b67dc0349?s=128&d=identicon&r=PG", "display_name": "Mischa", "link": "https://stackoverflow.com/users/84631/mischa"}, "edited": false, "score": 0, "creation_date": 1443626025, "post_id": 32869412, "comment_id": 53571183, "body": "@Mischa yes, I will do that :)"}], "tags": [], "owner": {"reputation": 2659, "user_id": 483133, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NcB9j.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/483133/phil"}, "is_accepted": true, "score": 5, "last_activity_date": 1443625382, "last_edit_date": 1443625382, "creation_date": 1443625122, "answer_id": 32869412, "question_id": 32869146, "link": "https://stackoverflow.com/questions/32869146/how-do-i-declare-a-variable-that-is-accessible-throughout-the-whole-rails-applic/32869412#32869412", "title": "How do I declare a variable that is accessible throughout the whole Rails application?", "body": "<p>You'll need to persist the value in either the database (using ActiveRecord), or in a shared memcache server (assuming you can accept the variable will be lost if it is pushed out of cache).</p>\n\n<p>You'll just set the database value for example in your controller create action just like any other model.</p>\n\n<p>First, create the model</p>\n\n<pre><code>rails generate model variable_name variable_value\n</code></pre>\n\n<p>To save a value in it from your <code>def create</code> action:</p>\n\n<pre><code>@app_store = AppStore.find_or_initialize_by_name('variable_name')\n@app_store.variable_value = secure_params[:variable_value]\n@app_store.save\n</code></pre>\n\n<p>then retrieve from anywhere in your app with</p>\n\n<pre><code>@app_store = AppStore.find_by_name('variable_name')\nval = @app_store.variable_value\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "is_accepted": false, "score": 1, "last_activity_date": 1443626076, "creation_date": 1443626076, "answer_id": 32869738, "question_id": 32869146, "link": "https://stackoverflow.com/questions/32869146/how-do-i-declare-a-variable-that-is-accessible-throughout-the-whole-rails-applic/32869738#32869738", "title": "How do I declare a variable that is accessible throughout the whole Rails application?", "body": "<p>Sessions aren't neccesarily destroyed by a load balancer -- it depends on your session configuration AND your load balancer configuration/capabilities. But ordinarily sessions should work fine with a load balancer. But session variables <em>are</em> just available to.. that session. Is the value session-specific, or is it really global accross sessions?  </p>\n\n<p>If the latter, I'd just stick it in the database. Even make a new table for GlobalVariables or something, with just name and value. </p>\n\n<p>It's a \"hacky\" solution, but it'll work fine, and is easy to do. </p>\n\n<p>But as I re-read your question... nevermind, I don't think you actually want to do what you asked anyway. There's no reason you should need to create a \"variable that is accessible through the whole rails app\" to solve that problem. You shouldn't need sessions either. I'll let others try to answer your un-asked actual questions. </p>\n"}], "owner": {"reputation": 1428, "user_id": 4156793, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a0abab859fc0ae6541c3f63d7777f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Raaz", "link": "https://stackoverflow.com/users/4156793/raaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "accepted_answer_id": 32869412, "answer_count": 3, "score": 1, "last_activity_date": 1443635365, "creation_date": 1443624465, "last_edit_date": 1443635058, "question_id": 32869146, "link": "https://stackoverflow.com/questions/32869146/how-do-i-declare-a-variable-that-is-accessible-throughout-the-whole-rails-applic", "title": "How do I declare a variable that is accessible throughout the whole Rails application?", "body": "<p>My application depends upon a variable <code>page_name</code> but the value in the variable <code>page_name</code> is set only after submitting a form.</p>\n\n<p>Should I use a session? When I searched I found out that sessions will be destroyed if my application is behind a load-balancer.</p>\n\n<p>What would be a better way to make a variable accessible throughout the whole Rails application?</p>\n\n<p>Creating a constant could have solved my problem but the value in the variable is not set until the user fill the data in a form field and submits the data. So basically, the user is responsible to fill the value in the variable my whole application depends upon.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1443624020, "post_id": 32868905, "comment_id": 53569797, "body": "What is wrong with that? Does it raise an error? What is your problem?"}, {"owner": {"reputation": 599, "user_id": 4929753, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7f4edccafe958081e3dda2c428095f05?s=128&d=identicon&r=PG&f=1", "display_name": "Pino ", "link": "https://stackoverflow.com/users/4929753/pino"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1443624197, "post_id": 32868905, "comment_id": 53569936, "body": "it says &quot;Undefined local variable or method &#39;section&#39; for #&lt;Section:0x......&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 599, "user_id": 4929753, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7f4edccafe958081e3dda2c428095f05?s=128&d=identicon&r=PG&f=1", "display_name": "Pino ", "link": "https://stackoverflow.com/users/4929753/pino"}, "edited": false, "score": 0, "creation_date": 1443625294, "post_id": 32869322, "comment_id": 53570712, "body": "now it tells me &#39;undefined method &#39;stop&#39; for #&lt;Section:0x00...&gt;"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 599, "user_id": 4929753, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7f4edccafe958081e3dda2c428095f05?s=128&d=identicon&r=PG&f=1", "display_name": "Pino ", "link": "https://stackoverflow.com/users/4929753/pino"}, "edited": false, "score": 0, "creation_date": 1443629926, "post_id": 32869322, "comment_id": 53573812, "body": "I&#39;d expect you to know that an model has an instance method before you go and call that method on an instance.  i can&#39;t see your codebase so i don&#39;t know whether Section instances are supposed to have a <code>stop</code> method or not."}], "tags": [], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "is_accepted": false, "score": 0, "last_activity_date": 1443624918, "creation_date": 1443624918, "answer_id": 32869322, "question_id": 32868905, "link": "https://stackoverflow.com/questions/32868905/rails-route-time-has-to-be-greater-than-the-time-between-two-stops/32869322#32869322", "title": "Rails, route time has to be greater than the time between two stops", "body": "<p>When this method runs</p>\n\n<pre><code>def controllo_offset\n    if section.stop.offset &gt;= section.travel_time\n        return true\n    end \nend\n</code></pre>\n\n<p>it's running within a Section instance.  It doesn't know what \"section\" is - it just thinks it's an undefined variable or method, which is what the error is telling you.  You probably want to use <code>self</code> instead, which is the object which the method is running in.  eg</p>\n\n<pre><code>def controllo_offset\n    if self.stop.offset &gt;= self.travel_time\n        return true\n    end \nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 599, "user_id": 4929753, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7f4edccafe958081e3dda2c428095f05?s=128&d=identicon&r=PG&f=1", "display_name": "Pino ", "link": "https://stackoverflow.com/users/4929753/pino"}, "edited": false, "score": 0, "creation_date": 1443625668, "post_id": 32869323, "comment_id": 53570952, "body": "yes, it is.. but what should i put instead of &#39;stop&#39; ?"}, {"owner": {"reputation": 5304, "user_id": 740394, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/796442b522b037319711277a81d775ca?s=128&d=identicon&r=PG", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/740394/rodrigo"}, "reply_to_user": {"reputation": 599, "user_id": 4929753, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7f4edccafe958081e3dda2c428095f05?s=128&d=identicon&r=PG&f=1", "display_name": "Pino ", "link": "https://stackoverflow.com/users/4929753/pino"}, "edited": false, "score": 0, "creation_date": 1443626390, "post_id": 32869323, "comment_id": 53571411, "body": "I think you want <code>stops.last</code>. But you need to validate if section has at least one stop. I think you should take a time to understand how activeRecord works: <a href=\"http://guides.rubyonrails.org/active_record_basics.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/active_record_basics.html</a>"}], "tags": [], "owner": {"reputation": 5304, "user_id": 740394, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/796442b522b037319711277a81d775ca?s=128&d=identicon&r=PG", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/740394/rodrigo"}, "is_accepted": false, "score": 0, "last_activity_date": 1443624921, "creation_date": 1443624921, "answer_id": 32869323, "question_id": 32868905, "link": "https://stackoverflow.com/questions/32868905/rails-route-time-has-to-be-greater-than-the-time-between-two-stops/32869323#32869323", "title": "Rails, route time has to be greater than the time between two stops", "body": "<p>As <code>controllo_offset</code> is an instance method, to access <code>Section</code> object you should use <code>self</code>:</p>\n\n<pre><code>def controllo_offset\n  return self.stop.offset &gt;= self.travel_time\nend\n</code></pre>\n\n<p>And I think that <code>stop</code> method is wrong too, because you <code>Section</code> has many <code>stops</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1443626235, "creation_date": 1443626235, "answer_id": 32869793, "question_id": 32868905, "link": "https://stackoverflow.com/questions/32868905/rails-route-time-has-to-be-greater-than-the-time-between-two-stops/32869793#32869793", "title": "Rails, route time has to be greater than the time between two stops", "body": "<p>your model should be. the <code>section</code> on accessing attribute in the model should be replace with <code>self</code> with in model</p>\n\n<pre><code>class Section &lt; ActiveRecord::Base\n    has_many :departures\n    has_many :reservations\n    has_many :stops\n    attr_accessible :travel_time, :location_arrival, :type_of_section, :start_location, :id, :id_departure, :stop_id\n    validates :type_of_section, inclusion: { in: %w(festivo feriale scolastico giornaliero)} , :allow_nil =&gt; false\n    delegate :offset, :to =&gt; :stop, prefix: true, :allow_nil =&gt; true\n\n    validates_with ValidatoreOffset\n\n    def controllo_offset\n        if self.stop.offset &gt;= self.travel_time\n            return true\n        end \n    end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 599, "user_id": 4929753, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7f4edccafe958081e3dda2c428095f05?s=128&d=identicon&r=PG&f=1", "display_name": "Pino ", "link": "https://stackoverflow.com/users/4929753/pino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1443626235, "creation_date": 1443623760, "last_edit_date": 1443624755, "question_id": 32868905, "link": "https://stackoverflow.com/questions/32868905/rails-route-time-has-to-be-greater-than-the-time-between-two-stops", "title": "Rails, route time has to be greater than the time between two stops", "body": "<p>I need some help here with a restriction in Rails.\nI created a transport site and the duration of the whole route should be greater than the time between two stops. This is my model file 'section.rb'</p>\n\n<pre><code>section.rb\n\nclass ValidatoreOffset &lt; ActiveModel::Validator\n    def validate(record)\n        if record.controllo_offset\n            record.errors[:base] &lt;&lt; 'Error! Orario fermate intermedie maggiore dell orario della tratta di percorrenza'\n        end\n    end\nend\n\n\n\n\nclass Section &lt; ActiveRecord::Base\n    has_many :departures\n    has_many :reservations\n    has_many :stops\n    attr_accessible :travel_time, :location_arrival, :type_of_section, :start_location, :id, :id_departure, :stop_id\n    validates :type_of_section, inclusion: { in: %w(festivo feriale scolastico giornaliero)} , :allow_nil =&gt; false\n    delegate :offset, :to =&gt; :stop, prefix: true, :allow_nil =&gt; true\n\n    validates_with ValidatoreOffset\n\n    def controllo_offset\n        if section.stop.offset &gt;= section.travel_time\n            return true\n        end \n    end\n\nend\n</code></pre>\n\n<p>offset is an attribute of Stop that indicates the time between two stops.\nWhat is wrong with that?</p>\n\n<p>EDIT:\nfull error message: </p>\n\n<pre><code>Started POST \"/sections\" for ::1 at 2015-09-30 16:50:02 +0200\nProcessing by SectionsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"ywua04ZmGKKsv0OvkrealyAZ4s4iQ7IF1nFg41aYNpdtlXj9kPy4rRC/wkWzH5EoG+d23/QSvEhF4vdErkTNuA==\", \"section\"=&gt;{\"start_location\"=&gt;\"kbh\", \"location_arrival\"=&gt;\"gfx\", \"type_of_section\"=&gt;\"gfehmw,\", \"travel_time\"=&gt;\"17\", \"stop_id\"=&gt;\"6\"}, \"commit\"=&gt;\"Create Section\"}\nUnpermitted parameter: stop_id\n   (0.2ms)  BEGIN\n   (0.1ms)  ROLLBACK\nCompleted 500 Internal Server Error in 18ms (ActiveRecord: 2.8ms)\n\nNameError (undefined local variable or method `section' for #&lt;Section:0x007f8a093691e8&gt;):\n  app/models/section.rb:23:in `controllo_offset'\n  app/models/section.rb:3:in `validate'\n  app/controllers/sections_controller.rb:30:in `block in create'\n  app/controllers/sections_controller.rb:29:in `create'\n\n\n  Rendered /Library/Ruby/Gems/2.0.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.7ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (20.5ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.2.1/lib/web_console/templates/_markup.html.erb (0.4ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.2.1/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.2.1/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.2.1/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.2.1/lib/web_console/templates/console.js.erb within layouts/javascript (12.8ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.2.1/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.2.1/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.2.1/lib/web_console/templates/index.html.erb (27.2ms)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1066, "user_id": 2692292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc9547cefa57fafd20952ccf570251a?s=128&d=identicon&r=PG", "display_name": "romainsalles", "link": "https://stackoverflow.com/users/2692292/romainsalles"}, "edited": false, "score": 0, "creation_date": 1443626884, "post_id": 32868779, "comment_id": 53571746, "body": "Which database are you using ?"}, {"owner": {"reputation": 1665, "user_id": 3214345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-PzPxvoG_BIg/AAAAAAAAAAI/AAAAAAAAAKg/dtM5S5Z1pSY/photo.jpg?sz=128", "display_name": "orrymr", "link": "https://stackoverflow.com/users/3214345/orrymr"}, "reply_to_user": {"reputation": 1066, "user_id": 2692292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc9547cefa57fafd20952ccf570251a?s=128&d=identicon&r=PG", "display_name": "romainsalles", "link": "https://stackoverflow.com/users/2692292/romainsalles"}, "edited": false, "score": 0, "creation_date": 1443627798, "post_id": 32868779, "comment_id": 53572389, "body": "@romainsalles -&gt; mysql"}, {"owner": {"reputation": 1066, "user_id": 2692292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc9547cefa57fafd20952ccf570251a?s=128&d=identicon&r=PG", "display_name": "romainsalles", "link": "https://stackoverflow.com/users/2692292/romainsalles"}, "edited": false, "score": 0, "creation_date": 1443628452, "post_id": 32868779, "comment_id": 53572851, "body": "I think this is more an SQL problem. See the <code>ROW_NUMBER()</code> function in mysql (<a href=\"http://stackoverflow.com/questions/1895110/row-number-in-mysql\">stackoverflow.com/questions/1895110/row-number-in-mysql</a>) and combine it with the &quot;find_by_sql&quot; ActiveRecord method  (<a href=\"http://apidock.com/rails/ActiveRecord/Base/find_by_sql/class\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/Base/find_by_sql/class</a>). You should be able to determine the appropriate request to retrieve your 5 most frequent Observations by date."}, {"owner": {"reputation": 1066, "user_id": 2692292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc9547cefa57fafd20952ccf570251a?s=128&d=identicon&r=PG", "display_name": "romainsalles", "link": "https://stackoverflow.com/users/2692292/romainsalles"}, "edited": false, "score": 0, "creation_date": 1443628945, "post_id": 32868779, "comment_id": 53573191, "body": "I&#39;m more a Postgres guy and I can&#39;t test this request, but I think something like that could work : <code>Observation.find_by_sql(&quot; SELECT date, frequency FROM (   SELECT frequency, date AS created_at, id, ROW_NUMBER() OVER (PARTITION BY date ORDER BY date DESC, frequency DESC) AS rank   FROM observations   where channel = &#39;channelOne&#39; ) AS o WHERE rank &lt;= 5 ORDER BY date DESC, frequency DESC &quot;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1665, "user_id": 3214345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-PzPxvoG_BIg/AAAAAAAAAAI/AAAAAAAAAKg/dtM5S5Z1pSY/photo.jpg?sz=128", "display_name": "orrymr", "link": "https://stackoverflow.com/users/3214345/orrymr"}, "edited": false, "score": 0, "creation_date": 1443688701, "post_id": 32870453, "comment_id": 53596319, "body": "Thanks! Question: This orders the frequencies in ascending order. I need them in descending, in order for me to get the top 5. I tried .order(&quot;obs1.date, obs2.frequency desc&quot;) (a guess) which didn&#39;t work. Also - could you point me to a tutorial on this? That would be greatly appreciated :)"}, {"owner": {"reputation": 5304, "user_id": 740394, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/796442b522b037319711277a81d775ca?s=128&d=identicon&r=PG", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/740394/rodrigo"}, "reply_to_user": {"reputation": 1665, "user_id": 3214345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-PzPxvoG_BIg/AAAAAAAAAAI/AAAAAAAAAKg/dtM5S5Z1pSY/photo.jpg?sz=128", "display_name": "orrymr", "link": "https://stackoverflow.com/users/3214345/orrymr"}, "edited": false, "score": 0, "creation_date": 1443704516, "post_id": 32870453, "comment_id": 53606270, "body": "@orrymr, I used this response as resource: <a href=\"http://stackoverflow.com/a/12114175/740394\">stackoverflow.com/a/12114175/740394</a>"}], "tags": [], "owner": {"reputation": 5304, "user_id": 740394, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/796442b522b037319711277a81d775ca?s=128&d=identicon&r=PG", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/740394/rodrigo"}, "is_accepted": true, "score": 6, "last_activity_date": 1443628063, "creation_date": 1443628063, "answer_id": 32870453, "question_id": 32868779, "link": "https://stackoverflow.com/questions/32868779/get-top-n-items-per-group-in-ruby-on-rails/32870453#32870453", "title": "Get top N items per group in Ruby on Rails", "body": "<p>You can use this:</p>\n\n<pre><code> Observation\n   .select(\"obs1.*\")\n   .from(\"observations obs1\")\n   .joins(\"LEFT JOIN observations AS obs2 ON obs1.date = obs2.date AND obs1.frequency &lt;= obs2.frequency\")\n   .group(\"obs1.date, obs1.id\")\n   .having(\"count(*) &lt;= 5\")\n   .order(\"obs1.date, obs2.frequency\")\n</code></pre>\n\n<p>This query returns the top 5 frequencies for each date.</p>\n"}], "owner": {"reputation": 1665, "user_id": 3214345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-PzPxvoG_BIg/AAAAAAAAAAI/AAAAAAAAAKg/dtM5S5Z1pSY/photo.jpg?sz=128", "display_name": "orrymr", "link": "https://stackoverflow.com/users/3214345/orrymr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2048, "favorite_count": 2, "accepted_answer_id": 32870453, "answer_count": 1, "score": 7, "last_activity_date": 1443628063, "creation_date": 1443623461, "question_id": 32868779, "link": "https://stackoverflow.com/questions/32868779/get-top-n-items-per-group-in-ruby-on-rails", "title": "Get top N items per group in Ruby on Rails", "body": "<p>I have a model with the fields \"date\" and \"frequency\" (Frequency is an integer). I'm trying to get the top 5 frequencies per date.\nEssentially I want to group by date, then get the top 5 per group. </p>\n\n<p>What I have so far only retrieves the top 1 in the group:</p>\n\n<pre><code>Observation.channel(\"channelOne\").order('date', 'frequency desc').group(:date).having('frequency = MAX(frequency)')\n</code></pre>\n\n<p>I want the MAX(frequency) PLUS the second, third, fourth and fifth largest PER DATE.</p>\n\n<p>Sorry if this is really simple or if my terminology is off; I've just started with rails :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "replication", "octopus"], "answers": [{"comments": [{"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "reply_to_user": {"reputation": 4339, "user_id": 1338339, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/L1igS.jpg?s=128&g=1", "display_name": "lllllll", "link": "https://stackoverflow.com/users/1338339/lllllll"}, "edited": false, "score": 0, "creation_date": 1443987434, "post_id": 32924626, "comment_id": 53700423, "body": "@vint-i-vuit Does your <code>Provider</code> model create any related models in callbacks? If yes, check if all of them contain <code>replicated_model()</code> call."}, {"owner": {"reputation": 4339, "user_id": 1338339, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/L1igS.jpg?s=128&g=1", "display_name": "lllllll", "link": "https://stackoverflow.com/users/1338339/lllllll"}, "edited": false, "score": 0, "creation_date": 1444065426, "post_id": 32924626, "comment_id": 53733189, "body": "Thanks for the input. It doesn&#39;t deal with any model in callbacks explicitly. It does have some &quot;has_many&quot; relationship, but I did comment that out just in case, with no luck :("}], "tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": false, "score": 0, "last_activity_date": 1443888375, "creation_date": 1443888375, "answer_id": 32924626, "question_id": 32868719, "link": "https://stackoverflow.com/questions/32868719/rails-postgresql-replication-via-octopus-gem-when-in-development-env/32924626#32924626", "title": "Rails Postgresql replication via Octopus gem when in Development env", "body": "<p>Try adding <code>fully_replicated: false</code> after <code>replicated: true</code> in your config.</p>\n"}, {"comments": [{"owner": {"reputation": 4339, "user_id": 1338339, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/L1igS.jpg?s=128&g=1", "display_name": "lllllll", "link": "https://stackoverflow.com/users/1338339/lllllll"}, "edited": false, "score": 0, "creation_date": 1444338208, "post_id": 33010790, "comment_id": 53874146, "body": "Oh! That explains a lot and it all makes more sense :/ Thank you for this. I&#39;m not very experienced on this, do you have any preferred solution to implement the master-multislave replication for specific tables(not whole DB)? I&#39;m thinking about <a href=\"http://slony.info/\" rel=\"nofollow noreferrer\">Slony-I</a>."}, {"owner": {"reputation": 66009, "user_id": 23368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2ace1b52352e1260c6a42df36e36f356?s=128&d=identicon&r=PG", "display_name": "Daniel Rikowski", "link": "https://stackoverflow.com/users/23368/daniel-rikowski"}, "reply_to_user": {"reputation": 4339, "user_id": 1338339, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/L1igS.jpg?s=128&g=1", "display_name": "lllllll", "link": "https://stackoverflow.com/users/1338339/lllllll"}, "edited": false, "score": 0, "creation_date": 1444387316, "post_id": 33010790, "comment_id": 53893366, "body": "I have no experience in that, too, but Slony-I seems to be a safe choice, since it is actively maintened and widely used."}], "tags": [], "owner": {"reputation": 66009, "user_id": 23368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2ace1b52352e1260c6a42df36e36f356?s=128&d=identicon&r=PG", "display_name": "Daniel Rikowski", "link": "https://stackoverflow.com/users/23368/daniel-rikowski"}, "is_accepted": true, "score": 2, "last_activity_date": 1444293792, "creation_date": 1444293792, "answer_id": 33010790, "question_id": 32868719, "link": "https://stackoverflow.com/questions/32868719/rails-postgresql-replication-via-octopus-gem-when-in-development-env/33010790#33010790", "title": "Rails Postgresql replication via Octopus gem when in Development env", "body": "<p>That is not the purpose of the Octopus gem.</p>\n\n<p>It redirects the database requests, depending on whether it is a read or write operation. That way you can use your Rails models without thinking about the current database connection and if it fits the intended operation.</p>\n\n<p><strong>It does <em>not</em> copy the data</strong> to the slaves.</p>\n\n<p>To perform the actual replication, i.e. the data transfer from the master to the slaves, you have to set it up yourself.</p>\n\n<p>There are several options with PostgreSQL. If you are using a newer version (9.1+) you can use the integrated <a href=\"https://wiki.postgresql.org/wiki/Hot_Standby\" rel=\"nofollow\">streaming replication in \"hot standby\" mode</a>. There are tutorials on how to set it up, e.g.</p>\n\n<ul>\n<li><a href=\"http://www.rassoc.com/gregr/weblog/2013/02/16/zero-to-postgresql-streaming-replication-in-10-mins/\" rel=\"nofollow\">http://www.rassoc.com/gregr/weblog/2013/02/16/zero-to-postgresql-streaming-replication-in-10-mins/</a></li>\n<li><a href=\"http://prongs.org/blog/postgresql-replication\" rel=\"nofollow\">http://prongs.org/blog/postgresql-replication</a></li>\n</ul>\n\n<p>If you are stuck with an older version of PostgreSQL have a look at the <a href=\"https://wiki.postgresql.org/wiki/Replication,_Clustering,_and_Connection_Pooling\" rel=\"nofollow\">alternatives</a>.</p>\n"}], "owner": {"reputation": 4339, "user_id": 1338339, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/L1igS.jpg?s=128&g=1", "display_name": "lllllll", "link": "https://stackoverflow.com/users/1338339/lllllll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "accepted_answer_id": 33010790, "answer_count": 2, "score": 1, "last_activity_date": 1444293792, "creation_date": 1443623293, "question_id": 32868719, "link": "https://stackoverflow.com/questions/32868719/rails-postgresql-replication-via-octopus-gem-when-in-development-env", "title": "Rails Postgresql replication via Octopus gem when in Development env", "body": "<p>Apparently when using the Octopus gem to do Postgres replication everything should be plug and play. However I can't seem to find what I'm doing wrong.</p>\n\n<p>This is my <code>config/shards.yml</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>octopus:\n  environments:\n    - development\n  replicated: true\n  development:\n    slave1:\n      adapter: postgresql\n      host: localhost\n      database: slaveapp_development\n      username: pguser\n      password: pgpass\n</code></pre>\n\n<p>The AR model <code>Provider</code>(I create the exact same tables in each app via Rake tasks) I'd like to sync/replicate to my slave:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Provider &lt; ActiveRecord::Base\n  has_many :products\n  replicated_model()\nend\n</code></pre>\n\n<p>I boot both apps via Rails server and enter <strong>Masterapp</strong>'s console and from there:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&gt; Provider.using(:slave1).create({provider_params...})  \n#=&gt; works! I get a new record in slave1's DB.\n&gt; Provider.using(:master).create({provider_params...})  \n#=&gt; works partly. Creates record only in master's DB.\n</code></pre>\n\n<p>The problem is that when calling <code>Provider.using(:master)...</code> I'm expecting:</p>\n\n<p>1 - Create record at <strong>master</strong>'s DB.</p>\n\n<p>2 - Replicate same record at <strong>slave1</strong>'s DB.    &lt;--- This is <strong>NOT</strong> happening.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1443623972, "post_id": 32868446, "comment_id": 53569761, "body": "how do you even come up with such questions?.."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1443624216, "post_id": 32868446, "comment_id": 53569952, "body": "This sounds like a <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">xy problem</a> to me."}, {"owner": {"reputation": 5339, "user_id": 4241959, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/yPffH.jpg?s=128&g=1", "display_name": "Alex Lomia", "link": "https://stackoverflow.com/users/4241959/alex-lomia"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1443624993, "post_id": 32868446, "comment_id": 53570499, "body": "@AndreyDeineko I&#39;m trying to build web-application like project with play/pause ability."}, {"owner": {"reputation": 5339, "user_id": 4241959, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/yPffH.jpg?s=128&g=1", "display_name": "Alex Lomia", "link": "https://stackoverflow.com/users/4241959/alex-lomia"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1443625002, "post_id": 32868446, "comment_id": 53570504, "body": "@spickermann thanks for the link, I&#39;m trying to implement some application-like behavior in my project"}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1443626270, "post_id": 32868446, "comment_id": 53571342, "body": "the web does not work like what you are trying to do."}], "answers": [{"comments": [{"owner": {"reputation": 5339, "user_id": 4241959, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/yPffH.jpg?s=128&g=1", "display_name": "Alex Lomia", "link": "https://stackoverflow.com/users/4241959/alex-lomia"}, "edited": false, "score": 0, "creation_date": 1443624687, "post_id": 32869057, "comment_id": 53570301, "body": "Could you, please explain how to do that? Or what are the best practices of solving such issues. Can threading be used in this case, how?"}, {"owner": {"reputation": 416, "user_id": 2606105, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zNhS3.png?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2606105/dan"}, "reply_to_user": {"reputation": 5339, "user_id": 4241959, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/yPffH.jpg?s=128&g=1", "display_name": "Alex Lomia", "link": "https://stackoverflow.com/users/4241959/alex-lomia"}, "edited": false, "score": 0, "creation_date": 1443624743, "post_id": 32869057, "comment_id": 53570334, "body": "@AlexanderLomia I think there&#39;s probably just a different approach to the problem. What is it that you&#39;re trying to do?"}, {"owner": {"reputation": 5339, "user_id": 4241959, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/yPffH.jpg?s=128&g=1", "display_name": "Alex Lomia", "link": "https://stackoverflow.com/users/4241959/alex-lomia"}, "edited": false, "score": 0, "creation_date": 1443625204, "post_id": 32869057, "comment_id": 53570639, "body": "I&#39;m trying to implement some app-like behavior, e.g play/pause ability for different kinds of user-written scripts."}, {"owner": {"reputation": 416, "user_id": 2606105, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zNhS3.png?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2606105/dan"}, "reply_to_user": {"reputation": 5339, "user_id": 4241959, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/yPffH.jpg?s=128&g=1", "display_name": "Alex Lomia", "link": "https://stackoverflow.com/users/4241959/alex-lomia"}, "edited": false, "score": 0, "creation_date": 1443625462, "post_id": 32869057, "comment_id": 53570818, "body": "Not really sure what that means, but from the sounds of it, it&#39;s something you&#39;d probably want to be implementing in the front-end. If it&#39;s Ruby script, take a look the Opal project <a href=\"https://github.com/opal/opal\" rel=\"nofollow noreferrer\">github.com/opal/opal</a>"}], "tags": [], "owner": {"reputation": 416, "user_id": 2606105, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zNhS3.png?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2606105/dan"}, "is_accepted": true, "score": 0, "last_activity_date": 1443624180, "creation_date": 1443624180, "answer_id": 32869057, "question_id": 32868446, "link": "https://stackoverflow.com/questions/32868446/how-to-stop-action-execution-with-another-action-in-rails/32869057#32869057", "title": "How to stop action execution with another action in rails?", "body": "<p>Because a client will wait for a response from a server, you can't have a loop in an endpoint that waits for another endpoint to be called.</p>\n\n<p>In this case, a client will visit <code>/test/run</code>, but since the server won't return anything until the loop finishes, the client will just keep waiting.</p>\n\n<p>This means (unless you specifically configured your webserver to do so), that another connection can't be made to the server to reach the <code>test/stop</code> endpoint.</p>\n\n<p>If you must have a \"job\" that runs and be cancel-able by an endpoint, turn it into an actual background task.</p>\n"}], "owner": {"reputation": 5339, "user_id": 4241959, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/yPffH.jpg?s=128&g=1", "display_name": "Alex Lomia", "link": "https://stackoverflow.com/users/4241959/alex-lomia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 1, "accepted_answer_id": 32869057, "answer_count": 1, "score": 2, "last_activity_date": 1443624180, "creation_date": 1443622565, "question_id": 32868446, "link": "https://stackoverflow.com/questions/32868446/how-to-stop-action-execution-with-another-action-in-rails", "title": "How to stop action execution with another action in rails?", "body": "<p>I have following actions in a <code>Test</code> controller:</p>\n\n<pre><code>def run\n  while true do\n    # code\n  end\nend\n\ndef stop\n  # stop the run action\nend\n</code></pre>\n\n<p>how can stop action be implemented to halt the run action?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "minimagick"], "comments": [{"owner": {"reputation": 21539, "user_id": 169277, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/66e2fa2e7f25d50d67a5a6acde7a5716?s=128&d=identicon&r=PG", "display_name": "ant", "link": "https://stackoverflow.com/users/169277/ant"}, "edited": false, "score": 1, "creation_date": 1451967830, "post_id": 32868326, "comment_id": 56953832, "body": "did you ever solve this issue?"}, {"owner": {"reputation": 11, "user_id": 5393339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc27b421ecc64ddbb36a69cffd126be?s=128&d=identicon&r=PG&f=1", "display_name": "Gupte", "link": "https://stackoverflow.com/users/5393339/gupte"}, "reply_to_user": {"reputation": 21539, "user_id": 169277, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/66e2fa2e7f25d50d67a5a6acde7a5716?s=128&d=identicon&r=PG", "display_name": "ant", "link": "https://stackoverflow.com/users/169277/ant"}, "edited": false, "score": 0, "creation_date": 1454450035, "post_id": 32868326, "comment_id": 58047493, "body": "Yes, it turns out my Ghostscript was not up to date. I ran &quot;brew upgrade gs&quot; and it worked!  It might also be worthwhile to note that for different reasons, I ended up moving the code under the generate_png method into the model controller before I updated Ghostscript. Although I&#39;m pretty sure that had nothing to do with getting this to work."}], "owner": {"reputation": 11, "user_id": 5393339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc27b421ecc64ddbb36a69cffd126be?s=128&d=identicon&r=PG&f=1", "display_name": "Gupte", "link": "https://stackoverflow.com/users/5393339/gupte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1129, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443622217, "creation_date": 1443622217, "question_id": 32868326, "link": "https://stackoverflow.com/questions/32868326/minimagick-gem-fails-to-convert-multipage-pdf-to-several-png-images", "title": "Minimagick gem fails to convert multipage PDF to several png images", "body": "<p>I am new to RoR and I'm trying to develop a slide sharing app through which users can upload and share a multipage PDFs containing a deck of slides (one slide per page). Viewers can then view these slides on a \"show\" page.</p>\n\n<p>Behind the scenes I am trying to convert the multipage pdf into several .png files (1 pdf page -> 1.png file), and then display them in a carousel/slider fashion.</p>\n\n<p>Here is my uploader:</p>\n\n<pre><code># encoding: utf-8\n\nclass DocUploader &lt; CarrierWave::Uploader::Base\n\n# Include RMagick or MiniMagick support:\n# include CarrierWave::RMagick\n  include CarrierWave::MiniMagick\n\n# Choose what kind of storage to use for this uploader:\n  storage :file\n# storage :fog\n\n# Override the directory where uploaded files will be stored.\n# This is a sensible default for uploaders that are meant to be mounted:\n  def store_dir\n  #  'public/doc_uploads/'\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  process :filename\n  process :generate_png\n\n  def generate_png\n    pdf = MiniMagick::Image.new(self.file.path)\n    pdf.pages.each_with_index do |page, index|\n      page.write(\"page#{index}.png\")\n    end\n  end\n\n  # Add a white list of extensions which are allowed to be uploaded.\n  # For images you might use something like this:\n    def extension_white_list\n      %w(pdf)\n    end\n\n  # Override the filename of the uploaded files:\n  # Avoid using model.id or version_name here, see uploader/store.rb for details.\n  def filename\n    'doc.pdf' if original_filename\n  end\n\nend\n</code></pre>\n\n<p>When I try to upload a multipage pdf document, it throws me this error:\n     <code>'identify /public/uploads/tmp/1443619784-406-3861/doc.pdf' failed with error:</code> at the line <code>pdf.pages.each_with_index do |page, index|</code></p>\n\n<p>I have tried different solutions to converting the document, but none of them have worked for me so far. Why would a run of the mill .pdf file fail minimagick's validation? Is there anything I can do to avoid running into this issue? Any advice will be greatly appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "strong-parameters"], "comments": [{"owner": {"reputation": 24213, "user_id": 390897, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bb90a39b77596fcffbab96de88f0ee34?s=128&d=identicon&r=PG", "display_name": "fny", "link": "https://stackoverflow.com/users/390897/fny"}, "edited": false, "score": 0, "creation_date": 1443621064, "post_id": 32867691, "comment_id": 53567715, "body": "Why does that feel wrong exactly?"}, {"owner": {"reputation": 1571, "user_id": 2615384, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7979d95c1b4c1afaec9ca454b9a3c277?s=128&d=identicon&r=PG", "display_name": "Jumbalaya Wanton", "link": "https://stackoverflow.com/users/2615384/jumbalaya-wanton"}, "reply_to_user": {"reputation": 24213, "user_id": 390897, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bb90a39b77596fcffbab96de88f0ee34?s=128&d=identicon&r=PG", "display_name": "fny", "link": "https://stackoverflow.com/users/390897/fny"}, "edited": false, "score": 0, "creation_date": 1443621158, "post_id": 32867691, "comment_id": 53567793, "body": "@faraz I don&#39;t know. It feels a bit hacky. But perhaps I&#39;m wrong?"}], "answers": [{"comments": [{"owner": {"reputation": 1571, "user_id": 2615384, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7979d95c1b4c1afaec9ca454b9a3c277?s=128&d=identicon&r=PG", "display_name": "Jumbalaya Wanton", "link": "https://stackoverflow.com/users/2615384/jumbalaya-wanton"}, "edited": false, "score": 0, "creation_date": 1443621269, "post_id": 32867923, "comment_id": 53567879, "body": "OK. That&#39;s one way. But I would have to whitelist <code>author_id</code> in <code>strong_paramters</code>, then validate that the <code>author_id</code> is equal to the id of the <code>current_user</code>."}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1443621498, "post_id": 32867923, "comment_id": 53568064, "body": "Keep in mind that something passed as a hidden field in a form <b>can</b> be changed by the client before submitting; that may or may not be a security problem depending on what&#39;s going on."}], "tags": [], "owner": {"reputation": 3728, "user_id": 2612713, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a7f606f9e135589780620d1160d941e?s=128&d=identicon&r=PG&f=1", "display_name": "neo", "link": "https://stackoverflow.com/users/2612713/neo"}, "is_accepted": false, "score": 0, "last_activity_date": 1443621176, "creation_date": 1443621176, "answer_id": 32867923, "question_id": 32867691, "link": "https://stackoverflow.com/questions/32867691/how-to-modify-params-before-creating-an-object/32867923#32867923", "title": "How to modify params before creating an object", "body": "<p>You can add a hidden field to your comment form.</p>\n\n<pre><code>&lt;%= f.hidden_field :user_id, :value =&gt; current_user.id %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "is_accepted": false, "score": 1, "last_activity_date": 1443621455, "creation_date": 1443621455, "answer_id": 32868025, "question_id": 32867691, "link": "https://stackoverflow.com/questions/32867691/how-to-modify-params-before-creating-an-object/32868025#32868025", "title": "How to modify params before creating an object", "body": "<p>I don't think there's anything wrong with the way you'd rather not do it. </p>\n\n<p>You could also perhaps use standard <a href=\"http://ruby-doc.org/core-1.9.3/Hash.html#method-i-merge\" rel=\"nofollow\">Hash#merge</a> or <a href=\"http://ruby-doc.org/core-1.9.3/Hash.html#method-i-merge-21\" rel=\"nofollow\">merge!</a>, or <a href=\"http://apidock.com/rails/Hash/deep_merge\" rel=\"nofollow\">ActiveSupport's deep_merge</a> or <a href=\"http://apidock.com/rails/v4.2.1/Hash/deep_merge%21\" rel=\"nofollow\">deep_merge!</a> in some way. </p>\n\n<p>The fact that comments is an array of potentially many makes it hard to do that nicely though. </p>\n\n<p>I think I would make a copy of the original params rather than editing them in place -- is that what seems wrong to you? <a href=\"http://apidock.com/rails/v4.2.1/Hash/deep_dup\" rel=\"nofollow\">ActiveSupport's deep_dup</a> may be be helpful. </p>\n\n<p>How about something like:</p>\n\n<pre><code>photo_params = photo_params.deep_dup\nphoto_params[:comments_attributes] = photo_params[:comments_attributes].collect {|c| c.merge(:author =&gt; :current_user)}\n@photo = Photo.new(photo_params)\n...\n</code></pre>\n\n<p>I'm not sure if that is really any better. But maybe it gives you an idea of some of the tools at your disposal. </p>\n"}, {"comments": [{"owner": {"reputation": 1571, "user_id": 2615384, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7979d95c1b4c1afaec9ca454b9a3c277?s=128&d=identicon&r=PG", "display_name": "Jumbalaya Wanton", "link": "https://stackoverflow.com/users/2615384/jumbalaya-wanton"}, "edited": false, "score": 0, "creation_date": 1443621719, "post_id": 32868079, "comment_id": 53568218, "body": "But wouldn&#39;t that grab an existing objects, and also reassign their author? Let&#39;s assume this is an update action. Doing <code>photo.comments</code> would load existing comments, right? Sorry, I should have been clearer in my question, but I just thought of that scenario now."}, {"owner": {"reputation": 1571, "user_id": 2615384, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7979d95c1b4c1afaec9ca454b9a3c277?s=128&d=identicon&r=PG", "display_name": "Jumbalaya Wanton", "link": "https://stackoverflow.com/users/2615384/jumbalaya-wanton"}, "edited": false, "score": 0, "creation_date": 1443621910, "post_id": 32868079, "comment_id": 53568343, "body": "Maybe <code>@photo.comments.select(&amp;:new_record).each ...</code> ? When photo is not new?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1571, "user_id": 2615384, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7979d95c1b4c1afaec9ca454b9a3c277?s=128&d=identicon&r=PG", "display_name": "Jumbalaya Wanton", "link": "https://stackoverflow.com/users/2615384/jumbalaya-wanton"}, "edited": false, "score": 0, "creation_date": 1443621959, "post_id": 32868079, "comment_id": 53568380, "body": "@JumbalayaWanton: yes, but seeing that you call <code>Photo.new</code> I figured that there wouldn&#39;t be any pre-existing comments. :)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1443622405, "last_edit_date": 1443622405, "creation_date": 1443621605, "answer_id": 32868079, "question_id": 32867691, "link": "https://stackoverflow.com/questions/32867691/how-to-modify-params-before-creating-an-object/32868079#32868079", "title": "How to modify params before creating an object", "body": "<p>Instead of messing with params, you could assign author to now-existing objects:</p>\n\n<pre><code>@photo = Photo.new(photo_params)\n@photo.comments.select(&amp;:new_record?).each {|c| c.author = current_user }\n@photo.save!\n</code></pre>\n"}], "owner": {"reputation": 1571, "user_id": 2615384, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7979d95c1b4c1afaec9ca454b9a3c277?s=128&d=identicon&r=PG", "display_name": "Jumbalaya Wanton", "link": "https://stackoverflow.com/users/2615384/jumbalaya-wanton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 1, "accepted_answer_id": 32868079, "answer_count": 3, "score": 1, "last_activity_date": 1443622405, "creation_date": 1443620552, "question_id": 32867691, "link": "https://stackoverflow.com/questions/32867691/how-to-modify-params-before-creating-an-object", "title": "How to modify params before creating an object", "body": "<p>I'm using nested attributes to create a <code>Photo</code> and a <code>Comment</code> object. I would like to set the author on the comment, which is nested inside the photo.</p>\n\n<p>Here are the params:</p>\n\n<pre><code>photo: {\n  file: 'hi.jpg',\n  comments_params: [\n    { content: \"hello world!\" }\n  ]\n}\n</code></pre>\n\n<p>But I would like to add the author to the comment.</p>\n\n<pre><code>  # ...\n  comments_params: [\n    { content: \"hello world!\", author: current_user }\n  ]\n  # ...\n</code></pre>\n\n<p>What's easiest way to do this? My controller code looks like this.</p>\n\n<pre><code>@photo = Photo.new(photo_params)\n@photo.save!\n\nprivate\n\ndef photo_params\n  params.require(:photo).permit(:file, comments_attributes: [:content])\nend\n</code></pre>\n\n<p>I can do it by manipulating the params after filtering them with <code>strong_parameters</code> (pseudo-code, but the idea stands), but I would rather not.</p>\n\n<pre><code>photo_params[:comments_attributes].each do |comment|\n  comment[:author] = current_user\nend\n</code></pre>\n\n<p>But this feels a bit wrong.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "gem", "refinerycms"], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 3964714, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dd54224b6667a76a93b551b88532f22?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3964714/matthew"}, "is_accepted": true, "score": 0, "last_activity_date": 1443928417, "creation_date": 1443928417, "answer_id": 32929677, "question_id": 32867656, "link": "https://stackoverflow.com/questions/32867656/refinerycms-routing-error-introduced-by-portfolio-gallery-plugin/32929677#32929677", "title": "RefineryCMS: routing error introduced by portfolio gallery plugin", "body": "<p>Looks like it was a bug in the portfolio/images plugin, tried another bundle update and the updated code worked like a charm.  &lt;3 RefineryCMS contributors</p>\n"}], "owner": {"reputation": 103, "user_id": 3964714, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dd54224b6667a76a93b551b88532f22?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3964714/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 32929677, "answer_count": 1, "score": 0, "last_activity_date": 1443928417, "creation_date": 1443620449, "last_edit_date": 1495535219, "question_id": 32867656, "link": "https://stackoverflow.com/questions/32867656/refinerycms-routing-error-introduced-by-portfolio-gallery-plugin", "title": "RefineryCMS: routing error introduced by portfolio gallery plugin", "body": "<p>I'm using <a href=\"http://www.refinerycms.com/\" rel=\"nofollow noreferrer\">RefineryCMS</a> as a rails CMS, it was working like a charm until I         followed the answer in <a href=\"https://stackoverflow.com/questions/21649909/how-to-add-a-lightbox-style-image-gallery-to-a-refinery-cms-website\">this</a> question to get a simple image gallery functionality going. Now I'm getting the same error as shown on <a href=\"https://github.com/refinery/refinerycms/issues/2595\" rel=\"nofollow noreferrer\">this</a> issue. I didn't change any of my rails code to introduce a link_to tag with a nil reference, however (there is a link_to image_tag line in the guide but I've commented that out and nothing changed), so it's happening in the autogenerated code I believe. Here's the full error I get when I login to refinery on my site:</p>\n\n<pre><code>ActionController::UrlGenerationError in Refinery::Authentication::Devise::Admin::Users#index\nShowing /home/mpvoss/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/bundler/gems/refinerycms-0a37f8090278/core/app/views/refinery/admin/_menu_item.html.erb where line #1 raised:\n\nNo route matches {:action=&gt;\"index\", :controller=&gt;\"refinery/refinery/portfolio/admin/galleries\", :locale=&gt;:en}\nExtracted source (around line #46):            \n44 message &lt;&lt; \" missing required keys: #{missing_keys.sort.inspect}\"     unless missing_keys.empty?\n45\n46 raise ActionController::UrlGenerationError, message\n47 end\n48\n49 def clear\n\nTrace of template inclusion: /home/mpvoss/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/bundler/gems/refinerycms-0a37f8090278/core/app/views/refinery/admin/_menu.html.erb, /home/mpvoss/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/bundler/gems/refinerycms-0a37f8090278/core/app/views/layouts/refinery/admin.html.erb\n</code></pre>\n\n<p>Note: Just loading the website without logging into refinery works because it's not trying to load the menu code below that encounters the routing issue.</p>\n\n<p>Okay, let's have a look at <strong>_menu.html.erb</strong></p>\n\n<pre><code>&lt;%= link_to menu_item.title, refinery.url_for(menu_item.url),\n        :class =&gt; (\"active\" if menu_item.highlighted?(params)),\n        :id =&gt; \"plugin_#{menu_item.name}\" %&gt;\n</code></pre>\n\n<p>This code just makes a menu bar for all the plugins. It can be commented out and refinery works (the error above goes away), but I need that menu bar to make changes to the website.</p>\n\n<p><strong>What I've tried.</strong></p>\n\n<ul>\n<li><p>I found a galleries_controller.rb in ~/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/bundler/gems/refinerycms-portfolio-289b85b18771/app/controllers/refinery/portfolio/admin, which seems to be the controller the error was talking about. It didn't have an index action, so I added an empty action to see if that was the problem and nothing changed. The routes.rb for the ~/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/bundler/gems/refinerycms-portfolio-289b85b18771/ gem is below</p></li>\n<li><p>Commenting out the portfolio gem in my Gemfile and running bundle install but I get the same error because the autogenerated code (referring to stuff like .rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/bundler/gems/refinerycms-0a37f8090278/) is still getting executed (I use git for version control and make a clean clone of the project before these changes and it has the same problem because the autogenerated code is not part of the version control).  </p></li>\n<li>gem uninstall of the refinery-photo-gallery, refinerycms-page-images and refinerycms-portfolio gems I thought might be causing the problem </li>\n<li>I moved all the gems in ~/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/bundler/gems/ out of that directory to see if a bundle install would regenerate fresh, clean gems but nothing changed.</li>\n</ul>\n\n<p>None of these ideas has made a difference.  If any clarification is needed please just let me know. I've been stumped on this for a week and my Googling skills are failing me. Any help is really appreciated!</p>\n\n<p><strong>~/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/bundler/gems/refinerycms-portfolio-289b85b18771/routes.rb</strong></p>\n\n<pre><code> Refinery::Core::Engine.routes.draw do\n\n  # Frontend routes\n  namespace :portfolio, :path =&gt; Refinery::Portfolio.page_url do\n    root :to =&gt; \"galleries#index\"\n    resources :galleries, :only =&gt; [:index, :show]\n  end\n\n  # Admin routes\n  namespace :portfolio, :path =&gt; '' do\n    namespace :admin, :path =&gt; Refinery::Core.backend_route do\n      scope :path =&gt; 'portfolio' do\n        resources :galleries, :except =&gt; :show do\n          get :children, :on =&gt; :member\n          post :update_positions, :on =&gt; :collection\n          resources :items, :except =&gt; [:show] do\n            post :update_positions, :on =&gt; :collection\n          end\n        end\n        resources :items do\n          post :update_positions, :on =&gt; :collection\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>source 'https://rubygems.org'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.3'\n# Use sqlite3 as the database for Active Record\ngroup :development, :test do\n  gem 'sqlite3'\nend\n# Use SCSS for stylesheets\n# Use Uglifier as compressor for JavaScript assets\n# Use CoffeeScript for .coffee assets and views\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more:     https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger     console\n  gem 'byebug'\n\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the     background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n\n# Added by Matthew, Thin server\ngem 'faye'\ngem 'thin'\n\ngroup :assets do\n  #gem 'sass-rails', '~&gt; 3.2.3'\n  gem 'coffee-rails', '~&gt; 4.1.0'\n  gem 'sass-rails', '~&gt; 5.0'\n  #gem 'coffee-rails', '~&gt; 3.2.1'\n  gem 'bootstrap-sass','~&gt; 3.1.1'\n  gem 'uglifier', '&gt;= 1.3.0'\n  #gem 'uglifier', '&gt;= 1.0.3'\nend\n\n  gem 'twitter-bootstrap-rails'\ngem 'refinerycms', git: 'https://github.com/refinery/refinerycms', branch: 'master'\n#gem 'refinerycms-page-images', '~&gt; 2.0.0'\ngem 'quiet_assets', group: :development\n#gem 'refinerycms-photo-gallery', '~&gt; 0.1.0'\n# Add support for searching inside Refinery's admin interface.\ngem 'refinerycms-acts-as-indexed', ['~&gt; 2.0', '&gt;= 2.0.0']\n\n# Add support for Refinery's custom fork of the visual editor WYMeditor.\ngem 'refinerycms-wymeditor', ['~&gt; 1.0', '&gt;= 1.0.6']\ngem 'refinerycms-portfolio', github: 'refinery/refinerycms-portfolio', branch:     'master'\n# The default authentication adapter\ngem 'refinerycms-authentication-devise', '~&gt; 1.0'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "active-model-serializers"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1443620181, "post_id": 32867502, "comment_id": 53567057, "body": "I would not recommend to use serialization in this case. Using 2 distinct models, <code>Comment</code> and <code>CommentVersion</code>(which holds the current comment&#39;s value), will be much more flexible that a serialized Hash/Array, which would need a specific treatment to retrive, update, delete, create, etc. Also, if the serialized Hash/Array is getting very big, you&#39;ll end up with too much data for a single column and your DB adapter will have to use a trick to store everything."}, {"owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1443620383, "post_id": 32867502, "comment_id": 53567189, "body": "Yes, it&#39;s much more powerful to have two different models but I&#39;m still curious if this is possible. (I would limit the number of edits to a handful edits.)"}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "edited": false, "score": 0, "creation_date": 1443620496, "post_id": 32867502, "comment_id": 53567286, "body": "@Numbers if you are using pg, then I think it&#39;s possible. They have json field and it&#39;s sortable by keys as well."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1443624202, "post_id": 32867502, "comment_id": 53569940, "body": "Yes it is possible but it will be way more complex to manage this instead of a basic validation on the edits count. In my opinion, you should stick with the 2 models strategy, but you can use serialization too."}], "answers": [{"tags": [], "owner": {"reputation": 10076, "user_id": 4010391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/NgRol.jpg?s=128&g=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/4010391/travis"}, "is_accepted": true, "score": 4, "last_activity_date": 1444059324, "last_edit_date": 1444059324, "creation_date": 1443632049, "answer_id": 32871692, "question_id": 32867502, "link": "https://stackoverflow.com/questions/32867502/possible-to-store-timestamps-as-keys-in-hash-and-make-it-sortable/32871692#32871692", "title": "Possible to store timestamps as keys in Hash and make it sortable?", "body": "<p>I agree with the comments about it being odd, but yes, it can be done in Ruby. You can set a <a href=\"http://ruby-doc.org/stdlib-2.1.1/libdoc/time/rdoc/Time.html\" rel=\"nofollow\">Time</a> object as the key to a hash like so:</p>\n\n<pre><code>hash = {}\nhash[Time.now] = 'value'\nhash\n#=&gt; {2015-09-30 11:45:41 -0500=&gt;1}\n</code></pre>\n\n<p>If your time was initialized as a string, you can parse it into a <code>Time</code> object using:</p>\n\n<pre><code>Time.parse(\"12:00\")\n#=&gt; 2015-09-30 12:00:00 -0500\n</code></pre>\n\n<p>Finally, hashes in Ruby maintain order since version 1.8 or 1.9, but are <b>not</b> sortable, so you can create an array of just the keys using <code>Hash#keys</code> and then sort the keys:</p>\n\n<pre><code>hash = {}\nhash[Time.now] = 'value'\nhash[Time.now] = 'value2'\nhash[Time.now] = 'value3'\nhash[Time.now] = 'value4'\nhash[Time.now] = 'value5'\nhash\n#=&gt; {\n      2015-09-30 11:50:17 -0500=&gt;\"value\",\n      2015-09-30 11:50:18 -0500=&gt;\"value2\",\n      2015-09-30 12:04:05 -0500=&gt;\"value3\",\n      2015-09-30 12:04:04 -0500=&gt;\"value4\",\n      2015-09-30 12:04:06 -0500=&gt;\"value5\",\n    }\n\nhash.keys\n#=&gt; [\n      2015-09-30 11:50:17 -0500\n      2015-09-30 11:50:18 -0500,\n      2015-09-30 12:04:05 -0500,\n      2015-09-30 12:04:04 -0500,\n      2015-09-30 12:04:06 -0500,\n    ]\n\nshuffled_keys = hash.keys.shuffle\n#=&gt; [\n      2015-09-30 12:04:04 -0500,\n      2015-09-30 12:04:06 -0500,\n      2015-09-30 11:50:18 -0500,\n      2015-09-30 12:04:05 -0500,\n      2015-09-30 11:50:17 -0500\n    ]\n\nlatest_key = shuffled_keys.sort.last\n#=&gt; 2015-09-30 12:04:06 -0500\n\nhash[latest_key]\n#=&gt; \"value5\"\n</code></pre>\n"}], "owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 1, "accepted_answer_id": 32871692, "answer_count": 1, "score": 3, "last_activity_date": 1444059324, "creation_date": 1443619996, "last_edit_date": 1443620687, "question_id": 32867502, "link": "https://stackoverflow.com/questions/32867502/possible-to-store-timestamps-as-keys-in-hash-and-make-it-sortable", "title": "Possible to store timestamps as keys in Hash and make it sortable?", "body": "<p>I have a Comment model which the user can edit. I'd like to save every new version of the comment, much how it works in Facebook.</p>\n\n<p>Instead of having an associated model where I create a new record for every new submitted edit, I was thinking to use Active Model's <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Serialization.html\" rel=\"nofollow\">Serialization</a> and insert a Hash key/value-pair for every new edit.</p>\n\n<p>The submitted text would be the value and time of the edit would be the key.</p>\n\n<p>Is it possible to save a DateTime value as a key and then be able to sort the Hash chronologically by the keys? And if positive, how would I create the keys?</p>\n"}, {"tags": ["ruby", "will-paginate"], "comments": [{"owner": {"reputation": 4279, "user_id": 3920143, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b47dd912eaeb6cd72a15ec2932f6751?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/3920143/joel"}, "edited": false, "score": 0, "creation_date": 1443619038, "post_id": 32867126, "comment_id": 53566285, "body": "I prefer to use kaminari"}], "answers": [{"tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1443710458, "creation_date": 1443710458, "answer_id": 32890398, "question_id": 32867126, "link": "https://stackoverflow.com/questions/32867126/will-paginate-rails-limit-num-of-pages-to-max-10/32890398#32890398", "title": "Will paginate rails limit num of pages to max 10?", "body": "<p>You can use the <code>inner_window</code> and <code>outer_window</code> <a href=\"https://github.com/mislav/will_paginate/blob/2-3-stable/lib/will_paginate/view_helpers.rb#L51-L52\" rel=\"nofollow\">options</a> to control how many page links are displayed. If you only want to show 5 pages on either side of the current page, your view would look like:</p>\n\n<pre><code>&lt;%= will_paginate @objects, inner_window: 5, outer_window: 0 %&gt;\n</code></pre>\n\n<p>Though because your current page is also included, you'll have to show an odd number (1 + N * 2), so I hope you're alright with 9 or 11.</p>\n\n<p>If you really want to get into it, you'll notice there's also a <a href=\"https://github.com/mislav/will_paginate/blob/2-3-stable/lib/will_paginate/view_helpers.rb#L67\" rel=\"nofollow\">renderer option</a> that lets you pass a custom link rendering class. The renderer instance needs to response to <code>prepare</code> and <code>to_html</code> like the <a href=\"https://github.com/mislav/will_paginate/blob/2-3-stable/lib/will_paginate/view_helpers.rb#L246\" rel=\"nofollow\">default renderer</a> does.</p>\n"}], "owner": {"reputation": 1, "user_id": 5049907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5722a2e67523ebf3110055fde2d822e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/5049907/sumeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443710458, "creation_date": 1443618895, "question_id": 32867126, "link": "https://stackoverflow.com/questions/32867126/will-paginate-rails-limit-num-of-pages-to-max-10", "title": "Will paginate rails limit num of pages to max 10?", "body": "<p>I am using will paginate for pagination. I have total 11 pages currently. At footer it shows all the 11 pages no matter on what page the user is. How can I display max 10 pages at footer. So if user comes on page no 5 it will show 5 pages before and after. Not all at once.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "mysql2"], "answers": [{"comments": [{"owner": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "edited": false, "score": 0, "creation_date": 1443618630, "post_id": 32866952, "comment_id": 53565987, "body": "I understand different formatting/data type, but I have a completely different value at birthday slot (1998-07-00 vs Tue, 12 Oct 2000) - where could it come from?"}, {"owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "reply_to_user": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "edited": false, "score": 0, "creation_date": 1443620420, "post_id": 32866952, "comment_id": 53567224, "body": "Rails should auto serialize datetimes for you.  Would have to have been added directly, bypassed serialize, or been a different column type at one time.  Just migrate it to proper format and all should be well.  Ie read it in and format like your other birthdays."}, {"owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "reply_to_user": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "edited": false, "score": 1, "creation_date": 1443621033, "post_id": 32866952, "comment_id": 53567690, "body": "On side note, you could add a validation for date format in your model for birthday and that would prevent the problem from recurring."}, {"owner": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "edited": false, "score": 0, "creation_date": 1443621441, "post_id": 32866952, "comment_id": 53568022, "body": "Still I don&#39;t understand why should i receive such different values when I&#39;m asking it while iterating over the whole table (<code>User.all</code>) vs asking object directly (<code>User.find</code>)"}, {"owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "reply_to_user": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "edited": false, "score": 0, "creation_date": 1443621553, "post_id": 32866952, "comment_id": 53568091, "body": "When you find it do a u.inspect"}, {"owner": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "edited": false, "score": 0, "creation_date": 1443627505, "post_id": 32866952, "comment_id": 53572179, "body": "If I inspect it, I get the correct type value. I even saved a new birthday date from <code>Date</code> class for this user but still I get the same kind of difference when iterating over the table with <code>User.all</code> vs asking directly <code>User.find</code>."}], "tags": [], "owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "is_accepted": false, "score": 1, "last_activity_date": 1443618463, "creation_date": 1443618463, "answer_id": 32866952, "question_id": 32866725, "link": "https://stackoverflow.com/questions/32866725/difference-in-an-attribute-value-when-asking-object-directly-vs-iterating-over-a/32866952#32866952", "title": "Difference in an attribute value when asking object directly vs iterating over all table entries", "body": "<p>When you just call User.all.map {|u| u } the user gets the message inspect passed to it.  Inspect by default just returns a nicely formatted version of your object.  So because it has bad data for birthday that is why it errors.  </p>\n\n<p><a href=\"http://apidock.com/rails/ActiveRecord/Base/inspect\" rel=\"nofollow\">http://apidock.com/rails/ActiveRecord/Base/inspect</a></p>\n\n<p>Solution is to do a data migration to get all your birthdays in expected format. </p>\n"}, {"comments": [{"owner": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "edited": false, "score": 0, "creation_date": 1443705808, "post_id": 32872205, "comment_id": 53607177, "body": "Yep, I mistakenly assumed that doing <code>reload!</code> in console before defining the <code>begin-rescue</code> block will also forget all the variables too, which it didn&#39;t apparently."}], "tags": [], "owner": {"reputation": 5652, "user_id": 465345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8d3a7a6d30d267b4aa4902f7f299258f?s=128&d=identicon&r=PG", "display_name": "Laas", "link": "https://stackoverflow.com/users/465345/laas"}, "is_accepted": true, "score": 1, "last_activity_date": 1443633847, "creation_date": 1443633847, "answer_id": 32872205, "question_id": 32866725, "link": "https://stackoverflow.com/questions/32866725/difference-in-an-attribute-value-when-asking-object-directly-vs-iterating-over-a/32872205#32872205", "title": "Difference in an attribute value when asking object directly vs iterating over all table entries", "body": "<p>Your problem is with the variable scope: within the <code>map</code> block, the <code>u</code> is defined to current iterated object, but outside that block <code>u</code> is <strong>undefined</strong>.</p>\n\n<p><em>Then how come the error output can give out the <code>u.id</code>?</em> you might ask.</p>\n\n<p>That is because you have <code>u</code> defined outside this whole block (perhaps some earlier testing).</p>\n\n<p>Observe this code:</p>\n\n<pre><code>u = 1\nputs \"before: #{u}\"\n5.times{|u| puts u}\nputs \"after: #{u}\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>before: 1\n0\n1\n2\n3\n4\nafter: 1\n</code></pre>\n"}], "owner": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 32872205, "answer_count": 2, "score": 0, "last_activity_date": 1443633847, "creation_date": 1443617843, "last_edit_date": 1443618466, "question_id": 32866725, "link": "https://stackoverflow.com/questions/32866725/difference-in-an-attribute-value-when-asking-object-directly-vs-iterating-over-a", "title": "Difference in an attribute value when asking object directly vs iterating over all table entries", "body": "<p>I  have a weird anomaly with a specific object in my table.</p>\n\n<p><strong>For ex</strong>. let's say I have an <code>User</code> table which has an attribute <code>birthday</code>.</p>\n\n<p>If I iterate over <code>User</code> table even without asking no attributes at all I get an error because of invalid entry:</p>\n\n<pre><code>1.9.3-p551 :022 &gt;   begin\n1.9.3-p551 :022 &gt;     User.all.map {|u| u }\n1.9.3-p551 :023?&gt;   rescue =&gt; e\n1.9.3-p551 :024?&gt;     puts \"Problem with user #{u.id}, error: #{e}\"\n1.9.3-p551 :025?&gt;   end\n  User Load (267.5ms)  SELECT `user`.* FROM `user`\nProblem with user 2569, error: Invalid date in field 'birthday': 1998-07-00\n =&gt; nil\n</code></pre>\n\n<p>Now if I ask directly from the current problematic object what is its birthday, it will give me the correct value with correct data type:</p>\n\n<pre><code>1.9.3-p551 :027 &gt; u = User.find(2569)\n1.9.3-p551 :027 &gt; u.birthday\n =&gt; Tue, 12 Oct 2000 \n</code></pre>\n\n<p>Attribute defined in <code>schema</code>:</p>\n\n<pre><code> create_table \"users\", :force =&gt; true do |t|\n  t.date      \"birthday\"\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "json", "carrierwave"], "comments": [{"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1443621725, "post_id": 32866305, "comment_id": 53568221, "body": "As I see <a href=\"http://stackoverflow.com/a/17918118/2968762\">here</a>, you can use JSON datatype with PostgreSQL"}], "answers": [{"comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1488183319, "post_id": 37305210, "comment_id": 72101234, "body": "Thanks, but I am trying to understand how to get from that text field the different url of every image."}], "tags": [], "owner": {"reputation": 43, "user_id": 2023117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ce870d57d6f0913e9d5da73de69cc6?s=128&d=identicon&r=PG", "display_name": "pedrocalgaro", "link": "https://stackoverflow.com/users/2023117/pedrocalgaro"}, "is_accepted": false, "score": 0, "last_activity_date": 1463588678, "creation_date": 1463588678, "answer_id": 37305210, "question_id": 32866305, "link": "https://stackoverflow.com/questions/32866305/mysql-syntaxerror-while-trying-multiple-image-upload-in-rails-using-carrierwave/37305210#37305210", "title": "Mysql syntaxerror while trying multiple image upload in rails using carrierwave gem", "body": "<p>As you can see here <a href=\"https://dev.mysql.com/doc/refman/5.7/en/json.html\" rel=\"nofollow\">https://dev.mysql.com/doc/refman/5.7/en/json.html</a></p>\n\n<p>JSON datatype is available only on Mysql 5.7.8 or above.</p>\n\n<p>And here <a href=\"https://github.com/rails/rails/pull/21110\" rel=\"nofollow\">https://github.com/rails/rails/pull/21110</a></p>\n\n<p>MySQL JSON type was added on Rails 5.</p>\n\n<p>So if your setup is below these configurations, you cant use JSON with Mysql.</p>\n\n<p>But you can workaround this problem using a :text type on your migration:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class AddImagesToListings &lt; ActiveRecord::Migration\n  def change\n    add_column :listings, :images, :text\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5393025, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ILxKKwobRHo/AAAAAAAAAAI/AAAAAAAAABw/mSnw5ACwiF8/photo.jpg?sz=128", "display_name": "Hiral Gandhi", "link": "https://stackoverflow.com/users/5393025/hiral-gandhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463588678, "creation_date": 1443616629, "question_id": 32866305, "link": "https://stackoverflow.com/questions/32866305/mysql-syntaxerror-while-trying-multiple-image-upload-in-rails-using-carrierwave", "title": "Mysql syntaxerror while trying multiple image upload in rails using carrierwave gem", "body": "<p>I'm following carrierwave documentation <a href=\"https://github.com/carrierwaveuploader/carrierwave\" rel=\"nofollow\">here</a> to upload multiple images to my listing model.\nWhen, I used the command </p>\n\n<pre><code>rails g migration add_images_to_listings images:json\n</code></pre>\n\n<p>migration gets successfully created like this -</p>\n\n<pre><code>class AddImagesToListings &lt; ActiveRecord::Migration\n  def change\n    add_column :listings, :images, :json\n  end\nend\n</code></pre>\n\n<p>but running rake db:migrate throws a mysql syntax error</p>\n\n<pre><code>     Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to\nyour MySQL server version for the right syntax to use near 'json'\n     at line 1: ALTER TABLE `listings` ADD `images` json/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:299:in `query'\n</code></pre>\n\n<p>I suspect this is because json data type is not supported with mysql. Is there some workaround?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "ruby-on-rails-4", "mailer"], "comments": [{"owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "edited": false, "score": 0, "creation_date": 1443620875, "post_id": 32866292, "comment_id": 53567561, "body": "There&#39;s an e-mail stack beyond Rails that has to be installed and configured before you&#39;ll be able to send mail. Heroku apps can use Sendgrid very easily, but you have to enable it. Have you added Sendgrid to your Heroku app?"}, {"owner": {"reputation": 78, "user_id": 4613417, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1qd1u.png?s=128&g=1", "display_name": "Knight Kolas", "link": "https://stackoverflow.com/users/4613417/knight-kolas"}, "reply_to_user": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "edited": false, "score": 0, "creation_date": 1443621066, "post_id": 32866292, "comment_id": 53567717, "body": "I did not know about it. I will do some research. This was not discussed in any of the tutorials"}, {"owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "edited": false, "score": 0, "creation_date": 1443621538, "post_id": 32866292, "comment_id": 53568081, "body": "Here&#39;s a good place to start: <a href=\"https://devcenter.heroku.com/articles/sendgrid\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/sendgrid</a>"}, {"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 0, "creation_date": 1443627414, "post_id": 32866292, "comment_id": 53572129, "body": "Here&#39;s where Heroku specifies that you need an external SMTP server to interact with <a href=\"https://devcenter.heroku.com/articles/smtp\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/smtp</a>"}], "answers": [{"tags": [], "owner": {"reputation": 78, "user_id": 4613417, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1qd1u.png?s=128&g=1", "display_name": "Knight Kolas", "link": "https://stackoverflow.com/users/4613417/knight-kolas"}, "is_accepted": false, "score": 0, "last_activity_date": 1443654446, "creation_date": 1443654446, "answer_id": 32876953, "question_id": 32866292, "link": "https://stackoverflow.com/questions/32866292/how-to-send-a-contact-me-email-from-my-rails-site/32876953#32876953", "title": "How to send a contact me email from my rails site", "body": "<p>Thank you for the tips on sendgrid, that was probably the next thing that I was going to bash my head agaist. Thank you for saving me the headache. My problem was deeper than this though. It seems that one of my gems was dependent on sql3 which was causing it not update my controller. I never noticed that I was not pushing my changes (oops!) I actually noticed it after I saw my own post and saw the difference in the error log and the controller in my github. Don't know how useful this question will be for the community, but who knows... Thank you for you help.</p>\n"}], "owner": {"reputation": 78, "user_id": 4613417, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1qd1u.png?s=128&g=1", "display_name": "Knight Kolas", "link": "https://stackoverflow.com/users/4613417/knight-kolas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 589, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443654446, "creation_date": 1443616594, "question_id": 32866292, "link": "https://stackoverflow.com/questions/32866292/how-to-send-a-contact-me-email-from-my-rails-site", "title": "How to send a contact me email from my rails site", "body": "<p>It seems like such a simple thing, I don't want to use devise or any users for that matter, this is my personal website, where I display my work. All I want to do is make a contact me email form so that I can recieve messages from the people that visit my site. All of the tutorial that I have encountered send the email TO the user. </p>\n\n<p>When I try to create an email. This is what I get:</p>\n\n<p>SMTP-AUTH requested but missing user name</p>\n\n<pre><code>@contact = Contact.new(params[:contact])\n@contact.request = request\nif @contact.deliver\n  flash.now[:notice] = 'Thank you, I will contact you soon.'\n  redirect_to root_path\nelse\n</code></pre>\n\n<p>this is my contact controller:</p>\n\n<pre><code>class ContactsController &lt; ApplicationController\n  def new\n    @contact = Contact.new\n  end\n\n  def create\n    @contact = Contact.new(params[:contact])\n    @contact.request = request\n    if @contact.valid?\n      ContactMe.contact_email(@contact).deliver\n      redirect_to root_path\n      flash[:notice] = \"Message sent from {@contact.name}\"\n    else     \n      render :new\n      flash.now[:error] = 'Could not send message as is. Please check email and phone fields.'\n    end\n  end\nend\n</code></pre>\n\n<p>contact model:</p>\n\n<pre><code>class Contact &lt; MailForm::Base\n  attribute :name,      :validate =&gt; true\n  attribute :email,     :validate =&gt; /\\A([\\w\\.%\\+\\-]+)@([\\w\\-]+\\.)+([\\w]{2,})\\z/i\n  attribute :message\n\n\n  # Declare the e-mail headers. It accepts anything the mail method\n  # in ActionMailer accepts.\n  def headers\n    {\n      :subject =&gt; \"Contact\",\n      :to =&gt; \"literallymyemail@gmail.com\",\n      :from =&gt; %(\"#{name}\" &lt;#{email}&gt;)\n    }\n  end\nend\n\nclass ContactMe &lt; ApplicationMailer\n\n  def contact_email(contact)\n    @contact = contact\n    mail(to: 'literallymyemail@gmail.com', from: @contact.email, :subject =&gt; \"Website Contact\")\n  end\nend\n</code></pre>\n\n<p>production.rb:</p>\n\n<pre><code>Rails.application.configure do\n  # Settings specified here will take precedence over those in config/application.rb.\n\n  # Code is not reloaded between requests.\n  config.cache_classes = true\n\n  # Eager load code on boot. This eager loads most of Rails and\n  # your application in memory, allowing both threaded web servers\n  # and those relying on copy on write to perform better.\n  # Rake tasks automatically ignore this option for performance.\n  config.eager_load = true\n\n  # Full error reports are disabled and caching is turned on.\n  config.consider_all_requests_local       = true\n  config.action_controller.perform_caching = true\n\n  # Enable Rack::Cache to put a simple HTTP cache in front of your application\n  # Add `rack-cache` to your Gemfile before enabling this.\n  # For large-scale production use, consider using a caching reverse proxy like\n  # NGINX, varnish or squid.\n  # config.action_dispatch.rack_cache = true\n\n  # Disable serving static files from the `/public` folder by default since\n  # Apache or NGINX already handles this.\n  config.serve_static_files = ENV['RAILS_SERVE_STATIC_FILES'].present?\n\n  # Compress JavaScripts and CSS.\n  config.assets.js_compressor = :uglifier\n  # config.assets.css_compressor = :sass\n  config.action_mailer.perform_deliveries = true\n  config.action_mailer.raise_delivery_errors = true\n  config.action_mailer.delivery_method = :smtp\n  config.action_mailer.default_url_options = { :host =&gt; 'nicolasdev.herokuapp.com' }\n  config.action_mailer.smtp_settings = {\n    :address              =&gt; \"smtp.gmail.com\",  \n    :port                 =&gt; 587,\n    :domain               =&gt; 'gmail.com',\n    :enable_starttls_auto =&gt; true,\n    :user_name            =&gt; ENV[\"GMAIL_USERNAME\"],\n    :password             =&gt; ENV[\"GMAIL_PASSWORD\"],\n    :authentication       =&gt; \"plain\"\n\n  }\n\n  # Do not fallback to assets pipeline if a precompiled asset is missed.\n  config.assets.compile = true\n  config.assets.precompile = ['*.js', '*.css', '*.jpg', '*.png', '*.gif', '*.ico'] \n\n  # Asset digests allow you to set far-future HTTP expiration dates on all assets,\n  # yet still be able to expire them through the digest params.\n  config.assets.digest = true\n\n  # `config.assets.precompile` and `config.assets.version` have moved to config/initializers/assets.rb\n\n  # Specifies the header that your server uses for sending files.\n  # config.action_dispatch.x_sendfile_header = 'X-Sendfile' # for Apache\n  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for NGINX\n\n  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.\n  # config.force_ssl = true\n\n  # Use the lowest log level to ensure availability of diagnostic information\n  # when problems arise.\n  config.log_level = :debug\n\n  # Prepend all log lines with the following tags.\n  # config.log_tags = [ :subdomain, :uuid ]\n\n  # Use a different logger for distributed setups.\n  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)\n\n  # Use a different cache store in production.\n  # config.cache_store = :mem_cache_store\n\n  # Enable serving of images, stylesheets, and JavaScripts from an asset server.\n  # config.action_controller.asset_host = 'http://assets.example.com'\n\n  # Ignore bad email addresses and do not raise email delivery errors.\n  # Set this to true and configure the email server for immediate delivery to raise delivery errors.\n  # config.action_mailer.raise_delivery_errors = false\n\n  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to\n  # the I18n.default_locale when a translation cannot be found).\n  config.i18n.fallbacks = true\n\n  # Send deprecation notices to registered listeners.\n  config.active_support.deprecation = :notify\n\n  # Use default logging formatter so that PID and timestamp are not suppressed.\n  config.log_formatter = ::Logger::Formatter.new\n\n  # Do not dump schema after migrations.\n  config.active_record.dump_schema_after_migration = false\nend\n</code></pre>\n\n<p>application.yml:</p>\n\n<pre><code>GMAIL_USERNAME: 'literallymyemail@gmail.com'\nGMAIL_PASSWORD: 'literallymyemailpassword'\n</code></pre>\n\n<p>I am probably making numerous mistakes, but please have mercy on me. I have been at this for some time, lurking about other posts and tutorials to no avail. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2602, "user_id": 1563325, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/61fc59dcb58364ad1be48abcbf4c5244?s=128&d=identicon&r=PG", "display_name": "muichkine", "link": "https://stackoverflow.com/users/1563325/muichkine"}, "edited": false, "score": 0, "creation_date": 1443616671, "post_id": 32866229, "comment_id": 53564631, "body": "It&#39;s probably intended. But well... look at Ruby specs. :)"}, {"owner": {"reputation": 2499, "user_id": 5208760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L6VNv.jpg?s=128&g=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/5208760/mateusz"}, "edited": false, "score": 0, "creation_date": 1443617106, "post_id": 32866229, "comment_id": 53564934, "body": "It gives the expected output when you use an argument for first/last method. For an explanation check @ndn&#39;s post."}], "answers": [{"comments": [{"owner": {"reputation": 2028, "user_id": 1657377, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4iVGJ.png?s=128&g=1", "display_name": "jethroo", "link": "https://stackoverflow.com/users/1657377/jethroo"}, "edited": false, "score": 1, "creation_date": 1443617465, "post_id": 32866464, "comment_id": 53565167, "body": "thanks, ok I see it even stated in the comments <a href=\"https://github.com/ruby/ruby/blob/a19830c42ce839ac1b4557cc30fe78757447f66c/range.c#L889\" rel=\"nofollow noreferrer\">github.com/ruby/ruby/blob/&hellip;</a>, but not quite intuitive though ;)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1443617991, "post_id": 32866464, "comment_id": 53565553, "body": "IMO, it&#39;s broken by design. <code>begin</code> should return the beginning object and <code>first</code> should behave just like <code>Array#first</code> and <code>Enumerable#first</code> (same for <code>end</code> / <code>last</code>)."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 6, "last_activity_date": 1443617058, "creation_date": 1443617058, "answer_id": 32866464, "question_id": 32866229, "link": "https://stackoverflow.com/questions/32866229/ruby-ranges-first-and-last-issue/32866464#32866464", "title": "Ruby Ranges first and last issue", "body": "<p>The reason is that <a href=\"https://github.com/ruby/ruby/blob/a19830c42ce839ac1b4557cc30fe78757447f66c/range.c#L870\"><code>Range#first</code> is defined to return <code>Range#begin</code> if no argument is passed</a>.</p>\n\n<p>Similarly - <a href=\"https://github.com/ruby/ruby/blob/a19830c42ce839ac1b4557cc30fe78757447f66c/range.c#L901\"><code>Range#last</code> => <code>Range#end</code></a>.</p>\n"}], "owner": {"reputation": 2028, "user_id": 1657377, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4iVGJ.png?s=128&g=1", "display_name": "jethroo", "link": "https://stackoverflow.com/users/1657377/jethroo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 1, "accepted_answer_id": 32866464, "answer_count": 1, "score": 4, "last_activity_date": 1443617058, "creation_date": 1443616384, "last_edit_date": 1443616615, "question_id": 32866229, "link": "https://stackoverflow.com/questions/32866229/ruby-ranges-first-and-last-issue", "title": "Ruby Ranges first and last issue", "body": "<p>I stumbled over strange behaviour while playing with ranges, expected:</p>\n\n<pre><code>(1...1).count\n# =&gt; 0 \n(1...1).first(1)\n# =&gt; [] \n(1...1).last(1)\n# =&gt; []\n(1...1).to_a\n# =&gt; [] \n</code></pre>\n\n<p>but</p>\n\n<pre><code>(1...1).first\n# =&gt; 1\n(1...1).last\n# =&gt; 1\n</code></pre>\n\n<p>Do I miss something or is this intended behaviour? </p>\n"}, {"tags": ["ruby", "chef-infra", "lazy-evaluation", "chef-recipe", "chef-template"], "answers": [{"tags": [], "owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "is_accepted": false, "score": 0, "last_activity_date": 1443620174, "creation_date": 1443620174, "answer_id": 32867566, "question_id": 32865395, "link": "https://stackoverflow.com/questions/32865395/how-does-chef-include-files-generated-on-runtime-as-a-template-source/32867566#32867566", "title": "How does Chef include files generated on runtime as a template source", "body": "<p>Quoting the template documentation:</p>\n\n<blockquote>\n  <p><code>source</code>   Ruby Types: String, Array</p>\n  \n  <p>The location of a template file. By default, the chef-client looks for\n  a template file in the /templates directory of a cookbook. When the\n  local property is set to true, use to specify the path to a template\n  on the local node. This property may also be used to distribute\n  specific files to specific platforms. See \u201cFile Specificity\u201d below for\n  more information. Default value: the name of the resource block. See\n  \u201cSyntax\u201d section above for more information.)</p>\n</blockquote>\n\n<p>And</p>\n\n<blockquote>\n<pre><code>local \n</code></pre>\n  \n  <p>Ruby Types: TrueClass, FalseClass</p>\n  \n  <p>Load a template from a local path. By default, the chef-client loads\n  templates from a cookbook\u2019s /templates directory. When this property\n  is set to true, use the source property to specify the path to a\n  template on the local node. Default value: false.</p>\n</blockquote>\n\n<p>so what you can do is:</p>\n\n<pre><code># generate the local .erb file let's say source.erb\n\ntemplate \"/path/to/file\" do\n  source \"/path/to/source.erb\"\n  local true\nend\n</code></pre>\n\n<p>Your question sounds like and XY problem, reading a csv file to make a template sounds counter-productive and could probably be done with attributes and taking advantage of the <code>variable</code> attribute of <code>template</code> resource.</p>\n"}, {"tags": [], "owner": {"reputation": 3906, "user_id": 2777098, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2qchL.png?s=128&g=1", "display_name": "display name", "link": "https://stackoverflow.com/users/2777098/display-name"}, "is_accepted": false, "score": 0, "last_activity_date": 1444048773, "creation_date": 1444048773, "answer_id": 32948869, "question_id": 32865395, "link": "https://stackoverflow.com/questions/32865395/how-does-chef-include-files-generated-on-runtime-as-a-template-source/32948869#32948869", "title": "How does Chef include files generated on runtime as a template source", "body": "<p>Assuming you know how to capture the values from the CSV file as a local variable in the recipe.</p>\n\n<pre><code>Examples:\n csv_hostname\n csv_fqdn\n</code></pre>\n\n<p>Here is what you do to create a template with lazy loading attributes. The following example creates a config file.</p>\n\n<p>example.erb file</p>\n\n<pre><code># Dynamically generated by awesome Chef so don't alter by hand.\nHOSTNAME=&lt;% @host_name %&gt;\nFQDN=&lt;% @fqdn %&gt;\n</code></pre>\n\n<p>recipe.rb file</p>\n\n<pre><code>template 'path\\to\\example.config' do\n  source 'example.erb'\n  variables(\n    lazy {\n      :host_name =&gt; csv_hostname,\n      :fqdn =&gt; csv_fqdn\n  })\nend\n</code></pre>\n\n<p>If you need it to run at compile time, add the action to the block.</p>\n\n<pre><code>template 'xxx' do\n  # blah blah\nend.run_action(:create)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 492304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b150dd61d16fb40465a8327755ea00a2?s=128&d=identicon&r=PG", "display_name": "Aditya Agarwal", "link": "https://stackoverflow.com/users/492304/aditya-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 836, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444048773, "creation_date": 1443613962, "last_edit_date": 1443614234, "question_id": 32865395, "link": "https://stackoverflow.com/questions/32865395/how-does-chef-include-files-generated-on-runtime-as-a-template-source", "title": "How does Chef include files generated on runtime as a template source", "body": "<p>Using Chef recipe, I am first generating a <code>.erb</code> file dynamically based on inputs from a CSV file and then I want to use that <code>.erb</code> file as a template source. But unfortunately the changes made (in <code>.erb</code> file) are not considered while the recipe is converging the resources. I also tried to use lazy evaluation but not able to figure out how to use it for the template source. </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "json", "coffeescript"], "comments": [{"owner": {"reputation": 2199, "user_id": 4268574, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DIMLY.jpg?s=128&g=1", "display_name": "General Failure", "link": "https://stackoverflow.com/users/4268574/general-failure"}, "edited": false, "score": 0, "creation_date": 1443613996, "post_id": 32865184, "comment_id": 53562810, "body": "No way. Rails runs at server and java/coffeescript run at client. If You want to transmit data from client to server, You can use ajax queries, but they are requires new routes and controller methods at server."}, {"owner": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "edited": false, "score": 0, "creation_date": 1443621659, "post_id": 32865184, "comment_id": 53568161, "body": "Is this CoffeeScript a client side JavaScript file or rendered by <code>respond_to</code> block?"}, {"owner": {"reputation": 763, "user_id": 3883836, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/c3c8965a3415942df1d87991e0ca4c41?s=128&d=identicon&r=PG&f=1", "display_name": "AlonP", "link": "https://stackoverflow.com/users/3883836/alonp"}, "edited": false, "score": 0, "creation_date": 1443621840, "post_id": 32865184, "comment_id": 53568283, "body": "haa.. ok I understand. so how should I solve my problem of showing the category name? should I bring all categories and compare to the category_id in the client side?"}], "answers": [{"comments": [{"owner": {"reputation": 19544, "user_id": 317989, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2cc8d0c8db8ad0ff2ed65ff3f5a56dd6?s=128&d=identicon&r=PG", "display_name": "house9", "link": "https://stackoverflow.com/users/317989/house9"}, "edited": false, "score": 0, "creation_date": 1443636136, "post_id": 32872713, "comment_id": 53577222, "body": "NOTE: if that code is in a coffeescript file the erb code will be evaluated once (during asset compilation) only and probably not what you want. In development environment it will be re-evaluated every time you change the code"}], "tags": [], "owner": {"reputation": 763, "user_id": 3883836, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/c3c8965a3415942df1d87991e0ca4c41?s=128&d=identicon&r=PG&f=1", "display_name": "AlonP", "link": "https://stackoverflow.com/users/3883836/alonp"}, "is_accepted": false, "score": 0, "last_activity_date": 1443635674, "creation_date": 1443635674, "answer_id": 32872713, "question_id": 32865184, "link": "https://stackoverflow.com/questions/32865184/save-coffeescript-json-object-data-inside-a-rails-variable/32872713#32872713", "title": "Save CoffeeScript json object data inside a Rails variable", "body": "<p>I'm not sure if it's the correct answer because it seems to be ineffective, but it works fine so I'll use it:</p>\n\n<pre><code>set_equipment = (eqp) -&gt; \n\n    // Creating an empty string variable for the result category name\n    cat = \"\";\n\n\n    // Bringing all categories from DB and save them as a json object\n\n    &lt;% all_cat = Category.all %&gt;\n    categories = &lt;%= all_cat.to_json %&gt;\n\n\n    // Comparing each category to the equipment category_id\n\n    $.each categories, (i, v) =&gt;\n        cat = v.name if (v.id == eqp.category_id) \n\n\n    // Display the category name in the html\n\n    $(\"#display_equipment_category_value\").html cat\n</code></pre>\n"}], "owner": {"reputation": 763, "user_id": 3883836, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/c3c8965a3415942df1d87991e0ca4c41?s=128&d=identicon&r=PG&f=1", "display_name": "AlonP", "link": "https://stackoverflow.com/users/3883836/alonp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443635674, "creation_date": 1443613276, "question_id": 32865184, "link": "https://stackoverflow.com/questions/32865184/save-coffeescript-json-object-data-inside-a-rails-variable", "title": "Save CoffeeScript json object data inside a Rails variable", "body": "<p>I have a js.coffee.erb file and in this file there is a function which gets a 'equipment' json object (in javascript) and pastes some of the data to the html.<br>\nthe json object is saved in variable called <code>eqp</code>.</p>\n\n<p>Each equipment has a <code>category</code> (reference to other table object).<br>\nIn the json object, there is only the <code>equipment.category_id</code>, so to get the category name I wrote this statement:</p>\n\n<pre><code>$(\"#display_equipment_category_value\").html &lt;%= Category.find(eqp.category_id).name %&gt;\n</code></pre>\n\n<p>The problem is that it can't defined a rails variable called <code>eqp</code> because it's not a rails object. </p>\n\n<p>How could I save the js json <code>eqp.category_id</code> inside a rails variable?</p>\n\n<pre><code>set_equipment = (eqp) -&gt; \n    &lt;% cat_id =  ?????  %&gt;      -     # save the eqp.category_id into cat_id\n    $(\"#display_equipment_category_value\").html &lt;%= Category.find(cat_id).name %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "cucumber"], "comments": [{"owner": {"reputation": 319, "user_id": 3995028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b45fcf2ff847244d2a02590f1eee20?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod Adair", "link": "https://stackoverflow.com/users/3995028/jarod-adair"}, "edited": false, "score": 0, "creation_date": 1444052999, "post_id": 32864934, "comment_id": 53725245, "body": "scenario.status may give you what you need.  I&#39;ve had scenarios skip, I&#39;m just not sure how to force one right now."}], "answers": [{"tags": [], "owner": {"reputation": 319, "user_id": 3995028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b45fcf2ff847244d2a02590f1eee20?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod Adair", "link": "https://stackoverflow.com/users/3995028/jarod-adair"}, "is_accepted": false, "score": 0, "last_activity_date": 1444053467, "creation_date": 1444053467, "answer_id": 32950445, "question_id": 32864934, "link": "https://stackoverflow.com/questions/32864934/how-can-i-get-the-skipped-scenarios-count-in-cucumber-hooks/32950445#32950445", "title": "How can i get the skipped scenarios count in cucumber hooks", "body": "<p>Not sure why this is, but there is a .skipped? method for a step, but not for the scenario itself. If you add an AfterStep hook, you will be returned an array of information about the step. From there, you can collect the information that you need.</p>\n\n<pre><code>AfterStep do |blah|\n  blah.first.skipped?\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4714959, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/01a77cc6327a1a9b7ed39e3e9f488f42?s=128&d=identicon&r=PG&f=1", "display_name": "Rad N", "link": "https://stackoverflow.com/users/4714959/rad-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444053467, "creation_date": 1443612578, "question_id": 32864934, "link": "https://stackoverflow.com/questions/32864934/how-can-i-get-the-skipped-scenarios-count-in-cucumber-hooks", "title": "How can i get the skipped scenarios count in cucumber hooks", "body": "<p>Is there any cucumber command to get the skipped scenarios in cucumber ruby framework. like</p>\n\n<pre><code>after do |scenario|\n  scenario.skipped?\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-admin"], "answers": [{"comments": [{"owner": {"reputation": 2409, "user_id": 562557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb04e4cf008d137f309a2a1a9ca6cb55?s=128&d=identicon&r=PG", "display_name": "thebenedict", "link": "https://stackoverflow.com/users/562557/thebenedict"}, "reply_to_user": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1443681854, "post_id": 32865135, "comment_id": 53592521, "body": "Could you add the <code>Item</code>, <code>Shop</code> and <code>Category</code> associations to your question as code? Do items have a category that&#39;s separate from their shop&#39;s category?"}, {"owner": {"reputation": 2409, "user_id": 562557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb04e4cf008d137f309a2a1a9ca6cb55?s=128&d=identicon&r=PG", "display_name": "thebenedict", "link": "https://stackoverflow.com/users/562557/thebenedict"}, "reply_to_user": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1443684819, "post_id": 32865135, "comment_id": 53594228, "body": "Edited my answer, but (sorry about this), my syntax for the join may not be right and I can&#39;t easily test it. Corrections welcome, hope this gives you the idea."}, {"owner": {"reputation": 2409, "user_id": 562557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb04e4cf008d137f309a2a1a9ca6cb55?s=128&d=identicon&r=PG", "display_name": "thebenedict", "link": "https://stackoverflow.com/users/562557/thebenedict"}, "reply_to_user": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1443687796, "post_id": 32865135, "comment_id": 53595850, "body": "I&#39;m surprised you needed to map <code>to_s</code>, but yeah, I can&#39;t think of a way to scope on create until the <code>item</code> is saved with a <code>shop_id</code>."}, {"owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1443688547, "post_id": 32865135, "comment_id": 53596251, "body": "You are right. It worked without mapping <code>to_s</code>. We can&#39;t change values of fields dynamically on views, depending on chosen values in <code>rails_admin</code>, are we?"}, {"owner": {"reputation": 2409, "user_id": 562557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb04e4cf008d137f309a2a1a9ca6cb55?s=128&d=identicon&r=PG", "display_name": "thebenedict", "link": "https://stackoverflow.com/users/562557/thebenedict"}, "reply_to_user": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1443689255, "post_id": 32865135, "comment_id": 53596660, "body": "Best I can tell you have to handle it in the view: either require the user to &#39;save and edit&#39; before exposing the category field, or populate the dropdown with an ajax request after the user selects  a shop. Neither is especially pretty. The first is easier but clunky UX."}, {"owner": {"reputation": 7067, "user_id": 1729347, "user_type": "registered", "profile_image": "https://graph.facebook.com/583991949/picture?type=large", "display_name": "Peter T.", "link": "https://stackoverflow.com/users/1729347/peter-t"}, "edited": false, "score": 0, "creation_date": 1601637022, "post_id": 32865135, "comment_id": 113474644, "body": "I think this answer is valid only if <code>shop_id</code> is read-only in the edit form. If it&#39;s editable, then changing shop in the edit form won&#39;t take place in categories as it will still show the old shop list. Ref <a href=\"https://github.com/sferik/rails_admin/wiki/Associations-scoping\" rel=\"nofollow noreferrer\">github.com/sferik/rails_admin/wiki/Associations-scoping</a>  &quot;bindings[:object] can be null for new parent records! Also note that the scope takes in to account the saved version of the record, not considering any unsaved changes you may have made in the edit form. If you change the team&#39;s league, you&#39;ll still see the players from the old league until you save.&quot;"}], "tags": [], "owner": {"reputation": 2409, "user_id": 562557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb04e4cf008d137f309a2a1a9ca6cb55?s=128&d=identicon&r=PG", "display_name": "thebenedict", "link": "https://stackoverflow.com/users/562557/thebenedict"}, "is_accepted": true, "score": 2, "last_activity_date": 1443684764, "last_edit_date": 1443684764, "creation_date": 1443613129, "answer_id": 32865135, "question_id": 32864803, "link": "https://stackoverflow.com/questions/32864803/rails-admin-change-values-of-enum-field-depending-of-association/32865135#32865135", "title": "Rails_admin, change values of enum field depending of association", "body": "<p>rails_admin supports scoped associations. See:</p>\n\n<p><a href=\"https://github.com/sferik/rails_admin/wiki/Associations-scoping\" rel=\"nofollow\">https://github.com/sferik/rails_admin/wiki/Associations-scoping</a></p>\n\n<p>For example:</p>\n\n<pre><code>config.model Item do\n  field :category do\n    associated_collection_cache_all false  \n    associated_collection_scope do\n      item = bindings[:object]\n      Proc.new { |scope|\n        scope = scope.joins(:shops).where(shops: {id: item.shop_id}) if item.present?\n      }\n    end\n  end\nend\n</code></pre>\n\n<p>Note the warning that \"bindings[:object] can be null for new parent records!\". You may have to save the Item before the scope takes effect. In the past I've added a conditional to the active_admin form so the scoped field only shows up once the record is saved.</p>\n"}], "owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1681, "favorite_count": 0, "accepted_answer_id": 32865135, "answer_count": 1, "score": 2, "last_activity_date": 1443687061, "creation_date": 1443612174, "last_edit_date": 1443687061, "question_id": 32864803, "link": "https://stackoverflow.com/questions/32864803/rails-admin-change-values-of-enum-field-depending-of-association", "title": "Rails_admin, change values of enum field depending of association", "body": "<p>I have four models: <code>Shop</code>, <code>Item</code>, <code>Category</code>, <code>SubCategory</code></p>\n\n<p><code>Shops</code> has  <code>has_and_belongs_to_many</code> association with <code>Category</code> and <code>SubCategory</code>.</p>\n\n<p><code>Shops</code> has <code>has_many</code> association with <code>Items</code>.</p>\n\n<p><code>Category</code> has <code>has_many</code> association with <code>SubCategories</code>.</p>\n\n<p>Both <code>Category</code> and <code>SubCategory</code> has_many <code>Items</code>.</p>\n\n<p>When I create <code>Shop</code> I can choose a lot of Categories and SubCategories.</p>\n\n<p>When I try to create <code>Item</code>, <code>rails_admin</code> creates select boxes for Categories and SubCategories. However, there is problem. <strong>It makes me to choose from ALL categories and subcategories</strong>.</p>\n\n<p>I want to be able to select only categories and subcategories which are belong to my selected shop.</p>\n\n<p>Is it possible in rails_admin to change select enums values depending on other models associations? </p>\n\n<p>Code for <code>Category</code></p>\n\n<pre><code>class Category\n    include Mongoid::Document\n    has_many :sub_categories, inverse_of: :category\n    has_many :items\n\n    accepts_nested_attributes_for :sub_categories\nend\n</code></pre>\n\n<p>Code for <code>SubCategory</code></p>\n\n<pre><code>class SubCategory\n    include Mongoid::Document\n    has_many :items\n    belongs_to :category, inverse_of: :sub_categories\nend\n</code></pre>\n\n<p>Code for <code>Shop</code></p>\n\n<pre><code>class Shop\n    include Mongoid::Document\n    has_many :items, dependent: :destroy, inverse_of: :shop\n    has_and_belongs_to_many :categories, inverse_of: nil\n    has_and_belongs_to_many :sub_categories, inverse_of: nil\n    accepts_nested_attributes_for :items\nend\n</code></pre>\n\n<p>Code for <code>Item</code></p>\n\n<pre><code>class Item\n    include Mongoid::Document\n    belongs_to :shop, inverse_of: :items\n    belongs_to :category\n    belongs_to :sub_category\nend\n</code></pre>\n\n<p><strong>============================ Possible solution =======================</strong></p>\n\n<p>Because there is one sided <code>has_and_belongs_to_many</code> assocation between <code>Shop</code> and <code>Category</code>,  That means <code>Shop</code> stores array of ids of <code>Categories</code>.</p>\n\n<p>Also my models are <strong>Mongoid Documents</strong>, which means that I can not use joins.</p>\n\n<p>In my <code>Item edit</code> action I have added this code:</p>\n\n<pre><code>field :category do\n    associated_collection_cache_all false\n    associated_collection_scope do\n       item = bindings[:object]\n      shop = item.shop\n      Proc.new { |scope|\n        scope = scope.where(id: {\"$in\" =&gt; shop.category_ids.map(&amp;:to_s)}) if item.present?\n      }\n    end\nend\n</code></pre>\n\n<p>Now it allows me to choose Categories by Shops Categories. However, there is a problem that I can not use this on <code>create</code> action</p>\n"}, {"tags": ["ruby", "rubygems", "win32ole"], "answers": [{"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": true, "score": 1, "last_activity_date": 1443625355, "creation_date": 1443625355, "answer_id": 32869498, "question_id": 32864782, "link": "https://stackoverflow.com/questions/32864782/autoitx3-load-error/32869498#32869498", "title": "AutoItX3 load error", "body": "<p>In order to use the COM from AutoIt you first need to have the AutoItX3.dll and register it with regsvr32.\nInstall the program from their website <a href=\"https://www.autoitscript.com/site/autoit/\" rel=\"nofollow\">https://www.autoitscript.com/site/autoit/</a>, cd to the folder where the AutoItX3.dll is present and run <code>regsvr32 AutoItX3.dll</code>\nAlternatively you can <code>gem install</code> a gem that includes this dll, like eg Selenium or rautomation and again register that dll.</p>\n"}], "owner": {"reputation": 165, "user_id": 4613255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7016902c524690bb7767ac68d7e15a?s=128&d=identicon&r=PG", "display_name": "mohammad mahmoodi", "link": "https://stackoverflow.com/users/4613255/mohammad-mahmoodi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 32869498, "answer_count": 1, "score": 0, "last_activity_date": 1509620873, "creation_date": 1443612127, "last_edit_date": 1509620873, "question_id": 32864782, "link": "https://stackoverflow.com/questions/32864782/autoitx3-load-error", "title": "AutoItX3 load error", "body": "<p>i have some problem on AutoItX3 when i start script , script return unknown ole server</p>\n\n<p>click.rb:</p>\n\n<pre><code>require 'win32ole'\n\nWIN32OLE.new(\"AutoItX3.Control\")\n</code></pre>\n\n<p>error:\n<a href=\"https://i.stack.imgur.com/SOZSd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SOZSd.png\" alt=\"enter image description here\"></a></p>\n\n<p>also i follow up this <a href=\"https://www.ruby-forum.com/topic/207990\" rel=\"nofollow noreferrer\">tutorial</a></p>\n"}, {"tags": ["ruby", "csv"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443613418, "post_id": 32864752, "comment_id": 53562441, "body": "Except that <code>#{}</code> is not a constructor :)"}], "tags": [], "owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "is_accepted": false, "score": 0, "last_activity_date": 1443615804, "last_edit_date": 1443615804, "creation_date": 1443612018, "answer_id": 32864752, "question_id": 32864620, "link": "https://stackoverflow.com/questions/32864620/how-to-sequentially-create-multiple-csv-files-in-ruby/32864752#32864752", "title": "How to sequentially create multiple CSV files in Ruby?", "body": "<p><code>#{}</code> can only be used in strings with double quotes <code>\"</code>. So change your code to:</p>\n\n<pre><code>for i in 1..1000\n  logfile = File.new(\"C:\\Users\\hp1\\Desktop\\Datasets\\New File\\UDID#{i}\\.csv\",\"a\")\n  # other stuff\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1443612795, "post_id": 32864820, "comment_id": 53562030, "body": "how does this add to my existing answer?"}], "tags": [], "owner": {"reputation": 6838, "user_id": 680001, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a1ec53845532ff7ab726ea809cffa74?s=128&d=identicon&r=PG", "display_name": "Sayuj", "link": "https://stackoverflow.com/users/680001/sayuj"}, "is_accepted": false, "score": 0, "last_activity_date": 1443613436, "last_edit_date": 1443613436, "creation_date": 1443612209, "answer_id": 32864820, "question_id": 32864620, "link": "https://stackoverflow.com/questions/32864620/how-to-sequentially-create-multiple-csv-files-in-ruby/32864820#32864820", "title": "How to sequentially create multiple CSV files in Ruby?", "body": "<pre><code>(1..10).each { |i| logfile = File.new(\"/base/path/UDID#{i}.csv\") }\n</code></pre>\n\n<p>You must use double quote (\") when you need string interpolation. </p>\n"}, {"comments": [{"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "edited": false, "score": 0, "creation_date": 1443617445, "post_id": 32865067, "comment_id": 53565147, "body": "Ok, that worked! Thanks! As for why I need this, actually my original problem can be found here: <a href=\"http://stackoverflow.com/questions/32797346/why-is-the-hashed-content-not-getting-saved-into-the-csv-file\" title=\"why is the hashed content not getting saved into the csv file\">stackoverflow.com/questions/32797346/&hellip;</a> So, because the hashed array can&#39;t store so many values, I thought of partitioning my dataset into smaller manageable chunks, hashing them, storing them in separate CSV files (which is this question), &amp; then compare them with subsequent hashings."}, {"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "reply_to_user": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "edited": false, "score": 1, "creation_date": 1443637442, "post_id": 32865067, "comment_id": 53577896, "body": "If this answer solves the problem of your question you should accept the answer."}, {"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1443681473, "post_id": 32865067, "comment_id": 53592329, "body": "for a thorough solution +1"}], "tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": false, "score": 2, "last_activity_date": 1443613247, "last_edit_date": 1443613247, "creation_date": 1443612900, "answer_id": 32865067, "question_id": 32864620, "link": "https://stackoverflow.com/questions/32864620/how-to-sequentially-create-multiple-csv-files-in-ruby/32865067#32865067", "title": "How to sequentially create multiple CSV files in Ruby?", "body": "<p>The <code>'</code> is one problem, another problem is the path.</p>\n\n<p>In your posting the <code>New File</code> must exist as a directory. Inside this directory must exist another directories like <code>UDID0001</code>. This gets a <code>.csv</code> file. </p>\n\n<p>Correct is (I don't use the non-rubyesk for-loop):</p>\n\n<pre><code>1.upto(1000) do |i|\n    logfile = File.new(\"C:\\\\Users\\\\hp1\\\\Desktop\\\\Datasets\\\\UDID#{i}.csv\", \"a\")\n    #I'll do some processing here\n    logfile.close #Don't forget to close the file\nend\n</code></pre>\n\n<p>Inside <code>\"</code> the backslash must be masked (<code>\\\\</code>). Instead you may use <code>/</code>:</p>\n\n<pre><code>logfile = File.new(\"C:/Users/hp1/Desktop/Datasets/New File/UDID#{i}/.csv\", \"a\")\n</code></pre>\n\n<p>Another possibility is the usage of <code>%i</code> to insert the number:</p>\n\n<pre><code>    logfile = File.new(\"C:/Users/hp1/Desktop/Datasets/New File/UDID%02i/.csv\" % i, \"a\")\n</code></pre>\n\n<p>I prefer to use <code>open</code>, then the file is closed with the end of the block:</p>\n\n<pre><code>    File.open(\"C:/Users/hp1/Desktop/Datasets/New File/UDID%04i/.csv\" % i, \"a\") do |logfile|\n      #I'll do some processing here\n    end #closes the file\n</code></pre>\n\n<p><strong>Warning:</strong></p>\n\n<p>I'm not sure, if you really want to create 1000 log files (The File is opened inside the loop. so each step creates a file.).\nIf yes, then the <code>%04i</code>-version has the advantage, that the files get all the same number of digits (starting with <code>0001</code> and ending with <code>1000</code>).</p>\n"}], "owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1443615804, "creation_date": 1443611530, "last_edit_date": 1443612397, "question_id": 32864620, "link": "https://stackoverflow.com/questions/32864620/how-to-sequentially-create-multiple-csv-files-in-ruby", "title": "How to sequentially create multiple CSV files in Ruby?", "body": "<p>Silly question, but I want to do some processing on a dataset and put them into different CSVs, like <code>UDID1.csv</code>, <code>UDID2.csv</code>, ..., <code>UDID1000.csv</code>. So this is my code:</p>\n\n<pre><code>for i in 1..1000\n    logfile = File.new('C:\\Users\\hp1\\Desktop\\Datasets\\New File\\UDID#{i}\\.csv',\"a\")\n    #I'll do some processing here\nend\n</code></pre>\n\n<p>But the program throws an error when running because of the <code>UDID#{i}</code> part. So, how to overcome this issue? Thanks.</p>\n\n<p>Edit: This is the error:</p>\n\n<pre><code>in `initialize': No such file or directory @ rb_sysopen - C:\\Users\\hp1\\Desktop\\Datasets\\New File\\udid#{1}\\.csv (Errno::ENOENT)from C:/Ruby21/bin/hashedUDID.rb:38:in `new' from C:/Ruby21/bin/hashedUDID.rb:38:in '&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ios", "ruby-on-rails", "ruby", "video", "carrierwave"], "answers": [{"tags": [], "owner": {"reputation": 5851, "user_id": 1571232, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fyBxG.jpg?s=128&g=1", "display_name": "Venk", "link": "https://stackoverflow.com/users/1571232/venk"}, "is_accepted": false, "score": 0, "last_activity_date": 1443611790, "creation_date": 1443611790, "answer_id": 32864684, "question_id": 32864468, "link": "https://stackoverflow.com/questions/32864468/track-progress-for-video-uploading-on-ios-with-rails-server/32864684#32864684", "title": "Track Progress for Video Uploading on iOS with Rails Server", "body": "<p>You can get the send data and total data using the following delegate,</p>\n\n<pre><code>- (void)connection:(NSURLConnection *)connection\n   didSendBodyData:(NSInteger)bytesWritten\n totalBytesWritten:(NSInteger)totalBytesWritten\ntotalBytesExpectedToWrite:(NSInteger)totalBytesExpectedToWrite\n</code></pre>\n\n<p>Reference : <a href=\"https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/#//apple_ref/occ/intfm/NSURLConnectionDataDelegate/connection:didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite\" rel=\"nofollow\">https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/#//apple_ref/occ/intfm/NSURLConnectionDataDelegate/connection:didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite</a>:</p>\n"}], "owner": {"reputation": 173, "user_id": 2877650, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100000217088052/picture?type=large", "display_name": "Sync Mnemosyne", "link": "https://stackoverflow.com/users/2877650/sync-mnemosyne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443611790, "creation_date": 1443610991, "question_id": 32864468, "link": "https://stackoverflow.com/questions/32864468/track-progress-for-video-uploading-on-ios-with-rails-server", "title": "Track Progress for Video Uploading on iOS with Rails Server", "body": "<p>I am a newbie with Ruby on Rails and right now I am building an API for uploading a Video to my Rails Server. I have built my uploading API with Carrierwave. This is actually going well with me. However on the iOS side, I need to be able to track the video uploading progress. I need pro on Rails to give me an advice on how to do this on my Rails API or maybe on the iOS app. Also, I am getting a Timeout on NSURLConnection while uploading the video which is kind of a problem for me.</p>\n\n<p>Rails API Code Snippet</p>\n\n<pre><code>    data = params[:business_asset][:video].to_s\n    io = BusinessVideoString.new(Base64.decode64(data))\n    io.original_filename = \"foobar.mp4\"\n    io.content_type = \"video/mp4\"\n    @business_asset.video = io\n\n    if @business_asset.save\n      render :json =&gt; { :video =&gt; @business.business_asset ,:message =&gt; \"success\"},:status =&gt; 200 \n    end\n</code></pre>\n\n<p>On the iOS Side, I am using NSURLConnection methods</p>\n\n<pre><code>   - (void) postRequestFromUrl: (NSString *) urlString withDictionary: (NSDictionary *) post{\n\n        NSURL *url = [NSURL URLWithString:urlString];\n        NSError *error;\n        NSData *postData = [NSJSONSerialization dataWithJSONObject:post options:0 error:&amp;error];\n        NSString *  postLength = [NSString stringWithFormat:@\"%d\", (int)[postData length]];\n        NSMutableURLRequest * request = [[NSMutableURLRequest alloc] initWithURL:url];\n\n        //url where u will send data\n        [request setHTTPMethod:@\"POST\"];\n        [request setValue:@\"application/json\" forHTTPHeaderField:@\"Accept\"];\n        [request setValue:@\"application/json\" forHTTPHeaderField:@\"Content-Type\"];\n        [request setHTTPBody: postData];\n        [request setValue:[NSString stringWithFormat:@\"%lu\", (unsigned long)[postLength length]] forHTTPHeaderField:@\"Content-Length\"];\n\n        NSURLConnection * conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];\n        if(conn) {\n            NSLog(@\"Connection Successful\");\n        } else {\n           NSLog(@\"Connection could not be made\");\n        }\n   }\n</code></pre>\n\n<p>Any advice on how should I do it?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1443610380, "post_id": 32864181, "comment_id": 53560624, "body": "Fix your indentation, as of now, this is completely unreadable. This is not Ruby, this is attempt at Python. Also what do you mean by <i>first non repeating character</i>? A character which was not found so far? Or a character, not followed by itself (<code>aa</code>)?"}, {"owner": {"reputation": 304, "user_id": 5267326, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-kX8fLJ8aJlE/AAAAAAAAAAI/AAAAAAAAAIs/G5kueTFNIwY/photo.jpg?sz=128", "display_name": "vidal", "link": "https://stackoverflow.com/users/5267326/vidal"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1443610583, "post_id": 32864181, "comment_id": 53560749, "body": "i am trying to find out character which was not found so far i know i did it in python.....as i am new to ruby i dont know how to do this in ruby"}], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 5267326, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-kX8fLJ8aJlE/AAAAAAAAAAI/AAAAAAAAAIs/G5kueTFNIwY/photo.jpg?sz=128", "display_name": "vidal", "link": "https://stackoverflow.com/users/5267326/vidal"}, "edited": false, "score": 0, "creation_date": 1443611065, "post_id": 32864341, "comment_id": 53561022, "body": "No this is not working, for &#39;teststring&#39; answer should be &#39;e&#39; and if I pass &#39;letter&#39; instead the answer should be &#39;l&#39;"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "reply_to_user": {"reputation": 304, "user_id": 5267326, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-kX8fLJ8aJlE/AAAAAAAAAAI/AAAAAAAAAIs/G5kueTFNIwY/photo.jpg?sz=128", "display_name": "vidal", "link": "https://stackoverflow.com/users/5267326/vidal"}, "edited": false, "score": 0, "creation_date": 1443611156, "post_id": 32864341, "comment_id": 53561078, "body": "@vidal - this is exactely what it returns for those inputs. o_0 which ruby version do you use?"}, {"owner": {"reputation": 304, "user_id": 5267326, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-kX8fLJ8aJlE/AAAAAAAAAAI/AAAAAAAAAIs/G5kueTFNIwY/photo.jpg?sz=128", "display_name": "vidal", "link": "https://stackoverflow.com/users/5267326/vidal"}, "edited": false, "score": 0, "creation_date": 1443611230, "post_id": 32864341, "comment_id": 53561128, "body": "I am using ruby 2.2.2"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "reply_to_user": {"reputation": 304, "user_id": 5267326, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-kX8fLJ8aJlE/AAAAAAAAAAI/AAAAAAAAAIs/G5kueTFNIwY/photo.jpg?sz=128", "display_name": "vidal", "link": "https://stackoverflow.com/users/5267326/vidal"}, "edited": false, "score": 0, "creation_date": 1443611467, "post_id": 32864341, "comment_id": 53561275, "body": "So what results do you get, it all works on my machine."}, {"owner": {"reputation": 304, "user_id": 5267326, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-kX8fLJ8aJlE/AAAAAAAAAAI/AAAAAAAAAIs/G5kueTFNIwY/photo.jpg?sz=128", "display_name": "vidal", "link": "https://stackoverflow.com/users/5267326/vidal"}, "edited": false, "score": 0, "creation_date": 1443612615, "post_id": 32864341, "comment_id": 53561918, "body": "Now I am getting the answer, I was not calling the function properly."}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "reply_to_user": {"reputation": 304, "user_id": 5267326, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-kX8fLJ8aJlE/AAAAAAAAAAI/AAAAAAAAAIs/G5kueTFNIwY/photo.jpg?sz=128", "display_name": "vidal", "link": "https://stackoverflow.com/users/5267326/vidal"}, "edited": false, "score": 0, "creation_date": 1443612835, "post_id": 32864341, "comment_id": 53562051, "body": "Too bad, I was hoping this was some cross-platform incompatibility. Anyway, the main difference between this and ndn&#39;s answer is reduced complexity: O(n) vs O(n^2)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1443613522, "post_id": 32864341, "comment_id": 53562506, "body": "You can write <code>group_by(&amp;:itself)</code> and use <code>find</code> instead of <code>select</code> (thus avoiding the method&#39;s second line)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1443613840, "post_id": 32864341, "comment_id": 53562702, "body": "BTW, interesting use of <code>one?</code>"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1443613925, "post_id": 32864341, "comment_id": 53562764, "body": "@Stefan - So they finally released <code>itself</code> method? That&#39;s awesome, was waiting for it for a while. :) As per <code>find</code> vs <code>select</code> - I can&#39;t believe I missed that. 00"}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1443613970, "post_id": 32864341, "comment_id": 53562797, "body": "@Stefan The only caveat is that Object#itself is new in Ruby 2.2.0. Just something future visitors should be aware of."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1443614000, "post_id": 32864341, "comment_id": 53562813, "body": "But I was wrong about the second line, you still need it."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 3, "creation_date": 1443614066, "post_id": 32864341, "comment_id": 53562864, "body": "@CodeGnome or visitors from the past ;-)"}], "tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": false, "score": 1, "last_activity_date": 1443614030, "last_edit_date": 1443614030, "creation_date": 1443610616, "answer_id": 32864341, "question_id": 32864181, "link": "https://stackoverflow.com/questions/32864181/how-can-i-find-the-first-non-recurring-letter-of-a-string-in-ruby/32864341#32864341", "title": "How can I find the first non-recurring letter of a string in Ruby?", "body": "<p>That should do the trick:</p>\n\n<pre><code>def first_non_repeat_character(teststring)\n  group = teststring.chars.group_by {|i| i}.find {|letter, group| group.one? }\n  group &amp;&amp; group.first\nend\n</code></pre>\n\n<p>Since ruby 2.2.1 you can use <code>group_by(&amp;:itself)</code></p>\n"}, {"comments": [{"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1443613640, "post_id": 32864422, "comment_id": 53562577, "body": "+1, because I suspect this is the most performant answer so far because it relies on fast String methods rather than chained Hash/Array methods."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 2, "creation_date": 1443614543, "post_id": 32864422, "comment_id": 53563186, "body": "@CodeGnome depending on the string&#39;s length and the position of the non-recurring character (if any), this approach traverses the string multiple times because of the nested <code>count</code>."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 5, "last_activity_date": 1443610847, "creation_date": 1443610847, "answer_id": 32864422, "question_id": 32864181, "link": "https://stackoverflow.com/questions/32864181/how-can-i-find-the-first-non-recurring-letter-of-a-string-in-ruby/32864422#32864422", "title": "How can I find the first non-recurring letter of a string in Ruby?", "body": "<pre><code>def first_non_repeat_character(string)\n  string.chars.find { |character| string.count(character) == 1 }\nend\n\nfirst_non_repeat_character('teststring') # =&gt; \"e\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1443614221, "post_id": 32865193, "comment_id": 53562964, "body": "Note that the second one will raise an error if the string contains only duplicates due to <code>nil[0]</code>."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1443614672, "post_id": 32865193, "comment_id": 53563277, "body": "@Stefan Fixed. Good catch."}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 1, "last_activity_date": 1443614581, "last_edit_date": 1443614581, "creation_date": 1443613306, "answer_id": 32865193, "question_id": 32864181, "link": "https://stackoverflow.com/questions/32864181/how-can-i-find-the-first-non-recurring-letter-of-a-string-in-ruby/32865193#32865193", "title": "How can I find the first non-recurring letter of a string in Ruby?", "body": "<p>With a nod to @BroiSatse for the basic idea, I suggest the following variation in his answer for chaining in an irb or pry console if you have Ruby 2.2+ with the new <a href=\"http://ruby-doc.org/core-2.2.3/Object.html#method-i-itself\" rel=\"nofollow\">Object#itself</a> method:</p>\n\n<pre><code>'teststring'.chars.group_by(&amp;:itself).values.select { |v| v.one? }.flatten.first\n#=&gt; \"e\"\n</code></pre>\n\n<p>The nice thing about this approach (as opposed to defining a method) is that it's easy to backtrack up the method chain for debugging. If you don't get the answer you expect, just keep removing the tail of the method chain until you find the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1443615749, "creation_date": 1443615749, "answer_id": 32865979, "question_id": 32864181, "link": "https://stackoverflow.com/questions/32864181/how-can-i-find-the-first-non-recurring-letter-of-a-string-in-ruby/32865979#32865979", "title": "How can I find the first non-recurring letter of a string in Ruby?", "body": "<p>Another one:</p>\n\n<pre><code>'teststring'.each_char.with_object(Hash.new(0)) { |c, h| h[c] += 1 }.key(1)\n#=&gt; \"e\"\n</code></pre>\n\n<h3>Step by step:</h3>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.3/String.html#method-i-each_char\" rel=\"nofollow\"><code>each_char</code></a> traverses each character:</p>\n\n<pre><code>'teststring'.each_char.to_a\n#=&gt; [\"t\", \"e\", \"s\", \"t\", \"s\", \"t\", \"r\", \"i\", \"n\", \"g\"]\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.3/Enumerator.html#method-i-with_object\" rel=\"nofollow\"><code>with_object</code></a> passes a <code>Hash</code> with a default value of <code>0</code> to the block on order to count each character (returning the hash):</p>\n\n<pre><code>'teststring'.each_char.with_object(Hash.new(0)) { |c, h| h[c] += 1 }\n#=&gt; {\"t\"=&gt;3, \"e\"=&gt;1, \"s\"=&gt;2, \"r\"=&gt;1, \"i\"=&gt;1, \"n\"=&gt;1, \"g\"=&gt;1}\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.3/Hash.html#method-i-key\" rel=\"nofollow\"><code>key</code></a> returns the key (i.e. character) for the given value (i.e. with a count of 1)</p>\n\n<pre><code>'teststring'.each_char.with_object(Hash.new(0)) { |c, h| h[c] += 1 }.key(1)\n#=&gt; \"e\"\n</code></pre>\n\n<p>Possible caveat: although the implementation returns the <em>first</em> key for the given value, the documentation says:</p>\n\n<blockquote>\n  <p>Returns the key of <em>an occurrence</em> of a given value.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1444021379, "last_edit_date": 1495542816, "creation_date": 1443632271, "answer_id": 32871760, "question_id": 32864181, "link": "https://stackoverflow.com/questions/32864181/how-can-i-find-the-first-non-recurring-letter-of-a-string-in-ruby/32871760#32871760", "title": "How can I find the first non-recurring letter of a string in Ruby?", "body": "<p>You could write:</p>\n\n<pre><code>str = 'teststring'\n\narr = str.chars\n(arr - (arr.difference(arr.uniq))).first\n  #= \"e\"\n</code></pre>\n\n<p>where <code>Array#difference</code> is defined in my answer <a href=\"https://stackoverflow.com/questions/24987054/how-to-select-unique-elements\">here</a>.</p>\n\n<p><code>Array#difference</code> is similar to <code>Array#-</code>. The difference is illustrated in the following example:</p>\n\n<pre><code>a = [1,2,3,4,3,2,2,4]\nb = [2,3,4,4,4]\n\na     -      b #=&gt; [1]\na.difference b #=&gt; [1, 3, 2, 2]\n</code></pre>\n\n<p><code>arr.difference(arr.uniq)</code> therefore returns an array of all elements <code>e</code> of <code>arr</code> for which <code>arr.count(e) &gt; 1</code>. </p>\n\n<p><code>arr.difference(arr.uniq)</code> returns the recurring characters, so</p>\n\n<pre><code>arr - arr.difference(arr.uniq)\n</code></pre>\n\n<p>returns the non-recurring characters, ordered as they are ordered in <code>arr</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 271, "user_id": 5379719, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8636f3628ea4d7d29a5938668fa99725?s=128&d=identicon&r=PG&f=1", "display_name": "tnaught", "link": "https://stackoverflow.com/users/5379719/tnaught"}, "is_accepted": false, "score": 0, "last_activity_date": 1513301419, "creation_date": 1513301419, "answer_id": 47824573, "question_id": 32864181, "link": "https://stackoverflow.com/questions/32864181/how-can-i-find-the-first-non-recurring-letter-of-a-string-in-ruby/47824573#47824573", "title": "How can I find the first non-recurring letter of a string in Ruby?", "body": "<p>Here is a sample that takes into account if there are capital letters. For example if you pass in </p>\n\n<pre><code>\"sTresst\" =&gt; \"r\"\n\ndef  first_non_repeating_letter(s) \n  s.each_char do |char|\n    return char if s.downcase.count(char.downcase) &lt; 2\n  end\n  \"\"\nend\n</code></pre>\n"}], "owner": {"reputation": 304, "user_id": 5267326, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-kX8fLJ8aJlE/AAAAAAAAAAI/AAAAAAAAAIs/G5kueTFNIwY/photo.jpg?sz=128", "display_name": "vidal", "link": "https://stackoverflow.com/users/5267326/vidal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1446, "favorite_count": 0, "accepted_answer_id": 32864422, "answer_count": 6, "score": 2, "last_activity_date": 1513301419, "creation_date": 1443610146, "last_edit_date": 1443613439, "question_id": 32864181, "link": "https://stackoverflow.com/questions/32864181/how-can-i-find-the-first-non-recurring-letter-of-a-string-in-ruby", "title": "How can I find the first non-recurring letter of a string in Ruby?", "body": "<p>I have a string <code>\"teststring\"</code>. I want to find first non-recurring character in Ruby.</p>\n\n<p>I have this Python code:</p>\n\n<pre><code>def first_non_repeat_character(teststring)\n    unique=[]\n    repeated=[]\n    for character in teststring:\n        if character in unique:\n            unique.remove(character)\n            repeated.append(character)\n        else:\n            if not character in repeated:\n                unique.append(character)\n    if len(unique):\n        return unique[0]\n    else: \n        return false\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 6838, "user_id": 680001, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a1ec53845532ff7ab726ea809cffa74?s=128&d=identicon&r=PG", "display_name": "Sayuj", "link": "https://stackoverflow.com/users/680001/sayuj"}, "edited": false, "score": 0, "creation_date": 1443611563, "post_id": 32864095, "comment_id": 53561340, "body": "Why there is a scope with &quot;?&quot;(scope :complete?)?"}], "answers": [{"comments": [{"owner": {"reputation": 1756, "user_id": 295671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0fc94068a4be0dd57d34a223722f2690?s=128&d=identicon&r=PG", "display_name": "james246", "link": "https://stackoverflow.com/users/295671/james246"}, "edited": false, "score": 0, "creation_date": 1443611787, "post_id": 32864632, "comment_id": 53561462, "body": "I take your point about there being no duplication. The scope and instance method serve separate purposes after all. I had experimented with some solutions like yours above, but my emphasis would be on readability in this case so will stick with the &quot;duplication&quot; as suggested"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 3, "last_activity_date": 1443611581, "creation_date": 1443611581, "answer_id": 32864632, "question_id": 32864095, "link": "https://stackoverflow.com/questions/32864095/make-scope-and-instance-method-with-same-conditions-more-dry/32864632#32864632", "title": "Make scope and instance method with same conditions more DRY", "body": "<p>DRY means \"don't repeat yourself\". In those snippets I don't see any duplication whatsoever. So there's literally nothing to DRY up.</p>\n\n<p>What you probably meant, though, is </p>\n\n<blockquote>\n  <p>there is one piece of information from which two methods are generated. If this information changes, how to be able to change it only once, so that I don't accidentally forget to update some other place?</p>\n</blockquote>\n\n<p>Well, you can do some metaprogramming gymnastics such as this:</p>\n\n<pre><code>class Thing &lt; ActiveRecord::Base\n  FIELDS_FOR_COMPLETE = {\n    foo: true,\n    bar: true,\n    baz: true,\n  }\n\n  scope :complete?, -&gt; {\n    where(FIELDS_FOR_COMPLETE)\n  }\n\n  def complete?\n    FIELDS_FOR_COMPLETE.all? do |method_name, expected_value|\n      self.public_send(method_name) == expected_value\n    end\n  end\nend\n</code></pre>\n\n<p>It's up to you to decide which one is easier to read, to understand and to maintain.</p>\n\n<p>Me, I choose the first (somewhat duplicated) version. It makes me think less. And it's also immediately obvious to any other rails programmer, which might join the project.</p>\n"}], "owner": {"reputation": 1756, "user_id": 295671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0fc94068a4be0dd57d34a223722f2690?s=128&d=identicon&r=PG", "display_name": "james246", "link": "https://stackoverflow.com/users/295671/james246"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 32864632, "answer_count": 1, "score": 0, "last_activity_date": 1443611581, "creation_date": 1443609871, "last_edit_date": 1443610641, "question_id": 32864095, "link": "https://stackoverflow.com/questions/32864095/make-scope-and-instance-method-with-same-conditions-more-dry", "title": "Make scope and instance method with same conditions more DRY", "body": "<p>Say you have a model that defines a scope, the conditions of which are also used in an instance method:</p>\n\n<pre><code>class Thing &lt; ActiveRecord::Base\n  scope :complete?, -&gt; {\n    where(\n      foo: true,\n      bar: true,\n      baz: true\n    )\n  }\n\n  def complete?\n    foo? &amp;&amp; bar? &amp;&amp; baz?\n  end\nend\n</code></pre>\n\n<p>If you needed to change the definition of <code>complete?</code>, you would have to remember to change both the scope and the instance method. Is there a nice way to consolidate these two definitions and make the code a bit more DRY?</p>\n\n<p>The problem gets slightly more complex if one of the conditions is itself an instance method:</p>\n\n<pre><code>class Thing &lt; ActiveRecord::Base\n  scope :complete?, -&gt; {\n    where(\n      foo: true,\n      bar: true,\n\n      # can't use instance method `base?` here for `baz` condition\n      # you would have to duplicate the logic:\n      name: 'baz'\n    )\n  }\n\n  def baz?\n    name == 'baz'\n  end\n\n  def complete?\n    foo? &amp;&amp; bar? &amp;&amp; baz?\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 6476, "user_id": 345959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bb590d8ddd242dfaf688b8ffecdf76?s=128&d=identicon&r=PG", "display_name": "Smar", "link": "https://stackoverflow.com/users/345959/smar"}, "edited": false, "score": 0, "creation_date": 1443609467, "post_id": 32863729, "comment_id": 53560114, "body": "easiest: just do the conversion. <code>open_csv.process { |nya| out }</code>"}, {"owner": {"reputation": 172, "user_id": 2589413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/97e56604bc0218745036e52757479d48?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/2589413/rustam"}, "reply_to_user": {"reputation": 6476, "user_id": 345959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bb590d8ddd242dfaf688b8ffecdf76?s=128&d=identicon&r=PG", "display_name": "Smar", "link": "https://stackoverflow.com/users/345959/smar"}, "edited": false, "score": 0, "creation_date": 1443610005, "post_id": 32863729, "comment_id": 53560416, "body": "@Smar thank you , i am not able to find .process from the DOC of the ruby 1.9.3. i have to use this version of ruby. is it available with this version."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1443616592, "post_id": 32863729, "comment_id": 53564566, "body": "<i>&quot;could not find a better solution&quot;</i> / <i>&quot;Is there any easier solutions?&quot;</i> - better and easier than what? Please show what you have tried so far."}, {"owner": {"reputation": 172, "user_id": 2589413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/97e56604bc0218745036e52757479d48?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/2589413/rustam"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1443658866, "post_id": 32863729, "comment_id": 53586295, "body": "@Stefan Sorry for the way of asking question, i will give detailed information next time."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1443681419, "post_id": 32863729, "comment_id": 53592281, "body": "@Rustam don&#39;t hesitate to edit your question, regardless of whether you have accepted an answer or not. If you have already found a way to transpose a CSV file, please share it. It can be helpful and valuable for future visitors."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443616451, "post_id": 32865870, "comment_id": 53564463, "body": "I&#39;d like to know line length of a file that is too big to be opened like this :)"}, {"owner": {"reputation": 1052, "user_id": 5153223, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2eb1e2066f49fd770286205385ad6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Borsunho", "link": "https://stackoverflow.com/users/5153223/borsunho"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443616947, "post_id": 32865870, "comment_id": 53564828, "body": "@SergioTulentsev I don&#39;t really understand what you mean, I read whole file into memory, as this is needed to call <code>#transpose</code>. If file weights few gigs, it is likely to produce <i>unexpected results</i>. Now, holding that much data in a file is a bad idea, but every now and than such things happen."}, {"owner": {"reputation": 172, "user_id": 2589413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/97e56604bc0218745036e52757479d48?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/2589413/rustam"}, "edited": false, "score": 0, "creation_date": 1443658757, "post_id": 32865870, "comment_id": 53586271, "body": "@Borsunho  Thank you this works and exactly what i looked for."}], "tags": [], "owner": {"reputation": 1052, "user_id": 5153223, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2eb1e2066f49fd770286205385ad6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Borsunho", "link": "https://stackoverflow.com/users/5153223/borsunho"}, "is_accepted": true, "score": 1, "last_activity_date": 1443615449, "last_edit_date": 1495541200, "creation_date": 1443615449, "answer_id": 32865870, "question_id": 32863729, "link": "https://stackoverflow.com/questions/32863729/change-the-format-of-csv-file-with-ruby/32865870#32865870", "title": "Change the format of csv file with Ruby", "body": "<p>So you want to transpose this data</p>\n\n<pre><code>transposed = CSV.read(\"path/to/file.csv\").transpose\n\nCSV.open(\"path/to/file.csv\", \"w\") do |csv|\n  transposed.each do |row|\n    csv &lt;&lt; row\n  end\nend\n</code></pre>\n\n<ol>\n<li>Read the data</li>\n<li>Transpose it - Ruby 1.9.3 should know <code>#transpose</code></li>\n<li>Write it back</li>\n</ol>\n\n<p>It's dead simple, provided your csv isn't too big to be read at once.</p>\n\n<p>If it is, though, it's becomes quite a horror. If that's the case, refer to answers to <a href=\"https://stackoverflow.com/questions/8512335/finding-the-transpose-of-a-very-very-large-matrix\">this question</a>.</p>\n"}], "owner": {"reputation": 172, "user_id": 2589413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/97e56604bc0218745036e52757479d48?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/2589413/rustam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 32865870, "answer_count": 1, "score": -2, "last_activity_date": 1443616230, "creation_date": 1443608756, "last_edit_date": 1443616230, "question_id": 32863729, "link": "https://stackoverflow.com/questions/32863729/change-the-format-of-csv-file-with-ruby", "title": "Change the format of csv file with Ruby", "body": "<p>I done some research but could not find a better solution to change the format of the csv file. \nI want to convert row of csv file to column, and convert column to row.</p>\n\n<p>for example:</p>\n\n<p>original csv file:</p>\n\n<pre><code>a,b,c,d,e,f,g\n1,2,3,4,5,6,7\n7,6,5,6,4,2,1\n</code></pre>\n\n<p>I want to convert above file as </p>\n\n<pre><code>a,1,7\nb,2,6\nc,3,5\nd,4,4\ne,5,3\nf,6,2\ng,7,1\n</code></pre>\n\n<p>Is there any easier solutions?</p>\n"}, {"tags": ["arrays", "ruby", "string"], "answers": [{"comments": [{"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 0, "creation_date": 1443611825, "post_id": 32864260, "comment_id": 53561489, "body": "<code>each_cons</code>! Man, I must have looked over that doc page about five times trying to find that method and I totally missed it. You&#39;re some kind of hero!"}, {"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 1, "creation_date": 1443612353, "post_id": 32864260, "comment_id": 53561765, "body": "Unfortunately benchmark shows no speed increase. Odd, as the method is implemented in C. Still, at least I&#39;m using the proper Ruby methods."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 5, "last_activity_date": 1443613168, "last_edit_date": 1443613168, "creation_date": 1443610356, "answer_id": 32864260, "question_id": 32863672, "link": "https://stackoverflow.com/questions/32863672/in-ruby-i-need-to-split-a-sentence-into-sub-sentences/32864260#32864260", "title": "In Ruby I need to split a sentence into sub-sentences", "body": "<p>I'd use <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-each_cons\" rel=\"nofollow\"><code>each_cons</code></a> in a loop: (although it's not any faster)</p>\n\n<pre><code>arr = %w[The cat sat on the mat]\n(1..arr.size).flat_map { |i| arr.each_cons(i).map { |words| words.join(' ') } }\n#=&gt; [\"The\", \"cat\", \"sat\", \"on\", \"the\", \"mat\",\n#    \"The cat\", \"cat sat\", \"sat on\", \"on the\", \"the mat\",\n#    \"The cat sat\", \"cat sat on\", \"sat on the\", \"on the mat\",\n#    \"The cat sat on\", \"cat sat on the\", \"sat on the mat\",\n#    \"The cat sat on the\", \"cat sat on the mat\",\n#    \"The cat sat on the mat\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1443635716, "creation_date": 1443635716, "answer_id": 32872722, "question_id": 32863672, "link": "https://stackoverflow.com/questions/32863672/in-ruby-i-need-to-split-a-sentence-into-sub-sentences/32872722#32872722", "title": "In Ruby I need to split a sentence into sub-sentences", "body": "<p>Here is one more way to do this, may be not as elegant as other answer.</p>\n\n<pre><code>str = \"The cat sat on the mat\"\nwords = str.split\nputs words.flat_map.with_index { |i, idx| \n    words.\n        repeated_combination(idx + 1).\n        select{ |*x| str[x.join(' ')]}.\n        collect {|x| x.join(' ') }\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>The\ncat\nsat\non\nthe\nmat\nThe cat\ncat sat\nsat on\non the\nthe mat\nThe cat sat\ncat sat on\nsat on the\non the mat\nThe cat sat on\ncat sat on the\nsat on the mat\nThe cat sat on the\ncat sat on the mat\nThe cat sat on the mat\n</code></pre>\n"}], "owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 32864260, "answer_count": 2, "score": 0, "last_activity_date": 1443690216, "creation_date": 1443608584, "last_edit_date": 1443690216, "question_id": 32863672, "link": "https://stackoverflow.com/questions/32863672/in-ruby-i-need-to-split-a-sentence-into-sub-sentences", "title": "In Ruby I need to split a sentence into sub-sentences", "body": "<p>Given the string:</p>\n\n<pre><code>\"See Spot Run\"\n</code></pre>\n\n<p>I need to return an array with:</p>\n\n<pre><code>[ \"See\", \"Spot\", \"run\", \"See Spot\", \"Spot run\", \"See Spot Run\" ]\n</code></pre>\n\n<p>So far I have:</p>\n\n<pre><code>term = \"The cat sat on the mat\"\n#=&gt; \"The cat sat on the mat\" \n\narr = term.split(\" \")\n#=&gt; [\"The\", \"cat\", \"sat\", \"on\", \"the\", \"mat\"] \n\narr.length.times.map { |i| (arr.length - i).times.map { |j| arr[j..j+i].join(\" \") } }.flatten(1)\n#=&gt; [\"The\", \"cat\", \"sat\", \"on\", \"the\", \"mat\", \"The cat\", \"cat sat\", \"sat on\", \"on the\", \"the mat\", \"The cat sat\", \"cat sat on\", \"sat on the\", \"on the mat\", \"The cat sat on\", \"cat sat on the\", \"sat on the mat\", \"The cat sat on the\", \"cat sat on the mat\", \"The cat sat on the mat\"] \n</code></pre>\n\n<p>This is going to happen a lot of times, so can you think of a way to make it more efficient?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "best-in-place"], "comments": [{"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1443607725, "post_id": 32863334, "comment_id": 53559102, "body": "Did you include the gem as well and ran <code>bundle install</code>?"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1443607978, "post_id": 32863334, "comment_id": 53559231, "body": "Have you restarted the server?"}, {"owner": {"reputation": 451, "user_id": 2644564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/450371bda2fb7bb37fbb2b9ce36fd424?s=128&d=identicon&r=PG", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/2644564/kamesh"}, "edited": false, "score": 0, "creation_date": 1443608333, "post_id": 32863334, "comment_id": 53559421, "body": "normal form without <code>best_in_place</code>, is that is working ? suggest to share controller action code as well. you might be having instance variable as @post_comment in controller. can you check that too ?"}, {"owner": {"reputation": 1, "user_id": 5388864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57380c83f85ef3f3ae43ed8983a45d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5388864/haseeb-ahmad"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1443608389, "post_id": 32863334, "comment_id": 53559447, "body": "Server not started thanks @BroiSatse"}, {"owner": {"reputation": 1, "user_id": 5388864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57380c83f85ef3f3ae43ed8983a45d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5388864/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1443609031, "post_id": 32863334, "comment_id": 53559862, "body": "It works fine but how can I give custom styling to that field which appear after click?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5388864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57380c83f85ef3f3ae43ed8983a45d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5388864/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1443608934, "post_id": 32863722, "comment_id": 53559799, "body": "It works fine but how can I give custom styling to that field which appear after click?"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "reply_to_user": {"reputation": 1, "user_id": 5388864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57380c83f85ef3f3ae43ed8983a45d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5388864/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1443609063, "post_id": 32863722, "comment_id": 53559883, "body": "I would say this is a different question. I never used this gem before so I won&#39;t be any help here but most likely you should be able to define your own css to override defaults."}], "tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": true, "score": 2, "last_activity_date": 1443608741, "creation_date": 1443608741, "answer_id": 32863722, "question_id": 32863334, "link": "https://stackoverflow.com/questions/32863334/undefined-method-best-in-place-in-class-in-ruby-on-rails/32863722#32863722", "title": "undefined method `best_in_place&#39; in Class in ruby on rails", "body": "<p>The only reason why you could get this error (apart from other crazy reasons like dynamic undefining of methods in your code) is that <code>best_in_place</code> gem has not been loaded. Just restart your server and all should work</p>\n"}], "owner": {"reputation": 1, "user_id": 5388864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57380c83f85ef3f3ae43ed8983a45d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5388864/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "accepted_answer_id": 32863722, "answer_count": 1, "score": -1, "last_activity_date": 1443608947, "creation_date": 1443607526, "question_id": 32863334, "link": "https://stackoverflow.com/questions/32863334/undefined-method-best-in-place-in-class-in-ruby-on-rails", "title": "undefined method `best_in_place&#39; in Class in ruby on rails", "body": "<p>I follow <a href=\"http://railscasts.com/episodes/302-in-place-editing?view=asciicast\" rel=\"nofollow\">http://railscasts.com/episodes/302-in-place-editing?view=asciicast</a>\nfor text inline editing</p>\n\n<p>gem 'best_in_place'</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require jquery.purr\n//= require best_in_place\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>But when I write </p>\n\n<pre><code>&lt;%= best_in_place product_comment, :description %&gt;\n</code></pre>\n\n<p>It gives error undefined method `best_in_place' for #&lt;#:0xb43cc3dc></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "encoding"], "answers": [{"comments": [{"owner": {"reputation": 415, "user_id": 1996570, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b76c86d25bb725c8d300e987b68ede02?s=128&d=identicon&r=PG", "display_name": "Martin Sojka", "link": "https://stackoverflow.com/users/1996570/martin-sojka"}, "edited": false, "score": 0, "creation_date": 1467224116, "post_id": 32866610, "comment_id": 63648034, "body": "Having a very similar issue here. How do you &quot;explicitly tell the gem to use UTF-8 to encode&quot;? I still didn&#39;t find root of the issue though..."}, {"owner": {"reputation": 393, "user_id": 174467, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c5823dd012b84049f6ceb004a3d15f60?s=128&d=identicon&r=PG", "display_name": "Mark Hoffman", "link": "https://stackoverflow.com/users/174467/mark-hoffman"}, "edited": false, "score": 0, "creation_date": 1504712085, "post_id": 32866610, "comment_id": 79119846, "body": "I am that someone...I was fighting this problem and stumbled across your post here. Thanks for sharing!"}], "tags": [], "owner": {"reputation": 41, "user_id": 2957660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c175a26b769735384a862c6b2626beff?s=128&d=identicon&r=PG&f=1", "display_name": "javimbk", "link": "https://stackoverflow.com/users/2957660/javimbk"}, "is_accepted": false, "score": 1, "last_activity_date": 1443617549, "creation_date": 1443617549, "answer_id": 32866610, "question_id": 32862771, "link": "https://stackoverflow.com/questions/32862771/ruby-on-rails-activerecord-postgres-utf-8-and-ascii-8bit-encodings/32866610#32866610", "title": "Ruby on Rails, ActiveRecord, Postgres, UTF-8 and ASCII-8BIT encodings", "body": "<p>Okay, so in my case it had to do with the gem <code>crypt_keeper</code>.\nIf you are using special Unicode characters such as <code>\u00b4</code>, you have to explicitly tell the gem to use UTF-8 to encode, otherwise it will store the values on your database as ASCII-8BIT.</p>\n\n<p>Wish I got a better error message to know it was caused because of that, hopefully someone with the same problem will see this someday!</p>\n"}], "owner": {"reputation": 41, "user_id": 2957660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c175a26b769735384a862c6b2626beff?s=128&d=identicon&r=PG&f=1", "display_name": "javimbk", "link": "https://stackoverflow.com/users/2957660/javimbk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1000, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1443617549, "creation_date": 1443605899, "question_id": 32862771, "link": "https://stackoverflow.com/questions/32862771/ruby-on-rails-activerecord-postgres-utf-8-and-ascii-8bit-encodings", "title": "Ruby on Rails, ActiveRecord, Postgres, UTF-8 and ASCII-8BIT encodings", "body": "<p>Weirdest error, who\u2019s up for a challenge to try and help me? Spent hours yesterday on it and it\u2019s like magic. I can't believe this is happening and it's driving me crazy.</p>\n\n<p>Btw, using:</p>\n\n<ul>\n<li>Rails 4.2.3</li>\n<li>Ruby 2.2.3</li>\n<li>pg 0.18</li>\n<li><code>Encoding.default_internal = Encoding.default_external = UTF-8</code></li>\n<li><code>config.encoding = 'utf-8'</code></li>\n</ul>\n\n<p>It has to do with Postgres, ActiveRecord and Encodings!\nTurns out that we\u2019ve been getting these errors whenever we create new Users on the database with special characters:</p>\n\n<p><code>Encoding::UndefinedConversionError: \"\\xC3\" from ASCII-8BIT to UTF-8</code></p>\n\n<p><code>\\xC3</code> may vary depending on the characters. The weird part is that we\u2019ve set since the beginning EVERYTHING to UTF-8. So it really makes no sense and I digged into it, and used this script:</p>\n\n<pre><code>User.all.each do\n  |user| user.attributes.each do\n    |name, value| if value.is_a? String\n      puts user.email + name.encoding.to_s + value.encoding.to_s\n    end\n  end\nend\n</code></pre>\n\n<p>And this is the output of one of the users, but all users get the same:</p>\n\n<pre><code>dr_lottahelp@blahblah.comUTF-8UTF-8\ndr_lottahelp@blahblah.comUTF-8ASCII-8BIT\ndr_lottahelp@blahblah.comUTF-8ASCII-8BIT\ndr_lottahelp@blahblah.comUTF-8ASCII-8BIT\ndr_lottahelp@blahblah.comUTF-8UTF-8\ndr_lottahelp@blahblah.comUTF-8UTF-8\ndr_lottahelp@blahblah.comUTF-8UTF-8\ndr_lottahelp@blahblah.comUTF-8UTF-8\ndr_lottahelp@blahblah.comUTF-8UTF-8\ndr_lottahelp@blahblah.comUTF-8UTF-8\ndr_lottahelp@blahblah.comUTF-8UTF-8\n</code></pre>\n\n<p>Turns out that only 3 fields get the ASCII-8BIT encoding. Which absolutely makes no sense to me!</p>\n\n<p>(Those fields btw, <code>first_name</code>, <code>middle_name</code>, <code>last_name</code>, are exactly the same in the database as the other text fields that got listed on the output, they don't get any special treatment).</p>\n\n<p>Another funny thing is that if I don't fill any of those fields, the encoding is <code>UTF-8</code> for the value. But once I fill it, even if I don't use special characters it will get converted to <code>ASCII-8BIT</code>.</p>\n\n<p>Any suggestions? I've tried every single thing.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1443608291, "post_id": 32862657, "comment_id": 53559391, "body": "Note that <code>inject</code> uses the block&#39;s return value, the assignment is superfluous. In other words: you should use <code>mem + ...</code> instead of <code>mem += ...</code> within the block."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 5268592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/706623049443244/picture?type=large", "display_name": "Rajesh Choudhary", "link": "https://stackoverflow.com/users/5268592/rajesh-choudhary"}, "edited": false, "score": 0, "creation_date": 1443606497, "post_id": 32862793, "comment_id": 53558368, "body": "inject is not working,it is giving error   &quot; to_i&#39;: no implicit conversion of String into Integer (TypeError)&quot;"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 199, "user_id": 5268592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/706623049443244/picture?type=large", "display_name": "Rajesh Choudhary", "link": "https://stackoverflow.com/users/5268592/rajesh-choudhary"}, "edited": false, "score": 0, "creation_date": 1443607121, "post_id": 32862793, "comment_id": 53558742, "body": "@RajeshChoudhary added example. :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1443607425, "post_id": 32862793, "comment_id": 53558934, "body": "You can use <code>&#47;\\d&#47;</code> instead of <code>&#47;\\d+?&#47;</code>"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1443607897, "post_id": 32862793, "comment_id": 53559196, "body": "@Stefan that&#39;s smarter. Thanks"}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 4, "last_activity_date": 1443607917, "last_edit_date": 1443607917, "creation_date": 1443605968, "answer_id": 32862793, "question_id": 32862657, "link": "https://stackoverflow.com/questions/32862657/how-to-calculate-sum-of-all-the-digits-in-text-file/32862793#32862793", "title": "How to Calculate sum of all the digits in text file", "body": "<pre><code>str = \"The rahul  jumped in 2 the well. The water was cold at 1 degree Centigrade. There were 3 grip holes on the walls.  The well was 17 feet deep.\"\n</code></pre>\n\n<p>To get sum of all integers:</p>\n\n<pre><code>str.scan(/\\d+/).sum(&amp;:to_i)\n# =&gt; 23 \n</code></pre>\n\n<p>Or to get sum of all digits as in your example:</p>\n\n<pre><code>str.scan(/\\d+?/).sum(&amp;:to_i)\n# =&gt; 14\n</code></pre>\n\n<p>PS: I used <code>sum</code> seeing <code>Rails</code> tag. If you are only using Ruby you can use <code>inject</code> instead.\nExample with <a href=\"http://apidock.com/ruby/Enumerable/inject\" rel=\"nofollow\"><code>inject</code></a></p>\n\n<pre><code>str.scan(/\\d/).inject(0) { |sum, a| sum + a.to_i }\n# =&gt; 14\nstr.scan(/\\d+/).inject(0) { |sum, a| sum + a.to_i }\n# =&gt; 23\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 451, "user_id": 2644564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/450371bda2fb7bb37fbb2b9ce36fd424?s=128&d=identicon&r=PG", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/2644564/kamesh"}, "reply_to_user": {"reputation": 199, "user_id": 5268592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/706623049443244/picture?type=large", "display_name": "Rajesh Choudhary", "link": "https://stackoverflow.com/users/5268592/rajesh-choudhary"}, "edited": false, "score": 0, "creation_date": 1443607239, "post_id": 32862895, "comment_id": 53558815, "body": "Ohk, you want only single digit to be summed up. Updating the answer."}], "tags": [], "owner": {"reputation": 451, "user_id": 2644564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/450371bda2fb7bb37fbb2b9ce36fd424?s=128&d=identicon&r=PG", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/2644564/kamesh"}, "is_accepted": true, "score": 2, "last_activity_date": 1443607319, "last_edit_date": 1443607319, "creation_date": 1443606238, "answer_id": 32862895, "question_id": 32862657, "link": "https://stackoverflow.com/questions/32862657/how-to-calculate-sum-of-all-the-digits-in-text-file/32862895#32862895", "title": "How to Calculate sum of all the digits in text file", "body": "<p>Your statement is computing correctly. Just add puts before File read as:</p>\n\n<pre><code>ruby -e \"puts File.read('t.txt').split.inject(0){|mem, obj| mem += obj.to_f}\"\n# =&gt; 23.0\n</code></pre>\n\n<p>For summing single digit only:</p>\n\n<pre><code>ruby -e \"puts File.read('t.txt').scan(/\\d/).inject(0){|mem, obj| mem += obj.to_f}\"\n# =&gt; 14.0\n</code></pre>\n\n<p>Thanks</p>\n"}], "owner": {"reputation": 199, "user_id": 5268592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/706623049443244/picture?type=large", "display_name": "Rajesh Choudhary", "link": "https://stackoverflow.com/users/5268592/rajesh-choudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 1, "accepted_answer_id": 32862895, "answer_count": 2, "score": 2, "last_activity_date": 1443607917, "creation_date": 1443605601, "question_id": 32862657, "link": "https://stackoverflow.com/questions/32862657/how-to-calculate-sum-of-all-the-digits-in-text-file", "title": "How to Calculate sum of all the digits in text file", "body": "<p>I am having  text file t.txt,I want to calculate sum of all the digits in text file \nExample </p>\n\n<pre><code>    --- t.txt ---\nThe rahul  jumped in 2 the well. The water was cold at 1 degree Centigrade. There were 3 grip holes on the walls.  The well was 17 feet deep.\n--- EOF --\n</code></pre>\n\n<p>sum 2+1+3+1+7\nMy ruby code to calculate sum is</p>\n\n<pre><code>ruby -e \"File.read('t.txt').split.inject(0){|mem, obj| mem += obj.to_f}\"\n</code></pre>\n\n<p>But i am not getting any answer??</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "arel"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443605896, "post_id": 32862172, "comment_id": 53558037, "body": "You can always use <code>find_by_sql</code>"}], "answers": [{"tags": [], "owner": {"reputation": 420, "user_id": 2997850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRkl6.jpg?s=128&g=1", "display_name": "Stepan Zakharov", "link": "https://stackoverflow.com/users/2997850/stepan-zakharov"}, "is_accepted": false, "score": 2, "last_activity_date": 1471970307, "creation_date": 1471970307, "answer_id": 39106562, "question_id": 32862172, "link": "https://stackoverflow.com/questions/32862172/arel-between-with-other-columns-as-range/39106562#39106562", "title": "Arel `between` with other columns as range", "body": "<p>To generate <code>table.field BETWEEN another_table.from AND another_table.to</code> use this arel code:</p>\n\n<pre><code>Arel::Nodes::Between.new(\n  table[:field],\n  Arel::Nodes::And.new(\n    [\n      another_table[:from],\n      another_table[:to]\n    ]\n  )\n)\n</code></pre>\n\n<p>In my case I placed this code into <code>.and()</code> arel method.</p>\n"}], "owner": {"reputation": 1506, "user_id": 3414150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tASIO.jpg?s=128&g=1", "display_name": "lx00st", "link": "https://stackoverflow.com/users/3414150/lx00st"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1430, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1471970307, "creation_date": 1443604163, "last_edit_date": 1443605637, "question_id": 32862172, "link": "https://stackoverflow.com/questions/32862172/arel-between-with-other-columns-as-range", "title": "Arel `between` with other columns as range", "body": "<p>It seems that Arel's <code>Between</code> predicate can be used with ranges only, eg</p>\n\n<pre><code>between(1.day.ago.time..Time.current)\n</code></pre>\n\n<p>Does anyone know a way to use it with other columns? Like</p>\n\n<pre><code>between(table[:since]..table[:till]) \n</code></pre>\n\n<p>(the last will not work but it shows an idea).\nIn the end I want </p>\n\n<pre><code>column BETWEEN table.since AND table.till\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 5, "creation_date": 1443604166, "post_id": 32862076, "comment_id": 53556958, "body": "Have a look at this link <a href=\"http://guides.rubyonrails.org/upgrading_ruby_on_rails.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/upgrading_ruby_on_rails.html</a>"}, {"owner": {"reputation": 2797, "user_id": 3392317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6hfb5.jpg?s=128&g=1", "display_name": "Subhash Chandra", "link": "https://stackoverflow.com/users/3392317/subhash-chandra"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443605332, "post_id": 32862076, "comment_id": 53557724, "body": "problem with my code is I am not having test coverage covered,I can&#39;t sit now to write all the tests."}], "answers": [{"tags": [], "owner": {"reputation": 1057, "user_id": 557451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf5e28e2e7ce245632a4a29896e6799?s=128&d=identicon&r=PG", "display_name": "Scott", "link": "https://stackoverflow.com/users/557451/scott"}, "is_accepted": true, "score": 1, "last_activity_date": 1443608348, "creation_date": 1443608348, "answer_id": 32863593, "question_id": 32862076, "link": "https://stackoverflow.com/questions/32862076/what-are-the-steps-to-follow-for-migrating-a-project-from-rails-3-2-13-ruby-1-9/32863593#32863593", "title": "what are the steps to follow for migrating a project from rails 3.2.13,ruby 1.9.1 to rails 4.2 or rails 4 other versions?", "body": "<p>With so many gems in your codebase I suspect this is a large app and its not going to be a quick upgrade and unless you have been given a large amount of time to do this, your best bet is to break things down and do updates in stages on the old version and then upgrade when you feel the codebase is in a better state.</p>\n\n<p>Before attempting the upgrade I would consider these points and make small changes / releases before any big upgrade project. The less code you have to actually change at the final upgrade stage the less risks you have.</p>\n\n<ul>\n<li><strong>Gems</strong>: The more gems you have, the more code that you have worry about and more more code you have to upgrade. Is your app using all these gems and if not can you remove the un-used ones. Are any of the gems really which are pretty basic and can you do the same functionality with just rails / ruby functionality and actually remove some gem altogether. The less gems you have, the less pain you will have when it comes to upgrading.</li>\n<li><strong>Tests</strong>: Whilst you are working on the code, write tests for any new code that you add or alter and write tests for any core parts of the code.</li>\n<li><strong>Latest 3.2 release</strong>: Get your coebase running on the latest 3.2 release, this will then include extra warnings of things which may not work that you can sort out sooner.</li>\n<li><strong>Deprecated</strong>: Are there any deprecated warnings in the logs, if so fix these before attempting any upgrade.</li>\n<li><strong>Old code</strong>: Is there any code that you know wont work on the later versions, can this be replaced with something that will work on both.</li>\n</ul>\n\n<p>When you feel that the codebase is in a state where it can be upgraded, consider these points.</p>\n\n<ul>\n<li>I would suggest not trying to do to much at the same time: Think about breaking out any ruby upgrade into a separate project from the rails upgrade.</li>\n<li>Maybe consider moving up slowly, getting your app onto 4.0 or 4.1 and then re-evaluating things using the points above could prevent less risk to things breaking.</li>\n<li>Regardless of how many automated tests you have, get a software tester to run over your app. they will find errors that your automated tests will have missed.</li>\n</ul>\n\n<p>There are plenty of <a href=\"http://technology.customink.com/blog/2014/09/16/from-rails-3.2-to-4.2/\" rel=\"nofollow\">upgrade guides</a> out there that you should take a read of before performing any upgrade.</p>\n\n<p>Good luck.</p>\n"}], "owner": {"reputation": 2797, "user_id": 3392317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6hfb5.jpg?s=128&g=1", "display_name": "Subhash Chandra", "link": "https://stackoverflow.com/users/3392317/subhash-chandra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 1, "accepted_answer_id": 32863593, "answer_count": 1, "score": 1, "last_activity_date": 1443608348, "creation_date": 1443603885, "question_id": 32862076, "link": "https://stackoverflow.com/questions/32862076/what-are-the-steps-to-follow-for-migrating-a-project-from-rails-3-2-13-ruby-1-9", "title": "what are the steps to follow for migrating a project from rails 3.2.13,ruby 1.9.1 to rails 4.2 or rails 4 other versions?", "body": "<p>I have my project on rails3.2.13 and I am having around 80 gems in it,now I need to migrate my project to rails 4,what are the steps I need to follow for successfully upgrading without any gems conflicts and errors.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1443603352, "creation_date": 1443603352, "answer_id": 32861902, "question_id": 32861858, "link": "https://stackoverflow.com/questions/32861858/rails-nested-group-and-count-with-column-renaming/32861902#32861902", "title": "Rails nested group and count with column renaming", "body": "<p>There is a way:</p>\n\n<pre><code>Issue.joins(:tracker).group('trackers.name').count\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 3489470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PGGCF.png?s=128&g=1", "display_name": "ste26054", "link": "https://stackoverflow.com/users/3489470/ste26054"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 1, "accepted_answer_id": 32861902, "answer_count": 1, "score": 1, "last_activity_date": 1443708993, "creation_date": 1443603173, "last_edit_date": 1443708993, "question_id": 32861858, "link": "https://stackoverflow.com/questions/32861858/rails-nested-group-and-count-with-column-renaming", "title": "Rails nested group and count with column renaming", "body": "<p>I have a model which looks this way:</p>\n\n<pre><code>Issue(id, ..., tracker_id)\n                   |\n          Tracker(id, ..., name)\n</code></pre>\n\n<hr>\n\n<pre><code>Issue has_one :tracker\nTracker has_many :issues\n</code></pre>\n\n<p>And I would like to get the number of Issues per Tracker. What I have got is:</p>\n\n<pre><code>Issue.group(:tracker_id).count =&gt; {3=&gt;446, 5=&gt;247, 9=&gt;2, 11=&gt;560}\n</code></pre>\n\n<p>But instead of grouping by <code>tracker_id</code>, I would like to group by <code>tracker_name</code>, to get this:</p>\n\n<pre><code>{\"name_1\"=&gt;446, \"name_2\"=&gt;247, \"name_3\"=&gt;2, \"another_name\"=&gt;560}\n</code></pre>\n\n<p>Is there a way to do this directly, without any mapping operation / hash renaming ?</p>\n"}, {"tags": ["ruby", "google-contacts-api"], "comments": [{"owner": {"reputation": 977, "user_id": 4204155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b97cac237052e03909c015c998f96e1?s=128&d=identicon&r=PG&f=1", "display_name": "SGC", "link": "https://stackoverflow.com/users/4204155/sgc"}, "edited": false, "score": 0, "creation_date": 1443732826, "post_id": 32861722, "comment_id": 53622644, "body": "I am not sure about ruby client. But I tried to create custom field by adding this line &lt;gContact:userDefinedField key=&#39;&#39; value=&#39;CustomValue1&#39;/&gt;  in the xml which I am trying to create a contact."}, {"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "reply_to_user": {"reputation": 977, "user_id": 4204155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b97cac237052e03909c015c998f96e1?s=128&d=identicon&r=PG&f=1", "display_name": "SGC", "link": "https://stackoverflow.com/users/4204155/sgc"}, "edited": false, "score": 0, "creation_date": 1444037858, "post_id": 32861722, "comment_id": 53715800, "body": "This could work for creating a contact, but what about reading data from existing userDefinedFields ? What worries me, is that I don&#39;t see the UserDefined fields in the data I get for a contact."}], "owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 467, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462906245, "creation_date": 1443602788, "last_edit_date": 1495541275, "question_id": 32861722, "link": "https://stackoverflow.com/questions/32861722/how-to-get-and-set-google-contacts-custom-fields-via-api-v3-0-in-ruby", "title": "How to get and set Google Contacts Custom Fields via API v3.0 (in Ruby)", "body": "<p>I need to access and update Custom Fields of some of the Contacts in my Google Contacts via the API (v3). I just learned <a href=\"https://stackoverflow.com/questions/32802382/custom-fields-and-extended-properties-are-they-same\">(in this question)</a> that Extended Properties are not the same than Custom Fields. Now my question is, how can I access and change Custom Fields programmatically? <a href=\"https://stackoverflow.com/questions/12003422/specifying-custom-fields-for-contacts-in-google-contacts-api-v3\">This question</a> posts a solution for Python but I am using Ruby and there is no Contacts API Client for Ruby.</p>\n\n<p>When retrieving a (full) contact via </p>\n\n<pre><code>full_contact = authorization_handler.fetch_protected_resource(\n    :uri =&gt; 'https://www.google.com/m8/feeds/contacts/default/full/1ecdsfslkf',\n    :header =&gt; 'GData-Version: 3.0').body \n</code></pre>\n\n<p>I get this response</p>\n\n<pre><code>{\"entry\"=&gt;\n  {\"xmlns\"=&gt;\"http://www.w3.org/2005/Atom\", \"xmlns:batch\"=&gt;\"http://schemas.google.com/gdata/batch\", \"xmlns:gContact\"=&gt;\"http://schemas.google.com/contact/2008\", \"xmlns:gd\"=&gt;\"http://schemas.google.com/g/2005\", \"id\"=&gt;\"http://www.google.com/m8/feeds/contacts/abc%40gmail.com/base/1easdc3\", \"updated\"=&gt;\"2015-07-21T11:17:39.927Z\", \"category\"=&gt;    \n    {\"scheme\"=&gt;\"http://schemas.google.com/g/2005#kind\", \"term\"=&gt;\"http://schemas.google.com/contact/2008#contact\"}, \n     \"title\"=&gt;\"Eli Int\", \"content\"=&gt;\"Designer Graphique\\nDivers clients\\n\", \"link\"=&gt;\n       [{\"rel\"=&gt;\"http://schemas.google.com/contacts/2008/rel#edit-photo\", \"type\"=&gt;\"image/*\", \"href\"=&gt;\"https://www.google.com/m8/feeds/photos/media/abc%40gmail.com/1eaddbbdc3/FfkSY8puj9sads9g\"}, \n        {\"rel\"=&gt;\"http://schemas.google.com/contacts/2008/rel#photo\", \"type\"=&gt;\"image/*\", \"href\"=&gt;\"https://www.google.com/m8/feeds/photos/media/abc%40gmail.com/1ec3wff0dcbbdc3\"}, \n        {\"rel\"=&gt;\"self\", \"type\"=&gt;\"application/atom+xml\", \"href\"=&gt;\"https://www.google.com/m8/feeds/contacts/abc%40gmail.com/full/1ecwffdcbbdc3\"}, \n        {\"rel\"=&gt;\"edit\", \"type\"=&gt;\"application/atom+xml\", \"href\"=&gt;\"https://www.google.com/m8/feeds/contacts/abc%40gmail.com/full/1edcweffbbdc3/1437477459927001\"}], \n     \"organization\"=&gt;     \n        {\"rel\"=&gt;\"http://schemas.google.com/g/2005#other\", \"orgName\"=&gt;\"asds clients\", \"orgTitle\"=&gt;\"Designer Graphique\"}, \n     \"email\"=&gt;\n       {\"rel\"=&gt;\"http://schemas.google.com/g/2005#work\", \"address\"=&gt;\"el@gmail.com\", \"primary\"=&gt;\"true\"}, \n     \"groupMembershipInfo\"=&gt;\n       [{\"deleted\"=&gt;\"false\", \"href\"=&gt;\"http://www.google.com/m8/feeds/groups/abc%40gmail.com/base/171e0f878da9f342\"}, \n        {\"deleted\"=&gt;\"false\", \"href\"=&gt;\"http://www.google.com/m8/feeds/groups/abc%40gmail.com/base/538dd3c09eb63c1\"}], \"extendedProperty\"=&gt;\n          {\"name\"=&gt;\"tag:fullcontact.com,2013:contact/extended#X-FC-ID-de8asdasd\", \"value\"=&gt;\"4fbbcc1f5a517asdasdas48f778_goog\"}}}\n</code></pre>\n\n<p>.. for the contact on whose Google Contacts web page I can see this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4tP0o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4tP0o.png\" alt=\"google_contacts_screenshot\"></a> </p>\n\n<p>There is no sign of either the LinkedIn or Insight.ly Link custom field in the response.\nThis leads me to the question: \nIs it possible to do what I want to do in Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443602652, "post_id": 32861654, "comment_id": 53555926, "body": "Can you paste the full error stacktrace in the question?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443602896, "post_id": 32861654, "comment_id": 53556080, "body": "Please post the code of <code>app&#47;views&#47;static_pages&#47;manager.html.erb</code> in the question"}, {"owner": {"reputation": 429, "user_id": 5384436, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31957dc2ac530c777e8ec9a2c60c721b?s=128&d=identicon&r=PG&f=1", "display_name": "verrom", "link": "https://stackoverflow.com/users/5384436/verrom"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443603322, "post_id": 32861654, "comment_id": 53556383, "body": "@Pavan I&#39;ve add the code."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443603700, "post_id": 32861654, "comment_id": 53556654, "body": "Wait, <code>create_table @item do |t|</code> should be <code>create_table :items do |t|</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2643, "user_id": 289420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd45df315e2b93df1d56a6688fd6702?s=128&d=identicon&r=PG", "display_name": "EdvardM", "link": "https://stackoverflow.com/users/289420/edvardm"}, "is_accepted": false, "score": 0, "last_activity_date": 1443603499, "last_edit_date": 1443603499, "creation_date": 1443602801, "answer_id": 32861725, "question_id": 32861654, "link": "https://stackoverflow.com/questions/32861654/argumenterror-in-staticpagesmanager/32861725#32861725", "title": "ArgumentError in StaticPages#manager", "body": "<p>You should show StaticPages controller and especially method <code>manager</code>, which is missing here. Also, try to minimize the problem so that you still get the error. </p>\n\n<p>Also having the stacktrace would help.</p>\n\n<p>Update: at least your migration has an error. It's <code>create_table :items</code>, or <code>create_table \"items\"</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 429, "user_id": 5384436, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31957dc2ac530c777e8ec9a2c60c721b?s=128&d=identicon&r=PG&f=1", "display_name": "verrom", "link": "https://stackoverflow.com/users/5384436/verrom"}, "edited": false, "score": 0, "creation_date": 1443603460, "post_id": 32861877, "comment_id": 53556465, "body": "But now I have it and there is another error. I&#39;ve update my question with it."}, {"owner": {"reputation": 429, "user_id": 5384436, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31957dc2ac530c777e8ec9a2c60c721b?s=128&d=identicon&r=PG&f=1", "display_name": "verrom", "link": "https://stackoverflow.com/users/5384436/verrom"}, "edited": false, "score": 0, "creation_date": 1443604146, "post_id": 32861877, "comment_id": 53556939, "body": "it&#39;s too late, I&#39;ve done migration :) It looks ok :) It is better to update code?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1443604257, "post_id": 32861877, "comment_id": 53557017, "body": "@RichPeck Use <code>&lt;s&gt; &lt;&#47;s&gt;</code> to strike a line :)"}, {"owner": {"reputation": 429, "user_id": 5384436, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31957dc2ac530c777e8ec9a2c60c721b?s=128&d=identicon&r=PG&f=1", "display_name": "verrom", "link": "https://stackoverflow.com/users/5384436/verrom"}, "edited": false, "score": 0, "creation_date": 1443605304, "post_id": 32861877, "comment_id": 53557711, "body": "Thanks a lot, you answer helped! :)"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 1, "last_activity_date": 1443604632, "last_edit_date": 1443604632, "creation_date": 1443603253, "answer_id": 32861877, "question_id": 32861654, "link": "https://stackoverflow.com/questions/32861654/argumenterror-in-staticpagesmanager/32861877#32861877", "title": "ArgumentError in StaticPages#manager", "body": "<blockquote>\n  <p>First argument in form cannot contain nil or be empty</p>\n</blockquote>\n\n<p>You are rendering that <strong><em>partial</em></strong>(<code>app/views/items/_new.html.erb</code>) in <code>app/views/static_pages/manager.html.erb</code>, so you should be having <code>@item = Item.new</code> in <code>manager</code> method of <code>static_pages_controller.rb</code></p>\n\n<pre><code>#static_pages_controller.rb\ndef manager\n  @item = Item.new\nend\n</code></pre>\n\n<blockquote>\n  <p>undefined method `value2' for Item:0xb3ba6504</p>\n</blockquote>\n\n<p><s>That attribute <code>value2</code> not find in <code>items</code> table. Create a migration with the below command</s></p>\n\n<p><s><code>rails g migration add_value2_to_items value2:string</code></s></p>\n\n<p>Change <code>create_table @item do |t|</code> to <code>create_table :items do |t|</code> in the migration file and do <code>rake db:migrate</code></p>\n"}, {"comments": [{"owner": {"reputation": 429, "user_id": 5384436, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31957dc2ac530c777e8ec9a2c60c721b?s=128&d=identicon&r=PG&f=1", "display_name": "verrom", "link": "https://stackoverflow.com/users/5384436/verrom"}, "edited": false, "score": 0, "creation_date": 1443604985, "post_id": 32862181, "comment_id": 53557509, "body": "thank you a lot! The answer is too detailed and necessary. I&#39;ll change my code :)"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 1, "last_activity_date": 1443604180, "creation_date": 1443604180, "answer_id": 32862181, "question_id": 32861654, "link": "https://stackoverflow.com/questions/32861654/argumenterror-in-staticpagesmanager/32862181#32862181", "title": "ArgumentError in StaticPages#manager", "body": "<blockquote>\n  <p>First argument in form cannot contain nil or be empty</p>\n</blockquote>\n\n<p>Your variable <code>@item</code> is not populated.</p>\n\n<hr>\n\n<p>I started writing this before you updated, so I'll add the fixes afterwards...</p>\n\n<pre><code>app/views/static_pages/manager.html.erb\n</code></pre>\n\n<p>This tells us the error is likely originating from the <code>manager</code> action of <code>StaticPagesController</code>. Specifically, you'll probably not have <code>@item</code> defined there...</p>\n\n<p>So the first thing is to do the following:</p>\n\n<pre><code>#app/controllers/static_pages_controller.rb\nclass StaticPagesController &lt; ApplicationController\n   def manager\n      @item = Item.new\n   end\nend\n</code></pre>\n\n<p>--</p>\n\n<p>With your updated code, here's the new problem:</p>\n\n<blockquote>\n  <p>undefined method `value2' for #</p>\n</blockquote>\n\n<p>This means you've not got an attribute called <code>value2</code> for your <code>Item</code> model.</p>\n\n<p>There are several solutions to this; the underlying fix is to get your <code>attribute</code> names sorted out properly.</p>\n\n<pre><code>t.string :variable1\nt.string :variable2\nt.string :variable3\nt.string :variable4\nt.string :value1\nt.string :value2\nt.string :value3\nt.string :value4\nt.string :comment\n</code></pre>\n\n<p>Since when did a model have <code>variable1</code>, <code>variable2</code>, etc?</p>\n\n<p>Ruby / Rails has the unrivalled capacity to call <em>objects</em>, which means you'll be able to do the following: <code>@item.name</code> etc... and yet you call <code>@item.variable1</code>?</p>\n\n<p>These <em>may</em> be what you need, but if you're adding them for the sake of it, you need to rethink the construct of your model.</p>\n\n<p>That is, you need to rename your attributes to be more fitting to what data they're going to hold. You'll improve as a developer &amp; code architect as a result.</p>\n\n<hr>\n\n<p><strong>Partial</strong></p>\n\n<p>Finally, don't call <code>@instance_variables</code> in partials.</p>\n\n<p>Partials are meant to be called throughout your application, and should not be bound to specific data-structures. Rails can pass <em>local</em> variables to your partials using the following code:</p>\n\n<pre><code>&lt;%= render 'items/new', locals: {item: @item} %&gt;\n\n#app/views/items/_new.html.erb\n&lt;%= form_for item do |f| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 429, "user_id": 5384436, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31957dc2ac530c777e8ec9a2c60c721b?s=128&d=identicon&r=PG&f=1", "display_name": "verrom", "link": "https://stackoverflow.com/users/5384436/verrom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 32861877, "answer_count": 3, "score": 2, "last_activity_date": 1443604632, "creation_date": 1443602567, "last_edit_date": 1443603282, "question_id": 32861654, "link": "https://stackoverflow.com/questions/32861654/argumenterror-in-staticpagesmanager", "title": "ArgumentError in StaticPages#manager", "body": "<p>I have a problem with item creation. I have next error:</p>\n\n<pre><code>ArgumentError in StaticPages#manager\n\nShowing /home/verevkinra/apps/yurta24/app/views/items/_new.html.erb where line #2 raised:\n\nFirst argument in form cannot contain nil or be empty\n\nExtracted source (around line #2):\n&lt;h1&gt;Items manage&lt;/h1&gt;\n&lt;%= form_for @item do |f| %&gt;\n   &lt;%= f.text_field :variable1 %&gt;\n   &lt;%= f.text_field :variable2 %&gt;\n   &lt;%= f.text_field :variable3 %&gt;\n   &lt;%= f.text_field :variable4 %&gt;\n\nTrace of template inclusion: app/views/static_pages/manager.html.erb\n\nRails.root: /home/verevkinra/apps/yurta24\n</code></pre>\n\n<p>First argument in form cannot contain nil or be empty on the second line of this code (app/view/items/new.html.erb):</p>\n\n<pre><code>&lt;h1&gt;Items manage&lt;/h1&gt;\n&lt;%= form_for @item do |f| %&gt;\n   &lt;%= f.text_field :variable1 %&gt;\n   &lt;%= f.text_field :variable2 %&gt;\n   &lt;%= f.text_field :variable3 %&gt;\n   &lt;%= f.text_field :variable4 %&gt;\n   &lt;%= f.text_field :value1 %&gt;\n   &lt;%= f.text_field :value2 %&gt;\n   &lt;%= f.text_field :value3 %&gt;\n   &lt;%= f.text_field :value4 %&gt;\n   &lt;%= f.text_field :comment %&gt;\n\n   &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>My Items_controller.rb is:</p>\n\n<pre><code>class ItemsController &lt; ApplicationController\n\n      def new\n       @item = Item.new\n    end\n    def create\n       @item = Item.new item_params\n       @item.save\n    end\n\n    def destroy\n         @item = Item.find(params[:id])\n         @item.destroy\n      end\n\n    private\n\n    def item_params\n       params.require(:item).permit(:variable1, :variable2, :variable3, :variable4, :value1, :value2, :value3, :value4, :comment)\n    end\nend\n</code></pre>\n\n<p>My DB migration file is:</p>\n\n<pre><code>class CreateItems &lt; ActiveRecord::Migration\n  def change\n    create_table @item do |t|\n      t.string :variable1\n      t.string :variable2\n      t.string :variable3\n      t.string :variable4\n      t.string :value1\n      t.string :value2\n      t.string :value3\n      t.string :value4\n      t.string :comment\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p>My routes.rb has next line:</p>\n\n<pre><code>resources :items\n</code></pre>\n\n<p>Thanks</p>\n\n<p>My static_pages_controller.rb is:</p>\n\n<pre><code>class StaticPagesController &lt; ApplicationController\n  def home\n    @contact_form = ContactForm.new \n  end\n\n  def manager\n    @contact_messages = ContactForm.all\n    @item = Item.new\n  end\nend\n</code></pre>\n\n<p>Line <code>@item = Item.new</code> I've add right now and there is another error: </p>\n\n<pre><code>NoMethodError in StaticPages#manager\n\nShowing /home/verevkinra/apps/yurta24/app/views/items/_new.html.erb where line #8 raised:\n\nundefined method `value2' for #&lt;Item:0xb3ba6504&gt;\n\nExtracted source (around line #8):\n   &lt;%= f.text_field :variable4 %&gt;\n   &lt;%= f.text_field :value1 %&gt;\n   &lt;%= f.text_field :value2 %&gt;\n   &lt;%= f.text_field :value3 %&gt;\n   &lt;%= f.text_field :value4 %&gt;\n   &lt;%= f.text_field :comment %&gt;\n\nTrace of template inclusion: app/views/static_pages/manager.html.erb\n</code></pre>\n\n<p>app/views/static_pages/manager.html.erb is:</p>\n\n<pre><code>&lt;%= render 'contact_forms/new' %&gt;\n&lt;%= render 'items/new' %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "reset-password"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443601299, "post_id": 32861167, "comment_id": 53555100, "body": "Can you post the mailer template code in the question?"}, {"owner": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "edited": false, "score": 0, "creation_date": 1443622207, "post_id": 32861167, "comment_id": 53568558, "body": "one interesting thing is both password reset links are different(particularly the reset token <code>id</code> parameter). Both links are from the same email? What&#39;s the value of the the User&#39;s <code>reset_digest</code>(I think this is what is called in Hartl&#39;s tutorial) in your console?"}], "answers": [{"tags": [], "owner": {"reputation": 621, "user_id": 1554590, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a0283f7fdb67d2c71984bb3bf2a75739?s=128&d=identicon&r=PG", "display_name": "Finnjon", "link": "https://stackoverflow.com/users/1554590/finnjon"}, "is_accepted": false, "score": 0, "last_activity_date": 1443721259, "creation_date": 1443721259, "answer_id": 32893618, "question_id": 32861167, "link": "https://stackoverflow.com/questions/32861167/rails-tutorial-password-reset-route-not-found/32893618#32893618", "title": "Rails Tutorial password_reset route not found", "body": "<p>The problem was, as I suspected to do with the token. I had previously used devise for authentication and due to a table naming inconsistency, the mailer was not returning the token but the token digest. Once the mailer returned the token instead, the route worked fine.</p>\n"}], "owner": {"reputation": 621, "user_id": 1554590, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a0283f7fdb67d2c71984bb3bf2a75739?s=128&d=identicon&r=PG", "display_name": "Finnjon", "link": "https://stackoverflow.com/users/1554590/finnjon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443721259, "creation_date": 1443601012, "last_edit_date": 1443601491, "question_id": 32861167, "link": "https://stackoverflow.com/questions/32861167/rails-tutorial-password-reset-route-not-found", "title": "Rails Tutorial password_reset route not found", "body": "<p>I am using the Rails Tutorial 3 to roll my own authentication system and it works until I try the password reset part. When I submit the password reset form a token is created and stored in the database as <code>reset_password_token</code>. Then an email is sent with a link to the password reset form which looks like this:</p>\n\n<pre><code>&lt;a href=\"http://localhost:3000/password_resets/$2a$10$UU.bHK5V4o6BFRFPqjtPoOV12aSwq9nvy7OQuxFp.rFjK6lqfJali/edit?email=myemail\"&gt;Reset password&lt;/a&gt;\n</code></pre>\n\n<p>When I click the link (or copy/paste it because it's local) I get an error:</p>\n\n<pre><code>No route matches [GET] \"/password_resets/$2a$10$XAh7yOyphGR84n5fSBUZhuM4WpuyVwLayIZgB0QTTF.q3PgKX9Kz6/edit\"\n</code></pre>\n\n<p>But the rake routes shows the route does exist:</p>\n\n<pre><code>edit_password_reset_path    GET /password_resets/:id/edit(.:format) password_resets#edit\n</code></pre>\n\n<p>The only difference between my code and the code in the tutorial is that the my token seems to be longer. It is around 60 characters whereas Hartl's is around 22. Also, when I type <code>SecureRandom.urlsafe_base64</code> into the console I get a 22 character token. I'm not sure why it is creating a longer one but also I'm not sure it matters.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Mailer template:</p>\n\n<pre><code>To reset your password click the link below:\n\n&lt;%= edit_password_reset_url(@user.reset_password_token, email: @user.email) %&gt;\n\nThis link will expire in two hours.\n\nIf you did not request your password to be reset, please ignore this email and\nyour password will stay as it is.\n</code></pre>\n"}, {"tags": ["ruby", "path", "pathname"], "comments": [{"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "edited": false, "score": 0, "creation_date": 1443600329, "post_id": 32860766, "comment_id": 53554594, "body": "Show your <code>ARGV</code> please"}, {"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "edited": false, "score": 1, "creation_date": 1443600434, "post_id": 32860766, "comment_id": 53554652, "body": "I think the reason is in the <code>~&#47;</code> directory. To check it try to pass the full path ie <code>&#47;home&#47;user&#47;dlds&#47;some_file.ics</code>"}, {"owner": {"reputation": 3583, "user_id": 1391026, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/af98bdbeea8772f2d90d47d507098256?s=128&d=identicon&r=PG", "display_name": "musicmatze", "link": "https://stackoverflow.com/users/1391026/musicmatze"}, "edited": false, "score": 0, "creation_date": 1443600540, "post_id": 32860766, "comment_id": 53554716, "body": "ARGV: <code>[&quot;--debug&quot;, &quot;~&#47;dlds&#47;some_file&quot;]</code>. Using a full path doesn&#39;t work as well.."}], "answers": [{"comments": [{"owner": {"reputation": 3583, "user_id": 1391026, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/af98bdbeea8772f2d90d47d507098256?s=128&d=identicon&r=PG", "display_name": "musicmatze", "link": "https://stackoverflow.com/users/1391026/musicmatze"}, "edited": false, "score": 0, "creation_date": 1443599934, "post_id": 32860814, "comment_id": 53554385, "body": "Results in <code>Errno::ENOENT: No such file or directory @ rb_readlink - ~&#47;dlds&#47;some_file</code>"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1443600319, "post_id": 32860814, "comment_id": 53554589, "body": "This should work. From the error you show you supplied the incorrect filename."}, {"owner": {"reputation": 3583, "user_id": 1391026, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/af98bdbeea8772f2d90d47d507098256?s=128&d=identicon&r=PG", "display_name": "musicmatze", "link": "https://stackoverflow.com/users/1391026/musicmatze"}, "edited": false, "score": 0, "creation_date": 1443600573, "post_id": 32860814, "comment_id": 53554732, "body": "The filename was auto-completed when I tried in irb, so no, I know that the file exists and the path is correct."}], "tags": [], "owner": {"reputation": 10185, "user_id": 5328417, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ecwCL.jpg?s=128&g=1", "display_name": "Arsen", "link": "https://stackoverflow.com/users/5328417/arsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1443599836, "creation_date": 1443599836, "answer_id": 32860814, "question_id": 32860766, "link": "https://stackoverflow.com/questions/32860766/how-to-check-whether-a-file-exists/32860814#32860814", "title": "How to check whether a File exists", "body": "<p>I think <a href=\"http://ruby-doc.org/core-2.2.3/File.html#method-c-readlink\" rel=\"nofollow\">File.readlink</a> is what you are looking for</p>\n\n<blockquote>\n  <p>Returns the name of the file referenced by the given link. Not\n  available on all platforms.</p>\n</blockquote>\n\n<pre><code>File.readlink(\"path/to/symlink\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31516, "user_id": 144088, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/275e84b46c74904dd0b376d89d6968ef?s=128&d=identicon&r=PG", "display_name": "Crashalot", "link": "https://stackoverflow.com/users/144088/crashalot"}, "edited": false, "score": 3, "creation_date": 1461228209, "post_id": 32861082, "comment_id": 61106757, "body": "note this returns true if the path is also a directory. details here: <a href=\"http://stackoverflow.com/questions/8590098/ruby-function-to-check-file-existence\" title=\"ruby function to check file existence\">stackoverflow.com/questions/8590098/&hellip;</a>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 15, "last_activity_date": 1443600716, "creation_date": 1443600716, "answer_id": 32861082, "question_id": 32860766, "link": "https://stackoverflow.com/questions/32860766/how-to-check-whether-a-file-exists/32861082#32861082", "title": "How to check whether a File exists", "body": "<pre><code>File.exist? File.expand_path \"~/dlds/some_file.ics\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": false, "score": 2, "last_activity_date": 1443600877, "creation_date": 1443600877, "answer_id": 32861132, "question_id": 32860766, "link": "https://stackoverflow.com/questions/32860766/how-to-check-whether-a-file-exists/32861132#32861132", "title": "How to check whether a File exists", "body": "<p>Your question is a bit confusing. If you want to check if the file exists, you should just do as you did: </p>\n\n<pre><code>Pathname.new(file_name).file? \n</code></pre>\n\n<p>If you are using the <code>~</code> you will first have to expand the path, so write: </p>\n\n<pre><code>Pathname.new(file_name).expand_path.file? \n</code></pre>\n\n<p>If you want to check if the given <code>file_name</code> is a symlink, you can just do </p>\n\n<pre><code>Pathname.new(file_name).expand_path.symlink? \n</code></pre>\n\n<p>If you want to find the file the symlink points to, you have to follow the link: </p>\n\n<pre><code>File.readlink(Pathname.new(file_name).expand_path) \n</code></pre>\n\n<p>which will return the filename of the linked file, so if you really wanted you could do something like: </p>\n\n<pre><code>Pathname.new(File.readlink(Pathname.new(file_name).expand_path)).file? \n</code></pre>\n\n<p>to make sure the symlink is pointing to an existing file.   </p>\n"}], "owner": {"reputation": 3583, "user_id": 1391026, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/af98bdbeea8772f2d90d47d507098256?s=128&d=identicon&r=PG", "display_name": "musicmatze", "link": "https://stackoverflow.com/users/1391026/musicmatze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11323, "favorite_count": 0, "closed_date": 1481823173, "accepted_answer_id": 32861082, "answer_count": 3, "score": 8, "last_activity_date": 1481823099, "creation_date": 1443599662, "last_edit_date": 1481823099, "question_id": 32860766, "link": "https://stackoverflow.com/questions/32860766/how-to-check-whether-a-file-exists", "closed_reason": "Duplicate", "title": "How to check whether a File exists", "body": "<p>I have an Array of Strings and I want to select only these Strings which are paths to files:</p>\n\n<p>My path is <code>\"~/dlds/some_file.ics\"</code> where <code>~/dlds</code> is a symlink to <code>~/archive/downloads</code> on my system. The file has following permissions:</p>\n\n<pre><code>-rw-r--r--\n</code></pre>\n\n<p>My code (I tried several variants):</p>\n\n<pre><code>ARGV.select do |string|\n    File.file? string # returns false\n    Pathname.new(string).file? # returns false\n    Pathname.new(string).expand_path.file? # returns false\nend\n</code></pre>\n\n<p>I don't know what else to try.</p>\n\n<p>I'm running Ruby 2.2.0 or 2.2.2.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-s3"], "answers": [{"comments": [{"owner": {"reputation": 2321, "user_id": 2540204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61eRS.jpg?s=128&g=1", "display_name": "neanderslob", "link": "https://stackoverflow.com/users/2540204/neanderslob"}, "edited": false, "score": 0, "creation_date": 1443605437, "post_id": 32861008, "comment_id": 53557794, "body": "Thanks so much for your response; I feel like I&#39;m understanding the idea behind AWS much more.  To clarify a couple things:  1) Does <code>object(&#39;key&#39;)</code> therefore automatically generate for the given uploaded file?  (In other words, do I need to supply a &#39;key&#39; or does the above code make one for me?)  2) Do I need to somehow assign ownership to my IAM user to access a particular bucket?  (In case it matters, I&#39;m using Heroku rather than EC2)  Thanks again!"}, {"owner": {"reputation": 41919, "user_id": 53686, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c857228f59474aa4130f12a1de2b69b0?s=128&d=identicon&r=PG", "display_name": "E.J. Brennan", "link": "https://stackoverflow.com/users/53686/e-j-brennan"}, "reply_to_user": {"reputation": 2321, "user_id": 2540204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61eRS.jpg?s=128&g=1", "display_name": "neanderslob", "link": "https://stackoverflow.com/users/2540204/neanderslob"}, "edited": false, "score": 1, "creation_date": 1443614193, "post_id": 32861008, "comment_id": 53562951, "body": "Not sure i a key would be generated if you didn&#39;t supply it; I always supply it. Easy enought to give it a try though. IAM Users will need to be given access to buckets, unless you&#39;ve already made the public public for all users to read/write - not recommended,"}], "tags": [], "owner": {"reputation": 41919, "user_id": 53686, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c857228f59474aa4130f12a1de2b69b0?s=128&d=identicon&r=PG", "display_name": "E.J. Brennan", "link": "https://stackoverflow.com/users/53686/e-j-brennan"}, "is_accepted": true, "score": 0, "last_activity_date": 1443600456, "creation_date": 1443600456, "answer_id": 32861008, "question_id": 32860543, "link": "https://stackoverflow.com/questions/32860543/really-basic-s3-upload-credentials/32861008#32861008", "title": "Really Basic S3 Upload credentials", "body": "<p>Because S3 doesn't have traditional directories, what you would consider the entire 'file path' in your client machines, i.e. \\some\\directory\\test.xls becomes the 'key'. The object is the data in the file.</p>\n\n<p>Buckets are unique across S3, and the keys must be unique within your bucket.</p>\n\n<p>As far as the credentials, there are multiple ways of providing them - one is to actually supply the id and secret access key right in your code, another is to store them in a config file somewhere on your machine (this varies by OS type), and then when you are running your code in production, i.e. on an EC2 instance, the best practice is to start your instance with a IAM Role assigned, and then anything that runs on that machine automatically has all of the permissions of that role. This is the best/safest option for code that runs in EC2.</p>\n"}], "owner": {"reputation": 2321, "user_id": 2540204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61eRS.jpg?s=128&g=1", "display_name": "neanderslob", "link": "https://stackoverflow.com/users/2540204/neanderslob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 32861008, "answer_count": 1, "score": 0, "last_activity_date": 1443600456, "creation_date": 1443598942, "question_id": 32860543, "link": "https://stackoverflow.com/questions/32860543/really-basic-s3-upload-credentials", "title": "Really Basic S3 Upload credentials", "body": "<p>I'm giving Amazon Web Services a try for the first time and getting stuck on understanding the credentials process.</p>\n\n<p>From a <a href=\"https://ruby.awsblog.com/post/Tx1K43Z7KXHM5D5/Uploading-Files-to-Amazon-S3\" rel=\"nofollow\">tutorial</a> from awsblog.com, I gather that I can upload a file to one of my AWS \"buckets\" as follows:</p>\n\n<pre><code>s3 = Aws::S3::Resource.new\n\ns3.bucket('bucket-name').object('key').upload_file('/source/file/path')\n</code></pre>\n\n<p>In the above circumstance, I'm assuming he's using the default credentials (as described <a href=\"http://docs.aws.amazon.com/AWSSdkDocsRuby/latest/DeveloperGuide/prog-basics-creds.html\" rel=\"nofollow\">here</a> in the documentation), where he's using particular environment variables to store the access key and secret or something like that.  (If that's not the right idea, feel free to set me straight.)</p>\n\n<p>The thing I'm having a hard time understanding is the meaning behind the <code>.object('key')</code>.  What is this?  I've generated a bucket easily enough but is it supposed to have a specific key?  If so, how to I create it?  If not, what is supposed to go into <code>.object()</code>?</p>\n\n<p>I figure this MUST be out there somewhere but I haven't been able to get it (maybe I'm misreading the documentation).  Thanks to anyone who gives me some direction here.</p>\n"}, {"tags": ["ruby", "rspec", "phantomjs", "capybara", "poltergeist"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1443598418, "post_id": 32860345, "comment_id": 53553546, "body": "Could you add a <code>sleep 5</code> after populating the field to verify that it is a waiting problem?"}, {"owner": {"reputation": 1531, "user_id": 976035, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/913e70d8b28f4ea2bd30a735e23d25b2?s=128&d=identicon&r=PG", "display_name": "Finks", "link": "https://stackoverflow.com/users/976035/finks"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1443598613, "post_id": 32860345, "comment_id": 53553632, "body": "Already tried that, still error. The whole error is this: <code>Failure&#47;Error: select &#39;15.04&#39;, from: &#39;version&#39;. Capybara::ElementNotFoun: Unable to find option &quot;15.04&quot;</code>"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1443598768, "post_id": 32860345, "comment_id": 53553726, "body": "It will help to <a href=\"https://github.com/mattheworiordan/capybara-screenshot#manual-screenshots\" rel=\"nofollow noreferrer\">capture a screenshot</a> at the moment of failure. Also, could you add the failing test in the question?"}, {"owner": {"reputation": 1531, "user_id": 976035, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/913e70d8b28f4ea2bd30a735e23d25b2?s=128&d=identicon&r=PG", "display_name": "Finks", "link": "https://stackoverflow.com/users/976035/finks"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1443599128, "post_id": 32860345, "comment_id": 53553933, "body": "i&#39;ll try and capture a screenshot, but for now, i have updated my question to include the failing spec."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1443600593, "post_id": 32860345, "comment_id": 53554745, "body": "Why don&#39;t you just use the newer version then?"}, {"owner": {"reputation": 1531, "user_id": 976035, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/913e70d8b28f4ea2bd30a735e23d25b2?s=128&d=identicon&r=PG", "display_name": "Finks", "link": "https://stackoverflow.com/users/976035/finks"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1443600756, "post_id": 32860345, "comment_id": 53554814, "body": "@ndn: Going to try it now. But I would like to be able to solve this problem because the only instruction that i can find on how to install 2.0 is to manually install it which takes a lot of time."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1443631096, "post_id": 32860345, "comment_id": 53574540, "body": "What version of poltergeist are you using?   1.7 was just released which has some changes/fixes around select box behavior/events.   Also, does &quot;15.04&quot; happen to be in an optgroup?"}], "answers": [{"tags": [], "owner": {"reputation": 1531, "user_id": 976035, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/913e70d8b28f4ea2bd30a735e23d25b2?s=128&d=identicon&r=PG", "display_name": "Finks", "link": "https://stackoverflow.com/users/976035/finks"}, "is_accepted": true, "score": 0, "last_activity_date": 1443689823, "creation_date": 1443689823, "answer_id": 32883390, "question_id": 32860345, "link": "https://stackoverflow.com/questions/32860345/javascript-trigger-when-using-poltergiest-capybara-outside-of-rails/32883390#32883390", "title": "Javascript trigger when using poltergiest/capybara outside of rails", "body": "<p>As Tom Walpole pointed out, updating poltergeist from 1.6.0 to 1.7.0 fixed most of my problem but I still need to tweak a bit to fully solve my problem. What I did is to create a <code>js</code> file to hold the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind#Polyfill\" rel=\"nofollow\">polyfill</a> and edit my <code>spec_helper.rb</code> and tell poltergeist to use the options, <code>extensions</code> and include the polyfill.js thus changing this code from</p>\n\n<pre><code>options = { js_errors: false }\n  Capybara.register_driver :poltergeist do |app|\n    Capybara::Poltergeist::Driver.new(app, options)\n  end\n</code></pre>\n\n<p>to</p>\n\n<pre><code>options = { js_errors: false, extensions: [\"spec/support/polyfill.js\"] }\n  Capybara.register_driver :poltergeist do |app|\n    Capybara::Poltergeist::Driver.new(app, options)\n  end\n</code></pre>\n"}], "owner": {"reputation": 1531, "user_id": 976035, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/913e70d8b28f4ea2bd30a735e23d25b2?s=128&d=identicon&r=PG", "display_name": "Finks", "link": "https://stackoverflow.com/users/976035/finks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 32883390, "answer_count": 1, "score": 0, "last_activity_date": 1443689823, "creation_date": 1443598275, "last_edit_date": 1443600307, "question_id": 32860345, "link": "https://stackoverflow.com/questions/32860345/javascript-trigger-when-using-poltergiest-capybara-outside-of-rails", "title": "Javascript trigger when using poltergiest/capybara outside of rails", "body": "<p>I'm using Capybara, rspec and poltergeist, outside of rails, to run some headless integrations tests. The scenario is that, there are 2 select fields. If I select a value in the first select field, the 2nd select field is populated based on the value of the first select field. If I run my spec using poltergeist in Mac OSX, the spec works. But in ubuntu, it fails, it seems that the 2nd select field is not populated. I also have <code>js: true</code> on my specs.</p>\n\n<p>Here's my spec_helper.rb:</p>\n\n<pre><code>require 'capybara/poltergeist'\nrequire 'capybara'\nrequire 'capybara/rspec'\nrequire 'pry'\nrequire 'support/session_helper'\nRSpec.configure do |config|\n\n  config.include Capybara::DSL\n  config.include Capybara::Poltergeist\n  config.include SessionHelper\n\n  Capybara.run_server = false\n  Capybara.default_driver = :poltergeist\n  Capybara.javascript_driver = :poltergeist\n  Capybara.app_host = \"http://vps-staging.dropmysite.com\"\n\n  options = { js_errors: false }\n  Capybara.register_driver :poltergeist do |app|\n    Capybara::Poltergeist::Driver.new(app, options)\n  end\n\n  config.expect_with :rspec do |expectations|\n\n    expectations.include_chain_clauses_in_custom_matcher_descriptions = true\n  end\n\n  config.mock_with :rspec do |mocks|\n    mocks.verify_partial_doubles = true\n  end\n\nend\n</code></pre>\n\n<p><em>EDIT</em> Adding failing spec</p>\n\n<pre><code>require 'spec_helper'\n\nfeature 'vps-staging', js: true do\n  background do\n    visit '/'\n  end\n\n  let(:timestamp) { Time.now.strftime('%Y-%m-%d_%H-%M-%S') }\n\n\n  feature 'create private server' do\n    background do\n      sign_in 'blahblah@blahblah.com'\n    end\n\n    it 'successfully creates server' do\n      find(:xpath, \"//a[@href='/en/private_servers/new']\").click\n\n      directory_field = all(\".tagit-new\")[0].find(\"input\")\n      select 'Ubuntu', from: 'distribution'\n      select '15.04', from: 'version'\n      fill_in 'private_server_profile_name', with: \"Auto Test #{timestamp}\"\n      directory_field.set \"/home\"\n      click_button 'Save'\n\n      visit '/en/dashboard'\n\n      expect(page.text).to have_content \"Auto Test #{timestamp}\"\n    end\n  end\nend\n</code></pre>\n\n<p><em>EDIT</em> another thing I found out is that, this bug only happens on phantomjs version 1.9.8 and below. 2.0 works fine.</p>\n"}, {"tags": ["ruby", "activerecord", "uninitialized-constant"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5391805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1FxB.jpg?s=128&g=1", "display_name": "irishfromua", "link": "https://stackoverflow.com/users/5391805/irishfromua"}, "edited": false, "score": 0, "creation_date": 1443607100, "post_id": 32860724, "comment_id": 53558725, "body": "Object is a template word, which i used instead of Barber &amp; Barbers:     class CreateBarbers &lt; ActiveRecord::Migration     def change     create_table :barbers do |t|     t.text :name      t.timestamps null: false     end     Barber.create :name =&gt; &quot;Jessie Pinkman&quot;     Barber.create :name =&gt; &quot;Walter White&quot;     Barber.create :name =&gt; &quot;Gus Fring&quot;     end     end"}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "reply_to_user": {"reputation": 11, "user_id": 5391805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1FxB.jpg?s=128&g=1", "display_name": "irishfromua", "link": "https://stackoverflow.com/users/5391805/irishfromua"}, "edited": false, "score": 0, "creation_date": 1443678617, "post_id": 32860724, "comment_id": 53591103, "body": "Then please provide actual code in your question ... !"}, {"owner": {"reputation": 11, "user_id": 5391805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1FxB.jpg?s=128&g=1", "display_name": "irishfromua", "link": "https://stackoverflow.com/users/5391805/irishfromua"}, "edited": false, "score": 0, "creation_date": 1443699791, "post_id": 32860724, "comment_id": 53603058, "body": "Thanks, Felix, the problem was solved by set up pg gem, which pull bundle of another gems and packs (particularly postgresql-server-dev-all). After installing it, the command rake db:migrate works fine and completely."}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "reply_to_user": {"reputation": 11, "user_id": 5391805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1FxB.jpg?s=128&g=1", "display_name": "irishfromua", "link": "https://stackoverflow.com/users/5391805/irishfromua"}, "edited": false, "score": 0, "creation_date": 1443703378, "post_id": 32860724, "comment_id": 53605488, "body": "@irishfromua Great to hear. At Stackoverflow it is important that solved answers are marked as such (this is not fire-and-forget, more like wikipedia), so please update your question, post an answer yourself and accept it. Thanks. And make sure to read the help-section here (top-right)."}], "tags": [], "owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "is_accepted": false, "score": 0, "last_activity_date": 1443678769, "last_edit_date": 1443678769, "creation_date": 1443599496, "answer_id": 32860724, "question_id": 32860117, "link": "https://stackoverflow.com/questions/32860117/rake-dbmigrate-cause-standarderror-uninitialized-constant-createobjectsobje/32860724#32860724", "title": "rake db:migrate cause StandardError - uninitialized constant CreateObjects::Object", "body": "<p><strong>Update: In a comment it was pointed out that the actual code was not containing \"Object\", this answer is thus based on the wrong example.</strong></p>\n\n<p><code>Object</code> is a bad name to use for an (unscoped) Model class, as it is already defined by Ruby.</p>\n\n<p>The <code>Object</code> you are calling create on is probably not the <code>Object</code> class you defined in your model sources.</p>\n\n<p>I assume you run rails. Remove the <code>Object.create</code> lines from your migration. Run it, it should work fine. Then, call <code>rails console</code>, where you end up in a <strong>live</strong> session. Here you can play around with your code, e.g. call <code>Object.create</code>, <code>Object.where{id: 1}</code> etc. I assume that you will get the same errors.</p>\n\n<p>So, as a solution, rename your <code>Object</code> into something else, like <code>Class</code> and look if it works.</p>\n\n<p>Okay, that was a joke, of course <code>Class</code> is also a really bad name for a model class :) . Try to find something more meaningful.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5391805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1FxB.jpg?s=128&g=1", "display_name": "irishfromua", "link": "https://stackoverflow.com/users/5391805/irishfromua"}, "is_accepted": true, "score": 0, "last_activity_date": 1443869206, "creation_date": 1443869206, "answer_id": 32921676, "question_id": 32860117, "link": "https://stackoverflow.com/questions/32860117/rake-dbmigrate-cause-standarderror-uninitialized-constant-createobjectsobje/32921676#32921676", "title": "rake db:migrate cause StandardError - uninitialized constant CreateObjects::Object", "body": "<p>The problem was solved by set up pg gem, which pull bundle of another gems and packs (particularly postgresql-server-dev-all). After installing it, the command rake db:migrate works fine and completely.</p>\n"}], "owner": {"reputation": 11, "user_id": 5391805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1FxB.jpg?s=128&g=1", "display_name": "irishfromua", "link": "https://stackoverflow.com/users/5391805/irishfromua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 32921676, "answer_count": 2, "score": 1, "last_activity_date": 1443869206, "creation_date": 1443597444, "last_edit_date": 1443601272, "question_id": 32860117, "link": "https://stackoverflow.com/questions/32860117/rake-dbmigrate-cause-standarderror-uninitialized-constant-createobjectsobje", "title": "rake db:migrate cause StandardError - uninitialized constant CreateObjects::Object", "body": "<p>I have migration 20150930051523_create_objects.rb:</p>\n\n<pre><code>class CreateObjects &lt; ActiveRecord::Migration\ndef change\n  create_table :objects do |t|\n    t.text :name\n    t.timestamps null: false\n  end\n\n  Object.create :name =&gt; \"A\"\n  Object.create :name =&gt; \"B\"\n  Object.create :name =&gt; \"C\"\n\n  end\nend\n</code></pre>\n\n<pre>\n$ rake:db migrate --trace cause output:\n** Invoke db:migrate (first_time)\n** Invoke db:environment (first_time)\n** Execute db:environment\n** Invoke db:load_config (first_time)\n** Execute db:load_config\n** Execute db:migrate\n== 20150930051523 CreateObjects: migrating ====================================\n-- create_table(:objects)\n   -> 0.0010s\nrake aborted!\nStandardError: An error has occurred, this and all later migrations canceled:\n\nuninitialized constant CreateObjects::Object/db/migrate/20150930051523_create_objects.rb:8:in `change'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:605:in `exec_migration'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:589:in `block (2 levels) in migrate'\n/usr/lib/ruby/2.1.0/benchmark.rb:279:in `measure'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:588:in `block in migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:292:in `with_connection'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:587:in `migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:765:in `migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:995:in `block in execute_migration_in_transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:1041:in `block in ddl_transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `block in transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract/transaction.rb:184:in `within_new_transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/transactions.rb:220:in `transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:1041:in `ddl_transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:994:in `execute_migration_in_transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:956:in `block in migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:952:in `each'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:952:in `migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:820:in `up'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:798:in `migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/tasks/database_tasks.rb:137:in `migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/railties/databases.rake:44:in `block (2 levels) in '\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:240:in `call'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:240:in `block in execute'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:235:in `each'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:235:in `execute'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:179:in `block in invoke_with_call_chain'\n/usr/lib/ruby/2.1.0/monitor.rb:211:in `mon_synchronize'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:172:in `invoke_with_call_chain'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:165:in `invoke'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:150:in `invoke_task'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `block (2 levels) in top_level'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `each'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `block in top_level'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:115:in `run_with_threads'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:100:in `top_level'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:78:in `block in run'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:176:in `standard_exception_handling'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:75:in `run'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/bin/rake:33:in `'\n/usr/local/bin/rake:23:in `load'\n/usr/local/bin/rake:23:in `'\nNameError: uninitialized constant CreateObjects::Object/db/migrate/20150930051523_create_barbers.rb:8:in `change'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:605:in `exec_migration'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:589:in `block (2 levels) in migrate'\n/usr/lib/ruby/2.1.0/benchmark.rb:279:in `measure'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:588:in `block in migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:292:in `with_connection'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:587:in `migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:765:in `migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:995:in `block in execute_migration_in_transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:1041:in `block in ddl_transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `block in transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract/transaction.rb:184:in `within_new_transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/transactions.rb:220:in `transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:1041:in `ddl_transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:994:in `execute_migration_in_transaction'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:956:in `block in migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:952:in `each'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:952:in `migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:820:in `up'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/migration.rb:798:in `migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/tasks/database_tasks.rb:137:in `migrate'\n/var/lib/gems/2.1.0/gems/activerecord-4.2.4/lib/active_record/railties/databases.rake:44:in `block (2 levels) in '\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:240:in `call'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:240:in `block in execute'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:235:in `each'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:235:in `execute'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:179:in `block in invoke_with_call_chain'\n/usr/lib/ruby/2.1.0/monitor.rb:211:in `mon_synchronize'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:172:in `invoke_with_call_chain'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:165:in `invoke'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:150:in `invoke_task'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `block (2 levels) in top_level'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `each'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `block in top_level'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:115:in `run_with_threads'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:100:in `top_level'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:78:in `block in run'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:176:in `standard_exception_handling'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:75:in `run'\n/var/lib/gems/2.1.0/gems/rake-10.4.2/bin/rake:33:in `'\n/usr/local/bin/rake:23:in `load'\n/usr/local/bin/rake:23:in `'\nTasks: TOP => db:migrate\n</pre>\n\n<p>Error emerging at Object.create... stage, what is wrong?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443596246, "post_id": 32859622, "comment_id": 53552321, "body": "@SergioTulentsev: No I am not 100% certain. I have only ever used it on Mac and Linux, I don&#39;t have Windows machine available to test."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443596249, "post_id": 32859622, "comment_id": 53552323, "body": "The doc specifically mentions windows, so I guess it will work."}], "tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 1, "last_activity_date": 1443599690, "last_edit_date": 1443599690, "creation_date": 1443595883, "answer_id": 32859622, "question_id": 32859475, "link": "https://stackoverflow.com/questions/32859475/exit-program-and-open-file/32859622#32859622", "title": "Exit program and open file", "body": "<p>I think this can be achieved using <a href=\"http://ruby-doc.org/core-2.2.3/Kernel.html#method-i-exec\" rel=\"nofollow\">Kernel::exec</a> instead of backticks or the <code>system</code> method. Unlike other shell-invoking commands, <code>exec</code> replaces the currently running process (i.e. the Ruby interpreter) with the new process.</p>\n\n<p>Your whole script would then be</p>\n\n<pre><code>  File.open(\"MyApp2.exe\", \"wb\") do |saved_file| \n    open(\"http://example.com/MyApp2.exe\", \"rb\") do |read_file| \n      saved_file.write(read_file.read) \n    end\n  end\n  exec 'start \"\" \"MyApp2.exe\"'\n</code></pre>\n\n<p>You cannot continue with any statements following <code>exec</code>, the program will exit at that point.</p>\n"}], "owner": {"reputation": 420, "user_id": 1731237, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7ad0b72e2b54b432ae6f4e72c02fc33f?s=128&d=identicon&r=PG", "display_name": "Supersonic", "link": "https://stackoverflow.com/users/1731237/supersonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 32859622, "answer_count": 1, "score": 1, "last_activity_date": 1443599690, "creation_date": 1443595347, "question_id": 32859475, "link": "https://stackoverflow.com/questions/32859475/exit-program-and-open-file", "title": "Exit program and open file", "body": "<p>Hello I am stuck in a situation where I need to run a command after my program exits. </p>\n\n<p>Reason : </p>\n\n<p>MyApp1.exe needs to be updated to a new version MyApp2.exe. So, MyApp1.exe should be terminated before I start MyApp2.exe, else inno setup will not let me install the new version as the old version is still running. </p>\n\n<pre><code>File.open(\"MyApp2.exe\", \"wb\") do |saved_file| \nopen(\"http://example.com/MyApp2.exe\", \"rb\") do |read_file| \n      saved_file.write(read_file.read) \n    end\n  end\n  `start \"\" \"MyApp2.exe\"`\n  exit\n</code></pre>\n\n<p>Now the <code>start</code> command is before exit, as I want to start the new downloaded MyApp2.exe, but I would like to exit first and then start the installer.</p>\n\n<p>Please help</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model", "callback"], "comments": [{"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "edited": false, "score": 0, "creation_date": 1443595521, "post_id": 32859419, "comment_id": 53551988, "body": "Can you give us <code>schema.rb</code> too?"}, {"owner": {"reputation": 336, "user_id": 2975692, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a929a7c3802cc7277952cfeefcaa88f4?s=128&d=identicon&r=PG", "display_name": "Anjan", "link": "https://stackoverflow.com/users/2975692/anjan"}, "reply_to_user": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "edited": false, "score": 0, "creation_date": 1443595963, "post_id": 32859419, "comment_id": 53552183, "body": "@dimakura please check I have added my schema at the bottom"}, {"owner": {"reputation": 336, "user_id": 2975692, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a929a7c3802cc7277952cfeefcaa88f4?s=128&d=identicon&r=PG", "display_name": "Anjan", "link": "https://stackoverflow.com/users/2975692/anjan"}, "reply_to_user": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "edited": false, "score": 0, "creation_date": 1443597172, "post_id": 32859419, "comment_id": 53552823, "body": "@dimakura Thanks a ton it works :D"}], "answers": [{"tags": [], "owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "is_accepted": true, "score": 2, "last_activity_date": 1443596243, "creation_date": 1443596243, "answer_id": 32859747, "question_id": 32859419, "link": "https://stackoverflow.com/questions/32859419/populate-a-thrid-model-pulling-data-from-different-model-with-an-after-create-c/32859747#32859747", "title": "Populate a thrid model, pulling data from different model with an after_create callback on User model", "body": "<p>Assuming the default <code>MemberRole</code> is the first one:</p>\n\n<pre><code>class User\n  after_create :assign_member_role\n\n  private\n  def assign_member_role\n    mr = MemberRole.first # default MR\n    Member.create!(user_id: self.id, member_role_id: mr.id)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 336, "user_id": 2975692, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a929a7c3802cc7277952cfeefcaa88f4?s=128&d=identicon&r=PG", "display_name": "Anjan", "link": "https://stackoverflow.com/users/2975692/anjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 32859747, "answer_count": 1, "score": 1, "last_activity_date": 1443596243, "creation_date": 1443595147, "last_edit_date": 1443595927, "question_id": 32859419, "link": "https://stackoverflow.com/questions/32859419/populate-a-thrid-model-pulling-data-from-different-model-with-an-after-create-c", "title": "Populate a thrid model, pulling data from different model with an after_create callback on User model", "body": "<p>I have 3 models, User, member_role &amp; member. I need to use after_create callback on User model and populate the member model fetching the role from member_role model.</p>\n\n<p>Would appreciate any help regarding how I can accomplish that.</p>\n\n<p>My Member_role model loos like</p>\n\n<blockquote>\n  <p>1 - admin\n  2 - teacher\n  3- student\n  4 - so on</p>\n</blockquote>\n\n<p>And mr member Model looks like</p>\n\n<blockquote>\n  <p>member_id\n  user_id\n  member_role_id</p>\n</blockquote>\n\n<p>Need to populate Member model with an after_create callback on User model.</p>\n\n<p>Here is my Schema.rb</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20150930061155) do\n\n  create_table \"member_roles\", force: :cascade do |t|\n    t.string   \"role\",       limit: 255\n    t.datetime \"created_at\",             null: false\n    t.datetime \"updated_at\",             null: false\n  end\n\n  create_table \"members\", force: :cascade do |t|\n    t.datetime \"created_at\",               null: false\n    t.datetime \"updated_at\",               null: false\n    t.integer  \"user_id\",        limit: 4\n    t.integer  \"member_role_id\", limit: 4\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"provider\",               limit: 255,   default: \"email\", null: false\n    t.string   \"uid\",                    limit: 255,   default: \"\",      null: false\n    t.string   \"encrypted_password\",     limit: 255,   default: \"\",      null: false\n    t.string   \"reset_password_token\",   limit: 255\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",          limit: 4,     default: 0,       null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\",     limit: 255\n    t.string   \"last_sign_in_ip\",        limit: 255\n    t.string   \"confirmation_token\",     limit: 255\n    t.datetime \"confirmed_at\"\n    t.datetime \"confirmation_sent_at\"\n    t.string   \"unconfirmed_email\",      limit: 255\n    t.string   \"name\",                   limit: 255\n    t.string   \"nickname\",               limit: 255\n    t.string   \"image\",                  limit: 255\n    t.string   \"email\",                  limit: 255\n    t.text     \"tokens\",                 limit: 65535\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  add_index \"users\", [\"email\"], name: \"index_users_on_email\", using: :btree\n  add_index \"users\", [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true, using: :btree\n  add_index \"users\", [\"uid\", \"provider\"], name: \"index_users_on_uid_and_provider\", unique: true, using: :btree\n\nend\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord", "mysql2"], "answers": [{"comments": [{"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1443590458, "post_id": 32858107, "comment_id": 53549980, "body": "Thanks for helping, but it&#39;s not worked. Can&#39;t find a column <code>categories.name</code>"}, {"owner": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "reply_to_user": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1443590520, "post_id": 32858107, "comment_id": 53550005, "body": "I just updated the answer.  I forgot to add <code>.references(:categories)</code>.  It should definitely work now."}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1443591206, "post_id": 32858107, "comment_id": 53550258, "body": "Thanks a lot. btw, can you give me a hint? I want to learn sql more precisely, is there any sql problem book? Book with exercises?"}], "tags": [], "owner": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "is_accepted": true, "score": 3, "last_activity_date": 1443590956, "last_edit_date": 1443590956, "creation_date": 1443589154, "answer_id": 32858107, "question_id": 32858060, "link": "https://stackoverflow.com/questions/32858060/rails-search-through-has-many-through-text-fields/32858107#32858107", "title": "Rails search through `has_many :through` text fields", "body": "<pre><code>Recipe.includes(:categories).where('recipes.title LIKE :query or categories.name like :query', query: \"%#{params[:query]}%\").references(:categories)\n</code></pre>\n\n<p>See: <a href=\"http://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-eager-loaded-associations\" rel=\"nofollow\">Specifying Conditions on Eager Loaded Associations</a></p>\n"}, {"tags": [], "owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "is_accepted": false, "score": 0, "last_activity_date": 1443591765, "last_edit_date": 1443591765, "creation_date": 1443589605, "answer_id": 32858185, "question_id": 32858060, "link": "https://stackoverflow.com/questions/32858060/rails-search-through-has-many-through-text-fields/32858185#32858185", "title": "Rails search through `has_many :through` text fields", "body": "<p>You need to <a href=\"http://www.w3schools.com/sql/sql_join_left.asp\" rel=\"nofollow\">left join</a> to the associated table and query the name on either table with <code>OR</code>:</p>\n\n<pre><code>Recipe.joins(\"LEFT OUTER JOIN category_recipes ON category_recipes.recipe_id = recipes.id\")\n  .joins(\"LEFT OUTER JOIN categories ON categories.id = category_recipes.id\")\n  .where(\"recipes.title LIKE :q OR categories.name LIKE :q\", q: \"%#{params[:query]}%\").uniq\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1443591035, "creation_date": 1443591035, "answer_id": 32858473, "question_id": 32858060, "link": "https://stackoverflow.com/questions/32858060/rails-search-through-has-many-through-text-fields/32858473#32858473", "title": "Rails search through `has_many :through` text fields", "body": "<p><strong>Hey try in this way</strong></p>\n\n<pre><code>@recipes = Recipe.includes(:categories).where('title LIKE ? or categories.name LIKE ?', \"%#{params[:query]}%\",\"%#{params[:query]}%\")\n</code></pre>\n"}], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 32858107, "answer_count": 3, "score": 1, "last_activity_date": 1443591765, "creation_date": 1443588811, "last_edit_date": 1443589645, "question_id": 32858060, "link": "https://stackoverflow.com/questions/32858060/rails-search-through-has-many-through-text-fields", "title": "Rails search through `has_many :through` text fields", "body": "<p>Let say I have a two models with association <code>has_many :through</code> between them.</p>\n\n<pre><code>class Category &lt; ActiveRecord::Base\n  has_many :category_recipes\n  has_many :categories, through: :category_recipes\n\n  validates :name, presence: true\n\nclass Recipe &lt; ActiveRecord::Base\n  has_many :category_recipes\n  has_many :categories, through: :category_recipes\n\n  validates :title, presence: true\n</code></pre>\n\n<p>I want to create search functionality using ActiveRecord for mySQL database, which allow users to implement text search on <code>Recipe</code> title and Category <code>name</code>.</p>\n\n<p>Now I have just:</p>\n\n<pre><code>@recipes = Recipe.where('title LIKE ?', \"%#{params[:query]}%\")\n</code></pre>\n\n<p>How can I modify this query to search through both title of recipe and it's category names?</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1443590594, "creation_date": 1443590594, "answer_id": 32858378, "question_id": 32857971, "link": "https://stackoverflow.com/questions/32857971/ruby-elegantly-wrap-an-array-of-items-each-into-an-object/32858378#32858378", "title": "ruby Elegantly wrap an array of items each into an object", "body": "<p>I would argue that your example is perfectly fine. But perhaps you like something like this:</p>\n\n<pre><code># in item.rb\ndef to_thing\n  Thing.new(self)\nend\n</code></pre>\n\n<p>That would allow you to write:</p>\n\n<pre><code>items.map(&amp;:to_thing)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3178, "user_id": 641553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/533ba802241653b7bf50fa9d852f8f11?s=128&d=identicon&r=PG", "display_name": "Jason T Featheringham", "link": "https://stackoverflow.com/users/641553/jason-t-featheringham"}, "edited": false, "score": 0, "creation_date": 1443742762, "post_id": 32858915, "comment_id": 53625763, "body": "Although I&#39;m leery of monkey-patching (mainly because I&#39;m not familiar enough to know when it&#39;s okay practice), The first example works wonderfully.  Thank you."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443764828, "post_id": 32858915, "comment_id": 53630912, "body": "Your proposal is fascinating!"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 6, "last_activity_date": 1443593100, "creation_date": 1443593100, "answer_id": 32858915, "question_id": 32857971, "link": "https://stackoverflow.com/questions/32857971/ruby-elegantly-wrap-an-array-of-items-each-into-an-object/32858915#32858915", "title": "ruby Elegantly wrap an array of items each into an object", "body": "<p>You can use the unary prefix <code>&amp;</code> operator:</p>\n\n<pre><code>items.map(&amp;Thing.method(:new))\n</code></pre>\n\n<p><a href=\"https://bugs.ruby-lang.org/issues/11262\">I have suggested that <code>Class</code>es should behave as <em>Factory Functions</em></a>, which would allow you to write it like this:</p>\n\n<pre><code>items.map(&amp;Thing)\n</code></pre>\n\n<p>However, there doesn't seem to be much interest in the proposal. You can monkey-patch it yourself, though, the implementation is trivial:</p>\n\n<pre><code>class Class\n  def to_proc\n    method(:new).to_proc\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3178, "user_id": 641553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/533ba802241653b7bf50fa9d852f8f11?s=128&d=identicon&r=PG", "display_name": "Jason T Featheringham", "link": "https://stackoverflow.com/users/641553/jason-t-featheringham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 32858915, "answer_count": 2, "score": 2, "last_activity_date": 1443593100, "creation_date": 1443588212, "last_edit_date": 1443588609, "question_id": 32857971, "link": "https://stackoverflow.com/questions/32857971/ruby-elegantly-wrap-an-array-of-items-each-into-an-object", "title": "ruby Elegantly wrap an array of items each into an object", "body": "<p>Given:</p>\n\n<pre><code>class Thing\n  def initialize(object)\n    @object = object   \n  end\nend\n\nitems = [1,2,3]\n</code></pre>\n\n<p>I'd like to know of a more elegant way to convert each item to the Thing than this:</p>\n\n<pre><code>items.map{ |item| Thing.new item }\n# =&gt; [&lt;Thing @object=1&gt;, &lt;Thing @object=2&gt;, &lt;Thing @object=3&gt;]\n</code></pre>\n"}, {"tags": ["ruby", "while-loop", "inline"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1443594936, "post_id": 32857497, "comment_id": 53551732, "body": "<a href=\"http://stackoverflow.com/q/21740291/\">stackoverflow.com/q/21740291</a>"}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1443607302, "post_id": 32857497, "comment_id": 53558859, "body": "There are a number of parser issues related to LALR descent that affect Ruby post-conditions. They are bugs, but nobody ever opens bug reports about them. See <a href=\"http://stackoverflow.com/a/25820190/1301972\">this related answer</a> for a similar problem with the :if_mod token."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443587213, "post_id": 32857564, "comment_id": 53548921, "body": "Good explanation. You might want to add another case: the second example preceded by <code>n = 0</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443587404, "post_id": 32857564, "comment_id": 53548980, "body": "Thanks. In fact, the second example with <code>n = 0</code> preceeded, is written in the pseudocode <i>exactly</i> as the first one, that is why I decided to omit it. <i>UPD</i>: Oh, wait. I will, thx."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443589594, "post_id": 32857564, "comment_id": 53549683, "body": "I suggested that because I thought some readers might think <code>0</code> might be printed in that case."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443591562, "post_id": 32857564, "comment_id": 53550388, "body": "@CarySwoveland thanks a lot, actually my previous answer was confusing, I have it completely re-written."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1443602060, "post_id": 32857564, "comment_id": 53555567, "body": "The control flow is irrelevant. The <code>n</code> in <code>puts n</code> is a method call since at that point a local variable called <code>n</code> isn&#39;t defined according to the from left to right reading parser. It&#39;s just a local variable quirk that would require special-casing."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1443607472, "post_id": 32857564, "comment_id": 53558958, "body": "It&#39;s not a bug in the interpreter. It&#39;s a misfeature of the LALR descent parser in the way it handles post-condition tokens."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1443591525, "last_edit_date": 1443591525, "creation_date": 1443585640, "answer_id": 32857564, "question_id": 32857497, "link": "https://stackoverflow.com/questions/32857497/ruby-inline-while-vs-while-end/32857564#32857564", "title": "ruby inline while vs while end", "body": "<p>That is, in general, an interpreter problem, that could not appear in languages with local <a href=\"http://javascript.info/tutorial/bubbling-and-capturing\" rel=\"nofollow\">variable bubbling</a>, like javascript.</p>\n\n<p>The interpreter (reading from left to right) meets right-hand-operand <code>n</code> before any mention of it.</p>\n\n<p>The more I think about it, the more I am convinced it is a bug in ruby interpreter. As @Cary pointed out, the control flow is in fact the same:</p>\n\n<pre><code>a = [2, 3]\nn = 1\nputs n while n = a.shift\n#\u21d2 2\n#\u21d2\u00a03\n</code></pre>\n\n<p>No trail of <code>1</code> in the output above.</p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1443591693, "post_id": 32857584, "comment_id": 53550432, "body": "It <i>tries to parse</i> <code>puts n</code> first, not <i>executes</i>."}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 1, "last_activity_date": 1443592244, "last_edit_date": 1443592244, "creation_date": 1443585735, "answer_id": 32857584, "question_id": 32857497, "link": "https://stackoverflow.com/questions/32857497/ruby-inline-while-vs-while-end/32857584#32857584", "title": "ruby inline while vs while end", "body": "<p>Regarding: <code>puts n while n = a.shift</code>,</p>\n\n<p>it will pares <code>puts n</code> first, but <code>n</code> is undefined at that point. Ruby is a dynamically typed language; you don't declare variable type explicitly, but you should assign a value to variables.</p>\n\n<p>For example:</p>\n\n<pre><code>irb(main):027:0&gt; xyz\nNameError: undefined local variable or method `xyz' for main:Object\nirb(main):028:0&gt; xyz = 1\n=&gt; 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 1, "last_activity_date": 1443586324, "creation_date": 1443586324, "answer_id": 32857661, "question_id": 32857497, "link": "https://stackoverflow.com/questions/32857497/ruby-inline-while-vs-while-end/32857661#32857661", "title": "ruby inline while vs while end", "body": "<p><code>n</code> is undefined at the time you attempt the first <code>puts</code>.  The condition, and corresponding <code>shift</code>, is only checked after the <code>puts</code> has been evaluated.  An alternative which <em>will</em> work as you expected would be</p>\n\n<pre><code>a = [1, 2, 3]\nputs a.shift while a.length &gt; 0\n</code></pre>\n"}], "owner": {"reputation": 138, "user_id": 2529613, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3eca00a0d3f5725d81723b69621287bd?s=128&d=identicon&r=PG", "display_name": "Neves", "link": "https://stackoverflow.com/users/2529613/neves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1370, "favorite_count": 0, "accepted_answer_id": 32857564, "answer_count": 3, "score": 5, "last_activity_date": 1443592244, "creation_date": 1443585224, "last_edit_date": 1443586259, "question_id": 32857497, "link": "https://stackoverflow.com/questions/32857497/ruby-inline-while-vs-while-end", "title": "ruby inline while vs while end", "body": "<p>Why does this work:</p>\n\n<pre><code>a = [1, 2, 3]\nwhile n = a.shift\n  puts n\nend\n</code></pre>\n\n<p>while this doesn't:</p>\n\n<pre><code>a = [1, 2, 3]\nputs n while n = a.shift\n</code></pre>\n\n<p>It works only if I initialize <code>n</code> in advance:</p>\n\n<pre><code>a = [1, 2, 3]\nn = nil\nputs n while n = a.shift\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "edited": false, "score": 0, "creation_date": 1443585647, "post_id": 32857487, "comment_id": 53548488, "body": "What is the state of your database?  Try running <code>rake db:reset</code>"}, {"owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "reply_to_user": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "edited": false, "score": 0, "creation_date": 1443585681, "post_id": 32857487, "comment_id": 53548496, "body": "will do! what does a reset do?"}, {"owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "edited": false, "score": 0, "creation_date": 1443585772, "post_id": 32857487, "comment_id": 53548520, "body": "Per the rails docs, &quot;The rake db:reset task will drop the database and set it up again. This is functionally equivalent to rake db:drop db:setup.&quot;: &lt;<a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html#resetting-the-database\" rel=\"nofollow noreferrer\">edgeguides.rubyonrails.org/&hellip;</a>&gt;"}, {"owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "reply_to_user": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "edited": false, "score": 0, "creation_date": 1443585778, "post_id": 32857487, "comment_id": 53548522, "body": "i got a <code>NameError: uninitialized constant Type</code>"}, {"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1443585786, "post_id": 32857487, "comment_id": 53548527, "body": "are you sure the database has the table <code>categories</code>?"}, {"owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "edited": false, "score": 0, "creation_date": 1443585864, "post_id": 32857487, "comment_id": 53548548, "body": "What are the contents of your <code>db&#47;schema.rb</code> file?"}, {"owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "edited": false, "score": 0, "creation_date": 1443585866, "post_id": 32857487, "comment_id": 53548549, "body": "it has <code>category</code> that must be it!"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1443585908, "post_id": 32857487, "comment_id": 53548561, "body": "What exactly is the new table name supposed to be? Is it <code>Category</code>, <code>categories</code>, <code>category</code>, or something else? The error message is telling you that Rails is looking for <code>categories</code> (based on the class name of <code>Category</code>) but there is no <code>categories</code> table."}, {"owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "edited": false, "score": 0, "creation_date": 1443586112, "post_id": 32857487, "comment_id": 53548617, "body": "well I am referencing a category. I originally named it <code>category</code> I forgot that the table name must be plural, so it should be <code>categories</code>"}, {"owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "edited": false, "score": 0, "creation_date": 1443586277, "post_id": 32857487, "comment_id": 53548665, "body": "I went back to test this, and since i ded a reset, i have to reseed. I am getting an error <code>$ rake db:seed rake aborted! NameError: uninitialized constant Type &#47;Users&#47;seinnaidess&#47;giving_tree&#47;db&#47;seeds.rb:11:in </code>&lt;top (required)&gt;&#39; Tasks: TOP =&gt; db:seed (See full trace by running task with --trace)`"}, {"owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "edited": false, "score": 0, "creation_date": 1443586323, "post_id": 32857487, "comment_id": 53548682, "body": "I am going to update my answer with the table data from console and the schema, if you guys do not mind taking another look?"}, {"owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "edited": false, "score": 2, "creation_date": 1443586860, "post_id": 32857487, "comment_id": 53548825, "body": "<code>categories</code> is definitely what you want to name your table.  Rollback your migrations, correct the table name in the migration, and re-migrate.  Also make sure your db/seeds.rb and all other files in your codespace have no other references to <code>Type</code>."}, {"owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "edited": false, "score": 0, "creation_date": 1443587017, "post_id": 32857487, "comment_id": 53548865, "body": "wow, i won&#39;t make this mistake again! thank you guys!"}], "owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443586982, "creation_date": 1443585179, "last_edit_date": 1443586982, "question_id": 32857487, "link": "https://stackoverflow.com/questions/32857487/renamed-a-table-and-am-getting-errors", "title": "renamed a table and am getting errors", "body": "<p>I named a table <code>Types</code> and realized that it is a reserved word, so I renamed it 'Category`. </p>\n\n<p>Now when I try to do an ActiveRecord query, I get this error:</p>\n\n<pre><code>PG::UndefinedTable: ERROR:  relation \"categories\" does not exist\nLINE 5:                WHERE a.attrelid = '\"categories\"'::regclass\n                                          ^\n:               SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n                     pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod\n                FROM pg_attribute a LEFT JOIN pg_attrdef d\n                  ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n               WHERE a.attrelid = '\"categories\"'::regclass\n                 AND a.attnum &gt; 0 AND NOT a.attisdropped\n               ORDER BY a.attnum\n</code></pre>\n\n<p>I have gone back though all my code and changed all the relation names, model, controller, etc...but I don't know where this error is coming from. Or what it means. Here is my category.rb:</p>\n\n<pre><code>class Category &lt; ActiveRecord::Base\nhas_many :projects\n\nend\n</code></pre>\n\n<p>here is categories_controller.rb:\nclass CategoriesController &lt; ApplicationController</p>\n\n<pre><code>        def create\n            @category = Category.new(category_params)\n            if @category.save\n                redirect_to root_path\n            else\n                redirect_to({:controller =&gt; 'application', :action =&gt; 'home'}, :notice =&gt; 'Account not created! Something is fishy.')\n            end\n        end\n\nend\n</code></pre>\n\n<p>and here is what I am trying to do inside the user model (because i want the code to read along the lines of <code>current_user.contributions_by_category</code></p>\n\n<pre><code>def contributions_by_category(array)\n    category = {}\n        array.each do |subarray|\n            name = Category.find(subarray[1].category_id).project_category;\n            category[name] = 0 unless category.include?(name)\n            category[name] += subarray[0] unless subarray[0] == nil\n        end\n    category\n    end\n</code></pre>\n\n<p>also, inside of my project model i have:</p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n    belongs_to :user, :foreign_key =&gt; 'user_id'\n    belongs_to :category, :foreign_key =&gt; 'category_id' #should change this to a has one association\n    has_many :users\n    has_many :payments\n    has_many :updates\n    has_many :comments\n    has_one :imapct \n\n....\n\nend\n</code></pre>\n\n<p>Before I switched the name, I was able to make this query work in rails console as well as rendering it to the screen, so the relation exists, all I did was change the name.</p>\n\n<p>Any help is appreciated!</p>\n\n<p>UPDATE:</p>\n\n<p>here is my table data from rails console:</p>\n\n<pre><code>   List of relations\n Schema |       Name        | Type  |    Owner    \n--------+-------------------+-------+-------------\n public | categories        | table | seinnaidess\n public | comments          | table | seinnaidess\n public | entrepreneurs     | table | seinnaidess\n public | impacts           | table | seinnaidess\n public | payments          | table | seinnaidess\n public | projects          | table | seinnaidess\n public | schema_migrations | table | seinnaidess\n public | update_comments   | table | seinnaidess\n public | updates           | table | seinnaidess\n public | users             | table | seinnaidess\n</code></pre>\n\n<p>and here is my schema:</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20150930040619) do\n\n  # These are extensions that must be enabled in order to support this database\n  enable_extension \"plpgsql\"\n\n  create_table \"categories\", force: :cascade do |t|\n    t.string \"category_type\"\n  end\n\n  create_table \"comments\", force: :cascade do |t|\n    t.text     \"content\"\n    t.integer  \"user_id\"\n    t.integer  \"project_id\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"entrepreneurs\", force: :cascade do |t|\n    t.string   \"first_name\"\n    t.string   \"last_name\"\n    t.string   \"password_digest\"\n    t.text     \"about\"\n    t.string   \"location\"\n    t.integer  \"age\"\n    t.float    \"repayment_rate\"\n    t.integer  \"project_id\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"impacts\", force: :cascade do |t|\n    t.integer  \"ppl_hired\",            default: 0\n    t.integer  \"ppl_schooled\",         default: 0\n    t.integer  \"improved_housing\",     default: 0\n    t.integer  \"improved_nourishment\", default: 0\n    t.integer  \"improved_medical\",     default: 0\n    t.integer  \"community_resource\",   default: 0\n    t.integer  \"project_id\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"payments\", force: :cascade do |t|\n    t.string   \"first_name\"\n    t.string   \"last_name\"\n    t.float    \"amount\"\n    t.integer  \"cc_num\"\n    t.integer  \"exp_month\"\n    t.integer  \"exp_year\"\n    t.integer  \"cvs\"\n    t.integer  \"user_id\"\n    t.integer  \"project_id\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n    t.text     \"comments\"\n  end\n\n  create_table \"projects\", force: :cascade do |t|\n    t.string   \"name\"\n    t.text     \"url\"\n    t.text     \"description\"\n    t.float    \"money_needed\",     default: 0.0\n    t.float    \"money_raised\",     default: 0.0\n    t.float    \"interest_offered\", default: 0.0\n    t.datetime \"end_date\"\n    t.integer  \"category_id\"\n    t.integer  \"user_id\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"update_comments\", force: :cascade do |t|\n  end\n\n  create_table \"updates\", force: :cascade do |t|\n    t.text    \"content\"\n    t.string  \"url\"\n    t.integer \"project_id\"\n    t.string  \"date\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"first_name\"\n    t.string   \"last_name\"\n    t.string   \"user_name\"\n    t.string   \"password_digest\"\n    t.string   \"impact\"\n    t.text     \"pic_url\"\n    t.text     \"quote\"\n    t.integer  \"payment_id\"\n    t.integer  \"project_id\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n    t.boolean  \"admin\"\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 3814, "user_id": 667127, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0208844fc9fce89fb51161781096fbf?s=128&d=identicon&r=PG", "display_name": "moeabdol", "link": "https://stackoverflow.com/users/667127/moeabdol"}, "edited": false, "score": 0, "creation_date": 1443585131, "post_id": 32857448, "comment_id": 53548357, "body": "aren&#39;t you missing a require in your spec?"}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "reply_to_user": {"reputation": 3814, "user_id": 667127, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0208844fc9fce89fb51161781096fbf?s=128&d=identicon&r=PG", "display_name": "moeabdol", "link": "https://stackoverflow.com/users/667127/moeabdol"}, "edited": false, "score": 0, "creation_date": 1443585325, "post_id": 32857448, "comment_id": 53548403, "body": "@moeabdol yes, edited my code post above to include &#39;spec_helper&#39;. It was in my code all along though."}, {"owner": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "edited": false, "score": 0, "creation_date": 1443585462, "post_id": 32857448, "comment_id": 53548439, "body": "Can you show Zip class?"}, {"owner": {"reputation": 3814, "user_id": 667127, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0208844fc9fce89fb51161781096fbf?s=128&d=identicon&r=PG", "display_name": "moeabdol", "link": "https://stackoverflow.com/users/667127/moeabdol"}, "edited": false, "score": 0, "creation_date": 1443586070, "post_id": 32857448, "comment_id": 53548604, "body": "actually where is a class method! Can you show Zip class?"}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "reply_to_user": {"reputation": 3814, "user_id": 667127, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0208844fc9fce89fb51161781096fbf?s=128&d=identicon&r=PG", "display_name": "moeabdol", "link": "https://stackoverflow.com/users/667127/moeabdol"}, "edited": false, "score": 0, "creation_date": 1443586214, "post_id": 32857448, "comment_id": 53548644, "body": "@moeabdol added the zip class to the post above.. it&#39;s just used to super the as_json definition. I tried to use &quot;find&quot; instead of where but get the error &#39;ActiveRecord::RecordNotFound (Couldn&#39;t find Zip with &#39;id&#39;={:zip_code=&gt;&quot;V9A&quot;})&#39; because it tries to find it by id, where I need to find by the zip_code column which &#39;where&#39; seemed to work for"}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "reply_to_user": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "edited": false, "score": 0, "creation_date": 1443586228, "post_id": 32857448, "comment_id": 53548648, "body": "@ihaztehcodez see above comment"}, {"owner": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "edited": false, "score": 0, "creation_date": 1443586414, "post_id": 32857448, "comment_id": 53548704, "body": "It&#39;s strange that you do not get the same error with <code>find</code>.  Does it work as expected if you prefix <code>Zip</code> with <code>::</code> like: <code>::Zip.where(...)</code>?"}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "reply_to_user": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "edited": false, "score": 0, "creation_date": 1443586839, "post_id": 32857448, "comment_id": 53548816, "body": "@ihaztehcodez actually I do get the same error with find <code>undefined method find</code>"}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "reply_to_user": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "edited": false, "score": 0, "creation_date": 1443586872, "post_id": 32857448, "comment_id": 53548830, "body": "@ihaztehcodez I was using postman and reading the rails error before, but for the rspec error the Find method error is the same as the where error"}, {"owner": {"reputation": 3814, "user_id": 667127, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0208844fc9fce89fb51161781096fbf?s=128&d=identicon&r=PG", "display_name": "moeabdol", "link": "https://stackoverflow.com/users/667127/moeabdol"}, "edited": false, "score": 0, "creation_date": 1443586968, "post_id": 32857448, "comment_id": 53548856, "body": "do you have this spec under spec/controllers? if you do remove it and place it under spec/apis and rename it to zip_api_spec.rb"}, {"owner": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "edited": false, "score": 0, "creation_date": 1443587031, "post_id": 32857448, "comment_id": 53548871, "body": "And with the double colon prefix?  <code>::Zip.where(...)</code>?"}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "reply_to_user": {"reputation": 3814, "user_id": 667127, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0208844fc9fce89fb51161781096fbf?s=128&d=identicon&r=PG", "display_name": "moeabdol", "link": "https://stackoverflow.com/users/667127/moeabdol"}, "edited": false, "score": 0, "creation_date": 1443587183, "post_id": 32857448, "comment_id": 53548911, "body": "@moeabdol I did have it in spec/controllers yes. I moved it to spec/apis but still have it as type: :controller. Should I remove that too?"}, {"owner": {"reputation": 3814, "user_id": 667127, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0208844fc9fce89fb51161781096fbf?s=128&d=identicon&r=PG", "display_name": "moeabdol", "link": "https://stackoverflow.com/users/667127/moeabdol"}, "edited": false, "score": 0, "creation_date": 1443587216, "post_id": 32857448, "comment_id": 53548922, "body": "@JonGirard yes! and make type: :api"}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "reply_to_user": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "edited": false, "score": 0, "creation_date": 1443587237, "post_id": 32857448, "comment_id": 53548929, "body": "@ihaztehcodez still fails with the double prefix. I&#39;m searching my code to see if it is accidentally defined anywhere as a module"}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "reply_to_user": {"reputation": 3814, "user_id": 667127, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0208844fc9fce89fb51161781096fbf?s=128&d=identicon&r=PG", "display_name": "moeabdol", "link": "https://stackoverflow.com/users/667127/moeabdol"}, "edited": false, "score": 0, "creation_date": 1443587333, "post_id": 32857448, "comment_id": 53548957, "body": "@moeabdol we may be getting somewhere, no longer getting the <code>where</code> error and now it gives error <code>undefined method &#39;get&#39; for #&lt;RSpec::ExampleGroups::APIZipsController::GETApiZones:0x007&zwnj;&#8203;fb59438b520&gt;</code>"}, {"owner": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "edited": false, "score": 0, "creation_date": 1443587497, "post_id": 32857448, "comment_id": 53549012, "body": "Here&#39;s a crazy idea... are you using the <code>rubyzip</code> gem in you Gemfile?  It defines a <code>Zip</code> module..."}, {"owner": {"reputation": 3814, "user_id": 667127, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0208844fc9fce89fb51161781096fbf?s=128&d=identicon&r=PG", "display_name": "moeabdol", "link": "https://stackoverflow.com/users/667127/moeabdol"}, "edited": false, "score": 0, "creation_date": 1443587908, "post_id": 32857448, "comment_id": 53549120, "body": "@JonGirard or you can try type: :request"}], "answers": [{"comments": [{"owner": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "edited": false, "score": 0, "creation_date": 1443585955, "post_id": 32857546, "comment_id": 53548574, "body": "Not sure I would reach for a mock so quickly.  Given that the error is an undefined method for <code>Zip:Module</code>, I suspect OP has a <code>API::Zip</code> module defined somewhere and this would just make the test pass without fixing anything."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "edited": false, "score": 0, "creation_date": 1443586041, "post_id": 32857546, "comment_id": 53548599, "body": "Lets wait for his response. Then, based on that, I can update my answer."}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "edited": false, "score": 0, "creation_date": 1443586293, "post_id": 32857546, "comment_id": 53548673, "body": "@KMRakibulIslam thank you for your answer, unfortunatley this did not work. Still returns &quot;undefined method &#39;where&#39; for Zip:Module&quot;."}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "reply_to_user": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "edited": false, "score": 0, "creation_date": 1443586489, "post_id": 32857546, "comment_id": 53548726, "body": "@ihaztehcodez I&#39;m not sure what it means by &quot;Zip:Module&quot; because I&#39;m only defining it in one file as API::ZipsController in the rails controller."}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "edited": false, "score": 0, "creation_date": 1443586932, "post_id": 32857546, "comment_id": 53548848, "body": "@KMRakibulIslam Hmm, I now get the error <code>Failure&#47;Error: allow(Zip).to receive(:where).with(zip_code) { zip }        Zip does not implement: where</code>"}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "edited": false, "score": 0, "creation_date": 1443586982, "post_id": 32857546, "comment_id": 53548857, "body": "@KMRakibulIslam I tried switching &#39;where&#39; for &#39;find&#39; in my zips_controller and get the same <code>undefined method &#39;find&#39; for Zip:Module</code> error too"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1443587039, "post_id": 32857546, "comment_id": 53548874, "body": "<code>Zip</code> is a class, why is it saying as module? Do you have any <code>Zip</code> module defined anywhere in your code?"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "edited": false, "score": 0, "creation_date": 1443588079, "post_id": 32857546, "comment_id": 53549176, "body": "@JonGirard can you please try my updated answer again?"}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "edited": false, "score": 0, "creation_date": 1443590691, "post_id": 32857546, "comment_id": 53550075, "body": "Thank you for your help @KMRakibulIslam"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1443590842, "post_id": 32857546, "comment_id": 53550122, "body": "You are welcome. Glad to see that your problem is fixed."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 1, "last_activity_date": 1443587954, "last_edit_date": 1443587954, "creation_date": 1443585534, "answer_id": 32857546, "question_id": 32857448, "link": "https://stackoverflow.com/questions/32857448/rspec-controller-spec-returning-undefined-method-where/32857546#32857546", "title": "Rspec controller spec returning undefined method &#39;where&#39;", "body": "<p>Do it this way:</p>\n\n<pre><code>  require 'spec_helper'\n\n  describe API::ZipsController, type: :controller do\n    let(:zip_code) { \"V9A1B2\" }\n    let(:params) { { zip_code: zip_code } }\n    let(:zip) { double('zip') }\n\n    before do\n      allow(Api::Zip).to receive(:where).with(zip_code) { zip }\n    end\n\n    it \"returns 200 status with zones data\" do\n      get 'show', params\n      response.should be_success\n    end\n  end\n</code></pre>\n\n<h3>Update</h3>\n\n<p>Try to put your <code>Zip</code> class under a module, say <code>Api</code> and put it under <code>app/models/api/zip.rb</code> file:</p>\n\n<pre><code>module Api\n  class Zip &lt; ActiveRecord::Base\n    def as_json(options)\n      super(:only =&gt; [:zip_code])\n    end\n  end\nend\n</code></pre>\n\n<p>And, then try the above code.</p>\n"}, {"comments": [{"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "edited": false, "score": 0, "creation_date": 1443590585, "post_id": 32857998, "comment_id": 53550035, "body": "HA! I don&#39;t believe it.. I DID have the rubyzip gem in my gemfile.lock.. must have been a dependency of something. I renamed my Zip model to Zipcode and everything seems to work. THANK YOU!!!"}], "tags": [], "owner": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "is_accepted": true, "score": 2, "last_activity_date": 1443588364, "creation_date": 1443588364, "answer_id": 32857998, "question_id": 32857448, "link": "https://stackoverflow.com/questions/32857448/rspec-controller-spec-returning-undefined-method-where/32857998#32857998", "title": "Rspec controller spec returning undefined method &#39;where&#39;", "body": "<p>You have a <code>Zip</code> module defined <em>somewhere</em> that is conflicting with your <code>Zip</code> model.  It could be somewhere in your code or something trickier like the use of the <code>rubyzip</code> gem.</p>\n\n<p>You could namespace the model in another module as suggested in another answer or rename the model to something else like <code>Zipcode</code>.</p>\n"}], "owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "accepted_answer_id": 32857998, "answer_count": 2, "score": 0, "last_activity_date": 1443588364, "creation_date": 1443584870, "last_edit_date": 1443586072, "question_id": 32857448, "link": "https://stackoverflow.com/questions/32857448/rspec-controller-spec-returning-undefined-method-where", "title": "Rspec controller spec returning undefined method &#39;where&#39;", "body": "<p>Trying to build a controller spec using rspec on a rails controller I have named \"API::ZipsController\".</p>\n\n<p>The controller accepts a parameter called \"zip_code\" and returns an active record model and 200 status.</p>\n\n<p>However, when I run rspec the test fails with <code>NoMethodError:</code> <code>undefined method 'where' for Zip:Module</code>. I believe this is because 'where' is an instance method, not a class method so I will need to stub/mock it? Unfortunately I have not had any luck in resolving the problem as of yet.</p>\n\n<p>zips_controller_spec.rb:</p>\n\n<pre><code>describe API::ZipsController do\nrequire 'spec_helper'\nit \"returns 200 status with zones data\" do\n        get 'show', zip_code: \"V9A1B2\"\n        response.should be_success\n  end\nend\n</code></pre>\n\n<p>api/zips_controller.rb - (working):</p>\n\n<pre><code>class API::ZipsController &lt; ApplicationController\n  def show\n    zip = Zip.where(zip_code: params[:zip_code].upcase.slice(0..2))\n    render json: zip, status: 200\n  end\nend\n</code></pre>\n\n<p>zip.rb (model):</p>\n\n<pre><code>class Zip &lt; ActiveRecord::Base\ndef as_json(options)\nsuper(:only =&gt; [:zip_code])\nend\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1443583544, "post_id": 32857118, "comment_id": 53547951, "body": "I confirmed that <code>force</code> works, but I cannot find the documentation except the one in <a href=\"http://docs.ruby-lang.org/ja/2.1.0/method/Enumerator=3a=3aLazy/i/force.html\" rel=\"nofollow noreferrer\">ruby lang</a>. Do you know why it is not in the documentation in RDoc? Is it because it is only an alias of <code>to_a</code>?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 3, "creation_date": 1443583743, "post_id": 32857118, "comment_id": 53548002, "body": "FYI - You could use ` arr.lazy.select(&amp;:odd?).first(3)` and avoid the <code>force</code> - <code>take</code> is lazy while <code>first</code> isn&#39;t."}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1443584221, "post_id": 32857118, "comment_id": 53548144, "body": "@sawa I can&#39;t find it either. If you do find it, feel free to edit my answer."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1443584773, "post_id": 32857118, "comment_id": 53548274, "body": "Thanks. As always, the doc seems incomplete. But how did you come to know this?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1443588457, "post_id": 32857118, "comment_id": 53549316, "body": "<code>Enumerator::Lazy#force</code> is an alias for <code>to_a</code> which comes from <code>Enumerable</code>."}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": true, "score": 9, "last_activity_date": 1443584291, "last_edit_date": 1443584291, "creation_date": 1443582612, "answer_id": 32857118, "question_id": 32857049, "link": "https://stackoverflow.com/questions/32857049/ruby-enumerable-find-up-to-n-occurrences-of-matching-element/32857118#32857118", "title": "Ruby enumerable - find up to n occurrences of matching element", "body": "<p>Use a <a href=\"http://ruby-doc.org/core-2.2.3/Enumerator/Lazy.html\" rel=\"noreferrer\">lazy enumerator</a> with <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-lazy\" rel=\"noreferrer\">Enumerable#lazy</a>:</p>\n\n<pre><code>arr.lazy.select(&amp;:odd?).take(3).force\n# =&gt; [1, 3, 5]\n</code></pre>\n\n<p><code>force</code> is used to force the lazy enumerator to evaluate. Or, you could use <code>first</code> as it's eager:</p>\n\n<pre><code>arr.lazy.select(&amp;:odd?).first(3)\n# =&gt; [1, 3, 5]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 5, "last_activity_date": 1443585779, "last_edit_date": 1443585779, "creation_date": 1443584613, "answer_id": 32857406, "question_id": 32857049, "link": "https://stackoverflow.com/questions/32857049/ruby-enumerable-find-up-to-n-occurrences-of-matching-element/32857406#32857406", "title": "Ruby enumerable - find up to n occurrences of matching element", "body": "<p><strong>Code and example</strong></p>\n\n<pre><code>arr.take_while.with_object([]) do |e,a|\n  a &lt;&lt; e if e.odd?\n  a.size &lt; 3\nend\n  #=&gt; [1, 3, 5]\n</code></pre>\n\n<p><strong>Benchmark</strong></p>\n\n<pre><code>require 'fruity'\n\ndef compare_em(arr, m)\n  compare(\n    lazy:       -&gt; { arr.lazy.select(&amp;:odd?).take(m).force },\n    take_while: -&gt; { arr.take_while.with_object([]) { |e,a|\n                       a &lt;&lt; e if e.odd?; a.size &lt; m } }\n  )\nend\n\nn = 1e6\narr = (1..n).to_a.shuffle\n</code></pre>\n\n<p>Obtain the first 1,000 odd elements: </p>\n\n<pre><code>compare_em(arr, 1e3)\n  # Running each test 8 times. Test will take about 1 second.\n  # take_while is faster than lazy by 2x \u00b1 1.0\n</code></pre>\n\n<p>Obtain the first 10,000 odd elements:</p>\n\n<pre><code>compare_em(arr, 1e4)\n  # Running each test once. Test will take about 1 second.\n  # take_while is faster than lazy by 2x \u00b1 1.0\n</code></pre>\n\n<p>Obtain the first 100,000 odd elements:</p>\n\n<pre><code>compare_em(arr, 1e5)\n  # Running each test once. Test will take about 3 seconds.\n  # take_while is faster than lazy by 2x \u00b1 0.1\n</code></pre>\n\n<p>I'm surprised <code>lazy</code> did quite well, as it is often much slower, relatively, in benchmarks.</p>\n"}], "owner": {"reputation": 516, "user_id": 3295407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WqEep.png?s=128&g=1", "display_name": "etdev", "link": "https://stackoverflow.com/users/3295407/etdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 32857118, "answer_count": 2, "score": 5, "last_activity_date": 1443585779, "creation_date": 1443582126, "question_id": 32857049, "link": "https://stackoverflow.com/questions/32857049/ruby-enumerable-find-up-to-n-occurrences-of-matching-element", "title": "Ruby enumerable - find up to n occurrences of matching element", "body": "<p>I have the following array: </p>\n\n<pre><code>arr = [1, 3, 2, 5, 2, 4, 2, 2, 4, 4, 2, 2, 4, 2, 1, 5]\n</code></pre>\n\n<p>I want an array containing the first three odd elements.</p>\n\n<p>I know I could do this:</p>\n\n<pre><code>arr.select(&amp;:odd?).take(3)\n</code></pre>\n\n<p>but I want to avoid iterating through the whole array, and instead return once I've found the third match.</p>\n\n<p>I came up with the following solution, which I believe does what I want:</p>\n\n<pre><code>my_arr.each_with_object([]) do |el, memo| \n  memo &lt;&lt; el if el.odd?; break memo if memo.size == 3 \nend\n</code></pre>\n\n<p>But is there a more simple/idiomatic way of doing this?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "spree"], "answers": [{"tags": [], "owner": {"reputation": 2388, "user_id": 1752114, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/778377fd64568f1a23968400a7477306?s=128&d=identicon&r=PG", "display_name": "Arvind", "link": "https://stackoverflow.com/users/1752114/arvind"}, "is_accepted": true, "score": 2, "last_activity_date": 1443588933, "last_edit_date": 1443588933, "creation_date": 1443583171, "answer_id": 32857194, "question_id": 32856881, "link": "https://stackoverflow.com/questions/32856881/spree-deface-getting-error-nameerror-in-spreehomeindex/32857194#32857194", "title": "Spree: Deface getting error NameError in Spree::Home#index", "body": "<p>one small quote issue for url <code>&lt;%= link_to small_image(product, itemprop: \"image\"), url, itemprop: \"url\" %&gt;</code> check this code :-</p>\n\n<pre><code>Deface::Override.new(:virtual_path =&gt;\"spree/shared/_products\",\n                     :name =&gt; \"change site\",\n                     :replace =&gt;\"#products\",\n                     :text =&gt; '\n\n\n\n&lt;%\n  paginated_products = @searcher.retrieve_products if params.key?(:keywords)\n  paginated_products ||= products\n%&gt;\n\n&lt;% content_for :head do %&gt;\n  &lt;% if paginated_products.respond_to?(:num_pages) %&gt;\n    &lt;%= rel_next_prev_link_tags paginated_products %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n\n&lt;div data-hook=\"products_search_results_heading\"&gt;\n  &lt;% if products.empty? %&gt;\n    &lt;div data-hook=\"products_search_results_heading_no_results_found\"&gt;\n      &lt;%= Spree.t(:no_products_found) %&gt;\n    &lt;/div&gt;\n  &lt;% elsif params.key?(:keywords) %&gt;\n    &lt;div data-hook=\"products_search_results_heading_results_found\"&gt;\n      &lt;h6 class=\"search-results-title\"&gt;&lt;%= Spree.t(:search_results, keywords: h(params[:keywords])) %&gt;&lt;/h6&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n\n&lt;% if products.any? %&gt;\n  &lt;div id=\"products\" class=\"row\" data-hook&gt;\n    &lt;% products.each do |product| %&gt;\n      &lt;% url = spree.product_url(product, taxon_id: @taxon.try(:id)) %&gt;\n      &lt;div id=\"product_&lt;%= product.id %&gt;\" class=\"col-md-3 col-sm-6 product-list-item\" data-hook=\"products_list_item\" itemscope itemtype=\"https://schema.org/Product\"&gt;\n        &lt;div class=\"panel panel-default\"&gt;\n          &lt;% cache(@taxon.present? ? [I18n.locale, current_currency, @taxon, product] : [I18n.locale, current_currency, product]) do %&gt;\n            &lt;div class=\"panel-body text-center product-body\"&gt;\n              &lt;br/&gt;\n&lt;%= link_to small_image(product, itemprop: \"image\"), url, itemprop: \"url\" %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"panel-footer text-center\"&gt;\n              &lt;span itemprop=\"offers\" itemscope itemtype=\"https://schema.org/Offer\"&gt;\n                &lt;span class=\"price selling lead\" itemprop=\"price\"&gt;&lt;%= display_price(product) %&gt;&lt;/span&gt;\n              &lt;/span&gt;\n            &lt;/div&gt;\n          &lt;% end %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n    &lt;% reset_cycle(\"classes\") %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;% if paginated_products.respond_to?(:num_pages) %&gt;\n\n&lt;% end %&gt;\n')\n</code></pre>\n"}], "owner": {"reputation": 661, "user_id": 4290657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/972acbef4b1d7987d7208b7f90c30e91?s=128&d=identicon&r=PG&f=1", "display_name": "JamesRocky", "link": "https://stackoverflow.com/users/4290657/jamesrocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 32857194, "answer_count": 1, "score": 1, "last_activity_date": 1443588933, "creation_date": 1443581019, "question_id": 32856881, "link": "https://stackoverflow.com/questions/32856881/spree-deface-getting-error-nameerror-in-spreehomeindex", "title": "Spree: Deface getting error NameError in Spree::Home#index", "body": "<p>I'm trying to change the look of the front page where the items are listed but I'm getting an error. Am I using deface correctly to change it? Its telling me that <code>&lt;%= link_to small_image(product, itemprop: \"image\"), url, itemprop: 'url' %&gt;</code> is giving me errors, if I removed then there are no pictures. What do I do? </p>\n\n<p>update_products.rb</p>\n\n<pre><code>Deface::Override.new(:virtual_path =&gt;\"spree/shared/_products\",\n                     :name =&gt; \"change site\",\n                     :replace =&gt;\"#products\",\n                     :text =&gt; '\n\n\n\n&lt;%\n  paginated_products = @searcher.retrieve_products if params.key?(:keywords)\n  paginated_products ||= products\n%&gt;\n\n&lt;% content_for :head do %&gt;\n  &lt;% if paginated_products.respond_to?(:num_pages) %&gt;\n    &lt;%= rel_next_prev_link_tags paginated_products %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n\n&lt;div data-hook=\"products_search_results_heading\"&gt;\n  &lt;% if products.empty? %&gt;\n    &lt;div data-hook=\"products_search_results_heading_no_results_found\"&gt;\n      &lt;%= Spree.t(:no_products_found) %&gt;\n    &lt;/div&gt;\n  &lt;% elsif params.key?(:keywords) %&gt;\n    &lt;div data-hook=\"products_search_results_heading_results_found\"&gt;\n      &lt;h6 class=\"search-results-title\"&gt;&lt;%= Spree.t(:search_results, keywords: h(params[:keywords])) %&gt;&lt;/h6&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n\n&lt;% if products.any? %&gt;\n  &lt;div id=\"products\" class=\"row\" data-hook&gt;\n    &lt;% products.each do |product| %&gt;\n      &lt;% url = spree.product_url(product, taxon_id: @taxon.try(:id)) %&gt;\n      &lt;div id=\"product_&lt;%= product.id %&gt;\" class=\"col-md-3 col-sm-6 product-list-item\" data-hook=\"products_list_item\" itemscope itemtype=\"https://schema.org/Product\"&gt;\n        &lt;div class=\"panel panel-default\"&gt;\n          &lt;% cache(@taxon.present? ? [I18n.locale, current_currency, @taxon, product] : [I18n.locale, current_currency, product]) do %&gt;\n            &lt;div class=\"panel-body text-center product-body\"&gt;\n              &lt;br/&gt;\n&lt;%= link_to small_image(product, itemprop: \"image\"), url, itemprop: 'url' %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"panel-footer text-center\"&gt;\n              &lt;span itemprop=\"offers\" itemscope itemtype=\"https://schema.org/Offer\"&gt;\n                &lt;span class=\"price selling lead\" itemprop=\"price\"&gt;&lt;%= display_price(product) %&gt;&lt;/span&gt;\n              &lt;/span&gt;\n            &lt;/div&gt;\n          &lt;% end %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n    &lt;% reset_cycle(\"classes\") %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;% if paginated_products.respond_to?(:num_pages) %&gt;\n\n&lt;% end %&gt;\n')\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 5181773, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baa25d98c4bf3e71c5a66d9d557bae94?s=128&d=identicon&r=PG&f=1", "display_name": "volt", "link": "https://stackoverflow.com/users/5181773/volt"}, "edited": false, "score": 0, "creation_date": 1443618082, "post_id": 32856906, "comment_id": 53565627, "body": "Thanks for your help. Last question, what is the best way to update the 2 models ? Can I do this ?   <code>def update     respond_to do |format| if @installation.update(installation_params) &amp;&amp; @installation.address.update(installation_params)</code>"}, {"owner": {"reputation": 2409, "user_id": 562557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb04e4cf008d137f309a2a1a9ca6cb55?s=128&d=identicon&r=PG", "display_name": "thebenedict", "link": "https://stackoverflow.com/users/562557/thebenedict"}, "reply_to_user": {"reputation": 347, "user_id": 5181773, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baa25d98c4bf3e71c5a66d9d557bae94?s=128&d=identicon&r=PG&f=1", "display_name": "volt", "link": "https://stackoverflow.com/users/5181773/volt"}, "edited": false, "score": 0, "creation_date": 1443618508, "post_id": 32856906, "comment_id": 53565905, "body": "With nested attributes Rails will save the <code>Address</code> when the <code>Installation</code> is saved, so you&#39;ll only need the <code>if @installation.update(installation_params)</code>, not the second condition."}, {"owner": {"reputation": 347, "user_id": 5181773, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baa25d98c4bf3e71c5a66d9d557bae94?s=128&d=identicon&r=PG&f=1", "display_name": "volt", "link": "https://stackoverflow.com/users/5181773/volt"}, "edited": false, "score": 0, "creation_date": 1443619695, "post_id": 32856906, "comment_id": 53566739, "body": "When I update forms from Installation the model installation change but when I update forms from Address the model dont update. I dont receive any error"}, {"owner": {"reputation": 2409, "user_id": 562557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb04e4cf008d137f309a2a1a9ca6cb55?s=128&d=identicon&r=PG", "display_name": "thebenedict", "link": "https://stackoverflow.com/users/562557/thebenedict"}, "reply_to_user": {"reputation": 347, "user_id": 5181773, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baa25d98c4bf3e71c5a66d9d557bae94?s=128&d=identicon&r=PG&f=1", "display_name": "volt", "link": "https://stackoverflow.com/users/5181773/volt"}, "edited": false, "score": 0, "creation_date": 1443620147, "post_id": 32856906, "comment_id": 53567030, "body": "I don&#39;t understand what you mean by &quot;update forms from Address&quot;. Could you post your controller (on something like <a href=\"http://dpaste.com/\" rel=\"nofollow noreferrer\">dpaste.com</a>), including the <code>params.require</code>... statement?"}, {"owner": {"reputation": 347, "user_id": 5181773, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baa25d98c4bf3e71c5a66d9d557bae94?s=128&d=identicon&r=PG&f=1", "display_name": "volt", "link": "https://stackoverflow.com/users/5181773/volt"}, "edited": false, "score": 0, "creation_date": 1443628550, "post_id": 32856906, "comment_id": 53572918, "body": "I put <code>binding.pry</code> before  <code>if @installation.update(installation_params)</code> and I got this: <a href=\"http://imgur.com/XlZWCoC\" rel=\"nofollow noreferrer\">imgur.com/XlZWCoC</a>  Thank you!"}, {"owner": {"reputation": 347, "user_id": 5181773, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baa25d98c4bf3e71c5a66d9d557bae94?s=128&d=identicon&r=PG&f=1", "display_name": "volt", "link": "https://stackoverflow.com/users/5181773/volt"}, "edited": false, "score": 0, "creation_date": 1443630948, "post_id": 32856906, "comment_id": 53574441, "body": "I change the name of <code>address_attributes: [:id, ...])</code> to <code>address: [:id, ...]</code>. I got this: <a href=\"http://imgur.com/5DCrOBv\" rel=\"nofollow noreferrer\">imgur.com/5DCrOBv</a> but now I have this error: &quot;ActiveRecord::AssociationTypeMismatch at /installations/61 Address(#70141620807160) expected, got ActionController::Parameters(#70141545974820)&quot;"}], "tags": [], "owner": {"reputation": 2409, "user_id": 562557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb04e4cf008d137f309a2a1a9ca6cb55?s=128&d=identicon&r=PG", "display_name": "thebenedict", "link": "https://stackoverflow.com/users/562557/thebenedict"}, "is_accepted": false, "score": 3, "last_activity_date": 1443581158, "creation_date": 1443581158, "answer_id": 32856906, "question_id": 32856730, "link": "https://stackoverflow.com/questions/32856730/one-view-two-controllers/32856906#32856906", "title": "one view two controllers", "body": "<p>You can use <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow\">nested attributes</a>.</p>\n\n<p>Untested, but roughly:</p>\n\n<p>Model:</p>\n\n<pre><code>class Installation &lt; ActiveRecord::Base\n  belongs_to :address\n\n  accepts_nested_attributes_for :address\nend\n</code></pre>\n\n<p>And in your <code>InstallationsController</code>:</p>\n\n<pre><code>params.require(:installation).permit(...,\n  address_attributes: [:id, ...])\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 5181773, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baa25d98c4bf3e71c5a66d9d557bae94?s=128&d=identicon&r=PG&f=1", "display_name": "volt", "link": "https://stackoverflow.com/users/5181773/volt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443581158, "creation_date": 1443579687, "question_id": 32856730, "link": "https://stackoverflow.com/questions/32856730/one-view-two-controllers", "title": "one view two controllers", "body": "<p>My app got installation controller and address controller.</p>\n\n<pre><code>Address has_one :installation and Installation belongs_to :address\n</code></pre>\n\n<p>In my installation view, I got a simple_form inside in other simple_form. Like this:</p>\n\n<pre><code>&lt;%= simple_form_for @installation, class: 'form-horizontal' do |f| %&gt;\n    &lt;%= f.error_notification %&gt;\n\n        &lt;%= f.simple_fields_for @installation.address do |u| %&gt;\n              &lt;%= u.label :street_address, label: t('address.address_label'), required: true, class: 'col-sm-2 control-label' %&gt;\n                &lt;%= u.input_field :street_address, class: 'form-control'\n                %&gt;\n</code></pre>\n\n<p>So how I can update the two models ?</p>\n\n<p>Can I have two def params ? Likes this:</p>\n\n<pre><code>def installation_params\n    params.require(:installation).permit(x)\nend\n\ndef installation_address_params\n    params.require(:????).permit(y)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2409, "user_id": 562557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb04e4cf008d137f309a2a1a9ca6cb55?s=128&d=identicon&r=PG", "display_name": "thebenedict", "link": "https://stackoverflow.com/users/562557/thebenedict"}, "edited": false, "score": 0, "creation_date": 1443581436, "post_id": 32856053, "comment_id": 53547419, "body": "what exactly is <code>@delivery_hours</code>?"}, {"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1443588976, "post_id": 32856053, "comment_id": 53549485, "body": "What database are you using? PostgreSQL? MySQL? SQLite?"}], "answers": [{"comments": [{"owner": {"reputation": 4066, "user_id": 4399243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1382fc0b398211f7db089dd881914ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Onichan", "link": "https://stackoverflow.com/users/4399243/onichan"}, "edited": false, "score": 0, "creation_date": 1443576383, "post_id": 32856137, "comment_id": 53546182, "body": "I added serialize, but it still does not work. Still getting <code>[1] pry(#&lt;OrdersController&gt;)&gt; @delivery_hours =&gt; &quot;[\\&quot;5:15AM\\&quot;, \\&quot;6:00AM\\&quot;, \\&quot;6:30AM\\&quot;]&quot;</code>"}, {"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "reply_to_user": {"reputation": 4066, "user_id": 4399243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1382fc0b398211f7db089dd881914ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Onichan", "link": "https://stackoverflow.com/users/4399243/onichan"}, "edited": false, "score": 2, "creation_date": 1443583645, "post_id": 32856137, "comment_id": 53547974, "body": "@Emma You&#39;ll also need to change the column to a <code>:text</code> column in order for serialize to work properly"}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 0, "creation_date": 1443587032, "post_id": 32856137, "comment_id": 53548872, "body": "@photoionized very nice! I forgot this."}], "tags": [], "owner": {"reputation": 1401, "user_id": 2723934, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/025a08b4c87bf427fffab6600dea6ae8?s=128&d=identicon&r=PG&f=1", "display_name": "miler350", "link": "https://stackoverflow.com/users/2723934/miler350"}, "is_accepted": true, "score": 2, "last_activity_date": 1443574924, "creation_date": 1443574924, "answer_id": 32856137, "question_id": 32856053, "link": "https://stackoverflow.com/questions/32856053/save-rails-array-with-outer-quotes/32856137#32856137", "title": "Save Rails array with outer quotes", "body": "<p>In your order.rb file, add this:</p>\n\n<pre><code>serialize :hours, Array\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2409, "user_id": 562557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb04e4cf008d137f309a2a1a9ca6cb55?s=128&d=identicon&r=PG", "display_name": "thebenedict", "link": "https://stackoverflow.com/users/562557/thebenedict"}, "edited": false, "score": 0, "creation_date": 1443575334, "post_id": 32856164, "comment_id": 53545923, "body": "Normally you don&#39;t need to <code>parse</code> manually. ActiveRecord handles serialization automatically: <a href=\"http://apidock.com/rails/ActiveRecord/AttributeMethods/Serialization/ClassMethods/serialize\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/AttributeMethods/Serializatio&zwnj;&#8203;n/&hellip;</a>"}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 2409, "user_id": 562557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb04e4cf008d137f309a2a1a9ca6cb55?s=128&d=identicon&r=PG", "display_name": "thebenedict", "link": "https://stackoverflow.com/users/562557/thebenedict"}, "edited": false, "score": 0, "creation_date": 1443575573, "post_id": 32856164, "comment_id": 53545996, "body": "@thebenedict yes,  should add <code>serialize</code> method to model."}, {"owner": {"reputation": 4066, "user_id": 4399243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1382fc0b398211f7db089dd881914ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Onichan", "link": "https://stackoverflow.com/users/4399243/onichan"}, "edited": false, "score": 0, "creation_date": 1443576396, "post_id": 32856164, "comment_id": 53546190, "body": "Thanks. I tried with serialize, but it still does not work. Still getting <code>[1] pry(#&lt;OrdersController&gt;)&gt; @delivery_hours =&gt; &quot;[\\&quot;5:15AM\\&quot;, \\&quot;6:00AM\\&quot;, \\&quot;6:30AM\\&quot;]&quot;</code>"}, {"owner": {"reputation": 4066, "user_id": 4399243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1382fc0b398211f7db089dd881914ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Onichan", "link": "https://stackoverflow.com/users/4399243/onichan"}, "edited": false, "score": 0, "creation_date": 1443577680, "post_id": 32856164, "comment_id": 53546524, "body": "removed it and rolledback + migrated and restarted server. Does not work still. Am I missing something? :("}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 4066, "user_id": 4399243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1382fc0b398211f7db089dd881914ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Onichan", "link": "https://stackoverflow.com/users/4399243/onichan"}, "edited": false, "score": 0, "creation_date": 1443577819, "post_id": 32856164, "comment_id": 53546565, "body": "@Emma Did you reload the code in rails console? and can you show the model code to us?"}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 2, "last_activity_date": 1443577434, "last_edit_date": 1443577434, "creation_date": 1443575134, "answer_id": 32856164, "question_id": 32856053, "link": "https://stackoverflow.com/questions/32856053/save-rails-array-with-outer-quotes/32856164#32856164", "title": "Save Rails array with outer quotes", "body": "<p>Rails stores array records in JSON format, so you just need to change JSON to array.</p>\n\n<pre><code>JSON.parse(\"[\\\"5:30AM\\\", \\\"6:00AM\\\", \\\"6:30AM\\\"]\")\n# =&gt; [\"5:30AM\", \"6:00AM\", \"6:30AM\"]\n</code></pre>\n"}], "owner": {"reputation": 4066, "user_id": 4399243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1382fc0b398211f7db089dd881914ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Onichan", "link": "https://stackoverflow.com/users/4399243/onichan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 1, "accepted_answer_id": 32856137, "answer_count": 2, "score": 0, "last_activity_date": 1443577434, "creation_date": 1443574296, "last_edit_date": 1443577301, "question_id": 32856053, "link": "https://stackoverflow.com/questions/32856053/save-rails-array-with-outer-quotes", "title": "Save Rails array with outer quotes", "body": "<p>Is it possible to save the following array without outer quotes? Or is it possible to access the array without the outer quotes?</p>\n\n<pre><code>e.hours = \"5:30AM\", \"6:00AM\", \"6:30AM\"\n# =&gt; [\"5:30AM\", \"6:00AM\", \"6:30AM\"] \ne.save\n   (0.2ms)  begin transaction\n  SQL (1.6ms)  UPDATE \"brands\" SET \"hours\" = ?, \"updated_at\" = ? WHERE \"brands\".\"id\" = ?  [[\"hours\", \"[\\\"5:30AM\\\", \\\"6:00AM\\\", \\\"6:30AM\\\"]\"], [\"updated_at\", \"2015-09-30 00:35:25.117927\"], [\"id\", 1]]\n   (6.8ms)  commit transaction\n# =&gt; true \ne\n# =&gt; #&lt;Brand id: 1, name: \"Starbucks\", created_at: \"2015-09-23 22:59:08\", updated_at: \"2015-09-30 00:35:25\", hours: \"[\\\"5:30AM\\\", \\\"6:00AM\\\", \\\"6:30AM\\\"&gt; \n</code></pre>\n\n<p>This is what the migration looks like:</p>\n\n<pre><code>add_column :brands, :hours, :string, array: true, default: []\n</code></pre>\n\n<p>When I try to access the array in the controller, it returns the array with outer quotes:</p>\n\n<pre><code>[1] pry(#&lt;OrdersController&gt;)&gt; @delivery_hours\n# =&gt; \"[\\\"5:30AM\\\", \\\"6:00AM\\\", \\\"6:30AM\\\"]\"\n</code></pre>\n"}, {"tags": ["ruby", "selenium-webdriver", "rubymine"], "answers": [{"tags": [], "owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "is_accepted": false, "score": 1, "last_activity_date": 1443574983, "creation_date": 1443574983, "answer_id": 32856142, "question_id": 32855938, "link": "https://stackoverflow.com/questions/32855938/how-do-i-setup-selenium-webdriver-on-rubymine/32856142#32856142", "title": "How do I setup Selenium webdriver on RubyMine?", "body": "<p>I found it! simple type command in command line <code>gem install selenium-webdriver</code></p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 5530405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gw_gcTAEapw/AAAAAAAAAAI/AAAAAAAAACQ/ZuciIF6Lad8/photo.jpg?sz=128", "display_name": "Laura Vachon", "link": "https://stackoverflow.com/users/5530405/laura-vachon"}, "is_accepted": false, "score": 1, "last_activity_date": 1468865527, "creation_date": 1468865527, "answer_id": 38443379, "question_id": 32855938, "link": "https://stackoverflow.com/questions/32855938/how-do-i-setup-selenium-webdriver-on-rubymine/38443379#38443379", "title": "How do I setup Selenium webdriver on RubyMine?", "body": "<p>RubyMine is an IDE. Selenium Webdriver is a gem. When you write your Ruby code, you will have a require of the selenium webdriver gem. On your system, you will need to have the Selenium gem installed.</p>\n\n<p>See the following URL for more information. It does matter which web browser you intend to be running Selenium against.</p>\n\n<p><a href=\"https://github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings\" rel=\"nofollow\">https://github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings</a></p>\n"}], "owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1458, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1468865527, "creation_date": 1443573430, "question_id": 32855938, "link": "https://stackoverflow.com/questions/32855938/how-do-i-setup-selenium-webdriver-on-rubymine", "title": "How do I setup Selenium webdriver on RubyMine?", "body": "<p>I have to learn how to user Selenium Webdriver in RubyMine\nI have no idea how to install Selenium gem.\nI have downloaded Selenium gem, but what is next? how do I install or bind to my RubyMine IDE?\nI used to work a lot with Java, Ruby and RubyMine is completely new tools for me.\nThanks in advance</p>\n"}, {"tags": ["ruby", "methods"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1443574092, "post_id": 32855911, "comment_id": 53545597, "body": "&quot;<code>x.send(:[]=, 0, 4)</code> is a fancy way of writing <code>x[0] = 4</code>&quot;, or &quot;<code>x[0] = 4</code> is a convenient way of writing <code>x.send(:[]=, 0, 4)</code>&quot;?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1443574256, "post_id": 32855911, "comment_id": 53545640, "body": "&quot;... That is basically a fancy way of writing this: ...&quot;--I would say it&#39;s the other way around."}], "tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": true, "score": 3, "last_activity_date": 1443573858, "last_edit_date": 1443573858, "creation_date": 1443573173, "answer_id": 32855911, "question_id": 32855887, "link": "https://stackoverflow.com/questions/32855887/how-does-this-code-with-send-work/32855911#32855911", "title": "How does this code with send :[] work?", "body": "<p>Line 2 is</p>\n\n<pre><code>x.send :[]=,0,4\n</code></pre>\n\n<p>That is basically a fancy way of writing this:</p>\n\n<pre><code>x[0] = 4\n</code></pre>\n\n<p>(Calling <code>send</code> allows you to call private methods though, and that is one difference between the two syntaxes.  Also, an object could conceivably override the <code>send</code> method, which would break the first syntax.)</p>\n\n<p>So line 2 has the effect of writing 4 into the first spot in the array.</p>\n\n<p>Now on line 3, we see that we are adding up three things.  Here is a list of the things we are adding:</p>\n\n<ul>\n<li><code>x[0]</code> - the first element</li>\n<li><code>x.[](1)</code> - another syntax for accessing elements, which accesses the second element.  This syntax is a traditional method call, where the name of the method happens to be <code>[]</code>.</li>\n<li><code>x.send(:[], 2)</code> - This shows another feature of Ruby, which is the <code>send</code> method.  It accesses the third element.</li>\n</ul>\n\n<p>So the result will be 9, because the third line adds the first, second, and third elements of the array.</p>\n\n<p>These examples appear to illustrate an interesting point about the design of the Ruby language.  Specifically, array accesses are implemented as method calls.  The preferred syntax for writing to an array is <code>x[0] = 4</code> and the preferred syntax for reading is <code>x[0]</code>, because that syntax is familiar to programmers from many different languages.  However, reading and writing from arrays is actually implemented using method calls under the hood, and that's why it is possible to use some other syntaxes that look more like a traditional method call.</p>\n\n<p>A traditional method call looks like this:  <code>object.foo(arg1, arg2, arg3, ...)</code>.</p>\n\n<p>The <code>send</code> thing shown above is a useful feature of Ruby that allows you to specify which method you are calling using a symbol, instead of forcing you to type the exact name.  It also lets you call private methods.</p>\n"}, {"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 4, "last_activity_date": 1443573280, "creation_date": 1443573280, "answer_id": 32855923, "question_id": 32855887, "link": "https://stackoverflow.com/questions/32855887/how-does-this-code-with-send-work/32855923#32855923", "title": "How does this code with send :[] work?", "body": "<p><a href=\"http://ruby-doc.org/core-2.2.3/Object.html#method-i-send\" rel=\"nofollow\"><code>Object#send</code></a> provides another way to invoke a method.</p>\n\n<pre><code>x.send :[]=,0,4  \n</code></pre>\n\n<p>is saying, invoke <code>[]=</code> method on <code>x</code>, and pass the argument <code>0</code>, <code>4</code>, it's equivalent to:</p>\n\n<pre><code>x[0] = 4\n</code></pre>\n\n<hr>\n\n<p>The name <code>send</code> is because in Ruby, methods are invoked by sending a message to an object. The message contains the method's name, along with parameters the method may need. This idea comes from SmallTalk.</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 4, "last_activity_date": 1443573980, "last_edit_date": 1443573980, "creation_date": 1443573285, "answer_id": 32855926, "question_id": 32855887, "link": "https://stackoverflow.com/questions/32855887/how-does-this-code-with-send-work/32855926#32855926", "title": "How does this code with send :[] work?", "body": "<pre><code>x.send(:[]=, 0, 4)\n</code></pre>\n\n<p>is the same* as</p>\n\n<pre><code>x.[]=(0, 4) \n</code></pre>\n\n<p>which has the syntactic sugar of</p>\n\n<pre><code>x[0] = 4\n</code></pre>\n\n<p>which should be familiar from other languages.\nParentheses are, of course, optional.</p>\n\n<p>The <code>.send</code> or <code>.public_send</code> variety has the advantage that the method to invoke doesn't have to be hardcoded\u2014it can come from a variable.</p>\n\n<p>All this is congruent with ruby's paradigm of object orientedness: objects communicate with each other by <strong>sending</strong> messages, and the messages trigger code execution.</p>\n\n<hr>\n\n<p>*almost, <code>#send</code> will invoke private methods too</p>\n"}], "owner": {"reputation": 731, "user_id": 2438094, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/edvfV.jpg?s=128&g=1", "display_name": "WCGPR0", "link": "https://stackoverflow.com/users/2438094/wcgpr0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 32855911, "answer_count": 3, "score": 2, "last_activity_date": 1443573980, "creation_date": 1443572945, "last_edit_date": 1443573620, "question_id": 32855887, "link": "https://stackoverflow.com/questions/32855887/how-does-this-code-with-send-work", "title": "How does this code with send :[] work?", "body": "<p>The following code generates an output of 9. I understand <code>send</code> is simply calling the method <code>:[]</code>, but am confused how the parameters work.</p>\n\n<pre><code> x = [1,2,3]\n x.send :[]=,0,4                             #why is x now [4,2,3]\n x[0] + x.[](1) + x.send(:[],2)              # 4 + 2 + 3\n</code></pre>\n\n<p>How do line 2 and line 3 work?</p>\n"}, {"tags": ["ruby", "image-processing", "encoding", "base64", "ocr"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1443572364, "post_id": 32855620, "comment_id": 53545201, "body": "The expected output is not clear."}, {"owner": {"reputation": 401, "user_id": 3233838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a5d9a23641727266f169f25e1d03b76?s=128&d=identicon&r=PG&f=1", "display_name": "AvocadoRivalry", "link": "https://stackoverflow.com/users/3233838/avocadorivalry"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1443572418, "post_id": 32855620, "comment_id": 53545215, "body": "The expected output I would want is the value - 210000 in this example."}], "answers": [{"tags": [], "owner": {"reputation": 450, "user_id": 5230146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OcCX75BTRyc/AAAAAAAAAAI/AAAAAAAADfQ/AXQLZpKgaWc/photo.jpg?sz=128", "display_name": "Derwin McGeary", "link": "https://stackoverflow.com/users/5230146/derwin-mcgeary"}, "is_accepted": false, "score": 3, "last_activity_date": 1443572382, "creation_date": 1443572382, "answer_id": 32855804, "question_id": 32855620, "link": "https://stackoverflow.com/questions/32855620/how-to-get-value-displayed-in-image-created-by-base64-encoded-string/32855804#32855804", "title": "How to get value displayed in image created by Base64-encoded string?", "body": "<p>I have just tried your example with <a href=\"https://code.google.com/p/tesseract-ocr/wiki/FAQ#How_do_I_recognize_only_digits?\" rel=\"nofollow\">Tesseract</a>, an open OCR system, on an Ubuntu command line. </p>\n\n<p>Going from base64 to digits looked like this:</p>\n\n<p><code>$ base64 -d image.base64 | tesseract - - digits | sed -e 's/\\ //g'\n</code>\nWith the output:\n<code>\n210000\n</code></p>\n\n<p>I'm afraid I don't know how that would integrate with Ruby, but I hope this helps you.</p>\n"}, {"tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 0, "last_activity_date": 1478307831, "creation_date": 1478307831, "answer_id": 40433787, "question_id": 32855620, "link": "https://stackoverflow.com/questions/32855620/how-to-get-value-displayed-in-image-created-by-base64-encoded-string/40433787#40433787", "title": "How to get value displayed in image created by Base64-encoded string?", "body": "<p>I had to solve this myself today, here's what I came up with:</p>\n\n<pre><code>File.open('im.png','wb'){|f| f &lt;&lt; Base64.decode64(src.sub('data:image/png;base64,',''))}\nnum = `tesseract -psm 8 -l eng im.png - digits`.gsub(/\\D/,'')\n</code></pre>\n\n<p>I had to <code>apt-get install tesseract-ocr</code> and download the traineddata:</p>\n\n<p>wget <a href=\"https://github.com/tesseract-ocr/tessdata/raw/master/eng.traineddata\" rel=\"nofollow noreferrer\">https://github.com/tesseract-ocr/tessdata/raw/master/eng.traineddata</a></p>\n\n<p>sudo mv -v eng.traineddata /usr/share/tesseract-ocr/tessdata/</p>\n"}], "owner": {"reputation": 401, "user_id": 3233838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a5d9a23641727266f169f25e1d03b76?s=128&d=identicon&r=PG&f=1", "display_name": "AvocadoRivalry", "link": "https://stackoverflow.com/users/3233838/avocadorivalry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1478307831, "creation_date": 1443571049, "last_edit_date": 1443571779, "question_id": 32855620, "link": "https://stackoverflow.com/questions/32855620/how-to-get-value-displayed-in-image-created-by-base64-encoded-string", "title": "How to get value displayed in image created by Base64-encoded string?", "body": "<p>I have a Base64-encoded string that is used as the source of an image element on a website and need to derive the value from said string.  Is there any tool that allows this information to be extracted from an image based on the bits returned by decoding the Base64 string?  An example is here:</p>\n\n<pre><code>&lt;img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAArCAYAAADR/aKkAAABUElEQVR42u3cW27EIBAFUfa/abKCiRJ7+kFzrsQnFLYKgy3wWiIiIiIiIiIiIiIiIiIin7L/UKr7VnHdC/cM7n5RqgZW9gCOYOMGcPeXyi03uep6cZOF3ofd4FU4iHEDuf+pHHHRHZ8YkUsf3GBudCefthW5hn7S7jf6gpvDLX1L/a1O9vSn7vl1W3+ByBQ6uj5uDvcqoU3fs7mEJhahJwod3Q5uDvcqoX0Cm81tLzOhcQlNaEK3HTWExo12LfvNk9C4JVtMF6GJdZLQE/ZDE4vQpTITGjd18/8iNLFOErrDWUJC44Zs+q86GEto3FdtdTvlbS8H7hiZM4W2620Gt+Uyg9C4r9voKHPUrOHkyPATK5vQzudNqdtZ5sj+mb6HcndQ6S60T2BDuR2EruT7g9Ew7u1Cr8JZCDfhN2A3Cr1WzyUVbsFUMEXo6pdk3IfcH7oMZxgkIFxpAAAAAElFTkSuQmCC\"&gt;\n</code></pre>\n\n<p>This returns an image containing the value 210000, but I need some way, if possible to return that actual value.  </p>\n\n<p>If the only answer is some sort of OCR technology, any advice on where to start, specifically related to embedding this in a Ruby script, would be greatly appreciated.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "ubuntu", "redis", "sidekiq", "foreman"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1443586856, "post_id": 32855613, "comment_id": 53548824, "body": "This is a good candidate to create an <a href=\"https://github.com/mperham/sidekiq/issues\" rel=\"nofollow noreferrer\">issue directly</a> or even ask Mike Perham."}, {"owner": {"reputation": 13, "user_id": 2948738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/353ed74c2b392d76d5ceea32680f4020?s=128&d=identicon&r=PG", "display_name": "Shipitko", "link": "https://stackoverflow.com/users/2948738/shipitko"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1443592934, "post_id": 32855613, "comment_id": 53550929, "body": "@mudasobwa thanks for advice. <a href=\"https://github.com/mperham/sidekiq/issues/2576\" rel=\"nofollow noreferrer\">Issue</a> created."}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1443627640, "post_id": 32855613, "comment_id": 53572270, "body": "There&#39;s hundreds of variables that can cause issues and no way to tell which is at fault."}, {"owner": {"reputation": 1954, "user_id": 1242053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b40f8a0c0a46dc86879e6f4e658faa8?s=128&d=identicon&r=PG", "display_name": "route", "link": "https://stackoverflow.com/users/1242053/route"}, "edited": false, "score": 0, "creation_date": 1573629501, "post_id": 32855613, "comment_id": 103939318, "body": "out of curiosity, did you find the solution?"}, {"owner": {"reputation": 13, "user_id": 2948738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/353ed74c2b392d76d5ceea32680f4020?s=128&d=identicon&r=PG", "display_name": "Shipitko", "link": "https://stackoverflow.com/users/2948738/shipitko"}, "edited": false, "score": 0, "creation_date": 1597317647, "post_id": 32855613, "comment_id": 112096570, "body": "nah, it&#39;s more likely amount of CPU performance depending on core number of droplet."}], "owner": {"reputation": 13, "user_id": 2948738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/353ed74c2b392d76d5ceea32680f4020?s=128&d=identicon&r=PG", "display_name": "Shipitko", "link": "https://stackoverflow.com/users/2948738/shipitko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443572456, "creation_date": 1443570986, "last_edit_date": 1443572456, "question_id": 32855613, "link": "https://stackoverflow.com/questions/32855613/what-limits-performance-of-worker", "title": "What limits performance of worker?", "body": "<p>I use Sidekiq for job processing. Using Foreman, I set up six processes in my Procfile:</p>\n\n<pre><code>redirects: bundle exec sidekiq -c 10 -q redirects\nredirects2: bundle exec sidekiq -c 10 -q redirects\nredirects3: bundle exec sidekiq -c 10 -q redirects\nredirects4: bundle exec sidekiq -c 10 -q redirects\nredirects5: bundle exec sidekiq -c 10 -q redirects\nredirects6: bundle exec sidekiq -c 10 -q redirects\n</code></pre>\n\n<p>These processes performed at about 1600+ jobs (simple job to increment some hashes in Redis) per second with all 10 threads busy most of the time. I scaled my Digital Ocean droplet from 8 to 12-core, and performance fell to ~400 per second. For each process, there are only 3-5 busy threads out of 10.</p>\n\n<p>What I did to try to fix the issue:</p>\n\n<ul>\n<li>Make <code>perform</code> method empty</li>\n<li>Use less/more process count</li>\n<li>Use less/more concurrency</li>\n<li>Split queue to server-specific queues (there are three express.js clients from another servers puts jobs in queues)</li>\n<li>Trying with different <code>hz</code> values in redis.conf</li>\n<li>Setting <code>somaxconn</code> to 1024 (<code>tcp-backlog</code> in redis.conf too)</li>\n<li>Turning off RDB save and use only AOF</li>\n<li>Flush all Redis dbs (there are two databases for all that logic: one for sidekiq and another for hashes in my workers)</li>\n<li>Running sidekiq from terminal without Foreman (to check if it is Foreman issue)</li>\n</ul>\n\n<p>None of above helped me. What could have caused the performance loss?</p>\n"}, {"tags": ["html", "ruby"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1443571254, "post_id": 32855495, "comment_id": 53544899, "body": "What HTML parser are you using?"}, {"owner": {"reputation": 3, "user_id": 5390882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59fe2c4bf3627fb08da1c126e2bdde7a?s=128&d=identicon&r=PG&f=1", "display_name": "Joew", "link": "https://stackoverflow.com/users/5390882/joew"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1443571874, "post_id": 32855495, "comment_id": 53545063, "body": "@lurker Sorry. Could you please tell me how I can find HTML parser that I&#39;m using?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1443572011, "post_id": 32855495, "comment_id": 53545108, "body": "Maybe include more of your code? What is <code>find</code> operating on? Did you do a <code>require</code> statement to include a library? Did you install a <code>gem</code>?"}, {"owner": {"reputation": 3, "user_id": 5390882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59fe2c4bf3627fb08da1c126e2bdde7a?s=128&d=identicon&r=PG&f=1", "display_name": "Joew", "link": "https://stackoverflow.com/users/5390882/joew"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1443573908, "post_id": 32855495, "comment_id": 53545538, "body": "@sawa an html is what I say now :)"}, {"owner": {"reputation": 3, "user_id": 5390882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59fe2c4bf3627fb08da1c126e2bdde7a?s=128&d=identicon&r=PG&f=1", "display_name": "Joew", "link": "https://stackoverflow.com/users/5390882/joew"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1443573953, "post_id": 32855495, "comment_id": 53545561, "body": "@lurker I have added more of my code into the description. Could you please have a look?"}], "answers": [{"tags": [], "owner": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "is_accepted": true, "score": 0, "last_activity_date": 1443574798, "last_edit_date": 1443574798, "creation_date": 1443574239, "answer_id": 32856044, "question_id": 32855495, "link": "https://stackoverflow.com/questions/32855495/cannot-find-the-text-inside-span/32856044#32856044", "title": "Cannot find the text inside `&lt;span&gt;`", "body": "<p>Parsing HTML is super easy in Ruby.  All you need is to require two gems in your program:</p>\n\n<pre><code>require 'open-uri'\nrequire 'nokogiri'\n\n# Set the page you are going to scan.\npage = Nokogiri::HTML(open(\"http://google.com/\"))\n\n# (Updated to reflect the date class provided in question)\n# Extract specific elements via CSS selector.\n# This first selects all everything that has span tag,\n# then narrows down to anything with class of \".date\"\n# use .strip to remove any whitespace from HTML\n\npage.css('span').css('.date').text.strip! \n\n# =&gt; outputs \"8:27AM, Sep 30\"\n</code></pre>\n\n<p>If you want more information on parsing HTML with Ruby, you need to be googling and reading about it.  One great resource to get you started is <a href=\"http://ruby.bastardsbook.com/chapters/html-parsing/\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "is_accepted": false, "score": 0, "last_activity_date": 1443613591, "creation_date": 1443613591, "answer_id": 32865271, "question_id": 32855495, "link": "https://stackoverflow.com/questions/32855495/cannot-find-the-text-inside-span/32865271#32865271", "title": "Cannot find the text inside `&lt;span&gt;`", "body": "<p>use <code>find('.info &gt; .date').text</code> to get content on the page.</p>\n\n<pre><code>    irb(main):035:0&gt; find('.info').text\n    =&gt; \"aaa 8:27AM, Sep 30\"\n    irb(main):036:0&gt; find('.info &gt; .date').text\n    =&gt; \"8:27AM, Sep 30\"\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5390882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59fe2c4bf3627fb08da1c126e2bdde7a?s=128&d=identicon&r=PG&f=1", "display_name": "Joew", "link": "https://stackoverflow.com/users/5390882/joew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 32856044, "answer_count": 2, "score": -1, "last_activity_date": 1443613591, "creation_date": 1443570307, "last_edit_date": 1443574015, "question_id": 32855495, "link": "https://stackoverflow.com/questions/32855495/cannot-find-the-text-inside-span", "title": "Cannot find the text inside `&lt;span&gt;`", "body": "<p>I have an html as below:</p>\n\n<pre><code>&lt;div class=\"info\"&gt;\n &lt;h5&gt;\n   &lt;a href=\"/aaa/\"&gt;aaa &lt;/a&gt;\n &lt;/h5&gt;\n &lt;span class=\"date\"&gt;\n       8:27AM, Sep 30&lt;/span&gt;     \n&lt;/div&gt;\n</code></pre>\n\n<p>I'm using Ruby and I want to get the text <code>\"8:27AM, Sep 30\"</code> that is inside <code>&lt;span class=\"date\"&gt;</code>. I cannot find it via the command below.</p>\n\n<pre><code>find('div.info span.date').text\n</code></pre>\n\n<p>Could you please tell me why it doesn't work? If I find the text inside <code>h5</code> with the following command, I can get <code>\"aaa\"</code> correctly.</p>\n\n<pre><code>find('div.info h5').text\n</code></pre>\n\n<p><strong>Full ruby code</strong> </p>\n\n<pre><code>Then(/^you should see (\\d+) latest items$/) do |arg1|\n    within(\"div.top-feature-list\") do\n       # Validate images of those items exist, print report\n       expect(all(\"img\").size.to_s).to eq(arg1)\n       puts \"The number of items on the current site is \" + (all(\"img\").size.to_s)\n       # List of all items' details (Image, Headline, Introduction, Identifier, Url)\n       $i = 1\n       while $i &lt;= arg1.to_i do\n          puts \"Item no.\" + $i.to_s\n          puts \"        - Image:        \" + find('ul.category-index li.item-' + $i.to_s + ' img')[:src].to_s\n          puts \"        - Headline: \" + find('ul.category-index li.item-' + $i.to_s + ' div.info h5').text\n          puts \"        - Introduction: \" + find('ul.category-index li.item-' + $i.to_s + ' div.summary').text\n          puts \"        - Url:      \" + find('ul.category-index li.item-' + $i.to_s + ' div.info h5 a')[:href].to_s\n          puts \"        - Created Date \" + find('ul.category-index li.item-' + $i.to_s + ' div.info span.date').text\n          puts \"        - Identifier:   \" + find('ul.category-index li.item-' + $i.to_s + ' div.img a.section-name').text\n          puts \"        - Subsection:   \" + find('ul.category-index li.item-' + $i.to_s + ' div.img a.section-name')[:href].to_s\n          $i +=1\n      end\n    end\n  end\n</code></pre>\n\n<p><strong>More html</strong></p>\n\n<pre><code>&lt;div class=\"top-feature-list\"&gt;  \n &lt;ul class=\"category-index\"&gt;\n    &lt;li class=\"group\"&gt;\n           &lt;ul&gt;\n    &lt;li class=\"item-1 left \"&gt;\n        &lt;a name=\"item-1\"&gt;&lt;/a&gt;\n        &lt;div class=\"img\"&gt;\n            &lt;a href=\"/health-lifestyle/item1.html\"&gt;\n                &lt;img alt=\"How to\" src=\"//image_url\"&gt;     \n            &lt;/a&gt;\n\n            &lt;a class=\"section-name test\" href=\"/health-lifestyle/\"&gt;\n                LIFESTYLE &lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=\"info\"&gt;\n            &lt;h5&gt;\n\n                &lt;a href=\"/health-lifestyle/item1.html\"&gt;\n                    How to &lt;/a&gt;\n\n            &lt;/h5&gt;\n            &lt;span class=\"date\"&gt;\n                10:20AM, Sep 30&lt;/span&gt;\n\n        &lt;/div&gt;\n        &lt;div class=\"summary\"&gt;\n\n            &lt;p&gt;\n                Summary text&lt;/p&gt;\n\n        &lt;/div&gt;\n\n\n    &lt;/li&gt;\n    ....\n</code></pre>\n\n<p><strong>env.rb</strong></p>\n\n<pre><code>require 'parallel_tests'\nrequire 'capybara/cucumber'\nrequire 'capybara/poltergeist'\nrequire 'rspec'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "json"], "answers": [{"comments": [{"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1443589928, "post_id": 32855425, "comment_id": 53549793, "body": "Thanks for the response dear, but i think i could not make myself clear . kindly have a look on the question again and answer again if possible . thanks in advance , By the way , the thing you did is right , we can also take advantage of ruby &#39;map&#39; method and some other also , but only when we&#39;ll have response . I want to filter the data before getting response"}], "tags": [], "owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "is_accepted": false, "score": 0, "last_activity_date": 1443569835, "creation_date": 1443569835, "answer_id": 32855425, "question_id": 32855247, "link": "https://stackoverflow.com/questions/32855247/access-only-one-attribute-of-api-in-response-ruby-on-rails-4/32855425#32855425", "title": "Access only one attribute of API in response - Ruby on Rails 4", "body": "<p>Try to use <code>delete</code>.</p>\n\n<blockquote>\n  <p>Deletes and returns a key-value pair from hsh whose key is equal to\n  key. If the key is not found, returns the default value. If the\n  optional code block is given and the key is not found, pass in the key\n  and return the result of block.</p>\n</blockquote>\n\n<pre><code>data = [{\"param1\":1,\"param2\":\"blah1\"},\n{\"param1\":2,\"param2\":\"blah2\"},\n{\"param1\":3,\"param2\":\"blah3\"}]\n\ndata.each {|x| x.delete(\"param2\")}\n</code></pre>\n\n<p>For more information about <a href=\"http://apidock.com/ruby/Hash/delete\" rel=\"nofollow\">delete</a>.\nI hope this help you.</p>\n"}], "owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1443589767, "creation_date": 1443568581, "last_edit_date": 1443589767, "question_id": 32855247, "link": "https://stackoverflow.com/questions/32855247/access-only-one-attribute-of-api-in-response-ruby-on-rails-4", "title": "Access only one attribute of API in response - Ruby on Rails 4", "body": "<p>I am calling an API that returns an array of JSON objects and I can access return values of the API call</p>\n\n<pre><code>[{\"param1\":1,\"param2\":\"blah1\"},\n{\"param1\":2,\"param2\":\"blah2\"},\n{\"param1\":3,\"param2\":\"blah3\"}]\n</code></pre>\n\n<p>I know that i can access each Param1 through iteration or by static indexing like <code>@client[0].param1</code>  <code>@client[1].param1</code>  <code>@client[2].param1</code> but the thing is , i don't want param2 and i want just param1 . is there any way , to access param1 without iteration or static indexing \nso that i could get the below result in response</p>\n\n<pre><code>[{\"param1\":1},\n{\"param1\":2},\n{\"param1\":3}]\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<blockquote>\n  <p>The thing to notice is that i want to filter the result while making\n  the request (before getting the response when we know the attribute\n  name)</p>\n</blockquote>\n"}, {"tags": ["python", "ruby", "cron"], "comments": [{"owner": {"reputation": 5323, "user_id": 3829282, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/471591e889721e2158a91c1cbfbe7329?s=128&d=identicon&r=PG&f=1", "display_name": "rje", "link": "https://stackoverflow.com/users/3829282/rje"}, "edited": false, "score": 2, "creation_date": 1443567926, "post_id": 32855013, "comment_id": 53543971, "body": "My guess would be that cron runs with a different PATH setting than yourself. I would start by trying to specify the complete path to ruby instead of just calling it like this."}, {"owner": {"reputation": 683, "user_id": 3680562, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/26cf72b09a492f3fefdd4811f301c46d?s=128&d=identicon&r=PG&f=1", "display_name": "ddolce", "link": "https://stackoverflow.com/users/3680562/ddolce"}, "reply_to_user": {"reputation": 5323, "user_id": 3829282, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/471591e889721e2158a91c1cbfbe7329?s=128&d=identicon&r=PG&f=1", "display_name": "rje", "link": "https://stackoverflow.com/users/3829282/rje"}, "edited": false, "score": 0, "creation_date": 1443568893, "post_id": 32855013, "comment_id": 53544296, "body": "@rje thanks that&#39;s exactly what I needed to do! Didn&#39;t remember I&#39;d been using <code>rbenv</code> until you mentioned the PATH setting. If you&#39;d like please answer the question and I shall mark it as the correct answer."}], "answers": [{"comments": [{"owner": {"reputation": 683, "user_id": 3680562, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/26cf72b09a492f3fefdd4811f301c46d?s=128&d=identicon&r=PG&f=1", "display_name": "ddolce", "link": "https://stackoverflow.com/users/3680562/ddolce"}, "edited": false, "score": 0, "creation_date": 1443569719, "post_id": 32855348, "comment_id": 53544493, "body": "Are the colons used to separate all the potential <code>PATH</code>s? Does that mean <code>cron</code> will then search all 4 locations before returning a <code>not found</code> error?"}, {"owner": {"reputation": 2651, "user_id": 2246024, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/OpzyW.jpg?s=128&g=1", "display_name": "Simon Fromme", "link": "https://stackoverflow.com/users/2246024/simon-fromme"}, "reply_to_user": {"reputation": 683, "user_id": 3680562, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/26cf72b09a492f3fefdd4811f301c46d?s=128&d=identicon&r=PG&f=1", "display_name": "ddolce", "link": "https://stackoverflow.com/users/3680562/ddolce"}, "edited": false, "score": 0, "creation_date": 1443570308, "post_id": 32855348, "comment_id": 53544640, "body": "<code>PATH</code> contains a colon-separated list of directories in which your system looks for executable files. So, yes!"}], "tags": [], "owner": {"reputation": 2651, "user_id": 2246024, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/OpzyW.jpg?s=128&g=1", "display_name": "Simon Fromme", "link": "https://stackoverflow.com/users/2246024/simon-fromme"}, "is_accepted": true, "score": 0, "last_activity_date": 1443569281, "creation_date": 1443569281, "answer_id": 32855348, "question_id": 32855013, "link": "https://stackoverflow.com/questions/32855013/unable-to-execute-ruby-script-in-a-python-script/32855348#32855348", "title": "Unable to execute Ruby script in a Python script", "body": "<p>Cron passes only a very limited number of environment variables to your job. According to the <a href=\"http://www.freebsd.org/cgi/man.cgi?crontab%285%29\" rel=\"nofollow\">CRONTAB(5) Man Page</a>:</p>\n\n<ul>\n<li><code>SHELL</code> is set to <code>/bin/sh</code></li>\n<li><code>PATH</code> is set to <code>/usr/bin:/bin</code></li>\n<li><code>LOGNAME</code> and <code>HOME</code> are set from the <code>/etc/passwd</code> line of the crontab's\n owner.  </li>\n</ul>\n\n<blockquote>\n  <p><code>HOME</code>, <code>PATH</code>    and <code>SHELL</code> may be overridden by settings in the\n  crontab; <code>LOGNAME</code> may not.</p>\n</blockquote>\n\n<p>So if your <code>ruby</code> executable is not located in either <code>/usr/bin</code> or <code>/bin</code> cron cannot find it by default. </p>\n\n<p>You can a specify <code>PATH</code> within crontab to include your ruby executable though. </p>\n\n<pre><code>PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n\n17 * * * * python my_ruby_calling_script.py\n</code></pre>\n"}], "owner": {"reputation": 683, "user_id": 3680562, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/26cf72b09a492f3fefdd4811f301c46d?s=128&d=identicon&r=PG&f=1", "display_name": "ddolce", "link": "https://stackoverflow.com/users/3680562/ddolce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 32855348, "answer_count": 1, "score": 0, "last_activity_date": 1443569397, "creation_date": 1443567096, "last_edit_date": 1443569397, "question_id": 32855013, "link": "https://stackoverflow.com/questions/32855013/unable-to-execute-ruby-script-in-a-python-script", "title": "Unable to execute Ruby script in a Python script", "body": "<p>I'm having trouble executing a Ruby script with my Python code.</p>\n\n<p>My server has a cron job that is supposed to execute a Python script and a Ruby script. However, the Ruby script has to be executed after the Python one, so I decided to add a line:</p>\n\n<pre><code>os.system(\"ruby /home/username/helloworld.rb\") \n</code></pre>\n\n<p>at the end of the Python script.</p>\n\n<p>It runs, but I'm getting this error in the log file:</p>\n\n<pre><code>/bin/sh 1: ruby not found\n</code></pre>\n\n<p>I'm not sure why this is happening; I've tried calling the exact same function in the Python console as well as running the Python script manually, and both work perfectly. In other words, this line of code doesn't work <em>ONLY</em> when the script is triggered by cron.</p>\n\n<p>Is there something else I need to put in my crontab/Python script perhaps?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1682, "user_id": 4219209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f3e6158829f78389b3d364ae4a247bf?s=128&d=identicon&r=PG", "display_name": "Lanny Bose", "link": "https://stackoverflow.com/users/4219209/lanny-bose"}, "edited": false, "score": 2, "creation_date": 1443566949, "post_id": 32854466, "comment_id": 53543675, "body": "Would it be possible to leverage <code>current_user</code> or some session parameter to achieve the layout-by-group functionality you want?"}, {"owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "reply_to_user": {"reputation": 1682, "user_id": 4219209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f3e6158829f78389b3d364ae4a247bf?s=128&d=identicon&r=PG", "display_name": "Lanny Bose", "link": "https://stackoverflow.com/users/4219209/lanny-bose"}, "edited": false, "score": 0, "creation_date": 1443567294, "post_id": 32854466, "comment_id": 53543776, "body": "Hi Lanny, yeah, that makes sense too."}], "answers": [{"tags": [], "owner": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "is_accepted": true, "score": 1, "last_activity_date": 1443584171, "creation_date": 1443584171, "answer_id": 32857337, "question_id": 32854466, "link": "https://stackoverflow.com/questions/32854466/nested-routes-that-do-not-imply-resource-association/32857337#32857337", "title": "Nested routes that do not imply resource association", "body": "<p>I maintain an app with similar requirements.  I do something roughly along the lines of:</p>\n\n<pre><code>class User\n  has_and_belongs_to_many :groups\n  belongs_to :active_group, class_name 'Group'\n\n  def active_group\n    return super unless super.nil?\n\n    group = groups.first\n    update_columns(active_group_id: group.id)\n    group\n  end\nend\n</code></pre>\n\n<p>The <code>User</code> class validates that they are assigned to one or more groups and the <code>active_group</code> method is overriden to provide a default if it is a first login.  With this approach you will need to provide an action to set the active group so the user can switch groups (presumably this is a requirement).</p>\n\n<p>This assumes that you have some kind of authentication in place to know the current user.  If restricting access to groups is not a concern, you can forego the habtm relationship and substitute <code>groups.first</code> with <code>Group.first</code>.</p>\n\n<p>If you don't have/want/need authentication, you could just drop a <code>active_group_id</code> in the session cookie.  But I would definitely consider it bad practice to nest unrelated resources.</p>\n"}], "owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 32857337, "answer_count": 1, "score": 0, "last_activity_date": 1443584171, "creation_date": 1443563980, "last_edit_date": 1443567361, "question_id": 32854466, "link": "https://stackoverflow.com/questions/32854466/nested-routes-that-do-not-imply-resource-association", "title": "Nested routes that do not imply resource association", "body": "<p>Is it considered bad practice (or un-RESTful) to create nested routes for resources that otherwise have no association? For example I have:</p>\n\n<pre><code>resources :foos do\n  resources :bars\nend\n</code></pre>\n\n<p>But I have no business logic elsewhere in my database or application that associates <code>:foos</code> with <code>:bars</code>. </p>\n\n<p>The reason I want to do this: Many of my routes are created as resources nested under my <code>:groups</code> resource. I do that so that I can always grab a <code>group_id</code> param and always show a layout that matches the group the user is currently \"in\". I'm comfortable with this when the resource <code>belongs_to</code> the group:</p>\n\n<blockquote>\n  <p>/groups/1/comments/1</p>\n</blockquote>\n\n<p>But when some other comment does not <code>belong_to</code> the group (group1) and I want to look at it through layout that is \"branded\" as group1, my impulse is to route it like this:</p>\n\n<blockquote>\n  <p>/groups/1/comments/2</p>\n</blockquote>\n\n<p>Is this ok to do,  maybe I'm overthinking this?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "routes"], "answers": [{"comments": [{"owner": {"reputation": 1175, "user_id": 1690091, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/93b180d7e879a100b69cc89a717e6726?s=128&d=identicon&r=PG", "display_name": "idjuradj", "link": "https://stackoverflow.com/users/1690091/idjuradj"}, "edited": false, "score": 0, "creation_date": 1443563505, "post_id": 32854223, "comment_id": 53542472, "body": "This line &quot;get &#39;tags/:tag&#39;, to: &#39;links#index&#39;, as: :tag&quot; works like that. When I click on tag named for example &#39;test&#39;, it takes me to ../tags/test.  How do I make that work while indexing tags?"}, {"owner": {"reputation": 2597, "user_id": 1329321, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/c3c2bc221f92e4a674ac01510cf900f0?s=128&d=identicon&r=PG", "display_name": "Mike Manfrin", "link": "https://stackoverflow.com/users/1329321/mike-manfrin"}, "reply_to_user": {"reputation": 1175, "user_id": 1690091, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/93b180d7e879a100b69cc89a717e6726?s=128&d=identicon&r=PG", "display_name": "idjuradj", "link": "https://stackoverflow.com/users/1690091/idjuradj"}, "edited": false, "score": 0, "creation_date": 1443570554, "post_id": 32854223, "comment_id": 53544713, "body": "In your Tags controller you&#39;d find the tag like <code>Tag.find_by(name: tag)</code> or something of that sort."}], "tags": [], "owner": {"reputation": 2597, "user_id": 1329321, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/c3c2bc221f92e4a674ac01510cf900f0?s=128&d=identicon&r=PG", "display_name": "Mike Manfrin", "link": "https://stackoverflow.com/users/1329321/mike-manfrin"}, "is_accepted": false, "score": 0, "last_activity_date": 1443562782, "creation_date": 1443562782, "answer_id": 32854223, "question_id": 32854059, "link": "https://stackoverflow.com/questions/32854059/properly-set-match-routes-in-routes-rb/32854223#32854223", "title": "Properly set / match routes in routes.rb", "body": "<p>Assuming you are trying to match something like <code>tags/tag-name</code>, with <code>tag-name</code> being a field other than <code>id</code> on <code>Tags</code>; you can use <a href=\"https://github.com/norman/friendly_id\" rel=\"nofollow\">friendlyId</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1443563693, "creation_date": 1443563693, "answer_id": 32854410, "question_id": 32854059, "link": "https://stackoverflow.com/questions/32854059/properly-set-match-routes-in-routes-rb/32854410#32854410", "title": "Properly set / match routes in routes.rb", "body": "<p>Add the following <a href=\"http://apidock.com/rails/ActiveRecord/Integration/to_param\" rel=\"nofollow\"><code>to_param</code></a> method to your <code>Tag</code> model:</p>\n\n<pre><code>def to_param\n  name\nend\n</code></pre>\n"}], "owner": {"reputation": 1175, "user_id": 1690091, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/93b180d7e879a100b69cc89a717e6726?s=128&d=identicon&r=PG", "display_name": "idjuradj", "link": "https://stackoverflow.com/users/1690091/idjuradj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 32854410, "answer_count": 2, "score": 0, "last_activity_date": 1443563693, "creation_date": 1443562100, "question_id": 32854059, "link": "https://stackoverflow.com/questions/32854059/properly-set-match-routes-in-routes-rb", "title": "Properly set / match routes in routes.rb", "body": "<p>I've implemented basic tagging in my app, so posts can be filtered by tags.</p>\n\n<p>There's a route in my routes.rb for that</p>\n\n<pre><code>get 'tags/:tag', to: 'links#index', as: :tag\n</code></pre>\n\n<p>However, I would like to have an URL /tags that lists all tags (triggers index action in the tag controller).</p>\n\n<p>I've set this route up</p>\n\n<pre><code>get 'tags' =&gt; 'tags#index'\n</code></pre>\n\n<p>In my tag view i have <code>index.html.erb</code></p>\n\n<pre><code>&lt;% @tags.each do |tag| %&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;%= link_to tag.name, tag_path(tag) %&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The problem is that <code>&lt;%= link_to tag.name, tag_path(tag) %&gt;</code> leads to <code>/tags/:id</code> instead of <code>/tags/:tag</code> and thus doesn't work.</p>\n\n<p>How do I properly set this up?</p>\n"}, {"tags": ["ios", "ruby", "xcode", "gem", "cocoapods"], "answers": [{"tags": [], "owner": {"reputation": 433, "user_id": 992167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4e80f69fc0ee3b13c5d0da286f765?s=128&d=identicon&r=PG", "display_name": "Heliotropix", "link": "https://stackoverflow.com/users/992167/heliotropix"}, "is_accepted": false, "score": 0, "last_activity_date": 1443645764, "creation_date": 1443645764, "answer_id": 32875268, "question_id": 32853742, "link": "https://stackoverflow.com/questions/32853742/pod-install-fails-with-error-error1006706belliptic-curve-routines/32875268#32875268", "title": "pod install fails with error: error:1006706B:elliptic curve routines", "body": "<p>I resorted to taking drastic action.  I uninstalled Xcode (app, libraries, preferences), uninstalled cocoapods, and uninstalled MacPorts (I could have had an old port getting in the mix).  Reinstalled Xcode and cocoapods and now it works.</p>\n"}], "owner": {"reputation": 433, "user_id": 992167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4e80f69fc0ee3b13c5d0da286f765?s=128&d=identicon&r=PG", "display_name": "Heliotropix", "link": "https://stackoverflow.com/users/992167/heliotropix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 971, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443645764, "creation_date": 1443560678, "question_id": 32853742, "link": "https://stackoverflow.com/questions/32853742/pod-install-fails-with-error-error1006706belliptic-curve-routines", "title": "pod install fails with error: error:1006706B:elliptic curve routines", "body": "<p>I have two Macs both up to date with OS X and Xcode.  On one, I can install cocoapods and the pods specified in my project's podfile.  The other fails:</p>\n\n<blockquote>\n  <p>pod install --verbose   Preparing</p>\n  \n  <p>Updating local specs repositories</p>\n  \n  <p>Creating shallow clone of spec repo <code>master</code> from\n  <code>https://github.com/CocoaPods/Specs.git</code>   $ /opt/local/bin/git clone\n  <a href=\"https://github.com/CocoaPods/Specs.git\" rel=\"nofollow\">https://github.com/CocoaPods/Specs.git</a> master --depth=1   Cloning into\n  'master'...   error: error:1006706B:elliptic curve\n  routines:ec_GFp_simple_oct2point:point is not on curve while accessing\n  <a href=\"https://github.com/CocoaPods/Specs.git/info/refs?service=git-upload-pack\" rel=\"nofollow\">https://github.com/CocoaPods/Specs.git/info/refs?service=git-upload-pack</a>\n  fatal: HTTP request failed [!] Unable to add a source with url\n  <code>https://github.com/CocoaPods/Specs.git</code> named <code>master</code>. You can try\n  adding it manually in <code>~/.cocoapods/repos</code> or via <code>pod repo add</code>.</p>\n  \n  <p>/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/lib/cocoapods/sources_manager.rb:48:in\n  <code>rescue in find_or_create_source_with_url'\n  /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/lib/cocoapods/sources_manager.rb:53:in\n  </code>find_or_create_source_with_url'\n  /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/lib/cocoapods/installer/analyzer.rb:616:in <code>block in sources'\n  /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/lib/cocoapods/installer/analyzer.rb:615:in</code>map'\n  /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/lib/cocoapods/installer/analyzer.rb:615:in <code>sources'\n  /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/lib/cocoapods/installer/analyzer.rb:211:in</code>update_repositories'\n  /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/lib/cocoapods/installer.rb:129:in\n  <code>block in resolve_dependencies'\n  /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/lib/cocoapods/user_interface.rb:59:in\n  </code>section'\n  /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/lib/cocoapods/installer.rb:128:in\n  <code>resolve_dependencies'\n  /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/lib/cocoapods/installer.rb:104:in\n  </code>install!'\n  /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/lib/cocoapods/command/project.rb:71:in\n  <code>run_install_with_update'\n  /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/lib/cocoapods/command/project.rb:101:in\n  </code>run'\n  /Library/Ruby/Gems/2.0.0/gems/claide-0.9.1/lib/claide/command.rb:312:in\n  <code>run'\n  /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/lib/cocoapods/command.rb:48:in\n  </code>run' /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.38.2/bin/pod:44:in\n  <code>&lt;top (required)&gt;' /usr/bin/pod:23:in</code>load' /usr/bin/pod:23:in\n  `'</p>\n</blockquote>\n\n<p>I've completely uninstalled and reinstalled cocoapods and tried everything else remotely relevant on SO.  To me it smells like an encryption/decryption issue or https/ssl issue.</p>\n\n<p>On the machine having trouble, I did have a pre-beta Xcode installed, but I've since deleted it and made sure it's command line tools are set correctly.</p>\n\n<p>Anyone have suggestion on how to remedy this or diagnosis it further?</p>\n"}, {"tags": ["css", "ruby", "sass", "gulp", "gulp-ruby-sass"], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 4965822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/koFpQ.png?s=128&g=1", "display_name": "CDF", "link": "https://stackoverflow.com/users/4965822/cdf"}, "edited": false, "score": 0, "creation_date": 1443562213, "post_id": 32854032, "comment_id": 53541901, "body": "I was trying to solve it on my side and I cannot get this error :) I upvote your own reply"}, {"owner": {"reputation": 10655, "user_id": 1415038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8304345aa24122753794500b0e3920fb?s=128&d=identicon&r=PG&f=1", "display_name": "woz", "link": "https://stackoverflow.com/users/1415038/woz"}, "reply_to_user": {"reputation": 21753, "user_id": 2065702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ra7Pl.jpg?s=128&g=1", "display_name": "Zach Saucier", "link": "https://stackoverflow.com/users/2065702/zach-saucier"}, "edited": false, "score": 1, "creation_date": 1478740844, "post_id": 32854032, "comment_id": 68278840, "body": "@ZachSaucier Yes, finally I got this working! <b>Restarting the command prompt</b> as the answer says was my issue."}, {"owner": {"reputation": 2753, "user_id": 179531, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e9d2cdde8bdd9e82ae1b8ecb4ec2f563?s=128&d=identicon&r=PG", "display_name": "learning...", "link": "https://stackoverflow.com/users/179531/learning"}, "edited": false, "score": 0, "creation_date": 1554223574, "post_id": 32854032, "comment_id": 97669625, "body": "I installed sass <a href=\"https://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">rubyinstaller.org/downloads</a> and had the environment variable in place as well like <code>PATH=C:\\Ruby23\\bin;%PATH%</code>. The issue in my case was to also run <code>npm install -g gulp-ruby-sass</code>."}], "tags": [], "owner": {"reputation": 221, "user_id": 5177715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rz14f.jpg?s=128&g=1", "display_name": "Strauss808", "link": "https://stackoverflow.com/users/5177715/strauss808"}, "is_accepted": false, "score": 11, "last_activity_date": 1443561979, "creation_date": 1443561979, "answer_id": 32854032, "question_id": 32853703, "link": "https://stackoverflow.com/questions/32853703/gulp-ruby-sass-sass-is-not-recognized-as-an-internal-or-external-command-op/32854032#32854032", "title": "gulp-ruby-sass - &#39;sass&#39; is not recognized as an internal or external command, operable program or batch file", "body": "<p>I've finally found a solution.</p>\n\n<p>I had to manually add a path to my Ruby bin folder in  Control Panel > System > Advanced > Environment Variables. Here i added a new variable named path with a path to my Ruby bin folder (C:\\Ruby22-x64\\bin). </p>\n\n<p>Then I restarted my Node.js command prompt and got the output I was looking for.</p>\n\n<p>Thank you, CDF, for you answer and effort!\nEven though I answered this question myself, I hope it will eventually help other people too.</p>\n"}, {"tags": [], "owner": {"reputation": 7797, "user_id": 960997, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c10ed385c509cc2c7ba59b2eb4c4947a?s=128&d=identicon&r=PG", "display_name": "rnofenko", "link": "https://stackoverflow.com/users/960997/rnofenko"}, "is_accepted": false, "score": 10, "last_activity_date": 1462160125, "creation_date": 1462160125, "answer_id": 36974625, "question_id": 32853703, "link": "https://stackoverflow.com/questions/32853703/gulp-ruby-sass-sass-is-not-recognized-as-an-internal-or-external-command-op/36974625#36974625", "title": "gulp-ruby-sass - &#39;sass&#39; is not recognized as an internal or external command, operable program or batch file", "body": "<p>I had the same error, only in my situation <code>sass</code> package wasn't installed in RubyGem. </p>\n\n<p>You need to execute following command:</p>\n\n<pre><code>gem install sass\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1239, "user_id": 3806549, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100004485368576/picture?type=large", "display_name": "user3806549", "link": "https://stackoverflow.com/users/3806549/user3806549"}, "is_accepted": false, "score": 4, "last_activity_date": 1468853929, "last_edit_date": 1468853929, "creation_date": 1468853569, "answer_id": 38439851, "question_id": 32853703, "link": "https://stackoverflow.com/questions/32853703/gulp-ruby-sass-sass-is-not-recognized-as-an-internal-or-external-command-op/38439851#38439851", "title": "gulp-ruby-sass - &#39;sass&#39; is not recognized as an internal or external command, operable program or batch file", "body": "<p><a href=\"https://i.stack.imgur.com/CYr9g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CYr9g.png\" alt=\"INSTALL RUBY\"></a></p>\n\n<p>Use the Ruby installer and reinstall it. Then check the path checkbox. It should be resolved then. </p>\n\n<ol start=\"2\">\n<li><p>Install Sass Using the Command Prompt</p>\n\n<p>[CMD] + [R]\ntype cmd hit [ENTER]</p>\n\n<p>Type gem install sass </p></li>\n</ol>\n\n<p>If you get an error message then it's likely you will need to use the sudo command to install the Sass gem. It would look like:</p>\n\n<p>sudo gem install sass</p>\n\n<p>4 Reboot the NODE command line. In fact you might want to reboot the system, most users do not do enough of that. </p>\n"}], "owner": {"reputation": 221, "user_id": 5177715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rz14f.jpg?s=128&g=1", "display_name": "Strauss808", "link": "https://stackoverflow.com/users/5177715/strauss808"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18329, "favorite_count": 2, "answer_count": 3, "score": 11, "last_activity_date": 1468853929, "creation_date": 1443560529, "question_id": 32853703, "link": "https://stackoverflow.com/questions/32853703/gulp-ruby-sass-sass-is-not-recognized-as-an-internal-or-external-command-op", "title": "gulp-ruby-sass - &#39;sass&#39; is not recognized as an internal or external command, operable program or batch file", "body": "<p>I'm trying to run gulp-ruby-sass on Windows.</p>\n\n<p>I've already installed Ruby and Sass like that:\n<code>$ gem install sass</code></p>\n\n<p>My gulp.task looks like this:</p>\n\n<pre><code>gulp.task('styles', function() {\n   return sass('src/scss/**/*.scss')\n     .on('error', sass.logError)\n     .pipe(gulp.dest('css'));\n});\n</code></pre>\n\n<p>When I cd into the root directory of my project and run <code>$ gulp styles</code>,\nI get this:</p>\n\n<pre><code>[22:54:52] Using gulpfile c:\\wamp\\www\\wordpress\\\nwp-content\\themes\\bootscores\\gulpfile.js\n[22:54:52] Starting 'styles'...\n[22:54:52] 'sass' is not recognized as an internal or external command,\noperable program or batch file.\nError in plugin 'gulp-ruby-sass'\nMessage:\n    Gem undefined is not installed.\n[22:54:52] Finished 'styles' after 89 ms\n</code></pre>\n\n<p>I've been searching for a solution to this problem for about two hours now and still haven't found one that would help me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "namespaces"], "answers": [{"comments": [{"owner": {"reputation": 936, "user_id": 1947079, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f92c7e88b2c02061df969af94fbeef8?s=128&d=identicon&r=PG", "display_name": "Gray Kemmey", "link": "https://stackoverflow.com/users/1947079/gray-kemmey"}, "edited": false, "score": 0, "creation_date": 1443562370, "post_id": 32853941, "comment_id": 53541968, "body": "Yeah, I figured that was causing a problem, hence the shot in the dark with <code>Object::Foo</code>. Is there a difference between <code>Object::Foo</code> and <code>::Foo</code>? I mean, they evaluate to the same thing, but so does <code>ActiveRecord::Base::Foo</code> and that throws a warning so I figure there could be."}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "reply_to_user": {"reputation": 936, "user_id": 1947079, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f92c7e88b2c02061df969af94fbeef8?s=128&d=identicon&r=PG", "display_name": "Gray Kemmey", "link": "https://stackoverflow.com/users/1947079/gray-kemmey"}, "edited": false, "score": 1, "creation_date": 1443563111, "post_id": 32853941, "comment_id": 53542305, "body": "@GrayKemmey it&#39;s interesting question, I wold recommend to see this article <a href=\"http://makandracards.com/makandra/20633-ruby-constant-lookup-the-good-the-bad-and-the-ugly\" rel=\"nofollow noreferrer\">makandracards.com/makandra/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "is_accepted": true, "score": 3, "last_activity_date": 1443563457, "last_edit_date": 1443563457, "creation_date": 1443561512, "answer_id": 32853941, "question_id": 32853661, "link": "https://stackoverflow.com/questions/32853661/namespaced-model-in-rails-generating-nameerror-uninitialized-constant/32853941#32853941", "title": "Namespaced model in Rails generating NameError: uninitialized constant", "body": "<p>Your problem can be fixed with</p>\n\n<pre><code>::Foo.first\n</code></pre>\n\n<p>Here <code>::Foo</code> indicating the class <code>Foo</code> in top namespace.</p>\n\n<p>You problem comes from the fact, that there is another <code>Foo</code> class in the namespace (<code>Bar</code>) you are working in. So you should be explicit.</p>\n\n<p>As to the question why <code>Object::Foo</code> works (with warnings), it's a (less) known behaviour of name lookup in Ruby. Please see <a href=\"http://makandracards.com/makandra/20633-ruby-constant-lookup-the-good-the-bad-and-the-ugly\" rel=\"nofollow\">this</a> article for more details.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5393814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aad652036bd96c635d5087324344023d?s=128&d=identicon&r=PG&f=1", "display_name": "Ruslan Ryzhkov", "link": "https://stackoverflow.com/users/5393814/ruslan-ryzhkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1443632226, "last_edit_date": 1443632226, "creation_date": 1443627012, "answer_id": 32870095, "question_id": 32853661, "link": "https://stackoverflow.com/questions/32853661/namespaced-model-in-rails-generating-nameerror-uninitialized-constant/32870095#32870095", "title": "Namespaced model in Rails generating NameError: uninitialized constant", "body": "<p>Here's some documentation about the <code>.parent</code> method that should help answer your first question: <a href=\"http://guides.rubyonrails.org/active_support_core_extensions.html#extensions-to-module-parents\" rel=\"nofollow\">http://guides.rubyonrails.org/active_support_core_extensions.html#extensions-to-module-parents</a>. Scroll down to Section 3.3 for the relevant part.</p>\n\n<p>The <code>.parent</code> method comes with Active Support which provides Ruby extensions to Ruby on Rails components. The <code>.parent</code> method is an extension for Modules and it returns the name of the module that contains the current class. So, if you did <code>Bar::Foo.parent</code>, the return value should be <code>Bar</code>. </p>\n\n<p>However, when the class doesn't have an enclosing module, the return value will default to <code>Object</code>. This is what's happening when you do <code>Foo.parent</code> since <code>Foo</code> here refers to the <code>Foo</code> class that is not in the <code>Bar</code> namespace.</p>\n\n<p>Relevant Rails magic: <a href=\"https://github.com/rails/rails/blob/c9bbac46ddfc68caff6cd8a95c8d0fd045bd9201/activesupport/lib/active_support/core_ext/module/introspection.rb\" rel=\"nofollow\">https://github.com/rails/rails/blob/c9bbac46ddfc68caff6cd8a95c8d0fd045bd9201/activesupport/lib/active_support/core_ext/module/introspection.rb</a></p>\n"}], "owner": {"reputation": 936, "user_id": 1947079, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f92c7e88b2c02061df969af94fbeef8?s=128&d=identicon&r=PG", "display_name": "Gray Kemmey", "link": "https://stackoverflow.com/users/1947079/gray-kemmey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1078, "favorite_count": 2, "accepted_answer_id": 32853941, "answer_count": 2, "score": 3, "last_activity_date": 1443632226, "creation_date": 1443560352, "question_id": 32853661, "link": "https://stackoverflow.com/questions/32853661/namespaced-model-in-rails-generating-nameerror-uninitialized-constant", "title": "Namespaced model in Rails generating NameError: uninitialized constant", "body": "<p>I have a folder structure like this:</p>\n\n<pre><code>app/\n  models/\n    bar/\n      foo.rb\n      connection.rb\n    foo.rb\n</code></pre>\n\n<p><code>connection.rb</code> is an \"abstract class\" for connecting to another database, so:</p>\n\n<pre><code>class Bar::Connection &lt; ActiveRecord::Base\n  self.abstract_class = true\n  establish_connection \"outsidedb_#{Rails.env}\"\nend\n</code></pre>\n\n<p><code>bar/foo.rb</code> is for accessing the <code>foos</code> table from <code>outsidedb</code>, so:</p>\n\n<pre><code>class Bar::Foo &lt; Bar::Connection\nend\n</code></pre>\n\n<p>And <code>foo.rb</code> is for accessing the <code>foos</code> table from the app's db, so:</p>\n\n<pre><code>class Foo &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>From the rails console if I do <code>Foo.first</code> or <code>Bar::Foo.first</code> things behave as a I would expect in that I get the first entry from the <code>foos</code> table of the app db and the external db, respectively.</p>\n\n<p>However, if I try to access <code>Foo</code> from within <code>bar/foo.rb</code> I get the following:</p>\n\n<pre><code>class Bar::Foo &lt; Bar::Connection\n  def self.test\n      Bar::Foo.first #=&gt; works\n      Foo.first      #=&gt; NameError: uninitialized constant Bar::Foo::Foo\n  end\n\n  def self.other_test\n    Foo.parent                    #=&gt; Object\n    Foo.superclass                #=&gt; ActiveRecord::Base\n    Object::Foo.first             #=&gt; works\n    ActiveRecord::Base::Foo.first #=&gt; works, but with \"warning: toplevel constant \n                                  #   Foo referenced by ActiveRecord::Base::Foo\n  end\nend\n</code></pre>\n\n<p>I can obviously get things working, but I'm looking for a sounder understanding of what's going on. I'm assuming I'm missing something between Ruby's constant/class evaluation and Rail's builtin auto-loading...</p>\n\n<ol>\n<li>What is <code>.parent</code> returning (not the 'parent' class)?</li>\n<li>Why do I get the error in <code>.test</code>, but I don't get it in the rails console?</li>\n<li>Why does <code>Object::Foo</code> seem to work? Is it the right thing to do?</li>\n<li>Why does <code>ActiveRecord::Base::Foo</code> work, but with a warning?</li>\n<li>There a more rails way to do what I've done without just renaming one of my <code>foo.rb</code> classes?</li>\n</ol>\n\n<p>I'm on <code>Rails '3.2.13'</code> and <code>Ruby 1.9.3-p194</code>, just so you know!</p>\n"}, {"tags": ["ruby", "matrix"], "comments": [{"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "edited": false, "score": 1, "creation_date": 1443558477, "post_id": 32853157, "comment_id": 53539936, "body": "Where is x defined? Shouldn&#39;t it be the other way around? i.e. <code>x = matrix.rows_count</code>"}, {"owner": {"reputation": 13785, "user_id": 3352541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IAKOh.jpg?s=128&g=1", "display_name": "Benoit_11", "link": "https://stackoverflow.com/users/3352541/benoit-11"}, "edited": false, "score": 1, "creation_date": 1443558740, "post_id": 32853157, "comment_id": 53540077, "body": "why is Matlab in the tags?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1443577575, "post_id": 32853157, "comment_id": 53546496, "body": "When you give an example in a question (generally a good thing), all your inputs should be valid Ruby objects. If they are not (as here), brace yoursef for downvotes, even when it&#39;s clear what you mean. It&#39;s also helpful to assign each input to a variable. That way, the variable can be referenced in answers and comments without having to define it. Here you might write <code>arr = [[1,2,3],[4,5,6],[7,8,9]]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": false, "score": 1, "last_activity_date": 1443558635, "creation_date": 1443558635, "answer_id": 32853232, "question_id": 32853157, "link": "https://stackoverflow.com/questions/32853157/determining-the-sum-of-top-left-to-bottom-right-diagonal-values-in-a-matrix-with/32853232#32853232", "title": "determining the sum of top-left to bottom-right diagonal values in a matrix with Ruby?", "body": "<p>This will sum the diagonal values.</p>\n\n<pre><code>matrix = []\nmatrix[0] = [1,2,3]\nmatrix[1] = [4,5,6]\nmatrix[2] = [7,8,9]\n\ndef diagsum(mat)\n  sum = 0\n  mat.each_with_index { |row,i| sum += row[i]  }\n  sum\nend\n\nputs (diagsum matrix) # 15\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 313, "user_id": 5081833, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1429204304074964/picture?type=large", "display_name": "dpg5000", "link": "https://stackoverflow.com/users/5081833/dpg5000"}, "edited": false, "score": 1, "creation_date": 1443561346, "post_id": 32853324, "comment_id": 53541506, "body": "you&#39;re absolutely right on all counts.  I will revise my original query."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1443559024, "creation_date": 1443559024, "answer_id": 32853324, "question_id": 32853157, "link": "https://stackoverflow.com/questions/32853157/determining-the-sum-of-top-left-to-bottom-right-diagonal-values-in-a-matrix-with/32853324#32853324", "title": "determining the sum of top-left to bottom-right diagonal values in a matrix with Ruby?", "body": "<ol>\n<li>Not clear what <code>x</code> is.</li>\n<li>But assuming that it is the number of columns/rows, you have <code>0..x</code>, while the index only goes up to <code>x - 1</code>. You should change it to <code>0...x</code>.</li>\n<li>You are assigning to variable <code>i</code>, whose scope is only in the block.</li>\n<li>You are only using <code>i</code> once, perhaps intended to correspond to either row or column, but not both.</li>\n<li>You are adding the indices instead of the corresponding elements.</li>\n<li><code>each</code> will return the receiver regardless of whatever you get in the blocks.</li>\n<li><code>puts</code> will return <code>nil</code> regardless of whatever you get.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 313, "user_id": 5081833, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1429204304074964/picture?type=large", "display_name": "dpg5000", "link": "https://stackoverflow.com/users/5081833/dpg5000"}, "edited": false, "score": 0, "creation_date": 1443568368, "post_id": 32855117, "comment_id": 53544116, "body": "Wow, thanks Cary!  The beauty of the matrix library!  the splat operator is exactly what I needed."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1443568084, "last_edit_date": 1443568084, "creation_date": 1443567720, "answer_id": 32855117, "question_id": 32853157, "link": "https://stackoverflow.com/questions/32853157/determining-the-sum-of-top-left-to-bottom-right-diagonal-values-in-a-matrix-with/32855117#32855117", "title": "determining the sum of top-left to bottom-right diagonal values in a matrix with Ruby?", "body": "<p>If</p>\n\n<pre><code>arr = [[1,2,3],\n       [4,5,6],\n       [7,8,9]]\n</code></pre>\n\n<p>then:</p>\n\n<pre><code>require 'matrix'\nMatrix[*arr].trace\n  #=&gt; 15\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 5081833, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1429204304074964/picture?type=large", "display_name": "dpg5000", "link": "https://stackoverflow.com/users/5081833/dpg5000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 0, "accepted_answer_id": 32855117, "answer_count": 3, "score": -1, "last_activity_date": 1443666181, "creation_date": 1443558335, "last_edit_date": 1443666181, "question_id": 32853157, "link": "https://stackoverflow.com/questions/32853157/determining-the-sum-of-top-left-to-bottom-right-diagonal-values-in-a-matrix-with", "title": "determining the sum of top-left to bottom-right diagonal values in a matrix with Ruby?", "body": "<p>I have a square matrix of indeterminate row &amp; column length (assume rows and columns are equal as befits a square).</p>\n\n<p>I've plotted out an example matrix as follows:</p>\n\n<pre><code>matrix = [\n  [1, 2, 3],\n  [4, 5, 6],\n  [7, 8, 9]\n ]\n</code></pre>\n\n<p>My goal is to get a sum from top-left to bottom-right of the diagonal values.</p>\n\n<p>Obviously in this example, this is all i'll need:</p>\n\n<pre><code>diagsum = matrix[0][0]+matrix[1][1]+matrix[2][2]\n#=&gt;  15\n</code></pre>\n\n<p>I see the pattern where it's a +1 incremental for each row &amp; column argument in the matrix, so the code i've developed for my matrix of indeterminate length (supplied as the argument to my method <code>diagsum</code> would preferably need to implement some sort of row_count method on my matrix argument.</p>\n"}, {"tags": ["ruby", "puma"], "answers": [{"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 0, "last_activity_date": 1470506855, "last_edit_date": 1470506855, "creation_date": 1470506211, "answer_id": 38807218, "question_id": 32853107, "link": "https://stackoverflow.com/questions/32853107/puma-configuration-file-precedence/38807218#38807218", "title": "Puma configuration file precedence", "body": "<p>Future Mike here with almost a year more of Ruby experience. Looking at the Configuration#load method, there doesn't seem to be a straightforward of accomplishing this. It will choose the environment-based config file if one exists, falling back on the global config file. evanphx <a href=\"https://github.com/puma/puma/commit/f788af0c8f7993899e35994d9c63dce4dd6de299\" rel=\"nofollow\">added</a> a public DSL#load DSL in February that does what you're trying to do with _load_from, so that might be the best route. </p>\n"}], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 38807218, "answer_count": 1, "score": 1, "last_activity_date": 1470506855, "creation_date": 1443558169, "question_id": 32853107, "link": "https://stackoverflow.com/questions/32853107/puma-configuration-file-precedence", "title": "Puma configuration file precedence", "body": "<p>I'd like to take advantage of Puma's automatic loading of environment-specific config (i.e. <code>config/puma/&lt;environment&gt;.rb</code>) but I'd like to have some common (to all environments) config as well. At the moment I'm using the undocumented <code>_load_from</code> Puma DSL to pull in <code>config/puma.rb</code> from <code>config/puma/&lt;environment&gt;.rb</code> but I wonder if there's a better way to do it. Has anyone else tackled this problem and what approach did you take? </p>\n"}]