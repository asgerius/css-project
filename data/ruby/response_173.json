[{"tags": ["ruby-on-rails", "ruby", "validation", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1525368545, "post_id": 50144853, "comment_id": 87339424, "body": "You should probably just write a custom validation method, it&#39;s extremely confusing to use <code>validates presence: true</code> on a field that is meant to contain empty strings. That&#39;s the opposite of what that validator is meant to enforce."}], "tags": [], "owner": {"reputation": 83, "user_id": 5560853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9phvl.jpg?s=128&g=1", "display_name": "James Bush", "link": "https://stackoverflow.com/users/5560853/james-bush"}, "is_accepted": false, "score": 1, "last_activity_date": 1525367580, "last_edit_date": 1525367580, "creation_date": 1525303162, "answer_id": 50144853, "question_id": 50144825, "link": "https://stackoverflow.com/questions/50144825/validate-rails-attribute-presence-but-allow-empty-string/50144853#50144853", "title": "Validate Rails attribute presence but allow empty string", "body": "<p>To allow an empty string, but reject nil in an active record validation callback, use a conditional proc to conditionally require the presence of the attribute if it's not nil.</p>\n\n<p>So the code looks like:</p>\n\n<pre><code>validates :name, presence: true, if: proc { name.nil? }\n</code></pre>\n\n<p>But you probably want to allow null. Then don't validate. Still check for presence? in code for nil or empty string.</p>\n"}, {"tags": [], "owner": {"reputation": 51015, "user_id": 356849, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/INqgP.jpg?s=128&g=1", "display_name": "NullVoxPopuli", "link": "https://stackoverflow.com/users/356849/nullvoxpopuli"}, "is_accepted": false, "score": 4, "last_activity_date": 1525363496, "creation_date": 1525363496, "answer_id": 50159455, "question_id": 50144825, "link": "https://stackoverflow.com/questions/50144825/validate-rails-attribute-presence-but-allow-empty-string/50159455#50159455", "title": "Validate Rails attribute presence but allow empty string", "body": "<p>you could also do:</p>\n\n<pre><code>validates :name, exclusion: { in: [nil] }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 186, "user_id": 1152719, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/10d887ebb67ef4c056903cb531ed95fc?s=128&d=identicon&r=PG", "display_name": "jprince", "link": "https://stackoverflow.com/users/1152719/jprince"}, "edited": false, "score": 4, "creation_date": 1557773229, "post_id": 55162078, "comment_id": 98869601, "body": "<code>allow_blank</code> will also allow <code>nil</code> values, even with <code>presence: true</code>."}], "tags": [], "owner": {"reputation": 890, "user_id": 392348, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cc5149a2a90fceb6a0ef3a89bcff03a4?s=128&d=identicon&r=PG", "display_name": "artfullyContrived", "link": "https://stackoverflow.com/users/392348/artfullycontrived"}, "is_accepted": false, "score": -2, "last_activity_date": 1552564985, "creation_date": 1552564985, "answer_id": 55162078, "question_id": 50144825, "link": "https://stackoverflow.com/questions/50144825/validate-rails-attribute-presence-but-allow-empty-string/55162078#55162078", "title": "Validate Rails attribute presence but allow empty string", "body": "<p>Alternatively</p>\n\n<pre><code>validates :name, presence: true, allow_blank: true\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5560853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9phvl.jpg?s=128&g=1", "display_name": "James Bush", "link": "https://stackoverflow.com/users/5560853/james-bush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2896, "favorite_count": 0, "answer_count": 3, "score": 6, "last_activity_date": 1552564985, "creation_date": 1525302936, "last_edit_date": 1525367828, "question_id": 50144825, "link": "https://stackoverflow.com/questions/50144825/validate-rails-attribute-presence-but-allow-empty-string", "title": "Validate Rails attribute presence but allow empty string", "body": "<p>I want to validate a string attribute is not nil, but allow empty strings.</p>\n\n<p>As in:</p>\n\n<pre><code>validates name: not_nil, allow_empty: true\n</code></pre>\n"}, {"tags": ["ruby", "loops", "caesar-cipher"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1525303619, "post_id": 50144784, "comment_id": 87307918, "body": "<code>&#39;abc xyz&#39;.tr(&#39;a-z&#39;,&#39;d-z&#39; + &#39;a-c&#39; )  #=&gt; &quot;def abc&quot;</code> or a less hard-coded way could be written as: <code>&#39;abc xyz&#39;.tr(&#39;a-z&#39;,(&#39;a&#39;..&#39;z&#39;).to_a.rotate(3).join ) #=&gt; &quot;def abc&quot;</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1525329002, "post_id": 50144784, "comment_id": 87314687, "body": "<code>function Cyphering</code> \u2013 what programming language is that?"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1525342561, "post_id": 50144784, "comment_id": 87322641, "body": "@Stefan also <code>(&#39;a&#39;..&#39;z&#39;).split(&#39;&#39;)</code> gives <code>NoMethodError (undefined method &#39;split&#39; for &quot;a&quot;..&quot;z&quot;:Range)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1525329454, "post_id": 50146943, "comment_id": 87314887, "body": "Maybe you could improve Sagar Pandya&#39;s code \u2013 a single <code>tr</code> call should be enough to replace both, uppercase and lowercase characters. And that <code>+</code> is not really needed."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1525343906, "post_id": 50146943, "comment_id": 87323476, "body": "I thought maybe in your second version you could have a second parameter to determine the rotation."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1525390663, "post_id": 50146943, "comment_id": 87348191, "body": "@Stefan I couldn&#39;t figure out how to get it to work with your suggestions, can you?"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 2, "creation_date": 1525391542, "post_id": 50146943, "comment_id": 87348384, "body": "@lacostenycoder Try this: <code>str.tr(&#39;a-zA-Z&#39;, &#39;d-za-cD-ZA-C&#39;)</code>"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1525412727, "last_edit_date": 1525412727, "creation_date": 1525321434, "answer_id": 50146943, "question_id": 50144784, "link": "https://stackoverflow.com/questions/50144784/letter-cyphering/50146943#50146943", "title": "Letter Cyphering", "body": "<p>Stealing from Sagar's comment but this should work on your example string:</p>\n\n<pre><code>def lame_cipher(str)\n  str.tr('a-zA-Z', 'd-za-cD-ZA-C')\nend\n\nlame_cipher 'Ruby Red !@#$'\n#=&gt; \"Uxeb Uhg !@\\#$\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>def lame_cipher(str, int)\n  cipher = [('a'..'z').to_a,('A'..'Z').to_a].map{|arr| arr.rotate(int) }.join\n  str.tr('a-zA-Z', cipher)\nend\n\nlame_cipher('Ruby Red !@#$',3)\n#=&gt; \"Uxeb Uhg !@\\#$\"\n\n#This one can also decode:\nlame_cipher(\"Uxeb Uhg !@\\#$\", -3)\n#=&gt; \"Ruby Red !@\\#$\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1525470826, "post_id": 50151241, "comment_id": 87384471, "body": "@lacostenycoder No, your <code>String#tr</code> solution is faster. I suspect your benchmark included the &quot;startup time&quot; of your solution\u2014but not mine\u2014in each iteration. I refactored your solution a bit and it&#39;s about 7.5X faster than mine."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 1, "last_activity_date": 1525471019, "last_edit_date": 1525471019, "creation_date": 1525338873, "answer_id": 50151241, "question_id": 50144784, "link": "https://stackoverflow.com/questions/50144784/letter-cyphering/50151241#50151241", "title": "Letter Cyphering", "body": "<p>I like the <code>String#tr</code> solutions best, but here's another way to do it:</p>\n\n<pre><code>class Rot\n  UPPER = ('A'.ord .. 'Z'.ord).freeze\n  LOWER = ('a'.ord .. 'z'.ord).freeze\n\n  attr_reader :n\n\n  def initialize(n=13)\n    @n = n\n  end\n\n  def cipher(str)\n    str.unpack('U*').map do |o|\n      if UPPER.cover?(o)\n        UPPER.begin + (o - UPPER.begin + n) % UPPER.size\n      elsif LOWER.cover?(o)\n        LOWER.begin + (o - LOWER.begin + n) % LOWER.size\n      else\n        o\n      end\n    end.pack('U*')\n  end\nend\n\nrot = Rot.new(3)\nrot.cipher(\"Hello, world!\") # =&gt; Khoor, zruog!\n</code></pre>\n\n<p>It works by breaking up and adjusting the codepoints selected by the two ranges defined as class constants. </p>\n\n<hr>\n\n<p>Here's a refactored version of @lacostenycoder's <code>String#tr</code> solution:</p>\n\n<pre><code>class Lame\n  UPPER = ('A' .. 'Z').to_a.freeze\n  LOWER = ('a' .. 'z').to_a.freeze\n\n  attr_reader :to\n\n  def initialize(n=13)\n    @to = [LOWER, UPPER].map { |a| a.rotate(n) }.join\n  end\n\n  def cipher(str)\n    str.tr('a-zA-Z', to)\n  end\nend\n\nrequire 'benchmark/ips'\n\nlame = Lame.new\nrot = Rot.new\nstr = 'sphinx of black quartz, judge my vow'.freeze\n\nBenchmark.ips do |x|\n  x.report('tr') { lame.cipher(str) }\n  x.report('unpack') { rot.cipher(str) }\nend\n</code></pre>\n\n<p>And benchmark results:</p>\n\n<pre><code>                  tr    475.305k (\u00b1 4.5%) i/s -      2.410M in   5.081979s\n              unpack     64.604k (\u00b1 3.5%) i/s -    323.493k in   5.013385s\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 8286358, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/405e78d1a1ffc5810e717ec12205fda9?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/8286358/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1525471019, "creation_date": 1525302574, "last_edit_date": 1525344213, "question_id": 50144784, "link": "https://stackoverflow.com/questions/50144784/letter-cyphering", "title": "Letter Cyphering", "body": "<p>I am very lost on this, so any help would be appreciated.  </p>\n\n<p>I am trying to take sentences as inputs and return an output with all of the letters 3 places after the value given.  So \"A\" would turn into \"D\", \"B\" into \"E\" and so on.  </p>\n\n<p>I think would start out with values like:</p>\n\n<pre><code>Alphabet = ('a'..'z').split('')\nfunction Cyphering\n   precypheredLeters = inputSentence.split('')\n   precypheredLeters.each do |x|\n       if \n</code></pre>\n\n<p>After that bit of code I want to give \"x\" an index value (like if \"x\" is equal to the letter \"C\" the index value should be 3, then I can add 3 more onto that turning it into \"F\".</p>\n\n<p>Also if my inputSentence is \"Ruby Red !@#$\", how do I return the value for spaces and symbols if I want them to remain the same?</p>\n\n<p>And if a letter input is \"Z\", i'd want it to go from Z => 26 to C => 3, and \"Y\" would turn into \"B\".</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "matrix", "average", "ruby-1.8.7"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1525301517, "post_id": 50144492, "comment_id": 87307490, "body": "<a href=\"http://ruby-doc.org/stdlib-1.8.7/libdoc/matrix/rdoc/Matrix.html\" rel=\"nofollow noreferrer\"><code>Matrix</code></a> has <code>rows</code>, <code>columns</code>, <code>row_size</code>, <code>column_size</code>, <code>[i,j]</code>, ... methods (even in 1.8.7), that should be enough to compute your averages. Can you show us what you&#39;ve tried? Is the problem just that you end up doing integer division?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1525302018, "post_id": 50144492, "comment_id": 87307604, "body": "<a href=\"http://ruby-doc.org/core-1.8.7/\" rel=\"nofollow noreferrer\">ruby-doc.org/core-1.8.7</a> . It&#39;s all there."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1525329838, "post_id": 50144675, "comment_id": 87315072, "body": "You could also write <code>vector.inject(:+).fdiv(vector.size)</code> or (Ruby v2.4+) <code>vector.sum.fdiv(vector.size)</code>. This uses <a href=\"http://ruby-doc.org/core-2.4.0/Integer.html#method-i-fdiv\" rel=\"nofollow noreferrer\">Integer#fdiv</a>, <a href=\"http://ruby-doc.org/core-2.4.0/Float.html#method-i-fdiv\" rel=\"nofollow noreferrer\">Float#fdiv</a> or <a href=\"http://ruby-doc.org/core-2.4.0/Numeric.html#method-i-fdiv\" rel=\"nofollow noreferrer\">Numeric#fdiv</a>, depending on the receiver&#39;s class (but I haven&#39;t checked to see when these methods were introduced)."}], "tags": [], "owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "is_accepted": false, "score": 2, "last_activity_date": 1525303123, "last_edit_date": 1525303123, "creation_date": 1525301755, "answer_id": 50144675, "question_id": 50144492, "link": "https://stackoverflow.com/questions/50144492/how-to-get-an-average-from-matrixarray/50144675#50144675", "title": "How to get an average from matrix[array]", "body": "<p>Here's one way to calculate the average of a specific row or column within a given matrix:</p>\n\n<pre><code>require 'matrix'\n\nm = Matrix[\n            [1, 2, 3],\n            [4, 5, 6],\n            [7, 8, 9]\n          ]\n\ndef vector_average(matrix, vector_type, vector_index)\n  vector = matrix.send(vector_type, vector_index)\n  vector.inject(:+) / vector.size.to_f\nend\n\n# Average of first row\nvector_average(m, :row, 0)\n# =&gt; 2.0\n\n# Average of second column\nvector_average(m, :column, 1)\n# =&gt; 5.0\n</code></pre>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1525375289, "last_edit_date": 1525375289, "creation_date": 1525331628, "answer_id": 50148988, "question_id": 50144492, "link": "https://stackoverflow.com/questions/50144492/how-to-get-an-average-from-matrixarray/50148988#50148988", "title": "How to get an average from matrix[array]", "body": "<p>If you wish to compute all row averages and/or all column averages you could do the following.</p>\n\n<pre><code>require 'matrix'\n\ndef row_averages(m)\n  (m * Vector[*[1.0/m.column_size]*m.column_size]).to_a\nend\n\ndef col_averages(m)\n  row_averages(m.transpose)\nend\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>m = Matrix[[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n\nrow_averages(m)\n  #=&gt; [2.0, 5.0, 8.0]\ncol_averages(m)\n  #=&gt; [3.9999999999999996, 5.0, 6.0]\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/matrix/rdoc/Matrix.html\" rel=\"nofollow noreferrer\">Matrix</a> and <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/matrix/rdoc/Vector.html\" rel=\"nofollow noreferrer\">Vector</a>.</p>\n"}], "owner": {"reputation": 19, "user_id": 6151300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-tHcDiut-lA0/AAAAAAAAAAI/AAAAAAAAAFQ/A-GismaRC68/photo.jpg?sz=128", "display_name": "GothLoli", "link": "https://stackoverflow.com/users/6151300/gothloli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1525375289, "creation_date": 1525300252, "last_edit_date": 1525300975, "question_id": 50144492, "link": "https://stackoverflow.com/questions/50144492/how-to-get-an-average-from-matrixarray", "title": "How to get an average from matrix[array]", "body": "<p>(Before start, I am using Ruby 1.8.7, so I won't be able to use fancy stuff.)</p>\n\n<p>As title says, I want to calculate the average of column or row.\nBut, I can't even find the way to traverse/iterate Matrix form of array from online.</p>\n\n<p>Let's say you have this</p>\n\n<pre><code>require 'mathn'\n\nm = Matrix[[1,2,3],[4,5,6],[7,8,9]]\n</code></pre>\n\n<p>Somehow the way I iterate a simple 3x3 array doesn't work with Matrix form of array (Or may be just my code is weird)..What is the proper way to do this? Also, is there a syntax that calculate row and column average of matrix??</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "shell", "raspberry-pi"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 3, "creation_date": 1525300295, "post_id": 50144401, "comment_id": 87307174, "body": "Hmm. <code>[ yo&quot;; rm -rf &#47;; echo &quot;  ]</code> comes to mind. C-;"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1525301028, "post_id": 50144401, "comment_id": 87307376, "body": "Save yourself the trouble and use <a href=\"http://ruby-doc.org/stdlib-2.5.0/libdoc/open3/rdoc/index.html\" rel=\"nofollow noreferrer\"><code>Open3</code></a> or the multi-argument form of <a href=\"http://ruby-doc.org/core-2.5.0/Kernel.html#method-i-system\" rel=\"nofollow noreferrer\"><code>Kernel#system</code></a>. Don&#39;t waste time and effort quoting your way through the shell when you don&#39;t really need the shell at all."}, {"owner": {"reputation": 1392, "user_id": 2922609, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/JRouJ.png?s=128&g=1", "display_name": "ivanibash", "link": "https://stackoverflow.com/users/2922609/ivanibash"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1525301214, "post_id": 50144401, "comment_id": 87307422, "body": "@muistooshort could you elaborate how the two are different? Are you saying that the way I have it in my example needlessly launches the shell and <code>Kernel#system</code> doesn&#39;t?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1525301723, "post_id": 50144401, "comment_id": 87307545, "body": "Backticks and <code>system(cmd)</code> launch a shell to parse the command line (which you just built), then the shell executes the command. Using <code>Open3</code> or <code>system(cmd, arg1, arg2, ...)</code> execute the command directly without involving a shell at all. The shell is where all the quoting problems come in so not involving a shell is a convenient way to cut out a whole class of errors and vulnerabilities."}, {"owner": {"reputation": 1392, "user_id": 2922609, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/JRouJ.png?s=128&g=1", "display_name": "ivanibash", "link": "https://stackoverflow.com/users/2922609/ivanibash"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1525301805, "post_id": 50144401, "comment_id": 87307563, "body": "@muistooshort awesome, thanks for clarifying, would be great if you could write an answer with basically that ^"}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 3, "last_activity_date": 1553023805, "last_edit_date": 1553023805, "creation_date": 1525303157, "answer_id": 50144852, "question_id": 50144401, "link": "https://stackoverflow.com/questions/50144401/is-it-dangerous-to-use-a-param-passed-by-the-user-as-a-part-of-the-shell-command/50144852#50144852", "title": "Is it dangerous to use a param passed by the user as a part of the shell command executed on the server side", "body": "<p>What you're doing is dangerous. Consider things like this:</p>\n\n<pre><code>danger = 'antisocial tendencies\" $(ls) \"'\n`echo \"#{danger}\"`\n</code></pre>\n\n<p>and think about what else you could do besides running <code>ls</code>.</p>\n\n<p>You could use <code>Shellwords</code> (as in <a href=\"https://stackoverflow.com/q/17476389/479863\"><strong>How to escape strings for terminal in Ruby?</strong></a>) but that would mean doing this:</p>\n\n<ol>\n<li>Use <code>Shellwords</code> to escape <code>params['phrase']</code>.</li>\n<li>Use string interpolation to build a command line.</li>\n<li>Hand that command line to the backticks.</li>\n<li>Execute a shell.</li>\n<li>Let the shell parse the command line you just built.</li>\n<li>Get the shell to run <code>espeak</code> with the desired argument.</li>\n</ol>\n\n<p>You could avoid that by using the tools in <a href=\"https://ruby-doc.org/stdlib/libdoc/open3/rdoc/index.html\" rel=\"nofollow noreferrer\"><code>Open3</code></a> or the multi-argument form of <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-system\" rel=\"nofollow noreferrer\"><code>Kernel#system</code></a> to jump directly to step <strong>(6)</strong> without involving a shell at all.</p>\n\n<p>The shell is where the quoting problems come in so not involving a shell is a convenient way to cut out a whole class of errors and vulnerabilities. Avoiding the shell is also more efficient (although you'd be hard pressed to notice) and flexible as a bonus.</p>\n\n<hr>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/1887370/sakurashinken\">sakurashinken</a> for finding the sort-of-duplicate I linked to above, shame you deleted your answer.</p>\n"}], "owner": {"reputation": 1392, "user_id": 2922609, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/JRouJ.png?s=128&g=1", "display_name": "ivanibash", "link": "https://stackoverflow.com/users/2922609/ivanibash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 50144852, "answer_count": 1, "score": 2, "last_activity_date": 1553023805, "creation_date": 1525299714, "last_edit_date": 1525300179, "question_id": 50144401, "link": "https://stackoverflow.com/questions/50144401/is-it-dangerous-to-use-a-param-passed-by-the-user-as-a-part-of-the-shell-command", "title": "Is it dangerous to use a param passed by the user as a part of the shell command executed on the server side", "body": "<p>I have a rails app with an interface like this:</p>\n\n<pre><code>&lt;%= form_tag 'sound/speak', remote: true do %&gt;\n  &lt;input type='text' name='phrase'&gt;\n  &lt;%= submit_tag 'Say' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Which sends a request to a controller:</p>\n\n<pre><code>  def speak\n    `espeak \"#{params['phrase']}\"`\n  end\n</code></pre>\n\n<p>It works but is this a bad idea in terms of safety? I'm just trying to make my server (raspberry pi) to speak whatever I write into the textbox. However in future this might be used by a group of friends. In this case I need to make sure it's impossible to, say, escape the quotes and the \"say\" command and execute a malicious script/command on the server.  So, am I safe with this code?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "searchkick", "solidus"], "answers": [{"tags": [], "owner": {"reputation": 3371, "user_id": 454421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8395e4e1323f3cccec62a53d700db13e?s=128&d=identicon&r=PG", "display_name": "Brett Allred", "link": "https://stackoverflow.com/users/454421/brett-allred"}, "is_accepted": true, "score": 0, "last_activity_date": 1532815509, "creation_date": 1532815509, "answer_id": 51575607, "question_id": 50144101, "link": "https://stackoverflow.com/questions/50144101/solidus-searchkick-undefined-method-deep-symbolize-keys/51575607#51575607", "title": "solidus_searchkick - undefined method `deep_symbolize_keys&#39;", "body": "<p>This is an issue with the deprecated method <code>deep_symbolize_keys</code> in Rails 5.1.  I just submitted a Pull Request for the solidus_searchkick gem.  You can find it here <a href=\"https://github.com/elevatorup/solidus_searchkick/pull/6/files\" rel=\"nofollow noreferrer\">https://github.com/elevatorup/solidus_searchkick/pull/6/files</a></p>\n\n<p>If you point your solidus_searchkick gem to that branch it will work. </p>\n"}], "owner": {"reputation": 330, "user_id": 7009277, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k8xOf9u-6cs/AAAAAAAAAAI/AAAAAAAABvk/z92X2OLMDhs/photo.jpg?sz=128", "display_name": "F&#225;bio Ara&#250;jo", "link": "https://stackoverflow.com/users/7009277/f%c3%a1bio-ara%c3%bajo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "accepted_answer_id": 51575607, "answer_count": 1, "score": 0, "last_activity_date": 1532815509, "creation_date": 1525298059, "question_id": 50144101, "link": "https://stackoverflow.com/questions/50144101/solidus-searchkick-undefined-method-deep-symbolize-keys", "title": "solidus_searchkick - undefined method `deep_symbolize_keys&#39;", "body": "<p>I am using Solidus and I want to implement a better search wiht elasticsearch, I'm using solidus_searchkick to do that. But I get the following error:</p>\n\n<pre><code>undefined method 'deep_symbolize_keys' for #&lt;ActionController::Parameters:0x0000556eae99cda8&gt;\n</code></pre>\n\n<p>At Spree::HomeController#index, that has:</p>\n\n<pre><code>Spree::HomeController.class_eval do\n    def index\n        @searcher = build_searcher(params.merge(include_images: true))\n        @products = @searcher.retrieve_products\n        @taxonomies = Spree::Taxonomy.includes(root: :children)\n    end\nend\n</code></pre>\n\n<p>I have NOT changed anything at Solidus' search options.</p>\n\n<p>I get this error right after I run 'bundle install', installs everything just fine.\nThen, I run 'rails s' and I get this error when I try to get my home or any other page that shows me any product.</p>\n\n<hr>\n\n<p>Versions:</p>\n\n<ul>\n<li>Rails: <strong>5.1.6</strong></li>\n<li>Ruby: <strong>2.5.1</strong></li>\n<li>solidus_searchkick: <strong>0.3.4</strong></li>\n<li>Solidus: <strong>2.5.0</strong></li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "edited": false, "score": 0, "creation_date": 1525292004, "post_id": 50142766, "comment_id": 87303813, "body": "looks a valid json. postgres is very good with json from 9.4 (jsonb) and extremely good from 9.6"}, {"owner": {"reputation": 5149, "user_id": 2708460, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/78fb5597f10a8f25d2a69cbf70fd6ecd?s=128&d=identicon&r=PG&f=1", "display_name": "almo", "link": "https://stackoverflow.com/users/2708460/almo"}, "reply_to_user": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "edited": false, "score": 0, "creation_date": 1525292324, "post_id": 50142766, "comment_id": 87303960, "body": "Yes, it&#39;s Json, but the question is if I&#39;d better store the data to the DB first."}, {"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1525293002, "post_id": 50142766, "comment_id": 87304310, "body": "In my experience, it&#39;s typically better to get the database to do the hard work, especially when the data is static like in your example. It&#39;s hard to say for certain in your case, though, as you haven&#39;t given many details."}], "answers": [{"tags": [], "owner": {"reputation": 1546, "user_id": 1376201, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbb3062bb6626fd79d1b118d34829342?s=128&d=identicon&r=PG", "display_name": "toobulkeh", "link": "https://stackoverflow.com/users/1376201/toobulkeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1525318317, "creation_date": 1525318317, "answer_id": 50146525, "question_id": 50142766, "link": "https://stackoverflow.com/questions/50142766/work-filter-search-etc-directly-on-hash-from-api-or-store-in-db-first/50146525#50146525", "title": "Work (filter, search etc.) directly on hash from API or store in DB first?", "body": "<p>It depends on what exactly you're doing with the data.</p>\n\n<ol>\n<li><p>If the data changes between requests frequently and you only need to run algorithms on it once, just do it in memory:\nIt's already in memory in an efficient format (JSON) when you grab it from the API.\nParsing it into ActiveRecord and storing to disk will be much slower.</p></li>\n<li><p>If you want to run analytics async, or you need to normalize the data for some reason, then you'll need to Objectify the data. It'll be slower, but it's often easier to reason around (and use Ruby or SQL naturally instead of confusing hash management)</p></li>\n<li><p>If you need to access it later, look into skipping ActiveRecord and leaving the database layer just for persistence.</p></li>\n</ol>\n"}], "owner": {"reputation": 5149, "user_id": 2708460, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/78fb5597f10a8f25d2a69cbf70fd6ecd?s=128&d=identicon&r=PG&f=1", "display_name": "almo", "link": "https://stackoverflow.com/users/2708460/almo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525318317, "creation_date": 1525291762, "last_edit_date": 1525292489, "question_id": 50142766, "link": "https://stackoverflow.com/questions/50142766/work-filter-search-etc-directly-on-hash-from-api-or-store-in-db-first", "title": "Work (filter, search etc.) directly on hash from API or store in DB first?", "body": "<p>I am starting to work with big data returned from an API. The API returns thousands of lines in one request like this:</p>\n\n<pre><code>\"2000-01-06\": {\n        \"1. open\": \"112.1900\",\n        \"2. high\": \"113.8700\",\n        \"3. low\": \"108.3700\",\n        \"4. close\": \"110.0000\",\n        \"5. volume\": \"27488300\"\n    },\n    \"2000-01-05\": {\n        \"1. open\": \"111.1200\",\n        \"2. high\": \"116.3700\",\n        \"3. low\": \"109.3700\",\n        \"4. close\": \"113.8100\",\n        \"5. volume\": \"32029800\"\n    },\n    \"2000-01-04\": {\n        \"1. open\": \"113.5600\",\n        \"2. high\": \"117.1200\",\n        \"3. low\": \"112.2500\",\n        \"4. close\": \"112.6200\",\n        \"5. volume\": \"27059500\"\n    },\n    \"2000-01-03\": {\n        \"1. open\": \"117.3700\",\n        \"2. high\": \"118.6200\",\n        \"3. low\": \"112.0000\",\n        \"4. close\": \"116.5600\",\n        \"5. volume\": \"26614200\"\n    }\n</code></pre>\n\n<p>In the next step I want to work with the data, filter, search, build averages etc. Would it be smart to store the data in my DB first and the work with it or use directly the hash from the api? I am using RoR and Postgres.</p>\n\n<p>My idea is to store the data in a relational DB with columns for date, open, high etc.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler", "solidus"], "comments": [{"owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "edited": false, "score": 0, "creation_date": 1525292730, "post_id": 50142691, "comment_id": 87304174, "body": "Delete the gemlock file and run <code>bundle install</code>. If the issue persists- post your output."}, {"owner": {"reputation": 23, "user_id": 7069424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4N1K5.jpg?s=128&g=1", "display_name": "bazfer", "link": "https://stackoverflow.com/users/7069424/bazfer"}, "reply_to_user": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "edited": false, "score": 0, "creation_date": 1525294273, "post_id": 50142691, "comment_id": 87304901, "body": "Tried it, not a difference: Bundler could not find compatible versions for gem &quot;actionmailer&quot;:   In Gemfile:     rails (= 5.1) was resolved to 5.1.0, which depends on       actionmailer (= 5.1.0)      solidus_core (~&gt; 2.5.0) was resolved to 2.5.0, which depends on       actionmailer (~&gt; 5.1.0)"}, {"owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "edited": false, "score": 0, "creation_date": 1525295578, "post_id": 50142691, "comment_id": 87305459, "body": "Just curious- have you tried different versions of solidus_core?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7069424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4N1K5.jpg?s=128&g=1", "display_name": "bazfer", "link": "https://stackoverflow.com/users/7069424/bazfer"}, "edited": false, "score": 0, "creation_date": 1525294081, "post_id": 50143068, "comment_id": 87304804, "body": "Tried doing this, gettin similar errors: Bundler could not find compatible versions for gem &quot;actionpack&quot;:   In Gemfile:     rails (~&gt; 5.1) was resolved to 5.1.6, which depends on       actionpack (= 5.1.6)  solidus_core (~&gt; 2.5.0) was resolved to 2.5.0, which depends on       ransack (~&gt; 1.8) was resolved to 1.8.8, which depends on         actionpack (&gt;= 3.0)      solidus_core (~&gt; 2.5.0) was resolved to 2.5.0, which depends on       actionpack (~&gt; 5.1.0)"}, {"owner": {"reputation": 947, "user_id": 367480, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/DdQe5.jpg?s=128&g=1", "display_name": "Ilya Vassilevsky", "link": "https://stackoverflow.com/users/367480/ilya-vassilevsky"}, "reply_to_user": {"reputation": 23, "user_id": 7069424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4N1K5.jpg?s=128&g=1", "display_name": "bazfer", "link": "https://stackoverflow.com/users/7069424/bazfer"}, "edited": false, "score": 0, "creation_date": 1525371515, "post_id": 50143068, "comment_id": 87340936, "body": "I have no other ideas then :("}], "tags": [], "owner": {"reputation": 947, "user_id": 367480, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/DdQe5.jpg?s=128&g=1", "display_name": "Ilya Vassilevsky", "link": "https://stackoverflow.com/users/367480/ilya-vassilevsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1525292936, "creation_date": 1525292936, "answer_id": 50143068, "question_id": 50142691, "link": "https://stackoverflow.com/questions/50142691/conflict-when-running-bundle-update-among-gem-dependencies-using-equals-to-and-t/50143068#50143068", "title": "Conflict when running Bundle update among gem dependencies using equals-to and twiddle-wakka against the same version", "body": "<p>I recommend changing <code>rails</code> version specification to \"twiddle-wakka\" as well. It will let you apply bugfix updates (5.1.0 -> 5.1.1, etc) without changing <code>Gemfile</code>:</p>\n\n<pre><code>gem 'rails', '~&gt; 5.1.0'\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7069424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4N1K5.jpg?s=128&g=1", "display_name": "bazfer", "link": "https://stackoverflow.com/users/7069424/bazfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525292936, "creation_date": 1525291492, "question_id": 50142691, "link": "https://stackoverflow.com/questions/50142691/conflict-when-running-bundle-update-among-gem-dependencies-using-equals-to-and-t", "title": "Conflict when running Bundle update among gem dependencies using equals-to and twiddle-wakka against the same version", "body": "<p>Running across this issue using Bundle Update. Shouldn't the tilde-greater-than or twiddle-wakka and equals-to both resolve to 5.1.0?</p>\n\n<pre><code>Bundler could not find compatible versions for gem \"actionmailer\":\n      In Gemfile:\n        rails (= 5.1) was resolved to 5.1.0, which depends on\n          actionmailer (= 5.1.0)\n\n        solidus_core (~&gt; 2.5.0) was resolved to 2.5.0, which depends on\n          actionmailer (~&gt; 5.1.0)\n</code></pre>\n\n<p>Any pointers are appreciated. Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1525293301, "post_id": 50142680, "comment_id": 87304457, "body": "So what did you try so far?"}], "answers": [{"tags": [], "owner": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "is_accepted": false, "score": 0, "last_activity_date": 1525293871, "creation_date": 1525293871, "answer_id": 50143285, "question_id": 50142680, "link": "https://stackoverflow.com/questions/50142680/filter-date-range-from-object-with-date-as-key-in-ruby/50143285#50143285", "title": "Filter date range from object with date as key in Ruby", "body": "<p>As you already have hash, you can try use select:</p>\n\n<pre><code>hash.select { |k, _| Date.parse(k) &lt; Date.parse(\"2016-12-10\") &amp;&amp; Date.parse(k) &gt; Date.parse(\"2016-12-01\")}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1525294207, "post_id": 50143286, "comment_id": 87304868, "body": "<code>response</code> is not a valid ruby hash so you need to parse it first"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1525297603, "post_id": 50143286, "comment_id": 87306285, "body": "@MartinZinovsky I was missing a closing <code>}</code>; now its valid. Thank you!"}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 1, "last_activity_date": 1525297451, "last_edit_date": 1525297451, "creation_date": 1525293890, "answer_id": 50143286, "question_id": 50142680, "link": "https://stackoverflow.com/questions/50142680/filter-date-range-from-object-with-date-as-key-in-ruby/50143286#50143286", "title": "Filter date range from object with date as key in Ruby", "body": "<p>You can use <code>select</code>, like this:</p>\n\n<pre><code>response = {\n  \"2016-12-08\": {\n    \"1. open\": \"61.3000\",\n    \"2. high\": \"61.5800\",\n    \"3. low\": \"60.8400\",\n    \"4. close\": \"61.0100\",\n    \"5. volume\": \"21220753\"\n  },\n  \"2016-12-07\": {\n    \"1. open\": \"60.0100\",\n    \"2. high\": \"61.3800\",\n    \"3. low\": \"59.8000\",\n    \"4. close\": \"61.3700\",\n    \"5. volume\": \"30808969\"\n  },\n  \"2016-12-06\": {\n    \"1. open\": \"60.4300\",\n    \"2. high\": \"60.4600\",\n    \"3. low\": \"59.8000\",\n    \"4. close\": \"59.9500\",\n    \"5. volume\": \"19907035\"\n  }\n}\n\nstart_date = Date.new(2016, 12, 6)\nend_date   = Date.new(2016, 12, 7)\n\nresponse.select { |k, _| Date.parse(k.to_s) &gt;= start_date &amp;&amp; Date.parse(k.to_s) &lt;= end_date }\n#=&gt; {\n#    :\"2016-12-07\"=&gt;{:\"1. open\"=&gt;\"60.0100\", :\"2. high\"=&gt;\"61.3800\", :\"3. low\"=&gt;\"59.8000\", :\"4. close\"=&gt;\"61.3700\", :\"5. volume\"=&gt;\"30808969\"},\n#    :\"2016-12-06\"=&gt;{:\"1. open\"=&gt;\"60.4300\", :\"2. high\"=&gt;\"60.4600\", :\"3. low\"=&gt;\"59.8000\", :\"4. close\"=&gt;\"59.9500\", :\"5. volume\"=&gt;\"19907035\"}\n#   } \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 269, "user_id": 5677587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S2Q4c.png?s=128&g=1", "display_name": "ragurney", "link": "https://stackoverflow.com/users/5677587/ragurney"}, "is_accepted": false, "score": 0, "last_activity_date": 1525294348, "creation_date": 1525294348, "answer_id": 50143389, "question_id": 50142680, "link": "https://stackoverflow.com/questions/50142680/filter-date-range-from-object-with-date-as-key-in-ruby/50143389#50143389", "title": "Filter date range from object with date as key in Ruby", "body": "<p>One way to do it would be using <a href=\"https://apidock.com/ruby/Hash/select\" rel=\"nofollow noreferrer\"><code>Hash#select</code></a> and a range:</p>\n\n<pre><code>def filter_dates(hash, first, last)\n  range = Date.parse(first)..Date.parse(last)\n  hash.select { |k, _| range.include?(Date.parse(k)) }\nend\n</code></pre>\n"}], "owner": {"reputation": 5149, "user_id": 2708460, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/78fb5597f10a8f25d2a69cbf70fd6ecd?s=128&d=identicon&r=PG&f=1", "display_name": "almo", "link": "https://stackoverflow.com/users/2708460/almo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1525297451, "creation_date": 1525291419, "question_id": 50142680, "link": "https://stackoverflow.com/questions/50142680/filter-date-range-from-object-with-date-as-key-in-ruby", "title": "Filter date range from object with date as key in Ruby", "body": "<p>I am using the AlphaVantage API (<a href=\"https://www.alphavantage.co/documentation/#daily\" rel=\"nofollow noreferrer\">https://www.alphavantage.co/documentation/#daily</a>) to get daily stock data. Unfortunately the API does not offer the option to get only data for a specific date range. It returns always all data from the last 20 years. The hash it returns contains the date as a key:</p>\n\n<pre><code> \"2016-12-08\": {\n        \"1. open\": \"61.3000\",\n        \"2. high\": \"61.5800\",\n        \"3. low\": \"60.8400\",\n        \"4. close\": \"61.0100\",\n        \"5. volume\": \"21220753\"\n    },\n    \"2016-12-07\": {\n        \"1. open\": \"60.0100\",\n        \"2. high\": \"61.3800\",\n        \"3. low\": \"59.8000\",\n        \"4. close\": \"61.3700\",\n        \"5. volume\": \"30808969\"\n    },\n    \"2016-12-06\": {\n        \"1. open\": \"60.4300\",\n        \"2. high\": \"60.4600\",\n        \"3. low\": \"59.8000\",\n        \"4. close\": \"59.9500\",\n        \"5. volume\": \"19907035\"\n    },\n</code></pre>\n\n<p>How can I select only the entries for a give time range, eg. 2016-12-01 until 2016-12-10? I understand that I always will get the full data and will have do to the filtering on the returned hash.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 0, "creation_date": 1525291777, "post_id": 50142627, "comment_id": 87303705, "body": "Also: edit your question to show how you executed this at the command line, and any output."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1525291871, "post_id": 50142627, "comment_id": 87303744, "body": "Indentation and spacing go a long way."}, {"owner": {"reputation": 1134, "user_id": 5773776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-FfkqR5SoZu8/AAAAAAAAAAI/AAAAAAAAAIw/HvofQWINxs4/photo.jpg?sz=128", "display_name": "Random Channel", "link": "https://stackoverflow.com/users/5773776/random-channel"}, "edited": false, "score": 0, "creation_date": 1525292014, "post_id": 50142627, "comment_id": 87303820, "body": "indentation as far as I know isn&#39;t necessary at all in Ruby, but i could be wrong."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1525292176, "post_id": 50142627, "comment_id": 87303895, "body": "&quot;the program terminates&quot; - and supposedly it prints an error message?"}, {"owner": {"reputation": 1134, "user_id": 5773776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-FfkqR5SoZu8/AAAAAAAAAAI/AAAAAAAAAIw/HvofQWINxs4/photo.jpg?sz=128", "display_name": "Random Channel", "link": "https://stackoverflow.com/users/5773776/random-channel"}, "edited": false, "score": 0, "creation_date": 1525292214, "post_id": 50142627, "comment_id": 87303912, "body": "it doesn&#39;t print an error message as far as I know, it just terminates."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1525292334, "post_id": 50142627, "comment_id": 87303964, "body": "how do you run it? double clicking on a script file? Don&#39;t do that. run a shell/terminal and run <code>ruby my_file.rb</code> there."}, {"owner": {"reputation": 1134, "user_id": 5773776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-FfkqR5SoZu8/AAAAAAAAAAI/AAAAAAAAAIw/HvofQWINxs4/photo.jpg?sz=128", "display_name": "Random Channel", "link": "https://stackoverflow.com/users/5773776/random-channel"}, "edited": false, "score": 0, "creation_date": 1525292744, "post_id": 50142627, "comment_id": 87304181, "body": "I did, and I put the error output in the question."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1525293310, "post_id": 50142627, "comment_id": 87304461, "body": "@RandomChannel: as you can see from the error message, name <code>username</code> is not known in the <code>checkusername</code>. It is local variable to <code>login</code>. Other methods can&#39;t see it."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1525427292, "post_id": 50142627, "comment_id": 87361143, "body": "@RandomChannel No it&#39;s not necessary for the parser. But it&#39;s good practice that helps humans read code, which also helps fix errors. Idiomatic Ruby uses two-spaces as a standard which you should adhere to."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 5, "creation_date": 1525293496, "post_id": 50143121, "comment_id": 87304551, "body": "&quot;use global variables&quot; is almost never the right answer, though :)"}], "tags": [], "owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "is_accepted": true, "score": 0, "last_activity_date": 1525294071, "last_edit_date": 1525294071, "creation_date": 1525293179, "answer_id": 50143121, "question_id": 50142627, "link": "https://stackoverflow.com/questions/50142627/ruby-program-terminates-when-calling-a-function-inside-a-function/50143121#50143121", "title": "Ruby Program Terminates When Calling A Function Inside a Function", "body": "<p>You get the error message because <code>username</code> is unknown within the <code>checkusername()</code> function. It is said to be <em>out of scope</em>. It is not known outside of the <code>login()</code> function. It is a local variable. Its scope is local to <code>login()</code>.</p>\n\n<p>One way around this is to declare the variable as a <em>global</em>. That means it will have global scope and be available from anywhere in the program. To declare a variable as global, you prefix with a <code>$</code>.</p>\n\n<p><code>username = gets.chomp</code> becomes <code>$username = gets.chomp</code>. Then when you want to reference it again, you use the same prefix: <code>if $username == name...</code></p>\n\n<p><a href=\"https://stackoverflow.com/questions/11495098/difference-between-various-variables-scopes-in-ruby\">Difference between various variables scopes in ruby</a></p>\n\n<p><a href=\"http://ruby-for-beginners.rubymonstas.org/writing_methods/scopes.html\" rel=\"nofollow noreferrer\">http://ruby-for-beginners.rubymonstas.org/writing_methods/scopes.html</a></p>\n\n<p>(<strong>Edit!</strong> As Sergio Tulentsev notes below, globals are usually a bad idea. <a href=\"https://www.thoughtco.com/global-variables-2908384\" rel=\"nofollow noreferrer\">https://www.thoughtco.com/global-variables-2908384</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 380, "user_id": 8016768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39bfe45a303d7156e630c1bbaa3eb9b?s=128&d=identicon&r=PG&f=1", "display_name": "chemical", "link": "https://stackoverflow.com/users/8016768/chemical"}, "is_accepted": false, "score": 2, "last_activity_date": 1525294410, "creation_date": 1525294410, "answer_id": 50143404, "question_id": 50142627, "link": "https://stackoverflow.com/questions/50142627/ruby-program-terminates-when-calling-a-function-inside-a-function/50143404#50143404", "title": "Ruby Program Terminates When Calling A Function Inside a Function", "body": "<pre><code>puts 'redirecting to login'\n\ndef login\n  puts  # You do not need the quotes just to put an empty line\n  print 'Username: '\n  username = gets.chomp\n  check_username username  # I recommend using snake_case for variable names and method names\nend\n\ndef password\n  print 'Password: '\n  password_conf = gets.chomp\n  check_password password_conf\nend\n\ndef success  # With Ruby you do not need the empty ()\n  puts \"You're logged in!\"\nend\n\ndef check_username(username)\n  name = 'random'\n  username == name ? password : login  # This is a if/else statement on one line\nend\n\ndef check_password(password_conf)\n  password = 'password'\n  password_conf == password ? success : login  # You also don't need the () for calling a method either\nend\n\nlogin\nloop { sleep 10 } # This will keep the program running forever, you should probably remove this line\n</code></pre>\n\n<p>I made some changes to your code, with some comments above.</p>\n\n<p>Variables that are not global (You should avoid global variables) need to be passed to the method for use. This is the main reason your program is crashing. You are asking <code>checkusername</code> method to use a variable in the <code>login</code> method, which won't work as the methods won't share variables unless you pass them.</p>\n\n<p>Again, I would avoid global variables when possible.</p>\n"}], "owner": {"reputation": 1134, "user_id": 5773776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-FfkqR5SoZu8/AAAAAAAAAAI/AAAAAAAAAIw/HvofQWINxs4/photo.jpg?sz=128", "display_name": "Random Channel", "link": "https://stackoverflow.com/users/5773776/random-channel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 50143121, "answer_count": 2, "score": 0, "last_activity_date": 1525294410, "creation_date": 1525291256, "last_edit_date": 1525292461, "question_id": 50142627, "link": "https://stackoverflow.com/questions/50142627/ruby-program-terminates-when-calling-a-function-inside-a-function", "title": "Ruby Program Terminates When Calling A Function Inside a Function", "body": "<p>I am trying to get something where if someone enters in a string, it verifies it and runs another function. My problem is that it ends the program instead of running the other function.\nHere is my code:</p>\n\n<pre><code>puts \"redirecting to login\"\ndef login()\n  puts \"\"\n  print \"Username: \"\n  username = gets.chomp\n  checkusername()\nend\ndef password()\n  print \"Password: \"\n  passwordconf = gets.chomp\n  checkpassword()\nend\ndef success()\n  puts \"You're logged in!\"\n  loop { sleep 10 }\nend\ndef checkusername()\nif username == name\n  password()\nelse\n  login()\nend\nend\ndef checkpassword()\nif passwordconf == password\n  success()\nelse\n  login()\nend\nend\nlogin()\nloop { sleep 10 }\n</code></pre>\n\n<p>When login is running, and I type the gets for the string I am trying to check, when I press enter for the checkusername to run, the program ends, even if it is correct.</p>\n\n<p>The login function runs the checkusername function once I type in a string, and hit enter. My problem is that once that happens, the program terminates, instead of either redirecting back to the login function or the password function. I am trying to figure out how that will not happen.</p>\n\n<p>Error output:</p>\n\n<pre><code>Traceback (most recent call last):\n        2: from blank.rb:41:in `&lt;main&gt;'\n        1: from blank.rb:16:in `login'\nblank.rb:28:in `checkusername': undefined local variable or method `username' for main:Object (NameError)\n</code></pre>\n\n<p>I am quite a beginner at Ruby, and I have spent quite a bit of time getting this to work, but I am unable. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubymine"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525291405, "post_id": 50142550, "comment_id": 87303529, "body": "Take a look at rvm"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1525343134, "creation_date": 1525343134, "answer_id": 50152726, "question_id": 50142550, "link": "https://stackoverflow.com/questions/50142550/find-right-ruby-version-for-gemset/50152726#50152726", "title": "find right ruby version for gemset", "body": "<p>The lobster app has a <a href=\"https://github.com/lobsters/lobsters/blob/master/.ruby-version\" rel=\"nofollow noreferrer\"><code>.ruby-version</code></a> file in its root which is a common way to declare the Ruby version the app is depending on. </p>\n\n<p>For the others apps, you will probably need to contact the maintainers or investigate on Rubygems the dependencies for every gem that fails to install (e.q. <a href=\"https://rubygems.org/search?query=yada+yada\" rel=\"nofollow noreferrer\"><code>yada yada</code></a>).</p>\n"}], "owner": {"reputation": 43, "user_id": 9675688, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9675688", "link": "https://stackoverflow.com/users/9675688/user9675688"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525399353, "creation_date": 1525290923, "last_edit_date": 1525399353, "question_id": 50142550, "link": "https://stackoverflow.com/questions/50142550/find-right-ruby-version-for-gemset", "title": "find right ruby version for gemset", "body": "<p>I got the issue multiple times that I can't run a rails project because I get the message from rubymine: </p>\n\n<pre><code>    gem 'yada yada' is not available in the project sdk ruby version xxx.\n</code></pre>\n\n<p>... is there a way to find out the right Ruby version to use from the gemfile, even if someone does not specify it explicitly in the gemfile?</p>\n\n<p>Concretely I can't run the following projects if s.o. wants to help here... (1) <a href=\"https://github.com/becky000/sample_app\" rel=\"nofollow noreferrer\">https://github.com/becky000/sample_app</a>\n[2] <a href=\"https://github.com/lobsters/lobsters\" rel=\"nofollow noreferrer\">https://github.com/lobsters/lobsters</a>\n[3] <a href=\"https://github.com/paulorja/rts-web-rails\" rel=\"nofollow noreferrer\">https://github.com/paulorja/rts-web-rails</a></p>\n\n<p>Maybe someone gets the same issues while trying these ones to get to run.</p>\n"}, {"tags": ["ruby", "scoping"], "answers": [{"comments": [{"owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "edited": false, "score": 0, "creation_date": 1525288919, "post_id": 50141927, "comment_id": 87302288, "body": "Right. So Ruby can have the same name referring to two different things  as long as they are two different things... is that correct?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1525325206, "post_id": 50141927, "comment_id": 87313186, "body": "Yes. Variables and methods live in different namespaces. When there is an ambiguity, Ruby chooses the variable. If you want the method instead, you need to make it un-ambiguos. Two ways to do that, are an explicit receiver (<code>self.foo</code>) or an argument list (<code>foo()</code>), since a variable can have neither."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1525288401, "creation_date": 1525288401, "answer_id": 50141927, "question_id": 50141853, "link": "https://stackoverflow.com/questions/50141853/same-method-and-constant-name-in-ruby/50141927#50141927", "title": "Same method and constant name in Ruby", "body": "<p>Use parentheses to explicitly call the method:</p>\n\n<pre><code>puts Myconstant\n#\u21d2 'This is the constant'\n\nputs Myconstant()\n#\u21d2 'This is the method'\n</code></pre>\n"}], "owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 1, "accepted_answer_id": 50141927, "answer_count": 1, "score": 0, "last_activity_date": 1525288401, "creation_date": 1525288071, "question_id": 50141853, "link": "https://stackoverflow.com/questions/50141853/same-method-and-constant-name-in-ruby", "title": "Same method and constant name in Ruby", "body": "<pre><code>module Demo  \n  Myconstant = 'This is the constant'\n  private\n    def Myconstant\n      puts 'This is the method'\n    end\nend\n\nclass Sample\n  include Demo\n\n  def test\n    puts Myconstant # =&gt; 'This is the constant'\n  end\n\nend\n\nSample.new.test\n</code></pre>\n\n<p>How does the snippet above work? </p>\n\n<p>Shouldn't <code>Myconstant</code> the method overwrite the \"true\" constant?</p>\n\n<p>Is there a way to call the method instead?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "mongoid"], "comments": [{"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1525287845, "post_id": 50141627, "comment_id": 87301749, "body": "Try to convert it to string?"}, {"owner": {"reputation": 271, "user_id": 9451229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/agVpL.png?s=128&g=1", "display_name": "tomatito", "link": "https://stackoverflow.com/users/9451229/tomatito"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1525288013, "post_id": 50141627, "comment_id": 87301824, "body": "Thank you, result is this but is not same string: <code>[208] pry(main)&gt; changed.to_s =&gt; &quot;[BSON::ObjectId(&#39;5ae9972ea8abbc3c5484cd5e&#39;)]&quot;</code> I would like to remove BSON...etc or the other side, convert string in BSON like this one!"}], "answers": [{"tags": [], "owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1525289374, "creation_date": 1525289374, "answer_id": 50142158, "question_id": 50141627, "link": "https://stackoverflow.com/questions/50141627/check-if-bson-array-include-string-id/50142158#50142158", "title": "check if bson array include string id", "body": "<p>Converting <code>manager_to_remove</code> to <code>BSON::ObjectId</code> works:</p>\n\n<pre><code>require 'bson'\nchanged = [BSON::ObjectId('5ae9972ea8abbc3c5484cd5e')]\nmanager_to_remove = BSON::ObjectId(\"5ae9972ea8abbc3c5484cd5e\")\nchanged.include?(manager_to_remove).inspect # =&gt; \"true\"\n</code></pre>\n"}], "owner": {"reputation": 271, "user_id": 9451229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/agVpL.png?s=128&g=1", "display_name": "tomatito", "link": "https://stackoverflow.com/users/9451229/tomatito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525289374, "creation_date": 1525287260, "last_edit_date": 1525288099, "question_id": 50141627, "link": "https://stackoverflow.com/questions/50141627/check-if-bson-array-include-string-id", "title": "check if bson array include string id", "body": "<p>I would like to know if an array of bsons include a string id, something like this:</p>\n\n<pre><code>[186] pry(main)&gt; changed = [BSON::ObjectId('5ae9972ea8abbc3c5484cd5e')] \n=&gt; [BSON::ObjectId('5ae9972ea8abbc3c5484cd5e')]\n[187] pry(main)&gt; changed\n=&gt; [BSON::ObjectId('5ae9972ea8abbc3c5484cd5e')]\n[188] pry(main)&gt; manager_to_remove = \"5ae9972ea8abbc3c5484cd5e\"\n=&gt; \"5ae9972ea8abbc3c5484cd5e\"\n[189] pry(main)&gt; manager_to_remove\n=&gt; \"5ae9972ea8abbc3c5484cd5e\"\n[190] pry(main)&gt; changed.include?(manager_to_remove).inspect\n=&gt; \"false\"\n</code></pre>\n\n<p>I'm always getting false. </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1525290691, "post_id": 50141327, "comment_id": 87303193, "body": "Are you by any chance upgrading your Rails version? What Haml version are you using?"}, {"owner": {"reputation": 1546, "user_id": 1376201, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbb3062bb6626fd79d1b118d34829342?s=128&d=identicon&r=PG", "display_name": "toobulkeh", "link": "https://stackoverflow.com/users/1376201/toobulkeh"}, "edited": false, "score": 0, "creation_date": 1525317716, "post_id": 50141327, "comment_id": 87311030, "body": "There&#39;s nothing wrong with that HAML code you posted, so it&#39;s probably a constant that&#39;s being used in the partial (common/html_head), base_content, or yield."}], "answers": [{"tags": [], "owner": {"reputation": 3380, "user_id": 3757435, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/m8r2q.png?s=128&g=1", "display_name": "Mugur &#39;Bud&#39; Chirica", "link": "https://stackoverflow.com/users/3757435/mugur-bud-chirica"}, "is_accepted": true, "score": 5, "last_activity_date": 1529598500, "creation_date": 1529598500, "answer_id": 50973429, "question_id": 50141327, "link": "https://stackoverflow.com/questions/50141327/actionviewtemplateerror-at-uninitialized-constant/50973429#50973429", "title": "ActionView::Template::Error at / uninitialized constant", "body": "<p>This is a known bug in <code>haml</code> gem, version <code>5.0.1 - 5.0.4</code>.</p>\n\n<p>You need to update the gem version to <code>5.0.4</code>.</p>\n\n<p><a href=\"https://github.com/haml/haml/blob/master/CHANGELOG.md#504\" rel=\"noreferrer\">Source</a></p>\n"}], "owner": {"reputation": 703, "user_id": 9242883, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5304442e38e3ce9d20fce061c5ff9f2a?s=128&d=identicon&r=PG&f=1", "display_name": "jj008", "link": "https://stackoverflow.com/users/9242883/jj008"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 0, "accepted_answer_id": 50973429, "answer_count": 1, "score": 5, "last_activity_date": 1529598500, "creation_date": 1525285972, "question_id": 50141327, "link": "https://stackoverflow.com/questions/50141327/actionviewtemplateerror-at-uninitialized-constant", "title": "ActionView::Template::Error at / uninitialized constant", "body": "<p>I'm getting the following error when I try to load my app:</p>\n\n<pre><code>ActionView::Template::Error at /\nuninitialized constant ActionView::CompiledTemplates::EXPR_ARG\n</code></pre>\n\n<p>The error is found at <code>app/views/layouts/application.html.haml</code> and the follow code is highlighted.</p>\n\n<pre><code>!!! 5\n%html{:lang =&gt; \"en\"}\n  %head\n    = render partial: 'common/html_head'\n  %body#static{ class: body_css_class }\n    = content_for?(:base_content) ? yield(:base_content) : yield\n</code></pre>\n\n<p>Does anyone have an idea on what this is?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "string", "include"], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1525286626, "last_edit_date": 1525286626, "creation_date": 1525285358, "answer_id": 50141177, "question_id": 50141130, "link": "https://stackoverflow.com/questions/50141130/how-to-check-if-a-string-includes-any-value-of-an-array/50141177#50141177", "title": "How to check if a string includes any value of an array?", "body": "<pre><code>(str.downcase.split &amp; arr.map(&amp;:downcase)).any?\n   #=&gt; false\n</code></pre>\n\n<p>If it is known that all letters are of the same case.</p>\n\n<pre><code>(str.split &amp; arr).any?\n   #=&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1525285428, "creation_date": 1525285428, "answer_id": 50141189, "question_id": 50141130, "link": "https://stackoverflow.com/questions/50141130/how-to-check-if-a-string-includes-any-value-of-an-array/50141189#50141189", "title": "How to check if a string includes any value of an array?", "body": "<p>To check when the whole word is included case sensitive:</p>\n\n<pre><code>(str.split &amp; arr).any?\n#\u21d2 true\n</code></pre>\n\n<p>Case insensitive:</p>\n\n<pre><code>[str.split, arr].map { |a| a.map(&amp;:downcase) }.reduce(&amp;:&amp;).any?\n#\u21d2 true\n</code></pre>\n\n<p>To check if it includes any of <code>arr</code> anyhow:</p>\n\n<pre><code>arr.any?(&amp;str.method(:include?))\n#\u21d2 true\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1525286148, "post_id": 50141294, "comment_id": 87300938, "body": "I believe you need word boundaries. For example, <code>str = &quot;not&quot;; arr = [&quot;no&quot;]</code> should not match. (Easy fix, nice approach.)"}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 0, "last_activity_date": 1525285833, "creation_date": 1525285833, "answer_id": 50141294, "question_id": 50141130, "link": "https://stackoverflow.com/questions/50141130/how-to-check-if-a-string-includes-any-value-of-an-array/50141294#50141294", "title": "How to check if a string includes any value of an array?", "body": "<p>This uses a Regular expression. The good news is that it is generated for you - no syntax to learn. Other good news: it traverses the string only once.</p>\n\n<pre><code>re = Regexp.union(arr)  #your own regular expression without screws or bolts\np re.match?(str)  # =&gt; true\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9581861, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\ud55c\uc2b9\uc6b0", "link": "https://stackoverflow.com/users/9581861/%ed%95%9c%ec%8a%b9%ec%9a%b0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 50141189, "answer_count": 3, "score": 0, "last_activity_date": 1525286626, "creation_date": 1525285193, "last_edit_date": 1525286402, "question_id": 50141130, "link": "https://stackoverflow.com/questions/50141130/how-to-check-if-a-string-includes-any-value-of-an-array", "title": "How to check if a string includes any value of an array?", "body": "<p>My string is </p>\n\n<pre><code>str = \"my string is this one\"\n</code></pre>\n\n<p>and my array is </p>\n\n<pre><code>arr = [\"no\", \"nothing\", \"only\", \"is\"]\n</code></pre>\n\n<p>So, my string includes the <strong>is</strong> in the value of my array, I want to get the result <code>true</code></p>\n\n<p>How can I do this?</p>\n\n<p>I want to use <code>include?</code> met</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form"], "answers": [{"tags": [], "owner": {"reputation": 1546, "user_id": 1376201, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbb3062bb6626fd79d1b118d34829342?s=128&d=identicon&r=PG", "display_name": "toobulkeh", "link": "https://stackoverflow.com/users/1376201/toobulkeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1525317467, "creation_date": 1525317467, "answer_id": 50146407, "question_id": 50140663, "link": "https://stackoverflow.com/questions/50140663/simple-form-how-to-pass-parameters-in-rails/50146407#50146407", "title": "simple_form how to pass parameters in rails?", "body": "<p>From the SimpleForm documentation, there are a few helpers provided:</p>\n\n<p><a href=\"https://github.com/plataformatec/simple_form#collection-check-boxes\" rel=\"nofollow noreferrer\">collection_check_boxes:</a></p>\n\n<pre><code>form_for @tuition do |f|\n  f.collection_check_boxes :user_ids, User.all, :id, :name\nend\n</code></pre>\n\n<p><a href=\"https://github.com/plataformatec/simple_form#associations\" rel=\"nofollow noreferrer\">if you have an association</a>, you can use <code>as: :check_boxes</code>:</p>\n\n<pre><code>&lt;%= simple_form_for @tuition do |f| %&gt;\n  &lt;%= f.association :users, as: :check_boxes %&gt;\n  &lt;%= f.button :submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>More generally, I think SimpleForm uses <code>f.input</code> instead of <code>f.input_field</code>, so your code should read:</p>\n\n<pre><code>td = f.input \"user_ids[]\", as: :boolean, value: tuition.user_id\n</code></pre>\n"}], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568770043, "creation_date": 1525283232, "last_edit_date": 1568770043, "question_id": 50140663, "link": "https://stackoverflow.com/questions/50140663/simple-form-how-to-pass-parameters-in-rails", "title": "simple_form how to pass parameters in rails?", "body": "<p>I want to batch update records by simple_form, </p>\n\n<p><a href=\"https://i.stack.imgur.com/yXPj6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yXPj6.png\" alt=\"screenshot of simple form\"></a></p>\n\n<p>The code is as below:</p>\n\n<pre><code>    = simple_form_for url: batch_update_admin_tuitions_path, method: 'put' do |f|\n      table.table\n        thead\n          tr\n            th.text-center\n            th.text-center column1\n            th.text-center column2\n            th.text-center column3\n        tbody.text-center\n          - @tuitions.each do |tuition|\n            tr\n              td = f.input_field \"user_ids[]\", as: :boolean, value: tuition.user_id\n              td = @users_hash[tuition.user_id].name\n              td = tuition.num\n              td = tuition.sum_amount\n      = f.submit :Submit, class: 'btn btn-success'\n</code></pre>\n\n<p>But it doesn't work.</p>\n\n<p>Parameters:</p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\", \n\"authenticity_token\"=&gt;\"FDpxyq9LE8UjxBjIm4lstj29N86Xlja+czWZXDdMcnehgBzmh0zz7aE5ZKqGWCWtX/h+iRwnTE048IPPodG10w==\", \"/admin/tuitions/batch_update\"=&gt;{\"user_ids\"=&gt;[]}, \"commit\"=&gt;\"Submit\"}\n</code></pre>\n\n<p>I found a problem: the user_ids is blank. How to pass the user_ids to params? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems", "paperclip"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1525282002, "post_id": 50140223, "comment_id": 87298891, "body": "I don&#39;t think you can render a *.doc file in the browser. There is an explanation <a href=\"https://stackoverflow.com/a/27958186/5239030\">here</a>."}, {"owner": {"reputation": 41, "user_id": 9528038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Joao Quaresma", "link": "https://stackoverflow.com/users/9528038/joao-quaresma"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525287309, "post_id": 50140223, "comment_id": 87301478, "body": "Thank you for your comment, looks like they used the Google Docs Viewer to show the doc, what is all I need, I tried but gives an error saying that the file cant be found. I believe that we would need to send this to google docs online before or something? This is what I have tried: &lt;iframe src=&quot;<a href=\"https://docs.google.com/viewer?url=&lt;%=\" rel=\"nofollow noreferrer\">docs.google.com/viewer?url=&lt;%=</a> @article.document.url %&gt;&amp;embedded=true&quot; style=&quot;height:800px;width:100%&quot;&gt;&lt;/iframe&gt;"}], "owner": {"reputation": 41, "user_id": 9528038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Joao Quaresma", "link": "https://stackoverflow.com/users/9528038/joao-quaresma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525281472, "creation_date": 1525281472, "question_id": 50140223, "link": "https://stackoverflow.com/questions/50140223/word-upload-and-preview-paperclip", "title": "Word upload and preview - Paperclip", "body": "<p>Rails 4.2.5 and ruby 2.3.3p222</p>\n\n<p>I am using Paperclip to upload files, if I upload pdf's the display works fine but I cant find a way to display word files correctly in the browser.</p>\n\n<p>Model:</p>\n\n<pre><code>has_attached_file :document\nvalidates_attachment :document, :content_type =&gt; { :content_type =&gt; %w(application/pdf application/msword application/vnd.openxmlformats-officedocument.wordprocessingml.document) }\n</code></pre>\n\n<p>In my form:</p>\n\n<pre><code>&lt;%= f.input :document, as: :file %&gt;\n</code></pre>\n\n<p>In my show:</p>\n\n<pre><code>&lt;iframe src=\"&lt;%= @article.document.url %&gt;\" style=\"height:800px;width:100%\"&gt;&lt;/iframe&gt;\n</code></pre>\n\n<p>Again, if its a pdf it shows perfectly, although if its a word file it just downloads the file instantly as soon as I load the page.</p>\n\n<p>I think its the  that I am using in the Show page but cant find any solution when searching on google. \nAnyone tried to do this or has any suggestion?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "delegates", "rails-activestorage"], "comments": [{"owner": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 0, "creation_date": 1525276512, "post_id": 50138664, "comment_id": 87295875, "body": "Can you post your delegate code? I&#39;m surprised that didn&#39;t work. Other than that, you can just make your own method on User that returns <code>files.files</code>. Also, I&#39;d consider renaming one of these - not good to have that ambiguity, and maybe that&#39;s what broke the delegate."}, {"owner": {"reputation": 2466, "user_id": 951579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6c323b13b43d4f85aeb474a657f5ab94?s=128&d=identicon&r=PG", "display_name": "Drazen Mokic", "link": "https://stackoverflow.com/users/951579/drazen-mokic"}, "reply_to_user": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 0, "creation_date": 1525276953, "post_id": 50138664, "comment_id": 87296147, "body": "I updated the post with the delegate i tried. If i make my own method i need to use that explicitly while i would prefer to just call it the standard way and have it work everywhere without the need  to call a custom method.. if that makes sense.  Do you have a suggestion for the naming pattern? I was thinking of files.uploads maybe?"}, {"owner": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 0, "creation_date": 1525277097, "post_id": 50138664, "comment_id": 87296238, "body": "Your delegate should be <code>delegate :method, :to: :other_method</code>, not, <code>to: class_name</code>. Try <code>delegate :files, to: :files</code>. What the delegate means is that the &quot;other_method&quot; should be called, then call &quot;method&quot; on it."}, {"owner": {"reputation": 2466, "user_id": 951579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6c323b13b43d4f85aeb474a657f5ab94?s=128&d=identicon&r=PG", "display_name": "Drazen Mokic", "link": "https://stackoverflow.com/users/951579/drazen-mokic"}, "reply_to_user": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 0, "creation_date": 1525277269, "post_id": 50138664, "comment_id": 87296351, "body": "Thanks i tried that as well before but also got the above error. Just updated the post again"}, {"owner": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 2, "creation_date": 1525277538, "post_id": 50138664, "comment_id": 87296512, "body": "You&#39;re getting a stack overflow error, because the two method names are the same. User is calling files which is told to call files, but when files it&#39;s called, it&#39;s supposed to call files, which calls files, which is supposed to call files, etc. The problem can be solved by renaming one of these items so they&#39;re not the same name."}, {"owner": {"reputation": 2466, "user_id": 951579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6c323b13b43d4f85aeb474a657f5ab94?s=128&d=identicon&r=PG", "display_name": "Drazen Mokic", "link": "https://stackoverflow.com/users/951579/drazen-mokic"}, "reply_to_user": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 0, "creation_date": 1525278027, "post_id": 50138664, "comment_id": 87296840, "body": "I just tried that but i get the error in try 3, updated above."}, {"owner": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 0, "creation_date": 1525286116, "post_id": 50138664, "comment_id": 87300926, "body": "Does it still have <code>has_many_attached :files</code>? Don&#39;t rename that part if you&#39;ve already named that file."}, {"owner": {"reputation": 2466, "user_id": 951579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6c323b13b43d4f85aeb474a657f5ab94?s=128&d=identicon&r=PG", "display_name": "Drazen Mokic", "link": "https://stackoverflow.com/users/951579/drazen-mokic"}, "reply_to_user": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 0, "creation_date": 1525344914, "post_id": 50138664, "comment_id": 87324116, "body": "Yes it still has the has_many_attached :files. The problem is that it is calling .files on a collection but it can only be called on a single record"}], "answers": [{"tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": false, "score": 0, "last_activity_date": 1525311237, "creation_date": 1525311237, "answer_id": 50145716, "question_id": 50138664, "link": "https://stackoverflow.com/questions/50138664/rails-how-to-delegate-method-to-collection/50145716#50145716", "title": "Rails - How to delegate method to collection", "body": "<p>How about using <code>through</code> and renaming the files association eg:</p>\n\n<p>User:</p>\n\n<pre><code>has_many :loot_files, class_name: 'Loot::File'\nhas_many :files, through: :loot_files\n</code></pre>\n\n<p>You should then be able to use:</p>\n\n<pre><code>user.loot_files.files\nuser.files\n</code></pre>\n"}], "owner": {"reputation": 2466, "user_id": 951579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6c323b13b43d4f85aeb474a657f5ab94?s=128&d=identicon&r=PG", "display_name": "Drazen Mokic", "link": "https://stackoverflow.com/users/951579/drazen-mokic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525311237, "creation_date": 1525276090, "last_edit_date": 1525278002, "question_id": 50138664, "link": "https://stackoverflow.com/questions/50138664/rails-how-to-delegate-method-to-collection", "title": "Rails - How to delegate method to collection", "body": "<p>I am using ActiveStorage for file uploads via API. My \"File\" model is namespaced under \"Loot\", so it is \"Loot::Files\". The File model has an association (ActiveStorage) \"has_many_attached :files\".</p>\n\n<h1>User.rb</h1>\n\n<pre><code>has_many :files, class_name: 'Loot::File'\n</code></pre>\n\n<h1>loot/file.rb (Loot::File)</h1>\n\n<pre><code>has_many_attached :files\n</code></pre>\n\n<p>While this works (i can call user.files.files) it's really ugly and awkward to call files on files.</p>\n\n<p>Is there a way to keep the namespace \"Loot\" but only need to call user.files to access the ActiveStorage files? I tried using delegate but it seems it doesn't work delegating to collections.</p>\n\n<p>Update: I tried the following delegate</p>\n\n<h2>Try 1</h2>\n\n<p>User.rb</p>\n\n<pre><code>delegate :files, to: \"Loot::File\"\n</code></pre>\n\n<p>With that, calling \"User.first.files\", i get the following error</p>\n\n<pre><code>Traceback (most recent call last):\n    2: from (irb):3\n    1: from app/models/user.rb:46:in `files'\nNoMethodError (undefined method `files' for Loot::File(id: integer, user_id: integer):Class)\n</code></pre>\n\n<h2>Try 2</h2>\n\n<p>User.rb</p>\n\n<pre><code>delegate :files, to: :files\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Traceback (most recent call last):\n   16: from app/models/user.rb:46:in `files'\n   15: from app/models/user.rb:46:in `files'\n   14: from app/models/user.rb:46:in `files'\n   13: from app/models/user.rb:46:in `files'\n   12: from app/models/user.rb:46:in `files'\n   11: from app/models/user.rb:46:in `files'\n   10: from app/models/user.rb:46:in `files'\n    9: from app/models/user.rb:46:in `files'\n    8: from app/models/user.rb:46:in `files'\n    7: from app/models/user.rb:46:in `files'\n    6: from app/models/user.rb:46:in `files'\n    5: from app/models/user.rb:46:in `files'\n    4: from app/models/user.rb:46:in `files'\n    3: from app/models/user.rb:46:in `files'\n    2: from app/models/user.rb:46:in `files'\n    1: from app/models/user.rb:46:in `files'\nSystemStackError (stack level too deep)\n</code></pre>\n\n<h2>Try 3 - Renaming</h2>\n\n<p>I tried renaming Loot::Files to Loot:Uploads and using the following delegate</p>\n\n<p>User.rb</p>\n\n<pre><code>delegate :files, to: :uploads\n</code></pre>\n\n<p>but then i get the following when calling User.first.files</p>\n\n<pre><code>NoMethodError (undefined method `files' for #&lt;Loot::Upload::ActiveRecord_Associations_CollectionProxy:0x00007fdb96ca91c0&gt;)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "bootstrap-4"], "comments": [{"owner": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 0, "creation_date": 1525276551, "post_id": 50138363, "comment_id": 87295904, "body": "Can you post your application.html.erb file? It be good to see what it looks like at, and around, line 8."}, {"owner": {"reputation": 45, "user_id": 8624883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c656fb850b04f876ce7554d331de5859?s=128&d=identicon&r=PG&f=1", "display_name": "A. Bhujel", "link": "https://stackoverflow.com/users/8624883/a-bhujel"}, "reply_to_user": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 0, "creation_date": 1525276879, "post_id": 50138363, "comment_id": 87296105, "body": "&lt;%= stylesheet_link_tag    &#39;application&#39;, media: &#39;all&#39;, &#39;data-turbolinks-track&#39;: &#39;reload&#39; %&gt;  This is line 8 @MrDanA... :("}, {"owner": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 0, "creation_date": 1525277166, "post_id": 50138363, "comment_id": 87296294, "body": "Okay, can you post your application stylesheet?"}, {"owner": {"reputation": 45, "user_id": 8624883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c656fb850b04f876ce7554d331de5859?s=128&d=identicon&r=PG&f=1", "display_name": "A. Bhujel", "link": "https://stackoverflow.com/users/8624883/a-bhujel"}, "reply_to_user": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 0, "creation_date": 1525277272, "post_id": 50138363, "comment_id": 87296354, "body": "I renamed it to application.scss Removed everything from it and just placed @import &quot;bootstrap&quot;;"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8890320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bPMkeLoQj-M/AAAAAAAAAAI/AAAAAAAAAEk/kgW8DLYMDvY/photo.jpg?sz=128", "display_name": "sudip lahiri", "link": "https://stackoverflow.com/users/8890320/sudip-lahiri"}, "is_accepted": false, "score": 0, "last_activity_date": 1567440631, "creation_date": 1567440631, "answer_id": 57760029, "question_id": 50138363, "link": "https://stackoverflow.com/questions/50138363/issue-adding-bootstrap-on-ruby-on-rails-project/57760029#57760029", "title": "Issue adding Bootstrap on Ruby on Rails Project", "body": "<p>remove #gem 'duktape' from gem file..the issue will be solved</p>\n"}], "owner": {"reputation": 45, "user_id": 8624883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c656fb850b04f876ce7554d331de5859?s=128&d=identicon&r=PG&f=1", "display_name": "A. Bhujel", "link": "https://stackoverflow.com/users/8624883/a-bhujel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1567440631, "creation_date": 1525275054, "last_edit_date": 1525279439, "question_id": 50138363, "link": "https://stackoverflow.com/questions/50138363/issue-adding-bootstrap-on-ruby-on-rails-project", "title": "Issue adding Bootstrap on Ruby on Rails Project", "body": "<p><a href=\"https://github.com/twbs/bootstrap-rubygem\" rel=\"nofollow noreferrer\">This</a> is what I followed in order to get started with bootstrap on Ruby on Rails.</p>\n\n<p>I followed every step exactly the same. However, I keep running into the same error for some reason. When I do not do any thing (i.e. do not use bootstrap) everything works (but the application looks trashy).\nWhenever I use bootstrap, I get:</p>\n\n<pre><code>invalid regexp character\n</code></pre>\n\n<p>This is the application trace:</p>\n\n<pre><code>(execjs):24299\napp/views/layouts/application.html.erb:8:in `_app_views_layouts_application_html_erb__337612969_59863020'\n</code></pre>\n\n<p>I have no clue what is happening.</p>\n\n<p><strong>P.S.</strong> I am a beginner. So if the solution is simple then, yeah...</p>\n"}, {"tags": ["arrays", "ruby", "regex", "split"], "comments": [{"owner": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 2, "creation_date": 1525273111, "post_id": 50137678, "comment_id": 87293705, "body": "You can use <code>str.split(&#47;\\.(?!asd)&#47;)</code>"}, {"owner": {"reputation": 527, "user_id": 7858691, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ig5olmA66Rw/AAAAAAAAAAI/AAAAAAAAABk/qHdhKSRoxXs/photo.jpg?sz=128", "display_name": "Pedro Sturmer", "link": "https://stackoverflow.com/users/7858691/pedro-sturmer"}, "reply_to_user": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1525273459, "post_id": 50137678, "comment_id": 87293948, "body": "That&#39;s what I&#39;m looking for! Thank you @anubhava"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1525286799, "post_id": 50137678, "comment_id": 87301261, "body": "@anubhava, close, but you really need the word break that Wiktor includes (so, for example, <code>&quot;asdcookie&quot;</code> is not matched.)."}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1525273385, "creation_date": 1525273385, "answer_id": 50137799, "question_id": 50137678, "link": "https://stackoverflow.com/questions/50137678/split-string-at-every-dot-except-when-some-word-appears/50137799#50137799", "title": "Split String at every dot except when some word appears", "body": "<p>Use </p>\n\n<pre><code>str.split(/\\.(?!asd\\b)/)\n</code></pre>\n\n<p>The <code>\\.(?!asd\\b)</code> pattern matches any dot that is not followed with <code>asd</code> followed with a word boundary. The <code>(?!asd\\b)</code> is a <em>negative lookahead</em> that fails the match if the lookahead pattern finds a match immediately to the right of the current location.</p>\n\n<p>In case the \"word\" ends with a period or end of string, use</p>\n\n<pre><code>str.split(/\\.(?!asd(?:\\.|\\z))/)\n</code></pre>\n\n<p>where <code>(?:\\.|\\z)</code> is a non-capturing group matching either a dot (<code>\\.</code>) or (<code>|</code>) end of string (<code>\\z</code>).</p>\n\n<p>See the <a href=\"https://ideone.com/V5Q8E1\" rel=\"nofollow noreferrer\">Ruby demo</a> and a <a href=\"https://regex101.com/r/rUUM2O/1\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n"}], "owner": {"reputation": 527, "user_id": 7858691, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ig5olmA66Rw/AAAAAAAAAAI/AAAAAAAAABk/qHdhKSRoxXs/photo.jpg?sz=128", "display_name": "Pedro Sturmer", "link": "https://stackoverflow.com/users/7858691/pedro-sturmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 50137799, "answer_count": 1, "score": 2, "last_activity_date": 1525273385, "creation_date": 1525273032, "question_id": 50137678, "link": "https://stackoverflow.com/questions/50137678/split-string-at-every-dot-except-when-some-word-appears", "title": "Split String at every dot except when some word appears", "body": "<p>I'm really new into regex and currently getting some trouble to solve a problem. I will appreciate any help :)</p>\n\n<p>Using ruby 2.4.2</p>\n\n<p>The problem: Split a string at every dot, except when the asd word is after the dot</p>\n\n<pre><code>String: str = \"qwer.qwer.asd\"\nCode: str.split(/\\./)\nOutput: [\"qwer\", \"qwer\", \"asd\"]\n\nThe output should be: [\"qwer\", \"qwer.asd\"]\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1525272861, "post_id": 50137573, "comment_id": 87293516, "body": "Did you try something like <code>rspec configurable&#47;spec injectable&#47;spec defaultable&#47;spec</code>?"}, {"owner": {"reputation": 383, "user_id": 3985721, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9bee4235ea6f190c87d8162dfcc75009?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Hadik", "link": "https://stackoverflow.com/users/3985721/josh-hadik"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1525273170, "post_id": 50137573, "comment_id": 87293763, "body": "Thanks for the response! yeah that would work, but I should have been more clear about what I wanted, sorry about that. I want to be able to just run &#39;rspec&#39; and have them all connect. I want to avoid having to string so many commands together (especially as I continue to add more sub folders to the gem) if at all possible."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 2, "creation_date": 1525273590, "post_id": 50137573, "comment_id": 87294030, "body": "Maybe <a href=\"http://blog.codingspree.net/2012/04/26/overwriting_rake_spec_task.html\" rel=\"nofollow noreferrer\">this link</a> will be helpful"}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 3985721, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9bee4235ea6f190c87d8162dfcc75009?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Hadik", "link": "https://stackoverflow.com/users/3985721/josh-hadik"}, "edited": false, "score": 0, "creation_date": 1525273649, "post_id": 50137768, "comment_id": 87294067, "body": "ignore my last comment. I didn&#39;t even read your update, lol. I figured it out."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1525273765, "last_edit_date": 1525273765, "creation_date": 1525273299, "answer_id": 50137768, "question_id": 50137573, "link": "https://stackoverflow.com/questions/50137573/how-can-i-run-multiple-spec-folders-in-rspec-with-one-command/50137768#50137768", "title": "How can I run multiple spec folders in rspec with one command?", "body": "<p>Use your shell:</p>\n\n<pre><code>rspec `find . -type d -name spec`\n</code></pre>\n\n<p>The inner command will effectively find all folders named <code>spec</code> under current folder and run <code>rspec</code> for all of them. You might also alias this to save keystrokes:</p>\n\n<pre><code>alias rss=\"find . -type d -name spec -exec rspec {} \\;\"\n</code></pre>\n\n<p>Put the above into your shell\u2019s <code>.rc</code> file and type</p>\n\n<p>rss</p>\n\n<p>to run <code>rspec</code> on all these folders.</p>\n"}], "owner": {"reputation": 383, "user_id": 3985721, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9bee4235ea6f190c87d8162dfcc75009?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Hadik", "link": "https://stackoverflow.com/users/3985721/josh-hadik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 50137768, "answer_count": 1, "score": 1, "last_activity_date": 1525273765, "creation_date": 1525272722, "last_edit_date": 1525273308, "question_id": 50137573, "link": "https://stackoverflow.com/questions/50137573/how-can-i-run-multiple-spec-folders-in-rspec-with-one-command", "title": "How can I run multiple spec folders in rspec with one command?", "body": "<p>I'm working on a gem for myself that is kind of a library of different features that I use frequently across Rails applications. As such, this gem is structured with many different 'sub-gems' each relating to one behavior. You can see my folder structure here: </p>\n\n<p><a href=\"https://i.stack.imgur.com/5aCGU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5aCGU.png\" alt=\"enter image description here\"></a></p>\n\n<p>Each of the three folders: 'configurable', 'injectable' and 'defaultable', have their own lib and spec folders. </p>\n\n<p>I'm looking for a way to run 'rspec' from the command line in the base application directory (simple_skills) and have it run the main spec folder for simple skills, as well as each of the sub spec folders found in the folders I mentioned above, rather than having to go into each directory individually and manually run the tests from there: </p>\n\n<p>How can I tie all of the different sub spec folders together to run all of them together when I run 'rspec' from the command line?</p>\n\n<p>(Edited last line for clarity)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "csrf"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1525269835, "post_id": 50136239, "comment_id": 87291288, "body": "It seems like the question you&#39;re asking is an exact duplicate of the question you linked to, and your questions are already discussed and answered there. Can you explain why you asked another question, and why the existing answers to the duplicate question aren&#39;t working for you?"}], "answers": [{"tags": [], "owner": {"reputation": 230, "user_id": 1486234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945e89ebc5ab747e075d67c0058ee26f?s=128&d=identicon&r=PG", "display_name": "giglemad", "link": "https://stackoverflow.com/users/1486234/giglemad"}, "is_accepted": true, "score": 0, "last_activity_date": 1525275437, "creation_date": 1525275437, "answer_id": 50138467, "question_id": 50136239, "link": "https://stackoverflow.com/questions/50136239/handling-csrf-errors-in-rails/50138467#50138467", "title": "Handling CSRF Errors in Rails", "body": "<p>The answer you linked already provide some insights of what you could do Server Side.</p>\n\n<p>You can however prevent stale forms submission client side. Some javascript / UI tweaks can help you. </p>\n\n<p>Here are some ideas : \n - Display a Countdown\n - Pop up after 15 minutes that tells u to refresh\netc.</p>\n\n<p>Someone can always open the code and submit but then you dont care about that 422 error in the face of people trying to hack around.</p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 1, "accepted_answer_id": 50138467, "answer_count": 1, "score": 0, "last_activity_date": 1525275437, "creation_date": 1525268826, "question_id": 50136239, "link": "https://stackoverflow.com/questions/50136239/handling-csrf-errors-in-rails", "title": "Handling CSRF Errors in Rails", "body": "<p>I've got a scenario where a user may lay idle on a page and after about 15 minutes a post request from a user's browser will trigger a invalid CSRF token error. This question has been somewhat helpful, but I'm still uncertain how I should handle the error.  </p>\n\n<p><a href=\"https://stackoverflow.com/questions/40557350/rails-protect-from-forgery-breaks-login-form-if-idle/41786452\">Rails protect_from_forgery breaks login form if idle</a></p>\n\n<p>One comment in the question I have linked to above noted security issues with extending the Rails cookie expiration time. Is this indeed the case? Should I instead refresh the page when this error is thrown? I do not want to disable the CSRF protection. What would be the best way to handle this error and maintain usability? I'm also using Devise in my application. </p>\n\n<pre><code>Can't verify CSRF token authenticity.\nCompleted 422 Unprocessable Entity in 4ms (ActiveRecord: 0.0ms)\n\nActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave"], "answers": [{"comments": [{"owner": {"reputation": 405, "user_id": 5639287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2da4e9be5bbf048854f4e1621bd193ee?s=128&d=identicon&r=PG&f=1", "display_name": "code monkey", "link": "https://stackoverflow.com/users/5639287/code-monkey"}, "edited": false, "score": 0, "creation_date": 1525300771, "post_id": 50137826, "comment_id": 87307301, "body": "yes, I was searching something like that. Big thanks. One more thing, is this going to Uploader or somewhere else?"}, {"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "reply_to_user": {"reputation": 405, "user_id": 5639287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2da4e9be5bbf048854f4e1621bd193ee?s=128&d=identicon&r=PG&f=1", "display_name": "code monkey", "link": "https://stackoverflow.com/users/5639287/code-monkey"}, "edited": false, "score": 0, "creation_date": 1525335357, "post_id": 50137826, "comment_id": 87317980, "body": "You have to put this is the uploader"}], "tags": [], "owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "is_accepted": true, "score": 1, "last_activity_date": 1525273442, "creation_date": 1525273442, "answer_id": 50137826, "question_id": 50134958, "link": "https://stackoverflow.com/questions/50134958/rails-carrierwave-compress-file-in-specific-conditions/50137826#50137826", "title": "Rails Carrierwave - compress file in specific conditions", "body": "<p>I think you can use <code>before :store</code> hook. For example:</p>\n\n<pre><code>before :store, :compress_file\n\ndef compress_file(_file)\n  file_size = (File.size(file.path).to_f / 2**20)\n  if file_size &gt; x\n    # compress file\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 405, "user_id": 5639287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2da4e9be5bbf048854f4e1621bd193ee?s=128&d=identicon&r=PG&f=1", "display_name": "code monkey", "link": "https://stackoverflow.com/users/5639287/code-monkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 50137826, "answer_count": 1, "score": 0, "last_activity_date": 1525273442, "creation_date": 1525265021, "question_id": 50134958, "link": "https://stackoverflow.com/questions/50134958/rails-carrierwave-compress-file-in-specific-conditions", "title": "Rails Carrierwave - compress file in specific conditions", "body": "<p>I'm using <code>Carrierwave</code> and <code>carrierwave-base64</code> for file upload on <strong>Amazon S3</strong>. </p>\n\n<p>How can I compress uploaded files only if they are over <code>xMB</code>. Files are in jpeg, png and jpg formats as images. </p>\n"}, {"tags": ["ruby", "string", "range"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1525263117, "post_id": 50134319, "comment_id": 87286587, "body": "Please correct the wording in <i>\u201c<code>(&quot;A&quot;..&quot;&#197;&quot;)</code> is shorthand for <code>&quot;A&quot;.upto(&quot;&#197;&quot;)</code>\u201d</i> \u2014the former is a range, the latter is the call to the method returning an enumerator instance. They have nothing to do in common, save for calling <code>#to_a</code> on both results in the same outcome."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1525263838, "post_id": 50134319, "comment_id": 87287022, "body": "@mudasobwa, you are correct. I remember this wrong for some reason. Did it create ranges in previous versions?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1525264024, "post_id": 50134319, "comment_id": 87287134, "body": "I guess so. It quacks as a range :)"}, {"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "edited": false, "score": 0, "creation_date": 1525266799, "post_id": 50134319, "comment_id": 87289025, "body": "Wauw! Thank you @ndn. I understand now!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1525267910, "post_id": 50134319, "comment_id": 87289810, "body": "The spec says <i>&quot;character count&quot;</i>, not byte count."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1525269926, "post_id": 50134319, "comment_id": 87291358, "body": "@Stefan, right. But it&#39;s reasonable to assume that&#39;s what happens under the hood. Otherwise, it would have stopped at <code>AA</code>."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 6, "last_activity_date": 1525267196, "last_edit_date": 1525267196, "creation_date": 1525262888, "answer_id": 50134319, "question_id": 50133624, "link": "https://stackoverflow.com/questions/50133624/%c3%86-%c3%98-and-%c3%85-in-ruby-why-does-a-%c3%85-to-a-returns-double-alphabet/50134319#50134319", "title": "&#198;, &#216; and &#197; in Ruby - Why does (&quot;A&quot;..&quot;&#197;&quot;).to_a returns double alphabet?", "body": "<p><code>(\"A\"..\"\u00c5\")</code> works similarly to <code>\"A\".upto(\"\u00c5\")</code>. Now there are two things about <code>String#upto</code>:</p>\n\n<ul>\n<li>It uses <code>String#succ</code> to get the next value.</li>\n<li>According to <a href=\"https://github.com/ruby/ruby/blob/3527c05a8f4e189772cdac17f166bd9626c24661/spec/ruby/core/string/upto_spec.rb#L35-L39\" rel=\"nofollow noreferrer\">the Ruby specs</a> it stops iterating if the size of the current string becomes greater than the size of the final string. This is likely done to avoid infinite ranges.</li>\n</ul>\n\n<hr>\n\n<p><em>\"\u00c5\"</em> is encoded in two bytes:</p>\n\n<pre><code>\"\u00c5\".bytes # =&gt; [195, 133]\n</code></pre>\n\n<p>While <em>\"A\"</em> is encoded in just one:</p>\n\n<pre><code>\"A\".bytes # =&gt; [65]\n</code></pre>\n\n<hr>\n\n<p>Lets start iterating:</p>\n\n<pre><code>\"A\".succ # =&gt; \"B\"\n\"B\".succ # =&gt; \"C\"\n# ...\n\"Y\".succ # =&gt; \"Z\"\n\"Z\".succ # =&gt; \"AA\"\n\n\"AA\".succ # =&gt; \"AB\"\n# ...\n\"ZY\".succ # =&gt; \"ZZ\"\n\"ZZ\".succ # =&gt; \"AAA\"\n</code></pre>\n\n<hr>\n\n<p>Now <em>\"AAA\"</em> is still \"smaller\" than <em>\"\u00c5\"</em>:</p>\n\n<pre><code>\"AAA\" &lt; \"\u00c5\" # =&gt; true\n</code></pre>\n\n<p>But it has size of 3 bytes:</p>\n\n<pre><code>\"AAA\".bytes # =&gt; [65, 65, 65]\n</code></pre>\n\n<p>Hence as per <a href=\"https://github.com/ruby/ruby/blob/3527c05a8f4e189772cdac17f166bd9626c24661/spec/ruby/core/string/upto_spec.rb#L35-L39\" rel=\"nofollow noreferrer\">the spec</a>, the range stops here.</p>\n"}], "owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 50134319, "answer_count": 1, "score": 2, "last_activity_date": 1525267196, "creation_date": 1525260583, "last_edit_date": 1525265289, "question_id": 50133624, "link": "https://stackoverflow.com/questions/50133624/%c3%86-%c3%98-and-%c3%85-in-ruby-why-does-a-%c3%85-to-a-returns-double-alphabet", "title": "&#198;, &#216; and &#197; in Ruby - Why does (&quot;A&quot;..&quot;&#197;&quot;).to_a returns double alphabet?", "body": "<p>I was playing around in IRB, and found out that:</p>\n\n<p><code>(\"A\"..\"Z\").to_a</code> (of course) returns:</p>\n\n<pre><code>=&gt; [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\"]\n</code></pre>\n\n<p>But <code>(\"A\"..\"\u00c5\").to_a</code> returns: </p>\n\n<pre><code>=&gt; [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \n\"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"AA\", \"AB\", \"AC\", \"AD\", \n\"AE\", \"AF\", \"AG\", \"AH\", \"AI\", \"AJ\", \"AK\", \"AL\", \"AM\", \"AN\", \"AO\", \"AP\", \"AQ\", \n\"AR\", \"AS\", \"AT\", \"AU\", \"AV\", \"AW\", \"AX\", \"AY\", \"AZ\", \"BA\", \"BB\", \"BC\", \"BD\", \n\"BE\", \"BF\", \"BG\", \"BH\", \"BI\", \"BJ\", \"BK\", \"BL\", \"BM\", \"BN\", \"BO\", \"BP\", \"BQ\", \n\"BR\", \"BS\", \"BT\", \"BU\", \"BV\", \"BW\", \"BX\", \"BY\", \"BZ\", \"CA\", \"CB\", \"CC\", \"CD\", \n...\n\"ZR\", \"ZS\", \"ZT\", \"ZU\", \"ZV\", \"ZW\", \"ZX\", \"ZY\", \"ZZ\"]\n</code></pre>\n\n<p>I tried reading about the <code>to_a</code> method but couldn't find anything explaining this behaviour. </p>\n\n<p>Why is this happening?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1525257799, "post_id": 50132489, "comment_id": 87283284, "body": "Are you looking for a pure sql/activerecord solution? Or are you OK with a ruby one?"}, {"owner": {"reputation": 141, "user_id": 8731239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6406cb32c55193f324eab9d7b17bfaa4?s=128&d=identicon&r=PG&f=1", "display_name": "Yassine", "link": "https://stackoverflow.com/users/8731239/yassine"}, "reply_to_user": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1525257851, "post_id": 50132489, "comment_id": 87283318, "body": "@thesecretmaster I prefer SQL, but a ruby solution is helpful too. Thank you."}, {"owner": {"reputation": 31181, "user_id": 5176071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IQD5c.jpg?s=128&g=1", "display_name": "D-Shih", "link": "https://stackoverflow.com/users/5176071/d-shih"}, "edited": false, "score": 0, "creation_date": 1525259034, "post_id": 50132489, "comment_id": 87284051, "body": "@Yassine Would you mind if using postgresql&#39;s solution."}, {"owner": {"reputation": 141, "user_id": 8731239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6406cb32c55193f324eab9d7b17bfaa4?s=128&d=identicon&r=PG&f=1", "display_name": "Yassine", "link": "https://stackoverflow.com/users/8731239/yassine"}, "reply_to_user": {"reputation": 31181, "user_id": 5176071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IQD5c.jpg?s=128&g=1", "display_name": "D-Shih", "link": "https://stackoverflow.com/users/5176071/d-shih"}, "edited": false, "score": 0, "creation_date": 1525259325, "post_id": 50132489, "comment_id": 87284230, "body": "@D-Shih No problem"}], "answers": [{"tags": [], "owner": {"reputation": 2069, "user_id": 220292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6edcb304a03a87ddf5c68239f7d001e4?s=128&d=identicon&r=PG", "display_name": "stwienert", "link": "https://stackoverflow.com/users/220292/stwienert"}, "is_accepted": false, "score": 1, "last_activity_date": 1525258990, "creation_date": 1525258990, "answer_id": 50133089, "question_id": 50132489, "link": "https://stackoverflow.com/questions/50132489/rails-group-and-sum-while-adding-last-values-fibonacci/50133089#50133089", "title": "Rails: Group and sum while adding last values (Fibonacci)", "body": "<p>Solution in Ruby:</p>\n\n<pre><code>s = 0\ncurrent_user.quotes.group_by_month(:created_at, last: 12).\n  sum(:price).\n  transform_values.map { |v| s += v }\n</code></pre>\n\n<p>as there is only a hash of 12 elements, i suggest the performance penalty of using ruby instead of sql are marginal. Using SQL would be much harder and not possible only with simple ActiveRecord Arel methods or probably database specific, see e.g. <a href=\"https://stackoverflow.com/questions/22841206/calculating-cumulative-sum-in-postgresql\">Calculating Cumulative Sum in PostgreSQL</a></p>\n"}, {"tags": [], "owner": {"reputation": 31181, "user_id": 5176071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IQD5c.jpg?s=128&g=1", "display_name": "D-Shih", "link": "https://stackoverflow.com/users/5176071/d-shih"}, "is_accepted": true, "score": 4, "last_activity_date": 1525259481, "creation_date": 1525259481, "answer_id": 50133255, "question_id": 50132489, "link": "https://stackoverflow.com/questions/50132489/rails-group-and-sum-while-adding-last-values-fibonacci/50133255#50133255", "title": "Rails: Group and sum while adding last values (Fibonacci)", "body": "<p>If used <code>postgresql</code> you can use <em>windows function</em></p>\n\n<ol>\n<li><code>UNBOUNDED PRECEDING</code> first row,<code>CURRENT ROW</code> current rows</li>\n<li>use <code>sum</code> function to Accumulate</li>\n</ol>\n\n<p>like this.</p>\n\n<pre><code>select name,sum(price) \n         over(order by (select 1) ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW)  \"price\"\nfrom T\n</code></pre>\n\n<p><em>sqlfidde:<a href=\"http://sqlfiddle.com/#!17/763e3/7\" rel=\"nofollow noreferrer\">http://sqlfiddle.com/#!17/763e3/7</a></em></p>\n\n<p><a href=\"https://www.postgresql.org/docs/current/static/sql-expressions.html#SYNTAX-WINDOW-FUNCTIONS\" rel=\"nofollow noreferrer\">Widows function</a></p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 9730679, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YURL3Q3qxio/AAAAAAAAAAI/AAAAAAAAABI/Q6ZfAhvXrVw/photo.jpg?sz=128", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/9730679/naveen-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1525270076, "creation_date": 1525270076, "answer_id": 50136681, "question_id": 50132489, "link": "https://stackoverflow.com/questions/50132489/rails-group-and-sum-while-adding-last-values-fibonacci/50136681#50136681", "title": "Rails: Group and sum while adding last values (Fibonacci)", "body": "<p>We can use the following code for that</p>\n\n<pre><code> quotes = current_user.quotes\n sum = 0\n quotes.each_with_object({}) do |quote,hassh|\n     hassh[quote.name] = sum = quote.price + sum\n end\n hassh\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 8731239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6406cb32c55193f324eab9d7b17bfaa4?s=128&d=identicon&r=PG&f=1", "display_name": "Yassine", "link": "https://stackoverflow.com/users/8731239/yassine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 1, "accepted_answer_id": 50133255, "answer_count": 3, "score": 3, "last_activity_date": 1525270076, "creation_date": 1525257154, "last_edit_date": 1525258343, "question_id": 50132489, "link": "https://stackoverflow.com/questions/50132489/rails-group-and-sum-while-adding-last-values-fibonacci", "title": "Rails: Group and sum while adding last values (Fibonacci)", "body": "<p>I'm trying to group quotes sum per month, while adding last sums.</p>\n\n<p>For example:</p>\n\n<pre><code>Jan: 300\u20ac\nFev: 200\u20ac\nMars: 100\u20ac\n</code></pre>\n\n<p>What the group should return is:</p>\n\n<pre><code>Jan:300\u20ac\nFev: 500\u20ac (200 + Jan's 300)\nMars: 600\u20ac (100 + Fev's 500)\n</code></pre>\n\n<p>Current SQL:</p>\n\n<pre><code>current_user.quotes.group_by_month(:created_at, last: 12).sum(:price)\n</code></pre>\n\n<p>I'm using the <code>groupdate</code> gem.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "simple-form"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525255893, "post_id": 50131966, "comment_id": 87281992, "body": "Has the department table at least one record?"}, {"owner": {"reputation": 83, "user_id": 9729590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c40644d067ddd29a19f2bdafdb964a9c?s=128&d=identicon&r=PG&f=1", "display_name": "kareemhossam", "link": "https://stackoverflow.com/users/9729590/kareemhossam"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525256206, "post_id": 50131966, "comment_id": 87282162, "body": "yes, It has 2 entries."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 9729590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c40644d067ddd29a19f2bdafdb964a9c?s=128&d=identicon&r=PG&f=1", "display_name": "kareemhossam", "link": "https://stackoverflow.com/users/9729590/kareemhossam"}, "edited": false, "score": 0, "creation_date": 1525257010, "post_id": 50132044, "comment_id": 87282730, "body": "this generates a table entry but no department_id, also i noticed there was no username saved"}], "tags": [], "owner": {"reputation": 2069, "user_id": 220292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6edcb304a03a87ddf5c68239f7d001e4?s=128&d=identicon&r=PG", "display_name": "stwienert", "link": "https://stackoverflow.com/users/220292/stwienert"}, "is_accepted": false, "score": 1, "last_activity_date": 1525255727, "creation_date": 1525255727, "answer_id": 50132044, "question_id": 50131966, "link": "https://stackoverflow.com/questions/50131966/devise-and-simple-form-error-in-association/50132044#50132044", "title": "Devise and Simple_form error in association", "body": "<p>Rails since 5.1 or so has a required belongs_to validation with newly generated apps.</p>\n\n<p>You can disable that by:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  belongs_to :department, optional: true\nend\n</code></pre>\n\n<p>In this way, you can create users with an empty department first.</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 9729590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c40644d067ddd29a19f2bdafdb964a9c?s=128&d=identicon&r=PG&f=1", "display_name": "kareemhossam", "link": "https://stackoverflow.com/users/9729590/kareemhossam"}, "edited": false, "score": 0, "creation_date": 1525257817, "post_id": 50132093, "comment_id": 87283295, "body": "Thank you, I did what you said and it worked, made a controller to extend devise and added sign_up_params as private, and added def new super and def edit super it seems to be working the new entry had both username and department_id."}, {"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "reply_to_user": {"reputation": 83, "user_id": 9729590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c40644d067ddd29a19f2bdafdb964a9c?s=128&d=identicon&r=PG&f=1", "display_name": "kareemhossam", "link": "https://stackoverflow.com/users/9729590/kareemhossam"}, "edited": false, "score": 0, "creation_date": 1525259499, "post_id": 50132093, "comment_id": 87284362, "body": "You are welcome and.... you don&#39;t need to explicitly mention new/edit/etc. You can just write a very single sign_up_params. Everything else will be mapped to parent by default"}], "tags": [], "owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "is_accepted": true, "score": 3, "last_activity_date": 1525255861, "creation_date": 1525255861, "answer_id": 50132093, "question_id": 50131966, "link": "https://stackoverflow.com/questions/50131966/devise-and-simple-form-error-in-association/50132093#50132093", "title": "Devise and Simple_form error in association", "body": "<p>Devise doesn't know anything about your none standard <code>department_id</code> field and filters it as unpermitted parameter.</p>\n\n<p>Create your own registrations controller (which extends Devise) and then customize these methods:</p>\n\n<pre><code>def sign_up_params\n  params.require(:user).permit(:first_name, :last_name, :email, :password, :password_confirmation, :department_id)\nend\n</code></pre>\n\n<p>This is just a sample. Feel it in with your real field names</p>\n"}], "owner": {"reputation": 83, "user_id": 9729590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c40644d067ddd29a19f2bdafdb964a9c?s=128&d=identicon&r=PG&f=1", "display_name": "kareemhossam", "link": "https://stackoverflow.com/users/9729590/kareemhossam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 50132093, "answer_count": 2, "score": 4, "last_activity_date": 1525255861, "creation_date": 1525255467, "last_edit_date": 1525255739, "question_id": 50131966, "link": "https://stackoverflow.com/questions/50131966/devise-and-simple-form-error-in-association", "title": "Devise and Simple_form error in association", "body": "<p>I'm having trouble creating Sign up to my rails app, I'm using Devise and Simple_form, I have 2 models (User and department), users belongs_to :department and department has_many :users, i get an error when i try to sign up saying that department must exits.</p>\n\n<p><strong>devise/registrations/new.html.erb</strong></p>\n\n<pre><code>    &lt;h2&gt;Sign up&lt;/h2&gt;\n\n&lt;%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n  &lt;%= f.error_notification %&gt;\n\n  &lt;div class=\"form-inputs\"&gt;\n    &lt;%= f.input :username, required: true, autofocus: true %&gt;\n    &lt;%= f.input :email, required: true %&gt;\n    &lt;%= f.input :password, required: true, hint: (\"#{@minimum_password_length} characters minimum\" if @minimum_password_length) %&gt;\n    &lt;%= f.input :password_confirmation, required: true %&gt;&lt;br&gt;\n    &lt;%= f.association :department %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-actions\"&gt;\n    &lt;%= f.button :submit, \"Sign up\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;%= render \"devise/shared/links\" %&gt;\n</code></pre>\n\n<p><strong>user.rb</strong> :</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  validates_uniqueness_of :email, :username\n  belongs_to :department\n  has_and_belongs_to_many :courses\nend\n</code></pre>\n\n<p><strong>department.rb</strong> :</p>\n\n<pre><code>class Department &lt; ApplicationRecord\n  has_many :users\n  has_many :courses\nend\n</code></pre>\n\n<p>I populated the departments table using seeds.rb and checked through mysql console.</p>\n\n<p><strong>schema.rb</strong> :</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20180502071349) do\n\n  create_table \"courses\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=latin1\" do |t|\n    t.string \"name\"\n    t.text \"description\"\n    t.bigint \"department_id\"\n    t.string \"instructor_name\"\n    t.integer \"credit_hours\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"department_id\"], name: \"index_courses_on_department_id\"\n  end\n\n  create_table \"departments\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=latin1\" do |t|\n    t.string \"name\"\n    t.text \"description\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"enrollments\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=latin1\" do |t|\n    t.bigint \"user_id\"\n    t.bigint \"courses_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"courses_id\"], name: \"index_enrollments_on_courses_id\"\n    t.index [\"user_id\"], name: \"index_enrollments_on_user_id\"\n  end\n\n  create_table \"users\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=latin1\" do |t|\n    t.string \"email\", default: \"\", null: false\n    t.string \"encrypted_password\", default: \"\", null: false\n    t.string \"username\", default: \"\", null: false\n    t.bigint \"department_id\"\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer \"sign_in_count\", default: 0, null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string \"current_sign_in_ip\"\n    t.string \"last_sign_in_ip\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"department_id\"], name: \"index_users_on_department_id\"\n    t.index [\"email\"], name: \"index_users_on_email\", unique: true\n    t.index [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n    t.index [\"username\"], name: \"index_users_on_username\", unique: true\n  end\n\n  add_foreign_key \"courses\", \"departments\"\n  add_foreign_key \"enrollments\", \"courses\", column: \"courses_id\"\n  add_foreign_key \"enrollments\", \"users\"\n  add_foreign_key \"users\", \"departments\"\nend\n</code></pre>\n\n<p><strong>migration files</strong>:</p>\n\n<pre><code>class CreateDepartments &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :departments do |t|\n      t.string :name\n      t.text :description\n\n      t.timestamps\n    end\n  end\nend\n# frozen_string_literal: true\n\nclass DeviseCreateUsers &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :users do |t|\n      ## Database authenticatable\n      t.string :email,              null: false, default: \"\"\n      t.string :encrypted_password, null: false, default: \"\"\n      t.string :username,           null: false, default: \"\"\n      t.references :department, foreign_key: true\n\n      ## Recoverable\n      t.string   :reset_password_token\n      t.datetime :reset_password_sent_at\n\n      ## Rememberable\n      t.datetime :remember_created_at\n\n      ## Trackable\n      t.integer  :sign_in_count, default: 0, null: false\n      t.datetime :current_sign_in_at\n      t.datetime :last_sign_in_at\n      t.string   :current_sign_in_ip\n      t.string   :last_sign_in_ip\n\n      ## Confirmable\n      # t.string   :confirmation_token\n      # t.datetime :confirmed_at\n      # t.datetime :confirmation_sent_at\n      # t.string   :unconfirmed_email # Only if using reconfirmable\n\n      ## Lockable\n      # t.integer  :failed_attempts, default: 0, null: false # Only if lock strategy is :failed_attempts\n      # t.string   :unlock_token # Only if unlock strategy is :email or :both\n      # t.datetime :locked_at\n\n\n      t.timestamps null: false\n    end\n\n    add_index :users, :email,                unique: true\n    add_index :users, :reset_password_token, unique: true\n    add_index :users, :username,             unique: true\n    # add_index :users, :confirmation_token,   unique: true\n    # add_index :users, :unlock_token,         unique: true\n  end\nend\nclass CreateCourses &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :courses do |t|\n      t.string :name\n      t.text :description\n      t.references :department, foreign_key: true\n      t.string :instructor_name\n      t.integer :credit_hours\n\n      t.timestamps\n    end\n    create_table :enrollments do |t|\n      t.references :user, foreign_key: true\n      t.references :courses, foreign_key: true\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>P.S., I'm just starting out with rails and thanks for your help.</p>\n\n<p><a href=\"https://i.stack.imgur.com/GzBBJ.png\" rel=\"nofollow noreferrer\">Error screenshot:</a></p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1525255632, "post_id": 50131739, "comment_id": 87281816, "body": "<a href=\"https://github.com/rspec/rspec-mocks/blob/5cba05bbe37d446c4bf66343b2166d9c18e295ab/lib/rspec/mocks/matchers/receive.rb#L33\" rel=\"nofollow noreferrer\"><code>receive.rb#33</code></a> \u2013 seems like <code>not_to receive</code> uses <code>never</code> under the hood."}], "answers": [{"tags": [], "owner": {"reputation": 462, "user_id": 7236200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3e89931df93c19497126a2a36cb8bf?s=128&d=identicon&r=PG&f=1", "display_name": "amit bhosale", "link": "https://stackoverflow.com/users/7236200/amit-bhosale"}, "is_accepted": true, "score": 2, "last_activity_date": 1525260902, "creation_date": 1525260902, "answer_id": 50133733, "question_id": 50131739, "link": "https://stackoverflow.com/questions/50131739/is-receivemethod-never-completely-equivalent-to-not-to-receivemethod/50133733#50133733", "title": "Is receive(:method).never completely equivalent to not_to receive(:method)", "body": "<p>As per this link <a href=\"https://github.com/rspec/rspec-mocks/issues/895\" rel=\"nofollow noreferrer\">https://github.com/rspec/rspec-mocks/issues/895</a> \nYou can use either of these to cause an example to fail if a method is called\nAuthor @myronmarston also provided an example </p>\n"}], "owner": {"reputation": 5647, "user_id": 1162143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rLSfS.jpg?s=128&g=1", "display_name": "Alexander Presber", "link": "https://stackoverflow.com/users/1162143/alexander-presber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 50133733, "answer_count": 1, "score": 3, "last_activity_date": 1525260902, "creation_date": 1525254846, "question_id": 50131739, "link": "https://stackoverflow.com/questions/50131739/is-receivemethod-never-completely-equivalent-to-not-to-receivemethod", "title": "Is receive(:method).never completely equivalent to not_to receive(:method)", "body": "<p>Using RSpec 3.7.0. I would like to know whether writing </p>\n\n<pre><code>expect(instance).not_to receive(:method)\n</code></pre>\n\n<p>is <strong>completely</strong> identical to writing</p>\n\n<pre><code>expect(instance).to receive(:method).never\n</code></pre>\n\n<p>or if there are any (even subtle) differences or side effects.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525252683, "post_id": 50130964, "comment_id": 87279848, "body": "Maybe there is a better way, but why not use a hidden field in the form getting the required param from the url?"}, {"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1525253084, "post_id": 50130964, "comment_id": 87280096, "body": "have u set model associations ?"}, {"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "reply_to_user": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1525253294, "post_id": 50130964, "comment_id": 87280244, "body": "@GaganGupta Yeah, look I&#39;ve edited it to the question."}, {"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1525253479, "post_id": 50130964, "comment_id": 87280338, "body": "okay. Model associations are set pretty well but there&#39;s a problem with controller methods. So, wherever you&#39;ve set <code>@event.Subscriber.new</code> change it to <code>@event.subscriber.new</code>"}, {"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1525253576, "post_id": 50130964, "comment_id": 87280403, "body": "and also. Make it <code>@event = Event.find(params[:event_id])</code>"}, {"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "reply_to_user": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1525253924, "post_id": 50130964, "comment_id": 87280644, "body": "@GaganGupta I&#39;ve changed it, and still the same error :/"}, {"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1525258048, "post_id": 50130964, "comment_id": 87283458, "body": "can you share generate routes as well ?"}, {"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "reply_to_user": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1525265450, "post_id": 50130964, "comment_id": 87288121, "body": "@GaganGupta what do you mean by generate routes ?"}, {"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "reply_to_user": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525267653, "post_id": 50130964, "comment_id": 87289616, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/170223/discussion-between-gagan-gupta-and-arb\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525254109, "post_id": 50131297, "comment_id": 87280773, "body": "When I do that I get an error on the next line (@subscriber = @event.subscriber.new ) saying : undefined method `subscriber&#39; for #&lt;Event:0x00007f885358f8f8&gt; Did you mean? subscribers subscribers="}, {"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "reply_to_user": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525254178, "post_id": 50131297, "comment_id": 87280818, "body": "Yes, you are right, but if you check my code you will see, that I wrote not <code>subscriber</code>, but <code>subscriberS</code>. Just copy it properly"}, {"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "reply_to_user": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525254261, "post_id": 50131297, "comment_id": 87280868, "body": "If that helps I sincerely ask you to mark my answer with a tick and upvote for future searches by other people. Thanks in advance :)"}, {"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525254512, "post_id": 50131297, "comment_id": 87281044, "body": "After I added the S, I&#39;m getting this error: unknown attribute &#39;event_id&#39; for Subscriber."}, {"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "reply_to_user": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525254585, "post_id": 50131297, "comment_id": 87281105, "body": "Paste please a migration, that was used to create subscriptions table"}, {"owner": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "edited": false, "score": 0, "creation_date": 1525254616, "post_id": 50131297, "comment_id": 87281124, "body": "Need to add migration and use <code>build</code> instead of <code>new</code>"}, {"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "reply_to_user": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "edited": false, "score": 0, "creation_date": 1525254705, "post_id": 50131297, "comment_id": 87281183, "body": "@AlexanderSysuiev Yes, you are right. Updating my answer"}, {"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "reply_to_user": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "edited": false, "score": 0, "creation_date": 1525255609, "post_id": 50131297, "comment_id": 87281799, "body": "@AlexanderSysuiev here is the migration that was used to create the Subscribers table:  class CreateSubscribers &lt; ActiveRecord::Migration[5.1]   def change     create_table :subscribers do |t|       t.belongs_to :Event, foreign_key: true       t.string :name       t.string :email        t.timestamps     end   end end"}, {"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 0, "creation_date": 1525255985, "post_id": 50131297, "comment_id": 87282047, "body": "Check your <code>subscribers</code> table. It looks like you have <code>Event_id</code> field, when it should be <code>event_id</code>. In fact... just check all the fields that you have in your Event and paste it here"}, {"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525258761, "post_id": 50131297, "comment_id": 87283876, "body": "@AntonTkachov Yes you&#39;re right it is Event_id, to change it I need to do a new migration or just change it in the schema.rb ?"}, {"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 0, "creation_date": 1525259570, "post_id": 50131297, "comment_id": 87284416, "body": "<code>schema.rb</code> is just an info file. You can change it in any way, but it will not make any real changes to db. Yes, go with a new migration -- <code>rails g rename_Event_id_to_event_id_in_subscriptions</code>"}, {"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525260421, "post_id": 50131297, "comment_id": 87284967, "body": "@AntonTkachov I&#39;m doing this in the migration:     rename_column :subscriber, :Event_id, :event_id but I get this error: SQLite3::SQLException: duplicate column name: event_id: ALTER TABLE &quot;subscribers&quot; ADD &quot;event_id&quot; integer"}, {"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "reply_to_user": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525260704, "post_id": 50131297, "comment_id": 87285167, "body": "@Arb Strange... do you have any data in your subscribers model or is it blank? Added a migration in my answer, that I would use in such case. But it&#39;s destrutive and should be used only in case you have no real data in <code>Subscriber</code>"}], "tags": [], "owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "is_accepted": false, "score": 1, "last_activity_date": 1525260804, "last_edit_date": 1525260804, "creation_date": 1525253409, "answer_id": 50131297, "question_id": 50130964, "link": "https://stackoverflow.com/questions/50130964/how-to-associate-a-subscriber-to-an-event/50131297#50131297", "title": "How to associate a subscriber to an event", "body": "<p>I think you just have a typo in your <code>new</code> method. You call <code>params[:eventS_id]</code> when it should be <code>params[:event_id]</code>. Also you don't properly reference your association. it should be <code>event.subscribers.new</code>:</p>\n\n<pre><code>def new\n  #puts \"Look for me in console\\n\"\n  #puts params.inspect\n  @event = Event.find(params[:event_id])\n  @subscriber = @event.subscribers.build\nend\n</code></pre>\n\n<p>Migration:</p>\n\n<pre><code>def up\n  change_table :subscribers do |t|\n    t.remove :Event_id\n    t.references :event\n  end\nend\n\ndef down\n  change_table :subscribers do |t|\n    t.remove :event_id\n    t.add :Event_id, :integer\n  end\nend\n</code></pre>\n\n<p>Keep me posted whether this helps and if you have any additional issues</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525254949, "post_id": 50131436, "comment_id": 87281351, "body": "Hey thanks, for the model association I&#39;ve edited them to the question after Gagan comment,  for the new migration: something is missing the variable t is undefined, should I do: change_table :subscribers do |t| before ?"}, {"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525255537, "post_id": 50131436, "comment_id": 87281754, "body": "I think there already event_id in the subscribers, because i&#39;m getting this error while trying to migrate : duplicate column name: event_id: ALTER TABLE &quot;subscribers&quot; ADD &quot;event_id&quot; integer /Users/abderrahmane/workspace/Eventmanager/db/migrate/201805&zwnj;&#8203;02095034_addevent_id"}, {"owner": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "reply_to_user": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525257921, "post_id": 50131436, "comment_id": 87283375, "body": "So you have it in your db, and you don&#39;t need additional migration. It would be great if you expose this part of the <code>schema.rb</code> to be sure. Can you show current error with backtrace?"}, {"owner": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "reply_to_user": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525258117, "post_id": 50131436, "comment_id": 87283502, "body": "BTW, if you get &quot;unknown attribute &#39;event_id&#39; for Subscriber&quot; it is possible that you didn&#39;t run migration for this environment. So if you get this error in tests please do: <code>RAILS_ENV=test rake db:migrate</code>"}, {"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525259862, "post_id": 50131436, "comment_id": 87284586, "body": "I think like said Anton I have Event_id not event_id, here is my shema.rb  for the subscribers :    create_table &quot;subscribers&quot;, force: :cascade do |t|     t.integer &quot;Event_id&quot;     t.string &quot;name&quot;     t.string &quot;email&quot;     t.datetime &quot;created_at&quot;, null: false     t.datetime &quot;updated_at&quot;, null: false     t.integer &quot;events_id&quot;     t.index [&quot;Event_id&quot;], name: &quot;index_subscribers_on_Event_id&quot;     t.index [&quot;events_id&quot;], name: &quot;index_subscribers_on_events_id&quot;   end"}, {"owner": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "reply_to_user": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "edited": false, "score": 0, "creation_date": 1525265990, "post_id": 50131436, "comment_id": 87288475, "body": "Changed migration to make a proper database structure. Please try and let me now about any issues"}, {"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "reply_to_user": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "edited": false, "score": 0, "creation_date": 1525269118, "post_id": 50131436, "comment_id": 87290733, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/170226/discussion-between-arb-and-alexander-sysuiev\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "is_accepted": true, "score": 4, "last_activity_date": 1525265929, "last_edit_date": 1525265929, "creation_date": 1525253899, "answer_id": 50131436, "question_id": 50130964, "link": "https://stackoverflow.com/questions/50130964/how-to-associate-a-subscriber-to-an-event/50131436#50131436", "title": "How to associate a subscriber to an event", "body": "<p>Well, I think this <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">documentation</a> will help you to understand what you need to do.</p>\n\n<p>If briefly at first you need to change your models. You could have many to many for Event -> Subscriber association or one to many. One to many is the simplest to show so you need to add this to your Subscriber model:</p>\n\n<pre><code>belongs_to :event\n</code></pre>\n\n<p>And this to your Event model:</p>\n\n<pre><code>has_many :subscribers\n</code></pre>\n\n<p>Add new migration:</p>\n\n<pre><code>def change\n  remove_column :subscribers, :events_id\n  remove_column :subscribers, 'Event_id'\n  add_column :subscribers, :event_id, :integer\nend\n</code></pre>\n\n<p>Then in your controller, you should change method calls, as <code>Subscriber</code> is a class, not the method.</p>\n\n<pre><code>def new\n  @event = Event.find(params[:event_id])\n  @subscriber = @event.subscribers.build\nend\n</code></pre>\n\n<p>And you should be sure that in your database you have Event with this id.\nTo check it you can try to debug your controller code:</p>\n\n<pre><code>def new\n  puts \"Event ids: \" + Event.all.map(&amp;:id).inspect\n  @event = Event.find(params[:event_id])\n  @subscriber = @event.subscribers.build\nend\n</code></pre>\n\n<p>In your logs you should have something like:</p>\n\n<pre><code>Event ids: [1]\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 50131436, "answer_count": 2, "score": 1, "last_activity_date": 1525265929, "creation_date": 1525252279, "last_edit_date": 1525253263, "question_id": 50130964, "link": "https://stackoverflow.com/questions/50130964/how-to-associate-a-subscriber-to-an-event", "title": "How to associate a subscriber to an event", "body": "<p>I'm trying to make that a subscriber, sub to an certain event\nwith the following url per example: </p>\n\n<pre><code>http://localhost:3001/events/1/subscribers/new\n</code></pre>\n\n<p>but I don't know how to associate event_id when creating a new subscriber</p>\n\n<p>for the moment i'm getting this error: </p>\n\n<pre><code>Couldn't find Event with 'id'=\n</code></pre>\n\n<p>in the routes: </p>\n\n<pre><code> resources :events do\n    resources :subscribers #url/events/:events_id/subscribers/new\n  end\n\n  resources :events\n  root 'events#index'\n</code></pre>\n\n<p>in the subscribers controller: </p>\n\n<pre><code>def show\n  end\n\n  # GET /subscribers/new\n  def new\n    #puts \"Look for me in console\\n\"\n    #puts params.inspect\n    @event = Event.find(params[:events_id])\n    @subscriber = @event.Subscriber.new\n  end\n\n  # GET /subscribers/1/edit\n  def edit\n  end\n\n  # POST /subscribers\n  # POST /subscribers.json\n  def create\n    @event = Event.find(params[:order_id])\n    @subscriber = @event.Subscriber.new order_params\n    #@subscriber = Subscriber.new(subscriber_params)\n\n    respond_to do |format|\n      if @subscriber.save\n        SubsMailer.new_subscriber(@subscriber).deliver\n        format.html { redirect_to @subscriber, notice: 'Subscriber was successfully created.' }\n        format.json { render :show, status: :created, location: @subscriber }\n      else\n        format.html { render :new }\n        format.json { render json: @subscriber.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>in the new.html.erb: </p>\n\n<pre><code>&lt;h1&gt;New Subscriber&lt;/h1&gt;\n\n&lt;%= render 'form', subscriber: @subscriber %&gt;\n\n&lt;%= link_to 'Back', subscribers_path %&gt;\n</code></pre>\n\n<p>model association: </p>\n\n<p>event.rb: </p>\n\n<pre><code>class Event &lt; ApplicationRecord\n  has_many :subscribers, dependent: :destroy\nend\n</code></pre>\n\n<p>subscriber.rb:</p>\n\n<pre><code>class Subscriber &lt; ApplicationRecord\n  belongs_to :event\n  validates :email, presence: true,\n                    format: /\\A\\S+@\\S+\\z/,\n                    uniqueness: { case_sensitive: false }\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1525252149, "post_id": 50130822, "comment_id": 87279536, "body": "It means that the receiver of <code>model_name</code> in your <code>_profile_detail.html.erb</code> partial (line 45) is <code>nil</code>."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 9489349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311f6f5bab6da02e18d5819a55a77bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/9489349/harini"}, "edited": false, "score": 0, "creation_date": 1525252609, "post_id": 50130985, "comment_id": 87279800, "body": "I have two models for this web page. <code>User.rb</code> and <code>address.rb</code> but one controller. So how do i need to change? Can you explain since i am very new to ruby."}, {"owner": {"reputation": 89, "user_id": 9489349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311f6f5bab6da02e18d5819a55a77bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/9489349/harini"}, "edited": false, "score": 0, "creation_date": 1525257638, "post_id": 50130985, "comment_id": 87283189, "body": "thank you, but now only the name is getting updated in database and not the address. its storing as null in all fields"}, {"owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "reply_to_user": {"reputation": 89, "user_id": 9489349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311f6f5bab6da02e18d5819a55a77bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/9489349/harini"}, "edited": false, "score": 0, "creation_date": 1525259512, "post_id": 50130985, "comment_id": 87284376, "body": "as @stwienert said in his answer, i have to initialize <code>@user.address.build</code> in your controller"}], "tags": [], "owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "is_accepted": false, "score": 3, "last_activity_date": 1525259628, "last_edit_date": 1525259628, "creation_date": 1525252363, "answer_id": 50130985, "question_id": 50130822, "link": "https://stackoverflow.com/questions/50130822/undefined-method-model-name-for-nilnilclass/50130985#50130985", "title": "undefined method &#39;model_name&#39; for nil:NilClass", "body": "<p>Your controller name must be the same as your model in plural :</p>\n\n<pre><code># model user.rb\nclass User &lt; ApplicationRecord\nend\n\n# controller users_controller.rb\nclass UsersController &lt; ApplicationController\nend\n</code></pre>\n\n<p><strong>Edit:</strong><br>\nYou can add a nested association in your user model</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_one :address, dependent: :destroy\n  accepts_nested_attributes_for :address\nend\n</code></pre>\n\n<p>then change your <code>fields_for</code> like: </p>\n\n<pre><code>&lt;%= f.fields_for :address, @user.address do |a| %&gt;\n</code></pre>\n\n<p>and rename your controller and your permit params:</p>\n\n<pre><code>#controller name: users_controller.rb\nclass UsersController &lt; ApplicationController\n  before_action :set_user, only: %i[index update_profile]\n\n  def index; end\n\n  def update_profile\n    respond_to do |format|\n      if @user.update(user_params)\n        format.html { redirect_to profile_index_path, notice: 'Profile was successfully updated.' }\n      else\n        format.html { render :index }\n      end\n    end\n  end\n\nprivate\n\n  def set_user\n    @user = User.find(current_user.id)\n    @user.address.build\n  end\n\n  def user_params\n    params.require(:user).permit(:name, address_attributes: %i[area state country])\n  end\nend\n</code></pre>\n\n<p>note: don't forget to check your routes</p>\n"}, {"tags": [], "owner": {"reputation": 2069, "user_id": 220292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6edcb304a03a87ddf5c68239f7d001e4?s=128&d=identicon&r=PG", "display_name": "stwienert", "link": "https://stackoverflow.com/users/220292/stwienert"}, "is_accepted": true, "score": 1, "last_activity_date": 1525255548, "creation_date": 1525255548, "answer_id": 50131991, "question_id": 50130822, "link": "https://stackoverflow.com/questions/50130822/undefined-method-model-name-for-nilnilclass/50131991#50131991", "title": "undefined method &#39;model_name&#39; for nil:NilClass", "body": "<p>Your @address is probably nil. You must initialize it first in the controller or view</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def set_user\n    @user = User.find(current_user.id)\n    @user.address || @user.build_address\n  end\nend\n</code></pre>\n\n<p>or in the view above:</p>\n\n<pre><code>  &lt;% @user.address || @user.build_address %&gt;\n  &lt;%= f.fields_for :address do |a| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 9489349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311f6f5bab6da02e18d5819a55a77bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/9489349/harini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1867, "favorite_count": 0, "accepted_answer_id": 50131991, "answer_count": 2, "score": 0, "last_activity_date": 1525259628, "creation_date": 1525251828, "question_id": 50130822, "link": "https://stackoverflow.com/questions/50130822/undefined-method-model-name-for-nilnilclass", "title": "undefined method &#39;model_name&#39; for nil:NilClass", "body": "<p>I am trying to get address of users and save it in database but i am getting <code>undefined method 'model_name' for nil:NilClass</code>. In the same page the name can updated which is got during signup. I want name to be stored in users table and the address to be stored in addresses table in the database when the save changes button is presseed. I dont know where i am going wrong. please anyone help in fixing this issue!</p>\n\n<p>View Code</p>\n\n<pre><code>&lt;%= form_for(@user, url: { action: 'update_profile' }, html: { class: 'm-form m-form--fit m-form--label-align-right' } ) do |f| %&gt;\n  &lt;% if @user.errors.any? %&gt;\n    &lt;h4&gt;&lt;%= pluralize(@user.errors.count, \"error\") %&gt;\n      prohibited this profile from being saved:&lt;/h4&gt;\n    &lt;ul&gt;\n      &lt;% @user.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n    &lt;/ul&gt;\n  &lt;% end %&gt;\n  &lt;div class=\"form-group m-form__group row\"&gt;\n    &lt;label for=\"name\" class=\"col-2 col-form-label\"&gt;\n      Name\n    &lt;/label&gt;\n    &lt;div class=\"col-7\"&gt;\n      &lt;%= f.text_field :name, class: 'form-control m-input', placeholder: 'Full Name' %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"m-form__seperator m-form__seperator--dashed m-form__seperator--space-2x\"&gt;&lt;/div&gt;\n  &lt;%= f.fields_for @user.address do |a| %&gt;\n\n  &lt;div class=\"form-group m-form__group row\"&gt;\n    &lt;label for=\"example-text-input\" class=\"col-2 col-form-label\"&gt;\n      Address\n    &lt;/label&gt;\n    &lt;div class=\"col-7\"&gt;\n      &lt;%= a.text_field :area, class: 'form-control m-input', placeholder: 'Address' %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group m-form__group row\"&gt;\n    &lt;label for=\"example-text-input\" class=\"col-2 col-form-label\"&gt;\n      City\n    &lt;/label&gt;\n    &lt;div class=\"col-7\"&gt;\n      &lt;%= a.text_field :city, class: 'form-control m-input', placeholder: 'City' %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group m-form__group row\"&gt;\n    &lt;label for=\"example-text-input\" class=\"col-2 col-form-label\"&gt;\n      State\n    &lt;/label&gt;\n    &lt;div class=\"col-7\"&gt;\n      &lt;%= a.text_field :state, class: 'form-control m-input', placeholder: 'State' %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n&lt;%= f.submit 'Save Changes', class: 'btn btn-accent m-btn m-btn--air m-btn--custom' %&gt;\n&amp;nbsp;&amp;nbsp;\n&lt;%= link_to 'Back', root_path, class: 'btn btn-secondary m-btn m-btn--air m-btn--custom' %&gt;\n</code></pre>\n\n  \n\n<p>Controller code</p>\n\n<pre><code>class ProfileController &lt; ApplicationController\n  before_action :set_user, only: %i[index update_profile]\n\n  def index; end\n\n  def update_profile\n    respond_to do |format|\n      if @user.update(user_params)\n        format.html { redirect_to profile_index_path, notice: 'Profile was successfully updated.' }\n      else\n        format.html { render :index }\n      end\n    end\n  end\n\nprivate\n\n  def set_user\n    @user = User.find(current_user.id)\n  end\n\n  def user_params\n    params.require(:user).permit(:name)\n  end\n\n  def address_params\n    params.require(:user).permit(address: %i[area state country])\n  end\nend\n</code></pre>\n\n<p>Model code</p>\n\n<p>Address.rb</p>\n\n<pre><code>class Address &lt; ApplicationRecord\n  belongs_to :user\nend\n</code></pre>\n\n<p>User.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_one :address, dependent: :destroy\n\n  validates :name, presence: true\n  def admin?\n    false\n  end\nend\n</code></pre>\n\n<p>Terminal log</p>\n\n<pre><code>Started GET \"/profile\" for 127.0.0.1 at 2018-05-02 14:31:21 +0530\nProcessing by ProfileController#index as HTML\n  User Load (0.3ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 ORDER BY `users`.`id` ASC LIMIT 1\n  User Load (0.2ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1\n  Rendering profile/index.html.erb within layouts/application\n  Rendered profile/_profile_card.html.erb (0.2ms)\n  Address Load (0.2ms)  SELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`user_id` = 11 LIMIT 1\n  Rendered profile/_profile_detail.html.erb (3.4ms)\n  Rendered profile/index.html.erb within layouts/application (4.7ms)\nCompleted 401 Unauthorized in 8ms (ActiveRecord: 0.7ms)\n\n\n[Rollbar] Reporting exception: undefined method `model_name' for nil:NilClass\n[Rollbar] Scheduling item\n[Rollbar] Sending item\n[Rollbar] Success\n[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=60dbe4e1-e5ef-4414-a9a5-e8a866c47740 (only available if report was successful)\n[Rollbar] Exception uuid saved in env: 60dbe4e1-e5ef-4414-a9a5-e8a866c47740\n\nNoMethodError - undefined method `model_name' for nil:NilClass:\n  app/views/profile/_profile_detail.html.erb:45:in `block in _app_views_profile__profile_detail_html_erb___3163788399910446599_70315531332300'\n  app/views/profile/_profile_detail.html.erb:26:in `_app_views_profile__profile_detail_html_erb___3163788399910446599_70315531332300'\n  app/views/profile/index.html.erb:7:in `_app_views_profile_index_html_erb__1161982046354726382_70315531116820'\n\nStarted POST \"/__better_errors/0227f950024c358e/variables\" for 127.0.0.1 at 2018-05-02 14:31:22 +0530\n</code></pre>\n"}, {"tags": ["ruby", "activerecord", "psql"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1525251942, "post_id": 50130657, "comment_id": 87279409, "body": "Can you post the schema? Check your model: <code>Country has_one :country</code>?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525251957, "post_id": 50130657, "comment_id": 87279414, "body": "what do you mean by &quot;display a list&quot; ? ActiveRecord provides ways to build a relation. Assuming we can query the data correctly, what do you want to do with an object which may contain 50k records? where would you &quot;display&quot; it?"}, {"owner": {"reputation": 21, "user_id": 8450485, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155557754569699/picture?type=large", "display_name": "Miko Uy Dagatan", "link": "https://stackoverflow.com/users/8450485/miko-uy-dagatan"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525252483, "post_id": 50130657, "comment_id": 87279723, "body": "My apologies. I would display the list in table format, wherein the table headers are 1) Employee Name, 2) Location Name (current country the employee is residing in) (the real site has a lot more (e.g. salary, etc.) but the data I specified are what I deemed important for the question. @lacostenycoder"}, {"owner": {"reputation": 21, "user_id": 8450485, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155557754569699/picture?type=large", "display_name": "Miko Uy Dagatan", "link": "https://stackoverflow.com/users/8450485/miko-uy-dagatan"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525252695, "post_id": 50130657, "comment_id": 87279860, "body": "Ah it&#39;s not supposed to be that way, it&#39;s a writing error on my end. Will edit it for future readers. The schema I have has a lot of models and other fields of the specified models that are irrelevant to the question. Also, I would still need to leave them behind for confidentiality purposes. My apologies. @iGian"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525256476, "post_id": 50130657, "comment_id": 87282348, "body": "@MikoUyDagatan, I understand.Why not to add <code>belongs_to :employee_location</code> to <code>Country</code>?"}, {"owner": {"reputation": 21, "user_id": 8450485, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155557754569699/picture?type=large", "display_name": "Miko Uy Dagatan", "link": "https://stackoverflow.com/users/8450485/miko-uy-dagatan"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525257297, "post_id": 50130657, "comment_id": 87282927, "body": "@iGian My apologies again, it&#39;s supposed to be belongs_to :employee_location on Country since Employee already has many :countries, through: :employee_locations. Writing error."}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1525260612, "post_id": 50130657, "comment_id": 87285106, "body": "@MikoUyDagatan Did you try to also sort <code>employee_locations</code> by <code>created_at</code>? <code>.order(&#39;countries.name asc and employee_locations.created_at desc&#39;)</code>. You might need to add <code>references(:employee_locations)</code> at the end of AR query"}, {"owner": {"reputation": 21, "user_id": 8450485, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155557754569699/picture?type=large", "display_name": "Miko Uy Dagatan", "link": "https://stackoverflow.com/users/8450485/miko-uy-dagatan"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1525364449, "post_id": 50130657, "comment_id": 87337160, "body": "@MartinZinovsky hi Martin. Order didn&#39;t work with &#39;and&#39;. I had it changed to a comma. I added the references(:employee_locations) at the end of the code. With all that was suggested, it still didn&#39;t produce the desired result (It&#39;s still the same with my previous attempts). It didn&#39;t get ordered based on the last :employee_location data per :employee. It used the first :employee_location per :employee in doing the ordering."}], "owner": {"reputation": 21, "user_id": 8450485, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155557754569699/picture?type=large", "display_name": "Miko Uy Dagatan", "link": "https://stackoverflow.com/users/8450485/miko-uy-dagatan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1525365876, "creation_date": 1525251161, "last_edit_date": 1525365876, "question_id": 50130657, "link": "https://stackoverflow.com/questions/50130657/rails-active-query-getting-the-last-items-of-all-objects-in-bulk-in-a-has-ma", "title": "Rails: Active Query, Getting the last items of all objects (in bulk) in a has_many relationship", "body": "<p>I've searched for the answer for quite some time now. Probably a total of 30 hours of intermittent searching as the need arises, but I've always failed in finding the answer that yield the desired results. So I've decided to ask the question here in SO instead of adding more hours to the search.</p>\n\n<p>Let me put out the models in code to help better your knowledge of the scenario.</p>\n\n<pre><code>class Employee &lt; ApplicationRecord\n  has_many :employee_locations\n  has_many :countries, through: employee_locations\nend\n\nclass EmployeeLocation &lt; ApplicationRecord\n  belongs_to :employee\n  has_one    :country\nend\n\nclass Country &lt; ApplicationRecord\n  belongs_to :employee_location\nend\n</code></pre>\n\n<p>If I want to display a list in bulk (@employees) wherein all the Employees and all other details connected to each employee (Employee Name, Employee Location (which is the Country's name)). And, I wanted it ordered by the country.name where the employee is located by the latest employee_location record, how should I go about this in code? (has ransack)</p>\n\n<p>The closest one (despite hours of searching) is</p>\n\n<pre><code>@employees = Employee.includes(:countries).order('countries.name asc').ransack(params[:put_any]).result\n</code></pre>\n\n<p>However, it unfortunately uses the first employee_locations item for the employee object instead of the last. </p>\n\n<p>I'm totally clueless on how to go move forward from thereon as all SO questions/answers I've visited are unsatisfactory. Therefore, I'm asking the question on how to get the last items of all objects in a has_many relationship (all the last employee_locations for all employee objects), hopefully without making it into an array.</p>\n\n<p>Remember that the employee has_many employee_locations.</p>\n\n<p>I want to stress that this has to be in bulk (@employees), not one-by-one (@employee), as there are more than 50,000 records associated to the system, and therefore, will be slowed down by such code.</p>\n\n<p>Edit:\nJust to help you with the intended scenario / result.</p>\n\n<pre><code>Employees = A, B, C, D, E\nLocation = 1, 2, 3\n\nThe following locations are entered into the system in order\nEmployee A locations = 1, 2\nEmployee B locations = 2, 3\nEmployee C locations = 3, 1\nEmployee D locations = 2, 1\nEmployee E locations = 1, 3\n\nThe list should display:\nName       | Location\nEmployee C | Location 1\nEmployee D | Location 1\nEmployee A | Location 2\nEmployee B | Location 3\nEmployee E | Location 3\n\nPrevious attempts are displaying:\nName       | Location\nEmployee A | Location 2\nEmployee E | Location 3\nEmployee B | Location 3\nEmployee D | Location 1\nEmployee C | Location 1\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "answers": [{"tags": [], "owner": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "is_accepted": false, "score": 1, "last_activity_date": 1525252885, "creation_date": 1525252885, "answer_id": 50131135, "question_id": 50130538, "link": "https://stackoverflow.com/questions/50130538/rails-rearranging-orders-in-checklist-model/50131135#50131135", "title": "Rails rearranging orders in checklist model", "body": "<p>Well, you can try add additional field like <code>list_index</code>\nThen in <code>before create</code> callback in the model you can:</p>\n\n<pre><code>def set_index\n  list_index = self.class.last_index + 1\nend\n\ndef self.last_index\n  self.order(list_index: :desc).first.list_index\nend\n</code></pre>\n\n<p>Then on change position:</p>\n\n<pre><code>def change(current_index)\n  self.class.where(self.class.arel_table[:list_index].gte(current_index)).update_all('list_index = list_index + 1')\n  self.update(list_index: current_index)\nend\n</code></pre>\n\n<p>You can move the selection of elements with a higher index to the scope:</p>\n\n<pre><code>scope :after_index, -&gt;(current_index) { where(self.arel_table[:list_index].gte(current_index)) }\n</code></pre>\n"}], "owner": {"reputation": 500, "user_id": 2338769, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/rWbFL.jpg?s=128&g=1", "display_name": "Praveen KJ", "link": "https://stackoverflow.com/users/2338769/praveen-kj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525252885, "creation_date": 1525250752, "question_id": 50130538, "link": "https://stackoverflow.com/questions/50130538/rails-rearranging-orders-in-checklist-model", "title": "Rails rearranging orders in checklist model", "body": "<p>I am having a checklist model in rails with following columns.</p>\n\n<pre><code>product_id:int | content:string | archived:boolean | done:boolean\n</code></pre>\n\n<p>and i am currently listing those checklists in views normally like</p>\n\n<pre><code>&lt;ul&gt;\n    &lt;%=  @checklists.each do |list| %&gt;\n       &lt;li&gt;&lt;%= list.content %&gt;&lt;/li&gt;\n    &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>Now i want to let users rearrange checklists orders like in <a href=\"http://todoist.com\" rel=\"nofollow noreferrer\">todoist</a>.</p>\n\n<p>How can i do that in rails? Do i have to do a migration to the database with additional columns like <code>order:int</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "sendgrid", "griddler"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 8518439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2b6d9ac3f40567d5812fc5bd6d57ca?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/8518439/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1532606285, "creation_date": 1532606285, "answer_id": 51538309, "question_id": 50129626, "link": "https://stackoverflow.com/questions/50129626/how-to-skip-spf-validation-in-griddler-sendgrid-gem/51538309#51538309", "title": "How to skip SPF validation in &#39;griddler-sendgrid&#39; gem?", "body": "<p>Tried getting emails_controller.rb from github ?</p>\n\n<p><a href=\"https://github.com/thoughtbot/griddler\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/griddler</a></p>\n\n<p>\"fix ArgumentError with verify_authenticity_token on Rails API\"</p>\n\n<p>I've added <code>protect_from_forgery with: :null_session</code></p>\n\n<p>I think that null_session should be used in API controllers with no use for the session. It provides an empty session during request.</p>\n\n<p><a href=\"https://api.rubyonrails.org/classes/ActionController/RequestForgeryProtection/ClassMethods.html\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActionController/RequestForgeryProtection/ClassMethods.html</a></p>\n\n<p>In a controllers folder griddler add a new file from the Griddler github, or try the code below.</p>\n\n<p>/controllers/griddler/emails_controller.rb</p>\n\n<pre><code>class Griddler::EmailsController &lt; ActionController::Base\n\n  skip_before_action :verify_authenticity_token, raise: false\n  protect_from_forgery with: :null_session\n\n  def create\n    normalized_params.each do |p|\n      process_email email_class.new(p)\n    end\n\n    head :ok\n  end\n\n  private\n\n  delegate :processor_class, :email_class, :processor_method, :email_service, to: :griddler_configuration\n\n  private :processor_class, :email_class, :processor_method, :email_service\n\n  def normalized_params\n    Array.wrap(email_service.normalize_params(params))\n  end\n\n  def process_email(email)\n    processor_class.new(email).public_send(processor_method)\n  end\n\n  def griddler_configuration\n    Griddler.configuration\n  end\nend\n</code></pre>\n\n<p>Not fully sure with the whole solution, but hope it will help to get some more direction. </p>\n"}], "owner": {"reputation": 1, "user_id": 9729036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6097251a753a80346c54a66ac15c4be6?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/9729036/ankur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532606285, "creation_date": 1525247649, "last_edit_date": 1592644375, "question_id": 50129626, "link": "https://stackoverflow.com/questions/50129626/how-to-skip-spf-validation-in-griddler-sendgrid-gem", "title": "How to skip SPF validation in &#39;griddler-sendgrid&#39; gem?", "body": "<p>I am using gem 'griddler' with gem 'griddler-sendgrid' in my ruby on rails app for incoming mails.</p>\n<p>It is working fine on staging server but getting issue with production server. There is no issue in my configuration, I have confirmed this with <code>sendgrid support</code>. They told me to use only <code>DKIM validation</code> and remove <code>SPF check</code> from validations.</p>\n<p>I have checked both gem for that but didn't find anything relevant to that.</p>\n<p>Here is my gem configuration details:</p>\n<blockquote>\n<p>ruby '2.2.3'</p>\n<p>gem 'rails', '4.1.2'</p>\n<p>gem 'griddler', '1.4.0'</p>\n<p>gem 'griddler-sendgrid', '1.0.0'</p>\n</blockquote>\n<p>Can someone suggest me how can I skip SPF check validation in gem 'griddler-sendgrid'?</p>\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6904153"}, "edited": false, "score": 1, "creation_date": 1525245614, "post_id": 50128995, "comment_id": 87275994, "body": "This stackoverflow answer might help you. Check it out. <a href=\"https://stackoverflow.com/questions/5443740/how-do-i-handle-too-long-index-names-in-a-ruby-on-rails-migration-with-mysql\" title=\"how do i handle too long index names in a ruby on rails migration with mysql\">stackoverflow.com/questions/5443740/&hellip;</a>"}, {"owner": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "edited": false, "score": 0, "creation_date": 1525245622, "post_id": 50128995, "comment_id": 87275999, "body": "there&#39;s ahard limit for identfier (unless you compile different)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6904153"}, "edited": false, "score": 0, "creation_date": 1525245682, "post_id": 50128995, "comment_id": 87276041, "body": "This stackoverflow answer might help you. Check it out.(<a href=\"https://stackoverflow.com/questions/5443740/how-do-i-handle-too-long-index-names-in-a-ruby-on-rails-migration-with-mysql\" title=\"how do i handle too long index names in a ruby on rails migration with mysql\">stackoverflow.com/questions/5443740/&hellip;</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 9136318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba32997bd40a5a809cab469bb731d16?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/9136318/rahul"}, "edited": false, "score": 0, "creation_date": 1525256764, "post_id": 50129137, "comment_id": 87282550, "body": "this type of error was not there for rails 5.0.7 when I updated my rails to 5.2 I am getting this error.... what I have to do to get rid of this error"}], "tags": [], "owner": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "is_accepted": false, "score": 2, "last_activity_date": 1525245726, "creation_date": 1525245726, "answer_id": 50129137, "question_id": 50128995, "link": "https://stackoverflow.com/questions/50128995/index-name-index-name-is-too-long-the-limit-is-63-characters/50129137#50129137", "title": "Index name &quot;index_name&quot; is too long; the limit is 63 characters", "body": "<p><a href=\"https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html\" rel=\"nofollow noreferrer\">https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html</a></p>\n\n<blockquote>\n  <p>The system uses no more than NAMEDATALEN-1 bytes of an identifier;\n  longer names can be written in commands, but they will be truncated.\n  By default, NAMEDATALEN is 64 so the maximum identifier length is 63\n  bytes. If this limit is problematic, it can be raised by changing the\n  NAMEDATALEN constant in src/include/pg_config_manual.h.</p>\n</blockquote>\n\n<p>so unless you really want it and wish to recompile, 63 is a hard limit for the identifier</p>\n"}, {"tags": [], "owner": {"reputation": 2452, "user_id": 957253, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1a53d53e497e84d0a9ff735c7d519a59?s=128&d=identicon&r=PG", "display_name": "skozz", "link": "https://stackoverflow.com/users/957253/skozz"}, "is_accepted": true, "score": 3, "last_activity_date": 1526457582, "creation_date": 1526457582, "answer_id": 50365347, "question_id": 50128995, "link": "https://stackoverflow.com/questions/50128995/index-name-index-name-is-too-long-the-limit-is-63-characters/50365347#50365347", "title": "Index name &quot;index_name&quot; is too long; the limit is 63 characters", "body": "<p>You can try creating the index with a custom (and shorter) name: </p>\n\n<p><code>add_index(:accounts, [:branch_id, :party_id], unique: true, name: 'my_custom_and_shorter_name')\n</code></p>\n\n<p>Since you already have the <code>name</code> field there, just change the index name :)</p>\n"}], "owner": {"reputation": 89, "user_id": 9136318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba32997bd40a5a809cab469bb731d16?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/9136318/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2671, "favorite_count": 0, "closed_date": 1535050412, "accepted_answer_id": 50365347, "answer_count": 2, "score": 0, "last_activity_date": 1526457582, "creation_date": 1525245192, "last_edit_date": 1525245407, "question_id": 50128995, "link": "https://stackoverflow.com/questions/50128995/index-name-index-name-is-too-long-the-limit-is-63-characters", "closed_reason": "Duplicate", "title": "Index name &quot;index_name&quot; is too long; the limit is 63 characters", "body": "<p>when I'm running rails migration command. I'm getting index name is too long.\nMy migration file</p>\n\n<pre><code>class AddMissingIndices &lt; ActiveRecord::Migration\n  def change\n    # We'll explicitly specify its name, as the auto-generated name is too long and exceeds 63\n    # characters limitation.\n    add_index :mailboxer_conversation_opt_outs, [:unsubscriber_id, :unsubscriber_type],\n      name: 'index_mailboxer_conversation_opt_outs_on_unsubscriber_id_type'\n    add_index :mailboxer_conversation_opt_outs, :conversation_id\n\n    add_index :mailboxer_notifications, :type\n    add_index :mailboxer_notifications, [:sender_id, :sender_type]\n\n    # We'll explicitly specify its name, as the auto-generated name is too long and exceeds 63\n    # characters limitation.\n    add_index :mailboxer_notifications, [:notified_object_id, :notified_object_type],\n      name: 'index_mailboxer_notifications_on_notified_object_id_and_type'\n\n    add_index :mailboxer_receipts, [:receiver_id, :receiver_type]\n  end\nend\n</code></pre>\n\n<p>Server logs are</p>\n\n<blockquote>\n  <p>rails aborted!</p>\n  \n  <p>StandardError: An error has occurred, this and all later migrations canceled:</p>\n  \n  <p>Index name 'index_mailboxer_conversation_opt_outs_on_unsubscriber_type_and_unsubscriber_id' on table 'mailboxer_conversation_opt_outs' is too long; the limit is 63 characters\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/connection_adapters/abstract/schema_statements.rb:1353:in <code>validate_index_length!'\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/connection_adapters/abstract/schema_statements.rb:1166:in</code>add_index_options'\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/connection_adapters/postgresql/schema_statements.rb:465:in <code>add_index'\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/connection_adapters/abstract/schema_statements.rb:315:in</code>block in create_table'\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/connection_adapters/abstract/schema_statements.rb:314:in <code>each'\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/connection_adapters/abstract/schema_statements.rb:314:in</code>create_table'\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/migration.rb:871:in <code>block in method_missing'\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/migration.rb:840:in</code>block in say_with_time'\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/migration.rb:840:in <code>say_with_time'\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/migration.rb:860:in</code>method_missing'\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/migration/compatibility.rb:36:in <code>create_table'\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/migration/compatibility.rb:75:in</code>create_table'\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/migration.rb:604:in <code>method_missing'\n  /home/sharat/rahul/Fleet-Latest/db/migrate/20170425092621_add_conversation_optout.mailboxer_engine.rb:4:in</code>up'\n  /home/sharat/.rvm/gems/ruby-2.4.3/gems/activerecord-5.2.0/lib/active_record/migration.rb:777:in `up'</p>\n</blockquote>\n"}, {"tags": ["ruby", "puma"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1525244840, "post_id": 50128530, "comment_id": 87275585, "body": "This has nothing to do with the webserver itself. It\u2019s the target OS responsibility <a href=\"https://linux.die.net/man/8/logrotate\" rel=\"nofollow noreferrer\"><code>man logrotate(8)</code></a>."}, {"owner": {"reputation": 462, "user_id": 7236200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3e89931df93c19497126a2a36cb8bf?s=128&d=identicon&r=PG&f=1", "display_name": "amit bhosale", "link": "https://stackoverflow.com/users/7236200/amit-bhosale"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1525246582, "post_id": 50128530, "comment_id": 87276545, "body": "@mudasobwa thanks for the reply. I just read few forums regarding logrotate.  I thought maybe Puma server have a plugin or configuration option to provide logrotate feature."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1525247046, "post_id": 50128530, "comment_id": 87276767, "body": "Why would the webserver double the functionality provided by any OS out of the box?"}, {"owner": {"reputation": 71, "user_id": 445876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69487d8b574ec4e5ba69db819f9b418?s=128&d=identicon&r=PG", "display_name": "Dave K", "link": "https://stackoverflow.com/users/445876/dave-k"}, "edited": false, "score": 0, "creation_date": 1525248859, "post_id": 50128530, "comment_id": 87277695, "body": "Hi @amitbhosale I found this tutorial pretty useful when starting out with logrotate <a href=\"https://gorails.com/guides/rotating-rails-production-logs-with-logrotate\" rel=\"nofollow noreferrer\">gorails.com/guides/&hellip;</a>"}, {"owner": {"reputation": 462, "user_id": 7236200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3e89931df93c19497126a2a36cb8bf?s=128&d=identicon&r=PG&f=1", "display_name": "amit bhosale", "link": "https://stackoverflow.com/users/7236200/amit-bhosale"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1525256747, "post_id": 50128530, "comment_id": 87282534, "body": "@mudasobwa True, I read Nginx article posted (How To Configure Logging and Log Rotation in Nginx). They have suggested use logrotate"}, {"owner": {"reputation": 462, "user_id": 7236200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3e89931df93c19497126a2a36cb8bf?s=128&d=identicon&r=PG&f=1", "display_name": "amit bhosale", "link": "https://stackoverflow.com/users/7236200/amit-bhosale"}, "reply_to_user": {"reputation": 71, "user_id": 445876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69487d8b574ec4e5ba69db819f9b418?s=128&d=identicon&r=PG", "display_name": "Dave K", "link": "https://stackoverflow.com/users/445876/dave-k"}, "edited": false, "score": 0, "creation_date": 1525256761, "post_id": 50128530, "comment_id": 87282546, "body": "@dave-k  thanks for the sharing a very informative link"}], "owner": {"reputation": 462, "user_id": 7236200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3e89931df93c19497126a2a36cb8bf?s=128&d=identicon&r=PG&f=1", "display_name": "amit bhosale", "link": "https://stackoverflow.com/users/7236200/amit-bhosale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 462, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525244856, "creation_date": 1525243268, "last_edit_date": 1525244856, "question_id": 50128530, "link": "https://stackoverflow.com/questions/50128530/how-to-rotate-puma-ruby-web-server-logs-stdout-and-stderr", "title": "How to rotate Puma Ruby web server logs (stdout and stderr)?", "body": "<p>In the Puma.rb file (Redirect STDOUT and STDERR to files specified)</p>\n\n<pre><code># stdout_redirect '/tmp/tistdout', '/u/apps/lolcat/log/stderr'\nstdout_redirect '/tmp/batman_stdout', '/tmp/batman_stderr', true\n</code></pre>\n\n<p>Can you please tell me the option to enable log rotation (for the puma web serve)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "excel", "axlsx"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525243377, "post_id": 50128473, "comment_id": 87274853, "body": "I think you should format the cell to the required currency, instead of appending a string."}, {"owner": {"reputation": 655, "user_id": 6046641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c716b970d2d8e6ca81ed19a4b0c26fb1?s=128&d=identicon&r=PG", "display_name": "Umesh Malhotra", "link": "https://stackoverflow.com/users/6046641/umesh-malhotra"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525243531, "post_id": 50128473, "comment_id": 87274931, "body": "But how do I do that from code itself(not from downloaded excelsheet)?"}], "answers": [{"comments": [{"owner": {"reputation": 484, "user_id": 10302775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2845b94c2766a2c2e2bbd56c5bafbba6?s=128&d=identicon&r=PG&f=1", "display_name": "Biju", "link": "https://stackoverflow.com/users/10302775/biju"}, "edited": false, "score": 0, "creation_date": 1551944741, "post_id": 50129734, "comment_id": 96828192, "body": "This was very helpful. Thanks! Is there a way to encapsulate the currency amount within braces if it is negative; and also display it in red? Pls advise"}, {"owner": {"reputation": 484, "user_id": 10302775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2845b94c2766a2c2e2bbd56c5bafbba6?s=128&d=identicon&r=PG&f=1", "display_name": "Biju", "link": "https://stackoverflow.com/users/10302775/biju"}, "edited": false, "score": 0, "creation_date": 1551954937, "post_id": 50129734, "comment_id": 96834156, "body": "I tried this code - <code>currency_style = wb.styles.add_style(:format_code =&gt; &quot;($#,##0_);[Red]($#,##0)&quot;)</code>. This formats currency with comma separators all right; it also puts parenthesis around currency values when they are negative. But the coloring in red does not happen for negative currencies. Any idea how to implement red coloring for negative currencies?"}, {"owner": {"reputation": 484, "user_id": 10302775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2845b94c2766a2c2e2bbd56c5bafbba6?s=128&d=identicon&r=PG&f=1", "display_name": "Biju", "link": "https://stackoverflow.com/users/10302775/biju"}, "edited": false, "score": 0, "creation_date": 1551962013, "post_id": 50129734, "comment_id": 96838477, "body": "one small correction please. The code shown in my previous comment does these 2 things - 1. displays sum when i select multiple cells 2. displays comma separators for thousand separator. But it does NOT do these 2 things - 1. Display negative currency in red. 2. Display ONLY negative currencies within parenthesis  (this code displays BOTH positive and negative values in parenthesis which is wrong). Please help!"}], "tags": [], "owner": {"reputation": 655, "user_id": 6046641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c716b970d2d8e6ca81ed19a4b0c26fb1?s=128&d=identicon&r=PG", "display_name": "Umesh Malhotra", "link": "https://stackoverflow.com/users/6046641/umesh-malhotra"}, "is_accepted": true, "score": 5, "last_activity_date": 1525248072, "creation_date": 1525248072, "answer_id": 50129734, "question_id": 50128473, "link": "https://stackoverflow.com/questions/50128473/how-to-format-currency-columns-in-axlsx/50129734#50129734", "title": "How to format currency columns in Axlsx?", "body": "<p>I solved this by using custom format_code</p>\n\n<pre><code>custom_format = sheet.styles.add_style(:format_code =&gt; \"#.00  &amp;quot;Dr&amp;quot;\")\n</code></pre>\n"}], "owner": {"reputation": 655, "user_id": 6046641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c716b970d2d8e6ca81ed19a4b0c26fb1?s=128&d=identicon&r=PG", "display_name": "Umesh Malhotra", "link": "https://stackoverflow.com/users/6046641/umesh-malhotra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1602, "favorite_count": 1, "accepted_answer_id": 50129734, "answer_count": 1, "score": 5, "last_activity_date": 1525251347, "creation_date": 1525242997, "last_edit_date": 1525251347, "question_id": 50128473, "link": "https://stackoverflow.com/questions/50128473/how-to-format-currency-columns-in-axlsx", "title": "How to format currency columns in Axlsx?", "body": "<p>I am using ruby Axlsx gem for writing my clients accounts data in xlsx. Now I am appending \" Dr\" string to all debit amounts which is making amount as a string e.g. \"1000 Dr\". I want to append \" Dr\" but the amount should still be an integer and excel should give sum at bottom when column is selected.</p>\n\n<p>What I am doing, notice that excel shows sum = 0 in bottom-right even on selecting :-\n<a href=\"https://i.stack.imgur.com/vlLNm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vlLNm.png\" alt=\"enter image description here\"></a></p>\n\n<p>What I am doing, notice that cell remains a string on selecting (880 Dr should become 880.00 on selecting the cell):-<a href=\"https://i.stack.imgur.com/Ck0QU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ck0QU.png\" alt=\"enter image description here\"></a></p>\n\n<p>What I want to do, excel should show sum of selected colums as shown by excel in bottom-right sum=1957.00 Dr:-<a href=\"https://i.stack.imgur.com/OVpJL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OVpJL.png\" alt=\"enter image description here\"></a></p>\n\n<p>What I want to do, the cell should be converted to number when double clicked (1341.00 Dr has become 1341 on selecting)but Dr should be visible on unselecting again:- \n<a href=\"https://i.stack.imgur.com/H5VWT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H5VWT.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 947, "user_id": 367480, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/DdQe5.jpg?s=128&g=1", "display_name": "Ilya Vassilevsky", "link": "https://stackoverflow.com/users/367480/ilya-vassilevsky"}, "is_accepted": false, "score": 3, "last_activity_date": 1525292382, "creation_date": 1525292382, "answer_id": 50142928, "question_id": 50128108, "link": "https://stackoverflow.com/questions/50128108/rails-master-key-error-on-heroku-deployment/50142928#50142928", "title": "RAILS_MASTER_KEY error on Heroku deployment", "body": "<p><code>RAILS_MASTER_KEY</code> should contain the same value that is in the file <code>config/secrets.yml.key</code> in your project on your computer. You only need to copy it from the file and paste it in Heroku settings. You do not need to generate new secret.</p>\n"}], "owner": {"reputation": 75, "user_id": 8847290, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BJbwJl-oe4c/AAAAAAAAAAI/AAAAAAAAA2s/WyMcpimMWTY/photo.jpg?sz=128", "display_name": "Haris Uddin", "link": "https://stackoverflow.com/users/8847290/haris-uddin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1089, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1525292382, "creation_date": 1525241285, "question_id": 50128108, "link": "https://stackoverflow.com/questions/50128108/rails-master-key-error-on-heroku-deployment", "title": "RAILS_MASTER_KEY error on Heroku deployment", "body": "<p>I am getting the following error while deploying my rails app on Heroku</p>\n\n<pre><code>-----&gt; Installing node-v8.10.0-linux-x64\n-----&gt; Detecting rake tasks\n-----&gt; Preparing app for Rails asset pipeline\n       Running: rake assets:precompile\n       rake aborted!\n       Rails::Secrets::MissingKeyError: Missing encryption key to decrypt secrets with. Ask your team for your master key and put it in ENV[\"RAILS_MASTER_KEY\"]\n</code></pre>\n\n<p>Now if I set environment variable RAILS_MASTER_KEY with the value generated from rake secret . I get this error</p>\n\n<pre><code>-----&gt; Installing node-v8.10.0-linux-x64\n-----&gt; Detecting rake tasks\n-----&gt; Preparing app for Rails asset pipeline\n       Running: rake assets:precompile\n       rake aborted!\n       ActiveSupport::MessageEncryptor::InvalidMessage: ActiveSupport::MessageEncryptor::InvalidMessage\n</code></pre>\n\n<p>There is a solution on git regarding this.</p>\n\n<p><a href=\"https://gist.github.com/kaspth/bc37989c2f39a5642112f28b1d93f343\" rel=\"nofollow noreferrer\">https://gist.github.com/kaspth/bc37989c2f39a5642112f28b1d93f343</a></p>\n\n<p>If I implement the method mentioned in the above github issue. I get the the following error that is also regarding the RAILS_MASTER_KEY.</p>\n\n<pre><code>Generating a new higher entropy encryption key in config/secrets.yml.key.\nRotate the encryption key now.\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/railties-5.1.6/lib/rails/secrets.rb:77:in `handle_missing_key': Missing encryption key to decrypt secrets with. Ask your team for your master key and put it in ENV[\"RAILS_MASTER_KEY\"]\n(Rails::Secrets::MissingKeyError)\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525237511, "post_id": 50127387, "comment_id": 87272681, "body": "Is the format (supposed to be) JSON? If it is, then mention it. Not just use JSON method suddenly in the code and expect the reader to guess why. If it is not JSON, then don&#39;t use JSON method."}, {"owner": {"reputation": 373, "user_id": 1695182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc2e61afd5ae30fe8b01bc2edbf09a72?s=128&d=identicon&r=PG", "display_name": "toHo", "link": "https://stackoverflow.com/users/1695182/toho"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525238508, "post_id": 50127387, "comment_id": 87272990, "body": "It usually is JSON format, but i have done wrong extraction last night and i have no idea about ruby. and it was either ask you guys for help or wait another 20h to extract correctly formatted file."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1525250595, "post_id": 50127387, "comment_id": 87278642, "body": "That looks like MongoDB data. Try to export it as JSON."}], "answers": [{"tags": [], "owner": {"reputation": 1850, "user_id": 5281047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R6JZs.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5281047/gabriel"}, "is_accepted": false, "score": 1, "last_activity_date": 1525237868, "creation_date": 1525237868, "answer_id": 50127496, "question_id": 50127387, "link": "https://stackoverflow.com/questions/50127387/how-to-extract-data-from-line-in-ruby/50127496#50127496", "title": "How to extract data from line in ruby?", "body": "<p>You can use the <code>\\s(\\d+)\\s</code> regex, no JSON parsing is required.</p>\n\n<pre><code>line.match(/\\s(\\d+)\\s/)[1] #=&gt; \"357103\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 791, "user_id": 2806421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c596a539ebafc5258d34b59c52086d3?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Sharkey", "link": "https://stackoverflow.com/users/2806421/josh-sharkey"}, "is_accepted": false, "score": 1, "last_activity_date": 1525243717, "last_edit_date": 1525243717, "creation_date": 1525238367, "answer_id": 50127573, "question_id": 50127387, "link": "https://stackoverflow.com/questions/50127387/how-to-extract-data-from-line-in-ruby/50127573#50127573", "title": "How to extract data from line in ruby?", "body": "<p>Are the ids made up of all numbers? You can try using a regex that looks for a colon then a list of numbers.</p>\n\n<pre><code>Line.match(/\"id \" : [0-9]+/)\n</code></pre>\n\n<p>Looks for Id followed by any length of integers.</p>\n\n<p>If it has letters and numbers then:</p>\n\n<pre><code>Line.match(/\"id\" :[[:alnum:]]+/)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "is_accepted": false, "score": 0, "last_activity_date": 1525245230, "creation_date": 1525245230, "answer_id": 50129004, "question_id": 50127387, "link": "https://stackoverflow.com/questions/50127387/how-to-extract-data-from-line-in-ruby/50129004#50129004", "title": "How to extract data from line in ruby?", "body": "<p>You could just match using splicing:</p>\n\n<pre><code>line[/(?&lt;= )\\d+/] = 357103\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "is_accepted": true, "score": 3, "last_activity_date": 1525252226, "last_edit_date": 1525252226, "creation_date": 1525250745, "answer_id": 50130536, "question_id": 50127387, "link": "https://stackoverflow.com/questions/50127387/how-to-extract-data-from-line-in-ruby/50130536#50130536", "title": "How to extract data from line in ruby?", "body": "<p>Splitting is faster than Regex here. With such a large file, it might make a noticeable difference.</p>\n\n<p>Also, it looks like you need to escape those double quotes: <code>line.split(\"\\\"id\\\" : \")</code></p>\n\n<pre><code>&gt; puts Benchmark.measure{line.split(\"\\\"id\\\" : \").last.delete('}').delete(' ')}\n  0.000000   0.000000   0.000000 (  0.000020)\n\n&gt; puts Benchmark.measure{line.match(/\\s(\\d+)\\s/)[1]}\n  0.000000   0.000000   0.000000 (  0.000043)\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>Even faster, use splitting all the way:</p>\n\n<pre><code>&gt; puts Benchmark.measure{line.split(\"\\\"id\\\" : \").last.split(' ').first }\n  0.000000   0.000000   0.000000 (  0.000008)\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>Though as Stefan mentions in his comment, it looks like your file is BSON (MongoDB) not JSON. There is a Mongo <a href=\"https://rubygems.org/gems/mongo/versions/2.2.5\" rel=\"nofollow noreferrer\">gem</a>.</p>\n"}], "owner": {"reputation": 373, "user_id": 1695182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc2e61afd5ae30fe8b01bc2edbf09a72?s=128&d=identicon&r=PG", "display_name": "toHo", "link": "https://stackoverflow.com/users/1695182/toho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 50130536, "answer_count": 4, "score": 1, "last_activity_date": 1525252226, "creation_date": 1525236952, "last_edit_date": 1525237873, "question_id": 50127387, "link": "https://stackoverflow.com/questions/50127387/how-to-extract-data-from-line-in-ruby", "title": "How to extract data from line in ruby?", "body": "<p>I have a file with 10m lines, with each line like this:</p>\n\n<pre><code>{ \"_id\" : ObjectId(\"567f972cad55ac0797baa773\"), \"id\" : 357103 }\n</code></pre>\n\n<p>For each line, I need to do something with its <code>\"id\"</code> value.</p>\n\n<p>So far I have:</p>\n\n<pre><code>listings.each.with_index do |line, idx|\n  # listing_id = JSON.parse(line).fetch(\"id\") #&gt;&gt; invalid JSON error\n  # line.split('\"id : \"') #=&gt; some gibberish\n  line.match(/\"id\" : (.*)/)[1] #=&gt; \"357103 }\"\n</code></pre>\n\n<p><code>parse</code> throws an error that the lines are not valid json. <code>split</code> returns some gibberish. The closest result I got to my expectation was <code>match</code>, but it returns for the above example <code>\"357103 }\"</code>.</p>\n\n<p>Can you please help me fix it?</p>\n"}, {"tags": ["ruby", "minimagick"], "owner": {"reputation": 11, "user_id": 9728395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da2a507b103684ad526caf80cf6a9f3?s=128&d=identicon&r=PG&f=1", "display_name": "HITman", "link": "https://stackoverflow.com/users/9728395/hitman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525234849, "creation_date": 1525234849, "question_id": 50127123, "link": "https://stackoverflow.com/questions/50127123/minimagick-resize-image", "title": "MiniMagick Resize Image", "body": "<p>I'm trying to use <code>MiniMagick</code> to resize 2 images and overlay one on top of the other. Heres the code I am using</p>\n\n<pre><code>require \"mini_magick\"\n\nfirst_image  = MiniMagick::Image.new(\"spider.jpg\")\nfirst_image = first_image.resize(\"250x250\")\n\nsecond_image = MiniMagick::Image.new(\"q.png\")\nsecond_image = second_image.resize(\"250x250\")\n\nresult = first_image.composite(second_image) do |c|\nc.compose \"Over\"    # OverCompositeOp\n  c.gravity \"center\"\n  # c.resize(\"250x250\")\nend\nresult.write \"output.jpg\"\n</code></pre>\n\n<p>This overlays the images but neither is resized and the overlay image ends up awkwardly cropped. Ive tried making both the same size, making the bigger overlay image smaller and the smaller image bigger, but none seem to work. Any advice would be highly appreciated.  </p>\n"}, {"tags": ["html", "ruby", "jekyll", "liquid"], "comments": [{"owner": {"reputation": 10005, "user_id": 724036, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/6VXVJ.jpg?s=128&g=1", "display_name": "zishe", "link": "https://stackoverflow.com/users/724036/zishe"}, "edited": false, "score": 0, "creation_date": 1525236296, "post_id": 50127109, "comment_id": 87272332, "body": "Try to render <code>post.category</code> maybe it&#39;s capitalised or smth. Have you checked that condition is correct?"}, {"owner": {"reputation": 962, "user_id": 3100464, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VRh6Q.jpg?s=128&g=1", "display_name": "dawn", "link": "https://stackoverflow.com/users/3100464/dawn"}, "reply_to_user": {"reputation": 10005, "user_id": 724036, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/6VXVJ.jpg?s=128&g=1", "display_name": "zishe", "link": "https://stackoverflow.com/users/724036/zishe"}, "edited": false, "score": 0, "creation_date": 1525236851, "post_id": 50127109, "comment_id": 87272523, "body": "@zishe Yeah, it is correct, and there&#39;s any other text format."}, {"owner": {"reputation": 962, "user_id": 3100464, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VRh6Q.jpg?s=128&g=1", "display_name": "dawn", "link": "https://stackoverflow.com/users/3100464/dawn"}, "reply_to_user": {"reputation": 10005, "user_id": 724036, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/6VXVJ.jpg?s=128&g=1", "display_name": "zishe", "link": "https://stackoverflow.com/users/724036/zishe"}, "edited": false, "score": 2, "creation_date": 1525238968, "post_id": 50127109, "comment_id": 87273134, "body": "I solved it changing post.category for page.category."}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 1, "creation_date": 1525260003, "post_id": 50127109, "comment_id": 87284672, "body": "@dawn It would be better if you could write up how you solved your problem as an answer, so that it&#39;s more obvious to someone else who may have the same problem."}], "answers": [{"tags": [], "owner": {"reputation": 962, "user_id": 3100464, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VRh6Q.jpg?s=128&g=1", "display_name": "dawn", "link": "https://stackoverflow.com/users/3100464/dawn"}, "is_accepted": false, "score": 0, "last_activity_date": 1525287555, "creation_date": 1525287555, "answer_id": 50141709, "question_id": 50127109, "link": "https://stackoverflow.com/questions/50127109/include-disqus-html-only-if-post-category-textual-not-working/50141709#50141709", "title": "Include disqus.html only if post.category == &#39;textual&#39; not working", "body": "<p>I solved it by changing <code>post.category</code> for <code>page.category</code>.</p>\n"}], "owner": {"reputation": 962, "user_id": 3100464, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VRh6Q.jpg?s=128&g=1", "display_name": "dawn", "link": "https://stackoverflow.com/users/3100464/dawn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525287555, "creation_date": 1525234677, "question_id": 50127109, "link": "https://stackoverflow.com/questions/50127109/include-disqus-html-only-if-post-category-textual-not-working", "title": "Include disqus.html only if post.category == &#39;textual&#39; not working", "body": "<p>Using <strong>Jekyll</strong>, I'm trying to <strong>only include</strong> the disqus.html in posts with the 'textual' category:</p>\n\n<pre><code>&lt;div class=\"container-fluid\"&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;!-- Men\u00fa lateral --&gt;\n    {%include menu-lateral.html%}\n    &lt;div class=\"col-sm-10\" id=\"main-content-post\"&gt;\n      &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-sm-10\"&gt;\n          &lt;h2&gt;{{ post.title }}&lt;/h2&gt;\n          {{content}}\n\n          {% if post.category == \"textual\" %}\n            {% include disqus.html %}\n          {% endif %}\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Though, it doesn't works :~)</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 3, "creation_date": 1525233037, "post_id": 50126722, "comment_id": 87271635, "body": "Why Ruby 1.8.7? It&#39;s a decade old; you will have problems no matter what you do..."}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 1, "creation_date": 1525234193, "post_id": 50126722, "comment_id": 87271882, "body": "Your OpenSSL is probably too new for a Ruby version that old. Note deprecation warnings in your logs. Doesn&#39;t have to be <i>ancient</i> for this to happen though. A <a href=\"https://github.com/rvm/rvm/issues/3862\" rel=\"nofollow noreferrer\">seemingly relevant github issue</a> suggests it has to do with all Rubies older than 2.3 with OpenSSL newer than 1.0 (not even 1.1)."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 1, "creation_date": 1525242318, "post_id": 50126722, "comment_id": 87274366, "body": "You could run it in a container. There&#39;s several ruby containers on dockerhub with 1.8.7 in them."}], "answers": [{"comments": [{"owner": {"reputation": 1693, "user_id": 3125034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf504c742c994b180094d6784b80f166?s=128&d=identicon&r=PG", "display_name": "iheggie", "link": "https://stackoverflow.com/users/3125034/iheggie"}, "edited": false, "score": 0, "creation_date": 1573786129, "post_id": 51025714, "comment_id": 104008124, "body": "This solved the problem for me on 18.04.3 LTS (Bionic Beaver) installing ruby 1.8.7-p375 and 1.9.3-p551"}], "tags": [], "owner": {"reputation": 125, "user_id": 538461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52aad1556d30538dd3e412b6a8de1963?s=128&d=identicon&r=PG", "display_name": "danw", "link": "https://stackoverflow.com/users/538461/danw"}, "is_accepted": false, "score": 2, "last_activity_date": 1529936442, "creation_date": 1529936442, "answer_id": 51025714, "question_id": 50126722, "link": "https://stackoverflow.com/questions/50126722/error-installing-ruby-1-8-in-ubuntu-18-04/51025714#51025714", "title": "Error installing ruby 1.8 in ubuntu 18.04", "body": "<p>I ran into a very similar error installing 1.9.3 on Ubuntu 18.04.  I did the following to get around it -</p>\n\n<pre><code>sudo apt install libssl1.0-dev\n</code></pre>\n\n<p>and then rebuilt Ruby.  </p>\n"}], "owner": {"reputation": 1, "user_id": 9728262, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\uae40\ub2e4\ud76c", "link": "https://stackoverflow.com/users/9728262/%ea%b9%80%eb%8b%a4%ed%9d%ac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1041, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529936442, "creation_date": 1525231761, "question_id": 50126722, "link": "https://stackoverflow.com/questions/50126722/error-installing-ruby-1-8-in-ubuntu-18-04", "title": "Error installing ruby 1.8 in ubuntu 18.04", "body": "<p>I removed installed ruby: sudo apt-get purge ruby\nand I Download and compile ruby:</p>\n\n<pre><code>wget http://cache.ruby-lang.org/pub/ruby/1.8/ruby-1.8.7-p374.tar.gz\ntar -xzvf ruby-1.8.7-p374.tar.gz\ncd ruby-1.8.7-p374\n./configure\n</code></pre>\n\n<p>AND Build a MakeFile using the specific compiler.</p>\n\n<pre><code>make CC=gcc-4.4\n</code></pre>\n\n<p>An error occurred when compiling.</p>\n\n<p>Error in compiling openssl</p>\n\n<p>compiling openssl</p>\n\n<pre><code>make[1]: \ub514\ub809\ud130\ub9ac '/ruby-1.8.7-p374/ext/openssl' \ub4e4\uc5b4\uac10\ngcc-4.4 -I. -I../.. -I../../. -I../.././ext/openssl - \nDRUBY_EXTCONF_H=\\\"extconf.h\\\"    -fPIC -g -O2    -c ossl_hmac.c\nIn file included from ossl.h:57,\n             from ossl_hmac.c:13:\n/usr/include/openssl/asn1_mac.h:10: error: #error \"This file is obsolete; \nplease update your software.\"\nIn file included from ossl.h:205,\n             from ossl_hmac.c:13:\nopenssl_missing.h:79: error: macro \"EVP_MD_CTX_create\" passed 1 arguments, but takes just 0\nopenssl_missing.h:83: error: expected declaration specifiers or \u2018...\u2019 before \u2018(\u2019 token\nopenssl_missing.h:83: error: conflicting types for \u2018EVP_MD_CTX_reset\u2019\n/usr/include/openssl/evp.h:498: note: previous declaration of \n\u2018EVP_MD_CTX_reset\u2019 was here\nopenssl_missing.h:91: error: expected declaration specifiers or \u2018...\u2019 before \u2018(\u2019 token\nossl_hmac.c: In function \u2018ossl_hmac_alloc\u2019:\nossl_hmac.c:54: error: invalid application of \u2018sizeof\u2019 to incomplete type \u2018HMAC_CTX\u2019 \nossl_hmac.c:54: error: invalid application of \u2018sizeof\u2019 to incomplete type \u2018HMAC_CTX\u2019 `enter code here`\nossl_hmac.c: In function \u2018ossl_hmac_initialize\u2019:\nossl_hmac.c:73: warning: \u2018HMAC_Init\u2019 is deprecated (declared at /usr/include/openssl/hmac.h:28)\nossl_hmac.c: In function \u2018hmac_final\u2019:\nossl_hmac.c:114: error: storage size of \u2018final\u2019 isn\u2019t known\nossl_hmac.c: In function \u2018ossl_hmac_reset\u2019:\nossl_hmac.c:182: warning: \u2018HMAC_Init\u2019 is deprecated (declared at /usr/include/openssl/hmac.h:28)\nMakefile:197: recipe for target 'ossl_hmac.o' failed\nmake[1]: *** [ossl_hmac.o] Error 1\nmake[1]: DIR '/ruby-1.8.7-p374/ext/openssl' \ub098\uac10\nMakefile:293: recipe for target 'all' failed\nmake: *** [all] Error 1`\n</code></pre>\n\n<p>How can i resolve this error..</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 41, "user_id": 9707553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce465c286f828d39af2191ec12b307a9?s=128&d=identicon&r=PG&f=1", "display_name": "Wilke Jones", "link": "https://stackoverflow.com/users/9707553/wilke-jones"}, "edited": false, "score": 0, "creation_date": 1525268408, "post_id": 50125718, "comment_id": 87290180, "body": "Its not the same question. The one I had asked has completely different coding and isn&#39;t as coherent. Please take off the mark of it being a duplicate"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9707553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce465c286f828d39af2191ec12b307a9?s=128&d=identicon&r=PG&f=1", "display_name": "Wilke Jones", "link": "https://stackoverflow.com/users/9707553/wilke-jones"}, "edited": false, "score": 0, "creation_date": 1525268832, "post_id": 50125747, "comment_id": 87290506, "body": "can you simplify the (books, true) please? You&#39;re saying that it it takes the books portion so if it takes it as true does it then negate the y portion of it? How does true make it go backwards?"}, {"owner": {"reputation": 631, "user_id": 1990276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa4eab6f2c71685297427a2e4d01aa3?s=128&d=identicon&r=PG&f=1", "display_name": "natschz", "link": "https://stackoverflow.com/users/1990276/natschz"}, "reply_to_user": {"reputation": 41, "user_id": 9707553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce465c286f828d39af2191ec12b307a9?s=128&d=identicon&r=PG&f=1", "display_name": "Wilke Jones", "link": "https://stackoverflow.com/users/9707553/wilke-jones"}, "edited": false, "score": 0, "creation_date": 1525270291, "post_id": 50125747, "comment_id": 87291642, "body": "It means calling alphabetize(books) is the same as calling alphabetize(books, false). The function itself sorts the books are you pass it if rev is true it inverses the array otherwise not"}], "tags": [], "owner": {"reputation": 631, "user_id": 1990276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa4eab6f2c71685297427a2e4d01aa3?s=128&d=identicon&r=PG&f=1", "display_name": "natschz", "link": "https://stackoverflow.com/users/1990276/natschz"}, "is_accepted": false, "score": 0, "last_activity_date": 1525222362, "creation_date": 1525222362, "answer_id": 50125747, "question_id": 50125718, "link": "https://stackoverflow.com/questions/50125718/need-to-dissect-this-program-reverse-the-array/50125747#50125747", "title": "Need to dissect this program! (Reverse the Array)", "body": "<p>rev=false - this is just a default value for rev so you can call the function with or without a second parameter.</p>\n\n<p>#{} - used in a string allows you to escape the string this means it executes the code inbetween the curly brackets this would be the same as \"Z-A: \" + alphabetize(books, true)</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 9707553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce465c286f828d39af2191ec12b307a9?s=128&d=identicon&r=PG&f=1", "display_name": "Wilke Jones", "link": "https://stackoverflow.com/users/9707553/wilke-jones"}, "edited": false, "score": 0, "creation_date": 1525268549, "post_id": 50125749, "comment_id": 87290310, "body": "Again I just asked for it to be simple using my example. I understand its a default argument but this isn&#39;t coherent man. I appreciate the help of course but if you can simplify it that&#39;d be appreciated"}], "tags": [], "owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "is_accepted": false, "score": 0, "last_activity_date": 1525222377, "creation_date": 1525222377, "answer_id": 50125749, "question_id": 50125718, "link": "https://stackoverflow.com/questions/50125718/need-to-dissect-this-program-reverse-the-array/50125749#50125749", "title": "Need to dissect this program! (Reverse the Array)", "body": "<p>The <code>def foo(bar=\"baz\", c=4)</code> syntax is called \"default arguments\". It means that if there is no argument passed to the function, the argument will take the default value. For example, in <code>foo(\"boo\")</code>, you've passed <code>bar</code> to be <code>\"boo\"</code>, but since you haven't passed a value for <code>c</code>, it will be <code>4</code>, by default.</p>\n\n<p>The idea of default arguments is also present with keyword arguments. The differences between keyword arguments and default arguments are discussed <a href=\"https://stackoverflow.com/questions/36368051/default-value-vs-keyword-argument\">in this question</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 9707553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce465c286f828d39af2191ec12b307a9?s=128&d=identicon&r=PG&f=1", "display_name": "Wilke Jones", "link": "https://stackoverflow.com/users/9707553/wilke-jones"}, "edited": false, "score": 0, "creation_date": 1525268651, "post_id": 50125759, "comment_id": 87290383, "body": "Can you just explain with my example please? So if rev but how would it turn to be false?"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "reply_to_user": {"reputation": 41, "user_id": 9707553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce465c286f828d39af2191ec12b307a9?s=128&d=identicon&r=PG&f=1", "display_name": "Wilke Jones", "link": "https://stackoverflow.com/users/9707553/wilke-jones"}, "edited": false, "score": 0, "creation_date": 1525302739, "post_id": 50125759, "comment_id": 87307736, "body": "updated my answer, see if it helps @WilkeJones"}], "tags": [], "owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "is_accepted": false, "score": 0, "last_activity_date": 1525302722, "last_edit_date": 1525302722, "creation_date": 1525222449, "answer_id": 50125759, "question_id": 50125718, "link": "https://stackoverflow.com/questions/50125718/need-to-dissect-this-program-reverse-the-array/50125759#50125759", "title": "Need to dissect this program! (Reverse the Array)", "body": "<p>That is a way of setting default parameters for you function in case you don't pass one, for eg</p>\n\n<pre><code>def add(a, b, format=true)\n  if format\n    \"a + b = #{a+b}\"\n  else\n    a+b\n  end\nend\n</code></pre>\n\n<p>in the example above you can either call the function <code>add</code> with or without the <code>format</code> value, if you just call it as <code>add(2,3)</code> the value of <code>format</code> will be true but you can chose to set format off by doing <code>add(2,3,false)</code></p>\n\n<p><strong>EDIT 1</strong></p>\n\n<p>In your example, when you do <code>puts \"A-Z: #{alphabetize(books)}\"</code> you are not passing the second argument, so in the <code>alphabetize</code> function, <code>rev</code> gets the default <code>false</code> value and so it goes to else block and returns you <code>arr.sort { |item1, item2| item1 &lt;=&gt; item2 }</code></p>\n\n<p>but, when you call the method with a second argument as in <code>puts \"Z-A: #{alphabetize(books, true)}\"</code> you are passing <code>true</code> which overwrites the default value of <code>rev</code> in the method so now since <code>rev</code> is true it goes into the if block and returns you <code>arr.sort { |item1, item2| item2 &lt;=&gt; item1 }</code>.</p>\n\n<p>Hope it helps</p>\n"}], "owner": {"reputation": 41, "user_id": 9707553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce465c286f828d39af2191ec12b307a9?s=128&d=identicon&r=PG&f=1", "display_name": "Wilke Jones", "link": "https://stackoverflow.com/users/9707553/wilke-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "closed_date": 1525227257, "answer_count": 3, "score": 0, "last_activity_date": 1525302722, "creation_date": 1525222058, "last_edit_date": 1525223533, "question_id": 50125718, "link": "https://stackoverflow.com/questions/50125718/need-to-dissect-this-program-reverse-the-array", "closed_reason": "Duplicate", "title": "Need to dissect this program! (Reverse the Array)", "body": "<p>I'm not really understanding the <code>rev=false</code> portion which comes after <code>def alphabetize</code>:</p>\n\n<pre><code>def alphabetize (arr, rev=false)\n</code></pre>\n\n<p>or the portion:</p>\n\n<pre><code>if rev\n</code></pre>\n\n<p>If someone can explain it to me in simple terms that'd be great.  When I \nsearch this question up it pops up with help as far as how it works which I understand, however I don't get <code>arr=false</code> or the last line.</p>\n\n<pre><code>puts \"Z-A: #{alphabetize(books, true)}\"\n</code></pre>\n\n<p>I'm sure those learning thru CodeAcademy would appreciate the answer. This is the code for reference. </p>\n\n<pre><code>def alphabetize (arr, rev=false)\n  if rev\n    arr.sort { |item1, item2| item2 &lt;=&gt; item1 }\n  else\n    arr.sort { |item1, item2| item1 &lt;=&gt; item2 }\n  end\nend\n\nbooks = [\"Heart of Darkness\", \"Code Complete\", \"The Lorax\",\"The Prophet\", \"Absalom\"]\n\nputs \"A-Z: #{alphabetize(books)}\"\nputs \"Z-A: #{alphabetize(books, true)}\"\n</code></pre>\n"}, {"tags": ["ruby", "syntax"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525220616, "post_id": 50125469, "comment_id": 87269125, "body": "There are those who call the two pipes, <code>|x|</code>, &quot;goal posts&quot;..."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1525242602, "post_id": 50125469, "comment_id": 87274520, "body": "You&#39;ll often see them being called &quot;closures&quot;. The language itself seems to call them blocks, there&#39;s the <code>block_given?</code> method for example."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8773096"}, "edited": false, "score": 0, "creation_date": 1525220261, "post_id": 50125512, "comment_id": 87269064, "body": "cool, that link is exactly what I needed! I&#39;ll accept your answer in 6 minutes or whatever. :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525220593, "post_id": 50125512, "comment_id": 87269119, "body": "blue, why the rush to select an answer? Quick selections may discourage other answers and short-circuit others working on answers. There&#39;s no rush."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8773096"}, "edited": false, "score": 0, "creation_date": 1525220788, "post_id": 50125512, "comment_id": 87269172, "body": "I mean, because the question is answered?"}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1525221561, "post_id": 50125512, "comment_id": 87269337, "body": "I don&#39;t see a problem with rushing to accept an answer. I  believe this shouldn&#39;t steer other people off writing better answers. @blue totally can change his mind about what answer to accept after the fact."}], "tags": [], "owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "is_accepted": false, "score": 1, "last_activity_date": 1525220454, "last_edit_date": 1525220454, "creation_date": 1525220162, "answer_id": 50125512, "question_id": 50125469, "link": "https://stackoverflow.com/questions/50125469/what-is-this-syntax-called-n-usern/50125512#50125512", "title": "What is this syntax called? { |n| &quot;user#{n}&quot; }", "body": "<p>This appears to be called a <a href=\"https://medium.com/@sihui/what-the-heck-are-code-blocks-procs-lambdas-and-closures-in-ruby-2b0737f08e95\" rel=\"nofollow noreferrer\">\"code block\"</a>. </p>\n\n<p>It seems to essentially be an anonymous function. <code>n</code> is the parameter of the function in this case. </p>\n"}, {"comments": [{"owner": {"reputation": 655, "user_id": 2267838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5a108bc5392c7a355b756eaa0869465?s=128&d=identicon&r=PG", "display_name": "UsamaMan", "link": "https://stackoverflow.com/users/2267838/usamaman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525220871, "post_id": 50125562, "comment_id": 87269190, "body": "@CarySwoveland  This might explain your query regarding curly braces having higher precedence. <a href=\"https://stackoverflow.com/a/5587403/2267838\">stackoverflow.com/a/5587403/2267838</a>"}, {"owner": {"reputation": 655, "user_id": 2267838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5a108bc5392c7a355b756eaa0869465?s=128&d=identicon&r=PG", "display_name": "UsamaMan", "link": "https://stackoverflow.com/users/2267838/usamaman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525220930, "post_id": 50125562, "comment_id": 87269203, "body": "I will update my answer regarding procs being blocks. You\u2019re right about that."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1525221380, "post_id": 50125562, "comment_id": 87269291, "body": "Thank you for the link regarding precedence. That&#39;s interesting. I was not aware of that."}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 1, "creation_date": 1525221884, "post_id": 50125562, "comment_id": 87269411, "body": "See the difference between the two in <code>irb</code> or <code>pry</code>: <code>def x(arg = nil); puts block_given?; end</code>, <code>x x { }</code> and <code>x x do; end</code> (results are printed &quot;inside out&quot;, e. g. the call on the right, then the call on the left)"}, {"owner": {"reputation": 655, "user_id": 2267838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5a108bc5392c7a355b756eaa0869465?s=128&d=identicon&r=PG", "display_name": "UsamaMan", "link": "https://stackoverflow.com/users/2267838/usamaman"}, "reply_to_user": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1525230240, "post_id": 50125562, "comment_id": 87271090, "body": "Thanks for mentioning this example @D-side. Its really helpful."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1525240783, "post_id": 50125562, "comment_id": 87273734, "body": "These two are NOT equal , one returns array and another one returns enumerator."}, {"owner": {"reputation": 655, "user_id": 2267838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5a108bc5392c7a355b756eaa0869465?s=128&d=identicon&r=PG", "display_name": "UsamaMan", "link": "https://stackoverflow.com/users/2267838/usamaman"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1525247239, "post_id": 50125562, "comment_id": 87276863, "body": "@Rajagopalan. You&#39;re right. But the examples I gave, they are interchangeable. They definitely are not equal."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1525247405, "post_id": 50125562, "comment_id": 87276938, "body": "@UsamaMan ALL RIGHT, okay"}], "tags": [], "owner": {"reputation": 655, "user_id": 2267838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5a108bc5392c7a355b756eaa0869465?s=128&d=identicon&r=PG", "display_name": "UsamaMan", "link": "https://stackoverflow.com/users/2267838/usamaman"}, "is_accepted": true, "score": 5, "last_activity_date": 1525221297, "last_edit_date": 1525221297, "creation_date": 1525220529, "answer_id": 50125562, "question_id": 50125469, "link": "https://stackoverflow.com/questions/50125469/what-is-this-syntax-called-n-usern/50125562#50125562", "title": "What is this syntax called? { |n| &quot;user#{n}&quot; }", "body": "<p>It\u2019s called a block. There are two types of blocks in ruby. One is this syntax in curly braces and second is the <code>do end</code>. These both are interchangeable but the curly braces have higher precedence. Therefore these programs are interchangeable:</p>\n\n<pre><code>my_array.each do |element|\n  puts element\nend\n\n\nmy_array.each {|element|\n  puts element\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/q/5587264/2267838\">This post</a> discusses in good detail the difference between the two and when they aren\u2019t interchangeable. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8773096"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 50125562, "answer_count": 2, "score": 2, "last_activity_date": 1525227132, "creation_date": 1525219739, "last_edit_date": 1525227132, "question_id": 50125469, "link": "https://stackoverflow.com/questions/50125469/what-is-this-syntax-called-n-usern", "title": "What is this syntax called? { |n| &quot;user#{n}&quot; }", "body": "<pre><code>{ |n| \"user#{n}\" }\n</code></pre>\n\n<p>The curly braces with two pipes. This is a ridiculous question, I know, but trying to google what the name of this syntax is has proven to be impossible.</p>\n"}, {"tags": ["ruby", "minimagick"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1525216995, "post_id": 50125072, "comment_id": 87268348, "body": "<i>&quot;it doesn&#39;t work&quot;</i> \u2013 be more specific, please. Do you get an error or some unexpected result?"}, {"owner": {"reputation": 23, "user_id": 9703760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u0414\u0438\u043c\u043e\u043d \u041a\u043b\u0438\u043c\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/9703760/%d0%94%d0%b8%d0%bc%d0%be%d0%bd-%d0%9a%d0%bb%d0%b8%d0%bc%d0%b5%d0%bd%d0%ba%d0%be"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1525217343, "post_id": 50125072, "comment_id": 87268428, "body": "I tried color[i][j] and color[[i][j]] and got 2 different errors: no implicit conversion of Array into Integer and  undefined method &#39;[]=&#39; but now it just trying to load page and doing nothing. P.S. tried to restart server, still the same - just loading"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1525218837, "post_id": 50125072, "comment_id": 87268770, "body": "Remember that <code>return</code> is implicit in Ruby&#39;s methods, so it&#39;s not necessary to specify it unless you&#39;re exiting a method early. Additionally, indentation is <i>very</i> important: It helps communicate structure and intent. The code here is jumbled up, visually, and it&#39;s hard to tell what&#39;s intended to be looped, nested, and so on."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1525218920, "post_id": 50125072, "comment_id": 87268782, "body": "Another thing is that <code>for</code> isn&#39;t used in Ruby code. There&#39;s always a better tool for the job. In your case here consider using <a href=\"https://ruby-doc.org/core-2.5.0/Array.html#method-i-map\" rel=\"nofollow noreferrer\"><code>map</code></a> to transform one array to another. The real strength of Ruby is the <a href=\"https://ruby-doc.org/core-2.5.0/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable</a> module and if you&#39;re not making use of those methods you&#39;re missing out on a lot of useful tools."}, {"owner": {"reputation": 23, "user_id": 9703760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u0414\u0438\u043c\u043e\u043d \u041a\u043b\u0438\u043c\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/9703760/%d0%94%d0%b8%d0%bc%d0%be%d0%bd-%d0%9a%d0%bb%d0%b8%d0%bc%d0%b5%d0%bd%d0%ba%d0%be"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1525219819, "post_id": 50125072, "comment_id": 87268958, "body": "Can you give some code example please? @tadman"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1525219882, "post_id": 50125072, "comment_id": 87268976, "body": "It&#39;d be easier to give an example if you could explain what was wrong with your last chunk of code there. Does that work? Is it missing something? Are you gettng the wrong results?"}, {"owner": {"reputation": 23, "user_id": 9703760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u0414\u0438\u043c\u043e\u043d \u041a\u043b\u0438\u043c\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/9703760/%d0%94%d0%b8%d0%bc%d0%be%d0%bd-%d0%9a%d0%bb%d0%b8%d0%bc%d0%b5%d0%bd%d0%ba%d0%be"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1525220421, "post_id": 50125072, "comment_id": 87269097, "body": "using my last code I get error &quot;undefined method `[]&#39; for nil:NilClass&quot; @tadman"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9703760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u0414\u0438\u043c\u043e\u043d \u041a\u043b\u0438\u043c\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/9703760/%d0%94%d0%b8%d0%bc%d0%be%d0%bd-%d0%9a%d0%bb%d0%b8%d0%bc%d0%b5%d0%bd%d0%ba%d0%be"}, "edited": false, "score": 0, "creation_date": 1525283773, "post_id": 50126104, "comment_id": 87299807, "body": "Thank you very much! Looks like I understood arrays in Ruby better @D-side"}], "tags": [], "owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "is_accepted": true, "score": 1, "last_activity_date": 1525234547, "last_edit_date": 1525234547, "creation_date": 1525225724, "answer_id": 50126104, "question_id": 50125072, "link": "https://stackoverflow.com/questions/50125072/saving-pixel-color-in-array-ruby/50126104#50126104", "title": "Saving pixel color in array Ruby", "body": "<p>The problem you're facing stems from the fact that Ruby doesn't have a concept of \"multidimensional arrays\", <strong>individual arrays are always one-dimensional</strong>.</p>\n\n<p>You can, however, have <strong>nested</strong> arrays, which are arrays that contain arrays, like <code>[[], [], []]</code>.</p>\n\n<hr>\n\n<p>Let's have a look at two particular places:</p>\n\n<pre><code>red = Array.new # Note: this could as well be `red = []`\n</code></pre>\n\n<p>So you have assigned <code>red</code> a single empty array. Alright. Here's what you do later on:</p>\n\n<pre><code>red[i][j] = ...\n</code></pre>\n\n<p>We don't even need the rest of the line, it's visibly broken already.</p>\n\n<p>On the very first iteration <code>red</code> is still <strong>an empty array</strong>. Thus, <code>red[i]</code> is <code>nil</code>, since there's absolutely nothing inside. <code>nil</code> does not have array accessors (<code>[]</code> and <code>[]=</code>), so you'll be getting errors trying to read or write to it as if it were an array.</p>\n\n<p>So you need <code>red[i]</code> to be <strong>an actual array</strong>, so you can put data into it. Let's make it happen.</p>\n\n<p>Since you know the size of your arrays in advance, you can just allocate and populate <code>red</code> with with arrays of appropriate length immediately:</p>\n\n<pre><code>red = Array.new(width) { Array.new(height) }\n</code></pre>\n\n<p>For instance, for <code>width = 2</code> and <code>height = 3</code> here's the result you'd get:</p>\n\n<pre><code>[\n  [nil, nil, nil],\n  [nil, nil, nil]\n]\n</code></pre>\n\n<p>So now that you have allocated all the cells that you'll need, you can start overwriting the <code>nil</code>s with something meaningful.</p>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.5.0/Array.html#method-c-new\" rel=\"nofollow noreferrer\">the docs for <code>Array.new</code></a> for the various ways to construct an array.</p>\n\n<hr>\n\n<h3>Careful:</h3>\n\n<p>I have used a \"blocky\" form of <code>Array.new</code> for a reason.</p>\n\n<p>Beginners often make a mistake of using a single value to populate the array like so:</p>\n\n<pre><code>red = Array.new(width, Array.new(height))\n</code></pre>\n\n<p>While this form has its uses, it won't have the effect that you need: all the entries in <code>red</code> will refer to <strong>one and the same array</strong>, so modifying any single row would look as if all of them are modified.</p>\n\n<hr>\n\n<p>Side note: you probably want to swap <code>width</code> and <code>height</code> in dimensions, since in graphics programs usually deal with arrays of <strong>rows</strong>, not columns. Depends, though. Might not have any effect on your particular problem.</p>\n"}], "owner": {"reputation": 23, "user_id": 9703760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u0414\u0438\u043c\u043e\u043d \u041a\u043b\u0438\u043c\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/9703760/%d0%94%d0%b8%d0%bc%d0%be%d0%bd-%d0%9a%d0%bb%d0%b8%d0%bc%d0%b5%d0%bd%d0%ba%d0%be"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 50126104, "answer_count": 1, "score": 2, "last_activity_date": 1525234547, "creation_date": 1525216502, "last_edit_date": 1525224278, "question_id": 50125072, "link": "https://stackoverflow.com/questions/50125072/saving-pixel-color-in-array-ruby", "title": "Saving pixel color in array Ruby", "body": "<p>I use CarrierWave and MiniMagick for work with images. I upload image. Right now I need to get values of all pixels in image and store them into array</p>\n\n<p>If I use next code it works well</p>\n\n<pre><code>def pixelcolor \n@image = MiniMagick::Image.open(image.path)     \nreturn @image.get_pixels[56][34][1] # 56 and 34 - random numbers for row and column\nend\n</code></pre>\n\n<p>next code works as well</p>\n\n<pre><code>def pixelcolor \n@image = MiniMagick::Image.open(image.path)     \nwidth = @image.width\ncolor = Array.new   \nfor i in 0..width\n  color[i] = i\nend\nreturn color\nend\n</code></pre>\n\n<p>But if I try to do next code it doesn't work</p>\n\n<pre><code>def pixelcolor \n@image = MiniMagick::Image.open(image.path)     \nwidth = @image.width\ncolor = Array.new\nfor i in 0..width\n    color[i] = @image.get_pixels[45][65][0]\nend\nreturn color\nend\n</code></pre>\n\n<p>As result I need something like this</p>\n\n<pre><code>def pixelcolor \n@image = MiniMagick::Image.open(image.path)     \nwidth = @image.width\nheight = @image.height  \nred = Array.new  \ngreen = Array.new\nblue = Array.new    \nfor i in 0..width\n    for j in 0..height\n      red[i][j] = @image.get_pixels[width][height][0]\n      green[i][j] = @image.get_pixels[width][height][1]\n      blue[i][j] = @image.get_pixels[width][height][2]\n    end\nend\nreturn red, green, blue\nend\n</code></pre>\n\n<p>Much time ago I have created very similar project in C++ for working with images so I have idea of what do to but not sure how do do it correct in Ruby as I'm new in it</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "shopify", "shopify-app"], "answers": [{"comments": [{"owner": {"reputation": 614, "user_id": 4389250, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-F8rJHdQAUgY/AAAAAAAAAAI/AAAAAAAAAJQ/114BANdH3Hs/photo.jpg?sz=128", "display_name": "Sebastian Delgado", "link": "https://stackoverflow.com/users/4389250/sebastian-delgado"}, "edited": false, "score": 0, "creation_date": 1525219066, "post_id": 50125349, "comment_id": 87268819, "body": "I ran my console and tried something like Shop.last and the table does exist, what other info do you think would help ?"}, {"owner": {"reputation": 8203, "user_id": 210841, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5adbe9e20522d6a177e76b223b6750ed?s=128&d=identicon&r=PG", "display_name": "David Lazar", "link": "https://stackoverflow.com/users/210841/david-lazar"}, "reply_to_user": {"reputation": 614, "user_id": 4389250, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-F8rJHdQAUgY/AAAAAAAAAAI/AAAAAAAAAJQ/114BANdH3Hs/photo.jpg?sz=128", "display_name": "Sebastian Delgado", "link": "https://stackoverflow.com/users/4389250/sebastian-delgado"}, "edited": false, "score": 0, "creation_date": 1525274706, "post_id": 50125349, "comment_id": 87294733, "body": "Are you sure you ran migrations on your production version of the App. You seem to perhaps be caught between a local version and a production version?"}], "tags": [], "owner": {"reputation": 8203, "user_id": 210841, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5adbe9e20522d6a177e76b223b6750ed?s=128&d=identicon&r=PG", "display_name": "David Lazar", "link": "https://stackoverflow.com/users/210841/david-lazar"}, "is_accepted": false, "score": 1, "last_activity_date": 1525218711, "creation_date": 1525218711, "answer_id": 50125349, "question_id": 50124565, "link": "https://stackoverflow.com/questions/50124565/shopify-ruby-on-rails-app-failying-to-auth/50125349#50125349", "title": "Shopify ruby on rails app failying to auth", "body": "<p>Your database table does not exist. So you think you ran migrations successfully, and maybe you did, but your RoR app does not seem to think so. I would open up a console, and see if you can even see the table. If it there, whoa! Something else is going on, and you'll have to provide more info.</p>\n"}], "owner": {"reputation": 614, "user_id": 4389250, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-F8rJHdQAUgY/AAAAAAAAAAI/AAAAAAAAAJQ/114BANdH3Hs/photo.jpg?sz=128", "display_name": "Sebastian Delgado", "link": "https://stackoverflow.com/users/4389250/sebastian-delgado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525221817, "creation_date": 1525212634, "last_edit_date": 1525221817, "question_id": 50124565, "link": "https://stackoverflow.com/questions/50124565/shopify-ruby-on-rails-app-failying-to-auth", "title": "Shopify ruby on rails app failying to auth", "body": "<p>I just created a RoR shopify app, with the following generator:</p>\n\n<pre><code>rails generate shopify_app --api_key &lt;your_api_key&gt; --secret &lt;your_app_secret&gt;   \n</code></pre>\n\n<p>I added my domain to the whitelisted urls and everything but I keep getting this error, it seems like there is something broken inside the shopify app.</p>\n\n<p>The error appears when I put the site's url in my app in order to install it on it (application.delgic.com)  </p>\n\n<pre><code>F, [2018-05-01T22:01:18.149098 #22506] FATAL -- : [cd2e0b4c-5dfd-422b-959f-7e191bc47ff1]   \nF, [2018-05-01T22:01:18.149175 #22506] FATAL -- : [cd2e0b4c-5dfd-422b-959f-7e191bc47ff1] \n\n\nActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  relation \"shops\" does not exist\n    LINE 8:                WHERE a.attrelid = '\"shops\"'::regclass\n                                              ^\n    :               SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n                         pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod,\n                 (SELECT c.collname FROM pg_collation c, pg_type t\n                   WHERE c.oid = a.attcollation AND t.oid = a.atttypid AND a.attcollation &lt;&gt; t.typcollation),\n                         col_description(a.attrelid, a.attnum) AS comment\n                    FROM pg_attribute a LEFT JOIN pg_attrdef d\n                      ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n                   WHERE a.attrelid = '\"shops\"'::regclass\n                     AND a.attnum &gt; 0 AND NOT a.attisdropped\n                   ORDER BY a.attnum\n    ):\n\nF, [2018-05-01T22:01:18.149262 #22506] FATAL -- : [cd2e0b4c-5dfd-422b-959f-7e191bc47ff1]   \nF, [2018-05-01T22:01:18.149329 #22506] FATAL -- : [cd2e0b4c-5\n</code></pre>\n\n<p>Also I already ran all the migrations.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 215643, "user_id": 50552, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/200c020bef60e4d9c4c4ba1c85442026?s=128&d=identicon&r=PG", "display_name": "Andomar", "link": "https://stackoverflow.com/users/50552/andomar"}, "edited": false, "score": 0, "creation_date": 1525213210, "post_id": 50124563, "comment_id": 87267373, "body": "Did you reload Postgres after changing the configuration file?"}, {"owner": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "reply_to_user": {"reputation": 215643, "user_id": 50552, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/200c020bef60e4d9c4c4ba1c85442026?s=128&d=identicon&r=PG", "display_name": "Andomar", "link": "https://stackoverflow.com/users/50552/andomar"}, "edited": false, "score": 0, "creation_date": 1525213408, "post_id": 50124563, "comment_id": 87267424, "body": "Yes, I did.  I can also connect to <code>psql -d template1</code> properly."}, {"owner": {"reputation": 215643, "user_id": 50552, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/200c020bef60e4d9c4c4ba1c85442026?s=128&d=identicon&r=PG", "display_name": "Andomar", "link": "https://stackoverflow.com/users/50552/andomar"}, "edited": false, "score": 0, "creation_date": 1525213986, "post_id": 50124563, "comment_id": 87267588, "body": "The format is <code>host database user address auth-method</code>, so your rule is only for the postgres database. Try <code>host all all 172.18.0.1&#47;32 md5</code>"}, {"owner": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "reply_to_user": {"reputation": 215643, "user_id": 50552, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/200c020bef60e4d9c4c4ba1c85442026?s=128&d=identicon&r=PG", "display_name": "Andomar", "link": "https://stackoverflow.com/users/50552/andomar"}, "edited": false, "score": 0, "creation_date": 1525214164, "post_id": 50124563, "comment_id": 87267648, "body": "@Andomar I have that but I&#39;m still getting this error"}, {"owner": {"reputation": 215643, "user_id": 50552, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/200c020bef60e4d9c4c4ba1c85442026?s=128&d=identicon&r=PG", "display_name": "Andomar", "link": "https://stackoverflow.com/users/50552/andomar"}, "edited": false, "score": 0, "creation_date": 1525214652, "post_id": 50124563, "comment_id": 87267806, "body": "Examine the Postgres logs?  Location depends on your distribution, but look for a directory called <code>pg_log</code>"}, {"owner": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "edited": false, "score": 0, "creation_date": 1525215070, "post_id": 50124563, "comment_id": 87267929, "body": "Interestingly, nothing happens to the logs when this error occurs."}, {"owner": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "edited": false, "score": 0, "creation_date": 1525217918, "post_id": 50124563, "comment_id": 87268570, "body": "I created a blank Rails application running Postgres and I&#39;m still getting the error."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1525219837, "post_id": 50124563, "comment_id": 87268966, "body": "What&#39;s your OS, and how have you installed postgres?"}, {"owner": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "edited": false, "score": 0, "creation_date": 1525224587, "post_id": 50124563, "comment_id": 87269944, "body": "Thanks for the response. I&#39;m on OSX. I used brew to install postgres"}, {"owner": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "edited": false, "score": 0, "creation_date": 1525226031, "post_id": 50124563, "comment_id": 87270237, "body": "Actually it seems like it did end up working with the blank Rails application"}], "owner": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525229203, "creation_date": 1525212621, "last_edit_date": 1525229203, "question_id": 50124563, "link": "https://stackoverflow.com/questions/50124563/weird-postgres-errors-after-running-dbcreate", "title": "Weird postgres Errors after running db:create", "body": "<p>When I run <code>rails db:create</code>, I get the following error:</p>\n\n<pre><code>FATAL:  no pg_hba.conf entry for host \"172.18.0.1\", user \"postgres\", database \"postgres\", SSL off\nCouldn't create database for {\"adapter\"=&gt;\"postgresql\", \"encoding\"=&gt;\"unicode\", \"pool\"=&gt;5, \"timeout\"=&gt;5000, \"username\"=&gt;\"postgres\", \"host\"=&gt;\"localhost\", \"port\"=&gt;5433, \"url\"=&gt;nil, \"database\"=&gt;\"mydatabase\"}\n</code></pre>\n\n<p>I'm not sure how to fix it. I've modified my <code>pg_hba.conf</code> file to include the following line.</p>\n\n<pre><code>host    postgres             postgres             172.18.0.1/32            md5\n</code></pre>\n\n<p>But I'm still getting that error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "edited": false, "score": 0, "creation_date": 1525207725, "post_id": 50123431, "comment_id": 87265324, "body": "I&#39;m working with an existing codebase. Is it defined by the user?"}, {"owner": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "edited": false, "score": 0, "creation_date": 1525207910, "post_id": 50123431, "comment_id": 87265428, "body": "It is defined in <code>databases.rake</code>, but I don&#39;t understand how it knows what database to create. The user must have to supply something, no?"}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "reply_to_user": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "edited": false, "score": 0, "creation_date": 1525208465, "post_id": 50123431, "comment_id": 87265677, "body": "@asndonsadoasndo231213 <code>config&#47;database.yml</code> usually specifies that."}, {"owner": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "edited": false, "score": 0, "creation_date": 1525208877, "post_id": 50123431, "comment_id": 87265831, "body": "Interesting, I don&#39;t see a <code>create</code> block in there."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1525209048, "post_id": 50123431, "comment_id": 87265902, "body": "It creates the databases present in your <code>database.yml</code>, as stated by D-side. Pay attention to <code>ActiveRecord::Tasks::DatabaseTasks.create(db_config.config)</code>."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 5, "last_activity_date": 1525206823, "creation_date": 1525206823, "answer_id": 50123431, "question_id": 50123340, "link": "https://stackoverflow.com/questions/50123340/where-is-dbcreate-defined-in-rails/50123431#50123431", "title": "Where is db:create defined in Rails?", "body": "<p>It's in the <a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/railties/databases.rake#L21:L33\" rel=\"noreferrer\">databases.rake</a> file of the framework:</p>\n\n<pre><code>namespace :create do\n  task all: :load_config do\n    ActiveRecord::Tasks::DatabaseTasks.create_all\n  end\n\n  ActiveRecord::Tasks::DatabaseTasks.for_each do |spec_name|\n    desc \"Create #{spec_name} database for current environment\"\n    task spec_name =&gt; :load_config do\n      db_config = ActiveRecord::DatabaseConfigurations.config_for_env_and_spec(Rails.env, spec_name)\n      ActiveRecord::Tasks::DatabaseTasks.create(db_config.config)\n    end\n  end\nend\n</code></pre>\n\n<p>Whenever you doubt or want to know where a task has been defined, you can use the <code>rails -W</code> (or <code>rake</code>) command, passing the task:</p>\n\n<pre><code>$ rails -W db:create\nrails db:create     /path/databases.rake:26:in `block in &lt;top (required)&gt;'\nrails db:create:all /path/databases.rake:20:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>Note it was introduced in the version 0.9 of Rake. This might or might not work depending on the versions which you're working with.</p>\n"}], "owner": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525206823, "creation_date": 1525206411, "question_id": 50123340, "link": "https://stackoverflow.com/questions/50123340/where-is-dbcreate-defined-in-rails", "title": "Where is db:create defined in Rails?", "body": "<p>The following command is supposed to create a new database.</p>\n\n<blockquote>\n  <p>rails db:create</p>\n</blockquote>\n\n<p>Where is this function defined? Or is this a pre-packaged function in rails?</p>\n"}, {"tags": ["javascript", "ruby", "sinatra", "erb", "ace-editor"], "comments": [{"owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 0, "creation_date": 1525205117, "post_id": 50122861, "comment_id": 87264155, "body": "Are they on the same page? Try naming one mode1 and seeing if that fixes it."}, {"owner": {"reputation": 79, "user_id": 9526393, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nLGkiYcBxq0/AAAAAAAAAAI/AAAAAAAAAEQ/lAoLPKsMdLA/photo.jpg?sz=128", "display_name": "Daniel Nunez", "link": "https://stackoverflow.com/users/9526393/daniel-nunez"}, "reply_to_user": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 0, "creation_date": 1525205265, "post_id": 50122861, "comment_id": 87264221, "body": "no they are in separate views when it renders the other doesnt exist and i also tried renaming already :( hat was my first thought"}, {"owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 0, "creation_date": 1525205432, "post_id": 50122861, "comment_id": 87264306, "body": "Its probably something to do with when jquery is ready vs when the dom is ready. Try setting a breakpoint in the browser before you set the value and see if $(&#39;input[name=&quot;mode&quot;]&#39;) returns the value you think it should, or if its undefined at that point."}, {"owner": {"reputation": 79, "user_id": 9526393, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nLGkiYcBxq0/AAAAAAAAAAI/AAAAAAAAAEQ/lAoLPKsMdLA/photo.jpg?sz=128", "display_name": "Daniel Nunez", "link": "https://stackoverflow.com/users/9526393/daniel-nunez"}, "reply_to_user": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 0, "creation_date": 1525205695, "post_id": 50122861, "comment_id": 87264439, "body": "I&#39;m sorry im brand new to js not quite sure how to do that"}, {"owner": {"reputation": 79, "user_id": 9526393, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nLGkiYcBxq0/AAAAAAAAAAI/AAAAAAAAAEQ/lAoLPKsMdLA/photo.jpg?sz=128", "display_name": "Daniel Nunez", "link": "https://stackoverflow.com/users/9526393/daniel-nunez"}, "reply_to_user": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 0, "creation_date": 1525206975, "post_id": 50122861, "comment_id": 87265029, "body": "UPDATE: i did console.log and it spit out what I wanted so scope it fine"}, {"owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 0, "creation_date": 1525209082, "post_id": 50122861, "comment_id": 87265913, "body": "try something like $(&#39;input[name=&quot;mode&quot;]&#39;).val(function(){console.log($(&#39;input[&zwnj;&#8203;name=&quot;mode&quot;]&#39;)); console.log(editor.session.getMode().$id);  return editor.session.getMode().$id}); that should allow you to see what the values are at assignment time. I bet one will be null/undefined."}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 9526393, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nLGkiYcBxq0/AAAAAAAAAAI/AAAAAAAAAEQ/lAoLPKsMdLA/photo.jpg?sz=128", "display_name": "Daniel Nunez", "link": "https://stackoverflow.com/users/9526393/daniel-nunez"}, "is_accepted": true, "score": 2, "last_activity_date": 1525280376, "last_edit_date": 1525280376, "creation_date": 1525230139, "answer_id": 50126535, "question_id": 50122861, "link": "https://stackoverflow.com/questions/50122861/ace-editor-passing-mode-to-form-input/50126535#50126535", "title": "ace editor - passing mode to form input", "body": "<p>FIGURED OUT THE ISSUE</p>\n\n<p>I was setting the value on change of the session</p>\n\n<pre><code>editor.getSession().on(\"change\", function () {\n\n    $('input[name=\"mode\"]').val(editor.session.getMode().$id);\n\n});\n</code></pre>\n\n<p>problem was I made the dangerous assumption that changing the mode was considered a change event on the session. After some testing I noticed it worked but only when i typed in the editor before submitting. I changed to </p>\n\n<pre><code>$(document).click(function() {\n\n    $('input[name=\"mode\"]').val(editor.session.getMode().$id);\n\n});\n</code></pre>\n\n<p>and all working</p>\n"}], "owner": {"reputation": 79, "user_id": 9526393, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nLGkiYcBxq0/AAAAAAAAAAI/AAAAAAAAAEQ/lAoLPKsMdLA/photo.jpg?sz=128", "display_name": "Daniel Nunez", "link": "https://stackoverflow.com/users/9526393/daniel-nunez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 50126535, "answer_count": 1, "score": 1, "last_activity_date": 1525280376, "creation_date": 1525204123, "last_edit_date": 1525230239, "question_id": 50122861, "link": "https://stackoverflow.com/questions/50122861/ace-editor-passing-mode-to-form-input", "title": "ace editor - passing mode to form input", "body": "<p>Ok so in my js Im setting my input value to a js value </p>\n\n<pre><code>$('input[name=\"mode\"]').val(editor.session.getMode().$id);\n</code></pre>\n\n<p>this works fine in my new view form</p>\n\n<pre><code>&lt;form id=\"snippetForm\" action=\"/snippets/new\" method=\"POST\"&gt;\n    &lt;input class=\"hidden\" type=\"text\" name=\"mode\" form=\"snippetForm\"/&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>passes the params to my controller </p>\n\n<pre><code>\"mode\"=&gt;\"ace/mode/ruby\"\n</code></pre>\n\n<p>but when I do the same for my update form </p>\n\n<pre><code>&lt;form id=\"snippetForm\" action=\"/snippets/&lt;%= @snippet.id %&gt;/edit\" method=\"POST\"&gt;\n    &lt;input class=\"hidden\" type=\"text\" name=\"mode\" form=\"snippetForm\"/&gt;\n\n    &lt;input id=\"hidden\" type=\"hidden\" name=\"_method\" value=\"patch\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>on my params in conroller I get an empty string </p>\n\n<pre><code>\"mode\"=&gt;\"\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525202159, "post_id": 50122300, "comment_id": 87262845, "body": "After <code>Time.zone = &quot;Hong Kong&quot;</code> I tested your exact code <code>DateTime.strptime(&quot;04&#47;20&#47;2018 5:23 AM&quot;,&quot;%m&#47;%d&#47;%Y %H:%M %p&quot;)</code> getting: <code>2018-04-20T05:23:00+00:00</code>. The output does not change after changing the time zone."}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525202952, "post_id": 50122300, "comment_id": 87263216, "body": "I just tested what you explained and if I do not retrieve the value from the database and rather output the value of <code>DateTime.strptime(&quot;04&#47;20&#47;2018 5:23 AM&quot;,&quot;%m&#47;%d&#47;%Y %H:%M %p&quot;)</code> I get the desired result. However, I still am unable to save/retrieve the correct time from the database. @iGian"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525203560, "post_id": 50122300, "comment_id": 87263501, "body": "I&#39;m not sure I understand the actual problem.  jQuery time should be the time on the user&#39;s browser right? Once it hits your server as a param, can you convert it to UTC and do what you need on server side? Also possible dupe of <a href=\"https://stackoverflow.com/questions/9739082/rails-jquery-datepicker-timezones\" title=\"rails jquery datepicker timezones\">stackoverflow.com/questions/9739082/&hellip;</a>"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525203757, "post_id": 50122300, "comment_id": 87263584, "body": "Yea essentially, you can ignore jQuery for the scope of this question. I mentioned it mainly to provide context. Essentially my issue is that I submit a date time to the server, parse that date time, print the parsed date time (still correct at this point), but when I actually save it into the database the time is changed. When I remove Time.zone = &quot;Some Time Zone&quot; the issue goes away. @lacostenycoder"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525205893, "post_id": 50122300, "comment_id": 87264526, "body": "What class is <code>job</code> an instance of? Is it running in the web server, multi-threaded? could it be running in a Sidekiq worker or other process?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525239482, "post_id": 50122300, "comment_id": 87273288, "body": "@CannonMoyer, I did some test. I see that Rails saves to database at the server time, so if <code>Time.zone</code> is not the same as the server, it does the calculation before save. It seems the query itself. Try from rails console, you see the time in the query already changed. Maybe you need a before_save callback to adjust the data?"}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1525206435, "creation_date": 1525206435, "answer_id": 50123345, "question_id": 50122300, "link": "https://stackoverflow.com/questions/50122300/issue-formatting-datetime-in-rails/50123345#50123345", "title": "Issue Formatting DateTime in Rails", "body": "<p>Keep in mind <code>DateTime.strptime('04/20/2018 5:23 AM',\"%m/%d/%Y %H:%M %p\")</code> will return the value in UTC <code>=&gt;Fri, 20 Apr 2018 05:23:00 +0000</code></p>\n\n<p>However if you store this value say to a database field, in an active record object, it will output the timezone value to whatever value you've set to <code>Time.zone</code></p>\n\n<p>This may not be a complete answer but could lead you in the right direction.</p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1525240183, "creation_date": 1525240183, "answer_id": 50127887, "question_id": 50122300, "link": "https://stackoverflow.com/questions/50122300/issue-formatting-datetime-in-rails/50127887#50127887", "title": "Issue Formatting DateTime in Rails", "body": "<p>Add some more details to my last comment above.</p>\n\n<p>I did this in rails console, my model is <code>Shift</code> and has <code>start_time: datetime</code>.</p>\n\n<pre><code>2.1.3 :022 &gt; time = \"04/02/2018 5:23 AM\"                                                          \n =&gt; \"04/02/2018 5:23 AM\"                                                                          \n2.1.3 :023 &gt; Time.zone = \"Singapore\"                                                              \n =&gt; \"Singapore\"                                                                                   \n2.1.3 :024 &gt; shift.start_at = time                                                                \n =&gt; \"04/02/2018 5:23 AM\"                                                                          \n2.1.3 :025 &gt; shift.save                                                                           \n   (0.1ms)  begin transaction                                                                     \n  SQL (0.5ms)  UPDATE \"shifts\" SET \"start_at\" = ?, \"updated_at\" = ? WHERE \"shifts\".\"id\" = 2  [[\"st\nart_at\", \"2018-02-03 21:23:00.000000\"], [\"updated_at\", \"2018-05-02 05:43:38.527338\"]]             \n   (1.4ms)  commit transaction                                                                    \n =&gt; true                                                                                          \n2.1.3 :026 &gt; Time.zone = \"Dublin\"                                                                 \n =&gt; \"Dublin\"                                                                                      \n2.1.3 :027 &gt; shift.start_at = time                                                                \n =&gt; \"04/02/2018 5:23 AM\"                                                                          \n2.1.3 :028 &gt; shift.save                                                                           \n   (0.2ms)  begin transaction                                                                     \n  SQL (0.4ms)  UPDATE \"shifts\" SET \"start_at\" = ?, \"updated_at\" = ? WHERE \"shifts\".\"id\" = 2  [[\"st\nart_at\", \"2018-02-04 05:23:00.000000\"], [\"updated_at\", \"2018-05-02 05:45:44.638291\"]]             \n   (1.4ms)  commit transaction                                                                    \n =&gt; true                      \n</code></pre>\n\n<p>See the data inside the SQL.</p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1525240183, "creation_date": 1525201349, "question_id": 50122300, "link": "https://stackoverflow.com/questions/50122300/issue-formatting-datetime-in-rails", "title": "Issue Formatting DateTime in Rails", "body": "<p>So my rails application supports different time zones and sets the time zone at each request like so:</p>\n\n<pre><code>def set_current_time_zone\n  Time.zone = current_user.time_zone\nend\n</code></pre>\n\n<p>All of my formatting and reports site wide work except for a jQuery date time selector. </p>\n\n<p>The form submits a start time in the format of <code>04/20/2018 5:23 AM</code>. When I parse the time with the code below I get the following output. </p>\n\n<pre><code># this is the value of params[:job][:start] 04/20/2018 5:23 AM\n\njob.start = DateTime.strptime(params[:job][:start],\"%m/%d/%Y %H:%M %p\")\n\n#printing job.start outputs this: 2018-04-20 00:23:00 -0500\n</code></pre>\n\n<p>As you'll notice the time zone has been applied to the time and is now the wrong time. How do I correct this?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1525279343, "creation_date": 1525279343, "answer_id": 50139619, "question_id": 50121883, "link": "https://stackoverflow.com/questions/50121883/how-to-extend-devise-lockable-to-ip/50139619#50139619", "title": "How to extend Devise Lockable to IP", "body": "<p>Devise itself doesn't do this, but it gives you the information you need to do this on your own with an IP block list table.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9726962"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525279343, "creation_date": 1525199550, "question_id": 50121883, "link": "https://stackoverflow.com/questions/50121883/how-to-extend-devise-lockable-to-ip", "title": "How to extend Devise Lockable to IP", "body": "<p>I have an app that uses devise and currently locks people out if they try to login with the wrong password a number of times. I want to extend it to lock a user out if they are accessing from a different IP as well with the help of trackable. Is there a good way to go about this with devise?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1525193516, "post_id": 50120448, "comment_id": 87258476, "body": "<code>(n - 1).downto(0) { |i| str &lt;&lt; str[i] }</code>"}, {"owner": {"reputation": 21, "user_id": 9696641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cb4822d6ee7490cf36eb96b248361d?s=128&d=identicon&r=PG&f=1", "display_name": "shashi", "link": "https://stackoverflow.com/users/9696641/shashi"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1525193719, "post_id": 50120448, "comment_id": 87258584, "body": "if am printing the str value at last it&#39;s printing the first string as well as second reverse string combined like  karthik reddy  karthik reddyydder kihtrak"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1525193743, "post_id": 50120448, "comment_id": 87258598, "body": "right now you are not reversing the string but appending a reverse version instead try something like: <code>s.length.-(1).downto(0) { |i| s &lt;&lt; s.slice!(i)}</code>.  <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-slice-21\" rel=\"nofollow noreferrer\"><code>String#slice!</code></a> will mutate the original string by removing the &quot;slice&quot; then we are just appending it to the tail end of the string. As far as efficiency goes built in <code>reverse</code> would be more efficient."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1525194305, "post_id": 50120448, "comment_id": 87258884, "body": "@engineersmnky \u2764 <code>.-(1)</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1525195366, "post_id": 50120448, "comment_id": 87259377, "body": "Your code uses no less than 6 builtin functions, but your subject line says you aren&#39;t allowed to use any."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1525209312, "post_id": 50120448, "comment_id": 87265993, "body": "In Ruby everything&#39;s a method call, so not using method calls is going to be out of the question here. What&#39;s allowed by your particular definition?"}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1525195311, "post_id": 50120631, "comment_id": 87259355, "body": "Unfortunately, this uses 4 &quot;builtin functions&quot;, which according to the OP aren&#39;t allowed."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1525195765, "post_id": 50120631, "comment_id": 87259588, "body": "@J&#246;rgWMittag I took a liberty to rely on what kind of built-in was presented in the original code. I understood that built-in <code>reverse</code> and family is not allowed, while <code>[]</code>, <code>[]=</code>, <code>length</code> and <code>times</code> are allowed, otherwise we\u2019ll end up writing <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> extension dealing with memory directly."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1525194087, "creation_date": 1525194087, "answer_id": 50120631, "question_id": 50120448, "link": "https://stackoverflow.com/questions/50120448/how-to-do-reverse-operation-in-ruby-using-one-variable-with-out-using-any-built/50120631#50120631", "title": "how to do reverse operation in ruby using one variable with out using any built in functions", "body": "<p>I would say, the most efficient way should be smth like:</p>\n\n<pre><code>&gt; str = \"karhik reddy\"\n&gt; (n = str.length).times { |i| str[i...i], str[n..n] = str[n-1], '' }\n&gt; str\n#\u21d2 \"ydder kihrak\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525217144, "post_id": 50123990, "comment_id": 87268379, "body": "&quot;Caveman style&quot;? Love it. (For extra measure maybe you should use a <code>for</code> loop.)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525218249, "post_id": 50123990, "comment_id": 87268652, "body": "@CarySwoveland I resisted the urge because Ruby is allergic to <code>for</code> and it seemed out of place."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1525538861, "post_id": 50123990, "comment_id": 87400521, "body": "You missed <code>Integer#&lt;</code>, <code>Integer#+</code>, and <code>Integer#-@</code>, which your code also uses ;-)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1525539084, "post_id": 50123990, "comment_id": 87400578, "body": "@J&#246;rgWMittag More good examples of how this is an impossible exercise without a better definition of &quot;built-in methods&quot;."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1525209611, "creation_date": 1525209611, "answer_id": 50123990, "question_id": 50120448, "link": "https://stackoverflow.com/questions/50120448/how-to-do-reverse-operation-in-ruby-using-one-variable-with-out-using-any-built/50123990#50123990", "title": "how to do reverse operation in ruby using one variable with out using any built in functions", "body": "<p>If you want to do this caveman style with no \"built-in functions\", the closest you can do is:</p>\n\n<pre><code>def primitive_reverse(str)\n  out = ''\n  i = 0\n\n  while (i &lt; str.length)\n    i += 1\n    out &lt;&lt; str[-i]\n  end\n\n  out\nend\n</code></pre>\n\n<p>Where technically <code>String#&lt;&lt;</code>, <code>String#[]</code> and <code>String#length</code> are all methods, but without that you're unable to complete this.</p>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1525538920, "post_id": 50124474, "comment_id": 87400536, "body": "4! You are implicitly sending <code>Symbol#to_proc</code> ;-)"}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 2, "last_activity_date": 1525212157, "creation_date": 1525212157, "answer_id": 50124474, "question_id": 50120448, "link": "https://stackoverflow.com/questions/50120448/how-to-do-reverse-operation-in-ruby-using-one-variable-with-out-using-any-built/50124474#50124474", "title": "how to do reverse operation in ruby using one variable with out using any built in functions", "body": "<p>Down to 3 methods:</p>\n\n<pre><code>\"karhik reddy\".each_char.inject(&amp;:prepend)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9696641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cb4822d6ee7490cf36eb96b248361d?s=128&d=identicon&r=PG&f=1", "display_name": "shashi", "link": "https://stackoverflow.com/users/9696641/shashi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1525212157, "creation_date": 1525193276, "last_edit_date": 1525207038, "question_id": 50120448, "link": "https://stackoverflow.com/questions/50120448/how-to-do-reverse-operation-in-ruby-using-one-variable-with-out-using-any-built", "title": "how to do reverse operation in ruby using one variable with out using any built in functions", "body": "<pre><code>str=\"karhik reddy\"\nn= str.length\nfor i in n.downto(0) do // reverse iteration of ruby \nstr += str[i].to_s\nend\nputs str[-n..-1]\n</code></pre>\n\n<p>Is this efficient for larger data sets? Like an array of millions of numbers where you would reverse the complete character set in a book?</p>\n"}, {"tags": ["ruby", "openssl", "rubygems"], "comments": [{"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1525242918, "post_id": 50120039, "comment_id": 87274674, "body": "If you install your own ruby using <code>ruby-build</code> or homebrew, they will also install openssl that works out of the box."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "edited": false, "score": 1, "creation_date": 1525197338, "post_id": 50121251, "comment_id": 87260359, "body": "Thanks for the response. I found the issue. I needed to re-compile Ruby with OpenSSL."}], "tags": [], "owner": {"reputation": 116, "user_id": 9066380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f127b4af4d9fc36044bb117a2d9db4?s=128&d=identicon&r=PG&f=1", "display_name": "Cdalbergue", "link": "https://stackoverflow.com/users/9066380/cdalbergue"}, "is_accepted": false, "score": 2, "last_activity_date": 1525196893, "creation_date": 1525196893, "answer_id": 50121251, "question_id": 50120039, "link": "https://stackoverflow.com/questions/50120039/cant-install-openssl-gem-on-osx/50121251#50121251", "title": "Can&#39;t install OpenSSL gem on OSX", "body": "<p>Please, can you send the output of <code>ls -l /usr/local/opt/openssl</code> ?</p>\n\n<p>Have you tried installing the latest version of openssl with brew: <code>brew install openssl</code> ?</p>\n"}], "owner": {"reputation": 125, "user_id": 9571978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asndonsadoasndo231213", "link": "https://stackoverflow.com/users/9571978/asndonsadoasndo231213"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1825, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525196893, "creation_date": 1525191503, "last_edit_date": 1525192229, "question_id": 50120039, "link": "https://stackoverflow.com/questions/50120039/cant-install-openssl-gem-on-osx", "title": "Can&#39;t install OpenSSL gem on OSX", "body": "<p>I'm trying to install the OpenSSL gem as follows:</p>\n\n<blockquote>\n  <p>sudo gem install openssl -- --with-openssl-dir=/usr/local/opt/openssl</p>\n</blockquote>\n\n<p>However, I get the following error</p>\n\n<pre><code>Building native extensions with: '-with-openssl-dir=/usr/local/opt/openssl'\nThis could take a while...\nERROR:  Error installing openssl:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /Library/Ruby/Gems/2.3.0/gems/openssl-2.1.0/ext/openssl\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/ruby -r ./siteconf20180501-55786-16tbndt.rb extconf.rb -with-openssl-dir=/usr/local/opt/openssl\nchecking for t_open() in -lnsl... no\nchecking for socket() in -lsocket... no\nchecking for openssl/ssl.h... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/$(RUBY_BASE_NAME)\n    --with-openssl-dir\n    --without-openssl-dir\n    --with-openssl-include\n    --without-openssl-include=${openssl-dir}/include\n    --with-openssl-lib\n    --without-openssl-lib=${openssl-dir}/lib\n    --with-kerberos-dir\n    --without-kerberos-dir\n    --with-kerberos-include\n    --without-kerberos-include=${kerberos-dir}/include\n    --with-kerberos-lib\n    --without-kerberos-lib=${kerberos-dir}/lib\n    --with-debug\n    --without-debug\n    --enable-debug\n    --disable-debug\n    --with-nsllib\n    --without-nsllib\n    --with-socketlib\n    --without-socketlib\n    --with-openssl-config\n    --without-openssl-config\n    --with-pkg-config\n    --without-pkg-config\nextconf.rb:94:in `&lt;main&gt;': OpenSSL library could not be found. You might want to use --with-openssl-dir=&lt;dir&gt; option to specify the prefix where OpenSSL is installed. (RuntimeError)\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /Library/Ruby/Gems/2.3.0/extensions/universal-darwin-17/2.3.0/openssl-2.1.0/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Library/Ruby/Gems/2.3.0/gems/openssl-2.1.0 for inspection.\nResults logged to /Library/Ruby/Gems/2.3.0/extensions/universal-darwin-17/2.3.0/openssl-2.1.0/gem_make.out\n</code></pre>\n\n<p>It says that it couldn't find OpenSSL. However, I specified it as a parameter, yet it is still not picking this up. Does anyone have any suggestions?</p>\n\n<p>Notably, the error is:</p>\n\n<blockquote>\n  <p>OpenSSL library could not be found. You might want to use --with-openssl-dir= option to\n  specify the prefix where OpenSSL is installed.</p>\n</blockquote>\n"}, {"tags": ["ruby", "linux", "amazon-web-services", "docker", "out-of-memory"], "comments": [{"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1526401940, "post_id": 50119863, "comment_id": 87726550, "body": "Are you specifying the limit while running the containers? Also I assuming this is a EC2 instance with Docker on it and not ECS?"}], "answers": [{"comments": [{"owner": {"reputation": 3338, "user_id": 38753, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cdb4e3e965558168bc1205ae2012e444?s=128&d=identicon&r=PG", "display_name": "EightyEight", "link": "https://stackoverflow.com/users/38753/eightyeight"}, "edited": false, "score": 0, "creation_date": 1525196975, "post_id": 50121213, "comment_id": 87260189, "body": "Thanks for your comment Darrell. The event you refer to was triggered by the system reboot as far as I can tell, rather than OOM."}, {"owner": {"reputation": 141, "user_id": 8791134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc70f9a56c1d299301b46de56333b3e?s=128&d=identicon&r=PG&f=1", "display_name": "Darrell Plessas", "link": "https://stackoverflow.com/users/8791134/darrell-plessas"}, "reply_to_user": {"reputation": 3338, "user_id": 38753, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cdb4e3e965558168bc1205ae2012e444?s=128&d=identicon&r=PG", "display_name": "EightyEight", "link": "https://stackoverflow.com/users/38753/eightyeight"}, "edited": false, "score": 0, "creation_date": 1525197352, "post_id": 50121213, "comment_id": 87260363, "body": "Right you are, my mistake. Do you know for sure that the ruby container is consuming all the memory before the host goes dark? This might be some other resource exhaustion issue. Can you get some process monitoring data for the next interval?"}, {"owner": {"reputation": 3338, "user_id": 38753, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cdb4e3e965558168bc1205ae2012e444?s=128&d=identicon&r=PG", "display_name": "EightyEight", "link": "https://stackoverflow.com/users/38753/eightyeight"}, "edited": false, "score": 0, "creation_date": 1525209027, "post_id": 50121213, "comment_id": 87265893, "body": "Darrell, what kind of information would be helpful? The application server spawns a set of ruby worker processes to handle web requests. Individual processes keep consuming more memory. I have a watchdog (monit) that kills the individual ruby processes when they reach a threshold (usually about 800 megs). That to me is a hint that memory consumption is the culprit. I don&#39;t see anything else out of the ordinary."}, {"owner": {"reputation": 141, "user_id": 8791134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc70f9a56c1d299301b46de56333b3e?s=128&d=identicon&r=PG&f=1", "display_name": "Darrell Plessas", "link": "https://stackoverflow.com/users/8791134/darrell-plessas"}, "reply_to_user": {"reputation": 3338, "user_id": 38753, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cdb4e3e965558168bc1205ae2012e444?s=128&d=identicon&r=PG", "display_name": "EightyEight", "link": "https://stackoverflow.com/users/38753/eightyeight"}, "edited": false, "score": 0, "creation_date": 1525214008, "post_id": 50121213, "comment_id": 87267593, "body": "For quick and dirty, I would grab cpu and memory data and dump them to a file that, ideally, you can watch remotely. I would use a separate EFS share and create a cron&#39;d or loop that ran this <code>uptime &amp;&amp; free &amp;&amp; (ps aux --sort -rss | head) &amp;&amp; echo threads=$(ps -eLf | wc -l)</code> This should let you know if it is memory, threads, or just general load. Good luck"}], "tags": [], "owner": {"reputation": 141, "user_id": 8791134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc70f9a56c1d299301b46de56333b3e?s=128&d=identicon&r=PG&f=1", "display_name": "Darrell Plessas", "link": "https://stackoverflow.com/users/8791134/darrell-plessas"}, "is_accepted": false, "score": 1, "last_activity_date": 1525196753, "creation_date": 1525196753, "answer_id": 50121213, "question_id": 50119863, "link": "https://stackoverflow.com/questions/50119863/server-becomes-unresponsive-periodically-oom-killer-inactive/50121213#50121213", "title": "Server becomes unresponsive periodically, OOM Killer inactive?", "body": "<p>I think you are assuming that OOM will always target your Ruby application, but I don't think that is the case. You log line shows it killed you tty connection instead. I am betting it is killing other processes before your Ruby process and this is why your machine to seem un-responsive. You can read up on how OOM works and it might help here. I would look specifically at your oom_scores and see what you find there.</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/articles/servers-storage-dev/oom-killer-1911807.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/articles/servers-storage-dev/oom-killer-1911807.html</a></p>\n\n<p>Good Luck</p>\n"}, {"comments": [{"owner": {"reputation": 3338, "user_id": 38753, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cdb4e3e965558168bc1205ae2012e444?s=128&d=identicon&r=PG", "display_name": "EightyEight", "link": "https://stackoverflow.com/users/38753/eightyeight"}, "edited": false, "score": 0, "creation_date": 1525959333, "post_id": 50267311, "comment_id": 87565122, "body": "I&#39;m using <a href=\"https://github.com/phusion/passenger-docker\" rel=\"nofollow noreferrer\">passenger-full</a>, a base image created by Phusion. They have an underlying init system, so ruby processes are not PID 1."}, {"owner": {"reputation": 11613, "user_id": 254103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1d831e55e55ef474d5cf21b6217b540?s=128&d=identicon&r=PG", "display_name": "Josnidhin", "link": "https://stackoverflow.com/users/254103/josnidhin"}, "reply_to_user": {"reputation": 3338, "user_id": 38753, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cdb4e3e965558168bc1205ae2012e444?s=128&d=identicon&r=PG", "display_name": "EightyEight", "link": "https://stackoverflow.com/users/38753/eightyeight"}, "edited": false, "score": 0, "creation_date": 1525960322, "post_id": 50267311, "comment_id": 87565706, "body": "@EightyEight Oh ok. In that case have you seen the following issue <a href=\"https://github.com/aws/amazon-ecs-agent/issues/794\" rel=\"nofollow noreferrer\">github.com/aws/amazon-ecs-agent/issues/794</a>. It about a bug in amazon linux ami, you could try out Ubuntu if thats the case"}], "tags": [], "owner": {"reputation": 11613, "user_id": 254103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1d831e55e55ef474d5cf21b6217b540?s=128&d=identicon&r=PG", "display_name": "Josnidhin", "link": "https://stackoverflow.com/users/254103/josnidhin"}, "is_accepted": false, "score": 2, "last_activity_date": 1526520278, "last_edit_date": 1526520278, "creation_date": 1525935562, "answer_id": 50267311, "question_id": 50119863, "link": "https://stackoverflow.com/questions/50119863/server-becomes-unresponsive-periodically-oom-killer-inactive/50267311#50267311", "title": "Server becomes unresponsive periodically, OOM Killer inactive?", "body": "<p>Apparently the solution I provided didn't seem to help the person who asked the question, but it might help someone else who stumbleupon here. The following are the 2 things I suggested which might be causing the problem.</p>\n\n<p><strong>Suggestions 1</strong></p>\n\n<p><em>I am guessing you are using the offical ruby docker image and when you run the container ruby is running as <code>PID 1</code> inside the container.</em></p>\n\n<p>If ruby is running as <code>PID 1</code> then OOM killer wont be able to kill it, causing all the problem you are seeing. </p>\n\n<p>To solve this problem you will have to make sure a proper <code>init</code> process runs as <code>PID 1</code>.</p>\n\n<p>Docker 1.25 and above has the <code>--init</code> option for <code>docker run</code> command. This option will make sure that a proper <code>init</code> handles the tasks of <code>PID 1</code>, it will also pass all SIGNALs to your ruby application.</p>\n\n<p><a href=\"https://docs.docker.com/engine/reference/commandline/run/\" rel=\"nofollow noreferrer\">https://docs.docker.com/engine/reference/commandline/run/</a></p>\n\n<blockquote>\n  <p>--init    API 1.25+ Run an init inside the container that forwards signals and reaps processes</p>\n</blockquote>\n\n<p>The following is what docker uses as the <code>init</code>\n<a href=\"https://github.com/krallin/tini\" rel=\"nofollow noreferrer\">https://github.com/krallin/tini</a></p>\n\n<p><strong>Suggestion 2</strong></p>\n\n<p>There is a known issue with Amazon Linux AMI the details can be found at the following link <a href=\"https://github.com/aws/amazon-ecs-agent/issues/794\" rel=\"nofollow noreferrer\">https://github.com/aws/amazon-ecs-agent/issues/794</a>. As of writing I am not sure if the problem with AMI was fixed or not.</p>\n\n<p>So try a different AMI as suggested in that thread say the Ubuntu AMI.</p>\n"}], "owner": {"reputation": 3338, "user_id": 38753, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cdb4e3e965558168bc1205ae2012e444?s=128&d=identicon&r=PG", "display_name": "EightyEight", "link": "https://stackoverflow.com/users/38753/eightyeight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 999, "favorite_count": 2, "answer_count": 2, "score": 10, "last_activity_date": 1526520278, "creation_date": 1525190824, "question_id": 50119863, "link": "https://stackoverflow.com/questions/50119863/server-becomes-unresponsive-periodically-oom-killer-inactive", "title": "Server becomes unresponsive periodically, OOM Killer inactive?", "body": "<p>I'm hosting a Ruby application in a docker container on AWS. Unfortunately this Ruby application is known to leak memory so eventually it consumes all of the available memory. </p>\n\n<p>I'm, perhaps naively, expecting OOM killer to get invoked and kill the Ruby process but nothing happens. Eventually the machine becomes unresponsive (web server doesn't respond, ssh is disabled). We force restart of the machine from the AWS console and get the following in the message the logs, so it is indeed alive at the time of the restart:</p>\n\n<pre><code>Apr 30 23:07:14 ip-10-0-10-24 init: serial (ttyS0) main process (2947) killed by TERM signal\n</code></pre>\n\n<p>I dont believe that this is resource exhaustion (ie running out of credits) in AWS. If I restart the application periodically the server never goes down.</p>\n\n<ul>\n<li>I'm not disabling OOM Killer or changing any of the <a href=\"https://docs.docker.com/config/containers/resource_constraints/\" rel=\"noreferrer\">default docker memory config</a>.</li>\n<li>I'm running a stock <em>Amazon Linux AMI release 2017.03</em> kernel.</li>\n<li>This behavior is happening across multiple virtual instances in AWS</li>\n</ul>\n\n<p>I'm very much at a loss here; why would memory pressure be causing machines to lock up?</p>\n"}, {"tags": ["ruby", "rubygems", "gemfile"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1525185999, "post_id": 50118432, "comment_id": 87254459, "body": "can&#39;t you just use <a href=\"http://bundler.io/v1.12/groups.html\" rel=\"nofollow noreferrer\">bundler groups</a>?"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1525186381, "post_id": 50118432, "comment_id": 87254652, "body": "@SergioTulentsev If we used Groups we&#39;d have to make sure the bundle installs were set to exclude the others. It&#39;d be more code and not very clean. The comment methodology would work better. What we&#39;re looking for is a way to purely use the environment to dictate the gem install."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1525187991, "post_id": 50118432, "comment_id": 87255548, "body": "@Cameron but that is what groups are for e.g. <code>gem our_gem, &quot;0.0.1&quot;, source: &#39;https:&#47;&#47;gems.website.com&#39;, group: [:qa,:bamboo]</code> and <code>gem our_gem, path: &quot;..&#47;our_gem&quot;, group: [:development,:test]</code>"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1525188361, "post_id": 50118432, "comment_id": 87255735, "body": "@engineersmnky yes but we&#39;re wanting to install based on environment rather than not install based on environment. If we used groups we&#39;d have to do <code>bundle install --without production qa bamboo</code> for our development. Just wondered if we could build something that would be easier if we could tailor it the reverse. We do use that command on our CI server to exclude dev and test gems but that&#39;s automated, where as our team is using terminal, etc, to do the bundle so they&#39;d have to remember to exclude or setup an alias hence why they&#39;ve opted for the comments approach."}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 1, "creation_date": 1525188567, "post_id": 50118432, "comment_id": 87255831, "body": "It&#39;d be better if Bundler supported something like groups whereby gems were installed based on their environment rather than having to manually exclude those in other groups. Which is essentially what we&#39;re trying to see if we can achieve."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1525189259, "post_id": 50118432, "comment_id": 87256235, "body": "@Cameron but <code>bundler</code> does not have an environment <code>rails</code> does. Just because you are bundling does not mean you are using <code>rails</code> so what would environment mean in this case?"}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "edited": false, "score": 0, "creation_date": 1525190916, "post_id": 50118432, "comment_id": 87257114, "body": "You can wrap your custom_gem method with commands from <a href=\"https://gist.github.com/adamjmurray/3154437\" rel=\"nofollow noreferrer\">this Gist</a>. Give it a try."}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1525192083, "post_id": 50118432, "comment_id": 87257742, "body": "@engineersmnky So in our case our custom method would be the best way forward... but are we able to use custom methods inside Gemfiles?"}], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525185671, "creation_date": 1525185340, "last_edit_date": 1525185671, "question_id": 50118432, "link": "https://stackoverflow.com/questions/50118432/custom-method-for-getting-a-gem-inside-gemfile", "title": "Custom method for getting a gem inside Gemfile", "body": "<p>When we're building our apps using a custom Gem we have to keep making amendments to our Gemfile to point at either our local code, our shared server (using geminabox) or when in production we use a version of the gem unpacked (as our gem server is vpn protected).</p>\n\n<p>This means we have code like this in our gemfile:</p>\n\n<pre><code># QA and Bamboo\ngem 'our_gem', '0.0.1', source: 'https://gems.website.com'\n# Development, Test\n#gem 'our_gem', path: \"../our_gem\"\n# Production\n#gem 'our_gem', path: \"../vendor/gems/our_gem-0.1.1\"\n</code></pre>\n\n<p>And our developers have to keep commenting and uncommenting each line before they do a push to a branch for building on Bamboo, etc.</p>\n\n<p>One proposal was to replace it with a custom method like:</p>\n\n<pre><code>custom_gem 'our_gem', '0.1.1'\n</code></pre>\n\n<p>in place of the <code>gem</code> declaration in the Gemfile.</p>\n\n<p>Which would be:</p>\n\n<pre><code>def custom_gem(name, version = '0.0.1')\n  case Rails.env\n  when qa?, :bamboo?\n    gem name, version, source: 'https://gems.website.com'\n  when development?, test?\n    gem name, path: \"../#{name}\"\n  when production?\n    gem name, path: \"../vendor/gems/#{name}-#{version}\"\n  else\n    fail \"Unknown environment for gem: #{name}\"\n  end\nend\n</code></pre>\n\n<p>The question is... can you use custom methods like this inside a Gemfile? and if so where would this code live within an application. Or would we have to resort to using something like: <a href=\"http://bundler.io/man/gemfile.5.html#INSTALL_IF\" rel=\"nofollow noreferrer\">http://bundler.io/man/gemfile.5.html#INSTALL_IF</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "migration", "relation"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 8085613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e4bb88cb80e591f8522e6927463096?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis CHEVREUX", "link": "https://stackoverflow.com/users/8085613/alexis-chevreux"}, "edited": false, "score": 0, "creation_date": 1525182927, "post_id": 50117632, "comment_id": 87252798, "body": "Hello, your answer work but the &quot;chosen_deck_id&quot; still nil do you have an idea ? If I do a user.choosen_deck = deck it&#39;s work but if I only look in database choose_deck_id still nil"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 105, "user_id": 8085613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e4bb88cb80e591f8522e6927463096?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis CHEVREUX", "link": "https://stackoverflow.com/users/8085613/alexis-chevreux"}, "edited": false, "score": 0, "creation_date": 1525183263, "post_id": 50117632, "comment_id": 87252983, "body": "Well, you don&#39;t show any code where you&#39;re trying to set <code>chosen_deck</code>. If you add that to your question, I can take a look. BTW, you would have to do a <code>user.save</code> in order for the <code>chosen_deck_id</code> to be saved to the database. If you&#39;re still having problems, you can do <code>user.valid?</code> and then examine <code>user</code> for errors."}, {"owner": {"reputation": 105, "user_id": 8085613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e4bb88cb80e591f8522e6927463096?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis CHEVREUX", "link": "https://stackoverflow.com/users/8085613/alexis-chevreux"}, "edited": false, "score": 0, "creation_date": 1525183625, "post_id": 50117632, "comment_id": 87253169, "body": "u.chosen_deck works but u don&#39;t show the deck id in chosen_deck_id"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 105, "user_id": 8085613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e4bb88cb80e591f8522e6927463096?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis CHEVREUX", "link": "https://stackoverflow.com/users/8085613/alexis-chevreux"}, "edited": false, "score": 0, "creation_date": 1525184835, "post_id": 50117632, "comment_id": 87253785, "body": "A couple of things. When you assign <code>u = User.new(hp: 20, armor: 20, choosen_deck: d)</code>, <code>d</code> doesn&#39;t have an <code>id</code> yet because it hasn&#39;t been saved. So, <code>chosen_deck_id</code> can&#39;t be set. Also, this is rails 5? If so, <code>belongs_to</code> defaults to required <code>true</code>. You may need to change that, but I&#39;m not sure."}, {"owner": {"reputation": 105, "user_id": 8085613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e4bb88cb80e591f8522e6927463096?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis CHEVREUX", "link": "https://stackoverflow.com/users/8085613/alexis-chevreux"}, "edited": false, "score": 0, "creation_date": 1525185030, "post_id": 50117632, "comment_id": 87253894, "body": "yeah but how it&#39;s work for rails if my user requires my deck and my deck requires my user ?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 105, "user_id": 8085613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e4bb88cb80e591f8522e6927463096?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis CHEVREUX", "link": "https://stackoverflow.com/users/8085613/alexis-chevreux"}, "edited": false, "score": 0, "creation_date": 1525185727, "post_id": 50117632, "comment_id": 87254297, "body": "Updated answer."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1525185717, "last_edit_date": 1525185717, "creation_date": 1525182347, "answer_id": 50117632, "question_id": 50117559, "link": "https://stackoverflow.com/questions/50117559/rails-custom-relations-error-has-many-and-has-one-in-the-same-model/50117632#50117632", "title": "Rails Custom relations error has_many and has_one in the same model", "body": "<p>Shouldn't it just be:</p>\n\n<pre><code>class Deck &lt; ActiveRecord::Base\n  belongs_to :user\nend\n</code></pre>\n\n<p>I'm not sure what you intended by: </p>\n\n<pre><code>belongs_to :choosen_deck, class_name: 'User'\n</code></pre>\n\n<p>In terms of creating your records, I think you should be able to do something like: </p>\n\n<pre><code>user = User.create!(hp: 20, armor: 20)\nuser.create_choosen_deck!(name: \"Deck t\")\nuser.decks.create!(name: \"Deck 2\")\n</code></pre>\n\n<p><code>create_choosen_deck</code> and <code>decks.create</code> are methods provided by the association declaration (see the <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">Docs</a> for more information). If you use these methods, then the <code>user_id</code> value will be set automatically.</p>\n\n<p>(BTW, it's <code>chosen</code>, not <code>choosen</code>.)</p>\n"}], "owner": {"reputation": 105, "user_id": 8085613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e4bb88cb80e591f8522e6927463096?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis CHEVREUX", "link": "https://stackoverflow.com/users/8085613/alexis-chevreux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 50117632, "answer_count": 1, "score": 1, "last_activity_date": 1525185717, "creation_date": 1525182039, "last_edit_date": 1525183574, "question_id": 50117559, "link": "https://stackoverflow.com/questions/50117559/rails-custom-relations-error-has-many-and-has-one-in-the-same-model", "title": "Rails Custom relations error has_many and has_one in the same model", "body": "<p>this is my relation:</p>\n\n<pre><code>create_table :decks do |t|\n    t.references :user, index: true\n    t.string :name\n\n    t.timestamps\nend\n\ncreate_table :users do |t|\n    t.references :choosen_deck, index: true, foreign_key: { to_table: :decks }\n    t.integer :hp\n    t.integer :armor\n\n    t.timestamps\nend\n</code></pre>\n\n<p>Relation:</p>\n\n<p>=> user.rb</p>\n\n<pre><code>  has_many :decks, dependent: :destroy\n  has_one :choosen_deck, class_name: 'Deck', dependent: :destroy\n</code></pre>\n\n<p>=> deck.rb</p>\n\n<pre><code>  belongs_to :user, foreign_key: 'user_id'\n  belongs_to :choosen_deck, class_name: 'User'\n</code></pre>\n\n<p>this is my migration, I want to have this kind of relations:</p>\n\n<p>=> user.choosen_deck</p>\n\n<p>=> user.decks</p>\n\n<p>=> deck.user</p>\n\n<p>But it doesn't work because I can't save the deck model.\nDo you have an idea ?</p>\n\n<p>UPDATE:</p>\n\n<p>=> this is the trace</p>\n\n<pre><code>2.4.1 :002 &gt; d = Deck.new(name: \"Deck t\")\n(0.5ms)  SET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483\n=&gt; #&lt;Deck id: nil, user_id: nil, name: \"Deck t\", created_at: nil, updated_at: nil&gt; \n2.4.1 :003 &gt; u = User.new(hp: 20, armor: 20, choosen_deck: d)\n=&gt; #&lt;User id: nil, choosen_deck_id: nil, hp: 20, armor: 20, created_at: nil, updated_at: nil&gt; \n2.4.1 :004 &gt; d.user\n=&gt; #&lt;User id: nil, choosen_deck_id: nil, hp: 20, armor: 20, created_at: nil, updated_at: nil&gt; \n2.4.1 :005 &gt; d.save\n(0.2ms)  BEGIN\nUser Create (0.3ms)  INSERT INTO `users` (`hp`, `armor`, `created_at`, `updated_at`) VALUES (20, 20, '2018-05-01 13:53:18', '2018-05-01 13:53:18')\nDeck Create (0.2ms)  INSERT INTO `decks` (`user_id`, `name`, `created_at`, `updated_at`) VALUES (1, 'Deck t', '2018-05-01 13:53:18', '2018-05-01 13:53:18')\n(5.7ms)  COMMIT\n=&gt; true \n2.4.1 :007 &gt; d2 = Deck.create(name: \"Deck 2\", user: u)\n(0.2ms)  BEGIN\nDeck Create (0.3ms)  INSERT INTO `decks` (`user_id`, `name`, `created_at`, `updated_at`) VALUES (1, 'Deck 2', '2018-05-01 13:53:57', '2018-05-01 13:53:57')\n(4.0ms)  COMMIT\n=&gt; #&lt;Deck id: 2, user_id: 1, name: \"Deck 2\", created_at: \"2018-05-01      13:53:57\", updated_at: \"2018-05-01 13:53:57\"&gt; \n2.4.1 :008 &gt; u\n=&gt; #&lt;User id: 1, choosen_deck_id: nil, hp: 20, armor: 20, created_at: \"2018-05-01 13:53:18\", updated_at: \"2018-05-01 13:53:18\"&gt; \n2.4.1 :009 &gt; u.choosen_deck\n=&gt; #&lt;Deck id: 1, user_id: 1, name: \"Deck t\", created_at: \"2018-05-01 13:53:18\", updated_at: \"2018-05-01 13:53:18\"&gt; \n2.4.1 :010 &gt; u.save\n(0.2ms)  BEGIN\n(0.1ms)  COMMIT\n=&gt; true \n2.4.1 :011 &gt; d.save\n(0.2ms)  BEGIN\n(0.2ms)  COMMIT\n=&gt; true \n2.4.1 :012 &gt; d2.save\n(0.2ms)  BEGIN\n(0.1ms)  COMMIT\n=&gt; true \n</code></pre>\n\n<p>Have a nice day</p>\n"}, {"tags": ["ruby", "encryption", "google-api-client", "google-api-ruby-client", "google-cloud-kms"], "answers": [{"comments": [{"owner": {"reputation": 419, "user_id": 1565883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8530bc9e10e77f00f162d1990a85ca78?s=128&d=identicon&r=PG", "display_name": "Russ Amos", "link": "https://stackoverflow.com/users/1565883/russ-amos"}, "edited": false, "score": 3, "creation_date": 1525184878, "post_id": 50118249, "comment_id": 87253813, "body": "OP, you may also find <a href=\"https://cloud.google.com/security/encryption-in-transit/\" rel=\"nofollow noreferrer\">Encryption in Transit in Google Cloud</a> interesting."}, {"owner": {"reputation": 1736, "user_id": 1342079, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/av0i6.jpg?s=128&g=1", "display_name": "Tim Dierks", "link": "https://stackoverflow.com/users/1342079/tim-dierks"}, "reply_to_user": {"reputation": 419, "user_id": 1565883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8530bc9e10e77f00f162d1990a85ca78?s=128&d=identicon&r=PG", "display_name": "Russ Amos", "link": "https://stackoverflow.com/users/1565883/russ-amos"}, "edited": false, "score": 1, "creation_date": 1525195215, "post_id": 50118249, "comment_id": 87259313, "body": "Yes, that&#39;s excellent for how data is protected in transit in ingress to Google, while flying around inside of Google, and then egressed."}, {"owner": {"reputation": 1518, "user_id": 3150057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32880beea401dfe8fdccd7bced822d5d?s=128&d=identicon&r=PG", "display_name": "Henry Blyth", "link": "https://stackoverflow.com/users/3150057/henry-blyth"}, "edited": false, "score": 1, "creation_date": 1525254934, "post_id": 50118249, "comment_id": 87281334, "body": "Thanks @TimDierks! That solves all my worries and informs really, really concisely! Thank you also for mentioning a PKI evaluation as my next step to be absolutely certain =)"}], "tags": [], "owner": {"reputation": 1736, "user_id": 1342079, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/av0i6.jpg?s=128&g=1", "display_name": "Tim Dierks", "link": "https://stackoverflow.com/users/1342079/tim-dierks"}, "is_accepted": true, "score": 3, "last_activity_date": 1525184661, "creation_date": 1525184661, "answer_id": 50118249, "question_id": 50117509, "link": "https://stackoverflow.com/questions/50117509/how-does-cloudkms-encryption-decryption-work-securely-when-being-called-from-a-n/50118249#50118249", "title": "How does CloudKMS encryption/decryption work securely when being called from a non-Google system?", "body": "<p>The communications between your client and Google are secured via TLS. You can see in Wireshark that the communications are on port 443 and that a TLS connection is negotiated.</p>\n\n<p>Your requests are authenticated using OAuth. In this case (using a service account from outside of GCP), this is done using the flow documented in <a href=\"https://developers.google.com/identity/protocols/OAuth2ServiceAccount\" rel=\"nofollow noreferrer\">Using OAuth 2.0 for Server to Server Applications</a>:</p>\n\n<ul>\n<li>you are responsible for provisioning your off-GCP app with the private key issued to the service account you wish to assert;</li>\n<li>it then uses that private key to <a href=\"https://developers.google.com/identity/protocols/OAuth2ServiceAccount#creatingjwt\" rel=\"nofollow noreferrer\">sign a JWT</a> and submit it to Google's OAuth server;</li>\n<li>Google replies with an OAuth access token which is a bearer credential which identifies the service account in question;</li>\n<li>You then provide that access token with your requests to KMS to identify the entity making the requests as the service account and using its authority;</li>\n<li>KMS and GCP then use that identity to evaluate IAM access controls to determine whether particular operations are authorized.</li>\n</ul>\n\n<p>This is secured end-to-end (the TLS connection is end-to-end security since the parties to the communication\u2014your service and Google\u2014are the TLS endpoints). Since your question seems to be \"are these requests secure in transit, and how can I show this\", I think it's sufficient to show that a TLS connection is being negotiated, Wireshark should be able to show you this. (Your connection library also needs to be doing a suitable PKI evaluation of the presented certificate; validating that this is taking place correctly is a little more involved, but it's a reasonable thing to trust is happening correctly if you investigate the tools you're using and their assertions around certificate validation).</p>\n\n<p>Best wishes and thanks for using GCP and Cloud KMS. Let us know if you have any further questions.</p>\n"}], "owner": {"reputation": 1518, "user_id": 3150057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32880beea401dfe8fdccd7bced822d5d?s=128&d=identicon&r=PG", "display_name": "Henry Blyth", "link": "https://stackoverflow.com/users/3150057/henry-blyth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 577, "favorite_count": 0, "accepted_answer_id": 50118249, "answer_count": 1, "score": 3, "last_activity_date": 1525184661, "creation_date": 1525181866, "question_id": 50117509, "link": "https://stackoverflow.com/questions/50117509/how-does-cloudkms-encryption-decryption-work-securely-when-being-called-from-a-n", "title": "How does CloudKMS encryption/decryption work securely when being called from a non-Google system?", "body": "<p>I need to know that the <code>plaintext</code>/<code>ciphertext</code> being sent to Google CloudKMS, and the public/private key used to authenticate, are secure in transit, but I don't know how to prove that.</p>\n\n<p>As per <a href=\"https://cloud.google.com/kms/docs/accessing-the-api#non-google_production_environment\" rel=\"nofollow noreferrer\">KMS docs</a>, I created a service account, downloaded the JSON key file, and have hooked it up via the environment variable <code>GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json</code>.</p>\n\n<p>I am using the <a href=\"https://github.com/google/google-api-ruby-client/tree/0.10.3\" rel=\"nofollow noreferrer\">google-api-client gem</a> (at version <code>0.10.3</code>, released 13 months old, because I can't install <code>mime-types &gt;= 3.0</code> whilst using padrino-mailer: see <a href=\"https://github.com/padrino/padrino-framework/commit/701fca1c5059bcc3cbea57edb0d92457036307b0\" rel=\"nofollow noreferrer\">this commit</a>), have tested the <a href=\"https://github.com/google/google-api-ruby-client/blob/0.10.3/generated/google/apis/cloudkms_v1/service.rb#L35\" rel=\"nofollow noreferrer\"><code>Google::Apis::CloudkmsV1::CloudKMSService</code></a> methods <a href=\"https://github.com/google/google-api-ruby-client/blob/0.10.3/generated/google/apis/cloudkms_v1/service.rb#L400-L410\" rel=\"nofollow noreferrer\"><code>encrypt_crypto_key</code></a> and <a href=\"https://github.com/google/google-api-ruby-client/blob/0.10.3/generated/google/apis/cloudkms_v1/service.rb#L681-L691\" rel=\"nofollow noreferrer\"><code>decrypt_crypto_key</code></a>, and they're working nicely.</p>\n\n<p>I have tried reading through the source code of the <a href=\"https://github.com/google/google-api-ruby-client/tree/0.10.3\" rel=\"nofollow noreferrer\">google-api-client</a>, <a href=\"https://github.com/google/google-auth-library-ruby\" rel=\"nofollow noreferrer\">googleauth</a>, and <a href=\"https://github.com/google/signet\" rel=\"nofollow noreferrer\">signet</a> gems. All I'm certain of is:</p>\n\n<ol>\n<li>The JSON key file is loaded and the <code>private_key</code> value is used to make <code>OpenSSL::PKey::RSA.new</code> <a href=\"https://github.com/google/google-auth-library-ruby/blob/0dab02dbaa9c5ad84a0aaf99f94de1fbcf3e53e1/lib/googleauth/service_account.rb#L69\" rel=\"nofollow noreferrer\">here</a></li>\n<li><code>Signet::OAuth2::Client</code> is given the RSA key as <code>signing_key</code> in <a href=\"https://github.com/google/signet/blob/81da2370274da791f9948c4ef18fe793bdfa6876/lib/signet/oauth_2/client.rb\" rel=\"nofollow noreferrer\">this file</a> </li>\n</ol>\n\n<p>I would consider the security proven if the JSON key file is used to encrypt the string sent through <code>encrypt_crypto_key</code> on the calling server, and likewise to decrypt the string received by <code>decrypt_crypto_key</code>, and the CloudKMS server on the other end behaves similarly. This is what I'm assuming the library does \u2013 End-to-end encryption \u2013 but I must see it to believe it. I attempted to view the traffic in Wireshark but couldn't make any sense of it (maybe that fact proves it? I don't know \ud83d\ude23)</p>\n\n<p>Can anyone help me prove or disprove this method of calling CloudKMS to encrypt/decrypt user data \u2013 using the <a href=\"https://github.com/google/google-api-ruby-client/tree/0.10.3\" rel=\"nofollow noreferrer\">google-api-client gem</a> with a JSON key file downloaded as <a href=\"https://cloud.google.com/kms/docs/accessing-the-api#non-google_production_environment\" rel=\"nofollow noreferrer\">per the docs</a> \u2013 is secure?</p>\n\n<hr>\n\n<p>Related: for those of you who are interested, the CloudKMS API is <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues/1832\" rel=\"nofollow noreferrer\">on the roadmap</a> to be included in the <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-ruby\" rel=\"nofollow noreferrer\">newer google-cloud gem</a>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "webpack", "ruby-on-rails-5", "webpacker"], "comments": [{"owner": {"reputation": 3557, "user_id": 686567, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XljwS.jpg?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/686567/cyrus"}, "edited": false, "score": 0, "creation_date": 1549333599, "post_id": 50117461, "comment_id": 95856011, "body": "Why do they both need bootstrap? Can&#39;t you just use the css classes in your front-end app (e.g. react, vue.js, etc ...)"}], "owner": {"reputation": 490, "user_id": 2037662, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4833c21cea66347b690327d91ec9695e?s=128&d=identicon&r=PG", "display_name": "ashr81", "link": "https://stackoverflow.com/users/2037662/ashr81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1525211938, "creation_date": 1525181675, "last_edit_date": 1525211938, "question_id": 50117461, "link": "https://stackoverflow.com/questions/50117461/webpacker-and-asset-pipeline-in-ruby-on-rails", "title": "Webpacker and Asset pipeline in ruby on rails", "body": "<p>I am using <code>webpacker</code> gem with <code>rails</code>.<br>\nHow will it play, when we have stylesheets in <code>app/assets/stylesheets</code> and <code>app/javascripts/packs/frontend</code> .<br>\nDoes it generate two different minified files? One from <code>webpacker</code> and another from the <code>assets pipeline</code>.   </p>\n\n<p>If it does, can I merge both to generate a single file at last? </p>\n\n<p>If it doesn't, how do they resolve dependency issues like both needing the <code>bootstrap</code> library. How is this achieved? Is it by importing the dependent library twice? If so, is there a way to optimize it?</p>\n\n<p>Also, if we include a style of assets files in respective controller javascript, are those styles available in <code>html.erb</code> file as well?</p>\n\n<p>If so, how can I achieve this using webpacker (requiring javascript by default in <code>.html.erb</code> files)</p>\n\n<p>For example, I have a folder named <code>employee</code> under <code>app/assets/stylesheets</code> which are by default add styling to the files under this folder in view files (I think rails will do this by default). Right? And company folder under <code>packs/stylesheets</code>. how do I use the <code>company</code> styles inside my <code>.html.erb</code>. Do I need to explicitly require the styles?</p>\n"}, {"tags": ["ruby", "rspec", "rspec3"], "answers": [{"tags": [], "owner": {"reputation": 1159, "user_id": 4537254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n6OpD.jpg?s=128&g=1", "display_name": "Andr&#233; Guimar&#227;es Sakata", "link": "https://stackoverflow.com/users/4537254/andr%c3%a9-guimar%c3%a3es-sakata"}, "is_accepted": false, "score": 1, "last_activity_date": 1525183808, "creation_date": 1525183808, "answer_id": 50118027, "question_id": 50117365, "link": "https://stackoverflow.com/questions/50117365/use-rspec-shared-examples-to-test-a-ruby-class-attributes/50118027#50118027", "title": "Use Rspec shared examples to test a Ruby class&#39; attributes", "body": "<p>You can \"provide context to a shared group using a block\", as described <a href=\"https://relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>require \"set\"\n\nRSpec.shared_examples \"a collection object\" do\n  describe \"&lt;&lt;\" do\n    it \"adds objects to the end of the collection\" do\n      collection &lt;&lt; 1\n      collection &lt;&lt; 2\n      expect(collection.to_a).to match_array([1, 2])\n    end\n  end\nend\n\nRSpec.describe Array do\n  it_behaves_like \"a collection object\" do\n    let(:collection) { Array.new }\n  end\nend\n\nRSpec.describe Set do\n  it_behaves_like \"a collection object\" do\n    let(:collection) { Set.new }\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 2, "last_activity_date": 1525206840, "last_edit_date": 1525206840, "creation_date": 1525191186, "answer_id": 50119964, "question_id": 50117365, "link": "https://stackoverflow.com/questions/50117365/use-rspec-shared-examples-to-test-a-ruby-class-attributes/50119964#50119964", "title": "Use Rspec shared examples to test a Ruby class&#39; attributes", "body": "<p>Your shared example block takes an argument <code>method</code>, but you do not pass one to it. However, you are very close.  Just change: </p>\n\n<pre><code>context ':url attribute' do\n  it_behaves_like \"a URL\", :url\nend\n</code></pre>\n\n<p>Now we are passing the <code>:url</code> symbol to the shared example as <code>method</code>. Then you need to change your references to <code>:method=</code> (which will fail because it is literally <code>subject.method=</code>) to <code>subject.send(\"#{method}=\", value)</code> so that we are actually calling the method <code>url=</code>. e.g.</p>\n\n<pre><code>it \"ensures that :#{method} does not exceed 255 characters\" do\n  subject.send(\"#{method}=\", 'http://' + '@' * 256)\n  expect(subject).to_not be_valid\nend\n</code></pre>\n\n<p>All that being said I would recommend changing the name of the local variable from <code>method</code> to something else (maybe even <code>method_name</code>) just to avoid confusion of the <code>method()</code> method and your local variable <code>method</code>.</p>\n\n<p><a href=\"https://repl.it/@engineersmnky/CompetentMajorWeb\" rel=\"nofollow noreferrer\">Full Example</a></p>\n"}], "owner": {"reputation": 23753, "user_id": 134367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PgGXL.png?s=128&g=1", "display_name": "craig", "link": "https://stackoverflow.com/users/134367/craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 50119964, "answer_count": 2, "score": 2, "last_activity_date": 1525206840, "creation_date": 1525181260, "last_edit_date": 1525206787, "question_id": 50117365, "link": "https://stackoverflow.com/questions/50117365/use-rspec-shared-examples-to-test-a-ruby-class-attributes", "title": "Use Rspec shared examples to test a Ruby class&#39; attributes", "body": "<p>Trying to use a Rspec shared example to test two URL-like properties:</p>\n\n<h1>spec/entity_spec.rb</h1>\n\n<pre><code>require 'entity'\nrequire 'shared_examples/a_url'\n\ndescribe Entity do\n\n  # create valid subject\n  subject { described_class.new(name: 'foobar') }\n\n  context ':url attribute' do\n    it_behaves_like \"a URL\"\n  end\n\n  context ':wikipedia_url attribute' do\n    it_behaves_like \"a URL\"\n  end\n\nend\n</code></pre>\n\n<h1>spec/shared_examples/a_url.rb</h1>\n\n<pre><code>shared_examples_for('a URL') do |method|\n\n    it \"ensures that :#{method} does not exceed 255 characters\" do\n      subject.send(:method=, 'http://' + '@' * 256)\n      expect(subject).to_not be_valid\n    end\n\n    it \"ensures that :#{method} do not accept other schemes\" do\n      subject.send(:method=, 'ftp://foobar.com')\n      expect(subject).to_not be_valid\n    end\n\n    it \"ensures that :#{method} accepts http://\" do\n      subject.send(:method=, 'http://foobar.com')\n      expect(subject).to be_valid\n    end\n\n    it \"ensures that :#{method} accepts https://\" do\n      subject.send(:method=, 'https://foobar.com')\n      expect(subject).to be_valid\n    end\n\nend\n</code></pre>\n\n<p>Clearly I need to send a reference to the <code>:url</code> and <code>:wikipedia_url</code> attributes to the shared example, but how?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1525185833, "post_id": 50116174, "comment_id": 87254357, "body": "In Ruby we prefer two-spaces for indentation:)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1525219430, "post_id": 50116174, "comment_id": 87268890, "body": "This isn&#39;t Ruby code as far as I can tell. It&#39;s <code>def method</code> but <code>method</code> is not a very good method name as there&#39;s already <code>Object#method</code> which you&#39;d be breaking."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9724583, "user_type": "registered", "profile_image": "https://graph.facebook.com/470946310005803/picture?type=large", "display_name": "Andres P&#233;rez", "link": "https://stackoverflow.com/users/9724583/andres-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1525178515, "post_id": 50116305, "comment_id": 87250488, "body": "Thanks! That helped!"}, {"owner": {"reputation": 663, "user_id": 8282168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba492cef39f592a7e738a4d3a70b8bab?s=128&d=identicon&r=PG&f=1", "display_name": "L_Church", "link": "https://stackoverflow.com/users/8282168/l-church"}, "reply_to_user": {"reputation": 49, "user_id": 9724583, "user_type": "registered", "profile_image": "https://graph.facebook.com/470946310005803/picture?type=large", "display_name": "Andres P&#233;rez", "link": "https://stackoverflow.com/users/9724583/andres-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1525178531, "post_id": 50116305, "comment_id": 87250495, "body": "Awesome. Again, happy coding."}], "tags": [], "owner": {"reputation": 663, "user_id": 8282168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba492cef39f592a7e738a4d3a70b8bab?s=128&d=identicon&r=PG&f=1", "display_name": "L_Church", "link": "https://stackoverflow.com/users/8282168/l-church"}, "is_accepted": true, "score": 4, "last_activity_date": 1525176935, "creation_date": 1525176935, "answer_id": 50116305, "question_id": 50116174, "link": "https://stackoverflow.com/questions/50116174/enter-with-no-input-as-a-valid-boolean/50116305#50116305", "title": "Enter with no input as a valid boolean", "body": "<p>What the error is saying is that you are supplying a string (literal) inside of a conditional statement by itself. When you do <code>if correct == \"y\" || \"\"</code> you're actually telling it <code>if correct == \"y\"</code> OR <code>\"\"</code> and just supplying the string by itself is not a condition.</p>\n\n<p>To fix this you'd simply supply the condition after the operator as well as before it. Ruby does not assume you want the same thing to happen after the <code>||</code>.</p>\n\n<p>Like this:</p>\n\n<pre><code>define method\n        puts \"enter some text\"\n        @text= gets.chomp\n        puts \"you entered '#{@text}', is it correct?\"\n        correct = gets.chomp    \n             if correct == 'y' || correct == ''\n             other_method\n             else\n             method\n        end\nend\n</code></pre>\n\n<p>Hope this helps. Happy coding</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 9724583, "user_type": "registered", "profile_image": "https://graph.facebook.com/470946310005803/picture?type=large", "display_name": "Andres P&#233;rez", "link": "https://stackoverflow.com/users/9724583/andres-p%c3%a9rez"}, "edited": false, "score": 1, "creation_date": 1525179871, "post_id": 50116699, "comment_id": 87251155, "body": "I am quite a newby (some video tutorials constitute all my knowledge of programming), and your answer led me to regular expressions, which apparently are quite important, so I&#39;m gonna do some reading on the subject to improve my coding. Thank you very much!"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 49, "user_id": 9724583, "user_type": "registered", "profile_image": "https://graph.facebook.com/470946310005803/picture?type=large", "display_name": "Andres P&#233;rez", "link": "https://stackoverflow.com/users/9724583/andres-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1525179988, "post_id": 50116699, "comment_id": 87251214, "body": "Good to hear. Go get&#39;em. :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1525219659, "post_id": 50116699, "comment_id": 87268934, "body": "In Ruby there&#39;s a big difference between <code>^</code> and <code>\\A</code> as well as <code>$</code> and <code>\\z</code>. <code>^</code> means <i>beginning of line</i> and <code>\\A</code> means <i>beginning of string</i>. Same goes for the other two, relatively speaking."}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1525178955, "last_edit_date": 1525178955, "creation_date": 1525178628, "answer_id": 50116699, "question_id": 50116174, "link": "https://stackoverflow.com/questions/50116174/enter-with-no-input-as-a-valid-boolean/50116699#50116699", "title": "Enter with no input as a valid boolean", "body": "<p>Here is another option using <strong>Regex</strong> (<a href=\"https://ruby-doc.org/core-2.2.0/Regexp.html\" rel=\"nofollow noreferrer\">Docs</a>):</p>\n\n<pre><code>puts \"enter some text\"\n@text= gets.chomp\nputs \"you entered '#{@text}', is it correct?\"\ncorrect = gets.chomp\nif /^y?$/ =~ correct      # This will match 'y' and empty string both\n  other_method\nelse\n  method\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1525219580, "creation_date": 1525219580, "answer_id": 50125448, "question_id": 50116174, "link": "https://stackoverflow.com/questions/50116174/enter-with-no-input-as-a-valid-boolean/50125448#50125448", "title": "Enter with no input as a valid boolean", "body": "<p>The solution here is to use Ruby's very versatile <code>case</code> statement to set up a number of \"cases\" you want to test:</p>\n\n<pre><code>puts \"you entered '#{@text}', is it correct?\"\n\ncase (gets.chomp)\nwhen 'y', 'yes', ''\n  method_a\nelse\n  method_b\nend\n</code></pre>\n\n<p>This can be extended to use regular expressions for even more versatility:</p>\n\n<pre><code>case (gets.chomp)\nwhen /\\A\\s*y(?:es)?\\s*\\z/i\n  method_a\nelse\n  method_b\nend\n</code></pre>\n\n<p>Where now anything like <code>\"y\"</code> or <code>\"yes\"</code> or <code>\"Yes \"</code> will work.</p>\n\n<p>When you have bunch of <code>if</code> statements all testing the same variable, consider using a <code>case</code> statement to simplify your logic.</p>\n"}], "owner": {"reputation": 49, "user_id": 9724583, "user_type": "registered", "profile_image": "https://graph.facebook.com/470946310005803/picture?type=large", "display_name": "Andres P&#233;rez", "link": "https://stackoverflow.com/users/9724583/andres-p%c3%a9rez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 50116305, "answer_count": 3, "score": 1, "last_activity_date": 1525219580, "creation_date": 1525176318, "last_edit_date": 1525219395, "question_id": 50116174, "link": "https://stackoverflow.com/questions/50116174/enter-with-no-input-as-a-valid-boolean", "title": "Enter with no input as a valid boolean", "body": "<p>I'm writing some very simple code, asking for confirmation on a text input, and \nwhat I want to do is that if the users simply presses \"Enter\", make it count as a \"yes\". For example:</p>\n\n<pre><code>define method\n        puts \"enter some text\"\n        @text= gets.chomp\n        puts \"you entered '#{@text}', is it correct?\"\n        correct = gets.chomp    \n             if correct == 'y' || ''\n             other_method\n             else\n             method\n        end\nend\n</code></pre>\n\n<p>But when I run it on Ruby, I get the \"Warning, literal string in condition\", and whatever you enter, calls the \"other_method\". The solution I found is the following:</p>\n\n<pre><code>define method\n        puts \"enter some text\"\n        @text= gets.chomp\n        puts \"you entered '#{@text}', is it correct?\"\n        correct = gets.chomp    \n             if correct == 'y'\n             other_method\n             elsif correct == ''\n             other_method\n             else\n             method\n        end\nend\n</code></pre>\n\n<p>But it's pretty annoying, I'd rather understand why the first one doesn't work, and how can I make it work using the | |</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 725, "user_id": 6690593, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205060765258809/picture?type=large", "display_name": "Alexis Toby", "link": "https://stackoverflow.com/users/6690593/alexis-toby"}, "edited": false, "score": 0, "creation_date": 1525171201, "post_id": 50114899, "comment_id": 87247121, "body": "What is the response to the Ajax call?"}, {"owner": {"reputation": 1, "user_id": 8613184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afdb1bd7c827fa6ba22134964facc96?s=128&d=identicon&r=PG&f=1", "display_name": "Sana", "link": "https://stackoverflow.com/users/8613184/sana"}, "reply_to_user": {"reputation": 725, "user_id": 6690593, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205060765258809/picture?type=large", "display_name": "Alexis Toby", "link": "https://stackoverflow.com/users/6690593/alexis-toby"}, "edited": false, "score": 0, "creation_date": 1525172058, "post_id": 50114899, "comment_id": 87247512, "body": "state is being selected while the cities corresponding to that state are not"}], "owner": {"reputation": 1, "user_id": 8613184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afdb1bd7c827fa6ba22134964facc96?s=128&d=identicon&r=PG&f=1", "display_name": "Sana", "link": "https://stackoverflow.com/users/8613184/sana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526537389, "creation_date": 1525170380, "last_edit_date": 1526537389, "question_id": 50114899, "link": "https://stackoverflow.com/questions/50114899/city-state-ruby-gem-javascript-not-working", "title": "City-state ruby gem javascript not working", "body": "<p>I am using city-state gem(<a href=\"https://github.com/loureirorg/city-state\" rel=\"nofollow noreferrer\">https://github.com/loureirorg/city-state</a>) and trying to make a form which selects a state and then the city dynamically updatable with javascript depending on state which is selected but its not working.</p>\n\n<p>My html form is:</p>\n\n<pre><code>&lt;select id=\"states-of-country\" name=\"project[state]\"&gt;\n&lt;option id=\"no-state\" value=\"\" selected&gt;Select Your State&lt;/option&gt;  \n&lt;% CS.states(:us).each do |key, value| %&gt;\n&lt;option value=\"&lt;%= value %&gt;\" id=\"&lt;%= key %&gt;\"&gt;&lt;%= value %&gt;&lt;/option&gt;\n&lt;% end %&gt;\n&lt;/select&gt;      \n&lt;select id=\"cities-of-state\" name=\"project[city]\" class=\"form-control form-control-small\" required&gt;\n&lt;option value=\"\" selected&gt;Select Your City&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>The javascript is:</p>\n\n<pre><code>   $(document).on('change', '#states-of-country', function(e) {\n  var cities_of_state, input_state, state;\n  input_state = $(this);\n  cities_of_state = $('#cities-of-state');\n  state = this.options[e.target.selectedIndex].id;\n  if (state === 'no-state') {\n    return cities_of_state.html('');\n  } else {\n    $.ajax({\n      url: '/cities/' + $(this).children(':selected').attr('id'),\n      success: function(data) {\n        var opt;\n        opt = '&lt;option value=\"\" selected&gt;Select Your City&lt;/option&gt;';\n        if (data.length === 0) {} else {\n          data.forEach(function(i) {\n            opt += '&lt;option value=\"' + i + '\"&gt;' + i + '&lt;/option&gt;';\n          });\n          cities_of_state.html(opt);\n        }\n      }\n    });\n  }\n});\n</code></pre>\n"}, {"tags": ["ruby", "installation", "rubygems"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525171994, "post_id": 50114837, "comment_id": 87247490, "body": "Is there anything worth sharing in <code>C:&#47;Ruby25-x64&#47;lib&#47;ruby&#47;gems&#47;2.5.0&#47;extensions&#47;x64- mingw32&#47;2.5.0&#47;ox-2.9.2&#47;gem_make.out</code>?"}, {"owner": {"reputation": 49, "user_id": 9724583, "user_type": "registered", "profile_image": "https://graph.facebook.com/470946310005803/picture?type=large", "display_name": "Andres P&#233;rez", "link": "https://stackoverflow.com/users/9724583/andres-p%c3%a9rez"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525173875, "post_id": 50114837, "comment_id": 87248369, "body": "Nope, that file says the same that was stated in the command line."}, {"owner": {"reputation": 799, "user_id": 139299, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/167372e60b77c07e81a41a36f7d4f1b5?s=128&d=identicon&r=PG", "display_name": "Nossidge", "link": "https://stackoverflow.com/users/139299/nossidge"}, "edited": false, "score": 0, "creation_date": 1525283087, "post_id": 50114837, "comment_id": 87299447, "body": "Gem installs fine for me (Ruby 2.3 on Windows 7). I&#39;m using DevKit though, not MSYS/MINGW. Maybe that&#39;s the issue?"}], "owner": {"reputation": 49, "user_id": 9724583, "user_type": "registered", "profile_image": "https://graph.facebook.com/470946310005803/picture?type=large", "display_name": "Andres P&#233;rez", "link": "https://stackoverflow.com/users/9724583/andres-p%c3%a9rez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525170036, "creation_date": 1525170036, "question_id": 50114837, "link": "https://stackoverflow.com/questions/50114837/error-installing-ruby-gem-windows", "title": "Error installing ruby gem (Windows)", "body": "<p>I am trying to install the Ruby openxml-docx gem. At first I got an error that asked me to install MSYS, so I did, but now it shows me the following error:</p>\n\n<pre><code>&gt;gem install openxml-docx\nTemporarily enhancing PATH for MSYS/MINGW...\nBuilding native extensions. This could take a while...\nERROR:  Error installing openxml-docx:\n    ERROR: Failed to build gem native extension.\ncurrent directory: C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/ox-2.9.2/ext/ox\nC:/Ruby25-x64/bin/ruby.exe -r ./siteconf20180501-2696-1ds110t.rb extconf.rb\n&gt;&gt;&gt;&gt;&gt; Creating Makefile for ruby version 2.5.1 on x64-mingw32 &lt;&lt;&lt;&lt;&lt;\ncreating Makefile\nextconf.rb:67:in ``': No such file or directory - make clean (Errno::ENOENT)\n    from extconf.rb:67:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in C:/Ruby25- \nx64/lib/ruby/gems/2.5.0/gems/ox-2.9.2 for inspection.\nResults logged to C:/Ruby25-x64/lib/ruby/gems/2.5.0/extensions/x64- mingw32/2.5.0/ox-2.9.2/gem_make.out\n</code></pre>\n\n<p>Anybody knows how to solve this? \nThanks!!</p>\n"}, {"tags": ["ruby", "regex", "parsing"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1525169146, "post_id": 50114590, "comment_id": 87246256, "body": "where are your attempts?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7854451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f7c288018ce4239d15a1ecba58aa85?s=128&d=identicon&r=PG&f=1", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c", "link": "https://stackoverflow.com/users/7854451/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc"}, "edited": false, "score": 0, "creation_date": 1525171246, "post_id": 50114894, "comment_id": 87247151, "body": "Somehow I get nil."}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "reply_to_user": {"reputation": 23, "user_id": 7854451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f7c288018ce4239d15a1ecba58aa85?s=128&d=identicon&r=PG&f=1", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c", "link": "https://stackoverflow.com/users/7854451/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc"}, "edited": false, "score": 0, "creation_date": 1525172951, "post_id": 50114894, "comment_id": 87247901, "body": "For what do you get nil?"}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "reply_to_user": {"reputation": 23, "user_id": 7854451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f7c288018ce4239d15a1ecba58aa85?s=128&d=identicon&r=PG&f=1", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c", "link": "https://stackoverflow.com/users/7854451/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc"}, "edited": false, "score": 0, "creation_date": 1525173554, "post_id": 50114894, "comment_id": 87248210, "body": "Try again, I realized I had changed the regex because I thought <code>\\w</code> was more clear, but it actually does not fully capture everything. So I changed to <code>\\S</code>"}, {"owner": {"reputation": 6692, "user_id": 762747, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2e07fdac9a5b0de8a17a0e5b6a77acef?s=128&d=identicon&r=PG", "display_name": "amit_saxena", "link": "https://stackoverflow.com/users/762747/amit-saxena"}, "edited": false, "score": 0, "creation_date": 1536853467, "post_id": 50114894, "comment_id": 91581938, "body": "This breaks if the path has an equal to (i.e. it has parameters): <code>path=&quot;&#47;api&#47;online&#47;platforms&#47;facebook_canvas&#47;users&#47;1000022663&zwnj;&#8203;42173&#47;add_ticket?tes&zwnj;&#8203;t=true&quot;</code>"}], "tags": [], "owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "is_accepted": false, "score": 4, "last_activity_date": 1536156823, "last_edit_date": 1536156823, "creation_date": 1525170331, "answer_id": 50114894, "question_id": 50114590, "link": "https://stackoverflow.com/questions/50114590/parse-a-log-file-on-ruby/50114894#50114894", "title": "Parse a log file on ruby", "body": "<p>Ok, to write your regex, what you need is to finde all these couples of <code>some_variable=some_data</code>.</p>\n\n<p>Here is how you can do that:</p>\n\n<pre><code>/\\S*=\\S*/ #\n \\S*      # match any non-whitespace-character, 0-n times\n    =     # match the equal sign    \n     \\S*  # match any non-whitespace-character, 0-n times\n</code></pre>\n\n<p>This will match the couples. To extract the data, you use capture groups. \nYou enclose what you want to extract in brackets <code>(xxx)</code>, for the name of the variable and the value.</p>\n\n<pre><code>/(\\S*)=(\\S*)/  \n (\\S*)         # capture the name\n       (\\S*)   # capture the value\n</code></pre>\n\n<p>So for every log line you can do:</p>\n\n<pre><code>line_of_log.scan(/(\\S*)=(\\S*)\\s/)\n</code></pre>\n\n<p>To see what happens, and to create regular expressions, I recommend you always try it out in a tool like <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a>, really helps to understand what is happening.</p>\n\n<p>This will return an array of arrays like this:</p>\n\n<pre><code>[[\"at\", \"info\"],\n [\"method\", \"POST\"],\n [\"path\", \"/api/online/platforms/facebook_canvas/users/100002266342173/add_ticket\"],\n [\"host\", \"services.pocketplaylab.com\"],\n [\"fwd\", \"\\\"94.66.255.106\\\"\"],\n [\"dyno\", \"web.12\"],\n [\"connect\", \"12ms\"],\n [\"service\", \"21ms\"],\n [\"status\", \"200\"],\n [\"bytes\", \"78\"]]\n</code></pre>\n\n<p>No you can iterate through the array and create some kind of object or hash to work with.</p>\n\n<pre><code>scanresult.inject({}) do |obj, pair|\n  obj[pair[0].to_sym] = pair[1]\n  obj\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2873, "user_id": 185870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1196a9e29e60e7615c9f0939f8be0f28?s=128&d=identicon&r=PG", "display_name": "Teoulas", "link": "https://stackoverflow.com/users/185870/teoulas"}, "is_accepted": false, "score": 0, "last_activity_date": 1525171802, "last_edit_date": 1525171802, "creation_date": 1525170536, "answer_id": 50114934, "question_id": 50114590, "link": "https://stackoverflow.com/questions/50114590/parse-a-log-file-on-ruby/50114934#50114934", "title": "Parse a log file on ruby", "body": "<p>The solution is to use <a href=\"https://stackoverflow.com/a/18825787/185870\">named captures</a>:\n<code>String#match(/dyno=(?&lt;dyno&gt;\\S+)/)</code> will capture the dyno string. You can expand the regexp to match more.</p>\n\n<p>You can fiddle with the example here:\n<a href=\"http://rubular.com/r/4XcovTiqh3\" rel=\"nofollow noreferrer\">http://rubular.com/r/4XcovTiqh3</a> - with a bit of trial and error you can find the right regexp</p>\n\n<h3>Update after you added at your code:</h3>\n\n<pre><code>parser = log.match(/dyno=(?&lt;dyno&gt;\\S+)/) \n</code></pre>\n\n<p>will return a MatchData object from which you can get the matched dyno with:</p>\n\n<pre><code>parser['dyno']\n</code></pre>\n\n<p>Once you finalize your regexp to capture more from each line, and if you use Ruby 2.4 or later, you can also use <a href=\"https://ruby-doc.org/core-2.4.0/MatchData.html#method-i-named_captures\" rel=\"nofollow noreferrer\"><code>named_captures</code></a> to get a nice hash with all matched groups</p>\n\n<p>See how it works: <a href=\"https://repl.it/repls/SpectacularBewitchedPolygon\" rel=\"nofollow noreferrer\">https://repl.it/repls/SpectacularBewitchedPolygon</a></p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 7854451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f7c288018ce4239d15a1ecba58aa85?s=128&d=identicon&r=PG&f=1", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c", "link": "https://stackoverflow.com/users/7854451/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc"}, "edited": false, "score": 0, "creation_date": 1525177963, "post_id": 50115157, "comment_id": 87250195, "body": "I did it) Thank you all)"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1525180665, "post_id": 50115157, "comment_id": 87251536, "body": "<code>line.scan(&#47;path=([^\\s]+)&#47;).first.first</code> = <code>line[&#47;path=(\\S+)&#47;, 1]</code>"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1525334879, "post_id": 50115157, "comment_id": 87317706, "body": "thanks @WiktorStribi\u017cew , i&#39;ve not been aware of such calls on enumerables in ruby."}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": true, "score": 1, "last_activity_date": 1525334795, "last_edit_date": 1525334795, "creation_date": 1525171570, "answer_id": 50115157, "question_id": 50114590, "link": "https://stackoverflow.com/questions/50114590/parse-a-log-file-on-ruby/50115157#50115157", "title": "Parse a log file on ruby", "body": "<p>I am not a regex expert, and also aware of that below code smells -)) but you can take this as a starting point. </p>\n\n<pre><code>lines = File.readlines 'sample.log'\n\nlines.each_with_index do |line, idx|\n  path    = line.scan(/path=([^\\s]+)/).first.first\n  dyno    = line.scan(/dyno=([^\\s]+)/).first.first\n  connect = line.scan(/connect=([^\\s]+)/).first.first\n  service = line.scan(/service=([^\\s]+)/).first.first\n  puts \"#{path} #{dyno} #{connect} #{service}\"\nend\n</code></pre>\n\n<p><a href=\"https://repl.it/repls/AshamedBelatedLevel\" rel=\"nofollow noreferrer\">Link to repl</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/50114590/parse-a-log-file-on-ruby/50115157?noredirect=1#comment87251536_50115157\">Edit suggested by Wiktor Stribi\u017cew</a>, which obviously is concise and better. I should prefer it over mine. Keeping above code for <em>historical reasons</em> -))</p>\n\n<pre><code>lines.each_with_index do |line, idx|\n  path    = line[/path=([^\\s]+)/, 1]\n  dyno    = line[/dyno=([^\\s]+)/, 1]\n  connect = line[/connect=([^\\s]+)/, 1]\n  service = line[/service=([^\\s]+)/, 1]\n  puts \"#{path} #{dyno} #{connect} #{service}\"\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7854451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f7c288018ce4239d15a1ecba58aa85?s=128&d=identicon&r=PG&f=1", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c", "link": "https://stackoverflow.com/users/7854451/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2322, "favorite_count": 0, "accepted_answer_id": 50115157, "answer_count": 3, "score": 2, "last_activity_date": 1536156823, "creation_date": 1525168922, "last_edit_date": 1525178187, "question_id": 50114590, "link": "https://stackoverflow.com/questions/50114590/parse-a-log-file-on-ruby", "title": "Parse a log file on ruby", "body": "<p>I need your help. I'm writing a script on ruby, which parses the log file. But I can not write a simple regular expression for such a log. Help me please. Here is an example of a string from the log:</p>\n\n<pre><code>2014-01-09T06:16:53.766841+00:00 heroku[router]: at=info method=POST path=/logs/save_personal_data host=services.pocketplaylab.com fwd=\"5.13.87.91\" dyno=web.10 connect=1ms service=42ms status=200 bytes=16\n2014-01-09T06:16:53.772938+00:00 heroku[router]: at=info method=POST path=/api/users/100002844291023 host=services.pocketplaylab.com fwd=\"46.195.178.244\" dyno=web.6 connect=2ms service=43ms status=200 bytes=52\n2014-01-09T06:16:53.765430+00:00 heroku[router]: at=info method=GET path=/api/users/100005936523817/get_friends_progress host=services.pocketplaylab.com fwd=\"5.13.87.91\" dyno=web.11 connect=1ms service=47ms status=200 bytes=7498\n2014-01-09T06:16:53.760472+00:00 heroku[router]: at=info method=POST path=/api/users/1770684197 host=services.pocketplaylab.com fwd=\"74.139.217.81\" dyno=web.5 connect=1ms service=17ms status=200 bytes=681\n2014-01-09T06:15:15.893505+00:00 heroku[router]: at=info method=GET path=/api/users/1686318645/get_friends_progress host=services.pocketplaylab.com fwd=\"1.125.42.139\" dyno=web.3 connect=8ms service=90ms status=200 bytes=7534\n2014-01-09T06:16:53.768188+00:00 heroku[router]: at=info method=GET path=/api/users/100005936523817/get_friends_score host=services.pocketplaylab.com fwd=\"5.13.87.91\" dyno=web.13 connect=2ms service=46ms status=200 bytes=9355\n2014-01-09T06:15:17.858874+00:00 heroku[router]: at=info method=POST path=/api/users/1145906359 host=services.pocketplaylab.com fwd=\"107.220.72.53\" dyno=web.14 connect=2ms service=362ms status=200 bytes=52\n2014-01-09T06:16:53.797975+00:00 heroku[router]: at=info method=GET path=/api/users/100000622081059/count_pending_messages host=services.pocketplaylab.com fwd=\"174.239.6.42\" dyno=web.12 connect=1ms service=20ms status=200 bytes=33\n2014-01-09T06:16:53.796869+00:00 heroku[router]: at=info method=GET path=/api/users/100004683190675/get_friends_score host=services.pocketplaylab.com fwd=\"99.138.1.64\" dyno=web.12 connect=2ms service=55ms status=200 bytes=16881\n</code></pre>\n\n<ul>\n<li>I need to get from the file:\n\n<ul>\n<li>URLS(example: /api/users/1686318645/get_friends_progress, /api/users/1145906359 );</li>\n<li>connect time + service time(example: connect=2ms service=55ms);</li>\n<li>dyno(example: dyno=web.12, dyno=web.14).</li>\n</ul></li>\n</ul>\n\n<p>My code(Updating):</p>\n\n<pre><code>     #!/usr/bin/env ruby\nrequire 'csv'\n\nsample_logs = File.readlines \"/home/railsroger/Playlab_test/sample.log\"\n\nfile_name = ARGV.last\nresult_parse = []\nCSV.open(file_name, \"wb\") do |csv_line|\n  csv_line &lt;&lt; ['URL', 'Dyno', 'Connect', 'Service']\n  sample_logs.each_with_index do |sample_log, idx|\n    path    = sample_log.scan(/path=([^\\s]+)/).first.first\n    dyno    = sample_log.scan(/dyno=([^\\s]+)/).first.first\n    connect = sample_log.scan(/connect=([^\\s]+)/).first.first\n    service = sample_log.scan(/service=([^\\s]+)/).first.first\n\n\n    result_parse = [path, dyno, connect, service]\n\n    csv_line &lt;&lt; result_parse    \n\n  end\n\nend\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1525165820, "post_id": 50113787, "comment_id": 87244815, "body": "@mudasobwa  perfect is the enemy to done. If I do not know something, I ask."}, {"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1525166399, "post_id": 50113787, "comment_id": 87245047, "body": "@mudasobwa it is not bad, it&#39;s answers on questions that rises for newcomer in Ruby, while I remember all there difficulties I met. Now I remember all my path, and queue of questions I had when I came from PHP/JS."}, {"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1525166669, "post_id": 50113787, "comment_id": 87245141, "body": "@mudasobwa  to avoid potential harm of misconception in these questions (aprox 20) let me send them to you for checking, when I finish. The more articles exists, the more people use Ruby. And I like this language a lot."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 3, "creation_date": 1525173132, "post_id": 50113787, "comment_id": 87247983, "body": "This is an interesting question. I do not see the problem in not knowing something, then researching it to understand it before submitting it onto a course syllabus. Good for you and best of luck."}, {"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1525173715, "post_id": 50113787, "comment_id": 87248291, "body": "@SagarPandya thank you for a kind words."}, {"owner": {"reputation": 38790, "user_id": 665240, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32fc08ee80cf129f6b1e8593eccb9a03?s=128&d=identicon&r=PG", "display_name": "Carl Zulauf", "link": "https://stackoverflow.com/users/665240/carl-zulauf"}, "edited": false, "score": 1, "creation_date": 1525175119, "post_id": 50113787, "comment_id": 87248909, "body": "The answers to the &#39;duplicate&#39; question don&#39;t answer one of your main questions: Why does ruby behave this way? I voted to re-open this question, but for now a quick summary: All methods are defined on an object in ruby. If you are not explicitly enclosing your method def in a class, then the object is <code>main</code>, an instance of <code>Class</code>. Methods dynamically defined within other methods are attached to whatever object scope you are in when the containing method is executed. Everything is an object in ruby, and methods are ways for those objects to receive messages. They can&#39;t stand alone."}, {"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "reply_to_user": {"reputation": 38790, "user_id": 665240, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32fc08ee80cf129f6b1e8593eccb9a03?s=128&d=identicon&r=PG", "display_name": "Carl Zulauf", "link": "https://stackoverflow.com/users/665240/carl-zulauf"}, "edited": false, "score": 0, "creation_date": 1525175698, "post_id": 50113787, "comment_id": 87249165, "body": "@CarlZulauf thank you for the clear and comprehensive explanation."}], "owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1525165219, "answer_count": 0, "score": 0, "last_activity_date": 1525167337, "creation_date": 1525165076, "last_edit_date": 1525167337, "question_id": 50113787, "link": "https://stackoverflow.com/questions/50113787/define-one-method-in-the-other-method-ruby", "closed_reason": "Duplicate", "title": "Define one method in the other method. Ruby", "body": "<p>Good day.</p>\n\n<p>Now I'm creating questions for Ruby <strong>education course</strong>. I divide them in 3 stages \"simple\",\"normal\", \"advanced\". I know if define one method within another in Ruby it will acts as like as I defined 2 method. But I do not know how to explain this behavior. </p>\n\n<pre><code>def one\n    p \"one\"\n    def two\n        p \"two\"\n    end\nend\n\none # \"one\"\ntwo # \"two\"\n</code></pre>\n\n<p>Please help me with explanation what's going on?\nI going to put this question in \"advanced\" part.</p>\n\n<p>Thank you.</p>\n\n<p>UPD: <strong>educations course</strong> - list of questions with variants of answers I had during my way in Ruby. I'm relatively new in Ruby, and I preserve list of questions I been confused, and list of questions I been surprised. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 655, "user_id": 2267838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5a108bc5392c7a355b756eaa0869465?s=128&d=identicon&r=PG", "display_name": "UsamaMan", "link": "https://stackoverflow.com/users/2267838/usamaman"}, "edited": false, "score": 0, "creation_date": 1525164931, "post_id": 50113703, "comment_id": 87244471, "body": "Run \u2018gem install rake\u2019 and let me know if it installs. If not, uninstall it first with the command \u2018gem uninstall rake\u2019."}, {"owner": {"reputation": 41, "user_id": 9695480, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UiR885w84d8/AAAAAAAAAAI/AAAAAAAAAFM/F000M4_eID4/photo.jpg?sz=128", "display_name": "Gulnaz Kassymova", "link": "https://stackoverflow.com/users/9695480/gulnaz-kassymova"}, "reply_to_user": {"reputation": 655, "user_id": 2267838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5a108bc5392c7a355b756eaa0869465?s=128&d=identicon&r=PG", "display_name": "UsamaMan", "link": "https://stackoverflow.com/users/2267838/usamaman"}, "edited": false, "score": 0, "creation_date": 1525166289, "post_id": 50113703, "comment_id": 87245010, "body": "@usamaman Yes, I&#39;ve already tried \u2018gem install rake\u2019 and it installs, but nothing is changing."}, {"owner": {"reputation": 655, "user_id": 2267838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5a108bc5392c7a355b756eaa0869465?s=128&d=identicon&r=PG", "display_name": "UsamaMan", "link": "https://stackoverflow.com/users/2267838/usamaman"}, "edited": false, "score": 0, "creation_date": 1525176364, "post_id": 50113703, "comment_id": 87249468, "body": "Try this: gem install rake \u2014version=12.3.1"}], "answers": [{"tags": [], "owner": {"reputation": 1761, "user_id": 3741320, "user_type": "registered", "profile_image": "https://graph.facebook.com/10222536/picture?type=large", "display_name": "James Milani", "link": "https://stackoverflow.com/users/3741320/james-milani"}, "is_accepted": false, "score": 0, "last_activity_date": 1525183688, "creation_date": 1525183688, "answer_id": 50118002, "question_id": 50113703, "link": "https://stackoverflow.com/questions/50113703/rails-cant-find-rake-gem-for-docker-app/50118002#50118002", "title": "Rails can&#39;t find rake gem for docker app", "body": "<p>I believe that you need to update your <code>rbenv-bundler</code> from homebrew.</p>\n\n<p>Try:</p>\n\n<pre><code>brew upgrade rbenv-bundler\n</code></pre>\n\n<p>Then, try installing the gem.</p>\n\n<pre><code>gem install rake -v 12.3.1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1198, "user_id": 1296209, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/dbc5bd9dcaa6aa58aea8ab62ce510b4c?s=128&d=identicon&r=PG", "display_name": "webaholik", "link": "https://stackoverflow.com/users/1296209/webaholik"}, "is_accepted": false, "score": 5, "last_activity_date": 1529627397, "creation_date": 1529627397, "answer_id": 50979117, "question_id": 50113703, "link": "https://stackoverflow.com/questions/50113703/rails-cant-find-rake-gem-for-docker-app/50979117#50979117", "title": "Rails can&#39;t find rake gem for docker app", "body": "<p>Had a similar situation, this worked for me:</p>\n\n<pre><code>bundle install --binstubs\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 9695480, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UiR885w84d8/AAAAAAAAAAI/AAAAAAAAAFM/F000M4_eID4/photo.jpg?sz=128", "display_name": "Gulnaz Kassymova", "link": "https://stackoverflow.com/users/9695480/gulnaz-kassymova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1957, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1529627397, "creation_date": 1525164659, "question_id": 50113703, "link": "https://stackoverflow.com/questions/50113703/rails-cant-find-rake-gem-for-docker-app", "title": "Rails can&#39;t find rake gem for docker app", "body": "<p>I have a Rails application running in docker. I have two images which are connected. I can't run server of one of them and it works fine, but I cannot run another one and none of simple commands doesn't work too. It fails telling me Could not find rake-12.3.1 in any of the sources.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/49598686/rails-cant-find-rake-gem\">There is already existing solution</a></p>\n\n<p>None of the solutions from link above doesn't work.</p>\n\n<h2>Error looks  like this</h2>\n\n<pre><code>bundler: failed to load command: puma (/usr/local/bundle/bin/puma)\nBundler::GemNotFound: Could not find rake-12.3.1 in any of the sources\n</code></pre>\n\n<h2>Here is my Gemfile:</h2>\n\n<pre><code>source 'https://rubygems.org'\ngem 'rails', '~&gt; 4.2'\ngem 'rails-i18n'\ngem 'responders', '~&gt; 2.0'\ngem 'puma'  \ngem 'mysql2', '~&gt; 0.3.21'\ngem 'redis-rails'\n\ngem 'json'\ngem 'jbuilder'\n\ngem 'omniauth',               '~&gt; 1.8.1'\ngem 'omniauth-auth0',         '~&gt; 2.0.0'  \ngem 'omniauth-google-oauth2', '~&gt; 0.5.2'\ngem 'omniauth-barong',        '~&gt; 0.1.2'\n\ngem 'figaro'\ngem 'hashie', '~&gt; 3.0'\n\ngem 'aasm', '~&gt; 4.12'\ngem 'bunny', '~&gt; 2.9.0'\ngem 'cancancan'\ngem 'enumerize'\ngem 'datagrid'\ngem 'kaminari'\ngem 'paranoid2'\ngem 'active_hash'\ngem 'http_accept_language'\ngem 'paper_trail', '~&gt; 3.0.1'\ngem 'rails-observers'\ngem 'country_select', '~&gt; 2.1.0'\n\ngem 'gon', '~&gt; 5.2.0'\ngem 'pusher'\ngem 'eventmachine', '~&gt; 1.0.4'\ngem 'em-websocket', '~&gt; 0.5.1'\n\ngem 'simple_form', '~&gt; 3.1.0'\ngem 'slim-rails'\ngem 'sass-rails'\ngem 'coffee-rails'\ngem 'uglifier', '~&gt; 4.1'\ngem 'jquery-rails'\ngem 'angularjs-rails', '~&gt; 1.3.15'\ngem 'bootstrap-sass', '~&gt; 3.2.0.2'\ngem 'font-awesome-sass'\ngem 'bourbon'\ngem 'momentjs-rails'\ngem 'eco'\ngem 'browser', '~&gt; 0.8.0' \ngem 'rbtree'\ngem 'liability-proof', '0.0.9'\ngem 'grape', '~&gt; 1.0.1' \ngem 'grape-entity', '~&gt; 0.5.2'\ngem 'grape-swagger', '~&gt; 0.27.3'\ngem 'grape-swagger-ui', '~&gt; 2.2.8'\ngem 'rack-attack', '~&gt; 4.3.1'\ngem 'easy_table'\ngem 'faraday', '~&gt; 0.12'\ngem 'jwt', '~&gt; 1.5'\ngem 'email_validator', '~&gt; 1.6'\ngem 'clipboard-rails', '~&gt; 1.7'\ngem 'god', '~&gt; 0.13.7', require: false\ngem 'mini_racer', '~&gt; 0.1', require: false\ngem 'arel-is-blank', '~&gt; 1.0' \ngem 'sentry-raven', '~&gt; 2.7', require: false\ngem 'memoist', '~&gt; 0.16'\ngem 'method-not-implemented', '~&gt; 1.0'\ngem 'passgen', '~&gt; 1.0'\ngem 'validates_lengths_from_database', '~&gt; 0.7.0'\n\ngroup :development, :test do\n gem 'factory_bot_rails'\n gem 'faker', '~&gt; 1.4.3'\n gem 'binding_of_caller'\n gem 'quiet_assets'\n gem 'timecop'\n gem 'rspec-rails', '~&gt; 3.7'\n gem 'pry-byebug'\nend\n\ngroup :development do\n  gem 'annotate', '~&gt; 2.7'\nend\n\ngroup :test do\n  gem 'database_cleaner'\n  gem 'mocha', require: false\n\n gem 'capybara',            '~&gt; 2.17'\n gem 'selenium-webdriver',  '~&gt; 3.8'\n gem 'chromedriver-helper', '~&gt; 1.1'\n gem 'rack_session_access', '~&gt; 0.1'\n gem 'webmock',             '~&gt; 3.3'\nend\n</code></pre>\n\n<h2>Here is Dockerfile</h2>\n\n<pre><code>FROM ruby:2.5.0\nMAINTAINER lbellet@heliostech.fr\n\nARG RAILS_ENV=production\nENV RAILS_ENV ${RAILS_ENV}\n\nENV APP_HOME=/home/app\n\nRUN groupadd -r app --gid=1000\nRUN useradd -r -m -g app -d /home/app --uid=1000 app\n\nRUN curl -sL https://deb.nodesource.com/setup_8.x | bash - \\\n &amp;&amp; curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - \\\n &amp;&amp; echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/source$\n &amp;&amp; apt-get update \\\n &amp;&amp; apt-get install -y \\\n      default-libmysqlclient-dev \\\n      imagemagick \\\n      gsfonts \\\n      chromedriver \\\n      nodejs \\\n      yarn\n\nWORKDIR $APP_HOME\n\nCOPY Gemfile Gemfile.lock $APP_HOME/\n\n# Install dependencies\nRUN mkdir -p /opt/vendor/bundle &amp;&amp; chown -R app:app /opt/vendor\nRUN su app -s /bin/bash -c \"bundle install --path /opt/vendor/bundle\"\n\n# Copy the main application.\nCOPY . $APP_HOME\n\nRUN chown -R app:app /home/app\nUSER app\n\nRUN ./bin/init_config \\\n  &amp;&amp; chmod +x ./bin/logger \\\n  &amp;&amp; bundle exec rake tmp:create yarn:install assets:precompile\n\n# Expose port 8080 to the Docker host, so we can access it\n# from the outside.\nEXPOSE 8080\nENTRYPOINT [\"bundle\", \"exec\"]\n\n# The main command to run when the container starts. Also\n# tell the Rails dev server to bind to all interfaces by\n# default.\nCMD [\"puma\", \"--config\", \"config/puma.rb\"]\n</code></pre>\n\n<p>I tried to reinstall docker, change ruby version, delete Gemfile.lock, but nothing seems to work. How can I resolve that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "data-structures"], "comments": [{"owner": {"reputation": 58628, "user_id": 227267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b03410a67ad6b9cf3fce7b0bf45084c8?s=128&d=identicon&r=PG", "display_name": "Matti Virkkunen", "link": "https://stackoverflow.com/users/227267/matti-virkkunen"}, "edited": false, "score": 7, "creation_date": 1525163881, "post_id": 50113530, "comment_id": 87244116, "body": "What have you tried<a href=\"https://stackoverflow.com/questions/50113530/print-characters-number-of-times-as-given-in-string\">?</a>"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 4, "creation_date": 1525169543, "post_id": 50113530, "comment_id": 87246401, "body": "How can this question get upvoted?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1525191081, "post_id": 50113530, "comment_id": 87257214, "body": "What is the code you are having trouble with? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ? Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1525191092, "post_id": 50113530, "comment_id": 87257222, "body": "Can you provide a <i>precise</i> specification of what it is that you want to happen, including any and all rules, exceptions from those rules, corner cases, special cases, boundary cases, and edge cases? Can you provide sample inputs and outputs demonstrating what you expect to happen, both in normal cases, and in all the exceptions, corner cases, special cases, boundary cases, and edge cases? Please, also make sure to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1525191127, "post_id": 50113530, "comment_id": 87257242, "body": "&quot;How can this be achieved in ruby?&quot; \u2013 You can achieve it by writing a program which does that. If you have a problem with your program, carefully read the documentation of all the methods, classes, modules, and libraries you are using, write tests for your programs, trace the execution with pen and paper, single-step it in a debugger, then sleep on it, start again from the beginning, sleep on it again, and <i>then and only then</i> narrow your problem down to a concise, focused, simple, short, reproducible <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and ask a specific, focused, narrow question on <a href=\"https://stackoverflow.com\">Stack Overflow</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2111, "user_id": 1846982, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9979071c5c3697ae9e8b8f50062a1782?s=128&d=identicon&r=PG&f=1", "display_name": "Bloomberg", "link": "https://stackoverflow.com/users/1846982/bloomberg"}, "edited": false, "score": 0, "creation_date": 1525165019, "post_id": 50113662, "comment_id": 87244503, "body": "This is so great, How can I get the array [[&quot;A&quot;, &quot;3&quot;], [&quot;B&quot;, &quot;2&quot;], [&quot;C&quot;, &quot;3&quot;], [&quot;D&quot;, &quot;4&quot;]] without using scan?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2111, "user_id": 1846982, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9979071c5c3697ae9e8b8f50062a1782?s=128&d=identicon&r=PG&f=1", "display_name": "Bloomberg", "link": "https://stackoverflow.com/users/1846982/bloomberg"}, "edited": false, "score": 1, "creation_date": 1525165146, "post_id": 50113662, "comment_id": 87244554, "body": "@Prem by iterating through the string chars and collecting results."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1525164452, "creation_date": 1525164452, "answer_id": 50113662, "question_id": 50113530, "link": "https://stackoverflow.com/questions/50113530/print-characters-number-of-times-as-given-in-string/50113662#50113662", "title": "Print characters number of times as given in string", "body": "<pre><code>\"A3B2C3D4\".scan(/(\\D+)(\\d+)/).map { |c, i| c * i.to_i }.join\n#\u21d2 \"AAABBCCCDDDD\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1525172443, "post_id": 50113824, "comment_id": 87247677, "body": "<code>to_a.each</code> is superfluous here. Moreover avoid using an external array that you use to fill with each iteration, that&#39;s what <code>map</code> is for. Your answer can also be refactored to <code>(&quot;A3B2C3D4&quot;.scan &#47;\\w&#47;).each_slice(2).map { |a, b| a * b.to_i }.join</code>. By which point it gets dangerously close to another answer already posted."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1525172817, "post_id": 50113824, "comment_id": 87247846, "body": "Also there&#39;s no need for the <code>;</code>!"}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1525189699, "post_id": 50113824, "comment_id": 87256446, "body": "True. That&#39;s why I wrote this was a bit verbose. And I forgot to remove the semicolon, I had it all in one-line earlier ;)"}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1525190376, "post_id": 50113824, "comment_id": 87256815, "body": "And I chose <code>to_a</code> because it was easier to visualize what is happening than to say map invokes the given block for each element and returns in the same place. Took liberty in a public forum. No harm in brevity though. Cheers!"}], "tags": [], "owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "is_accepted": false, "score": 0, "last_activity_date": 1525165285, "creation_date": 1525165285, "answer_id": 50113824, "question_id": 50113530, "link": "https://stackoverflow.com/questions/50113530/print-characters-number-of-times-as-given-in-string/50113824#50113824", "title": "Print characters number of times as given in string", "body": "<pre><code>t =[]; \n# scan for each letter and split, then combine the array by each two elements. Get the desired output\n(\"A3B2C3D4\".scan /\\w/).each_slice(2).to_a.each {|g| t&lt;&lt; [g.first * g.last.to_i]}\nt.flatten.join\n=&gt; \"AAABBCCCDDDD\"\n</code></pre>\n\n<p>A bit verbose.</p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1525193054, "post_id": 50115198, "comment_id": 87258252, "body": "<code>str.tap { |str| while str[&#47;(\\D)(\\d+)&#47;] do str[&#47;(\\D)(\\d+)&#47;] = $1 * $2.to_i end }</code> :)"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 2, "last_activity_date": 1525171740, "creation_date": 1525171740, "answer_id": 50115198, "question_id": 50113530, "link": "https://stackoverflow.com/questions/50113530/print-characters-number-of-times-as-given-in-string/50115198#50115198", "title": "Print characters number of times as given in string", "body": "<pre><code>str = \"A3B2C3D4\"\nstr.gsub(/([A-Z])(\\d)/) { $1 * $2.to_i } #=&gt; \"AAABBCCCDDDD\"\n</code></pre>\n"}], "owner": {"reputation": 2111, "user_id": 1846982, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9979071c5c3697ae9e8b8f50062a1782?s=128&d=identicon&r=PG&f=1", "display_name": "Bloomberg", "link": "https://stackoverflow.com/users/1846982/bloomberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 50113662, "answer_count": 3, "score": -1, "last_activity_date": 1525218400, "creation_date": 1525163816, "question_id": 50113530, "link": "https://stackoverflow.com/questions/50113530/print-characters-number-of-times-as-given-in-string", "title": "Print characters number of times as given in string", "body": "<p>I have string <code>\"A3B2C3D4\"</code>  it should be printed in output like following</p>\n\n<pre><code>AAABBCCCDDDD\n</code></pre>\n\n<p>How can this be achieved in ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-3", "activerecord"], "comments": [{"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 0, "creation_date": 1525178987, "post_id": 50113361, "comment_id": 87250727, "body": "Why do you think you really need to do anything with it? You should keep in mind, that it&#39;s not a bug in your code. It&#39;s a bug in the world itself. Looking from conceptual point of view these transaction really took place in both weeks :( If you are still absolutely sure, that we need to do smth with it, then I will follow up with some solution"}, {"owner": {"reputation": 2914, "user_id": 777880, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/gDijM.jpg?s=128&g=1", "display_name": "Ziyan Junaideen", "link": "https://stackoverflow.com/users/777880/ziyan-junaideen"}, "reply_to_user": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 0, "creation_date": 1525185808, "post_id": 50113361, "comment_id": 87254344, "body": "@AntonTkachov I didn&#39;t know this was a thing until guys from accounts raised a flag that weekly reports had inconsistencies with generated reports. The weekly reports summed up were off with the monthly reports."}, {"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 0, "creation_date": 1525208533, "post_id": 50113361, "comment_id": 87265712, "body": "I think it makes sense to discuss them how they handle such discrepancies on their side. Describe them an issue and get some feedback about their vision of possible solution. Because your code works fine and absolutely logical. In the meanwhile I will think about some hack, how to handle this :)"}, {"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 0, "creation_date": 1525211674, "post_id": 50113361, "comment_id": 87266864, "body": "Wrote a solution. I hope you will keep me posted"}, {"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 0, "creation_date": 1525368721, "post_id": 50113361, "comment_id": 87339525, "body": "Does my answer helped you?"}], "answers": [{"comments": [{"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 0, "creation_date": 1526558582, "post_id": 50124372, "comment_id": 87797436, "body": "@Ziyan Junaideen Have this helped you?"}], "tags": [], "owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "is_accepted": false, "score": 0, "last_activity_date": 1525211575, "creation_date": 1525211575, "answer_id": 50124372, "question_id": 50113361, "link": "https://stackoverflow.com/questions/50113361/rails-ar-date-range-query-daylight-saving-overlap/50124372#50124372", "title": "Rails AR Date Range Query - Daylight Saving - Overlap", "body": "<p>Try this solution. I think it should solve your issue:</p>\n\n<pre><code>scope :filter_date, lambda { |starts, ends, date, transaction_type = :transaction|\n  _scope = scoped\n\n  if starts.class == String and starts.present?\n    starts = Time.zone.parse(starts)\n    starts += 1.hour if starts.dst?\n    starts = starts.to_datetime\n  end\n\n  if ends.class == String and ends.present?      \n    ends = Time.zone.parse(ends) + 1.day\n    ends += 1.hour if ends.dst?\n    ends = ends.to_datetime\n  end\n\n  begin\n    case date\n    when 'settled'\n      transaction_type == \"batch\" ? date_field = 'deposited_at' : date_field = 'settled_at'\n      _scope = _scope.order('transactions.'+date_field+' DESC')\n      _scope = _scope.where(\"transactions.\"+date_field+\" &gt;= ?\", starts) if starts.present?\n      _scope = _scope.where(\"transactions.\"+date_field+\" &lt; ?\", ends)   if ends.present?\n    else # created, nil, other\n      _scope = _scope.order('transactions.created_at DESC')\n      _scope = _scope.where(\"transactions.created_at &gt;= ?\", starts) if starts.present?\n      _scope = _scope.where(\"transactions.created_at &lt; ?\", ends)   if ends.present?\n    end\n  end\n  _scope\n}\n</code></pre>\n"}], "owner": {"reputation": 2914, "user_id": 777880, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/gDijM.jpg?s=128&g=1", "display_name": "Ziyan Junaideen", "link": "https://stackoverflow.com/users/777880/ziyan-junaideen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1525211575, "creation_date": 1525162823, "question_id": 50113361, "link": "https://stackoverflow.com/questions/50113361/rails-ar-date-range-query-daylight-saving-overlap", "title": "Rails AR Date Range Query - Daylight Saving - Overlap", "body": "<p>I have a Rails 3 application, how would one avoid an overlap happening due to daylight saving?</p>\n\n<p>My problem is that I am having a form that generate reports. Auditing an inconsistency I noticed that a bunch of transactions show up in the week ending in March 11th also show up in the Week starting on March 12th.</p>\n\n<p>The problem boils down to some thing like this...</p>\n\n<pre><code>Time.zone.parse('2018-03-11').to_datetime.end_of_day.utc\n =&gt; Mon, 12 Mar 2018 07:59:59 +0000 \nTime.zone.parse('2018-03-12').to_datetime.beginning_of_day.utc\n =&gt; Mon, 12 Mar 2018 07:00:00 +0000 \n</code></pre>\n\n<p>The 1 hour overlap above seem to be where my problem lies. When checking date ranges (see actual code below) how can I avoid this overlap.</p>\n\n<h3>Actual Code</h3>\n\n<p>Here is the actual code that resemble filtering by date.</p>\n\n<pre><code>  scope :filter_date, lambda { |starts, ends, date, transaction_type = :transaction|\n    _scope = scoped\n\n\n    starts = Time.zone.parse(starts).to_datetime        if starts.class == String and starts.present?\n    ends   = Time.zone.parse(ends).to_datetime.tomorrow if ends.class   == String and ends.present?\n\n    begin\n      case date\n      when 'settled'\n        transaction_type == \"batch\" ? date_field = 'deposited_at' : date_field = 'settled_at'\n        _scope = _scope.order('transactions.'+date_field+' DESC')\n        _scope = _scope.where(\"transactions.\"+date_field+\" &gt;= ?\", starts) if starts.present?\n        _scope = _scope.where(\"transactions.\"+date_field+\" &lt; ?\", ends)   if ends.present?\n      else # created, nil, other\n        _scope = _scope.order('transactions.created_at DESC')\n        _scope = _scope.where(\"transactions.created_at &gt;= ?\", starts) if starts.present?\n        _scope = _scope.where(\"transactions.created_at &lt; ?\", ends)   if ends.present?\n      end\n    end\n    _scope\n  }\n</code></pre>\n\n<h3>Stack</h3>\n\n<ul>\n<li>Ruby 2.1</li>\n<li>Rails 3.2</li>\n<li>PG</li>\n</ul>\n\n<h3>Question</h3>\n\n<p>How can I overcome this overlap of time where the daylight saving takes effect.</p>\n"}, {"tags": ["ruby", "formatting", "docx", "plaintext"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9724583, "user_type": "registered", "profile_image": "https://graph.facebook.com/470946310005803/picture?type=large", "display_name": "Andres P&#233;rez", "link": "https://stackoverflow.com/users/9724583/andres-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1525164758, "post_id": 50113584, "comment_id": 87244412, "body": "Wow, thank you, I checked it out and it seems very useful. However, for what I read, it doesn&#39;t solve the issue of footnotes (which I have to use a lot), it would be the only thing missing."}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "reply_to_user": {"reputation": 49, "user_id": 9724583, "user_type": "registered", "profile_image": "https://graph.facebook.com/470946310005803/picture?type=large", "display_name": "Andres P&#233;rez", "link": "https://stackoverflow.com/users/9724583/andres-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1525166571, "post_id": 50113584, "comment_id": 87245104, "body": "There is also <a href=\"https://github.com/senny/sablon\" rel=\"nofollow noreferrer\">sablon</a>. There test fixtures have footer and header in docx. You would have to play with it though."}, {"owner": {"reputation": 49, "user_id": 9724583, "user_type": "registered", "profile_image": "https://graph.facebook.com/470946310005803/picture?type=large", "display_name": "Andres P&#233;rez", "link": "https://stackoverflow.com/users/9724583/andres-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1525167628, "post_id": 50113584, "comment_id": 87245550, "body": "Thanks! I couldn&#39;t find the footnote function in sablon (sorry, I&#39;m really an annoying newbie), but I found another gem called openxml-docx that says it supports footnotes, I&#39;ll play with it for a while. Thanks for your help!"}], "tags": [], "owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "is_accepted": true, "score": 2, "last_activity_date": 1525164111, "creation_date": 1525164111, "answer_id": 50113584, "question_id": 50113336, "link": "https://stackoverflow.com/questions/50113336/ruby-plain-text-to-docx-with-specific-formatting/50113584#50113584", "title": "RUBY plain text to Docx with specific formatting", "body": "<p>Ahh Ruby got gems for that ;)<br>\n<a href=\"https://github.com/trade-informatics/caracal\" rel=\"nofollow noreferrer\">https://github.com/trade-informatics/caracal</a></p>\n\n<p>This would help you to write docs from Ruby code itself.</p>\n\n<p>From the Readme</p>\n\n<pre><code>docx.p 'this text should be bold' do\n  style          'custom_style'    # sets the paragraph style. generally used at the exclusion of other attributes.\n  align          :left             # sets the alignment. accepts :left, :center, :right, and :both.\n  color          '333333'          # sets the font color.\n  size           32                # sets the font size. units in 1/2 points.\n  bold           true              # sets whether or not to render the text with a bold weight.\n  italic         false             # sets whether or not render the text in italic style.\n  underline      false             # sets whether or not to underline the text.\n  bgcolor        'cccccc'          # sets the background color.\n  vertical_align 'superscript'     # sets the vertical alignment.\nend\n</code></pre>\n\n<hr>\n\n<p>There is also this gem, <a href=\"https://github.com/nickfrandsen/htmltoword\" rel=\"nofollow noreferrer\">https://github.com/nickfrandsen/htmltoword</a>, which converts plain html to doc files. I haven't tried it though.</p>\n"}], "owner": {"reputation": 49, "user_id": 9724583, "user_type": "registered", "profile_image": "https://graph.facebook.com/470946310005803/picture?type=large", "display_name": "Andres P&#233;rez", "link": "https://stackoverflow.com/users/9724583/andres-p%c3%a9rez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 923, "favorite_count": 1, "accepted_answer_id": 50113584, "answer_count": 1, "score": 2, "last_activity_date": 1525207309, "creation_date": 1525162685, "last_edit_date": 1525207309, "question_id": 50113336, "link": "https://stackoverflow.com/questions/50113336/ruby-plain-text-to-docx-with-specific-formatting", "title": "RUBY plain text to Docx with specific formatting", "body": "<p>I regularly have to produce word documents that are pretty standard. The content changes regarding certain parameters, but it's always a mix of pre-written stuff. So I decided to write some ruby code to do this more easily and it works pretty well on creating the txt file with the final text I need.</p>\n\n<p>The problem is that I need this text converted to <code>.docx</code> and with specific formatting. So, I'm trying to find a way to indicate in the text file which text should be bold, italic, have different indentation, or be a footnote, to make it easy to interpret (like html does). For example:</p>\n\n<p><code>&lt;b&gt;</code>this text should be bold<code>&lt;/b&gt;</code><br>\n<code>\\t</code> indentation works with the tabs<br>\n<code>&lt;i&gt;</code>hopefully this could be italic<code>&lt;/i&gt;</code><br>\n<code>&lt;f&gt;</code>and I wish this could be a footnote of the previous phrase<code>&lt;/f&gt;</code></p>\n\n<p>However, I haven't been able to do this. </p>\n\n<p>Does anybody know how this can be achieved? I've read about macros and pandoc, but haven't had any luck achieving this. Seems too complicated for macros. Maybe what I'm trying is not the best way. Perhaps with LaTeX or creating html and then converting to word? Can html create footnotes? (that seems to be the most complicated)</p>\n\n<p>I have no idea, I just learned Ruby with a video tutorial, so my knowledge is very limited.</p>\n\n<p>Thanks everybody!</p>\n\n<p>EDIT: Arjun's answer solved almost the whole issue, but the gem he pointed out doesn't include a funcionality for footnotes, which unfortunately constitute a big part of my documents. So if anybody knows a gem that does, would be greatly appreciated. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 1, "creation_date": 1525162915, "post_id": 50113304, "comment_id": 87243811, "body": "do you have <code>up</code> and <code>down</code> method in your migration ?"}], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 1, "last_activity_date": 1525170779, "creation_date": 1525170779, "answer_id": 50114986, "question_id": 50113304, "link": "https://stackoverflow.com/questions/50113304/rails-migration-not-doing-anything/50114986#50114986", "title": "Rails migration not doing anything?", "body": "<p>Where did you get the version number from?  Did you create the migration file using <code>rails g migration</code> ?</p>\n\n<p>If so, it would have created the migration file with a version number prefixing the model name, so (for example)</p>\n\n<pre><code>rails g migration AddTokenToRegionTriggers \n</code></pre>\n\n<p>Would generate</p>\n\n<pre><code>20180501113025_add_token_to_region_triggers.rb\n</code></pre>\n\n<p>That initial numeric string is the version number.  To migrate up to that version, you can do</p>\n\n<pre><code>rake db:migrate:up VERSION=2018051113025\n</code></pre>\n\n<p>If you have no later migrations, you could just do...</p>\n\n<pre><code>rake db:migrate\n</code></pre>\n"}], "owner": {"reputation": 18601, "user_id": 599184, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tjsXC.jpg?s=128&g=1", "display_name": "Leo Jiang", "link": "https://stackoverflow.com/users/599184/leo-jiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 50114986, "answer_count": 1, "score": 1, "last_activity_date": 1525170779, "creation_date": 1525162444, "question_id": 50113304, "link": "https://stackoverflow.com/questions/50113304/rails-migration-not-doing-anything", "title": "Rails migration not doing anything?", "body": "<p>I created the following migration:</p>\n\n<pre><code>class AddTokenToRegionTriggers &lt; ActiveRecord::Migration[5.0]\n  def change\n    add_column :region_triggers, :token, :string\n    add_index :region_triggers, :token, unique: true\n  end\nend\n</code></pre>\n\n<p>There's a table called <code>region_triggers</code>. I tried running <code>rake db:migrate:up VERSION=123</code>, but it didn't do anything. The output is:</p>\n\n<pre><code>Enabling Bootsnap\nModel files unchanged.\n</code></pre>\n\n<p>When I ran <code>rake db:migrate:redo VERSION=123</code>, it said <code>No indexes found on region_triggers with the options provided.</code>.</p>\n\n<p>How do I make rails add the column and the index?</p>\n"}, {"tags": ["ruby", "loops", "terminate"], "answers": [{"tags": [], "owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "is_accepted": false, "score": 0, "last_activity_date": 1525167379, "last_edit_date": 1525167379, "creation_date": 1525165541, "answer_id": 50113877, "question_id": 50113212, "link": "https://stackoverflow.com/questions/50113212/how-to-terminate-the-loop-if-user-press-any-key-in-ruby/50113877#50113877", "title": "How to terminate the loop if user press any key in Ruby?", "body": "<p>There are two problems here.</p>\n\n<ol>\n<li>The first is that <code>gets</code> demands that you hit enter when you're finished typing. You can fix this by using the <code>getch</code> method from the <code>io/console</code> module.</li>\n<li>The second is that your loop isn't inside your thread. <code>break</code> escapes from inside a loop, it doesn't kill all running loops.</li>\n</ol>\n\n<p>Here's a very simple demonstration of how this works:</p>\n\n<pre><code>require 'io/console'\n\ndef echo_keyboard_input\n    loop do\n      char = STDIN.getch\n      puts char\n      break if char == 'q'\n    end\nend\n\nt = Thread.new { echo_keyboard_input }    \nt.join\n</code></pre>\n\n<p>This program just echoes characters you type in back to you, one at a time, and exits when you type 'q'. (I based it on <a href=\"https://stackoverflow.com/questions/16518493/what-is-the-best-way-to-get-keyboard-events-input-without-press-enter-in-a-r\">this SO answer</a>.)</p>\n\n<p>However, this is a very advanced thing to be trying with so little experience; threads can be quite tricky to work with even for experienced programmers. if you really want to focus on something else, you might want to find a ruby gem that makes this easier.</p>\n"}], "owner": {"reputation": 19, "user_id": 6151300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-tHcDiut-lA0/AAAAAAAAAAI/AAAAAAAAAFQ/A-GismaRC68/photo.jpg?sz=128", "display_name": "GothLoli", "link": "https://stackoverflow.com/users/6151300/gothloli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 762, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525167379, "creation_date": 1525161912, "question_id": 50113212, "link": "https://stackoverflow.com/questions/50113212/how-to-terminate-the-loop-if-user-press-any-key-in-ruby", "title": "How to terminate the loop if user press any key in Ruby?", "body": "<p>As title says, I want to terminate loop if user press any key.\nAny key means if user simply press keyboard letter, 'A' and not press 'enter' after 'A', it should terminate the infinite loop. I did little research, and found out that using Thread is a key-point to solve this problem. However, since I just started learning Ruby a week ago, I just have no idea how to code tbh.</p>\n\n<pre><code>Thread.new do\n  while user_input = STDIN.gets\n    break if user_input.chomp == true # dont know what to write here\n  end\nend\n\nloop do\n  random = random_number(0,1)\n  puts random\n  total = random + total\n  count += 1\n  sleep 1\nend\n</code></pre>\n\n<p>This is code I have now, and of course its not working..\nI need help...(I am worrying that Thread has to be done with 'Enter'. Like it terminates loop when user press 'any key' and 'Enter'.. And that is not what I want)</p>\n"}, {"tags": ["ruby", "bash"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 1, "creation_date": 1525159657, "post_id": 50112793, "comment_id": 87242761, "body": "This might help: <a href=\"http://stackoverflow.com/q/6697753/3776858\">Difference between single and double quotes in bash</a>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1525159944, "post_id": 50112793, "comment_id": 87242872, "body": "Why do you expect the subshell to derive the environment of the parent shell in the first place? That\u2019s not how bash works. One might <code>V123=FOO ruby -e &#39;p `echo $V123`&#39;</code> to explicitly pass the env var to another shell script. <b>Sidenote:</b> that behaviour has nothing to do with ruby, it\u2019s shell subprocess default."}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1525166871, "creation_date": 1525166871, "answer_id": 50114150, "question_id": 50112793, "link": "https://stackoverflow.com/questions/50112793/why-are-shell-variables-invisible-in-my-ruby-script/50114150#50114150", "title": "Why are shell variables invisible in my Ruby script?", "body": "<p>This question does not <em>really</em> have anything to do with ruby; it's just about the behaviour of bash variables.</p>\n\n<blockquote>\n  <p>I found that when I declare a new variable in bash it is not visible by ruby script, until I make it environment by <code>export</code> command.</p>\n</blockquote>\n\n<p>Sub-shells do not inherit the environment of their parent shell. You can explicitly call a sub-shell with variables, or you can <code>export</code> them. (That's the <em>whole point</em> of the <code>export</code> function!)</p>\n\n<p>For example, consider the following - which, again, has got nothing to do with ruby.</p>\n\n<p>Suppose <code>test.txt</code> has the following lines:</p>\n\n<pre><code>line one\nline two\n</code></pre>\n\n<p>Observe the following outputs:</p>\n\n<ol>\n<li><p>When the variable is declared as a separate command, it is <strong>not</strong> passed to the sub-shell:</p>\n\n<pre><code>GREP_OPTIONS='-v'\ngrep one test.txt\n\n// Result:\nline one\n</code></pre></li>\n<li><p>When the variable is set as part of the same command, it <strong>is</strong> passed to the sub-shell:</p>\n\n<pre><code>GREP_OPTIONS='-v' grep one test.txt\n\n// Result:\nline two\n</code></pre></li>\n<li><p>When the variable is <strong>exported</strong>, it <strong>is</strong> passed to the sub-shell:</p>\n\n<pre><code>export GREP_OPTIONS='-v'\ngrep one test.txt\n\n// Result:\nline two\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 50114150, "answer_count": 1, "score": 0, "last_activity_date": 1525166871, "creation_date": 1525159414, "last_edit_date": 1525160085, "question_id": 50112793, "link": "https://stackoverflow.com/questions/50112793/why-are-shell-variables-invisible-in-my-ruby-script", "title": "Why are shell variables invisible in my Ruby script?", "body": "<p>Working with Ruby shell executions by a backquote or <code>%x</code> syntax I found that when I declare a new variable in bash it is not visible by ruby script, until I make it environment by <code>export</code> command. </p>\n\n<p>Please explain mechanism why do Shell Variables is not visible by a script?</p>\n\n<pre><code># Shell and Environment variables.\nV123='This is an variable. VAR HERE.'\necho $V123\n\n# Read shell variable via Ruby\nruby -e 'p `echo $V123`' # \"$V123\\n\"\nruby -e 'p %x[echo $V123]' # \"$V123\\n\"\n\n# Check SET for this var\nset | grep V123\nruby -e 'p `set | grep V123`' # \"\"\nruby -e 'p %x[set | grep V123]' # \"\"\n\n# Put this var itno the Environment\necho \"--- Export\"\nprintenv V123\nexport V123\nprintenv V123\necho \"--- Ruby printenv\"\nruby -e 'p `printenv V123`' # This is an variable. VAR HERE.\\n\"\nruby -e 'p %x[printenv V123]' # This is an variable. VAR HERE.\\n\" \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1525159795, "post_id": 50112741, "comment_id": 87242819, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/48999511/how-to-use-webpacker-for-react-on-an-existing-rails-5-0-2-application\">How to use Webpacker for React on an existing Rails 5.0.2 application?</a>"}, {"owner": {"reputation": 2208, "user_id": 4061422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZHGRC.png?s=128&g=1", "display_name": "vipin", "link": "https://stackoverflow.com/users/4061422/vipin"}, "reply_to_user": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1525159927, "post_id": 50112741, "comment_id": 87242868, "body": "i am using rails 4.2 ..."}, {"owner": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 1, "creation_date": 1525159969, "post_id": 50112741, "comment_id": 87242886, "body": "&quot;The apparent solution is to copy the config/webpacker.yml file manually&quot;"}, {"owner": {"reputation": 2208, "user_id": 4061422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZHGRC.png?s=128&g=1", "display_name": "vipin", "link": "https://stackoverflow.com/users/4061422/vipin"}, "reply_to_user": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1525160120, "post_id": 50112741, "comment_id": 87242929, "body": "i already manually added wepbacker.yml into configuration, after it show above error. then i copy webpacke folder into config  and webpacker and runner into bin fine after that i run rake webpacker:install:react.  it show error"}, {"owner": {"reputation": 2208, "user_id": 4061422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZHGRC.png?s=128&g=1", "display_name": "vipin", "link": "https://stackoverflow.com/users/4061422/vipin"}, "reply_to_user": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1525160124, "post_id": 50112741, "comment_id": 87242930, "body": "[Webpacker] Compilation failed: Invalid configuration object. Webpack has been initialised using a configuration object that does not match the API schema."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 11854049, "user_type": "registered", "profile_image": "https://graph.facebook.com/2284627921800218/picture?type=large", "display_name": "&#222;hilippe Colas", "link": "https://stackoverflow.com/users/11854049/%c3%9ehilippe-colas"}, "is_accepted": false, "score": 6, "last_activity_date": 1564439746, "creation_date": 1564439746, "answer_id": 57262163, "question_id": 50112741, "link": "https://stackoverflow.com/questions/50112741/react-rails-install-error-webpacker-configuration-file-not-found/57262163#57262163", "title": "React-rails install error Webpacker configuration file not found", "body": "<p>Take this file into the folder /Users/YourAPP/config <a href=\"https://github.com/rails/webpacker/blob/master/lib/install/config/webpacker.yml\" rel=\"noreferrer\">https://github.com/rails/webpacker/blob/master/lib/install/config/webpacker.yml</a></p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 11854049, "user_type": "registered", "profile_image": "https://graph.facebook.com/2284627921800218/picture?type=large", "display_name": "&#222;hilippe Colas", "link": "https://stackoverflow.com/users/11854049/%c3%9ehilippe-colas"}, "is_accepted": false, "score": 1, "last_activity_date": 1564445714, "creation_date": 1564445714, "answer_id": 57262744, "question_id": 50112741, "link": "https://stackoverflow.com/questions/50112741/react-rails-install-error-webpacker-configuration-file-not-found/57262744#57262744", "title": "React-rails install error Webpacker configuration file not found", "body": "<p>If you don't have the files, maybe you have not Yarn installed \n<a href=\"https://yarnpkg.com/lang/fr/docs/install/#mac-stable\" rel=\"nofollow noreferrer\">https://yarnpkg.com/lang/fr/docs/install/#mac-stable</a></p>\n"}, {"comments": [{"owner": {"reputation": 569, "user_id": 11482935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GAXz3.jpg?s=128&g=1", "display_name": "monsterpiece", "link": "https://stackoverflow.com/users/11482935/monsterpiece"}, "edited": false, "score": 0, "creation_date": 1576555696, "post_id": 57839552, "comment_id": 104928488, "body": "I have the same issue. I have no webpacker.yml file. Upon trying this the rails gives me this error in the command line <code>YAML syntax error occurred while parsing Please note that YAML must be consistently indented using spaces. Tabs are not allowed. Error: (&lt;unknown&gt;): did not find expected key while parsing a block mapping at line 1 column 2 (RuntimeError)</code>"}], "tags": [], "owner": {"reputation": 27, "user_id": 9693193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bhcgC.jpg?s=128&g=1", "display_name": "Ajay Chandel", "link": "https://stackoverflow.com/users/9693193/ajay-chandel"}, "is_accepted": false, "score": 2, "last_activity_date": 1567940881, "last_edit_date": 1567940881, "creation_date": 1567922395, "answer_id": 57839552, "question_id": 50112741, "link": "https://stackoverflow.com/questions/50112741/react-rails-install-error-webpacker-configuration-file-not-found/57839552#57839552", "title": "React-rails install error Webpacker configuration file not found", "body": "<p>This is 3 step process:</p>\n\n<ul>\n<li>Step 1 :  Create a webpacker.yml into the config folder so path will be \n          config/webpacker.yml</li>\n<li>Step 2 :  paste below content into the webpacker.yml file.</li>\n</ul>\n\n<pre><code>    default: &amp;default\n      source_path: app/javascript\n      source_entry_path: packs\n      public_root_path: public\n      public_output_path: packs\n      cache_path: tmp/cache/webpacker\n      check_yarn_integrity: false\n      webpack_compile_output: false\n\n      resolved_paths: []\n      cache_manifest: false\n      extract_css: false\n\n      static_assets_extensions:\n        - .jpg\n        - .jpeg\n        - .png\n        - .gif\n        - .tiff\n        - .ico\n        - .svg\n        - .eot\n        - .otf\n        - .ttf\n        - .woff\n        - .woff2\n\n      extensions:\n        - .mjs\n        - .js\n        - .sass\n        - .scss\n        - .css\n        - .module.sass\n        - .module.scss\n        - .module.css\n        - .png\n        - .svg\n        - .gif\n        - .jpeg\n        - .jpg\n\n    development:\n      &lt;&lt;: *default\n      compile: true\n\n      check_yarn_integrity: true\n\n      dev_server:\n        https: false\n        host: localhost\n        port: 3035\n        public: localhost:3035\n        hmr: false\n        inline: true\n        overlay: true\n        compress: true\n        disable_host_check: true\n        use_local_ip: false\n        quiet: false\n        pretty: false\n        headers:\n          'Access-Control-Allow-Origin': '*'\n        watch_options:\n          ignored: '**/node_modules/**'\n\n\n    test:\n      &lt;&lt;: *default\n      compile: true\n\n      # Compile test packs to a separate directory\n      public_output_path: packs-test\n\n    production:\n      &lt;&lt;: *default\n\n      # Production depends on precompilation of packs prior to booting for performance.\n      compile: false\n\n      # Extract and emit a css file\n      extract_css: true\n\n      # Cache manifest.json for perfo`enter code here`rmance\n      cache_manifest: true\n</code></pre>\n\n<ul>\n<li>Step 3: restart the server</li>\n</ul>\n"}], "owner": {"reputation": 2208, "user_id": 4061422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZHGRC.png?s=128&g=1", "display_name": "vipin", "link": "https://stackoverflow.com/users/4061422/vipin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6356, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1567940881, "creation_date": 1525159119, "question_id": 50112741, "link": "https://stackoverflow.com/questions/50112741/react-rails-install-error-webpacker-configuration-file-not-found", "title": "React-rails install error Webpacker configuration file not found", "body": "<p>After upgrade rails 3 to rails 4.2.4, i want to use react-rails gem in my project.i follow official react-rails document.</p>\n\n<p><code>rake webpacker:install</code> getting this error. </p>\n\n<pre><code>Webpacker configuration file not found /home/projects/config/webpacker.yml. Please run rails webpacker:install Error: No such file or directory @ rb_sysopen - /home/projects/config/webpacker.yml\n/home/.rvm/gems/ruby-2.3.4/gems/webpacker-3.5.2/lib/webpacker/configuration.rb:73:in `rescue in load'\n/home/.rvm/gems/ruby-2.3.4/gems/webpacker-3.5.2/lib/webpacker/configuration.rb:70:in `load'\n/home/.rvm/gems/ruby-2.3.4/gems/webpacker-3.5.2/lib/webpacker/configuration.rb:66:in `data'\n/home/.rvm/gems/ruby-2.3.4/gems/webpacker-3.5.2/lib/webpacker/configuration.rb:62:in `fetch'\n/home/.rvm/gems/ruby-2.3.4/gems/webpacker-3.5.2/lib/webpacker/configuration.rb:17:in `compile?'\n/home/.rvm/gems/ruby-2.3.4/gems/webpacker-3.5.2/lib/webpacker/manifest.rb:32:in `compiling?'\n/home/.rvm/gems/ruby-2.3.4/gems/webpacker-3.5.2/lib/webpacker/manifest.rb:22:in `lookup'\n/home/.rvm/gems/ruby-2.3.4/gems/react-rails-2.4.4/lib/react/server_rendering/webpacker_manifest_container.rb:42:in `find_asset'\n/home/.rvm/gems/ruby-2.3.4/gems/react-rails-2.4.4/lib/react/server_rendering/bundle_renderer.rb:27:in `block in initialize'\n/home/.rvm/gems/ruby-2.3.4/gems/react-rails-2.4.4/lib/react/server_rendering/bundle_renderer.rb:26:in `each'\n/home/.rvm/gems/ruby-2.3.4/gems/react-rails-2.4.4/lib/react/server_rendering/bundle_renderer.rb:26:in `initialize'\n/home/.rvm/gems/ruby-2.3.4/gems/react-rails-2.4.4/lib/react/server_rendering.rb:17:in `new'\n/home/.rvm/gems/ruby-2.3.4/gems/react-rails-2.4.4/lib/react/server_rendering.rb:17:in `block in reset_pool'\n/home/.rvm/gems/ruby-2.3.4/gems/connection_pool-0.9.3/lib/timed_queue.rb:6:in `block in initialize'\n/home/.rvm/gems/ruby-2.3.4/gems/connection_pool-0.9.3/lib/timed_queue.rb:6:in `initialize'\n/home/.rvm/gems/ruby-2.3.4/gems/connection_pool-0.9.3/lib/timed_queue.rb:6:in `new'\n/home/.rvm/gems/ruby-2.3.4/gems/connection_pool-0.9.3/lib/timed_queue.rb:6:in `initialize'\n/home/.rvm/gems/ruby-2.3.4/gems/connection_pool-0.9.3/lib/connection_pool.rb:42:in `new'\n/home/.rvm/gems/ruby-2.3.4/gems/connection_pool-0.9.3/lib/connection_pool.rb:42:in `initialize'\n/home/.rvm/gems/ruby-2.3.4/gems/react-rails-2.4.4/lib/react/server_rendering.rb:17:in `new'\n/home/.rvm/gems/ruby-2.3.4/gems/react-rails-2.4.4/lib/react/server_rendering.rb:17:in `reset_pool'\n/home/.rvm/gems/ruby-2.3.4/gems/react-rails-2.4.4/lib/react/rails/railtie.rb:104:in `block in &lt;class:Railtie&gt;'\n/home/.rvm/gems/ruby-2.3.4/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'\n/home/.rvm/gems/ruby-2.3.4/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:45:in `block in run_load_hooks'\n/home/.rvm/gems/ruby-2.3.4/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:44:in `each'\n/home/.rvm/gems/ruby-2.3.4/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:44:in `run_load_hooks'\n/home/.rvm/gems/ruby-2.3.4/gems/railties-4.2.4/lib/rails/application/finisher.rb:62:in `block in &lt;module:Finisher&gt;'\n/home/.rvm/gems/ruby-2.3.4/gems/railties-4.2.4/lib/rails/initializable.rb:30:in `instance_exec'\n/home/.rvm/gems/ruby-2.3.4/gems/railties-4.2.4/lib/rails/initializable.rb:30:in `run'\n/home/.rvm/gems/ruby-2.3.4/gems/railties-4.2.4/lib/rails/initializable.rb:55:in `block in run_initializers'\n/home/.rvm/gems/ruby-2.3.4/gems/railties-4.2.4/lib/rails/initializable.rb:54:in `run_initializers'\n/home/.rvm/gems/ruby-2.3.4/gems/railties-4.2.4/lib/rails/application.rb:352:in `initialize!'\n/home/.rvm/gems/ruby-2.3.4/gems/railties-4.2.4/lib/rails/railtie.rb:194:in `public_send'\n/home/.rvm/gems/ruby-2.3.4/gems/railties-4.2.4/lib/rails/railtie.rb:194:in `method_missing'\n/home/projects/config/environment.rb:17:in `&lt;top (required)&gt;'\n/home/.rvm/gems/ruby-2.3.4/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\n/home/.rvm/gems/ruby-2.3.4/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `block in require'\n/home/.rvm/gems/ruby-2.3.4/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:240:in `load_dependency'\n/home/.rvm/gems/ruby-2.3.4/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\n/home/.rvm/gems/ruby-2.3.4/gems/railties-4.2.4/lib/rails/application.rb:328:in `require_environment!'\n/home/.rvm/gems/ruby-2.3.4/gems/railties-4.2.4/lib/rails/application.rb:457:in `block in run_tasks_blocks'\n/home/.rvm/gems/ruby-2.3.4/gems/rake-12.3.1/exe/rake:27:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>please help me, i created new demo app with rails 4.2.4 it working fine, but not my existing app.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "join", "activerecord"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525149924, "post_id": 50111362, "comment_id": 87240068, "body": "Does the <code>categories</code> table have a <code>name</code> field?"}, {"owner": {"reputation": 742, "user_id": 5328443, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/MIICt.png?s=128&g=1", "display_name": "slehmann36", "link": "https://stackoverflow.com/users/5328443/slehmann36"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525150254, "post_id": 50111362, "comment_id": 87240148, "body": "@Phlip Indeed it does."}, {"owner": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1525159129, "post_id": 50111362, "comment_id": 87242572, "body": "According to official <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-and-belongs-to-many-association\" rel=\"nofollow noreferrer\">docs</a>, you should define your relationship in plural:   has_and_belongs_to_many :projects"}, {"owner": {"reputation": 742, "user_id": 5328443, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/MIICt.png?s=128&g=1", "display_name": "slehmann36", "link": "https://stackoverflow.com/users/5328443/slehmann36"}, "reply_to_user": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1525159420, "post_id": 50111362, "comment_id": 87242671, "body": "@Rcordoval yes, my apologies. Transcription mistake"}], "answers": [{"comments": [{"owner": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "edited": false, "score": 0, "creation_date": 1525155283, "post_id": 50111475, "comment_id": 87241343, "body": "You can also use <code>Project.arel_table[:name].matches(&quot;%#{params[:name]}%&quot;)</code>"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1525151203, "last_edit_date": 1525151203, "creation_date": 1525150210, "answer_id": 50111475, "question_id": 50111362, "link": "https://stackoverflow.com/questions/50111362/activerecord-joins-throwing-column-in-where-clause-is-ambiguous-error-rails-5/50111475#50111475", "title": "ActiveRecord joins throwing Column in where clause is ambiguous error - Rails 5.1", "body": "<p>When you join two tables and both tables have a <code>name</code> column then you have to tell the database which <code>name</code> column you want to match. </p>\n\n<pre><code>  def search\n    @projects = Project.all\n    @projects = @projects.where('projects.name LIKE ?', \"%#{params[:name]}%\") if params[:name].present?\n    @projects = @projects.joins(:categories).where(categories: { id: params[:category_id] }) if params[:category_id].present?\n  end\n</code></pre>\n\n<p>Note the <code>projects.name</code> in the <code>LIKE</code> query.</p>\n"}], "owner": {"reputation": 742, "user_id": 5328443, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/MIICt.png?s=128&g=1", "display_name": "slehmann36", "link": "https://stackoverflow.com/users/5328443/slehmann36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 0, "accepted_answer_id": 50111475, "answer_count": 1, "score": 0, "last_activity_date": 1525159367, "creation_date": 1525149070, "last_edit_date": 1525159367, "question_id": 50111362, "link": "https://stackoverflow.com/questions/50111362/activerecord-joins-throwing-column-in-where-clause-is-ambiguous-error-rails-5", "title": "ActiveRecord joins throwing Column in where clause is ambiguous error - Rails 5.1", "body": "<p>I'm working on a Rails 5.1 project which required the indexing and searching of <code>Project</code> records by values of the record's fields, and by the existence of a connected <code>Category</code> record (<code>Project</code> has and belongs to many <code>Category</code>).</p>\n\n<p>I have a <code>SearchController</code> with a <code>search</code> action, which contains a form collecting search parameters. In the form, I have an input for a name parameter and a select for the category. The search runs successfully unless the search returns 0 results, all works ok when there are results to return. In cases where there should be no results, ActiveRecord throws the error:</p>\n\n<pre><code>Mysql2::Error: Column 'name' in where clause is ambiguous: SELECT COUNT(*) FROM `projects` INNER JOIN `categories_projects` ON `categories_projects`.`project_id` = `projects`.`id` INNER JOIN `categories` ON `categories`.`id` = `categories_projects`.`category_id` WHERE (name LIKE '%something%') AND `categories`.`id` = 1\n</code></pre>\n\n<p>Any ideas on what could be causing this?</p>\n\n<p><strong>Project Model</strong>\n</p>\n\n<pre><code>class Project &lt; ApplicationRecord\n  has_and_belongs_to_many :categories\nend\n</code></pre>\n\n<p><strong>Category Model</strong>\n</p>\n\n<pre><code>class Category &lt; ApplicationRecord\n  has_and_belongs_to_many :projects\nend\n</code></pre>\n\n<p><strong>SearchController</strong>\n</p>\n\n<pre><code>class SearchController &lt; ApplicationController\n  def search\n    projects = Project.all\n    projects = projects.where('name LIKE ?', \"%#{params[:name]}%\") if params[:name].present?\n    projects = projects.joins(:categories).where(categories: { id: params[:category_id] }) if params[:category_id].present?\n    @projects = projects\n  end\nend\n</code></pre>\n\n<p><strong>Routes</strong>\n</p>\n\n<pre><code>Rails.application.routes.draw do\n  ...\n\n  get \"search\", to: \"search#search\"\n\n  ...\nend\n</code></pre>\n\n<p><strong>View</strong>\n</p>\n\n<pre><code>&lt;h1&gt;Search&lt;/h1&gt;\n&lt;%= form_tag(search_path, method: :get) do %&gt;\n  &lt;%= label_tag :name %&gt;\n  &lt;%= text_field_tag :name, params[:name] %&gt;\n\n  &lt;%= label_tag :category_id %&gt;\n  &lt;%= select_tag(:category_id, options_for_select(Category.all.collect {|o| [ o.name, o.id ] }, params[:category_id]), { prompt: 'Select Category'}) %&gt;\n\n  &lt;%= submit_tag \"Search\" %&gt;\n&lt;% end %&gt;\n\n&lt;h2&gt;&lt;%= pluralize(@projects.count, \"Result\") %&gt;&lt;/h2&gt;\n&lt;% @projects.each do |project| %&gt;\n  &lt;h3&gt;&lt;%= project.name %&gt;&lt;/h3&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "algorithm", "file", "hash", "nodes"], "comments": [{"owner": {"reputation": 1853, "user_id": 6232665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41eeea507e28cddc2bc1efc3b2b73c45?s=128&d=identicon&r=PG&f=1", "display_name": "zenwraight", "link": "https://stackoverflow.com/users/6232665/zenwraight"}, "edited": false, "score": 0, "creation_date": 1525147122, "post_id": 50111066, "comment_id": 87239505, "body": "I am not at all goo with ruby, but I have done something similar so let me try something out."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525158156, "post_id": 50111066, "comment_id": 87242239, "body": "If you can modify the contents of the file you might consider making a few changes. Firstly, I suggest you remove the node count on the first line, as that can be determined by counting lines. Secondly, begin each row with the node number. That makes the file more easily read by humans and avoids the need to have the rows ordered by row number. Thirdly, for each node only list the higher-numbered adjacent nodes. As the graph is undirected the reverse connections can be easily derived. That would be particularly helpful if hand-crafted files are used for testing."}, {"owner": {"reputation": 497, "user_id": 3806708, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/MDJvI.jpg?s=128&g=1", "display_name": "the_answer_is_xyz", "link": "https://stackoverflow.com/users/3806708/the-answer-is-xyz"}, "edited": false, "score": 0, "creation_date": 1525183976, "post_id": 50111066, "comment_id": 87253341, "body": "I agree, the input file is so weird. It didn&#39;t occur to me to just edit it straight instead rather than using ruby to parse!"}, {"owner": {"reputation": 17268, "user_id": 536607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6c85d3a45108e6e92da9e68fa9d441ae?s=128&d=identicon&r=PG", "display_name": "MxLDevs", "link": "https://stackoverflow.com/users/536607/mxldevs"}, "edited": false, "score": 0, "creation_date": 1525187344, "post_id": 50111066, "comment_id": 87255160, "body": "Developers come up with weird input formats all the time for their programs. The flexibility to reverse engineer and write a reader/writer is useful as well."}], "answers": [{"tags": [], "owner": {"reputation": 17268, "user_id": 536607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6c85d3a45108e6e92da9e68fa9d441ae?s=128&d=identicon&r=PG", "display_name": "MxLDevs", "link": "https://stackoverflow.com/users/536607/mxldevs"}, "is_accepted": false, "score": 2, "last_activity_date": 1525148631, "creation_date": 1525148631, "answer_id": 50111317, "question_id": 50111066, "link": "https://stackoverflow.com/questions/50111066/ruby-parsing-input-file-and-put-in-hash/50111317#50111317", "title": "Ruby parsing input file and put in hash", "body": "<p>That use of the system call is odd; you really don't need that to get the first line in a file.</p>\n\n<p>First line represents number of nodes.</p>\n\n<p>Each line after represents the adjacent nodes for the given node. line <code>n</code> represents the nodes for <code>node (n-1)</code>.</p>\n\n<p>So you can just go line-by-line:</p>\n\n<pre><code>def parse_file(path)\n\n  # start\n  f = File.open(path, 'r')\n\n  # get node count. Convert to integer\n  num_nodes = f.readline.to_i\n\n  # create your nodes\n  nodes = {}\n  1.upto(num_nodes) do |id|\n    node = Node.new(id)\n    nodes[id] = node\n  end\n\n  # join them and stuff\n  1.upto(num_nodes) do |id|\n    node = nodes[id]\n\n    # for each line, read it, strip it, then split it\n    tokens = f.readline.strip.split(\" \")\n    tokens.each do |other_id|\n      other_id = other_id.to_i\n      break if other_id == -1\n\n      # grab the node object, using the ID as key\n      other_node = nodes[other_id]\n      node.adjacent_nodes &lt;&lt; other_node\n    end\n  end\n\n  # done\n  f.close\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 497, "user_id": 3806708, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/MDJvI.jpg?s=128&g=1", "display_name": "the_answer_is_xyz", "link": "https://stackoverflow.com/users/3806708/the-answer-is-xyz"}, "edited": false, "score": 0, "creation_date": 1525184224, "post_id": 50111372, "comment_id": 87253457, "body": "Thank you.  I don&#39;t think I need to worry about the cases.  Let&#39;s assume all input file will be correct.  So no 1 -1 4 7 or anything like that. The goal is just to create Nodes with list of other adjacent nodes. I will be using it for other section to build a graph. It&#39;s much easier to clean up the original file itself, but then it&#39;s more fun to try and leave it intact and see if i can work with it in ruby."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 0, "last_activity_date": 1525149641, "last_edit_date": 1525149641, "creation_date": 1525149218, "answer_id": 50111372, "question_id": 50111066, "link": "https://stackoverflow.com/questions/50111066/ruby-parsing-input-file-and-put-in-hash/50111372#50111372", "title": "Ruby parsing input file and put in hash", "body": "<p>This has all the hallmarks of a homework problem gone awry, but I'll try to help. </p>\n\n<blockquote>\n  <p>My node class has an adjacency_nodes array that I can push node2 and node3 into it. For example: node1.adjancency_nodes &lt;&lt; node2</p>\n</blockquote>\n\n<p>Do you want to push the node ID onto the array, or the node reference itself? </p>\n\n<blockquote>\n  <p><code># how come node_hash[Node.new(line_num)] = line does not work?</code></p>\n</blockquote>\n\n<p>What do you mean by it \"does not work?\" Does it not add the line to your hash? </p>\n\n<p>You're building a hash where the keys are node references and the values are the adjacent nodes. You're not actually modifying the <code>adjacent_nodes</code> property of each node. Is that what you want to do? Also, if you have two lines that refer to the same node ID, e.g. <code>2</code>, you're going to instantiate that node twice, e.g. <code>Node.new(2)</code> will be called twice. Is that what you want to do?</p>\n\n<p>Taking a look at what you've written, I notice a few things:</p>\n\n<ul>\n<li>You're using <code>String#strip</code> when you really just want to <code>String#chomp</code> the newline off the end of the string. </li>\n<li>You're ignoring valuable information at the top of the file, i.e. the total number of nodes.</li>\n<li>Worse, you're calling out to a shell command to get that information (just do it in Ruby!) instead, and you're doing it wrong: you're counting the line that contains the number of nodes as a node definition, so your <code>total_nodes</code> variable is being set to eight (not seven). </li>\n<li>You're ignoring valuable information at the end of each line. Yes, the <code>-1</code> terminator is kind of weird, but you can use it to determine when to stop processing the line. I reckon your professor plans to send in some bad input like <code>2 3 4 -1 5</code> to see if your code breaks. In this case, your code should only consider adjacent nodes 2, 3, and 4.</li>\n<li>You're not converting the strings containing numeric values to proper integers in all cases. </li>\n<li>What do you expect your <code>parse_file</code> method to return? It's probably not returning what you think it's returning as it's presently written. </li>\n</ul>\n\n<p>With that in mind, let's make some changes:</p>\n\n<ul>\n<li>Let's read the first line of the input to determine the total number of nodes. </li>\n<li>Let's preallocate our nodes so we only instantiate each node once.</li>\n<li>Let's use an array (with zero-based indexes) to hold our node references. We'll have to keep this in mind when instantiating nodes and performing lookups against the array (with one-based node IDs).</li>\n<li>Let's stop processing adjacent nodes when we see an invalid node ID.</li>\n<li>Let's use <code>String#chomp</code> and <code>String#to_i</code> for all inputs.</li>\n<li>Let's actually append adjacent nodes...</li>\n<li>Let's return the nodes array at the end of the method so the caller gets back something helpful. </li>\n</ul>\n\n<hr>\n\n<pre><code>def parse_file(filename)\n  # open the file in read-only mode\n  file = File.new(filename, 'r')\n  # read the first line as an integer to determine the number of nodes\n  num_nodes = file.readline.chomp.to_i\n  # preallocate our nodes so we can store adjacent node references\n  nodes = Array.new(num_nodes) { |i| Node.new(i + 1) }\n\n  # read the remaining lines containing node definitions\n  file.each_line.with_index do |line, i|\n    # parse the adjacent node ids as integers\n    line.chomp.split(' ').map(&amp;:to_i).each do |node_id|\n      # a sentinel node id of -1 means stop processing\n      break if node_id &lt; 0\n\n      # TODO: What's supposed to happen when the node doesn't exist?\n      #raise \"Unknown node ID: #{node_id}\" if node_id == 0 || node_id &gt; num_nodes\n\n      # add the node reference to the list of adjacent nodes\n      nodes[i].adjacent_nodes &lt;&lt; nodes[node_id - 1]\n    end\n  end\n\n  nodes\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1525153476, "creation_date": 1525153476, "answer_id": 50111855, "question_id": 50111066, "link": "https://stackoverflow.com/questions/50111066/ruby-parsing-input-file-and-put-in-hash/50111855#50111855", "title": "Ruby parsing input file and put in hash", "body": "<p>One might take advantage of ruby supporting technically infinite cross-nesting of objects:</p>\n\n<pre><code>class Node\n  attr_accessor :id, :adjacents\n  def initialize(id)\n    @id = id\n    @adjacents = []\n  end\n  def to_s\n    \"&lt;#Node #{@adjacents.map(&amp;:id).inspect}&gt;\"\n  end\nend\n\nclass Graph\n  attr_accessor :nodes\n  def initialize(count)\n    @nodes = (1..count).map(&amp;Node.method(:new))\n  end\n  def to_s\n    \"&lt;#Graph nodes: {#{@nodes.map(&amp;:to_s)}}&gt;\"\n  end\nend\n\ninput = \"7\\n2 3 -1\\n1 3 4 5 7 -1\\n1 2 -1\\n2 6 -1\\n2 6 -1\\n4 5 -1\\n2 -1\"\n\ngraph, *nodes = input.split($/)\ncount = graph.to_i\n\nresult =\n  nodes.\n    each.\n    with_index.\n    with_object(Graph.new(count)) do |(line, idx), graph|\n      graph.nodes[idx].adjacents |=\n        line.split.map(&amp;:to_i).\n          select { |e| e &gt;= 1 &amp;&amp; e &lt;= count }.\n          map { |e| graph.nodes[e - 1] }\n    end\n</code></pre>\n\n<hr>\n\n<p>Now you have the infinitely nested graph (you might call <code>adjacents</code> on any node deeper and deeper getting the correct result.)</p>\n\n<p>The top-level graph structure might be achieved with:</p>\n\n<pre><code>puts result.to_s\n#\u21d2\u00a0&lt;#Graph nodes: {[\"&lt;#Node [2, 3]&gt;\",\n#                   \"&lt;#Node [1, 3, 4, 5, 7]&gt;\",\n#                   \"&lt;#Node [1, 2]&gt;\",\n#                   \"&lt;#Node [2, 6]&gt;\",\n#                   \"&lt;#Node [2, 6]&gt;\",\n#                   \"&lt;#Node [4, 5]&gt;\",\n#                   \"&lt;#Node [2]&gt;\"]}&gt;\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 3806708, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/MDJvI.jpg?s=128&g=1", "display_name": "the_answer_is_xyz", "link": "https://stackoverflow.com/users/3806708/the-answer-is-xyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1525153476, "creation_date": 1525146074, "question_id": 50111066, "link": "https://stackoverflow.com/questions/50111066/ruby-parsing-input-file-and-put-in-hash", "title": "Ruby parsing input file and put in hash", "body": "<p>I got a file to represent adjacency list of nodes in a graph as a text file that I need to parse.  The first line is for the total number of nodes. Second line is node1, along with list of nodes it connects to (undirected graph).  For example</p>\n\n<pre><code>7\n2 3 -1\n1 3 4 5 7 -1\n1 2 -1\n2 6 -1\n2 6 -1\n4 5 -1\n2 -1\n</code></pre>\n\n<p>line1: the graph has total 7 nodes.<br>\nline2: Node1 connects to Node2, Node3.<br>\nline3: Node2 connects to Node1, Node3, Node4, Node5, Node7.</p>\n\n<p>The -1 is kind of useless.</p>\n\n<p>Here is my current ruby implementation.  I am trying to find a way to set it up</p>\n\n<pre><code>def parse_file(filename)\n  total_nodes = `wc -l \"#{filename}\"`.strip.split(' ')[0].to_i\n  node_hash = Hash.new\n\n  File.foreach(filename).with_index do |line, line_num|\n    # convert each line into an array\n    line = line.strip.split(\" \")\n    # take out weird -1 at the end of txt file in each line\n    line = line[0...-1]\n    #puts \"#{line_num}: #{line}\"\n\n    # how come node_hash[Node.new(line_num)] = line does not work?\n    node_hash[Node.new(line_num)] = line\n  end\nend\n\nparse_file('test_data.txt')\n</code></pre>\n\n<p>My node class has an adjacency_nodes array that I can push node2 and node3 into it.  For example: node1.adjancency_nodes  &lt;&lt; node2</p>\n\n<pre><code>class Node\n  attr_accessor :id, :state, :adjacent_nodes, :graph\n\n  def initialize(id)\n    @id = id\n    @adjacent_nodes = []\n  end\n\n  def to_s\n    \"node #{@id}\"\n  end\nend\n</code></pre>\n\n<p>What's the cleanest way to loop over the this text file, create new nodes and store it in a hash, along with pushing all of its adjacency nodes?  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525141835, "post_id": 50110483, "comment_id": 87238637, "body": "I assume you did run <code>rails g devise:install</code> and configured your routes correctly? What other controller actions might be at play here?  Anything related in <code>application_controller.rb</code> ?"}, {"owner": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525142021, "post_id": 50110483, "comment_id": 87238674, "body": "@lacostenycoder i ended up having an extra line with &#39;  devise_for :users&#39; in my routes that was causing this issue, i&#39;m surprised it didn&#39;t break the app... literally had me going crazy"}], "answers": [{"tags": [], "owner": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "is_accepted": false, "score": 0, "last_activity_date": 1525141833, "creation_date": 1525141833, "answer_id": 50110674, "question_id": 50110483, "link": "https://stackoverflow.com/questions/50110483/devise-sign-in-not-working-rails-5-2-0/50110674#50110674", "title": "Devise - sign_in() not working rails 5.2.0", "body": "<p>Well after an hour of going crazy</p>\n\n<p>i had a random line in my routes</p>\n\n<pre><code>  devise_for :users\n</code></pre>\n\n<p>with no end doing nothing and it was causing this issue.</p>\n\n<p>after removing that everything is fine.</p>\n"}], "owner": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 323, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525141833, "creation_date": 1525139971, "question_id": 50110483, "link": "https://stackoverflow.com/questions/50110483/devise-sign-in-not-working-rails-5-2-0", "title": "Devise - sign_in() not working rails 5.2.0", "body": "<p>Created new ruby app</p>\n\n<p>in my controller im trying to sign in a user like so </p>\n\n<pre><code>    email = params[:email]\n    password = params[:password]\n\n    user = User.authenticate(email, password)\n\n    if user \n        sign_in(user)\n\n        redirect_to root_path\n    else\n\n        render json: {success: false}\n    end\n</code></pre>\n\n<p>The user is going into sign_in</p>\n\n<p>console is printing: </p>\n\n<pre><code>Processing by AccountController#sign_in_user as */*\n  Parameters: {\"password\"=&gt;\"[FILTERED]\", \"email\"=&gt;\"email@live.com\", \"subdomain\"=&gt;\"app\"}\n  User Load (1.9ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"email\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"email\", \"email@live.com\"], [\"LIMIT\", 1]]\n  \u21b3 app/models/user.rb:9\n  User Load (0.5ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n  \u21b3 app/controllers/account_controller.rb:11\nRedirected to http://app.lvh.me:3000/\nCompleted 200 OK in 131ms (ActiveRecord: 2.4ms)\n</code></pre>\n\n<p>It then redirects to my root path for authenticated users and gives me a 401</p>\n\n<pre><code>    Started GET \"/\" for 127.0.0.1 at 2018-04-30 21:53:39 -0400\nProcessing by DashboardController#index as HTML\n  Parameters: {\"subdomain\"=&gt;\"app\"}\nCompleted 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>In the DB the user's current_sign_in, last_sign_in, ect.. are being updated</p>\n\n<p>I've done this numerous times, i'm not sure why its not working, any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "testing"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525149029, "post_id": 50110278, "comment_id": 87239901, "body": "You can stub and test the helper method, see <a href=\"https://stackoverflow.com/questions/14402067/how-to-call-an-app-helper-method-from-an-rspec-test-in-rails\" title=\"how to call an app helper method from an rspec test in rails\">stackoverflow.com/questions/14402067/&hellip;</a>"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525160692, "post_id": 50110278, "comment_id": 87243100, "body": "Although, why does it matter which controller action or resource? shouldn&#39;t any model validation error show some flash notification to the user?"}, {"owner": {"reputation": 2360, "user_id": 4541624, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/X0lol.jpg?s=128&g=1", "display_name": "Adam Thompson", "link": "https://stackoverflow.com/users/4541624/adam-thompson"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525190137, "post_id": 50110278, "comment_id": 87256684, "body": "@lacostenycoder yes if it contains devise errors. I&#39;m really unsure if I am even testing this the correct way, it feels a bit like perhaps I&#39;m testing internals rather than some API, like I either need to decompose or do a controller/view test rather than a unit test on this method."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1525191381, "post_id": 50110278, "comment_id": 87257388, "body": "the unit test should test the result of the method, not the internals. But why call this method from a helper at all if it depends on controller logic?  We already trust devise to handle validations. Isn&#39;t that where the errors come from anyway? The point of TDD is to avoid logic in the wrong place anyway."}, {"owner": {"reputation": 2360, "user_id": 4541624, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/X0lol.jpg?s=128&g=1", "display_name": "Adam Thompson", "link": "https://stackoverflow.com/users/4541624/adam-thompson"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525200642, "post_id": 50110278, "comment_id": 87262100, "body": "Due to the way rails set the flash, can&#39;t append to the flash before rendering so need to call it in the view layer. In this case it looks like it&#39;s just not worth unit testing."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525202416, "post_id": 50110278, "comment_id": 87262954, "body": "Maybe have a look here <a href=\"https://stackoverflow.com/questions/4097932/devise-rails-how-to-remove-a-particular-flash-message-signed-in-successfully#4098154\" title=\"devise rails how to remove a particular flash message signed in successfully%234098154\">stackoverflow.com/questions/4097932/&hellip;</a>"}], "owner": {"reputation": 2360, "user_id": 4541624, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/X0lol.jpg?s=128&g=1", "display_name": "Adam Thompson", "link": "https://stackoverflow.com/users/4541624/adam-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525137780, "creation_date": 1525137780, "question_id": 50110278, "link": "https://stackoverflow.com/questions/50110278/testing-helper-method-w-controller-dependency", "title": "Testing Helper Method w/ Controller Dependency", "body": "<p>As a part of my <code>rails</code> application I created a helper under <code>ApplicationHelper</code> that checks for <code>devise</code> generated errors and adds them to the <code>flash[:error]</code> hash.</p>\n\n<pre><code>  def devise_flash\n    if controller.devise_controller? &amp;&amp; resource &amp;&amp; resource.errors.any?\n      # modify flash\n    end\n  end\n</code></pre>\n\n<p>This helper gets called in the view layer (e.g. <code>application.html.erb</code>).</p>\n\n<p>However, I can't really unit test this method because it relies on the controller instance to be a devise controller. I could test it by checking a view using assert_select that uses the helper to show the flash messages, but that feels weird.</p>\n\n<p>Is this a symptom of bad design? Something else? Should I be looking for ways to stub out controller to unit test this function?</p>\n"}, {"tags": ["ruby", "model", "sequel"], "answers": [{"comments": [{"owner": {"reputation": 4717, "user_id": 1913389, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QKwb2.png?s=128&g=1", "display_name": "theGreenCabbage", "link": "https://stackoverflow.com/users/1913389/thegreencabbage"}, "edited": false, "score": 0, "creation_date": 1525138689, "post_id": 50110304, "comment_id": 87237997, "body": "Actually yeah, the associations are all setup! Let me try your suggestion for the association"}, {"owner": {"reputation": 4717, "user_id": 1913389, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QKwb2.png?s=128&g=1", "display_name": "theGreenCabbage", "link": "https://stackoverflow.com/users/1913389/thegreencabbage"}, "edited": false, "score": 0, "creation_date": 1525138990, "post_id": 50110304, "comment_id": 87238073, "body": "Sweet, <code>group_user.user.first.email</code> worked! Is there a way to do it without the <code>map</code>, but instead as a one-liner?"}, {"owner": {"reputation": 23809, "user_id": 351909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/71a6b8a36a63c2cb9de678c07be6d8a4?s=128&d=identicon&r=PG", "display_name": "moritz", "link": "https://stackoverflow.com/users/351909/moritz"}, "reply_to_user": {"reputation": 4717, "user_id": 1913389, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QKwb2.png?s=128&g=1", "display_name": "theGreenCabbage", "link": "https://stackoverflow.com/users/1913389/thegreencabbage"}, "edited": false, "score": 0, "creation_date": 1525225777, "post_id": 50110304, "comment_id": 87270182, "body": "You could define a method <code>user_email</code> on <code>Model::GroupUser</code>. Then then its just Model::GroupUser...map(&amp;:user_email). To completely avoid the map, I think you&#39;d have to join the tables manually."}], "tags": [], "owner": {"reputation": 23809, "user_id": 351909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/71a6b8a36a63c2cb9de678c07be6d8a4?s=128&d=identicon&r=PG", "display_name": "moritz", "link": "https://stackoverflow.com/users/351909/moritz"}, "is_accepted": true, "score": 1, "last_activity_date": 1525138094, "creation_date": 1525138094, "answer_id": 50110304, "question_id": 50110017, "link": "https://stackoverflow.com/questions/50110017/improving-ruby-sequel-model-code/50110304#50110304", "title": "Improving Ruby Sequel Model Code", "body": "<p>What comes to mind is this, essentially packing everything into a single map loop:</p>\n\n<pre><code>users = Model::GroupUser.where(:group_id =&gt; self[:address]).map do |group_user|\n  Model::User.where(id: group_user[:user_id]).first.email\nend\n</code></pre>\n\n<p>If you set up the associations in your Sequel models, you can use <code>group_user.user.first.email</code> within the loop. Also, in that case, you may want to eager load the association for better performance: <code>users = Model::GroupUser.eager(:user).where...</code>.</p>\n"}], "owner": {"reputation": 4717, "user_id": 1913389, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QKwb2.png?s=128&g=1", "display_name": "theGreenCabbage", "link": "https://stackoverflow.com/users/1913389/thegreencabbage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 50110304, "answer_count": 1, "score": 0, "last_activity_date": 1525138094, "creation_date": 1525135339, "question_id": 50110017, "link": "https://stackoverflow.com/questions/50110017/improving-ruby-sequel-model-code", "title": "Improving Ruby Sequel Model Code", "body": "<p>I have the following Model that retrieves an object known as <code>GroupUser</code>, which are as the name suggestions, a Group of Users:</p>\n\n<pre><code>[# &lt; Model::GroupUser @values = {: id =&gt; 24,\n  : user_id =&gt; 8,\n  : group_id =&gt; 3,\n  : from_group_id =&gt; 3\n} &gt; , # &lt; GroupUser @values = {: id =&gt; 27,\n  : user_id =&gt; 9,\n  : group_id =&gt; 3,\n  : from_group_id =&gt; 3\n} &gt; , # &lt; GroupUser @values = {: id =&gt; 36,\n  : user_id =&gt; 7,\n  : group_id =&gt; 3,\n  : from_group_id =&gt; 3\n} &gt; ]\n</code></pre>\n\n<p>I'd like to turn this <code>GroupUser</code> into their respective e-mail addresses (each <code>User</code> has an associated <code>email</code> property)</p>\n\n<p>So I did the following:</p>\n\n<pre><code>users = []\ngroup_users = Model::GroupUser.where(:group_id =&gt; self[:address]).map(:user_id)\ngroup_users.each do |user|\n  users &lt;&lt; Model::User.where(id: user).first.email\nend\nusers\n</code></pre>\n\n<p>It works.. But I feel like with how many elegant ways to do stuff in Ruby, this could be written in a more elegant way. </p>\n"}, {"tags": ["ruby", "blackjack"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525132655, "post_id": 50109451, "comment_id": 87236716, "body": "Where are your automated tests for this?"}, {"owner": {"reputation": 9, "user_id": 9715478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4655b179cd42067d510112e31b8c89fb?s=128&d=identicon&r=PG&f=1", "display_name": "Warren Mui", "link": "https://stackoverflow.com/users/9715478/warren-mui"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525134757, "post_id": 50109451, "comment_id": 87237195, "body": "Tests have been added. I&#39;ve also been asked to create my own tests as needed. All tests so far are passing."}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525135685, "post_id": 50109451, "comment_id": 87237399, "body": "awesome tests! you&#39;re hired. Oh, except <code>assert_equal @deck.playable_cards.size, 52</code> should be <code>assert_equal 52, @deck.playable_cards.size</code>, and <code>assert(!(...))</code> should be <code>refute</code>, and you should drop excess parentheses <code>()</code> on assertions."}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 0, "creation_date": 1525154820, "post_id": 50109451, "comment_id": 87241218, "body": "Why do Players and Dealers need their own class?  Wouldn&#39;t they be an instance of Hand? Where they then receive a card from the Deck you initialise.  I assume you didn&#39;t write the shuffle method as it actually does no shuffling at all, that is actually done by the random select (deal_card). After your basic tests, you would need to look at what rules you want to use, ie when does a dealer have to draw are a card and when do they have to sit ... and of course the 21 limit"}], "answers": [{"tags": [], "owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "is_accepted": false, "score": 0, "last_activity_date": 1525175128, "creation_date": 1525175128, "answer_id": 50115922, "question_id": 50109451, "link": "https://stackoverflow.com/questions/50109451/creating-blackjack-simulation-in-ruby-altering-variables-between-different-inst/50115922#50115922", "title": "Creating Blackjack simulation in Ruby, altering variables between different instances", "body": "<p>I guess you need some place for an a player and a dealer to exist in. From that context you will have the control to pass around cards between the dealer and the player. Also there could be several players or something.</p>\n\n<p>So I would create a Game class, where you initialize Players and dealer and you can create methods to hand around cards.</p>\n\n<pre><code>class Game\n  def initialize\n    @dealer = Dealer.new\n    @player = Player.new\n  end\n\n  def deal_out_to_player\n    2.times do\n      @player.player_hand.cards &lt;&lt; Dealer.deal\n    end \n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9715478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4655b179cd42067d510112e31b8c89fb?s=128&d=identicon&r=PG&f=1", "display_name": "Warren Mui", "link": "https://stackoverflow.com/users/9715478/warren-mui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525175128, "creation_date": 1525130380, "last_edit_date": 1525134732, "question_id": 50109451, "link": "https://stackoverflow.com/questions/50109451/creating-blackjack-simulation-in-ruby-altering-variables-between-different-inst", "title": "Creating Blackjack simulation in Ruby, altering variables between different instances", "body": "<p>This is for a job interview. What I want to do is that once a card is dealt (removed from the Dealer's Deck instance), that card becomes available to the Player's Hand Instance.</p>\n\n<pre><code>    class Card\n      attr_accessor :suite, :name, :value #specifiy that class attributes are both, readable and writable\n      #constructor\n      def initialize(suite, name, value) \n        @suite, @name, @value = suite, name, value #this looks odd\n      end\n    end\n\n    class Deck\n      attr_accessor :playable_cards\n      SUITES = [:hearts, :diamonds, :spades, :clubs] #constant \n      NAME_VALUES = { \n        :two   =&gt; 2,\n        :three =&gt; 3,\n        :four  =&gt; 4,\n        :five  =&gt; 5,\n        :six   =&gt; 6,\n        :seven =&gt; 7,\n        :eight =&gt; 8,\n        :nine  =&gt; 9,\n        :ten   =&gt; 10,\n        :jack  =&gt; 10,\n        :queen =&gt; 10,\n        :king  =&gt; 10,\n        :ace   =&gt; [11, 1]}\n\n      def initialize #initialzing shuffles the deck\n        shuffle \n      end\n\n      def deal_card #removes card from deck\n        random = rand(@playable_cards.size) #returns an random int greater &gt;= 0 &amp; &lt; max\n        @playable_cards.delete_at(random)\n      end\n\n      def shuffle\n        @playable_cards = [] #array of 52 cards\n        SUITES.each do |suite| #iterate over suites\n          NAME_VALUES.each do |name, value| #iterate, over card for that suite\n            @playable_cards &lt;&lt; Card.new(suite, name, value) #add to end of array, new Card\n          end\n        end\n      end\n    end\n\n    class Hand\n      attr_accessor :cards\n\n      def initialize\n        @cards = []\n      end\n    end\n\n    class Player\n      def initialize\n        @player_hand = Hand.new\n      end\n\n    end\n\n    class Dealer \n      def initialize\n        @dealer_hand = Hand.new\n        @dealer_deck = Deck.new\n      end\n\n      def deal \n        card = @dealer_deck.deal_card\n      end\n    end\n\n\nrequire 'test/unit'\n\nclass CardTest &lt; Test::Unit::TestCase\n  def setup\n    @card = Card.new(:hearts, :ten, 10)\n  end\n\n  def test_card_suite_is_correct\n    assert_equal @card.suite, :hearts\n  end\n\n  def test_card_name_is_correct\n    assert_equal @card.name, :ten\n  end\n  def test_card_value_is_correct\n    assert_equal @card.value, 10\n  end\nend\n\nclass DeckTest &lt; Test::Unit::TestCase\n  def setup\n    @deck = Deck.new\n  end\n\n  def test_new_deck_has_52_playable_cards\n    assert_equal @deck.playable_cards.size, 52\n  end\n\n  def test_dealt_card_should_not_be_included_in_playable_cards\n    card = @deck.deal_card\n    assert(!@deck.playable_cards.include?(card)) #upon dealing card, card should be removed from deck\n  end\n\n  def test_shuffled_deck_has_52_playable_cards\n    @deck.shuffle\n    assert_equal @deck.playable_cards.size, 52\n  end\nend\n</code></pre>\n\n<p>All I have done is added the <code>Player</code> and <code>Dealer</code> class. My thinking is that a Player has a hand so upon initialization an instance of a Hand is stored in <code>@player_hand</code> and the same goes for the Dealer. The Dealer also has its own deck instance, obviously. Now once I call <code>Dealer.new.deal</code> a card is removed from the deck, how do I add that newly removed card to the <code>Player @player_hand</code>?</p>\n\n<p>I thought about using global variables, but that's bad practice. I'm also not quite sure if this is even the right approach.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ransack"], "answers": [{"tags": [], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "is_accepted": true, "score": 1, "last_activity_date": 1525135925, "creation_date": 1525135925, "answer_id": 50110078, "question_id": 50109007, "link": "https://stackoverflow.com/questions/50109007/custom-ransacker-to-ignore-dash-in-database/50110078#50110078", "title": "Custom Ransacker to ignore dash in database", "body": "<p>Looks like creating a custom Ransacker does the trick here.</p>\n\n<pre><code>ransacker :number do\n  Arel.sql(\"translate(number, '-', '')\")\nend\n</code></pre>\n\n<p>This will remove the dashes from the database representation of the data when searching with Ransack.</p>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 50110078, "answer_count": 1, "score": 0, "last_activity_date": 1525135925, "creation_date": 1525126930, "question_id": 50109007, "link": "https://stackoverflow.com/questions/50109007/custom-ransacker-to-ignore-dash-in-database", "title": "Custom Ransacker to ignore dash in database", "body": "<p>I'm trying to customize Ransack to allow searching the text field and possibly having ransack ignore the <code>dash</code> character. </p>\n\n<h3>EXAMPLE:</h3>\n\n<p>If I type this in the search box:</p>\n\n<pre><code>123456\n</code></pre>\n\n<p>The Ransack query will not find this record in the DB: </p>\n\n<pre><code>123-456\n</code></pre>\n\n<p>Right now if I don't type the dash the record will not be found. I understand why it's trying to match the DB record and it's obviously not finding it because the dash is required to find that record.</p>\n\n<p>Is it possible to customize Ransack so that the search will still find the record without the dash in the params? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 9528038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Joao Quaresma", "link": "https://stackoverflow.com/users/9528038/joao-quaresma"}, "is_accepted": true, "score": 0, "last_activity_date": 1525128294, "creation_date": 1525128294, "answer_id": 50109186, "question_id": 50108125, "link": "https://stackoverflow.com/questions/50108125/user-with-unique-to-do-list/50109186#50109186", "title": "User with unique To_do_list", "body": "<p>I ended realising that that I already have the data that I want to show available and dont actually need to create any controller etc.</p>\n\n<p>Instead for this situation I created the methods in the user_controller and then created the routes to show what I wanted.</p>\n\n<p>The to_do_list controller would make sense if I wanted the users to create tasks in the to_do_list.</p>\n"}], "owner": {"reputation": 41, "user_id": 9528038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Joao Quaresma", "link": "https://stackoverflow.com/users/9528038/joao-quaresma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 50109186, "answer_count": 1, "score": -1, "last_activity_date": 1525128294, "creation_date": 1525121873, "question_id": 50108125, "link": "https://stackoverflow.com/questions/50108125/user-with-unique-to-do-list", "title": "User with unique To_do_list", "body": "<p>I am doing an app with <code>User, Article and To_do_list</code></p>\n\n<p>I am using the gem bookmark_system to add a bookmark to an article. \n<a href=\"https://github.com/pmviva/bookmark_system\" rel=\"nofollow noreferrer\">https://github.com/pmviva/bookmark_system</a></p>\n\n<p>The list of the bookmarked articles is what I am going to show in the To_do_list.</p>\n\n<p>I want each user to have only 1 To_do_list. I also want users to be able to check other users to_do_list.</p>\n\n<p>user model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\nact_as_bookmarker\nhas_many :articles\nhas_one :to_do_list\nend\n</code></pre>\n\n<p>article model:</p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\nbelongs_to :user\nact_as_bookmarkee\nend\n</code></pre>\n\n<p>to_do_list:</p>\n\n<pre><code>class ToDoList &lt; ActiveRecord::Base\nbelongs_to :user\nend\n</code></pre>\n\n<p>to_do_lists_controller.rb:</p>\n\n<pre><code>class ToDoListsController &lt; ApplicationController\n  def index\n    @articles_bookmark = current_user.bookmarkees_by(Article)\n  end\n</code></pre>\n\n<p>the migration:</p>\n\n<pre><code>class ToDoLists &lt; ActiveRecord::Migration\n  def change\n  create_table :to_do_lists do |t|\n  t.belongs_to :user, index: { unique: true }, foreign_key: true\n  end\n  end\nend\n</code></pre>\n\n<p>The schema:</p>\n\n<pre><code>create_table \"to_do_lists\", force: :cascade do |t|\n    t.integer \"user_id\"\n  end\n  add_index \"to_do_lists\", [\"user_id\"], name: \"index_to_do_lists_on_user_id\", unique: true\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>  resources :to_do_lists\n</code></pre>\n\n<p>The paths:</p>\n\n<pre><code>to_do_lists GET      /to_do_lists(.:format)          to_do_lists#index                           \nPOST                 /to_do_lists(.:format)          to_do_lists#create                                               \nnew_to_do_list GET   /to_do_lists/new(.:format)      to_do_lists#new                                         \nedit_to_do_list GET  /to_do_lists/:id/edit(.:format) to_do_lists#edit                                       \nto_do_list GET       /to_do_lists/:id(.:format)      to_do_lists#show                                           \nPATCH                /to_do_lists/:id(.:format)      to_do_lists#update                                       \nPUT                  /to_do_lists/:id(.:format)      to_do_lists#update                                      \nDELETE               /to_do_lists/:id(.:format)      to_do_lists#destroy                                      \n</code></pre>\n\n<p>I am confused with 2 things:</p>\n\n<p>1 - the user will need to \"create\" a to_do_list, but I don't want the user to create it, I want it to be created already and only show items if the user bookmarked something.</p>\n\n<p>2 - To make a user to access other user is also causing me some questions, perhaps this can be clearer once I figure out the point above. </p>\n\n<p>Please give me some lights as I am a bit lost here. Thanks in advance.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525119760, "post_id": 50107571, "comment_id": 87232607, "body": "What exactly do you mean by &quot;replace ... to the new version&quot;? Do you want to store that result to a variable? (Do you want that variable to be a  string, or an array of 3 strings?) Or do you want to save it to a new file? Or do you want to update the original file?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525119908, "post_id": 50107571, "comment_id": 87232674, "body": "In the case of the latter two options, is it actually a requirement that you do this in ruby, or could you just do it on the command line, e.g. with <code>sed</code>? And does this question actually have anything to do with <code>ruby-on-rails</code>? If not, there&#39;s no need to tag it as such."}, {"owner": {"reputation": 45, "user_id": 5858431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4feba9bee8e6750d42d74efd34da7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/5858431/sriram"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1525120026, "post_id": 50107571, "comment_id": 87232727, "body": "Ya I guess it has nothing to do with Ruby on Rails, sorry for the wrong tag. And regarding replacing, I was basically looking to replace the value of release in that specific file . So basically updating the existing file and won\u2019t be new file ."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1525120069, "post_id": 50107571, "comment_id": 87232751, "body": "If this is a YAML file why not read the data, manipulate it, and dump it back out? That avoids mangling things by accident, like a <code>prev_release</code> line you may not realize could show up."}, {"owner": {"reputation": 45, "user_id": 5858431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4feba9bee8e6750d42d74efd34da7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/5858431/sriram"}, "edited": false, "score": 0, "creation_date": 1525120278, "post_id": 50107571, "comment_id": 87232844, "body": "I was trying to  add this part of script of changing the release version as part of my existing ruby script ( Rakefile )"}, {"owner": {"reputation": 45, "user_id": 5858431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4feba9bee8e6750d42d74efd34da7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/5858431/sriram"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1525120641, "post_id": 50107571, "comment_id": 87232978, "body": "Perfect ! Thanks @tadman for the suggestion. I used Yaml to load and manipulate the file. It worked great ."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1525121029, "post_id": 50107571, "comment_id": 87233128, "body": "If you&#39;ve got some working code it&#39;s worth posting a self-answer."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525121116, "post_id": 50107571, "comment_id": 87233164, "body": "If it&#39;s a YAML file, then you should probably store it as <code>file.yml</code>, not <code>file.txt</code> :)"}, {"owner": {"reputation": 45, "user_id": 5858431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4feba9bee8e6750d42d74efd34da7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/5858431/sriram"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525121399, "post_id": 50107571, "comment_id": 87233298, "body": "@TomLord yeah basically I did not have any extension for the file till now, would probably save it as yml now."}, {"owner": {"reputation": 45, "user_id": 5858431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4feba9bee8e6750d42d74efd34da7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/5858431/sriram"}, "edited": false, "score": 0, "creation_date": 1525121451, "post_id": 50107571, "comment_id": 87233325, "body": "Thanks both of you for the assistance ! Appreciate it !"}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 5858431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4feba9bee8e6750d42d74efd34da7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/5858431/sriram"}, "is_accepted": true, "score": 0, "last_activity_date": 1525158210, "last_edit_date": 1525158210, "creation_date": 1525121324, "answer_id": 50108011, "question_id": 50107571, "link": "https://stackoverflow.com/questions/50107571/search-for-particular-string-in-file-and-replace-the-value/50108011#50108011", "title": "Search for particular string in file and replace the value", "body": "<p>Based on above suggestions from @tadman, I was able to get it working as follows:</p>\n\n<pre><code>require 'yaml'\n\nfile = YAML.load_file('file')\nfile[\"release\"] = \"#{new_version}\"\nfile.open('file', 'w') { |f| YAML.dump(file, f) }\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5858431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4feba9bee8e6750d42d74efd34da7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/5858431/sriram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 50108011, "answer_count": 1, "score": 0, "last_activity_date": 1525158210, "creation_date": 1525119192, "last_edit_date": 1525158185, "question_id": 50107571, "link": "https://stackoverflow.com/questions/50107571/search-for-particular-string-in-file-and-replace-the-value", "title": "Search for particular string in file and replace the value", "body": "<p>I am new to ruby and was scratching my head for something that seems pretty trivial. I was trying to search for particular string in file and replace that value with the new value . Here is what I have:</p>\n\n<pre><code>file = open('file.txt') { |f| f.grep(/release/) }\n</code></pre>\n\n<p>The contents of the file <code>file.txt</code> is as follows:</p>\n\n<pre><code>develop: 0.0.0\nrelease: 0.0.4\ntest: 0.0.0\n</code></pre>\n\n<p>I am getting the output of the above line in array as follows : </p>\n\n<blockquote>\n  <p>[\"release: 0.0.4\\n\"]</p>\n</blockquote>\n\n<p>How do I change just the value of this line in above file to the new version, something like this :</p>\n\n<pre><code>develop: 0.0.0\nrelease: 0.0.5\ntest: 0.0.0\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash", "yaml", "block"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1525118885, "last_edit_date": 1525118885, "creation_date": 1525118393, "answer_id": 50107400, "question_id": 50107308, "link": "https://stackoverflow.com/questions/50107308/ruby-array-of-hash-parsing/50107400#50107400", "title": "Ruby Array of Hash parsing", "body": "<p>You can clean this up a lot if you make it more idiomatic Ruby:</p>\n\n<pre><code>require 'yaml'\nrequirements = YAML.load_file('./require.yaml')\n\nrequire_fields = requirements['parameters'].select do |param|\n  param.has_key?('require')\nend.map do |param|\n  param['require']\nend\n\nrequire_fields.each do |requirement|\n  found = requirements['parameters'].any? do |param|\n    param['param_name'] == requirement\n  end\n\n  abort \"#{requirement} is a required field\" unless found\nend\n</code></pre>\n\n<p>You could also do this:</p>\n\n<pre><code>require_fields = requirements['parameters'].map do |param|\n  param['require']\nend.compact\n</code></pre>\n\n<p>Where that's probably good enough so long as your <code>require</code> is either something or <code>nil</code>.</p>\n\n<p>You could also transform that input YAML into a simple hash structure of dependencies:</p>\n\n<pre><code>dependencies = requirements.map do ||\n  [ param['param_name'], param['requires'] ]\nend.to_h\n</code></pre>\n\n<p>Then you can test really easily:</p>\n\n<pre><code>dependencies.each do |name, requirements|\n  found = requirements.find do |required_name|\n    !dependencies[required_name]\n  end\n\n  abort \"#{found} is a required field\" unless found\nend\n</code></pre>\n\n<p>This is a really rough adaptation of your code, but I hope it gives you some ideas.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1525158720, "last_edit_date": 1525158720, "creation_date": 1525157729, "answer_id": 50112480, "question_id": 50107308, "link": "https://stackoverflow.com/questions/50107308/ruby-array-of-hash-parsing/50112480#50112480", "title": "Ruby Array of Hash parsing", "body": "<p>I would go with subsequent checks, collecting errors and reporting all at once:</p>\n\n<pre><code>req = YAML.load 'parameters:\n  - param_name: age\n    requires:\n    - name\n  - param_name: height\n    requires:\n    - name'\ninput = {'age' =&gt; 15, 'height' =&gt; '6ft'}\n\nreq['parameters'].each_with_object([]) do |req, err|\n  next unless input[req['param_name']] # nothing to check\n  missed = req['requires'].reject { |param| input[param] }\n  errors = missed.map do |param|\n    [req['param_name'], param].join(' requires ')\n  end\n  err.concat(errors)\nend\n#\u21d2\u00a0[\"age requires name\", \"height requires name\"]\n</code></pre>\n\n<p>Or, chaining:</p>\n\n<pre><code>req['parameters'].each_with_object(Hash.new { |h, k| h[k] = [] }) do |req, err|\n  next unless input[req['param_name']] # nothing to check\n\n  req['requires'].each do |param|\n    err[param] &lt;&lt; req['param_name'] unless input[param]\n  end\nend.map do |missing, required|\n  \"Missing #{missing} parameter, required for: [#{required.join(', ')}]\"\nend.join(',')\n#\u21d2\u00a0\"Missing name parameter, required for: [age, height]\"\n</code></pre>\n"}], "owner": {"reputation": 284, "user_id": 6788679, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e9e9a74322f5366b889d834c73afef73?s=128&d=identicon&r=PG&f=1", "display_name": "jacksonecac", "link": "https://stackoverflow.com/users/6788679/jacksonecac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 50107400, "answer_count": 2, "score": 0, "last_activity_date": 1525158720, "creation_date": 1525118007, "question_id": 50107308, "link": "https://stackoverflow.com/questions/50107308/ruby-array-of-hash-parsing", "title": "Ruby Array of Hash parsing", "body": "<p>I have a yaml file in the format:</p>\n\n<pre><code>parameters:\n  - param_name: age\n    requires:\n    - name\n  - param_name: height\n    requires:\n    - name\n</code></pre>\n\n<p>Based on this format I would like to accept a hash of keys and values and determine if the combination of keys and values is valid. For example based on the above example if someone submitted a hash with the values:</p>\n\n<pre><code>{'age' =&gt; 15, 'height' =&gt; '6ft'}\n</code></pre>\n\n<p>it would be considered invalid since the parameter name is required. So a valid submission would look like</p>\n\n<pre><code>{'age' =&gt; 15, 'height' =&gt; '6ft', 'name' =&gt; 'Abe Lincoln'}.\n</code></pre>\n\n<p>Essentially what I want is this:</p>\n\n<p>For each parameter object, if it has a requires array underneath it. Check all parameter param_names for elements in that array, if any are missing exit.</p>\n\n<p>I have a very ugly double loop that checks for this but I want to tighten the code up. I think I can use blocks in order to validate the data I need. Here is what I have come up with so far:</p>\n\n<pre><code>require 'yaml'\nrequirements = YAML.load_file('./require.yaml')\nrequire_fields = Array.new\n\nrequirements['parameters'].each do |param|\n  require_fields.concat(param['require']) if param.has_key? 'require'\nend\n\nrequire_fields.each do |requirement|\n  found = false\n  requirements['parameters'].each do |param|\n    if param['param_name'] == requirement\n      found = true\n    end\n  end\n  abort \"#{requirement} is a required field\" unless found\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "controller"], "comments": [{"owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "edited": false, "score": 2, "creation_date": 1525115203, "post_id": 50106653, "comment_id": 87230616, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17335329/activemodelforbiddenattributeserror-when-creating-new-user\">ActiveModel::ForbiddenAttributesError when creating new user</a>"}, {"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 0, "creation_date": 1525115302, "post_id": 50106653, "comment_id": 87230665, "body": "You need to use a new approach of params processing called strong params. Can you paste what exact fields does your contact form contains?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1525115408, "post_id": 50106653, "comment_id": 87230710, "body": "<code>Contact.new(params[:contact])</code> &lt;--- You cannot do this; rails, by default, protects assigning parameters directly. They need to be &quot;whitelisted&quot; (or, you need to explicitly say &quot;whitelist everything&quot;)."}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525115428, "post_id": 50106653, "comment_id": 87230715, "body": "Can you run your website in &quot;development&quot; mode, so you can get a stack trace instead of a 500 error? What does your log file say? And what do your automated tests say about your <code>create</code> action?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525115519, "post_id": 50106653, "comment_id": 87230750, "body": "Suppose you have an attribute <code>contact.is_admin (true&#47;false)</code>. Your current code would allow the user to set this value without protection - which is probably not what you intended! This is why rails requires you to define which attributes can be set, via <code>permit</code>."}, {"owner": {"reputation": 179, "user_id": 9534222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfySY.jpg?s=128&g=1", "display_name": "Felipe Marcon", "link": "https://stackoverflow.com/users/9534222/felipe-marcon"}, "edited": false, "score": 0, "creation_date": 1525149084, "post_id": 50106653, "comment_id": 87239907, "body": "Thanks, guys. Alexande&#39;s answer (in below) helped me solve my problem."}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 9534222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfySY.jpg?s=128&g=1", "display_name": "Felipe Marcon", "link": "https://stackoverflow.com/users/9534222/felipe-marcon"}, "edited": false, "score": 0, "creation_date": 1525148948, "post_id": 50106999, "comment_id": 87239886, "body": "This worked in parts. I needed to create a view in contacts called &quot;create&quot; too. Now is working fine. In some older version of Ruby on Rails this it wasn&#39;t necessary.  Thanks fot the help!"}], "tags": [], "owner": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "is_accepted": true, "score": 4, "last_activity_date": 1525116685, "creation_date": 1525116685, "answer_id": 50106999, "question_id": 50106653, "link": "https://stackoverflow.com/questions/50106653/ruby-on-rails-send-contact-form-controller-issues/50106999#50106999", "title": "Ruby on Rails - Send contact form - Controller issues", "body": "<p>I think you should change it in some kind of this way:</p>\n\n<pre><code>class ContactsController &lt; InheritedResources::Base\n\n  def index \n  end\n\n  def create\n    @contact = Contact.new(contact_params)\n    if @contact.save\n      ContactMailer.delay_for(10.seconds, retry: true).create(@contact)\n      render nothing: true, status: 200\n    else\n      render nothing: true, status: 400\n    end\n  end\n\n  private\n\n  def contact_params\n    params.require(:contact).permit(:name, :phone)\n  end\n\nend\n</code></pre>\n\n<p>You can read more detailed about it <a href=\"http://api.rubyonrails.org/v5.0/classes/ActionController/StrongParameters.html\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://edgeguides.rubyonrails.org/action_controller_overview.html#strong-parameters\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 179, "user_id": 9534222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfySY.jpg?s=128&g=1", "display_name": "Felipe Marcon", "link": "https://stackoverflow.com/users/9534222/felipe-marcon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 50106999, "answer_count": 1, "score": 2, "last_activity_date": 1525116685, "creation_date": 1525115005, "question_id": 50106653, "link": "https://stackoverflow.com/questions/50106653/ruby-on-rails-send-contact-form-controller-issues", "title": "Ruby on Rails - Send contact form - Controller issues", "body": "<p>I have a contact form in my project with Ruby on Rails (Ruby 2.4.0 and Rails 5.2.0). When I try send the form, the following error occurs:</p>\n\n<pre><code>Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)\n\nActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:\n  app/controllers/contacts_controller.rb:7:in `create'\n</code></pre>\n\n<p>I suspect that errors is in contact controller, as the error says.</p>\n\n<p>contacts_controller.rb</p>\n\n<pre><code>class ContactsController &lt; InheritedResources::Base\n\n  def index \n  end\n\n  def create\n    @contact = Contact.new(params[:contact])\n    if @contact.save\n      ContactMailer.delay_for(10.seconds, retry: true).create(@contact)\n      render nothing: true, status: 200\n    else\n      render nothing: true, status: 400\n    end\n  end\n\nend\n</code></pre>\n\n<p>In some older versions of Ruby and Rails the same code works fine. Anything change for the recent versions? Someone can help me?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "ruby-mocha"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1525110694, "post_id": 50105319, "comment_id": 87228583, "body": "we need more here because this works just fine <code>subject { double }; it { is_expected.not_to receive(:anything) }</code>"}, {"owner": {"reputation": 186, "user_id": 3768043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2549a3109b6cb7912d125672e15cf7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas-schulze", "link": "https://stackoverflow.com/users/3768043/jonas-schulze"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1525111846, "post_id": 50105319, "comment_id": 87229111, "body": "@engineersmnky the subject is set to the strings of the <code>describe</code> blocks: <code>&#39;something&#39;</code> and <code>&#39;something else&#39;</code>, implicitly. Also, the stubbing isn&#39;t the problem / is working. I am bound to <code>mocker</code>, I think."}, {"owner": {"reputation": 186, "user_id": 3768043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2549a3109b6cb7912d125672e15cf7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas-schulze", "link": "https://stackoverflow.com/users/3768043/jonas-schulze"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1525111900, "post_id": 50105319, "comment_id": 87229139, "body": "@Anthony your test is passing as it indeed isn&#39;t calling <code>subject.anything</code> or <code>subject.send :anything</code>. In the MWE my test is calling it directly. In my actual code, I have an explicit subject that may call the method internally, that I don&#39;t want it to call. But all of this shouldn&#39;t (must not) make a difference."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1525112365, "post_id": 50105319, "comment_id": 87229345, "body": "@jonas-schulze where in your first example are you calling <code>subject.foo</code>?"}, {"owner": {"reputation": 186, "user_id": 3768043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2549a3109b6cb7912d125672e15cf7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas-schulze", "link": "https://stackoverflow.com/users/3768043/jonas-schulze"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1525112400, "post_id": 50105319, "comment_id": 87229362, "body": "@Anthony Nowhere, hence I would expect it to pass."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1525112475, "post_id": 50105319, "comment_id": 87229399, "body": "if you remove the before block does it pass?  I can&#39;t find that stubbing syntax in the rspec docs (closest was this: <a href=\"https://relishapp.com/rspec/rspec-mocks/v/3-7/docs/old-syntax/stub\" rel=\"nofollow noreferrer\">relishapp.com/rspec/rspec-mocks/v/3-7/docs/old-syntax/stub</a>)"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 186, "user_id": 3768043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2549a3109b6cb7912d125672e15cf7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas-schulze", "link": "https://stackoverflow.com/users/3768043/jonas-schulze"}, "edited": false, "score": 0, "creation_date": 1525112592, "post_id": 50105319, "comment_id": 87229454, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/170106/discussion-between-anthony-and-jonas-schulze\">continue this discussion in chat</a>."}, {"owner": {"reputation": 186, "user_id": 3768043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2549a3109b6cb7912d125672e15cf7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas-schulze", "link": "https://stackoverflow.com/users/3768043/jonas-schulze"}, "edited": false, "score": 0, "creation_date": 1525112729, "post_id": 50105319, "comment_id": 87229514, "body": "No it doesn&#39;t pass. I get the same error. RE the stubbing: as said above, I am not using <code>rspec-mocks</code> but a different framework: <code>webmock</code>."}, {"owner": {"reputation": 186, "user_id": 3768043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2549a3109b6cb7912d125672e15cf7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas-schulze", "link": "https://stackoverflow.com/users/3768043/jonas-schulze"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1525113788, "post_id": 50105319, "comment_id": 87229974, "body": "@engineersmnky <code>it { subject.expects(:foo).never; subject.foo; puts subject.class.name }</code> puts <code>String</code> for me. Adding a <code>subject { &#39;something&#39; }</code> to the second example does not change anything for me."}, {"owner": {"reputation": 186, "user_id": 3768043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2549a3109b6cb7912d125672e15cf7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas-schulze", "link": "https://stackoverflow.com/users/3768043/jonas-schulze"}, "edited": false, "score": 0, "creation_date": 1525114204, "post_id": 50105319, "comment_id": 87230165, "body": "Yes, sorry, I am using <code>mocha</code>. Are you able to reproduce my errors?"}], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 3768043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2549a3109b6cb7912d125672e15cf7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas-schulze", "link": "https://stackoverflow.com/users/3768043/jonas-schulze"}, "edited": false, "score": 0, "creation_date": 1525117339, "post_id": 50106953, "comment_id": 87231583, "body": "Thanks for the answer! Unfortunately my problem still isn&#39;t solved. I updated my question (update 3). I would be pleased if you could take a look, again."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 186, "user_id": 3768043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2549a3109b6cb7912d125672e15cf7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas-schulze", "link": "https://stackoverflow.com/users/3768043/jonas-schulze"}, "edited": false, "score": 0, "creation_date": 1525118263, "post_id": 50106953, "comment_id": 87231986, "body": "@jonas-schulze as I described the stub intercepts the call to the receiver so <code>subject</code> never actually receives <code>foo</code> (thus the test passes) if you must test that functionality you should do so in isolation away from the stubbed <code>foo</code>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 186, "user_id": 3768043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2549a3109b6cb7912d125672e15cf7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas-schulze", "link": "https://stackoverflow.com/users/3768043/jonas-schulze"}, "edited": false, "score": 0, "creation_date": 1525118766, "post_id": 50106953, "comment_id": 87232195, "body": "@jonas-schulze I have added an example that is as clean as I can possibly represent this &quot;hiding&quot; feature"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 4, "last_activity_date": 1525181560, "last_edit_date": 1525181560, "creation_date": 1525116479, "answer_id": 50106953, "question_id": 50105319, "link": "https://stackoverflow.com/questions/50105319/rails-rspec-undefined-method-receive-for-rspecexamplegroups/50106953#50106953", "title": "Rails rspec undefined method `receive&#39; for #&lt;RSpec::ExampleGroups::", "body": "<p>Okay so there are 2 problems here. First is you are trying to use rspec expectations syntax with <code>mocha</code> as your mocking frame work. This causes the:</p>\n\n<pre><code>undefined method `receive' for #&lt;RSpec::ExampleGroups::Something:0x0000000010391588&gt;\n</code></pre>\n\n<p>Error because <code>mocha</code> does not know about <code>receive</code>. The syntax for <code>mocha</code> should be: </p>\n\n<pre><code>it { expects(:foo).never }  \n</code></pre>\n\n<p>Your next issue is the before block is stubbing <code>foo</code> so it never actually reaches the receiver. So your second case passes because <code>subject</code> never actually receives <code>foo</code> because the stubbing intercepts the call.  </p>\n\n<p>Example: </p>\n\n<pre><code>require 'rspec'\nrequire 'mocha'\n\nRSpec.configure do |config|\n  config.mock_with :mocha\nend\n\ndef stub_obj(obj,method_list)\n  Class.new(SimpleDelegator) do \n      method_list.each do |k,v| \n          define_method(k) {v}\n      end\n  end.new(obj)\nend\n\nRSpec.describe 'something' do\n\n  subject {mock('subject')}\n  #passes \n  it { expects(:foo).never }\n  # fails \n  it { subject.expects(:foo).never; subject.foo }\n  # passes \n  it 'can hide from foo' do \n    subject.stubs(:foo)\n    subject.expects(:foo).never\n    subject.foo\n  end\n\n  context 'kind of like this' do\n    # passes\n    it 'hides with a stubbed method' do\n      stubber = stub_obj(subject, foo: 'bar')\n      subject.expects(:foo).never\n      stubber.foo\n    end\n    # fails \n    it 'cannot hide from a non-stubbed method' do\n      stubber = stub_obj(subject, foo: 'bar')\n      subject.expects(:bar).never\n      stubber.bar\n    end\n  end\nend\n</code></pre>\n\n<p>Here is the implementation of <a href=\"http://gofreerange.com/mocha/docs/Mocha/ObjectMethods.html#stubs-instance_method\" rel=\"nofollow noreferrer\"><code>Object#stubs</code></a> if you are interested and while it does a bit more than my example (<code>#stub_obj</code>) through a <code>Mocha::Mockery</code> object the concept is the same.</p>\n"}], "owner": {"reputation": 186, "user_id": 3768043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2549a3109b6cb7912d125672e15cf7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas-schulze", "link": "https://stackoverflow.com/users/3768043/jonas-schulze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1107, "favorite_count": 0, "accepted_answer_id": 50106953, "answer_count": 1, "score": 1, "last_activity_date": 1610403573, "creation_date": 1525108949, "last_edit_date": 1610403573, "question_id": 50105319, "link": "https://stackoverflow.com/questions/50105319/rails-rspec-undefined-method-receive-for-rspecexamplegroups", "title": "Rails rspec undefined method `receive&#39; for #&lt;RSpec::ExampleGroups::", "body": "<p>I want to test that some instance is not receiving a specific method call. Trying to</p>\n\n<pre><code>RSpec.describe 'something' do\n  before { subject.stubs(foo: 'bar') }\n  it { is_expected.to_not receive(:foo) }\nend\n</code></pre>\n\n<p>gives me</p>\n\n<pre><code>Failure/Error: it { is_expected.to_not receive(:foo) }\n\nNoMethodError:\n  undefined method `receive' for #&lt;RSpec::ExampleGroups::Something:0x0000000010391588&gt;\n</code></pre>\n\n<p>and trying to</p>\n\n<pre><code>RSpec.describe 'something else' do\n  before { subject.stubs(foo: 42) }\n  it { subject.expects(:foo).never; subject.foo }\nend\n</code></pre>\n\n<p>passes. What am I doing wrong?</p>\n\n<p>I was directed to the current not-working solution by <a href=\"https://stackoverflow.com/questions/38054147/rails-rspec-undefined-method-receive-message-for-rspecexamplegroups#38054400\">Rails rspec undefined method `receive_message&#39; for #&lt;RSpec::ExampleGroups::</a> and I am using</p>\n\n<pre><code>RSpec 3.7\n  - rspec-core 3.7.1\n  - rspec-expectations 3.7.0\n  - rspec-mocks 3.7.0\n  - rspec-support 3.7.1\n</code></pre>\n\n<p>Update 1: I am using <code>webmock</code> instead of <code>rspec-mocks</code>.</p>\n\n<p>Update 2: I am using <code>webmock</code> and <code>mocha</code>.</p>\n\n<p>Update 3: Thanks for all the explanations, @engineersmnky! Unfortunately, for my specific use case, I still need to stub the method. Why is this one still passing?</p>\n\n<pre><code>require 'rspec'\nrequire 'mocha'\n\nRSpec.configure do |config|\n  config.mock_with :mocha\nend\n\nRSpec.describe 'something' do\n  # passes\n  it 'can hide from foo' do \n    subject.stubs(:foo)\n    expects(:foo).never\n    subject.foo\n  end\nend\n</code></pre>\n\n<p>The difference is that I tried to express that I expect the signal <code>:foo</code> never to be sent.</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 4800, "user_id": 46871, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/H7vPm.jpg?s=128&g=1", "display_name": "tlehman", "link": "https://stackoverflow.com/users/46871/tlehman"}, "is_accepted": false, "score": 0, "last_activity_date": 1525108718, "creation_date": 1525108718, "answer_id": 50105261, "question_id": 50105035, "link": "https://stackoverflow.com/questions/50105035/how-do-i-match-a-string-at-the-beginning-and-the-end-with-regular-expressions/50105261#50105261", "title": "How do I match a string at the beginning and the end with regular expressions", "body": "<p>This worked for me: </p>\n\n<pre><code>irb(main):009:0&gt; \"Oracle Enterprise Linux 5-X86_64 9\".match(/^(Oracle )[^\\d]+(\\d+).*(\\d+$)/i)\n\n=&gt; #&lt;MatchData \"Oracle Enterprise Linux 5-X86_64 9\" 1:\"Oracle \" 2:\"5\" 3:\"9\"&gt;\n\n(Oracle )[^\\d]+(\\d+).*(\\d+$)\n</code></pre>\n\n<p><img src=\"https://www.debuggex.com/i/7RvX-1C4p_qlmFEB.png\" alt=\"Regular expression visualization\"></p>\n\n<p><a href=\"https://www.debuggex.com/r/7RvX-1C4p_qlmFEB\" rel=\"nofollow noreferrer\">Debuggex Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1525109938, "last_edit_date": 1525109938, "creation_date": 1525108778, "answer_id": 50105278, "question_id": 50105035, "link": "https://stackoverflow.com/questions/50105035/how-do-i-match-a-string-at-the-beginning-and-the-end-with-regular-expressions/50105278#50105278", "title": "How do I match a string at the beginning and the end with regular expressions", "body": "<p>For</p>\n\n<pre><code>str = \"Oracle Enterprise Linux 5-X86_64 9\"\n</code></pre>\n\n<p>you said that</p>\n\n<pre><code>r = /oracle[ a-z]* ([0-9])(?:.* )*?([0-9])$/i\n</code></pre>\n\n<p>\"matches the entire string\" (I added <code>i</code> at the end). As</p>\n\n<pre><code>str[r]\n  #=&gt; \"Oracle Enterprise Linux 5-X86_64 9\"\n</code></pre>\n\n<p>we see that is true, but what we want is the contents of the capture groups.</p>\n\n<pre><code>$1 #=&gt; \"5\"\n$2 #=&gt; \"9\"    \n</code></pre>\n\n<p>As you see, you've simply neglected to capture the word at the beginning. You therefore may write the regex thusly. (I've made a few minor refinements.)</p>\n\n<pre><code>r = /\n    (\\p{L}+)  # match one or more letters in capture group 1\n    \\D*       # match zero or more characters other than digits\n    (\\d)      # match a digit in capture group 2\n    .+        # match one or more characters\n    (\\d+)     # match one or more digits in capture group 3\n    \\z        # match the end of the string\n    /x        # free-spacing regex definition mode\n\nstr.match(r)\n$1 #=&gt; \"Oracle\"\n$2 #=&gt; \"5\"\n$3 #=&gt; \"9\"\n</code></pre>\n\n<p><p></p>The method <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-scan\" rel=\"nofollow noreferrer\">String#scan</a> provides a better way to extract the desired strings. (See the doc for how the method treats capture groups.)</p>\n\n<pre><code>str.scan(r).first\n  #=&gt; [\"Oracle\", \"5\", \"9\"]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7331448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c804f14de8d0aa925e8099a34c20088?s=128&d=identicon&r=PG&f=1", "display_name": "user7331448", "link": "https://stackoverflow.com/users/7331448/user7331448"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1525109938, "creation_date": 1525107776, "last_edit_date": 1525108753, "question_id": 50105035, "link": "https://stackoverflow.com/questions/50105035/how-do-i-match-a-string-at-the-beginning-and-the-end-with-regular-expressions", "title": "How do I match a string at the beginning and the end with regular expressions", "body": "<p>I am trying to match various forms of writing operating system names. I want to match a string at the beginning, the first number, and, if the last two characters are \" \\d\", grab that too. \nFor example, given the string \"Oracle Enterprise Linux 5-X86_64 9\", I want to match \"Oracle\", \"5\", and \"9\".\nI have tried:</p>\n\n<p><code>oracle[ a-z]* ([0-9])(?:.* )*?([0-9])$</code> but that matches the entire string</p>\n\n<p><code>oracle[ a-z]* ([0-9])(?:.)*?([0-9])$</code> but this too matches everything</p>\n\n<p><code>oracle[ a-z]* ([0-9]).*?( [0-9])$</code> same result</p>\n\n<p>Why is the \"$\" not forcing it to match the string I want? </p>\n"}, {"tags": ["ruby", "amazon-web-services", "authentication", "amazon-s3", "query-parameters"], "comments": [{"owner": {"reputation": 641, "user_id": 8267764, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DTJj4AbHIQg/AAAAAAAAAAI/AAAAAAAAE20/uATIeLKnpvU/photo.jpg?sz=128", "display_name": "Joaqu&#237;n Bucca", "link": "https://stackoverflow.com/users/8267764/joaqu%c3%adn-bucca"}, "edited": false, "score": 0, "creation_date": 1525108849, "post_id": 50103727, "comment_id": 87227724, "body": "where are you getting the access key and secret? If you&#39;re getting them from session remember to add the session token"}, {"owner": {"reputation": 308, "user_id": 6755434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f83a80722bd7f3c61879bc28c79d81?s=128&d=identicon&r=PG", "display_name": "Sam H.", "link": "https://stackoverflow.com/users/6755434/sam-h"}, "reply_to_user": {"reputation": 641, "user_id": 8267764, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DTJj4AbHIQg/AAAAAAAAAAI/AAAAAAAAE20/uATIeLKnpvU/photo.jpg?sz=128", "display_name": "Joaqu&#237;n Bucca", "link": "https://stackoverflow.com/users/8267764/joaqu%c3%adn-bucca"}, "edited": false, "score": 0, "creation_date": 1525108967, "post_id": 50103727, "comment_id": 87227771, "body": "Those two are coming from my .env file that holds my credential information."}, {"owner": {"reputation": 372, "user_id": 3361058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHDJG.jpg?s=128&g=1", "display_name": "Hector Martinez", "link": "https://stackoverflow.com/users/3361058/hector-martinez"}, "edited": false, "score": 0, "creation_date": 1525144152, "post_id": 50103727, "comment_id": 87238982, "body": "Do you have the error on running the code or with the generated URLs? If it is runningthe code you should try generating new access and secret keys for the user and use them. Regards,"}, {"owner": {"reputation": 308, "user_id": 6755434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f83a80722bd7f3c61879bc28c79d81?s=128&d=identicon&r=PG", "display_name": "Sam H.", "link": "https://stackoverflow.com/users/6755434/sam-h"}, "edited": false, "score": 0, "creation_date": 1525144691, "post_id": 50103727, "comment_id": 87239058, "body": "The error is produced when I go to s3 link and trying to do a GET request to download it. So it appears there is a piece of the code amazon is doing differently than me."}, {"owner": {"reputation": 372, "user_id": 3361058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHDJG.jpg?s=128&g=1", "display_name": "Hector Martinez", "link": "https://stackoverflow.com/users/3361058/hector-martinez"}, "edited": false, "score": 0, "creation_date": 1525146254, "post_id": 50103727, "comment_id": 87239348, "body": "i have had a simmilar issue before and the reason was I creating the files path wrong. Can you share a generated URL or corfirm your files and folders are correct?"}, {"owner": {"reputation": 797, "user_id": 2732674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FuD4D.jpg?s=128&g=1", "display_name": "Varun Chandak", "link": "https://stackoverflow.com/users/2732674/varun-chandak"}, "edited": false, "score": 0, "creation_date": 1525152344, "post_id": 50103727, "comment_id": 87240616, "body": "For me, it was a time sync issue, and what worked was to sync it up using ntpdate command: <code>sudo ntpdate -u in.pool.ntp.org</code>"}, {"owner": {"reputation": 308, "user_id": 6755434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f83a80722bd7f3c61879bc28c79d81?s=128&d=identicon&r=PG", "display_name": "Sam H.", "link": "https://stackoverflow.com/users/6755434/sam-h"}, "reply_to_user": {"reputation": 372, "user_id": 3361058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHDJG.jpg?s=128&g=1", "display_name": "Hector Martinez", "link": "https://stackoverflow.com/users/3361058/hector-martinez"}, "edited": false, "score": 0, "creation_date": 1525153570, "post_id": 50103727, "comment_id": 87240895, "body": "@HectorMartinez An output of the url and appended parameters are <code>https:&#47;&#47;s3.us-east-2.amazonaws.com&#47;myapp.com&#47;file.txt?X-Amz-&zwnj;&#8203;Algorithm=AWS4-HMAC-&zwnj;&#8203;SHA256&amp;X-Amz-Credent&zwnj;&#8203;ial=AKL97DF987EXAMPL&zwnj;&#8203;E%2F20180501%2Fus-ea&zwnj;&#8203;st-2%2Fs3%2Faws4_req&zwnj;&#8203;uest&amp;X-Amz-Date=2018&zwnj;&#8203;0501T054328Z&amp;X-Amz-E&zwnj;&#8203;xpires=10000&amp;X-Amz-C&zwnj;&#8203;ontent-Sha256=UNSIGN&zwnj;&#8203;ED-PAYLOAD&amp;X-Amz-Sig&zwnj;&#8203;nedHeaders=host;x-am&zwnj;&#8203;z-algorithm;x-amz-co&zwnj;&#8203;ntent-sha256;x-amz-c&zwnj;&#8203;redential;x-amz-date&zwnj;&#8203;;x-amz-expires;x-amz&zwnj;&#8203;-signedheaders&amp;X-Amz&zwnj;&#8203;-Signature=d7864930f&zwnj;&#8203;3df332142d80a5d3b96a&zwnj;&#8203;f8bd3b02c44ea91f7688&zwnj;&#8203;866c02adfd5a7df</code>"}, {"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1525190012, "post_id": 50103727, "comment_id": 87256613, "body": "The word &quot;canonical&quot; in <code>canonical_query_string</code> refers primarily to the fact that the parameters need to be sorted. <code>&quot;&amp;X-Amz-Expires=#{EXPIRES}&quot; + &quot;&amp;X-Amz-Content-Sha256=#{payload_hash}&quot;</code> voilates this requirement. <code>X-Amz-Content-Sha256</code> needs to be before <code>X-Amz-Credential</code>... but in fact I suspect this shouldn&#39;t need to be included in the query string at all, since you&#39;re sending it as a header."}, {"owner": {"reputation": 372, "user_id": 3361058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHDJG.jpg?s=128&g=1", "display_name": "Hector Martinez", "link": "https://stackoverflow.com/users/3361058/hector-martinez"}, "reply_to_user": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1525199015, "post_id": 50103727, "comment_id": 87261243, "body": "@Michael-sqlbot I think HOST should be some like &quot;myapp.com.s3.amazonaws.com&quot;, other things to consider in your example is the file called &quot;file.txt&quot;, Is it in the root of the bucket &quot;myapp.com&quot;?"}, {"owner": {"reputation": 308, "user_id": 6755434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f83a80722bd7f3c61879bc28c79d81?s=128&d=identicon&r=PG", "display_name": "Sam H.", "link": "https://stackoverflow.com/users/6755434/sam-h"}, "reply_to_user": {"reputation": 372, "user_id": 3361058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHDJG.jpg?s=128&g=1", "display_name": "Hector Martinez", "link": "https://stackoverflow.com/users/3361058/hector-martinez"}, "edited": false, "score": 0, "creation_date": 1525200561, "post_id": 50103727, "comment_id": 87262057, "body": "@HectorMartinez If I name the HOST with the bucket name first, I lose HTTPS Protocol. And the file is also located in the root directory of the bucket."}, {"owner": {"reputation": 308, "user_id": 6755434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f83a80722bd7f3c61879bc28c79d81?s=128&d=identicon&r=PG", "display_name": "Sam H.", "link": "https://stackoverflow.com/users/6755434/sam-h"}, "reply_to_user": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1525200724, "post_id": 50103727, "comment_id": 87262146, "body": "@Michael-sqlbot Thanks for catching the Amz-Content. I changed that to be in the right order and it also has the same result. Amazon for their example on the SignHeader param in the URL just has <code>X-Amz-SignedHeaders=host</code>. So I think that may be what&#39;s throwing things off. I am also not sure if AWS is adding a content-type on their end to calculate it as well."}, {"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1525205691, "post_id": 50103727, "comment_id": 87264438, "body": "@SamH yes, query string parameters != headers.  If you are generating a signed URL for a <code>GET</code> request, <code>X-Amz-SignedHeaders=host</code> is correct.  I overlooked that this code was specifically for <code>GET</code> URLs.  There is no <code>Content-Type</code> <i>request</i> header in a <code>GET</code> request.  You only need to be concerned with the actual request.  Nothing is implicitly added/expected."}, {"owner": {"reputation": 308, "user_id": 6755434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f83a80722bd7f3c61879bc28c79d81?s=128&d=identicon&r=PG", "display_name": "Sam H.", "link": "https://stackoverflow.com/users/6755434/sam-h"}, "reply_to_user": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1525205931, "post_id": 50103727, "comment_id": 87264546, "body": "@Michael-sqlbot I originally included them because of their documentation saying that it needed to be, did I misunderstand it? <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-query-string-auth.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AmazonS3/latest/API/&hellip;</a> <code>The Canonical Query String must include all the query parameters from the preceding table except for X-Amz-Signature.  Canonical Headers must include the HTTP host header. If you plan to include any of the x-amz-* headers, these headers must also be added for signature calculation. You can optionally add all other headers that you plan to include in your request.</code>"}, {"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1525206857, "post_id": 50103727, "comment_id": 87264969, "body": "<i>&quot;If you plan to include any of the <code>x-amz-*</code> headers&quot;</i>... you aren&#39;t going to be sending any <code>x-amz-*</code> <b>headers</b> with a <code>GET</code> request.  Sorry for repeating myself, but this is what I meant when I said the query string parameters are not headers."}, {"owner": {"reputation": 308, "user_id": 6755434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f83a80722bd7f3c61879bc28c79d81?s=128&d=identicon&r=PG", "display_name": "Sam H.", "link": "https://stackoverflow.com/users/6755434/sam-h"}, "reply_to_user": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1525206969, "post_id": 50103727, "comment_id": 87265023, "body": "@Michael-sqlbot thanks I&#39;ll try it that way. I understood it as even though they are not &quot;technically headers&quot;, they are referring to them as &quot;headers&quot; because these would normally be the headers in a non-get request."}, {"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1525207024, "post_id": 50103727, "comment_id": 87265049, "body": "Note that if you try to use your signed URL and get <code>SignatureDoesNotMatch</code>, right-click and view source and you can see exactly what the canonical request and string-to-sign for a given signed URL should look like."}, {"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1525207091, "post_id": 50103727, "comment_id": 87265074, "body": "That is a very understandable assumption, but incorrect."}], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 6755434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f83a80722bd7f3c61879bc28c79d81?s=128&d=identicon&r=PG", "display_name": "Sam H.", "link": "https://stackoverflow.com/users/6755434/sam-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1525233399, "last_edit_date": 1525233399, "creation_date": 1525233092, "answer_id": 50126893, "question_id": 50103727, "link": "https://stackoverflow.com/questions/50103727/signaturedoesnotmatch-query-string-parameters-aws-signature-version-4/50126893#50126893", "title": "SignatureDoesNotMatch - Query String Parameters (AWS Signature Version 4)", "body": "<p>I could not figure out what was wrong with my above code snippet, but I was able to find a few ways of accomplishing what I needed done.</p>\n\n<h1>1.</h1>\n\n<p>Add in Amazon's Ruby SDK gem.</p>\n\n<pre><code>gem 'aws-sdk-s3', '~&gt; 1'\n</code></pre>\n\n<p>And then create a module that uses it.</p>\n\n<pre><code>module AwsPresignUrl\n  extend self\n  AWS_CLIENT = Aws::S3::Client.new(region: 'us-east-2', access_key_id: ENV.fetch(\"AWS_ACCESS_KEY_ID\"), secret_access_key: ENV.fetch(\"AWS_SECRET_ACCESS_KEY\"))\n  S3 = Aws::S3::Resource.new(client: AWS_CLIENT)\n  BUCKET = S3.bucket(ENV.fetch(\"S3_BUCKET_NAME\"))\n\n  def presign_url(path: \"/\")\n    obj = BUCKET.object(path)\n    url = obj.presigned_url(:get, expires_in: 60)\n  end\nend\n</code></pre>\n\n<h1>2.</h1>\n\n<p>I was actually using CarrierWave for file uploads and had overlooked that there was a built in method to doing same functionality I wanted.</p>\n\n<p>In my initializer for it, I just had to comment out a line and uncomment another.</p>\n\n<pre><code># config.aws_acl    = 'public-read'\nconfig.aws_authenticated_url_expiration = 60\n</code></pre>\n\n<p>After doing both of these, I ended up going with the second option since the S3 gem is a dependency of the CarrierWave AWS gem.</p>\n"}], "owner": {"reputation": 308, "user_id": 6755434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f83a80722bd7f3c61879bc28c79d81?s=128&d=identicon&r=PG", "display_name": "Sam H.", "link": "https://stackoverflow.com/users/6755434/sam-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 513, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1525233399, "creation_date": 1525102421, "last_edit_date": 1525139944, "question_id": 50103727, "link": "https://stackoverflow.com/questions/50103727/signaturedoesnotmatch-query-string-parameters-aws-signature-version-4", "title": "SignatureDoesNotMatch - Query String Parameters (AWS Signature Version 4)", "body": "<p>I am using AWS Signature Version 4 to pre sign URL for GET requests. I had the entire module working for the sample code AWS had on their documentation. When I tried using it on my own s3 bucket (after changing all the example values to my real values), it gave me a <code>SignatureDoesNotMatch</code> error. I have been trying countless hours to see what I am missing or doing wrong in my code. I am sure it is something miniscule but I cannot catch the reason why this is calculating a different signature than AWS's.</p>\n\n<p>The parameters will be appending to the end of my GET requests as the return statement submits them back (and not sent through the headers in the request).</p>\n\n<p>Here is the module I created.</p>\n\n<pre><code>require 'openssl'\n\nmodule AwsPresignUrl\n  extend self\n  SECRET_KEY = ENV.fetch(\"AWS_SECRET_ACCESS_KEY\")\n  ACCESS_KEY = ENV.fetch(\"AWS_ACCESS_KEY_ID\")\n  METHOD = \"GET\"\n  REGION = \"us-east-2\"\n  EXPIRES = 10000\n  HOST = \"s3.us-east-2.amazonaws.com\"\n  SERVICE = \"s3\"\n\n  def get_signature_key(key, dateStamp, regionName, serviceName)\n    kDate    = OpenSSL::HMAC.digest('sha256', \"AWS4\" + key, dateStamp)\n    kRegion  = OpenSSL::HMAC.digest('sha256', kDate, regionName)\n    kService = OpenSSL::HMAC.digest('sha256', kRegion, serviceName)\n    kSigning = OpenSSL::HMAC.digest('sha256', kService, \"aws4_request\")\n  end\n\n  def generate_signed_url(path: \"/\")\n    t = Time.now.utc\n    amz_date = t.strftime('%Y%m%dT%H%M%SZ')\n    date_stamp = t.strftime('%Y%m%d')\n    credential_scope = [date_stamp, REGION, SERVICE, 'aws4_request'].join(\"/\")\n    amz_credential = uri_encode(path: [ACCESS_KEY, credential_scope].join('/'))\n    algorithm = 'AWS4-HMAC-SHA256'\n\n    # Task 1: Create a Canonical Request For Signature Version 4\n    # http://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\n    # payload_hash = OpenSSL::Digest.new(\"sha256\").hexdigest(\"\")\n    canonical_uri = uri_encode(path: path)\n    signed_headers = \"host;x-amz-algorithm;x-amz-content-sha256;x-amz-credential;x-amz-date;x-amz-expires;x-amz-signedheaders\"\n    payload_hash = \"UNSIGNED-PAYLOAD\"\n    canonical_headers = [\"host:\" + HOST, \n                         \"x-amz-algorithm:\" + algorithm,\n                         \"x-amz-content-sha256:\" + payload_hash, \n                         \"x-amz-credential:\" + amz_credential,\n                         \"x-amz-date:\" + amz_date,\n                         \"x-amz-expires:\" + EXPIRES.to_s,\n                         \"x-amz-signedheaders:\" + signed_headers\n                        ].join(\"\\n\") + \"\\n\"\n    canonical_query_string = \"X-Amz-Algorithm=#{algorithm}\" +\n                             \"&amp;X-Amz-Credential=#{amz_credential}\" +\n                             \"&amp;X-Amz-Date=#{amz_date}\" + \n                             \"&amp;X-Amz-Expires=#{EXPIRES}\" +\n                             \"&amp;X-Amz-Content-Sha256=#{payload_hash}\" +\n                             \"&amp;X-Amz-SignedHeaders=#{signed_headers}\"\n\n    canonical_request = [METHOD, canonical_uri, canonical_query_string, canonical_headers,\n                         signed_headers, payload_hash].join(\"\\n\")\n\n    canonical_request_digest_hash = OpenSSL::Digest.new(\"sha256\").hexdigest(canonical_request)\n\n    # Task 2: Create a String to Sign for Signature Version 4\n    # http://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\n    string_to_sign = [algorithm, amz_date, credential_scope, canonical_request_digest_hash].join(\"\\n\")\n\n    # Task 3: Calculate the AWS Signature Version 4\n    # http://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n    signing_key = get_signature_key(SECRET_KEY, date_stamp, REGION, SERVICE)\n\n    # Task 4: Add the Signing Information to the Request\n    # http://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n    signature = OpenSSL::HMAC.hexdigest('sha256', signing_key, string_to_sign)\n\n    return  \"?X-Amz-Algorithm=#{algorithm}\" +\n            \"&amp;X-Amz-Credential=#{amz_credential}\" +\n            \"&amp;X-Amz-Date=#{amz_date}\" + \n            \"&amp;X-Amz-Expires=#{EXPIRES}\" +\n            \"&amp;X-Amz-Content-Sha256=#{payload_hash}\" +\n            \"&amp;X-Amz-SignedHeaders=#{signed_headers}\" +\n            \"&amp;X-Amz-Signature=#{signature}\"\n  end\n\n  def uri_encode(path:, encode_slash: true)\n    encoded_uri = \"\"\n    path.chars.each do |ch|\n      if ((ch &gt;= 'A' &amp;&amp; ch &lt;= 'Z') || (ch &gt;= 'a' &amp;&amp; ch &lt;= 'z') || (ch &gt;= '0' &amp;&amp; ch &lt;= '9') || ch == '_' || ch == '-' || ch == '~' || ch == '.')\n        encoded_uri &lt;&lt; ch \n      elsif (ch == '/')\n        encoded_uri &lt;&lt; (encode_slash ? \"%2F\" : ch)\n      else \n        encoded_uri &lt;&lt; (ch.unpack('U'*ch.length).collect{|x| x.to_s 16})\n      end \n    end\n    encoded_uri\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 309, "user_id": 8539925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3FIuP.jpg?s=128&g=1", "display_name": "Omar Donnadieu Mercado", "link": "https://stackoverflow.com/users/8539925/omar-donnadieu-mercado"}, "is_accepted": false, "score": 1, "last_activity_date": 1525109598, "last_edit_date": 1525109598, "creation_date": 1525109295, "answer_id": 50105407, "question_id": 50102978, "link": "https://stackoverflow.com/questions/50102978/how-to-structure-two-user-model-one-for-public-and-another-for-admin-in-rails/50105407#50105407", "title": "How to structure Two User Model (One for Public and another for Admin) in rails application through Devise", "body": "<p>Manohar I think it's unnecessary to create 2 models. You could just generate the user model with Devise then just a migration the following way:</p>\n\n<pre><code>class AddAdminToUsers &lt; ActiveRecord::Migration\n   def change\n      add_column :users, :admin, :boolean, default: false\n   end\nend\n</code></pre>\n\n<p>Which basically will create a flag allowing you to do something like this:</p>\n\n<pre><code>if current_user.admin?\n\nend\n</code></pre>\n\n<p>If the page could potentially not have a current_user set then:</p>\n\n<pre><code>if current_user.try(:admin?)\n\nend\n</code></pre>\n\n<p>Now to access the controllers from Devise this is the link:</p>\n\n<p><a href=\"https://github.com/plataformatec/devise/tree/master/app/controllers/devise\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/tree/master/app/controllers/devise</a></p>\n\n<p>To set modify or extend the functionality of the controllers just create a devise directory within controllers and place the needed controller files within from devise.</p>\n\n<p>This is a code example of one my apps:</p>\n\n<pre><code># registrations_controller.rb\n\nclass MyDevise::RegistrationsController &lt; Devise::RegistrationsController \n\n   def new\n      super\n   end\n\n   def create\n      super\n   end\n\n   def update\n      super\n   end\n end\n</code></pre>\n\n<p>I just created a folder named my_devise inside my controller's folder once you have the code above you can just add functionality to the methods as you wish.</p>\n"}], "owner": {"reputation": 11, "user_id": 4394153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e048f057591644b8eb874ca3eed7a31?s=128&d=identicon&r=PG&f=1", "display_name": "Manohar", "link": "https://stackoverflow.com/users/4394153/manohar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525127635, "creation_date": 1525099726, "last_edit_date": 1525127635, "question_id": 50102978, "link": "https://stackoverflow.com/questions/50102978/how-to-structure-two-user-model-one-for-public-and-another-for-admin-in-rails", "title": "How to structure Two User Model (One for Public and another for Admin) in rails application through Devise", "body": "<p>I have Rails application for Book shop (e-commerce). I have two user Model one for Admin and One for Customer. I want to show all user that admin can see through admin panel and also I want to see Customer show page. I have used devise for both type of user. I am facing problems because devise generate all sign up and sign in logic automatically then how can i redirect that to some where in my app view not in root. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1525097396, "post_id": 50102032, "comment_id": 87221333, "body": "<i>&quot;It looks strange to me&quot;</i> - what would you expect the result to be in the second case?"}, {"owner": {"reputation": 107, "user_id": 8774173, "user_type": "registered", "profile_image": "https://graph.facebook.com/1867733163540531/picture?type=large", "display_name": "Kenta Nakajima", "link": "https://stackoverflow.com/users/8774173/kenta-nakajima"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1525098799, "post_id": 50102032, "comment_id": 87222224, "body": "The <code>prepend</code> keyword indicates that the mixined module (M2) is prior to the owner (Base), so it is expected to be <code>[M3, M2, Base, M3, M1]</code> or <code>[M3, M2, Base, M1]</code> or <code>[M2, Base, M3, M1]</code> in the second case. I thought it&#39;s strange in that the former and the latter example is exactly the same output."}], "answers": [{"tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": false, "score": 2, "last_activity_date": 1525163173, "last_edit_date": 1525163173, "creation_date": 1525100664, "answer_id": 50103238, "question_id": 50102032, "link": "https://stackoverflow.com/questions/50102032/how-does-ruby-solve-the-method-lookup-in-diamond-mixin/50103238#50103238", "title": "How does Ruby solve the method lookup in &#39;diamond&#39; mixin?", "body": "<p>There's a couple of things that might help here. One is to recall the default behaviour of <code>include</code> and <code>prepend</code> is that that they only add the module if it has not already been added to this module or one of its ancestors.</p>\n\n<p>Next, is to look at what happens as 2 separate steps rather than performing the <code>include M1</code> and <code>prepend M2</code> all in one go.</p>\n\n<p>With your module definitions as in the question, if we just have:</p>\n\n<pre><code>class Base\n  include M1\nend\n</code></pre>\n\n<p><code>Base.ancestors</code> is now <code>[Base, M3, M1, Object, PP::ObjectMixin, Kernel, BasicObject]</code>, which is probably what you'd expect.</p>\n\n<p>Next, if we do</p>\n\n<pre><code>class Base\n  prepend M2\nend\n</code></pre>\n\n<p><code>Base.ancestors</code> is now <code>[Base, M3, M2, M1, Object, PP::ObjectMixin, Kernel, BasicObject]</code></p>\n\n<p>The reason is that <code>M2</code> prepends <code>M3</code> but <code>M3</code> is already in <code>Base</code>'s ancestors so <code>M3</code>'s position remains unchanged. However, because <code>M2</code> prepends <code>M3</code> this means <code>M2</code> must come <em>after</em> <code>M3</code>. The result is that <code>M2</code> appears after <code>M3</code> rather than as the first entry, even though it is being prepended in <code>Base</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 8774173, "user_type": "registered", "profile_image": "https://graph.facebook.com/1867733163540531/picture?type=large", "display_name": "Kenta Nakajima", "link": "https://stackoverflow.com/users/8774173/kenta-nakajima"}, "edited": false, "score": 0, "creation_date": 1525174899, "post_id": 50103338, "comment_id": 87248825, "body": "I see. Ancestor relations, or directions are always kept anytime we mix-in modules. I tried other cases and roughly understood. Thanks!"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1525101559, "last_edit_date": 1525101559, "creation_date": 1525101051, "answer_id": 50103338, "question_id": 50102032, "link": "https://stackoverflow.com/questions/50102032/how-does-ruby-solve-the-method-lookup-in-diamond-mixin/50103338#50103338", "title": "How does Ruby solve the method lookup in &#39;diamond&#39; mixin?", "body": "<p>My understanding is that:</p>\n\n<ul>\n<li><code>include</code> and <code>prepend</code> establishes a partial relation (ancestor relation) among the relevant modules/classes at each step, and</li>\n<li>An ancestor relation cannot be contradicted in a later step.</li>\n</ul>\n\n<p>Let us start with:</p>\n\n<pre><code>module M1; end\nmodule M2; end\nmodule M3; end\nclass Base; end\n</code></pre>\n\n<p>and follow each step. The first three steps should be trivial:</p>\n\n<pre><code>Base.ancestors\n#=&gt; [Base, Object, Kernel, BasicObject]\n\nM1.prepend M3\nM1.ancestors\n# =&gt; [M3, M1]\n\nM2.prepend M3\nM2.ancestors\n#=&gt; [M3, M2]\n</code></pre>\n\n<p>Now, your crucial first step is <code>Base.include M1</code>. This inserts the ancestors of <code>M1</code> (the whole <code>[M3, M1]</code> chunk) just to the right of <code>Base</code> before <code>Object</code>:</p>\n\n<pre><code>Base.include M1\nBase.ancestors\n#=&gt; [Base, M3, M1, Object, Kernel, BasicObject]\n</code></pre>\n\n<p>The next step is <code>Base.prepend M2</code>. This attempts to insert the ancestors of <code>M2</code> (the whole <code>[M3, M2]</code> chunk) just to the left of <code>Base</code>. But notice that that would cause a contradictory relation between <code>Base</code> and <code>M3</code>.</p>\n\n<pre><code>Base.prepend M2\nBase.ancestors\n#=&gt; Cannot be [M3, M2, Base, M3, M1, Object, Kernel, BasicObject]\n</code></pre>\n\n<p>Since it has already been established that <code>M3</code> appears on the right side of <code>Base</code>, the best it can do to place <code>[M3, M2]</code> is to place it on the right side of <code>Base</code>:</p>\n\n<pre><code>Base.prepend M2\nBase.ancestors\n#=&gt; [Base, M3, M2, M1, Object, Kernel, BasicObject]\n</code></pre>\n\n<p>It may appear that placing <code>M2</code> on the right side of <code>Base</code> contradicts the intention of <code>Base.prepend M2</code>. But that can be canceled/modified to fit on the spot, whereas an already established relation between <code>Base</code> and <code>M3</code> cannot be canceled in a later spot.</p>\n\n<p>In fact, when there is no way to satisfy the relations already established, then an error is raised:</p>\n\n<pre><code>module M4; end\nmodule M5; end\nM4.include M5\nM5.include M4 #&gt;&gt; ArgumentError: cyclic include detected\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1525103363, "last_edit_date": 1525103363, "creation_date": 1525102987, "answer_id": 50103876, "question_id": 50102032, "link": "https://stackoverflow.com/questions/50102032/how-does-ruby-solve-the-method-lookup-in-diamond-mixin/50103876#50103876", "title": "How does Ruby solve the method lookup in &#39;diamond&#39; mixin?", "body": "<p>While both existing answers here are pretty logical and explain everything great, I would also just drop a reference to the documentation:</p>\n\n<blockquote>\n  <p>[...] <strong>if this module has not already been added to mod or one of its ancestors.</strong> [...]<br>\n  \u2014\u00a0<a href=\"https://ruby-doc.org/core/Module.html#method-i-prepend_features\" rel=\"nofollow noreferrer\"><code>Module#prepend_features</code></a></p>\n</blockquote>\n\n<p>Emphasis is mine. That said, <code>prepend M</code>, as well as <code>include M</code> (and <code>extend M</code> for ancestors of the eigenclass) are all NOOP if the module is already found in the ancestors chain.</p>\n"}], "owner": {"reputation": 107, "user_id": 8774173, "user_type": "registered", "profile_image": "https://graph.facebook.com/1867733163540531/picture?type=large", "display_name": "Kenta Nakajima", "link": "https://stackoverflow.com/users/8774173/kenta-nakajima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 50103338, "answer_count": 3, "score": 1, "last_activity_date": 1525163173, "creation_date": 1525096547, "question_id": 50102032, "link": "https://stackoverflow.com/questions/50102032/how-does-ruby-solve-the-method-lookup-in-diamond-mixin", "title": "How does Ruby solve the method lookup in &#39;diamond&#39; mixin?", "body": "<p>The version of Ruby is this:</p>\n\n<pre><code>% ruby -v\nruby 2.5.0p0 (2017-12-25 revision 61468) [x86_64-darwin17]\n</code></pre>\n\n<p>I came upon the idea that what if we do mixins in the 'diamond' form in Ruby.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>module M3; end\nmodule M1\n  prepend M3\nend\n\nmodule M2\n  prepend M3\nend\n\nclass Base\n  include M1\n  include M2\nend\n\np Base.ancestors # [Base, M3, M2, M1, Object, Kernel, BasicObject]\n</code></pre>\n\n<p>The result is <code>[Base, M3, M2, M1, Object, Kernel, BasicObject]</code>.</p>\n\n<p>Even if you change mixin type of the module <code>M2</code> from <code>include</code> to <code>prepend</code> in the <code>Base</code> class, the result is the same:</p>\n\n<pre><code>module M3; end\nmodule M1\n  prepend M3\nend\n\nmodule M2\n  prepend M3\nend\n\nclass Base\n  include M1\n  prepend M2 # &lt;= change mixin type\nend\n\np Base.ancestors # [Base, M3, M2, M1, Object, Kernel, BasicObject]\n</code></pre>\n\n<p>The result is also <code>[Base, M3, M2, M1, Object, Kernel, BasicObject]</code>. It looks strange to me.</p>\n\n<p>How does Ruby solve the method lookup in 'diamond' mixin?</p>\n\n<p>Note) I have already understood the basics of method lookup in Ruby, <a href=\"https://docs.ruby-lang.org/en/trunk/syntax/refinements_rdoc.html#label-Method+Lookup\" rel=\"nofollow noreferrer\">https://docs.ruby-lang.org/en/trunk/syntax/refinements_rdoc.html#label-Method+Lookup</a>.</p>\n"}, {"tags": ["ruby", "date"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1525092602, "post_id": 50100357, "comment_id": 87218338, "body": "If today is Monday 30th April, what is the expected output?"}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1525092990, "post_id": 50100357, "comment_id": 87218574, "body": "Friday 27th April"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1525093171, "post_id": 50100357, "comment_id": 87218674, "body": "I thought Monday was supposed to go to Thursday based on <i>&quot;So, when I then land on a Tuesday, that needs to go to Friday and the Monday to Thursday&quot;</i>"}], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 0, "creation_date": 1525093187, "post_id": 50100937, "comment_id": 87218686, "body": "That simple!! Thank you"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1525093994, "post_id": 50100937, "comment_id": 87219200, "body": "A very smart solution."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1525111812, "post_id": 50100937, "comment_id": 87229091, "body": "Nice solution. Alternatively, <code>number.times { d -= d.monday? ? 3 : 1 }</code>."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 5, "last_activity_date": 1525092604, "creation_date": 1525092604, "answer_id": 50100937, "question_id": 50100357, "link": "https://stackoverflow.com/questions/50100357/calculate-dates-in-ruby/50100937#50100937", "title": "Calculate Dates in Ruby", "body": "<p>Note the use of the <code>sunday?</code> method to determine if a certain date happens to be a sunday.</p>\n\n<pre><code>require \"date\"\ndef date_calc_minus(number)\n  d = Date.today\n  number.times do\n    d -= 1\n    d -= 2 if d.sunday?\n  end\n  d\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1525117083, "creation_date": 1525117083, "answer_id": 50107100, "question_id": 50100357, "link": "https://stackoverflow.com/questions/50100357/calculate-dates-in-ruby/50107100#50107100", "title": "Calculate Dates in Ruby", "body": "<p>My solution emphasizes efficiency at the expense of simplicity. I assume the start date is a weekday.</p>\n\n<pre><code>require 'date'\n\ndef lookin_back(start_date, n)\n  days_after_monday = start_date.wday - 1\n  return start_date - n if n &lt;= days_after_monday\n  weeks, days = (n - days_after_monday).divmod(5)\n  start_date - days_after_monday - 7*weeks - (days &gt; 0 ? days + 2 : 0) \nend\n</code></pre>\n\n<p></p>\n\n<pre><code>start_date = Date.today\n  #=&gt; #&lt;Date: 2018-04-30 ((2458239j,0s,0n),+0s,2299161j)&gt;\nstart_date.wday\n  #=&gt; 1 (Monday)\n\nlookin_back(start_date, 0)\n  #=&gt; #&lt;Date: 2018-04-30 ((2458239j,0s,0n),+0s,2299161j)&gt;\nlookin_back(start_date, 1)\n  #=&gt; #&lt;Date: 2018-04-27 ((2458236j,0s,0n),+0s,2299161j)&gt;\nlookin_back(start_date, 5)\n  #=&gt; #&lt;Date: 2018-04-23 ((2458232j,0s,0n),+0s,2299161j)&gt;\nlookin_back(start_date, 6)\n  #=&gt; #&lt;Date: 2018-04-20 ((2458229j,0s,0n),+0s,2299161j)&gt;\nlookin_back(start_date, 7)\n  #=&gt; #&lt;Date: 2018-04-19 ((2458228j,0s,0n),+0s,2299161j)&gt;\nlookin_back(start_date, 11)\n  #=&gt; #&lt;Date: 2018-04-13 ((2458222j,0s,0n),+0s,2299161j)&gt;\nlookin_back(start_date, 16)\n  #=&gt; #&lt;Date: 2018-04-06 ((2458215j,0s,0n),+0s,2299161j)&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>start_date += 2\n  #=&gt; #&lt;Date: 2018-05-02 ((2458241j,0s,0n),+0s,2299161j)&gt;\nstart_date.wday\n  #=&gt; 3 (Wednesday)\n\nlookin_back(start_date, 0)\n  #=&gt; #&lt;Date: 2018-05-02 ((2458241j,0s,0n),+0s,2299161j)&gt;\nlookin_back(start_date, 1)\n  #=&gt; #&lt;Date: 2018-05-01 ((2458240j,0s,0n),+0s,2299161j)&gt;\nlookin_back(start_date, 2)\n  #=&gt; #&lt;Date: 2018-04-30 ((2458239j,0s,0n),+0s,2299161j)&gt;\nlookin_back(start_date, 3)\n  #=&gt; #&lt;Date: 2018-04-27 ((2458236j,0s,0n),+0s,2299161j)&gt;\nlookin_back(start_date, 5)\n  #=&gt; #&lt;Date: 2018-04-25 ((2458234j,0s,0n),+0s,2299161j)&gt;\nlookin_back(start_date, 10)\n  #=&gt; #&lt;Date: 2018-04-18 ((2458227j,0s,0n),+0s,2299161j)&gt;\nlookin_back(start_date, 15)\n  #=&gt; #&lt;Date: 2018-04-11 ((2458220j,0s,0n),+0s,2299161j)&gt;\nlookin_back(start_date, 12345)\n  #=&gt; #&lt;Date: 1971-01-06 ((2440958j,0s,0n),+0s,2299161j)&gt;\n</code></pre>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 50100937, "answer_count": 2, "score": 2, "last_activity_date": 1525117083, "creation_date": 1525090585, "last_edit_date": 1525092383, "question_id": 50100357, "link": "https://stackoverflow.com/questions/50100357/calculate-dates-in-ruby", "title": "Calculate Dates in Ruby", "body": "<p>I have some specific functionality to test with dates.  I've hit a stumbling block.  I need to loop backwards through 14 days from today to generate a date, but weekends must be ignored.</p>\n\n<p>Example:</p>\n\n<p>Today is Monday, going back 1 day would take me to Friday. Going back 2 days would take me to Thursday. We are always two days behind. So, when I then land on a Tuesday, that needs to go to Friday and the Monday to Thursday.  I get it working for 1 week, but the next 7 days it starts the same cycle again.</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>def date_calc_minus(number)\n\n\ndate = Date.today - number.to_i\n  day = date.strftime('%a %e %B %Y').split(' ')[0]\n\n\n  case\n    when day.include?('Sun')\n      puts day\n      calculated_date = date - 2\n    when day.include?('Sat')\n      puts day\n      calculated_date = date - 2\n    else\n      puts day\n      calculated_date = date - 2\n      if calculated_date.strftime('%a %e %B %Y').split(' ')[0].include?('Sun')\n        calculated_date = calculated_date - 2\n      elsif calculated_date.strftime('%a %e %B %Y').split(' ')[0].include?('Sat')\n        calculated_date = calculated_date - 2\n      end\n  end\n\n  calculated_date.strftime('%a %e %B %Y')\nend\n\nstart = 1\nstop = 14\nrange = start.to_i.upto(stop.to_i).to_a\n\nrange.each_with_index do |number, index|\n  puts date_calc_minus(number)\nend\n\n\n#=&gt;\n\n\n\nSun\nFri 27 April 2018\nSat\nThu 26 April 2018\nFri\nWed 25 April 2018\nThu\nTue 24 April 2018\nWed\nMon 23 April 2018\nTue\nFri 20 April 2018\nMon\nThu 19 April 2018\nSun\nFri 20 April 2018\nSat\nThu 19 April 2018\nFri\nWed 18 April 2018\nThu\nTue 17 April 2018\nWed\nMon 16 April 2018\nTue\nFri 13 April 2018\nMon\nThu 12 April 2018\n</code></pre>\n\n<p>I understand this isn't pretty but i've been looking at it too long and I've become tunnel visioned.  Is there an easy way to achieve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu-16.04", "nokogiri"], "comments": [{"owner": {"reputation": 2069, "user_id": 220292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6edcb304a03a87ddf5c68239f7d001e4?s=128&d=identicon&r=PG", "display_name": "stwienert", "link": "https://stackoverflow.com/users/220292/stwienert"}, "edited": false, "score": 0, "creation_date": 1525090395, "post_id": 50100264, "comment_id": 87217073, "body": "Did you have libgmp-dev installed on the server?"}], "answers": [{"comments": [{"owner": {"reputation": 924, "user_id": 254146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed7c1249d26547de558bb20a09a3c4b?s=128&d=identicon&r=PG", "display_name": "Vaughany", "link": "https://stackoverflow.com/users/254146/vaughany"}, "edited": false, "score": 1, "creation_date": 1587562843, "post_id": 50101840, "comment_id": 108559747, "body": "I had to run <code>bundle pristine</code> but this answer definitely pointed me in the right direction. Many thanks!"}, {"owner": {"reputation": 69, "user_id": 340490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79c801051418fa370f3a9de3124fdc0e?s=128&d=identicon&r=PG", "display_name": "Whit", "link": "https://stackoverflow.com/users/340490/whit"}, "edited": false, "score": 0, "creation_date": 1600277295, "post_id": 50101840, "comment_id": 113039904, "body": "+1 for <code>bundle pristine</code> in 2020 with an older 2.5.1 setup that kept throwing a <code>incompatible library version</code>. Tried uninstalling nokogiri and reinstalling but that didn&#39;t work where pristine did work."}], "tags": [], "owner": {"reputation": 1808, "user_id": 9184597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7875ba2d289a9f0e410a82fb7f15f03?s=128&d=identicon&r=PG&f=1", "display_name": "R.F. Nelson", "link": "https://stackoverflow.com/users/9184597/r-f-nelson"}, "is_accepted": true, "score": 4, "last_activity_date": 1525095860, "creation_date": 1525095860, "answer_id": 50101840, "question_id": 50100264, "link": "https://stackoverflow.com/questions/50100264/loaderror-incompatible-library-version-home-ubuntu-rvm-gems-ruby-2-3-1lm5/50101840#50101840", "title": "LoadError: incompatible library version - /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/nokogiri-1.8.2/lib/nokogiri/nokogiri.so", "body": "<p>You can try running <code>gem pristine --all</code> to automatically uninstall and reinstall all installed gems in the current environment. That might sort out your issue.</p>\n\n<p>If that doesn't work, try running <code>rm -rf `rvm gemdir`/bundler/gems</code> to forcibly remove all of your gems and then try another <code>bundle install</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6904153"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "accepted_answer_id": 50101840, "answer_count": 1, "score": 3, "last_activity_date": 1538418411, "creation_date": 1525090237, "last_edit_date": 1538418411, "question_id": 50100264, "link": "https://stackoverflow.com/questions/50100264/loaderror-incompatible-library-version-home-ubuntu-rvm-gems-ruby-2-3-1lm5", "title": "LoadError: incompatible library version - /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/nokogiri-1.8.2/lib/nokogiri/nokogiri.so", "body": "<p>Trying to run rake assets precompile with production mode as follows.</p>\n\n<p><code>rake assets:precompile</code></p>\n\n<p>It is working fine for ubuntu 14.04 (32 bit) and 16.06(32 bit.) But getting Load Error on 16.04(64 bit) in aws ec2.</p>\n\n<p>Please help me regarding this.</p>\n\n<p>Thanks in advance.</p>\n\n<p>Here's my full stack trace</p>\n\n<blockquote>\n  <p>rake aborted! LoadError: incompatible library version -\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/nokogiri-1.8.2/lib/nokogiri/nokogiri.so\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  <code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/nokogiri-1.8.2/lib/nokogiri.rb:32:in\n  <code>rescue in &lt;top (required)&gt;'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/nokogiri-1.8.2/lib/nokogiri.rb:28:in\n  </code>'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  <code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/loofah-2.2.2/lib/loofah.rb:3:in\n  <code>&lt;top (required)&gt;'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  </code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/rails-html-sanitizer-1.0.4/lib/rails-html-sanitizer.rb:2:in\n  </code>'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  <code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/actionview-5.0.1/lib/action_view/helpers/sanitize_helper.rb:2:in\n  <code>&lt;top (required)&gt;'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  </code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/actionview-5.0.1/lib/action_view/helpers.rb:58:in\n  </code>'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/actionview-5.0.1/lib/action_view/helpers.rb:4:in\n  <code>&lt;module:ActionView&gt;'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/actionview-5.0.1/lib/action_view/helpers.rb:3:in\n  </code>'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  <code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/actionview-5.0.1/lib/action_view/base.rb:5:in\n  <code>&lt;top (required)&gt;'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  </code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/public_activity-1.5.0/lib/public_activity/utility/view_helpers.rb:25:in\n  </code>'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/public_activity-1.5.0/lib/public_activity/utility/view_helpers.rb:2:in\n  <code>&lt;top (required)&gt;'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  </code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/public_activity-1.5.0/lib/public_activity.rb:68:in\n  </code>'\n  /home/ubuntu/learnmusicco/config/application.rb:7:in <code>&lt;top\n  (required)&gt;' /home/ubuntu/learnmusicco/Rakefile:4:in</code>'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/rake-12.3.1/exe/rake:27:in\n  `'</p>\n  \n  <p>Caused by: LoadError: cannot load such file -- nokogiri/2.3/nokogiri\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  <code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/nokogiri-1.8.2/lib/nokogiri.rb:30:in\n  <code>&lt;top (required)&gt;'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  </code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/loofah-2.2.2/lib/loofah.rb:3:in\n  </code>'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  <code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/rails-html-sanitizer-1.0.4/lib/rails-html-sanitizer.rb:2:in\n  <code>&lt;top (required)&gt;'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  </code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/actionview-5.0.1/lib/action_view/helpers/sanitize_helper.rb:2:in\n  </code>'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  <code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/actionview-5.0.1/lib/action_view/helpers.rb:58:in\n  <code>&lt;module:Helpers&gt;'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/actionview-5.0.1/lib/action_view/helpers.rb:4:in\n  </code>'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/actionview-5.0.1/lib/action_view/helpers.rb:3:in\n  <code>&lt;top (required)&gt;'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  </code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/actionview-5.0.1/lib/action_view/base.rb:5:in\n  </code>'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  <code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/public_activity-1.5.0/lib/public_activity/utility/view_helpers.rb:25:in\n  <code>&lt;module:PublicActivity&gt;'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/public_activity-1.5.0/lib/public_activity/utility/view_helpers.rb:2:in\n  </code>'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  <code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>block in require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in\n  <code>load_dependency'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in\n  </code>require'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/public_activity-1.5.0/lib/public_activity.rb:68:in\n  <code>&lt;top (required)&gt;'\n  /home/ubuntu/learnmusicco/config/application.rb:7:in</code>' /home/ubuntu/learnmusicco/Rakefile:4:in <code>&lt;top\n  (required)&gt;'\n  /home/ubuntu/.rvm/gems/ruby-2.3.1@lm5/gems/rake-12.3.1/exe/rake:27:in\n  </code>'</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "capistrano"], "comments": [{"owner": {"reputation": 2069, "user_id": 220292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6edcb304a03a87ddf5c68239f7d001e4?s=128&d=identicon&r=PG", "display_name": "stwienert", "link": "https://stackoverflow.com/users/220292/stwienert"}, "edited": false, "score": 2, "creation_date": 1525090184, "post_id": 50100214, "comment_id": 87216945, "body": "Did you follow the installation guide on <a href=\"https://github.com/oVirt/ovirt-engine-sdk-ruby\" rel=\"nofollow noreferrer\">github.com/oVirt/ovirt-engine-sdk-ruby</a>? especially installing libxml2-dev instead of just libxml2."}], "answers": [{"comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 2, "creation_date": 1557778291, "post_id": 50100837, "comment_id": 98871641, "body": "a better option is following the guide at <a href=\"https://github.com/oVirt/ovirt-engine-sdk-ruby\" rel=\"nofollow noreferrer\">github.com/oVirt/ovirt-engine-sdk-ruby</a>"}], "tags": [], "owner": {"reputation": 116, "user_id": 9066380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f127b4af4d9fc36044bb117a2d9db4?s=128&d=identicon&r=PG&f=1", "display_name": "Cdalbergue", "link": "https://stackoverflow.com/users/9066380/cdalbergue"}, "is_accepted": false, "score": 8, "last_activity_date": 1525092251, "creation_date": 1525092251, "answer_id": 50100837, "question_id": 50100214, "link": "https://stackoverflow.com/questions/50100214/capistrano-3-error-extconf-rb29in-main-the-libxml2-package-isnt-avai/50100837#50100837", "title": "Capistrano 3 error - extconf.rb:29:in `&lt;main&gt;&#39;: The &quot;libxml2&quot; package isn&#39;t available. (RuntimeError)", "body": "<p>Have you tried reinstalling the development package for xml2 ?</p>\n\n<p><code>apt-get install libxml2-dev</code></p>\n\n<p>This should work imo. Else, can you look for the library (.so) in your system and check the symlink is not broken ?</p>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1454, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1525092251, "creation_date": 1525090024, "question_id": 50100214, "link": "https://stackoverflow.com/questions/50100214/capistrano-3-error-extconf-rb29in-main-the-libxml2-package-isnt-avai", "title": "Capistrano 3 error - extconf.rb:29:in `&lt;main&gt;&#39;: The &quot;libxml2&quot; package isn&#39;t available. (RuntimeError)", "body": "<p>When I tried to deploy some new code today, I've got this error message:</p>\n\n<pre><code>  01 Warning, new version of rvm available '1.29.3', you are using older version '1.29.2'.\n  01 You can disable this warning with:    echo rvm_autoupdate_flag=0 &gt;&gt; ~/.rvmrc\n  01 You can enable  auto-update  with:    echo rvm_autoupdate_flag=2 &gt;&gt; ~/.rvmrc\n  01 Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n  01\n  01 current directory:\n  01 /home/deployer/apps/app-staging/shared/bundle/ruby/2.3.0/gems/ovirt-engine-sdk-4.2.4/ext/ovirtsdk4c\n  01 /home/deployer/.rvm/rubies/ruby-2.3.3/bin/ruby -r\n  01 ./siteconf20180429-31340-1net0o9.rb extconf.rb\n  01 checking for xml2-config... no\n  01 *** extconf.rb failed ***\n  01 Could not create Makefile due to some reason, probably lack of necessary\n  01 libraries and/or headers.  Check the mkmf.log file for more details.  You may\n  01 need configuration options.\n  01\n  01 Provided configuration options:\n  01    --with-opt-dir\n  01    --without-opt-dir\n  01    --with-opt-include\n  01    --without-opt-include=${opt-dir}/include\n  01    --with-opt-lib\n  01    --without-opt-lib=${opt-dir}/lib\n  01    --with-make-prog\n  01    --without-make-prog\n  01    --srcdir=.\n  01    --curdir\n  01    --ruby=/home/deployer/.rvm/rubies/ruby-2.3.3/bin/$(RUBY_BASE_NAME)\n  01    --with-libxml2-config\n  01    --without-libxml2-config\n  01    --with-pkg-config\n  01    --without-pkg-config\n  01 extconf.rb:29:in `&lt;main&gt;': The \"libxml2\" package isn't available. (RuntimeError)\n  01\n  01 To see why this extension failed to compile, please check the mkmf.log which can\n  01 be found here:\n  01\n  01 /home/deployer/apps/app-staging/shared/bundle/ruby/2.3.0/extensions/x86_64-linux/2.3.0/ovirt-engine-sdk-4.2.4/mkm\u2026\n  01\n  01 extconf failed, exit code 1\n  01\n  01 Gem files will remain installed in\n  01 /home/deployer/apps/app-staging/shared/bundle/ruby/2.3.0/gems/ovirt-engine-sdk-4.2.4\n  01 for inspection.\n  01 Results logged to\n  01 /home/deployer/apps/app-staging/shared/bundle/ruby/2.3.0/extensions/x86_64-linux/2.3.0/ovirt-engine-sdk-4.2.4/gem\u2026\n  01\n  01 An error occurred while installing ovirt-engine-sdk (4.2.4), and Bundler cannot\n  01 continue.\n  01 Make sure that `gem install ovirt-engine-sdk -v '4.2.4'` succeeds before\n  01 bundling.\n</code></pre>\n\n<p>Locally (OSX) the app is running great. Today, I tried to deploy it on the staging server and faced this error (out of the blue, I just modified some content).</p>\n\n<p>I tried to add the gem <code>ovirt-engine-sdk</code> to the <code>Gemfile</code>, but it didn't work out. I tried to log in on the server (Ubuntu) and install it there, it got installed, but the the deployment failed again.</p>\n\n<p>When I looked to the <code>mkmf.log</code> file, this is its content:</p>\n\n<pre><code>find_executable: checking for xml2-config... -------------------- no\n\n--------------------\n\n\"pkg-config --exists libxml2\"\npackage configuration for libxml2 is not found\ndeployer@ip-172-31-46-41:~$ cat /home/deployer/apps/app-staging/shared/bundle/ruby/2.3.0/extensions/x86_64-linux/2.3.0/ovirt-engine-sdk-4.2.4/gem_make.out\ncurrent directory: /home/deployer/apps/app-staging/shared/bundle/ruby/2.3.0/gems/ovirt-engine-sdk-4.2.4/ext/ovirtsdk4c\n/home/deployer/.rvm/rubies/ruby-2.3.3/bin/ruby -r ./siteconf20180429-31340-1net0o9.rb extconf.rb\nchecking for xml2-config... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/home/deployer/.rvm/rubies/ruby-2.3.3/bin/$(RUBY_BASE_NAME)\n    --with-libxml2-config\n    --without-libxml2-config\n    --with-pkg-config\n    --without-pkg-config\nextconf.rb:29:in `&lt;main&gt;': The \"libxml2\" package isn't available. (RuntimeError)\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /home/deployer/apps/app-staging/shared/bundle/ruby/2.3.0/extensions/x86_64-linux/2.3.0/ovirt-engine-sdk-4.2.4/mkmf.log\n\nextconf failed, exit code 1\n</code></pre>\n\n<p>I also tried to install (again, but I remember that 2 years ago, when I was setting up the server, I installed it - other gems needed it) <code>libxml2</code>, the installation went well, but when I tried to deploy the app again - again the same error.</p>\n\n<p>I am not sure where to look as what might be wrong, because I haven't modified the configuration of the application in any way, so the occurrence of this error looks a bit like a mystery.</p>\n\n<p>The difficult thing here's that I am not even sure where to start debugging the issue - the error has absolutely nothing to do with the content changes made in the app.</p>\n\n<p>Thank you for any help!</p>\n"}, {"tags": ["ruby", "shell", "jenkins", "jenkins-pipeline", "fastlane"], "owner": {"reputation": 89, "user_id": 7779296, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dcbec27410a6dfcb91e1c8a9a4562cc6?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Choudhery", "link": "https://stackoverflow.com/users/7779296/abhishek-choudhery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 429, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525087534, "creation_date": 1525084963, "last_edit_date": 1525087534, "question_id": 50098858, "link": "https://stackoverflow.com/questions/50098858/installing-fastlane-plugin-in-jenkins-via-pipeline-script", "title": "Installing fastlane plugin in jenkins via pipeline script", "body": "<p>I am trying to run a build in jenkins. In the course of execution of build, Jenkins clones the git in the workspace. After checking if the fastlane folder is there or not, it creates the folder containing <code>fastfile</code>, <code>matchfile</code>, <code>appfile</code>, <code>pluginfile</code>. After that I am trying to install the diwai plugin via <code>fastlane install_plugins</code> in the workspace. But when it reaches the install_plugins step, it shows this</p>\n\n<blockquote>\n<pre><code>Installing plugin dependencies...\nErrno::EACCES: Permission denied @ rb_sysopen -\n/users/&lt;username&gt;/.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/unf_ext-0.0.7.5/.document\nAn error occurred while installing unf_ext (0.0.7.5), and Bundler cannot\ncontinue.\nMake sure that `gem install unf_ext -v '0.0.7.5'` succeeds before bundling.\n</code></pre>\n</blockquote>\n\n<p>Since my jenkins user does not have the admin/ sudo privileges I used a workaround, I added users/&lt; username >/.gem to my environment variable path in jenkins,</p>\n\n<p>The question is how can I resolve this error, I can't provide my jenkin's user the admin privileges. I also tried to <code>chmod 777 users/&lt;username&gt;/.fastlane/bin</code> to make it readable/writable/executable</p>\n\n<p>Point me in correct direction, if my understanding of error is correct or I would need a  new approach. If any other information is required please let me know</p>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 0, "creation_date": 1525085892, "post_id": 50098815, "comment_id": 87214590, "body": "How do you imagine to get multiple fields in a single variable? Do you expect it to be an array?"}, {"owner": {"reputation": 5, "user_id": 4485785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--23nR6Bf_rU/AAAAAAAAAAI/AAAAAAAAALk/W3YYTBsBxi4/photo.jpg?sz=128", "display_name": "mallela prakash", "link": "https://stackoverflow.com/users/4485785/mallela-prakash"}, "reply_to_user": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 0, "creation_date": 1525086092, "post_id": 50098815, "comment_id": 87214684, "body": "Quoting as a variable might be wrong. But, my intention is to wrap all the entered text in the corresponding fields as an object of &quot;Counter&quot;. Every text-box is having unique ID."}, {"owner": {"reputation": 5, "user_id": 4485785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--23nR6Bf_rU/AAAAAAAAAAI/AAAAAAAAALk/W3YYTBsBxi4/photo.jpg?sz=128", "display_name": "mallela prakash", "link": "https://stackoverflow.com/users/4485785/mallela-prakash"}, "reply_to_user": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 0, "creation_date": 1525097519, "post_id": 50098815, "comment_id": 87221404, "body": "I am expecting the data as below for counter node with many sub values:   {   &#39;person&#39; =&gt; {     &#39;name&#39; =&gt; &#39;John Doe&#39;,     &#39;Counter&#39; =&gt; { \t\t&#39;id&#39; =&gt; &#39;Home&#39;,         &#39;tala&#39; =&gt; &#39;Home&#39;,         &#39;gantalu&#39; =&gt; &#39;221b Baker Street&#39;       },       { \t\t&#39;id&#39; =&gt; &#39;Home&#39;,         &#39;tala&#39; =&gt; &#39;Home&#39;,         &#39;gantalu&#39; =&gt; &#39;221b Baker Street&#39;       } `  } }"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1525099337, "post_id": 50098815, "comment_id": 87222579, "body": "BTW, you might want to check out the <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow noreferrer\">Ruby style guide</a>: Your naming is a bit <i>unconventional</i>."}, {"owner": {"reputation": 5, "user_id": 4485785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--23nR6Bf_rU/AAAAAAAAAAI/AAAAAAAAALk/W3YYTBsBxi4/photo.jpg?sz=128", "display_name": "mallela prakash", "link": "https://stackoverflow.com/users/4485785/mallela-prakash"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1525102016, "post_id": 50098815, "comment_id": 87224179, "body": "Will do @jvillian. Meanwhile, can you help me with the solution per my query."}, {"owner": {"reputation": 5, "user_id": 4485785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--23nR6Bf_rU/AAAAAAAAAAI/AAAAAAAAALk/W3YYTBsBxi4/photo.jpg?sz=128", "display_name": "mallela prakash", "link": "https://stackoverflow.com/users/4485785/mallela-prakash"}, "edited": false, "score": 0, "creation_date": 1525365446, "post_id": 50098815, "comment_id": 87337751, "body": "As I was not able to bind the data, I have created all the columns and passed to the required parameters. Then I was able to access the data without issues for every column"}], "owner": {"reputation": 5, "user_id": 4485785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--23nR6Bf_rU/AAAAAAAAAAI/AAAAAAAAALk/W3YYTBsBxi4/photo.jpg?sz=128", "display_name": "mallela prakash", "link": "https://stackoverflow.com/users/4485785/mallela-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525107809, "creation_date": 1525084821, "last_edit_date": 1525107809, "question_id": 50098815, "link": "https://stackoverflow.com/questions/50098815/how-to-bind-all-the-data-inside-a-div-as-a-subset-in-ruby-on-rails", "title": "How to bind all the data inside a div as a subset in ruby on rails", "body": "<p>Here I am trying to save all the data entered in a form into database.</p>\n\n<p>Currently, my HTML partial form is as below:</p>\n\n<pre><code>&lt;% LookupValue.laststatus.each do |d| %&gt;\n  &lt;div class=\"row row-margin\" id=\"Counter\"&gt;\n    &lt;div class=\"col-md-4\"&gt;\n      &lt;%= f.label :\"#{d.LookupValueName}:\", :class =&gt; \"col-form-label float-md-right\", :for=&gt;\"Metric:\"+d.LookupValueName%&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-4\"&gt;\n      &lt;%= f.text_field :\"Counter\", :class =&gt; \"form-control tala-count\",:id =&gt;\"Counter\"+d.LookupValueId.to_s, placeholder: \"tala Count\" %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-4\"&gt;\n      &lt;%= f.text_field :\"Gantalu\", :class =&gt; \"form-control Gantalu\",:id =&gt;\"Gantalu\"+d.LookupValueId.to_s, placeholder: \"Gantalu\" %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;%end%&gt;\n\n&lt;div class=\"row row-margin other-metric-row\"&gt;\n  &lt;% if last_LookupValue = LookupValue.status.last %&gt;\n    &lt;div class=\"col-md-4\"&gt;\n      &lt;%= f.text_field :\"Gantalu\", :class =&gt; \"form-control other-metric\",:id =&gt;last_LookupValue.LookupValueId, placeholder: \"Other\" %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-4\"&gt;\n      &lt;%= f.text_field :\"Counter\", :class =&gt; \"form-control tala-count\",:id =&gt;\"Counter\"+last_LookupValue.LookupValueId.to_s, placeholder: \"tala Count\" %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-4\"&gt;\n      &lt;%= f.text_field :\"Gantalu\", :class =&gt; \"form-control Gantalu\",:id =&gt;\"Counter\"+last_LookupValue.LookupValueId.to_s, placeholder: \"Gantalu\" %&gt;\n    &lt;/div&gt;\n  &lt;%end%&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and my UI is as follows:\n<a href=\"https://i.stack.imgur.com/z6Szs.png\" rel=\"nofollow noreferrer\">UI for the partial form</a></p>\n\n<p>WHen I am passing the parameter as \"Counter\": <code>params.require(:final).permit(:Counter)</code> I see the data through console as below:</p>\n\n<pre><code>final[Counter]: Value1\nfinal[Gantalu]: 1\nfinal[Counter]: Value2\nfinal[Gantalu]: 11\nfinal[Counter]: Value3\nfinal[Gantalu]: 111\nfinal[Counter]: Value4\nfinal[Gantalu]: 1111\nfinal[Gantalu]: \nfinal[Counter]: \nfinal[Gantalu]:\n</code></pre>\n\n<p>Not sure how to get all the counter data under a single variable so that I can access all the data entered in every text box and access them.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "serialization", "activerecord"], "comments": [{"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 1, "creation_date": 1525086104, "post_id": 50098720, "comment_id": 87214694, "body": "what is <code>json_response</code> method? Is it from some library or have you wrote it on your own? Can you please paste it&#39;s code?"}, {"owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "reply_to_user": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "edited": false, "score": 0, "creation_date": 1525086295, "post_id": 50098720, "comment_id": 87214781, "body": "@AntonTkachov See the <b>Update</b> section, puted the <code>json_response</code>"}, {"owner": {"reputation": 1748, "user_id": 3293310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYYxb.jpg?s=128&g=1", "display_name": "Pak", "link": "https://stackoverflow.com/users/3293310/pak"}, "edited": false, "score": 0, "creation_date": 1525096558, "post_id": 50098720, "comment_id": 87220835, "body": "try to specify a specific Serializer with serializer: UserSerializer ? It does not seem to guess the serializer class because you extracted the code into a module. But it also throws a 500 error so the full stacktrace would be useful."}], "answers": [{"tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": true, "score": 1, "last_activity_date": 1525578580, "creation_date": 1525578580, "answer_id": 50196090, "question_id": 50098720, "link": "https://stackoverflow.com/questions/50098720/rails-user-info-not-updating-rendered-activemodel-serializer-null-with-hash/50196090#50196090", "title": "Rails: User info not updating (Rendered ActiveModel Serializer Null with Hash)", "body": "<p>First of all </p>\n\n<blockquote>\n  <p>Rendered ActiveModel::Serializer::Null with Hash (0.51ms)</p>\n</blockquote>\n\n<p>That's not the issue for not updating user info, it's showing in the log because <code>ActiveModel::Serializer</code> serialize the columns which have <code>null</code> value.</p>\n\n<p>I think the problem is elsewhere like you need to refactor why causes this e.g you can try to remove <code>!</code> <code>update!(user_params)</code> try like this <code>current_user.update(user_params)</code> or any other.</p>\n\n<pre><code># place this method inside NullAttributesRemover or directly inside serializer class\ndef serializable_hash(adapter_options = nil, options = {}, adapter_instance = self.class.serialization_adapter_instance)\n  hash = super\n  hash.each { |key, value| hash.delete(key) if value.nil? }\n  hash\nend\n</code></pre>\n\n<p>it will serialize columns which have only real values.</p>\n\n<p>I think it will help.</p>\n"}], "owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3383, "favorite_count": 0, "accepted_answer_id": 50196090, "answer_count": 1, "score": 1, "last_activity_date": 1525578580, "creation_date": 1525084487, "last_edit_date": 1525086224, "question_id": 50098720, "link": "https://stackoverflow.com/questions/50098720/rails-user-info-not-updating-rendered-activemodel-serializer-null-with-hash", "title": "Rails: User info not updating (Rendered ActiveModel Serializer Null with Hash)", "body": "<p>The same code is working in the local but not working in Heroku </p>\n\n<pre><code>def update\n    current_user.update!(user_params)\n    response = { message: Message.account_updated}\n    json_response(response)\nend\nprivate\ndef user_params\n    params.permit(:first_name, :last_name, :email, :password)\nend\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>namespace :api do\n    namespace :v1 do\n        put 'user/update', to: 'users#update'\n    end\nend\n</code></pre>\n\n<p>user_serializer.rb</p>\n\n<pre><code>class UserSerializer &lt; ActiveModel::Serializer\n    attributes :id, :username, :first_name, :last_name, :email, :created_at, :updated_at\nend\n</code></pre>\n\n<p>that is my and it's working on my local via Postman, that is for updating user info, but while I push to Heroku and try to update via Postman then not working, log showing like this</p>\n\n<pre><code>2018-04-30T10:15:47.665731+00:00 heroku[router]: at=info method=PUT path=\"/api/v1/user/update?first_name=John&amp;last_name=Doe\" host=my-host.herokuapp.com request_id=79a84b63-be87-46f8-8fad-2d151a63722f fwd=\"27.147.231.22\" dyno=web.1 connect=0ms service=18ms status=500 bytes=283 protocol=https\n2018-04-30T10:15:47.648979+00:00 app[web.1]: [79a84b63-be87-46f8-8fad-2d151a63722f] Started PUT \"/api/v1/user/update?first_name=John&amp;last_name=Doe\" \nfor 27.147.231.22 at 2018-04-30 10:15:47 +0000\n2018-04-30T10:15:47.650866+00:00 app[web.1]: [79a84b63-be87-46f8-8fad-2d151a63722f] Processing by Api::V1::UsersController#update as */*\n2018-04-30T10:15:47.650987+00:00 app[web.1]: [79a84b63-be87-46f8-8fad-2d151a63722f]   Parameters: {\"first_name\"=&gt;\"John\", \"last_name\"=&gt;\"Doe\"}\n2018-04-30T10:15:47.654619+00:00 app[web.1]: [79a84b63-be87-46f8-8fad-2d151a63722f]   User Load (1.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n2018-04-30T10:15:47.656446+00:00 app[web.1]: [79a84b63-be87-46f8-8fad-2d151a63722f]   CACHE User Load (0.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n2018-04-30T10:15:47.658345+00:00 app[web.1]: [79a84b63-be87-46f8-8fad-2d151a63722f]    (1.1ms)  BEGIN\n2018-04-30T10:15:47.661446+00:00 app[web.1]: [79a84b63-be87-46f8-8fad-2d151a63722f]   User Exists (1.2ms)  SELECT  1 AS one FROM \"users\" WHERE LOWER(\"users\".\"email\") = LOWER($1) AND \"users\".\"id\" != $2 LIMIT $3  [[\"email\", \"j@gmail.com\"], [\"id\", 1], [\"LIMIT\", 1]]\n2018-04-30T10:15:47.663630+00:00 app[web.1]: [79a84b63-be87-46f8-8fad-2d151a63722f]    (1.0ms)  COMMIT\n2018-04-30T10:15:47.664737+00:00 app[web.1]: [79a84b63-be87-46f8-8fad-2d151a63722f] [active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.51ms)\n2018-04-30T10:15:47.665015+00:00 app[web.1]: [79a84b63-be87-46f8-8fad-2d151a63722f] Completed 500 Internal Server Error in 14ms (Views: 1.1ms | ActiveRecord: 4.5ms)\n</code></pre>\n\n<p>I think that's the problem</p>\n\n<blockquote>\n  <p>Rendered ActiveModel::Serializer::Null with Hash (0.51ms)</p>\n</blockquote>\n\n<p>But I don't understand what's going on.</p>\n\n<p><strong>Update</strong></p>\n\n<pre><code>module Response\n    def json_response(object, status = :ok)\n        render json: object, status: status\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "macos", "terminal", "rubygems", "zlib"], "answers": [{"comments": [{"owner": {"reputation": 98, "user_id": 9015765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-i5lDNqJorCE/AAAAAAAAAAI/AAAAAAAAABQ/8yVDGYJQrTY/photo.jpg?sz=128", "display_name": "Berta Nicolau", "link": "https://stackoverflow.com/users/9015765/berta-nicolau"}, "edited": false, "score": 0, "creation_date": 1525252882, "post_id": 50106824, "comment_id": 87279984, "body": "Thanks for your answer. I have installed xcode three times and also command line tools. I&#39;ve also reinstalled the homebrew, I do not know what else I can do."}, {"owner": {"reputation": 304, "user_id": 194128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/260a95e08b7880ecd76b964203f25c87?s=128&d=identicon&r=PG", "display_name": "aaron blythe", "link": "https://stackoverflow.com/users/194128/aaron-blythe"}, "reply_to_user": {"reputation": 98, "user_id": 9015765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-i5lDNqJorCE/AAAAAAAAAAI/AAAAAAAAABQ/8yVDGYJQrTY/photo.jpg?sz=128", "display_name": "Berta Nicolau", "link": "https://stackoverflow.com/users/9015765/berta-nicolau"}, "edited": false, "score": 0, "creation_date": 1525365200, "post_id": 50106824, "comment_id": 87337600, "body": "What method are you using for ruby install? Is it rbenv? have you tried uninstalling/reinstalling ruby? Can you give the output of <code>which ruby</code> and <code>which zlib</code> showing the paths to the tools? Perhaps installing zlib from homebrew will help this situation <code>brew install zlib</code>"}], "tags": [], "owner": {"reputation": 304, "user_id": 194128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/260a95e08b7880ecd76b964203f25c87?s=128&d=identicon&r=PG", "display_name": "aaron blythe", "link": "https://stackoverflow.com/users/194128/aaron-blythe"}, "is_accepted": false, "score": 0, "last_activity_date": 1525115889, "creation_date": 1525115889, "answer_id": 50106824, "question_id": 50098284, "link": "https://stackoverflow.com/questions/50098284/install-compass-on-mac-osx-10-12-6/50106824#50106824", "title": "Install compass on mac osx 10.12.6", "body": "<p>Most places similar errors have happened previously (ex. <a href=\"https://github.com/rbenv/rbenv/issues/573\" rel=\"nofollow noreferrer\">https://github.com/rbenv/rbenv/issues/573</a>) people have suggested either uninstalling and reinstalling XCode:</p>\n\n<p>See: <a href=\"https://stackoverflow.com/questions/27438457/xcode-6-1-how-to-uninstall-command-line-tools\">Xcode 6.1 - How to uninstall command line tools?</a></p>\n\n<p>or uninstalling and reinstall homebrew:</p>\n\n<p>See: <a href=\"https://stackoverflow.com/questions/11038028/what-is-the-best-safest-way-to-reinstall-homebrew\">What is the best/safest way to reinstall Homebrew?</a></p>\n\n<p>You may also have to start a new terminal between changes to your ruby installation.</p>\n"}], "owner": {"reputation": 98, "user_id": 9015765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-i5lDNqJorCE/AAAAAAAAAAI/AAAAAAAAABQ/8yVDGYJQrTY/photo.jpg?sz=128", "display_name": "Berta Nicolau", "link": "https://stackoverflow.com/users/9015765/berta-nicolau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 917, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525256238, "creation_date": 1525082948, "last_edit_date": 1525256238, "question_id": 50098284, "link": "https://stackoverflow.com/questions/50098284/install-compass-on-mac-osx-10-12-6", "title": "Install compass on mac osx 10.12.6", "body": "<p><strong>UPDATE</strong></p>\n\n<p>I also have run </p>\n\n<pre><code>ruby -rzlib -e0\n</code></pre>\n\n<p>and I get this</p>\n\n<pre><code>/Users/bertuka/.rvm/rubies/ruby-2.4.2/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- zlib (LoadError)\n    from /Users/bertuka/.rvm/rubies/ruby-2.4.2/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n</code></pre>\n\n<p>It seems as if I had a version installed inside another version, but I do not know how to solve it</p>\n\n<p>I tried to uninstall Ruby version 2.4.2 and reinstall it, but I still get the same error</p>\n\n<hr>\n\n<p><strong>FIRST MESSAGE</strong></p>\n\n<p>I am trying to install compass on my mac to use GRUNT.</p>\n\n<p>When I type the following line on terminal</p>\n\n<pre><code>sudo gem install compass\n</code></pre>\n\n<p>an error appears</p>\n\n<pre><code>ERROR:  Loading command: install (LoadError)\n    cannot load such file -- zlib\nERROR:  While executing gem ... (NoMethodError)\n    undefined method `invoke_with_build_args' for nil:NilClass\n</code></pre>\n\n<p>I have ruby installed</p>\n\n<pre><code>ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin16]\n</code></pre>\n\n<p>and I tried to run the following command as I see on <a href=\"https://stackoverflow.com/questions/23781657/rbenv-installed-ruby-2-1-2-cannot-load-such-file-zlib-on-mac-osx-10-9-2\">rbenv installed ruby 2.1.2 cannot load such file -- zlib on MAC OSX 10.9.2</a> </p>\n\n<pre><code>xcode-select --install\n</code></pre>\n\n<p>But it seems that I already have it installed</p>\n\n<pre><code>xcode-select: error: command line tools are already installed, use \"Software Update\" to install updates\n</code></pre>\n\n<p>I don't now how to install zlib and compass correctly to avoid errors. </p>\n\n<p>Sorry for my english, thanks.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525082288, "post_id": 50097941, "comment_id": 87212610, "body": "<code>require</code> is not just for rubygems."}, {"owner": {"reputation": 1235, "user_id": 533510, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/266cd5923db54ae0e7e49c7a48575c14?s=128&d=identicon&r=PG", "display_name": "ribamar", "link": "https://stackoverflow.com/users/533510/ribamar"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525082403, "post_id": 50097941, "comment_id": 87212672, "body": "i  know.....,..."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525082599, "post_id": 50097941, "comment_id": 87212775, "body": "Not sure what you mean by &quot;<code>require</code> cannot load a file when its&#39; new&quot;. That is not true."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525082755, "post_id": 50097941, "comment_id": 87212856, "body": "The two methods <code>require</code> and <code>load</code> both return <code>true</code> or <code>false</code>. Not sure what you mean by &quot;an intermediate function ... that returns the path of the file to be loaded&quot;. That has nothing to do with <code>require</code> vs. <code>load</code>."}, {"owner": {"reputation": 1235, "user_id": 533510, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/266cd5923db54ae0e7e49c7a48575c14?s=128&d=identicon&r=PG", "display_name": "ribamar", "link": "https://stackoverflow.com/users/533510/ribamar"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525085308, "post_id": 50097941, "comment_id": 87214246, "body": "I updated the question to address your doubts (although I didn&#39;t bring any new facts to it, I believe)"}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1525102484, "last_edit_date": 1525102484, "creation_date": 1525095183, "answer_id": 50101646, "question_id": 50097941, "link": "https://stackoverflow.com/questions/50097941/load-with-the-convenience-of-require/50101646#50101646", "title": "Load with the convenience of require", "body": "<p><code>require</code> will try different extensions (e.g. .rb., .so, .dll, etc) to find the file you are requiring in the <code>$LOAD_PATH</code> when the path given is not an absolute path e.g. </p>\n\n<pre><code>require 'json' # this will try 'json.rb' first\n</code></pre>\n\n<p><code>load</code> will also search the <code>$LOAD_PATH</code> when the path is not absolute but it will not try and add any extensions for you, instead you would have to be specific about it e.g. </p>\n\n<pre><code>load 'json.rb'\n</code></pre>\n\n<p>If you want to know where that file is loading from you could use the <code>Gem::Specification</code> class like so: </p>\n\n<pre><code>Gem::Specification.find_by_name('json').full_gem_path\n</code></pre>\n\n<p>This will return the path to the directory of the file that would be <code>loaded</code> or <code>required</code>.</p>\n\n<p><strong>DISCLAIMER</strong>: The below is for edification purposes only and should not be used in production code of any kind</p>\n\n<p>If you really wanted something like this this you could try: </p>\n\n<pre><code>module Kernel \n  def load_and_print_gem(gem_name, *requirements)\n    begin \n      spec = Gem::Specification.find_by_name(gem_name, *requirements)\n      path = File.join(spec.full_gem_path, 'lib', \"#{gem_name}.rb\") \n      puts \"Loading #{gem_name} from Gem::Specification: #{path}\" if File.exist?(path)\n      load path\n    rescue Gem::MissingSpecError, LoadError =&gt; e \n      if path = $LOAD_PATH.find {|p| Dir.glob(\"#{p}/**/#{gem_name}.rb\").any? }\n        puts \"Loading #{gem_name} from $LOAD_PATH: #{path}/#{gem_name}.rb\" \n      end\n      load File.join(path.to_s,\"#{gem_name}.rb\")\n    end\n  end\nend\n</code></pre>\n\n<p><strong>NOTE: <code>$LOAD_PATH</code> fall back will load the first <code>.rb</code> file it finds matching the <code>gem_name</code> not necessarily the newest gem version or even the gem itself if there are more than 1 in <code>$LOAD_PATH</code> directories</strong></p>\n\n<p>Then </p>\n\n<pre><code>load_and_print_gem('json') \n# Loading: /path/to/json.rb\n#=&gt; true\n</code></pre>\n\n<p>Or to try (will not work with $LOAD_PATH fallback) to load and print a specific version: (See <a href=\"https://ruby-doc.org/stdlib-2.2.3/libdoc/rubygems/rdoc/Gem/Requirement.html\" rel=\"nofollow noreferrer\"><code>Gem::Requirement</code></a> for more details on the requirements)</p>\n\n<pre><code>load_and_print_gem('json','= 2.0.3') \n</code></pre>\n\n<p><a href=\"https://repl.it/@engineersmnky/FortunateLeafyFactor\" rel=\"nofollow noreferrer\">Example</a></p>\n"}], "owner": {"reputation": 1235, "user_id": 533510, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/266cd5923db54ae0e7e49c7a48575c14?s=128&d=identicon&r=PG", "display_name": "ribamar", "link": "https://stackoverflow.com/users/533510/ribamar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1525102484, "creation_date": 1525081638, "last_edit_date": 1525085466, "question_id": 50097941, "link": "https://stackoverflow.com/questions/50097941/load-with-the-convenience-of-require", "title": "Load with the convenience of require", "body": "<p><code>require</code> loads a rubygem, but it cannot find/reload the file when it's new or changed (eg: if you issue a <code>gem install x</code> a new requireable/loadable file is installed, but <code>require</code> won't find it).</p>\n\n<pre><code>require 'json'\n#=&gt; true\nrequire 'json'\n#=&gt; false\n</code></pre>\n\n<p>On the other hand, <code>load</code> can reload a file. </p>\n\n<pre><code>load 'path/to/json.rb'\n#=&gt; true\nload 'path/to/json.rb'\n#=&gt; true\n</code></pre>\n\n<p>However, <code>load</code> requires the path to the ruby file, while <code>require</code> is flexible to find it in the default location. </p>\n\n<p>Is there an intermediate function <code>f</code> that can return, given the rubygem name, the path of the file to be loaded? (It would, indeed, have been convenient that <code>require</code> return it instead of just <code>true</code>, but that wasn't the way it was coded.) So I could call it this way:</p>\n\n<pre><code>load f 'json'\n</code></pre>\n"}, {"tags": ["ruby", "flickr"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1525081445, "post_id": 50097836, "comment_id": 87212068, "body": "What do you use for <code>photoset_id</code>? I expect you should start with calling smth like <code>@flickr.list_photosets</code> to retrieve the available <code>ids</code>."}, {"owner": {"reputation": 358, "user_id": 4148533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4641835d557767acb8391909587d75c6?s=128&d=identicon&r=PG&f=1", "display_name": "Farhad", "link": "https://stackoverflow.com/users/4148533/farhad"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1525081590, "post_id": 50097836, "comment_id": 87212156, "body": "I use the ID that displays in the url when I browse the photoset. Is that incorrect?"}, {"owner": {"reputation": 358, "user_id": 4148533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4641835d557767acb8391909587d75c6?s=128&d=identicon&r=PG&f=1", "display_name": "Farhad", "link": "https://stackoverflow.com/users/4148533/farhad"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1525081711, "post_id": 50097836, "comment_id": 87212225, "body": "This is the source code of the library I am using. Not sure of the correct sequence of calls to fire to authorize to Flickr: <a href=\"https://github.com/RaVbaker/flickr/blob/master/lib/flickr.rb\" rel=\"nofollow noreferrer\">github.com/RaVbaker/flickr/blob/master/lib/flickr.rb</a>"}], "answers": [{"comments": [{"owner": {"reputation": 358, "user_id": 4148533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4641835d557767acb8391909587d75c6?s=128&d=identicon&r=PG&f=1", "display_name": "Farhad", "link": "https://stackoverflow.com/users/4148533/farhad"}, "edited": false, "score": 0, "creation_date": 1525238234, "post_id": 50102023, "comment_id": 87272910, "body": "I&#39;ve updated the main question above with the error I&#39;m seeing."}], "tags": [], "owner": {"reputation": 1808, "user_id": 9184597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7875ba2d289a9f0e410a82fb7f15f03?s=128&d=identicon&r=PG&f=1", "display_name": "R.F. Nelson", "link": "https://stackoverflow.com/users/9184597/r-f-nelson"}, "is_accepted": false, "score": 0, "last_activity_date": 1525096513, "creation_date": 1525096513, "answer_id": 50102023, "question_id": 50097836, "link": "https://stackoverflow.com/questions/50097836/download-my-own-private-albums-using-flickr-api/50102023#50102023", "title": "Download my own private albums using Flickr API", "body": "<p>Assuming you are successfully connecting to Flickr's API, you can browse your own photosets like so:</p>\n\n<p><code>\nuser = flickr.users('you@yourflickraccount.com')\nphotosets = user.photosets\n</code></p>\n\n<p>From there you can iterate through your photosets to find the correct one. I'm guessing whatever id you're using is not the actual <code>photoset_id</code> that the Flickr API uses.</p>\n"}], "owner": {"reputation": 358, "user_id": 4148533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4641835d557767acb8391909587d75c6?s=128&d=identicon&r=PG&f=1", "display_name": "Farhad", "link": "https://stackoverflow.com/users/4148533/farhad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525238212, "creation_date": 1525081285, "last_edit_date": 1525238212, "question_id": 50097836, "link": "https://stackoverflow.com/questions/50097836/download-my-own-private-albums-using-flickr-api", "title": "Download my own private albums using Flickr API", "body": "<p>I'm trying to download my own flickr albums using the API. I'm using the flickr.rb gem <a href=\"https://github.com/RaVbaker/flickr/blob/master/lib/flickr.rb\" rel=\"nofollow noreferrer\">here</a> \nI am creating a new object using this:</p>\n\n<pre><code>@flickr = Flickr.new({api_key: 'xxxxx', shared_secret: 'xxxxx', verify_ssl: false})\n</code></pre>\n\n<p>And then I'm using: </p>\n\n<pre><code>p = @flickr.photoset(photoset_id)\n</code></pre>\n\n<p>Where I pass the id of my photoset I want to download. \nI keep getting the error:</p>\n\n<pre><code>/.rvm/gems/ruby-2.2.5/gems/flickr.rb-1.2.1/lib/flickr.rb:199:in `request': Photoset not found (RuntimeError)\n</code></pre>\n\n<p>What is the correct way to authenticate to Flickr and download my photos? I don't want to build any UI, just want a command line app to do this. Is there some URL I need to hit in the browser to authorize the app and grant permissions? The documentation is really sparse and doesn't give any examples. </p>\n\n<p>Update: In response to @r-f-nelson </p>\n\n<p>The 'user' as retrieved:</p>\n\n<pre><code>#Flickr::User:0x007fd8cea6ad98 @id=\"29916617@N02\", @username=\"taraporefarhad\", @client=#&lt;Flickr:0x007fd8cf09fc68 @host=\"https://api.flickr.com\", @api=\"/services/rest\", @verify_ssl=false, @api_key=\"36705xxxxxxxxxxxxxxx\", @shared_secret=\"xxxxxxxxxxxxxx\", @auth_token=nil, @ca_file=nil\n</code></pre>\n\n<p>The 'flickr' client object:</p>\n\n<pre><code>#Flickr:0x007fd8cf09fc68 @host=\"https://api.flickr.com\", @api=\"/services/rest\", @verify_ssl=false, @api_key=\"36705xxxxxxxxxxxxxxx\", @shared_secret=\"xxxxxxxxxxxxxx\", @auth_token=nil, @ca_file=nil, @user=#\n\nFlickr::User:0x007fd8cea6ad98 @id=\"29916617@N02\", @username=\"taraporefarhad\", @client=#&lt;Flickr:0x007fd8cf09fc68 ...\n</code></pre>\n\n<p>The Photoset object:</p>\n\n<pre><code>#Flickr::Photoset:0x007fd8cf06c9d0 @id=\"72157638843727066\", @api_key=nil, @client=#&lt;Flickr:0x007fd8cf06c8b8 @host=\"https://api.flickr.com\", @api=\"/services/rest\", @verify_ssl=true, @api_key=nil, @shared_secret=nil, @auth_token=nil, @ca_file=nil\n/.rvm/gems/ruby-2.2.5/gems/flickr.rb-1.2.1/lib/flickr.rb:199:in `request': Invalid API Key (Key has invalid format) (RuntimeError)\n</code></pre>\n\n<p>Note above that the \"photoset\" object has a different flickr client object id and NO shared secret and API key! Not sure how that's happening since I'm using the same client and user objects to get the photoset as well.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bootstrapping"], "comments": [{"owner": {"reputation": 2069, "user_id": 220292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6edcb304a03a87ddf5c68239f7d001e4?s=128&d=identicon&r=PG", "display_name": "stwienert", "link": "https://stackoverflow.com/users/220292/stwienert"}, "edited": false, "score": 0, "creation_date": 1525080861, "post_id": 50097686, "comment_id": 87211751, "body": "Make sure to restart your rails server (ctrl+c).  If this doesnt fix the issue, please add the output of <code>bundle list</code>"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525084145, "post_id": 50097686, "comment_id": 87213618, "body": "Maybe <a href=\"https://stackoverflow.com/questions/40987649/bootstrap-rails-not-working\">this</a> can help"}], "answers": [{"tags": [], "owner": {"reputation": 1808, "user_id": 9184597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7875ba2d289a9f0e410a82fb7f15f03?s=128&d=identicon&r=PG&f=1", "display_name": "R.F. Nelson", "link": "https://stackoverflow.com/users/9184597/r-f-nelson"}, "is_accepted": false, "score": 0, "last_activity_date": 1525096926, "creation_date": 1525096926, "answer_id": 50102141, "question_id": 50097686, "link": "https://stackoverflow.com/questions/50097686/the-error-is-saying-it-cant-find-bootstrap-but-ive-installed-it/50102141#50102141", "title": "The error is saying it can&#39;t find bootstrap but i&#39;ve installed it?", "body": "<p>What exactly have you installed? Providing your <code>bundle list</code> may help.</p>\n\n<p>Things to try:</p>\n\n<ul>\n<li>Run <code>bundle install</code> if you haven't already</li>\n<li>Restarting your Rails server</li>\n<li>Requiring bootstrap in your <code>application.js</code></li>\n<li>Running <code>rake assets:precompile</code></li>\n<li>Add require <code>the-gem-name</code> to <code>config/application.rb</code> to explicitly require it</li>\n<li>Try a different version of the gem</li>\n<li>As a last resort, you can download the bootstrap files yourself and include them in your assets</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 9720533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "erin belot", "link": "https://stackoverflow.com/users/9720533/erin-belot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525096926, "creation_date": 1525080760, "last_edit_date": 1525086729, "question_id": 50097686, "link": "https://stackoverflow.com/questions/50097686/the-error-is-saying-it-cant-find-bootstrap-but-ive-installed-it", "title": "The error is saying it can&#39;t find bootstrap but i&#39;ve installed it?", "body": "<pre><code>Sass::SyntaxError in Books#index\nShowing /Users/me/apps/rails/clones/book_review/app/views/layouts/application.html.erb where line #8 raised:\n\nFile to import not found or unreadable: bootstrap.\nLoad paths:\n  /Users/me/apps/rails/clones/book_review/app/assets/config\n  /Users/me/apps/rails/clones/book_review/app/assets/images\n  /Users/me/apps/rails/clones/book_review/app/assets/javascripts\n  /Users/me/apps/rails/clones/book_review/app/assets/stylesheets\n  /Users/me/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/coffee-rails-4.2.2/lib/assets/javascripts\n  /Users/me/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/actioncable-5.2.0/lib/assets/compiled\n  /Users/me/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/activestorage-5.2.0/app/assets/javascripts\n  /Users/me/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/actionview-5.2.0/lib/assets/compiled\n  /Users/me/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/turbolinks-source-5.1.0/lib/assets/javascripts\n  /Users/me/apps/rails/clones/book_review/node_modules\nExtracted source (around line #18):\n16\n17\n\n\n @import \"bootstrap\";\n\nRails.root: /Users/me/apps/rails/clones/book_review\n\nApplication Trace | Framework Trace | Full Trace\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1525077118, "post_id": 50096720, "comment_id": 87209575, "body": "<code>product.images.first || product.image</code>?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1525077141, "post_id": 50096720, "comment_id": 87209588, "body": "Right, believe or not, it came to me just before you wrote your comment. :)"}, {"owner": {"reputation": 122, "user_id": 6604377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/79586ed8b41ea83618265f8d84717e98?s=128&d=identicon&r=PG&f=1", "display_name": "Jakeroo", "link": "https://stackoverflow.com/users/6604377/jakeroo"}, "edited": false, "score": 0, "creation_date": 1525077422, "post_id": 50096720, "comment_id": 87209748, "body": "This worked like a charm! I knew there was some syntax for it, but I&#39;m quite new to rails and couldn&#39;t figure it out. Thanks!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 122, "user_id": 6604377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/79586ed8b41ea83618265f8d84717e98?s=128&d=identicon&r=PG&f=1", "display_name": "Jakeroo", "link": "https://stackoverflow.com/users/6604377/jakeroo"}, "edited": false, "score": 0, "creation_date": 1525078123, "post_id": 50096720, "comment_id": 87210193, "body": "@Jakeroo <i>sidenote:</i> this syntax (the logical part inside markup tags) has nothing to do with rails, this is plain ruby."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 4, "last_activity_date": 1525077186, "last_edit_date": 1525077186, "creation_date": 1525077055, "answer_id": 50096720, "question_id": 50096663, "link": "https://stackoverflow.com/questions/50096663/first-gives-error-when-theres-only-none-one-image/50096720#50096720", "title": ".first gives error when there&#39;s only none/one image", "body": "<p>I guess the <a href=\"https://en.wikipedia.org/wiki/%3F:\" rel=\"nofollow noreferrer\">ternary operator</a> would help here:</p>\n\n<pre><code>&lt;%= image_tag product.images.any? ? product.images.first : product.image %&gt;\n</code></pre>\n\n<p>or even simpler, using logical OR operator, as @mudasobwa noticed:</p>\n\n<pre><code>&lt;%= image_tag product.images.first || product.image %&gt;\n</code></pre>\n"}], "owner": {"reputation": 122, "user_id": 6604377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/79586ed8b41ea83618265f8d84717e98?s=128&d=identicon&r=PG&f=1", "display_name": "Jakeroo", "link": "https://stackoverflow.com/users/6604377/jakeroo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 50096720, "answer_count": 1, "score": 0, "last_activity_date": 1525085103, "creation_date": 1525076870, "last_edit_date": 1525085103, "question_id": 50096663, "link": "https://stackoverflow.com/questions/50096663/first-gives-error-when-theres-only-none-one-image", "title": ".first gives error when there&#39;s only none/one image", "body": "<p>I have a multiple images uploader, and I'm showing the images on the page, like this:</p>\n\n<pre><code>&lt;%= image_tag product.images.first %&gt;\n</code></pre>\n\n<p>This works fine as long as a product has multiple images, but it gives the error \"nil is not a valid asset source\" when there's only 1 image. I know I could check for multiple images like this:</p>\n\n<pre><code>&lt;%= image_tag product.images.first if @product.images.present? %&gt;\n</code></pre>\n\n<p>But IF there is 1 image, I do want that one image to show up on the page. Is there a way to do something like this:</p>\n\n<pre><code>&lt;%= image_tag product.images.first if @product.images.present? else image_tag product.image if @product.image.present? %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "telnet"], "comments": [{"owner": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "edited": false, "score": 0, "creation_date": 1525077359, "post_id": 50095179, "comment_id": 87209706, "body": "Does the proxy needs some kind of login?"}, {"owner": {"reputation": 11, "user_id": 5132031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd33b349934835db24d087a43d75e749?s=128&d=identicon&r=PG&f=1", "display_name": "UTKARSH RAI", "link": "https://stackoverflow.com/users/5132031/utkarsh-rai"}, "reply_to_user": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "edited": false, "score": 0, "creation_date": 1525082740, "post_id": 50095179, "comment_id": 87212846, "body": "I don&#39;t think so. I am picking proxies from <a href=\"https://www.socks-proxy.net/\" rel=\"nofollow noreferrer\">socks-proxy.net</a>"}, {"owner": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "edited": false, "score": 0, "creation_date": 1525249296, "post_id": 50095179, "comment_id": 87277933, "body": "Ok.  I would check the following.  0) Try it with simple <code>ping</code> first to see if you get any reply at all 1) Does gmail SMTP allow such proxing?  (It could have such proxies on blacklist).  2) I would test it on proxy under my control so I could monitor all sides of connections on proxy and on client via wireshark.  3) check STMP relay"}, {"owner": {"reputation": 11, "user_id": 5132031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd33b349934835db24d087a43d75e749?s=128&d=identicon&r=PG&f=1", "display_name": "UTKARSH RAI", "link": "https://stackoverflow.com/users/5132031/utkarsh-rai"}, "reply_to_user": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "edited": false, "score": 0, "creation_date": 1525677629, "post_id": 50095179, "comment_id": 87434740, "body": "thanks a lot, i will try these once, but i am skeptic what is causing these weird responses that i am unable to understand and debug. Let you know after I try."}, {"owner": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "edited": false, "score": 0, "creation_date": 1525680937, "post_id": 50095179, "comment_id": 87436437, "body": "You are welcome.  It is hard to help if you know only the output and you can&#39;t &quot;touch&quot; the connection."}], "owner": {"reputation": 11, "user_id": 5132031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd33b349934835db24d087a43d75e749?s=128&d=identicon&r=PG&f=1", "display_name": "UTKARSH RAI", "link": "https://stackoverflow.com/users/5132031/utkarsh-rai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525083072, "creation_date": 1525070329, "last_edit_date": 1525083072, "question_id": 50095179, "link": "https://stackoverflow.com/questions/50095179/ruby-nettelnet-not-working-with-proxy", "title": "Ruby Net::Telnet not working with Proxy", "body": "<p>I am trying to verify some emails using ruby's <code>Net::Telnet</code> class. For this, I connect to the SMTP server and execute a list of commands to verify if an email is correct. When used without proxies, it works fine. </p>\n\n<p>Here is the code for when no proxy is used:</p>\n\n<pre><code>telnet = Net::Telnet.new('Host' =&gt; 'gmail-smtp-in.l.google.com' ,\n'Port' =&gt; 25, 'Prompt' =&gt; /[$%#&gt;] z/n, 'Timeout' =&gt; 10, \"Telnetmode\"\n=&gt; false) {|c| print c}\n\ntelnet.cmd(\"helo 97.74.230.16\")\n\n\nRESPONSE -  \n\nmx.google.com at your service220\nmx.google.com ESMTP q5-v6si5760178pgc.620 - gsmtp 250\n</code></pre>\n\n<p>When I use proxy:</p>\n\n<pre><code>proxy = Net::Telnet.new('Host' =&gt; '97.74.230.16', 'Port' =&gt; '59230',\n\"Telnetmode\" =&gt; false) {|c| print c}\n\ntelnet = Net::Telnet.new('Host', 'gmail-smtp-in.l.google.com' , 'Port' =&gt; 25, 'Prompt' =&gt; /[$%#&gt;] z/n, 'Timeout' =&gt; 10, \"Proxy\" =&gt;\nproxy, \"Telnetmode\" =&gt; false) {|c| print c}\n\ntelnet.cmd(\"helo 97.74.230.16\")\n\nRESPONSE -\n\n[ =&gt; \"\\u0000[\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\"\n</code></pre>\n\n<p>I am not sure what is happening and why I am getting such a weird response. </p>\n\n<p>What difference does it make to add a proxy? Am I using proxy in a wrong way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-admin"], "comments": [{"owner": {"reputation": 1027, "user_id": 7172464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mxB5X.jpg?s=128&g=1", "display_name": "Nino", "link": "https://stackoverflow.com/users/7172464/nino"}, "edited": false, "score": 0, "creation_date": 1525067638, "post_id": 50094449, "comment_id": 87205419, "body": "I have added default values to I18n related methods : <code>name(language = @language)</code> It seems to make rails_admin usable. But I don&#39;t see it as a good solution."}, {"owner": {"reputation": 63, "user_id": 9633658, "user_type": "registered", "profile_image": "https://graph.facebook.com/2109173902433349/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/9633658/jay"}, "edited": false, "score": 0, "creation_date": 1582343053, "post_id": 50094449, "comment_id": 106755058, "body": "Hey was browsing my old comments and saw this, did you ever figure it out?  the issue im seeing is youre using the symbol :name which is calling itself, but youre not passing a language in and it then throws that exception."}], "answers": [{"comments": [{"owner": {"reputation": 1027, "user_id": 7172464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mxB5X.jpg?s=128&g=1", "display_name": "Nino", "link": "https://stackoverflow.com/users/7172464/nino"}, "edited": false, "score": 0, "creation_date": 1525249456, "post_id": 50095194, "comment_id": 87278025, "body": "It just return the paramater name from translate_locations if there is one. Else it return the whole object."}, {"owner": {"reputation": 63, "user_id": 9633658, "user_type": "registered", "profile_image": "https://graph.facebook.com/2109173902433349/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/9633658/jay"}, "reply_to_user": {"reputation": 1027, "user_id": 7172464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mxB5X.jpg?s=128&g=1", "display_name": "Nino", "link": "https://stackoverflow.com/users/7172464/nino"}, "edited": false, "score": 0, "creation_date": 1525391815, "post_id": 50095194, "comment_id": 87348446, "body": "Yes but the solution name(language = @language) would be the correct one, in my opinion. Youre calling the name method and that method is expecting you to pass in a parameter, but since your not passing one in it needs a default."}, {"owner": {"reputation": 63, "user_id": 9633658, "user_type": "registered", "profile_image": "https://graph.facebook.com/2109173902433349/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/9633658/jay"}, "reply_to_user": {"reputation": 1027, "user_id": 7172464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mxB5X.jpg?s=128&g=1", "display_name": "Nino", "link": "https://stackoverflow.com/users/7172464/nino"}, "edited": false, "score": 0, "creation_date": 1525391879, "post_id": 50095194, "comment_id": 87348468, "body": "translation(language).try :name, is calling itself"}, {"owner": {"reputation": 63, "user_id": 9633658, "user_type": "registered", "profile_image": "https://graph.facebook.com/2109173902433349/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/9633658/jay"}, "reply_to_user": {"reputation": 1027, "user_id": 7172464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mxB5X.jpg?s=128&g=1", "display_name": "Nino", "link": "https://stackoverflow.com/users/7172464/nino"}, "edited": false, "score": 0, "creation_date": 1531451362, "post_id": 50095194, "comment_id": 89610264, "body": "did you ever figure it out?"}], "tags": [], "owner": {"reputation": 63, "user_id": 9633658, "user_type": "registered", "profile_image": "https://graph.facebook.com/2109173902433349/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/9633658/jay"}, "is_accepted": false, "score": 0, "last_activity_date": 1525070405, "creation_date": 1525070405, "answer_id": 50095194, "question_id": 50094449, "link": "https://stackoverflow.com/questions/50094449/how-to-add-argument-in-rails-admin-calls/50095194#50095194", "title": "How to add argument in rails_admin calls", "body": "<p>This could be nothing, and being a new developer myself i could be completely off the bat, but in you <strong>name</strong> method youre using try <strong>:name</strong>, so youre calling the function but not passing a <strong>language</strong> in. but like i said im new to ruby as well and thats my current understanding of symbols. there also isnt much code to go on so my scope is limited.</p>\n"}], "owner": {"reputation": 1027, "user_id": 7172464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mxB5X.jpg?s=128&g=1", "display_name": "Nino", "link": "https://stackoverflow.com/users/7172464/nino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525070405, "creation_date": 1525066191, "last_edit_date": 1525066582, "question_id": 50094449, "link": "https://stackoverflow.com/questions/50094449/how-to-add-argument-in-rails-admin-calls", "title": "How to add argument in rails_admin calls", "body": "<p>I have installed the gem <a href=\"https://github.com/sferik/rails_admin\" rel=\"nofollow noreferrer\">rails_admin</a> to manage datas of my application.</p>\n\n<p>But because of my models I keep having <code>ArgumentError</code>. For example I have a <code>Location</code> model with an <code>has_many</code> relation with the model <code>TranslateLocation</code>.</p>\n\n<p>In the <code>Location</code> model I have :</p>\n\n<pre><code>def name(language)\n    translation(language).try :name\nend\n\nprotected\ndef translation(language)\n    translate_locations.where(language: language).first\nend\n</code></pre>\n\n<p>It result on a \"wrong number of arguments (given 0, expected 1)\" for the <code>name</code> method.</p>\n\n<p>I define a variable <code>@language</code> in my application controller used in my controllers and views.</p>\n\n<p>How can I edit the default behaviour of rails_admin to use this variable when needed ?</p>\n\n<p>If it help you understand the context, <a href=\"https://github.com/treyssatvincent/hello-pass/blob/master/model.pdf\" rel=\"nofollow noreferrer\">here is a model of the app db</a></p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525064915, "post_id": 50093745, "comment_id": 87204541, "body": "It is hard to follow what you have from just the inspections you gave at some points within the method. Describe the initial value of <code>@log</code>, and how you called the method <code>remove_logItem</code> (of course with the arguments)."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1525066803, "creation_date": 1525066803, "answer_id": 50094534, "question_id": 50093745, "link": "https://stackoverflow.com/questions/50093745/reject-returns-nil-but-its-actually-deleting-the-object-from-the-array/50094534#50094534", "title": "&#39;reject!&#39; returns &#39;nil&#39;, but it&#39;s actually deleting the object from the array?", "body": "<p>This is the <a href=\"https://ruby-doc.org/core-2.5.0/Array.html#method-i-reject-21\" rel=\"nofollow noreferrer\">documented behaviour for <code>reject!</code></a>:</p>\n\n<blockquote>\n  <p>Deletes every element of <code>self</code> for which the block evaluates to true, if no changes were made returns <code>nil</code>.</p>\n</blockquote>\n\n<p>If you want to separate the objects based on criteria you might want to use <a href=\"https://ruby-doc.org/core-2.5.0/Enumerable.html#method-i-partition\" rel=\"nofollow noreferrer\"><code>partition</code></a>:</p>\n\n<pre><code>@log[date] #=&gt; {2008-09-12 =&gt; \"Apple\"}\nremoved, @log[date] = @log[date].partition {|logItem| logItem.name == name}\n</code></pre>\n\n<p>Where now you have, at the least, an empty array.</p>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 9633658, "user_type": "registered", "profile_image": "https://graph.facebook.com/2109173902433349/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/9633658/jay"}, "is_accepted": false, "score": 0, "last_activity_date": 1525071231, "creation_date": 1525071231, "answer_id": 50095347, "question_id": 50093745, "link": "https://stackoverflow.com/questions/50093745/reject-returns-nil-but-its-actually-deleting-the-object-from-the-array/50095347#50095347", "title": "&#39;reject!&#39; returns &#39;nil&#39;, but it&#39;s actually deleting the object from the array?", "body": "<p>you could loop over the Array and when the loop is equal to the value youre trying to delete and retrieve, use an if statement within the loop to set the variable equal to the one you want to delete and then delete it</p>\n\n<p>heres some sudo code</p>\n\n<pre><code>@foo.each do |hash| \n if hash == my_hash_to_delete\n  my_deleted = my_hash_to_delete\n  @foo.delete(hash)\n  break\n end\nend\n</code></pre>\n\n<p>edit: added break, you dont want to continue to loop once youve finished the task</p>\n"}], "owner": {"reputation": 1, "user_id": 9719219, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Donggeon Im", "link": "https://stackoverflow.com/users/9719219/donggeon-im"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1525071231, "creation_date": 1525060718, "last_edit_date": 1525064600, "question_id": 50093745, "link": "https://stackoverflow.com/questions/50093745/reject-returns-nil-but-its-actually-deleting-the-object-from-the-array", "title": "&#39;reject!&#39; returns &#39;nil&#39;, but it&#39;s actually deleting the object from the array?", "body": "<p>I have a hash <code>@log</code>, whose key is a date and whose value is an array of <code>LogItem</code> objects, each of which has date and name.</p>\n\n<p>I tried to remove an object from a value of the hash, and return the removed object. I thought <code>reject!</code> and <code>delete_if</code> methods return the object they removed from the array, and tried this:</p>\n\n<pre><code>def remove_logItem(name, date)\n  @log[date] #=&gt; {2008-09-12 =&gt; \"Apple\"}\n  array = @log[date].reject! {|logItem| logItem.name == name}\n  @log[date] #=&gt; []\n  array[0].nil? #=&gt; true\n  return array[0]\nend\n</code></pre>\n\n<p>It returns <code>nil</code>, but it still removes the object. Am I misunderstanding something? If so, is there other way to return the object after removing it from the array?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525061588, "post_id": 50093108, "comment_id": 87203774, "body": "<code>ActiveRecord::Base.transaction</code> is used by default when <code>save</code> or <code>destroy</code> is called on individual records. However, if you need to update multiple records in one go or not at all, the entire thing should be wrapped in a transaction. In this particular case, I am updating a <code>Trade</code>, updating a <code>Share</code>, creating a new <code>Share</code>, and, if necessary, deleting other <code>Trades</code>."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1525062239, "post_id": 50093108, "comment_id": 87203914, "body": "Have you tried writing any tests for your code?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1525062375, "post_id": 50093108, "comment_id": 87203943, "body": "also when you say `&quot;But then I check my database, and it says that there is still one Trade for amount: 60&quot;, how are you checking?  It also sounds like you could have race conditions.  Can you use callbacks?"}, {"owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525062654, "post_id": 50093108, "comment_id": 87204004, "body": "i&#39;m doing all my testing manually because i don&#39;t have the time to learn the rspec api from the ground up at this point in time. i am also checking my database manually. i am wrapping my code in a transaction to avoid race conditions. by &quot;callbacks&quot; do you mean that i should consider placing some of that code into a callback as opposed to a transaction?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1525063480, "post_id": 50093108, "comment_id": 87204184, "body": "You can learn the basics of mini test in 15 minutes, you&#39;ll surely lose way more time trying to debug the way you&#39;re going. You&#39;ve been warned.  <a href=\"https://github.com/seattlerb/minitest\" rel=\"nofollow noreferrer\">github.com/seattlerb/minitest</a>"}, {"owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525064373, "post_id": 50093108, "comment_id": 87204404, "body": "can whoever did it please not spitefully downvote my question? it&#39;s a valid q, and i&#39;ve provided work to show that i&#39;m not just asking others to do my work for me. thanks."}], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "is_accepted": true, "score": 0, "last_activity_date": 1525225381, "creation_date": 1525225381, "answer_id": 50126077, "question_id": 50093108, "link": "https://stackoverflow.com/questions/50093108/calling-self-class-where-in-a-transaction-but-the-records-im-trying-to-selec/50126077#50126077", "title": "calling self.class.where() in a transaction, but the records i&#39;m trying to select are ignored", "body": "<p><code>approved_at = ? AND discarded_at = ?</code> in the where clause should be <code>approved_at IS NULL AND discarded_at IS NULL</code></p>\n"}], "owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 50126077, "answer_count": 1, "score": -1, "last_activity_date": 1525225381, "creation_date": 1525053596, "last_edit_date": 1525055771, "question_id": 50093108, "link": "https://stackoverflow.com/questions/50093108/calling-self-class-where-in-a-transaction-but-the-records-im-trying-to-selec", "title": "calling self.class.where() in a transaction, but the records i&#39;m trying to select are ignored", "body": "<p>I'm using an <code>ActiveRecord::Base.transaction</code> to make a whole bunch of calls pertaining to a grouping of objects that must update/create simultaneously or not at all. One method in this transaction is supposed to use <code>where</code> to find and delete all <code>Trades</code> that match certain parameters.</p>\n\n<pre><code>class Trade &lt; ActiveRecord::Base\n include Discard::Model\n\n belongs_to :trade_requester, class_name: \"User\"\n belongs_to :wanted_share, class_name: \"Share\"\n\n validates :trade_requester, :wanted_share, presence: true\n validates :amount, presence: true\n\n def new_wanted_total\n  wanted_share.amount - amount\n end\n\n def update_wanted_share_amount(new_wanted_total)\n  wanted_share.update_attribute(:amount, new_wanted_total)\n end\n\n def delete_extraneous_wanted_trades(wanted_share)\n  self.class.where(\"wanted_share_id = ? AND amount &gt; ? AND approved_at = ? AND discarded_at = ?\", wanted_share.id, new_wanted_total, nil, nil).delete_all\n end\n\n def accept\n  ActiveRecord::Base.transaction do\n   delete_extraneous_wanted_trades(wanted_share)\n   update_wanted_share_amount(new_wanted_total) if new_wanted_total &gt;= 0\n   Share.create(user_id: self.trade_requester.id, item_id: self.wanted_share.item.id, amount: self.amount, active: false)\n   self.touch(:approved_at)\n  end\n end\nend\n</code></pre>\n\n<p>When I <code>accept</code> and check the output in my terminal, one line I get says this: </p>\n\n<pre><code>SQL (0.3ms)  DELETE FROM \"trades\" WHERE (wanted_share_id = 8 AND amount &gt; 25 AND approved_at = NULL AND discarded_at = NULL). \n</code></pre>\n\n<p>I am passing the correct information to the method, and the rest of the terminal output shows that the related records have been updated with the appropriate attributes (one <code>Share</code> set to <code>amount:25</code> and another <code>Share</code> created with <code>amount:50</code>). But then I check my database, and it says that there is still one <code>Trade</code> for <code>amount: 60</code>. This record exceeds the available total, which is now 50 (it was previously 75), and should have been deleted. But according to the terminal output, it was ignored. Why did this record go untouched?</p>\n"}]