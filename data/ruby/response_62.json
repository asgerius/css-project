[{"tags": ["mysql", "ruby-on-rails", "ruby", "join", "activerecord"], "comments": [{"owner": {"reputation": 2322, "user_id": 4443615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fynBi.jpg?s=128&g=1", "display_name": "Lucas Nelson", "link": "https://stackoverflow.com/users/4443615/lucas-nelson"}, "edited": false, "score": 0, "creation_date": 1458182839, "post_id": 36049247, "comment_id": 59749827, "body": "Is it possible that CarRegistration \u2192 <code>has_many</code> \u2192 Ride? It&#39;s a <code>belongs_to</code> in the question, but would make more sense to me the other way round."}], "answers": [{"comments": [{"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1458176473, "post_id": 36049592, "comment_id": 59747884, "body": "Hi @Lucas, thank you for your answer. I am sorry for the missing part, when I was writing the post, part of it got deleted while updating it. Now it&#39;s complete."}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1458176568, "post_id": 36049592, "comment_id": 59747915, "body": "Because I need to use on the statistics page information about the finished rides, I load them into <code>@rides_finished</code>. And then I hoped that once I have the rides loaded (and saved in a variable), I can extract from there another information - like information about passengers &amp; drivers."}, {"owner": {"reputation": 2322, "user_id": 4443615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fynBi.jpg?s=128&g=1", "display_name": "Lucas Nelson", "link": "https://stackoverflow.com/users/4443615/lucas-nelson"}, "reply_to_user": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1458181431, "post_id": 36049592, "comment_id": 59749412, "body": "That can work for small data sets, but I generally encourage the use of queries on the database to avoid loading &#39;too much&#39; into memory in the Rails app. I&#39;ll update my answer soon."}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1458196027, "post_id": 36049592, "comment_id": 59753805, "body": "I believe this schema is complicated, but I am not sure if I can come up with a better one... As the use of the application grows, so it grows also the amount of data in database tables (we use MySQL)."}], "tags": [], "owner": {"reputation": 2322, "user_id": 4443615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fynBi.jpg?s=128&g=1", "display_name": "Lucas Nelson", "link": "https://stackoverflow.com/users/4443615/lucas-nelson"}, "is_accepted": false, "score": 0, "last_activity_date": 1458174989, "creation_date": 1458174989, "answer_id": 36049592, "question_id": 36049247, "link": "https://stackoverflow.com/questions/36049247/rails-4-how-to-generate-statistics-through-joins-and-includes-commands-in/36049592#36049592", "title": "Rails 4 - how to generate statistics through &quot;joins&quot; and &quot;includes&quot; commands in Activerecord?", "body": "<p>Your question is a little confusing because your query uses <code>Ride</code> but there is no <code>Ride</code> in the model definitions listed. I've focussed purely on the example queries you listed.</p>\n\n<p>I think it would be easier to start with a single query chain for 'top passengers':</p>\n\n<pre><code>Passenger\n  .select('passengers.*')\n  .select('count(1) as ride_count')\n  .joins(:rides)\n  .where(rides: { status: 3,\n                  driver_currency: currency,\n                  passenger_currency: currency })\n  .group('passengers.id')\n  .order('ride_count desc')\n  .limit(10)\n</code></pre>\n\n<p>That will get you an ActiveRecord::Relation of <code>Passenger</code> models that also respond to a <code>ride_count</code> call, e.g. you could use it like:</p>\n\n<pre><code>results.each do |p|\n  puts \"#{p.name}: #{p.ride_count}'\nend\n</code></pre>\n\n<p>If all that works, you should be able to adjust the query to get the top drivers.</p>\n\n<p>To get the list of finished rides, I suggest a separate, simple query:</p>\n\n<pre><code>Ride.where(status: 3,\n           driver_currency: currency,\n           passenger_currency: currency)\n</code></pre>\n\n<p>Let me know if any of that produces an error.</p>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458176237, "creation_date": 1458172748, "last_edit_date": 1458176237, "question_id": 36049247, "link": "https://stackoverflow.com/questions/36049247/rails-4-how-to-generate-statistics-through-joins-and-includes-commands-in", "title": "Rails 4 - how to generate statistics through &quot;joins&quot; and &quot;includes&quot; commands in Activerecord?", "body": "<p>I kind of stuck at trying to generate statistics for my application. The relevant part of the application has the following structure:</p>\n\n<pre><code>class CarRegistration &lt; ActiveRecord::Base\n  belongs_to :ride\n  belongs_to :car\n  ...\nend\n\nclass Car &lt; ActiveRecord::Base\n  has_many :car_registration\n  ...\nend\n\nclass Ride &lt; ActiveRecord::Base\n  belongs_to :passenger\n  belongs_to :driver\n  has_many :car_registration\n  ...\nend\n\nclass Driver &lt; ActiveRecord::Base\n  has_many :cars\n  ...\nend\n\nclass Passenger &lt; ActiveRecord::Base\n  has_many :cars\n  ...\nend\n</code></pre>\n\n<p>I am trying to get a list of rides, top drivers and and top passengers. I originally tried something like this:</p>\n\n<pre><code>@rides_finished = Ride.joins(:car_registration)\n                      .select('rides.id')\n                      .where(\"(car_registrations.ride_id = rides.id)                                    \n                              AND rides.status = 3\n                              AND rides.driver_currency = ? \n                              AND rides.passenger_currency = ?\", currency, currency)\n                      .distinct # against displaying one shipment multiple times\n</code></pre>\n\n<p>And then I tried:</p>\n\n<pre><code>@top_pasengers = @rides_finished.joins(:passenger)\n                                .select('passengers.id, passengers.name, count(rides.passenger_id) AS count_all')\n                                .where('rides.passenger_id IS NOT NULL')\n                                .group('passengers.id')\n                                .order('count_all DESC')\n                                .limit(10)  \n</code></pre>\n\n<p>But when I run these queries, I get</p>\n\n<pre><code>Mysql2::Error: Unknown column 'count_all' in 'order clause': ...\n</code></pre>\n\n<p>Any help how to get the needed numbers?</p>\n\n<p>Thank you very much</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu", "odbc", "ibm-midrange"], "answers": [{"comments": [{"owner": {"reputation": 1961, "user_id": 1308979, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/899f97295621824a5f482a286f5062ca?s=128&d=identicon&r=PG", "display_name": "jeremywoertink", "link": "https://stackoverflow.com/users/1308979/jeremywoertink"}, "edited": false, "score": 0, "creation_date": 1458182629, "post_id": 36050221, "comment_id": 59749777, "body": "That makes sense. I&#39;ve been tasked with porting this app from PHP over to rails, and this connection string and that odbc.ini are exactly what the PHP app uses. This app is a mess, so it&#39;s possible it only uses one over the other. I tried that, and still get the same error. I&#39;ll update my example. Thanks"}, {"owner": {"reputation": 2113, "user_id": 2338816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bdca08e3dceb1f254e907d6f4e7faec?s=128&d=identicon&r=PG", "display_name": "user2338816", "link": "https://stackoverflow.com/users/2338816/user2338816"}, "reply_to_user": {"reputation": 1961, "user_id": 1308979, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/899f97295621824a5f482a286f5062ca?s=128&d=identicon&r=PG", "display_name": "jeremywoertink", "link": "https://stackoverflow.com/users/1308979/jeremywoertink"}, "edited": false, "score": 0, "creation_date": 1458201376, "post_id": 36050221, "comment_id": 59756329, "body": "Could be other issues. That just jumped out on first glance. More info in the question can help. DB2 OS version? DB2 group PTF level on server? System i Access service level on client?"}], "tags": [], "owner": {"reputation": 2113, "user_id": 2338816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bdca08e3dceb1f254e907d6f4e7faec?s=128&d=identicon&r=PG", "display_name": "user2338816", "link": "https://stackoverflow.com/users/2338816/user2338816"}, "is_accepted": false, "score": 0, "last_activity_date": 1458179039, "creation_date": 1458179039, "answer_id": 36050221, "question_id": 36049056, "link": "https://stackoverflow.com/questions/36049056/ruby-sequel-as-400-connection-issues/36050221#36050221", "title": "Ruby Sequel AS/400 connection issues", "body": "<p>You have this:</p>\n\n<pre><code>require 'sequel'\ndb = Sequel.odbc(:drvconnect=&gt;'driver={iSeries Access ODBC Driver}; system=my.host.com;...\n</code></pre>\n\n<p>But then you show this:</p>\n\n<pre><code>[my.host.com]\nDescription = IBM i Access ODBC Driver\nDriver      = IBM i Access ODBC Driver\n</code></pre>\n\n<p>If you actually have the <strong>IBM i Access ODBC Driver</strong>, Then that's what you should reference in your code, rather than <strong>iSeries Access ODBC Driver</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 1961, "user_id": 1308979, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/899f97295621824a5f482a286f5062ca?s=128&d=identicon&r=PG", "display_name": "jeremywoertink", "link": "https://stackoverflow.com/users/1308979/jeremywoertink"}, "is_accepted": false, "score": 0, "last_activity_date": 1458327976, "creation_date": 1458327976, "answer_id": 36092452, "question_id": 36049056, "link": "https://stackoverflow.com/questions/36049056/ruby-sequel-as-400-connection-issues/36092452#36092452", "title": "Ruby Sequel AS/400 connection issues", "body": "<p>Figured it out! It turns out that when you have your <code>/etc/odbc.ini</code> defined with all your connection info, you don't need a connection string. </p>\n\n<pre><code>require 'sequel'\ndb = Sequel.odbc(drvconnect: '')\ntables = db[:QSYS2__SYSTABLES].where(\"TABLE_NAME like ?\", \"SYS%\")\ntables.each { |r| puts r[:table_name] }\n</code></pre>\n\n<p>This query takes a stupid long time to run on my machine, but it does return all tables that start with \"SYS\". The only change I did need to make to my <code>/etc/odbc.ini</code> for this to work was to rename the DSN to \"default\"</p>\n\n<pre><code>[default]\nDescription = IBM i Access ODBC Driver\nDriver      = IBM i Access ODBC Driver\nSystem      = my.host.com\nUserID      = MYUSERNAME\nPassword    = MYPASSWORD\nNaming      = 1\nDefaultLibraries = *usrlibl;\nDatabase    = MYDBNAME\n</code></pre>\n\n<p>Just for anyone else that may run into this issue, here are a few other things I did along the way to get things working. My setup is Ubuntu 14.04</p>\n\n<ol>\n<li>Install <code>unixodbc</code> and <code>unixodbc-dev</code></li>\n<li>My <code>my.host.com</code> needed to be added to my <code>/etc/hosts</code> since it didn't resolve on public DNS.</li>\n<li>The driver filename I installed is called <code>ibm-iaccess-1.1.0.4-1.0.amd64.deb</code></li>\n<li>running <code>ldd /opt/ibm/iaccess/lib64/libcwbodbc.so</code> showed that there was a missing symlink.`</li>\n<li>Added missing symlink for <code>/usr/lib/x86_64-linux-gnu/libodbcinst.so.1</code> to <code>/usr/lib/x86_64-linux-gnu/libodbcinst.so.2</code></li>\n</ol>\n\n<p>That's it. Hope that helps other people too.</p>\n"}], "owner": {"reputation": 1961, "user_id": 1308979, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/899f97295621824a5f482a286f5062ca?s=128&d=identicon&r=PG", "display_name": "jeremywoertink", "link": "https://stackoverflow.com/users/1308979/jeremywoertink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1458327976, "creation_date": 1458171649, "last_edit_date": 1458182835, "question_id": 36049056, "link": "https://stackoverflow.com/questions/36049056/ruby-sequel-as-400-connection-issues", "title": "Ruby Sequel AS/400 connection issues", "body": "<p>I need to connect to a AS/400 system using ODBC connection, and I'm using the Ruby <a href=\"https://github.com/jeremyevans/sequel/\" rel=\"nofollow\">sequel gem</a>. My environment is just Ubuntu 14.04 running in virtual box. I'm able to run <code>isql -v my.host.com</code> and drop in to a sql console. When I try and do this from IRB, I get the error message.</p>\n\n<pre><code>require 'sequel'\ndb = Sequel.odbc(:drvconnect=&gt;'driver={IBM i Access ODBC Driver};system=my.host.com;database=MYDBNAME;uid=MYUSERNAME;password=MYPASSWORD;DefaultLibraries=, *usrlibl;authentication=server')\ntables = db[:QSYS2__SYSTABLES].where(\"TABLE_NAME like ?\", \"SYS%\")\ntables.each do |record|\n  puts record[:table_name]\nend\n\n#=&gt; Sequel::DatabaseConnectionError: ODBC::Error: IM002 (0) [unixODBC][Driver Manager]Data source name not found, and no default driver specified\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/adapters/odbc.rb:21:in `drvconnect'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/adapters/odbc.rb:21:in `connect'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/connection_pool.rb:103:in `make_new'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/connection_pool/threaded.rb:224:in `make_new'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/connection_pool/threaded.rb:197:in `available'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/connection_pool/threaded.rb:133:in `_acquire'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/connection_pool/threaded.rb:147:in `block in acquire'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/connection_pool/threaded.rb:265:in `block in sync'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/connection_pool/threaded.rb:265:in `synchronize'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/connection_pool/threaded.rb:265:in `sync'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/connection_pool/threaded.rb:146:in `acquire'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/database/connecting.rb:251:in `synchronize'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/adapters/odbc.rb:44:in `execute'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/dataset/actions.rb:952:in `execute'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/adapters/odbc.rb:97:in `fetch_rows'\nfrom /home/vagrant/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sequel-4.32.0/lib/sequel/dataset/actions.rb:141:in `each'\n</code></pre>\n\n<p>I'm not familiar at all with AS/400 or using ODBC connections, but if <code>isql</code> works then maybe it's a user permission error?</p>\n\n<p>Here is my <code>/etc/odbc.ini</code></p>\n\n<pre><code>[my.host.com]\nDescription = IBM i Access ODBC Driver\nDriver      = IBM i Access ODBC Driver\nSystem      = my.host.com\nUserID      = MYUSERNAME\nPassword    = MYPASSWORD\nNaming      = 1\nDefaultLibraries = *usrlibl;\nDatabase    = MYDBNAME\n</code></pre>\n\n<p>I should also mention that the AS/400 system is located remotely at the <code>my.host.com</code>, so I'm not trying to connect to some local running service. I am able to ping the IP address of that host though.</p>\n\n<p><strong>Edit</strong>: I've changed my driver in the drvconnect to match what's in the <code>odbc.ini</code> as per the suggestion below. Also I should note that I have a <code>/etc/odbcinst.ini</code> file with the following</p>\n\n<pre><code>[IBM i Access ODBC Driver]\nDescription     = IBM i Access for Linux ODBC Driver\nDriver      = /opt/ibm/iaccess/lib/libcwbodbc.so\nSetup       = /opt/ibm/iaccess/lib/libcwbodbcs.so\nDriver64        = /opt/ibm/iaccess/lib64/libcwbodbc.so\nSetup64     = /opt/ibm/iaccess/lib64/libcwbodbcs.so\nThreading       = 0\nDontDLClose     = 1\nUsageCount      = 1\n\n[IBM i Access ODBC Driver 64-bit]\nDescription     = IBM i Access for Linux 64-bit ODBC Driver\nDriver      = /opt/ibm/iaccess/lib64/libcwbodbc.so\nSetup       = /opt/ibm/iaccess/lib64/libcwbodbcs.so\nThreading       = 0\nDontDLClose     = 1\nUsageCount      = 1\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1458171546, "post_id": 36048939, "comment_id": 59746431, "body": "Can you show the stack trace? (further down on the error page). Also when posting an image please crop away anything irrelevant such as the blank console, the tabs, and the icons to the left."}], "answers": [{"tags": [], "owner": {"reputation": 554, "user_id": 5824259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-a65ax7kXB68/AAAAAAAAAAI/AAAAAAAAAA8/q3fFbjFHsOs/photo.jpg?sz=128", "display_name": "Lymuel", "link": "https://stackoverflow.com/users/5824259/lymuel"}, "is_accepted": false, "score": 0, "last_activity_date": 1458183849, "creation_date": 1458183849, "answer_id": 36050936, "question_id": 36048939, "link": "https://stackoverflow.com/questions/36048939/error-in-partial-layouts-in-rails-4/36050936#36050936", "title": "Error in partial layouts in rails 4", "body": "<p>try</p>\n\n<pre><code>&lt;%= render \"layouts/form\", jex: f %&gt;\n</code></pre>\n"}], "owner": {"reputation": 465, "user_id": 5863976, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9cdb4dc42143924424fbf97dbf5916a9?s=128&d=identicon&r=PG&f=1", "display_name": "MohNj", "link": "https://stackoverflow.com/users/5863976/mohnj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458183849, "creation_date": 1458170967, "last_edit_date": 1458173966, "question_id": 36048939, "link": "https://stackoverflow.com/questions/36048939/error-in-partial-layouts-in-rails-4", "title": "Error in partial layouts in rails 4", "body": "<p>I have this view:</p>\n\n<pre><code>&lt;%= form_for(:subject, :url =&gt; { :action =&gt; 'update', :id =&gt; @subject.id}) do |f| %&gt;\n&lt;%= render partial: \"layouts/form\" , locals: {:jex =&gt; f}  %&gt;\n</code></pre>\n\n<p>And this form partial:</p>\n\n<pre><code>    &lt;div class=\"form-group\"&gt;\n        &lt;label class=\"col-sm-2 control-label \"&gt;Name&lt;/label&gt;\n        &lt;div class=\"col-sm-10 form-padding \"&gt;&lt;%= jex.text_field(:name ,:class =&gt; \"form-control\") %&gt;&lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>But, I have an error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/H44DD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H44DD.png\" alt=\"undefined local variable or method `jex&#39;\"></a></p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "macos", "capslock"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1458173596, "post_id": 36048913, "comment_id": 59747105, "body": "Maybe you could glue something together using <a href=\"http://blog.fosketts.net/2010/08/09/assign-keyboard-shortcut-applescript-automator-service/\" rel=\"nofollow noreferrer\">Automator and a global hotkey</a>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1458191384, "post_id": 36048913, "comment_id": 59752149, "body": "maybe check out my <a href=\"https://github.com/maxpleaner/linux-keyboard-macros\" rel=\"nofollow noreferrer\">linux-keyboard-macros</a> for a little inspiration. It won&#39;t work on OSX unless you install <code>evtest</code> and <code>xdotool</code>, and even then you&#39;d have to add support for capslock. Bascially what I did is find a program which shows a streaming output of all keys pressed, then I captured that stream&#39;s output in Ruby, parsed it using Regex, and tracked which &quot;phrases&quot; were typed in order to triger events."}], "owner": {"reputation": 2705, "user_id": 4179020, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3079793ecd2b48c3c59888e7b015d3dd?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Kuhlmann", "link": "https://stackoverflow.com/users/4179020/andr%c3%a9-kuhlmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458170840, "creation_date": 1458170840, "question_id": 36048913, "link": "https://stackoverflow.com/questions/36048913/ruby-run-on-keyboard-shortcut", "title": "Ruby run on Keyboard Shortcut", "body": "<p>I want ruby to perform an action when the capslock button is pressed. \nOn my Mac I installed the program called Sail which changes the capslock keycode to the keycode of F19 (80). Is there now a way to run some ruby code when the capslock button gets pressed?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos"], "comments": [{"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 1, "creation_date": 1458169862, "post_id": 36048632, "comment_id": 59745817, "body": "It looks like you have back-tics ` instead of quotes &#39;&#39; around <code>root &#39;pages#home&#39;</code> If you copy and pasted that try just typing it on a new line."}, {"owner": {"reputation": 165, "user_id": 988032, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LKhvx.jpg?s=128&g=1", "display_name": "Aloalo", "link": "https://stackoverflow.com/users/988032/aloalo"}, "edited": false, "score": 0, "creation_date": 1458174918, "post_id": 36048632, "comment_id": 59747453, "body": "Do you have <code>end</code> after <code>pages&#47;home</code> in your <code>routes.rb</code> file?"}, {"owner": {"reputation": 19, "user_id": 6074167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333b2e184e16e7ae7c4feb55776dc7e3?s=128&d=identicon&r=PG&f=1", "display_name": "Pwitt", "link": "https://stackoverflow.com/users/6074167/pwitt"}, "edited": false, "score": 0, "creation_date": 1458226438, "post_id": 36048632, "comment_id": 59774625, "body": "That looks to be it.  I&#39;m using textedit and it seems to be converting my tics to a different character.  Can&#39;t seem to turn the behavior off.  Probably not the editor I should be using.  Thanks for the feedback.  I starred at this for hours yesterday wondering why it didn&#39;t work.  and I do have an &#39;end&#39; at the very bottom of the routes.rb file."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6074167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333b2e184e16e7ae7c4feb55776dc7e3?s=128&d=identicon&r=PG&f=1", "display_name": "Pwitt", "link": "https://stackoverflow.com/users/6074167/pwitt"}, "edited": false, "score": 0, "creation_date": 1458226603, "post_id": 36049675, "comment_id": 59774784, "body": "Thanks as well.  I&#39;ve consumed every tutorial I can find.  No DB migration yet."}], "tags": [], "owner": {"reputation": 233, "user_id": 5890013, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Vd4YG.jpg?s=128&g=1", "display_name": "DustinRW", "link": "https://stackoverflow.com/users/5890013/dustinrw"}, "is_accepted": false, "score": 0, "last_activity_date": 1458175555, "creation_date": 1458175555, "answer_id": 36049675, "question_id": 36048632, "link": "https://stackoverflow.com/questions/36048632/ruby-routes-issue-on-first-app-mac-newbie-warning/36049675#36049675", "title": "Ruby Routes issue on first app (Mac). - Newbie warning", "body": "<p>Judging by your error:</p>\n\n<pre><code>/Users/emusic/Sites/myrubyblog2/config/routes.rb:4:in `block in &lt;top (required)&gt;': undefined local variable or method `\u2018pages' for #&lt;ActionDispatch::Routing::Mapper:0x007fb85e2c2b80&gt; (NameError)\n</code></pre>\n\n<p>it appears your root is written wrong here:</p>\n\n<pre><code>root \u2018pages#home\u2019\n</code></pre>\n\n<p>Try <code>root 'pages#home'</code> instead.  </p>\n\n<p>Also note that you can then hash out or remove <code>get 'pages/home'</code></p>\n\n<p>Try reading through this to get a better understanding:</p>\n\n<p><a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow\">http://guides.rubyonrails.org/getting_started.html</a> section <strong>4.3</strong></p>\n\n<p>Have you tried migrating your database prior to launch: <code>rake db:migrate</code> or <code>rake db:reset</code>?</p>\n"}], "owner": {"reputation": 19, "user_id": 6074167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333b2e184e16e7ae7c4feb55776dc7e3?s=128&d=identicon&r=PG&f=1", "display_name": "Pwitt", "link": "https://stackoverflow.com/users/6074167/pwitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458175555, "creation_date": 1458169462, "last_edit_date": 1458169751, "question_id": 36048632, "link": "https://stackoverflow.com/questions/36048632/ruby-routes-issue-on-first-app-mac-newbie-warning", "title": "Ruby Routes issue on first app (Mac). - Newbie warning", "body": "<p>I've gone through the installs and it seems to work correctly.  I can get to the default home page and spin up the server, but once I generate a couple of things and update the routes.rb file, I can't get the server to run after updating routes.\nHere is the top of routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n\n# set the index page / root url\n  root \u2018pages#home\u2019\n\n  get 'pages/about'\n\n  get 'pages/home'\n</code></pre>\n\n<p>Here is what I get (I'd guess I'm missing something obvious) when running the server:</p>\n\n<pre><code>Mymachine:myrubyblog2 emusic$ rails s\n=&gt; Booting WEBrick\n=&gt; Rails 4.2.4 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Ctrl-C to shutdown server\nExiting\n/Users/emusic/Sites/myrubyblog2/config/routes.rb:4:in `block in &lt;top (required)&gt;': undefined local variable or method `\u2018pages' for #&lt;ActionDispatch::Routing::Mapper:0x007fb85e2c2b80&gt; (NameError)\n</code></pre>\n\n<p>This is what I get on a Generate:</p>\n\n<pre><code>:myrubyblog emusic$ rails generate controller home index\n/Users/emusic/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:268:in `load': /Users/emusic/Sites/myrubyblog/config/routes.rb:2: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '(' (SyntaxError)\n</code></pre>\n\n<p>I've checked formatting every way I can imaging and can't see what is wrong.</p>\n"}, {"tags": ["ruby", "csv", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 144, "user_id": 1815834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8339ab2f650ef56f84d8b6d0dbe8262?s=128&d=identicon&r=PG", "display_name": "Faridco", "link": "https://stackoverflow.com/users/1815834/faridco"}, "edited": false, "score": 0, "creation_date": 1490287823, "post_id": 36048567, "comment_id": 73056579, "body": "does form include <code>enctype=&quot;multipart&#47;form-data&quot;</code>. without this <code>input type=&quot;file&quot;</code>&#39;s value will be sent with just filename"}], "answers": [{"comments": [{"owner": {"reputation": 813, "user_id": 1953246, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a3fe6567801c050a925860e0465a4d57?s=128&d=identicon&r=PG", "display_name": "Lut", "link": "https://stackoverflow.com/users/1953246/lut"}, "edited": false, "score": 0, "creation_date": 1458777605, "post_id": 36052183, "comment_id": 60016759, "body": "Hi Debasish, I have added the file.path but still get an error. undefined method `path&#39; for &quot;insert_direcciones_TEST.csv&quot;:String CSV.foreach(file.path, headers: true) do |row|"}], "tags": [], "owner": {"reputation": 156, "user_id": 5413717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bfee6606a5d28858e1d9d0882492661?s=128&d=identicon&r=PG&f=1", "display_name": "debasish117", "link": "https://stackoverflow.com/users/5413717/debasish117"}, "is_accepted": false, "score": 0, "last_activity_date": 1458191714, "creation_date": 1458191714, "answer_id": 36052183, "question_id": 36048567, "link": "https://stackoverflow.com/questions/36048567/csv-import-undefined-method-path/36052183#36052183", "title": "CSV Import: undefined method `path&#39;", "body": "<p>You have written Address Model as this :-</p>\n\n<pre><code>def self.import(file)\n    CSV.foreach(file, headers: true) do |row|\n        Address.create! row.to_hash\n    end\nend\n</code></pre>\n\n<p>I think if you change a bit like the following,it should work :-</p>\n\n<pre><code>def self.import(file)\n        CSV.foreach(file.path, headers: true) do |row|\n            Address.create! row.to_hash\n        end\n    end\n</code></pre>\n\n<p>Hope it works !</p>\n"}, {"comments": [{"owner": {"reputation": 813, "user_id": 1953246, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a3fe6567801c050a925860e0465a4d57?s=128&d=identicon&r=PG", "display_name": "Lut", "link": "https://stackoverflow.com/users/1953246/lut"}, "edited": false, "score": 0, "creation_date": 1458777154, "post_id": 36053349, "comment_id": 60016625, "body": "Hi Tilo, I removed .path, however I still get an error. Errno::ENOENT in AddressesController#import_addresses No such file or directory @ rb_sysopen - insert_direcciones_TEST.csv ...CSV.foreach(file, headers: true) do |row|"}, {"owner": {"reputation": 31555, "user_id": 677684, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a785c03c08d7de6a15aaea326835cd6?s=128&d=identicon&r=PG", "display_name": "Tilo", "link": "https://stackoverflow.com/users/677684/tilo"}, "reply_to_user": {"reputation": 813, "user_id": 1953246, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a3fe6567801c050a925860e0465a4d57?s=128&d=identicon&r=PG", "display_name": "Lut", "link": "https://stackoverflow.com/users/1953246/lut"}, "edited": false, "score": 0, "creation_date": 1458799302, "post_id": 36053349, "comment_id": 60022223, "body": "you need to set params[:file] to the filename on your local machine which needs to be imported"}, {"owner": {"reputation": 579, "user_id": 4543241, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/gj0t4.jpg?s=128&g=1", "display_name": "Manish Nagdewani", "link": "https://stackoverflow.com/users/4543241/manish-nagdewani"}, "reply_to_user": {"reputation": 813, "user_id": 1953246, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a3fe6567801c050a925860e0465a4d57?s=128&d=identicon&r=PG", "display_name": "Lut", "link": "https://stackoverflow.com/users/1953246/lut"}, "edited": false, "score": 1, "creation_date": 1490288392, "post_id": 36053349, "comment_id": 73056939, "body": "@Lut You need to send full path as string which needs to be imported."}, {"owner": {"reputation": 31555, "user_id": 677684, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a785c03c08d7de6a15aaea326835cd6?s=128&d=identicon&r=PG", "display_name": "Tilo", "link": "https://stackoverflow.com/users/677684/tilo"}, "edited": false, "score": 0, "creation_date": 1490380931, "post_id": 36053349, "comment_id": 73103344, "body": "it&#39;s usually a good idea not to assume what the current working directory is - using absolute paths is much safer"}], "tags": [], "owner": {"reputation": 31555, "user_id": 677684, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a785c03c08d7de6a15aaea326835cd6?s=128&d=identicon&r=PG", "display_name": "Tilo", "link": "https://stackoverflow.com/users/677684/tilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1458197079, "creation_date": 1458197079, "answer_id": 36053349, "question_id": 36048567, "link": "https://stackoverflow.com/questions/36048567/csv-import-undefined-method-path/36053349#36053349", "title": "CSV Import: undefined method `path&#39;", "body": "<p>This is your code:</p>\n\n<pre><code>Address.import(   params[:file].path   )\n</code></pre>\n\n<p>I added a couple of spaces... do you see the problem?</p>\n\n<p><code>params[:file]</code> is a String</p>\n\n<p>The String class does not have a <code>path</code> method</p>\n\n<p>That's the error you are seeing.</p>\n\n<p>Just remove <code>.path</code> and it should work</p>\n"}, {"comments": [{"owner": {"reputation": 813, "user_id": 1953246, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a3fe6567801c050a925860e0465a4d57?s=128&d=identicon&r=PG", "display_name": "Lut", "link": "https://stackoverflow.com/users/1953246/lut"}, "edited": false, "score": 0, "creation_date": 1490297575, "post_id": 42984880, "comment_id": 73062416, "body": "This was the solution."}], "tags": [], "owner": {"reputation": 51, "user_id": 7725152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03431dc0883a87197d371d6966228f2?s=128&d=identicon&r=PG&f=1", "display_name": "Charles K", "link": "https://stackoverflow.com/users/7725152/charles-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1490298598, "last_edit_date": 1490298598, "creation_date": 1490296003, "answer_id": 42984880, "question_id": 36048567, "link": "https://stackoverflow.com/questions/36048567/csv-import-undefined-method-path/42984880#42984880", "title": "CSV Import: undefined method `path&#39;", "body": "<p>Please try this</p>\n\n<pre><code>form_tag(import_addresses_path, :multipart =&gt; true) do \n</code></pre>\n\n<p>The multipart option is not part of the url_for options. so you have to make them explicitly separate*</p>\n\n<p>The form_tag isn't generated right and string is sent to controller, not the object. </p>\n"}], "owner": {"reputation": 813, "user_id": 1953246, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a3fe6567801c050a925860e0465a4d57?s=128&d=identicon&r=PG", "display_name": "Lut", "link": "https://stackoverflow.com/users/1953246/lut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1838, "favorite_count": 1, "accepted_answer_id": 42984880, "answer_count": 3, "score": 2, "last_activity_date": 1490298598, "creation_date": 1458169092, "question_id": 36048567, "link": "https://stackoverflow.com/questions/36048567/csv-import-undefined-method-path", "title": "CSV Import: undefined method `path&#39;", "body": "<p>I am trying to import a CSV with addresses. I am requiring 'csv' at the controller. However I get this error:</p>\n\n<pre><code>NoMethodError in AddressesController#import_addresses\n\nundefined method `path' for \"testimport.csv\":String\n\n Address.import(params[:file].path)\n</code></pre>\n\n<p>Address Controller</p>\n\n<pre><code>class AddressesController &lt; ApplicationController\n\n  require 'csv'\n\n  def import_addresses\n    Address.import(params[:file].path)\n    redirect_to root_url, notice: \"Addresses imported.\"\n  end\n</code></pre>\n\n<p>Address Model</p>\n\n<pre><code>def self.import(file)\n    CSV.foreach(file, headers: true) do |row|\n        Address.create! row.to_hash\n    end\nend\n</code></pre>\n\n<p>Reference: <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow\">http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html</a></p>\n"}, {"tags": ["arrays", "ruby", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "is_accepted": true, "score": 4, "last_activity_date": 1458168805, "creation_date": 1458168805, "answer_id": 36048512, "question_id": 36048487, "link": "https://stackoverflow.com/questions/36048487/ruby-remove-an-item-from-an-array-of-dictionary-based-off-of-key/36048512#36048512", "title": "Ruby - Remove an item from an array of dictionary based off of key", "body": "<pre><code>people.delete_if{|element| element['name'] == 'Bill'}\n# =&gt; [{\"name\"=&gt;\"Jim\", \"car\"=&gt;\"Porche\", \"houseSize\"=&gt;\"big\"}] \n</code></pre>\n\n<p>BTW: Your hashes are missing some commas.</p>\n\n<pre><code>people = [\n  {\n    'name' =&gt; \"Jim\",\n    'car' =&gt; \"Porche\",\n    'houseSize' =&gt; \"big\"\n  },\n  {\n    'name' =&gt; \"Bill\",\n    'car' =&gt; \"Honda\",\n    'houseSize' =&gt; \"small\"\n  }\n]\n</code></pre>\n"}], "owner": {"reputation": 304, "user_id": 4707733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ef0VL.png?s=128&g=1", "display_name": "Stewart Hering", "link": "https://stackoverflow.com/users/4707733/stewart-hering"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 36048512, "answer_count": 1, "score": -2, "last_activity_date": 1458169405, "creation_date": 1458168718, "last_edit_date": 1458169405, "question_id": 36048487, "link": "https://stackoverflow.com/questions/36048487/ruby-remove-an-item-from-an-array-of-dictionary-based-off-of-key", "title": "Ruby - Remove an item from an array of dictionary based off of key", "body": "<p>I have an array that stores data similarly to this:</p>\n\n<pre><code>people = [\n   {\n    'name' =&gt; \"Jim\",\n    'car' =&gt; \"Porche\",\n    'houseSize' =&gt; \"big\",\n   },\n\n   {\n    'name' =&gt; \"Bill\",\n    'car' =&gt; \"Honda\",\n    'houseSize' =&gt; \"small\",\n   }\n]\n</code></pre>\n\n<p>How would I go about deleting an item in the array based off of a key in the dictionary. \ni.e. If I wanted to delete the dictionary with a name value of \"Bill\" how would I go about doing it?</p>\n"}, {"tags": ["ruby", "syntax"], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1458168838, "last_edit_date": 1458168838, "creation_date": 1458168663, "answer_id": 36048468, "question_id": 36048434, "link": "https://stackoverflow.com/questions/36048434/ruby-and-bang-operator/36048468#36048468", "title": "Ruby &amp;! (and bang) Operator", "body": "<p>Method <code>&amp;</code> is defined on <code>true</code>, <code>false</code>, <code>nil</code>, but not on a hash.</p>\n\n<p><code>true &amp; obj</code> returns <code>false</code> if <code>obj</code> is <code>nil</code> or <code>false</code>, <code>true</code> otherwise.\n<code>false &amp; obj</code> and <code>nil &amp; obj</code> return <code>false</code>. <code>obj</code> is always evaluated as it is the argument to a method call\u2014there is no short-circuit evaluation in this case.</p>\n\n<p>In short, read the manual.</p>\n"}, {"tags": [], "owner": {"reputation": 20458, "user_id": 122087, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/431c64e3e3fd0c892ad2a7e4150cf63e?s=128&d=identicon&r=PG", "display_name": "Paul A Jungwirth", "link": "https://stackoverflow.com/users/122087/paul-a-jungwirth"}, "is_accepted": false, "score": 0, "last_activity_date": 1458168833, "last_edit_date": 1458168833, "creation_date": 1458168681, "answer_id": 36048473, "question_id": 36048434, "link": "https://stackoverflow.com/questions/36048434/ruby-and-bang-operator/36048473#36048473", "title": "Ruby &amp;! (and bang) Operator", "body": "<p>It's two different operators. <code>&amp;</code> is bitwise and, and <code>!</code> is negation, of course. So <code>true</code> and <code>false</code> and <code>nil</code> know about bitwise and, but not hashes.</p>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1458170115, "post_id": 36048706, "comment_id": 59745910, "body": "@penne12 Is this all you wanted to know?"}, {"owner": {"reputation": 4831, "user_id": 3144928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e2a01c799169f3de4c57c0f0366840f?s=128&d=identicon&r=PG", "display_name": "Ben Aubin", "link": "https://stackoverflow.com/users/3144928/ben-aubin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1458220846, "post_id": 36048706, "comment_id": 59770074, "body": "@sawa I just really appreciated the fact that the answer included the sexp - helped me understand it better - your answer was also very helpful,"}], "tags": [], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "is_accepted": true, "score": 1, "last_activity_date": 1458170469, "last_edit_date": 1458170469, "creation_date": 1458169773, "answer_id": 36048706, "question_id": 36048434, "link": "https://stackoverflow.com/questions/36048434/ruby-and-bang-operator/36048706#36048706", "title": "Ruby &amp;! (and bang) Operator", "body": "<p><code>a &amp;! b</code> is the same as <code>a &amp; (!b)</code></p>\n\n<p>We can see this with ruby <a href=\"https://github.com/whitequark/parser\" rel=\"nofollow\">parser</a>:</p>\n\n<pre><code>Parser::CurrentRuby.parse(\"true &amp;! false\") \n#=&gt; \n#s(:send,\n# s(:true), :&amp;,\n# s(:send,\n#   s(:false), :!))\n</code></pre>\n\n<p><code>&amp;</code> is the bitwise-and operator, however on boolean values and nil it acts the same as <code>&amp;&amp;</code>. In ruby all hashes are truthy, so <code>!{foo: 'bar'}</code> is always <code>false</code>.</p>\n"}], "owner": {"reputation": 4831, "user_id": 3144928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e2a01c799169f3de4c57c0f0366840f?s=128&d=identicon&r=PG", "display_name": "Ben Aubin", "link": "https://stackoverflow.com/users/3144928/ben-aubin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 1, "accepted_answer_id": 36048706, "answer_count": 3, "score": 2, "last_activity_date": 1458220931, "creation_date": 1458168523, "last_edit_date": 1458220931, "question_id": 36048434, "link": "https://stackoverflow.com/questions/36048434/ruby-and-bang-operator", "title": "Ruby &amp;! (and bang) Operator", "body": "<p>I was playing around with Ruby, and I came across <code>&amp;!</code>, so I played around with it a bit:</p>\n\n<pre><code>true &amp;! true #=&gt; false\ntrue &amp;! false #=&gt; true\ntrue &amp;! nil #=&gt; true\ntrue &amp;! {:test=&gt;:foo} #=&gt; false\nfalse &amp;! true #=&gt; false\nfalse &amp;! false #=&gt; false\nfalse &amp;! nil #=&gt; false\nfalse &amp;! {:test=&gt;:foo} #=&gt; false\nnil &amp;! true #=&gt; false\nnil &amp;! false #=&gt; false\nnil &amp;! nil #=&gt; false\nnil &amp;! {:test=&gt;:foo} #=&gt; false\n</code></pre>\n\n<p>Looks like <code>value &amp;&amp; !value</code> so far, but...    </p>\n\n<pre><code>{:test=&gt;:foo} &amp;! true\n</code></pre>\n\n<p>gave an error</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>NoMethodError: undefined method `&amp;' for {:test=&gt;:foo}:Hash\n        from (irb):23:in `block (2 levels) in irb_binding'\n        from (irb):23:in `each'\n        from (irb):23:in `block in irb_binding'\n        from (irb):23:in `each'\n        from (irb):23\n        from /usr/local/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>So, I assume it's 2 different operators? If so, what do they do? I don't think I've seen them. Is it safe to use for comparing values?</p>\n\n<p>PS: Here's the script I used to test this: </p>\n\n<pre><code>test.each {|v| test.each{ |v2| print \"#{v.inspect} &amp;! #{v2.inspect} #=&gt; \" ; p v &amp;! v2 }}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "attributes"], "answers": [{"tags": [], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "is_accepted": true, "score": 0, "last_activity_date": 1458239723, "creation_date": 1458239723, "answer_id": 36068976, "question_id": 36048300, "link": "https://stackoverflow.com/questions/36048300/rails-how-to-decorate-an-attribute-in-a-similar-fasion-to-alias-method-chain/36068976#36068976", "title": "Rails: How to decorate an attribute in a similar fasion to alias_method_chain?", "body": "<p>Simply access the attribute directly like so:</p>\n\n<pre><code>def fooattr_raw\n  self.attributes[\"fooattr\"]\nend\n\ndef fooattr\n  add_feature_to fooattr_raw\nend\n</code></pre>\n"}], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 36068976, "answer_count": 1, "score": 0, "last_activity_date": 1458239723, "creation_date": 1458167844, "last_edit_date": 1495541760, "question_id": 36048300, "link": "https://stackoverflow.com/questions/36048300/rails-how-to-decorate-an-attribute-in-a-similar-fasion-to-alias-method-chain", "title": "Rails: How to decorate an attribute in a similar fasion to alias_method_chain?", "body": "<p>In rails, this is a common pattern:</p>\n\n<pre><code>def foo_with_feature\n  add_feature_to foo_without_feature\nend\n\nalias_method_chain :foo, :feature\n</code></pre>\n\n<p>I want to do this but with an attribute, whose getter method is not defined and will be done on-the-fly with <code>method_missing</code>, see <a href=\"https://stackoverflow.com/questions/16727976/why-alias-method-fails-in-rails-model\">Why alias_method fails in Rails model</a></p>\n\n<p>How can I decorate an attribute getter that hasn't been set?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "email"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1458373164, "post_id": 36048080, "comment_id": 59841789, "body": "Why won\u2019t you just introduce a default value for <code>email</code> field, setting it to this <code>SecureRandom</code> <i>before user creation</i> and make it editable field?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1458406676, "post_id": 36048080, "comment_id": 59851234, "body": "@mudasobwa a user doesn&#39;t have to add his email if he is signing in through facebook, but if he decided to add it anywhere in the signup process like in the challenges creation form then I want that to override <code>SecureRandom</code> somehow. I&#39;m confused with how do I store user <code>email</code> in session for <code>nil</code> user and then save it upon create if facebook. I showed my work for how I stored challenge attributes."}, {"owner": {"reputation": 740, "user_id": 3993528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a8e387fa8dfb4e2e1a2d827c0fdfd8?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/3993528/joseph"}, "edited": false, "score": 1, "creation_date": 1458519405, "post_id": 36048080, "comment_id": 59882735, "body": "Have you tried -- <code>session[:reminder_email] = params[:email]</code> or take a look at the params you have in your <code>challenges_controller</code> <code>create</code> method to see what it is called? If it&#39;s part of the form that&#39;s submitted, it should be there. Then you can check for its presence at the point where you are setting the <code>SecureRandom</code> email and use it instead if it is there (remember to delete it...)."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1458548709, "post_id": 36048080, "comment_id": 59891518, "body": "Save the email in the session. When the facebook auth is complete you will have a chance to update the user&#39;s email to whatever is stored in session."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 740, "user_id": 3993528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a8e387fa8dfb4e2e1a2d827c0fdfd8?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/3993528/joseph"}, "edited": false, "score": 0, "creation_date": 1458582345, "post_id": 36048080, "comment_id": 59914630, "body": "Thanks @Joseph. Okay so I add <code>session[:reminder_email] = params[:email]</code>. Then I make it something like this: <code>user.email = SecureRandom.hex + &quot;@mailinator.com unless :reminder.email.present?&quot;</code> Sorry just confused by the last part of your comment"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1458582375, "post_id": 36048080, "comment_id": 59914652, "body": "How would you save it to the session @maxpleaner?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1458587885, "post_id": 36048080, "comment_id": 59917851, "body": "@AnthonyGalli.com you&#39;re already doing it in Challenges#create"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1458589011, "post_id": 36048080, "comment_id": 59918480, "body": "So <code>session[:reminder_emaill] = params[:email]</code> like Joseph suggested @maxpleaner? &quot;you will have a chance to update the user&#39;s email to whatever is stored&quot; - How do I stop SecureRandom from overriding user&#39;s stored email? Doesn&#39;t create challenge occur before create user and therefore SecureRandom will override otherwise I would use <code>user.email = SecureRandom.hex + &quot;@mailinator.com&quot; unless user.email.present?</code>"}, {"owner": {"reputation": 740, "user_id": 3993528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a8e387fa8dfb4e2e1a2d827c0fdfd8?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/3993528/joseph"}, "edited": false, "score": 0, "creation_date": 1458607866, "post_id": 36048080, "comment_id": 59926448, "body": "first, if those are your actual <code>Koala::Facebook::OAuth</code> secret keys/ids, you need to change them immediately. second, post the code that invokes <code>User.from_omniauth</code> and indicate which controller it is"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 740, "user_id": 3993528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a8e387fa8dfb4e2e1a2d827c0fdfd8?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/3993528/joseph"}, "edited": false, "score": 0, "creation_date": 1458607947, "post_id": 36048080, "comment_id": 59926478, "body": "Thanks @Joseph. They&#39;re aren&#39;t ;)"}, {"owner": {"reputation": 740, "user_id": 3993528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a8e387fa8dfb4e2e1a2d827c0fdfd8?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/3993528/joseph"}, "edited": false, "score": 0, "creation_date": 1458608018, "post_id": 36048080, "comment_id": 59926506, "body": "OK, good! -- but post the code that calls that method and explain how we get there."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 740, "user_id": 3993528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a8e387fa8dfb4e2e1a2d827c0fdfd8?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/3993528/joseph"}, "edited": false, "score": 0, "creation_date": 1458608144, "post_id": 36048080, "comment_id": 59926542, "body": "I realized that this question is too buff. So I broke it down into smaller problems. I&#39;m working on solving this one now: <a href=\"http://stackoverflow.com/questions/36142241/how-to-store-email-in-session-and-save-upon-create-to-new-user\" title=\"how to store email in session and save upon create to new user\">stackoverflow.com/questions/36142241/&hellip;</a>. I don&#39;t love using cookies and the other answer doesn&#39;t work so I&#39;m still struggling @Joseph"}], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458582113, "post_id": 36128923, "comment_id": 59914495, "body": "Which controller and where do I put that first line of code? The goal isn&#39;t to get the&quot;email you want to show in the field&quot;. The goal of the question is to not let SecureRandom override entered email. Hope that clarifies things. Thanks for your help!"}, {"owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458621297, "post_id": 36128923, "comment_id": 59930021, "body": "yeah right its overriding because of the code : <code>user.email = SecureRandom.hex + &quot;@mailinator.com&quot; unless user.email.present?</code> as in omniauth function its not accessing the entered email in the form. comment out this line and this will work fine. plus if you want to display securerandom in case of no email then you have to add a check with the email field to not change text if its already filled."}, {"owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458621771, "post_id": 36128923, "comment_id": 59930155, "body": "@anthony There is another possibility you are not getting email params right like try params[:user][:email] instead of params[:email] in update_user_email method."}], "tags": [], "owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "is_accepted": false, "score": 1, "last_activity_date": 1458557091, "creation_date": 1458557091, "answer_id": 36128923, "question_id": 36048080, "link": "https://stackoverflow.com/questions/36048080/entered-email-override-securerandom-email/36128923#36128923", "title": "Entered email override SecureRandom email?", "body": "<p>@joseph had answered it pretty simple but i think you can just get email in the field by setting it in the controller like; \n<code>User.new(:email =&gt; \"email you want to show in the field\")</code>\n no need to pass nil user object pass a new object.</p>\n\n<p>And in the view file it will shown in email field with </p>\n\n<pre><code>Send email reminder to &lt;%= f.email_field :email, class: \"send-email\", placeholder: \"Enter Email\" %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458678037, "post_id": 36164195, "comment_id": 59966044, "body": "I put the first chunk of code in the user model and in the from_omniauth method I have <code>user.email = SecureRandom.hex + &quot;@mailinator.com&quot; unless user.email.present?</code>. I put the second chunk of code in the challenges_controller create action and in the users_controller create action. Is this what you intended? I can&#39;t get it to work yet. Email shows <code>nil</code> upon user create"}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458680311, "post_id": 36164195, "comment_id": 59967288, "body": "<code>assign_email</code> should be in the users controller. the rest should be in <code>user.rb</code>."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458681001, "post_id": 36164195, "comment_id": 59967674, "body": "Did that. Part of problem was you had <code>[:challenge_email]</code> so I switched it to  <code>[:challenges_email]</code>, but still user = nil. How should I have it in the omniauth method? I&#39;ve been trying different things like <code>user.email = @email</code>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458681127, "post_id": 36164195, "comment_id": 59967735, "body": "Where should <code>assign_email(cookies[:challenges_email])</code> go? I put it right beneath <code>@user = User.new(user_params)</code> in the challenges_controller create action"}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458683250, "post_id": 36164195, "comment_id": 59968884, "body": "Make sure assign_email is being called before you get to from_omniauth. Actually--at the beginning of <code>from_omniauth</code> check to see if you have access to @email by <code>puts @email</code>. If you do not, then assign_email hasn&#39;t run yet to set the variable."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458683346, "post_id": 36164195, "comment_id": 59968944, "body": "Hey I updated question with sessions_controller. I have to put it in create for facebook I realize now, but still it doesn&#39;t work. I&#39;ll try puts to gain more info"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458684004, "post_id": 36164195, "comment_id": 59969256, "body": "I thought I&#39;d have it with this: <code>def create     user = User.find_by(email: params[:session][:email].downcase)     if cookies[:challenges_email].present?       user.email = cookies[:challenges_email]     end</code> in sessions_controller, but no."}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458684584, "post_id": 36164195, "comment_id": 59969534, "body": "yeah--you can&#39;t look up the user by the email when you don&#39;t have an email set for the user"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458684821, "post_id": 36164195, "comment_id": 59969631, "body": "Yea that&#39;s weird. I built omniauth-facebook using railscasts. It works tho the <code>find_by</code> to create a new user"}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458685423, "post_id": 36164195, "comment_id": 59969900, "body": "weird. to create? find_by would be to look up an existing user."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458685561, "post_id": 36164195, "comment_id": 59969967, "body": "I think because this method triggers first? <code>def self.from_omniauth(auth)</code> and then user is created and then that controller action does the rest for facebook signup"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1458687689, "post_id": 36164195, "comment_id": 59970883, "body": "I finally got it. I can cry. This coding business can be tough work. I&#39;ve been at this problem for days. You were such a huge help! Thank you! I needed to put <code>if cookies[:challenges_email].present? user.email = cookies[:challenges_email] end</code> in <code>def facebook</code>. For some reason def create goes into def facebook"}], "tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": true, "score": 1, "last_activity_date": 1458677332, "creation_date": 1458677332, "answer_id": 36164195, "question_id": 36048080, "link": "https://stackoverflow.com/questions/36048080/entered-email-override-securerandom-email/36164195#36164195", "title": "Entered email override SecureRandom email?", "body": "<p>We talked about setting it as a cookie in another question. If you're taking that approach, you could pass the cookie to a method. Something like what is discussed in this question: </p>\n\n<pre><code> before_create :set_user_email\n\n def assign_email(email)\n   @email = email\n end\n\n def set_user_email\n   self.email = @email\n end\n</code></pre>\n\n<p>then in the controller action where you have access to the cookie:</p>\n\n<pre><code> assign_email(cookies[:challenge_email])\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 36164195, "answer_count": 2, "score": 1, "last_activity_date": 1458683378, "creation_date": 1458166944, "last_edit_date": 1458683378, "question_id": 36048080, "link": "https://stackoverflow.com/questions/36048080/entered-email-override-securerandom-email", "title": "Entered email override SecureRandom email?", "body": "<p><a href=\"https://i.stack.imgur.com/L55kG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L55kG.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Approach #1</strong></p>\n\n<pre><code>Send email reminder to &lt;%= email_field_tag :email,  nil, placeholder: 'Enter Email', class: \"send-email\" %&gt; # :email belongs to the users table\n</code></pre>\n\n<p><strong>Approach #2</strong></p>\n\n<pre><code>Send email reminder to &lt;%= f.email_field :default_email, class: \"send-email\", placeholder: \"Enter Email\" %&gt; # :default_email belongs to the challenges table. The point of this is to try something in the create process like current_user.email == @challenge.default_email\n</code></pre>\n\n<p>The user is then redirected to <code>signup url</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/abndh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/abndh.png\" alt=\"enter image description here\"></a> </p>\n\n<p>If a user signs up via Facebook a random email is generated so that he can get through the validation process: <code>user.email = SecureRandom.hex + \"@mailinator.com\"</code></p>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>  def self.from_omniauth(auth)\n     # Sets 60 day auth token\n     oauth = Koala::Facebook::OAuth.new(\"125402372971231236229929\", \"ee917abf2e8f1c98274cdafssadffddffaebb1346f4\")\n     new_access_info = oauth.exchange_access_token_info auth.credentials.token\n\n     new_access_token = new_access_info[\"access_token\"]\n     new_access_expires_at = DateTime.now + new_access_info[\"expires\"].to_i.seconds\n\n    where(provider: auth.provider, uid: auth.uid).first_or_initialize.tap do |user|\n      user.provider = auth.provider\n      user.image = auth.info.image\n      user.uid = auth.uid\n      user.name = auth.info.name\n      user.oauth_token = new_access_token # auth.credentials.token &lt;- your old token. Not needed anymore.\n      user.oauth_expires_at = Time.at(auth.credentials.expires_at)\n      user.password = (0...8).map { (65 + rand(26)).chr }.join\n      user.email = SecureRandom.hex + \"@mailinator.com\" unless user.email.present?\n      user.activated = true\n      user.save!\n    end\n  end\n</code></pre>\n\n<p>But how can we make the email the user inputted in the <strong>challenges/create.html.erb</strong> form seen above override the SecureRandom email?</p>\n\n<p><strong>users_controller</strong></p>\n\n<pre><code>  def create\n    @user = User.new(user_params)\n    if @user.save\n      action = session.delete(:challenge_action)\n      deadline = session.delete(:challenge_deadline)\n      committed = session.delete(:challenge_committed)\n      date_started = session.delete(:challenge_date_started)\n      order = session.delete(:challenge_order)\n      days_challenged = session.delete(:challenge_days_challenged)\n      why = session.delete(:challenge_why)\n      conceal = session.delete(:challenge_conceal)\n      @user.challenges.create(action: action, deadline: deadline, why: why, conceal: conceal, date_started: date_started, committed: committed, days_challenged: days_challenged)\n      end\n      redirect_to root_url\n    else\n      render 'new'\n    end\n  end\n</code></pre>\n\n<p><strong>challenges_controller</strong></p>\n\n<pre><code>  before_action :update_user_email, if: proc {|c| c.current_user.present? &amp;&amp; c.params[:email].present? }\n\n  def create\n    @challenge = Challenge.new(challenge_params)\n    if params[:step] == '2'\n      if current_user == nil\n        # If there is no user, store values to the session.\n        session[:challenge_action] = challenge_params[:action]\n        session[:challenge_committed] = challenge_params[:committed]\n        session[:challenge_deadline] = [params[\"challenge\"][\"deadline(3i)\"], params[\"challenge\"][\"deadline(2i)\"], params[\"challenge\"][\"deadline(1i)\"]].join('/')\n        session[:challenge_date_started] = [params[\"challenge\"][\"date_started(3i)\"], params[\"challenge\"][\"date_started(2i)\"], params[\"challenge\"][\"date_started(1i)\"]].join('/')\n        session[:challenge_order] = challenge_params[:order]\n        session[:challenge_days_challenged] = challenge_params[:days_challenged]\n        session[:challenge_why] = challenge_params[:why]\n        session[:challenge_conceal] = challenge_params[:conceal]\n        redirect_to signup_path\n      else\n        @challenge = current_user.challenges.build(challenge_params)\n        @challenge.save\n        redirect_to root_path\n      end\n    else\n      respond_modal_with @challenge\n    end\n  end\n\nprivate\n\n  def update_user_email\n    email = params[:email]\n    current_user.update_attribute(:email, email)\n  end\n</code></pre>\n\n<p><strong>sessions_controller</strong></p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n\n  def new\n  end\n\n  def facebook\n    user = User.from_omniauth(env[\"omniauth.auth\"])\n    user.remember\n    cookies.permanent.signed[:user_id] = user.id\n    cookies.permanent[:remember_token] = user.remember_token\n    redirect_to root_url\n  end\n\n  def create\n    assign_email(cookies[:challenges_email])\n    user = User.find_by(email: params[:session][:email].downcase)\n    assign_email(cookies[:challenges_email])\n    if user &amp;&amp; user.authenticate(params[:session][:password])\n      assign_email(cookies[:challenges_email])\n      log_in user\n      params[:session][:remember_me] == 'nil' ? forget(user) : remember(user)\n      redirect_to root_url\n    else\n      flash.now[:info] = 'Invalid email/password combination'\n      render 'new'\n    end\n  end\n\n  def destroy\n    log_out if logged_in?\n    redirect_to root_url\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "rspec-mocks"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1458166843, "post_id": 36047847, "comment_id": 59744601, "body": "<code>I&#39;m creating a gem that will have a constant in whatever app it is being used in (after a generator is run), but that constant doesn&#39;t exist in the gem itself</code> - this is not the best idea. What would be the use case here? It would be much better idea to provide object in the constant through a configuration."}], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": false, "score": 2, "last_activity_date": 1458177242, "creation_date": 1458177242, "answer_id": 36049956, "question_id": 36047847, "link": "https://stackoverflow.com/questions/36047847/in-rspec-how-can-i-mock-a-method-called-with-a-constant-argument/36049956#36049956", "title": "In RSpec, how can I mock a method called with a constant argument?", "body": "<p>RSpec's <code>stub_const</code> method allows you to stub a constant:</p>\n\n<pre><code>it 'does something'\n  stub_const(FakeConstant, double(name: \"Fakey McFakerson\"))\n  expect(Bar).to receive(send).and_return('skipped!')\n  Foo.do_something\nend\n</code></pre>\n\n<p>More here: <a href=\"https://www.relishapp.com/rspec/rspec-mocks/docs/mutating-constants/stub-defined-constant\" rel=\"nofollow\">https://www.relishapp.com/rspec/rspec-mocks/docs/mutating-constants/stub-defined-constant</a></p>\n\n<p>That said, I agree with BroiSatse that it would be probably be nicer to provide a more dynamic means of getting that information into your code that could be manipulated in tests with less trickery.</p>\n"}], "owner": {"reputation": 894, "user_id": 3638724, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/778a344a5b886e6897657b5ac1f48d1e?s=128&d=identicon&r=PG&f=1", "display_name": "xeroshogun", "link": "https://stackoverflow.com/users/3638724/xeroshogun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458218788, "creation_date": 1458165948, "last_edit_date": 1458218788, "question_id": 36047847, "link": "https://stackoverflow.com/questions/36047847/in-rspec-how-can-i-mock-a-method-called-with-a-constant-argument", "title": "In RSpec, how can I mock a method called with a constant argument?", "body": "<p>I'm creating a gem that will have a constant in whatever app it is being used in (after a generator is run), but that constant doesn't exist in the gem itself.  I'm having an issue with RSpec inside the gem not skipping over the part of code that is calling the constant.  A simple example of what is going on is below.</p>\n\n<pre><code>class Foo\n  def self.do_something\n    Bar.send(FakeConstant.name)  #Bar.send is a valid class and method\n  end\nend\n</code></pre>\n\n<p>foo_spec.rb</p>\n\n<pre><code>it 'does something'\n  expect(Bar).to receive(send).and_return('skipped!')\n  Foo.do_something\nend\n</code></pre>\n\n<p>rspec output</p>\n\n<pre><code>NameError: uninitialized constant FakeConstant\n</code></pre>\n\n<p>I want to write the test so that it skips over the <code>Bar.send</code> call completely so that it never knows that there is a bad constant inside of it. There really isn't a good way to get around this.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1786, "user_id": 4099287, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OMz777BPLQI/AAAAAAAAAAI/AAAAAAAAFcM/tV8IW2TybOw/photo.jpg?sz=128", "display_name": "Kevin M Granger", "link": "https://stackoverflow.com/users/4099287/kevin-m-granger"}, "edited": false, "score": 1, "creation_date": 1458165638, "post_id": 36047730, "comment_id": 59744061, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3057967/reverse-a-string-in-ruby\">Reverse a string in Ruby</a>"}, {"owner": {"reputation": 2569, "user_id": 514040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98bb1ee1a1f3d1297acf493776066086?s=128&d=identicon&r=PG", "display_name": "neuronaut", "link": "https://stackoverflow.com/users/514040/neuronaut"}, "edited": false, "score": 0, "creation_date": 1458165839, "post_id": 36047730, "comment_id": 59744145, "body": "The problem is with the line <code>reverse_array &lt;&lt; letter[i]</code>. The variable letter holds a single letter, not an array, so just get rid of <code>[i]</code>."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1458167347, "post_id": 36047730, "comment_id": 59744822, "body": "While getting rid of <code>[i]</code>: get rid of lines 4, 7 and 8 too."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1458167858, "last_edit_date": 1458167858, "creation_date": 1458165833, "answer_id": 36047822, "question_id": 36047730, "link": "https://stackoverflow.com/questions/36047730/convert-a-string-to-an-array-and-reverse-it/36047822#36047822", "title": "Convert a string to an array and reverse it", "body": "<p>Your <code>string</code> is <code>\"book\"</code>. So, <code>array = string.split(\"\")</code> is <code>[\"b\", \"o\", \"o\", \"k\"]</code>. Then you iterate with <code>i</code>, starting with non-<code>0</code>, decrementing to <code>0</code>. Since the element strings all have length <code>1</code>, <code>letter[i]</code> will return the string itself when <code>i</code> is <code>0</code>, and <code>nil</code> otherwise. That gives you <code>reverse_array</code> to be <code>[nil, nil, nil, \"k\"]</code>.</p>\n\n<p>A fix would be replacing:</p>\n\n<pre><code>reverse_array &lt;&lt; letter[i]\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>reverse_array &lt;&lt; letter\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5782572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c5d30ba7ab9fffc2f818d42cb869ec3d?s=128&d=identicon&r=PG&f=1", "display_name": "Shihan Rehman", "link": "https://stackoverflow.com/users/5782572/shihan-rehman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1458167858, "creation_date": 1458165447, "last_edit_date": 1458167640, "question_id": 36047730, "link": "https://stackoverflow.com/questions/36047730/convert-a-string-to-an-array-and-reverse-it", "title": "Convert a string to an array and reverse it", "body": "<p>I'm trying to convert a string into an array and then reverse it using <code>Enumerable#each</code>. In the following, I expect to get <code>[\"k\",\"o\",\"o\",\"b\"]</code>.</p>\n\n<pre><code>def reverse(string)\n  array = string.split(\"\")\n  reverse_array = []\n  i = array.length - 1\n  array.each do |letter|\n    reverse_array &lt;&lt; letter[i]\n    i = i - 1\n    break if i == -1\n  end\n  p reverse_array\nend\n\nreverse(\"book\") # =&gt; [nil, nil, nil, \"k\"]\n</code></pre>\n\n<p>Can someone explain why I'm getting <code>nil</code>, and how I would fix the code using <code>Enumerable#each</code>?</p>\n"}, {"tags": ["ruby", "git", "rubygems"], "comments": [{"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1458165426, "post_id": 36047575, "comment_id": 59743958, "body": "may be you installed the gem in another rvm gemset?"}, {"owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "reply_to_user": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1458165601, "post_id": 36047575, "comment_id": 59744045, "body": "@uDaY <code>rvm gemset list</code> shows the same path as GEM PATHS in <code>gem environment</code>"}], "answers": [{"comments": [{"owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "edited": false, "score": 0, "creation_date": 1458167416, "post_id": 36048131, "comment_id": 59744852, "body": "The only thing in <code>~&#47;.bundle&#47;config</code> is --- BUNDLE_GEM__TEST: rspec BUNDLE_GEM__MIT: false BUNDLE_GEM__COC: false. Trying to require the file using <code>bundle exec</code> makes no difference - still doesn&#39;t work."}, {"owner": {"reputation": 20458, "user_id": 122087, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/431c64e3e3fd0c892ad2a7e4150cf63e?s=128&d=identicon&r=PG", "display_name": "Paul A Jungwirth", "link": "https://stackoverflow.com/users/122087/paul-a-jungwirth"}, "reply_to_user": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "edited": false, "score": 0, "creation_date": 1458167573, "post_id": 36048131, "comment_id": 59744915, "body": "What happens when you type <code>bundle config</code>?"}, {"owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "edited": false, "score": 0, "creation_date": 1458167924, "post_id": 36048131, "comment_id": 59745044, "body": "It lists the same settings pasted above."}, {"owner": {"reputation": 20458, "user_id": 122087, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/431c64e3e3fd0c892ad2a7e4150cf63e?s=128&d=identicon&r=PG", "display_name": "Paul A Jungwirth", "link": "https://stackoverflow.com/users/122087/paul-a-jungwirth"}, "reply_to_user": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "edited": false, "score": 0, "creation_date": 1458168299, "post_id": 36048131, "comment_id": 59745203, "body": "Okay, the <code>bundler</code> dir was a red herring, edited my answer with a more likely cause."}], "tags": [], "owner": {"reputation": 20458, "user_id": 122087, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/431c64e3e3fd0c892ad2a7e4150cf63e?s=128&d=identicon&r=PG", "display_name": "Paul A Jungwirth", "link": "https://stackoverflow.com/users/122087/paul-a-jungwirth"}, "is_accepted": false, "score": 0, "last_activity_date": 1458168279, "last_edit_date": 1495542650, "creation_date": 1458167103, "answer_id": 36048131, "question_id": 36047575, "link": "https://stackoverflow.com/questions/36047575/unable-to-require-gem-from-git-with-rvm/36048131#36048131", "title": "Unable to require gem from git with RVM", "body": "<p>I would make sure the installed version of the gem has all the files you expect, especially <code>lib</code> and its contents. This past discussion might help you:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2261981/gem-which-cannot-find-gem-despite-it-being-installed\">gem which cannot find gem despite it being installed</a></p>\n"}, {"tags": [], "owner": {"reputation": 644, "user_id": 470741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c83ddef9e4d2c0549eed04be8d0397?s=128&d=identicon&r=PG", "display_name": "nelsonenzo", "link": "https://stackoverflow.com/users/470741/nelsonenzo"}, "is_accepted": false, "score": 0, "last_activity_date": 1540687634, "creation_date": 1540687634, "answer_id": 53027466, "question_id": 36047575, "link": "https://stackoverflow.com/questions/36047575/unable-to-require-gem-from-git-with-rvm/53027466#53027466", "title": "Unable to require gem from git with RVM", "body": "<p>I found a similar issue </p>\n\n<pre><code>bundle show kubernetes_metadata_filter\n\n/fluentd/vendor/bundle/ruby/2.3.0/bundler/gems/fluent-plugin-kubernetes_metadata_filter-0cd7e29eacec\n</code></pre>\n\n<p>while the rest of my gems were install here:</p>\n\n<pre><code>/fluentd/vendor/bundle/ruby/2.3.0/gems/\n</code></pre>\n\n<p>notice the subtle difference between 2.3.0/bundler/gems/... and 2.3.0/gems/......</p>\n\n<p>HACKY SOLUTION:\nafter bundle install, i did the following:</p>\n\n<pre><code>gem install specific_install\ngem specific_install -l &lt;url to a github gem&gt;\n</code></pre>\n\n<p>That did the trick and installed the gem to the gems directory, and not just bundler. I beleive the correct fix is the project needs to  require bundler on startup, then it will get the bundler installed gems as well, but not all projects are well suited for that solution.  good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 1521, "user_id": 2228202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb04d566649884212c97783611cfc447?s=128&d=identicon&r=PG", "display_name": "Wes Mason", "link": "https://stackoverflow.com/users/2228202/wes-mason"}, "is_accepted": false, "score": 1, "last_activity_date": 1568380013, "creation_date": 1568380013, "answer_id": 57924225, "question_id": 36047575, "link": "https://stackoverflow.com/questions/36047575/unable-to-require-gem-from-git-with-rvm/57924225#57924225", "title": "Unable to require gem from git with RVM", "body": "<p>Rubygems have no concept of git installed gems, so Bundler includes a specific mechanism for loading these paths into the GEMPATH, you need to do the following before you can require them:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'bundler'\nBundler.setup\n</code></pre>\n\n<p>See the <a href=\"https://bundler.io/guides/git.html#how-to-install-gems-from-git-repositories\" rel=\"nofollow noreferrer\">Bundler git gems docs</a> for more info.</p>\n"}], "owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1568380013, "creation_date": 1458164765, "last_edit_date": 1540774947, "question_id": 36047575, "link": "https://stackoverflow.com/questions/36047575/unable-to-require-gem-from-git-with-rvm", "title": "Unable to require gem from git with RVM", "body": "<p>I cannot require a custom gem I developed to a ruby project. I use RVM. Here's what I've done:</p>\n\n<p>I added gem locally via Gemfile:</p>\n\n<pre><code>gem 'my-gem', git: 'https://github.com/username/my-gem.git'\n</code></pre>\n\n<p>I installed the gem:</p>\n\n<pre><code>bundle\nFetching https://github.com/username/my-gem.git\nFetching gem metadata from https://rubygems.org/............\nFetching version metadata from https://rubygems.org/..\nResolving dependencies...\nUsing my-gem 0.1.0 https://github.com/username/my-gem.git (at master@dcdac02)\nUsing bundler 1.11.2\nBundle complete! 1 Gemfile dependency, 2 gems now installed.\n</code></pre>\n\n<p>I confirmed it was installed:</p>\n\n<pre><code>bundle show my-gem\n/Users/myuser/.rvm/gems/ruby-2.2.2/bundler/gems/my-gem-dcdac02a8b69\n</code></pre>\n\n<p>I confirmed my gem paths:</p>\n\n<pre><code>GEM PATHS:\n     - /Users/myuser/.rvm/gems/ruby-2.2.2\n     - /Users/myuser/.rvm/gems/ruby-2.2.2@global\n</code></pre>\n\n<p>When I run <code>gem list</code>, my gem is <strong>missing</strong>. When I <code>require 'my-gem'</code>, the gem cannot be found.</p>\n\n<p>When I run <code>gem which my-gem</code>, I get: </p>\n\n<pre><code>ERROR:  Can't find ruby library file or shared library my-gem\n</code></pre>\n\n<p>I'm not really sure what else to try. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "activerecord"], "comments": [{"owner": {"reputation": 14802, "user_id": 649006, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/30f02cca8b01ab9e60490075b0447ecb?s=128&d=identicon&r=PG", "display_name": "nzifnab", "link": "https://stackoverflow.com/users/649006/nzifnab"}, "edited": false, "score": 1, "creation_date": 1458164924, "post_id": 36047567, "comment_id": 59743724, "body": "Hmm, what does your form code look like? If I understand this correctly, <code>Profile</code> has_many :degrees  (right?). In this case, which <code>degree</code> are you expecting a delegation to pull from? If you have three degrees from three different universities, then what do you expect <code>profile.university</code> to return? I suspect what you actually want is a nested form that will have fields for <i>all</i> of your degrees."}, {"owner": {"reputation": 14802, "user_id": 649006, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/30f02cca8b01ab9e60490075b0447ecb?s=128&d=identicon&r=PG", "display_name": "nzifnab", "link": "https://stackoverflow.com/users/649006/nzifnab"}, "edited": false, "score": 1, "creation_date": 1458165085, "post_id": 36047567, "comment_id": 59743803, "body": "Take a look here: <a href=\"http://guides.rubyonrails.org/form_helpers.html#building-complex-forms\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/form_helpers.html#building-complex-fo&zwnj;&#8203;rms</a> for some information about nested forms. I&#39;m not posting this as an answer because I&#39;m not 100% sure what your goal here is."}, {"owner": {"reputation": 177, "user_id": 1582670, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d9a038b93a1267e72cc0acb89956cf09?s=128&d=identicon&r=PG", "display_name": "splatoperator", "link": "https://stackoverflow.com/users/1582670/splatoperator"}, "reply_to_user": {"reputation": 14802, "user_id": 649006, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/30f02cca8b01ab9e60490075b0447ecb?s=128&d=identicon&r=PG", "display_name": "nzifnab", "link": "https://stackoverflow.com/users/649006/nzifnab"}, "edited": false, "score": 0, "creation_date": 1458165085, "post_id": 36047567, "comment_id": 59743805, "body": "Yes, that is correct.  I expect profile.university to return an array of universities.  The end users are likely to have multiple degrees,  but the number may vary from user to user."}, {"owner": {"reputation": 177, "user_id": 1582670, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d9a038b93a1267e72cc0acb89956cf09?s=128&d=identicon&r=PG", "display_name": "splatoperator", "link": "https://stackoverflow.com/users/1582670/splatoperator"}, "reply_to_user": {"reputation": 14802, "user_id": 649006, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/30f02cca8b01ab9e60490075b0447ecb?s=128&d=identicon&r=PG", "display_name": "nzifnab", "link": "https://stackoverflow.com/users/649006/nzifnab"}, "edited": false, "score": 0, "creation_date": 1458165190, "post_id": 36047567, "comment_id": 59743855, "body": "I was using accepted_nested_attributes_for, but due to the complexity of the form and the need to validate differently depending on context, I am trying to abstract the form logic into a form object."}, {"owner": {"reputation": 14802, "user_id": 649006, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/30f02cca8b01ab9e60490075b0447ecb?s=128&d=identicon&r=PG", "display_name": "nzifnab", "link": "https://stackoverflow.com/users/649006/nzifnab"}, "edited": false, "score": 0, "creation_date": 1458165518, "post_id": 36047567, "comment_id": 59744001, "body": "Hmm, you&#39;re going to have to post more of your code. If the delegation is on the <code>ProfileForm</code> class, I would have expected the error to read: <code>undefined method &#39;university&#39; for #&lt;ActiveRecord:Relation&gt;</code> or <code>undefined method &#39;degree&#39; for #&lt;ProfileForm&gt;</code> even. But it looks like it&#39;s not finding the delegation at all in your <code>ProfileForm</code> class."}], "owner": {"reputation": 177, "user_id": 1582670, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d9a038b93a1267e72cc0acb89956cf09?s=128&d=identicon&r=PG", "display_name": "splatoperator", "link": "https://stackoverflow.com/users/1582670/splatoperator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 455, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458164728, "creation_date": 1458164728, "question_id": 36047567, "link": "https://stackoverflow.com/questions/36047567/in-rails-how-do-you-use-delegate-with-a-has-many-relationship", "title": "In Rails, how do you use delegate with a has_many relationship?", "body": "<p>I have a form object for a profile form that incorporates multiple models.  I can delegate has_one relationships, but get errors with has_many relationships.  In my form object, I have:</p>\n\n<pre><code>delegate :university, :department, :degree, :concentration, :graduation_date, to: :degree\n</code></pre>\n\n<p>The console shows: </p>\n\n<pre><code>NoMethodError - undefined method `university' for #&lt;ProfileForm:0x007fac8fbd0a18&gt;\n</code></pre>\n\n<p>I believe this is because the return on a has_many relationship is a collection proxy.  Is it possible to use <code>delegate</code> with has_many relationships?  If so, how do I implement it on my form object?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 640, "user_id": 2326613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f0821b3c32c0537c027a657ec7e977b?s=128&d=identicon&r=PG", "display_name": "JosephK", "link": "https://stackoverflow.com/users/2326613/josephk"}, "edited": false, "score": 0, "creation_date": 1511699169, "post_id": 36047545, "comment_id": 81947328, "body": "Other answers tell you what the dup&#39;d values were, but don&#39;t return the record-ids, so it&#39;s of limited use for the OP (or me), since we need to know where the dups are, to do anything about them.  A list of dates and amounts with frequencies is of limited value by itself."}, {"owner": {"reputation": 1722, "user_id": 1480946, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e87530abcbb61636ac0b5197e3848b8b?s=128&d=identicon&r=PG", "display_name": "Jake Smith", "link": "https://stackoverflow.com/users/1480946/jake-smith"}, "reply_to_user": {"reputation": 640, "user_id": 2326613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f0821b3c32c0537c027a657ec7e977b?s=128&d=identicon&r=PG", "display_name": "JosephK", "link": "https://stackoverflow.com/users/2326613/josephk"}, "edited": false, "score": 0, "creation_date": 1511725904, "post_id": 36047545, "comment_id": 81956105, "body": "@JosephK, could you not just include the primary keys in those same queries to get what you are looking for?"}, {"owner": {"reputation": 640, "user_id": 2326613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f0821b3c32c0537c027a657ec7e977b?s=128&d=identicon&r=PG", "display_name": "JosephK", "link": "https://stackoverflow.com/users/2326613/josephk"}, "edited": false, "score": 0, "creation_date": 1514547238, "post_id": 36047545, "comment_id": 83012927, "body": "In those answers, the columns selected-for are used as the criteria to find the dups - must be part of the group, or is not available in the output.  But if included, you get no output, because the IDs are unique.  So, IMO, this question is not a duplicate, and remains unanswered.  I had to use a multi-step process to solve the problem."}, {"owner": {"reputation": 803, "user_id": 3458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EtWor.jpg?s=128&g=1", "display_name": "Arye Eidelman", "link": "https://stackoverflow.com/users/3458162/arye-eidelman"}, "edited": false, "score": 0, "creation_date": 1572024043, "post_id": 36047545, "comment_id": 103444797, "body": "Duplicate records and duplicate fields are not the same things. The link you provided is actually the question I looked at before continuing my search and coming here."}, {"owner": {"reputation": 803, "user_id": 3458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EtWor.jpg?s=128&g=1", "display_name": "Arye Eidelman", "link": "https://stackoverflow.com/users/3458162/arye-eidelman"}, "edited": false, "score": 0, "creation_date": 1572024255, "post_id": 36047545, "comment_id": 103444888, "body": "You should create a script that posts each record to StackOverflow and another one to scrape them for &quot;marked as duplicate by&quot; \ud83d\ude44\ufe0f\ud83d\ude44\ufe0f."}], "tags": [], "owner": {"reputation": 1722, "user_id": 1480946, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e87530abcbb61636ac0b5197e3848b8b?s=128&d=identicon&r=PG", "display_name": "Jake Smith", "link": "https://stackoverflow.com/users/1480946/jake-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1458164666, "last_edit_date": 1495542863, "creation_date": 1458164666, "answer_id": 36047545, "question_id": 36047468, "link": "https://stackoverflow.com/questions/36047468/rails-find-duplicate-records/36047545#36047545", "title": "Rails find duplicate records", "body": "<p>I searched on Google and the first two things that popped up with the query \"ruby on rails find duplicate records\" seem to give you the answer you are looking for:\n1. <a href=\"https://stackoverflow.com/questions/21669202/find-rows-with-multiple-duplicate-fields-with-active-record-rails-postgres\">Find rows with multiple duplicate fields with Active Record, Rails &amp; Postgres</a>\n2. <a href=\"https://stackoverflow.com/questions/5106131/how-to-find-records-that-have-duplicate-data-using-active-record\">How to find records that have duplicate data using Active Record</a></p>\n"}], "owner": {"reputation": 33, "user_id": 5501537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7bd118f3c34818a68a728fc46bc054f?s=128&d=identicon&r=PG&f=1", "display_name": "djangor", "link": "https://stackoverflow.com/users/5501537/djangor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 9117, "favorite_count": 0, "closed_date": 1458198631, "answer_count": 1, "score": -2, "last_activity_date": 1458164666, "creation_date": 1458164333, "question_id": 36047468, "link": "https://stackoverflow.com/questions/36047468/rails-find-duplicate-records", "closed_reason": "Duplicate", "title": "Rails find duplicate records", "body": "<p>I have a question about finding duplicate records in mysql\nHow can I do this with rails</p>\n\n<p>Like this if I have two records created on same time with same amount then I want to delete one of them\nhow can I do this with ActiveRecord</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 1, "creation_date": 1458164288, "post_id": 36047398, "comment_id": 59743432, "body": "Please search before asking"}, {"owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "reply_to_user": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 0, "creation_date": 1458165417, "post_id": 36047398, "comment_id": 59743954, "body": "&quot;Get all instance variables declared in class&quot;\u2014I don&#39;t have a class (well, it&#39;s hidden), I&#39;m just at the very top of a view that starts to reference variables. @WesFoster I think your possible duplicate is correct, but I couldn&#39;t find it with my own search. Does that merit this question (others might be like me) or should I take it down?"}, {"owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 0, "creation_date": 1458165537, "post_id": 36047398, "comment_id": 59744012, "body": "You can remove it, or leave it and have it redirect to the other post. Either way, others with this problem can find the solution by running a quick search."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 5, "last_activity_date": 1458164422, "creation_date": 1458164422, "answer_id": 36047490, "question_id": 36047398, "link": "https://stackoverflow.com/questions/36047398/view-all-instance-variables-currently-available-ruby/36047490#36047490", "title": "View all instance variables currently available? (Ruby)", "body": "<pre><code>@foo = 3\ninstance_variables # =&gt; [:@foo]\n</code></pre>\n"}], "owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1165, "favorite_count": 0, "closed_date": 1458166312, "accepted_answer_id": 36047490, "answer_count": 1, "score": 2, "last_activity_date": 1458164422, "creation_date": 1458164063, "question_id": 36047398, "link": "https://stackoverflow.com/questions/36047398/view-all-instance-variables-currently-available-ruby", "closed_reason": "Duplicate", "title": "View all instance variables currently available? (Ruby)", "body": "<p>I have been asked to work on a large project (already half-done). One file I'm working on starts with this:</p>\n\n<pre><code>&lt;div class=\"table-responsive\"&gt;\n  &lt;table class=\"table\"&gt;\n    &lt;% if @incidents.present? %&gt;\n      &lt;br&gt;\n      &lt;thead&gt;\n</code></pre>\n\n<p>I didn't know @incidents existed, until I saw it referenced. It made me wonder\u2014what other instance variables are available for me to use? How would I know?</p>\n\n<p>Because this is a big project with many files interacting, I don't want to just look at the controller or something like that, <strong>I want a way to log all instance variables available to me at a particular point in the code</strong>.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6073820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wdz0t.jpg?s=128&g=1", "display_name": "Vinnyvagus", "link": "https://stackoverflow.com/users/6073820/vinnyvagus"}, "edited": false, "score": 0, "creation_date": 1458217183, "post_id": 36047307, "comment_id": 59767297, "body": "Ah of course.  Now I see that.  Thanks @MarcleRodrigues"}], "tags": [], "owner": {"reputation": 56, "user_id": 5854817, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y7q5n72llxs/AAAAAAAAAAI/AAAAAAAAAIU/b3UR0-llh9k/photo.jpg?sz=128", "display_name": "Marcle Rodrigues", "link": "https://stackoverflow.com/users/5854817/marcle-rodrigues"}, "is_accepted": true, "score": 1, "last_activity_date": 1458163720, "creation_date": 1458163720, "answer_id": 36047307, "question_id": 36047213, "link": "https://stackoverflow.com/questions/36047213/reading-files-and-asking-for-an-input-on-a-new-line/36047307#36047307", "title": "Reading files and asking for an input on a new line", "body": "<p>You should use puts and not print.\nThe difference is that puts add a new line at the end of the output.</p>\n\n<pre><code>filename = ARGV.first\n\ntxt = open(filename)\n\nputs \"Here's your file #{filename}:\"\n\nputs txt.read // Changed Line\n\nprint \"Type the filename again: \"\nfile_again = $stdin.gets.chomp\n\ntxt_again = open(file_again)\n\nputs txt_again.read //Changed Line\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6073820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wdz0t.jpg?s=128&g=1", "display_name": "Vinnyvagus", "link": "https://stackoverflow.com/users/6073820/vinnyvagus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 36047307, "answer_count": 1, "score": 0, "last_activity_date": 1458164251, "creation_date": 1458163437, "last_edit_date": 1458164251, "question_id": 36047213, "link": "https://stackoverflow.com/questions/36047213/reading-files-and-asking-for-an-input-on-a-new-line", "title": "Reading files and asking for an input on a new line", "body": "<p>I understand how to open and then print the content of the file. I would like to understand how to ask a second question on a new line after the txt file has been printed.</p>\n\n<p>The code below prints the output of the text file, then on the same line, asks \"<em>Type the file name again:</em>\"</p>\n\n<pre><code>filename = ARGV.first\n\ntxt = open(filename)\n\nputs \"Here's your file #{filename}:\"\nprint txt.read\n\nprint \"Type the filename again: \"\nfile_again = $stdin.gets.chomp\n\ntxt_again = open(file_again)\n\nprint txt_again.read\n</code></pre>\n\n<p>I would like this question to be printed on a new line after the txt file has been read.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form", "form-for", "simple-form-for"], "answers": [{"tags": [], "owner": {"reputation": 1132, "user_id": 1154044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b042060fc12ff39b4fbe94dcec7d8598?s=128&d=identicon&r=PG", "display_name": "cnnr", "link": "https://stackoverflow.com/users/1154044/cnnr"}, "is_accepted": false, "score": 2, "last_activity_date": 1458181651, "creation_date": 1458181651, "answer_id": 36050592, "question_id": 36046958, "link": "https://stackoverflow.com/questions/36046958/individual-simple-form-radio-button/36050592#36050592", "title": "individual simple_form radio button", "body": "<p>According to <a href=\"https://github.com/plataformatec/simple_form/tree/master/lib/simple_form/inputs\" rel=\"nofollow\">SimpleForm source code</a> it has not default <code>radio</code> input.</p>\n\n<p>Documentation of this gem suggest few ways to use radio buttons:</p>\n\n<ol>\n<li><code>&lt;%= f.input :plan, as: :radio_buttons %&gt;</code></li>\n<li><code>&lt;%= f.input :plan, as: :boolean %&gt;</code> (with some additional value handle)</li>\n<li>You can write your own custom input, f.e. named <code>radio</code> and put in folder app/inputs. <a href=\"https://github.com/plataformatec/simple_form#custom-inputs\" rel=\"nofollow\">Read more about custom inputs</a></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 10731, "user_id": 454375, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tX9K1.jpg?s=128&g=1", "display_name": "montrealmike", "link": "https://stackoverflow.com/users/454375/montrealmike"}, "is_accepted": false, "score": 2, "last_activity_date": 1499309731, "last_edit_date": 1499309731, "creation_date": 1499309405, "answer_id": 44939010, "question_id": 36046958, "link": "https://stackoverflow.com/questions/36046958/individual-simple-form-radio-button/44939010#44939010", "title": "individual simple_form radio button", "body": "<p>There's nothing wrong with using the regular rails helpers. You can nest them inside the input if you'd like consistent wrappers. It can look something like</p>\n\n<pre><code>= f.input :plan_id, label: false do \n  ul\n    - @organization_plans.each do |plan|\n      li\n        = f.radio_button :plan_id, plan.id\n        = f.label :plan_id, plan.description, value: plan.id\n</code></pre>\n\n<p>Of course, you may also use the collection if you don't need too much customization</p>\n\n<pre><code>= f.input :plan_id, collection: @organization_plans.pluck(:id, :description), as: :radio_buttons, label: false\n</code></pre>\n"}], "owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2765, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1499309731, "creation_date": 1458162494, "question_id": 36046958, "link": "https://stackoverflow.com/questions/36046958/individual-simple-form-radio-button", "title": "individual simple_form radio button", "body": "<p>I am using SimpleForm 3.2.1 with Rails 4.  I am trying to convert a rails form into a simple_form.  Here is the code that works for radio buttons with the regular rails form:</p>\n\n<pre><code>  &lt;ul class=\"list-radios list-multiplier\"&gt;\n    &lt;% @organization_plans.each_with_index do |plan, index| %&gt;\n\n      &lt;li&gt;\n        &lt;div class=\"radio custom-radio\"&gt;\n          &lt;%= f.radio_button :plan_id, plan.id, id: \"field-rad#{index}\", data: {price: plan.total_price} %&gt;\n\n          &lt;label class=\"form-label\" for='field-rad&lt;%= index %&gt;'&gt;\n            &lt;span&gt;&lt;/span&gt;\n\n            &lt;%= plan.description %&gt;\n          &lt;/label&gt;\n        &lt;/div&gt;&lt;!-- /.radio --&gt;\n      &lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;/ul&gt;&lt;!-- /.list-radios --&gt;\n</code></pre>\n\n<p>I have tried converting it to SimpleForm with the following code:</p>\n\n<pre><code>  &lt;ul class=\"list-radios list-multiplier\"&gt;\n    &lt;% @organization_plans.each_with_index do |plan, index| %&gt;\n\n      &lt;li&gt;\n        &lt;div class=\"radio custom-radio\"&gt;\n          &lt;%= f.input :plan_id, value: plan.id, input_html: {id: \"field-rad#{index}\"}, data: {price: plan.total_price}, label: false, as: :radio %&gt;\n\n          &lt;label class=\"form-label\" for='field-rad&lt;%= index %&gt;'&gt;\n            &lt;span&gt;&lt;/span&gt;\n\n            &lt;%= plan.description %&gt;\n          &lt;/label&gt;\n        &lt;/div&gt;&lt;!-- /.radio --&gt;\n      &lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;/ul&gt;&lt;!-- /.list-radios --&gt;\n</code></pre>\n\n<p>However, when I open the page in the browser I get the error:</p>\n\n<pre><code>No input found for radio\n</code></pre>\n\n<p>How do I get this form to start working with simple_form?</p>\n"}, {"tags": ["css", "ruby", "automation", "capybara", "materialize"], "comments": [{"owner": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "edited": false, "score": 0, "creation_date": 1458161359, "post_id": 36046430, "comment_id": 59741832, "body": "Are you sure <code>#store_address_attributes_country</code> didn&#39;t work?"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 1, "creation_date": 1458163147, "post_id": 36046430, "comment_id": 59742845, "body": "have you tried save_and_open_page and checked if the element is really rendered?"}, {"owner": {"reputation": 37, "user_id": 4338816, "user_type": "registered", "profile_image": "https://graph.facebook.com/750676386/picture?type=large", "display_name": "Anna", "link": "https://stackoverflow.com/users/4338816/anna"}, "reply_to_user": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "edited": false, "score": 0, "creation_date": 1458165169, "post_id": 36046430, "comment_id": 59743842, "body": "@ThomasR.Koll Yes I am sure that didn&#39;t work for me either."}, {"owner": {"reputation": 37, "user_id": 4338816, "user_type": "registered", "profile_image": "https://graph.facebook.com/750676386/picture?type=large", "display_name": "Anna", "link": "https://stackoverflow.com/users/4338816/anna"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1458165237, "post_id": 36046430, "comment_id": 59743878, "body": "@pascalbetz I have and I can confirm it is visible. It&#39;s below the scope of the page but it finds the button out of the scope of the page as well."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4338816, "user_type": "registered", "profile_image": "https://graph.facebook.com/750676386/picture?type=large", "display_name": "Anna", "link": "https://stackoverflow.com/users/4338816/anna"}, "edited": false, "score": 0, "creation_date": 1458225101, "post_id": 36049378, "comment_id": 59773531, "body": "This is exactly what I needed. Worked perfectly, thank you so much."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1458173542, "creation_date": 1458173542, "answer_id": 36049378, "question_id": 36046430, "link": "https://stackoverflow.com/questions/36046430/select-a-dropdown-using-capybara-elementnotfound/36049378#36049378", "title": "Select a Dropdown using Capybara ElementNotFound", "body": "<p>When using materialize the &lt;select> element is hidden on the page and replaced with an &lt;input> element as the trigger and  &lt;ul> and &lt;li> elements as the dropdown.  Because of this you can't use <code>#select</code>.  Instead you have to replicate what a user would have to do, which is click on the input used to trigger the dropdown and then click on the correct li.  In this case that would be</p>\n\n<pre><code>find(\"input.select-dropdown\").click\nfind(\"li\", text: \"United States\").click\n</code></pre>\n\n<p>Obviously the first find would have to be scoped to something on the page (or increase the specificity of the selector) if there is more than one select on the page</p>\n"}], "owner": {"reputation": 37, "user_id": 4338816, "user_type": "registered", "profile_image": "https://graph.facebook.com/750676386/picture?type=large", "display_name": "Anna", "link": "https://stackoverflow.com/users/4338816/anna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 609, "favorite_count": 0, "accepted_answer_id": 36049378, "answer_count": 1, "score": 2, "last_activity_date": 1458173542, "creation_date": 1458160610, "question_id": 36046430, "link": "https://stackoverflow.com/questions/36046430/select-a-dropdown-using-capybara-elementnotfound", "title": "Select a Dropdown using Capybara ElementNotFound", "body": "<p>I'm trying to select an item from a dropdown with Capybara. I have done this just fine using a different CSS framework; now I'm using Materialize.</p>\n\n<p>I have talked with the developer and he mentioned that Materialize uses two select boxes and so it might be getting confused there. Not sure if that's helpful but I thought I'd mention it.</p>\n\n<p>I'm dealing with CSS that looks something like</p>\n\n<pre><code>  &lt;div class=\"select-wrapper country required\"&gt;\n    &lt;span class=\"caret\"&gt;\u25bc&lt;/span&gt;    \n    &lt;input type=\"text\" class=\"select-dropdown\" readonly=\"true\" data-activates=\"select-options-0e5c0ffe-1e78-5df0-c08d-7bced194abd1\" value=\"\"&gt;    \n\n    &lt;ul id=\"select-options-0e5c0ffe-1e78-5df0-c08d-7bced194abd1\" class=\"dropdown-content select-dropdown\" style=\"width: 435px; position: absolute; top: 0px; left: 0px; opacity: 1; display: none;\"&gt;&lt;li class=\"\"&gt;  &lt;span&gt;&lt;/span&gt;&lt;/li&gt;\n        &lt;li class=\"\"&gt;&lt;span&gt;Afghanistan&lt;/span&gt;&lt;/li&gt;\n        &lt;li class=\"\"&gt;&lt;span&gt;\u00c5land Islands&lt;/span&gt;&lt;/li&gt;\n        &lt;li class=\"\"&gt;&lt;span&gt;Albania&lt;/span&gt;&lt;/li&gt;\n        &lt;li class=\"\"&gt;&lt;span&gt;Algeria&lt;/span&gt;&lt;/li&gt;\n        &lt;li class=\"\"&gt;&lt;span&gt;United States&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;       \n\n    &lt;select class=\"country required initialized\"   name=\"store[address_attributes][country]\" id=\"store_address_attributes_country\"&gt;&lt;option value=\"\"&gt;&lt;/option&gt;\n        &lt;option value=\"AF\"&gt;Afghanistan&lt;/option&gt;\n        &lt;option value=\"AX\"&gt;\u00c5land Islands&lt;/option&gt;\n        &lt;option value=\"AL\"&gt;Albania&lt;/option&gt;\n        &lt;option value=\"DZ\"&gt;Algeria&lt;/option&gt;\n        &lt;option value=\"US\"&gt;United States&lt;/option&gt;\n</code></pre>\n\n<p>What I've tried is </p>\n\n<pre><code>select \"United States\", :from =&gt; 'store_address_attributes_country'\n</code></pre>\n\n<p>I've also tried </p>\n\n<pre><code>find(\"store_address_attributes_country\").select(\"United States\")\n</code></pre>\n\n<p>(I also tried this same thing using the XPath, selector and name instead of the ID)</p>\n\n<p>These give me the error </p>\n\n<pre><code> Capybara::ElementNotFound:\n   Unable to find select box \"store_address_attributes_country`\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "html", "ruby-on-rails-4", "sqlite"], "comments": [{"owner": {"reputation": 4174, "user_id": 399346, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83209f4fd149c44c74720e9df2ca9fea?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/399346/rob"}, "edited": false, "score": 0, "creation_date": 1458158973, "post_id": 36045852, "comment_id": 59740411, "body": "yah, don&#39;t use sqlite, you are much better off installing postgresql locally and using that, especially when you need to test the full feature set. sqlite is only for toy projects."}, {"owner": {"reputation": 11, "user_id": 6073586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8feaec7e4402062ec59a1b0c68b71739?s=128&d=identicon&r=PG&f=1", "display_name": "tacoplz", "link": "https://stackoverflow.com/users/6073586/tacoplz"}, "reply_to_user": {"reputation": 4174, "user_id": 399346, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83209f4fd149c44c74720e9df2ca9fea?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/399346/rob"}, "edited": false, "score": 0, "creation_date": 1458246770, "post_id": 36045852, "comment_id": 59788402, "body": "Whether I use SQLite3 or PostgreSQL wouldn&#39;t the code in Ruby/ect. to translate the string data itself be the same (since I&#39;m just trying to show a Spanish use my Spanish translation of the value in the database)?"}, {"owner": {"reputation": 4174, "user_id": 399346, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83209f4fd149c44c74720e9df2ca9fea?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/399346/rob"}, "edited": false, "score": 0, "creation_date": 1458252480, "post_id": 36045852, "comment_id": 59791234, "body": "It looks like you are playing around with internationalization, including Unicode and i8 support, which is fully supported in Postgres. It&#39;s probably poorly supported if at all in SQLLite. Personally, I would upgrade to postgres, if the problem still occurred, I&#39;d then think more carefully about it."}], "owner": {"reputation": 11, "user_id": 6073586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8feaec7e4402062ec59a1b0c68b71739?s=128&d=identicon&r=PG&f=1", "display_name": "tacoplz", "link": "https://stackoverflow.com/users/6073586/tacoplz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458178578, "creation_date": 1458158607, "last_edit_date": 1458178578, "question_id": 36045852, "link": "https://stackoverflow.com/questions/36045852/i18n-row-column-data-in-sqlite3-table", "title": "I18n row/column data in sqlite3 table", "body": "<p>I am trying to translate the collection_select data but not modify the actual data in the database table PayType</p>\n\n<p>This is the relevant order form html.erb</p>\n\n<p>_form.html.erb</p>\n\n<pre><code>&lt;%= f.label :pay_type_id, t('.pay_type') %&gt;&lt;br /&gt;\n&lt;%= collection_select(:order, :pay_type_id, PayType.all, :name, :name) %&gt;  \n</code></pre>\n\n<p>This is the relevant db schema</p>\n\n<pre><code>create_table \"orders\", force: true do |t|\n  t.string   \"name\"\n  t.text     \"address\"\n  t.string   \"email\"\n  t.datetime \"created_at\"\n  t.datetime \"updated_at\"\n  t.integer  \"pay_type_id\"\n  t.datetime \"ship_date\"\nend\n\ncreate_table \"pay_types\", force: true do |t|\n  t.string   \"name\"\n  t.datetime \"created_at\"\n  t.datetime \"updated_at\"\nend\n</code></pre>\n\n<p>I cannot figure this out, I have tried to translate the name but get a no method error. I know how to add a locale column that will only display if I choose display rows with a locale of 'es' but I would like to superficially translate the names without changing the actual db values.  </p>\n\n<p>What would I as far as noting t('.xxx') and how would I call that in the en.yml and es.yml?</p>\n\n<p>Also if youre curious the names in the db are:<br/>\nCheck<br/>\nCredit Card<br/>\nPurchase Order</p>\n\n<p>Any guidance is appriciated, its driving me mad.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec", "codeship"], "comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1458157753, "post_id": 36045561, "comment_id": 59739696, "body": "Why not improve your test coverage?"}, {"owner": {"reputation": 8371, "user_id": 1094339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cibe3.png?s=128&g=1", "display_name": "Deekor", "link": "https://stackoverflow.com/users/1094339/deekor"}, "reply_to_user": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1458157849, "post_id": 36045561, "comment_id": 59739756, "body": "@coreyward Its not a high priority for me right now."}], "answers": [{"comments": [{"owner": {"reputation": 8371, "user_id": 1094339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cibe3.png?s=128&g=1", "display_name": "Deekor", "link": "https://stackoverflow.com/users/1094339/deekor"}, "edited": false, "score": 0, "creation_date": 1458158456, "post_id": 36045730, "comment_id": 59740126, "body": "Ah! I had no idea we were even using that. I inherited this project a few months ago and am still getting acquainted with everything. Thanks!"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1458159480, "post_id": 36045730, "comment_id": 59740713, "body": "It is strange that you are showing how to set it to 90, where the OP cannot even pass 80. Perhaps the OP wanted to set it to 70."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": true, "score": 5, "last_activity_date": 1458158191, "creation_date": 1458158191, "answer_id": 36045730, "question_id": 36045561, "link": "https://stackoverflow.com/questions/36045561/rspec-ignore-code-coverage-percentage/36045730#36045730", "title": "rspec ignore code coverage percentage?", "body": "<p>If you're using <a href=\"https://github.com/colszowka/simplecov\" rel=\"noreferrer\">simplecov</a> you can set the following in your spec helper:</p>\n\n<pre><code>SimpleCov.minimum_coverage 90\n</code></pre>\n"}], "owner": {"reputation": 8371, "user_id": 1094339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cibe3.png?s=128&g=1", "display_name": "Deekor", "link": "https://stackoverflow.com/users/1094339/deekor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 977, "favorite_count": 0, "accepted_answer_id": 36045730, "answer_count": 1, "score": 1, "last_activity_date": 1458158191, "creation_date": 1458157579, "question_id": 36045561, "link": "https://stackoverflow.com/questions/36045561/rspec-ignore-code-coverage-percentage", "title": "rspec ignore code coverage percentage?", "body": "<p>After I run <code>rspec</code> in my <code>Rails 4</code> project all the tests pass but I get:</p>\n\n<pre><code>Coverage (79.17%) is below the expected minimum coverage (80.00%).\n</code></pre>\n\n<p>as the last line. This is causing <code>Codeship</code> to mark the build as failed and email me. </p>\n\n<p>Is there anyway to disable this coverage test or change the minimum coverage percentage?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "shell"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1458157482, "post_id": 36045454, "comment_id": 59739526, "body": "Railroady etc. There are others."}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1458161290, "post_id": 36045454, "comment_id": 59741778, "body": "Thanks, I&#39;ll check it out @DaveNewton"}], "answers": [{"comments": [{"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "edited": false, "score": 0, "creation_date": 1458161346, "post_id": 36045915, "comment_id": 59741816, "body": "Thanks @thiagotonon I&#180;ll use this one"}], "tags": [], "owner": {"reputation": 167, "user_id": 5024577, "user_type": "registered", "profile_image": "https://graph.facebook.com/916105095112206/picture?type=large", "display_name": "thiagotonon", "link": "https://stackoverflow.com/users/5024577/thiagotonon"}, "is_accepted": true, "score": 1, "last_activity_date": 1458158805, "creation_date": 1458158805, "answer_id": 36045915, "question_id": 36045454, "link": "https://stackoverflow.com/questions/36045454/is-it-possible-to-some-how-view-or-generate-the-architecture-of-an-rails-applica/36045915#36045915", "title": "Is it possible to some how view or generate the architecture of an Rails application as a &quot;map&quot;", "body": "<p><a href=\"https://github.com/voormedia/rails-erd\" rel=\"nofollow\">rails-erd</a> is a great gem which generates a Entity-Relationships datagram for your application, I highly recommend it.</p>\n"}], "owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 36045915, "answer_count": 1, "score": 0, "last_activity_date": 1458158805, "creation_date": 1458157213, "question_id": 36045454, "link": "https://stackoverflow.com/questions/36045454/is-it-possible-to-some-how-view-or-generate-the-architecture-of-an-rails-applica", "title": "Is it possible to some how view or generate the architecture of an Rails application as a &quot;map&quot;", "body": "<p>I\u00b4m pretty new to rails and have been building an App to learn by building it. I was thinking about it would be great if I could somehow generate a map of the App that I\u00b4m building. I don't know if map is the right term but what I mean is if I could somehow generate a schema or outline of the App were I could see all connections, database tables, relations, etc... of the app.</p>\n\n<p>I'm using postgressql in the App if it makes a difference.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cucumber", "minitest"], "answers": [{"comments": [{"owner": {"reputation": 2678, "user_id": 2483138, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1320d18fa8806488f96baad70b29ce4c?s=128&d=identicon&r=PG", "display_name": "ABMagil", "link": "https://stackoverflow.com/users/2483138/abmagil"}, "edited": false, "score": 0, "creation_date": 1458489386, "post_id": 36100553, "comment_id": 59872363, "body": "To answer my meta-question, then, there is no built-in cucumber mechanism, but basic ruby mechanisms will work fine with no unexpected weirdness."}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 0, "last_activity_date": 1458383427, "creation_date": 1458383427, "answer_id": 36100553, "question_id": 36045339, "link": "https://stackoverflow.com/questions/36045339/how-to-reuse-minitest-support-code-in-cucumber-step-definitions/36100553#36100553", "title": "How to reuse Minitest support code in Cucumber step definitions?", "body": "<p>In <code>features/support/env.rb</code>, or in another <code>.rb</code> file in <code>features/support</code>, do</p>\n\n<pre><code>require_relative '../../test/support/my_helper_module'\n</code></pre>\n\n<p><code>MyHelperModule</code> will then be available in step definitions.</p>\n"}], "owner": {"reputation": 2678, "user_id": 2483138, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1320d18fa8806488f96baad70b29ce4c?s=128&d=identicon&r=PG", "display_name": "ABMagil", "link": "https://stackoverflow.com/users/2483138/abmagil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 36100553, "answer_count": 1, "score": 1, "last_activity_date": 1458403311, "creation_date": 1458156895, "last_edit_date": 1458403311, "question_id": 36045339, "link": "https://stackoverflow.com/questions/36045339/how-to-reuse-minitest-support-code-in-cucumber-step-definitions", "title": "How to reuse Minitest support code in Cucumber step definitions?", "body": "<p>I have a test suite that uses Minitest. As per the Minitest docs, when I had common functionality, I extracted it into a module, then included that module into <code>ActionDispatch::IntegrationTest</code>, giving me access in my tests. In this case, the extracted functionality formatted the requests and parsed the responses in my integration tests.</p>\n\n<p>Now, I'm bringing in Cucumber, but when I add <code>include MyHelperModule</code> in my steps definition file, it raises <code>NameError: undefined constant</code>.</p>\n\n<p><em>How can I include this functionality in my Cucumber step definitions without rewriting the module underneath <code>features/</code>?</em></p>\n\n<p>The module currently lives at <code>test/support/my_helper_module.rb</code>.</p>\n"}, {"tags": ["ruby", "soundcloud"], "answers": [{"comments": [{"owner": {"reputation": 943, "user_id": 3861062, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003054720441/picture?type=large", "display_name": "Sungpah Lee", "link": "https://stackoverflow.com/users/3861062/sungpah-lee"}, "edited": false, "score": 0, "creation_date": 1458159995, "post_id": 36045546, "comment_id": 59741027, "body": "Wow it is now working!! (: Thanks so much for your answer!! I just took as an answer!"}], "tags": [], "owner": {"reputation": 130, "user_id": 3711401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c3fa3f84c08e05d6a1574e6d2618f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Gorille", "link": "https://stackoverflow.com/users/3711401/gorille"}, "is_accepted": true, "score": 2, "last_activity_date": 1458157537, "creation_date": 1458157537, "answer_id": 36045546, "question_id": 36045268, "link": "https://stackoverflow.com/questions/36045268/file-new-command-for-ruby-to-upload-mp3-file-to-soundcloud/36045546#36045546", "title": "File.new command for Ruby to upload mp3 file to soundcloud", "body": "<p>you already have a file, no need to create a new one with <code>File.new</code></p>\n\n<p>have a closer look to your dump : </p>\n\n<pre><code> @tempfile=#&lt;Tempfile:/var/folders/...../RackMultipart20160316-21426-14vu8x1.mp3\n</code></pre>\n\n<p>this is a file, you may use it directly in your call </p>\n\n<pre><code>client.post('/tracks', :track =&gt; {\n         :title =&gt; 'This is my sound',\n         :asset_data =&gt; params[:mp3_1].tempfile)\n })\n</code></pre>\n"}], "owner": {"reputation": 943, "user_id": 3861062, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003054720441/picture?type=large", "display_name": "Sungpah Lee", "link": "https://stackoverflow.com/users/3861062/sungpah-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 36045546, "answer_count": 1, "score": 0, "last_activity_date": 1458157537, "creation_date": 1458156613, "question_id": 36045268, "link": "https://stackoverflow.com/questions/36045268/file-new-command-for-ruby-to-upload-mp3-file-to-soundcloud", "title": "File.new command for Ruby to upload mp3 file to soundcloud", "body": "<p>I'm now trying to upload a mp3 file to Soundcloud. Here I'm bogged down to the use of File.new command in Ruby. \nI send a request and a passing parameter looks like the below.</p>\n\n<pre><code>Parameters: {...\"mp3_1\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x007ff24d5e3ea8 @tempfile=#&lt;Tempfile:/var/folders/kk/y_wprlln2qv6mzylj03g14x00000gn/T/RackMultipart20160316-21426-14vu8x1.mp3&gt;, @original_filename=\"datasecurity.mp3\", @content_type=\"audio/mp3\", @headers=\"Content-Disposition: form-data; name=\\\"mp3_1\\\"; filename=\\\"datasecurity.mp3\\\"\\r\\nContent-Type: audio/mp3\\r\\n\"&gt;}\n</code></pre>\n\n<p>Then, I write File.new command with the potentail file name and params[:mp3_1] like the below.</p>\n\n<pre><code>client = Soundcloud.new(:access_token =&gt; 'XXX')\n\ntrack = client.post('/tracks', :track =&gt; {\n  :title =&gt; 'This is my sound',\n  :asset_data =&gt; File.new(\"file name\",params[:mp3_1])\n})\n</code></pre>\n\n<p>Now I get an error saying:\n<em>no implicit conversion of ActionDispatch::Http::UploadedFile into String</em></p>\n\n<p>The paperclip function works ( storing file to the storage directly has been what I've done ) but this file.new doesn't allow me to move forward. If I can get any help, I really appreciate that (:</p>\n\n<p>Best</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1458156363, "post_id": 36044399, "comment_id": 59738813, "body": "Just alternative way that might interest you <code>string = &quot;how are you&quot;</code> then <code>string.split.map.with_index{ |s,i| i%2 != 0 ? s[1].capitalize : s=0 }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5782572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c5d30ba7ab9fffc2f818d42cb869ec3d?s=128&d=identicon&r=PG&f=1", "display_name": "Shihan Rehman", "link": "https://stackoverflow.com/users/5782572/shihan-rehman"}, "edited": false, "score": 0, "creation_date": 1458155067, "post_id": 36044670, "comment_id": 59738035, "body": "Thanks for you help! Got it now."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 53, "user_id": 5782572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c5d30ba7ab9fffc2f818d42cb869ec3d?s=128&d=identicon&r=PG&f=1", "display_name": "Shihan Rehman", "link": "https://stackoverflow.com/users/5782572/shihan-rehman"}, "edited": false, "score": 0, "creation_date": 1458155149, "post_id": 36044670, "comment_id": 59738088, "body": "Glad to help! Feel free to accept my answer if it solved your problem."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1458156039, "post_id": 36044670, "comment_id": 59738626, "body": "...but there is no rush to select an answer, and OP doesn&#39;t want to discourage other answers or short-circuit those still working on answers. Many on SO wait at least a couple of hours."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1458178686, "post_id": 36044670, "comment_id": 59748614, "body": "Shihan, click on the grey checkmark to the left of the answer you want to accept. See the <a href=\"http://stackoverflow.com/help\">SO faq</a> for coverage of other things you need to know."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 3, "last_activity_date": 1458155135, "last_edit_date": 1458155135, "creation_date": 1458154711, "answer_id": 36044670, "question_id": 36044399, "link": "https://stackoverflow.com/questions/36044399/debug-ruby-algorithm/36044670#36044670", "title": "Debug ruby algorithm", "body": "<p>Let's take a look what's happening here:</p>\n\n<pre><code>index = 0\nwords.each do |word|\n  break if index == words.length\n  p word[index][1].inspect\n  index += 1\nend\n</code></pre>\n\n<p>In the first iteration, <code>word</code> will be <code>\"how\"</code> and <code>index</code> will be 0, so you're doing <code>p word[0][1].inspect</code>. <code>\"how\"[0]</code> is <code>\"h\"</code>, and <code>\"h\"[1]</code> is <code>nil</code> (because the string <code>\"h\"</code> only has one character).</p>\n\n<p>In the second iteration, <code>word</code> is <code>\"are\"</code> and <code>index</code> is 1. <code>\"are\"[1]</code> is <code>\"r\"</code> and <code>\"r\"[1]</code> is, again, <code>nil</code>.</p>\n\n<p>And so on. In every iteration you're taking a single character from <code>word</code> and then trying to get the second character of that string, which will always be <code>nil</code>.</p>\n\n<p>I suspect this is what you were trying to do:</p>\n\n<pre><code>index = 0\nloop do\n  break if index == words.length\n  p words[index][1]\n  index += 1\nend\n</code></pre>\n\n<p>See the difference? It prints <code>words[index][1]</code>, not <code>word[index][1]</code>, and keeps looping forever until <code>index == words.length</code> is true.</p>\n\n<p>However, since Ruby has <code>Enumerable#each</code>, you can let it do the work of iterating over <code>words</code> for you, and you don't need to worry about <code>index</code> at all. This is what you want:</p>\n\n<pre><code>words.each do |word|\n  p word[1]\nend\n</code></pre>\n\n<p>P.S. You'll notice that I used <code>p word[1]</code>, not <code>p word[1].inspect</code>. The <code>p</code> method will automatically call <code>inspect</code> on each of its arguments. If you do <code>p word[1].inspect</code>, you're basically doing <code>puts word[1].inspect.inspect</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5782572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c5d30ba7ab9fffc2f818d42cb869ec3d?s=128&d=identicon&r=PG&f=1", "display_name": "Shihan Rehman", "link": "https://stackoverflow.com/users/5782572/shihan-rehman"}, "edited": false, "score": 0, "creation_date": 1458156157, "post_id": 36044783, "comment_id": 59738679, "body": "Sorry about the typo, it&#39;s not 0&#39;s, the return should be [O,R,O], replaced with &#39;Letter&quot; O&#39;s"}], "tags": [], "owner": {"reputation": 134, "user_id": 3087676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wNNAz.jpg?s=128&g=1", "display_name": "cionescu", "link": "https://stackoverflow.com/users/3087676/cionescu"}, "is_accepted": false, "score": 0, "last_activity_date": 1458155032, "creation_date": 1458155032, "answer_id": 36044783, "question_id": 36044399, "link": "https://stackoverflow.com/questions/36044399/debug-ruby-algorithm/36044783#36044783", "title": "Debug ruby algorithm", "body": "<p>A very simple and clean solution is this</p>\n\n<pre><code>def capitalize(string)\n  words = string.split(\" \")\n  words.each_with_index.map do |word, index|\n    if index % 2 == 0\n        0\n    else\n        word[1].swapcase\n    end\n  end\nend\n\ncapitalize(\"how are you\")\n</code></pre>\n\n<p>You can try it out here <a href=\"https://repl.it/Bwyk/2\" rel=\"nofollow\">https://repl.it/Bwyk/2</a></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1458158828, "creation_date": 1458158828, "answer_id": 36045923, "question_id": 36044399, "link": "https://stackoverflow.com/questions/36044399/debug-ruby-algorithm/36045923#36045923", "title": "Debug ruby algorithm", "body": "<p>@Jordan has done a good job going through your code and explaining the problems.</p>\n\n<p>One option would be to use a regular expression:</p>\n\n<pre><code>R = /\n    (?&lt;=     # begin a positive lookbehind\n      \\b     # match a word break\n      [a-z] # match a lower-case letter\n    )        # end positive lookbehind\n    [a-z]   # match a lower-case letter\n    /ix      # case-insensitive (i) and free-spacing regex definition (x) modes\n\ndef capitalize(str)\n  str.gsub(R) { |c| c.upcase }\nend\n\ncapitalize(\"how are you\")\n  #=&gt; \"hOw aRe yOu\"\n</code></pre>\n\n<p>You could of course write:</p>\n\n<pre><code>def capitalize(str)\n  str.gsub(/(?&lt;=\\b[a-z])[a-z]/i) { |c| c.upcase }\nend\n</code></pre>\n\n<p>Another way of writing the regex is:</p>\n\n<pre><code>R = /\n    \\b    # match a word break\n    [a-z] # match a lower-case letter\n    \\K    # forget everything matched so far\n    [a-z] # match a lower-case letter\n    /ix   # case-insensitive (i) and free-spacing regex definition (x) modes\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "is_accepted": false, "score": 1, "last_activity_date": 1458162752, "creation_date": 1458162752, "answer_id": 36047053, "question_id": 36044399, "link": "https://stackoverflow.com/questions/36044399/debug-ruby-algorithm/36047053#36047053", "title": "Debug ruby algorithm", "body": "<p>One-liner should be presented here :)</p>\n\n<pre><code>\"how are you\".split(\" \").map{ |w| w[1].capitalize }\n=&gt; [\"O\", \"R\", \"O\"]\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5782572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c5d30ba7ab9fffc2f818d42cb869ec3d?s=128&d=identicon&r=PG&f=1", "display_name": "Shihan Rehman", "link": "https://stackoverflow.com/users/5782572/shihan-rehman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1458162752, "creation_date": 1458153930, "last_edit_date": 1458154413, "question_id": 36044399, "link": "https://stackoverflow.com/questions/36044399/debug-ruby-algorithm", "title": "Debug ruby algorithm", "body": "<p>I'm trying to capitalize the second letter of every word in a string. For example, if the string is \"how are you\", it should return [0,R,0], however I'm getting ['nil','nil','nil']. Why am I getting nil? Is there something I'm doing wrong?</p>\n\n<pre><code>def capitalize(string)\n  words = string.split(\" \")\n  index = 0\n  words.each do|word|\n    break if index == words.length\n    p word[index][1].inspect\n    index += 1\n  end\nend\n\ncapitalize(\"how are you\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "factory-bot"], "answers": [{"tags": [], "owner": {"reputation": 534, "user_id": 1055045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3bea0eb5ce2333ae2839f56c198ff4?s=128&d=identicon&r=PG", "display_name": "dft", "link": "https://stackoverflow.com/users/1055045/dft"}, "is_accepted": false, "score": 0, "last_activity_date": 1492646769, "creation_date": 1492646769, "answer_id": 43508049, "question_id": 36044337, "link": "https://stackoverflow.com/questions/36044337/in-factory-girl-how-can-i-specify-an-attribute-with-the-same-name-as-another-fa/43508049#43508049", "title": "In factory_girl, how can I specify an attribute with the same name as another factory?", "body": "<p>Your doing an association and that's not how you do associations in FactoryGirl. The error is telling you it's expecting a Position model and you've assigned it a string.</p>\n\n<pre><code>FactoryGirl.define do\n  factory :localized_position do\n    position { create(:position) }\n  end\nend\n</code></pre>\n\n<p>Or possibly the other way around as I'm not sure if your doing STI or polymorphic association there. You have <code>position_id</code> in both tables which seems suspect.</p>\n\n<pre><code>FactoryGirl.define do\n  factory :position do\n    localized_position { create(:localized_position) }\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 898, "user_id": 3216644, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/sMDMX.jpg?s=128&g=1", "display_name": "Seralto", "link": "https://stackoverflow.com/users/3216644/seralto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492646769, "creation_date": 1458153720, "last_edit_date": 1458576917, "question_id": 36044337, "link": "https://stackoverflow.com/questions/36044337/in-factory-girl-how-can-i-specify-an-attribute-with-the-same-name-as-another-fa", "title": "In factory_girl, how can I specify an attribute with the same name as another factory?", "body": "<p>I have two tables as follows:</p>\n\n<pre><code>POSITION TABLE:\nPOSITION_ID |SPORT_ID |PARENT_POSITION |SOURCE_ID |SOURCE_POSITION_NAME |\n------------|---------|----------------|----------|---------------------|\n1           |1        |1               |1         |Goalkeeper           |\n\nLOCALIZED_POSITION TABLE:\nLOCALIZED_POSITION_ID |POSITION_ID |LOCALE_ID |POSITION         |\n----------------------|------------|----------|-----------------|\n1                     |1           |1         |Goalkeeper       |\n</code></pre>\n\n<p>When I define this factory</p>\n\n<pre><code>FactoryGirl.define do\n  factory :localized_position do\n    position_id { Faker::Number.number(2) }\n    locale_id { Faker::Number.number(2) }\n    position 'Goalkeeper'\n  end\nend\n</code></pre>\n\n<p>and call <code>FactoryGirl.create(:localized_position)</code> I get this error:</p>\n\n<pre><code>Position(#70280313353320) expected, got String(#70280311914580)\n</code></pre>\n\n<p>Seems it is expecting the object <strong>position</strong> because of the factory with the same name.</p>\n\n<p>I already tried some changes without success, like:</p>\n\n<pre><code>self.position 'Goalkeeper'\n</code></pre>\n\n<p>and</p>\n\n<pre><code>FactoryGirl.define do\n  factory :localized_position do |f|\n    f.position_id { Faker::Number.number(2) }\n    f.locale_id { Faker::Number.number(2) }\n    f.position { 'Goalkeeper' + Random.rand(1..100).to_s }\n  end\nend\n</code></pre>\n\n<p>but nothing works. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "api", "scaffolding"], "comments": [{"owner": {"reputation": 51, "user_id": 5082314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3228aa34105ff96dd6806c457e5e9d4c?s=128&d=identicon&r=PG&f=1", "display_name": "kleverigheid", "link": "https://stackoverflow.com/users/5082314/kleverigheid"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1458154023, "post_id": 36044035, "comment_id": 59737441, "body": "How can I do this? If I skip assets controller will be for JSON only (as I know it will have HTML also)?"}], "answers": [{"tags": [], "owner": {"reputation": 1962, "user_id": 1650668, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7hdzg.jpg?s=128&g=1", "display_name": "Shaun", "link": "https://stackoverflow.com/users/1650668/shaun"}, "is_accepted": false, "score": 2, "last_activity_date": 1458154062, "creation_date": 1458154062, "answer_id": 36044453, "question_id": 36044035, "link": "https://stackoverflow.com/questions/36044035/rails-scaffolding-for-json-only/36044453#36044453", "title": "Rails scaffolding for JSON only", "body": "<p>To change the Rails controller generated by the scaffold you can add a new file: <code>lib/templates/rails/scaffold_controller/controller.rb</code>. It might be helpful to copy the <a href=\"https://github.com/rails/rails/blob/master/railties/lib/rails/generators/rails/scaffold_controller/templates/controller.rb\" rel=\"nofollow\">template from the Rails source code</a> as a starting point. From there you can edit each of the actions to end with <code>render json</code>, for example:</p>\n\n<pre><code># GET &lt;%= route_url %&gt;\ndef index\n  @&lt;%= plural_table_name %&gt; = &lt;%= orm_class.all(class_name) %&gt;\n  render json: @&lt;%= plural_table_name %&gt;.to_json\nend\n</code></pre>\n\n<p>To prevent asset/view files from being generated, add this to your <code>config/application.rb</code> file:</p>\n\n<pre><code>module AppName\n  class Application &lt; Rails::Application\n    # comments and config\n    # ...\n    config.generators do |g|\n      g.stylesheets false\n      g.javascripts false\n      g.helper false\n      g.views false\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3259, "user_id": 2424975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/jDtKZ.jpg?s=128&g=1", "display_name": "Cereal", "link": "https://stackoverflow.com/users/2424975/cereal"}, "is_accepted": false, "score": 1, "last_activity_date": 1575996045, "creation_date": 1575996045, "answer_id": 59271869, "question_id": 36044035, "link": "https://stackoverflow.com/questions/36044035/rails-scaffolding-for-json-only/59271869#59271869", "title": "Rails scaffolding for JSON only", "body": "<p>If you already have a project setup as a normal rails app, you can make the generators api only by setting it up in <code>config/application.rb</code>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>config.generators do |g|\n  g.api_only = true\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3222, "user_id": 1038034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P1rwn.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1038034/matt"}, "is_accepted": false, "score": 2, "last_activity_date": 1605365682, "creation_date": 1605365682, "answer_id": 64835167, "question_id": 36044035, "link": "https://stackoverflow.com/questions/36044035/rails-scaffolding-for-json-only/64835167#64835167", "title": "Rails scaffolding for JSON only", "body": "<h3>Use API flag in Rails 5+</h3>\n<p>Without having to modify configuration:</p>\n<pre><code>rails g scaffold TestLink --api\n</code></pre>\n<p>Pro tip: Use the --pretend flag to see what will be created before running:</p>\n<pre><code>rails g scaffold TestLink --api --pretend\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5082314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3228aa34105ff96dd6806c457e5e9d4c?s=128&d=identicon&r=PG&f=1", "display_name": "kleverigheid", "link": "https://stackoverflow.com/users/5082314/kleverigheid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1938, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1605365682, "creation_date": 1458152869, "question_id": 36044035, "link": "https://stackoverflow.com/questions/36044035/rails-scaffolding-for-json-only", "title": "Rails scaffolding for JSON only", "body": "<p>When I use <code>rails g scaffold Model key:string value:string</code> command it creates both controller and views (erb, scss, js). How can I generate only controller which will respond with only JSON format.</p>\n"}, {"tags": ["ruby", "ascii", "encode", "iso-8859-1"], "comments": [{"owner": {"reputation": 2762, "user_id": 1641867, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/X2rrS.png?s=128&g=1", "display_name": "ventiseis", "link": "https://stackoverflow.com/users/1641867/ventiseis"}, "edited": false, "score": 1, "creation_date": 1458153238, "post_id": 36043954, "comment_id": 59736975, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4967608/in-ruby-rails-how-can-i-encode-escape-special-characters-in-urls\">In Ruby/rails, how can I encode/escape special characters in URLs?</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1458153347, "post_id": 36043954, "comment_id": 59737053, "body": "Welcome to Stack Overflow. Please take the time to format your question for readability. SO provides formatting options for text in questions, answers , and limited formatting in comments. Those help make the text more readable. Also, SO is a reference book, not a discussion, so we don&#39;t use salutations, valedictions (&quot;Thanks&quot;) or signatures. I&#39;d recommend reading <a href=\"http://catb.org/esr/faqs/smart-questions.html\" rel=\"nofollow noreferrer\">catb.org/esr/faqs/smart-questions.html</a> as it&#39;s full of great information about asking questions."}, {"owner": {"reputation": 2762, "user_id": 1641867, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/X2rrS.png?s=128&g=1", "display_name": "ventiseis", "link": "https://stackoverflow.com/users/1641867/ventiseis"}, "edited": false, "score": 0, "creation_date": 1458153968, "post_id": 36043954, "comment_id": 59737417, "body": "The answerts to <a href=\"http://stackoverflow.com/questions/13338672/url-encode-in-ruby\">this question about &#39;url_encode in Ruby&#39;</a> might be helpful, too."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1458232447, "post_id": 36045935, "comment_id": 59779314, "body": "When answering, it&#39;s a really good idea to provide sample output and explain why your solution is THE solution. Tossing code out helps a little but explaining/teaching provides the true long-term answer and helps those who are searching for similar solutions in the future. Also, does this provide hex-encoded spaces as required?"}], "tags": [], "owner": {"reputation": 35, "user_id": 4683033, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-EPFONd6EA14/AAAAAAAAAAI/AAAAAAAACfQ/Z0lVOVVraHM/photo.jpg?sz=128", "display_name": "Rodrigo Monteiro Ferreira", "link": "https://stackoverflow.com/users/4683033/rodrigo-monteiro-ferreira"}, "is_accepted": false, "score": 1, "last_activity_date": 1458322104, "last_edit_date": 1458322104, "creation_date": 1458158877, "answer_id": 36045935, "question_id": 36043954, "link": "https://stackoverflow.com/questions/36043954/how-to-encode-to-ascii-chart-%c3%b3-to-f3/36045935#36045935", "title": "How to encode to ascii chart (&#243; to %F3)", "body": "<p>I use this:</p>\n\n<pre><code>URI.encode(\"Diagn\u00f3sticos da Am\u00e9rica\".encode('iso-8859-1'))\n</code></pre>\n\n<p>I've got the expected result:</p>\n\n<pre><code>\"Diagn%F3sticos%20da%20Am%E9rica\"\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4683033, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-EPFONd6EA14/AAAAAAAAAAI/AAAAAAAACfQ/Z0lVOVVraHM/photo.jpg?sz=128", "display_name": "Rodrigo Monteiro Ferreira", "link": "https://stackoverflow.com/users/4683033/rodrigo-monteiro-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1451, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458322104, "creation_date": 1458152570, "last_edit_date": 1458157496, "question_id": 36043954, "link": "https://stackoverflow.com/questions/36043954/how-to-encode-to-ascii-chart-%c3%b3-to-f3", "title": "How to encode to ascii chart (&#243; to %F3)", "body": "<p>My application needs to redirect my user to a external help page, passing the client name as parameter, but this external help page uses a different encoding.</p>\n\n<p>My original string is</p>\n\n<pre><code>\"Diagn\u00f3sticos da Am\u00e9rica\"\n</code></pre>\n\n<p>and the page expects a String like</p>\n\n<pre><code>\"Diagn%F3sticos%20da%20Am%E9rica\"\n</code></pre>\n\n<p>I need:</p>\n\n<pre><code>\"Diagn\u00f3sticos da Am\u00e9rica\" =&gt; \"Diagn%F3sticos%20da%20Am%E9rica\"\n</code></pre>\n\n<p>I'm trying in irb:</p>\n\n<pre><code>\"Diagn\u00f3sticos da Am\u00e9rica\".encode(\"ISO-8859-1\") =&gt; \"Diagn\\xF3sticos da Am\\xE9rica\"\n\"Diagn\u00f3sticos da Am\u00e9rica\".encode(\"UTF-8\", \"Windows-1252\") =&gt; \"Diagn\u00c3\u00b3sticos da Am\u00c3\u00a9rica\"\n\"Diagn\u00f3sticos da Am\u00e9rica\".encode(\"Windows-1252\") =&gt; \"Diagn\\xF3sticos da Am\\xE9rica\"\n</code></pre>\n\n<p>Does someone have an idea?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "edited": false, "score": 1, "creation_date": 1458152015, "post_id": 36043736, "comment_id": 59736223, "body": "Share example data and expected output."}], "answers": [{"tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": false, "score": 1, "last_activity_date": 1458152153, "creation_date": 1458152153, "answer_id": 36043818, "question_id": 36043736, "link": "https://stackoverflow.com/questions/36043736/retrieve-items-that-do-not-have-an-empty-array-list/36043818#36043818", "title": "Retrieve items that do not have an empty array list", "body": "<p>You can use <code>select</code> together with <code>present?</code> (or <code>reject</code>/<code>blank?</code>):</p>\n\n<pre><code>items = items.select{|x| x.array_attribute.present?}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6066965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d3c9fe97b6f1fcc2c5cc78ca1edfad?s=128&d=identicon&r=PG&f=1", "display_name": "pedro", "link": "https://stackoverflow.com/users/6066965/pedro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458152626, "creation_date": 1458151936, "last_edit_date": 1458152626, "question_id": 36043736, "link": "https://stackoverflow.com/questions/36043736/retrieve-items-that-do-not-have-an-empty-array-list", "title": "Retrieve items that do not have an empty array list", "body": "<p>I have a list of items, those items have some attributes one of which is an array list. The array list may be empty or not.</p>\n\n<p>How do i retrieve the items from the list that their array list is not empty</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3327, "user_id": 2121499, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/402a94a6a5d06a560185f3b6d693a5db?s=128&d=identicon&r=PG", "display_name": "Uelb", "link": "https://stackoverflow.com/users/2121499/uelb"}, "edited": false, "score": 0, "creation_date": 1458151975, "post_id": 36043602, "comment_id": 59736192, "body": "Are you sure that the id value of the contact is filled ? To answer, we would need to know what is in @contacts ? Maybe there is a select clause that prevent from accessing the contact attribute ?"}, {"owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "reply_to_user": {"reputation": 3327, "user_id": 2121499, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/402a94a6a5d06a560185f3b6d693a5db?s=128&d=identicon&r=PG", "display_name": "Uelb", "link": "https://stackoverflow.com/users/2121499/uelb"}, "edited": false, "score": 0, "creation_date": 1458152219, "post_id": 36043602, "comment_id": 59736347, "body": "@Oxynum Edited in, and I think you might be right now that I look at it."}], "answers": [{"comments": [{"owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1458152246, "post_id": 36043764, "comment_id": 59736368, "body": "Routes file edited in, though the only relevant part is <code>resources :contacts</code>"}], "tags": [], "owner": {"reputation": 96, "user_id": 4186086, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HXiHkSjIhx8/AAAAAAAAAAI/AAAAAAAAAow/7il9mB_dZQw/photo.jpg?sz=128", "display_name": "Wolas", "link": "https://stackoverflow.com/users/4186086/wolas"}, "is_accepted": false, "score": 1, "last_activity_date": 1458152017, "creation_date": 1458152017, "answer_id": 36043764, "question_id": 36043602, "link": "https://stackoverflow.com/questions/36043602/rails-resources-routes-miss-parameters-yet-match-documentation/36043764#36043764", "title": "Rails resources routes miss parameters yet match documentation", "body": "<p>Your code seems fine.</p>\n\n<p>Maybe you have an instance in the @contacts array that is not saved and therefore, has no id?</p>\n\n<p>Another way to put the same (again, your code is fine) would be:</p>\n\n<p>= link_to 'Show', contact_path(contact) </p>\n\n<p>I would suggest posting the routes file. </p>\n"}, {"tags": [], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "is_accepted": true, "score": 2, "last_activity_date": 1458154020, "last_edit_date": 1495540226, "creation_date": 1458152640, "answer_id": 36043975, "question_id": 36043602, "link": "https://stackoverflow.com/questions/36043602/rails-resources-routes-miss-parameters-yet-match-documentation/36043975#36043975", "title": "Rails resources routes miss parameters yet match documentation", "body": "<p>Change</p>\n\n<pre><code>Contact.select(\"title, first, last, city, phone, email\")\n</code></pre>\n\n<p>to</p>\n\n<pre><code>Contact.select(\"title, first, last, city, phone, email, id\")\n</code></pre>\n\n<p>the contact's id is nil because it isn't in the select query.</p>\n\n<p>Also, although it doesn't seem to be causing problems right now, I would reccomend using an array of symbols instead of a comma-separated string, so that the sql query is more specific. For example:</p>\n\n<pre><code>Contact.select(\"title, first\").to_sql #=&gt; SELECT title, first FROM contacts\nContact.select(:title,:first).to_sql #=&gt; SELECT \"contacts\".\"title\", \"contacts\".\"first\" FROM contacts\n</code></pre>\n\n<p>This way if you do a join with another model, it won't complain about the unspecific <code>id</code> in select. If you feel like you're typing too much, you can use the <a href=\"https://stackoverflow.com/questions/8816877/is-there-a-literal-notation-for-an-array-of-symbols\">%i(...) syntax</a>:</p>\n\n<pre><code>Contact.select(*%i(title first last city phone email))\n</code></pre>\n"}], "owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 36043975, "answer_count": 2, "score": 1, "last_activity_date": 1458154020, "creation_date": 1458151575, "last_edit_date": 1458152201, "question_id": 36043602, "link": "https://stackoverflow.com/questions/36043602/rails-resources-routes-miss-parameters-yet-match-documentation", "title": "Rails resources routes miss parameters yet match documentation", "body": "<p>Using Rails' <code>resources</code> directive, I have created a set of routes for a controller (<code>contacts</code>). I'm now editing the default views they come with to include some of my own content. However, the <code>link_to</code> method is failing, telling me that I'm missing a required parameter.</p>\n\n<blockquote>\n  <p>No route matches <code>{:action =&gt; 'show', :controller =&gt; 'contacts', :id =&gt; nil}</code> missing required keys <code>[:id]</code></p>\n</blockquote>\n\n<p>It's obvious <em>why</em> this is happening - the <code>link_to</code> method is not being supplied with an ID, instead it's getting nil. However, the code I'm using matches the documentation for <code>link_to</code>.</p>\n\n<p>This is the view in question:</p>\n\n<pre><code>&lt;% @contacts.each do |contact| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= contact.first %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= contact.last %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= contact.title %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= contact.city %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= contact.phone %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= contact.email %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Show', contact %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Edit', edit_contact_path(contact) %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Delete', contact.id, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<ul>\n<li><p><code>@contacts</code> is a set of contacts returned from the controller. The line that sets that is:</p>\n\n<pre><code>@contacts = Contact.select(\"title, first, last, city, phone, email\")\n                   .where(\"created_by\" =&gt; @current_user.id)\n</code></pre></li>\n<li><p>The relevant content of the routes.rb file is simply <code>resources :contacts</code>.</p></li>\n</ul>\n\n<p>The <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to\" rel=\"nofollow\">documentation</a> states:</p>\n\n<blockquote>\n  <p>Because it relies on url_for, link_to supports both older-style controller/action/id arguments and newer RESTful routes. Current Rails style favors RESTful routes whenever possible, so base your application on resources and use [...]</p>\n\n<pre><code>link_to \"Profile\", @profile\n</code></pre>\n</blockquote>\n\n<p>This appears to be what I'm using with <code>link_to 'Show', contact</code>.</p>\n\n<ul>\n<li>Why is the ID not getting passed to <code>link_to</code>?</li>\n<li>What can I do to remedy this?</li>\n</ul>\n"}, {"tags": ["ruby", "math", "floating-point"], "comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 3, "creation_date": 1458151679, "post_id": 36043597, "comment_id": 59736018, "body": "<a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1458433089, "post_id": 36043597, "comment_id": 59859566, "body": "What do you get with <code>puts num2</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1458161487, "post_id": 36043876, "comment_id": 59741913, "body": "It&#39;s a problem with binary arithmetic, not languages.  You can no more represent 0.1 exactly in binary than you can 1/3 in decimal.  Any decimal is a bad recommendation for Money.  Better to recommend a true class that does not depend on floating point numbers, big or small."}, {"owner": {"reputation": 1147, "user_id": 2917523, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1fda5c2c4d936aec156661783420984b?s=128&d=identicon&r=PG", "display_name": "Milo P", "link": "https://stackoverflow.com/users/2917523/milo-p"}, "reply_to_user": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1458162593, "post_id": 36043876, "comment_id": 59742539, "body": "@duffymo Strictly speaking, yes, but for the OP&#39;s purposes, the proximate cause is that Ruby by default represents a value like <code>1.001</code> as an instance of Class: Float (&quot;inexact real numbers using the native architecture&#39;s double-precision floating point representation&quot;, according to the docs). I mentioned the bit about this being the case in most languages as a direct response to the OP&#39;s apparent assumption that this is a Ruby-specific issue. Point taken with money, though."}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1458169759, "post_id": 36043876, "comment_id": 59745781, "body": "It&#39;s not Ruby; it&#39;s binary numbers.  You&#39;re representing floating point numbers using the IEEE 754 standard with a finite width.  True of all languages, not just Ruby."}, {"owner": {"reputation": 1147, "user_id": 2917523, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1fda5c2c4d936aec156661783420984b?s=128&d=identicon&r=PG", "display_name": "Milo P", "link": "https://stackoverflow.com/users/2917523/milo-p"}, "reply_to_user": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1458173189, "post_id": 36043876, "comment_id": 59746985, "body": "@duffymo Again, I understand that, I&#39;m responding to the OP&#39;s (apparently inexperienced) characterization of the problem as a Ruby issue. (&quot;Why does this happen in Ruby?&quot; &quot;This happens in most languages, including Ruby, and here&#39;s why.&quot;) It&#39;s not <i>strictly</i> true that the IEEE 754 representation is a necessary feature of all languages--for example, some language might use something like dec64 by default--but close enough. I&#39;ve edited my wording so that it&#39;s hopefully abundantly clear."}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1458173542, "post_id": 36043876, "comment_id": 59747089, "body": "Which languages use dec64?  I&#39;ve never heard of that spec.  Does dec refer to Digital Equipment Corporation?  I think it&#39;s important to make clear to the OP that this is much more than a Ruby problem."}, {"owner": {"reputation": 1147, "user_id": 2917523, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1fda5c2c4d936aec156661783420984b?s=128&d=identicon&r=PG", "display_name": "Milo P", "link": "https://stackoverflow.com/users/2917523/milo-p"}, "reply_to_user": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1458174140, "post_id": 36043876, "comment_id": 59747254, "body": "@duffymo &quot;This is a common problem with binary representation of fractional values, and is not Ruby-specific&quot; is the clearest, most accessible way I can think to convey this. If you can think of a better way to put it, please feel free to edit my answer or add your own."}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1458174230, "post_id": 36043876, "comment_id": 59747283, "body": "My comments said it first and better.  You&#39;ve only improved what was a poor answer by my prodding."}, {"owner": {"reputation": 1147, "user_id": 2917523, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1fda5c2c4d936aec156661783420984b?s=128&d=identicon&r=PG", "display_name": "Milo P", "link": "https://stackoverflow.com/users/2917523/milo-p"}, "reply_to_user": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1458174991, "post_id": 36043876, "comment_id": 59747468, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/106523/discussion-between-milo-price-and-duffymo\">continue this discussion in chat</a>."}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1458177482, "post_id": 36043876, "comment_id": 59748230, "body": "Let&#39;s not.  I&#39;m not interested."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1458433483, "post_id": 36043876, "comment_id": 59859662, "body": "Although the problem occurs in many languages, this answer offers not only am explanation but a ruby solution to avoid the problem."}], "tags": [], "owner": {"reputation": 1147, "user_id": 2917523, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1fda5c2c4d936aec156661783420984b?s=128&d=identicon&r=PG", "display_name": "Milo P", "link": "https://stackoverflow.com/users/2917523/milo-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1458175846, "last_edit_date": 1458175846, "creation_date": 1458152333, "answer_id": 36043876, "question_id": 36043597, "link": "https://stackoverflow.com/questions/36043597/why-is-1-001-0-001-not-equal-to-1-002/36043876#36043876", "title": "Why is 1.001 + 0.001 not equal to 1.002?", "body": "<p>This is a commonly-found, fundamental problem with binary representation of fractional values, and is not Ruby-specific.</p>\n\n<p>Because of the way that <a href=\"https://en.wikipedia.org/wiki/Floating_point#Floating-point_numbers\" rel=\"nofollow\">floating-point numbers</a> are implemented as binary values, there are sometimes noticeable discrepancies between what you'd expect with \"normal\" decimal math and what actually results. <a href=\"http://ruby-doc.org/core-2.2.3/Float.html\" rel=\"nofollow\">Ruby's default representation of floating-point numbers</a> is no exception--since it is based on the industry-standard  double-precision (IEEE 754) format, it internally represents non-integers as binary values, and so its approximations <a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow\">don't quite line up</a> with decimal values.</p>\n\n<p>If you need to do decimal calculations in Ruby, consider using <code>BigDecimal</code> (<a href=\"http://ruby-doc.org/stdlib-2.1.1/libdoc/bigdecimal/rdoc/BigDecimal.html\" rel=\"nofollow\">documentation</a>):</p>\n\n<pre><code>require 'bigdecimal'\nnum1 = BigDecimal.new(\"1.001\")\nnum2 = BigDecimal.new(\"0.001\")\nputs num1 + num2 #=&gt; 0.1002E1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 3284261, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6d87ed2fc59e8668262317a96075edba?s=128&d=identicon&r=PG&f=1", "display_name": "user3284261", "link": "https://stackoverflow.com/users/3284261/user3284261"}, "is_accepted": false, "score": -1, "last_activity_date": 1458152403, "creation_date": 1458152403, "answer_id": 36043904, "question_id": 36043597, "link": "https://stackoverflow.com/questions/36043597/why-is-1-001-0-001-not-equal-to-1-002/36043904#36043904", "title": "Why is 1.001 + 0.001 not equal to 1.002?", "body": "<p>In a perfect world yes you expected that 1.002000, but you have an error due to rounding in floating point arithmetic operation, you can check on the web machine epsilon or just floating point. \nFor example, you can calculate the relative error like that, and the error machine for the ruby language is 1e-15</p>\n\n<pre><code>f = 0.0\n100.times { f += 0.1 }\np f                            #=&gt; 9.99999999999998       # should be 10.0 in the ideal world.\np 10-f                         #=&gt; 1.9539925233402755e-14 # the floating-point error.\n</code></pre>\n"}], "owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "closed_date": 1458153392, "answer_count": 2, "score": 0, "last_activity_date": 1458175846, "creation_date": 1458151560, "last_edit_date": 1458152910, "question_id": 36043597, "link": "https://stackoverflow.com/questions/36043597/why-is-1-001-0-001-not-equal-to-1-002", "closed_reason": "Duplicate", "title": "Why is 1.001 + 0.001 not equal to 1.002?", "body": "<p>I have some code: </p>\n\n<pre><code>num1 = 1.001\nnum2 = 0.001\nsum  = num1 + num2\nputs sum\n</code></pre>\n\n<p>I expected <code>1.002000</code> but I am getting <code>1.0019999999999998</code>. Why is this the case?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "dry"], "answers": [{"comments": [{"owner": {"reputation": 791, "user_id": 4654583, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/eedf85d7b05eff57fc3be667d1d14465?s=128&d=identicon&r=PG", "display_name": "Ingo", "link": "https://stackoverflow.com/users/4654583/ingo"}, "edited": false, "score": 0, "creation_date": 1458208288, "post_id": 36043619, "comment_id": 59760802, "body": "I guess my problem is that send_data comes from the ApplicationController. I tried to do something similar, only have yield instead of send_data and then pass send_data through a block but it seemed a bit crazy"}], "tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": false, "score": 1, "last_activity_date": 1458151654, "creation_date": 1458151654, "answer_id": 36043619, "question_id": 36043524, "link": "https://stackoverflow.com/questions/36043524/possible-to-dry-up-the-same-method-in-two-different-controllers/36043619#36043619", "title": "Possible to DRY up the same method in two different controllers?", "body": "<p>You a module/concern to share code. Enclose shareable code in a module, then include that module in the required controllers. It's the Ruby way of doing this thing.</p>\n\n<pre><code>module Zippable\n  def zip\n    file = ZipService::ZipGenerator.create_zip\n    send_data(file.read, type: 'application/zip')\n    File.delete(file.path)\n  end\nend  \n\nclass PlacementController &lt; ApplicationSafeController\n\n  include Zippable\n\n  #Example Usage\n  def show\n    zip\n  end\nend  \n\nclass Api::ZipsController &lt; ApiController\n\n  include Zippable\nend\n</code></pre>\n"}], "owner": {"reputation": 791, "user_id": 4654583, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/eedf85d7b05eff57fc3be667d1d14465?s=128&d=identicon&r=PG", "display_name": "Ingo", "link": "https://stackoverflow.com/users/4654583/ingo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458151654, "creation_date": 1458151389, "question_id": 36043524, "link": "https://stackoverflow.com/questions/36043524/possible-to-dry-up-the-same-method-in-two-different-controllers", "title": "Possible to DRY up the same method in two different controllers?", "body": "<p>I'm have a Rails project which has an api part and the regular one. They have some common methods, for example, I have two controllers like so:</p>\n\n<pre><code>class PlacementController &lt; ApplicationSafeController\n\n  def zip\n    file = ZipService::ZipGenerator.create_zip\n    send_data(file.read, type: 'application/zip')\n    File.delete(file.path)\n  end\nend  \n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Api::ZipsController &lt; ApiController\n\n  def single_zip\n    file = ZipService::ZipGenerator.create_zip\n    send_data(file.read, type: 'application/zip')\n    File.delete(file.path)   \n  end \nend\n</code></pre>\n\n<p>And both my <code>ApiController</code> and <code>ApplicationSafeController</code> inherit from <code>ApplicationController</code>. My question is, what is the best way to clean this up without making the root <code>ApplicationController</code> dirty? (by adding a new method there). Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "actionmailer", "mailer"], "answers": [{"tags": [], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "is_accepted": true, "score": 1, "last_activity_date": 1458151145, "creation_date": 1458151145, "answer_id": 36043438, "question_id": 36043334, "link": "https://stackoverflow.com/questions/36043334/applicationmailer-default-from-title-not-email-address/36043438#36043438", "title": "ApplicationMailer default from title not email address?", "body": "<pre><code>default from: '\"Live to Challenge\" &lt;livetochallenge.com@gmail.com&gt;'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 4186086, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HXiHkSjIhx8/AAAAAAAAAAI/AAAAAAAAAow/7il9mB_dZQw/photo.jpg?sz=128", "display_name": "Wolas", "link": "https://stackoverflow.com/users/4186086/wolas"}, "is_accepted": false, "score": 1, "last_activity_date": 1458151510, "creation_date": 1458151510, "answer_id": 36043577, "question_id": 36043334, "link": "https://stackoverflow.com/questions/36043334/applicationmailer-default-from-title-not-email-address/36043577#36043577", "title": "ApplicationMailer default from title not email address?", "body": "<pre><code>class ApplicationMailer &lt; ActionMailer::Base\n  default from: \"Live to Challenge &lt;livetochallenge.com@gmail.com&gt;\"\n  layout 'mailer'\nend\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 36043438, "answer_count": 2, "score": 1, "last_activity_date": 1458151510, "creation_date": 1458150860, "question_id": 36043334, "link": "https://stackoverflow.com/questions/36043334/applicationmailer-default-from-title-not-email-address", "title": "ApplicationMailer default from title not email address?", "body": "<p><code>default from</code> works with an email address, but when a recipient receives an email I want the title to be \"Live to Challenge\" not \"livetochallenge.com\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/TnLtt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TnLtt.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>class ApplicationMailer &lt; ActionMailer::Base\n  default from: \"livetochallenge.com@gmail.com\" #This Line Needs An Email Address to Work\n  layout 'mailer'\nend\n</code></pre>\n\n<p>How can <a href=\"http://guides.rubyonrails.org/action_mailer_basics.html\" rel=\"nofollow noreferrer\">Action Mailer</a> send with livetochallenge.com@gmail.com, but be shown as \"Live to Challenge\"?</p>\n"}, {"tags": ["ruby", "rubygems", "rubymine"], "comments": [{"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1458150927, "post_id": 36043199, "comment_id": 59735562, "body": "have you run <code>bundle install</code>? Are you executing your ruby using <code>bundle exec</code>?"}, {"owner": {"reputation": 143, "user_id": 1013557, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1602450048/picture?type=large", "display_name": "Miverson", "link": "https://stackoverflow.com/users/1013557/miverson"}, "reply_to_user": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1458151643, "post_id": 36043199, "comment_id": 59735995, "body": "I am doing everything through RubyMine. So I am going to Tools -&gt; bundler -&gt; install. I am not. I tried running the rb script by clicking the file in RubyMine and say run and I have also run it through terminal via ruby /path/file.rb with the same output"}, {"owner": {"reputation": 143, "user_id": 1013557, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1602450048/picture?type=large", "display_name": "Miverson", "link": "https://stackoverflow.com/users/1013557/miverson"}, "reply_to_user": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1458151832, "post_id": 36043199, "comment_id": 59736110, "body": "I just noticed that when I go to Languages -&gt; Ruby SDK -&gt; global(ruby-2.0.0-p643) I can see that certains gems have this path Gem root: /Users/matt/.rvm/gems/ruby-2.0.0-p643@global/gems Gem root: /Users/matt/.rvm/gems/ruby-2.0.0-p643@global/bundler/gems"}], "owner": {"reputation": 143, "user_id": 1013557, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1602450048/picture?type=large", "display_name": "Miverson", "link": "https://stackoverflow.com/users/1013557/miverson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458150934, "creation_date": 1458150472, "last_edit_date": 1458150934, "question_id": 36043199, "link": "https://stackoverflow.com/questions/36043199/ruby-gem-not-loading-with-rubymine", "title": "ruby gem not loading with RubyMine", "body": "<p>Ok so inside my Gemfile I have this gemspec</p>\n\n<pre><code>gem 'output', '0.1.0', git: 'ssh://git@git.company.com/pe/gem-output.git', tag: 'master'\n</code></pre>\n\n<p>When I run bundler install from RubyMine is says it was successful.\n but in my ruby code when I try to call <code>Output.write(message)</code> it says:</p>\n\n<pre><code>`message': uninitialized constant Pmt::Output (NameError)`\n</code></pre>\n\n<p>So then if I do a require 'output' at the top of my file I get this error message:</p>\n\n<pre><code>`require': cannot load such file -- output (LoadError)`\n</code></pre>\n\n<p>Any advice would be much appreciated.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1458150835, "post_id": 36042930, "comment_id": 59735504, "body": "What is <code>roles</code>? A serialize array? A <code>has_and_belongs_to_many</code> association?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1458152221, "post_id": 36042930, "comment_id": 59736349, "body": "Or is <code>roles</code> a PostgreSQL array column?"}, {"owner": {"reputation": 173, "user_id": 2903682, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4W1Iw.jpg?s=128&g=1", "display_name": "yogi_bear", "link": "https://stackoverflow.com/users/2903682/yogi-bear"}, "edited": false, "score": 0, "creation_date": 1458154654, "post_id": 36042930, "comment_id": 59737799, "body": "roles is a serialized array. Ve updated my question. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 2903682, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4W1Iw.jpg?s=128&g=1", "display_name": "yogi_bear", "link": "https://stackoverflow.com/users/2903682/yogi-bear"}, "edited": false, "score": 0, "creation_date": 1458155211, "post_id": 36043397, "comment_id": 59738132, "body": "User.all.select { |u| u.roles.include? &quot;admin&quot; } does the trick. :) Thanks"}, {"owner": {"reputation": 96, "user_id": 4186086, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HXiHkSjIhx8/AAAAAAAAAAI/AAAAAAAAAow/7il9mB_dZQw/photo.jpg?sz=128", "display_name": "Wolas", "link": "https://stackoverflow.com/users/4186086/wolas"}, "reply_to_user": {"reputation": 173, "user_id": 2903682, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4W1Iw.jpg?s=128&g=1", "display_name": "yogi_bear", "link": "https://stackoverflow.com/users/2903682/yogi-bear"}, "edited": false, "score": 0, "creation_date": 1458216804, "post_id": 36043397, "comment_id": 59767037, "body": "could you up ote the answer to help others finding it faster? Thx"}], "tags": [], "owner": {"reputation": 96, "user_id": 4186086, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HXiHkSjIhx8/AAAAAAAAAAI/AAAAAAAAAow/7il9mB_dZQw/photo.jpg?sz=128", "display_name": "Wolas", "link": "https://stackoverflow.com/users/4186086/wolas"}, "is_accepted": true, "score": 1, "last_activity_date": 1458151025, "creation_date": 1458151025, "answer_id": 36043397, "question_id": 36042930, "link": "https://stackoverflow.com/questions/36042930/where-for-querying-an-array-attribute-in-rails-model/36043397#36043397", "title": "where for querying an array attribute in rails model", "body": "<p>Depends on what \"roles\" means:</p>\n\n<p>If it is an association as in</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :roles\nend\n</code></pre>\n\n<p>Then you look up the role and fetch all users:</p>\n\n<pre><code>Role.find_by_name(\"admin\").users\n</code></pre>\n\n<p>or roles is just a column and it is serialised, in which case you can instantiate all users (slow)</p>\n\n<pre><code>User.all.select { |u| u.roles.include? \"admin\" }\n</code></pre>\n\n<p>Or query the database directly which is more complex and depends on the adapter.</p>\n\n<p>My opinion: I would avoid using serialised columns, when relations can do. They are cumbersome in every way: Forms, Searches, Selects...</p>\n"}], "owner": {"reputation": 173, "user_id": 2903682, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4W1Iw.jpg?s=128&g=1", "display_name": "yogi_bear", "link": "https://stackoverflow.com/users/2903682/yogi-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 36043397, "answer_count": 1, "score": -1, "last_activity_date": 1458159358, "creation_date": 1458149639, "last_edit_date": 1458159358, "question_id": 36042930, "link": "https://stackoverflow.com/questions/36042930/where-for-querying-an-array-attribute-in-rails-model", "title": "where for querying an array attribute in rails model", "body": "<p>I have a user model with an array of roles.</p>\n\n<pre><code>u=User.first\nu.roles = ['admin']\nv=User.last\nu.roles = ['admin', 'member']\n</code></pre>\n\n<p>How do i query to fetch all users with admin role?</p>\n\n<p>Edit:\n<code>roles</code> is a serialized array for the user model</p>\n\n<p><em><code>User</code> Model:</em></p>\n\n<pre><code>serialize :roles\n</code></pre>\n\n<p><em>Migration:</em></p>\n\n<pre><code>add_column :users, :roles, :string, default: []\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "will-paginate"], "answers": [{"comments": [{"owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "edited": false, "score": 0, "creation_date": 1458155671, "post_id": 36043299, "comment_id": 59738393, "body": "I thought about doing it that way but was worried about it getting a little messy. Definitely one way to do it though."}], "tags": [], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "is_accepted": false, "score": 1, "last_activity_date": 1458150747, "creation_date": 1458150747, "answer_id": 36043299, "question_id": 36042915, "link": "https://stackoverflow.com/questions/36042915/combine-2-models-into-one-array-paginate-and-force-1-partial/36043299#36043299", "title": "Combine 2 models into one array, paginate, and force 1 partial", "body": "<p>You need to iterate over each item in the collection and have a conditional based on the model type, so for example:</p>\n\n<pre><code>&lt;div id=\"car-alerts\" class=\"car-alerts-all\"&gt;\n  &lt;% @collection.each do |car_or_alert| %&gt;\n    &lt;%= \n    if car_or_alert.is_a?(Alert)\n      render :alert #you need to add locals here as well, but it unclear what locals you are using\n    else\n      render :car #see above\n    end %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "edited": false, "score": 0, "creation_date": 1458155751, "post_id": 36043909, "comment_id": 59738438, "body": "I didn&#39;t think of taking it out of the partial altogether but that would work too."}], "tags": [], "owner": {"reputation": 96, "user_id": 4186086, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HXiHkSjIhx8/AAAAAAAAAAI/AAAAAAAAAow/7il9mB_dZQw/photo.jpg?sz=128", "display_name": "Wolas", "link": "https://stackoverflow.com/users/4186086/wolas"}, "is_accepted": false, "score": 2, "last_activity_date": 1458152414, "creation_date": 1458152414, "answer_id": 36043909, "question_id": 36042915, "link": "https://stackoverflow.com/questions/36042915/combine-2-models-into-one-array-paginate-and-force-1-partial/36043909#36043909", "title": "Combine 2 models into one array, paginate, and force 1 partial", "body": "<p>I would use the fact that you basically just want to output the model name and do this:</p>\n\n<pre><code>&lt;% if @collection.count &gt; 0 %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-xs-12\"&gt;\n      &lt;div id=\"car-alerts\" class=\"car-alerts-all\"&gt;\n        &lt;%- @collection.each do |obj| -%&gt;\n          &lt;%= obj.class.to_s -%&gt; - &lt;%= obj.id %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;%= will_paginate @collection -%&gt;\n&lt;% else %&gt;\n  &lt;p class=\"no-alerts-message\"&gt;Your car is healthy&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>but it would break easily if you wanted to add labels different to class names. </p>\n"}, {"tags": [], "owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "is_accepted": false, "score": 0, "last_activity_date": 1458155562, "creation_date": 1458155562, "answer_id": 36044939, "question_id": 36042915, "link": "https://stackoverflow.com/questions/36042915/combine-2-models-into-one-array-paginate-and-force-1-partial/36044939#36044939", "title": "Combine 2 models into one array, paginate, and force 1 partial", "body": "<p>Turns out it was as simple as setting the partial from <code>render</code></p>\n\n<pre><code>&lt;% if @collection.count &gt; 0 %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-xs-12\"&gt;\n      &lt;div id=\"car-alerts\" class=\"car-alerts-all\"&gt;\n        &lt;%= render collection: @collection, partial: 'car/partial_name' -%&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;%= will_paginate @collection -%&gt;\n&lt;% else %&gt;\n  &lt;p class=\"no-alerts-message\"&gt;Your car is healthy&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This being the key change - </p>\n\n<pre><code>&lt;%= render collection: @collection, partial: 'car/partial_name' -%&gt;\n</code></pre>\n"}], "owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1458155562, "creation_date": 1458149595, "question_id": 36042915, "link": "https://stackoverflow.com/questions/36042915/combine-2-models-into-one-array-paginate-and-force-1-partial", "title": "Combine 2 models into one array, paginate, and force 1 partial", "body": "<p>I want to combine data from two different models, combine it into one array and use the will_paginate gem to paginate the results in my view on that collection. I'm already using <code>require 'will_paginate/array'</code> to allow for a normal, non-ActiveRecord array and its all working properly. </p>\n\n<p>My problem is that its using two different partials to render the entries based on which model the data originated from. How do I force it render one specific partial?</p>\n\n<p><strong>controller</strong></p>\n\n<pre><code>def sample_action\n  page = params[:page] || 1\n\n  @collection = []\n  @car.messages.select {|msg| @collection &lt;&lt; msg}\n  Alerts.where(car_id: @car.id).select {|alerts| @collection &lt;&lt; alerts}\n\n  @collection = @collection.sort{|a,b| b[:created_at] &lt;=&gt; a[:created_at]}\n  @collection = @collection.paginate(:page =&gt; page, :per_page =&gt; 30)\n\n  respond_to do |format|\n    format.html { render :sample_action }\n  end\nend\n</code></pre>\n\n<p><strong>view</strong></p>\n\n<pre><code>&lt;% if @collection.count &gt; 0 %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-xs-12\"&gt;\n      &lt;div id=\"car-alerts\" class=\"car-alerts-all\"&gt;\n        &lt;%= render @collection -%&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;%= will_paginate @collection -%&gt;\n&lt;% else %&gt;\n  &lt;p class=\"no-alerts-message\"&gt;Your car is healthy&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>car partial</strong></p>\n\n<pre><code>Car - &lt;%= collection.id %&gt;\n&lt;br&gt;\n</code></pre>\n\n<p><strong>alert partial</strong></p>\n\n<pre><code>Alert - &lt;%= collection.id %&gt;\n&lt;br&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 3327, "user_id": 2121499, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/402a94a6a5d06a560185f3b6d693a5db?s=128&d=identicon&r=PG", "display_name": "Uelb", "link": "https://stackoverflow.com/users/2121499/uelb"}, "edited": false, "score": 0, "creation_date": 1458149903, "post_id": 36042705, "comment_id": 59734904, "body": "Do you want it to be resolved in a pure SQL way or is an hybrid solution acceptable. Some operations can be done in the ruby side."}, {"owner": {"reputation": 4724, "user_id": 2324475, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/901abf121c8882eac2cdb18614b58f75?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2324475/sam"}, "reply_to_user": {"reputation": 3327, "user_id": 2121499, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/402a94a6a5d06a560185f3b6d693a5db?s=128&d=identicon&r=PG", "display_name": "Uelb", "link": "https://stackoverflow.com/users/2121499/uelb"}, "edited": false, "score": 0, "creation_date": 1458150219, "post_id": 36042705, "comment_id": 59735125, "body": "Anything that gets it done is fine with me, but performance is a consideration. So for example I would prefer to avoid doing something like pulling in the entire table and processing it in-memory. I&#39;m not very familiar with Ruby so I&#39;m open to suggestions."}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "edited": false, "score": 0, "creation_date": 1458150335, "post_id": 36042705, "comment_id": 59735207, "body": "How many duplicate records are there going to be? If only a few then you can group by date and filter later in ruby"}, {"owner": {"reputation": 4724, "user_id": 2324475, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/901abf121c8882eac2cdb18614b58f75?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2324475/sam"}, "edited": false, "score": 0, "creation_date": 1458150546, "post_id": 36042705, "comment_id": 59735332, "body": "Right now there are only four per set. I don&#39;t see it getting too much more than that, potentially up to 10 or 20 in the future."}], "answers": [{"comments": [{"owner": {"reputation": 4724, "user_id": 2324475, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/901abf121c8882eac2cdb18614b58f75?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2324475/sam"}, "edited": false, "score": 0, "creation_date": 1458151626, "post_id": 36043022, "comment_id": 59735987, "body": "Thanks, this works fine and may be my best option. I&#39;m going to leave this open for a bit because I would prefer to do it without a big in-line SQL query, but otherwise I will accept your answer."}], "tags": [], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "is_accepted": true, "score": 3, "last_activity_date": 1458149927, "creation_date": 1458149927, "answer_id": 36043022, "question_id": 36042705, "link": "https://stackoverflow.com/questions/36042705/get-the-average-of-the-most-recent-records-within-groups-with-activerecord/36043022#36043022", "title": "Get the average of the most recent records within groups with ActiveRecord", "body": "<p>When all you have is a hammer, everything looks like a nail.</p>\n\n<p>Sometimes, raw SQL is the best choice. You can do something like:</p>\n\n<pre><code>@all_team_avg = NielsenData.find_by_sql(\"...your_sql_statement_here...\")\n</code></pre>\n"}], "owner": {"reputation": 4724, "user_id": 2324475, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/901abf121c8882eac2cdb18614b58f75?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2324475/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 36043022, "answer_count": 1, "score": 4, "last_activity_date": 1458150554, "creation_date": 1458148992, "last_edit_date": 1495535312, "question_id": 36042705, "link": "https://stackoverflow.com/questions/36042705/get-the-average-of-the-most-recent-records-within-groups-with-activerecord", "title": "Get the average of the most recent records within groups with ActiveRecord", "body": "<p>I have the following query, which calculates the average number of impressions across all teams for a given name and league:</p>\n\n<pre><code>@all_team_avg = NielsenData\n                  .where('name = ? and league = ?', name, league)\n                  .average('impressions')\n                  .to_i\n</code></pre>\n\n<p>However, there can be multiple entries for each name/league/team combination. I need to modify the query to only average the most recent records by <code>created_at</code>.</p>\n\n<p>With the help of <a href=\"https://stackoverflow.com/a/3800572/2324475\">this answer</a> I came up with a query which gets the result that I need (I would replace the hard-coded <code>WHERE</code> clause with <code>name</code> and <code>league</code> in the application), but it seems excessively complicated and I have no idea how to translate it nicely into ActiveRecord:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT avg(sub.impressions) \n    FROM (\n    WITH summary AS (\n        SELECT n.team, \n               n.name,\n               n.league,\n               n.impressions, \n               n.created_at,\n               ROW_NUMBER() OVER(PARTITION BY n.team \n                            ORDER BY n.created_at DESC) AS rowcount\n        FROM nielsen_data n\n        WHERE n.name = 'Social Media - Twitter Followers' \n          AND n.league = 'National Football League'\n    )  \n    SELECT s.*\n    FROM summary s\n    WHERE s.rowcount = 1) sub;\n</code></pre>\n\n<p>How can I rewrite this query using ActiveRecord or achieve the same result in a simpler way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 1, "creation_date": 1458149557, "post_id": 36042703, "comment_id": 59734654, "body": "Can you include your error stacktrace?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1458149582, "post_id": 36042703, "comment_id": 59734675, "body": "Welcome. We need the full error, along with the necessary input. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}, {"owner": {"reputation": 1, "user_id": 6073008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fad25eb8d08e0cfcc2a607477556db6?s=128&d=identicon&r=PG&f=1", "display_name": "tja", "link": "https://stackoverflow.com/users/6073008/tja"}, "edited": false, "score": 0, "creation_date": 1458151501, "post_id": 36042703, "comment_id": 59735915, "body": "hey jon, i inclued it above. thank you!"}, {"owner": {"reputation": 1, "user_id": 6073008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fad25eb8d08e0cfcc2a607477556db6?s=128&d=identicon&r=PG&f=1", "display_name": "tja", "link": "https://stackoverflow.com/users/6073008/tja"}, "edited": false, "score": 0, "creation_date": 1458511041, "post_id": 36042703, "comment_id": 59880342, "body": "i updated my code, can you figure out why i get the error? thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6073008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fad25eb8d08e0cfcc2a607477556db6?s=128&d=identicon&r=PG&f=1", "display_name": "tja", "link": "https://stackoverflow.com/users/6073008/tja"}, "edited": false, "score": 0, "creation_date": 1458166610, "post_id": 36044355, "comment_id": 59744508, "body": "thank you that helps! but what would be the equivalent for <code>.today?</code> i don&#39;t need that, i just need <code>test.date</code>"}, {"owner": {"reputation": 494, "user_id": 2036311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caed49fcdfae90dc9ed4c83bc272221c?s=128&d=identicon&r=PG", "display_name": "radhika", "link": "https://stackoverflow.com/users/2036311/radhika"}, "reply_to_user": {"reputation": 1, "user_id": 6073008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fad25eb8d08e0cfcc2a607477556db6?s=128&d=identicon&r=PG&f=1", "display_name": "tja", "link": "https://stackoverflow.com/users/6073008/tja"}, "edited": false, "score": 0, "creation_date": 1458226364, "post_id": 36044355, "comment_id": 59774561, "body": "Date.today is just a placeholder for any date that you want to pass in. You can pass in any date e.g <code>test(&quot;01-01-2016&quot;.to_date)</code>."}, {"owner": {"reputation": 1, "user_id": 6073008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fad25eb8d08e0cfcc2a607477556db6?s=128&d=identicon&r=PG&f=1", "display_name": "tja", "link": "https://stackoverflow.com/users/6073008/tja"}, "edited": false, "score": 0, "creation_date": 1458300637, "post_id": 36044355, "comment_id": 59810621, "body": "thank you! i posted the code where i try to call &quot;test&quot;. i only get the error when i do that. what do i have to change?"}], "tags": [], "owner": {"reputation": 494, "user_id": 2036311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caed49fcdfae90dc9ed4c83bc272221c?s=128&d=identicon&r=PG", "display_name": "radhika", "link": "https://stackoverflow.com/users/2036311/radhika"}, "is_accepted": false, "score": 1, "last_activity_date": 1458154449, "last_edit_date": 1458154449, "creation_date": 1458153765, "answer_id": 36044355, "question_id": 36042703, "link": "https://stackoverflow.com/questions/36042703/cant-call-my-method/36044355#36044355", "title": "can&#39;t call my method?", "body": "<p>It's hard to parse what your method is intended to do. For this specific error, you're getting it because your method expects an argument when you call it. When you write</p>\n\n<pre><code>def test date\n  ..\nend\n</code></pre>\n\n<p>that is equivalent to writing</p>\n\n<pre><code>def test(date)\n  ..\nend\n</code></pre>\n\n<p>This means your method is called <code>test</code> and takes an argument called <code>date</code>. When you try to call it as <code>test</code>, it complains because you need to pass in the <code>date</code> argument. For example a valid call might be <code>test Date.today</code> or <code>test(Date.today)</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 6073008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fad25eb8d08e0cfcc2a607477556db6?s=128&d=identicon&r=PG&f=1", "display_name": "tja", "link": "https://stackoverflow.com/users/6073008/tja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1458713240, "answer_count": 1, "score": -3, "last_activity_date": 1458510990, "creation_date": 1458148985, "last_edit_date": 1458510990, "question_id": 36042703, "link": "https://stackoverflow.com/questions/36042703/cant-call-my-method", "closed_reason": "Not suitable for this site", "title": "can&#39;t call my method?", "body": "<p>I can't figure out why I get the error <code>wrong number of arguments (0 for 1)</code> for this code snippet. </p>\n\n<pre><code>def test date\n  return_test = nil\n  return_date = nil\n  self.results.each do |result1|\n    if result1.parameter.id == 'T'\n      if result.date &lt; date\n        return_test = result.value\n        return_date = result.date\n        if !return_date.nil? &amp;&amp; result.date &gt; return_date\n          return_date = result.date\n          return_test = result.value\n        end\n      end\n    end\n  end\n  return return_test\nend\n</code></pre>\n\n<p>Did I forget something?   </p>\n\n<p>edit: when i just test the code it doesn't give me any error. only if i wanna use the test method. what do i have to change here?</p>\n\n<pre><code>   dig_k = 0\npatient.labresults.each do |m|\nunless patient.test.nil?\n  if patient.test.date(m.startdat)&lt;2.8\n    patient.medications.each do |m2|\n      if m.medi.atc =~ /^C01AA05/\n        dig_k+=1\n      end\n      end\n  end\nend\n</code></pre>\n\n<p>error :</p>\n\n<pre><code>  rb:311:in `test': wrong number of arguments (0 for 1) (ArgumentError)\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1458149905, "post_id": 36042518, "comment_id": 59734906, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, including the links at the bottom, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Your example is not syntactically correct, plus your grammar needs work. Please take the time to capitalize correctly as the effort you put into your question will be reflected by the effort others will put into helping you."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1458149961, "post_id": 36042665, "comment_id": 59734950, "body": "If this answer solves the problem, then show your appreciation by upvoting the answer and selecting the best answer as the solution to the problem. It&#39;s good to wait a day before selecting a solution though, as good answers often take a while to formulate, and the earth, having 24 hours/day, causes some answerers to not see the question for 12 hours or more."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1458150100, "post_id": 36042665, "comment_id": 59735051, "body": "Instead of tossing out code, explain <i>why</i> the code is appropriate. It&#39;s the difference between handing someone who&#39;s starving a fish vs. teaching them how to fish."}], "tags": [], "owner": {"reputation": 3327, "user_id": 2121499, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/402a94a6a5d06a560185f3b6d693a5db?s=128&d=identicon&r=PG", "display_name": "Uelb", "link": "https://stackoverflow.com/users/2121499/uelb"}, "is_accepted": false, "score": 2, "last_activity_date": 1458150984, "last_edit_date": 1458150984, "creation_date": 1458148877, "answer_id": 36042665, "question_id": 36042518, "link": "https://stackoverflow.com/questions/36042518/how-add-a-record-in-a-collection-with-rails-console/36042665#36042665", "title": "How add a record in a collection with rails console?", "body": "<p>There is your answer :</p>\n\n<pre><code> Order.find(19).order_items &lt;&lt; OrderItem.find(2)\n</code></pre>\n\n<p>After reading some comments, let me improve my answer by adding this link :\n<a href=\"http://guides.rubyonrails.org/association_basics.html#has-many-association-reference\" rel=\"nofollow\">http://guides.rubyonrails.org/association_basics.html#has-many-association-reference</a>\nYou can look at the 4.3.1.2 collection&lt;&lt;(object, ...) point</p>\n"}], "owner": {"reputation": 141, "user_id": 6010826, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f368bf6a1c64f908dd40905661b0809f?s=128&d=identicon&r=PG&f=1", "display_name": "Giancarlos", "link": "https://stackoverflow.com/users/6010826/giancarlos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458150984, "creation_date": 1458148410, "question_id": 36042518, "link": "https://stackoverflow.com/questions/36042518/how-add-a-record-in-a-collection-with-rails-console", "title": "How add a record in a collection with rails console?", "body": "<p>i have this :</p>\n\n<pre><code> Order.find(19).order_items\n\n =&gt; #&lt;ActiveRecord::Associations::CollectionProxy []&gt; \n</code></pre>\n\n<p>how can i add this object \"order_item\" to \"Order\"?</p>\n\n<pre><code>order_item = OderItem.find(2)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "is_accepted": true, "score": 1, "last_activity_date": 1458146689, "creation_date": 1458146689, "answer_id": 36041870, "question_id": 36041615, "link": "https://stackoverflow.com/questions/36041615/active-models-method-wont-return-a-bigdecimal/36041870#36041870", "title": "Active Model&#39;s method won&#39;t return a BigDecimal", "body": "<p>Restart the console instead of <code>reload!</code> when you make changes to a Model.</p>\n\n<p>Yes, I know, I'm stupid. But hey, someone else might be this stupid in the future. I'll just leave it here.</p>\n"}], "owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 36041870, "answer_count": 1, "score": 0, "last_activity_date": 1458146689, "creation_date": 1458145992, "question_id": 36041615, "link": "https://stackoverflow.com/questions/36041615/active-models-method-wont-return-a-bigdecimal", "title": "Active Model&#39;s method won&#39;t return a BigDecimal", "body": "<p>Humans have a pay a percentage fee depending on how charitable they are.</p>\n\n<pre><code>class Human &lt; ActiveRecord::Base\n  def fee\n    if charitable\n      fee = BigDecimal('0.2')\n    else\n      fee = BigDecimal('0.5')\n    end\n    fee\n  end\nend\n</code></pre>\n\n<p>But why is it that when I run this on the console for Bob's fee, I get a <code>Fixnum</code>:</p>\n\n<pre><code>&gt; bob.charitable\n =&gt; false # Ahh, so he should pay a fifty percent fee\n&gt; bob.fee\n =&gt; 0 # Whaaat? The dastardly bob has somehow H@X0R the system\n&gt; bob.fee.class\n =&gt; Fixnum # What? This was supposed to be a BigDecimal\n</code></pre>\n\n<p>Damn you Bob.</p>\n\n<p>Help me beat Bob.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 91026, "user_id": 131433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6eeaf8698180e971e169a925d8e0f4f?s=128&d=identicon&r=PG", "display_name": "bmargulies", "link": "https://stackoverflow.com/users/131433/bmargulies"}, "is_accepted": true, "score": 2, "last_activity_date": 1458144502, "creation_date": 1458144502, "answer_id": 36041053, "question_id": 36040989, "link": "https://stackoverflow.com/questions/36040989/controlling-gem-install-options-with-bundle/36041053#36041053", "title": "Controlling gem install options with bundle", "body": "<p>The solution is:</p>\n\n<pre><code>bundle config build.libv8 --with-system-v8\n</code></pre>\n"}], "owner": {"reputation": 91026, "user_id": 131433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6eeaf8698180e971e169a925d8e0f4f?s=128&d=identicon&r=PG", "display_name": "bmargulies", "link": "https://stackoverflow.com/users/131433/bmargulies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 36041053, "answer_count": 1, "score": 0, "last_activity_date": 1458144502, "creation_date": 1458144333, "question_id": 36040989, "link": "https://stackoverflow.com/questions/36040989/controlling-gem-install-options-with-bundle", "title": "Controlling gem install options with bundle", "body": "<pre><code>bundle install\n</code></pre>\n\n<p>where some gem that depends on libv8 is in the Gemfile (indirectly) leads to compile errors with libv8.</p>\n\n<p>So, following advice, I did:</p>\n\n<pre><code>sudo gem install libv8 -v 3.16.14.11 -- --with-system-v8\n</code></pre>\n\n<p>and it succeeded (after brew install of libv8)</p>\n\n<p>However, gem install keeps trying to do the install of libv8 without the --with-system-v8 option.</p>\n\n<p>Can I explicitly put libv8 into the Gemfile with the option? I can't see where to put such an option in the spec for Gemfile.</p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 122, "user_id": 1492166, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f7caf04a05fda23c67ff8bdcd097d968?s=128&d=identicon&r=PG&f=1", "display_name": "Nurul Amin Shuvo", "link": "https://stackoverflow.com/users/1492166/nurul-amin-shuvo"}, "edited": false, "score": 0, "creation_date": 1458144617, "post_id": 36041044, "comment_id": 59731093, "body": "that will cycle through grey and white in every alternate values. I want it to have same color for same date, example: all march 15th record will have grey and all march 16th will have white and all march 18th will have grey again."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 122, "user_id": 1492166, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f7caf04a05fda23c67ff8bdcd097d968?s=128&d=identicon&r=PG&f=1", "display_name": "Nurul Amin Shuvo", "link": "https://stackoverflow.com/users/1492166/nurul-amin-shuvo"}, "edited": false, "score": 0, "creation_date": 1458148185, "post_id": 36041044, "comment_id": 59733721, "body": "See my update : If the date&#39;s day number in the month is even (example: today 16th of march 2016, 16 is even), then the color will be grey, if not the color will be white."}, {"owner": {"reputation": 122, "user_id": 1492166, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f7caf04a05fda23c67ff8bdcd097d968?s=128&d=identicon&r=PG&f=1", "display_name": "Nurul Amin Shuvo", "link": "https://stackoverflow.com/users/1492166/nurul-amin-shuvo"}, "edited": false, "score": 0, "creation_date": 1458149613, "post_id": 36041044, "comment_id": 59734697, "body": "Your update could work if there wasn&#39;t ant holydays, there might come two odd or even days one after another."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 122, "user_id": 1492166, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f7caf04a05fda23c67ff8bdcd097d968?s=128&d=identicon&r=PG&f=1", "display_name": "Nurul Amin Shuvo", "link": "https://stackoverflow.com/users/1492166/nurul-amin-shuvo"}, "edited": false, "score": 1, "creation_date": 1458149838, "post_id": 36041044, "comment_id": 59734856, "body": "You didn&#39;t give that constraint on your original question. Please be explicit in your demand and list all your constraints clearly"}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": false, "score": 1, "last_activity_date": 1458150286, "last_edit_date": 1458150286, "creation_date": 1458144484, "answer_id": 36041044, "question_id": 36040960, "link": "https://stackoverflow.com/questions/36040960/styling-html-with-odd-even-colors/36041044#36041044", "title": "Styling HTML with odd/even colors", "body": "<p>You can use <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-cycle\" rel=\"nofollow\">the <code>cycle</code> method</a>:</p>\n\n<pre><code>objects.each_with_index do |object, index|\n  color = cycle('grey', 'white')\n  # etc.\nend\n</code></pre>\n\n<p>Following your comment, you could do the following:</p>\n\n<pre><code>objects.each_with_index do |object, index|\n  color = object.date.even? ? :grey : :white\n  # etc.\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 417, "user_id": 5507259, "user_type": "registered", "profile_image": "https://graph.facebook.com/888912451163823/picture?type=large", "display_name": "Roman Kovtunenko", "link": "https://stackoverflow.com/users/5507259/roman-kovtunenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1458146178, "creation_date": 1458146178, "answer_id": 36041687, "question_id": 36040960, "link": "https://stackoverflow.com/questions/36040960/styling-html-with-odd-even-colors/36041687#36041687", "title": "Styling HTML with odd/even colors", "body": "<p>I think the logic is fine, but you can refactor it to this:</p>\n\n<pre><code>objects.each_with_index do |object, index|\n  color = object[index-1].date == object.date\nend\n</code></pre>\n"}], "owner": {"reputation": 122, "user_id": 1492166, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f7caf04a05fda23c67ff8bdcd097d968?s=128&d=identicon&r=PG&f=1", "display_name": "Nurul Amin Shuvo", "link": "https://stackoverflow.com/users/1492166/nurul-amin-shuvo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1458150286, "creation_date": 1458144271, "last_edit_date": 1458150246, "question_id": 36040960, "link": "https://stackoverflow.com/questions/36040960/styling-html-with-odd-even-colors", "title": "Styling HTML with odd/even colors", "body": "<p>I have a HTML table which prints Active Record objects created on different dates, for\nexample: <code>day1,day1,day2,day2,day3</code>.</p>\n\n<p>I want to print every day in an alternate color, every <code>day1</code> in grey, every <code>day2</code> in white and every <code>day3</code> in grey again.</p>\n\n<p>The code I have written is:</p>\n\n<pre><code>color = true\n\nobjects.each_with_index do |object, index|\n  if object[index-1].date == object.date\n   color = true\n  else\n   color = false\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1458144785, "post_id": 36040690, "comment_id": 59731220, "body": "&quot;1 month&quot; and &quot;30 days&quot; is not the same. Adding 30 days to 2013-07-03 results in 2013-08-02, whereas adding 1 month results in 2013-08-03."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1458151520, "post_id": 36040690, "comment_id": 59735925, "body": "Welcome to SO. Please read <a href=\"http://catb.org/esr/faqs/smart-questions.html\" rel=\"nofollow noreferrer\">catb.org/esr/faqs/smart-questions.html</a>. It&#39;ll help you understand and use Stack Overflow. The more effort you put into researching and writing your question the better the answers will be."}, {"owner": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "edited": false, "score": 0, "creation_date": 1458155276, "post_id": 36040690, "comment_id": 59738170, "body": "Thank for you recommendation. I will  try  to write more relevant quastions"}], "answers": [{"comments": [{"owner": {"reputation": 417, "user_id": 5507259, "user_type": "registered", "profile_image": "https://graph.facebook.com/888912451163823/picture?type=large", "display_name": "Roman Kovtunenko", "link": "https://stackoverflow.com/users/5507259/roman-kovtunenko"}, "edited": false, "score": 0, "creation_date": 1458143886, "post_id": 36040783, "comment_id": 59730508, "body": "or if it&#39;s an activerecord object you can just call: subscription.expires_at + 1.month"}, {"owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "edited": false, "score": 0, "creation_date": 1458144043, "post_id": 36040783, "comment_id": 59730647, "body": "Similarly I think you can use DateTime advance method. eg. expires_at.advance(days: 30) <a href=\"http://apidock.com/rails/DateTime/advance\" rel=\"nofollow noreferrer\">documentation</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1458151774, "post_id": 36040783, "comment_id": 59736072, "body": "The link isn&#39;t applicable. The OP has a DateTime object and the linked page is talking about incrementing a Time object. They&#39;re not the same."}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 12, "last_activity_date": 1458152915, "last_edit_date": 1458152915, "creation_date": 1458143808, "answer_id": 36040783, "question_id": 36040690, "link": "https://stackoverflow.com/questions/36040690/how-to-add-1-month-to-a-datetime-variable/36040783#36040783", "title": "How to add 1 month to a DateTime variable?", "body": "<p>Try this:</p>\n\n<pre><code>=&gt; object.expires_at + 1.month\n=&gt; Sat, 03 Aug 2013 08:00:26 +0000\n</code></pre>\n"}], "owner": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4626, "favorite_count": 0, "accepted_answer_id": 36040783, "answer_count": 1, "score": 4, "last_activity_date": 1458152915, "creation_date": 1458143540, "last_edit_date": 1458151677, "question_id": 36040690, "link": "https://stackoverflow.com/questions/36040690/how-to-add-1-month-to-a-datetime-variable", "title": "How to add 1 month to a DateTime variable?", "body": "<p>I have a Subscription model. In my subscriptions table I have a DateTime column called <code>expires_at</code>. </p>\n\n<p>For example:</p>\n\n<pre><code>expires_at: \"2013-07-03 08:00:26\"\n</code></pre>\n\n<p>I need to add 30 days more. Which method do I need to use for this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails", "rails-i18n"], "comments": [{"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1458145504, "post_id": 36040661, "comment_id": 59731757, "body": "You&#39;ve not actually shown the failing spec - which may help"}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1458145644, "post_id": 36040661, "comment_id": 59731852, "body": "Also - try adding the one you think is causing the issue and the one that is failing to one rspec file, then just run that one file, you can then verify that it is that spec that is causing the issue - rather than running your whole suite"}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 2, "creation_date": 1458148297, "post_id": 36040661, "comment_id": 59733790, "body": "I&#39;d debug-print the current <code>I18n.locale</code> before each test (something like <code>before(:each) { puts I18n.locale }</code>, that way, you&#39;ll find the offending one. Also, I&#39;d use <code>after(:each) { I18n.locale = :en }</code> to reset the locale after each test. Both code snippets should go to <code>spec&#47;spec_helper.rb</code> or  <code>spec&#47;rails_helper.rb</code>."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 2, "creation_date": 1458338596, "post_id": 36040661, "comment_id": 59834333, "body": "I think you may be papering over the cracks here - what is to say that the default locale couldn&#39;t be changed by an equivalent sequence of requests in production?"}, {"owner": {"reputation": 10843, "user_id": 1439143, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/RxFne.png?s=128&g=1", "display_name": "Joshua Muheim", "link": "https://stackoverflow.com/users/1439143/joshua-muheim"}, "edited": false, "score": 0, "creation_date": 1458502032, "post_id": 36040661, "comment_id": 59877131, "body": "I don&#39;t understand what you mean, Frederick."}], "answers": [{"comments": [{"owner": {"reputation": 10843, "user_id": 1439143, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/RxFne.png?s=128&g=1", "display_name": "Joshua Muheim", "link": "https://stackoverflow.com/users/1439143/joshua-muheim"}, "edited": false, "score": 0, "creation_date": 1458206088, "post_id": 36049860, "comment_id": 59759232, "body": "Wow, did know about <code>git bisect</code> but not about <code>rspec --bisect</code>! Very good news. I found the problem and updated the question. Thank you!"}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 6, "last_activity_date": 1458176593, "creation_date": 1458176593, "answer_id": 36049860, "question_id": 36040661, "link": "https://stackoverflow.com/questions/36040661/specs-of-my-rails-app-fail-randomly-because-of-wrong-default-locale/36049860#36049860", "title": "Specs of my Rails app fail randomly because of wrong default locale", "body": "<p>Comment out the spec that you suspect and run <code>rspec --seed 51012</code>. If that passes, you know the culprit.</p>\n\n<p>If not, this looks like a job for <code>rspec --bisect</code>. Do</p>\n\n<pre><code>rspec --seed 51012 --bisect\n</code></pre>\n\n<p>and let RSpec find the minimal set of examples (probably 2) that reproduce the failure. You can then decide what to do about the culprit.</p>\n\n<p>This feature is available in RSpec 3.3 and better in RSpec 3.4. More here: <a href=\"https://relishapp.com/rspec/rspec-core/docs/command-line/bisect\" rel=\"noreferrer\">https://relishapp.com/rspec/rspec-core/docs/command-line/bisect</a></p>\n"}], "owner": {"reputation": 10843, "user_id": 1439143, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/RxFne.png?s=128&g=1", "display_name": "Joshua Muheim", "link": "https://stackoverflow.com/users/1439143/joshua-muheim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1586, "favorite_count": 0, "accepted_answer_id": 36049860, "answer_count": 1, "score": 11, "last_activity_date": 1458338051, "creation_date": 1458143484, "last_edit_date": 1458338051, "question_id": 36040661, "link": "https://stackoverflow.com/questions/36040661/specs-of-my-rails-app-fail-randomly-because-of-wrong-default-locale", "title": "Specs of my Rails app fail randomly because of wrong default locale", "body": "<p>From time to time, some specs of my Rails app seem to fail randomly because suddenly English is not the default language anymore, but German:</p>\n\n<pre><code>   expected: \"Project test customer - Project test name (Audit, Access for all, 2015-06-15).pdf\"\n        got: \"Project test customer - Project test name (Audit, Zugang f\u00fcr alle, 2015-06-15).pdf\"\n</code></pre>\n\n<p>As one can see, the part \"Access for all\" suddenly is \"Zugang f\u00fcr alle\". I googled for a solution and it seems that <a href=\"https://github.com/svenfuchs/i18n/issues/256\" rel=\"noreferrer\"><code>I18n.locale</code> is a global object, so when it's changed in a spec, it persists</a>.</p>\n\n<p>The problem doesn't always occur, but I can reproduce it when specifying a seed like this: <code>rspec --seed 51012</code>. So it really seems to be some issue with a spec being executed before (or after) some other spec.</p>\n\n<p>I have a feature spec which tests whether the locale can be changed, like this:</p>\n\n<pre><code>it 'offers contents in german' do\n  visit root_path(locale: :de)\n\n  expect(page).to have_content 'Willkommen'\nend\n</code></pre>\n\n<p>I suspect this could be the problematic spec, and when it's run early, it has impact on other specs.</p>\n\n<p>I hoped that I could solve it by setting the language in the spec back to the default like this:</p>\n\n<pre><code>it 'offers contents in german' do\n  visit root_path(locale: :de)\n\n  expect(page).to have_content 'Willkommen'\n\n  I18n.locale = :en\nend\n</code></pre>\n\n<p>Didn't work, also this one didn't:</p>\n\n<pre><code>it 'offers contents in german' do\n  visit root_path(locale: :de)\n\n  expect(page).to have_content 'Willkommen'\n  visit root_path(locale: :en)\nend\n</code></pre>\n\n<p>I'm a bit clueless now. How could I debug the situation, so I definitely find the source of the problem and fix it (or at least work around it)?</p>\n\n<p><strong>Update</strong></p>\n\n<p>Using Dave's answer (<code>rspec --bisect</code>) I found the problem.</p>\n\n<pre><code># application_controller_spec.rb\ndescribe ApplicationController do\n  controller(ApplicationController) do\n    def index\n      render text: 'Hello World'\n    end\n  end\n\n  describe 'locale parameter' do\n    it 'is set to english when not available in the request' do\n      get :index\n      expect(I18n.locale).to eq :en\n    end\n\n    it 'can be set through the request' do\n      get :index, locale: :de\n      expect(I18n.locale).to eq :de\n    end\n  end\nend\n</code></pre>\n\n<p>Depending on the order that these specs were run, the locale was set to <code>:de</code> or <code>:en</code> for following specs.</p>\n\n<p>I fixed it with BoraMa's suggested code snippet:</p>\n\n<pre><code>RSpec.configure do |config|\n  config.after(:each) { I18n.locale = :en }\nend\n</code></pre>\n\n<p>I'm still a bit astonished that RSpec/Rails don't do this on their own automatically...</p>\n"}, {"tags": ["ruby", "automated-tests", "chef-infra"], "comments": [{"owner": {"reputation": 2058, "user_id": 2674382, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2024eca8c18ce76760c35087a73911ce?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2674382/gillespie"}, "edited": false, "score": 0, "creation_date": 1458151396, "post_id": 36040145, "comment_id": 59735849, "body": "On reflection, I think I need to check the contents of the attributes files for blacklisted paths as the attributes aren&#39;t resolved."}], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 2, "last_activity_date": 1458154012, "creation_date": 1458154012, "answer_id": 36044432, "question_id": 36040145, "link": "https://stackoverflow.com/questions/36040145/chef-foodcritic-rule-not-catching-attribute-strings/36044432#36044432", "title": "Chef Foodcritic rule not catching attribute strings", "body": "<p>Yes, this isn't something you can fully handle via static analysis. Foodcritic and tools like it can only handle things that are static in the code, anything that could vary at runtime won't be known.</p>\n"}], "owner": {"reputation": 2058, "user_id": 2674382, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2024eca8c18ce76760c35087a73911ce?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2674382/gillespie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 36044432, "answer_count": 1, "score": 1, "last_activity_date": 1458154012, "creation_date": 1458142195, "last_edit_date": 1458143437, "question_id": 36040145, "link": "https://stackoverflow.com/questions/36040145/chef-foodcritic-rule-not-catching-attribute-strings", "title": "Chef Foodcritic rule not catching attribute strings", "body": "<p>I have written a foodcritic rule to catch any attempt to write to a blacklist of directories/files under the /etc directory. </p>\n\n<p>When blacklisted paths are passed to resource declarations as strings in a recipe, the rule triggers, however when they are passed as attributes, the rule does not trigger:</p>\n\n<pre><code>@resources = [\n'file',\n'template',\n'remote_file',\n'remote_directory',\n'directory'\n]\n\n@blacklist = [\n'/etc/ssh/',\n'/etc/init',\n...\n]\n\nrule 'RULE001', 'do not manipulate /etc other than init/,init.d/ &amp; default/' do\n  tags %w(security)\n  recipe do |ast|\n    violations = []\n    @resources.each do |resource_type|\n      violations &lt;&lt; find_resources(ast, type: resource_type).select do |resource|\n        res_str = (resource_attribute(resource, 'path' || resource_name(resource)).to_s\n        @blacklist.any? { |cmd| res_str.include? cmd }\n      end\n    end\n    violations.flatten\n  end\nend\n</code></pre>\n\n<p>Testing this using the below, the literal strings are caught, however when passed as attributes they are passed. Can anyone see what I'm missing?</p>\n\n<p>attributes/default.rb:</p>\n\n<pre><code>default['testbook']['etc-test'] = '/etc/ssh/test.conf'\ndefault['testbook']['etc-dir-test'] = 'etc/ssh/somedir/'\n</code></pre>\n\n<p>recipes/default.rb:</p>\n\n<pre><code>#template '/etc/ssh/test.conf' do &lt;-- caught\ntemplate node['testbook']['etc-test'] do #&lt;-- not caught\n  source 'test.conf'\n  owner 'nobody'\n  group 'nobody'\n  mode '0644'\n  action :create\nend\n\n#directory '/etc/ssh/somedir' do &lt;-- caught\ndirectory node['testbook']['etc-dir-test'] do &lt;-- not caught\n  action :create\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "activerecord-relation"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 2, "creation_date": 1458141765, "post_id": 36039827, "comment_id": 59728863, "body": "Try using <code>current_scope.to_a</code>"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1458141826, "post_id": 36039827, "comment_id": 59728905, "body": "What do you mean by &quot;grabbed&quot;?"}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1458141842, "post_id": 36039827, "comment_id": 59728923, "body": "@MrYoshiji Excellent!  Thank you.  Do provide an answer so that I can give you credit."}], "answers": [{"tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 5, "last_activity_date": 1458142979, "last_edit_date": 1458142979, "creation_date": 1458142141, "answer_id": 36040125, "question_id": 36039827, "link": "https://stackoverflow.com/questions/36039827/specify-currently-grabbed-records-within-model-class-method/36040125#36040125", "title": "Specify currently grabbed records within Model class method", "body": "<p>You can use <code>current_scope</code>:</p>\n\n<pre><code>def self.modify_those_records\n  current_scope.each do |user|\n    user.do_something!\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>If you want to order Users based on their admin rights, you would be better to use ActiveRecord:</p>\n\n<pre><code>scope :order_admins_first, order('CASE WHEN is_admin = true THEN 0 ELSE 1 END, id')\nUser.some_scope.order_admins_first\n</code></pre>\n\n<p>This code implies that you have a boolean column <code>is_admin</code> on the users table.</p>\n"}, {"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1458142518, "post_id": 36040226, "comment_id": 59729442, "body": "The current thing I&#39;m trying to do is this: If a group of users has an admin user: then pluck it out and then push it onto the front.  I&#39;m not sure if I can do that with an instance method.  I think I would need to do that with a class   method which changes the activerecord to an array, does that business and then returns the array (or converts it back to an active record relation again).  But I could be wrong."}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 1, "creation_date": 1458142688, "post_id": 36040226, "comment_id": 59729571, "body": "@Neil you can give users a sort field, 1 for admin, 0 for others and sort by descending of that, no need to fetch all records (as this may break pagination)"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1458147089, "post_id": 36040226, "comment_id": 59732889, "body": "@Neil: How do you identify admin users? Do they have a boolean flag?"}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1458148534, "post_id": 36040226, "comment_id": 59733967, "body": "@spickermann I was able to figure it out.  I just did a sort because as you guessed there is an admin boolean.  That way I didn&#39;t have to worry about modifying the activerecord object.  Thanks for your help!"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1458142404, "creation_date": 1458142404, "answer_id": 36040226, "question_id": 36039827, "link": "https://stackoverflow.com/questions/36039827/specify-currently-grabbed-records-within-model-class-method/36040226#36040226", "title": "Specify currently grabbed records within Model class method", "body": "<p>I would argue that a combination of a scope with <code>each</code> and an instance method is easier to understand than a class method. And as a bonus it is easier to test, because you can test all steps in isolation:</p>\n\n<p>Therefore instead of <code>User.some_scope.modify_those_records</code> I would do something like:</p>\n\n<pre><code>User.some_scope.each(&amp;:modify)\n</code></pre>\n\n<p>and implement a instance method:</p>\n\n<pre><code># in user.rb\ndef modify\n  # whatever needs to be done\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 1, "last_activity_date": 1458143032, "creation_date": 1458143032, "answer_id": 36040505, "question_id": 36039827, "link": "https://stackoverflow.com/questions/36039827/specify-currently-grabbed-records-within-model-class-method/36040505#36040505", "title": "Specify currently grabbed records within Model class method", "body": "<p>If you only want to modify the order of the records - better way is to add a sort field (if you do not have it already) to the model and sort by that.</p>\n\n<pre><code>User.some_scope.order(name: :asc).order(is_admin: :desc)\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 2, "accepted_answer_id": 36040125, "answer_count": 3, "score": 6, "last_activity_date": 1458143032, "creation_date": 1458141443, "last_edit_date": 1458142514, "question_id": 36039827, "link": "https://stackoverflow.com/questions/36039827/specify-currently-grabbed-records-within-model-class-method", "title": "Specify currently grabbed records within Model class method", "body": "<p>I have a class method where I want to modify the records that are currently grabbed by an <code>ActiveRecord::Relation</code> object.  But I don't know how to refer to the current scope in a class method.  <code>self</code> does not do it.</p>\n\n<p>Example:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  ...\n\n  def self.modify_those_records\n    #thought implicitly #to_a would be called on currently grabbed records but doesn't work\n    temp_users_to_a = to_a\n    ...\n  end\nend\n</code></pre>\n\n<p>I would use it like this:</p>\n\n<pre><code>User.some_scope.modify_those_records\n</code></pre>\n\n<p>So <code>User.some_scope</code> would return to me an <code>ActiveRecord::Relation</code> that contains a bunch of <code>User</code> records.  I then want to modify those records within that class method and then return them.</p>\n\n<p>Problem is: I don't know how to explicitly refer to \"that group of records\" within a class method. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "capybara", "capybara-webkit"], "answers": [{"tags": [], "owner": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "is_accepted": false, "score": 1, "last_activity_date": 1458142712, "creation_date": 1458142712, "answer_id": 36040360, "question_id": 36039766, "link": "https://stackoverflow.com/questions/36039766/capybara-failed-to-find-position-for-element/36040360#36040360", "title": "Capybara failed to find position for element", "body": "<p>I think I had this error exactly once in all my years and it was about an element being covered or otherwise not being clickable.</p>\n\n<p>A thorough investigation with your browser's webinspector is necessary here: You have to figure what your js does to that click target.</p>\n"}, {"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 1, "last_activity_date": 1458143065, "creation_date": 1458143065, "answer_id": 36040524, "question_id": 36039766, "link": "https://stackoverflow.com/questions/36039766/capybara-failed-to-find-position-for-element/36040524#36040524", "title": "Capybara failed to find position for element", "body": "<p>When using js:true your page not only runs JS but also has CSS processed. This means you can end up with elements that are are non-visible, overlapped, or moving.  You need to look at what is done to the element in a real browser and make sure the element is actually clickable, or what other actions a user would have to do first to make it clickable.  </p>\n\n<p>Secondly, don't use .eq with current_path - it'll lead to flaky tests as you use js capable drivers. Instead use the has_current_path matcher</p>\n\n<pre><code>expect(page).to have_current_path('/logged_days/new')\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 4512509, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Hq1gd.jpg?s=128&g=1", "display_name": "tetiross", "link": "https://stackoverflow.com/users/4512509/tetiross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1458143065, "creation_date": 1458141290, "question_id": 36039766, "link": "https://stackoverflow.com/questions/36039766/capybara-failed-to-find-position-for-element", "title": "Capybara failed to find position for element", "body": "<p>I'm using Capybara with a <code>webkit</code> driver and when I'm running tests with <code>js: true</code> it raises error listed below. When I do same things in other tests without <code>js: true</code> everything works fine. </p>\n\n<p>PS. There is no need for <code>js :true</code> in this test. This code is actually inside a helper but I put it here like test , so it will be easier to understand.I'm using <code>js: true</code> in the other test that invokes this helper method. </p>\n\n<p>Code below raises <code>Capybara::Webkit::ClickFailed:\n       Failed to find position for element /html/body/div/div/div/div[2]/a[12]</code> </p>\n\n<pre><code>scenario \"adding logged days\", js: true do\nvisit '/logged_days'\n\nfind(:xpath, \"//a[contains(.,'12')]\").click\n# click_link(\"12\") raises same error\n\nexpect(current_path).to eq(\"/logged_days/new\")\n\n\nfill_in \"\u041e\u043f\u0438\u0441 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043e\u0457 \u0440\u043e\u0431\u043e\u0442\u0438\", with: \"Some description\"\nfill_in \"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0432\u0456\u0434\u043f\u0440\u0430\u0446\u044c\u043e\u0432\u0430\u043d\u0438\u0445 \u0433\u043e\u0434\u0438\u043d\", with: 40\n\nclick_button \"\u0414\u043e\u0434\u0430\u0442\u0438\"\n\nexpect(current_path).to eq(\"/logged_days\")\nexpect(page).to have_content(\"40\")\n\nend\n</code></pre>\n\n<p>/logged_days: </p>\n\n<pre><code>   &lt;div class=\"page-header\"&gt;\n    &lt;h2&gt;Logged Days &lt;small&gt;March&lt;/small&gt;&lt;/h2&gt;\n   &lt;/div&gt;\n   &lt;div class=\"conteiner-fluid logged_days_container\"&gt;\n    &lt;% for i in 1..31 %&gt;\n     &lt;%= link_to new_logged_day_path(:cal_date =&gt; \"#{i}\"), method: :get do %&gt;\n      &lt;div class=\"calendar_cell\"&gt;\n        &lt;p class=\"cell_date\"&gt;&lt;%= i %&gt;&lt;/p&gt;\n        &lt;p class= \"cell_text\"&gt;&lt;/p&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n   &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "wercker"], "comments": [{"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1458141305, "post_id": 36039547, "comment_id": 59728498, "body": "In your gemfile write: <code>gem &#39;therubyracer&#39;</code> and run <code>bundle install</code>. It is written: <code>ExecJS::RuntimeUnavailable: Could not find a JavaScript runtime. See https:&#47;&#47;github.com&#47;rails&#47;execjs for a list of available runtimes.</code>"}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "reply_to_user": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1458141660, "post_id": 36039547, "comment_id": 59728774, "body": "There is no other way than adding a gem?"}, {"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 1, "creation_date": 1458141764, "post_id": 36039547, "comment_id": 59728862, "body": "Ruby on Rails requires javascript runtime. Why? This will answer: <a href=\"http://stackoverflow.com/questions/9673081/why-does-rails-require-javascript-runtime\" title=\"why does rails require javascript runtime\">stackoverflow.com/questions/9673081/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "is_accepted": true, "score": 2, "last_activity_date": 1458157681, "creation_date": 1458157681, "answer_id": 36045600, "question_id": 36039547, "link": "https://stackoverflow.com/questions/36039547/there-was-an-error-while-trying-to-load-the-gem-uglifier-wercker/36045600#36045600", "title": "There was an error while trying to load the gem &#39;uglifier&#39;. - Wercker", "body": "<p>As the comments on the question suggest, you need to install a javascript runtime. </p>\n\n<p>You have a few options:</p>\n\n<ol>\n<li>add <code>gem 'therubyracer'</code> to your Gemfile.</li>\n<li>Install nodejs via apt-get, brew, etc.</li>\n</ol>\n\n<p>I'd go for option 2 as to not unnecessarily add gems to your project.</p>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2479, "favorite_count": 0, "accepted_answer_id": 36045600, "answer_count": 1, "score": 3, "last_activity_date": 1458157681, "creation_date": 1458140782, "question_id": 36039547, "link": "https://stackoverflow.com/questions/36039547/there-was-an-error-while-trying-to-load-the-gem-uglifier-wercker", "title": "There was an error while trying to load the gem &#39;uglifier&#39;. - Wercker", "body": "<p>I have a problem configuring my app to user wercker. My wercker.yml looks like this:</p>\n\n<pre><code>box: ruby\nservices:\n  - postgres\nbuild:\n    steps:\n        - script:\n            name: Nokogiri fix\n            code: bundle config build.nokogiri --use-system-libraries\n        - bundle-install\n        - rails-database-yml\n        - script:\n            name: Set up db\n            code: bundle exec rake db:schema:load RAILS_ENV=test\n        - script:\n            name: rspec\n            code: bundle exec rspec\n</code></pre>\n\n<p>When I run build it fails with the following error:</p>\n\n<pre><code>rake aborted!\nBundler::GemRequireError: There was an error while trying to load the gem 'uglifier'.\n/pipeline/source/config/application.rb:7:in `&lt;top (required)&gt;'\n/pipeline/source/Rakefile:4:in `require'\n/pipeline/source/Rakefile:4:in `&lt;top (required)&gt;'\nExecJS::RuntimeUnavailable: Could not find a JavaScript runtime. See https://github.com/rails/execjs for a list of available runtimes.\n/pipeline/cache/bundle-install/ruby/2.3.0/gems/execjs-2.6.0/lib/execjs/runtimes.rb:48:in `autodetect'\n/pipeline/cache/bundle-install/ruby/2.3.0/gems/execjs-2.6.0/lib/execjs.rb:5:in `&lt;module:ExecJS&gt;'\n/pipeline/cache/bundle-install/ruby/2.3.0/gems/execjs-2.6.0/lib/execjs.rb:4:in `&lt;top (required)&gt;'\n/pipeline/cache/bundle-install/ruby/2.3.0/gems/uglifier-2.7.2/lib/uglifier.rb:3:in `require'\n/pipeline/cache/bundle-install/ruby/2.3.0/gems/uglifier-2.7.2/lib/uglifier.rb:3:in `&lt;top (required)&gt;'\n/pipeline/source/config/application.rb:7:in `&lt;top (required)&gt;'\n/pipeline/source/Rakefile:4:in `require'\n/pipeline/source/Rakefile:4:in `&lt;top (required)&gt;'\n(See full trace by running task with --trace\n</code></pre>\n\n<p>I think that I need to install nodejs on wercker but the question is how can I do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 2, "creation_date": 1458140687, "post_id": 36039432, "comment_id": 59728010, "body": "Welcome to SO! Unfortunately I cannot parse your question. :( Could you give more details on how this code behaves differently then you would expect?"}, {"owner": {"reputation": 3765, "user_id": 843443, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/07748ad3a158dfc6aee92c9bbac06b90?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/843443/jeff"}, "edited": false, "score": 0, "creation_date": 1458140872, "post_id": 36039432, "comment_id": 59728160, "body": "What is the error?"}, {"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1458140983, "post_id": 36039432, "comment_id": 59728242, "body": "I guess you need 3 rows and 7 columns right? If so then you will need two loops. Or please clear it more so we can help."}, {"owner": {"reputation": 11, "user_id": 6057892, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vbdb2Jx9pjo/AAAAAAAAAAI/AAAAAAAAGbY/AAaaflKa5DE/photo.jpg?sz=128", "display_name": "Alex Hendershott", "link": "https://stackoverflow.com/users/6057892/alex-hendershott"}, "edited": false, "score": 0, "creation_date": 1458141049, "post_id": 36039432, "comment_id": 59728287, "body": "Sorry! Of course.  I am trying to get a random Idea, via it&#39;s id, and then assign a round_id to that id with options 1, 2, or 3. If I am inside rails console, an idea starts with round_id = nil. When I type out each line, I get 1 random idea, 1 random round_id, and that random idea gets assigned the random round_id. If however, I paste the whole block, with the 7.times do, all I get back is &quot;7&quot;. What I expected, was at least 7 attempts of getting random ideas with random round_ids. Does that make sense?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1458141161, "post_id": 36039432, "comment_id": 59728386, "body": "Your code does put a random <code>roundid</code> to a random <code>Idea</code> 7 times, but the block returns 7. Stock the <code>@idea</code> in a array and return it to see the results"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1458141499, "post_id": 36039432, "comment_id": 59728648, "body": "Also this assumes that all the ids will be between 1 and Idea.count which means no deletions of any ideas otherwise there will be ideas outside this range. As we all know some ideas are bad ideas and should be deleted. :)"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6057892, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vbdb2Jx9pjo/AAAAAAAAAAI/AAAAAAAAGbY/AAaaflKa5DE/photo.jpg?sz=128", "display_name": "Alex Hendershott", "link": "https://stackoverflow.com/users/6057892/alex-hendershott"}, "edited": false, "score": 0, "creation_date": 1458141637, "post_id": 36039761, "comment_id": 59728750, "body": "Thank you! This is exactly what I was trying to do. I wish I could have come to this conclusion before posting, but I obviously have a ton more learning to do."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1458145441, "post_id": 36039761, "comment_id": 59731704, "body": "Note that <code>Idea.all.sample</code> fetches <i>all</i> <code>Idea</code>s from the database. This might become expensive."}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 1, "creation_date": 1458150132, "post_id": 36039761, "comment_id": 59735073, "body": "This should be much  better =&gt; <code>rand(1..3)</code>"}], "tags": [], "owner": {"reputation": 707, "user_id": 3583511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xB5JH.jpg?s=128&g=1", "display_name": "Jake Shorty", "link": "https://stackoverflow.com/users/3583511/jake-shorty"}, "is_accepted": true, "score": 0, "last_activity_date": 1458151877, "last_edit_date": 1458151877, "creation_date": 1458141275, "answer_id": 36039761, "question_id": 36039432, "link": "https://stackoverflow.com/questions/36039432/what-is-the-correct-way-to-loop-through-this-block/36039761#36039761", "title": "What is the correct way to loop through this block?", "body": "<p>If you're just trying to randomly grab an <code>Idea</code> each time, you can use the more expressive <code>Idea.all.sample</code>.</p>\n\n<p>To grab a random number, you also don't necessarily need Faker, you can just do <code>rand(3) + 1</code>.</p>\n\n<p>If <code>round_id</code> is a column in the <code>ideas</code> table, you'll need to actually save the model on each iteration for the changes you're making to persist.</p>\n\n<p>One faster way you could do this is:</p>\n\n<pre><code>Idea.all.sample(7).each do |idea|\n   idea.update(round_id: rand(3) + 1)\nend\n</code></pre>\n\n<p>This grabs 7 random <code>Ideas</code>, iterates over them, and assigns each a random round_id between 1 and 3.</p>\n"}], "owner": {"reputation": 11, "user_id": 6057892, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vbdb2Jx9pjo/AAAAAAAAAAI/AAAAAAAAGbY/AAaaflKa5DE/photo.jpg?sz=128", "display_name": "Alex Hendershott", "link": "https://stackoverflow.com/users/6057892/alex-hendershott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 36039761, "answer_count": 1, "score": -1, "last_activity_date": 1458153186, "creation_date": 1458140559, "last_edit_date": 1458153186, "question_id": 36039432, "link": "https://stackoverflow.com/questions/36039432/what-is-the-correct-way-to-loop-through-this-block", "title": "What is the correct way to loop through this block?", "body": "<p>I have this block inside rails console. </p>\n\n<pre><code>@idea = Idea.find_by(rand(1...Idea.count))\n@roundid = Faker::Number.between(1, 3)\n@idea.round_id = @roundid\n</code></pre>\n\n<p>I am trying trying to update seven database rows. And I have used a code below.</p>\n\n<pre><code>7.times do\n @idea = Idea.find_by(rand(1...Idea.count))\n @roundid = Faker::Number.between(1, 3)\n @idea.round_id = @roundid\nend\n</code></pre>\n\n<p>it does not do what I expect. Thoughts?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1458147211, "post_id": 36039287, "comment_id": 59732996, "body": "What do you mean by <i>&quot;while iterating&quot;</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 1, "creation_date": 1458142866, "post_id": 36039637, "comment_id": 59729714, "body": "This is so elegant. <code>fill</code> -- as if there&#39;s basically a method for everything in Ruby."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1458146095, "post_id": 36039637, "comment_id": 59732132, "body": "It looks elegant, but it does something else. <code>fill</code> passes the element&#39;s <i>index</i> to the block, not the element itself."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1458148514, "post_id": 36039637, "comment_id": 59733948, "body": "@Stefan  Thanks for pointing out the mistake.  Have updated the answer"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 8, "last_activity_date": 1458148483, "last_edit_date": 1458148483, "creation_date": 1458141004, "answer_id": 36039637, "question_id": 36039287, "link": "https://stackoverflow.com/questions/36039287/how-to-change-the-element-part-of-an-array-while-iterating/36039637#36039637", "title": "How to change the element part of an array while iterating", "body": "<p>Here is a way to do this:</p>\n\n<pre><code>xs.fill(5..-1) { |i| xs[i].odd? }\n#=&gt; 0 1 2 3 4 true false true false true\n</code></pre>\n"}], "owner": {"reputation": 3633, "user_id": 675154, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/23da6806cab4830b5d1b15ef2a410541?s=128&d=identicon&r=PG", "display_name": "delta", "link": "https://stackoverflow.com/users/675154/delta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 36039637, "answer_count": 1, "score": 1, "last_activity_date": 1458148483, "creation_date": 1458140240, "last_edit_date": 1458142047, "question_id": 36039287, "link": "https://stackoverflow.com/questions/36039287/how-to-change-the-element-part-of-an-array-while-iterating", "title": "How to change the element part of an array while iterating", "body": "<p>An array <code>xs</code> consists of numbers from 0 to 9:</p>\n\n<pre><code>xs = [*0..9]\n</code></pre>\n\n<p>Test parity, and store result in place:</p>\n\n<pre><code>xs.map!(&amp;:odd?)\nputs xs.join(\" \") \n# =&gt; false, true, ..., true\n</code></pre>\n\n<p><code>xs</code> changed as expected. But I just want to change a part of the array</p>\n\n<pre><code>xs[5..-1].map!(&amp;:odd?)\nputs xs.join(\" \")\n# =&gt; 0 1 2 3 4 5 6 7 8 9\n</code></pre>\n\n<p>I guess the <code>slice</code> operation returns a copy. Or some other reasons.</p>\n\n<p><code>xs[...] = xs[...].some_operation</code> is a solution, but is there any way to do this without assignment?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "strptime"], "answers": [{"tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": true, "score": 5, "last_activity_date": 1458152243, "last_edit_date": 1458152243, "creation_date": 1458140440, "answer_id": 36039373, "question_id": 36039077, "link": "https://stackoverflow.com/questions/36039077/how-to-use-strptime-to-convert-timestamp-string-with-milliseconds-to-time-object/36039373#36039373", "title": "How to use strptime to convert timestamp string with milliseconds to time object", "body": "<p>Try <code>%L</code>.</p>\n\n<p>Refer to Ruby's <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html\" rel=\"nofollow\">DateTime</a> documentation.</p>\n"}, {"tags": [], "owner": {"reputation": 434, "user_id": 4682789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBdW9.png?s=128&g=1", "display_name": "AllenMoh", "link": "https://stackoverflow.com/users/4682789/allenmoh"}, "is_accepted": false, "score": 1, "last_activity_date": 1458152290, "last_edit_date": 1458152290, "creation_date": 1458140458, "answer_id": 36039379, "question_id": 36039077, "link": "https://stackoverflow.com/questions/36039077/how-to-use-strptime-to-convert-timestamp-string-with-milliseconds-to-time-object/36039379#36039379", "title": "How to use strptime to convert timestamp string with milliseconds to time object", "body": "<p>If you can update to Ruby 1.9.3, it supports this using <code>%3N</code>:</p>\n\n<p><a href=\"http://ruby-doc.org/core-1.9.3/Time.html#method-i-strftime\" rel=\"nofollow\">http://ruby-doc.org/core-1.9.3/Time.html#method-i-strftime</a></p>\n"}], "owner": {"reputation": 1232, "user_id": 5859203, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10207514017080224/picture?type=large", "display_name": "TamRock", "link": "https://stackoverflow.com/users/5859203/tamrock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1788, "favorite_count": 0, "accepted_answer_id": 36039373, "answer_count": 2, "score": 1, "last_activity_date": 1458152290, "creation_date": 1458139717, "last_edit_date": 1458152177, "question_id": 36039077, "link": "https://stackoverflow.com/questions/36039077/how-to-use-strptime-to-convert-timestamp-string-with-milliseconds-to-time-object", "title": "How to use strptime to convert timestamp string with milliseconds to time object", "body": "<p>I need to use <code>strptime</code> to convert a timestamp string with milliseconds to a Time object.</p>\n\n<p>A work around is using <code>parse</code>:</p>\n\n<pre><code>t= Time.parse('29 Sep 2013 12:25:00.367')\n=&gt; 2013-09-29 12:25:00 -0400\n</code></pre>\n\n<p>But it is very important for my code to use <code>strptime</code>, because I want to be able to pass multiple types of format including: \"HH:MM\", \"HH\", etc. through the function.</p>\n\n<p>I can do it with nanoseconds like this:</p>\n\n<pre><code>Time.strptime(\"12:34:56:789434\", \"%H:%M:%S:%N\")\n=&gt; 2016-03-16 12:34:56 +0100\n</code></pre>\n\n<p>I want something like this:</p>\n\n<pre><code>Time.strptime(\"12:34:56:789\", \"%H:%M:%S:%[insert magic letter that represent milliseconds]\")\n</code></pre>\n\n<p>My thought is that there must be a way to do it with milliseconds as well.</p>\n\n<p>Is it possible and how?</p>\n"}, {"tags": ["ruby", "cron", "whenever"], "comments": [{"owner": {"reputation": 2051, "user_id": 3626537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1499840559/picture?type=large", "display_name": "Phrancis", "link": "https://stackoverflow.com/users/3626537/phrancis"}, "edited": false, "score": 4, "creation_date": 1458140560, "post_id": 36039336, "comment_id": 59727910, "body": "Your question did not fit very well within the framework of Code Review in its current form, as you are asking a specific programming question, rather than a general review of your code. See <a href=\"http://codereview.stackexchange.com/help/how-to-ask\">this</a> for reference. We elected to migrate it to Stack Overflow for this reason."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 1997419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fbe2a0bc6a88efc7a3b51882a19fd8b?s=128&d=identicon&r=PG", "display_name": "Ragnarokk", "link": "https://stackoverflow.com/users/1997419/ragnarokk"}, "is_accepted": true, "score": 3, "last_activity_date": 1458141017, "creation_date": 1458141017, "answer_id": 36039640, "question_id": 36039336, "link": "https://stackoverflow.com/questions/36039336/how-to-use-whenever-gem-to-run-a-task-at-2-am-and-2-pm/36039640#36039640", "title": "How to use whenever gem to run a task at 2 am AND 2 pm?", "body": "<p>According to test in whenever repository you should be able to pass Array</p>\n\n<pre><code>every \"weekday\", :at =&gt; %w(5:02am 3:52pm) do\n</code></pre>\n\n<p>Here is the source> <a href=\"https://github.com/javan/whenever/blob/334cfa01f373006cc032e23907b1777a8ea3f3b0/test/functional/output_at_test.rb\" rel=\"nofollow\">https://github.com/javan/whenever/blob/334cfa01f373006cc032e23907b1777a8ea3f3b0/test/functional/output_at_test.rb</a></p>\n\n<p>So in you case it should be ok to do like </p>\n\n<pre><code>every 1.day, at: ['2am','2pm'] do\n  rake 'data:load_direct_monitoring_statistics'\nend if @environment == 'production'\n</code></pre>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["MathJax", "Prettify"], "launch_date": 1436881020, "open_beta_date": 1296068400, "closed_beta_date": 1295463600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/codereview/Img/apple-touch-icon@2.png", "twitter_account": "StackCodeReview", "favicon_url": "https://cdn.sstatic.net/Sites/codereview/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/codereview/Img/apple-touch-icon.png", "audience": "peer programmer code reviews", "site_url": "https://codereview.stackexchange.com", "api_site_parameter": "codereview", "logo_url": "https://cdn.sstatic.net/Sites/codereview/Img/logo.png", "name": "Code Review", "site_type": "main_site"}, "on_date": 1458140338, "question_id": 123007}, "owner": {"reputation": 10796, "user_id": 1105249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/083d54b8327a76a1dcf57df507ab7b34?s=128&d=identicon&r=PG", "display_name": "Luis Masuelli", "link": "https://stackoverflow.com/users/1105249/luis-masuelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 36039640, "answer_count": 1, "score": 5, "last_activity_date": 1458141017, "creation_date": 1458139645, "last_edit_date": 1458140629, "question_id": 36039336, "link": "https://stackoverflow.com/questions/36039336/how-to-use-whenever-gem-to-run-a-task-at-2-am-and-2-pm", "title": "How to use whenever gem to run a task at 2 am AND 2 pm?", "body": "<p>Currently I run this code:</p>\n\n<pre><code>every 1.day, at: '2am' do\n  rake 'data:load_direct_monitoring_statistics'\nend if @environment == 'production'\nevery 1.day, at: '2pm' do\n  rake 'data:load_direct_monitoring_statistics'\nend if @environment == 'production'\n</code></pre>\n\n<p>This code works as intended, but: is there a way to use just <strong>one</strong> cron declaration to cover both cases?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "rest", "backend"], "answers": [{"comments": [{"owner": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1458143875, "post_id": 36040585, "comment_id": 59730497, "body": "Thank you ! For your answer :) And how it works with refresh token ? Because I want if the token is expired the user received a new one ? So I want to create 2 tokens one auth token and one refresh token. The refresh token is needed to get a new token ?:/"}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "reply_to_user": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1458145080, "post_id": 36040585, "comment_id": 59731441, "body": "You can refresh the token however you like - if you want a second token the user has to exchange, build it."}, {"owner": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1458145164, "post_id": 36040585, "comment_id": 59731495, "body": "Thank you okay it&#39;s from secure perspective better to hide the token when to render it ?"}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "reply_to_user": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1458148445, "post_id": 36040585, "comment_id": 59733884, "body": "Who are you trying to hide it from? There&#39;s nowhere you can put it that the user can&#39;t access with the right effort. Just make sure you&#39;re using HTTPS so no one else can see it in transit, and keep it out of the URL if you don&#39;t want a naive user copy/pasting it."}, {"owner": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1458153734, "post_id": 36040585, "comment_id": 59737291, "body": "Yes of course but with an man in the middle attack is possible"}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "reply_to_user": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1458155620, "post_id": 36040585, "comment_id": 59738366, "body": "If you&#39;re getting MITMd, you already have far larger problems."}, {"owner": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1458156525, "post_id": 36040585, "comment_id": 59738900, "body": "So you mean I have to use certificate pinning ?"}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "reply_to_user": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1458157830, "post_id": 36040585, "comment_id": 59739743, "body": "It sounds like you&#39;re struggling trying to find direction. Do some reading to figure out what you want or need, then come back to SO with another specific question when you encounter a problem."}], "tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 5, "last_activity_date": 1458143279, "creation_date": 1458143279, "answer_id": 36040585, "question_id": 36038690, "link": "https://stackoverflow.com/questions/36038690/rails-api-expiration-for-user-auth-token/36040585#36040585", "title": "Rails API expiration for user auth token", "body": "<p>When you generate the token, save the time you'd like it to expire:</p>\n\n<pre><code>class User\n  field :auth_token, type: String\n  field :token_expiry, type: Time\n\n  def set_auth_token\n    return if auth_token.present? &amp;&amp; token_expiry &gt; Time.now\n    self.auth_token = generate_auth_token\n    self.token_expiry = Time.now + 1.day\n  end\n</code></pre>\n\n<p>Then when you check the token, check the expiry too:</p>\n\n<pre><code>def authenticate_token\n  authenticate_or_request_with_http_token do |token, options|\n    user = User.where(auth_token: token).first\n    user if user.token_expiry &gt; Time.now\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2629, "favorite_count": 1, "accepted_answer_id": 36040585, "answer_count": 1, "score": 0, "last_activity_date": 1459240026, "creation_date": 1458138767, "last_edit_date": 1459240026, "question_id": 36038690, "link": "https://stackoverflow.com/questions/36038690/rails-api-expiration-for-user-auth-token", "title": "Rails API expiration for user auth token", "body": "<p>I build an Rest API with rails. And I want to implement an expiration for the token. How does it works ?\nI don't to implement devise because I don't need that really.\nI just want when I create an user he received an token a refresh token.\nSo it's not really oauth because there are not 3rd party using the api.</p>\n\n<pre><code>This is my user model.\n    require 'securerandom'\n      class User\n      field :auth_token, type: String\n      field :name, type: String\n      field :phone, type: String\n      field :image, type: String\n\n      #Generate URLS for different image sizes...\n       def as_json(options)\n        json = super\n        self.image.styles.each do | format |\n          json = json.merge({\"image_\"+format[0].to_s =&gt; self.image(format[0])})\n        end\n        json\n      end\n\n      private\n        def set_auth_token\n          return if auth_token.present?\n          self.auth_token = generate_auth_token\n        end\n\n        def generate_auth_token\n          SecureRandom.hex(90)  \n        end\n\n      end\n</code></pre>\n\n<p>So simple auth with a simple generated token works. But I think with an expiration token is more secure. Of course the connection is over SSL.</p>\n\n<pre><code>class ApplicationController &lt; ActionController::API\n  include ActionController::HttpAuthentication::Token::ControllerMethods\n\n    def current_user\n        @current_user = User.find(params[:user_id])\n    end\n\n\nprotected\n\n    def authenticate\n      authenticate_token || authentication_request\n    end\n\n\n    def authenticate_token\n      authenticate_or_request_with_http_token do |token, options|\n      User.where(auth_token: token).first\n      end\n    end\n\n    def authentication_request(controller, realm)\n      controller.headers[\"WWW-Authenticate\"] = %(Token realm=\"#{realm.gsub(/\"/, \"\")}\")\n      controller.__send__ :render, :text =&gt; \"HTTP Token: Access denied.\\n\", :status =&gt; :unauthorized\n    end\n\n    def request_http_token_authentication(realm = \"Application\")\n      self.headers[\"WWW-Authenticate\"] = %(Token realm=\"#{realm.gsub(/\"/, \"\")}\")\n      render :json =&gt; {:error =&gt; \"HTTP Token: Access denied.\"}, :status =&gt; :unauthorized\n    end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1458138906, "post_id": 36038646, "comment_id": 59726594, "body": "IMHO the best way to solve this is to automatically add <code>http:&#47;&#47;</code> when the user doesn&#39;t give it and then store that in the DB. What if the user adds <code>https:&#47;&#47;example.com</code>? (note the <code>https</code>, and not <code>http</code> here)?"}, {"owner": {"reputation": 627, "user_id": 2948393, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3c738429ba82751bc12cce654639aa96?s=128&d=identicon&r=PG&f=1", "display_name": "rs19", "link": "https://stackoverflow.com/users/2948393/rs19"}, "reply_to_user": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1458138987, "post_id": 36038646, "comment_id": 59726659, "body": "@Carpetsmoker ok i&#39;m open to that. how would i do that?"}, {"owner": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1458139161, "post_id": 36038646, "comment_id": 59726795, "body": "You should also post the code that removes the <code>http:&#47;&#47;</code> part, perhaps you made an error in the code?"}, {"owner": {"reputation": 627, "user_id": 2948393, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3c738429ba82751bc12cce654639aa96?s=128&d=identicon&r=PG&f=1", "display_name": "rs19", "link": "https://stackoverflow.com/users/2948393/rs19"}, "reply_to_user": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1458139191, "post_id": 36038646, "comment_id": 59726821, "body": "@Carpetsmoker i actually don&#39;t have that code. right now it just takes the link as it."}, {"owner": {"reputation": 655, "user_id": 5715918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2aca8bacf3913e5001a83bf96eb28?s=128&d=identicon&r=PG&f=1", "display_name": "rohin-arka", "link": "https://stackoverflow.com/users/5715918/rohin-arka"}, "edited": false, "score": 0, "creation_date": 1458139402, "post_id": 36038646, "comment_id": 59726978, "body": "<code>&quot;http:&#47;&#47;http:&#47;&#47;apple.com&quot;.split(&quot;&#47;&#47;&quot;).uniq.join(&quot;&#47;&#47;&quot;)</code> If there is <code>http</code> in @user.portfolio it sets only one http and if there is not http://  then add only one http:// prefix."}, {"owner": {"reputation": 627, "user_id": 2948393, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3c738429ba82751bc12cce654639aa96?s=128&d=identicon&r=PG&f=1", "display_name": "rs19", "link": "https://stackoverflow.com/users/2948393/rs19"}, "reply_to_user": {"reputation": 655, "user_id": 5715918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2aca8bacf3913e5001a83bf96eb28?s=128&d=identicon&r=PG&f=1", "display_name": "rohin-arka", "link": "https://stackoverflow.com/users/5715918/rohin-arka"}, "edited": false, "score": 0, "creation_date": 1458139579, "post_id": 36038646, "comment_id": 59727118, "body": "@Shadow awesome. so would it be <code>{@user.portfolio}.split(&quot;&#47;&#47;&quot;).uniq.join(&quot;&#47;&#47;&quot;)</code> ?"}, {"owner": {"reputation": 655, "user_id": 5715918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2aca8bacf3913e5001a83bf96eb28?s=128&d=identicon&r=PG&f=1", "display_name": "rohin-arka", "link": "https://stackoverflow.com/users/5715918/rohin-arka"}, "edited": false, "score": 0, "creation_date": 1458139721, "post_id": 36038646, "comment_id": 59727235, "body": "@rs19 Yes Correct but if <code>@user.portfolio</code> do not contain http://  then u have to think buddy"}], "answers": [{"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1458140183, "post_id": 36039013, "comment_id": 59727614, "body": "Is it same to assume that the portfolio page always supports the same protocol then the parent page?"}], "tags": [], "owner": {"reputation": 2470, "user_id": 1013142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd97eb9f014330c6063dfadb77bbd5de?s=128&d=identicon&r=PG", "display_name": "Sudipta Mondal", "link": "https://stackoverflow.com/users/1013142/sudipta-mondal"}, "is_accepted": false, "score": 0, "last_activity_date": 1458139598, "creation_date": 1458139598, "answer_id": 36039013, "question_id": 36038646, "link": "https://stackoverflow.com/questions/36038646/string-interpolation-to-external-link-without-http/36039013#36039013", "title": "string interpolation to external link without http://", "body": "<p>Maybe you can put this sample code in a helper and get what you need</p>\n\n<pre><code>    def link_helper link\n\n        if link[0..3] == \"http\" or link[0..4] == \"https\"\n            link\n        else\n            \"//#{link}\"\n        end\n    end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 528, "user_id": 1815811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OdnDK.jpg?s=128&g=1", "display_name": "vitas", "link": "https://stackoverflow.com/users/1815811/vitas"}, "is_accepted": false, "score": 0, "last_activity_date": 1458139608, "creation_date": 1458139608, "answer_id": 36039019, "question_id": 36038646, "link": "https://stackoverflow.com/questions/36038646/string-interpolation-to-external-link-without-http/36039019#36039019", "title": "string interpolation to external link without http://", "body": "<p>Strip <code>http://</code> from begining:</p>\n\n<pre><code>&lt;%= link_to truncate(@user.portfolio_title, :length =&gt; 17), \n\"http://#{@user.portfolio.sub(%r!^http://!i, '')}\", :target =&gt; \"_blank\"  %&gt; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 627, "user_id": 2948393, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3c738429ba82751bc12cce654639aa96?s=128&d=identicon&r=PG&f=1", "display_name": "rs19", "link": "https://stackoverflow.com/users/2948393/rs19"}, "edited": false, "score": 0, "creation_date": 1458139832, "post_id": 36039089, "comment_id": 59727324, "body": "awesome thanks. do i need to re migrate after implementing this or anything?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 627, "user_id": 2948393, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3c738429ba82751bc12cce654639aa96?s=128&d=identicon&r=PG&f=1", "display_name": "rs19", "link": "https://stackoverflow.com/users/2948393/rs19"}, "edited": false, "score": 1, "creation_date": 1458139953, "post_id": 36039089, "comment_id": 59727430, "body": "Sanitize existing records by running: <code>User.find_each { |u| u.update(portfolio: u.portfolio) }</code> in your Rails console."}, {"owner": {"reputation": 627, "user_id": 2948393, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3c738429ba82751bc12cce654639aa96?s=128&d=identicon&r=PG&f=1", "display_name": "rs19", "link": "https://stackoverflow.com/users/2948393/rs19"}, "edited": false, "score": 0, "creation_date": 1458140225, "post_id": 36039089, "comment_id": 59727651, "body": "ok awesome. so everything works except it doesn&#39;t open in the link in a new window."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 627, "user_id": 2948393, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3c738429ba82751bc12cce654639aa96?s=128&d=identicon&r=PG&f=1", "display_name": "rs19", "link": "https://stackoverflow.com/users/2948393/rs19"}, "edited": false, "score": 0, "creation_date": 1458140427, "post_id": 36039089, "comment_id": 59727807, "body": "@rs19: Sorry, you should use both (<code>target</code> and <code>rel</code>). I updated my answer."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1458140373, "last_edit_date": 1458140373, "creation_date": 1458139751, "answer_id": 36039089, "question_id": 36038646, "link": "https://stackoverflow.com/questions/36038646/string-interpolation-to-external-link-without-http/36039089#36039089", "title": "string interpolation to external link without http://", "body": "<p>I prefer to sanitize user input once (when the user inputs that data) and not every time the data is rendered. To do so, add the following to your model:</p>\n\n<pre><code># in app/models/user.rb\ndef portfolio=(url)\n  if url.present?\n    url = url.match(/https?:\\/\\//) ? url : \"http://#{url}\"\n    write_attribute(:portfolio, url)\n  end\nend\n</code></pre>\n\n<p>Then use it in your view like this:</p>\n\n<pre><code>&lt;%= link_to truncate(@user.portfolio_title, length: 17), \n            @user.portfolio, rel: 'noopener', target: '_blank' %&gt; \n</code></pre>\n\n<p>Note: For <a href=\"https://mathiasbynens.github.io/rel-noopener/\" rel=\"nofollow\">security reasons</a> you may want to use <code>target: '_blank'</code> always together with <code>rel: 'noopener'</code>.</p>\n"}], "owner": {"reputation": 627, "user_id": 2948393, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3c738429ba82751bc12cce654639aa96?s=128&d=identicon&r=PG&f=1", "display_name": "rs19", "link": "https://stackoverflow.com/users/2948393/rs19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 0, "accepted_answer_id": 36039089, "answer_count": 3, "score": 1, "last_activity_date": 1458140373, "creation_date": 1458138654, "last_edit_date": 1458138842, "question_id": 36038646, "link": "https://stackoverflow.com/questions/36038646/string-interpolation-to-external-link-without-http", "title": "string interpolation to external link without http://", "body": "<p>I'm using string interpolation to allow a user to put in a website on their profile and then link to it externally as follows. </p>\n\n<pre><code>&lt;%= link_to truncate(@user.portfolio_title, :length =&gt; 17), \n\"http://#{@user.portfolio}\", :target =&gt; \"_blank\"  %&gt; \n</code></pre>\n\n<p>But when a user puts in a link with \"Http://\" it ends up spitting out \"<a href=\"http://http://apple.com\" rel=\"nofollow\">http://http://apple.com</a>\". </p>\n\n<p>But if I delete the http:// from the interpolation it won't turn into an external link. It basically appends the full link to my existing host URL. </p>\n\n<p>How would I fix this? </p>\n"}, {"tags": ["ruby", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6071745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0458caddd88228ce048c7998501b28c?s=128&d=identicon&r=PG&f=1", "display_name": "stim", "link": "https://stackoverflow.com/users/6071745/stim"}, "edited": false, "score": 0, "creation_date": 1458137246, "post_id": 36037369, "comment_id": 59725270, "body": "Thank you - yes this works, and without the need for pp."}], "tags": [], "owner": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "is_accepted": false, "score": 0, "last_activity_date": 1458135633, "creation_date": 1458135633, "answer_id": 36037369, "question_id": 36036870, "link": "https://stackoverflow.com/questions/36036870/escaping-a-period-in-tag-name-using-nokogiri/36037369#36037369", "title": "Escaping a period in tag name using Nokogiri", "body": "<p>This works for my. Does this help?</p>\n\n<pre><code>require 'nokogiri'\nrequire 'pp'\n\ns = \"&lt;result&gt;\n  &lt;name&gt;chemical name&lt;/name&gt;\n  &lt;description&gt;&lt;/description&gt;\n  &lt;ec---list-no.&gt;1123-34-6&lt;/ec---list-no.&gt;\n  &lt;cas-no.&gt;321-98-7&lt;/cas-no.&gt;\n  &lt;decision-type&gt;Important&lt;/decision-type&gt;\n  &lt;decision&gt;http://link to decision&lt;/decision&gt;\n  &lt;decision-date&gt;12/06/2011&lt;/decision-date&gt;\n  &lt;further-information&gt;&lt;/further-information&gt;\n  &lt;remarks&gt;&lt;/remarks&gt;\n  &lt;dossier-url&gt;http://link&lt;/dossier-url&gt;\n&lt;/result&gt;\"\n\ndoc = Nokogiri::XML( s )\ndoc.xpath( \"//result\" ).each do | record |\n  pp name = record.xpath( \"cas-no.\" )\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6071745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0458caddd88228ce048c7998501b28c?s=128&d=identicon&r=PG&f=1", "display_name": "stim", "link": "https://stackoverflow.com/users/6071745/stim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458135679, "creation_date": 1458134330, "last_edit_date": 1458135679, "question_id": 36036870, "link": "https://stackoverflow.com/questions/36036870/escaping-a-period-in-tag-name-using-nokogiri", "title": "Escaping a period in tag name using Nokogiri", "body": "<p>I have an XML file to parse. Here are some example data:</p>\n\n<pre><code>&lt;result&gt;\n            &lt;name&gt;chemical name&lt;/name&gt;\n            &lt;description&gt;&lt;/description&gt;\n            &lt;ec---list-no.&gt;1123-34-6&lt;/ec---list-no.&gt;\n            &lt;cas-no.&gt;321-98-7&lt;/cas-no.&gt;\n            &lt;decision-type&gt;Important&lt;/decision-type&gt;\n            &lt;decision&gt;http://link to decision&lt;/decision&gt;\n            &lt;decision-date&gt;12/06/2011&lt;/decision-date&gt;\n            &lt;further-information&gt;&lt;/further-information&gt;\n            &lt;remarks&gt;&lt;/remarks&gt;\n            &lt;dossier-url&gt;http://link&lt;/dossier-url&gt;\n&lt;/result&gt;\n</code></pre>\n\n<p>If I want to extract the names, for example, this works:</p>\n\n<pre><code>doc.xpath('//result').each do |record|\n  name = record.at('name').text\n  puts name\nend\n</code></pre>\n\n<p>However, I cannot extract the <code>ec--list-no</code> or <code>cas-no</code> data, because the tag names contain a period <code>\".\"</code>.</p>\n\n<pre><code>doc.xpath('//result').each do |record|\n  cas = record.at('cas-no.').text\n  puts cas\nend\n</code></pre>\n\n<p>throws an error.</p>\n\n<pre><code>unexpected '$' after '.'\n</code></pre>\n\n<p>I tried to escape it with a backslash <code>\"\\\"</code>, but to no avail. Also various combinations of single and double quotes. My search for CSS escape characters has so far been fruitless.</p>\n\n<p>Is there and elegant way to escape the period, or do I need to go back to the drawing board?</p>\n"}, {"tags": ["ruby", "object", "struct"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1458145373, "post_id": 36036786, "comment_id": 59731645, "body": "Your <code>each</code> block doesn&#39;t do anything. It assigns <code>nil</code> to the local variable <code>x</code>, but you don&#39;t do anything with that local variable, and it goes out of scope immediately."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1458145447, "post_id": 36037050, "comment_id": 59731710, "body": "Your <code>each</code> block doesn&#39;t do anything. It assigns <code>nil</code> to the local variable <code>elem</code>, but you don&#39;t do anything with that local variable, and it goes out of scope immediately."}], "tags": [], "owner": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "is_accepted": false, "score": -2, "last_activity_date": 1458205479, "last_edit_date": 1458205479, "creation_date": 1458134796, "answer_id": 36037050, "question_id": 36036786, "link": "https://stackoverflow.com/questions/36036786/ruby-struct-reset-method/36037050#36037050", "title": "Ruby struct reset method", "body": "<p>I've tried with ruby 2.2.4. All fields a nil by default?\nBut I've found a way you could change fields you like</p>\n\n<pre><code>require 'pp'\n\nMyStruct = Struct.new( :member, :user, :parent ) do\n  def initialize\n    self.members.each { | elem | self.send( \"#{elem}=\", 1 ) }\n  end\nend\n\npp MyStruct.new\n</code></pre>\n\n<p>UPDATE: I had to changed the code. Comment below was right. Now it's working</p>\n"}, {"tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": true, "score": 2, "last_activity_date": 1458135488, "creation_date": 1458135488, "answer_id": 36037308, "question_id": 36036786, "link": "https://stackoverflow.com/questions/36036786/ruby-struct-reset-method/36037308#36037308", "title": "Ruby struct reset method", "body": "<p><code>self.each</code> is iterating over the values, not the members/keys of the struct. This should do what you want.</p>\n\n<pre><code>My_struct = Struct.new(\n  :member1,\n  :member2,\n  :member3\n) do\n  def reset\n    self.members.each {|k| send(\"#{k}=\", nil)}\n  end\nend\n\nmyblock = My_struct.new\nmyblock.member1\n#=&gt; nil\nmyblock.member1 = \"value\"\n#=&gt; \"value\"\nmyblock.member1\n#=&gt; \"value\"\n\nmyblock.reset  \nmyblock.member1\n#=&gt; nil\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 768, "user_id": 150877, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5a77ab8974df041d6dedd7c4b093a6a8?s=128&d=identicon&r=PG", "display_name": "Keir Finlow-Bates", "link": "https://stackoverflow.com/users/150877/keir-finlow-bates"}, "edited": false, "score": 1, "creation_date": 1458144185, "post_id": 36038278, "comment_id": 59730752, "body": "Thanks. I wasn&#39;t aware that destroying and recreating a new instance on the old object name was as simple as repeating the .new method."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1458151897, "post_id": 36038278, "comment_id": 59736140, "body": "Very sensible solution. The preferred one, imo. (Aside: it may just be me, but the use of very large bold face grates.)"}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 2, "last_activity_date": 1458146389, "last_edit_date": 1458146389, "creation_date": 1458137800, "answer_id": 36038278, "question_id": 36036786, "link": "https://stackoverflow.com/questions/36036786/ruby-struct-reset-method/36038278#36038278", "title": "Ruby struct reset method", "body": "<h2>Problem</h2>\n\n<blockquote>\n  <p>I have a large struct, and after creating an object and setting some of the members to values, I want to be able to set all the members of the object to nil.</p>\n</blockquote>\n\n<h2>Solution: Just Replace the Whole Struct Object</h2>\n\n<p>Unless you have a special need to keep the object ID the same, the easiest thing to do is simply to create a new Struct, because the documentation for <a href=\"http://ruby-doc.org/core/Struct.html#method-c-new\" rel=\"nofollow\">Struct#new</a> says:</p>\n\n<blockquote>\n  <p>Unset parameters default to <code>nil</code>.</p>\n</blockquote>\n\n<p>For example:</p>\n\n<pre><code>My_struct = Struct.new :member1, :member2, :member3\nm = My_struct.new 'foo', 'bar', 'baz'    \n#=&gt; #&lt;struct My_struct member1=\"foo\", member2=\"bar\", member3=\"baz\"&gt;\n\nm = My_struct.new\n#=&gt; #&lt;struct My_struct member1=nil, member2=nil, member3=nil&gt;\n</code></pre>\n\n<p>Obviously, <code>m.object_id</code> will differ every time you assign a new My_struct instance to <em>m</em>, but there are very few use cases where this would (or should) matter. It's certainly a lot easier and less prone to errors than trying to reassign individual members, but your mileage may vary.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1458150990, "creation_date": 1458150990, "answer_id": 36043391, "question_id": 36036786, "link": "https://stackoverflow.com/questions/36036786/ruby-struct-reset-method/36043391#36043391", "title": "Ruby struct reset method", "body": "<pre><code>My_struct = Struct.new(\n  :member1,\n  :member2,\n  :member3\n) do\n    def reset\n      members.each { |m| self[m] = nil }\n    end\n  end\n\nm = My_struct.new #=&gt; #&lt;struct My_struct member1=nil, member2=nil, member3=nil&gt; \nm.member1 = \"Billy-Bob\"\nm.member2 = \"Girtie\"\nm.member3 = \"Hector\"\n\nm.member1  #=&gt; \"Billy-Bob\" \nm.member2  #=&gt; \"Girtie\" \nm.member3  #=&gt; \"Hector\" \n\nm.reset\n\nm.member1 #=&gt; nil \nm.member2 #=&gt; nil \nm.member3 #=&gt; nil \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1458155591, "creation_date": 1458155591, "answer_id": 36044945, "question_id": 36036786, "link": "https://stackoverflow.com/questions/36036786/ruby-struct-reset-method/36044945#36044945", "title": "Ruby struct reset method", "body": "<pre><code>My_struct = Struct.new(:member1, :member2, :member3) do\n\n  def reset\n    initialize\n  end\n\nend\n\nmyblock = My_struct.new\nmyblock.member1 = \"value\"\np myblock.object_id # =&gt; 15379000\n\nmyblock.reset\np myblock.member1   # =&gt; nil\np myblock.object_id # =&gt; 15379000; same object\n</code></pre>\n"}], "owner": {"reputation": 768, "user_id": 150877, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5a77ab8974df041d6dedd7c4b093a6a8?s=128&d=identicon&r=PG", "display_name": "Keir Finlow-Bates", "link": "https://stackoverflow.com/users/150877/keir-finlow-bates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 36037308, "answer_count": 5, "score": 0, "last_activity_date": 1458205479, "creation_date": 1458134133, "last_edit_date": 1458135251, "question_id": 36036786, "link": "https://stackoverflow.com/questions/36036786/ruby-struct-reset-method", "title": "Ruby struct reset method", "body": "<p>I have a large struct, and after creating an object and setting some of the members to values, I want to be able to set all the members of the object to nil. I tried the following, which doesn't work for some reason:</p>\n\n<pre><code> My_struct = Struct.new(\n   :member1,\n   :member2,\n   :member3\n ) do\n   def reset\n    self.each {|x| x = nil }\n   end\n end\n\n myblock = My_struct.new\n puts myblock.member1\n myblock.member1 = \"value\"\n puts myblock.member1\n myblock.reset  \n puts myblock.member1\n</code></pre>\n\n<p>I expected that last puts to return \"\" but it returns \"value\". What have I done wrong? Is there a native method, other than destroying and recreating the object each time?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "task", "delayed-job", "job-scheduling"], "comments": [{"owner": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "edited": false, "score": 2, "creation_date": 1458133515, "post_id": 36036474, "comment_id": 59721979, "body": "Generate a <code>rake</code> task and then call it periodically."}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1458133718, "post_id": 36036474, "comment_id": 59722138, "body": "Are you using heroku in production?"}, {"owner": {"reputation": 436, "user_id": 5757634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d29af3df3533eee17e2fcae9fb452fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Rubioli", "link": "https://stackoverflow.com/users/5757634/rubioli"}, "reply_to_user": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1458133830, "post_id": 36036474, "comment_id": 59722237, "body": "@toddmetheny No I am in development (localhost:3000)"}, {"owner": {"reputation": 436, "user_id": 5757634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d29af3df3533eee17e2fcae9fb452fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Rubioli", "link": "https://stackoverflow.com/users/5757634/rubioli"}, "reply_to_user": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "edited": false, "score": 0, "creation_date": 1458133865, "post_id": 36036474, "comment_id": 59722273, "body": "@devanand I have never made rake task, can you help me out."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1458133968, "post_id": 36036474, "comment_id": 59722365, "body": "You will need a gem to run a rake task periodically, <code>whenever</code> is a very good one. <a href=\"https://github.com/javan/whenever\" rel=\"nofollow noreferrer\">github.com/javan/whenever</a>"}, {"owner": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1458134191, "post_id": 36036474, "comment_id": 59722531, "body": "@MrYoshiji For me this was mostly a very unstable way. Because some time the server runs more than one instances or all instances were sleeping."}, {"owner": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "edited": false, "score": 0, "creation_date": 1458134229, "post_id": 36036474, "comment_id": 59722566, "body": "@Rubioli see anser 1 :)"}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1458134815, "post_id": 36036474, "comment_id": 59723105, "body": "clockwork is an option if you&#39;re looking for an alternative to whenever: <a href=\"https://github.com/tomykaira/clockwork\" rel=\"nofollow noreferrer\">github.com/tomykaira/clockwork</a> It&#39;s pretty simple."}], "answers": [{"tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": false, "score": 0, "last_activity_date": 1458133989, "creation_date": 1458133989, "answer_id": 36036726, "question_id": 36036474, "link": "https://stackoverflow.com/questions/36036474/ruby-on-rail-add-background-task-to-update-status-and-expiration-date/36036726#36036726", "title": "Ruby on Rail - Add background task to update status and expiration date", "body": "<p>In your lib/tasks file, create a file called <code>something.rake</code> and inside that file, create a task by saying:</p>\n\n<pre><code>task :name_of_task =&gt; :environment do\n  # name of model\n  Ad.find_each do |ad|\n     # if add expired, change status to false and save\n  end\nend\n</code></pre>\n\n<p>You can run your task by saying <code>rake name_of_task</code> in the terminal...or you can add <code>name_of_task</code> to the heroku scheduler if you're using heroku. <a href=\"https://elements.heroku.com/addons/scheduler\" rel=\"nofollow\">https://elements.heroku.com/addons/scheduler</a></p>\n"}, {"tags": [], "owner": {"reputation": 417, "user_id": 5507259, "user_type": "registered", "profile_image": "https://graph.facebook.com/888912451163823/picture?type=large", "display_name": "Roman Kovtunenko", "link": "https://stackoverflow.com/users/5507259/roman-kovtunenko"}, "is_accepted": true, "score": 0, "last_activity_date": 1458134261, "creation_date": 1458134261, "answer_id": 36036839, "question_id": 36036474, "link": "https://stackoverflow.com/questions/36036474/ruby-on-rail-add-background-task-to-update-status-and-expiration-date/36036839#36036839", "title": "Ruby on Rail - Add background task to update status and expiration date", "body": "<p>Just create background job changing the status in after create callback which would be performed at exp. date</p>\n\n<p>more info: <a href=\"http://guides.rubyonrails.org/active_job_basics.html\" rel=\"nofollow\">http://guides.rubyonrails.org/active_job_basics.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 12063745, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAuvzaFEQ5s57gkDwFAIxdWa7gNNhZoGiQ9oTJ5=k-s128", "display_name": "poet", "link": "https://stackoverflow.com/users/12063745/poet"}, "is_accepted": false, "score": 1, "last_activity_date": 1600805240, "creation_date": 1600805240, "answer_id": 64016972, "question_id": 36036474, "link": "https://stackoverflow.com/questions/36036474/ruby-on-rail-add-background-task-to-update-status-and-expiration-date/64016972#64016972", "title": "Ruby on Rail - Add background task to update status and expiration date", "body": "<p>I do not have enough information to be sure, but keep the system updating records sounds a little overcoding for me. Is really necessary to store your model <code>status</code> field? I mean, you can also calculate if your records have expired whenever you need it and only when you need it, just add a <code>scope</code> to your model like:</p>\n<pre><code>class Food &lt; ApplicationRecord\n  scope :not_expired, -&gt; { where(:expiration_date &gt; DateTime.now) }\nend\n</code></pre>\n<p>Then you used it like this:</p>\n<pre><code>@groceries = Food.not_expired\n</code></pre>\n"}], "owner": {"reputation": 436, "user_id": 5757634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d29af3df3533eee17e2fcae9fb452fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Rubioli", "link": "https://stackoverflow.com/users/5757634/rubioli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 1, "accepted_answer_id": 36036839, "answer_count": 3, "score": 1, "last_activity_date": 1600805240, "creation_date": 1458133290, "question_id": 36036474, "link": "https://stackoverflow.com/questions/36036474/ruby-on-rail-add-background-task-to-update-status-and-expiration-date", "title": "Ruby on Rail - Add background task to update status and expiration date", "body": "<p>I am making a auction web app. When a ad is created, I automatically add <strong>expiration date</strong> into database.</p>\n\n<pre><code>  before_create :set_expiration_date\n\n  def set_expiration_date\n    self.expiration_date =  Time.now + 60.days\n  end \n</code></pre>\n\n<p>How can I add a <strong>background task/job</strong>, so when a ad  has reached its <strong>expiration date</strong>, it can change the <strong><code>status to false</code></strong>.</p>\n\n<p>Is it any good gem that I could use in my case?</p>\n\n<p>I have tried <strong>whenever gem</strong> and it was very cumbersome and it didn't ran in background and hard to understand.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "iframe"], "comments": [{"owner": {"reputation": 4740, "user_id": 2535335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/86bnp.jpg?s=128&g=1", "display_name": "Johannes Jander", "link": "https://stackoverflow.com/users/2535335/johannes-jander"}, "edited": false, "score": 1, "creation_date": 1458132242, "post_id": 36035966, "comment_id": 59720988, "body": "What does <code>i am making code mirror in rails but i et this error</code> mean? Please take the time to revise the problem description so it is more understandable."}, {"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "reply_to_user": {"reputation": 4740, "user_id": 2535335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/86bnp.jpg?s=128&g=1", "display_name": "Johannes Jander", "link": "https://stackoverflow.com/users/2535335/johannes-jander"}, "edited": false, "score": 0, "creation_date": 1458132616, "post_id": 36035966, "comment_id": 59721295, "body": "have revise my question"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1458132639, "post_id": 36036063, "comment_id": 59721317, "body": "this works fine in normal html but fails on ruby on rails"}, {"owner": {"reputation": 3607, "user_id": 5784724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q6eNe.jpg?s=128&g=1", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/5784724/dmitriy"}, "reply_to_user": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1458132962, "post_id": 36036063, "comment_id": 59721535, "body": "Are you sure that your <code>iframe</code> exists in your html-code after it is rendered by ruby on rails?"}, {"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1458133197, "post_id": 36036063, "comment_id": 59721745, "body": "yes it is and shows this in the debugger section var iframe = document.querySelector(&#39;#output iframe&#39;),   iframe_doc = iframe.contentDocument; @Dmitriy and also trows out this error when ever i change anything in the textareas                                         Uncaught TypeError: Cannot read property &#39;contentDocument&#39; of null"}, {"owner": {"reputation": 3607, "user_id": 5784724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q6eNe.jpg?s=128&g=1", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/5784724/dmitriy"}, "reply_to_user": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1458133342, "post_id": 36036063, "comment_id": 59721851, "body": "type <code>document.querySelector(&#39;#output iframe&#39;)</code> in your console(F12). What is the result? <code>null</code> or <code>iframe</code>?"}, {"owner": {"reputation": 3607, "user_id": 5784724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q6eNe.jpg?s=128&g=1", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/5784724/dmitriy"}, "reply_to_user": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1458133750, "post_id": 36036063, "comment_id": 59722165, "body": "It means that there is no iframe inside element with id <code>output</code>. Or this iframe is inside another frame."}, {"owner": {"reputation": 3607, "user_id": 5784724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q6eNe.jpg?s=128&g=1", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/5784724/dmitriy"}, "reply_to_user": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1458134376, "post_id": 36036063, "comment_id": 59722702, "body": "what was the reason? frame inside frame? :)"}, {"owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1458208839, "post_id": 36036063, "comment_id": 59761209, "body": "i did not give and ID of output to a element"}], "tags": [], "owner": {"reputation": 3607, "user_id": 5784724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q6eNe.jpg?s=128&g=1", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/5784724/dmitriy"}, "is_accepted": false, "score": 0, "last_activity_date": 1458132274, "creation_date": 1458132274, "answer_id": 36036063, "question_id": 36035966, "link": "https://stackoverflow.com/questions/36035966/rails-uncaught-typeerror-cannot-read-property-contentdocument-of-null/36036063#36036063", "title": "rails Uncaught TypeError: Cannot read property &#39;contentDocument&#39; of null", "body": "<p>Set <code>id</code> for your iframe and then you can get your frame by this code:</p>\n\n<pre><code>&lt;iframe id=\"frameId\"&gt;&lt;/iframe&gt;\n&lt;script type=\"text/javascript\"&gt;\n    var frame = window.frames.frameId;\n&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1045, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1458132592, "creation_date": 1458132012, "last_edit_date": 1458132592, "question_id": 36035966, "link": "https://stackoverflow.com/questions/36035966/rails-uncaught-typeerror-cannot-read-property-contentdocument-of-null", "title": "rails Uncaught TypeError: Cannot read property &#39;contentDocument&#39; of null", "body": "<p>am making code mirror in rails but the iframe is not displaying and it caugh error. the code works fine in normal html page but fails on ruby on rails  this error</p>\n\n<pre><code>new:269 Uncaught TypeError: Cannot read property 'contentDocument' of null\n</code></pre>\n\n<p>and this the line it happens\n<code>iframe_doc = iframe.contentDocument;</code></p>\n\n<p>and this my whole new code </p>\n\n<pre><code>        &lt;!DOCTYPE html&gt;\n    &lt;html lang=\"en\"&gt;\n\n  &lt;div class=\"row\"&gt;\n\n  &lt;!-- Code Editors --&gt;\n  &lt;div class=\"col s6\"&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;%= form_for(@hcj) do |f| %&gt;\n      &lt;%= render 'shared/error_messages', object: f.object %&gt;\n      &lt;div class=\"field\"&gt;\n        &lt;div id=\"html\" class=\"s3\"&gt;\n          &lt;h3&gt;HTML&lt;/h3&gt;\n\n          &lt;%= f.text_area :html, placeholder: \"Compose new micropost...\", name: \"html\" %&gt;\n        &lt;/div&gt;\n\n        &lt;div id=\"css\" class=\"s3\"&gt;\n          &lt;h3&gt;css&lt;/h3&gt;\n          &lt;%= f.text_area :css, placeholder: \"Compose new micropost...\", name: \"css\" %&gt;\n        &lt;/div&gt;\n        &lt;div id=\"js\" class=\"s3\"&gt;\n          &lt;h3&gt;js&lt;/h3&gt;\n          &lt;%= f.text_area :js, placeholder: \"Compose new micropost...\", name: \"js\" %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;%= f.submit \"Post\", class: \"btn btn-primary\" %&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n\n\n  &lt;/div&gt;\n\n  &lt;!-- Sandboxing --&gt;\n  &lt;h3&gt;sandbox&lt;/h3&gt;\n  &lt;div class=\"col s6\"&gt;\n    &lt;iframe id=\"frameId\"&gt;&lt;/iframe&gt;\n  &lt;script type=\"text/javascript\"&gt;\n      var frame = window.frames.frameId;\n  &lt;/script&gt;\n  &lt;/div&gt;\n\n&lt;/div&gt;\n\n&lt;script&gt;\n    (function () {\n\n        // Base template\n        var base_tpl =\n            \"&lt;!doctype html&gt;\\n\" +\n            \"&lt;html&gt;\\n\\t\" +\n            \"&lt;head&gt;\\n\\t\\t\" +\n            \"&lt;meta charset=\\\"utf-8\\\"&gt;\\n\\t\\t\" +\n            \"&lt;title&gt;Test&lt;/title&gt;\\n\\n\\t\\t\\n\\t\" +\n            \"&lt;/head&gt;\\n\\t\" +\n            \"&lt;body&gt;\\n\\t\\n\\t\" +\n            \"&lt;/body&gt;\\n\" +\n            \"&lt;/html&gt;\";\n\n        var prepareSource = function () {\n            var html = html_editor.getValue(),\n                css = css_editor.getValue(),\n                js = js_editor.getValue(),\n                src = '';\n\n            // HTML\n            src = base_tpl.replace('&lt;/body&gt;', html + '&lt;/body&gt;');\n\n            // CSS\n            css = '&lt;style&gt;' + css + '&lt;/style&gt;';\n            src = src.replace('&lt;/head&gt;', css + '&lt;/head&gt;');\n\n            // Javascript\n            js = '&lt;script&gt;' + js + '&lt;\\/script&gt;';\n            src = src.replace('&lt;/body&gt;', js + '&lt;/body&gt;');\n\n            return src;\n        };\n\n        var render = function () {\n            var source = prepareSource();\n\n            var iframe = document.querySelector('#output iframe'),\n                iframe_doc = iframe.contentDocument;\n\n            iframe_doc.open();\n            iframe_doc.write(source);\n            iframe_doc.close();\n        };\n\n\n        // EDITORS\n\n        // CM OPTIONS\n        var cm_opt = {\n            mode: 'text/html',\n            gutter: true,\n            lineNumbers: true,\n        };\n\n        // HTML EDITOR\n        var html_box = document.querySelector('#html textarea');\n        var html_editor = CodeMirror.fromTextArea(html_box, cm_opt);\n\n        html_editor.on('change', function (inst, changes) {\n            render();\n        });\n\n        // CSS EDITOR\n        cm_opt.mode = 'css';\n        var css_box = document.querySelector('#css textarea');\n        var css_editor = CodeMirror.fromTextArea(css_box, cm_opt);\n\n        css_editor.on('change', function (inst, changes) {\n            render();\n        });\n\n        // JAVASCRIPT EDITOR\n        cm_opt.mode = 'javascript';\n        var js_box = document.querySelector('#js textarea');\n        var js_editor = CodeMirror.fromTextArea(js_box, cm_opt);\n\n        js_editor.on('change', function (inst, changes) {\n            render();\n        });\n\n        // SETTING CODE EDITORS INITIAL CONTENT\n        html_editor.setValue('&lt;p&gt;Hello World&lt;/p&gt;');\n        css_editor.setValue('body { color: red; }');\n\n\n        // RENDER CALL ON PAGE LOAD\n        // NOT NEEDED ANYMORE, SINCE WE RELY\n        // ON CODEMIRROR'S onChange OPTION THAT GETS\n        // TRIGGERED ON setValue\n        // render();\n\n\n        // NOT SO IMPORTANT - IF YOU NEED TO DO THIS\n        // THEN THIS SHOULD GO TO CSS\n\n        /*\n          Fixing the Height of CodeMirror.\n          You might want to do this in CSS instead\n          of JS and override the styles from the main\n          codemirror.css\n        */\n        var cms = document.querySelectorAll('.CodeMirror');\n        for (var i = 0; i &lt; cms.length; i++) {\n\n            cms[i].style.position = 'absolute';\n            cms[i].style.top = '30px';\n            cms[i].style.bottom = '0';\n            cms[i].style.left = '0';\n            cms[i].style.right = '0';\n            cms[i].style.height = '100%';\n        }\n        /*cms = document.querySelectorAll('.CodeMirror-scroll');\n        for (i = 0; i &lt; cms.length; i++) {\n          cms[i].style.height = '100%';\n        }*/\n\n    }());\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "security", "authentication", "devise"], "comments": [{"owner": {"reputation": 18774, "user_id": 1763929, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jLvbN.jpg?s=128&g=1", "display_name": "Vucko", "link": "https://stackoverflow.com/users/1763929/vucko"}, "edited": false, "score": 2, "creation_date": 1458131780, "post_id": 36035804, "comment_id": 59720618, "body": "<a href=\"http://www.rubydoc.info/github/plataformatec/devise/master/Devise/Models/Lockable\" rel=\"nofollow noreferrer\">Devise has a lockable module</a> for the first issue. As for the second issue, I believe that you can use <a href=\"https://github.com/phatworx/devise_security_extension\" rel=\"nofollow noreferrer\">devise_security_extension</a>"}, {"owner": {"reputation": 353, "user_id": 3433356, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/1176921835/picture?type=large", "display_name": "Guillaume Caill&#233;", "link": "https://stackoverflow.com/users/3433356/guillaume-caill%c3%a9"}, "reply_to_user": {"reputation": 18774, "user_id": 1763929, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jLvbN.jpg?s=128&g=1", "display_name": "Vucko", "link": "https://stackoverflow.com/users/1763929/vucko"}, "edited": false, "score": 0, "creation_date": 1458133027, "post_id": 36035804, "comment_id": 59721610, "body": "Hey thank you for devise_security_extension ! didn&#39;t know about that. But is there a way for a user to modify these parameters ? With a button or drop-down list from within the app"}], "owner": {"reputation": 353, "user_id": 3433356, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/1176921835/picture?type=large", "display_name": "Guillaume Caill&#233;", "link": "https://stackoverflow.com/users/3433356/guillaume-caill%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458134912, "creation_date": 1458131569, "last_edit_date": 1458134912, "question_id": 36035804, "link": "https://stackoverflow.com/questions/36035804/can-i-modify-devise-params-from-within-an-app", "title": "Can I modify Devise params from within an app", "body": "<p>I have this homework from a security class where I need to make an app using some sort of authentification system. So I decided to use ruby on rails and I got it all working with devise at the moment. </p>\n\n<p>But for this home work I need an admin to be able to go into an admin page <strong>within the app</strong> and be able to modify some security options like :</p>\n\n<ul>\n<li>Being able to lock people after too many login attempts</li>\n<li>Complexity of user password</li>\n</ul>\n\n<p>I can't seem to find anything on the internet for this...\nIs this possible ? Should I use another method ?</p>\n\n<p>Thank you,</p>\n\n<p>Guillaume</p>\n"}, {"tags": ["ruby", "facebook", "heroku"], "comments": [{"owner": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1458132356, "post_id": 36035764, "comment_id": 59721093, "body": "Scraping their pages and using any kind of automated tools to access their site is against Facebook\u2019s ToS. If you want to interact in any way with Facebook users/data \u2013 use their API."}, {"owner": {"reputation": 105, "user_id": 3523475, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000033871949/picture?type=large", "display_name": "chernish2", "link": "https://stackoverflow.com/users/3523475/chernish2"}, "reply_to_user": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1458132758, "post_id": 36035764, "comment_id": 59721391, "body": "I&#39;m not doing scraping nor collecting any data. I just need updated acess_token to login with it in other application. And to obtain it I need login to FB and then go to <a href=\"https://www.facebook.com/dialog/oauth\" rel=\"nofollow noreferrer\">facebook.com/dialog/oauth</a>, maybe there is a better way to do it?"}, {"owner": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1458138291, "post_id": 36035764, "comment_id": 59726120, "body": "Correct, you need to go through the login dialog \u2013 in your browser, not on any remote machines."}], "owner": {"reputation": 105, "user_id": 3523475, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000033871949/picture?type=large", "display_name": "chernish2", "link": "https://stackoverflow.com/users/3523475/chernish2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 394, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458131441, "creation_date": 1458131441, "question_id": 36035764, "link": "https://stackoverflow.com/questions/36035764/how-to-allow-login-from-foreign-ip-on-facebook", "title": "How to allow login from foreign IP on Facebook?", "body": "<p>I have a small Ruby script which logs in from time to time into my Facebook account and do something. Now I want it to run on Heroku, but Facebook immediately blocks my account because of suspicions on unauthorized access (because Heroku's IP is different from my local).\nIs it possible to calm down Facebook in that sense in order to run script on Heroku?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model"], "answers": [{"comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 1, "creation_date": 1458131196, "post_id": 36035534, "comment_id": 59720165, "body": "What is quite surprising is that Relation by default delegates missing methods to <code>to_a</code>. So why did it fail in this case?"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1458132986, "post_id": 36035534, "comment_id": 59721559, "body": "Ok, did some digging around and it seem that this delegation is not that simple as just going with <code>method_missing</code>, as some methods needs to be delegated to relation klass. The delegation logic can be find here: <a href=\"https://github.com/rails/rails/blob/a419a4d9ade48e777166ff956dd7bb24e37b2181/activerecord/lib/active_record/relation/delegation.rb\" rel=\"nofollow noreferrer\">github.com/rails/rails/blob/&hellip;</a>"}, {"owner": {"reputation": 179, "user_id": 5726485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10207019311632480/picture?type=large", "display_name": "Hussein.", "link": "https://stackoverflow.com/users/5726485/hussein"}, "edited": false, "score": 0, "creation_date": 1458137563, "post_id": 36035534, "comment_id": 59725544, "body": "@mtrolle I test with <code>to_a</code> and it works. Why on other code we don&#39;t use this and it works?"}], "tags": [], "owner": {"reputation": 1734, "user_id": 996000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95be255e1690445d23f68ae734af371c?s=128&d=identicon&r=PG", "display_name": "mtrolle", "link": "https://stackoverflow.com/users/996000/mtrolle"}, "is_accepted": false, "score": 2, "last_activity_date": 1458130823, "creation_date": 1458130823, "answer_id": 36035534, "question_id": 36035454, "link": "https://stackoverflow.com/questions/36035454/undefined-method-for-answeractiverecord-relation0x007fada31c7430/36035534#36035534", "title": "undefined method `&lt;&lt;&#39; for #&lt;Answer::ActiveRecord_Relation:0x007fada31c7430&gt;", "body": "<p>You are trying to append to the <code>@answers</code> result - this is an ActiveRecord relation, you cannot append data to that array.</p>\n\n<p>Add <code>.to_a</code> in the end of your line where you set <code>@answers</code> to allow you to append to the array.</p>\n\n<pre><code> @answers = Answer.where.not(id: question.answer_id).limit(2).order(\"RANDOM()\").to_a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 179, "user_id": 5726485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10207019311632480/picture?type=large", "display_name": "Hussein.", "link": "https://stackoverflow.com/users/5726485/hussein"}, "edited": false, "score": 0, "creation_date": 1458137638, "post_id": 36035977, "comment_id": 59725598, "body": "You mean I change <code>RANDOM</code> to <code>RAND</code>? But it breaks again an error in my code. Doest it right for you?"}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": true, "score": 0, "last_activity_date": 1458132043, "creation_date": 1458132043, "answer_id": 36035977, "question_id": 36035454, "link": "https://stackoverflow.com/questions/36035454/undefined-method-for-answeractiverecord-relation0x007fada31c7430/36035977#36035977", "title": "undefined method `&lt;&lt;&#39; for #&lt;Answer::ActiveRecord_Relation:0x007fada31c7430&gt;", "body": "<p>mtrolle's answer might be correct, but I have my doubts as to why <code>ActiveRecord::Relation</code> was not returned as Array by default. <em>(Also as mentioned by BroiStatse in his comment.)</em></p>\n\n<p>I too noticed the same problem with my local setup however it was attributed to another issue all together. I am sharing this here in case you too happen to use MySQL.</p>\n\n<pre><code>Answer.where.not(id: question.answer_id).limit(2).order(\"RANDOM()\")\n</code></pre>\n\n<p>returns an <code>ActiveRecord::Relation</code> object. And it translates to following SQL:</p>\n\n<pre><code>SELECT `answers`.* FROM `answers` WHERE (id != ID) ORDER BY RANDOM() LIMIT 2\n</code></pre>\n\n<p>When I try running the same in MySQL, I get:</p>\n\n<pre><code>ERROR 1305 (42000): FUNCTION database.RANDOM does not exist\n</code></pre>\n\n<p>Apparently MySQL does not have <code>RANDOM()</code> function, instead it uses <a href=\"https://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand\" rel=\"nofollow\"><code>RAND()</code></a>.</p>\n\n<p>Converting <code>ActiveRecord</code> query accordingly returned correct Array to me:</p>\n\n<pre><code>Answer.where.not(id: question.answer_id).limit(2).order(\"RAND()\")\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 5726485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10207019311632480/picture?type=large", "display_name": "Hussein.", "link": "https://stackoverflow.com/users/5726485/hussein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 1, "accepted_answer_id": 36035977, "answer_count": 2, "score": 0, "last_activity_date": 1458132043, "creation_date": 1458130618, "question_id": 36035454, "link": "https://stackoverflow.com/questions/36035454/undefined-method-for-answeractiverecord-relation0x007fada31c7430", "title": "undefined method `&lt;&lt;&#39; for #&lt;Answer::ActiveRecord_Relation:0x007fada31c7430&gt;", "body": "<p>Hi I create a controller Game to display a Q/A game</p>\n\n<p>And I am blocked with <code>&lt;&lt;</code>, here is the code </p>\n\n<pre><code>def play\n    lvlup(lvl)\n    if lvl == 1\n      set_questions\n    else\n      get_questions\n    end\n    @answers = Answer.where.not(id: question.answer_id).limit(2).order(\"RANDOM()\")\n    @answer ||= []\n    @answers &lt;&lt; question.answer\n    @answers = @answers.shuffle\n    render 'play'\n  end\n</code></pre>\n\n<p>I create an array and I put the related answer in the global answers I want to display 4 Max.</p>\n\n<p>Why does the undefined is here?</p>\n\n<p>Here is the total code </p>\n\n<pre><code>class GamesController &lt; ApplicationController\nattr_accessor :lvl\n\n  def welcome\n  end\n\n  def congrat\n  end\n\n  def play\n    lvlup(lvl)\n    if lvl == 1\n      set_questions\n    else\n      get_questions\n    end\n    @answers = Answer.where.not(id: question.answer_id).limit(2).order(\"RANDOM()\")\n    @answer ||= []\n    @answers &lt;&lt; question.answer\n    @answers = @answers.shuffle\n    render 'play'\n  end\n\n  def loose\n      @question = Question.find(params[:question])\n      flash.now[:alert] = \"Miss...\"\n      render 'loose'\n  end\n\n  def check\n    @lvl = params[:lvl].to_i\n    answer_id = params[:id].to_i\n    question = Question.find(params[:question])\n    if @lvl == lvlmax\n      render action: 'congrat' and return\n    elsif answer_id == question.answer_id\n      flash.now[:notice] = \"Well done !\"\n      play\n    else answer_id != question.answer_id\n      loose\n    end\n  end\n\n  private\n\n  def lvlup(value)\n    @lvl = 1 + value.to_i\n  end\n  def lvlmax\n    @lvlmax = Question.all.count\n  end\n\n  def set_questions\n    @questionsids = []\n    Question.all.shuffle.each do |d|\n      @questionsids &lt;&lt; d.id\n    end\n    cookies[:questions] = @questionsids\n  end\n\n  def get_questions\n    @questions = cookies[:questions].split('&amp;')\n  end\n\n  def questions\n    @questions = cookies[:questions]\n  end\n\n  def question\n    @question = Question.find(questions[lvl])\n  end\n\nend\n</code></pre>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "model", "attributes"], "comments": [{"owner": {"reputation": 13091, "user_id": 385532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/082cc70175616a7f63b134a741c5d6e3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/385532/matt"}, "edited": false, "score": 0, "creation_date": 1458129451, "post_id": 36034949, "comment_id": 59718917, "body": "This is frequently due to strong params, do you use them? Can you post the relevant parts of your controller?"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 13091, "user_id": 385532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/082cc70175616a7f63b134a741c5d6e3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/385532/matt"}, "edited": false, "score": 0, "creation_date": 1458130610, "post_id": 36034949, "comment_id": 59719726, "body": "What is in the <code>user_params</code> method? @Matt is right, the simplest error would be that you&#39;ve forgotten to add <code>roleids</code> to the <code>user_params</code> method."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5859747"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1458130852, "post_id": 36034949, "comment_id": 59719894, "body": "@j-dexx that was it!"}], "answers": [{"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 1, "last_activity_date": 1458130889, "creation_date": 1458130889, "answer_id": 36035553, "question_id": 36034949, "link": "https://stackoverflow.com/questions/36034949/rails-added-model-attribute-not-filling-from-form/36035553#36035553", "title": "Rails added model attribute not filling from form", "body": "<p>check you have added <code>roleids</code> attribute to your strong parameter in your controller like:</p>\n\n<pre><code>def user_params\n  params.require(:user).permit(:email, :password, :password_confirmation, :fname, :lname, :roleids)\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5859747"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458130889, "creation_date": 1458129172, "last_edit_date": 1458130321, "question_id": 36034949, "link": "https://stackoverflow.com/questions/36034949/rails-added-model-attribute-not-filling-from-form", "title": "Rails added model attribute not filling from form", "body": "<p>I added an attribute to a model. The form field populates, but when I submit, it doesn't input it into my DB.</p>\n\n<p>The field is RoleID:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ao42w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ao42w.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can see on the next page that it does not fill the DB:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bw6Ts.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bw6Ts.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have also confirmed from the DB:</p>\n\n<pre><code>+----+--------+-------------------------+----------+---------+-------+---------------------+---------------------+---------+\n| id | userid | email                   | password | fname   | lname | created_at          | updated_at          | roleids |\n+----+--------+-------------------------+----------+---------+-------+---------------------+---------------------+---------+\n|  1 |      1 | kendallweihe@gmail.com  | test     | kendall | weihe | 2016-03-15 21:56:30 | 2016-03-15 21:56:30 |    NULL |\n|  2 |      2 | kendall.weihe@gmail.com | test     | ken     | weihe | 2016-03-16 11:39:05 | 2016-03-16 11:39:05 |    NULL |\n|  3 |      2 | kendall.weihe@gmail.com | test     | ken     | weihe | 2016-03-16 11:42:32 | 2016-03-16 11:42:32 |    NULL |\n|  4 |      2 | kendall.weihe@gmail.com | test     | ken     | weihe | 2016-03-16 11:44:26 | 2016-03-16 11:44:26 |    NULL |\n+----+--------+-------------------------+----------+---------+-------+---------------------+---------------------+---------+\n</code></pre>\n\n<p>The input form looks like this: </p>\n\n<pre><code>  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :lname %&gt;&lt;br&gt;\n    &lt;%= f.text_field :lname %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :roleids, \"RoleID: 1 for Employee or 2 for Customer\" %&gt;&lt;br&gt;\n    &lt;%= f.number_field :roleids %&gt;\n    &lt;%debugger%&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>The debugger placed above confirms that the attribute exists:</p>\n\n<pre><code>#&lt;User id: nil, userid: nil, email: nil, password: nil, fname: nil, lname: nil, created_at: nil, updated_at: nil, roleids: nil&gt;\n</code></pre>\n\n<p>The controller action looks like this:</p>\n\n<pre><code>  def create\n    @user = User.new(user_params)\n\n    respond_to do |format|\n      if @user.save\n        format.html { redirect_to @user, notice: 'User was successfully created.' }\n        format.json { render :show, status: :created, location: @user }\n      else\n        format.html { render :new }\n        format.json { render json: @user.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n"}, {"tags": ["c#", "ruby", "encryption", "cryptography", "rsa"], "comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 1, "creation_date": 1458168898, "post_id": 36033300, "comment_id": 59745451, "body": "&quot;Where Base64Decode is my custom method to replicate Base64.urlsafe_decode64 in ruby &quot; How come your base 64 decoder returns a string instead of bytes? Have you Unit-tested your base 64 decoder? Don&#39;t reuse your variables like this: <code>signature = Base64Decode(signature);</code>"}, {"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1458195899, "post_id": 36033300, "comment_id": 59753755, "body": "OMG!! It works, after returned bytes from Base64Decode Thanks"}], "owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1147, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458127440, "creation_date": 1458124886, "last_edit_date": 1458127440, "question_id": 36033300, "link": "https://stackoverflow.com/questions/36033300/verification-of-ruby-generated-rsa-sha256-signature-fails-in-c", "title": "Verification of ruby-generated RSA SHA256 signature fails in C#", "body": "<p>I have the following code in ruby and C# to generate and verify RSA signature.</p>\n\n<p><strong>Ruby</strong></p>\n\n<p>Keys generation (in PEM format)</p>\n\n<pre><code>keys = OpenSSL::PKey::RSA.new 512\nprivate_key = key.to_pem\npublic_key = key.public_key.to_pem\n</code></pre>\n\n<p>I store these keys in environment variables <code>ENV[\"PRIVATE_KEY\"]</code> and <code>ENV[\"PUBLIC_KEY\"]</code></p>\n\n<p>Generate signature</p>\n\n<pre><code>def generate_signature(token)\n  sign_hash = OpenSSL::Digest::SHA256.new\n  priv = OpenSSL::PKey::RSA.new(ENV[\"PRIVATE_KEY\"])\n  signature = Base64.urlsafe_encode64(priv.sign(sign_hash, token))\n  signature.gsub!(/\\n/, '')\nend\n</code></pre>\n\n<p>Verify signature</p>\n\n<pre><code>def verify_signature(signature, token)\n  verify_hash = OpenSSL::Digest::SHA256.new\n  pub = OpenSSL::PKey::RSA.new(ENV[\"PUBLIC_KEY\"])\n  pub.verify(verify_hash, Base64.urlsafe_decode64(signature), token)\nend \n</code></pre>\n\n<p>given these methods, the following code returns <strong>true</strong>, so verification is <strong>succesful</strong>.</p>\n\n<pre><code>signature = generate_signature(\"string\")\nputs verify_signature(signature, \"string\")\n</code></pre>\n\n<p><strong>C#</strong></p>\n\n<p>In C# I don't need to generate keys, I just need to verify signature, generated previously in ruby. Since <code>System.Security.Cryptography</code> doesn't work with PEM keys out of the box, I converted PEM key to XML format (using <a href=\"https://superdry.apphb.com/tools/online-rsa-key-converter\" rel=\"nofollow\">online converter</a>)</p>\n\n<p>Here is verification code, which returns <strong>false</strong>, so verification is <strong>unsuccesfull</strong>.</p>\n\n<pre><code>public const string publicKey = @\"Public key in XML format\";\npublic static bool Verify(string nonce, string signature)\n{\n     RSACryptoServiceProvider RSAVerifier = new RSACryptoServiceProvider();\n     RSAVerifier.FromXmlString(publicKey);\n     signature = Base64Decode(signature);\n     byte[] SignatureBytes = Encoding.UTF8.GetBytes(signature);\n     byte[] VerifyFileData = Encoding.UTF8.GetBytes(nonce);\n\n     bool isValidSignature = RSAVerifier.VerifyData(VerifyFileData, CryptoConfig.MapNameToOID(\"SHA256\"), SignatureBytes);\n     return isValidSignature;\n }\n</code></pre>\n\n<p>Where Base64Decode is my custom method to replicate Base64.urlsafe_decode64 in ruby </p>\n\n<pre><code>public static string Base64Decode(string base64EncodedData)\n{\n     byte[] base64EncodedBytes = Convert.FromBase64String(base64EncodedData.Replace('-', '+').Replace('_', '/'));\n     return Encoding.UTF8.GetString(base64EncodedBytes);\n }\n</code></pre>\n"}, {"tags": ["ruby", "metaprogramming"], "answers": [{"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 3, "last_activity_date": 1458124775, "creation_date": 1458124775, "answer_id": 36033261, "question_id": 36033179, "link": "https://stackoverflow.com/questions/36033179/how-to-access-a-dynamically-created-class-within-another/36033261#36033261", "title": "How to access a dynamically created class within another?", "body": "<p>You're out of the scope in which <code>clazz_one</code> is defined when you use <code>def</code> keywords to define method. Instead, you can use <code>define_method</code> method, which takes a block, which is closure, so it preserves the local scope:</p>\n\n<pre><code>define_method :two do\n  clazz_one.new.one + ' and ' + clazz_one.new.one\nend\n</code></pre>\n\n<p>Here you can learn more about scopes in Ruby:\n<a href=\"http://www.sitepoint.com/understanding-scope-in-ruby/\" rel=\"nofollow\">http://www.sitepoint.com/understanding-scope-in-ruby/</a></p>\n"}], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 36033261, "answer_count": 1, "score": 1, "last_activity_date": 1458141597, "creation_date": 1458124605, "last_edit_date": 1458141597, "question_id": 36033179, "link": "https://stackoverflow.com/questions/36033179/how-to-access-a-dynamically-created-class-within-another", "title": "How to access a dynamically created class within another?", "body": "<p>I've no idea how I can access a dynamically created class within another one. The classes are stored in local variables and I want to avoid using constants instead since the classes are created within a method.</p>\n\n<pre><code>def clazzes_and_clazzes\n  clazz_one = Class.new do\n    def one; 'one'; end\n  end\n  puts clazz_one.new.one\n\n  clazz_two = Class.new do\n    def two\n      clazz_one.new.one + ' and ' + clazz_one.new.one\n    end\n  end\n  puts clazz_two.new.two\n\n  clazz_two\nend\n\nclazzes_and_clazzes\n</code></pre>\n\n<p>I expect the following output.</p>\n\n<pre><code>$ ruby snippet.rb\none\none and one\n</code></pre>\n\n<p>But the snippet above raises the following error message.</p>\n\n<pre><code>snippet.rb:9:in `two': undefined local variable or method `clazz_one' for #&lt;#&lt;Class:0x7f2fa401af10&gt;:0x7f2fa401ae98&gt; (NameError)\n    from snippet.rb:12:in `clazzes_and_clazzes'\n    from snippet.rb:15\n</code></pre>\n\n<p>How could I resolve the error?</p>\n"}, {"tags": ["ruby", "watir-webdriver", "page-object-gem"], "comments": [{"owner": {"reputation": 1410, "user_id": 3890924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uy8Gd.jpg?s=128&g=1", "display_name": "alannichols", "link": "https://stackoverflow.com/users/3890924/alannichols"}, "edited": false, "score": 0, "creation_date": 1458133126, "post_id": 36032645, "comment_id": 59721687, "body": "Hard to be more helpful without having a play with the code, but you might want to look into using nested page objects - <a href=\"http://stackoverflow.com/questions/23663564/accessing-nested-divs-using-page-object-model\" title=\"accessing nested divs using page object model\">stackoverflow.com/questions/23663564/&hellip;</a>."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1458235276, "post_id": 36032645, "comment_id": 59781351, "body": "are you rolling your own page objects, or using one of a few existing gems for it, or what?  knowing that helps to answer this."}], "answers": [{"tags": [], "owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "is_accepted": false, "score": 1, "last_activity_date": 1458235286, "creation_date": 1458235286, "answer_id": 36067555, "question_id": 36032645, "link": "https://stackoverflow.com/questions/36032645/using-a-page-object-element-as-watir-method-is-it-possible/36067555#36067555", "title": "Using a page object element as watir &quot;method&quot;. Is it possible?", "body": "<p>The answer here depends a lot on how you implement page objects. If you are using your own code, or a library like <a href=\"http://www.cheezyworld.com/2011/07/29/introducing-page-object-gem/\" rel=\"nofollow\">Cheezy's Page-Object gem</a>, or the <a href=\"https://github.com/KualiCo/TestFactory\" rel=\"nofollow\">Test-Factory gem</a> Abe Heward and I cooked up when we were at rSmart (Abe did all the heavy lifting) </p>\n\n<p>I've not used Cheezy's gem enough to know if you can do it there, but I've defined methods similar to that when using page factory, it was pretty easy to do (although the docs don't give a good example of it, I should fix that) </p>\n"}], "owner": {"reputation": 143, "user_id": 4401921, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/44657da5a65bd21bfd9eebbb53624b4f?s=128&d=identicon&r=PG&f=1", "display_name": "skimisha", "link": "https://stackoverflow.com/users/4401921/skimisha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458235286, "creation_date": 1458123292, "question_id": 36032645, "link": "https://stackoverflow.com/questions/36032645/using-a-page-object-element-as-watir-method-is-it-possible", "title": "Using a page object element as watir &quot;method&quot;. Is it possible?", "body": "<p>I have this two page-object elements:</p>\n\n<pre><code>images(:new_number, src: '/static/images/sec_core/plus.png')\ntext_fields(:users, class: 'custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left ui-autocomplete-input')\n</code></pre>\n\n<p>And I am able to use it to click in the last image of a list of images in the HTML if I use the following code:</p>\n\n<pre><code>users_elements[user_index].parent.parent.parent[1].image_elements(:src =&gt; '/static/images/sec_core/plus.png').last.parent.when_present.click\n</code></pre>\n\n<p>Isn't it possible to reuse the page-object element somehow, as a watir \"method\" in order to avoid repeating code, something that's similar to this:     </p>\n\n<pre><code>users_elements[user_index].parent.parent.parent[1].new_number_elements.last.parent.when_present.click\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "dsl"], "answers": [{"comments": [{"owner": {"reputation": 3685, "user_id": 868273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5f15d325ebd0a236f9a4a2a5d2501c96?s=128&d=identicon&r=PG", "display_name": "okliv", "link": "https://stackoverflow.com/users/868273/okliv"}, "edited": false, "score": 0, "creation_date": 1458123768, "post_id": 36032665, "comment_id": 59715021, "body": "&quot;Keep it simple&quot; =) Looks like just what i need! Thanks a lot!"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 1, "last_activity_date": 1458123807, "last_edit_date": 1458123807, "creation_date": 1458123336, "answer_id": 36032665, "question_id": 36032467, "link": "https://stackoverflow.com/questions/36032467/implementing-a-dsl-on-ruby-to-generate-nested-folders-and-files-structure/36032665#36032665", "title": "Implementing a DSL on ruby to generate nested folders and files structure", "body": "<p>Not sure what you want <code>renew_path</code> to do. It should be as easy as this:</p>\n\n<pre><code>if block_given?\n  remembered_path = current_path\n  self.current_path = File.join(current_path, m.to_s)\n  FileUtils.mkdir_p current_path #create nested folder\n  instance_eval(&amp;block)\n  self.current_path = remembered_path\nelse\n</code></pre>\n"}], "owner": {"reputation": 3685, "user_id": 868273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5f15d325ebd0a236f9a4a2a5d2501c96?s=128&d=identicon&r=PG", "display_name": "okliv", "link": "https://stackoverflow.com/users/868273/okliv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 36032665, "answer_count": 1, "score": 0, "last_activity_date": 1458123807, "creation_date": 1458122838, "last_edit_date": 1458123194, "question_id": 36032467, "link": "https://stackoverflow.com/questions/36032467/implementing-a-dsl-on-ruby-to-generate-nested-folders-and-files-structure", "title": "Implementing a DSL on ruby to generate nested folders and files structure", "body": "<p>I'am developing custom DSL to generate folders and files in a tree-like structure</p>\n\n<h2>DSL (folders_tree.rb)</h2>\n\n<pre><code>FoldersFilesGenerator::DSL.setup do\n  root_folder_1 do\n\n    root_folder_file_1\n\n    subfolder_1 do\n\n     subfolder_file_1\n     subfolder_file_2\n\n       sub_subfolder do\n         ...\n       end\n    end\n\n    subfolder_2 do\n      ...\n    end\n    root_folder_file_2\n  end\n\n  root_folder_2 do\n    ...\n  end\nend\n</code></pre>\n\n<h2>Generator</h2>\n\n<pre><code>PATH = 'path/to/folders_tree.rb'\n\n#FoldersFilesGenerator::Generator.new.generate\ndef generate\n  instance_eval(File.read(PATH), File.basename(PATH), 0)\nend\n</code></pre>\n\n<h2>DSL processor</h2>\n\n<pre><code>module FoldersFilesGenerator\n  class DSL\n\n    attr_accessor :current_path\n\n    def self.setup(*args, &amp;block)\n      new.instance_eval &amp;block\n    end\n\n    def initialize\n      @current_path = 'initial/root/folder'\n    end\n\n    def method_missing(m, *args, &amp;block)\n      if block_given?\n        #need help here\n        self.current_path = renew_path(@current_path)\n        FileUtils.mkdir_p current_path #create nested folder\n        instance_eval(&amp;block)\n      else\n        FileCreator.create(m, @current_path) #create file on a current tree level\n      end\n    end\n\n\n  private\n\n  def renew_path(current_path)\n\n  end\n\n  end\nend\n</code></pre>\n\n<p>I assume that my working path changes only when i dive deeper or emerge over my DSL blocks tree structure so i need to reassign my <code>current_path</code> there with a <code>renew_path</code> method, but i totally messed my code here. Please help.</p>\n\n<p>The solution can be completely different. All I need that my DSL works like i described.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1458122282, "post_id": 36032125, "comment_id": 59713916, "body": "It should be <b>day.lectures</b> as your are inside the iterator with <b>day</b> variable"}, {"owner": {"reputation": 131, "user_id": 6015495, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/28317f32e10284a7600c8e3f9e32622a?s=128&d=identicon&r=PG&f=1", "display_name": "runchu", "link": "https://stackoverflow.com/users/6015495/runchu"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1458126866, "post_id": 36032125, "comment_id": 59717183, "body": "yes, but it is just an example"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1458128346, "post_id": 36032125, "comment_id": 59718230, "body": "What do you mean, doesn&#39;t work?"}, {"owner": {"reputation": 2888, "user_id": 1806803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2a9eacd29aca2e5f9829fcbbd3fe552?s=128&d=identicon&r=PG", "display_name": "2called-chaos", "link": "https://stackoverflow.com/users/1806803/2called-chaos"}, "edited": false, "score": 0, "creation_date": 1458134938, "post_id": 36032125, "comment_id": 59723231, "body": "You should provide a proper error especially if you don&#39;t provide the actual code but &quot;just an example&quot;... The error should show you in which directories it tried to find the file which should solve your problem."}, {"owner": {"reputation": 131, "user_id": 6015495, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/28317f32e10284a7600c8e3f9e32622a?s=128&d=identicon&r=PG&f=1", "display_name": "runchu", "link": "https://stackoverflow.com/users/6015495/runchu"}, "edited": false, "score": 0, "creation_date": 1458148720, "post_id": 36032125, "comment_id": 59734077, "body": "There is no error here..yet. I just do not know how to iterate a model(1) under the iteration of another model(2), and model 1 belongs to model 2."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 6015495, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/28317f32e10284a7600c8e3f9e32622a?s=128&d=identicon&r=PG&f=1", "display_name": "runchu", "link": "https://stackoverflow.com/users/6015495/runchu"}, "edited": false, "score": 0, "creation_date": 1458124074, "post_id": 36032208, "comment_id": 59715245, "body": "It is reasonable but when I run it comes out: ActionView::MissingTemplate in Day#index. I already have _lecture.html.erb"}, {"owner": {"reputation": 736, "user_id": 5857450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8a57b69174426b5faea201c3f8e3ca4?s=128&d=identicon&r=PG&f=1", "display_name": "Jawad Khawaja", "link": "https://stackoverflow.com/users/5857450/jawad-khawaja"}, "reply_to_user": {"reputation": 131, "user_id": 6015495, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/28317f32e10284a7600c8e3f9e32622a?s=128&d=identicon&r=PG&f=1", "display_name": "runchu", "link": "https://stackoverflow.com/users/6015495/runchu"}, "edited": false, "score": 0, "creation_date": 1458130991, "post_id": 36032208, "comment_id": 59720002, "body": "Which file did you write the above code in? And what is the url of the page you are trying to view?"}, {"owner": {"reputation": 131, "user_id": 6015495, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/28317f32e10284a7600c8e3f9e32622a?s=128&d=identicon&r=PG&f=1", "display_name": "runchu", "link": "https://stackoverflow.com/users/6015495/runchu"}, "edited": false, "score": 0, "creation_date": 1458149447, "post_id": 36032208, "comment_id": 59734585, "body": "Above code is in &#39;day/index.html.erb&#39;; &#39;lecture/_lecture.html.erb&#39; for render; try to view: localhost:3000/days"}, {"owner": {"reputation": 736, "user_id": 5857450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8a57b69174426b5faea201c3f8e3ca4?s=128&d=identicon&r=PG&f=1", "display_name": "Jawad Khawaja", "link": "https://stackoverflow.com/users/5857450/jawad-khawaja"}, "reply_to_user": {"reputation": 131, "user_id": 6015495, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/28317f32e10284a7600c8e3f9e32622a?s=128&d=identicon&r=PG&f=1", "display_name": "runchu", "link": "https://stackoverflow.com/users/6015495/runchu"}, "edited": false, "score": 0, "creation_date": 1458188964, "post_id": 36032208, "comment_id": 59751325, "body": "Folders in your view directory should follow be plural: <code>days&#47;index.html.erb</code> &amp; <code>lectures&#47;_lecture.html.erb</code>. Similar to how your controllers are named (Also plural)."}], "tags": [], "owner": {"reputation": 736, "user_id": 5857450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8a57b69174426b5faea201c3f8e3ca4?s=128&d=identicon&r=PG&f=1", "display_name": "Jawad Khawaja", "link": "https://stackoverflow.com/users/5857450/jawad-khawaja"}, "is_accepted": true, "score": 1, "last_activity_date": 1458122567, "last_edit_date": 1458122567, "creation_date": 1458122218, "answer_id": 36032208, "question_id": 36032125, "link": "https://stackoverflow.com/questions/36032125/how-can-i-list-a-model-when-it-belongs-to-a-another-model-in-rails/36032208#36032208", "title": "How can I list a model when it belongs to a another model in rails?", "body": "<p>Remove <code>@</code> from your <code>@day</code> instance so that the line is</p>\n\n<pre><code>&lt;%= render day.lectures %&gt;\n</code></pre>\n\n<p>You're inside the iteration of <code>@days</code> and each day is referenced as <code>day</code></p>\n"}], "owner": {"reputation": 131, "user_id": 6015495, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/28317f32e10284a7600c8e3f9e32622a?s=128&d=identicon&r=PG&f=1", "display_name": "runchu", "link": "https://stackoverflow.com/users/6015495/runchu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 36032208, "answer_count": 1, "score": -3, "last_activity_date": 1458128274, "creation_date": 1458121994, "question_id": 36032125, "link": "https://stackoverflow.com/questions/36032125/how-can-i-list-a-model-when-it-belongs-to-a-another-model-in-rails", "title": "How can I list a model when it belongs to a another model in rails?", "body": "<p>I have two models: Day and Lecture, lecture belongs to day and day has many lectures, I want list all the lecture in each day:</p>\n\n<pre><code>&lt;% @days.each do |day| %&gt;\n&lt;tr&gt;\n  &lt;td&gt;&lt;%= day.name %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;%= day.date %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;%= link_to 'Destroy', day_path(day),\n                method: :delete,\n                data: { confirm: 'This will delete all the lectures in this day. Do you want to continue?' } %&gt;&lt;/td&gt;\n\n\n  &lt;br/&gt;\n  &lt;%= render @day.lectures %&gt;\n  &lt;br/&gt;\n&lt;/tr&gt;\n</code></pre>\n\n\n\n<p>but it does not work with '@day.lectures'.</p>\n\n<p>btw, i already have _lecture.html.erb file and it should be a problem of how to write it. If not, I can put on my routes or more information. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 2, "creation_date": 1458121676, "post_id": 36031977, "comment_id": 59713469, "body": "Just put <code>.to_a</code> on the end"}], "answers": [{"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 4, "last_activity_date": 1458122083, "creation_date": 1458122083, "answer_id": 36032160, "question_id": 36031977, "link": "https://stackoverflow.com/questions/36031977/how-to-convert-activerecord-relation-to-an-normal-array-in-rails/36032160#36032160", "title": "How to Convert ActiveRecord_Relation to an normal array in rails", "body": "<p>Relation has <code>to_a</code> method, which does exactly that. It is used internally for methods like <code>any?</code></p>\n"}, {"tags": [], "owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "is_accepted": false, "score": 4, "last_activity_date": 1458126065, "creation_date": 1458126065, "answer_id": 36033719, "question_id": 36031977, "link": "https://stackoverflow.com/questions/36031977/how-to-convert-activerecord-relation-to-an-normal-array-in-rails/36033719#36033719", "title": "How to Convert ActiveRecord_Relation to an normal array in rails", "body": "<p>If you need an array of one or more model attributes for your relation, then you can just use <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pluck\" rel=\"nofollow\">ActiveRecord::Calculations#pluck</a>.</p>\n\n<p>From the docs:</p>\n\n<pre><code>Person.pluck(:id)\n# SELECT people.id FROM people\n# =&gt; [1, 2, 3]\n\nPerson.pluck(:id, :name)\n# SELECT people.id, people.name FROM people\n# =&gt; [[1, 'David'], [2, 'Jeremy'], [3, 'Jose']]\n</code></pre>\n\n<p>And there's more what you can do.</p>\n"}], "owner": {"reputation": 49, "user_id": 5837146, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qNM76.jpg?s=128&g=1", "display_name": "Ahkshay Ravi", "link": "https://stackoverflow.com/users/5837146/ahkshay-ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3129, "favorite_count": 0, "accepted_answer_id": 36032160, "answer_count": 2, "score": 0, "last_activity_date": 1458126065, "creation_date": 1458121635, "question_id": 36031977, "link": "https://stackoverflow.com/questions/36031977/how-to-convert-activerecord-relation-to-an-normal-array-in-rails", "title": "How to Convert ActiveRecord_Relation to an normal array in rails", "body": "<p>I have an model which returns an active record relation. How to convert this active record relation into an normal ruby array?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "axlsx"], "answers": [{"tags": [], "owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "is_accepted": false, "score": 0, "last_activity_date": 1458122520, "creation_date": 1458122520, "answer_id": 36032334, "question_id": 36031963, "link": "https://stackoverflow.com/questions/36031963/merging-cells-based-on-repeated-values-in-spreadsheet-using-axlsx-in-ruby-on-rai/36032334#36032334", "title": "Merging cells based on repeated values in spreadsheet using axlsx in ruby on rails", "body": "<p>The first question is how you get this data?</p>\n\n<p>If you take it from database you cat use <code>group_by</code> method for grouping by <code>students_name</code></p>\n\n<p>If all your data came from file, you may parse it in memory by parts. I think you will not have problems with parsing it by parts in different files. (like Ted, John, Lily, etc) and bundle it after. Of course it will be very slow, but it will work</p>\n\n<p>Unfortunately, your task is not full, and, I think, it is the fullest answer that you can get with this incoming data</p>\n"}], "owner": {"reputation": 1, "user_id": 4429273, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UQqVVAaavfw/AAAAAAAAAAI/AAAAAAAAABI/vzhII9nQZhg/photo.jpg?sz=128", "display_name": "Prerana Paudel", "link": "https://stackoverflow.com/users/4429273/prerana-paudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458122520, "creation_date": 1458121612, "question_id": 36031963, "link": "https://stackoverflow.com/questions/36031963/merging-cells-based-on-repeated-values-in-spreadsheet-using-axlsx-in-ruby-on-rai", "title": "Merging cells based on repeated values in spreadsheet using axlsx in ruby on rails", "body": "<p>I have been using axlsx gem in ruby for exporting data in spreadsheet file. I have more than 1000 of rows of data. Each row of data are the records from the database and has a unique id. I have already exported the records in a spreadsheet file which is in following format.</p>\n\n<pre><code>Students_name Subject Marks Remark\n Ted          Maths   80    Pass\n Lily         Maths   90    Pass\n John         Science 30    Fail\n Ted          Science 30    Fail\n John         English 70    Pass\n</code></pre>\n\n<p>Here, the data in column students_name are being repeated.I want to change the view of the spreadsheet file into the following format.</p>\n\n<pre><code>Students_name Subject Marks Remark\n Ted          Maths   80    Pass\n              Science 30    Fail\n\n John         Science 30    Fail\n              English 70    Pass\n\n Lily         Maths   90    Pass\n</code></pre>\n\n<p>I have 1000s of data so i cant sort the data based on repeated values and merge the cells manually. How can I solve this?</p>\n"}, {"tags": ["ruby", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1458126075, "post_id": 36031689, "comment_id": 59716636, "body": "have you tried something like <a href=\"https://github.com/jnicklas/capybara#selecting-the-driver\" rel=\"nofollow noreferrer\">github.com/jnicklas/capybara#selecting-the-driver</a> ? <code>Capybara.current_driver =</code>"}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1458130622, "post_id": 36031689, "comment_id": 59719742, "body": "I tried that along with Capybara.default_driver. No joy"}], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 0, "creation_date": 1458216773, "post_id": 36040161, "comment_id": 59767016, "body": "Thanks Tom, that&#39;s a big help"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1458142239, "creation_date": 1458142239, "answer_id": 36040161, "question_id": 36031689, "link": "https://stackoverflow.com/questions/36031689/changing-default-drivers-using-capybara-per-scenario/36040161#36040161", "title": "Changing default drivers using Capybara per scenario", "body": "<p>Capybara already provides this behavior <a href=\"https://github.com/jnicklas/capybara/blob/master/lib/capybara/cucumber.rb\" rel=\"nofollow\">here</a> . To use it you just need to require it and register a driver with the tag name you want to use. This would usually be in your env.rb/custom_env.rb</p>\n\n<pre><code>require 'capybara/cucumber'\n\nCapybara.register_driver :chrome do |app|\n  Capybara::Selenium::Driver.new(app,\n    browser: :chrome,\n    ...\n  )\nend\n</code></pre>\n\n<p>The important thing is the name you use to register the driver has to match the tag used (in this case @chrome).  It also shows you shouldn't be changing Capybara.default_driver on a test by test basis, that's what Capybara.current_driver is for.  You also shouldn't be registering a new driver every scenario, register_driver is meant to be called once for each driver configuration you will need and then referenced by name later.</p>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "accepted_answer_id": 36040161, "answer_count": 1, "score": 0, "last_activity_date": 1458142239, "creation_date": 1458121017, "question_id": 36031689, "link": "https://stackoverflow.com/questions/36031689/changing-default-drivers-using-capybara-per-scenario", "title": "Changing default drivers using Capybara per scenario", "body": "<p>I have written a small block that will launch Google Chrome when I set a tag <code>@chrome</code> above a scenario within a feature file. </p>\n\n<pre><code>Before ('@chrome') do\n\nCapybara.default_driver = :selenium\n      Capybara.register_driver :selenium do |app|\n      Capybara::Selenium::Driver.new(app,\n        :browser =&gt; :chrome,\n        desired_capabilities: {\n        'chromeOptions' =&gt; {\n          'args' =&gt; %w{ window-size=1920,1080 }\n        }\n      }\n    )\n      end\n  end\n</code></pre>\n\n<p>The problem I have is that all subsequent scenarios within the feature file will also run in Chrome, even when the tag isn't set for them.</p>\n\n<p>Is there a way to add to it to say revert back to Poltergeist once I'm done. I've tried the following but it didn't work:</p>\n\n<pre><code>  After do |scenario|\n\n\n if @chrome == true\n    Capybara.register_driver = :poltergeist\n          Capybara::Poltergeist::Driver.new(\n              app,\n              phantomjs_options: ['--ignore-ssl-errors=yes', '--ssl-protocol=TLSv1'],\n              window_size: [1280, 1024],\n              js_errors: false,\n              debug: false\n          )\n    end\n  end\n</code></pre>\n\n<p>Thanks in advance for any help you might have</p>\n"}, {"tags": ["android", "ruby", "google-api", "google-api-ruby-client"], "comments": [{"owner": {"reputation": 1226, "user_id": 536138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942df288a7d01060f791117f03c54357?s=128&d=identicon&r=PG", "display_name": "St&#233;phane", "link": "https://stackoverflow.com/users/536138/st%c3%a9phane"}, "edited": false, "score": 1, "creation_date": 1458123652, "post_id": 36031663, "comment_id": 59714937, "body": "After a few tests with our Google accounts, it seems that <i>original_player_id</i> contains the Google+ user identifier (probably only if he used to authenticate with Google+ on our app). And <i>player_id</i> contains the Google Play Game player id (maybe not if we continue to request the Google+ authorization, but confirmed in our test  not requesting this permission)"}], "owner": {"reputation": 1226, "user_id": 536138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942df288a7d01060f791117f03c54357?s=128&d=identicon&r=PG", "display_name": "St&#233;phane", "link": "https://stackoverflow.com/users/536138/st%c3%a9phane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1458125143, "creation_date": 1458120945, "last_edit_date": 1458125143, "question_id": 36031663, "link": "https://stackoverflow.com/questions/36031663/what-is-exactly-the-original-player-id-attribute-in-the-player-resource-object-o", "title": "What is exactly the original_player_id attribute in the Player resource object of Google Api Ruby Client?", "body": "<p>The question concerns the official <a href=\"https://developers.google.com/api-client-library/ruby/\" rel=\"nofollow\">Google API Ruby client</a> (and <a href=\"https://github.com/google/google-api-ruby-client\" rel=\"nofollow\">https://github.com/google/google-api-ruby-client</a>)</p>\n\n<p>We can see in its documentation that a Player resource contains an <a href=\"http://www.rubydoc.info/gems/google-api-client/0.9.2/Google/Apis/GamesV1/Player#original_player_id-instance_method\" rel=\"nofollow\"><code>original_player_id</code></a> attribute with this description:</p>\n\n<blockquote>\n  <p>The player ID that was used for this player the first time they signed into the game in question. This is only populated for calls to player.get for the requesting player, only if the player ID has subsequently changed, and only to clients that support remapping player IDs. Corresponds to the JSON property originalPlayerId</p>\n</blockquote>\n\n<p>But when I look in <a href=\"https://developers.google.com/games/services/web/api/players#resource-representations\" rel=\"nofollow\">the Google API documentation</a>, I can't find any reference to this attribute. </p>\n\n<p>So what is this original player id and what are the cases where we need to use it? Is there more detailed documentation on this id?</p>\n\n<p>Is it linked to this Google news: \"<a href=\"http://android-developers.blogspot.fr/2016/01/play-games-permissions-are-changing-in.html?\" rel=\"nofollow\">Play Games Permissions are changing in 2016</a>\"?</p>\n"}, {"tags": ["ruby", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1458121189, "post_id": 36031237, "comment_id": 59713089, "body": "It would perhaps help if you could show the HTML which triggers this error ;-)"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1458133014, "post_id": 36031237, "comment_id": 59721590, "body": "Is the <code>ul</code> element being reloaded? For example, you click one of the paging links, check if the <code>ul</code> is present, the <code>ul</code> starts to be reloaded, you then try to retrieve it again before it has finished reloading?"}, {"owner": {"reputation": 93, "user_id": 2302493, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/73854df554820172edbf813ea535f7b6?s=128&d=identicon&r=PG", "display_name": "Slava Chiri\u021ba", "link": "https://stackoverflow.com/users/2302493/slava-chiri%c8%9ba"}, "edited": false, "score": 0, "creation_date": 1458134229, "post_id": 36031237, "comment_id": 59722567, "body": "Thank you for your reply, Justin Ko. No, I click on <code>ul</code> elements only after mentioned statements"}], "answers": [{"tags": [], "owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "is_accepted": false, "score": 0, "last_activity_date": 1458235360, "last_edit_date": 1458235360, "creation_date": 1458231537, "answer_id": 36066173, "question_id": 36031237, "link": "https://stackoverflow.com/questions/36031237/could-not-find-element/36066173#36066173", "title": "Could not find element", "body": "<p>Potentially something client side is re-rendering the page or the list element (as suggested by Justin Ko in comments).  I can suggest a couple of things you might try to troubleshoot this.</p>\n\n<p>1) enter the code a line at a time in IRB. use IRB to fire up a browser, navigate it manually to the page you want and then copy paste the code into the IRB command line. As this is slower than just running the script, this can expose lots of timing issues, and if you observe carefully you can sometimes see redraws etc.  Typically code that works when executed slower a line at a time in IRB but not within a script is a sign of a timing/sync problem. </p>\n\n<p>2) add some debugging code to watch the state of that element.  between the two lines of code you have, maybe add something like</p>\n\n<pre><code>30 times do\n  puts \"is the page-list present?: #{browser.ul(:class =&gt; \"page-list\").present?}\"\n  wait .1\nend \n</code></pre>\n\n<p>if code like that shows you anything but all trues, then client side javascript may be updating the DOM still</p>\n"}], "owner": {"reputation": 93, "user_id": 2302493, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/73854df554820172edbf813ea535f7b6?s=128&d=identicon&r=PG", "display_name": "Slava Chiri\u021ba", "link": "https://stackoverflow.com/users/2302493/slava-chiri%c8%9ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458235360, "creation_date": 1458119801, "last_edit_date": 1458121678, "question_id": 36031237, "link": "https://stackoverflow.com/questions/36031237/could-not-find-element", "title": "Could not find element", "body": "<p>I have the following piece of code:</p>\n\n<pre><code>if browser.ul(:class =&gt; \"page-list\").present? &amp;&amp; browser.ul(:class =&gt; \"page-list\").lis.last.text.to_i &gt; 1\n  pages = Nokogiri::HTML.fragment(browser.ul(:class =&gt; \"page-list\").html).css(\"a\").map { |link| link.text }\n</code></pre>\n\n<p>The <code>if</code> statement gives <code>true</code>, but <code>browser.ul(:class =&gt; \"page-list\")</code> in the next line returns:</p>\n\n<pre><code>unable to locate element, using {:class=&gt;\\\"page-list\\\", :tag_name=&gt;\\\"ul\\\"}\".\n</code></pre>\n\n<p>HTML:</p>\n\n<pre><code>&lt;div class=\"page-nav\"&gt;\n  &lt;a class=\"prev disabled\" onclick=\"return false\" href=\"#\"&gt;\n    &lt;span&gt;&lt;i&gt;&lt;/i&gt;&lt;/span&gt;\n  &lt;/a&gt;\n  &lt;ul class=\"page-list\"&gt;\n    &lt;li&gt;&lt;span&gt;1&lt;/span&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a href=\"javascript:submitCustomPagination('page', 2)\"&gt;2&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a href=\"javascript:submitCustomPagination('page', 3)\"&gt;3&lt;/a&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;a class=\"next\" href=\"javascript:submitCustomPagination('nextPage')\"&gt;\n    &lt;span&gt;Next&lt;i&gt;&lt;/i&gt;  &lt;/span&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Please explain how this is possible and how to fix it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "edited": false, "score": 0, "creation_date": 1458115381, "post_id": 36029576, "comment_id": 59709418, "body": "May be params[:skill] holds an array of skill tags?"}, {"owner": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "reply_to_user": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "edited": false, "score": 0, "creation_date": 1458117010, "post_id": 36029576, "comment_id": 59710369, "body": "I checked with tagged_with(&#39;ios&#39;). same error"}], "answers": [{"comments": [{"owner": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "edited": false, "score": 0, "creation_date": 1458118585, "post_id": 36030049, "comment_id": 59711278, "body": "I checked with tagged_with(&#39;ios&#39;). same error. One argument"}, {"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "reply_to_user": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "edited": false, "score": 0, "creation_date": 1458119483, "post_id": 36030049, "comment_id": 59711855, "body": "It&#39;s not what you pass to tagged_with, it&#39;s what tagged_with is calling quite_value with internally. Essentially the version of acts_as_taggable you are using is not compatible with rails-5."}, {"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "reply_to_user": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "edited": false, "score": 0, "creation_date": 1458143831, "post_id": 36030049, "comment_id": 59730468, "body": "Either you should reach out to the author of the gem for a fix, or search for a gem that is compatible (someone must have forked it and fixed it already), or fork it yourself and fix it or as the last resort monkey patch the issue in your own application."}, {"owner": {"reputation": 2362, "user_id": 2585189, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/572230673/picture?type=large", "display_name": "Jay Killeen", "link": "https://stackoverflow.com/users/2585189/jay-killeen"}, "edited": false, "score": 0, "creation_date": 1459303049, "post_id": 36030049, "comment_id": 60221043, "body": "I also have this same issue. I have found the issue logged on the gem on Github at <a href=\"https://github.com/mbleigh/acts-as-taggable-on/issues/741\" rel=\"nofollow noreferrer\">github.com/mbleigh/acts-as-taggable-on/issues/741</a>. I&#39;ll comment there."}], "tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": true, "score": 6, "last_activity_date": 1458115936, "creation_date": 1458115936, "answer_id": 36030049, "question_id": 36029576, "link": "https://stackoverflow.com/questions/36029576/agged-withparamsskill-argumenterror-wrong-number-of-arguments-given-2-ex/36030049#36030049", "title": "agged_with(params[:skill]) ArgumentError: wrong number of arguments (given 2, expected 1)", "body": "<p>Looks like <code>tagged_with</code> is calling <code>quote_value</code> internally, which is an <code>alias_method</code> for <code>sanitize</code>. </p>\n\n<p><code>sanitize</code> expects only one argument, but the <code>tagged_with</code> is calling <code>quote_value</code> with two arguments, which is causing the issue.</p>\n\n<p>Refer to <a href=\"https://github.com/mbleigh/acts-as-taggable-on/blob/master/lib%2Facts_as_taggable_on%2Ftaggable%2Fcore.rb#L87-L233\" rel=\"noreferrer\">acts_as_taggable</a>, <a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/sanitization.rb#L8-L11\" rel=\"noreferrer\">ActiveRecord::Sanitization</a> and the \n<a href=\"https://github.com/rails/rails/commit/268ee64e6362467fc6d2e54df703c620af78f5fb\" rel=\"noreferrer\">commit</a> that introduced this change.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 4471589, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/abb7d895b99a06277c9df9c9e45a6f83?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitrij", "link": "https://stackoverflow.com/users/4471589/dmitrij"}, "is_accepted": false, "score": 0, "last_activity_date": 1461842803, "last_edit_date": 1461842803, "creation_date": 1461841744, "answer_id": 36912874, "question_id": 36029576, "link": "https://stackoverflow.com/questions/36029576/agged-withparamsskill-argumenterror-wrong-number-of-arguments-given-2-ex/36912874#36912874", "title": "agged_with(params[:skill]) ArgumentError: wrong number of arguments (given 2, expected 1)", "body": "<p>They fixed this. Download from the <code>master</code> branch, in your Gemfile:  </p>\n\n<pre><code>gem 'acts-as-taggable-on', :github =&gt; 'mbleigh/acts-as-taggable-on', :branch =&gt; 'master'\n</code></pre>\n"}], "owner": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2239, "favorite_count": 0, "accepted_answer_id": 36030049, "answer_count": 2, "score": 0, "last_activity_date": 1461842803, "creation_date": 1458114482, "last_edit_date": 1458120383, "question_id": 36029576, "link": "https://stackoverflow.com/questions/36029576/agged-withparamsskill-argumenterror-wrong-number-of-arguments-given-2-ex", "title": "agged_with(params[:skill]) ArgumentError: wrong number of arguments (given 2, expected 1)", "body": "<p>I have issue with gem acts-as-taggable-on  in Rails 5 beta 3. </p>\n\n<p>\u200b<strong>project.rb</strong>\u200b:</p>\n\n<pre><code>class Project &lt; ActiveRecord::Base       \n  acts_as_taggable\n  acts_as_taggable_on :skills\nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>get 'tags/:skill', to: 'projects#index', as: :skill\n</code></pre>\n\n<p><strong>projects_controller.rb</strong>:</p>\n\n<pre><code>class ProjectsController &lt; ApplicationController\n  def index\n    if params[:category] &amp;&amp; Category.exists?(params[:category])\n      @category = Category.find(params[:category])\n      @projects = @category.projects.order(\"projects.created_at DESC\")    \n    elsif params[:skill]\n      @projects = Project.tagged_with(params[:skill])\n    else  \n      @projects = Project.all\n    end\n\n    @categories = Category.all\n  end\nend\n</code></pre>\n\n<p>On line <code>@projects = Project.tagged_with(params[:skill])</code> I get the following error: </p>\n\n<blockquote>\n  <p>ArgumentError: wrong number of arguments (given 2, expected 1) from\n  /usr/local/rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.beta3/lib/active_record/sanitization.rb:8:in\n  `sanitize'</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 4, "creation_date": 1458112787, "post_id": 36029005, "comment_id": 59708039, "body": "What&#39;s the logic behind the transformation?"}], "answers": [{"tags": [], "owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "is_accepted": false, "score": 3, "last_activity_date": 1458113223, "last_edit_date": 1458113223, "creation_date": 1458112794, "answer_id": 36029075, "question_id": 36029005, "link": "https://stackoverflow.com/questions/36029005/iterate-hash-of-arrays/36029075#36029075", "title": "Iterate hash of arrays", "body": "<p>While the <code>transpose</code> solution is very nice, it will error out when not all value arrays have the same number of elements. This will still work (replacing missing elements with <code>nil</code>):</p>\n\n<pre><code>h.values.reduce(:zip).map(&amp;:flatten)\n#=&gt; [[\"111\", \"1\", \"11\"], [\"222\", \"2\", \"22\"], [\"333\", \"3\", \"33\"]]\n</code></pre>\n\n<p>If you know that your input is well-formed, go for the <code>transpose</code> option.</p>\n"}, {"comments": [{"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 0, "creation_date": 1458113121, "post_id": 36029114, "comment_id": 59708237, "body": "Alas this will fail if one of the value arrays doesn&#39;t have the correct number of elements (<code>IndexError: element size differs</code>)."}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 0, "creation_date": 1458113356, "post_id": 36029114, "comment_id": 59708359, "body": "true. Since OP did not define such cases, I just went with posted example. But sure thanks for pointing conditions, I should specify this in my answer :)"}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 0, "creation_date": 1458113460, "post_id": 36029114, "comment_id": 59708416, "body": "Great, thanks for the edit :) You&#39;re right about the specifications, I just wanted to point it out since input may not stay well-defined over the course of the app&#39;s lifetime."}, {"owner": {"reputation": 29, "user_id": 5723086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/666a73053aa6103f8d35e2aea2e41d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Ankita Agrawal", "link": "https://stackoverflow.com/users/5723086/ankita-agrawal"}, "edited": false, "score": 0, "creation_date": 1458192603, "post_id": 36029114, "comment_id": 59752579, "body": "Thanks Shivam, I have done this with some other way but you have suggested the simplest way."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 5, "last_activity_date": 1458113413, "last_edit_date": 1458113413, "creation_date": 1458112905, "answer_id": 36029114, "question_id": 36029005, "link": "https://stackoverflow.com/questions/36029005/iterate-hash-of-arrays/36029114#36029114", "title": "Iterate hash of arrays", "body": "<p>Assuming every value in Hash is an Array of same length, <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-transpose\" rel=\"nofollow\"><code>transpose</code></a> array <code>hash.values</code> :</p>\n\n<pre><code>hash = {\"title\"=&gt;[\"111\", \"222\", \"333\"], \"rating\"=&gt;[\"1\", \"2\", \"3\"], \"reviews\"=&gt;[\"11\", \"22\", \"33\"]}\nhash.values\n#=&gt; [[\"111\", \"222\", \"333\"], [\"1\", \"2\", \"3\"], [\"11\", \"22\", \"33\"]]\nhash.values.transpose\n#=&gt; [[\"111\", \"1\", \"11\"], [\"222\", \"2\", \"22\"], [\"333\", \"3\", \"33\"]]\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5723086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/666a73053aa6103f8d35e2aea2e41d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Ankita Agrawal", "link": "https://stackoverflow.com/users/5723086/ankita-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1458121728, "creation_date": 1458112567, "question_id": 36029005, "link": "https://stackoverflow.com/questions/36029005/iterate-hash-of-arrays", "title": "Iterate hash of arrays", "body": "<pre><code>{\"title\"=&gt;[\"111\", \"222\", \"333\"], \"rating\"=&gt;[\"1\", \"2\", \"3\"], \"reviews\"=&gt;[\"11\", \"22\", \"33\"]}\n</code></pre>\n\n<p><br>\nI have data with me from the form in the above format.\n<br></p>\n\n<p>Now I want to iterate through this loop so that I can get data in below sequence as per my requirement:</p>\n\n<pre><code>[\"111\", \"1\", \"11\"], [\"222\", \"2\", \"22\"], [\"333\", \"3\", \"33\"]\n</code></pre>\n\n<p>Actually I have to save each record in my database in the way so that a title, a rating and a review forms one row for my database table.\n<br>\nI have tried many possible solutions with 'each_with_index', key, value hash way, but no luck.\n<br>\nThanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 3, "creation_date": 1458111841, "post_id": 36028735, "comment_id": 59707583, "body": "Why are you using global variables with <code>$</code>? Pretty sure you don&#39;t need this; lose the <code>$</code>! Note that Ruby is <i>not</i> Perl or PHP ;-) (This is, by the way, also your error)."}, {"owner": {"reputation": 93, "user_id": 6044397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/6unkF.jpg?s=128&g=1", "display_name": "chinm3", "link": "https://stackoverflow.com/users/6044397/chinm3"}, "edited": false, "score": 0, "creation_date": 1458112031, "post_id": 36028735, "comment_id": 59707678, "body": "ok thanks :) now i&#39;m getting error: undefined method `emf_assets&#39;  lol"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 3, "creation_date": 1458112133, "post_id": 36028735, "comment_id": 59707744, "body": "what is <code>emf_assets</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1458119620, "post_id": 36028735, "comment_id": 59711952, "body": "How do your relations and models look like?"}], "answers": [{"tags": [], "owner": {"reputation": 447, "user_id": 5753949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a5c4f683bb89ebfa95400d00173c28?s=128&d=identicon&r=PG&f=1", "display_name": "kyle", "link": "https://stackoverflow.com/users/5753949/kyle"}, "is_accepted": false, "score": 0, "last_activity_date": 1458111903, "creation_date": 1458111903, "answer_id": 36028811, "question_id": 36028735, "link": "https://stackoverflow.com/questions/36028735/trying-to-get-a-total-ruby/36028811#36028811", "title": "Trying to get a total - Ruby", "body": "<p>What is the <code>e</code> in <code>e.emf_assets</code>? If you mean <code>$e</code>, you aren't allowed to drop the <code>$</code>. In Ruby, a <code>$</code> at the start of a variable name indicates a global variable. If you aren't using <code>$e</code> outside of this function anyway, it would be better to call it simply <code>e</code>, so that it wouldn't be visible outside of the function. Regardless, you're getting an error because <code>$e</code> refers to a global, and <code>e</code> refers to a separate (undefined) local variable.</p>\n"}, {"comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 1, "creation_date": 1458112863, "post_id": 36028848, "comment_id": 59708085, "body": "...for introducing functional programming to someone who can&#39;t even look at two variables and understand that they are different."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1458114442, "post_id": 36028848, "comment_id": 59708922, "body": "Why is this downvoted? Besides naming (total_upgrade_cost) this should work."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1458119498, "post_id": 36028848, "comment_id": 59711868, "body": "It&#39;s unlikely that <code>Experience.all.emf_assets</code> works."}, {"owner": {"reputation": 93, "user_id": 6044397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/6unkF.jpg?s=128&g=1", "display_name": "chinm3", "link": "https://stackoverflow.com/users/6044397/chinm3"}, "edited": false, "score": 0, "creation_date": 1458127115, "post_id": 36028848, "comment_id": 59717367, "body": "ty babar! seems like the doable way is  too complicated for me xdd"}], "tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": false, "score": -2, "last_activity_date": 1458112049, "creation_date": 1458112049, "answer_id": 36028848, "question_id": 36028735, "link": "https://stackoverflow.com/questions/36028735/trying-to-get-a-total-ruby/36028848#36028848", "title": "Trying to get a total - Ruby", "body": "<p>This is not PHP. <code>$</code> sign isn't required everywhere. You've used <code>$</code> with one <code>e</code> and left another empty, that's why the error.</p>\n\n<p>This code should work:</p>\n\n<pre><code>def totalUpgradeCost\n  e = Experience.all\n  tuc = 0\n  e.emf_assets.each do |i|\n    tuc += i.upgrade_cost\n  end\n\n  return tuc\nend\n</code></pre>\n\n<p>This is doable in shorter way:</p>\n\n<pre><code>def totalUpgradeCost\n  e = Experience.all\n  e.emf_assets.inject(0) {|sum, i| sum += i.upgrade_cost}\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 6044397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/6unkF.jpg?s=128&g=1", "display_name": "chinm3", "link": "https://stackoverflow.com/users/6044397/chinm3"}, "edited": false, "score": 0, "creation_date": 1458129132, "post_id": 36029665, "comment_id": 59718689, "body": "@Stefan, ty :) I have one-to-many (exp &gt; assets). So i was getting error Nil can&#39;t be coerced into Fixnum (TypeError). This somehow fixed it                   all_experiences.each do |experience|           experience.emf_assets.each do |asset|         if asset.upgrade_cost != nil            total += asset.upgrade_cost         else           asset.upgrade_cost += 0         end       end     end"}, {"owner": {"reputation": 93, "user_id": 6044397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/6unkF.jpg?s=128&g=1", "display_name": "chinm3", "link": "https://stackoverflow.com/users/6044397/chinm3"}, "edited": false, "score": 0, "creation_date": 1458129350, "post_id": 36029665, "comment_id": 59718850, "body": "it&#39;s adding total cost nicely now :O"}, {"owner": {"reputation": 93, "user_id": 6044397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/6unkF.jpg?s=128&g=1", "display_name": "chinm3", "link": "https://stackoverflow.com/users/6044397/chinm3"}, "edited": false, "score": 0, "creation_date": 1458136015, "post_id": 36029665, "comment_id": 59724189, "body": "Thanks! :) That would solve my answer. I didn&#39;t know there was to_i. Is that to Int? I was trying to complicate things by doing an if statement."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 93, "user_id": 6044397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/6unkF.jpg?s=128&g=1", "display_name": "chinm3", "link": "https://stackoverflow.com/users/6044397/chinm3"}, "edited": false, "score": 0, "creation_date": 1458136553, "post_id": 36029665, "comment_id": 59724677, "body": "Yes, <code>to_i</code> tries to translate the value into an integer. <code>nil.to_i</code> returns <code>0</code>"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1458132573, "last_edit_date": 1458132573, "creation_date": 1458114758, "answer_id": 36029665, "question_id": 36028735, "link": "https://stackoverflow.com/questions/36028735/trying-to-get-a-total-ruby/36029665#36029665", "title": "Trying to get a total - Ruby", "body": "<p>I am assuming that <code>emf_assets</code> are associated (via <code>has_many</code>) with an experience. That said I think the following could work for you:</p>\n\n<pre><code>def total_upgrade_cost\n  total = 0                               # use a more descriptive variable names\n  all_experiences = Experience.all        \n\n  all_experiences.each do |experience|    # iterate over each `experiment`\n    experience.emf_assets.each do |asset| # load `emf_assets` for each `experiment`\n\n      # add the `upgrade_cost` (which might be `nil`) to `total`\n      total += asset.upgrade_cost.to_i    \n    end\n  end\n\n  total                                   # no need for an explicit `return`\nend\n</code></pre>\n\n<p>Please note that this might work for smaller numbers of <code>experiences</code> and <code>emf_assets</code>, but in a next step performance will benefit from some optimization. But I think that optimization is out of the scope of this question at the moment. You will need to avoid the N+1 query problem and it might makes sense to do the whole calculation in your database.</p>\n"}], "owner": {"reputation": 93, "user_id": 6044397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/6unkF.jpg?s=128&g=1", "display_name": "chinm3", "link": "https://stackoverflow.com/users/6044397/chinm3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1458132573, "creation_date": 1458111593, "question_id": 36028735, "link": "https://stackoverflow.com/questions/36028735/trying-to-get-a-total-ruby", "title": "Trying to get a total - Ruby", "body": "<p>I'm trying to get the total cost in one of my field called \"upgrade_cost\" and store that in a variable called $tuc</p>\n\n<pre><code>  def totalUpgradeCost\n    $e = Experience.all\n      $tuc = 0\n      (e.emf_assets).each do |i|\n        i.upgrade_cost += $tuc\n      end\n    return $tuc\n  end\n</code></pre>\n\n<p>I'm getting some error undefined local variable or method `e', new to ruby. Anyone help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bash"], "comments": [{"owner": {"reputation": 967, "user_id": 3721985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa381fb6c99cb7b84fdb25e6f6aafb4?s=128&d=identicon&r=PG", "display_name": "Rohit Jangid", "link": "https://stackoverflow.com/users/3721985/rohit-jangid"}, "edited": false, "score": 0, "creation_date": 1458113135, "post_id": 36028657, "comment_id": 59708244, "body": "Do you need to execute this ruby script when you open your shell or you need to run this script after running the rails console? Moreover, do you need to run this script with rails application or standalone ruby interpreter?"}, {"owner": {"reputation": 1, "user_id": 4658006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3kE6TwVDhDk/AAAAAAAAAAI/AAAAAAAABVo/yZT4llwsD_Y/photo.jpg?sz=128", "display_name": "Sirish Aditya", "link": "https://stackoverflow.com/users/4658006/sirish-aditya"}, "reply_to_user": {"reputation": 967, "user_id": 3721985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa381fb6c99cb7b84fdb25e6f6aafb4?s=128&d=identicon&r=PG", "display_name": "Rohit Jangid", "link": "https://stackoverflow.com/users/3721985/rohit-jangid"}, "edited": false, "score": 0, "creation_date": 1458113946, "post_id": 36028657, "comment_id": 59708660, "body": "I am trying to set up a cron to invoke a particular method in my rails app. For that, I&#39;m trying to load the entire code into the rails console and then invoke the method from the script, so that I can schedule it."}, {"owner": {"reputation": 967, "user_id": 3721985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa381fb6c99cb7b84fdb25e6f6aafb4?s=128&d=identicon&r=PG", "display_name": "Rohit Jangid", "link": "https://stackoverflow.com/users/3721985/rohit-jangid"}, "edited": false, "score": 0, "creation_date": 1458114111, "post_id": 36028657, "comment_id": 59708740, "body": "Why don&#39;t you try <a href=\"http://guides.rubyonrails.org/command_line.html#rails-runner\" rel=\"nofollow noreferrer\">rails runner</a> for the same.  Or you could use <a href=\"https://github.com/javan/whenever\" rel=\"nofollow noreferrer\">whenever</a> gem as well."}, {"owner": {"reputation": 1, "user_id": 4658006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3kE6TwVDhDk/AAAAAAAAAAI/AAAAAAAABVo/yZT4llwsD_Y/photo.jpg?sz=128", "display_name": "Sirish Aditya", "link": "https://stackoverflow.com/users/4658006/sirish-aditya"}, "reply_to_user": {"reputation": 967, "user_id": 3721985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa381fb6c99cb7b84fdb25e6f6aafb4?s=128&d=identicon&r=PG", "display_name": "Rohit Jangid", "link": "https://stackoverflow.com/users/3721985/rohit-jangid"}, "edited": false, "score": 0, "creation_date": 1458115894, "post_id": 36028657, "comment_id": 59709717, "body": "Will try that. Thanks a lot for your help @RohitJangid"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4658006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3kE6TwVDhDk/AAAAAAAAAAI/AAAAAAAABVo/yZT4llwsD_Y/photo.jpg?sz=128", "display_name": "Sirish Aditya", "link": "https://stackoverflow.com/users/4658006/sirish-aditya"}, "edited": false, "score": 0, "creation_date": 1458112710, "post_id": 36028756, "comment_id": 59707994, "body": "Hi Rohit,  Even when I do as you suggest, the program&#39;s not being loaded. Only on exit am I seeing the message:  Loading production environment (Rails 3.2.21) irb(main):001:0&gt; exit In test_code.rb - test_code is running"}, {"owner": {"reputation": 967, "user_id": 3721985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa381fb6c99cb7b84fdb25e6f6aafb4?s=128&d=identicon&r=PG", "display_name": "Rohit Jangid", "link": "https://stackoverflow.com/users/3721985/rohit-jangid"}, "reply_to_user": {"reputation": 1, "user_id": 4658006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3kE6TwVDhDk/AAAAAAAAAAI/AAAAAAAABVo/yZT4llwsD_Y/photo.jpg?sz=128", "display_name": "Sirish Aditya", "link": "https://stackoverflow.com/users/4658006/sirish-aditya"}, "edited": false, "score": 0, "creation_date": 1458112866, "post_id": 36028756, "comment_id": 59708090, "body": "@SirishAditya Don&#39;t forget to remove that <code>load</code> command. Also source this changes to your running shell or restart your shell."}, {"owner": {"reputation": 1, "user_id": 4658006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3kE6TwVDhDk/AAAAAAAAAAI/AAAAAAAABVo/yZT4llwsD_Y/photo.jpg?sz=128", "display_name": "Sirish Aditya", "link": "https://stackoverflow.com/users/4658006/sirish-aditya"}, "edited": false, "score": 0, "creation_date": 1458113244, "post_id": 36028756, "comment_id": 59708306, "body": "Yes, I did that. This is my source.rb now: <code>code</code> source /etc/profile source /etc/default/fk-supplier-portal source /home/sirish.aditya/test_code.rb cd /usr/share/fk-supplier-portal NO_AUTH=Y bundle exec ruby-flo -S rails console echo &quot;$(ruby /home/sirish.aditya/test_code.rb)&quot; <code>code</code> And test_code.rb is  #!/usr/bin/ruby puts &quot;in test code- test_code is running&quot;  But still my output is:  Loading production environment (Rails 3.2.21) irb(main):001:0&gt; exit in test code- test_code is running"}, {"owner": {"reputation": 967, "user_id": 3721985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa381fb6c99cb7b84fdb25e6f6aafb4?s=128&d=identicon&r=PG", "display_name": "Rohit Jangid", "link": "https://stackoverflow.com/users/3721985/rohit-jangid"}, "reply_to_user": {"reputation": 1, "user_id": 4658006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3kE6TwVDhDk/AAAAAAAAAAI/AAAAAAAABVo/yZT4llwsD_Y/photo.jpg?sz=128", "display_name": "Sirish Aditya", "link": "https://stackoverflow.com/users/4658006/sirish-aditya"}, "edited": false, "score": 0, "creation_date": 1458207353, "post_id": 36028756, "comment_id": 59760154, "body": "@SirishAditya You could also try and write this command in <code>irbrc</code> file."}], "tags": [], "owner": {"reputation": 967, "user_id": 3721985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa381fb6c99cb7b84fdb25e6f6aafb4?s=128&d=identicon&r=PG", "display_name": "Rohit Jangid", "link": "https://stackoverflow.com/users/3721985/rohit-jangid"}, "is_accepted": false, "score": 0, "last_activity_date": 1458116026, "last_edit_date": 1458116026, "creation_date": 1458111675, "answer_id": 36028756, "question_id": 36028657, "link": "https://stackoverflow.com/questions/36028657/failing-to-open-rails-console-and-run-a-script/36028756#36028756", "title": "Failing to open rails console and run a script", "body": "<p>You could use this</p>\n\n<pre><code>echo \"$(ruby /home/sirish.aditya/test_code.rb)\"\n</code></pre>\n\n<p>As per you requirement, you could even try <a href=\"http://guides.rubyonrails.org/command_line.html#rails-runner\" rel=\"nofollow\">rails runner</a> or <a href=\"https://github.com/javan/whenever\" rel=\"nofollow\">whenever</a> gem.</p>\n"}, {"tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": false, "score": 0, "last_activity_date": 1458116527, "creation_date": 1458116527, "answer_id": 36030194, "question_id": 36028657, "link": "https://stackoverflow.com/questions/36028657/failing-to-open-rails-console-and-run-a-script/36030194#36030194", "title": "Failing to open rails console and run a script", "body": "<p>It doesn't work like that. As soon as the <code>rails console</code> is invoked either manually or through a <code>bash script</code>, you are essentially running a separate process which has no visibility into the subsequent statements (ex: load). </p>\n\n<p>When you quit the <code>rails console</code> then the process of execution comes back to the main process (which is <code>bash</code>) which does not have any idea what <code>load</code> means and is failing.</p>\n\n<p>You should either use <a href=\"http://guides.rubyonrails.org/command_line.html#rails-runner\" rel=\"nofollow\"><code>rails runner</code></a> or custom <a href=\"http://guides.rubyonrails.org/command_line.html#custom-rake-tasks\" rel=\"nofollow\"><code>rake task</code></a> for what you want to achieve.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4658006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3kE6TwVDhDk/AAAAAAAAAAI/AAAAAAAABVo/yZT4llwsD_Y/photo.jpg?sz=128", "display_name": "Sirish Aditya", "link": "https://stackoverflow.com/users/4658006/sirish-aditya"}, "is_accepted": false, "score": 0, "last_activity_date": 1458126840, "last_edit_date": 1458126840, "creation_date": 1458117867, "answer_id": 36030556, "question_id": 36028657, "link": "https://stackoverflow.com/questions/36028657/failing-to-open-rails-console-and-run-a-script/36030556#36030556", "title": "Failing to open rails console and run a script", "body": "<p>This is working:</p>\n\n<pre><code>cd /usr/share/&lt;my-app&gt;; source /etc/default/&lt;my-app&gt;; \ncat ~/test_code.rb  | NO_AUTH=Y bundle exec ruby-flo -S rails console\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4658006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3kE6TwVDhDk/AAAAAAAAAAI/AAAAAAAABVo/yZT4llwsD_Y/photo.jpg?sz=128", "display_name": "Sirish Aditya", "link": "https://stackoverflow.com/users/4658006/sirish-aditya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1458126840, "creation_date": 1458111306, "last_edit_date": 1458113438, "question_id": 36028657, "link": "https://stackoverflow.com/questions/36028657/failing-to-open-rails-console-and-run-a-script", "title": "Failing to open rails console and run a script", "body": "<p>I'm trying to open a Rails console and run a ruby script in it. The script works fine till the rails console opens and then nothing happens. Only when I exit the console manually, do I get an error message saying:</p>\n\n<pre><code>-bash: load: command not found\n</code></pre>\n\n<p>These are the commands I'm using:</p>\n\n<pre><code>source /etc/profile\nsource /etc/default/&lt;my-app&gt;\ncd /usr/share/&lt;my-app&gt;\nNO_AUTH=Y bundle exec ruby-flo -S rails console\nload '/home/sirish.aditya/test_code.rb'\n</code></pre>\n\n<p>How do I load the script into the console?</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "edited": false, "score": 0, "creation_date": 1458139397, "post_id": 36028389, "comment_id": 59726968, "body": "Ruby doesn&#39;t. AutoIT is probably the most stable way to handle file upload pop-up, so no reason to not use it."}, {"owner": {"reputation": 1, "user_id": 6069946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/570b8d2c042baae6d79b470546e38697?s=128&d=identicon&r=PG&f=1", "display_name": "V.Verma", "link": "https://stackoverflow.com/users/6069946/v-verma"}, "reply_to_user": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "edited": false, "score": 0, "creation_date": 1458145585, "post_id": 36028389, "comment_id": 59731820, "body": "Yes, but how to call AutoIt script from ruby script.                                   def upload_File_To_Pulse               find(:css, ClassName::LINK_UPLOAD_FILE_CSS).click       sleep 5       Runtime.getRuntime().exec(&quot;D:/AutoIt Scripts/FileUpload.exe&quot;)             sleep 5       find(:xpath, ClassName::BTN_PULSE_POST_XPATH).click      }   end                                                                                                       This is what i have used. but i get error like &quot; NoMethodError:        undefined method `Runtime&#39; for nil:NilClass"}, {"owner": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "edited": false, "score": 0, "creation_date": 1458148443, "post_id": 36028389, "comment_id": 59733882, "body": "I have used it years ago with this gem providing AutoIT bindings:  <a href=\"https://rubygems.org/gems/au3\" rel=\"nofollow noreferrer\">rubygems.org/gems/au3</a>. See if that simplifies it."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6069946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/570b8d2c042baae6d79b470546e38697?s=128&d=identicon&r=PG&f=1", "display_name": "V.Verma", "link": "https://stackoverflow.com/users/6069946/v-verma"}, "is_accepted": false, "score": 0, "last_activity_date": 1458199103, "creation_date": 1458199103, "answer_id": 36053896, "question_id": 36028389, "link": "https://stackoverflow.com/questions/36028389/how-to-handle-windows-upload-download-dialog-with-ruby-rspec/36053896#36053896", "title": "How to handle Windows upload/download Dialog with Ruby-Rspec", "body": "<p>I have found the solution. IO is a class that handles input/output file operations. Added this piece of code in my Ruby-Rspec script and it worked.</p>\n\n<pre><code>f = IO.popen(\"D:/AutoIt_Scripts/FileUpload.exe\")\n      puts f.readlines \n</code></pre>\n\n<p>In AutoIT file i had written </p>\n\n<pre><code>ControlFocus(\"Open\",\"\",\"Edit1\")\nControlSetText(\"Open\",\"\",\"Edit1\",\"D:\\Upl\\DemoUpload.xlsx\")\nControlClick(\"Open\",\"\",\"Button1\")\n</code></pre>\n\n<p>and saved it with .au3 extension.</p>\n"}], "owner": {"reputation": 1, "user_id": 6069946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/570b8d2c042baae6d79b470546e38697?s=128&d=identicon&r=PG&f=1", "display_name": "V.Verma", "link": "https://stackoverflow.com/users/6069946/v-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458199103, "creation_date": 1458110265, "question_id": 36028389, "link": "https://stackoverflow.com/questions/36028389/how-to-handle-windows-upload-download-dialog-with-ruby-rspec", "title": "How to handle Windows upload/download Dialog with Ruby-Rspec", "body": "<p>I have to upload a file using windows upload dialog. How can i achieve it using ruby-rspec. Shall i use 3rd party tool as AutoIT or does Ruby provide any way of handling Window's based dialogs. </p>\n\n<p>I have used this: </p>\n\n<pre><code>Class Upload\ndef upload_File() \n      filename= 'NewFile.xlsx'\n      file = File.join(Dir.pwd, filename)\n  @driver.find_element(:xpath,Upload::LINK_UPLOAD_FILE_XPATH).send_keys(file)\nend\n</code></pre>\n\n<p>But it doesn't work directly on dialogs. It works if there is a field where i can provide the location of file directly on the webpage itself but not on windows dialog for file selection.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1458109970, "post_id": 36028209, "comment_id": 59706690, "body": "run the rake routes command from the root of the application, The actual problem you then easily get and solved by user self."}, {"owner": {"reputation": 2073, "user_id": 2615428, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/50118dc915d8e41676b9a773217f6cab?s=128&d=identicon&r=PG", "display_name": "Suraj", "link": "https://stackoverflow.com/users/2615428/suraj"}, "reply_to_user": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1458110285, "post_id": 36028209, "comment_id": 59706843, "body": "its a spree app so <code>rake routes</code> gives all those results related to spree."}, {"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1458110374, "post_id": 36028209, "comment_id": 59706878, "body": "Hey, then there is a gem for managing the static pages in spree.<a href=\"https://github.com/spree-contrib/spree_static_content\" rel=\"nofollow noreferrer\">github.com/spree-contrib/spree_static_content</a> ,that will solved your problem."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1458110525, "post_id": 36028209, "comment_id": 59706958, "body": "The full path of the html file should be <code>app&#47;views&#47;pages&#47;signup.html.erb</code>. Can you confirm that you created the view file in that path?"}, {"owner": {"reputation": 2073, "user_id": 2615428, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/50118dc915d8e41676b9a773217f6cab?s=128&d=identicon&r=PG", "display_name": "Suraj", "link": "https://stackoverflow.com/users/2615428/suraj"}, "edited": false, "score": 0, "creation_date": 1458110810, "post_id": 36028209, "comment_id": 59707078, "body": "since Its a spree app so I put the file in <code>app&#47;views&#47;spree&#47;pages&#47;signup.html.erb</code>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1458111244, "post_id": 36028209, "comment_id": 59707281, "body": "Since you didn&#39;t add your controller into the spree namespace I think that is wrong. Please test the other location."}], "answers": [{"tags": [], "owner": {"reputation": 554, "user_id": 5824259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-a65ax7kXB68/AAAAAAAAAAI/AAAAAAAAAA8/q3fFbjFHsOs/photo.jpg?sz=128", "display_name": "Lymuel", "link": "https://stackoverflow.com/users/5824259/lymuel"}, "is_accepted": false, "score": 0, "last_activity_date": 1458111947, "creation_date": 1458111947, "answer_id": 36028827, "question_id": 36028209, "link": "https://stackoverflow.com/questions/36028209/static-pages-in-rails-app-missing-template/36028827#36028827", "title": "static pages in rails app missing template", "body": "<p>In my routes.rb, try </p>\n\n<pre><code>get 'pages/signup'\nmatch \"signup\", :to =&gt; \"pages#signup\"\n</code></pre>\n\n<p>on rails 4</p>\n\n<pre><code>get 'pages/signup'\nmatch \"signup\", :to =&gt; \"pages#signup\", via: :all\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1458112682, "creation_date": 1458112682, "answer_id": 36029043, "question_id": 36028209, "link": "https://stackoverflow.com/questions/36028209/static-pages-in-rails-app-missing-template/36029043#36029043", "title": "static pages in rails app missing template", "body": "<p>Because your controller isn't in the spree namespace change the full path of the html file from</p>\n\n<pre><code>app/views/spree/pages/signup.html.erb\n</code></pre>\n\n<p>to</p>\n\n<pre><code>app/views/pages/signup.html.erb\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 555, "user_id": 5919960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zNSOK.jpg?s=128&g=1", "display_name": "Anurag Kumar", "link": "https://stackoverflow.com/users/5919960/anurag-kumar"}, "is_accepted": true, "score": 2, "last_activity_date": 1458124518, "creation_date": 1458124518, "answer_id": 36033145, "question_id": 36028209, "link": "https://stackoverflow.com/questions/36028209/static-pages-in-rails-app-missing-template/36033145#36033145", "title": "static pages in rails app missing template", "body": "<p>just write in routs.rb</p>\n\n<pre><code>get '/pages/signup', to: 'pages#signup'\n</code></pre>\n\n<p>and in pages_controller.rb write </p>\n\n<pre><code>def signup\n   @page = Page.new\nend\ndef create\n# write create function\nend\n</code></pre>\n"}], "owner": {"reputation": 2073, "user_id": 2615428, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/50118dc915d8e41676b9a773217f6cab?s=128&d=identicon&r=PG", "display_name": "Suraj", "link": "https://stackoverflow.com/users/2615428/suraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 36033145, "answer_count": 3, "score": 0, "last_activity_date": 1458124518, "creation_date": 1458109560, "question_id": 36028209, "link": "https://stackoverflow.com/questions/36028209/static-pages-in-rails-app-missing-template", "title": "static pages in rails app missing template", "body": "<p>I have to add a static page to my rails app.</p>\n\n<p>Here's the logic I am following.</p>\n\n<p>I made a directory called <code>pages</code> and put a file called <code>signup.html.erb</code> there.</p>\n\n<p>The path in my another html file is <code>pages/signup</code></p>\n\n<p>In my <code>routes.rb</code>, I have <code>get 'pages/signup'</code></p>\n\n<p>I made a <code>pages controller</code> and there I have something like below </p>\n\n<pre><code>class PagesController &lt; ApplicationController\n\n  def signup\n  end\n\n\nend\n</code></pre>\n\n<p>I get below error.</p>\n\n<blockquote>\n  <p>Missing template pages/signup, application/signup with</p>\n</blockquote>\n\n<p>What's wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "celluloid"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1458109021, "post_id": 36027947, "comment_id": 59706300, "body": "Use rubinius or jruby. They don&#39;t have the lock."}, {"owner": {"reputation": 1755, "user_id": 613960, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ivuqi.jpg?s=128&g=1", "display_name": "kishoredbn", "link": "https://stackoverflow.com/users/613960/kishoredbn"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1458109209, "post_id": 36027947, "comment_id": 59706370, "body": "I wish I could have found one straight forward online source on how to install one of these. Can you help?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1458109290, "post_id": 36027947, "comment_id": 59706405, "body": "I use chruby with <a href=\"https://github.com/postmodern/ruby-install\" rel=\"nofollow noreferrer\">ruby-install</a>. You just do <code>ruby-install jruby</code> and that&#39;s it for the installation."}, {"owner": {"reputation": 1755, "user_id": 613960, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ivuqi.jpg?s=128&g=1", "display_name": "kishoredbn", "link": "https://stackoverflow.com/users/613960/kishoredbn"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1458109796, "post_id": 36027947, "comment_id": 59706626, "body": "I feel like I&#39;m asking questions like a child but I don&#39;t know how to trigger jruby. It says jruby is installed in my system but when I try to run the program using jruby program_name.rb, it says command not found!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1458110091, "post_id": 36027947, "comment_id": 59706751, "body": "See the extremist&#39;s answer, he links to RVM which is another popular ruby switching tools. After reading its instructions, you should have no questions left :)"}], "answers": [{"tags": [], "owner": {"reputation": 5795, "user_id": 1169705, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ZWEMS.png?s=128&g=1", "display_name": "digitalextremist", "link": "https://stackoverflow.com/users/1169705/digitalextremist"}, "is_accepted": true, "score": 1, "last_activity_date": 1458109998, "creation_date": 1458109998, "answer_id": 36028313, "question_id": 36027947, "link": "https://stackoverflow.com/questions/36027947/how-to-disable-gil-in-ruby/36028313#36028313", "title": "How to disable GIL in ruby?", "body": "<h1>Use jRuby or Rubinius</h1>\n\n<p>I prefer <code>rvm</code> for this. See: <a href=\"http://rvm.io\" rel=\"nofollow\">http://rvm.io</a></p>\n\n<p>Then run:</p>\n\n<pre><code>rvm get stable\nrvm install jruby \n</code></pre>\n\n<p>For jRuby. Change to <code>rbx</code> for Rubinius.</p>\n\n<p>Then you can switch between Ruby engines with:</p>\n\n<pre><code>rvm use &lt;jruby/rbx&gt;\n</code></pre>\n\n<p>Using <code>Celluloid</code> you ought to try both and compare them often. </p>\n"}], "owner": {"reputation": 1755, "user_id": 613960, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ivuqi.jpg?s=128&g=1", "display_name": "kishoredbn", "link": "https://stackoverflow.com/users/613960/kishoredbn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 1, "accepted_answer_id": 36028313, "answer_count": 1, "score": 1, "last_activity_date": 1458109998, "creation_date": 1458108499, "question_id": 36027947, "link": "https://stackoverflow.com/questions/36027947/how-to-disable-gil-in-ruby", "title": "How to disable GIL in ruby?", "body": "<p>I am pretty much new to Ruby and I was working on a project to run a multithreaded ruby program implemented using celluloid library. </p>\n\n<p>It seems like when I try to run the program using the command:</p>\n\n<pre><code>ruby program_name.rb\n</code></pre>\n\n<p>The code don't run properly and it says GIL is stopping it from making use of multiple cores. I understand GIL is a locking mechanism used by ruby interpreter, but I was wondering if there is a way to diable it with a special command to make concurrent program run. </p>\n\n<p>If this is something impossible, is there any other way to execute multithreaded program in ruby / with any online editor/IDE that supports such multithreading in Ruby? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm"], "comments": [{"owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "edited": false, "score": 0, "creation_date": 1458108015, "post_id": 36027808, "comment_id": 59705925, "body": "Share your <code>Gemfile</code> please."}, {"owner": {"reputation": 920, "user_id": 3512189, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hXdNN.jpg?s=128&g=1", "display_name": "wasipeer", "link": "https://stackoverflow.com/users/3512189/wasipeer"}, "edited": false, "score": 0, "creation_date": 1458108428, "post_id": 36027808, "comment_id": 59706091, "body": "try removing your Gemfile.lock file and run bundle install."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1458112065, "post_id": 36027808, "comment_id": 59707699, "body": "According to your <code>Gemfile</code> the ruby version should be <code>2.2.0</code> but your local version is <code>2.0</code>, install <code>2.2.0</code> and run bundle install again."}], "answers": [{"comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1458108221, "post_id": 36027860, "comment_id": 59706018, "body": "ok I ran<code>gem list</code> and don&#39;t see <code>railties</code>. Trying your solution now."}], "tags": [], "owner": {"reputation": 787, "user_id": 2582475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04b7b53d905d43e3d1a813e6a7dfd729?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/2582475/jerry"}, "is_accepted": false, "score": 0, "last_activity_date": 1458108120, "creation_date": 1458108120, "answer_id": 36027860, "question_id": 36027808, "link": "https://stackoverflow.com/questions/36027808/bundle-install-cause-strange-error/36027860#36027860", "title": "Bundle install cause strange error", "body": "<p>This error is probably caused by a corruption of the Rails installation.</p>\n\n<p>Try running <code>gem list</code>. If you don't see <code>railties</code> in the list, run <code>gem install rails</code>.</p>\n\n<p>If that doesn't work, I think you should try starting afresh. Create a new gemset, install bundler and run <code>bundle install</code>. That should fix things.</p>\n"}], "owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458108120, "creation_date": 1458107866, "last_edit_date": 1458108114, "question_id": 36027808, "link": "https://stackoverflow.com/questions/36027808/bundle-install-cause-strange-error", "title": "Bundle install cause strange error", "body": "<p>I'm getting a strange error message when running <code>bundle install</code> or even just <code>rails -v</code> within a rails project root directory:</p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'railties' (&gt;= 0) among 16 total gem(s) (Gem::LoadError)\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n    from /usr/local/bin/rails:22:in `&lt;main&gt;'\n</code></pre>\n\n<p>However this doesn't happen in my home directory <code>/Users/myname</code></p>\n\n<p>I messed up something and don't know what, any help?</p>\n\n<p><strong>EDIT</strong>\nGemfile</p>\n\n<pre><code>source 'https://rubygems.org'\n\nruby '2.2.0'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.0'\n\ngem 'checkr-official'\ngem 'chronic'\ngem 'devise', '~&gt; 3.4.0'\ngem 'exception_notification'\ngem 'friendly_id'\ngem 'geocoder'\ngem 'kaminari'\ngem \"mini_magick\"\ngem 'mysql2'\ngem 'linkedin'\ngem 'omniauth'\ngem 'omniauth-facebook'\ngem \"omniauth-google-oauth2\"\ngem 'RedCloth'\ngem \"refile\", require: \"refile/rails\"\ngem \"refile-mini_magick\"\ngem 'StreetAddress'\ngem \"stripe\"\ngem 'truevault', github: \"marks/truevault.rb\", ref: \"e3bda1af6bfb355\"\ngem 'whenever', '~&gt; 0.9.4'\ngem 'impressionist'\ngem \"koala\"\ngem 'twilio-ruby', '~&gt; 4.11.1'\n# CSS and javascript\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'compass-rails'\ngem 'ejs'\ngem 'faker'\ngem 'font-awesome-sass', '~&gt; 4.3.0'\ngem 'jquery-rails'\ngem 'jquery-ui-rails'\ngem 'momentjs-rails', '&gt;= 2.8.1'\ngem 'sass-rails'\ngem 'uglifier', '&gt;= 1.3.0'\n\n# Generic admin requirements not specified elsewhere\ngem 'bootstrap-sass', '&gt;= 3.3' # 3.3 adds better support for media css object\ngem 'simple_form', \"&gt;= 3.1.0.rc2\"\n# google api client used for dashboard authorization for google analytics\ngem 'google-api-client'\n\ngem 'capistrano', '~&gt; 3.4'\ngem 'capistrano-rvm'\ngem 'capistrano-rails'\ngem \"capistrano-db-tasks\", require: false\n\ngroup :development do\n  gem 'awesome_print', :require =&gt; 'ap'\nend\n\ngroup :development, :test do\n  gem \"factory_girl_rails\", \"~&gt; 4.0\"\n\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\n  gem 'pry'\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring', '1.4.0'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 9485, "user_id": 402637, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/65cb46542353693a6170b08eeb2e1f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Sana", "link": "https://stackoverflow.com/users/402637/sana"}, "is_accepted": false, "score": 0, "last_activity_date": 1458108701, "creation_date": 1458108701, "answer_id": 36028000, "question_id": 36027755, "link": "https://stackoverflow.com/questions/36027755/include-counts-in-as-json-method/36028000#36028000", "title": "Include counts in as_json method", "body": "<p>Never mind! I got the answer.</p>\n\n<pre><code>class Customers\n\n  def custom_method_to_get_order_count\n    Orders.where(:customer_id =&gt; id).count\n  end\n\nend\n</code></pre>\n\n<p>What's happening to me, whenever I post the question on SO, I get the answer!</p>\n"}, {"comments": [{"owner": {"reputation": 9485, "user_id": 402637, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/65cb46542353693a6170b08eeb2e1f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Sana", "link": "https://stackoverflow.com/users/402637/sana"}, "edited": false, "score": 1, "creation_date": 1458592972, "post_id": 36028484, "comment_id": 59920580, "body": "This answer is cleaner."}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 2, "last_activity_date": 1458110643, "creation_date": 1458110643, "answer_id": 36028484, "question_id": 36027755, "link": "https://stackoverflow.com/questions/36027755/include-counts-in-as-json-method/36028484#36028484", "title": "Include counts in as_json method", "body": "<p>You can also use like this:</p>\n\n<pre><code>class Customers\n\n  def get_orders_count\n    self.orders.count\n  end\n\nend\n</code></pre>\n\n<p>and now you can get all orders count in customer object:</p>\n\n<pre><code>Customers.all.as_json(method: :get_orders_count)\n</code></pre>\n\n<p>Output will be something like:</p>\n\n<pre><code>[\n  {\n    :customer_id =&gt; 1,\n    :customer_name =&gt; \"ABC\",\n    :get_orders_count =&gt; 12\n  },\n  {\n    :customer_id =&gt; 2,\n    :customer_name =&gt; \"DEF\",\n    :get_orders_count =&gt; 20\n  },\n  {\n      :customer_id =&gt; 3,\n      :customer_name =&gt; \"XYZ\",\n      :get_orders_count =&gt; 50\n  }\n]\n</code></pre>\n"}], "owner": {"reputation": 9485, "user_id": 402637, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/65cb46542353693a6170b08eeb2e1f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Sana", "link": "https://stackoverflow.com/users/402637/sana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "accepted_answer_id": 36028484, "answer_count": 2, "score": 0, "last_activity_date": 1458110643, "creation_date": 1458107620, "question_id": 36027755, "link": "https://stackoverflow.com/questions/36027755/include-counts-in-as-json-method", "title": "Include counts in as_json method", "body": "<p>I have a <code>Customers</code> table and an <code>Orders</code> table. Each customer has multiple orders. When I do a <code>Customers.all.as_json(:include =&gt; :orders)</code>, I get all the orders but I just want to get the count</p>\n\n<p>I tried <code>Customers.all.as_json(:include =&gt; {:orders =&gt; {:only =&gt; [], :methods =&gt; [:custom_method_to_get_order_count}})</code> though it gets the correct count I have array of object that are equal to count.</p>\n\n<p><strong>Wrong output! :(</strong></p>\n\n<pre><code>[\n  {\n    :customer_id =&gt; 1,\n    :customer_name =&gt; \"ABC\",\n    :orders =&gt; [\n        {:custom_method_to_get_order_count =&gt; 2},\n        {:custom_method_to_get_order_count =&gt; 2}\n    ]\n  },\n  {\n    :customer_id =&gt; 2,\n    :customer_name =&gt; \"DEF\",\n    :orders =&gt; [\n        {:custom_method_to_get_order_count =&gt; 3},\n        {:custom_method_to_get_order_count =&gt; 3},\n        {:custom_method_to_get_order_count =&gt; 3}\n    ]\n  },\n  {\n      :customer_id =&gt; 3,\n      :customer_name =&gt; \"XYZ\",\n      :orders =&gt; [\n          {:custom_method_to_get_order_count =&gt; 10},\n          {:custom_method_to_get_order_count =&gt; 10},\n          {:custom_method_to_get_order_count =&gt; 10},\n          {:custom_method_to_get_order_count =&gt; 10},\n          {:custom_method_to_get_order_count =&gt; 10},\n          {:custom_method_to_get_order_count =&gt; 10},\n          {:custom_method_to_get_order_count =&gt; 10},\n          {:custom_method_to_get_order_count =&gt; 10},\n          {:custom_method_to_get_order_count =&gt; 10},\n          {:custom_method_to_get_order_count =&gt; 10}\n      ]\n  }\n]\n</code></pre>\n\n<p>Correct output I am looking for</p>\n\n<pre><code>[\n  {\n    :customer_id =&gt; 1,\n    :customer_name =&gt; \"ABC\",\n    :orders =&gt; {\n        :custom_method_to_get_order_count =&gt; 2\n    }\n  },\n  {\n    :customer_id =&gt; 2,\n    :customer_name =&gt; \"DEF\",\n    :orders =&gt; {\n        :custom_method_to_get_order_count =&gt; 3\n    }\n  },\n  {\n      :customer_id =&gt; 3,\n      :customer_name =&gt; \"XYZ\",\n      :orders =&gt; {\n        :custom_method_to_get_order_count =&gt; 10\n      }\n  }\n]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl", "rvm"], "comments": [{"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 1, "creation_date": 1458106212, "post_id": 36026958, "comment_id": 59705274, "body": "no idea what your issue is. The last time I had an issue with RVM, someone suggested to implode it, ie, remove it and reinstall it again. That worked for me. All you need to is say <code>implode rvm</code>. Here&#39;s a random link I just googled on imploding the rvm: <a href=\"https://gauravsohoni.wordpress.com/2014/01/01/rvm-implode-and-rvm-install/\" rel=\"nofollow noreferrer\">gauravsohoni.wordpress.com/2014/01/01/&hellip;</a>. Hope this helps! Cheers."}], "answers": [{"tags": [], "owner": {"reputation": 388, "user_id": 2308639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1345a48fa1dbe24e85506de63b6c07f0?s=128&d=identicon&r=PG", "display_name": "Stephen Grimes", "link": "https://stackoverflow.com/users/2308639/stephen-grimes"}, "is_accepted": false, "score": 2, "last_activity_date": 1458129717, "creation_date": 1458129717, "answer_id": 36035142, "question_id": 36026958, "link": "https://stackoverflow.com/questions/36026958/issue-installing-ruby-on-rails-with-rvm/36035142#36035142", "title": "Issue installing ruby on rails with RVM", "body": "<p>You might have two versions of ruby installed. Check using:</p>\n\n<pre><code>which -a ruby\n</code></pre>\n\n<p>Remove all versions of ruby, reinstall the one using package manager, then reinstall rubygems.</p>\n"}], "owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458169243, "creation_date": 1458103415, "last_edit_date": 1458169243, "question_id": 36026958, "link": "https://stackoverflow.com/questions/36026958/issue-installing-ruby-on-rails-with-rvm", "title": "Issue installing ruby on rails with RVM", "body": "<p>I have done something terribly wrong and cannot figure out what did i do or how did it happen. I suddenly started getting OPENssl certificates error :</p>\n\n<pre><code>SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed\n</code></pre>\n\n<p>And so I followed the directions in this link for help: <a href=\"http://railsapps.github.io/openssl-certificate-verify-failed.html\" rel=\"nofollow\">http://railsapps.github.io/openssl-certificate-verify-failed.html</a></p>\n\n<p>At some point I must have removed rails because when I run <code>rails s</code> I get:</p>\n\n<pre><code>Rails is not currently installed on this system. To get the latest version, simply type:\n\n    $ sudo gem install rails\n</code></pre>\n\n<p>Now when I run <code>sudo gem install rails</code> I get an error:</p>\n\n<pre><code>&lt;internal:gem_prelude&gt;:1:in `require': cannot load such file -- rubygems.rb (LoadError)\n    from &lt;internal:gem_prelude&gt;:1:in `&lt;compiled&gt;'\n</code></pre>\n\n<p>Then just for the sake of trying to make this work I tried reinstalling rvm:</p>\n\n<p><code>$ \\curl -L https://get.rvm.io | bash -s stable</code></p>\n\n<p>But that gave me a long list of issues (that I do not understand...):</p>\n\n<pre><code>% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   184  100   184    0     0    847      0 --:--:-- --:--:-- --:--:--   851\n100 22865  100 22865    0     0  53451      0 --:--:-- --:--:-- --:--:--  114k\nDownloading https://github.com/rvm/rvm/archive/1.26.11.tar.gz\nDownloading https://github.com/rvm/rvm/releases/download/1.26.11/1.26.11.tar.gz.asc\nFound PGP signature at: 'https://github.com/rvm/rvm/releases/download/1.26.11/1.26.11.tar.gz.asc',\nbut no GPG software exists to validate it, skipping.\n\nUpgrading the RVM installation in /Users/cyrusghazanfar/.rvm/\n    RVM PATH line found in /Users/cyrusghazanfar/.mkshrc /Users/cyrusghazanfar/.profile /Users/cyrusghazanfar/.bashrc /Users/cyrusghazanfar/.zshrc.\n    RVM sourcing line found in /Users/cyrusghazanfar/.profile /Users/cyrusghazanfar/.bash_profile /Users/cyrusghazanfar/.zlogin.\n    Installing rvm gem in 2 gemsetsError running 'command gem install /Users/cyrusghazanfar/.rvm/gem-cache/rvm-1.11.3.9.gem --local --no-ri --no-rdoc',\nshowing last 15 lines of /Users/cyrusghazanfar/.rvm/log/1458102835_ruby-2.1.0/gem.install.rvm-&gt;=1.11.3.9.log\n[2016-03-16 00:33:55] command\ncurrent path: /Users/cyrusghazanfar/.rvm/src/rvm\nGEM_HOME=/Users/cyrusghazanfar/.rvm/gems/ruby-2.1.0@global\nPATH=/Users/cyrusghazanfar/.rvm/gems/ruby-2.1.0@global/bin:/Users/cyrusghazanfar/.rvm/rubies/ruby-2.1.0/bin:/Users/cyrusghazanfar/.rvm/bin:/Users/cyrusghazanfar/anaconda/bin:/Library/Frameworks/Python.framework/Versions/3.5/bin:/usr/local:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/ImageMagick/bin\nGEM_PATH=/Users/cyrusghazanfar/.rvm/gems/ruby-2.1.0@global\ncommand(7): command gem install /Users/cyrusghazanfar/.rvm/gem-cache/rvm-1.11.3.9.gem --local --no-ri --no-rdoc\n+ ./scripts/functions/utility_logging : __rvm_log_dotted()  210 &gt; gem install /Users/cyrusghazanfar/.rvm/gem-cache/rvm-1.11.3.9.gem --local --no-ri --no-rdoc\n&lt;internal:gem_prelude&gt;:1:in `require': cannot load such file -- rubygems.rb (LoadError)\n    from &lt;internal:gem_prelude&gt;:1:in `&lt;compiled&gt;'\nError running 'command gem install /Users/cyrusghazanfar/.rvm/gem-cache/rvm-1.11.3.9.gem --local --no-ri --no-rdoc',\nshowing last 15 lines of /Users/cyrusghazanfar/.rvm/log/1458102835_ruby-2.2.1/gem.install.rvm-&gt;=1.11.3.9.log\n[2016-03-16 00:33:55] command\ncurrent path: /Users/cyrusghazanfar/.rvm/src/rvm\nGEM_HOME=/Users/cyrusghazanfar/.rvm/gems/ruby-2.2.1@global\nPATH=/Users/cyrusghazanfar/.rvm/gems/ruby-2.2.1@global/bin:/Users/cyrusghazanfar/.rvm/rubies/ruby-2.2.1/bin:/Users/cyrusghazanfar/.rvm/bin:/Users/cyrusghazanfar/anaconda/bin:/Library/Frameworks/Python.framework/Versions/3.5/bin:/usr/local:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/ImageMagick/bin\nGEM_PATH=/Users/cyrusghazanfar/.rvm/gems/ruby-2.2.1@global\ncommand(7): command gem install /Users/cyrusghazanfar/.rvm/gem-cache/rvm-1.11.3.9.gem --local --no-ri --no-rdoc\n+ ./scripts/functions/utility_logging : __rvm_log_dotted()  210 &gt; gem install /Users/cyrusghazanfar/.rvm/gem-cache/rvm-1.11.3.9.gem --local --no-ri --no-rdoc\n&lt;internal:gem_prelude&gt;:1:in `require': cannot load such file -- rubygems.rb (LoadError)\n    from &lt;internal:gem_prelude&gt;:1:in `&lt;compiled&gt;'\n.\n    Installing gem-wrappers gem in 2 gemsetsError running 'command gem install /Users/cyrusghazanfar/.rvm/gem-cache/gem-wrappers-1.2.7.gem --local --no-ri --no-rdoc',\nshowing last 15 lines of /Users/cyrusghazanfar/.rvm/log/1458102835_ruby-2.1.0/gem.install.gem-wrappers-&gt;=1.2.7.log\n[2016-03-16 00:33:55] command\ncurrent path: /Users/cyrusghazanfar/.rvm/src/rvm\nGEM_HOME=/Users/cyrusghazanfar/.rvm/gems/ruby-2.1.0@global\nPATH=/Users/cyrusghazanfar/.rvm/gems/ruby-2.1.0@global/bin:/Users/cyrusghazanfar/.rvm/rubies/ruby-2.1.0/bin:/Users/cyrusghazanfar/.rvm/bin:/Users/cyrusghazanfar/anaconda/bin:/Library/Frameworks/Python.framework/Versions/3.5/bin:/usr/local:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/ImageMagick/bin\nGEM_PATH=/Users/cyrusghazanfar/.rvm/gems/ruby-2.1.0@global\ncommand(7): command gem install /Users/cyrusghazanfar/.rvm/gem-cache/gem-wrappers-1.2.7.gem --local --no-ri --no-rdoc\n+ ./scripts/functions/utility_logging : __rvm_log_dotted()  210 &gt; gem install /Users/cyrusghazanfar/.rvm/gem-cache/gem-wrappers-1.2.7.gem --local --no-ri --no-rdoc\n&lt;internal:gem_prelude&gt;:1:in `require': cannot load such file -- rubygems.rb (LoadError)\n    from &lt;internal:gem_prelude&gt;:1:in `&lt;compiled&gt;'\nError running 'command gem install /Users/cyrusghazanfar/.rvm/gem-cache/gem-wrappers-1.2.7.gem --local --no-ri --no-rdoc',\nshowing last 15 lines of /Users/cyrusghazanfar/.rvm/log/1458102835_ruby-2.2.1/gem.install.gem-wrappers-&gt;=1.2.7.log\n[2016-03-16 00:33:55] command\ncurrent path: /Users/cyrusghazanfar/.rvm/src/rvm\nGEM_HOME=/Users/cyrusghazanfar/.rvm/gems/ruby-2.2.1@global\nPATH=/Users/cyrusghazanfar/.rvm/gems/ruby-2.2.1@global/bin:/Users/cyrusghazanfar/.rvm/rubies/ruby-2.2.1/bin:/Users/cyrusghazanfar/.rvm/bin:/Users/cyrusghazanfar/anaconda/bin:/Library/Frameworks/Python.framework/Versions/3.5/bin:/usr/local:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/ImageMagick/bin\nGEM_PATH=/Users/cyrusghazanfar/.rvm/gems/ruby-2.2.1@global\ncommand(7): command gem install /Users/cyrusghazanfar/.rvm/gem-cache/gem-wrappers-1.2.7.gem --local --no-ri --no-rdoc\n+ ./scripts/functions/utility_logging : __rvm_log_dotted()  210 &gt; gem install /Users/cyrusghazanfar/.rvm/gem-cache/gem-wrappers-1.2.7.gem --local --no-ri --no-rdoc\n&lt;internal:gem_prelude&gt;:1:in `require': cannot load such file -- rubygems.rb (LoadError)\n    from &lt;internal:gem_prelude&gt;:1:in `&lt;compiled&gt;'\n.\n    Regenerating gem wrappers in 2 rubies&lt;internal:gem_prelude&gt;:1:in `require': cannot load such file -- rubygems.rb (LoadError)\n    from &lt;internal:gem_prelude&gt;:1:in `&lt;compiled&gt;'\n&lt;internal:gem_prelude&gt;:1:in `require': cannot load such file -- rubygems.rb (LoadError)\n    from &lt;internal:gem_prelude&gt;:1:in `&lt;compiled&gt;'\n&lt;internal:gem_prelude&gt;:1:in `require': cannot load such file -- rubygems.rb (LoadError)\n    from &lt;internal:gem_prelude&gt;:1:in `&lt;compiled&gt;'\n&lt;internal:gem_prelude&gt;:1:in `require': cannot load such file -- rubygems.rb (LoadError)\n    from &lt;internal:gem_prelude&gt;:1:in `&lt;compiled&gt;'\n.\nUpgrade of RVM in /Users/cyrusghazanfar/.rvm/ is complete.\n\n# cyzanfar,\n#\n#   Thank you for using RVM!\n#   We sincerely hope that RVM helps to make your life easier and more enjoyable!!!\n#\n# ~Wayne, Michal &amp; team.\n\nIn case of problems: http://rvm.io/help and https://twitter.com/rvm_io\n\nUpgrade Notes:\n\n  * No new notes to display.\n</code></pre>\n\n<p>Please help me debug this.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Adding <code>OpenSSL::SSL::VERIFY_PEER = OpenSSL::SSL::VERIFY_NONE</code> to my <code>config/environments/development.rb</code> solved the problem but do I need to do that for every app I build? Is there a way to globally configure OpenSSL certs ?</p>\n"}, {"tags": ["ruby", "chef-infra", "knife"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1458104722, "post_id": 36026936, "comment_id": 59704799, "body": "Do you mean that <code>test.sh</code> is potentially different every time the resource runs, and you want to run <code>test.sh</code> only if it&#39;s changed since the last time it was run?"}, {"owner": {"reputation": 688, "user_id": 1275328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b089d589d227c2b48584b6e106ee1a1b?s=128&d=identicon&r=PG", "display_name": "Rajan Kumar", "link": "https://stackoverflow.com/users/1275328/rajan-kumar"}, "reply_to_user": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1458106304, "post_id": 36026936, "comment_id": 59705307, "body": "test.sh is same. And I want to run only when it is changed. How can I use only_if/not_if and file checksums. Or some other way."}, {"owner": {"reputation": 688, "user_id": 1275328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b089d589d227c2b48584b6e106ee1a1b?s=128&d=identicon&r=PG", "display_name": "Rajan Kumar", "link": "https://stackoverflow.com/users/1275328/rajan-kumar"}, "reply_to_user": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1458106520, "post_id": 36026936, "comment_id": 59705382, "body": "I have this too: cookbook_file &quot;test.sh&quot;  do   path &quot;/tmp/test.sh&quot;   mode &quot;755&quot;   action :create end"}], "answers": [{"comments": [{"owner": {"reputation": 688, "user_id": 1275328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b089d589d227c2b48584b6e106ee1a1b?s=128&d=identicon&r=PG", "display_name": "Rajan Kumar", "link": "https://stackoverflow.com/users/1275328/rajan-kumar"}, "edited": false, "score": 0, "creation_date": 1458155746, "post_id": 36029193, "comment_id": 59738433, "body": "Thanks. It worked. It is excellent answer and with great explanation. Once again thank you very much."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 4, "last_activity_date": 1458113208, "creation_date": 1458113208, "answer_id": 36029193, "question_id": 36026936, "link": "https://stackoverflow.com/questions/36026936/how-to-achieve-idempotence-when-we-execute-bash-script-in-ruby-knife-environment/36029193#36029193", "title": "How to achieve idempotence when we execute bash script in ruby/knife environment?", "body": "<p>You wouldn't use a guard, instead you would use a notification:</p>\n\n<pre><code>execute 'run test' do\n  action :nothing\n  command 'bash /tmp/test.sh arg1 arg2'\nend\n\ncookbook_file \"test.sh\"  do\n  path \"/tmp/test.sh\"\n  mode \"755\"\n  notifies :run, 'execute[run test]', :immediately\nend\n</code></pre>\n\n<p>Notifications trigger when a resources updates, so any time the cookbook file changes, it will run the <code>execute</code>. Also you want to be using <code>execute</code> instead of <code>bash</code> or <code>script</code> because you are running a command rather than an inline script file.</p>\n"}], "owner": {"reputation": 688, "user_id": 1275328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b089d589d227c2b48584b6e106ee1a1b?s=128&d=identicon&r=PG", "display_name": "Rajan Kumar", "link": "https://stackoverflow.com/users/1275328/rajan-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1458113208, "creation_date": 1458103328, "last_edit_date": 1458113055, "question_id": 36026936, "link": "https://stackoverflow.com/questions/36026936/how-to-achieve-idempotence-when-we-execute-bash-script-in-ruby-knife-environment", "title": "How to achieve idempotence when we execute bash script in ruby/knife environment?", "body": "<p>I am trying to execute bash script in knife/Ruby environment. For example:</p>\n\n<pre><code>cookbook_file \"test.sh\"  do\n  path \"/tmp/test.sh\"\n  mode \"755\"\n  action :create\nend\n\nbash \"execute test.sh on #{nodeName}\" do\n  code &lt;&lt;-EOH\n    sh test.sh arg1 arg2 \n  EOH\n  #only_if { false }\nend\n</code></pre>\n\n<p>How can I use <code>only_if</code> or <code>not_if</code>? So when we execute second time and the contents of \"test.sh\" is not changed, it should skip execution. I am getting this:</p>\n\n<pre><code>* cookbook_file[test.sh] action create (up to date)\n</code></pre>\n\n<p>but it still executes second time, third time...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 8206, "user_id": 5133, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7e35651f25986c1c6f61ffca814b640?s=128&d=identicon&r=PG", "display_name": "Merus", "link": "https://stackoverflow.com/users/5133/merus"}, "edited": false, "score": 0, "creation_date": 1458264303, "post_id": 36027352, "comment_id": 59795001, "body": "Was that simple. Thanks!"}], "tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": true, "score": 2, "last_activity_date": 1458105602, "creation_date": 1458105602, "answer_id": 36027352, "question_id": 36026685, "link": "https://stackoverflow.com/questions/36026685/sanitizing-arrays-in-select-all-sql-queries-in-rails-4/36027352#36027352", "title": "Sanitizing arrays in select_all SQL queries in Rails 4", "body": "<p>Join and make your array a string, then pass it to the SQL:</p>\n\n<pre><code>ids_string = ids.join(', ')\n</code></pre>\n"}], "owner": {"reputation": 8206, "user_id": 5133, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7e35651f25986c1c6f61ffca814b640?s=128&d=identicon&r=PG", "display_name": "Merus", "link": "https://stackoverflow.com/users/5133/merus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 0, "accepted_answer_id": 36027352, "answer_count": 1, "score": 1, "last_activity_date": 1458105602, "creation_date": 1458101747, "last_edit_date": 1458105057, "question_id": 36026685, "link": "https://stackoverflow.com/questions/36026685/sanitizing-arrays-in-select-all-sql-queries-in-rails-4", "title": "Sanitizing arrays in select_all SQL queries in Rails 4", "body": "<p>I need to pull aggregated columns from my database in a way that's unique to this page, crosses several models, and is expensive to aggregate in memory on a page that already has performance concerns. As a result, I want to make a hand-written SQL query to the database and return a bunch of simple objects (like hashes, or structs) which I can then dole out to the existing objects that consume this information. <code>ActiveRecord::Base.connection.select_all</code> is perfect for what I want.</p>\n\n<p>My SQL string takes an array of ids:</p>\n\n<pre><code>WHERE entry.task_id IN (#{@project.tasks.id})\n</code></pre>\n\n<p>but this doesn't work because it returns a wrapped array, and connection.quote returns <em>a bulleted list</em> for some reason. What would be the best way to get the information I want? Should I manually strip off the <code>[</code> and <code>]</code>? Is there a handy, accessible function like <code>sanitize_sql_array</code> that'll do the trick? Should I never be calling select_all as part of normal operation?</p>\n\n<p>This appears to have been easier in the past, but most of the methods I would use have been protected (including <code>sanitize_sql_array</code>). Rails <em>really</em> wants me to use ActiveRecord query methods, it seems.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 3, "creation_date": 1458101674, "post_id": 36026623, "comment_id": 59703910, "body": "The latter looks like a class method to me. I&#39;d write <code>def self.doc ...</code>, though"}, {"owner": {"reputation": 97, "user_id": 5782278, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EngaR.jpg?s=128&g=1", "display_name": "Messi", "link": "https://stackoverflow.com/users/5782278/messi"}, "reply_to_user": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 0, "creation_date": 1458102152, "post_id": 36026623, "comment_id": 59704045, "body": "Thanx for your reply."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1458105561, "post_id": 36026623, "comment_id": 59705035, "body": "Note that <code>Mod.instance_methods(false) #=&gt; [:doc]</code> (the first) and <code>Mod.methods(false) #=&gt; [:doc]</code> (the second). It&#39;s curious that <code>instance_methods</code> is the name of the first method (which more commonly is invoked on a class), even though instance methods can only be invoked on instances of classes which <code>include</code> the module (but, as @J&#246;rgWMittag is fond of pointing out (sic), &quot;there are no instance methods, just methods&quot;)."}], "answers": [{"tags": [], "owner": {"reputation": 1463, "user_id": 3703503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ca51bdb8bc5906975c4133f0bf4873c?s=128&d=identicon&r=PG&f=1", "display_name": "SlySherZ", "link": "https://stackoverflow.com/users/3703503/slysherz"}, "is_accepted": true, "score": 6, "last_activity_date": 1458102422, "last_edit_date": 1495542691, "creation_date": 1458102422, "answer_id": 36026791, "question_id": 36026623, "link": "https://stackoverflow.com/questions/36026623/what-is-difference-between-these-two-methods-in-ruby/36026791#36026791", "title": "What is difference between these two methods in Ruby?", "body": "<pre><code>Mod::doc()\n</code></pre>\n\n<p>is a class method, whereas</p>\n\n<pre><code>doc()\n</code></pre>\n\n<p>is an instance method. Here's an example of how to use both:</p>\n\n<pre><code>class Mod   \n    def doc()\n        puts 1\n    end\n\n    def Mod::doc() \n        puts 2\n    end\nend\n\na = Mod.new\na.doc   #=&gt; 1\nMod.doc #=&gt; 2\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/2276905/what-does-double-colon-mean-in-ruby\">Here</a>'s a question that compares it with</p>\n\n<pre><code>self.doc()\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 5782278, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EngaR.jpg?s=128&g=1", "display_name": "Messi", "link": "https://stackoverflow.com/users/5782278/messi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 36026791, "answer_count": 1, "score": 2, "last_activity_date": 1458102422, "creation_date": 1458101266, "question_id": 36026623, "link": "https://stackoverflow.com/questions/36026623/what-is-difference-between-these-two-methods-in-ruby", "title": "What is difference between these two methods in Ruby?", "body": "<p>What is difference between these two methods in Ruby?</p>\n\n<pre><code>class Mod   \n\n      def doc(str)\n          ...\n      end\n\n      def Mod::doc(aClass) \n          ...\n      end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 0, "creation_date": 1458103498, "post_id": 36025973, "comment_id": 59704408, "body": "so you want to convert date to integer?"}], "answers": [{"tags": [], "owner": {"reputation": 1176, "user_id": 1233552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60129132308d7f7a10aaeb63cbbd64?s=128&d=identicon&r=PG", "display_name": "jljohnstone", "link": "https://stackoverflow.com/users/1233552/jljohnstone"}, "is_accepted": true, "score": 0, "last_activity_date": 1458098422, "creation_date": 1458098422, "answer_id": 36026202, "question_id": 36025973, "link": "https://stackoverflow.com/questions/36025973/how-can-i-pass-value-to-the-model-with-calculating-in-rails/36026202#36026202", "title": "How can I pass value to the model with calculating in rails", "body": "<p>You could use a <code>before_save</code> <a href=\"http://guides.rubyonrails.org/active_record_callbacks.html\" rel=\"nofollow\">callback</a> to handle this.</p>\n\n<pre><code>class YourModelClass &lt; ActiveRecord::Base\n  before_save :date_to_id_number\n\n  def date_to_id_number\n    #code that converts date to id_number\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 6015495, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/28317f32e10284a7600c8e3f9e32622a?s=128&d=identicon&r=PG&f=1", "display_name": "runchu", "link": "https://stackoverflow.com/users/6015495/runchu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 36026202, "answer_count": 1, "score": 0, "last_activity_date": 1458098422, "creation_date": 1458096575, "question_id": 36025973, "link": "https://stackoverflow.com/questions/36025973/how-can-i-pass-value-to-the-model-with-calculating-in-rails", "title": "How can I pass value to the model with calculating in rails", "body": "<p>For example, I have a model, it has 'id_number(integer)' and 'date(string)',  I have:</p>\n\n<pre><code>&lt;%= f.label :date %&gt;\n&lt;%= f.text_field :date %&gt;\n&lt;%= f.submit %&gt;\n</code></pre>\n\n<p>I want to get this date(string) and save it as 'id_number' in integer to the model. How can I achieve this by ruby on rails? </p>\n"}, {"tags": ["ruby", "data-structures"], "answers": [{"tags": [], "owner": {"reputation": 2322, "user_id": 4443615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fynBi.jpg?s=128&g=1", "display_name": "Lucas Nelson", "link": "https://stackoverflow.com/users/4443615/lucas-nelson"}, "is_accepted": false, "score": 2, "last_activity_date": 1458098089, "creation_date": 1458098089, "answer_id": 36026163, "question_id": 36025914, "link": "https://stackoverflow.com/questions/36025914/shortcut-for-accessing-lots-of-fields-from-same-object-ruby/36026163#36026163", "title": "Shortcut for accessing lots of fields from same object (Ruby)", "body": "<p>I separated it out into separate lines for clarity, but it can be a one-liner.</p>\n\n<pre><code>fields = [:name, :address, :city, :postcode, :country, :phone_number]\nvalues = fields.map { |field| @organisation.send(field) }\ncsv = values.join(', ')\n</code></pre>\n\n<p>The <code>send</code> method is the magic you were after. It 'sends' a method call to an object and returns the result of that method call.</p>\n"}, {"tags": [], "owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "is_accepted": false, "score": 0, "last_activity_date": 1458098350, "creation_date": 1458098350, "answer_id": 36026189, "question_id": 36025914, "link": "https://stackoverflow.com/questions/36025914/shortcut-for-accessing-lots-of-fields-from-same-object-ruby/36026189#36026189", "title": "Shortcut for accessing lots of fields from same object (Ruby)", "body": "<p>As evidenced by the answer that refers to \"send\", your question is not too clear, but under one interpretation, <code>instance_variables</code> would be the magic you're looking for.</p>\n"}, {"comments": [{"owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "edited": false, "score": 0, "creation_date": 1458100135, "post_id": 36026418, "comment_id": 59703515, "body": "What about Ruby &lt;2.3, is there anything e.g. for 2.2?"}, {"owner": {"reputation": 439, "user_id": 797881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GvLs.jpg?s=128&g=1", "display_name": "ShallmentMo", "link": "https://stackoverflow.com/users/797881/shallmentmo"}, "reply_to_user": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "edited": false, "score": 0, "creation_date": 1458140487, "post_id": 36026418, "comment_id": 59727853, "body": "The method <code>fetch_values</code> is implemented in Ruby 2.3.  For Ruby &lt; 2.3,  I guess using others&#39; solutions will be fine."}], "tags": [], "owner": {"reputation": 439, "user_id": 797881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GvLs.jpg?s=128&g=1", "display_name": "ShallmentMo", "link": "https://stackoverflow.com/users/797881/shallmentmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1458099924, "creation_date": 1458099924, "answer_id": 36026418, "question_id": 36025914, "link": "https://stackoverflow.com/questions/36025914/shortcut-for-accessing-lots-of-fields-from-same-object-ruby/36026418#36026418", "title": "Shortcut for accessing lots of fields from same object (Ruby)", "body": "<p>If you use Ruby 2.3, you can try this:</p>\n\n<pre><code>@organisation.attributes.fetch_values(\"name\", \"address\", \"city\", \"postcode\", \"country\", \"phone_number\").join(', ')\n</code></pre>\n"}], "owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1458099924, "creation_date": 1458096209, "question_id": 36025914, "link": "https://stackoverflow.com/questions/36025914/shortcut-for-accessing-lots-of-fields-from-same-object-ruby", "title": "Shortcut for accessing lots of fields from same object (Ruby)", "body": "<p>Currently I have this line of code:</p>\n\n<pre><code>[@organisation.name, @organisation.address, @organisation.city, @organisation.postcode, @organisation.country, @organisation.phone_number].join(', ')\n</code></pre>\n\n<p>It seems unnecessarily verbose.</p>\n\n<p>Is there a way to just state <code>@organisation</code> once, and get the various fields you want from it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activescaffold"], "answers": [{"tags": [], "owner": {"reputation": 5170, "user_id": 2622934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75041580faf9fba4c3282d529bf3a92c?s=128&d=identicon&r=PG", "display_name": "cschroed", "link": "https://stackoverflow.com/users/2622934/cschroed"}, "is_accepted": true, "score": 0, "last_activity_date": 1458358866, "creation_date": 1458358866, "answer_id": 36097547, "question_id": 36025618, "link": "https://stackoverflow.com/questions/36025618/rails-activescaffold-creating-link-for-column/36097547#36097547", "title": "Rails ActiveScaffold creating link for column", "body": "<p>You can override a column's behavior by defining a method like this in the <code>UsersHelper</code> module:</p>\n\n<pre><code>def user_full_name_column(record, column)\n  link_to h(record.full_name), \"url_value_here\"\nend\n</code></pre>\n\n<p>See: <a href=\"https://github.com/activescaffold/active_scaffold/wiki/Column-Overrides-(List)\" rel=\"nofollow\">Column Overrides (List)</a></p>\n"}], "owner": {"reputation": 5239, "user_id": 2680864, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c913ec45c93dce4d2c18c59cd8f85edb?s=128&d=identicon&r=PG&f=1", "display_name": "r3b00t", "link": "https://stackoverflow.com/users/2680864/r3b00t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 36097547, "answer_count": 1, "score": 1, "last_activity_date": 1458358866, "creation_date": 1458094113, "question_id": 36025618, "link": "https://stackoverflow.com/questions/36025618/rails-activescaffold-creating-link-for-column", "title": "Rails ActiveScaffold creating link for column", "body": "<p>I am using <code>ActiveScaffold</code> gem for my Rails 4 application. I would like to add link to one of column(full_name) for User model. So once I click the <code>user full name</code> it will do some action. I know how to add custom <code>action_links</code> like <code>show</code>, <code>edit</code>, <code>destroy</code> or add other custom <code>action_links</code> next to them.</p>\n\n<p>But I would just like to make one of my column as link rather than adding addition button on the page. I looked at the documentation and found something like this:</p>\n\n<pre><code>Inside `users_controller.rb`\n\nconfig.columns[:full_name].link\n</code></pre>\n\n<p>But it's not doing anything. Please guide me how to add link to one of columns in the row and how to define method to perform some action once link has been clicked.</p>\n"}, {"tags": ["arrays", "ruby", "loops", "hash"], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1458093233, "creation_date": 1458093233, "answer_id": 36025495, "question_id": 36025345, "link": "https://stackoverflow.com/questions/36025345/ruby-loop-inject-data-into-array-with-hash-keys-with-different-data-points/36025495#36025495", "title": "Ruby loop/inject data into array with hash keys with different data points", "body": "<pre><code>hash.each_with_index { |(k,v),i| hash[k][:name] = board_members_names[i] }\n  # =&gt; {\"IQ788201\"   =&gt;{:name=&gt;\"blah1\",  :title=&gt;nil},\n  #     \"IQ534595\"   =&gt;{:name=&gt;\"blah2\",  :title=&gt;nil},\n  #     \"IQ534605\"   =&gt;{:name=&gt;\"blah3\",  :title=&gt;nil},\n  #     \"IQ10049084\" =&gt;{:name=&gt;\"blah4\",  :title=&gt;nil},\n  #     \"IQ10049098\" =&gt;{:name=&gt;\"blah5\",  :title=&gt;nil},\n  #     \"IQ24982164\" =&gt;{:name=&gt;\"blah6\",  :title=&gt;nil},\n  #     \"IQ534637\"   =&gt;{:name=&gt;\"blah7\",  :title=&gt;nil},\n  #     \"IQ534648\"   =&gt;{:name=&gt;\"blah8\",  :title=&gt;nil},\n  #     \"IQ24245395\" =&gt;{:name=&gt;\"blah9\",  :title=&gt;nil},\n  #     \"IQ145953536\"=&gt;{:name=&gt;\"blah10\", :title=&gt;nil},\n  #     \"IQ268369821\"=&gt;{:name=&gt;\"blah11\", :title=&gt;nil}} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1458093676, "post_id": 36025507, "comment_id": 59701799, "body": "You can also use <code>zip</code> to produce key/name pairs."}], "tags": [], "owner": {"reputation": 322, "user_id": 6062644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c3MLX.jpg?s=128&g=1", "display_name": "JLB", "link": "https://stackoverflow.com/users/6062644/jlb"}, "is_accepted": false, "score": 0, "last_activity_date": 1458093317, "creation_date": 1458093317, "answer_id": 36025507, "question_id": 36025345, "link": "https://stackoverflow.com/questions/36025345/ruby-loop-inject-data-into-array-with-hash-keys-with-different-data-points/36025507#36025507", "title": "Ruby loop/inject data into array with hash keys with different data points", "body": "<p>If the only issue is keeping things in order, this should work.</p>\n\n<pre><code>board_members_names = [\"blah1\", \"blah2\", \"blah3\", \"blah4\", \"blah5\", \"blah6\", \"blah7\", \"blah8\", \"blah9\", \"blah10\", \"blah11\"]\n\nhash = {\"IQ788201\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ534595\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ534605\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ10049084\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ10049098\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ24982164\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ534637\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ534648\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ24245395\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ145953536\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ268369821\"=&gt;{:name=&gt;nil, :title=&gt;nil}}\n\nhash.keys.each { |k| hash[k][:name] = board_members_names.shift }\n\nputs hash.to_s\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\"IQ788201\"=&gt;{:name=&gt;\"blah1\", :title=&gt;nil}, \"IQ534595\"=&gt;{:name=&gt;\"blah2\", :title=\n&gt;nil}, \"IQ534605\"=&gt;{:name=&gt;\"blah3\", :title=&gt;nil}, \"IQ10049084\"=&gt;{:name=&gt;\"blah4\",\n :title=&gt;nil}, \"IQ10049098\"=&gt;{:name=&gt;\"blah5\", :title=&gt;nil}, \"IQ24982164\"=&gt;{:name\n=&gt;\"blah6\", :title=&gt;nil}, \"IQ534637\"=&gt;{:name=&gt;\"blah7\", :title=&gt;nil}, \"IQ534648\"=&gt;\n{:name=&gt;\"blah8\", :title=&gt;nil}, \"IQ24245395\"=&gt;{:name=&gt;\"blah9\", :title=&gt;nil}, \"IQ1\n45953536\"=&gt;{:name=&gt;\"blah10\", :title=&gt;nil}, \"IQ268369821\"=&gt;{:name=&gt;\"blah11\", :tit\nle=&gt;nil}}\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 1144372, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2e7e5fba077e634e80e16a9cde8746bf?s=128&d=identicon&r=PG&f=1", "display_name": "stonep", "link": "https://stackoverflow.com/users/1144372/stonep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1458093317, "creation_date": 1458092309, "question_id": 36025345, "link": "https://stackoverflow.com/questions/36025345/ruby-loop-inject-data-into-array-with-hash-keys-with-different-data-points", "title": "Ruby loop/inject data into array with hash keys with different data points", "body": "<p>Having a bit of an issue injecting data from 2 sources into the same hash</p>\n\n<p>For example:</p>\n\n<pre><code> hash = Hash[board_members_ids.map {|x| [x, :name =&gt; nil, :title =&gt; nil]}]\n hash =&gt; {\"IQ788201\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ534595\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ534605\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ10049084\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ10049098\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ24982164\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ534637\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ534648\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ24245395\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ145953536\"=&gt;{:name=&gt;nil, :title=&gt;nil},\n\"IQ268369821\"=&gt;{:name=&gt;nil, :title=&gt;nil}}\n</code></pre>\n\n<p>I now have a hash with keys for the ids.  Now I have another array that contains data that is in corresponding order that needs to injected for the name of each key. </p>\n\n<p>example:</p>\n\n<pre><code>board_members_names = [\"blah1\", \"blah2\", \"blah3\", \"blah4\", \"blah5\", \"blah6\", \"blah7\", \"blah8\", \"blah9\", \"blah10\", \"blah11\"]\n</code></pre>\n\n<p>I'm fine with using the .store method on the hash but:</p>\n\n<p>I'm trying to loop over the hash and insert each of these \"board_member_names\" as the value :name value in exact order as the array is given -- and seem to always insert the first value in the array in each of them</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1458092469, "post_id": 36025049, "comment_id": 59701474, "body": "why not just create an extra table, and store a hash string of the record?"}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1458093013, "post_id": 36025049, "comment_id": 59701637, "body": "I would if there weren&#39;t already gems that did something similar to this, saving me the hassle of doing it myself"}], "answers": [{"comments": [{"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1458093844, "post_id": 36025509, "comment_id": 59701856, "body": "Thats it! couldn&#39;t find it or remember what it was called. thanks"}], "tags": [], "owner": {"reputation": 557, "user_id": 726149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d6560a3be1496450d3165ece15c6e5?s=128&d=identicon&r=PG", "display_name": "Paul Nicholson", "link": "https://stackoverflow.com/users/726149/paul-nicholson"}, "is_accepted": true, "score": 2, "last_activity_date": 1458093338, "creation_date": 1458093338, "answer_id": 36025509, "question_id": 36025049, "link": "https://stackoverflow.com/questions/36025049/how-do-i-backup-updated-and-deleted-posts/36025509#36025509", "title": "How do I backup updated and deleted posts", "body": "<p>I believe paper_trail will do what you want. It tracks changes in a separate table and you can traverse the changes. I have used it and it does the job.</p>\n\n<blockquote>\n  <p>PaperTrail</p>\n  \n  <p>Track changes to your models, for auditing or versioning. See how a\n  model looked at any stage in its lifecycle, revert it to any version,\n  or restore it after it has been destroyed.</p>\n</blockquote>\n\n<p><a href=\"https://github.com/airblade/paper_trail\" rel=\"nofollow\">https://github.com/airblade/paper_trail</a></p>\n"}], "owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 36025509, "answer_count": 1, "score": 1, "last_activity_date": 1458093338, "creation_date": 1458090148, "question_id": 36025049, "link": "https://stackoverflow.com/questions/36025049/how-do-i-backup-updated-and-deleted-posts", "title": "How do I backup updated and deleted posts", "body": "<p>I want an archive system where if a post is updated its previous version is archived so it can be restored. Same goes for if a recored was deleted it can also be restored by a user. </p>\n\n<p>The user can see all previous updates and go back to them if they want.</p>\n\n<p>I found some gems for this a while back but cant find them again now that I'm looking to implement it. I have found <a href=\"https://github.com/expectedbehavior/acts_as_archival\" rel=\"nofollow\">acts as archival</a> but thats all. And it only works for archiving deleted records.</p>\n\n<p>What other gems are out there?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime", "time", "activesupport"], "answers": [{"tags": [], "owner": {"reputation": 322, "user_id": 6062644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c3MLX.jpg?s=128&g=1", "display_name": "JLB", "link": "https://stackoverflow.com/users/6062644/jlb"}, "is_accepted": true, "score": 1, "last_activity_date": 1458091139, "creation_date": 1458091139, "answer_id": 36025189, "question_id": 36024971, "link": "https://stackoverflow.com/questions/36024971/equivalent-of-active-support-time-change-method-in-core-ruby/36025189#36025189", "title": "Equivalent of Active Support Time change method in core ruby", "body": "<pre><code>This seems simple enough:\n\nirb(main):004:0&gt; dt = DateTime.new(2016,3,16)\n=&gt; #&lt;DateTime: 2016-03-16T00:00:00+00:00 ((2457464j,0s,0n),+0s,2299161j)&gt;\nirb(main):005:0&gt; dt = DateTime.new(dt.year, dt.month, dt.day, 14, 0, 0, 0)\n=&gt; #&lt;DateTime: 2016-03-16T14:00:00+00:00 ((2457464j,50400s,0n),+0s,2299161j)&gt;\nirb(main):006:0&gt;\n</code></pre>\n"}], "owner": {"reputation": 969, "user_id": 5257855, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/1ZS57.jpg?s=128&g=1", "display_name": "fardin", "link": "https://stackoverflow.com/users/5257855/fardin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 36025189, "answer_count": 1, "score": 0, "last_activity_date": 1458091139, "creation_date": 1458089680, "question_id": 36024971, "link": "https://stackoverflow.com/questions/36024971/equivalent-of-active-support-time-change-method-in-core-ruby", "title": "Equivalent of Active Support Time change method in core ruby", "body": "<p>With ActiveSupport Time extension I can say <code>DateTime.new(2016,3,16).change(hour: 14)</code> and <code>change</code> gets 2 o'clock in the afternoon of that day <code>=&gt; Wed, 16 Mar 2016 14:00:00 +0000</code>.</p>\n\n<p>Is there a similar way in plain ruby? which is also this neat and simple?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "file-io", "stream"], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "edited": false, "score": 0, "creation_date": 1458087694, "post_id": 36024665, "comment_id": 59700262, "body": "I&#39;m guessing node delivers in packet sizes (depending on what you specify), I&#39;d also like to know if Ruby does the same somehow..."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "reply_to_user": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "edited": false, "score": 0, "creation_date": 1458087739, "post_id": 36024665, "comment_id": 59700282, "body": "@Ruegen See the updated answer. There&#39;s an optional parameter to <code>read</code> to read a certain number of bytes."}, {"owner": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "edited": false, "score": 0, "creation_date": 1458087941, "post_id": 36024665, "comment_id": 59700340, "body": "thanks, I&#39;ll do some research in this area - it would be nice to know how easily this is implemented and how often it is used by developers as a standard way to doing this."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "reply_to_user": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "edited": false, "score": 0, "creation_date": 1458087989, "post_id": 36024665, "comment_id": 59700350, "body": "@Ruegen I&#39;ve added a few more options again. If my answer helped, please upvote/accept!"}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1589459806, "post_id": 36024665, "comment_id": 109306650, "body": "Why <code>foreach</code> is not an instance method - so we can use it on <code>STDIN</code>, <code>StringIO</code>, etc."}], "tags": [], "owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "is_accepted": true, "score": 6, "last_activity_date": 1458087966, "last_edit_date": 1458087966, "creation_date": 1458087472, "answer_id": 36024665, "question_id": 36024626, "link": "https://stackoverflow.com/questions/36024626/does-ruby-on-rails-have-read-stream-for-files/36024665#36024665", "title": "Does Ruby on Rails have read stream for files?", "body": "<p>If you want to read a file in Ruby piece-by-piece, there are a host of methods available to you.</p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.1.0/IO.html#method-i-each_line\" rel=\"noreferrer\"><code>IO#each_line</code></a>/<a href=\"http://ruby-doc.org/core-2.1.0/IO.html#method-c-foreach\" rel=\"noreferrer\"><code>IO::foreach</code></a>, also implemented in <code>File</code> to iterate over each line of the file. Neither reads the whole file into memory; instead, both simply read up until the next newline, return, and pause reading, barring a possible buffer.</li>\n<li><a href=\"http://ruby-doc.org/core-2.1.0/IO.html#method-i-read\" rel=\"noreferrer\"><code>IO#read</code></a>/<a href=\"http://ruby-doc.org/core-2.1.0/IO.html#method-c-read\" rel=\"noreferrer\"><code>IO::read</code></a> takes a <code>length</code> parameter, which allows you to specify for it to read up to <code>length</code> bytes from the file. This will only read that many, and not the whole thing.</li>\n<li><a href=\"http://ruby-doc.org/core-2.1.0/IO.html#method-c-binread\" rel=\"noreferrer\"><code>IO::binread</code></a> does the same as <code>IO::read</code>, but will open the file in binary mode.</li>\n<li><a href=\"http://ruby-doc.org/core-2.1.0/IO.html#method-i-readpartial\" rel=\"noreferrer\"><code>IO#readpartial</code></a> appears to be very similar or identical to <code>IO#read</code>, but is also worth looking at.</li>\n<li><a href=\"http://ruby-doc.org/core-2.1.0/IO.html#method-i-getc\" rel=\"noreferrer\"><code>IO#getc</code></a> and <a href=\"http://ruby-doc.org/core-2.1.0/IO.html#method-i-gets\" rel=\"noreferrer\"><code>IO#gets</code></a> both read from the file until they reach the end of what they'll return, as far as I can tell.</li>\n</ul>\n\n<p>There are several more that I'm looking for right now.</p>\n"}], "owner": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1693, "favorite_count": 0, "accepted_answer_id": 36024665, "answer_count": 1, "score": 0, "last_activity_date": 1458087966, "creation_date": 1458087246, "last_edit_date": 1458087732, "question_id": 36024626, "link": "https://stackoverflow.com/questions/36024626/does-ruby-on-rails-have-read-stream-for-files", "title": "Does Ruby on Rails have read stream for files?", "body": "<p>Does rails have a way to implement read streams like Node js for file reading?</p>\n\n<p>i.e.</p>\n\n<pre><code>fs.createReadStream(__dirname + '/data.txt');\n</code></pre>\n\n<p>as apposed to </p>\n\n<pre><code>fs.readFile(__dirname + '/data.txt');\n</code></pre>\n\n<p>Where I see ruby has</p>\n\n<pre><code>file = File.new(\"data.txt\")\n</code></pre>\n\n<p>I am unsure of the equivalent in ruby/rails for creating a stream and would like to know if this is possible. The reasons I ask is for memory management as a stream will be delivered piece by piece as apposed to one whole file.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9084, "user_id": 1020958, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3449339f1e3c04da6e4d08ad13a3d593?s=128&d=identicon&r=PG", "display_name": "bjhaid", "link": "https://stackoverflow.com/users/1020958/bjhaid"}, "edited": false, "score": 1, "creation_date": 1458084093, "post_id": 36024048, "comment_id": 59699093, "body": "<code>bundle update rake</code>"}, {"owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "reply_to_user": {"reputation": 9084, "user_id": 1020958, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3449339f1e3c04da6e4d08ad13a3d593?s=128&d=identicon&r=PG", "display_name": "bjhaid", "link": "https://stackoverflow.com/users/1020958/bjhaid"}, "edited": false, "score": 0, "creation_date": 1458084282, "post_id": 36024048, "comment_id": 59699171, "body": "Tried it but it didn&#39;t change the default version"}, {"owner": {"reputation": 9084, "user_id": 1020958, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3449339f1e3c04da6e4d08ad13a3d593?s=128&d=identicon&r=PG", "display_name": "bjhaid", "link": "https://stackoverflow.com/users/1020958/bjhaid"}, "edited": false, "score": 1, "creation_date": 1458084367, "post_id": 36024048, "comment_id": 59699200, "body": "you can now <code>bundle exec rake ...</code> and it <i>should</i> work"}, {"owner": {"reputation": 2888, "user_id": 1806803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2a9eacd29aca2e5f9829fcbbd3fe552?s=128&d=identicon&r=PG", "display_name": "2called-chaos", "link": "https://stackoverflow.com/users/1806803/2called-chaos"}, "edited": false, "score": 0, "creation_date": 1458135747, "post_id": 36024048, "comment_id": 59723957, "body": "You are supposed to use <code>bundle exec</code>. If you are too lazy you can use binstubs or (what I do) this hack: <a href=\"https://gist.github.com/2called-chaos/c2ebcbac83fa3846670c\" rel=\"nofollow noreferrer\">gist.github.com/2called-chaos/c2ebcbac83fa3846670c</a>  (which won&#39;t work on windows though)"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "edited": false, "score": 0, "creation_date": 1458083929, "post_id": 36024062, "comment_id": 59699034, "body": "<code>gem list</code> shows which version installed? Are you sure the right <code>rake</code> is in your path?"}, {"owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "edited": false, "score": 0, "creation_date": 1458083966, "post_id": 36024062, "comment_id": 59699042, "body": "rake (11.1.1, 11.1.0, 10.5.0, 10.4.2, 10.0.2)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "edited": false, "score": 1, "creation_date": 1458083994, "post_id": 36024062, "comment_id": 59699051, "body": "You might have the wrong one activated. Try removing all versions but the one you need: <code>gem cleanup rake</code>"}, {"owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "edited": false, "score": 1, "creation_date": 1458084033, "post_id": 36024062, "comment_id": 59699064, "body": "gem uninstall rake -v 10.4.2 ERROR:  While executing gem ... (Gem::InstallError)     gem &quot;rake&quot; cannot be uninstalled because it is a default gem"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "edited": false, "score": 0, "creation_date": 1458084113, "post_id": 36024062, "comment_id": 59699097, "body": "Which version of <code>gem</code> are you using? That seems odd."}, {"owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "edited": false, "score": 0, "creation_date": 1458084326, "post_id": 36024062, "comment_id": 59699187, "body": "For some reason, it&#39;s defaulting to 10.4.2. Won&#39;t let me uninstall or anything..."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1458083849, "creation_date": 1458083849, "answer_id": 36024062, "question_id": 36024048, "link": "https://stackoverflow.com/questions/36024048/rails-getting-rake-error/36024062#36024062", "title": "Rails - Getting Rake error", "body": "<p>Pretty simple:</p>\n\n<pre><code>gem install rake -v 11.1.1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "edited": false, "score": 0, "creation_date": 1458085009, "post_id": 36024245, "comment_id": 59699409, "body": "Did that too. It only has the latest version on it now, but still doesn&#39;t work."}, {"owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "reply_to_user": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "edited": false, "score": 0, "creation_date": 1458085370, "post_id": 36024245, "comment_id": 59699526, "body": "@RayG I just update my post. Lets see if this works."}, {"owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "reply_to_user": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "edited": false, "score": 0, "creation_date": 1458086158, "post_id": 36024245, "comment_id": 59699797, "body": "@RayG aw :\\ Give this last 2 commands a try. 1. <code>bundle exec rake assets:precompile</code> If 1. doesnt work, lets try this as well <code>bundle exec rake db:migrate</code>.. If they both don&#39;t work.. Then I am not sure...."}, {"owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "edited": false, "score": 0, "creation_date": 1458086433, "post_id": 36024245, "comment_id": 59699868, "body": "All the rake commands work just fine if I prepend &#39;bundle exec&#39;, but I get those annoying errors whenever I forget to. That&#39;s what I want to get rid of, but nothing seems to work!"}], "tags": [], "owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "is_accepted": false, "score": 0, "last_activity_date": 1458085350, "last_edit_date": 1458085350, "creation_date": 1458084801, "answer_id": 36024245, "question_id": 36024048, "link": "https://stackoverflow.com/questions/36024048/rails-getting-rake-error/36024245#36024245", "title": "Rails - Getting Rake error", "body": "<p>UPDATE: </p>\n\n<ol>\n<li><code>gem 'rake','10.0.2'</code> in gemfile</li>\n<li><code>gem uninstall rake</code></li>\n<li>remove <code>gemfile.lock</code></li>\n<li><code>bundle update rake</code></li>\n</ol>\n\n<hr>\n\n<p>Simply remove your <code>gemfile.lock</code> and do <code>bundle install</code> :)</p>\n"}, {"tags": [], "owner": {"reputation": 555, "user_id": 5919960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zNSOK.jpg?s=128&g=1", "display_name": "Anurag Kumar", "link": "https://stackoverflow.com/users/5919960/anurag-kumar"}, "is_accepted": false, "score": 28, "last_activity_date": 1462439769, "last_edit_date": 1462439769, "creation_date": 1458128883, "answer_id": 36034828, "question_id": 36024048, "link": "https://stackoverflow.com/questions/36024048/rails-getting-rake-error/36034828#36034828", "title": "Rails - Getting Rake error", "body": "<p>run </p>\n\n<pre><code>$ bundle update rake\n</code></pre>\n\n<p>that worked for me.</p>\n\n<p>see the documentation.\n <a href=\"http://bundler.io/v1.3/man/bundle-update.1.html\">http://bundler.io/v1.3/man/bundle-update.1.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 5676492, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/999196736786324/picture?type=large", "display_name": "Sameer Moin", "link": "https://stackoverflow.com/users/5676492/sameer-moin"}, "is_accepted": false, "score": 0, "last_activity_date": 1458534954, "creation_date": 1458534954, "answer_id": 36123225, "question_id": 36024048, "link": "https://stackoverflow.com/questions/36024048/rails-getting-rake-error/36123225#36123225", "title": "Rails - Getting Rake error", "body": "<p>simply write this</p>\n\n<pre><code>gem install rake\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "is_accepted": false, "score": 0, "last_activity_date": 1458649565, "creation_date": 1458649565, "answer_id": 36154347, "question_id": 36024048, "link": "https://stackoverflow.com/questions/36024048/rails-getting-rake-error/36154347#36154347", "title": "Rails - Getting Rake error", "body": "<p>Check your Gemfile.lock for rake version, you should find something like</p>\n\n<p><code>rake (10.0.2)</code></p>\n\n<p>If you found the above then you have to remove your <code>gemfile.lock</code> then run bundle install again. \nAnd it wouldnt hurt to double check that you are on the right project.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6101476, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/9ec53a72c37cbe21b3a9fa441b37d922?s=128&d=identicon&r=PG", "display_name": "daniel", "link": "https://stackoverflow.com/users/6101476/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1458688421, "creation_date": 1458688421, "answer_id": 36166970, "question_id": 36024048, "link": "https://stackoverflow.com/questions/36024048/rails-getting-rake-error/36166970#36166970", "title": "Rails - Getting Rake error", "body": "<p>just write a command  starting with  <code>bundle exec</code>    example <code>bundle exec rake db:schema</code> </p>\n"}, {"tags": [], "owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "is_accepted": false, "score": 0, "last_activity_date": 1474826788, "last_edit_date": 1474826788, "creation_date": 1460181631, "answer_id": 36513307, "question_id": 36024048, "link": "https://stackoverflow.com/questions/36024048/rails-getting-rake-error/36513307#36513307", "title": "Rails - Getting Rake error", "body": "<p>The problem is your installed <code>rake</code> has a different version to the <code>rake</code> in your <code>Gemfile.lock</code>. Just go in there, <kbd>Cmd</kbd> + <kbd>F</kbd> to search for 'rake', change the version number to the one that terminal wants.</p>\n"}, {"tags": [], "owner": {"reputation": 1805, "user_id": 642616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38cc8209a6c6a3877e4df957c3cff1b?s=128&d=identicon&r=PG", "display_name": "Feuda", "link": "https://stackoverflow.com/users/642616/feuda"}, "is_accepted": false, "score": 0, "last_activity_date": 1482138162, "last_edit_date": 1482138162, "creation_date": 1482136318, "answer_id": 41218534, "question_id": 36024048, "link": "https://stackoverflow.com/questions/36024048/rails-getting-rake-error/41218534#41218534", "title": "Rails - Getting Rake error", "body": "<p>The problem is the rake version you are using is not same as that in your Gemfile, you must make sure of that there's no difference, you can also take no more <code>bundle exec ...</code> with <a href=\"https://github.com/rvm/rubygems-bundler#how-does-this-work-ruby_noexec_wrapper\" rel=\"nofollow noreferrer\">rubygems-bundler</a></p>\n\n<pre><code>gem install rubygems-bundler\n</code></pre>\n\n<p>next run (once)</p>\n\n<pre><code>gem regenerate_binstubs\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6507835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cfb62b3172bb453f6eb7904e10b484e?s=128&d=identicon&r=PG", "display_name": "WegPast", "link": "https://stackoverflow.com/users/6507835/wegpast"}, "is_accepted": false, "score": 1, "last_activity_date": 1484907552, "creation_date": 1484907552, "answer_id": 41761174, "question_id": 36024048, "link": "https://stackoverflow.com/questions/36024048/rails-getting-rake-error/41761174#41761174", "title": "Rails - Getting Rake error", "body": "<p>For me it was just that I needed to use <code>sudo bundle exec rake &lt;...&gt;</code>, maybe it can help someone else...</p>\n\n<p><em>(I was trying to install <a href=\"https://github.com/concerto/concerto\" rel=\"nofollow noreferrer\">concerto</a> on a RaspberryPi, FYI)</em></p>\n"}], "owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7467, "favorite_count": 0, "answer_count": 9, "score": 10, "last_activity_date": 1484907552, "creation_date": 1458083766, "last_edit_date": 1458084620, "question_id": 36024048, "link": "https://stackoverflow.com/questions/36024048/rails-getting-rake-error", "title": "Rails - Getting Rake error", "body": "<p>When running <code>rake</code> commands, I get this error:</p>\n\n<pre><code>You have already activated rake 10.0.2, but your Gemfile requires rake 11.1.1. \nPrepending `bundle exec` to your command may solve this.\n</code></pre>\n\n<p>How do I fix this so that I don't have to run <code>bundle exec</code> before every rake command?</p>\n\n<p>I uninstalled rake and reinstalled, but it's still looking for an older version:</p>\n\n<pre><code>C:/Ruby22-x64/bin/rake:22:in `load': cannot load such file -- C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/rake-10.4.2/bin/rake (LoadError)\n        from C:/Ruby22-x64/bin/rake:22:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "windows", "rubygems", "cygwin", "compass"], "comments": [{"owner": {"reputation": 1123, "user_id": 5240327, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-cuEpwowa5gk/AAAAAAAAAAI/AAAAAAAAAOA/zqMvk3hsQ5c/photo.jpg?sz=128", "display_name": "Brian Brownton", "link": "https://stackoverflow.com/users/5240327/brian-brownton"}, "edited": false, "score": 0, "creation_date": 1458505026, "post_id": 36023788, "comment_id": 59878201, "body": "What happens if you type the path with your compass command? eg. <code>&#47;cygdrive&#47;c&#47;Ruby22&#47;bin&#47;compass &lt;your flags or whatever here&gt;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 886, "user_id": 1034153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fs0iK.png?s=128&g=1", "display_name": "Luca Passani", "link": "https://stackoverflow.com/users/1034153/luca-passani"}, "is_accepted": false, "score": 0, "last_activity_date": 1484157797, "creation_date": 1484157797, "answer_id": 41597692, "question_id": 36023788, "link": "https://stackoverflow.com/questions/36023788/cygwin-compass-command-doesnt-work-after-installing-compass/41597692#41597692", "title": "Cygwin: compass command doesn&#39;t work after installing compass", "body": "<p>I had a similar problem. Be careful that you don't get confused between the Ruby instance you may have installed on your Windows and the Cygwin Ruby. You need to add the Ruby bin directory to your PATH. Here's how I did it (after I installed sass with gem):</p>\n\n<pre><code>$ sass\n-bash: sass: command not found\n\n$ vi .bashrc\n\n$ tail -2 .bashrc\n\nexport PATH=$PATH:/home/luca/bin/\n\n$ source .bashrc\n\n$ sass -v\nSass 3.4.23 (Selective Steve)\n</code></pre>\n"}], "owner": {"reputation": 3111, "user_id": 4245985, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/vBl1E.jpg?s=128&g=1", "display_name": "Galivan", "link": "https://stackoverflow.com/users/4245985/galivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484157797, "creation_date": 1458082522, "last_edit_date": 1458167136, "question_id": 36023788, "link": "https://stackoverflow.com/questions/36023788/cygwin-compass-command-doesnt-work-after-installing-compass", "title": "Cygwin: compass command doesn&#39;t work after installing compass", "body": "<p>I use cygwin64 on windows. I have installed compass using the command</p>\n\n<pre><code>gem install compass\n</code></pre>\n\n<p>and have got the result:</p>\n\n<pre><code>Successfully installed compass-1.0.3\nParsing documentation for compass-1.0.3\nDone installing documentation for compass after 1 seconds\n1 gem installed\n</code></pre>\n\n<p>But when I try to use the command <code>compass</code>, it says the command doesn't exist. </p>\n\n<p>There is a difference in the installation from cygwin compared to when I do it in CMD, where it works. If I do </p>\n\n<pre><code>gem install compass\n</code></pre>\n\n<p>from cmd, I get a different kind of installation including 8 gems:</p>\n\n<pre><code>C:\\Windows\\System32&gt;gem install compass\nFetching: chunky_png-1.3.5.gem (100%)\nSuccessfully installed chunky_png-1.3.5\nFetching: multi_json-1.11.2.gem (100%)\nSuccessfully installed multi_json-1.11.2\nFetching: compass-core-1.0.3.gem (100%)\nSuccessfully installed compass-core-1.0.3\nFetching: compass-import-once-1.0.5.gem (100%)\nSuccessfully installed compass-import-once-1.0.5\nFetching: rb-fsevent-0.9.7.gem (100%)\nSuccessfully installed rb-fsevent-0.9.7\nFetching: ffi-1.9.10-x86-mingw32.gem (100%)\nSuccessfully installed ffi-1.9.10-x86-mingw32\nFetching: rb-inotify-0.9.7.gem (100%)\nSuccessfully installed rb-inotify-0.9.7\nFetching: compass-1.0.3.gem (100%)\n    Compass is charityware. If you love it, please donate on our behalf at http://umdf.org/compass Thanks!\nSuccessfully installed compass-1.0.3\nParsing documentation for chunky_png-1.3.5\nInstalling ri documentation for chunky_png-1.3.5\nParsing documentation for multi_json-1.11.2\nInstalling ri documentation for multi_json-1.11.2\nParsing documentation for compass-core-1.0.3\nInstalling ri documentation for compass-core-1.0.3\nParsing documentation for compass-import-once-1.0.5\nInstalling ri documentation for compass-import-once-1.0.5\nParsing documentation for rb-fsevent-0.9.7\nInstalling ri documentation for rb-fsevent-0.9.7\nParsing documentation for ffi-1.9.10-x86-mingw32\nInstalling ri documentation for ffi-1.9.10-x86-mingw32\nParsing documentation for rb-inotify-0.9.7\nInstalling ri documentation for rb-inotify-0.9.7\nParsing documentation for compass-1.0.3\nInstalling ri documentation for compass-1.0.3\nDone installing documentation for chunky_png, multi_json, compass-core, compass-import-once, rb-fsevent, ffi, rb-inotify, compass after 8 seconds\n8 gems installed\n</code></pre>\n\n<p>So , shouldn't this installation be the same for cygwin?\nI see on the compass page on rubygems.org <a href=\"https://rubygems.org/gems/compass\" rel=\"nofollow\">rubygems.org/gems/compass</a>\nthat some \"Runtime Dependencies\" are listed - so maybe that explains it? So cygwin doesn't download the dependencies, and I have to do it manually?</p>\n\n<p>The big question is, why isn't compass available as a cygwin installer package?</p>\n\n<p>By the way, ruby has been installed from the cygwin installer packages, and sass is installed, and working.</p>\n\n<p>There is a compass file in two places:</p>\n\n<pre><code>C:\\cygwin64\\home\\(my username)\\bin\\compass\nC:\\cygwin64\\home\\(my username)\\.gem\\ruby\\gems\\compass-1.0.3\\bin\\compass\n</code></pre>\n\n<p>but it isn't even looking for this file when I try to run <code>compass</code> command.</p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>I installed these gems: \nchunky_png\nmulti_json\ncompass-core\ncompass-import-once\nrb-fsevent\nffi\nrb-inotify</p>\n\n<p>and now when I run compass it looks for the file, but says:</p>\n\n<pre><code>C:\\Ruby22\\bin\\ruby.exe: No such file or directory -- /cygdrive/c/Ruby22/bin/compass (LoadError)\n</code></pre>\n\n<p>which is a step in the right direction. But it looks for it in the windows installation of ruby, not the cygwin installation.</p>\n\n<p>this command <code>which -a compass</code> gives:</p>\n\n<pre><code>/cygdrive/c/Ruby22/bin/compass\n/cygdrive/c/Ruby22/bin/compass\n</code></pre>\n\n<p>^this is supposed to be <code>usr\\bin\\gem</code> I think..</p>\n"}, {"tags": ["ruby", "imagemagick", "rmagick"], "answers": [{"comments": [{"owner": {"reputation": 1140, "user_id": 3683228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/509bf3f9358421fc8ffdfa549099dfd4?s=128&d=identicon&r=PG", "display_name": "zverok", "link": "https://stackoverflow.com/users/3683228/zverok"}, "edited": false, "score": 0, "creation_date": 1458120833, "post_id": 36025558, "comment_id": 59712829, "body": "Wow. It really makes sense now! Thank you :)"}, {"owner": {"reputation": 1140, "user_id": 3683228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/509bf3f9358421fc8ffdfa549099dfd4?s=128&d=identicon&r=PG", "display_name": "zverok", "link": "https://stackoverflow.com/users/3683228/zverok"}, "edited": false, "score": 0, "creation_date": 1458120907, "post_id": 36025558, "comment_id": 59712878, "body": "...And so, for my &quot;expected&quot; result (draw text near some point, but to different directions from it) there&#39;s no simple solution, right?.."}, {"owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "reply_to_user": {"reputation": 1140, "user_id": 3683228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/509bf3f9358421fc8ffdfa549099dfd4?s=128&d=identicon&r=PG", "display_name": "zverok", "link": "https://stackoverflow.com/users/3683228/zverok"}, "edited": false, "score": 0, "creation_date": 1458133460, "post_id": 36025558, "comment_id": 59721931, "body": "Ah, yes it will take some light math work on your end, but nothing that can&#39;t be combined into a one-liner subclass."}, {"owner": {"reputation": 1140, "user_id": 3683228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/509bf3f9358421fc8ffdfa549099dfd4?s=128&d=identicon&r=PG", "display_name": "zverok", "link": "https://stackoverflow.com/users/3683228/zverok"}, "edited": false, "score": 0, "creation_date": 1458161910, "post_id": 36025558, "comment_id": 59742162, "body": "Yeah, thanks, I already came with get_type_metrics solution; just wanted to know if it is not an overkill for the task."}], "tags": [], "owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "is_accepted": true, "score": 3, "last_activity_date": 1458136159, "last_edit_date": 1592644375, "creation_date": 1458093690, "answer_id": 36025558, "question_id": 36023676, "link": "https://stackoverflow.com/questions/36023676/getting-rmagick-imagemagick-gravity-with-text/36025558#36025558", "title": "Getting RMagick/ImageMagick gravity with text", "body": "<blockquote>\n<p>I suppose its something in ImageMagick's gravity concept that I can't get.</p>\n<p>What is it?..</p>\n</blockquote>\n<p>The key to understanding what's going on is to locate the <strong>CenterGravity</strong> text.</p>\n<p><a href=\"https://i.stack.imgur.com/dX43A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dX43A.png\" alt=\"Where is Center?\" /></a></p>\n<p>Shifted left by <em>150px</em>, and down by <em>150px</em>.</p>\n<p>Now compare compare <strong>NorthWestGravity</strong> position.</p>\n<p><a href=\"https://i.stack.imgur.com/VpxqN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VpxqN.png\" alt=\"Where is NorthWest?\" /></a></p>\n<p>Also translated left &amp; down by <em>150px</em> respectively. Seeing a trend?</p>\n<p>Your issue is with this line...</p>\n<pre><code>draw.text 150, 150, g\n</code></pre>\n<p><strike>The <code>Magick::Draw</code> API maps to <a href=\"http://www.imagemagick.org/script/magick-vector-graphics.php\" rel=\"nofollow noreferrer\">MVG</a> spec. Use <code>Magick::Draw.push</code> &amp; <code>Magick::Draw.pop</code> to control drawing context.</strike></p>\n<h2>Edit from comments...</h2>\n<p>For setting the <em>origin</em> of text to be drawing, you'll need to calculate the position after evaluation the text/type metrics.</p>\n<p>Example.</p>\n<pre class=\"lang-ruby prettyprint-override\"><code>require 'rmagick'\n\ninclude Magick\n\nimg = Image.new(300, 300) {\n  self.background_color = &quot;palegreen&quot;\n}\ndraw = Draw.new\ndotes = Draw.new # Dotes added for point of origin\ndotes.fill = &quot;red&quot;\n\ncursor = 1\n# for each of known gravity constants...\n%w[NorthWestGravity NorthGravity NorthEastGravity WestGravity CenterGravity EastGravity SouthWestGravity SouthGravity SouthEastGravity].\neach{|g|\n  offsetX = 150\n  offsetY = cursor * 25\n  dotes.circle offsetX, offsetY, offsetX+2, offsetY+2\n  # Get metrics of text\n  metrics = draw.get_type_metrics(img, g)\n  # Full width\n  if %w[NorthWestGravity WestGravity SouthWestGravity].include? g then\n    offsetX -= metrics[:width]\n  end\n  # Full height\n  if %w[SouthWestGravity SouthGravity SouthEastGravity].include? g then\n    offsetY += metrics[:ascent]\n  end\n  # Half width\n  if %w[NorthGravity SouthGravity CenterGravity].include? g then\n    offsetX -= metrics[:width] / 2\n  end\n  # Half height\n  if %w[WestGravity CenterGravity EastGravity].include? g then\n    offsetY += metrics[:ascent] / 2\n  end\n  draw.text offsetX, offsetY, g\n  cursor += 1\n}\ndotes.draw(img)\ndraw.draw(img)\n\nimg.write('output.png')\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/xj3Us.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xj3Us.png\" alt=\"gravity with text\" /></a></p>\n"}], "owner": {"reputation": 1140, "user_id": 3683228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/509bf3f9358421fc8ffdfa549099dfd4?s=128&d=identicon&r=PG", "display_name": "zverok", "link": "https://stackoverflow.com/users/3683228/zverok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "accepted_answer_id": 36025558, "answer_count": 1, "score": 1, "last_activity_date": 1458136159, "creation_date": 1458081922, "question_id": 36023676, "link": "https://stackoverflow.com/questions/36023676/getting-rmagick-imagemagick-gravity-with-text", "title": "Getting RMagick/ImageMagick gravity with text", "body": "<p>Here is Ruby code:</p>\n\n\n\n<pre><code>require 'rmagick'\n\ninclude Magick\n\nimg = Image.new(300, 300)\ndraw = Draw.new\n\ndraw.line(0, 150, 300, 150)\ndraw.line(150, 0, 150, 300)\n\n# for each of known gravity constants...\n%w[NorthWestGravity NorthGravity NorthEastGravity WestGravity CenterGravity EastGravity SouthWestGravity SouthGravity SouthEastGravity].\neach{|g|\n  # set gravity to this value...\n  draw.gravity Magick.const_get(g)\n  # ...and draw text with this constant name\n  draw.text 150, 150, g\n}\n\ndraw.draw(img)\n\nimg.write('tmp/gravity.png')\n</code></pre>\n\n<p>Here is image which it produces:</p>\n\n<p><img src=\"https://i.imgur.com/kPbzi5k.png\" alt=\"\"></p>\n\n<p>For SouthEast/NorthWest and similar gravities result is as expected (text is near 150,150, moved in desired direction). But for South, North and others result is really pretty weird. </p>\n\n<p>As far as I can understand from code, RMagick just translates gravity and text commands into corresponding ImageMagick drawing primitives, so, I suppose its something in ImageMagick's gravity concept that I can't get.</p>\n\n<p>What is it?..</p>\n"}, {"tags": ["ruby", "yield"], "answers": [{"comments": [{"owner": {"reputation": 527, "user_id": 4718693, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PPfe4d4zDdE/AAAAAAAAAAI/AAAAAAAAAF0/gFrFxk0JRd4/photo.jpg?sz=128", "display_name": "J.M. Janzen", "link": "https://stackoverflow.com/users/4718693/j-m-janzen"}, "edited": false, "score": 0, "creation_date": 1589920234, "post_id": 36023672, "comment_id": 109483802, "body": "Well I&#39;ll be, the darn thing just works. Maybe not the most readable thing for a total ruby newbie to come across, but it does what it says on the tin. Thanks!"}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 6, "last_activity_date": 1458081893, "creation_date": 1458081893, "answer_id": 36023672, "question_id": 36023600, "link": "https://stackoverflow.com/questions/36023600/is-there-a-concise-syntax-for-chaining-yield-calls-in-ruby/36023672#36023672", "title": "Is there a concise syntax for chaining yield calls in Ruby?", "body": "<p>When defining a method in Ruby, you can also optionally define the block as a special named argument:</p>\n\n<pre><code>def bar(count, &amp;block)\n  #...\nend\n</code></pre>\n\n<p>Then, in the method, you can pass the block (or generally: any Proc object) as a block to a method. Thus, the following method will be fully equivalent to your <code>bar</code> method:</p>\n\n<pre><code> def bar(count, &amp;block)\n  numbers = (0..count).to_a\n  foo(numbers, &amp;block)\nend\n</code></pre>\n\n<p>Note that even when defining a <code>&amp;block</code> argument in the method's signature, it is not mandatory to pass a block. If you don't pass one, <code>block</code> will be <code>nil</code> in the method body.</p>\n"}], "owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "accepted_answer_id": 36023672, "answer_count": 1, "score": 1, "last_activity_date": 1458081893, "creation_date": 1458081521, "question_id": 36023600, "link": "https://stackoverflow.com/questions/36023600/is-there-a-concise-syntax-for-chaining-yield-calls-in-ruby", "title": "Is there a concise syntax for chaining yield calls in Ruby?", "body": "<p>I have a method that iterates over some records and does something with them, optionally yielding a result -- something analogous to:</p>\n\n<pre><code>@evens = []\ndef foo(numbers)\n  numbers.each do |r|\n    even = r % 2 == 0\n    @evens &lt;&lt; r if even\n    yield \"#{r}: #{even}\" if block_given?\n  end\nend\n</code></pre>\n\n<p>I have a second method that fetches records and passes them to the first method, something analogous to:</p>\n\n<pre><code>def bar(count)\n  numbers = (0..count).to_a\n  foo(numbers)\nend\n</code></pre>\n\n<p>I want to change this method to also take an optional block, yielding the results from the first method. What I've come up with so far:</p>\n\n<pre><code>def bar(count)\n  numbers = (0..count).to_a\n  foo(numbers) do |result|\n    yield result if block_given?\n  end\nend\n</code></pre>\n\n<p>This feels like about two more lines and one more <code>if block_given?</code> check than I ought to need. Is there a more concise way to simply say \"yield whatever this method call yields, if anything\"?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "ajax"], "comments": [{"owner": {"reputation": 1969, "user_id": 2291915, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ucPQw.jpg?s=128&g=1", "display_name": "buczek", "link": "https://stackoverflow.com/users/2291915/buczek"}, "edited": false, "score": 0, "creation_date": 1458082779, "post_id": 36023540, "comment_id": 59698644, "body": "Welcome to StackOverflow! Please be clear on what the issue. Make sure to create a Minimal, Verifiable, and Complete example (<a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>)."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1458083693, "post_id": 36023540, "comment_id": 59698957, "body": "If you create an instance variable in your controller it should appear in your view. Are you sure the <code>price</code> method is being executed?"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 1, "creation_date": 1458093325, "post_id": 36023540, "comment_id": 59701711, "body": "If it&#39;s a ajax request, it&#39;s mostly likely that you forget to change the dom after getting the response. And the response would be a json string, so you don&#39;t have ERB."}], "answers": [{"tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": true, "score": 2, "last_activity_date": 1458085871, "creation_date": 1458085871, "answer_id": 36024405, "question_id": 36023540, "link": "https://stackoverflow.com/questions/36023540/how-to-pass-data-to-the-views-rails/36024405#36024405", "title": "How to pass data to the views Rails", "body": "<p>If I understand your question correctly, your <code>price</code> action is handled by the <code>POST</code> request you are making. But you are expecting the instance variable <code>@total_price</code> be available in the form.</p>\n\n<p>You need to set the instance variables in the action that renders the form. Not in the action that processes the form. </p>\n"}], "owner": {"reputation": 48, "user_id": 6068759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0i2Hw8UKSPQ/AAAAAAAAAAI/AAAAAAAAAA0/C5334rOgHag/photo.jpg?sz=128", "display_name": "volkovbro", "link": "https://stackoverflow.com/users/6068759/volkovbro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 36024405, "answer_count": 1, "score": 1, "last_activity_date": 1458085871, "creation_date": 1458081218, "last_edit_date": 1458083650, "question_id": 36023540, "link": "https://stackoverflow.com/questions/36023540/how-to-pass-data-to-the-views-rails", "title": "How to pass data to the views Rails", "body": "<p>I have form, that send ajax post request to my controller. In my controller I caluculate total price:</p>\n\n<pre><code>def price\n  @direction = params[:@directions_ids].to_f\n  @kind_of_work = params[:kind_of_work].to_f\n  @topic = params[:topic].to_f\n  @work_discipline = params[:work_discipline].to_f\n  @number_of_pages = params[:number_of_pages].to_f\n  @deadline = params[:deadline].to_f\n  @singularity = params[:singularity].to_f\n  @manual = params[:manual]\n  @example = params[:example]\n  @total_price = @direction*@kind_of_work*@number_of_pages*@deadline*@singularity\n  respond_to do |format|\n    format.js\n    format.html\n  end\nend\n</code></pre>\n\n<p>but i cant use it in my form </p>\n\n<pre><code>&lt;%= f.hidden_field :total_price, :value =&gt; @total_price %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "error-handling", "initializer", "gibbon"], "comments": [{"owner": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "edited": false, "score": 0, "creation_date": 1458079734, "post_id": 36023109, "comment_id": 59697426, "body": "Can you try doing it with this syntax: Gibbon::Request.new(api_key: &quot;your_api_key&quot;, timeout: 15) ?"}, {"owner": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "edited": false, "score": 0, "creation_date": 1458079861, "post_id": 36023109, "comment_id": 59697494, "body": "do this and then try to declare the variables under it. It seems like the variable is still not initialized when you try to give it values"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "edited": false, "score": 0, "creation_date": 1458079997, "post_id": 36023109, "comment_id": 59697555, "body": "No unfortunately same error even with variable declared under it in file. Thanks for trying @HristoGeorgiev"}, {"owner": {"reputation": 9084, "user_id": 1020958, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3449339f1e3c04da6e4d08ad13a3d593?s=128&d=identicon&r=PG", "display_name": "bjhaid", "link": "https://stackoverflow.com/users/1020958/bjhaid"}, "edited": false, "score": 0, "creation_date": 1458084513, "post_id": 36023109, "comment_id": 59699249, "body": "you probably might need to put <code>require &#39;gibbon&#39;</code> at the top of that file, ruby somehow can&#39;t find the <code>Gibbon::Request</code> constant, so that means it&#39;s probably not loaded by rails"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 9084, "user_id": 1020958, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3449339f1e3c04da6e4d08ad13a3d593?s=128&d=identicon&r=PG", "display_name": "bjhaid", "link": "https://stackoverflow.com/users/1020958/bjhaid"}, "edited": false, "score": 0, "creation_date": 1458087470, "post_id": 36023109, "comment_id": 59700200, "body": "@bjhaid I added it as you suggested, but still no luck. Updated question"}, {"owner": {"reputation": 9084, "user_id": 1020958, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3449339f1e3c04da6e4d08ad13a3d593?s=128&d=identicon&r=PG", "display_name": "bjhaid", "link": "https://stackoverflow.com/users/1020958/bjhaid"}, "edited": false, "score": 0, "creation_date": 1458089332, "post_id": 36023109, "comment_id": 59700716, "body": "you should have <code>gem &#39;gibbon&#39;</code> in your Gemfile and then run <code>bundle install</code> after that"}], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458087424, "post_id": 36024330, "comment_id": 59700184, "body": "Thanks Sammygadd for your help! I added <code>require &#39;gibbon&#39;</code>, ran bundle install again with <code>gem gibbon</code> but still same error :/"}, {"owner": {"reputation": 299, "user_id": 3251036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88d9e964e6d6500c8d511cde831486?s=128&d=identicon&r=PG&f=1", "display_name": "sammygadd", "link": "https://stackoverflow.com/users/3251036/sammygadd"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458089123, "post_id": 36024330, "comment_id": 59700644, "body": "When you run <code>bundle install</code> do you see gibbon listed in the output?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458090159, "post_id": 36024330, "comment_id": 59700908, "body": "Yes sir I did. Problem persisted"}, {"owner": {"reputation": 299, "user_id": 3251036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88d9e964e6d6500c8d511cde831486?s=128&d=identicon&r=PG&f=1", "display_name": "sammygadd", "link": "https://stackoverflow.com/users/3251036/sammygadd"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458114902, "post_id": 36024330, "comment_id": 59709160, "body": "Sorry about the basic questions, but did you add the gem to a group e.g. test or production and your running in another mode e.g. development?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1458148411, "post_id": 36024330, "comment_id": 59733853, "body": "No problem sammygadd. It is not in a production, test, or development group. It is with my main list of gems"}], "tags": [], "owner": {"reputation": 299, "user_id": 3251036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88d9e964e6d6500c8d511cde831486?s=128&d=identicon&r=PG&f=1", "display_name": "sammygadd", "link": "https://stackoverflow.com/users/3251036/sammygadd"}, "is_accepted": false, "score": 0, "last_activity_date": 1458085372, "creation_date": 1458085372, "answer_id": 36024330, "question_id": 36023109, "link": "https://stackoverflow.com/questions/36023109/uninitialized-constant-request-nameerror/36024330#36024330", "title": "uninitialized constant Request (NameError)", "body": "<p>You should add the gem to the rails Gemfile. Then rails will take care of the <code>require 'gibbon'</code> for you.</p>\n\n<p>Edit: <code>gem install gibbon</code> will just install the gem on your system. Rails won't know that it is needed unless you add it to the Gemfile.</p>\n"}, {"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1459362865, "post_id": 36170561, "comment_id": 60257308, "body": "Got it! Had to move the code directly into the controller as you suggested :]"}], "tags": [], "owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "is_accepted": true, "score": 1, "last_activity_date": 1458711382, "creation_date": 1458711382, "answer_id": 36170561, "question_id": 36023109, "link": "https://stackoverflow.com/questions/36023109/uninitialized-constant-request-nameerror/36170561#36170561", "title": "uninitialized constant Request (NameError)", "body": "<p>I experienced same issue with <code>gibbon 2.0</code> version as it has updated some methods for initializations then i tried a previous version &amp; it worked but first You should try it this way :</p>\n\n<pre><code>gibbon = Gibbon::Request.new(api_key: \"MailChimp_API_Key\")\ngibbon.timeout = 10\n</code></pre>\n\n<p>If no luck with this in app/config/initializers/gibbon.rb then you can try to do this direct in the controller just before using gibbon to retrieve or add list stuff for testing.</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "accepted_answer_id": 36170561, "answer_count": 2, "score": 0, "last_activity_date": 1458711382, "creation_date": 1458079466, "last_edit_date": 1495541733, "question_id": 36023109, "link": "https://stackoverflow.com/questions/36023109/uninitialized-constant-request-nameerror", "title": "uninitialized constant Request (NameError)", "body": "<p>I get this error: <code>/LiveToChallenge/config/initializers/gibbon.rb:1:in '&lt;top (required)&gt;': uninitialized constant Gibbon::Request (NameError)</code> when I try to start the server <code>rails server</code>.</p>\n\n<p><strong>app/config/initializers/gibbon.rb</strong></p>\n\n<pre><code>require 'gibbon'\nGibbon::Request.api_key = \"24e4a2233cd34debb76ed083dc3f8b5379-us8\"\nGibbon::Request.timeout = 15\n</code></pre>\n\n<p>I followed <a href=\"https://github.com/amro/gibbon\" rel=\"nofollow noreferrer\">gibbon gem</a> instructions, which seemed simple enough. Maybe I'm missing something besides just <code>gem install gibbon</code> and adding <code>api_key</code> to initializer?</p>\n\n<p>The gem is installed as <code>gibbon (2.2.2, 2.2.1, 1.2.1)</code></p>\n\n<p>And as added measure I put <code>gem gibbon</code> in the gemfile and ran <code>bundle install</code></p>\n\n<p>This problem is part of a <a href=\"https://stackoverflow.com/questions/35949045/how-to-save-email-to-subscribers-with-checkbox\">larger problem</a> I've been working on solving.</p>\n"}, {"tags": ["java", "ruby", "node.js", "servlets", "g-wan"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1458082071, "post_id": 36022913, "comment_id": 59698396, "body": "I&#39;m voting to close this question as off-topic because this seems to be a request to enhance/modify a 3rd party product."}, {"owner": {"reputation": 3189, "user_id": 1079036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/368d20296c0ae6df9a0dd7ddfbdec535?s=128&d=identicon&r=PG", "display_name": "Gil", "link": "https://stackoverflow.com/users/1079036/gil"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1458137143, "post_id": 36022913, "comment_id": 59725191, "body": "@Jim: this is a request about how to programmatically modify the default G-WAN behavior. Quite relevant in stackoverflow."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 1261723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ov8og.jpg?s=128&g=1", "display_name": "PCKB", "link": "https://stackoverflow.com/users/1261723/pckb"}, "edited": false, "score": 0, "creation_date": 1458149623, "post_id": 36038061, "comment_id": 59734703, "body": "Thank you Gil for your fast answer and I took a look at your sample. Unfortunately, I don&#39;t have the skill to modifiy your sample to do what is requested by the young pupils of my non profit organization (computer school of Mirmande). So, what amout of money do the G-WAN folks need to provide such a handler that would become free for all the other users as a part of the next G-WAN release? TIA for a financial quote."}], "tags": [], "owner": {"reputation": 3189, "user_id": 1079036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/368d20296c0ae6df9a0dd7ddfbdec535?s=128&d=identicon&r=PG", "display_name": "Gil", "link": "https://stackoverflow.com/users/1079036/gil"}, "is_accepted": false, "score": 1, "last_activity_date": 1458324398, "last_edit_date": 1458324398, "creation_date": 1458137253, "answer_id": 36038061, "question_id": 36022913, "link": "https://stackoverflow.com/questions/36022913/is-it-possible-and-how-to-change-the-way-g-wan-proceed-requests/36038061#36038061", "title": "Is it possible (and how) to change the way G-WAN proceed requests?", "body": "<p>There's such an example of <code>Connection Handler</code> on the G-WAN <a href=\"http://www.gwan.ch/developers#handler\" rel=\"nofollow\">website</a>. You just can rewrite request as you wish before/while/after G-WAN processes them.</p>\n\n<p>In the website example, replace line #6 by: </p>\n\n<pre><code>char *p = strstr(read_xbuf-&gt;ptr, \".java?\"); \nif(p) \n{ \n   char *b = p; while(*b != '/') b--; // find script name\n   memmove(b + 1, b, p + sizeof(\".java?\") - (b + 2)); // make room\n   b[1] = '?'; // add leading '?'\n}\n</code></pre>\n\n<p>This will do the reqrite you wanted. Drop us a line at gwan.ch if you have a problem with that code.</p>\n\n<p>Please mark as \"accepted\" the answers that match your needs.</p>\n"}], "owner": {"reputation": 105, "user_id": 1261723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ov8og.jpg?s=128&g=1", "display_name": "PCKB", "link": "https://stackoverflow.com/users/1261723/pckb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1458324398, "creation_date": 1458078694, "last_edit_date": 1458079980, "question_id": 36022913, "link": "https://stackoverflow.com/questions/36022913/is-it-possible-and-how-to-change-the-way-g-wan-proceed-requests", "title": "Is it possible (and how) to change the way G-WAN proceed requests?", "body": "<p>Today, G-WAN proceed requests like this (<em>sample using the loan.java servlet</em>):</p>\n\n<pre><code>localhost/?loan.java&amp;name=Eva&amp;amount=100000&amp;term=5&amp;rate=4.2\n</code></pre>\n\n<p>Could a specific handler (<em>or even better a G-WAN switch</em>) proceed requests like that:</p>\n\n<pre><code>localhost/loan.java?name=Eva&amp;amount=100000&amp;term=5&amp;rate=4.2\n</code></pre>\n\n<p>where:</p>\n\n<p><em>a)</em> there is no \"<strong>?</strong>\" character right before the name of the servlet name <strong>but just before the first parameter</strong> and,</p>\n\n<p><em>b)</em> the \"<strong>&amp;</strong>\" character is placed not before the first parameter <strong>but before the second, then the third, the fourth, (<em>and so on</em>)</strong> parameters.</p>\n\n<p>Such a handler (<em>or even better a G-WAN switch</em>) will make G-WAN compatible with the zillions of codes (Go, Java, Mono, NodeJS, PHP, Ruby, etc.) used to create web applications and web sites that today devs are obliged to rewrite to simply be usable with G-WAN and benefit of its hight performances, scalability and security.</p>\n\n<p>Note: previous answers never ever answered to the question of another contibutor: \"how to remove the \"<strong>?</strong>\" character\" and the init.c code doesn't provide the way to remove the QUERY_CHAR but:</p>\n\n<p><em>a)</em> only to chose from the character set: - _ . ! ~ * ' ( ) and,</p>\n\n<p><em>b)</em> not to place the \"?\" and the \"&amp;\" charaters at the right spots as needed above. </p>\n\n<p>So, I hope my question is more clear.</p>\n\n<p>And if money is needed, what would be the price to pay to the G-WAN devs to get such a handler (<em>or even better a G-WAN switch</em>) with the standard G-WAN release to proceed requests like all the other web servers do, even if using a regex piece of code would slow down G-WAN a little bit (<em>if any</em>)?</p>\n\n<p>Thank you in advance for a way to achieve such a needed enhancement to this exceptionnal web application server.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm", "mysql2", "pg"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1458080948, "post_id": 36022898, "comment_id": 59697983, "body": "The 2.2.0 thing is not a problem. All the current versions of 2.2.x have an Abi version of 2.2.0 so store gems there."}, {"owner": {"reputation": 165, "user_id": 1314155, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ea033ad0d932a56318452949a2ff1a27?s=128&d=identicon&r=PG", "display_name": "Dieglock", "link": "https://stackoverflow.com/users/1314155/dieglock"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1458083732, "post_id": 36022898, "comment_id": 59698971, "body": "Gems are there. Must be something with bundler. Installed via rvm. 2 apps, 2 db drivers. Same trouble..."}, {"owner": {"reputation": 165, "user_id": 1314155, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ea033ad0d932a56318452949a2ff1a27?s=128&d=identicon&r=PG", "display_name": "Dieglock", "link": "https://stackoverflow.com/users/1314155/dieglock"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1458180721, "post_id": 36022898, "comment_id": 59749182, "body": "I found a detour, not solution. First approach was to use latest stable ruby (2.2.3) and rails (4.2.6)... and library mix was there again. So, go back to ruby 2.0.0 and rails 4.2.4 and libraries are now working again."}, {"owner": {"reputation": 1570, "user_id": 422550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/58cca0975a1263cb266c2789d7180dbe?s=128&d=identicon&r=PG", "display_name": "mwangi", "link": "https://stackoverflow.com/users/422550/mwangi"}, "edited": false, "score": 0, "creation_date": 1471000096, "post_id": 36022898, "comment_id": 65189980, "body": "Hello, I have this same problem. Did you ever get to the root cause of this issue ?"}, {"owner": {"reputation": 165, "user_id": 1314155, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ea033ad0d932a56318452949a2ff1a27?s=128&d=identicon&r=PG", "display_name": "Dieglock", "link": "https://stackoverflow.com/users/1314155/dieglock"}, "edited": false, "score": 0, "creation_date": 1473096194, "post_id": 36022898, "comment_id": 66001792, "body": "Not really, mwangi. I have kept using ruby 2.0.0 since then. To keep the site running was prior to dig deeper."}], "owner": {"reputation": 165, "user_id": 1314155, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ea033ad0d932a56318452949a2ff1a27?s=128&d=identicon&r=PG", "display_name": "Dieglock", "link": "https://stackoverflow.com/users/1314155/dieglock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1626, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1458078628, "creation_date": 1458078628, "last_edit_date": 1495540863, "question_id": 36022898, "link": "https://stackoverflow.com/questions/36022898/incompatible-library-versions-ruby-rvm-bundler", "title": "Incompatible library versions ruby, rvm, bundler", "body": "<p>I am having troubles with Ruby using rvm. First I thought problem was with specific gem pg. But now I was able to reproduce error using mysql2. I have troubles to diagnose the problem...</p>\n\n<p>Here is the last log.</p>\n\n<pre><code>bundle exec rake secret\nrake aborted!\nLoadError: incompatible library version - /home/dominim6/ror/dapps/releases/20160315195705/vendor/bundle/ruby/2.2.0/gems/mysql2-0.3.20/lib/mysql2/mysql2.so\n/home/dominim6/ror/dapps/releases/20160315195705/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\n/home/dominim6/ror/dapps/releases/20160315195705/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `block in require'\n/home/dominim6/ror/dapps/releases/20160315195705/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:240:in `load_dependency'\n/home/dominim6/ror/dapps/releases/20160315195705/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\n/home/dominim6/ror/dapps/releases/20160315195705/vendor/bundle/ruby/2.2.0/gems/mysql2-0.3.20/lib/mysql2.rb:31:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.2.3@424_dapps/gems/bundler-1.11.2/lib/bundler/runtime.rb:77:in `require'\n/usr/local/rvm/gems/ruby-2.2.3@424_dapps/gems/bundler-1.11.2/lib/bundler/runtime.rb:77:in `block (2 levels) in require'\n/usr/local/rvm/gems/ruby-2.2.3@424_dapps/gems/bundler-1.11.2/lib/bundler/runtime.rb:72:in `each'\n/usr/local/rvm/gems/ruby-2.2.3@424_dapps/gems/bundler-1.11.2/lib/bundler/runtime.rb:72:in `block in require'\n/usr/local/rvm/gems/ruby-2.2.3@424_dapps/gems/bundler-1.11.2/lib/bundler/runtime.rb:61:in `each'\n/usr/local/rvm/gems/ruby-2.2.3@424_dapps/gems/bundler-1.11.2/lib/bundler/runtime.rb:61:in `require'\n/usr/local/rvm/gems/ruby-2.2.3@424_dapps/gems/bundler-1.11.2/lib/bundler.rb:99:in `require'\n/home/dominim6/ror/dapps/releases/20160315195705/config/application.rb:7:in `&lt;top (required)&gt;'\n/home/dominim6/ror/dapps/releases/20160315195705/Rakefile:4:in `require'\n/home/dominim6/ror/dapps/releases/20160315195705/Rakefile:4:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>Why does it search for 2.2.0 here? Why not 2.2.3? (which, by the way, is not installed under vendor)</p>\n\n<pre><code>/home/dominim6/ror/dapps/releases/20160315195705/vendor/bundle/ruby/2.2.0/gems/mysql2-0.3.20/lib/mysql2.rb:31:in `&lt;top (required)&gt;'\n    /usr/local/rvm/gems/ruby-2.2.3@424_dapps/gems/bundler-1.11.2/lib/bundler/runtime.rb:77:in `require'\n</code></pre>\n\n<p>Similar case, I believe, is <a href=\"https://stackoverflow.com/questions/33809990/rails-pg-gem-incompatible-library-version\">this other question about pg</a>. I had that trouble, that is why I tested now with mysql. I even created a <a href=\"https://bugs.ruby-lang.org/issues/12146\" rel=\"nofollow noreferrer\">bug at ruby, which was rejected</a> because is a mix of library extensions...</p>\n\n<p>Question is what is mixing libraries. My guess is rvm. Any similar cases? Any help to diagnose? I can put more info using both pg and mysql2.</p>\n"}]