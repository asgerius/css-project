[{"tags": ["ruby", "networking", "chef-infra"], "comments": [{"owner": {"reputation": 353, "user_id": 6800389, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f9f28dc641e5ac8fe83f1094d298ae12?s=128&d=identicon&r=PG&f=1", "display_name": "Brando__", "link": "https://stackoverflow.com/users/6800389/brando"}, "edited": false, "score": 0, "creation_date": 1494017367, "post_id": 43646267, "comment_id": 74666548, "body": "The solution below had a really bizarre effect that I can&#39;t explain. It would always work in the chef-shell, but very rarely (once out of 20+ machines) work in a recipe. The alternative solution I ended up using can be found here  <a href=\"http://stackoverflow.com/questions/43773141/ruby-return-top-level-hash-key-if-value-recursively-contains-string\" title=\"ruby return top level hash key if value recursively contains string\">stackoverflow.com/questions/43773141/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 6800389, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f9f28dc641e5ac8fe83f1094d298ae12?s=128&d=identicon&r=PG&f=1", "display_name": "Brando__", "link": "https://stackoverflow.com/users/6800389/brando"}, "edited": false, "score": 0, "creation_date": 1493261074, "post_id": 43647453, "comment_id": 74343680, "body": "This works perfectly. Thank you. MUCH better than the garbage I threw together."}, {"owner": {"reputation": 353, "user_id": 6800389, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f9f28dc641e5ac8fe83f1094d298ae12?s=128&d=identicon&r=PG&f=1", "display_name": "Brando__", "link": "https://stackoverflow.com/users/6800389/brando"}, "edited": false, "score": 0, "creation_date": 1493274289, "post_id": 43647453, "comment_id": 74347912, "body": "I&#39;ve tried going through this bit by bit in the chef-shell and googling, but how is this actually working?  I don&#39;t follow on the variable assignment. I vaguely get that it&#39;s iterating through the ohai hashes until something finally returns that returns true, per the enumerable#find method, but to what and how interface and data is assigned I don&#39;t follow. I&#39;m not familiar with what the  [ ] method notation is doing either"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 2, "last_activity_date": 1493258657, "creation_date": 1493258657, "answer_id": 43647453, "question_id": 43646267, "link": "https://stackoverflow.com/questions/43646267/ruby-chef-return-the-interface-associated-to-an-ip/43647453#43647453", "title": "Ruby/Chef return the interface associated to an IP", "body": "<p>Something like this:</p>\n\n<pre><code>def interface_for_ipv4(addr)\n  node['network']['interfaces'].find do |interface, data|\n    data['addresses'][addr]\n  end.first\nend\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 6800389, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f9f28dc641e5ac8fe83f1094d298ae12?s=128&d=identicon&r=PG&f=1", "display_name": "Brando__", "link": "https://stackoverflow.com/users/6800389/brando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 43647453, "answer_count": 1, "score": 0, "last_activity_date": 1493258657, "creation_date": 1493249770, "last_edit_date": 1493251669, "question_id": 43646267, "link": "https://stackoverflow.com/questions/43646267/ruby-chef-return-the-interface-associated-to-an-ip", "title": "Ruby/Chef return the interface associated to an IP", "body": "<p>I am looking for a way to determine the interface associated to a given IP. Right now I have the opposite where I can return the IP for an interface.</p>\n\n<pre><code>def ipv4_for_interface(i)\n  return unless node['network']['interfaces'].has_key?(i)\n  addr, data = node['network']['interfaces'][i]['addresses'].find { |x| x[1]['family'] == 'inet' }\n  addr\nend\n</code></pre>\n\n<p>For my specific purpose I could do some really dumb iterating through an array and do pattern matching, but I'd like to know how to do it generally. </p>\n\n<p>The internet is full of examples of how to do the opposite of what I'm looking for.</p>\n\n<p>My current hack is this and I really don't like it.</p>\n\n<pre><code>def first_matching_ipv4(match_method)\n  all = all_matching_ipv4(match_method)\n  return all[0] unless all.empty?\nend\n\ndef first_private_ipv4\n  first_matching_ipv4(:private_ipv4?)\nend\n\n\nruby_block 'get private' do\n  block do\n    node.default['return_val']=$(ifconfig | grep -B1 \"inet addr:#{first_private_ipv4}\" | awk '$1!=\"inet\" &amp;&amp; $1!=\"--\" {print $1}')\n  end\nend\n\nruby_block 'get public' do\n  block do\n    node.default['return_val']=$(ifconfig | grep -B1 \"inet addr:#{first_public_ipv4}\" | awk '$1!=\"inet\" &amp;&amp; $1!=\"--\" {print $1}')\n end\nend\n</code></pre>\n"}, {"tags": ["ruby", "yaml"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1493252029, "post_id": 43646226, "comment_id": 74341402, "body": "You&#39;re calling <code>each_with_index</code> on <code>@correct_position</code> which you&#39;ve only defined for new games. You need to define <code>@correct_position</code> when loading an existing game."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1493254797, "post_id": 43646226, "comment_id": 74342050, "body": "Please add the code to the body of the question, not as external links that can expire, might be located on sites that are down or end up deleted, or are controlled by unknown third parties. You can edit your question to add any code that&#39;s relevant to the question at hand that helps people investigate, reproduce and resolve your problem."}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 1, "creation_date": 1493255981, "post_id": 43646226, "comment_id": 74342364, "body": "Try changing YAML::load to YAML::load_file"}], "owner": {"reputation": 1, "user_id": 7928137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80be2764d089d9679aa845f3d07b5a3?s=128&d=identicon&r=PG&f=1", "display_name": "EduardoMaldonado", "link": "https://stackoverflow.com/users/7928137/eduardomaldonado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493269603, "creation_date": 1493249479, "last_edit_date": 1493269603, "question_id": 43646226, "link": "https://stackoverflow.com/questions/43646226/cant-load-saved-games-in-my-hangman-project", "title": "Can&#39;t load saved games in my hangman project", "body": "<p>I am working in a hangman project in order to complete \n<a href=\"http://www.theodinproject.com/courses/ruby-programming/lessons/file-i-o-and-serialization?ref=lnav\" rel=\"nofollow noreferrer\">the odin project curriculum </a></p>\n\n<p>The game works, but I am completely lost in the loading a saved game part. </p>\n\n<p><a href=\"https://github.com/EduardoMaldonado/hangman\" rel=\"nofollow noreferrer\">Here is the link to the project</a></p>\n\n<p>How do I recover the variables in order to continue the game?</p>\n\n<p>Why when I load the game and put a letter to guess, the \"each.with.index\" method gives me a error?</p>\n\n<p>What to do, in order to make my code load a game?</p>\n\n<pre><code>require \"yaml\"\n\nclass Play\nattr_accessor :random_word\n\ndef main_menu\n    puts \"------------------------------------------------------\"\n    puts \"------------------------------------------------------\"\n        loop do \n        puts \"Please select,: (N)ew game, (L)oad, (E)xit\"\n        choice=gets.chomp.upcase\n        case choice\n        when \"N\"\n            new_game \n            break\n        when \"L\"\n            load\n        when \"E\"\n            puts \"\\nthanks for playing! see you soon!\"\n            exit        \n        else\n            puts \"\\nPlease select 'N' for new game, 'L' to load an existing game, or 'E' to exit\"\n        end\n    end\nend\n\ndef save_game\n    directory_name = \"saved_games\"\n    Dir.mkdir(directory_name) unless File.exists?(directory_name) #if \"saved_games folrder doesnt exist create one\"\n    puts \"\\nSelect a name to save your game\"\n    save_name=gets.chomp\n    File.open(\"saved_games/#{save_name}.yaml\",\"w\").puts YAML.dump(self) #Save the information in another file\n    puts \"\\nGame saved!\"\nend\n\ndef load\n    display_saved_games\n    puts \"\\nWrite the name of the saved game you want to load\"\n    load_game=gets.chomp\n    if File.exists?(\"saved_games/#{load_game}.yaml\")\n        loaded_game=YAML::load(load_game)\n        game_loop\n    else\n        puts \"\\nNo saved game with that name found, please try again\"\n        load\n    end\nend\n\ndef display_saved_games #Display avaiable saved games\n    directory_name = \"saved_games\"\n    Dir.mkdir(directory_name) unless File.exists?(directory_name)\n    if Dir.glob('saved_games/*').empty?\n        puts \"No saved games found!\"\n        main_menu\n    else\n        puts \"Found the following saved games\"\n        puts Dir.glob('saved_games/*').join(\"\\n\")\n    end\nend\n\n\ndef new_game #Generate a new word and set everything for a new game\n    @random_number=rand(61406) #Generate a random number\n    @random_word=File.readlines(\"5desk.txt\")[@random_number].chomp.to_s.upcase #read the random number generated line\n    @correct_position=@random_word.split(//) #split the word in individual letters\n    @correct_guesses=Array.new #Create the list of the correct answers\n    @incorrect_guesses=Array.new #Create the list of the incorrect answers\n    @random_word.length.times {@correct_guesses&lt;&lt;\"_ \"} #It puts one underscore in guess array for each letter in word\n    puts \"\\nThe secret word is..\\n\\n\"\n    @correct_guesses.each_with_index { |value, index| print @correct_guesses[index]} #draw underscores. one for each letter\n    puts \"\\n\\n\"\n    game_loop\nend\n\ndef draw\n    puts \"=============================================================================\\n\"\n    @correct_guesses.each_with_index { |value, index| print @correct_guesses[index]} #Current state of guessed correctly letters\n    puts \"\\n\\nLetters not in secret word: \"\n    @incorrect_guesses.each_with_index { |value, index| print @incorrect_guesses[index] + \", \"} #letters guessed not in the word\nend\n\ndef turn\n    puts \"\\nSelect a letter or write 'SAVE' to save your game and continue it later, or 'EXIT' to end the game\" #Ask for letter or to save the game\n    try=gets.chomp.to_s.upcase #Reads the letter\n    if try==\"SAVE\"\n        save_game\n    elsif try==\"EXIT\"\n        puts \"\\n\\n\\nThanks for playing, see you soon!\"\n        exit\n    else\n        check_correct(try) #Check if correct\n    end\nend\n\ndef check_correct(try)\n    guessed_right=false\n    @correct_position.each_with_index do |value, index| #matches each letter with the guess attemp\n        if try==value   \n            @correct_guesses[index]=try #if they are equal, deletes underscore and puts the correct letter\n            guessed_right=true\n        end\n    end\n\n    if guessed_right==false #if no letter was equal\n            if @incorrect_guesses.include?(try)==false #put the letter to the incorrect guesses array just if not included before\n                @incorrect_guesses&lt;&lt;try \n            else\n                guessed_right=true #Avoid the counter to go down if select a repeated letter\n                puts \"\\nYou already said that letter before!\"\n            end\n    end\n    return guessed_right\nend\n\ndef check_win\n    if @correct_guesses==@correct_position #it is a win if the guessed array is equal to the letters array\n        return true\n        puts \"\\n\\n\\nCongratulations!! you win!\"\n    else\n        return false\n    end\nend\n\ndef game_loop #Game logic\n    @turn_counter=0\n    loop do\n        while @turn_counter&lt;10\n            if turn==false\n                @turn_counter+=1\n                puts \"You have #{10-@turn_counter} turns left!\"\n            end\n            draw\n            if check_win\n                break\n            end\n        end\n        puts \"\\n\\n\\n\\nYou are out of turns, you lose!!!\"\n        puts \"\\n the secret word was #{@random_word}\"\n        break\n    end\nend\nend\n\nstart=Play.new.main_menu\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "client-side-validation"], "answers": [{"tags": [], "owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "is_accepted": false, "score": 2, "last_activity_date": 1493249352, "creation_date": 1493249352, "answer_id": 43646201, "question_id": 43646029, "link": "https://stackoverflow.com/questions/43646029/rails-5-client-side-validation-of-word-count-not-working/43646201#43646201", "title": "Rails 5 client-side validation of word count not working", "body": "<p>Length counts characters not words.  If you want to check for words you can add your own custom validator to your model:</p>\n\n<pre><code>validate :check_for_words\n\ndef check_for_words\n      if self.skills_response.split.size &gt; 10\n         errors.add(:base, \"You must have less than 10 words\")\n      end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1704, "user_id": 3076240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aecba75e7673597442c574d786cec2f?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/3076240/jon"}, "is_accepted": false, "score": 0, "last_activity_date": 1493249918, "creation_date": 1493249918, "answer_id": 43646287, "question_id": 43646029, "link": "https://stackoverflow.com/questions/43646029/rails-5-client-side-validation-of-word-count-not-working/43646287#43646287", "title": "Rails 5 client-side validation of word count not working", "body": "<p>You could use split and count to get the number of words, then create a function to return true and false based on that.</p>\n\n<pre><code>2.3.3 :001 &gt; string = \"Hello World today\"\n =&gt; \"Hello World today\" \n2.3.3 :002 &gt; split = string.split(' ')\n =&gt; [\"Hello\", \"World\", \"today\"] \n2.3.3 :003 &gt; split.count\n =&gt; 3 \n\n\n\n\nvalidate :validation\n\ndef validation\n  errors.add(:for_validation, \"error\") if form_field.split(' ').count &lt; 10\nend\n</code></pre>\n"}], "owner": {"reputation": 523, "user_id": 4803964, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/89fe55f09d40e619e4b2cacabe163040?s=128&d=identicon&r=PG&f=1", "display_name": "rohaldb", "link": "https://stackoverflow.com/users/4803964/rohaldb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1493249918, "creation_date": 1493248299, "last_edit_date": 1495542850, "question_id": 43646029, "link": "https://stackoverflow.com/questions/43646029/rails-5-client-side-validation-of-word-count-not-working", "title": "Rails 5 client-side validation of word count not working", "body": "<p>I am trying to validate the word count of a text area in my application.\nI have tried following <a href=\"https://stackoverflow.com/questions/8706650/counting-words-in-a-rails-validation\">this SO question</a> but i cant get mine to work.</p>\n\n<p>My validation: </p>\n\n<pre><code>validates :skills_response, :length =&gt; {\n  :minimum   =&gt; 5,\n  :maximum   =&gt; 10,\n  :tokenizer =&gt; lambda { |str| str.scan(/\\s+|$/) },\n  :too_short =&gt; \"must have at least %{count} words\",\n  :too_long  =&gt; \"must have at most %{count} words\"\n}\n</code></pre>\n\n<p>I am using the <a href=\"https://github.com/DavyJonesLocker/client_side_validations\" rel=\"nofollow noreferrer\">client side validations gem</a>, and as you can see, the above isn't working, as it is still counting characters.</p>\n\n<p><a href=\"https://i.stack.imgur.com/wV6gF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wV6gF.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have also tried <code>:tokenizer =&gt; lambda { |str| str.split }</code> which did not work either. Why is this happenning?</p>\n"}, {"tags": ["ruby", "logical-operators"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1493248219, "post_id": 43645963, "comment_id": 74340388, "body": "Same with JavaScript, Python and <i>many</i> dynamic languages."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 2, "creation_date": 1493248469, "post_id": 43645963, "comment_id": 74340459, "body": "What are you asking here? Why <i>would</i> your expression evaluate to <code>false</code>, in <i>any</i> language? I know of no languages where your <code>&amp;&amp;</code> would fail, implying  <code>22</code> or <code>2 == 2</code> are cast to boolean <code>false</code>. One is a non-zero number and one is boolean <code>true</code>."}, {"owner": {"reputation": 11, "user_id": 7880156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7dfc3395d25ef35b1eecfd88d11e229?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Cunha", "link": "https://stackoverflow.com/users/7880156/matheus-cunha"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1493249184, "post_id": 43645963, "comment_id": 74340672, "body": "I was thinking that 22 &amp;&amp; 2 were comparing the both numbers, but that&#39;s not what&#39;s happening, i understand now after reading tadman&#39;s answer"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1493269950, "post_id": 43645963, "comment_id": 74346149, "body": "You should interpret @meagar&#39;s comment, &quot;What are you asking here?&quot;, as, &quot;Please edit to state your question.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1493248333, "post_id": 43646005, "comment_id": 74340419, "body": "There is no <code>22 &amp;&amp; 2</code> here. It&#39;s <code>22 &amp;&amp; true</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1493248773, "post_id": 43646005, "comment_id": 74340551, "body": "@meager Ah, due to <a href=\"https://ruby-doc.org/core-2.2.0/doc/syntax/precedence_rdoc.html\" rel=\"nofollow noreferrer\">precedence rules</a> that appears to be correct."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1493248857, "last_edit_date": 1493248857, "creation_date": 1493248157, "answer_id": 43646005, "question_id": 43645963, "link": "https://stackoverflow.com/questions/43645963/why-fixnum-fixnum-return-the-last-number-and-not-false/43646005#43646005", "title": "Why Fixnum &amp;&amp; Fixnum return the last number and not false?", "body": "<p>The <em>only</em> thing in Ruby that's logically false are <code>nil</code> and <code>false</code>. Everything else, like <code>0</code>, empty strings, empty arrays, empty hashes, they're <em>all</em> considered logically true. This has implications for how Ruby handles boolean operators like <code>&amp;&amp;</code> and <code>||</code> since it doesn't need to force-cast things to a literal boolean value like <code>true</code> or <code>false</code>.</p>\n\n<p>As such it's impossible for <code>22 &amp;&amp; 2</code> to ever be logically false. The way the <code>&amp;&amp;</code> operator works is it returns the last element to break or confirm the evaluation:</p>\n\n<pre><code>1 &amp;&amp; 2 &amp;&amp; 3\n# =&gt; 3\n1 &amp;&amp; false &amp;&amp; 3\n# =&gt; false\n1 &amp;&amp; 2 &amp;&amp; nil\n# =&gt; nil\n</code></pre>\n\n<p>The only way an <code>&amp;&amp;</code> operation will return <code>false</code> is if <code>false</code> is one of the two terms present. This can occur like this:</p>\n\n<pre><code>1 &amp;&amp; !1\n# =&gt; false\n</code></pre>\n\n<p>This is because <code>!1</code> evalutes as <code>false</code>.</p>\n\n<p>You might be used to some languages where the result of <code>&amp;&amp;</code> is always a boolean value, but that's not the case here.</p>\n\n<p>Update: What @meagar is pointing out here is your code is actually evaluated as this:</p>\n\n<pre><code>22 &amp;&amp; (2 == 2)\n</code></pre>\n\n<p>Which is of course equivalent to:</p>\n\n<pre><code>22 &amp;&amp; true\n</code></pre>\n\n<p>Which evaluates to <code>true</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 7880156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7dfc3395d25ef35b1eecfd88d11e229?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Cunha", "link": "https://stackoverflow.com/users/7880156/matheus-cunha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 43646005, "answer_count": 1, "score": -1, "last_activity_date": 1493248857, "creation_date": 1493247928, "last_edit_date": 1493248422, "question_id": 43645963, "link": "https://stackoverflow.com/questions/43645963/why-fixnum-fixnum-return-the-last-number-and-not-false", "title": "Why Fixnum &amp;&amp; Fixnum return the last number and not false?", "body": "<p>I've made an example:</p>\n\n<pre><code>if 22 &amp;&amp; 2 == 2\n  puts \"true\"\nelse\n  puts \"false\"\nend\n</code></pre>\n\n<p>on this code looks like it's the same as using only the number 2, and it's returning true, because obviously 2 is equal 2.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "kaminari"], "answers": [{"tags": [], "owner": {"reputation": 194, "user_id": 4731878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb6eee7293bd0c756dd8a87cf1ae1cae?s=128&d=identicon&r=PG&f=1", "display_name": "tbreier", "link": "https://stackoverflow.com/users/4731878/tbreier"}, "is_accepted": false, "score": 0, "last_activity_date": 1493248141, "creation_date": 1493248141, "answer_id": 43646003, "question_id": 43645766, "link": "https://stackoverflow.com/questions/43645766/why-does-order-doesnt-get-executed-in-my-query/43646003#43646003", "title": "Why does .order doesn&#39;t get executed in my query?", "body": "<p>Rails does ignore the <code>order</code> clause when <code>count</code>ing.</p>\n\n<p>Instead of relying on Rails' <code>count</code> method, try counting manually: </p>\n\n<pre><code> data.where(\"#{column} #{operator} ?\", read_attribute(column))\n      .order(\"#{column} #{order} #{nulls_last}\")\n      .select('COUNT(*) c').first.c.to_f / per\n</code></pre>\n"}], "owner": {"reputation": 4637, "user_id": 561626, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3790f182f1f615744b24f912ed6b937?s=128&d=identicon&r=PG", "display_name": "ExiRe", "link": "https://stackoverflow.com/users/561626/exire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493248148, "creation_date": 1493246779, "last_edit_date": 1493248148, "question_id": 43645766, "link": "https://stackoverflow.com/questions/43645766/why-does-order-doesnt-get-executed-in-my-query", "title": "Why does .order doesn&#39;t get executed in my query?", "body": "<p>I have slightly modified version for Kaminari to find on which page my record is (original code is here: <a href=\"https://github.com/kaminari/kaminari/wiki/FAQ#how-can-i-know-which-page-a-record-is-on\" rel=\"nofollow noreferrer\">https://github.com/kaminari/kaminari/wiki/FAQ#how-can-i-know-which-page-a-record-is-on</a>):</p>\n\n<pre><code>module KaminariHelper\n  extend ActiveSupport::Concern\n\n  # Detecting page number in pagination. This method allows you to specify column name, order,\n  # items per page and collection ids to filter specific collection.\n  #\n  # Options:\n  #  * :by - specifies the column name. Defaults to :id.\n  #  * :order - specifies the order in DB. Defaults to :asc.\n  #  * :per - specifies amount of items per page. Defaults to object model's default_per_page.\n  #  * :nulls_last - if set to true, will add \"nulls last\" into the order.\n  #  * :collection_ids - array of ids for the collection of current class to search position in specific collection.\n  #    If it's ommited then search is done across all objects of current object's model.\n  #\n  def page_num(options = {})\n    column     = options[:by] || :id\n    order      = options[:order] || :asc\n    per        = options[:per] || self.class.default_per_page\n    nulls_last = options[:nulls_last] == true ? \"nulls last\" : \"\"\n    operator   = (order == :asc ? \"&lt;=\" : \"&gt;=\")\n\n    data = if options[:collection_ids].present?\n      self.class.where(id: options[:collection_ids])\n    else\n      self.class\n    end\n\n    # 1. Get a count number of all the results that are listed before the given record/value.\n    # 2. Divide the count by default_per_page or per number given as an option.\n    # 3. Ceil the number to get a proper page number that the record/value is on.\n    (\n      data.where(\"#{column} #{operator} ?\", read_attribute(column))\n          .order(\"#{column} #{order} #{nulls_last}\").count.to_f / per\n    ).ceil\n  end\nend\n</code></pre>\n\n<p>However when I test it for some weird reasons <code>.order</code> doesn't seem to be executed. Here is the sql output in rails console:</p>\n\n<pre><code>2.3.1 :005 &gt; email.page_num(by: :sent_at, order: :desc, per: 25, collection_ids: user.emails.ids, nulls_last: true)\n   (1.1ms)  SELECT \"emails\".\"id\" FROM \"emails\" WHERE \"emails\".\"deleted_at\" IS NULL\n AND \"emails\".\"user_id\" = $1  [[\"user_id\", 648]]\n   (1.5ms)  SELECT COUNT(*) FROM \"emails\" WHERE \"emails\".\"deleted_at\" IS NULL AND\n \"emails\".\"id\" IN (35946, 41741) AND (sent_at &gt;= '2016-01-22 14:04:26.700352')\n =&gt; 13\n</code></pre>\n\n<p>Why does <code>.order</code> is not applied in the final SQL query? Is there a way to execute it? Otherwise the code doesn't make sense since there are no guarantee it'll give me proper page number.</p>\n"}, {"tags": ["ruby", "activerecord", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 1993178, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/FvkIh.png?s=128&g=1", "display_name": "csakon", "link": "https://stackoverflow.com/users/1993178/csakon"}, "edited": false, "score": 0, "creation_date": 1493314812, "post_id": 43658583, "comment_id": 74376072, "body": "I think I might have asked my question wrong, but your Included Spaces do not have the belongs_to and space fields. It looks as though you are assuming that Included Spaces are not also Spaces, which they are. The Included Spaces is more of a reference of which Spaces have Parents. The added wrinkle is that Neither the Space Table nor the Included Spaces have primary keys that I can work from, so I would have to join both off of foreign keys."}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "reply_to_user": {"reputation": 551, "user_id": 1993178, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/FvkIh.png?s=128&g=1", "display_name": "csakon", "link": "https://stackoverflow.com/users/1993178/csakon"}, "edited": false, "score": 0, "creation_date": 1493315814, "post_id": 43658583, "comment_id": 74376638, "body": "No, I&#39;ve declared belongs_to and has_many hierarchically: <code>Venue</code> has many <code>Spaces</code>, <code>Space</code> also has many <code>Included Spaces</code>, and <code>Included Space</code> belongs to a <code>Space</code> and <code>Space</code> also belongs to a <code>Venue</code>. Maybe you think that way because of you&#39;ve not seen a FK constraint in table description, that&#39;s because I&#39;ve created them through padrino generators, and I think they&#39;ve not implemented that functionality to create foreign keys via migration. However nothing but faster querying would be the only change in case if there were FKs declared. BTW, it would be great if you add table structures."}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": false, "score": 0, "last_activity_date": 1493297920, "creation_date": 1493297920, "answer_id": 43658583, "question_id": 43645717, "link": "https://stackoverflow.com/questions/43645717/return-filtered-records-from-a-returned-set-of-data-from-two-tables/43658583#43658583", "title": "Return filtered records from a returned set of data from two tables", "body": "<p>my database schema.</p>\n\n<pre><code>mysql&gt; describe venues;\n+------------+--------------+------+-----+---------+----------------+\n| Field      | Type         | Null | Key | Default | Extra          |\n+------------+--------------+------+-----+---------+----------------+\n| id         | int(11)      | NO   | PRI | NULL    | auto_increment |\n| name       | varchar(255) | YES  |     | NULL    |                |\n| created_at | datetime     | NO   |     | NULL    |                |\n| updated_at | datetime     | NO   |     | NULL    |                |\n+------------+--------------+------+-----+---------+----------------+\n4 rows in set (0,00 sec)\n\nmysql&gt; describe spaces;;\n+------------+--------------+------+-----+---------+----------------+\n| Field      | Type         | Null | Key | Default | Extra          |\n+------------+--------------+------+-----+---------+----------------+\n| id         | int(11)      | NO   | PRI | NULL    | auto_increment |\n| name       | varchar(255) | YES  |     | NULL    |                |\n| venue_id   | int(11)      | YES  |     | NULL    |                |\n| created_at | datetime     | NO   |     | NULL    |                |\n| updated_at | datetime     | NO   |     | NULL    |                |\n+------------+--------------+------+-----+---------+----------------+\n5 rows in set (0,00 sec)\n\nERROR: \nNo query specified\n\nmysql&gt; describe included_spaces;;\n+------------+--------------+------+-----+---------+----------------+\n| Field      | Type         | Null | Key | Default | Extra          |\n+------------+--------------+------+-----+---------+----------------+\n| id         | int(11)      | NO   | PRI | NULL    | auto_increment |\n| name       | varchar(255) | YES  |     | NULL    |                |\n| space_id   | int(11)      | YES  |     | NULL    |                |\n| created_at | datetime     | NO   |     | NULL    |                |\n| updated_at | datetime     | NO   |     | NULL    |                |\n+------------+--------------+------+-----+---------+----------------+\n5 rows in set (0,00 sec)\n\nERROR: \nNo query specified\n</code></pre>\n\n<p>Below function will somehow give you the result you need (in console ofcourse ) however it's not a good solution - it queries database more than needed. However it is the easy -)) </p>\n\n<pre><code>def foo id\n  v = Venue.find(id)\n    puts v.name\n    v.spaces.each do |space|\n      puts space.name\n      space.included_spaces.each do |spis|\n        puts spis.name\n      end\n    end\nend\n</code></pre>\n\n<p>You can also try a more complex query sth like, </p>\n\n<pre><code>mysql&gt; SELECT spaces.name, included_spaces.name FROM `spaces` INNER JOIN `venues` ON `venues`.`id` = `spaces`.`venue_id` INNER JOIN `included_spaces` ON `included_spaces`.`space_id` = `spaces`.`id` WHERE `spaces`.`venue_id` = 1\n    -&gt; ;\n+------------+-----------+\n| name       | name      |\n+------------+-----------+\n| Upstairs,  | Front     |\n| Upstairs,  | Patio,    |\n| Upstairs,  | Indoor    |\n| Upstairs,  | Bar       |\n| Downstairs | Media     |\n| Downstairs | Room,     |\n| Downstairs | Courtyard |\n+------------+-----------+\n7 rows in set (0,00 sec)\n</code></pre>\n\n<p>which should be translated to active record as </p>\n\n<pre><code>Space.joins(:venue)\n  .joins(:included_spaces)\n  .where(venue_id: 1)\n  .select('spaces.name, included_spaces.name')\n</code></pre>\n"}], "owner": {"reputation": 551, "user_id": 1993178, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/FvkIh.png?s=128&g=1", "display_name": "csakon", "link": "https://stackoverflow.com/users/1993178/csakon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493297920, "creation_date": 1493246550, "question_id": 43645717, "link": "https://stackoverflow.com/questions/43645717/return-filtered-records-from-a-returned-set-of-data-from-two-tables", "title": "Return filtered records from a returned set of data from two tables", "body": "<p>I have three tables:<br>\n- Venue<br>\n- Space (belongs to Venue)<br>\n- Included Space (belongs to Space)<br></p>\n\n<p>I receive the id of a Venue in the route and return all the related spaces that I know have Included Spaces(a field called num_included_spaces__c on the Space record that maintains a count of its children). Now that I have all the related parent Spaces for that Venue, I need to find all of the Included Spaces for them.</p>\n\n<p>An Included Space is still a Space, it just happens to have a parent that resides in the same table. I'm trying to turn this:</p>\n\n<p>Venue = Rockdog<br>\n- Space = Upstairs<br>\n- Space = Media Room<br>\n- Space = Courtyard<br>\n- Space = Downstairs<br>\n- Space = Front Patio<br>\n- Space = Indoor Bar<br>\n<br>\nInto this:</p>\n\n<p>Venue = Rockdog<br>\n- Space = Upstairs<br>\n-- Included Space = Media Room<br>\n-- Included Space = Courtyard<br>\n- Space = Downstairs<br>\n-- Included Space = Front Patio<br>\n-- Included Space = Indoor Bar<br>\n<br></p>\n\n<p>The Included Spaces table has belongs_to__c and space__c as fields, where belongs_to__c is the id of the parent space and space__c is the id of the child. So i'm looking to find all the Included Spaces where belongs_to_c matches the id of any @spaces returned below</p>\n\n<pre><code>@sub_spaces = Space.where(\"venue__c = ? AND num_included_spaces__c = ?\", params[:venue],0)\n\n@spaces = Space.where(\"venue__c = ? AND num_included_spaces__c &gt; ?\", params[:venue],0)\n</code></pre>\n\n<p>How would I write this Active Record Query for @included_spaces?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "is_accepted": false, "score": 1, "last_activity_date": 1493246575, "creation_date": 1493246575, "answer_id": 43645722, "question_id": 43645648, "link": "https://stackoverflow.com/questions/43645648/ruby-how-i-could-print-without-leave-newline-space-for-each-line/43645722#43645722", "title": "ruby How I could print without leave newline space for each line?", "body": "<p>If you call <code>puts</code> with comma-separated arguments, each one of them will be printed on a different line.</p>\n\n<p>You can use ruby string interpolation here (<a href=\"http://ruby-for-beginners.rubymonstas.org/bonus/string_interpolation.html\" rel=\"nofollow noreferrer\">http://ruby-for-beginners.rubymonstas.org/bonus/string_interpolation.html</a>):</p>\n\n<p><code>f.puts \"#{parts[0]};#{parts[1]};#{parts[3]};#{input3}\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 7926043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2a05eeb94cfe09ed7a81a9dbd971998?s=128&d=identicon&r=PG&f=1", "display_name": "Sisyphe", "link": "https://stackoverflow.com/users/7926043/sisyphe"}, "is_accepted": true, "score": 1, "last_activity_date": 1493246647, "creation_date": 1493246647, "answer_id": 43645735, "question_id": 43645648, "link": "https://stackoverflow.com/questions/43645648/ruby-how-i-could-print-without-leave-newline-space-for-each-line/43645735#43645735", "title": "ruby How I could print without leave newline space for each line?", "body": "<p>You have two solutions.</p>\n\n<p>The first one uses <code>puts</code> as you currently do:</p>\n\n<pre><code>File.open('yourfile.txt', 'a+') { |f|\n    f.puts \"#{parts[0]}#{parts[1]}#{parts[2]}#{input3}\"\n}\n</code></pre>\n\n<p>The second one uses <code>write</code> instead of <code>puts</code>:</p>\n\n<pre><code>File.open('yourfile.txt', 'a+') { |f| \n    f.write parts[0]\n    f.write parts[1]\n    f.write parts[2]\n    f.write input3\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 7927990, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425331290823651/picture?type=large", "display_name": "Riley Thompson", "link": "https://stackoverflow.com/users/7927990/riley-thompson"}, "is_accepted": false, "score": 1, "last_activity_date": 1493247761, "creation_date": 1493247761, "answer_id": 43645940, "question_id": 43645648, "link": "https://stackoverflow.com/questions/43645648/ruby-how-i-could-print-without-leave-newline-space-for-each-line/43645940#43645940", "title": "ruby How I could print without leave newline space for each line?", "body": "<p>Try: </p>\n\n<pre><code>File.open(\"test_io.txt\", \"r\") do  |fix|\n  fix.readlines.each do |line|\n    File.open('new_file10.txt', 'a+') do |f|\n      next if line == \"\\n\"\n      f.puts \"#{line.chomp};zero\"\n    end\n  end\nend\n</code></pre>\n\n<p>I'm not sure why you're splitting the string by semicolon when you specified you wanted the below output. You would be better served just appending \";zero\" to the end of the string rather than parsing an array.</p>\n\n<p>name1;name2;name3;zero</p>\n\n<p>name4;name5;name6;zero</p>\n"}, {"tags": [], "owner": {"reputation": 1081, "user_id": 1473423, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IgJTk.png?s=128&g=1", "display_name": "bntzio", "link": "https://stackoverflow.com/users/1473423/bntzio"}, "is_accepted": false, "score": 1, "last_activity_date": 1493247891, "creation_date": 1493247891, "answer_id": 43645954, "question_id": 43645648, "link": "https://stackoverflow.com/questions/43645648/ruby-how-i-could-print-without-leave-newline-space-for-each-line/43645954#43645954", "title": "ruby How I could print without leave newline space for each line?", "body": "<p>You can specify an <code>if</code> statement to check for the <code>zero</code> value.</p>\n\n<p>Example:</p>\n\n<pre><code>arr = [\"name1\", \"name2\", \"name3\", \"zero\", \"name4\", \"name5\", \"name6\", \"zero\"];\narr.each { |x|\n  if x != \"zero\" then\n    print x\n  else\n    puts x\n  end\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>name1name2name3zero\nname4name5name6zero\n</code></pre>\n\n<p><code>print</code> will print inline.</p>\n\n<p><code>puts</code> will print on a new line.</p>\n\n<p>Just implement this logic in your code and you're good to go.</p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1493249676, "creation_date": 1493249676, "answer_id": 43646249, "question_id": 43645648, "link": "https://stackoverflow.com/questions/43645648/ruby-how-i-could-print-without-leave-newline-space-for-each-line/43646249#43646249", "title": "ruby How I could print without leave newline space for each line?", "body": "<p>A more minimal approach is to just append something to each line:</p>\n\n<pre><code>File.open(\"text2xycff.txt\", \"r\") do  |input|\n  File.open('text2xyczzzz2.txt', 'a+') do |output| \n    input.readlines.each do |line|\n      output.puts(line.chomp + ';zero')\n    end\n  end\nend\n</code></pre>\n\n<p>Or if you want to actually parse things, which presents an opportunity for clean-up:</p>\n\n<pre><code>File.open(\"text2xycff.txt\", \"r\") do  |input|\n  File.open('text2xyczzzz2.txt', 'a+') do |output| \n    input.readlines.each do |line|\n      parts = line.chomp.split(/;/)\n      parts &lt;&lt; 'zero'\n\n      output.puts(parts.join(';'))\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 154, "user_id": 7887886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fef2abd4b1a921dd0e1ebbac5ee36dda?s=128&d=identicon&r=PG&f=1", "display_name": "zzero", "link": "https://stackoverflow.com/users/7887886/zzero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 43645735, "answer_count": 5, "score": 0, "last_activity_date": 1493249676, "creation_date": 1493246183, "question_id": 43645648, "link": "https://stackoverflow.com/questions/43645648/ruby-how-i-could-print-without-leave-newline-space-for-each-line", "title": "ruby How I could print without leave newline space for each line?", "body": "<p>ruby How I could  print without  leave newline space for each line</p>\n\n<p>this is my file</p>\n\n<pre><code>name1;name2;name3\n\nname4;name5;name6\n</code></pre>\n\n<p>I have this command</p>\n\n<pre><code>File.open(\"text2xycff.txt\", \"r\") do  |fix|\n  fix.readlines.each do |line|\n    parts = line.chomp.split(';') \n\ninput3= zero\n\n File.open('text2xyczzzz2.txt', 'a+') do |f| \n   f.puts  parts[0] ,  parts[1], parts[2]  ,input3\n end\n\n\n\nend\n\nend\n</code></pre>\n\n<p>this is my  output</p>\n\n<pre><code>name1\n\nname2\n\nname3\n\nzero\n\nname4 \n\nname5\n\nname6\n\nzero\n</code></pre>\n\n<p>I need to output this</p>\n\n<pre><code>name1;name2;name3;zero\n\nname4;name5;name6;zero\n</code></pre>\n\n<p>Please help me whit this problem</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1493246667, "post_id": 43645603, "comment_id": 74339831, "body": "What do you mean when you say you&#39;d like to &quot;combine&quot; them. <code>datetime</code> already contains both the date and the time."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1493246673, "post_id": 43645603, "comment_id": 74339835, "body": "A datetime column stores a specific time on a specific date. So it already is a date and a time in a single attribute."}], "answers": [{"tags": [], "owner": {"reputation": 689, "user_id": 3442392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aafaa8822c1eb7bfc68c47e50f83ad62?s=128&d=identicon&r=PG", "display_name": "aqfaridi", "link": "https://stackoverflow.com/users/3442392/aqfaridi"}, "is_accepted": false, "score": 0, "last_activity_date": 1493248176, "creation_date": 1493248176, "answer_id": 43646006, "question_id": 43645603, "link": "https://stackoverflow.com/questions/43645603/ruby-date-and-time-combination/43646006#43646006", "title": "Ruby Date and Time combination", "body": "<p><code>date</code> contains date of event and you want to combine it to <code>start_time</code> ( let say they are the attributes of <code>some_model</code></p>\n\n<pre><code>date = some_model.date.year #stores actual date of event with wrong time\nstart_time = some_model.start_time #stores actual start time of event with wrong date\nend_time = some_model.end_time #stores actual end time of event with wrong date\n\ncombined_start_datetime = DateTime.new(date.year,date.month, date.day, start_time.hour, start_time.min)\ncombined_end_datetime = DateTime.new(date.year,date.month, date.day, end_time.hour, end_time.min)\n</code></pre>\n\n<p><strong>Note:</strong> <code>datetime</code> contains both date and time. </p>\n"}], "owner": {"reputation": 133, "user_id": 7739486, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a71467bf3797208d5dd64a59f0c7a576?s=128&d=identicon&r=PG&f=1", "display_name": "Lily", "link": "https://stackoverflow.com/users/7739486/lily"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493248176, "creation_date": 1493245961, "question_id": 43645603, "link": "https://stackoverflow.com/questions/43645603/ruby-date-and-time-combination", "title": "Ruby Date and Time combination", "body": "<p>I would need to combine day and time into one variable in Ruby. I have already set up the following:</p>\n\n<pre><code>t.datetime \"date\"\nt.datetime \"start_time\"\nt.datetime \"end_time\"\n</code></pre>\n\n<p>I know that there are similar answers to this question available, but would someone be so kind to explain me WHAT exactly should I do to combine these(i.e run ruby with a specific command, modify certain files etc.)? I'm very new to Ruby, so it's hard for me to understand for now :( </p>\n\n<p>Thanks very much in advance</p>\n\n<p>Lilija</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1493272759, "post_id": 43645493, "comment_id": 74347218, "body": "The posted code is incomplete. You must also take care to not pass the array bounds. If <code>j == 0</code>, <code>j-1</code> is outside the array."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 7927990, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425331290823651/picture?type=large", "display_name": "Riley Thompson", "link": "https://stackoverflow.com/users/7927990/riley-thompson"}, "is_accepted": false, "score": 0, "last_activity_date": 1493246035, "creation_date": 1493246035, "answer_id": 43645617, "question_id": 43645493, "link": "https://stackoverflow.com/questions/43645493/in-a-nested-array-indices-in-ruby/43645617#43645617", "title": "in a nested array indices in Ruby", "body": "<p>Not much easier, but a cleaner way to do this would be to make some boolean check methods like </p>\n\n<p>def up?, def down? etc.. which encapsulate all the logic you are checking in the if/elsif. </p>\n\n<p>Something like:</p>\n\n<pre><code>if down?\n do the thing\netc..\n</code></pre>\n\n<p>You can also try using a case statement. </p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1493249137, "creation_date": 1493249137, "answer_id": 43646164, "question_id": 43645493, "link": "https://stackoverflow.com/questions/43645493/in-a-nested-array-indices-in-ruby/43646164#43646164", "title": "in a nested array indices in Ruby", "body": "<p>Just build an array of offsets and test for matches:</p>\n\n<pre><code>hi, hj = [ [-1, 0], [1, 0], [0, 1], [0, -1] ].find do |di, dj|\n  maze[i + di][j + dj].to_i == index\nend\n\nif (hi &amp;&amp; hj)\n  maze[i + hi][j + hj] = '&gt;'\nend\n</code></pre>\n\n<p>If you're doing a lot of tests it makes sense to define that as a content:</p>\n\n<pre><code>UDLR = [ [-1, 0], [1, 0], [0, 1], [0, -1] ]\n</code></pre>\n\n<p>Then that structure is recycled for each call.</p>\n"}], "owner": {"reputation": 547, "user_id": 7475832, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b20add7ab0735243cc17265f7defde60?s=128&d=identicon&r=PG&f=1", "display_name": "Walter Shub", "link": "https://stackoverflow.com/users/7475832/walter-shub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1493249137, "creation_date": 1493245343, "question_id": 43645493, "link": "https://stackoverflow.com/questions/43645493/in-a-nested-array-indices-in-ruby", "title": "in a nested array indices in Ruby", "body": "<p>in a nested a array that is going to be used as a grid is there an easir\nway of checking weather the places above and below are empty or is the only way alot of if ,elsif  statements</p>\n\n<p>i.e </p>\n\n<pre><code>             if maze[i][j-1].to_i == index\n               maze[i][j-1] = \"&gt;\"\n               #down\n             elsif maze[i+1][j].to_i == index\n               maze[i+1][j] = \"&gt;\"\n              # UP\n            elsif maze[i-1][j].to_i == index\n              maze[i-1][j] = \"&gt;\"\n              #right\n            elsif  maze[i][j+1].to_i == index\n               maze[i][j+1] = \"&gt;\"\n            end\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 1, "creation_date": 1493245523, "post_id": 43645429, "comment_id": 74339461, "body": "You don&#39;t really need a Rails way, just a mysql way <a href=\"http://stackoverflow.com/questions/2051602/mysql-orderby-a-number-nulls-last\" title=\"mysql orderby a number nulls last\">stackoverflow.com/questions/2051602/&hellip;</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1493246947, "post_id": 43645429, "comment_id": 74339940, "body": "Marking as a duplicate since there is no polyglot &quot;rails way&quot; to do this."}], "owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "closed_date": 1493246836, "answer_count": 0, "score": 0, "last_activity_date": 1493255011, "creation_date": 1493244994, "last_edit_date": 1493255011, "question_id": 43645429, "link": "https://stackoverflow.com/questions/43645429/order-an-array-with-null-values-last", "closed_reason": "Duplicate", "title": "Order an array with null values last", "body": "<p>I've added a <code>priority</code> value to sort a list of objects in ascending order. The value is optional on records, and in the production app there are a lot of records that exist where <code>priority</code> is null. </p>\n\n<p>When I sort the list, it returns all the nulls first -- the expected behaviour should be to include the nulls last, sorted by created_at desc.</p>\n\n<pre><code>@company.spark_sessions.order('priority asc, created_at desc')\n</code></pre>\n\n<p>Is there a nice, standard Rails way to return null records at the <em>end</em> of the list?</p>\n\n<p>The top comment on a thread from five years ago recommended adding arrays together to preserve order, which I'm not fond of.</p>\n"}, {"tags": ["ruby", "string", "function", "pass-by-reference"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493243883, "post_id": 43644993, "comment_id": 74338815, "body": "Maybe put <code>str = ...</code> in the method?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493244043, "post_id": 43644993, "comment_id": 74338881, "body": "I tried putting &quot;str = str[0...(-1 * word.length)]&quot; as the method body but it doens&#39;t change the value of the parameter being passed in.  I didn&#39;t include that info b/c I thought ppl would laugh me off this forum for such a suggestion, so it gives me relief that you asked this question."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493244524, "post_id": 43644993, "comment_id": 74339081, "body": "Okay if you put <code>str.replace(str[0...(-1 * word.length)])</code> in your method that works. Not sure if it&#39;s the best way to go about things though."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "edited": false, "score": 0, "creation_date": 1493244868, "post_id": 43645316, "comment_id": 74339228, "body": "THis doesn&#39;t work.  If my str = &quot;Aurora CO&quot; and I invoke your function where word = &quot;CO&quot;, the result of str after calling teh function is &quot;CO&quot;.  I woudl expect it to be &quot;Aurora &quot;."}], "tags": [], "owner": {"reputation": 116, "user_id": 7926043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2a05eeb94cfe09ed7a81a9dbd971998?s=128&d=identicon&r=PG&f=1", "display_name": "Sisyphe", "link": "https://stackoverflow.com/users/7926043/sisyphe"}, "is_accepted": false, "score": 1, "last_activity_date": 1493245698, "last_edit_date": 1493245698, "creation_date": 1493244470, "answer_id": 43645316, "question_id": 43644993, "link": "https://stackoverflow.com/questions/43644993/how-do-i-apply-removing-of-characters-to-the-string-itself/43645316#43645316", "title": "How do I apply removing of characters to the string itself?", "body": "<p><code>str[range]</code> is just a shorthand for <code>str.slice(range)</code>. You just have to use the destructive method, like that :</p>\n\n<pre><code># Removes the word from the end of the string\ndef remove_word_from_end_of_str(str, word)\n    str.slice!((str.length - word.length)...(str.length))\nend\n</code></pre>\n\n<p>For more information, see <a href=\"http://ruby-doc.org/core-2.4.1/String.html#method-i-slice\" rel=\"nofollow noreferrer\">the documentation</a>.</p>\n\n<p>If you want your function to return the new string as well, you should use :</p>\n\n<pre><code># Removes the word from the end of the string\ndef remove_word_from_end_of_str(str, word)\n    str.slice!((str.length - word.length)...(str.length))\n    str\nend\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "edited": false, "score": 0, "creation_date": 1493244702, "post_id": 43645333, "comment_id": 74339173, "body": "That doesn&#39;t work.  If the string is &quot;abc def def&quot;, your function returns &quot;abc &quot; but I only want to remove the last word, and so in such a case I would want &quot;abc def &quot;."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1493245207, "post_id": 43645333, "comment_id": 74339348, "body": "@Natalia I added an option that does what you want."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 2, "last_activity_date": 1493245137, "last_edit_date": 1493245137, "creation_date": 1493244557, "answer_id": 43645333, "question_id": 43644993, "link": "https://stackoverflow.com/questions/43644993/how-do-i-apply-removing-of-characters-to-the-string-itself/43645333#43645333", "title": "How do I apply removing of characters to the string itself?", "body": "<p>Ruby already has the <code>String#delete!</code> method that does exactly this:</p>\n\n<pre><code>&gt;&gt; str = 'abc def'\n=&gt; \"abc def\"\n&gt;&gt; word = 'def'\n=&gt; \"def\"\n&gt;&gt; str.delete!(word)\n=&gt; \"abc \"\n&gt;&gt; str\n=&gt; \"abc \"\n</code></pre>\n\n<p>Note that this will remove all instances of <code>word</code>:</p>\n\n<pre><code>&gt;&gt; str = 'def abc def'\n=&gt; \"def abc def\"\n&gt;&gt; str.delete!(word)\n=&gt; \" abc \"\n</code></pre>\n\n<p>To limit the effect to only the last word, you can do:</p>\n\n<pre><code>&gt;&gt; str = 'def abc def'\n=&gt; \"def abc def\"\n&gt;&gt; str.slice!(-word.length..-1)\n=&gt; \"def\"\n&gt;&gt; str\n=&gt; \"def abc \"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 7927990, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425331290823651/picture?type=large", "display_name": "Riley Thompson", "link": "https://stackoverflow.com/users/7927990/riley-thompson"}, "is_accepted": false, "score": 0, "last_activity_date": 1493245571, "creation_date": 1493245571, "answer_id": 43645531, "question_id": 43644993, "link": "https://stackoverflow.com/questions/43644993/how-do-i-apply-removing-of-characters-to-the-string-itself/43645531#43645531", "title": "How do I apply removing of characters to the string itself?", "body": "<p>Try:</p>\n\n<pre><code>def remove_word_from_end_of_str(str, word)\n    str.slice!((str.length - word.length)..str.length)\nend\n</code></pre>\n\n<p>Also, your explanation is a little confusing. You are calling the remove_word method as a class method but it is an instance method.</p>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 0, "last_activity_date": 1493246033, "creation_date": 1493246033, "answer_id": 43645615, "question_id": 43644993, "link": "https://stackoverflow.com/questions/43644993/how-do-i-apply-removing-of-characters-to-the-string-itself/43645615#43645615", "title": "How do I apply removing of characters to the string itself?", "body": "<p><code>chomp!</code> returns a the String with the given record separator removed from the end of string (if present), and <code>nil</code> if nothing was removed.</p>\n\n<pre><code>def remove_word_from_end_of_str(str, word)\n  str.chomp!( \"CO\")\nend\n\nstr = \"Aurora CO\" \nremove_word_from_end_of_str(str, \"CO\")\np str  #=&gt; \"Aurora \"\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 43645333, "answer_count": 4, "score": 0, "last_activity_date": 1493246033, "creation_date": 1493242919, "question_id": 43644993, "link": "https://stackoverflow.com/questions/43644993/how-do-i-apply-removing-of-characters-to-the-string-itself", "title": "How do I apply removing of characters to the string itself?", "body": "<p>Using Ruby 2.4.  How do I apply an editing of a stirng to the string itself?  I have this method</p>\n\n<pre><code>  # Removes the word from teh end of the string\n  def remove_word_from_end_of_str(str, word)\n    str[0...(-1 * word.length)]\n  end\n</code></pre>\n\n<p>I want the parameter to be operated upon, but it isn't working ...</p>\n\n<pre><code>2.4.0 :001 &gt; str = \"abc def\"\n =&gt; \"abc def\"\n2.4.0 :002 &gt; StringHelper.remove_word_from_end_of_str(str, \"def\")\n =&gt; \"abc \"\n2.4.0 :003 &gt; str\n =&gt; \"abc def\"\n</code></pre>\n\n<p>I want the string that was passed in to be equal to \"abc \" but that isn't happening.  I don't want to set the variable to the result of the function (e.g. \"str = StringHelper.remove(...)\"</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1493242827, "post_id": 43644900, "comment_id": 74338375, "body": "<code>str = &quot;The quick brown dog jumps over the lazy fox&quot;</code>;  <code>str = &quot;abcdefghijklmnopqrstuvwxyz&quot;</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1493242839, "post_id": 43644900, "comment_id": 74338383, "body": "The sentence is a (famous) <a href=\"https://en.wikipedia.org/wiki/Pangram\" rel=\"nofollow noreferrer\">pangram</a>. You are apparently supposed to sort the (down-cased) letters alphabetically."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1493242894, "post_id": 43644900, "comment_id": 74338405, "body": "...and remove duplicates?"}, {"owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "edited": false, "score": 1, "creation_date": 1493242916, "post_id": 43644900, "comment_id": 74338413, "body": "<code>s.downcase.chars.sort.uniq.map(&amp;:strip).reject(&amp;:empty?).joi&zwnj;&#8203;n</code>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1493243084, "post_id": 43644900, "comment_id": 74338498, "body": "guess there&#39;s a few ways to do this. <code>.scan(&#47;[a-z]&#47;).uniq.sort.join</code>"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 2, "creation_date": 1493243183, "post_id": 43644900, "comment_id": 74338534, "body": "<code>&quot;The quick brown fox jumps over the lazy dog&quot;.replace(&quot;abcdefghijklmnopqrstuvwxyz&quot;)</code>"}, {"owner": {"reputation": 5, "user_id": 7928001, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209664680229633/picture?type=large", "display_name": "Lance Brooks", "link": "https://stackoverflow.com/users/7928001/lance-brooks"}, "edited": false, "score": 0, "creation_date": 1493243354, "post_id": 43644900, "comment_id": 74338592, "body": "one of the qualifiers for the question was that we couldn&#39;t use .replace"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1493243528, "post_id": 43644900, "comment_id": 74338660, "body": "@steenslag, ha!, but the new string has no hand-holds, but technically I guess you&#39;re right."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1493243702, "post_id": 43644900, "comment_id": 74338741, "body": "You can employ <code>squeeze</code> at the end here instead of <code>uniq</code>ing the array."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1493243995, "post_id": 43644900, "comment_id": 74338856, "body": "@CarySwoveland Relax bro. Explore ObjectSpace, it might  or might not be there. It&#39;s just Zen and the art of Object lifecycle maintenance."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1493243061, "post_id": 43644998, "comment_id": 74338491, "body": "I think you need to insert <code>uniq</code> and what about spaces?."}, {"owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "edited": false, "score": 0, "creation_date": 1493243088, "post_id": 43644998, "comment_id": 74338500, "body": "sorry , trying to beat the rush"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1493243353, "post_id": 43644998, "comment_id": 74338590, "body": "Old Japanese saying: one who hesitates is less likely to make a fool of themself."}, {"owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "edited": false, "score": 0, "creation_date": 1493243384, "post_id": 43644998, "comment_id": 74338605, "body": "still wrong--the desired output doesn&#39;t include a space"}, {"owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "edited": false, "score": 0, "creation_date": 1493243639, "post_id": 43644998, "comment_id": 74338712, "body": "That is true Cary and &quot;Audacity augments courage; hesitation, fear.&quot;"}, {"owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "edited": false, "score": 0, "creation_date": 1493243748, "post_id": 43644998, "comment_id": 74338755, "body": "Jacob the second (hesitated version) doesn&#39;t return spaces"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1493243788, "post_id": 43644998, "comment_id": 74338777, "body": "Old Japanese saying: one who does not test is prone to making a fool of themself. Two suggestions: 1) move <code>uniq</code> before <code>sort</code> to reduce the burden on <code>sort</code>; and 2) use <code>each_char</code> (which returns an enumerator) rather than <code>chars</code> to avoid the creation of a temporary array (and remove the spaces!)."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1493244401, "post_id": 43644998, "comment_id": 74339026, "body": "Using <code>each_char</code> avoids one temporary array, but <code>uniq</code> creates another one. Unfortunately, many &quot;bang&quot; methods are not chainable."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1493244482, "post_id": 43644998, "comment_id": 74339059, "body": "@Stefan bang methods can be chained if you embed them in a <code>tap</code> block."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1493244560, "post_id": 43644998, "comment_id": 74339106, "body": "@pjs that would chain the <code>tap</code> calls, not the bang methods ;-)"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1493244598, "post_id": 43644998, "comment_id": 74339127, "body": "@Stefan yes, but it has the desired result of keeping chaining going."}], "tags": [], "owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "is_accepted": false, "score": 2, "last_activity_date": 1493244673, "last_edit_date": 1493244673, "creation_date": 1493242940, "answer_id": 43644998, "question_id": 43644900, "link": "https://stackoverflow.com/questions/43644900/trying-to-alphabetize-in-ruby/43644998#43644998", "title": "Trying to alphabetize in Ruby", "body": "<p>Edit: Because faster is not always better</p>\n\n<pre><code>\"The quick brown fox jumps over the lazy dog\".downcase.chars.uniq.sort.join.strip\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6107987"}, "is_accepted": false, "score": 1, "last_activity_date": 1493242979, "creation_date": 1493242979, "answer_id": 43645011, "question_id": 43644900, "link": "https://stackoverflow.com/questions/43644900/trying-to-alphabetize-in-ruby/43645011#43645011", "title": "Trying to alphabetize in Ruby", "body": "<pre><code>text = \"The quick brown fox jumps over the lazy dog\"\ntext.chars.sort.join\n =&gt; \"        Tabcdeeefghhijklmnoooopqrrstuuvwxyz\" \n</code></pre>\n\n<p>or to sort case insensitively:</p>\n\n<pre><code>str.chars.sort(&amp;:casecmp).join\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1493276036, "post_id": 43645756, "comment_id": 74348858, "body": "Note that this ignores the uppercase &quot;T&quot;."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 0, "last_activity_date": 1493327461, "last_edit_date": 1493327461, "creation_date": 1493246741, "answer_id": 43645756, "question_id": 43644900, "link": "https://stackoverflow.com/questions/43644900/trying-to-alphabetize-in-ruby/43645756#43645756", "title": "Trying to alphabetize in Ruby", "body": "<pre><code>str = \"The quick brown fox jumps over the lazy dog\"\nstr.scan(/[a-z]/).uniq.sort.join #=&gt; \"abcdefghijklmnopqrstuvwxyz\"\n</code></pre>\n\n<h3>steps</h3>\n\n<pre><code>str.scan(/[a-z]/) #returns all lowercase letters\nstr.scan(/[a-z]/).uniq #gets rid of duplicates\nstr.scan(/[a-z]/).uniq.sort #sorts in alphabetical order\nstr.scan(/[a-z]/).uniq.sort.join #makes a string\n</code></pre>\n\n<h1>Or another way:</h1>\n\n<pre><code>str.scan(/[a-z]/).sort.join.squeeze #=&gt; \"abcdefghijklmnopqrstuvwxyz\"\n</code></pre>\n\n<h3>steps</h3>\n\n<pre><code>str.scan(/[a-z]/) #returns all lowercase letters\nstr.scan(/[a-z]/).sort #sorts in alphabetical order\nstr.scan(/[a-z]/).sort.join #makes a string\nstr.scan(/[a-z]/).sort.join.squeeze #gets rid of duplicates\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 689, "user_id": 3442392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aafaa8822c1eb7bfc68c47e50f83ad62?s=128&d=identicon&r=PG", "display_name": "aqfaridi", "link": "https://stackoverflow.com/users/3442392/aqfaridi"}, "is_accepted": false, "score": 0, "last_activity_date": 1493249840, "creation_date": 1493249840, "answer_id": 43646276, "question_id": 43644900, "link": "https://stackoverflow.com/questions/43644900/trying-to-alphabetize-in-ruby/43646276#43646276", "title": "Trying to alphabetize in Ruby", "body": "<p>Faster solution matters, yet shows elegance : </p>\n\n<pre><code>str, hash = \"This is cat\", {}\nstr.each_char { |c| hash[c.downcase] = 1 }\n('a'..'z').inject(\"\") { |s, c| hash[c] ? s+c : s }\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7928001, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209664680229633/picture?type=large", "display_name": "Lance Brooks", "link": "https://stackoverflow.com/users/7928001/lance-brooks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 43645756, "answer_count": 4, "score": -1, "last_activity_date": 1501866278, "creation_date": 1493242474, "last_edit_date": 1501866278, "question_id": 43644900, "link": "https://stackoverflow.com/questions/43644900/trying-to-alphabetize-in-ruby", "title": "Trying to alphabetize in Ruby", "body": "<p>Turn this string:</p>\n\n<pre><code>\"The quick brown fox jumps over the lazy dog\"\n</code></pre>\n\n<p>into this string:</p>\n\n<pre><code>\"abcdefghijklmnopqrstuvwxyz\"\n</code></pre>\n\n<p>This is all for Ruby. Any help would be awesome.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "whenever"], "comments": [{"owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "edited": false, "score": 0, "creation_date": 1493242055, "post_id": 43644722, "comment_id": 74338042, "body": "<code>puts</code> != <code>PUTS</code>"}, {"owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "reply_to_user": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "edited": false, "score": 1, "creation_date": 1493242202, "post_id": 43644722, "comment_id": 74338115, "body": "ahh, true but unfortunately that was a stackoverflow error.  It&#39;s lowercase and correct in my code."}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 2, "creation_date": 1493243731, "post_id": 43644722, "comment_id": 74338750, "body": "It&#39;s probably a validation error, you can get an exception with <code>Team.create!</code>"}, {"owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "edited": false, "score": 0, "creation_date": 1493244021, "post_id": 43644722, "comment_id": 74338870, "body": "It&#39;s not because it works if i just run the rake task without whenever."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1493257796, "post_id": 43644722, "comment_id": 74342835, "body": "How can you know that if you are just letting it silently fail? Use <code>.create!</code> and it will tell why the record is not being created."}], "owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493242170, "creation_date": 1493241660, "last_edit_date": 1592644375, "question_id": 43644722, "link": "https://stackoverflow.com/questions/43644722/whenever-gem-works-with-puts-statement-but-breaks-with-more-code", "title": "whenever gem works with puts statement but breaks with more code", "body": "<p>I have gotten the whenever gem to work with a simple puts statement:</p>\n<h1>schedule.rb</h1>\n<pre><code>set :environment, &quot;development&quot;\nset :output, {:error =&gt; &quot;log/cron_error_log.log&quot;, :standard =&gt; &quot;log/cron_log.log&quot;}\n\nevery 1.minutes do\n    rake &quot;test_printing&quot;\nend\n</code></pre>\n<h1>lib/tasks/scheduler.rb</h1>\n<pre><code>task :test_printing =&gt; :environment do\n  puts &quot;SOME OUTPUT BEFORE CREATE CALL&quot;\n  Team.create name: DateTime.now\n  puts &quot;SOME OUTPUT AFTER CREATE CALL&quot;\nend\n</code></pre>\n<p>For some reason, it does not create a new team.  Here are the logs:</p>\n<pre><code>SOME OUTPUT BEFORE CREATE CALL\nSOME OUTPUT BEFORE CREATE CALL\nSOME OUTPUT BEFORE CREATE CALL\nSOME OUTPUT BEFORE CREATE CALL\n</code></pre>\n<p>I tried running the rake task on its own without whenever and it works perfectly.  How do I fix this?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1493241195, "post_id": 43644592, "comment_id": 74337623, "body": "What&#39;s <code>urlArray</code>? It appears it&#39;s not what you think it is. Also, what&#39;s the point of doing <code>count.times</code> when you could use <code>each_with_index</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1493241203, "post_id": 43644592, "comment_id": 74337626, "body": "Yeah, <code>urlArray</code> is not, in fact, an array"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1493241846, "post_id": 43644592, "comment_id": 74337934, "body": "According to the error message, you call <code>crawl_urls(1..2)</code>"}, {"owner": {"reputation": 1157, "user_id": 2653567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RNYoa.png?s=128&g=1", "display_name": "HMLDude", "link": "https://stackoverflow.com/users/2653567/hmldude"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1493313651, "post_id": 43644592, "comment_id": 74375363, "body": "@Stefan, yes, it was a bad call."}], "answers": [{"tags": [], "owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "is_accepted": false, "score": 0, "last_activity_date": 1493241230, "creation_date": 1493241230, "answer_id": 43644629, "question_id": 43644592, "link": "https://stackoverflow.com/questions/43644592/getting-a-undefined-method-error-for-an-array-call-in-ruby/43644629#43644629", "title": "Getting a Undefined Method Error for an Array Call in Ruby", "body": "<p>A range is not an array. Use <code>.to_a</code> on your range to convert it and be able to use <code>[]</code></p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1493241755, "creation_date": 1493241755, "answer_id": 43644742, "question_id": 43644592, "link": "https://stackoverflow.com/questions/43644592/getting-a-undefined-method-error-for-an-array-call-in-ruby/43644742#43644742", "title": "Getting a Undefined Method Error for an Array Call in Ruby", "body": "<p>A better way of expressing this is:</p>\n\n<pre><code>def crawl_urls(urls)\n  urls.each_with_index do |url, i|\n    puts \"now crawling site #{i} &lt;--------\"\n    has_email?(url)\n  end\nend\n</code></pre>\n\n<p>There's no need to do <code>times</code> to get an offset, and then go back and look up things in the array when <code>each</code> will do that for you.</p>\n\n<p>Another thing to note is to avoid putting upper-case letters in Ruby variables or method names. <code>urlArray</code> should be <code>url_array</code> or even better, as it's a more natural way of expressing it, <code>urls</code>.</p>\n"}], "owner": {"reputation": 1157, "user_id": 2653567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RNYoa.png?s=128&g=1", "display_name": "HMLDude", "link": "https://stackoverflow.com/users/2653567/hmldude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 43644742, "answer_count": 2, "score": -1, "last_activity_date": 1493241755, "creation_date": 1493241064, "question_id": 43644592, "link": "https://stackoverflow.com/questions/43644592/getting-a-undefined-method-error-for-an-array-call-in-ruby", "title": "Getting a Undefined Method Error for an Array Call in Ruby", "body": "<p>I have the following method in my program:</p>\n\n<pre><code>def crawl_urls(urlArray)\n    urlArray.count.times do |i| \n        puts \"now crawling site \" + i.to_s + \"&lt;--------\"\n        has_email?(urlArray[i])\n    end\nend\n</code></pre>\n\n<p>The error message is :</p>\n\n<pre><code>*******.rb:126:in `block in scrape_urls': undefined method `[]' for 1..2:Range (NoMethodError)\n</code></pre>\n\n<p>The offending line, according to the error message being:</p>\n\n<pre><code>has_email?(urlArray[i])\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "model", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 2, "creation_date": 1493238964, "post_id": 43644043, "comment_id": 74336446, "body": "if you go to <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Validations/ClassMethods.html#method-i-validate\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveModel/Validations/&hellip;</a>, you&#39;ll notice you need to add <code>errors</code> collection an error saying what happened. That&#39;s how <code>validate</code> should be used."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1493238985, "post_id": 43644043, "comment_id": 74336463, "body": "As @fanta points out, unless you can give a reason in the form of errors it&#39;s presumed to be a valid model."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1493240349, "post_id": 43644043, "comment_id": 74337186, "body": "The API docs also mention: <i>&quot;Note that the return value of validation methods is not relevant.&quot;</i>"}], "answers": [{"tags": [], "owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "is_accepted": false, "score": 0, "last_activity_date": 1493239086, "creation_date": 1493239086, "answer_id": 43644104, "question_id": 43644043, "link": "https://stackoverflow.com/questions/43644043/why-isnt-my-validate-method-determining-if-my-ruby-model-is-valid/43644104#43644104", "title": "Why isn&#39;t my &quot;validate&quot; method determining if my Ruby model is valid?", "body": "<p>Custom validations work by checking for a custom validation and then adding an error if it fails.</p>\n\n<p>This is taken from <a href=\"http://guides.rubyonrails.org/active_record_validations.html#performing-custom-validations\" rel=\"nofollow noreferrer\">the guides</a></p>\n\n<pre><code>class Invoice &lt; ApplicationRecord\n  validate :expiration_date_cannot_be_in_the_past,\n    :discount_cannot_be_greater_than_total_value\n\n  def expiration_date_cannot_be_in_the_past\n    if expiration_date.present? &amp;&amp; expiration_date &lt; Date.today\n      errors.add(:expiration_date, \"can't be in the past\")\n    end\n  end\n\n  def discount_cannot_be_greater_than_total_value\n    if discount &gt; total_value\n      errors.add(:discount, \"can't be greater than total value\")\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1493239139, "creation_date": 1493239139, "answer_id": 43644111, "question_id": 43644043, "link": "https://stackoverflow.com/questions/43644043/why-isnt-my-validate-method-determining-if-my-ruby-model-is-valid/43644111#43644111", "title": "Why isn&#39;t my &quot;validate&quot; method determining if my Ruby model is valid?", "body": "<pre><code>class MyObjectTime &lt; ActiveRecord::Base\n    ...\n  validate :valid_method\n\n   def valid_method\n     errors.add(:foo, \"is not valid\") if some_condition?\n   end\n</code></pre>\n\n<p>The return value of a validator method does not matter, what matters is that it adds an error to the <a href=\"http://%20http://api.rubyonrails.org/classes/ActiveModel/Errors.html\" rel=\"nofollow noreferrer\">errors object</a> (which is a hash like object).</p>\n\n<p>Basically <code>.valid?</code> runs the validations and then checks if <code>self.errors.any?</code>.</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 43644111, "answer_count": 2, "score": -1, "last_activity_date": 1493239139, "creation_date": 1493238822, "question_id": 43644043, "link": "https://stackoverflow.com/questions/43644043/why-isnt-my-validate-method-determining-if-my-ruby-model-is-valid", "title": "Why isn&#39;t my &quot;validate&quot; method determining if my Ruby model is valid?", "body": "<p>I'm on Rails 5.0.  I'm confused about how to evalute whether I have a valid model.  I have a model with this method</p>\n\n<pre><code>class MyObjectTime &lt; ActiveRecord::Base\n    ...\n  validate :valid_method\n\n   def valid_method\n     false\n   end\n</code></pre>\n\n<p>Notice that I have hard-coded \"false\" in my valid method, but even when I create an object of this class, and call \"obj.valid?\", I will get \"true\" even though I have rigged things so that the model should never be valid.  What else do I need to do to get my \"valid_method\" method considered when determining if a model is valid?</p>\n"}, {"tags": ["ruby", "exception-handling", "ruby-2.3", "ruby-2.4"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1493237976, "post_id": 43643445, "comment_id": 74335906, "body": "Take a look at the message: a <code>NoMethodError</code> was raised, not a <code>CustomError</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1493238293, "post_id": 43643445, "comment_id": 74336086, "body": "BTW, this is <i>not</i> specific to Ruby 2.3 or 2.4."}, {"owner": {"reputation": 35, "user_id": 7054283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ewjm_J2lS6w/AAAAAAAAAAI/AAAAAAAAAHc/qZWskNs7qEg/photo.jpg?sz=128", "display_name": "Cirus Polis", "link": "https://stackoverflow.com/users/7054283/cirus-polis"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1493238652, "post_id": 43643445, "comment_id": 74336280, "body": "It is not specific to 2.3 or 2.4, but it worked with previous versions of Ruby such as 2.1 and 2.2. <code>NoMethodError</code> inherits from <code>StandardError</code>. And therefore considering Ruby&#39;s Exception Hierarchy, it should be rescuable with my <code>CustomError</code> class."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1493239846, "post_id": 43643445, "comment_id": 74336908, "body": "Your conclusion is wrong. Both, <code>Float</code> and <code>Integer</code> inherit from <code>Numeric</code>, but neither <code>1.is_a?(Float)</code>, nor <code>0.5.is_a?(Integer)</code> is <code>true</code>. Same with the exceptions. Just because both inherit from <code>StandardError</code> doesn&#39;t mean that you can rescue a <code>NoMethodError</code> with your <code>CustomError</code> (or an <code>ArgumentError</code> with an <code>IndexError</code>). A <code>rescue CustomError</code> will rescue <code>CustomError</code> and its subclasses. It won&#39;t rescue its ancestors or siblings."}, {"owner": {"reputation": 35, "user_id": 7054283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ewjm_J2lS6w/AAAAAAAAAAI/AAAAAAAAAHc/qZWskNs7qEg/photo.jpg?sz=128", "display_name": "Cirus Polis", "link": "https://stackoverflow.com/users/7054283/cirus-polis"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1493240464, "post_id": 43643445, "comment_id": 74337254, "body": "Do you think there is no way to rescue this <code>NoMethodError</code> exception using a custom class?"}, {"owner": {"reputation": 35, "user_id": 7054283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ewjm_J2lS6w/AAAAAAAAAAI/AAAAAAAAAHc/qZWskNs7qEg/photo.jpg?sz=128", "display_name": "Cirus Polis", "link": "https://stackoverflow.com/users/7054283/cirus-polis"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1493240503, "post_id": 43643445, "comment_id": 74337280, "body": "I&#39;m surprised because it worked before."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1493241348, "post_id": 43643445, "comment_id": 74337689, "body": "Why would you want to do that? (and no, it really doesn&#39;t work that way in Ruby 2.2 or any other Ruby version)"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 6220544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/098fc72706c42ad001f8842b464162c4?s=128&d=identicon&r=PG", "display_name": "sl4vr", "link": "https://stackoverflow.com/users/6220544/sl4vr"}, "is_accepted": false, "score": 0, "last_activity_date": 1557841270, "creation_date": 1557841270, "answer_id": 56131909, "question_id": 43643445, "link": "https://stackoverflow.com/questions/43643445/custom-exception-in-ruby-2-3-and-2-4/56131909#56131909", "title": "Custom exception in Ruby 2.3 and 2.4", "body": "<p>You rescue <code>CustomError</code>, but <code>NoMethodError</code> is being raised. <code>NoMethodError</code> inherits <code>StandardError</code>, that's why it can be rescued with <code>rescue StandardError</code>.</p>\n"}], "owner": {"reputation": 35, "user_id": 7054283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ewjm_J2lS6w/AAAAAAAAAAI/AAAAAAAAAHc/qZWskNs7qEg/photo.jpg?sz=128", "display_name": "Cirus Polis", "link": "https://stackoverflow.com/users/7054283/cirus-polis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557841270, "creation_date": 1493236603, "question_id": 43643445, "link": "https://stackoverflow.com/questions/43643445/custom-exception-in-ruby-2-3-and-2-4", "title": "Custom exception in Ruby 2.3 and 2.4", "body": "<p>I would like to rescue some code with a custom class in Ruby 2.3 and 2.4.\nBut unlike with the previous versions (such as 2.2 which was working great), I have some troubles. Here an example:</p>\n\n<p>Given this class:</p>\n\n<pre><code>class CustomError &lt; StandardError\nend\n</code></pre>\n\n<p>This code is successfully rescued:</p>\n\n<pre><code>begin\n  'foo'.bar(:boom)\nrescue\n  puts 'THIS IS FINE.'\nend\n\n# =&gt; printing \"THIS IS FINE.\" on the screen\n</code></pre>\n\n<p>This one is also successfully rescued:</p>\n\n<pre><code>begin\n  'foo'.bar(:boom)\nrescue StandardError\n  puts 'THIS IS FINE.'\nend\n\n# =&gt; printing \"THIS IS FINE.\" on the screen\n</code></pre>\n\n<p>But not this one:</p>\n\n<pre><code>begin\n  'foo'.bar(:boom)\nrescue CustomError\n  puts 'THIS IS FINE.'\nend\n</code></pre>\n\n<p>This message is raised:</p>\n\n<blockquote>\n  <p>undefined method `bar' for \"foo\":String (NoMethodError)</p>\n</blockquote>\n\n<p>I don't know why my custom exception class is not handled.</p>\n"}, {"tags": ["ruby", "google-maps"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1493236718, "post_id": 43643199, "comment_id": 74335219, "body": "You can start <a href=\"https://github.com/edwardsamuel/google-maps-services-ruby/blob/master/README.md\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1493239086, "post_id": 43643199, "comment_id": 74336514, "body": "i might share working rails code from a real project - but it has limited functionality, just shows the place in a map as a picture file, and opens a map modal when clicked on it."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493240696, "post_id": 43643199, "comment_id": 74337373, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;. We&#39;d like to see evidence of your effort. What did you try? Did you search and not find anything? Did you find stuff but it didn&#39;t help? Did you try writing code? If not, why? If so, what is the smallest code example that shows what you tried and why didn&#39;t it work? Without that it looks like you didn&#39;t try and want us to write a tutorial and code for you."}, {"owner": {"reputation": 8321, "user_id": 359219, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/953d32e245f7eb0e670bde0577f1eb43?s=128&d=identicon&r=PG", "display_name": "pitosalas", "link": "https://stackoverflow.com/users/359219/pitosalas"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1493251590, "post_id": 43643199, "comment_id": 74341296, "body": "@marmeladze Thanks that would be great. That&#39;s exactly what I am working on, and I don&#39;t want to put my key in the client js so I thought I could do the call to the API on the server using Ruby."}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1493269617, "post_id": 43643199, "comment_id": 74346021, "body": "follow that 3 links  [1] <a href=\"https://gist.github.com/marmeladze/9dec4c0536def82b65c62334430eca16\" rel=\"nofollow noreferrer\">gist.github.com/marmeladze/9dec4c0536def82b65c62334430eca16</a>  [2] <a href=\"https://gist.github.com/marmeladze/cb5c5aa40b6cf96942228319c5dec2d6\" rel=\"nofollow noreferrer\">gist.github.com/marmeladze/cb5c5aa40b6cf96942228319c5dec2d6</a>  [3] <a href=\"https://gist.github.com/marmeladze/9c0a173803e305a7079ce6eef5190761\" rel=\"nofollow noreferrer\">gist.github.com/marmeladze/9c0a173803e305a7079ce6eef5190761</a>"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493242374, "post_id": 43644654, "comment_id": 74338203, "body": "The question is off-topic. <a href=\"https://meta.stackoverflow.com/questions/256328/vote-to-close-unclear-questions-immediately-after-commenting\" title=\"vote to close unclear questions immediately after commenting\">meta.stackoverflow.com/questions/256328/&hellip;</a> and <a href=\"https://meta.stackoverflow.com/questions/260263/how-long-should-we-wait-for-a-poster-to-clarify-a-question-before-closing\" title=\"how long should we wait for a poster to clarify a question before closing\">meta.stackoverflow.com/questions/260263/&hellip;</a> are applicable."}], "tags": [], "owner": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "is_accepted": false, "score": 1, "last_activity_date": 1493241337, "creation_date": 1493241337, "answer_id": 43644654, "question_id": 43643199, "link": "https://stackoverflow.com/questions/43643199/google-maps-api-accessible-with-java-python-or-ruby/43644654#43644654", "title": "Google Maps API accessible with Java, Python or Ruby?", "body": "<p>With a key, you can access the APIs through simple HTTPS requests, which you can send using <code>open-uri</code> and parse using <code>json</code>. </p>\n\n<pre><code>require 'open-uri'\nrequire 'ostruct'\nrequire 'json'\n\ndef journey_between start, destination\n  key = \"[Visit https://developers.google.com/maps/web/ to get a free key]\"\n\n  url = \"https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&amp;origins=#{start}&amp;destinations=#{destination}&amp;key=#{key}\"\n\n  json_response = open(url).read\n  journey_data = JSON.parse(json_response, object_class: OpenStruct).rows[0].elements[0]\n  return journey_data\nend\n\njourney = journey_between \"London\", \"Glasgow\"\n\nputs journey.distance.text\n#=&gt; \"412 mi\"\n\nputs journey.duration.text\n#=&gt; \"6 hours 46 mins\"\n</code></pre>\n\n<p>Unfortunately, you can't try this example without an API key. You can get one at <a href=\"https://developers.google.com/maps/web/\" rel=\"nofollow noreferrer\">https://developers.google.com/maps/web/</a> for free by registering a project under your Google account. </p>\n"}], "owner": {"reputation": 8321, "user_id": 359219, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/953d32e245f7eb0e670bde0577f1eb43?s=128&d=identicon&r=PG", "display_name": "pitosalas", "link": "https://stackoverflow.com/users/359219/pitosalas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1493241337, "creation_date": 1493235756, "question_id": 43643199, "link": "https://stackoverflow.com/questions/43643199/google-maps-api-accessible-with-java-python-or-ruby", "title": "Google Maps API accessible with Java, Python or Ruby?", "body": "<p>Is there a way anyone knows to call the Google Maps APIs from Ruby for example?</p>\n"}, {"tags": ["ruby", "rubygems", "vagrant", "vagrant-plugin", "chef-zero"], "comments": [{"owner": {"reputation": 454, "user_id": 376552, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ntcQO.jpg?s=128&g=1", "display_name": "Delavega", "link": "https://stackoverflow.com/users/376552/delavega"}, "edited": false, "score": 0, "creation_date": 1494851709, "post_id": 43642959, "comment_id": 74988353, "body": "could you solve the issue? tnx"}, {"owner": {"reputation": 143, "user_id": 5736112, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4a4992e47e824469a2096ccc288f0b2a?s=128&d=identicon&r=PG&f=1", "display_name": "MaxRah", "link": "https://stackoverflow.com/users/5736112/maxrah"}, "reply_to_user": {"reputation": 454, "user_id": 376552, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ntcQO.jpg?s=128&g=1", "display_name": "Delavega", "link": "https://stackoverflow.com/users/376552/delavega"}, "edited": false, "score": 0, "creation_date": 1495727020, "post_id": 43642959, "comment_id": 75383101, "body": "@Delavega I couldn&#39;t solve it so I switched to Ansible."}], "owner": {"reputation": 143, "user_id": 5736112, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4a4992e47e824469a2096ccc288f0b2a?s=128&d=identicon&r=PG&f=1", "display_name": "MaxRah", "link": "https://stackoverflow.com/users/5736112/maxrah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493235323, "creation_date": 1493234906, "last_edit_date": 1493235323, "question_id": 43642959, "link": "https://stackoverflow.com/questions/43642959/installing-vagrant-librarian-chef-plugin", "title": "installing vagrant-librarian-chef plugin", "body": "<p>I'm trying to install the vagrant librarian plugin with this command: </p>\n\n<blockquote>\n  <p>vagrant plugin install vagrant-librarian-chef</p>\n</blockquote>\n\n<p>But I keep getting this error message:</p>\n\n<blockquote>\n  <p>chef-zero requires Ruby version >= 2.3.1.</p>\n</blockquote>\n\n<p>So I've uninstalled chef-zero and downloaded and then set my Ruby version to 2.3.1 but I continue to get the same error message.</p>\n\n<p>I've reset the terminal but still the same error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "logging", "console"], "comments": [{"owner": {"reputation": 1280, "user_id": 3554338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c022fa34c942d95cc255e80cd73f9753?s=128&d=identicon&r=PG&f=1", "display_name": "Aparichith", "link": "https://stackoverflow.com/users/3554338/aparichith"}, "edited": false, "score": 0, "creation_date": 1493306093, "post_id": 43642718, "comment_id": 74370350, "body": "Though accepted answer solves your problem, you can give a try to <a href=\"https://github.com/pry/pry\" rel=\"nofollow noreferrer\">pry</a> for debugging your application."}], "answers": [{"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1493235382, "post_id": 43642768, "comment_id": 74334459, "body": "You can use <b>any</b> logger (e.g. pure Ruby <code>Logger</code> or <code>Log4r::Logger</code>), Rails logger is just the most popular solution."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1493234664, "last_edit_date": 1493234664, "creation_date": 1493234303, "answer_id": 43642768, "question_id": 43642718, "link": "https://stackoverflow.com/questions/43642718/how-do-i-send-my-output-to-the-rails-console/43642768#43642768", "title": "How do I send my output to the Rails console?", "body": "<p>You want to use <a href=\"http://guides.rubyonrails.org/debugging_rails_applications.html#the-logger\" rel=\"nofollow noreferrer\"><code>Rails.logger</code></a>:</p>\n\n<pre><code>rescue =&gt; e\n  Rails.logger.error \"#{e.message}\\n\"\n  e.backtrace.each { |line| Rails.logger.error \"#{msg}\\n#{line}\" }\n  raise e\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 43642768, "answer_count": 1, "score": 0, "last_activity_date": 1493234873, "creation_date": 1493234090, "last_edit_date": 1493234873, "question_id": 43642718, "link": "https://stackoverflow.com/questions/43642718/how-do-i-send-my-output-to-the-rails-console", "title": "How do I send my output to the Rails console?", "body": "<p>I'm using Rails 5 and Ruby 2.4.  I would like to capture the output from an error, print it on my console, and so I have in one of my app/service classes</p>\n\n<pre><code>rescue =&gt; e\n  error = e\n  msg = \"#{e.message}\\n\"\n  e.backtrace.each { |line|\n    msg = \"#{msg}\\n#{line}\"\n  }\n  logger.error msg\n  raise e\nend\n</code></pre>\n\n<p>but I'm getting the below error</p>\n\n<pre><code>NameError: undefined local variable or method `logger' for #&lt;RunCrawlersService:0x007fd14c2f1e10&gt;\n    from /Users/nataliab/Documents/workspace/myproject/app/services/run_mycustom_service.rb:34:in `rescue in block (2 levels) in run_all_crawlers'\n    from /Users/nataliab/Documents/workspace/myproject/app/services/run_mycustom_service.rb:16:in `block (2 levels) in run_all_crawlers'\n    from /Users/nataliab/.rvm/gems/ruby-2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:348:in `run_task'\n    from /Users/nataliab/.rvm/gems/ruby-2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:337:in `block (3 levels) in create_worker'\n    from /Users/nataliab/.rvm/gems/ruby-2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `loop'\n    from /Users/nataliab/.rvm/gems/ruby-2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:320:in `block (2 levels) in create_worker'\n    from /Users/nataliab/.rvm/gems/ruby-2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `catch'\n    from /Users/nataliab/.rvm/gems/ruby-2.4.0/gems/concurrent-ruby-1.0.5/lib/concurrent/executor/ruby_thread_pool_executor.rb:319:in `block in create_worker'\n</code></pre>\n\n<p>How do I properly send my output to the console?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1493234636, "post_id": 43642710, "comment_id": 74334042, "body": "<i>&quot;what I should to do, if I have odd number of players?&quot;</i> \u2013 that&#39;s not a technical problem."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6107987"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1493234995, "post_id": 43642710, "comment_id": 74334231, "body": "I mean, what I have to expect when we have odd numbers of players. Now I see it, last guy in array - alone [...[11, 1], [10]]. And yes, it&#39;s more about rules of the game..."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493240778, "post_id": 43642710, "comment_id": 74337422, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;. We&#39;d like to see evidence of your effort. What did you try? Did you search and not find anything? Did you find stuff but it didn&#39;t help? Did you try writing code? If not, why? If so, what is the smallest code example that shows what you tried and why didn&#39;t it work? Without that it looks like you didn&#39;t try and want us to write it for you."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6107987"}, "edited": false, "score": 1, "creation_date": 1493235247, "post_id": 43642750, "comment_id": 74334376, "body": "Thanks! It was easy. I do not know why, but I&#39;m tried to do it with &quot;permutation&quot; and &quot;unique&quot;. Have to go outside and breath little bit :D"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 5, "last_activity_date": 1493234530, "last_edit_date": 1493234530, "creation_date": 1493234229, "answer_id": 43642750, "question_id": 43642710, "link": "https://stackoverflow.com/questions/43642710/better-way-to-matching-pairs-from-array-of-users-in-ruby/43642750#43642750", "title": "Better way to matching pairs from array of users in ruby?", "body": "<blockquote>\n  <p>How to generate random (unique) pairs between users (for game)</p>\n</blockquote>\n\n<pre><code>[1,2,3,4,5,6].shuffle.each_slice(2).to_a\n#=&gt; [[5, 4], [1, 3], [6, 2]]\n</code></pre>\n\n<p>Reference:</p>\n\n<ul>\n<li><a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-shuffle\" rel=\"noreferrer\">Array#<code>shuffle</code></a></li>\n<li><a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-each_slice\" rel=\"noreferrer\">Enumerable#<code>each_slice</code></a></li>\n</ul>\n\n<blockquote>\n  <p>Also, what I should to do, if I have odd number of players?</p>\n</blockquote>\n\n<p>Set even number of players to play and do nothing with the reminding one until new player shows up? :)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6107987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 43642750, "answer_count": 1, "score": 0, "last_activity_date": 1493302378, "creation_date": 1493234064, "last_edit_date": 1493302378, "question_id": 43642710, "link": "https://stackoverflow.com/questions/43642710/better-way-to-matching-pairs-from-array-of-users-in-ruby", "title": "Better way to matching pairs from array of users in ruby?", "body": "<p>How to generate random unique pairs from array of users?</p>\n\n<p>For example, we have 10 users and we must generate something like this:</p>\n\n<ul>\n<li>user 1 have to play with user 3</li>\n<li>user 2 have to play with user 6</li>\n</ul>\n\n<p>etc.</p>\n\n<p>Also, what should I do, if there's odd number of players?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "vagrant", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 5455, "user_id": 393021, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5761f8f81bb258e64b585889481ef25c?s=128&d=identicon&r=PG", "display_name": "iGbanam", "link": "https://stackoverflow.com/users/393021/igbanam"}, "edited": false, "score": 0, "creation_date": 1493236208, "post_id": 43643042, "comment_id": 74334930, "body": "I tried installing this plugin and I got the same error"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 5455, "user_id": 393021, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5761f8f81bb258e64b585889481ef25c?s=128&d=identicon&r=PG", "display_name": "iGbanam", "link": "https://stackoverflow.com/users/393021/igbanam"}, "edited": false, "score": 0, "creation_date": 1493236896, "post_id": 43643042, "comment_id": 74335333, "body": "You need to clear the partially installed stuff from before."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 5455, "user_id": 393021, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5761f8f81bb258e64b585889481ef25c?s=128&d=identicon&r=PG", "display_name": "iGbanam", "link": "https://stackoverflow.com/users/393021/igbanam"}, "edited": false, "score": 0, "creation_date": 1493236916, "post_id": 43643042, "comment_id": 74335347, "body": "But again, probably don&#39;t use librarian. Berks has entirely replaced it in Chef."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 5455, "user_id": 393021, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5761f8f81bb258e64b585889481ef25c?s=128&d=identicon&r=PG", "display_name": "iGbanam", "link": "https://stackoverflow.com/users/393021/igbanam"}, "edited": false, "score": 0, "creation_date": 1493245057, "post_id": 43643042, "comment_id": 74339296, "body": "It is also entirely possible that librarian-chef no longer works on older Ruby, we&#39;ve been aggressively dropping support for 2.1 and 2.2."}, {"owner": {"reputation": 5455, "user_id": 393021, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5761f8f81bb258e64b585889481ef25c?s=128&d=identicon&r=PG", "display_name": "iGbanam", "link": "https://stackoverflow.com/users/393021/igbanam"}, "edited": false, "score": 0, "creation_date": 1493247603, "post_id": 43643042, "comment_id": 74340165, "body": "Yeah but I have 2.4, it&#39;s asking for &quot; &gt;= 2.3.1&quot;. If my Ruby is already higher, why wouldn&#39;t it install?"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 5455, "user_id": 393021, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5761f8f81bb258e64b585889481ef25c?s=128&d=identicon&r=PG", "display_name": "iGbanam", "link": "https://stackoverflow.com/users/393021/igbanam"}, "edited": false, "score": 0, "creation_date": 1493258414, "post_id": 43643042, "comment_id": 74343013, "body": "When you install a Vagrant plugin it installs into the Ruby environment that comes with Vagrant, not the system Ruby environment. Check that you aren&#39;t on a super old version of Vagrant, but it&#39;s possible they are just shipping an old Ruby because they haven&#39;t had time to update it."}, {"owner": {"reputation": 5455, "user_id": 393021, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5761f8f81bb258e64b585889481ef25c?s=128&d=identicon&r=PG", "display_name": "iGbanam", "link": "https://stackoverflow.com/users/393021/igbanam"}, "edited": false, "score": 0, "creation_date": 1493277479, "post_id": 43643042, "comment_id": 74349723, "body": "I just installed Vagrant before trying this out (+_+). Maybe they haven&#39;t upgraded the Ruby"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1493235262, "creation_date": 1493235262, "answer_id": 43643042, "question_id": 43642117, "link": "https://stackoverflow.com/questions/43642117/librarian-chef-requiring-ruby2-3-fails-to-install-on-ruby2-4/43643042#43643042", "title": "librarian-chef requiring ruby2.3 fails to install on ruby2.4", "body": "<p>I don't see anything in that repo telling you to install anything related to librarian. Librarian-chef has been basically abandoned by the community, but if you did want to use it for some reason the plugin to install is <code>vagrant-librarian-chef</code>, not <code>librarian-chef</code>.</p>\n"}], "owner": {"reputation": 5455, "user_id": 393021, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5761f8f81bb258e64b585889481ef25c?s=128&d=identicon&r=PG", "display_name": "iGbanam", "link": "https://stackoverflow.com/users/393021/igbanam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493237339, "creation_date": 1493231987, "last_edit_date": 1493237339, "question_id": 43642117, "link": "https://stackoverflow.com/questions/43642117/librarian-chef-requiring-ruby2-3-fails-to-install-on-ruby2-4", "title": "librarian-chef requiring ruby2.3 fails to install on ruby2.4", "body": "<p>I am trying to install a vagrant plugin \"<em>librarian-chef</em>\". When I run the command <code>vagrant plugin install librarian-chef</code>, I get the error:</p>\n\n<blockquote>\n  <p>Bundler, the underlying system Vagrant uses to install plugins,\n  reported an error. The error is shown below. These errors are usually\n  caused by misconfigured plugin installations or transient network\n  issues. The error from Bundler is:</p>\n  \n  <p>chef-zero requires Ruby version >= 2.3.1.</p>\n</blockquote>\n\n<ul>\n<li>Why does this requirement break the install?  </li>\n<li>How do I make sure my setup meets what this needs?</li>\n</ul>\n\n<h3>Details of my setup</h3>\n\n<p>I have <code>ruby-2.4.0p0</code> on a Macbook installed under RVM. This is my only Ruby on this machine.</p>\n\n<p>For reference purposes, I am trying to get started with the <a href=\"https://github.com/plos/lagotto\" rel=\"nofollow noreferrer\">plos/lagotto</a> repo.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "deployment", "routes"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493232894, "post_id": 43641980, "comment_id": 74333007, "body": "What&#39;s your routes.rb?"}, {"owner": {"reputation": 274, "user_id": 1076523, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9edaadeded9f7be5e35253d60c2bb882?s=128&d=identicon&r=PG", "display_name": "Kyle Asaff", "link": "https://stackoverflow.com/users/1076523/kyle-asaff"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493233085, "post_id": 43641980, "comment_id": 74333119, "body": "@Md.FarhanMemon edited and included it in the OP"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493234274, "post_id": 43641980, "comment_id": 74333833, "body": "I haven&#39;t tried it myself but issue here <a href=\"https://github.com/rails/rails/issues/21193\" rel=\"nofollow noreferrer\">github.com/rails/rails/issues/21193</a> says adding <code>root to: redirect(&#39;sub-directory&#39;)</code> solves the issue."}, {"owner": {"reputation": 274, "user_id": 1076523, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9edaadeded9f7be5e35253d60c2bb882?s=128&d=identicon&r=PG", "display_name": "Kyle Asaff", "link": "https://stackoverflow.com/users/1076523/kyle-asaff"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493234936, "post_id": 43641980, "comment_id": 74334203, "body": "I can&#39;t seem to get that to work, the problem is when I go to &#39;localhost:3000/&#39; my rails app doesn&#39;t even seem to get hit because it&#39;s running at a level higher then that at &#39;localhost:3000/sub-directory&#39;"}], "owner": {"reputation": 274, "user_id": 1076523, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9edaadeded9f7be5e35253d60c2bb882?s=128&d=identicon&r=PG", "display_name": "Kyle Asaff", "link": "https://stackoverflow.com/users/1076523/kyle-asaff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 607, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1493233061, "creation_date": 1493231534, "last_edit_date": 1493233061, "question_id": 43641980, "link": "https://stackoverflow.com/questions/43641980/redirecting-to-sub-directory-when-running-rails-app-as-a-sub-directory", "title": "Redirecting \u201c/\u201d to \u201c/sub-directory\u201d When Running Rails App as a Sub-Directory?", "body": "<p>I am running my rails app as sub-directory (for apache mapping reasons):</p>\n\n<p>config.ru:</p>\n\n<pre><code>map '/sub-directory' do\n    run Rails.application\nend\n</code></pre>\n\n<p>application.rb:</p>\n\n<pre><code>config.root_directory = \"/sub-directory/\"\nconfig.action_controller.relative_url_root = '/sub-directory'\n</code></pre>\n\n<p>so now my app (it's root) is ran from the route <a href=\"http://localhost:3000/sub-directory\" rel=\"nofollow noreferrer\">http://localhost:3000/sub-directory</a>. The problem is when I go to <a href=\"http://localhost:3000/\" rel=\"nofollow noreferrer\">http://localhost:3000/</a> I get the page:</p>\n\n<pre><code>Not Found: /\n</code></pre>\n\n<p>I understand I am getting that because my app isn't running in there anymore but I would like that route to redirect to <a href=\"http://localhost:3000/sub-directory\" rel=\"nofollow noreferrer\">http://localhost:3000/sub-directory</a>. Is there anyway I can accomplish this?</p>\n\n<p>if this helps, routes.rb:</p>\n\n<pre><code>require 'resque/server'\nRails.application.routes.draw do\n\n  get \"handle/:handle\" =&gt; \"handles#index\"\n  get \"/tag/:hashtag\" =&gt; \"tags#index\"\n\n  get \"handles/:handle\" =&gt; \"handles#index\"\n  get \"/tags/:hashtag\" =&gt; \"tags#index\"\n\n  devise_for :users, :controllers =&gt; {\n    :registrations =&gt; \"registrations\",\n    :passwords =&gt; \"passwords\"\n  }\n\n  devise_scope :user do \n    get \"/email\" =&gt; \"registrations#email\"\n    post \"/registrations/check_email\" =&gt; \"registrations#check_email\"\n    get \"/users/sign_in\" =&gt; \"registrations#signup\"\n  end\n\n\n\n  authenticated :user do\n    devise_scope :user do\n      root :to =&gt; redirect(\"app\"), as: :authenticated_root\n      get \"/app\", :to =&gt; 'reports#index'\n    end\n  end\n\n  unauthenticated do\n    devise_scope :user do\n      root to: 'registrations#new'\n    end\n  end\n\n  get '/oauth' =&gt; 'social_platforms#new'\n\n  get \"/auth/:provider/callback\" =&gt; \"social_platforms#create\"\n\n  get   '/login', :to =&gt; 'sessions#new', :as =&gt; :login\n\n  # match '/auth/failure' =&gt; 'sessions#failure', :via =&gt; [:get]\n\n  # get '/reports', to: 'pages#reports', as: :reports\n  resources :reports, only: [:show, :index]\n  get '/get_report', to: 'reports#get_report'\n  get '/check_token', to: 'reports#check_token'\n\n  mount Resque::Server.new, at: \"/resque\"\n\n  get '*path' =&gt; redirect('/')\nend\n</code></pre>\n"}, {"tags": ["ruby", "web-scraping", "screen-scraping", "mechanize"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493240847, "post_id": 43641729, "comment_id": 74337463, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;. We&#39;d like to see evidence of your effort. What did you try? Did you search and not find anything? Did you find stuff but it didn&#39;t help? Did you try writing code? If not, why? If so, what is the smallest code example that shows what you tried and why didn&#39;t it work? Without that it looks like you didn&#39;t try and want us to write it for you."}, {"owner": {"reputation": 1157, "user_id": 2653567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RNYoa.png?s=128&g=1", "display_name": "HMLDude", "link": "https://stackoverflow.com/users/2653567/hmldude"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493313610, "post_id": 43641729, "comment_id": 74375336, "body": "Point taken, read the suggested docs. Will aim to incorporate those principals into subsequent questions."}], "answers": [{"comments": [{"owner": {"reputation": 1157, "user_id": 2653567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RNYoa.png?s=128&g=1", "display_name": "HMLDude", "link": "https://stackoverflow.com/users/2653567/hmldude"}, "edited": false, "score": 0, "creation_date": 1493231746, "post_id": 43642002, "comment_id": 74332355, "body": "Why is the break statement required?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1157, "user_id": 2653567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RNYoa.png?s=128&g=1", "display_name": "HMLDude", "link": "https://stackoverflow.com/users/2653567/hmldude"}, "edited": false, "score": 0, "creation_date": 1493231775, "post_id": 43642002, "comment_id": 74332372, "body": "I&#39;m presuming you don&#39;t want to fetch the same page over and over, forever."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1493231594, "creation_date": 1493231594, "answer_id": 43642002, "question_id": 43641729, "link": "https://stackoverflow.com/questions/43641729/escape-mechinze-error-in-ruby-scraping/43642002#43642002", "title": "Escape Mechinze Error in Ruby Scraping", "body": "<p>Like anything in Ruby it probably boils down to <code>rescue</code> and recover:</p>\n\n<pre><code>loop do\n  begin\n    Mechanize.do_stuff!\n\n    # Success!\n    break\n\n  rescue Mechanize::ResponseCodeError\n    # Server-side failure, so let's try again after a quick break\n    sleep(10)\n  end\nend\n</code></pre>\n\n<p>Note the <code>sleep(10)</code> is there to avoid slamming the server furiously and making it malfunction even harder.</p>\n"}], "owner": {"reputation": 1157, "user_id": 2653567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RNYoa.png?s=128&g=1", "display_name": "HMLDude", "link": "https://stackoverflow.com/users/2653567/hmldude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 1, "accepted_answer_id": 43642002, "answer_count": 1, "score": 0, "last_activity_date": 1493231594, "creation_date": 1493230754, "last_edit_date": 1493231485, "question_id": 43641729, "link": "https://stackoverflow.com/questions/43641729/escape-mechinze-error-in-ruby-scraping", "title": "Escape Mechinze Error in Ruby Scraping", "body": "<p>I am getting the following server response error while trying to scrape SERP results: </p>\n\n<pre><code>/Users/*********/.rvm/gems/ruby-2.3.0/gems/mechanize-2.7.5/lib/mechanize/http/agent.rb:323:in `fetch': 503 =&gt; Net::HTTPServiceUnavailable for http://******.*****.com/sorry/index?continue=http://www.********.com/search%3Fq%3D&lt;term1&gt;%2B&lt;term2&gt; -- unhandled response (Mechanize::ResponseCodeError)\n</code></pre>\n\n<p>I am trying to figure out how to escape the error / exception, so that the program will continue to run instead of automatically exiting. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "asset-pipeline", "sprockets"], "answers": [{"tags": [], "owner": {"reputation": 1462, "user_id": 1230053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bc0f56c16d50540f99313692762924e?s=128&d=identicon&r=PG", "display_name": "Ken Stipek", "link": "https://stackoverflow.com/users/1230053/ken-stipek"}, "is_accepted": false, "score": 3, "last_activity_date": 1493254573, "creation_date": 1493254573, "answer_id": 43646878, "question_id": 43641049, "link": "https://stackoverflow.com/questions/43641049/when-during-the-slug-build-process-does-my-rails-app-have-access-to-the-env-vari/43646878#43646878", "title": "When during the slug build process does my rails app have access to the ENV variables set by Heroku?", "body": "<p>I have solved this for myself by using a deploy script and using the heroku-cli tool to update my app with the new commit hash before pushing the code:</p>\n\n<p>deploy.sh</p>\n\n<pre><code>...\nheroku config:set APP_VERSION=&lt;commit hash&gt; --app &lt;your app name&gt;\ngit push heroku master\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 474, "user_id": 3674071, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/a077084401d5bd5e42df5cc2da9cbcc5?s=128&d=identicon&r=PG", "display_name": "reid", "link": "https://stackoverflow.com/users/3674071/reid"}, "is_accepted": false, "score": 3, "last_activity_date": 1493304586, "creation_date": 1493304586, "answer_id": 43661131, "question_id": 43641049, "link": "https://stackoverflow.com/questions/43641049/when-during-the-slug-build-process-does-my-rails-app-have-access-to-the-env-vari/43661131#43661131", "title": "When during the slug build process does my rails app have access to the ENV variables set by Heroku?", "body": "<p>I have received a response from Heroku support which seems to fix the needs that I am looking for.</p>\n\n<p>Heroku's response:</p>\n\n<blockquote>\n  <p>Unfortunately, at this point, our dyno metadata lab flags and the\n  config vars made available during the build don't entirely match up.\n  During the build, you can use the SOURCE_VERSION environment variable,\n  which will be the commit hash. Then, at runtime, you can use\n  HEROKU_SLUG_COMMIT to get the same value.</p>\n  \n  <p>The reason behind this difference is mostly a difference of context.\n  Naming that variable HEROKU_SLUG_COMMIT during build wouldn't make\n  sense, as it's not a slug yet.</p>\n  \n  <p>Since we will never set both config vars, you should be able to use\n  any of them, and fallback to the other if it's not set.</p>\n</blockquote>\n\n<p>My current implementation now is:\n<code>ENV[\"SOURCE_VERSION\"] || ENV['HEROKU_SLUG_COMMIT']</code> in that order. This works for me.</p>\n"}], "owner": {"reputation": 474, "user_id": 3674071, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/a077084401d5bd5e42df5cc2da9cbcc5?s=128&d=identicon&r=PG", "display_name": "reid", "link": "https://stackoverflow.com/users/3674071/reid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1493304586, "creation_date": 1493228331, "last_edit_date": 1493252125, "question_id": 43641049, "link": "https://stackoverflow.com/questions/43641049/when-during-the-slug-build-process-does-my-rails-app-have-access-to-the-env-vari", "title": "When during the slug build process does my rails app have access to the ENV variables set by Heroku?", "body": "<p>I am looking to load a file into my rails cache with a cache key based on any of the possible values set by the Heroku Labs: Dyno Metadata addon (<a href=\"https://devcenter.heroku.com/articles/dyno-metadata\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/dyno-metadata</a>).</p>\n\n<p>Within that article, I am looking for a unique identifier which is available early within the slug build process.</p>\n\n<p><code>\nHEROKU_RELEASE_CREATED_AT:       2015-04-02T18:00:42Z\nHEROKU_RELEASE_VERSION:          v42\nHEROKU_SLUG_COMMIT:              2c3a0b24069af49b3de35b8e8c26765c1dba9ff0\n</code></p>\n\n<p>These are the three that are of some interest to me (example data above). During my asset pre-compilation step, I am dependent on a unique value which I have decided to use any of the 3 above. This step is done before my rails app is operational.</p>\n\n<p>Initially I tried <code>HEROKU_RELEASE_VERSION</code> however I noticed that it is not set until the slug build process is completed which means during my asset pre-compilation step, it is <code>nil</code>.</p>\n\n<p>I am then trying <code>HEROKU_SLUG_COMMIT</code> to see if this is known before asset pre-compilation. Is this correct? From some initial testing, it seems to work correctly (it is at least known before asset pre-compilation), however I would like to know the correct order that these are set.</p>\n\n<p>If this is not an earlier value that is available within <code>ENV[]</code>, what would be a better suggestion?</p>\n\n<p>====== UPDATE:</p>\n\n<p>I have been playing around with the configuration below with the values:</p>\n\n<p><code>\nHEROKU_RELEASE_CREATED_AT:       2015-04-02T18:00:42Z\nHEROKU_RELEASE_VERSION:          v42\nHEROKU_SLUG_COMMIT:              2c3a0b24069af49b3de35b8e8c26765c1dba9ff0\n</code></p>\n\n<p>I have noticed that before building the assets, those above values do not change pre-build but rather post-build. Below, I have the resulting output below. As you can see, the current deploy is <code>2583508</code> but <code>ENV['HEROKU_SLUG_COMMIT']</code> returns <code>8318914</code> during the build process until the application has finished, then <code>ENV['HEROKU_SLUG_COMMIT']</code> is updated to <code>2583508</code>.</p>\n\n<pre><code>=== sample-app Releases - Current: v356\nv356  Deploy 2583508   email@gmail.com    2017/04/26 20:05:51 -0400 (~ 40s ago)\nv355  Deploy 8318914   email@gmail.com    2017/04/26 19:51:33 -0400 (~ 14m ago)\nv354  Deploy c054f1e   email@gmail.com    2017/04/26 19:40:42 -0400 (~ 25m ago)\n\nBROWSER RESTRICTIONS SLUG COMMIT: 83189141e4e45643bf71d9aa78604e479ea210f1\n</code></pre>\n\n<p>Is there a way to uniquely know the current build before actually building? Maybe not using the heroku lab addon?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "xls", "respond-to"], "answers": [{"comments": [{"owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1493228724, "post_id": 43641105, "comment_id": 74330550, "body": "I think you pasted the wrong example content there - that&#39;d work for <code>.html.erb</code>, but shouldn&#39;t be in an XLS file."}, {"owner": {"reputation": 3724, "user_id": 2409515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a33T6.jpg?s=128&g=1", "display_name": "Rokibul Hasan", "link": "https://stackoverflow.com/users/2409515/rokibul-hasan"}, "reply_to_user": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1493228797, "post_id": 43641105, "comment_id": 74330594, "body": "No .xls works for html table, I have posted form one of my working application."}, {"owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 1, "creation_date": 1493228843, "post_id": 43641105, "comment_id": 74330616, "body": "It <i>works</i>, yes, but a user will expect an XLS file to contain a valid Excel file, which this... is not."}, {"owner": {"reputation": 3724, "user_id": 2409515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a33T6.jpg?s=128&g=1", "display_name": "Rokibul Hasan", "link": "https://stackoverflow.com/users/2409515/rokibul-hasan"}, "reply_to_user": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1493228973, "post_id": 43641105, "comment_id": 74330680, "body": "Actually this is an easy approach to use the object and simple markup without any complexity."}, {"owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1493229027, "post_id": 43641105, "comment_id": 74330702, "body": "You&#39;re missing my point. You&#39;ve put HTML in what a user expects to be an Excel file."}, {"owner": {"reputation": 3724, "user_id": 2409515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a33T6.jpg?s=128&g=1", "display_name": "Rokibul Hasan", "link": "https://stackoverflow.com/users/2409515/rokibul-hasan"}, "reply_to_user": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1493229300, "post_id": 43641105, "comment_id": 74330840, "body": "I get your point format.xls { send_data @products.to_xls }  and html content do the same thing, download an xml file. you can try your end :)"}, {"owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1493229382, "post_id": 43641105, "comment_id": 74330890, "body": "Yes, you&#39;re correct that they have the same effect (mostly, depending on reverse proxy configuration and browser settings), but one of them will open, while the other will report being an invalid Excel file."}, {"owner": {"reputation": 3724, "user_id": 2409515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a33T6.jpg?s=128&g=1", "display_name": "Rokibul Hasan", "link": "https://stackoverflow.com/users/2409515/rokibul-hasan"}, "reply_to_user": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1493229538, "post_id": 43641105, "comment_id": 74330981, "body": "Aha get your point now :) It may show invalid excel file but did not experience that before."}, {"owner": {"reputation": 23, "user_id": 5597323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28fd5ffd8c7c28e422e0db49b7eb1b1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bret", "link": "https://stackoverflow.com/users/5597323/bret"}, "edited": false, "score": 0, "creation_date": 1493229893, "post_id": 43641105, "comment_id": 74331196, "body": "If I may. The respond_to do block was supposed to take the objects from the partial and transform them from html, to csv &amp; (if necessary) transform them into xls. It&#39;s an updated tutorial from the Railscast 362 episode that was really popular. Also, I check the github repository of there&#39;s that is supposed to work and there&#39;s no .xls views"}, {"owner": {"reputation": 23, "user_id": 5597323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28fd5ffd8c7c28e422e0db49b7eb1b1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bret", "link": "https://stackoverflow.com/users/5597323/bret"}, "edited": false, "score": 0, "creation_date": 1493230827, "post_id": 43641105, "comment_id": 74331804, "body": "Actually, I digress, the index.xls.erb was the correct answer. It was the last step in the tutorial and I (wrongly) thought I should be able to render the file from the step I was at."}], "tags": [], "owner": {"reputation": 3724, "user_id": 2409515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a33T6.jpg?s=128&g=1", "display_name": "Rokibul Hasan", "link": "https://stackoverflow.com/users/2409515/rokibul-hasan"}, "is_accepted": true, "score": 1, "last_activity_date": 1493230178, "last_edit_date": 1493230178, "creation_date": 1493228524, "answer_id": 43641105, "question_id": 43640971, "link": "https://stackoverflow.com/questions/43640971/missing-template-error-in-rails-exporting-xls-files/43641105#43641105", "title": "Missing Template Error in Rails Exporting XLS files", "body": "<p>You should have an file with <code>.xls.erb</code> file to render the request with <code>xls</code> formats. As your action the file should be <code>index.xls.erb</code>. </p>\n\n<p>Here I add some example content for you according <a href=\"http://railscasts.com/episodes/362-exporting-csv-and-excel\" rel=\"nofollow noreferrer\">RailsCast#362</a> </p>\n\n<pre><code>    &lt;?xml version=\"1.0\"?&gt;\n    &lt;Workbook xmlns=\"urn:schemas-microsoft-com:office:spreadsheet\"\n              xmlns:o=\"urn:schemas-microsoft-com:office:office\"\n              xmlns:x=\"urn:schemas-microsoft-com:office:excel\"\n              xmlns:ss=\"urn:schemas-microsoft-com:office:spreadsheet\"\n              xmlns:html=\"http://www.w3.org/TR/REC-html40\"&gt;\n      &lt;Worksheet ss:Name=\"Sheet1\"&gt;\n        &lt;Table&gt;\n          &lt;Row&gt;\n            &lt;Cell&gt;&lt;Data ss:Type=\"String\"&gt;ID&lt;/Data&gt;&lt;/Cell&gt;\n            &lt;Cell&gt;&lt;Data ss:Type=\"String\"&gt;Name&lt;/Data&gt;&lt;/Cell&gt;\n            &lt;Cell&gt;&lt;Data ss:Type=\"String\"&gt;Release Date&lt;/Data&gt;&lt;/Cell&gt;\n            &lt;Cell&gt;&lt;Data ss:Type=\"String\"&gt;Price&lt;/Data&gt;&lt;/Cell&gt;\n          &lt;/Row&gt;\n          &lt;% @products.each do |product| %&gt;\n              &lt;Row&gt;\n                &lt;Cell&gt;&lt;Data ss:Type=\"Number\"&gt;&lt;%= product.id %&gt;&lt;/Data&gt;&lt;/Cell&gt;\n                &lt;Cell&gt;&lt;Data ss:Type=\"String\"&gt;&lt;%= product.name %&gt;&lt;/Data&gt;&lt;/Cell&gt;\n                &lt;Cell&gt;&lt;Data ss:Type=\"String\"&gt;&lt;%= product.released_on %&gt;&lt;/Data&gt;&lt;/Cell&gt;\n                &lt;Cell&gt;&lt;Data ss:Type=\"Number\"&gt;&lt;%= product.price %&gt;&lt;/Data&gt;&lt;/Cell&gt;\n              &lt;/Row&gt;\n          &lt;% end %&gt;\n        &lt;/Table&gt;\n      &lt;/Worksheet&gt;\n    &lt;/Workbook&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "is_accepted": false, "score": 1, "last_activity_date": 1493228557, "creation_date": 1493228557, "answer_id": 43641118, "question_id": 43640971, "link": "https://stackoverflow.com/questions/43640971/missing-template-error-in-rails-exporting-xls-files/43641118#43641118", "title": "Missing Template Error in Rails Exporting XLS files", "body": "<p>Rails is looking for a view, and not finding one. Specifically, it's looking for an XLS-format view that it can render, because you haven't specified any special action for the <code>xls</code> format like you have for <code>csv</code>.</p>\n\n<p>You need to have an <code>index.xls[.erb]</code> view under <code>app/views/products</code>.</p>\n\n<p>Your alternative is to do with XLS as you've done for CSV:</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n  def self.to_xls\n    # get xls format data somehow and return it\n  end\nend\n</code></pre>\n\n\n\n<pre><code>class ProductsController &lt; ApplicationController\n  def index\n    @products = Product.order(:name)\n    respond_to do |format|\n      format.html\n      format.csv { send_data @products.to_csv }\n      format.xls { send_data @products.to_xls }\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5597323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28fd5ffd8c7c28e422e0db49b7eb1b1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bret", "link": "https://stackoverflow.com/users/5597323/bret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1197, "favorite_count": 0, "accepted_answer_id": 43641105, "answer_count": 2, "score": 1, "last_activity_date": 1493230178, "creation_date": 1493228049, "question_id": 43640971, "link": "https://stackoverflow.com/questions/43640971/missing-template-error-in-rails-exporting-xls-files", "title": "Missing Template Error in Rails Exporting XLS files", "body": "<p><code>export_excel/app/controllers/products/products_controller.rb</code></p>\n\n<pre><code>class ProductsController &lt; ApplicationController\n  def index\n    @products = Product.order(:name)\n    respond_to do |format|\n      format.html\n      format.csv { send_data @products.to_csv }\n      format.xls\n    end\n  end\nend\n</code></pre>\n\n<p><code>export_excel/app/models/product.rb</code></p>\n\n<pre><code>require 'csv'\nclass Product &lt; ActiveRecord::Base\n  def self.to_csv(options = {})\n    CSV.generate(options) do |csv|\n      csv &lt;&lt; column_names\n      all.each do |product|\n        csv &lt;&lt; product.attributes.values\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Index file is in:\n<code>export_excel/app/views/products/index.html.erb</code></p>\n\n<p>Partial is in:\n<code>export_excel/app/views/products/_product.html.erb</code></p>\n\n<p>The objective is to be able to click a link and begin the download of a excel or csv file that holds database objects in a table.</p>\n\n<p>The first time I ran this code it worked, and I still have the downloaded file on my stystem. However, everytime after that I've gotten this error:</p>\n\n<p><code>Missing template products/index, application/index with {:locale=&gt;[:en], :formats=&gt;[:xls], :variants=&gt;[], :handlers=&gt;[:erb, :builder, :raw, :ruby, :coffee, :jbuilder]}. Searched in: * \"/Users/Candied_Island/Desktop/CPF/export_excel_tutorial/app/views\"</code></p>\n\n<p><code>My index.hrml.erb is in the correct place, and I believe my partial is in the correct location as well. Please help if you can, I'm not seeing why I'm getting this error.</code></p>\n\n<p>Also, if it helps any it says my error are happening here:</p>\n\n<p>`app/controllers/products_controller.rb:4:in 'index'</p>\n\n<p>which is this code block</p>\n\n<pre><code>respond_to do |format|\n  format.html\n  format.csv { send_data @products.to_csv }\n  format.xls\nend\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "devise", "omniauth"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1493227594, "post_id": 43640703, "comment_id": 74329915, "body": "Have you tried to debug params in the <code>yandex</code> action of <code>CallbackController</code>? something like <code>puts params</code> ? I&#39;m pretty sure the access_token returned in the <code>params</code> not in the <code>auth</code> hash."}, {"owner": {"reputation": 851, "user_id": 1460362, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7684f2f794624fcdce2f9406e6234bf3?s=128&d=identicon&r=PG", "display_name": "Edgars", "link": "https://stackoverflow.com/users/1460362/edgars"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1493227875, "post_id": 43640703, "comment_id": 74330089, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 , Yes, I tried. I am only getting  &#39;state&#39; and &#39;code&#39; params."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493794449, "post_id": 43640703, "comment_id": 74547842, "body": "please share what you get by <code>p response.headers.fetch(&#39;Access-Token&#39;)</code> or <code>p response.headers.fetch(&#39;access_token&#39;)</code> or just <code>p response.headers</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4831, "user_id": 3144928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e2a01c799169f3de4c57c0f0366840f?s=128&d=identicon&r=PG", "display_name": "Ben Aubin", "link": "https://stackoverflow.com/users/3144928/ben-aubin"}, "is_accepted": true, "score": 2, "last_activity_date": 1493590840, "creation_date": 1493590840, "answer_id": 43711935, "question_id": 43640703, "link": "https://stackoverflow.com/questions/43640703/cant-retrieve-access-token-refresh-token-from-omniauth-authentication-strategy/43711935#43711935", "title": "Can&#39;t retrieve access_token, refresh_token from Omniauth authentication strategy with Devise, Rails 4", "body": "<p>The access token is provided by the yandex gem, or to be more specific, the <a href=\"https://github.com/intridea/omniauth-oauth2/blob/master/lib/omniauth/strategies/oauth2.rb\" rel=\"nofollow noreferrer\"><code>omniauth-oauth2</code></a> gem.</p>\n\n<p>Just get inside your controller by doing: <code>request.env[\"omniauth.auth\"].credentials.token</code></p>\n\n<p>Boom. That's your access token. (refresh token and expiry data is also in the <code>credentials</code> hash, just print it out)</p>\n"}], "owner": {"reputation": 851, "user_id": 1460362, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7684f2f794624fcdce2f9406e6234bf3?s=128&d=identicon&r=PG", "display_name": "Edgars", "link": "https://stackoverflow.com/users/1460362/edgars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "accepted_answer_id": 43711935, "answer_count": 1, "score": 1, "last_activity_date": 1493590840, "creation_date": 1493227140, "last_edit_date": 1493380879, "question_id": 43640703, "link": "https://stackoverflow.com/questions/43640703/cant-retrieve-access-token-refresh-token-from-omniauth-authentication-strategy", "title": "Can&#39;t retrieve access_token, refresh_token from Omniauth authentication strategy with Devise, Rails 4", "body": "<p>I am using such gems:</p>\n\n<pre><code>gem \"omniauth-yandex\"\ngem 'devise'\n</code></pre>\n\n<p>My setup.</p>\n\n<p><strong>Routes</strong>:</p>\n\n<pre><code> devise_for :users, :controllers =&gt; { :omniauth_callbacks =&gt; \"callbacks\" }\n</code></pre>\n\n<p><strong>Devise initializer</strong>:</p>\n\n<pre><code>config.omniauth :yandex, Rails.application.secrets.client_id , Rails.application.secrets.password, callback_url: \"http://cb2bcdc4.ngrok.io/users/auth/yandex/callback\"\n</code></pre>\n\n<p><strong>User model</strong>:</p>\n\n<pre><code>devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable, :omniauthable, :omniauth_providers =&gt; [:yandex]\n\n\n   def self.from_omniauth(auth) \n\n      where(provider: auth.provider, uid: auth.uid).first_or_create do |user|\n        user.provider = auth.provider\n        user.uid = auth.uid\n        user.email =  auth.info.email\n        user.password = Devise.friendly_token[0,20]\n      end\n\n  end\n</code></pre>\n\n<p><strong>CallbackController</strong>:</p>\n\n<pre><code>class CallbacksController &lt; Devise::OmniauthCallbacksController        \n\n    def yandex\n       #empty\n    end\nend\n</code></pre>\n\n<p><strong>View:</strong></p>\n\n<pre><code>  &lt;%= link_to \"Sign in with Yandex\", user_yandex_omniauth_authorize_path, id: \"sign_in\" %&gt;\n</code></pre>\n\n<p>When I click \"Sign in with Yandex\" my application prompts for user permission and then redirects back to my application. User is created in my database with such fields-- e-mail,provider, uid. But I would like to have also access_token, refresh_token and expires_at because I am using few Yandex API's.</p>\n\n<p>When I httlog'ed above action (From clicking \"Sign in ..\" to the redirect back to my application) I received these results:</p>\n\n<pre><code>D, [2017-04-26T19:17:42.091838 #24865] DEBUG -- : [0;30;101m[httplog] Connecting: oauth.yandex.ru:443[0m\nD, [2017-04-26T19:17:42.266645 #24865] DEBUG -- : [0;30;101m[httplog] Sending: POST http://oauth.yandex.ru:443/token[0m\nD, [2017-04-26T19:17:42.267040 #24865] DEBUG -- : [0;30;101m[httplog] Data: client_id=097253682f9f41289ec5exxxxxxx&amp;client_secret=xxxxxxdb4fxx0eadcbb8a4143&amp;code=xxxxx327&amp;grant_type=authorization_code&amp;redirect_uri=http%3A%2F%2Fcb2bcdc4.ngrok.io%2Fusers%2Fauth%2Fyandex%2Fcallback%3Fstate%xxxxxxxxxxx%26code%xxxx[0m\nD, [2017-04-26T19:17:42.410712 #24865] DEBUG -- : [0;30;101m[httplog] Status: 200[0m\nD, [2017-04-26T19:17:42.410945 #24865] DEBUG -- : [0;30;101m[httplog] Benchmark: 0.143445 seconds[0m\nD, [2017-04-26T19:17:42.411168 #24865] DEBUG -- : [0;30;101m[httplog] Response:\n{\"token_type\": \"bearer\", \"access_token\": \"xxxxxxxxuyBwtcyAFjkBZo3F3MCiIaTI\", \"expires_in\": 31528753, \"refresh_token\": \"xxxxxxxxxxxClSH:Pts0u-Mfls-vdEc7-zTOod9ZWzegNFRxxxxxxxxxxxxxKHpwsqBFUHHKtg\"}[0m\nD, [2017-04-26T19:17:42.414748 #24865] DEBUG -- : [0;30;101m[httplog] Connecting: login.yandex.ru:443[0m\nD, [2017-04-26T19:17:42.609376 #24865] DEBUG -- : [0;30;101m[httplog] Sending: GET http://login.yandex.ru:443/info?format=json[0m\nD, [2017-04-26T19:17:42.609720 #24865] DEBUG -- : [0;30;101m[httplog] Data: [0m\nD, [2017-04-26T19:17:42.675702 #24865] DEBUG -- : [0;30;101m[httplog] Status: 200[0m\nD, [2017-04-26T19:17:42.675972 #24865] DEBUG -- : [0;30;101m[httplog] Benchmark: 0.065791 seconds[0m\nD, [2017-04-26T19:17:42.676211 #24865] DEBUG -- : [0;30;101m[httplog] Response:\n{\"first_name\": \"xxxxxxxxxxx9\", \"last_name\": \"xxxxxxxxxxxxxxx\", \"display_name\": \"xxxxx\", \"emails\": [\"xxxxxx@yandex.ru\"], \"default_email\": \"xxxxx@yandex.ru\", \"real_name\": \"xxxxxx2\", \"login\": \"xxxxxxx\", \"sex\": \"male\", \"id\": \"xxxx123\"}[0m\n</code></pre>\n\n<p><strong>Question</strong>: How can I save access_token, refresh token from Omniauth authentication process to user as it is clearly visible (7th line ) that it does retrieve it using my client_id and secret without any of my code.</p>\n\n<p>Thanks.</p>\n\n<p><strong>What I have tried:</strong></p>\n\n<p>Added <code>user.access_token = auth.credentials.token</code> to <code>self.from_omniauth(auth)</code> method in user model. But there wasn't any positive change.</p>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>The same problem exists on different platforms. For example, on shared hosting and in Linux Ubuntu (completely fresh project from scratch).</p>\n"}, {"tags": ["ruby", "rubygems", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 5094207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42306f44ad4e793881a3aed8c9e21803?s=128&d=identicon&r=PG", "display_name": "TekkSparrow", "link": "https://stackoverflow.com/users/5094207/tekksparrow"}, "edited": false, "score": 0, "creation_date": 1493250565, "post_id": 43641112, "comment_id": 74341025, "body": "I see the <code>Gemfile</code> in each of the themes project directory. When I read the file it looks like a set of installation instructions? Am I heading the right direction with this? Thanks for pointing me in the right direction. After issuing the <code>bundle install</code> command, 6 <code>Gemfile</code> dependencies and 22 gems are now installed. After running <code>jekyll serve</code> the system still complained about the addressable version not matching what was in the <code>Gemfile</code>, is this something to be bothered with? Ultimately the error suggested using <code>bundle exec jekyll serve</code> which worked fine."}, {"owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "reply_to_user": {"reputation": 337, "user_id": 5094207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42306f44ad4e793881a3aed8c9e21803?s=128&d=identicon&r=PG", "display_name": "TekkSparrow", "link": "https://stackoverflow.com/users/5094207/tekksparrow"}, "edited": false, "score": 0, "creation_date": 1493258518, "post_id": 43641112, "comment_id": 74343046, "body": "A <code>Gemfile</code> is a list of Ruby gems required by your App (or theme in this case.) Prepending <code>bundle exec</code> to your jekyll commands will tell it to use only those versions listed rather than getting confused with another version that may have been installed in your system."}, {"owner": {"reputation": 337, "user_id": 5094207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42306f44ad4e793881a3aed8c9e21803?s=128&d=identicon&r=PG", "display_name": "TekkSparrow", "link": "https://stackoverflow.com/users/5094207/tekksparrow"}, "edited": false, "score": 0, "creation_date": 1493352208, "post_id": 43641112, "comment_id": 74389794, "body": "Now that you&#39;ve explained that and I take another look at the <code>GemFile</code> it makes a lot of sense. Thanks."}], "tags": [], "owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "is_accepted": true, "score": 3, "last_activity_date": 1493228539, "creation_date": 1493228539, "answer_id": 43641112, "question_id": 43640611, "link": "https://stackoverflow.com/questions/43640611/trouble-getting-jekyll-themes-served-on-local-machine-could-not-find-addressabl/43641112#43641112", "title": "Trouble getting Jekyll Themes served on local machine (could not find addressable...)", "body": "<p>you don't have <code>addressable</code> gem installed.\nRun <code>gem install jekyll</code> once again to make sure all required dependencies get installed.</p>\n\n<p>Or if you have a <code>Gemfile</code>, run <code>bundle install</code></p>\n"}], "owner": {"reputation": 337, "user_id": 5094207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42306f44ad4e793881a3aed8c9e21803?s=128&d=identicon&r=PG", "display_name": "TekkSparrow", "link": "https://stackoverflow.com/users/5094207/tekksparrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 0, "accepted_answer_id": 43641112, "answer_count": 1, "score": 0, "last_activity_date": 1493228539, "creation_date": 1493226804, "question_id": 43640611, "link": "https://stackoverflow.com/questions/43640611/trouble-getting-jekyll-themes-served-on-local-machine-could-not-find-addressabl", "title": "Trouble getting Jekyll Themes served on local machine (could not find addressable...)", "body": "<p>Been playing around with Jekyll for a few days now, but haven't been having any lucky trying to get themes working on my local machine.</p>\n\n<p>I've tried several different themes and am getting errors that seem to be pointing towards missing files??? I'm not entirely sure as I'm completely new to Ruby.</p>\n\n<h2>What I've got installed</h2>\n\n<ul>\n<li>ruby 2.3.3p222 (2016-11-21 revision 56859) [x64-mingw32]</li>\n<li>jekyll 3.4.3</li>\n</ul>\n\n<h2>What commands I'm running</h2>\n\n<pre><code>~ $ cd ~/jekyll-theme/\n~ $ jekyll serve\n</code></pre>\n\n<h2>Error and Trace</h2>\n\n<blockquote>\n  <p>C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.14.6/lib/bundler/spec_set.rb:87:in `block in materialize': Could not find addressable-2.4.0 in any of the sources (Bundler::GemNotFound)</p>\n</blockquote>\n\n<pre><code>    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.14.6/lib/bundler/spec_set.rb:80:in `map!'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.14.6/lib/bundler/spec_set.rb:80:in `materialize'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.14.6/lib/bundler/definition.rb:176:in `specs'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.14.6/lib/bundler/definition.rb:235:in `specs_for'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.14.6/lib/bundler/definition.rb:224:in `requested_specs'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.14.6/lib/bundler/runtime.rb:118:in `block in definition_method'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.14.6/lib/bundler/runtime.rb:19:in `setup'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.14.6/lib/bundler.rb:100:in `setup'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/jekyll-3.4.3/lib/jekyll/plugin_manager.rb:36:in `require_from_bundler'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/jekyll-3.4.3/exe/jekyll:9:in `&lt;top (required)&gt;'\n    from C:/Ruby23-x64/bin/jekyll:22:in `load'\n    from C:/Ruby23-x64/bin/jekyll:22:in `&lt;main&gt;'\n</code></pre>\n\n<h2>Attemps</h2>\n\n<p>I've tried issuing the following command:<br>\n<code>~ $ bundle exec jekyll serve</code>\nresulting in the same error and trace<br></p>\n\n<p>Any insight is greatly appreciated.</p>\n"}, {"tags": ["arrays", "ruby", "merge", "ip"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1493232398, "post_id": 43640591, "comment_id": 74332722, "body": "Technically that should be <code>subnets = [ [&quot;149...&quot;], [ ... ], ... ]</code> where there&#39;s surrounding outer square brackets. What you have there works but it&#39;s misleading. You&#39;re actually creating an array of arrays. <code>flatten</code> could help iterate over all of the individual elements."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 7499654, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b543fbb3d42c84f706b5ef1312a42ae9?s=128&d=identicon&r=PG&f=1", "display_name": "mf370", "link": "https://stackoverflow.com/users/7499654/mf370"}, "edited": false, "score": 0, "creation_date": 1493282243, "post_id": 43640879, "comment_id": 74352777, "body": "Thank you @DiegoSalazar, yes <code>subnet</code> was a typo. I get the subnets from YAML files and some YAMLs have more than one subnet, that&#39;s why the last array had two subnets, instead of one, like the other two. But I&#39;ll try to separate them, in order to reach the desired output! Thank you!"}], "tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": true, "score": 1, "last_activity_date": 1493227732, "creation_date": 1493227732, "answer_id": 43640879, "question_id": 43640591, "link": "https://stackoverflow.com/questions/43640591/how-to-merge-ip-addresses-and-ignore-wrong-ip-addresses-ruby/43640879#43640879", "title": "How to merge IP addresses and ignore wrong IP addresses Ruby", "body": "<p>Your code has multiple errors. </p>\n\n<ul>\n<li>You have an inconsistency in your initialization of the <code>subnets</code> array. The last value has two subnets in the same sub array: <code>[\"159.226.92.0/24\",\"159.8.57/22\"]</code> is the array causing the error you see and hence it is throwing both values away, which is why you don't see <code>159.226.92.0/24</code> in the final result.</li>\n<li>You are iterating over <code>subnet</code> which is a typo, I believe you meant <code>subnets</code>.</li>\n<li>You are overwriting <code>merged_subnets</code> on each iteration.</li>\n</ul>\n\n<p>I fixed the code:</p>\n\n<pre><code>subnets = [\"149.62.168.0/24\"], [\"134.247.2.0/24\"], [\"159.226.92.0/24\"], [\"159.8.57/22\"]\n\nrequire 'netaddr'\n\nmerged_subnets = []\n\nsubnets.each do |net|\n  begin\n    merged_subnets &lt;&lt; NetAddr.merge(net)\n  rescue ArgumentError =&gt; error\n    puts error\n  end\nend\n</code></pre>\n\n<p><code>merged_subnets</code> is now <code>[[\"149.62.168.0/24\"], [\"134.247.2.0/24\"], [\"159.226.92.0/24\"]]</code></p>\n"}, {"tags": [], "owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "is_accepted": false, "score": 1, "last_activity_date": 1493227797, "creation_date": 1493227797, "answer_id": 43640897, "question_id": 43640591, "link": "https://stackoverflow.com/questions/43640591/how-to-merge-ip-addresses-and-ignore-wrong-ip-addresses-ruby/43640897#43640897", "title": "How to merge IP addresses and ignore wrong IP addresses Ruby", "body": "<p><code>159.226.92.0/24</code> doesn't appear in the output because of your call to <code>NetAddr#merge</code>.</p>\n\n<p><code>NetAddr#merge</code> takes your array (in this case, <code>[\"159.226.92.0/24\",\"159.8.57/22\"]</code>), parses each address in the array, and merges the parsed addresses. In pseudo-Ruby, that'd be this:</p>\n\n<pre><code>def merge(ary)\n    parsed = []\n    for addr in ary do\n        parsed &lt;&lt; parse(addr)\n    end\n\n    merge_parsed(parsed)\nend\n</code></pre>\n\n<p>As you can see, if the call to <code>parse(addr)</code> fails, the entire method will fail and raise an error, returning no results. Since <code>159.226.92.0/24</code> is in a subnet array with the invalid address <code>159.8.57/22</code>, the <code>merge</code> call on the whole array fails, and you don't get any results.</p>\n"}], "owner": {"reputation": 171, "user_id": 7499654, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b543fbb3d42c84f706b5ef1312a42ae9?s=128&d=identicon&r=PG&f=1", "display_name": "mf370", "link": "https://stackoverflow.com/users/7499654/mf370"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 43640879, "answer_count": 2, "score": -1, "last_activity_date": 1493227797, "creation_date": 1493226737, "question_id": 43640591, "link": "https://stackoverflow.com/questions/43640591/how-to-merge-ip-addresses-and-ignore-wrong-ip-addresses-ruby", "title": "How to merge IP addresses and ignore wrong IP addresses Ruby", "body": "<p>I have an array of arrays containing subnets, one of the subnets is wrong (is missing one octet) and I would like to merge them and ignore the wrong one.</p>\n\n<p>I have the following code:</p>\n\n<pre><code>subnets = [\"149.62.168.0/24\"], [\"134.247.2.0/24\"], [\"159.226.92.0/24\",\"159.8.57/22\"]\n\nrequire 'netaddr'\n\nsubnet.each do |net|\n  begin\n  merged_subnets = NetAddr.merge(net)\n  rescue ArgumentError =&gt; error\n    puts error\n  end\n  puts merged_subnets\nend \n</code></pre>\n\n<p>This code gives me the following output:</p>\n\n<pre><code>149.62.168.0/24\n134.247.2.0/24\nOne of the provided CIDR addresses raised the following errors: 159.8.57 is invalid (IPv4 requires (4) octets).\n</code></pre>\n\n<p>However, what I was expecting was:</p>\n\n<pre><code> 149.62.168.0/24\n 134.247.2.0/24\n 159.226.92.0/24\n One of the provided CIDR addresses raised the following errors: 159.8.57 is invalid (IPv4 requires (4) octets).\n</code></pre>\n\n<p>I don't understand why the subnet <strong>159.226.92.0/24</strong> doesn't appear in the output.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "sequel"], "answers": [{"tags": [], "owner": {"reputation": 449, "user_id": 5397051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/68b724016d680eb143dd20e9da217b04?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Gouy", "link": "https://stackoverflow.com/users/5397051/nathan-gouy"}, "is_accepted": true, "score": 3, "last_activity_date": 1494895482, "last_edit_date": 1494895482, "creation_date": 1493226179, "answer_id": 43640419, "question_id": 43640337, "link": "https://stackoverflow.com/questions/43640337/how-to-chain-joins-in-sequel-as-in-activerecord/43640419#43640419", "title": "How to chain joins in Sequel as in ActiveRecord", "body": "<p>By default in Sequel's <code>join</code>, the implicit qualifier is the last joined table.</p>\n\n<p>So, </p>\n\n<pre><code>MyModel.join(:as, id: :a_id).join(:bs, id: :b_id)\n</code></pre>\n\n<p>equals:</p>\n\n<pre><code>MyModel.join(:as, id: :a_id).join(:bs, id: Sequel[:as][:b_id])\n</code></pre>\n\n<p>Use an explicit qualifier:</p>\n\n<pre><code>MyModel.join(:as, id: :a_id).join(:bs, id: Sequel[:my_models][:b_id])\n</code></pre>\n\n<p>This is from the official Sequel IRC chat with @jeremyevans.</p>\n"}], "owner": {"reputation": 449, "user_id": 5397051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/68b724016d680eb143dd20e9da217b04?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Gouy", "link": "https://stackoverflow.com/users/5397051/nathan-gouy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 43640419, "answer_count": 1, "score": 2, "last_activity_date": 1494895482, "creation_date": 1493225938, "last_edit_date": 1494895376, "question_id": 43640337, "link": "https://stackoverflow.com/questions/43640337/how-to-chain-joins-in-sequel-as-in-activerecord", "title": "How to chain joins in Sequel as in ActiveRecord", "body": "<p>I have a model \"MyModel\" with the following relationships:</p>\n\n<pre><code>Class MyModel\n\n    #if MyModel &lt; ActiveRecord::Base\n    has_one a\n    has_one b\n\n    #if MyModel &lt; Sequel::Model\n    many_to_one a\n    many_to_one b\n\nend\n</code></pre>\n\n<p>With ActiveRecord:</p>\n\n<pre><code>MyModel.joins(:a, :b)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>MyModel.joins(:a).joins(:b)\n</code></pre>\n\n<p>gives the following SQL:</p>\n\n<pre><code>SELECT * FROM my_models INNER JOIN bs ON bs.id = my_models.b_id INNER JOIN as ON a.id = my_models.a_id\n</code></pre>\n\n<p>But with Sequel:</p>\n\n<pre><code>MyModel.join(:as, id: :a_id).join(:bs, id: :b_id)\n</code></pre>\n\n<p>gives the following SQL:</p>\n\n<pre><code>SELECT * FROM my_models INNER JOIN bs ON bs.id = my_models.b_id INNER JOIN as ON a.id = bs.a_id\n</code></pre>\n\n<p>Why does <code>join</code> use the last joined table's name?  How do I get the same SQL generated by ActiveRecord in Sequel?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 507, "user_id": 6484367, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8e9d26d6946fc918749adbefd5dd751c?s=128&d=identicon&r=PG&f=1", "display_name": "dsomel21", "link": "https://stackoverflow.com/users/6484367/dsomel21"}, "edited": false, "score": 0, "creation_date": 1493226332, "post_id": 43640136, "comment_id": 74329134, "body": "Okay, that fixed it. Ultimately, if you were to do this, would you approach the problem the same way I did, or would you use something like <code>helper_method</code>&#39;s instead?"}, {"owner": {"reputation": 3724, "user_id": 2409515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a33T6.jpg?s=128&g=1", "display_name": "Rokibul Hasan", "link": "https://stackoverflow.com/users/2409515/rokibul-hasan"}, "reply_to_user": {"reputation": 507, "user_id": 6484367, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8e9d26d6946fc918749adbefd5dd751c?s=128&d=identicon&r=PG&f=1", "display_name": "dsomel21", "link": "https://stackoverflow.com/users/6484367/dsomel21"}, "edited": false, "score": 0, "creation_date": 1493226479, "post_id": 43640136, "comment_id": 74329245, "body": "I would not use helper method, because helper method is something you use very frequently both views and  controller. I would use before filer. You can make this answer correct if really helps you :)"}], "tags": [], "owner": {"reputation": 3724, "user_id": 2409515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a33T6.jpg?s=128&g=1", "display_name": "Rokibul Hasan", "link": "https://stackoverflow.com/users/2409515/rokibul-hasan"}, "is_accepted": true, "score": 2, "last_activity_date": 1493226658, "last_edit_date": 1493226658, "creation_date": 1493225250, "answer_id": 43640136, "question_id": 43639927, "link": "https://stackoverflow.com/questions/43639927/not-sure-if-i-am-using-before-filter-before-action-correctly-in-rails/43640136#43640136", "title": "Not sure if I am using before_filter/before_action correctly in Rails", "body": "<p>You can call <code>before_filter</code> only for some specific controller <code>action</code> like following </p>\n\n<pre><code>before_filter :user_has_food, only: [:display_user_food]\n</code></pre>\n\n<p>In <code>rails 5.0</code> <code>before_filter</code> is deprecated and you should use <code>before_action</code>. And if you have only one action to filtered, you can avoid using array, see the bellow snippet </p>\n\n<pre><code>before_filter :user_has_food, only: :display_user_food\n</code></pre>\n\n<p>When you use <code>only</code> option in <code>before_filter</code> it will ignored calling while request comes for other action.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 5126205, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--JknDrIGJhg/AAAAAAAAAAI/AAAAAAAAAC8/11ouI7tmT9E/photo.jpg?sz=128", "display_name": "Bittu Choudhary", "link": "https://stackoverflow.com/users/5126205/bittu-choudhary"}, "is_accepted": false, "score": 1, "last_activity_date": 1493226459, "creation_date": 1493226459, "answer_id": 43640508, "question_id": 43639927, "link": "https://stackoverflow.com/questions/43639927/not-sure-if-i-am-using-before-filter-before-action-correctly-in-rails/43640508#43640508", "title": "Not sure if I am using before_filter/before_action correctly in Rails", "body": "<p>Helper method is accessible in any view and controller but action methods are bound to object of that particular class. So something like <code>current_user</code> that doesn't need any object should be a helper method. \nRokibul correctly pointed out about using <code>only: []</code> syntax to avoid other controller action.\nBut note that all before_filters syntax are deprecated in Rails 5.0 and will be removed in Rails 5.1, Use <code>before_action</code> instead.</p>\n"}], "owner": {"reputation": 507, "user_id": 6484367, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8e9d26d6946fc918749adbefd5dd751c?s=128&d=identicon&r=PG&f=1", "display_name": "dsomel21", "link": "https://stackoverflow.com/users/6484367/dsomel21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1172, "favorite_count": 0, "accepted_answer_id": 43640136, "answer_count": 2, "score": 0, "last_activity_date": 1493226658, "creation_date": 1493224545, "question_id": 43639927, "link": "https://stackoverflow.com/questions/43639927/not-sure-if-i-am-using-before-filter-before-action-correctly-in-rails", "title": "Not sure if I am using before_filter/before_action correctly in Rails", "body": "<p>I haven't used Rails in some time now, but I am aware Rails comes with things like </p>\n\n<p><strong>application_controller.rb</strong> </p>\n\n<pre><code>before_filter :login_with_access_token\n\nhelper_method :current_user\n</code></pre>\n\n<p>From my understanding, <code>before_filter</code> will run the aftersaid method before EVERY action in thus controller. And considering this is the <strong>ApplicationController</strong> it will run it before every action, since everything inherits from the <strong>ApplicationController</strong>.  And I guess a <code>helper_method</code> is a method that we check often and can be accessed in our views.</p>\n\n<p>I guess the reason I am kinda confused is I don't fully see why we would need <code>helper_methods</code> other than the fact you would want you use them in the views. For example, if I just wanna check if a <code>person</code> model is an adult... what would persuade one from choosing a <code>helper_method</code> vs. <code>action method</code>? Ex.</p>\n\n<pre><code>def is_adult?\n  person.age &gt; 18\nend\n</code></pre>\n\n<p><strong>Now this is where I am getting confused in my specific problem</strong>. \nThere are certain pages that you can only view if you have a <code>Food</code> object selected. Meaning, my route:</p>\n\n<p><code>get '/user/:user_id/food/:food_id', to: 'units#display_user_food', as: 'display_user_food'</code></p>\n\n<p>I proceeded to add a <code>before_filter :user_has_food</code> </p>\n\n<pre><code>  def user_has_food\n    unless UserFood.where(id: params[\"user_id\"]).empty?\n      true\n    else\n      unit_id = params[\"unit_id\"]\n      false\n      puts \"------------ User does not have food :(\"\n      redirect_to \"/user/new-food/#{unit_id}\"\n    end\n  end\n</code></pre>\n\n<p>But... now the problem is... I have a very thick controller... there are many actions... and if it hits another action, it just fails, and will attempt to redirect me since <code>user_has_food</code> turns out false. Looking at this... it doesn't seem right. <em>What is the ideal and optimal solution to properly address this problem?</em></p>\n\n<p>I would like to do something with the <strong>/app/helpers</strong> folder, but I can't seem to find updated tutorials on how to go about using them. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting", "haml"], "comments": [{"owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1493228015, "post_id": 43639605, "comment_id": 74330168, "body": "What work have you done already to try to complete this?"}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1493228148, "post_id": 43639605, "comment_id": 74330242, "body": "That &#39;Edit Sparks` button should take you to the <code>edit</code> view which is implemented in <code>edit.html.erb</code> most likely. You can add a field to that view to support the new sort column."}, {"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "reply_to_user": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1493231591, "post_id": 43639605, "comment_id": 74332264, "body": "@DiegoSalazar Good thinking, in the <code>index</code> view I can display the sort number and let the user set the sort number in the <code>edit</code> view. I was trying to let the user manipulate the sort number directly into the index view but maybe that is not the best."}], "answers": [{"tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1493231985, "creation_date": 1493231985, "answer_id": 43642116, "question_id": 43639605, "link": "https://stackoverflow.com/questions/43639605/rails-set-sort-number-to-rearrange-table-items/43642116#43642116", "title": "Rails: Set sort number to rearrange table items", "body": "<p>You should implement drag and drop sorting on in the index view: <a href=\"http://josephndungu.com/tutorials/ajax-sortable-lists-rails-4\" rel=\"nofollow noreferrer\">http://josephndungu.com/tutorials/ajax-sortable-lists-rails-4</a></p>\n"}], "owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493231985, "creation_date": 1493223370, "last_edit_date": 1493224209, "question_id": 43639605, "link": "https://stackoverflow.com/questions/43639605/rails-set-sort-number-to-rearrange-table-items", "title": "Rails: Set sort number to rearrange table items", "body": "<p>I've got a table, consisting of individual table rows for each entry (spark session). Currently, spark sessions are indexed to order by <code>created_at</code> in a descending order. </p>\n\n<p><a href=\"https://i.stack.imgur.com/gk83J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gk83J.png\" alt=\"example photo\"></a></p>\n\n<p>I am trying to extend the ability to enter a sort number and order the spark sessions based on their sort number. </p>\n\n<p><em>i.e Setting the sort number on <code>Spark Session for iOS users (archived)</code> to <code>1</code> would move that spark session to the top of the list.</em></p>\n\n<p>I would need to make a migration to <code>add_sort_number_to_spark_sessions</code> as an integer, allow a user to input a sort number into the view from a <code>text_field</code>, save that order and reload the page to display the new sort.</p>\n\n<p>What functionality do I need to allow the sort number to be inputted in the view, saved to the database and reflected in the display order for the view?</p>\n\n<p><em>Index View</em></p>\n\n<pre><code>- @spark_sessions.each do |tbl|\n    %tr\n      %td.bold.nudge-text-link-black\n        = link_to tbl.name, edit_spark_session_path(tbl)\n      %td= link_to 'Edit Sparks', spark_session_sparks_path(tbl), :class =&gt; 'float-right nudge-secondary-button'\n</code></pre>\n\n<p><em>Controller</em></p>\n\n<pre><code>def index\n    @spark_sessions = @company.spark_sessions.where(is_archived: false).order('created_at desc')\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1493221435, "post_id": 43638820, "comment_id": 74326047, "body": "I think you should post an example."}, {"owner": {"reputation": 27561, "user_id": 214446, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5deb6b87326686b1f2e9fdb37ceac210?s=128&d=identicon&r=PG", "display_name": "mb21", "link": "https://stackoverflow.com/users/214446/mb21"}, "edited": false, "score": 2, "creation_date": 1493221450, "post_id": 43638820, "comment_id": 74326053, "body": "code reuse means instead of writing the same code twice, write it once and reuse it in more than one place in your app/website. So no, you don&#39;t need to use concerns etc. if your code is small and used only in one place anyway."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1493222149, "post_id": 43638820, "comment_id": 74326542, "body": "You don&#39;t need to create a concern for a hash used in one place. If this hash is dynamic - create a method for it, otherwise put it into a constant."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1493234486, "post_id": 43638820, "comment_id": 74333959, "body": "similar to a module, although a concern could be used for code reuse, even if it&#39;s only used in one place it can be useful for splitting up a large model into multiple files."}], "owner": {"reputation": 55, "user_id": 7062008, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8acb00bd1a8aca08a88885857f4371cc?s=128&d=identicon&r=PG&f=1", "display_name": "user938438932", "link": "https://stackoverflow.com/users/7062008/user938438932"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493221395, "creation_date": 1493221306, "last_edit_date": 1493221395, "question_id": 43638820, "link": "https://stackoverflow.com/questions/43638820/rails-do-we-create-concern-for-code-reuse-only", "title": "Rails: Do we create concern for code reuse only", "body": "<p>I am new to rails so please bear with me. I went through a bunch of articles online and they say I can use concern for code reuse purpose.</p>\n\n<p>I am working on something where I am creating a hash which will only be used by my service.</p>\n\n<p>So wondering code reuse means if the code in concern will be used by other methods or services etc? If no then do I need to create concern for hash?</p>\n"}, {"tags": ["ruby", "git", "dependencies", "bundler", "gem-bundler"], "answers": [{"comments": [{"owner": {"reputation": 4833, "user_id": 1328513, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7ae23c0631c6d70fb8e8cb51854a0ff4?s=128&d=identicon&r=PG", "display_name": "Zhenya", "link": "https://stackoverflow.com/users/1328513/zhenya"}, "edited": false, "score": 0, "creation_date": 1493237309, "post_id": 43639816, "comment_id": 74335554, "body": "Yes, but how do I make different branches of my project depend on different branches of my gem based on the environment or based on current project&#39;s branch? I.e., on production environment I want my project to use a master branch of the database_model gem, on test, staging, development I want develop branch to be used. I can&#39;t use local path on test, staging, because I don&#39;t want to deploy my gem to the servers"}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "reply_to_user": {"reputation": 4833, "user_id": 1328513, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7ae23c0631c6d70fb8e8cb51854a0ff4?s=128&d=identicon&r=PG", "display_name": "Zhenya", "link": "https://stackoverflow.com/users/1328513/zhenya"}, "edited": false, "score": 0, "creation_date": 1493247863, "post_id": 43639816, "comment_id": 74340258, "body": "You should be able to use Gemfile groups for that, I updated my answer. (I put staging and production using master as you&#39;d generally want staging to be on the same version as production.) If your :test is running on a server, it will still &quot;just work&quot;. The bundle local is an optional extra to prevent fetching it from github, but the spec in the Gemfile will work in its absence."}, {"owner": {"reputation": 4833, "user_id": 1328513, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7ae23c0631c6d70fb8e8cb51854a0ff4?s=128&d=identicon&r=PG", "display_name": "Zhenya", "link": "https://stackoverflow.com/users/1328513/zhenya"}, "edited": false, "score": 0, "creation_date": 1493708691, "post_id": 43639816, "comment_id": 74507006, "body": "Using Gemfile groups my first idea too. However, it doesn&#39;t seem to be possible. I get an error saying that I have duplicate versions of the same gem in my gemfile, or something like that."}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "reply_to_user": {"reputation": 4833, "user_id": 1328513, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7ae23c0631c6d70fb8e8cb51854a0ff4?s=128&d=identicon&r=PG", "display_name": "Zhenya", "link": "https://stackoverflow.com/users/1328513/zhenya"}, "edited": false, "score": 0, "creation_date": 1493823543, "post_id": 43639816, "comment_id": 74568506, "body": "Strange, I use them extensively for dev/test/etc. You can try the inline syntax in case it solves it <code>gem &#39;spree&#39;, github: &#39;spree&#47;spree&#39;, branch: &#39;master&#39;, group: [:staging, :production]</code>"}, {"owner": {"reputation": 4833, "user_id": 1328513, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7ae23c0631c6d70fb8e8cb51854a0ff4?s=128&d=identicon&r=PG", "display_name": "Zhenya", "link": "https://stackoverflow.com/users/1328513/zhenya"}, "edited": false, "score": 0, "creation_date": 1493878253, "post_id": 43639816, "comment_id": 74590988, "body": "[!] There was an error parsing <code>Gemfile</code>: You cannot specify the same gem twice coming from different sources. You specified that db-models (&gt;= 0) should come from git@github.com:Comp/db-models.git (at master) and git@github.com:Comp/db-models.git (at develop) . Bundler cannot continue.  #  from /project/Gemfile:11  #  -------------------------------------------  #  gem &quot;db-models&quot;, :git =&gt; &quot;git@github.com:Comp/db-models.git&quot;, :branch =&gt; &quot;master&quot;, group: [:production]  &gt;  gem &quot;db-models&quot;, :git =&gt; &quot;git@github.com:Comp/db-models.git&quot;, :branch =&gt; &quot;develop&quot;, group: [:development, :staging]"}, {"owner": {"reputation": 4833, "user_id": 1328513, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7ae23c0631c6d70fb8e8cb51854a0ff4?s=128&d=identicon&r=PG", "display_name": "Zhenya", "link": "https://stackoverflow.com/users/1328513/zhenya"}, "edited": false, "score": 0, "creation_date": 1493878272, "post_id": 43639816, "comment_id": 74591000, "body": "You can see above the error that I get when using inline syntax. Here&#39;s the discussion about the possibility of adding this feature: <a href=\"https://github.com/bundler/bundler/issues/751\" rel=\"nofollow noreferrer\">github.com/bundler/bundler/issues/751</a>"}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "reply_to_user": {"reputation": 4833, "user_id": 1328513, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7ae23c0631c6d70fb8e8cb51854a0ff4?s=128&d=identicon&r=PG", "display_name": "Zhenya", "link": "https://stackoverflow.com/users/1328513/zhenya"}, "edited": false, "score": 0, "creation_date": 1493887587, "post_id": 43639816, "comment_id": 74596629, "body": "Wow, that&#39;s a surprising restriction. I guess the easiest workaround is just to make your own copy of the project in a completely different repo. You could still setup the original project as a remote and keep one branch in sync."}], "tags": [], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "is_accepted": false, "score": 1, "last_activity_date": 1493247937, "last_edit_date": 1493247937, "creation_date": 1493224197, "answer_id": 43639816, "question_id": 43638726, "link": "https://stackoverflow.com/questions/43638726/how-to-manage-dependencies-between-my-ruby-projects/43639816#43639816", "title": "How to manage dependencies between my ruby projects?", "body": "<p>Usually you'd use <a href=\"http://ryanbigg.com/2013/08/bundler-local-paths\" rel=\"nofollow noreferrer\">Bundler with a local path</a>. Your Gemfile points to the Git or Github repo using <code>git</code> or <code>github</code>:</p>\n\n<pre><code>gem 'spree', github: 'spree/spree', branch: 'master'\n</code></pre>\n\n<p>Note that includes the branch. You can make each of your projects use a different branch of your gem if you want to. You can make each of your projects use a different branch of your gem if you want to. You can also use groups to deploy different versions of your gem depending on the environment:</p>\n\n<pre><code>group :development, :test\n  gem 'spree', github: 'spree/spree', branch: 'bleedinedge'\nend\n\ngroup :staging, :production\n  gem 'spree', github: 'spree/spree', branch: 'master'\nend\n</code></pre>\n\n<p>The above will work fine as long as you keep pushing to the Github. But thanks to local config, you can run the following on your command line:</p>\n\n<pre><code>bundle config local.database_modules ~/Projects/gems/spree\n</code></pre>\n\n<p>That will add a line to your <code>~/.bundle/config</code>, so when you run <code>bundle</code> in your projects, it will pull it from your local repo.</p>\n"}, {"comments": [{"owner": {"reputation": 4833, "user_id": 1328513, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7ae23c0631c6d70fb8e8cb51854a0ff4?s=128&d=identicon&r=PG", "display_name": "Zhenya", "link": "https://stackoverflow.com/users/1328513/zhenya"}, "edited": false, "score": 0, "creation_date": 1493708914, "post_id": 43646629, "comment_id": 74507106, "body": "Thank you! I guess I will either use this solution, or simply change the gem&#39;s branch from &quot;develop&quot; to &quot;master&quot; when releasing the project"}], "tags": [], "owner": {"reputation": 1462, "user_id": 1230053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bc0f56c16d50540f99313692762924e?s=128&d=identicon&r=PG", "display_name": "Ken Stipek", "link": "https://stackoverflow.com/users/1230053/ken-stipek"}, "is_accepted": false, "score": 1, "last_activity_date": 1493252489, "creation_date": 1493252489, "answer_id": 43646629, "question_id": 43638726, "link": "https://stackoverflow.com/questions/43638726/how-to-manage-dependencies-between-my-ruby-projects/43646629#43646629", "title": "How to manage dependencies between my ruby projects?", "body": "<blockquote>\n  <p>User different versions of database_models gem (1.1, 1.2, 1.3...). I would probably need my own gem server for that, right?</p>\n</blockquote>\n\n<p>I would do this and simply have my Gemfile select the correct gem via a tag. Here is an example:\n<code>git 'https://github.com/rails/rails.git', tag: 'v5.0.0'</code></p>\n\n<p>So you can do the same while storing your custom gem on github (no gem server required).</p>\n\n<p><a href=\"https://git-scm.com/book/en/v2/Git-Basics-Tagging\" rel=\"nofollow noreferrer\">Here is how to use tags with Git</a>.</p>\n\n<p>This should give you the flexibility you need.</p>\n"}], "owner": {"reputation": 4833, "user_id": 1328513, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7ae23c0631c6d70fb8e8cb51854a0ff4?s=128&d=identicon&r=PG", "display_name": "Zhenya", "link": "https://stackoverflow.com/users/1328513/zhenya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1493252489, "creation_date": 1493221046, "question_id": 43638726, "link": "https://stackoverflow.com/questions/43638726/how-to-manage-dependencies-between-my-ruby-projects", "title": "How to manage dependencies between my ruby projects?", "body": "<p>This sounds like a basic question, but I can't find any answer to it on the Internet.</p>\n\n<p>So I have a git ruby project database_models. It's a gem. I want 3 other project to use it. I've added a dependency on this project to those 3 projects like this:</p>\n\n<pre><code>gem \"database_models\", :git =&gt; \"path\", :branch =&gt; master\n</code></pre>\n\n<p>Now, I want a a <code>develop</code> branch of those 3 projects to use the <code>develop</code> branch of database_models, and I want a <code>master</code> branch of those 3 projects to use the <code>master</code> branch of database_models, so that my production environment is stable and independent of my development environment.</p>\n\n<p>I can see 4 options of doing this, and I don't like any of them:</p>\n\n<ol>\n<li><p>Deploy database_models to the server, and update those 3 projects to reference database_models using a path, instead of git</p></li>\n<li><p>Git submodule</p></li>\n<li><p>User different versions of database_models gem (1.1, 1.2, 1.3...). I would probably need my own gem server for that, right?</p></li>\n<li><p>Write some code in a Gemfile that would choose the correct branch based on the environment where \"bundle install\" is run.</p></li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri"], "comments": [{"owner": {"reputation": 1545, "user_id": 1438190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af222bb723abc93783d6c33e95b15897?s=128&d=identicon&r=PG", "display_name": "Anezio Campos", "link": "https://stackoverflow.com/users/1438190/anezio-campos"}, "edited": false, "score": 1, "creation_date": 1493220673, "post_id": 43638391, "comment_id": 74325447, "body": "Try to <code>gem uninstall nokogiri</code> and install it again. It seems stupid but solved for me in the past"}, {"owner": {"reputation": 191, "user_id": 3956218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b4FrL.jpg?s=128&g=1", "display_name": "MarceloBoni", "link": "https://stackoverflow.com/users/3956218/marceloboni"}, "reply_to_user": {"reputation": 1545, "user_id": 1438190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af222bb723abc93783d6c33e95b15897?s=128&d=identicon&r=PG", "display_name": "Anezio Campos", "link": "https://stackoverflow.com/users/1438190/anezio-campos"}, "edited": false, "score": 0, "creation_date": 1493220767, "post_id": 43638391, "comment_id": 74325523, "body": "I was just trying to do this, I already answered if it worked"}, {"owner": {"reputation": 191, "user_id": 3956218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b4FrL.jpg?s=128&g=1", "display_name": "MarceloBoni", "link": "https://stackoverflow.com/users/3956218/marceloboni"}, "reply_to_user": {"reputation": 1545, "user_id": 1438190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af222bb723abc93783d6c33e95b15897?s=128&d=identicon&r=PG", "display_name": "Anezio Campos", "link": "https://stackoverflow.com/users/1438190/anezio-campos"}, "edited": false, "score": 0, "creation_date": 1493221252, "post_id": 43638391, "comment_id": 74325894, "body": "@AnezioCampos I posted more information than I tried"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1493222614, "post_id": 43638391, "comment_id": 74326865, "body": "<code>gem uninstall nokogiri &amp;&amp; gem install nokogiri &amp;&amp; rm -rf Gemfile.lock &amp;&amp; bundle</code> might help."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1493225372, "post_id": 43638391, "comment_id": 74328605, "body": "What&#39;s your output for <code>bundle install</code>?"}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 1, "creation_date": 1493228285, "post_id": 43638391, "comment_id": 74330311, "body": "<code>rm -rf Gemfile.lock</code> KILL IT WITH FIRE"}, {"owner": {"reputation": 191, "user_id": 3956218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b4FrL.jpg?s=128&g=1", "display_name": "MarceloBoni", "link": "https://stackoverflow.com/users/3956218/marceloboni"}, "edited": false, "score": 0, "creation_date": 1493245457, "post_id": 43638391, "comment_id": 74339435, "body": "I had upgraded the gems, I believe that they needed to bundle all of them in the project with bundle install, but somehow. <code>gem update</code> was not enough to update the nokogiri, so I had to uninstall and reinstall the gem,"}], "owner": {"reputation": 191, "user_id": 3956218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b4FrL.jpg?s=128&g=1", "display_name": "MarceloBoni", "link": "https://stackoverflow.com/users/3956218/marceloboni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493222759, "creation_date": 1493220271, "last_edit_date": 1493222759, "question_id": 43638391, "link": "https://stackoverflow.com/questions/43638391/how-to-avoid-error-in-deploy-with-ruby-on-rails", "title": "How to avoid Error in deploy with Ruby on Rails", "body": "<p>Whenever I try to deploy my system the following error occurs:</p>\n\n<pre><code>root@:/var/www/code# bundle exec rake assets:precompile db:migrate RAILS_ENV=production\nrake aborted!\nLoadError: incompatible library version - /var/www/code/vendor/bundle/ruby/2.3.0/gems/nokogiri-1.6.8/lib/nokogiri/nokogiri.so\n/var/www/code/vendor/bundle/ruby/2.3.0/gems/nokogiri-1.6.8/lib/nokogiri.rb:32:in `require'\n</code></pre>\n\n<p>I tried to make an update on all gems:</p>\n\n<pre><code>gem update\n</code></pre>\n\n<p>And I followed the \"<a href=\"https://github.com/sparklemotion/nokogiri/issues/1463#issuecomment-262280409\" rel=\"nofollow noreferrer\">Incompatible library version on Ubuntu 16.04</a>\" issue, but yet it doesn't work.</p>\n\n<p>Why does this happen?</p>\n\n<p>I circled the uninstallation and installation code at the root of the project:</p>\n\n<pre><code>root@:/var/www/code# gem uninstall nokogiri\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>root@:/var/www/code# gem install nokogiri\n</code></pre>\n\n<p>My <code>gem list</code> shows:</p>\n\n<pre><code>root@:/var/www/code# gem list\n- nokogiri (1.7.1)\n</code></pre>\n\n<p>But when I try to compile it appears again:</p>\n\n<pre><code>/code/vendor/bundle/ruby/2.3.0/gems/nokogiri-1.6.8/lib/nokogiri/nokogiri.so\n</code></pre>\n\n<p>Should I accomplish this within the <code>gems/</code> folder?</p>\n"}, {"tags": ["ruby", "websocket"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1493234559, "post_id": 43637904, "comment_id": 74333999, "body": "have you run <code>heroku run rake db:migrate</code>? Or checked the logs? <code>heroku logs --tail</code>."}, {"owner": {"reputation": 11, "user_id": 2918317, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000190300917/picture?type=large", "display_name": "reedleoneil", "link": "https://stackoverflow.com/users/2918317/reedleoneil"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1493260732, "post_id": 43637904, "comment_id": 74343603, "body": "my paas provider is redhat openshift"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1493349760, "post_id": 43637904, "comment_id": 74389235, "body": "Are you using a framework (if so, did you perform <code>db</code> migrations and deployment tasks)...? If not, is your Faye Websocket example using the correct <code>WEBSOCKET_PORT</code> assigned by the openshift? Is your client connecting to the <code>WEBSOCKET_PORT</code> as indicated by the <a href=\"http://mifo.sk/post/ruby-websockets-on-openshift/\" rel=\"nofollow noreferrer\">blog post</a>?"}, {"owner": {"reputation": 11, "user_id": 2918317, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000190300917/picture?type=large", "display_name": "reedleoneil", "link": "https://stackoverflow.com/users/2918317/reedleoneil"}, "edited": false, "score": 1, "creation_date": 1493355533, "post_id": 43637904, "comment_id": 74390733, "body": "I am not using a frame work. I created a ruby application <b><code>rhc app create ruby ruby-2.0</code></b>, then copied this <a href=\"https://github.com/mfojtik/openshift-ruby-websockets-demo\" rel=\"nofollow noreferrer\">https://github.com/mfojtik/openshift-ruby-websockets-demo</a> to my app directory. Run these commands <b><code>git add . git commit -m &quot;first commit&quot; git push</code></b>  Here is my app <a href=\"https://ruby-reedleoneil.rhcloud.com/app\" rel=\"nofollow noreferrer\">https://ruby-reedleoneil.rhcloud.com/app</a>. But when i access it with port 8000 it does not work <a href=\"https://ruby-reedleoneil.rhcloud.com:8000/app\" rel=\"nofollow noreferrer\">https://ruby-reedleoneil.rhcloud.com:8000/app</a>"}, {"owner": {"reputation": 11, "user_id": 2918317, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000190300917/picture?type=large", "display_name": "reedleoneil", "link": "https://stackoverflow.com/users/2918317/reedleoneil"}, "edited": false, "score": 0, "creation_date": 1493366736, "post_id": 43637904, "comment_id": 74396278, "body": "i can run <a href=\"https://www.igvita.com/2009/12/22/ruby-websockets-tcp-for-the-browser/\" rel=\"nofollow noreferrer\">these</a> examples locally but no luck in trying to deploy them in openshift, i already used ENV[&#39;OPENSHIFT_MY_IP&#39;] and ENV[&#39;OPENSHIFT_MY_PORT&#39;]"}, {"owner": {"reputation": 11, "user_id": 2918317, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000190300917/picture?type=large", "display_name": "reedleoneil", "link": "https://stackoverflow.com/users/2918317/reedleoneil"}, "edited": false, "score": 0, "creation_date": 1493376494, "post_id": 43637904, "comment_id": 74402478, "body": "i manually installed the gems, manually run the action hooks, still no luck :("}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1493432755, "post_id": 43637904, "comment_id": 74428479, "body": "The application works fine for me... I tested access using javascript on the browser: <code>ws = new WebSocket(&#39;ws:&#47;&#47;&#39; + location.hostname + &#39;:8000&#47;&#39;); ws.onclose = (e) =&gt; console.log(e); ws.onmessage = (e) =&gt; console.log(e);</code> ... I got a message with the time every second."}, {"owner": {"reputation": 11, "user_id": 2918317, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000190300917/picture?type=large", "display_name": "reedleoneil", "link": "https://stackoverflow.com/users/2918317/reedleoneil"}, "edited": false, "score": 0, "creation_date": 1493461893, "post_id": 43637904, "comment_id": 74434376, "body": "thank you for your response, i tried it at home and it works... i guess our company is blocking port 8000 or websockets..."}], "owner": {"reputation": 11, "user_id": 2918317, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000190300917/picture?type=large", "display_name": "reedleoneil", "link": "https://stackoverflow.com/users/2918317/reedleoneil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493377631, "creation_date": 1493218954, "last_edit_date": 1493377631, "question_id": 43637904, "link": "https://stackoverflow.com/questions/43637904/ruby-faye-websocket-openshift", "title": "ruby faye-websocket openshift", "body": "<p>I am having a problem running a ruby websocket example on openshift. I can't find any quickstart. I already tried this.</p>\n\n<p><strong><em><a href=\"http://mifo.sk/post/ruby-websockets-on-openshift/\" rel=\"nofollow noreferrer\">mifo.sk/post/ruby-websockets-on-openshift/</a></em></strong></p>\n\n<p>I am always having this error:</p>\n\n<p><strong>Sorry, but I am websocket app.</strong></p>\n\n<p>Here is my app.\n<a href=\"http://ruby-reedleoneil.rhcloud.com/\" rel=\"nofollow noreferrer\">http://ruby-reedleoneil.rhcloud.com/</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 4, "creation_date": 1493218977, "post_id": 43637527, "comment_id": 74324168, "body": "Note: since you have already required prime, you just have this available:<code>p 1767172329.prime_division</code> , resulting in [[3, 3], [13, 3], [31, 3]]."}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 0, "creation_date": 1493222603, "post_id": 43637527, "comment_id": 74326857, "body": "As mentioned above, if you go to the bother of including &#39;prime&#39; then you are recreating the wheel.  Seems to hang for 8 and 9 digit numbers for me too.  Assuming this is an exercise, try starting again and remove the require and see if you can workout a good method for this solution :)"}], "answers": [{"tags": [], "owner": {"reputation": 689, "user_id": 3442392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aafaa8822c1eb7bfc68c47e50f83ad62?s=128&d=identicon&r=PG", "display_name": "aqfaridi", "link": "https://stackoverflow.com/users/3442392/aqfaridi"}, "is_accepted": false, "score": 0, "last_activity_date": 1493251815, "creation_date": 1493251815, "answer_id": 43646555, "question_id": 43637527, "link": "https://stackoverflow.com/questions/43637527/ruby-prime-factorization-error/43646555#43646555", "title": "Ruby Prime Factorization Error", "body": "<p>you dont need to check upto <code>(n/2)</code> numbers, check upto <code>sqrt(n)</code> because <code>sqrt(n) * sqrt(n) = n</code> means at worst case, large prime number will decomposed to two mid size prime numbers else <code>n</code> itself is prime, iterating upto <code>n/2</code> numbers will take too much time. </p>\n\n<p>change base to <code>base = sqrt(n)</code></p>\n\n<pre><code>require 'prime'\nprimSzamok = [1767172329]\n\ndef prim_dem(n)\n  base = sqrt(n)\n  pf = Array.new\n  i = 2\n    while i &lt;= base\n      if Prime.prime?(i)\n        while n % i == 0\n          pf &lt;&lt; i\n          n /= i\n          puts \"i: #{i}, base: #{base}, n: #{n}\"\n        end\n      end\n      i += 1\n    end\n  return pf\nend\n\nharomCount = 0\n\nprimSzamok.each do |number|\n  primArr = prim_dem(number)\n  primString = \"[\"\n\n  iCount = 0\n  primArr.each do |v|\n    if iCount == 0\n      primString += \"#{v}\"\n    else\n      primString += \", #{v}\"\n    end\n\n    if v == 3\n      haromCount += 1\n    end\n\n    iCount += 1\n  end\n  primString += \"]\"\n\n  puts \"Number: #{number} | Primes: #{primString}\"\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7049656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11ab85a61e813f268e4095ed7181383b?s=128&d=identicon&r=PG&f=1", "display_name": "MGamer333", "link": "https://stackoverflow.com/users/7049656/mgamer333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493251815, "creation_date": 1493218072, "question_id": 43637527, "link": "https://stackoverflow.com/questions/43637527/ruby-prime-factorization-error", "title": "Ruby Prime Factorization Error", "body": "<p>I made a prime factorizaton program in ruby. It solves 8-9 digit numbers, but when I add a 10 digit number to the program, and it donesn't solve. For debug I wrote all steps in the loop, and the program solves, but not finish. It will be run forever. Here is the code:</p>\n\n<pre><code>require 'prime'\nprimSzamok = [1767172329]\n\ndef prim_dem(n)\n  base = n / 2\n  pf = Array.new\n  i = 2\n    while i &lt;= base\n      if Prime.prime?(i)\n        while n % i == 0\n          pf &lt;&lt; i\n          n /= i\n          puts \"i: #{i}, base: #{base}, n: #{n}\"\n        end\n      end\n      i += 1\n    end\n  return pf\nend\n\nharomCount = 0\n\nprimSzamok.each do |number|\n  primArr = prim_dem(number)\n  primString = \"[\"\n\n  iCount = 0\n  primArr.each do |v|\n    if iCount == 0\n      primString += \"#{v}\"\n    else\n      primString += \", #{v}\"\n    end\n\n    if v == 3\n      haromCount += 1\n    end\n\n    iCount += 1\n  end\n  primString += \"]\"\n\n  puts \"Number: #{number} | Primes: #{primString}\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb"], "answers": [{"comments": [{"owner": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "edited": false, "score": 0, "creation_date": 1493241362, "post_id": 43642576, "comment_id": 74337695, "body": "Tried this and when displaying in my erb, it only shows the the items that fall under this param (:paid_on_helper =&gt; nil, :assigned_driver2_id.ne =&gt; nil)"}, {"owner": {"reputation": 523, "user_id": 2817111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99961f704b8fb737c723a0b403887949?s=128&d=identicon&r=PG", "display_name": "mikwat", "link": "https://stackoverflow.com/users/2817111/mikwat"}, "reply_to_user": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "edited": false, "score": 1, "creation_date": 1493241961, "post_id": 43642576, "comment_id": 74337991, "body": "Try calling <code>.explain</code> on your query. This should show the actual mongo query and may help you debug."}, {"owner": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "edited": false, "score": 0, "creation_date": 1493249454, "post_id": 43642576, "comment_id": 74340742, "body": "I did and now my app is crashing. It will restart and then crash continuously. wtf?"}, {"owner": {"reputation": 523, "user_id": 2817111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99961f704b8fb737c723a0b403887949?s=128&d=identicon&r=PG", "display_name": "mikwat", "link": "https://stackoverflow.com/users/2817111/mikwat"}, "reply_to_user": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "edited": false, "score": 1, "creation_date": 1493251506, "post_id": 43642576, "comment_id": 74341273, "body": "Only use <code>.explain</code> in your Rails console, not your app code. For example: <code>bundle exec rails console</code>"}], "tags": [], "owner": {"reputation": 523, "user_id": 2817111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99961f704b8fb737c723a0b403887949?s=128&d=identicon&r=PG", "display_name": "mikwat", "link": "https://stackoverflow.com/users/2817111/mikwat"}, "is_accepted": true, "score": 1, "last_activity_date": 1493233569, "creation_date": 1493233569, "answer_id": 43642576, "question_id": 43637197, "link": "https://stackoverflow.com/questions/43637197/how-to-merge-mongodb-query-results/43642576#43642576", "title": "How to merge mongodb query results?", "body": "<p>Can this be accomplished using a single mongo query? Something like this:</p>\n\n<pre><code>def self.unpaid\n  AR.or({ :paid_on =&gt; nil }, { :paid_on_helper =&gt; nil, :assigned_driver2_id.ne =&gt; nil })\n    .in(:status =&gt; [AR::TRANSACTION_COMPLETE,AR::CANCELLED_BY_REQUESTER])\n    .gt(:total_owed_to_driver =&gt; 0)\n    .asc(:assigned_driver_id)\n    .asc(:timestamp_requested)\nend\n</code></pre>\n"}], "owner": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 43642576, "answer_count": 1, "score": 0, "last_activity_date": 1493233569, "creation_date": 1493217181, "question_id": 43637197, "link": "https://stackoverflow.com/questions/43637197/how-to-merge-mongodb-query-results", "title": "How to merge mongodb query results?", "body": "<p>So I have an AR model that looks like this (all strings and date attributes):</p>\n\n<p>AR\ndriver_id\ndriver_name\ndriver_license\npaid_on (date)\n...\nhelper_id\nhelper_name\nhelper_license\npaid_on_helper (date)</p>\n\n<p>I have this query to show unpaid </p>\n\n<pre><code>    def self.unpaid\n        result1 = AR.where(:paid_on =&gt; nil).in(:status =&gt; [AR::TRANSACTION_COMPLETE,AR::CANCELLED_BY_REQUESTER]).gt(:total_owed_to_driver =&gt; 0).asc(:assigned_driver_id).asc(:timestamp_requested)\n        result2 = AR.where(:paid_on_helper =&gt; nil, :assigned_driver2_id.ne =&gt; nil).in(:status =&gt; [AR::TRANSACTION_COMPLETE,AR::CANCELLED_BY_REQUESTER]).gt(:total_owed_to_driver =&gt; 0).asc(:assigned_driver2_id).asc(:timestamp_requested)\n        result1.to_a.concat(result2.to_a)\n        result1\n      end\n</code></pre>\n\n<p>The issue is that when I merge the two this way I end up with an array like this.</p>\n\n<pre><code>    Joe (main driver)\n    Joe (main driver)\n    Joe (main driver)\n    Bob (main driver)\n    Bob (main driver)\n    Larry (main driver)\n    Larry (main driver)\n    Larry (main driver)\n    Joe (2nd driver)\n    Joe (2nd driver)\n    Bob (2nd driver)\n    Bob (2nd driver)\n    Bob (2nd driver)\n    Bob (2nd driver)\n    Larry (2nd driver)\n    Larry (2nd driver)\n</code></pre>\n\n<p>What I need is an array that ends like this.</p>\n\n<pre><code>    Joe (main driver)\n    Joe (main driver)\n    Joe (main driver)\n    Joe (2nd driver)\n    Joe (2nd driver)\n    Bob (main driver)\n    Bob (main driver)\n    Bob (2nd driver)\n    Bob (2nd driver)\n    Bob (2nd driver)\n    Bob (2nd driver)\n    Larry (main driver)\n    Larry (main driver)\n    Larry (main driver)\n    Larry (2nd driver)\n    Larry (2nd driver)\n</code></pre>\n\n<p>I am guessing its a sorting combined with a secondary or tertiary where clause?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest", "multipartform-data", "multipart"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493218225, "post_id": 43636867, "comment_id": 74323457, "body": "I doubt request body is of JSON type, can you verify?"}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1493229792, "post_id": 43636867, "comment_id": 74331130, "body": "Upload the same file with Postman and checkout the params. My guess is that is client side issue."}, {"owner": {"reputation": 11, "user_id": 7925864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h26NpJRAMX8/AAAAAAAAAAI/AAAAAAAAAMQ/FNcRseRBO7U/photo.jpg?sz=128", "display_name": "Mrugesh Patel", "link": "https://stackoverflow.com/users/7925864/mrugesh-patel"}, "edited": false, "score": 0, "creation_date": 1493230387, "post_id": 43636867, "comment_id": 74331489, "body": "yes, its json name as metadata and there is file variable for a csv file upload"}, {"owner": {"reputation": 11, "user_id": 7925864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h26NpJRAMX8/AAAAAAAAAAI/AAAAAAAAAMQ/FNcRseRBO7U/photo.jpg?sz=128", "display_name": "Mrugesh Patel", "link": "https://stackoverflow.com/users/7925864/mrugesh-patel"}, "edited": false, "score": 0, "creation_date": 1493230694, "post_id": 43636867, "comment_id": 74331706, "body": "@ Anton:  the issue is how to handle WebKitFormBoundary in ruby on rails? in Spring we can handle with form-data or so. but not sure how to handle in rails."}], "answers": [{"tags": [], "owner": {"reputation": 523, "user_id": 2817111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99961f704b8fb737c723a0b403887949?s=128&d=identicon&r=PG", "display_name": "mikwat", "link": "https://stackoverflow.com/users/2817111/mikwat"}, "is_accepted": false, "score": 0, "last_activity_date": 1493234143, "creation_date": 1493234143, "answer_id": 43642733, "question_id": 43636867, "link": "https://stackoverflow.com/questions/43636867/ruby-on-rails-multipart-request-unable-to-read-using-paramname/43642733#43642733", "title": "Ruby On Rails multipart request unable to read using param[:name]", "body": "<p>Try accessing it via <code>params[:file]</code>. For example, to get the contents of the file: <code>params[:file].read</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 7925864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h26NpJRAMX8/AAAAAAAAAAI/AAAAAAAAAMQ/FNcRseRBO7U/photo.jpg?sz=128", "display_name": "Mrugesh Patel", "link": "https://stackoverflow.com/users/7925864/mrugesh-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 647, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493249996, "creation_date": 1493216373, "last_edit_date": 1493249996, "question_id": 43636867, "link": "https://stackoverflow.com/questions/43636867/ruby-on-rails-multipart-request-unable-to-read-using-paramname", "title": "Ruby On Rails multipart request unable to read using param[:name]", "body": "<p>When our client side application posts (Json and csv file) data to our rest API (Ruby on Rails Controller) the data gets changed as seen below (prefix with WebKitFormBoundaryBgpEuNnwhpVHhk5s).</p>\n\n<pre><code>Parameters: {\"------WebKitFormBoundaryBgpEuNnwhpVHhk5s\\r\\nContent-Disposition: form-data; name\"=&gt;\"\\\"file\\\"; filename=\\\"client_trades20170313.csv\\\"\\r\\nContent-Type: application/vnd.ms-excel\\r\\n\\r\\nTr_DATE,TRAC_CLASS,PSTATUS,RWS,STR1,SWIT2\\r\\n3/13/2017,test,D,0,0,22\\r\\n3/13/2017,FX,D,4949,6615,2379\\r\\n3/13/2017,test2,D,17,17,0\\r\\n3/13/2017,ORN,D,22,22,0\\r\\n3/13/2017,RFE,D,127,127,0\\r\\n3/13/2017,FCOME,D,191,244,1425\\r\\n3/13/2017,EWS,D,0,0,356\\r\\n3/13/2017,REPO,D,40,40,0\\r\\n3/13/2017,DUND,D,0,0,38\\r\\n3/13/2017,QAS,D,24,33,21\\r\\n3/13/2017,TEURE,D,13,24,24\\r\\n3/13/2017,WQ,D,461,478,62\\r\\n3/13/2017,FUT,D,24624,32279,2685\\r\\n\\r\\n------WebKitFormBoundaryBgpEuNnwhpVHhk5s\\r\\nContent-Disposition: form-data; name=\\\"metadata\\\"\\r\\n\\r\\n{\\\"title\\\":\\\"Document Uploaded by nexen UI\\\",\\\"description\\\":\\\"Upload document\\\",\\\"name\\\":\\\"BTS1492089784675_bmd@red\\\",\\\"client\\\":\\\"test23\\\",\\\"rrea\\\":\\\"Trane\\\",\\\"sourceSystem\\\":\\\"CLIENT-CSV\\\",\\\"tradeDate\\\":\\\"2017-04-11\\\",\\\"timeOfDay\\\":\\\"intraDay\\\"}\\r\\n------WebKitFormBoundaryBgpEuNnwhpVHhk5s--\\r\\n\"}\n</code></pre>\n\n<p>As as a result unable to retrieve parameter (on rest controller) 'metadata' like params[:metadata] .  </p>\n\n<p>I am new to ruby on rails and don't know how to retrieve parameter surrounded by WebKitFormBoundary.</p>\n\n<p>Please help.</p>\n\n<p>Code is written using ruby 2.x and rails 5.x.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 4740184, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6e8ad15606ff8941234daae6c1e5d728?s=128&d=identicon&r=PG&f=1", "display_name": "BigL", "link": "https://stackoverflow.com/users/4740184/bigl"}, "edited": false, "score": 0, "creation_date": 1493218897, "post_id": 43636895, "comment_id": 74324094, "body": "thanks for the help. How would I then display the 2 sets of data in the view page? Ive updated the question to explain what I mean."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 89, "user_id": 4740184, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6e8ad15606ff8941234daae6c1e5d728?s=128&d=identicon&r=PG&f=1", "display_name": "BigL", "link": "https://stackoverflow.com/users/4740184/bigl"}, "edited": false, "score": 0, "creation_date": 1493219265, "post_id": 43636895, "comment_id": 74324396, "body": "I have updated my answer. Hopefully that&#39;s what you needed, but if the requirements are actually more complicated then I suggest you go back and re-write your question to explain the full situation more thoroughly."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1493219185, "last_edit_date": 1493219185, "creation_date": 1493216428, "answer_id": 43636895, "question_id": 43636784, "link": "https://stackoverflow.com/questions/43636784/ruby-on-rails-2-actions-on-the-same-view/43636895#43636895", "title": "Ruby on Rails: 2 actions on the same view", "body": "<p>From the <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-render\" rel=\"nofollow noreferrer\">Rails documentation</a>:</p>\n\n<pre><code>def accepted\n  @user = User.find(params[:id])\n  @requests = Request.where(:driverid =&gt; @user.id).order(\"created_at DESC\")\n  render :show\nend\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>In the controller show action:</p>\n\n<pre><code>@requests = @user.requests.where(:accepted =&gt; 'f')\n</code></pre>\n\n<p>And in the show view:</p>\n\n<pre><code>%h2 Current requests:\n- @requests.each do |request|  \n  # ...\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 4740184, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6e8ad15606ff8941234daae6c1e5d728?s=128&d=identicon&r=PG&f=1", "display_name": "BigL", "link": "https://stackoverflow.com/users/4740184/bigl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 43636895, "answer_count": 1, "score": 1, "last_activity_date": 1493219185, "creation_date": 1493216185, "last_edit_date": 1493218835, "question_id": 43636784, "link": "https://stackoverflow.com/questions/43636784/ruby-on-rails-2-actions-on-the-same-view", "title": "Ruby on Rails: 2 actions on the same view", "body": "<p>I am trying to get 2 action showing on the one view.</p>\n\n<p>routes.rb</p>\n\n<pre><code>resources :users do\n get \"accepted\",    to: \"users#accepted\"\n</code></pre>\n\n<p>users_controller.rb</p>\n\n<pre><code>def show\n @user = User.find(params[:id])\n @requests = @user.requests\nend\n\ndef accepted\n @user = User.find(params[:id])\n @requests = Request.where(:driverid =&gt; @user.id).order(\"created_at DESC\")\nend\n</code></pre>\n\n<p>I am trying to point these two actions to the users view page.</p>\n\n<p>Ive been playing around with partials and looking at similar questions but cant figure it out. Any help is appreciated!</p>\n\n<p>EDIT</p>\n\n<p>show.html.haml</p>\n\n<p>I want the below to be the show action:</p>\n\n<pre><code>%h2 Current requests:\n- @user.requests.where(:accepted =&gt; 'f').each do |request|  \n   etc\n</code></pre>\n\n<p>Then the accepted action:</p>\n\n<pre><code>- @requests.where(blah blah).each do |request|  \n    etc\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hashmap"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493222435, "post_id": 43636495, "comment_id": 74326747, "body": "In Ruby we call them a Hash. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and their linked pages. We&#39;d like to see your attempt to solve this. Without that it looks like you want us to write code for you, which isn&#39;t what SO is for. As written your question is too broad."}, {"owner": {"reputation": 79, "user_id": 6888296, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/7sSEb.png?s=128&g=1", "display_name": "ennon", "link": "https://stackoverflow.com/users/6888296/ennon"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493301921, "post_id": 43636495, "comment_id": 74367381, "body": "I know it is a Hash, are you referring the mistake on the title? I can change it , i didn&#39;t write the question because i wanted code, i wrote because i was not understanding how to solve my problem, that is different."}, {"owner": {"reputation": 79, "user_id": 6888296, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/7sSEb.png?s=128&g=1", "display_name": "ennon", "link": "https://stackoverflow.com/users/6888296/ennon"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493302521, "post_id": 43636495, "comment_id": 74367805, "body": "I&#39;d like to thank you for the link you sent me, that was helpful because I verified that the information I wrote helped people identify the problem because I explained that using 2 hash map, you cannot merge them in this case because the output is still the second hash. In fact, I said that when I tried to merge, it was still missing the values. It is also <b>Verifiable</b> because I Described the problem, <b>Eliminated any issues that were not relevant to the problem</b>, in fact, I didn&#39;t mention the other problems I was having with creating the correct strings inside the arrays."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493311269, "post_id": 43636495, "comment_id": 74373918, "body": "While you attempted to justify why you wrote the question the way you did, it remains that it isn&#39;t written how it should be for SO. &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; repeatedly says code is needed to demonstrate the problem you&#39;re having. &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot; helps explain it from the standpoint of the rest of the community. See also &quot;<a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">Writing the perfect question</a>&quot; and &quot;<a href=\"http://catb.org/esr/faqs/smart-questions.html\" rel=\"nofollow noreferrer\">How To Ask Questions The Smart Way</a>&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 6888296, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/7sSEb.png?s=128&g=1", "display_name": "ennon", "link": "https://stackoverflow.com/users/6888296/ennon"}, "edited": false, "score": 0, "creation_date": 1493217530, "post_id": 43636799, "comment_id": 74322924, "body": "thanks a lot! so it&#39;s basically the array method of joining two arrays... wow!"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 0, "last_activity_date": 1493216636, "last_edit_date": 1493216636, "creation_date": 1493216222, "answer_id": 43636799, "question_id": 43636495, "link": "https://stackoverflow.com/questions/43636495/how-to-append-values-from-an-hash-to-another-one-using-ruby/43636799#43636799", "title": "How to append values from an hash to another one using Ruby", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.4.0/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\"><code>Hash#merge</code></a> with a block, and use <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-7C\" rel=\"nofollow noreferrer\"><code>Array#|</code></a> to get the union of two arrays:</p>\n\n<pre><code>h1 = { userdata: ['field: email,start: 0,end: 0'] }\nh2 = { userdata: ['field: resource.attributes.account_source.iban,start: 0,end: 0', 'field: resource.attributes.account_source.person_name,start: 0,end: 0', 'field: resource.attributes.account_target.iban,start: 0,end: 0', 'field: resource.attributes.account_target.person_name,start: 0,end: 0'], iddata: ['field: resource.attributes.account_source.account_id,start: 0,end: 0', 'field: resource.attributes.account_source.person_id,start: 0,end: 0', 'field: resource.attributes.account_target.account_id,start: 0,end: 0', 'field: resource.attributes.account_target.person_id,start: 0,end: 0'], infodata: ['field: resource.attributes.reason,start: 0,end: 0'], balancedata: ['field: resource.attributes.amount,start: 0,end: 0'] }\n\nh3 = h1.merge(h2) { |_, old_array, new_array| new_array | old_array | }\n# {:userdata=&gt;[\"field: resource.attributes.account_source.iban,start: 0,end: 0\", \"field: resource.attributes.account_source.person_name,start: 0,end: 0\", \"field: resource.attributes.account_target.iban,start: 0,end: 0\", \"field: resource.attributes.account_target.person_name,start: 0,end: 0\", \"field: email,start: 0,end: 0\"], :iddata=&gt;[\"field: resource.attributes.account_source.account_id,start: 0,end: 0\", \"field: resource.attributes.account_source.person_id,start: 0,end: 0\", \"field: resource.attributes.account_target.account_id,start: 0,end: 0\", \"field: resource.attributes.account_target.person_id,start: 0,end: 0\"], :infodata=&gt;[\"field: resource.attributes.reason,start: 0,end: 0\"], :balancedata=&gt;[\"field: resource.attributes.amount,start: 0,end: 0\"]}\n</code></pre>\n\n<p>Note that <code>:userdata</code> and <code>'userdata'</code> aren't the same Ruby objects and aren't considered to be the same key in a Hash.</p>\n\n<p>Finally, the values in your hash aren't hashes but string arrays. Two strings with the same field but different values will be considered completely distinct :</p>\n\n<pre><code>['field: a'] | ['field: a, value: 1']\n# [\"field: a\", \"field: a, value: 1\"]\n</code></pre>\n\n<p>If you want the functionality of a hash, use a <a href=\"https://ruby-doc.org/core-2.4.1/Hash.html\" rel=\"nofollow noreferrer\"><code>Hash</code></a>.</p>\n"}], "owner": {"reputation": 79, "user_id": 6888296, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/7sSEb.png?s=128&g=1", "display_name": "ennon", "link": "https://stackoverflow.com/users/6888296/ennon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 43636799, "answer_count": 1, "score": 0, "last_activity_date": 1493302745, "creation_date": 1493215437, "last_edit_date": 1493302745, "question_id": 43636495, "link": "https://stackoverflow.com/questions/43636495/how-to-append-values-from-an-hash-to-another-one-using-ruby", "title": "How to append values from an hash to another one using Ruby", "body": "<p>I have a hash:</p>\n\n<pre><code>{:userdata=&gt;[\"field: email,start: 0,end: 0\"]}\n</code></pre>\n\n<p>and I want to add to another hash that looks like this: </p>\n\n<pre><code>{:userdata=&gt;[\"field: resource.attributes.account_source.iban,start: 0,end: 0\", \"field: resource.attributes.account_source.person_name,start: 0,end: 0\", \"field: resource.attributes.account_target.iban,start: 0,end: 0\", \"field: resource.attributes.account_target.person_name,start: 0,end: 0\"], :iddata=&gt;[\"field: resource.attributes.account_source.account_id,start: 0,end: 0\", \"field: resource.attributes.account_source.person_id,start: 0,end: 0\", \"field: resource.attributes.account_target.account_id,start: 0,end: 0\", \"field: resource.attributes.account_target.person_id,start: 0,end: 0\"], :infodata=&gt;[\"field: resource.attributes.reason,start: 0,end: 0\"], :balancedata=&gt;[\"field: resource.attributes.amount,start: 0,end: 0\"]}\n</code></pre>\n\n<p>There are multiple keys in the second hash and array of values, so I need to add the value in the correct place, which should be something like:</p>\n\n<pre><code> {:userdata=&gt;[\"field: resource.attributes.account_source.iban,start: 0,end: 0\", \"field: resource.attributes.account_source.person_name,start: 0,end: 0\", \"field: resource.attributes.account_target.iban,start: 0,end: 0\", \"field: resource.attributes.account_target.person_name,start: 0,end: 0\", \"field: email,start: 0,end: 0\"], ....\n</code></pre>\n\n<p>The second hash is more complex, that may contain the same key of the hash that I'm trying to \"merge\" but of course is missing the value, which is what I want to add in the second hash.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7925760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7286fc11d2f1cd029f37b83da98d1e6?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil K R", "link": "https://stackoverflow.com/users/7925760/akhil-k-r"}, "edited": false, "score": 0, "creation_date": 1493215687, "post_id": 43636442, "comment_id": 74321371, "body": "Thanks nautgrad. But their document says above syntax should work. and it used to work in my older version. Also in sidekiq I can call a class method with delay right? Even that is throwing same error."}, {"owner": {"reputation": 394, "user_id": 5236616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1803d9ab29d8ae8127eee4bee3d283c8?s=128&d=identicon&r=PG&f=1", "display_name": "nautgrad", "link": "https://stackoverflow.com/users/5236616/nautgrad"}, "reply_to_user": {"reputation": 33, "user_id": 7925760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7286fc11d2f1cd029f37b83da98d1e6?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil K R", "link": "https://stackoverflow.com/users/7925760/akhil-k-r"}, "edited": false, "score": 0, "creation_date": 1493215880, "post_id": 43636442, "comment_id": 74321536, "body": "Problem is that ruby don&#39;t recognize <code>AdminMailer</code> like a class. It thinks that this is string, this is not expected behaviour."}, {"owner": {"reputation": 33, "user_id": 7925760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7286fc11d2f1cd029f37b83da98d1e6?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil K R", "link": "https://stackoverflow.com/users/7925760/akhil-k-r"}, "edited": false, "score": 0, "creation_date": 1493222848, "post_id": 43636442, "comment_id": 74327033, "body": "Oh I see... I guess there is conflict in gems which overrides delay method of sidekiq.Let me try some other way.. Thanks"}], "tags": [], "owner": {"reputation": 394, "user_id": 5236616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1803d9ab29d8ae8127eee4bee3d283c8?s=128&d=identicon&r=PG&f=1", "display_name": "nautgrad", "link": "https://stackoverflow.com/users/5236616/nautgrad"}, "is_accepted": true, "score": 0, "last_activity_date": 1493223229, "last_edit_date": 1493223229, "creation_date": 1493215328, "answer_id": 43636442, "question_id": 43635975, "link": "https://stackoverflow.com/questions/43635975/sidekiq-error-nomethoderror-undefined-method-send-welcome-email-for-adminma/43636442#43636442", "title": "Sidekiq error NoMethodError: undefined method `:send_welcome_email&#39; for &quot;AdminMailer&quot;:String", "body": "<p>Sidekiq has another syntax. \nYou should do like this:</p>\n\n<pre><code>AdminMailer.send_welcome_email(1).deliver_later\n</code></pre>\n\n<p>There are examples in \"<a href=\"https://gist.github.com/maxivak/690e6c353f65a86a4af9\" rel=\"nofollow noreferrer\">Sending emails with ActionMailer and Sidekiq</a>\".</p>\n"}], "owner": {"reputation": 33, "user_id": 7925760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7286fc11d2f1cd029f37b83da98d1e6?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil K R", "link": "https://stackoverflow.com/users/7925760/akhil-k-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 43636442, "answer_count": 1, "score": -1, "last_activity_date": 1493223229, "creation_date": 1493214119, "last_edit_date": 1493223149, "question_id": 43635975, "link": "https://stackoverflow.com/questions/43635975/sidekiq-error-nomethoderror-undefined-method-send-welcome-email-for-adminma", "title": "Sidekiq error NoMethodError: undefined method `:send_welcome_email&#39; for &quot;AdminMailer&quot;:String", "body": "<p>I am trying to send email using Sidekiq like this: </p>\n\n<pre><code>AdminMailer.delay.send_welcome_email(1)\n</code></pre>\n\n<p>But I am getting this error:</p>\n\n<pre><code>NoMethodError: undefined method `:send_welcome_email' for\n\"AdminMailer\":String\n</code></pre>\n\n<p>I recently upgraded from Rails 3.2 to Rails 4.0 and my Ruby version is 2.1.1. After the upgrade we got this issue. </p>\n\n<p>How can I solve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "prawn"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1493212295, "post_id": 43635228, "comment_id": 74318498, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/43632792/how-to-change-prawn-graph-default-theme\">How to change prawn-graph default theme?</a>"}, {"owner": {"reputation": 233, "user_id": 5428132, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/984768732cd87f4daae3aaffe0a78659?s=128&d=identicon&r=PG&f=1", "display_name": "alexin", "link": "https://stackoverflow.com/users/5428132/alexin"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1493213387, "post_id": 43635228, "comment_id": 74319433, "body": "I was recommended &quot;please create a different question for this problem and provide some code&quot;."}], "owner": {"reputation": 233, "user_id": 5428132, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/984768732cd87f4daae3aaffe0a78659?s=128&d=identicon&r=PG&f=1", "display_name": "alexin", "link": "https://stackoverflow.com/users/5428132/alexin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493213236, "creation_date": 1493212178, "last_edit_date": 1493213236, "question_id": 43635228, "link": "https://stackoverflow.com/questions/43635228/add-color-in-prawn-graph-default-theme", "title": "Add color in prawn-graph default theme/", "body": "<p>I use <a href=\"https://github.com/HHRy/prawn-graph\" rel=\"nofollow noreferrer\">prawn-graph</a>. If the graphs are greater than 5 I get an error: </p>\n\n<blockquote>\n  <p>/var/lib/gems/2.3.0/gems/prawn-2.2.2/lib/prawn/graphics/colo\u200c\u200br.rb:149:in\n  set_color_space': unknown color space: '' (ArgumentError)</p>\n</blockquote>\n\n<p>Example:</p>\n\n<pre><code>require \"prawn\"\nrequire 'prawn-graph'\n\nseries = []\nseries &lt;&lt; Prawn::Graph::Series.new([1,7,13,19,25,31],  title: \"Bar 1\", type: :bar)\nseries &lt;&lt; Prawn::Graph::Series.new([2,8,14,20,26,32],  title: \"Bar 2\", type: :bar)\nseries &lt;&lt; Prawn::Graph::Series.new([3,9,15,21,27,33],  title: \"Bar 3\", type: :bar)\nseries &lt;&lt; Prawn::Graph::Series.new([4,10,16,22,28,34],  title: \"Bar 4\", type: :bar)\nseries &lt;&lt; Prawn::Graph::Series.new([5,11,17,23,29,35],  title: \"Bar 5\", type: :bar)\nseries &lt;&lt; Prawn::Graph::Series.new([6,12,18,24,30,36],  title: \"Bar 6\", type: :bar)\n\nxaxis_labels = ['0900', '1000', '1100', '1200', '1300', '1400', '1500', '1600', '1700', '1800', '1900', '2000', '2100']\n\nPrawn::Document.generate('tmp/test.pdf') do\n    graph series, width: 500, height: 200, title: \"A Title for the chart\", at: [10,700], xaxis_labels: xaxis_labels\nend\n</code></pre>\n\n<p>How add colors in default theme?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 4716515, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/53273610434ee4a2979ac82e4294681e?s=128&d=identicon&r=PG", "display_name": "ducati1212", "link": "https://stackoverflow.com/users/4716515/ducati1212"}, "edited": false, "score": 1, "creation_date": 1493212796, "post_id": 43635304, "comment_id": 74318923, "body": "thank you for the dope slap this worked    &lt;td&gt;  &lt;%= link_to c.id, perfsum_perffeedresult_loglines_path(c.perfsummaryid, c.id) %&gt; &lt;/td&gt;"}, {"owner": {"reputation": 845, "user_id": 4535298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBmxp.jpg?s=128&g=1", "display_name": "Vasili", "link": "https://stackoverflow.com/users/4535298/vasili"}, "reply_to_user": {"reputation": 129, "user_id": 4716515, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/53273610434ee4a2979ac82e4294681e?s=128&d=identicon&r=PG", "display_name": "ducati1212", "link": "https://stackoverflow.com/users/4716515/ducati1212"}, "edited": false, "score": 0, "creation_date": 1493212827, "post_id": 43635304, "comment_id": 74318959, "body": "@ducati1212 no problem!"}], "tags": [], "owner": {"reputation": 845, "user_id": 4535298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBmxp.jpg?s=128&g=1", "display_name": "Vasili", "link": "https://stackoverflow.com/users/4535298/vasili"}, "is_accepted": true, "score": 1, "last_activity_date": 1493212381, "creation_date": 1493212381, "answer_id": 43635304, "question_id": 43635193, "link": "https://stackoverflow.com/questions/43635193/rails-nested-routes-with-link-to/43635304#43635304", "title": "Rails nested routes with link_to", "body": "<p>First of all, it's a <code>perfsum_perffeedresult_loglines_path</code>, you missed <code>_path</code>, which should be added to get a path. And you need to pass two params, look at the path:</p>\n\n<pre><code>/perfsums/:perfsum_id/perffeedresults/:perffeedresult_id/loglines\n</code></pre>\n\n<p>You need to pass a <code>perfsum</code> and a <code>perffeedresult</code>:</p>\n\n<pre><code>&lt;td&gt; &lt;%= link_to c.id, perfsum_perffeedresult_loglines_path(perfsum, perffeedresult) %&gt; &lt;/td&gt;\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 4716515, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/53273610434ee4a2979ac82e4294681e?s=128&d=identicon&r=PG", "display_name": "ducati1212", "link": "https://stackoverflow.com/users/4716515/ducati1212"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 1, "accepted_answer_id": 43635304, "answer_count": 1, "score": 1, "last_activity_date": 1493212381, "creation_date": 1493212104, "question_id": 43635193, "link": "https://stackoverflow.com/questions/43635193/rails-nested-routes-with-link-to", "title": "Rails nested routes with link_to", "body": "<p>I'm trying to use a link_to from my view into a nested route and I am sure I just have my syntax incorrect.  The basic flow of my app is there is a summary that has many feeds which then have many log lines. its  a very basic report</p>\n\n<p>My route is</p>\n\n<pre><code>    resources :perfsums, :only =&gt; [:index] do\n    resources :perffeedresults, :only =&gt; [:index] do\n          resources :loglines, :only =&gt; [:index] do\n          end\n    end\n  end\n</code></pre>\n\n<p>Here is how the rake routes looks for that</p>\n\n<pre><code>perfsum_perffeedresult_loglines_path    GET     /perfsums/:perfsum_id/perffeedresults/:perffeedresult_id/loglines(.:format)     loglines#index \n</code></pre>\n\n<p>In my view I have a link to I want to link from the feed class to log lines using the feed ID.  Should be very simple.  My link to looks like this</p>\n\n<pre><code>  &lt;td&gt; &lt;%= link_to c.id, perfsum_perffeedresult_loglines(c) %&gt; &lt;/td&gt;\n</code></pre>\n\n<p>Going directly to the page by hand works as the link below shows I just can't get there form that link to</p>\n\n<pre><code>http://localhost:3000/perfsums/19/perffeedresults/143/loglines\n</code></pre>\n\n<p>When I try to run with that link_to I get. I have tried a few different options here none have worked.</p>\n\n<pre><code>undefined method `perfsum_perffeedresult_loglines' for #&lt;#&lt;Class:0x007fad31b60dd8&gt;:0x007fad386d86b0&gt;\n</code></pre>\n\n<p>I do use a link_to to go from the summary to the feeds page fine its just that extra  bit of nesting t hats throwing me off I think. </p>\n"}, {"tags": ["ruby", "multithreading", "child-process"], "comments": [{"owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1493230295, "post_id": 43634318, "comment_id": 74331428, "body": "Can you add <code>@@thr.join</code> just after your call to <code>Thread.kill(@@thr)</code> and see what happens? Alternatively, try replacing <code>Thread.kill(@@thr)</code> with <code>@@thr.exit</code>, if you haven&#39;t already tried that?"}, {"owner": {"reputation": 11, "user_id": 3301361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3bbe660cc9036d2cf7eebf9f047294?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/3301361/arun"}, "reply_to_user": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1493276555, "post_id": 43634318, "comment_id": 74349168, "body": "@ArtOfCode That didn&#39;t help.. Looks like my only option is to get the pid and kill the process."}], "answers": [{"comments": [{"owner": {"reputation": 790, "user_id": 722915, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/a14d1bca90d7ebeda50dca99aab381b9?s=128&d=identicon&r=PG", "display_name": "shevy", "link": "https://stackoverflow.com/users/722915/shevy"}, "edited": false, "score": 0, "creation_date": 1613558353, "post_id": 43642827, "comment_id": 117109172, "body": "Oddly enough I use a similar variant to the above, but I actually think there may be another way, without depending on &quot;ps&quot;. Since I am using linux 99% of the time this is not a big deal for me, but it would be awesome if ruby could have direct support as-is, without anyone depending on ps as such."}], "tags": [], "owner": {"reputation": 523, "user_id": 2817111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99961f704b8fb737c723a0b403887949?s=128&d=identicon&r=PG", "display_name": "mikwat", "link": "https://stackoverflow.com/users/2817111/mikwat"}, "is_accepted": false, "score": 1, "last_activity_date": 1493234506, "creation_date": 1493234506, "answer_id": 43642827, "question_id": 43634318, "link": "https://stackoverflow.com/questions/43634318/how-to-terminate-a-child-process-as-part-of-terminating-the-thread-that-created/43642827#43642827", "title": "How to terminate a child process as part of terminating the thread that created it", "body": "<p>Using <code>ps</code> is the only approach I've found that works. If you also want to kill child threads, you could use something like this:</p>\n\n<pre><code>def child_pids_recursive(pid)\n  # get children\n  pipe = IO.popen(\"ps -ef | grep #{pid}\")\n\n  child_pids = pipe.readlines.map do |line|\n    parts = line.split(/\\s+/)\n    parts[2] if parts[3] == pid.to_s &amp;&amp; parts[2] != pipe.pid.to_s\n  end.compact\n\n  pipe.close\n\n  # get grandchildren\n  grandchild_pids = child_pids.map do |cpid|\n    child_pids_recursive(cpid)\n  end.flatten\n\n  child_pids + grandchild_pids\nend\n\ndef kill_all(pid)\n  child_pids_recursive(pid).reverse.each do |p|\n    begin\n      Process.kill('TERM', p.to_i)\n    rescue\n      # ignore\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3301361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3bbe660cc9036d2cf7eebf9f047294?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/3301361/arun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493234506, "creation_date": 1493209951, "last_edit_date": 1493223537, "question_id": 43634318, "link": "https://stackoverflow.com/questions/43634318/how-to-terminate-a-child-process-as-part-of-terminating-the-thread-that-created", "title": "How to terminate a child process as part of terminating the thread that created it", "body": "<p>I have a Ruby application that spawns a thread on-demand which in turn does a system call to execute a native binary.</p>\n\n<p>I want to abort this call before the native call completes. </p>\n\n<p>I tried using all options the Thread documentation provided, like <code>kill</code>, <code>raise</code> and <code>terminate</code>, but nothing seems to help.</p>\n\n<p>This is what I'm trying to do:</p>\n\n<pre><code>class Myserver &lt; Grape::API\n@@thr = nil\n\n  post \"/start\" do\n    puts \"Starting script\"\n    @@thr = Thread.new do\n     op=`sh chumma_sh.sh`\n     puts op\n    end\n    puts @@thr.status\n  end\n\n  put \"/stop\" do\n    @@thr.terminate\n    @@thr.raise\n    Thread.kill(@@thr)\n    puts @@thr.status\n  end\nend\n</code></pre>\n\n<p>The thread appears to enter a sleep state as an IO operation is in process, but how do I kill the thread so that all child processes it created are terminated and not attached to root.</p>\n\n<p>Doing <code>ps-ef | grep</code> for the script returns the pid, and I could try <code>Process.kill pid</code> but wanted to know if there are better options. </p>\n\n<p>I don't have the option at this moment of modifying how the script is executed as it is part of an inherited library.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "activesupport"], "comments": [{"owner": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 1, "creation_date": 1493210671, "post_id": 43633997, "comment_id": 74317073, "body": "Out of curiosity, why do you care about the implementation of the <code>where</code> method?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493211038, "post_id": 43633997, "comment_id": 74317377, "body": "Out of curiosity, why do you care about why coffee man cares about the implementation of the <code>where</code> method?"}, {"owner": {"reputation": 81, "user_id": 7815454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzYyr.jpg?s=128&g=1", "display_name": "coffee man", "link": "https://stackoverflow.com/users/7815454/coffee-man"}, "edited": false, "score": 0, "creation_date": 1493216790, "post_id": 43633997, "comment_id": 74322298, "body": "Out of curiosity, why do you care about why MrDanA cares about why I care about the implementation of the <code>where</code> method? :)"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 1, "creation_date": 1493218495, "post_id": 43633997, "comment_id": 74323719, "body": "(Batman voice) It&#39;s not what MrDana cares about that defines you. But how you care about what CoffeeMan cares about when TomLord cares about it!"}, {"owner": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 1, "creation_date": 1493218700, "post_id": 43633997, "comment_id": 74323902, "body": "@bkunzi01 I like it."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 7815454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzYyr.jpg?s=128&g=1", "display_name": "coffee man", "link": "https://stackoverflow.com/users/7815454/coffee-man"}, "edited": false, "score": 0, "creation_date": 1493216521, "post_id": 43634577, "comment_id": 74322071, "body": "Thank you for your answer. May I know why <code>User.where -&gt; User.all.where</code>? Yes as you pointed out I thought delegate is like alias. Based on this <a href=\"https://apidock.com/rails/Module/delegate\" rel=\"nofollow noreferrer\">document</a> delegate to: option specifies the target object. :all is object? It looks like class method. I still cannot understand how the system chain the method like <code>User.all.where</code> Isn&#39;t it because of delegate? Should I check the other part?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 81, "user_id": 7815454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzYyr.jpg?s=128&g=1", "display_name": "coffee man", "link": "https://stackoverflow.com/users/7815454/coffee-man"}, "edited": false, "score": 0, "creation_date": 1493216870, "post_id": 43634577, "comment_id": 74322383, "body": "Remember that in ruby, <i>everything</i> is an object. Even methods are objects (<a href=\"https://ruby-doc.org/core/Method.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core/Method.html</a>)!!! Rather than getting hung up on the word &quot;object&quot; here, just think of it as &quot;delegating <code>where</code> to the response of <code>all</code>&quot;, or in other words <code>User.where == User.all.where</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 81, "user_id": 7815454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzYyr.jpg?s=128&g=1", "display_name": "coffee man", "link": "https://stackoverflow.com/users/7815454/coffee-man"}, "edited": false, "score": 0, "creation_date": 1493216977, "post_id": 43634577, "comment_id": 74322481, "body": "This is, of course, different to an <i>alias</i>. If this were an alias, not a delegation, then it would indeed be <code>User.where == User.all</code>. But that&#39;s not the case here."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 4, "last_activity_date": 1493212426, "last_edit_date": 1493212426, "creation_date": 1493210583, "answer_id": 43634577, "question_id": 43633997, "link": "https://stackoverflow.com/questions/43633997/how-activerecord-calls-where/43634577#43634577", "title": "How ActiveRecord calls &#39;where&#39;?", "body": "<blockquote>\n  <p>I don't understand this part. Why it goes to <code>all</code>?</p>\n</blockquote>\n\n<p>Because:</p>\n\n<pre><code>User.where(id: 1)\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>User.all.where(id: 1)\n</code></pre>\n\n<p>This delegation is to simplify the API, by adding an implicit call to <code>all</code> when none is explicitly made.</p>\n\n<blockquote>\n  <p>How does it get back to <code>where</code> (relation/query_methods.rb)?</p>\n</blockquote>\n\n<p>Remember that this was a <em>delegation</em>, not an alias. So, since:</p>\n\n<pre><code>User.all\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>User.default_scoped\n</code></pre>\n\n<p>This means that, effectively, this is the method chain being constructed:</p>\n\n<pre><code>User.where\n--&gt; User.all.where\n--&gt; User.default_scoped.where\n</code></pre>\n\n<p>And since <code>User.default_scoped</code> is a <code>User::ActiveRecord_Relation</code> object, its definition of <code>#where</code> is indeed defined in <code>rails/activerecord/lib/active_record/relation/query_methods.rb</code>, as:</p>\n\n<pre><code>def where(opts = :chain, *rest)\n  if :chain == opts\n    WhereChain.new(spawn)\n  elsif opts.blank?\n    self\n  else\n    spawn.where!(opts, *rest)\n  end\nend\n</code></pre>\n\n<p>...But this is only the beginning of the story. We are still quite a way off constructing the actual SQL for the query.</p>\n\n<p><a href=\"http://patshaughnessy.net/2014/9/17/20000-leagues-under-activerecord\" rel=\"nofollow noreferrer\">Here is a series of blog posts</a> that dive deeper, if you're interested - but I think this goes beyond the scope of a single StackOverflow answer.</p>\n"}], "owner": {"reputation": 81, "user_id": 7815454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzYyr.jpg?s=128&g=1", "display_name": "coffee man", "link": "https://stackoverflow.com/users/7815454/coffee-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 43634577, "answer_count": 1, "score": -2, "last_activity_date": 1493212426, "creation_date": 1493209105, "question_id": 43633997, "link": "https://stackoverflow.com/questions/43633997/how-activerecord-calls-where", "title": "How ActiveRecord calls &#39;where&#39;?", "body": "<p>Could you let me know how Active Record calls 'where' when I execute <code>User.where(id: 1)</code>?</p>\n\n<p>I'm checking Active Record's functionality to read the source code and stop the process by pry.\nI can see when I execute <code>User.where(id: 1)</code>, the process goes to\n<code>rails/activerecord/lib/active_record/querying.rb</code></p>\n\n<pre><code>delegate :select, :group, :order, :except, :reorder, :limit, :offset, :joins, :left_joins, :left_outer_joins, :or,\n         :where, :rewhere, :preload, :eager_load, :includes, :from, :lock, :readonly,\n         :having, :create_with, :distinct, :references, :none, :unscope, :merge, to: :all\n</code></pre>\n\n<p>'where' is delegated to :all.\nThus it goes to\n<code>rails/activerecord/lib/active_record/scoping/named.rb</code></p>\n\n<pre><code>def all\n  if current_scope\n   current_scope.clone\n  else\n    default_scoped\n  end\nend\n</code></pre>\n\n<p>I don't understand this part. Why it goes to all?\ndelegate can be set to class method? I though it can be delegated to class variables, instance variables.</p>\n\n<p>after default_scope in scoping/named.rb all method, the process goes to <code>rails/activerecord/lib/active_record/relation/query_methods.rb</code></p>\n\n<pre><code>def where(opts = :chain, *rest)\n  if :chain == opts\n    WhereChain.new(spawn)\n  elsif opts.blank?\n    self\n  else\n    spawn.where!(opts, *rest)\n  end\nend\n</code></pre>\n\n<p>Why? Isn't <code>where</code> delegated to <code>:all</code>? How does it get back to <code>where</code>(relation/query_methods.rb)?</p>\n"}, {"tags": ["ruby", "api", "canvas", "canvas-lms"], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 3945638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a233a0e9c49bd63f7ac434dd629f495b?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/3945638/nathan"}, "reply_to_user": {"reputation": 792, "user_id": 2332059, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/c60f8681d0e5a7007ad09a3d1433d18c?s=128&d=identicon&r=PG", "display_name": "Manikandan", "link": "https://stackoverflow.com/users/2332059/manikandan"}, "edited": false, "score": 0, "creation_date": 1494359084, "post_id": 43825041, "comment_id": 74792109, "body": "It may be that the user that your token belongs to doesn&#39;t have the correct permissions to get all of the courses.  Are you able to see all of the courses in the UI for the user that issued the token?"}, {"owner": {"reputation": 792, "user_id": 2332059, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/c60f8681d0e5a7007ad09a3d1433d18c?s=128&d=identicon&r=PG", "display_name": "Manikandan", "link": "https://stackoverflow.com/users/2332059/manikandan"}, "edited": false, "score": 0, "creation_date": 1494391632, "post_id": 43825041, "comment_id": 74802020, "body": "Yes, i create the token for admin"}], "tags": [], "owner": {"reputation": 176, "user_id": 3945638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a233a0e9c49bd63f7ac434dd629f495b?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/3945638/nathan"}, "is_accepted": false, "score": 1, "last_activity_date": 1494102206, "creation_date": 1494102206, "answer_id": 43825041, "question_id": 43633947, "link": "https://stackoverflow.com/questions/43633947/canvas-lms-rest-api-export-the-data/43825041#43825041", "title": "Canvas lms rest API export the data", "body": "<p>You will want to use the <a href=\"https://canvas.instructure.com/doc/api/accounts.html#method.accounts.courses_api\" rel=\"nofollow noreferrer\">List active courses in an account</a> endpoint to get all of the courses. Once you have the course ids you can iterate over that to retrieve the rest of the data.</p>\n"}], "owner": {"reputation": 792, "user_id": 2332059, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/c60f8681d0e5a7007ad09a3d1433d18c?s=128&d=identicon&r=PG", "display_name": "Manikandan", "link": "https://stackoverflow.com/users/2332059/manikandan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494102206, "creation_date": 1493208962, "question_id": 43633947, "link": "https://stackoverflow.com/questions/43633947/canvas-lms-rest-api-export-the-data", "title": "Canvas lms rest API export the data", "body": "<p>I need to export the data from canvas lms, i followed <a href=\"https://canvas.instructure.com/doc/api/\" rel=\"nofollow noreferrer\">Canvas API</a> and create the token id. Now i can access the web api and got response \nhere my problem was i create the token id for admin user and i need to get all courses (api/v1/courses/) but unfortunately enrolled courses only return. \ni need to do same for all assignment, quiz by date.</p>\n\n<p>Under my knowledge for understanding canvas lms api document there is no way to get the data by created date and also not possible to get data without restriction.</p>\n\n<p>Could you please guide me is it possible way to get all courses without restriction and also get data by created_date like once i send the timestamp it will return after created the data.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "markdown"], "comments": [{"owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "edited": false, "score": 0, "creation_date": 1493208140, "post_id": 43633350, "comment_id": 74315045, "body": "Are you sure <code>params[:title]</code> and <code>params[:body]</code> is returning any content? How is your form coded?"}, {"owner": {"reputation": 109, "user_id": 5188181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-h4VShzd67XE/AAAAAAAAAAI/AAAAAAAAA7Q/1rLmQS3qnKU/photo.jpg?sz=128", "display_name": "Prithviraj Sukale", "link": "https://stackoverflow.com/users/5188181/prithviraj-sukale"}, "reply_to_user": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "edited": false, "score": 0, "creation_date": 1493208414, "post_id": 43633350, "comment_id": 74315239, "body": "updated with my form"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1493208603, "post_id": 43633350, "comment_id": 74315386, "body": "First you might need to add a presence validation on <code>body</code> in <code>Post</code> model if you don&#39;t want posts to be created with blank body content."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1493208624, "post_id": 43633350, "comment_id": 74315406, "body": "Same for the <code>title</code>."}, {"owner": {"reputation": 109, "user_id": 5188181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-h4VShzd67XE/AAAAAAAAAAI/AAAAAAAAA7Q/1rLmQS3qnKU/photo.jpg?sz=128", "display_name": "Prithviraj Sukale", "link": "https://stackoverflow.com/users/5188181/prithviraj-sukale"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1493208910, "post_id": 43633350, "comment_id": 74315628, "body": "@JagdeepSingh I made those changes and modified post.rb now the markdown function throws an error &quot;wrong argument type nil (expected String)&quot; somehow params hash is not returning a string"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1493208992, "post_id": 43633350, "comment_id": 74315685, "body": "Can you print the output of <code>params</code> in the first line on <code>create</code> action?"}], "answers": [{"tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": true, "score": 1, "last_activity_date": 1493209216, "creation_date": 1493209216, "answer_id": 43634035, "question_id": 43633350, "link": "https://stackoverflow.com/questions/43633350/create-creates-empty-objects/43634035#43634035", "title": "create creates empty objects", "body": "<p>It should be like this:</p>\n\n<pre><code>@post=current_user.posts.create(:title =&gt; params[:post][:title],:body =&gt; markdown(params[:post][:body])    \n</code></pre>\n\n<p>Also you probably would like to check <a href=\"http://api.rubyonrails.org/classes/ActionController/StrongParameters.html\" rel=\"nofollow noreferrer\">Rails StrongParam</a> for enhanced security.</p>\n"}], "owner": {"reputation": 109, "user_id": 5188181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-h4VShzd67XE/AAAAAAAAAAI/AAAAAAAAA7Q/1rLmQS3qnKU/photo.jpg?sz=128", "display_name": "Prithviraj Sukale", "link": "https://stackoverflow.com/users/5188181/prithviraj-sukale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 43634035, "answer_count": 1, "score": 0, "last_activity_date": 1493209216, "creation_date": 1493207301, "last_edit_date": 1493208394, "question_id": 43633350, "link": "https://stackoverflow.com/questions/43633350/create-creates-empty-objects", "title": "create creates empty objects", "body": "<p>I am trying to  render markdown in :body before saving to database . here 's my create method </p>\n\n<pre><code>def create\n\n@post=current_user.posts.create(:title =&gt; params[:title],:body =&gt; markdown(params[:body])    \nredirect_to(post_path(@post))\nend\n</code></pre>\n\n<p>and here is my render markdown method</p>\n\n<pre><code>def markdown(text)\noptions = {\n  filter_html:     true,\n  hard_wrap:       true,\n  link_attributes: { rel: 'nofollow', target: \"_blank\" },\n  space_after_headers: true,\n  fenced_code_blocks: true\n}\n\nextensions = {\n  autolink:           true,\n  superscript:        true,\n  disable_indented_code_blocks: true\n}\n\nrenderer = Redcarpet::Render::HTML.new(options)\nmarkdown = Redcarpet::Markdown.new(renderer, extensions)\n\nmarkdown.render(text).html_safe\nend\n</code></pre>\n\n<p>but when I enter data and submit empty objects are genearated.</p>\n\n<pre><code>irb(main):001:0&gt; Post.last\nPost Load (0.1ms)  SELECT  \"posts\".* FROM \"posts\" ORDER BY \n\"posts\".\"id\" DESC LIMIT ?  [[\"LIMIT\", 1]]\n=&gt; #&lt;Post id: 7, title: nil, body: nil, created_at: \"2017-04-26 \n11:23:12\", updated_at: \"2017-04-26 11:23:12\", user_id: 1&gt;\n</code></pre>\n\n<p>my form :- </p>\n\n<pre><code>= simple_form_for @post do |f|\n =f.input :title \n =f.input :body\n =f.button :submit\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "http", "web-push", "vapid"], "answers": [{"comments": [{"owner": {"reputation": 917, "user_id": 452208, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fe59157a7e38b07701259dcdd6fb60ab?s=128&d=identicon&r=PG", "display_name": "CLod", "link": "https://stackoverflow.com/users/452208/clod"}, "edited": false, "score": 0, "creation_date": 1526436565, "post_id": 43779434, "comment_id": 87739465, "body": "hi, I&#39;m trying to implement a similar thing (<a href=\"https://stackoverflow.com/questions/50361320/service-worker-push-notification-with-vapid-prv-pub-keys\" title=\"service worker push notification with vapid prv pub keys\">stackoverflow.com/questions/50361320/&hellip;</a>). one point I can&#39;t understand is if I have to refresh the browser subscription registration, or once the browser allows notifications and sends the subscription, that&#39;s all is needed to send notifications indefinitely? I&#39;m getting 401 NotRegistered after 24 hrs or so"}], "tags": [], "owner": {"reputation": 1584, "user_id": 3255098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8hsvD.png?s=128&g=1", "display_name": "Wikiti", "link": "https://stackoverflow.com/users/3255098/wikiti"}, "is_accepted": true, "score": 1, "last_activity_date": 1493891292, "creation_date": 1493891292, "answer_id": 43779434, "question_id": 43632403, "link": "https://stackoverflow.com/questions/43632403/web-push-with-vapid-400-401-unauthorized-registration/43779434#43779434", "title": "Web Push with VAPID: 400/401 Unauthorized Registration", "body": "<p>After changing the expiration time from 24 hours (default) to 12 hours, it now works properly:</p>\n\n<pre><code>Webpush.payload_send(\n  message: \"Hi!\",\n  endpoint: \"...\",\n  p256dh: \"...\",\n  auth: \"...\",\n  vapid: {\n    subject: \"...\",\n    public_key: ENV['VAPID_PUBLIC_KEY'],\n    private_key: ENV['VAPID_PRIVATE_KEY'],\n    exp: 12.hours\n  }\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 1637302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ebd1b69e198e08c80786e8b2270d6cb?s=128&d=identicon&r=PG", "display_name": "David Parish", "link": "https://stackoverflow.com/users/1637302/david-parish"}, "is_accepted": false, "score": 1, "last_activity_date": 1510179499, "creation_date": 1510179499, "answer_id": 47190674, "question_id": 43632403, "link": "https://stackoverflow.com/questions/43632403/web-push-with-vapid-400-401-unauthorized-registration/47190674#47190674", "title": "Web Push with VAPID: 400/401 Unauthorized Registration", "body": "<p>It looks like the library has changed, this is how I fixed it:</p>\n\n<pre><code>def send_push(payload, endpoint, p256dh, auth)\n  Webpush.payload_send(\n    message: payload,\n    endpoint: endpoint,\n    p256dh: p256dh,\n    auth: auth,\n    vapid: {\n      public_key: '...',\n      private_key: '...',\n      expiration: 12 * 60 * 60\n    }\n  )\nend\n</code></pre>\n\n<p>Notice the key is expiration not exp and it's the expire time in seconds.</p>\n"}], "owner": {"reputation": 1584, "user_id": 3255098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8hsvD.png?s=128&g=1", "display_name": "Wikiti", "link": "https://stackoverflow.com/users/3255098/wikiti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2415, "favorite_count": 1, "accepted_answer_id": 43779434, "answer_count": 2, "score": 7, "last_activity_date": 1510179499, "creation_date": 1493204749, "last_edit_date": 1495542363, "question_id": 43632403, "link": "https://stackoverflow.com/questions/43632403/web-push-with-vapid-400-401-unauthorized-registration", "title": "Web Push with VAPID: 400/401 Unauthorized Registration", "body": "<p>First of all, I've already check these questions, without any luck:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/40801235/web-push-api-chrome-returning-unauthorized-registration\">Web Push API Chrome, returning &quot;Unauthorized Registration&quot;</a></li>\n<li><a href=\"https://stackoverflow.com/questions/39336523/webpushvapid-request-fails-with-400-unauthorizedregistration\">[WebPush][VAPID] Request fails with 400 UnauthorizedRegistration</a></li>\n</ul>\n\n<p>I am trying to implement web push notifications for a web app that I'm working on. Currently, I've achieved the following goals:</p>\n\n<ul>\n<li>Create a VAPID keys pair (<a href=\"https://github.com/MartijnDwars/web-push/blob/master/doc/VAPID.md#generate-a-keypair\" rel=\"noreferrer\">with this guide</a>).</li>\n<li>Register a service worker (only a service worker, I think that <code>manifest.json</code> is no longer required).</li>\n<li>Subscribe the user to the server (subscription data will be stored in the database).</li>\n<li>Send a push notification with <a href=\"https://github.com/zaru/webpush\" rel=\"noreferrer\">webpush</a> gem.</li>\n</ul>\n\n<p>After setting it up, everything works fine (on localhost and on a remote machine). However, after some hours (between 12 and 24 hours), the notifications stop working on the remote machine (localhost works perfectly). After that time, the following errors are thrown when sending the push notifications from the server side (Rails):</p>\n\n<ul>\n<li><strong>Chrome:</strong> <code>UnauthorizedRegistration 400</code> (no extra info).</li>\n<li><strong>Firefox:</strong> <code>{\"code\": 401, \"errno\": 109, \"error\": \"Unauthorized\", \"more_info\": \"http://autopush.readthedocs.io/en/latest/http.html#error-codes\", \"message\": \"Request did not validate Invalid bearer token: Auth &gt; 24 hours in the future\"}</code></li>\n</ul>\n\n<p>After this error appeared, I tried to unsubscribe and resubscribe the user on every page visit. The subscription field on the db is updated after the resubscription is done, but the error is still being thrown, with the same information. No errors are thrown on the browser, nor service worker.</p>\n\n<p>I've tried to force the resubscription manually by placing some js code on the Chrome Dev Tools console, unregistering the service worker, and reseting the push notification permissions, but nothing solves the error. I can only fix this error by <strong><s>creating a new VAPID key pair</s> rebooting the remote machine</strong>. After crebooting the machine, I've another 12-24 hours before it fails again. Also, the notifications send process don't work neither on <em>rails server (nginx + unicorn)</em>, <em>rails console</em>, nor <em>irb</em>.</p>\n\n<p>I don't know where to go from now. Even worst, I can only try fixes once a day, since it'll break every 24 hours. I think I need some external help with a fresh vision of the problem. Am I missing something? Is there any OS dependency that VAPID uses and needs to be restarted? </p>\n\n<hr>\n\n<p>Here are some code snippets that may be useful. Sorry for the mess, but I've done tons of modifications to try making it work.</p>\n\n<p>Service worker registration:</p>\n\n<pre><code>serviceWorkerRegistration = null\n\nregisterServiceWorker = -&gt;\n  if 'serviceWorker' of navigator &amp;&amp; 'PushManager' of window\n    navigator.serviceWorker.register(\"&lt;js url&gt;\").then (reg) -&gt;\n      serviceWorkerRegistration = reg\n      checkSubscription()\n\n    .catch (error) -&gt;\n      console.warn 'Service Worker Error', error\n\n  else\n    console.warn 'Push messaging is not supported'\n\nregisterServiceWorker()\n</code></pre>\n\n<p>User subscription and resubscription</p>\n\n<pre><code># Refresh user subscription (unsub + sub)\nrefreshUserSubscription = -&gt;\n  unsubscribeUser(subscribeUser)\n\n# Subscribe the user to the push server\nsubscribeUser = -&gt;\n  return if !serviceWorkerRegistration\n\n  # Subscribe\n  serviceWorkerRegistration.pushManager.subscribe\n    userVisibleOnly: true\n    applicationServerKey: urlB64ToUint8Array('...')\n\n  .then (subscription) -&gt;\n    pushSubscription subscription\n\n  .catch (err) -&gt;\n    console.warn 'Failed to subscribe the user: ', err\n\n# Unsubscribe user\nunsubscribeUser = (callback)-&gt;\n  return unless serviceWorkerRegistration\n\n  serviceWorkerRegistration.pushManager.getSubscription().then (subscription) -&gt;\n    if subscription\n      subscription.unsubscribe().then(callback)\n    else\n      callback()\n  .catch (error) -&gt;\n    console.warn 'Error unsubscribing', error\n\n# Push subscription to the web app\npushSubscription = (subscription) -&gt;\n  data = if subscription then subscription.toJSON() else {}\n  $.post \"&lt;back-end endpoint&gt;\", subscription: data\n\n# Fetch current subscription, and push it.\ncheckSubscription = () -&gt;\n  serviceWorkerRegistration.pushManager.getSubscription()\n    .then (subscription) -&gt;\n      pushSubscription(subscription)\n\n# I think that this should be done with promises instead of a simple timeout.\nsetTimeout refreshUserSubscription, 1000\n</code></pre>\n\n<p>Service worker:</p>\n\n<pre><code>self.addEventListener 'push', (event) -&gt;\n  title = \"Example\"\n  options = { body: \"Example\" }\n\n  notificationPromise = self.registration.showNotification(title, options)\n  event.waitUntil(notificationPromise)\n</code></pre>\n\n<p>Web push call:</p>\n\n<pre><code>webpush = WebPush.new({ endpoint: '...', keys: { p256dh: '...', auth: '...' } })\nwebpush.set_vapid_details(\n  \"mailto:#{CONTACT_EMAIL}\",\n  \"&lt;base64 public key&gt;\",\n  \"&lt;base64 private key&gt;\"\n)\nwebpush.send_notification(\"foo\")\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1493205069, "post_id": 43632266, "comment_id": 74312798, "body": "examples are clear for me, but what does <code>that occurs more than once</code> mean?"}, {"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1493205107, "post_id": 43632266, "comment_id": 74312828, "body": "yes I wondered the same, isn&#39;t the second example wrong by that statement?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1493205118, "post_id": 43632266, "comment_id": 74312840, "body": "&quot;To prevent confusion&quot;, you should simply say &quot;smallest number&quot;."}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1493205178, "post_id": 43632266, "comment_id": 74312896, "body": "@Stefan Hi. How would you word that exactly? I dont mind an edit."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1493205345, "post_id": 43632266, "comment_id": 74313032, "body": "Why <code>min(x)</code> is not possible.?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1493205364, "post_id": 43632266, "comment_id": 74313052, "body": "@Sylar I&#39;d replace largest / highest with smallest / lowest and it should be clear without further explanation. The fact that you treat <code>1</code> as the highest number in your project is irrelevant to the question."}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1493205395, "post_id": 43632266, "comment_id": 74313074, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 I will not know the value of <code>n</code>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493207217, "post_id": 43632266, "comment_id": 74314401, "body": "If you want just the number of such elements: <code>arr.count { |i| i == arr.min }</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1493207368, "post_id": 43632266, "comment_id": 74314507, "body": "@sagarpandya82: You could move <code>arr.min</code> out of the block to avoid calling it <code>n</code> times."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 3, "creation_date": 1493207398, "post_id": 43632266, "comment_id": 74314536, "body": "&quot;To prevent confusion, the smallest number is the highest&quot;. Now, that prevented confusion! :)"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1493207779, "post_id": 43632266, "comment_id": 74314792, "body": "@EricDuminil good idea about <code>arr.min</code> and agreed about the confusion."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1493208377, "post_id": 43632266, "comment_id": 74315210, "body": "on second thoughts no need for the block <code>arr.count(arr.min)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493209077, "post_id": 43632357, "comment_id": 74315761, "body": "I think most would go with this; it&#39;s a shame it&#39;s not an answer in the question for which this question is a duplicate."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1566664902, "last_edit_date": 1566664902, "creation_date": 1493204650, "answer_id": 43632357, "question_id": 43632266, "link": "https://stackoverflow.com/questions/43632266/how-to-find-smallest-numbers-in-an-array/43632357#43632357", "title": "How to find smallest numbers in an array", "body": "<p>What about this?</p>\n\n<pre><code>a = [1, 1, 2, 3, 3, 4]\nmin = a.min\na.select { |i| i == min }\n =&gt; [1, 1]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1493206317, "post_id": 43632381, "comment_id": 74313772, "body": "Whilst this code snippet is welcome, and may provide some help, it would be <a href=\"//meta.stackexchange.com/q/114762\">greatly improved if it included an explanation</a> of <i>how</i> it addresses the question.  Without that, your answer has much less educational value - remember that you are answering the question for readers in the future, not just the person asking now!  Please <a href=\"https://stackoverflow.com/posts/43632381/edit\">edit</a> your answer to add explanation, and give an indication of what limitations and assumptions apply."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493208436, "post_id": 43632381, "comment_id": 74315258, "body": "Using this thinking we can do <code>Array.new(arr.count(arr.min), arr.min)</code>"}, {"owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "edited": false, "score": 0, "creation_date": 1493210408, "post_id": 43632381, "comment_id": 74316861, "body": "You could, but then you would traverse the array 3 times when 2 suffice."}], "tags": [], "owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "is_accepted": false, "score": 1, "last_activity_date": 1493210450, "last_edit_date": 1493210450, "creation_date": 1493204706, "answer_id": 43632381, "question_id": 43632266, "link": "https://stackoverflow.com/questions/43632266/how-to-find-smallest-numbers-in-an-array/43632381#43632381", "title": "How to find smallest numbers in an array", "body": "<p>Here's one way to solve the problem:</p>\n\n<ol>\n<li>Find the smallest number</li>\n<li>Count how many times it appears</li>\n<li>Generate an array with the solution instead of selecting elements in the input</li>\n</ol>\n\n<p>Snippet:</p>\n\n<pre><code>input = [1,1,2,3,3,4]\nhighest = input.min\n[highest] * input.count(highest)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1493210963, "last_edit_date": 1493210963, "creation_date": 1493205477, "answer_id": 43632670, "question_id": 43632266, "link": "https://stackoverflow.com/questions/43632266/how-to-find-smallest-numbers-in-an-array/43632670#43632670", "title": "How to find smallest numbers in an array", "body": "<p>Also, you can use <code>take_while</code>:</p>\n\n<pre><code>sorted = a.sort\nsorted.take_while { |e| e == sorted[0] }\n=&gt; [1, 1]\n</code></pre>\n\n<p>Other possible way:</p>\n\n<pre><code>a = [1, 1, 2, 3, 3, 4]\nArray.new(*a.each_with_object(Hash.new(0)) {|e, acc| acc[e] += 1}.min.reverse)\n=&gt; [1, 1]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493207610, "post_id": 43632761, "comment_id": 74314691, "body": "Slight variations <code>a.group_by(&amp;:itself)[a.min]</code> and <code>a.group_by(&amp;:itself).fetch(a.min)</code>"}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 4, "last_activity_date": 1493205742, "creation_date": 1493205742, "answer_id": 43632761, "question_id": 43632266, "link": "https://stackoverflow.com/questions/43632266/how-to-find-smallest-numbers-in-an-array/43632761#43632761", "title": "How to find smallest numbers in an array", "body": "<p>Another way:</p>\n\n<pre><code>a = [1,1,2,3,3,4]\n\na.group_by(&amp;:itself).min.last\n</code></pre>\n"}], "owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4173, "favorite_count": 0, "closed_date": 1493208384, "accepted_answer_id": 43632357, "answer_count": 4, "score": 1, "last_activity_date": 1566664902, "creation_date": 1493204385, "last_edit_date": 1493208171, "question_id": 43632266, "link": "https://stackoverflow.com/questions/43632266/how-to-find-smallest-numbers-in-an-array", "closed_reason": "Duplicate", "title": "How to find smallest numbers in an array", "body": "<p>I need to return the smallest numbers (can be more than one) that occur in an array.</p>\n\n<pre><code>given [1,1,2,3,3,4]\nexpected [1,1]\n\ngiven [8,8,2,3]\nexpected [2]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 430, "user_id": 1010873, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a13b3f54c622f4e7577eccf245f2578?s=128&d=identicon&r=PG", "display_name": "MarkJL", "link": "https://stackoverflow.com/users/1010873/markjl"}, "edited": false, "score": 1, "creation_date": 1493204105, "post_id": 43632091, "comment_id": 74312170, "body": "I also told my duck all about it but she is being very quiet about the matter."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 2, "creation_date": 1493204132, "post_id": 43632091, "comment_id": 74312189, "body": "There is too long, could you add the TL;DR version on top of the question?"}], "answers": [{"comments": [{"owner": {"reputation": 430, "user_id": 1010873, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a13b3f54c622f4e7577eccf245f2578?s=128&d=identicon&r=PG", "display_name": "MarkJL", "link": "https://stackoverflow.com/users/1010873/markjl"}, "edited": false, "score": 0, "creation_date": 1493219806, "post_id": 43637957, "comment_id": 74324792, "body": "the proviso being that your aliased foreign keys have the alias <code>model_name_id</code>, of course."}], "tags": [], "owner": {"reputation": 430, "user_id": 1010873, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a13b3f54c622f4e7577eccf245f2578?s=128&d=identicon&r=PG", "display_name": "MarkJL", "link": "https://stackoverflow.com/users/1010873/markjl"}, "is_accepted": false, "score": 0, "last_activity_date": 1493279977, "last_edit_date": 1493279977, "creation_date": 1493219083, "answer_id": 43637957, "question_id": 43632091, "link": "https://stackoverflow.com/questions/43632091/rails-5-0-1-postgresql-aliased-foreign-keys-and-aliased-tables-with-includes/43637957#43637957", "title": "Rails 5.0.1, postgresql - aliased foreign keys and aliased tables with includes fails", "body": "<p>So I made a module to hack around the issue, feel free to use in your horribly obfuscated DBs as you wish... prepare for hackiness:</p>\n\n<pre><code>module AliasedAttrsHelper\n  def find_by_includes_aliased(id_col, id_match, *associations)\n    # get foreign key column name\n    class_name = self.to_s\n    fk_column = class_name[0]\n    class_name.split('').each_with_index do |char,i| \n      next if i == 0 \n      fk_column += char.match(/[A-Z]/) ? \"_#{char}\" : char\n    end\n    fk_column += '_id'\n    fk_column.downcase!\n    # make id string and table name\n    id_column = self.attribute_aliases[id_col.to_s]\n    id_table = self.table_name\n    # make the set of associations to query on\n    associations.map! do |ass|\n      name = ass.to_s.singularize.capitalize.constantize\n      { class: name, table: name.table_name, fk: name.new.attribute_aliases[fk_column] }\n    end\n    # perform the composite query transaction\n    klass = \"\"\n    ActiveRecord::Base.transaction do\n      klass = self.find_by_sql(\"SELECT c.* FROM #{id_table} AS c WHERE c.#{id_column} = '#{id_match}'\")[0]\n      associations.each do |ass|\n        ass[:class].find_by_sql(\"SELECT b.* FROM #{ass[:table]} AS b JOIN #{id_table} as c ON c.id = b.#{ass[:fk]} WHERE c.#{id_column} = '#{id_match}'\")\n      end\n    end\n    klass\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 430, "user_id": 1010873, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a13b3f54c622f4e7577eccf245f2578?s=128&d=identicon&r=PG", "display_name": "MarkJL", "link": "https://stackoverflow.com/users/1010873/markjl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493279977, "creation_date": 1493203883, "last_edit_date": 1493204780, "question_id": 43632091, "link": "https://stackoverflow.com/questions/43632091/rails-5-0-1-postgresql-aliased-foreign-keys-and-aliased-tables-with-includes", "title": "Rails 5.0.1, postgresql - aliased foreign keys and aliased tables with includes fails", "body": "<p>tl;dr: </p>\n\n<p>Database obfuscation of all tables and columns (including foreign keys) is causing a problem in obtaining a result in eager loading of associated models from postresql database using all rails queries. <code>includes</code>, <code>joins</code>, etc return errors rather than what they should.</p>\n\n<p>begin:</p>\n\n<p>I have a completely obfuscated database, every table and column is named using a 20 character random string of latin letters, including foreignkeys.\nTypical migrations for has_many relations is:</p>\n\n<pre><code>class CreateModelOne &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :abcdfeghijklmnopqrst do |t|\n      t.boolean :bcdfeghijklmnopqrstu, null: true\n      t.float :cdfeghijklmnopqrstuv, null: true, default: 0\n      t.timestamps\n    end\n  end\nend\n\nclass CreateModelTwo &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :dfeghijklmnopqrstuvx do |t|\n      t.date :feghijklmnopqrstuvxy, null: true\n      t.time :eghijklmnopqrstuvxyz, null: true\n      t.integer :ghijklmnopqrstuvxyza\n      t.timestamps\n    end\n    add_foreign_key :dfeghijklmnopqrstuvx, :abcdfeghijklmnopqrst, column: :ghijklmnopqrstuvxyza\n  end\nend\n</code></pre>\n\n<p>In the model files I have aliased the relations:</p>\n\n<pre><code>class ModelTwo &lt; ApplicationRecord\n  alias_attribute :model_one_id, :ghijklmnopqrstuvxyza\nend\n</code></pre>\n\n<p>when I want to eager load <code>ModelTwo</code>s associated with <code>ModelOne</code> I am trying to use the standard <code>includes</code> method:</p>\n\n<pre><code>@model_one = ModelOne.includes(:model_two).find(particular_model_one_id)\n</code></pre>\n\n<p>This is yielding the error:</p>\n\n<pre><code>NoMethodError: undefined method `association' for nil:NilClass\n    from /home/mark/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.2/lib/active_record/associations/preloader/association.rb:67:in `block in associated_records_by_owner'\n    from /home/mark/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.2/lib/active_record/core.rb:349:in `init_with'\n    from /home/mark/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.2/lib/active_record/persistence.rb:69:in `instantiate'\n    from /home/mark/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.2/lib/active_record/querying.rb:50:in `block (2 levels) in find_by_sql'\n    from /home/mark/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.2/lib/active_record/result.rb:52:in `block in each'\n    from /home/mark/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.2/lib/active_record/result.rb:52:in `each'\n    from /home/mark/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.2/lib/active_record/result.rb:52:in `each'\n    from /home/mark/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.2/lib/active_record/querying.rb:50:in `map'\n    from /home/mark/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.2/lib/active_record/querying.rb:50:in `block in find_by_sql'\n    from /home/mark/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.2/lib/active_support/notifications/instrumenter.rb:21:in `instrument'\n    from /home/mark/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.2/lib/active_record/querying.rb:49:in `find_by_sql'\n    from /home/mark/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bullet-5.5.1/lib/bullet/active_record5.rb:25:in `find_by_sql'\n    from \n</code></pre>\n\n<p>This seems odd to me as running the queries individually works fine, as in:</p>\n\n<pre><code>ModelOne.find(particular_model_one_id)\n</code></pre>\n\n<p>returns the expected <code>ModelOne</code>, and</p>\n\n<pre><code>ModelTwo.where(model_one_id: particular_model_one_id)\n</code></pre>\n\n<p>returns the expected set of <code>ModelTwo</code>s. These produce the exact same <code>SELECT</code> queries to the DB as the <code>.includes</code> does.</p>\n\n<p>Having a look at the object returned by <code>ModelOne.includes(:model_two)</code> returns the query I would expect, along with the message:</p>\n\n<pre><code>ModelOne Load (2.3ms)  SELECT \"abcdfeghijklmnopqrst\".* FROM \"abcdfeghijklmnopqrst\"\n  ModelTwo Load (2.6ms)  SELECT \"dfeghijklmnopqrstuvx\".* FROM \"dfeghijklmnopqrstuvx\" WHERE \"dfeghijklmnopqrstuvx\".\"ghijklmnopqrstuvxyza\" IN (4, 1, 2, 3, 8, 5, 7, 6, 9, 10, 11, 14, 12, 13, 18, 15, 17, 16, 19, 20, 21, 22, 28, 23, 25, 24, 27, 26, 29, 30, 31, 34, 32, 33, 38, 35, 37, 36, 39, 40, 41, 42, 48, 43, 45, 44, 47, 46, 49, 50, 51, 52, 57, 53, 55, 54, 58, 56)\n(Object doesn't support #inspect)\n</code></pre>\n\n<p>which I suppose also implies <code>(Object doesn't support #association)</code>.</p>\n\n<p>Disclaimer:</p>\n\n<p>I have read the related stackoverflow entries and the Rails issues on github, none of them appear address this particular issue, at least the attempts to implement the suggestions supplied within to do work.</p>\n\n<p>I have changed my application of adding a <code>foreign_key</code> to a direct <code>references</code> in the migrations which yields the exact same behaviour.</p>\n\n<p>I could, of course, write the proper queries to the database or not eager load the associated models but this seems inefficient wrt developer time as parsing the result from a hand written <code>JOIN</code> also needs to be handled and the (many more) real models have more than one column and more than one association.</p>\n"}, {"tags": ["ruby", "bash", "chef-infra", "chef-recipe"], "comments": [{"owner": {"reputation": 711, "user_id": 4283961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c967792d2323dedb7979df3ce42fc0e?s=128&d=identicon&r=PG&f=1", "display_name": "rusia.inc", "link": "https://stackoverflow.com/users/4283961/rusia-inc"}, "edited": false, "score": 0, "creation_date": 1493211126, "post_id": 43631073, "comment_id": 74317451, "body": "Its confusing to know why are you stuck here. So, why cant you call a custom resource there and in which you get all the files at the location using <code>Dir</code> and normally iterate and apply your ruby and bash methods. I really don&#39;t get any clue of your concern."}, {"owner": {"reputation": 1037, "user_id": 6812637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-QEVKvPalxzI/AAAAAAAAAAI/AAAAAAAAAA8/CSUfpoapG14/photo.jpg?sz=128", "display_name": "Navarro", "link": "https://stackoverflow.com/users/6812637/navarro"}, "edited": false, "score": 0, "creation_date": 1493214463, "post_id": 43631073, "comment_id": 74320328, "body": "Do you know beforehand the address from where you want to download the <code>zip</code> and the name of the file(s)? I mean, do you know beforehand the complete url from where the file will be downloaded?"}, {"owner": {"reputation": 107, "user_id": 5687948, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-rrihgTZCUAM/AAAAAAAAAAI/AAAAAAAAAVw/Fh9F0XHQGdY/photo.jpg?sz=128", "display_name": "Harish P C", "link": "https://stackoverflow.com/users/5687948/harish-p-c"}, "reply_to_user": {"reputation": 1037, "user_id": 6812637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-QEVKvPalxzI/AAAAAAAAAAI/AAAAAAAAAA8/CSUfpoapG14/photo.jpg?sz=128", "display_name": "Navarro", "link": "https://stackoverflow.com/users/6812637/navarro"}, "edited": false, "score": 0, "creation_date": 1493214888, "post_id": 43631073, "comment_id": 74320717, "body": "@Navarro : yes i know the urls where exactly it is picking the zip files , Even i am able to get the list of zips like below [ &quot;1.zip,2.zip,3.zip&quot;] But i need to iterate first with 1.zip then unzip and do other actions which i am not able to achive"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 5687948, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-rrihgTZCUAM/AAAAAAAAAAI/AAAAAAAAAVw/Fh9F0XHQGdY/photo.jpg?sz=128", "display_name": "Harish P C", "link": "https://stackoverflow.com/users/5687948/harish-p-c"}, "edited": false, "score": 0, "creation_date": 1493217571, "post_id": 43636820, "comment_id": 74322953, "body": "Thanks for the code, But this will work only for the known files in the website. In My scenario i do have files in the http may keep increases or decreases. Depends on the files on the website the resource should trigger the run."}, {"owner": {"reputation": 1037, "user_id": 6812637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-QEVKvPalxzI/AAAAAAAAAAI/AAAAAAAAAA8/CSUfpoapG14/photo.jpg?sz=128", "display_name": "Navarro", "link": "https://stackoverflow.com/users/6812637/navarro"}, "reply_to_user": {"reputation": 107, "user_id": 5687948, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-rrihgTZCUAM/AAAAAAAAAAI/AAAAAAAAAVw/Fh9F0XHQGdY/photo.jpg?sz=128", "display_name": "Harish P C", "link": "https://stackoverflow.com/users/5687948/harish-p-c"}, "edited": false, "score": 0, "creation_date": 1493218218, "post_id": 43636820, "comment_id": 74323450, "body": "You should specify this on your original question/comments, since what is understood from them is a different scenario.  For your particular case, I believe this is not what Chef is supposed to do. You can&#39;t reach an idempotent state where the number of files varies relying on an external source.  If you have a CI pipeline, maybe you can try to update there the attribute, but doing it &#39;all in chef&#39; doesn&#39;t seem a good idea to me. Also, the chef runs are meant to be periodical and not triggered on third party events (Number of files in the server changing)."}, {"owner": {"reputation": 107, "user_id": 5687948, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-rrihgTZCUAM/AAAAAAAAAAI/AAAAAAAAAVw/Fh9F0XHQGdY/photo.jpg?sz=128", "display_name": "Harish P C", "link": "https://stackoverflow.com/users/5687948/harish-p-c"}, "edited": false, "score": 0, "creation_date": 1493230163, "post_id": 43636820, "comment_id": 74331342, "body": "Thanks for your views. I am able to achieve it via accessing the http by checking source content of that file whenever its getting changed. But my question does not deals with the accessing/achieving the idem potency but i could not achieve the iteration with the code."}], "tags": [], "owner": {"reputation": 1037, "user_id": 6812637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-QEVKvPalxzI/AAAAAAAAAAI/AAAAAAAAAA8/CSUfpoapG14/photo.jpg?sz=128", "display_name": "Navarro", "link": "https://stackoverflow.com/users/6812637/navarro"}, "is_accepted": false, "score": 0, "last_activity_date": 1493216281, "creation_date": 1493216281, "answer_id": 43636820, "question_id": 43631073, "link": "https://stackoverflow.com/questions/43631073/chef-download-multiple-zip-files-from-websitehttp-and-do-some-basic-operatio/43636820#43636820", "title": "Chef - Download multiple zip files from website(HTTP) and do some basic operations", "body": "<p>Assuming you have a list of urls from where you want to download, you can have some attributes like:</p>\n\n<pre><code>default['your_cookbook']['files']['file_1'] = {\n  address: 'http://whatever.com/file1.zip',\n  name: 'file1.zip',\n  path: '/where/you/want/it/',\n  checksum: '12341234123412341234'\n}\ndefault['your_cookbook']['files']['file_2'] = {\n  address: 'http://whatever.com/file2.zip',\n  name: 'file2.zip',\n  path: '/where/you/want/it/',\n  checksum: '12341234123412341234'\n}\n</code></pre>\n\n<p>Then you can do this:</p>\n\n<pre><code>node['your_cookbook']['files'].each do |file|\n  remote_file file.name do\n    path \"/tmp/#{file.name}\"\n    source file.address\n    checksum file.checksum\n  end\n\n  execute \"extract_#{file.name}\" do\n    command \"unzip /tmp/#{file.name} -d #{file.path}#{file.name}\"\n    action :nothing\n    subscribe :run, \"remote_file[#{file.name}]\", :immediate\n  end\nend\n</code></pre>\n\n<p>I think this have the same functionality you need and avoid using custom resources in favor of the default ones, which are quite complete.</p>\n"}], "owner": {"reputation": 107, "user_id": 5687948, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-rrihgTZCUAM/AAAAAAAAAAI/AAAAAAAAAVw/Fh9F0XHQGdY/photo.jpg?sz=128", "display_name": "Harish P C", "link": "https://stackoverflow.com/users/5687948/harish-p-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1139, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493216281, "creation_date": 1493201197, "last_edit_date": 1493213954, "question_id": 43631073, "link": "https://stackoverflow.com/questions/43631073/chef-download-multiple-zip-files-from-websitehttp-and-do-some-basic-operatio", "title": "Chef - Download multiple zip files from website(HTTP) and do some basic operations", "body": "<p>I am writing a chef resource with a logic as mentioned with each steps</p>\n\n<ol>\n<li>Search for a 'zip' content from the http website and download it</li>\n<li>After downloading unzip the files and put it under a directory - for e.g /u01/var/</li>\n<li>Now here comes the tricky part - for each downloaded zip file i need\nto traverse through each file and do the same operation which is\napplicable to different zip files</li>\n</ol>\n\n<p>My Code - </p>\n\n<pre><code>require 'open-uri'\n    links =  open(patch_depot ,&amp;:read).to_s\n    out1=links.scan(/\\s*\\s*\"([^\"]*zip)\"/imu).flatten\n    patch_files = out1.select{ |i| i[/\\.zip$/]}\n    print patch_files\n     unless patch_files.length&gt;=1\n        Chef::Log.info('No latest file found..!!')\n    else\n    c = Dir.pwd\n    Dir.chdir(cache_direc)\n    patch_files.each do |patch|\n      if ::File.exist?(::File.join(cache_direc,patch))\n        Chef::Log.info(\"#{patch} file is already downloaded\")\n      else\n        open(patch, 'wb') do |fo|\n          fo.print open(\"#{patch_depot}/#{patch}\").read\n        end\n        `unzip -qo #{patch}`\n        Chef::Log.info(\"#{patch} is downloaded and extracted\")\n        FileUtils.chown_R osuser, usergroup, cache_direc\n        FileUtils.chmod_R 0777, cache_direc\n\n      end\n</code></pre>\n\n<p>So with the code mentioned above i am able to achieve point 1 and point 2 </p>\n\n<p>After this code block i have a ruby block which updates a file and i have a bash block which do some operation.</p>\n\n<p>Like below - </p>\n\n<pre><code>ruby_block 'edit bsu.sh file' do\n         block do\n                bsu_sh_file = Chef::Util::FileEdit.new(\"#{bsu_loc}/utils/asu/mmy.sh\")\n                bsu_sh_file.search_file_replace_line(/^MEM_ARGS=\"-Xms256m -Xmx512m\"*$/, \"MEM_ARGS='-Xms1024m -Xmx1024m'\")\n                if bsu_sh_file.unwritten_changes? == false\n                        Chef::Log.info('No Changes need be made to mmy_sh_file')\n                else\n                        bsu_sh_file.write_file\n                        Chef::Log.info('Changes made in mmy_sh_file file')\n                end\n        end\n      end\n</code></pre>\n\n<p>bash block - </p>\n\n<pre><code>bash \"test bash\" do\naction:run\ncode &lt;&lt;-EOH\nsome operation\nEOH\nend\n</code></pre>\n\n<p>My HTTP content may have multiple zip files\nSo for each zip file i need to unzip and do the operations mentioned on ruby_block and bash block</p>\n\n<p>Kindly provide a solution or a suggestion</p>\n\n<p>EDIT #1 : \nThe Code written which is already a custom resource , I know i mess up with the loop some where. My code doesn't not moving inside the loop and iterating through the other actions.</p>\n"}, {"tags": ["arrays", "ruby", "file", "ip"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493224667, "post_id": 43631044, "comment_id": 74328216, "body": "When showing us an array of input data, please don&#39;t use the <code>inspect</code> output, instead provide code that generates the array. Asking us to regenerate code to create <code>#&lt;Entity:0x0000000288a570...</code> wastes our time when trying to help you, which then wastes it for others we could be helping. See &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}, {"owner": {"reputation": 171, "user_id": 7499654, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b543fbb3d42c84f706b5ef1312a42ae9?s=128&d=identicon&r=PG&f=1", "display_name": "mf370", "link": "https://stackoverflow.com/users/7499654/mf370"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493224932, "post_id": 43631044, "comment_id": 74328359, "body": "Thank you @theTinMan I didn&#39;t know that, I was trying to be simple, but instead I complicated! Next time I&#39;ll be more careful!"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493227262, "post_id": 43631044, "comment_id": 74329708, "body": "It&#39;d really help if you&#39;d fix it for this time. Remember, Stack Overflow isn&#39;t a discussion list, it&#39;s more like an online reference book, and your question is a new article. As such it&#39;s important to make the article make sense. Well asked questions gather up votes."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 7499654, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b543fbb3d42c84f706b5ef1312a42ae9?s=128&d=identicon&r=PG&f=1", "display_name": "mf370", "link": "https://stackoverflow.com/users/7499654/mf370"}, "edited": false, "score": 0, "creation_date": 1493205156, "post_id": 43632422, "comment_id": 74312872, "body": "Thank you @c3st7n!! Such dumb mistake!!"}], "tags": [], "owner": {"reputation": 1533, "user_id": 7075994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UvYWN.png?s=128&g=1", "display_name": "c3st7n", "link": "https://stackoverflow.com/users/7075994/c3st7n"}, "is_accepted": true, "score": 1, "last_activity_date": 1493224318, "last_edit_date": 1493224318, "creation_date": 1493204802, "answer_id": 43632422, "question_id": 43631044, "link": "https://stackoverflow.com/questions/43631044/how-to-write-items-from-ruby-objects-to-file/43632422#43632422", "title": "How to write items from Ruby objects to file", "body": "<p>The reason you get duplicate entries is that the <code>cidrs</code> array is declared before you loop through each entity, so the second entity has all of the first entities as well as its own and so on.</p>\n\n<p>If you move the <code>cidrs</code> array declaration into the <code>entity</code> loop it seems to work:</p>\n\n<pre><code>File.open('out.dat', \"w\") do |f|\n    entities.each do |entity|\n        cidrs = Array.new\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 7499654, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b543fbb3d42c84f706b5ef1312a42ae9?s=128&d=identicon&r=PG&f=1", "display_name": "mf370", "link": "https://stackoverflow.com/users/7499654/mf370"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 43632422, "answer_count": 1, "score": 0, "last_activity_date": 1493224454, "creation_date": 1493201127, "last_edit_date": 1493224454, "question_id": 43631044, "link": "https://stackoverflow.com/questions/43631044/how-to-write-items-from-ruby-objects-to-file", "title": "How to write items from Ruby objects to file", "body": "<p>I have an array composed by three Ruby objects and each object represents an entity and each entity has an internal AS number, public and private ranges of IP addresses. \nThe array looks like this:</p>\n\n<pre><code>entities = [#&lt;Entity:0x0000000288a570 @name=\"entity-A\",@internal_asn_number=64513, @public_range=[\"240.28.56.0-240.28.56.255\", \"250.154.64.0-250.154.64.255\", \"251.154.65.0-251.154.65.255\"], @private_range=[\"16.1.1.1-16.1.1.254\"]&gt;,     #&lt;Entity:0x000000028839a0 @name=\"entity-B\", @internal_asn_number=64514, @public_range=[\"195.65.46.0-195.65.46.255\",\"196.2.84.0-196.2.84.255\",\"197.13.105.0-197.13.105.255\"], @private_range=[\"11.2.1.1-11.2.1.254\"]&gt;,     #&lt;Entity:0x0000000287b0c0 @name=\"entity-C\", @internal_asn_number=64512, @public_range=[\"102.206.119.0-102.206.119.255\", \"103.206.12.0-103.206.12.255\", \"104.28.90.0-104.28.90.255\"], @private_range=[\"2.1.1.1-2.1.1.254\"]&gt;]\n</code></pre>\n\n<p>I save the the IP ranges into one unique variable, so I can then transform the ranges into the CIDR format and merge them. Then I save the final result into an array. Finally, I try to write the output into a file in the format (merged IP address/AS number): </p>\n\n<pre><code>240.28.56.0/24   64513\n250.154.64.0/24  64513\n251.154.65.0/24  64513\n16.1.1.1/32  64513\n</code></pre>\n\n<p>And I have the following code:</p>\n\n<pre><code>require 'netaddr'\n\ncidrs = Array.new\n\nFile.open('out.dat', \"w\") do |f|\n    entities.each do |entity|\n      asn = entity.internal_asn_number\n      ranges = entity.public_range + entity.private_range\n      ranges.each do |ip_range|\n        new_range = ip_range.split(/\\s*-\\s*/)\n        startip = new_range[0]\n        endip = new_range[1]\n        ip_net_range = NetAddr.range(startip, endip, :Inclusive =&gt; true, :Objectify =&gt; true)\n        cidrs &lt;&lt; NetAddr.merge(ip_net_range)\n      end\n      new_cidrs = cidrs.flatten\n      new_cidrs.each do |ip|\n        f.write(\"#{ip}\\t #{asn}\\n\")\n      end\n   end\nend\n</code></pre>\n\n<p>This code gives me the following output:</p>\n\n<pre><code>240.28.56.0/24   64513\n250.154.64.0/24  64513\n251.154.65.0/24  64513\n16.1.1.1/32  64513\n16.1.1.2/31  64513\n16.1.1.4/30  64513\n16.1.1.8/29  64513\n16.1.1.16/28     64513\n16.1.1.32/27     64513\n16.1.1.64/26     64513\n16.1.1.128/26    64513\n16.1.1.192/27    64513\n16.1.1.224/28    64513\n16.1.1.240/29    64513\n16.1.1.248/30    64513\n16.1.1.252/31    64513\n16.1.1.254/32    64513\n240.28.56.0/24   64514\n250.154.64.0/24  64514\n251.154.65.0/24  64514\n16.1.1.1/32  64514\n16.1.1.2/31  64514\n16.1.1.4/30  64514\n16.1.1.8/29  64514\n16.1.1.16/28     64514\n16.1.1.32/27     64514\n16.1.1.64/26     64514\n16.1.1.128/26    64514\n16.1.1.192/27    64514\n16.1.1.224/28    64514\n16.1.1.240/29    64514\n16.1.1.248/30    64514\n16.1.1.252/31    64514\n16.1.1.254/32    64514\n195.65.46.0/24   64514\n196.2.84.0/24    64514\n197.13.105.0/24  64514\n11.2.1.1/32  64514\n11.2.1.2/31  64514\n11.2.1.4/30  64514\n11.2.1.8/29  64514\n11.2.1.16/28     64514\n11.2.1.32/27     64514\n11.2.1.64/26     64514\n11.2.1.128/26    64514\n11.2.1.192/27    64514\n11.2.1.224/28    64514\n11.2.1.240/29    64514\n11.2.1.248/30    64514\n11.2.1.252/31    64514\n11.2.1.254/32    64514\n240.28.56.0/24   64512\n250.154.64.0/24  64512\n251.154.65.0/24  64512\n16.1.1.1/32  64512\n16.1.1.2/31  64512\n16.1.1.4/30  64512\n16.1.1.8/29  64512\n16.1.1.16/28     64512\n16.1.1.32/27     64512\n16.1.1.64/26     64512\n16.1.1.128/26    64512\n16.1.1.192/27    64512\n16.1.1.224/28    64512\n16.1.1.240/29    64512\n16.1.1.248/30    64512\n16.1.1.252/31    64512\n[...]\n</code></pre>\n\n<p>Basically, the IP addresses are written to the file three times, and what I was expecting was to have the merged IP addresses from entity-A with the AS number of entity-A and so on.</p>\n\n<p>I don't know what I'm doing wrong.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "edited": false, "score": 0, "creation_date": 1493200314, "post_id": 43630181, "comment_id": 74309568, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/29560805/how-to-use-dependent-destroy-in-rails\">How to use dependent: :destroy in rails?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 394, "user_id": 5236616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1803d9ab29d8ae8127eee4bee3d283c8?s=128&d=identicon&r=PG&f=1", "display_name": "nautgrad", "link": "https://stackoverflow.com/users/5236616/nautgrad"}, "is_accepted": true, "score": 0, "last_activity_date": 1493200587, "creation_date": 1493200587, "answer_id": 43630846, "question_id": 43630181, "link": "https://stackoverflow.com/questions/43630181/deleting-associated-record-deletes-the-original-after-overriding-has-many-associ/43630846#43630846", "title": "Deleting associated record deletes the original after overriding has_many association getter in Rails", "body": "<p>Easy way to solve this problem is to destroy <code>UserCard</code> directly.</p>\n\n<pre><code>@card = Card.find(1)\n@card.user_cards.where(user_id: @user.id).destroy\n</code></pre>\n\n<p>But ensure that <code>UserCard</code> does not have <code>dependent: destroy</code></p>\n"}], "owner": {"reputation": 1161, "user_id": 1520956, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e1de66cb040b2256a6de3625fb4735ba?s=128&d=identicon&r=PG&f=1", "display_name": "rukia_kuchiki_21", "link": "https://stackoverflow.com/users/1520956/rukia-kuchiki-21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 43630846, "answer_count": 1, "score": 0, "last_activity_date": 1493250092, "creation_date": 1493198900, "last_edit_date": 1493250092, "question_id": 43630181, "link": "https://stackoverflow.com/questions/43630181/deleting-associated-record-deletes-the-original-after-overriding-has-many-associ", "title": "Deleting associated record deletes the original after overriding has_many association getter in Rails", "body": "<p>I'm trying to override a <code>has_many</code> association getter using a method.</p>\n\n<p>I have a <code>has_many</code> association for cards via join table <code>user_cards</code>. I added a method into the model... trying to completely override the conditions.</p>\n\n<pre><code>has_many :cards, through: :user_cards, source: :canonical, source_type: 'Primary'\n</code></pre>\n\n<p>The <code>user_cards</code> is polymorphic so there's a <code>source</code> and a <code>source_type</code> from the association call.</p>\n\n<p>The getter looks okay... as expected.</p>\n\n<pre><code>def cards\n  Card.where(id: user_cards.pluck(:card_id))\nend\n</code></pre>\n\n<p>However... the simple deletion of associated record(s) is now deleting the original, not just the join table records which is very scary and can destroy the app.</p>\n\n<pre><code>@card = Card.find(1)\n@user.cards.delete(@card)\n</code></pre>\n\n<p>The above deletes the <code>@card</code> object completely from the database... I'm expecting it to delete the <code>@user.user_cards</code> record.</p>\n\n<p>I'm not familiar in overriding association getter... Please help. Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos"], "comments": [{"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "edited": false, "score": 0, "creation_date": 1493201389, "post_id": 43630034, "comment_id": 74310307, "body": "<code>%Z </code>is highly dependent on the operating system. <code>%z</code>, is recommended for the numeric time zone offset."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1493201844, "post_id": 43630034, "comment_id": 74310642, "body": "What is your question? This looks like bug report rather than a question. You seem to have posted on a wrong web site."}, {"owner": {"reputation": 134, "user_id": 4976462, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_yeQ3f2Yxzg/AAAAAAAAAAI/AAAAAAAAACo/U6ybLaqHo6w/photo.jpg?sz=128", "display_name": "Susan Joshi", "link": "https://stackoverflow.com/users/4976462/susan-joshi"}, "reply_to_user": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "edited": false, "score": 0, "creation_date": 1493202148, "post_id": 43630034, "comment_id": 74310855, "body": "Thank you for your response. %z returns offset value from UTC. Is there any better way to get the abbreviated name for the timezone? @\u5b59\u609f\u7a7a"}], "answers": [{"tags": [], "owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "is_accepted": false, "score": 0, "last_activity_date": 1493211953, "creation_date": 1493211953, "answer_id": 43635128, "question_id": 43630034, "link": "https://stackoverflow.com/questions/43630034/ruby-strftime-z-method-returns-0545-instead-of-npt/43635128#43635128", "title": "Ruby strftime &#39;%Z&#39; method returns &#39;0545&#39; instead of &#39;NPT&#39;", "body": "<p>You can create a converter who transfer the numeric time zone offset to the abbreviated name. define a hash constant like </p>\n\n<pre><code>{\n... \n'+0200' =&gt; 'CEST',\n'+0530' =&gt; 'IST',\n...\n} \n</code></pre>\n\n<p><a href=\"https://www.timeanddate.com/time/zones/\" rel=\"nofollow noreferrer\">List complet</a></p>\n"}, {"tags": [], "owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "is_accepted": false, "score": 4, "last_activity_date": 1495372692, "last_edit_date": 1495372692, "creation_date": 1495348275, "answer_id": 44093858, "question_id": 43630034, "link": "https://stackoverflow.com/questions/43630034/ruby-strftime-z-method-returns-0545-instead-of-npt/44093858#44093858", "title": "Ruby strftime &#39;%Z&#39; method returns &#39;0545&#39; instead of &#39;NPT&#39;", "body": "<p>The time zone methods in ruby depend solely on the <strong><a href=\"https://www.iana.org/time-zones/repository/tz-link.html\" rel=\"nofollow noreferrer\">IANA tz database</a></strong> that is installed in the OS. The difference that you observe between your computer and your friend's computer simply reflects the fact that you had your tz database upgraded to a newer version along with the OS upgrade.</p>\n\n<p>And, indeed, there is an <strong>ongoing effort of IANA to remove some of the time zone abbreviations</strong>. They are removing those abbreviations that are considered \"invented\", i.e. named centrally by the IANA crew and not corresponding to any real-world usage in the appropriate localities. See also the following <a href=\"https://www.iana.org/time-zones/repository/tz-link.html#notation\" rel=\"nofollow noreferrer\">official IANA statement</a>:</p>\n\n<blockquote>\n  <p>Alphabetic time zone abbreviations should not be used as unique identifiers for UTC offsets as they are ambiguous in practice. For example, in English-speaking North America \"CST\" denotes 6 hours behind UTC, but in China it denotes 8 hours ahead of UTC, and French-speaking North Americans prefer \"HNC\" to \"CST\". The tz database contains English abbreviations for many time stamps; <strong>unfortunately some of these abbreviations were merely the database maintainers' inventions, and are gradually being removed</strong>.</p>\n</blockquote>\n\n<p>For example, the abbreviation for Kathmandu has been specifically removed in January 2017, with <a href=\"https://github.com/eggert/tz/commit/1b99dcde6342dd10969041b32b00b813d4f4a36e\" rel=\"nofollow noreferrer\">this commit</a>.</p>\n\n<p>So, I guess you should stick to the output that <code>strftime</code> gives you, and actually use the numeric value for some time zones.</p>\n"}], "owner": {"reputation": 134, "user_id": 4976462, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_yeQ3f2Yxzg/AAAAAAAAAAI/AAAAAAAAACo/U6ybLaqHo6w/photo.jpg?sz=128", "display_name": "Susan Joshi", "link": "https://stackoverflow.com/users/4976462/susan-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 1, "answer_count": 2, "score": 9, "last_activity_date": 1495372692, "creation_date": 1493198546, "question_id": 43630034, "link": "https://stackoverflow.com/questions/43630034/ruby-strftime-z-method-returns-0545-instead-of-npt", "title": "Ruby strftime &#39;%Z&#39; method returns &#39;0545&#39; instead of &#39;NPT&#39;", "body": "<p>After upgrading my MacOS to latest version, I am having some weird issue with the Time#strftime method.</p>\n\n<pre><code>Time.now.in_time_zone(\"Kathmandu\").strftime(\"%Z\") #=&gt; '+0545'\nTime.now.in_time_zone(\"Bangkok\").strftime(\"%Z\") #=&gt; '+07'\nTime.now.in_time_zone(\"Nairobi\").strftime(\"%Z\") #=&gt; 'EAT'\nTime.now.in_time_zone(\"New Delhi\").strftime(\"%Z\") #=&gt; 'IST'\n</code></pre>\n\n<p>My current ruby version is:</p>\n\n<pre><code>ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin16]\n</code></pre>\n\n<p>I have tried it on:</p>\n\n<pre><code>ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin16]\n</code></pre>\n\n<p>and still not working</p>\n\n<p>I tried this on my friend's machine (ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin15]) and its working fine.</p>\n\n<pre><code>Time.now.in_time_zone(\"Kathmandu\").strftime(\"%Z\") #=&gt; 'NPT'\nTime.now.in_time_zone(\"Bangkok\").strftime(\"%Z\") #=&gt; 'ICT'\nTime.now.in_time_zone(\"Nairobi\").strftime(\"%Z\") #=&gt; 'EAT'\nTime.now.in_time_zone(\"New Delhi\").strftime(\"%Z\") #=&gt; 'IST'\n</code></pre>\n"}, {"tags": ["ruby", "capistrano", "string-formatting"], "comments": [{"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1493211940, "post_id": 43629849, "comment_id": 74318182, "body": "When you say its outputting, do you mean to slack? I see you have <code>a_command_that_posts_to_slack</code> perhaps this command is adding the semicolon? Try redirecting to a file instead of piping to that command."}, {"owner": {"reputation": 22551, "user_id": 724176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa470aad3d456ece9ddf1a8b583b22a5?s=128&d=identicon&r=PG", "display_name": "Hugo", "link": "https://stackoverflow.com/users/724176/hugo"}, "reply_to_user": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1493219588, "post_id": 43629849, "comment_id": 74324637, "body": "I see the semicolon in Slack, but I also see it in the terminal. The same semicolon appears without piping: <code>execute &quot;echo \\&quot;Deployed \\\\\\&quot;#{git_message}\\\\\\&quot;: #{git_commit}\\&quot;&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "is_accepted": false, "score": 0, "last_activity_date": 1493237704, "last_edit_date": 1495541870, "creation_date": 1493237704, "answer_id": 43643732, "question_id": 43629849, "link": "https://stackoverflow.com/questions/43629849/capistrano-ruby-execute-is-adding-a-semicolon-after-a-variable/43643732#43643732", "title": "Capistrano/Ruby execute is adding a semicolon after a variable", "body": "<p>Perhaps its executing <code>:</code> as the Bash shell builtin and so its attempting to terminate that command with a semi-colon? Try removing the <code>:</code>. I also worry about inserting double quotes as a commit message containing double quotes might cause you some headache.</p>\n\n<p>Reference on the Bash builtin <code>:</code> <a href=\"https://stackoverflow.com/questions/3224878/what-is-the-purpose-of-the-colon-gnu-bash-builtin\">What is the purpose of the : (colon) GNU Bash builtin?</a></p>\n"}, {"tags": [], "owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "is_accepted": true, "score": 1, "last_activity_date": 1493237801, "creation_date": 1493237801, "answer_id": 43643763, "question_id": 43629849, "link": "https://stackoverflow.com/questions/43629849/capistrano-ruby-execute-is-adding-a-semicolon-after-a-variable/43643763#43643763", "title": "Capistrano/Ruby execute is adding a semicolon after a variable", "body": "<p>It is because you have newlines in your command, which Capistrano is translating into semicolons, thinking you want to execute multiple commands (one per line).</p>\n\n<p>Backticks in Ruby capture the entire stdout of the process, including trailing newlines. Use <code>chomp</code> to remove them.</p>\n\n<pre><code>git_message = `git log -1 HEAD --pretty=format:%s`.chomp\ngit_commit = `git rev-parse HEAD`.chomp\ngit_commit = \"https://example.com/myorg/myrepo/commit/\" + git_commit\n\nexecute \"echo \\\"Deployed \\\\\\\"#{git_message}\\\\\\\": #{git_commit}\\\" | a_command_that_posts_to_slack\"\n</code></pre>\n"}], "owner": {"reputation": 22551, "user_id": 724176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa470aad3d456ece9ddf1a8b583b22a5?s=128&d=identicon&r=PG", "display_name": "Hugo", "link": "https://stackoverflow.com/users/724176/hugo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 43643763, "answer_count": 2, "score": 0, "last_activity_date": 1493237801, "creation_date": 1493198056, "question_id": 43629849, "link": "https://stackoverflow.com/questions/43629849/capistrano-ruby-execute-is-adding-a-semicolon-after-a-variable", "title": "Capistrano/Ruby execute is adding a semicolon after a variable", "body": "<p>As part of a Capistrano Ruby task that deploys to a server, I'd like it to output the Git message and commit of the code it just deployed.</p>\n\n<p>With this:</p>\n\n<pre><code>git_message = `git log -1 HEAD --pretty=format:%s`\ngit_commit = `git rev-parse HEAD`\ngit_commit = \"https://example.com/myorg/myrepo/commit/\" + git_commit\n\nexecute \"echo \\\"Deployed \\\\\\\"#{git_message}\\\\\\\": #{git_commit}\\\" | a_command_that_posts_to_slack\"\n</code></pre>\n\n<p>It's outputting something like this:</p>\n\n<pre><code>Deployed \"Merge branch 'feature/some-feature' into develop\": https://example.com/myorg/myrepo/commit/0fdfa09fbfe012649fb0a998aa2e99cb5fd7c8b3;\n</code></pre>\n\n<p>Note that semicolon at the very end of the commit hash. I've confirmed using <code>puts</code> that <code>git_commit</code> doesn't end with a semicolon, and <code>git_message</code> doesn't have one, and doesn't have one after it either.</p>\n\n<p>What's adding the semicolon and how can I remove it?</p>\n"}, {"tags": ["ruby", "heroku", "sinatra", "rack"], "comments": [{"owner": {"reputation": 10874, "user_id": 36656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a29caa1a66ae5e3772ed976f6b63527?s=128&d=identicon&r=PG", "display_name": "Adam Byrtek", "link": "https://stackoverflow.com/users/36656/adam-byrtek"}, "edited": false, "score": 0, "creation_date": 1493475923, "post_id": 43629632, "comment_id": 74438281, "body": "Are you sure you provided the right <code>config.ru</code>? The traceback suggests that it has at least 5 lines: <code>&#47;app&#47;config.ru:5:in &lt;main&gt;</code>, and the source you included only has two lines."}, {"owner": {"reputation": 5625, "user_id": 2397068, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5d2f1115c9e0aef81a65c2f4019d4862?s=128&d=identicon&r=PG", "display_name": "Lane Rettig", "link": "https://stackoverflow.com/users/2397068/lane-rettig"}, "reply_to_user": {"reputation": 10874, "user_id": 36656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a29caa1a66ae5e3772ed976f6b63527?s=128&d=identicon&r=PG", "display_name": "Adam Byrtek", "link": "https://stackoverflow.com/users/36656/adam-byrtek"}, "edited": false, "score": 0, "creation_date": 1493519367, "post_id": 43629632, "comment_id": 74449495, "body": "Good point. I noticed this as well. There&#39;s only one <code>config.ru</code> in my project (I double checked). Is heroku deploying some sort of default <code>config.ru</code>? I can&#39;t find any evidence of this in the heroku docs, and when I connect to my dyno and examine the file, it&#39;s unchanged."}], "answers": [{"comments": [{"owner": {"reputation": 5625, "user_id": 2397068, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5d2f1115c9e0aef81a65c2f4019d4862?s=128&d=identicon&r=PG", "display_name": "Lane Rettig", "link": "https://stackoverflow.com/users/2397068/lane-rettig"}, "edited": false, "score": 0, "creation_date": 1494367291, "post_id": 43720221, "comment_id": 74796081, "body": "Thanks. <a href=\"https://gist.github.com/lrettig/6c74f79217e02dd012cdb743f1a59c56\" rel=\"nofollow noreferrer\">This</a> is what I see in the log now when shutting down/restarting, after making the change you suggested. Is this what it&#39;s supposed to look like?"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "reply_to_user": {"reputation": 5625, "user_id": 2397068, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5d2f1115c9e0aef81a65c2f4019d4862?s=128&d=identicon&r=PG", "display_name": "Lane Rettig", "link": "https://stackoverflow.com/users/2397068/lane-rettig"}, "edited": false, "score": 0, "creation_date": 1494370945, "post_id": 43720221, "comment_id": 74797219, "body": "@LaneRettig yep, I think so. Those exceptions are Webrick responding to the SIGTERM that Heroku sends. If you <a href=\"https://devcenter.heroku.com/articles/ruby-default-web-server\" rel=\"nofollow noreferrer\">switch to e.g. Puma</a> you shouldn\u2019t see those."}, {"owner": {"reputation": 5625, "user_id": 2397068, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5d2f1115c9e0aef81a65c2f4019d4862?s=128&d=identicon&r=PG", "display_name": "Lane Rettig", "link": "https://stackoverflow.com/users/2397068/lane-rettig"}, "edited": false, "score": 0, "creation_date": 1494863783, "post_id": 43720221, "comment_id": 74996945, "body": "I&#39;m going to mark this answer as correct (thanks!) but I&#39;m still a bit weirded out by all of the apparently innocuous error messages in the logs!"}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 2, "last_activity_date": 1493646650, "creation_date": 1493646650, "answer_id": 43720221, "question_id": 43629632, "link": "https://stackoverflow.com/questions/43629632/mysterious-error-deploying-sinatra-app-to-heroku-bundler-failed-to-load-comman/43720221#43720221", "title": "Mysterious error deploying sinatra app to heroku: bundler: failed to load command: rackup", "body": "<p>You are confusing <a href=\"http://www.rubydoc.info/github/rack/rack/Rack/Builder#run-instance_method\" rel=\"nofollow noreferrer\">Rack\u2019s <code>run</code> method</a> with <a href=\"http://www.rubydoc.info/gems/sinatra/Sinatra/Base.run!\" rel=\"nofollow noreferrer\">Sinatra\u2019s <code>run!</code> method</a>.</p>\n\n<p>When using <code>rackup</code>, Rack expects your <code>config.ru</code> to specify which app you want to run. You do this using the <code>run</code> (or <code>map</code>) methods. Your <code>config.ru</code> doesn\u2019t have either of these, so when <code>rackup</code> runs it report the error you are seeing: <code>missing run or map statement</code>.</p>\n\n<p>Sinatra has its own <code>run!</code> method. When you call this Sinatra will start a web server and serve your app. This server will respect the various Sinatra settings (e.g. <code>set :server, 'puma'</code> etc.). <code>rackup</code> doesn\u2019t use thise settings. (I suspect you have a line something like <code>set :port, ENV['PORT']</code> in your app).</p>\n\n<p>Your <code>config.ru</code> should look something like this, which should stop the error:</p>\n\n<pre><code>require './lib/app'\nrun SinatraApp\n</code></pre>\n\n<p>What\u2019s happening is that when you start <code>rackup</code> it will parse your <code>config.ru</code> to configure the app to run. During this, since this file is plain Ruby, you start the built-in Sinatra server. This stops rackup from finishing, and leaves the built-in server running.</p>\n\n<p>When you later stop the server you are only stopping this builtin server. Rack will continue to read <code>config.ru</code>, expecting to find an app to run so that it too can start a server. When it doesn\u2019t find anything in raises an error.</p>\n\n<p>In your case, what I think is happening is the error is being raised from the <em>previous</em> running server when you deploy a new version</p>\n"}], "owner": {"reputation": 5625, "user_id": 2397068, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5d2f1115c9e0aef81a65c2f4019d4862?s=128&d=identicon&r=PG", "display_name": "Lane Rettig", "link": "https://stackoverflow.com/users/2397068/lane-rettig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1317, "favorite_count": 0, "accepted_answer_id": 43720221, "answer_count": 1, "score": 1, "last_activity_date": 1493646650, "creation_date": 1493197437, "question_id": 43629632, "link": "https://stackoverflow.com/questions/43629632/mysterious-error-deploying-sinatra-app-to-heroku-bundler-failed-to-load-comman", "title": "Mysterious error deploying sinatra app to heroku: bundler: failed to load command: rackup", "body": "<p>I noticed that heroku is producing a mysterious error when I deploy my sinatra app. It works fine locally, and in fact, it runs fine on heroku as well--but this error appears in the heroku logs every time I deploy (and only upon deploy):</p>\n\n<pre><code>2017-04-26T08:52:25.579045+00:00 app[web.1]: bundler: failed to load command: rackup (/app/vendor/bundle/ruby/2.3.0/bin/rackup)\n2017-04-26T08:52:25.579176+00:00 app[web.1]: RuntimeError: missing run or map statement\n2017-04-26T08:52:25.579178+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.5/lib/rack/builder.rb:146:in `to_app'\n2017-04-26T08:52:25.579179+00:00 app[web.1]:   /app/config.ru:5:in `&lt;main&gt;'\n2017-04-26T08:52:25.579180+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.5/lib/rack/builder.rb:49:in `eval'\n2017-04-26T08:52:25.579180+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.5/lib/rack/builder.rb:49:in `new_from_string'\n2017-04-26T08:52:25.579181+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.5/lib/rack/builder.rb:40:in `parse_file'\n2017-04-26T08:52:25.579182+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.5/lib/rack/server.rb:299:in `build_app_and_options_from_config'\n2017-04-26T08:52:25.579183+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.5/lib/rack/server.rb:208:in `app'\n2017-04-26T08:52:25.579184+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.5/lib/rack/server.rb:336:in `wrapped_app'\n2017-04-26T08:52:25.579184+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.5/lib/rack/server.rb:272:in `start'\n2017-04-26T08:52:25.579185+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.5/lib/rack/server.rb:147:in `start'\n2017-04-26T08:52:25.579186+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.5/bin/rackup:4:in `&lt;top (required)&gt;'\n2017-04-26T08:52:25.579187+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.3.0/bin/rackup:23:in `load'\n2017-04-26T08:52:25.579215+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.3.0/bin/rackup:23:in `&lt;top (required)&gt;'\n2017-04-26T08:52:25.724981+00:00 heroku[web.1]: Process exited with status 1\n2017-04-26T08:52:26.928566+00:00 heroku[web.1]: Starting process with command `bundle exec rackup config.ru -p 56963`\n2017-04-26T08:52:29.278571+00:00 app[web.1]: [2017-04-26 08:52:29] INFO  WEBrick 1.3.1\n2017-04-26T08:52:29.278590+00:00 app[web.1]: [2017-04-26 08:52:29] INFO  ruby 2.3.1 (2016-04-26) [x86_64-linux]\n2017-04-26T08:52:29.278909+00:00 app[web.1]: == Sinatra (v1.4.8) has taken the stage on 56963 for production with backup from WEBrick\n2017-04-26T08:52:29.279274+00:00 app[web.1]: [2017-04-26 08:52:29] INFO  WEBrick::HTTPServer#start: pid=4 port=56963\n2017-04-26T08:52:29.825875+00:00 heroku[web.1]: State changed from starting to up\n</code></pre>\n\n<p>Other posts suggest that this may be due to an error in <code>config.ru</code>. Mine simply contains:</p>\n\n<pre><code>require './lib/app'\nSinatraApp.run!\n</code></pre>\n\n<p>Here's my <code>Procfile</code>:</p>\n\n<pre><code>web: bundle exec rackup config.ru -p $PORT\n</code></pre>\n\n<p>The <a href=\"https://gist.github.com/lrettig/82e0f81b30304ed3fffe40edd078a82d\" rel=\"nofollow noreferrer\">heroku deploy log is here</a>, in case it's helpful. As I said, the app appears to be working fine (you can see it launch successfully at the end of the above transcript), but I can't understand what's causing this error on every deploy.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493197403, "post_id": 43629465, "comment_id": 74307512, "body": "What data is in each table? And what SQL is being generated? (You can easily see this by checking the log, or adding <code>.to_sql</code> to the end of the query.)"}, {"owner": {"reputation": 1, "user_id": 7923468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1475c30c04595b2439ad7c5b9a6f3e04?s=128&d=identicon&r=PG&f=1", "display_name": "Ali S&#220;R&#220;C&#220;", "link": "https://stackoverflow.com/users/7923468/ali-s%c3%9cr%c3%9cc%c3%9c"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493197556, "post_id": 43629465, "comment_id": 74307616, "body": "SELECT products.name as product, product_groups.name as product_group, AVG(keys.cost) as cost  FROM keys  LEFT OUTER JOIN products ON products.id = keys.product_id  LEFT OUTER JOIN product_groups ON product_groups.id = keys.product_group_id  GROUP BY products.id, product_groups.id"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493197695, "post_id": 43629465, "comment_id": 74307707, "body": "...And what data is in each table? <a href=\"http://stackoverflow.com/posts/43629465/edit\">Edit your post</a> to include all information. It it much easier to answer questions that provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, <b>Complete</b>, and <b>Verifiable</b> example</a>."}, {"owner": {"reputation": 1, "user_id": 7923468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1475c30c04595b2439ad7c5b9a6f3e04?s=128&d=identicon&r=PG&f=1", "display_name": "Ali S&#220;R&#220;C&#220;", "link": "https://stackoverflow.com/users/7923468/ali-s%c3%9cr%c3%9cc%c3%9c"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493200675, "post_id": 43629465, "comment_id": 74309825, "body": "ProductGroups: id, name Products: id, products_group_id, name Key: id, key, products_group_id, product_id, cost"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493204642, "post_id": 43629465, "comment_id": 74312521, "body": "<b>Data</b>. What <b>data</b> is in your tables? I cannot reproduce your problem without knowing what <b>values</b> are in the <code>product_groups</code>, <code>products</code> and <code>keys</code> tables. And again, all information should please be placed <a href=\"http://stackoverflow.com/posts/43629465/edit\">in your question</a>, not buried in the comments."}, {"owner": {"reputation": 1, "user_id": 7923468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1475c30c04595b2439ad7c5b9a6f3e04?s=128&d=identicon&r=PG&f=1", "display_name": "Ali S&#220;R&#220;C&#220;", "link": "https://stackoverflow.com/users/7923468/ali-s%c3%9cr%c3%9cc%c3%9c"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493205251, "post_id": 43629465, "comment_id": 74312961, "body": "@TomLord The same sql works correctly in PGAdmin."}, {"owner": {"reputation": 1, "user_id": 7923468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1475c30c04595b2439ad7c5b9a6f3e04?s=128&d=identicon&r=PG&f=1", "display_name": "Ali S&#220;R&#220;C&#220;", "link": "https://stackoverflow.com/users/7923468/ali-s%c3%9cr%c3%9cc%c3%9c"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493211871, "post_id": 43629465, "comment_id": 74318114, "body": "I found the solution. The detail areas in the console did not appear as HASH."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493212309, "post_id": 43629465, "comment_id": 74318512, "body": "...And there was no way I was ever going to be able to find that answer, because you never supplied any <b>data</b> in your question above. Next time, please, post a question that is <b>complete</b> and <b>verifiable</b>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7923468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1475c30c04595b2439ad7c5b9a6f3e04?s=128&d=identicon&r=PG&f=1", "display_name": "Ali S&#220;R&#220;C&#220;", "link": "https://stackoverflow.com/users/7923468/ali-s%c3%9cr%c3%9cc%c3%9c"}, "edited": false, "score": 0, "creation_date": 1493211876, "post_id": 43629702, "comment_id": 74318121, "body": "I found the solution. The detail areas in the console did not appear as HASH."}], "tags": [], "owner": {"reputation": 693, "user_id": 1621998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d0641164c77ee079d25c110d4a7e6a?s=128&d=identicon&r=PG", "display_name": "Pragash", "link": "https://stackoverflow.com/users/1621998/pragash"}, "is_accepted": false, "score": 0, "last_activity_date": 1493197616, "creation_date": 1493197616, "answer_id": 43629702, "question_id": 43629465, "link": "https://stackoverflow.com/questions/43629465/rails-activerecord-missing-column-in-grouping-query/43629702#43629702", "title": "Rails ActiveRecord: Missing column in grouping query", "body": "<p>In my understanding the grouping statement would only return Aggregated columns and columns that are used to group the data set. In your case you have not used the grouping columns in the select list but, some other fields. As a result you don't receive the other two columns.</p>\n"}], "owner": {"reputation": 1, "user_id": 7923468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1475c30c04595b2439ad7c5b9a6f3e04?s=128&d=identicon&r=PG&f=1", "display_name": "Ali S&#220;R&#220;C&#220;", "link": "https://stackoverflow.com/users/7923468/ali-s%c3%9cr%c3%9cc%c3%9c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493211921, "creation_date": 1493197027, "last_edit_date": 1493211921, "question_id": 43629465, "link": "https://stackoverflow.com/questions/43629465/rails-activerecord-missing-column-in-grouping-query", "title": "Rails ActiveRecord: Missing column in grouping query", "body": "<pre><code>Key.select('products.name as product, product_groups.name as product_group, AVG(keys.cost) as cost')\n.group('products.id, product_groups.id')\n.left_joins(:product,:product_group)\n</code></pre>\n\n<p>the result:</p>\n\n<pre><code>=&gt; #&lt;ActiveRecord::Relation [#&lt;Key id: nil, cost: 0.6e1&gt;, #&lt;Key id: nil, cost: 0.4e1&gt;]&gt;\n</code></pre>\n\n<p>Expected return 3 field, but returnig value: 2 field.</p>\n\n<hr>\n\n<pre><code>I found the solution. The detail areas in the console did not appear as HASH.\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 2, "creation_date": 1493199369, "post_id": 43629454, "comment_id": 74308902, "body": "No need to inject: <code>[@a,@b,...].all?</code> does the job."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1493199756, "post_id": 43629454, "comment_id": 74309172, "body": "@user1934428, I think you should write this as an answer."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1493200163, "post_id": 43629454, "comment_id": 74309456, "body": "&quot;Now looking to improve code readability.&quot; - this changes the initial question and invalidates the already given answers. Make sure to avoid such cases and ask a new question. Be aware, that asking  for improving code readability might not be gladly met on StackOverflow. You&#39;ll be better of asking on, say, <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1493212264, "post_id": 43629454, "comment_id": 74318470, "body": "@AndreyDeineko : I didn&#39;t understand this sentence by the user as a request to get suggestions for improving readability, but that he thinks that this is the next task to do. Of course we can&#39;t read his mind though...."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1493212369, "post_id": 43629454, "comment_id": 74318564, "body": "@Ilya: Well, it is not really an answer to the original question (this would more likely something like <i>You can happily write &amp;&amp; operands until Ruby exhausts all its available memory</i>), so I think I leave it as a comment."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1493212659, "post_id": 43629454, "comment_id": 74318815, "body": "@user1934428 you might be right and I mistaken this sentence as such request."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 3, "creation_date": 1493202064, "post_id": 43629480, "comment_id": 74310784, "body": "Probably there is a limit, but no practical limit."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1493209857, "post_id": 43629480, "comment_id": 74316408, "body": "@sawa: Indeed. Around 5150 on my system. :)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 4, "last_activity_date": 1493202005, "last_edit_date": 1493202005, "creation_date": 1493197073, "answer_id": 43629480, "question_id": 43629454, "link": "https://stackoverflow.com/questions/43629454/how-many-can-an-if-statement-handle/43629480#43629480", "title": "How many &quot;&amp;&amp;&quot; can an &quot;if&quot; statement handle?", "body": "<blockquote>\n  <p>I realized that the <code>if</code> statement using 4 <code>&amp;&amp;</code> works fine but when I\n  start adding a fifth it will not.</p>\n</blockquote>\n\n<p>There is no limit to the number of <code>&amp;&amp;</code> you use in a statement. So it will work with 4, 5, 100.</p>\n\n<p>It fails because some of the conditions are falsey.</p>\n"}, {"comments": [{"owner": {"reputation": 551, "user_id": 4425968, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3c6c0547482f64bb2af7eb3b3e71abf3?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine", "link": "https://stackoverflow.com/users/4425968/antoine"}, "edited": false, "score": 0, "creation_date": 1493197624, "post_id": 43629488, "comment_id": 74307663, "body": "Would you suggest another code perhaps a switch statement to improve the code readability ?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1493202121, "post_id": 43629488, "comment_id": 74310831, "body": "The issue is not about the number of if statements, it is about the number of the conjunction operators."}], "tags": [], "owner": {"reputation": 3768, "user_id": 1029521, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7ce6f2f15a73bb6012b490dcbc4c1ed5?s=128&d=identicon&r=PG", "display_name": "Max Woolf", "link": "https://stackoverflow.com/users/1029521/max-woolf"}, "is_accepted": false, "score": 3, "last_activity_date": 1493197082, "creation_date": 1493197082, "answer_id": 43629488, "question_id": 43629454, "link": "https://stackoverflow.com/questions/43629454/how-many-can-an-if-statement-handle/43629488#43629488", "title": "How many &quot;&amp;&amp;&quot; can an &quot;if&quot; statement handle?", "body": "<p><code>&amp;&amp;</code> is a boolean operator. There is no theoretical limit as to how many if statements it can hold.</p>\n\n<p>Using lots in a single statement could be considered a <a href=\"https://en.wikipedia.org/wiki/Code_smell\" rel=\"nofollow noreferrer\">code smell</a> in Ruby, but there's no technical reason why you cannot do it.</p>\n\n<p>What error are you getting?</p>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1493257642, "post_id": 43634279, "comment_id": 74342791, "body": "Good answer. But the result should be 5126, not 5127. No? It also has to be shown that the errors caused are not due to other factors (such as the limit of the length of a string that can be passed to <code>eval</code>, and so on)."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1493281418, "post_id": 43634279, "comment_id": 74352236, "body": "@sawa: Excellent points, thanks. My code actually had 2 off-by-one errors, but I wrongly thought they cancelled each other. I&#39;m also investigating your comment about <code>eval</code>."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1493281998, "post_id": 43634279, "comment_id": 74352606, "body": "@sawa: <code>eval</code> seems to work fine with huge strings, for example with 10_000_000 of <code>true;true;true;...</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1493283705, "post_id": 43634279, "comment_id": 74353838, "body": "Great addition to the answer."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 8, "last_activity_date": 1493282234, "last_edit_date": 1493282234, "creation_date": 1493209823, "answer_id": 43634279, "question_id": 43629454, "link": "https://stackoverflow.com/questions/43629454/how-many-can-an-if-statement-handle/43634279#43634279", "title": "How many &quot;&amp;&amp;&quot; can an &quot;if&quot; statement handle?", "body": "<p>Interesting question!</p>\n\n<h1>Short answer</h1>\n\n<p>Between 5000 and 10000, depending on your system.</p>\n\n<h1>Theory</h1>\n\n<p>You could create a string with many <code>true &amp;&amp; true &amp;&amp; true &amp;&amp; ...</code> and evaluate it.</p>\n\n<ul>\n<li>If it returns <code>true</code>, you can add some more <code>&amp;&amp;</code>s.</li>\n<li>If it fails with a <code>SystemStackError</code> or even a segmentation fault, you'll need to remove some <code>&amp;&amp;</code>s.</li>\n</ul>\n\n<p>Since it can crash, you need to write 2 different scripts in order to prevent the main loop from also crashing.</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-bsearch\" rel=\"nofollow noreferrer\"><code>bsearch</code></a> finds the limit as fast as possible, without having to iterate over every single possiblity.</p>\n\n<h1>Code</h1>\n\n<h3><code>many_ands.rb</code></h3>\n\n<pre><code># many_ands.rb\nmany_ands = (['true'] * (ARGV[0].to_i + 1)).join(' &amp;&amp; ')\neval(many_ands)\n</code></pre>\n\n<h3><code>max_ands.rb</code></h3>\n\n<pre><code>big_number = 100_000\n\nmax_ands = (0..big_number).bsearch do |i|\n  print \"Testing #{i} : \"\n  result = system(\"ruby many_ands.rb #{i}\")\n  puts result ? 'Fine' : \"Too many &amp;&amp;'s\"\n  puts\n  !result\nend\n\nputs \"Max number of &amp;&amp;'s without exception : #{max_ands - 1}\"\n</code></pre>\n\n<p>It outputs:</p>\n\n<pre><code>Testing 50000 : many_ands.rb:2:in `eval': stack level too deep (SystemStackError)\n    from many_ands.rb:2:in `&lt;main&gt;'\nToo many &amp;&amp;'s\n\nTesting 25000 : many_ands.rb:2:in `eval': stack level too deep (SystemStackError)\n    from many_ands.rb:2:in `&lt;main&gt;'\nToo many &amp;&amp;'s\n\nTesting 12500 : many_ands.rb:2:in `eval': stack level too deep (SystemStackError)\n    from many_ands.rb:2:in `&lt;main&gt;'\nToo many &amp;&amp;'s\n\nTesting 6250 : many_ands.rb:2:in `eval': stack level too deep (SystemStackError)\n    from many_ands.rb:2:in `&lt;main&gt;'\nToo many &amp;&amp;'s\n\nTesting 3125 : Fine\n\nTesting 4688 : Fine\n\nTesting 5469 : many_ands.rb:2:in `eval': stack level too deep (SystemStackError)\n    from many_ands.rb:2:in `&lt;main&gt;'\nToo many &amp;&amp;'s\n\nTesting 5079 : Fine\n\nTesting 5274 : many_ands.rb:2:in `eval': stack level too deep (SystemStackError)\n    from many_ands.rb:2:in `&lt;main&gt;'\nToo many &amp;&amp;'s\n\nTesting 5177 : many_ands.rb:2:in `eval': stack level too deep (SystemStackError)\n    from many_ands.rb:2:in `&lt;main&gt;'\nToo many &amp;&amp;'s\n\nTesting 5128 : many_ands.rb:2:in `eval': stack level too deep (SystemStackError)\n    from many_ands.rb:2:in `&lt;main&gt;'\nToo many &amp;&amp;'s\n\nTesting 5104 : Fine\n\nTesting 5116 : Fine\n\nTesting 5122 : Fine\n\nTesting 5125 : Fine\n\nTesting 5127 : many_ands.rb:2:in `eval': stack level too deep (SystemStackError)\n    from many_ands.rb:2:in `&lt;main&gt;'\nToo many &amp;&amp;'s\n\nTesting 5126 : many_ands.rb:2:in `eval': stack level too deep (SystemStackError)\n    from many_ands.rb:2:in `&lt;main&gt;'\nToo many &amp;&amp;'s\n\nMax number of &amp;&amp;'s without exception : 5125\n</code></pre>\n\n<p>It depends on the system : On my Linux VM, it returned 5125. On a server, it returned 7930.</p>\n\n<p>Results vary a bit from one run to the other, even on the same system.</p>\n\n<h1>eval or &amp;&amp;?</h1>\n\n<p>Where does the limitation come from? Is it from the string length passed to <code>eval</code> or does it come from the number of <code>&amp;&amp;</code>s?</p>\n\n<p>By modifying <code>many_ands.rb</code>, we now pass a big string to eval with many small expressions instead of one huge <code>&amp;&amp;</code> expression:</p>\n\n<pre><code>many_ands = (['true'] * (ARGV[0].to_i + 1)).join(';')\neval(many_ands)\n</code></pre>\n\n<p>The main loop outputs:</p>\n\n<pre><code>Testing 5000000 : Fine\n\nTesting 7500000 : Fine\n\nTesting 8750000 : Fine\n\nTesting 9375000 : Fine\n\nTesting 9687500 : Fine\n\nTesting 9843750 : Fine\n\nTesting 9921875 : Fine\n\nTesting 9960938 : Fine\n\nTesting 9980469 : Fine\n\nTesting 9990235 : Fine\n\nTesting 9995118 : Fine\n\nTesting 9997559 : Fine\n\nTesting 9998780 : Fine\n\nTesting 9999390 : Fine\n\nTesting 9999695 : Fine\n\nTesting 9999848 : Fine\n\nTesting 9999924 : Fine\n\nTesting 9999962 : Fine\n\nTesting 9999981 : Fine\n\nTesting 9999991 : Fine\n\nTesting 9999996 : Fine\n\nTesting 9999998 : Fine\n\nTesting 9999999 : Fine\n\nTesting 10000000 : Fine\n\nmax_and.rb:11:in `&lt;main&gt;': undefined method `-' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>It seems the limitation does come from the number of <code>&amp;&amp;</code>s in the expression. With 10 million <code>true;...</code>, the string passed to <code>eval</code> is 50MB big.</p>\n"}], "owner": {"reputation": 551, "user_id": 4425968, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3c6c0547482f64bb2af7eb3b3e71abf3?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine", "link": "https://stackoverflow.com/users/4425968/antoine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 1, "accepted_answer_id": 43634279, "answer_count": 3, "score": 2, "last_activity_date": 1493282234, "creation_date": 1493197012, "last_edit_date": 1493218460, "question_id": 43629454, "link": "https://stackoverflow.com/questions/43629454/how-many-can-an-if-statement-handle", "title": "How many &quot;&amp;&amp;&quot; can an &quot;if&quot; statement handle?", "body": "<p>I have the following code:</p>\n\n<pre><code>if @if_tannin_true &amp;&amp; @if_acid_true &amp;&amp; @if_alcohol_true &amp;&amp; @if_body_true #I would like to add this: &amp;&amp; @if_fruit_true #&amp;&amp; @if_fruit_character_true &amp;&amp; @if_non_fruit_true &amp;&amp; @if_organic_earth_true &amp;&amp; @if_inorganic_earth_true &amp;&amp; @if_wood_true\n\n  y = 0\n  while y &lt; @grapes[i].testables.count\n    @result &lt;&lt; @grapes[i].testables[y].name\n    y+=1\n  end\nend\n</code></pre>\n\n<p>I realized that an if statement using four \"&amp;&amp;\"s works fine, but one with a fifth  will not. How could I handle that?</p>\n\n<hr>\n\n<p>Edit: It now works. I just restarted the server. Good to know that we can use as many \"&amp;&amp;\"s as needed.</p>\n"}, {"tags": ["ruby", "ubuntu-14.04", "gitlab"], "comments": [{"owner": {"reputation": 276, "user_id": 6002700, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a19e1f2f3bef0884aee1f284668fdb45?s=128&d=identicon&r=PG&f=1", "display_name": "FluxIX", "link": "https://stackoverflow.com/users/6002700/fluxix"}, "edited": false, "score": 1, "creation_date": 1493346758, "post_id": 43629326, "comment_id": 74388575, "body": "I&#39;m having the same problem currently on Ubuntu 16.04.1. It appears there is some missing source code for the gem to build from, but I don&#39;t know what packages are required yet."}, {"owner": {"reputation": 1009, "user_id": 3048255, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b4ae700bb235098ca801d4b646934342?s=128&d=identicon&r=PG&f=1", "display_name": "Dayamre", "link": "https://stackoverflow.com/users/3048255/dayamre"}, "reply_to_user": {"reputation": 276, "user_id": 6002700, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a19e1f2f3bef0884aee1f284668fdb45?s=128&d=identicon&r=PG&f=1", "display_name": "FluxIX", "link": "https://stackoverflow.com/users/6002700/fluxix"}, "edited": false, "score": 0, "creation_date": 1493354275, "post_id": 43629326, "comment_id": 74390380, "body": "I solved it. Through the log, there is no grpc_c file.  So I installed ruby (same version) to root account. And I installed gem, and grpc. In the grpc path (may be /usr/local/lib/ruby/gems/2.3.0/gems/grpc-1.1.2), there is &quot;grpc_c.so&quot; shared library file. Hence, I copied it and solved the problem."}], "answers": [{"tags": [], "owner": {"reputation": 1009, "user_id": 3048255, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b4ae700bb235098ca801d4b646934342?s=128&d=identicon&r=PG&f=1", "display_name": "Dayamre", "link": "https://stackoverflow.com/users/3048255/dayamre"}, "is_accepted": false, "score": 1, "last_activity_date": 1493354413, "creation_date": 1493354413, "answer_id": 43672072, "question_id": 43629326, "link": "https://stackoverflow.com/questions/43629326/an-error-occurred-in-installing-gitlab-install-gitlab-shell-phase-on-ubuntu-14/43672072#43672072", "title": "An error occurred in installing GitLab (install GitLab Shell phase) on Ubuntu 14.04 32bit", "body": "<p>I solved it. </p>\n\n<p>Through the log, there is no grpc_c file. </p>\n\n<pre><code>LoadError: cannot load such file -- /home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/grpc-1.1.2/src/ruby/lib/grpc/grpc_c\n</code></pre>\n\n<p>So I installed ruby (same version) to root account. </p>\n\n<p>And I installed gem, and grpc. </p>\n\n<p>In the grpc path,</p>\n\n<pre><code>/usr/local/lib/ruby/gems/2.3.0/gems/grpc-1.1.2\n</code></pre>\n\n<p>there is \"grpc_c.so\" shared library file. Hence, I copied it and solved the problem. </p>\n"}], "owner": {"reputation": 1009, "user_id": 3048255, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b4ae700bb235098ca801d4b646934342?s=128&d=identicon&r=PG&f=1", "display_name": "Dayamre", "link": "https://stackoverflow.com/users/3048255/dayamre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493354413, "creation_date": 1493196746, "question_id": 43629326, "link": "https://stackoverflow.com/questions/43629326/an-error-occurred-in-installing-gitlab-install-gitlab-shell-phase-on-ubuntu-14", "title": "An error occurred in installing GitLab (install GitLab Shell phase) on Ubuntu 14.04 32bit", "body": "<p>My server is ubuntu 14.04 (32bit).</p>\n\n<p>GitLab easy installation is provided only for 64bit Ubuntu.</p>\n\n<p>So I follow the guideline for installing GitLab from source. (<a href=\"https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/install/installation.md\" rel=\"nofollow noreferrer\">documentation</a>)</p>\n\n<p>However, in Install GitLab Shell Phase, an error is occurred like below. (The first line...)</p>\n\n<pre><code># sudo -u git -H bundle exec rake gitlab:shell:install REDIS_URL=unix:/var/run/redis/redis.sock RAILS_ENV=production SKIP_STORAGE_VALIDATION=true\nrake aborted!\nLoadError: cannot load such file -- /home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/grpc-1.1.2/src/ruby/lib/grpc/grpc_c\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/grpc-1.1.2/src/ruby/lib/grpc/grpc.rb:37:in `require_relative'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/grpc-1.1.2/src/ruby/lib/grpc/grpc.rb:37:in `&lt;top (required)&gt;'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/grpc-1.1.2/src/ruby/lib/grpc/errors.rb:30:in `require_relative'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/grpc-1.1.2/src/ruby/lib/grpc/errors.rb:30:in `&lt;top (required)&gt;'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/grpc-1.1.2/src/ruby/lib/grpc.rb:32:in `require_relative'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/grpc-1.1.2/src/ruby/lib/grpc.rb:32:in `&lt;top (required)&gt;'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `require'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `block in require'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:240:in `load_dependency'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `require'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/gitaly-0.5.0/ruby/lib/gitaly/commit_services_pb.rb:4:in `&lt;top (required)&gt;'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `require'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `block in require'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:240:in `load_dependency'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `require'\n/home/git/gitlab/vendor/bundle/ruby/2.3.0/gems/gitaly-0.5.0/ruby/lib/gitaly.rb:6:in `&lt;top (required)&gt;'\n/home/git/gitlab/config/application.rb:5:in `&lt;top (required)&gt;'\n/home/git/gitlab/Rakefile:5:in `require'\n/home/git/gitlab/Rakefile:5:in `&lt;top (required)&gt;'\n/usr/local/bin/bundle:22:in `load'\n/usr/local/bin/bundle:22:in `&lt;main&gt;'\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>I think it may be ruby's error, but I don't know about ruby...</p>\n\n<p>How I solve this problem?</p>\n\n<p>Thanks :)</p>\n"}, {"tags": ["ruby", "string", "unit-testing"], "comments": [{"owner": {"reputation": 283, "user_id": 1525430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iUZHx.jpg?s=128&g=1", "display_name": "Mats", "link": "https://stackoverflow.com/users/1525430/mats"}, "edited": false, "score": 0, "creation_date": 1493197080, "post_id": 43629320, "comment_id": 74307288, "body": "Indentation glitches are from pasting into SO editor. They are fine IRL."}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1493197374, "creation_date": 1493197374, "answer_id": 43629603, "question_id": 43629320, "link": "https://stackoverflow.com/questions/43629320/ruby-strange-string-comparison-assertion-behaviour/43629603#43629603", "title": "Ruby: Strange string comparison assertion behaviour", "body": "<p>Inspect the types of values being compared. One of them is not a string. (Thus, it can't be equal to a string).</p>\n\n<pre><code> guts = html.match(%r{(?&lt;=&lt;body&gt;).*(?=&lt;/body&gt;)})\n guts # =&gt; #&lt;MatchData \"SUCCESS\"&gt;\n guts.to_s # =&gt; \"SUCCESS\"\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 1525430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iUZHx.jpg?s=128&g=1", "display_name": "Mats", "link": "https://stackoverflow.com/users/1525430/mats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 43629603, "answer_count": 1, "score": 0, "last_activity_date": 1493197533, "creation_date": 1493196732, "last_edit_date": 1493197533, "question_id": 43629320, "link": "https://stackoverflow.com/questions/43629320/ruby-strange-string-comparison-assertion-behaviour", "title": "Ruby: Strange string comparison assertion behaviour", "body": "<p>Can anyone explain what is happening here? I have this simple class with some static methods, and I want to test them.</p>\n\n<p><code>yaqueline/build/converters/asciidocconverter.rb</code></p>\n\n<pre><code># encoding: UTF-8\nrequire 'asciidoctor'\n\nmodule Yaqueline\n  module Build\n    module Converters\n\n      class AsciiDocConverter &lt; Converter\n\n        class &lt;&lt; self\n\n          def matches path\n            path =~ /\\.(asciidoc|adoc|ascii|ad)$/\n          end\n\n          def convert content\n             html = Asciidoctor.convert content, to_file: false, safe: :safe\n              html = get_guts_out_of_body html\n              puts \"asciidoc #{html}\"\n              html\n            end\n\n            def get_guts_out_of_body html\n              if html =~ /&lt;body&gt;/\n                puts \"get guts: #{html}\"\n                return html.match(%r{(?&lt;=&lt;body&gt;).*(?=&lt;/body&gt;)})\n              end\n              html\n            end\n\n          end # class &lt;&lt; self\n\n        end # class\n\n      end\n    end\n  end\n</code></pre>\n\n<p>and the test in <code>test/build/converters/asciidocconverter_test.rb</code>:</p>\n\n<pre><code># encoding: utf-8\nrequire 'helper'\nrequire 'yaqueline/build/converters/asciidocconverter'\n\nclass TestAsciidocConverter &lt; Test::Unit::TestCase\n\n  should \"be able to get body html from a document\" do\nvalue = %q{SUCCESS}\nhtml = %Q{\n     &lt;html&gt;\n       &lt;head&gt;\n     &lt;title&gt;Hej v\u00e4rld&lt;/title&gt;\n       &lt;/head&gt;\n       &lt;body&gt;#{value}&lt;/body&gt;\n     &lt;/html&gt;}\nguts = Yaqueline::Build::Converters::AsciiDocConverter.get_guts_out_of_body html\nputs \"guts was '#{guts}'\"\nassert value.eql?(guts), \"guts was '#{guts}', expected '#{value}'\"\n  end\n\nend\n</code></pre>\n\n<p>When running the test with</p>\n\n<pre><code>$ rake test TEST=test/build/converters/asciidocconverter_test.rb\n</code></pre>\n\n<p>The results looks good to me:</p>\n\n<pre><code>Started\nget guts: \n     &lt;html&gt;\n       &lt;head&gt;\n     &lt;title&gt;Hej v\u00e4rld&lt;/title&gt;\n       &lt;/head&gt;\n       &lt;body&gt;SUCCESS&lt;/body&gt;\n     &lt;/html&gt;\nguts was 'SUCCESS'\nF\n===============================================================================================================================================================================\nFailure:\n  guts was 'SUCCESS', expected 'SUCCESS'.\n  &lt;false&gt; is not true.\ntest: AsciidocConverter should be able to get body html from a document. (TestAsciidocConverter)\n/Users/mats/src/examples/yaqueline/test/build/converters/asciidocconverter_test.rb:37:in `block in &lt;class:TestAsciidocConverter&gt;'\n/Users/mats/src/examples/yaqueline/test/build/converters/asciidocconverter_test.rb:39:in `instance_exec'\n/Users/mats/src/examples/yaqueline/test/build/converters/asciidocconverter_test.rb:39:in `block in create_test_from_should_hash'\n===============================================================================================================================================================================\n</code></pre>\n\n<p>but the assertion fails which seems odd to me and I'll need some help.</p>\n\n<p>I'm running <code>ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin15]\n</code> and my <code>Gemfile</code>looks like</p>\n\n<pre><code># Add dependencies required to use your gem here.\n# Example:\n#   gem \"activesupport\", \"&gt;= 2.3.5\"\n\ngem 'mercenary'\ngem 'safe_yaml'\ngem 'kramdown'\ngem 'colorator'\ngem 'pathutil'\ngem 'nokogiri'\ngem 'sass'\ngem 'listen', '~&gt; 3.0'\ngem 'asciidoctor'\ngem 'tilt'\ngem 'erubis'\n\n# Add dependencies to develop your gem here.\n# Include everything needed to run rake, tests, features, etc.\ngroup :development do\n  gem \"rdoc\", \"~&gt; 3.12\"\n  gem \"bundler\", \"~&gt; 1.0\"\n  gem \"juwelier\", \"~&gt; 2.1.0\"\n  gem \"simplecov\", \"&gt;= 0\"\n  gem 'rubocop', '~&gt; 0.48.1', require: false\n  gem 'thin' # or whatever I end up with\n  gem 'minitest'\n  gem 'test-unit'\n  gem 'shoulda'\nend\n</code></pre>\n\n<p>Maybe this helps to realize hat test harness I'm using.</p>\n\n<p>Can anyone see the mistake or explain what's going on?</p>\n\n<p>Cheers</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "edited": false, "score": 0, "creation_date": 1493192036, "post_id": 43627583, "comment_id": 74304027, "body": "Thanks! The routes are fixed."}], "tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": true, "score": 1, "last_activity_date": 1493191468, "creation_date": 1493191468, "answer_id": 43627583, "question_id": 43627453, "link": "https://stackoverflow.com/questions/43627453/get-form-data-in-controller-rails/43627583#43627583", "title": "Get form data in controller rails", "body": "<p>Try below code:</p>\n\n<h1>routes.rb</h1>\n\n<pre><code>Rails.application.routes.draw do\n...\n  root :to =&gt; 'application#home'\n  post \"parse_input\" =&gt; \"form_controller_controller#parse_input\"\nend\n</code></pre>\n\n<h1>application.html.erb</h1>\n\n<pre><code>&lt;body&gt;\n&lt;%= form_tag(\"/parse_input\") do %&gt;\n  &lt;%= text_field(:ans, :field) %&gt;\n  &lt;%= submit_tag(\"submit\") %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1272, "favorite_count": 0, "accepted_answer_id": 43627583, "answer_count": 1, "score": 0, "last_activity_date": 1493191468, "creation_date": 1493191090, "question_id": 43627453, "link": "https://stackoverflow.com/questions/43627453/get-form-data-in-controller-rails", "title": "Get form data in controller rails", "body": "<p>I'm fairly new to rails and didin't find a soloution after a lot of research...</p>\n\n<p>I want to build a simple data abstaraction test app. I have a text field and a submit button and I want to do something with the input (like ie. <code>.upcase</code> ) and then print it out. On submit, I get a routing error, though.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>application.html.erb</p>\n\n<pre><code>&lt;body&gt;\n&lt;%= form_tag(\"parse_input\", method: \"post\") do %&gt;\n&lt;%= text_field(:ans, :field) %&gt;\n&lt;%= submit_tag(\"submit\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>FormControllerController.rb</p>\n\n<pre><code>class FormControllerController &lt; ApplicationController\ndef parse_input\nparams[:ans].each do |value|\nputs value\nend\nend\nend\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n...\nroot :to =&gt; 'application#home'\nget \"application\" =&gt; \"form_controller_controller\"\nend\n</code></pre>\n\n<p>I don't want to use a DB btw.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "routes"], "answers": [{"tags": [], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "is_accepted": false, "score": 1, "last_activity_date": 1493196381, "creation_date": 1493196381, "answer_id": 43629183, "question_id": 43627380, "link": "https://stackoverflow.com/questions/43627380/versioning-api-duplication/43629183#43629183", "title": "Versioning API duplication", "body": "<p><code>routes.rb</code> is \"just Ruby\", so you should be able to make a simple loop to handle both versions:</p>\n\n<pre><code>namespace :api, defaults: { format: :json }  do\n  [:v1, :v2].each { |version|\n    namespace version do\n      resources :users\n      resources :clients\n    end\n  }\nend\n</code></pre>\n\n<p>This doesn't <em>redirect</em> (as you mentioned in your question), it just means your API returns the same result for both URLs. I think that's a simpler solution and it's arguably an antipattern, in most cases, to redirect API responses anyway.</p>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493196381, "creation_date": 1493190852, "question_id": 43627380, "link": "https://stackoverflow.com/questions/43627380/versioning-api-duplication", "title": "Versioning API duplication", "body": "<p>In my Ruby on Rails application I have my api routes looks like this:</p>\n\n<pre><code>namespace :api, defaults: { format: :json }  do\n  namespace :v1 do\n    resources :users\n    resources :clients\n  end\nend\n</code></pre>\n\n<p>Now my response format for <code>users</code> resource will change so I want to create new api version: v2. My <code>clients</code> resource will not change, so I need to copy <code>jbuilder</code> templates and controllers to <code>v2</code> api namespace. This will be a duplication. Is there way to avoid that? Let say whenever someone tries to reach <code>api/v2/clients/*</code> I will redirect him to <code>api/v1/clients*</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 2, "creation_date": 1493187804, "post_id": 43626445, "comment_id": 74301531, "body": "You will need to read about actions in Rails and http verbs they are mapped to. <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">For starters</a>"}], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1493192490, "post_id": 43626575, "comment_id": 74304321, "body": "Indeed. It&#39;s not only a Rails conventio,n though. I&#39;d expect <code>movies</code> to hold a collection (set, array, list, ...) of <code>movie</code> objects in any script in any language."}], "tags": [], "owner": {"reputation": 631, "user_id": 4196281, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rcO54.jpg?s=128&g=1", "display_name": "DevJem", "link": "https://stackoverflow.com/users/4196281/devjem"}, "is_accepted": true, "score": 3, "last_activity_date": 1493188410, "last_edit_date": 1493188410, "creation_date": 1493188102, "answer_id": 43626575, "question_id": 43626445, "link": "https://stackoverflow.com/questions/43626445/in-ruby-on-rails-why-does-sometime-in-controller-it-is-plural-and-sometime-it/43626575#43626575", "title": "In Ruby on Rails, why does sometime in controller, it is plural and sometime it is singular?", "body": "<p>Both <code>@movies</code> and <code>@movie</code> are instance variables that you choose how to define. In your example, <code>@movies</code> is assigned to the whole collection of Movies from your model, therefore it is conventionally assigned a plural variable. <code>@movie</code> is assigned to a single record, therefore it's conventionally assigned a singular variable.</p>\n\n<p>You can name your instance variables whatever you want, but Rails heavily favors convention over configuration.</p>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 5397464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1056736654337562/picture?type=large", "display_name": "Sebastian Plasschaert", "link": "https://stackoverflow.com/users/5397464/sebastian-plasschaert"}, "is_accepted": false, "score": 0, "last_activity_date": 1493193203, "creation_date": 1493193203, "answer_id": 43628111, "question_id": 43626445, "link": "https://stackoverflow.com/questions/43626445/in-ruby-on-rails-why-does-sometime-in-controller-it-is-plural-and-sometime-it/43628111#43628111", "title": "In Ruby on Rails, why does sometime in controller, it is plural and sometime it is singular?", "body": "<p>In general you use plural in case of an array, and singular in case of a single object.</p>\n"}, {"tags": [], "owner": {"reputation": 781, "user_id": 3819362, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/sL0P3.jpg?s=128&g=1", "display_name": "Aashish", "link": "https://stackoverflow.com/users/3819362/aashish"}, "is_accepted": false, "score": 1, "last_activity_date": 1493197084, "creation_date": 1493197084, "answer_id": 43629489, "question_id": 43626445, "link": "https://stackoverflow.com/questions/43626445/in-ruby-on-rails-why-does-sometime-in-controller-it-is-plural-and-sometime-it/43629489#43629489", "title": "In Ruby on Rails, why does sometime in controller, it is plural and sometime it is singular?", "body": "<p>Adding to @Dithanial's answer,  As you may be familiar when you click on show action only that particular record is displayed. So in the below code snippet:</p>\n\n<pre><code>def show\n  @movie = Movie.find(params[:id])\n  @actors = @movie.actors\nend\n</code></pre>\n\n<p>The instance variable @movie find the specific item on based of it's id and displays the content.</p>\n"}, {"tags": [], "owner": {"reputation": 2623, "user_id": 5739514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/79f8410055f0114c31bde3ccc1d56178?s=128&d=identicon&r=PG", "display_name": "HashRocketSyntax", "link": "https://stackoverflow.com/users/5739514/hashrocketsyntax"}, "is_accepted": false, "score": 0, "last_activity_date": 1493225611, "creation_date": 1493225611, "answer_id": 43640232, "question_id": 43626445, "link": "https://stackoverflow.com/questions/43626445/in-ruby-on-rails-why-does-sometime-in-controller-it-is-plural-and-sometime-it/43640232#43640232", "title": "In Ruby on Rails, why does sometime in controller, it is plural and sometime it is singular?", "body": "<p>In the index -- you are getting <strong>all of the movies</strong> so that you can list all of the movies.</p>\n\n<p>In the other controller methods -- you are typically editing a <strong>single movie</strong>.</p>\n\n<p><code>@movies</code> vs <code>@movies</code> doesn't actually matter. You could name it <code>@banana</code>. However, there are lots of cases like file names (model = singular, controller = plural) and Active Record relations (references) where plurality does matter  </p>\n"}], "owner": {"reputation": 189, "user_id": 6898455, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJBRO.jpg?s=128&g=1", "display_name": "Salam.MSaif", "link": "https://stackoverflow.com/users/6898455/salam-msaif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 43626575, "answer_count": 4, "score": 0, "last_activity_date": 1493225611, "creation_date": 1493187619, "question_id": 43626445, "link": "https://stackoverflow.com/questions/43626445/in-ruby-on-rails-why-does-sometime-in-controller-it-is-plural-and-sometime-it", "title": "In Ruby on Rails, why does sometime in controller, it is plural and sometime it is singular?", "body": "<pre><code>class MoviesController &lt; ApplicationController\n  def index\n    @movies = Movie.all\n  end\n\n  def show\n    @movie = Movie.find(params[:id])\n    @actors = @movie.actors\n  end\nend\n</code></pre>\n\n<p>As seen above, in the index action, @movies is used, but in the show action, @movie is used. How does one determine whether it is plural or singular?</p>\n"}, {"tags": ["javascript", "html", "ruby-on-rails", "ruby", "haml"], "answers": [{"comments": [{"owner": {"reputation": 1179, "user_id": 6358607, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fc4656a64508378979d66b7693e19c9c?s=128&d=identicon&r=PG", "display_name": "Tri Nguyen", "link": "https://stackoverflow.com/users/6358607/tri-nguyen"}, "edited": false, "score": 0, "creation_date": 1493173326, "post_id": 43623915, "comment_id": 74296771, "body": "If I delete the javascript bit, the form will be successfully submitted but it doesn&#39;t close"}], "tags": [], "owner": {"reputation": 129, "user_id": 7829479, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wZj5l.jpg?s=128&g=1", "display_name": "henry", "link": "https://stackoverflow.com/users/7829479/henry"}, "is_accepted": false, "score": 0, "last_activity_date": 1493173153, "creation_date": 1493173153, "answer_id": 43623915, "question_id": 43623884, "link": "https://stackoverflow.com/questions/43623884/form-close-without-updating-database-table-ruby-on-rails/43623915#43623915", "title": "Form close without updating database table - ruby on rails", "body": "<p>Assure that you are specifying what model the form is for, then rails will know where to submit the entry. </p>\n"}, {"tags": [], "owner": {"reputation": 244, "user_id": 7794068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6700901fc3b7801b623c4029ef0251f5?s=128&d=identicon&r=PG&f=1", "display_name": "Rakesh", "link": "https://stackoverflow.com/users/7794068/rakesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1493181134, "creation_date": 1493181134, "answer_id": 43625093, "question_id": 43623884, "link": "https://stackoverflow.com/questions/43623884/form-close-without-updating-database-table-ruby-on-rails/43625093#43625093", "title": "Form close without updating database table - ruby on rails", "body": "<p>Change function and try with:</p>\n\n<pre><code>$('#submitButton').click(function() {\n  $('#landslide-submit-modal').modal('hide');\n  return false;\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1179, "user_id": 6358607, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fc4656a64508378979d66b7693e19c9c?s=128&d=identicon&r=PG", "display_name": "Tri Nguyen", "link": "https://stackoverflow.com/users/6358607/tri-nguyen"}, "is_accepted": true, "score": 1, "last_activity_date": 1493206861, "creation_date": 1493206861, "answer_id": 43633182, "question_id": 43623884, "link": "https://stackoverflow.com/questions/43623884/form-close-without-updating-database-table-ruby-on-rails/43633182#43633182", "title": "Form close without updating database table - ruby on rails", "body": "<p>Thank you guys. The problem was indentation. Fixed.</p>\n"}], "owner": {"reputation": 1179, "user_id": 6358607, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fc4656a64508378979d66b7693e19c9c?s=128&d=identicon&r=PG", "display_name": "Tri Nguyen", "link": "https://stackoverflow.com/users/6358607/tri-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 43633182, "answer_count": 3, "score": 1, "last_activity_date": 1493206861, "creation_date": 1493172905, "question_id": 43623884, "link": "https://stackoverflow.com/questions/43623884/form-close-without-updating-database-table-ruby-on-rails", "title": "Form close without updating database table - ruby on rails", "body": "<p>I have a popup form which lets user to submit information. I want the modal to close after user hits submit. It does actually close but doesn't submit anything to the database. Here's the code</p>\n\n<pre><code>.form-actions#submitButton\n            = f.button :submit, class: \"btn btn-lg btn-success btn-primary col-sm-offset-5\"\n\n :javascript\n   $('#submitButton').click(function() {\n     $('#landslide-submit-modal').modal('hide');\n   });\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493171709, "post_id": 43623678, "comment_id": 74296314, "body": "Are all your strings of format : <code>&quot;href=&quot;mailto:email&quot;&gt;&lt;span&quot;</code>?"}, {"owner": {"reputation": 1157, "user_id": 2653567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RNYoa.png?s=128&g=1", "display_name": "HMLDude", "link": "https://stackoverflow.com/users/2653567/hmldude"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493172070, "post_id": 43623678, "comment_id": 74296414, "body": "@sagarpandya82 At the moment, but not necessarily in future test cases. Ideally, I&#39;d like to create a method that handles a broad range of emails that need to be cleaned."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1493172510, "post_id": 43623678, "comment_id": 74296554, "body": "Why don&#39;t you just extract the <code>mailto:[email address]</code> part instead of whittling away surrounding characters?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1493172569, "post_id": 43623678, "comment_id": 74296571, "body": "You could extract the email with something like <code>&#47;[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+&#47;i</code> which is taken from <a href=\"https://www.railstutorial.org/book/modeling_users#table-valid_email_regex\" rel=\"nofollow noreferrer\">the rails tutorial</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1493173456, "post_id": 43623678, "comment_id": 74296796, "body": "@sagarpandya82 That regular expression is wrong and will skip a lot of valid emails like <code>test+addr@gmail.com</code> and other crazy stuff that&#39;s becoming more common-place with top-level domains being used by organizations. <code>google.</code> is a domain, so <code>x@google</code> is theoretically a valid email address. There&#39;s also iTLDs like <code>\uc0bc\uc131.</code> (Samsung) which are valid as well."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1493172636, "creation_date": 1493172636, "answer_id": 43623846, "question_id": 43623678, "link": "https://stackoverflow.com/questions/43623678/remove-all-characters-trailing-an-angle-bracket-in-ruby/43623846#43623846", "title": "Remove All Characters Trailing an Angle Bracket in Ruby", "body": "<p>Your regular expression here is a problem:</p>\n\n<pre><code>email = email.gsub(/(&lt;+\\w)/, \"\")\n</code></pre>\n\n<p>This removes one or more <code>&lt;</code> characters followed by a single word character. What you probably meant was:</p>\n\n<pre><code>/&lt;\\w+/\n</code></pre>\n\n<p>Though based on your data, you can probably trash everything after the <code>&lt;</code>:</p>\n\n<pre><code>/&lt;.*/\n</code></pre>\n\n<p>Keep in mind you can chain <code>gsub</code> operations together, plus you can rack up a bunch of \"cleaner\" expressions in an array defined beforehand:</p>\n\n<pre><code>MOPS = [\n /&lt;.*/,\n /\\A\"|\"\\Z/\n]\n\nMOPS.inject(email) do |e, mop|\n  e.gsub(mop, '')\nend\n</code></pre>\n"}], "owner": {"reputation": 1157, "user_id": 2653567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RNYoa.png?s=128&g=1", "display_name": "HMLDude", "link": "https://stackoverflow.com/users/2653567/hmldude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 43623846, "answer_count": 1, "score": 0, "last_activity_date": 1493172636, "creation_date": 1493171341, "question_id": 43623678, "link": "https://stackoverflow.com/questions/43623678/remove-all-characters-trailing-an-angle-bracket-in-ruby", "title": "Remove All Characters Trailing an Angle Bracket in Ruby", "body": "<p>I am trying to clean up email strings surrounded by extra characters. The method I am using is as follows:</p>\n\n<pre><code>def email_clean(email)\n    email = email.gsub(/(&lt;+\\w)/, \"\")\n    email = email.gsub(/(&gt;+\\w)/, \"\")\n    email = email.gsub(/(\\w+=)/,\"\")  \n    email = email.gsub(/(\\w+:)/, \"\")\n    email = email.gsub!(/\\A\"|\"\\Z/, '')\n    email = email.delete('\"')\n    return email\nend\n</code></pre>\n\n<p>I'm calling it with the following example string:</p>\n\n<pre><code>email_clean(\"href=\"mailto:darren@*********.com\"&gt;&lt;span\")\n</code></pre>\n\n<p>And getting the following output:</p>\n\n<pre><code>darren@*********.coman\n</code></pre>\n\n<p>I am trying to figure out why the first two gsub calls did not remove the trailing \"an\" when removing the angle brackets.</p>\n"}, {"tags": ["ruby", "sqlite", "rubygems"], "comments": [{"owner": {"reputation": 11556, "user_id": 6090676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5234122477a1ef7cce1b490ffe69241d?s=128&d=identicon&r=PG&f=1", "display_name": "burnettk", "link": "https://stackoverflow.com/users/6090676/burnettk"}, "edited": false, "score": 0, "creation_date": 1493172976, "post_id": 43623465, "comment_id": 74296689, "body": "if db/cards.db needs to be available in the app that uses it, i think it isn&#39;t because the &quot;files&quot; instruction in the gemspec filters out anything that is not a test, spec, or feature."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6484414, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dR7DXvEDnV8/AAAAAAAAAAI/AAAAAAAAATQ/aXnLSvRWDLk/photo.jpg?sz=128", "display_name": "Juan Gongora", "link": "https://stackoverflow.com/users/6484414/juan-gongora"}, "is_accepted": false, "score": 0, "last_activity_date": 1493414996, "creation_date": 1493414996, "answer_id": 43689158, "question_id": 43623465, "link": "https://stackoverflow.com/questions/43623465/using-a-built-in-sqlite3-database-from-a-ruby-gem/43689158#43689158", "title": "Using a built in sqlite3 database from a ruby gem", "body": "<p>I found out what the problem was, first I had to do a simple rearrange in my main <code>lib</code> file:</p>\n\n<pre><code>module MTGCardFinder #needs to be defined first so that environment loads correctly\nend\n\nrequire_relative '../config/environment'\n</code></pre>\n\n<p>Before my environment was requiring particular files that were children of the module <code>MTGCardFinder</code> so it was responding with an uninitialized constant error,  so I just had to define the module first so that the interpreter could read that before seeing what else was required.</p>\n\n<p>Second fix was automatically making a directory that would contain the stored database, inside of the current directory where the gem would be installed. I had the original database folders within the gem but it wasn't accessing them, so this was the workaround:</p>\n\n<pre><code>require 'fileutils' # for creating the directory\n\nDIR = \"db\"\nFileUtils.makedirs(DIR)\n\nDB = {:conn =&gt; SQLite3::Database.new(\"db/cards.db\")} #this gives me validation to reach the database that module Persistable interacts with\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6484414, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dR7DXvEDnV8/AAAAAAAAAAI/AAAAAAAAATQ/aXnLSvRWDLk/photo.jpg?sz=128", "display_name": "Juan Gongora", "link": "https://stackoverflow.com/users/6484414/juan-gongora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493414996, "creation_date": 1493169826, "question_id": 43623465, "link": "https://stackoverflow.com/questions/43623465/using-a-built-in-sqlite3-database-from-a-ruby-gem", "title": "Using a built in sqlite3 database from a ruby gem", "body": "<p>I'm currently building a gem that uses a sqlite3 database to store parsed content from a website. When I run the gem name in the command line, while I'm inside of it's original file directory, the program runs without any problems. </p>\n\n<p>However, when I install the gem to another project and try to run it I get an error:</p>\n\n<pre><code>/usr/local/rvm/gems/ruby-2.3.1/gems/mtg-card-finder-0.1.1/config/environment.rb:8:in `initialize': unable to open database file (SQLite3::CantOpenException)  \n</code></pre>\n\n<p>I have created the database file outside of the <code>lib</code> folder but it is referenced in my <code>environment</code> file:</p>\n\n<pre><code>require 'open-uri'\nrequire 'sqlite3'\nrequire \"tco\"\nrequire \"mechanize\"\nrequire \"nokogiri\"\nrequire \"require_all\"\n\nDB = {:conn =&gt; SQLite3::Database.new(\"db/cards.db\")} #this gives me validation to reach the database that module Persistable interacts with\n\nrequire_all 'lib/mtg_card_finder' #this allows me to simultaneously require everything in lib/mtg_card_finder\n</code></pre>\n\n<p>Which is then required by my main file inside <code>lib</code>:</p>\n\n<pre><code>require_relative '../config/environment'\n\nmodule MTGCardFinder\nend\n</code></pre>\n\n<p>This is my first time building a ruby gem, so I know that I must be messing something up on my gemspec, or some other thing that I don't know of that isn't allowing the database to be accessible when installed as just a gem.</p>\n\n<pre><code>lib = File.expand_path('../lib', __FILE__)\n$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)\nrequire 'mtg_card_finder/version.rb'\n\n  spec.files         = `git ls-files -z`.split(\"\\x0\").reject do |f|\n    f.match(%r{^(test|spec|features)/})\n  end\n\n  spec.executables   &lt;&lt; \"mtg-card-finder\"\n  spec.require_paths = [\"lib\"]\n\n  spec.add_development_dependency \"bundler\", \"~&gt; 1.14\"\n  spec.add_development_dependency \"rake\", \"~&gt; 12.0\"\n  spec.add_development_dependency \"pry\", \"~&gt; 0.10.4\"\n  spec.add_dependency \"rubysl-open-uri\", \"~&gt; 2.0\"\n  spec.add_dependency \"nokogiri\", \"~&gt; 1.7.1\"\n  spec.add_dependency \"tco\", \"~&gt; 0.1.8\"\n  spec.add_dependency \"sqlite3\", \"~&gt; 1.3.13\"\n  spec.add_dependency \"mechanize\", \"~&gt; 2.7.5\"\n  spec.add_dependency \"require_all\", \"~&gt; 1.4\"\n</code></pre>\n\n<p>Any advice would be so welcoming! :)\nHere is the repo if you need additional lines from the gemspec and such:\n<a href=\"https://github.com/JuanGongora/mtg-card-finder\" rel=\"nofollow noreferrer\">https://github.com/JuanGongora/mtg-card-finder</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1493169914, "post_id": 43623449, "comment_id": 74295870, "body": "What do those methods do? Is there any reason you can&#39;t define a normal method that takes a block instead of involving Proc? This example also pertains to <code>x</code> but it&#39;s not clear how the others become involved, like where do <code>a,b</code> come from?"}, {"owner": {"reputation": 1, "user_id": 7922477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/912605168355dc27847144370a99d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "tomasOO", "link": "https://stackoverflow.com/users/7922477/tomasoo"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1493170458, "post_id": 43623449, "comment_id": 74295990, "body": "I have to do this using block witch is object of Proc. Added def of methods"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7922477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/912605168355dc27847144370a99d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "tomasOO", "link": "https://stackoverflow.com/users/7922477/tomasoo"}, "edited": false, "score": 0, "creation_date": 1493171236, "post_id": 43623620, "comment_id": 74296185, "body": "But i need to write a class, how can i do it because i think my idea isnt to good."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1, "user_id": 7922477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/912605168355dc27847144370a99d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "tomasOO", "link": "https://stackoverflow.com/users/7922477/tomasoo"}, "edited": false, "score": 0, "creation_date": 1493171362, "post_id": 43623620, "comment_id": 74296222, "body": "The reason you&#39;d use a class instead of a module is if you have instance variables that persist state between calls. I don&#39;t see any of that here."}, {"owner": {"reputation": 1, "user_id": 7922477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/912605168355dc27847144370a99d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "tomasOO", "link": "https://stackoverflow.com/users/7922477/tomasoo"}, "edited": false, "score": 0, "creation_date": 1493171580, "post_id": 43623620, "comment_id": 74296281, "body": "I have a task to do where is said write a class so i dont have a choice."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1, "user_id": 7922477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/912605168355dc27847144370a99d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "tomasOO", "link": "https://stackoverflow.com/users/7922477/tomasoo"}, "edited": false, "score": 0, "creation_date": 1493171841, "post_id": 43623620, "comment_id": 74296356, "body": "Then call it <code>class</code> instead of <code>module</code>, but to use it you need to do <code>MyClass.new.area(...)</code>"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1493170943, "creation_date": 1493170943, "answer_id": 43623620, "question_id": 43623449, "link": "https://stackoverflow.com/questions/43623449/what-is-the-correct-way-to-write-this-in-ruby/43623620#43623620", "title": "What is the correct way to write this in Ruby?", "body": "<p>Here's an idea of adapting one of your methods to a more Ruby style:</p>\n\n<pre><code>def area(a,b)\n  pole = 0\n\n  while a &lt; b\n    if (yield(a) &gt; yield(a + 0.00001))\n      pole = pole + (yield(a) * 0.00001)        \n    else\n      pole = pole + (yield(a + 0.00001) * 0.00001)\n    end\n\n    a += 0.00001\n  end\n\n  pole\nend\n</code></pre>\n\n<p>You'd use it like this:</p>\n\n<pre><code>area(a, b) do |a|\n  a ** 2\nend\n</code></pre>\n\n<p>Now it's one thing to be handling Proc objects, that's fine, the <code>do ... end</code> method of appending blocks to method calls generates those by default. It's very <em>not</em> Ruby to put extra methods on Proc itself. I can't see anything here that can't be covered by defining these inside a simple module:</p>\n\n<pre><code>module CalculationModule  \n  def area(a, b)\n    # ... Implementation\n  end\n\n  extend self\nend\n</code></pre>\n\n<p>That way you can use those methods like <code>CalculationModule.area</code> or you can always <code>include</code> it into another class or module and use them like <code>area</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7922477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/912605168355dc27847144370a99d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "tomasOO", "link": "https://stackoverflow.com/users/7922477/tomasoo"}, "edited": false, "score": 0, "creation_date": 1493242998, "post_id": 43624285, "comment_id": 74338451, "body": "Can you tell me how can i  extend class Proc in my task?"}, {"owner": {"reputation": 1, "user_id": 7922477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/912605168355dc27847144370a99d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "tomasOO", "link": "https://stackoverflow.com/users/7922477/tomasoo"}, "edited": false, "score": 0, "creation_date": 1493246763, "post_id": 43624285, "comment_id": 74339870, "body": "If I want extend class Proc using my methods how can i do it?"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1493175872, "creation_date": 1493175872, "answer_id": 43624285, "question_id": 43623449, "link": "https://stackoverflow.com/questions/43623449/what-is-the-correct-way-to-write-this-in-ruby/43624285#43624285", "title": "What is the correct way to write this in Ruby?", "body": "<p>The main thing that's non-idiomatic is this:</p>\n\n<pre><code>f = Funkcja.new (Proc.new{|x| x*x*Math.sin(x)})\n</code></pre>\n\n<p>What would be more normal is to do this:</p>\n\n<pre><code>f = Funkcja.new { |x| x*x*Math.sin(x) }\n</code></pre>\n\n<p>This is a normal block, and you could split it up among multiple lines as usual:</p>\n\n<pre><code>f = Funkcja.new do |x|\n  x*x*Math.sin(x)\nend\n</code></pre>\n\n<p>However, this wouldn't work with your <code>initialize</code> definition and that's because of one minor detail. You'd just need to change <code>def initialize(funkcja)</code> to <code>def initialize(&amp;funkja)</code> - this converts the passed block into a proc that you can assign to a variable, use <code>call</code> with, etc:</p>\n\n<pre><code>def initialize(&amp;funjka)\n  @funkja = funkja\nend\n</code></pre>\n\n<p>Another way to do the same thing would be this:</p>\n\n<pre><code>def initialize\n  @funkja = yield\nend\n</code></pre>\n\n<p>Other than that, your code seems fine with one other glaring non-idiomatic thing, which that you use <code>self.value</code>. The <code>self</code> is unnecessary unless you're using a setter method (i.e. <code>self.value =</code>), which you're not here. </p>\n"}], "owner": {"reputation": 1, "user_id": 7922477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/912605168355dc27847144370a99d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "tomasOO", "link": "https://stackoverflow.com/users/7922477/tomasoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1493188521, "creation_date": 1493169705, "last_edit_date": 1493188521, "question_id": 43623449, "link": "https://stackoverflow.com/questions/43623449/what-is-the-correct-way-to-write-this-in-ruby", "title": "What is the correct way to write this in Ruby?", "body": "<p>I am needing to write few methods: <code>value(x)</code>, <code>zero(a,b,e)</code>, <code>area(a,b)</code>, <code>derivative(x)</code></p>\n\n<pre><code>class Funkcja\n\n    def initialize(funkcja)\n        @funkcja = funkcja\n    end\n\n    def value(x)\n        @funkcja.call(x)\n    end\nend\n</code></pre>\n\n<p>This class will have to work over block which is an object from Proc</p>\n\n<p>This is how I create that new object</p>\n\n<pre><code>f = Funkcja.new (Proc.new{|x| x*x*Math.sin(x)})\n</code></pre>\n\n<p>What is the correct way and in Ruby style (if not please show me that i\nnewbie in Ruby) to do this right <code>Funkcja.new (Proc.new x)</code> and\ninitialize <code>@funkcja = funkcja</code></p>\n\n<pre><code>def zero(a, b, eps)\n      x = (a+b)/2.0\n      val = value(x)\n\n      if val &gt;= -eps and val &lt;= eps\n         x\n      else\n        left = value(a)\n        rigth = value(b)\n        if left &lt; 0 and val &gt; 0\n            zero(a,x,eps)\n        elsif left &gt; 0 and val &lt; 0\n            zero(a,x,eps)\n        elsif rigth &gt; 0 and val &lt; 0\n            zero(x,b,eps)\n        elsif rigth &lt; 0 and val &gt; 0\n            zero(x,b,eps)\n        elsif value == 0\n            x\n        else\n            nil\n        end\n      end\n  end\n\n  def area(a,b)\n    pole = 0\n    while a &lt; b\n        if (self.value(a) &gt; self.value( a + 0.00001))\n            pole = pole + (self.value( a) * 0.00001)\n        else\n            pole = pole + (self.value( a + 0.00001) * 0.00001 )\n        end\n        a += 0.00001\n    end\n    pole\n  end\n\n  def derivative(x)\n    eps = 0.00000001\n    return (self.value(x) - self.value(x - eps))/eps\n  end\n</code></pre>\n\n<p>Area is calculated area between <code>a</code> and <code>b</code> and <code>OX</code>, zero is find where\n<code>F (x)=0</code> derivative is calculated as derivative in point.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session-cookies"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1493169373, "post_id": 43623380, "comment_id": 74295741, "body": "It doesn&#39;t look like you&#39;re persisting the <code>remember_token</code> in your <code>session</code> properly, so it probably gets thrown out."}], "answers": [{"comments": [{"owner": {"reputation": 523, "user_id": 2817111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99961f704b8fb737c723a0b403887949?s=128&d=identicon&r=PG", "display_name": "mikwat", "link": "https://stackoverflow.com/users/2817111/mikwat"}, "reply_to_user": {"reputation": 11, "user_id": 5143581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-003RySnC5sA/AAAAAAAAAAI/AAAAAAAAACY/sP1-5E7wS5Y/photo.jpg?sz=128", "display_name": "ProjectSylosis", "link": "https://stackoverflow.com/users/5143581/projectsylosis"}, "edited": false, "score": 0, "creation_date": 1493336856, "post_id": 43645184, "comment_id": 74386125, "body": "Ah, ok! When the user accesses the <code>UsersController</code>, where do you set <code>current_user</code> by checking authenticating the cookie? Typically this is done in <code>ApplicationController</code>. Let me update my answer."}, {"owner": {"reputation": 523, "user_id": 2817111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99961f704b8fb737c723a0b403887949?s=128&d=identicon&r=PG", "display_name": "mikwat", "link": "https://stackoverflow.com/users/2817111/mikwat"}, "reply_to_user": {"reputation": 11, "user_id": 5143581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-003RySnC5sA/AAAAAAAAAAI/AAAAAAAAACY/sP1-5E7wS5Y/photo.jpg?sz=128", "display_name": "ProjectSylosis", "link": "https://stackoverflow.com/users/5143581/projectsylosis"}, "edited": false, "score": 0, "creation_date": 1493337417, "post_id": 43645184, "comment_id": 74386302, "body": "Sorry, I see it now. You might move <code>def current_user</code> and <code>def signed_in?</code> to <code>ApplicationController</code>. Then, to help debug, can you print out <code>session[:user_id]</code> when <code>current_user</code> method is called on subsequent requests?"}, {"owner": {"reputation": 11, "user_id": 5143581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-003RySnC5sA/AAAAAAAAAAI/AAAAAAAAACY/sP1-5E7wS5Y/photo.jpg?sz=128", "display_name": "ProjectSylosis", "link": "https://stackoverflow.com/users/5143581/projectsylosis"}, "edited": false, "score": 0, "creation_date": 1493400952, "post_id": 43645184, "comment_id": 74417929, "body": "Thank you for the reply, I moved them over however, it still has the same issue. Upon looking at the console after I switch to the home page form the users page, this is the result. <a href=\"https://gyazo.com/27f061eeafc1fa5e240b012cddd71b76\" rel=\"nofollow noreferrer\">link</a>. The IS NULL doesn&#39;t occur when the user logs into their page."}, {"owner": {"reputation": 523, "user_id": 2817111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99961f704b8fb737c723a0b403887949?s=128&d=identicon&r=PG", "display_name": "mikwat", "link": "https://stackoverflow.com/users/2817111/mikwat"}, "reply_to_user": {"reputation": 11, "user_id": 5143581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-003RySnC5sA/AAAAAAAAAAI/AAAAAAAAACY/sP1-5E7wS5Y/photo.jpg?sz=128", "display_name": "ProjectSylosis", "link": "https://stackoverflow.com/users/5143581/projectsylosis"}, "edited": false, "score": 0, "creation_date": 1493401820, "post_id": 43645184, "comment_id": 74418329, "body": "Do you have a <code>config&#47;initializers&#47;session_store.rb</code> file? Mine has something like this in it: <code>Rails.application.config.session_store :cookie_store, key: &#39;_myapp_session&#39;</code>"}, {"owner": {"reputation": 11, "user_id": 5143581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-003RySnC5sA/AAAAAAAAAAI/AAAAAAAAACY/sP1-5E7wS5Y/photo.jpg?sz=128", "display_name": "ProjectSylosis", "link": "https://stackoverflow.com/users/5143581/projectsylosis"}, "edited": false, "score": 0, "creation_date": 1493411990, "post_id": 43645184, "comment_id": 74423304, "body": "Yes I do, it only contains <code>Rails.application.config.session_store :cookie_store, key: &#39;_LibrarySystem_session&#39;</code>"}, {"owner": {"reputation": 523, "user_id": 2817111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99961f704b8fb737c723a0b403887949?s=128&d=identicon&r=PG", "display_name": "mikwat", "link": "https://stackoverflow.com/users/2817111/mikwat"}, "reply_to_user": {"reputation": 11, "user_id": 5143581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-003RySnC5sA/AAAAAAAAAAI/AAAAAAAAACY/sP1-5E7wS5Y/photo.jpg?sz=128", "display_name": "ProjectSylosis", "link": "https://stackoverflow.com/users/5143581/projectsylosis"}, "edited": false, "score": 0, "creation_date": 1493417673, "post_id": 43645184, "comment_id": 74425447, "body": "Can you show your <code>User</code> model? What does the <code>encrypt</code> method do?"}, {"owner": {"reputation": 11, "user_id": 5143581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-003RySnC5sA/AAAAAAAAAAI/AAAAAAAAACY/sP1-5E7wS5Y/photo.jpg?sz=128", "display_name": "ProjectSylosis", "link": "https://stackoverflow.com/users/5143581/projectsylosis"}, "edited": false, "score": 0, "creation_date": 1493462352, "post_id": 43645184, "comment_id": 74434494, "body": "Here is user.rb (was too big to paste the code in). <a href=\"https://gyazo.com/6be3dcc7383733c544ed9943d3bf343f\" rel=\"nofollow noreferrer\">link</a>, the encrpyt method encrypts the token, it was just something i was playing around with, and can also be done through the digest."}, {"owner": {"reputation": 11, "user_id": 5143581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-003RySnC5sA/AAAAAAAAAAI/AAAAAAAAACY/sP1-5E7wS5Y/photo.jpg?sz=128", "display_name": "ProjectSylosis", "link": "https://stackoverflow.com/users/5143581/projectsylosis"}, "edited": false, "score": 0, "creation_date": 1493596694, "post_id": 43645184, "comment_id": 74469080, "body": "I shall try it when I get back, then you for all the help, it&#39;s much appreciated."}, {"owner": {"reputation": 11, "user_id": 5143581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-003RySnC5sA/AAAAAAAAAAI/AAAAAAAAACY/sP1-5E7wS5Y/photo.jpg?sz=128", "display_name": "ProjectSylosis", "link": "https://stackoverflow.com/users/5143581/projectsylosis"}, "edited": false, "score": 0, "creation_date": 1493634384, "post_id": 43645184, "comment_id": 74478475, "body": "That stored the user.id as a cookie, however the remember_token still expires as it is created, seen here <a href=\"https://gyazo.com/912bff6070510c7f4eee44f6e48e258c\" rel=\"nofollow noreferrer\">link</a>."}, {"owner": {"reputation": 523, "user_id": 2817111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99961f704b8fb737c723a0b403887949?s=128&d=identicon&r=PG", "display_name": "mikwat", "link": "https://stackoverflow.com/users/2817111/mikwat"}, "reply_to_user": {"reputation": 11, "user_id": 5143581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-003RySnC5sA/AAAAAAAAAAI/AAAAAAAAACY/sP1-5E7wS5Y/photo.jpg?sz=128", "display_name": "ProjectSylosis", "link": "https://stackoverflow.com/users/5143581/projectsylosis"}, "edited": false, "score": 0, "creation_date": 1493659780, "post_id": 43645184, "comment_id": 74490561, "body": "Why don&#39;t you just put the token in the session? <code>session[:remember_token] = remember_token</code>"}], "tags": [], "owner": {"reputation": 523, "user_id": 2817111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99961f704b8fb737c723a0b403887949?s=128&d=identicon&r=PG", "display_name": "mikwat", "link": "https://stackoverflow.com/users/2817111/mikwat"}, "is_accepted": false, "score": 0, "last_activity_date": 1493509990, "last_edit_date": 1493509990, "creation_date": 1493243726, "answer_id": 43645184, "question_id": 43623380, "link": "https://stackoverflow.com/questions/43623380/user-session-not-maintaining/43645184#43645184", "title": "User session not maintaining", "body": "<p>I think I found the problem. In <code>LoginsessionsHelper#sign_in</code> the variable <code>@user</code> is not defined. Same problem with <code>current_user=</code> method. I think they should be changed as follows:</p>\n\n<pre><code>def sign_in(user)\n  remember_token = User.new_remember_token\n  cookies.permanent[:remember_token] = remember_token\n  user.update_attribute(:remember_token, User.encrypt(remember_token))\n  self.current_user = user\n  session[:user_id] = user.id\nend\n\ndef current_user=(user)\n  @current_user = user\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5143581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-003RySnC5sA/AAAAAAAAAAI/AAAAAAAAACY/sP1-5E7wS5Y/photo.jpg?sz=128", "display_name": "ProjectSylosis", "link": "https://stackoverflow.com/users/5143581/projectsylosis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493509990, "creation_date": 1493169131, "question_id": 43623380, "link": "https://stackoverflow.com/questions/43623380/user-session-not-maintaining", "title": "User session not maintaining", "body": "<p>Users can log in fine, however upon switching to another page, the session is ended. As you can see in the <a href=\"https://gyazo.com/93ca9f85fc5eb32c0adc9063c822cd7a\" rel=\"nofollow noreferrer\">gif</a> the navbar changes as if the user is logged out, and the current_user is no longer active. on the homepage, the firstname should be displayed after welcome, but it is not.</p>\n\n<p>any idea why this is happening? Cheers.</p>\n\n<p>Sessions Controller</p>\n\n<pre><code>class LoginsessionsController &lt; ApplicationController\n\ndef new\nend\n\ndef show\nend\n\ndef create\n@user = User.find_by(email: params[:loginsessions][:email].downcase)\nif @user &amp;&amp; @user.authenticate(params[:loginsessions][:password])\n  session[:user_id] = @user.id\n  sign_in(@user)\n  redirect_to @user\n else\n  flash[:notice] = \"Invalid email or password\"\n  render 'new'\n end\nend\n\ndef destroy\n signout\n session[:user_id] = nil\n  respond_to do |format|\n   format.html { redirect_to \"http://localhost:3000/\" , notice: 'You have \n   successfully signout!.'}\n  end\n end\nend\n</code></pre>\n\n<p>Sessions Helper</p>\n\n<pre><code>module LoginsessionsHelper\n\n def sign_in(user)\n remember_token = User.new_remember_token\n cookies.permanent[:remember_token] = remember_token\n user.update_attribute(:remember_token, User.encrypt(remember_token))\n self.current_user = @user\n session[:user_id] = @user.id\n end\n\n def current_user=(user)\n  @current_user = @user\n end\n\ndef current_user\n remember_token = User.encrypt(cookies[:remember_token])\n @current_user ||= User.find_by(id: session[:user_id])\nend\n\n def signed_in?\n !current_user.nil?\n end\n\ndef signout\n\n   session.delete(:user_id)\n  @current_user = nil\n end\nend\n</code></pre>\n\n<p>user controller</p>\n\n<pre><code>  class UsersController &lt; ApplicationController\n  def index\n   @user = User.new\n  end\n  def show\n  @user = User.find(params[:id])\n  #unless session[:user_id] == @user.id\n #  redirect_to \"http://localhost:3000/loginsessions/new\"\n #flash[:notice] = \"You do not have access and have been logged out\"\n #end\n  end\n\n def new\n@user = User.new\n end\n\n def create\n@user = User.new(users_params)\nif @user.save\n  sign_in @user\n  redirect_to @user\nelse\n  render 'new'\nend\n end\n\n def destroy\nsignout\nsession[:user_id] = nil\nrespond_to do |format|\n  format.html { redirect_to \"http://localhost:3000/loginsessions/new\" , \n  notice: 'You have successfully signout!.'}\n  end\n  end\n\n private\n  def users_params\nparams.require(:user).permit(:firstName, :lastName, :email, :password, \n:remember_token)\n  end\n  end\n</code></pre>\n\n<p>Application.html relevant code</p>\n\n<pre><code>   &lt;% if current_user.present? %&gt;\n      &lt;li&gt;&lt;%= link_to \"Sign out\", signout, method: \"delete\" %&gt;&lt;/li&gt;\n      &lt;li class=\"trail\"&gt;&lt;a href=\"/users/new\"&gt;Settings&lt;/a&gt;&lt;/li&gt;\n\n      &lt;% else %&gt;\n      &lt;li&gt;&lt;a href=\"/loginsessions/new\"&gt;Login&lt;/a&gt;&lt;/li&gt;\n      &lt;li class=\"trail\"&gt;&lt;a href=\"/users/new\"&gt;Signup&lt;/a&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n</code></pre>\n\n<p>Index(homepage)</p>\n\n<pre><code>  &lt;h1 class=\"welcomeMessage\"&gt;Welcome\n  &lt;% if current_user.present? %&gt;\n   &lt;%= current_user.firstName%&gt;\n\n &lt;% end%&gt;&lt;/h1&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1493168896, "post_id": 43623255, "comment_id": 74295642, "body": "As a note <code>grep</code> always returns an array, and arrays, even empty, are always logically true. That <code>if</code> will never not fire."}], "answers": [{"comments": [{"owner": {"reputation": 616, "user_id": 7922428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vINFX.png?s=128&g=1", "display_name": "Bman70", "link": "https://stackoverflow.com/users/7922428/bman70"}, "edited": false, "score": 0, "creation_date": 1493174061, "post_id": 43623370, "comment_id": 74296969, "body": "Thanks, that&#39;s the syntax I wanted. My test worked and I got the line containing the requested word. However, it seems this file&#39;s lines have \\t at the beginning. And sometimes \\n at the end. Is there a way to remove those \\t\\n characters with the same one-line syntax? i.e. so that it would function like:   matching = File.readlines(&#39;text.txt&#39;).grep(/dog|cat/)remove &#39;\\n&#39; and &#39;\\t&#39;  Or maybe I&#39;ll just have to make a 2nd variable from &#39;matching,&#39; with the tabs and newlines stripped"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 616, "user_id": 7922428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vINFX.png?s=128&g=1", "display_name": "Bman70", "link": "https://stackoverflow.com/users/7922428/bman70"}, "edited": false, "score": 0, "creation_date": 1493174197, "post_id": 43623370, "comment_id": 74297009, "body": "You can remove newlines like <code>File.readlines(...).map { |s| s.gsub(&#47;\\s+&#47;, &#39;&#39;) }</code> to strip any spaces, tabs or newlines out. You can also keep chaining off of that as necessary."}, {"owner": {"reputation": 616, "user_id": 7922428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vINFX.png?s=128&g=1", "display_name": "Bman70", "link": "https://stackoverflow.com/users/7922428/bman70"}, "edited": false, "score": 0, "creation_date": 1493184945, "post_id": 43623370, "comment_id": 74300284, "body": "That makes the line unreadable though with spaces between words gone. Could I use .map { |s| s.gsub(/\\t\\n/, &#39; &#39;) } to just take out newlines and tabs?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 616, "user_id": 7922428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vINFX.png?s=128&g=1", "display_name": "Bman70", "link": "https://stackoverflow.com/users/7922428/bman70"}, "edited": false, "score": 0, "creation_date": 1493186556, "post_id": 43623370, "comment_id": 74300950, "body": "In that case <code>&#47;[\\t\\n]&#47;</code> does it. That means &quot;any of&quot; using the <code>[...]</code> notation. <code>\\t\\n</code> otherwise means &quot;tab followed by newline&quot;."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1493169068, "creation_date": 1493169068, "answer_id": 43623370, "question_id": 43623255, "link": "https://stackoverflow.com/questions/43623255/if-line-contains-word-put-line-into-variable/43623370#43623370", "title": "If line contains word, put line into variable", "body": "<p>The general idea here would be:</p>\n\n<pre><code>matching = File.readlines('text.txt').grep(/dog|cat/)\n</code></pre>\n\n<p>Or more generally:</p>\n\n<pre><code>terms = %w[ dog cat ]\n\nmatching = File.readlines('text.txt').grep(Regexp.union(terms))\n</code></pre>\n\n<p>Since <code>matching</code> is an array you can reference elements in it like <code>matching[0]</code> or <code>matching.first</code> or iterate over it when necessary with <code>.each</code>. To assign the first match to a variable:</p>\n\n<pre><code>first_match = matching.first\n</code></pre>\n"}], "owner": {"reputation": 616, "user_id": 7922428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vINFX.png?s=128&g=1", "display_name": "Bman70", "link": "https://stackoverflow.com/users/7922428/bman70"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 43623370, "answer_count": 1, "score": -1, "last_activity_date": 1493616663, "creation_date": 1493168149, "last_edit_date": 1493616663, "question_id": 43623255, "link": "https://stackoverflow.com/questions/43623255/if-line-contains-word-put-line-into-variable", "title": "If line contains word, put line into variable", "body": "<p>I spent a few hours googling, but couldn't find an exact answer. </p>\n\n<p>I want to search through a multi-line text file, and if a line contains <code>'dog'</code>, put that line into a variable.</p>\n\n<p>Here's the code I have:</p>\n\n<pre><code>if File.foreach('textfile.txt').grep(/dog/)\n</code></pre>\n\n<p>I would like the next line of code to put the line containing <code>'dog'</code> into the variable <code>wordline</code>.</p>\n\n<p>I also might search for several terms instead of just one, i.e.:</p>\n\n<pre><code>if File.foreach('textfile.txt').grep(/cat|dog/)\n</code></pre>\n\n<p>I realize it might also be done in a different way, something like:</p>\n\n<pre><code>wordline=File.foreach('textile.txt').grep(/dog/)\n</code></pre>\n\n<p>but I don't know the syntax for that inline version. </p>\n\n<p>Edit: this is my first post ever and I'm a total Ruby newb.. which I mentioned in my post. But someone edited all that out and down voted my post. I did read the FAQ before posting, so an explanation of censorious actions would be welcome next time. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1493167934, "post_id": 43623041, "comment_id": 74295401, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2521053/how-to-read-a-user-uploaded-file-without-saving-it-to-the-database\">how to read a User uploaded file, without saving it to the database</a>"}], "owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493166548, "creation_date": 1493166548, "question_id": 43623041, "link": "https://stackoverflow.com/questions/43623041/whats-the-simplest-way-to-upload-an-image-to-an-application-with-a-form", "title": "What&#39;s the simplest way to upload an image to an application with a form?", "body": "<p>I want to simply add an image file (or I guess any type of file) to my \"app/assets/images\" folder, using a form in my app. Paperclip works great for this, but I feel like its unnecessarily complicated for such a simple task. Is there a way to do this built into Rails?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1493184776, "post_id": 43622690, "comment_id": 74300206, "body": "having class/method/variable/etc names in languages other than English is a code smell :)"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7122611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5210155a5fd7a1014f3012f791e110c8?s=128&d=identicon&r=PG&f=1", "display_name": "xarix", "link": "https://stackoverflow.com/users/7122611/xarix"}, "edited": false, "score": 0, "creation_date": 1493164164, "post_id": 43622707, "comment_id": 74294504, "body": "so how can i do it withoud derive from Proc. Methods what i have to write are .value(x), .zero(a,b,e) .area(a,b) .derivative(x)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 37, "user_id": 7122611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5210155a5fd7a1014f3012f791e110c8?s=128&d=identicon&r=PG&f=1", "display_name": "xarix", "link": "https://stackoverflow.com/users/7122611/xarix"}, "edited": false, "score": 0, "creation_date": 1493164225, "post_id": 43622707, "comment_id": 74294520, "body": "This answers your immediate question. What you&#39;re asking now is a new question and should be set up as such. You&#39;ll also have to explain what you mean by those things."}, {"owner": {"reputation": 37, "user_id": 7122611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5210155a5fd7a1014f3012f791e110c8?s=128&d=identicon&r=PG&f=1", "display_name": "xarix", "link": "https://stackoverflow.com/users/7122611/xarix"}, "edited": false, "score": 0, "creation_date": 1493164946, "post_id": 43622707, "comment_id": 74294696, "body": "Could u just tell me how extend class Proc?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 37, "user_id": 7122611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5210155a5fd7a1014f3012f791e110c8?s=128&d=identicon&r=PG&f=1", "display_name": "xarix", "link": "https://stackoverflow.com/users/7122611/xarix"}, "edited": false, "score": 0, "creation_date": 1493165902, "post_id": 43622707, "comment_id": 74294945, "body": "It could require a lot of explanation depending on what you&#39;re talking about. Open up a new question to address this issue. I got your original code working."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1493163996, "creation_date": 1493163996, "answer_id": 43622707, "question_id": 43622690, "link": "https://stackoverflow.com/questions/43622690/extends-class-proc-smth-wrong-ruby/43622707#43622707", "title": "extends class Proc smth wrong Ruby", "body": "<p>It's highly unusual to derive from Proc, but if you want to, then that's fine. You just need to use the class you've created:</p>\n\n<pre><code>f = Funkcja.new {|x| x*x*Math.sin(x)}\n</code></pre>\n\n<p>The <code>class F &lt; Proc</code> declaration does not <em>extend</em> Proc, it creates a subclass.</p>\n\n<p>It's odd here because all you're doing is creating an alias for the <code>call</code> method. You can do that with <code>alias_method</code> just the same:</p>\n\n<pre><code>class Funkcja &lt; Proc\n  alias_method :value, :call\nend\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7122611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5210155a5fd7a1014f3012f791e110c8?s=128&d=identicon&r=PG&f=1", "display_name": "xarix", "link": "https://stackoverflow.com/users/7122611/xarix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493163996, "creation_date": 1493163863, "question_id": 43622690, "link": "https://stackoverflow.com/questions/43622690/extends-class-proc-smth-wrong-ruby", "title": "extends class Proc smth wrong Ruby", "body": "<p>i have been written code which for me is correct but for some reason that doesnt work </p>\n\n<pre><code>class Funkcja &lt; Proc\n   def value(x)\n     self.call(x)\n   end\nend\n\n\nf = Proc.new {|x| x*x*Math.sin(x)}\nputs f.value(2)\n</code></pre>\n\n<p>Error what i got is undefined method `value' for #\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7823659, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ba8fc72506870c8f2c045263f4d148e?s=128&d=identicon&r=PG&f=1", "display_name": "bookaka", "link": "https://stackoverflow.com/users/7823659/bookaka"}, "edited": false, "score": 0, "creation_date": 1493530086, "post_id": 43645845, "comment_id": 74451153, "body": "why i have to change?"}], "tags": [], "owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "is_accepted": false, "score": 0, "last_activity_date": 1493247265, "creation_date": 1493247265, "answer_id": 43645845, "question_id": 43622495, "link": "https://stackoverflow.com/questions/43622495/rails-save-a-object-inside-a-method/43645845#43645845", "title": "Rails save a object inside a method", "body": "<p>You should not use Transaction as one of your models. Choose a different name. Order is another name that would suggest to change too.</p>\n"}], "owner": {"reputation": 21, "user_id": 7823659, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ba8fc72506870c8f2c045263f4d148e?s=128&d=identicon&r=PG&f=1", "display_name": "bookaka", "link": "https://stackoverflow.com/users/7823659/bookaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493247265, "creation_date": 1493162295, "question_id": 43622495, "link": "https://stackoverflow.com/questions/43622495/rails-save-a-object-inside-a-method", "title": "Rails save a object inside a method", "body": "<p>I have a method Order that if the status is completed decrease the product quantity on the method save and create a transaction record.</p>\n\n<p>Everything works fine except that in the logs shows:</p>\n\n<p>even showing the code still works</p>\n\n<p>Someone please can explain why this happen?</p>\n\n<pre><code>def order_sold\n\n    if sold\n         order = Order.find(params[:id])\n       product = order.product\n\n      if order\n        if params[:status] == 'COMPLETED'\n          order.status = Order.statuses[0]\n          product = order.product\n          quantity = product.quantity\n          product.quantity -= order.quantity\n          product.save\n          transaction = Transaction.new\n          transaction.user_id = order.buyer_id\n          transaction.status = params[:status]\n          order.transaction = transaction\n          order.save\n          OrderMailer.order_confirmation(order).deliver\n\n\n        end\n      end\n\n\n    else\n      logger.info(\"FAILED\")\n    end\n    render nothing: true\n  end\n</code></pre>\n\n<p>the logger:</p>\n\n<blockquote>\n  <p>[object Object]</p>\n  \n  <p>/data/viop/releases/167/vendor/bundle/ruby/2.2.0/gems/activerecord-3.2.22/lib/active_record/connection_adapters/abstract/database_statements.rb:371:in\n  <code>block in commit_transaction_records'\n  /data/viop/releases/167/vendor/bundle/ruby/2.2.0/gems/activerecord-3.2.22/lib/active_record/connection_adapters/abstract/database_statements.rb:370:in\n  </code>each'\n  /data/viop/releases/167/vendor/bundle/ruby/2.2.0/gems/activerecord-3.2.22/lib/active_record/connection_adapters/abstract/database_statements.rb:370:in\n  <code>commit_transaction_records'\n  /data/viop/releases/167/vendor/bundle/ruby/2.2.0/gems/activerecord-3.2.22/lib/active_record/connection_adapters/abstract/database_statements.rb:218:in\n  </code>transaction'\n  /data/viop/releases/167/vendor/bundle/ruby/2.2.0/gems/activerecord-3.2.22/lib/active_record/transactions.rb:208:in\n  <code>transaction'\n  /data/viop/releases/167/vendor/bundle/ruby/2.2.0/gems/activerecord-3.2.22/lib/active_record/transactions.rb:311:in\n  </code>with_transaction_returning_status'\n  /data/viop/releases/167/vendor/bundle/ruby/2.2.0/gems/activerecord-3.2.22/lib/active_record/transactions.rb:259:in\n  <code>block in save'\n  /data/viop/releases/167/vendor/bundle/ruby/2.2.0/gems/activerecord-3.2.22/lib/active_record/transactions.rb:270:in\n  </code>rollback_active_record_state!'\n  /data/viop/releases/167/vendor/bundle/ruby/2.2.0/gems/activerecord-3.2.22/lib/active_record/transactions.rb:258:in\n  <code>save'\n  /data/viop/releases/167/app/controllers/orders_controller.rb:216:in\n  </code>order_sold</p>\n</blockquote>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 0, "creation_date": 1493158907, "post_id": 43621856, "comment_id": 74292938, "body": "sick ruby skills wrt <code>&amp;&#39;%02X&#39;.method(:%)</code>"}, {"owner": {"reputation": 1, "user_id": 7921913, "user_type": "registered", "profile_image": "https://graph.facebook.com/1850941481794832/picture?type=large", "display_name": "Roman", "link": "https://stackoverflow.com/users/7921913/roman"}, "edited": false, "score": 0, "creation_date": 1493159954, "post_id": 43621856, "comment_id": 74293263, "body": "Thank you @J&#246;rg W Mittag"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1493158286, "creation_date": 1493158286, "answer_id": 43621856, "question_id": 43621627, "link": "https://stackoverflow.com/questions/43621627/need-a-ruby-method-to-convert-a-binary-array-to-ascii-alpha-numeric-string/43621856#43621856", "title": "Need a Ruby method to convert a binary array to ASCII alpha-numeric string", "body": "<p>Your question isn't very clear, but I guess something like this is what you are looking for:</p>\n\n<pre><code>array.map {|n| n.to_s(16).rjust(2, '0').upcase }.join\n#=&gt; \"01000B0004006AD3A901000C000800011A1920BD4DD80100010004000000000C0F\"\n</code></pre>\n\n<p>or </p>\n\n<pre><code>array.map(&amp;'%02X'.method(:%)).join\n#=&gt; \"01000B0004006AD3A901000C000800011A1920BD4DD80100010004000000000C0F\"\n</code></pre>\n\n<p>Which one of the two is more readable depends on how familiar your readers are with <code>sprintf</code>-style format strings, I guess.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7921913, "user_type": "registered", "profile_image": "https://graph.facebook.com/1850941481794832/picture?type=large", "display_name": "Roman", "link": "https://stackoverflow.com/users/7921913/roman"}, "edited": false, "score": 0, "creation_date": 1493159760, "post_id": 43621903, "comment_id": 74293192, "body": "Much appreciated. I totally spaced sprintf:) Exactly what I was after!"}, {"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "reply_to_user": {"reputation": 1, "user_id": 7921913, "user_type": "registered", "profile_image": "https://graph.facebook.com/1850941481794832/picture?type=large", "display_name": "Roman", "link": "https://stackoverflow.com/users/7921913/roman"}, "edited": false, "score": 0, "creation_date": 1493160592, "post_id": 43621903, "comment_id": 74293472, "body": "Roman, I added another answer that might surprise you. Let me know if it helps ^_^"}, {"owner": {"reputation": 1, "user_id": 7921913, "user_type": "registered", "profile_image": "https://graph.facebook.com/1850941481794832/picture?type=large", "display_name": "Roman", "link": "https://stackoverflow.com/users/7921913/roman"}, "edited": false, "score": 0, "creation_date": 1493164304, "post_id": 43621903, "comment_id": 74294543, "body": "I love this. It is taking me time to digest. I came back to using ruby and am loving it:)"}, {"owner": {"reputation": 1, "user_id": 7921913, "user_type": "registered", "profile_image": "https://graph.facebook.com/1850941481794832/picture?type=large", "display_name": "Roman", "link": "https://stackoverflow.com/users/7921913/roman"}, "edited": false, "score": 0, "creation_date": 1493164458, "post_id": 43621903, "comment_id": 74294581, "body": "This is pretty cool:) I am using mac - 6 byte values all the time and had few mispronounced or misread problems. I will try Proquint instead."}, {"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "reply_to_user": {"reputation": 1, "user_id": 7921913, "user_type": "registered", "profile_image": "https://graph.facebook.com/1850941481794832/picture?type=large", "display_name": "Roman", "link": "https://stackoverflow.com/users/7921913/roman"}, "edited": false, "score": 0, "creation_date": 1493171029, "post_id": 43621903, "comment_id": 74296123, "body": "^_^ proquint works nicely for any 16-bit value. The function above will automatically pad the bytes if an odd number is given"}], "tags": [], "owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": false, "score": 0, "last_activity_date": 1493160579, "last_edit_date": 1493160579, "creation_date": 1493158533, "answer_id": 43621903, "question_id": 43621627, "link": "https://stackoverflow.com/questions/43621627/need-a-ruby-method-to-convert-a-binary-array-to-ascii-alpha-numeric-string/43621903#43621903", "title": "Need a Ruby method to convert a binary array to ASCII alpha-numeric string", "body": "<p>I might suggest you stick to hex or base64 instead of making your own formatting</p>\n\n<pre><code>dat = [1, 0, 11, 0, 4, 0, 106, 211, 169, 1, 0, 12, 0, 8, 0, 1, 26, 25, 32, 189, 77, 216, 1, 0, 1, 0, 4, 0, 0, 0, 0, 12, 15]\n</code></pre>\n\n<p>Hexadecimal</p>\n\n<pre><code>hex = dat.map { |x| sprintf('%02x', x) }.join\n# =&gt; 01000b0004006ad3a901000c000800011a1920bd4dd80100010004000000000c0f\n</code></pre>\n\n<p>Base64</p>\n\n<pre><code>require 'base64'\nbase64 = Base64.encode64(dat.pack('c*'))\n# =&gt; AQALAAQAatOpAQAMAAgAARoZIL1N2AEAAQAEAAAAAAwP\\n\n</code></pre>\n\n<hr>\n\n<p><strong>Proquints</strong></p>\n\n<p>What? <a href=\"https://arxiv.org/html/0901.4016\" rel=\"nofollow noreferrer\">Proquints</a> are pronounceable unique identifiers which makes them great for reading/communicating binary data. In your case, maybe not the best because you're dealing with 30+ bytes here, but they're very suitable for smaller byte strings</p>\n\n<pre><code># proquint.rb\n# adapted to ruby from https://github.com/deoxxa/proquint\nmodule Proquint\n  C = %w(b d f g h j k l m n p r s t v z)\n  V = %w(a i o u)\n\n  def self.encode (bytes)\n    bytes &lt;&lt; 0 if bytes.size &amp; 1 == 1\n    bytes.pack('c*').unpack('S*').reduce([]) do |acc, n|\n      c1 = n         &amp; 0x0f\n      v1 = (n &gt;&gt; 4)  &amp; 0x03\n      c2 = (n &gt;&gt; 6)  &amp; 0x0f\n      v2 = (n &gt;&gt; 10) &amp; 0x03\n      c3 = (n &gt;&gt; 12) &amp; 0x0f\n      acc &lt;&lt; C[c1] + V[v1] + C[c2] + V[v2] + C[c3]\n    end.join('-')\n  end\n\n  def decode str\n    # learner's exercise\n    # or see some proquint library (eg) https://github.com/deoxxa/proquint\n  end\nend\n\nProquint.encode dat\n# =&gt; dabab-rabab-habab-potat-nokab-babub-babob-bahab-pihod-bohur-tadot-dabab-dabab-habab-babab-babub-zabab\n</code></pre>\n\n<p>Of course the entire process is reversible too. You might not need it, so I'll leave it as an exercise for the learner</p>\n\n<p>It's particularly nice for things like IP address, or any other short binary blobs. You gain familiarity too as you see common byte strings in their proquint form</p>\n\n<pre><code>Proquint.encode [192, 168, 11, 51] # bagop-rasag\nProquint.encode [192, 168, 11, 52] # bagop-rabig\nProquint.encode [192, 168, 11, 66] # bagop-ramah\nProquint.encode [192, 168, 22, 19] # bagop-kisad\nProquint.encode [192, 168, 22, 20] # bagop-kibid\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1493161119, "creation_date": 1493161119, "answer_id": 43622313, "question_id": 43621627, "link": "https://stackoverflow.com/questions/43621627/need-a-ruby-method-to-convert-a-binary-array-to-ascii-alpha-numeric-string/43622313#43622313", "title": "Need a Ruby method to convert a binary array to ASCII alpha-numeric string", "body": "<p>It's actually pretty simple:</p>\n\n<pre><code>def hexpack(data)\n  data.pack('C*').unpack('H*')[0]\nend\n</code></pre>\n\n<p>That packs your bytes using integer values (<code>C</code>) and unpacks the resulting string to hex (<code>H</code>). In practice:</p>\n\n<pre><code>hexpack([1, 0, 11, 0, 4, 0, 106, 211, 169, 1, 0, 12, 0, 8, 0, 1, 26, 25, 32, 189, 77, 216, 1, 0, 1, 0, 4, 0, 0, 0, 0, 12, 15])\n# =&gt; \"01000b0004006ad3a901000c000800011a1920bd4dd80100010004000000000c0f\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7921913, "user_type": "registered", "profile_image": "https://graph.facebook.com/1850941481794832/picture?type=large", "display_name": "Roman", "link": "https://stackoverflow.com/users/7921913/roman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1493161119, "creation_date": 1493157289, "last_edit_date": 1493158075, "question_id": 43621627, "link": "https://stackoverflow.com/questions/43621627/need-a-ruby-method-to-convert-a-binary-array-to-ascii-alpha-numeric-string", "title": "Need a Ruby method to convert a binary array to ASCII alpha-numeric string", "body": "<p>I have an array of <code>[1, 0, 11, 0, 4, 0, 106, 211, 169, 1, 0, 12, 0, 8, 0, 1, 26, 25, 32, 189, 77, 216, 1, 0, 1, 0, 4, 0, 0, 0, 0, 12, 15]</code>.</p>\n\n<p>I would love to create a string version mostly for logging purposes. My end result would be <code>\"01000B0004006AD3...\"</code></p>\n\n<p>I could not find a simple way to take each array byte value and pack a string with an ASCII presentation of the byte value. </p>\n\n<p>My solution is cumbersome. I appreciate advice on making the solution slick.</p>\n\n<pre><code>array.each {|x| \n  value = (x&gt;&gt;4)&amp;0x0f \n  if( value&gt;9 ) then\n    result_string.concat (value-0x0a + 'A'.ord).chr\n  else\n    result_string.concat (value + '0'.ord).chr\n  end\n  value = (x)&amp;0x0f \n  if( value&gt;9 ) then\n    result_string.concat (value-0x0a + 'A'.ord).chr\n  else\n    result_string.concat (value + '0'.ord).chr\n  end\n}\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": true, "score": 4, "last_activity_date": 1493156613, "last_edit_date": 1493156613, "creation_date": 1493156180, "answer_id": 43621394, "question_id": 43621338, "link": "https://stackoverflow.com/questions/43621338/better-way-to-print-different-error-message-base-on-different-if-condition-in-ru/43621394#43621394", "title": "Better way to print different error message base on different if condition in Ruby", "body": "<p>You could do something like this</p>\n\n<pre><code>if !promo_code.present?(self)\n  errors.add(:promo_code, message: 'Sorry! The code does not exist. Check for typos') \nelsif !promo_code.active?(self)\n  errors.add(:promo_code, message: 'Sorry! This code cannot be used at this time.')\nelsif promo_code.expired?(self) \n  errors.add(:promo_code, message: 'Sorry! This code has expired')\nelsif promo_code.applicable?(self)\n  current_customer.promo_transactions.create!(promo_code: promo_code, order_id: id)\nelse\n  false\nend\n</code></pre>\n\n<p>Or you could use inline conditions</p>\n\n<pre><code>errors.add(:promo_code, message: 'Sorry! The code does not exist. Check for typos') unless promo_code.present?(self)\nerrors.add(:promo_code, message: 'Sorry! This code cannot be used at this time.') unless promo_code.active?(self)\nerrors.add(:promo_code, message: 'Sorry! This code has expired') if promo_code.expired?(self) \ncurrent_customer.promo_transactions.create!(promo_code: promo_code, order_id: id) if promo_code.applicable?(self)\nfalse\n</code></pre>\n\n<p>take yer pick</p>\n"}], "owner": {"reputation": 13, "user_id": 6683974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c9575710908f0b6a43af475712728bc?s=128&d=identicon&r=PG&f=1", "display_name": "Robbie", "link": "https://stackoverflow.com/users/6683974/robbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 43621394, "answer_count": 1, "score": 1, "last_activity_date": 1493156613, "creation_date": 1493155965, "question_id": 43621338, "link": "https://stackoverflow.com/questions/43621338/better-way-to-print-different-error-message-base-on-different-if-condition-in-ru", "title": "Better way to print different error message base on different if condition in Ruby", "body": "<p>I wonder is there a better way to do the following?</p>\n\n<pre><code>if promo_code.present?\n    if promo_code.active?(self)\n      if !promo_code.expired?(self)\n        if promo_code.applicable?(self)\n          current_customer.promo_transactions.create!(promo_code: promo_code, order_id: id)\n        else\n          return false\n        end\n      else\n        errors.add(:promo_code, message: 'Sorry! This code has expired')\n        return false\n      end\n    else\n      errors.add(:promo_code, message: 'Sorry! This code cannot be used at this time.')\n      return false\n    end\n  else\n    errors.add(:promo_code, message: 'Sorry! The code does not exist. Check for typos')\n    return false\n  end\n</code></pre>\n\n<p>if any of the conditions fail, I need to return false and a specific error message. The way I have looks pretty dumb and wonder is there a better way of doing this?</p>\n"}, {"tags": ["ruby", "xml", "kml", "libxml2", "libxml-ruby"], "answers": [{"tags": [], "owner": {"reputation": 940, "user_id": 573719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0fd8ec69a77e30cfa30a66ad8d1762fb?s=128&d=identicon&r=PG", "display_name": "dezull", "link": "https://stackoverflow.com/users/573719/dezull"}, "is_accepted": true, "score": 1, "last_activity_date": 1493210901, "creation_date": 1493210901, "answer_id": 43634703, "question_id": 43621068, "link": "https://stackoverflow.com/questions/43621068/add-raw-xml-into-xml-document-built-with-libxml-ruby/43634703#43634703", "title": "Add raw XML into XML document built with libxml-ruby", "body": "<p><code>xml.root</code> is an instance of <code>LibXML::XML::Node</code>, its <code>&lt;&lt;</code> ,method is for adding a node. Not for parsing XML string.</p>\n\n<p>To parse a string, you can use for example <code>XML::Parser.string</code>:</p>\n\n<pre><code>xml = XML::Document.new\nxml.root = XML::Node.new(:Document)\n# Parse the string into XML::Document, then take its root node tree\nanother_doc = XML::Parser.string(raw_xml).parse\nnode = xml.import(another_doc.root)\nxml.root &lt;&lt; node\n</code></pre>\n"}], "owner": {"reputation": 2936, "user_id": 658651, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2e2032cf85e31e19a6758b193782d686?s=128&d=identicon&r=PG", "display_name": "svoop", "link": "https://stackoverflow.com/users/658651/svoop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 43634703, "answer_count": 1, "score": 0, "last_activity_date": 1493210901, "creation_date": 1493154794, "question_id": 43621068, "link": "https://stackoverflow.com/questions/43621068/add-raw-xml-into-xml-document-built-with-libxml-ruby", "title": "Add raw XML into XML document built with libxml-ruby", "body": "<p>Working with KMLs (which of course are XML), I have loads of styles which \u2013 for humans \u2013 are easiest to read and maintain as raw XML. I'd like to add those into a XML document being built with libxml-ruby.</p>\n\n<p>Here's a simplified example:</p>\n\n<pre><code>require 'xml'\n\nraw_xml = &lt;&lt;~END\n  &lt;Style&gt;\n    &lt;foo&gt;bar&lt;/foo&gt;\n  &lt;/Style&gt;\nEND\n\nxml = XML::Document.new\nxml.root = XML::Node.new(:Document)\nxml.root &lt;&lt; raw_xml\nxml.to_s\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Document&gt;&amp;lt;Style&amp;gt;\n  &amp;lt;foo&amp;gt;bar&amp;lt;/foo&amp;gt;\n&amp;lt;/Style&amp;gt;\n&lt;/Document&gt;\n</code></pre>\n\n<p>That was to be expected since <code>&lt;&lt;</code> does not parse the raw XML. My question, however, is there a way to do this right and get the the following output?</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Document&gt;\n  &lt;Style&gt;\n    &lt;foo&gt;bar&lt;/foo&gt;\n  &lt;/Style&gt;\n&lt;/Document&gt;\n</code></pre>\n\n<p>Thanks for your hints!</p>\n"}, {"tags": ["ruby", "uri", "net-http"], "answers": [{"comments": [{"owner": {"reputation": 765, "user_id": 233260, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/WS73l.jpg?s=128&g=1", "display_name": "sanpaco", "link": "https://stackoverflow.com/users/233260/sanpaco"}, "edited": false, "score": 0, "creation_date": 1493156637, "post_id": 43620246, "comment_id": 74292053, "body": "Thanks for the detailed explanation. This makes sense to me now. I guess I was overlooking the fact that the <code>&lt;&lt;</code> operator is used for string concatenation so it makes sense it wouldn&#39;t work on <code>nil</code>."}], "tags": [], "owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "is_accepted": true, "score": 1, "last_activity_date": 1493151628, "creation_date": 1493151628, "answer_id": 43620246, "question_id": 43619903, "link": "https://stackoverflow.com/questions/43619903/why-cant-i-use-the-shovel-operator-to-set-uri-query/43620246#43620246", "title": "Why can&#39;t I use the shovel operator to set uri.query?", "body": "<p>Because the parsed URL passed to the constructor had no query, so it was nil, the path is created as an empty string. Setting query to an empty string will allow this.</p>\n\n<p>This is only for example as there are better ways to set it than the shovel operator.</p>\n\n<pre><code>irb(main):001:0&gt; require 'uri'\n=&gt; true\nirb(main):002:0&gt; uri = URI('http://example.com')\n=&gt; #&lt;URI::HTTP http://example.com&gt;\nirb(main):003:0&gt; uri.path\n=&gt; \"\"\nirb(main):004:0&gt; uri.query\n=&gt; nil\nirb(main):005:0&gt; uri.query = \"\"\n=&gt; \"\"\nirb(main):006:0&gt; uri.query &lt;&lt; 'p1=value1&amp;p2=value2'\n=&gt; \"p1=value1&amp;p2=value2\"\nirb(main):007:0&gt; uri\n=&gt; #&lt;URI::HTTP http://example.com?p1=value1&amp;p2=value2&gt;\n</code></pre>\n\n<p>Better:</p>\n\n<pre><code>irb(main):011:0&gt; uri.query =+ 'p1=value1&amp;p2=value2'\n=&gt; \"p1=value1&amp;p2=value2\"\nirb(main):012:0&gt; uri\n=&gt; #&lt;URI::HTTP http://example.com?p1=value1&amp;p2=value2&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 1, "last_activity_date": 1493154019, "creation_date": 1493154019, "answer_id": 43620862, "question_id": 43619903, "link": "https://stackoverflow.com/questions/43619903/why-cant-i-use-the-shovel-operator-to-set-uri-query/43620862#43620862", "title": "Why can&#39;t I use the shovel operator to set uri.query?", "body": "<p>Because <code>nil</code> does not respond to <code>&lt;&lt;</code>, and <code>uri.query</code> is <code>nil</code> by default. </p>\n\n<pre><code>uri = URI(\"https://myhost.com\")\n# =&gt; #&lt;URI::HTTPS https://myhost.com&gt; \nuri.query\n# =&gt; nil \nnil.respond_to? :&lt;&lt;\n# =&gt; false\nuri.path\n# =&gt; \"\"\n\"\".respond_to? :&lt;&lt;\n# =&gt; true\n</code></pre>\n\n<p>Note that <code>uri.path</code> is an empty string by default. When the full URI is joined, the path effectively becomes <code>/</code>, which is why there's a trailing slash at the end of URLs: you're requesting the root path at the host server.</p>\n"}], "owner": {"reputation": 765, "user_id": 233260, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/WS73l.jpg?s=128&g=1", "display_name": "sanpaco", "link": "https://stackoverflow.com/users/233260/sanpaco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 43620246, "answer_count": 2, "score": 0, "last_activity_date": 1493154019, "creation_date": 1493150361, "question_id": 43619903, "link": "https://stackoverflow.com/questions/43619903/why-cant-i-use-the-shovel-operator-to-set-uri-query", "title": "Why can&#39;t I use the shovel operator to set uri.query?", "body": "<p>I'm using ruby URI to build a basic uri and I'm confused about something.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>uri = URI(\"https://myhost.com\")\nuri.path &lt;&lt; \"/myapi/endpoint\"\nuri.query = \"p1=value1&amp;p2=value2\"\n\nuri.to_s\n=&gt; \"https://myhost.com/myapi/endpoint?p1=value1&amp;p2=value2\"\n</code></pre>\n\n<p>This is all well and good but I don't understand why I can use <code>&lt;&lt;</code> operator to set <code>uri.path</code> but not <code>uri.query</code>?</p>\n\n<p>e.g., the follow code does not work for setting <code>uri.query</code></p>\n\n<pre><code>uri = URI(\"https://myhost.com\")\nuri.path &lt;&lt; \"/myapi/endpoint\"\nuri.query &lt;&lt; \"p1=value1&amp;p2=value2\"\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1493162012, "post_id": 43619161, "comment_id": 74293932, "body": "In Ruby <i>only</i> <code>nil</code> and <code>false</code> are logically false. Everything else, empty strings, zero, an empty array, they&#39;re all considered logically true."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1493148167, "post_id": 43619204, "comment_id": 74287430, "body": "<code>[a - b, 1].max</code> :)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1493148188, "post_id": 43619204, "comment_id": 74287448, "body": "@SergioTulentsev why you so cool? Perfect one. Can I use it or will you add it as an answer? :P"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1493148240, "post_id": 43619204, "comment_id": 74287479, "body": "Sure, take it :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1493148827, "post_id": 43619204, "comment_id": 74287821, "body": "Now that this answer is the only survivor, you ought to add some explanation. &quot;Conditionals greatly complicate your code, the less of them you have, the better, blah blah&quot; :)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1493149120, "post_id": 43619204, "comment_id": 74288001, "body": "@SergioTulentsev it is so utterly self-explanatory now that I doubt the answer needs to be any longer than exact contents of your first comment :P"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1493150566, "post_id": 43619204, "comment_id": 74288890, "body": "Though this is clever I like your original answer more because there the intent of the code is very clear."}, {"owner": {"reputation": 2993, "user_id": 1367173, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/38b2323a135aa2cd3ab9377febda4d17?s=128&d=identicon&r=PG", "display_name": "numb3rs1x", "link": "https://stackoverflow.com/users/1367173/numb3rs1x"}, "edited": false, "score": 0, "creation_date": 1493156181, "post_id": 43619204, "comment_id": 74291860, "body": "Thanks for the code! I like this one better just because I&#39;m writing it into an erb template and the shorter the better."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 11, "last_activity_date": 1557495817, "last_edit_date": 1557495817, "creation_date": 1493147981, "answer_id": 43619204, "question_id": 43619161, "link": "https://stackoverflow.com/questions/43619161/subtraction-in-ruby-no-less-than-1/43619204#43619204", "title": "subtraction in ruby no less than 1", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-max\" rel=\"nofollow noreferrer\">Enumerable#<code>max</code></a>:</p>\n\n<pre><code>def special_subtraction(a, b)\n  [a - b, 1].max\nend\n\nspecial_subtraction(4, 2)\n#=&gt; 2\nspecial_subtraction(2, 2)\n#=&gt; 1\nspecial_subtraction(3, 2)\n#=&gt; 1\n</code></pre>\n\n<p>P.S. </p>\n\n<blockquote>\n  <p>I tried a ternary operator, but a <code>0</code> result is true apparently:</p>\n</blockquote>\n\n<p>In Ruby, everything except for <code>nil</code> and <code>false</code> is considered truthy. </p>\n"}], "owner": {"reputation": 2993, "user_id": 1367173, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/38b2323a135aa2cd3ab9377febda4d17?s=128&d=identicon&r=PG", "display_name": "numb3rs1x", "link": "https://stackoverflow.com/users/1367173/numb3rs1x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "accepted_answer_id": 43619204, "answer_count": 1, "score": 2, "last_activity_date": 1557495817, "creation_date": 1493147830, "last_edit_date": 1493189873, "question_id": 43619161, "link": "https://stackoverflow.com/questions/43619161/subtraction-in-ruby-no-less-than-1", "title": "subtraction in ruby no less than 1", "body": "<p>I'm trying to figure out the best way to have a subtraction block in ruby where the result defaults to <code>1</code> if the result is less than <code>1</code>. </p>\n\n<p>I tried a ternary operator, but a <code>0</code> result is true apparently:</p>\n\n<pre><code>(2 - 2) ? (2 - 2) : 1\n</code></pre>\n\n<p>Is there a concise way to express <code>4 - 2 = 2</code>, <code>2 - 2 = 1</code> and <code>3 - 2 = 1</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "iframe", "youtube-iframe-api"], "answers": [{"tags": [], "owner": {"reputation": 5385, "user_id": 1863692, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/047956b4fb1bf3839b4e651b2cdce88e?s=128&d=identicon&r=PG", "display_name": "Andrew Hendrie", "link": "https://stackoverflow.com/users/1863692/andrew-hendrie"}, "is_accepted": false, "score": 2, "last_activity_date": 1493145554, "creation_date": 1493145554, "answer_id": 43618534, "question_id": 43618428, "link": "https://stackoverflow.com/questions/43618428/allow-youtube-iframe-in-rails-application-saved-in-textarea/43618534#43618534", "title": "Allow YouTube iFrame in Rails Application (saved in Textarea)", "body": "<p>Here's how I did it:</p>\n\n<pre><code>&lt;%= simple_format(@post.content, {}, sanitize: false) %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7615199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c2e88db46d72aabad27d35cb92a36ae?s=128&d=identicon&r=PG&f=1", "display_name": "jvilla8a", "link": "https://stackoverflow.com/users/7615199/jvilla8a"}, "is_accepted": false, "score": 1, "last_activity_date": 1493146916, "last_edit_date": 1493146916, "creation_date": 1493146064, "answer_id": 43618671, "question_id": 43618428, "link": "https://stackoverflow.com/questions/43618428/allow-youtube-iframe-in-rails-application-saved-in-textarea/43618671#43618671", "title": "Allow YouTube iFrame in Rails Application (saved in Textarea)", "body": "<p>maybe you missed adding .html_safe</p>\n\n<pre><code>&lt;%= @post.iframe.html_safe %&gt;\n</code></pre>\n"}], "owner": {"reputation": 5385, "user_id": 1863692, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/047956b4fb1bf3839b4e651b2cdce88e?s=128&d=identicon&r=PG", "display_name": "Andrew Hendrie", "link": "https://stackoverflow.com/users/1863692/andrew-hendrie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493146916, "creation_date": 1493145188, "question_id": 43618428, "link": "https://stackoverflow.com/questions/43618428/allow-youtube-iframe-in-rails-application-saved-in-textarea", "title": "Allow YouTube iFrame in Rails Application (saved in Textarea)", "body": "<p>I have a Rails model called Posts and I want my users to be able to embed a YouTube video in the content section of their post.</p>\n\n<p>The post model has fields: title (string) and content (textarea).</p>\n\n<p>Right now they can add the YouTube embed code (iframe tag) to their content; however, the iframe does not appear in the show view for the post. </p>\n\n<p>Why is this and what can I do to display the embedded video?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "simple-form"], "comments": [{"owner": {"reputation": 2232, "user_id": 1430655, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IJdhB.jpg?s=128&g=1", "display_name": "shiladitya", "link": "https://stackoverflow.com/users/1430655/shiladitya"}, "edited": false, "score": 0, "creation_date": 1493142890, "post_id": 43617668, "comment_id": 74284413, "body": "check ceremony.errors before you save it, or just do ceremony.save! . it will throw an exception with the validation error"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 2232, "user_id": 1430655, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IJdhB.jpg?s=128&g=1", "display_name": "shiladitya", "link": "https://stackoverflow.com/users/1430655/shiladitya"}, "edited": false, "score": 0, "creation_date": 1493143060, "post_id": 43617668, "comment_id": 74284510, "body": "the ceremony saves without an issue, it just doesn&#39;t create the associated awards"}, {"owner": {"reputation": 2232, "user_id": 1430655, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IJdhB.jpg?s=128&g=1", "display_name": "shiladitya", "link": "https://stackoverflow.com/users/1430655/shiladitya"}, "edited": false, "score": 0, "creation_date": 1493143310, "post_id": 43617668, "comment_id": 74284667, "body": "also, I usually also write has_many :awards in Ceremony can you try that and check?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 2232, "user_id": 1430655, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IJdhB.jpg?s=128&g=1", "display_name": "shiladitya", "link": "https://stackoverflow.com/users/1430655/shiladitya"}, "edited": false, "score": 0, "creation_date": 1493143397, "post_id": 43617668, "comment_id": 74284713, "body": "Sorry was in there but I forgot to copy - have added it now"}], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493143378, "creation_date": 1493142541, "last_edit_date": 1493143378, "question_id": 43617668, "link": "https://stackoverflow.com/questions/43617668/simple-form-for-nested-form-whitelisting-attributes", "title": "Simple_form_for nested form whitelisting attributes", "body": "<p>I'm trying to create a form that automatically saves awards to a ceremony when that ceremony is created. I have done my best to follow the guides, <a href=\"https://github.com/plataformatec/simple_form/wiki/Nested-Models\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/simple_form/wiki/Nested-Models</a>, and <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html</a>, however I keep getting the error </p>\n\n<pre><code>ActiveModel::ForbiddenAttributesError\n</code></pre>\n\n<p>My code is as follows:</p>\n\n<p>ceremony.rb</p>\n\n<pre><code>class Ceremony &lt; ApplicationRecord\n  has_many :awards\n  accepts_nested_attributes_for :awards, allow_destroy: true, reject_if: lambda { |attributes| attributes['kind'].blank?\nend\n</code></pre>\n\n<p>award.rb</p>\n\n<pre><code>class Award &lt; ApplicationRecord\n  belongs_to :ceremony\nend\n</code></pre>\n\n<p>_form.html.erb</p>\n\n<pre><code>&lt;%= simple_form_for ceremony do |f| %&gt;\n  &lt;%= f.input :title %&gt;\n  &lt;% 3.times do Award.new %&gt;\n    &lt;%= field_set_tag 'Award' do %&gt;\n      &lt;%= f.simple_fields_for 'awards_attributes[]', award do |g| %&gt;\n        &lt;%= g.input :title %&gt;\n        &lt;%= g.input :description %&gt;\n        &lt;%= g.input :category_id, as: :select, collection: Category.all %&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And finally ceremonies_controller.rb</p>\n\n<pre><code>class CeremoniesController &lt; ApplicationController\n  def create\n    ceremony = Ceremony.new(ceremony_params)\n    handle_create(ceremony)\n  end\n\n  def new\n    ceremony = Ceremony.new\n  end\n\n  private\n\n  def handle_create\n\ndef handle_create(ceremony)\n  if ceremony.save\n    create_participant_and_awards(ceremony)\n    redirect_to ceremony,\n                notice: 'Ceremony successfully created'\n  else\n    render :new, error: 'There was an error adding the ceremony'\n  end\nend\n\ndef ceremony_params\n  params.require(:ceremony).permit(:title, awards_attributes: [:title, :description, :category_id, :ceremony_id])\nend\n</code></pre>\n\n<p>When I fill out the form and click on submit, it does not create any associated awards. They are passed in the paramaters, which are as follows:</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"2MdHYpZW4POOx2STvPP8sDh6lAtisy2dJDEuC1FaKMpOHUmwsQnk6GztnrrS8E2FC5ajvuhGCdZr56QgQMQAag==\", \"ceremony\"=&gt;{\"title\"=&gt;\"Test 1\", \"organisation\"=&gt;\"test 1\", \"description\"=&gt;\"\", \"closing_time(1i)\"=&gt;\"2017\", \"closing_time(2i)\"=&gt;\"4\", \"closing_time(3i)\"=&gt;\"27\", \"closing_time(4i)\"=&gt;\"17\", \"closing_time(5i)\"=&gt;\"35\", \"organiser_id\"=&gt;\"1\", \"awards_attributes\"=&gt;[{\"title\"=&gt;\"test2\", \"description\"=&gt;\"test 2\", \"category_id\"=&gt;\"1\"}, {\"title\"=&gt;\"test 3\", \"description\"=&gt;\"test 3\", \"category_id\"=&gt;\"3\"}, {\"title\"=&gt;\"test 4\", \"description\"=&gt;\"test 4\", \"category_id\"=&gt;\"2\"}]}, \"commit\"=&gt;\"Create Ceremony\"}\n</code></pre>\n\n<p>I know I need to white list the parameters, but as far as I can see I have, following the guide. I don't get how else I can whitelist what I need. Any help is GREATLY appreciated</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations"], "comments": [{"owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "edited": false, "score": 0, "creation_date": 1493142247, "post_id": 43617509, "comment_id": 74284033, "body": "Are you displaying the checkouts individually, i.e. an <code>.each</code> loop? You should be able to display <code>checkout.user.name</code>"}, {"owner": {"reputation": 5314, "user_id": 2316763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83530038e81b3a7574ede59a6a3db454?s=128&d=identicon&r=PG", "display_name": "BHOLT", "link": "https://stackoverflow.com/users/2316763/bholt"}, "reply_to_user": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "edited": false, "score": 0, "creation_date": 1493142509, "post_id": 43617509, "comment_id": 74284183, "body": "@Okomikeruko yes, individually through an each loop. <code>checkout.user.name</code> works, but it only returns the user name. I need both the checkout and the user name. I&#39;m wondering if I can add it to a virtual attribute, or something like that."}, {"owner": {"reputation": 5314, "user_id": 2316763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83530038e81b3a7574ede59a6a3db454?s=128&d=identicon&r=PG", "display_name": "BHOLT", "link": "https://stackoverflow.com/users/2316763/bholt"}, "reply_to_user": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "edited": false, "score": 0, "creation_date": 1493142869, "post_id": 43617509, "comment_id": 74284398, "body": "I guess I&#39;m trying to combine the data of 2 objects: <code>checkouts</code> and <code>user</code>"}, {"owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "edited": false, "score": 0, "creation_date": 1493143900, "post_id": 43617509, "comment_id": 74284985, "body": "Are you saying you want <code>checkout.username</code> to do the same thing as <code>checkout.user.name</code>?"}, {"owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "edited": false, "score": 1, "creation_date": 1493144018, "post_id": 43617509, "comment_id": 74285059, "body": "If the goal is to optimize your JSON output, this thread had some answers regarding that: <a href=\"http://stackoverflow.com/questions/13678092/how-to-customize-json-output-in-rails\" title=\"how to customize json output in rails\">stackoverflow.com/questions/13678092/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5314, "user_id": 2316763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83530038e81b3a7574ede59a6a3db454?s=128&d=identicon&r=PG", "display_name": "BHOLT", "link": "https://stackoverflow.com/users/2316763/bholt"}, "edited": false, "score": 0, "creation_date": 1493162624, "post_id": 43618317, "comment_id": 74294116, "body": "Didn&#39;t know about this! It&#39;s really nice"}], "tags": [], "owner": {"reputation": 118, "user_id": 4262381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87241e5b6b5fae287f99921d41b5c338?s=128&d=identicon&r=PG", "display_name": "Ruby Junior Dev", "link": "https://stackoverflow.com/users/4262381/ruby-junior-dev"}, "is_accepted": true, "score": 1, "last_activity_date": 1493149706, "last_edit_date": 1493149706, "creation_date": 1493144802, "answer_id": 43618317, "question_id": 43617509, "link": "https://stackoverflow.com/questions/43617509/add-nested-attribute-to-associated-model-in-rails/43618317#43618317", "title": "Add nested attribute to associated model in Rails", "body": "<p>You can try this at your controller:</p>\n\n<p><code>render json: @books, include: { checkout: { only: :checkout_date,  include: { user: { only: :name } } }}</code></p>\n"}, {"comments": [{"owner": {"reputation": 5314, "user_id": 2316763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83530038e81b3a7574ede59a6a3db454?s=128&d=identicon&r=PG", "display_name": "BHOLT", "link": "https://stackoverflow.com/users/2316763/bholt"}, "edited": false, "score": 0, "creation_date": 1493162665, "post_id": 43618872, "comment_id": 74294124, "body": "This is kind of what I was trying out, but I wondered if there was a simpler way. What&#39;s the N+1 query problem?"}, {"owner": {"reputation": 689, "user_id": 3442392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aafaa8822c1eb7bfc68c47e50f83ad62?s=128&d=identicon&r=PG", "display_name": "aqfaridi", "link": "https://stackoverflow.com/users/3442392/aqfaridi"}, "reply_to_user": {"reputation": 5314, "user_id": 2316763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83530038e81b3a7574ede59a6a3db454?s=128&d=identicon&r=PG", "display_name": "BHOLT", "link": "https://stackoverflow.com/users/2316763/bholt"}, "edited": false, "score": 1, "creation_date": 1493185533, "post_id": 43618872, "comment_id": 74300529, "body": "checkout.user will fire 1 query to database for each checkout, if you use includes :user then all the corresponding users will be pre fetched in single IN query"}], "tags": [], "owner": {"reputation": 689, "user_id": 3442392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aafaa8822c1eb7bfc68c47e50f83ad62?s=128&d=identicon&r=PG", "display_name": "aqfaridi", "link": "https://stackoverflow.com/users/3442392/aqfaridi"}, "is_accepted": false, "score": 0, "last_activity_date": 1493146807, "creation_date": 1493146807, "answer_id": 43618872, "question_id": 43617509, "link": "https://stackoverflow.com/questions/43617509/add-nested-attribute-to-associated-model-in-rails/43618872#43618872", "title": "Add nested attribute to associated model in Rails", "body": "<p>You should preload the data to prevent (N+1) query problem,\nFor Display possible checkouts for particular book:</p>\n\n<pre><code>book_id = &lt;given book id&gt;\nbook = Book.find(book_id)\ncheckouts = book.checkouts.includes(:user)\nreturn_hash = {name: book.name, checkouts: []}\ncheckouts.each do |checkout|\n    return_hash[:checkouts] &lt;&lt; { checkout_data: checkout.checkout_date,\n                                 user_name: checkout.user.name\n                               }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 689, "user_id": 3442392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aafaa8822c1eb7bfc68c47e50f83ad62?s=128&d=identicon&r=PG", "display_name": "aqfaridi", "link": "https://stackoverflow.com/users/3442392/aqfaridi"}, "edited": false, "score": 0, "creation_date": 1493185903, "post_id": 43622565, "comment_id": 74300689, "body": "Dont use. attributes.merge in a loop, it will take hell lot of execution time as your application grows, i faced the same performance issue in my application, use ruby-prof to see the bottleneck in your code"}], "tags": [], "owner": {"reputation": 5314, "user_id": 2316763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83530038e81b3a7574ede59a6a3db454?s=128&d=identicon&r=PG", "display_name": "BHOLT", "link": "https://stackoverflow.com/users/2316763/bholt"}, "is_accepted": false, "score": 0, "last_activity_date": 1493162813, "creation_date": 1493162813, "answer_id": 43622565, "question_id": 43617509, "link": "https://stackoverflow.com/questions/43617509/add-nested-attribute-to-associated-model-in-rails/43622565#43622565", "title": "Add nested attribute to associated model in Rails", "body": "<p>To include other solutions, I found this worked pretty well:</p>\n\n<pre><code>checkouts = book.checkouts.unreturned.map do |checkout|\n  checkout.attributes.merge({ user_name: checkout.user.name })\nend\n\n{ checkouts: checkouts, available: book.available?, book_id: book.id }\n</code></pre>\n\n<p><code>attributes.merge</code> did the trick.</p>\n"}], "owner": {"reputation": 5314, "user_id": 2316763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83530038e81b3a7574ede59a6a3db454?s=128&d=identicon&r=PG", "display_name": "BHOLT", "link": "https://stackoverflow.com/users/2316763/bholt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 43618317, "answer_count": 3, "score": 0, "last_activity_date": 1493162813, "creation_date": 1493141994, "question_id": 43617509, "link": "https://stackoverflow.com/questions/43617509/add-nested-attribute-to-associated-model-in-rails", "title": "Add nested attribute to associated model in Rails", "body": "<p>I have three models using Active Record associations:</p>\n\n<pre><code>Book Model\nhas_many :checkouts\n\nUser Model\nhas_many :checkouts\n\nCheckout Model\nbelongs_to :book\nbelongs_to :user\n</code></pre>\n\n<p>In my view, I need the book, checkout, and user names from the checkouts.</p>\n\n<p>By using <code>Book.first.checkouts</code> I get:</p>\n\n<pre><code>#&lt;ActiveRecord::AssociationRelation\n  [#&lt;Checkout id: 30,\n    checkout_date: \"2017-04-13\",\n    return_date: nil,\n    book_id: 118,\n    user_id: 1,\n    created_at: \"2017-04-13 17:43:07\",\n    updated_at: \"2017-04-13 17:43:07\"\n  &gt;,#&lt;Checkout id: 50,\n    checkout_date: \"2017-04-13\",\n    return_date: nil,\n    book_id: 118,\n    user_id: 1,\n    created_at: \"2017-04-14 00:33:34\",\n    updated_at: \"2017-04-14 00:33:34\"&gt;\n  ]&gt;\n</code></pre>\n\n<p>But, I would like to the user name, not just the id. I've tried <code>Book.first.checkouts.map { |c| c.user.name }</code> but that returns only the name, and I need the rest of the checkout information. Ideally, my data (converted to json) looks something like:</p>\n\n<pre><code>{\n  name: \"Book Name\",\n  checkouts:  [\n    checkout_data: \"Today\",\n    user_name: \"Mary\"\n  ]\n}\n</code></pre>\n\n<p><strong>How can I add the user name to my checkout data?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1493147316, "post_id": 43616960, "comment_id": 74286934, "body": "If you can, express the number of rooms as a string. Using decimal values here is going to be trouble due to rounding issues. A &quot;one and a half bedroom&quot; thing is an abstract concept anyway. It&#39;s not literally 1.500000 bedrooms."}], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "edited": false, "score": 0, "creation_date": 1493177266, "post_id": 43617418, "comment_id": 74297754, "body": "Could your clarify where exactly they should go as I am unclear. I am exploring all possible options. Thanks for your help!"}, {"owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "edited": false, "score": 0, "creation_date": 1493218998, "post_id": 43617418, "comment_id": 74324185, "body": "While I didn&#39;t use the entire solution you provided, I took parts of it and figured out the rest. Thanks again!"}], "tags": [], "owner": {"reputation": 2232, "user_id": 1430655, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IJdhB.jpg?s=128&g=1", "display_name": "shiladitya", "link": "https://stackoverflow.com/users/1430655/shiladitya"}, "is_accepted": true, "score": 1, "last_activity_date": 1493196529, "last_edit_date": 1493196529, "creation_date": 1493141695, "answer_id": 43617418, "question_id": 43616960, "link": "https://stackoverflow.com/questions/43616960/searching-for-a-decimal-using-ruby/43617418#43617418", "title": "Searching for a decimal using Ruby", "body": "<p>You can do a small transformation to <code>bed_amounts</code> in the beginning of \n<code>bed_list_scope</code> :</p>\n\n<pre><code>bed_amounts.push('2.5') if bed_amounts.include?('2')\nbed_amounts.push('1.5') if bed_amounts.include?('1')\n</code></pre>\n\n<p>Not the best solution, but a start.</p>\n\n<p>Full method:</p>\n\n<pre><code>def bed_list_scope\n    bed_amounts.push('2.5') if bed_amounts.include?('2')\n    bed_amounts.push('1.5') if bed_amounts.include?('1')\n  if bed_amounts.empty?\n    Listing.all\n  elsif bed_amounts.include?(5)\n    Listing.where('bedrooms IN (?) OR bedrooms &gt; 5', bed_amounts)\n  else\n    Listing.where(bedrooms: bed_amounts)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "edited": false, "score": 0, "creation_date": 1493146966, "post_id": 43618648, "comment_id": 74286728, "body": "the bedrooms = [] and bed_amounts(bedrooms) goes inside the bed_amounts method?"}, {"owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "edited": false, "score": 0, "creation_date": 1493152628, "post_id": 43618648, "comment_id": 74290101, "body": "Any insight? Is it inside the method our out? When I put it outside I get an undefined_method bed_amounts error. Thanks!"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "edited": false, "score": 1, "creation_date": 1493153506, "post_id": 43618648, "comment_id": 74290561, "body": "@Mike, the 2 lines outside the method definitions are purely for testing and showing you the result (there would also have to be a parameter in bed_amounts), I publish nothing without testing, disregard them in your code, just replace the 2 methods. Edited the answer to make that more clear"}, {"owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "edited": false, "score": 0, "creation_date": 1493154130, "post_id": 43618648, "comment_id": 74290881, "body": "Gotcha! Thanks for the clarification and help!"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1493153697, "last_edit_date": 1493153697, "creation_date": 1493145972, "answer_id": 43618648, "question_id": 43616960, "link": "https://stackoverflow.com/questions/43616960/searching-for-a-decimal-using-ruby/43618648#43618648", "title": "Searching for a decimal using Ruby", "body": "<p>You could rewrite your bed_amounts like this.\nThe to_i does the same as a .floor</p>\n\n<pre><code>def bed_amounts\n  bed_list.to_s.split(',').map{|i| i.to_i}.uniq\nend\n</code></pre>\n\n<p>Since I don't have your class I did a test like this</p>\n\n<pre><code>def bed_amounts bed_list\n  bed_list.to_s.split(',').map{|i| i.to_i}.uniq\nend\n</code></pre>\n\n<p>Which gives</p>\n\n<pre><code>bedrooms = [1,1.5,2,2.5,3.5,\"5+\",nil,\"\"].join(\",\")\nbed_amounts(bedrooms) #[1, 2, 3, 5]\n</code></pre>\n\n<p>Your bed_list_scope could then be simplified like this</p>\n\n<pre><code>def bed_list_scope\n  if bed_amounts.empty?\n    Listing.all\n  elsif bed_amounts.include?(5)\n    Listing.where('bedrooms IN (?) OR bedrooms &gt; 5', bed_amounts)\n  else\n    Listing.where(bedrooms: bed_amounts)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 43617418, "answer_count": 2, "score": 1, "last_activity_date": 1493196529, "creation_date": 1493140033, "question_id": 43616960, "link": "https://stackoverflow.com/questions/43616960/searching-for-a-decimal-using-ruby", "title": "Searching for a decimal using Ruby", "body": "<p>I have a search field and if you select 1 bedrooms, it should return all 1 bedrooms and 1.5 bedrooms. Search for 2 bedrooms, should return 2 bedrooms and 2.5 bedrooms. I am not sure how to search for the half bedrooms. Below is the relevant code. Thanks in advance.</p>\n\n<p>listing_search_form.rb:</p>\n\n<pre><code>def bed_amounts\n  String(bed_list).split(',')\n    .reject(&amp;:blank?)\nend\n\ndef bed_list_scope\n  if bed_amounts.empty?\n    Listing.all\n  elsif bed_amounts.include?('5+')\n    Listing.where('bedrooms IN (?) OR bedrooms &gt;= 5', bed_amounts - ['5+'])\n  else\n    Listing.where(bedrooms: bed_amounts)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "datetime", "heroku"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1493135820, "post_id": 43615259, "comment_id": 74280085, "body": "version of PG driver? version of ActiveRecord?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1493136070, "post_id": 43615259, "comment_id": 74280284, "body": "also you&#39;re storing non-UTC values in PG but you expect the view to be in what timezone exactly?  I&#39;m not sure I&#39;m clear what raw data is in PG vs. what Rails displays..."}, {"owner": {"reputation": 3772, "user_id": 51482, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ce2095c7e253de508c4a9dd4005f4a1b?s=128&d=identicon&r=PG", "display_name": "Randy Burgess", "link": "https://stackoverflow.com/users/51482/randy-burgess"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1493138095, "post_id": 43615259, "comment_id": 74281608, "body": "Version of Active Record is 5.0.2 (like the Rails version specified above), if I access the datetimestamp in PG, it comes back as <code>01:06:10</code>  This is stored on PG as a <code>time</code> field  I have everything set to UTC. That&#39;s all I expect."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1493145652, "post_id": 43615259, "comment_id": 74285945, "body": "Does it possibly display correctly if your migration is <code>t.datetime</code>?"}, {"owner": {"reputation": 3772, "user_id": 51482, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ce2095c7e253de508c4a9dd4005f4a1b?s=128&d=identicon&r=PG", "display_name": "Randy Burgess", "link": "https://stackoverflow.com/users/51482/randy-burgess"}, "edited": false, "score": 0, "creation_date": 1493161829, "post_id": 43615259, "comment_id": 74293884, "body": "No idea. This problem never happens on local nor our staging (Heroku) server. This is unique to our Heroku production app."}], "owner": {"reputation": 3772, "user_id": 51482, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ce2095c7e253de508c4a9dd4005f4a1b?s=128&d=identicon&r=PG", "display_name": "Randy Burgess", "link": "https://stackoverflow.com/users/51482/randy-burgess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493138188, "creation_date": 1493134907, "last_edit_date": 1493138188, "question_id": 43615259, "link": "https://stackoverflow.com/questions/43615259/timestamp-is-rendered-inconsistently-on-heroku-dyno", "title": "Timestamp is rendered inconsistently on Heroku dyno", "body": "<p>I am having a rough time getting a Rails 5 view (hosted on a Heroku dyno) to render a consistent timestamp value. The Heroku support team can't figure out the issue.</p>\n\n<p>1) I visit the specific view (an order form) and observe a datetime value rendering is incorrect. The time code should be <code>2000-01-01 01:06:10</code> but instead reads <code>1999-12-31 19:06:10</code>. </p>\n\n<p>This is what is fully rendered below in the html.erb view (sourced from a datetime column in Postgres):</p>\n\n<p><code>1999-12-31 19:06:10 -0600</code></p>\n\n<p>The code used to render this timestamp is simple: <code>item.time_start</code> which is from a Model named <code>Item</code> with an attribute/column named <code>time_start</code>. No other formatting is going on with this process.</p>\n\n<p>2) I then click on the <code>Restart All Dynos</code> link on the Heroku Dashboard</p>\n\n<p>3) I immediately visit the same page and observe the time code as correct:</p>\n\n<p><code>2000-01-01 01:06:10 UTC</code></p>\n\n<p>Does anyone have ideas why this change would occur randomly during each day? Why does a server restart change the timestamp presentation?</p>\n\n<h2>Schema</h2>\n\n<pre><code>create_table \"order_items\", force: :cascade do |t|\n  t.time  \"time_start\"\n  t.time  \"time_end\"\nend\n</code></pre>\n\n<h2>Stack/Config</h2>\n\n<pre><code>Ruby 2.4.1\nRails 5.0.2\nPostgres 9.6.2\nproduction.rb setting: config.time_zone = \"UTC\"\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1493135397, "post_id": 43615248, "comment_id": 74279786, "body": "try <code>&#47;[^&#39;a-z]&#47;</code>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1493135673, "post_id": 43615248, "comment_id": 74279984, "body": "or try this: <code>&#47;[a-z&#39;]+&#47;i</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5853457"}, "edited": false, "score": 0, "creation_date": 1493135688, "post_id": 43615248, "comment_id": 74279996, "body": "it keep the single quotes :( @dagw"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5853457"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493135758, "post_id": 43615248, "comment_id": 74280046, "body": "neither @sagarpandya82"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493136681, "post_id": 43615248, "comment_id": 74280730, "body": "There seems to be some confusion, could you clarify your question a little. Maybe give a more thorough example.&gt;&gt;&gt; Okay you&#39;ve done that, can you now state the desired output for your second example?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5853457"}, "edited": false, "score": 0, "creation_date": 1493137402, "post_id": 43615248, "comment_id": 74281187, "body": "I&#39;ve edited all :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1493143442, "post_id": 43615248, "comment_id": 74284730, "body": "You said, &quot;problem is to remove all chars except &#39;apostrophe<code>&quot;. If the string were &quot;don&#39;t go until it&#39;s over&quot;, that would leave a string containing two apostropes. You mean, &quot;problem is to remove all chars except &#39;apostrophes</code> and ...&quot;, where you fill in the blanks. Distinguishing between single quotes and apostrophes is not easy (why oh why aren&#39;t they different characters?). For example, &quot;who is the &#39;femme fatale&#39; in Les&#39; play?&quot; or &quot;&#39;tis Les&#39; play&quot;."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5853457"}, "edited": false, "score": 0, "creation_date": 1493136287, "post_id": 43615657, "comment_id": 74280436, "body": "It keep the single quotes <code>&#39; &#39;</code>"}, {"owner": {"reputation": 9297, "user_id": 764546, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OfNpk.jpg?s=128&g=1", "display_name": "MikDiet", "link": "https://stackoverflow.com/users/764546/mikdiet"}, "edited": false, "score": 0, "creation_date": 1493136366, "post_id": 43615657, "comment_id": 74280503, "body": "But it meets requirements, TS does not mention he want to remove quotes too. @Nelly"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1493136373, "post_id": 43615657, "comment_id": 74280506, "body": "@Nelly: You did not say that in your example. Keeping apostrophes yet removing single quotes is a tougher problem to solve with a regex alone."}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 0, "creation_date": 1493136595, "post_id": 43615657, "comment_id": 74280669, "body": "@Nelly - I am confused??  In the question you say :- My problem is to remove all chars except &#39;apostrophe, but when presented a solution you say :- It keep the single quotes  .... which is it, do you want them or not??"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5853457"}, "edited": false, "score": 0, "creation_date": 1493136721, "post_id": 43615657, "comment_id": 74280762, "body": "I want to keep the appostrophe like here <code>Don&#39;t worry</code> and I want to remove the single quotes like  <code>&#39;Hello everyone&#39; </code>=&gt; <code>Hello everyone</code> Sorry i wasn&#39;t clear..."}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 0, "creation_date": 1493136981, "post_id": 43615657, "comment_id": 74280934, "body": "Might pay to put a second example showing that, otherwise it gets confusing.  Just to be correct, you are saying that you have data that looks like ... str = &quot;&#39;Hello everyone&#39;&quot; ... If it is not clear that is a set of double quotes outside of single quotes around the words.  Here str will look like example above."}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 1, "last_activity_date": 1493138252, "last_edit_date": 1493138252, "creation_date": 1493135992, "answer_id": 43615657, "question_id": 43615248, "link": "https://stackoverflow.com/questions/43615248/remove-all-special-char-except-apostrophe/43615657#43615657", "title": "Remove all special char except apostrophe", "body": "<p>Given:</p>\n\n<pre><code>irb(main):015:0&gt; phrase\n=&gt; \"First: don't laugh. Then: don't cry.\"\n</code></pre>\n\n<p>Try:</p>\n\n<pre><code>irb(main):011:0&gt; Hash[phrase.downcase.scan(/[a-z']+/)\n                     .group_by{|word| word.downcase}\n                     .map{|word, words|[word, words.size]}\n                    ]\n=&gt; {\"first\"=&gt;1, \"don't\"=&gt;2, \"laugh\"=&gt;1, \"then\"=&gt;1, \"cry\"=&gt;1}\n</code></pre>\n\n<hr>\n\n<p>With your update, if you want to remove single quotes, do that first:</p>\n\n<pre><code>irb(main):038:0&gt; p2\n=&gt; \"Joe can't tell between 'large' and large.\"\nirb(main):039:0&gt; p2.gsub(/(?&lt;!\\w)'|'(?!\\w)/,'')\n=&gt; \"Joe can't tell between large and large.\"\n</code></pre>\n\n<p>Then use the same method.</p>\n\n<p>But you say -- <code>gsub(/(?&lt;!\\w)'|'(?!\\w)/,'')</code>  will remove the apostrophe in <code>'Twas the night before.</code> Which I reply you will eventually need to build a parser that can determine the distinction between an apostrophe and a single quote if <code>/(?&lt;!\\w)'|'(?!\\w)/</code> is not sufficient. </p>\n\n<p>You can also use word boundaries:</p>\n\n<pre><code>irb(main):041:0&gt; Hash[p2.downcase.scan(/\\b[a-z']+\\b/)\n                  .group_by{|word| word.downcase}\n                  .map{|word, words|[word, words.size]}\n                 ]\n=&gt; {\"joe\"=&gt;1, \"can't\"=&gt;1, \"tell\"=&gt;1, \"between\"=&gt;1, \"large\"=&gt;2, \"and\"=&gt;1}\n</code></pre>\n\n<p>But that does not solve <code>'Tis the night</code> either.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1493145096, "post_id": 43616263, "comment_id": 74285599, "body": "If <code>string = &quot;&#39;tis Les&#39; play&quot;</code>, your code would return <code>{&quot;tis&quot;=&gt;1, &quot;Les&quot;=&gt;1, &quot;play&quot;=&gt;1}</code>, whereas the two apostrophes (not single quotes) should have been kept:  <code>{&quot;&#39;tis&quot;=&gt;1, &quot;Les&#39;&quot;=&gt;1, &quot;play&quot;=&gt;1}</code>. This is not so much a criticism of your answer but a testament to the difficulty of distinguishing between single quotes and apostrophes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5853457"}, "edited": false, "score": 0, "creation_date": 1493158139, "post_id": 43616263, "comment_id": 74292670, "body": "That&#39;s perfect @grail, thanks for your help !! Also thanks to everyone who tried to help :)"}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1493189030, "post_id": 43616263, "comment_id": 74302239, "body": "@CarySwoveland - not sure what type of keyboard you are on, but an apostrophe and a single quote on my keyboard are one and the same.  The only difference is for when they are used and how you would grammatically speak about them, ie when used in something like don&#39;t it is called an apostrophe but when used like so, &#39;here are some words&#39; they are called single quotes as they are now quoting text.  Hence your example makes little sense.  What I would agree with is that by quoting the intention is to keep the words together, so you might expect {&quot;tis Les&quot;=&gt;1, &quot;play&quot;=&gt;1}"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1493195263, "post_id": 43616263, "comment_id": 74306018, "body": "@grail, yes, I realize they are the same character, which is unfortunate for we coders. <code>&quot;&#39;tis Les&#39; play&quot;</code> contains one word, &quot;&#39;tis&quot;, that is a contraction that begins with an apostrophe, and another, <code>&quot;Les&#39;&quot;</code>, that is the possessive form of <code>Les&quot;</code>, the apostrophe being at the end because the word ends with an <code>&quot;s&quot;</code>. My point is simply that It would be a challenge for software to determine that both words contain an apostrophe rather than &quot;tis Les&quot;` constituting an expression that is surrounded by single quotes."}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1493197250, "post_id": 43616263, "comment_id": 74307415, "body": "@CarySwoveland - ahh, that makes much more sense now :)"}], "tags": [], "owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "is_accepted": true, "score": 4, "last_activity_date": 1493139032, "last_edit_date": 1493139032, "creation_date": 1493137867, "answer_id": 43616263, "question_id": 43615248, "link": "https://stackoverflow.com/questions/43615248/remove-all-special-char-except-apostrophe/43616263#43616263", "title": "Remove all special char except apostrophe", "body": "<p>Maybe something like:</p>\n\n<pre><code>string.scan(/\\b[\\w']+\\b/i).each_with_object(Hash.new(0)){|a,(k,v)| k[a]+=1}\n</code></pre>\n\n<p>The regex employs word boundaries (\\b).\nThe scan outputs an array of the found words and for each word in the array they are added to the hash, which has a default value of zero for each item which is then incremented.</p>\n\n<p>Turns out my solution whilst finding all items and ignoring case will still leave the items in the case they were found in originally.\nThis would now be a decision for Nelly to either accept as is or to perform a downcase on the original string or the array item as it is added to the hash.</p>\n\n<p>I'll leave that decision up to you :)</p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493147368, "post_id": 43616424, "comment_id": 74286974, "body": "Still this may not work for certain conditions but it may be good enough for you."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1493147021, "last_edit_date": 1493147021, "creation_date": 1493138371, "answer_id": 43616424, "question_id": 43615248, "link": "https://stackoverflow.com/questions/43615248/remove-all-special-char-except-apostrophe/43616424#43616424", "title": "Remove all special char except apostrophe", "body": "<p>Another way:</p>\n\n<pre><code>str = \"First: don't 'laugh'. Then: 'don't cry'.\"\nreg = /\n      [a-z]         #single letter\n      [a-z']+       #one or more letters or apostrophe\n      [a-z]         #single letter\n      '?            #optional single apostrophe\n\n      /ix           #case-insensitive and free-spacing regex\n\nstr.scan(reg).group_by(&amp;:itself).transfor\u200c\u200bm_values(&amp;:count) \n  #=&gt; {\"First\"=&gt;1, \"don't\"=&gt;2, \"laugh\"=&gt;1, \"Then\"=&gt;1, \"cry'\"=&gt;1}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5853457"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 43616263, "answer_count": 3, "score": 0, "last_activity_date": 1541276694, "creation_date": 1493134859, "last_edit_date": 1541276694, "question_id": 43615248, "link": "https://stackoverflow.com/questions/43615248/remove-all-special-char-except-apostrophe", "title": "Remove all special char except apostrophe", "body": "<p>Given a sentence, I want to count all the duplicated words:\nIt is an exercice from Exercism.io <code>Word count</code></p>\n\n<p>For example for the input <code>\"olly olly in come free\"</code></p>\n\n<p><code>plain\nolly: 2\nin: 1\ncome: 1\nfree: 1\n</code></p>\n\n<p><strong>I have this test for exemple:</strong></p>\n\n<pre><code>  def test_with_quotations\n    phrase = Phrase.new(\"Joe can't tell between 'large' and large.\")\n    counts = {\"joe\"=&gt;1, \"can't\"=&gt;1, \"tell\"=&gt;1, \"between\"=&gt;1, \"large\"=&gt;2, \"and\"=&gt;1}\n    assert_equal counts, phrase.word_count\n  end\n</code></pre>\n\n<p><strong>this is my method</strong></p>\n\n<pre><code>def word_count\n    phrase = @phrase.downcase.split(/\\W+/)\n    counts = phrase.group_by{|word| word}.map {|k,v| [k, v.count]}\n    Hash[*counts.flatten]\n  end\n</code></pre>\n\n<p>For the test above I have this failure when I run it in the terminal:</p>\n\n<pre><code>  2) Failure:\nPhraseTest#test_with_apostrophes [word_count_test.rb:69]:\n--- expected\n+++ actual\n@@ -1 +1 @@\n-{\"first\"=&gt;1, \"don't\"=&gt;2, \"laugh\"=&gt;1, \"then\"=&gt;1, \"cry\"=&gt;1}\n+{\"first\"=&gt;1, \"don\"=&gt;2, \"t\"=&gt;2, \"laugh\"=&gt;1, \"then\"=&gt;1, \"cry\"=&gt;1}\n</code></pre>\n\n<p>My problem is to remove all chars except <code>'</code>apostrophe...</p>\n\n<p>the regex in the method almost works... \n<code>phrase = @phrase.downcase.split(/\\W+/)</code>\nbut it remove the apostrophes...</p>\n\n<p>I don't want to keep the single quote around a word, <code>'Hello'</code> => <code>Hello</code>\nbut <code>Don't be cruel</code> => <code>Don't</code> <code>be</code> <code>cruel</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1999, "user_id": 1116381, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b470e79f9eb14c32bc0b8f3eb47fbd8?s=128&d=identicon&r=PG", "display_name": "Tachyons", "link": "https://stackoverflow.com/users/1116381/tachyons"}, "edited": false, "score": 0, "creation_date": 1493137434, "post_id": 43615122, "comment_id": 74281213, "body": "Try &#39; self.book.virtual_attr&#39; from before save of Author model"}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 1999, "user_id": 1116381, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b470e79f9eb14c32bc0b8f3eb47fbd8?s=128&d=identicon&r=PG", "display_name": "Tachyons", "link": "https://stackoverflow.com/users/1116381/tachyons"}, "edited": false, "score": 0, "creation_date": 1493138409, "post_id": 43615122, "comment_id": 74281792, "body": "@Tachyons but <code>Author</code> has_many books.  How will it know to grab the appropriate book?"}, {"owner": {"reputation": 7978, "user_id": 362583, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00043d88daa3d0998b41008d4a914013?s=128&d=identicon&r=PG", "display_name": "Bohdan", "link": "https://stackoverflow.com/users/362583/bohdan"}, "edited": false, "score": 0, "creation_date": 1493145349, "post_id": 43615122, "comment_id": 74285744, "body": "hello, why do you have <code>book</code> accept attributes for <code>author</code>? Have you considered passing a <code>book</code> to a method that will update an author"}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 7978, "user_id": 362583, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00043d88daa3d0998b41008d4a914013?s=128&d=identicon&r=PG", "display_name": "Bohdan", "link": "https://stackoverflow.com/users/362583/bohdan"}, "edited": false, "score": 0, "creation_date": 1493175485, "post_id": 43615122, "comment_id": 74297310, "body": "@Bohdan I am not sure I quite understand your question or your suggestion.  Would you mind elaborating a bit more?"}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 5126205, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--JknDrIGJhg/AAAAAAAAAAI/AAAAAAAAAC8/11ouI7tmT9E/photo.jpg?sz=128", "display_name": "Bittu Choudhary", "link": "https://stackoverflow.com/users/5126205/bittu-choudhary"}, "is_accepted": false, "score": 0, "last_activity_date": 1493197394, "creation_date": 1493197394, "answer_id": 43629614, "question_id": 43615122, "link": "https://stackoverflow.com/questions/43615122/rails-has-many-association-get-virtual-attribute-of-associated-object/43629614#43629614", "title": "Rails has_many association: get virtual attribute of associated object", "body": "<p>I know it's not an answer to your question but I can't post comment to question due to lack of reputation that's why posting it as an answer</p>\n\n<p>What if you maintain a virtual attribute in <code>Author</code> i.e. <code>last_updated_book</code>. Then you can query <code>author.last_updated_book.foo_virtual_attribute</code></p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493197394, "creation_date": 1493134544, "last_edit_date": 1493135129, "question_id": 43615122, "link": "https://stackoverflow.com/questions/43615122/rails-has-many-association-get-virtual-attribute-of-associated-object", "title": "Rails has_many association: get virtual attribute of associated object", "body": "<p>I have the following two associations:</p>\n\n<pre><code># models\nclass Author &lt; ApplicationRecord\n  has_many :books\nend\n\nclass Book &lt; ApplicationRecord\n  belongs_to :author\n\n  accepts_nested_attributes_for :author, allow_destroy: true\n  attr_accessor :foo_virtual_attr\nend\n</code></pre>\n\n<p>Now I populate some records</p>\n\n<pre><code>author = Author.create(name: \"John\")\nauthor.books.build(title: \"book_1\").save\nauthor.books.build(title: \"book_2\").save\nauthor.books.build(title: \"book_3\").save\n</code></pre>\n\n<p>That is the setup, here is the situation: </p>\n\n<p>Let us say I have a form that is updating a specific <code>book</code>, say the <code>book</code> record with <code>title = \"book_1\"</code>. That form has <code>nested_fields_for</code> its associated <code>author</code>, so the form is updating the associated <code>author</code> too.</p>\n\n<p>Before I call <code>update</code> in the <code>books_controller</code>, which will update the <code>book</code> and its associated <code>author</code>, I  set the book's virtual attribute of <code>foo_virtual_attr</code> to <code>true</code>.</p>\n\n<p>Now when that <code>update</code> happens: I want that <code>author</code> (the one associated to the <code>book</code>) to be able to grab the virtual attribute that is set within the associated <code>book</code>. </p>\n\n<ul>\n<li>In other words, the <code>author</code> should be able to say: \"Hey, I am being updated by <strong><em>this specific</em></strong> <code>book</code> that is associated to me, and here is the value for its virtual attribute of <code>foo_virtual_attribute</code>.\"</li>\n</ul>\n\n<p>I do not want the <code>author</code> record to query the database for the <code>book</code> because then the <code>author</code> record will not know about the book's virtual attribute.  I could probably grab the virtual attribute by digging into the params hash, but that is not ideal.  I imagine that there has to be a way for the <code>author</code> to know which of its associated <code>books</code> is causing it to be updated.</p>\n\n<p>Hopefully this makes sense.  I am not sure if this is possible...    </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 2, "creation_date": 1493136805, "post_id": 43615063, "comment_id": 74280826, "body": "Have you looked at the seek option in Ruby? <a href=\"http://ruby-doc.org/core-1.8.7/IO.html#method-i-seek\" rel=\"nofollow noreferrer\">ruby-doc.org/core-1.8.7/IO.html#method-i-seek</a>"}, {"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "reply_to_user": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 0, "creation_date": 1496757440, "post_id": 43615063, "comment_id": 75783778, "body": "Yes, I read about that and able to make it work. Thanks for your suggestion!"}], "owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493134382, "creation_date": 1493134382, "last_edit_date": 1495540011, "question_id": 43615063, "link": "https://stackoverflow.com/questions/43615063/ruby-read-lines-which-updates-latest-only-from-file", "title": "ruby read lines which updates latest only from file", "body": "<p>There is a script which updates the output to a file and planning to setup monitoring of that process and send the latest output information to central server. </p>\n\n<p>For example, the monitoring script will look for the output file for every minute and it has to read only whatever the latest data updated on the output file and send it to central server. Means it should read the old data whatever it read already. Is there any way to make this happen with <code>ruby version &gt;= 1.8.7</code></p>\n\n<p>Here is my scenario,</p>\n\n<p>the script test.sh is running which writes output to file called <code>/tmp/script_output.txt</code></p>\n\n<p>I have another monitoring script <code>jobmonitor.rb</code> which is triggered by test.sh and is used to monitor the job status and sends information to central server. Right now it reads the entire contents of <code>script_output.txt</code> file and sending the details and it has to send the information for every 2 mins for live monitoring. </p>\n\n<p>Some cases the output file <code>script_output.txt</code> will have more than 500 lines, so every 2 mins the monitoring script sending the entire content which includes 2 mins old content as well. </p>\n\n<p>So I am looking way to read the output file content for every 2 mins with the updated content only. </p>\n\n<p>For example:</p>\n\n<p>at present the script_output.txt file has contents,</p>\n\n<pre><code>line1\nline2\n.\n.\n.\nline10\n</code></pre>\n\n<p>and the monitoring script sent these information. </p>\n\n<p>Now after 2 mins the output file has below contents,</p>\n\n<pre><code>line1\nline2\n.\n.\n.\nline10\nline11\n.\n.\n.\nline 20\n</code></pre>\n\n<p>Now the monitoring script capture all 20 lines and sends the information, instead I need to send the output contents from <code>line11-20</code> only.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I tried with below,</p>\n\n<pre><code>open(filepath, 'r') do |f|\n  while true\n    puts \"#{f.readline()}\"\n    sleep 60\n  end\nend\n</code></pre>\n\n<p>it reads one line only but I want to read the n number of lines which was updated in 120secs or from next line of last read to till now.</p>\n\n<p>Note : I was raised this question already on <a href=\"https://stackoverflow.com/questions/43446881/ruby-read-lines-from-file-only-latest-updates\">https://stackoverflow.com/questions/43446881/ruby-read-lines-from-file-only-latest-updates</a> but I missed to update detailed information initially and so the question was closed. Sorry for that. </p>\n"}, {"tags": ["ruby", "class", "module"], "comments": [{"owner": {"reputation": 49, "user_id": 2499048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31435ecacce18eb5699c314e20850adf?s=128&d=identicon&r=PG", "display_name": "xXAngelJinXx", "link": "https://stackoverflow.com/users/2499048/xxangeljinxx"}, "edited": false, "score": 0, "creation_date": 1493217110, "post_id": 43614168, "comment_id": 74322578, "body": "It seems that my question was answered before in another question: <a href=\"http://stackoverflow.com/questions/3582046/add-existing-classes-into-a-module\" title=\"add existing classes into a module\">stackoverflow.com/questions/3582046/&hellip;</a> Thanks for the help &#39;down voters&#39;, I wouldn&#39;t find it if it wasn&#39;t for you! (sarcasm)"}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 1, "last_activity_date": 1493132194, "creation_date": 1493132194, "answer_id": 43614222, "question_id": 43614168, "link": "https://stackoverflow.com/questions/43614168/how-to-add-classes-in-different-files-into-one-module-in-ruby/43614222#43614222", "title": "How to add classes in different files into one module in Ruby?", "body": "<p>No there is no another way and I don't see any danger in doing it the way you did (correct way).</p>\n"}], "owner": {"reputation": 49, "user_id": 2499048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31435ecacce18eb5699c314e20850adf?s=128&d=identicon&r=PG", "display_name": "xXAngelJinXx", "link": "https://stackoverflow.com/users/2499048/xxangeljinxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1493132194, "creation_date": 1493132075, "question_id": 43614168, "link": "https://stackoverflow.com/questions/43614168/how-to-add-classes-in-different-files-into-one-module-in-ruby", "title": "How to add classes in different files into one module in Ruby?", "body": "<p>I currently creating a gem, so, I have a folder with different files, which contains different classes, this folder will be updated with more files and also current ones will be updated as well, in another file I have a module that should contain these classes.</p>\n\n<p>Currently, I add manually to the module all the classes:</p>\n\n<p>File1.rb:</p>\n\n<pre><code>module MyModule\n    class ClassA\n        # code here\n    end\nend\n</code></pre>\n\n<p>File2.rb:</p>\n\n<pre><code>module MyModule\n    class ClassB\n        # code here\n    end\nend\n</code></pre>\n\n<p>But, since I will add more classes and current classes will be updated this is not optimal and very dangerous to maintain clean, so is there any other way to add classes in different files in one module set in another file?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "base64"], "answers": [{"tags": [], "owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "is_accepted": false, "score": 0, "last_activity_date": 1493132469, "creation_date": 1493132469, "answer_id": 43614342, "question_id": 43613097, "link": "https://stackoverflow.com/questions/43613097/ruby-on-rails-read-decoded-xml-string-from-post/43614342#43614342", "title": "ruby on rails read decoded xml string from post", "body": "<p>You can probably map it to a ruby object using something like <a href=\"https://github.com/dam5s/happymapper\" rel=\"nofollow noreferrer\">Happy Mapper</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "is_accepted": false, "score": 0, "last_activity_date": 1493136779, "last_edit_date": 1493136779, "creation_date": 1493134758, "answer_id": 43615209, "question_id": 43613097, "link": "https://stackoverflow.com/questions/43613097/ruby-on-rails-read-decoded-xml-string-from-post/43615209#43615209", "title": "ruby on rails read decoded xml string from post", "body": "<p>If you're using rails, which it looks like you are, the rails team have already patched the Hash object to allow you to do this with <code>Hash.from_xml(xml_string)</code>.</p>\n\n<pre><code>&gt;   a = \"&lt;xml&gt;&lt;node1&gt;content&lt;/node1&gt;&lt;node2&gt;content2&lt;/node2&gt;&lt;node3&gt;content3&lt;/node3&gt;&lt;/xml&gt;\"\n =&gt; \"&lt;xml&gt;&lt;node1&gt;content&lt;/node1&gt;&lt;node2&gt;content2&lt;/node2&gt;&lt;node3&gt;content3&lt;/node3&gt;&lt;/xml&gt;\" \n&gt; hash = Hash.from_xml(a)\n =&gt; {\"xml\"=&gt;{\"node1\"=&gt;\"content\", \"node2\"=&gt;\"content2\", \"node3\"=&gt;\"content3\"}}\n</code></pre>\n\n<p>You then have a plain old ruby object that you can interregate as you wish. Note that this will only work with well-formed XML (your example was missing close tags)</p>\n"}], "owner": {"reputation": 1, "user_id": 5467215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3d267f43c48a74b3ec09a6362b5962?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/5467215/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 368, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493136779, "creation_date": 1493129488, "last_edit_date": 1493135352, "question_id": 43613097, "link": "https://stackoverflow.com/questions/43613097/ruby-on-rails-read-decoded-xml-string-from-post", "title": "ruby on rails read decoded xml string from post", "body": "<p>This is on rails 3/4 (two different test environments).   I have a client that base64 encodes XML in a POST.  I can decode the string, which looks like well-formed XML.  How do I turn that into XML that rails can actually recognize?  Meaning, I don't need all the information in the XML, only a few pieces of content contained in a few of the nodes.</p>\n\n<p>EX: original XML</p>\n\n<pre><code>&lt;xml....&gt;\n&lt;node1&gt;content&lt;/node1&gt;\n&lt;node2&gt;content2&lt;/node2&gt;\n&lt;node3&gt;content3&lt;/node3&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>.....\nbase64 encoded and posted in a query string</p>\n\n<p>url....?name=base64(xml)</p>\n\n<p>i can then pull the params</p>\n\n<pre><code>myvariable = Base64.decode64(params[:name])\n</code></pre>\n\n<p>at this point, myvariable is just a long string.  I'd rather not parse using a string search because the string could be pretty long.</p>\n\n<p>.....</p>\n\n<p>thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9297, "user_id": 764546, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OfNpk.jpg?s=128&g=1", "display_name": "MikDiet", "link": "https://stackoverflow.com/users/764546/mikdiet"}, "edited": false, "score": 0, "creation_date": 1493130934, "post_id": 43613054, "comment_id": 74276194, "body": "move callback to <code>before_validation</code> and remove validation itself."}], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 1, "last_activity_date": 1493131875, "creation_date": 1493131875, "answer_id": 43614083, "question_id": 43613054, "link": "https://stackoverflow.com/questions/43613054/how-can-i-do-something-atfer-validates-fail-from-particular-field-in-rails/43614083#43614083", "title": "How can I do something atfer validates fail from particular field in rails?", "body": "<p>test for the key <code>:url</code> in errors after you check if record is valid.</p>\n\n<pre><code>  def set_url\n    valid?\n    if errors.include?[:url]\n      self.url = \"https://somedimain/#{get_url_from_everywhere.split('/').last}\"\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 1, "accepted_answer_id": 43614083, "answer_count": 1, "score": -1, "last_activity_date": 1493131875, "creation_date": 1493129377, "last_edit_date": 1592644375, "question_id": 43613054, "link": "https://stackoverflow.com/questions/43613054/how-can-i-do-something-atfer-validates-fail-from-particular-field-in-rails", "title": "How can I do something atfer validates fail from particular field in rails?", "body": "<p>I have a situation like that, I wanna check a field before save if it's a correct URL then save it, if not then change it to a correct way, my question is the validates function(regexp) is similar to Rails origin validates function, I don't wanna repeat it cause DRY principle, so is there any way can call the Rails validates alone?</p>\n<p>I know I can do that by the way in below, but the syntax means check model with entire validates, so if other filed validate fail, it will change URL format, that's what I want, I wanna change URL format to correct format only when the URL format is not correct before save.</p>\n<p>What's the best way to do it?</p>\n<h1>The one way I think</h1>\n<pre><code>  def set_url\n    if self.valid?\n      self.url = get_url_from_everywhere\n    else\n      self.url = &quot;https://somedimain/#{get_url_from_everywhere.split('/').last}&quot;\n    end\n  end\n</code></pre>\n<h1>My situition codebase</h1>\n<pre><code>class Link &lt; ApplicationRecord\n\n  validates :url, format: { with: /\\A(\\A(http|https):\\/\\/)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,24}\\/?\\z/ix }\n\n  before_save :set_url\n\n  private\n\n  def set_url\n    if validates_url?(get_url_from_everywhere)\n      self.url = get_url_from_everywhere\n    else\n      self.url = &quot;https://somedimain/#{get_url_from_everywhere.split('/').last}&quot;\n    end\n  end\n\n  def get_url_from_everywhere\n    &quot;/xxx/ooo&quot; #not a correct url\n  end\n\n  def validates_url?(url)\n    #some regexp\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "bash", "docker", "rvm"], "comments": [{"owner": {"reputation": 68895, "user_id": 93448, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e592bd1326b1e80188ed4c0bf26b9f75?s=128&d=identicon&r=PG", "display_name": "Derick Bailey", "link": "https://stackoverflow.com/users/93448/derick-bailey"}, "edited": false, "score": 3, "creation_date": 1493138323, "post_id": 43612927, "comment_id": 74281738, "body": "question for you: why use rvm inside of a docker container? in my experience docker makes rvm obsolete. you stand up a new container for each ruby version you need. there&#39;s probably something i&#39;m missing, though, and i&#39;d be curious to know why you&#39;re using rvm in docker."}, {"owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "reply_to_user": {"reputation": 68895, "user_id": 93448, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e592bd1326b1e80188ed4c0bf26b9f75?s=128&d=identicon&r=PG", "display_name": "Derick Bailey", "link": "https://stackoverflow.com/users/93448/derick-bailey"}, "edited": false, "score": 0, "creation_date": 1493195760, "post_id": 43612927, "comment_id": 74306336, "body": "Good question. This is a general purpose Docker image, which is used by many projects. Each project must have an ability to use its own Ruby version, by just saying <code>rvm install 2.1.0</code>, without the necessity to create its own Docker image. All this happens in www.rultor.com project."}, {"owner": {"reputation": 68895, "user_id": 93448, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e592bd1326b1e80188ed4c0bf26b9f75?s=128&d=identicon&r=PG", "display_name": "Derick Bailey", "link": "https://stackoverflow.com/users/93448/derick-bailey"}, "edited": false, "score": 1, "creation_date": 1493215526, "post_id": 43612927, "comment_id": 74321243, "body": "interesting.... in that scenario, i would create a base image that contains everything you need before you pick the specific ruby version. from there, create additional dockerfiles that inherit <code>FROM</code> from your base image and install the specific ruby version required. no rvm needed. of course, i&#39;m dramatically oversimplifying the situation. might not be that easy in real life :)"}, {"owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "reply_to_user": {"reputation": 68895, "user_id": 93448, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e592bd1326b1e80188ed4c0bf26b9f75?s=128&d=identicon&r=PG", "display_name": "Derick Bailey", "link": "https://stackoverflow.com/users/93448/derick-bailey"}, "edited": false, "score": 1, "creation_date": 1493217593, "post_id": 43612927, "comment_id": 74322977, "body": "Your scenario is more in the spirit of Docker, but will require more steps for our users. Now, it&#39;s just a matter of saying <code>rvm install 2.1.0</code> in <a href=\"http://doc.rultor.com/reference.html\" rel=\"nofollow noreferrer\"><code>.rultor.yml</code></a> and you have Ruby 2.1.0. No Docker knowledge required."}, {"owner": {"reputation": 68895, "user_id": 93448, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e592bd1326b1e80188ed4c0bf26b9f75?s=128&d=identicon&r=PG", "display_name": "Derick Bailey", "link": "https://stackoverflow.com/users/93448/derick-bailey"}, "edited": false, "score": 0, "creation_date": 1493231632, "post_id": 43612927, "comment_id": 74332283, "body": "that&#39;s certainly a great goal! i&#39;m doing the same for another project with Node.js v7 - simplifying it so no one has to know anything about docker."}], "answers": [{"comments": [{"owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "edited": false, "score": 0, "creation_date": 1493130490, "post_id": 43613426, "comment_id": 74275832, "body": "Can you please show how exactly I have to change my <code>Dockerfile</code> so that every time I run <code>docker &#47;bin&#47;bash</code> Ruby version is 2.3.3?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "reply_to_user": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "edited": false, "score": 0, "creation_date": 1493130737, "post_id": 43613426, "comment_id": 74276042, "body": "The only one thing I can imagine is make the  initialization in the <code>ENTRYPOINT</code>  option(or <code>CMD</code>, or point <code>CMD</code> to a little shell script which does initialization), something like this <code>[[ -s &quot;&#47;path_to_rvm&#47;.rvm&#47;scripts&#47;rvm&quot; ]] &amp;&amp; . &quot;&#47;path_to_rvm&#47;.rvm&#47;scripts&#47;rvm&quot; &amp;&amp; &#47;bin&#47;bash</code>, that&#39;s should first check the rvm script, second <code>source</code> that script and load <code>bash</code> shell. <i>Note about <code>&#47;path_to_rvm</code></i>!"}, {"owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "edited": false, "score": 0, "creation_date": 1493131050, "post_id": 43613426, "comment_id": 74276301, "body": "Would be great if you just post your version of <code>Dockerfile</code> into your answer, will be convenient for others too. Thanks!"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "reply_to_user": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "edited": false, "score": 1, "creation_date": 1493131160, "post_id": 43613426, "comment_id": 74276405, "body": "Trying to make a container with ruby installed trough <code>rvm</code>, to confirm my answer."}, {"owner": {"reputation": 1714, "user_id": 121483, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Ib3Zc.jpg?s=128&g=1", "display_name": "Sjuul Janssen", "link": "https://stackoverflow.com/users/121483/sjuul-janssen"}, "edited": false, "score": 0, "creation_date": 1552846987, "post_id": 43613426, "comment_id": 97156797, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 please consider marking Alev his answer as the correct one. It&#39;s more clear."}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 23, "last_activity_date": 1576857802, "last_edit_date": 1576857802, "creation_date": 1493130278, "answer_id": 43613426, "question_id": 43612927, "link": "https://stackoverflow.com/questions/43612927/how-to-correctly-install-rvm-in-docker/43613426#43613426", "title": "How to correctly install RVM in Docker?", "body": "<p>Long story short:</p>\n\n<p><code>docker -it --rm myimage /bin/bash</code> command does not start bash as a login shell.</p>\n\n<p>Explanation:</p>\n\n<p>When you run <code>$ docker -it --rm myimage /bin/bash</code> it's invoke bash without the <code>-l</code> option which make <code>bash</code> act as if it had been invoked as a login shell, <code>rvm</code> initializations depends on the <code>source</code>-ing <code>/path/to/.rvm/scripts/rvm</code> or <code>/etc/profile.d/rvm.sh</code> and that initialization is in <code>.bash_profile</code> or <code>.bashrc</code> or any other initialization scripts.</p>\n\n<blockquote>\n  <p>How can I fix that?</p>\n</blockquote>\n\n<p>If you won't, always have the <code>ruby</code> from <code>rvm</code> add <code>-l</code> option. </p>\n\n<p>Here is a Dockerfile with installed <code>ruby</code> by <code>rvm</code>:</p>\n\n<pre><code>FROM Debian\n\nARG DEBIAN_FRONTEND=noninteractive\nRUN apt-get update -q &amp;&amp; \\\n    apt-get install -qy procps curl ca-certificates gnupg2 build-essential --no-install-recommends &amp;&amp; apt-get clean\n\nRUN gpg2 --keyserver hkp://keys.gnupg.net --recv-keys D39DC0E3\nRUN curl -sSL https://get.rvm.io | bash -s\nRUN /bin/bash -l -c \". /etc/profile.d/rvm.sh &amp;&amp; rvm install 2.3.3\"\n# The entry point here is an initialization process, \n# it will be used as arguments for e.g.\n# `docker run` command \nENTRYPOINT [\"/bin/bash\", \"-l\", \"-c\"]\n</code></pre>\n\n<p>Run the container:</p>\n\n<pre><code>\u27a0 docker_templates : docker run -ti --rm rvm 'ruby -v'\nruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-linux]\n\u27a0 docker_templates : docker run -ti --rm rvm 'rvm -v'\nrvm 1.29.1 (master) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io/]\n\u27a0 docker_templates : docker run -ti --rm rvm bash\nroot@efa1bf7cec62:/# rvm -v\nrvm 1.29.1 (master) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io/]\nroot@efa1bf7cec62:/# ruby -v\nruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-linux]\nroot@efa1bf7cec62:/# \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 212, "user_id": 9251421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19598385000992c8b5c7dd41c19eecf?s=128&d=identicon&r=PG&f=1", "display_name": "ALev", "link": "https://stackoverflow.com/users/9251421/alev"}, "is_accepted": false, "score": 10, "last_activity_date": 1534019265, "creation_date": 1534019265, "answer_id": 51803492, "question_id": 43612927, "link": "https://stackoverflow.com/questions/43612927/how-to-correctly-install-rvm-in-docker/51803492#51803492", "title": "How to correctly install RVM in Docker?", "body": "<p>Don't use <code>RUN bash -l -c rvm install 2.3.3</code>. It's very scruffy. You can set shell command by <code>SHELL [ \"/bin/bash\", \"-l\", \"-c\" ]</code> and simply call <code>RUN rvm install 2.3.3</code>.</p>\n"}], "owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13609, "favorite_count": 3, "accepted_answer_id": 43613426, "answer_count": 2, "score": 14, "last_activity_date": 1576857802, "creation_date": 1493129046, "question_id": 43612927, "link": "https://stackoverflow.com/questions/43612927/how-to-correctly-install-rvm-in-docker", "title": "How to correctly install RVM in Docker?", "body": "<p>This is what I have in my <code>Dockerfile</code>:</p>\n\n<pre><code>RUN gpg2 --keyserver hkp://keys.gnupg.net --recv-keys D39DC0E3\nRUN curl -L https://get.rvm.io | bash -s stable\nRUN /bin/bash -l -c \"rvm requirements\"\nRUN /bin/bash -l -c \"rvm install 2.3.3\"\n</code></pre>\n\n<p>Works just fine, however, when I start the container, I see this:</p>\n\n<pre><code>$ docker -it --rm myimage /bin/bash\n/root# ruby --version\nruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]\n/root# /bin/bash -l -c \"ruby --version\"\nruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-linux]\n</code></pre>\n\n<p>Obviously, this is not what I want. As far as I understand, the problem is that <code>bash</code> doesn't run <code>/etc/profile</code> by default. That's why Ruby is not coming from the RVM installation. How can I fix that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1493128687, "post_id": 43612719, "comment_id": 74274347, "body": "postgresql libs installed?"}, {"owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1493128753, "post_id": 43612719, "comment_id": 74274395, "body": "<a href=\"http://stackoverflow.com/questions/6209797/cant-find-the-postgresql-client-library-libpq\" title=\"cant find the postgresql client library libpq\">stackoverflow.com/questions/6209797/&hellip;</a> similar issues here"}, {"owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 2, "creation_date": 1493128812, "post_id": 43612719, "comment_id": 74274440, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6209797/cant-find-the-postgresql-client-library-libpq\">Can&#39;t find the PostgreSQL client library (libpq)</a>"}, {"owner": {"reputation": 1460, "user_id": 6209382, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vdnUl.jpg?s=128&g=1", "display_name": "GavinBelson", "link": "https://stackoverflow.com/users/6209382/gavinbelson"}, "reply_to_user": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1493129207, "post_id": 43612719, "comment_id": 74274765, "body": "The possible duplicate is on MacOS, this is on Centos.. different dependency issues"}, {"owner": {"reputation": 1460, "user_id": 6209382, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vdnUl.jpg?s=128&g=1", "display_name": "GavinBelson", "link": "https://stackoverflow.com/users/6209382/gavinbelson"}, "reply_to_user": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1493129553, "post_id": 43612719, "comment_id": 74275069, "body": "updated with postgresql libs installed"}, {"owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1493132015, "post_id": 43612719, "comment_id": 74277153, "body": "There are also answers for linux on that answer of the other question, it is for sure the same problem."}, {"owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1493132193, "post_id": 43612719, "comment_id": 74277307, "body": "Have you tried this?      $ sudo su     $ env ARCHFLAGS=&quot;-arch x86_64&quot; gem install pg"}], "answers": [{"comments": [{"owner": {"reputation": 1460, "user_id": 6209382, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vdnUl.jpg?s=128&g=1", "display_name": "GavinBelson", "link": "https://stackoverflow.com/users/6209382/gavinbelson"}, "edited": false, "score": 0, "creation_date": 1493133197, "post_id": 43614201, "comment_id": 74278148, "body": "Yeah, that one throw a <code>checking for libpq-fe.h... *** extconf.rb failed ***</code> error, even if I use: <code>--with-pg-config=&#47;usr&#47;pgsql-9.3&#47;bin&#47;pg_config</code>"}], "tags": [], "owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "is_accepted": false, "score": 1, "last_activity_date": 1493132157, "creation_date": 1493132157, "answer_id": 43614201, "question_id": 43612719, "link": "https://stackoverflow.com/questions/43612719/pg-gem-install-fails/43614201#43614201", "title": "pg gem install fails", "body": "<p>Have you tried this?</p>\n\n<pre><code>$ sudo su\n$ env ARCHFLAGS=\"-arch x86_64\" gem install pg\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1460, "user_id": 6209382, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vdnUl.jpg?s=128&g=1", "display_name": "GavinBelson", "link": "https://stackoverflow.com/users/6209382/gavinbelson"}, "is_accepted": true, "score": 1, "last_activity_date": 1493219955, "creation_date": 1493219955, "answer_id": 43638285, "question_id": 43612719, "link": "https://stackoverflow.com/questions/43612719/pg-gem-install-fails/43638285#43638285", "title": "pg gem install fails", "body": "<p>I had a linux brew package manager, which had some old dependencies that messed with the pg gem install. </p>\n\n<p>The answer is:</p>\n\n<ul>\n<li><p>Remove [linux brew][1]</p>\n\n<p>[1]: <a href=\"http://linuxbrew.sh/\" rel=\"nofollow noreferrer\">http://linuxbrew.sh/</a></p></li>\n<li>Uninstall Ruby With RVM</li>\n<li>Implode RVM</li>\n<li>Reinstall RVM</li>\n<li>Reinstall ruby</li>\n<li>Install pg gem with a pg config option:</li>\n</ul>\n\n<p><code>gem install pg -- --with-pg-config=/usr/pgsql-9.3/bin/pg_config</code></p>\n"}], "owner": {"reputation": 1460, "user_id": 6209382, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vdnUl.jpg?s=128&g=1", "display_name": "GavinBelson", "link": "https://stackoverflow.com/users/6209382/gavinbelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 857, "favorite_count": 0, "accepted_answer_id": 43638285, "answer_count": 2, "score": 2, "last_activity_date": 1493219955, "creation_date": 1493128561, "last_edit_date": 1495542357, "question_id": 43612719, "link": "https://stackoverflow.com/questions/43612719/pg-gem-install-fails", "title": "pg gem install fails", "body": "<p>Centos 6.9\n(similar to question: <a href=\"https://stackoverflow.com/questions/6209797/cant-find-the-postgresql-client-library-libpq\">Can&#39;t find the PostgreSQL client library (libpq)</a> but that one is on MacOS not Centos, so those solutions did not work</p>\n\n<p>ruby 2.1.8 (tried 2.2)</p>\n\n<p>rails 4.2.6 (tried 5.0)</p>\n\n<p>postgres 9.3</p>\n\n<p>I am trying to install the pg gem with:</p>\n\n<pre><code>gem install pg -- --with-pqlib=/usr/lib64/libpqxx-4.0.so --with-pg-config=/usr/pgsql-9.3/bin/pg_config\n</code></pre>\n\n<p>I keep trying to feed it different libraries but the one it is getting stuck on is some <code>PQconnectdb()</code> function. Error below</p>\n\n<p>Rails used to be installed on this computer with pg but something happend after an update.. Any ideas here?</p>\n\n<pre><code>ERROR:  Error installing pg:\nERROR: Failed to build gem native extension.\n\ncurrent directory: /home/myusername/.rvm/gems/ruby-2.1.8/gems/pg-0.14.1/ext\n/home/myusername/.rvm/rubies/ruby-2.1.8/bin/ruby -r ./siteconf20170425-12873-191077o.rb extconf.rb --with-pqlib=/usr/lib64/libpqxx-4.0.so --with-pg-config=/usr/pgsql-9.3/bin/pg_config\nUsing config values from /usr/pgsql-9.3/bin/pg_config\nextconf.rb:34: warning: Insecure world writable dir /opt/anaconda in PATH, mode 040777\nchecking for libpq-fe.h... yes\nchecking for libpq/libpq-fs.h... yes\nchecking for pg_config_manual.h... yes\nchecking for PQconnectdb() in -l/usr/lib64/libpqxx-4.0.so... no\nchecking for PQconnectdb() in -llibpq... no\nchecking for PQconnectdb() in -lms/libpq... no\nCan't find the PostgreSQL client library (libpq)\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n</code></pre>\n\n<p>Installed pg libraries:<code>Installed Packages\npostgresql93.x86_64                                   9.3.16-1PGDG.rhel6<br>\npostgresql93-contrib.x86_64                           9.3.16-1PGDG.rhel6<br>\npostgresql93-debuginfo.x86_64                         9.3.16-1PGDG.rhel6<br>\npostgresql93-devel.x86_64                             9.3.16-1PGDG.rhel6<br>\npostgresql93-docs.x86_64                              9.3.16-1PGDG.rhel6<br>\npostgresql93-libs.x86_64                              9.3.16-1PGDG.rhel6<br>\npostgresql93-odbc.x86_64                              09.06.0100-1PGDG.rhel6<br>\npostgresql93-odbc-debuginfo.x86_64                    09.03.0400-1PGDG.rhel6<br>\npostgresql93-plperl.x86_64                            9.3.16-1PGDG.rhel6<br>\npostgresql93-plpython.x86_64                          9.3.16-1PGDG.rhel6<br>\npostgresql93-pltcl.x86_64                             9.3.16-1PGDG.rhel6<br>\npostgresql93-server.x86_64                            9.3.16-1PGDG.rhel6<br>\npostgresql93-tcl.x86_64                               2.1.1-1.rhel6<br>\npostgresql93-tcl-debuginfo.x86_64                     2.1.1-1.rhel6<br>\npostgresql93-test.x86_64                              9.3.16-1PGDG.rhel6</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "app-store-connect", "fastlane"], "answers": [{"tags": [], "owner": {"reputation": 5003, "user_id": 2695965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLElH.png?s=128&g=1", "display_name": "Max", "link": "https://stackoverflow.com/users/2695965/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1493130699, "creation_date": 1493130699, "answer_id": 43613592, "question_id": 43612698, "link": "https://stackoverflow.com/questions/43612698/creating-ios-purchase-on-ruby-on-rails-server/43613592#43613592", "title": "Creating IOS purchase on Ruby on Rails server", "body": "<p><a href=\"https://github.com/fastlane/fastlane/tree/master/spaceship/lib/spaceship/tunes\" rel=\"nofollow noreferrer\">Spaceship</a> from Fastlane includes the ability to create and manage IAPs:\n<a href=\"https://github.com/fastlane/fastlane/blob/master/spaceship/lib/spaceship/tunes/iap.rb\" rel=\"nofollow noreferrer\">https://github.com/fastlane/fastlane/blob/master/spaceship/lib/spaceship/tunes/iap.rb</a></p>\n\n<p>Otherwise you only have the \"ugly\" iTMSTransporter to upload IAPs, I don't think it allows to actually create them on iTC.</p>\n"}], "owner": {"reputation": 25, "user_id": 7378546, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ljJL1vHK5D0/AAAAAAAAAAI/AAAAAAAAADM/fYwu-Xd8F1Y/photo.jpg?sz=128", "display_name": "Artem Chervychnyk", "link": "https://stackoverflow.com/users/7378546/artem-chervychnyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 43613592, "answer_count": 1, "score": 0, "last_activity_date": 1493130699, "creation_date": 1493128519, "question_id": 43612698, "link": "https://stackoverflow.com/questions/43612698/creating-ios-purchase-on-ruby-on-rails-server", "title": "Creating IOS purchase on Ruby on Rails server", "body": "<p>If somebody knows the way that i can create in-app purchases for IOS from my admin panel (written on Ruby with ROR) I would really appreciate your help. I know Google provides this functionality to add in-apps throw his api, I hope that Apple does too. I watched docs of <a href=\"https://github.com/fastlane/fastlane\" rel=\"nofollow noreferrer\">Fastlane</a> gem and didn't found anything related to this.</p>\n"}, {"tags": ["ruby", "jenkins", "cucumber", "appium", "rakefile"], "comments": [{"owner": {"reputation": 11556, "user_id": 6090676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5234122477a1ef7cce1b490ffe69241d?s=128&d=identicon&r=PG&f=1", "display_name": "burnettk", "link": "https://stackoverflow.com/users/6090676/burnettk"}, "edited": false, "score": 0, "creation_date": 1493138406, "post_id": 43612140, "comment_id": 74281790, "body": "i think you&#39;re saying you can get on the box in question and run the command (that&#39;s failing in jenkins) successfully. if so, maybe you are using a different ruby (like <a href=\"http://stackoverflow.com/questions/34273986/jenkins-slave-doesnt-use-same-ruby-version-as-on-local-terminal\" title=\"jenkins slave doesnt use same ruby version as on local terminal\">stackoverflow.com/questions/34273986/&hellip;</a>). try <code>which ruby</code> in both contexts. are you using rbenv or rvm (or similar) when you run it outside of jenkins? if so, you&#39;ll need to initialize these in order to use them from jenkins."}, {"owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "reply_to_user": {"reputation": 11556, "user_id": 6090676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5234122477a1ef7cce1b490ffe69241d?s=128&d=identicon&r=PG&f=1", "display_name": "burnettk", "link": "https://stackoverflow.com/users/6090676/burnettk"}, "edited": false, "score": 0, "creation_date": 1493140505, "post_id": 43612140, "comment_id": 74283051, "body": "Ruby that is installed in my mac is 2.4.1., I am not using rvm or rbenv."}, {"owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "reply_to_user": {"reputation": 11556, "user_id": 6090676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5234122477a1ef7cce1b490ffe69241d?s=128&d=identicon&r=PG&f=1", "display_name": "burnettk", "link": "https://stackoverflow.com/users/6090676/burnettk"}, "edited": false, "score": 0, "creation_date": 1493377750, "post_id": 43612140, "comment_id": 74403301, "body": "I had basically forgot to add <code>Gemfile</code> and <code>Gemfile.lock</code>. I did a <code>bundle install</code> and it fixed all the errors"}], "owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 383, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493129152, "creation_date": 1493127097, "last_edit_date": 1493129152, "question_id": 43612140, "link": "https://stackoverflow.com/questions/43612140/ruby-cucumber-integration-to-jenkins-bitbucket", "title": "Ruby/Cucumber: Integration to Jenkins : Bitbucket", "body": "<p><strong>NOTE: Jenkins linked to the machine, where all the automation set up is done, and cucumber test steps can be run with the command <code>cucumber</code> flawlessly.</strong></p>\n\n<p>I have a repository in bitbucket, and I am trying to get it run on the jenkins on each change to my repository.</p>\n\n<p>Currently, the tests that I have written with cucumber/gherkin and ruby are for mobile automation tests with appium using <code>appium_lib</code></p>\n\n<p>I am trying to get this run in the jenkins but, jenkins would keep displaying the error <code>can't find gem bundler (&gt;= 0.a)</code> . </p>\n\n<p>I am new to JENKINS integration.</p>\n\n<ol>\n<li>I have integrated to bitbucket successfully</li>\n<li>I have set up jenkins and configured the slave to be my machine* (where i have all the cucumber, appium and ruby set up done) and the slave shows as IDLE status.</li>\n</ol>\n\n<p>I wanted to know if there are any additional steps that I have to install or configure in jenkins to have these tests running. I see that a workspace has been created by jenkins in the system and all the files has been copied to it.</p>\n\n<p>Any help is greatly appreciated.</p>\n\n<p><strong>The error logs</strong></p>\n\n<pre><code>[Testappium] $ rake --rakefile /usr/local/bin/bundle\nrake aborted!\ncan't find gem bundler (&gt;= 0.a)\n/usr/local/bin/bundle:22:in `&lt;top (required)&gt;'\n(See full trace by running task with --trace)\nBuild step 'Invoke Rake' marked build as failure\n[CucumberReportPublisher] Compiling Cucumber Reports ...\n[CucumberReportPublisher] Copying all json files from slave: /Users/jain/Documents/fslearning-android/workspace/Testappium to master reports directory: /var/lib/jenkins/jobs/Testappium/builds/13\n[CucumberReportPublisher] Found 0 json files:\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "ruby-on-rails-5.1"], "comments": [{"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 0, "creation_date": 1493124200, "post_id": 43610537, "comment_id": 74270806, "body": "By appending <code>reject(&amp;:zero?)</code>, makes the array empty for some reason in rails but not so in the console."}, {"owner": {"reputation": 708, "user_id": 2039022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e17df403468506108ec8c03ac6af6258?s=128&d=identicon&r=PG", "display_name": "seaify - Freelancer", "link": "https://stackoverflow.com/users/2039022/seaify-freelancer"}, "edited": false, "score": 0, "creation_date": 1493124401, "post_id": 43610537, "comment_id": 74270947, "body": "paste <code>data</code> and <code>res</code> value in the controller."}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "reply_to_user": {"reputation": 708, "user_id": 2039022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e17df403468506108ec8c03ac6af6258?s=128&d=identicon&r=PG", "display_name": "seaify - Freelancer", "link": "https://stackoverflow.com/users/2039022/seaify-freelancer"}, "edited": false, "score": 0, "creation_date": 1493124492, "post_id": 43610537, "comment_id": 74271023, "body": "data shows the array. res is 0. when in the console, shows 1. I expect to see 1."}, {"owner": {"reputation": 708, "user_id": 2039022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e17df403468506108ec8c03ac6af6258?s=128&d=identicon&r=PG", "display_name": "seaify - Freelancer", "link": "https://stackoverflow.com/users/2039022/seaify-freelancer"}, "edited": false, "score": 0, "creation_date": 1493124685, "post_id": 43610537, "comment_id": 74271178, "body": "it must be data problem. check every step, if <code>data</code> match, then check if <code>arr </code>match. add a <code>ruby-debug</code> for it, it&#39;s very simple to find problem actually."}, {"owner": {"reputation": 708, "user_id": 2039022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e17df403468506108ec8c03ac6af6258?s=128&d=identicon&r=PG", "display_name": "seaify - Freelancer", "link": "https://stackoverflow.com/users/2039022/seaify-freelancer"}, "edited": false, "score": 0, "creation_date": 1493124890, "post_id": 43610537, "comment_id": 74271325, "body": "focus on this method <code>pluck(:x)</code> and array dimension"}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "reply_to_user": {"reputation": 708, "user_id": 2039022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e17df403468506108ec8c03ac6af6258?s=128&d=identicon&r=PG", "display_name": "seaify - Freelancer", "link": "https://stackoverflow.com/users/2039022/seaify-freelancer"}, "edited": false, "score": 0, "creation_date": 1493134407, "post_id": 43610537, "comment_id": 74279053, "body": "Ok, got it. What&#39;s the difference with <code>pluck(:x)</code> and <code>pluck(&quot;x&quot;)</code>? As I&#39;ve said, this is a json object. When used <code>pluck(&quot;x&quot;)</code>, all is well."}], "owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493123957, "creation_date": 1493122935, "last_edit_date": 1493123957, "question_id": 43610537, "link": "https://stackoverflow.com/questions/43610537/console-shows-correct-value-but-views-incorrect", "title": "Console shows correct value but view&#39;s incorrect", "body": "<p>Im getting a json object with HTTPart gem. I need to iterate, convert to integer then do x:</p>\n\n<pre><code>data.first[\"x\"] = [\"0\", \"0\", \"2\", \"5\" ]\n</code></pre>\n\n<p>I need to convert the values to int:</p>\n\n<pre><code>arr = data.pluck(:x).map(&amp;:to_i) # How to remove all zeros in one go?\n</code></pre>\n\n<p>I need to remove all <code>0</code>:</p>\n\n<p><code>arr.delete(0)</code> then <code>arr.count{|e| e &lt; 3}</code></p>\n\n<p>when I do a puts on <code>arr.count{|e| e &lt; 3}</code>, I get <code>2</code> but my views show <code>0</code>. Huh?</p>\n\n<pre><code>@result = arr.count{|e| e &lt; 3} # Shows 2 in console but 0 in views. What's going on?\n</code></pre>\n\n<p>Edit for code view:</p>\n\n<pre><code>class ClientController &lt; ApplicationController\n def show\n  serpurl = params[:serpurl] # https://serpbook.com/serp/api/?viewkey=2222&amp;auth=2222\n  @data = HTTParty.get(serpurl)\n  arr = @data.pluck(:x).map(&amp;:to_i).reject(&amp;:zero?)\n  @res = arr.count{|e| e &lt; 3}\n  puts arr # Shows empty array\n end\nend\n</code></pre>\n\n<p>If I copy and paste the above in the rails console, I see expected value.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 4, "creation_date": 1493123003, "post_id": 43610500, "comment_id": 74269918, "body": "Can you explain why?"}, {"owner": {"reputation": 12312, "user_id": 290187, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GoNpV.png?s=128&g=1", "display_name": "T McKeown", "link": "https://stackoverflow.com/users/290187/t-mckeown"}, "edited": false, "score": 2, "creation_date": 1493123070, "post_id": 43610500, "comment_id": 74269969, "body": "you don&#39;t convert strings, you can only create different strings.  your question isn&#39;t making sense."}, {"owner": {"reputation": 333, "user_id": 857184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yKQBD.jpg?s=128&g=1", "display_name": "David Stanley", "link": "https://stackoverflow.com/users/857184/david-stanley"}, "edited": false, "score": 1, "creation_date": 1493125023, "post_id": 43610500, "comment_id": 74271436, "body": "Do you mean you want: <code>[&#39;County&#39;, &#39;blue&#39;, &#39;of&#39;, &#39;origin&#39;]</code>?"}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 0, "creation_date": 1493128420, "post_id": 43610500, "comment_id": 74274125, "body": "I am curious on why the limitation on not using split?  Seems odd to remove a tool which is well suited to the task."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1493129494, "post_id": 43610500, "comment_id": 74275003, "body": "Is this an exercise?  It may be that your instructor wants to test your looping logic?"}], "answers": [{"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 2, "last_activity_date": 1493138946, "last_edit_date": 1592644375, "creation_date": 1493123214, "answer_id": 43610649, "question_id": 43610500, "link": "https://stackoverflow.com/questions/43610500/how-to-split-string-using-regexp-in-ruby/43610649#43610649", "title": "How to split string using regexp in ruby", "body": "<p>Your could use <code>scan</code>:</p>\n<pre><code>str.scan(/\\w+/)\n#=&gt; [&quot;Country&quot;, &quot;blue&quot;, &quot;of&quot;, &quot;origin&quot;]\n</code></pre>\n<p>This will work not only with commas, but any non-numeric, non-letter character (except <code>_</code>).</p>\n<p><strong>UPDATE</strong></p>\n<p>Looking closely at your desired output, it seems that you want to keep the spaces between commas:</p>\n<blockquote>\n<p>I want a desired output like this.</p>\n<blockquote>\n<p>[Country ,blue,of, origin]</p>\n</blockquote>\n</blockquote>\n<p>If so, use this instead:</p>\n<pre><code>str.scan(/[\\w\\s]+/)\n#=&gt; [&quot;Country &quot;, &quot;blue&quot;, &quot;of&quot;, &quot; origin&quot;]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "is_accepted": false, "score": 0, "last_activity_date": 1493123253, "creation_date": 1493123253, "answer_id": 43610666, "question_id": 43610500, "link": "https://stackoverflow.com/questions/43610500/how-to-split-string-using-regexp-in-ruby/43610666#43610666", "title": "How to split string using regexp in ruby", "body": "<p>Here is the solution convert string to array without split</p>\n\n<pre><code>str = \"Country ,blue,of, origin\"\n\n Array(str.chars.join(\"\"))\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 6507275, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3a3d4c07b9fcb38f037c3da4c1e46cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen M", "link": "https://stackoverflow.com/users/6507275/stephen-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 43610649, "answer_count": 2, "score": -4, "last_activity_date": 1493244388, "creation_date": 1493122842, "last_edit_date": 1493200717, "question_id": 43610500, "link": "https://stackoverflow.com/questions/43610500/how-to-split-string-using-regexp-in-ruby", "title": "How to split string using regexp in ruby", "body": "<p>I need to split my string based on Boolean operators.  </p>\n\n<p>Now i'm using </p>\n\n<p><code>.split(/(.+?)((?: AND | OR | NOT ))/).reject(&amp;:empty?).reject(&amp;:blank?)</code> </p>\n\n<p>In this method it did not split if the string starts with Boolean operators. </p>\n\n<p>Tested strings </p>\n\n<ol>\n<li><p>a AND b</p></li>\n<li><p>AND b</p></li>\n</ol>\n\n<p>returned output </p>\n\n<ol>\n<li><p>[\"a\",\"AND\",\"b\"]</p></li>\n<li><p>[\"AND b\"]</p></li>\n</ol>\n\n<p>what am i missed.</p>\n"}, {"tags": ["ruby", "ajax", "ruby-on-rails-4", "controller"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1493123442, "post_id": 43609930, "comment_id": 74270233, "body": "<a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/json/rdoc/JSON.html#method-i-parse\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.0.0/libdoc/json/rdoc/&hellip;</a>, but normally params object is already parsed."}, {"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "edited": false, "score": 0, "creation_date": 1493135567, "post_id": 43609930, "comment_id": 74279907, "body": "can you submit what you are getting at the php server?"}, {"owner": {"reputation": 39, "user_id": 5078151, "user_type": "registered", "profile_image": "https://graph.facebook.com/1027582673948534/picture?type=large", "display_name": "Kurian Benny", "link": "https://stackoverflow.com/users/5078151/kurian-benny"}, "edited": false, "score": 0, "creation_date": 1493182294, "post_id": 43609930, "comment_id": 74299175, "body": "I got the below content after using this code  Code : @inputDets = CGI::parse(params[:data]) Result :  {&quot;id&quot;=&gt;&quot;&quot;, &quot;data&quot;=&gt;&quot;name=testname&amp;type=create&amp;aliasname=test&amp;aliases%5B&zwnj;&#8203;1%5D=test&amp;aliases%5B&zwnj;&#8203;2%5D=test1&quot;, &quot;action&quot;=&gt;&quot;add&quot;, &quot;controller&quot;=&gt;&quot;app/test&quot;}"}], "owner": {"reputation": 39, "user_id": 5078151, "user_type": "registered", "profile_image": "https://graph.facebook.com/1027582673948534/picture?type=large", "display_name": "Kurian Benny", "link": "https://stackoverflow.com/users/5078151/kurian-benny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493121147, "creation_date": 1493121147, "question_id": 43609930, "link": "https://stackoverflow.com/questions/43609930/how-can-i-unserialize-my-form-data-in-controller-ruby-on-rails-version-4", "title": "How can i unserialize my form data in controller ? Ruby on Rails version 4", "body": "<p>I have submitted form data using ajax method and my form data serialized from html page. I want to unserialize the content as we do in parsestr in php.Please help me</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1493121434, "post_id": 43609921, "comment_id": 74268763, "body": "What is a synthax?"}, {"owner": {"reputation": 27, "user_id": 7810991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d67e4036d2da21be3e6cfdc32f49d1cb?s=128&d=identicon&r=PG&f=1", "display_name": "pokeahontas", "link": "https://stackoverflow.com/users/7810991/pokeahontas"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1493121675, "post_id": 43609921, "comment_id": 74268940, "body": "@sawa sorry senpai"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 7810991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d67e4036d2da21be3e6cfdc32f49d1cb?s=128&d=identicon&r=PG&f=1", "display_name": "pokeahontas", "link": "https://stackoverflow.com/users/7810991/pokeahontas"}, "edited": false, "score": 0, "creation_date": 1493121805, "post_id": 43610050, "comment_id": 74269035, "body": "Thank you @SergioTulentsev . what exactly is micropost then in this call, is it a variable?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 27, "user_id": 7810991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d67e4036d2da21be3e6cfdc32f49d1cb?s=128&d=identicon&r=PG&f=1", "display_name": "pokeahontas", "link": "https://stackoverflow.com/users/7810991/pokeahontas"}, "edited": false, "score": 0, "creation_date": 1493122077, "post_id": 43610050, "comment_id": 74269229, "body": "@pokeahontas Did you read my post? It&#39;s impossible to <b>know</b> (one can make educated guesses, though)."}, {"owner": {"reputation": 27, "user_id": 7810991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d67e4036d2da21be3e6cfdc32f49d1cb?s=128&d=identicon&r=PG&f=1", "display_name": "pokeahontas", "link": "https://stackoverflow.com/users/7810991/pokeahontas"}, "edited": false, "score": 0, "creation_date": 1493122904, "post_id": 43610050, "comment_id": 74269851, "body": "and if I&#39;m calling a method declared in a ruby file(from controller/helper/model) is there anyway to recognize this synthactically in the erb file?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 27, "user_id": 7810991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d67e4036d2da21be3e6cfdc32f49d1cb?s=128&d=identicon&r=PG&f=1", "display_name": "pokeahontas", "link": "https://stackoverflow.com/users/7810991/pokeahontas"}, "edited": false, "score": 0, "creation_date": 1493123148, "post_id": 43610050, "comment_id": 74270025, "body": "if it accepts parameters (<code>foo 1, 2</code>), then <code>foo</code> obviously can&#39;t be a variable. For parameterless (and parenthesis-less) calls, there&#39;s no way."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1493121516, "creation_date": 1493121516, "answer_id": 43610050, "question_id": 43609921, "link": "https://stackoverflow.com/questions/43609921/syntax-differences-between-method-calls-and-variable-calls-in-embedded-ruby-scri/43610050#43610050", "title": "Syntax differences between method calls and variable calls in embedded ruby scripts?", "body": "<p><code>micropost</code> in <code>&lt;%= micropost.content %&gt;</code> can be a local variable OR a method. There's no way to tell which is it, just by looking at the line. All that matters is <code>micropost</code> evaluates to <em>something</em> you can call <code>.content</code> on.</p>\n\n<p>If you want to know which is it (for education), you can output its type like this:</p>\n\n<pre><code>&lt;%= defined?(micropost) %&gt;\n</code></pre>\n\n<p>It'll return either \"local-variable\" or \"method\" (or nil, if it's not defined).</p>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1493129775, "post_id": 43612653, "comment_id": 74275250, "body": "* yes you can call a local variable if it happens to be a callable type like a Proc. But you&#39;re actually just referencing an object and calling its <code>.call</code> method."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1493564967, "last_edit_date": 1495540939, "creation_date": 1493128397, "answer_id": 43612653, "question_id": 43609921, "link": "https://stackoverflow.com/questions/43609921/syntax-differences-between-method-calls-and-variable-calls-in-embedded-ruby-scri/43612653#43612653", "title": "Syntax differences between method calls and variable calls in embedded ruby scripts?", "body": "<h2>The syntax is the same.</h2>\n\n<p>There are no major syntactical differences between ERB and Ruby except that ERB is an embedded language where only the code in \"erb\" tags are executed <code>&lt;% %&gt;</code>.</p>\n\n<h2>Whats the difference between a local variable and a method?</h2>\n\n<p>A method is a method object that is defined on an object.</p>\n\n<pre><code>def foo\n  \"hello world\"\nend\n\n# we can call it by\nself.foo\n\n# we can access the method object by\nself.method(:foo)\n</code></pre>\n\n<p>This defines the method <code>foo</code> on <code>main</code>.</p>\n\n<pre><code>bar = \"value\"\n</code></pre>\n\n<p>Defines the locally scoped variable <code>bar</code>. Not that you can't do <code>self.bar</code> since it just points to a memory register, not a method! You don't call variables - you reference them*. Thus the term \"variable call\" is just wrong.</p>\n\n<p>As @SergioTulentsev points out you can check if a <code>micropost</code> is a local variable or method by using <code>defined?</code>. Note the caveat when using <em>rails locals</em> below.</p>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/14127805/what-is-the-difference-between-local-instance-and-class-variables\">What is the difference between local, instance, and class variables?</a></li>\n</ul>\n\n<h2>Using ERB outside of rails</h2>\n\n<p>In Ruby the top level object is called <code>main</code> which is the \"global\" object.\nWhen you assign a instance variable <code>&lt;% @foo = \"bar\" %&gt;</code> you are assigning it to <code>main</code> which is the implicit self.</p>\n\n<pre><code>&lt;%# raw_template.erb %&gt;\n&lt;%= self.inspect %&gt;\n</code></pre>\n\n<p>If we run <code>erb raw_template.erb</code> it will output <code>main</code>.</p>\n\n<p>Assigning a regular lexical variable (a local) <code>&lt;% foo = \"bar\" %&gt;</code> works just like in any other ruby code.</p>\n\n<p>As you can see is no difference in how variables work in an ERB template and any other Ruby code.</p>\n\n<h2>What does rails do differently?</h2>\n\n<p>A core piece of Rails is what is called the <em>view context</em>. This is an instance of <code>ActionView::Base</code> which is the implicit self - the \"global\" object.</p>\n\n<p>You don't have to take my word for it. Try including this in a view in Rails:</p>\n\n<pre><code>&lt;pre&gt;\n  &lt;%= self.inspect %&gt;\n&lt;/pre&gt;\n</code></pre>\n\n<p>Rails takes all the instance variables of the controller and assigns them to the view context. Which why the <code>@something</code> instance variable you assign in your controller is also available to your views.</p>\n\n<h2><a href=\"http://guides.rubyonrails.org/action_view_overview.html#partials\" rel=\"nofollow noreferrer\">Rails locals</a> are not really local variables</h2>\n\n<p>The view context also contains a hash called <code>local_assigns</code>. These are the \"local variables\" you can pass when rendering a template:</p>\n\n<pre><code>render template: 'test', locals: { foo: 'bar' }\n</code></pre>\n\n<p>When you call <code>&lt;%= foo %&gt;</code> in the <code>test.html.erb</code> template the call goes to <a href=\"http://rubylearning.com/satishtalim/ruby_method_missing.html\" rel=\"nofollow noreferrer\"><code>method_missing</code></a> which checks if <code>local_assigns</code> has a <code>:foo</code> key.</p>\n\n<p>Thats why using <code>defined?</code> on <code>local_assigns</code> variables does not work as expected.</p>\n\n<h2>But the syntax is the same.</h2>\n\n<p>Rails uses a bit of metaprogramming magic to pass variables around - but it does not alter the syntax of the language.</p>\n\n<blockquote>\n  <p>Is it possible to access variables from ruby files that are not\n  instance or class variables?</p>\n</blockquote>\n\n<p>Yes, global variables - in Ruby you create a global variable by using the sigil <code>$</code>.</p>\n\n<pre><code>$foo = \"bar\"\n</code></pre>\n\n<p>But this is rarely used because <a href=\"http://wiki.c2.com/?GlobalVariablesAreBad\" rel=\"nofollow noreferrer\">globals are evil</a>. And there are better ways to it in Ruby.</p>\n"}], "owner": {"reputation": 27, "user_id": 7810991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d67e4036d2da21be3e6cfdc32f49d1cb?s=128&d=identicon&r=PG&f=1", "display_name": "pokeahontas", "link": "https://stackoverflow.com/users/7810991/pokeahontas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493564967, "creation_date": 1493121109, "last_edit_date": 1493144470, "question_id": 43609921, "link": "https://stackoverflow.com/questions/43609921/syntax-differences-between-method-calls-and-variable-calls-in-embedded-ruby-scri", "title": "Syntax differences between method calls and variable calls in embedded ruby scripts?", "body": "<p>This might be a noob question but here it goes:<br>I'm trying to parse embbeded ruby code and I need some help in understanding the synthax for methodcalls and variable accesing in embedded ruby scripts. <br>\nFor example in this call <code>@user.followed_users.count</code> (as I understand it) @user is an instance of a the user model followed_users is a (automatically generated) method and count is also a method right? <br>\nBut what are these calls <code>micropost.content</code> <code>micropost.created_at</code> <code>micropost.user</code>? They are from this erb file:</p>\n\n<pre><code>&lt;li&gt;\n  &lt;span class=\"content\"&gt;&lt;%= micropost.content %&gt;&lt;/span&gt;\n  &lt;span class=\"timestamp\"&gt;\n    Posted &lt;%= time_ago_in_words(micropost.created_at) %&gt; ago.\n  &lt;/span&gt;\n  &lt;% if current_user?(micropost.user) %&gt;\n    &lt;%= link_to \"delete\", micropost, method: :delete,\n                                     data:{ confirm: \"You sure?\" },\n                                     title: micropost.content %&gt;\n  &lt;% end %&gt;\n&lt;/li&gt; \n</code></pre>\n\n<p>(these are code examples from this michael hartl rails tutorial)</p>\n\n<p>What kinds of syntaxes for method calls and variable accessing from erb files are there in Rails? Is it possible to access variables from ruby files that are not instance or class variables?</p>\n\n<p>Thanks in advance for reading and helping :)</p>\n"}, {"tags": ["ruby", "mongodb", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 435, "user_id": 1016615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04c2fcb90d02fa73a96c8ed70ed01e95?s=128&d=identicon&r=PG", "display_name": "marzhaev", "link": "https://stackoverflow.com/users/1016615/marzhaev"}, "is_accepted": true, "score": 1, "last_activity_date": 1493129548, "creation_date": 1493129548, "answer_id": 43613121, "question_id": 43609882, "link": "https://stackoverflow.com/questions/43609882/mongoid-each-set-vs-criteraset-vs-update-all-addtoset/43613121#43613121", "title": "Mongoid each + set vs Critera#set vs update_all + $addToSet", "body": "<p>I started MongoDB server with verbose flag. That's what I got.</p>\n\n<p>Option 1. update_all applied on a selector </p>\n\n<pre><code>2017-04-25 COMMAND command production_v3.$cmd command: update { update: \"products\", updates: [ { q: { ... }, u: { $addToSet: { test_field: \"value_to_add\" } }, multi: true, upsert: false } ], ordered: true }\n</code></pre>\n\n<p>I removed some output so that is easier to read. The flow is:</p>\n\n<ul>\n<li>MongoID generates a single command with query and update specified.</li>\n<li>MongoDB server gets the command. It goes through collection and updates each match in [vague] one go.</li>\n</ul>\n\n<p>Note! You may learn from the source code or take as granted. Since MongoID, as per my terminology, generates command to send in step 1, it does not check your models. e.g. If 'some.field.value' is not one of your field in the model User, then the command will still go through and persist on DB.</p>\n\n<p>Option 2. each on a selector</p>\n\n<p>I get find commands like below followed by multiple getMore-s:</p>\n\n<pre><code>2017-04-25 COMMAND command production_v3.products command: find { find: \"products\", filter: { ... } } 0ms\n</code></pre>\n\n<p>I also get a huge number of update-s:</p>\n\n<pre><code>2017-04-25 COMMAND command production_v3.$cmd command: update { update: \"products\", updates: [ { q: { _id: ObjectId('52a6db196c3f4f422500f255') }, u: { $addToSet: { test_field: { $each: [ \"value_to_add\" ] } } }, multi: false, upsert: false } ], ordered: true } 0ms\n</code></pre>\n\n<p>The flow is radically different from the 1st option:</p>\n\n<ul>\n<li>MongoID sends a simple query to to MongoDB server. Provided your collection is large enough and the query covers a material chunk of it, the following happens in a loop:</li>\n<li>[loop] Respond with a subset of all matches. Leave the rest for the next iteration.</li>\n<li>[loop] MongoID gets an array of matching items in Hash format. MongoID parses the each entry and initializes User class for it. That's an expensive operatation!</li>\n<li>[loop] For each User instance from the previous step MongoID generates an update commands and sends it to serve. Sockets are expensive too.</li>\n<li>[loop] MongoDB gets the command and goes through the collection until the first match. Updates the match. It is quick, but adds up once in a loop.</li>\n<li>[loop] MongoID parses the response and updates its User instance accordingly. Expensive and unnecessary.</li>\n</ul>\n\n<p>Option 3. add_to_set applied on a selector</p>\n\n<p>Under the hood it is equivalent to Option 1. Its CPU and Memory overhead is immaterial for the sake of the question.</p>\n\n<p>Conclusion.</p>\n\n<p>Option 2 is so much slower that there is no point in benchmarking. In the particular case I tries, it resulted in 1000s of request to MongoDB and 1000s of User class initialization. Options 1 and 3 resulted in a single request to MongoDB and relied on MongoDB highly optimized engine.</p>\n"}], "owner": {"reputation": 643, "user_id": 1463572, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/01bfce085158b21e02684c6531fc364b?s=128&d=identicon&r=PG", "display_name": "tpei", "link": "https://stackoverflow.com/users/1463572/tpei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 43613121, "answer_count": 1, "score": 0, "last_activity_date": 1493129548, "creation_date": 1493121015, "question_id": 43609882, "link": "https://stackoverflow.com/questions/43609882/mongoid-each-set-vs-criteraset-vs-update-all-addtoset", "title": "Mongoid each + set vs Critera#set vs update_all + $addToSet", "body": "<p>I was wondering what is better performance / memory wise: Iterating over all objects in a collection and calling set/add_to_set or calling set/add_to_set directly on the Criteria or using update all with set/add_to_set.</p>\n\n<pre><code># update_all\nUser.where(some_query).update_all(\n  {\n    '$addToSet': {\n      :'some.field.value' =&gt; :value_to_add\n    }\n  }\n)\n\n# each do + add_to_set\nUser.where(some_query).each do |user|\n  user.add_to_set(:'some.field.value' =&gt; :value_to_add)\nend\n\n# Criteria#add_to_set\nUser.where(some_query).add_to_set(\n  :'some.field.value' =&gt; :value_to_add\n)\n</code></pre>\n\n<p>Any input is appreciated. Thanks!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1290, "user_id": 4066118, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EjVrc.jpg?s=128&g=1", "display_name": "Richa Sinha", "link": "https://stackoverflow.com/users/4066118/richa-sinha"}, "edited": false, "score": 1, "creation_date": 1493120335, "post_id": 43609573, "comment_id": 74267949, "body": "Use select method on the array. arr.select{|a|a&lt;3}"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1493120797, "post_id": 43609573, "comment_id": 74268305, "body": "Look through the methods in <code>Array</code> and <code>Enumerable</code>. Can you guess which one you can use if you want to <b>select</b> elements? Can you guess which method you can use if you want to <b>count</b> elements?"}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 0, "creation_date": 1493121294, "post_id": 43609573, "comment_id": 74268675, "body": "Thanks for that!"}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 2, "last_activity_date": 1493120669, "last_edit_date": 1493120669, "creation_date": 1493120282, "answer_id": 43609619, "question_id": 43609573, "link": "https://stackoverflow.com/questions/43609573/return-numbers-in-array-that-are-less-than-x/43609619#43609619", "title": "Return numbers in array that are less than x", "body": "<p>Your question is an XY-question.</p>\n\n<p>What you asked for:</p>\n\n<pre><code>arr.select{|e| e &lt; 3} # =&gt; [1, 2]\n</code></pre>\n\n<p>What you needed to do:</p>\n\n<pre><code>arr.count{|e| e &lt; 3} # =&gt; 2\n</code></pre>\n"}], "owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 43609619, "answer_count": 1, "score": 0, "last_activity_date": 1493120828, "creation_date": 1493120147, "last_edit_date": 1493120828, "question_id": 43609573, "link": "https://stackoverflow.com/questions/43609573/return-numbers-in-array-that-are-less-than-x", "title": "Return numbers in array that are less than x", "body": "<p>I have an array of numbers:</p>\n\n<pre><code>arr = [1,2,3,87,99,66,44,3,5]\n</code></pre>\n\n<p>I want to select the elements from it that are less than <code>3</code>, and count them. How can I return an array with numbers from <code>arr</code> less than <code>3</code> (<code>[1,2]</code>)? Similarly, I want the numbers less than <code>50</code>: <code>[1,2,3,3,5,44]</code>.</p>\n\n<p>I thought I could use <code>arr.min(3)</code>, or <code>arr.any? {|a| a &lt; 3}</code>, which turned out to be not what I want.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1493118464, "post_id": 43608847, "comment_id": 74266607, "body": "post the error that you are getting"}, {"owner": {"reputation": 11, "user_id": 7106976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61c9149b73ad428557cb06f82098165?s=128&d=identicon&r=PG&f=1", "display_name": "sdfjklkjhgfdcvb", "link": "https://stackoverflow.com/users/7106976/sdfjklkjhgfdcvb"}, "reply_to_user": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1493118654, "post_id": 43608847, "comment_id": 74266726, "body": "NoMethodError in Polls#new"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1493118690, "post_id": 43608847, "comment_id": 74266752, "body": "Post your controller code for it as well"}, {"owner": {"reputation": 11, "user_id": 7106976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61c9149b73ad428557cb06f82098165?s=128&d=identicon&r=PG&f=1", "display_name": "sdfjklkjhgfdcvb", "link": "https://stackoverflow.com/users/7106976/sdfjklkjhgfdcvb"}, "edited": false, "score": 0, "creation_date": 1493118979, "post_id": 43608847, "comment_id": 74266958, "body": "just added controllers code  :) thank you"}, {"owner": {"reputation": 11, "user_id": 7106976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61c9149b73ad428557cb06f82098165?s=128&d=identicon&r=PG&f=1", "display_name": "sdfjklkjhgfdcvb", "link": "https://stackoverflow.com/users/7106976/sdfjklkjhgfdcvb"}, "edited": false, "score": 0, "creation_date": 1493119225, "post_id": 43608847, "comment_id": 74267128, "body": "anything missing sir ?"}, {"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1493119726, "post_id": 43608847, "comment_id": 74267473, "body": "yes, post the complete error&#39;"}, {"owner": {"reputation": 11, "user_id": 7106976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61c9149b73ad428557cb06f82098165?s=128&d=identicon&r=PG&f=1", "display_name": "sdfjklkjhgfdcvb", "link": "https://stackoverflow.com/users/7106976/sdfjklkjhgfdcvb"}, "edited": false, "score": 0, "creation_date": 1493127433, "post_id": 43608847, "comment_id": 74273403, "body": "is this okay ? sir"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1493127637, "post_id": 43608847, "comment_id": 74273560, "body": "What&#39;s <code>:vote_options</code>? why <code>link_to_add_association</code>?, also why do you have two <code>show</code> methods on your <code>polls_controller.rb</code>?"}, {"owner": {"reputation": 2623, "user_id": 5739514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/79f8410055f0114c31bde3ccc1d56178?s=128&d=identicon&r=PG", "display_name": "HashRocketSyntax", "link": "https://stackoverflow.com/users/5739514/hashrocketsyntax"}, "edited": false, "score": 0, "creation_date": 1493222968, "post_id": 43608847, "comment_id": 74327108, "body": "Have a look at nested forms gem <a href=\"https://github.com/ryanb/nested_form\" rel=\"nofollow noreferrer\">github.com/ryanb/nested_form</a>"}], "owner": {"reputation": 11, "user_id": 7106976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61c9149b73ad428557cb06f82098165?s=128&d=identicon&r=PG&f=1", "display_name": "sdfjklkjhgfdcvb", "link": "https://stackoverflow.com/users/7106976/sdfjklkjhgfdcvb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493127410, "creation_date": 1493118078, "last_edit_date": 1493127410, "question_id": 43608847, "link": "https://stackoverflow.com/questions/43608847/unable-to-add-new-poll-option-in-ruby-on-rails", "title": "unable to add new poll option in ruby on rails", "body": "<p>i have been working  on this web app and now i got stuck with this  i tried my best but unable to understand what is wrong here\nplease help<br>\nwhen i click on add new poll i get error message </p>\n\n<p>**</p>\n\n<pre><code>NoMethodError in Polls#new\nShowing /home/cassada/Sites/cs49/app/views/polls/_form.html.erb where line #17 raised:\nundefined method `object' for :f:Symbol\nDid you mean?  object_id\nExtracted source (around line #17):\n         16             &lt;div class=\"links\"&gt;\n         17    &lt;%= link_to_add_association 'add option', :f, :vote_options %&gt;\n         18   &lt;/div&gt;\n         19   &lt;/div&gt;\n         20  &lt;/div&gt;\nTrace of template inclusion: app/views/polls/new.html.erb\nRails.root: /home/cassada/Sites/cs49\nApplication Trace | Framework Trace | Full Trace\napp/views/polls/_form.html.erb:17:in `block in _app_views_polls__form_html_erb___3284567334421898573_69867286087680'\napp/views/polls/_form.html.erb:1:in `_app_views_polls__form_html_erb___3284567334421898573_69867286087680'\napp/views/polls/new.html.erb:3:in `_app_views_polls_new_html_erb___1883683102533192410_69867286238480'\nRequest\nParameters:\nNone\nToggle session dump\nToggle env dump\n[screenshot][1]\n Extracted source (around line #2):\n\n      &lt;div class=\"links\"&gt;\n        **&lt;%= link_to_add_association 'add option', :f, :vote_options %&gt;**\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>**</p>\n\n<p>what exactly i need to do to resolve this issue \nplease help</p>\n\n<pre><code>**new.html.erb**\n &lt;% content_for(:page_header) {\"Create a new poll\"} %&gt;\n  render 'form' %&gt;\n</code></pre>\n\n<p><strong>form.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for @poll do |f| %&gt;\n&lt;%= render 'shared/errors', object: @poll %&gt;\n\n&lt;div class=\"form-group\"&gt;\n&lt;%= f.label :topic %&gt;\n&lt;%= f.text_area :topic, rows: 3, required: true, class: 'form-control' %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"panel panel-default\"&gt;\n&lt;div class=\"panel-heading\"&gt;Options&lt;/div&gt;\n&lt;div class=\"panel-body\"&gt;\n &lt;%= f.fields_for :vote_options do |options_form| %&gt;\n    &lt;%= render 'vote_option_fields', f: options_form %&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"links\"&gt;\n    &lt;%= link_to_add_association 'add option', f, :vote_options %&gt;\n   &lt;/div&gt;\n   &lt;/div&gt;\n   &lt;/div&gt;\n\n   &lt;%= recaptcha_tags %&gt;\n\n   &lt;%= f.submit 'Create', class: 'btn btn-primary btn-lg' %&gt;\n   &lt;% end %&gt;\n</code></pre>\n\n<p><strong>polls Controller</strong></p>\n\n<pre><code>class PollsController &lt; ApplicationController\n def index\n    @polls = Poll.all\n  end\n\n  def new\n    @poll = Poll.new\n  end\n\n  def create\n    @poll = Poll.new(poll_params)\n    if @poll.save\n      flash[:success] = 'Poll was created!'\n      redirect_to polls_path\n    else\n      render 'new'\n    end\n  end\ndef poll_params\n  params.require(:poll).permit(:topic, vote_options_attributes: [:id, :title, :_destroy])\nend\ndef edit\n  @poll = Poll.find_by_id(params[:id])\nend\n\ndef update\n  @poll = Poll.find_by_id(params[:id])\n  if @poll.update_attributes(poll_params)\n    flash[:success] = 'Poll was updated!'\n    redirect_to polls_path\n  else\n    render 'edit'\n  end\nend\n\ndef destroy\n  @poll = Poll.find_by_id(params[:id])\n  if @poll.destroy\n    flash[:success] = 'Poll was destroyed!'\n  else\n    flash[:warning] = 'Error destroying poll...'\n  end\n  redirect_to polls_path\nend\ndef show\n  @poll = Poll.find_by_id(params[:id])\nend\ndef show\n  @poll = Poll.includes(:vote_options).find_by_id(params[:id])\nend\n  private\n\n  def poll_params\n    params.require(:poll).permit(:topic)\n  end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 631, "user_id": 4196281, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rcO54.jpg?s=128&g=1", "display_name": "DevJem", "link": "https://stackoverflow.com/users/4196281/devjem"}, "edited": false, "score": 0, "creation_date": 1493118128, "post_id": 43608800, "comment_id": 74266380, "body": "You can add them to the form as hidden field objects. Make sure you allow them to pass your strong parameters."}], "answers": [{"comments": [{"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1493118238, "post_id": 43608866, "comment_id": 74266456, "body": "I&#39;m sure this would work, but the <b>params</b> can be many and I can&#39;t keep on adding hidden fields. I better need to understand why my way doesn&#39;t work"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 2, "last_activity_date": 1493118281, "last_edit_date": 1493118281, "creation_date": 1493118142, "answer_id": 43608866, "question_id": 43608800, "link": "https://stackoverflow.com/questions/43608800/passing-default-params-to-rails-form-for/43608866#43608866", "title": "Passing default params to rails form_for", "body": "<p>Try adding them as <a href=\"https://apidock.com/rails/ActionView/Helpers/FormTagHelper/hidden_field_tag\" rel=\"nofollow noreferrer\"><strong><code>hidden_field_tag</code></strong></a></p>\n\n<pre><code>= form_tag history_path(params), :method =&gt; :get do\n  = hidden_field_tag :visit_id, 1\n  = hidden_field_tag :company_id, 32\n  = radio_button_tag :history_id, @history.id, true\n  History\n  %br\n\n  = submit_tag \"Get History\", class: \"btn generate\"\n</code></pre>\n\n<p>And now you will receive the data in params as</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"history_id\"=&gt;\"939\", \"visit_id\" =&gt; \"1\", \"company_id\" =&gt; \"32\", \"commit\"=&gt;\"Get History\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1493120448, "post_id": 43609628, "comment_id": 74268038, "body": "This is a good explanation, also <code>GET</code> request don&#39;t have a body."}], "tags": [], "owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "is_accepted": true, "score": 3, "last_activity_date": 1493120685, "last_edit_date": 1493120685, "creation_date": 1493120315, "answer_id": 43609628, "question_id": 43608800, "link": "https://stackoverflow.com/questions/43608800/passing-default-params-to-rails-form-for/43609628#43609628", "title": "Passing default params to rails form_for", "body": "<p>This is not a rails problem, it's just html, because your form has the get method, it will replace all get variables that you have on the url action and let just the ones that are on the form. \nyou can combine this, sending get variables in the url, but with the form as post, not on get. \nin this case then you have 2 options, use the solution that @Deepak Mahakale sent, or change your form to post, and make the respective changes on the controller and routes.</p>\n"}], "owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "accepted_answer_id": 43609628, "answer_count": 2, "score": 0, "last_activity_date": 1493120685, "creation_date": 1493117958, "last_edit_date": 1493118612, "question_id": 43608800, "link": "https://stackoverflow.com/questions/43608800/passing-default-params-to-rails-form-for", "title": "Passing default params to rails form_for", "body": "<p>I have a simple form like:</p>\n\n<pre><code>= form_tag history_path(params), :method =&gt; :get do\n  = radio_button_tag :history_id, @history.id, true\n  History\n  %br\n\n  = submit_tag \"Get History\", class: \"btn generate\"\n</code></pre>\n\n<p>Now, <strong>params</strong> has some extra info like <code>{visit_id: 1, company_id: 32}</code></p>\n\n<p>Even when I inspect the form I see the action as:</p>\n\n<pre><code>&lt;form action=\"/history?visit_id=1&amp;company_id=32\" accept-charset=\"UTF-8\" method=\"get\"&gt;\n</code></pre>\n\n<p>But, upon clicking submit, the <strong>params</strong> are never passed, I only get the following <strong>params</strong> passed (in server log):</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"history_id\"=&gt;\"939\", \"commit\"=&gt;\"Get History\"}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>I'm aware that I can add them to <code>hidden_field_tag</code>, but the params can be many and I can't keep on adding hidden fields. So, I need to understand why the above way isn't working.</p>\n"}]