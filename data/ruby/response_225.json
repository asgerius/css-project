[{"tags": ["ruby-on-rails", "ruby", "docker", "permissions", "docker-for-windows"], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 10313230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21061b249a7307894515bfb911b5b657?s=128&d=identicon&r=PG&f=1", "display_name": "tekuri", "link": "https://stackoverflow.com/users/10313230/tekuri"}, "is_accepted": false, "score": 0, "last_activity_date": 1556760975, "creation_date": 1556760975, "answer_id": 55944635, "question_id": 55943402, "link": "https://stackoverflow.com/questions/55943402/how-to-change-permissions-for-gemfile-created-with-docker-for-windows/55944635#55944635", "title": "How to change permissions for Gemfile created with Docker for Windows?", "body": "<p>Can you try to change the file ownership from outside of the docker and after that you can manipulate the file.</p>\n"}], "owner": {"reputation": 11, "user_id": 10405917, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hek6B-YZrRQ/AAAAAAAAAAI/AAAAAAAAAeI/he7QhaMETsA/photo.jpg?sz=128", "display_name": "Ernesto Garc&#237;a", "link": "https://stackoverflow.com/users/10405917/ernesto-garc%c3%ada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556760975, "creation_date": 1556749043, "question_id": 55943402, "link": "https://stackoverflow.com/questions/55943402/how-to-change-permissions-for-gemfile-created-with-docker-for-windows", "title": "How to change permissions for Gemfile created with Docker for Windows?", "body": "<p>I'm working with a dockerized rails application, however whenever I make a change to the <code>Gemfile</code> the file permissions change to an unkown user, and I'm unable to do anything to the file whether I'm inside the container or not.</p>\n\n<p>How can I make it so that I'm able to manipulate the file again?</p>\n\n<p>Here's my <code>.docker-copmose.yml</code>:</p>\n\n<pre><code>version: '3'\n\nnetworks:\n  backend:\n\nvolumes:\n  postgres:\n\nservices:\n  postgres:\n    image: postgres\n    ports:\n      - ${APP:-5432}:5432\n    volumes:\n      - ./db/dumps:/db/dumps # Mount the directory DB dumps folder\n      - postgres:/var/lib/postgresql/data\n    networks:\n      - backend\n    environment:\n      POSTGRES_PASSWORD: 3x4mpl3\n\n  web:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    command: rails s -b 0.0.0.0 -p 3000\n    entrypoint: /app/bin/entrypoint.sh\n    volumes:\n      - .:/app\n    ports:\n      - ${APP_WEB_PORT:-3000}:3000\n    stdin_open: true\n    tty: true\n    depends_on:\n      - postgres\n    networks:\n      - backend\n    environment:\n      DATABASE_URL: postgres://postgres:3x4mpl3@postgres:5432/app_development\n      RAILS_ENV: development\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs", "hyperstack"], "answers": [{"tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1556756309, "creation_date": 1556756309, "answer_id": 55944198, "question_id": 55943021, "link": "https://stackoverflow.com/questions/55943021/uncaught-error-runtimeerror-edit-does-not-appear-to-be-a-react-component/55944198#55944198", "title": "Uncaught error: RuntimeError: Edit does not appear to be a react component", "body": "<p>Looks like you found a bug!</p>\n\n<p><a href=\"https://github.com/hyperstack-org/hyperstack/issues/181\" rel=\"nofollow noreferrer\">https://github.com/hyperstack-org/hyperstack/issues/181</a></p>\n\n<p>It's obscure but if the component class is nested and another module or class is defined at the outer scope, the component lookup fails! </p>\n\n<p>Meanwhile you can </p>\n\n<ul>\n<li>pick up the fix on the edge branch</li>\n<li>patch it as shown on the issue or</li>\n<li>add the parent module name (i.e. <code>Discount::Edit</code>) the component name when mounting</li>\n</ul>\n"}], "owner": {"reputation": 63, "user_id": 11268700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c43b83a94e641b3b33c34151b7bdd28?s=128&d=identicon&r=PG", "display_name": "Matt Saginario", "link": "https://stackoverflow.com/users/11268700/matt-saginario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556756309, "creation_date": 1556746720, "question_id": 55943021, "link": "https://stackoverflow.com/questions/55943021/uncaught-error-runtimeerror-edit-does-not-appear-to-be-a-react-component", "title": "Uncaught error: RuntimeError: Edit does not appear to be a react component", "body": "<p>I'm getting the \"Uncaught error: RuntimeError: Edit does not appear to be a react component.\" message, despite having edit defined within the same module:</p>\n\n<pre><code>module Components\n  module Admin\n    module Discounts\n      class Layout &lt; Hyperloop::Router::Component\n        render(DIV) do\n          Switch do\n            Route(\"#{match.url}/index\") do\n              Redirect(pathname: match.url, search: location.search)\n            end\n\n            Route(match.url, exact: true) do |m, l, h|\n              Index(match: m, location: l, history: h)\n            end\n\n            Route(\"#{match.url}/:discount_id/edit\") do |m, l, h|\n              Edit(match: m, location: l, history: h)\n            end\n\n            Route(\"#{match.url}/new\") do |m, l, h|\n              New(match: m, location: l, history: h)\n            end\n          end\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<pre><code>module Components\n  module Admin\n    module Discounts\n      class Edit &lt; Hyperloop::Router::Component\n...\n</code></pre>\n\n<p>However, I have another file models/edit.rb that seems to be used instead</p>\n\n<pre><code>module Edit\n  def backup(attr_whitelist, assoc_whitelist)\n    @saved_attributes = attributes_as_json(attr_whitelist, assoc_whitelist)\n  end\n</code></pre>\n\n<p>Any thoughts on why this is happening/how to point to the class Edit instead?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "edited": false, "score": 0, "creation_date": 1556791580, "post_id": 55942956, "comment_id": 98552423, "body": "Hello @EJ2015 Now I look at your answer I understand what I was doing wrong, as I am still learning I had to go through it line by line and write what each line was doing (to give you an idea of my level). From your comment the only bit I am unsure of now is the last part where you say &quot; You should also move saved_hairstyle query to a helper method.&quot; What do you mean and why? Thank you in advance. p.s I have implemented your code and it seems to run, I just have the Pundit Gem blocking the action being performed so I have to sort that out now."}, {"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "reply_to_user": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "edited": false, "score": 1, "creation_date": 1556802014, "post_id": 55942956, "comment_id": 98557983, "body": "Great. My last observation is just a reminder that once you get things running, don&#39;t forget to refactor. <code>app&#47;helpers</code> is usually where you can park your little view helpers to clean up your templates."}, {"owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "edited": false, "score": 0, "creation_date": 1556812153, "post_id": 55942956, "comment_id": 98563880, "body": "Ar OK understood, I didn&#39;t know that but it makes sense. Thanks for your help again. :)"}], "tags": [], "owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "is_accepted": false, "score": 2, "last_activity_date": 1556746243, "creation_date": 1556746243, "answer_id": 55942956, "question_id": 55942492, "link": "https://stackoverflow.com/questions/55942492/my-create-delete-routes-not-working-do-not-understand-why/55942956#55942956", "title": "My CREATE &amp; DELETE routes not working do not understand why?", "body": "<p>There seems to be some errors in your view logic. You are loading saved hairstyles and try to book mark it again. You're also trying to delete a saved hairstyle if it doesn't exist. The path helpers also seem to be wrong (delete method is not nested and nested resources should be plural). Maybe it should look something like this:</p>\n\n<pre><code>   &lt;div class=\"bookmark\"&gt;\n      &lt;% saved_hairstyle = SavedHairstyle.find_by(user: current_user, hairstyle: hairstyle.id) %&gt;\n      &lt;% if saved_hairstyle %&gt;\n        &lt;%= link_to saved_hairstyle_path(saved_hairstyle), method: :delete do %&gt;\n           &lt;i class=\"fas fa-plus-circle\"&gt;&lt;/i&gt;\n         &lt;% end %&gt;\n       &lt;% else %&gt;\n          &lt;%= link_to  hairstyle_saved_hairstyles_path(hairstyle), method: :post do %&gt;\n            &lt;i class=\"fas fa-plus\"&gt;&lt;/i&gt;\n          &lt;% end %&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>By the way, if you check your console, you probably will see some errors that would point you to the right direction. You should also move saved_hairstyle query to a helper method.</p>\n"}], "owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556746243, "creation_date": 1556743411, "last_edit_date": 1556743748, "question_id": 55942492, "link": "https://stackoverflow.com/questions/55942492/my-create-delete-routes-not-working-do-not-understand-why", "title": "My CREATE &amp; DELETE routes not working do not understand why?", "body": "<p>Hello I am trying to create a bookmark feature in my app. I have created the \nmodel I want to bookmark (Hairstyle), I also have a User model and a \"Saved_Hairstyle\" model which is the join table in the scenario. \nIn my routes.rb file I added a CREATE &amp; DELETE route. In my controller I wrote out the CREATE &amp; DELETE methods. I then proceeded to link_to my CREATE &amp; DELETE methods paths in my View.</p>\n\n<p>I would like that when I click on the CREATE Link a POST method is fired so that I can show an element on the page as being \"bookmarked\" and when I click the DELETE link a DELETE method is fired so that I can show an element on the page as being \"unboomarked\" but they don't work. \nWhen I do RAILS ROUTES in Rails C I can see the right pathways but when I click through the links don't do anything. \n Repo for ease of understanding: <a href=\"https://github.com/Angela-Inniss/hair-do\" rel=\"nofollow noreferrer\">https://github.com/Angela-Inniss/hair-do</a></p>\n\n<p>routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n  root to: 'pages#home'\n  devise_for :users\n  resources :hairstyles do\n    member do\n      put \"like\", to: \"hairstyles#upvote\"\n      put \"dislike\", to: \"hairstyles#downvote\"\n    end\n    resources :comments, only: :create\n    resources :saved_hairstyles, only: [:new,:create]\n  end\n  resources :saved_hairstyles, only: :destroy\n  resources :comments, only: :destroy\n  resources :hairdressers\nend\n\n</code></pre>\n\n<pre><code>class SavedHairstylesController &lt; ApplicationController\n  def create    \n    @hairstyle = Hairstyle.find(params[:hairstyle_id])  \n    @saved_hairstyle = SavedHairstyle.new(user: current_user, hairstyle: @hairstyle)   \n    if @saved_hairstyle.save\n      respond_to do |format|       \n        format.html { redirect_to hairstyle_path(@saved_hairstyle.hairstyle) }\n        format.js  # &lt;-- will render `app/views/comments/create.js.erb`\n      end\n    else\n      respond_to do |format|\n        format.html { render 'hairstyles' }\n        format.js  # &lt;-- idem\n      end\n    end\n  end\nend\n\n  def destroy    \n    @saved_hairstyle = SavedHairstyle.find(params[:id])\n    @saved_hairstyle.destroy\n    @hairstyle = @saved_hairstyle.hairstyle\n    respond_to do |format|\n      format.html { redirect_to hairstyle_path(@saved_hairstyle.hairstyle }\n      format.js\n    end\n  end\n</code></pre>\n\n<p>view.html.erb</p>\n\n<pre><code>   &lt;div class=\"bookmark\"&gt;\n\n              &lt;% saved_hairstyle = SavedHairstyle.find_by(user: current_user, hairstyle: hairstyle.id) %&gt;\n\n              &lt;% if saved_hairstyle %&gt;\n                &lt;%= link_to  hairstyle_saved_hairstyle_path(saved_hairstyle), method: :post do %&gt;\n                    &lt;i class=\"fas fa-plus\"&gt;&lt;/i&gt;\n                 &lt;% end %&gt;\n\n              &lt;% else %&gt;\n                &lt;%= link_to saved_hairstyle_path(hairstyle), method: :delete do %&gt;\n                    &lt;i class=\"fas fa-plus-circle\"&gt;&lt;/i&gt;\n                &lt;% end %&gt;\n              &lt;% end %&gt;\n            &lt;/div&gt;\n\n</code></pre>\n\n<p>create.js.erb file (this is what I Would like to happen on the POST request (i have something similar for the DELETE request)</p>\n\n<pre><code>\nplusCircle = document.getElementById(\"bookmark\");\nplusCircle.innerHTML = `&lt;%= link_to  '#', method: :post do %&gt;\n                    &lt;i class=\"fas fa-plus\"&gt;&lt;/i&gt;\n                 &lt;% end %&gt;`\n\n</code></pre>\n"}, {"tags": ["ruby", "algorithm", "hash"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1556743797, "post_id": 55942230, "comment_id": 98538270, "body": "Is there a reason that <code>{&quot;Language&quot; =&gt; &quot;12345&quot;, &quot;Question&quot; =&gt; &quot;23456&quot;, &quot;Answer&quot; =&gt; &quot;45678&quot;}</code> would not be preferable?"}, {"owner": {"reputation": 95, "user_id": 7685722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/791cbf6af02ecfe051dd1a9b0c39fa7c?s=128&d=identicon&r=PG&f=1", "display_name": "C. Yee", "link": "https://stackoverflow.com/users/7685722/c-yee"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1556745819, "post_id": 55942230, "comment_id": 98538977, "body": "Yes, that would make more sense but that was the problem given to me."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556747586, "post_id": 55942230, "comment_id": 98539503, "body": "What do you mean by &quot;repeated elements&quot;? Is <code>2</code> (as well as <code>1</code>) a repeated element in <code>[1,2,2,3,1]</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1556750712, "post_id": 55942230, "comment_id": 98540321, "body": "C., technically, in answering @engineersmnky&#39;s question, I think you actually mean &quot;No&quot; (there&#39;s no reason). :-) You say, &quot;The result should be...<code>hash = {...</code>&quot;. That&#39;s a bit confusing. If you wrote <code>hash #=&gt; {...</code>, that would mean you want to modify the existing hash <code>hash</code> in place. If you wrote just <code>{...</code> that would imply (unless you stated otherwise) that you wish to create a new hash and leave the existing hash unchanged. When asking questions the general rule is that input objects are not to be modified (aka <i>mutated</i>) unless the asker explicitly states they are to be modified."}, {"owner": {"reputation": 95, "user_id": 7685722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/791cbf6af02ecfe051dd1a9b0c39fa7c?s=128&d=identicon&r=PG&f=1", "display_name": "C. Yee", "link": "https://stackoverflow.com/users/7685722/c-yee"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556801554, "post_id": 55942230, "comment_id": 98557703, "body": "@CarySwoveland Yes, <code>duplicated</code> would be a better wording :) Thanks for your comments and help!"}], "answers": [{"comments": [{"owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "edited": false, "score": 0, "creation_date": 1556743519, "post_id": 55942431, "comment_id": 98538198, "body": "Wow, I really like zip from now on :) Also, transpose and then are really nice! Good explanation."}, {"owner": {"reputation": 95, "user_id": 7685722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/791cbf6af02ecfe051dd1a9b0c39fa7c?s=128&d=identicon&r=PG&f=1", "display_name": "C. Yee", "link": "https://stackoverflow.com/users/7685722/c-yee"}, "edited": false, "score": 0, "creation_date": 1556745762, "post_id": 55942431, "comment_id": 98538963, "body": "This is amazing. Thank you!"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556777029, "post_id": 55942431, "comment_id": 98545591, "body": "@CarySwoveland, thanks! I picked up the wise suggestion."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 5, "last_activity_date": 1556776944, "last_edit_date": 1556776944, "creation_date": 1556743033, "answer_id": 55942431, "question_id": 55942230, "link": "https://stackoverflow.com/questions/55942230/delete-duplicated-elements-in-an-array-thats-a-value-in-a-hash-and-its-correspo/55942431#55942431", "title": "Delete duplicated elements in an array that&#39;s a value in a hash and its corresponding ids", "body": "<p>The first idea I had is to zip the values and call uniq, then think a way to return back to the initial form:</p>\n\n<pre><code>h['options'].zip(h['option_ids']).uniq(&amp;:first).transpose\n#=&gt; [[\"Language\", \"Question\", \"Answer\"], [\"12345\", \"23456\", \"45678\"]]\n</code></pre>\n\n<p><hr>\nThen, via parallel assignment:</p>\n\n<pre><code>h['options'], h['option_ids'] = h['options'].zip(h['option_ids']).uniq(&amp;:first).transpose\n\nh #=&gt; {\"id\"=&gt;\"sjfdkjfd\", \"name\"=&gt;\"Field Name\", \"type\"=&gt;\"field\", \"options\"=&gt;[\"Language\", \"Question\", \"Answer\"], \"option_ids\"=&gt;[\"12345\", \"23456\", \"45678\"]}\n</code></pre>\n\n<hr>\n\n<p>These are the steps:</p>\n\n<pre><code>h['options'].zip(h['option_ids'])\n#=&gt; [[\"Language\", \"12345\"], [\"Question\", \"23456\"], [\"Question\", \"34567\"], [\"Answer\", \"45678\"], [\"Answer\", \"56789\"]]\n\nh['options'].zip(h['option_ids']).uniq(&amp;:first)\n#=&gt; [[\"Language\", \"12345\"], [\"Question\", \"23456\"], [\"Answer\", \"45678\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1556748619, "last_edit_date": 1556748619, "creation_date": 1556744958, "answer_id": 55942736, "question_id": 55942230, "link": "https://stackoverflow.com/questions/55942230/delete-duplicated-elements-in-an-array-thats-a-value-in-a-hash-and-its-correspo/55942736#55942736", "title": "Delete duplicated elements in an array that&#39;s a value in a hash and its corresponding ids", "body": "<p>Using <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\"><code>Array#transpose</code></a></p>\n\n<pre><code>hash = {\n  \"options\" =&gt; [\"Language\", \"Question\", \"Question\", \"Answer\", \"Answer\"],\n  \"option_ids\" =&gt; [\"12345\", \"23456\", \"34567\", \"45678\", \"56789\"]\n}\n\nhash.values.transpose.uniq(&amp;:first).transpose.map.with_index {|v,i| [hash.keys[i], v]}.to_h\n#=&gt; {\"options\"=&gt;[\"Language\", \"Question\", \"Answer\"], \"option_ids\"=&gt;[\"12345\", \"23456\", \"45678\"]}\n</code></pre>\n\n<p><strong>After the OP edit:</strong></p>\n\n<pre><code>hash = {\n  \"id\" =&gt; \"sjfdkjfd\",\n  \"name\" =&gt; \"Field Name\",\n  \"type\" =&gt; \"field\",\n  \"options\" =&gt; [\"Language\", \"Question\", \"Question\", \"Answer\", \"Answer\"],\n  \"option_ids\" =&gt; [\"12345\", \"23456\", \"34567\", \"45678\", \"56789\"]\n}\n\nhash_array = hash.to_a.select {|v| v.last.is_a?(Array)}.transpose\nhash.merge([hash_array.first].push(hash_array.last.transpose.uniq(&amp;:first).transpose).transpose.to_h)\n#=&gt; {\"id\"=&gt;\"sjfdkjfd\", \"name\"=&gt;\"Field Name\", \"type\"=&gt;\"field\", \"options\"=&gt;[\"Language\", \"Question\", \"Answer\"], \"option_ids\"=&gt;[\"12345\", \"23456\", \"45678\"]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1556749107, "last_edit_date": 1556749107, "creation_date": 1556746093, "answer_id": 55942931, "question_id": 55942230, "link": "https://stackoverflow.com/questions/55942230/delete-duplicated-elements-in-an-array-thats-a-value-in-a-hash-and-its-correspo/55942931#55942931", "title": "Delete duplicated elements in an array that&#39;s a value in a hash and its corresponding ids", "body": "<pre><code>hash = { \n  \"id\" =&gt; \"sjfdkjfd\",\n  \"name\" =&gt; \"Field Name\",\n  \"type\" =&gt; \"field\",\n  \"options\" =&gt; [\"L\", \"Q\", \"Q\", \"Q\", \"A\", \"A\", \"Q\"],\n  \"option_ids\" =&gt; [\"12345\", \"23456\", \"34567\", \"dog\", \"45678\", \"56789\", \"cat\"]\n}\n</code></pre>\n\n<p>I assume that \"repeated elements\" refers to contiguous equal elements (<code>2</code> only in <code>[1,2,2,1]</code>) as opposed to \"duplicated elements\" (both <code>1</code> and <code>2</code> in the previous example). I do show how the code would be altered (simplified, in fact) if the second interpretation applies.</p>\n\n<pre><code>idx = hash[\"options\"].\n  each_with_index.\n  chunk_while { |(a,_),(b,_)| a==b }.\n  map { |(_,i),*| i }\n  #=&gt; [0, 1, 4, 6]\n\nhash.merge(\n  [\"options\", \"option_ids\"].each_with_object({}) { |k,h| h[k] = hash[k].values_at(*idx) }\n)\n  #=&gt; {\"id\"=&gt;\"sjfdkjfd\",\n  #    \"name\"=&gt;\"Field Name\",\n  #    \"type\"=&gt;\"field\",\n  #    \"options\"=&gt;[\"L\", \"Q\", \"A\", \"Q\"],\n  #    \"option_ids\"=&gt;[\"12345\", \"23456\", \"45678\", \"cat\"]}\n</code></pre>\n\n<p>If \"repeated elements\" is interpreted to mean that the values of <code>\"options\"</code> and <code>\"option_ids\"</code> are to only have the first three elements shown above, calculate <code>idx</code> as follows:</p>\n\n<pre><code>idx = hash[\"options\"].\n  each_with_index.\n  uniq { |s,_| s }.\n  map(&amp;:last)\n    #=&gt; [0, 1, 4]\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-chunk_while\" rel=\"nofollow noreferrer\">Enumerable#chunk_while</a> (<a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-slice_when\" rel=\"nofollow noreferrer\">Enumerable#slice_when</a> could be used instead) and <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-values_at\" rel=\"nofollow noreferrer\">Array#values_at</a>. The steps are as follows.</p>\n\n<pre><code>a = hash[\"options\"]\n  #=&gt; [\"L\", \"Q\", \"Q\", \"Q\", \"A\", \"A\", \"Q\"] \ne0 = a.each_with_index\n  #=&gt; #&lt;Enumerator: [\"L\", \"Q\", \"Q\", \"Q\", \"A\", \"A\", \"Q\"]:each_with_index&gt; \ne1 = e0.chunk_while { |(a,_),(b,_)| a==b }\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator::Generator:0x000055e4bcf17740&gt;:each&gt; \n</code></pre>\n\n<p>We can see the values the enumerator <code>e1</code> will generate and pass to <code>map</code> by converting it to an array:</p>\n\n<pre><code>e1.to_a\n  #=&gt; [[[\"L\", 0]],\n  #    [[\"Q\", 1], [\"Q\", 2], [\"Q\", 3]],\n  #    [[\"A\", 4], [\"A\", 5]], [[\"Q\", 6]]] \n</code></pre>\n\n<p>Continuing,</p>\n\n<pre><code>idx = e1.map { |(_,i),*| i }\n  #=&gt; [0, 1, 4, 6] \n\nc = [\"options\", \"option_ids\"].\n      each_with_object({}) { |k,h| h[k] = hash[k].values_at(*idx) } \n  #=&gt; {\"options\"=&gt;[\"L\", \"Q\", \"A\", \"Q\"],\n  #    \"option_ids\"=&gt;[\"12345\", \"23456\", \"45678\", \"cat\"]} \nhash.merge(c)\n  #=&gt; {\"id\"=&gt;\"sjfdkjfd\",\n  #    \"name\"=&gt;\"Field Name\",\n  #    \"type\"=&gt;\"field\",\n  #    \"options\"=&gt;[\"L\", \"Q\", \"A\", \"Q\"],\n  #    \"option_ids\"=&gt;[\"12345\", \"23456\", \"45678\", \"cat\"]}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7685722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/791cbf6af02ecfe051dd1a9b0c39fa7c?s=128&d=identicon&r=PG&f=1", "display_name": "C. Yee", "link": "https://stackoverflow.com/users/7685722/c-yee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 1, "accepted_answer_id": 55942431, "answer_count": 3, "score": 0, "last_activity_date": 1556801583, "creation_date": 1556741958, "last_edit_date": 1556801583, "question_id": 55942230, "link": "https://stackoverflow.com/questions/55942230/delete-duplicated-elements-in-an-array-thats-a-value-in-a-hash-and-its-correspo", "title": "Delete duplicated elements in an array that&#39;s a value in a hash and its corresponding ids", "body": "<p>I have a hash with values that's an array. How do I delete repeated elements in the array and the corresponding ids in the most performant way? </p>\n\n<p>Here's an example of my hash</p>\n\n<pre><code>hash = { \n  \"id\" =&gt; \"sjfdkjfd\",\n  \"name\" =&gt; \"Field Name\",\n  \"type\" =&gt; \"field\",\n  \"options\" =&gt; [\"Language\", \"Question\", \"Question\", \"Answer\", \"Answer\"],\n  \"option_ids\" =&gt; [\"12345\", \"23456\", \"34567\", \"45678\", \"56789\"]\n}\n</code></pre>\n\n<p>The idea I have is something like this</p>\n\n<pre><code>hash[\"options\"].each_with_index { |value, index |\n  h = {}\n  if h.key?(value)\n    delete(value)\n    delete hash[\"option_ids\"].delete_at(index)\n  else \n    h[value] = index\n  end\n}\n</code></pre>\n\n<p>The result should be</p>\n\n<pre><code>hash = { \n  \"id\" =&gt; \"sjfdkjfd\",\n  \"name\" =&gt; \"Field Name\",\n  \"type\" =&gt; \"field\",\n  \"options\" =&gt; [\"Language\", \"Question\", \"Answer\"],\n  \"option_ids\" =&gt; [\"12345\", \"23456\", \"45678\"]\n}\n</code></pre>\n\n<p>I know I have to put into consideration that when I delete the values of the options and option_ids the indexes of those values are going to change. But not sure how to do this</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs", "isomorphic", "hyperstack"], "answers": [{"comments": [{"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "edited": false, "score": 0, "creation_date": 1556739630, "post_id": 55941733, "comment_id": 98536705, "body": "FYI if you are upgrading I would also just glance at <a href=\"https://github.com/hyperstack-org/hyperstack/blob/edge/install/rails-webpacker.rb\" rel=\"nofollow noreferrer\">github.com/hyperstack-org/hyperstack/blob/edge/install/&hellip;</a> to see what the standard install looks like and update your files accordingly"}], "tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": true, "score": 1, "last_activity_date": 1556739495, "creation_date": 1556739495, "answer_id": 55941733, "question_id": 55941585, "link": "https://stackoverflow.com/questions/55941585/when-upgrading-from-hyperloop-to-hyperstack-is-opal-hot-reloader-gem-still-ne/55941733#55941733", "title": "When upgrading from Hyperloop to Hyperstack, is &quot;opal_hot_reloader&quot; gem still necessary?", "body": "<p>Yes... a version of the hot-loader is built into hyperstack now.</p>\n\n<p>In your <code>hyperstack.rb</code> initializer you want:</p>\n\n<pre><code>  Hyperstack.configuration do |config|\n    ...\n    config.import 'hyperstack/hotloader', client_only: true if Rails.env.development?\n  end\n</code></pre>\n\n<p>The Procfile (for foreman) looks like this:</p>\n\n<pre><code>web:        bundle exec rails s -b 0.0.0.0\nhot-loader: bundle exec hyperstack-hotloader -p 25222 -d app/hyperstack\n</code></pre>\n\n<p>assets/javascripts/application.js should end like this:</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require hyperstack-loader\n</code></pre>\n\n<p>The hyperstack loader will (using the initializer) figure out what additional code to add to your assets including the hotloader.</p>\n"}], "owner": {"reputation": 1003, "user_id": 1008965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1141b8764d7eb8dfeac5aaef0d888e?s=128&d=identicon&r=PG", "display_name": "cantonic", "link": "https://stackoverflow.com/users/1008965/cantonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 55941733, "answer_count": 1, "score": 1, "last_activity_date": 1556739495, "creation_date": 1556738783, "question_id": 55941585, "link": "https://stackoverflow.com/questions/55941585/when-upgrading-from-hyperloop-to-hyperstack-is-opal-hot-reloader-gem-still-ne", "title": "When upgrading from Hyperloop to Hyperstack, is &quot;opal_hot_reloader&quot; gem still necessary?", "body": "<p>I am just upgrading a Rails app from Hyperloop to Hyperstack. Is the \"opal_hot_reloader\" gem obsolete since Hyperstack?</p>\n"}, {"tags": ["ruby", "travis-ci"], "comments": [{"owner": {"reputation": 402, "user_id": 6202371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uu5Tq.jpg?s=128&g=1", "display_name": "weilandia", "link": "https://stackoverflow.com/users/6202371/weilandia"}, "edited": false, "score": 0, "creation_date": 1556740036, "post_id": 55941411, "comment_id": 98536910, "body": "Ruby 2.6 comes with bundler installed by default, so two things come to mind that might be causing the issue:  1) In your travis.yml you may be manually downloading bundler. If so, you can remove that line. 2) You could try clearing your travis cache and running the build again"}], "answers": [{"tags": [], "owner": {"reputation": 2574, "user_id": 4162641, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-QCRH93REO58/AAAAAAAAAAI/AAAAAAAAA20/uZA4Z48QSc0/photo.jpg?sz=128", "display_name": "StephenG", "link": "https://stackoverflow.com/users/4162641/stepheng"}, "is_accepted": true, "score": 2, "last_activity_date": 1557179500, "last_edit_date": 1557179500, "creation_date": 1556831451, "answer_id": 55960295, "question_id": 55941411, "link": "https://stackoverflow.com/questions/55941411/travis-builds-on-ruby-2-6-3-have-bundler-version-mismatch/55960295#55960295", "title": "Travis builds on Ruby 2.6.3 have bundler version mismatch", "body": "<p>Have you tried a <code>before_install</code> step to upgrade <code>bundler</code> before it attempts <code>bundle gem install</code>?</p>\n\n<pre><code>before_install: gem update bundler\n</code></pre>\n"}], "owner": {"reputation": 4397, "user_id": 1436657, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/8f20L.jpg?s=128&g=1", "display_name": "sameers", "link": "https://stackoverflow.com/users/1436657/sameers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "accepted_answer_id": 55960295, "answer_count": 1, "score": 2, "last_activity_date": 1557179500, "creation_date": 1556737944, "question_id": 55941411, "link": "https://stackoverflow.com/questions/55941411/travis-builds-on-ruby-2-6-3-have-bundler-version-mismatch", "title": "Travis builds on Ruby 2.6.3 have bundler version mismatch", "body": "<p>When we upgraded our Rails app to use 2.6.3, with the version specified in</p>\n\n<ul>\n<li><code>.ruby-version</code></li>\n<li><code>Gemfile</code></li>\n<li><code>.travis.yml</code></li>\n</ul>\n\n<p>we get the problem that the \"system bundler\" with Ruby 2.6.3 is not the same version as the latest version of <code>bundler</code> which is 2.0.1</p>\n\n<p>So we get this error message</p>\n\n<pre><code>Fetching bundler-2.0.1.gem\nbundler's executable \"bundle\" conflicts with /home/travis/.rvm/rubies/ruby-2.6.3/bin/bundle\nOverwrite the executable? [yN]  \n\nNo output has been received in the last 10m0s, this potentially indicates a stalled build or something wrong with the build itself.\nCheck the details on how to adjust your build configuration on: https://docs.travis-ci.com/user/common-build-problems/#Build-times-out-because-no-output-was-received\n\nThe build has been terminated\n\n</code></pre>\n\n<p>This doesn't happen with Ruby 2.5.3. I am guessing if we added a pre-install step to maybe delete the system bundler that would solve the problem. Would there be any other solutions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-mocha"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1556733203, "post_id": 55940303, "comment_id": 98534160, "body": "How about turning those methods into a module and including it to Minitest::Test?"}, {"owner": {"reputation": 1753, "user_id": 1456830, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/bf6c46a8118d93dbd1ece61570b2d46a?s=128&d=identicon&r=PG", "display_name": "LateCoder", "link": "https://stackoverflow.com/users/1456830/latecoder"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556733387, "post_id": 55940303, "comment_id": 98534244, "body": "@maxpleaner which methods do you mean? Could you elaborate on how to do this?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1556733477, "post_id": 55940303, "comment_id": 98534283, "body": "Change <code>class Minitest::Test</code> to <code>module MiniTestPatch</code> and then call <code>Minitest::Test.include MiniTestPatch</code> outside the definition. Just worth a shot, I don&#39;t know if it will work."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1556733686, "post_id": 55940303, "comment_id": 98534384, "body": "Actually, you should use <code>prepend</code> instead of <code>include</code>, and possibly you should be calling <code>super</code> in the patched method"}, {"owner": {"reputation": 1753, "user_id": 1456830, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/bf6c46a8118d93dbd1ece61570b2d46a?s=128&d=identicon&r=PG", "display_name": "LateCoder", "link": "https://stackoverflow.com/users/1456830/latecoder"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556733970, "post_id": 55940303, "comment_id": 98534500, "body": "Adding a call to <code>super</code> in <code>before_setup</code> did the trick - thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 1753, "user_id": 1456830, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/bf6c46a8118d93dbd1ece61570b2d46a?s=128&d=identicon&r=PG", "display_name": "LateCoder", "link": "https://stackoverflow.com/users/1456830/latecoder"}, "is_accepted": false, "score": 2, "last_activity_date": 1556734175, "creation_date": 1556734175, "answer_id": 55940647, "question_id": 55940303, "link": "https://stackoverflow.com/questions/55940303/cant-stub-with-mocha-in-ruby-on-rails-test/55940647#55940647", "title": "Can&#39;t stub with mocha in ruby on rails test", "body": "<p>Adding a call to <code>super</code> in the patched method <code>before_setup</code> in <code>test_helper.rb</code> works:</p>\n\n<pre><code>ENV['RAILS_ENV'] ||= 'test'\nrequire File.expand_path('../../config/environment', __FILE__)\n\nrequire \"rails/test_help\"\n\n\nclass ActiveSupport::TestCase\n\nend\n\n\nclass Minitest::Test\n  def before_setup\n      # do something\n      super\n  end\nend\n</code></pre>\n\n<p>This call to <code>super</code> allows the <code>before_setup</code> of <code>Mocha::Integration::MiniTest</code> to be called, which is necessary for proper initialization. </p>\n"}], "owner": {"reputation": 1753, "user_id": 1456830, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/bf6c46a8118d93dbd1ece61570b2d46a?s=128&d=identicon&r=PG", "display_name": "LateCoder", "link": "https://stackoverflow.com/users/1456830/latecoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1610403088, "creation_date": 1556732404, "last_edit_date": 1610403088, "question_id": 55940303, "link": "https://stackoverflow.com/questions/55940303/cant-stub-with-mocha-in-ruby-on-rails-test", "title": "Can&#39;t stub with mocha in ruby on rails test", "body": "<p>I'm fairly new to Ruby/Ruby on Rails and having trouble stubbing out a method via <code>mocha</code> in an existing codebase.</p>\n\n<p>I've simplified the code down to a MWE where this breaks. </p>\n\n<p>Here is <code>test_helper.rb</code>:</p>\n\n<pre><code>ENV['RAILS_ENV'] ||= 'test'\nrequire File.expand_path('../../config/environment', __FILE__)\n\nrequire \"rails/test_help\"\n\n\nclass ActiveSupport::TestCase\n\nend\n\n\nclass Minitest::Test\n  def before_setup\n\n  end\nend\n</code></pre>\n\n<p>And here is the test:</p>\n\n<pre><code>require 'test_helper'\nrequire 'mocha/minitest'\n\nclass MyTest &lt; ActionMailer::TestCase\n\n  describe \"some test\" do\n    it \"should stub\" do\n      My::Class.stubs(:bar).returns(\"foo\")\n      puts My::Class.bar\n    end\n  end\n\nend\n</code></pre>\n\n<p>This results in the following error when I run the test:</p>\n\n<p><code>Mocha::NotInitializedError: Mocha methods cannot be used outside the context of a test</code></p>\n\n<p>However, when I redefine my <code>test_helper.rb</code> as follows:</p>\n\n<pre><code>ENV['RAILS_ENV'] ||= 'test'\nrequire File.expand_path('../../config/environment', __FILE__)\n\nrequire \"rails/test_help\"\n\n\nclass ActiveSupport::TestCase\n\nend\n\n\n# class Minitest::Test\n#   def before_setup\n#\n#   end\n# end\n</code></pre>\n\n<p>The test passes (and \"foo\" is printed as expected).</p>\n\n<p>Why does the <code>class Minitest::Test...end</code> in <code>test_helper.rb</code> cause the first error? I can't remove that code from the actual codebase, so how can I modify it to work with <code>mocha</code>?</p>\n\n<p>Ruby version: 2.4.1</p>\n\n<p>Rails version: 4.2.8</p>\n\n<p>Mocha version: 1.5.0</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "google-chrome", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556734740, "post_id": 55939730, "comment_id": 98534810, "body": "If it only happens on some user&#39;s machines, is it possible they  have some extensions which could cause a problem?  Are they running many other tabs with other things going on?  Can it be reproduced after a fresh restart of Chrome after clearing cookies/cache/ local storage etc?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1556734815, "post_id": 55939730, "comment_id": 98534837, "body": "Do the request look different in the logs? How do they look like?"}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556736889, "post_id": 55939730, "comment_id": 98535667, "body": "@lacostenycoder added answers under <b>EDIT 3+4</b>. Fresh restart of Chrome (or even whole Windows 10) doesn&#39;t matter, it still freezes. I originally thought that the problem will be related to the high usage of RAM memory, as many people on the Internet face the memory issue in the combinantion with Chrome, but RAM is surprisingly calm, contrary to the CPU. I found <a href=\"https://www.drivereasy.com/knowledge/chrome-high-cpu-usage-solved/\" rel=\"nofollow noreferrer\">drivereasy.com/knowledge/chrome-high-cpu-usage-solved</a> - I&#39;m going to try this yet and slowly running out of ideas. This is a &quot;work&quot; laptop, so there&#39;s a minimum of programs installed."}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1556736983, "post_id": 55939730, "comment_id": 98535714, "body": "@spickermann I am analyzing the Apache logs now and will post it here, however, I cannot think of what could possibly be there different (in params etc) compared to other laptops."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1556741628, "post_id": 55939730, "comment_id": 98537510, "body": "Are you sure you&#39;re running the sidekiq jobs async? (e.g. perform_later) Also, can you share any of the code? Can you expose the chrome tools &amp; view the networking tab &amp; console tabs (via trying this twice)"}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1556816150, "post_id": 55939730, "comment_id": 98565746, "body": "How long do these requests take in your rails log? I&#39;d guess that this issue is client side, but just to be safe."}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1556819269, "post_id": 55939730, "comment_id": 98567059, "body": "@JayDorsey just double checked that, every single Sidekiq job is run as async. Due to complexity, I am afraid it would not be beneficial. As of the Chrome tools, I tried to do it, but when the freeze comes, nothing is shown in Chrome Dev Tools"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1556820619, "post_id": 55939730, "comment_id": 98567656, "body": "Is hardware accelaration in chrome off/on? Can you try turning it off? Also, an you open the Google Chrome task manager (not windows) when you click and see if any extensions spike memory/CPU/network?"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1556820751, "post_id": 55939730, "comment_id": 98567713, "body": "Also, antivirus running on any/all computers? And do you ahve Adobe Reader DC on any/all of the computers?"}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1557310683, "post_id": 55939730, "comment_id": 98719069, "body": "Hello all, thank you for tips and comments. We found that the problem is most likely in Chrome&#39;s autofill limit for saved users data. I summarized it under the point <b>EDIT 6</b>. Now, I am looking in Chrome&#39;s setup to see if there&#39;s a workaround for being able to save more than 1,000 user autofill data."}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 293, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1557310497, "creation_date": 1556729700, "last_edit_date": 1557310497, "question_id": 55939730, "link": "https://stackoverflow.com/questions/55939730/ruby-on-rails-5-app-freezes-in-google-chrome-when-a-submit-button-is-pressed", "title": "Ruby On Rails 5 app freezes in Google Chrome when a submit button is pressed", "body": "<p>I am facing an issue with my Rails 5 app (running on AWS, Apache server) where one of our coworkers started experiencing freezing of browser (Google Chrome on Windows 10) when pressing a submit button at a form. When he presses the submit button, the browser freezes for 3 minutes and then reloads with new (updated) values in the form.</p>\n\n<p>This started a few weeks ago and it happens only in Google Chrome (tried to upgrade it to its newest version, reinstall it, but it didn't help); in Mozilla or Internet Explorer it works on his laptop smoothly. This behavior appeared on 2 people's laptops in the company, the other 15 people are fine (mix of Macbooks and Windows laptops) - including me.</p>\n\n<p>I connected to this person's laptop via TeamViewer and inspected the laptop's behavior. When the form's submit button is pressed, Google Chrome freezes (<code>Not responding</code>), the CPU usage jumps from 10% to 70%. Then, after 3 minutes when Google Chrome \"unblocks\" itself, the CPU usage drops again to 10% and Google Chrome is possible to use again.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Zl8nx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zl8nx.png\" alt=\"enter image description here\"></a>\nI thought that on the laptop might be running different processes, but that doesn't seem to be the case:\n<a href=\"https://i.stack.imgur.com/yo2Uj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yo2Uj.png\" alt=\"enter image description here\"></a></p>\n\n<p>The model that gets updated has 30 associations (<code>belongs_to</code> or <code>has_many</code>) - not all of them get updated when the form is sent. There are 2 nested attributes. Also, on this model is used the <a href=\"https://github.com/paper-trail-gem/paper_trail\" rel=\"nofollow noreferrer\">paper_tail</a> gem.</p>\n\n<p>I am struggling to debug this issue as I've never faced it and also, we have 15 laptops with Win 10 and Google Chrome and only on 2 of them is this issue.</p>\n\n<p>I'd be very grateful for any advice.</p>\n\n<p><strong>EDIT:</strong> I forgot to mention that after sending the form, the Rails app runs some Sidekiq jobs.</p>\n\n<p><strong>EDIT 2:</strong></p>\n\n<pre><code>Ubuntu 14.04.5 LTS\nRails 5.1.3\nruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-linux]\nSidekiq v5.0.4\n</code></pre>\n\n<p><strong>EDIT 3:</strong> On the machine are only Google Docs-related extensions and AdBlock. However, for debugging, I have removed them all to see if this is the issue - still the same. The problematic behavior is still there.</p>\n\n<p><strong>EDIT 4:</strong> The number of tabs doesn't matter. Even with only 1 opened tab is the issue here. Also tried to empty cache &amp; cookies, as well as to restore Google Chrome to its default setting.</p>\n\n<p><strong>EDIT 5:</strong> After another run of debugging - server logs look normal (there's nothing special), front-end loading times as well. Then, I tried to use the app in Chrome's incognito tab - and it worked smoothly! Then, I tried to use Chrome in the guest's tab - and again, it worked smoothly as well! But if the app is running in a tab where a user is logged in (or even logged out - but NOT incognito/guest), then the app is freezing when the form is submitted. I am wondering what can be installed/added under the user profile except for extensions. I've tried to remove/disable all of these, but the app was still freezing:\n<a href=\"https://i.stack.imgur.com/S0dyV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S0dyV.png\" alt=\"enter image description here\"></a>\nI tried to reset Chrome to its default settings - didn't help. A colleague that is facing this issue said that he tried to reinstall Google Chrome, everything was working fine for a few weeks, but then the freezing started again.  </p>\n\n<p><strong>EDIT 6:</strong> It looks that I finally found the reason why Chrome is freezing on certain laptops - it seems to be <a href=\"https://stackoverflow.com/questions/34056939/chome-autofill-is-there-a-limit-to-the-number-of-fields-for-it-to-work\">the capacity of the autofill feature</a> that Chrome has. The limit here is <strong>1,000 saved user data information per profile</strong>. When I checked the users data on the problematic laptops (through <a href=\"https://sqlitebrowser.org/\" rel=\"nofollow noreferrer\">DB Browser for SQLite</a>), I found that on both of them is this limit hit. When I tried to create a new Chrome profile or use Chrome in the incognito/guest mode, the freezing (and <strong>Not Responding</strong> status) is gone and everything works smoothly.</p>\n\n<p>Now, because we need the autofill feature and it makes our life way easier - we're looking into Chrome extensions (that could ideally utilize the existing autofill data and allow us to save new ones - more than 1k). Or, potentially, looking after Firefox and its limit for autofill user data. Any ideas about how to extend the autofill user data limit in Chrome?</p>\n"}, {"tags": ["ruby", "git", "branch"], "answers": [{"tags": [], "owner": {"reputation": 18855, "user_id": 6330106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebfe17b6dfc96ff9309a0e9bfd5995c?s=128&d=identicon&r=PG&f=1", "display_name": "ElpieKay", "link": "https://stackoverflow.com/users/6330106/elpiekay"}, "is_accepted": true, "score": 1, "last_activity_date": 1556727499, "creation_date": 1556727499, "answer_id": 55939293, "question_id": 55938874, "link": "https://stackoverflow.com/questions/55938874/find-all-repo-branches-with-the-ruby-git-gem-without-cloning-the-whole-repo/55939293#55939293", "title": "Find all repo branches with the ruby-git gem, without cloning the whole repo", "body": "<p><code>git ls-remote --heads https://user@bitbucket.org/my_repo.git</code> prints all the branches in the remote repository without cloning the repository. Note that the remote repository may reject <code>git ls-remote</code> for safety.</p>\n\n<p>There is an example on <a href=\"https://github.com/ruby-git/ruby-git\" rel=\"nofollow noreferrer\">ruby-git gem</a>,</p>\n\n<pre><code>Git.ls_remote('https://github.com/ruby-git/ruby-git.git') # returns a hash containing the available references of the repo.\n</code></pre>\n\n<p>So you can try</p>\n\n<pre><code>Git.ls_remote('https://user@bitbucket.org/my_repo.git')\n</code></pre>\n\n<p>If <code>Git.ls_remote</code> does not support <code>--heads</code>, the refs that start with <code>refs/heads/</code> are what you want.</p>\n"}], "owner": {"reputation": 34, "user_id": 2226653, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78cf12ddf9d6ac72738374643c135e14?s=128&d=identicon&r=PG", "display_name": "JohnSmith1976", "link": "https://stackoverflow.com/users/2226653/johnsmith1976"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 55939293, "answer_count": 1, "score": 1, "last_activity_date": 1556727499, "creation_date": 1556725413, "question_id": 55938874, "link": "https://stackoverflow.com/questions/55938874/find-all-repo-branches-with-the-ruby-git-gem-without-cloning-the-whole-repo", "title": "Find all repo branches with the ruby-git gem, without cloning the whole repo", "body": "<p>I wish to check out which branches exists for a given repository. I know how to do this by cloning the full repository with the <a href=\"https://github.com/ruby-git/ruby-git\" rel=\"nofollow noreferrer\">ruby-git gem</a>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Git.clone(\"https://user@bitbucket.org/my_repo.git\", \"my_repo\", :path =&gt; \"/my/repos\")\n\ng = Git.open(\"/my/repos/my_repo\")\n\ng.branches.each do |branch|\n  puts branch.name\nend\n</code></pre>\n\n<p>But if my objective is to simply check out what branches exists it feels wrong to clone the full repository. Isn't there a way to clone metadata only?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 1, "creation_date": 1556754200, "post_id": 55937367, "comment_id": 98540987, "body": "<code>Puma</code> is not the web server, its an application server like <code>Webrick</code>, <code>Unicorn</code>, you still   use a web server like <code>apache</code>, <code>nginx</code>. The application server sits between the web server and your application"}, {"owner": {"reputation": 331, "user_id": 1461022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tN4Je.jpg?s=128&g=1", "display_name": "wheresmycookie", "link": "https://stackoverflow.com/users/1461022/wheresmycookie"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1556884874, "post_id": 55937367, "comment_id": 98589413, "body": "Thanks @Subash, I did not realize that but makes sense now that you mention it."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 838562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b39430aaa8478be7ea8f41fe270df79?s=128&d=identicon&r=PG", "display_name": "Yann Marquet", "link": "https://stackoverflow.com/users/838562/yann-marquet"}, "is_accepted": true, "score": 0, "last_activity_date": 1556719233, "creation_date": 1556719233, "answer_id": 55937478, "question_id": 55937367, "link": "https://stackoverflow.com/questions/55937367/what-are-the-default-process-when-a-rails-application-is-launched/55937478#55937478", "title": "What are the default process when a rails application is launched?", "body": "<p>Yes, you're correct </p>\n\n<p>Puma is now the default rails server, it's good you can absolutely use it for development as well.</p>\n\n<p>rb-fsevent is a process launched by rails to reload the relevant file when it has been edited so any changes are immediately reflected without having to restart the rails server (here puma)</p>\n"}], "owner": {"reputation": 331, "user_id": 1461022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tN4Je.jpg?s=128&g=1", "display_name": "wheresmycookie", "link": "https://stackoverflow.com/users/1461022/wheresmycookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 55937478, "answer_count": 1, "score": -2, "last_activity_date": 1556719233, "creation_date": 1556718820, "question_id": 55937367, "link": "https://stackoverflow.com/questions/55937367/what-are-the-default-process-when-a-rails-application-is-launched", "title": "What are the default process when a rails application is launched?", "body": "<p>I'm fairly new to rails, but I noticed that after running a newly-created rails app (with <code>rails new blog</code>) that there are quite a few process that are started, and the app server itself is running with <code>puma</code>.</p>\n\n<pre><code>&gt; ps\n&gt; 24427 ttys000    0:01.58 puma 3.12.1 (tcp://localhost:3000) [blog]  \n&gt; 24429 ttys000    0:00.02 /Users/rob/.rvm/gems/ruby-2.6.0/gems/rb-fsevent-0.10.3/bin/fsevent_watch --format=otnetstring --latency 0.1 \n&gt; 24430 ttys000    0:00.02 /Users/rob/.rvm/gems/ruby-2.6.0/gems/rb-fsevent-0.10.3/bin/fsevent_watch --format=otnetstring --latency 0.1 \n&gt; 24431 ttys000    0:00.02 /Users/robertkotcher/.rvm/gems/ruby-2.6.0/gems/rb-fsevent-0.10.3/bin/fsevent_watch --format=otnetstring --latency 0.1 \n&gt; 24432 ttys000    0:00.02 /Users/rob/.rvm/gems/ruby-2.6.0/gems/rb-fsevent-0.10.3/bin/fsevent_watch --format=otnetstring --latency 0.1 \n&gt; 24433 ttys000    0:00.02 /Users/rob/.rvm/gems/ruby-2.6.0/gems/rb-fsevent-0.10.3/bin/fsevent_watch --format=otnetstring --latency 0.1 \n&gt; 24434 ttys000    0:00.02 /Users/rob/.rvm/gems/ruby-2.6.0/gems/rb-fsevent-0.10.3/bin/fsevent_watch --format=otnetstring --latency 0.1 \n&gt; 24435 ttys000    0:00.02 /Users/rob/.rvm/gems/ruby-2.6.0/gems/rb-fsevent-0.10.3/bin/fsevent_watch --format=otnetstring --latency 0.1 \n&gt; 24436 ttys000    0:00.02 /Users/rob/.rvm/gems/ruby-2.6.0/gems/rb-fsevent-0.10.3/bin/fsevent_watch --format=otnetstring --latency 0.1 \n&gt; 24437 ttys000    0:00.02 /Users/rob/.rvm/gems/ruby-2.6.0/gems/rb-fsevent-0.10.3/bin/fsevent_watch --format=otnetstring --latency 0.1 \n&gt; 24438 ttys000    0:00.02 /Users/rob/.rvm/gems/ruby-2.6.0/gems/rb-fsevent-0.10.3/bin/fsevent_watch --format=otnetstring --latency 0.1\n</code></pre>\n\n<p>I thought Puma was a web server that is optionally added, but it seems here that it's running by default. Is that correct?</p>\n\n<p>Secondly, what is this <code>rb-fsevent</code> gem and where is it being used?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 55420, "user_id": 52443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a220753dbb4d24a76430971a18ed4dce?s=128&d=identicon&r=PG", "display_name": "Welbog", "link": "https://stackoverflow.com/users/52443/welbog"}, "edited": false, "score": 1, "creation_date": 1556714773, "post_id": 55936384, "comment_id": 98525556, "body": "It&#39;s unclear what you&#39;re trying to do, nor why you&#39;re trying to do it. What problem are you trying to solve? Why can&#39;t you simply fill the array with the score, followed by a bunch of zeroes? (E.g., score 11, array size 4: <code>[11, 0, 0, 0]</code>.) Are you trying to make it so that each number is as similar to the others as possible? If so, why not go with <code>[11&#47;4, 11&#47;4, 11&#47;4, 11&#47;4]</code>?"}, {"owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "reply_to_user": {"reputation": 55420, "user_id": 52443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a220753dbb4d24a76430971a18ed4dce?s=128&d=identicon&r=PG", "display_name": "Welbog", "link": "https://stackoverflow.com/users/52443/welbog"}, "edited": false, "score": 0, "creation_date": 1556715033, "post_id": 55936384, "comment_id": 98525689, "body": "I want an array that sums up to 11 this [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0] OR [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0.5, 0.5]. It can only have values 0, 0.5 or 1. I need this to generate test data."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556724801, "post_id": 55936384, "comment_id": 98530423, "body": "Your method throws an error if I run it <code>random_scores(12,11)</code>"}, {"owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "edited": false, "score": 0, "creation_date": 1556725513, "post_id": 55936384, "comment_id": 98530756, "body": "And it does not return an array of size 12 all the time hmmm"}], "answers": [{"comments": [{"owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "edited": false, "score": 0, "creation_date": 1556719902, "post_id": 55936710, "comment_id": 98527900, "body": "That comes close to what I want but I rather have something that does not raise an exception. I want something that generates a random array I did not mention that before sorry for that."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "edited": false, "score": 0, "creation_date": 1556722927, "post_id": 55936710, "comment_id": 98529445, "body": "Maybe adding <code>shuffle</code> At the end."}, {"owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "edited": false, "score": 0, "creation_date": 1556723190, "post_id": 55936710, "comment_id": 98529576, "body": "Indeed shuffle does that thanks. I have a solution that works see my question. Don&#39;t know if it can be improved but it works."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 2, "last_activity_date": 1556716878, "last_edit_date": 1556716878, "creation_date": 1556715787, "answer_id": 55936710, "question_id": 55936384, "link": "https://stackoverflow.com/questions/55936384/ruby-split-number-in-ones-or-halves/55936710#55936710", "title": "Ruby Split number in ones or halves", "body": "<p>If I get the point, one possible option could be (brute force)</p>\n\n<pre><code>size = 12\nsum = 11\ntmp = Array.new(12){1}\n\nloop do\n  raise 'not possible' if tmp.sum &lt; sum\n  tmp[tmp.index(1)] = 0.5 if tmp.index(1)\n  unless tmp.index(1)\n    tmp[tmp.index(0.5)] = 0\n  end\n  break if tmp.sum == sum\nend\n\ntmp #=&gt; [0.5, 0.5, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]\ntmp.sum #=&gt; 11.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "edited": false, "score": 0, "creation_date": 1556735242, "post_id": 55938911, "comment_id": 98535003, "body": "This is the perfect answer just what I was after. Both shuffles are needed to get a combination of 0&#39;s, 1&#39;s and 0.5&#39;s otherwise I would get only 1&#39;s and 0&#39;s for even numbers. Thanks Aleksei!"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556735619, "post_id": 55938911, "comment_id": 98535144, "body": "<code>a.sum</code> raises <code>NoMethodError: undefined method </code>sum&#39;` in Ruby &lt; 2.4.1"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1556739862, "post_id": 55938911, "comment_id": 98536818, "body": "This is clever and works well as long as <code>[0,0.5,1].repeated_combination(n).to_a.size</code> is not to great. For <code>n=100</code> it&#39;s <code>5151</code>, for <code>n=500</code>, it&#39;s <code>125751</code>, for <code>n=1000</code> it&#39;s <code>501501</code>, for <code>n=10_000</code>, it&#39;s (I&#39;ll get back to you)."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556792908, "post_id": 55938911, "comment_id": 98553106, "body": "@CarySwoveland remove the <code>to_a</code> and utilize the enumerator&#39;s ability to calculate its <a href=\"http://ruby-doc.org/core-2.6.3/Enumerator.html#method-i-size\" rel=\"nofollow noreferrer\"><code>size</code></a> lazily ;-)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556796583, "post_id": 55938911, "comment_id": 98554915, "body": "@Stefan unfortunately, <code>shuffle</code> is defined on array but not on enumerable."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1556800445, "post_id": 55938911, "comment_id": 98557009, "body": "@AlekseiMatiushkin indeed, but creating all 91 combinations in order to find the 2 which sum to 11 seems a bit wasteful."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556800894, "post_id": 55938911, "comment_id": 98557293, "body": "@Stefan I thought about calculating the <code>size = 91</code> and lazy doing [contrived] <code>loop { i = rand(0...size); break combs[i].shuffle if combs[i].sum == 11 }</code> but it would overcomplicate the code and be less random due to different intervals between matches."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1556725879, "last_edit_date": 1556725879, "creation_date": 1556725556, "answer_id": 55938911, "question_id": 55936384, "link": "https://stackoverflow.com/questions/55936384/ruby-split-number-in-ones-or-halves/55938911#55938911", "title": "Ruby Split number in ones or halves", "body": "<p>Ruby provides all you require here, no need to write any algorithmic code. <a href=\"https://ruby-doc.org/core/Array.html#method-i-repeated_combination\" rel=\"nofollow noreferrer\"><code>Array#repeated_combination</code></a> is your friend here:</p>\n\n<pre><code>[0, 0.5, 1].\n  repeated_combination(12).    # 91 unique variant\n  to_a.                        # unfortunately it cannot be lazy\n  shuffle.                     # to randomize array outcome\n  detect { |a| a.sum == 11 }.\n  shuffle                      # to randomize numbers inside array\n#\u21d2 [0.5, 0.5, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]\n</code></pre>\n\n<hr>\n\n<p><em>Sidenote:</em> one might avoid the necessity to shuffle twice (both array of generated arrays and the resulting array) by using <a href=\"https://ruby-doc.org/core/Array.html#method-i-repeated_permutation\" rel=\"nofollow noreferrer\"><code>Array#repeated_permutation</code></a>, but this would drastically increase memory load and execution time.</p>\n"}, {"comments": [{"owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "edited": false, "score": 0, "creation_date": 1556736416, "post_id": 55940719, "comment_id": 98535455, "body": "Thanks Cary, this also works just like I was looking for. I was thinking about calculating of maximum number of 0.5&#39;s and 1&#39;s on my way home I had not jet figured out how but that&#39;s just what you have done here. But I prefer the answer of Aleksei Matiushkin because of its simplicity."}, {"owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "edited": false, "score": 0, "creation_date": 1556780654, "post_id": 55940719, "comment_id": 98547021, "body": "I ran this method and the version of Aleksei and this version is more efficient it uses less memory and runs faster. But when I test this version with tot = 9.5 then the sum of the array it returns is 9 or 9.0. Perhaps I did not mention the score input could/should be a Float."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "edited": false, "score": 0, "creation_date": 1556783099, "post_id": 55940719, "comment_id": 98548210, "body": "My solution is premised on the total being an integer and <code>0</code>, <code>0.5</code> and <code>1</code> being the possible values. I&#39;ll think about it but I&#39;m doubtful there&#39;s an easy fix for my answer."}, {"owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "edited": false, "score": 0, "creation_date": 1556783891, "post_id": 55940719, "comment_id": 98548579, "body": "Yes, I forgot to mention sorry about that. I like the efficiency of your approach but unfortunately I needed to input floats as well."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1556808587, "post_id": 55940719, "comment_id": 98561866, "body": "Would it work with multiples of 0.5 for <code>tot</code> if you doubled all of the inputs and then halved the outputs?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1556811188, "post_id": 55940719, "comment_id": 98563353, "body": "@Jordan, that ran through my mind as well. The problem is that if you ended up with an odd number of <code>1</code>&#39;s you are left with a fractional number of <code>1</code>&#39;s after dividing by <code>2</code>. If you reduce that number of (doubled) <code>1</code>&#39;s by one and increase the number of doubled pairs of <code>0.5</code>&#39;s by one the sum still equals <code>tot</code>. After dividing by two, however, the number of elements goes from <code>size</code> to <code>size+1</code>. If there is at least one zero the number of zeroes can be reduced by one, but if there are no zeroes it&#39;s a dead end. Even if there is at least one zero, randomness is lost."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 2, "creation_date": 1556815636, "post_id": 55940719, "comment_id": 98565560, "body": "Smek and @JordanRunning, I&#39;ve modified my answer to deal with the case where <code>tot</code> can be an odd multiple of <code>0.5</code>."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1556816457, "post_id": 55940719, "comment_id": 98565865, "body": "@CarySwoveland Nice work. I just posted an answer that you might be interested in. \ud83d\ude09"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1556829567, "post_id": 55940719, "comment_id": 98571442, "body": "Based on suggestions made by @JordanRunning (including a comment he made on his answer), I&#39;ve simplified and improved the efficiency of my answer considerably. Thanks, Jordan!"}, {"owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "edited": false, "score": 0, "creation_date": 1556881706, "post_id": 55940719, "comment_id": 98587800, "body": "Cool benchmarked 1000000 times: Time: 3.45 Memory: 10.02 MB! Sorry I&#39;m a performance fetishist i guess."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1556829384, "last_edit_date": 1556829384, "creation_date": 1556734564, "answer_id": 55940719, "question_id": 55936384, "link": "https://stackoverflow.com/questions/55936384/ruby-split-number-in-ones-or-halves/55940719#55940719", "title": "Ruby Split number in ones or halves", "body": "<p><strong>Parameters and variables</strong></p>\n\n<p>Given:</p>\n\n<ul>\n<li><code>tot</code>, the desired total, an integer or an odd multiple of <code>0.5</code>; and</li>\n<li><code>size</code>, the total number of <code>0</code>'s, <code>0.5</code>'s and <code>1</code>'s that total <code>tot</code>, with the requirement that <code>size &gt;= tot</code>.</li>\n</ul>\n\n<h1><p></p></h1>\n\n<p>we define three variables:</p>\n\n<ul>\n<li><code>n0</code> equals the number of zeroes;</li>\n<li><code>n0pt5_pairs</code> equals the number of pairs of <code>0.5</code>'s; and </li>\n<li><code>n1</code> equals the number of ones.</li>\n</ul>\n\n<p><strong>Case 1: <code>tot</code> is an integer</strong></p>\n\n<p>We require:</p>\n\n<pre><code>0 &lt;= n0pt5_pairs &lt;= [tot, size-tot].min\n</code></pre>\n\n<p>Note that because <code>n1 = tot - n0pt5_pairs</code>, <code>2 * n0pt5_pairs + n1 = n0pt5_pairs + tot &gt; size</code> if <code>n0pt5_pairs &gt; size-tot</code>. That is, the total number of <code>0.5</code>'s and ones exceeds <code>size</code> if the number of <code>0.5</code> pairs exceeds <code>size-tot</code>.</p>\n\n<p>Given a value for <code>n0pt5_pairs</code> that satisfies the above requirement, <code>n0</code> and <code>n1</code> are determined:</p>\n\n<pre><code>n1 = tot - n0pt5_pairs\nn0 = size - 2*n0pt5_pairs - n1\n   = size - tot - n0pt5_pairs\n</code></pre>\n\n<p>We can therefore randomly select a random triple <code>[n0, 2*n0pt5_pairs, n1]</code> as follows:</p>\n\n<pre><code>def random_combo(size, tot)\n  n0pt5_pairs = rand(1+[tot, size-tot].min)\n  [size-tot-n0pt5_pairs, 2*n0pt5_pairs, tot-n0pt5_pairs]\nend\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>arr = random_combo(17, 11)\n  #=&gt; [3, 6, 8]\n</code></pre>\n\n<p>This is used to generate the array</p>\n\n<pre><code>arr1 = [*[0]*arr[0], *[0.5]*arr[1], *[1]*arr[2]]\n  #=&gt; [0, 0, 0, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 1, 1, 1, 1, 1, 1, 1, 1] \n</code></pre>\n\n<p>which we shuffle:</p>\n\n<pre><code>arr1.shuffle\n  #=&gt; [1, 0, 0.5, 1, 0.5, 0, 1, 1, 0, 1, 1, 1, 0.5, 0.5, 1, 0.5, 0.5]\n</code></pre>\n\n<p>Note <code>arr1.size #=&gt; 17</code> and <code>arr.sum #=&gt; 11</code>.</p>\n\n<p><strong>Case 2: <code>tot</code> is a multiple of 0.5</strong></p>\n\n<p>If</p>\n\n<pre><code>tot = n + 0.5\n</code></pre>\n\n<p>where <code>n</code> is an integer, every combination of <code>0</code>'s, <code>0.5</code>'s and <code>1</code>'s will have at least one <code>0.5</code>. We therefore can compute the number of <code>0</code>'s and <code>1</code>'s, together with the number of <code>0.5</code>'s <em>in excess of one</em>. To do that we simply reduce <code>tot</code> by <code>0.5</code> (making it equal to an integer) and <code>size</code> by one, use <code>generate_for_integer</code> to solve that problem, then for each three-element array returned by that method increase the number of <code>0.5</code>'s by one.</p>\n\n<pre><code>def generate(size, tot)\n  return nil if size.zero?\n  is_int = (tot == tot.floor)\n  tot = tot.floor\n  size -= 1 unless is_int \n  n0pt5_pairs = rand(1+[tot, size-tot].min)\n  [*[0]*(size-tot-n0pt5_pairs), *[0.5]*(2*n0pt5_pairs + (is_int ? 0 : 1)),\n   *[1]*(tot-n0pt5_pairs)].\n  shuffle\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>ge = generate(17, 10)\n  #=&gt; [0, 1, 0, 1, 0.5, 0.5, 0, 0.5, 0.5, 1, 1, 1, 1, 0.5, 0.5, 0.5, 0.5] \nge.size #=&gt; 17 \nge.sum  #=&gt; 10.0 \n\ngo = generate(17, 10.5)\n  #=&gt; [0.5, 0.5, 0.5, 1, 0, 0.5, 0.5, 1, 1, 0.5, 1, 1, 0.5, 1, 0.5, 0.5, 0] \ngo.size #=&gt; 17 \ngo.sum  #=&gt; 10.5  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1556817119, "post_id": 55957120, "comment_id": 98566124, "body": "Very nicely done! I particularly like your examples at the beginning, which makes it easy to follow the code later. Two small things: 1) I don&#39;t actually generate permutations; I just map the range <code>0..[tot, size-tot].min</code>. 2) you might replace <code>score.integer?</code> with <code>score == score.floor</code> to permit <code>score</code> being entered as (for example), <code>11.0</code>. Without thinking about it too hard I expect our solutions are actually quite similar."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556817494, "post_id": 55957120, "comment_id": 98566293, "body": "Oops. For some reason I thought <code>integer?</code> returned <code>true</code> for e.g. <code>11.0</code>. I&#39;ll fix that. Thanks!"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556823762, "post_id": 55957120, "comment_id": 98569066, "body": "@CarySwoveland &quot;Permutations&quot; was the wrong word, of course. I&#39;ve changed the language I used there. As I&#39;m wont to do I benchmarked these three solutions: <a href=\"https://repl.it/@jrunning/GainsboroTrainedCells\" rel=\"nofollow noreferrer\">repl.it/@jrunning/GainsboroTrainedCells</a> It shakes out about how you&#39;d expect, I think."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556824349, "post_id": 55957120, "comment_id": 98569320, "body": "And you&#39;re right, our solutions are extremely similar. The main difference is that I figured out how to pick an iteration of your <code>map</code> at random without generating any of the other iterations. I suspect you&#39;d have arrived at the same thing given more time."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556825966, "post_id": 55957120, "comment_id": 98570071, "body": "Not necessarily, I have many blind spots. I&#39;ll edit my answer to incorporate that suggestion."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1556864403, "post_id": 55957120, "comment_id": 98579293, "body": "I re-ran your benchmark with my updated code (that incorporates your idea of doing just one random selection). Not surprisingly, my code runs neck-and-neck with yours."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556871298, "post_id": 55957120, "comment_id": 98582300, "body": "You can calculate <code>num_halves</code> much simpler: <code>num_halves = size - num_ones - num_zeroes</code>. And you could reduce the number of variables by modifying them, i.e. <code>ones = score.floor</code> and later on <code>ones -= i</code> (no need to keep the initial values)."}, {"owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "edited": false, "score": 0, "creation_date": 1556877542, "post_id": 55957120, "comment_id": 98585718, "body": "Very nice it uses more memory than the solution of Aleksei Matiushkin but it runs faster. I ran a benchmark 1.000.000 times: Time: 10.97 Memory: 16.18 MB vs Time: 191.41 Memory: 4.24 MB. MAybe reducing the number of variables like Stefan suggest helps reducing memory usage."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 3, "last_activity_date": 1556825341, "last_edit_date": 1556825341, "creation_date": 1556816416, "answer_id": 55957120, "question_id": 55936384, "link": "https://stackoverflow.com/questions/55936384/ruby-split-number-in-ones-or-halves/55957120#55957120", "title": "Ruby Split number in ones or halves", "body": "<p>I like Cary Swoveland's answer, but in fact this can be done without generating an array of solutions.</p>\n\n<p>Let's consider a few examples.</p>\n\n<p>Given size = 6 and score = 3, <em>without</em> shuffling, these are the possible outputs (numbered on the left for reasons that will become apparent):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>i               ones halves zeroes\n0\u2502 1 1 1 0 0 0    3     0      3\n1\u2502 1 1 \u00bd \u00bd 0 0    2     2      2\n2\u2502 1 \u00bd \u00bd \u00bd \u00bd 0    1     4      1\n3\u2502 \u00bd \u00bd \u00bd \u00bd \u00bd \u00bd    0     6      0\n</code></pre>\n\n<p>Given size = 6 and score = 3.5:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>i               ones halves zeroes\n0\u2502 1 1 1 \u00bd 0 0    3     1      2\n1\u2502 1 1 \u00bd \u00bd \u00bd 0    2     3      1\n2\u2502 1 \u00bd \u00bd \u00bd \u00bd \u00bd    1     5      0\n</code></pre>\n\n<p>Given size = 11 and score = 4.5:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>i                         ones halves zeroes\n0\u2502 1 1 1 1 \u00bd 0 0 0 0 0 0    4     1      6\n1\u2502 1 1 1 \u00bd \u00bd \u00bd 0 0 0 0 0    3     3      5\n2\u2502 1 1 \u00bd \u00bd \u00bd \u00bd \u00bd 0 0 0 0    2     5      4\n3\u2502 1 \u00bd \u00bd \u00bd \u00bd \u00bd \u00bd \u00bd 0 0 0    1     7      3\n4\u2502 \u00bd \u00bd \u00bd \u00bd \u00bd \u00bd \u00bd \u00bd \u00bd 0 0    0     9      2\n</code></pre>\n\n<p>Given size = 12 and score = 11:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>i                            ones halves zeroes\n0\u2502 1 1 1 1 1 1 1 1 1 1 1 0    11     0      1\n1\u2502 1 1 1 1 1 1 1 1 1 1 \u00bd \u00bd    10     2      0\n</code></pre>\n\n<p>Can you see the patterns? After a bit of chin-scratching we discover the following facts:</p>\n\n<ol>\n<li><p>The number of possible outputs \ud835\udc5b for a given <em>size</em> and <em>score</em> is given by:</p>\n\n<blockquote>\n  <p><em>\ud835\udc5b</em> \uff1d min(\u230a<em>score</em>\u230b, <em>size</em> \u2212 \u2308<em>score</em>\u2309) + 1</p>\n</blockquote></li>\n<li><p>As \ud835\udc56 increases, the number of ones decreases. The number of ones is given by:</p>\n\n<blockquote>\n  <p>count(1) \uff1d \u230a<em>score</em>\u230b \u2212 \ud835\udc56</p>\n</blockquote></li>\n<li><p>As \ud835\udc56 increases, the number of halves (\u00bd) increases. The number of halves is given by:</p>\n\n<blockquote>\n  <p>count(\u00bd) \uff1d 2(\ud835\udc56 + mod(<em>score</em>, 1))</p>\n</blockquote>\n\n<p>In other words, it's 2\ud835\udc56 + 1 if <em>score</em> has a fractional part, or 2\ud835\udc56 otherwise.</p></li>\n<li><p>As \ud835\udc56 increases, the number of zeroes decreases, given by:</p>\n\n<blockquote>\n  <p>count(0) \uff1d <em>size</em> \u2212 \u2308<em>score</em>\u2309 \u2212 \ud835\udc56</p>\n</blockquote></li>\n</ol>\n\n<p>With these four facts in mind we can generate any of the \ud835\udc5b possible outputs at random by picking a random \ud835\udc56 where 0 \u2264 \ud835\udc56 &lt; \ud835\udc5b:</p>\n\n<blockquote>\n  <p>\ud835\udc56 = random( [0..\ud835\udc5b) )</p>\n</blockquote>\n\n<p>These facts are easy to translate into Ruby code:</p>\n\n<pre><code>n = [score.floor, size - score.ceil].min + 1\ni = rand(n)\nnum_ones = score.floor - i\nnum_halves = 2 * (i + score % 1)\nnum_zeroes = (size - score.floor) - i\n</code></pre>\n\n<p>Now we just need to clean it up a bit and put it in a function that takes <code>size</code> and <code>score</code> as arguments, turns <code>num_ones</code>, <code>num_halves</code>, and <code>num_zeroes</code> into an array of <code>0</code>s, <code>0.5</code>s, and <code>1</code>s, and shuffles the result:</p>\n\n<pre><code>def generate(size, score)\n  init_ones = score.floor\n  init_zeroes = size - score.ceil\n\n  i = rand([init_ones, init_zeroes].min + 1)\n  num_ones = init_ones - i\n  num_halves = 2 * (i + score % 1)\n  num_zeroes = init_zeroes - i\n\n  [ *[1]*num_ones, *[0.5]*num_halves, *[0]*num_zeroes ].shuffle\nend\n\ngenerate(6, 3.5)\n# =&gt; [0.5, 1, 0, 0.5, 0.5, 1]\n</code></pre>\n\n<p>You can see the result in action on repl.it: <a href=\"https://repl.it/@jrunning/UnpleasantDimpledLegacysystem\" rel=\"nofollow noreferrer\">https://repl.it/@jrunning/UnpleasantDimpledLegacysystem</a> (Note that when you run it on repl.it the output appears very slowly. This is only because repl.it executes Ruby code on the server and streams the result back to the browser.)</p>\n"}], "owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "accepted_answer_id": 55940719, "answer_count": 4, "score": 2, "last_activity_date": 1556829384, "creation_date": 1556714149, "last_edit_date": 1556779137, "question_id": 55936384, "link": "https://stackoverflow.com/questions/55936384/ruby-split-number-in-ones-or-halves", "title": "Ruby Split number in ones or halves", "body": "<p>I like to split up a score in an array of n positions.</p>\n\n<p>Lets say my score is 11 and the array is of size 12.\nThen I like to have some array that is filled with for example 11 ones or 10 ones and 2 halves (0.5). In the end it should sum to 11.</p>\n\n<p>Then the possible scores are:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>size = 12\npossible_scores = (0..size).step(0.5).to_a\n</code></pre>\n\n<p>I can create an array of 12 positions:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>scores = Array.new(size) {0}\n</code></pre>\n\n<p>I could pick a random value from the following possible values:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>[0, 0.5, 1].sample\n</code></pre>\n\n<p>I'm looking for an efficient way to retrieve a random array without having lots of state variables if possible. I already tried to do this in a while loop:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>while score &lt; 0\n</code></pre>\n\n<p>and reduce the value of score with the random value and keep track of the array positions that are set. But it became quite a messy piece of code.</p>\n\n<p>Any ideas how to solve this? Thanks!</p>\n\n<p>Edit:</p>\n\n<p>For this example I want an array that sums up to 11. So any one of</p>\n\n<pre><code>[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0] \n\n[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0.5, 0.5] \n\n[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1] \n</code></pre>\n\n<p>Or whatever combination that sums up to 11.</p>\n"}, {"tags": ["ruby", "hashmap", "ruby-hash", "writeonly"], "answers": [{"comments": [{"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 0, "creation_date": 1556714499, "post_id": 55936441, "comment_id": 98525434, "body": "My concern is that the hash could be updated in other ways. There are methods beyond <code>[]</code> that mutate the hash."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 1, "creation_date": 1556715085, "post_id": 55936441, "comment_id": 98525712, "body": "Maybe you could add such methods to the class, for example <code>def transform_values!; raise &#39;Immutable&#39;; end</code>"}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 2, "last_activity_date": 1556714370, "creation_date": 1556714370, "answer_id": 55936441, "question_id": 55936063, "link": "https://stackoverflow.com/questions/55936063/an-append-only-write-only-hash-in-ruby/55936441#55936441", "title": "An &quot;append-only&quot; / &quot;write-only&quot; hash in Ruby", "body": "<p>First idea, I did not considered any drawback:</p>\n\n<pre><code>class HashImmutable &lt; Hash\n  def []=(key,val)\n    if self[key].frozen?\n      super(key,val)\n    else\n      # self[key]\n      raise 'Immutable'\n    end\n  end\nend\n\nhh = HashImmutable.new\n\nhh[:france] = 'Paris'\nhh[:italy] = 'Roma'\nhh #=&gt; {:france=&gt;\"Paris\", :italy=&gt;\"Roma\"}\nhh[:italy] = 'Brescia'\n#=&gt; Immutable (RuntimeError)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 1, "last_activity_date": 1556714536, "creation_date": 1556714536, "answer_id": 55936471, "question_id": 55936063, "link": "https://stackoverflow.com/questions/55936063/an-append-only-write-only-hash-in-ruby/55936471#55936471", "title": "An &quot;append-only&quot; / &quot;write-only&quot; hash in Ruby", "body": "<p>Here is a naive attempt to create such a class. It seems to work fine for \"basic\" usage:</p>\n\n<pre><code>class AppendOnlyHash &lt; Hash\n  def []=(key, value)\n    raise \"APPEND ONLY!!\" if keys.include?(key)\n    super\n  end\nend\n</code></pre>\n\n<p>However, this certainly has some flaws.</p>\n\n<p>Firstly, what happens if you call a destructive method on the object, which tries to delete some keys? Perhaps you could override all such methods - i.e. <a href=\"https://ruby-doc.org/core/Hash.html#method-i-filter-21\" rel=\"nofollow noreferrer\"><code>filter!</code></a>, <a href=\"https://ruby-doc.org/core/Hash.html#method-i-keep_if\" rel=\"nofollow noreferrer\"><code>keep_if</code></a>, <code>delete</code>, <code>compact!</code>, <code>reject!</code>, <code>select!</code>, <code>transform_keys!</code> and <code>transform_values!</code>. (Did I miss any?...)</p>\n\n<p>Then, what to do with <code>Hash#merge!</code>? I guess that could be handled specially too; since it's valid to use <em>if</em> the no keys are being redefined.</p>\n\n<p>And lastly, how can you ensure that the \"append-only\" hash values are never <strong>mutated</strong>? Consider the following:</p>\n\n<pre><code>capitals = AppendOnlyHash.new\nstr = \"paris\"\ncapitals['france'] = str\nstr &lt;&lt; \" CHANGED\"\n</code></pre>\n\n<p>You could call <code>.freeze</code> on each value as it gets added to the hash, but even that's not 100% bulletproof - since the value may in turn be another <code>Hash</code>, which is susceptible to the same behaviour.</p>\n\n<hr>\n\n<p>So in summary, I think this is possible via my basic implementation above, but I'd be cautious of increasingly-complex edge cases caused by objected mutation in \"weird ways\".</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1556754326, "post_id": 55939185, "comment_id": 98541009, "body": "Strangely there&#39;s no rubygem for this...yet."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1556727179, "last_edit_date": 1556727179, "creation_date": 1556726876, "answer_id": 55939185, "question_id": 55936063, "link": "https://stackoverflow.com/questions/55936063/an-append-only-write-only-hash-in-ruby/55939185#55939185", "title": "An &quot;append-only&quot; / &quot;write-only&quot; hash in Ruby", "body": "<p>There are 10 methods, directly mutating the hash:</p>\n\n<pre><code>Hash.instance_methods.grep(/.+!\\z/) &lt;&lt; %i|[]= delete keep_if|\n#\u21d2 [:select!, :filter!, :reject!, :compact!, delete, keep_if,\n#   :transform_keys!, :transform_values!, :merge!, :[]=]\n</code></pre>\n\n<p>Also, there is a possibility to mutate <em>values themselves</em> (<code>capitals['france'] &lt;&lt; ' and Lyon'</code>,) so we are to prevent this as well.</p>\n\n<pre><code>class MyHash &lt; Hash; end\n\nMyHash.prepend(\n  Module.new do\n    (Hash.instance_methods.grep(/.+!\\z/) | %i|delete keep_if|).each do |method|\n      define_method(method) do |*args|\n        raise \"Method #{method} is restricted since it is mutating\"\n      end\n    end\n    def []=(key, val)\n      raise \"This hash is immutable\" if key?(key)\n      super(key, val.freeze) # to prevent inplace mutations\n    end\n  end\n)\n</code></pre>\n\n<p>One needs to derive from <code>Hash</code> because otherwise we are to break all the hashes.</p>\n\n<p>I did not test this code but it should work out of the box, (if not, the idea should be clear.)</p>\n"}], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 55939185, "answer_count": 3, "score": 4, "last_activity_date": 1556727179, "creation_date": 1556712612, "question_id": 55936063, "link": "https://stackoverflow.com/questions/55936063/an-append-only-write-only-hash-in-ruby", "title": "An &quot;append-only&quot; / &quot;write-only&quot; hash in Ruby", "body": "<p>I'm looking for a kind of \"append-only\" hash where keys may only be set once.</p>\n\n<p>For example:</p>\n\n<pre><code>capitals = AppendOnlyHash.new\ncapitals['france'] = 'paris'\ncapitals['japan'] = 'tokyo'\ncapitals['france'] = 'nice' # raises immutable exception\n</code></pre>\n\n<p>Any library recommendations or ideas how to achieve this?</p>\n\n<p>(Use case is a logging type object which will be passed to numerouis loosely connected classes, and wanting to detect if any use the same key.)</p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 0, "creation_date": 1556712175, "post_id": 55935954, "comment_id": 98524431, "body": "You can use <code>^#.*</code> which will only select lines that start with <code>#</code> and <code>.*</code> will select remaining characters in your line. Also, what language you are using?"}, {"owner": {"reputation": 43256, "user_id": 36866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae5de8fa45f79815c64b98690088a48d?s=128&d=identicon&r=PG", "display_name": "some", "link": "https://stackoverflow.com/users/36866/some"}, "edited": false, "score": 0, "creation_date": 1556712343, "post_id": 55935954, "comment_id": 98524494, "body": "<code>&#47;^#.+$&#47;gm</code> (m is a flag for multiline)"}, {"owner": {"reputation": 43256, "user_id": 36866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae5de8fa45f79815c64b98690088a48d?s=128&d=identicon&r=PG", "display_name": "some", "link": "https://stackoverflow.com/users/36866/some"}, "edited": false, "score": 0, "creation_date": 1556712998, "post_id": 55935954, "comment_id": 98524756, "body": "You have not mentioned what programming language you are using. <code>^#.+$</code> is the regex, and then you need to set the m flag for multline. And if you want to find more than one you need to set the g flag for global."}, {"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 0, "creation_date": 1556713123, "post_id": 55935954, "comment_id": 98524810, "body": "@thezeroandone: Sure it is easy. You can use this regex <code>^\\h*#.*</code> <a href=\"https://regex101.com/r/6EshBS/1/\" rel=\"nofollow noreferrer\">Demo</a> And make sure to enable multiline mode by appending <code>(?m)</code> before the regex or enable the flag. Here <code>\\h*</code> will optionally match all horizontal whitespaces (tabs and spaces) before <code>#</code>"}, {"owner": {"reputation": 43256, "user_id": 36866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae5de8fa45f79815c64b98690088a48d?s=128&d=identicon&r=PG", "display_name": "some", "link": "https://stackoverflow.com/users/36866/some"}, "edited": false, "score": 0, "creation_date": 1556713140, "post_id": 55935954, "comment_id": 98524819, "body": "If you want to allow white space before #: <code>^\\s*#.+$</code>"}, {"owner": {"reputation": 43256, "user_id": 36866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae5de8fa45f79815c64b98690088a48d?s=128&d=identicon&r=PG", "display_name": "some", "link": "https://stackoverflow.com/users/36866/some"}, "edited": false, "score": 0, "creation_date": 1556713400, "post_id": 55935954, "comment_id": 98524946, "body": "Where are you using this? (are you using it inside an editor, and if so what editor?)"}, {"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 0, "creation_date": 1556713534, "post_id": 55935954, "comment_id": 98525002, "body": "@thezeroandone: Don&#39;t use <code>\\s*</code> before <code>#</code> else it will also match newline. Instead either use <code>\\h*</code> if supported else use <code>[ \\t]*</code> instead of <code>\\s*</code>"}, {"owner": {"reputation": 43256, "user_id": 36866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae5de8fa45f79815c64b98690088a48d?s=128&d=identicon&r=PG", "display_name": "some", "link": "https://stackoverflow.com/users/36866/some"}, "reply_to_user": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 1, "creation_date": 1556713694, "post_id": 55935954, "comment_id": 98525065, "body": "@PushpeshKumarRajwanshi You are right, \\s* was a bad choice. <code>^[ \\t]*#.+$</code>"}], "answers": [{"comments": [{"owner": {"reputation": 43256, "user_id": 36866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae5de8fa45f79815c64b98690088a48d?s=128&d=identicon&r=PG", "display_name": "some", "link": "https://stackoverflow.com/users/36866/some"}, "reply_to_user": {"reputation": 21, "user_id": 11405684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91add27db4f840b14332e5a2388510bc?s=128&d=identicon&r=PG&f=1", "display_name": "username653ue6", "link": "https://stackoverflow.com/users/11405684/username653ue6"}, "edited": false, "score": 0, "creation_date": 1556714038, "post_id": 55936298, "comment_id": 98525231, "body": "<code>\\h</code> is not supported by all flavors of regex. It means <i>horizontal whitespace</i>"}], "tags": [], "owner": {"reputation": 43256, "user_id": 36866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae5de8fa45f79815c64b98690088a48d?s=128&d=identicon&r=PG", "display_name": "some", "link": "https://stackoverflow.com/users/36866/some"}, "is_accepted": true, "score": 1, "last_activity_date": 1556713890, "last_edit_date": 1556713890, "creation_date": 1556713739, "answer_id": 55936298, "question_id": 55935954, "link": "https://stackoverflow.com/questions/55935954/how-to-select-all-comments-in-a-ruby-file-with-a-regular-expression-in-the-atom/55936298#55936298", "title": "How to select all comments in a Ruby file with a Regular Expression in the Atom text editor?", "body": "<p>Looks like you want <code>^[ \\t]*#.+$</code></p>\n\n<pre><code>^        Start of string\n[ \\t]*   Any number of space or tabs\n#        The # character\n.+       At least one more character\n$        end of line\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11405684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91add27db4f840b14332e5a2388510bc?s=128&d=identicon&r=PG&f=1", "display_name": "username653ue6", "link": "https://stackoverflow.com/users/11405684/username653ue6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 55936298, "answer_count": 1, "score": -3, "last_activity_date": 1559677216, "creation_date": 1556712092, "last_edit_date": 1559677216, "question_id": 55935954, "link": "https://stackoverflow.com/questions/55935954/how-to-select-all-comments-in-a-ruby-file-with-a-regular-expression-in-the-atom", "title": "How to select all comments in a Ruby file with a Regular Expression in the Atom text editor?", "body": "<p>What is a regular expression that can be used in the Atom text editor to select only the comments?</p>\n\n<pre><code>puts \"Hello, world!\"\n# The puts command displays the character string in the output screen.\nputs \"Goodbye, world!\n</code></pre>\n"}, {"tags": ["ruby", "google-cloud-platform"], "answers": [{"tags": [], "owner": {"reputation": 17, "user_id": 7185629, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-krfdLzWKlA8/AAAAAAAAAAI/AAAAAAAAC7w/TAh62NkPWCg/photo.jpg?sz=128", "display_name": "Compeador", "link": "https://stackoverflow.com/users/7185629/compeador"}, "is_accepted": false, "score": 0, "last_activity_date": 1556720960, "creation_date": 1556720960, "answer_id": 55937847, "question_id": 55935622, "link": "https://stackoverflow.com/questions/55935622/ruby-tcpserver-not-listening-to-port-on-google-cloud-platform/55937847#55937847", "title": "Ruby TCPServer not listening to port on Google Cloud Platform", "body": "<p>OK I figured it out, it may sound stupid...I was using Active Cloud Shell inside the GCP webpage and connected to my project, which seems is a temporary environment. Later I connect to the instance via SSH in the \"VM instance\" panel, get the code in OP running and everything goes fine.</p>\n"}], "owner": {"reputation": 17, "user_id": 7185629, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-krfdLzWKlA8/AAAAAAAAAAI/AAAAAAAAC7w/TAh62NkPWCg/photo.jpg?sz=128", "display_name": "Compeador", "link": "https://stackoverflow.com/users/7185629/compeador"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556720960, "creation_date": 1556710489, "question_id": 55935622, "link": "https://stackoverflow.com/questions/55935622/ruby-tcpserver-not-listening-to-port-on-google-cloud-platform", "title": "Ruby TCPServer not listening to port on Google Cloud Platform", "body": "<p>I got a school assignment that asks us to practice some socket programming, so my plan is running my backend on the VM provided by Google Cloud Platform and sending some message from my local computer to it. \nBut when I running the client-side code it says connection refused. Later checked with <code>netstat -a</code> on the cloud shell and it says my program is not even listening (while it's running in background).</p>\n\n<p>Could anyone help me get this working?</p>\n\n<p><a href=\"https://i.stack.imgur.com/9RHTD.png\" rel=\"nofollow noreferrer\">My Google Cloud Platform Firewall rules here</a></p>\n\n<p>Server-side code:</p>\n\n<pre><code>require 'socket'\n\nmodule WebsocketTest\n  module_function\n\n  def init\n    @server = TCPServer.new('0.0.0.0', 8080)\n    @running = false\n  end\n\n  def run\n    STDERR.puts 'Server is running'\n    @running = true\n\n    while @running\n      socket = @server.accept\n      STDERR.puts 'Incoming Request'\n      http_request = ''\n      while (line = socket.gets) &amp;&amp; (line != \"\\r\\n\")\n        http_request += line\n      end\n      STDERR.puts http_request\n      socket.close\n    end\n  end\nend\n\nWebsocketTest.init\nWebsocketTest.run \n</code></pre>\n\n<p>Client-side code:</p>\n\n<pre><code>require 'socket'\n\ns = TCPSocket.new('External IP of the VM', 8080)\ns.send('Hello World!', 0)\ns.close\n</code></pre>\n\n<p>Error message:</p>\n\n<pre><code>client.rb:3:in `initialize': No connection could be made because the target machine actively refused it. - connect(2) for \"xxx.xxx.xxx.xxx\" port 8080 (Errno::ECONNREFUSED)\n</code></pre>\n"}, {"tags": ["ruby", "hanami", "hanami-router"], "answers": [{"comments": [{"owner": {"reputation": 1146, "user_id": 498386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76aa5b311fb40fdc2bb70c0282d66af3?s=128&d=identicon&r=PG", "display_name": "Luca Guidi", "link": "https://stackoverflow.com/users/498386/luca-guidi"}, "edited": false, "score": 0, "creation_date": 1556915508, "post_id": 55935328, "comment_id": 98604045, "body": "You did a great job! Yours is a perfect example of asking the community, read the docs, gets the hands dirty, implement a great solution, and share back with the community. \ud83d\udc4f\ud83d\udc4f\ud83d\udc4f"}, {"owner": {"reputation": 2367, "user_id": 85076, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/6slRi.jpg?s=128&g=1", "display_name": "Pierre-Adrien", "link": "https://stackoverflow.com/users/85076/pierre-adrien"}, "reply_to_user": {"reputation": 1146, "user_id": 498386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76aa5b311fb40fdc2bb70c0282d66af3?s=128&d=identicon&r=PG", "display_name": "Luca Guidi", "link": "https://stackoverflow.com/users/498386/luca-guidi"}, "edited": false, "score": 1, "creation_date": 1557230489, "post_id": 55935328, "comment_id": 98688000, "body": "Thanks @LucaGuidi. Hope it can help the community. Maybe it could even be an opportunity for a PR or an hanami extension. I&#39;m not familiar enough with the framework, the codebase and all but that&#39;s an idea."}], "tags": [], "owner": {"reputation": 2367, "user_id": 85076, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/6slRi.jpg?s=128&g=1", "display_name": "Pierre-Adrien", "link": "https://stackoverflow.com/users/85076/pierre-adrien"}, "is_accepted": true, "score": 5, "last_activity_date": 1556709075, "creation_date": 1556709075, "answer_id": 55935328, "question_id": 55934778, "link": "https://stackoverflow.com/questions/55934778/hanami-access-current-page-url-from-views-or-templates/55935328#55935328", "title": "Hanami : access current page URL from views or templates", "body": "<p>Here's what I ended up doing, for the moment. I followed <a href=\"https://guides.hanamirb.org/helpers/custom-helpers/\" rel=\"noreferrer\">hanami documentation</a> defined a custom helper and made it available to all of my views, like this:</p>\n\n<p><strong>1. Create a <code>Web::Helpers::PathHelper</code> module</strong></p>\n\n<p>There I can access the params and request path:</p>\n\n<pre><code># apps/web/helpers/path_helper.rb\nmodule Web\n  module Helpers\n    module PathHelper\n      private\n\n      def current_path\n        params.env['REQUEST_PATH']\n      end\n\n      def current_page?(path)\n        current_path == path\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong>2. Make sure the helpers directory is loaded by the app</strong></p>\n\n<p>Added the <code>helpers</code> path to the application <code>load_paths</code> variable, so that my helpers get loaded when the app loads the code.</p>\n\n<pre><code>  # apps/web/application.rb\n  # Relative load paths where this application will recursively load the\n  # code.\n  #\n  # When you add new directories, remember to add them here.\n  #\n  load_paths &lt;&lt; [\n    'helpers',\n    'controllers',\n    'views'\n  ]\n</code></pre>\n\n<p><strong>3. Make sure my new helper is available for each view</strong></p>\n\n<p>..by using the <code>view.prepare</code> block in <code>application.rb</code>:</p>\n\n<pre><code>  # apps/web/application.rb\n  # Configure the code that will yield each time Web::View is included\n  # This is useful for sharing common functionality\n  #\n  # See: http://www.rubydoc.info/gems/hanami-view#Configuration\n  view.prepare do\n    include Hanami::Helpers\n    include Web::Assets::Helpers\n    include Web::Helpers::PathHelper\n  end\n</code></pre>\n\n<p><strong>4. And now I can use my helpers in every view!</strong></p>\n\n<p>And now, from my template or my view objects, I can access my own <code>current_path</code> and <code>current_page?(path)</code> helpers, and do what I need to do with them. I don't know if that's the most straightforward way but at least it's working.</p>\n"}], "owner": {"reputation": 2367, "user_id": 85076, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/6slRi.jpg?s=128&g=1", "display_name": "Pierre-Adrien", "link": "https://stackoverflow.com/users/85076/pierre-adrien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 55935328, "answer_count": 1, "score": 2, "last_activity_date": 1556709075, "creation_date": 1556706207, "question_id": 55934778, "link": "https://stackoverflow.com/questions/55934778/hanami-access-current-page-url-from-views-or-templates", "title": "Hanami : access current page URL from views or templates", "body": "<p>I'm discovering Hanami those days (Hanami 1.3), I'm polishing the test project I've worked on, and I can't find a way to <strong>access the current page url/path from a view or a template</strong> (the idea is handling the navigation links visual state, as you may have guessed).</p>\n\n<p>I've tried to guess helper names (<code>routes.current_page</code>, <code>routes.current_url</code>, <code>routes.current</code>...) but I've not been lucky. I've checked the <a href=\"https://guides.hanamirb.org/helpers/routing/\" rel=\"nofollow noreferrer\">routing helpers documentation</a>, got through the <a href=\"https://github.com/hanami/hanami\" rel=\"nofollow noreferrer\">hanami/hanami</a> and <a href=\"https://github.com/hanami/router\" rel=\"nofollow noreferrer\">hanami/router</a> repositories but didn't find what I was looking for. </p>\n\n<p>Did I miss something or is this simply not built-in? </p>\n"}, {"tags": ["ruby", "pry"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1556704342, "post_id": 55934140, "comment_id": 98521490, "body": "At a guess (!), I think this may be achievable by creating a <a href=\"https://github.com/pry/pry/wiki/Custom-commands\" rel=\"nofollow noreferrer\">custom command</a>."}, {"owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 1, "creation_date": 1556737845, "post_id": 55934140, "comment_id": 98536032, "body": "Put binding.pry for every debugging point. Ctrl plus D to proceed with the next debugging point."}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1556743416, "post_id": 55934140, "comment_id": 98538158, "body": "This is not what I&#39;m looking for, but thanks."}], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1556864458, "creation_date": 1556702786, "last_edit_date": 1556864458, "question_id": 55934140, "link": "https://stackoverflow.com/questions/55934140/how-to-call-a-method-and-immediately-step-into-it", "title": "How to call a method and immediately step into it", "body": "<p>When, during a pry debug session, I want to inspect step-by-step execution of <code>FooClass.new.foo</code> I'd do this in pry console</p>\n\n<pre><code>$ FooClass.new.foo #this gives me path and line of the method\nbreak /path/to/foo_class.rb:LINE_WHERE_FOO_IS_DEFINED\nFooClass.new.foo\n</code></pre>\n\n<p>This works but I need to look for the path, line and it leaves a breakpoint I sometimes have to remove. </p>\n\n<p>There's a faster way: </p>\n\n<pre><code>break FooClass#foo\nFooClass.new.foo\n</code></pre>\n\n<p>but it's still two steps, and the breakpoint stays.</p>\n\n<p>Is there a way to do it in one command, like</p>\n\n<pre><code>step-into FooClass.new.foo\n</code></pre>\n\n<p>which would start a Pry subsession, enter the method execution and after it exits/finishes I'm back in the original session with no extra breakpoints left?</p>\n\n<p>In other words: I'm in the middle of debugging, and see a method called few lines before (I can't step into it immediately). I don't want to put a <code>binding.pry</code> in the source (it may take a lot of time to start the debugging session again). </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "metaprogramming", "rubymine"], "answers": [{"tags": [], "owner": {"reputation": 1311, "user_id": 4676887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI0oc.jpg?s=128&g=1", "display_name": "Olivia", "link": "https://stackoverflow.com/users/4676887/olivia"}, "is_accepted": false, "score": 0, "last_activity_date": 1556785837, "creation_date": 1556785837, "answer_id": 55948470, "question_id": 55933955, "link": "https://stackoverflow.com/questions/55933955/how-to-automatically-generate-stub-for-method-generated-by-meta-programming/55948470#55948470", "title": "How to automatically generate stub for method generated by meta programming", "body": "<p>It can be done using YARD <code>@!macro</code> but unfortunately that one isn't supported yet in RubyMine, there's a corresponding request: <a href=\"https://youtrack.jetbrains.com/issue/RUBY-20130\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/RUBY-20130</a></p>\n"}], "owner": {"reputation": 2366, "user_id": 1644614, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/2NKuT.jpg?s=128&g=1", "display_name": "vaibhavatul47", "link": "https://stackoverflow.com/users/1644614/vaibhavatul47"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556787411, "creation_date": 1556701788, "last_edit_date": 1556787411, "question_id": 55933955, "link": "https://stackoverflow.com/questions/55933955/how-to-automatically-generate-stub-for-method-generated-by-meta-programming", "title": "How to automatically generate stub for method generated by meta programming", "body": "<p>One of utility class in my codebase generates class methods dynamically using meta programming.</p>\n\n<p>My problem: </p>\n\n<ol>\n<li>Currently, Rubymine is not able to suggest such methods and\ncomplains that it cannot find <code>FeatureFlagHandler.foo_enabled?</code>\nmethod.</li>\n<li>How can I let Rubymine learn about these dynamic methods? I\nwant Rubymine to suggest such methods for code completion so that\nwhen I type <code>FeatureFlagHandler.fo</code> it should be able to suggest\n<code>FeatureFlagHandler.foo_enabled?</code> method.</li>\n</ol>\n\n<p><br>\nSource Code of class:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class FeatureFlagHandler\n  class &lt;&lt; self\n    # Generates `_enabled?` and `_disabled?` helper methods for feature flags\n    # for all Constants defined in AppUtils::FeatureFlags\n    # \n    #      module AppUtils\n    #        module FeatureFlags\n    #          FOO = \"FOO\"\n    #          BAR = \"BAR\"\n    #        end\n    #      end\n    #\n    # e.g. If AppUtils::FeatureFlags contains FOO and BAR constant, then\n    #      below code will generate following method definitions:\n    #\n    #      def self.foo_enabled?\n    #        enabled?(\"FOO\")\n    #      end\n    #      def self.bar_enabled?\n    #        enabled?(\"BAR\")\n    #      end\n    #\n    # Then above methods can be used as:\n    #\n    # do_something if FeatureFlagHandler.foo_enabled?\n    #\n    AppUtils::FeatureFlags.constants.each do |flag|\n      define_method(\"#{flag.to_s.downcase}_enabled?\") do\n        # Logic to check if `feature_flag` is ON or OFF\n        # For eg:\n        ENV[feature_flag] == \"ENABLE\"\n      end\n    end\n  end\nend\n\n</code></pre>\n\n<p>Note: Feature-flags are regularly added/removed from above <code>AppUtils::FeatureFlags</code> module</p>\n"}, {"tags": ["arrays", "ruby", "destructuring"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1556727249, "post_id": 55933913, "comment_id": 98531551, "body": "AFAIK <code>|(x,y),i|</code> is referred to as &quot;destructuring&quot; in Ruby, I don&#39;t have an official source or history of the terminology but that&#39;s what I&#39;ve always called it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1556758515, "post_id": 55933913, "comment_id": 98541696, "body": "In the official documentation it&#39;s called <a href=\"https://docs.ruby-lang.org/en/2.1.0/syntax/assignment_rdoc.html#label-Array+Decomposition\" rel=\"nofollow noreferrer\">Array decomposition</a>."}], "owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556701936, "creation_date": 1556701586, "last_edit_date": 1556701936, "question_id": 55933913, "link": "https://stackoverflow.com/questions/55933913/official-name-js-array-descructuring-analog-in-ruby", "title": "Official name &#39;JS Array descructuring&#39; analog in Ruby", "body": "<p>In my daily practice I constantly use parentheses to structure variables in blocks:</p>\n\n<pre><code>[[?a,?b],[?c,?d]].each_with_index{|(x,y),i| p [x,y,i] } # ['a','b',0] ...\n</code></pre>\n\n<p>This kind of structuring variables works in methods too. Some times I use it like this:</p>\n\n<pre><code>def coords ((x,y))\np [x,y]\nend\ncoords([1,2]) # [1,2]\n</code></pre>\n\n<p>but I do not know how to call this technique correctly. It's something similar to <a href=\"http://ruby-doc.org/core-2.0.0/doc/syntax/calling_methods_rdoc.html#label-Array+to+Arguments+Conversion\" rel=\"nofollow noreferrer\">Array to Arguments conversion</a> but not the same. <strong>How to call technique above?</strong> </p>\n\n<pre><code># Array to Arguments converstion\ndef my_method(argument1, argument2, argument3)\nend\narguments = [1, 2, 3]\nmy_method(*arguments)\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1556689948, "post_id": 55932120, "comment_id": 98517261, "body": "Please post an error in plain text."}], "answers": [{"tags": [], "owner": {"reputation": 2019, "user_id": 9595653, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jNAfm9c6bRo/AAAAAAAAAAI/AAAAAAAAABA/2JGGWk6fJl8/photo.jpg?sz=128", "display_name": "Clara", "link": "https://stackoverflow.com/users/9595653/clara"}, "is_accepted": false, "score": 0, "last_activity_date": 1556690167, "creation_date": 1556690167, "answer_id": 55932193, "question_id": 55932120, "link": "https://stackoverflow.com/questions/55932120/add-erb-tag-to-link-to-class-in-rails/55932193#55932193", "title": "add erb tag to link_to class in rails", "body": "<p>If you want to wrap your link around an icon, use the following syntax:</p>\n\n<pre><code>&lt;%= link_to ..._path(...) do %&gt;\n  &lt;i class=\"fa fa-spin fa spinner\"&gt;&lt;/i&gt;\n&lt;% end %&gt; \n</code></pre>\n\n<p>You have to append a <code>do</code> onto the link to and then close the block with an <code>end</code>. And just put whatever inbetween (icon or image or div).</p>\n"}, {"comments": [{"owner": {"reputation": 378, "user_id": 4267804, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7e1036d3e728f3bb865307cf6eaf92b8?s=128&d=identicon&r=PG", "display_name": "Priince Abalogu", "link": "https://stackoverflow.com/users/4267804/priince-abalogu"}, "edited": false, "score": 0, "creation_date": 1556690859, "post_id": 55932218, "comment_id": 98517430, "body": "awesome thanks.. i tried this but was using single quotes instead of double"}], "tags": [], "owner": {"reputation": 287, "user_id": 5027985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-seq7928FW9Q/AAAAAAAAAAI/AAAAAAAAAA8/TFq-VWixKiI/photo.jpg?sz=128", "display_name": "Pradeep Agrawal", "link": "https://stackoverflow.com/users/5027985/pradeep-agrawal"}, "is_accepted": true, "score": 1, "last_activity_date": 1556691123, "last_edit_date": 1556691123, "creation_date": 1556690365, "answer_id": 55932218, "question_id": 55932120, "link": "https://stackoverflow.com/questions/55932120/add-erb-tag-to-link-to-class-in-rails/55932218#55932218", "title": "add erb tag to link_to class in rails", "body": "<p>As I noticed there are some issues in your code. Please find below the code snippet example I wrote similar to your case which will help you to fix your issue</p>\n\n<pre><code>&lt;% User.all.each_with_index do |m, index| %&gt;\n  &lt;%= link_to users_path, class: \"btn_download#{index}\" do %&gt;\n    &lt;span class=\"fa fa-sign-out\"&gt;&lt;/span&gt;\n      Download\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>So instead of using <code>'btn_download &lt;%= index %&gt;'</code> try <code>\"btn_download#{index}\"</code>.</p>\n\n<p>Also, Use double quotes</p>\n\n<p><code>class: \"btn btn-primary btn-sm download_btn#{index}\"</code></p>\n\n<p>instead</p>\n\n<p><code>class: 'btn btn-primary btn-sm download_btn#{index}'</code></p>\n\n<p>Please let me know if you have any confusion in this.</p>\n"}], "owner": {"reputation": 378, "user_id": 4267804, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7e1036d3e728f3bb865307cf6eaf92b8?s=128&d=identicon&r=PG", "display_name": "Priince Abalogu", "link": "https://stackoverflow.com/users/4267804/priince-abalogu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 55932218, "answer_count": 2, "score": 0, "last_activity_date": 1556691123, "creation_date": 1556689558, "last_edit_date": 1556690643, "question_id": 55932120, "link": "https://stackoverflow.com/questions/55932120/add-erb-tag-to-link-to-class-in-rails", "title": "add erb tag to link_to class in rails", "body": "<p>I have a link class like </p>\n\n<pre><code>link_to( class: 'btn_download&lt;%= index %&gt;')\n</code></pre>\n\n<p>from a .each_with_index model call</p>\n\n<pre><code>Model.each_with_index do |m, index|\n</code></pre>\n\n<p>but it throws an error\n<a href=\"https://i.stack.imgur.com/xjSxn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xjSxn.png\" alt=\"enter image description here\"></a></p>\n\n<p>and when i try with #{index} it just adds #{index} to the class name instead of dynamically adding 'index'</p>\n\n<p><a href=\"https://i.stack.imgur.com/0rg4M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0rg4M.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ransack"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1556689911, "post_id": 55931700, "comment_id": 98517252, "body": "I have no idea about <code>Ransack</code>, but would not old good <code>order(&#39;COUNT(DISTINCT promises.id)&#39; =&gt; desc)</code> or <code>order(promises_count: desc)</code> work?"}, {"owner": {"reputation": 4679, "user_id": 337085, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/2daee1581901ea06dbb80d2c04c1a182?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Pushkin", "link": "https://stackoverflow.com/users/337085/roman-pushkin"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1556718168, "post_id": 55931700, "comment_id": 98527046, "body": "@AlekseiMatiushkin well, sort string is provided from client, I believe Ransack sanitize these params somehow. It&#39;s good and bad :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1556721380, "post_id": 55931700, "comment_id": 98528624, "body": "I am not sure I follow. I am pretty sure query is about <code>WHERE</code> and has nothing to do with the ordering."}, {"owner": {"reputation": 4679, "user_id": 337085, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/2daee1581901ea06dbb80d2c04c1a182?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Pushkin", "link": "https://stackoverflow.com/users/337085/roman-pushkin"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1556740262, "post_id": 55931700, "comment_id": 98537003, "body": "@AlekseiMatiushkin yes. Ransack is type of tool that adds functionality at the top of your activerecord chain. So it adds some ordering, when it&#39;s provided by client. In the case above ordering works, but only for fields other than <code>promises_count</code>. You don&#39;t see any ORDER BY statements, but if you change ordering to <code>created_at</code> from the client, query will be generated with ORDER BY. Exception is only for <code>promises_count</code>."}], "owner": {"reputation": 4679, "user_id": 337085, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/2daee1581901ea06dbb80d2c04c1a182?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Pushkin", "link": "https://stackoverflow.com/users/337085/roman-pushkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556689706, "creation_date": 1556685788, "last_edit_date": 1556689706, "question_id": 55931700, "link": "https://stackoverflow.com/questions/55931700/sql-is-incomplete-while-searching-with-ransack", "title": "SQL is incomplete while searching with ransack", "body": "<p>I have the following relationship in Rails: Campaign -has-many- Promise(s)</p>\n\n<p>And I have the following Ruby code to return verbose list of campaigns with promises count:</p>\n\n<pre><code>def campaigns\n  results = Campaign\n    .where(user_id: current_user.id)\n    .left_outer_joins(:promises)\n    .select('campaigns.*', 'COUNT(DISTINCT promises.id) AS promises_count')\n    .group('campaigns.id')\n    .ransack(params[:q])\n    .result(distinct: true)\n\n  render json: {\n    results: results.page(params[:page]).per(params[:per_page]),\n    total_results: results.count(:id)\n  }\nend\n</code></pre>\n\n<p>Everything works fine, unless I try to sort by <code>promises_count</code>. Ransack (or something else?) generates the following SQL for Postgres:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT DISTINCT\n  campaigns.*,\n  COUNT(DISTINCT promises.id) AS promises_count\nFROM \"campaigns\"\n  LEFT OUTER JOIN \"promises\"\n    ON \"promises\".\"campaign_id\" = \"campaigns\".\"id\"\n  LEFT OUTER JOIN \"promises\" \"promises_campaigns\"\n    ON \"promises_campaigns\".\"campaign_id\" = \"campaigns\".\"id\"\nWHERE \"campaigns\".\"user_id\" = 1 GROUP BY campaigns.id;\n</code></pre>\n\n<p>It works, but there is no <code>ORDER BY</code> for some reason. When I sort by other properties, it works fine. I think Ransack is missing something, and handles <code>promises_count</code> different way because it's generated property and not real one.</p>\n\n<p>It's possible to sort in Postgres, for example, manual query with added <code>ORDER BY</code> works:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT DISTINCT\n  campaigns.*,\n  COUNT(DISTINCT promises.id) AS promises_count\nFROM \"campaigns\"\n  LEFT OUTER JOIN \"promises\"\n    ON \"promises\".\"campaign_id\" = \"campaigns\".\"id\"\n  LEFT OUTER JOIN \"promises\" \"promises_campaigns\"\n    ON \"promises_campaigns\".\"campaign_id\" = \"campaigns\".\"id\"\nWHERE \"campaigns\".\"user_id\" = 1\nGROUP BY campaigns.id\nORDER BY promises_count desc;\n</code></pre>\n\n<p>How do I make Ransack work? I tried different combinations of queries without too much luck.</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "class"], "comments": [{"owner": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "edited": false, "score": 0, "creation_date": 1556688385, "post_id": 55931690, "comment_id": 98516924, "body": "where are you writing this <code>css</code> code. I mean in which file?"}, {"owner": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "reply_to_user": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "edited": false, "score": 0, "creation_date": 1556688426, "post_id": 55931690, "comment_id": 98516932, "body": "It&#39;s within the stylesheet folder. Do you want the name or?"}, {"owner": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "edited": false, "score": 0, "creation_date": 1556688961, "post_id": 55931690, "comment_id": 98517051, "body": "try to put <code>display: none</code> inside <code>.lego-man {</code>, and let&#39;s see if these css working or not"}, {"owner": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "reply_to_user": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "edited": false, "score": 0, "creation_date": 1556689326, "post_id": 55931690, "comment_id": 98517126, "body": "Sorry, this is my 2nd stylesheet. I&#39;ve got 2 stylesheets in my folder. Would that change anything? Surely you&#39;re allowed multiple sheets"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "edited": false, "score": 0, "creation_date": 1556686923, "post_id": 55931754, "comment_id": 98516627, "body": "hard coding it like that worked(thank you!), but just wondering why the classes didn&#39;t work? Just trying to learn, so I can avoid it in the future"}, {"owner": {"reputation": 79, "user_id": 8134946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/004edcf259051de8ae971163a8064750?s=128&d=identicon&r=PG&f=1", "display_name": "anjali khant", "link": "https://stackoverflow.com/users/8134946/anjali-khant"}, "reply_to_user": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "edited": false, "score": 0, "creation_date": 1556687303, "post_id": 55931754, "comment_id": 98516707, "body": "For your previous code ,try like this once By adding parathesis                                      .       &lt;%= image_tag (@user.profile.avatar.url), class: &#39;lego-man&#39; %&gt;"}, {"owner": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "edited": false, "score": 0, "creation_date": 1556687658, "post_id": 55931754, "comment_id": 98516786, "body": "No, that just gave an error message. Not expecting &#39;,&#39;. I removed that, but then it said unexpected tLABEL, expecting &#39;)&#39; , but my code is already closed off. &lt;%= image_tag(@user.profile.avatar.url) class: &#39;lego-man&#39; %&gt;"}, {"owner": {"reputation": 79, "user_id": 8134946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/004edcf259051de8ae971163a8064750?s=128&d=identicon&r=PG&f=1", "display_name": "anjali khant", "link": "https://stackoverflow.com/users/8134946/anjali-khant"}, "reply_to_user": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "edited": false, "score": 0, "creation_date": 1556688157, "post_id": 55931754, "comment_id": 98516882, "body": "I hope I am not wasting your time. but  if  you  have  time can you try this  &lt;%= image_tag(@user.profile.avatar.url, class: &#39;lego-man&#39;) %&gt;"}, {"owner": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "edited": false, "score": 0, "creation_date": 1556688491, "post_id": 55931754, "comment_id": 98516943, "body": "Not at all! I appreciate the help! This error is driving me crazy."}], "tags": [], "owner": {"reputation": 79, "user_id": 8134946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/004edcf259051de8ae971163a8064750?s=128&d=identicon&r=PG&f=1", "display_name": "anjali khant", "link": "https://stackoverflow.com/users/8134946/anjali-khant"}, "is_accepted": false, "score": 1, "last_activity_date": 1556686276, "creation_date": 1556686276, "answer_id": 55931754, "question_id": 55931690, "link": "https://stackoverflow.com/questions/55931690/css-not-recognising-class/55931754#55931754", "title": "CSS not recognising class", "body": "<p>can you try like this</p>\n\n<pre><code> &lt;%= image_tag @user.profile.avatar.url , size: \"128x128\" %&gt;\n</code></pre>\n\n<p>For reference</p>\n\n<p>Click here:- <a href=\"https://apidock.com/rails/ActionView/Helpers/AssetTagHelper/image_tag\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActionView/Helpers/AssetTagHelper/image_tag</a></p>\n"}, {"tags": [], "owner": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "is_accepted": false, "score": 0, "last_activity_date": 1556697635, "last_edit_date": 1556697635, "creation_date": 1556688609, "answer_id": 55931997, "question_id": 55931690, "link": "https://stackoverflow.com/questions/55931690/css-not-recognising-class/55931997#55931997", "title": "CSS not recognising class", "body": "<p>Just make sure the <code>CSS</code> code you are writing is properly loading.</p>\n\n<blockquote>\n  <p>e.g. in your <code>layouts/application.html.erb</code> contains this type of line\n  to load <code>application.css</code></p>\n\n<pre><code>&lt;%= stylesheet_link_tag 'application', media: 'all' %&gt;\n</code></pre>\n  \n  <p>And that <code>css</code> containing file is included in <code>application.css</code></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7344251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lvHuZ.jpg?s=128&g=1", "display_name": "Ayush Kanoongo", "link": "https://stackoverflow.com/users/7344251/ayush-kanoongo"}, "is_accepted": false, "score": 0, "last_activity_date": 1556690520, "creation_date": 1556690520, "answer_id": 55932243, "question_id": 55931690, "link": "https://stackoverflow.com/questions/55931690/css-not-recognising-class/55932243#55932243", "title": "CSS not recognising class", "body": "<p>In rails, three methods are available to add your css styles.</p>\n\n<ol>\n<li><p>Add this style property Inline in image_tag</p>\n\n<pre><code>&lt;%= image_tag @user.profile.avatar.url, :style =&gt; \"width: 128px; height: 128px;\" %&gt;\n</code></pre></li>\n<li><p>Add this style property internally in same file using <code>&lt;style&gt;</code> tags</p>\n\n<pre><code>&lt;style&gt;\n  .lego-man {\n    width: 128px;\n    height: 128px;\n  }\n&lt;/style&gt;\n</code></pre></li>\n<li><p>Add this css property externally in <strong>app/assets/stylesheets/application.css</strong></p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "is_accepted": false, "score": 0, "last_activity_date": 1556700297, "last_edit_date": 1556700297, "creation_date": 1556699803, "answer_id": 55933611, "question_id": 55931690, "link": "https://stackoverflow.com/questions/55931690/css-not-recognising-class/55933611#55933611", "title": "CSS not recognising class", "body": "<pre><code>.lego-man {\n  width: 128px!important;\n  height: 128px!important;\n}\n</code></pre>\n\n<p>try using over ride your class.</p>\n\n<pre><code>&lt;div class: 'lego-man'&gt;\n  &lt;%= image_tag @user.profile.avatar.url %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and then add\n<code>&lt;%= stylesheet_link_tag 'application', media: 'all' %&gt;</code> to application layout</p>\n"}], "owner": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1556700297, "creation_date": 1556685730, "question_id": 55931690, "link": "https://stackoverflow.com/questions/55931690/css-not-recognising-class", "title": "CSS not recognising class", "body": "<p>Trying to adjust the height &amp; width of an image, but the CSS isn't recognising the class/isn't working.\nI know my class method is different to my other classes, but when I try and make it the same, it gives a error message.\nI'm using the Ruby language. It's probably going to be something simple, but I'm too new at this to understand.\nAlso having a problem with Twitter bootstrap rows. I'll be forever grateful if you can see anything wrong with that too.</p>\n\n<p>HTML is:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-3\"&gt;\n      &lt;%= image_tag @user.profile.avatar.url, class: 'lego-man' %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-6\"&gt;\n      &lt;h1&gt;&lt;%= @user.profile.first_name %&gt; &lt;%= @user.profile.last_name %&gt;&lt;/h1&gt;\n      &lt;h3&gt;&lt;%= @user.profile.job_title %&gt;&lt;/h3&gt;\n      &lt;div class=\"well\"&gt;\n        &lt;h3&gt;Decription&lt;/h3&gt;\n        &lt;%= @user.profile.description %&gt;\n      &lt;/div&gt;\n      &lt;% if current_user.plan_id == 2 %&gt;\n        &lt;div class=\"well\"&gt;\n          &lt;h3&gt;Contact Information&lt;/h3&gt;\n          &lt;%= @user.profile.phone_number %&gt;&lt;br/&gt;\n          &lt;%= @user.profile.contact_email %&gt;&lt;br/&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>CSS is:</p>\n\n<pre><code>.lego-man {\n  width: 128px;\n  height: 128px;\n}\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "edited": false, "score": 0, "creation_date": 1556681516, "post_id": 55931184, "comment_id": 98515631, "body": "This is vastly over-engineered for Ruby. Are you more used to writing C?"}, {"owner": {"reputation": 31, "user_id": 11496221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec620776ecc41fc7be6822a6cdafc19c?s=128&d=identicon&r=PG&f=1", "display_name": "HKeys34", "link": "https://stackoverflow.com/users/11496221/hkeys34"}, "reply_to_user": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "edited": false, "score": 0, "creation_date": 1556681606, "post_id": 55931184, "comment_id": 98515648, "body": "It&#39;s what we&#39;ve been assigned to do, and this is the way we have to do it"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556683791, "post_id": 55931184, "comment_id": 98516010, "body": "Need to know what <code>read_string</code> does - it looks like a bug that you&#39;re passing <code>search_string</code> as an argument to <code>search_for_track_name</code> but redefine it with a <code>gets.chomp</code> in there. Also, your method can be simplified to <code>tracks.index { |track| track.include?(search_string) } || -1</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556683869, "post_id": 55931184, "comment_id": 98516032, "body": "I highly recommend learning to use a debugger like pry by the way, it will allow you to inspect the state at any part of your code"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 1, "creation_date": 1556695427, "post_id": 55931184, "comment_id": 98518556, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/55920507/unable-to-identify-if-an-array-contains-a-string\">Unable to identify if an Array contains a string</a>"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1556695463, "post_id": 55931184, "comment_id": 98518576, "body": "Why do you duplicate your question?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11496221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec620776ecc41fc7be6822a6cdafc19c?s=128&d=identicon&r=PG&f=1", "display_name": "HKeys34", "link": "https://stackoverflow.com/users/11496221/hkeys34"}, "edited": false, "score": 0, "creation_date": 1556683196, "post_id": 55931360, "comment_id": 98515923, "body": "Where do I get the value of index from?"}, {"owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "reply_to_user": {"reputation": 31, "user_id": 11496221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec620776ecc41fc7be6822a6cdafc19c?s=128&d=identicon&r=PG&f=1", "display_name": "HKeys34", "link": "https://stackoverflow.com/users/11496221/hkeys34"}, "edited": false, "score": 0, "creation_date": 1556683794, "post_id": 55931360, "comment_id": 98516011, "body": "<code>index</code> is a method defined on <code>Array</code>. <code>tracks</code> should respond to it already."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556683955, "post_id": 55931360, "comment_id": 98516046, "body": "it would actually be <code>tracks.index { |track| track.include?(search_string) } || -1</code> because they&#39;re not looking for an exact match only, that&#39;s why they call <code>include?</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556683980, "post_id": 55931360, "comment_id": 98516051, "body": "I&#39;ll edit your answer if you don&#39;t mind"}, {"owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "edited": false, "score": 0, "creation_date": 1556684074, "post_id": 55931360, "comment_id": 98516072, "body": "I do mind - <code>include?</code> is an Array method that looks for an exact match. That&#39;s a separate issue I&#39;ve just addressed."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556684149, "post_id": 55931360, "comment_id": 98516087, "body": "I think it&#39;s safe to infer from OP&#39;s use of <code>include?</code> that they are looking for a partial match, but I made my point already"}, {"owner": {"reputation": 31, "user_id": 11496221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec620776ecc41fc7be6822a6cdafc19c?s=128&d=identicon&r=PG&f=1", "display_name": "HKeys34", "link": "https://stackoverflow.com/users/11496221/hkeys34"}, "edited": false, "score": 0, "creation_date": 1556684194, "post_id": 55931360, "comment_id": 98516094, "body": "It tells me that include? is an undefined method"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556684229, "post_id": 55931360, "comment_id": 98516101, "body": "You hould pop in with a debugger and look at the state ..."}, {"owner": {"reputation": 31, "user_id": 11496221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec620776ecc41fc7be6822a6cdafc19c?s=128&d=identicon&r=PG&f=1", "display_name": "HKeys34", "link": "https://stackoverflow.com/users/11496221/hkeys34"}, "edited": false, "score": 0, "creation_date": 1556685329, "post_id": 55931360, "comment_id": 98516277, "body": "I&#39;ve done that and it&#39;s only telling me what I already know, that <code>search_string = Sweet Caroline</code> and that <code>#&lt;Track:0x000000000331bd18 @name=&quot;Sweet Caroline</code>"}, {"owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "edited": false, "score": 0, "creation_date": 1556830400, "post_id": 55931360, "comment_id": 98571776, "body": "@spickermann is quite right, your array is full of Tracks, so you&#39;ll never find a String... and Tracks don&#39;t respond to #include? so that won&#39;t work either."}], "tags": [], "owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "is_accepted": false, "score": 0, "last_activity_date": 1556684010, "last_edit_date": 1556684010, "creation_date": 1556682256, "answer_id": 55931360, "question_id": 55931184, "link": "https://stackoverflow.com/questions/55931184/unable-to-search-for-a-string-in-an-array/55931360#55931360", "title": "Unable to search for a string in an Array", "body": "<p>I notice your searching loop does nothing. It checks N times if the array includes the search string, <em>ignores</em> the result of that check, and adds one to the index. So the index is always going to be N (3 in your case). Then you check <em>again</em> whether the array includes the search string, and return -1 if you don't. So your method will always return either N or -1.</p>\n\n<p>Fortunately, Ruby is a language which has already done a lot of the heavy lifting for you. Quite frankly I think you want:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def search_for_track_name(tracks, search_string)\n  tracks.index(search_string) || -1\nend\n</code></pre>\n\n<p><code>#index</code> would return <code>nil</code> if the search string is not found; this is more standard for Ruby, but since your requirement is to return -1, the <code>|| -1</code> will put it in for you. (<code>nil</code> and <code>false</code> are the <em>only</em> falsy values in Ruby, so <code>||</code> is a convenient way to shortcut to a default object if the first part is <code>nil</code>.)</p>\n\n<hr>\n\n<p>I've also just noticed something else, and I think it might be the problem. Do you by any chance have to press <kbd>Enter</kbd> twice? Because the first input from <code>read_string</code> will get overwritten by <code>search_string = gets.chomp</code>. You already set <code>search_string</code> before you passed it to the method...</p>\n\n<hr>\n\n<p>Third thing I've noticed - your track names are being populated with newlines (<code>\\n</code>). You'll need to <code>chomp</code> them as well, or follow other users' advice and look for partial matches instead of exact ones.</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1556697431, "creation_date": 1556697431, "answer_id": 55933179, "question_id": 55931184, "link": "https://stackoverflow.com/questions/55931184/unable-to-search-for-a-string-in-an-array/55933179#55933179", "title": "Unable to search for a string in an Array", "body": "<p>The condition <code>if tracks.include?(search_string)</code> will never be <code>true</code> because <code>tracks</code> is an array of instances of <code>Track</code>. And therefore the array doesn't include a specific string.</p>\n\n<p>It might include a track which has a matching name. To find the index of a track that has a matching name <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-index\" rel=\"nofollow noreferrer\"><code>Array#index</code></a> might help:</p>\n\n<pre><code>tracks.index { |track| track.name == search_string } \n</code></pre>\n\n<p>Because <code>index</code> returns <code>nil</code> if not found you can simplify your whole <code>if...else</code> block an probale the whole <code>search_for_track_name</code> method to just this line:</p>\n\n<pre><code>tracks.index { |track| track.name == search_string } || -1\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11496221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec620776ecc41fc7be6822a6cdafc19c?s=128&d=identicon&r=PG&f=1", "display_name": "HKeys34", "link": "https://stackoverflow.com/users/11496221/hkeys34"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "closed_date": 1556728836, "answer_count": 2, "score": -2, "last_activity_date": 1556697431, "creation_date": 1556680416, "question_id": 55931184, "link": "https://stackoverflow.com/questions/55931184/unable-to-search-for-a-string-in-an-array", "closed_reason": "Not suitable for this site", "title": "Unable to search for a string in an Array", "body": "<p>The Program is designed to read in album information from a .txt file, once the user inputs their desired track, the program checks an array to see if it contains that track. I have been successfully able to read the tracks into the array, but my program cannot identify if a string lies in this array or not.</p>\n\n<p>The Ruby File</p>\n\n<pre><code>require './input_functions'\nmodule Genre\n  POP, CLASSIC, JAZZ, ROCK = *1..4\nend\n\n$genre_names = ['Null', 'Pop', 'Classic', 'Jazz', 'Rock']\n\nclass Album\n    attr_accessor :title, :artist, :genre, :tracks\n\n    def initialize (title, artist, genre)\n        # insert lines here\n        @title = title\n        @artist = artist\n        @genre = genre  \n    end\nend\n\nclass Track\n    attr_accessor :name, :location\n    def initialize (name, location)\n        @name = name\n        @location = location\n    end\nend\n\ndef read_track(music_file)\n    track_name = music_file.gets\n    track_location = music_file.gets\n    track = Track.new(track_name, track_location)\nend\n\n\ndef read_tracks(music_file)\n    tracks = Array.new\n    count = music_file.gets.to_i\n    index = 0\nwhile index &lt; count\n    tracks &lt;&lt; read_track(music_file)\n    index += 1\nend\n    tracks\nend\n\ndef print_tracks(tracks)\n    index = 0\n    while (index &lt; tracks.length)\n    puts 'Track Number ' + index.to_s + ' is:'\n    print_track(tracks[index])\n\n    index = index + 1\nend\n    tracks\nend\n\ndef read_album music_file\n    album_artist = music_file.gets\n    album_title = music_file.gets\n    album_genre = music_file.gets\n    album = Album.new(album_title, album_artist, album_genre)\n    album\nend\n\n\ndef print_album album\n\n    puts 'Album title is ' + album.title.to_s\n    puts 'Album artist is ' + album.artist.to_s\n    puts 'Genre is ' + album.genre.to_s\n    puts $genre_names[album.genre.to_i]\n    # print out the tracks\n    puts 'Tracks are ' + print_tracks(album.tracks).to_s\n\nend\n\n\ndef print_track track\n  puts('Track title is: ' + track.name.to_s)\n    puts('Track file location is: ' + track.location.to_s)\nend\n\n** This is where I am having my problem\n# search for track by name.\n# Returns the index of the track or -1 if not found\ndef search_for_track_name(tracks, search_string)\n    search_string = gets.chomp\n    index = 0\nwhile (index &lt; tracks.length)\n    tracks.include?(search_string)\n    index = index + 1\nend\n    if tracks.include?(search_string)\n        return index\n    else\n        index = -1\n\n    end\n    return index\nend\n\n\n# Reads in an Album from a file and then prints all the album\n# to the terminal\n\ndef main\n\n  music_file = File.new(\"album.txt\", \"r\")\n    if music_file\n    album = read_album(music_file)\n    album.tracks = read_tracks(music_file)\n  music_file.close()\n    end\n\n  search_string = read_string(\"Enter the track name you wish to find: \")\n  index = search_for_track_name(album.tracks, search_string)\n  if index.to_i &gt; -1\n    puts \"Found \" + album.tracks[index].name + \" at \" + index.to_s\n  else\n    puts \"Entry not Found\"\n  end\nend\nmain\n\n</code></pre>\n\n<p>This is the .txt file</p>\n\n<pre><code>Neil Diamond\nGreatest Hits\n1\n3\nCrackling Rose\nsounds/01-Cracklin-rose.wav\nSoolaimon\nsounds/06-Soolaimon.wav\nSweet Caroline\nsounds/20-Sweet_Caroline.wav\n\n</code></pre>\n\n<p>When the user enters \"Sweet Caroline\", the program should return that it has found the track, instead it does:</p>\n\n<pre><code>Enter the track name you wish to find:\nSweet Caroline\n\nEntry not Found\n\nTracks are [#&lt;Track:0x000000000331be58 @name=\"Crackling Rose\\n\", @location=\"sounds/01-Cracklin-rose.wav\\n\"&gt;, #&lt;Track:0x000000000331bdb8 @name=\"Soolaimon\\n\", @location=\"sounds/06-Soolaimon.wav\\n\"&gt;, #&lt;Track:0x000000000331bd18 @name=\"Sweet Caroline\\n\", @location=\"sounds/20-Sweet_Caroline.wav\\n\"&gt;]\n\n</code></pre>\n"}, {"tags": ["ruby", "rest", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 10693732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7zvywP_y-SA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-h5ElHsERflsvEK9ES9kBPA2wXYow/mo/photo.jpg?sz=128", "display_name": "Dongkai Yu", "link": "https://stackoverflow.com/users/10693732/dongkai-yu"}, "edited": false, "score": 0, "creation_date": 1556714379, "post_id": 55931916, "comment_id": 98525382, "body": "How to use Gemfile to manage chef libraries requirement? Never found any instruction on this."}], "tags": [], "owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "is_accepted": true, "score": 0, "last_activity_date": 1556773435, "last_edit_date": 1556773435, "creation_date": 1556687853, "answer_id": 55931916, "question_id": 55930755, "link": "https://stackoverflow.com/questions/55930755/cannot-load-such-file-chef-rest-when-require-chef-rest/55931916#55931916", "title": "&quot;cannot load such file -- chef/rest&quot; when &quot;require &#39;chef/rest&#39;&quot;", "body": "<p>you did not share whether you use chef libraries as a part of your cookbooks or as a part of another program that depended on the chef libraries.</p>\n\n<p>if you are at the second case, i.e. outside of a cookbook context, then make sure that you are using Gemfile to manage your chef libraries requirement, then execute your program using bundler.</p>\n\n<p>as you can see, <a href=\"https://docs.chef.io/deprecations_chef_rest.html\" rel=\"nofollow noreferrer\"><code>Chef::Rest</code> is deprecated</a></p>\n\n<blockquote>\n  <p>The <code>Chef::REST</code> class will be removed. <code>Chef::REST</code> was deprecated in 12.7.2, and will be removed in Chef 13.</p>\n  \n  <p>If writing code designed to be run internally to Chef, for example in a cookbook or a knife plugin, transition to using <code>Chef::ServerAPI</code>. In most cases this is as simple as creating a <code>Chef::ServerAPI</code> instance rather than a <code>Chef::REST</code> one.</p>\n  \n  <p>If writing code to interact with a Chef Server from other code, move to the <code>chef-api</code> gem.</p>\n</blockquote>\n\n<p>so i assume that you are using an old chef version, so for the remedy i will be using chef version 12.6:</p>\n\n<pre><code>$ cat Gemfile\n# frozen_string_literal: true\n\nsource \"https://rubygems.org\"\n\ngem 'chef', '12.6.0'\n\n$ cat foo.rb\nrequire 'chef'\nrequire 'chef/rest'\n\n$ bundle install\n...\nBundle complete! 1 Gemfile dependency, 46 gems now installed.\n\n$ bundle exec ruby foo.rb\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10693732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7zvywP_y-SA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-h5ElHsERflsvEK9ES9kBPA2wXYow/mo/photo.jpg?sz=128", "display_name": "Dongkai Yu", "link": "https://stackoverflow.com/users/10693732/dongkai-yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 857, "favorite_count": 0, "accepted_answer_id": 55931916, "answer_count": 1, "score": 0, "last_activity_date": 1556773435, "creation_date": 1556675656, "question_id": 55930755, "link": "https://stackoverflow.com/questions/55930755/cannot-load-such-file-chef-rest-when-require-chef-rest", "title": "&quot;cannot load such file -- chef/rest&quot; when &quot;require &#39;chef/rest&#39;&quot;", "body": "<p>Trying to write first program to access chef server via API. Following example program on <a href=\"https://docs.chef.io/api_chef_server.html#examples\" rel=\"nofollow noreferrer\">https://docs.chef.io/api_chef_server.html#examples</a> there supposed to be two lines of code to include <code>chef::rest</code> library.</p>\n\n<pre><code>require 'chef'\nrequire 'chef/rest'\n</code></pre>\n\n<p>but the code failed with error</p>\n\n<pre><code>Traceback (most recent call last):\n        2: from ./rest.rb:4:in `&lt;main&gt;'\n        1: from /opt/chef/embedded/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n/opt/chef/embedded/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- chef/rest (LoadError)\n</code></pre>\n\n<p>Chef client version: 14.12.9-1\nOS Version: Ubuntu 16.04 LTS</p>\n\n<p>Any missing steps?</p>\n"}, {"tags": ["ruby", "rubocop", "rakefile"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1556674260, "post_id": 55930103, "comment_id": 98514454, "body": "&quot;none seem to work&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1556674365, "post_id": 55930103, "comment_id": 98514476, "body": "What does it mean that they don&#39;t &quot;seem&quot; to work? Do they work or do they not work?"}, {"owner": {"reputation": 7545, "user_id": 370605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/r8v6e.png?s=128&g=1", "display_name": "beauXjames", "link": "https://stackoverflow.com/users/370605/beauxjames"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1556719587, "post_id": 55930103, "comment_id": 98527746, "body": "Egads. The answer is below. Well...it &#39;seems&#39; to be at least."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1556669422, "creation_date": 1556669422, "answer_id": 55930154, "question_id": 55930103, "link": "https://stackoverflow.com/questions/55930103/what-is-the-supported-hash-syntax-for-the-default-task-in-a-rakefile-with-ruby-v/55930154#55930154", "title": "What is the supported hash syntax for the default task in a Rakefile with Ruby v &gt;= 1.9?", "body": "<p>Rubocop is suggesting this:</p>\n\n<pre><code>task default: :test\n</code></pre>\n\n<p>It may look a bit strange at first but you get used to it.</p>\n\n<p>Rubocop also needs to remember that Ruby 1.9 shipped twelve years ago in 2007. It's not \"new\". Support for it was cut in 2015. Shows how long Rubocop has been fighting to make Ruby code better.</p>\n"}], "owner": {"reputation": 7545, "user_id": 370605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/r8v6e.png?s=128&g=1", "display_name": "beauXjames", "link": "https://stackoverflow.com/users/370605/beauxjames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 55930154, "answer_count": 1, "score": 0, "last_activity_date": 1556669422, "creation_date": 1556668897, "question_id": 55930103, "link": "https://stackoverflow.com/questions/55930103/what-is-the-supported-hash-syntax-for-the-default-task-in-a-rakefile-with-ruby-v", "title": "What is the supported hash syntax for the default task in a Rakefile with Ruby v &gt;= 1.9?", "body": "<p>In this Rakefile I want to set my default task to :test.</p>\n\n<pre><code>task :default =&gt; :test\n</code></pre>\n\n<p>Rubocop has now entered the scene and states</p>\n\n<pre><code>Style/HashSyntax: Use the new Ruby 1.9 hash syntax.\n</code></pre>\n\n<p>Great. I don't have much Ruby background, but I do know that the general hash syntax is meant to assign values and make it easy to get them later.</p>\n\n<p>I honestly have no idea how to communicate this, where you have some task and there is a 'magic' default instance and I want to assign :test</p>\n\n<p>I have tried a few permutations but none seem to work. I obviously don't come from the same planet.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu"], "comments": [{"owner": {"reputation": 1261, "user_id": 8844929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0b2684f65b25d110b6b2408fc7ebb0?s=128&d=identicon&r=PG", "display_name": "Veridian Dynamics", "link": "https://stackoverflow.com/users/8844929/veridian-dynamics"}, "edited": false, "score": 0, "creation_date": 1556659922, "post_id": 55928872, "comment_id": 98511397, "body": "Just to be sure, can you completely close out of your terminal, reopen it, and try it? More often than not, it&#39;s an old bash profile without the updated bins..."}, {"owner": {"reputation": 971, "user_id": 10998672, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-txvAv7e0sbE/AAAAAAAAAAI/AAAAAAAAAEM/8OAfauJauBM/photo.jpg?sz=128", "display_name": "martin", "link": "https://stackoverflow.com/users/10998672/martin"}, "reply_to_user": {"reputation": 1261, "user_id": 8844929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0b2684f65b25d110b6b2408fc7ebb0?s=128&d=identicon&r=PG", "display_name": "Veridian Dynamics", "link": "https://stackoverflow.com/users/8844929/veridian-dynamics"}, "edited": false, "score": 0, "creation_date": 1556660094, "post_id": 55928872, "comment_id": 98511464, "body": "I closed it (all windows, reboot) and opened terminal once again and whem I type &#39;rails s&#39; I got a standard message to create new app etc. So rails works. I go to /project dir (same terminal window) type &#39;rails s&#39; again and i got info than rails are not installed, command not found."}, {"owner": {"reputation": 1261, "user_id": 8844929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0b2684f65b25d110b6b2408fc7ebb0?s=128&d=identicon&r=PG", "display_name": "Veridian Dynamics", "link": "https://stackoverflow.com/users/8844929/veridian-dynamics"}, "edited": false, "score": 1, "creation_date": 1556660259, "post_id": 55928872, "comment_id": 98511522, "body": "What happens if you type <code>.&#47;bin&#47;rails</code>?"}, {"owner": {"reputation": 971, "user_id": 10998672, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-txvAv7e0sbE/AAAAAAAAAAI/AAAAAAAAAEM/8OAfauJauBM/photo.jpg?sz=128", "display_name": "martin", "link": "https://stackoverflow.com/users/10998672/martin"}, "reply_to_user": {"reputation": 1261, "user_id": 8844929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0b2684f65b25d110b6b2408fc7ebb0?s=128&d=identicon&r=PG", "display_name": "Veridian Dynamics", "link": "https://stackoverflow.com/users/8844929/veridian-dynamics"}, "edited": false, "score": 0, "creation_date": 1556660371, "post_id": 55928872, "comment_id": 98511574, "body": "Hmm... i got a mssg than i using a old version of bundler:  /home/iso/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/bundler/lock&zwnj;&#8203;file_parser.rb:108:i&zwnj;&#8203;n `warn_for_outdated_bundler_version&#39;: You must use Bundler 2 or greater with this lockfile. (Bundler::LockfileError)"}, {"owner": {"reputation": 971, "user_id": 10998672, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-txvAv7e0sbE/AAAAAAAAAAI/AAAAAAAAAEM/8OAfauJauBM/photo.jpg?sz=128", "display_name": "martin", "link": "https://stackoverflow.com/users/10998672/martin"}, "reply_to_user": {"reputation": 1261, "user_id": 8844929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0b2684f65b25d110b6b2408fc7ebb0?s=128&d=identicon&r=PG", "display_name": "Veridian Dynamics", "link": "https://stackoverflow.com/users/8844929/veridian-dynamics"}, "edited": false, "score": 0, "creation_date": 1556660649, "post_id": 55928872, "comment_id": 98511670, "body": "Ok i update bundler, install bundles and i got now: The most common rails commands are:....... (looks normal) but &#39;rails s&#39; and other commands in this dir are still not found :/"}, {"owner": {"reputation": 1261, "user_id": 8844929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0b2684f65b25d110b6b2408fc7ebb0?s=128&d=identicon&r=PG", "display_name": "Veridian Dynamics", "link": "https://stackoverflow.com/users/8844929/veridian-dynamics"}, "edited": false, "score": 1, "creation_date": 1556660805, "post_id": 55928872, "comment_id": 98511729, "body": "Try to perform <code>rails new my_app</code> inside your home dir, <code>cd my_app</code>, <code>bundle install</code>, and then <code>rails s</code>. Let me know if it&#39;s the same error."}, {"owner": {"reputation": 971, "user_id": 10998672, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-txvAv7e0sbE/AAAAAAAAAAI/AAAAAAAAAEM/8OAfauJauBM/photo.jpg?sz=128", "display_name": "martin", "link": "https://stackoverflow.com/users/10998672/martin"}, "reply_to_user": {"reputation": 1261, "user_id": 8844929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0b2684f65b25d110b6b2408fc7ebb0?s=128&d=identicon&r=PG", "display_name": "Veridian Dynamics", "link": "https://stackoverflow.com/users/8844929/veridian-dynamics"}, "edited": false, "score": 0, "creation_date": 1556661403, "post_id": 55928872, "comment_id": 98511920, "body": "I did what u say. Create one app in home, one app in desktop. Everything works until reboot. Now when i go to a home app i can normally run rails s. But when i go to desktop app i have same info as in first example : rails are not found"}, {"owner": {"reputation": 1261, "user_id": 8844929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0b2684f65b25d110b6b2408fc7ebb0?s=128&d=identicon&r=PG", "display_name": "Veridian Dynamics", "link": "https://stackoverflow.com/users/8844929/veridian-dynamics"}, "edited": false, "score": 0, "creation_date": 1556661532, "post_id": 55928872, "comment_id": 98511952, "body": "Sounds like that app has an issue, not your rails install. So, delete the app and reclone it from GitHub."}, {"owner": {"reputation": 971, "user_id": 10998672, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-txvAv7e0sbE/AAAAAAAAAAI/AAAAAAAAAEM/8OAfauJauBM/photo.jpg?sz=128", "display_name": "martin", "link": "https://stackoverflow.com/users/10998672/martin"}, "reply_to_user": {"reputation": 1261, "user_id": 8844929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0b2684f65b25d110b6b2408fc7ebb0?s=128&d=identicon&r=PG", "display_name": "Veridian Dynamics", "link": "https://stackoverflow.com/users/8844929/veridian-dynamics"}, "edited": false, "score": 0, "creation_date": 1556661662, "post_id": 55928872, "comment_id": 98511984, "body": "But when I creating a home app as u said I created a new desktop app too, just for test. First work, second nope. So it looks like the problem is with desktop dir? :O"}, {"owner": {"reputation": 1261, "user_id": 8844929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0b2684f65b25d110b6b2408fc7ebb0?s=128&d=identicon&r=PG", "display_name": "Veridian Dynamics", "link": "https://stackoverflow.com/users/8844929/veridian-dynamics"}, "edited": false, "score": 1, "creation_date": 1556661751, "post_id": 55928872, "comment_id": 98512013, "body": "I suppose so but it&#39;s too complex for me to figure that out without knowing a hell of a lot more. Sounds like you might need to uninstall and reinstall everything but it could be as simple as RVM only running in home, etc."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556662337, "post_id": 55928872, "comment_id": 98512181, "body": "What is output of <code>rvm list</code> from home folder and als from root of the problem rails project?"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1556663817, "post_id": 55928872, "comment_id": 98512524, "body": "Why do you have RVM and rbenv simultaneously? I recommend to delete both first and then install only one."}], "owner": {"reputation": 971, "user_id": 10998672, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-txvAv7e0sbE/AAAAAAAAAAI/AAAAAAAAAEM/8OAfauJauBM/photo.jpg?sz=128", "display_name": "martin", "link": "https://stackoverflow.com/users/10998672/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556700376, "creation_date": 1556659682, "last_edit_date": 1556700376, "question_id": 55928872, "link": "https://stackoverflow.com/questions/55928872/no-rails-in-ubuntu-whem-i-cd-to-project-dir", "title": "No rails in ubuntu whem i &quot;cd&quot; to project dir", "body": "<p>I lose my patience to rails on ubuntu. So far I have used the ready environment on c9, but it is slowly closing. I'm learning how to deal with rails and I have a problem with Ubuntu.</p>\n\n<p>I use tutorials (many) to install it. Finally, I did it, and I created a small project. One page + one model + one controller. Commit, exit, turn off a notebook. </p>\n\n<p>Today when I want to back to programming I opened a terminal and go to project dir /Desktop/Projc/test. And after typed <code>rails s</code> I got the message:</p>\n\n<pre><code>Command 'rails' not found, but can be installed with:\nsudo apt install ruby-railties\n</code></pre>\n\n<p>And what is weird, If I open a terminal in home dir rails are ok. I can create a new project etc. But in the existing project rails \"are not installed\". \nI spent a few hours to look for a solution, reads many posts (so: 10918685, 7788946, 16884034) but nothing help.</p>\n\n<p>I'm afraid that I just did a bigger mess. \nCan someone try to help me with my case?</p>\n\n<p>My configs:\n <code>gem env</code>:</p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 3.0.1\n  - RUBY VERSION: 2.6.1 (2019-01-30 patchlevel 33) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /home/iso/.rvm/gems/ruby-2.6.1\n  - USER INSTALLATION DIRECTORY: /home/iso/.gem/ruby/2.6.0\n  - RUBY EXECUTABLE: /home/iso/.rvm/rubies/ruby-2.6.1/bin/ruby\n  - GIT EXECUTABLE: /usr/bin/git\n  - EXECUTABLE DIRECTORY: /home/iso/.rvm/gems/ruby-2.6.1/bin\n  - SPEC CACHE DIRECTORY: /home/iso/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /home/iso/.rvm/rubies/ruby-2.6.1/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /home/iso/.rvm/gems/ruby-2.6.1\n     - /home/iso/.rvm/rubies/ruby-2.6.1/lib/ruby/gems/2.6.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /home/iso/.rvm/gems/ruby-2.6.1/bin\n     - /home/iso/.rvm/gems/ruby-2.6.1@global/bin\n     - /home/iso/.rvm/rubies/ruby-2.6.1/bin\n     - /home/iso/.rvm/bin\n     - /home/iso/.rbenv/plugins/ruby-build/bin\n     - /home/iso/.rbenv/shims\n     - /home/iso/.rbenv/bin\n     - /usr/local/sbin\n     - /usr/local/bin\n     - /usr/sbin\n     - /usr/bin\n     - /sbin\n     - /bin\n     - /usr/games\n     - /usr/local/games\n     - /snap/bin\n</code></pre>\n\n<p><code>echo $PATH</code>:</p>\n\n<pre><code>/home/iso/.rvm/gems/ruby-2.6.1/bin:/home/iso/.rvm/gems/ruby-2.6.1@global/bin:/home/iso/.rvm/rubies/ruby-2.6.1/bin:/home/iso/.rvm/bin:/home/iso/.rbenv/plugins/ruby-build/bin:/home/iso/.rbenv/shims:/home/iso/.rbenv/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin\n</code></pre>\n\n<p><code>rails -v</code>: 5.2.3\n<code>ruby -v</code>: 2.6.0p0</p>\n\n<p>Can someone see a solution? And in the terminal, I have a checked a \"run as start shell\".</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556666124, "post_id": 55929260, "comment_id": 98513025, "body": "Do you really need <code>undef :puts</code> and the call to <code>unbind</code>? Just calling <code>define_method(:puts, original_puts)</code> to restore the original methods seem to be enough."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556688357, "post_id": 55929260, "comment_id": 98516917, "body": "Aye you could. Except this does mean you&#39;re &quot;polluting&quot; Kernel with more and more definitions of puts, every time you call the method."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556699521, "post_id": 55929260, "comment_id": 98519774, "body": "Do you? I thought that it would simply replace the former definition."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 1, "last_activity_date": 1556662618, "last_edit_date": 1556662618, "creation_date": 1556662112, "answer_id": 55929260, "question_id": 55928251, "link": "https://stackoverflow.com/questions/55928251/is-there-a-way-to-redefine-a-method-within-a-block/55929260#55929260", "title": "Is there a way to redefine a method within a block?", "body": "<p>This is more-than-a-little-bit crazy; I don't recommend running anything like this in production... But I was curious, and found a way to do this with ruby's meta-programming:</p>\n\n<pre><code>def always_upcase_strings(&amp;block)\n  original_puts = method(:puts)\n  define_method(:puts) do |string|\n    original_puts.call(string.upcase)\n  end\n  yield\n  undef :puts\n  define_method(:puts, original_puts.unbind)\nend\n\nalways_upcase_strings do\n  puts \"abc\" #=&gt; \"ABC\"\n  puts \"def\" #=&gt; \"DEF\"\n  puts \"ghi\" #=&gt; \"GHI\"\nend\n\nputs \"xyz\"   #=&gt; \"xyz\"\n</code></pre>\n\n<p>What's going on here?</p>\n\n<ul>\n<li>First, I grab the <code>puts</code> <a href=\"https://ruby-doc.org/core/Method.html\" rel=\"nofollow noreferrer\"><code>Method</code> object</a>, and store it in a variable.</li>\n<li>Then, re-define <code>puts</code> to <a href=\"https://ruby-doc.org/core/Method.html#method-i-call\" rel=\"nofollow noreferrer\">invoke it</a> with the desired modification. (You could also do this with <code>super(string.upcase)</code>, but the above better illustrates what's going on, I think.)</li>\n<li>Then <code>yield</code> to a block, so you can call the new version of the method.</li>\n<li>Next, <code>undef</code> the method (!!!), to completely get rid of the override. (But unfortunately this removes the original method, too. So...)</li>\n<li>Finally, <a href=\"https://apidock.com/ruby/Module/define_method\" rel=\"nofollow noreferrer\">re-define the <code>puts</code> method</a> by <a href=\"https://ruby-doc.org/core/UnboundMethod.html\" rel=\"nofollow noreferrer\">re-binding the orignal</a> back to <code>self</code>.</li>\n</ul>\n\n<p>This is absolute black magic. Use at your own peril.</p>\n\n<hr>\n\n<p>My \"real world\" advice would, instead, be:</p>\n\n<pre><code>def puts_upcase(str)\n  puts str.upcase\nend\n\nputs_upcase \"abc\" #=&gt; \"ABC\"\nputs \"xyz\"        #=&gt; \"xyz\"\n</code></pre>\n\n<p>Or maybe in your scenario, if you'd actually like to tweak a class method's behaviour, perhaps <a href=\"https://ruby-doc.org/core/Module.html#method-i-prepend\" rel=\"nofollow noreferrer\"><code>Module#prepend</code></a> is a better tool for the job.</p>\n\n<p>The simpler solutions are often the better ones.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1556665302, "post_id": 55929530, "comment_id": 98512857, "body": "It even works without a class: <code>obj = Object.new</code>, then <code>def obj.puts ...</code> and finally <code>obj.instance_eval(&amp;block)</code> The downside with the <code>instance_eval</code> approach however is that <code>self</code> will change within the block, which may break wrapped code. Using <code>method_missing</code> to delegate non-overridden methods to the original receiver could work, but then it&#39;s getting complex again."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1556666299, "post_id": 55929530, "comment_id": 98513063, "body": "I would prefer an approach like this to the first one (and echo all of your disclaimers). This <code>instance_eval</code> stuff is how FactoryBot gets their clean DSL. <a href=\"https://github.com/thoughtbot/factory_bot/blob/99ac02400fd56bd1872fc3ed84f81ea5e8f27737/lib/factory_bot/syntax/default.rb#L49\" rel=\"nofollow noreferrer\">github.com/thoughtbot/factory_bot/blob/&hellip;</a>"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 3, "last_activity_date": 1556664335, "last_edit_date": 1556664335, "creation_date": 1556664028, "answer_id": 55929530, "question_id": 55928251, "link": "https://stackoverflow.com/questions/55928251/is-there-a-way-to-redefine-a-method-within-a-block/55929530#55929530", "title": "Is there a way to redefine a method within a block?", "body": "<p>On <a href=\"https://stackoverflow.com/a/55929260/1954610\">second thoughts</a>, here's a better answer:</p>\n\n<pre><code>def always_upcase_strings(&amp;block)\n  anon_class = Class.new do\n    def puts(str)\n      super(str.upcase)\n    end\n  end\n  anon_class.new.instance_eval(&amp;block)\nend\n\nalways_upcase_strings do\n  puts \"abc\" #=&gt; \"ABC\"\n  puts \"def\" #=&gt; \"DEF\"\n  puts \"ghi\" #=&gt; \"GHI\"\nend\n\nputs \"xyz\"   #=&gt; \"xyz\"\n</code></pre>\n\n<p>This <a href=\"https://ruby-doc.org/core/Class.html#method-i-new\" rel=\"nofollow noreferrer\">creates</a> a temporary class (anonymous, because it has no need for a name) with the desired method override.</p>\n\n<p>The yielded block is then invoked, <strong>within the context of this class instance</strong>.</p>\n\n<p>As well as being less confusing than my \"redefine-undefine-redefine the method\" solution, this approach has the added advantage that it's <em>thread-safe</em>. So you won't get weird behaviour if, for example, running parallel tests whilst invoking the method.</p>\n\n<p>...But I still stand by my original statement that redefining methods within a block is super surprising behaviour. Coworkers probably won't like you for choosing that design pattern (unless it's done in a limited manner, and for good reason!)</p>\n"}], "owner": {"reputation": 835, "user_id": 3416381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6V4dL.jpg?s=128&g=1", "display_name": "madevident", "link": "https://stackoverflow.com/users/3416381/madevident"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 55929530, "answer_count": 2, "score": 2, "last_activity_date": 1556664335, "creation_date": 1556656158, "question_id": 55928251, "link": "https://stackoverflow.com/questions/55928251/is-there-a-way-to-redefine-a-method-within-a-block", "title": "Is there a way to redefine a method within a block?", "body": "<p>Let's say I wanted to <code>puts</code> a large number of strings <em>in uppercase</em>, but for brevity, I wanted to write <code>puts(string)</code> instead of <code>puts(string.upcase)</code> each time.</p>\n\n<p>Is there a way for me to redefine <code>puts</code> <strong>within a block only</strong>, like this?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># This will puts as normal\nputs \"abc\"\n# =&gt; abc\n\n# This will puts an upcased string, but it's too verbose\nputs \"abc\".upcase\n# =&gt; ABC\n\n# I want to do something like this, which will override the puts method for code run within the block\ndef always_upcase_strings(&amp;block)\n  def puts(string)\n    super(string.upcase)\n  end\nend\n\nalways_upcase_strings do \n  puts \"abc\"\n  puts \"def\"\n  puts \"ghi\"\nend\nputs \"xyz\"\n# =&gt; ABC\n# =&gt; DEF\n# =&gt; GHI\n# =&gt; xyz\n</code></pre>\n\n<p>My example above is simplified - I'm not using <code>puts</code> in my case, but a method that I wrote myself.</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1556664230, "post_id": 55927577, "comment_id": 98512631, "body": "If your method expects an actual instance of <code>Foo</code>, then maybe you should pass an instance of <code>Foo</code> instead of a test double."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1556654588, "creation_date": 1556654588, "answer_id": 55927967, "question_id": 55927577, "link": "https://stackoverflow.com/questions/55927577/how-to-stub-mock-instance-in-case-statement/55927967#55927967", "title": "How to stub\\mock instance in case statement?", "body": "<p><code>instance_double(Foo).class != Foo</code>. As you have seen this returns an InstanceDouble object which won't work for the purpose of your comparison.</p>\n\n<p>I would replace your instance_double line with manual instantiation and stubbing:</p>\n\n<pre><code>let(:foo) do\n  foo = Foo.new\n  allow(foo).to receive(:foo).and_return \"some text\"\n  foo\nend\nlet(:bar) { Bar.new(foo) }\n</code></pre>\n\n<p>That way <code>foo.class == Foo</code> and it will work in your case statement properly.</p>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 3, "last_activity_date": 1556656780, "last_edit_date": 1556656780, "creation_date": 1556656444, "answer_id": 55928312, "question_id": 55927577, "link": "https://stackoverflow.com/questions/55927577/how-to-stub-mock-instance-in-case-statement/55928312#55928312", "title": "How to stub\\mock instance in case statement?", "body": "<p>Case statements use <code>===</code> for case equality purposes and in this case <code>Foo</code> is the receiver not the argument. e.g. </p>\n\n<pre><code>  case attr\n    when Foo then attr.foo\n  end \n</code></pre>\n\n<p>Compares <code>attr</code> to <code>Foo</code> as <code>Foo === attr</code> not the other way around.</p>\n\n<p>So you could change your test to </p>\n\n<pre><code>it 'make some business logic here' do\n  allow(Foo).to receive(:===).with(foo).and_return(true)\n  expect { subject }.to be_truthy\nend\n</code></pre>\n\n<p>This way when it evaluates your case statement it will follow the <code>when Foo</code> path because <code>Foo === attr</code> will be true due to the stubbing. </p>\n"}], "owner": {"reputation": 13, "user_id": 1973970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae4f86ddc70bfdb8b6c8a2001f1ce7d?s=128&d=identicon&r=PG", "display_name": "kudrin", "link": "https://stackoverflow.com/users/1973970/kudrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 55928312, "answer_count": 2, "score": 1, "last_activity_date": 1556657104, "creation_date": 1556652659, "last_edit_date": 1556657104, "question_id": 55927577, "link": "https://stackoverflow.com/questions/55927577/how-to-stub-mock-instance-in-case-statement", "title": "How to stub\\mock instance in case statement?", "body": "<p>I have one class method, which use another one class instance method:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Foo\n  def foo\n    # a lot of code here, which return String instance\n  end\nend\n\nclass Bar\n  class UnknownType &lt; StandardError;end \n\n  def initialize(foo)\n    self.foo = foo\n  end \n\n  attr_reader :foo \n\n  def call\n    # some code which use method foo\n    foo\n  end\n\n  private\n\n  def foo=(attr)\n    @foo ||= case attr\n               when Foo then attr.foo\n               when String then attr\n               else raise UnknownType, \"Unknown type #{attr.class.name}\"\n             end\n  end\n\nend\n</code></pre>\n\n<p>And my test doesn't work, I try to sub methods:\n- is_a\n- kind_of?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>let(:foo) { instance_double(Foo, foo: 'some text') }\nlet(:bar) { Bar.new(foo) }\n\nsubject { bar.call }\n\nit 'make some business logic here' do\n  expect { subject }.to be_truthy\nend\n</code></pre>\n\n<p>But it raise error <code>UnknownType</code> becasue template is a <code>#&lt;InstanceDouble(Foo) (anonymous)&gt;</code></p>\n\n<p>not a <code>Foo</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1863, "user_id": 2777118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1063240573/picture?type=large", "display_name": "Gibson", "link": "https://stackoverflow.com/users/2777118/gibson"}, "edited": false, "score": 0, "creation_date": 1556653793, "post_id": 55927747, "comment_id": 98509162, "body": "Hi, thanks! It works, but I get [Mon, 01 Apr 2019, 108] in the view. How can I get only the value? 108? Thanks a lot!"}, {"owner": {"reputation": 402, "user_id": 6202371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uu5Tq.jpg?s=128&g=1", "display_name": "weilandia", "link": "https://stackoverflow.com/users/6202371/weilandia"}, "reply_to_user": {"reputation": 1863, "user_id": 2777118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1063240573/picture?type=large", "display_name": "Gibson", "link": "https://stackoverflow.com/users/2777118/gibson"}, "edited": false, "score": 0, "creation_date": 1556654014, "post_id": 55927747, "comment_id": 98509254, "body": "That query will return a hash, so you can map over it and display it however you&#39;d like depending on how you are templating your data."}], "tags": [], "owner": {"reputation": 402, "user_id": 6202371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uu5Tq.jpg?s=128&g=1", "display_name": "weilandia", "link": "https://stackoverflow.com/users/6202371/weilandia"}, "is_accepted": true, "score": 3, "last_activity_date": 1556653412, "creation_date": 1556653412, "answer_id": 55927747, "question_id": 55927412, "link": "https://stackoverflow.com/questions/55927412/how-to-sum-records-grouped-by-month-in-ruby-on-rails/55927747#55927747", "title": "How to sum records grouped by month in Ruby on Rails", "body": "<p>A very simple solution would be to use the gem <a href=\"https://github.com/ankane/groupdate\" rel=\"nofollow noreferrer\">GroupDate</a>. This way you can do everything you need directly from your db instead of iterating over all the records in ruby:</p>\n\n<p><code>Dato.group_by_month(:created_at).sum(:ingresos)</code></p>\n\n<p>Here's where you can see the queries happening under the hood: <a href=\"https://github.com/ankane/groupdate/blob/master/lib/groupdate/relation_builder.rb\" rel=\"nofollow noreferrer\">https://github.com/ankane/groupdate/blob/master/lib/groupdate/relation_builder.rb</a>.</p>\n"}], "owner": {"reputation": 1863, "user_id": 2777118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1063240573/picture?type=large", "display_name": "Gibson", "link": "https://stackoverflow.com/users/2777118/gibson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 55927747, "answer_count": 1, "score": 4, "last_activity_date": 1556653412, "creation_date": 1556651852, "question_id": 55927412, "link": "https://stackoverflow.com/questions/55927412/how-to-sum-records-grouped-by-month-in-ruby-on-rails", "title": "How to sum records grouped by month in Ruby on Rails", "body": "<p>I have a model <strong>Dato</strong>, which has a column called <strong>Ingresos</strong>.</p>\n\n<p>I need to group <strong>Ingresos</strong> by month and sum all of the records in one month together for each month.</p>\n\n<pre><code>@datos = Dato.all\n@datos_months = @datos.group_by { |t| t.date.beginning_of_month }\n@datos_months_ingresos = @datos_months.sum(:ingresos)\n</code></pre>\n\n<p>This way I only get an array with all the columns instead of the ingresos sum by month.</p>\n\n<p>Any ideas? Thanks guys!</p>\n"}, {"tags": ["ruby", "macos", "rubygems", "homebrew", "rbenv"], "comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1556650165, "post_id": 55926521, "comment_id": 98507725, "body": "what about a gemfile? you can specify specific versions there. Or am I missing anything?"}, {"owner": {"reputation": 4282, "user_id": 497403, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/070343c258641e3b9f27d77cd21c86ee?s=128&d=identicon&r=PG", "display_name": "David Airapetyan", "link": "https://stackoverflow.com/users/497403/david-airapetyan"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1556735102, "post_id": 55926521, "comment_id": 98534945, "body": "Like @MrRoth said in their answer, I could use a Gemfile and bundler, but this will, as far as I understand, to use bundler everywhere I want to use the gem. While it would make sense for Rails, it makes less sense for command-line tools such as CococaPods which I use.  I guess the real question is if this is a bug with rbenv in particular. When gems are installed via rbenv, they are stubbed in ls ~/.rbenv/shims and execute via /usr/local/Cellar/rbenv/1.1.2/libexec/rbenv. Does it mean that rbenv does not properly understand the <i>version</i> directive?"}, {"owner": {"reputation": 4282, "user_id": 497403, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/070343c258641e3b9f27d77cd21c86ee?s=128&d=identicon&r=PG", "display_name": "David Airapetyan", "link": "https://stackoverflow.com/users/497403/david-airapetyan"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1556735770, "post_id": 55926521, "comment_id": 98535201, "body": "rbenv will resolve to ~/.rbenv/versions/2.3.7/bin/xcodeproj which contains the following line:  load Gem.bin_path(&#39;xcodeproj&#39;, &#39;xcodeproj&#39;, version)  The version does get passed in correctly, so running &quot;xcodeproj <i>1.5.7</i> --version&quot; results in Gem.bin_path() returning &quot;~/.gem/ruby/2.3.0/gems/xcodeproj-1.5.7/bin/xcodeproj&quot;. What&#39;s unclear is why that doesn&#39;t work."}], "answers": [{"comments": [{"owner": {"reputation": 4282, "user_id": 497403, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/070343c258641e3b9f27d77cd21c86ee?s=128&d=identicon&r=PG", "display_name": "David Airapetyan", "link": "https://stackoverflow.com/users/497403/david-airapetyan"}, "edited": false, "score": 0, "creation_date": 1556730809, "post_id": 55932575, "comment_id": 98533013, "body": "Thank you, this works. However, it is fairly heavy-handed - I use many gems as command-line tools (most commonly CocoaPods) and if I understand correctly, I need to be in the context of the &quot;current bundle&quot; to run bundle exec, meaning that I need to create a Gemfile in every directory I want to run the tool in.  For example, I uses CocoaPods to fetch libraries for Xcode projects. Normally, all I need is a Podfile in each Xcode project directory. With the bundler approach, I would also need a Gemfile for each Xcode project as well. Is my understanding correct?"}, {"owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "reply_to_user": {"reputation": 4282, "user_id": 497403, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/070343c258641e3b9f27d77cd21c86ee?s=128&d=identicon&r=PG", "display_name": "David Airapetyan", "link": "https://stackoverflow.com/users/497403/david-airapetyan"}, "edited": false, "score": 0, "creation_date": 1556772506, "post_id": 55932575, "comment_id": 98544187, "body": "@DavidAirapetyan: firstly, if that solves the issue on your post, please accept my answer. for your other question, in theory you are correct although it can be &quot;hacked&quot;. i also updated my answer."}, {"owner": {"reputation": 4282, "user_id": 497403, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/070343c258641e3b9f27d77cd21c86ee?s=128&d=identicon&r=PG", "display_name": "David Airapetyan", "link": "https://stackoverflow.com/users/497403/david-airapetyan"}, "edited": false, "score": 0, "creation_date": 1556830186, "post_id": 55932575, "comment_id": 98571695, "body": "It doesn&#39;t quite solve my problem, but I suppose it does answer the question as it was stated. It feels like I am running into a limitation/bug of rbenv - there is evidence what I am trying to do actually works with RVM."}], "tags": [], "owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "is_accepted": true, "score": 0, "last_activity_date": 1556772651, "last_edit_date": 1556772651, "creation_date": 1556693347, "answer_id": 55932575, "question_id": 55926521, "link": "https://stackoverflow.com/questions/55926521/cannot-switch-gem-versions-in-an-rbenv-environment/55932575#55932575", "title": "Cannot switch gem versions in an rbenv environment", "body": "<p>you should use <a href=\"https://bundler.io/\" rel=\"nofollow noreferrer\">bundler</a> to mange the rubygems dependencies specified in a Gemfile. for instance:</p>\n\n<pre><code>$ cat Gemfile\n# frozen_string_literal: true\n\nsource \"https://rubygems.org\"\n\ngem \"xcodeproj\", \"1.5.7\"\n</code></pre>\n\n<p>install them using bundler</p>\n\n<pre><code>$ bundle install --path gems\nFetching gem metadata from https://rubygems.org/...............\nResolving dependencies...\nFetching CFPropertyList 3.0.0\nInstalling CFPropertyList 3.0.0\nFetching atomos 0.1.3\nInstalling atomos 0.1.3\nUsing bundler 1.17.2\nFetching claide 1.0.2\nInstalling claide 1.0.2\nFetching colored2 3.1.2\nInstalling colored2 3.1.2\nFetching nanaimo 0.2.6\nInstalling nanaimo 0.2.6\nFetching xcodeproj 1.5.7\nInstalling xcodeproj 1.5.7\nBundle complete! 1 Gemfile dependency, 7 gems now installed.\nBundled gems are installed into `./gems`\n</code></pre>\n\n<p>then execute your rubygem using bundler</p>\n\n<pre><code>$ bundle exec xcodeproj --version\n1.5.7\n</code></pre>\n\n<p>note that when you are using rbenv and would like to execute a rubygem without bundler management, then you will have to make sure that for each rbenv version, you install your favorite gems. for instance, if you are using 2 different ruby versions and you like pry rubygem, then you will have to install pry for each ruby version.</p>\n"}], "owner": {"reputation": 4282, "user_id": 497403, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/070343c258641e3b9f27d77cd21c86ee?s=128&d=identicon&r=PG", "display_name": "David Airapetyan", "link": "https://stackoverflow.com/users/497403/david-airapetyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 55932575, "answer_count": 1, "score": 3, "last_activity_date": 1556772651, "creation_date": 1556647537, "last_edit_date": 1556648190, "question_id": 55926521, "link": "https://stackoverflow.com/questions/55926521/cannot-switch-gem-versions-in-an-rbenv-environment", "title": "Cannot switch gem versions in an rbenv environment", "body": "<p>I have rbenv 1.1.2 installed via Homebrew on my macOS 10.14.4.</p>\n\n<p>I am having trouble running gems at a version different from the latest available.</p>\n\n<p>For example, I have three versions of the xcodeproj gem installed (1.8.2, 1.8.1, 1.8.0, 1.5.7).</p>\n\n<p>If I run <code>xcodeproj --version</code>, I see 1.8.2, as expected.</p>\n\n<p>However, if I run <code>xcodeproj _1.5.7_ --version</code>, I also see 1.8.2, while expecting 1.5.7.</p>\n\n<p>Note that passing the version does something - if I pass an invalid version (e.g. <em>1.5.0</em>), I do get the \"can't find gem xcodeproj (= 1.5.0)\" error as expected.</p>\n\n<p>What can I do to be able to run previous versions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 614, "user_id": 7594860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XyeJ0.png?s=128&g=1", "display_name": "ekr990011", "link": "https://stackoverflow.com/users/7594860/ekr990011"}, "edited": false, "score": 0, "creation_date": 1556642030, "post_id": 55925236, "comment_id": 98504114, "body": "If you are using redis did you make sure that was shut down to? They get queued up and if they aren&#39;t queued in rails itself, say redis they are stored there even after a reset so they still run they next time they can. Oh wait my bad it is still running the old code is odd."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1556642171, "post_id": 55925236, "comment_id": 98504170, "body": "Try restarting resque and clearing the queues. <i>PS</i> this should not affect the rails console but the jobs which are queued. give it a try"}, {"owner": {"reputation": 516, "user_id": 1415989, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/55iWM.jpg?s=128&g=1", "display_name": "Charmi", "link": "https://stackoverflow.com/users/1415989/charmi"}, "edited": false, "score": 0, "creation_date": 1556642225, "post_id": 55925236, "comment_id": 98504194, "body": "I am running the code without queuing it and Redis is shutdown"}, {"owner": {"reputation": 516, "user_id": 1415989, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/55iWM.jpg?s=128&g=1", "display_name": "Charmi", "link": "https://stackoverflow.com/users/1415989/charmi"}, "edited": false, "score": 0, "creation_date": 1556642858, "post_id": 55925236, "comment_id": 98504494, "body": "ap File.open(&quot;./app/workers/something_worker.rb&quot;).read run under rails c shows the new modifications"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1556645025, "post_id": 55925236, "comment_id": 98505494, "body": "Are you using <code>spring</code> or <code>zeus</code>?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1556649914, "post_id": 55925236, "comment_id": 98507630, "body": "Just to be safe try <code>spring stop</code> before you restart the console, I personally just remove this gem"}], "answers": [{"comments": [{"owner": {"reputation": 2080, "user_id": 2356808, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/70738cfc6fa624504e7e245c532175c0?s=128&d=identicon&r=PG&f=1", "display_name": "Fay007", "link": "https://stackoverflow.com/users/2356808/fay007"}, "edited": false, "score": 0, "creation_date": 1584635613, "post_id": 55927280, "comment_id": 107503384, "body": "what does it do?"}], "tags": [], "owner": {"reputation": 516, "user_id": 1415989, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/55iWM.jpg?s=128&g=1", "display_name": "Charmi", "link": "https://stackoverflow.com/users/1415989/charmi"}, "is_accepted": false, "score": 1, "last_activity_date": 1556651153, "creation_date": 1556651153, "answer_id": 55927280, "question_id": 55925236, "link": "https://stackoverflow.com/questions/55925236/rails-console-executing-a-stale-copy-of-the-code/55927280#55927280", "title": "Rails console executing a stale copy of the code", "body": "<pre><code>spring stop\n</code></pre>\n\n<p>Solved the issue and rails console is running the latest code.</p>\n"}], "owner": {"reputation": 516, "user_id": 1415989, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/55iWM.jpg?s=128&g=1", "display_name": "Charmi", "link": "https://stackoverflow.com/users/1415989/charmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556651153, "creation_date": 1556641834, "last_edit_date": 1556642524, "question_id": 55925236, "link": "https://stackoverflow.com/questions/55925236/rails-console-executing-a-stale-copy-of-the-code", "title": "Rails console executing a stale copy of the code", "body": "<p>I have a strange issue with rails console. In fact, I am modifying the code of class function (static class).</p>\n\n<pre><code>class SomethingWorker\n  @queue = :resque_queue\n\n  def self.perform(method, *args)\n    send(method, *args)\n  end\n\n  def self.async(method, *args)\n   Resque.enqueue(SomethingWorker, method, *args)\n  end\n\n  def self.process_data\n    puts \"hello\"\n  end\nend\n</code></pre>\n\n<p>Sometimes, when I change the function code. It contain to execute stale (old) code. Even restarting rails console doesn't solve the issue.</p>\n\n<p>I verified that the files were saved and killed all the ruby processes.</p>\n\n<p>PS. the <code>self.process_data</code> isn't queued and I am just calling it from rails console:</p>\n\n<pre><code>SomethingWorker.process_data. \n</code></pre>\n\n<p>I discard any issue with resque (not running) and redis (down)</p>\n"}, {"tags": ["javascript", "ruby", "selenium-webdriver", "instagram", "watir"], "comments": [{"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 1, "creation_date": 1556641116, "post_id": 55924938, "comment_id": 98503682, "body": "Can you share the html of the <code>+</code> I believe there should be a input with file type which generally we use in other apps."}, {"owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "reply_to_user": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1556643133, "post_id": 55924938, "comment_id": 98504623, "body": "@supputuri I already try, one by one each form of page, it works only for &quot;image of profile&quot;, but not for send a post. I edit my post for html"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1557093792, "post_id": 55924938, "comment_id": 98640541, "body": "What about <a href=\"https://www.rubydoc.info/github/watir/watir-classic/Watir/FileField#set-instance_method\" rel=\"nofollow noreferrer\"><code>FileField#set</code></a>?"}, {"owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1557101757, "post_id": 55924938, "comment_id": 98641899, "body": "@orde same... it&#39;s not works. <code>send_keys</code> works on other classic form..."}, {"owner": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "edited": false, "score": 1, "creation_date": 1557129552, "post_id": 55924938, "comment_id": 98648420, "body": "The issue here is that Instagram wants to protect itself, from bots.  The posting of images via interaction has been disabled.  You can get around this issue via automation tools like AutoIt (for Windows).  From your screenshot I assume you have linux, there you have tools like xautomation - <a href=\"https://www.hoopajoo.net/projects/xautomation.html\" rel=\"nofollow noreferrer\">hoopajoo.net/projects/xautomation.html</a> or expect - <a href=\"https://core.tcl.tk/expect/index\" rel=\"nofollow noreferrer\">core.tcl.tk/expect/index</a>."}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1557168180, "post_id": 55924938, "comment_id": 98666673, "body": "I can not access that page. I can only display the navbar on the bottom on my android phone, I can run an emulator and debug that page with my laptop, but the code is all minified and unreadable... Once you click on the + button to upload a picture, on android an intent will be triggered which opens the android library. If you want to get real help, you should give us an explanation on how to reproduce your scenario so that we can start thinking about a solution."}, {"owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 1, "creation_date": 1557170404, "post_id": 55924938, "comment_id": 98667480, "body": "@FabrizioBertoglio the scenario is simple : open Watir on instagram, connect on my account, and I need to add picture (and text) to publish with it..."}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1557176991, "post_id": 55924938, "comment_id": 98669863, "body": "@Matrix Do you have a test account which can be shared?"}, {"owner": {"reputation": 6839, "user_id": 677518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK8mM.png?s=128&g=1", "display_name": "Ardesco", "link": "https://stackoverflow.com/users/677518/ardesco"}, "edited": false, "score": 1, "creation_date": 1557217004, "post_id": 55924938, "comment_id": 98680387, "body": "You cannot use Selenium to interact with OS level dialogue boxes, you will instead need to hook into the JS directly using a JavascriptExecutor.  If you provide the site you are trying to work with we would be able to provide more help"}, {"owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "reply_to_user": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1557234119, "post_id": 55924938, "comment_id": 98690107, "body": "@supputuri no I have only my personnal account :$"}, {"owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "reply_to_user": {"reputation": 6839, "user_id": 677518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK8mM.png?s=128&g=1", "display_name": "Ardesco", "link": "https://stackoverflow.com/users/677518/ardesco"}, "edited": false, "score": 0, "creation_date": 1557234247, "post_id": 55924938, "comment_id": 98690187, "body": "@Ardesco the site is Instagram, it said in my post ^^"}, {"owner": {"reputation": 6839, "user_id": 677518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK8mM.png?s=128&g=1", "display_name": "Ardesco", "link": "https://stackoverflow.com/users/677518/ardesco"}, "edited": false, "score": 1, "creation_date": 1557234522, "post_id": 55924938, "comment_id": 98690374, "body": "oops, missed that, will have a look later."}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1557430736, "post_id": 55924938, "comment_id": 98772806, "body": "How about adding an input file field to the form and attach the form submission event, by that way you can submit the path of the file directly using the custom input field."}], "answers": [{"comments": [{"owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "edited": false, "score": 0, "creation_date": 1557312084, "post_id": 56029274, "comment_id": 98719882, "body": "for 1 &amp; 2 proposition, it&#39;s for download, but in my case i&#39;m in upload. for the last, I discover what Instagram manage the upload files by JS, so Capybara can&#39;t do better than Watir :&#39;("}, {"owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "edited": false, "score": 0, "creation_date": 1557312170, "post_id": 56029274, "comment_id": 98719926, "body": "I don&#39;t know AutoIt or Sikuli, I will search... In fact a little script to interact with this windows will be perfect..."}, {"owner": {"reputation": 316, "user_id": 3306395, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1bd8cee72b705788cc732ccafc41a55?s=128&d=identicon&r=PG&f=1", "display_name": "karnesJ.R", "link": "https://stackoverflow.com/users/3306395/karnesj-r"}, "reply_to_user": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "edited": false, "score": 0, "creation_date": 1557428951, "post_id": 56029274, "comment_id": 98772005, "body": "@Matrix The idea behind the first and second propositions is to show that the method that is generally accepted to solve downloads (avoid invoking the OS dialogue by specifying a default path) is not tenable for doing file uploading. I have amended my answer to include a link to Sikuli and would appreciate it if you would accept this answer if you feel that it provided you with enough information to resolve your problem."}], "tags": [], "owner": {"reputation": 316, "user_id": 3306395, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1bd8cee72b705788cc732ccafc41a55?s=128&d=identicon&r=PG&f=1", "display_name": "karnesJ.R", "link": "https://stackoverflow.com/users/3306395/karnesj-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1557429099, "last_edit_date": 1592644375, "creation_date": 1557257097, "answer_id": 56029274, "question_id": 55924938, "link": "https://stackoverflow.com/questions/55924938/watir-ruby-file-upload-windows-interaction/56029274#56029274", "title": "watir ruby file upload windows interaction", "body": "<p>You aren't going to like the answer, but <code>Watir</code> will <strong>not</strong> interact with that window opened up by the OS in any way. Going a step further, Ruby itself does not interact with these OS level dialogues.</p>\n<p>There are a couple of things that you may want to reference to confirm this, and that's perfectly acceptable:</p>\n<ul>\n<li><a href=\"http://watir.com/guides/downloads/\" rel=\"nofollow noreferrer\">Watir's Philosophy on Downloads (and conversely Uploading)</a></li>\n<li><a href=\"https://stackoverflow.com/a/43166268/3306395\">An answer by Thomas Walpole explaining what I just did</a></li>\n<li><a href=\"https://www.rubydoc.info/github/jnicklas/capybara/Capybara%2FNode%2FActions:attach_file\" rel=\"nofollow noreferrer\">A possible solution using <code>Capybara::Node::Actions#attach_file</code></a></li>\n</ul>\n<p>In any case, you are attempting to interact with an object that does not have a way of being interacted with through Ruby, let alone Watir, and thus your desired solution is impossible.</p>\n<p>Your best case is the Capybara <code>attach_file</code> method. If that doesn't work, nothing is going to outside of a literal OS scripting language such as <code>AutoIt</code> or <code>Sikuli</code></p>\n<p>You can find the SikuliX project page <a href=\"http://sikulix.com/\" rel=\"nofollow noreferrer\">here</a>. DrapsTV did a roughly hour-long playlist about the setup and quickstart of SikuliX. The link to the first episode in the series is linked <a href=\"https://www.youtube.com/watch?v=VdCOg1bCmGo\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Good luck.</p>\n"}, {"comments": [{"owner": {"reputation": 6839, "user_id": 677518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK8mM.png?s=128&g=1", "display_name": "Ardesco", "link": "https://stackoverflow.com/users/677518/ardesco"}, "reply_to_user": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "edited": false, "score": 0, "creation_date": 1557478260, "post_id": 56048361, "comment_id": 98786508, "body": "can you show me the error you are seeing/a screenshot of the page after running the execute_script command?  When I log into Instagram with a browser I don&#39;t see the same screen you are seeing above so it&#39;s possible there is some slightly different markup."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1557492984, "post_id": 56048361, "comment_id": 98794289, "body": "Note that it should actually be <code>@browser.file_field</code> (with identifiers if needed)"}, {"owner": {"reputation": 6839, "user_id": 677518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK8mM.png?s=128&g=1", "display_name": "Ardesco", "link": "https://stackoverflow.com/users/677518/ardesco"}, "edited": false, "score": 0, "creation_date": 1557493919, "post_id": 56048361, "comment_id": 98794780, "body": "Looks like I missed that when going through the docs, updated."}], "tags": [], "owner": {"reputation": 6839, "user_id": 677518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK8mM.png?s=128&g=1", "display_name": "Ardesco", "link": "https://stackoverflow.com/users/677518/ardesco"}, "is_accepted": false, "score": 1, "last_activity_date": 1557493917, "last_edit_date": 1557493917, "creation_date": 1557346284, "answer_id": 56048361, "question_id": 55924938, "link": "https://stackoverflow.com/questions/55924938/watir-ruby-file-upload-windows-interaction/56048361#56048361", "title": "watir ruby file upload windows interaction", "body": "<p>I'm going to go with a bit of a JavaScript hack to expose the hidden <code>&lt;input type=\"file\"&gt;</code>.  The first thing to do is identify the input type file on the page, then use some JavaScript to make it visible.  Then once it is visible use send_keys to pass in the path to the local file and selenium should do the rest for you.</p>\n\n<pre><code>file_upload_element = @browser.file_field\n@browser.execute_script(\"return arguments[0].setAttribute( 'style', 'display: inline !important')\", file_upload_element)\nfile_upload_element.set(&lt;path_to_local_file&gt;)\n</code></pre>\n\n<p>Some caveats.  I don't use Watir, I've tried to write the above code based on the Watir documentation and the code you have provided, it is a guess though.  I can write it in a language I'm familiar with if that helps.  I am hoping it's close enough to point you in the right direction though.</p>\n"}, {"comments": [{"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 1, "creation_date": 1557715208, "post_id": 56105155, "comment_id": 98844364, "body": "This solution worked for <a href=\"https://stackoverflow.com/questions/56087759/python-3-selenium-os-how-to-upload-all-images-in-folder/56093862#56093862\">other user</a> but not on instagram."}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1558196526, "post_id": 56105155, "comment_id": 99024461, "body": "@Matrix Did you get a chance to test this approach?"}], "tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": false, "score": 0, "last_activity_date": 1557715078, "creation_date": 1557715078, "answer_id": 56105155, "question_id": 55924938, "link": "https://stackoverflow.com/questions/55924938/watir-ruby-file-upload-windows-interaction/56105155#56105155", "title": "watir ruby file upload windows interaction", "body": "<p>As mentioned the comments earlier, can you try appending the file input element to the html and then use that to upload the file.</p>\n\n<pre><code># get the frame element or any button that opens the file upload window\nele = driver.find_element_by_id(\"frame/button id goes here\")\n# add a hidden file input ( might have to change the onchange event based on the events associated to the button in above line as you don't have a form)\ndriver.execute_script(\"var x=  document.createElement('INPUT');x.setAttribute('type', 'file'); x.setAttribute('onchange','this.form.submit()');x.setAttribute('hidden', 'true'); arguments[0].appendChild(x);\",ele)\n# send the picture path here ( this should upload the file)\ndriver.find_element_by_xpath(\"//input[@type='file']\").send_keys(\"picture path should go here\")\n</code></pre>\n\n<p>Can you please try this and let me know your outcome.</p>\n"}, {"tags": [], "owner": {"reputation": 292, "user_id": 1487479, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1aa899e9772cdd977b9d0f60e1ba9daf?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1487479/nathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1569169245, "creation_date": 1569169245, "answer_id": 58051139, "question_id": 55924938, "link": "https://stackoverflow.com/questions/55924938/watir-ruby-file-upload-windows-interaction/58051139#58051139", "title": "watir ruby file upload windows interaction", "body": "<p><code>@browser.file_field.set  file_upload</code>  works for me</p>\n\n<p>I had to update my Chrome Driver which was little bit tricky on Windows.  Belows is my complete script for upload to a Dropbox File Request:</p>\n\n<pre><code>require 'watir'\n\n#setting the path to my updated ChromeDriver:\nSelenium::WebDriver::Chrome::Service.driver_path = 'C:\\#Ruby\\#no_pub\\install\\chromedriver.exe'\n\nclass Dropbox_Request\n    def initialize(url, file_upload)\n        @browser = Watir::Browser.new\n        @browser.goto url\n\n        @browser.file_field.set  file_upload\n        @browser.text_field(:name =&gt; 'fname').set \"first\" \n        @browser.text_field(:name =&gt; 'lname').set \"last\" \n        @browser.text_field(:name =&gt; 'email').set \"email@gmail.com\" \n        @browser.button(:class =&gt; [\"button-primary\", \"submission-form__submit\"]).click()\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "answer_count": 4, "score": 5, "last_activity_date": 1569169245, "creation_date": 1556640592, "last_edit_date": 1556644008, "question_id": 55924938, "link": "https://stackoverflow.com/questions/55924938/watir-ruby-file-upload-windows-interaction", "title": "watir ruby file upload windows interaction", "body": "<p>I try to upload an image on my instagram, so I need to select path for upload files\n<a href=\"https://i.stack.imgur.com/4Nj4y.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4Nj4y.png\" alt=\"enter image description here\"></a></p>\n\n<p>but I can't use <code>form.file_field.send_keys(path)</code> because Instagram manage upload via JS, so the form not exist, it's only when I click on button \"+\"  then the \"File Upload\" window appear.</p>\n\n<p>I try :</p>\n\n<pre><code> @browser.send_keys @path\n @browser.send_keys :enter\n</code></pre>\n\n<p>but not works too...</p>\n\n<p>I don't found a method to interact with this sub-windows \"File Upload\" to give the path of image.</p>\n\n<p>Any idea?</p>\n\n<p>EDIT :</p>\n\n<pre><code>&lt;nav class=\"NXc7H  f11OC \"&gt;&lt;div class=\"_8MQSO ZoygQ \"&gt;&lt;div class=\"\"&gt;&lt;div class=\"rBWT5\"&gt;&lt;/div&gt;&lt;div class=\"KGiwt\"&gt;&lt;div class=\"A8wCM\"&gt;&lt;div class=\"BvyAW\"&gt;&lt;div class=\"q02Nz\"&gt;&lt;a class=\"_0TPg\" href=\"/\"&gt;&lt;span class=\"glyphsSpriteHome__outline__24__grey_9 u-__7\" aria-label=\"Home\"&gt;&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class=\"q02Nz\"&gt;&lt;a class=\"_0TPg\" href=\"/explore/\"&gt;&lt;span class=\"glyphsSpriteSearch__outline__24__grey_9 u-__7\" aria-label=\"Search &amp;amp; Explore\"&gt;&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class=\"q02Nz _0TPg\" role=\"menuitem\" tabindex=\"0\"&gt;&lt;span class=\"glyphsSpriteNew_post__outline__24__grey_9 u-__7\" aria-label=\"New Post\" style=\"\"&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=\"q02Nz\"&gt;&lt;a class=\"_0TPg \" href=\"/accounts/activity/\"&gt;&lt;span class=\"glyphsSpriteHeart__outline__24__grey_9 u-__7\" aria-label=\"Activity\"&gt;&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class=\"q02Nz\"&gt;&lt;a class=\"_0TPg\" href=\"/tristan_grey_30/\"&gt;&lt;span class=\"glyphsSpriteUser__filled__24__grey_9 u-__7\" aria-label=\"Profile\"&gt;&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;form class=\"Q9en_\" enctype=\"multipart/form-data\" method=\"POST\" role=\"presentation\"&gt;&lt;input accept=\"image/jpeg\" class=\"tb_sK\" type=\"file\"&gt;&lt;/form&gt;&lt;/div&gt;&lt;/div&gt;&lt;/nav&gt;\n</code></pre>\n\n<p>if I try using the <code>&lt;form&gt;</code> contain in <code>&lt;nav&gt;</code>, nothing happen, there is onClick event on \"+\" :</p>\n\n<pre><code>{\n  !0 !== this.$_MobileNav2 &amp;&amp; (this.$_MobileNav2 = !0, r(d[1]).logAction_DEPRECATED('cameraIconClick'), this.$_MobileNav3 ? (this.$_MobileNav3.selectFile(), this.props.onStartCreation()) : (i(d[2])('No image form'), this.props.onImageFormError()), this.$_MobileNav2 = !1)\n}\n</code></pre>\n\n<p>It's manage by JS I think...</p>\n"}, {"tags": ["ruby", "sinatra", "nokogiri"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1556639774, "post_id": 55924393, "comment_id": 98503018, "body": "You mean &quot;I want it to fail elegantly, not crash out&quot; presumably. You can&#39;t crawl a site that&#39;s down."}, {"owner": {"reputation": 47, "user_id": 8115335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42ff71d9ca5de7b3adcf9292a8ebc36?s=128&d=identicon&r=PG&f=1", "display_name": "ZeeZee", "link": "https://stackoverflow.com/users/8115335/zeezee"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1556641326, "post_id": 55924393, "comment_id": 98503800, "body": "Yes, I want it to fail elegantly, so is it possible to print &quot; the crawled site is down&quot; or something like this when the site is not reached?"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 1, "creation_date": 1556641901, "post_id": 55924393, "comment_id": 98504049, "body": "@ZeeZee Instead of <code>open(&#39;url&#39;)</code> you can use ruby <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/net/http/rdoc/Net/HTTP.html\" rel=\"nofollow noreferrer\"><code>Net::HTTP</code></a> approach or some other gem like <a href=\"https://github.com/jnunemaker/httparty\" rel=\"nofollow noreferrer\"><code>httparty</code></a>, <a href=\"https://github.com/lostisland/faraday\" rel=\"nofollow noreferrer\"><code>faraday</code></a> and such so send a request and check <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status\" rel=\"nofollow noreferrer\"><code>response http code</code></a>. If its 500 you print something out. Check out this article on <a href=\"https://www.rubyguides.com/2018/08/ruby-http-request/\" rel=\"nofollow noreferrer\"><code>how to make http requests in ruby</code></a>"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 2, "creation_date": 1556642097, "post_id": 55924393, "comment_id": 98504135, "body": "Or you just catch an error <code>open(&#39;url&#39;)</code> raises with <a href=\"http://rubylearning.com/satishtalim/ruby_exceptions.html\" rel=\"nofollow noreferrer\"><code>begin-rescue block</code></a>. Your app crashes because you dont handle that"}, {"owner": {"reputation": 1966, "user_id": 3367343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HHfSU.jpg?s=128&g=1", "display_name": "Travis Hohl", "link": "https://stackoverflow.com/users/3367343/travis-hohl"}, "edited": false, "score": 1, "creation_date": 1556642888, "post_id": 55924393, "comment_id": 98504507, "body": "Have you considered creating a background task that would periodically crawl the third-party website and store a local copy of the data, either in a database or on the local file system (depending on its size and format). If your app always references the local copy, it could continue working even when the third-party website is down."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1558646559, "post_id": 55924393, "comment_id": 99180169, "body": "See <a href=\"https://stackoverflow.com/q/21081639/128421\">stackoverflow.com/q/21081639/128421</a>. Ping the other device prior to trying to connect. If you can&#39;t ping it then loop and sleep some appropriate amount of time to avoid deluging that device with ping requests possibly swamping it or irritating its, or your, network admin."}, {"owner": {"reputation": 47, "user_id": 8115335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42ff71d9ca5de7b3adcf9292a8ebc36?s=128&d=identicon&r=PG&f=1", "display_name": "ZeeZee", "link": "https://stackoverflow.com/users/8115335/zeezee"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1558960462, "post_id": 55924393, "comment_id": 99259958, "body": "Thank you @theTinMan, I will have a look at."}], "owner": {"reputation": 47, "user_id": 8115335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42ff71d9ca5de7b3adcf9292a8ebc36?s=128&d=identicon&r=PG&f=1", "display_name": "ZeeZee", "link": "https://stackoverflow.com/users/8115335/zeezee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558655062, "creation_date": 1556638675, "last_edit_date": 1558655062, "question_id": 55924393, "link": "https://stackoverflow.com/questions/55924393/how-to-avoid-receiving-an-error-message-when-the-crawled-website-is-down", "title": "How to avoid receiving an error message when the crawled website is down", "body": "<p>I am parsing some data from a website. Today the website was down with a 500 error and my application was down too because of the 500 issue.</p>\n\n<p>I tried to use <code>x ? x : \"not available\"</code> but it gave me the same result, the application was down. How can I get my code to work even if the website is down?</p>\n\n<pre><code>num = Nokogiri::HTML (open('https://quotes.wsj.com/ETFM'))\n@smh = num.css('.cr_data_collection') ? num.css('.cr_data_collection')[1].css('.data_data')[0].text : \" details are not available\"\n</code></pre>\n"}, {"tags": ["ruby", "queue", "sidekiq"], "answers": [{"tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": true, "score": 0, "last_activity_date": 1556714142, "creation_date": 1556714142, "answer_id": 55936383, "question_id": 55924192, "link": "https://stackoverflow.com/questions/55924192/getting-infos-about-a-specific-queue-in-sidekiq/55936383#55936383", "title": "Getting infos about a specific queue in sidekiq", "body": "<p>Sidekiq does not persist those numbers per queue.  You can construct them using the Statsd support in Sidekiq Pro, as it does tag each perform with the associated queue. <a href=\"https://github.com/mperham/sidekiq/wiki/Pro-Metrics#tags\" rel=\"nofollow noreferrer\">https://github.com/mperham/sidekiq/wiki/Pro-Metrics#tags</a></p>\n"}], "owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 55936383, "answer_count": 1, "score": 1, "last_activity_date": 1556714142, "creation_date": 1556637900, "question_id": 55924192, "link": "https://stackoverflow.com/questions/55924192/getting-infos-about-a-specific-queue-in-sidekiq", "title": "Getting infos about a specific queue in sidekiq", "body": "<p>If you run <code>stats = Sidekiq::Stats.new</code>, I get a lot of interesting data about my jobs :</p>\n\n<pre><code>  {:processed=&gt;84063, :failed=&gt;120, :scheduled_size=&gt;0, :retry_size=&gt;0, :dead_size=&gt;7, :processes_size=&gt;3, :default_queue_latency=&gt;0, :workers_size=&gt;0, :enqueued=&gt;0}&gt;\n</code></pre>\n\n<p>Im trying to get the same infos (number of processed jobs, failed...) but for a specific queue.\nI dont see how to get this info from there : </p>\n\n<pre><code>https://github.com/mperham/sidekiq/wiki/API#queue\n</code></pre>\n\n<p>For instance how do you get the number of jobs that were processed on a specific queue and my generally any info for a specific queue as in Stats</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 797, "user_id": 1025856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4198e58cc6ba91c93c24ddd3d58401a?s=128&d=identicon&r=PG", "display_name": "mb52089", "link": "https://stackoverflow.com/users/1025856/mb52089"}, "edited": false, "score": 0, "creation_date": 1556643550, "post_id": 55923824, "comment_id": 98504841, "body": "Thank you.  I wasn&#39;t sure how to access associated encounter fields from a GoalAssessment object by just using active record assocations.  I wasn&#39;t able to use GoalAssessment.where(encounter_date: @start_date..@end_date)"}, {"owner": {"reputation": 797, "user_id": 1025856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4198e58cc6ba91c93c24ddd3d58401a?s=128&d=identicon&r=PG", "display_name": "mb52089", "link": "https://stackoverflow.com/users/1025856/mb52089"}, "edited": false, "score": 0, "creation_date": 1556660268, "post_id": 55923824, "comment_id": 98511529, "body": "Yes.  Thanks very much!"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 1, "last_activity_date": 1556648083, "last_edit_date": 1556648083, "creation_date": 1556636725, "answer_id": 55923824, "question_id": 55923709, "link": "https://stackoverflow.com/questions/55923709/rails-find-model-objects-where-foreign-key-date-within-certain-range/55923824#55923824", "title": "rails: find model objects where foreign key date within certain range", "body": "<p>You're using <code>joins</code> incorrectly. The condition is expressed in the where clause. Otherwise, if you want to add the condition to the join part, you need to fully express the join part with a string or with arel. Try</p>\n\n<pre><code>GoalAssessment.joins(:encounter).\n    where(encounters: {encounter_date: @start_date..@end_date})\n</code></pre>\n"}], "owner": {"reputation": 797, "user_id": 1025856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4198e58cc6ba91c93c24ddd3d58401a?s=128&d=identicon&r=PG", "display_name": "mb52089", "link": "https://stackoverflow.com/users/1025856/mb52089"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 55923824, "answer_count": 1, "score": 0, "last_activity_date": 1556648083, "creation_date": 1556636383, "last_edit_date": 1556636425, "question_id": 55923709, "link": "https://stackoverflow.com/questions/55923709/rails-find-model-objects-where-foreign-key-date-within-certain-range", "title": "rails: find model objects where foreign key date within certain range", "body": "<p>I have a model GoalAssessments with a foreign key encounter_id.  The Encounter model has an encounter_date.  I want to find all instances of GoalAssessment that have an encounter_date within a certain range of dates.  I've tried the following join:</p>\n\n<pre><code>GoalAssessments.joins(encounter: {encounter_date: @start_date..@end_date})\n</code></pre>\n\n<p>This generates an active record relation without error, but then when I try to iterate over the active record relation, I get an <code>ActiveRecord::ConfigurationError</code>.</p>\n\n<p>Any help is appreciated.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1556636029, "post_id": 55923318, "comment_id": 98500842, "body": "What exactly is the problem?"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 11270621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A25T_aSa0L8/AAAAAAAAAAI/AAAAAAAADxo/tyyosvUvh-s/photo.jpg?sz=128", "display_name": "L&#233;o-Paul Dubourg", "link": "https://stackoverflow.com/users/11270621/l%c3%a9o-paul-dubourg"}, "edited": false, "score": 0, "creation_date": 1556720139, "post_id": 55923767, "comment_id": 98527993, "body": "thanks for the answer, but my question is more about controllers, I don&#39;t know what to write to send the data to my database if the choice is multiple"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1556636570, "creation_date": 1556636570, "answer_id": 55923767, "question_id": 55923318, "link": "https://stackoverflow.com/questions/55923318/how-to-creat-a-checkbox-with-array/55923767#55923767", "title": "How to creat a checkbox with array", "body": "<p>Use one of these variants:</p>\n\n<pre><code>&lt;% @values = [\"Power\", \"Independance\", \"Tradition\"] %&gt;\n&lt;% @values.each do |value| %&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;% values = [\"Power\", \"Independance\", \"Tradition\"] %&gt;\n&lt;% values.each do |value| %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 11270621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A25T_aSa0L8/AAAAAAAAAAI/AAAAAAAADxo/tyyosvUvh-s/photo.jpg?sz=128", "display_name": "L&#233;o-Paul Dubourg", "link": "https://stackoverflow.com/users/11270621/l%c3%a9o-paul-dubourg"}, "edited": false, "score": 0, "creation_date": 1556720153, "post_id": 55924182, "comment_id": 98528001, "body": "thanks for the answer, but my question is more about controllers, I don&#39;t know what to write to send the data to my database if the choice is multiple"}], "tags": [], "owner": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "is_accepted": false, "score": 0, "last_activity_date": 1556637846, "creation_date": 1556637846, "answer_id": 55924182, "question_id": 55923318, "link": "https://stackoverflow.com/questions/55923318/how-to-creat-a-checkbox-with-array/55924182#55924182", "title": "How to creat a checkbox with array", "body": "<p>This is a short and simple way if your array is short.</p>\n\n<p></p>\n\n<pre><code>[\"Power\", \"Independance\", \"Tradition\"].each do |value|%&gt;\n  &lt;div&gt;\n    &lt;input type=\"checkbox\" id=\"&lt;%= value %&gt;\" name=\"&lt;%= value %&gt;\"&gt;\n    &lt;label for=\"&lt;%= value %&gt;\"&gt;&lt;%= value %&gt;&lt;/label&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;button class=\"btn btn-success\" type=\"submit\"&gt;\n  Validate\n&lt;/button&gt;\n</code></pre>\n\n<p>Otherwise, you can create a constant under your model or any other module such as:</p>\n\n<pre><code>class ModelA &lt; ApplicationRecord\n  CHOICES = [\"Power\", \"Independance\", \"Tradition\"].freeze \nend\n</code></pre>\n\n<p>And then inside your view, you use the constant as in:</p>\n\n<pre><code>ModelA::CHOICES.each do |value|%&gt;\n  &lt;div&gt;\n    &lt;input type=\"checkbox\" id=\"&lt;%= value %&gt;\" name=\"&lt;%= value %&gt;\"&gt;\n    &lt;label for=\"&lt;%= value %&gt;\"&gt;&lt;%= value %&gt;&lt;/label&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;button class=\"btn btn-success\" type=\"submit\"&gt;\n  Validate\n&lt;/button&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 11270621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A25T_aSa0L8/AAAAAAAAAAI/AAAAAAAADxo/tyyosvUvh-s/photo.jpg?sz=128", "display_name": "L&#233;o-Paul Dubourg", "link": "https://stackoverflow.com/users/11270621/l%c3%a9o-paul-dubourg"}, "edited": false, "score": 0, "creation_date": 1556803760, "post_id": 55952185, "comment_id": 98559020, "body": "thank you, I fixed the first two problems, these errors were only on this forum because I simplified my real code to highlight only my problem,  so I made mistakes of carelessness. Nevertheless I updated my question and removed the different errors and when I subbit, the checkbox data does not send to my bdd.  my controller is as follows:   <code>class ResultvaluesController &lt; ApplicationController   def resultvalue_params      params.require(:resultvalue).permit(:values)  end end </code>"}], "tags": [], "owner": {"reputation": 1, "user_id": 5423843, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yt0iPtget-E/AAAAAAAAAAI/AAAAAAAAEFI/JE7ARtEpLAE/photo.jpg?sz=128", "display_name": "Husz&#225;k Rich&#225;rd", "link": "https://stackoverflow.com/users/5423843/husz%c3%a1k-rich%c3%a1rd"}, "is_accepted": false, "score": 0, "last_activity_date": 1556799386, "last_edit_date": 1556799386, "creation_date": 1556799078, "answer_id": 55952185, "question_id": 55923318, "link": "https://stackoverflow.com/questions/55923318/how-to-creat-a-checkbox-with-array/55952185#55952185", "title": "How to creat a checkbox with array", "body": "<p>There were two problems.</p>\n\n<ol>\n<li>Choose which variable you want to use: @values or values.</li>\n<li>You do not need = in the first line, unless you want to make it visible on the view.</li>\n</ol>\n\n<pre><code>    &lt;%= values =[\"Power\", \"Independance\", \"Tradition\"] %&gt;\n    &lt;% @values.each do |value|%&gt;\n      &lt;div&gt;\n        &lt;input type=\"checkbox\" id=\"&lt;%= value %&gt;\" name=\"&lt;%= value %&gt;\"&gt;\n        &lt;label for=\"&lt;%= value %&gt;\"&gt;&lt;%= value %&gt;&lt;/label&gt;\n      &lt;/div&gt;\n     &lt;% end %&gt;\n    &lt;button class=\"btn btn-success\" type=\"submit\"&gt;\n        Validate\n    &lt;/button&gt;\n</code></pre>\n\n<p>This will make your view work.</p>\n\n<p>After this, you need to have form, which will post to the corresponding controller action.</p>\n\n<p>After that, you can save your data in the controller from parameters, just like: User.update(power: params[:Power])</p>\n\n<p>I suggest to take a look at this:\n<a href=\"https://guides.rubyonrails.org/active_record_basics.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/active_record_basics.html</a></p>\n\n<p>This is one of the best places to start:\n<a href=\"https://www.tutorialspoint.com/ruby-on-rails\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/ruby-on-rails</a></p>\n"}], "owner": {"reputation": 59, "user_id": 11270621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A25T_aSa0L8/AAAAAAAAAAI/AAAAAAAADxo/tyyosvUvh-s/photo.jpg?sz=128", "display_name": "L&#233;o-Paul Dubourg", "link": "https://stackoverflow.com/users/11270621/l%c3%a9o-paul-dubourg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 1, "answer_count": 3, "score": -1, "last_activity_date": 1556805876, "creation_date": 1556635132, "last_edit_date": 1556805876, "question_id": 55923318, "link": "https://stackoverflow.com/questions/55923318/how-to-creat-a-checkbox-with-array", "title": "How to creat a checkbox with array", "body": "<p>I want to display several options to my user and that he can choose one or more otions</p>\n\n<p><strong>I want upload the check in my bdd</strong></p>\n\n<p>this is idea of the form</p>\n\n<pre><code>#views/values/new.html.erb*\n\n&lt;% @values =[\"Power\", \"Independance\", \"Tradition\"] %&gt;\n&lt;%= form_for @resultvalue do |f| %&gt;\n   &lt;% @values.each do | value | %&gt;\n       &lt;%= f.check_box :values, { multiple: true }, value, false %&gt;\n       &lt;%= f.label value %&gt;\n   &lt;% end %&gt;\n   &lt;%= f.submit%&gt;  \n&lt;% end %&gt;\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#controller/resultvalue_controller.rb\n\nclass ResultvaluesController &lt; ApplicationController\n[...]\n def resultvalue_params\n     params.require(:resultvalue).permit(:values)\n end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#models/resultvalue.rb\n\nclass Resultvalue &lt; ApplicationRecord\n    serialize :values, Array \nend\n</code></pre>\n\n<p>My question is about  the controller, I don't know what to write to send the data to my database if the choice is multiple</p>\n"}, {"tags": ["python", "ios", "ruby", "automation", "target"], "answers": [{"tags": [], "owner": {"reputation": 291, "user_id": 9149350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/huRNv.png?s=128&g=1", "display_name": "Mina Gerges", "link": "https://stackoverflow.com/users/9149350/mina-gerges"}, "is_accepted": false, "score": 0, "last_activity_date": 1556635071, "creation_date": 1556635071, "answer_id": 55923299, "question_id": 55923185, "link": "https://stackoverflow.com/questions/55923185/how-to-create-new-xcode-target-automatically-for-existing-project/55923299#55923299", "title": "How to create new xcode target automatically for existing project", "body": "<p>I have a project and i need to do the same in order to use it to CI. I need to do it without Xcode.</p>\n"}], "owner": {"reputation": 130, "user_id": 10867948, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RwsQE6qGiaU/AAAAAAAAAAI/AAAAAAAAACE/2vSrOfEwaUA/photo.jpg?sz=128", "display_name": "Michael Maher", "link": "https://stackoverflow.com/users/10867948/michael-maher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556635071, "creation_date": 1556634708, "question_id": 55923185, "link": "https://stackoverflow.com/questions/55923185/how-to-create-new-xcode-target-automatically-for-existing-project", "title": "How to create new xcode target automatically for existing project", "body": "<p>In need a script or a tool to create a new xcode target, assets folder and info.plist for that target. for existing xcode project without needing to do that manually via xcode</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556632734, "post_id": 55921944, "comment_id": 98498819, "body": "Can you please post the full code structure of your app and spec files?"}, {"owner": {"reputation": 83, "user_id": 10387815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d983763c0d811879e296fc0830ada974?s=128&d=identicon&r=PG&f=1", "display_name": "Krzynek", "link": "https://stackoverflow.com/users/10387815/krzynek"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556633336, "post_id": 55921944, "comment_id": 98499222, "body": "Hey, I&#39;ve just edited the post with all the code. If you use .gets (commented out) all the tests will work again. I need to use ARGV though."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556633623, "post_id": 55921944, "comment_id": 98499397, "body": "what is your file structure?  You combined app and spec in one file... that can&#39;t be right?"}, {"owner": {"reputation": 83, "user_id": 10387815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d983763c0d811879e296fc0830ada974?s=128&d=identicon&r=PG&f=1", "display_name": "Krzynek", "link": "https://stackoverflow.com/users/10387815/krzynek"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556633690, "post_id": 55921944, "comment_id": 98499435, "body": "Hey, there are 2 files. prime_factors.rb and prime_factors_spec.rb. First one has 3 methods."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 10387815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d983763c0d811879e296fc0830ada974?s=128&d=identicon&r=PG&f=1", "display_name": "Krzynek", "link": "https://stackoverflow.com/users/10387815/krzynek"}, "edited": false, "score": 0, "creation_date": 1556634798, "post_id": 55922859, "comment_id": 98500078, "body": "Many thanks! I have moved both of my methods to separate files and required them where needed. Do you think is better to wrap them up classes ?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 83, "user_id": 10387815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d983763c0d811879e296fc0830ada974?s=128&d=identicon&r=PG&f=1", "display_name": "Krzynek", "link": "https://stackoverflow.com/users/10387815/krzynek"}, "edited": false, "score": 0, "creation_date": 1556783524, "post_id": 55922859, "comment_id": 98548399, "body": "Technically speaking, every method is in some class, but: Placing methods on top level might cause troubles if the applications gets larger, due to name clashes. Depending on what you want to do with your Prime Numbers, a PrimeNumber class with certain properties might make sense. If you just want to bundle your methods, you could also put them into a Module representing a singleton class (<code>Module PrimeNumbers; extend self; def YOUR_METHOD1; ...; end; end</code>)."}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": true, "score": 2, "last_activity_date": 1556633647, "creation_date": 1556633647, "answer_id": 55922859, "question_id": 55921944, "link": "https://stackoverflow.com/questions/55921944/rspec-tests-failing-due-to-argv-used-instead-of-gets/55922859#55922859", "title": "RSpec tests failing due to ARGV used instead of .gets", "body": "<p>When you <code>require</code> this program (what you seem to do), it evaluates <code>ARGV.last</code> which returns nil, because ARGV (likely) is an empty array. </p>\n\n<p>I would place the definition of <code>prime_numbers</code> into a separate file and require this file in your rspec test.</p>\n"}, {"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1556634655, "last_edit_date": 1556634655, "creation_date": 1556634149, "answer_id": 55923001, "question_id": 55921944, "link": "https://stackoverflow.com/questions/55921944/rspec-tests-failing-due-to-argv-used-instead-of-gets/55923001#55923001", "title": "RSpec tests failing due to ARGV used instead of .gets", "body": "<p>The previous answer gives you the correct approach, however if you want to test your program using command line args, you would do it like this.  For simplicity I removed flags to command line arguments and just pass 2 numbers but you could modify this if you wanted:</p>\n\n<pre><code>#app.rb\n\nfirst_number = ARGV.first.to_i\ngiven_number = ARGV.last.to_i\n\narr = []\n\ndef prime_numbers(first_number, given_number, arr)\n\n  while(first_number &lt;= given_number)\n    prime_number = true\n    x = 2\n\n    while (x &lt;= first_number / 2)\n      if (first_number % x == 0)\n        prime_number = false\n        break\n      end\n      x += 1\n    end\n\n    if prime_number\n      arr &lt;&lt; first_number\n    end\n\n    first_number += 1\n  end\n\n  return arr\n\nend\n\nprint prime_numbers(first_number, given_number, arr)\n</code></pre>\n\n<p>And your spec file</p>\n\n<pre><code>#spec/app_spec.rb\n\nRSpec.describe 'prime_factors' do\n  let(:exec) { File.expand_path('../app.rb', File.dirname(__FILE__)) }\n\n  describe 'app' do\n    it 'returns a list of prime numbers for a range 2 - 10 ' do\n      given_number = 10\n      res = `ruby #{exec} #{2} #{10}`\n      expect(res).to eq '[2, 3, 5, 7]'\n    end\n  end\nend\n</code></pre>\n\n<p>If you want to pass flags in your command line args you can parse the numbers with something like this:</p>\n\n<pre><code>args = ARGV.map(&amp;:to_i).select{|arg| arg &gt; 0}\n\nfirst_number = args.first\ngiven_number = args.last\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 10387815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d983763c0d811879e296fc0830ada974?s=128&d=identicon&r=PG&f=1", "display_name": "Krzynek", "link": "https://stackoverflow.com/users/10387815/krzynek"}, "is_accepted": false, "score": 0, "last_activity_date": 1556634930, "creation_date": 1556634930, "answer_id": 55923250, "question_id": 55921944, "link": "https://stackoverflow.com/questions/55921944/rspec-tests-failing-due-to-argv-used-instead-of-gets/55923250#55923250", "title": "RSpec tests failing due to ARGV used instead of .gets", "body": "<p>I have split prime_factors.rb into 3 separate files and required them in prime_factors_spec.rb accordingly. Many thanks to you all!</p>\n"}], "owner": {"reputation": 83, "user_id": 10387815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d983763c0d811879e296fc0830ada974?s=128&d=identicon&r=PG&f=1", "display_name": "Krzynek", "link": "https://stackoverflow.com/users/10387815/krzynek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 55922859, "answer_count": 3, "score": 1, "last_activity_date": 1557004566, "creation_date": 1556630715, "last_edit_date": 1557004566, "question_id": 55921944, "link": "https://stackoverflow.com/questions/55921944/rspec-tests-failing-due-to-argv-used-instead-of-gets", "title": "RSpec tests failing due to ARGV used instead of .gets", "body": "<p>I'm building a program that needs to take a number from the user but user will pass it as a parameter in the console when running a program like this: \" ruby name_of_program.rb --number 25 \" I have used gets.chomp() initially but as it was not collecting the parameter 25 I've changed that quickly to ARGV. All of my RSpec test are failing and I get the following message: TypeError: nil can't be coerced into Integer. I'm trying to find out why. My program works as intended. How can I get my tests working again ?</p>\n\n<pre><code>first_number = 2\n\ngiven_number = ARGV.last\ngiven_number = given_number.to_i\n\narr = []\n\ndef prime_numbers(first_number, given_number, arr)\n\n  while(first_number &lt;= given_number)\n    prime_number = true\n    x = 2\n\n    while (x &lt;= first_number / 2)\n      if (first_number % x == 0)\n        prime_number = false\n        break\n      end\n      x += 1\n    end\n\n    if prime_number\n      arr &lt;&lt; first_number\n    end\n\n    first_number += 1\n  end\n\n  return arr\n\nend\n</code></pre>\n\n<p>Example test:</p>\n\n<pre><code>require 'prime_factors'\n\nRSpec.describe 'prime_factors' do\n  let(:array_one) { [2, 3, 5, 7] }\n  let(:empty_array) { [] }\n  let(:first_number) { 2 }\n\n      context 'prime_numbers function' do\n\n        it 'returns a list of prime numbers for a range 2 - 10 ' do\n          given_number = 10\n          expect(prime_numbers(first_number, given_number, empty_array)).to eq [2, 3, 5, 7]\n        end\n\n\n    end\n    end\n</code></pre>\n"}, {"tags": ["java", "android", "ruby-on-rails", "ruby", "firebase-cloud-messaging"], "comments": [{"owner": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "edited": false, "score": 0, "creation_date": 1556627488, "post_id": 55920997, "comment_id": 98495674, "body": "Have you added <code>MyFirebaseMessagingService</code> to the AndroidManifest ? Read here: <a href=\"https://firebase.google.com/docs/cloud-messaging/android/receive\" rel=\"nofollow noreferrer\">firebase.google.com/docs/cloud-messaging/android/receive</a>"}, {"owner": {"reputation": 109, "user_id": 9839435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc7581824cb203d70214aee2bbc914a?s=128&d=identicon&r=PG&f=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/9839435/frank"}, "reply_to_user": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "edited": false, "score": 0, "creation_date": 1556627589, "post_id": 55920997, "comment_id": 98495727, "body": "Yes , I did it like this :   &lt;application         android:allowBackup=&quot;true&quot;         android:icon=&quot;@mipmap/mikz_ic_launcher&quot;         android:label=&quot;@string/app_name&quot;         android:supportsRtl=&quot;true&quot;         android:theme=&quot;@style/AppTheme&quot;&gt;         &lt;service             android:name=&quot;.java.MyFirebaseMessagingService&quot;             android:exported=&quot;false&quot;&gt;             &lt;intent-filter&gt;                 &lt;action android:name=&quot;com.google.firebase.MESSAGING_EVENT&quot; /&gt;             &lt;/intent-filter&gt;         &lt;/service&gt;         &lt;activity android:name=&quot;.MainActivity&quot;&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 860, "user_id": 373859, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/jcV61.jpg?s=128&g=1", "display_name": "ggDeGreat", "link": "https://stackoverflow.com/users/373859/ggdegreat"}, "edited": false, "score": 1, "creation_date": 1580273136, "post_id": 55921745, "comment_id": 106039108, "body": "after 1 day research, i have found this solution worked for me. Thanks but i am curious why google suggest to add <code>.java.MyFirebaseMessagingService</code> instead of <code>com.google.firebase.messaging.FirebaseMessagingService</code>"}, {"owner": {"reputation": 8063, "user_id": 741156, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6819dd0de162410dcccd7b1b03bb5def?s=128&d=identicon&r=PG", "display_name": "Zalaboza", "link": "https://stackoverflow.com/users/741156/zalaboza"}, "edited": false, "score": 0, "creation_date": 1581190588, "post_id": 55921745, "comment_id": 106350673, "body": "wow thanks !, also wonder how come they suggest wrong name in docs !"}], "tags": [], "owner": {"reputation": 109, "user_id": 9839435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc7581824cb203d70214aee2bbc914a?s=128&d=identicon&r=PG&f=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/9839435/frank"}, "is_accepted": false, "score": 8, "last_activity_date": 1570019298, "last_edit_date": 1570019298, "creation_date": 1556630088, "answer_id": 55921745, "question_id": 55920997, "link": "https://stackoverflow.com/questions/55920997/android-app-is-shutting-down-when-i-send-a-push-notification-form-a-ruby-on-rail/55921745#55921745", "title": "Android App is shutting down when I send a push notification form a Ruby on Rails backend with FCM", "body": "<p>Already found my fault. I followed the guide on the firebase cloud messaging and in mine Androidmanifest the documentation says you need to pass this: </p>\n\n<pre><code>&lt;service\n  android:name=\".java.MyFirebaseMessagingService\"\n  android:exported=\"false\"&gt;\n  &lt;intent-filter&gt;\n    &lt;action android:name=\"com.google.firebase.MESSAGING_EVENT\" /&gt;\n&lt;/intent-filter&gt;\n</code></pre>\n\n<p></p>\n\n<p>but than it gives me a error that it can't find the class. After a little search if found that the android name was wrong: </p>\n\n<p>It should have been : </p>\n\n<pre><code>&lt;service\n        android:name=\"com.google.firebase.messaging.FirebaseMessagingService\"&gt;\n        android:exported=\"false\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"com.google.firebase.MESSAGING_EVENT\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/service&gt;\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 9839435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc7581824cb203d70214aee2bbc914a?s=128&d=identicon&r=PG&f=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/9839435/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1570019298, "creation_date": 1556627352, "last_edit_date": 1556630120, "question_id": 55920997, "link": "https://stackoverflow.com/questions/55920997/android-app-is-shutting-down-when-i-send-a-push-notification-form-a-ruby-on-rail", "title": "Android App is shutting down when I send a push notification form a Ruby on Rails backend with FCM", "body": "<p>I'm trying to send push notification messages using the FCM gem to a android phone. I'm able to get the device token and I think I set everything up the way it should. Only when I use my ruby back-end to send a test message I get the following response: </p>\n\n<pre><code>{:body=&gt;\"{\\\"multicast_id\\\":7171621681139926581,\\\"success\\\":1,\\\"failure\\\":0,\\\"canonical_ids\\\":0,\\\"results\\\":[{\\\"message_id\\\":\\\"0:1556626239337337%e087ffcde087ffcd\\\"}]}\", :headers=&gt;{\"content-type\"=&gt;[\"application/json; charset=UTF-8\"], \"date\"=&gt;[\"Tue, 30 Apr 2019 12:10:39 GMT\"], \"expires\"=&gt;[\"Tue, 30 Apr 2019 12:10:39 GMT\"], \"cache-control\"=&gt;[\"private, max-age=0\"], \"x-content-type-options\"=&gt;[\"nosniff\"], \"x-frame-options\"=&gt;[\"SAMEORIGIN\"], \"x-xss-protection\"=&gt;[\"1; mode=block\"], \"server\"=&gt;[\"GSE\"], \"alt-svc\"=&gt;[\"quic=\\\":443\\\"; ma=2592000; v=\\\"46,44,43,39\\\"\"], \"accept-ranges\"=&gt;[\"none\"], \"vary\"=&gt;[\"Accept-Encoding\"], \"connection\"=&gt;[\"close\"]}, :status_code=&gt;200, :response=&gt;\"success\", :canonical_ids=&gt;[], :not_registered_ids=&gt;[]}\n</code></pre>\n\n<p>but on the Phone I don't get a notification. </p>\n\n<p>my ruby backend looks like this:</p>\n\n<pre><code>fcm_client = FCM.new(server_key)\n\n    # options = {:notification =&gt; \"Test notification\",:data =&gt; {:message =&gt; \"This is a FCM Topic Message!\"}}\n    options = { \"notification\": {\n        \"title\": \"Portugal vs. Denmark\",\n        \"body\": \"5 to 1\"\n        }\n    }\n\n    user_device_ids.each_slice(20) do |device_ids|\n\n        response =  fcm_client.send_notification(device_ids, options)\n\n        p response\n    end\n</code></pre>\n\n<p>when the app is open it shuts down and I find this error:</p>\n\n<blockquote>\n  <p>java.lang.RuntimeException: Unable to instantiate service\n  NAME_OF_THE_APP.java.MyFirebaseMessagingService:\n  java.lang.ClassNotFoundException: Didn't find class\n  \"NAME_OF_THE_APP.java.MyFirebaseMessagingService\"</p>\n</blockquote>\n\n<p>Now I'm not a Java Expert So I don't know what is wrong at this point. I'm testing it on a Huawei Phone.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "edited": false, "score": 0, "creation_date": 1556626374, "post_id": 55920507, "comment_id": 98495058, "body": "Hi, can you post <code>tracks.length</code> and <code>search_string</code> value?"}, {"owner": {"reputation": 31, "user_id": 11496221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec620776ecc41fc7be6822a6cdafc19c?s=128&d=identicon&r=PG&f=1", "display_name": "HKeys34", "link": "https://stackoverflow.com/users/11496221/hkeys34"}, "reply_to_user": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "edited": false, "score": 0, "creation_date": 1556626470, "post_id": 55920507, "comment_id": 98495113, "body": "Hi, tracks.length = 3 and  search_string value = Sweet Caroline. This is found under &quot;Enter the track ame you wish to find&quot;"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1556628967, "post_id": 55920507, "comment_id": 98496532, "body": "<code>tracks.index { |track| track.name =~ &#47;#{search_string.chomp}&#47;i}</code> will find the index of a track where the name matches the regular expression of search string (case insensitive) using <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-index\" rel=\"nofollow noreferrer\"><code>Array#index</code></a> and <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-3D~\" rel=\"nofollow noreferrer\"><code>String#=~</code></a>"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1556631850, "post_id": 55920507, "comment_id": 98498270, "body": "What is the method <code>read_string</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1579340713, "last_edit_date": 1579340713, "creation_date": 1556632950, "answer_id": 55922655, "question_id": 55920507, "link": "https://stackoverflow.com/questions/55920507/unable-to-identify-if-an-array-contains-a-string/55922655#55922655", "title": "Unable to identify if an Array contains a string", "body": "<p>Your problem is that <code>album.tracks</code> is array of <code>Track</code> objects</p>\n\n<p>and you tried to check it like <code>album.tracks.include?(search_string)</code>. Of course, not includes.</p>\n\n<p>So your <code>index = -1</code> results in <code>\"Entry not Found\"</code>.</p>\n\n<p>Instead of <code>if tracks.include?(search_string)</code> you can use  </p>\n\n<pre><code>if tracks.map(&amp;:name).include?(search_string)\n</code></pre>\n\n<p>but you also need to solve another problem: names in your tracks have <code>\\n</code> in the end now.</p>\n\n<p>So instead of <code>track_name = music_file.gets</code> you need</p>\n\n<pre><code>track_name = music_file.gets.chomp\n</code></pre>\n\n<p>Hope this will be helpful.</p>\n"}], "owner": {"reputation": 31, "user_id": 11496221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec620776ecc41fc7be6822a6cdafc19c?s=128&d=identicon&r=PG&f=1", "display_name": "HKeys34", "link": "https://stackoverflow.com/users/11496221/hkeys34"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1579340713, "creation_date": 1556625613, "question_id": 55920507, "link": "https://stackoverflow.com/questions/55920507/unable-to-identify-if-an-array-contains-a-string", "title": "Unable to identify if an Array contains a string", "body": "<p>My Program is designed to read in album information from a .txt file, once the user inputs their desired track, the program checks an array to see if it contains that track. I have been successfully been able to read the tracks into the array, but my program cannot identify if a string lies in this array or not.</p>\n\n<p>The Ruby File</p>\n\n<pre><code>require './input_functions'\nmodule Genre\n  POP, CLASSIC, JAZZ, ROCK = *1..4\nend\n\n$genre_names = ['Null', 'Pop', 'Classic', 'Jazz', 'Rock']\n\nclass Album\n    attr_accessor :title, :artist, :genre, :tracks\n\n    def initialize (title, artist, genre)\n        # insert lines here\n        @title = title\n        @artist = artist\n        @genre = genre  \n    end\nend\n\nclass Track\n    attr_accessor :name, :location\n    def initialize (name, location)\n        @name = name\n        @location = location\n    end\nend\n\ndef read_track(music_file)\n    track_name = music_file.gets\n    track_location = music_file.gets\n    track = Track.new(track_name, track_location)\nend\n\n\ndef read_tracks(music_file)\n    tracks = Array.new\n    count = music_file.gets.to_i\n    index = 0\nwhile index &lt; count\n    tracks &lt;&lt; read_track(music_file)\n    index += 1\nend\n    tracks\nend\n\ndef print_tracks(tracks)\n    index = 0\n    while (index &lt; tracks.length)\n    puts 'Track Number ' + index.to_s + ' is:'\n    print_track(tracks[index])\n\n    index = index + 1\nend\n    tracks\nend\n\ndef read_album music_file\n    album_artist = music_file.gets\n    album_title = music_file.gets\n    album_genre = music_file.gets\n    album = Album.new(album_title, album_artist, album_genre)\n    album\nend\n\n\ndef print_album album\n\n    puts 'Album title is ' + album.title.to_s\n    puts 'Album artist is ' + album.artist.to_s\n    puts 'Genre is ' + album.genre.to_s\n    puts $genre_names[album.genre.to_i]\n    # print out the tracks\n    puts 'Tracks are ' + print_tracks(album.tracks).to_s\n\nend\n\n\ndef print_track track\n  puts('Track title is: ' + track.name.to_s)\n    puts('Track file location is: ' + track.location.to_s)\nend\n\n** This is where I am having my problem\n# search for track by name.\n# Returns the index of the track or -1 if not found\ndef search_for_track_name(tracks, search_string)\n    search_string = gets.chomp\n    index = 0\nwhile (index &lt; tracks.length)\n    tracks.include?(search_string)\n    index = index + 1\nend\n    if tracks.include?(search_string)\n        return index\n    else\n        index = -1\n\n    end\n    return index\nend\n\n\n# Reads in an Album from a file and then prints all the album\n# to the terminal\n\ndef main\n\n  music_file = File.new(\"album.txt\", \"r\")\n    if music_file\n    album = read_album(music_file)\n    album.tracks = read_tracks(music_file)\n  music_file.close()\n    end\n\n  search_string = read_string(\"Enter the track name you wish to find: \")\n  index = search_for_track_name(album.tracks, search_string)\n  if index.to_i &gt; -1\n    puts \"Found \" + album.tracks[index].name + \" at \" + index.to_s\n  else\n    puts \"Entry not Found\"\n  end\n    print_album(album)\nend\nmain\n\n</code></pre>\n\n<p>This is the .txt file</p>\n\n<pre><code>Neil Diamond\nGreatest Hits\n1\n3\nCrackling Rose\nsounds/01-Cracklin-rose.wav\nSoolaimon\nsounds/06-Soolaimon.wav\nSweet Caroline\nsounds/20-Sweet_Caroline.wav\n\n</code></pre>\n\n<p>When the user enters \"Sweet Caroline\", the program should return that it has found the track, instead it does:</p>\n\n<pre><code>Enter the track name you wish to find:\nSweet Caroline\n\nEntry not Found\nAlbum title is Greatest Hits\nAlbum artist is Neil Diamond\nGenre is 1\nPop\nTrack Number 0 is:\nTrack title is: Crackling Rose\nTrack file location is: sounds/01-Cracklin-rose.wav\nTrack Number 1 is:\nTrack title is: Soolaimon\nTrack file location is: sounds/06-Soolaimon.wav\nTrack Number 2 is:\nTrack title is: Sweet Caroline\nTrack file location is: sounds/20-Sweet_Caroline.wav\nTracks are [#&lt;Track:0x000000000331be58 @name=\"Crackling Rose\\n\", @location=\"sounds/01-Cracklin-rose.wav\\n\"&gt;, #&lt;Track:0x000000000331bdb8 @name=\"Soolaimon\\n\", @location=\"sounds/06-Soolaimon.wav\\n\"&gt;, #&lt;Track:0x000000000331bd18 @name=\"Sweet Caroline\\n\", @location=\"sounds/20-Sweet_Caroline.wav\\n\"&gt;]\n\n</code></pre>\n"}, {"tags": ["ruby", "git"], "comments": [{"owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 0, "creation_date": 1556625292, "post_id": 55920289, "comment_id": 98494464, "body": "I think you have to clone the repo first and <code>working_dir</code> refers to the local directory on your machine where you cloned the project. Could you give that a try?"}, {"owner": {"reputation": 34, "user_id": 2226653, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78cf12ddf9d6ac72738374643c135e14?s=128&d=identicon&r=PG", "display_name": "JohnSmith1976", "link": "https://stackoverflow.com/users/2226653/johnsmith1976"}, "reply_to_user": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 0, "creation_date": 1556625419, "post_id": 55920289, "comment_id": 98494525, "body": "@mbuechmann what would be the command for cloning? Or to be more specific, what would be the path to clone from?"}, {"owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 0, "creation_date": 1556625576, "post_id": 55920289, "comment_id": 98494619, "body": "Either do <code>git clone &lt;URI&gt;</code> on your command line, or use <code>Git.clone</code> from the git gem (see examples)."}], "answers": [{"comments": [{"owner": {"reputation": 34, "user_id": 2226653, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78cf12ddf9d6ac72738374643c135e14?s=128&d=identicon&r=PG", "display_name": "JohnSmith1976", "link": "https://stackoverflow.com/users/2226653/johnsmith1976"}, "edited": false, "score": 0, "creation_date": 1556644338, "post_id": 55921085, "comment_id": 98505209, "body": "Thanks @mechnicov, ok so the <code>working_dir</code> refers to a local path. But my question is rather how to retrieve code from a remote location, such as Github."}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 34, "user_id": 2226653, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78cf12ddf9d6ac72738374643c135e14?s=128&d=identicon&r=PG", "display_name": "JohnSmith1976", "link": "https://stackoverflow.com/users/2226653/johnsmith1976"}, "edited": false, "score": 0, "creation_date": 1556646033, "post_id": 55921085, "comment_id": 98505926, "body": "@JohnSmith1976, just look at the sources of this gem, this gem didn&#39;t read from remote location. You need to download or clone repo first."}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": true, "score": 0, "last_activity_date": 1556627663, "creation_date": 1556627663, "answer_id": 55921085, "question_id": 55920289, "link": "https://stackoverflow.com/questions/55920289/read-repository-source-code-files-through-the-ruby-git-gem/55921085#55921085", "title": "Read repository source code files through the Ruby git gem?", "body": "<p><code>working_dir</code> is directory of your project with Git.</p>\n\n<p>Says your project is in the <code>/home/john_smith_1976/awesome_project</code> folder.</p>\n\n<p>In this case use</p>\n\n<pre><code>require 'git'\ng = Git.open('/home/john_smith_1976/awesome_project')\n</code></pre>\n\n<p>After that for example you can use <code>g.grep('some_code')</code> etc.</p>\n"}], "owner": {"reputation": 34, "user_id": 2226653, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78cf12ddf9d6ac72738374643c135e14?s=128&d=identicon&r=PG", "display_name": "JohnSmith1976", "link": "https://stackoverflow.com/users/2226653/johnsmith1976"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 55921085, "answer_count": 1, "score": 0, "last_activity_date": 1556627663, "creation_date": 1556624868, "question_id": 55920289, "link": "https://stackoverflow.com/questions/55920289/read-repository-source-code-files-through-the-ruby-git-gem", "title": "Read repository source code files through the Ruby git gem?", "body": "<p>I want to get access to a repository's source code through <a href=\"https://github.com/ruby-git/ruby-git\" rel=\"nofollow noreferrer\">the git gem</a>. My goal is to go through the source code files and read their content.</p>\n\n<p>From <a href=\"https://github.com/ruby-git/ruby-git#examples\" rel=\"nofollow noreferrer\">the examples</a> it's unclear to me how I do this? I get the sense that I need to use <code>Git.open</code>, as shown here:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>g = Git.open(working_dir, :log =&gt; Logger.new(STDOUT))\n</code></pre>\n\n<p>But it's not clear to me what <code>working_dir</code> is. If I was to target the <a href=\"https://github.com/ruby-git/ruby-git\" rel=\"nofollow noreferrer\">github.com/ruby-git/ruby-git</a> project there are many ways to reference it. It could be any of these:</p>\n\n<pre><code>git@github.com:ruby-git/ruby-git.git\nhttps://github.com/ruby-git/ruby-git.git\nhttps://github.com/ruby-git/ruby-git\n</code></pre>\n\n<p>So please let me know if you know how I read the source code files from a repository.</p>\n"}, {"tags": ["arrays", "ruby", "methods", "enumeration"], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 1562842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/257e3fc15284fa043f2b840313bd8607?s=128&d=identicon&r=PG", "display_name": "brian-welch", "link": "https://stackoverflow.com/users/1562842/brian-welch"}, "edited": false, "score": 0, "creation_date": 1556617062, "post_id": 55917383, "comment_id": 98490155, "body": "hmm...  I understand your logic about affecting the origin and needing a duplicate.  But I couldn&#39;t get your suggestion to work on my sample data such as <code>[[0, 1], [2, 3], [0, 5]]</code>, this yielded <code>arr =&gt; []</code> - I will accept the answer, because it appears to work in some cases - I think I&#39;ll go with if/elsif conditionals to populate a new array instead"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 401, "user_id": 1562842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/257e3fc15284fa043f2b840313bd8607?s=128&d=identicon&r=PG", "display_name": "brian-welch", "link": "https://stackoverflow.com/users/1562842/brian-welch"}, "edited": false, "score": 0, "creation_date": 1556617846, "post_id": 55917383, "comment_id": 98490621, "body": "@brian-welch, I&#39;ve updated the answer. Hope this will helpful"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": true, "score": 0, "last_activity_date": 1556617804, "last_edit_date": 1556617804, "creation_date": 1556614819, "answer_id": 55917383, "question_id": 55917196, "link": "https://stackoverflow.com/questions/55917196/why-is-my-enumeration-stopping-after-first-rejection-in-ruby/55917383#55917383", "title": "Why is my enumeration stopping after first rejection in Ruby?", "body": "<p>You've tried to modify origin array. That's your problem.</p>\n\n<p>In that cases you need to duplicate it like this:</p>\n\n<pre><code>arr = [[0, 1], [2, 3], [4, 5]]\narr.dup.each_with_index do |inside_array, index|\n  if !index.zero?\n    arr.reject! {|x| x.include?(inside_array[0])}\n  end\nend\n\narr #=&gt; [[0, 1]]\n</code></pre>\n\n<p>So just use <code>dup</code></p>\n\n<p>As for the second question (implementation of subarray removal), I suggest this refactoring:</p>\n\n<pre><code>def remove_subarray(arr)\n  arr.reject { |inside_array| (inside_array &amp; arr.first).empty? }\nend\n\nremove_subarray([[0, 1], [2, 3], [4, 5]]) #=&gt; [[0, 1]]\nremove_subarray([[0, 1], [2, 3], [1, 5]]) #=&gt; [[0, 1], [1, 5]]\nremove_subarray([[0, 1], [2, 3], [0, 3]]) #=&gt; [[0, 1], [0, 3]]\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 1562842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/257e3fc15284fa043f2b840313bd8607?s=128&d=identicon&r=PG", "display_name": "brian-welch", "link": "https://stackoverflow.com/users/1562842/brian-welch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 55917383, "answer_count": 1, "score": 0, "last_activity_date": 1556617804, "creation_date": 1556614231, "last_edit_date": 1556614636, "question_id": 55917196, "link": "https://stackoverflow.com/questions/55917196/why-is-my-enumeration-stopping-after-first-rejection-in-ruby", "title": "Why is my enumeration stopping after first rejection in Ruby?", "body": "<p>Desperate need of help. I am trying to remove arrays from and array of arrays, and I have hit a road block. Essentially, if the first value in the child-array doesn't exist in either position of <strong>any other</strong> child-arrays, then it should be deleted. (presume that the array will be sorted - cause it will be)</p>\n\n<pre><code>arr = [[0, 1], [2, 3], [4, 5]]\narr.each_with_index do |inside_array, index|\n    if !index.zero?\n        # arr.delete(arr[index]) if arr.select {|x| x.include?(inside_array[0])}.count &lt; 2\n        # refactored\n        arr.reject! {|x| x.include?(inside_array[0])}\n    end\nend\n=&gt; [[0, 1], [4, 5]]\n# Why does it stop itterating/enumerating after the first deletion?\n# Goal output is [[0, 1]] for this example\n</code></pre>\n\n<p>Similarly, an array such as <code>[[0, 1], [2, 3], [1, 5]]</code>, should yield <code>[[0, 1], [1, 5]]</code>\n-or -\n<code>[[0, 1], [2, 3], [0, 3]]</code>, should yield <code>[[0, 1], [0, 3]]</code></p>\n"}, {"tags": ["ruby", "jira"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1556617724, "post_id": 55917132, "comment_id": 98490545, "body": "try replacing <code>to_json</code> to <code>as_json</code> and let me know."}, {"owner": {"reputation": 1, "user_id": 8842319, "user_type": "registered", "profile_image": "https://graph.facebook.com/357666131359466/picture?type=large", "display_name": "Yaogang Xu", "link": "https://stackoverflow.com/users/8842319/yaogang-xu"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1556617955, "post_id": 55917132, "comment_id": 98490686, "body": "I found the reason is encrypted &#39;username:password&#39; fail to be parsed in the request. I try to code it like this way and it works.   <code>auth = {:username =&gt; &#39;test&#39;, :password =&gt; &#39;test&#39;}  HTTParty.post(create_url,     :body =&gt; jira_hash.to_json,     :headers =&gt; {&#39;Content-Type&#39; =&gt; &#39;application&#47;json&#39;},     :basic_auth =&gt; auth)</code>"}], "owner": {"reputation": 1, "user_id": 8842319, "user_type": "registered", "profile_image": "https://graph.facebook.com/357666131359466/picture?type=large", "display_name": "Yaogang Xu", "link": "https://stackoverflow.com/users/8842319/yaogang-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556671144, "creation_date": 1556614025, "last_edit_date": 1556671144, "question_id": 55917132, "link": "https://stackoverflow.com/questions/55917132/jira-api-error-it-is-not-on-the-appropriate-screen-or-unknown-when-calling-c", "title": "JIRA API Error: &#39;It is not on the appropriate screen, or unknown&#39; when calling Create Issue endpoint", "body": "<p>I met an issue when I call the create issue API in my code, the error is <code>It is not on the appropriate screen</code>, or unknown.' But when trying the test API with the same parameters in postman, it succeeds, is there anyone who knows the reason for this error?</p>\n\n<p>This is my code:</p>\n\n<pre><code>    create_url = \"https://myjira/rest/api/2/issue/\"\n\n    jira_hash = \n    {\n    \"fields\": {\n    \"project\": {\n    \"id\": \"51606\"\n    },\n    \"issuetype\": {\n    \"name\": \"SOAK EVENT\"\n    },\n    \"priority\": {\n    \"name\": \"Critical\"\n    },\n    \"labels\": [\"Chandler\"],\n    \"customfield_10012\": {\n    \"id\": \"10006\"\n    },\n    \"fixVersions\": [{\n    \"name\": \"2019-05-r1\"\n    }],\n    \"summary\": \"10297\",\n    \"description\": \"description\"\n    }\n    }\n\n    HTTParty.post(create_url,\n    :body =&gt; jira_hash.to_json,\n    :headers =&gt; {'Content-Type' =&gt; 'application/json', 'Authorization' \n     =&gt; auth})\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": false, "score": 0, "last_activity_date": 1556616965, "creation_date": 1556616965, "answer_id": 55918004, "question_id": 55916998, "link": "https://stackoverflow.com/questions/55916998/write-redirect-rule-in-routes-rb-that-can-pass-params-to-new-url/55918004#55918004", "title": "Write Redirect Rule in routes.rb that can pass params to new URL", "body": "<p>You need to have <code>request</code> object to set the <code>parameters</code> intact.</p>\n\n<p>try as per <a href=\"https://api.rubyonrails.org/v5.0/classes/ActionDispatch/Routing/Redirection.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n\n<pre><code>get '/insurance', to: redirect { |params, request| \"/insurance-for-all?#{request.params.to_query}\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23594, "user_id": 336626, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/608b32640d0fca097b40bc6a28cadc5f?s=128&d=identicon&r=PG", "display_name": "Vasiliy Ermolovich", "link": "https://stackoverflow.com/users/336626/vasiliy-ermolovich"}, "is_accepted": false, "score": 1, "last_activity_date": 1556710673, "last_edit_date": 1556710673, "creation_date": 1556617192, "answer_id": 55918074, "question_id": 55916998, "link": "https://stackoverflow.com/questions/55916998/write-redirect-rule-in-routes-rb-that-can-pass-params-to-new-url/55918074#55918074", "title": "Write Redirect Rule in routes.rb that can pass params to new URL", "body": "<p>If you redirect using only <code>path</code> option then all params are gonna be sent as well:</p>\n\n<pre><code>get '/insurance', to: redirect(path: \"/insurance-for-all\")\n</code></pre>\n"}], "owner": {"reputation": 1796, "user_id": 2809686, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/df4c97dd08b33a8a0684cd226bfe89ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kingsley Simon", "link": "https://stackoverflow.com/users/2809686/kingsley-simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556710673, "creation_date": 1556613603, "question_id": 55916998, "link": "https://stackoverflow.com/questions/55916998/write-redirect-rule-in-routes-rb-that-can-pass-params-to-new-url", "title": "Write Redirect Rule in routes.rb that can pass params to new URL", "body": "<p>So i have a URL called</p>\n\n<p><a href=\"http://localhost:3000/insurance?utm_source=article&amp;utm_content=driving\" rel=\"nofollow noreferrer\">http://localhost:3000/insurance?utm_source=article&amp;utm_content=driving</a></p>\n\n<p>and now this URL needs to be redirected to this</p>\n\n<p><a href=\"http://localhost:3000/insurance-for-all?utm_source=article&amp;utm_content=driving\" rel=\"nofollow noreferrer\">http://localhost:3000/insurance-for-all?utm_source=article&amp;utm_content=driving</a></p>\n\n<p>I tried doing this in routes.rb like this</p>\n\n<pre><code>get '/insurance', to: redirect { |params|\"/insurance-for-all?#{params.to_query}\" }\n</code></pre>\n\n<p>but it doesnt work. </p>\n\n<p>is there a way to redirect to new url with params still intact?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "matrix", "transpose"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1556605606, "post_id": 55914712, "comment_id": 98484453, "body": "I could not get the term &quot;extra space&quot;. Do you want to print array in string format without using space in it?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1556607248, "post_id": 55914712, "comment_id": 98485147, "body": "This is not possible. Everything you do in Ruby, will be done with method calls. And every method call allocates a stack frame. Therefore, it is impossible to do <i>anything</i> in Ruby without using any extra space."}, {"owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "edited": false, "score": 1, "creation_date": 1556607339, "post_id": 55914712, "comment_id": 98485189, "body": "By extra space I mean not initializing another array or using any temp variables. The iterators are fine."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1556613034, "post_id": 55914712, "comment_id": 98487982, "body": "&quot;not initializing another array&quot; \u2013 But in your code, you do just that: <code>arr[i][j], arr[j][i] = arr[j][i], arr[i][j]</code> creates a new array for the parallel assignment. &quot;[not] using any temp variables&quot; \u2013 So, if I do <code>foo.bar.baz</code> that is allowed because it doesn&#39;t use temporary variables, but if I do <code>temp = foo.bar; temp.baz</code> that is not allowed because it uses a temporary variable, even though both snippets have the <i>exact same</i> semantics, use the <i>exact same</i> amount of space, and will even (for any halfway decent compiler) compile to the <i>exact same</i> code? That is ridiculous."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556616038, "post_id": 55914712, "comment_id": 98489589, "body": "I&#39;ve deleted my answer and voted to close because I can&#39;t figure out what the question is. The crux of the problem is the OP&#39;s inability to explain what &quot;without using any extra space&quot; means.  That is clearly impossible, especially in light of the requirement given in the title (which I just noticed) that the given array is not to be mutated."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1556619061, "post_id": 55914712, "comment_id": 98491296, "body": "&quot;By extra space I mean not initializing another array or using any temp variables. The iterators are fine.&quot; - but why?"}, {"owner": {"reputation": 126, "user_id": 5616944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca1d9d73f7ce8943637f42421f23f7da?s=128&d=identicon&r=PG&f=1", "display_name": "NRaghavendra", "link": "https://stackoverflow.com/users/5616944/nraghavendra"}, "edited": false, "score": 1, "creation_date": 1556624590, "post_id": 55914712, "comment_id": 98494094, "body": "you could use [[1,2,3], [7,6,5], [8,2,1]].transpose"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1556654445, "post_id": 55914712, "comment_id": 98509440, "body": "@Kris: Especially since the OP <i>does</i> actually initialize another array, namely the temporary one created by the parallel assignment."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1561671257, "post_id": 55914712, "comment_id": 100152035, "body": "You selected an answer that modifies the original array, despite the requirement in the title that it not be altered. Please explain."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1556624699, "creation_date": 1556624699, "answer_id": 55920238, "question_id": 55914712, "link": "https://stackoverflow.com/questions/55914712/ruby-transpose-matrix-without-using-extra-space-not-altering-my-original-arr/55920238#55920238", "title": "Ruby - Transpose Matrix without using extra space - Not altering my original array", "body": "<p>You can swap two numbers via addition and subtraction:</p>\n\n<pre><code>a = 2\nb = 10\n\na = a + b #=&gt; 12\nb = a - b #=&gt; 2\na = a - b #=&gt; 10\n\na #=&gt; 10\nb #=&gt; 2\n</code></pre>\n\n<p>With this algorithm we can transpose the nested array using only the existing array elements:</p>\n\n<pre><code>arr = [\n  [1, 2, 3],\n  [7, 6, 5],\n  [8, 2, 1]\n]\n\n(0...arr.size).each do |i|\n  (i+1...arr.size).each do |j|\n    arr[j][i] = arr[j][i] + arr[i][j]\n    arr[i][j] = arr[j][i] - arr[i][j]\n    arr[j][i] = arr[j][i] - arr[i][j]\n  end\nend\n\narr\n#=&gt; [\n#     [1, 7, 8],\n#     [2, 6, 2],\n#     [3, 5, 1]\n#   ]\n</code></pre>\n"}], "owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 55920238, "answer_count": 1, "score": 0, "last_activity_date": 1556639056, "creation_date": 1556603718, "last_edit_date": 1556639056, "question_id": 55914712, "link": "https://stackoverflow.com/questions/55914712/ruby-transpose-matrix-without-using-extra-space-not-altering-my-original-arr", "title": "Ruby - Transpose Matrix without using extra space - Not altering my original array", "body": "<p>I am trying to solve a challenge: to <em>transpose</em> a nested array without using the pre-defined <code>transpose</code> method or using any \"extra space\" like temporary variables.</p>\n\n<p>Input: <code>[[1,2,3], [7,6,5], [8,2,1]]</code><br>\nOutput: <code>[[1,7,8],[2,6,2],[3,5,1]]</code></p>\n\n<p>Here is the algorithm:\n We just have to swap the indexes. \nfor example: </p>\n\n<pre><code>  (0,0) -&gt; (0,0)\n  (0,1) -&gt; (1,0) and (1,0) -&gt; (0,1)\n  (0,2) -&gt; (2,0) and (2,0) -&gt; (0,2)\n</code></pre>\n\n<p>and it goes on.</p>\n\n<p>Below is my code </p>\n\n<pre><code>arr = [[1,2,3], [7,6,5], [8,2,1]]\n\narr.each_with_index do |inner, i|\n  inner.each_with_index do |e, j|\n    arr[i][j], arr[j][i] = arr[j][i], arr[i][j]\n  end\nend\n\narr\n#=&gt; [[1, 2, 3], [7, 6, 5], [8, 2, 1]]\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "string", "append"], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 3, "last_activity_date": 1556598904, "creation_date": 1556598904, "answer_id": 55914031, "question_id": 55913582, "link": "https://stackoverflow.com/questions/55913582/operator-appending-string-to-list-acting-strange-ruby/55914031#55914031", "title": "&lt;&lt; Operator Appending String to List Acting Strange - Ruby", "body": "<p>This:</p>\n\n<pre><code>string_current &lt;&lt; s[j]\n</code></pre>\n\n<p>modifies the string in-place. That means that this:</p>\n\n<pre><code>list &lt;&lt; string_current\n</code></pre>\n\n<p>can put a correct string into <code>list</code> and then that string can be modified later. </p>\n\n<p>When you append your blank string:</p>\n\n<pre><code>list &lt;&lt; string_current + \"\"\n</code></pre>\n\n<p>you're creating a brand new string (<code>string_current + \"\"</code>) and then pushing that new string onto <code>list</code> so you're doing this:</p>\n\n<pre><code>tmp = string_current + \"\"\nlist &lt;&lt; tmp\n</code></pre>\n\n<p>A couple simple ways around your problem would be explicitly dup'ing the string:</p>\n\n<pre><code>if is_palindrome(string_current)\n  counter += 1\n  puts string_current\n  list &lt;&lt; string_current.dup # &lt;--------------------\nend\n</code></pre>\n\n<p>or using <code>+=</code> instead of <code>&lt;&lt;</code> on <code>string_current</code>:</p>\n\n<pre><code>for i in (0...n)\n  string_current = ''\n  for j in (i...n)\n    string_current += s[j]\n</code></pre>\n\n<p>You should also consider replacing your <code>for</code> loops (which are rare in Ruby) with methods from <a href=\"https://ruby-doc.org/core/Enumerable.html\" rel=\"nofollow noreferrer\"><code>Enumerable</code></a>. I don't want to go down a refactoring rabbit hole right now so I'll leave that as an exercise for the reader.</p>\n"}, {"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 0, "last_activity_date": 1556599408, "creation_date": 1556599408, "answer_id": 55914094, "question_id": 55913582, "link": "https://stackoverflow.com/questions/55913582/operator-appending-string-to-list-acting-strange-ruby/55914094#55914094", "title": "&lt;&lt; Operator Appending String to List Acting Strange - Ruby", "body": "<p>You could also have fixed it by</p>\n\n<pre><code>list &lt;&lt; string_current.dup\n</code></pre>\n\n<p>but the real problem is your</p>\n\n<pre><code>string_current &lt;&lt; s[j]\n</code></pre>\n\n<p>Try out (for instance in <em>irb</em>) the following example:</p>\n\n<pre><code>list=[]\nstr='ab'\nlist &lt;&lt; str\nstr &lt;&lt; 'x'\nputs list\n</code></pre>\n\n<p>You will see that the list contains now <code>'abx'</code>, not <code>'ab'</code>. </p>\n\n<p>The reason is that the list contains an object reference (pointer) to the string, and when you do the <code>str &lt;&lt; 'x'</code>, you don't create a new object, but modify the existing one, and <code>list</code> hence sees the updated version.</p>\n"}], "owner": {"reputation": 57, "user_id": 11121699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9792e7b3960b581ce1b80b4cd14aa2eb?s=128&d=identicon&r=PG&f=1", "display_name": "PastaCountry", "link": "https://stackoverflow.com/users/11121699/pastacountry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 55914031, "answer_count": 2, "score": 0, "last_activity_date": 1556599408, "creation_date": 1556594981, "last_edit_date": 1556596045, "question_id": 55913582, "link": "https://stackoverflow.com/questions/55913582/operator-appending-string-to-list-acting-strange-ruby", "title": "&lt;&lt; Operator Appending String to List Acting Strange - Ruby", "body": "<p>I'm trying to append a string (made up of characters from another string iterated through a for loop) to an array. But for some reason when I output the items of the array in the end they're all off. </p>\n\n<p>Here's my output for the code I have: </p>\n\n<pre><code>r\nracecar\na\naceca\nc\ncec\ne\nc\na\nr\nFinal list:\nracecar\nracecar\nacecar\nacecar\ncecar\ncecar\necar\ncar\nar\nr\n</code></pre>\n\n<p>I tried adding a empty string to the end of my statement like so,</p>\n\n<pre><code>list &lt;&lt; string_current + \"\"\n</code></pre>\n\n<p>and it seems to fix the problem. Does anyone know why this is?</p>\n\n<pre><code>def longest_palindrome(s)\n  n = s.length\n  max_string = \"\"\n  max_string_current = \"\"\n  string_current = \"\"\n  list = []\n  counter = 0\n  for i in (0...n)\n    for j in (i...n)\n      string_current &lt;&lt; s[j]\n      # puts \"string_current: #{string_current}\"\n      if is_palindrome(string_current)\n        counter += 1\n        puts string_current\n        list &lt;&lt; string_current\n      end\n    end\n    string_current = \"\"\n  end\n  puts \"Final list:\"\n  list.each do |item|\n    puts \"#{item}\"\n  end\nend\n\ndef is_palindrome(string)\n  for i in (0..string.length/2)\n    if string[i] != string[string.length-1-i]\n      return false\n    end\n  end\n  return true\nend\n\nlongest_palindrome(\"racecar\")\n\n</code></pre>\n\n<p>I thought that the items in my final list should be idential to those being put into the list during. </p>\n\n<pre><code>list &lt;&lt; string_current\n</code></pre>\n"}, {"tags": ["ruby", "loops", "hash"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556586640, "post_id": 55912466, "comment_id": 98479952, "body": "We don&#39;t have &quot;guards&quot; like other languages, rather we generally deal with iteration using chained methods. Really simple way though is your first code with <code>puts j if j[:price] &gt; 500</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11429780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXc6E.jpg?s=128&g=1", "display_name": "SupremeAnu", "link": "https://stackoverflow.com/users/11429780/supremeanu"}, "edited": false, "score": 0, "creation_date": 1556585626, "post_id": 55912499, "comment_id": 98479771, "body": "I see. So, whereas I&#39;m used to using <code>for</code> loops in other languages, Ruby is easier using the supplied <code>.each</code> method? So <code>do</code> is defining which parameters to collect and the <code>data</code> parameter specifies which area of the hash to search? You&#39;re also correct in assuming that <code>end.sort</code> or <code>end.each</code> looks foreign to me. How is it possible to do that?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1556591810, "post_id": 55912499, "comment_id": 98480920, "body": "Please see the documentation on <a href=\"https://ruby-doc.com/core-2.6.2/Enumerable.html\" rel=\"nofollow noreferrer\">ruby-doc.com/core-2.6.2/Enumerable.html</a> as the answer references.  But these methods do what their names imply and can operate on objects which are Enumerable (i.e. Hash or Array) .  There are more clunky ways to do loops but this is more the Ruby convention for your use case."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1556639495, "post_id": 55912499, "comment_id": 98502872, "body": "Other languages use <code>for</code> because it&#39;s all they&#39;ve got. Some like JavaScript have a mix: <code>for (...) { ... }</code> and <code>array.forEach(function(e) { ... })</code> where you can pick the one you prefer. In Ruby <code>for</code> is all but useless since Enumerable does everything it can do and far, far more, to the point where if one day it got deleted from the language I&#39;m not sure anyone would notice. <code>.each</code> has a block that receives a single argument, the element being iterated, but there&#39;s also <code>each_with_index</code> (element, index) and <code>each_with_object</code> (element, arbitrary object) as but two examples."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1556584979, "creation_date": 1556584979, "answer_id": 55912499, "question_id": 55912466, "link": "https://stackoverflow.com/questions/55912466/printing-values-in-a-hash-using-the-conditional-operator-for-and-rubys-each/55912499#55912499", "title": "Printing Values in a Hash using the conditional operator &quot;for&quot; and Ruby&#39;s .each", "body": "<p>You're asking Ruby to do way too much at once here:</p>\n\n<pre><code>for q, e in my_stocks.to_i &lt; 500\n</code></pre>\n\n<p>That really doesn't make any sense. <code>for</code> iterates over a container. <code>to_i</code> returns an integer. <code>x.to_i &lt; n</code> returns a boolean. You can't iterate over a boolean. Plus, <code>my_stocks</code> is a Hash and it doesn't do <code>to_i</code>, so this whole line is not something Ruby can make sense of.</p>\n\n<p>Instead think about the problem differently. The Ruby way is to break this down into steps. First, find all stocks over a particular value:</p>\n\n<pre><code>my_stocks.select do |_name, data|\n  data['price'] &gt; 500\nend.each do |name, data|\n  # ... print or whatever\nend\n</code></pre>\n\n<p>Where this taps into <a href=\"https://ruby-doc.org/core/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable</a> to help solve the problem in two stages. <code>select</code> to filter, <code>each</code> to iterate. In Ruby <code>for</code> isn't really used, it's really never the best tool for the job.</p>\n\n<p>The real power of Enumerable is that you can chain one operation right into the next. <code>end.each</code> might look very odd to someone unfamiliar with Ruby, but that's really how Ruby handles complex operations with ease.</p>\n\n<p>For example, to filter and sort by price (highest to lowest) is only a small modification:</p>\n\n<pre><code>my_stocks.select do |_name, data|\n  data['price'] &gt; 500\nend.sort_by do |_name, data|\n  -data['price']\nend.each do |name, data|\n  # ... print or whatever\nend\n</code></pre>\n\n<p>The <code>-data['price']</code> part is an easy way of avoiding having to reverse the values later. Normally it sorts in increasing order, so inverting sorts in decreasing as the highest value becomes the lowest.</p>\n"}, {"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1556592344, "creation_date": 1556592344, "answer_id": 55913310, "question_id": 55912466, "link": "https://stackoverflow.com/questions/55912466/printing-values-in-a-hash-using-the-conditional-operator-for-and-rubys-each/55913310#55913310", "title": "Printing Values in a Hash using the conditional operator &quot;for&quot; and Ruby&#39;s .each", "body": "<p>You can use the loop syntax like this but just use \"next\" to skip iteration on item who's price doesn't meet your requirement:</p>\n\n<pre><code>for q, e in my_stocks\n  next unless e['price'] &gt; 500 \n  puts q\n  puts e\nend\n</code></pre>\n\n<p>This will output:</p>\n\n<pre><code>Google\n{\"symbol\"=&gt;\"GOOG\", \"price\"=&gt;1150}\nAmazon\n{\"symbol\"=&gt;\"AMZN\", \"price\"=&gt;1250}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11429780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXc6E.jpg?s=128&g=1", "display_name": "SupremeAnu", "link": "https://stackoverflow.com/users/11429780/supremeanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 1, "accepted_answer_id": 55912499, "answer_count": 2, "score": 2, "last_activity_date": 1556592344, "creation_date": 1556584625, "last_edit_date": 1556585537, "question_id": 55912466, "link": "https://stackoverflow.com/questions/55912466/printing-values-in-a-hash-using-the-conditional-operator-for-and-rubys-each", "title": "Printing Values in a Hash using the conditional operator &quot;for&quot; and Ruby&#39;s .each", "body": "<p>I am attempting to solve what should be a very simple problem in Ruby. My goal is to take the following hash and print values and keys using for loops and the .each method.</p>\n\n<pre><code>my_stocks = { 'Apple' =&gt; { 'symbol' =&gt; 'AAPL', 'price' =&gt; 100 },\n          'Google' =&gt; { 'symbol' =&gt; 'GOOG', 'price' =&gt; 1150 },\n          'Tesla' =&gt; { 'symbol' =&gt; 'TSLA', 'price' =&gt; 295 },\n          'Microsoft' =&gt; { 'symbol' =&gt; 'MSFT', 'price' =&gt; 95},\n          'Netflix' =&gt; { 'symbol' =&gt; 'NFLX', 'price' =&gt; 300},\n          'Facebook' =&gt; { 'symbol' =&gt; 'FB', 'price' =&gt; 175},\n          'Amazon' =&gt; { 'symbol' =&gt; 'AMZN', 'price' =&gt; 1250} }\n</code></pre>\n\n<p>So, I'm using this defined method to print the entire hash:</p>\n\n<pre><code>def execute_exercise(my_stocks)\nfor i, j in my_stocks\n  puts j\nend\nend\n</code></pre>\n\n<p>Obviously, this succeeds. What I am trying to do next is, use a for loop to print only the values of keys that exceed 500.</p>\n\n<p>Every solution I've come up with raises an error in Ruby:\n</p>\n\n<pre><code>rbtest.rb:18:in `&gt;': no implicit conversion of Fixnum into Hash (TypeError)\nfrom rbtest.rb:18:in `block in execute_exercise'\nfrom rbtest.rb:18:in `each'\nfrom rbtest.rb:18:in `execute_exercise'\nfrom rbtest.rb:25:in `&lt;main&gt;'\n</code></pre>\n\n<p>The attempts I've made are:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>my_stocks.each {|symbol,price| puts symbol if price &gt; 500}\nfor q, e in my_stocks.to_i &lt; 500\n      puts e\n    end\n</code></pre>\n\n<p>I expect the values to print from the hash, but it's obvious that I'm missing something here. I can't convert the fixnum into hash without <code>.to_h</code>, but does that even work? Am I just misunderstanding for loops or is it something else?</p>\n"}, {"tags": ["ruby", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11429376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d72d774bae39e3a3907fc1198d9d19?s=128&d=identicon&r=PG&f=1", "display_name": "AutomationTester", "link": "https://stackoverflow.com/users/11429376/automationtester"}, "edited": false, "score": 0, "creation_date": 1557359717, "post_id": 55911439, "comment_id": 98742147, "body": "Thanks for pointing that out. It worked great, I realized with execute_script I was returning the useragent from js code and it was working fine. So I had something like this: page.execute_script(&quot;var ua = navigator.userAgent;return ua;&quot;). All this feels unnecessary and I have made the changes by using evaluate_script"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 3, "user_id": 11429376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d72d774bae39e3a3907fc1198d9d19?s=128&d=identicon&r=PG&f=1", "display_name": "AutomationTester", "link": "https://stackoverflow.com/users/11429376/automationtester"}, "edited": false, "score": 0, "creation_date": 1557361046, "post_id": 55911439, "comment_id": 98742374, "body": "@AutomationTester You\u2019re welcome, if the issue is solved don\u2019t forget to accept the answer (the checkmark) so the question gets marked as answered."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1556575677, "creation_date": 1556575677, "answer_id": 55911439, "question_id": 55911220, "link": "https://stackoverflow.com/questions/55911220/how-to-get-the-user-agent-for-a-headless-browser/55911439#55911439", "title": "How to get the user agent for a headless browser", "body": "<p>Your issue is that you're using <code>execute_script</code> when you need to be using <code>evaluate_script</code> because you want a response.  That being said, your code shouldn't have worked without headless set either so I'm not sure what version of Capybara you're running.</p>\n\n<pre><code>page.evaluate_script(\"navigator.userAgent\")\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11429376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d72d774bae39e3a3907fc1198d9d19?s=128&d=identicon&r=PG&f=1", "display_name": "AutomationTester", "link": "https://stackoverflow.com/users/11429376/automationtester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 55911439, "answer_count": 1, "score": -1, "last_activity_date": 1556577890, "creation_date": 1556574314, "last_edit_date": 1556577890, "question_id": 55911220, "link": "https://stackoverflow.com/questions/55911220/how-to-get-the-user-agent-for-a-headless-browser", "title": "How to get the user agent for a headless browser", "body": "<p>I am running my tests on headless chrome browser and need to get the user agent of the headless browser.\nFor a Chrome browser, that is not headless I use this code to get the user agent:</p>\n\n<pre><code>page.execute_script(\"navigator.userAgent\"); ==&gt; which works as required\n</code></pre>\n\n<p>But for a headless browser this doesn't seem to work. Is there a way to get the userAgent?</p>\n\n<p>PS: I use ruby, capybara in my framework</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1556574610, "post_id": 55911205, "comment_id": 98477570, "body": "It seems <code>someMethod()</code> isn&#39;t directly related to <code>someOtherStuff()</code>. You could just omit the parenthesis around <code>someOtherStuff()</code> giving you a one line statement. <code>someMethod; someOtherStuff if value &gt; 0</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556577105, "post_id": 55911205, "comment_id": 98478144, "body": "You&#39;ve used <a href=\"https://en.wikipedia.org/wiki/Camel_case\" rel=\"nofollow noreferrer\">camel case</a> to name your two methods.  By convention, Ruby uses <a href=\"https://en.wikipedia.org/wiki/Snake_case\" rel=\"nofollow noreferrer\">snake case</a> for that (e.g., <code>some_method</code>), and for naming variables as well. You don&#39;t have to follow that convention but 99%+ of Rubiests do."}, {"owner": {"reputation": 6310, "user_id": 1654231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92569ddbf8ac47f66b2980ca7f69df0d?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/1654231/stuart"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1556735679, "post_id": 55911205, "comment_id": 98535164, "body": "@CarySwoveland This isn&#39;t OPs code, it&#39;s been inherited by the sound of it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 6310, "user_id": 1654231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92569ddbf8ac47f66b2980ca7f69df0d?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/1654231/stuart"}, "edited": false, "score": 0, "creation_date": 1556735908, "post_id": 55911205, "comment_id": 98535261, "body": "@Stuart, no harm, no foul."}, {"owner": {"reputation": 6310, "user_id": 1654231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92569ddbf8ac47f66b2980ca7f69df0d?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/1654231/stuart"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556736001, "post_id": 55911205, "comment_id": 98535291, "body": "@CarySwoveland (thumbsup)"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556577047, "post_id": 55911411, "comment_id": 98478129, "body": "Perhaps include the extra step: &quot;...is a longer way to write <code>someMethod(); (someOtherStuff()) if value &gt; 0</code>, which is the same as <code>someMethod(); someOtherStuff() if value &gt; 0</code>, which is the same as <code>someMethod; someOtherStuff if value &gt; 0</code>."}], "tags": [], "owner": {"reputation": 306, "user_id": 10919154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FqfuP.jpg?s=128&g=1", "display_name": "Noctilucente", "link": "https://stackoverflow.com/users/10919154/noctilucente"}, "is_accepted": true, "score": 2, "last_activity_date": 1556575525, "creation_date": 1556575525, "answer_id": 55911411, "question_id": 55911205, "link": "https://stackoverflow.com/questions/55911205/parentheses-and-if-statements-in-ruby/55911411#55911411", "title": "Parentheses and if statements in Ruby", "body": "<pre class=\"lang-rb prettyprint-override\"><code># Original snippet\n\nsomeMethod()\n(\n    someOtherStuff()\n) if value &gt; 0\n</code></pre>\n\n<p>is a longer way to write</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Snippet 1\n\nsomeMethod # Note that `someMethod` will always be executed\nsomeOtherStuff if value &gt; 0\n</code></pre>\n\n<p>If you want to use the traditional format of if statements, you could write it like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Snippet 2\n\nsomeMethod # Same here, it will always be executed\nif value &gt; 0\n  someOtherStuff\nend\n</code></pre>\n\n<p>Snippet 1 is useful for writing <a href=\"https://www.thechrisoshow.com/2009/02/16/using-guard-clauses-in-your-ruby-code/\" rel=\"nofollow noreferrer\">guard clauses</a>.</p>\n"}], "owner": {"reputation": 1110, "user_id": 40333, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de0dd77a89c32854ba95384fac93d44a?s=128&d=identicon&r=PG", "display_name": "Arthurdent510", "link": "https://stackoverflow.com/users/40333/arthurdent510"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 55911411, "answer_count": 1, "score": 1, "last_activity_date": 1556575525, "creation_date": 1556574259, "question_id": 55911205, "link": "https://stackoverflow.com/questions/55911205/parentheses-and-if-statements-in-ruby", "title": "Parentheses and if statements in Ruby", "body": "<p>I'm working through some old code and I ran into something that I think is strange in Ruby, I'm trying to wrap my head around it but I can't find anything similar to it in any documentation.  </p>\n\n<pre><code>someMethod()\n(\n    someOtherStuff()\n) if value &gt; 0\n</code></pre>\n\n<p>The ruby syntax I've always seen for if statements follows a more traditional if statement, the conditional code under it, and an end tag after the conditional block.  Is this just some other way of writing that, with the call to someOtherStuff() executed conditionally on the result of value > 0?  Or is this doing something else?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "delayed-job"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1556578197, "post_id": 55911166, "comment_id": 98478377, "body": "I would go with the sidekiq gem, it works great for what you&#39;re looking for."}], "answers": [{"comments": [{"owner": {"reputation": 861, "user_id": 1195735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6748696d615c0de26893fcec299e7dd1?s=128&d=identicon&r=PG", "display_name": "newbie", "link": "https://stackoverflow.com/users/1195735/newbie"}, "edited": false, "score": 0, "creation_date": 1556591949, "post_id": 55911242, "comment_id": 98480950, "body": "What about the feedback? I need to update a status in a relational database based on the execution as well as success of the job. Should that reside in sidekiq as well?"}, {"owner": {"reputation": 2694, "user_id": 3956205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42aff84cfa87f92797cb54bdea6d0c20?s=128&d=identicon&r=PG", "display_name": "BTL", "link": "https://stackoverflow.com/users/3956205/btl"}, "reply_to_user": {"reputation": 861, "user_id": 1195735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6748696d615c0de26893fcec299e7dd1?s=128&d=identicon&r=PG", "display_name": "newbie", "link": "https://stackoverflow.com/users/1195735/newbie"}, "edited": false, "score": 0, "creation_date": 1556614020, "post_id": 55911242, "comment_id": 98488519, "body": "Yes you can totally do that ! I&#39;ll add an example."}, {"owner": {"reputation": 861, "user_id": 1195735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6748696d615c0de26893fcec299e7dd1?s=128&d=identicon&r=PG", "display_name": "newbie", "link": "https://stackoverflow.com/users/1195735/newbie"}, "edited": false, "score": 0, "creation_date": 1556647036, "post_id": 55911242, "comment_id": 98506395, "body": "One final question, i can post this as a separate question if needed.Can a rails webapp and sidekiqworker run in the same app. I am using passenger as my app server. whats the best practice."}, {"owner": {"reputation": 475, "user_id": 5950598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Ihgv3.jpg?s=128&g=1", "display_name": "Jan Krupa", "link": "https://stackoverflow.com/users/5950598/jan-krupa"}, "edited": false, "score": 0, "creation_date": 1579856342, "post_id": 55911242, "comment_id": 105913908, "body": "Is there a way to run a custom-defined job via rails console at a specific time? So I don&#39;t have to create a one-time script into a code structure. It&#39;s just a one-time job to set some data during the weekend."}, {"owner": {"reputation": 2694, "user_id": 3956205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42aff84cfa87f92797cb54bdea6d0c20?s=128&d=identicon&r=PG", "display_name": "BTL", "link": "https://stackoverflow.com/users/3956205/btl"}, "reply_to_user": {"reputation": 475, "user_id": 5950598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Ihgv3.jpg?s=128&g=1", "display_name": "Jan Krupa", "link": "https://stackoverflow.com/users/5950598/jan-krupa"}, "edited": false, "score": 0, "creation_date": 1579867687, "post_id": 55911242, "comment_id": 105919858, "body": "@JanKrupa of course : in the rails console, you do <code>MyWorker.perform_async(data: data)</code> or <code>perform_in</code>, <code>perform_at</code>, etc."}, {"owner": {"reputation": 475, "user_id": 5950598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Ihgv3.jpg?s=128&g=1", "display_name": "Jan Krupa", "link": "https://stackoverflow.com/users/5950598/jan-krupa"}, "edited": false, "score": 0, "creation_date": 1579868704, "post_id": 55911242, "comment_id": 105920338, "body": "@BTL yes but I don&#39;t want to define MyWorker as a script in the rails app. And when I define it in a console, then the execution fails because of the unknown class."}], "tags": [], "owner": {"reputation": 2694, "user_id": 3956205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42aff84cfa87f92797cb54bdea6d0c20?s=128&d=identicon&r=PG", "display_name": "BTL", "link": "https://stackoverflow.com/users/3956205/btl"}, "is_accepted": true, "score": 3, "last_activity_date": 1556614387, "last_edit_date": 1556614387, "creation_date": 1556574455, "answer_id": 55911242, "question_id": 55911166, "link": "https://stackoverflow.com/questions/55911166/ruby-on-rails-background-application-to-run-jobs-automaically-at-a-time-dynamica/55911242#55911242", "title": "ruby on rails background application to run jobs automaically at a time dynamically defined by users?", "body": "<p>I would advise to use <a href=\"https://github.com/mperham/sidekiq\" rel=\"nofollow noreferrer\">Sidekiq</a>. With it you can use <a href=\"https://github.com/mperham/sidekiq/wiki/Scheduled-Jobs\" rel=\"nofollow noreferrer\">scheduled jobs</a> to tell sidekiq when to perform the jobs.</p>\n\n<p>Example : \n<code>MyWorker.perform_at(3.hours.from_now, 'mike', 1)</code></p>\n\n<p><strong>EDIT</strong> : worker example</p>\n\n<pre><code>#app/workers/restart_device_worker.rb\nclass RestartDeviceWorker\n  include Sidekiq::Worker\n\n  def perform(params)\n    # Do the job\n    # ...\n    # update in DB\n  end\nend\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 861, "user_id": 1195735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6748696d615c0de26893fcec299e7dd1?s=128&d=identicon&r=PG", "display_name": "newbie", "link": "https://stackoverflow.com/users/1195735/newbie"}, "edited": false, "score": 0, "creation_date": 1556625443, "post_id": 55914355, "comment_id": 98494543, "body": "Thanks . Can I delete a future job after it&#39;s been queued if the end user changes his mind?"}, {"owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "reply_to_user": {"reputation": 861, "user_id": 1195735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6748696d615c0de26893fcec299e7dd1?s=128&d=identicon&r=PG", "display_name": "newbie", "link": "https://stackoverflow.com/users/1195735/newbie"}, "edited": false, "score": 1, "creation_date": 1556625942, "post_id": 55914355, "comment_id": 98494822, "body": "Yes you can. but for this you have to maintain JobID. Also check this link: <a href=\"https://stackoverflow.com/questions/21101253/how-to-delete-a-job-in-sidekiq\" title=\"how to delete a job in sidekiq\">stackoverflow.com/questions/21101253/&hellip;</a>"}], "tags": [], "owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "is_accepted": false, "score": 1, "last_activity_date": 1556648666, "last_edit_date": 1556648666, "creation_date": 1556601230, "answer_id": 55914355, "question_id": 55911166, "link": "https://stackoverflow.com/questions/55911166/ruby-on-rails-background-application-to-run-jobs-automaically-at-a-time-dynamica/55914355#55914355", "title": "ruby on rails background application to run jobs automaically at a time dynamically defined by users?", "body": "<p>see doc: <a href=\"https://blog.codeship.com/how-to-use-rails-active-job/\" rel=\"nofollow noreferrer\">https://blog.codeship.com/how-to-use-rails-active-job/</a>\n<a href=\"https://guides.rubyonrails.org/active_job_basics.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/active_job_basics.html</a></p>\n\n<p>If you are using Rails 5 then you have best option of ActiveJob(inbuilt feature)</p>\n\n<blockquote>\n  <p>Use ActiveJob</p>\n</blockquote>\n\n<p>\"Active Job \u2013 Make work happen later. Active Job is a framework for declaring jobs and making them run on a variety of queuing backends. These jobs can be everything from regularly scheduled clean-ups, to billing charges, to mailings. Anything that can be chopped up into small units of work and run in parallel, really.\"</p>\n\n<p>Active Job has built-in adapters for multiple queuing backends (Sidekiq, Resque, Delayed Job and others). You just need to tell them. </p>\n\n<p><strong>Scenario:</strong> I want to delete my story after 24 hours(1 day). Then we do create a job named \"StoriesCleanupJob\". Call this job at the time of the creation of story like below</p>\n\n<pre><code>StoriesCleanupJob.set(wait: 1.day).perform_later(story)\n</code></pre>\n\n<p>It will call the Job after 1 day.</p>\n\n<pre><code>class StoriesCleanupJob &lt; ApplicationJob\n  queue_as :default\n\n  def perform(story)\n      if story.destroy\n            #put your own conditions like update the status and all, whatever you want to perform.\n      end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 861, "user_id": 1195735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6748696d615c0de26893fcec299e7dd1?s=128&d=identicon&r=PG", "display_name": "newbie", "link": "https://stackoverflow.com/users/1195735/newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "accepted_answer_id": 55911242, "answer_count": 2, "score": 0, "last_activity_date": 1556648666, "creation_date": 1556574041, "last_edit_date": 1556592750, "question_id": 55911166, "link": "https://stackoverflow.com/questions/55911166/ruby-on-rails-background-application-to-run-jobs-automaically-at-a-time-dynamica", "title": "ruby on rails background application to run jobs automaically at a time dynamically defined by users?", "body": "<p>I have a use case where user schedules a 'command' from the web interface. The user also specifies the date and time the command needs to be triggred.</p>\n\n<p>This is sequence of steps:</p>\n\n<p>1.User schedules a command 'Restart Device' at May 31, 3pm.</p>\n\n<p>2.This is saved in a database table called Command.</p>\n\n<p>3.Now there needs to be a background job that needs to be triggered at this specified time to do something (make an api call, send email etc.)</p>\n\n<p>4.Once job is executed, It is removed or marked done, until a new command is issued.</p>\n\n<p>There could be multpile users concurrently performing the above sequence of steps.</p>\n\n<p>Is delayed_job a good choice for above? I couldnt find an example as how to implement above using delayed job.</p>\n\n<p>EDIT: the reason I was looking at delayed_job is because eventually I would need to leverage existing relational database </p>\n"}, {"tags": ["ruby", "rubygems", "installation", "rest-client", "rhel7"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 0, "last_activity_date": 1556571875, "creation_date": 1556571875, "answer_id": 55910787, "question_id": 55910455, "link": "https://stackoverflow.com/questions/55910455/failed-to-install-gem-rest-client/55910787#55910787", "title": "Failed to install gem rest-client", "body": "<p>It looks like you are missing the gcc-c++ compiler. Install it with:</p>\n\n<pre><code>yum install gcc-c++\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449, "user_id": 10739704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XmWze.jpg?s=128&g=1", "display_name": "nileshkumar", "link": "https://stackoverflow.com/users/10739704/nileshkumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1556573454, "creation_date": 1556573454, "answer_id": 55911079, "question_id": 55910455, "link": "https://stackoverflow.com/questions/55910455/failed-to-install-gem-rest-client/55911079#55911079", "title": "Failed to install gem rest-client", "body": "<p><code>build-essential g++</code> are the missing ones. So try installing:</p>\n\n<pre><code>yum install build-essential g++\n</code></pre>\n\n<p>then install the required gem:</p>\n\n<pre><code>gem install rest-client\n</code></pre>\n\n<p>hope it helps....</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10161404, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d3WOwbiQ7LQ/AAAAAAAAAAI/AAAAAAAAAJ0/YIgZ5oRI_og/photo.jpg?sz=128", "display_name": "Sina", "link": "https://stackoverflow.com/users/10161404/sina"}, "is_accepted": false, "score": 0, "last_activity_date": 1556644264, "creation_date": 1556644264, "answer_id": 55925788, "question_id": 55910455, "link": "https://stackoverflow.com/questions/55910455/failed-to-install-gem-rest-client/55925788#55925788", "title": "Failed to install gem rest-client", "body": "<p>Thanks .</p>\n\n<p>I reinstall ruby and dependencies then it worked.</p>\n\n<p>Regards,</p>\n\n<p>Sina</p>\n"}], "owner": {"reputation": 1, "user_id": 10161404, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d3WOwbiQ7LQ/AAAAAAAAAAI/AAAAAAAAAJ0/YIgZ5oRI_og/photo.jpg?sz=128", "display_name": "Sina", "link": "https://stackoverflow.com/users/10161404/sina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 625, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1556644264, "creation_date": 1556569937, "last_edit_date": 1556571259, "question_id": 55910455, "link": "https://stackoverflow.com/questions/55910455/failed-to-install-gem-rest-client", "title": "Failed to install gem rest-client", "body": "<p>I am trying to install gem res-client in my redhat linux server.Installed whatever dependencies i found but still not working for me.</p>\n\n<blockquote>\n  <p>Ruby Version:</p>\n  \n  <p>ruby 2.3.6p384 (2017-12-14 revision 61254) [x86_64-linux]</p>\n  \n  <p>[root@feeds ]# gem install rest-client</p>\n  \n  <p>Building native extensions. This could take a while...</p>\n  \n  <p>ERROR:  Error installing rest-client:</p>\n  \n  <p>ERROR: Failed to build gem native extension.</p>\n  \n  <p>current directory: /opt/rh/rh-ruby23/root/usr/local/share/gems/gems/unf_ext-0.0.7.6/ext/unf_ext</p>\n  \n  <p>/opt/rh/rh-ruby23/root/usr/bin/ruby -I /opt/rh/rh-ruby23/root/usr/local/share/ruby/site_ruby -r ./siteconf20190429-62674-e4of20.rb extconf.rb</p>\n  \n  <p>checking for main() in -lstdc++... no\n  creating Makefile</p>\n  \n  <p>current directory: /opt/rh/rh-ruby23/root/usr/local/share/gems/gems/unf_ext-\n  0.0.7.6/ext/unf_ext</p>\n  \n  <p>make \"DESTDIR=\" clean</p>\n  \n  <p>rm -f</p>\n  \n  <p>rm -f unf_ext.so  *.o  <em>.bak mkmf.log .</em>.time</p>\n  \n  <p>current directory: /opt/rh/rh-ruby23/root/usr/local/share/gems/gems/unf_ext-0.0.7.6/ext/unf_ext</p>\n  \n  <p>make \"DESTDIR=\"\n  g++ -I. -I/opt/rh/rh-ruby23/root/usr/include -I/opt/rh/rh-ruby23/root/usr/include/ruby/backward -I/opt/rh/rh-ruby23/root/usr/include -I.   -fPIC -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -mtune=generic -m64 -o unf.o -c unf.cc</p>\n  \n  <p>make: g++: Command not found</p>\n  \n  <p>make: *** [unf.o] Error 127</p>\n  \n  <p>make failed, exit code 2</p>\n  \n  <p>Gem files will remain installed in /opt/rh/rh-ruby23/root/usr/local/share/gems/gems/unf_ext-0.0.7.6 for inspection.\n  Results logged to /opt/rh/rh-ruby23/root/usr/local/lib64/gems/ruby/unf_ext-0.0.7.6/gem_make.out</p>\n</blockquote>\n\n<p>Can anyone please suggest.</p>\n\n<p>Thanks\nSina</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker", "docker-compose", "dockerfile"], "answers": [{"comments": [{"owner": {"reputation": 731, "user_id": 3813229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d1734bfe19a7636567a4958ec87ddf2?s=128&d=identicon&r=PG&f=1", "display_name": "queroga_vqz", "link": "https://stackoverflow.com/users/3813229/queroga-vqz"}, "edited": false, "score": 0, "creation_date": 1556592277, "post_id": 55911733, "comment_id": 98481011, "body": "thanks for the reply! Tried, but still had no luck."}], "tags": [], "owner": {"reputation": 1776, "user_id": 167369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bca845de2e02e2cdae5aded1d898658?s=128&d=identicon&r=PG", "display_name": "eremite", "link": "https://stackoverflow.com/users/167369/eremite"}, "is_accepted": false, "score": 0, "last_activity_date": 1556577903, "creation_date": 1556577903, "answer_id": 55911733, "question_id": 55909543, "link": "https://stackoverflow.com/questions/55909543/you-must-use-bundler-2-or-greater-with-this-lockfile-when-running-docker-compos/55911733#55911733", "title": "You must use Bundler 2 or greater with this lockfile. When running docker-compose up locally", "body": "<p>I think you need to either upgrade to a ruby image that comes with bundler 2 (e.g. <code>FROM ruby:2.6.3</code>) or rebundle your <code>Gemfile.lock</code> with the bundler version you want to use. Or at least that's what worked for me.</p>\n\n<p>It did not work to tweak the environment variables as suggested by the <a href=\"https://bundler.io/v2.0/guides/bundler_docker_guide.html\" rel=\"nofollow noreferrer\">Bundler guides</a>.</p>\n\n<p>This <a href=\"https://github.com/docker-library/ruby/pull/255\" rel=\"nofollow noreferrer\">github issue</a> makes me think this is expected behavior, but I could be totally wrong.</p>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 4376810, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/KLeot.jpg?s=128&g=1", "display_name": "javierojeda", "link": "https://stackoverflow.com/users/4376810/javierojeda"}, "edited": false, "score": 0, "creation_date": 1594792909, "post_id": 55913429, "comment_id": 111246457, "body": "This did not work for me... Any suggestion? I locally created the project with bundler 2.1.4 and specified the same version on Dockerfile as well as a gem update --system before."}], "tags": [], "owner": {"reputation": 731, "user_id": 3813229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d1734bfe19a7636567a4958ec87ddf2?s=128&d=identicon&r=PG&f=1", "display_name": "queroga_vqz", "link": "https://stackoverflow.com/users/3813229/queroga-vqz"}, "is_accepted": true, "score": 15, "last_activity_date": 1556593369, "creation_date": 1556593369, "answer_id": 55913429, "question_id": 55909543, "link": "https://stackoverflow.com/questions/55909543/you-must-use-bundler-2-or-greater-with-this-lockfile-when-running-docker-compos/55913429#55913429", "title": "You must use Bundler 2 or greater with this lockfile. When running docker-compose up locally", "body": "<p>Adding this line before RUN bundle install to the Dockerfile did the trick for me.</p>\n\n<pre><code>RUN gem install bundler -v 2.0.1\n</code></pre>\n\n<p>Leaving this here for future reference!</p>\n"}, {"tags": [], "owner": {"reputation": 532, "user_id": 2256370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0385d51ad69470a8cd4d2f5fc63c7bc6?s=128&d=identicon&r=PG", "display_name": "Amirol Ahmad", "link": "https://stackoverflow.com/users/2256370/amirol-ahmad"}, "is_accepted": false, "score": 2, "last_activity_date": 1556609240, "creation_date": 1556609240, "answer_id": 55915864, "question_id": 55909543, "link": "https://stackoverflow.com/questions/55909543/you-must-use-bundler-2-or-greater-with-this-lockfile-when-running-docker-compos/55915864#55915864", "title": "You must use Bundler 2 or greater with this lockfile. When running docker-compose up locally", "body": "<p>in your Gemfile.lock, at the bottom, you may find bundle version:</p>\n\n<pre><code>BUNDLED WITH\n2.0.1\n</code></pre>\n\n<p>Please make sure you bundled it with the correct version that you have</p>\n"}, {"tags": [], "owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "is_accepted": false, "score": 5, "last_activity_date": 1576007366, "last_edit_date": 1576007366, "creation_date": 1569427201, "answer_id": 58102398, "question_id": 55909543, "link": "https://stackoverflow.com/questions/55909543/you-must-use-bundler-2-or-greater-with-this-lockfile-when-running-docker-compos/58102398#58102398", "title": "You must use Bundler 2 or greater with this lockfile. When running docker-compose up locally", "body": "<p>You need to update Rubygems:</p>\n\n<pre><code>RUN gem update --system\n</code></pre>\n\n<p>Apart of being sure that you have the correct bundler version, run:</p>\n\n<pre><code>RUN gem install bundler -v 2.0.1\n</code></pre>\n\n<p><a href=\"https://bundler.io/guides/bundler_2_upgrade.html#prerequisites\" rel=\"noreferrer\">Here</a> you can find a deeply explanation.</p>\n"}, {"tags": [], "owner": {"reputation": 367, "user_id": 3045497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c748f160a6a3fcf402837091c1a41ea8?s=128&d=identicon&r=PG", "display_name": "artem_russkikh", "link": "https://stackoverflow.com/users/3045497/artem-russkikh"}, "is_accepted": false, "score": 1, "last_activity_date": 1596039406, "creation_date": 1596039406, "answer_id": 63158013, "question_id": 55909543, "link": "https://stackoverflow.com/questions/55909543/you-must-use-bundler-2-or-greater-with-this-lockfile-when-running-docker-compos/63158013#63158013", "title": "You must use Bundler 2 or greater with this lockfile. When running docker-compose up locally", "body": "<p>Ruby image comes with installed <code>bundler</code>.\nEnvironment variable <code>BUNDLER_VERSION</code> is set to preinstalled version of <code>bundler</code> by default. Even if you uninstall this version, <code>bundle</code> will check for this environment variable and\nraise error &quot;You must use Bundler 2 or greater with this lockfile&quot; if there is a v1/v2 mismatch</p>\n<p>Ensure that your <code>Gemfile.lock</code> bundled with needed version:</p>\n<pre><code>BUNDLED WITH\n   2.1.4\n</code></pre>\n<p>If you have another version, you can upgrade your application to the latest installed version of Bundler by running <code>bundle update --bundler</code> <a href=\"https://bundler.io/man/bundle-update.1.html\" rel=\"nofollow noreferrer\">https://bundler.io/man/bundle-update.1.html</a></p>\n<p>In <code>Dockerfile</code> override environment variable <code>BUNDLER_VERSION</code> to needed version of bundler and install it:</p>\n<pre><code>ENV BUNDLER_VERSION=2.1.4\n\nRUN gem update --system &amp;&amp; \\\n    gem install bundler:2.1.4 &amp;&amp; \\\n    bundle install\n</code></pre>\n"}], "owner": {"reputation": 731, "user_id": 3813229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d1734bfe19a7636567a4958ec87ddf2?s=128&d=identicon&r=PG&f=1", "display_name": "queroga_vqz", "link": "https://stackoverflow.com/users/3813229/queroga-vqz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9042, "favorite_count": 1, "accepted_answer_id": 55913429, "answer_count": 5, "score": 11, "last_activity_date": 1596039406, "creation_date": 1556565456, "last_edit_date": 1556566786, "question_id": 55909543, "link": "https://stackoverflow.com/questions/55909543/you-must-use-bundler-2-or-greater-with-this-lockfile-when-running-docker-compos", "title": "You must use Bundler 2 or greater with this lockfile. When running docker-compose up locally", "body": "<p>New to docker, I have been trying to use it with my rails project but haven't been able to start it up.</p>\n\n<p>Tried changing ruby versions, and searching the web, but most questions involved deploying the app to heroku, which is not my case.</p>\n\n<p>Docker file:</p>\n\n<pre><code>FROM ruby:2.4.1\nRUN mkdir /zssn\nWORKDIR /zssn\nCOPY Gemfile /zssn/Gemfile\nCOPY Gemfile.lock /zssn/Gemfile.lock\nRUN gem install bundler\nRUN bundle --version\nRUN bundle install\nCOPY . /zssn\n\nCMD [\"rails\", \"server\"]\n</code></pre>\n\n<p>docker-compose-yml</p>\n\n<pre><code>version: '3'\nservices:\n  web:\n    build: .\n    command: rails s -p 3000 -b '0.0.0.0'\n    volumes:\n      - .:/zssn\n    ports:\n      - \"3000:3000\"\n</code></pre>\n\n<p>docker build . --no-cache, seems to be working fine when running the bundler command to install it.</p>\n\n<pre><code> ---&gt; Running in d4650608f428\nSuccessfully installed bundler-2.0.1\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "serialization"], "comments": [{"owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 0, "creation_date": 1556566110, "post_id": 55909489, "comment_id": 98474621, "body": "try update_attributes"}, {"owner": {"reputation": 25, "user_id": 5832536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/797c9e7cf5f0754215f33bd631cef9cb?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Ahuja", "link": "https://stackoverflow.com/users/5832536/rahul-ahuja"}, "reply_to_user": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 0, "creation_date": 1556566335, "post_id": 55909489, "comment_id": 98474704, "body": "update_attributes does not work either. And AFAIK, update_attribute calls update_attributes internally"}, {"owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 0, "creation_date": 1556566735, "post_id": 55909489, "comment_id": 98474819, "body": "there is a difference between two."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5832536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/797c9e7cf5f0754215f33bd631cef9cb?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Ahuja", "link": "https://stackoverflow.com/users/5832536/rahul-ahuja"}, "edited": false, "score": 0, "creation_date": 1556567024, "post_id": 55909763, "comment_id": 98474923, "body": "I understand the difference between these methods. Just realized someone changed a before_create to before_save. Lost 2.5 hours on this"}], "tags": [], "owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "is_accepted": true, "score": 0, "last_activity_date": 1556566591, "creation_date": 1556566591, "answer_id": 55909763, "question_id": 55909489, "link": "https://stackoverflow.com/questions/55909489/save-does-not-save-updated-value-object-when-using-serializer/55909763#55909763", "title": "save! does not save updated value object when using Serializer", "body": "<p>See doc: <a href=\"https://maxivak.com/update_attribute-and-update_attributes-ruby-on-rails/\" rel=\"nofollow noreferrer\">https://maxivak.com/update_attribute-and-update_attributes-ruby-on-rails/</a></p>\n\n<p>See link: <a href=\"https://stackoverflow.com/questions/14415857/rails-update-column-works-but-not-update-attributes\">Rails: update_column works, but not update_attributes</a></p>\n\n<p>update_column doesn't validate the record, doesn't call callbacks, doesn't call save method, though it does update record in the database.</p>\n\n<p>May be some callbacks restrict to save this by using update_attribute.</p>\n\n<p>Just use update_attributes as update_attributes tries to validate the record, calls callbacks and saves. You can check the error then.</p>\n\n<p>update_attribute doesn't validate the record, calls callbacks and saves;</p>\n\n<p>You should use update_attributes and avoid the two other methods unless you know exactly what you are doing. If you add validations and callbacks later to your model, using update_attribute and update_column can lead to nasty behaviour that is really difficult to debug.</p>\n"}], "owner": {"reputation": 25, "user_id": 5832536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/797c9e7cf5f0754215f33bd631cef9cb?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Ahuja", "link": "https://stackoverflow.com/users/5832536/rahul-ahuja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 55909763, "answer_count": 1, "score": 0, "last_activity_date": 1556566591, "creation_date": 1556565200, "question_id": 55909489, "link": "https://stackoverflow.com/questions/55909489/save-does-not-save-updated-value-object-when-using-serializer", "title": "save! does not save updated value object when using Serializer", "body": "<p>I have an events object which is a wrapper around hash in ruby. I use it to store events that have occurred and are yet to occur. Infomration includes planned date, actual date event type mode of event etc.</p>\n\n<p>I made use of serialize method in Active Record to load the events object. It is being stored as jsonb in posgresql .</p>\n\n<p>When i call save! or update_attribute on it, it does not add the new transshipment event to it\nbut when i call update_column, it produces desired result.</p>\n\n<p>here is my code to update events</p>\n\n<pre><code>    serialize :events, Shipload::Events::Serializer\n\n    def add_transshipment_event\n      self.events.add_transshipment\n      # update_column(:events, self.events)\n      update_attribute(:events, self.events)\n      # save!\n    end\n</code></pre>\n\n<p>here is events.rb</p>\n\n<pre><code>class Shipload\nclass Events\n\nattr_reader :events\n\n# Takes a hash of events\n#\n# @param [Hash]\ndef initialize(events)\n  unless events.present?\n    events = {}\n    events[Shipload::Events::Event::GATE_IN_EVENT_KEY] = Shipload::Events::Event.new(event_type: Shipload::Events::Event::GATE_IN)\n    events[Shipload::Events::Event::ORIGIN_DEPARTURE_EVENT_KEY] = Shipload::Events::Event.new(event_type: Shipload::Events::Event::ORIGIN_DEPARTURE)\n    events[Shipload::Events::Event::ARRIVAL_EVENT_KEY] = Shipload::Events::Event.new(event_type: Shipload::Events::Event::ARRIVAL)\n    events[Shipload::Events::Event::GATE_OUT_EVENT_KEY] = Shipload::Events::Event.new(event_type: Shipload::Events::Event::GATE_OUT)\n  end\n  @events = events\nend\n\n# Takes in the event has received from HTTP request and translates it into {Shipload::Events} object\n#\n# @param events_hash [Hash]\n# @return [Shipload::Events]\ndef self.parse(events_hash)\n  events_hash = events_hash[\"events\"]\n  events = {}\n  events_hash.keys.each do |key|\n    event = events_hash[key]\n    event[\"mode\"] = event[\"mode\"].present? ? event[\"mode\"].to_i : nil\n    event[\"planned_date\"] = event[\"planned_date\"].present? ? event[\"planned_date\"].to_datetime : nil\n    event[\"original_planned_date\"] = event[\"original_planned_date\"].present? ? event[\"original_planned_date\"].to_datetime : nil\n    event[\"actual_date\"] = event[\"actual_date\"].present? ? event[\"actual_date\"].to_datetime : nil\n    event[\"event_type\"] = event[\"event_type\"].present? ? event[\"event_type\"].to_i : nil\n    events[key] = Shipload::Events::Event.new(Util.to_h_with_symbol_keys(event))\n  end\n  new(events)\nend\n\n# Returns total number of events\n#\n# @return [Integer]\ndef count\n  @events.count\nend\n\n# Returns the arrival event if present, nil otherwise\n#\n# @return [Shipload::Events::Event]\ndef arrival_event\n  @events[Shipload::Events::Event::ARRIVAL_EVENT_KEY]\nend\n\n# Returns event identified by key\n#\n# @param key [String/ Float]\n# @return [Shipload::Events::Event]\ndef [](key)\n  @events[key.to_s]\nend\n\n# Assigns Event to the key in events\n#\n# @param key [String/ Float]\n# @return [Shipload::Events::Event]\ndef []=(key, event)\n  @events[key.to_s] = event\nend\n\n# Returns all the values of @events hash\n#\n# @return [Array]\ndef values\n  @events.values\nend\n\n# Returns all the keys in @events hash\n#\n# @return [Array]\ndef keys\n  @events.keys.sort\nend\n\n# # Returns the Events object in hash format\n# #\n# @return [Hash]\ndef to_h\n  @events.to_h\nend\n\n# Adds a transhipment arrival and departure event.\ndef add_transshipment\n  add_trans_arrival_event\n  add_trans_departure_event\nend\n\n# Deletes latest transhipment arrival and departure event.\ndef delete_transshipment\n  sorted_transshipment_keys = @events.keys.sort[2..-3]\n  2.times do\n    @events.except!(sorted_transshipment_keys.last) if sorted_transshipment_keys.present?\n    sorted_transshipment_keys -= [sorted_transshipment_keys.last]\n  end\nend\n\n# Returns the current event. The most latest event with actual date set is current event\n#\n# @return [Event]\ndef current_event\n  keys.sort.reverse.each do |key|\n    return self.events[key] if self.events[key].actual_date.present?\n  end\n  nil\nend\n\n# Returns the next event. It is the event after current event. In case of current_event being nil,\n# it returns first event.\n#\n# @return [Event]\ndef next_event(current_event)\n  current_event.nil? ? @events.first.last : @events[keys[keys.index(@events.key(current_event)) + 1]]\nend\n\n# Sorts the events on basis of keys\ndef sort_on_keys!\n  @events = @events.sort.to_h\nend\n\n# Returns total events present\n#\n# @return [Integer]\ndef total_events\n  @events.length\nend\n\n# Returns total events yet to occur\n#\n# @return [Integer]\ndef pending_events\n  total_events - completed_events\nend\n\n# Returns total events which have occured\n#\n# @return [Integer]\ndef completed_events\n  keys.index(@events.key(current_event)).present? ? keys.index(@events.key(current_event)).to_i + 1 : 0\nend\n\nprivate\n\n# Returns the next key to be\ndef generate_transshipment_event_key\n  key = @events.keys.sort[2..-3].last || Shipload::Events::Event::TRANS_SHIPMENT_MASTER_KEY\n  integer_part, fraction_part = key.split(\".\")\n  fraction_part = fraction_part.to_i + Shipload::Events::Event::TRANS_SHIPMENT_KEY_STEP\n  integer_part+\".\"+format(\"%02d\",fraction_part)\nend\n\ndef add_trans_arrival_event\n  key = generate_transshipment_event_key\n  trans_arrival = Shipload::Events::Event.new(event_type: Shipload::Events::Event::TRANS_SHIPMENT_ARRIVAL)\n  @events[key] = trans_arrival\nend\n\ndef add_trans_departure_event\n  key = generate_transshipment_event_key\n  trans_departure = Shipload::Events::Event.new(event_type: Shipload::Events::Event::TRANS_SHIPMENT_DEPARTURE)\n  @events[key] = trans_departure\nend\n\ndef latest_transshipment_event\n  @events[@events.keys.sort[2..-3].last] || nil\nend\nend\nend\n</code></pre>\n\n<p>serializer.rb</p>\n\n<pre><code>class Shipload\nclass Events\nclass Serializer\n  # Translates events object to format which can be stored in DB\n  #\n  # @param [Shipload::Events]\n  # @return [Hash]\n  def self.dump(events)\n    byebug\n    events.to_h\n  end\n\n  def self.load(events_h)\n    events = {}\n    if events_h.present?\n      events_h.each do |key, value|\n        %w(planned_date actual_date original_planned_date).each do |date|\n          value[date] = value[date].to_datetime unless value[date].nil?\n        end\n        events[key] = Shipload::Events::Event.new(Util.to_h_with_symbol_keys(value))\n      end\n    end\n    Shipload::Events.new(events)\n  end\nend\nend\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "edited": false, "score": 0, "creation_date": 1556562991, "post_id": 55908896, "comment_id": 98473391, "body": "Seems like your javascript is turned off, check: <a href=\"https://stackoverflow.com/questions/4423314/link-to-delete-url-is-not-working\" title=\"link to delete url is not working\">stackoverflow.com/questions/4423314/&hellip;</a>"}, {"owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 0, "creation_date": 1556563042, "post_id": 55908896, "comment_id": 98473408, "body": "Can you show me  the routes.rb file?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1556563125, "post_id": 55908896, "comment_id": 98473447, "body": "You have a typo on line 2 <code>@proeject</code>."}, {"owner": {"reputation": 25, "user_id": 6676903, "user_type": "registered", "profile_image": "https://graph.facebook.com/889946557781820/picture?type=large", "display_name": "Hao Wen", "link": "https://stackoverflow.com/users/6676903/hao-wen"}, "reply_to_user": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 0, "creation_date": 1556563280, "post_id": 55908896, "comment_id": 98473508, "body": "@PragyaSriharsh I have put routes file"}, {"owner": {"reputation": 25, "user_id": 6676903, "user_type": "registered", "profile_image": "https://graph.facebook.com/889946557781820/picture?type=large", "display_name": "Hao Wen", "link": "https://stackoverflow.com/users/6676903/hao-wen"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1556563372, "post_id": 55908896, "comment_id": 98473547, "body": "@max i have corrected it, but it is not a main problem."}, {"owner": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "edited": false, "score": 0, "creation_date": 1556563452, "post_id": 55908896, "comment_id": 98473575, "body": "Do you see a confirmation dialogue box when you click delete?"}, {"owner": {"reputation": 25, "user_id": 6676903, "user_type": "registered", "profile_image": "https://graph.facebook.com/889946557781820/picture?type=large", "display_name": "Hao Wen", "link": "https://stackoverflow.com/users/6676903/hao-wen"}, "reply_to_user": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "edited": false, "score": 0, "creation_date": 1556563621, "post_id": 55908896, "comment_id": 98473634, "body": "@imechemi it just shows an error."}, {"owner": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "edited": false, "score": 0, "creation_date": 1556563890, "post_id": 55908896, "comment_id": 98473760, "body": "Based on workflow, you should see the confirmation dialogue first (which happens with the help of javascript) and then next would be the error you have found."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6676903, "user_type": "registered", "profile_image": "https://graph.facebook.com/889946557781820/picture?type=large", "display_name": "Hao Wen", "link": "https://stackoverflow.com/users/6676903/hao-wen"}, "edited": false, "score": 0, "creation_date": 1556564209, "post_id": 55909222, "comment_id": 98473890, "body": "Your answer is correct and it has shown delete button. But after clicking delete button it shows undefined method `interfaces&#39; for nil:NilClass"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 25, "user_id": 6676903, "user_type": "registered", "profile_image": "https://graph.facebook.com/889946557781820/picture?type=large", "display_name": "Hao Wen", "link": "https://stackoverflow.com/users/6676903/hao-wen"}, "edited": false, "score": 0, "creation_date": 1556564367, "post_id": 55909222, "comment_id": 98473953, "body": "@HaoWen that is because you do not set <code>@project</code> in the destroy action like you do in say the new action ` @project = Project.find(params[:project_id])`"}, {"owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 0, "creation_date": 1556564620, "post_id": 55909222, "comment_id": 98474063, "body": "It means @project contain nil value. Debug and check the value of this. May be you  are not including :destroy in your callback that find the project_id and assigned to theinstance variable. Otherwise you can do this in destroy function too."}, {"owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 0, "creation_date": 1556564868, "post_id": 55909222, "comment_id": 98474152, "body": "@project = Project.find(params[:project_id])  ...........  interface = @project.interfaces.find(params[:id])  ........... interface.destroy"}], "tags": [], "owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "is_accepted": true, "score": 0, "last_activity_date": 1556563859, "creation_date": 1556563859, "answer_id": 55909222, "question_id": 55908896, "link": "https://stackoverflow.com/questions/55908896/actioncontrollerurlgenerationerror-in-interfacesindex/55909222#55909222", "title": "ActionController::UrlGenerationError in Interfaces#index", "body": "<p>Try this: </p>\n\n<pre><code>&lt;%= link_to '\u5220\u9664', project_interface_path(@project.id, interface.id),method: :delete, data:{confirm:'\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f'}, class: 'badge badge-dark' %&gt;&lt;/td&gt;\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6676903, "user_type": "registered", "profile_image": "https://graph.facebook.com/889946557781820/picture?type=large", "display_name": "Hao Wen", "link": "https://stackoverflow.com/users/6676903/hao-wen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55909222, "answer_count": 1, "score": 0, "last_activity_date": 1556569589, "creation_date": 1556562275, "last_edit_date": 1556569589, "question_id": 55908896, "link": "https://stackoverflow.com/questions/55908896/actioncontrollerurlgenerationerror-in-interfacesindex", "title": "ActionController::UrlGenerationError in Interfaces#index", "body": "<p>I am trying to delete my interface,and it said </p>\n\n<blockquote>\n  <p>No route matches {:action=>\"show\", :controller=>\"interfaces\", :project_id=>#}, missing required keys: [:id].</p>\n</blockquote>\n\n<p>Because I do not know which arguments should be put into <code>&lt;%=link_to '\u5220\u9664', project_interface_path()%&gt;</code></p>\n\n<p>I have tried many different arguments into a path.</p>\n\n<h3>interface_controller.rb</h3>\n\n<pre><code>def destroy\n  @interface = @project.interfaces.find(params[:project_id])\n  redirect_to project_interfaces_path if @interface.destroy\nend\n\ndef index\n  @interfaces = Interface.all\n  @project = Project.find(params[:project_id])\nend\n\ndef new\n  @project = Project.find(params[:project_id])\n  @interface = Interface.new\nend\n\ndef create\n  @project = Project.find(params[:project_id])\n  @interface = @project.interfaces.new(interface_params)\n  if @interface.save\n    redirect_to project_interfaces_path\n  else\n    render :new\n  end\nend\n</code></pre>\n\n<h3>interface/index.html.erb</h3>\n\n<pre><code>&lt;% @interfaces.each do |interface| %&gt;\n  &lt;tr&gt;\n    &lt;th scope=\"row\"&gt;1&lt;/th&gt;\n    &lt;td&gt;&lt;%=interface.name %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%=interface.desp %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%=interface.method_type_id %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%=interface.request_url %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%=interface.request_eg %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%=interface.response_eg %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;td&gt;&lt;%= link_to '\u5220\u9664', project_interface_path(interface),method: :delete, data:{confirm:'\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f'}, class: 'badge badge-dark' %&gt;&lt;/td&gt;\n</code></pre>\n\n<h3>This is my route file:</h3>\n\n<pre><code>Rails.application.routes.draw do\n\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\n  root \"method_types#index\"\n\n  resources :method_types\n  resources :field_types\n  resources :projects do\n    resources :interfaces\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-api", "trello"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1556551251, "creation_date": 1556551251, "answer_id": 55906337, "question_id": 55905974, "link": "https://stackoverflow.com/questions/55905974/where-i-need-to-place-ruby-trello-gems-config-code/55906337#55906337", "title": "Where I need to place ruby-trello gem&#39;s config code?", "body": "<p>The Rails convention is to put that in <code>config/initializers/trello.rb</code> so that it's picked up when Rails boots.</p>\n\n<p>It's odd they don't seem to mention that in the documentation.</p>\n"}], "owner": {"reputation": 119, "user_id": 8319323, "user_type": "registered", "profile_image": "https://graph.facebook.com/1344036448998167/picture?type=large", "display_name": "Anatolii Stupin", "link": "https://stackoverflow.com/users/8319323/anatolii-stupin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 55906337, "answer_count": 1, "score": 2, "last_activity_date": 1556551251, "creation_date": 1556549892, "question_id": 55905974, "link": "https://stackoverflow.com/questions/55905974/where-i-need-to-place-ruby-trello-gems-config-code", "title": "Where I need to place ruby-trello gem&#39;s config code?", "body": "<p>I am creating rails API app for managing Trello related boards and lists.\nI have decided to use \"ruby-trello\" gem. </p>\n\n<p>There is a config example at github ruby-trello page (<a href=\"https://github.com/jeremytregunna/ruby-trello\" rel=\"nofollow noreferrer\">https://github.com/jeremytregunna/ruby-trello</a>).</p>\n\n<p>Config looks like this:</p>\n\n<pre><code>Trello.configure do |config|\n  config.developer_public_key = 'my_trello_key'\n  config.member_token = 'my_trello_token'\nend\n</code></pre>\n\n<p>I got key and token from trello devs.\nI have added this code to my config/application.rb in class Application.\nBut when I am trying to get something data from Trello I see this error:</p>\n\n<pre><code>Trello::ConfigurationError (Trello has not been configured to make authorized requests.)\n</code></pre>\n\n<p>Can anybody help? Where I need to place this config code?</p>\n\n<p>Sorry for my English.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database-design", "data-modeling"], "comments": [{"owner": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 0, "creation_date": 1556582704, "post_id": 55905629, "comment_id": 98479252, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3579079/how-can-you-represent-inheritance-in-a-database\">How can you represent inheritance in a database?</a>"}, {"owner": {"reputation": 304, "user_id": 3132725, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/883bd08a938bcd8efacdca27806037e5?s=128&d=identicon&r=PG&f=1", "display_name": "mgs", "link": "https://stackoverflow.com/users/3132725/mgs"}, "reply_to_user": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 0, "creation_date": 1556627639, "post_id": 55905629, "comment_id": 98495754, "body": "@philipxy Yes. Looks like it. +1 for the link."}], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 3132725, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/883bd08a938bcd8efacdca27806037e5?s=128&d=identicon&r=PG&f=1", "display_name": "mgs", "link": "https://stackoverflow.com/users/3132725/mgs"}, "edited": false, "score": 1, "creation_date": 1556628008, "post_id": 55912186, "comment_id": 98495942, "body": "thanks for the answer. The second option you&#39;ve mentioned looks like a good fit for my problem, since the values will be stored in different tables. Regarding querying for all the types, I don&#39;t see that happening often other than some admin reports on user login behaviours(which won&#39;t be needed much) Other values that these will hold will be mostly configuration values like id&#39;s for external service and status related to that particular app in question. Also performing X number of join will be okay since X is fixed at 3 now and it can go upto 5 in next 2 years not more than that."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1556582534, "last_edit_date": 1556582534, "creation_date": 1556582046, "answer_id": 55912186, "question_id": 55905629, "link": "https://stackoverflow.com/questions/55905629/modeling-user-table-for-single-database-multiple-application/55912186#55912186", "title": "Modeling user table for single database multiple application", "body": "<h2>Single table inheritance with JSON.</h2>\n\n<pre><code>class CreateClientAccount &lt; ActiveRecord::Migration[5.2]\n  def change\n    create_table :client_accounts do |t|\n      t.references :user\n      t.string :uid # the unique id on the client application\n      t.string :type\n      t.integer :sign_in_count\n      t.datetime :last_sign_in_at\n      t.jsonb :metadata\n      t.timestamps\n    end\n    add_index :client_accounts, [:user_id, :type], unique: true\n  end\nend\n</code></pre>\n\n<hr>\n\n<pre><code>class User\n  has_many :client_accounts\n  has_one :service_account, class_name: 'ServiceApp::ClientAccount'\n  # ...\nend\n\nclass ClientAccount &lt; ApplicationRecord\n  belongs_to :user\n  validates_uniqueness_of :user_id, scope: :type\nend\n\nmodule ServiceApp\n  class ClientAccount &lt; ::ClientAccount\n  end\nend\n\nmodule SubscriptionApp\n  class ClientAccount &lt; ::ClientAccount\n  end\nend\n\nmodule EcomApp\n  class ClientAccount &lt; ::ClientAccount\n  end\nend\n</code></pre>\n\n<p>This avoids the very unappealing duplication of having X number of tables in the schema to maintain and the JSONB column still gives you a ton of flexibility. However its in many ways just an upgrade over the <a href=\"https://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model\" rel=\"nofollow noreferrer\">EAV pattern</a>.</p>\n\n<p>It also has a lot in common with MTI. In MTI you would use an association to another table which fills the same purpose as the JSON column - to make the relational model more flexible. This can either be polymorphic or you can have X number of foreign keys for each specific type.</p>\n\n<h2>One table for each type.</h2>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_one :subscription_account\n  has_one :service_account \n  # ...\nend\n\nclass ClientAccount &lt; ApplicationModel\n  self.abstract_class = true \n  belongs_to :user\nend\n\nclass SubscriptionAccount &lt; ClientAccount\nend\n\nclass ServiceAccount &lt; ClientAccount\nend\n\n# ...\n</code></pre>\n\n<p>This is the most flexible option but if you want to add a feature you will have to create migrations for each and every table. And this also means that you can't query a single homogenous collection if you want all the types. You have to perform X number of joins.</p>\n\n<p>This is not really that appealing unless the requirements for each type are wildly different.</p>\n"}], "owner": {"reputation": 304, "user_id": 3132725, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/883bd08a938bcd8efacdca27806037e5?s=128&d=identicon&r=PG&f=1", "display_name": "mgs", "link": "https://stackoverflow.com/users/3132725/mgs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556582534, "creation_date": 1556548641, "question_id": 55905629, "link": "https://stackoverflow.com/questions/55905629/modeling-user-table-for-single-database-multiple-application", "title": "Modeling user table for single database multiple application", "body": "<p>Say we have 3 different applications - serviceapp, subscriptionapp, ecomapp, all written in ruby on rails and uses the same database in backend and tables in the backend. So the user table for all these three applications are same. If a user is part of serviceapp using the same email and credentials he can login into subscriptionapp or ecomapp and vice versa.</p>\n\n<p>The reason behind choosing same user table and other table for all the application is puerly business perspective - same single crm and ticketing system for sales and cdm team to track everything. Devise is being used in all three applications along with LDAP so login and signup works fine without any issue.</p>\n\n<p><strong>Problem:</strong></p>\n\n<p>Till now users' last_login_at is a single column so we really can't tell which app he last logged in at. But now we have to start logging these details separately, like when did he last login at serviceapp, ecomapp, subscription app separetly. </p>\n\n<p>Also we are starting to use a new crm of one particular app -  subscriptionapp and for the clients(users) of that particular app we have to store extra information like unq_id from crm and so on.</p>\n\n<p>My intial thought is to add these columns in the user table itself. But in the future we might add few extra information to user table which are app specific. Hence adding it to the main user table won't be a good idea for this. How shall I proceed in this case? I though of creating three different tables like subscriptionapp_client, ecomapp_client, serviceapp_client had associating them with the user table like user has_one ***_client. </p>\n\n<p>If the association is present like if <code>user.subscriptionapp_client.present?</code> he is a client of that app and we can store the last login at, crm_uniq_id and all in there in that table itself.</p>\n\n<p>Is there anyother good approach that might fit the problem here? I am reading about MTI but it looks like it won't solve the problem. </p>\n"}, {"tags": ["ruby", "environment-variables", "google-cloud-datastore", "gitlab-ci"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556552818, "post_id": 55905599, "comment_id": 98468994, "body": "does this answer help at all? <a href=\"https://stackoverflow.com/questions/43226786/google-cloud-functions-environment-variables\" title=\"google cloud functions environment variables\">stackoverflow.com/questions/43226786/&hellip;</a>"}, {"owner": {"reputation": 464, "user_id": 6430382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9437919f33eae9a968334de447c6dccd?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/6430382/robert"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1557150238, "post_id": 55905599, "comment_id": 98658476, "body": "gave up and decided to have the env variables in the app.yaml file before deploying and not commit them."}], "owner": {"reputation": 464, "user_id": 6430382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9437919f33eae9a968334de447c6dccd?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/6430382/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556548973, "creation_date": 1556548544, "last_edit_date": 1556548973, "question_id": 55905599, "link": "https://stackoverflow.com/questions/55905599/how-to-get-gitlab-ci-variables-into-the-sinatra-app-to-query-google-cloud-datast", "title": "How to get GitLab CI variables into the Sinatra app to query Google Cloud Datastore?", "body": "<p>Short:\nI want to be able to deploy a Sinatra app without hardcoded secrets and variables using Google Cloud App Engine. Deploying to App Engine while ensuring the environment variables get loaded from the Google Cloud Datastore was the suggested option. I hoped to find something similar to the simplicity of Heroku, but this is not the case.</p>\n\n<p>Question:\nHow would I get the $SERVICE_ACCOUNT environment information (that I've set in the GitLab CI / CD section) as the credentials value in <code>foobar.rb</code>?</p>\n\n<p>app.yaml: </p>\n\n<pre><code>image: google/cloud-sdk:latest\n\nbefore_script:\n  - apt-get install -y ruby-full build-essential\n  - gem install bundler\n  - bundle config --global silence_root_warning 1\n  - bundle install\n\nafter_script:\n  - rm /tmp/$CI_PIPELINE_ID.json\n\ndeploy_production:\n  stage: deploy\n  environment: Production\n  only:\n    - production\n  script:\n    - echo $SERVICE_ACCOUNT &gt; /tmp/$CI_PIPELINE_ID.json\n    - gcloud auth activate-service-account --key-file /tmp/$CI_PIPELINE_ID.json\n    - gcloud --quiet --project $PROJECT_ID app deploy app.yaml\n\n</code></pre>\n\n<p>foobar.rb:</p>\n\n<pre><code>\n...\nrequire \"google/cloud/datastore\"\n\nclass App &lt; Sinatra::Application\n  if settings.production?\n\n    data_store = Google::Cloud::Datastore.new(\n      project: 'foobar',\n      credentials: \"???\"\n    )\n\n    query = data_store.query \"kindoffoobar\"\n    results = data_store.run query\n\n    # Set each result as an env variable\n    results[0].properties.to_h.each do |key, value|\n      ENV[key]= value\n    end\n  end\n\n... rest of app\n</code></pre>\n"}, {"tags": ["ruby", "validation", "date"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1556547297, "post_id": 55905211, "comment_id": 98465956, "body": "Using a regular expression perhaps."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1556547316, "post_id": 55905211, "comment_id": 98465967, "body": "&quot;Is .strftime correct to use here?&quot; - no. <code>strptime</code>, on the other hand, will get you 90% there, save for some corner cases. For those, I&#39;d preface it with a regex check."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1556547441, "post_id": 55905211, "comment_id": 98466034, "body": "@SagarPandya: regexes alone won&#39;t be enough. They don&#39;t know anything about dates and their ranges."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1556550960, "post_id": 55905211, "comment_id": 98468006, "body": "@SergioTulentsev A sufficiently ridiculous regular expression can, but it&#39;s not recommended."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1556554357, "post_id": 55905211, "comment_id": 98469749, "body": "Check if the string looks like dddd-dd-dd, then split it on &quot;-&quot;, map the substrings to integers and provide those to <code>Date::valid_date?</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556580536, "post_id": 55905211, "comment_id": 98478853, "body": "If read verbatim, this seems like a simple question. There&#39;s no mention of <code>Date</code> objects or the need to check if a string is a valid representation of a date, and there are only two possible date string formats. If that&#39;s the case, <code>valid = str.length ==  10</code>. Then if <code>str = &quot;13-11-12&quot;</code>, <code>valid = str.len == 10 #=&gt; false</code>, so the correct string would be <code>&quot;20&quot; + str&quot; #=&gt; &quot;2013-11-12&quot;</code>. If we want that to work in future centuries, make that <code>require &#39;date&#39;; Date.today.year.to_s[0,2] + str #=&gt; &quot;2013-11-12&quot;</code>."}, {"owner": {"reputation": 45, "user_id": 11262304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff275d7be4c4f02a5648c68a9b28034?s=128&d=identicon&r=PG&f=1", "display_name": "newkidontheblock", "link": "https://stackoverflow.com/users/11262304/newkidontheblock"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556623655, "post_id": 55905211, "comment_id": 98493627, "body": "@CarySwoveland thanks you&#39;re right, taken literally this does the trick for this exercise"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1556723415, "post_id": 55905211, "comment_id": 98529688, "body": "<code>Date.today.year.to_s[0,2] + str</code> c&#39;mon @CarySwoveland let future generations make a buck on y2.1k"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1556728920, "post_id": 55905211, "comment_id": 98532244, "body": "@steenslag, too bad we won&#39;t be around to witness the &quot;y2.1k&quot; industry and whether that expression (nice!) will be their moniker. I&#39;ve thought being part of the y2k industry must have been purgatory for coders."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1556555170, "post_id": 55906339, "comment_id": 98470119, "body": "Ohh, nice, TIL."}, {"owner": {"reputation": 45, "user_id": 11262304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff275d7be4c4f02a5648c68a9b28034?s=128&d=identicon&r=PG&f=1", "display_name": "newkidontheblock", "link": "https://stackoverflow.com/users/11262304/newkidontheblock"}, "edited": false, "score": 0, "creation_date": 1556623752, "post_id": 55906339, "comment_id": 98493675, "body": "@steenslag thank you for the explanation! How exactly would I include this in my code? Something like this?  <code>if str == Date.xmlschema(&quot;2013-11-12&quot;)    puts str else   puts &quot;Error&quot;</code>  This doesn&#39;t evaluate correctly for me."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 45, "user_id": 11262304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff275d7be4c4f02a5648c68a9b28034?s=128&d=identicon&r=PG&f=1", "display_name": "newkidontheblock", "link": "https://stackoverflow.com/users/11262304/newkidontheblock"}, "edited": false, "score": 0, "creation_date": 1556642564, "post_id": 55906339, "comment_id": 98504355, "body": "@astarisborn This <code>xmlschema</code> method trows an exception when something is wrong. The simplest way to rescue this exception is probably <code>puts  Date.xmlschema(&quot;2013-13-12&quot;) rescue puts &quot;Error&quot;</code>.  See @PragyaSriharsh answer for another way."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556728182, "post_id": 55906339, "comment_id": 98531943, "body": "I had not seen that method previously. Very handy. Do you know why this method, <code>strptime</code> and others respond to invalid strings by raising an exception rather than simply returning <code>nil</code>?"}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 4, "last_activity_date": 1556553396, "last_edit_date": 1556553396, "creation_date": 1556551257, "answer_id": 55906339, "question_id": 55905211, "link": "https://stackoverflow.com/questions/55905211/how-to-check-whether-correct-date-format-has-been-provided/55906339#55906339", "title": "How to check whether correct date format has been provided", "body": "<p><a href=\"https://ruby-doc.org/stdlib-2.4.1/libdoc/date/rdoc/Date.html#method-c-xmlschema\" rel=\"nofollow noreferrer\">Date::xmlschema</a> is strict about this specific format (try this in IRB): </p>\n\n<pre><code>  require 'date'\n\n  Date.xmlschema(\"2013-11-12\") #&lt;Date: 2013-11-12 ((2456609j,0s,0n),+0s,2299161j)&gt;\n\n  #invalid month number:\n  Date.xmlschema(\"2013-13-12\") #&lt;ArgumentError: invalid date&gt;\n\n  # 2 digit year:\n  Date.xmlschema(\"13-11-12\")  #&lt;ArgumentError: invalid date&gt;\n\n  # no leap year:\n  Date.xmlschema(\"2013-02-29\")  #&lt;ArgumentError: invalid date&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "is_accepted": false, "score": 1, "last_activity_date": 1556565681, "creation_date": 1556565681, "answer_id": 55909583, "question_id": 55905211, "link": "https://stackoverflow.com/questions/55905211/how-to-check-whether-correct-date-format-has-been-provided/55909583#55909583", "title": "How to check whether correct date format has been provided", "body": "<p>You can throw the error to the user by using begin..rescue</p>\n\n<pre><code>require 'date'\nbegin\n  Date.parse(\"31-02-2010\")\nrescue =&gt; e \n  p \"#{e}\"  #print your own custom messages and return accordingly\nend  \n</code></pre>\n\n<p>Also write </p>\n\n<blockquote>\n  <p>rescue ArgumentError</p>\n</blockquote>\n\n<p>It will throw By default error</p>\n\n<pre><code>ArgumentError (invalid date)\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 11262304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff275d7be4c4f02a5648c68a9b28034?s=128&d=identicon&r=PG&f=1", "display_name": "newkidontheblock", "link": "https://stackoverflow.com/users/11262304/newkidontheblock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 55906339, "answer_count": 2, "score": 0, "last_activity_date": 1556722478, "creation_date": 1556547198, "last_edit_date": 1556722478, "question_id": 55905211, "link": "https://stackoverflow.com/questions/55905211/how-to-check-whether-correct-date-format-has-been-provided", "title": "How to check whether correct date format has been provided", "body": "<p>I'm currently working through the Well-Grounded Rubyist and have a question about an exercise that is asking to check whether a date provided is in the format 'yyyy-mm-dd' as opposed to 'yy-mm-dd'.</p>\n\n<p>We have a class <code>Ticket</code> and should create a <code>date=</code> method that checks whether the date provided is in the above mentioned format.</p>\n\n<p>Is <code>.strftime</code> correct to use here?</p>\n\n<p>In the end the method should return the date in the correct format and provide an error message for dates in the wrong format, like so:</p>\n\n<pre><code>ticket = Ticket.new\nticket.date = \"2013-11-12\"\n=&gt; \"2013-11-12\"\nticket.date = \"13-11-12\"\n=&gt; \"Please submit the date in the format 'yyyy-mm-dd'.\"\n</code></pre>\n\n<p>Could someone indicate how I could perform these checks on dates?</p>\n"}, {"tags": ["ruby", "http", "curl"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556554449, "post_id": 55904744, "comment_id": 98469793, "body": "can you give an example of the data you&#39;re getting back?"}, {"owner": {"reputation": 1100, "user_id": 1584736, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8c4392528b20b47726142f7a20c7cd?s=128&d=identicon&r=PG", "display_name": "ngw", "link": "https://stackoverflow.com/users/1584736/ngw"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1556554863, "post_id": 55904744, "comment_id": 98469970, "body": "Just updated. It&#39;s actually the body of a multipart request, no big surprise."}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1556554359, "creation_date": 1556554359, "answer_id": 55907166, "question_id": 55904744, "link": "https://stackoverflow.com/questions/55904744/how-to-parse-form-data-from-curl-in-ruby/55907166#55907166", "title": "How to parse form-data from curl in Ruby", "body": "<p>I would recommend you have a look at the <a href=\"https://github.com/taf2/curb\" rel=\"nofollow noreferrer\">curb ruby gem</a></p>\n"}], "owner": {"reputation": 1100, "user_id": 1584736, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8c4392528b20b47726142f7a20c7cd?s=128&d=identicon&r=PG", "display_name": "ngw", "link": "https://stackoverflow.com/users/1584736/ngw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556554823, "creation_date": 1556545577, "last_edit_date": 1556554823, "question_id": 55904744, "link": "https://stackoverflow.com/questions/55904744/how-to-parse-form-data-from-curl-in-ruby", "title": "How to parse form-data from curl in Ruby", "body": "<p>I'm building a lambda function that needs to receive several parameters, including eventually files.</p>\n\n<pre><code>curl -v -H \"Authorization: blah\" -F \"index_name=test\" -F \"document=@./spec/fixtures/config/indexes/video.json\" -X POST https://blah.execute-api.us-east-1.amazonaws.com/dev/index_document\n</code></pre>\n\n<p>I can see from inside my <code>event['body']</code> that I'm receiving my data, but I can't find a way to parse the data and using Rack feels a bit weird.</p>\n\n<pre><code>&lt;--------------------------298624d5b63e53bf\nContent-Disposition: form-data; name=\"index_name\"\n\ntest\n--------------------------298624d5b63e53bf\nContent-Disposition: form-data; name=\"document\"; filename=\"video.json\"\nContent-Type: application/octet-stream\n\n{\n  \"settings\": {\n    \"index\": {\n      \"number_of_shards\": 5\n    }, ...\n</code></pre>\n\n<p>Is there any other way to have my data back in an orderly fashion, like:</p>\n\n<pre><code>&gt;&gt;&gt; event['body']['index_name']\n\"test\"\n</code></pre>\n\n<p>?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby", "multithreading", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "edited": false, "score": 0, "creation_date": 1556614618, "post_id": 55909501, "comment_id": 98488807, "body": "I dont think so. ProcessSet only helps to check how many sidekiq processes you have currently running ie how many <code>bundle exec sidekiq</code> command you have running at a givent moment on your machine... What I am interested in is how many threads within this process I have at a given times working on one of my specific queue"}, {"owner": {"reputation": 6933, "user_id": 26604, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e94ddf54b3d31c6eda0e1c76a58c3e74?s=128&d=identicon&r=PG", "display_name": "Kyle Heironimus", "link": "https://stackoverflow.com/users/26604/kyle-heironimus"}, "edited": false, "score": 0, "creation_date": 1602077888, "post_id": 55909501, "comment_id": 113606073, "body": "I updated this answer to add the <code>concurrency</code>, which is the number of threads"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1602077869, "last_edit_date": 1602077869, "creation_date": 1556565273, "answer_id": 55909501, "question_id": 55904664, "link": "https://stackoverflow.com/questions/55904664/command-to-figure-out-how-many-threads-are-running-for-a-given-queue-in-sidekiq/55909501#55909501", "title": "Command to figure out how many threads are running for a given queue in Sidekiq", "body": "<p>I think you are interested into <a href=\"https://github.com/mperham/sidekiq/wiki/API#processes\" rel=\"nofollow noreferrer\"><code>Sidekiq::ProcessSet.new</code></a>. From the docs:</p>\n<blockquote>\n<p><code>Sidekiq::ProcessSet</code> gets you access to near real-time (updated every 5 sec) info about the current set of Sidekiq processes running. You can remotely control the processes also:</p>\n</blockquote>\n<blockquote>\n<pre><code>ps = Sidekiq::ProcessSet.new\n</code></pre>\n</blockquote>\n<pre><code>ps.size # =&gt; 2\nps.each do |process|\n  p process['busy']     # =&gt; 3\n  p process['hostname'] # =&gt; 'myhost.local'\n  p process['pid']      # =&gt; 16131\n  p process['concurrency'] # =&gt; 10 &lt;- this is the number of threads per process\nend\n</code></pre>\n"}], "owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1602077869, "creation_date": 1556545316, "question_id": 55904664, "link": "https://stackoverflow.com/questions/55904664/command-to-figure-out-how-many-threads-are-running-for-a-given-queue-in-sidekiq", "title": "Command to figure out how many threads are running for a given queue in Sidekiq", "body": "<p>I am exploring the sidekiq API and I am trying to find a way to check for a given queue, how many threads are running at a given moment ( I am using sidekiq limit fetch gem <a href=\"https://github.com/brainopia/sidekiq-limit_fetch\" rel=\"nofollow noreferrer\">https://github.com/brainopia/sidekiq-limit_fetch</a> , and I would like to be sure the limits I have set up in my config file are respected).\nI had a look at <code>workers = Sidekiq::Workers.new</code> which is supposed to hold informations about threads but it doesnt show anything about the number of threads actually.\nIs there a way to find out how many threads are running for a specific queue at a given moment in sidekiq ? </p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556583921, "post_id": 55904372, "comment_id": 98479489, "body": "Please edit to show the desired result for your example."}], "answers": [{"tags": [], "owner": {"reputation": 3388, "user_id": 9534819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbae473f8d26eb6a10d85ab897e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Matt.G", "link": "https://stackoverflow.com/users/9534819/matt-g"}, "is_accepted": true, "score": 1, "last_activity_date": 1556544566, "creation_date": 1556544566, "answer_id": 55904461, "question_id": 55904372, "link": "https://stackoverflow.com/questions/55904372/capturing-optional-data-preceded-by-a-comma/55904461#55904461", "title": "Capturing optional data preceded by a comma", "body": "<p>Try Regex: <code>^(?&lt;balls&gt;[0-3])-(?&lt;strikes&gt;[0-2]): (?&lt;event&gt;.*?(?=,|$))(?:, *(?&lt;outcome&gt;.*$))?</code></p>\n\n<p><a href=\"https://regex101.com/r/3GQk58/1\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 3259, "user_id": 2424975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/jDtKZ.jpg?s=128&g=1", "display_name": "Cereal", "link": "https://stackoverflow.com/users/2424975/cereal"}, "is_accepted": false, "score": 0, "last_activity_date": 1556545631, "creation_date": 1556545631, "answer_id": 55904760, "question_id": 55904372, "link": "https://stackoverflow.com/questions/55904372/capturing-optional-data-preceded-by-a-comma/55904760#55904760", "title": "Capturing optional data preceded by a comma", "body": "<p>Call me old fashion, but this doesn't scream regex to me. It seems like it would be much easier to do this without it, granted I don't know your actual specs.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def get_stuff(str)\n  score, details = str.split(':')\n  balls, strikes = score.split('-')\n  event, *outcome = details.split(',')\n  return [balls, strikes, event.strip, outcome.join(' ').strip]\nend\n\ninput = File.read('input.txt')\ninput.lines.each do |line|\n  p get_stuff(line)\nend\n</code></pre>\n\n<p>Outputs </p>\n\n<pre><code>[\"0\", \"0\", \"Called Strike\", \"\"]\n[\"0\", \"1\", \"Foul ball\", \"location\"]\n[\"0\", \"2\", \"Double\", \"(Line Drive  3D)\"]\n[\"0\", \"0\", \"Foul Ball\", \"location\"]\n[\"0\", \"1\", \"Ball\", \"\"]\n[\"1\", \"1\", \"Double\", \"(Line Drive  9LD)\"]\n[\"0\", \"0\", \"Called Strike\", \"\"]\n[\"0\", \"1\", \"Ball\", \"\"]\n[\"1\", \"1\", \"Foul Ball\", \"location\"]\n[\"1\", \"2\", \"Ball\", \"\"]\n[\"2\", \"2\", \"Ball\", \"\"]\n[\"3\", \"2\", \"Ground out\", \"3-1 (Groundball  34)\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91443, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": false, "score": 1, "last_activity_date": 1556547692, "last_edit_date": 1556547692, "creation_date": 1556547207, "answer_id": 55905216, "question_id": 55904372, "link": "https://stackoverflow.com/questions/55904372/capturing-optional-data-preceded-by-a-comma/55905216#55905216", "title": "Capturing optional data preceded by a comma", "body": "<p>You could indeed make the last part optional by using an optional non capturing group <code>(?:,\\h*(?&lt;outcome&gt;.*$))?</code> and match a comma followed by 0+ times a horizontal whitespace character using <code>\\h*</code>.</p>\n\n<p>But you could also update this part <code>.*?(?=,|$)</code> to use a <a href=\"https://www.regular-expressions.info/charclass.html#negated\" rel=\"nofollow noreferrer\">negated character class</a> <code>[^,\\n\\r]*</code> to prevent unnecessary backtracking.</p>\n\n<p>Your expression might look like:</p>\n\n<pre><code>^(?&lt;balls&gt;[0-3])-(?&lt;strikes&gt;[0-2]): (?&lt;event&gt;[^,\\n]*)(?:,\\h*(?&lt;outcome&gt;.*$))?\n                                             ^^^^^^^ \n</code></pre>\n\n<p>See a <a href=\"https://rubular.com/r/5RpgjB1t9uLtrb\" rel=\"nofollow noreferrer\">Rubular demo</a></p>\n\n<p>Instead of using <code>^</code> and <code>$</code> you might also opt for using <code>\\A</code> and <code>\\Z</code> <a href=\"https://www.regular-expressions.info/anchors.html#az\" rel=\"nofollow noreferrer\">anchors</a> to assert the beginning and end of the string.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1556597473, "creation_date": 1556597473, "answer_id": 55913860, "question_id": 55904372, "link": "https://stackoverflow.com/questions/55904372/capturing-optional-data-preceded-by-a-comma/55913860#55913860", "title": "Capturing optional data preceded by a comma", "body": "<p>You have a listed a few events that may occur in a game of Baseball: called strike, ball, double and ground out. That is of course just the tip of the iceberg: fly out, foul out, single, triple, home run, sacrifice, error, stolen base, thrown out attempting steal, double play, triple play and others. For the event information to be useful each type of event must examined separately. To attempt to do that with a single regular expression is in my opinion folly. Below is an approach that might be considered. The <code>case</code> statement would have to be expanded greatly to include, among others, the events I mentioned above.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def parse_events(arr)\n  arr.map do |s|\n    event = s[/\\p{Lu}[\\p{L} ]*(?=\\,|\\z)/].strip.downcase\n    { event: event, count: s[0,3] }.merge(\n    case event\n    when \"called strike\", \"ball\"\n      {} \n    when \"foul ball\"\n      { location: s[/\\d\\p{L}+\\z/] }\n    when \"double\"  \n      { type:     s[/(?&lt;=\\()[\\p{L} ]+/].downcase,\n        location: s[/\\d\\p{L}+(?=\\)\\z)/] }\n    when \"ground out\"\n      { sequence: s[/(?&lt;=, )\\d\\-\\d/],\n        type:     s[/(?&lt;=\\()[\\p{L} ]+/],\n        location: s[/\\d+(?=\\)\\z)/] }\n    else  \n      # raise exception\n    end)\n end\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>arr = &lt;&lt;-END.split(\"\\n\").map(&amp;:strip)\n0-0: Called Strike\n0-1: Foul ball, location: 2F\n0-2: Double, (Line Drive, 3D)\n0-0: Foul Ball, location: 2F\n0-1: Ball\n1-1: Double, (Line Drive, 9LD)\n0-0: Called Strike\n0-1: Ball\n1-1: Foul Ball, location: 2F\n1-2: Ball\n2-2: Ball\n3-2: Ground out, 3-1 (Groundball, 34)\nEND\n  #=&gt; [\"0-0: Called Strike\",\n  #    \"0-1: Foul ball, location: 2F\",\n  #    \"0-2: Double, (Line Drive, 3D)\",\n  #    \"0-0: Foul Ball, location: 2F\",\n  #    \"0-1: Ball\",\n  #    \"1-1: Double, (Line Drive, 9LD)\",\n  #    \"0-0: Called Strike\",\n  #    \"0-1: Ball\",\n  #    \"1-1: Foul Ball, location: 2F\",\n  #    \"1-2: Ball\",\n  #    \"2-2: Ball\",\n  #    \"3-2: Ground out, 3-1 (Groundball, 34)\"]\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>parse_events arr\n  #=&gt; [{:event=&gt;\"called strike\", :count=&gt;\"0-0\"},\n  #    {:event=&gt;\"foul ball\", :count=&gt;\"0-1\", :location=&gt;\"2F\"},\n  #    {:event=&gt;\"double\", :count=&gt;\"0-2\", :type=&gt;\"line drive\", :location=&gt;\"3D\"},\n  #    {:event=&gt;\"foul ball\", :count=&gt;\"0-0\", :location=&gt;\"2F\"},\n  #    {:event=&gt;\"ball\", :count=&gt;\"0-1\"},\n  #    {:event=&gt;\"double\", :count=&gt;\"1-1\", :type=&gt;\"line drive\", :location=&gt;\"9LD\"},\n  #    {:event=&gt;\"called strike\", :count=&gt;\"0-0\"},\n  #    {:event=&gt;\"ball\", :count=&gt;\"0-1\"},\n  #    {:event=&gt;\"foul ball\", :count=&gt;\"1-1\", :location=&gt;\"2F\"},\n  #    {:event=&gt;\"ball\", :count=&gt;\"1-2\"},\n  #    {:event=&gt;\"ball\", :count=&gt;\"2-2\"},\n  #    {:event=&gt;\"ground out\", :count=&gt;\"3-2\", :sequence=&gt;\"3-1\",\n  #     :type=&gt;\"Groundball\", :location=&gt;\"34\"}] \n</code></pre>\n"}], "owner": {"reputation": 7468, "user_id": 303675, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/87dff789ba8bd4c43d82360c9a23b514?s=128&d=identicon&r=PG", "display_name": "TheDelChop", "link": "https://stackoverflow.com/users/303675/thedelchop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 55904461, "answer_count": 4, "score": 0, "last_activity_date": 1556597473, "creation_date": 1556544296, "last_edit_date": 1556578551, "question_id": 55904372, "link": "https://stackoverflow.com/questions/55904372/capturing-optional-data-preceded-by-a-comma", "title": "Capturing optional data preceded by a comma", "body": "<p>I've got some text strings as follows that I'd like to match on, optionally capturing the \"outcome\" info if it is present:</p>\n\n<pre><code>0-0: Called Strike\n0-1: Foul ball, location: 2F\n0-2: Double, (Line Drive, 3D)\n0-0: Foul Ball, location: 2F\n0-1: Ball\n1-1: Double, (Line Drive, 9LD)\n0-0: Called Strike\n0-1: Ball\n1-1: Foul Ball, location: 2F\n1-2: Ball\n2-2: Ball\n3-2: Ground out, 3-1 (Groundball, 34)\n</code></pre>\n\n<p>For the time being I have the following regex that I've been developing:</p>\n\n<p><code>^(?&lt;balls&gt;[0-3])-(?&lt;strikes&gt;[0-2]): (?&lt;event&gt;.*?(?=,|$))(?&lt;outcome&gt;.*$)</code></p>\n\n<p>Which works <em>pretty</em> well, but when it comes to the <code>outcome</code> component of the match, it includes all of the spaces in the data, so for a line like:</p>\n\n<p><code>0-1: Foul ball, location: 2F</code>, the <code>outcome</code> match is <code>, location: 2F</code>.  </p>\n\n<p>Any refinement of the match group <code>outcome</code> results in the un-matching of all of the lines that don't have extra data separated by the comma.</p>\n\n<p>Can anyone help me finish the regex expression so that it will capture everything after a <code>,</code> and a <code>SPC</code> as <code>outcome</code> while still matching the columns that don't have the <code>,</code>?</p>\n"}, {"tags": ["html", "ruby", "carousel", "haml"], "owner": {"reputation": 21, "user_id": 10580451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98eefb990260721d01f6edfaad5a0f43?s=128&d=identicon&r=PG&f=1", "display_name": "M. Ito", "link": "https://stackoverflow.com/users/10580451/m-ito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1581308694, "creation_date": 1556544191, "last_edit_date": 1581308694, "question_id": 55904337, "link": "https://stackoverflow.com/questions/55904337/how-to-add-image-in-a-given-directory-to-carousel", "title": "How to add image in a given directory to carousel", "body": "<p>I have this carousel code, which works fine, but its images are pointing o external links. I would like to point to some directory instead, however I can't get it to work. </p>\n\n<p>I've tried:</p>\n\n<pre><code>.item.active\n            %img{:alt =&gt; \"\", :src =&gt; \"/images/img1.jpg\"}/\n.item\n            %img{:alt =&gt; \"\", :src =&gt; \"/images/img2.jpg\"}/\n.item\n            %img{:alt =&gt; \"\", :src =&gt; \"/images/img3.jpg\"}/\n\n</code></pre>\n\n<pre><code>%div{class: 'col-xs-12 col-sm-12'}\n%section#carousel\n  .row\n    .col-md-12\n      #myCarousel.carousel.slide\n        %ol.carousel-indicators\n          %li.active{\"data-slide-to\" =&gt; \"0\", \"data-target\" =&gt; \"#myCarousel\"}\n          %li{\"data-slide-to\" =&gt; \"1\", \"data-target\" =&gt; \"#myCarousel\"}\n          %li{\"data-slide-to\" =&gt; \"2\", \"data-target\" =&gt; \"#myCarousel\"}\n        / Carousel items\n        .carousel-inner\n          .item.active\n            %img{:alt =&gt; \"\", :src =&gt; \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/67/London_Eye_%281302205182%29.jpg/1024px-London_Eye_%281302205182%29.jpg\"}/\n          .item\n            %img{:alt =&gt; \"\", :src =&gt; \"https://upload.wikimedia.org/wikipedia/commons/1/1e/Buckingham_palace_london_2004-09-05.JPG\"}/\n          .item\n            %img{:alt =&gt; \"\", :src =&gt; \"https://upload.wikimedia.org/wikipedia/commons/c/c5/Queens%27_Building%2C_Queen_Mary_University_of_London.jpg\"}/\n\n</code></pre>\n\n<p>But the images aren't loaded. What can I do to make it work?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "sphinx", "thinking-sphinx"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9489957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SMfyE.jpg?s=128&g=1", "display_name": "ramzieus", "link": "https://stackoverflow.com/users/9489957/ramzieus"}, "edited": false, "score": 0, "creation_date": 1556797802, "post_id": 55912091, "comment_id": 98555512, "body": "Yes that exactly what I do thanks a lot Par Iread your previous answers"}], "tags": [], "owner": {"reputation": 15586, "user_id": 54500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gg5v8.jpg?s=128&g=1", "display_name": "pat", "link": "https://stackoverflow.com/users/54500/pat"}, "is_accepted": true, "score": 0, "last_activity_date": 1556581114, "creation_date": 1556581114, "answer_id": 55912091, "question_id": 55903896, "link": "https://stackoverflow.com/questions/55903896/sphinx-search-with-specific-ordre/55912091#55912091", "title": "sphinx search with specific ordre", "body": "<p>If you want both the weight and the store to impact the ordering, you'll need to specify both - <code>:order</code> doesn't build upon existing values, it replaces them.</p>\n\n<pre><code>:order =&gt; 'weight() DESC, store DESC'\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9489957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SMfyE.jpg?s=128&g=1", "display_name": "ramzieus", "link": "https://stackoverflow.com/users/9489957/ramzieus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 55912091, "answer_count": 1, "score": 0, "last_activity_date": 1556581114, "creation_date": 1556542587, "question_id": 55903896, "link": "https://stackoverflow.com/questions/55903896/sphinx-search-with-specific-ordre", "title": "sphinx search with specific ordre", "body": "<p>I have list of company (what sphinx return), I want to sort them to (company with store first) without overriding the weight of fields.</p>\n\n<p>I tried :</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>:order  =&gt; 'store DESC'\n</code></pre>\n\n<p>it's ok but the weight order has broken</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1556541785, "creation_date": 1556541785, "answer_id": 55903664, "question_id": 55903104, "link": "https://stackoverflow.com/questions/55903104/returning-each-object-in-an-each-do-array/55903664#55903664", "title": "Returning each object in an &#39;each.do&#39; array", "body": "<p>When you do an each loop inside the controller you end up with the last value asumed by the variable <code>@some_variable_inside_the_loop</code>. That value is what you get in the view.</p>\n\n<p>There are many ways to solve the problem, for example using joins: <a href=\"https://guides.rubyonrails.org/v5.2/active_record_querying.html#joining-tables\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/v5.2/active_record_querying.html#joining-tables</a></p>\n\n<p>This is <strong>very basic option</strong>, moving loop in the view as nested loop.</p>\n\n<p><strong>Models about:</strong></p>\n\n<pre><code>development has_many :plots\nplot has_many :snags\n</code></pre>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>def index\n  @developments = Development.accessible_by(current_ability).where(enable_snagging: true)\nend\n</code></pre>\n\n<p><strong>View</strong> (let's suppose each model has a <code>title</code> attribute, but do whatever you need):</p>\n\n<pre><code>&lt;% @developments.each do |development| %&gt;\n  &lt;%= development.title %&gt;\n  &lt;% development.plots.each do |plot| %&gt;\n    &lt;%= plot.title %&gt;\n    &lt;% plot.snags.each do |snag| %&gt;\n      &lt;%= snag.title %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1556555029, "post_id": 55904010, "comment_id": 98470054, "body": "This performs two queries since you are using pluck which is not needed. Just pass the scope <code>Snag.where(plot_id: plots)</code>."}], "tags": [], "owner": {"reputation": 802, "user_id": 8728218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376ec53188ea3ec0271198a862516657?s=128&d=identicon&r=PG&f=1", "display_name": "Dyaniyal Wilson", "link": "https://stackoverflow.com/users/8728218/dyaniyal-wilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1556543017, "creation_date": 1556543017, "answer_id": 55904010, "question_id": 55903104, "link": "https://stackoverflow.com/questions/55903104/returning-each-object-in-an-each-do-array/55904010#55904010", "title": "Returning each object in an &#39;each.do&#39; array", "body": "<p>You can find all the plot_snags in a single query. And iterate the @plot_snags variable in the view.</p>\n\n<pre><code>private\n\ndef get_snags(plots)\n  plot_ids = plots.pluck(:id)   \n  @plot_snags = Snag.where(plot_id: plot_ids)\nend\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 10749227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cfd24ed84691ff5357a5dc5a38626ef?s=128&d=identicon&r=PG&f=1", "display_name": "DevCF", "link": "https://stackoverflow.com/users/10749227/devcf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1556897679, "creation_date": 1556539853, "last_edit_date": 1556897679, "question_id": 55903104, "link": "https://stackoverflow.com/questions/55903104/returning-each-object-in-an-each-do-array", "title": "Returning each object in an &#39;each.do&#39; array", "body": "<p>The title may not have described my question properly, I wasn't sure how to explain what I'm doing without visuals. </p>\n\n<p>I have a set of snags, each snag is connected to a plot <i>(a plot has many snags)</i>. Each plot is linked to a development <i>(a development has many plots)</i>. Each development is linked to a user <i>(a user has many developments)</i>. </p>\n\n<p>I want to return a list of snags that are relevant to each developer.</p>\n\n<p>I currently have the following in my snags controller:</p>\n\n<pre><code>def index\n  @developments = Development.accessible_by(current_ability)\n                             .where(enable_snagging: true)\n  @developments.each do |development|\n    @plots = development.plots\n    get_snags(@plots)\n  end\nend\n\nprivate\n\ndef get_snags(plots)\n  plots.each do |plot|\n    @plot_snags = Snag.where(plot_id: plot.id)\n  end\nend\n</code></pre>\n\n<p>And in my view:</p>\n\n<pre><code>&lt;table class=\"record-list snags\"&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;&lt;%= sortable(@snags, :id) %&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;% @snags.each do |snag| %&gt;\n    &lt;tr data-snag=\"&lt;%= snag.id %&gt;\"&gt;\n      &lt;td&gt;&lt;%= snag.id %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>I initially had @snags in place of @plot_snags in the controller, but of course that only returned the last snag / set of snags, rather than all of them.</p>\n\n<p>If I try to create and return a @snags array and add each object in @plot_snags to it (or any other variation of declaring @snags as an array), I get:</p>\n\n<pre><code>undefined method `human_attribute_name' for #&lt;Array:0x007ff5334861d0&gt;\n</code></pre>\n\n<p>I can't figure out what I'm doing wrong here.</p>\n\n<p><em>UPDATE</em></p>\n\n<p>Having looked at it with fresh eyes again today - I couldn't figure out why my join table isn't populating, I will have a look into it again today to get things working 'properly' - it turns out the error I was getting was due to the Sortable interface I was trying to implement in the view. Once I removed the Sortable I was able to populate my snags array and I get the output I was hoping for.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-models"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 1, "creation_date": 1556539844, "post_id": 55902796, "comment_id": 98461755, "body": "Use full-form for <code>AR</code> in your code snippet. Mention rails version as it smells like old version by optional parameter <code>conditions</code> provided in association method. Also you do not need to provide <code>class_name</code> &amp; <code>foreign_key</code> as rails consider them by conventions."}, {"owner": {"reputation": 55, "user_id": 10598322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMUwVZRjxbg/AAAAAAAAAAI/AAAAAAAAABM/qPUt_NxbUi4/photo.jpg?sz=128", "display_name": "kubet", "link": "https://stackoverflow.com/users/10598322/kubet"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1556540076, "post_id": 55902796, "comment_id": 98461903, "body": "ApplicationRecord, 5.2.0 rails I know that conditions are deprecated, but what else to use?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1556540648, "post_id": 55902796, "comment_id": 98462183, "body": "Check this, <a href=\"https://stackoverflow.com/q/2462203/10522579\">stackoverflow.com/q/2462203/10522579</a>"}, {"owner": {"reputation": 802, "user_id": 8728218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376ec53188ea3ec0271198a862516657?s=128&d=identicon&r=PG&f=1", "display_name": "Dyaniyal Wilson", "link": "https://stackoverflow.com/users/8728218/dyaniyal-wilson"}, "edited": false, "score": 3, "creation_date": 1556546220, "post_id": 55902796, "comment_id": 98465318, "body": "Using Single Table Inheritance must be a good option in your case."}, {"owner": {"reputation": 548, "user_id": 3251051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b86x8.png?s=128&g=1", "display_name": "Zalom", "link": "https://stackoverflow.com/users/3251051/zalom"}, "edited": false, "score": 0, "creation_date": 1556548263, "post_id": 55902796, "comment_id": 98466510, "body": "Using the Single Tabel Inheritance you will get 3 models: User, Teacher, and Student, but it will be all 1 table and you can differentiate the type of the user through the form ..."}], "answers": [{"tags": [], "owner": {"reputation": 548, "user_id": 3251051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b86x8.png?s=128&g=1", "display_name": "Zalom", "link": "https://stackoverflow.com/users/3251051/zalom"}, "is_accepted": true, "score": 1, "last_activity_date": 1556550946, "creation_date": 1556550946, "answer_id": 55906273, "question_id": 55902796, "link": "https://stackoverflow.com/questions/55902796/assign-user-model-to-one-of-two-models/55906273#55906273", "title": "Assign user model to one of two models?", "body": "<p>This is how you can implement the STI for your case</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class User &lt; AR\n  has_secure_password\n\n  # Make all forms with User data send params with ':user' as a param key\n  # instead of ':user_teacher'/':user_student'\n  def self.model_name\n    ActiveModel::Name.new(self, nil, 'User')\n  end\nend\n\nclass Teacher &lt; User\n  # custom methods \nend\n\nclass Student &lt; User\n  # custom methods\nend\n</code></pre>\n\n<p>This way, you can have your form with <code>form_for @user do # ...</code>.</p>\n\n<p>One caveat, it is all placed in the Single table in the DB (hence the name Single Table Inheritance), and that means a lot of NULL values for the unrelated fields (say <code>Teacher</code> has a <code>teacher_identification_number</code>, and a user has <code>student_identification_number</code> which are different in size or they require different validation) for all the Students that attribute <code>teacher_identification_number</code> would be NULL, and vice-versa.</p>\n\n<p>If the fields are much different between the two models, then you can analyze your data and put it in the different table to which only the Teacher/Student would have access to, that is called a Database Normalization (say <code>Teacher</code> <code>has_many</code> <code>ClassInfo</code>'s or <code>has_one</code> <code>JobInfo</code>; or <code>Teacher</code> <code>has_one</code> <code>TeacherProfile</code>, and <code>Student</code> <code>has_one</code> <code>StudentProfile</code> or whatever).</p>\n\n<p>It all really depends on how you model your DB.</p>\n\n<p>References:<br>\n - <a href=\"https://medium.com/@dcordz/single-table-inheritance-using-rails-5-02-6738bdd5101a\" rel=\"nofollow noreferrer\">Blog Post - Medium - STI</a><br>\n - <a href=\"https://www.driftingruby.com/episodes/single-table-inheritance\" rel=\"nofollow noreferrer\">Video Link - Drifting Ruby - STI</a><br>\n - <a href=\"http://railscasts.com/episodes/394-sti-and-polymorphic-associations\" rel=\"nofollow noreferrer\">Video Link - @ RailsCasts - STI</a><br>\n - <a href=\"https://www.studytonight.com/dbms/database-normalization.php\" rel=\"nofollow noreferrer\">Blog Post - StudyTonight - DB Normalization</a></p>\n"}], "owner": {"reputation": 55, "user_id": 10598322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMUwVZRjxbg/AAAAAAAAAAI/AAAAAAAAABM/qPUt_NxbUi4/photo.jpg?sz=128", "display_name": "kubet", "link": "https://stackoverflow.com/users/10598322/kubet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 55906273, "answer_count": 1, "score": 1, "last_activity_date": 1556550946, "creation_date": 1556538726, "last_edit_date": 1556539997, "question_id": 55902796, "link": "https://stackoverflow.com/questions/55902796/assign-user-model-to-one-of-two-models", "title": "Assign user model to one of two models?", "body": "<p>I have a user model that I want to assign to be teacher or student( teacher and student are two separated model ) because if the user signup he would have different registration fields depending on if he is teacher or student. User can be a teacher or student, not both.</p>\n\n<p>I have tried, but don't think that this is the best way to do it. Any help?</p>\n\n<pre><code>class User &lt; AR\n  has_secure_password\n\n  has_one :teacher, class_name: \"teacher\", foreign_key: \"teacher_id\", conditions: { role: 'teacher' }\n  has_one :student, class_name: \"student\", foreign_key: \"student_id\", conditions: { role: 'student' }\n\n  enum role: [:teacher, :student]\nend\n\nclass Teacher &lt; AR\n  belongs_to :user, class_name: \"user\", foreign_key: \"user_id\"\nend\n\nclass Student &lt; AR\n  belongs_to :user, class_name: \"user\", foreign_key: \"user_id\"\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1556538118, "post_id": 55902291, "comment_id": 98460881, "body": "Ruby does not have a notion of multidimentional array (read: you cannot imply each element of an array to be an array.) You might look at <a href=\"https://ruby-doc.org/stdlib/libdoc/matrix/rdoc/Matrix.html\" rel=\"nofollow noreferrer\"><code>Matrix</code></a>."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1556559663, "post_id": 55902291, "comment_id": 98471939, "body": "You could have <code>[]</code> return an object with a <code>[]=</code> method and a reference back to the original object. Or use <code>def []=(a, b, value)</code> and say <code>obj[1,2] = 3</code> (like <code>Matrix</code> from the standard library)."}], "answers": [{"tags": [], "owner": {"reputation": 1919, "user_id": 384689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a66498e80512ef50822cceb2a2f5cba3?s=128&d=identicon&r=PG", "display_name": "claasz", "link": "https://stackoverflow.com/users/384689/claasz"}, "is_accepted": false, "score": 1, "last_activity_date": 1556635391, "creation_date": 1556635391, "answer_id": 55923410, "question_id": 55902291, "link": "https://stackoverflow.com/questions/55902291/ruby-multi-dimensional-getter-setter-methods-c-like/55923410#55923410", "title": "Ruby multi-dimensional getter/setter methods (C++-like)", "body": "<p>Since C++ and Ruby are so fundamentally different, I'm not sure the question</p>\n\n<blockquote>\n  <p>is there a way to have 'C'/'C++'-like multi-dimensional variables in Ruby?</p>\n</blockquote>\n\n<p>does even make sense.</p>\n\n<p>Instead of trying a hard to mimick a C++ feature in Ruby, you should ask yourself what is the real <em>problem</em> you want to solve and how can you achieve it using <em>common</em> Ruby features.</p>\n\n<p>When you see the <code>[][]</code> \"operator\" in Ruby, it is most of the time actually the <code>[]</code> operator returning an Array or a Hash (as pointed out by mu-is-too-short already). </p>\n\n<p>E.g.</p>\n\n<pre><code>$ irb\n2.6.2 :001 &gt; a = Array.new(3, \"0\")\n =&gt; [\"0\", \"0\", \"0\"] \n2.6.2 :002 &gt; b = Array.new(3, a)\n =&gt; [[\"0\", \"0\", \"0\"], [\"0\", \"0\", \"0\"], [\"0\", \"0\", \"0\"]] \n2.6.2 :003 &gt; b[1][1]\n =&gt; \"0\" \n</code></pre>\n"}], "owner": {"reputation": 505, "user_id": 4307872, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6375140fec452c7e7b5cd043495adefe?s=128&d=identicon&r=PG&f=1", "display_name": "von spotz", "link": "https://stackoverflow.com/users/4307872/von-spotz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1556635391, "creation_date": 1556536897, "question_id": 55902291, "link": "https://stackoverflow.com/questions/55902291/ruby-multi-dimensional-getter-setter-methods-c-like", "title": "Ruby multi-dimensional getter/setter methods (C++-like)", "body": "<p>is there a way to have 'C'/'C++'-like multi-dimensional variables, that is, define multi-dimensional bracketed getter/setter-methods? (without resorting to Hash)</p>\n\n<p>Can't one define</p>\n\n<pre><code>def [][]=(a, b, value)\n  ...\nend\n</code></pre>\n\n<p>Such that</p>\n\n<pre><code>a = Integer.new\na[1][1] = 2\n</code></pre>\n\n<p>?</p>\n\n<p>A Hash should not compensate a proper table. And I think I could remember how once it was shown on stackoverflow how to define multidimensional brackets as method. Yet I can't find the thread, if it existed.</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "google-chrome-headless"], "comments": [{"owner": {"reputation": 69, "user_id": 11414169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d43dad764dcfa67ae48fe39626c5d3?s=128&d=identicon&r=PG&f=1", "display_name": "Esaki Raja", "link": "https://stackoverflow.com/users/11414169/esaki-raja"}, "edited": false, "score": 0, "creation_date": 1556533428, "post_id": 55901386, "comment_id": 98458638, "body": "Chromedriver&#39;s version - 74.0.3729"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1556533748, "post_id": 55901386, "comment_id": 98458795, "body": "Is it happening in normal mode?"}, {"owner": {"reputation": 69, "user_id": 11414169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d43dad764dcfa67ae48fe39626c5d3?s=128&d=identicon&r=PG&f=1", "display_name": "Esaki Raja", "link": "https://stackoverflow.com/users/11414169/esaki-raja"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 1, "creation_date": 1556533903, "post_id": 55901386, "comment_id": 98458870, "body": "No it&#39;s happening only in the headless mode"}, {"owner": {"reputation": 6839, "user_id": 677518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK8mM.png?s=128&g=1", "display_name": "Ardesco", "link": "https://stackoverflow.com/users/677518/ardesco"}, "edited": false, "score": 0, "creation_date": 1556539611, "post_id": 55901386, "comment_id": 98461624, "body": "<a href=\"http://ardesco.lazerycode.com/testing/webdriver/2012/07/25/how-to-download-files-with-selenium-and-why-you-shouldnt.html\" rel=\"nofollow noreferrer\">ardesco.lazerycode.com/testing/webdriver/2012/07/25/&hellip;</a>"}, {"owner": {"reputation": 69, "user_id": 11414169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d43dad764dcfa67ae48fe39626c5d3?s=128&d=identicon&r=PG&f=1", "display_name": "Esaki Raja", "link": "https://stackoverflow.com/users/11414169/esaki-raja"}, "reply_to_user": {"reputation": 6839, "user_id": 677518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK8mM.png?s=128&g=1", "display_name": "Ardesco", "link": "https://stackoverflow.com/users/677518/ardesco"}, "edited": false, "score": 0, "creation_date": 1556541595, "post_id": 55901386, "comment_id": 98462773, "body": "@Ardesco I need a ruby version snippet"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 11414169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d43dad764dcfa67ae48fe39626c5d3?s=128&d=identicon&r=PG&f=1", "display_name": "Esaki Raja", "link": "https://stackoverflow.com/users/11414169/esaki-raja"}, "edited": false, "score": 0, "creation_date": 1556788943, "post_id": 55949307, "comment_id": 98551120, "body": "Thanks a lot. It worked. Applied the same script to the newly opened tab which just solved the issue."}, {"owner": {"reputation": 1109, "user_id": 525201, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546d49d70075eb2ad32f415cf5a214fe?s=128&d=identicon&r=PG", "display_name": "Nickolay Kolev", "link": "https://stackoverflow.com/users/525201/nickolay-kolev"}, "edited": false, "score": 0, "creation_date": 1556882912, "post_id": 55949307, "comment_id": 98588464, "body": "Do you mind sharing how you applied this to a newly opened tab?"}, {"owner": {"reputation": 69, "user_id": 11414169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d43dad764dcfa67ae48fe39626c5d3?s=128&d=identicon&r=PG&f=1", "display_name": "Esaki Raja", "link": "https://stackoverflow.com/users/11414169/esaki-raja"}, "edited": false, "score": 0, "creation_date": 1556884886, "post_id": 55949307, "comment_id": 98589417, "body": "Instead of clicking the file download link, I get the href of that link, open a new tab, apply the mentioned script and navigate to the href which will download the file."}], "tags": [], "owner": {"reputation": 90, "user_id": 1688911, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/100001306892454/picture?type=large", "display_name": "esakiraja", "link": "https://stackoverflow.com/users/1688911/esakiraja"}, "is_accepted": true, "score": 0, "last_activity_date": 1556885052, "last_edit_date": 1556885052, "creation_date": 1556788890, "answer_id": 55949307, "question_id": 55901386, "link": "https://stackoverflow.com/questions/55901386/is-there-a-way-to-download-files-using-headless-chromedriver-in-centos-using-rub/55949307#55949307", "title": "Is there a way to download files using headless chromedriver in Centos using Ruby?", "body": "<p>When you click on a download link and if it opens in a separate tab before the file starts downloading, then you need to apply your above mentioned script to the newly opened tab too, because you've set the session id only for the current tab and not for the newly opened tab. So, try apply this script to that newly opened tab before trying to download a file. I'm sure it'll work.</p>\n\n<pre><code>def download_file(label, download_path)\n  ele = Locator.new(:xpath, \"//ul[@class='cnt']//div[text()='#{label}']/..//a\")\n  download_url = get_attribute(ele.get_how, ele.get_what, \"href\")\n  @driver.execute_script(\"window.open()\")\n  @driver.switch_to.window(@driver.window_handles.last)\n  bridge = @driver.send(:bridge)\n  path = '/session/:session_id/chromium/send_command'\n  path[':session_id'] = bridge.session_id\n  bridge.http.call(:post, path, {\n    \"cmd\" =&gt; 'Page.setDownloadBehavior',\n    \"params\" =&gt; {\n      \"behavior\" =&gt; 'allow',\n      \"downloadPath\" =&gt; download_path\n    }\n  })\n  @driver.get(download_url)\n  @driver.close\n  @driver.switch_to.window(@driver.window_handles.last)\nend\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 11414169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d43dad764dcfa67ae48fe39626c5d3?s=128&d=identicon&r=PG&f=1", "display_name": "Esaki Raja", "link": "https://stackoverflow.com/users/11414169/esaki-raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 55949307, "answer_count": 1, "score": 1, "last_activity_date": 1556885052, "creation_date": 1556533411, "question_id": 55901386, "link": "https://stackoverflow.com/questions/55901386/is-there-a-way-to-download-files-using-headless-chromedriver-in-centos-using-rub", "title": "Is there a way to download files using headless chromedriver in Centos using Ruby?", "body": "<p>I try to download a file using headless chrome and the file doesn't seems to be getting downloaded anywhere. I could see that it's actually a security feature to restrict file download in headless but, is there a workaround for the same in Ruby? Tried the below code but no luck.</p>\n\n<pre><code>download_path = \"#{Pathname.pwd}/test-data/downloaded\"\noptions = Selenium::WebDriver::Chrome::Options.new\noptions.add_argument(\"--disable-dev-shm-usage\");\noptions.add_argument('--headless') #Declaring the browser to run in headless mode\noptions.add_preference(\n  :download, directory_upgrade: true,\n  prompt_for_download: false,\n  default_directory: download_path\n)\noptions.add_preference(:browser, set_download_behavior: { behavior: 'allow' })\n@driver = Selenium::WebDriver.for :chrome, options: options #Browser object initialization\nset_screen_resolution(1400, 900)\n$driver = @driver\n\nbridge = @driver.send(:bridge)\npath = '/session/:session_id/chromium/send_command'\npath[':session_id'] = bridge.session_id\nbridge.http.call(:post, path, cmd: 'Page.setDownloadBehavior',\n                        params: {\n                          behavior: 'allow',\n                          downloadPath: download_path\n                        })\n</code></pre>\n\n<p>I expect the file to be downloaded using headless chrome but it's not happening.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1556531928, "post_id": 55900654, "comment_id": 98457924, "body": "I probably save the image resized to 700x500, to 2350x250 and the original version.  What is wrong with that?"}, {"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1556532279, "post_id": 55900654, "comment_id": 98458102, "body": "@spickermann please thats not the question i asked. My problem is, when i upload a single image from my rails app to the cloud, the image appears 3 in my cloudinary storage. I mean it becomes triplet"}], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "is_accepted": false, "score": 0, "last_activity_date": 1556536809, "creation_date": 1556536809, "answer_id": 55902269, "question_id": 55900654, "link": "https://stackoverflow.com/questions/55900654/uploaded-images-to-cloudinary-saves-the-images-three-times-in-my-cloud-storage/55902269#55902269", "title": "Uploaded images to cloudinary saves the images three times in my cloud storage", "body": "<p>the problem was the :style  in the path</p>\n\n<pre><code>:path =&gt; ':class/:id/:style/:filename'\n</code></pre>\n\n<p>to prevent making duplicate of the styles defined, remove the style option from the path</p>\n\n<p>for it to be like this =></p>\n\n<pre><code>:path =&gt; ':class/:id/:filename'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1556562528, "creation_date": 1556562528, "answer_id": 55908945, "question_id": 55900654, "link": "https://stackoverflow.com/questions/55900654/uploaded-images-to-cloudinary-saves-the-images-three-times-in-my-cloud-storage/55908945#55908945", "title": "Uploaded images to cloudinary saves the images three times in my cloud storage", "body": "<p>It's not a  duplicate image. It's a three images of different dimensions that you are mentioning in styles. </p>\n\n<p>1st one is your original image that you are actually uploading. </p>\n\n<p>Second and third will be of medium: \"700x500#\", small: \"350x250 respectively.  </p>\n\n<p>You can call other two's are thumbnails of the original image.</p>\n"}], "owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556562528, "creation_date": 1556530794, "question_id": 55900654, "link": "https://stackoverflow.com/questions/55900654/uploaded-images-to-cloudinary-saves-the-images-three-times-in-my-cloud-storage", "title": "Uploaded images to cloudinary saves the images three times in my cloud storage", "body": "<p>Please i am facing this problem with my configuration on uploading images to my cloud storage(Cloudinary).\nwhen i upload a single image in my rails app, it makes a duplicated of times 3 in my cloud storage.</p>\n\n<p>I am Using ruby 2.3 &amp; Rails 5.1 with paperclip-cloudinary ~> 1.3', '>= 1.3.2</p>\n\n<p>I am pretty sure is the path that i set.\ni dont know how to set the right path.</p>\n\n<pre><code>:path =&gt; ':class/:id/:style/:filename'\n</code></pre>\n\n<h2>My Post Model</h2>\n\n<pre><code>class Post &lt; ApplicationRecord\n    acts_as_votable\n    belongs_to :user\n    has_many :comments\n\n    has_attached_file :image, \n    :storage =&gt; :cloudinary,\n    :path =&gt; ':class/:id/:style/:filename',\n    styles: { medium: \"700x500#\", small: \"350x250&gt;\" }\n  validates_attachment_content_type :image, content_type: /\\Aimage\\/.*\\z/\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1556527858, "post_id": 55899068, "comment_id": 98455837, "body": "Include capybara tag if your questions are related to it."}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1556528172, "post_id": 55899068, "comment_id": 98455975, "body": "@Rajagopalan Okay, thanks"}], "answers": [{"tags": [], "owner": {"reputation": 1320, "user_id": 4531923, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/749da210afda1b309680b354f019849e?s=128&d=identicon&r=PG", "display_name": "Vincent Rolea", "link": "https://stackoverflow.com/users/4531923/vincent-rolea"}, "is_accepted": false, "score": 0, "last_activity_date": 1556529165, "creation_date": 1556529165, "answer_id": 55900200, "question_id": 55899068, "link": "https://stackoverflow.com/questions/55899068/how-do-i-have-a-create-a-signed-in-user-before-running-an-rspec-feature-test/55900200#55900200", "title": "How do I have a create a signed in user before running an Rspec feature test?", "body": "<p>Your are getting this error because of this line:</p>\n\n<pre><code>fill_in 'text_field_tag', with: q\n</code></pre>\n\n<p>According to Capybara documentation on <code>#fill_in</code>:</p>\n\n<blockquote>\n  <p>The field can be found via its name, id, Capybara.test_id attribute, or label text</p>\n</blockquote>\n\n<p><code>text_field_tag</code> is not an html attribute but a rails view helper. You should change if with the id, label or name of the <code>text_field_tag</code></p>\n"}, {"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 1, "last_activity_date": 1556529190, "creation_date": 1556529190, "answer_id": 55900208, "question_id": 55899068, "link": "https://stackoverflow.com/questions/55899068/how-do-i-have-a-create-a-signed-in-user-before-running-an-rspec-feature-test/55900208#55900208", "title": "How do I have a create a signed in user before running an Rspec feature test?", "body": "<p>Your error is not because of failure to create a user.\nJust to be sure that authentication went ok you can add after <code>visit locations_path</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  expect(page).to have_content('Please enter an address in the field')\n</code></pre>\n\n<p>Actual error is that your input field is called <code>q</code> and not <code>text_field_tag</code>:</p>\n\n<pre><code>  fill_in \"q\", with: q\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55900208, "answer_count": 2, "score": 0, "last_activity_date": 1556529190, "creation_date": 1556524369, "last_edit_date": 1556528148, "question_id": 55899068, "link": "https://stackoverflow.com/questions/55899068/how-do-i-have-a-create-a-signed-in-user-before-running-an-rspec-feature-test", "title": "How do I have a create a signed in user before running an Rspec feature test?", "body": "<p>I'm trying to write a feature test (using Rspec 3 and Capybara) that tests a user adding an address (string) and getting the coordinates in response. Users need to be signed in before they can do this, so how can I create a user and then perform this function? I get the following error:</p>\n\n<pre><code>Failure/Error: fill_in 'text_field_tag', with: q\n\n     Capybara::ElementNotFound:\n       Unable to find field \"text_field_tag\" that is not disabled\n</code></pre>\n\n<p>Here is the code I have so far.</p>\n\n<p>find_coordinates_spec.rb</p>\n\n<pre><code>feature 'find coordinates' do\n  scenario 'with valid place name' do\n    user = User.create(email: 'test@test.com', password: \"password\", password_confirmation: \"password\")\n    sign_in user\n    geocode('London')\n    expect(page).to have_content('51.5073219, -0.1276474')\n  end\n\n  def geocode(q)\n    visit locations_path\n    fill_in 'text_field_tag', with: q\n    click_button 'geocode'\n  end\nend\n</code></pre>\n\n<p>locations_controller.rb</p>\n\n<pre><code>class LocationsController &lt; ApplicationController\n  before_action :authenticate_user!\n\n  def index\n    if params[:q].blank?\n      @message = 'Please enter an address in the field!'\n      return\n    end\n\n    token = Rails.application.credentials.locationiq_key\n    search = LocationiqApi.new(token).find_place(params[:q])\n\n    # Hash#dig will return nil if ANY part of the lookup fails\n    latitude = search.dig('searchresults', 'place', 'lat')\n    longitude = search.dig('searchresults', 'place', 'lon')\n\n    if latitude.nil? || longitude.nil?\n      # Output an error message if lat or lon is nil\n      @coordinates = \"We couldn't find a place by this name. Please enter a valid place name.\"\n    else\n      @coordinates = \"Coordinates: \" + \"#{latitude}, #{longitude}\"\n    end\n  end\nend\n</code></pre>\n\n<p>locations.html.erb</p>\n\n<pre><code>&lt;main&gt;\n  &lt;h1&gt;Location Search&lt;/h1&gt;\n  &lt;!-- devise flash messages --&gt;\n  &lt;p class=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n  &lt;p class=\"alert\"&gt;&lt;%= alert %&gt;&lt;/p&gt;\n  &lt;!-- Button to search coordinates --&gt;\n  &lt;%= form_tag(locations_path, method: :get) do %&gt;\n    &lt;%= text_field_tag(:q) %&gt;\n    &lt;%= submit_tag(\"geocode\") %&gt;\n    &lt;%= @message %&gt;\n  &lt;% end %&gt;&lt;br&gt;\n\n  &lt;%= @coordinates %&gt;\n&lt;/main&gt;\n</code></pre>\n"}, {"tags": ["ruby", "hash", "substring"], "answers": [{"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1556529949, "last_edit_date": 1592644375, "creation_date": 1556529949, "answer_id": 55900405, "question_id": 55898558, "link": "https://stackoverflow.com/questions/55898558/finding-longest-substring-no-duplicates-help-optimizing-code-ruby/55900405#55900405", "title": "Finding Longest Substring No Duplicates - Help Optimizing Code [Ruby]", "body": "<p>From your <a href=\"https://leetcode.com/problems/longest-substring-without-repeating-characters/\" rel=\"nofollow noreferrer\">link</a>:</p>\n<blockquote>\n<p>Input: &quot;pwwkew&quot;</p>\n<p>Output: 3</p>\n<p>Explanation: The answer is &quot;wke&quot;, with the length of 3.</p>\n</blockquote>\n<p>That means you need <strong>first</strong> non-repeated substring.</p>\n<p>I suggest here is such method</p>\n<pre><code>def max_non_repeated(string)\n  max_string = string.\n                 each_char.\n                 map.with_index { |_, i| string[i..].split('') }.\n                 map do |v|\n                   ary = []\n                   v.each { |l| ary &lt;&lt; l if ary.size == ary.uniq.size }\n                   ary.uniq.join\n                 end.\n                 max\n\n  {\n    string: max_string,\n    length: max_string.length\n  }\nend\n\nmax_non_repeated('pwwkew')[:string] #=&gt; &quot;wke&quot;\nmax_non_repeated('pwwkew')[:length] #=&gt; 3\n</code></pre>\n<p>In Ruby &lt; 2.6 use <code>[i..-1]</code> instead of <code>[i..]</code></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1556576298, "creation_date": 1556576298, "answer_id": 55911545, "question_id": 55898558, "link": "https://stackoverflow.com/questions/55898558/finding-longest-substring-no-duplicates-help-optimizing-code-ruby/55911545#55911545", "title": "Finding Longest Substring No Duplicates - Help Optimizing Code [Ruby]", "body": "<p><strong>Approach</strong></p>\n\n<p>Here is a way of doing that with a hash that maps characters to indices. For a string <code>s</code>, suppose the characters in the substring <code>s[j..j+n-1]</code> are unique, and therefore the substring is a candidate for the longest unique substring. The next element is therefore <code>e = s[j+n]</code> We wish to determine if <code>s[j..j+n-1]</code> includes <code>e</code>. If it does not we can append <code>e</code> to the substring, keeping it unique.</p>\n\n<p>If <code>s[j..j+n-1]</code> includes <code>e</code>, we determine if <code>n</code> (the size of the substring) is greater than the length of the previously-known substring, and update our records if it is. To determine if <code>s[j..j+n-1]</code> includes <code>e</code>, we could perform a linear search of the substring, but it is faster to maintain a hash <code>c_to_i</code> whose key-value pairs are <code>s[i]=&gt;i</code>, <code>i = j..j_n-1</code>. That is, <code>c_to_i</code> maps the characters in the substring to their indices in full string <code>s</code>. That way we can merely evaluate <code>c_to_i.key?(e)</code> to see if the substring contains <code>e</code>. If the substring includes <code>e</code>, we use <code>c_to_i</code> to determine its index in <code>s</code> and add one: <code>j = c_to_i[e] + 1</code>. The new substring is therefore <code>s[j..j+n-1]</code> with the new value of <code>j</code>. Note that several characters of <code>s</code> may be skipped in this step.</p>\n\n<p>Regardless of whether the substring contained <code>e</code>, we must now append <code>e</code> to the (possibly-updated) substring, so that it becomes <code>s[j..j+n]</code>. </p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def longest_no_repeats(str)\n  c_to_i = {}\n  longest = { length: 0, end: nil }\n  str.each_char.with_index do |c,i|\n    j = c_to_i[c]\n    if j\n      longest = { length: c_to_i.size, end: i-1 } if\n        c_to_i.size &gt; longest[:length]\n      c_to_i.reject! { |_,k| k &lt;= j }\n    end\n    c_to_i[c] = i\n  end\n  c_to_i.size &gt; longest[:length] ? { length: c_to_i.size, end: str.size-1 } :\n    longest\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>a = ('a'..'z').to_a\n  #=&gt; [\"a\", \"b\",..., \"z\"]\n\nstr = 60.times.map { a.sample }.join\n  #=&gt; \"ekgdaxxzlwbxixhlfbpziswcoelplhobivoygmupdaexssbuuawxmhprkfms\"\n\nlongest = longest_no_repeats(str)\n  #=&gt; {:length=&gt;14, :end=&gt;44} \nstr[0..longest[:end]]\n  #=&gt; \"ekgdaxxzlwbxixhlfbpziswcoelplhobivoygmupdaexs\" \nstr[longest[:end]-longest[:length]+1,longest[:length]]\n  #=&gt;                                \"bivoygmupdaexs\" \n</code></pre>\n\n<p><strong>Efficiency</strong></p>\n\n<p>Here is a benchmark comparison to @mechnicov's code:</p>\n\n<pre><code>require 'benchmark/ips'\n\na = ('a'..'z').to_a\narr = 50.times.map { 1000.times.map { a.sample }.join }\n\nBenchmark.ips do |x|\n  x.report(\"mechnicov\") { arr.sum { |s| max_non_repeated(s)[:length]   } }\n  x.report(\"cary\")      { arr.sum { |s| longest_no_repeats(s)[:length] } }\n  x.compare!\nend\n</code></pre>\n\n<p>displays:</p>\n\n<pre><code>Comparison:\n            cary:       35.8 i/s\n       mechnicov:        0.0 i/s - 1198.21x  slower\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 11121699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9792e7b3960b581ce1b80b4cd14aa2eb?s=128&d=identicon&r=PG&f=1", "display_name": "PastaCountry", "link": "https://stackoverflow.com/users/11121699/pastacountry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "accepted_answer_id": 55911545, "answer_count": 2, "score": 0, "last_activity_date": 1556576298, "creation_date": 1556521935, "question_id": 55898558, "link": "https://stackoverflow.com/questions/55898558/finding-longest-substring-no-duplicates-help-optimizing-code-ruby", "title": "Finding Longest Substring No Duplicates - Help Optimizing Code [Ruby]", "body": "<p>So I've been trying to solve a <a href=\"https://leetcode.com/problems/longest-substring-without-repeating-characters/\" rel=\"nofollow noreferrer\">Leetcode Question</a>, \"Given a string, find the length of the longest substring without repeating characters.\"</p>\n\n<p>For example </p>\n\n<pre><code>Input: \"abcabcbb\"\nOutput: 3 \nExplanation: The answer is \"abc\", with the length of 3. \n</code></pre>\n\n<p>Currently I optimized my algorithm when it comes to figuring out if the substring is unique by using a hash table. However my code still runs in O(n^2) runtime, and as a result exceeds the time limit during submissions.</p>\n\n<p>What i try to do is to essentially go through every single possible substring and check if it has any duplicate values. Am I as efficient as it gets when it comes to the brute force method here? I know there's other methods such as a sliding window method but I'm trying to get the brute force method down first.</p>\n\n<pre><code># @param {String} s\n# @return {Integer}\ndef length_of_longest_substring(s)\n    max_length = 0\n    max_string = \"\"\n    n = s.length\n    for i in (0..n-1)\n        for j in (i..n-1)\n            substring = s[i..j]\n            #puts substring\n            if unique(substring)\n                if substring.length &gt; max_length\n                    max_length = substring.length\n                    max_string = substring\n                end\n            end\n        end\n    end\n    return max_length\nend\n\ndef unique(string)\n    hash = Hash.new(false)\n    array = string.split('')\n    array.each do |char|\n        if hash[char] == true\n            return false\n        else\n            hash[char] = true\n        end\n    end\n    return true\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 13, "user_id": 8224920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fabe37466fb94a7e6c33b025b668b82?s=128&d=identicon&r=PG&f=1", "display_name": "bluesky0318", "link": "https://stackoverflow.com/users/8224920/bluesky0318"}, "edited": false, "score": 0, "creation_date": 1556519190, "post_id": 55897850, "comment_id": 98452067, "body": "In fact, after rails g active_admin:install User, the rake db:migrate, there will fail like that : in `load_missing_constant&#39;: Circular dependency detected while autoloading constant V1::Base (RuntimeError)"}, {"owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "edited": false, "score": 0, "creation_date": 1556521877, "post_id": 55897850, "comment_id": 98453117, "body": "This may be namespacing issues as mentioned in other SO answers as well. <a href=\"https://stackoverflow.com/questions/25460756/circular-dependency-detected-while-autoloading-constant-when-loading-constant\" title=\"circular dependency detected while autoloading constant when loading constant\">stackoverflow.com/questions/25460756/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8224920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fabe37466fb94a7e6c33b025b668b82?s=128&d=identicon&r=PG&f=1", "display_name": "bluesky0318", "link": "https://stackoverflow.com/users/8224920/bluesky0318"}, "edited": false, "score": 0, "creation_date": 1559117060, "post_id": 55898909, "comment_id": 99315659, "body": "Thanks for your help, that should be ok for me."}], "tags": [], "owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "is_accepted": true, "score": 0, "last_activity_date": 1556523676, "creation_date": 1556523676, "answer_id": 55898909, "question_id": 55897850, "link": "https://stackoverflow.com/questions/55897850/how-fix-the-issue-when-used-the-acviteadmin-gem/55898909#55898909", "title": "How fix the issue when used the acviteadmin gem?", "body": "<p>If you are using rails 5, try this:</p>\n\n<pre><code>gem 'inherited_resources', git: 'https://github.com/activeadmin/inherited_resources'\ngem 'activeadmin', git: 'https://github.com/activeadmin/activeadmin'\n</code></pre>\n\n<p>And also kill the existing server ,As suggested by @ray, and start the server. You can check the existing server</p>\n\n<pre><code>ps aux|grep puma\n</code></pre>\n\n<p>It prints all the puma processes like this</p>\n\n<pre><code>pragya_+  1378  0.2  1.6 1233236 140252 tty4   Sl   10:15   0:24 puma 3.12.1 (tcp://localhost:3000)\n</code></pre>\n\n<p>Here 1378 is the process_id. Now kill that process by run this command:</p>\n\n<pre><code>kill -9 1378\n</code></pre>\n\n<p>Restart the server and check again. Hope it will work :)</p>\n"}], "owner": {"reputation": 13, "user_id": 8224920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fabe37466fb94a7e6c33b025b668b82?s=128&d=identicon&r=PG&f=1", "display_name": "bluesky0318", "link": "https://stackoverflow.com/users/8224920/bluesky0318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 55898909, "answer_count": 1, "score": -1, "last_activity_date": 1556523676, "creation_date": 1556518352, "last_edit_date": 1556518658, "question_id": 55897850, "link": "https://stackoverflow.com/questions/55897850/how-fix-the-issue-when-used-the-acviteadmin-gem", "title": "How fix the issue when used the acviteadmin gem?", "body": "<p><img src=\"https://i.stack.imgur.com/XuwNJ.png\" alt=\"enter image description here\">Use the activeadmin into the gem file. <code>bundle install</code>, <code>rails g active_admin:install User</code>, then <code>rails s</code>, the server will crash and give some warning.</p>\n\n<p>Error Information:</p>\n\n<blockquote>\n  <p><code>rails s</code></p>\n\n<pre><code>WARNING: Nokogiri was built against LibXML version 2.9.4, but has dynamically loaded 2.8.0\n=&gt; Booting WEBrick\n=&gt; Rails 5.0.0 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\nDEPRECATION WARNING: You are using the a deprecated processor interface #&lt;Proc:0x0055902480b218@/home/guo/.rvm/gems/ruby-2.3.1/gems/autoprefixer-rails-5.2.1.3/lib/autoprefixer-rails/sprockets.rb:25&gt;.\nPlease update your processor interface:\nhttps://github.com/rails/sprockets/blob/master/guides/extending_sprockets.md#supporting-all-versions-of-sprockets-in-processors\n (called from install at /home/guo/.rvm/gems/ruby-2.3.1/gems/autoprefixer-rails-5.2.1.3/lib/autoprefixer-rails/sprockets.rb:25)\nExiting\n</code></pre>\n</blockquote>\n\n<p>Here is my gem list.</p>\n\n<pre><code>source 'https://rubygems.org'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '5.0.0'\n\n# Use postgresql as the database for Active Record\ngem 'pg', '~&gt; 0.15'\n\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n\n# See https://github.com/rails/execjs#readme for more supported runtimes\ngem 'therubyracer', platforms: :ruby\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n\n# Turbolinks makes following links in your web application faster.\n# Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\ngem 'activeadmin'\ngem 'devise'\ngem 'cancancan'\ngem 'rolify'\ngem 'draper'\ngem 'pundit'\n\n# Use ActiveModel has_secure_password\ngem 'bcrypt', '~&gt; 3.1.7'\n\ngem 'bootstrap-sass', '~&gt;3.3.7'\ngem 'autoprefixer-rails', '~&gt;5.2.1'\n#gem \"twitter-bootstrap-rails\"\n\ngem 'carrierwave', '&gt;= 1.0.0.beta', '&lt; 2.0' gem 'rmagick'\n\ngem 'grape'\n\ngem 'doorkeeper'\n\ngem \"rack-oauth2\"\n\n#gem 'will_paginate', '~&gt; 3.1.1' gem 'kaminari'\n\ngem 'dalli' gem 'actionpack-page_caching' gem 'actionpack-action_caching'\n\ngem 'delayed_job' gem 'delayed_job_active_record' #gem \"sidekiq\"\n\n#gem \"devise-doorkeeper\"\n\ngem 'roadie'\ngem 'roadie-rails'\ngem 'nokogiri', '1.6.0'\n#gem 'premailer-rails'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "tdd"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1556517645, "post_id": 55897682, "comment_id": 98451550, "body": "Have you tried debugging it? What did you find? The issue could be caused by all manner of things, but I&#39;m pretty certain it&#39;s something that you <b>haven&#39;t</b> shown in the post above. (E.g. Maybe there&#39;s a <code>before_action</code> on the controller, which means that line of code never gets executed?)"}, {"owner": {"reputation": 117, "user_id": 11393228, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NSyzDJLYh-0/AAAAAAAAAAI/AAAAAAAAALo/qmC7Ta_ZRAo/photo.jpg?sz=128", "display_name": "aplneto", "link": "https://stackoverflow.com/users/11393228/aplneto"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1556518025, "post_id": 55897682, "comment_id": 98451656, "body": "That was precisely it. Someone added devise to the project and i completely missed the <code>before_action</code> line. Thank you so much!"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556518052, "post_id": 55897682, "comment_id": 98451663, "body": "tricky tricky .."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556518703, "post_id": 55897682, "comment_id": 98451872, "body": "If you don&#39;t want to close the question feel free to leave your own answer, you can accept it in a few days. This will just help move it along since you already know the answer to it, and answerers won&#39;t have to read through it only to realize it&#39;s already solved."}, {"owner": {"reputation": 117, "user_id": 11393228, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NSyzDJLYh-0/AAAAAAAAAAI/AAAAAAAAALo/qmC7Ta_ZRAo/photo.jpg?sz=128", "display_name": "aplneto", "link": "https://stackoverflow.com/users/11393228/aplneto"}, "edited": false, "score": 0, "creation_date": 1556519770, "post_id": 55897682, "comment_id": 98452273, "body": "You got it. I&#39;m new here, so sorry if I don&#39;t know the protocols yet."}], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 11393228, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NSyzDJLYh-0/AAAAAAAAAAI/AAAAAAAAALo/qmC7Ta_ZRAo/photo.jpg?sz=128", "display_name": "aplneto", "link": "https://stackoverflow.com/users/11393228/aplneto"}, "is_accepted": true, "score": 2, "last_activity_date": 1556519724, "creation_date": 1556519724, "answer_id": 55898117, "question_id": 55897682, "link": "https://stackoverflow.com/questions/55897682/model-failing-to-receive-call-from-method-even-though-the-method-is-being-called/55898117#55898117", "title": "Model failing to receive call from method even though the method is being called in the controller", "body": "<p>As Tom Lord pointed out, the problem was in the <code>before_action</code> line at the begining of the Controller. I just needed to stub those and the problem was gone.</p>\n"}], "owner": {"reputation": 117, "user_id": 11393228, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NSyzDJLYh-0/AAAAAAAAAAI/AAAAAAAAALo/qmC7Ta_ZRAo/photo.jpg?sz=128", "display_name": "aplneto", "link": "https://stackoverflow.com/users/11393228/aplneto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 55898117, "answer_count": 1, "score": 0, "last_activity_date": 1556519724, "creation_date": 1556517167, "question_id": 55897682, "link": "https://stackoverflow.com/questions/55897682/model-failing-to-receive-call-from-method-even-though-the-method-is-being-called", "title": "Model failing to receive call from method even though the method is being called in the controller", "body": "<p>I'm trying to write a test to see if my Hospital model is receiving a custom method look_for_hospitals.</p>\n\n<p>Here is the test:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rspec.describe HospitalsController, type: :controller do\n    describe '#search' do\n        it 'should call the model method to do the search' do\n            # model should implement method look_for_hospitals\n            expect(Hospital).to receive(:look_for_hospitals).with('keyword')\n            # form in search page must be named 'keywords'\n            get :search, params: {:keywords =&gt; 'keyword'}\n            expect(assigns(:hospitals))\n        end\n    end\n</code></pre>\n\n<p>Here is my model:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Hospital&lt;ApplicationRecord\n    def self.look_for_hospitals term\n    end\nend\n</code></pre>\n\n<p>And here is the method search in the HospitalsController:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def search\n    keyword = params[:keywords]\n    @hospitals = Hospital.look_for_hospitals(keyword)\nend\n</code></pre>\n\n<p>When I run my test this is the error I'm having:</p>\n\n<pre><code>  1) HospitalsController#search should call the model method to do the search\n     Failure/Error: expect(Hospital).to receive(:look_for_hospitals).with('keyword')\n\n       (Hospital(id: integer, cnes: string, number: integer, address: text, latitude: string, longitude: string, name: string, phones: text, nature: string, specialties: text, rpa: string, microregion: string, created_at: datetime, updated_at: datetime) (class)).look_for_hospitals(\"keyword\")\n           expected: 1 time with arguments: (\"keyword\")\n           received: 0 times\n</code></pre>\n\n<p>I know there is pretty much nothing implemented yet, but i'm trying the tdd approach of writing the tests first and then the methods.\nSorry if my english is a bit strange, not native english speaker.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "typeconverter", "logstash-filter"], "comments": [{"owner": {"reputation": 2034, "user_id": 9897223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1Nan.png?s=128&g=1", "display_name": "Sumanth Madishetty", "link": "https://stackoverflow.com/users/9897223/sumanth-madishetty"}, "edited": false, "score": 0, "creation_date": 1556823772, "post_id": 55897368, "comment_id": 98569078, "body": "Can you specify the expected output"}, {"owner": {"reputation": 2034, "user_id": 9897223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1Nan.png?s=128&g=1", "display_name": "Sumanth Madishetty", "link": "https://stackoverflow.com/users/9897223/sumanth-madishetty"}, "edited": false, "score": 0, "creation_date": 1557071508, "post_id": 55897368, "comment_id": 98635122, "body": "how come a bit Array contain CA as an element"}, {"owner": {"reputation": 2034, "user_id": 9897223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1Nan.png?s=128&g=1", "display_name": "Sumanth Madishetty", "link": "https://stackoverflow.com/users/9897223/sumanth-madishetty"}, "edited": false, "score": 0, "creation_date": 1557072141, "post_id": 55897368, "comment_id": 98635282, "body": "is that aHex???"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 5519065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bc92000eed626fee64d80e294f3230?s=128&d=identicon&r=PG&f=1", "display_name": "Zarof", "link": "https://stackoverflow.com/users/5519065/zarof"}, "edited": false, "score": 0, "creation_date": 1557058377, "post_id": 55948989, "comment_id": 98631381, "body": "added an example. any help would do."}], "tags": [], "owner": {"reputation": 2034, "user_id": 9897223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1Nan.png?s=128&g=1", "display_name": "Sumanth Madishetty", "link": "https://stackoverflow.com/users/9897223/sumanth-madishetty"}, "is_accepted": false, "score": 0, "last_activity_date": 1556788315, "last_edit_date": 1556788315, "creation_date": 1556787840, "answer_id": 55948989, "question_id": 55897368, "link": "https://stackoverflow.com/questions/55897368/how-to-convert-8-byte-array-to-int64-long-with-ruby/55948989#55948989", "title": "How to convert 8-Byte array to Int64/long with Ruby", "body": "<p>You can use <code>Array.pack()</code> method of ruby to convert array values to long refer to <a href=\"https://apidock.com/ruby/Array/pack\" rel=\"nofollow noreferrer\">this</a> link for documentation regarding <code>pack</code> method</p>\n\n<pre><code>You can do [1,2,3,4].pack(\"L\") //L -&gt; Unsigned Long \nIt returns a string \"\\x01\\x00\\x00\\x00\"\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 5519065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bc92000eed626fee64d80e294f3230?s=128&d=identicon&r=PG&f=1", "display_name": "Zarof", "link": "https://stackoverflow.com/users/5519065/zarof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557033771, "creation_date": 1556515237, "last_edit_date": 1557033771, "question_id": 55897368, "link": "https://stackoverflow.com/questions/55897368/how-to-convert-8-byte-array-to-int64-long-with-ruby", "title": "How to convert 8-Byte array to Int64/long with Ruby", "body": "<p>I'm looking for a way to convert an 8-Byte array to Int, in Ruby. </p>\n\n<p>the equivalent to the C# method 'BitConverter.()' : </p>\n\n<pre><code>btArr = [00,CA,9A,3B,00,00,00,00]\nlong A = BitConverter.(btArr, 0);\n\nA =&gt; 1000000000\n</code></pre>\n\n<p>any thoughts?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 1673, "user_id": 3775934, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/i2TBD.png?s=128&g=1", "display_name": "Scrobot", "link": "https://stackoverflow.com/users/3775934/scrobot"}, "is_accepted": true, "score": 0, "last_activity_date": 1556513889, "creation_date": 1556513889, "answer_id": 55897176, "question_id": 55896655, "link": "https://stackoverflow.com/questions/55896655/unable-to-extract-information-from-a-file/55897176#55897176", "title": "Unable to extract information from a file", "body": "<p>Here your solution))) It was a few little mistakes. Firstly, you had empty tracks because you read the end of the file. You have been called <code>read_tracks</code> the first time in <code>read_album</code> and the second time in <code>main</code>.\nAlso, you have an exception when you in <code>print_track</code> tried to call the loop on <code>Track</code> object.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Genre\n  POP, CLASSIC, JAZZ, ROCK = *1..4\nend\n\n$genre_names = ['Null', 'Pop', 'Classic', 'Jazz', 'Rock']\n\nclass Album\n# NB: you will need to add tracks to the following and the initialize()\n  attr_accessor :title, :artist, :genre, :tracks\n\n# complete the missing code:\n  def initialize (title, artist, genre)\n    @title = title\n    @artist = artist\n    @genre = genre\n  end\nend\n\nclass Track\n  attr_accessor :name, :location\n\n  def initialize (name, location)\n    @name = name\n    @location = location\n  end\nend\n\n\n# Returns an array of tracks read from the given file\n\ndef read_tracks(music_file)\n  tracks = Array.new\n  count = music_file.gets.to_i\n  index = 0\n\n  while index &lt; count\n    tracks &lt;&lt; read_track(music_file)\n    index += 1\n  end\n\n  tracks\nend\n\n# Reads in and returns a single track from the given file\n\ndef read_track(music_file)\n  track_name = music_file.gets\n  track_location = music_file.gets\n  track = Track.new(track_name, track_location)\nend\n\n\n\n\n# Takes an array of tracks and prints them to the terminal\n\ndef print_tracks(tracks)\n  index = 0\n  while (index &lt; tracks.length)\n    puts 'Track Number ' + index.to_s + ' is:'\n    print_track(tracks[index])\n\n    index += 1\n\n  end\n  tracks\nend\n\n# Reads in and returns a single album from the given file, with all its tracks\n\ndef read_album(music_file)\n\n  # read in all the Album's fields/attributes including all the tracks\n  # complete the missing code\n  album_artist = music_file.gets\n  album_title = music_file.gets\n  album_genre = music_file.gets\n  album = Album.new(album_title, album_artist, album_genre)\n  album\nend\n\n\n# Takes a single album and prints it to the terminal along with all its tracks\ndef print_album(album)\n\n  # print out all the albums fields/attributes\n  # Complete the missing code.\n  puts 'Album title is ' + album.title.to_s\n  puts 'Album artist is ' + album.artist.to_s\n  puts 'Genre is ' + album.genre.to_s\n  puts $genre_names[album.genre.to_i]\n  # print out the tracks\n  puts 'Tracks are: ' + print_tracks(album.tracks).to_s\nend\n\n# Takes a single track and prints it to the terminal\ndef print_track(track)\n  puts('Track title is: ' + track.name.to_s)\n  puts('Track file location is: ' + track.location.to_s)\nend\n\n# Reads in an album from a file and then print the album to the terminal\n\ndef main\n\n  music_file = File.new(\"album.txt\", \"r\")\n\n  if music_file\n    album = read_album(music_file)\n    album.tracks = read_tracks(music_file)\n    music_file.close\n  else\n    puts \"unable to read\"\n  end\n\n  print_album(album)\n\nend\n\nmain\n\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11422654"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 55897176, "answer_count": 1, "score": 1, "last_activity_date": 1556513889, "creation_date": 1556509164, "last_edit_date": 1556509444, "question_id": 55896655, "link": "https://stackoverflow.com/questions/55896655/unable-to-extract-information-from-a-file", "title": "Unable to extract information from a file", "body": "<p>My program is designed to intake the \"Album title\", \"Album artist\", \"Album Genre\", and \"tracks\" from a .txt file. It puts these tracks into an array and then prints that array to the terminal.</p>\n\n<p>Everything works fine, except the array that is being printed is empty \"[]\"</p>\n\n<p>The Ruby Code</p>\n\n<pre><code>module Genre\n  POP, CLASSIC, JAZZ, ROCK = *1..4\nend\n\n$genre_names = ['Null', 'Pop', 'Classic', 'Jazz', 'Rock']\n\nclass Album\n# NB: you will need to add tracks to the following and the initialize()\n    attr_accessor :title, :artist, :genre, :tracks\n\n# complete the missing code:\n    def initialize (title, artist, genre, tracks)\n        @title = title\n        @artist = artist\n        @genre = genre\n        @tracks = tracks\n    end\nend\n\nclass Track\n    attr_accessor :name, :location\n\n    def initialize (name, location)\n        @name = name\n        @location = location\n    end\nend\n\n\n# Returns an array of tracks read from the given file\n\ndef read_tracks(music_file)\n    tracks = Array.new\n    count = music_file.gets().to_i\n    index = 0\n    while index &lt; count\n        track = read_track(music_file)\n        tracks &lt;&lt; track\n        index = index + 1\n    end\n\n    tracks\nend\n\n# Reads in and returns a single track from the given file\n\ndef read_track(music_file)\n    track_name = music_file.gets\n    track_location = music_file.gets\n    track = Track.new(track_name, track_location)\n\nend\n\n\n\n\n# Takes an array of tracks and prints them to the terminal\n\ndef print_tracks(tracks)\n    index = 0\n    while (index &lt; tracks.length)\n        puts 'Track Number ' + index.to_s + ' is:'\n        print_track(tracks[index])\n\n        index = index + 1\n\n    end\n    tracks\n    end\n\n# Reads in and returns a single album from the given file, with all its tracks\n\ndef read_album(music_file)\n\n  # read in all the Album's fields/attributes including all the tracks\n  # complete the missing code\n    album_artist = music_file.gets\n    album_title = music_file.gets\n    album_genre = music_file.gets\n    tracks = read_tracks(music_file)\n    album = Album.new(album_title, album_artist, album_genre, tracks)\n    album\nend\n\n\n# Takes a single album and prints it to the terminal along with all its tracks\ndef print_album(album, tracks)\n\n  # print out all the albums fields/attributes\n  # Complete the missing code.\n    puts 'Album title is ' + album.title.to_s\n    puts 'Album artist is ' + album.artist.to_s\n    puts 'Genre is ' + album.genre.to_s\n    puts $genre_names[album.genre.to_i]\n    # print out the tracks\n    puts 'Tracks are: ' + print_tracks(tracks).to_s\nend\n\n# Takes a single track and prints it to the terminal\ndef print_track(tracks)\n    tracks.each do |track|\n        puts('Track title is: ' + track.name.to_s)\n        puts('Track file location is: ' + track.location.to_s)\n    end\n    end\n\n# Reads in an album from a file and then print the album to the terminal\n\ndef main\n\n  music_file = File.new(\"album.txt\", \"r\")\n\nif music_file\n    album = read_album(music_file)\n    tracks = read_tracks(music_file)\n    music_file.close\nelse\n    puts \"unable to read\"\nend\n\n    print_album(album, tracks)\n\nend\n\nmain\n</code></pre>\n\n<p>This is what the .txt file contains</p>\n\n<pre><code>Neil Diamond\nGreatest Hits\n1\n3\nCrackling Rose\nsounds/01-Cracklin-rose.wav\nSoolaimon\nsounds/06-Soolaimon.wav\nSweet Caroline\nsounds/20-Sweet_Caroline.wav\n</code></pre>\n\n<p>I receive an ouput of:</p>\n\n<pre><code>Album title is Greatest Hits\nAlbum artist is Neil Diamond\nGenre is 1\nPop\nTracks are: []\n</code></pre>\n\n<p>when the tracks array should print out the different tracks, their name and their file location</p>\n"}, {"tags": ["ruby", "google-chrome", "heroku", "selenium-chromedriver", "watir"], "comments": [{"owner": {"reputation": 21, "user_id": 5999694, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207352197357404/picture?type=large", "display_name": "Corey Shapiro", "link": "https://stackoverflow.com/users/5999694/corey-shapiro"}, "edited": false, "score": 0, "creation_date": 1556504215, "post_id": 55896178, "comment_id": 98448693, "body": "I&#39;ve read that adding other command line switches like disable-gpu, no-sandbox, and headless can prevent certain related errors, but are those things really necessary for a program like mine to work?"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1556506608, "post_id": 55896178, "comment_id": 98449115, "body": "What did you set <code>user-data-dir</code> to?  The user data directory on the Heroku instance?  I&#39;d think that would be <code>~&#47;.config&#47;google-chrome</code> on linux."}, {"owner": {"reputation": 21, "user_id": 5999694, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207352197357404/picture?type=large", "display_name": "Corey Shapiro", "link": "https://stackoverflow.com/users/5999694/corey-shapiro"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1556506929, "post_id": 55896178, "comment_id": 98449164, "body": "I think I just set user-data-dir to a location on my C drive. Heroku has it&#39;s own user data directory? How do I get the filepath to it/figure out where to find it?"}, {"owner": {"reputation": 21, "user_id": 5999694, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207352197357404/picture?type=large", "display_name": "Corey Shapiro", "link": "https://stackoverflow.com/users/5999694/corey-shapiro"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1556506972, "post_id": 55896178, "comment_id": 98449174, "body": "My first comment shouldn&#39;t be relevant because &quot;This buildpack installs shims that always add --headless, --disable-gpu, --no-sandbox, and --remote-debugging-port=9222 to any google-chrome command as you&#39;ll have trouble running Chrome on a Heroku dyno otherwise.&quot;"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1556507318, "post_id": 55896178, "comment_id": 98449233, "body": "Try SSH&#39;ing to your heroku instance and look for the <code>~&#47;.config&#47;google-chrome</code> directory.  That&#39;s chrome&#39;s default location for the user data directory."}, {"owner": {"reputation": 21, "user_id": 5999694, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207352197357404/picture?type=large", "display_name": "Corey Shapiro", "link": "https://stackoverflow.com/users/5999694/corey-shapiro"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1556580344, "post_id": 55896178, "comment_id": 98478815, "body": "I figured out how to set user-data-dir to the ~/.config/google-chrome directory when my app is running on Heroku, but how do I put an actual google profile into that directory?"}, {"owner": {"reputation": 21, "user_id": 5999694, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207352197357404/picture?type=large", "display_name": "Corey Shapiro", "link": "https://stackoverflow.com/users/5999694/corey-shapiro"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1556581359, "post_id": 55896178, "comment_id": 98478996, "body": "I tried getting to that folder with Heroku Bash, but the .config folder doesn&#39;t seem to exist there."}], "owner": {"reputation": 21, "user_id": 5999694, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207352197357404/picture?type=large", "display_name": "Corey Shapiro", "link": "https://stackoverflow.com/users/5999694/corey-shapiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556503869, "creation_date": 1556503869, "question_id": 55896178, "link": "https://stackoverflow.com/questions/55896178/how-do-i-access-my-google-user-profile-on-heroku-using-ruby", "title": "How do I access my google user profile on Heroku using Ruby?", "body": "<p>I have a Ruby program that automates simple data entry tasks for a web application with Selenium-Chromedriver. In order for the program to work, I need to create a chromedriver instance that starts out as logged in to my google account, because the web application doesn't let you log in if it doesn't recognize that the browser is being used by someone familiar. To meet these criteria, I set up the driver like this:</p>\n\n<pre><code>args = ['user-data-dir=C:\\Users\\user\\AppData\\Local\\Google\\Chrome\\User Data']\noptions = Selenium::WebDriver::Chrome::Options.new(args: args)\ndriver = Selenium::WebDriver.for(:chrome, options: options)\n$browser = Watir::Browser.start(\"https://nycseminarcenter.tripleseat.com/calendar\", driver)\n</code></pre>\n\n<p>I want to add this program to a collection of other programs I have on Heroku that are scheduled to automatically run every so often, and I installed the buildpacks that should let me use Selenium from Heroku (<a href=\"https://github.com/heroku/heroku-buildpack-google-chrome\" rel=\"nofollow noreferrer\">https://github.com/heroku/heroku-buildpack-google-chrome</a> and <a href=\"https://github.com/heroku/heroku-buildpack-chromedriver\" rel=\"nofollow noreferrer\">https://github.com/heroku/heroku-buildpack-chromedriver</a>), but when I try to run the program as is, I end up with the following error </p>\n\n<pre><code>/app/vendor/bundle/ruby/2.5.0/gems/selenium-webdriver-3.142.0/lib/selenium/webdriver/remote/response.rb:72:in `assert_ok': unknown error: DevToolsActivePort file doesn't exist (Selenium::WebDriver::Error::UnknownError)  \n(Driver info: chromedriver=2.46.628388 (4a34a70827ac54148e092aafb70504c4ea7ae926),platform=Linux 4.4.0-1038-aws x86_64)  \n</code></pre>\n\n<p>coming from the line where I create the Webdriver object. I'm guessing that the \"DevToolsActivePort file doesn't exist\" because Heroku doesn't have a copy of my user data directory like my local ruby environment does. Is there some special way to access a google user profile directly on Heroku?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556509704, "post_id": 55896130, "comment_id": 98449686, "body": "Notice that <code>[&#39;00011001&#39;].pack(&#39;B*&#39;) #=&gt; &quot;\\x19&quot;; [&#39;00013001&#39;].pack(&#39;B*&#39;) #=&gt; &quot;\\x19&quot;; [&#39;00015001&#39;].pack(&#39;B*&#39;) #=&gt; &quot;\\x19&quot;</code>, and <code>[&#39;00012001&#39;].pack(&#39;B*&#39;) #=&gt; [&quot;00010001&quot;] #=&gt; &quot;\\x11&quot;; [&#39;00014001&#39;].pack(&#39;B*&#39;) #=&gt; &quot;\\x11&quot;; [&#39;00018001&#39;].pack(&#39;B*&#39;) #=&gt; &quot;\\x11&quot;</code>. It&#39;s as though only the last bit of 3 (<code>0b11</code>), 5  (<code>0xb101</code>), 2 (<code>0b10</code>), 4 (<code>0b100</code>) and 8 (<code>0b100</code>) is retained."}], "answers": [{"comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 2, "creation_date": 1556505248, "post_id": 55896235, "comment_id": 98448890, "body": "<code>[^01]</code>. The second <code>^</code> is making the regex scan for characters that are none of <code>0</code>, <code>1</code>, or <code>^</code>, which is not what you want."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1556507554, "post_id": 55896235, "comment_id": 98449286, "body": "Slightly simpler: <code>&quot;1000101010&quot;.match?(&#47;[^01]&#47;)</code>."}], "tags": [], "owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "is_accepted": true, "score": 2, "last_activity_date": 1556506749, "last_edit_date": 1556506749, "creation_date": 1556504526, "answer_id": 55896235, "question_id": 55896130, "link": "https://stackoverflow.com/questions/55896130/how-to-make-ruby-indicate-error-before-a-binary-function/55896235#55896235", "title": "How to make ruby indicate error before a binary function?", "body": "<pre><code>\"1000101010\".scan(/[^01]/).any?\n</code></pre>\n\n<p>This simply performs a regex on the string looking for any characters that are not <code>0</code> or <code>1</code> and returns true if the string has any other characters.</p>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1556542034, "creation_date": 1556542034, "answer_id": 55903732, "question_id": 55896130, "link": "https://stackoverflow.com/questions/55896130/how-to-make-ruby-indicate-error-before-a-binary-function/55903732#55903732", "title": "How to make ruby indicate error before a binary function?", "body": "<p>The <a href=\"https://ruby-doc.org/core-2.6.1/Kernel.html#method-i-Integer\" rel=\"nofollow noreferrer\">Integer</a> method of Kernel accepts a base as argument and is strict (by default).</p>\n\n<pre><code>Integer(\"00011001\",2).to_s(16) \n# =&gt; \"19\"\n\nInteger(\"00013001\",2).to_s(16) \n# =&gt; invalid value for Integer(): \"00013001\" (ArgumentError)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9450045"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 55896235, "answer_count": 2, "score": 0, "last_activity_date": 1556542034, "creation_date": 1556503233, "question_id": 55896130, "link": "https://stackoverflow.com/questions/55896130/how-to-make-ruby-indicate-error-before-a-binary-function", "title": "How to make ruby indicate error before a binary function?", "body": "<p>I have this code that works:</p>\n\n<pre><code>stripped = \"00010001\"\nIO.binwrite(\"Test.txt\", [stripped].pack('B*'))\n</code></pre>\n\n<p>But if <code>stripped</code> equals to:</p>\n\n<pre><code>stripped = \"00013001\"\n</code></pre>\n\n<p>Ruby writes the \"binary\" anyway. How can I make Ruby give me a mistake and not write it down?</p>\n"}, {"tags": ["ruby", "multithreading", "global-variables"], "comments": [{"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1556540205, "post_id": 55895952, "comment_id": 98461961, "body": "Re, &quot;a...variable that lets the main thread know when to join...&quot; Why would your main thread need to know when to join? What is it going to keep doing up until that moment? Normally thread A joins thread B when there&#39;s nothing else left that  thread A can do before thread B is finished."}], "answers": [{"comments": [{"owner": {"reputation": 1927, "user_id": 953419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f79e690bef0b6c98676b5751056e0a1?s=128&d=identicon&r=PG", "display_name": "seamus", "link": "https://stackoverflow.com/users/953419/seamus"}, "edited": false, "score": 0, "creation_date": 1556533820, "post_id": 55898725, "comment_id": 98458827, "body": "Thank you. Objects need to be passed. Got it."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 1, "last_activity_date": 1556522810, "creation_date": 1556522810, "answer_id": 55898725, "question_id": 55895952, "link": "https://stackoverflow.com/questions/55895952/ruby-how-do-i-share-a-global-variable-amongst-threads-that-are-running-an-objec/55898725#55898725", "title": "Ruby: How do I share a global variable amongst threads that are running an object.method", "body": "<p>The problem is in the function <code>start_threads</code>. You called <code>io.change(number)</code> in that function, but the local variable <code>io</code> is not defined in that function. The consequence is that both threads died due to <code>NameError</code>.</p>\n\n<p>You can change the <code>start_threads</code> function as this:</p>\n\n<pre><code>def start_threads(numbers, io)\n  numbers.each do |number|\n    $threads[number] = Thread.new {io.change(number)}\n  end\nend\n</code></pre>\n\n<p>and call it like this:</p>\n\n<pre><code>start_threads(numbers, io)\n</code></pre>\n"}], "owner": {"reputation": 1927, "user_id": 953419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f79e690bef0b6c98676b5751056e0a1?s=128&d=identicon&r=PG", "display_name": "seamus", "link": "https://stackoverflow.com/users/953419/seamus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 0, "accepted_answer_id": 55898725, "answer_count": 1, "score": -1, "last_activity_date": 1556522810, "creation_date": 1556500962, "question_id": 55895952, "link": "https://stackoverflow.com/questions/55895952/ruby-how-do-i-share-a-global-variable-amongst-threads-that-are-running-an-objec", "title": "Ruby: How do I share a global variable amongst threads that are running an object.method", "body": "<p>I am running a ruby script that creates several threads. </p>\n\n<p>I want to make the threads have access to a common variable that lets the main thread know when to join the threads.</p>\n\n<p>I am trying to do this with a $global variable, but the threads don't seem the be able to access the $global.</p>\n\n<pre><code>class IO_ \n  def change(number)\n    sleep(60 * number)\n    $trade_executed = true\n  end\nend \n\nio = IO_.new \nnumbers = 1, 2\n$threads = {}\n$trade_executed = false\n\ndef start_threads(numbers)\n  numbers.each do |number|\n    $threads[number] = Thread.new {io.change(number)}\n  end\nend\n\nstart_threads(numbers)\n\nwhile true\n  p $trade_executed\n  p $threads\n  sleep(10)\nend\n</code></pre>\n\n<p>The above $trade_executed will always be 'false'. </p>\n\n<p>But if I move the method change outside of the io object it works.</p>\n"}, {"tags": ["ruby", "google-calendar-api"], "comments": [{"owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1556500443, "post_id": 55895909, "comment_id": 98448152, "body": "Welcome Travis. Do you have all the code from the example, or just the snippet you posted?"}, {"owner": {"reputation": 1, "user_id": 11424644, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vt8EnTCN0XA/AAAAAAAAAAI/AAAAAAAAAB4/aXcPj-93RN0/photo.jpg?sz=128", "display_name": "Travis", "link": "https://stackoverflow.com/users/11424644/travis"}, "reply_to_user": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1556504275, "post_id": 55895909, "comment_id": 98448702, "body": "I could add all of my code as well"}, {"owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1556504626, "post_id": 55895909, "comment_id": 98448768, "body": "Great. Also could you add the error that is printed to the console"}, {"owner": {"reputation": 1, "user_id": 11424644, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vt8EnTCN0XA/AAAAAAAAAAI/AAAAAAAAAB4/aXcPj-93RN0/photo.jpg?sz=128", "display_name": "Travis", "link": "https://stackoverflow.com/users/11424644/travis"}, "reply_to_user": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1556511686, "post_id": 55895909, "comment_id": 98450045, "body": "I changed my code to where I made the request body correctly, so no more &#39;time min&#39; parameter error anymore but the response gave an error"}, {"owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1556534173, "post_id": 55895909, "comment_id": 98459000, "body": "I noticed the scope is different to the example <code>SCOPE = Google::Apis::CalendarV3::AUTH_CALENDAR</code>"}, {"owner": {"reputation": 1, "user_id": 11424644, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vt8EnTCN0XA/AAAAAAAAAAI/AAAAAAAAAB4/aXcPj-93RN0/photo.jpg?sz=128", "display_name": "Travis", "link": "https://stackoverflow.com/users/11424644/travis"}, "reply_to_user": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 1, "creation_date": 1557112170, "post_id": 55895909, "comment_id": 98643465, "body": "That was done on purpose to change the access to read and edit, instead of just read. Still, I tried it with the old scope though and it makes no difference."}], "owner": {"reputation": 1, "user_id": 11424644, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vt8EnTCN0XA/AAAAAAAAAAI/AAAAAAAAAB4/aXcPj-93RN0/photo.jpg?sz=128", "display_name": "Travis", "link": "https://stackoverflow.com/users/11424644/travis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556511317, "creation_date": 1556500244, "last_edit_date": 1556511317, "question_id": 55895909, "link": "https://stackoverflow.com/questions/55895909/google-freebusy-api-method-returning-not-found-error", "title": "Google freebusy API method returning not found error", "body": "<p>I am trying to find all the freebusy times from my primary calendar using the \"query_freebusy\" method but I am receiving a \"not found\" error as a response</p>\n\n<p>I admit I am a novice coder at best, but so far I've been using much of the code from the <a href=\"https://developers.google.com/calendar/quickstart/ruby\" rel=\"nofollow noreferrer\">quickstart-example</a> in the google calendar API documentation to authorize my requests, as well as code from another stack overflow <a href=\"https://stackoverflow.com/questions/17170302/google-freebusy-api-call-in-rails-will-not-recognizing-parameters\">page</a> regarding the query_freebusy method. \nMy code is as follows:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'google/apis/calendar_v3'\nrequire 'googleauth'\nrequire 'googleauth/stores/file_token_store'\nrequire 'date'\nrequire 'fileutils'\nrequire 'pry'\nrequire 'pp'\n\nOOB_URI = 'urn:ietf:wg:oauth:2.0:oob'.freeze\nAPPLICATION_NAME = 'Google Calendar API Ruby Quickstart'.freeze\nCREDENTIALS_PATH = 'credentials.json'.freeze\nTOKEN_PATH = 'token.yaml'.freeze\nSCOPE = Google::Apis::CalendarV3::AUTH_CALENDAR\n\ndef authorize\n client_id = Google::Auth::ClientId.from_file(CREDENTIALS_PATH)\n token_store = Google::Auth::Stores::FileTokenStore.new(file: TOKEN_PATH)\n authorizer = Google::Auth::UserAuthorizer.new(client_id, SCOPE, token_store)\n user_id = 'default'\n credentials = authorizer.get_credentials(user_id)\n if credentials.nil?\n\n   url = authorizer.get_authorization_url(base_url: OOB_URI)\n   puts 'Open the following URL in the browser and enter the ' \\\n        \"resulting code after authorization:\\n\" + url\n   code = gets\n   credentials = authorizer.get_and_store_credentials_from_code(\n     user_id: user_id, code: code, base_url: OOB_URI\n   )\n end\n credentials\nend\n\nservice = Google::Apis::CalendarV3::CalendarService.new\nservice.client_options.application_name = APPLICATION_NAME\nservice.authorization = authorize\n\ncalendar_id = 'primary'\nbody = Google::Apis::CalendarV3::FreeBusyRequest.new \nbody.items = [calendar_id]\nbody.time_min = \"2019-04-28T00:00:00-00:00\"\nbody.time_max = \"2019-04-30T00:00:00-00:00\"\nresponse = service.query_freebusy(body)\nputs response.to_json\n</code></pre>\n\n<p>The response I get is:</p>\n\n<pre><code>{\"calendars\":{\"\":{\"busy\":[],\"errors\":[{\"domain\":\"global\",\"reason\":\"notFound\"}]}},\"kind\":\"calendar#freeBusy\",\"timeMax\":\"2019-04-30T00:00:00.000+00:00\",\"timeMin\":\"2019-04-28T00:00:00.000+00:00\"}\n</code></pre>\n\n<p>I have 5 events on that calendar between that time frame, but none show up in the response.</p>\n"}, {"tags": ["ruby", "parameters"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1556497290, "post_id": 55895585, "comment_id": 98447716, "body": "In ruby, it&#39;s just a comment and has no effect whatsoever."}], "answers": [{"tags": [], "owner": {"reputation": 306, "user_id": 10919154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FqfuP.jpg?s=128&g=1", "display_name": "Noctilucente", "link": "https://stackoverflow.com/users/10919154/noctilucente"}, "is_accepted": true, "score": 5, "last_activity_date": 1556496962, "creation_date": 1556496962, "answer_id": 55895662, "question_id": 55895585, "link": "https://stackoverflow.com/questions/55895585/what-does-param-and-return-mean-in-ruby/55895662#55895662", "title": "What does @param and @return mean in Ruby?", "body": "<p>From <a href=\"https://yardoc.org/\" rel=\"noreferrer\">https://yardoc.org/</a>:</p>\n\n<blockquote>\n  <p>YARD is a documentation generation tool for the Ruby programming\n  language. It enables the user to generate consistent, usable\n  documentation that can be exported to a number of formats very easily,\n  and also supports extending for custom Ruby constructs such as custom\n  class level definitions.</p>\n</blockquote>\n\n<pre class=\"lang-rb prettyprint-override\"><code># @param {ListNode} l1\n# @param {ListNode} l2\n# @return {ListNode}\n</code></pre>\n\n<p>is the YARD documentation of the <code>add_two_numbers</code> method. It means that the method takes two parameters (<code>l1</code> and <code>l2</code>, both are <code>ListNode</code> instances) and returns a new <code>ListNode</code> instance.</p>\n"}], "owner": {"reputation": 57, "user_id": 11121699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9792e7b3960b581ce1b80b4cd14aa2eb?s=128&d=identicon&r=PG&f=1", "display_name": "PastaCountry", "link": "https://stackoverflow.com/users/11121699/pastacountry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 772, "favorite_count": 0, "accepted_answer_id": 55895662, "answer_count": 1, "score": 1, "last_activity_date": 1556530085, "creation_date": 1556496251, "last_edit_date": 1556530085, "question_id": 55895585, "link": "https://stackoverflow.com/questions/55895585/what-does-param-and-return-mean-in-ruby", "title": "What does @param and @return mean in Ruby?", "body": "<p>I'm just starting out a question on leetcode and i'm just wondering what the syntax of a bit of code means.</p>\n\n<pre><code># Definition for singly-linked list.\n# class ListNode\n#     attr_accessor :val, :next\n#     def initialize(val)\n#         @val = val\n#         @next = nil\n#     end\n# end\n\n# @param {ListNode} l1\n# @param {ListNode} l2\n# @return {ListNode}\n\ndef add_two_numbers(l1, l2)\n\nend\n</code></pre>\n\n<p>I'm having trouble understanding what this particular part means.</p>\n\n<pre><code># @param {ListNode} l1\n# @param {ListNode} l2\n# @return {ListNode}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1556523347, "post_id": 55895272, "comment_id": 98453776, "body": "Why do you want to show an error message when the user doesn&#39;t enter a query? Why not simple show all results?"}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1556525489, "post_id": 55895272, "comment_id": 98454731, "body": "The coordinates for all places in the world? That would be quite a lot of results to show ;)"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1556525546, "post_id": 55895272, "comment_id": 98454759, "body": "With pagination of course."}], "answers": [{"comments": [{"owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "edited": false, "score": 1, "creation_date": 1556509726, "post_id": 55896690, "comment_id": 98449692, "body": "The <code>== true</code> should be able to be removed without any change in the result"}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1556524852, "post_id": 55896690, "comment_id": 98454469, "body": "@2017kamb This still has the same result: the message is still being shown on page reload..."}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1556525832, "post_id": 55896690, "comment_id": 98454884, "body": "@2017kamb Sorry, I don&#39;t understand what you mean? When page loads I now get the message &quot;We couldn&#39;t find a place by this name. Please enter a valid place name&quot;."}, {"owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "edited": false, "score": 0, "creation_date": 1556526119, "post_id": 55896690, "comment_id": 98455017, "body": "How you are landing on index page of location controller without any search?"}, {"owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "edited": false, "score": 0, "creation_date": 1556526223, "post_id": 55896690, "comment_id": 98455071, "body": "add required: true in text_field_tag"}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1556526310, "post_id": 55896690, "comment_id": 98455111, "body": "@2017kamb localhost:3000/locations"}, {"owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "edited": false, "score": 0, "creation_date": 1556526409, "post_id": 55896690, "comment_id": 98455154, "body": "what is the expectation on first time hit of, localhost:3000/locations  ?"}, {"owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "edited": false, "score": 0, "creation_date": 1556526711, "post_id": 55896690, "comment_id": 98455294, "body": "see actually what happens, when we load index page, we should show all the locations and if user search for specific location we can show accordingly. I am not getting what you actually want?"}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1556526887, "post_id": 55896690, "comment_id": 98455386, "body": "@2017kamb when index is loaded i just want a search field and submit button. no results should be displyed and no messages should be displayed"}, {"owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "edited": false, "score": 0, "creation_date": 1556526953, "post_id": 55896690, "comment_id": 98455427, "body": "make a search action then for code seperation and keep index aside."}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1556527965, "post_id": 55896690, "comment_id": 98455888, "body": "@2017kamb Okay, I&#39;ve done that now. But still getting the same result..."}, {"owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "edited": false, "score": 0, "creation_date": 1556528322, "post_id": 55896690, "comment_id": 98456053, "body": "update the question with your new implementation, then people will check and reply"}], "tags": [], "owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "is_accepted": false, "score": 0, "last_activity_date": 1556509951, "last_edit_date": 1556509951, "creation_date": 1556509574, "answer_id": 55896690, "question_id": 55895272, "link": "https://stackoverflow.com/questions/55895272/in-rails-how-do-i-prevent-my-search-function-from-automatically-running-a-blank/55896690#55896690", "title": "In Rails, how do I prevent my search function from automatically running a blank search on page load?", "body": "<p>Inside location search form add,</p>\n\n<pre><code>&lt;%= hidden_field_tag 'location_search', true %&gt;\n</code></pre>\n\n<p>In controller check as,</p>\n\n<pre><code>if  params[:location_search] &amp;&amp; params[:q].blank?\n   @message = 'Please enter an address in the field!'\n   return\nend\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556509951, "creation_date": 1556492628, "question_id": 55895272, "link": "https://stackoverflow.com/questions/55895272/in-rails-how-do-i-prevent-my-search-function-from-automatically-running-a-blank", "title": "In Rails, how do I prevent my search function from automatically running a blank search on page load?", "body": "<p>I have a controller that has a search function. The search function displays  an alert message it a user doesn't enter anything into the search field. The problem is that this message displays when the page loads - before submit has been clicked. How do I prevent this?</p>\n\n<p>Here is my controller code:</p>\n\n<pre><code>class LocationsController &lt; ApplicationController\n  before_action :authenticate_user!\n\n  def index\n    if params[:q].blank?\n      @message = 'Please enter an address in the field!'\n      return\n    end\n\n    token = Rails.application.credentials.locationiq_key\n    search = LocationiqApi.new(token).find_place(params[:q])\n\n    # Hash#dig will return nil if ANY part of the lookup fails\n    latitude = search.dig('searchresults', 'place', 'lat')\n    longitude = search.dig('searchresults', 'place', 'lon')\n\n    if latitude.nil? || longitude.nil?\n      # Output an error message if lat or lon is nil\n      @coordinates = \"We couldn't find a place by this name. Please enter a valid place name.\"\n    else\n      @coordinates = \"Coordinates: \" + \"#{latitude}, #{longitude}\"\n    end\n  end\nend\n</code></pre>\n\n<p>and my view:</p>\n\n<pre><code>&lt;main&gt;\n  &lt;h1&gt;Location Search&lt;/h1&gt;\n  &lt;!-- devise flash messages --&gt;\n  &lt;p class=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n  &lt;p class=\"alert\"&gt;&lt;%= alert %&gt;&lt;/p&gt;\n  &lt;!-- Button to search coordinates --&gt;\n  &lt;%= form_tag(locations_path, method: :get) do %&gt;\n    &lt;%= text_field_tag(:q) %&gt;\n    &lt;%= submit_tag(\"geocode\") %&gt;\n    &lt;%= @message %&gt;\n  &lt;% end %&gt;&lt;br&gt;\n\n  &lt;%= @coordinates %&gt;\n&lt;/main&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "each"], "answers": [{"comments": [{"owner": {"reputation": 1927, "user_id": 953419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f79e690bef0b6c98676b5751056e0a1?s=128&d=identicon&r=PG", "display_name": "seamus", "link": "https://stackoverflow.com/users/953419/seamus"}, "edited": false, "score": 0, "creation_date": 1556483648, "post_id": 55894326, "comment_id": 98445154, "body": "Thank you. is .map advised over .each?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 1927, "user_id": 953419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f79e690bef0b6c98676b5751056e0a1?s=128&d=identicon&r=PG", "display_name": "seamus", "link": "https://stackoverflow.com/users/953419/seamus"}, "edited": false, "score": 2, "creation_date": 1556483970, "post_id": 55894326, "comment_id": 98445211, "body": "@seamus you can do any iteration-related logic using each but if you are making some use of the return value of the each block, it&#39;s more idiomatic to use other enumerable methods like map, reduce/each_with_object/select/reject/all?/any?/find/etc You can see the full list of methods here <a href=\"https://ruby-doc.org/core-2.6.2/Enumerable.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.6.2/Enumerable.html</a>"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 6, "last_activity_date": 1556485118, "last_edit_date": 1556485118, "creation_date": 1556483413, "answer_id": 55894326, "question_id": 55894107, "link": "https://stackoverflow.com/questions/55894107/ruby-removing-non-numeric-values-from-array-and-converting-rest-to-float/55894326#55894326", "title": "Ruby removing non numeric values from array and converting rest to float", "body": "<p>The problem is you're mutating freq only in the <code>then</code> condition and not in the else condition.  </p>\n\n<p>There are enumerable methods that mutate for you, they usually end with a <code>!</code>:</p>\n\n<pre><code>freq = [\"1\", \"2\", \"3b\", \"c3\", \"4\", \"\", \"5t\"]\n=&gt; [\"1\", \"2\", \"3b\", \"c3\", \"4\", \"\", \"5t\"]\n\nfreq.reject! { |minutes| minutes.match(/\\D/) || minutes == \"\" }.map! { |minutes| minutes.to_f }\n=&gt; [1.0, 2.0, 4.0]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 2, "creation_date": 1556519960, "post_id": 55894486, "comment_id": 98452355, "body": "Your post is giving the feel of reading a good article. Thanks for detailing clearly."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1556487014, "last_edit_date": 1556487014, "creation_date": 1556484809, "answer_id": 55894486, "question_id": 55894107, "link": "https://stackoverflow.com/questions/55894107/ruby-removing-non-numeric-values-from-array-and-converting-rest-to-float/55894486#55894486", "title": "Ruby removing non numeric values from array and converting rest to float", "body": "<pre><code>arr = [\"1\", \"2\", \"3b\", \"c3\", \"4\", \"\", \"5t\"]\n</code></pre>\n\n<p>There are two possible approaches to this problem. One is to perform two steps: remove all elements that are not representations of non-negative integers, then convert those integers to floats, requiring one pass through each of two arrays. The other is to build an array of floats, making a single pass through <code>arr</code>. That can be done as follows.</p>\n\n<pre><code>arr.each_with_object([]) { |s,a| a &lt;&lt; s.to_f if s.match?(/\\A\\d+\\z/) }\n  #=&gt; [1.0, 2.0, 4.0] \n</code></pre>\n\n<p>The regular expression reads, \"match the beginning of the string (the anchor <code>\\A</code>), followed by one or more digits, followed by the end of the string (the anchor <code>\\z</code>). That's the same as not matching an empty string or a character that is not a digit, so we could instead write:</p>\n\n<pre><code>arr.each_with_object([]) { |s,a| a &lt;&lt; s.to_f unless s.empty? or s.match?(/\\D/) }\n  #=&gt; [1.0, 2.0, 4.0] \n</code></pre>\n\n<p>There is not much to choose between the two here, but sometimes the latter approach is easier to implement.</p>\n\n<p>Another way, that I'm not overly fond of (but it's worth knowing about), is to use the method <a href=\"http://ruby-doc.org/core-2.5.1/Kernel.html#method-i-Float\" rel=\"nofollow noreferrer\">Kernel#Float</a> followed by <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-compact\" rel=\"nofollow noreferrer\">Array#compact</a>:</p>\n\n<pre><code>arr = [\"1\", \"-2\", \"3b\", \"c3\", \"4.23\", \"\", \"5t\", \"-1.2e3\"]\n\narr.map { |s| Float(s) rescue nil }.compact\n  #=&gt; [1.0, -2.0, 4.23, -1200.0]\n</code></pre>\n\n<p>As seen, this converts elements of <code>arr</code> that are representations of integers or floats (not just non-negative integers) to floats (which may or may not be wanted). </p>\n\n<p><code>Float(s)</code> raises an <code>ArgumentError</code> if <code>s</code> cannot be converted to a float. For example:</p>\n\n<pre><code>Float(\"3b\")\n  #=&gt; ArgumentError (invalid value for Float(): \"3b\")\n</code></pre>\n\n<p>When that happens I catch the exception in an <em>in-line rescue clause</em>, returning <code>nil</code>.</p>\n\n<p>Some Rubiests don't like in-line rescue clauses because they can mask other errors. That concern can be addressed by only rescuing <code>ArgumentErrors</code>:</p>\n\n<pre><code>arr.map do |s|\n  begin\n    Float(s)\n  rescue ArgumentError\n    nil\n  end\nend.compact\n  #=&gt; [1.0, -2.0, 4.23, -1200.0]\n</code></pre>\n"}], "owner": {"reputation": 1927, "user_id": 953419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f79e690bef0b6c98676b5751056e0a1?s=128&d=identicon&r=PG", "display_name": "seamus", "link": "https://stackoverflow.com/users/953419/seamus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 55894326, "answer_count": 2, "score": 2, "last_activity_date": 1556487014, "creation_date": 1556481534, "question_id": 55894107, "link": "https://stackoverflow.com/questions/55894107/ruby-removing-non-numeric-values-from-array-and-converting-rest-to-float", "title": "Ruby removing non numeric values from array and converting rest to float", "body": "<p>I have a user entered string that I turn into an array, then I iterate through the array and remove non number values.</p>\n\n<p>It looks like my regex match is working half the time and my to_f never sets the array value to a float.</p>\n\n<blockquote>\n  <p>Lets assume I enter: \"1 2 3b c3 4, 5t\"</p>\n</blockquote>\n\n<pre><code>puts \"Enter Minutes\"  \nSTDOUT.flush  \nfreq = gets.chomp\nfreq = freq.split(/\\W/) #this creates the array, splitting at non-word chars\n\np freq #outputs: [\"1\", \"2\", \"3b\", \"c3\", \"4\", \"\", \"5t\"]\n\nfreq.each do |minutes|\n        if ( minutes == \"\" or /\\D/.match(minutes) ) then freq.delete(minutes) else minutes.to_f end\nend\n\np freq #outputs: [\"1\", \"2\", \"c3\", \"4\", \"5t\"]\n</code></pre>\n\n<blockquote>\n  <p>My desired results are: [1, 2, 4] #note they are numeric not chars</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "rvm", "nokogiri"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1558655924, "post_id": 55893629, "comment_id": 99182316, "body": "Why don&#39;t you specify a fixed version of Nokogiri on your gemfile? You shouldn&#39;t modify your Gemfile.lock, set what you want on in the Gemfile and run bundler to update the Gemfile.lock"}, {"owner": {"reputation": 580, "user_id": 1814561, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a3ad93ae7bdf08bf8aa989ddff037b0a?s=128&d=identicon&r=PG", "display_name": "Jeton Tha&#231;i", "link": "https://stackoverflow.com/users/1814561/jeton-tha%c3%a7i"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1558711136, "post_id": 55893629, "comment_id": 99203359, "body": "@arieljuod , nokogiri is not added in the Gemfile. It&#39;s probably required as a dependency."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1558720425, "post_id": 55893629, "comment_id": 99207192, "body": "You can add it to specify a version that you want to use."}], "owner": {"reputation": 580, "user_id": 1814561, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a3ad93ae7bdf08bf8aa989ddff037b0a?s=128&d=identicon&r=PG", "display_name": "Jeton Tha&#231;i", "link": "https://stackoverflow.com/users/1814561/jeton-tha%c3%a7i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1581291193, "creation_date": 1556478134, "last_edit_date": 1581291193, "question_id": 55893629, "link": "https://stackoverflow.com/questions/55893629/how-to-fix-rails-server-error-cannot-load-such-file-nokogiri-loaderror-af", "title": "How to fix Rails server error &#39;cannot load such file -- nokogiri (LoadError)&#39; after &quot;rails new&quot;?", "body": "<p>After every fresh <code>rails new</code> folder, when I try to run <code>rails server</code>, I  get:</p>\n\n<pre><code>cannot load such file -- nokogiri (LoadError)\n</code></pre>\n\n<p>I'm using Arch Linux.</p>\n\n<ul>\n<li>Ruby version = ruby 2.6.2</li>\n<li>Rails version ~> 5.2.3</li>\n<li>RVM 1.29.7</li>\n<li>Nokogiri (default: 1.10.3, 1.10.2)</li>\n</ul>\n\n<p>If I change the version of Nokogiri from 1.10.3 to 1.10.2 in Gemfile.lock, Rails will work.\nI tried removing <code>1.10.3</code> version but it's still there. I tried changing the default Nokogiri version and now I have two default versions in gem list:</p>\n\n<pre><code>nokogiri (default: 1.10.3, default: 1.10.2)\n</code></pre>\n"}, {"tags": ["ruby", "yaml"], "comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1556475778, "post_id": 55893131, "comment_id": 98443192, "body": "You need to show your code.  If this is yaml, then you should add that as a tag and mention that fact in your question."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6463948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abec3b3e7eeec8a2152ba49f91917f8?s=128&d=identicon&r=PG&f=1", "display_name": "PrashantB", "link": "https://stackoverflow.com/users/6463948/prashantb"}, "edited": false, "score": 1, "creation_date": 1556515595, "post_id": 55893281, "comment_id": 98450941, "body": "Thanks, this worked for me. As data is stored in a variable, I used <code>YAML.load(var)</code>."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 3, "last_activity_date": 1556475790, "creation_date": 1556475790, "answer_id": 55893281, "question_id": 55893131, "link": "https://stackoverflow.com/questions/55893131/ruby-snippet-for-reading-lines-block/55893281#55893281", "title": "Ruby snippet for reading lines block", "body": "<p>Looks like a YAML file, see <a href=\"https://ruby-doc.org/stdlib-2.6.2/libdoc/yaml/rdoc/YAML.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.6.2/libdoc/yaml/rdoc/YAML.html</a></p>\n\n<p>Load the file then handle the array:</p>\n\n<pre><code>require 'yaml'\n\ny = YAML.load_file( 'the_file.yaml' )\ny #=&gt; [[\"status\", \"New\", \"Delivered\"]]\n\nwords = y.first\np \"#{words[0]} from #{words[1]} to #{words[2]}\"\n#=&gt; \"status from New to Delivered\"\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 6463948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abec3b3e7eeec8a2152ba49f91917f8?s=128&d=identicon&r=PG&f=1", "display_name": "PrashantB", "link": "https://stackoverflow.com/users/6463948/prashantb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1556511086, "accepted_answer_id": 55893281, "answer_count": 1, "score": -3, "last_activity_date": 1556561989, "creation_date": 1556474729, "last_edit_date": 1556561989, "question_id": 55893131, "link": "https://stackoverflow.com/questions/55893131/ruby-snippet-for-reading-lines-block", "closed_reason": "Needs details or clarity", "title": "Ruby snippet for reading lines block", "body": "<p>I am new to ruby and seeking help.\nWe got the csv files having the column with data shown below. Using the csv parser and fetch the column data for each in a variable.</p>\n\n<p>And we want to change column data from csv file to line shown below and write to a file:</p>\n\n<p>FROM</p>\n\n<pre><code>---\n- - status\n  - New\n  - Delivered\n</code></pre>\n\n<p>TO</p>\n\n<p><code>status from New to Delivered</code></p>\n\n<p>Thanks @igian for help</p>\n\n<pre><code>---\n- - status\n  - New\n  - Delivered\n- - Milestone\n  - Sprint1\n  - Sprint\n</code></pre>\n\n<p>I was struggling for this. I tried to use y.second but it fails, please correct what I am doing wrong.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1556487298, "post_id": 55893103, "comment_id": 98445957, "body": "This is a pure Ruby question, so I don&#39;t believe it should have a Rails tag. I would only have the single tag &quot;ruby&quot;, but &quot;hash&quot; does no harm. Tags are used to facilitate searches (filtering in or out) so make sure your tags are neither misleading nor unhelpful. The Rails tag, for example, could cause readers who filter out Rails questions to miss your question, or waste time of those who are not interested in pure-Ruby questions."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1556548989, "post_id": 55893103, "comment_id": 98466956, "body": "Actually @CarySwoveland this looks very much like a Rails question, but it could be the wrong question.  If this data is from a database the OP should be using <code>DISTINCT ON</code> (Postgres) or <code>GROUP BY</code> (MySQL) and not pulling all the data out of the database."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 3, "last_activity_date": 1556474868, "creation_date": 1556474868, "answer_id": 55893155, "question_id": 55893103, "link": "https://stackoverflow.com/questions/55893103/how-do-i-merge-array-of-hashes-summing-by-the-value/55893155#55893155", "title": "how do I merge array of hashes summing by the value?", "body": "<p>Let's group by id and map each result to a structure where the pages are the sum of all the pages for that id</p>\n\n<pre><code>array.\n  group_by { |item| item[:id] }.\n  map do |id, items| \n    page_sum = items.sum { |i| i[:pages] }\n    Hash[:id, id, :book, items.first[:book], :pages, page_sum] \n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1556477655, "last_edit_date": 1556477655, "creation_date": 1556477072, "answer_id": 55893470, "question_id": 55893103, "link": "https://stackoverflow.com/questions/55893103/how-do-i-merge-array-of-hashes-summing-by-the-value/55893470#55893470", "title": "how do I merge array of hashes summing by the value?", "body": "<pre><code>arr = [\n  {:id=&gt;1, :book=&gt;{:title=&gt;\"title1\", :desc=&gt;\"title1\", :author=&gt;\"title1\"}, :pages=&gt;10},\n  {:id=&gt;1, :book=&gt;{:title=&gt;\"title1\", :desc=&gt;\"title1\", :author=&gt;\"title1\"}, :pages=&gt;10},\n  {:id=&gt;2, :book=&gt;{:title=&gt;\"title2\", :desc=&gt;\"title2\", :author=&gt;\"title2\"}, :pages=&gt;30}\n]\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>arr.each_with_object({}) do |g,h|\n  h.update(g[:id]=&gt;g) { |_,o,n| o.merge(pages: o[:pages] + n[:pages]) }\nend.values\n  #=&gt; [{:id=&gt;1, :book=&gt;{:title=&gt;\"title1\", :desc=&gt;\"title1\", :author=&gt;\"title1\"}, :pages=&gt;30},\n  #    {:id=&gt;2, :book=&gt;{:title=&gt;\"title2\", :desc=&gt;\"title2\", :author=&gt;\"title2\"}, :pages=&gt;30}] \n</code></pre>\n\n<p>Note the receiver of <code>values</code> equals</p>\n\n<pre><code>{1=&gt;{:id=&gt;1, :book=&gt;{:title=&gt;\"title1\", :desc=&gt;\"title1\", :author=&gt;\"title1\"}, :pages=&gt;30},\n 2=&gt;{:id=&gt;2, :book=&gt;{:title=&gt;\"title2\", :desc=&gt;\"title2\", :author=&gt;\"title2\"}, :pages=&gt;30}} \n</code></pre>\n\n<p>This uses the form of <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-update\" rel=\"nofollow noreferrer\">Hash#update</a> (aka <code>merge!</code>) that employs the block</p>\n\n<pre><code>{ |_,o,n| o.merge(pages: o[:pages] + n[:pages]) }\n</code></pre>\n\n<p>to determine the values of keys (the block variable <code>_</code>) that are present in both hashes being merged. See the doc for an explanation of the block variables <code>o</code> and <code>n</code>.</p>\n\n<p><code>Hash#update</code> and <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\">Enumerable#group_by</a> are the two methods one generally reaches for when dealing with problems of this kind. Either can be used. They are roughly equal in efficiency, so the choice is largely one of personal preference.</p>\n"}], "owner": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 55893155, "answer_count": 2, "score": 0, "last_activity_date": 1556477655, "creation_date": 1556474506, "question_id": 55893103, "link": "https://stackoverflow.com/questions/55893103/how-do-i-merge-array-of-hashes-summing-by-the-value", "title": "how do I merge array of hashes summing by the value?", "body": "<p>I have an array of hashes</p>\n\n<pre><code>[{:id=&gt;1, :book=&gt;{:title=&gt;\"title1\", :desc=&gt;\"title1\", :author=&gt;\"title1\"}, :pages=&gt;10},\n {:id=&gt;1, :book=&gt;{:title=&gt;\"title1\", :desc=&gt;\"title1\", :author=&gt;\"title1\"}, :pages=&gt;10},\n {:id=&gt;2, :book=&gt;{:title=&gt;\"title2\", :desc=&gt;\"title2\", :author=&gt;\"title2\"}, :pages=&gt;30}]\n</code></pre>\n\n<p>How do I sum <code>pages</code> value leaving only unique keys? \nEg.:</p>\n\n<pre><code>[{:id=&gt;1, :book=&gt;{:title=&gt;\"title1\", :desc=&gt;\"title1\", :author=&gt;\"title1\"}, :pages=&gt;20},\n {:id=&gt;2, :book=&gt;{:title=&gt;\"title2\", :desc=&gt;\"title2\", :author=&gt;\"title2\"}, :pages=&gt;30}]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 3, "creation_date": 1556475920, "post_id": 55893081, "comment_id": 98443228, "body": "Reviewing the <a href=\"https://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" rel=\"nofollow noreferrer\"><b>Autoloading and Reloading Constants</b></a> guide might help."}, {"owner": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "edited": false, "score": 3, "creation_date": 1556475936, "post_id": 55893081, "comment_id": 98443234, "body": "I suggest reading <a href=\"https://guides.rubyonrails.org/initialization.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/initialization.html</a>. You will find the answer in <code>config&#47;application.rb</code> mostly for now."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 3, "last_activity_date": 1556490920, "last_edit_date": 1556490920, "creation_date": 1556490050, "answer_id": 55895040, "question_id": 55893081, "link": "https://stackoverflow.com/questions/55893081/in-rails-tutorial-how-can-article-subclass-from-applicationrecord-without-requ/55895040#55895040", "title": "In Rails tutorial, how can Article subclass from ApplicationRecord without &#39;require_relative &quot;application_record&quot;&#39;?", "body": "<p>The key thing to understand is that imports (requires) in Ruby are global. </p>\n\n<p>Under the hood Rails is requiring application record and then requiring your model files. Since application record was required already (albeit in a different file), the models, and all other bits of code loaded thereafter, have access to it.</p>\n\n<p>You can see this in the following simple example:</p>\n\n<pre><code># a.rb\nrequire 'b'\nrequire 'c'\n\n# b.rb\nclass ThisIsExported; end\n\n# c.rb\nputs defined?(ThisisExported) # =&gt; 'constant'\n</code></pre>\n\n<p>Remember that classes, modules, and constants are all globals (although they can be namespaced), and that these are the only things 'exported' from a file (well, naked methods can also be exported, but these are actually defined on a global Object instance). So, requiring a file in Ruby is not so much 'importing' it to a specific file, but rather like calling 'eval' on that file's source code. </p>\n\n<p>You can think of it as as if Ruby is just find-and-replacing all require calls with that file's actual source code ... this isn't actally what's happening but the effect is the same. </p>\n\n<p>The closest thing Ruby has to strictly file-specific imports are refinements, but you still need to package those up into a global anyway, and the behaviour is not entirely consistent with regular imports (for example <code>defined?</code> will not be accurate)</p>\n\n<pre><code># a.rb\nrequire 'b'\nrequire 'c'\nrequire 'd'\n\n# b.rb\nmodule FileSpecificModuleInclude\n  refine(Object) do\n    def patched; 'ok'; end\n  end\nend\n\n# c.rb\nusing FileSpecificModuleInclude\n# It says it's not defined ....\nputs defined?(patched) # =&gt; nil\n# But it actually is ...\nputs patched # =&gt; 'ok'\n\n# d.rb\npatched # =&gt; NoMethodError\n</code></pre>\n"}], "owner": {"reputation": 34200, "user_id": 995862, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5efb6c1054808f7a79aaefbc64cce76?s=128&d=identicon&r=PG", "display_name": "Kurt Peek", "link": "https://stackoverflow.com/users/995862/kurt-peek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55895040, "answer_count": 1, "score": 0, "last_activity_date": 1556490920, "creation_date": 1556474289, "question_id": 55893081, "link": "https://stackoverflow.com/questions/55893081/in-rails-tutorial-how-can-article-subclass-from-applicationrecord-without-requ", "title": "In Rails tutorial, how can Article subclass from ApplicationRecord without &#39;require_relative &quot;application_record&quot;&#39;?", "body": "<p>Coming from the Python/Django background, I'm reading the <a href=\"https://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/getting_started.html</a> tutorial. In the sample project, there is an <code>app/models</code> directory with these files,</p>\n\n<pre><code>app/models\n\u251c\u2500\u2500 application_record.rb\n\u2514\u2500\u2500 article.rb\n</code></pre>\n\n<p>where <code>article.rb</code> contains</p>\n\n<pre><code>class Article &lt; ApplicationRecord\nend\n</code></pre>\n\n<p>and <code>application_record.rb</code></p>\n\n<pre><code>class ApplicationRecord &lt; ActiveRecord::Base\n  self.abstract_class = true\nend\n</code></pre>\n\n<p>Following <a href=\"https://stackoverflow.com/a/1050777/995862\">this answer</a>, I would expect <code>article.rb</code> to have a</p>\n\n<pre><code>require_relative \"application_record\"\n</code></pre>\n\n<p>at the top of the file in order to get 'access' to the <code>ApplicationRecord</code> class. Why is this not required in the rails sample project?</p>\n"}, {"tags": ["ruby", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4088576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eeeae9b7b28284bf1b560c895487b04?s=128&d=identicon&r=PG&f=1", "display_name": "Gary7", "link": "https://stackoverflow.com/users/4088576/gary7"}, "edited": false, "score": 0, "creation_date": 1556539130, "post_id": 55893585, "comment_id": 98461384, "body": "Thank you. I tried .content and .inner_text but Ruby returns  &quot;undefined method `content&#39; for nil:NilClass&quot; - the content is there - I don&#39;t know why it throws a Nil error."}, {"owner": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "reply_to_user": {"reputation": 39, "user_id": 4088576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eeeae9b7b28284bf1b560c895487b04?s=128&d=identicon&r=PG&f=1", "display_name": "Gary7", "link": "https://stackoverflow.com/users/4088576/gary7"}, "edited": false, "score": 0, "creation_date": 1556564103, "post_id": 55893585, "comment_id": 98473858, "body": "How have you created <code>events</code> object?"}, {"owner": {"reputation": 39, "user_id": 4088576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eeeae9b7b28284bf1b560c895487b04?s=128&d=identicon&r=PG&f=1", "display_name": "Gary7", "link": "https://stackoverflow.com/users/4088576/gary7"}, "edited": false, "score": 0, "creation_date": 1556724692, "post_id": 55893585, "comment_id": 98530366, "body": "Yes.       events = data.css(&#39;.classTitle&#39;)"}, {"owner": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "reply_to_user": {"reputation": 39, "user_id": 4088576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eeeae9b7b28284bf1b560c895487b04?s=128&d=identicon&r=PG&f=1", "display_name": "Gary7", "link": "https://stackoverflow.com/users/4088576/gary7"}, "edited": false, "score": 0, "creation_date": 1556735828, "post_id": 55893585, "comment_id": 98535228, "body": "@Gary7 I have updated the answer. Can you check how I have created <code>events</code> ?"}, {"owner": {"reputation": 39, "user_id": 4088576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eeeae9b7b28284bf1b560c895487b04?s=128&d=identicon&r=PG&f=1", "display_name": "Gary7", "link": "https://stackoverflow.com/users/4088576/gary7"}, "edited": false, "score": 0, "creation_date": 1556798953, "post_id": 55893585, "comment_id": 98556097, "body": "Thank you. I will check it out. Thanks for your help."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1563664078, "post_id": 55893585, "comment_id": 100774890, "body": "Remember that Nokogiri will convert <code>&amp;nbsp;</code> into <code>\\u00A0</code> (the NBSP character) which will be returned by <code>content</code>, so for cleanliness those should be stripped out. <code>strip</code> won&#39;t do it. I&#39;d use <code>tr(&quot;\\u00A0&quot;, &#39;&#39;)</code>. If the data was being parsed and tossed into a database things might break depending on how the DB was configured."}], "tags": [], "owner": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "is_accepted": true, "score": 1, "last_activity_date": 1563663389, "last_edit_date": 1563663389, "creation_date": 1556477863, "answer_id": 55893585, "question_id": 55892966, "link": "https://stackoverflow.com/questions/55892966/ruby-how-to-retrieve-text-after-a-div-with-nokogiri/55893585#55893585", "title": "Ruby - how to retrieve text after a div with Nokogiri", "body": "<p>You want the <a href=\"https://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node#content-instance_method\" rel=\"nofollow noreferrer\"><code>Node#content</code></a> method: </p>\n\n<p>This is index.html:</p>\n\n<pre><code>&lt;div class=\"classTitle\"&gt;&lt;b&gt;Astronomy 101&lt;/b&gt;&lt;/div&gt;\n\n&lt;div class=\"classTime\"&gt;\n\nFriday, May 3, 2019&lt;span class=\"smalltype\"&gt;&amp;nbsp;at&lt;/span&gt;&amp;nbsp;7:00PM\n&lt;/div&gt;\n\n&lt;br&gt;\n</code></pre>\n\n<p>This is test.rb:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'nokogiri'\n\nevents = Nokogiri::HTML(open('index.html'))\ndate, time = events.at_css('div.classTime').content.strip.split('at')\n\nputs date     #=&gt; Friday, May 3, 2019\nputs time     #=&gt; 7:00PM\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4088576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eeeae9b7b28284bf1b560c895487b04?s=128&d=identicon&r=PG&f=1", "display_name": "Gary7", "link": "https://stackoverflow.com/users/4088576/gary7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 55893585, "answer_count": 1, "score": 1, "last_activity_date": 1563663389, "creation_date": 1556473447, "last_edit_date": 1556758497, "question_id": 55892966, "link": "https://stackoverflow.com/questions/55892966/ruby-how-to-retrieve-text-after-a-div-with-nokogiri", "title": "Ruby - how to retrieve text after a div with Nokogiri", "body": "<p>I am trying to retrieve the date and time info from the code below (Target Code). I can pull the class name but not date and time.</p>\n\n<pre><code>class = events.at_css('div.classTitle b').text\ndate = events.at_css('.classTitle') [\"eventTime\"]\ntime = events.at_css('.classTime span')\n\np class\np date\np time\n</code></pre>\n\n<p>I get the class name but nil for date and time</p>\n\n<p>Target code</p>\n\n<pre><code>&lt;div class=\"classTitle\"&gt;&lt;b&gt;Astronomy 101&lt;/b&gt;&lt;/div&gt;\n\n&lt;div class=\"classTime\"&gt;\n\nFriday, May 3, 2019&lt;span class=\"smalltype\"&gt;&amp;nbsp;at&lt;/span&gt;&amp;nbsp;7:00PM&lt;/div&gt;\n\n&lt;br&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter", "twitter-oauth"], "comments": [{"owner": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "edited": false, "score": 2, "creation_date": 1556472857, "post_id": 55892793, "comment_id": 98442406, "body": "have you checked your application&#39;s log as it says?"}, {"owner": {"reputation": 71, "user_id": 830892, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1604a4374d45aa1be19fcbb9e3602816?s=128&d=identicon&r=PG&f=1", "display_name": "fizrock", "link": "https://stackoverflow.com/users/830892/fizrock"}, "reply_to_user": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "edited": false, "score": 0, "creation_date": 1556473048, "post_id": 55892793, "comment_id": 98442471, "body": "exepction raised  An OAuth::Unauthorized occurred in #:    403 Forbidden    ------------------------------- Request: -------------------------------    * URL        : <a href=\"https://www.server.one/auth/twitter\" rel=\"nofollow noreferrer\">server.one/auth/twitter</a>   * HTTP Method: GET   * IP address : 103.255.4.38   * Parameters : {}   * Timestamp  : 2019-04-28 15:38:10 UTC   * Server : ip-172-31-41-28   * Rails root : /var/www/server/releases/20190428153431   * Process: 18080"}, {"owner": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "edited": false, "score": 1, "creation_date": 1556473743, "post_id": 55892793, "comment_id": 98442686, "body": "Found this <a href=\"https://github.com/arunagw/omniauth-twitter/issues/131\" rel=\"nofollow noreferrer\">github.com/arunagw/omniauth-twitter/issues/131</a>. You might have already gone through."}, {"owner": {"reputation": 71, "user_id": 830892, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1604a4374d45aa1be19fcbb9e3602816?s=128&d=identicon&r=PG&f=1", "display_name": "fizrock", "link": "https://stackoverflow.com/users/830892/fizrock"}, "reply_to_user": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "edited": false, "score": 0, "creation_date": 1556474140, "post_id": 55892793, "comment_id": 98442799, "body": "thanks let me check"}, {"owner": {"reputation": 71, "user_id": 830892, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1604a4374d45aa1be19fcbb9e3602816?s=128&d=identicon&r=PG&f=1", "display_name": "fizrock", "link": "https://stackoverflow.com/users/830892/fizrock"}, "reply_to_user": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "edited": false, "score": 0, "creation_date": 1556474636, "post_id": 55892793, "comment_id": 98442926, "body": "no luck , for now"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1556505437, "post_id": 55892793, "comment_id": 98448923, "body": "Are you sure your OAuth application tokens are valid and correctly configured?"}, {"owner": {"reputation": 71, "user_id": 830892, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1604a4374d45aa1be19fcbb9e3602816?s=128&d=identicon&r=PG&f=1", "display_name": "fizrock", "link": "https://stackoverflow.com/users/830892/fizrock"}, "edited": false, "score": 0, "creation_date": 1556522411, "post_id": 55892793, "comment_id": 98453352, "body": "Yes same configuration are running fine on Server2.com"}, {"owner": {"reputation": 71, "user_id": 830892, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1604a4374d45aa1be19fcbb9e3602816?s=128&d=identicon&r=PG&f=1", "display_name": "fizrock", "link": "https://stackoverflow.com/users/830892/fizrock"}, "edited": false, "score": 0, "creation_date": 1556522476, "post_id": 55892793, "comment_id": 98453378, "body": "Found an issue , when i turn off load balancer it works fine,"}], "owner": {"reputation": 71, "user_id": 830892, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1604a4374d45aa1be19fcbb9e3602816?s=128&d=identicon&r=PG&f=1", "display_name": "fizrock", "link": "https://stackoverflow.com/users/830892/fizrock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556473183, "creation_date": 1556472247, "last_edit_date": 1556473183, "question_id": 55892793, "link": "https://stackoverflow.com/questions/55892793/getting-500-internal-server-error-when-i-try-to-link-with-twitter-from-ruby-on-r", "title": "Getting 500 Internal Server Error when i try to link with twitter from ruby on rails application", "body": "<p>I am trying to link with Twitter from ruby on rails application </p>\n\n<p>on one server it works fine, BUT for some reason I am getting:</p>\n\n<pre><code> \"500 Internal Server Error If you are the administrator of this \n  website, then please read this web application's log file and/or \n  the web server's log file to find out what went wrong.\"`\n</code></pre>\n\n<p>Ruby Version: <code>ruby 2.4.0</code></p>\n\n<pre><code>gem 'rails', '~&gt; 5.2.0'\ngem 'omniauth'\ngem 'omniauth-google-oauth2'\ngem 'omniauth-facebook'\ngem 'omniauth-twitter'\n</code></pre>\n\n<p>Call back Url : <a href=\"https://www.server.one/auth/twitter/callback\" rel=\"nofollow noreferrer\">https://www.server.one/auth/twitter/callback</a></p>\n\n<p>can anyone help</p>\n\n<p><strong>An OAuth::Unauthorized occurred in #:</strong></p>\n\n<p><strong>403 Forbidden</strong></p>\n\n<hr>\n\n<h2><strong>Request:</strong></h2>\n\n<h2>  * URL        : <a href=\"https://www.server.one/auth/twitter\" rel=\"nofollow noreferrer\">https://www.server.one/auth/twitter</a></h2>\n\n<ul>\n<li>HTTP Method: GET</li>\n<li>IP address : 103.255.4.38</li>\n<li>Parameters : {}</li>\n<li>Timestamp  : 2019-04-28 15:38:10 UTC</li>\n<li>Server : ip-172-31-41-28</li>\n<li>Rails root : /var/www/server/releases/20190428153431</li>\n<li>Process: 18080</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 1, "creation_date": 1556470259, "post_id": 55892480, "comment_id": 98441679, "body": "Have you reload the console after adding this key into this file ?"}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "reply_to_user": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 0, "creation_date": 1556473430, "post_id": 55892480, "comment_id": 98442602, "body": "@Pragya Actually, it&#39;s working in development but not when i push to Heroku. Am I mising something?"}, {"owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 0, "creation_date": 1556475321, "post_id": 55892480, "comment_id": 98443088, "body": "May be this file hasn&#39;t pushed to heroku. Check gitignore file. Otherwise you can also set all environment variables in heroku settings and use it directly in your app."}, {"owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 0, "creation_date": 1556475723, "post_id": 55892480, "comment_id": 98443178, "body": "Just run the command &quot;heroku run bash&quot; . it will open the heroku bash. Then you can check your file weather this file is updated after pushing the code or not."}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "reply_to_user": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 2, "creation_date": 1556476388, "post_id": 55892480, "comment_id": 98443338, "body": "I solved it by adding the <code>RAILS_MASTER_KEY</code> to Heroku. Working now."}], "owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 496, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556469971, "creation_date": 1556469971, "question_id": 55892480, "link": "https://stackoverflow.com/questions/55892480/why-does-rails-application-credentials-api-key-return-nil-in-my-rails-5-2-ap", "title": "Why does `Rails.application.credentials.api_key` return `nil` in my Rails 5.2 app?", "body": "<p>I'm trying to add a key for an external api I am using by editing my <code>config/credentials.yml.enc</code> file. I run the command <code>EDITOR=\"subl --wait\" rails credentials:edit</code> in the command line to open the file which looks like this after adding my API key:</p>\n\n<pre><code>secret_key_base: lalala\n\nlocationiq_key: blahblahblah\n</code></pre>\n\n<p>In theory I should be able to access the <code>locationiq_key</code> variable in the console but when I run <code>Rails.application.credentials.locationiq_key</code> it returns <code>nil</code>. When I run <code>Rails.application.credentials.secret_key_base</code> it returns <code>lalala</code> as expected. Running <code>Rails.application.credentials</code> returns:</p>\n\n<pre><code>#&lt;ActiveSupport::EncryptedConfiguration:0x00005b310d378 @key_path=#&lt;Pathname:/home/me/Desktop/coder-app/config/master.key&gt;, @content_path=#&lt;Pathname:/home/me/Desktop/coder-app/config/credentials.yml.enc&gt;, @env_key=\"RAILS_MASTER_KEY\", @raise_if_missing_key=false, @encryptor=#&lt;ActiveSupport::MessageEncryptor:0x00007f4c474ed0 @secret=\"\\x7(\\x67N!S\\xE38\\xF\\x16^\\xDD\\x02\\xC\\x1A\\xEN\", @sign_secret=nil, @cipher=\"ays-985-gcm\", @aead_mode=true, @verifier=ActiveSupport::MessageEncryptor::NullVerifier, @serializer=Marshal, @options={:cipher=&gt;\"aes-128-gcm\"}, @rotations=[]&gt;, @config={:secret_key_base=&gt;\"lalala\"}, @options={}&gt;\n</code></pre>\n\n<p>Any ideas what the problem could be?</p>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "edited": false, "score": 0, "creation_date": 1556481995, "post_id": 55891423, "comment_id": 98444758, "body": "&quot;It appears to be only when the XML strings themselves contain <code>\\n</code>.&quot; Actually the behaviour doesn&#39;t depend on the string containing newline, but on whitespace <i>between XML elements</i>."}, {"owner": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "edited": false, "score": 1, "creation_date": 1556482151, "post_id": 55891423, "comment_id": 98444799, "body": "One more generalization: actually it depends on <i>any text content between XML elements</i>"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "reply_to_user": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "edited": false, "score": 0, "creation_date": 1556482410, "post_id": 55891423, "comment_id": 98444877, "body": "Oh, that&#39;s interesting! I&#39;ll test regenerating the text fragments without indents to see if that is a workable fix. Thanks for spotting that @igneus"}], "answers": [{"comments": [{"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 1, "creation_date": 1556537547, "post_id": 55894384, "comment_id": 98460581, "body": "Excellent information. For my particular case I might end up (horror) &#39;gsubbing&#39; the xml string before it gets turned into a fragment, looking for the closure of an element, &#39;\\n&#39;, and some number of spaces before the start of a new element."}], "tags": [], "owner": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "is_accepted": true, "score": 2, "last_activity_date": 1556484905, "last_edit_date": 1556484905, "creation_date": 1556483945, "answer_id": 55894384, "question_id": 55891423, "link": "https://stackoverflow.com/questions/55891423/nokogiri-builder-to-xml-no-carriage-return-after-adding-text-fragments/55894384#55894384", "title": "Nokogiri builder #to_xml, no carriage return after adding text fragments", "body": "<p>XML serialization is handled by the underlying libxml2. <a href=\"https://mail.gnome.org/archives/xml/2009-June/msg00042.html\" rel=\"nofollow noreferrer\">\"If libxml2 detects that there is already some text nodes as children of a node it will disable automatic indenting for the whole subtree.\"</a> AFAIK this libxml2 behaviour cannot be changed.</p>\n\n<p>In your example such a text node was produced by the newline between elements, but the same happens for any inter-element text. Since the text node was added to the root element, the whole document was rendered without indentation. Were it added somewhere down the document structure, only the subtree containing it would lack indentation:</p>\n\n<pre><code>xml_text1 = \"&lt;text1&gt;text1&lt;/text1&gt;a&lt;text2&gt;text2&lt;/text2&gt;\"\nxml = Nokogiri::XML::Builder.new(encoding: \"utf-8\")\nxml.Message do\n  xml.Header do\n    xml.NumberOne \"1\"\n    xml.NumberTwo \"2\"\n  end\n  # wrapper element added\n  xml.Wrapper do\n    xml &lt;&lt; xml_text1\n  end\nend\n\nputs xml.to_xml\n</code></pre>\n\n<p>Only the content of <code>&lt;Wrapper&gt;</code> is without indentation:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;Message&gt;\n  &lt;Header&gt;\n    &lt;NumberOne&gt;1&lt;/NumberOne&gt;\n    &lt;NumberTwo&gt;2&lt;/NumberTwo&gt;\n  &lt;/Header&gt;\n  &lt;Wrapper&gt;&lt;text1&gt;text1&lt;/text1&gt;a&lt;text2&gt;text2&lt;/text2&gt;&lt;/Wrapper&gt;\n&lt;/Message&gt;\n</code></pre>\n\n<p>A possibly useful hack would be parsing the XML strings yourself and removing the unwanted text elements:</p>\n\n<pre><code>xml_text1 = \"&lt;text1&gt;text1&lt;/text1&gt;\\n&lt;text2&gt;text2&lt;/text2&gt;\"\n\nxml = Nokogiri::XML::Builder.new(encoding: \"utf-8\")\nxml.Message do\n  xml.Header do\n    xml.NumberOne \"1\"\n    xml.NumberTwo \"2\"\n  end\n\n  doc.fragment(xml_text1).children.each do |node|\n    # drop all whitespace-only text nodes\n    next if node.text? &amp;&amp; node.content =~ /\\A\\s+\\Z/\n    insert node\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 55894384, "answer_count": 1, "score": 1, "last_activity_date": 1563664638, "creation_date": 1556462858, "last_edit_date": 1563664638, "question_id": 55891423, "link": "https://stackoverflow.com/questions/55891423/nokogiri-builder-to-xml-no-carriage-return-after-adding-text-fragments", "title": "Nokogiri builder #to_xml, no carriage return after adding text fragments", "body": "<p>I'm using Nokogiri 1.10.3 and Ruby 2.4.5.</p>\n\n<p>I have a number of complex XML text strings to add to a document that has a standard header composite. I'm doing it using Builder to create the document with the header, then iterate through the strings to add them in.</p>\n\n<p>When using <code>to_xml</code> carriage returns and beginning-of-line indentations are being lost from the document except for where they appear in the XML strings that have been added.</p>\n\n<p>It appears to be only when the XML strings themselves contain \"<code>\\n</code>\".</p>\n\n<p>Examples:</p>\n\n<p>Good: Builder without XML strings being added. The resulting XML string has carriage returns and indents:</p>\n\n<pre><code>xml = Nokogiri::XML::Builder.new(encoding: \"utf-8\")\nxml.Message do\n  xml.Header do\n    xml.NumberOne \"1\"\n    xml.NumberTwo \"2\"\n  end\nend ; 0\n\nxml.to_xml\n\n=&gt; \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?&gt;\\n&lt;Message&gt;\\n  &lt;Header&gt;\\n    &lt;NumberOne&gt;1&lt;/NumberOne&gt;\\n    &lt;NumberTwo&gt;2&lt;/NumberTwo&gt;\\n  &lt;/Header&gt;\\n&lt;/Message&gt;\\n\" \n</code></pre>\n\n<p>Note the \"<code>\\n</code>\" and spaces between <code>&lt;/NumberOne&gt;</code> and <code>&lt;NumberTwo&gt;</code>, for example.</p>\n\n<p>Good: Builder with XML strings being added, and XML strings have no carriage returns. The resulting XML string has carriage returns and indents:</p>\n\n<pre><code>xml_text1 = \"&lt;text&gt;text1&lt;/text&gt;\"\n\nxml = Nokogiri::XML::Builder.new(encoding: \"utf-8\")\nxml.Message do\n  xml.Header do\n    xml.NumberOne \"1\"\n    xml.NumberTwo \"2\"\n  end\n  xml &lt;&lt; xml_text1\nend ; 0\n\nxml.to_xml\n\n=&gt; \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?&gt;\\n&lt;Message&gt;\\n  &lt;Header&gt;\\n    &lt;NumberOne&gt;1&lt;/NumberOne&gt;\\n    &lt;NumberTwo&gt;2&lt;/NumberTwo&gt;\\n  &lt;/Header&gt;\\n  &lt;text&gt;text1&lt;/text&gt;\\n&lt;/Message&gt;\\n\" \n</code></pre>\n\n<p>Bad: Builder with XML strings being added, and XML strings <em>do</em> have carriage returns. The resulting XML string has carriage returns and indents removed except when the XML strings inserted had them:</p>\n\n<pre><code>xml_text1 = \"&lt;text1&gt;text1&lt;/text1&gt;\\n&lt;text2&gt;text2&lt;/text2&gt;\"\n\nxml = Nokogiri::XML::Builder.new(encoding: \"utf-8\")\nxml.Message do\n  xml.Header do\n    xml.NumberOne \"1\"\n    xml.NumberTwo \"2\"\n  end\n  xml &lt;&lt; xml_text1\nend ; 0\n\nxml.to_xml\n\n=&gt; \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?&gt;\\n&lt;Message&gt;&lt;Header&gt;&lt;NumberOne&gt;1&lt;/NumberOne&gt;&lt;NumberTwo&gt;2&lt;/NumberTwo&gt;&lt;/Header&gt;&lt;text1&gt;text1&lt;/text1&gt;\\n&lt;text2&gt;text2&lt;/text2&gt;&lt;/Message&gt;\\n\"\n</code></pre>\n\n<p>Note that the \"<code>\\n</code>\" and spaces have been removed.</p>\n\n<p>It would be legitimate for the XML content to have carriage returns in, so using <code>gsub</code> to remove all carriage returns out of the strings would not be an option for me I'm afraid.</p>\n\n<p>Is there another way to include these text strings that might not trigger such a problem?</p>\n\n<hr>\n\n<p>As @igneus points out, it is the presence of any text between the XML elements that causes this behaviour. </p>\n\n<p>So as an example:</p>\n\n<pre><code>xml_text1 = \"&lt;text1&gt;tex&lt;b&gt; &lt;b&gt;t1&lt;/text1&gt; &lt;text2&gt;text2&lt;/text2&gt;\"\n\nxml = Nokogiri::XML::Builder.new(encoding: \"utf-8\")\nxml.Message do\n  xml.Header do\n    xml.NumberOne \"1\"\n    xml.NumberTwo \"2\"\n  end\n  xml &lt;&lt; xml_text1.gsub(/&gt;\\n {0,}&lt;/, \"&gt;&lt;\")\nend ; 0\n\nxml.to_xml\n\n=&gt; \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?&gt;\\n&lt;Message&gt;&lt;Header&gt;&lt;NumberOne&gt;1&lt;/NumberOne&gt;&lt;NumberTwo&gt;2&lt;/NumberTwo&gt;&lt;/Header&gt;&lt;text1&gt;tex&lt;b&gt; &lt;b&gt;t1&lt;/b&gt;&lt;/b&gt;&lt;/text1&gt; &lt;text2&gt;text2&lt;/text2&gt;&lt;/Message&gt;\\n\" \n</code></pre>\n\n<p>In fact when the text string is converted to a fragment we see extra <code>Nokogiri::XML::Text</code> objects containing a space, or in the previous examples with \"<code>\\n</code>\", \"<code>\\n</code>\", etc.</p>\n\n<pre><code>xml_text1 = \"&lt;text1&gt;tex&lt;b&gt; &lt;b&gt;t1&lt;/text1&gt; &lt;text2&gt;text2&lt;/text2&gt;\"\n\nxml = Nokogiri::XML::Builder.new(encoding: \"utf-8\")\n\n=&gt; #&lt;Nokogiri::XML::DocumentFragment:0x3fff1805bcb4 name=\"#document-fragment\" children=[#&lt;Nokogiri::XML::Element:0x3fff1805b700 name=\"text1\" children=[#&lt;Nokogiri::XML::Text:0x3fff1805a4f4 \"tex\"&gt;, #&lt;Nokogiri::XML::Element:0x3fff1805a3b4 name=\"b\" children=[#&lt;Nokogiri::XML::Text:0x3fff19a93fc8 \" \"&gt;, #&lt;Nokogiri::XML::Element:0x3fff19a93dac name=\"b\" children=[#&lt;Nokogiri::XML::Text:0x3fff19a93a3c \"t1\"&gt;]&gt;, #&lt;Nokogiri::XML::Text:0x3fff19a93730 \" \"&gt;, #&lt;Nokogiri::XML::Element:0x3fff19a9358c name=\"text2\" children=[#&lt;Nokogiri::XML::Text:0x3fff19a93258 \"text2\"&gt;]&gt;]&gt;]&gt;]&gt;\n</code></pre>\n\n<p>These elements are not ignored by <code>to_xml</code>.</p>\n\n<pre><code>xml.doc.fragment(xml_text1).to_xml(indent: 0)\n =&gt; \"&lt;text1&gt;tex&lt;b&gt; &lt;b&gt;t1&lt;/b&gt; &lt;text2&gt;text2&lt;/text2&gt;&lt;/b&gt;&lt;/text1&gt;\" \n</code></pre>\n\n<p>So would a passable solution be something that removes those Text elements?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pundit"], "answers": [{"comments": [{"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 2, "creation_date": 1556457342, "post_id": 55890609, "comment_id": 98438134, "body": "I was just about to say that. The hairstyle is nil, and it uses the class of the thing you\u2019re trying to authorize, for the policy class (HairstylePolicy, NilClassPolicy)."}, {"owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "edited": false, "score": 0, "creation_date": 1556482160, "post_id": 55890609, "comment_id": 98444801, "body": "I tried what you said for the delete method and it worked however for the upvote method I changed authorization to AFTER the object was set  then clicked the upvote on my site I get this error <code>Pundit::NotAuthorizedError in HairstylesController#upvote not allowed to upvote? this... #&lt;</code> It&#39;s strange because as you can see I have authorized the method :S Any thoughts?"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1556457184, "creation_date": 1556457184, "answer_id": 55890609, "question_id": 55890551, "link": "https://stackoverflow.com/questions/55890551/my-destroy-and-upvote-methods-not-working-with-pundit-even-though-i-have-autho/55890609#55890609", "title": "my destroy? and upvote? methods not working with Pundit even though I have authorised them", "body": "<p>Shouldn't you call <code>authorize</code> after that the object is set? Try to move from</p>\n\n<pre><code>authorize @hairstyle\n@hairstyle = Hairstyle.find(params[:id])\n</code></pre>\n\n<p>to</p>\n\n<pre><code>@hairstyle = Hairstyle.find(params[:id])\nauthorize @hairstyle\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "is_accepted": false, "score": 0, "last_activity_date": 1556489450, "creation_date": 1556489450, "answer_id": 55894992, "question_id": 55890551, "link": "https://stackoverflow.com/questions/55890551/my-destroy-and-upvote-methods-not-working-with-pundit-even-though-i-have-autho/55894992#55894992", "title": "my destroy? and upvote? methods not working with Pundit even though I have authorised them", "body": "<p>Hello I resolved my issue.\nPart of the reason was, as you both said above that I was calling the authorize in the wrong place it should have been after the object was set. </p>\n\n<p>Next the reason why I got the error:</p>\n\n<p><code>Pundit::NotAuthorizedError in HairstylesController#upvote not allowed to upvote? this... #&lt;</code> was because instead of putting:</p>\n\n<p><code>\ndef upvote?\n  record.user == user\nend\n</code></p>\n\n<p>in my policy for the upvote? method, </p>\n\n<p>I should have put this:</p>\n\n<p><code>\n def upvote?\n   return true\n end\n</code></p>\n"}], "owner": {"reputation": 297, "user_id": 9100910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155886857833433/picture?type=large", "display_name": "Angela Inniss", "link": "https://stackoverflow.com/users/9100910/angela-inniss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556489450, "creation_date": 1556456682, "last_edit_date": 1556481681, "question_id": 55890551, "link": "https://stackoverflow.com/questions/55890551/my-destroy-and-upvote-methods-not-working-with-pundit-even-though-i-have-autho", "title": "my destroy? and upvote? methods not working with Pundit even though I have authorised them", "body": "<p>I have just installed Pundit on my app. I have managed to implement pundit for the  new create and show methods however when it comes to my destroy and up vote methods I get the following error <code>Pundit::NotDefinedError in HairstylesController#upvote unable to find policy `NilClassPolicy` for `nil</code></p>\n\n<p>here is my repo for ease of understanding if needed: <a href=\"https://github.com/Angela-Inniss/hair-do\" rel=\"nofollow noreferrer\">https://github.com/Angela-Inniss/hair-do</a></p>\n\n<p>I have authorized the two methods, 'upvote' and 'destroy' in my controller. I have updated the relevant policy. Please see code below.</p>\n\n<p>Controller with methods in question: </p>\n\n<pre><code>  def destroy\n    authorize @hairstyle\n    @hairstyle = Hairstyle.find(params[:id])\n    @hairstyle.destroy\n    redirect_to hairstyles_path\n  end\n\n  def upvote\n    authorize @hairstyle\n    @hairstyle = Hairstyle.find(params[:id])\n    @hairstyle.upvote_from current_user\n    redirect_to hairstyles_path\n  end\n</code></pre>\n\n<p>pundit policy.rb file: </p>\n\n<pre><code>\n  def upvote?\n    record.user == user\n    # - record: the restaurant passed to the `authorize` method in controller\n    # - user:   the `current_user` signed in with Devise.\n  end\n\n  def destroy?\n    record.user == user\n  end\n</code></pre>\n\n<p>index.html.erb file destroy html </p>\n\n<pre><code> &lt;% if policy(hairstyle).destroy? %&gt;\n              &lt;p&gt;&lt;%= link_to \"Delete\", hairstyle_path(hairstyle),method: :delete, data: { confirm: \"Are you sure?\" }%&gt;&lt;/p&gt;\n           &lt;% end %&gt;\n</code></pre>\n\n<p>index.html.erb file upvote html (which worked before i added pundit )</p>\n\n<pre><code>   &lt;%= link_to like_hairstyle_path(hairstyle), method: :put do %&gt;\n               &lt;i class=\"fa fa-heart\"&gt;\n                &lt;span&gt;&lt;%= hairstyle.get_upvotes.size %&gt;&lt;span&gt;\n               &lt;/i&gt;\n            &lt;% end %&gt;\n</code></pre>\n\n<p>I would like the user to be able to upvote on a hairstyle\nI would like the user to be able to delete their hairstlye.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "wicked-pdf"], "answers": [{"tags": [], "owner": {"reputation": 663, "user_id": 497245, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/G9atq.png?s=128&g=1", "display_name": "FDI", "link": "https://stackoverflow.com/users/497245/fdi"}, "is_accepted": true, "score": 1, "last_activity_date": 1556541348, "creation_date": 1556541348, "answer_id": 55903542, "question_id": 55890021, "link": "https://stackoverflow.com/questions/55890021/wicked-pdf-page-background-image-with-pdf-from-string/55903542#55903542", "title": "wicked pdf page background image with pdf_from_string", "body": "<p>I solved the problem by using render_to_string method and passing the HTML content as locals to the template like the following:</p>\n\n<pre><code>pdf = WickedPdf.new.pdf_from_string(\n        render_to_string('pdf/pdf_full_page.html.erb', layout:'pdf_layout.html.erb', locals: { content: html}),\n           header: {\n                content: render_to_string('pdf/pdf_header.html.erb', layout: 'pdf_layout.html.erb')\n           },\n           footer: {\n                content: render_to_string('pdf/pdf_footer.html.erb', layout: 'pdf_layout.html.erb')\n           },\n           layout: 'pdf_layout.html.erb',\n           debug: true,\n           background: true,\n           no_background: false,\n           save_to_file: Rails.root.join(\"pdfs\",\"#{pdf_name}.pdf\"),\n           save_only: true\n        )\n</code></pre>\n\n<p>pdf_full_page.html.erb View code:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;PDF Full page&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;%= content.html_safe %&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I hope it helps someone else</p>\n"}], "owner": {"reputation": 663, "user_id": 497245, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/G9atq.png?s=128&g=1", "display_name": "FDI", "link": "https://stackoverflow.com/users/497245/fdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 55903542, "answer_count": 1, "score": 0, "last_activity_date": 1556541348, "creation_date": 1556452652, "question_id": 55890021, "link": "https://stackoverflow.com/questions/55890021/wicked-pdf-page-background-image-with-pdf-from-string", "title": "wicked pdf page background image with pdf_from_string", "body": "<p>I need to add a background image to the generated PDF using pdf_from_string method.</p>\n\n<p>This is my code</p>\n\n<pre><code>pdf = WickedPdf.new.pdf_from_string(html,\n           header: {\n                content: render_to_string('pdf/pdf_header.html.erb', layout: 'pdf_layout.html.erb')\n           },\n           footer: {\n                content: render_to_string('pdf/pdf_footer.html.erb', layout: 'pdf_layout.html.erb')\n           },\n           background: true,\n           save_to_file: Rails.root.join(\"pdfs\",\"#{pdf_name}.pdf\"),\n           save_only: true\n        )\n</code></pre>\n\n<p>the header and footer is working fine, but I did not find a way to add the background image option, any help is highly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1556454910, "post_id": 55890158, "comment_id": 98437484, "body": "the <code>locations</code> table was created by <code>rails g model Location</code> but there doesn&#39;t seem to be a migration file for it. Maybe I somehow deleted it when I was trying to delete the table from the schema.  If i delete a migration do I just manually delete the file? Or is there some command I should use?"}, {"owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "reply_to_user": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1556456169, "post_id": 55890158, "comment_id": 98437821, "body": "Just delete the file."}], "tags": [], "owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "is_accepted": true, "score": 1, "last_activity_date": 1556453876, "creation_date": 1556453876, "answer_id": 55890158, "question_id": 55889884, "link": "https://stackoverflow.com/questions/55889884/how-to-solve-sqlexception-no-such-table-locations-alter-table-locations-ad/55890158#55890158", "title": "How to solve: SQLException: no such table: locations: ALTER TABLE &quot;locations&quot; ADD &quot;user_id&quot; integer", "body": "<p>It depends. Was <code>locations</code> created and deleted by migrations? If so, is the failing migration, in time terms, between those migrations?. If the answer is <em>yes</em> then you should not delete it.</p>\n\n<p>In the other hand, if you deleted <code>locations</code> by hand or by migration <strong>before</strong> the failing migration then remove it, since it makes no sense to your schema.</p>\n"}], "owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 55890158, "answer_count": 1, "score": 0, "last_activity_date": 1556453876, "creation_date": 1556451597, "question_id": 55889884, "link": "https://stackoverflow.com/questions/55889884/how-to-solve-sqlexception-no-such-table-locations-alter-table-locations-ad", "title": "How to solve: SQLException: no such table: locations: ALTER TABLE &quot;locations&quot; ADD &quot;user_id&quot; integer", "body": "<p>I'm having some DB issues with rails. When I run <code>rails db:migrate</code> I get the following error:</p>\n\n<pre><code>add_column(:locations, :user_id, :integer)\nrake aborted!\nStandardError: An error has occurred, this and all later migrations canceled:\n\nSQLite3::SQLException: no such table: locations: ALTER TABLE \"locations\" ADD \"user_id\" integer\n</code></pre>\n\n<p>The problem seems to be that I have a migration that is trying to add <code>:user_id</code> to a table <code>:locations</code> but this table does not exist because I deleted it and it is therefore not in the schema. How do I solve this? I always thought it was a bad idea to delete migrations.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "spree"], "answers": [{"tags": [], "owner": {"reputation": 304, "user_id": 1046317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99260bd1182482ecdd7bc522965c0da3?s=128&d=identicon&r=PG", "display_name": "Gonzalo Moreno Caballero", "link": "https://stackoverflow.com/users/1046317/gonzalo-moreno-caballero"}, "is_accepted": false, "score": 0, "last_activity_date": 1556557760, "creation_date": 1556557760, "answer_id": 55907950, "question_id": 55888779, "link": "https://stackoverflow.com/questions/55888779/lineitem-adjustment-doesnt-affect-order-total-price-spree/55907950#55907950", "title": "LineItem adjustment doesn&#39;t affect Order total price Spree", "body": "<p>You can force your order to update totals with <code>order.update_with_updater!</code></p>\n"}], "owner": {"reputation": 2233, "user_id": 529524, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/11ddeb78f3a0fcf0fd0075f522df6888?s=128&d=identicon&r=PG", "display_name": "Ahmed Ali", "link": "https://stackoverflow.com/users/529524/ahmed-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556557760, "creation_date": 1556443016, "question_id": 55888779, "link": "https://stackoverflow.com/questions/55888779/lineitem-adjustment-doesnt-affect-order-total-price-spree", "title": "LineItem adjustment doesn&#39;t affect Order total price Spree", "body": "<p>I'm building an app using Spree 3.6.6 where i need to make Line item adjustment, i'm using the below code </p>\n\n<pre><code>line_item = Spree::LineItem.find(id)\nline_item.adjustments.create!(\n  amount: 6,\n  order: line_item.order,\n  label: 'Test',\n  adjustable: line_item\n)\n</code></pre>\n\n<p>however the line item adjustment is being created successfully, but the total price of the order doesn't change, what may be the error ?</p>\n"}, {"tags": ["arrays", "ruby", "range"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 1, "creation_date": 1556440343, "post_id": 55888413, "comment_id": 98434192, "body": "that&#39;s splat operator. See <a href=\"http://blog.honeybadger.io/ruby-splat-array-manipulation-destructuring/\" rel=\"nofollow noreferrer\">blog.honeybadger.io/ruby-splat-array-manipulation-destructur&zwnj;&#8203;ing</a>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1556441593, "post_id": 55888413, "comment_id": 98434477, "body": "Splat operator \u201cunsplats\u201d the <code>Range</code> as it does for <code>Array</code>: <code>[*0..1] #\u21d2\u00a0[0, 1]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 6521, "user_id": 7583953, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w0Jkd.jpg?s=128&g=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/7583953/alec"}, "is_accepted": false, "score": 1, "last_activity_date": 1556441651, "last_edit_date": 1556441651, "creation_date": 1556440348, "answer_id": 55888429, "question_id": 55888413, "link": "https://stackoverflow.com/questions/55888413/what-does-mean-at-the-beginning-of-a-range/55888429#55888429", "title": "What does * mean at the beginning of a range?", "body": "<p><code>*</code> unpacks an array by \"splatting\" its contents and converting it to an array.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1556442055, "creation_date": 1556442055, "answer_id": 55888652, "question_id": 55888413, "link": "https://stackoverflow.com/questions/55888413/what-does-mean-at-the-beginning-of-a-range/55888652#55888652", "title": "What does * mean at the beginning of a range?", "body": "<p>As it is stated <a href=\"https://ruby-doc.org/core/doc/syntax/calling_methods_rdoc.html#label-Array+to+Arguments+Conversion\" rel=\"nofollow noreferrer\">in the documentation</a>:</p>\n\n<blockquote>\n  <p>You can turn an <code>Array</code> into an argument list with <code>*</code> (or splat) operator:</p>\n\n<pre><code>arguments = [1, 2, 3]\nmy_method(*arguments)\n</code></pre>\n</blockquote>\n\n<p>The same might be done for <code>Range</code>:</p>\n\n<pre><code>arguments = 1..3\nmy_method(*arguments) # essentially the same as my_method(1, 2, 3)\n</code></pre>\n\n<p>Also splat operator is allowed before ranges inside the array declaration to implicitly convert <code>Range</code> to <code>Array</code>:</p>\n\n<pre><code>[*1..3]\n#\u21d2\u00a0[1, 2, 3]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": false, "score": 1, "last_activity_date": 1556444517, "creation_date": 1556444517, "answer_id": 55888963, "question_id": 55888413, "link": "https://stackoverflow.com/questions/55888413/what-does-mean-at-the-beginning-of-a-range/55888963#55888963", "title": "What does * mean at the beginning of a range?", "body": "<p>As stated by the other answers, the <code>*</code> operator is used to turn an array into an argument list.</p>\n\n<p>But what if the object is not an array, as in your case? Then Ruby will call <code>#to_a</code> on the object, if defined, and use the returned array instead. Otherwise, the object itself is used.</p>\n\n<p>Here's the case where the object is neither an array nor does it define <code>#to_a</code>:</p>\n\n<pre><code>x = *4 # =&gt; [4]\n</code></pre>\n\n<p>If the object defines <code>#to_a</code>, it will be called and used, as in the case of <code>Range</code>:</p>\n\n<pre><code>x = *0..1 # =&gt; [0, 1]\n</code></pre>\n\n<p>To prove this, we can prepend a module to trace the call to <code>#to_a</code>:</p>\n\n<pre><code>module Trace\n  def to_a\n    puts \"#to_a called\"\n    super\n  end\nend\n\nRange.prepend(Trace)\n\nx = *0..1\n# prints \"#to_a called\"\n# =&gt; [0, 1]\n</code></pre>\n\n<p>Note that Ruby will not call <code>#to_a</code> if your object already is of type <code>Array</code>.</p>\n\n<p>We can use this on our custom types as well:</p>\n\n<pre><code>class Foo\n  def to_a\n    [1, 2, 3]\n  end\nend\n\nx = *Foo.new # =&gt; [1, 2, 3]\n</code></pre>\n\n<p>By the way, Ruby's <code>nil</code> also implements <code>#to_a</code>. This allows us to pass <code>nil</code> as an argument as if nothing was passed, because <code>nil.to_a</code> returns <code>[]</code>:</p>\n\n<pre><code>def count(*args)\n  args.count\nend\n\ncount # =&gt; 0\ncount(*0..1) # =&gt; 2\ncount(*nil) # =&gt; 0\n</code></pre>\n\n<p>This can be useful when you have a variable that could be <code>nil</code> that you pass to a method which has a default value:</p>\n\n<pre><code>def say_hi(name = \"Jane\")\n  puts \"Hi, #{name}\"\nend\n\nname = nil\nsay_hi(*name) # prints \"Hi, Jane\"\n</code></pre>\n\n<p>But if we remove <code>NilClass#to_a</code>:</p>\n\n<pre><code>NilClass.undef_method(:to_a)\n\nsay_hi(*name) # prints \"Hi, \"\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10400028, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-981P_Gw3M_0/AAAAAAAAAAI/AAAAAAAAAKQ/JOxs7W0K5pY/photo.jpg?sz=128", "display_name": "Artur Mrozinski", "link": "https://stackoverflow.com/users/10400028/artur-mrozinski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "closed_date": 1556443923, "accepted_answer_id": 55888652, "answer_count": 3, "score": 1, "last_activity_date": 1556444517, "creation_date": 1556440190, "last_edit_date": 1556441564, "question_id": 55888413, "link": "https://stackoverflow.com/questions/55888413/what-does-mean-at-the-beginning-of-a-range", "closed_reason": "Duplicate", "title": "What does * mean at the beginning of a range?", "body": "<p>Sorry for the noob question, but what does this asterisk mean at the beginning of a range?</p>\n\n<pre><code>class Matrix\n  def initialize(matrix_string)\n    @matrix = matrix_string.split(\"\\n\").map do |row|\n        row.split.map(&amp;:to_i)\n    end\n    @rows = rows.length\n    @cols = columns.length\n  end\n\n  def rows\n    @matrix\n  end\n\n  def columns\n    @matrix.transpose\n  end\n\n  # ---&gt;&gt;***\n  def saddle_points\n    [*0...@rows].product([*0...@cols]).select do |coords|\n        saddle_point?(*coords)\n  end\n  # ***&lt;----\nend\n\nprivate\n  def   saddle_point?(row, col)\n    (@matrix[row][col] == rows[row].max) &amp;&amp; \n    (@matrix[row][col] == columns[col].min)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "edited": false, "score": 0, "creation_date": 1556438420, "post_id": 55887982, "comment_id": 98433809, "body": "Try to join with <code>\\n</code> (or <code>\\t\\n</code> to indent): <code>&quot;Error\uff1a #{f.error_messages.split(&#39;;&#39;).join(&#39;\\n&#39;)}&quot;</code>"}, {"owner": {"reputation": 21, "user_id": 11270209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YND2jA7wMto/AAAAAAAAAAI/AAAAAAAAACg/8XDuS9KSE5A/photo.jpg?sz=128", "display_name": "XueSong_Zhang", "link": "https://stackoverflow.com/users/11270209/xuesong-zhang"}, "reply_to_user": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "edited": false, "score": 0, "creation_date": 1556438950, "post_id": 55887982, "comment_id": 98433925, "body": "@CAmador ,Thank you for your answer, but I&#39;ve tried that these are not tokens for line breaks in Title attributes."}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1556440236, "post_id": 55887982, "comment_id": 98434171, "body": "Try this instead: <code>title=&quot;Error\uff1a&amp;#10;  xxx1ooo;&amp;#10;  xxx2ooo&quot;</code>"}, {"owner": {"reputation": 21, "user_id": 11270209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YND2jA7wMto/AAAAAAAAAAI/AAAAAAAAACg/8XDuS9KSE5A/photo.jpg?sz=128", "display_name": "XueSong_Zhang", "link": "https://stackoverflow.com/users/11270209/xuesong-zhang"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1556442017, "post_id": 55887982, "comment_id": 98434559, "body": "@Surya ,Thank you for your reply. It&#39;s still impossible to solve it."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11270209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YND2jA7wMto/AAAAAAAAAAI/AAAAAAAAACg/8XDuS9KSE5A/photo.jpg?sz=128", "display_name": "XueSong_Zhang", "link": "https://stackoverflow.com/users/11270209/xuesong-zhang"}, "edited": false, "score": 0, "creation_date": 1556442214, "post_id": 55888520, "comment_id": 98434601, "body": "Thank you for your reply. I tried this way, but it didn&#39;t work."}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 21, "user_id": 11270209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YND2jA7wMto/AAAAAAAAAAI/AAAAAAAAACg/8XDuS9KSE5A/photo.jpg?sz=128", "display_name": "XueSong_Zhang", "link": "https://stackoverflow.com/users/11270209/xuesong-zhang"}, "edited": false, "score": 0, "creation_date": 1556444253, "post_id": 55888520, "comment_id": 98435043, "body": "@XueSong_Zhang with double-quotes <code>&quot;</code>?"}, {"owner": {"reputation": 21, "user_id": 11270209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YND2jA7wMto/AAAAAAAAAAI/AAAAAAAAACg/8XDuS9KSE5A/photo.jpg?sz=128", "display_name": "XueSong_Zhang", "link": "https://stackoverflow.com/users/11270209/xuesong-zhang"}, "edited": false, "score": 0, "creation_date": 1556468417, "post_id": 55888520, "comment_id": 98441199, "body": "I tried single and double quotation marks, but they still didn&#39;t work."}, {"owner": {"reputation": 21, "user_id": 11270209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YND2jA7wMto/AAAAAAAAAAI/AAAAAAAAACg/8XDuS9KSE5A/photo.jpg?sz=128", "display_name": "XueSong_Zhang", "link": "https://stackoverflow.com/users/11270209/xuesong-zhang"}, "edited": false, "score": 0, "creation_date": 1556468481, "post_id": 55888520, "comment_id": 98441219, "body": "I may need to use &quot;html_self&quot; or &quot;raw&quot;, but I don&#39;t know how to use &quot;raw&quot; in &quot;link_to&quot;. So I used the solution in the following reply"}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 0, "last_activity_date": 1556440961, "creation_date": 1556440961, "answer_id": 55888520, "question_id": 55887982, "link": "https://stackoverflow.com/questions/55887982/the-title-attribute-of-a-tag-is-displayed-in-separate-lines/55888520#55888520", "title": "The title attribute of &quot;a tag&quot; is displayed in separate lines", "body": "<p><a href=\"https://www.w3.org/TR/html51/dom.html#the-title-attribute\" rel=\"nofollow noreferrer\">HTML 5 specification</a> mentions that you can actually use <code>\"\\n\"</code>:</p>\n\n<pre><code>title: \"Error\uff1a #{f.error_messages.split(';').join(\"\\n\")}\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11270209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YND2jA7wMto/AAAAAAAAAAI/AAAAAAAAACg/8XDuS9KSE5A/photo.jpg?sz=128", "display_name": "XueSong_Zhang", "link": "https://stackoverflow.com/users/11270209/xuesong-zhang"}, "is_accepted": true, "score": 0, "last_activity_date": 1556442808, "creation_date": 1556442808, "answer_id": 55888751, "question_id": 55887982, "link": "https://stackoverflow.com/questions/55887982/the-title-attribute-of-a-tag-is-displayed-in-separate-lines/55888751#55888751", "title": "The title attribute of &quot;a tag&quot; is displayed in separate lines", "body": "<p>I used another solution to solve this problem.<br>\nUse another tag on the periphery to replace the \"a tag\" prompt function</p>\n\n<pre><code>&lt;% if f.error_status.error? %&gt;\n  &lt;td title=\"Error\uff1a&amp;#10;&lt;%= raw f.error_messages.split(';').join(';&amp;#10;') %&gt;\"&gt;\n    &lt;%= link_to filipino_url(f), remote: true, method: :get, class: 'client-link' do %&gt;\n      &lt;i class='fa fa-exclamation-circle text-danger'&gt;&lt;/i&gt;\n      &lt;%= f.full_name %&gt;\n    &lt;% end %&gt;\n  &lt;/td&gt;\n&lt;% else %&gt;\n</code></pre>\n\n<p>This is not a good way to solve the problem.<br>\nBut I really can't think of any better way to solve this problem.</p>\n"}], "owner": {"reputation": 21, "user_id": 11270209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YND2jA7wMto/AAAAAAAAAAI/AAAAAAAAACg/8XDuS9KSE5A/photo.jpg?sz=128", "display_name": "XueSong_Zhang", "link": "https://stackoverflow.com/users/11270209/xuesong-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 55888751, "answer_count": 2, "score": 0, "last_activity_date": 1556442808, "creation_date": 1556436253, "last_edit_date": 1556436605, "question_id": 55887982, "link": "https://stackoverflow.com/questions/55887982/the-title-attribute-of-a-tag-is-displayed-in-separate-lines", "title": "The title attribute of &quot;a tag&quot; is displayed in separate lines", "body": "<p>I want to display the content in the title attribute of \"a tag\" in separate lines.</p>\n\n<p>But in browsers it is treated as string output.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># HTML\n&lt;%= link_to filipino_url(f), remote: true, method: :get, class: 'client-link', title: \"Error\uff1a #{f.error_messages.split(';').join(';&amp;#10;')}\" do %&gt;\n  &lt;i class='fa fa-exclamation-circle text-danger'&gt;&lt;/i&gt;\n  &lt;%= f.full_name %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!-- Developer mode of browser(F12) --&gt;\n&lt;a class=\"client-link\" title=\"Error\uff1a xxx1ooo;&amp;#10;xxx2ooo\" data-remote=\"true\" data-method=\"get\" href=\"http://localhost:4000/filipinoes/1\"&gt;\n  ......\n&lt;/a&gt;\n</code></pre>\n\n<pre><code># I got it.\n\"Error\uff1a xxx1ooo;&amp;#10;xxx2ooo\"\n# But I need it.\n\"Error\uff1a xxx1ooo;\n         xxx2ooo\"\n</code></pre>\n\n<p>I used the developer mode of the browser to modify it. After pressing the Enter key, I got the effect I needed. They were displayed in separate lines.</p>\n\n<p>But through the program output, it becomes a string, and the browser does not parse the symbols.</p>\n\n<p>I don't know what went wrong. Please help me.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 1, "creation_date": 1556650177, "post_id": 55887040, "comment_id": 98507729, "body": "For image, contentType must be &#39;form-data&#39; not JSON."}], "owner": {"reputation": 1510, "user_id": 925486, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Zz9P7.jpg?s=128&g=1", "display_name": "kyrofa", "link": "https://stackoverflow.com/users/925486/kyrofa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556467891, "creation_date": 1556425880, "last_edit_date": 1556467891, "question_id": 55887040, "link": "https://stackoverflow.com/questions/55887040/rails-5-strong-parameters-doesnt-allow-uploadedfile", "title": "Rails 5 strong parameters doesn&#39;t allow UploadedFile", "body": "<p>I'm porting a Rails 4 app to Rails 5 and experiencing some odd behavior with strong parameters and <code>Rack::Test::UploadedFile</code>. I have a test/controller combo that does something like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># The test\npost images_url, as: :json, params: {\n    image: {\n        image: Rack::Test::UploadedFile.new(foo)\n    }\n}\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code># The controller\ndef image_params\n    params.require(:image).permit(:image)\nend\n</code></pre>\n\n<p>According to <a href=\"https://api.rubyonrails.org/classes/ActionController/Parameters.html#method-i-permit\" rel=\"nofollow noreferrer\">documentation</a>, only permitted <em>scalars</em> pass the filter, and the explicit list of types includes <code>Rack::Test::UploadedFile</code>. So far, so good.</p>\n\n<p>Except... it doesn't work. It gets filtered out. If I add a <code>puts params</code> to the controller, I see something like <code>{\"image\"=&gt;{\"image\"=&gt;{\"original_filename\"=&gt;\"test.jpg\", \"tempfile\"=&gt;\"#&lt;File:0x000056493a08dfc0&gt;\", \"content_type\"=&gt;\"image/jpeg\"}}}</code>. It's a hash, not an <code>UploadedFile</code>. This is borne out digging into the actionpack code as well: it ends up as a hash there, gets turned into another <code>ActionController::Parameters</code>, and isn't considered a scalar; it's thus filtered out.</p>\n\n<p>This worked fine in Rails 4 with test code like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>post :create, format: :json, image: {\n    image: Rack::Test::UploadedFile.new(foo)\n}\n</code></pre>\n\n<p>I can't seem to get this working in Rails 5, am I missing something? Interestingly, if I remove the <code>as: :json</code> the params look correct (although my controller isn't written to handle non-json so it fails for other reasons).</p>\n"}, {"tags": ["ruby", "comparison", "argument-error"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1556425538, "post_id": 55886979, "comment_id": 98431673, "body": "When you get to the last element of <code>arr</code>, <code>j = arr.size-1</code> and <code>i = arr[j]</code>. Then you compare <code>arr[j]</code> with <code>arr[j+1]</code>. The latter is therefore equal to <code>nil</code>, so you are comparing an integer with <code>nil</code>. (Presumable, <code>arr</code> contains integers.)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1556425791, "post_id": 55886979, "comment_id": 98431702, "body": "Even when you fix your problem your algorithm won&#39;t work because you are not actually swapping elements of <code>arr</code>. With <code>puts &quot;swap&quot;</code> you&#39;re just saying you are. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11099477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e791369b6900fa232e95ec1bb9b58c6d?s=128&d=identicon&r=PG&f=1", "display_name": "markus902", "link": "https://stackoverflow.com/users/11099477/markus902"}, "edited": false, "score": 1, "creation_date": 1556463573, "post_id": 55888835, "comment_id": 98439829, "body": "Thank you, now it works. The script is more of en exercise. Now i can actually do something with it :-)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1556513813, "post_id": 55888835, "comment_id": 98450522, "body": "Recall that with <i>parallel assignment</i> (aka <i>multiple assignment</i>) you don&#39;t need the  variable (<code>temp</code>). Just <code>arr[j], arr[j+1] = arr[j+1], arr[j]</code>. It&#39;s not accurate to say, &quot;you are asking to access a <code>nil</code> value in array&quot;. After all, arrays may contain <code>nil</code> elements. I believe you mean that the OP is trying to index an element with an index that is greater than the index of the last element of the array (<code>arr.size-1</code>), so <code>nil</code> is returned. Yes, a bit wordy, but such is life. Lastly, I don&#39;t think you would <code>break</code> from the loop; you would simply never have an out-of-bounds index."}, {"owner": {"reputation": 26, "user_id": 4238832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xOsQYL5a6hg/AAAAAAAAAAI/AAAAAAAAAfg/4Zp_pXEsKcA/photo.jpg?sz=128", "display_name": "Ali Day", "link": "https://stackoverflow.com/users/4238832/ali-day"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1556535025, "post_id": 55888835, "comment_id": 98459396, "body": "Thanks @CarySwoveland. Regarding your second point, you are talking about something like this? <code>arr.each_with_index do |element, index|; if arr.size-1 != index; arr[index], arr[index+1] = arr[index+1], arr[index]; end; end</code>"}], "tags": [], "owner": {"reputation": 26, "user_id": 4238832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xOsQYL5a6hg/AAAAAAAAAAI/AAAAAAAAAfg/4Zp_pXEsKcA/photo.jpg?sz=128", "display_name": "Ali Day", "link": "https://stackoverflow.com/users/4238832/ali-day"}, "is_accepted": true, "score": 1, "last_activity_date": 1556443467, "creation_date": 1556443467, "answer_id": 55888835, "question_id": 55886979, "link": "https://stackoverflow.com/questions/55886979/comparison-of-integer-with-nil-failed-in-bubble-sort-algorithm/55888835#55888835", "title": "Comparison of Integer with nil failed in bubble sort algorithm", "body": "<p>First, you ask the script to read the <code>J+1</code> index when the last index could be <code>j</code>. Or in other words you are asking to access a nil value in array. You have to ensure that you are not try to access <code>n+1</code> element in your array.\nSimply just check and break from loop if you reach the last element:</p>\n\n<pre><code>break if arr.size-1 == j #j is the last index now \n</code></pre>\n\n<p>Second, you are not doing anything in your code but printing. You can do something</p>\n\n<pre><code>temp = arr[j]\narr[j] = arr[j+1]\narr[j+1] = temp\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 1449406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nkyLF.jpg?s=128&g=1", "display_name": "Nataniele", "link": "https://stackoverflow.com/users/1449406/nataniele"}, "is_accepted": false, "score": 0, "last_activity_date": 1562942547, "last_edit_date": 1562942547, "creation_date": 1562941846, "answer_id": 57009077, "question_id": 55886979, "link": "https://stackoverflow.com/questions/55886979/comparison-of-integer-with-nil-failed-in-bubble-sort-algorithm/57009077#57009077", "title": "Comparison of Integer with nil failed in bubble sort algorithm", "body": "<p>Array element with index <code>j+1</code> cannot be found as you iterate over the array with <code>.each_with_index</code>. <code>j+1</code> returns <code>nil</code> and then you try to compare it with <code>arr[j]</code> which causes Argument error.</p>\n\n<p><code>.each_with_index</code> is not useful here as you use only indexes. And you need to run check again if unsorted values found.</p>\n\n<p>My suggestion is to use a loop from  0 to the last possible index value. Something like this:</p>\n\n<pre><code>def bubble_sort(arr)\n  index = 0\n\n  while index &lt; arr.size - 1 do\n    if arr[index] &gt; arr[index+1]\n      arr[index], arr[index+1] = arr[index+1], arr[index]\n      index = 0\n    else\n      index += 1\n    end\n  end\n\n  print arr\nend\n\nbubble_sort([4,3,78,2,0,2]) # =&gt; [0, 2, 2, 3, 4, 78]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11099477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e791369b6900fa232e95ec1bb9b58c6d?s=128&d=identicon&r=PG&f=1", "display_name": "markus902", "link": "https://stackoverflow.com/users/11099477/markus902"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "accepted_answer_id": 55888835, "answer_count": 2, "score": 0, "last_activity_date": 1562942547, "creation_date": 1556424965, "last_edit_date": 1556434501, "question_id": 55886979, "link": "https://stackoverflow.com/questions/55886979/comparison-of-integer-with-nil-failed-in-bubble-sort-algorithm", "title": "Comparison of Integer with nil failed in bubble sort algorithm", "body": "<p>I am creating a bubble sort algorithm. Why do I get the error message comparison of Integer with nil failed (ArgumentError)?</p>\n\n<pre><code>def bubble_sort(arr)\n\n  arr.each_with_index do |i, j|    \n    print arr[j]\n    print arr[j+1]\n\n    if arr[j] &gt; arr[j+1]\n      print \"swap\"\n    end \n  end\n\n  print arr\n\nend\n\nbubble_sort([4,3,78,2,0,2])\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "many-to-many"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1556421359, "post_id": 55886694, "comment_id": 98431133, "body": "If name is present in only one of all tables, then you can use it as <code>f.users.where(active: true).order(name: :asc)</code> (order all by firm name), otherwise pass the underscored plural name of the table."}, {"owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 0, "creation_date": 1556424837, "post_id": 55886694, "comment_id": 98431575, "body": "f.users.joins(:firm_emps).where(&#39;firm_emps.active=?&#39;, true).order(&#39;users.name asc&#39;) . If it doesn&#39;t work use sort_by method."}, {"owner": {"reputation": 19, "user_id": 1849012, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qNMHH.jpg?s=128&g=1", "display_name": "v8soup", "link": "https://stackoverflow.com/users/1849012/v8soup"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1556511003, "post_id": 55886694, "comment_id": 98449917, "body": "@SebastianPalma, if you notice, all 3 tables have a field &#39;active&#39;. Your query filters on &#39;active = true&#39; on users&#39; table and not on firm_emp&#39;s table."}, {"owner": {"reputation": 19, "user_id": 1849012, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qNMHH.jpg?s=128&g=1", "display_name": "v8soup", "link": "https://stackoverflow.com/users/1849012/v8soup"}, "reply_to_user": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "edited": false, "score": 1, "creation_date": 1556511069, "post_id": 55886694, "comment_id": 98449932, "body": "@PragyaSriharsh, your answer worked for me and I&quot;d like to upvote your answer but you gave your answer as a comment. If you click the &#39;answer question&#39; button I can set your answer as correct."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1556511667, "post_id": 55886694, "comment_id": 98450038, "body": "<b>If name is present in only one of all tables</b>, that was written before you updated the question."}], "answers": [{"tags": [], "owner": {"reputation": 119, "user_id": 4286830, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dXtvJSDxIrc/AAAAAAAAAAI/AAAAAAAAACg/ZI_wZKY7hHQ/photo.jpg?sz=128", "display_name": "Arun Eapachen", "link": "https://stackoverflow.com/users/4286830/arun-eapachen"}, "is_accepted": true, "score": -1, "last_activity_date": 1556469684, "creation_date": 1556469684, "answer_id": 55892426, "question_id": 55886694, "link": "https://stackoverflow.com/questions/55886694/querying-many-to-many-relationship-filtering-by-many-to-many-table-but-ordering/55892426#55892426", "title": "Querying many-to-many relationship filtering by many to many table but ordering by an associated table&#39;s field", "body": "<p>Try the following.</p>\n\n<pre><code>f = Firm.first\nf.users.where('firm_epms.active = ?' , true).order('users.name asc')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1556512221, "creation_date": 1556512221, "answer_id": 55896987, "question_id": 55886694, "link": "https://stackoverflow.com/questions/55886694/querying-many-to-many-relationship-filtering-by-many-to-many-table-but-ordering/55896987#55896987", "title": "Querying many-to-many relationship filtering by many to many table but ordering by an associated table&#39;s field", "body": "<p>Try it: </p>\n\n<pre><code>f.users.joins(:firm_emps).where('firm_emps.active=?', true).order('users.name asc') \n</code></pre>\n\n<p>If it doesn't work use sort_by method.</p>\n"}], "owner": {"reputation": 19, "user_id": 1849012, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qNMHH.jpg?s=128&g=1", "display_name": "v8soup", "link": "https://stackoverflow.com/users/1849012/v8soup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 55892426, "answer_count": 2, "score": 0, "last_activity_date": 1556514868, "creation_date": 1556420953, "last_edit_date": 1556514868, "question_id": 55886694, "link": "https://stackoverflow.com/questions/55886694/querying-many-to-many-relationship-filtering-by-many-to-many-table-but-ordering", "title": "Querying many-to-many relationship filtering by many to many table but ordering by an associated table&#39;s field", "body": "<p>I am trying to come up with a query for a many-to-many relationship with filtering for a certain field in the many-to-many table while ordering by a field in an associated table.</p>\n\n<p>How do I get all the active firm_emps of a specific firm and order the firm_emps by user's name?</p>\n\n<p>user.rb</p>\n\n<pre><code>Class User &lt; ApplicationRecord\n has_many :firm_emps, :dependent =&gt; :destroy\n has_many :firms, through: :firm_emps\nend\n</code></pre>\n\n<p>user.rb migration file</p>\n\n<pre><code>...\nt.string :name\nt.boolean :active\n...\n</code></pre>\n\n<p>firm_emp.rb</p>\n\n<pre><code>Class FirmEmp &lt; ApplicationRecord\n belongs_to :firm\n belongs_to :user\nend\n</code></pre>\n\n<p>firm_emp.rb's migration file</p>\n\n<pre><code>...\n t.belongs_to :user, index: true\n t.belongs_to :firm, index: true\n t.boolean :admin, default: false\n t.boolean :active, default: true\n...\n</code></pre>\n\n<p>firm.rb</p>\n\n<pre><code>Class Firm &lt; ApplicationRecord\n has_many :firm_emps, dependent: :destroy\n has_many :users, through: :firm_emps\nend\n</code></pre>\n\n<p>Firm.rb's migration file</p>\n\n<pre><code>...\nt.string :full_name\nt.boolean :active\n...\n</code></pre>\n\n<p>I've tried the following queries in rails console:</p>\n\n<pre><code>f = Firm.first\nf.users.where(active: true).order('users.name asc')\n# But this filters on User's table field active: true and not the FirmEmps table field active: true\n\nf.users.joins(:firmemps).where(active: true).order('users.name asc')\n# Just doesn't work\nf.firm_emps.active.order('firm_emps.active')\n# But i can't order by user's field 'name'\n</code></pre>\n\n<p><strong>EDIT:</strong> \n@PragyaSriharsh's and @ArunEapachen's answers worked.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs", "rails-activestorage"], "answers": [{"comments": [{"owner": {"reputation": 677, "user_id": 3692993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df58980e773a17b1c4258c5c143bb0e0?s=128&d=identicon&r=PG&f=1", "display_name": "TFrazee", "link": "https://stackoverflow.com/users/3692993/tfrazee"}, "edited": false, "score": 0, "creation_date": 1556423041, "post_id": 55886642, "comment_id": 98431342, "body": "Thanks! I had tried that but encountered another error. I solved it using the solution at <a href=\"https://stackoverflow.com/questions/7219732/missing-host-to-link-to-please-provide-host-parameter-or-set-default-url-optio/48529627#48529627\" title=\"missing host to link to please provide host parameter or set default url optio\">stackoverflow.com/questions/7219732/&hellip;</a>, and in combination with this it is now working."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "reply_to_user": {"reputation": 677, "user_id": 3692993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df58980e773a17b1c4258c5c143bb0e0?s=128&d=identicon&r=PG&f=1", "display_name": "TFrazee", "link": "https://stackoverflow.com/users/3692993/tfrazee"}, "edited": false, "score": 0, "creation_date": 1556423149, "post_id": 55886642, "comment_id": 98431356, "body": "Nice! Oh, if the React app is hosted on the same domain as the Rails app, you could always add <code>only_path: true</code> to the <code>rails_blob_path</code> method call. Then it would make URLs that don&#39;t include a domain. eg: <code>&#47;images&#47;Ab&#47;CD&#47;AbCDEfGhIjkL</code>"}], "tags": [], "owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "is_accepted": true, "score": 3, "last_activity_date": 1556420332, "creation_date": 1556420332, "answer_id": 55886642, "question_id": 55886463, "link": "https://stackoverflow.com/questions/55886463/rails-active-storage-get-relative-disk-service-path-for-attachment/55886642#55886642", "title": "Rails Active Storage: Get relative disk service path for attachment", "body": "<p>You need to use the routes helper to build of a URL to your Rails app.</p>\n\n<p><a href=\"https://guides.rubyonrails.org/active_storage_overview.html#linking-to-files\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/active_storage_overview.html#linking-to-files</a></p>\n\n<pre><code>class Product &lt; ApplicationRecord\n    attr_accessor :image_url\n    has_one_attached :image\n\n    def as_json(options)\n        h = super(options)\n        if self.image.attached?\n            h[:image_url] = Rails.application.routes.url_helpers.rails_blob_path(self.image)\n        end\n        h\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 677, "user_id": 3692993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df58980e773a17b1c4258c5c143bb0e0?s=128&d=identicon&r=PG&f=1", "display_name": "TFrazee", "link": "https://stackoverflow.com/users/3692993/tfrazee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1468, "favorite_count": 0, "accepted_answer_id": 55886642, "answer_count": 1, "score": 0, "last_activity_date": 1556420332, "creation_date": 1556417511, "last_edit_date": 1556417890, "question_id": 55886463, "link": "https://stackoverflow.com/questions/55886463/rails-active-storage-get-relative-disk-service-path-for-attachment", "title": "Rails Active Storage: Get relative disk service path for attachment", "body": "<p>I'm switching to Rails Active Storage to handle upload and storage of images locally (using the disk service) for a product catalog, and I'm having trouble getting a usable url to the image to feed into an <code>&lt;img&gt;</code> tag. I'm using React on the frontend, so I can't (easily) use Rails helpers to generate the tag.</p>\n\n<p>ActiveStorage puts the files in <code>/public/images</code>.  I can hardcode relative links to the files (i.e. <code>http://localhost:3000/images/Ab/CD/AbCDEfGhIjkL</code>) and it works fine.</p>\n\n<p>Relevant snippet from <code>Product.rb</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>    class Product &lt; ApplicationRecord\n        attr_accessor :image_url\n        has_one_attached :image\n\n        def as_json(options)\n            h = super(options)\n            if self.image.attached?\n                h[:image_url] = ActiveStorage::Blob.service.service_url(self.image.key)\n            end\n            h\n        end\n    end\n</code></pre>\n\n<p><code>as_json</code> produces a JSON object to feed to React that has an entry <code>image_url</code> that is used for the <code>&lt;img&gt;</code>'s <code>src</code> attribute.  With the code above, <code>image_url</code> contains the <em>full path</em> to the file (i.e. <code>http://localhost:3000/srv/www/rails_app/public/images/Ab/CD/AbCDEfGhIjkL</code>).  Using <code>url_for</code> in the view produces the same result.  I want it to only contain the path relative to rails root.</p>\n\n<p>I <em>could</em> manipulate the string to remove everything before the relative path, but I foresee this causing bugs in the future if anything ever changes, so I'd much rather find a way to get ActiveStorage to just generate an appropriate string for me.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 1, "creation_date": 1556416918, "post_id": 55886106, "comment_id": 98430637, "body": "Can you show what you&#39;ve tried?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556421050, "post_id": 55886106, "comment_id": 98431098, "body": "You can do it purely on the client side using Javascript. Add an event handler to the delete button which prompts the user for confirmation before actually sending the request."}, {"owner": {"reputation": 57, "user_id": 10561528, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1_Z1WBAWJUA/AAAAAAAAAAI/AAAAAAAAC00/2kYRKTYtIyk/photo.jpg?sz=128", "display_name": "Ashmit Pathak", "link": "https://stackoverflow.com/users/10561528/ashmit-pathak"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556434107, "post_id": 55886106, "comment_id": 98432872, "body": "But I have to stop the destroy function in the controller which is called in the destroy action according to the user input if the user input is not correct @maxpleaner"}, {"owner": {"reputation": 57, "user_id": 10561528, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1_Z1WBAWJUA/AAAAAAAAAAI/AAAAAAAAC00/2kYRKTYtIyk/photo.jpg?sz=128", "display_name": "Ashmit Pathak", "link": "https://stackoverflow.com/users/10561528/ashmit-pathak"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1556434283, "post_id": 55886106, "comment_id": 98432920, "body": "But I have to stop m.destroy in the controller&#39;s destroy action in rails if the user inuput is not correct. Please share a code @maxpleaner"}], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 57, "user_id": 10561528, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1_Z1WBAWJUA/AAAAAAAAAAI/AAAAAAAAC00/2kYRKTYtIyk/photo.jpg?sz=128", "display_name": "Ashmit Pathak", "link": "https://stackoverflow.com/users/10561528/ashmit-pathak"}, "edited": false, "score": 0, "creation_date": 1556473226, "post_id": 55887930, "comment_id": 98442532, "body": "Feel free to accept the answer if it worked for you"}, {"owner": {"reputation": 57, "user_id": 10561528, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1_Z1WBAWJUA/AAAAAAAAAAI/AAAAAAAAC00/2kYRKTYtIyk/photo.jpg?sz=128", "display_name": "Ashmit Pathak", "link": "https://stackoverflow.com/users/10561528/ashmit-pathak"}, "edited": false, "score": 0, "creation_date": 1558100800, "post_id": 55887930, "comment_id": 99000503, "body": "thanx for your help"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1556435746, "creation_date": 1556435746, "answer_id": 55887930, "question_id": 55886106, "link": "https://stackoverflow.com/questions/55886106/delete-article-only-if-the-url-provided-by-the-user-matched-the-url-of-the-artic/55887930#55887930", "title": "Delete article only if the url provided by the user matched the url of the article", "body": "<p>Say you have a delete button like this:</p>\n\n<pre><code>&lt;%= button_to \"Destroy\", things_path(@thing),\n    method: :delete,\n    data: { name: @thing.name },\n    class: \"delete-btn\"\n%&gt;\n</code></pre>\n\n<p>You can add a Javascript confirmation like so:</p>\n\n<pre><code>$(\".delete-btn\").on(\"click\", function(event) {\n  var name = $(event.currentTarget).data(\"name\")\n  var confirmation = prompt(\"enter name of repo to delete\");\n  if (confirmation != name) {\n    event.preventDefault()\n  }\n})\n</code></pre>\n\n<p>If you want to imitate github you need to use a modal instead of a prompt, but this is just to give you an idea of one way</p>\n"}], "owner": {"reputation": 57, "user_id": 10561528, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1_Z1WBAWJUA/AAAAAAAAAAI/AAAAAAAAC00/2kYRKTYtIyk/photo.jpg?sz=128", "display_name": "Ashmit Pathak", "link": "https://stackoverflow.com/users/10561528/ashmit-pathak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1556435746, "creation_date": 1556412528, "question_id": 55886106, "link": "https://stackoverflow.com/questions/55886106/delete-article-only-if-the-url-provided-by-the-user-matched-the-url-of-the-artic", "title": "Delete article only if the url provided by the user matched the url of the article", "body": "<p>We have a confirmation popup in github which asks for the repository url , and unless we provide the correct url the repository is not deleted/destroyed. Please guide me how can I achieve it if I want to have this feature in my ruby on rails project</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "messaging", "mailboxer", "argument-error"], "answers": [{"tags": [], "owner": {"reputation": 352, "user_id": 11402017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c1b27518dca2d492a70ef515ec8bd79?s=128&d=identicon&r=PG", "display_name": "David Klinge", "link": "https://stackoverflow.com/users/11402017/david-klinge"}, "is_accepted": false, "score": 0, "last_activity_date": 1556410205, "last_edit_date": 1556410205, "creation_date": 1556407571, "answer_id": 55885723, "question_id": 55885633, "link": "https://stackoverflow.com/questions/55885633/argumenterror-in-messagescreate-for-mailboxer-in-ruby-on-rails/55885723#55885723", "title": "ArgumentError in Messages#create for Mailboxer in Ruby on Rails", "body": "<p>You need to tell Rails where your email server is in each of your application's environment files.  Something like:</p>\n\n<pre><code>config.action_mailer.default_url_options = { :host =&gt; \"www.yourhost.com\" }\n</code></pre>\n\n<p>Also, before you post a question here, you should try searching Google for the error message. <a href=\"https://stackoverflow.com/questions/7219732/missing-host-to-link-to-please-provide-host-parameter-or-set-default-url-optio\">This was the first result</a> for <code>Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true</code></p>\n"}], "owner": {"reputation": 1, "user_id": 11347073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92c2bce28e3351309acf7f77b8a00df9?s=128&d=identicon&r=PG&f=1", "display_name": "layaslaya", "link": "https://stackoverflow.com/users/11347073/layaslaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556410205, "creation_date": 1556406623, "last_edit_date": 1556408711, "question_id": 55885633, "link": "https://stackoverflow.com/questions/55885633/argumenterror-in-messagescreate-for-mailboxer-in-ruby-on-rails", "title": "ArgumentError in Messages#create for Mailboxer in Ruby on Rails", "body": "<p>I followed this site's tutorial on implementing mailboxer into <a href=\"https://www.sitepoint.com/messaging-rails-mailboxer/\" rel=\"nofollow noreferrer\">a Ruby on Rails web application</a>.</p>\n\n<p>Right now I'm getting this error: </p>\n\n<pre><code>ArgumentError in Messages#create\nMissing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true\n</code></pre>\n\n<p>Here is my messages_controller.rb</p>\n\n<pre><code>    class MessagesController &lt; ApplicationController\n\n      def new\n        @chosen_recipient = User.find_by(id: params[:to].to_i) if params[:to]\n      end\n\n      def create\n        recipients = User.where(id: params['recipients'])\n        conversation = current_user.send_message(recipients, params[:message] \n        [:body], params[:message][:subject]).conversation\n        flash[:success] = \"Message has been sent!\"\n        redirect_to conversation_path(conversation)\n      end\n\n    end\n</code></pre>\n\n<p>I'm not sure what is wrong with it as I followed the tutorial fully.</p>\n\n<p>The error line specifically is line 9 \"conversation = current_user.send_message......\"</p>\n\n<p>I believe I would have to define @recipients somewhere but the tutorial doesn't specify.</p>\n\n<p>I have tried @recipients and @conversations that only leads to another error that I'm not familiar with fixing (this was just for experimentation).</p>\n\n<p>All the code is in the tutorial as well linked at the top.</p>\n\n<p>The repo can be cloned <a href=\"https://github.com/elayer/4155-bookxchange\" rel=\"nofollow noreferrer\">at this link</a> (using AWS Cloud9) and create users to then try to message another user and you will get the error message when clicking to send the message to the recipient.</p>\n\n<p>I have tried to do the suggestions previously listed and experimented with @ing some of the variables but it did not work.</p>\n"}]