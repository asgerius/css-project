[{"tags": ["ruby", "rspec", "factory-bot"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1464220331, "post_id": 37449230, "comment_id": 62400514, "body": "Are you saying that you want to create a factory_girl factory which mimics the behavior of <code>AFactory</code> so that you can use the factory_girl factory in tests of classes that use <code>AFactory</code>? Or do you just want to test <code>AFactory</code>? If something else, please clarify."}], "answers": [{"comments": [{"owner": {"reputation": 2001, "user_id": 1082527, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eb4d30dfcfc50f7422a2977653ce20e2?s=128&d=identicon&r=PG", "display_name": "Brandt Solovij", "link": "https://stackoverflow.com/users/1082527/brandt-solovij"}, "edited": false, "score": 0, "creation_date": 1464219867, "post_id": 37449326, "comment_id": 62400381, "body": "The reason for the Factory Girl integration is there is a substantial amount of shared information among these different classes (and required by the factory itself) - and each have at a minimum requirement of ~15+ initialization values. So factory girl was hoped to be leaned on in order to not create 100+ lines of &quot;let&quot; declarations within the rpsec file -- am i being unreasonably lazy with this goal? - Edit : I know that i can use other lets, to inject values within peer lets. Hoping to avoid that pattern as its spagetti"}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "reply_to_user": {"reputation": 2001, "user_id": 1082527, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eb4d30dfcfc50f7422a2977653ce20e2?s=128&d=identicon&r=PG", "display_name": "Brandt Solovij", "link": "https://stackoverflow.com/users/1082527/brandt-solovij"}, "edited": false, "score": 0, "creation_date": 1464220022, "post_id": 37449326, "comment_id": 62400415, "body": "@BrandtSolovij: I think it&#39;s a bit from column A and a bit from Column B.  My understanding is that you wish to test <code>AFactory</code>.  If you do, you have no reason to include FactoryGirl <i>anywhere</i> near this, since you know which types you should expect when it&#39;s used.  If you intended to use <code>AFactory</code> in your tests to generate your models, then you should <i>exclusively</i> use FactoryGirl for that, since again, you already know which models you need and which state they need to be in.  So...be more lazy around this test and less lazy around the others, is what I&#39;m thinking."}, {"owner": {"reputation": 2001, "user_id": 1082527, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eb4d30dfcfc50f7422a2977653ce20e2?s=128&d=identicon&r=PG", "display_name": "Brandt Solovij", "link": "https://stackoverflow.com/users/1082527/brandt-solovij"}, "edited": false, "score": 0, "creation_date": 1464220424, "post_id": 37449326, "comment_id": 62400538, "body": "ok that line of reasoning makes sense to me. I&#39;ll take the path suggested (which also separates intent nicely) and will mark this answer as accepted if it pans out while keeping tests small (# of lines wise). thanks!"}, {"owner": {"reputation": 2001, "user_id": 1082527, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eb4d30dfcfc50f7422a2977653ce20e2?s=128&d=identicon&r=PG", "display_name": "Brandt Solovij", "link": "https://stackoverflow.com/users/1082527/brandt-solovij"}, "edited": false, "score": 0, "creation_date": 1464226831, "post_id": 37449326, "comment_id": 62401981, "body": "yep. Column A and Column B : Used the factories to <code>do their jobs</code> and checked that against some hash &quot;lets&quot; - marking this answer as accepted - i was overthinking the process - good stuff!"}], "tags": [], "owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "is_accepted": true, "score": 1, "last_activity_date": 1464219587, "creation_date": 1464219587, "answer_id": 37449326, "question_id": 37449230, "link": "https://stackoverflow.com/questions/37449230/factorygirl-factory-define-pattern-for-a-factory-class-which-creates-n-numbe/37449326#37449326", "title": "FactoryGirl `factory define` pattern for a &#39;Factory&#39; class which creates n number of Class types", "body": "<p>I see no value in using FactoryGirl for this class.  Its only method is one that will generate an instance of a class if given the right arguments.</p>\n\n<p>The more ideal approach would be to set up N cases - N representing the number of possible values <code>args[:type]</code> could take - and test that way.  You know what you're expecting when you feed the right type to this class, so there's little reason to include FactoryGirl for this test at all.</p>\n\n<p>Here's a rough RSpec skeleton.  You're not testing anything other than the fact that your factory gave you the type you wanted (and also you'll want to test that it added the values you expected, but I leave that as an exercise for the reader).</p>\n\n<pre><code>describe AFactory do\n  context 'when args[:type] is A' do\n    let(:args) {\n      {type: A}\n    }\n\n    it 'returns the right instance' do\n      result = AFactory.distribute_types(args)\n      # verify here\n    end\n  end\n\n  context 'when args[:type] is B' do\n    let(:args) {\n      {type: B}\n    }\n\n    it 'returns the right instance' do\n      result = AFactory.distribute_types(args)\n      # verify here\n    end\n  end\n\n  context 'when args[:type] is C' do\n    let(:args) {\n      {type: C}\n    }\n\n    it 'returns the right instance' do\n      result = AFactory.distribute_types(args)\n      # verify here\n    end\n  end\n\n  context 'when args[:type] is any other value' do\n    let(:args) {\n      {type: 'foo bar baz bing boof'}\n    }\n\n    it 'returns the right instance' do\n      result = AFactory.distribute_types(args)\n      # verify here\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2001, "user_id": 1082527, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eb4d30dfcfc50f7422a2977653ce20e2?s=128&d=identicon&r=PG", "display_name": "Brandt Solovij", "link": "https://stackoverflow.com/users/1082527/brandt-solovij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 37449326, "answer_count": 1, "score": 0, "last_activity_date": 1464219587, "creation_date": 1464218906, "last_edit_date": 1464219217, "question_id": 37449230, "link": "https://stackoverflow.com/questions/37449230/factorygirl-factory-define-pattern-for-a-factory-class-which-creates-n-numbe", "title": "FactoryGirl `factory define` pattern for a &#39;Factory&#39; class which creates n number of Class types", "body": "<p>I'm going to be as brief as possible, please assume that completely rewriting what im about to describe is imminent however <code>not on this sprint</code></p>\n\n<p>Given there is a factory class like (pseudo):</p>\n\n<pre><code>class AFactory\n\n ....\n def self.distribute_types(args)\n   case args[:type]\n     when A\n        return ClassOfTypeA.new(args)\n     when B\n        return ClassOfTypeB.new(args)\n     when C\n        return ClassOfTypeC.new(args)\n     else\n        return ClassNamedSue(args)\n   end \n end\nend\n</code></pre>\n\n<p>I need to write FactoryGirl traits for this \"factory\" class but i cant find examples of how to properly use /other/ factories which represent the class(es) which would be built, depending.</p>\n\n<blockquote>\n  <p>edit: Please note, disregard the actual <code>AFactory</code> pattern - it is\n  known as suspect and will be properly redistributed along healthy\n  guidelines later on. Please do not spend time considering it's\n  wonky-ness and instead, focus on how to properly test this -- each\n  generated class instance, has a factory already dedicated to it, and I\n  would like to utilize those in this <code>AFactory</code> test.</p>\n</blockquote>\n\n<p>How to include a factory within another factory - is the abject question i suppose. </p>\n"}, {"tags": ["arrays", "ruby", "sorting", "duplicates"], "answers": [{"comments": [{"owner": {"reputation": 1229, "user_id": 5682649, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10156264848205403/picture?type=large", "display_name": "Reiss Johnson", "link": "https://stackoverflow.com/users/5682649/reiss-johnson"}, "edited": false, "score": 0, "creation_date": 1464218570, "post_id": 37449169, "comment_id": 62400073, "body": "No worries! :) I had this same method at one point! It&#39;s always the sorting that catches me out! :)"}], "tags": [], "owner": {"reputation": 660, "user_id": 1754849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TsJTj.png?s=128&g=1", "display_name": "Terra Ashley", "link": "https://stackoverflow.com/users/1754849/terra-ashley"}, "is_accepted": false, "score": 0, "last_activity_date": 1464218704, "last_edit_date": 1464218704, "creation_date": 1464218395, "answer_id": 37449169, "question_id": 37449042, "link": "https://stackoverflow.com/questions/37449042/removing-duplicates-from-a-ruby-array-without-using-built-in-methods-eg-uni/37449169#37449169", "title": "removing duplicates from a ruby array without using built in methods... eg. .uniq, .sort etc", "body": "<p>Creating and returning a secondary cleaned array makes this fairly simple: iterate over the original array and append only those elements that do not already exist within the cleaned array:</p>\n\n<pre><code>def clean(array)\n  cleaned = []\n  array.each do |element|\n    cleaned &lt;&lt; element  if not cleaned.include?(element)\n  end\n  return cleaned\nend\n</code></pre>\n\n<p>This is relatively quick and does exactly what you want.</p>\n\n<p><em>Proof of concept (irb):</em></p>\n\n<pre><code>2.2.2 :001 &gt; def clean(array); cleaned=[];  array.each{|ele| cleaned &lt;&lt; ele  if not cleaned.include? ele}; cleaned; end\n =&gt; :clean\n\n2.2.2 :002 &gt; clean [1, \"fred\", 6, 5, \"fred\", \"john\", 6, \"peter\", \"fred\"]\n =&gt; [1, \"fred\", 6, 5, \"john\", \"peter\"]\n</code></pre>\n\n<p>You could improve processing times on large arrays by using a <code>Hash</code> instead.  This would work by appending elements as keys to improve the internal lookup times, and then simply return a list of its keys for your array.  (Caveat: doing this may return them in an arbitrary order, however, so further effort may be required to maintain the original order.)</p>\n\n<p><strong>Edit:</strong> I missed the sorting requirement in your expected output.  Apologies.</p>\n"}, {"tags": [], "owner": {"reputation": 601, "user_id": 2740463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c65f1c874968a28278a6b77707757d?s=128&d=identicon&r=PG", "display_name": "Karim Tarek", "link": "https://stackoverflow.com/users/2740463/karim-tarek"}, "is_accepted": false, "score": 0, "last_activity_date": 1464221162, "last_edit_date": 1464221162, "creation_date": 1464220211, "answer_id": 37449393, "question_id": 37449042, "link": "https://stackoverflow.com/questions/37449042/removing-duplicates-from-a-ruby-array-without-using-built-in-methods-eg-uni/37449393#37449393", "title": "removing duplicates from a ruby array without using built in methods... eg. .uniq, .sort etc", "body": "<p>Building on what @terra did:</p>\n\n<pre><code>def uniq(array)\n  uniq = []\n  array.each do |element|\n    uniq &lt;&lt; element unless uniq.include?(element)\n  end\n  uniq\nend\n\ndef sort(array)\n  sorted = []\n  [Integer, String].each do |type|\n    sorted += array.select { |element| element.is_a? type }\n  end\n  sorted\nend\n</code></pre>\n\n<p>So now if you do this:</p>\n\n<pre><code>p uniq_and_sorted = sort(uniq([1, \"fred\", 6, 5, \"fred\", \"john\", 6, \"peter\", \"fred\"]))\n</code></pre>\n\n<p>You should get:</p>\n\n<pre><code>[1, 6, 5, \"fred\", \"john\", \"peter\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 990, "user_id": 2201388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdab0a969d54b8cfed60691e96f7fe62?s=128&d=identicon&r=PG", "display_name": "Mosab Sasi", "link": "https://stackoverflow.com/users/2201388/mosab-sasi"}, "is_accepted": false, "score": 0, "last_activity_date": 1464226679, "creation_date": 1464226679, "answer_id": 37450202, "question_id": 37449042, "link": "https://stackoverflow.com/questions/37449042/removing-duplicates-from-a-ruby-array-without-using-built-in-methods-eg-uni/37450202#37450202", "title": "removing duplicates from a ruby array without using built in methods... eg. .uniq, .sort etc", "body": "<p>This maybe long winded, but it works:</p>\n\n<pre><code>    array = [1, \"fred\", 6, 5, \"fred\", \"john\", 6, \"peter\", \"fred\"]\n\n    numbers_array = []\n    array.each do |e|\n      numbers_array &lt;&lt; e if e == e.to_i\n    end\n\n    numbers_array.sort!\n\n    strings_array = []\n    array.each do |e|\n        strings_array &lt;&lt; e if e == e.to_s\n    end\n\n    strings_array.sort!\n\n    final_array = []\n    final_array &lt;&lt; numbers_array &lt;&lt; strings_array\n    final_array.flatten!\n    final_array.uniq!\n\n    p final_array\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1464229507, "creation_date": 1464229507, "answer_id": 37450528, "question_id": 37449042, "link": "https://stackoverflow.com/questions/37449042/removing-duplicates-from-a-ruby-array-without-using-built-in-methods-eg-uni/37450528#37450528", "title": "removing duplicates from a ruby array without using built in methods... eg. .uniq, .sort etc", "body": "<p>I don't know which built-in methods you can't use, but if you can use <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-7C\" rel=\"nofollow\">Array#|</a> it's hard to imagine anything simpler than</p>\n\n<pre><code>array | []\n  #=&gt; [1, \"fred\", 6, 5, \"john\", \"peter\"]\n</code></pre>\n\n<p>Note this retains the ordering of <code>array</code>.</p>\n\n<p><code>array &amp; array</code> works as well.</p>\n"}], "owner": {"reputation": 1229, "user_id": 5682649, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10156264848205403/picture?type=large", "display_name": "Reiss Johnson", "link": "https://stackoverflow.com/users/5682649/reiss-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 857, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1464229507, "creation_date": 1464217638, "question_id": 37449042, "link": "https://stackoverflow.com/questions/37449042/removing-duplicates-from-a-ruby-array-without-using-built-in-methods-eg-uni", "title": "removing duplicates from a ruby array without using built in methods... eg. .uniq, .sort etc", "body": "<p>Im struggling trying to remove some duplicates from an array. I have a spec which requires I do not not use inbuilt sorting &amp; de-duplication methods...\nso <code>.uniq</code> <code>.sort</code> etc. Are out of use...</p>\n\n<p>Here is my array ... </p>\n\n<pre><code>array = [1, \"fred\", 6, 5, \"fred\", \"john\", 6, \"peter\", \"fred\"]\n</code></pre>\n\n<p>I need it to output...</p>\n\n<pre><code>sorted_array = [1, 6, 5, \"fred\", \"john\", \"peter\"]\n</code></pre>\n\n<p>So far I have tried to use a <code>Set</code> as well as  <code>array &amp; array</code> however that outputs in the wrong order. I need the integers to occur in the list before the strings...</p>\n\n<p>I have also tried to iterate through, finding if an element occurs more than once and using .delete &amp; .delete_at however I can't figure out how to delete the second/third/fourth occurring element...</p>\n"}, {"tags": ["ruby", "amazon-s3", "aws-sdk"], "comments": [{"owner": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "edited": false, "score": 0, "creation_date": 1464215561, "post_id": 37448559, "comment_id": 62399237, "body": "Are you trying to use IO.new? Also, if you want to change behavior of IO - you always can inheritance from it <code>class MyIO &lt; IO</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1464216161, "post_id": 37448559, "comment_id": 62399464, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, including the links, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. While we love helping, we want to see what you tried, rather than fill in your blank section. SO isn&#39;t a &quot;write code for me&quot;, it&#39;s a &quot;we&#39;ll help you fix your broken code&quot; site. Show us what you wrote toward solving the problem, and, if you haven&#39;t written anything, why not?"}, {"owner": {"reputation": 5719, "user_id": 182808, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d7e2ac1ac9e96e7c7655b06473a1a54e?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/182808/nikita"}, "reply_to_user": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "edited": false, "score": 0, "creation_date": 1464293700, "post_id": 37448559, "comment_id": 62439009, "body": "@\u0410\u043b\u0435\u043a\u0441\u0435\u0439\u041a\u0443\u0437\u043d\u0435\u0446\u043e\u0432 I guess I am unsure how to use IO class in this case. Should I use <code>IO.pipe</code>? Should I subclass <code>IO</code> and override which methods? Something else?"}], "answers": [{"tags": [], "owner": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "is_accepted": false, "score": 0, "last_activity_date": 1464339480, "creation_date": 1464339480, "answer_id": 37479158, "question_id": 37448559, "link": "https://stackoverflow.com/questions/37448559/how-to-create-an-io-object-for-awss3object-to-stream-d-l-line-by-line/37479158#37479158", "title": "How to create an IO object for Aws::S3::Object to stream d/l line by line?", "body": "<p>Acording to <a href=\"https://github.com/aws/aws-sdk-ruby/blob/ef9f2d3655c4bacb3adff580a6b295df510f78fe/doc-src/examples/s3/client/get_object/03_streaming_data_to_a_block.rb\" rel=\"nofollow\">streaming_data_to_a_block</a> you could stream data from s3 object like this:</p>\n\n<pre><code>s3.get_object(bucket: 'bucket-name', key: 'object-key') do |chunk|\n  # process chunk of data\nend\n</code></pre>\n"}], "owner": {"reputation": 5719, "user_id": 182808, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d7e2ac1ac9e96e7c7655b06473a1a54e?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/182808/nikita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 882, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491281294, "creation_date": 1464214579, "last_edit_date": 1491281294, "question_id": 37448559, "link": "https://stackoverflow.com/questions/37448559/how-to-create-an-io-object-for-awss3object-to-stream-d-l-line-by-line", "title": "How to create an IO object for Aws::S3::Object to stream d/l line by line?", "body": "<p>Ruby novice here. I'd like to stream a large S3 object (text file) and process it line at a time. I don't want to store the object data locally or load it fully in memory. <a href=\"http://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Object.html#get-instance_method\" rel=\"nofollow\"><code>Aws::S3::Object#get()</code></a> takes a hash whose <code>response_target</code> parameter can take an IO object but I am unsure how to subclass or instantiate an <code>IO</code> instance to do what I want. </p>\n\n<p>I'd like to end up with something like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>line_reader = nil # TODO make my IO instance\n\ns3_obj = s3.bucket('bucket-name').object('key')\ns3_obj.get({response_target: line_reader}) # returns as soon as streaming begins?\n\n# line_reader does not accumulate response data in memory\nline_reader.each do | text_line | \n  # do processing on each line independently\nend\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "voting-system", "acts-as-votable"], "answers": [{"comments": [{"owner": {"reputation": 1603, "user_id": 4111480, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/efe2b8fc71222d6b38cf9f0e866a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Yorkshireman", "link": "https://stackoverflow.com/users/4111480/yorkshireman"}, "reply_to_user": {"reputation": 692, "user_id": 5672966, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/897026250394112/picture?type=large", "display_name": "Ezequiel Ramiro", "link": "https://stackoverflow.com/users/5672966/ezequiel-ramiro"}, "edited": false, "score": 0, "creation_date": 1464433878, "post_id": 37448590, "comment_id": 62491511, "body": "@EzequielRamiro if this one works, surely it&#39;s better than the other answer? You want to show all of the posts that were liked by <code>current_user</code> - this achieves that. The &#39;best answer&#39; you chose describes how to &#39;like&#39; posts. As far as I can tell, that is a completely different thing to what you asked for in the original question."}], "tags": [], "owner": {"reputation": 1603, "user_id": 4111480, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/efe2b8fc71222d6b38cf9f0e866a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Yorkshireman", "link": "https://stackoverflow.com/users/4111480/yorkshireman"}, "is_accepted": false, "score": 2, "last_activity_date": 1464214738, "creation_date": 1464214738, "answer_id": 37448590, "question_id": 37448433, "link": "https://stackoverflow.com/questions/37448433/how-to-show-all-my-posts-liked-by-user/37448590#37448590", "title": "How to show all my posts liked by user", "body": "<p>try <code>@posts = current_user.find_up_voted_items</code> in your controller and putting <code>acts_as_voter</code> in your User model.</p>\n"}, {"comments": [{"owner": {"reputation": 1603, "user_id": 4111480, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/efe2b8fc71222d6b38cf9f0e866a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Yorkshireman", "link": "https://stackoverflow.com/users/4111480/yorkshireman"}, "edited": false, "score": 0, "creation_date": 1464268770, "post_id": 37448781, "comment_id": 62422918, "body": "does my answer not work? I think the gem already caters for this functionality (as per my answer), but I haven&#39;t tested this for myself. If I&#39;m right, it would be a much better way to do it."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 1603, "user_id": 4111480, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/efe2b8fc71222d6b38cf9f0e866a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Yorkshireman", "link": "https://stackoverflow.com/users/4111480/yorkshireman"}, "edited": false, "score": 0, "creation_date": 1464280244, "post_id": 37448781, "comment_id": 62431493, "body": "@Andy The OP was having difficulty querying.  The error, as pointed out in the first sentence of my answer, is that he is attempting to use a model method (<code>liked_by</code> provided by <code>acts_as_votable</code>) on a collection, not the model object that he intended.  This is like trying to use <code>String#gsub</code> on an array that contains strings - the method is being used on the wrong object.  Your answer, while possibly correct for some <i>other</i> question, has no bearing on <i>this</i> question.  You describe how to configure and retrieve voted items, and this is clearly not the problem that the OP is asking about."}, {"owner": {"reputation": 1603, "user_id": 4111480, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/efe2b8fc71222d6b38cf9f0e866a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Yorkshireman", "link": "https://stackoverflow.com/users/4111480/yorkshireman"}, "edited": false, "score": 0, "creation_date": 1464436557, "post_id": 37448781, "comment_id": 62492289, "body": "&quot;I&#39;m trying to show all the posts that I like by current user.&quot; This sounds like he&#39;s trying to retrieve all the posts from the database that have been &#39;liked&#39; by <code>current_user</code>. I&#39;m mystified as to why he&#39;s chosen your answer as the best one - makes even less sense since he&#39;s also said that my answer &#39;also works&#39;, but our answers do two completely different things."}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 2, "last_activity_date": 1464215830, "creation_date": 1464215830, "answer_id": 37448781, "question_id": 37448433, "link": "https://stackoverflow.com/questions/37448433/how-to-show-all-my-posts-liked-by-user/37448781#37448781", "title": "How to show all my posts liked by user", "body": "<p>The issue is that you're calling it on an ActiveRecord Relation, not on the model object, itself.  A couple of minor changes, and you'll be all set.</p>\n\n<p>First, we make the instance variable plural to show that it's receiving multiple records (a user can like multiple posts):</p>\n\n<pre><code>class DashboardController &lt; ApplicationController\n  def index\n    @posts = Post.all.liked_by current_user\n  end\nend\n</code></pre>\n\n<p>Then, to process these, you'll want to navigate to the individual record or records.  If you want to process the whole list, you can do this:</p>\n\n<pre><code>@posts.each do |post|\n  post.liked_by @user1\n  post.downvote_from @user2\nend\n</code></pre>\n\n<p>This will apply the like and downvote to all of the posts.  However, you can update only the first post, like this:</p>\n\n<pre><code>post = @posts.first\npost.liked_by @user1\npost.downvote_from @user2\n</code></pre>\n\n<p>If you already knew what post you wanted to vote on (maybe based on which was chosen in the UI), you could do this:</p>\n\n<pre><code>@post = Post.find_by(params[:id])\n@post.liked_by @user1\n@post.downvote_from @user2\n</code></pre>\n\n<p>Making sure to keep your plural and singular names distinct will help you keep in tune with Rails conventions and will help you easily identify when you're working with a collection or an individual object.</p>\n"}], "owner": {"reputation": 692, "user_id": 5672966, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/897026250394112/picture?type=large", "display_name": "Ezequiel Ramiro", "link": "https://stackoverflow.com/users/5672966/ezequiel-ramiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 765, "favorite_count": 0, "accepted_answer_id": 37448781, "answer_count": 2, "score": 2, "last_activity_date": 1464277566, "creation_date": 1464213934, "last_edit_date": 1464277566, "question_id": 37448433, "link": "https://stackoverflow.com/questions/37448433/how-to-show-all-my-posts-liked-by-user", "title": "How to show all my posts liked by user", "body": "<p>I'm trying to show all the posts that I like by current user.</p>\n\n<p>I'm using Ruby on Rails, and the gems Devise and \"Acts As Votable\". I've been following <a href=\"https://github.com/ryanto/acts_as_votable\" rel=\"nofollow\">the Acts As Votable guide</a> but can't make it work.</p>\n\n<p>I think this is the way to go:</p>\n\n<pre><code>@post.liked_by @user1\n@post.downvote_from @user2\n</code></pre>\n\n<p>I created a new controller called dashboard:</p>\n\n<pre><code>class DashboardController &lt; ApplicationController\n  def index\n        @post = Post.all.liked_by current_user\n  end\nend\n</code></pre>\n\n<p>But when I run my web I get:</p>\n\n<pre><code>undefined method `liked_by' for #&lt;Post::ActiveRecord_Relation:0x9aa89b0&gt;\n</code></pre>\n\n<p>What can I do? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "database-relations"], "answers": [{"tags": [], "owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "is_accepted": true, "score": 3, "last_activity_date": 1464213481, "creation_date": 1464213481, "answer_id": 37448331, "question_id": 37448244, "link": "https://stackoverflow.com/questions/37448244/rails-relations-select-all-answers-from-all-topics/37448331#37448331", "title": "RAILS: Relations (Select all answers from all topics)", "body": "<p>Use a <code>has_many :through</code> relation:</p>\n\n<pre><code># Category.rb\nhas_many :topics\nhas_many :answers, through: :topics\n</code></pre>\n\n<p>Now you can access all answers from all topics like so:</p>\n\n<pre><code>Category.first.answers.count\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 0, "creation_date": 1464215774, "post_id": 37448446, "comment_id": 62399301, "body": "I truly forgotten about has_many :through, but it is always great to have many solutions of 1 problem. Thank you!"}], "tags": [], "owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "is_accepted": false, "score": 1, "last_activity_date": 1464214014, "creation_date": 1464214014, "answer_id": 37448446, "question_id": 37448244, "link": "https://stackoverflow.com/questions/37448244/rails-relations-select-all-answers-from-all-topics/37448446#37448446", "title": "RAILS: Relations (Select all answers from all topics)", "body": "<p>if you are set on your schema configuration (i.e. not using a <code>has_many :through</code>), you'd want to start with <code>Answers</code> and utilize a couple of <code>join</code>s to get to <code>Category</code></p>\n\n<pre><code>Answers.joins(topic: :category).where(categories: { id: category_id })\n</code></pre>\n\n<p>here we're joining on a nested association, and then using a where clause to filter out by the <code>category_id</code></p>\n\n<p>note: i think this is the right syntax, but you may need to fiddle around with the plurality of <code>topic</code> and <code>category</code> there</p>\n"}], "owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 37448331, "answer_count": 2, "score": 2, "last_activity_date": 1464214014, "creation_date": 1464213116, "question_id": 37448244, "link": "https://stackoverflow.com/questions/37448244/rails-relations-select-all-answers-from-all-topics", "title": "RAILS: Relations (Select all answers from all topics)", "body": "<p><strong>category.rb</strong></p>\n\n<pre><code>  has_many :topics\n</code></pre>\n\n<p><strong>topic.rb</strong></p>\n\n<pre><code>belongs_to :category\nhas_many :answers\n</code></pre>\n\n<p><strong>answer.rb</strong></p>\n\n<pre><code>belongs_to :topic\n</code></pre>\n\n<p><strong>Question:</strong></p>\n\n<p>How can i preform queries like <code>Category.first.topics.answers.count</code></p>\n"}, {"tags": ["ruby", "hashmap"], "answers": [{"comments": [{"owner": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "reply_to_user": {"reputation": 189, "user_id": 5125027, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10153391766200552/picture?type=large", "display_name": "Steven Kwok", "link": "https://stackoverflow.com/users/5125027/steven-kwok"}, "edited": false, "score": 1, "creation_date": 1464215258, "post_id": 37448356, "comment_id": 62399138, "body": "@StevenKwok add explanation"}], "tags": [], "owner": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "is_accepted": true, "score": 2, "last_activity_date": 1464215247, "last_edit_date": 1464215247, "creation_date": 1464213608, "answer_id": 37448356, "question_id": 37448228, "link": "https://stackoverflow.com/questions/37448228/how-to-organize-hashes-by-property/37448356#37448356", "title": "How to organize hashes by property", "body": "<p>You can use each_with_object to combine in into new hash:</p>\n\n<pre><code>hash.each_with_object({}) do |(name, data), res|\n  (res[data[:location]] ||= []) &lt;&lt; name\nend\n</code></pre>\n\n<p><strong>Explanation:</strong></p>\n\n<p><a href=\"http://apidock.com/rails/Enumerable/each_with_object\" rel=\"nofollow\">each_with_object</a>\nIterates the given block for each element with an arbitrary object given, and returns the initially given object.</p>\n\n<p>In this case name and data is key and value of each element in given hash. \nIn <code>(res[data[:location]] ||= []) &lt;&lt; name</code> you get location, create array in result hash for given location (if it doesn't exist), then put key of input hash to it.</p>\n"}], "owner": {"reputation": 189, "user_id": 5125027, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10153391766200552/picture?type=large", "display_name": "Steven Kwok", "link": "https://stackoverflow.com/users/5125027/steven-kwok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 37448356, "answer_count": 1, "score": 1, "last_activity_date": 1464215247, "creation_date": 1464213050, "question_id": 37448228, "link": "https://stackoverflow.com/questions/37448228/how-to-organize-hashes-by-property", "title": "How to organize hashes by property", "body": "<p>Here is the hashes that will be processed: </p>\n\n<pre><code>{\n      \"flatiron school bk\" =&gt; {\n        :location =&gt; \"NYC\"\n      },\n      \"flatiron school\" =&gt; {\n        :location =&gt; \"NYC\"\n      },\n      \"dev boot camp\" =&gt; {\n        :location =&gt; \"SF\"\n      },\n      \"dev boot camp chicago\" =&gt; {\n        :location =&gt; \"Chicago\"\n      },\n      \"general assembly\" =&gt; {\n        :location =&gt; \"NYC\"\n      },\n      \"Hack Reactor\" =&gt; {\n        :location =&gt; \"SF\"\n      }\n}\n</code></pre>\n\n<p>I need to organize these hashes by location, like this:</p>\n\n<pre><code>{    \"NYC\"=&gt;[\"flatiron school bk\", \"flatiron school\", \"general assembly\"],\n     \"SF\"=&gt;[\"dev boot camp\", \"Hack Reactor\"],\n     \"Chicago\"=&gt;[\"dev boot camp chicago\"]}\n}\n</code></pre>\n"}, {"tags": ["ruby", "api", "soundcloud"], "comments": [{"owner": {"reputation": 5492, "user_id": 6083675, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/D2CgS.png?s=128&g=1", "display_name": "Laurel", "link": "https://stackoverflow.com/users/6083675/laurel"}, "edited": false, "score": 0, "creation_date": 1464219210, "post_id": 37448199, "comment_id": 62400241, "body": "I&#39;m voting to close this question as off-topic because Stack Overflow is not the place to report a bug in SounCloud&#39;s systems."}], "owner": {"reputation": 11, "user_id": 6383382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70842c3caea4192a2e03e098c696ca5e?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin Yeung", "link": "https://stackoverflow.com/users/6383382/kelvin-yeung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464212877, "creation_date": 1464212877, "question_id": 37448199, "link": "https://stackoverflow.com/questions/37448199/soundcloud-api-not-working", "title": "SoundCloud API not working", "body": "<p>I used to uploading my audio files to my SoundCloud Pro Unlimit subscription via API. It worked perfectly until last Saturday. Suddenly, it did not work since last Saturday. It always returns 500 Internal server error or 504 Gateway timeout. It would be great if SoundCloud can fix it as soon as practical.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1464211784, "post_id": 37447893, "comment_id": 62397742, "body": "Provide some samples, not just an explanation of the file naming scheme. Also, what do you expect to get as output? I&#39;d recommend reading &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Your code needs to be runnable and demonstrate the problem. I&#39;d recommend reducing it to the bare minimum necessary to demonstrate <i>only</i> what you&#39;re asking about. Showing the HTTP processing isn&#39;t helpful."}, {"owner": {"reputation": 53, "user_id": 3520757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65381f591675fcfd88e9b18b437fd018?s=128&d=identicon&r=PG&f=1", "display_name": "skreebidedeep", "link": "https://stackoverflow.com/users/3520757/skreebidedeep"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1464212494, "post_id": 37447893, "comment_id": 62398052, "body": "What sample are you looking for?  What the <code>#{id}</code> could be?  It&#39;s arbitrary really, it could be anything.  What I&#39;m concerned with is how to search through the folder within the parameters of <code>_1</code> to <code>_11</code> or <code>_01</code> to <code>_30</code>.  I could take out all the other code, and just include the line in question, but others might find some of it useful."}, {"owner": {"reputation": 53, "user_id": 3520757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65381f591675fcfd88e9b18b437fd018?s=128&d=identicon&r=PG&f=1", "display_name": "skreebidedeep", "link": "https://stackoverflow.com/users/3520757/skreebidedeep"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1464212537, "post_id": 37447893, "comment_id": 62398076, "body": "Perhaps some sort of regex might do the trick?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1464213949, "post_id": 37447893, "comment_id": 62398633, "body": "Some sort might do the trick, but you need to provide concrete examples of your filenames. Stack Overflow isn&#39;t here just to answer your question, it&#39;s to provide a lasting answer to others who are searching for a solution to the same question in the future. We need and expect certain things in the question to help them."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1464215733, "post_id": 37447893, "comment_id": 62399286, "body": "Are the images stored on the same server your app is running on?"}, {"owner": {"reputation": 53, "user_id": 3520757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65381f591675fcfd88e9b18b437fd018?s=128&d=identicon&r=PG&f=1", "display_name": "skreebidedeep", "link": "https://stackoverflow.com/users/3520757/skreebidedeep"}, "edited": false, "score": 0, "creation_date": 1464231655, "post_id": 37447893, "comment_id": 62403038, "body": "Tin Man - Wow, yes, apparently I goofed and left that part out of the original question.  The filenames are the master SKU number.  That&#39;s what I meant by it&#39;s really arbitrary what the <code>#{id}</code> in front of the <code>_20</code> is.  It would be something like this: <code>secondary_images&#47;5672432_01.jpg</code>.  Jordan - No, they are stored on a different server."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 3520757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65381f591675fcfd88e9b18b437fd018?s=128&d=identicon&r=PG&f=1", "display_name": "skreebidedeep", "link": "https://stackoverflow.com/users/3520757/skreebidedeep"}, "edited": false, "score": 0, "creation_date": 1464213559, "post_id": 37448304, "comment_id": 62398474, "body": "Thanks!  I&#39;ll try it out!"}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1464213384, "creation_date": 1464213384, "answer_id": 37448304, "question_id": 37447893, "link": "https://stackoverflow.com/questions/37447893/ruby-find-the-ending-of-a-filename-within-certain-parameters/37448304#37448304", "title": "Ruby - Find the ending of a filename within certain parameters", "body": "<p>It's not pretty, but you can use the following regex to match the corresponding digits.</p>\n\n<pre><code>/.*(([1-9])|(0[1-9])|([1-3]\\d))\\.jpg\\b/\n</code></pre>\n\n<p>Here's an example:</p>\n\n<p><a href=\"https://regex101.com/r/gJ2jU7/1\" rel=\"nofollow\">https://regex101.com/r/gJ2jU7/1</a></p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 3520757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65381f591675fcfd88e9b18b437fd018?s=128&d=identicon&r=PG&f=1", "display_name": "skreebidedeep", "link": "https://stackoverflow.com/users/3520757/skreebidedeep"}, "edited": false, "score": 0, "creation_date": 1464231710, "post_id": 37448460, "comment_id": 62403054, "body": "Thanks, I was looking at the <code>.basename</code> at work earlier, and thought it might be useful for what I was attempting.  I will definitely try this out tomorrow at work."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1464214094, "creation_date": 1464214094, "answer_id": 37448460, "question_id": 37447893, "link": "https://stackoverflow.com/questions/37447893/ruby-find-the-ending-of-a-filename-within-certain-parameters/37448460#37448460", "title": "Ruby - Find the ending of a filename within certain parameters", "body": "<p>It's really difficult to tell what you want, but perhaps it'll help to know that Ruby includes routines that make it easy to get at the filename in a path. Once you have that it's easy to extract parts of the name since it's string manipulation.</p>\n\n<pre><code>def get_image_num(fname)\n  File.basename(fname, File.extname(fname)).split('_').last\nend\n\n[\n  'secondary_images/foo_1.jpg',\n  'secondary_images/foo_11.jpg',\n  'secondary_images/foo_01.jpg',\n  'secondary_images/foo_30.jpg',\n  'secondary_images/foo_20.jpg'\n].map{ |s|\n  get_image_num(s)\n}\n# =&gt; [\"1\", \"11\", \"01\", \"30\", \"20\"]\n</code></pre>\n\n<p>If you need to get both the <code>id</code> value, and the file number, I'd do something like:</p>\n\n<pre><code>def get_image_num(fname)\n  File.basename(fname, File.extname(fname)).split('_')\nend\n\n[\n  'secondary_images/123_1.jpg',\n  'secondary_images/123_11.jpg',\n  'secondary_images/123_01.jpg',\n  'secondary_images/123_30.jpg',\n  'secondary_images/123_20.jpg'\n].map{ |s|\n  get_image_num(s)\n}\n# =&gt; [[\"123\", \"1\"], [\"123\", \"11\"], [\"123\", \"01\"], [\"123\", \"30\"], [\"123\", \"20\"]]\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 3520757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65381f591675fcfd88e9b18b437fd018?s=128&d=identicon&r=PG&f=1", "display_name": "skreebidedeep", "link": "https://stackoverflow.com/users/3520757/skreebidedeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1464214094, "creation_date": 1464211576, "last_edit_date": 1464212313, "question_id": 37447893, "link": "https://stackoverflow.com/questions/37447893/ruby-find-the-ending-of-a-filename-within-certain-parameters", "title": "Ruby - Find the ending of a filename within certain parameters", "body": "<p>I'm needing to get secondary images for a product (which could have up to 10 images), but having a bit of an issue.  Where the issue lies is <code>secondary_images/#{id}_20.jpg</code>.  The <code>_20</code> could be anything from <code>_1</code> to <code>_11</code> and <code>_01</code> to <code>_30</code>.  Unfortunately when the images were put into the system, they weren't 100% cohesive with the naming convention.  I'd change the names, but there are over 50,000 images.  What would be the proper way accomplish this?</p>\n\n<p>*This code does work if the <code>secondary_images/#{id}</code> does end in <code>_20</code>.</p>\n\n<pre><code>def image_url(type = nil)\n    no_image = type.nil? ? 'no-image-lg.png' : 'no-image.png'\n    return \"//img#{rand(0..9)}.foo.com/#{no_image}\" unless has_image?\n\n    require 'net/http'\n    id = sprintf('%07d', master_product_id)\n    url = if type == 'secondaries'\n        \"//img#{rand(0..9)}.foo.com/product_images/secondary_images/#{id}_20.jpg\"\n      elsif type == 'thumbnail'\n        \"//img#{rand(0..9)}.foo.com/product_images/thumbnails/#{id}.jpg\"\n      else\n        \"//img#{rand(0..9)}.foo.com/product_images/#{id}.jpg\"\n      end\n    url = URI.parse(URI.encode(url.to_s))\n    req = Net::HTTP.new(url.host, url.port)\n    res = req.request_head(url.path)\n\n    res.code == '200' ? url.to_s : \"//img#{rand(0..9)}.foo.com/#{no_image}\"\n  end\n\n  def images\n    images = {}\n\n    images['main'] = image_url\n    images['thumbnail'] = image_url 'thumbnail'\n    images['secondaries'] = image_url 'secondaries'\n    images.to_dot\n  end\n</code></pre>\n\n<p>Thanks guys!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2065, "user_id": 963080, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7f31d2d7ddcce97ad943689e6f09001d?s=128&d=identicon&r=PG", "display_name": "ctilley79", "link": "https://stackoverflow.com/users/963080/ctilley79"}, "edited": false, "score": 0, "creation_date": 1464212826, "post_id": 37447903, "comment_id": 62398187, "body": "One last question.  This works for NULL values but not empty strings.  What condition would test for empty strings as well as NULL? Should empty fields be NULL?"}, {"owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "reply_to_user": {"reputation": 2065, "user_id": 963080, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7f31d2d7ddcce97ad943689e6f09001d?s=128&d=identicon&r=PG", "display_name": "ctilley79", "link": "https://stackoverflow.com/users/963080/ctilley79"}, "edited": false, "score": 0, "creation_date": 1464212880, "post_id": 37447903, "comment_id": 62398208, "body": "You would check for &quot;blankness.&quot; I&#39;ll update my answer"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1464213095, "post_id": 37447903, "comment_id": 62398289, "body": "You could also send compact to the [first_name, last_name] array in case one of them is null."}], "tags": [], "owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "is_accepted": true, "score": 2, "last_activity_date": 1464213053, "last_edit_date": 1464213053, "creation_date": 1464211634, "answer_id": 37447903, "question_id": 37447849, "link": "https://stackoverflow.com/questions/37447849/rails-conditional-select-contents/37447903#37447903", "title": "Rails Conditional Select Contents", "body": "<p>You should just create a method in your <code>Payee</code> model that does this logic for you:</p>\n\n<pre><code># Payee.rb\n\n# I've extracted this into its own method\n# because you very well may need it later\ndef full_name\n  [first_name, last_name].join(\" \")\nend\n\n# This can be written more concisely, but I've\n# kept it as-is to allow for better readability\ndef display_name\n  if company_name.blank?\n    full_name\n  else\n    company_name\n  end\nend\n</code></pre>\n\n<p>Now, you can simply call <code>payee.display_name</code> and it will print the desired result.</p>\n"}], "owner": {"reputation": 2065, "user_id": 963080, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7f31d2d7ddcce97ad943689e6f09001d?s=128&d=identicon&r=PG", "display_name": "ctilley79", "link": "https://stackoverflow.com/users/963080/ctilley79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 0, "accepted_answer_id": 37447903, "answer_count": 1, "score": 1, "last_activity_date": 1464213053, "creation_date": 1464211339, "question_id": 37447849, "link": "https://stackoverflow.com/questions/37447849/rails-conditional-select-contents", "title": "Rails Conditional Select Contents", "body": "<p>I'm populating a select tag dynamically within my form.  The select tag is populated by a query to <code>Payee</code>.  I have a couple fields I'd like to display as the text value of the element.  However it must be done conditionally. For example.</p>\n\n<p>fields:</p>\n\n<pre><code>:company\n:first_name\n:last_name\n</code></pre>\n\n<p>I can concatenate those three in the text box like so:</p>\n\n<pre><code>f.select :payee_id, Payee.all.collect { |p| [p.company.to_s + \" \" + p.first_name.to_s + \" \" + p.last_name.to_s, p.id] }\n</code></pre>\n\n<p>The above doesn't work the way I desire. If <code>company</code> exists, I would like to leave out <code>first_name</code> and <code>last_name</code>.</p>\n\n<p>if <code>company</code> is blank, I'd like to display only <code>first_name</code> and <code>last_name</code></p>\n\n<p>currently if <code>company</code> and <code>first_name</code> exist it concatenates the two together, which I do not desire.</p>\n\n<p>I know how to query the database for each case separately, but I don't know how to  combine the results so the select tag will display correctly.</p>\n\n<p>Here's what I have of my helper so far. I know it's currently a mess, but I need help understanding the method to get this done.</p>\n\n<pre><code>def expense_payee_id_field(f)\n  @payee_with_company = Payee.where(\"company IS NOT NULL and company !='' \")\n  @payee_without_company = Payee.where(\"(first_name != '' or last_name != '') and company = '' \")\n\n  f.select :payee_id, Payee.all.collect { |p| [p.company.to_s + \" \" + p.first_name.to_s + \" \" + p.last_name.to_s, p.id] }\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 314, "user_id": 7138608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TJYvJEzvz2c/AAAAAAAAAAI/AAAAAAABSoc/EFDWgB2z430/photo.jpg?sz=128", "display_name": "David Weber", "link": "https://stackoverflow.com/users/7138608/david-weber"}, "is_accepted": false, "score": 0, "last_activity_date": 1491271165, "creation_date": 1491271165, "answer_id": 43197086, "question_id": 37447435, "link": "https://stackoverflow.com/questions/37447435/ruby-on-rails-fedex-gem-with-zebra-thermal-label-printer/43197086#43197086", "title": "Ruby on Rails FedEx gem with Zebra thermal label printer", "body": "<p>It sounds like the problem is with your printer scaling, not how the label is being generated. </p>\n"}], "owner": {"reputation": 274, "user_id": 3290465, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/647cbc7a98012c227127b19e5a5f634c?s=128&d=identicon&r=PG", "display_name": "asalgan", "link": "https://stackoverflow.com/users/3290465/asalgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 389, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491271165, "creation_date": 1464209631, "question_id": 37447435, "link": "https://stackoverflow.com/questions/37447435/ruby-on-rails-fedex-gem-with-zebra-thermal-label-printer", "title": "Ruby on Rails FedEx gem with Zebra thermal label printer", "body": "<p>I'm using this gem - <a href=\"https://github.com/jazminschroeder/fedex\" rel=\"nofollow\">https://github.com/jazminschroeder/fedex</a> - to connect to the FedEx shipping API. Right now I'm able to successfully create a shipping label as a full-page PDF, however I'm having issues getting it to create a label that's formatting to print with a Zebra ZP500 thermal printer for labels:</p>\n\n<pre><code>fedex.label( \n            ..., \n            :label_specifications =&gt; LABEL_SPECS \n           )\n\nLABEL_SPECS = { :label_format_type =&gt; \"COMMON2D\", :image_type =&gt; \"ZPLII\", :label_stock_type =&gt; \"STOCK_4X6\" }\n</code></pre>\n\n<p>I've tried basically all the combinations for image_type, label_format_type, and label_stock_type and yet they always come out formatted incorrectly or sized way too small on the thermal printer. I've also tried using the minimagick gem to save the PDF as an image and write it to a new file and I still keep getting the same result:</p>\n\n<pre><code>image = MiniMagick::Image.open(temp_file.path.to_s)\nimage.format \"png\"\nimage.density '300'\nimage.rotate '-90'\nimage.crop('1300X1820+90+90')\nimage.write (label.file_name.to_s + \".png\")\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>temp_file = Tempfile.new(label.file_name)\nfile = File.open(label.file_name)\ntemp_file.write file.read\n\nimage1 = MiniMagick::Tool::Convert.new do |convert|\n  convert.density '300'\n  convert.rotate '-90'\n  convert.background 'white'\n  convert.format 'png'\n  convert.crop('1300X1820+90+90')\n  convert &lt;&lt; temp_file.path\nend\n</code></pre>\n\n<p>Has anyone had success using this gem for FedEx shipping in combination with a thermal printer to print shipping labels? Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "spree", "solidus"], "comments": [{"owner": {"reputation": 1299, "user_id": 2318085, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SZYgr.jpg?s=128&g=1", "display_name": "Mohammad Shahadat Hossain", "link": "https://stackoverflow.com/users/2318085/mohammad-shahadat-hossain"}, "reply_to_user": {"reputation": 195, "user_id": 2623762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hcQjX.png?s=128&g=1", "display_name": "Ramkumar K R", "link": "https://stackoverflow.com/users/2623762/ramkumar-k-r"}, "edited": false, "score": 0, "creation_date": 1465108736, "post_id": 37447049, "comment_id": 62758686, "body": "i am not trying to add into stock. I am trying to add it into cart while checkout."}], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 7701170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/62cf04992702f699944cc3093090eab8?s=128&d=identicon&r=PG&f=1", "display_name": "pholls", "link": "https://stackoverflow.com/users/7701170/pholls"}, "is_accepted": false, "score": 0, "last_activity_date": 1502382976, "creation_date": 1502382976, "answer_id": 45619135, "question_id": 37447049, "link": "https://stackoverflow.com/questions/37447049/how-to-make-spree-promotional-rule-work/45619135#45619135", "title": "How to make Spree promotional rule work?", "body": "<p>It looks like you set the rule to only activate if the order already contains the Free Gift. Try eliminating that last condition (\"Order includes specified product(s)\") and seeing if that works.</p>\n"}], "owner": {"reputation": 1299, "user_id": 2318085, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SZYgr.jpg?s=128&g=1", "display_name": "Mohammad Shahadat Hossain", "link": "https://stackoverflow.com/users/2318085/mohammad-shahadat-hossain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 539, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502382976, "creation_date": 1464208199, "question_id": 37447049, "link": "https://stackoverflow.com/questions/37447049/how-to-make-spree-promotional-rule-work", "title": "How to make Spree promotional rule work?", "body": "<p>I want to create a promotional-rule in the spree in which Free gift added to the cart for the first-time buyer. It means if anybody purchase from my shop as the first-time buyer he will get a specific product as a gift and it will be added to the checkout basket. I try to deploy it from promotion section of spree admin panel. But while I tried to test it as the first-time buyer it doesn't work. The gift item is not added to the cart. Please help me to activate the promotional rule.Thanks   </p>\n\n<p><a href=\"https://i.stack.imgur.com/ykKac.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ykKac.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activeadmin"], "answers": [{"comments": [{"owner": {"reputation": 10614, "user_id": 1778367, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a62f53d91ff3848fc9ca36aafce63be1?s=128&d=identicon&r=PG", "display_name": "supersize", "link": "https://stackoverflow.com/users/1778367/supersize"}, "edited": false, "score": 0, "creation_date": 1464211943, "post_id": 37447216, "comment_id": 62397805, "body": "this worked, thank you! It&#39;s a shame I couldn&#39;t find it in the ActiveAdmin docs."}], "tags": [], "owner": {"reputation": 2788, "user_id": 4152876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d538506cb7d350250906243645c28d4?s=128&d=identicon&r=PG", "display_name": "Timo Schilling", "link": "https://stackoverflow.com/users/4152876/timo-schilling"}, "is_accepted": true, "score": 9, "last_activity_date": 1464208828, "creation_date": 1464208828, "answer_id": 37447216, "question_id": 37446896, "link": "https://stackoverflow.com/questions/37446896/activeadmin-renders-datatype-text-as-textarea-in-its-forms/37447216#37447216", "title": "ActiveAdmin renders datatype text as textarea in its forms", "body": "<pre><code>form do |f|\n  inputs do\n    f.input :name, as: :string\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 10614, "user_id": 1778367, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a62f53d91ff3848fc9ca36aafce63be1?s=128&d=identicon&r=PG", "display_name": "supersize", "link": "https://stackoverflow.com/users/1778367/supersize"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3477, "favorite_count": 0, "accepted_answer_id": 37447216, "answer_count": 1, "score": 3, "last_activity_date": 1464208828, "creation_date": 1464207632, "question_id": 37446896, "link": "https://stackoverflow.com/questions/37446896/activeadmin-renders-datatype-text-as-textarea-in-its-forms", "title": "ActiveAdmin renders datatype text as textarea in its forms", "body": "<p>My model consists of a couple rows with datatype <code>text</code>. Unfortunately <a href=\"http://activeadmin.info/\" rel=\"nofollow\">ActiveAdmin</a> seem to render these as a <code>&lt;textarea&gt;</code>. I would like to have them as an <code>&lt;input type=\"text\"&gt;</code> but I cannot make it to work. My attempt so far:</p>\n\n<pre><code>form do |f|\n  inputs do\n    f.input :name, as: :text\n    f.input :name, input_html: { type: \"text\" }\n  end \nend\n</code></pre>\n\n<p>Any idea how I can render datatype <code>text</code> row as a standard input, not as a textarea in ActiveAdmin?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "legend", "chartkick"], "answers": [{"comments": [{"owner": {"reputation": 474, "user_id": 1539309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a52b9fa0664ceb13c726c699f118606a?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/1539309/jason"}, "edited": false, "score": 0, "creation_date": 1501287266, "post_id": 40318429, "comment_id": 77729248, "body": "This only puts the legend at the top, it does not lay it out vertically... which the OP already said they had accomplished."}], "tags": [], "owner": {"reputation": 2213, "user_id": 653116, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e2a963eac3ca6834296281cc905125c9?s=128&d=identicon&r=PG", "display_name": "jayesh", "link": "https://stackoverflow.com/users/653116/jayesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1477739003, "creation_date": 1477739003, "answer_id": 40318429, "question_id": 37446493, "link": "https://stackoverflow.com/questions/37446493/chartkick-gem-display-legend-vertically-on-top/40318429#40318429", "title": "Chartkick gem: display legend vertically on top", "body": "<p>Please use this option for legend vertically on top</p>\n\n<pre><code>&lt;%= pie_chart @job_acceptance , library: {legend: {position: \"top\"}}%&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6383049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777925f43ac0dfd472b68d62d7563da6?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/6383049/marcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 899, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477739003, "creation_date": 1464206243, "question_id": 37446493, "link": "https://stackoverflow.com/questions/37446493/chartkick-gem-display-legend-vertically-on-top", "title": "Chartkick gem: display legend vertically on top", "body": "<p>I am using the ChartKick Ruby gem, and am trying to display the legend at the top (which I manage) with the items vertically (which I don't manage).</p>\n\n<p>The legend keeps being displayed horizontally which is a problem for mobile devices.</p>\n\n<p>My code:</p>\n\n<pre><code>&lt;script&gt;\n    var Chartkick = {\"language\": \"pt\"};\n&lt;/script&gt;\n&lt;%= javascript_include_tag \"//www.google.com/jsapi\", \"chartkick\" %&gt;\n&lt;%= bar_chart metric, library: {colors: colors, backgroundColor: \"#ffffff\", hAxis:{title:hAxisTitle, format: '##########'}, vAxis:{title:vAxisTitle}, isStacked: true, legend: {layout: \"vertical\", position: \"top\"}, }, height: '200px' %&gt;\n</code></pre>\n\n<p>The layout:vertical option simply doesn't seem to work :-(</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1464208946, "post_id": 37446479, "comment_id": 62396475, "body": "Starting with Ruby 2.3, you can also use <code>select(&amp;:positive)</code> instead of <code>select { |x| x &gt; 0 }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 5231062, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/wxAd0.jpg?s=128&g=1", "display_name": "Beth Knight", "link": "https://stackoverflow.com/users/5231062/beth-knight"}, "edited": false, "score": 0, "creation_date": 1464207345, "post_id": 37446641, "comment_id": 62395583, "body": "Very elegant!! Thank you!"}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 3, "last_activity_date": 1464206721, "creation_date": 1464206721, "answer_id": 37446641, "question_id": 37446479, "link": "https://stackoverflow.com/questions/37446479/protect-against-nil-in-ruby/37446641#37446641", "title": "Protect against Nil in Ruby", "body": "<p>There's no need to do both <code>select</code> and <code>reduce</code>. You can check the value of <code>x</code> in your <code>reduce</code> block: </p>\n\n<pre><code>def positive_sum(arr)\n  arr.reduce(0) do |sum, x|\n    if x &gt; 0\n      sum + x\n    else\n      sum\n    end\n  end\nend\n\npositive_sum([10, -3, 20, -8])\n# =&gt; 30\n\npositive_sum([])\n# =&gt; 0\n\npositive_sum([-1, -5])\n# =&gt; 0\n</code></pre>\n\n<p>Of course, you can make this a oneliner if you prefer:</p>\n\n<pre><code>def positive_sum(arr)\n  arr.reduce(0) {|sum, x| x &gt; 0 ? sum + x : sum }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1910, "user_id": 676788, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/16dfcfaa3f6405e9572cea3f88a68c56?s=128&d=identicon&r=PG", "display_name": "Nafaa Boutefer", "link": "https://stackoverflow.com/users/676788/nafaa-boutefer"}, "is_accepted": false, "score": 1, "last_activity_date": 1464207056, "creation_date": 1464207056, "answer_id": 37446731, "question_id": 37446479, "link": "https://stackoverflow.com/questions/37446479/protect-against-nil-in-ruby/37446731#37446731", "title": "Protect against Nil in Ruby", "body": "<p>In ruby 2.3.0 the method <a href=\"http://ruby-doc.org/core-2.3.0/Numeric.html#method-i-positive-3F\" rel=\"nofollow\">positive?</a> has been introduced, with <code>select</code> and <code>map</code>.</p>\n\n<pre><code>def positive_sum(array)\n    return 0 if array.nil? || array.empty? \n    array.select(&amp;:positive?).inject(0) { |sum, num| sum + num } \nend\n</code></pre>\n\n<p>if you're not using Ruby 2.3.0+ you can use this</p>\n\n<pre><code>def positive_sum(array)\n    return 0 if array.nil? || array.empty? \n    array.inject(0) { |sum, num| num &gt; 0 ? sum + num : sum } \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 4, "last_activity_date": 1464207131, "creation_date": 1464207131, "answer_id": 37446750, "question_id": 37446479, "link": "https://stackoverflow.com/questions/37446479/protect-against-nil-in-ruby/37446750#37446750", "title": "Protect against Nil in Ruby", "body": "<p>Your solution is pretty elegant already as it captures the essence of what you want to achieve and is pretty readable.</p>\n\n<p>The one missing piece is that you can define a starting value to your reduce call and pass the operation as a block (which is the more common style anyway). When passing a starting value, it will be set as <code>sum</code> on the first call of the block. If you omit this value, <code>sum</code> will be set to the first value of the array and <code>x</code> to the second one.</p>\n\n<p>Thus, the full code can look like this:</p>\n\n<pre><code>arr.select { |x| x &gt; 0 }.reduce(0, &amp;:+)\n</code></pre>\n\n<p>This is the short form of</p>\n\n<pre><code>arr.select { |x| x &gt; 0 }.reduce(0) { |sum, x| sum + x }\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 5231062, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/wxAd0.jpg?s=128&g=1", "display_name": "Beth Knight", "link": "https://stackoverflow.com/users/5231062/beth-knight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 37446641, "answer_count": 3, "score": -1, "last_activity_date": 1464207131, "creation_date": 1464206169, "question_id": 37446479, "link": "https://stackoverflow.com/questions/37446479/protect-against-nil-in-ruby", "title": "Protect against Nil in Ruby", "body": "<p>I'm doing a codewar where you need to find the sum of positive numbers in an array. I was able to find a solution except for when the test arrays are empty or all the elements are negative. How to I return 0 instead of nil?</p>\n\n<p>Here is my solution...</p>\n\n<pre><code>def positive_sum(arr)\n\n    arr.select {|x| x &gt; 0}.reduce :+\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "uri", "open-uri"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464205537, "post_id": 37446259, "comment_id": 62394700, "body": "Square brackets aren&#39;t allowed in a URI despite how some people insist on putting them in there. Try replacing them with <code>%5b</code> and <code>%5d</code> respectively."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1167, "user_id": 4817370, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh5.googleusercontent.com/-1bUMePVT9q8/AAAAAAAAAAI/AAAAAAAAAB4/OPw09oGfIwI/photo.jpg?sz=128", "display_name": "Matthieu Raynaud de Fitte", "link": "https://stackoverflow.com/users/4817370/matthieu-raynaud-de-fitte"}, "edited": false, "score": 0, "creation_date": 1464209682, "post_id": 37446384, "comment_id": 62396858, "body": "It makes the URL conform to proper standards. Browsers, as you&#39;ve observed, are extremely lax about what can go in the path and query components."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1464205779, "creation_date": 1464205779, "answer_id": 37446384, "question_id": 37446259, "link": "https://stackoverflow.com/questions/37446259/uriinvalidurierror-while-trying-to-download-by-url-with-square-brackets/37446384#37446384", "title": "URI::InvalidURIError while trying to download by URL with square brackets", "body": "<p>Here's a sort of hack way of dealing with the invalid characters in the URL:</p>\n\n<pre><code>u = 'http://z.mfcdn.net/store/manga/9/14-116.0/compressed/Bleach-14-116[manga-rain]._manga_rain_bleach_ch116_01.jpg'\nfixed = u.gsub(/[\\[\\]]/) { '%%%s' % $&amp;.ord.to_s(16) }\n\nopen(fixed)\n</code></pre>\n\n<p>That should deal with this particular problem.</p>\n"}], "owner": {"reputation": 1167, "user_id": 4817370, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh5.googleusercontent.com/-1bUMePVT9q8/AAAAAAAAAAI/AAAAAAAAAB4/OPw09oGfIwI/photo.jpg?sz=128", "display_name": "Matthieu Raynaud de Fitte", "link": "https://stackoverflow.com/users/4817370/matthieu-raynaud-de-fitte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 1, "accepted_answer_id": 37446384, "answer_count": 1, "score": 3, "last_activity_date": 1512251859, "creation_date": 1464205348, "last_edit_date": 1512251859, "question_id": 37446259, "link": "https://stackoverflow.com/questions/37446259/uriinvalidurierror-while-trying-to-download-by-url-with-square-brackets", "title": "URI::InvalidURIError while trying to download by URL with square brackets", "body": "<p>I am currently trying to download the picture of this link:</p>\n\n<pre><code>http://z.mfcdn.net/store/manga/9/14-116.0/compressed/Bleach-14-116[manga-rain]._manga_rain_bleach_ch116_01.jpg\n</code></pre>\n\n<p>This generates a <code>URI::InvalidURIError</code> exception.</p>\n\n<p>After reading around on Stack Overflow, I've tried ( but failed ):</p>\n\n<pre><code>uri = URI.parse(URI.encode(url.strip))\n\nsafeurl = URI.encode(url.strip)\n</code></pre>\n\n<p>I do know the issue has something to do with web browsers being more \"friendly\" but I do not know how to get my application to do the same.</p>\n"}, {"tags": ["ruby", "http", "file-upload", "tcp", "http-headers"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1464204957, "post_id": 37446042, "comment_id": 62394406, "body": "Your ruby code connects to localhost, but generated HTTP request seems not to match it."}, {"owner": {"reputation": 391, "user_id": 4095988, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2fd8409ac1016c94294bfe616542d4c7?s=128&d=identicon&r=PG&f=1", "display_name": "sparks", "link": "https://stackoverflow.com/users/4095988/sparks"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1464205507, "post_id": 37446042, "comment_id": 62394683, "body": "The postman is connect to my deployed app(remote server).I sent a file with CURL to my localhost though and it works fine. The only issue is when i use the script i created whether i send to localhost or remote server i get <code>undefined</code> request object."}], "answers": [{"tags": [], "owner": {"reputation": 391, "user_id": 4095988, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2fd8409ac1016c94294bfe616542d4c7?s=128&d=identicon&r=PG&f=1", "display_name": "sparks", "link": "https://stackoverflow.com/users/4095988/sparks"}, "is_accepted": false, "score": 0, "last_activity_date": 1464208140, "creation_date": 1464208140, "answer_id": 37447035, "question_id": 37446042, "link": "https://stackoverflow.com/questions/37446042/how-to-properly-format-http-multipart-form-data-request-to-upload-file-to-the-se/37447035#37447035", "title": "How to properly format Http multipart/form-data request to upload file to the server", "body": "<p>I was not passing <code>Content-Length: length</code> Final version that works is this one.</p>\n\n<pre><code>require 'socket'   \n\nhost = \"myapp.herokuapp.com\"\nport = 80\n\nclient = TCPSocket.open(host, port)\n\nclient.write(\"POST /api/binary HTTP/1.1\\r\\n\")\nclient.write(\"Host: #{host}\\r\\n\")\nclient.write (\"Accept: */*\\r\\n\")\nclient.write (\"Content-Type: multipart/form-data; boundary=AaB03x\\r\\n\")\n\nbody = \"--AaB03x\\r\\n\"\nbody &lt;&lt; \"Content-Disposition: form-data; name='datafile'; filename='cam.jpg'\\r\\n\"\n\nbody &lt;&lt; \"Content-Type: image/jpeg\\r\\n\"\nbody &lt;&lt; \"\\r\\n\"\ndata = File.open(\"./pic.jpg\", \"rb\") {|io| io.read}\n\nbody &lt;&lt; data\nbody &lt;&lt; \"\\r\\n\"\n\nbody &lt;&lt; \"--AaB03x--\\r\\n\"\n\nclient.print \"Content-Length: #{body.bytesize}\\r\\n\"\n\nclient.print \"\\r\\n\"\n\nclient.print body\n\nclient.close\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 4095988, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2fd8409ac1016c94294bfe616542d4c7?s=128&d=identicon&r=PG&f=1", "display_name": "sparks", "link": "https://stackoverflow.com/users/4095988/sparks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464208140, "creation_date": 1464204615, "question_id": 37446042, "link": "https://stackoverflow.com/questions/37446042/how-to-properly-format-http-multipart-form-data-request-to-upload-file-to-the-se", "title": "How to properly format Http multipart/form-data request to upload file to the server", "body": "<p>I have a simple node js server/app that receive files. I have tried uploading jpeg files with CURL and works perfectly.I have tried with <a href=\"https://www.getpostman.com/\" rel=\"nofollow\">postman</a> also works fine.But when i try to upload jpeg with simple ruby script through Tcp socket it doesn't work.The request is received by the server but with no file object.In Node js server route i am debugging the request like so <code>console.log(request.body);</code> and this returns <code>undefined</code>. With Curl and postman i get a proper request object(file).This seems like my http request in the ruby script is not formatted properly, Can anybody point out what am i doing wrong here?Thank you in advance.Here is my ruby script.</p>\n\n<pre><code>require 'socket'   \n\nhost = \"127.0.0.1\"\nport = 8080\n\nclient = TCPSocket.open(host, port)\n\nclient.write(\"POST /api/binary HTTP/1.1\\r\\n\")\nclient.write(\"Host: 127.0.0.1\\r\\n\")\nclient.write (\"Accept: */* \\r\\n\")\nclient.write (\"Content-Type: multipart/form-data; boundary=AaB03x\\r\\n\")\nclient.write (\"\\r\\n\")\nclient.write(\"AaB03x\"+ \"\\n\" + \"Content-Disposition: form-data; name='datafile'; filename='cam.jpg' \\n Content-Type: image/jpeg \\r\\n\")\n\ndata = File.open(\"./dom.jpg\", \"rb\") {|io| io.read}\nclient.write (data)\nclient.write(\"boundary=AaB03x\\r\\n\")\nclient.write (\"\\r\\n\") \nclient.close\n</code></pre>\n\n<p><strong>Generated code snipet from postman</strong></p>\n\n<pre><code>POST /api/binary HTTP/1.1\nHost: myapp.herokuapp.com\nCache-Control: no-cache\nPostman-Token: c15a79a2-3a4b-0555-a876-9032afeab5de\nContent-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW\n\n----WebKitFormBoundary7MA4YWxkTrZu0gW\nContent-Disposition: form-data; name=\"\"; filename=\"\"\nContent-Type: \n\n\n----WebKitFormBoundary7MA4YWxkTrZu0gW\n</code></pre>\n"}, {"tags": ["ruby", "caching", "web"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1464204825, "post_id": 37445936, "comment_id": 62394337, "body": "May be this will help: <a href=\"http://stackoverflow.com/questions/9097074/is-there-a-ruby-gem-that-does-diff-between-html-documents\">How to compare two HTML page contents efficiently</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464206019, "post_id": 37445936, "comment_id": 62394921, "body": "You mean like <code>wget -m</code>? That plus <code>git</code> could go a long way towards what you want here, and it&#39;ll do all sorts of fun stuff like show diffs for free."}], "owner": {"reputation": 1269, "user_id": 1035783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08d39c460de9f8170855e3bd9cb20aea?s=128&d=identicon&r=PG", "display_name": "chrisallick", "link": "https://stackoverflow.com/users/1035783/chrisallick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1464204219, "creation_date": 1464204219, "question_id": 37445936, "link": "https://stackoverflow.com/questions/37445936/caching-a-website-in-ruby-then-checking-for-changes-later-diffing", "title": "Caching a website in Ruby, then checking for changes later? &quot;Diffing?&quot;", "body": "<p>I have, what I thought, was a pretty simple problem that someone would have created a gem for, but I am having a hard time searching for the silver bullet.</p>\n\n<p>1) I'd like take a URL\n2) create an md5, or \"snapshot\" of the site contents\n3) then at a later date, see if the site has changed.</p>\n\n<p>Is downloading the site and diffing the files the best way to do that? is there a way to serialize or encapsulate the site in a data object some how?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "terminal"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1464204073, "post_id": 37445820, "comment_id": 62393912, "body": "Add your <code>routes.rb</code> file here. PS. Reading the stacktrace usually helps identifying problems."}, {"owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1464205799, "post_id": 37445820, "comment_id": 62394818, "body": "And this key line from the stacktrace is how @Uzbekjon knew to mention that &quot;/Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gem&zwnj;&#8203;s/activesupport-4.2.&zwnj;&#8203;6/lib/active_support&zwnj;&#8203;/dependencies.rb:268&zwnj;&#8203;:in `load&#39;: /Users/julian/Desktop/forum/config/routes.rb:12: syntax error, unexpected end-of-input, expecting keyword_end (SyntaxError)&quot;"}, {"owner": {"reputation": 1, "user_id": 6305145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac0fe952314d29fc9670f1e81f866036?s=128&d=identicon&r=PG&f=1", "display_name": "RailsNewbie", "link": "https://stackoverflow.com/users/6305145/railsnewbie"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1464237336, "post_id": 37445820, "comment_id": 62404457, "body": "thank you so much @Uzbekjon for bring up routes.rb to my attention. I forgot to end the command after member do   \t\tget &quot;like&quot;, to: &quot;posts#upvote&quot;   \t\tget &quot;dislike&quot;, to: &quot;posts#downvote&quot;"}, {"owner": {"reputation": 1, "user_id": 6305145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac0fe952314d29fc9670f1e81f866036?s=128&d=identicon&r=PG&f=1", "display_name": "RailsNewbie", "link": "https://stackoverflow.com/users/6305145/railsnewbie"}, "reply_to_user": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "edited": false, "score": 0, "creation_date": 1464237355, "post_id": 37445820, "comment_id": 62404465, "body": "@msergeant thank you too for pointing that out"}], "answers": [{"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 1, "last_activity_date": 1464203959, "creation_date": 1464203959, "answer_id": 37445871, "question_id": 37445820, "link": "https://stackoverflow.com/questions/37445820/rails-s-not-working-when-i-enter-it-on-terminal/37445871#37445871", "title": "rails s not working when I enter it on terminal", "body": "<p>Most probably you forgot an <code>end</code> keyword in your <code>routes.rb</code> file.</p>\n"}], "owner": {"reputation": 1, "user_id": 6305145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac0fe952314d29fc9670f1e81f866036?s=128&d=identicon&r=PG&f=1", "display_name": "RailsNewbie", "link": "https://stackoverflow.com/users/6305145/railsnewbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1464847530, "answer_count": 1, "score": -4, "last_activity_date": 1464204003, "creation_date": 1464203798, "last_edit_date": 1464204003, "question_id": 37445820, "link": "https://stackoverflow.com/questions/37445820/rails-s-not-working-when-i-enter-it-on-terminal", "closed_reason": "Not suitable for this site", "title": "rails s not working when I enter it on terminal", "body": "<p>when I try to input rails s on my terminal this is what i get</p>\n\n<pre><code>=&gt; Booting WEBrick\n=&gt; Rails 4.2.6 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Ctrl-C to shutdown server\n[Simple Form] Simple Form is not configured in the application and will use the default values. Use `rails generate simple_form:install` to generate the Simple Form configuration.\nExiting\n/Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:268:in `load': /Users/julian/Desktop/forum/config/routes.rb:12: syntax error, unexpected end-of-input, expecting keyword_end (SyntaxError)\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:268:in `block in load'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:240:in `load_dependency'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:268:in `load'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/application/routes_reloader.rb:40:in `each'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/application/routes_reloader.rb:40:in `load_paths'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/application/routes_reloader.rb:16:in `reload!'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/application/routes_reloader.rb:26:in `block in updater'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/file_update_checker.rb:75:in `execute'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/application/routes_reloader.rb:27:in `updater'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/application/finisher.rb:69:in `block in &lt;module:Finisher&gt;'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/initializable.rb:30:in `instance_exec'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/initializable.rb:30:in `run'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:228:in `block in tsort_each'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:431:in `each_strongly_connected_component_from'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:349:in `block in each_strongly_connected_component'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:347:in `each'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:347:in `call'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:347:in `each_strongly_connected_component'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:226:in `tsort_each'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:205:in `tsort_each'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/initializable.rb:54:in `run_initializers'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/application.rb:352:in `initialize!'\n    from /Users/julian/Desktop/forum/config/environment.rb:5:in `&lt;top (required)&gt;'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `require'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `block in require'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:240:in `load_dependency'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `require'\n    from /Users/julian/Desktop/forum/config.ru:3:in `block in &lt;main&gt;'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `instance_eval'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n    from /Users/julian/Desktop/forum/config.ru:in `new'\n    from /Users/julian/Desktop/forum/config.ru:in `&lt;main&gt;'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `eval'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `new_from_string'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rack-1.6.4/lib/rack/builder.rb:40:in `parse_file'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rack-1.6.4/lib/rack/server.rb:299:in `build_app_and_options_from_config'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rack-1.6.4/lib/rack/server.rb:208:in `app'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/commands/server.rb:61:in `app'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/commands/server.rb:139:in `log_to_stdout'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/commands/server.rb:78:in `start'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:75:in `tap'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:75:in `server'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/railties-4.2.6/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from /Users/julian/Desktop/forum/bin/rails:9:in `require'\n    from /Users/julian/Desktop/forum/bin/rails:9:in `&lt;top (required)&gt;'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/spring-1.7.1/lib/spring/client/rails.rb:28:in `load'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/spring-1.7.1/lib/spring/client/rails.rb:28:in `call'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/spring-1.7.1/lib/spring/client/command.rb:7:in `call'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/spring-1.7.1/lib/spring/client.rb:30:in `run'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/spring-1.7.1/bin/spring:49:in `&lt;top (required)&gt;'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/spring-1.7.1/lib/spring/binstub.rb:11:in `load'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/spring-1.7.1/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/julian/.rbenv/versions/2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/julian/Desktop/forum/bin/spring:13:in `&lt;top (required)&gt;'\n    from bin/rails:3:in `load'\n    from bin/rails:3:in `&lt;main&gt;'\nJulians-MacBook:forum julian$ \n</code></pre>\n\n<p>How can I fix this.</p>\n"}, {"tags": ["ruby", "security", "user-input", "liquid", "unmarshalling"], "answers": [{"comments": [{"owner": {"reputation": 1679, "user_id": 1541915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b7ee9fa5ae48388184039acee0893a2?s=128&d=identicon&r=PG", "display_name": "bennick", "link": "https://stackoverflow.com/users/1541915/bennick"}, "edited": false, "score": 0, "creation_date": 1464203330, "post_id": 37445651, "comment_id": 62393485, "body": "Thanks. Do you have another option for me to accomplish the above?"}, {"owner": {"reputation": 29080, "user_id": 1242778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AKoAV.jpg?s=128&g=1", "display_name": "Agis", "link": "https://stackoverflow.com/users/1242778/agis"}, "reply_to_user": {"reputation": 1679, "user_id": 1541915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b7ee9fa5ae48388184039acee0893a2?s=128&d=identicon&r=PG", "display_name": "bennick", "link": "https://stackoverflow.com/users/1541915/bennick"}, "edited": false, "score": 0, "creation_date": 1464203437, "post_id": 37445651, "comment_id": 62393546, "body": "@bennick Sorry, missed my last line. Added it now."}, {"owner": {"reputation": 1679, "user_id": 1541915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b7ee9fa5ae48388184039acee0893a2?s=128&d=identicon&r=PG", "display_name": "bennick", "link": "https://stackoverflow.com/users/1541915/bennick"}, "edited": false, "score": 0, "creation_date": 1464203637, "post_id": 37445651, "comment_id": 62393670, "body": "Okay cool. I was just not sure if any remote code exception could &quot;leak&quot; though the Liquid::Template object during the Marshal.load process."}, {"owner": {"reputation": 29080, "user_id": 1242778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AKoAV.jpg?s=128&g=1", "display_name": "Agis", "link": "https://stackoverflow.com/users/1242778/agis"}, "reply_to_user": {"reputation": 1679, "user_id": 1541915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b7ee9fa5ae48388184039acee0893a2?s=128&d=identicon&r=PG", "display_name": "bennick", "link": "https://stackoverflow.com/users/1541915/bennick"}, "edited": false, "score": 0, "creation_date": 1464203715, "post_id": 37445651, "comment_id": 62393712, "body": "@bennick If you give malicious input to Liquid, its output is non-malicious so what you pass to <code>Marshal.load</code> is not malicious. However, I don&#39;t see the point of serialization/deserialization."}, {"owner": {"reputation": 29080, "user_id": 1242778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AKoAV.jpg?s=128&g=1", "display_name": "Agis", "link": "https://stackoverflow.com/users/1242778/agis"}, "reply_to_user": {"reputation": 1679, "user_id": 1541915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b7ee9fa5ae48388184039acee0893a2?s=128&d=identicon&r=PG", "display_name": "bennick", "link": "https://stackoverflow.com/users/1541915/bennick"}, "edited": false, "score": 0, "creation_date": 1464203972, "post_id": 37445651, "comment_id": 62393836, "body": "@bennick I&#39;ve added a comment regarding your implementation generally."}, {"owner": {"reputation": 1679, "user_id": 1541915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b7ee9fa5ae48388184039acee0893a2?s=128&d=identicon&r=PG", "display_name": "bennick", "link": "https://stackoverflow.com/users/1541915/bennick"}, "edited": false, "score": 0, "creation_date": 1464205971, "post_id": 37445651, "comment_id": 62394894, "body": "I was going off of this old article that show a speed improvement over the Liquid parse. <a href=\"https://web.archive.org/web/20130221045519/http://cjohansen.no/en/rails/liquid_email_templates_in_rails\" rel=\"nofollow noreferrer\">web.archive.org/web/20130221045519/http://cjohansen.no/en/ra&zwnj;&#8203;ils/&hellip;</a>"}, {"owner": {"reputation": 1679, "user_id": 1541915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b7ee9fa5ae48388184039acee0893a2?s=128&d=identicon&r=PG", "display_name": "bennick", "link": "https://stackoverflow.com/users/1541915/bennick"}, "edited": false, "score": 0, "creation_date": 1464206007, "post_id": 37445651, "comment_id": 62394915, "body": "After running it I get user     system      total        real deserialize:   1.440000   0.000000   1.440000 (  1.445489) parse:   1.800000   0.010000   1.810000 (  1.810491)"}, {"owner": {"reputation": 29080, "user_id": 1242778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AKoAV.jpg?s=128&g=1", "display_name": "Agis", "link": "https://stackoverflow.com/users/1242778/agis"}, "reply_to_user": {"reputation": 1679, "user_id": 1541915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b7ee9fa5ae48388184039acee0893a2?s=128&d=identicon&r=PG", "display_name": "bennick", "link": "https://stackoverflow.com/users/1541915/bennick"}, "edited": false, "score": 0, "creation_date": 1464206215, "post_id": 37445651, "comment_id": 62395015, "body": "Sorry I was not clear. I mean, why not save the parsed template into the db instead of saving it serialized?"}, {"owner": {"reputation": 1679, "user_id": 1541915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b7ee9fa5ae48388184039acee0893a2?s=128&d=identicon&r=PG", "display_name": "bennick", "link": "https://stackoverflow.com/users/1541915/bennick"}, "edited": false, "score": 0, "creation_date": 1464206964, "post_id": 37445651, "comment_id": 62395396, "body": "I&#39;m not sure how to do that with Liquid::Template. I figured I&#39;d need to serialize that object in order to save it to the DB."}, {"owner": {"reputation": 29080, "user_id": 1242778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AKoAV.jpg?s=128&g=1", "display_name": "Agis", "link": "https://stackoverflow.com/users/1242778/agis"}, "reply_to_user": {"reputation": 1679, "user_id": 1541915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b7ee9fa5ae48388184039acee0893a2?s=128&d=identicon&r=PG", "display_name": "bennick", "link": "https://stackoverflow.com/users/1541915/bennick"}, "edited": false, "score": 0, "creation_date": 1464207241, "post_id": 37445651, "comment_id": 62395534, "body": "You can somehow just get the string template (maybe call <code>#to_s</code>?) and just save this straight to the DB. However I don&#39;t find this a good idea and I don&#39;t think it&#39;s worth it."}, {"owner": {"reputation": 1679, "user_id": 1541915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b7ee9fa5ae48388184039acee0893a2?s=128&d=identicon&r=PG", "display_name": "bennick", "link": "https://stackoverflow.com/users/1541915/bennick"}, "reply_to_user": {"reputation": 29080, "user_id": 1242778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AKoAV.jpg?s=128&g=1", "display_name": "Agis", "link": "https://stackoverflow.com/users/1242778/agis"}, "edited": false, "score": 0, "creation_date": 1464207336, "post_id": 37445651, "comment_id": 62395578, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/112960/discussion-between-bennick-and-agis\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 29080, "user_id": 1242778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AKoAV.jpg?s=128&g=1", "display_name": "Agis", "link": "https://stackoverflow.com/users/1242778/agis"}, "is_accepted": true, "score": 1, "last_activity_date": 1464203948, "last_edit_date": 1464203948, "creation_date": 1464203229, "answer_id": 37445651, "question_id": 37445584, "link": "https://stackoverflow.com/questions/37445584/security-concerns-with-db-backed-liquid-templates-and-marshal-load/37445651#37445651", "title": "Security concerns with DB backed Liquid Templates and Marshal.load", "body": "<p>Theoritically there <em>is</em> a security issue in your implementation.</p>\n\n<p>From the <a href=\"http://ruby-doc.org/core-2.3.0/Marshal.html\" rel=\"nofollow\">Ruby documentation</a>:</p>\n\n<blockquote>\n  <p>By design, ::load can deserialize almost any class loaded into the\n  Ruby process. In many cases this can lead to remote code execution if\n  the Marshal data is loaded from an untrusted source.</p>\n  \n  <p>As a result, ::load is not suitable as a general purpose serialization\n  format and you should never unmarshal user supplied input or other\n  untrusted data.</p>\n  \n  <p>If you need to deserialize untrusted data, use JSON or another\n  serialization format that is only able to load simple, \u2018primitive\u2019\n  types such as String, Array, Hash, etc. Never allow user input to\n  specify arbitrary types to deserialize into.</p>\n</blockquote>\n\n<p>Practically though, in your case any malicious input is taken care of by Liquid, so you should be just fine.</p>\n\n<p>That said, I don't really see any reason for serializing/deserializing at all since your templates are just plain text. There is even a performance penalty when serializing/deserializing.</p>\n"}], "owner": {"reputation": 1679, "user_id": 1541915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b7ee9fa5ae48388184039acee0893a2?s=128&d=identicon&r=PG", "display_name": "bennick", "link": "https://stackoverflow.com/users/1541915/bennick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 37445651, "answer_count": 1, "score": 0, "last_activity_date": 1464203948, "creation_date": 1464202958, "question_id": 37445584, "link": "https://stackoverflow.com/questions/37445584/security-concerns-with-db-backed-liquid-templates-and-marshal-load", "title": "Security concerns with DB backed Liquid Templates and Marshal.load", "body": "<p>I'm storing email templates in PostgreSQL so that users can edit outgoing emails. I'm using Liquid to prevent code execution on the server. In order to help speed up the process of fetching the email template from the db, parsing it, and then rendering it I'd like to Marshal the liquid template. Here is the code to do this:</p>\n\n<pre><code># Saving template to the db\ntext = \"template text from possibly dangerous user {{stuff}}\"\ntemplate = Liquid::Template.parse(text)\nemail_template = EmailTemplate.new # the db class\nemail_template.source = Marshal.dump(template)\nemail_template.save\n\n# time goes by and now we need that template\ntemplate = Marshal.load(email_template.source) # !! Is this dangerous? !!\n</code></pre>\n\n<p>I have read that <code>Marshal.load</code> can lead to remote code execution. I'm going to marshal the a Liquid::Template object but this does contain data supplied by scary users. Are there any security considerations I need to be aware of?</p>\n"}, {"tags": ["ruby", "intellij-idea"], "answers": [{"comments": [{"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 1, "creation_date": 1465188192, "post_id": 37445578, "comment_id": 62779224, "body": "It&#39;s another bug in intellij. I had to delete the module and recreate it too, even though it was the same exact thing. I also had to specify the location as the existing location of my app, and it will ask you if you want to overwrite the existing location, of course I don&#39;t. I had problems with intellij when working with android too. That was an even bigger nightmare."}, {"owner": {"reputation": 26204, "user_id": 10559, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e0056ff86b3a450f9a22c183afa254?s=128&d=identicon&r=PG", "display_name": "jwfearn", "link": "https://stackoverflow.com/users/10559/jwfearn"}, "edited": false, "score": 1, "creation_date": 1469645706, "post_id": 37445578, "comment_id": 64627868, "body": "I wish I could upvote this a million times! Thanks @ed-norris!"}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 1, "creation_date": 1471492228, "post_id": 37445578, "comment_id": 65371016, "body": "I am back here again. Completely forgot about this stupid bug."}, {"owner": {"reputation": 1800, "user_id": 37370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4aa184d0463590af1e79c3edf6d46873?s=128&d=identicon&r=PG&f=1", "display_name": "RichieHH", "link": "https://stackoverflow.com/users/37370/richiehh"}, "edited": false, "score": 1, "creation_date": 1503148326, "post_id": 37445578, "comment_id": 78501993, "body": "FINALLY! Thank you"}], "tags": [], "owner": {"reputation": 3593, "user_id": 156140, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/178553656f49d658c51a1c524b893202?s=128&d=identicon&r=PG", "display_name": "Ed Norris", "link": "https://stackoverflow.com/users/156140/ed-norris"}, "is_accepted": true, "score": 12, "last_activity_date": 1464202939, "creation_date": 1464202939, "answer_id": 37445578, "question_id": 37445577, "link": "https://stackoverflow.com/questions/37445577/how-do-you-set-the-sdk-for-intellij-ideas-ruby-plugin/37445578#37445578", "title": "How do you set the SDK for IntelliJ IDEA&#39;s Ruby plugin?", "body": "<p>Turns out that the module was not a Ruby module.  This is what it should look like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fpIuU.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/fpIuU.png\" alt=\"enter image description here\"></a></p>\n\n<p>I deleted the module and recreated it and everything is working correctly.  Many times I've found that the process of writing out a question is a great way to answer it myself.</p>\n"}], "owner": {"reputation": 3593, "user_id": 156140, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/178553656f49d658c51a1c524b893202?s=128&d=identicon&r=PG", "display_name": "Ed Norris", "link": "https://stackoverflow.com/users/156140/ed-norris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1310, "favorite_count": 1, "accepted_answer_id": 37445578, "answer_count": 1, "score": 3, "last_activity_date": 1464202939, "creation_date": 1464202939, "question_id": 37445577, "link": "https://stackoverflow.com/questions/37445577/how-do-you-set-the-sdk-for-intellij-ideas-ruby-plugin", "title": "How do you set the SDK for IntelliJ IDEA&#39;s Ruby plugin?", "body": "<p>Using IntelliJ Idea 15.0.6 with the Ruby plugin v.8.0.0.20160205</p>\n\n<p>After encountering various Ruby SDK problems, I followed these instructions to re-configure my inherited Ruby project: <a href=\"https://www.jetbrains.com/help/idea/2016.1/configuring-global-project-and-module-sdks.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/2016.1/configuring-global-project-and-module-sdks.html</a></p>\n\n<p>I now have a global SDK:\n<a href=\"https://i.stack.imgur.com/h3tPe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h3tPe.png\" alt=\"enter image description here\"></a></p>\n\n<p>And a project SDK:\n<a href=\"https://i.stack.imgur.com/gNW4a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gNW4a.png\" alt=\"enter image description here\"></a></p>\n\n<p>And a module SDK (inherited from the project SDK)\n<a href=\"https://i.stack.imgur.com/UuJEs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UuJEs.png\" alt=\"enter image description here\"></a></p>\n\n<p>But gemfiles showed a bunch of inspection problems\n<a href=\"https://i.stack.imgur.com/Shu8j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Shu8j.png\" alt=\"enter image description here\"></a></p>\n\n<p>And I was not able to create a Run/Debug Configuration using the module SDK.  Specifically, if I selected the \"Choose SDK from module\" radio button for Ruby SDK when creating a new Run/Debug Configuration, I would see the error \"No SDK specified\" at the bottom of the window.</p>\n\n<p>What is going on?</p>\n"}, {"tags": ["ruby", "hashmap"], "answers": [{"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 4, "last_activity_date": 1464204387, "last_edit_date": 1464204387, "creation_date": 1464203673, "answer_id": 37445785, "question_id": 37445550, "link": "https://stackoverflow.com/questions/37445550/how-to-combines-two-nested-data-structures-into-one/37445785#37445785", "title": "How to combines two nested data structures into one?", "body": "<p>Please note that what you call hashes are indeed arrays, and that too they are not consistent.  First one is an array containing single hash, and second one is an array containing two hashes.</p>\n\n<p>For the given two arrays, if we call the first <code>v1</code> and second one <code>v2</code>, then, below code should give the output you desire:</p>\n\n<pre><code>v1[0].values.map.with_index {|v, i| v2[i].merge(v)}\n</code></pre>\n\n<hr>\n\n<p><strong>Explanation:</strong></p>\n\n<p><a href=\"http://docs.ruby-lang.org/en/2.3.0/Hash.html#method-i-merge\" rel=\"nofollow\"><code>Hash#merge</code></a> merges two hashes, so it has to be used to achieve the result.  </p>\n\n<p>The first hash will be from <code>v1</code> - we pick the first element of <code>v1</code> array, which is a hash, and take all its <code>values</code> which are hashes themselves - thus, we have an array of hash in <code>v1[0].values</code>.</p>\n\n<p>The second array of hashes is <code>v2</code>.</p>\n\n<p>Now, we use the <a href=\"http://docs.ruby-lang.org/en/2.3.0/Enumerable.html#method-i-map\" rel=\"nofollow\"><code>Enumerable#map</code></a> method to iterate over first array of hashes and collecting the result of merging each of its elements with corresponding element from <code>v2</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1464236006, "creation_date": 1464236006, "answer_id": 37451472, "question_id": 37445550, "link": "https://stackoverflow.com/questions/37445550/how-to-combines-two-nested-data-structures-into-one/37451472#37451472", "title": "How to combines two nested data structures into one?", "body": "<p>I assume you meant to define the following hash (rather than an array containing one element, a hash).</p>\n\n<pre><code>h = { \"blake\" =&gt;  { :awesomeness =&gt; 10,\n                    :height =&gt; \"74\",\n                    :last_name =&gt; \"johnson\"\n                  },\n      \"ashley\" =&gt; { :awesomeness =&gt; 9,\n                    :height =&gt; 60,\n                    :last_name =&gt; \"dubs\"\n                  }\n    }\n</code></pre>\n\n<p>There are many ways to add the key-value pairs <code>:first_name=&gt;\"blake\"</code> and <code>:first_ame=&gt;\"ashley\"</code> to their associated hashes. Here is one:</p>\n\n<pre><code> f = h.each_with_object({}) { |(k,v),g| g[k] = { :first_name =&gt; k }.merge(v) }\n   #=&gt; {\"blake\" =&gt;{:first_name=&gt;\"blake\",\n   #               :awesomeness=&gt;10,\n   #               :height=&gt;\"74\",\n   #               :last_name=&gt;\"johnson\"},\n   #    \"ashley\"=&gt;{:first_ame=&gt;\"ashley\",\n   #               :awesomeness=&gt;9,\n   #               :height=&gt;60,\n   #               :last_name=&gt;\"dubs\"}} \n</code></pre>\n\n<p>So this begs the question: what is the function of the following array?</p>\n\n<pre><code>a = [{ :first_name =&gt; \"blake\" }, { :first_name =&gt; \"ashley\" }]    \n</code></pre>\n\n<p>If this array is used to specify which keys of <code>f</code> are to be retained, we could write</p>\n\n<pre><code>retain = a.map { |g| g[:name] } \n  #=&gt; [\"blake\", \"ashley\"] \nf.select { |k| retain.include?(k) }\n  #=&gt; {\"blake\"=&gt;{:first_name=&gt;\"blake\", :awesomeness=&gt;10, :height=&gt;\"74\",\n  #              :last_name=&gt;\"johnson\"},\n  #    \"ashley\"=&gt;{:first_name=&gt;\"ashley\", :awesomeness=&gt;9, :height=&gt;60,\n  #               :last_name=&gt;\"dubs\"}} \n</code></pre>\n\n<p>On the other hand, if</p>\n\n<pre><code>a = [{:name=&gt;\"blake\"}]\n</code></pre>\n\n<p>then</p>\n\n<pre><code>retain = a.map { |g| g[:name] } \n  #=&gt; [\"blake\"] \nf.select { |k| retain.include?(k) }\n  #=&gt; {\"blake\"=&gt;{:first_name=&gt;\"blake\", :awesomeness=&gt;10, :height=&gt;\"74\",\n  #              :last_name=&gt;\"johnson\"}} \n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 5125027, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10153391766200552/picture?type=large", "display_name": "Steven Kwok", "link": "https://stackoverflow.com/users/5125027/steven-kwok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 1, "accepted_answer_id": 37445785, "answer_count": 2, "score": 3, "last_activity_date": 1464236006, "creation_date": 1464202845, "question_id": 37445550, "link": "https://stackoverflow.com/questions/37445550/how-to-combines-two-nested-data-structures-into-one", "title": "How to combines two nested data structures into one?", "body": "<p>I need to definite a method that combines two nested data structures into one.</p>\n\n<p>here is the first hash:</p>\n\n<pre><code>[\n  {\n     \"blake\" =&gt; {\n       :awesomeness =&gt; 10,\n       :height =&gt; \"74\",\n       :last_name =&gt; \"johnson\"\n     },\n      \"ashley\" =&gt; {\n        :awesomeness =&gt; 9,\n        :height =&gt; 60,\n        :last_name =&gt; \"dubs\"\n     }\n   }\n]\n</code></pre>\n\n<p>here is the second hash:</p>\n\n<pre><code>[\n   {\n     :first_name =&gt; \"blake\"\n   },\n   {\n     :first_name =&gt; \"ashley\"\n   }\n]\n</code></pre>\n\n<p>the result will be like this:</p>\n\n<pre><code>[\n   {\n      :first_name =&gt; \"blake\",\n      :awesomeness =&gt; 10,\n      :height =&gt; \"74\",\n      :last_name =&gt; \"johnson\"\n   },\n   {\n      :first_name =&gt; \"ashley\",\n      :awesomeness =&gt; 9,\n      :height =&gt; 60,\n      :last_name =&gt; \"dubs\"\n   }\n]\n</code></pre>\n"}, {"tags": ["ruby", "null", "ruby-2.3"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 6, "creation_date": 1464202347, "post_id": 37445298, "comment_id": 62392975, "body": "I think this is a bug in 2.3.0: <a href=\"https://bugs.ruby-lang.org/issues/11976\" rel=\"nofollow noreferrer\">bugs.ruby-lang.org/issues/11976</a>. See also <a href=\"http://stackoverflow.com/questions/36829168/in-ruby-why-does-nil1-1-evaluate-to-nil\" title=\"in ruby why does nil1 1 evaluate to nil\">stackoverflow.com/questions/36829168/&hellip;</a>"}, {"owner": {"reputation": 4667, "user_id": 268673, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/33abb5182937ebcc3765f224aa74c16d?s=128&d=identicon&r=PG", "display_name": "AndreDurao", "link": "https://stackoverflow.com/users/268673/andredurao"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1464203576, "post_id": 37445298, "comment_id": 62393634, "body": "Thanks Matt: I think is definitively that."}], "owner": {"reputation": 4667, "user_id": 268673, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/33abb5182937ebcc3765f224aa74c16d?s=128&d=identicon&r=PG", "display_name": "AndreDurao", "link": "https://stackoverflow.com/users/268673/andredurao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1464203815, "answer_count": 0, "score": 0, "last_activity_date": 1464201961, "creation_date": 1464201961, "question_id": 37445298, "link": "https://stackoverflow.com/questions/37445298/ruby-2-3-1-assignment-changes-on-nil", "closed_reason": "Duplicate", "title": "Ruby 2.3.1 assignment changes on nil", "body": "<p>I'm trying to understand if this is an error on Ruby 2.3.1 or 2.3.0.</p>\n\n<p>If the first return is the expected, IMHO this should work on both versions.</p>\n\n<p><strong>Why a minor change and bugfixes produced different results?</strong></p>\n\n<p>I'm currently facing the following problems on Ruby 2.3.1:</p>\n\n<pre><code>#ruby 2.3.0p0\nnil[:a] = nil\n#returns nil\n\n\n#ruby 2.3.1p112\nnil[:a] = nil\n#returns the following error:\nNoMethodError: undefined method `[]=' for nil:NilClass\n    from (irb):1\n    from ...rbenv/versions/2.3.1/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "mysql2"], "comments": [{"owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1464202468, "post_id": 37445288, "comment_id": 62393052, "body": "can you remove single quotes from root like &#39;root&#39; to root"}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1464202518, "post_id": 37445288, "comment_id": 62393082, "body": "Does this help? <a href=\"http://stackoverflow.com/a/6081358/155826\">stackoverflow.com/a/6081358/155826</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464204033, "post_id": 37445288, "comment_id": 62393880, "body": "Haver you tried connecting via the socket method? <code>socket:</code> is also a valid parameter and should be the path to where your MySQL socket is."}, {"owner": {"reputation": 1, "user_id": 2270553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790a93bd0732d988d907fb2576b35d1e?s=128&d=identicon&r=PG", "display_name": "user2270553", "link": "https://stackoverflow.com/users/2270553/user2270553"}, "reply_to_user": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1464206082, "post_id": 37445288, "comment_id": 62394950, "body": "@Thorin yes i try that, doesn&#39;t work. @mysmallidea in my case i says <code>using password: NO</code> but when i enter a incorrect password i yes <code>using password: YES</code> i try folling the guied but i face a error in one of the commands @tadman yes i try that, i says the same"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 2270553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790a93bd0732d988d907fb2576b35d1e?s=128&d=identicon&r=PG", "display_name": "user2270553", "link": "https://stackoverflow.com/users/2270553/user2270553"}, "edited": false, "score": 0, "creation_date": 1464203714, "post_id": 37445628, "comment_id": 62393710, "body": "thanks for the reply  I already tried that, it doesn&#39;t work, also as i mention in the question the password is there which is root, i can login to mysql via terminal using the password root, but in rails i still have the same error: <code>Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: NO)</code>"}, {"owner": {"reputation": 51, "user_id": 4914093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vEUYx.jpg?s=128&g=1", "display_name": "Elias Sanchez", "link": "https://stackoverflow.com/users/4914093/elias-sanchez"}, "reply_to_user": {"reputation": 1, "user_id": 2270553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790a93bd0732d988d907fb2576b35d1e?s=128&d=identicon&r=PG", "display_name": "user2270553", "link": "https://stackoverflow.com/users/2270553/user2270553"}, "edited": false, "score": 0, "creation_date": 1464739338, "post_id": 37445628, "comment_id": 62603452, "body": "try to create a new user for mysql, grant permissions and set a password, then use that user to log in rails."}], "tags": [], "owner": {"reputation": 51, "user_id": 4914093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vEUYx.jpg?s=128&g=1", "display_name": "Elias Sanchez", "link": "https://stackoverflow.com/users/4914093/elias-sanchez"}, "is_accepted": false, "score": 0, "last_activity_date": 1464203160, "creation_date": 1464203160, "answer_id": 37445628, "question_id": 37445288, "link": "https://stackoverflow.com/questions/37445288/access-denied-for-user-rootlocalhost-using-password-no-rails-2/37445628#37445628", "title": "Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: NO) Rails 2", "body": "<p>replace for this:</p>\n\n<pre><code>  development:\n    adapter: mysql2\n    database: gradesfirst\n    username: root\n    password: ''\n    host: localhost\n</code></pre>\n\n<p>or assign a password for the root user on mysql.</p>\n"}], "owner": {"reputation": 1, "user_id": 2270553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790a93bd0732d988d907fb2576b35d1e?s=128&d=identicon&r=PG", "display_name": "user2270553", "link": "https://stackoverflow.com/users/2270553/user2270553"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1181, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464207419, "creation_date": 1464201943, "last_edit_date": 1464207419, "question_id": 37445288, "link": "https://stackoverflow.com/questions/37445288/access-denied-for-user-rootlocalhost-using-password-no-rails-2", "title": "Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: NO) Rails 2", "body": "<p>I create a database in mysql\ni'm using mysql2 gem and Rails 2\ni've already saw some question here about this, but non of them works for me.</p>\n\n<p>I have my database.yml file like so:</p>\n\n<pre><code>development:\n  adapter: mysql2\n  database: db\n  username: root\n  password: 'root'\n  host: localhost\n</code></pre>\n\n<p>i can login into mysql in the command line like this:</p>\n\n<pre><code>mysql -u root -p\n</code></pre>\n\n<p>and enter the same password: root and i have no error, but when i try to see a page after running scrpit/server the application always show the error <code>Access denied for user 'root'@'localhost' (using password: NO)</code></p>\n\n<p>Any idea what could be happening here please?\nThanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "prawn"], "comments": [{"owner": {"reputation": 430, "user_id": 6268569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d9a1017d0283ce1d65390e92311035?s=128&d=identicon&r=PG&f=1", "display_name": "CodeMaker", "link": "https://stackoverflow.com/users/6268569/codemaker"}, "edited": false, "score": 0, "creation_date": 1464342529, "post_id": 37445267, "comment_id": 62457389, "body": "only this kind of prawn gem are available.(<a href=\"https://rubygems.org/search?utf8=%E2%9C%93&amp;query=prawn\" rel=\"nofollow noreferrer\">rubygems.org/search?utf8=%E2%9C%93&amp;query=prawn</a>)"}, {"owner": {"reputation": 195, "user_id": 2332965, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cca3ab246e1e4776d2229d21db5f16e1?s=128&d=identicon&r=PG", "display_name": "Wellington1993", "link": "https://stackoverflow.com/users/2332965/wellington1993"}, "reply_to_user": {"reputation": 430, "user_id": 6268569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d9a1017d0283ce1d65390e92311035?s=128&d=identicon&r=PG&f=1", "display_name": "CodeMaker", "link": "https://stackoverflow.com/users/6268569/codemaker"}, "edited": false, "score": 0, "creation_date": 1479130329, "post_id": 37445267, "comment_id": 68415174, "body": "Now: <a href=\"https://rubygems.org/gems/prawn_report\" rel=\"nofollow noreferrer\">rubygems.org/gems/prawn_report</a>"}], "answers": [{"tags": [], "owner": {"reputation": 543, "user_id": 5758268, "user_type": "registered", "profile_image": "https://graph.facebook.com/620704168067839/picture?type=large", "display_name": "Patrick Barattin", "link": "https://stackoverflow.com/users/5758268/patrick-barattin"}, "is_accepted": true, "score": 0, "last_activity_date": 1464203719, "creation_date": 1464203719, "answer_id": 37445795, "question_id": 37445267, "link": "https://stackoverflow.com/questions/37445267/could-not-find-a-valid-gem-prawn-report-in-rails-2-app-deploy/37445795#37445795", "title": "Could not find a valid gem &#39;prawn_report&#39; in Rails 2 app deploy", "body": "<p>Prawn report isn't in the <a href=\"https://rubygems.org\" rel=\"nofollow\">https://rubygems.org</a> you can't install in this way.</p>\n"}], "owner": {"reputation": 195, "user_id": 2332965, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cca3ab246e1e4776d2229d21db5f16e1?s=128&d=identicon&r=PG", "display_name": "Wellington1993", "link": "https://stackoverflow.com/users/2332965/wellington1993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 37445795, "answer_count": 1, "score": 0, "last_activity_date": 1464203719, "creation_date": 1464201875, "last_edit_date": 1592644375, "question_id": 37445267, "link": "https://stackoverflow.com/questions/37445267/could-not-find-a-valid-gem-prawn-report-in-rails-2-app-deploy", "title": "Could not find a valid gem &#39;prawn_report&#39; in Rails 2 app deploy", "body": "<p>I have this problem below on old Rails app deploy:</p>\n<blockquote>\n<p>[deprecated] I18n.enforce_available_locales will default to true in\nthe future. If you really want to skip validation of your locale you\ncan set I18n.enforce_available_locales = false to avoid this message.</p>\n<p>gem install prawn_report ERROR:  Could not find a valid gem\n'prawn_report' (&gt;= 0) in any repository ERROR:  Possible alternatives:\nrake_report, ar_report, amazon_report, app_report, plain_record</p>\n</blockquote>\n<p>Any suggestions to solve this problem are welcome.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord", "named-scope"], "comments": [{"owner": {"reputation": 1440, "user_id": 1876622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd72641efb03f1dab0382005ca3434f?s=128&d=identicon&r=PG", "display_name": "HeyZiko", "link": "https://stackoverflow.com/users/1876622/heyziko"}, "edited": false, "score": 0, "creation_date": 1477515243, "post_id": 37445203, "comment_id": 67803794, "body": "See my answer to the same question <a href=\"http://stackoverflow.com/a/40269481/1876622\">here</a>.  Also note similar questions <a href=\"http://stackoverflow.com/questions/1482940/\">here</a> and <a href=\"http://stackoverflow.com/questions/16381619/\">here</a>"}], "answers": [{"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 1, "last_activity_date": 1464202938, "last_edit_date": 1495540989, "creation_date": 1464202938, "answer_id": 37445575, "question_id": 37445203, "link": "https://stackoverflow.com/questions/37445203/combining-multiple-named-scopes-with-or/37445575#37445575", "title": "Combining multiple named scopes with OR", "body": "<p>Rails 4 and older do not support <code>OR</code> query \"natively\". Looks like it will be introduced in Rails 5.</p>\n\n<p>For now, you would have to use SQL with <code>.where</code> method:</p>\n\n<pre><code>YourModel.where('field1 = ? OR field2 = ?', 1, 2)\n</code></pre>\n\n<p>But, in your case, you are selecting using <code>IN</code> and <code>=</code> queries and the first field is in both scopes. So, it would not make much sense. Anyway, if you really have to, you might get away <a href=\"https://stackoverflow.com/a/19865634/52317\">with this</a>:</p>\n\n<pre><code>data = YourModel.public_bids.outbid_maxbids\nYourModel.where(data.where_values.inject(:or))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 854, "user_id": 4696152, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ce4a2a4814cedafd095f3516a9f9cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Herbert", "link": "https://stackoverflow.com/users/4696152/zack-herbert"}, "edited": false, "score": 0, "creation_date": 1464203252, "post_id": 37445589, "comment_id": 62393443, "body": "Unfortunately we haven&#39;t upgraded to 5 yet :("}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "reply_to_user": {"reputation": 854, "user_id": 4696152, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ce4a2a4814cedafd095f3516a9f9cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Herbert", "link": "https://stackoverflow.com/users/4696152/zack-herbert"}, "edited": false, "score": 0, "creation_date": 1464204132, "post_id": 37445589, "comment_id": 62393950, "body": "Well what&#39;s the holdup? It&#39;s almost out of beta! ;)"}], "tags": [], "owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "is_accepted": false, "score": 1, "last_activity_date": 1464202977, "last_edit_date": 1495542399, "creation_date": 1464202977, "answer_id": 37445589, "question_id": 37445203, "link": "https://stackoverflow.com/questions/37445203/combining-multiple-named-scopes-with-or/37445589#37445589", "title": "Combining multiple named scopes with OR", "body": "<p>I haven't tried using <code>or</code> in a scope, but you may be able to chain the scopes together using Rails 5's new <code>or</code> method, like this: </p>\n\n<pre><code>scope :public_or_outbid, -&gt; {\n  where(status: [Status::ACCEPTED, Status::OUTBID, Status::SOLD, Status::NO_SALE], bid_type: [BidType::MANUAL, BidType::AUTO, BidType::LIVE])\\\n  .or(where(status: Status::OUTBID, bid_type: BidType::MAXBID))\n}\n</code></pre>\n\n<p>(Note that this only works in Rails 5)</p>\n\n<p>You certainly can chain the conditions together like this: </p>\n\n<pre><code>MyObj.public_bids.or(MyObj.outbid_maxbids)\n</code></pre>\n\n<p>See this answer for more detail: <a href=\"https://stackoverflow.com/questions/32753168/rails-5-activerecord-or-query\">Rails 5: ActiveRecord OR query</a></p>\n"}], "owner": {"reputation": 854, "user_id": 4696152, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ce4a2a4814cedafd095f3516a9f9cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Herbert", "link": "https://stackoverflow.com/users/4696152/zack-herbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3207, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1534447488, "creation_date": 1464201674, "last_edit_date": 1534447488, "question_id": 37445203, "link": "https://stackoverflow.com/questions/37445203/combining-multiple-named-scopes-with-or", "title": "Combining multiple named scopes with OR", "body": "<p>I am trying to combine two scopes or add some more to an existing scope.</p>\n\n<pre><code>scope :public_bids, -&gt; {\n  where(status: [Status::ACCEPTED, Status::OUTBID, Status::SOLD, Status::NO_SALE],\n        bid_type: [BidType::MANUAL, BidType::AUTO, BidType::LIVE])\nscope :outbid_maxbids, -&gt; {\n  where(status: Status::OUTBID, bid_type: BidType::MAXBID)\n</code></pre>\n\n<p>I am having trouble determining how to <code>OR</code> them together or combine then into one scope. Any suggestions/guidance? I would prefer that they be combined into one single scope. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "devise"], "answers": [{"comments": [{"owner": {"reputation": 50, "user_id": 5037424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee354a180524ea0300ffcf1df9659ae2?s=128&d=identicon&r=PG&f=1", "display_name": "chrishorton", "link": "https://stackoverflow.com/users/5037424/chrishorton"}, "edited": false, "score": 0, "creation_date": 1464237402, "post_id": 37444646, "comment_id": 62404483, "body": "Okay, updated the question to include the registrations controller that I have currently."}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "reply_to_user": {"reputation": 50, "user_id": 5037424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee354a180524ea0300ffcf1df9659ae2?s=128&d=identicon&r=PG&f=1", "display_name": "chrishorton", "link": "https://stackoverflow.com/users/5037424/chrishorton"}, "edited": false, "score": 0, "creation_date": 1464239997, "post_id": 37444646, "comment_id": 62405232, "body": "Please choose @pdoherty926 answer below. He has it right! I&#39;m updating my answer to help other&#39;s see it."}], "tags": [], "owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "is_accepted": false, "score": 4, "last_activity_date": 1464240058, "last_edit_date": 1464240058, "creation_date": 1464199651, "answer_id": 37444646, "question_id": 37444528, "link": "https://stackoverflow.com/questions/37444528/heroku-deploy-with-devise/37444646#37444646", "title": "Heroku Deploy With Devise", "body": "<p>There is nothing wrong with Devise, you are simply getting a syntax error in <code>/app/app/controllers/users/registrations_controller.rb:1</code> Could you show us the first lines of that file?</p>\n\n<p>It should look something like this:</p>\n\n<pre><code>class MyDevise::RegistrationsController &lt; Devise::RegistrationsController\n# ...\n</code></pre>\n\n<p>Also, you are deploying WEBrick to Heroku, I recommend you follow their <a href=\"https://devcenter.heroku.com/articles/getting-started-with-rails4\" rel=\"nofollow\">guidelines</a> and deploy with Puma instead. This is not the problem you are experiencing, but following the guidelines of the platform will help you out in the long run.</p>\n\n<p><strong>EDIT</strong>: You and me where both missing a semicolon after <code>MyDevise</code>. I added it so we don't spread the error and to make it easier for other readers.</p>\n"}, {"comments": [{"owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "edited": false, "score": 1, "creation_date": 1464280771, "post_id": 37451869, "comment_id": 62431821, "body": "Any luck, @chrishorton?"}, {"owner": {"reputation": 50, "user_id": 5037424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee354a180524ea0300ffcf1df9659ae2?s=128&d=identicon&r=PG&f=1", "display_name": "chrishorton", "link": "https://stackoverflow.com/users/5037424/chrishorton"}, "edited": false, "score": 0, "creation_date": 1464308853, "post_id": 37451869, "comment_id": 62444500, "body": "Fixes the syntax error, although one still prevails that says uninitialized my devise constant"}], "tags": [], "owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "is_accepted": true, "score": 2, "last_activity_date": 1464238424, "creation_date": 1464238424, "answer_id": 37451869, "question_id": 37444528, "link": "https://stackoverflow.com/questions/37444528/heroku-deploy-with-devise/37451869#37451869", "title": "Heroku Deploy With Devise", "body": "<p>Your class definition is missing a semicolon.</p>\n\n<p><code>class MyDevise:RegistrationsController &lt; Devise::RegistrationsController</code> should be <code>class MyDevise::RegistrationsController &lt; Devise::RegistrationsController</code></p>\n"}], "owner": {"reputation": 50, "user_id": 5037424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee354a180524ea0300ffcf1df9659ae2?s=128&d=identicon&r=PG&f=1", "display_name": "chrishorton", "link": "https://stackoverflow.com/users/5037424/chrishorton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 37451869, "answer_count": 2, "score": 0, "last_activity_date": 1464240058, "creation_date": 1464199219, "last_edit_date": 1464237359, "question_id": 37444528, "link": "https://stackoverflow.com/questions/37444528/heroku-deploy-with-devise", "title": "Heroku Deploy With Devise", "body": "<p>I am attempting to deploy my app using heroku with Ruby on Rails. It's a simple task app using devise for my user registrations. I believe the problem is the devise registrations controller as my logs seem to tell me. </p>\n\n<pre><code>&gt; 2016-05-25T17:45:50.379667+00:00 app[web.1]: =&gt; Booting WEBrick\n&gt; 2016-05-25T17:45:50.379741+00:00 app[web.1]:                ^\n&gt; 2016-05-25T17:45:50.379749+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5/lib/active_support/dependencies.rb:274:in `block in require' 2016-05-25T17:45:50.379740+00:00 app[web.1]: class  MyDevise:RegistrationsController &lt; Dev...\n&gt; 2016-05-25T17:45:50.379724+00:00 app[web.1]: Exiting\n&gt; 2016-05-25T17:45:50.379717+00:00 app[web.1]: =&gt; Rails 4.2.5 application starting in production on http://0.0.0.0:22282\n&gt; 2016-05-25T17:45:50.379738+00:00 app[web.1]: /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5/lib/active_support/dependencies.rb:274:in `require': /app/app/controllers/users/registrations_controller.rb:1:\n&gt; syntax error, unexpected tSYMBEG, expecting '&lt;' or ';' or '\\n'\n&gt; (SyntaxError) 2016-05-25T17:45:50.379722+00:00 app[web.1]: =&gt; Run\n&gt; `rails server -h` for more startup options\n</code></pre>\n\n<p>Any help would be greatly appreciated! I will post any other files needed, I did not modify the registrations controller so as of now I don't have access to that.\nThank you!</p>\n\n<pre><code>class MyDevise:RegistrationsController &lt; Devise::RegistrationsController\ndef new\n    render :new\nend\n\ndef edit\n    render :edit\nend\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "model-view-controller", "nested-routes"], "comments": [{"owner": {"reputation": 973, "user_id": 1434804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7f32u.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1434804/alex"}, "edited": false, "score": 0, "creation_date": 1464201398, "post_id": 37444450, "comment_id": 62392422, "body": "Show, what is in your Admin::SitesController. Check if in edit action you assign @ client variable properly. The error says that @ client is nil - so edit_admin_client_site_path could not be generated because @ site must relate to @ client and cannot relate to nil client, obviously."}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "reply_to_user": {"reputation": 973, "user_id": 1434804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7f32u.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1434804/alex"}, "edited": false, "score": 0, "creation_date": 1464201834, "post_id": 37444450, "comment_id": 62392675, "body": "Ive Added the controllers, It appears that I have added the variable where it needs to be."}, {"owner": {"reputation": 973, "user_id": 1434804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7f32u.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1434804/alex"}, "edited": false, "score": 0, "creation_date": 1464202747, "post_id": 37444450, "comment_id": 62393206, "body": "My suggestion is to go deeper into debugging. Check what the value of @ client on the show action. Check what link rails generates. Check if request comes into edit action."}], "answers": [{"comments": [{"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1464203169, "post_id": 37445497, "comment_id": 62393396, "body": "The client_ident is essentially just a vanity / replacement for the usual of id:1,2,3 ect.. but I want these placed in the url to make it harder for someone to jump around that may gain access to the app."}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1464203201, "post_id": 37445497, "comment_id": 62393412, "body": "i have also tried to impliment your fix, however am still receiving the same error, no changes to the original error."}, {"owner": {"reputation": 21, "user_id": 5410616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tE7wc.jpg?s=128&g=1", "display_name": "marginalchaos", "link": "https://stackoverflow.com/users/5410616/marginalchaos"}, "reply_to_user": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1464206718, "post_id": 37445497, "comment_id": 62395259, "body": "@ShawnWilson   When you made the change, what did you change the <code>sites#show</code> action to?  Can you throw a <code>byebug</code> or <code>binding.pry</code> (whichever you might be using) into the <code>sites#show</code> action and see what the value of @client is at that point?"}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1464206972, "post_id": 37445497, "comment_id": 62395401, "body": "I changed the show action to reflect your @client = Client.find_by_id(params[:client_id]) and the link to edit on the show page is &lt;%= link_to &quot;Edit&quot;, edit_admin_client_site_path(@client, @site) %&gt; and i still get the same error"}, {"owner": {"reputation": 21, "user_id": 5410616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tE7wc.jpg?s=128&g=1", "display_name": "marginalchaos", "link": "https://stackoverflow.com/users/5410616/marginalchaos"}, "reply_to_user": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1464207177, "post_id": 37445497, "comment_id": 62395504, "body": "Is the current URL in the browser of the show page showing the <code>:client_ident</code> or <code>client_id</code>?  If its showing the ident, value then we may have to use the following:  <code>@client = Client.find_by_client_ident(params[:client_id])</code>  While the value in the path might be the client_ident, rails (due to the routes) still sees that as the client_id for parameter purposes.  (Fingers and toes crossed)"}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1464207276, "post_id": 37445497, "comment_id": 62395556, "body": "when I go to the site show page i use <a href=\"http://localhost:3000/admin/clients/9A81622C/sites/88AA\" rel=\"nofollow noreferrer\">localhost:3000/admin/clients/9A81622C/sites/88AA</a> it sees this and wants to show the page but errors out due to the edit link on the page, if i remove the edit link, the page appears properly."}, {"owner": {"reputation": 21, "user_id": 5410616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tE7wc.jpg?s=128&g=1", "display_name": "marginalchaos", "link": "https://stackoverflow.com/users/5410616/marginalchaos"}, "reply_to_user": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1464207345, "post_id": 37445497, "comment_id": 62395584, "body": "So the error isn&#39;t when trying to click on follow the link but instead its when you try to load the show page it yells about that not being a valid path?"}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1464207435, "post_id": 37445497, "comment_id": 62395629, "body": "yes, so i have just added your correction to the show page and it loads the show page now the edit page errors out but i believe i just need to address the links on the edit page, ill let you know if this has resolved this."}, {"owner": {"reputation": 21, "user_id": 5410616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tE7wc.jpg?s=128&g=1", "display_name": "marginalchaos", "link": "https://stackoverflow.com/users/5410616/marginalchaos"}, "reply_to_user": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1464207473, "post_id": 37445497, "comment_id": 62395652, "body": "Awesome!  I hope it works for the other pages too, please let us know :)"}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1464213161, "post_id": 37445497, "comment_id": 62398305, "body": "no I actually think im heading down a rabbit hole, im going to back it all out and rebuild this section.. i think the big issue is the nested resources in the admin namespace.. ive never worked with it in this way before.. ill rebuild and let you know when its done, perhaps give you access to the github to look for yourself?"}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1464243144, "post_id": 37445497, "comment_id": 62406470, "body": "Ok So I have re worked the App, and am still having the same issue, i have started another Stack Question and here is the link : <a href=\"https://stackoverflow.com/questions/37452162/admin-namespace-with-nested-resources-not-saving\" title=\"admin namespace with nested resources not saving\">stackoverflow.com/questions/37452162/&hellip;</a> take a look at that and if you want let me know and ill give you access to my repo"}], "tags": [], "owner": {"reputation": 21, "user_id": 5410616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tE7wc.jpg?s=128&g=1", "display_name": "marginalchaos", "link": "https://stackoverflow.com/users/5410616/marginalchaos"}, "is_accepted": false, "score": 0, "last_activity_date": 1464202689, "creation_date": 1464202689, "answer_id": 37445497, "question_id": 37444450, "link": "https://stackoverflow.com/questions/37444450/actioncontrollerurlgenerationerror-with-admin-namespace-and-nested-resources/37445497#37445497", "title": "ActionController::UrlGenerationError with :admin namespace and nested resources", "body": "<p>It looks like the issue might be in your <code>Sites</code> controller.  In looking over how you're trying to set <code>@client</code> I see that you have it as: <code>@client = Client.find_by_client_ident(params[:id])</code></p>\n\n<p>But at this level in the nesting <code>params[:id]</code> would be referencing the site's id, not the client's.  Not knowing exactly how you're using/storing <code>client_ident</code> versus the actual <code>id</code> of the client I would have expected to see the following instead:</p>\n\n<p><code>@client = Client.find_by_id(params[:client_id])</code></p>\n\n<p>This is because in your routes you have the paths setup for <code>.../clients/:client_id/sites/:site_id</code> so the <code>:client_id</code> is what would be getting passed in.  In this case when you try to look the client up in the Sites controller you're passing the site's id as the parameter rather than the <code>client_id</code>.</p>\n\n<p>If your <code>client_ident</code> != <code>client.id</code> then I'd avoid trying to use the <code>params[:id]</code> to look up/load records by <code>Client.find_by_client_ident</code> as those shouldn't match up (unless, like I said, I'm missing something in how you implement client_ident).</p>\n\n<p>Let us know your thoughts and if that change works for you :)</p>\n"}, {"tags": [], "owner": {"reputation": 335, "user_id": 2579077, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Rz1o3.jpg?s=128&g=1", "display_name": "sam", "link": "https://stackoverflow.com/users/2579077/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1522043363, "creation_date": 1522043363, "answer_id": 49484735, "question_id": 37444450, "link": "https://stackoverflow.com/questions/37444450/actioncontrollerurlgenerationerror-with-admin-namespace-and-nested-resources/49484735#49484735", "title": "ActionController::UrlGenerationError with :admin namespace and nested resources", "body": "<p>I know this quesion was probably answered a long time ago.. but looking at your code I see an error here</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>resouurces :clients do</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>resources</p>\n"}], "owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 640, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522043363, "creation_date": 1464198913, "last_edit_date": 1464207181, "question_id": 37444450, "link": "https://stackoverflow.com/questions/37444450/actioncontrollerurlgenerationerror-with-admin-namespace-and-nested-resources", "title": "ActionController::UrlGenerationError with :admin namespace and nested resources", "body": "<p>Good day StackOverflow, </p>\n\n<p>I have created an admin namespace, and within the namespace I have a client resource and nested in that is a site resource like so: </p>\n\n<pre><code># routes.rb\n\nnamespace :admin do\n\n  resouurces :clients do\n    resources :sites\n  end\n\nend\n</code></pre>\n\n<p>I am running into the following error when attempting to go from the \"site\" show page to the site \"edit\" page:</p>\n\n<pre><code>ActionController::UrlGenerationError at /admin/clients/9A81622C/sites/88AA/edit\n</code></pre>\n\n<p>and then BetterErrors gives me this below the error message:</p>\n\n<pre><code>No route matches {:action=&gt;\"show\", :client_id=&gt;nil, :controller=&gt;\"admin/clients/sites\", :id=&gt;\"88AA\"} missing required keys: [:client_id]\n</code></pre>\n\n<p>the rake routes output for the admin_client_site is as follows:</p>\n\n<pre><code>     admin_client_sites POST   /admin/clients/:client_id/sites(.:format)          admin/clients/sites#create\n  new_admin_client_site GET    /admin/clients/:client_id/sites/new(.:format)      admin/clients/sites#new\n edit_admin_client_site GET    /admin/clients/:client_id/sites/:id/edit(.:format) admin/clients/sites#edit\n      admin_client_site GET    /admin/clients/:client_id/sites/:id(.:format)      admin/clients/sites#show\n                        PATCH  /admin/clients/:client_id/sites/:id(.:format)      admin/clients/sites#update\n                        PUT    /admin/clients/:client_id/sites/:id(.:format)      admin/clients/sites#update\n                        DELETE /admin/clients/:client_id/sites/:id(.:format)      admin/clients/sites#destroy\n</code></pre>\n\n<p>the edit link on the \"show page\" is currently as follows, and this is where the problem lies(or so I believe): </p>\n\n<pre><code>&lt;%= link_to \"Edit\", edit_admin_client_site_path(@client, @site) %&gt;\n</code></pre>\n\n<p>the form_for for client, sites is:</p>\n\n<pre><code>&lt;%= form_for [:admin, @client, @site], :url =&gt; admin_client_sites_url do |f| %&gt;\n</code></pre>\n\n<p>I Have spent the last day looking at various stack answers and still can not sort this out, any help here is greatly appreciated, thanks in advance and please let me know if you need any more documentation!</p>\n\n<p>EDIT # 1 - Adds Client and Site Models</p>\n\n<pre><code>Client.rb\nclass Client &lt; ActiveRecord::Base\n  before_create :generate_client_ident\n\n    # Model Relations\n    has_many :sites, dependent: :destroy\n\n    # Model Validations\n    validates_uniqueness_of :client_ident\n\n    # Unique Admin Identifier\n    def generate_client_ident\n      begin\n        self.client_ident = SecureRandom.hex(4).upcase\n        other_client = Client.find_by(client_ident: self.client_ident)\n      end while other_client\n    end\n\n    # Vanity URL\n    def to_param\n      client_ident\n    end\nend\n\n\nSite.rb\nclass Site &lt; ActiveRecord::Base\n  before_create :generate_site_ident\n\n  # Model Relations\n  belongs_to :client\n\n  # Model Validations\n  validates_uniqueness_of :site_ident\n\n  # Unique Admin Identifier\n  def generate_site_ident\n    begin\n      self.site_ident = SecureRandom.hex(2).upcase\n      other_site = Site.find_by(site_ident: self.site_ident)\n    end while other_site\n  end\n\n  # Vanity URL\n  def to_param\n    site_ident\n  end\n\nend\n</code></pre>\n\n<p>EDIT #2 - Adds Controllers</p>\n\n<pre><code>class Admin::Clients::SitesController &lt; ApplicationController\n  before_action :authenticate_admin_admin!\n  before_action :set_site, only: [:show, :edit, :update, :destroy]\n\n  # GET /sites\n  # GET /sites.json\n  def index\n    @sites = Site.all\n  end\n\n  # GET /sites/1\n  # GET /sites/1.json\n  def show\n    @client = Client.find_by_client_ident(params[:id])\n  end\n\n  # GET /sites/new\n  def new\n    @client = Client.find_by_client_ident(params[:id])\n    @site = Site.new\n  end\n\n  # GET /sites/1/edit\n  def edit\n    @client = Client.find_by_client_ident(params[:id])\n  end\n\n  # POST /sites\n  # POST /sites.json\n  def create\n    @client = Client.find_by_client_ident(params[:id])\n    @site = Site.new(site_params)\n    @site.client = @client\n\n    respond_to do |format|\n      if @site.save\n        format.html { redirect_to admin_clients_url, notice: 'Site was successfully created.' }\n        format.json { render :show, status: :created, location: [:admin, @client] }\n      else\n        format.html { render :new }\n        format.json { render json: @site.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /sites/1\n  # PATCH/PUT /sites/1.json\n  def update\n    respond_to do |format|\n      if @site.update(site_params)\n        format.html { redirect_to [:admin, @client], notice: 'Site was successfully updated.' }\n        format.json { render :show, status: :ok, location: [:admin, @client] }\n      else\n        format.html { render :edit }\n        format.json { render json: @site.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /sites/1\n  # DELETE /sites/1.json\n  def destroy\n    @site.destroy\n    respond_to do |format|\n      format.html { redirect_to sites_url, notice: 'Site was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_site\n      @site = Site.find_by_site_ident(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def site_params\n      params.require(:site).permit(:client_id, :site_ident)\n    end\nend\n\nclass Admin::ClientsController &lt; ApplicationController\n  before_action :authenticate_admin_admin!\n  before_action :set_client, only: [:show, :edit, :update, :destroy]\n\n  # GET /clients\n  # GET /clients.json\n  def index\n    @clients = Client.all\n  end\n\n  # GET /clients/1\n  # GET /clients/1.json\n  def show\n    @client = Client.find_by_client_ident(params[:id])\n    @site = @client.sites\n  end\n\n  # GET /clients/new\n  def new\n    @client = Client.new\n  end\n\n  # GET /clients/1/edit\n  def edit\n  end\n\n  # POST /clients\n  # POST /clients.json\n  def create\n    @client = Client.new(client_params)\n\n    respond_to do |format|\n      if @client.save\n        format.html { redirect_to [:admin, @client], notice: 'Client was successfully created.' }\n        format.json { render :show, status: :created, location: @client }\n      else\n        format.html { render :new }\n        format.json { render json: @client.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /clients/1\n  # PATCH/PUT /clients/1.json\n  def update\n    respond_to do |format|\n      if @client.update(client_params)\n        format.html { redirect_to [:admin, @client], notice: 'Client was successfully updated.' }\n        format.json { render :show, status: :ok, location: @client }\n      else\n        format.html { render :edit }\n        format.json { render json: @client.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /clients/1\n  # DELETE /clients/1.json\n  def destroy\n    @client.destroy\n    respond_to do |format|\n      format.html { redirect_to [:admin, @client], notice: 'Client was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_client\n      @client = Client.find_by_client_ident(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def client_params\n      params.fetch(:client, {}).permit(:client_ident, :client_name, :street_number, :street_name, :unit_apt, :grid, :city,\n                             :province, :postal_code, :office_tel, :office_ext, :cell_tel, :fax, :contact_email, :same_as_above,\n                             :bill_to_client_name, :bill_to_street_number, :bill_to_street_name, :bill_to_grid, :bill_to_city,\n                             :bill_to_province, :bill_to_postal_code)\n    end\nend\n</code></pre>\n\n<p>EDIT #3 Adds ScreenShot Of Error\n<a href=\"https://i.stack.imgur.com/xOMVq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xOMVq.png\" alt=\"enter image description here\"></a></p>\n\n<p>EDIT #4 - Adds Rails Server Log when clicking the Edit link on the \"Site Show Page\"</p>\n\n<pre><code>Started GET \"/admin/clients/9A81622C/sites/88AA\" for ::1 at 2016-05-25 14:10:51 -0600\nProcessing by Admin::Clients::SitesController#show as HTML\n  Parameters: {\"client_id\"=&gt;\"9A81622C\", \"id\"=&gt;\"88AA\"}\n  Admin Load (0.4ms)  SELECT  \"admins\".* FROM \"admins\" WHERE \"admins\".\"id\" = $1  ORDER BY \"admins\".\"id\" ASC LIMIT 1  [[\"id\", 1]]\n  Site Load (0.2ms)  SELECT  \"sites\".* FROM \"sites\" WHERE \"sites\".\"site_ident\" = $1 LIMIT 1  [[\"site_ident\", \"88AA\"]]\n  Client Load (0.2ms)  SELECT  \"clients\".* FROM \"clients\" WHERE \"clients\".\"id\" = $1 LIMIT 1  [[\"id\", 9]]\n  Rendered admin/clients/sites/show.html.erb within layouts/application (3.4ms)\nCompleted 500 Internal Server Error in 12ms (ActiveRecord: 0.8ms)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 3, "last_activity_date": 1464198169, "creation_date": 1464198169, "answer_id": 37444231, "question_id": 37444129, "link": "https://stackoverflow.com/questions/37444129/how-do-you-prevent-the-saving-of-a-nested-object-but-still-save-the-main-object/37444231#37444231", "title": "How do you prevent the saving of a nested object but still save the main object?", "body": "<p>Use <code>:reject_if</code> to silently drop any record that does not pass your logic:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :notes\n  accepts_nested_attributes_for :notes, reject_if: proc { |attributes| attributes['note_text'].blank? }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1464198257, "creation_date": 1464198257, "answer_id": 37444259, "question_id": 37444129, "link": "https://stackoverflow.com/questions/37444129/how-do-you-prevent-the-saving-of-a-nested-object-but-still-save-the-main-object/37444259#37444259", "title": "How do you prevent the saving of a nested object but still save the main object?", "body": "<p>You can always add a validation that precludes empty notes from being saved:</p>\n\n<pre><code>class Note &lt; ActiveRecord::Base\n  validates :note_text, presence: true\nend\n</code></pre>\n\n<p>This will trigger an exception on saving if you use <code>save!</code> so you may want to screen out any invalid notes:</p>\n\n<pre><code>before_save :remove_empty_notes\n\ndef remove_empty_notes\n  self.notes.reject! { |note| !note.valid? }\nend\n</code></pre>\n"}], "owner": {"reputation": 488, "user_id": 5551426, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1972921d30c8fdee66821d155b8937cf?s=128&d=identicon&r=PG", "display_name": "MechDog", "link": "https://stackoverflow.com/users/5551426/mechdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 37444231, "answer_count": 2, "score": 0, "last_activity_date": 1464198257, "creation_date": 1464197831, "question_id": 37444129, "link": "https://stackoverflow.com/questions/37444129/how-do-you-prevent-the-saving-of-a-nested-object-but-still-save-the-main-object", "title": "How do you prevent the saving of a nested object but still save the main object?", "body": "<p>I have a 'notes' object nested inside multiple other objects, for example 'user'. I want to only add/save a new note if someone has filled out something in the note_text field. I thought I found a way but it stops the saving of the rest of the object as well due to the error.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :notes\n\n  accepts_nested_attributes_for :notes\n\nend  \n\nclass Note &lt; ActiveRecord::Base\n  belongs_to :user\n\n  before_save :check_for_blank_note\n\n  def check_for_blank_note\n    if self.note_text.nil? || self.note_text.blank?\n      false\n    else\n      true\n    end\n  end\nend\n</code></pre>\n\n<p>I was hoping to just stop the save on the notes and let the user be updated and saved.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1464201142, "post_id": 37443483, "comment_id": 62392287, "body": "Your first &quot;wrong code&quot; looks like it ought to work, except method arguments can&#39;t begin with a capital letter. What problem are you having?"}, {"owner": {"reputation": 444, "user_id": 5230243, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/08ebf9d5ee1ec1b87a2ccc861b5809d7?s=128&d=identicon&r=PG&f=1", "display_name": "fl-web", "link": "https://stackoverflow.com/users/5230243/fl-web"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1464209557, "post_id": 37443483, "comment_id": 62396784, "body": "Thanks frinds! I have try number of solutions (seems first example too) with no success. Seems it was confuse (I have no try first example). First example worked fine. So only one question is here. How to return block or lambda from function and pass it as block to another function?"}], "owner": {"reputation": 444, "user_id": 5230243, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/08ebf9d5ee1ec1b87a2ccc861b5809d7?s=128&d=identicon&r=PG&f=1", "display_name": "fl-web", "link": "https://stackoverflow.com/users/5230243/fl-web"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464209697, "creation_date": 1464195684, "last_edit_date": 1464209697, "question_id": 37443483, "link": "https://stackoverflow.com/questions/37443483/how-to-return-block-or-unificate-table-rendering-activeadmin", "title": "how to return block or unificate table rendering (activeadmin)", "body": "<p>I have some different sets of active record. Each record set is rendered with identical code.</p>\n\n<p>The original code looks like this:</p>\n\n<pre><code>columns do\n  column do\n    panel \"Panel\" do\n      table_for Record.where( ... ) do\n        column(\"id\")    {|r| r.id }\n        column(\"field\") {|r| r.field }\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>I actually want something like this:</p>\n\n<pre><code># (wrong code) (EDIT: actually work fine - it is not wrong)\n\ndef render_table(records)\n  table_for records do\n    column(\"id\")    {|r| r.id }\n    column(\"field\") {|r| r.field }\n  end\nend\n\npanel \"Panel\" { render_table Record.where( ... ) }\n</code></pre>\n\n<p>As well as like this too:</p>\n\n<pre><code># ( wrong code )\n\ndef render_table_fields\n  render lambda do\n    column(\"id\")    {|r| r.id }\n    column(\"field\") {|r| r.field }\n  end\nend\n\npanel \"Panel\" do\n  table_for Record.where( ... ) { render_table_fields.call }\nend\n</code></pre>\n\n<p>How do I refactor to extract table rendering code?</p>\n\n<p>How to return block or lambda from function and pass it as block to another function?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-ec2", "rake"], "answers": [{"tags": [], "owner": {"reputation": 118, "user_id": 1734471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3ES.jpg?s=128&g=1", "display_name": "Raj Ankur", "link": "https://stackoverflow.com/users/1734471/raj-ankur"}, "is_accepted": false, "score": 0, "last_activity_date": 1464197276, "creation_date": 1464197276, "answer_id": 37443956, "question_id": 37443365, "link": "https://stackoverflow.com/questions/37443365/bundle-exec-rake-secret-cannot-load-such-file-phusion-passenger-rack-handler/37443956#37443956", "title": "bundle exec rake secret cannot load such file -- phusion_passenger/rack_handler", "body": "<p>I added</p>\n\n<pre><code>gem \"passenger\", \"&gt;=5.0.25\", require: \"phusion_passenger/rack_handler\"\n</code></pre>\n\n<p>followed by <strong>bundle install</strong> to get rid of the error.</p>\n"}], "owner": {"reputation": 118, "user_id": 1734471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3ES.jpg?s=128&g=1", "display_name": "Raj Ankur", "link": "https://stackoverflow.com/users/1734471/raj-ankur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464197276, "creation_date": 1464195342, "question_id": 37443365, "link": "https://stackoverflow.com/questions/37443365/bundle-exec-rake-secret-cannot-load-such-file-phusion-passenger-rack-handler", "title": "bundle exec rake secret cannot load such file -- phusion_passenger/rack_handler", "body": "<p>When I run this command to generate secret on production server. I followed the installation documentation from the official website of Passenger, since I'm using Passenger with NGINX.\nThe URL to the documentation can be found here: <a href=\"https://www.phusionpassenger.com/library/walkthroughs/deploy/ruby/aws/nginx/oss/rubygems_rvm/deploy_app.html\" rel=\"nofollow\">https://www.phusionpassenger.com/library/walkthroughs/deploy/ruby/aws/nginx/oss/rubygems_rvm/deploy_app.html</a>:</p>\n\n<p><strong>bundle exec rake secret</strong></p>\n\n<pre><code>[ec2-user@ip-172-31-20-167 feutradmin]$ bundle exec rake secret\nrake aborted!\nLoadError: cannot load such file -- phusion_passenger/rack_handler\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/runtime.rb:86:in `require'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/runtime.rb:86:in `block (2 levels) in require'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/runtime.rb:81:in `each'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/runtime.rb:81:in `block in require'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/runtime.rb:70:in `each'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/runtime.rb:70:in `require'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler.rb:102:in `require'\n/var/www/html/feutradmin/config/application.rb:7:in `&lt;top (required)&gt;'\n/var/www/html/feutradmin/Rakefile:4:in `require'\n/var/www/html/feutradmin/Rakefile:4:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/cli/exec.rb:63:in `load'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/cli/exec.rb:63:in `kernel_load'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/cli/exec.rb:24:in `run'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/cli.rb:304:in `exec'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/vendor/thor/lib/thor.rb:359:in `dispatch'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/vendor/thor/lib/thor/base.rb:440:in `start'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/cli.rb:11:in `start'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/exe/bundle:27:in `block in &lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/lib/bundler/friendly_errors.rb:98:in `with_friendly_errors'\n/usr/local/rvm/gems/ruby-2.3.0/gems/bundler-1.12.4/exe/bundle:19:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.3.0/bin/bundle:23:in `load'\n/usr/local/rvm/gems/ruby-2.3.0/bin/bundle:23:in `&lt;main&gt;'\n/usr/local/rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `eval'\n/usr/local/rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n(See full trace by running task with --trace)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "get", "put"], "comments": [{"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1464195602, "post_id": 37443312, "comment_id": 62389194, "body": "Try using <code>button_to</code> instead of <code>link_to</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 1, "creation_date": 1464197894, "post_id": 37443942, "comment_id": 62390447, "body": "This is a great suggestion, make sure data-method=&quot;put&quot; is set, and makes ure you are requering <code>jquery_ujs</code> in your <i>application.js</i>."}, {"owner": {"reputation": 692, "user_id": 5672966, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/897026250394112/picture?type=large", "display_name": "Ezequiel Ramiro", "link": "https://stackoverflow.com/users/5672966/ezequiel-ramiro"}, "edited": false, "score": 0, "creation_date": 1464199197, "post_id": 37443942, "comment_id": 62391206, "body": "That was it!! Thank you so much. The problem was my Jquery and Rails Query due to <a href=\"http://stackoverflow.com/questions/28421547/rails-execjsprogramerror-in-pageshome\" title=\"rails execjsprogramerror in pageshome\">stackoverflow.com/questions/28421547/&hellip;</a>"}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 3, "last_activity_date": 1464197220, "creation_date": 1464197220, "answer_id": 37443942, "question_id": 37443312, "link": "https://stackoverflow.com/questions/37443312/method-put-not-working-instead-get-method/37443942#37443942", "title": ":method put: not working instead Get method", "body": "<p>You are using correct format and your code is should generate something like this:</p>\n\n<pre><code>&lt;a data-method=\"put\" href=\"...\"&gt;\n</code></pre>\n\n<p>From your routes error message we can conclude that it is not being sent using <code>POST</code> with <code>_method=put</code> params. So, the problem must be that you did not include jQuery and Rails jQuery extension javascript files.</p>\n\n<p>An easy fix would be to include <code>application.js</code> file (jquery and rails js extension are included by default) in your page.</p>\n"}, {"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1464201743, "post_id": 37444213, "comment_id": 62392629, "body": "Are you sure about that? Wouldn&#39;t <code>options</code> will be <code>{ :method =&gt; :put }</code> and <code>html_options</code> be <code>nil</code>?"}, {"owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1464202493, "post_id": 37444213, "comment_id": 62393064, "body": "My mistake, edited answer with a correct solution. (options = { method: :put } is what is needed.)"}], "tags": [], "owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "is_accepted": false, "score": 0, "last_activity_date": 1464202418, "last_edit_date": 1464202418, "creation_date": 1464198108, "answer_id": 37444213, "question_id": 37443312, "link": "https://stackoverflow.com/questions/37443312/method-put-not-working-instead-get-method/37444213#37444213", "title": ":method put: not working instead Get method", "body": "<p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to\" rel=\"nofollow\">link_to</a> signature :</p>\n\n<pre><code>link_to(name = nil, options = nil, html_options = nil, &amp;block)\n</code></pre>\n\n<p>According to the doc, :method belongs to the options hash.</p>\n\n<p>calling</p>\n\n<pre><code>&lt;%= link_to like_post_path(@post), :method =&gt; :put do %&gt;\n</code></pre>\n\n<p>results in putting into </p>\n\n<ul>\n<li>name : like_post_path(@post),</li>\n<li>options: nil,</li>\n<li>html_options: { method: :put }</li>\n</ul>\n\n<p>From <a href=\"http://ruby-doc.org/core-2.3.1/Hash.html\" rel=\"nofollow\">Hash</a></p>\n\n<p>Hashes are also commonly used as a way to have named parameters in functions. Note that no brackets are used below. If a hash is the last argument on a method call, no braces are needed, thus creating a really clean interface:</p>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>&lt;%= link_to like_post_path(@post), { method: :put } do %&gt;\n</code></pre>\n\n<p>leads to what you are trying to achieve.</p>\n"}], "owner": {"reputation": 692, "user_id": 5672966, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/897026250394112/picture?type=large", "display_name": "Ezequiel Ramiro", "link": "https://stackoverflow.com/users/5672966/ezequiel-ramiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 577, "favorite_count": 0, "accepted_answer_id": 37443942, "answer_count": 2, "score": 1, "last_activity_date": 1464202418, "creation_date": 1464195162, "last_edit_date": 1464196791, "question_id": 37443312, "link": "https://stackoverflow.com/questions/37443312/method-put-not-working-instead-get-method", "title": ":method put: not working instead Get method", "body": "<p>So I am trying to use the following route:</p>\n\n<pre><code>&lt;%= link_to like_post_path(@post), :method =&gt; :put do %&gt;\n</code></pre>\n\n<p>But I don't know why is using <code>GET</code> method instead of <code>PUT</code></p>\n\n<pre><code> No route matches [GET] \"/posts/1/like\"\n</code></pre>\n\n<p>makes no sense to me..</p>\n\n<p>myroutes.rb:</p>\n\n<pre><code> resources :posts do\n    member do\n        put \"like\" =&gt; \"posts#upvote\"\n        put \"dislike\" =&gt; \"posts#downvote\"\n    end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1464197227, "post_id": 37443131, "comment_id": 62390076, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the links, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need to know your expected output."}], "answers": [{"comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1464195736, "post_id": 37443346, "comment_id": 62389279, "body": "Instead of <code>each</code>, you could use <code>map</code> to get the array directly"}, {"owner": {"reputation": 51, "user_id": 3225841, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a7c3000b9f2e1be116ad1567ce89a660?s=128&d=identicon&r=PG&f=1", "display_name": "BengDai", "link": "https://stackoverflow.com/users/3225841/bengdai"}, "edited": false, "score": 0, "creation_date": 1464196142, "post_id": 37443346, "comment_id": 62389494, "body": "I can now print the array for sure, but when I doing &quot;array[0].to_i&quot; and try to puts it, compiler tells me &quot;undefined method `to_i&#39; for [&quot;4&quot;]:Array (NoMethodError)&quot; why this happen?"}], "tags": [], "owner": {"reputation": 1656, "user_id": 6138119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzV7y.jpg?s=128&g=1", "display_name": "Pravesh Khatri", "link": "https://stackoverflow.com/users/6138119/pravesh-khatri"}, "is_accepted": true, "score": 3, "last_activity_date": 1464197073, "last_edit_date": 1464197073, "creation_date": 1464195281, "answer_id": 37443346, "question_id": 37443131, "link": "https://stackoverflow.com/questions/37443131/how-can-i-take-out-digits-in-each-string/37443346#37443346", "title": "How can I take out digits in each string?", "body": "<p>You can try this</p>\n\n<pre><code> array = []\n [\n     \"I have 4 cucumbers\", \n     \"I've been given 19 radishes\",\n     \"I have 5 carrots in my hand\",\n     \"I gots 10 zucchini!\"\n ].each do |string|\n      array.push(string.scan(/\\d+/))\n end\n\n new_array = array.flatten.map {|i| i.to_i}\n #=&gt; [4, 19, 5, 10]\n\n new_array.map {|i| i.to_i + 4}   #if you want to add 4 to each element\n =&gt; [8, 23, 9, 14]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1464198184, "last_edit_date": 1464198184, "creation_date": 1464197065, "answer_id": 37443886, "question_id": 37443131, "link": "https://stackoverflow.com/questions/37443131/how-can-i-take-out-digits-in-each-string/37443886#37443886", "title": "How can I take out digits in each string?", "body": "<p>It's not entirely clear what your expected output should be. </p>\n\n<p>Meditate on this:</p>\n\n<pre><code>ary = [\"a 4 b\", \"a 19 b\"]\n\nary.each do |string|\n  string.gsub!(/\\b\\d+\\b/) { |num| (num.to_i + 4).to_s }\nend\n\nary # =&gt; [\"a 8 b\", \"a 23 b\"]\n</code></pre>\n\n<p><code>gsub!</code> changes a string in place, whereas <code>gsub</code> returns the changed string. The difference would be:</p>\n\n<pre><code>ary = [\"a 4 b\", \"a 19 b\"]\n\nnew_ary = ary.map do |string|\n  string.gsub(/\\b\\d+\\b/) { |num| (num.to_i + 4).to_s }\nend\n\nary # =&gt; [\"a 4 b\", \"a 19 b\"]\nnew_ary # =&gt; [\"a 8 b\", \"a 23 b\"]\n</code></pre>\n\n<p>Notice that <code>each</code> became <code>map</code>, because we want to return an array of changed values, and <code>gsub!</code> because <code>gsub</code>.</p>\n\n<p>It's important to use <code>\\b</code> when searching for numbers in strings, otherwise you can run into problems with false-positive hits affecting digits inside \"words\" like \"foo1\".</p>\n\n<p>If you want to return only the values after they've been incremented:</p>\n\n<pre><code>ary = [\"a 0 b\", \"a 0 b 1\"]\n\nary.map{ |a| a.scan(/\\b\\d+/).map{ |i| i.to_i + 4 }}  # =&gt; [[4], [4, 5]]\n</code></pre>\n\n<p>Which, broken down, is doing this:</p>\n\n<pre><code>ary\n.map{ |a|\n  a  # =&gt; \"a 0 b\", \"a 0 b 1\"\n  .scan(/\\b\\d+/) # =&gt; [\"0\"], [\"0\", \"1\"]\n  .map{ |i| i.to_i + 4 } # =&gt; [4], [4, 5]\n}  # =&gt; [[4], [4, 5]]\n</code></pre>\n\n<hr>\n\n<p>In your code you're doing:</p>\n\n<pre><code>match = /^I have (\\d) ([a-z]*)$/.match(string)\nmatch2 = /I've been given (\\d+) ([a-z]*)$/.match(string)\n</code></pre>\n\n<p>If you're processing freeform text you can't create a match for every possible incoming string; There are infinite possibilities. Even if you're in charge of the string creation, you shouldn't need to match entire strings, only specific parts. The more you try to match, the more likely it is the code will fail. </p>\n"}], "owner": {"reputation": 51, "user_id": 3225841, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a7c3000b9f2e1be116ad1567ce89a660?s=128&d=identicon&r=PG&f=1", "display_name": "BengDai", "link": "https://stackoverflow.com/users/3225841/bengdai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 37443346, "answer_count": 2, "score": 0, "last_activity_date": 1464198813, "creation_date": 1464194461, "last_edit_date": 1464198813, "question_id": 37443131, "link": "https://stackoverflow.com/questions/37443131/how-can-i-take-out-digits-in-each-string", "title": "How can I take out digits in each string?", "body": "<p>I'm trying to take out a number from each string and add 4 to each of them, but the compiler keeps telling me that: </p>\n\n<blockquote>\n  <p>undefined method `captures' for nil:NilClass (NoMethodError)</p>\n</blockquote>\n\n<p>There is output 8 with the error message if I don't add <code>match2</code> and <code>int2</code> codes. </p>\n\n<p>expecting output:</p>\n\n<pre><code>8\n23\n9\n14\n</code></pre>\n\n<p>How can I fix this?</p>\n\n<pre><code>[\n    \"I have 4 cucumbers\",\n    \"I've been given 19 radishes\",\n    \"I have 5 carrots in my hand\",\n    \"I gots 10 zucchini!\"\n].each do |string|\n\n  match = /^I have (\\d) ([a-z]*)$/.match(string)\n  match2 = /I've been given (\\d+) ([a-z]*)$/.match(string)\n\n  int = match.captures[0].to_i\n  int += 4\n  int2 = match2.captures[0].to_i\n  int2 += 4\n\n  puts int\n  puts int2\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "recursion", "hash"], "comments": [{"owner": {"reputation": 2600, "user_id": 876438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee459f598ec33dfdb43468c0f48dde10?s=128&d=identicon&r=PG", "display_name": "Ravi Sankar Raju", "link": "https://stackoverflow.com/users/876438/ravi-sankar-raju"}, "edited": false, "score": 1, "creation_date": 1464195160, "post_id": 37443055, "comment_id": 62388952, "body": "Inner hashes will always be wrapped in an array ?"}, {"owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "reply_to_user": {"reputation": 2600, "user_id": 876438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee459f598ec33dfdb43468c0f48dde10?s=128&d=identicon&r=PG", "display_name": "Ravi Sankar Raju", "link": "https://stackoverflow.com/users/876438/ravi-sankar-raju"}, "edited": false, "score": 0, "creation_date": 1464195341, "post_id": 37443055, "comment_id": 62389042, "body": "yes, that&#39;s why i&#39;m checking for array in the if function"}, {"owner": {"reputation": 2600, "user_id": 876438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee459f598ec33dfdb43468c0f48dde10?s=128&d=identicon&r=PG", "display_name": "Ravi Sankar Raju", "link": "https://stackoverflow.com/users/876438/ravi-sankar-raju"}, "edited": false, "score": 0, "creation_date": 1464195663, "post_id": 37443055, "comment_id": 62389228, "body": "check out my solution below. there&#39;s a tiny bug in your code"}, {"owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "edited": false, "score": 0, "creation_date": 1464199475, "post_id": 37443055, "comment_id": 62391373, "body": "is there a difference?"}], "answers": [{"tags": [], "owner": {"reputation": 1810, "user_id": 1301840, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ad9bbcb458c0923c2946f85b6b98107b?s=128&d=identicon&r=PG&f=1", "display_name": "lusketeer", "link": "https://stackoverflow.com/users/1301840/lusketeer"}, "is_accepted": false, "score": 0, "last_activity_date": 1464194916, "creation_date": 1464194916, "answer_id": 37443241, "question_id": 37443055, "link": "https://stackoverflow.com/questions/37443055/how-to-recursively-check-for-presence-of-specific-key/37443241#37443241", "title": "How to recursively check for presence of specific key", "body": "<p>Give this a shot, I tried it, seems to work fine for me</p>\n\n<pre><code>def has_key(hash, key)\n  if hash.keys.include?(key)\n    true\n  else\n    # get the values of the current hash, flatten out to not include arrays\n    new_hash = hash.values.flatten\n    # then filter out any element that's not a hash\n    new_hash = new_hash.select {|b| b.is_a?(Hash)}\n    # merge all the hashes into single hash\n    new_hash = new_hash.inject {|first, second| first.merge(second)}\n\n    if new_hash\n      has_key(new_hash, key)\n    else\n      false\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "edited": false, "score": 0, "creation_date": 1464199026, "post_id": 37443275, "comment_id": 62391095, "body": "in theory i think this answer is totally right (someone else gave it as well). but in practice i can&#39;t get it to pass. i think i just have a typo somewhere... may need to take a look later"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "edited": false, "score": 0, "creation_date": 1464201041, "post_id": 37443275, "comment_id": 62392227, "body": "I don&#39;t see another answer that is the same as mine. Please explain."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1464200502, "last_edit_date": 1464200502, "creation_date": 1464195023, "answer_id": 37443275, "question_id": 37443055, "link": "https://stackoverflow.com/questions/37443055/how-to-recursively-check-for-presence-of-specific-key/37443275#37443275", "title": "How to recursively check for presence of specific key", "body": "<p>The following will work.</p>\n\n<pre><code>def has_key(hash, key)\n  hash.each do |k, v|\n    return true if k == key\n    if v.is_a? Array\n      v.each do |h|\n        rv = has_key(h, key)\n        return rv if rv\n      end\n    end\n  end\n  false\nend     \n</code></pre>\n\n<p>This passes all your tests. One more:</p>\n\n<pre><code>h = { \"a\" =&gt; 1, \n      \"b\" =&gt; [{ \"c\" =&gt; 2, \"d\" =&gt; 3 },\n              {\"e\"=&gt; [{ \"f\" =&gt; \"4\" },\n                      { \"g\" =&gt; [{ \"h\" =&gt; 5 },\n                                { \"i\" =&gt; 6, \"refund\" =&gt; 7 }\n                               ]\n                      }             \n                     ]\n              }\n             ]\n    }\n\nhas_key h, \"refund\"\n  #=&gt; true\n\nh[\"b\"][1][\"e\"][1][\"g\"] = [{ \"h\"=&gt;5 }] \nh\n  #=&gt; {\"a\"=&gt;1, \"b\"=&gt;[{\"c\"=&gt;2, \"d\"=&gt;3}, {\"e\"=&gt;[{\"f\"=&gt;\"4\"}, {\"g\"=&gt;[{\"h\"=&gt;5}]}]}]} \nhas_key h, \"refund\"\n  #=&gt; false \n</code></pre>\n\n<p>Inspired by @Wand's answer, for</p>\n\n<pre><code>h = {\"a\"=&gt;\"3\", \"b\"=&gt;[{\"c\"=&gt;\"1\", \"d\"=&gt;\"2\"}, {\"e\"=&gt;[{\"test\"=&gt;\"3\", \"refund\"=&gt;\"5\"}]}]}\n</code></pre>\n\n<p>you don't have to load JSON:</p>\n\n<pre><code>str = h.to_s\n  #=&gt; \"{\\\"a\\\"=&gt;\\\"3\\\", \\\"b\\\"=&gt;[{\\\"c\\\"=&gt;\\\"1\\\", \\\"d\\\"=&gt;\\\"2\\\"}, {\\\"e\\\"=&gt;[{\\\"test\\\"=&gt;\\\"3\\\", \\\"refund\\\"=&gt;\\\"5\\\"}]}]}\" \nstr =~ /\\\"refund\\\"=&gt;/\n  #=&gt; 60 (truthy) \n</code></pre>\n\n<p>I confess to being a little uncomfortable with any approach that converts the hash to a string, and then parsing the string, for fear that string formats may change in future.</p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1464198606, "post_id": 37443426, "comment_id": 62390836, "body": "It&#39;s a smart end-run that almost solves the problem. It&#39;ll fail if a value matched the target key."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464198694, "post_id": 37443426, "comment_id": 62390891, "body": "What if there is a key &quot;refunded&quot; or a value &quot;refund&quot;?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1464198769, "post_id": 37443426, "comment_id": 62390934, "body": "It&#39;ll ignore a key &quot;refunded&quot; because it&#39;s searching for <code>&#39;&quot;refund&quot;:&#39;</code> but a value of <code>&#39;&quot;refund&quot;:&#39;</code> will trick it."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1464198830, "post_id": 37443426, "comment_id": 62390974, "body": "@theTinMan I think use of <code>:</code> helps in matching against only keys, I have tried that scenario"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464198934, "post_id": 37443426, "comment_id": 62391042, "body": "@CarySwoveland If the value is <code>&quot;refund&quot;:</code>, the output JSON will escape the quotes and it will look like <code>&quot;\\&quot;refund\\&quot;:&quot;</code> and it will still be non-match"}, {"owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "edited": false, "score": 0, "creation_date": 1464199045, "post_id": 37443426, "comment_id": 62391110, "body": "i like this for being incredibly brief and out of the boxy"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464199058, "post_id": 37443426, "comment_id": 62391122, "body": "Sorry, I missed the colon, so it can&#39;t be a value, but there still could be a key <code>&quot;arefund&quot;</code>. True, that&#39;s not a word, but we&#39;re not talking about the particular word &quot;refund&quot;. I suggest you use the regular expression <code>&#47;\\brefund:&#47;</code>."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464199128, "post_id": 37443426, "comment_id": 62391163, "body": "@CarySwoveland The quotes around <code>refund</code> is part of JSON, so if one was looking for <code>arefund</code>, the key will be <code>&quot;arefund&quot;:</code> in JSON which is not going to match with <code>&quot;refund&quot;:</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464199268, "post_id": 37443426, "comment_id": 62391247, "body": "Egad, not only did I miss the colon, but also the single and double quotes! Good one!"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464199408, "post_id": 37443426, "comment_id": 62391320, "body": "@CarySwoveland Thanks :-)"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 0, "last_activity_date": 1464198543, "last_edit_date": 1464198543, "creation_date": 1464195519, "answer_id": 37443426, "question_id": 37443055, "link": "https://stackoverflow.com/questions/37443055/how-to-recursively-check-for-presence-of-specific-key/37443426#37443426", "title": "How to recursively check for presence of specific key", "body": "<p>You could convert the hash to JSON and then check whether the JSON has <code>\"refund\":</code> present in it, as any key will be serialised to JSON in the form <code>\"key\":</code>.</p>\n\n<pre><code>require \"json\"\nhash.to_json.include?('\"refund\":')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2600, "user_id": 876438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee459f598ec33dfdb43468c0f48dde10?s=128&d=identicon&r=PG", "display_name": "Ravi Sankar Raju", "link": "https://stackoverflow.com/users/876438/ravi-sankar-raju"}, "edited": false, "score": 0, "creation_date": 1464196958, "post_id": 37443444, "comment_id": 62389931, "body": "does the solution work ? it seems logical enough to work. but i have some issues in my local machine i could not test it."}, {"owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "edited": false, "score": 0, "creation_date": 1464198146, "post_id": 37443444, "comment_id": 62390596, "body": "i don&#39;t know why.. i might be very obtuse here, but i tried this myself and it didn&#39;t work, so i asked on SO. another person had the exact same answer..."}], "tags": [], "owner": {"reputation": 2600, "user_id": 876438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee459f598ec33dfdb43468c0f48dde10?s=128&d=identicon&r=PG", "display_name": "Ravi Sankar Raju", "link": "https://stackoverflow.com/users/876438/ravi-sankar-raju"}, "is_accepted": false, "score": 1, "last_activity_date": 1464198467, "last_edit_date": 1464198467, "creation_date": 1464195574, "answer_id": 37443444, "question_id": 37443055, "link": "https://stackoverflow.com/questions/37443055/how-to-recursively-check-for-presence-of-specific-key/37443444#37443444", "title": "How to recursively check for presence of specific key", "body": "<p>The problem with your code seems to be in here:</p>\n\n<pre><code>elsif v.class.to_s == \"Array\"\n    v.each do |inner_hash|\n        return has_key(inner_hash,key)\n    end\nelse\n</code></pre>\n\n<p>This would always return <code>has_key(inner_array[0])</code> without checking subsequent values. The fix is to return only if it's true, else continue checking, like this:</p>\n\n<pre><code>elsif v.class.to_s == \"Array\"\n    v.each do |inner_hash|\n        if(has_key(inner_hash,key))\n            return true\n        end\n    end\nelse\n    return false\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464200763, "post_id": 37444746, "comment_id": 62392065, "body": "This only works for one level of nesting. See the tests the OP gave. Also, the nesting appears to be associated with values being arrays."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464201441, "post_id": 37444746, "comment_id": 62392443, "body": "It works for multiple levels. The last test hash is three nested hashes. The OP does use arrays of hashes but all instances are single hashes in the arrays. Dealing with that is a pretty simple change."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464201946, "post_id": 37444746, "comment_id": 62392753, "body": "Ah, yes. I hadn&#39;t noticed that all the arrays in the test hashes contained only a single hash. We don&#39;t know if that is part of the specification, so you should perhaps give the proviso. In that case, however, interesting answer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464202380, "post_id": 37444746, "comment_id": 62392996, "body": "I see that some of the test problems have arrays containing multiple hashes, but I&#39;d think you could deal with that. Why don&#39;t you edit your answer to deal with the general case?"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1464202471, "last_edit_date": 1495541333, "creation_date": 1464200016, "answer_id": 37444746, "question_id": 37443055, "link": "https://stackoverflow.com/questions/37443055/how-to-recursively-check-for-presence-of-specific-key/37444746#37444746", "title": "How to recursively check for presence of specific key", "body": "<p>I'd do something like:</p>\n\n<pre><code>class Hash\n  def key_exists?(key)\n    self.keys.include?(key) ||\n    self.values.any?{ |v|\n      Hash === v &amp;&amp;\n        v.key_exists?(key)\n    }\n  end\nend\n\n{'a' =&gt; 1}.key_exists?('a')  # =&gt; true\n{'b' =&gt; 1}.key_exists?('a')  # =&gt; false\n{'b' =&gt; {}}.key_exists?('a')  # =&gt; false\n\n{'b' =&gt; {'a' =&gt; {}}}.key_exists?('a')  # =&gt; true\n{'b' =&gt; {'a' =&gt; 1}}.key_exists?('a')  # =&gt; true\n\n{'b' =&gt; {'b' =&gt; {}}}.key_exists?('a')  # =&gt; false\n{'b' =&gt; {'b' =&gt; {'a' =&gt; 1}}}.key_exists?('a')  # =&gt; true\n</code></pre>\n\n<p><em>Insert all the usual warnings about extending core classes and recommendations to use the alternative ways of doing it here.</em></p>\n\n<p>Note: Similarly, \"<a href=\"https://stackoverflow.com/questions/30178898/iterate-over-every-key-in-nested-hash/30179897#30179897\">iterate over every key in nested hash</a>\" could be used to easily determine a true/false value and it demonstrates the safe way to extend a core class.</p>\n"}], "owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "accepted_answer_id": 37443426, "answer_count": 5, "score": 0, "last_activity_date": 1464202471, "creation_date": 1464194207, "last_edit_date": 1464198378, "question_id": 37443055, "link": "https://stackoverflow.com/questions/37443055/how-to-recursively-check-for-presence-of-specific-key", "title": "How to recursively check for presence of specific key", "body": "<p>Given a Ruby hash of parameters that are infinitely nested, I want to write a function that returns <code>true</code> if a given key is in those parameters. </p>\n\n<p>This is the function I have so far, but it's not quite right, and I'm at a loss as to why:</p>\n\n<pre><code>def has_key(hash, key)\n    hash.each do |k, v|\n        if k == key\n            return true\n        elsif v.class.to_s == \"Array\"\n            v.each do |inner_hash|\n                return has_key(inner_hash,key)\n            end\n        else \n            return false\n        end\n    end\nend\n</code></pre>\n\n<p>The method should return the following results:</p>\n\n<pre><code># all check for presence of \"refund\" key\n\nhas_key({\n  \"refund\" =&gt; \"2\"\n}, \"refund\")\n=&gt; true\n\nhas_key({\n  \"whatever\" =&gt; \"3\"\n}, \"refund\")\n=&gt; false\n\nhas_key({\n  \"whatever\" =&gt; \"3\", \n  \"child_attributes\" =&gt; [{\n     \"refund\" =&gt; \"1\"\n  }]\n}, \"refund\")\n=&gt; true    \n\nhas_key({\n  \"whatever\" =&gt; \"3\", \n  \"child_attributes\" =&gt; [{\n    \"nope\" =&gt; \"4\"\n  }]\n}, \"refund\")\n=&gt; false\n\nhas_key({\n  \"whatever\" =&gt; \"3\", \n  \"child_attributes\" =&gt; [{\n    \"a\" =&gt; \"1\", \n    \"refund\" =&gt; \"2\"\n  }]\n}, \"refund\")\n=&gt; true\n\nhas_key({\n  \"whatever\" =&gt; \"3\", \n  \"child_attributes\" =&gt; [\n    {\"a\" =&gt; \"1\", \"b\" =&gt; \"2\"},\n    {\"aa\" =&gt; \"1\", \"refund\" =&gt; \"2\"}\n  ]\n}, \"refund\")\n=&gt; true\n\nhas_key({\n  \"whatever\" =&gt; \"3\", \n  \"child_attributes\" =&gt; [\n    {\"a\" =&gt; \"1\", \"b\" =&gt; \"2\"},\n    {\"grand_child_attributes\" =&gt; [\n      {\"test\" =&gt; \"3\"}\n    ]}\n  ]\n}, \"refund\")\n=&gt; false\n\nhas_key({\n  \"whatever\" =&gt; \"3\", \n  \"child_attributes\" =&gt; [\n    {\"a\" =&gt; \"1\", \"b\" =&gt; \"2\"},\n    {\"grand_child_attributes\" =&gt; [\n      {\"test\" =&gt; \"3\"}, {\"refund\" =&gt; \"5\"}\n    ]}\n  ]\n}, \"refund\")\n=&gt; true\n\nhas_key({\n  \"whatever\" =&gt; \"3\", \n  \"child_attributes\" =&gt; [\n    {\"a\" =&gt; \"1\", \"b\" =&gt; \"2\"},\n    {\"grand_child_attributes\" =&gt; [\n      {\"test\" =&gt; \"3\", \"refund\" =&gt; \"5\"}\n    ]}\n  ]\n}, \"refund\")\n=&gt; true\n</code></pre>\n"}, {"tags": ["ruby", "performance"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1464194169, "post_id": 37442812, "comment_id": 62388401, "body": "Profile it and determine if it does.  The likely answer is &quot;it doesn&#39;t&quot;, but that genuinely depends on your usage of it and how often these arrays are generated."}, {"owner": {"reputation": 99, "user_id": 5591649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zkHss.jpg?s=128&g=1", "display_name": "Faraaz Ahmad", "link": "https://stackoverflow.com/users/5591649/faraaz-ahmad"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1464194327, "post_id": 37442812, "comment_id": 62388490, "body": "is there a tool to &quot;compare&quot; it, other than creating separate programs and/or using irb"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 3, "creation_date": 1464201064, "post_id": 37442812, "comment_id": 62392241, "body": "As Ruby prepares to run the script it will process <code>%w(...)</code> and <code>[...]</code> array assignments. It doesn&#39;t do it when evaluating the script, so they won&#39;t affect the speed. This is similar to whether single-quote strings are faster than double-quote strings, they&#39;re the same or so close it&#39;s not an issue. Also, define &quot;slow&quot;, as speed is relative to many things. Ruby, even on a &quot;slow&quot; host, is usually plenty fast to do whatever we need as it&#39;s waiting on databases, other hosts, and users."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 5591649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zkHss.jpg?s=128&g=1", "display_name": "Faraaz Ahmad", "link": "https://stackoverflow.com/users/5591649/faraaz-ahmad"}, "edited": false, "score": 0, "creation_date": 1464215007, "post_id": 37444100, "comment_id": 62399037, "body": "Of course! thank you. I wasn&#39;t really abandoning ruby for C!"}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 1, "last_activity_date": 1464197729, "creation_date": 1464197729, "answer_id": 37444100, "question_id": 37442812, "link": "https://stackoverflow.com/questions/37442812/performance-of-rubys-own-methods/37444100#37444100", "title": "Performance of Ruby&#39;s own methods", "body": "<p>Some of <em>MRI Ruby</em> is coded in C, and the rest of it in Ruby.  Some of <em>JRuby</em> is coded in Java, and the rest of it in Ruby.</p>\n\n<p>Ruby is an awesome language, but it can be slower than some other languages, especially lower level languages like Java and C.</p>\n\n<p>Ruby's strength is not runtime performance, but rather the clarity, expressiveness, conciseness, and speed <em>of development</em>.</p>\n\n<p>There is no one answer to the question, since each situation's calculation of cost and benefit has its own inputs, its own weights for the relative importance of each alternative's strengths; and its own mix of code that may or may not be subject to Ruby's slower speed. Of course, you would need to benchmark your code to see whether or not the difference was even noticeable -- it may not be.</p>\n\n<p>I (and I think most or all Rubyists) believe that <em>in most cases</em> the difference in speed is not great enough or important enough to motivate us to abandon Ruby in favor of another language.</p>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 5591649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zkHss.jpg?s=128&g=1", "display_name": "Faraaz Ahmad", "link": "https://stackoverflow.com/users/5591649/faraaz-ahmad"}, "edited": false, "score": 0, "creation_date": 1464215148, "post_id": 37444124, "comment_id": 62399091, "body": "Thanks. that helped a bit :)"}], "tags": [], "owner": {"reputation": 1299, "user_id": 2923846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e45ca52b59ce69b3844c6e8b09f278c?s=128&d=identicon&r=PG", "display_name": "lwassink", "link": "https://stackoverflow.com/users/2923846/lwassink"}, "is_accepted": false, "score": 1, "last_activity_date": 1464197819, "creation_date": 1464197819, "answer_id": 37444124, "question_id": 37442812, "link": "https://stackoverflow.com/questions/37442812/performance-of-rubys-own-methods/37444124#37444124", "title": "Performance of Ruby&#39;s own methods", "body": "<p>I'll just add, if you want to run some tests to compare the speeds you should look at the Benchmark module: <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html\" rel=\"nofollow\">http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 99, "user_id": 5591649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zkHss.jpg?s=128&g=1", "display_name": "Faraaz Ahmad", "link": "https://stackoverflow.com/users/5591649/faraaz-ahmad"}, "edited": false, "score": 0, "creation_date": 1464214425, "post_id": 37445690, "comment_id": 62398815, "body": "Sites that compare what kind of stuff?"}, {"owner": {"reputation": 99, "user_id": 5591649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zkHss.jpg?s=128&g=1", "display_name": "Faraaz Ahmad", "link": "https://stackoverflow.com/users/5591649/faraaz-ahmad"}, "edited": false, "score": 0, "creation_date": 1464214820, "post_id": 37445690, "comment_id": 62398972, "body": "Really useful answer! I really appreciate answering with facts (unlike school teachers). Could you please provide a link to some site(s) that do teach such stuff? also does it mean that ruby&#39;s relatively slow performance is correctly explained here ? <a href=\"http://stackoverflow.com/questions/5168718/what-blocks-ruby-python-to-get-javascript-v8-speed\">link</a>"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 2, "creation_date": 1464239432, "post_id": 37445690, "comment_id": 62405052, "body": "@Jordan Great answer!  Faraaz, if you want to go deeply into this, the best resource I know of is the book &quot;Ruby Under A Microscope&quot;."}, {"owner": {"reputation": 99, "user_id": 5591649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zkHss.jpg?s=128&g=1", "display_name": "Faraaz Ahmad", "link": "https://stackoverflow.com/users/5591649/faraaz-ahmad"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1464512070, "post_id": 37445690, "comment_id": 62510041, "body": "@KeithBennett Thanks. Really interesting book"}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 3, "last_activity_date": 1464203402, "creation_date": 1464203402, "answer_id": 37445690, "question_id": 37442812, "link": "https://stackoverflow.com/questions/37442812/performance-of-rubys-own-methods/37445690#37445690", "title": "Performance of Ruby&#39;s own methods", "body": "<p>As @theTinMan alluded to in the comments, you must understand the distinction between the language (syntax) and the logic (semantics). For example, suppose someone asked you to write a program that prints the number 1,000. You'd probably write it like this:</p>\n\n<pre><code>puts 1000\n</code></pre>\n\n<p>But you could also write any of these:</p>\n\n<ul>\n<li><code>puts 1_000</code></li>\n<li><code>puts 0b1111101000</code></li>\n<li><code>puts 01750</code></li>\n</ul>\n\n<p>These are all the same. Not \"the same\" as in they produce the same results, but \"the same\" as in Ruby parses and executes them exactly the same way. Their syntaxes are different but their semantics are identical.</p>\n\n<p>The same is true for Ruby's different array syntaxes (and for its equivalent string syntaxes, Regexp literals, etc.). You can test this yourself using Ruby's <code>--dump insns</code> (dump instruction sequence) option:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ ruby --dump insns -e 'arr = [\"a\", \"b\"]'\n== disasm: &lt;RubyVM::InstructionSequence:&lt;main&gt;@-e&gt;======================\nlocal table (size: 2, argc: 0 [opts: 0, rest: -1, post: 0, block: -1, kw: -1@-1, kwrest: -1])\n[ 2] arr\n0000 trace            1                                               (   1)\n0002 putstring        \"a\"\n0004 putstring        \"b\"\n0006 newarray         2\n0008 dup\n0009 setlocal_OP__WC__0 2\n0011 leave\n</code></pre>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ ruby --dump insns -e 'arr = %w(a b)'\n== disasm: &lt;RubyVM::InstructionSequence:&lt;main&gt;@-e&gt;======================\nlocal table (size: 2, argc: 0 [opts: 0, rest: -1, post: 0, block: -1, kw: -1@-1, kwrest: -1])\n[ 2] arr\n0000 trace            1                                               (   1)\n0002 putstring        \"a\"\n0004 putstring        \"b\"\n0006 newarray         2\n0008 dup\n0009 setlocal_OP__WC__0 2\n0011 leave\n</code></pre>\n\n<p>Completely identical. The salient instructions, of course, are 0002\u20130006:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>0002 putstring        \"a\"\n0004 putstring        \"b\"\n0006 newarray         2\n</code></pre>\n\n<p>These instructions say (more or less):</p>\n\n<ol>\n<li>(0002) Push the string <code>\"a\"</code> onto the top of the stack.</li>\n<li>(0004) Push the string <code>\"b\"</code> onto the top of the stack.</li>\n<li>(0006) Pop the top two values from the stack, make an array from them and push it onto the stack.</li>\n</ol>\n\n<p>These are the actual instructions that the MRI VM will execute in both cases. Ruby never knows that you used <code>%w( ... )</code> instead of <code>[ ... ]</code> and there's no additional code it has to execute.</p>\n"}], "owner": {"reputation": 99, "user_id": 5591649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zkHss.jpg?s=128&g=1", "display_name": "Faraaz Ahmad", "link": "https://stackoverflow.com/users/5591649/faraaz-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 2, "accepted_answer_id": 37445690, "answer_count": 3, "score": 1, "last_activity_date": 1464203402, "creation_date": 1464193382, "last_edit_date": 1464193896, "question_id": 37442812, "link": "https://stackoverflow.com/questions/37442812/performance-of-rubys-own-methods", "title": "Performance of Ruby&#39;s own methods", "body": "<p>I was going through the arrays on Ruby, when i came across a method of creating an array (there may be more). </p>\n\n<pre><code>arr1 = %w(first second third) # =&gt; [\"first\", \"second\", \"third\"]\n</code></pre>\n\n<p>I was wondering, that since Ruby's own methods reduce so much boilerplate, they might actually be slow. But given the fact that Ruby is written in C, does it have some considerable impact on speed/performance? (in a program where there are many such statements)</p>\n"}, {"tags": ["ruby", "imagemagick", "rmagick"], "comments": [{"owner": {"reputation": 144829, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 3, "creation_date": 1464191354, "post_id": 37441854, "comment_id": 62386596, "body": "You could maybe consider making a small RAMdisk as one option."}, {"owner": {"reputation": 144829, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1464195021, "post_id": 37441854, "comment_id": 62388882, "body": "Of course, you can also accumulate/generate the images within Ruby and create an animated GIF from the sequence... not sure of the Ruby syntax but in PHP, you do <code>addImage()</code> for each of the frames till you have the complete sequence, then you do <code>setImageDispose()</code> and <code>writeImages(&quot;animated.gif&quot;,true)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "is_accepted": true, "score": 1, "last_activity_date": 1464196076, "creation_date": 1464196076, "answer_id": 37443599, "question_id": 37441854, "link": "https://stackoverflow.com/questions/37441854/minimize-disc-activity-with-rmagick-or-imagemagick/37443599#37443599", "title": "Minimize disc activity with rmagick or imagemagick", "body": "<blockquote>\n  <p>Does this make sense though? </p>\n</blockquote>\n\n<p>Not really. We can argue about open fd's, and cost of shell environments over direct API, but there wouldn't be any disk I/O benefit between the convert utility &amp; RMagick.</p>\n\n<blockquote>\n  <p>Is there any way to get image data in and out of ImageMagick's convert command without disc activity?</p>\n</blockquote>\n\n<p>ImageMagick ships with <a href=\"http://www.imagemagick.org/script/stream.php\" rel=\"nofollow\"><code>stream</code></a> utility. There's not much usage-documentation, but it could be leveraged to extract the image data to a blob that can be distributed via memcached.</p>\n\n<p>There's also the <a href=\"http://www.imagemagick.org/Usage/files/#mpr\" rel=\"nofollow\"><code>mpr:</code></a> protocol to handle label based memory access, but that might not be the distributed solution your looking for. Plus data is removed at time of process completion.</p>\n\n<p>Personally, Marks comment about RAMdisk would be something I would recommend. A simple memory/tmpfs mount is easy to set-up on a system, and then it would just be a matter of updating <a href=\"http://www.imagemagick.org/source/policy.xml\" rel=\"nofollow\"><code>policy.xml</code></a> configuration to use said mount as a temporary directory.</p>\n"}], "owner": {"reputation": 375, "user_id": 1656981, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/17fb132b890c1027cbf58c1ac5507db1?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1656981/bruce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 37443599, "answer_count": 1, "score": 0, "last_activity_date": 1464196076, "creation_date": 1464190745, "last_edit_date": 1464191101, "question_id": 37441854, "link": "https://stackoverflow.com/questions/37441854/minimize-disc-activity-with-rmagick-or-imagemagick", "title": "Minimize disc activity with rmagick or imagemagick", "body": "<p>I'm generating animated GIF files from multiple source images using Ruby. I need to maximize throughput / minimize time spent to create each GIF. I'd prefer to keep the source images in memory (probably Memcached) rather than read them from disc every time I need them. I've been using <code>convert</code> in backticks to execute imagemagick commands directly from Ruby, e.g.</p>\n\n<pre><code>`convert -delay #{delay} -page #{w}x#{h}+0+0 src01.gif... etc`\n</code></pre>\n\n<p>I slightly prefer this over RMagick as I've found more examples, I can reference the ImageMagick docs directly. It seems that images passed to the <code>convert</code> command need to be paths to images on disc. Additionally it seems like the output of the convert commend is a file path so the generated image would be written to disc by ImageMagick and I'd need to read it back off disc using Ruby to access the resulting image data. It seems like I'm making ImageMagick read the source images from disc each time and write the generated GIF to disc each time. I think this is likely to be a bottleneck and unnecessary as I don't need to persist the generated images I just need to access their image data in Ruby momentarily. </p>\n\n<p>I noticed that RMagick methods can take <code>Magick::Image</code>s as parameters instead of filepaths. I could keep the source images in memory in this case. Additionally RMagick returns the generated image as data to Ruby which is what I need, I don't need it written to disc.</p>\n\n<p>I'm thinking of using RMagick instead of </p>\n\n<pre><code>`convert...`\n</code></pre>\n\n<p>to reduce disc activity. </p>\n\n<p>So question 1: Does this make sense though? Since RMagick presumably wraps ImageMagick, is RMagick actually reading and writing to disc under the hood or does it have some way of utilizing ImageMagick without disc activity?</p>\n\n<p>And question 2: Is there any way to get image data in and out of ImageMagick's convert command without disc activity?</p>\n\n<p>Hope this makes sense. Just trying to wrap my head around this and apologize if I'm unclear.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1810, "user_id": 1301840, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ad9bbcb458c0923c2946f85b6b98107b?s=128&d=identicon&r=PG&f=1", "display_name": "lusketeer", "link": "https://stackoverflow.com/users/1301840/lusketeer"}, "edited": false, "score": 0, "creation_date": 1464190587, "post_id": 37441643, "comment_id": 62385983, "body": "<code>&quot;ProductCustomer&quot;.underscore.gsub(&quot;_&quot;, &quot; &quot;)</code>"}, {"owner": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "edited": false, "score": 0, "creation_date": 1464190634, "post_id": 37441643, "comment_id": 62386024, "body": "&#39;ProductCustomer&#39;.to_s.underscore.tr(&#39;_&#39;, &#39; &#39;)"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "reply_to_user": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "edited": false, "score": 0, "creation_date": 1464190779, "post_id": 37441643, "comment_id": 62386115, "body": "@\u0410\u043b\u0435\u043a\u0441\u0435\u0439\u041a\u0443\u0437\u043d\u0435\u0446\u043e\u0432 why need the string <code>&#39;ProductCustomer&#39;</code> convert to string again with <code>to_s</code>?"}, {"owner": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1464191294, "post_id": 37441643, "comment_id": 62386551, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 because ProductCustomer is probably class object: <code>&quot;ProductCustomer&quot;, which comes from the class</code>"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1464191597, "post_id": 37441643, "comment_id": 62386793, "body": "In your comment is not a class object <code>&#39;ProductCustomer&#39;.to_s.underscore.tr(&#39;_&#39;, &#39; &#39;)</code> is a string. This is a string <code>&#39;ProductCustomer&#39;</code> this is an object/class/constant <code>ProductCustomer</code>."}, {"owner": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1464192623, "post_id": 37441643, "comment_id": 62387465, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 lol, I know about this. In fact, after reading question one more time I realize, that the problem comes from long method chain started from notification object. So options from Leantraxxx looks better in this case. And both of our answers is useless."}, {"owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "edited": false, "score": 0, "creation_date": 1464192716, "post_id": 37441643, "comment_id": 62387513, "body": "Yes! this is the real question: &quot;Can somebody tell me what the Rails convention is in this case? If it&#39;s a helper, how does the method looks like and where should I put it?&quot;"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1464210579, "post_id": 37441643, "comment_id": 62397260, "body": "Sry guys my question was a bit ambiguous. Yeah the question is how I can make <code>notification.notifiable_type</code> more readable. Since notification is polymorphic there are few things available. <code>notification.notifiable</code> which is an object (product_customer, product, etc.), so null object problem is present. <code>notification.notifiable_type</code> is a string attribute in <code>notifications</code> table like (&quot;ProductCustomer&quot;, &quot;Product&quot;, etc.)."}], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1464209847, "post_id": 37441838, "comment_id": 62396938, "body": "Teddy, I don&#39;t feel this one simpler. Correct me pls, if I&#39;m wrong!"}], "tags": [], "owner": {"reputation": 17539, "user_id": 512453, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0372e5193a1dd972857e7498cdd8643?s=128&d=identicon&r=PG", "display_name": "Teddy", "link": "https://stackoverflow.com/users/512453/teddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1464190707, "creation_date": 1464190707, "answer_id": 37441838, "question_id": 37441643, "link": "https://stackoverflow.com/questions/37441643/ruby-string-formatting-in-rails/37441838#37441838", "title": "ruby string formatting in rails", "body": "<p><code>\"ProductCustomer\".tableize.singularize.humanize.downcase</code></p>\n"}, {"comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1464209768, "post_id": 37442154, "comment_id": 62396896, "body": "Thanks for the detailed answer Leantraxxx!. I think (not sure), you are using notifiable instead of notification_type, in which case the null object problem still exists. Could you pls update it? Yeah my problem is that either option is fine :). It&#39;s hard to decide since I&#39;m not that experienced yet. As I see this is only a view problem for me since I&#39;d use the method to make things nicer for the user. Could you elaborate why you think &quot;adding behaviour that can be useful in any model&quot;?"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1464210349, "post_id": 37442154, "comment_id": 62397167, "body": "Pls also see my prev comment. so not <code>notification_type</code> but <code>notifiable_type</code>"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1464269931, "post_id": 37442154, "comment_id": 62423871, "body": "Could you tell me why you are sticking with <code>notification.notifiable</code> over <code>notification.notifiable_type</code>? Is it better to use that or something else?"}, {"owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "reply_to_user": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1464271005, "post_id": 37442154, "comment_id": 62424737, "body": "<code>notifiable_type</code> (string) and <code>notifiable_id</code> (integer) are columns in database to build the polymorphic notifiable <code>ActiveRecord</code> instance. Im extending <code>ActiveRecord</code> using <code>ActiveRecord::Base.send(:include, MyModule)</code>. If I use the string <code>notifiable_type</code> I would need to extend <code>String</code> instead of <code>ActiveRecord</code> class and execute <code>notification.notifiable_type.human_name</code>. If you do that your method will be more generic. It will be available for any string: &quot;LeandroSegovia&quot;.human_name #=&gt; leandro segovia"}], "tags": [], "owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "is_accepted": true, "score": 2, "last_activity_date": 1464269584, "last_edit_date": 1464269584, "creation_date": 1464191514, "answer_id": 37442154, "question_id": 37441643, "link": "https://stackoverflow.com/questions/37441643/ruby-string-formatting-in-rails/37442154#37442154", "title": "ruby string formatting in rails", "body": "<h2>Options:</h2>\n\n<h3>Initializer</h3>\n\n<p><em>/your_app/config/initializers/my_initializer.rb</em></p>\n\n<pre><code>module MyModule\n  def human_model_name\n    self.class.to_s.tableize.singularize.humanize.downcase\n  end\nend\n\nActiveRecord::Base.send(:include, MyModule)\n</code></pre>\n\n<p>Including <code>MyModule</code> in <code>ActiveRecord::Base</code> will add <code>human_model_name</code> in all <code>ActiveRecord</code> instances. So, you will be able to do...</p>\n\n<pre><code>user.human_model_name #=&gt; user\nnotification.human_model_name #=&gt; notification\nnotification.notifiable.human_model_name #=&gt; product customer\nany_active_record_instance.human_model_name #=&gt; etc.\n</code></pre>\n\n<p>To avoid exceptions when <code>notifiable</code> is <code>nil</code>, you can use <code>try</code> method.</p>\n\n<pre><code>notification.try(:notifiable).try(:human_model_name)\n</code></pre>\n\n<p>A cleaner way can be use <a href=\"http://apidock.com/rails/Module/delegate\" rel=\"nofollow\"><code>delegate</code></a></p>\n\n<pre><code>class Notification &lt; ActiveRecord::Base\n  delegate :human_model_name, to: :notifiable, prefix: true, allow_nil: true\nend\n</code></pre>\n\n<p>Then, you can do:</p>\n\n<pre><code>notification.notifiable_human_model_name # if notifiable is nil will return nil as result instead of an exception\n</code></pre>\n\n<h3>A simple method in your <code>Notification</code> model</h3>\n\n<pre><code>class Notification &lt; ActiveRecord::Base\n  def human_notifable_name\n    return unless self.notifiable # to avoid exception with nil notifiable\n    self.notifiable.class.to_s.tableize.singularize.humanize.downcase\n  end\nend\n</code></pre>\n\n<p>Then...</p>\n\n<pre><code>notification.human_notifable_name\n</code></pre>\n\n<h3>View Helper (If you think this is a view related method only)</h3>\n\n<pre><code>module ApplicationHelper # or NotificationHelper\n  def human_model_name(instance)\n     return unless instance # to avoid exception with nil instance\n    instance.class.to_s.tableize.singularize.humanize.downcase\n  end\nend\n</code></pre>\n\n<p>Then, in your view...</p>\n\n<pre><code>&lt;%= human_model_name(notification.notifiable) %&gt;\n</code></pre>\n\n<p>Either option is fine. I would use one or the other depending on the case. In this case, <strong>I would use the first option</strong>. I think you are adding behaviour that can be useful in any model. I mean your method is not directly related with something about notifications. In a more generic way you want a method <strong>to return the class name of an ActiveRecord's instance</strong>. Today you want the model name of the <code>notifiable</code> <code>ActiveRecord</code>'s instance. But, tomorrow you may want the model name of any <code>ActiveRecord</code> model.</p>\n\n<p>To answer the question <strong>\"Where should I put a method?\"</strong> I suggest to break (without fear) a little bit the MVC pattern and read about:</p>\n\n<ul>\n<li><a href=\"https://robertomurray.co.uk/blog/2014/decorators-presenters-delegators-rails/\" rel=\"nofollow\">Decorators, presenters and delegators</a></li>\n<li><a href=\"https://blog.engineyard.com/2014/keeping-your-rails-controllers-dry-with-services\" rel=\"nofollow\">Services</a></li>\n</ul>\n\n<p>(a little bit old, but you can get the idea)</p>\n"}], "owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 37442154, "answer_count": 2, "score": 1, "last_activity_date": 1464269584, "creation_date": 1464190200, "last_edit_date": 1464191824, "question_id": 37441643, "link": "https://stackoverflow.com/questions/37441643/ruby-string-formatting-in-rails", "title": "ruby string formatting in rails", "body": "<p>So the goal is to turn for instance <code>\"ProductCustomer\"</code>, which comes from the class, into <code>\"product customer\"</code>.</p>\n\n<p>I used to have this:</p>\n\n<pre><code>notification.notifiable.model_name.human.downcase\n</code></pre>\n\n<p>It didn't work out of course, since if the <code>notifiable</code> is <code>nil</code> it breaks. I don't\nwant to use <code>try</code> or something similar since it can be solved with using <code>notifiable_type</code>.</p>\n\n<p>So now I changed to this:</p>\n\n<pre><code>notification.notifiable_type.split(/(?=[A-Z])/).join(' ').downcase\n</code></pre>\n\n<p>But this is way too complex to use every time in the view. So either I would like to define this as a view helper or using some ruby formatting method if there is a simple one.</p>\n\n<p>Can somebody tell me what the Rails convention is in this case? If it's a helper, how does the method looks like and where should I put it?</p>\n"}, {"tags": ["arrays", "ruby", "hashmap", "enumerable"], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 5125027, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10153391766200552/picture?type=large", "display_name": "Steven Kwok", "link": "https://stackoverflow.com/users/5125027/steven-kwok"}, "edited": false, "score": 0, "creation_date": 1464197432, "post_id": 37441865, "comment_id": 62390172, "body": "Thanks! I don&#39;t understand the v.length part. can you explain why we re counting the length of the value?"}], "tags": [], "owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "is_accepted": true, "score": 8, "last_activity_date": 1464198279, "last_edit_date": 1464198279, "creation_date": 1464190777, "answer_id": 37441865, "question_id": 37441604, "link": "https://stackoverflow.com/questions/37441604/count-how-many-times-an-element-appears-in-an-array-in-ruby/37441865#37441865", "title": "Count how many times an element appears in an array in Ruby", "body": "<p>It can be done with built-in library calls like this:</p>\n\n<pre><code>a = [{:name =&gt; \"blake\"}, {:name =&gt; \"blake\"}, {:name =&gt; \"ashley\"}]\na.group_by(&amp;:itself)                   # group all of the identical elements together\n .map{|k, v| k.merge(count: v.length)} # add the \"count\" element to the hash\n</code></pre>\n\n<h2>Explanation</h2>\n\n<p><code>.group_by(&amp;:itself)</code> will take all the identical components and put them in a hash together under the same key:</p>\n\n<pre><code>&gt;&gt; h = a.group_by(&amp;:itself)\n=&gt; {\n     {:name=&gt;\"blake\"}  =&gt; [{:name=&gt;\"blake\"}, {:name=&gt;\"blake\"}],\n     {:name=&gt;\"ashley\"} =&gt; [{:name=&gt;\"ashley\"}]\n    }\n</code></pre>\n\n<p>Notice how the first entry in the hash has an array of two identical elements, and the second entry has an array of one element. To create counts of those, we can use the <code>.length</code> method on the arrays in the hash's values:</p>\n\n<pre><code>&gt;&gt; k, v = h.first\n&gt;&gt; v\n=&gt; [{:name=&gt;\"blake\"}, {:name=&gt;\"blake\"}]\n\n&gt;&gt; v.length\n=&gt; 2\n</code></pre>\n\n<p>Then we can use <code>.map</code> to apply that code to every element in the hash:</p>\n\n<pre><code>&gt;&gt; h.map{|k, v| [k, v.length]}.to_h\n=&gt; {\n     {:name=&gt;\"blake\"}=&gt;2,\n     {:name=&gt;\"ashley\"}=&gt;1\n   }\n</code></pre>\n\n<p>Finally, <code>.merge</code> will take two hashes and piece them together into a single hash:</p>\n\n<pre><code>&gt;&gt; {:name=&gt;\"blake\"}.merge({:count =&gt; 1})\n=&gt; {:name=&gt;\"blake\", :count=&gt;1}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1464193921, "last_edit_date": 1464193921, "creation_date": 1464192819, "answer_id": 37442614, "question_id": 37441604, "link": "https://stackoverflow.com/questions/37441604/count-how-many-times-an-element-appears-in-an-array-in-ruby/37442614#37442614", "title": "Count how many times an element appears in an array in Ruby", "body": "<p>There are three main ways of doing this.</p>\n\n<p><strong>Use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-group_by\" rel=\"nofollow\">Enumerable#group_by</a></strong></p>\n\n<p>That is what @user12341234 has done in his or her answer.</p>\n\n<p><strong>Use a counting hash</strong></p>\n\n<p>If <code>arr</code> is your array,</p>\n\n<pre><code>arr.each_with_object(Hash.new(0)) { |g,h| h[g[:name]] += 1 }.\n    map { |name, count| { :name=&gt;name, :count=&gt;count } }\n  #=&gt; [{:name=&gt;\"blake\", :count=&gt;2}, {:name=&gt;\"ashley\", :count=&gt;1}]\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html#method-c-new\" rel=\"nofollow\">Hash::new</a> for details.</p>\n\n<p><strong>Use the form of <code>Hash#update</code> (aka <code>merge!</code>) that employs a block to determine the values of keys that are present in both hashes being merged.</strong></p>\n\n<pre><code>arr.each_with_object({}) { |g,h| h.update(g[:name]=&gt;1) { |_,o,n| o+n } }.\n    map { |name, count| { :name=&gt;name, :count=&gt;count } }\n  #=&gt; [{:name=&gt;\"blake\", :count=&gt;2}, {:name=&gt;\"ashley\", :count=&gt;1}]\n</code></pre>\n\n<p>See the doc <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html#method-i-update\" rel=\"nofollow\">Hash#update</a> for details.</p>\n\n<p>Notice that last line is the same for #2 and #3.</p>\n\n<p>I cannot say that one of these approaches is preferable to the others.</p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 1, "last_activity_date": 1581585741, "creation_date": 1581585741, "answer_id": 60204286, "question_id": 37441604, "link": "https://stackoverflow.com/questions/37441604/count-how-many-times-an-element-appears-in-an-array-in-ruby/60204286#60204286", "title": "Count how many times an element appears in an array in Ruby", "body": "<p>Here the new <a href=\"https://ruby-doc.org/core-2.7.0/Enumerable.html#method-i-tally\" rel=\"nofollow noreferrer\">Enumerable#tally</a> introduced with <strong>Ruby 2.7.0</strong> comes in hand:</p>\n\n<pre><code>h = [{:name =&gt; \"blake\"}, {:name =&gt; \"blake\"}, {:name =&gt; \"ashley\"}]\n\nh.tally.map {|k, v| k.merge({count: v}) }\n#=&gt; [{:name=&gt;\"blake\", :count=&gt;2}, {:name=&gt;\"ashley\", :count=&gt;1}]\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 5125027, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10153391766200552/picture?type=large", "display_name": "Steven Kwok", "link": "https://stackoverflow.com/users/5125027/steven-kwok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3626, "favorite_count": 1, "accepted_answer_id": 37441865, "answer_count": 3, "score": 1, "last_activity_date": 1581585741, "creation_date": 1464190132, "last_edit_date": 1555307501, "question_id": 37441604, "link": "https://stackoverflow.com/questions/37441604/count-how-many-times-an-element-appears-in-an-array-in-ruby", "title": "Count how many times an element appears in an array in Ruby", "body": "<p>This is the array that is going to be processed: </p>\n\n<pre><code>[{:name =&gt; \"blake\"}, {:name =&gt; \"blake\"}, {:name =&gt; \"ashley\"}]\n</code></pre>\n\n<p>and I would like the result to be like this: </p>\n\n<pre><code>[{:name =&gt; \"blake\", :count =&gt; 2}, {:name =&gt; \"ashley\", :count =&gt; 1}]\n</code></pre>\n\n<p>I created a new hash called \"count\" then i used <code>.each</code> to iterate through the array and then <code>count[:count] += 1</code>, but it's not giving me what I'm looking for.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1464200311, "last_edit_date": 1464200311, "creation_date": 1464199546, "answer_id": 37444618, "question_id": 37441468, "link": "https://stackoverflow.com/questions/37441468/rails-capybara-fill-in-finds-text-inputs-but-doesnt-fill-in/37444618#37444618", "title": "Rails. Capybara fill_in finds text inputs but doesn&#39;t fill_in", "body": "<p>It appears you're using the rack-test driver since your test isn't tagged as js: true.  Assuming that is true, your issue is that <code>article</code> is already in memory, and is not reloaded from the DB before checking for the name change.  Updating your test to the following will force a reload and then your test should pass</p>\n\n<pre><code>expect(article.reload.name).to eq 'Valid name'\n</code></pre>\n\n<p>If you're not using the rack-test driver then click_button will be asynchronous and you'll have other issues since you're not checking for changes in the browser before checking for database object changes.  </p>\n"}], "owner": {"reputation": 23, "user_id": 2982414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b30a1186793b5ff9e2b7b8a6fb24d212?s=128&d=identicon&r=PG&f=1", "display_name": "adam.szczombrowski", "link": "https://stackoverflow.com/users/2982414/adam-szczombrowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 37444618, "answer_count": 1, "score": 2, "last_activity_date": 1464200311, "creation_date": 1464189760, "question_id": 37441468, "link": "https://stackoverflow.com/questions/37441468/rails-capybara-fill-in-finds-text-inputs-but-doesnt-fill-in", "title": "Rails. Capybara fill_in finds text inputs but doesn&#39;t fill_in", "body": "<p>So I have this feature spec in my Rails app</p>\n\n<pre><code>require 'rails_helper'\n\nfeature 'As a signed in user' do\n  let(:user) {create(:user)}\n  let(:article) { create(:article)}\n  before {login_as(user, :scope =&gt; :user )}\n\n  scenario 'I can edit article with valid attributes' do\n    visit edit_article_path(article)\n    puts current_path\n    fill_in 'article_name', with: 'Valid name'\n    fill_in 'article_content', with: 'Valid content'\n    # save_and_open_page\n    click_button 'Update Article'\n    expect(article.name).to eq 'Valid name'\n  end\nend\n</code></pre>\n\n<p>and <code>fill_in</code> doesn't actually fill the input fields with <code>Valid name</code> and <code>Valid content</code>. I debug it by saving and opening page and the values remain the same so I guess it's not problem with my Rails app but rather something with Capybara. In other future spec:</p>\n\n<pre><code>require 'rails_helper'\n\nfeature 'As a signed in user' do\n  let(:user) {create(:user)}\n  let(:article) { build(:article)}\n  before {login_as(user, :scope =&gt; :user )}\n\n  scenario 'I can create article with valid attributes' do\n    visit '/articles/new'\n    fill_in 'Name', with: article.name\n    fill_in 'article_content', with: article.content\n    expect {click_button 'Create Article'}.to change {Article.count}.by(1)\n  end\nend\n</code></pre>\n\n<p>everything works as expected. The error I am getting is:</p>\n\n<pre><code>Failures:\n\n  1) As a signed in user I can edit article with valid attributes\n     Failure/Error: expect(article.name).to eq 'Valid name'\n\n       expected: \"Valid name\"\n            got: \"Name1\"\n\n       (compared using ==)\n     # ./spec/features/articles/article_update_spec.rb:15:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>What can be the reason for it and how to make a spec pass?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cucumber"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1464192176, "post_id": 37441370, "comment_id": 62387181, "body": "It might help to show your whole Gemfile and the exact command line you used."}, {"owner": {"reputation": 21, "user_id": 6381947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/463fb7805cc277efbbf9d83167d63c13?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti Jain", "link": "https://stackoverflow.com/users/6381947/shruti-jain"}, "reply_to_user": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1464255468, "post_id": 37441370, "comment_id": 62413866, "body": "Added complete gem file and use rails g cucumber:install"}], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": false, "score": 2, "last_activity_date": 1464275507, "creation_date": 1464275507, "answer_id": 37464786, "question_id": 37441370, "link": "https://stackoverflow.com/questions/37441370/rails-generate-cucumberinstall-fails-with-could-not-load-generator/37464786#37464786", "title": "rails generate cucumber:install fails with &quot;Could not load generator&quot;", "body": "<p>It's possible that spring is started and is unable to load the generator. Try</p>\n\n<pre><code>DISABLE_SPRING=1 rails g cucumber:install\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6381947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/463fb7805cc277efbbf9d83167d63c13?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti Jain", "link": "https://stackoverflow.com/users/6381947/shruti-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1464275635, "creation_date": 1464189526, "last_edit_date": 1464275635, "question_id": 37441370, "link": "https://stackoverflow.com/questions/37441370/rails-generate-cucumberinstall-fails-with-could-not-load-generator", "title": "rails generate cucumber:install fails with &quot;Could not load generator&quot;", "body": "<p>I tried to install Cucumber, but <code>rails g cucumber:install</code> shows an error in the terminal:  </p>\n\n<pre><code>[WARNING] Could not load generator \"generators/cucumber/install/install_generator\". Error: uninitialized constant Cucumber::Generators::InstallBase::Config.\n</code></pre>\n\n<p>Here is the part of my Gemfile with cucumber-rails:</p>\n\n<pre><code>group :test do\n    gem 'faker'\n    gem 'capybara'\n    gem 'guard-rspec'\n    gem 'cucumber-rails', :require =&gt; false\n    gem 'database_cleaner'\n    gem 'selenium-webdriver'\n    gem 'gherkin'\n    gem \"launchy\", \"~&gt; 2.1.2\"\nend\n</code></pre>\n\n<p>Here's my entire Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\n\ngem 'rails', '4.2.5'\n# Use postgresql as the database for Active Record\ngem 'pg', '~&gt; 0.15'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes gem 'therubyracer', platforms: :ruby\ngem 'devise'\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\ngem 'therubyracer'\ngem 'cancan'\ngem 'roo'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\ngem 'bcrypt-ruby', :require =&gt; 'bcrypt'\ngem 'twitter-bootstrap-rails', :git =&gt; 'git://github.com/seyhunak/twitter-bootstrap-rails.git'\n# Use Unicorn as the app server\n# gem 'unicorn'\ngem 'birthday'\ngem 'pry-nav'\ngem 'unread'\ngem 'week_of_month'\ngem 'city-state'\ngem 'carmen-rails'\ngem \"nested_form\"\ngem 'prawn'\ngem 'wicked_pdf'\ngem 'wkhtmltopdf-binary'\ngem 'prawn-table', '~&gt; 0.1.0'\ngem 'rails_12factor', group: :production\ngem 'whenever', require: false\ngem 'simplecov', :require =&gt; false, :group =&gt; :test\n#Image uploading\ngem 'carrierwave'\ngem 'carrierwave-dropbox'\ngem 'client_side_validations'\n#Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\ngem 'bootstrap-datepicker-rails', :require =&gt; 'bootstrap-datepicker-rails',\n                              :git =&gt; 'git://github.com/Nerian/bootstrap-datepicker-rails.git'\ngem 'fullcalendar-rails'\ngem 'simple_form'\ngem 'momentjs-rails'\n\ngem 'google-api-client'\ngem 'omniauth'\ngem 'omniauth-google-oauth2', :git =&gt; 'https://github.com/zquestz/omniauth-google-oauth2.git'\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n    gem 'byebug'\n    #gem \"rspec-rails\"\n    gem 'factory_girl_rails'\nend\n\ngroup :test do\n    gem 'faker'\n    gem 'capybara'\n    gem 'guard-rspec'\n    gem 'cucumber-rails', :require =&gt; false\n    gem 'database_cleaner'\n    gem 'selenium-webdriver'\n    gem 'gherkin'\n    gem \"launchy\", \"~&gt; 2.1.2\"\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n    gem 'web-console', '~&gt; 2.0'\n    gem 'will_paginate'\n    # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n    gem 'spring'\nend\ngem 'bootstrap-sass', '~&gt; 3.3.5'\ngem 'bootstrap-timepicker-rails-addon', :require =&gt; 'bootstrap-timepicker-rails-addon',\n                                        :git =&gt; 'git://github.com/ywjno/bootstrap-timepicker-rails-addon.git'\n</code></pre>\n"}, {"tags": ["ruby", "binary-tree"], "comments": [{"owner": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "edited": false, "score": 0, "creation_date": 1464189490, "post_id": 37441205, "comment_id": 62385193, "body": "Could you get more details? What is your input?"}, {"owner": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "edited": false, "score": 0, "creation_date": 1464189926, "post_id": 37441205, "comment_id": 62385524, "body": "And also show us your implementation of BinaryTree"}], "answers": [{"tags": [], "owner": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "is_accepted": true, "score": 1, "last_activity_date": 1464192431, "last_edit_date": 1464192431, "creation_date": 1464191158, "answer_id": 37442014, "question_id": 37441205, "link": "https://stackoverflow.com/questions/37441205/binary-tree-how-do-i-include-the-trunk-in-the-final-output/37442014#37442014", "title": "Binary Tree - How do I include the trunk in the final output?", "body": "<p>You also need way to walk the tree:</p>\n\n<pre><code>class BinaryTree\n  attr_reader :payload, :left, :right\n\n  def initialize(payload, left = nil, right = nil)\n    @payload = payload\n    @left = left\n    @right = right\n  end\n\n  def walk\n    (left ? left.walk : []) + [payload] + (right ? right.walk : [])\n  end\n\n  def insert_node(element)\n    if element &lt; payload &amp;&amp; left == nil\n      # Build node and place it on left of trunk\n      @left = self.class.new(element)\n    elsif element &gt; payload &amp;&amp; right == nil\n      # Build node and place it on right of trunk\n      @right = self.class.new(element)\n    elsif element &lt; payload\n      # Update pointer\n      left.insert_node(element)\n    elsif element &gt; payload\n      # Update pointer\n      right.insert_node(element)\n    end\n  end\n\n  def self.build_from_array(array)\n    new(array.shift).tap do |trunk|\n      array.each { |element| trunk.insert_node(element) }\n    end\n  end\nend\n\ninput =  [7, 4, 9, 1, 6, 14, 10]\nexpected =  [1, 4, 6, 7, 9, 10, 14]\noutput = BinaryTree.build_from_array(input).walk\np output\np output == expected\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 6310516, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a12830179c452dc912543b309ab95091?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Ahmed", "link": "https://stackoverflow.com/users/6310516/ahmed-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 37442014, "answer_count": 1, "score": 0, "last_activity_date": 1464192431, "creation_date": 1464189148, "last_edit_date": 1464190211, "question_id": 37441205, "link": "https://stackoverflow.com/questions/37441205/binary-tree-how-do-i-include-the-trunk-in-the-final-output", "title": "Binary Tree - How do I include the trunk in the final output?", "body": "<p>Initial input = [7, 4, 9, 1, 6, 14, 10]</p>\n\n<p>expected = [1, 4, 6, 7, 9, 10, 14]</p>\n\n<p>And my output...</p>\n\n<p>[4, 9, 1, 6, 14, 10]</p>\n\n<p>I can't seem to figure out how to include the trunk object in my output array.</p>\n\n<pre><code>def insert_node(element,trunk)\n  if element &lt; trunk.payload &amp;&amp; trunk.left == nil\n    # Build node and place it on left of trunk\n    trunk.left = BinaryTree.new(element, nil, nil)\n  elsif element &gt; trunk.payload &amp;&amp; trunk.right == nil\n    # Build node and place it on right of trunk\n    trunk.right = BinaryTree.new(element, nil, nil)\n  elsif element &lt; trunk.payload\n    # Update pointer\n    insert_node(element, trunk.left)\n  elsif element &gt; trunk.payload\n    # Update pointer\n    insert_node(element, trunk.right)\n  end\nend\n\ndef build_tree(array)\n    trunk = BinaryTree.new(array.first, nil, nil)\n    array.shift\n    output = []\n\n    array.each do |element|\n      # Insert each element\n      output &lt;&lt; insert_node(element,trunk).payload\n    end\n\n  return output\nend\n</code></pre>\n\n<p>And my BinaryTree implementation</p>\n\n<pre><code>class BinaryTree\n  attr_accessor :payload, :left, :right\n\n  def initialize(payload, left, right)\n    @payload = payload\n    @left = left\n    @right = right\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments"], "comments": [{"owner": {"reputation": 956, "user_id": 327785, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/463ada4aef1b82f4373411a69b300d2c?s=128&d=identicon&r=PG", "display_name": "Giorgio Gambino", "link": "https://stackoverflow.com/users/327785/giorgio-gambino"}, "edited": false, "score": 0, "creation_date": 1464190146, "post_id": 37441033, "comment_id": 62385668, "body": "Take a look at this page it may be helpful <a href=\"https://support.stripe.com/questions/can-i-save-a-card-and-charge-it-later\" rel=\"nofollow noreferrer\">support.stripe.com/questions/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 14821, "user_id": 5307473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oHbg3.jpg?s=128&g=1", "display_name": "Ywain", "link": "https://stackoverflow.com/users/5307473/ywain"}, "is_accepted": false, "score": 1, "last_activity_date": 1464192998, "creation_date": 1464192998, "answer_id": 37442669, "question_id": 37441033, "link": "https://stackoverflow.com/questions/37441033/how-to-save-customer-card-updates-in-stripe-rails/37442669#37442669", "title": "How to save customer card updates in Stripe, Rails?", "body": "<p>To update the card for an existing customer, the relevant snippet from the PHP recipe you mentioned is:</p>\n\n<pre><code>$cu = \\Stripe\\Customer::retrieve($customer_id); // stored in your application\n$cu-&gt;source = $_POST['stripeToken']; // obtained with Checkout\n$cu-&gt;save();\n</code></pre>\n\n<p>In Ruby, this would be:</p>\n\n<pre><code>cu = Stripe::Customer.retrieve(customer_id)\ncu.source = params[:stripeToken]\ncu.save\n</code></pre>\n\n<p>This will update the existing customer with the card from the token contained in the <code>stripeToken</code> parameter.</p>\n"}, {"comments": [{"owner": {"reputation": 4009, "user_id": 375960, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2d844f88c7eda26c4a42df32569fb1cf?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/375960/kevin"}, "edited": false, "score": 0, "creation_date": 1581625541, "post_id": 37448521, "comment_id": 106509523, "body": "You need to call customer.save after using the assignment operator, I believe"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 4, "last_activity_date": 1464269822, "last_edit_date": 1495539973, "creation_date": 1464214353, "answer_id": 37448521, "question_id": 37441033, "link": "https://stackoverflow.com/questions/37441033/how-to-save-customer-card-updates-in-stripe-rails/37448521#37448521", "title": "How to save customer card updates in Stripe, Rails?", "body": "<p>You might also want to check out this SO answer <a href=\"https://stackoverflow.com/a/37244061/6263819\">How to create a charge and a customer in Stripe ( Rails)</a> for more details on using Stripe in a Rails application.</p>\n\n<p>For Ruby documentation, you can find great examples at on the <a href=\"https://stripe.com/docs/api\" rel=\"nofollow noreferrer\">Stripe Ruby API</a>.  In Stripe terminology, a card is called a <code>source</code> for the customer.  You can create a <code>source</code> from a <code>token</code>, but once it's created, you deal with <code>source</code> and <code>default_source</code> elements on the Customer object, and retrieve <code>card</code> objects from the customer's <code>source</code>.  Also note that you should never try to use the <code>token</code> beyond creating the <code>source</code> (or for one-time charges).</p>\n\n<p>The <a href=\"https://stripe.com/docs/api#customers\" rel=\"nofollow noreferrer\">Stripe Ruby API for Customers</a> shows that you can create a <code>customer</code> and assign the <code>source</code> at the same time:</p>\n\n<pre><code>customer = Stripe::Customer.create(\n    source: token,\n    email: current_user.email\n)\n</code></pre>\n\n<p>You <em>do not</em> have to assign a <code>source</code> to create a customer.  However, if you set the customer up on a subscription, they will require a <code>source</code> to be available, and the charges will be made to the customer's <code>default_source</code>.  If a customer has only one <code>source</code>, it is automatically the <code>default_source</code>.</p>\n\n<p>The <a href=\"https://stripe.com/docs/api#cards\" rel=\"nofollow noreferrer\">Stripe Ruby API for Cards</a>, shows that you can also add a new card to an existing customer, using a token:</p>\n\n<pre><code>customer = Stripe::Customer.retrieve(customer_id)\ncustomer.sources.create({source: token_id})\n</code></pre>\n\n<p>Once you have a card assigned to the customer, you can make it the <code>default_source</code>, using this:</p>\n\n<pre><code>customer.default_source = customer.sources.retrieve(card_id)\n</code></pre>\n\n<p>And that's what it takes to get setup and ready to start charging customers.  Happy billing!</p>\n"}], "owner": {"reputation": 454, "user_id": 6117695, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/a7838a79af51040b784f9997eac63256?s=128&d=identicon&r=PG&f=1", "display_name": "Marko I.", "link": "https://stackoverflow.com/users/6117695/marko-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2059, "favorite_count": 0, "accepted_answer_id": 37448521, "answer_count": 2, "score": 3, "last_activity_date": 1505278276, "creation_date": 1464188688, "last_edit_date": 1505278276, "question_id": 37441033, "link": "https://stackoverflow.com/questions/37441033/how-to-save-customer-card-updates-in-stripe-rails", "title": "How to save customer card updates in Stripe, Rails?", "body": "<p>I want customers to be able to update their credit card details in my Rails app.  Stripe has documentation on how to achieve this, but the article is showing an example in PHP, but I need an example for Rails: <a href=\"https://stripe.com/docs/recipes/updating-customer-cards\" rel=\"nofollow noreferrer\">https://stripe.com/docs/recipes/updating-customer-cards</a></p>\n\n<p>Basically, I need to save a customer's credit card without charging it.</p>\n\n<p>This is <code>subscribers_controller.rb</code>:</p>\n\n<pre><code>class SubscribersController &lt; ApplicationController        \n  before_filter :authenticate_user!\n\n  def new\n  end\n\n  def update\n    token = params[:stripeToken]\n\n    customer = Stripe::Customer.create(\n      card: token,\n      plan: 1212,\n      email: current_user.email\n    )\n\n    current_user.subscribed = true\n    current_user.stripeid = customer.id\n    current_user.save\n\n    redirect_to profiles_user_path\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1464188635, "post_id": 37440935, "comment_id": 62384530, "body": "<code>virtual memory exhausted: Cannot allocate memory</code> Looks like you&#39;ve run out of memory."}, {"owner": {"reputation": 531, "user_id": 5177699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/dXj8V.jpg?s=128&g=1", "display_name": "Vinod Rathod", "link": "https://stackoverflow.com/users/5177699/vinod-rathod"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1464188762, "post_id": 37440935, "comment_id": 62384637, "body": "so what can be done to get rid of this?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1464188787, "post_id": 37440935, "comment_id": 62384662, "body": "Try uncommenting <code>gem &#39;bcrypt&#39;, &#39;~&gt; 3.1.7&#39;</code> and run <code>bundle install</code> again."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1464188940, "post_id": 37440935, "comment_id": 62384790, "body": "Investigate whether this is true. If it is, then look for ways to free space - e.g. are there any big log files cluttering up the disk? Or, you could spin up a droplet with more memory."}, {"owner": {"reputation": 531, "user_id": 5177699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/dXj8V.jpg?s=128&g=1", "display_name": "Vinod Rathod", "link": "https://stackoverflow.com/users/5177699/vinod-rathod"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1464190771, "post_id": 37440935, "comment_id": 62386109, "body": "@Pavan I have tried uncommenting the bcrypt again got error please the check updated section."}], "answers": [{"comments": [{"owner": {"reputation": 6018, "user_id": 3446655, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/AH6Ys.jpg?s=128&g=1", "display_name": "HarlemSquirrel", "link": "https://stackoverflow.com/users/3446655/harlemsquirrel"}, "edited": false, "score": 0, "creation_date": 1528664515, "post_id": 37469274, "comment_id": 88582349, "body": "I was able to get it working by stopping my puma server before deploying which freed up enough memory."}], "tags": [], "owner": {"reputation": 531, "user_id": 5177699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/dXj8V.jpg?s=128&g=1", "display_name": "Vinod Rathod", "link": "https://stackoverflow.com/users/5177699/vinod-rathod"}, "is_accepted": false, "score": 1, "last_activity_date": 1464290138, "creation_date": 1464290138, "answer_id": 37469274, "question_id": 37440935, "link": "https://stackoverflow.com/questions/37440935/gemextbuilderror-error-failed-to-build-gem-native-extension-ubuntu/37469274#37469274", "title": "Gem::Ext::BuildError: ERROR: Failed to build gem native extension - Ubuntu", "body": "<p>When I increased the Memory &amp; Size of droplet from 521MB to 2GB, this all errors gone and it worked for me.</p>\n"}], "owner": {"reputation": 531, "user_id": 5177699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/dXj8V.jpg?s=128&g=1", "display_name": "Vinod Rathod", "link": "https://stackoverflow.com/users/5177699/vinod-rathod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1259, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1464290138, "creation_date": 1464188424, "last_edit_date": 1464190689, "question_id": 37440935, "link": "https://stackoverflow.com/questions/37440935/gemextbuilderror-error-failed-to-build-gem-native-extension-ubuntu", "title": "Gem::Ext::BuildError: ERROR: Failed to build gem native extension - Ubuntu", "body": "<p>Whenever I try to <code>bundle install</code> on DigitalOcean Droplet - <code>ruby-rails-postgres-nginx-unicorn</code></p>\n\n<p>I later installed mongodb using SSH from terminal</p>\n\n<p>and later when uploading the project to the /home// folder and bundle install, I get this error.</p>\n\n<pre><code>Fetching gem metadata from https://rubygems.org/\nFetching version metadata from https://rubygems.org/\nvinod@ruby-rails-postgres-nginx-unicorn-512mb-sgp1-01:~/dride$ bundle \nFetching gem metadata from https://rubygems.org/...........\nFetching version metadata from https://rubygems.org/...\nFetching dependency metadata from https://rubygems.org/..\nResolving dependencies...\nUsing rake 11.1.2\nUsing i18n 0.7.0\nUsing json 1.8.3\nUsing minitest 5.9.0\nUsing thread_safe 0.3.5\nUsing tzinfo 1.2.2\nUsing activesupport 4.2.5.2\nUsing builder 3.2.2\nUsing erubis 2.7.0\nUsing mini_portile2 2.0.0\nUsing nokogiri 1.6.7.2\nUsing rails-deprecated_sanitizer 1.0.3\nUsing rails-dom-testing 1.0.7\nUsing loofah 2.0.3\nUsing rails-html-sanitizer 1.0.3\nUsing actionview 4.2.5.2\nUsing rack 1.6.4\nUsing rack-test 0.6.3\nUsing actionpack 4.2.5.2\nUsing globalid 0.3.6\nUsing activejob 4.2.5.2\nUsing mime-types-data 3.2016.0521\nUsing mime-types 3.1\nUsing mail 2.6.4\nUsing actionmailer 4.2.5.2\nUsing activemodel 4.2.5.2\nUsing arel 6.0.3\nUsing activerecord 4.2.5.2\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /usr/local/rvm/rubies/ruby-2.2.1/bin/ruby -r ./siteconf20160525-15401-ztxhbh.rb extconf.rb \ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling crypt_gensalt.c\ncompiling crypt.c\ncompiling crypt_blowfish.c\nvirtual memory exhausted: Cannot allocate memory\nmake: *** [crypt_blowfish.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /tmp/bundler20160525-15401-11lp2i/bcrypt-3.1.11/gems/bcrypt-3.1.11 for inspection.\nResults logged to /tmp/bundler20160525-15401-11lp2i/bcrypt-3.1.11/extensions/x86_64-linux/2.2.0/bcrypt-3.1.11/gem_make.out\n</code></pre>\n\n<blockquote>\n  <p>An error occurred while installing bcrypt (3.1.11), and Bundler cannot\n  continue.\n      Make sure that <code>gem install bcrypt -v '3.1.11'</code> succeeds before bundling.</p>\n</blockquote>\n\n<p>And my gemfile is </p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.5.2'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\ngem 'mongoid', '~&gt; 5.1.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\n  gem \"factory_girl_rails\"\n  gem 'ffaker'\n  gem \"shoulda-matchers\"\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n\ngroup :test do\n  gem \"rspec-rails\"\nend\n\ngem \"devise\"\n</code></pre>\n\n<blockquote>\n  <p><strong>UPDATED</strong></p>\n</blockquote>\n\n<p>When I Tried uncommenting <code>gem 'bcrypt', '~&gt; 3.1.7'</code> and run <code>bundle install</code> again\nI get this error.</p>\n\n<pre><code>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /usr/local/rvm/rubies/ruby-2.2.1/bin/ruby -r ./siteconf20160525-19540-1s18rpw.rb extconf.rb \nchecking if the C compiler accepts ... yes\nBuilding nokogiri using packaged libraries.\nUsing mini_portile version 2.0.0\nchecking for gzdopen() in -lz... yes\nchecking for iconv... yes\n************************************************************************\nIMPORTANT NOTICE:\n\nBuilding Nokogiri with a packaged version of libxml2-2.9.2\nwith the following patches applied:\n    - 0001-Revert-Missing-initialization-for-the-catalog-module.patch\n    - 0002-Fix-missing-entities-after-CVE-2014-3660-fix.patch\n    - 0003-Stop-parsing-on-entities-boundaries-errors.patch\n    - 0004-Cleanup-conditional-section-error-handling.patch\n    - 0005-CVE-2015-1819-Enforce-the-reader-to-run-in-constant-.patch\n    - 0006-Another-variation-of-overflow-in-Conditional-section.patch\n    - 0007-Fix-an-error-in-previous-Conditional-section-patch.patch\n    - 0008-CVE-2015-8035-Fix-XZ-compression-support-loop.patch\n    - 0009-Updated-config.guess.patch\n    - 0010-Fix-parsering-short-unclosed-comment-uninitialized-access.patch\n    - 0011-Avoid-extra-processing-of-MarkupDecl-when-EOF.patch\n    - 0012-Avoid-processing-entities-after-encoding-conversion-.patch\n    - 0013-CVE-2015-7497-Avoid-an-heap-buffer-overflow-in-xmlDi.patch\n    - 0014-CVE-2015-5312-Another-entity-expansion-issue.patch\n    - 0015-Add-xmlHaltParser-to-stop-the-parser.patch\n    - 0016-Detect-incoherency-on-GROW.patch\n    - 0017-CVE-2015-7500-Fix-memory-access-error-due-to-incorre.patch\n    - 0018-CVE-2015-8242-Buffer-overead-with-HTML-parser-in-pus.patch\n    - 0019-Do-not-print-error-context-when-there-is-none.patch\n    - 0020-xmlStopParser-reset-errNo.patch\n    - 0021-Reuse-xmlHaltParser-where-it-makes-sense.patch\n\nTeam Nokogiri will keep on doing their best to provide security\nupdates in a timely manner, but if this is a concern for you and want\nto use the system library instead; abort this installation process and\nreinstall nokogiri as follows:\n\n    gem install nokogiri -- --use-system-libraries\n        [--with-xml2-config=/path/to/xml2-config]\n        [--with-xslt-config=/path/to/xslt-config]\n\nIf you are using Bundler, tell it to use the option:\n\n    bundle config build.nokogiri --use-system-libraries\n    bundle install\n\nNote, however, that nokogiri is not fully compatible with arbitrary\nversions of libxml2 provided by OS/package vendors.\n************************************************************************\nExtracting libxml2-2.9.2.tar.gz into tmp/x86_64-unknown-linux-gnu/ports/libxml2/2.9.2... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0001-Revert-Missing-initialization-for-the-catalog-module.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0002-Fix-missing-entities-after-CVE-2014-3660-fix.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0003-Stop-parsing-on-entities-boundaries-errors.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0004-Cleanup-conditional-section-error-handling.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0005-CVE-2015-1819-Enforce-the-reader-to-run-in-constant-.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0006-Another-variation-of-overflow-in-Conditional-section.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0007-Fix-an-error-in-previous-Conditional-section-patch.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0008-CVE-2015-8035-Fix-XZ-compression-support-loop.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0009-Updated-config.guess.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0010-Fix-parsering-short-unclosed-comment-uninitialized-access.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0011-Avoid-extra-processing-of-MarkupDecl-when-EOF.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0012-Avoid-processing-entities-after-encoding-conversion-.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0013-CVE-2015-7497-Avoid-an-heap-buffer-overflow-in-xmlDi.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0014-CVE-2015-5312-Another-entity-expansion-issue.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0015-Add-xmlHaltParser-to-stop-the-parser.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0016-Detect-incoherency-on-GROW.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0017-CVE-2015-7500-Fix-memory-access-error-due-to-incorre.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0018-CVE-2015-8242-Buffer-overead-with-HTML-parser-in-pus.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0019-Do-not-print-error-context-when-there-is-none.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0020-xmlStopParser-reset-errNo.patch... OK\nRunning git apply with /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/patches/libxml2/0021-Reuse-xmlHaltParser-where-it-makes-sense.patch... OK\nRunning 'configure' for libxml2 2.9.2... OK\nRunning 'compile' for libxml2 2.9.2... ERROR, review '/home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/ext/nokogiri/tmp/x86_64-unknown-linux-gnu/ports/libxml2/2.9.2/compile.log' to see what happened. Last lines are:\n========================================================================\nmake[3]: Nothing to be done for `all'.\nmake[3]: Leaving directory `/home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/ext/nokogiri/tmp/x86_64-unknown-linux-gnu/ports/libxml2/2.9.2/libxml2-2.9.2/include/libxml'\nmake[3]: Entering directory `/home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/ext/nokogiri/tmp/x86_64-unknown-linux-gnu/ports/libxml2/2.9.2/libxml2-2.9.2/include'\nmake[3]: Nothing to be done for `all-am'.\nmake[3]: Leaving directory `/home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/ext/nokogiri/tmp/x86_64-unknown-linux-gnu/ports/libxml2/2.9.2/libxml2-2.9.2/include'\nmake[2]: Leaving directory `/home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/ext/nokogiri/tmp/x86_64-unknown-linux-gnu/ports/libxml2/2.9.2/libxml2-2.9.2/include'\nMaking all in .\nmake[2]: Entering directory `/home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/ext/nokogiri/tmp/x86_64-unknown-linux-gnu/ports/libxml2/2.9.2/libxml2-2.9.2'\n  CC       SAX.lo\n  CC       entities.lo\n  CC       encoding.lo\n  CC       error.lo\n  CC       parserInternals.lo\n  CC       parser.lo\nvirtual memory exhausted: Cannot allocate memory\nmake[2]: *** [parser.lo] Error 1\nmake[2]: Leaving directory `/home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/ext/nokogiri/tmp/x86_64-unknown-linux-gnu/ports/libxml2/2.9.2/libxml2-2.9.2'\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory `/home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2/ext/nokogiri/tmp/x86_64-unknown-linux-gnu/ports/libxml2/2.9.2/libxml2-2.9.2'\nmake: *** [all] Error 2\n========================================================================\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/usr/local/rvm/rubies/ruby-2.2.1/bin/$(RUBY_BASE_NAME)\n    --help\n    --clean\n    --use-system-libraries\n    --enable-static\n    --disable-static\n    --with-zlib-dir\n    --without-zlib-dir\n    --with-zlib-include\n    --without-zlib-include=${zlib-dir}/include\n    --with-zlib-lib\n    --without-zlib-lib=${zlib-dir}/lib\n    --enable-cross-build\n    --disable-cross-build\n/home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/mini_portile2-2.0.0/lib/mini_portile2/mini_portile.rb:366:in `block in execute': Failed to complete compile task (RuntimeError)\n    from /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/mini_portile2-2.0.0/lib/mini_portile2/mini_portile.rb:337:in `chdir'\n    from /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/mini_portile2-2.0.0/lib/mini_portile2/mini_portile.rb:337:in `execute'\n    from /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/mini_portile2-2.0.0/lib/mini_portile2/mini_portile.rb:111:in `compile'\n    from /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/mini_portile2-2.0.0/lib/mini_portile2/mini_portile.rb:150:in `cook'\n    from extconf.rb:289:in `block (2 levels) in process_recipe'\n    from extconf.rb:182:in `block in chdir_for_build'\n    from extconf.rb:181:in `chdir'\n    from extconf.rb:181:in `chdir_for_build'\n    from extconf.rb:288:in `block in process_recipe'\n    from extconf.rb:187:in `tap'\n    from extconf.rb:187:in `process_recipe'\n    from extconf.rb:478:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in /home/vinod/dride/vendor/bundle/ruby/2.2.0/gems/nokogiri-1.6.7.2 for inspection.\nResults logged to /home/vinod/dride/vendor/bundle/ruby/2.2.0/extensions/x86_64-linux/2.2.0/nokogiri-1.6.7.2/gem_make.out\nAn error occurred while installing nokogiri (1.6.7.2), and Bundler cannot continue.\nMake sure that `gem install nokogiri -v '1.6.7.2'` succeeds before bundling.\n</code></pre>\n"}, {"tags": ["ruby", "hashmap", "overwrite"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1464192485, "post_id": 37440498, "comment_id": 62387384, "body": "You need to use a different key for each occurrence of a given [part of speech]. Initialize a counter at zero, increment it each time you see a [part of speech] in the text, and use it in the hash key."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 5570032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-yFTGcpS3pA8/AAAAAAAAAAI/AAAAAAAAAPc/-rUgf1whdjo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/5570032/alex"}, "edited": false, "score": 0, "creation_date": 1464191738, "post_id": 37440571, "comment_id": 62386902, "body": "I&#39;t more like with this would I be able to have to spots in the hashmap that are called &quot;noun&quot; but they have different values?"}, {"owner": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "reply_to_user": {"reputation": 109, "user_id": 5570032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-yFTGcpS3pA8/AAAAAAAAAAI/AAAAAAAAAPc/-rUgf1whdjo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/5570032/alex"}, "edited": false, "score": 0, "creation_date": 1464193348, "post_id": 37440571, "comment_id": 62387920, "body": "You cant have multiple keys in hash with the same name. But you can store multiple values for given key, and use any of them later <code>hash = {} (1, 2, 3).each do |i|   hash[:a] ||= []   hash[:a] &lt;&lt; i end # { a: [1, 2, 3] }</code> Maybe in will help."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1464197839, "post_id": 37440571, "comment_id": 62390418, "body": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041a\u0443\u0437\u043d\u0435\u0446\u043e\u0432 I think you misunderstood the question.  He needs to have all the values, not just the first one."}], "tags": [], "owner": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "is_accepted": false, "score": 0, "last_activity_date": 1464187512, "creation_date": 1464187512, "answer_id": 37440571, "question_id": 37440498, "link": "https://stackoverflow.com/questions/37440498/how-can-i-stop-a-hash-key-from-overwriting-duplicates-in-ruby/37440571#37440571", "title": "How can I stop a hash key from overwriting duplicates in ruby", "body": "<p>If you need to write only first value for given key - use ||=</p>\n\n<pre><code>hash = {}\nhash[:a] ||= 1 # =&gt; { a: 1 }\nhash[:a] ||= 2 # =&gt; { a: 1 }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 5570032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-yFTGcpS3pA8/AAAAAAAAAAI/AAAAAAAAAPc/-rUgf1whdjo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/5570032/alex"}, "edited": false, "score": 0, "creation_date": 1464200849, "post_id": 37444243, "comment_id": 62392116, "body": "Would it be a good idea then to make 3 hashmaps to store only a certain type, like one for nouns, one for verbs and one for adjective? So then I could keep count of how many nouns there are."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 109, "user_id": 5570032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-yFTGcpS3pA8/AAAAAAAAAAI/AAAAAAAAAPc/-rUgf1whdjo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/5570032/alex"}, "edited": false, "score": 1, "creation_date": 1464201309, "post_id": 37444243, "comment_id": 62392375, "body": "I don&#39;t think so.  Why do you need to keep count?  If the keys were something totally unrelated to part of speech (e.g. :bluebird, :cardinal, :sparrow) wouldn&#39;t it work the same?  All you need the part of speech for is to prompt the user, right?"}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": true, "score": 0, "last_activity_date": 1464198211, "creation_date": 1464198211, "answer_id": 37444243, "question_id": 37440498, "link": "https://stackoverflow.com/questions/37440498/how-can-i-stop-a-hash-key-from-overwriting-duplicates-in-ruby/37444243#37444243", "title": "How can I stop a hash key from overwriting duplicates in ruby", "body": "<p>The hash's behavior of replacing the value for a given key with a new value is the intended behavior of a hash.  We expect and need hashes to behave that way.</p>\n\n<p>As previously said by others, you need to give each key a unique name. You could name the adjectives <code>adjective1</code>, <code>adjective2</code>, etc.  If you want to hide the numbers from the user, you could easily remove them in the string that you display.  It might not be so bad to even leave them in.</p>\n\n<p>It might seem that implementing each part of speech as an array so that you'd have adjectives[0], etc., is a better design, but for the MadLibs use case, I don't think so.  The adjectives don't really have anything more in common with each other than they do with instances of other parts of speech.</p>\n"}], "owner": {"reputation": 109, "user_id": 5570032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-yFTGcpS3pA8/AAAAAAAAAAI/AAAAAAAAAPc/-rUgf1whdjo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/5570032/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 37444243, "answer_count": 2, "score": 0, "last_activity_date": 1464198211, "creation_date": 1464187355, "last_edit_date": 1464192030, "question_id": 37440498, "link": "https://stackoverflow.com/questions/37440498/how-can-i-stop-a-hash-key-from-overwriting-duplicates-in-ruby", "title": "How can I stop a hash key from overwriting duplicates in ruby", "body": "<p>I'm making a madlib; in the paragraph it finds words that look like this: <code>[noun]</code>, <code>[verb]</code> or <code>[adjective]</code>. It does that fine but when I prompt the user for the desired word they want for that position it keeps overwriting the key with the already existing key (I'm guessing because they have the same name). But I don't know how to stop it from overwriting it; I've tried merging but I can't get it to work.    </p>\n\n<p>Here is the code:    </p>\n\n<pre><code>class MadLib\n  def initialize(input)\n    p @input_string = read_file(input)\n    p @parsed_inputs = parse(@input_string)\n    p @hashed_input_values = {}\n  end\n\n  def take_input\n    @parsed_inputs.each do |key|\n      parse_key = key.match(/:/)\n\n      if parse_key\n        print \"Enter #{parse_key.post_match} :\"\n        value = STDIN.gets.chomp\n        @hashed_input_values[\"[#{key}]\"] = value\n        @hashed_input_values[\"[#{parse_key.pre_match}]\"] = value\n        @parsed_inputs.delete(parse_key.pre_match)\n      else\n        print \"Enter #{key} :\"\n        @hashed_input_values[\"[#{key}]\"] = STDIN.gets.chomp\n      end\n    end\n\n    @hashed_input_values\n  end\n\n  def print_output\n    @input_string.gsub(/\\[(\\w*:*\\w)]/i, @hashed_input_values)\n  end\n\n  def parse(input)\n    # f = File.open(input)\n    input.scan(/\\[(\\w*:*\\w)]/i).flatten\n  end\n\n  def read_file(file_name)\n    file = File.read(file_name)\n  end\n\n  private :parse\nend\n\nmadlib = MadLib.new(ARGV[0])\n\n# test = \"Story1.txt\"\n# madlib = MadLib.new(test)\nmadlib.take_input\nputs \"#{madlib.print_output}\"\n</code></pre>\n\n<p>And here is the text file I've been using:</p>\n\n<pre><code>Everyone was so [adjective] to [verb] all of the [adjective] animals. The star of the show was a [adjective] [noun] named Bobo.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "eager-loading"], "comments": [{"owner": {"reputation": 245, "user_id": 5320734, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vnRwv.jpg?s=128&g=1", "display_name": "ZebThan", "link": "https://stackoverflow.com/users/5320734/zebthan"}, "edited": false, "score": 0, "creation_date": 1464187412, "post_id": 37440024, "comment_id": 62383559, "body": "Maybe try adding another slash at the end like this:    something/lib/"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1464189366, "post_id": 37440024, "comment_id": 62385099, "body": "In <code>config&#47;environments&#47;development.rb</code>, do you by any change have the setting: <code>config.eager_load = false</code>? Make it <code>true</code>. Or, instead of <code>config.eager_load_paths</code>, use <code>config.autoload_paths</code>. (If my guess is true, I&#39;ll add it as an answer....)"}, {"owner": {"reputation": 21, "user_id": 6313551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8939f30f159f0946007fde521a4ca54b?s=128&d=identicon&r=PG&f=1", "display_name": "ahitendra", "link": "https://stackoverflow.com/users/6313551/ahitendra"}, "edited": false, "score": 0, "creation_date": 1464212125, "post_id": 37440024, "comment_id": 62397878, "body": "Thanks Tom. It worked. But I have a doubt. When <code>config.eager_load = false</code> was present in <code>development.rb</code>, how come every other folder and file present in lib was getting loaded except integer.rb?"}, {"owner": {"reputation": 21, "user_id": 6313551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8939f30f159f0946007fde521a4ca54b?s=128&d=identicon&r=PG&f=1", "display_name": "ahitendra", "link": "https://stackoverflow.com/users/6313551/ahitendra"}, "edited": false, "score": 0, "creation_date": 1464252633, "post_id": 37440024, "comment_id": 62411879, "body": "After looking into it more, I got to know something. When the condition <code>config.eager_load = false</code> is present in <code>development.rb</code> and <code>config.eager_load_paths += %W(#{config.root}&#47;lib)</code> is present in <code>application.rb</code> Rails loads the paths of the files present in the lib folder. when any class defined in lib is initialized, Rails checks the path and access the class. In my case lib/integer.rb path is loaded but when I called the method I wrote, it looked into the ruby&#39;s Integer class instead of looking into the lib/integer.rb file because of the <code>config.eager_load</code> condition."}], "owner": {"reputation": 21, "user_id": 6313551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8939f30f159f0946007fde521a4ca54b?s=128&d=identicon&r=PG&f=1", "display_name": "ahitendra", "link": "https://stackoverflow.com/users/6313551/ahitendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464195470, "creation_date": 1464186199, "last_edit_date": 1464195470, "question_id": 37440024, "link": "https://stackoverflow.com/questions/37440024/in-rails-extended-integer-class-written-in-lib-folder-is-not-getting-loaded-wit", "title": "In Rails, extended Integer class written in lib folder is not getting loaded with the eager loading of lib", "body": "<p>I have created a file integer.rb in lib folder and that contains the following piece of code</p>\n\n<pre><code>class Integer\n  def digits\n    self.abs.to_s.size\n  end\nend\n</code></pre>\n\n<p>I am loading the lib folder in application.rb file with this line</p>\n\n<pre><code>config.eager_load_paths += %W(#{config.root}/lib)\n</code></pre>\n\n<p>but it doesn't seem to be loading the lib/integer.rb file, but if I explicitly write<br>\n<code>require \"#{config.root}/lib/integer\"</code><br>\nthen the digits method I wrote gets available for the usage.<br>\nWhy do I have to explicitly load the file when I am loading the whole lib folder already?</p>\n\n<p>Rails version I use is 4.0.0</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "nokogiri", "sidekiq"], "comments": [{"owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "edited": false, "score": 0, "creation_date": 1464186313, "post_id": 37439389, "comment_id": 62382616, "body": "Are you sure that sidekiq is getting restarted when you deploy? Many issues start with that assumption not being true."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "edited": false, "score": 0, "creation_date": 1464186365, "post_id": 37439389, "comment_id": 62382662, "body": "@msergeant Yes, I am manually restarting it."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 2, "creation_date": 1464208313, "post_id": 37439389, "comment_id": 62396125, "body": "Try running your job with <code>.new.perform</code> instead of <code>.perform_async</code> so you can monitor it with your preferred debugger, e.g., pry, rather than having it run through Sidekiq."}], "answers": [{"tags": [], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "is_accepted": false, "score": 0, "last_activity_date": 1464274819, "creation_date": 1464274819, "answer_id": 37464535, "question_id": 37439389, "link": "https://stackoverflow.com/questions/37439389/sidekiq-job-doesnt-seem-to-be-parsing/37464535#37464535", "title": "Sidekiq job doesn&#39;t seem to be parsing", "body": "<p>Well, the answer has nothing to do with Sidekiq, instead it was the output, which Nokogiri was dying on.  Turns out Nmap was adding a non-XML line at the beginning of the XML file \"Starting Nmap 7.12\".  So, Nokogiri was simply dying there.</p>\n\n<p>I guess moral of the story is to make sure your XML output is what you Nokogiri intends it to be!</p>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464274819, "creation_date": 1464184621, "last_edit_date": 1464214560, "question_id": 37439389, "link": "https://stackoverflow.com/questions/37439389/sidekiq-job-doesnt-seem-to-be-parsing", "title": "Sidekiq job doesn&#39;t seem to be parsing", "body": "<p>I'm trying to mimic what a previous developer did to parse an XML file in my Rails app and am stuck.  From what I can tell, my job completes, but nothing is being posted as it should be, so I'm guessing my parsing file is incorrect (however, it works fine when testing with the raw file on my localhost).  So, where am I going wrong here?</p>\n\n<p>This is Sidekiq log output, just to confirm job is happening and not showing any errors in processing:</p>\n\n<pre><code>2016-05-25T13:51:04.499Z 8977 TID-oxs3s9lng ParseTestData JID-2a01971539c887cac3bf3374:1 INFO: start\n2016-05-25T13:51:04.781Z 8977 TID-oxs3s9l3g GenerateNotifications JID-2a01971539c887cac3bf3374:2 INFO: start\n2016-05-25T13:51:04.797Z 8977 TID-oxs3s9lng ParseTestData JID-2a01971539c887cac3bf3374:1 INFO: done: 0.297 sec\n2016-05-25T13:51:04.824Z 8977 TID-oxs3s9l3g GenerateNotifications JID-2a01971539c887cac3bf3374:2 INFO: done: 0.043 sec\n</code></pre>\n\n<p>This is my Sidekiq job file, which iterates through the compressed files that get submitted through my API.  The file in question that I'm working on is <code>nmap_poodle_scan.xml</code>:</p>\n\n<pre><code>class ParseTestData\n  include Sidekiq::Worker\n\n  # Order matters. Parse network hosts first to ensure we uniquely identify network hosts by their mac address.\n  PARSERS = {\n    \"network_hosts.xml\" =&gt; Parsers::NetworkHostParser,\n    \"nmap_tcp_service_scan.xml\" =&gt; Parsers::TcpServiceScanParser,\n    \"nmap_shellshock_scan.xml\" =&gt; Parsers::ShellshockScanParser,\n    \"hydra.out\" =&gt; Parsers::HydraParser,\n    \"events.log\" =&gt; Parsers::EventParser,\n    \"nmap_poodle_scan.xml\" =&gt; Parsers::PoodleScanParser\n  }\n\n  def perform(test_id)\n    test = Test.find(test_id)\n\n    gzip = if Rails.env.development?\n      Zlib::GzipReader.open(test.data.path)\n    else\n      file = Net::HTTP.get(URI.parse(test.data.url))\n      Zlib::GzipReader.new(StringIO.new(file))\n    end\n\n    # Collect entries from tarball\n    entries = {}\n    tar_extract = Gem::Package::TarReader.new(gzip)\n    tar_extract.rewind\n    tar_extract.each do |entry|\n      entries[File.basename(entry.full_name)] = entry.read\n    end\n\n    # Preserve parse order by using the parser hash to initiate parser executions.\n    PARSERS.each_pair do |filename, parser|\n      next unless entry = entries[filename]\n      parser.run!(test, entry)\n    end\n  end\nend\n</code></pre>\n\n<p>Which grabs nmap_poodle_scan.xml:</p>\n\n<pre><code>&lt;host starttime=\"1464180941\" endtime=\"1464180941\"&gt;&lt;status state=\"up\" reason=\"arp-response\" reason_ttl=\"0\"/&gt;\n&lt;address addr=\"10.10.10.1\" addrtype=\"ipv4\"/&gt;\n&lt;address addr=\"4C:E6:76:3F:2F:77\" addrtype=\"mac\" vendor=\"Buffalo.inc\"/&gt;\n&lt;hostnames&gt;\n&lt;hostname name=\"DD-WRT\" type=\"PTR\"/&gt;\n&lt;/hostnames&gt;\nNmap scan report for DD-WRT (10.10.10.1)\n&lt;ports&gt;&lt;extraports state=\"closed\" count=\"996\"&gt;\n&lt;extrareasons reason=\"resets\" count=\"996\"/&gt;\n&lt;/extraports&gt;\n&lt;table key=\"CVE-2014-3566\"&gt;\n&lt;elem key=\"title\"&gt;SSL POODLE information leak&lt;/elem&gt;\n&lt;elem key=\"state\"&gt;VULNERABLE&lt;/elem&gt;\n&lt;table key=\"ids\"&gt;\n&lt;elem&gt;OSVDB:113251&lt;/elem&gt;\n&lt;elem&gt;CVE:CVE-2014-3566&lt;/elem&gt;\n&lt;/table&gt;\n&lt;table key=\"description\"&gt;\n&lt;elem&gt;    The SSL protocol 3.0, as used in OpenSSL through 1.0.1i and&amp;#xa;    other products, uses nondeterministic CBC padding, which makes it easier&amp;#xa;    for man-in-the-middle attackers to obtain cleartext data via a&amp;#xa;    padding-oracle attack, aka the &amp;quot;POODLE&amp;quot; issue.&lt;/elem&gt;\n&lt;/table&gt;\n&lt;table key=\"dates\"&gt;\n&lt;table key=\"disclosure\"&gt;\n&lt;elem key=\"year\"&gt;2014&lt;/elem&gt;\n&lt;elem key=\"month\"&gt;10&lt;/elem&gt;\n&lt;elem key=\"day\"&gt;14&lt;/elem&gt;\n&lt;/table&gt;\n&lt;/table&gt;\n&lt;elem key=\"disclosure\"&gt;2014-10-14&lt;/elem&gt;\n&lt;table key=\"check_results\"&gt;\n&lt;elem&gt;TLS_RSA_WITH_3DES_EDE_CBC_SHA&lt;/elem&gt;\n&lt;/table&gt;\n&lt;table key=\"refs\"&gt;\n&lt;elem&gt;https://www.imperialviolet.org/2014/10/14/poodle.html&lt;/elem&gt;\n&lt;elem&gt;http://osvdb.org/113251&lt;/elem&gt;\n&lt;elem&gt;https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3566&lt;/elem&gt;\n&lt;elem&gt;https://www.openssl.org/~bodo/ssl-poodle.pdf&lt;/elem&gt;\n&lt;/table&gt;\n&lt;/table&gt;\n&lt;/script&gt;&lt;/port&gt;\n&lt;/ports&gt;\n&lt;times srtt=\"4665\" rttvar=\"556\" to=\"100000\"/&gt;\n&lt;/host&gt;\n</code></pre>\n\n<p>Which should submit to PoodleScanParser:</p>\n\n<pre><code>module Parsers\n  class PoodleScanParser &lt; NmapScanParser\n    def self.run!(test, content)    \n      super(test, content, \"//host//ports[.//elem[@key='state'][contains(text(), 'VULNERABLE')]]\") do |host, network_host_test|\n        logger.info \"Something cool\"\n        IssueFinder.match(cve_id: \"CVE-2014-3566\").each do |issue|\n          Result.generate!(network_host_test.id, issue.id)\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Which inherits from NmapScanParser. This file is parser is confirmed to work fine, so I know it's not the issue:</p>\n\n<pre><code>module Parsers\n  class NmapScanParser\n\n    def self.run!(test, content, xpath)\n      document = Nokogiri::XML(content)\n      document.remove_namespaces!\n\n      document.xpath(xpath).each do |host|\n        ip_address = host.at_xpath(\"address[@addrtype='ipv4']\").at_xpath(\"@addr\").value\n        vendor = host.at_xpath(\"address[@addrtype='mac']\").at_xpath(\"@vendor\").value rescue \"Unknown\"\n        hostname = host.at_xpath(\"hostnames/hostname\").at_xpath(\"@name\").value rescue \"Hostname Unknown\"\n        os = host.at_xpath(\"os/osmatch\").at_xpath(\"@name\").value rescue \"Unknown\"\n        os_vendor = host.at_xpath(\"os/osmatch/osclass\").at_xpath(\"@vendor\").value rescue \"Unknown\"\n\n        network_host_test = NetworkHostTest.generate!(test, ip_address: ip_address, hostname: hostname, vendor: vendor, os: os, os_vendor: os_vendor)\n\n        # If we didn't find a network host, that's because our network_hosts file didn't have this entry.\n        next unless network_host_test\n\n        yield(host, network_host_test)\n      end\n    end\n\n  end\nend\n</code></pre>\n\n<p>I've confirmed the parser works on my localhost with the same raw output as above using a plain ruby file, and running <code>ruby poodle_parser.rb</code>:</p>\n\n<pre><code>require 'nokogiri'\n\ndocument = Nokogiri::XML(File.open(\"poodle_results.xml\"))\ndocument.remove_namespaces!\n\ndocument.xpath(\"//host[.//elem/@key='state']\").each do |host|\n  ip_address = host.at_xpath(\"address[@addrtype='ipv4']\").at_xpath(\"@addr\").value\n  result =  host.at_xpath(\"//ports//elem[@key='state']\").content\n  puts \"#{ip_address} #{result}\"\nend\n</code></pre>\n\n<p>Which outputs what I would expect in terminal:</p>\n\n<pre><code>10.10.10.1 VULNERABLE\n</code></pre>\n\n<p>So, in the end, I expect a <code>Result</code> to be generated, but it's not.  I'm not seeing any errors in the Rails log on my localhost, nor am I seeing anything indicating an error in the Sidekiq logs either!  </p>\n\n<hr>\n\n<p>I decided to add a <code>logger.info</code> line to my <code>PoodleScanParser</code> to see if the Parser is even running as it should be.  Assuming I did this correctly, the Parser doesn't look like it's running.</p>\n"}, {"tags": ["arrays", "ruby", "recursion", "hash"], "comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 5, "creation_date": 1464184438, "post_id": 37438686, "comment_id": 62381067, "body": "This is a fairly complex set of code and it&#39;s asking a lot to ask people to give you the solution.  In any case, the way to solve a big problem is to break it down into several smaller problems.  Why not do that?  By breaking it down into more digestible pieces you can ask specific questions more narrow in scope that are more likely to be answered in a timely manner.  What parts <i>do</i> work, if any? What parts don&#39;t?  So, what would be the first milestone? (BTW, I don&#39;t think you&#39;ll need recursion.)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 5, "creation_date": 1464184660, "post_id": 37438686, "comment_id": 62381247, "body": "Besides being quite large, your example data is <i>very</i> specific. Consider posting a more general (and smaller) structure."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 1, "creation_date": 1464184665, "post_id": 37438686, "comment_id": 62381253, "body": "Another thing that might be helpful is you could write in plain English what needs to happen.  Also, never underestimate the power of a rubber duck. ;) (<a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Rubber_duck_debugging</a>)"}, {"owner": {"reputation": 309, "user_id": 6359979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1t8w.jpg?s=128&g=1", "display_name": "Alexey Kuznetsov", "link": "https://stackoverflow.com/users/6359979/alexey-kuznetsov"}, "edited": false, "score": 1, "creation_date": 1464186364, "post_id": 37438686, "comment_id": 62382660, "body": "And, for grouping by segment you could use something like this <code>result = input.each_with_object({}) do |id_hash, res|   id = id_hash[&#39;id&#39;]   id_hash[&#39;id_data&#39;].each do |id_data|     segment = id_data[&#39;segment&#39;][&#39;segment_name&#39;]     res[segment] ||= []     res[segment] &lt;&lt; id_data.merge(&#39;id&#39; =&gt; id)   end end puts result</code>"}, {"owner": {"reputation": 147, "user_id": 1485115, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Iu0BC.jpg?s=128&g=1", "display_name": "Ardian", "link": "https://stackoverflow.com/users/1485115/ardian"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1464242521, "post_id": 37438686, "comment_id": 62406190, "body": "@KeithBennett sorry it was at midnight. Yes you&#39;re right, the question is to broad"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 1485115, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Iu0BC.jpg?s=128&g=1", "display_name": "Ardian", "link": "https://stackoverflow.com/users/1485115/ardian"}, "edited": false, "score": 0, "creation_date": 1464243007, "post_id": 37439950, "comment_id": 62406408, "body": "Thank you for the answer :)"}], "tags": [], "owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "is_accepted": false, "score": 0, "last_activity_date": 1464191625, "last_edit_date": 1464191625, "creation_date": 1464186016, "answer_id": 37439950, "question_id": 37438686, "link": "https://stackoverflow.com/questions/37438686/how-to-recursion-this-array-of-hashes/37439950#37439950", "title": "How to recursion this array of hashes", "body": "<p>The problem here is how to acces this data structures, a ruby strategy can be iterate over arrays using each and conctenating keys with concatenated hashes like this:</p>\n\n<p>Supposing that your structure is mantained:</p>\n\n<p><strong>Array[hash[array[hash]]</strong></p>\n\n<pre><code>array_hash.each do |stats|\n  stats[\"id_data\"].each do |h|\n    puts h[\"metrics\"][\"sign_ups_conversion\"]\n  end\nend\n# =&gt; {\"count\"=&gt;[500, 200], \"cost\"=&gt;[2, 4]}\n# =&gt; {\"count\"=&gt;[100, 50], \"cost\"=&gt;[6, 8]}\n# =&gt; {\"count\"=&gt;[300, 400], \"cost\"=&gt;[2, 4]}\n# =&gt; {\"count\"=&gt;[100, 50], \"cost\"=&gt;[6, 8]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 147, "user_id": 1485115, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Iu0BC.jpg?s=128&g=1", "display_name": "Ardian", "link": "https://stackoverflow.com/users/1485115/ardian"}, "is_accepted": true, "score": 0, "last_activity_date": 1464242749, "creation_date": 1464242749, "answer_id": 37452786, "question_id": 37438686, "link": "https://stackoverflow.com/questions/37438686/how-to-recursion-this-array-of-hashes/37452786#37452786", "title": "How to recursion this array of hashes", "body": "<p>I solved it. </p>\n\n<pre><code>    def aggregate_by_segments(stats_array)\n      results = {}\n\n      stats_array.each do |stats|\n        stats['id_data'].each do |data|\n          segment_name = data['segment']['segment_name']\n          results[segment_name] ||= {}\n          (results[segment_name]['ids'] ||= []) &lt;&lt; stats['id']\n          results[segment_name]['segment'] ||= data['segment']\n          results[segment_name]['id_data'] ||= [{}]\n          data['metrics'].each do |metric, values|\n            hash_values(results[segment_name]['id_data'][0], metric, values) if values.is_a? Hash\n            next if skip_metric?(values)\n            (results[segment_name]['id_data'][0][metric] ||= []) &lt;&lt; values\n          end\n        end\n      end\n      sum_segments(results)\n    end\n\n    def hash_values(metrics, metric, hash_values)\n      hash_values.each do |k, v|\n        next if skip_metric?(v)\n        metrics[metric] ||= {}\n        (metrics[metric][k] ||= []) &lt;&lt; v\n      end\n    end\n\n    def sum_segments(segments)\n      segments.each do |segment, segment_details|\n        segment_details['id_data'][0].each do |metric, values|\n          segment_details['id_data'][0][metric] = sum_segment_metric(values)\n        end\n      end\n      segments\n    end\n\n    def sum_segment_metric(metric_value)\n      result = metric_value.transpose.map { |x| x.reduce(:+) } if metric_value.is_a? Array\n      result = metric_value.each do |k, v|\n        metric_value[k] = sum_segment_metric(v)\n      end if metric_value.is_a? Hash\n      result\n    end\n\n    def skip_metric?(metric_values)\n      !metric_values.is_a? Array\n    end\n</code></pre>\n\n<p>I know the code is pretty ugly. I will refactor it later :)</p>\n\n<p>Thank you guys for visiting and commenting with constructive feedback.</p>\n"}], "owner": {"reputation": 147, "user_id": 1485115, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Iu0BC.jpg?s=128&g=1", "display_name": "Ardian", "link": "https://stackoverflow.com/users/1485115/ardian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 37452786, "answer_count": 2, "score": -2, "last_activity_date": 1464242749, "creation_date": 1464182884, "last_edit_date": 1464183237, "question_id": 37438686, "link": "https://stackoverflow.com/questions/37438686/how-to-recursion-this-array-of-hashes", "title": "How to recursion this array of hashes", "body": "<p>I'm wondering how to sum the \"analytic\" value from this array of hashes with recursion.</p>\n\n<p><strong>Input :</strong> </p>\n\n<pre><code>   [{\"id\"=&gt;\"1234\",\n     \"id_data\"=&gt;\n      [{\"segment\"=&gt;{\"segment_name\"=&gt;\"Android\"},\n        \"metrics\"=&gt;\n          {\n            \"logins\"=&gt;[1000, 2000],\n            \"sign_ups_conversion\"=&gt;{\n               \"count\"=&gt;[500, 200],\n               \"cost\"=&gt;[2, 4]\n            }\n          },\n       },\n       {\"segment\"=&gt;{\"segment_name\"=&gt;\"iOS\"},\n        \"metrics\"=&gt;\n          {\n            \"logins\"=&gt;[5000, 10000],\n            \"sign_ups_conversion\"=&gt;{\n               \"count\"=&gt;[100, 50],\n               \"cost\"=&gt;[6, 8]\n            }\n          },\n       }\n      ]\n    },\n    {\"id\"=&gt;\"5678\",\n     \"id_data\"=&gt;\n      [{\"segment\"=&gt;{\"segment_name\"=&gt;\"Android\"},\n        \"metrics\"=&gt;\n          {\n            \"logins\"=&gt;[3000, 2000],\n            \"sign_ups_conversion\"=&gt;{\n               \"count\"=&gt;[300, 400],\n               \"cost\"=&gt;[2, 4]\n            }\n          },\n       },\n       {\"segment\"=&gt;{\"segment_name\"=&gt;\"iOS\"},\n        \"metrics\"=&gt;\n          {\n            \"logins\"=&gt;[5000, 10000],\n            \"sign_ups_conversion\"=&gt;{\n               \"count\"=&gt;[100, 50],\n               \"cost\"=&gt;[6, 8]\n            }\n          },\n       }\n      ]\n    }]\n</code></pre>\n\n<p><strong>Output :</strong></p>\n\n<pre><code>    {\n      \"Android\"=&gt;{\n        \"ids\" =&gt; ['1234','5678'],\n         \"segment\" =&gt; {\"segment_name\"=&gt;\"Android\"},\n         \"id_data\" =&gt; [{\n            \"logins\" =&gt; [4000, 4000], # sum by index from 'Android' logins (\"logins\"=&gt;[1000, 2000] &amp; \"logins\"=&gt;[3000, 2000]),\n            \"sign_ups_conversion\" =&gt; {\n              \"count\" =&gt; [800, 600], # sum by index from 'Android' sign ups count (\"count\"=&gt;[500, 200] &amp; \"count\"=&gt;[300, 400])\n              \"cost\" =&gt; [4, 8] # sum by index from 'Android' sign ups cost (\"cost\"=&gt;[2, 4] &amp; \"cost\"=&gt;[2, 4])\n            }  \n         }]\n      },\n      \"iOS\"=&gt;{\n        \"ids\" =&gt; ['1234','5678'],\n         \"segment\" =&gt; {\"segment_name\"=&gt;\"iOS\"},\n         \"id_data\" =&gt; [{\n            \"logins\" =&gt; [10000, 20000], # sum by index from 'iOS' logins (\"logins\"=&gt;[5000, 10000] &amp; \"logins\"=&gt;[5000, 10000]),\n            \"sign_ups_conversion\" =&gt; {\n              \"count\" =&gt; [200, 100], # sum by index from 'iOS' sign ups count (\"count\"=&gt;[100, 50] &amp; \"count\"=&gt;[100, 50])\n              \"cost\" =&gt; [12, 16] # sum by index from 'iOS' sign ups cost (\"cost\"=&gt;[6, 8] &amp; \"cost\"=&gt;[6, 8])\n            }  \n         }]\n      }\n    }\n</code></pre>\n\n<p>Me, trying to solve it with this methods but it is not counting analytics with hash format (<code>sign_ups_conversion</code>) and still figuring it out how the results should be equal to output. </p>\n\n<pre><code>    def aggregate_by_segments(stats_array)\n      results = {}\n\n      stats_array.each do |stats|\n        stats['id_data'].each do |data|\n          segment_name = data['segment']['segment_name']\n          results[segment_name] ||= {}\n          (results[segment_name]['ids'] ||= []) &lt;&lt; stats['id']\n          results[segment_name]['segment'] ||= data['segment']\n          results[segment_name]['id_data'] ||= [{}]\n          data['metrics'].each do |metric, values|\n            next if skip_metric?(values)\n            (results[segment_name]['id_data'][0][metric] ||= []) &lt;&lt; values\n          end\n        end\n      end\n      sum_segments(results)\n    end\n\n    def sum_segments(segments)\n      segments.each do |segment, segment_details|\n        segment_details['id_data'][0].each do |metric, values|\n          segment_details['id_data'][0][metric] = sum_segment_metric(values)\n        end\n      end\n      segments\n    end\n\n    def sum_segment_metric(metric_value)\n      metric_value.transpose.map { |x| x.reduce(:+) }\n    end\n\n    # I skipped hash format for now\n    def skip_metric?(metric_values)\n      !metric_values.is_a? Array\n    end\n\n    ############################################\n    # calls it with aggregate_by_segments(input)\n    ############################################\n</code></pre>\n\n<p>I believe we should use recursion but i'm still figuring it out, anyone can help me?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 88, "user_id": 1496902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6bd393cf8b831a1d8c6696736b7a9c76?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1496902/adam"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1464199798, "post_id": 37438419, "comment_id": 62391545, "body": "Sorry, I meant 8. Fixed."}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 1496902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6bd393cf8b831a1d8c6696736b7a9c76?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1496902/adam"}, "edited": false, "score": 0, "creation_date": 1464183818, "post_id": 37438766, "comment_id": 62380550, "body": "Thank you, this looks like the simplest and most idiomatic approach."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 9, "last_activity_date": 1464183060, "creation_date": 1464183060, "answer_id": 37438766, "question_id": 37438419, "link": "https://stackoverflow.com/questions/37438419/passing-a-method-that-takes-arguments-as-an-argument-in-ruby/37438766#37438766", "title": "Passing a method that takes arguments as an argument in Ruby", "body": "<p>The \"Ruby way\" would be to pass a block:</p>\n\n<pre><code>def get_delta_by(obj1, obj2)\n  yield(obj1) - yield(obj2)\nend\n\nhash1 = {\"x\" =&gt; { \"y\" =&gt; 20 } }\nhash2 = {\"x\" =&gt; { \"y\" =&gt; 12 } }\n\nget_delta_by(hash1, hash2) { |h| h[\"x\"][\"y\"] }\n#=&gt; 8\n</code></pre>\n\n<p>A method could be passed (indirectly) via:</p>\n\n<pre><code>def get_y(data)\n  data[\"x\"][\"y\"]\nend\n\nget_delta_by(hash1, hash2, &amp;method(:get_y))\n#=&gt; 8\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1341, "user_id": 2136991, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/327a85331e313b7fc26a6bb21a9013bb?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/2136991/david"}, "is_accepted": false, "score": 3, "last_activity_date": 1464191688, "last_edit_date": 1495540364, "creation_date": 1464184992, "answer_id": 37439537, "question_id": 37438419, "link": "https://stackoverflow.com/questions/37438419/passing-a-method-that-takes-arguments-as-an-argument-in-ruby/37439537#37439537", "title": "Passing a method that takes arguments as an argument in Ruby", "body": "<p>Building on <a href=\"https://stackoverflow.com/a/37438766/2136991\" title=\"Stefan&#39;s\">Stefan's</a> response, if you want a more flexible get method you can actually return a lambda from the function and pass arguments for what you want to get. This will let you do error handling nicely:</p>\n\n<p>Starting with the basics from above...</p>\n\n<pre><code>def get_delta_by(obj1, obj2)\n  yield(obj1) - yield(obj2)\nend\n\nhash1 = {\"x\" =&gt; { \"y\" =&gt; 20 } }\nhash2 = {\"x\" =&gt; { \"y\" =&gt; 12 } }\n\nget_delta_by(hash1, hash2) { |h| h[\"x\"][\"y\"] }\n</code></pre>\n\n<p>Then we can define a get_something function which takes a list of arguments for the path of the element to get:</p>\n\n<pre><code>def get_something(*args)\n  lambda do |data|\n    args.each do |arg|\n      begin\n        data = data.fetch(arg)\n      rescue KeyError\n        raise RuntimeError, \"KeyError for #{arg} on path #{args.join(',')}\"\n      end\n    end\n    return data\n  end\nend\n</code></pre>\n\n<p>Finally we call the function using the ampersand to pass the lambda as a block:</p>\n\n<pre><code>lambda_getter = get_something(\"x\",\"y\")\nget_delta_by(hash1, hash2, &amp;lambda_getter)\n</code></pre>\n\n<p>That last bit can be a one liner... but wrote it as two for clarity here.</p>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 1, "last_activity_date": 1464191590, "creation_date": 1464191590, "answer_id": 37442184, "question_id": 37438419, "link": "https://stackoverflow.com/questions/37438419/passing-a-method-that-takes-arguments-as-an-argument-in-ruby/37442184#37442184", "title": "Passing a method that takes arguments as an argument in Ruby", "body": "<p>In Ruby 2.3, you can use <a href=\"http://docs.ruby-lang.org/en/2.3.0/Hash.html#method-i-dig\" rel=\"nofollow\"><code>Hash#dig</code></a> method, if it meets your needs.</p>\n\n<pre><code>hash1.dig(\"x\", \"y\") - hash2.dig(\"x\", \"y\")\n#=&gt; 8\n</code></pre>\n"}], "owner": {"reputation": 88, "user_id": 1496902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6bd393cf8b831a1d8c6696736b7a9c76?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1496902/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 37438766, "answer_count": 3, "score": 2, "last_activity_date": 1464191688, "creation_date": 1464182219, "last_edit_date": 1464183162, "question_id": 37438419, "link": "https://stackoverflow.com/questions/37438419/passing-a-method-that-takes-arguments-as-an-argument-in-ruby", "title": "Passing a method that takes arguments as an argument in Ruby", "body": "<p>I'd like to calculate the difference for various values inside 2 hashes with the same structure, as concisely as possible. Here's a simplified example of the data I'd like to compare:</p>\n\n<pre><code>hash1 = {\"x\" =&gt; { \"y\" =&gt; 20 } }\nhash2 = {\"x\" =&gt; { \"y\" =&gt; 12 } }\n</code></pre>\n\n<p>I have a very simple method to get the value I want to compare. In reality, the hash can be nested a lot deeper than these examples, so this is mostly to keep the code readable:</p>\n\n<pre><code>def get_y(data)\n  data[\"x\"][\"y\"]\nend\n</code></pre>\n\n<p>I want to create a method that will calculate the difference between the 2 values, and can take a method like <code>get_y</code> as an argument, allowing me to re-use the code for any value in the hash. I'd like to be able to call something like this, and I'm not sure how to write the method <code>get_delta</code>:</p>\n\n<pre><code>get_delta(hash1, hash2, get_y)    # =&gt; 8\n</code></pre>\n"}, {"tags": ["ruby", "api", "calendar", "google-calendar-api"], "comments": [{"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "edited": false, "score": 0, "creation_date": 1464182210, "post_id": 37437784, "comment_id": 62379320, "body": "Could you try replacing your existing hash in overrides by the following ?   {method&#39; =&gt; &#39;popup&#39;, &#39;minutes: 840},"}, {"owner": {"reputation": 53, "user_id": 1472174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1da68058badc26b96a6e4261dc913b0b?s=128&d=identicon&r=PG&f=1", "display_name": "halcyon10", "link": "https://stackoverflow.com/users/1472174/halcyon10"}, "reply_to_user": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "edited": false, "score": 1, "creation_date": 1464187115, "post_id": 37437784, "comment_id": 62383298, "body": "That is the example used in the google <a href=\"https://developers.google.com/google-apps/calendar/v3/reference/events/insert#examples\" rel=\"nofollow noreferrer\">documentation</a>. You notice right away that the quotation marks are incorrect, but when corrected: <code>{&#39;method&#39; =&gt; &#39;popup&#39;, &#39;minutes&#39;: 840}</code>, it results in the same error."}, {"owner": {"reputation": 238, "user_id": 1550641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12707c89f9273d106ccbf8fd771f9e95?s=128&d=identicon&r=PG", "display_name": "Meer", "link": "https://stackoverflow.com/users/1550641/meer"}, "edited": false, "score": 0, "creation_date": 1468905234, "post_id": 37437784, "comment_id": 64304971, "body": "were you able to figure this out? I am experiencing the same issue."}], "answers": [{"tags": [], "owner": {"reputation": 10141, "user_id": 973242, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/92eea4ab134ea1c1cb962baf70340ea3?s=128&d=identicon&r=PG", "display_name": "Andres", "link": "https://stackoverflow.com/users/973242/andres"}, "is_accepted": false, "score": 4, "last_activity_date": 1483754364, "last_edit_date": 1483754364, "creation_date": 1483730161, "answer_id": 41512742, "question_id": 37437784, "link": "https://stackoverflow.com/questions/37437784/can-not-insert-new-google-calendar-event-via-the-ruby-api-reminder-error/41512742#41512742", "title": "Can not insert new Google Calendar Event via the ruby API, reminder error", "body": "<p>It may be a little late but I was having the same problem and I found a workaround.</p>\n\n<p>Create the <code>event</code> without the <code>reminders</code>. Once you have the <code>event</code> created with the initializer set the reminders like this:</p>\n\n<pre><code>event.reminders = Google::Apis::CalendarV3::Event::Reminders.new(\n    use_default: false,\n    overrides: [\n      Google::Apis::CalendarV3::EventReminder.new(reminder_method:\"popup\", minutes: reminder_minutes),\n      Google::Apis::CalendarV3::EventReminder.new(reminder_method:\"email\", minutes: reminder_minutes)\n    ]\n  )\n</code></pre>\n\n<p>That is working for me!</p>\n"}], "owner": {"reputation": 53, "user_id": 1472174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1da68058badc26b96a6e4261dc913b0b?s=128&d=identicon&r=PG&f=1", "display_name": "halcyon10", "link": "https://stackoverflow.com/users/1472174/halcyon10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1483754364, "creation_date": 1464180797, "question_id": 37437784, "link": "https://stackoverflow.com/questions/37437784/can-not-insert-new-google-calendar-event-via-the-ruby-api-reminder-error", "title": "Can not insert new Google Calendar Event via the ruby API, reminder error", "body": "<pre><code>  event = Google::Apis::CalendarV3::Event.new({\n    \"summary\":\"appointment\",\n    \"description\":\"placeholder\",\n    \"start\": {\n     \"date_time\":'2016-05-28T08:00:00',\n     \"time_zone\":'Europe/Brussels',\n    },\n    \"end\": {\n     \"date_time\":'2016-05-28T09:00:00',\n     \"time_zone\":'Europe/Brussels',\n    },\n    'reminders': {\n     'useDefault': false,\n     'overrides': [\n       {'minutes': 840, 'method': 'popup'}\n     ]\n    },  \n    \"color_id\": \"11\"\n  })\n  result = service.insert_event('primary', event)\n</code></pre>\n\n<p>I am trying to insert a calendar event via the ruby API. This code gives the following error:</p>\n\n<pre><code>/usr/local/rvm/gems/ruby-2.3.1/gems/google-api-client-0.9.6/lib/google/apis/core/http_command.rb:211:in `check_status': cannotUseDefaultRemindersAndSpecifyOverride: Cannot specify both default reminders and overrides at the same time. (Google::Apis::ClientError)\n</code></pre>\n\n<p>Any help is greatly appreciated.</p>\n"}, {"tags": ["ruby", "upgrade", "ruby-on-rails-4.1"], "comments": [{"owner": {"reputation": 23, "user_id": 6203614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7bc543bf1f426b8072d93a184e8ad765?s=128&d=identicon&r=PG&f=1", "display_name": "Arvind Rajput", "link": "https://stackoverflow.com/users/6203614/arvind-rajput"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1464181360, "post_id": 37437650, "comment_id": 62378623, "body": "it&#39;s through error - No route matches [GET] &quot;/category&quot;"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1464181738, "post_id": 37437650, "comment_id": 62378927, "body": "<a href=\"http://stackoverflow.com/questions/3853531/rails-routes-namespaces-and-form-for\" title=\"rails routes namespaces and form for\">stackoverflow.com/questions/3853531/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6203614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7bc543bf1f426b8072d93a184e8ad765?s=128&d=identicon&r=PG&f=1", "display_name": "Arvind Rajput", "link": "https://stackoverflow.com/users/6203614/arvind-rajput"}, "edited": false, "score": 0, "creation_date": 1464181203, "post_id": 37437854, "comment_id": 62378476, "body": "category is not an action its a controller under admin directory like admin/category ,and action in category controller are create and update"}, {"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "reply_to_user": {"reputation": 23, "user_id": 6203614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7bc543bf1f426b8072d93a184e8ad765?s=128&d=identicon&r=PG&f=1", "display_name": "Arvind Rajput", "link": "https://stackoverflow.com/users/6203614/arvind-rajput"}, "edited": false, "score": 0, "creation_date": 1464181773, "post_id": 37437854, "comment_id": 62378967, "body": "Well, but that is your error. You have to correct that now. The app is looking for <code>category</code> in <code>AdminController</code>, but you want it to be a <i>CategoryController</i> under admin namespace. Correct your form link accordingly."}], "tags": [], "owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "is_accepted": false, "score": 0, "last_activity_date": 1464180968, "creation_date": 1464180968, "answer_id": 37437854, "question_id": 37437650, "link": "https://stackoverflow.com/questions/37437650/routing-issue-in-rails-4/37437854#37437854", "title": "Routing Issue in Rails 4", "body": "<p>The application expects a controller named <code>AdminController</code> with a method named <code>category</code>, but it cannot find it. That is what the error message says and this how you created the link <code>...url: url_for(:controller =&gt; 'admin/category'...</code></p>\n\n<p>I think that is wrong, since obviously you don't have a <code>category</code> method/action in your <code>AdminController</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 6203614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7bc543bf1f426b8072d93a184e8ad765?s=128&d=identicon&r=PG&f=1", "display_name": "Arvind Rajput", "link": "https://stackoverflow.com/users/6203614/arvind-rajput"}, "is_accepted": true, "score": 0, "last_activity_date": 1464422855, "creation_date": 1464422855, "answer_id": 37496724, "question_id": 37437650, "link": "https://stackoverflow.com/questions/37437650/routing-issue-in-rails-4/37496724#37496724", "title": "Routing Issue in Rails 4", "body": "<p>Need To Update Routes Like as with in admin namesapce</p>\n\n<pre><code>post 'category/:action'=&gt; 'category', action: :create\npatch 'category/:action'=&gt; 'category', action: :update\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6203614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7bc543bf1f426b8072d93a184e8ad765?s=128&d=identicon&r=PG&f=1", "display_name": "Arvind Rajput", "link": "https://stackoverflow.com/users/6203614/arvind-rajput"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "accepted_answer_id": 37496724, "answer_count": 2, "score": 0, "last_activity_date": 1464422855, "creation_date": 1464180458, "last_edit_date": 1464181809, "question_id": 37437650, "link": "https://stackoverflow.com/questions/37437650/routing-issue-in-rails-4", "title": "Routing Issue in Rails 4", "body": "<p>I have created a form useing form_for -</p>\n\n<pre><code> = form_for @category, url: url_for(:controller =&gt; 'admin/category',:action =&gt; new_record ? \"create\" : \"update\"), name: 'udfFieldForm', id: 'udfFieldForm',:method =&gt;'POST', remote: true do |f|\n</code></pre>\n\n<p>controller is look like-</p>\n\n<pre><code> class Admin::CategoryController &lt; ApplicationController\n   def create\n   end\n   def update\n   end\n end\n</code></pre>\n\n<p>route defined as - </p>\n\n<pre><code>namespace :admin do\n   get 'category/:action' =&gt; 'category#index', :as =&gt; :category\n   resource :categories\nend\n</code></pre>\n\n<p>When i have submit  form it through an error like -</p>\n\n<p>AbstractController::ActionNotFound (The action 'category' could not be found for AdminController):</p>\n\n<p>Here category is a controller under admin directory but it's looking for category action in admin controller. here i want to call category controler.</p>\n\n<p>Please help me , where is the issue?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464180741, "post_id": 37437433, "comment_id": 62378079, "body": "You might want to show your implementation for the first part."}, {"owner": {"reputation": 1229, "user_id": 5682649, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10156264848205403/picture?type=large", "display_name": "Reiss Johnson", "link": "https://stackoverflow.com/users/5682649/reiss-johnson"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464181813, "post_id": 37437433, "comment_id": 62378997, "body": "I just realised my first part iterates through! Doh!"}], "answers": [{"comments": [{"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "edited": false, "score": 0, "creation_date": 1464180794, "post_id": 37437548, "comment_id": 62378128, "body": "I think he wanted one function that would do both at the same time (compare equality and if no equality found then get the first number strictly superior). Your solution &#39;[1, 4, 6, 9, 8, 13].index { |n| n &gt;= 8 }&#39; will return 3 when it should return 4."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "edited": false, "score": 0, "creation_date": 1464180950, "post_id": 37437548, "comment_id": 62378254, "body": "@Pholochtairze the array must be ordered, I&#39;ve updated my answer. However, the OP did not specify the kind of order, &quot;next available&quot; doesn&#39;t necessarily mean &quot;next higher&quot; ... maybe some clarification is needed."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 6, "last_activity_date": 1464182113, "last_edit_date": 1464182113, "creation_date": 1464180218, "answer_id": 37437548, "question_id": 37437433, "link": "https://stackoverflow.com/questions/37437433/ruby-find-the-index-of-the-next-available-number/37437548#37437548", "title": "ruby find the index of the next available number", "body": "<p>You can pass a block to <a href=\"http://ruby-doc.org/core-2.3.1/Array.html#method-i-index\" rel=\"nofollow\"><code>index</code></a> and it ...</p>\n\n<blockquote>\n  <p>[...] returns the <em>index</em> of the first object for which the block returns <code>true</code>. Returns <code>nil</code> if no match is found.</p>\n</blockquote>\n\n<p>Examples:</p>\n\n<pre><code>[1, 4, 6, 9, 13].index { |n| n &gt;= 6 }  #=&gt; 2\n[1, 4, 6, 9, 13].index { |n| n &gt;= 8 }  #=&gt; 3\n[1, 4, 6, 9, 13].index { |n| n &gt;= 15 } #=&gt; nil\n</code></pre>\n\n<p>Because this requires the array to be ordered, you can also use <a href=\"http://ruby-doc.org/core-2.3.1/Array.html#method-i-bsearch_index\" rel=\"nofollow\"><code>bsearch_index</code></a> which performs a <a href=\"https://en.wikipedia.org/wiki/Binary_search_algorithm\" rel=\"nofollow\">binary search</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 430, "user_id": 6268569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d9a1017d0283ce1d65390e92311035?s=128&d=identicon&r=PG&f=1", "display_name": "CodeMaker", "link": "https://stackoverflow.com/users/6268569/codemaker"}, "is_accepted": false, "score": 0, "last_activity_date": 1464343439, "creation_date": 1464343439, "answer_id": 37480589, "question_id": 37437433, "link": "https://stackoverflow.com/questions/37437433/ruby-find-the-index-of-the-next-available-number/37480589#37480589", "title": "ruby find the index of the next available number", "body": "<p>you can also find a index of any element in array like this.</p>\n\n<pre><code>  2.1.8 :040 &gt; [1, 4, 6, 9, 13].index(6)\n =&gt; 2\n  2.1.8 :041 &gt; [1, 4, 6, 9, 13].index(15)\n =&gt; nil \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1464424348, "creation_date": 1464424348, "answer_id": 37496900, "question_id": 37437433, "link": "https://stackoverflow.com/questions/37437433/ruby-find-the-index-of-the-next-available-number/37496900#37496900", "title": "ruby find the index of the next available number", "body": "<pre><code>def find_num(n,a)\n  a.each_with_index.to_a.sort_by(&amp;:first).find { |nbr,_| nbr &gt;= n }.last \nend\n\nfind_num(6, [1, 4, 6, 9, 13])\n  #=&gt; 2 \nfind_num(8, [1, 4, 6, 9, 13]) #=&gt; 3\n  #=&gt; 3 \n</code></pre>\n\n<p>The steps for</p>\n\n<pre><code>n = 8\na =  [1, 4, 6, 9, 13]\n</code></pre>\n\n<p>are as follows.</p>\n\n<pre><code>b = a.each_with_index.to_a\n  #=&gt; [[1, 0], [4, 1], [6, 2], [9, 3], [13, 4]] \nc = b.sort_by(&amp;:first)\n  #=&gt; [[1, 0], [4, 1], [6, 2], [9, 3], [13, 4]] \nd = c.find { |nbr,_| nbr &gt;= n }\n  #=&gt; [9, 3] \nd.last \n  #=&gt; 3 \n</code></pre>\n"}], "owner": {"reputation": 1229, "user_id": 5682649, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10156264848205403/picture?type=large", "display_name": "Reiss Johnson", "link": "https://stackoverflow.com/users/5682649/reiss-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1464424348, "creation_date": 1464179941, "last_edit_date": 1464181972, "question_id": 37437433, "link": "https://stackoverflow.com/questions/37437433/ruby-find-the-index-of-the-next-available-number", "title": "ruby find the index of the next available number", "body": "<p>I have a <code>find_num</code> method that returns the index of a specified number in an ordered array, e.g.</p>\n\n<pre><code>find_num(6, [1, 4, 6, 9, 13]) #=&gt; 2\n</code></pre>\n\n<p>however my spec also requires that if the number is not available it finds the position of the next highest number so ...</p>\n\n<pre><code>find_num(8, [1, 4, 6, 9, 13]) #=&gt; 3\n</code></pre>\n\n<p>as 9 is the next available number.</p>\n\n<p>Having trouble implementing this... I have thought of iterating through the whole array but I am told to take into account the array could be large...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1464273157, "post_id": 37437300, "comment_id": 62426548, "body": "It would help to show the <code>describe ServicesController</code> block."}], "answers": [{"comments": [{"owner": {"reputation": 82, "user_id": 4774618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b17f1be0c461d2ff92def8279bd6c6?s=128&d=identicon&r=PG&f=1", "display_name": "sainid", "link": "https://stackoverflow.com/users/4774618/sainid"}, "edited": false, "score": 0, "creation_date": 1464193420, "post_id": 37442076, "comment_id": 62387964, "body": "I tried to run the code you provided above, but got an error saying `undefined method: formatter&#39;. Thoughts? Do I need to import anything new? Thanks for the assistance."}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 82, "user_id": 4774618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b17f1be0c461d2ff92def8279bd6c6?s=128&d=identicon&r=PG&f=1", "display_name": "sainid", "link": "https://stackoverflow.com/users/4774618/sainid"}, "edited": false, "score": 0, "creation_date": 1464201409, "post_id": 37442076, "comment_id": 62392427, "body": "What versions of Rails and rspec-rails are you using?"}, {"owner": {"reputation": 82, "user_id": 4774618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b17f1be0c461d2ff92def8279bd6c6?s=128&d=identicon&r=PG&f=1", "display_name": "sainid", "link": "https://stackoverflow.com/users/4774618/sainid"}, "edited": false, "score": 0, "creation_date": 1464202651, "post_id": 37442076, "comment_id": 62393151, "body": "Rails 4.1.8 Rspec 3.4.4"}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 82, "user_id": 4774618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b17f1be0c461d2ff92def8279bd6c6?s=128&d=identicon&r=PG&f=1", "display_name": "sainid", "link": "https://stackoverflow.com/users/4774618/sainid"}, "edited": false, "score": 0, "creation_date": 1464205331, "post_id": 37442076, "comment_id": 62394593, "body": "Strange. It works for me with Rails 4.1.8, and I&#39;m using the same version of RSpec. What does <code>puts routes.class</code> say? Or <code>puts routes.methods</code>? Or <code>puts routes.private_methods</code>?"}, {"owner": {"reputation": 82, "user_id": 4774618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b17f1be0c461d2ff92def8279bd6c6?s=128&d=identicon&r=PG&f=1", "display_name": "sainid", "link": "https://stackoverflow.com/users/4774618/sainid"}, "edited": false, "score": 0, "creation_date": 1464269810, "post_id": 37442076, "comment_id": 62423764, "body": "I ran those commands and looked for <code>formatter</code> method but couldn&#39;t find it. I did however find a <code>format</code> method, but it&#39;s a <code>private_method</code>  &lt;br/&gt; <code>puts routes.class</code> yields <code>Array</code>"}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 82, "user_id": 4774618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b17f1be0c461d2ff92def8279bd6c6?s=128&d=identicon&r=PG&f=1", "display_name": "sainid", "link": "https://stackoverflow.com/users/4774618/sainid"}, "edited": false, "score": 0, "creation_date": 1464272132, "post_id": 37442076, "comment_id": 62425632, "body": "My <code>routes.class</code> is <code>ActionDispatch::Routing::RouteSet</code>, returned by <a href=\"https://github.com/rspec/rspec-rails/blob/master/lib/rspec/rails/example/controller_example_group.rb#L132\" rel=\"nofollow noreferrer\">an rspec-rails controller spec method</a>. What could we be doing differently? Does <code>Rails.application.routes</code> work?"}, {"owner": {"reputation": 82, "user_id": 4774618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b17f1be0c461d2ff92def8279bd6c6?s=128&d=identicon&r=PG&f=1", "display_name": "sainid", "link": "https://stackoverflow.com/users/4774618/sainid"}, "edited": false, "score": 0, "creation_date": 1464273288, "post_id": 37442076, "comment_id": 62426646, "body": "What&#39;s weird is, when I follow the deceleration of <code>routes</code> it also leads me to the same controller_example_group.rb.     When I <code>puts</code> <code>Rails.application.routes.class</code>, I get <code>ActionDispatch::Routing::RouteSet</code>    I used the explicit deceleration and it worked. I can see the route it is calling. Thanks for the help!"}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 1, "last_activity_date": 1464191319, "creation_date": 1464191319, "answer_id": 37442076, "question_id": 37437300, "link": "https://stackoverflow.com/questions/37437300/how-to-identify-the-route-being-called-in-a-rspec-controller-spec/37442076#37442076", "title": "How to identify the route being called in a RSpec controller spec", "body": "<p>You can print the name of the route used in an rspec-rails controller spec with something like this:</p>\n\n<pre><code>routes.formatter.send(\n  :match_route,\n  nil,\n  controller: ServicesController.controller_path,\n  action: 'add_comment', # what you passed to the get method, but a string, not a symbol\n  id: service.id         # the other options that you passed to the get method\n) { |route| puts route.name }\n</code></pre>\n\n<p>rspec-rails uses the route only internally. The above is how rspec-rails (actually <code>ActionController::TestCase</code>, which rspec-rails uses) looks up and uses the route, but with a block that just prints the route.</p>\n\n<p>There are a lot of method calls between the <code>post</code> call in a spec and the above, so if you want to understand how rspec-rails gets to the above I suggest putting a breakpoint in <code>ActionDispatch::Journey::Formatter.match_routes</code> before running your example.</p>\n\n<p>Note that an rspec-rails controller spec doesn't use the route to decide what action method to call or what controller class to call it on; it already knows them from the controller class you pass to <code>describe</code> and the action you pass to the action method (<code>get</code>, <code>post</code>, etc.). However, it does look up the route and use it to format the request environment. Among other uses, it puts the path in <code>request.env['PATH_INFO']</code>.</p>\n\n<p>I investigated this in Rails 4.1, since that's what the project I have handy uses. It might or might not be accurate for other versions of Rails.</p>\n"}], "owner": {"reputation": 82, "user_id": 4774618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b17f1be0c461d2ff92def8279bd6c6?s=128&d=identicon&r=PG&f=1", "display_name": "sainid", "link": "https://stackoverflow.com/users/4774618/sainid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 37442076, "answer_count": 1, "score": 2, "last_activity_date": 1464191475, "creation_date": 1464179610, "last_edit_date": 1464191475, "question_id": 37437300, "link": "https://stackoverflow.com/questions/37437300/how-to-identify-the-route-being-called-in-a-rspec-controller-spec", "title": "How to identify the route being called in a RSpec controller spec", "body": "<p>I have an RSpec controller spec and I'm trying to understand how to find what exact route is being called in my example.</p>\n\n<p>In services_controller_spec.rb:</p>\n\n<pre><code>describe 'create comment' do\n  let!(:service) { FactoryGirl.create(:service) }\n\n  describe 'with valid comment' do\n    it 'creates a new comment' do\n      expect {\n        post :add_comment, id: service.id\n      }.to change(service.service_comments, :count).by(1)\n\n      expect(response).to redirect_to(service_path(service))\n    end\n  end\nend\n</code></pre>\n\n<p>Is there a way to <code>pp</code> or <code>puts</code> the route that is being sent via the post?</p>\n\n<p>I am asking because I want to <code>post</code> to the route <code>/services/:id/add_comment</code> and want to verify where exactly the route is going.</p>\n\n<p>My routes.rb for this route:</p>\n\n<pre><code>resources :services do\n  member do\n     post 'add_comment'\n  end\nend\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1464180620, "post_id": 37436908, "comment_id": 62377981, "body": "You need to use the bang method variation to raise an error i.e <code>user.save!</code> and <code>company.save!</code>"}, {"owner": {"reputation": 800, "user_id": 3290423, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf08b4a89aa05d600469502f103c187a?s=128&d=identicon&r=PG&f=1", "display_name": "rico_mac", "link": "https://stackoverflow.com/users/3290423/rico-mac"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1464180649, "post_id": 37436908, "comment_id": 62378011, "body": "I have Ill update sorry"}, {"owner": {"reputation": 800, "user_id": 3290423, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf08b4a89aa05d600469502f103c187a?s=128&d=identicon&r=PG&f=1", "display_name": "rico_mac", "link": "https://stackoverflow.com/users/3290423/rico-mac"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1464180788, "post_id": 37436908, "comment_id": 62378118, "body": "@j-dexx even with the bang the same test still fails. a company is still created while the user throws an error."}], "answers": [{"comments": [{"owner": {"reputation": 800, "user_id": 3290423, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf08b4a89aa05d600469502f103c187a?s=128&d=identicon&r=PG&f=1", "display_name": "rico_mac", "link": "https://stackoverflow.com/users/3290423/rico-mac"}, "edited": false, "score": 0, "creation_date": 1464180569, "post_id": 37437664, "comment_id": 62377949, "body": "this seems, for want of a better word, a bit crappy. Wouldn&#39;t you agree? Surely there is a more elegant way to make the whole event atomic."}, {"owner": {"reputation": 2055, "user_id": 2716092, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/93305428cde3eb1e7c3eed694e5a23c7?s=128&d=identicon&r=PG", "display_name": "Mikhail Chuprynski", "link": "https://stackoverflow.com/users/2716092/mikhail-chuprynski"}, "reply_to_user": {"reputation": 800, "user_id": 3290423, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf08b4a89aa05d600469502f103c187a?s=128&d=identicon&r=PG&f=1", "display_name": "rico_mac", "link": "https://stackoverflow.com/users/3290423/rico-mac"}, "edited": false, "score": 0, "creation_date": 1464182732, "post_id": 37437664, "comment_id": 62379725, "body": "@rico_mac No way. You&#39;re trying to change the whole architecture for the edge case. While <code>if</code> covers that 0.1% probability."}], "tags": [], "owner": {"reputation": 2055, "user_id": 2716092, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/93305428cde3eb1e7c3eed694e5a23c7?s=128&d=identicon&r=PG", "display_name": "Mikhail Chuprynski", "link": "https://stackoverflow.com/users/2716092/mikhail-chuprynski"}, "is_accepted": false, "score": 0, "last_activity_date": 1464180498, "creation_date": 1464180498, "answer_id": 37437664, "question_id": 37436908, "link": "https://stackoverflow.com/questions/37436908/rails-saving-two-different-model-instances-as-a-singular-transaction/37437664#37437664", "title": "Rails saving two different model instances as a singular transaction", "body": "<p>You can just destroy company if user.save is unsuccsessful</p>\n\n<pre><code>def save_resources    \n  company = save_company\n  user = save_user\n  company.destroy if user.nil?\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 800, "user_id": 3290423, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf08b4a89aa05d600469502f103c187a?s=128&d=identicon&r=PG&f=1", "display_name": "rico_mac", "link": "https://stackoverflow.com/users/3290423/rico-mac"}, "edited": false, "score": 0, "creation_date": 1464182258, "post_id": 37438194, "comment_id": 62379365, "body": "can you elaborate?"}, {"owner": {"reputation": 846, "user_id": 6103260, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qM0aLbWu1bQ/AAAAAAAAAAI/AAAAAAAAF0o/4cHX5Z6ikw8/photo.jpg?sz=128", "display_name": "Emiliano Della Casa", "link": "https://stackoverflow.com/users/6103260/emiliano-della-casa"}, "reply_to_user": {"reputation": 800, "user_id": 3290423, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf08b4a89aa05d600469502f103c187a?s=128&d=identicon&r=PG&f=1", "display_name": "rico_mac", "link": "https://stackoverflow.com/users/3290423/rico-mac"}, "edited": false, "score": 0, "creation_date": 1464182531, "post_id": 37438194, "comment_id": 62379565, "body": "See my edited answer and let me know if it works for you or you need more explanation"}], "tags": [], "owner": {"reputation": 846, "user_id": 6103260, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qM0aLbWu1bQ/AAAAAAAAAAI/AAAAAAAAF0o/4cHX5Z6ikw8/photo.jpg?sz=128", "display_name": "Emiliano Della Casa", "link": "https://stackoverflow.com/users/6103260/emiliano-della-casa"}, "is_accepted": true, "score": 1, "last_activity_date": 1464182500, "last_edit_date": 1464182500, "creation_date": 1464181716, "answer_id": 37438194, "question_id": 37436908, "link": "https://stackoverflow.com/questions/37436908/rails-saving-two-different-model-instances-as-a-singular-transaction/37438194#37438194", "title": "Rails saving two different model instances as a singular transaction", "body": "<p>You could manually rollback the transaction when user is not created:</p>\n\n<p>Taking up your example:</p>\n\n<pre><code>class SignUp\n\n  ......\n\n  def save_resources\n    ActiveRecord::Base.transaction do\n      save_company\n      save_user\n      raise ActiveRecord::Rollback if self.user.nil?\n    end\n  end\n\n  def save_company\n    company = new_company\n    self.company = company if company.save!\n  end\n\n  def save_user\n   user = new_user\n   self.user = user if user.save!\n end\nend\n</code></pre>\n"}], "owner": {"reputation": 800, "user_id": 3290423, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf08b4a89aa05d600469502f103c187a?s=128&d=identicon&r=PG&f=1", "display_name": "rico_mac", "link": "https://stackoverflow.com/users/3290423/rico-mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 37438194, "answer_count": 2, "score": 1, "last_activity_date": 1464182500, "creation_date": 1464178733, "last_edit_date": 1464180751, "question_id": 37436908, "link": "https://stackoverflow.com/questions/37436908/rails-saving-two-different-model-instances-as-a-singular-transaction", "title": "Rails saving two different model instances as a singular transaction", "body": "<p>I am writing a service object for a sign up form that records data for a User and a Company model (FYI, I flat out refuse to use nested_attributes). </p>\n\n<p>A User cannot exist without the presence of a Company (belongs_to).</p>\n\n<p><strong>IF</strong> the company succeeds and the user does not succeed in saving, how do I roll back the creation of the company? </p>\n\n<p>I have tests copied below to demonstrate the point..</p>\n\n<pre><code>  context 'when both are valid?' do\n    subject { -&gt; { sign_up_object.save } }\n    it { should change(Company, :count).by(1) }\n    it { should change(sign_up_object, :company).to be_a Company }\n    it { should change(User, :count).by(1) }\n    it { should change(sign_up_object, :user).to be_a User }\n  end\n  context 'when COMPANY is invalid' do\n    subject { -&gt; { sign_up_object.save } }\n    before { allow_any_instance_of(Company).to receive(:save!).and_return false }\n    it { should change(User, :count).by(0) }\n    it { should change(Company, :count).by(0) }\n  end\n  context 'when USER is invalid' do\n    before { allow_any_instance_of(User).to receive(:save!).and_return false }\n    subject { -&gt; { sign_up_object.save } }\n    it { should change(User, :count).by(0) }\n    it { should change(Company, :count).by(0) }  -&gt;&gt;&gt;&gt; this one fails!!!\n  end\n</code></pre>\n\n<p>The code I have at the moment looks something like this</p>\n\n<pre><code>class SignUp\n\n  ......\n\n  def save_resources\n    ActiveRecord::Base.transaction do\n      save_company\n      save_user\n    end\n  end\n\n  def save_company\n    company = new_company\n    self.company = company if company.save!\n  end\n\n  def save_user\n    user = new_user\n    self.user = user if user.save!\n  end\nend\n</code></pre>\n\n<p>I'm sure the <code>ActiveRecord::Base.transaction</code> block isn't actually doing anything, as my tests show the user spec as the only one as failing, as a company count is going up by 1.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-engines"], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1464177442, "creation_date": 1464177442, "answer_id": 37436418, "question_id": 37436279, "link": "https://stackoverflow.com/questions/37436279/how-to-access-main-rails-app-controllers-variable-inside-the-rails-engine-applic/37436418#37436418", "title": "How to access Main Rails App controllers variable inside the Rails Engine application", "body": "<p>Prepend with <code>::</code> like this: <code>::MainAppController</code>. The <code>::</code> says, essentially, 'look for the constant (the controller) in the global namespace' (which the MainApp that includes your engine). </p>\n"}], "owner": {"reputation": 93, "user_id": 3906755, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/3eecf28ed883e7f3a86b007359796847?s=128&d=identicon&r=PG&f=1", "display_name": "user3906755", "link": "https://stackoverflow.com/users/3906755/user3906755"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497724426, "creation_date": 1464177042, "last_edit_date": 1497724426, "question_id": 37436279, "link": "https://stackoverflow.com/questions/37436279/how-to-access-main-rails-app-controllers-variable-inside-the-rails-engine-applic", "title": "How to access Main Rails App controllers variable inside the Rails Engine application", "body": "<p>I have created a new Rails engine \"ProductSearch\" and now I have a condition here that I need a controller variable that from Main_app Controller so I am unable to get this variable while executing the action from my Engine APP.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1464176025, "post_id": 37435796, "comment_id": 62374484, "body": "What is the actual problem you have ?"}, {"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1464176113, "post_id": 37435796, "comment_id": 62374546, "body": "On update dear you have to redirect some where. There will be now vies for the update method."}], "answers": [{"comments": [{"owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "edited": false, "score": 0, "creation_date": 1464176323, "post_id": 37435941, "comment_id": 62374700, "body": "When making the update action, it should update attributes and save before redirecting. I think adding that will help the questioner since he&#39;s a newbie."}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 0, "last_activity_date": 1464176405, "last_edit_date": 1464176405, "creation_date": 1464176162, "answer_id": 37435941, "question_id": 37435796, "link": "https://stackoverflow.com/questions/37435796/missing-template-error-in-ruby-on-rails/37435941#37435941", "title": "Missing Template error in RUBY ON RAILS", "body": "<p>Because your <code>update</code> action is empty rails expects to find a template with same name and fails - hence the error page. Usually this action saves data and redirects or renders <code>edit</code> again on validation error</p>\n\n<p>So either create a template or make action to redirect/render</p>\n"}, {"tags": [], "owner": {"reputation": 967, "user_id": 4636289, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/TvFhy.png?s=128&g=1", "display_name": "Atchyut Nagabhairava", "link": "https://stackoverflow.com/users/4636289/atchyut-nagabhairava"}, "is_accepted": false, "score": 0, "last_activity_date": 1464178118, "creation_date": 1464178118, "answer_id": 37436673, "question_id": 37435796, "link": "https://stackoverflow.com/questions/37435796/missing-template-error-in-ruby-on-rails/37436673#37436673", "title": "Missing Template error in RUBY ON RAILS", "body": "<p>This error might have occurred because the rails is not able to find the update view in the \"c:/Sites/myrubyblog/app/views\" , as we don't use a view page for update action we usually give a <code>redirect_to</code> for a particular page after <code>update_attributes</code></p>\n\n<p>So, if you could give a redirect after saving the updation you can resolve the error.</p>\n"}, {"tags": [], "owner": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1464181074, "creation_date": 1464181074, "answer_id": 37437903, "question_id": 37435796, "link": "https://stackoverflow.com/questions/37435796/missing-template-error-in-ruby-on-rails/37437903#37437903", "title": "Missing Template error in RUBY ON RAILS", "body": "<p>make sure you have :method => \"Post\" on your button. And make sure you have a redirect on your update action</p>\n"}], "owner": {"reputation": 41, "user_id": 6117435, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-INeS_QeCkIQ/AAAAAAAAAAI/AAAAAAAAH_k/tRwxyZT6w0Q/photo.jpg?sz=128", "display_name": "aditya tyagi", "link": "https://stackoverflow.com/users/6117435/aditya-tyagi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1395, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1464181074, "creation_date": 1464175825, "last_edit_date": 1464176104, "question_id": 37435796, "link": "https://stackoverflow.com/questions/37435796/missing-template-error-in-ruby-on-rails", "title": "Missing Template error in RUBY ON RAILS", "body": "<p>I made this update button on the edit post page, but when clicked on, it directs to this \"missing templates\" error page. \nI checked on google and stack overflow, but all of the answers are code specific.\nhence I am not able to find the appropriate solution.\n<a href=\"http://i.stack.imgur.com/WK0Np.png\" rel=\"nofollow\">1</a></p>\n\n<blockquote>\n  <p>Missing template posts/update, application/update with\n  {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb,\n  :builder, :raw, :ruby, :coffee, :jbuilder]}. Searched in: *\n  \"c:/Sites/myrubyblog/app/views\"</p>\n</blockquote>\n"}, {"tags": ["ruby", "axlsx"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1464177823, "post_id": 37435790, "comment_id": 62375827, "body": "<i>Sidenotes</i>: class names <b>must</b> start with a capital; file, opened with <code>File.open</code> <b>must</b> be closed explicitly; class variables should not be used. Also, it would be fine if you show how you call this ...hmmm piece of code."}, {"owner": {"reputation": 577, "user_id": 2349546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0hJXG.jpg?s=128&g=1", "display_name": "Volodymyr Balytskyy", "link": "https://stackoverflow.com/users/2349546/volodymyr-balytskyy"}, "edited": false, "score": 0, "creation_date": 1464184095, "post_id": 37435790, "comment_id": 62380791, "body": "I do not understand what is really happening in your code. You have many images from what I understand, you try to pass them all to the excel but the last one gets overwritten by which one ? What happens if you pass only 1 image ?"}, {"owner": {"reputation": 45, "user_id": 6196502, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e0ea37849d1b9be3c23f274c0549ef4?s=128&d=identicon&r=PG&f=1", "display_name": "Jennifer", "link": "https://stackoverflow.com/users/6196502/jennifer"}, "edited": false, "score": 0, "creation_date": 1464188541, "post_id": 37435790, "comment_id": 62384454, "body": "Sorry for the confusion. last one overwrites all the images. i see only last image in all . updated the question."}, {"owner": {"reputation": 577, "user_id": 2349546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0hJXG.jpg?s=128&g=1", "display_name": "Volodymyr Balytskyy", "link": "https://stackoverflow.com/users/2349546/volodymyr-balytskyy"}, "edited": false, "score": 0, "creation_date": 1464198935, "post_id": 37435790, "comment_id": 62391044, "body": "can you create a working code (with the bug of course) and post it ? By working, I mean a code which I could copy past and test on my laptop and see the bug with my eyes. That would be great. thanks"}, {"owner": {"reputation": 577, "user_id": 2349546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0hJXG.jpg?s=128&g=1", "display_name": "Volodymyr Balytskyy", "link": "https://stackoverflow.com/users/2349546/volodymyr-balytskyy"}, "edited": false, "score": 0, "creation_date": 1464279708, "post_id": 37435790, "comment_id": 62431142, "body": "I am lost. I just wrote simple code to add two images to a excel file. Works great. I am not sure what are you doing wrong here."}], "owner": {"reputation": 45, "user_id": 6196502, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e0ea37849d1b9be3c23f274c0549ef4?s=128&d=identicon&r=PG&f=1", "display_name": "Jennifer", "link": "https://stackoverflow.com/users/6196502/jennifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464233742, "creation_date": 1464175812, "last_edit_date": 1464233742, "question_id": 37435790, "link": "https://stackoverflow.com/questions/37435790/image-with-axlsx-gem", "title": "Image with axlsx gem", "body": "<p>i am trying to add the images to excel. am able to send the different images when calling the method res_data. but after the execution i see the last image overwrites all the previous images captured.</p>\n\n<p>here is my code. please help .am using axlsx gem in ruby</p>\n\n<pre><code>class abc\n    @@row=1\n    @@f = File.open('result.xlsx', 'w+')\n    @@p = Axlsx::Package.new\n    @@ws = @@p.workbook.add_worksheet\n    @@ws.name=\"result\"\n\n    def res_data(path)  \n        @@ws.add_image(:image_src =&gt; path, :noSelect =&gt; true, :noMove =&gt; true) do |image|\n          image.width=1366\n          image.height=768\n          image.start_at 0, @@row\n        end\n\n        @@row=@@row+42      \n        @@p.serialize(@@f)\n    end\nend\n</code></pre>\n\n<p>calling the method as (using capybara methods along with this)</p>\n\n<p>require 'axlsx'</p>\n\n<p>obj = abc.new</p>\n\n<p>path='c:\\test\\image_file.png'</p>\n\n<p>visit \"<a href=\"http://google.com\" rel=\"nofollow\">http://google.com</a></p>\n\n<p>save_screenshot(path, :full => true) # google home page screenshot is captured</p>\n\n<p>obj.res_data(path)</p>\n\n<p>click_button \"btnI\"</p>\n\n<p>save_screenshot(path, :full => true) #clicks \"i'm feeling lucky \" and capture the screenshot again</p>\n\n<p>obj.res_data(path)</p>\n\n<p>am able to see the 'c:\\test\\image_file.png' file gets updated with the new image (when save screenshot is called)\nbut when i see the 'result_xlsx\" file, it shows only the last image in all images.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "grpc", "proto3"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1464177512, "post_id": 37434743, "comment_id": 62375593, "body": "<code>integral</code> \u2260 <code>integer</code>"}, {"owner": {"reputation": 4055, "user_id": 2598037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWCTo.jpg?s=128&g=1", "display_name": "Carl Mastrangelo", "link": "https://stackoverflow.com/users/2598037/carl-mastrangelo"}, "edited": false, "score": 0, "creation_date": 1465340437, "post_id": 37434743, "comment_id": 62858070, "body": "Proto3 doesn&#39;t allow empty values, so it doesn&#39;t make sense there to set it to nil.  You can use proto2 if you need field presence."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 6528438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLhBN.jpg?s=128&g=1", "display_name": "susheel", "link": "https://stackoverflow.com/users/6528438/susheel"}, "is_accepted": false, "score": 0, "last_activity_date": 1490188423, "creation_date": 1490188423, "answer_id": 42952714, "question_id": 37434743, "link": "https://stackoverflow.com/questions/37434743/nil-values-not-allowed-for-grpc-in-ruby-proto3/42952714#42952714", "title": "Nil values not allowed for gRPC in Ruby (proto3)", "body": "<p>The default values for strings in proto3 is empty - \n<a href=\"https://github.com/google/protobuf/issues/359\" rel=\"nofollow noreferrer\">https://github.com/google/protobuf/issues/359</a> </p>\n\n<p>Hence it can receive the nil value without returning an error, Integers on the other hand have default values set to 0. Try passing 0 in case you do not want to pass any value. </p>\n\n<p>Suggestion: - In case you do not wish to pass any tuples for a message written in proto3 you can leave the message blank which is a very valid way to define a message.</p>\n\n<p>For Instance:-</p>\n\n<pre><code>syntax=\"proto3\"\nservice Foo{\n            rpc Index(Empty) Returns(Nothing){}\n            }\nmessage Empty{}\nmessage Nothing{}\n</code></pre>\n"}], "owner": {"reputation": 2232, "user_id": 1430655, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IJdhB.jpg?s=128&g=1", "display_name": "shiladitya", "link": "https://stackoverflow.com/users/1430655/shiladitya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 493, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490188423, "creation_date": 1464173022, "question_id": 37434743, "link": "https://stackoverflow.com/questions/37434743/nil-values-not-allowed-for-grpc-in-ruby-proto3", "title": "Nil values not allowed for gRPC in Ruby (proto3)", "body": "<p>Hi I am using gRPC Ruby plugin to communicate to a service. The proto definition contains(proto3):</p>\n\n<pre><code>uint32 id = 1;\n</code></pre>\n\n<p>But, when I assign nil to id, it throws an error - expected number for integral field. But for strings, nil values work fine. How do I allow nil values for integral / float fields?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 4, "creation_date": 1464172196, "post_id": 37434257, "comment_id": 62371938, "body": "you should put your method inside class body"}, {"owner": {"reputation": 973, "user_id": 1434804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7f32u.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1434804/alex"}, "edited": false, "score": 1, "creation_date": 1464172518, "post_id": 37434257, "comment_id": 62372194, "body": "By the way, in Ruby it is not necessary to use return keyword. Ruby returns last calculated value by default."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464176596, "post_id": 37434257, "comment_id": 62374888, "body": "<code>add_two_numbers</code> - why &quot;two&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 5, "creation_date": 1464173717, "post_id": 37434477, "comment_id": 62373002, "body": "Methods defined at the top-level become private instance methods of <code>Object</code>. So, the method actually <i>is</i> defined for <code>Calc</code> via inheriting it from its superclass <code>Object</code>, but it is private, ergo cannot be called with an explicit receiver. Your solution is correct, but the explanation is incomplete."}, {"owner": {"reputation": 29477, "user_id": 1520364, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/cEOYD.jpg?s=128&g=1", "display_name": "Karthik T", "link": "https://stackoverflow.com/users/1520364/karthik-t"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1464247262, "post_id": 37434477, "comment_id": 62408592, "body": "@J&#246;rgWMittag you are right I was not aware of this rule and had not adequately considered it"}], "tags": [], "owner": {"reputation": 29477, "user_id": 1520364, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/cEOYD.jpg?s=128&g=1", "display_name": "Karthik T", "link": "https://stackoverflow.com/users/1520364/karthik-t"}, "is_accepted": true, "score": 4, "last_activity_date": 1464249193, "last_edit_date": 1464249193, "creation_date": 1464172290, "answer_id": 37434477, "question_id": 37434257, "link": "https://stackoverflow.com/questions/37434257/ruby-beginner-needs-a-hand/37434477#37434477", "title": "Ruby beginner needs a hand", "body": "<p>The method <code>add_two_numbers</code> is not defined on the class <code>Calc</code>, however you are using it as if it is. This is the problem.</p>\n\n<p>I would presume you got a <code>NoMethodError</code>.</p>\n\n<p><strong>Update</strong>: As pointed out in the comments, in actuallity, the method is defined on the <code>Object</code> class by default, which then gets auto inherited into all classes, but as private. This actually means that you will be getting the error saying that a private method is being called. The fix remains the same, since the overarching problem is a confusion in how to define classes and their methods.</p>\n\n<p>The fix would be to define the method on the class, by putting it in the class body.</p>\n\n<pre><code>class Calc\n  attr_accessor :val1, :val2\n  def initialize (val1,val2)\n    @val1=val1\n    @val2=val2\n  end\n\n  def add_two_numbers(v3)\n    return @val1+@val2+v3\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6479803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73bfad349645d93ca26b79f76f266add?s=128&d=identicon&r=PG&f=1", "display_name": "creativegeek", "link": "https://stackoverflow.com/users/6479803/creativegeek"}, "is_accepted": false, "score": 0, "last_activity_date": 1466179231, "creation_date": 1466179231, "answer_id": 37885847, "question_id": 37434257, "link": "https://stackoverflow.com/questions/37434257/ruby-beginner-needs-a-hand/37885847#37885847", "title": "Ruby beginner needs a hand", "body": "<p>So you are defining a method outside of a class (which is want we don't want) </p>\n\n<pre><code>def add_two_numbers(v3)\n return @val1+@val2+v3\nend\n</code></pre>\n\n<p>You always want to make sure that you keep your classes and you logic as two separate entities in terms of organization. By that I mean:</p>\n\n<p>Your classes in one file (calc.rb):</p>\n\n<pre><code> **class Calc\n      attr_accessor :val1, :val2\n      def initialize (val1,val2)\n        @val1=val1\n        @val2=val2\n     end\n      def add_two_numbers(v3)\n        return @val1+@val2+v3\n      end\n   end**\n</code></pre>\n\n<p>And your logic to access calc.rb in another file. Use require relative to access the logic inside the class file:</p>\n\n<pre><code>require_relative\"/calc.rb\"\na=Calc.new(2,3)\na.add_two_numbers(3)\n</code></pre>\n\n<p><em>Tip: When I was learning ruby the best way to keep them in two separate files for better organization.That way you know you don't have a method somewhere outside of the class. This would avoid your \"no method error\"</em> </p>\n"}], "owner": {"reputation": 23, "user_id": 5756884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46a05ded5d668e797cf95cf8c8b8113?s=128&d=identicon&r=PG&f=1", "display_name": "V.Abhijith Bharadwaj", "link": "https://stackoverflow.com/users/5756884/v-abhijith-bharadwaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 37434477, "answer_count": 2, "score": 0, "last_activity_date": 1466179231, "creation_date": 1464171760, "last_edit_date": 1464178899, "question_id": 37434257, "link": "https://stackoverflow.com/questions/37434257/ruby-beginner-needs-a-hand", "title": "Ruby beginner needs a hand", "body": "<p>I am a beginner in ruby. <br>\nI've tried to run this code and it shows run time error. <br>\nWhat's wrong with this code?</p>\n\n<pre><code>class Calc\n  attr_accessor :val1, :val2\n  def initialize (val1,val2)\n    @val1=val1\n    @val2=val2\n  end\nend\na=Calc.new(2,3)\na.add_two_numbers(3)\n\ndef add_two_numbers(v3)\n  return @val1+@val2+v3\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "edited": false, "score": 0, "creation_date": 1464173928, "post_id": 37433419, "comment_id": 62373147, "body": "Use GROUP BY on all columns to get distinct values."}, {"owner": {"reputation": 11227, "user_id": 1087866, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/52hpI.jpg?s=128&g=1", "display_name": "Jon Cairns", "link": "https://stackoverflow.com/users/1087866/jon-cairns"}, "reply_to_user": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "edited": false, "score": 0, "creation_date": 1464174942, "post_id": 37433419, "comment_id": 62373815, "body": "@Pholochtairze that&#39;s not correct, DISTINCT is the right statement to use. MySQL implements grouping incorrectly, which is probably what causes the confusion. See <a href=\"http://stackoverflow.com/a/1777448/1087866\">stackoverflow.com/a/1777448/1087866</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "edited": false, "score": 0, "creation_date": 1505837865, "post_id": 37435435, "comment_id": 79572781, "body": "what if I added a <code>CASE ... AS some_field</code> to Select section and I&#39;m going to distinct on it?  I placed <code>some_field</code> to <code>distinct on</code> as well as to <code>select</code> and <code>order by</code> but got the same error"}], "tags": [], "owner": {"reputation": 11227, "user_id": 1087866, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/52hpI.jpg?s=128&g=1", "display_name": "Jon Cairns", "link": "https://stackoverflow.com/users/1087866/jon-cairns"}, "is_accepted": false, "score": 7, "last_activity_date": 1464174848, "creation_date": 1464174848, "answer_id": 37435435, "question_id": 37433419, "link": "https://stackoverflow.com/questions/37433419/error-select-distinct-on-expressions-must-match-initial-order-by-expressions/37435435#37435435", "title": "ERROR: SELECT DISTINCT ON expressions must match initial ORDER BY expressions", "body": "<p>You need to include the DISTINCT column in your order:</p>\n\n<pre><code>.order('report_posts.post_id, report_posts.reported_at desc')\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6175355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6189, "favorite_count": 3, "answer_count": 1, "score": 6, "last_activity_date": 1464174848, "creation_date": 1464169586, "last_edit_date": 1495540012, "question_id": 37433419, "link": "https://stackoverflow.com/questions/37433419/error-select-distinct-on-expressions-must-match-initial-order-by-expressions", "title": "ERROR: SELECT DISTINCT ON expressions must match initial ORDER BY expressions", "body": "<p>My requirement is to get distinct records and in order</p>\n\n<pre><code>User.joins('INNER JOIN report_posts ON posts.id = report_posts.post_id').select('DISTINCT ON (report_posts.post_id) posts.id as report_posts.id as reported_id, report_posts.reported_at').order('report_posts.reported_at desc')\n</code></pre>\n\n<p>I know this is not possible in <code>postgresql</code>, I already read this <a href=\"https://stackoverflow.com/questions/9795660/postgresql-distinct-on-with-different-order-by\">Postgresql DISTINCT ON with different ORDER BY</a></p>\n\n<p>I want its solution that how can I do do this, its alternate way?</p>\n"}, {"tags": ["css", "ruby", "screen-scraping"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6380516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d826f39787d56455a348fa4354e7c19?s=128&d=identicon&r=PG&f=1", "display_name": "HenochV", "link": "https://stackoverflow.com/users/6380516/henochv"}, "is_accepted": false, "score": 0, "last_activity_date": 1464169936, "creation_date": 1464169936, "answer_id": 37433566, "question_id": 37433350, "link": "https://stackoverflow.com/questions/37433350/how-do-i-get-the-text-job-id-from-this/37433566#37433566", "title": "How do I get the text &quot;Job id&quot; from this:", "body": "<p>Simply use : document.getElementById(\"myAnchor\").text</p>\n\n<p>for example,copy and paste this and tell me if it helped:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;body&gt;\n\n&lt;p&gt;&lt;a id=\"myAnchor\" href=\"http://www.example.com/test.htm#part2\"&gt;Example link&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Click the button to display the text content of the link above.&lt;/p&gt;\n\n&lt;button onclick=\"myFunction()\"&gt;Try it&lt;/button&gt;\n\n&lt;p id=\"demo\"&gt;&lt;/p&gt;\n\n&lt;script&gt;\nfunction myFunction() {\n    var x = document.getElementById(\"myAnchor\").text;\n    document.getElementById(\"demo\").innerHTML = x;\n}\n&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "is_accepted": false, "score": 0, "last_activity_date": 1464172362, "creation_date": 1464172362, "answer_id": 37434510, "question_id": 37433350, "link": "https://stackoverflow.com/questions/37433350/how-do-i-get-the-text-job-id-from-this/37434510#37434510", "title": "How do I get the text &quot;Job id&quot; from this:", "body": "<p>Try using regular expressions.</p>\n\n<pre><code>s = \"&lt;a name=\\\"HRS_AGNT_RSLT_I$srt7$0\\\" id=\\\"HRS_AGNT_RSLT_I$srt7$0\\\" tabindex=\\\"109\\\" class=\\\"PSLEVEL1GRIDCOLUMNHDR\\\" href=\\\"javascript:submitAction_win0(document.win0,'HRS_AGNT_RSLT_I$srt7$0');\\\" title=\\\"Click column heading to sort descending\\\"&gt;Job ID&lt;/a&gt;.\"\nreg = /&lt;a.+&gt;(.+)&lt;\\/a&gt;/\ns[reg, 1]\n# =&gt; \"Job ID\"\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5741651, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/25567ce2a349b82f527e4bedf12c889f?s=128&d=identicon&r=PG&f=1", "display_name": "J.Taiwo", "link": "https://stackoverflow.com/users/5741651/j-taiwo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464173088, "creation_date": 1464169386, "last_edit_date": 1464173088, "question_id": 37433350, "link": "https://stackoverflow.com/questions/37433350/how-do-i-get-the-text-job-id-from-this", "title": "How do I get the text &quot;Job id&quot; from this:", "body": "<pre><code>&lt;a name=\"HRS_AGNT_RSLT_I$srt7$0\" \nid=\"HRS_AGNT_RSLT_I$srt7$0\" \ntabindex=\"109\" \nclass=\"PSLEVEL1GRIDCOLUMNHDR\" href=\"javascript:submitAction_win0(document.win0,'HRS_AGNT_RSLT_I$srt7$0');\" title=\"Click column heading to sort descending\"&gt;Job ID&lt;/a&gt;.`\n</code></pre>\n\n<p>I want to get the \"job id\" text from the above code.\nI've tried everything I could, but still not able to find a way out.\nThis has really got me stuck on this project for some time now.\nI need someone to help me.</p>\n"}, {"tags": ["ruby", "hashmap"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464169425, "post_id": 37433131, "comment_id": 62370022, "body": "What is <code>@row_left</code>, what is <code>@row_right</code> and what is your expected result?"}, {"owner": {"reputation": 967, "user_id": 4636289, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/TvFhy.png?s=128&g=1", "display_name": "Atchyut Nagabhairava", "link": "https://stackoverflow.com/users/4636289/atchyut-nagabhairava"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464169732, "post_id": 37433131, "comment_id": 62370224, "body": "@Stefan I&#39;m trying to get the values of a html page of two classes row_left, row_right. I&#39;m able to get those values from each loop. But I have a requirement where row_left value should be a key, row_right value should be a value in the form of a hash.  Hope this is clear.  Thankyou."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464169843, "post_id": 37433131, "comment_id": 62370316, "body": "Could you provide some example data of both, your input and your desired output?"}, {"owner": {"reputation": 967, "user_id": 4636289, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/TvFhy.png?s=128&g=1", "display_name": "Atchyut Nagabhairava", "link": "https://stackoverflow.com/users/4636289/atchyut-nagabhairava"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464171560, "post_id": 37433131, "comment_id": 62371504, "body": "Sure, @Stefan if you consider the o/p from first loop as: Title: Author: ,  Price: ,  Description: , Seller:   and let the output of second loop be: The Well-Grounded Rubyist,  David A. Black,  $34.99,  A great book for Rubyists, Ruby Scholar"}, {"owner": {"reputation": 967, "user_id": 4636289, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/TvFhy.png?s=128&g=1", "display_name": "Atchyut Nagabhairava", "link": "https://stackoverflow.com/users/4636289/atchyut-nagabhairava"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464171597, "post_id": 37433131, "comment_id": 62371538, "body": "and the expected O/P is like:  {&quot;Title:&quot;=&gt;&quot;The Well-Grounded Rubyist&quot;, &quot;Author:&quot;=&gt;&quot;David A. Black&quot;, &quot;Price:&quot;=&gt;&quot;$34.99&quot;, &quot;Description:&quot;=&gt;&quot;A great book for Rubyists&quot;, &quot;Seller:&quot;=&gt;&quot;Ruby Scholar&quot;}"}], "answers": [{"comments": [{"owner": {"reputation": 967, "user_id": 4636289, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/TvFhy.png?s=128&g=1", "display_name": "Atchyut Nagabhairava", "link": "https://stackoverflow.com/users/4636289/atchyut-nagabhairava"}, "edited": false, "score": 0, "creation_date": 1464171775, "post_id": 37433400, "comment_id": 62371652, "body": "I have upvoted you. But its not being shown due to lack of reputation point of 15. Anyways, Thanks once again for the answer you saved my day. :)"}], "tags": [], "owner": {"reputation": 1444, "user_id": 188870, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f1945436277d2a4ae7ba54e77cdeb853?s=128&d=identicon&r=PG", "display_name": "unflores", "link": "https://stackoverflow.com/users/188870/unflores"}, "is_accepted": true, "score": 3, "last_activity_date": 1464169515, "creation_date": 1464169515, "answer_id": 37433400, "question_id": 37433131, "link": "https://stackoverflow.com/questions/37433131/how-to-create-a-hash-from-keys-array-and-values-array/37433400#37433400", "title": "How to create a hash from keys array and values array?", "body": "<p>If you are looking for merging two equal length arrays into a hash, I would do this:</p>\n\n<pre><code>a = [1,3,5]; b=[2,4,6]\nHash[a.zip(b)]\n</code></pre>\n"}], "owner": {"reputation": 967, "user_id": 4636289, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/TvFhy.png?s=128&g=1", "display_name": "Atchyut Nagabhairava", "link": "https://stackoverflow.com/users/4636289/atchyut-nagabhairava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 37433400, "answer_count": 1, "score": 0, "last_activity_date": 1464174513, "creation_date": 1464168901, "last_edit_date": 1464174513, "question_id": 37433131, "link": "https://stackoverflow.com/questions/37433131/how-to-create-a-hash-from-keys-array-and-values-array", "title": "How to create a hash from keys array and values array?", "body": "<p>I have two arrays extracted from a HTML page:</p>\n\n<pre><code>@row_left = ['Title:', 'Author:', 'Price:', 'Description:', 'Seller:']    \n@row_right = ['The Well-Grounded Rubyist', 'David A. Black', '$34.99', 'A great book for Rubyists', 'Ruby Scholar']\n</code></pre>\n\n<p>How can I combine both arrays into a hash?</p>\n\n<pre><code>{\n  \"Title:\" =&gt; \"The Well-Grounded Rubyist\",\n  \"Author:\" =&gt; \"David A. Black\",\n  \"Price:\" =&gt; \"$34.99\",\n  \"Description:\" =&gt; \"A great book for Rubyists\",\n  \"Seller:\" =&gt; \"Ruby Scholar\"\n}\n</code></pre>\n"}, {"tags": ["ruby", "algorithm", "permutation"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1464168091, "post_id": 37432706, "comment_id": 62369059, "body": "Fixed the indentation and added 2 <code>end</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1464169764, "post_id": 37432706, "comment_id": 62370251, "body": "@Aetherus you can provide an <i>edit summary</i> when editing questions, right before the <i>Save Edits</i> button."}, {"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "edited": false, "score": 3, "creation_date": 1464171530, "post_id": 37432706, "comment_id": 62371479, "body": "The problem you have with your formula is that you are counting the number of unique characters but you need the information on the number of occurences of each character. For instance &#39;aabb&#39; and &#39;abbb&#39; both have the same number of characters and the same number of distinct characters, yet they have respectively 6 and 4 permutations without duplicates."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464170056, "post_id": 37433405, "comment_id": 62370472, "body": "<code>inject</code> takes an optional initial value, so instead of appending <code>|| 1</code>, you can write <code>inject(1, :*)</code>"}, {"owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "edited": false, "score": 0, "creation_date": 1464170782, "post_id": 37433405, "comment_id": 62370984, "body": "Thank you for your detailed response, that&#39;s definitely helped my mind cope. May I ask, if I were to extend the <code>k = ...uniq</code> to then count the number of each unique character and include the result in the object <code>l</code> to be divided by the factorial length of the string... would that solve the duplicate values problem?"}, {"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "edited": false, "score": 0, "creation_date": 1464171253, "post_id": 37433405, "comment_id": 62371303, "body": "Basically the formula is : <code>(length of the string)!&#47;( (char_1_count)!*(char_2_count)!*...*(char_n_count)! )</code>. Where char_1_count represent the total number of times char_1 occurs in the string, for instance in &#39;aab&#39; is char_1=&#39;a&#39; then char_1_count=2. As long as you do that it will work."}, {"owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "edited": false, "score": 0, "creation_date": 1464172594, "post_id": 37433405, "comment_id": 62372264, "body": "@Pholochtairze thanks. I&#39;ll have a look into counting each non unique character occurrence now. I had an ideasomething similar would be needed but it was giving me a headache trying to implement it without understanding fully"}], "tags": [], "owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "is_accepted": true, "score": 2, "last_activity_date": 1464170410, "last_edit_date": 1495542240, "creation_date": 1464169540, "answer_id": 37433405, "question_id": 37432706, "link": "https://stackoverflow.com/questions/37432706/ruby-calculating-number-of-unique-permutations-without-using-permutation-with/37433405#37433405", "title": "Ruby: calculating number of unique permutations without using .permutation with duplicates in data set", "body": "<p>TL;DR:</p>\n\n<pre><code>def factorial(n)\n  (1..n).inject(1, :*)\nend\n\nstr = '73839'\n\n# https://stackoverflow.com/questions/5470725/how-to-group-by-count-in-array-without-using-loop\nchars_count = str.split('').inject(Hash.new(0)) { |h, e| h[e] += 1 ; h }\n\n# https://stackoverflow.com/questions/9560335/ruby-hash-to-array-of-values\nchars_fact = chars_count.values.inject(1) {|result, element| result*factorial(element)}\n\np \"There are #{factorial(str.length)/chars_fact} permutations without duplicates.\"\n</code></pre>\n\n<p><strong>Not very good explanation :</strong></p>\n\n<p>Well, this is mostly a math problem:</p>\n\n<p>Note : When I write n! you should read \"factorial n\" and it represents the integer 1*2*...*n . You can find a ruby implementation here : <a href=\"https://stackoverflow.com/a/12415362/4480140\">https://stackoverflow.com/a/12415362/4480140</a></p>\n\n<p>If you had n a's and m b's then the formula to find the number of permutations without duplicates is n choose m+n which is (m+n)!/(n!*m!).</p>\n\n<p>Then, what we do if we have 'aazzerty' is we say we have a's and b's. So we have 'aabbbbbb', we have 2 choose 8 ways of permuting. One of the possible permutations would be 'bbabbbab'. Then we permute the b's. We know that these b's contain 2 z's and 1 of (e,r,t,y). We will permute everything that is not a z or an a. We have 2 choose 6 ways of doing that. We repeat the process ...</p>\n\n<p>In the end the number of permutations is (2 choose 8)<em>(2 choose 6)</em>(1 choose 4)<em>...</em>(1 choose 2). We can cancel out, in fact we get 8!/(2!*2!*1!*1!*1!*1!).</p>\n\n<p>Basically, we have to count the number of each character, take the factorial of all those numbers, multiply them together. That's the denominator, and the numerator is factorial the length of the string. </p>\n"}], "owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 846, "favorite_count": 0, "accepted_answer_id": 37433405, "answer_count": 1, "score": 1, "last_activity_date": 1497819100, "creation_date": 1464167867, "last_edit_date": 1464168025, "question_id": 37432706, "link": "https://stackoverflow.com/questions/37432706/ruby-calculating-number-of-unique-permutations-without-using-permutation-with", "title": "Ruby: calculating number of unique permutations without using .permutation with duplicates in data set", "body": "<p>I require a method for taking in a string of varying length and content, returning the number of permutations without repetition. I have written the following to try to solve this problem</p>\n\n<pre><code>def permutations(n)\n  k = n.to_s.chars.uniq.length\n  e = n.to_s.length\n  m = (1..e).reduce(1, :*)\n  p = (1..k).reduce(1, :*)\n  l = m / p\n  case\n    when k == 1 then 1\n    when k &lt; e then l\n    else m \n  end\nend \n</code></pre>\n\n<p>The above is returning some results that I've been confused by for a couple of days which I've realised occur where there are more than 1 set of duplicate values for <code>uniq</code> to check.</p>\n\n<p>If I pass through <code>bbbb789</code> I get <code>210</code> which is correct. However if I have a set with two duplicates such as <code>73839</code> the expected result is <code>60 but I reach 5</code></p>\n\n<p>I realised yesterday where the issues were but I can't find a way to factor in the duplicates</p>\n\n<p>Also my first method for solving this was to use</p>\n\n<pre><code>k = n.to_s.chars.uniq.length\nm = n.to_s.chars.length \nreturn 1 if k &lt;= 1 \nn.to_s.chars.permutation(m)to_a.uniq.size\n</code></pre>\n\n<p>This also worked but takes an age to cycle through all permutations of longer sets</p>\n"}, {"tags": ["ruby", "ubuntu", "jekyll"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1464170503, "post_id": 37432546, "comment_id": 62370795, "body": "Have you tried with sudo? You won&#39;t succeed in running apt-get as a common user, because the configuration files are property of the root user."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1464171222, "post_id": 37432546, "comment_id": 62371281, "body": "Possible duplicate? <a href=\"http://stackoverflow.com/questions/23650992/ruby-rvm-apt-get-update-error\" title=\"ruby rvm apt get update error\">stackoverflow.com/questions/23650992/&hellip;</a>"}, {"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1464175079, "post_id": 37432546, "comment_id": 62373895, "body": "Personally, I also get problems with rvm. I now use <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a> and it&#39;s painless."}], "answers": [{"tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 1, "last_activity_date": 1464176615, "creation_date": 1464176615, "answer_id": 37436117, "question_id": 37432546, "link": "https://stackoverflow.com/questions/37432546/install-ruby-requirements-on-ubuntu/37436117#37436117", "title": "Install ruby requirements on ubuntu", "body": "<p>The command it's failing on is one you can run from the command line:</p>\n\n<pre><code>sudo apt-get update\n</code></pre>\n\n<p>If that fails, then you would need to look into that, and that's not an rvm or Ruby problem at all.</p>\n\n<p>I would do that, and then try <code>rvm requirements</code> again.</p>\n"}], "owner": {"reputation": 1012, "user_id": 194450, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/d4bd02ca8395f9a3005f40b8dea5617f?s=128&d=identicon&r=PG&f=1", "display_name": "Jobi", "link": "https://stackoverflow.com/users/194450/jobi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464176615, "creation_date": 1464167441, "question_id": 37432546, "link": "https://stackoverflow.com/questions/37432546/install-ruby-requirements-on-ubuntu", "title": "Install ruby requirements on ubuntu", "body": "<p>I'm trying the installation steps from <a href=\"http://sharadchhetri.com/2014/06/30/install-jekyll-on-ubuntu-14-04-lts/\" rel=\"nofollow\">http://sharadchhetri.com/2014/06/30/install-jekyll-on-ubuntu-14-04-lts/</a></p>\n\n<pre><code>linux@ubuntu:~$ rvm requirements\n\nChecking requirements for ubuntu.\nInstalling requirements for ubuntu.\nUpdating system...................\nError running 'requirements_debian_update_system ',\nshowing last 15 lines of /home/jobi/.rvm/log/1464166761/update_system.log\n+ case \"${TERM:-dumb}\" in\n+ case \"$1\" in\n+ [[ -t 2 ]]\n+ return 1\n+ printf %b 'There has been error while updating '\\''apt-get'\\'', please give it some time and try again later.\n404 errors should be fixed for rvm to proceed. Check your sources configured in:\n    /etc/apt/sources.list\n    /etc/apt/sources.list.d/*.list\n\\n'\nThere has been error while updating 'apt-get', please give it some time and try again later.\n404 errors should be fixed for rvm to proceed. Check your sources configured in:\n    /etc/apt/sources.list\n    /etc/apt/sources.list.d/*.list\n\n+ return 100\nRequirements installation failed with status: 100.\n</code></pre>\n\n<p>Why the above step get failing.. Please help</p>\n"}, {"tags": ["ruby", "google-cloud-storage", "gcloud-ruby"], "answers": [{"tags": [], "owner": {"reputation": 8260, "user_id": 5627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8da976054ea4915eafc5d9dd096d38?s=128&d=identicon&r=PG", "display_name": "blowmage", "link": "https://stackoverflow.com/users/5627/blowmage"}, "is_accepted": true, "score": 1, "last_activity_date": 1464186009, "creation_date": 1464186009, "answer_id": 37439948, "question_id": 37431917, "link": "https://stackoverflow.com/questions/37431917/gcloud-ruby-backoff-on-copying-files-and-other-operations/37439948#37439948", "title": "Gcloud-ruby backoff on copying files and other operations", "body": "<p>I work on the gcloud gem. When we first implemented the incremental backoff we asked the Storage team which API calls should be retried. This is why only some of the calls have that code. If you <a href=\"https://github.com/GoogleCloudPlatform/gcloud-ruby/issues/new\" rel=\"nofollow\">open an issue</a> for this we will apply the backoff to all the API calls.</p>\n"}], "owner": {"reputation": 5624, "user_id": 54247, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1700eeb3b7d7cc960e03a016be7dcaff?s=128&d=identicon&r=PG", "display_name": "dolzenko", "link": "https://stackoverflow.com/users/54247/dolzenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 37439948, "answer_count": 1, "score": 0, "last_activity_date": 1464186009, "creation_date": 1464165695, "question_id": 37431917, "link": "https://stackoverflow.com/questions/37431917/gcloud-ruby-backoff-on-copying-files-and-other-operations", "title": "Gcloud-ruby backoff on copying files and other operations", "body": "<p>As far as I can tell [0] currently gcloud-ruby gem only does backoff on bucket operations, but I'm getting <code>Gcloud::Storage::ApiError: User Rate Limit Exceeded</code> on copying files, as far as I can tell there is no way currently to enable it for other operations and <code>Gcloud::Backoff</code> can't be reused in client code either, meaning one will have to resort to custom retry solution :(</p>\n\n<p>[0] <a href=\"https://github.com/GoogleCloudPlatform/gcloud-ruby/blob/master/lib/gcloud/storage/connection.rb#L77\" rel=\"nofollow\">https://github.com/GoogleCloudPlatform/gcloud-ruby/blob/master/lib/gcloud/storage/connection.rb#L77</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "pundit"], "answers": [{"tags": [], "owner": {"reputation": 223, "user_id": 3876089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/giNwz.jpg?s=128&g=1", "display_name": "Alexander R&#252;hle", "link": "https://stackoverflow.com/users/3876089/alexander-r%c3%bchle"}, "is_accepted": false, "score": 12, "last_activity_date": 1464335853, "creation_date": 1464335853, "answer_id": 37477940, "question_id": 37431792, "link": "https://stackoverflow.com/questions/37431792/how-to-use-namespace-in-gem-pundit/37477940#37477940", "title": "how to use namespace in gem Pundit", "body": "<p>Use the authorize method to pass the namespace as a parameter.</p>\n\n<pre><code>class ArticlesController &lt; ActionController::Base\n  ...\n  def show \n    @article = Article.find(parmas[:id])\n    authorize [:admin, @article]\n  end\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 412, "user_id": 4340066, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c95cbbc65958d466aae2a234e8266a37?s=128&d=identicon&r=PG&f=1", "display_name": "bav ko ten", "link": "https://stackoverflow.com/users/4340066/bav-ko-ten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2095, "favorite_count": 3, "answer_count": 1, "score": 4, "last_activity_date": 1470674870, "creation_date": 1464165301, "question_id": 37431792, "link": "https://stackoverflow.com/questions/37431792/how-to-use-namespace-in-gem-pundit", "title": "how to use namespace in gem Pundit", "body": "<p>I have 2 controller, 1 for user and 1 for admin.</p>\n\n<p>controllers/articles_controller.rb</p>\n\n<pre><code>class ArticlesController &lt; ActionController::Base\n  ...\n  def show \n    @article = Article.find(parmas[:id])\n    authorize @article\n  end\n  ...\nend\n</code></pre>\n\n<p>controllers/admin/articles_controller.rb</p>\n\n<pre><code>class Admin::ArticlesController &lt; AdminController\n  ...\n  def show \n    @article = Article.find(parmas[:id])\n    authorize @article\n  end\n  ...\nend\n</code></pre>\n\n<p>And i have 2 file policy\npolicies/article_policy.rb</p>\n\n<pre><code>class ArticlePolicy\n  extend ActiveSupport::Autoload\n  autoload :Admin\n\n  attr_reader :user, :record\n\n  def initialize(user, record)\n    @user = user\n    @record = record\n  end\n\n  def show?\n    # allow show for every user. \n    true \n  end  \nend\n</code></pre>\n\n<p>And one file policies/admin/article_policy.rb</p>\n\n<pre><code>class Admin::ArticlePolicy\n\n  attr_reader :user, :record\n\n  def initialize(user, record)\n    @user = user\n    @record = record\n  end\n\n  def show?\n    # only show if use have role manager \n    user.manager? \n  end  \nend\n</code></pre>\n\n<p>but when i use a account user to show articles at /admin/articles/1/. It show normaly, Should is \"Access denied\".</p>\n\n<p>How to fix this? (I use gem pundit 1.10).</p>\n"}, {"tags": ["ruby", "class", "instance-methods"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1464165033, "post_id": 37431389, "comment_id": 62367055, "body": "BTW, <code>include</code> is public since Ruby 2.1, so there&#39;s no need to use <code>send</code> any more (unless you are working with legacy code)."}], "answers": [{"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1464165392, "post_id": 37431665, "comment_id": 62367283, "body": "Good answer. One note:  <code>prepend</code> working only in Ruby &gt;= 2.0"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 5, "last_activity_date": 1464166190, "last_edit_date": 1464166190, "creation_date": 1464164865, "answer_id": 37431665, "question_id": 37431389, "link": "https://stackoverflow.com/questions/37431389/extend-return-value-of-class-instance-method/37431665#37431665", "title": "Extend return value of class instance method", "body": "<p>You could call <a href=\"http://ruby-doc.org/core-2.3.1/Module.html#method-i-prepend\" rel=\"nofollow\"><code>prepend</code></a> instead of <code>include</code>:</p>\n\n<pre><code>Processor.prepend(ProcessorCustom)\n\nprocessor = Processor.new\nprocessor.process\n#=&gt; {:a=&gt;1, :b=&gt;2}\n</code></pre>\n\n<p><code>prepend</code> and <code>include</code> result in different ancestor order:</p>\n\n<pre><code>module A; end\nmodule B; end\nmodule C; end\n\nB.ancestors     #=&gt; [B]\n\nB.include(C)\nB.ancestors     #=&gt; [B, C]\n\nB.prepend(A)\nB.ancestors     #=&gt; [A, B, C]\n</code></pre>\n\n<h3>Alternatives</h3>\n\n<p>Depending on your use-case, you could also <a href=\"http://ruby-doc.org/core-2.3.1/Object.html#method-i-extend\" rel=\"nofollow\"><code>extend</code></a> a specific instance: (this doesn't affect other instances)</p>\n\n<pre><code>processor = Processor.new\nprocessor.extend(ProcessorCustom)\nprocessor.process\n#=&gt; {:a=&gt;1, :b=&gt;2}\n</code></pre>\n\n<p>Or use <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/delegate/rdoc/SimpleDelegator.html\" rel=\"nofollow\"><code>SimpleDelegator</code></a> to implement a <a href=\"https://en.wikipedia.org/wiki/Decorator_pattern\" rel=\"nofollow\">decorator pattern</a>:</p>\n\n<pre><code>require 'delegate'\nclass ProcessorCustom &lt; SimpleDelegator\n  def process\n    super.merge(b: 2)\n  end\nend\n\nprocessor = ProcessorCustom.new(Processor.new)\nprocessor.process  #=&gt; {:a=&gt;1, :b=&gt;2}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 1, "last_activity_date": 1464167528, "last_edit_date": 1464167528, "creation_date": 1464166897, "answer_id": 37432346, "question_id": 37431389, "link": "https://stackoverflow.com/questions/37431389/extend-return-value-of-class-instance-method/37432346#37432346", "title": "Extend return value of class instance method", "body": "<p>I think it's better to create a proxy than to pollute the original class.</p>\n\n<pre><code>class Proxy\n  def initialize(target)\n    @target = target\n  end\n\n  # add some syntactic sugar\n  singleton_class.class_eval { alias [] new }\n\n  def process\n    @target.process.merge!(b: 2)\n  end\nend\n\nProxy[Processor.new].process  #=&gt; {a: 1, b: 2}\n</code></pre>\n\n<p>You can even create your own dynamic proxy.</p>\n\n<pre><code>class DynamicProxy &lt; BasicObject\n  def initialize(target)\n    @target = target\n  end\n\n  # again, add some syntactic sugar\n  singleton_class.class_eval { alias [] new }\n\n  def method_missing(name, *args, &amp;block)\n    super unless @target.respond_to?(name)\n    # Do something before calling the target method\n    result = @target.send(name, *args, &amp;block)\n    # Do something after calling the target method\n  end\n\n  def respond_to_missing?(name, include_private = false)\n    @target.respond_to?(name, include_private)\n  end\nend\n</code></pre>\n\n<p>To hide the detail of creating <code>Processor</code> instance, you can make a simple factory to handle the creation.</p>\n\n<pre><code>module ProcessorFactory\n  def self.create\n    DynamicProxy[Processor.new]\n  end\nend\n</code></pre>\n\n<p>Then you can do your job</p>\n\n<pre><code>ProcessorFactory.create.process\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 2, "last_activity_date": 1464176383, "creation_date": 1464176383, "answer_id": 37436031, "question_id": 37431389, "link": "https://stackoverflow.com/questions/37431389/extend-return-value-of-class-instance-method/37436031#37436031", "title": "Extend return value of class instance method", "body": "<p>I think the first option to consider would be the one requiring the least work by the reader to comprehend; and in Object Oriented software that would be a subclass to specialize the behavior of the superclass. I would deviate from this if, and only if, there were a compelling reason to do so.</p>\n\n<p>How about this?:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nclass Processor\n  def foo\n    { x: 3 }\n  end\nend\n\n\nclass MyProcessor &lt; Processor\n  def foo\n    super.merge({ y: 7 })\n  end\nend\n\np MyProcessor.new.foo  # outputs: {:x=&gt;3, :y=&gt;7}\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 5695614, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d60c5b708d65a0de9e33cb442fcf65fe?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Owels", "link": "https://stackoverflow.com/users/5695614/jack-owels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 37431665, "answer_count": 3, "score": 0, "last_activity_date": 1464176383, "creation_date": 1464164086, "question_id": 37431389, "link": "https://stackoverflow.com/questions/37431389/extend-return-value-of-class-instance-method", "title": "Extend return value of class instance method", "body": "<p>I have a class that have an instance method, that returns a hash. I can't change the code of that class directly, but I can extend it with modules. I need to add some new keys to the returning hash of the method. Something like this:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Processor\n  def process\n    { a: 1 }\n  end\nend\n\nmodule ProcessorCustom\n  def process\n    super.merge(b: 2) # Not works :(\n  end\nend\n\nProcessor.send :include, ProcessorCustom\n\nprocessor = Processor.new\nprocessor.process  # returns { a: 1 }, not { a: 1, b: 2 }\n</code></pre>\n\n<p>How can I do that? Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "environment-variables", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1464164165, "post_id": 37431345, "comment_id": 62366482, "body": "This should work. Are you starting Rails and irb on the command line from the same shell in which you set those variables?"}, {"owner": {"reputation": 561, "user_id": 4179335, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-y8bJXFa59yA/AAAAAAAAAAI/AAAAAAAAAvk/Ha7r3tgCwaI/photo.jpg?sz=128", "display_name": "Ali Zain", "link": "https://stackoverflow.com/users/4179335/ali-zain"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1464164236, "post_id": 37431345, "comment_id": 62366523, "body": "nopes. From a new shell"}, {"owner": {"reputation": 561, "user_id": 4179335, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-y8bJXFa59yA/AAAAAAAAAAI/AAAAAAAAAvk/Ha7r3tgCwaI/photo.jpg?sz=128", "display_name": "Ali Zain", "link": "https://stackoverflow.com/users/4179335/ali-zain"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1464164315, "post_id": 37431345, "comment_id": 62366569, "body": "@KeithBennett it worked in a same shell"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1464165103, "post_id": 37431345, "comment_id": 62367088, "body": "Great, glad to hear it.  I&#39;ve just posted more detail in an answer.  If you feel this answers your question, please &quot;accept&quot; the answer by clicking the checkmark, but feel free to wait a while to see if someone else offers a better answer."}, {"owner": {"reputation": 3888, "user_id": 1294585, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gkE1G.jpg?s=128&g=1", "display_name": "shrikant1712", "link": "https://stackoverflow.com/users/1294585/shrikant1712"}, "edited": false, "score": 0, "creation_date": 1464165281, "post_id": 37431345, "comment_id": 62367207, "body": "You can try gem figaro [<a href=\"https://github.com/laserlemon/figaro]\" rel=\"nofollow noreferrer\">github.com/laserlemon/figaro]</a>"}], "answers": [{"comments": [{"owner": {"reputation": 561, "user_id": 4179335, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-y8bJXFa59yA/AAAAAAAAAAI/AAAAAAAAAvk/Ha7r3tgCwaI/photo.jpg?sz=128", "display_name": "Ali Zain", "link": "https://stackoverflow.com/users/4179335/ali-zain"}, "edited": false, "score": 0, "creation_date": 1464166636, "post_id": 37431709, "comment_id": 62368069, "body": "Thanks for the help, it worked, basically I was trying on the tab opened shell running before these commands execution"}, {"owner": {"reputation": 1249, "user_id": 4418293, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/7Re2u.jpg?s=128&g=1", "display_name": "Diane Kaplan", "link": "https://stackoverflow.com/users/4418293/diane-kaplan"}, "edited": false, "score": 0, "creation_date": 1533154859, "post_id": 37431709, "comment_id": 90247755, "body": "Also, this is a handy guide for using ENV variables in Rails: <a href=\"http://railsapps.github.io/rails-environment-variables.html\" rel=\"nofollow noreferrer\">railsapps.github.io/rails-environment-variables.html</a>"}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": true, "score": 5, "last_activity_date": 1464165032, "creation_date": 1464165032, "answer_id": 37431709, "question_id": 37431345, "link": "https://stackoverflow.com/questions/37431345/unable-to-access-env-variable-in-rails/37431709#37431709", "title": "Unable to Access ENV variable in rails", "body": "<p>When setting an environment variable's value using <code>export</code>, that value is available only in the shell in which it was set, and its subshells. So you'll need to export those variables in every shell in which you need them.</p>\n\n<p>However, you can automate this, of course.</p>\n\n<p>If you have variables that you need frequently, one approach is to put their assignments in a shell script and then <em>source</em> the shell script in any shells you need them in (see <a href=\"http://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/x237.html\" rel=\"noreferrer\">http://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/x237.html</a> for more on this).</p>\n\n<p>If it's ok to have the variables be in effect in <em>all</em> your shells, then a simpler way is to export them from your startup script (probably <code>~/.bashrc</code>).</p>\n"}], "owner": {"reputation": 561, "user_id": 4179335, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-y8bJXFa59yA/AAAAAAAAAAI/AAAAAAAAAvk/Ha7r3tgCwaI/photo.jpg?sz=128", "display_name": "Ali Zain", "link": "https://stackoverflow.com/users/4179335/ali-zain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 0, "accepted_answer_id": 37431709, "answer_count": 1, "score": 1, "last_activity_date": 1464165032, "creation_date": 1464163913, "question_id": 37431345, "link": "https://stackoverflow.com/questions/37431345/unable-to-access-env-variable-in-rails", "title": "Unable to Access ENV variable in rails", "body": "<p>I am trying to use env variables in my rails app and set those variable values in <strong>ubuntu 14.04</strong></p>\n\n<p>I tried setting using export command</p>\n\n<pre><code>export mongodb_username=\"abc\"\nexport mongodb_password=\"cde\"\n</code></pre>\n\n<p>and also tried setting them in <strong>/etc/environment</strong> and in <strong>~/.bashsrc</strong></p>\n\n<p>and <strong>printenv</strong> gives following results</p>\n\n<pre><code>   &gt;&gt; printenv mongodb_username\n   =&gt; abc\n   &gt;&gt; printenv mongodb_password\n   =&gt; cde\n</code></pre>\n\n<p>BUT in <strong>RAILS APP</strong> or <strong>irb</strong> the output is following</p>\n\n<pre><code>&gt;&gt; ENV['mongodb_password']\n=&gt; nil\n&gt;&gt; ENV['mongodb_username']\n=&gt; nil\n</code></pre>\n\n<p>I am missing something? Please help!!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 6336729, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/64c5fc54f76f2ac5812eeb9e5d2427bb?s=128&d=identicon&r=PG&f=1", "display_name": "Seifer", "link": "https://stackoverflow.com/users/6336729/seifer"}, "edited": false, "score": 0, "creation_date": 1464172146, "post_id": 37431480, "comment_id": 62371900, "body": "Thank you! I don&#39;t know why I missed that."}], "tags": [], "owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "is_accepted": true, "score": 3, "last_activity_date": 1464164312, "creation_date": 1464164312, "answer_id": 37431480, "question_id": 37431024, "link": "https://stackoverflow.com/questions/37431024/rails-set-up-favorite-recipe-for-user-but-keep-getting-same-error/37431480#37431480", "title": "Rails: Set up favorite recipe for user but keep getting same error", "body": "<p>According to your relationship you need recipe object to assign to user. So need to first find that object and then assign it to user.</p>\n\n<pre><code>def favorite\n    @recipe = Recipe.find(params[:id])\n    type = params[:type]\n    if type == \"favorite\"\n      current_user.favorites &lt;&lt; @recipe\n      redirect_to :back, notice: 'You favorited #{@recipe.name}'\n\n    elsif type == \"unfavorite\"\n      current_user.favorites.delete(@recipe)\n      redirect_to :back, notice: 'Unfavorited #{@recipe.name}'\n\n    else\n      # Type missing, nothing happens\n      redirect_to :back, notice: 'Nothing happened.'\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 6336729, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/64c5fc54f76f2ac5812eeb9e5d2427bb?s=128&d=identicon&r=PG&f=1", "display_name": "Seifer", "link": "https://stackoverflow.com/users/6336729/seifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 37431480, "answer_count": 1, "score": -1, "last_activity_date": 1464167844, "creation_date": 1464162965, "last_edit_date": 1495540957, "question_id": 37431024, "link": "https://stackoverflow.com/questions/37431024/rails-set-up-favorite-recipe-for-user-but-keep-getting-same-error", "title": "Rails: Set up favorite recipe for user but keep getting same error", "body": "<p>As a user I want to be able to add a recipe to my Favorites. Unfortunately when I try to add a recipe to my Favorites I get the following <code>error: Recipe(#69883866963220) expected, got NilClass(#46922250887180)</code>.</p>\n\n<p>I followed this <a href=\"https://stackoverflow.com/questions/13240109/implement-add-to-favorites-in-rails-3-4\">'tutorial'</a> as a guideline</p>\n\n<p>Somehow it is not able to add it to the user's Favorites. When I use <code>Rails C</code> and type in <code>User.find(1).favorites</code>, it returns me an empty array.</p>\n\n<p>Who can help me to solve the issue? Thank you in advance!</p>\n\n<p><strong>My models:</strong></p>\n\n<pre><code>class FavoriteRecipe &lt; ActiveRecord::Base\n  belongs_to :recipe\n  belongs_to :user\nend\n</code></pre>\n\n<hr>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :recipes\n\n  # Favorite recipes of user\n  has_many :favorite_recipes # just the 'relationships'\n  has_many :favorites, through: :favorite_recipes, source: :recipe # the actual recipes a user favorites\nend\n\nclass Recipe &lt; ActiveRecord::Base\n  belongs_to :user\n\n  # Favorited by users\n  has_many :favorite_recipes # just the 'relationships'\n  has_many :favorited_by, through: :favorite_recipes, source: :user # the actual users favoriting a recipe\nend\n</code></pre>\n\n<p><strong>My recipecontroller.rb:</strong></p>\n\n<pre><code>def show\n    @review = Review.new\n    @recipe = Recipe.find(params[:id])\n    @user = User.find(@recipe.user_id)\n    @full_name = @recipe.user.first_name + \" \" + @recipe.user.last_name\n    # @reviews = @recipe.reviews.page(params[:page]).order('created_at DESC')\n  end\n\n  # Add and remove favorite recipes\n  # for current_user\n  def favorite\n    type = params[:type]\n    if type == \"favorite\"\n      current_user.favorites &lt;&lt; @recipe\n      redirect_to :back, notice: 'You favorited #{@recipe.name}'\n\n    elsif type == \"unfavorite\"\n      current_user.favorites.delete(@recipe)\n      redirect_to :back, notice: 'Unfavorited #{@recipe.name}'\n\n    else\n      # Type missing, nothing happens\n      redirect_to :back, notice: 'Nothing happened.'\n    end\n  end\n</code></pre>\n\n<p><strong>Routes:</strong></p>\n\n<pre><code>resources :recipes, only: [:index, :show] do\n    put :favorite, on: :member\nend\n</code></pre>\n\n<p><strong>My view: app/views/recipes/show.html.erb</strong> </p>\n\n<pre><code>  &lt;% if current_user.favorites.exists?(id: @recipe.id) %&gt;\n    &lt;%= link_to favorite_recipe_path(@recipe, type: \"unfavorite\"), method: :put do %&gt;\n      &lt;ul class=\"list-inline product-controls\"&gt;\n        &lt;li&gt;&lt;i class=\"fa fa-heart\"&gt;&lt;/i&gt;&lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;% end %&gt;\n  &lt;% else %&gt;\n    &lt;%= link_to favorite_recipe_path(@recipe, type: \"favorite\"), method: :put do %&gt;\n      &lt;ul class=\"list-inline product-controls\"&gt;\n        &lt;li&gt;&lt;i class=\"fa fa-heart\"&gt;&lt;/i&gt;&lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;% end %&gt;\n &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "jekyll", "github-pages", "jekyll-extensions"], "answers": [{"comments": [{"owner": {"reputation": 15303, "user_id": 211672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQwB.jpg?s=128&g=1", "display_name": "C. Augusto Proiete", "link": "https://stackoverflow.com/users/211672/c-augusto-proiete"}, "edited": false, "score": 0, "creation_date": 1464224962, "post_id": 37435431, "comment_id": 62401614, "body": "Direct link to the plugins supported by Github Pages: <a href=\"https://pages.github.com/versions/\" rel=\"nofollow noreferrer\">pages.github.com/versions</a>"}, {"owner": {"reputation": 18841, "user_id": 368070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5aefd3e85213e1c22ee31e4ce6123d40?s=128&d=identicon&r=PG", "display_name": "gideon", "link": "https://stackoverflow.com/users/368070/gideon"}, "edited": false, "score": 0, "creation_date": 1464245545, "post_id": 37435431, "comment_id": 62407620, "body": "Thanks very much for your reply. The <code>_site</code> folder is generated already but the <code>.gitignore</code> has it so I&#39;m guessing I&#39;ll remove it from there and just build and push it online."}], "tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": false, "score": 1, "last_activity_date": 1464244677, "last_edit_date": 1464244677, "creation_date": 1464174832, "answer_id": 37435431, "question_id": 37430548, "link": "https://stackoverflow.com/questions/37430548/jekyll-tag-plugin-works-offline-but-not-on-github-pages/37435431#37435431", "title": "jekyll tag plugin works offline but not on github pages", "body": "<p>Github pages only support selected plugins (<a href=\"https://help.github.com/articles/adding-jekyll-plugins-to-a-github-pages-site/\" rel=\"nofollow\">see documentation here</a>).</p>\n\n<p>If you want to use your plugin, you have to generate locally and to push the <code>_site</code> content online.</p>\n"}], "owner": {"reputation": 18841, "user_id": 368070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5aefd3e85213e1c22ee31e4ce6123d40?s=128&d=identicon&r=PG", "display_name": "gideon", "link": "https://stackoverflow.com/users/368070/gideon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464244677, "creation_date": 1464161517, "last_edit_date": 1495539846, "question_id": 37430548, "link": "https://stackoverflow.com/questions/37430548/jekyll-tag-plugin-works-offline-but-not-on-github-pages", "title": "jekyll tag plugin works offline but not on github pages", "body": "<p>There might seem to be other dupes like this, but <a href=\"https://stackoverflow.com/questions/14375331/jekyll-tag-gen-plugin-not-working\">this SO post</a> is the closest with a hacky solution.</p>\n\n<p>I got a theme that uses the tag plugin from here : <a href=\"http://charliepark.org/tags-in-jekyll/\" rel=\"nofollow noreferrer\">http://charliepark.org/tags-in-jekyll/</a> Here is <a href=\"https://github.com/gideondsouza/gideondsouza/tree/gh-pages\" rel=\"nofollow noreferrer\">my site repo on github</a>. It's hosted here : <a href=\"http://www.gideondsouza.com\" rel=\"nofollow noreferrer\">http://www.gideondsouza.com</a></p>\n\n<p>Tags <strong>don't work online</strong> but work offline. On my local machine I see a <code>_/site/tag/..</code> with folders for each tag. But this tag folder isn't generated on github? In fact I don't even see a <code>_site</code> folder, so maybe my understanding is off. Perhaps I need to install the github-pages gem?</p>\n\n<p>I could probably fix it like in the SO post mentioned earlier, but this is hacky, I will always have to remember to copy the generated tags folder into the root. </p>\n\n<p>Anything I'm missing? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 2, "last_activity_date": 1464163786, "creation_date": 1464163786, "answer_id": 37431301, "question_id": 37430156, "link": "https://stackoverflow.com/questions/37430156/how-to-capture-values-in-form-with-too-many-fields-48/37431301#37431301", "title": "how to capture values in form with too many fields (48)", "body": "<p>I recently had a similar situation while reproducing a government form.  I ended up with 43 checkboxes and 28 radio buttons.  It's actually not so bad.  I was able to supply the data embedded as a Javascript array on the page, and handled building the form in Javascript.  The page was far smaller and the Javascript/jQuery code was easier to deal with than the corresponding HTML would have been.  I saved the objects as JSON in a single database field; I didn't need to search on the values, so all I had to do was convert to/from JSON when I needed the button values.</p>\n"}], "owner": {"reputation": 2111, "user_id": 1846982, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9979071c5c3697ae9e8b8f50062a1782?s=128&d=identicon&r=PG&f=1", "display_name": "Bloomberg", "link": "https://stackoverflow.com/users/1846982/bloomberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464170843, "creation_date": 1464160314, "last_edit_date": 1464170843, "question_id": 37430156, "link": "https://stackoverflow.com/questions/37430156/how-to-capture-values-in-form-with-too-many-fields-48", "title": "how to capture values in form with too many fields (48)", "body": "<p>I have a form that needs to have 48 check boxes for coordinates; its like a matrix of 6*8 checkboxes.</p>\n\n<p>Then I have to submit these coordinates in a string \"coordinates_field\" in the database.</p>\n\n<p>The <code>coordinates_field</code> will have an array of coordinates like:</p>\n\n<pre><code>coordinates_field = [4-7,1-3,5-9] #48 coordinates\n</code></pre>\n\n<p>Should I create 48 <code>attr_accessors</code> and 48 checkboxes in the form, or is there another way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "owner": {"reputation": 51, "user_id": 6257847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad08fae4a5edd536fc73252143b916c2?s=128&d=identicon&r=PG&f=1", "display_name": "dmitriy_strukov", "link": "https://stackoverflow.com/users/6257847/dmitriy-strukov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1464157471, "creation_date": 1464157471, "question_id": 37429277, "link": "https://stackoverflow.com/questions/37429277/rails-gem-administrate-custom-values-in-fields", "title": "Rails gem administrate custom values in fields", "body": "<p>I using administrate gem and the other day collided with this problem.How i can do something like this in my dashboard? </p>\n\n<pre><code>resource.owner.first_name \n</code></pre>\n\n<p>Or how i can put in field custom value using resourse variable?\nIn this moment i already tried this code and it working but with search broken with this approach: </p>\n\n<pre><code>%td= resource.owner.email\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1464162300, "post_id": 37428924, "comment_id": 62365457, "body": "Where does the <code>f.input</code> method come from? It is not a Rails method. Do you use some form builder gem?"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4716545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452557b9a963c8c76e28011984631019?s=128&d=identicon&r=PG&f=1", "display_name": "Nageshwari P", "link": "https://stackoverflow.com/users/4716545/nageshwari-p"}, "edited": false, "score": 0, "creation_date": 1464161525, "post_id": 37430174, "comment_id": 62365058, "body": "I&#39;m getting same result no change"}, {"owner": {"reputation": 36, "user_id": 1593452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3f04bf98a96bb8364b25eb5da06158?s=128&d=identicon&r=PG", "display_name": "Narco", "link": "https://stackoverflow.com/users/1593452/narco"}, "reply_to_user": {"reputation": 37, "user_id": 4716545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452557b9a963c8c76e28011984631019?s=128&d=identicon&r=PG&f=1", "display_name": "Nageshwari P", "link": "https://stackoverflow.com/users/4716545/nageshwari-p"}, "edited": false, "score": 0, "creation_date": 1464166746, "post_id": 37430174, "comment_id": 62368141, "body": "Have u removed the outer &quot;f.input&quot; ?"}, {"owner": {"reputation": 37, "user_id": 4716545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452557b9a963c8c76e28011984631019?s=128&d=identicon&r=PG&f=1", "display_name": "Nageshwari P", "link": "https://stackoverflow.com/users/4716545/nageshwari-p"}, "edited": false, "score": 0, "creation_date": 1464181333, "post_id": 37430174, "comment_id": 62378598, "body": "Out put is coming like below  &lt;label for=&quot;property_space_amenities_2&quot;&gt;&lt;input type=&quot;checkbox&quot; value=&quot;2&quot; name=&quot;property[space_amenities][]&quot; id=&quot;property_space_amenities_2&quot;&gt;&lt;label class=&quot;collection_check_boxes&quot; for=&quot;property_space_amenities_2&quot;&gt;Internet connectivity&lt;/label&gt;&lt;/label&gt;"}, {"owner": {"reputation": 36, "user_id": 1593452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3f04bf98a96bb8364b25eb5da06158?s=128&d=identicon&r=PG", "display_name": "Narco", "link": "https://stackoverflow.com/users/1593452/narco"}, "reply_to_user": {"reputation": 37, "user_id": 4716545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452557b9a963c8c76e28011984631019?s=128&d=identicon&r=PG&f=1", "display_name": "Nageshwari P", "link": "https://stackoverflow.com/users/4716545/nageshwari-p"}, "edited": false, "score": 0, "creation_date": 1464233692, "post_id": 37430174, "comment_id": 62403544, "body": "Isn&#39;t this what you needed in your question ?"}, {"owner": {"reputation": 37, "user_id": 4716545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452557b9a963c8c76e28011984631019?s=128&d=identicon&r=PG&f=1", "display_name": "Nageshwari P", "link": "https://stackoverflow.com/users/4716545/nageshwari-p"}, "edited": false, "score": 0, "creation_date": 1464515480, "post_id": 37430174, "comment_id": 62510873, "body": "actually i need out put like  &lt;input type=&quot;checkbox&quot; value=&quot;2&quot; name=&quot;property[space_amenities][]&quot; id=&quot;property_space_amenities_2&quot;&gt;&lt;label class=&quot;collection_check_boxes&quot; for=&quot;property_space_amenities_2&quot;&gt;Internet connectivity&lt;/label&gt;"}, {"owner": {"reputation": 37, "user_id": 4716545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452557b9a963c8c76e28011984631019?s=128&d=identicon&r=PG&f=1", "display_name": "Nageshwari P", "link": "https://stackoverflow.com/users/4716545/nageshwari-p"}, "edited": false, "score": 0, "creation_date": 1464590538, "post_id": 37430174, "comment_id": 62531146, "body": "and one more thing check value is not getting check box but its working when im using f.association"}], "tags": [], "owner": {"reputation": 36, "user_id": 1593452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3f04bf98a96bb8364b25eb5da06158?s=128&d=identicon&r=PG", "display_name": "Narco", "link": "https://stackoverflow.com/users/1593452/narco"}, "is_accepted": true, "score": 1, "last_activity_date": 1464160354, "creation_date": 1464160354, "answer_id": 37430174, "question_id": 37428924, "link": "https://stackoverflow.com/questions/37428924/remove-outer-label-of-checkbox-in-ruby/37430174#37430174", "title": "remove outer label of checkbox in ruby", "body": "<p>According to <a href=\"http://apidock.com/rails/v4.2.1/ActionView/Helpers/FormOptionsHelper/collection_check_boxes\" rel=\"nofollow\">rails doc</a>, you can have separated label and checkbox by not using the \"do\" block.</p>\n\n<pre><code>&lt;%= f.collection_check_boxes :category_ids, Category.order(:name), :id, :name %&gt;\n</code></pre>\n\n<p>btw, this is only for rails >= 4.0.2, maybe you can remove your rails 3 tag.</p>\n"}], "owner": {"reputation": 37, "user_id": 4716545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452557b9a963c8c76e28011984631019?s=128&d=identicon&r=PG&f=1", "display_name": "Nageshwari P", "link": "https://stackoverflow.com/users/4716545/nageshwari-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 37430174, "answer_count": 1, "score": 0, "last_activity_date": 1464160354, "creation_date": 1464156122, "last_edit_date": 1464160354, "question_id": 37428924, "link": "https://stackoverflow.com/questions/37428924/remove-outer-label-of-checkbox-in-ruby", "title": "remove outer label of checkbox in ruby", "body": "<p>I'm using ruby on my project . I need custom style for check boxes.</p>\n\n<p>please find below code</p>\n\n<pre><code>&lt;%= f.input :category_ids, :as =&gt; :check_boxes do %&gt;\n  &lt;%= f.collection_check_boxes :category_ids, Category.order(:name), :id, :name do |b|\n    b.label { b.check_box + b.text }\n  end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Using above code Im getting out like </p>\n\n<pre><code>&lt;label for=\"property_space_amenities_space_amenities_2\"&gt;\n  &lt;input type=\"checkbox\" value=\"2\" name=\"property[space_amenities][space_amenities][]\" id=\"property_space_amenities_space_amenities_2\"&gt;Internet connectivity\n&lt;/label&gt;\n</code></pre>\n\n<p>form this im not able give custom style for this</p>\n\n<p>i want output like below</p>\n\n<pre><code>&lt;label class=\"control-label\" for=\"user_login\"&gt;Login&lt;/label&gt;\n&lt;input class=\"form-control\" id=\"user_login\" name=\"user[login]\" type=\"text\" /&gt;\n</code></pre>\n\n<p>Please help me in this</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 2, "creation_date": 1464156411, "post_id": 37428396, "comment_id": 62362291, "body": "Are you asking how to determine which column is which? I find it extremely unlikely anyone could do that - ask the creator of the data for some documentation"}, {"owner": {"reputation": 1656, "user_id": 6138119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzV7y.jpg?s=128&g=1", "display_name": "Pravesh Khatri", "link": "https://stackoverflow.com/users/6138119/pravesh-khatri"}, "edited": false, "score": 1, "creation_date": 1464158817, "post_id": 37428396, "comment_id": 62363511, "body": "you can define a array and push all the splited values inside that, for each row.  Now map according to the index values of array with your schema."}, {"owner": {"reputation": 391, "user_id": 3808898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54dc2278b6496a06a6be25b4c2e735ff?s=128&d=identicon&r=PG", "display_name": "VoidZero", "link": "https://stackoverflow.com/users/3808898/voidzero"}, "reply_to_user": {"reputation": 1656, "user_id": 6138119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzV7y.jpg?s=128&g=1", "display_name": "Pravesh Khatri", "link": "https://stackoverflow.com/users/6138119/pravesh-khatri"}, "edited": false, "score": 0, "creation_date": 1464245270, "post_id": 37428396, "comment_id": 62407470, "body": "thankx @PraveshKhatri I did exactly as you said and it worked thank you very much!"}, {"owner": {"reputation": 391, "user_id": 3808898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54dc2278b6496a06a6be25b4c2e735ff?s=128&d=identicon&r=PG", "display_name": "VoidZero", "link": "https://stackoverflow.com/users/3808898/voidzero"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1464245315, "post_id": 37428396, "comment_id": 62407488, "body": "@FrederickCheung my issue is resolved."}], "answers": [{"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 1, "last_activity_date": 1464159109, "creation_date": 1464159109, "answer_id": 37429775, "question_id": 37428396, "link": "https://stackoverflow.com/questions/37428396/how-to-save-data-from-a-file-which-doesnt-have-column-names/37429775#37429775", "title": "How to save data from a file which doesn&#39;t have column names?", "body": "<p>You know their sequence from the table definition, so you would refer to the column by the index number. If a row is stored in variable <code>row</code>, the <code>id</code> field would be <code>row[0]</code>.</p>\n\n<p>Of course this is not easy to read, and for better reading you could use constants:</p>\n\n<pre><code>ID = 0\n.....\nthis_rows_id = row[ID]\n</code></pre>\n\n<p>If you don't like the manual definition of the mapping between column numbers and constant names, but have access to the schema definition, you could parse it and generate a tiny Ruby file which you then <em><code>require</code></em> into your program. This might be handy in the initial phase of a project, where schema definitions are likely to change.</p>\n"}, {"tags": [], "owner": {"reputation": 1656, "user_id": 6138119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzV7y.jpg?s=128&g=1", "display_name": "Pravesh Khatri", "link": "https://stackoverflow.com/users/6138119/pravesh-khatri"}, "is_accepted": true, "score": 1, "last_activity_date": 1464246554, "creation_date": 1464246554, "answer_id": 37453876, "question_id": 37428396, "link": "https://stackoverflow.com/questions/37428396/how-to-save-data-from-a-file-which-doesnt-have-column-names/37453876#37453876", "title": "How to save data from a file which doesn&#39;t have column names?", "body": "<ol>\n<li><p>you can define a array </p></li>\n<li><p>push all the splited values inside that, for each row. </p></li>\n<li><p>Now map according to the index values of array with your schema.</p></li>\n</ol>\n"}], "owner": {"reputation": 391, "user_id": 3808898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54dc2278b6496a06a6be25b4c2e735ff?s=128&d=identicon&r=PG", "display_name": "VoidZero", "link": "https://stackoverflow.com/users/3808898/voidzero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 1, "accepted_answer_id": 37453876, "answer_count": 2, "score": 0, "last_activity_date": 1464246554, "creation_date": 1464153729, "question_id": 37428396, "link": "https://stackoverflow.com/questions/37428396/how-to-save-data-from-a-file-which-doesnt-have-column-names", "title": "How to save data from a file which doesn&#39;t have column names?", "body": "<p>I have table with following fields:</p>\n\n<pre><code># == Schema Information\n#\n# Table name: scheme_details\n#\n#  id               :integer          not null, primary key\n#  scheme_id        :integer          not null\n#  nav_date         :datetime\n#  nav_price        :float\n#  repurchase_price :float\n#  sale_price       :float\n#  closing_date     :datetime\n#  net_change       :float\n#  prev_nav         :float\n#  prev_nav_date    :datetime\n#  upd_flag         :string(1)\n#  created_at       :datetime         not null\n#  updated_at       :datetime         not null\n#  change           :float\n#\n</code></pre>\n\n<p>Now I am getting a data file with <code>ace</code> file extension from ftp server, which doesn't have column names.</p>\n\n<p>Following is sample data of file.</p>\n\n<pre><code>&lt;&lt;row&gt;&gt;1|5/24/2016 12:00:00 AM|1000.49|1000.49|1000.49||0|0|1000.49|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;2|5/24/2016 12:00:00 AM|2350.0193|2350.0193|2350.0193||0.0210084954593086|0.493599999999788|2349.5257|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;3|5/24/2016 12:00:00 AM|1005.4653|1005.4653|1005.4653||0.0210096133902824|0.211199999999963|1005.2541|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;4|5/24/2016 12:00:00 AM|1001.2549|1001.2549|1001.2549||0.0210080549857693|0.210300000000075|1001.0446|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;9|5/24/2016 12:00:00 AM|1005.428|1005.428|1005.428||0.0208611403115122|0.209699999999998|1005.2183|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;10|5/24/2016 12:00:00 AM|2226.3533|2226.3533|2226.3533||0.0208725620468016|0.464600000000246|2225.8887|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;11|5/24/2016 12:00:00 AM|1001.2478|1001.2478|1001.2478||0.0208683199024505|0.208899999999971|1001.0389|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;14|5/24/2016 12:00:00 AM|14.369|14.369|14.369||-0.567434779600033|-0.0820000000000007|14.451|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;15|5/24/2016 12:00:00 AM|33.37|33.37|33.37||-0.566150178784281|-0.190000000000005|33.56|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;22|5/24/2016 12:00:00 AM|15.87|15.87|15.87||-0.501567398119123|-0.0800000000000001|15.95|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;23|5/24/2016 12:00:00 AM|64.37|64.37|64.37||-0.540791100123601|-0.349999999999994|64.72|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;115|5/24/2016 12:00:00 AM|10.1146|10.1146|10.1146||-0.00197730058924853|-0.00020000000000131|10.1148|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;116|5/24/2016 12:00:00 AM|25.8745|25.8745|25.8745||-0.00193236714975395|-0.000499999999998835|25.875|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;117|5/24/2016 12:00:00 AM|10.3195|10.3195|10.3195||-0.00193804083451587|-0.000199999999999534|10.3197|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;118|5/24/2016 12:00:00 AM|10.317|10.317|10.317||-0.0019385104485668|-0.000199999999999534|10.3172|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;119|5/24/2016 12:00:00 AM|10.0863|10.0863|10.0863||-0.00198284836166692|-0.000199999999999534|10.0865|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;160|5/24/2016 12:00:00 AM|10.0729|10.0729|10.0729||0.0148936592727928|0.00150000000000006|10.0714|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;165|5/24/2016 12:00:00 AM|17.3863|17.3863|17.3863||0.0155318806231003|0.00269999999999726|17.3836|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt;\n&lt;&lt;row&gt;&gt;166|5/24/2016 12:00:00 AM|10.0315|10.0315|10.0315||0|0|10.0315|5/23/2016 12:00:00 AM|A&lt;&lt;/row&gt;&gt; \n</code></pre>\n\n<p>I am able to parse the file and remove the unwanted data like <code>row</code> and split data using <code>|</code>.</p>\n\n<p>Problem I am facing is how do I map the data to column names as the sample data file doesn't have column names and just data.</p>\n\n<p>One solution I had was adding a dummy column names row on the top of the file through which I would be able to map the data.</p>\n\n<p>But I am not sure if it is the right way to do so.</p>\n\n<p>Any help or suggestion on how to solve this problem would be helpful.</p>\n\n<p>Thank You!</p>\n\n<p>Note: If you need to see the code which I have made I will be happy to provide.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "google-cloud-storage", "carrierwave"], "answers": [{"comments": [{"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1464154783, "post_id": 37428146, "comment_id": 62361677, "body": "Ive added <code>config.fog_public = true</code> to the carrierwave.rb file (You can see what the file no looks like from my update). I also added in the filename method. but it end up saving the file as<code>&#39;8-{file.name}.png</code> in the db"}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1464156562, "post_id": 37428146, "comment_id": 62362360, "body": "The update gives the error <code>undefined method &#39;name&#39; for #&lt;CarrierWave::SanitizedFile:0x007fd1d4a95530&gt;</code> on <code>file.name</code> (by the way I appreciate the help)"}, {"owner": {"reputation": 5958, "user_id": 1789479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/WlgWK.jpg?s=128&g=1", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/1789479/hieu-pham"}, "reply_to_user": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1464164958, "post_id": 37428146, "comment_id": 62367007, "body": "Hmm sorry, I should use origin filename instead"}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1464166333, "post_id": 37428146, "comment_id": 62367880, "body": "Ok I see whats happening here, its doesnt save the full url of the file in the db, it saves it as the same name as what it is saved as in the db, I can then grab it by having something like ` <code>&#39;https:&#47;&#47;storage.googleapis.com&#47;bucket&#47;check-item-value-imag&zwnj;&#8203;es&#47;&#39; + &#39;check_item_value.image&#39;</code> right? or is their a built in way carrierwave has to get it. And <code>#{file.extension}</code> isnt needed it ends up saving as <code>9-default.png.png</code> with it and <code>9-default.png</code> without it, remove this from your answer and i&#39;ll mark it as correct."}], "tags": [], "owner": {"reputation": 5958, "user_id": 1789479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/WlgWK.jpg?s=128&g=1", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/1789479/hieu-pham"}, "is_accepted": false, "score": 1, "last_activity_date": 1464164941, "last_edit_date": 1464164941, "creation_date": 1464152382, "answer_id": 37428146, "question_id": 37428051, "link": "https://stackoverflow.com/questions/37428051/using-carrierwave-to-upload-images-to-google-cloud-storage-the-file-name-ends-u/37428146#37428146", "title": "Using carrierwave to upload images to google cloud storage, the file name ends up being saved and not the public link to the image in the bucket", "body": "<p>To set the link public, please check this config this in your config file:</p>\n\n<pre><code># You may set it false now\nconfig.fog_public = true\n</code></pre>\n\n<p>For filename you may overwrite in your <code>CheckItemValueImageUploader</code>, here is an example:</p>\n\n<pre><code>class CheckItemValueImageUploader &lt; CarrierWave::Uploader::Base\n  def filename\n    \"#{model.id}-#{original_filename}.#{file.extension}\" if original_filename.present?\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1341, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1464164941, "creation_date": 1464151738, "last_edit_date": 1464154484, "question_id": 37428051, "link": "https://stackoverflow.com/questions/37428051/using-carrierwave-to-upload-images-to-google-cloud-storage-the-file-name-ends-u", "title": "Using carrierwave to upload images to google cloud storage, the file name ends up being saved and not the public link to the image in the bucket", "body": "<p>I'm trying to implement image upload to google cloud storage from my rails 4.2 app using the carrierwave gem. Whenever I go to upload the image it is uploaded to the bucket fine but its saved in the db as the original image name e.g. <code>image.png</code>, not as the google cloud storage public link for the image e.g. <code>https://storage.googleapis.com/project/bucket/image.png</code></p>\n\n<p>Not too sure what is needed to be done from here to get it saving the public link from the bucket and not just the file name.</p>\n\n<p>carrierwave.rb file</p>\n\n<pre><code>CarrierWave.configure do |config|\n  config.fog_credentials = {\n    provider:                         'Google',\n    google_storage_access_key_id:     'key',\n    google_storage_secret_access_key: 'secret key'\n  }\n  config.fog_directory = 'bucket-name'\nend\n</code></pre>\n\n<p>uploaders/check_item_value_image_uploader.rb</p>\n\n<pre><code>class CheckItemValueImageUploader &lt; CarrierWave::Uploader::Base\n\n  # Include RMagick or MiniMagick support:\n  # include CarrierWave::RMagick\n  # include CarrierWave::MiniMagick\n\n  # Choose what kind of storage to use for this uploader:\n  #storage :file\n   storage :fog\n\n  # Override the directory where uploaded files will be stored.\n  # This is a sensible default for uploaders that are meant to be mounted:\n  def store_dir\n    \"check-item-value-images/#{model.id}\"\n  end\n\n  # Add a white list of extensions which are allowed to be uploaded.\n  # For images you might use something like this:\n   def extension_white_list\n     %w(jpg jpeg gif png)\n   end\n\nend\n</code></pre>\n\n<p>related gems</p>\n\n<pre><code>gem 'gcloud'\ngem \"fog\"\ngem 'google-api-client', '~&gt; 0.8.6'\ngem \"mime-types\"\n</code></pre>\n\n<p>check_category_item_value model</p>\n\n<pre><code>mount_uploader :value, CheckItemValueImageUploader\n</code></pre>\n\n<p>check_category_item_value update method</p>\n\n<pre><code>if @check_category_item_value.save \n   flash[:success] = \"Successfully updated\"\n   redirect_to category_items_edit_path(@guide, @category, @category_item)\nelse\n   render 'category_items/edit'\nend\n</code></pre>\n\n<p>edit form</p>\n\n<pre><code> &lt;%= form_for(@check_category_item_value) do |f| %&gt;\n   &lt;%= f.file_field :value, :value =&gt; item_key.value, accept: \"image/jpeg, image/jpg, image/gif, image/png\" %&gt;\n   &lt;%= f.submit \"Submit\" %&gt;&lt;hr&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>The forms works fine but the value saved is the original image name not the google cloud storage public link for the image.</p>\n\n<p>I used the <a href=\"https://github.com/carrierwaveuploader/carrierwave\" rel=\"nofollow\">carrierwave docs</a>, <a href=\"http://www.tesseractapps.com/2016/carrierwave-uploads-google-cloud-storage/\" rel=\"nofollow\">this post</a>, and <a href=\"https://www.youtube.com/watch?v=olPk_uHgRyw\" rel=\"nofollow\">this video</a> by google cloud platform to get what I have now. What am I missing?</p>\n\n<p><strong>update</strong></p>\n\n<p>adding <code>config.fog_public = true</code> does nothing</p>\n\n<pre><code>CarrierWave.configure do |config|\n  config.fog_credentials = {\n    provider:                         'Google',\n    google_storage_access_key_id:     'key',\n    google_storage_secret_access_key: 'secret key'\n  }\n  config.fog_public = true\n  config.fog_directory = 'bucket-name'\nend\n</code></pre>\n"}, {"tags": ["c++", "ruby", "swig"], "answers": [{"tags": [], "owner": {"reputation": 700, "user_id": 5668464, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/caaa9a33119f603eebf2ace9844c61c2?s=128&d=identicon&r=PG&f=1", "display_name": "ArafatK", "link": "https://stackoverflow.com/users/5668464/arafatk"}, "is_accepted": true, "score": 2, "last_activity_date": 1464167612, "creation_date": 1464167612, "answer_id": 37432607, "question_id": 37427975, "link": "https://stackoverflow.com/questions/37427975/how-to-use-swig-for-stl-maps/37432607#37432607", "title": "How to Use SWIG for STL Maps?", "body": "<p>Use this in interface file</p>\n\n<pre><code>%include &lt;std_map.i&gt;\nnamespace std {\n   %template(Imap) map&lt;swig::GC_VALUE, swig::GC_VALUE&gt;;\n}\n</code></pre>\n"}], "owner": {"reputation": 700, "user_id": 5668464, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/caaa9a33119f603eebf2ace9844c61c2?s=128&d=identicon&r=PG&f=1", "display_name": "ArafatK", "link": "https://stackoverflow.com/users/5668464/arafatk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 37432607, "answer_count": 1, "score": 2, "last_activity_date": 1464167612, "creation_date": 1464151301, "question_id": 37427975, "link": "https://stackoverflow.com/questions/37427975/how-to-use-swig-for-stl-maps", "title": "How to Use SWIG for STL Maps?", "body": "<p>I am using SWIG with ruby. We can use SWIG to generate wrappers for Map using</p>\n\n<pre><code>%include &lt;std_map.i&gt;\n%template(IntMap)  std::map&lt;int,int&gt;; \n</code></pre>\n\n<p>This in the interface file. \nExample of usage </p>\n\n<pre><code>2.2.1 :001 &gt; a = Example::IntMap.new\n=&gt; std::map,std::allocator&lt; std::pair&lt; int const,int &gt; &gt; &gt; {}\n2.2.1 :002 &gt; a[1] = 2\n=&gt; 2\n2.2.1 :003 &gt; a[6] = -12\n=&gt; -12\n2.2.1 :004 &gt; a[4] = 92\n=&gt; 92\n2.2.1 :005 &gt; a\n=&gt; std::map,std::allocator&lt; std::pair&lt; int const,int &gt; &gt; &gt; {1=&gt;2,4=&gt;92,6=&gt;-12}\n</code></pre>\n\n<p>Is there a way to define data type directly from ruby so that \nthe type of the key and the value associated are defined from ruby ?\nFor example </p>\n\n<pre><code>2.2.1 :002 &gt; b[\"asr\"] = 2\n=&gt; 2\n2.2.1 :003 &gt; b[\"tee\"] = -12\n=&gt; -12\n2.2.1 :004 &gt; b[\"wetwe\"] = 92\n</code></pre>\n"}, {"tags": ["ruby", "tdd"], "comments": [{"owner": {"reputation": 4918, "user_id": 1631106, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42cac823ac4fa7a9c9e91599a0ff528f?s=128&d=identicon&r=PG", "display_name": "ivan", "link": "https://stackoverflow.com/users/1631106/ivan"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1464148893, "post_id": 37427318, "comment_id": 62359856, "body": "@sawa My question is about an aspect of the design that the tests are driving."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1464154041, "post_id": 37427318, "comment_id": 62361369, "body": "Can you use default values for parameter?  That may help to avoid <code>nil</code> getting passed to method"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1464154649, "post_id": 37427318, "comment_id": 62361625, "body": "If you have many similar defensive code snippets, maybe you have missed the <b>refactor</b> part of TDD."}, {"owner": {"reputation": 4918, "user_id": 1631106, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42cac823ac4fa7a9c9e91599a0ff528f?s=128&d=identicon&r=PG", "display_name": "ivan", "link": "https://stackoverflow.com/users/1631106/ivan"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1464180444, "post_id": 37427318, "comment_id": 62377838, "body": "@WandMaker A default parameter value would come into play if the caller omitted the argument entirely, but I&#39;m thinking about the case where a nil is passed explicitly, in which case the default would be overridden."}], "answers": [{"tags": [], "owner": {"reputation": 3746, "user_id": 4453716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ERLKD.jpg?s=128&g=1", "display_name": "Barnaby Golden", "link": "https://stackoverflow.com/users/4453716/barnaby-golden"}, "is_accepted": false, "score": 0, "last_activity_date": 1464172890, "creation_date": 1464172890, "answer_id": 37434694, "question_id": 37427318, "link": "https://stackoverflow.com/questions/37427318/tdd-ruby-handling-nil-arguments/37434694#37434694", "title": "TDD, Ruby, &amp; handling nil arguments", "body": "<p>I believe the decision on how defensive to write your code depends on how <em>reasonable</em> the circumstances of the error condition are.</p>\n\n<p>The question you ask yourself is how reasonable is it to assume that this condition will occur in the normal course of events. </p>\n\n<p>If in the normal course of events it is reasonable that an error may occur then it makes sense to code accordingly.</p>\n\n<p>If in the normal course of events the error condition <em>should not</em> happen, then I would not put in a check condition. If the error condition occurs it is better to have the application throws a fatal error and stop working as there is something fundamentally wrong.</p>\n\n<p>As an example, say you have a method that is accepting as a parameter a country name selected from a pre-defined list in a form. It is reasonable for the method to assume that it will get a valid country name. There is no reason for the method to do sanity checking on this (such as checking for a string that is not a valid country name).</p>\n\n<p>In another example, say you have a method that is dealing with parameters from a database source that is known to be of poor data quality. In this situation it is reasonable to check to ensure that the parameters are what the method expects.</p>\n\n<p>Writing code that is overly defensive may actually result in the hiding of some issues. I have seen code written that checks for completely unreasonable things, logs the issue and then carries on running. These applications typically have unpredictable behaviour as they are concealing coding problems that really should be dealt with.</p>\n"}], "owner": {"reputation": 4918, "user_id": 1631106, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42cac823ac4fa7a9c9e91599a0ff528f?s=128&d=identicon&r=PG", "display_name": "ivan", "link": "https://stackoverflow.com/users/1631106/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1464172890, "creation_date": 1464147070, "question_id": 37427318, "link": "https://stackoverflow.com/questions/37427318/tdd-ruby-handling-nil-arguments", "title": "TDD, Ruby, &amp; handling nil arguments", "body": "<p>Part of the practice of TDD involves easing into the core functionality from the edges, and starting by testing the simplest, degenerate case. I'm working in Ruby, so I very often find myself writing a test like this:</p>\n\n<pre><code>it \"does the thing if given nil\" do\n  expect { my_method(nil) }.to do_the_thing\nend\n</code></pre>\n\n<p>and production code like this:</p>\n\n<pre><code>def my_method(arg)\n  if arg.nil?\n    do_the_thing\n    return\n  end\n\n  do_the_real_thing\nend\n</code></pre>\n\n<p>I don't like the idea of littering every public method with such guard-clauses, but given the dynamic nature of Ruby, where do you draw the line? When is it reasonable to put the responsibility for passing valid arguments on the calling code?</p>\n\n<p>I'd like to write focused, expressive methods that aren't littered with overly-defensive code, but I also want to build a robust and correct system.</p>\n\n<p>The practice of easing in from the edge-cases appeals to me, but I'm often unsure how this particular edge-case should be handled.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "whenever"], "comments": [{"owner": {"reputation": 901, "user_id": 3872380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wy14q.jpg?s=128&g=1", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/3872380/mukesh"}, "edited": false, "score": 0, "creation_date": 1464154502, "post_id": 37427123, "comment_id": 62361563, "body": "look on this link.. may help you <a href=\"http://stackoverflow.com/questions/4602418/rails-whenever-gem-dynamic-values/31075237#31075237\">stackoverflow.com/questions/4602418</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "is_accepted": false, "score": 0, "last_activity_date": 1464146052, "creation_date": 1464146052, "answer_id": 37427166, "question_id": 37427123, "link": "https://stackoverflow.com/questions/37427123/running-a-cron-job-at-different-times-for-each-job/37427166#37427166", "title": "Running a cron job at different times for each job", "body": "<p>Cronjob, every minute, checking for those that need transaction to dead.</p>\n\n<pre><code>Product.turn_dead.update_all status: :dead \n\n\n\n#product.rb\nscope :live, -&gt; {where status: :live}\nscope :out_of_time, -&gt; {where \"end_time &lt;= ?\", Time.now}\nscope :turn_dead, -&gt;{ live.out_of_time }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6379022, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207592436543601/picture?type=large", "display_name": "Collin Thomas", "link": "https://stackoverflow.com/users/6379022/collin-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464162780, "creation_date": 1464145688, "last_edit_date": 1464162780, "question_id": 37427123, "link": "https://stackoverflow.com/questions/37427123/running-a-cron-job-at-different-times-for-each-job", "title": "Running a cron job at different times for each job", "body": "<p>I am building an application in rails that allows users to post products for sale for a set duration of time. Each product has a different 'end_time' in which I want to run a method that sets that updates the product status to 'dead'. <br>\nI've been reading up on the Wheneverize gem, however as far as I can tell I would use it for doing a recurring task every minute, hour, day, etc...\nAny ideas on how I would go about to running a cron job that would run at each product's specific 'end_time'? <br></p>\n\n<p>for example something along the lines of:</p>\n\n<pre><code>live_products = Product.where('status = ?', 'live')\n\nlive_products.each do |product|\n at: product.end_time do\n   product.status = 'dead'\n   product.save\n end\nend \n</code></pre>\n"}, {"tags": ["ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4471249, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/06f6917eb487f073a0ef25fa2b64206b?s=128&d=identicon&r=PG&f=1", "display_name": "JCD", "link": "https://stackoverflow.com/users/4471249/jcd"}, "edited": false, "score": 0, "creation_date": 1464226521, "post_id": 37428237, "comment_id": 62401927, "body": "Awesome I appreciate the help and all the info. I&#39;m new to Ruby if its not obvious. Thanks again"}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 1, "last_activity_date": 1464208560, "last_edit_date": 1464208560, "creation_date": 1464152860, "answer_id": 37428237, "question_id": 37426871, "link": "https://stackoverflow.com/questions/37426871/accessing-and-checking-a-value-within-a-hash/37428237#37428237", "title": "Accessing and checking a value within a hash", "body": "<blockquote>\n  <p>The question I have is how do I access the hash value of pin for a\n  user inputed account number(key) and check if it matches the user\n  entry? The hash contains the value under :pin but I am having the\n  hardest time trying access and compare it.</p>\n</blockquote>\n\n<p>Like this:</p>\n\n<pre><code>@accounts[int_account_number].pin\n</code></pre>\n\n<p>The fragment:</p>\n\n<pre><code>@accounts[int_account_number]\n</code></pre>\n\n<p>is an AccountMaker instance.  And, an AccountMaker instance has an getter method named <code>pin()</code> (as well as a setter method named <code>pin=()</code>):</p>\n\n<pre><code>                                          Declared right there!\n                                                   |\nclass AccountMaker                                 V\n  attr_accessor :account_number, :name, :balance, :pin  \n</code></pre>\n\n<p>But, your code needs to be reorganized--starting with the indenting: ruby indenting is 2 spaces--not 1 space, not 4 spaces.  You can indent ruby code 7 spaces if you want--but don't expect anyone to help you when you post on a public forum.  So, your first task is to re-indent all your code to 2 spaces.</p>\n\n<p>Next, get rid of your nested class: move it to the top level and rename it Account.  Class names are not verbs--they are nouns.  Methods are the verbs.</p>\n\n<p>Then, get rid of all your nested def's--nesting a def most likely doesn't work like you think it does.  Rather, all the def's should be defined at the top level of the Bank class.  </p>\n"}], "owner": {"reputation": 69, "user_id": 4471249, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/06f6917eb487f073a0ef25fa2b64206b?s=128&d=identicon&r=PG&f=1", "display_name": "JCD", "link": "https://stackoverflow.com/users/4471249/jcd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 37428237, "answer_count": 1, "score": 0, "last_activity_date": 1464208560, "creation_date": 1464143777, "question_id": 37426871, "link": "https://stackoverflow.com/questions/37426871/accessing-and-checking-a-value-within-a-hash", "title": "Accessing and checking a value within a hash", "body": "<p>Looked all around and could not find a proper answer to the problem I am facing. I want to access and check for a value within a hash. The code is below...</p>\n\n<pre><code>class Bank\n\n    class AccountMaker\n        attr_accessor :account_number, :name, :balance, :pin\n\n        def initialize(account_number, name, balance, pin)\n            @account_number = account_number\n            @name = name\n            @balance = balance\n            @pin = pin\n        end\n    end\n\n    attr_accessor :int_account_number, :int_account_pin\n\n    def initialize\n        @accounts = {}\n        @int_account_number = int_account_number\n        @int_account_pin = int_account_pin\n    end\n\n    def add_account(account_number, name, balance, pin)\n        @accounts[account_number] = AccountMaker.new(account_number, name, balance, pin)\n    end\n\n    def login_screen\n\n        def account_number_login\n            puts \"Please enter your 7 digit account number.\"\n            account_number = gets.chomp\n            int_account_number = account_number.to_i\n\n            if @accounts.has_key?(int_account_number) and (/^\\w{7}$/ === account_number)\n                thank_you_msg()\n                pin_login(int_account_number)\n            else\n                error_msg()\n                account_number_login()\n            end\n        end\n\n        def pin_login(int_account_number)\n            puts \"Please enter your 4 digit pin.\"\n            account_pin = gets.chomp\n            int_account_pin = account_pin.to_i #May have to use this later\n\n            #puts int_account_number, int_account_pin #Used to check if variables come through\n\n            if (What Should go here?) == int_account_pin #(/^\\d{4}$/ === account_pin) \n                thank_you_msg\n                main_menu()\n            else\n                error_msg()\n                pin_login(int_account_number)\n            end\n        end\n\n        account_number_login()\n    end\n\n    def main_menu    \n    end\n\nend\n</code></pre>\n\n<p>The question I have is how do I access the hash value of pin for a user inputed account number(key) and check if it matches the user entry? The hash contains the value under :pin but I am having the hardest time trying access and compare it.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 41, "user_id": 6251353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7614ec4a4db92b380dbc48b06a46da?s=128&d=identicon&r=PG&f=1", "display_name": "David Haley", "link": "https://stackoverflow.com/users/6251353/david-haley"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464147141, "post_id": 37426753, "comment_id": 62359408, "body": "Thank you Cary! I edited the question. Best regards."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1464149042, "post_id": 37426753, "comment_id": 62359887, "body": "To put the result in the form you&#39;ve now specified you can just tack <code>join(&#39; &#39;)</code> onto the second of @Yu&#39;s suggestions: <code>numbers.split.minmax_by(&amp;:to_i).join(&#39; &#39;) #=&gt; &quot;-214 542&quot;</code>, though I think leaving it as an array would probably be more useful."}], "answers": [{"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 2, "last_activity_date": 1464145393, "last_edit_date": 1464145393, "creation_date": 1464143292, "answer_id": 37426818, "question_id": 37426753, "link": "https://stackoverflow.com/questions/37426753/high-low-numbers-from-a-string-ruby/37426818#37426818", "title": "High &amp; Low Numbers From A String (Ruby)", "body": "<p>Using sort would be inefficient for big arrays. Instead, use <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-minmax\" rel=\"nofollow\"><code>Enumerable#minmax</code></a>:</p>\n\n<pre><code>numbers.split.map(&amp;:to_i).minmax\n# =&gt; [-214, 542]\n</code></pre>\n\n<p>Or use <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-minmax_by\" rel=\"nofollow\"><code>Enumerable#minmax_by</code></a> if you like result to remain strings:</p>\n\n<pre><code>numbers.split.minmax_by(&amp;:to_i)\n# =&gt; [\"-214\", \"542\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 6251353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7614ec4a4db92b380dbc48b06a46da?s=128&d=identicon&r=PG&f=1", "display_name": "David Haley", "link": "https://stackoverflow.com/users/6251353/david-haley"}, "edited": false, "score": 0, "creation_date": 1464146807, "post_id": 37426822, "comment_id": 62359334, "body": "This was very helpful. Thank you!"}], "tags": [], "owner": {"reputation": 2651, "user_id": 2246024, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/OpzyW.jpg?s=128&g=1", "display_name": "Simon Fromme", "link": "https://stackoverflow.com/users/2246024/simon-fromme"}, "is_accepted": true, "score": 3, "last_activity_date": 1604534330, "last_edit_date": 1604534330, "creation_date": 1464143309, "answer_id": 37426822, "question_id": 37426753, "link": "https://stackoverflow.com/questions/37426753/high-low-numbers-from-a-string-ruby/37426822#37426822", "title": "High &amp; Low Numbers From A String (Ruby)", "body": "<p>When omitting the <code>return</code> statement, a function will only return the result of the last expression within its body. To return both as an Array write:</p>\n<pre><code>def high_and_low(numbers)\n    numberArray = numbers.split(/\\s/).map(&amp;:to_i).sort\n    return numberArray[0], numberArray[-1]\nend\n\nputs high_and_low(&quot;4 5 29 54 4 0 -214 542 -64 1 -3 6 -6&quot;)\n# =&gt; [-214, 542]\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6251353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7614ec4a4db92b380dbc48b06a46da?s=128&d=identicon&r=PG&f=1", "display_name": "David Haley", "link": "https://stackoverflow.com/users/6251353/david-haley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1051, "favorite_count": 0, "accepted_answer_id": 37426822, "answer_count": 2, "score": 3, "last_activity_date": 1604534330, "creation_date": 1464142610, "last_edit_date": 1464147097, "question_id": 37426753, "link": "https://stackoverflow.com/questions/37426753/high-low-numbers-from-a-string-ruby", "title": "High &amp; Low Numbers From A String (Ruby)", "body": "<p>Good evening,</p>\n\n<p>I'm trying to solve a problem on Codewars:</p>\n\n<p><em>In this little assignment you are given a string of space separated numbers, and have to return the highest and lowest number.</em></p>\n\n<p><em>Example:</em></p>\n\n<pre><code>high_and_low(\"1 2 3 4 5\")  # return \"5 1\"\nhigh_and_low(\"1 2 -3 4 5\") # return \"5 -3\"\nhigh_and_low(\"1 9 3 4 -5\") # return \"9 -5\"\n</code></pre>\n\n<p><em>Notes:</em></p>\n\n<p><em>All numbers are valid Int32, no need to validate them.</em>\n<em>There will always be at least one number in the input string.</em>\n<em>Output string must be two numbers separated by a single space, and highest number is first.</em></p>\n\n<p>I came up with the following solution however I cannot figure out why the method is only returning \"542\" and not \"-214 542\". I also tried using #at, #shift and #pop, with the same result.</p>\n\n<p>Is there something I am missing? I hope someone can point me in the right direction. I would like to understand why this is happening.</p>\n\n<pre><code>def high_and_low(numbers)\n    numberArray = numbers.split(/\\s/).map(&amp;:to_i).sort\n    numberArray[-1]\n    numberArray[0]\nend\n\nhigh_and_low(\"4 5 29 54 4 0 -214 542 -64 1 -3 6 -6\")\n</code></pre>\n\n<p><em>EDIT</em></p>\n\n<p>I also tried this and receive a failed test \"Nil\":</p>\n\n<pre><code>def high_and_low(numbers)\n  numberArray = numbers.split(/\\s/).map(&amp;:to_i).sort\n  puts \"#{numberArray[-1]}\" + \" \" + \"#{numberArray[0]}\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-cloud-storage", "carrierwave", "fog"], "comments": [{"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1464140910, "post_id": 37426539, "comment_id": 62358113, "body": "You need to tell the gem that SSL is active."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1464141559, "post_id": 37426539, "comment_id": 62358250, "body": "This might also help you <a href=\"https://github.com/carrierwaveuploader/carrierwave/issues/667\" rel=\"nofollow noreferrer\">github.com/carrierwaveuploader/carrierwave/issues/667</a>"}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "reply_to_user": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 1, "creation_date": 1464142134, "post_id": 37426539, "comment_id": 62358351, "body": "@13aal I created another bucket without dots in its name and that worked. Post this as the answer and ill give it to you. thanks"}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1464183871, "post_id": 37426539, "comment_id": 62380595, "body": "there ya go man, thank you."}], "answers": [{"tags": [], "owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "is_accepted": true, "score": 0, "last_activity_date": 1505014571, "last_edit_date": 1505014571, "creation_date": 1464183853, "answer_id": 37439079, "question_id": 37426539, "link": "https://stackoverflow.com/questions/37426539/hostname-project-name-appspot-com-storage-googleapis-com-does-not-match-the-se/37439079#37439079", "title": "hostname &quot;project-name.appspot.com.storage.googleapis.com&quot; does not match the server certificate (OpenSSL::SSL::SSLError) - using fog and carriewave", "body": "<p>The issue is while using carrierwave you have dots (<code>.</code>) in your bucket.</p>\n\n<p>Create another bucket without dots and it will work.</p>\n\n<p>Here's some <a href=\"https://github.com/carrierwaveuploader/carrierwave\" rel=\"nofollow noreferrer\">examples</a>, seems your not the only one with this <a href=\"https://github.com/carrierwaveuploader/carrierwave/issues/667\" rel=\"nofollow noreferrer\">problem</a></p>\n"}], "owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 37439079, "answer_count": 1, "score": 1, "last_activity_date": 1505014571, "creation_date": 1464140798, "question_id": 37426539, "link": "https://stackoverflow.com/questions/37426539/hostname-project-name-appspot-com-storage-googleapis-com-does-not-match-the-se", "title": "hostname &quot;project-name.appspot.com.storage.googleapis.com&quot; does not match the server certificate (OpenSSL::SSL::SSLError) - using fog and carriewave", "body": "<p>I'm trying to implement image upload to google cloud storage from my rails 4.2 app using the carrierwave gem. Whenever I go to upload the image I get the error <code>hostname \"project-name.appspot.com.storage.googleapis.com\" does not match the server certificate (OpenSSL::SSL::SSLError)</code>. </p>\n\n<p>I cant see what I need to do from here.</p>\n\n<p>carrierwave.rb file</p>\n\n<pre><code>CarrierWave.configure do |config|\n  config.fog_credentials = {\n    provider:                         'Google',\n    google_storage_access_key_id:     'key',\n    google_storage_secret_access_key: 'secret key'\n  }\n  config.fog_directory = 'project-name.appspot.com'\nend\n</code></pre>\n\n<p>uploaders/check_item_value_image_uploader.rb</p>\n\n<pre><code>class CheckItemValueImageUploader &lt; CarrierWave::Uploader::Base\n\n  # Include RMagick or MiniMagick support:\n  # include CarrierWave::RMagick\n  # include CarrierWave::MiniMagick\n\n  # Choose what kind of storage to use for this uploader:\n  #storage :file\n   storage :fog\n\n  # Override the directory where uploaded files will be stored.\n  # This is a sensible default for uploaders that are meant to be mounted:\n  def store_dir\n    \"check-item-value-images/#{model.id}\"\n  end\n\n  # Add a white list of extensions which are allowed to be uploaded.\n  # For images you might use something like this:\n   def extension_white_list\n     %w(jpg jpeg gif png)\n   end\n\nend\n</code></pre>\n\n<p>related gems</p>\n\n<pre><code>gem 'gcloud'\ngem \"fog\"\ngem 'google-api-client', '~&gt; 0.8.6'\ngem \"mime-types\"\n</code></pre>\n\n<p>check_category_item_value model</p>\n\n<pre><code>mount_uploader :value, CheckItemValueImageUploader\n</code></pre>\n\n<p>check_category_item_value update method</p>\n\n<pre><code>if @check_category_item_value.save \n   flash[:success] = \"Successfully updated\"\n   redirect_to category_items_edit_path(@guide, @category, @category_item)\nelse\n   render 'category_items/edit'\nend\n</code></pre>\n\n<p>edit form</p>\n\n<pre><code> &lt;%= form_for(@check_category_item_value) do |f| %&gt;\n   &lt;%= f.file_field :value, :value =&gt; item_key.value, accept: \"image/jpeg, image/jpg, image/gif, image/png\" %&gt;\n   &lt;%= f.submit \"Submit\" %&gt;&lt;hr&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>The forms worked fine before I implemented carrierwave for the image upload (would just save a string of the file name and not upload the image). Now that I've tried to implement carrierwave for image uploads I get the error above.</p>\n\n<p>I used the <a href=\"https://github.com/carrierwaveuploader/carrierwave\" rel=\"nofollow\">carrierwave docs</a>, <a href=\"http://www.tesseractapps.com/2016/carrierwave-uploads-google-cloud-storage/\" rel=\"nofollow\">this post</a>, and <a href=\"https://www.youtube.com/watch?v=olPk_uHgRyw\" rel=\"nofollow\">this video</a> by google cloud platform to get what I have now. What am I missing that is causing this error?</p>\n"}, {"tags": ["ruby", "curses"], "comments": [{"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1464141705, "post_id": 37426502, "comment_id": 62358279, "body": "Have you tried <code>$stdin</code>?"}, {"owner": {"reputation": 11, "user_id": 1135180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a54c90f19e87dbb47dada45d733dde6?s=128&d=identicon&r=PG", "display_name": "rbutler", "link": "https://stackoverflow.com/users/1135180/rbutler"}, "reply_to_user": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1464193959, "post_id": 37426502, "comment_id": 62388295, "body": "Yes, I can  <code>p $stdin.read</code>, and get the input.  The issue is whether <code>$stdin.tty?</code> is <code>true</code> or <code>false</code>.  If I run <code>ls | ruby script.rb</code>, <code>$stdin.tty?</code> is <code>false</code>, and <code>Curses</code> fails to render anything.  If I run <code>ruby script.rb</code>, it will run fine.  <code>$stdin.read</code> will wait for me to <code>ctrl-d</code> and then work normally, because <code>$stdin.tty?</code> is true.  Hope that clarifies the issue a bit."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1464196639, "post_id": 37426502, "comment_id": 62389759, "body": "It kind of does, so I have a question, are you actually checking if the <code>stdin</code> returns true, or are you just attempting to run it through the prompt instead of making an <code>if&#47;else</code> to check <code>true&#47;false</code>?"}, {"owner": {"reputation": 11, "user_id": 1135180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a54c90f19e87dbb47dada45d733dde6?s=128&d=identicon&r=PG", "display_name": "rbutler", "link": "https://stackoverflow.com/users/1135180/rbutler"}, "reply_to_user": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1464204667, "post_id": 37426502, "comment_id": 62394254, "body": "So, if I add the following lines before the <code>Curses.init_screen</code>:      <code>p $stdin.tty?</code>     <code>p $stdin.read</code>  If I run my script like <code>echo &quot;hi&quot; | ruby script.rb</code>, it produces:      <code>false</code>     <code>&quot;hi\\n&quot;</code>  If I run it with just <code>ruby script.rb</code>, it waits for input from stdin with a terminating <code>Ctrl-d</code>, then produces <code>true</code> <code>&quot;hi\\n&quot;</code>"}, {"owner": {"reputation": 11, "user_id": 1135180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a54c90f19e87dbb47dada45d733dde6?s=128&d=identicon&r=PG", "display_name": "rbutler", "link": "https://stackoverflow.com/users/1135180/rbutler"}, "reply_to_user": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1464205001, "post_id": 37426502, "comment_id": 62394434, "body": "<a href=\"https://gist.github.com/r-butler/a8694e3b06cce76c244eb687fee9df9d\" rel=\"nofollow noreferrer\">See this gist</a>"}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1464217065, "post_id": 37426502, "comment_id": 62399742, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/16613684/stdin-gets-is-not-working-when-execute-ruby-script-via-pipeline\">$stdin.gets is not working when execute ruby script via pipeline</a>"}], "owner": {"reputation": 11, "user_id": 1135180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a54c90f19e87dbb47dada45d733dde6?s=128&d=identicon&r=PG", "display_name": "rbutler", "link": "https://stackoverflow.com/users/1135180/rbutler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464140503, "creation_date": 1464140503, "last_edit_date": 1495542157, "question_id": 37426502, "link": "https://stackoverflow.com/questions/37426502/ruby-stdin-and-curses", "title": "Ruby, STDIN, and Curses", "body": "<p>I'm trying to take input from <code>STDIN</code> in the same script I'm using <code>curses</code>.  It causes ruby to exit immediately and never draw anything with curses on the page.</p>\n\n<p>The following works fine:</p>\n\n<pre><code>require 'curses'\n\nCurses.init_screen\n\nbegin\n  Curses.setpos(6, 3)  # column 6, row 3\n  Curses.addstr(\"Hello\")\n  Curses.getch  # Wait until user presses some key.\nensure\n  Curses.close_screen\nend\n</code></pre>\n\n<p>But if I run it with, for example <code>ls | example.rb</code>, it fails immediately, even if I consume STDIN with <code>STDIN.read</code>.</p>\n\n<p>I have tried stripping <code>STDIN.read</code>, and tried solutions from <a href=\"https://stackoverflow.com/questions/24623290/how-to-test-filter-like-ruby-scripts-with-pry\">How to test filter-like Ruby scripts with Pry?</a> with no luck.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1464140716, "post_id": 37426278, "comment_id": 62358076, "body": "Hi - this is an interesting question... but unfortunately it&#39;s not really a good fit for Stack Overflow. It will no doubt spark an interesting and possibly lively discussion... and here we prefer questions that have a single &quot;right answer&quot;. The reason being that in the past we allowed discussion topics, and some of them led to flame wars that tore apart our community... so now we just don&#39;t allow them anymore. :( it&#39;s a great question... just not the best for here."}, {"owner": {"reputation": 11463, "user_id": 1009332, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/134ceddfdac5709794fc23957211ebdb?s=128&d=identicon&r=PG", "display_name": "justingordon", "link": "https://stackoverflow.com/users/1009332/justingordon"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1464335716, "post_id": 37426278, "comment_id": 62453216, "body": "Why is there no right or wrong answer for this one? Either it&#39;s recommended or not."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1464572144, "post_id": 37426278, "comment_id": 62526525, "body": "Some people will recommend it... some people will not recommend it... different people have different ideas about whether something is recommended or not... so there is no one right answer because it&#39;s based on different people&#39;s opinions."}], "owner": {"reputation": 11463, "user_id": 1009332, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/134ceddfdac5709794fc23957211ebdb?s=128&d=identicon&r=PG", "display_name": "justingordon", "link": "https://stackoverflow.com/users/1009332/justingordon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464139714, "creation_date": 1464138641, "last_edit_date": 1464139714, "question_id": 37426278, "link": "https://stackoverflow.com/questions/37426278/rails-engine-gem-should-or-should-not-explicitly-load-helpers", "title": "Rails engine gem should or should not explicitly load helpers?", "body": "<p>I'm wondering if a Rails engine gem, such as <a href=\"https://github.com/shakacode/react_on_rails/\" rel=\"nofollow\">React on Rails</a>, should be using this line of code to explicitly load the helper:</p>\n\n<pre><code>ActiveSupport.on_load(:action_view) do \n  include ReactOnRailsHelper \nend\n</code></pre>\n\n<p>This is definitely not needed for normal Rails application use of the gem. However, some users have reported this as an issue.</p>\n\n<p>Any opinions?</p>\n\n<p>Here's the specific issue reported:</p>\n\n<p><a href=\"https://github.com/shakacode/react_on_rails/issues/385#issuecomment-209964034\" rel=\"nofollow\">https://github.com/shakacode/react_on_rails/issues/385#issuecomment-209964034</a></p>\n\n<p>This is how the react-rails gem does it (not a Rails Engine):</p>\n\n<p><a href=\"https://github.com/reactjs/react-rails/blob/master/lib/react/rails/railtie.rb#L42-L44\" rel=\"nofollow\">https://github.com/reactjs/react-rails/blob/master/lib/react/rails/railtie.rb#L42-L44</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sockets", "tcp", "websocket"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1465936644, "post_id": 37425852, "comment_id": 63107052, "body": "Please notice: <code>print</code> uses <code>write</code> internally, but doesn&#39;t check the result - this means that <b>there is no guarantee all the data will be sent</b>. Each more on socket programming and consider using <code>write</code> and <code>select</code> to emulate a blocking write that will block until all the data was sent, or use an evented/threaded solution to continue writing any data that wasn&#39;t written the first time."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1471334820, "post_id": 37425852, "comment_id": 65293146, "body": "How is this websocket related? (I will remind you that websocket is the name of a communication protocol, it isn&#39;t a name for tcp/ip sockets) ... please remove the <code>websocket</code> tag if it isn&#39;t relevant."}], "answers": [{"comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1465936364, "post_id": 37436543, "comment_id": 63106926, "body": "Consider minimizing the <code>print</code> calls, to unify write operations and maximize the use of the system&#39;s <code>write</code> buffer... also <code>print</code> uses <code>write</code> internally, (<code>rb_io_write</code> calls <code>write</code>), but doesn&#39;t check the result - this means that <b>some of the data might not get written due to system socket buffer limits</b>. Use <code>write</code> and <code>select</code> to emulate a blocking write that will block until all the data was sent, or use an evented/threaded solution to continue writing any data that wasn&#39;t written the first time."}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1464202774, "last_edit_date": 1464202774, "creation_date": 1464177805, "answer_id": 37436543, "question_id": 37425852, "link": "https://stackoverflow.com/questions/37425852/simple-ruby-tcp-request-doesnt-hit-the-server/37436543#37436543", "title": "Simple ruby TCP request doesn&#39;t hit the server", "body": "<p>You need to make sure you are sending a valid HTTP request.</p>\n\n<ol>\n<li><p>You need a <code>Content-Length</code> header. This means you need to assemble the body in advance so you can determine its length for the header, then send the body. If you get this wrong the server could end up blocking trying to read more input that doesn\u2019t come.</p></li>\n<li><p>Your multipart boundaries need fixing. They should start with <code>--</code>, then the token from the header: <code>--AaB03x</code>. The final one should end with <code>--</code> too: <code>--AaB03x--</code>. Make sure there\u2019s no trailing whitespace in the header as well, that can cause issues.</p></li>\n</ol>\n\n<p>Some other things that probably won\u2019t prevent the request being parsed but you should tidy up:</p>\n\n<ol>\n<li><p>Newlines in the headers should be <code>\\r\\n</code> not just <code>\\n</code>.</p></li>\n<li><p>Header lines shouldn\u2019t have any whitespace before them.</p></li>\n</ol>\n\n\n\n<pre><code>require 'socket'   \n\nhost = \"myapp.herokuapp.com\"\nport = 80\n\nclient = TCPSocket.open(host, port)\n\n# Write out the headers.\nclient.print(\"POST /api/binary HTTP/1.1\\r\\n\")\nclient.print(\"Host: myapp.herokuapp.com\\r\\n\")\nclient.print (\"Accept: */* \\r\\n\")\n# Note: no trailing whitespace.\nclient.print (\"Content-Type: multipart/form-data;boundary=AaB03x\\r\\n\")\n\n# Assemble the body.\n# Note \\r\\n for all line endings, body doesn't start with newline.\n# Boundary marker starts with '--'.\nbody = \"--AaB03x\\r\\n\"\nbody &lt;&lt; \"Content-Disposition: form-data; name='datafile'; filename='cam.jpg'\\r\\n\"\n# Header starts at left of line, no leading whitespace.\nbody &lt;&lt; \"Content-Type: image/jpeg\\r\\n\"\nbody &lt;&lt; \"\\r\\n\"\ndata = File.open(\"./pic.jpg\", \"rb\") {|io| io.read}\nbody &lt;&lt; data\nbody &lt;&lt; \"\\r\\n\"\n# Final boundary marker has trailing '--'\nbody &lt;&lt; \"--AaB03x--\\r\\n\"\n\n# Now we can write the Content-Length header, since\n# we now know the size of the body.\nclient.print \"Content-Length: #{body.bytesize}\\r\\n\"\n# Blank line.\nclient.print \"\\r\\n\"\n# Finally write out the body.\nclient.print body\n\n# In reality you would want to parse the response from\n# the server before closing the socket.\nclient.close\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 4095988, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2fd8409ac1016c94294bfe616542d4c7?s=128&d=identicon&r=PG&f=1", "display_name": "sparks", "link": "https://stackoverflow.com/users/4095988/sparks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 37436543, "answer_count": 1, "score": 0, "last_activity_date": 1464202774, "creation_date": 1464134747, "question_id": 37425852, "link": "https://stackoverflow.com/questions/37425852/simple-ruby-tcp-request-doesnt-hit-the-server", "title": "Simple ruby TCP request doesn&#39;t hit the server", "body": "<p>I have a simple ruby script to upload file to the server/web app through TCP connection but it doesn't work.When i run the script nothing happens on the web app/server side.The server works fine as i have tried to upload file with CURL and it did upload.Take a look at my code below and let me know what am i doing wrong.I am using ruby 1.9.2-p290.Thank you in advance.</p>\n\n<pre><code>require 'socket'   \n\nhost = \"myapp.herokuapp.com\"\nport = 80\n\nclient = TCPSocket.open(host, port)\n\nclient.print(\"POST /api/binary HTTP/1.1\\r\\n\")\nclient.print(\"Host: myapp.herokuapp.com\\r\\n\")\nclient.print (\"Accept: */* \\r\\n\")\nclient.print (\"Content-Type: multipart/form-data;boundary=AaB03x \\r\\n\")\n\n\nclient.print(\"\\n\" + \"AaB03x\"+ \"\\n\" \"Content-Disposition: form-data; name='datafile'; filename='cam.jpg' \\n Content-Type: image/jpeg \\r\\n\")\nclient.print (\"\\r\\n\")\ndata = File.open(\"./pic.jpg\", \"rb\") {|io| io.read}\nclient.print (data)\nclient.print (\"\\r\\n\") \nclient.print(\"boundary=AaB03x\\r\\n\")\n\nclient.close\n</code></pre>\n\n<p>IRB console</p>\n\n<pre><code>&gt;require 'socket'\n =&gt; true \n&gt;  client = TCPSocket.open(\"myapp.herokuapp.com\", 80)\n =&gt; #&lt;TCPSocket:fd 3&gt;\n&gt; client.print(\"GET /api/users HTTP/1.1\")\n  =&gt; nil \n&gt; client.print(\"POST /api/binary HTTP/1.1\")\n  =&gt; nil \n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 292, "user_id": 1487479, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1aa899e9772cdd977b9d0f60e1ba9daf?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1487479/nathan"}, "edited": false, "score": 0, "creation_date": 1464158472, "post_id": 37427286, "comment_id": 62363311, "body": "I would want the name of in the caller (In this case &#39;action&#39; not &#39;input&#39;)  I would prefer lighter weight solution then creating an class for each of my parameters; in this case I have ~6 parms I would like to validate.... creating new classes I think would distract from the main intent of code.  - Thanks for the ideas"}], "tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": false, "score": 0, "last_activity_date": 1464146852, "creation_date": 1464146852, "answer_id": 37427286, "question_id": 37425757, "link": "https://stackoverflow.com/questions/37425757/accessing-variable-name/37427286#37427286", "title": "Accessing variable name", "body": "<p>I don't know of a way to get the name of a local variable, and even if you could,  which name would you want?  The name of the parameter as define on the method definition?  the name of the variable in the caller?</p>\n\n<p>I don't think your \"work-around\" is that horrible,  but I could suggest a couple of slight variations that might read a little better.</p>\n\n<p>Also I am not sure if your intent is to actually pass in the list of valid values at the call site, or if you might have, say a hash of valid values that you might use the passed in type to look up the valid values from.</p>\n\n<pre><code>def valid_one_of_type type, input:, valid_values:\n  return true if valid_values.include?(input)\n  raise \"#{input} was not a valid value for #{type}\" \nend\n\nmy_action = \"bob\"\n\nvalid_one_of_type :action , input: my_action, valid_values: ['ADD', 'MOVE', 'DELETE'] \n\ndef valid_one_of_type type, input, valid_values\n  return true if valid_values.include?(input)\n  raise \"#{input} was not a valid value for #{type}\" \nend\n\nmy_action = \"bob\"\n\nvalid_one_of_type :action , my_action, ['ADD', 'MOVE', 'DELETE'] \n</code></pre>\n\n<p>Another option would be to wrap your actions in a class and do the validations on creation:</p>\n\n<pre><code>class Action \n  VALID_ACTIONS = ['ADD', 'MOVE', 'DELETE']\n  def initialize action\n    unless VALID_ACTIONS.include? action \n      raise \"#{action} is not a valid value for #{self.class.name}\"\n    end\n  end\nend\n\nmy_action = Action.new \"bob\"\n</code></pre>\n"}], "owner": {"reputation": 292, "user_id": 1487479, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1aa899e9772cdd977b9d0f60e1ba9daf?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1487479/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464146852, "creation_date": 1464134040, "question_id": 37425757, "link": "https://stackoverflow.com/questions/37425757/accessing-variable-name", "title": "Accessing variable name", "body": "<p>I trying to some parameter validation outside of Rails. </p>\n\n<pre><code>def create_statement(action, ...)\n  valid_one_of(action, ['ADD', 'MOVE', 'DELETE'])\n  ...\nend\n</code></pre>\n\n<p>Validation Method:</p>\n\n<pre><code>def valid_one_of(input, valid_values)\n  return true if valid_values.include?(input)\n  raise \"#{input} was not a valid value for #{input.var_name}\" \nend\n</code></pre>\n\n<p>Sample Call:</p>\n\n<pre><code>create_statement('Bob')\n</code></pre>\n\n<p>So the output would be: <pre>Bob was not valid value for action</pre></p>\n\n<p>The problem how do i get <strong>input.var_name</strong> ?</p>\n\n<hr>\n\n<p>I for a workaround I could pass</p>\n\n<pre><code>valid_one_of(action, ['ADD', 'MOVE', 'DELETE'], 'action')\n</code></pre>\n\n<p>(and use 3rd parm for my output) but this doesn't seem feels bit redundant.  </p>\n\n<p>If its not possible to access variable name is there a more DRY coding style than this workaround?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6378639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TKhXGFBF-mM/AAAAAAAAAAI/AAAAAAAAFPM/QN4YmBfYktY/photo.jpg?sz=128", "display_name": "jedgil", "link": "https://stackoverflow.com/users/6378639/jedgil"}, "edited": false, "score": 0, "creation_date": 1464134953, "post_id": 37425792, "comment_id": 62356807, "body": "ah, thanks. I switched from local to global variables because when I encased the loop in method &quot;num_a&quot;, the overall code stopped working (I call $a later on for the sum). maybe I don&#39;t need to though?"}, {"owner": {"reputation": 2569, "user_id": 514040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98bb1ee1a1f3d1297acf493776066086?s=128&d=identicon&r=PG", "display_name": "neuronaut", "link": "https://stackoverflow.com/users/514040/neuronaut"}, "reply_to_user": {"reputation": 3, "user_id": 6378639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TKhXGFBF-mM/AAAAAAAAAAI/AAAAAAAAFPM/QN4YmBfYktY/photo.jpg?sz=128", "display_name": "jedgil", "link": "https://stackoverflow.com/users/6378639/jedgil"}, "edited": false, "score": 0, "creation_date": 1464135272, "post_id": 37425792, "comment_id": 62356895, "body": "@jedgil Right, you shouldn&#39;t need to. Just assign the result of <code>num_a</code> to a variable where you need it, e.g. <code>value = num_a</code> and then use <code>value</code> as needed after that."}, {"owner": {"reputation": 3, "user_id": 6378639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TKhXGFBF-mM/AAAAAAAAAAI/AAAAAAAAFPM/QN4YmBfYktY/photo.jpg?sz=128", "display_name": "jedgil", "link": "https://stackoverflow.com/users/6378639/jedgil"}, "edited": false, "score": 0, "creation_date": 1464135430, "post_id": 37425792, "comment_id": 62356931, "body": "doh! makes perfect sense. I was using a hammer for a scalpel. thanks @neuronaut"}], "tags": [], "owner": {"reputation": 2569, "user_id": 514040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98bb1ee1a1f3d1297acf493776066086?s=128&d=identicon&r=PG", "display_name": "neuronaut", "link": "https://stackoverflow.com/users/514040/neuronaut"}, "is_accepted": true, "score": 0, "last_activity_date": 1464134313, "creation_date": 1464134313, "answer_id": 37425792, "question_id": 37425730, "link": "https://stackoverflow.com/questions/37425730/re-try-logic-in-a-simple-loop/37425792#37425792", "title": "re-try logic in a simple loop", "body": "<p>You could restructure the loop so that the prompt and call to <code>gets</code> are both inside it:</p>\n\n<pre><code>def num_a\n  # start with a number that doesn't meet the condition\n  a = 50\n\n  # check if the number meets the condition yet\n  until a &lt; 50\n    # ask the user to enter a number\n    print \"Pick a number from 1 to 50: \"\n    a = Integer(gets.chomp)\n    # ask to try again if the number isn't under 50\n    puts \"Um, try again please.\" unless a &lt; 50\n  end\n\n  # return the entered value to the caller\n  a\nend\n</code></pre>\n\n<p>Also, as I've shown in the example, I would recommend avoiding the use of global variables (<code>$a</code> in this case).</p>\n"}], "owner": {"reputation": 3, "user_id": 6378639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TKhXGFBF-mM/AAAAAAAAAAI/AAAAAAAAFPM/QN4YmBfYktY/photo.jpg?sz=128", "display_name": "jedgil", "link": "https://stackoverflow.com/users/6378639/jedgil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 37425792, "answer_count": 1, "score": 0, "last_activity_date": 1464142339, "creation_date": 1464133849, "last_edit_date": 1464142339, "question_id": 37425730, "link": "https://stackoverflow.com/questions/37425730/re-try-logic-in-a-simple-loop", "title": "re-try logic in a simple loop", "body": "<p>I'm trying to set bounds for an array that will later be printed in the console and summed. The lower bound ($a) should be less than 50 and I wrote this code to evaluate for that, but I want it to re-prompt for a number if a higher number is typed. So far, Google and experimentation have failed me.</p>\n\n<pre><code>def num_a\n  print \"Pick a number from 1 to 50: \"\n  $a = Integer(gets.chomp)\n    until $a &lt; 50\n      puts \"Um, try again please.\"\n  # need something here to prompt for another response\n  # until $a is less than 50\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 4925, "user_id": 1770246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f81463fa8b438fed5d8bdd6b3d60635b?s=128&d=identicon&r=PG", "display_name": "sschale", "link": "https://stackoverflow.com/users/1770246/sschale"}, "edited": false, "score": 0, "creation_date": 1464310202, "post_id": 37425442, "comment_id": 62444800, "body": "fixed minor code issue"}], "answers": [{"tags": [], "owner": {"reputation": 127, "user_id": 4355939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-V5DNtWBl6GM/AAAAAAAAAAI/AAAAAAAAAIE/l33mBQ7uPEk/photo.jpg?sz=128", "display_name": "Brian Lau", "link": "https://stackoverflow.com/users/4355939/brian-lau"}, "is_accepted": false, "score": 0, "last_activity_date": 1464153207, "creation_date": 1464153207, "answer_id": 37428309, "question_id": 37425442, "link": "https://stackoverflow.com/questions/37425442/cassandra-error-when-running-rspec/37428309#37428309", "title": "Cassandra error when running rspec", "body": "<p>You have to make sure in your config/cequel.yml that it contains a test database like so. </p>\n\n<pre><code>development:\n  host: '127.0.0.1'\n  port: 9042\n  keyspace: fieldfacts_discovery\n  max_retries: 3\n  retry_delay: 0.5\n  replication:\n    class: SimpleStrategy\n    replication_factor: 1\n\ntest:\n  host: '127.0.0.1'\n  port: 9042\n  keyspace: fieldfacts_test\n\nuat:\n  host: '10.0.1.228'\n  port: 9042\n  keyspace: fieldfacts_uat\n  max_retries: 3\n  retry_delay: 0.5\n  newrelic: false\n  replication:\n    class: SimpleStrategy\n    replication_factor: 1\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 4355939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-V5DNtWBl6GM/AAAAAAAAAAI/AAAAAAAAAIE/l33mBQ7uPEk/photo.jpg?sz=128", "display_name": "Brian Lau", "link": "https://stackoverflow.com/users/4355939/brian-lau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464310202, "creation_date": 1464131993, "last_edit_date": 1464310202, "question_id": 37425442, "link": "https://stackoverflow.com/questions/37425442/cassandra-error-when-running-rspec", "title": "Cassandra error when running rspec", "body": "<pre><code>blau08@BLAU08:~/Documents/Ruby/fieldfacts_api$ rspec\n/home/blau08/.rvm/gems/ruby-2.1.2/gems/cequel-1.5.0/lib/cequel/record/railtie.rb:56:in `configuration': undefined method `deep_symbolize_keys' for nil:NilClass (NoMethodError)\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/cequel-1.5.0/lib/cequel/record/railtie.rb:18:in `block in &lt;class:Railtie&gt;'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/railties-4.1.4/lib/rails/initializable.rb:30:in `instance_exec'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/railties-4.1.4/lib/rails/initializable.rb:30:in `run'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/railties-4.1.4/lib/rails/initializable.rb:55:in `block in run_initializers'\nfrom /home/blau08/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/tsort.rb:226:in `block in tsort_each'\nfrom /home/blau08/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/tsort.rb:348:in `block (2 levels) in each_strongly_connected_component'\nfrom /home/blau08/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/tsort.rb:427:in `each_strongly_connected_component_from'\nfrom /home/blau08/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/tsort.rb:347:in `block in each_strongly_connected_component'\nfrom /home/blau08/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/tsort.rb:345:in `each'\nfrom /home/blau08/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/tsort.rb:345:in `call'\nfrom /home/blau08/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/tsort.rb:345:in `each_strongly_connected_component'\nfrom /home/blau08/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/tsort.rb:224:in `tsort_each'\nfrom /home/blau08/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/tsort.rb:205:in `tsort_each'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/railties-4.1.4/lib/rails/initializable.rb:54:in `run_initializers'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/railties-4.1.4/lib/rails/application.rb:300:in `initialize!'\nfrom /home/blau08/Documents/Ruby/fieldfacts_api/config/environment.rb:5:in `&lt;top (required)&gt;'\nfrom /home/blau08/Documents/Ruby/fieldfacts_api/spec/rails_helper.rb:3:in `require'\nfrom /home/blau08/Documents/Ruby/fieldfacts_api/spec/rails_helper.rb:3:in `&lt;top (required)&gt;'\nfrom /home/blau08/Documents/Ruby/fieldfacts_api/spec/controllers/topic_posts_controller_spec.rb:1:in `require'\nfrom /home/blau08/Documents/Ruby/fieldfacts_api/spec/controllers/topic_posts_controller_spec.rb:1:in `&lt;top (required)&gt;'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/rspec-core-3.4.4/lib/rspec/core/configuration.rb:1361:in `load'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/rspec-core-3.4.4/lib/rspec/core/configuration.rb:1361:in `block in load_spec_files'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/rspec-core-3.4.4/lib/rspec/core/configuration.rb:1359:in `each'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/rspec-core-3.4.4/lib/rspec/core/configuration.rb:1359:in `load_spec_files'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/rspec-core-3.4.4/lib/rspec/core/runner.rb:106:in `setup'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/rspec-core-3.4.4/lib/rspec/core/runner.rb:92:in `run'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/rspec-core-3.4.4/lib/rspec/core/runner.rb:78:in `run'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/rspec-core-3.4.4/lib/rspec/core/runner.rb:45:in `invoke'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/gems/rspec-core-3.4.4/exe/rspec:4:in `&lt;top (required)&gt;'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/bin/rspec:23:in `load'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/bin/rspec:23:in `&lt;main&gt;'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/bin/ruby_executable_hooks:15:in `eval'\nfrom /home/blau08/.rvm/gems/ruby-2.1.2/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>SPEC - in case people wanted to see.</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe TopicPost, :type =&gt; :model do\n  it \"checks if twitter handle exists\" do\n     professional_safety = TopicPost.new(topic_id: \"professional_safety\", pub_date: \"5a612420-21e2-11e6-bdf4-0800200c9a66\",     author_id: 1, id: 1, message: \"test\", twitter_handle: \"blau\")\n    professional_safety.save()\n    expect(TopicPost.all.count).to eq(0)\n  end\nend\n</code></pre>\n\n<p>I really have no clue how to figure this out. I'm not sure if it's cequel, rspec, or a gem issue. Can anyone help me understand this?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "angularjs", "ruby", "authentication", "devise"], "owner": {"reputation": 55, "user_id": 6317678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/930f77a08c1c8f608d03b192674c1fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/6317678/shashank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550656124, "creation_date": 1464131679, "last_edit_date": 1495541308, "question_id": 37425396, "link": "https://stackoverflow.com/questions/37425396/unable-to-integrate-lockable-for-number-of-failed-attempts-into-rails-app", "title": "Unable to integrate lockable for number of failed attempts into Rails app", "body": "<p>I am new to rails+angular. For my app, I want to lock out user after 5 failed password attempts. I decided to follow this:\n<a href=\"https://stackoverflow.com/questions/11910176/how-to-make-devise-lockable-with-number-of-failed-attempts\">How to make Devise lockable with number of failed attempts</a></p>\n\n<p>But when I try logging in after 5 failed attempts, it lets me through</p>\n\n<p>I added the :locked module to my user.rb (shown below) file so that the locked feature appears in devise.rb</p>\n\n<p>User.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  include TokenAuthenticatable\n\n  TYPE = { \n    :admin =&gt; 1,\n    :member =&gt; 2\n  }  \n\n  devise :database_authenticatable, :registerable, :recoverable, \n         :rememberable, :trackable, :validatable, :token_authenticatable,\n         :timeoutable, :lockable ##this was added\n\n  has_and_belongs_to_many :clients\nend\n</code></pre>\n\n<p>In my migrations then, I un-commented out the lockable part of it :</p>\n\n<pre><code>class DeviseCreateUsers &lt; ActiveRecord::Migration\n  def change\n    create_table(:users) do |t|\n      t.string :first_name\n      t.string :last_name\n      t.string :type\n\n      ## Database authenticatable\n      t.string :email,              :null =&gt; false, :default =&gt; \"\"\n      t.string :encrypted_password, :null =&gt; false, :default =&gt; \"\"\n\n      ## Recoverable\n      t.string   :reset_password_token\n      t.datetime :reset_password_sent_at\n\n      ## Rememberable\n      t.datetime :remember_created_at\n\n      ## Trackable\n      t.integer  :sign_in_count, :default =&gt; 0\n      t.datetime :current_sign_in_at\n      t.datetime :last_sign_in_at\n      t.string   :current_sign_in_ip\n      t.string   :last_sign_in_ip\n\n      ## Confirmable\n      # t.string   :confirmation_token\n      # t.datetime :confirmed_at\n      # t.datetime :confirmation_sent_at\n      # t.string   :unconfirmed_email # Only if using reconfirmable\n\n      ## Lockable\n       t.integer  :failed_attempts, :default =&gt; 0 # Only if lock strategy is :failed_attempts\n       t.string   :unlock_token # Only if unlock strategy is :email or :both\n       t.datetime :locked_at\n\n      ## Token authenticatable\n      # t.string :authentication_token\n\n\n      t.timestamps\n    end\n\n    add_index :users, :email,                :unique =&gt; true\n    add_index :users, :reset_password_token, :unique =&gt; true\n    # add_index :users, :confirmation_token,   :unique =&gt; true\n    # add_index :users, :unlock_token,         :unique =&gt; true\n    # add_index :users, :authentication_token, :unique =&gt; true\n      end\n    end\n</code></pre>\n\n<p>To troubleshoot this, I also tried adding <code>:locked, :failed_attempts =&gt; 5</code>and uncommented out all the lockable features in initializer/devise. I am unsure on how to proceed - help would be appreciated.</p>\n"}, {"tags": ["arrays", "ruby", "recursion"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464132503, "post_id": 37425244, "comment_id": 62356140, "body": "Please edit to state in words what <code>continent_size world, x, y</code> is intended to return. A small example would be helpful."}], "answers": [{"tags": [], "owner": {"reputation": 1040, "user_id": 1462708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e0bb2baca0f20237b85bf00d1968b?s=128&d=identicon&r=PG", "display_name": "Stephen Crosby", "link": "https://stackoverflow.com/users/1462708/stephen-crosby"}, "is_accepted": true, "score": 1, "last_activity_date": 1464131918, "last_edit_date": 1464131918, "creation_date": 1464130915, "answer_id": 37425281, "question_id": 37425244, "link": "https://stackoverflow.com/questions/37425244/how-do-i-account-for-an-array-that-doesnt-exist/37425281#37425281", "title": "How do I account for an array that doesn&#39;t exist?", "body": "<p>How about some guard clauses at the top of your method like:</p>\n\n<pre><code># make sure we don't attempt to index into an array at less than zero\nreturn 0 if x &lt; 0\nreturn 0 if y &lt; 0\n\n# make sure there is a value in the requested slot\nreturn 0 unless world[x]\nreturn 0 unless world[x][y]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1464140677, "last_edit_date": 1464140677, "creation_date": 1464134212, "answer_id": 37425778, "question_id": 37425244, "link": "https://stackoverflow.com/questions/37425244/how-do-i-account-for-an-array-that-doesnt-exist/37425778#37425778", "title": "How do I account for an array that doesn&#39;t exist?", "body": "<pre><code>def continent_size(world, row, col)\n  rows = ([row-1, 0].max..[row+1, world.size-1].min).to_a\n  cols = ([col-1,0].max..[col+1, world.first.size-1].min).to_a\n  rows.product(cols).count { |r,c| world[r][c] == M }\nend\n\nworld.size.times { |r| world.first.size.times { |c|\n  puts \"[#{r},#{c}] -&gt; #{continent_size(world, r, c)}\" } }\n[0,0] -&gt; 1\n[0,1] -&gt; 2\n[0,2] -&gt; 3\n[0,3] -&gt; 2\n[0,4] -&gt; 1\n[0,5] -&gt; 0\n[1,0] -&gt; 1\n[1,1] -&gt; 3\n[1,2] -&gt; 5\n[1,3] -&gt; 4\n[1,4] -&gt; 2\n[1,5] -&gt; 0\n[2,0] -&gt; 1\n[2,1] -&gt; 3\n[2,2] -&gt; 5\n[2,3] -&gt; 4\n[2,4] -&gt; 3\n[2,5] -&gt; 1\n[3,0] -&gt; 0\n[3,1] -&gt; 1\n[3,2] -&gt; 2\n[3,3] -&gt; 2\n[3,4] -&gt; 2\n[3,5] -&gt; 1\n</code></pre>\n\n<p>For</p>\n\n<pre><code>row = 0\ncol = 3\n</code></pre>\n\n<p>the steps are as follows. (Note <code>world_size #=&gt; 4</code> and <code>world.first.size #=&gt; 6</code>.)</p>\n\n<pre><code>rows = ([row-1, 0].max..[row+1, world.size-1].min).to_a\n  #=&gt; ([-1,0].max..[1,3].min).to_a\n  #=&gt; (0..1).to_a\n  #=&gt; [0, 1]\ncols = ([col-1,0].max..[col+1,world[0].size-1].min).to_a\n  #=&gt; ([2,0].max..[4,5].min).to_a\n  #=&gt; (2..4).to_a\n  #=&gt; [2,3,4] \na = rows.product(cols)\n  #=&gt; [[0, 2], [0, 3], [0, 4], [1, 2], [1, 3], [1, 4]]\na.count { |r,c| world[r][c] == M }\n  #=&gt; 2\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 6347093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0612a36b1112172f49358d8601bd711d?s=128&d=identicon&r=PG&f=1", "display_name": "Zestyyy", "link": "https://stackoverflow.com/users/6347093/zestyyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 37425281, "answer_count": 2, "score": 0, "last_activity_date": 1464140677, "creation_date": 1464130730, "last_edit_date": 1464130963, "question_id": 37425244, "link": "https://stackoverflow.com/questions/37425244/how-do-i-account-for-an-array-that-doesnt-exist", "title": "How do I account for an array that doesn&#39;t exist?", "body": "<p>So the code works fine if I'm trying to find the size of the land in the middle, but it fails when calculating the size of the small land in the corner. How do I return <code>0</code> if it starts checking for land outside of the given arrays?</p>\n\n<pre><code>M = 'land'\no = 'water'\n\nworld = [[o,o,o,o,o,o],\n         [o,M,M,M,o,o],\n         [o,o,M,M,o,o],\n         [o,o,o,o,o,M]]\n\ndef continent_size world, x, y\n  if world[x][y] != 'land'\n    return 0\n  end\n\n  size = 1\n  world[x][y] = 'counted land'\n\n  size = size + continent_size(world, x-1, y-1)\n  size = size + continent_size(world, x  , y-1)\n  size = size + continent_size(world, x+1, y-1)\n  size = size + continent_size(world, x-1, y  )\n  size = size + continent_size(world, x+1, y  )\n  size = size + continent_size(world, x-1, y+1)\n  size = size + continent_size(world, x  , y+1)\n  size = size + continent_size(world, x+1, y+1)\n\n  size\nend\n\nputs continent_size(world, 3, 5)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 1040, "user_id": 1462708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e0bb2baca0f20237b85bf00d1968b?s=128&d=identicon&r=PG", "display_name": "Stephen Crosby", "link": "https://stackoverflow.com/users/1462708/stephen-crosby"}, "edited": false, "score": 0, "creation_date": 1464130290, "post_id": 37425161, "comment_id": 62355493, "body": "Maybe have a look at any activerecord hooks you&#39;ve defined on your underlying Branch model. I&#39;ve never seen this, but I think it could be that you have an update that triggers its own update via hooks..."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1464130711, "post_id": 37425161, "comment_id": 62355618, "body": "This can also happen if you have this occurring within a <code>rescue</code> block, where something else is causing an error, and you don&#39;t have an exit condition for the <code>rescue</code> block (e.g. maximum retry count)."}], "owner": {"reputation": 700, "user_id": 662833, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GBLwL.jpg?s=128&g=1", "display_name": "Martin B.", "link": "https://stackoverflow.com/users/662833/martin-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464130128, "creation_date": 1464130128, "question_id": 37425161, "link": "https://stackoverflow.com/questions/37425161/activerecord-update-produce-an-infinite-sql-transaction", "title": "ActiveRecord update produce an infinite SQL transaction", "body": "<p>Is there any way that this code:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>respond_to do |format|\n  if @branch.update(branch_params) # &lt;---- HERE is the update!\n    #...\n  else\n    #...\n  end\nend\n</code></pre>\n\n<p>...could produce the following infinite SQL transaction?</p>\n\n<pre><code>May 24 17:22:43 myapp app/web.1:  Processing by BranchesController#update as HTML \nMay 24 17:22:43 myapp app/web.1:    Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"XXX\", \"branch\"=&gt;{\"google_page\"=&gt;\"https://plus.google.com\", \"fanpage_oauth_token\"=&gt;\"XXX\"}, \"commit\"=&gt;\"Save\", \"id\"=&gt;\"55\"} \nMay 24 17:22:44 myapp app/web.1:     (1.1ms)  BEGIN \nMay 24 17:22:44 myapp app/web.1:    SQL (1.3ms)  UPDATE \"branches\" SET \"fanpage_oauth_token\" = $1, \"updated_at\" = $2 WHERE \"branches\".\"id\" = $3  [[\"fanpage_oauth_token\", \"XXX\"], [\"updated_at\", \"2016-05-24 21:22:43.654824\"], [\"id\", 55]] \nMay 24 17:22:44 myapp app/web.1:    SQL (1.6ms)  UPDATE \"branches\" SET \"fanpage_oauth_token\" = $1, \"updated_at\" = $2 WHERE \"branches\".\"id\" = $3  [[\"fanpage_oauth_token\", \"XXX\"], [\"updated_at\", \"2016-05-24 21:22:43.654824\"], [\"id\", 55]] \nMay 24 17:22:44 myapp app/web.1:    SQL (1.6ms)  UPDATE \"branches\" SET \"fanpage_oauth_token\" = $1, \"updated_at\" = $2 WHERE \"branches\".\"id\" = $3  [[\"fanpage_oauth_token\", \"XXX\"], [\"updated_at\", \"2016-05-24 21:22:43.654824\"], [\"id\", 55]] \nMay 24 17:22:44 myapp app/web.1:    SQL (1.4ms)  UPDATE \"branches\" SET \"fanpage_oauth_token\" = $1, \"updated_at\" = $2 WHERE \"branches\".\"id\" = $3  [[\"fanpage_oauth_token\", \"XXX\"], [\"updated_at\", \"2016-05-24 21:22:43.654824\"], [\"id\", 55]] \nMay 24 17:22:44 myapp app/web.1:    SQL (1.4ms)  UPDATE \"branches\" SET \"fanpage_oauth_token\" = $1, \"updated_at\" = $2 WHERE \"branches\".\"id\" = $3  [[\"fanpage_oauth_token\", \"XXX\"], [\"updated_at\", \"2016-05-24 21:22:43.654824\"], [\"id\", 55]] \nMay 24 17:22:44 myapp app/web.1:    SQL (1.4ms)  UPDATE \"branches\" SET \"fanpage_oauth_token\" = $1, \"updated_at\" = $2 WHERE \"branches\".\"id\" = $3  [[\"fanpage_oauth_token\", \"XXX\"], [\"updated_at\", \"2016-05-24 21:22:43.654824\"], [\"id\", 55]] \n... and so on for +100 times until Heroku's timeout\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "search", "elasticsearch", "searchkick"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1464129479, "post_id": 37424781, "comment_id": 62355221, "body": "We&#39;d like to see what you tried, and an explanation why it didn&#39;t help you. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, including the links in that page."}, {"owner": {"reputation": 2355, "user_id": 837815, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db555abfd0cd53c8f5a0a8253aa460f0?s=128&d=identicon&r=PG", "display_name": "Jude Calimbas", "link": "https://stackoverflow.com/users/837815/jude-calimbas"}, "edited": false, "score": 0, "creation_date": 1487663303, "post_id": 37424781, "comment_id": 71873063, "body": "Why downvote? this is usefull when you dont want your users to scroll within the millions of records you have, cause most likely they wouldn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 4160, "user_id": 76735, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d6d201a3de23bb6066e8c4511ff2b3ee?s=128&d=identicon&r=PG", "display_name": "Avishai", "link": "https://stackoverflow.com/users/76735/avishai"}, "edited": false, "score": 0, "creation_date": 1464273733, "post_id": 37424825, "comment_id": 62427005, "body": "Perhaps I wasn&#39;t clear. I would like to limit the total number of results returned overall, not how many come back in a particular page. Suppose there are 1,000,000 documents, but I never want the number of results available to paginate to be more than 1,000."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 4160, "user_id": 76735, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d6d201a3de23bb6066e8c4511ff2b3ee?s=128&d=identicon&r=PG", "display_name": "Avishai", "link": "https://stackoverflow.com/users/76735/avishai"}, "edited": false, "score": 0, "creation_date": 1464273924, "post_id": 37424825, "comment_id": 62427144, "body": "That&#39;s strange behaviour; why would you want to limit the number of available pages? At a guess, it might be possible by doing: <code>Product.limit(xxxxx).search &quot;apples&quot;, where: {in_stock: true}, limit: 10, offset: 50</code>"}, {"owner": {"reputation": 4160, "user_id": 76735, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d6d201a3de23bb6066e8c4511ff2b3ee?s=128&d=identicon&r=PG", "display_name": "Avishai", "link": "https://stackoverflow.com/users/76735/avishai"}, "edited": false, "score": 0, "creation_date": 1464274177, "post_id": 37424825, "comment_id": 62427340, "body": "Because when you have millions of documents, and an index page that gets crawled by Google, you run into problems when it asks for <code>limit: 1000, offset: 1958</code>. I guess a better way to phrase the question might be: how do you cap the maximum offset?"}, {"owner": {"reputation": 9754, "user_id": 636762, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/52351c68bff7878307faa6ad4056cb27?s=128&d=identicon&r=PG", "display_name": "Rakib", "link": "https://stackoverflow.com/users/636762/rakib"}, "edited": false, "score": 0, "creation_date": 1522937058, "post_id": 37424825, "comment_id": 86359464, "body": "i am building the query with <code>body: </code> as described here - <a href=\"https://github.com/ankane/searchkick#advanced-search\" rel=\"nofollow noreferrer\">github.com/ankane/searchkick#advanced-search</a> - how/where do i pass in <code>limit:</code> and <code>offset:</code> when building query with <code>body</code> ?"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 0, "last_activity_date": 1464128403, "creation_date": 1464128403, "answer_id": 37424825, "question_id": 37424781, "link": "https://stackoverflow.com/questions/37424781/how-do-you-limit-the-maximum-number-of-results-with-searchkick/37424825#37424825", "title": "How do you limit the maximum number of results with Searchkick", "body": "<p>Taken directly from the <code>README</code> in the link you posted:</p>\n\n<pre><code>Product.search \"apples\", where: {in_stock: true}, limit: 10, offset: 50\n</code></pre>\n\n<p><code>limit: 10</code> will result in a maximum of <code>10</code> results being returned.</p>\n"}], "owner": {"reputation": 4160, "user_id": 76735, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d6d201a3de23bb6066e8c4511ff2b3ee?s=128&d=identicon&r=PG", "display_name": "Avishai", "link": "https://stackoverflow.com/users/76735/avishai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1189, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1464128403, "creation_date": 1464128159, "question_id": 37424781, "link": "https://stackoverflow.com/questions/37424781/how-do-you-limit-the-maximum-number-of-results-with-searchkick", "title": "How do you limit the maximum number of results with Searchkick", "body": "<p>I'm using <a href=\"https://github.com/ankane/searchkick\" rel=\"nofollow\" title=\"Searchkick\">Searchkick</a> to connect to an ElasticSearch server that indexes hundreds of thousands of documents. However, paging through <em>all</em> results frequently results in a crash. How can I tell the <code>search</code> method to return only a maximum of <em>n</em> results?</p>\n"}, {"tags": ["ruby", "elasticsearch", "elasticsearch-ruby"], "answers": [{"tags": [], "owner": {"reputation": 14346, "user_id": 1871769, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fvi8D.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1871769/rahul"}, "is_accepted": false, "score": 0, "last_activity_date": 1464149431, "creation_date": 1464149431, "answer_id": 37427686, "question_id": 37424632, "link": "https://stackoverflow.com/questions/37424632/how-to-add-or-condition-in-elasticsearch-ruby-query/37427686#37427686", "title": "How to add OR condition in Elasticsearch ruby query?", "body": "<p>It seems like a syntax error in your filter clause. Please try with the correct syntax as below :</p>\n\n<pre><code>  'filter' =&gt; {\n          'or' =&gt; [\n                   {\n                     'term' =&gt; { \"@dest\" =&gt; dest }\n                   },\n                   {\n                      'term' =&gt; { \"@dest\" =&gt; ' ' }\n                   }\n                  ]\n           }\n</code></pre>\n"}], "owner": {"reputation": 2144, "user_id": 3103732, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ddea83f3d0a1cde074665d4c1382c3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Dany", "link": "https://stackoverflow.com/users/3103732/dany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464149431, "creation_date": 1464127344, "question_id": 37424632, "link": "https://stackoverflow.com/questions/37424632/how-to-add-or-condition-in-elasticsearch-ruby-query", "title": "How to add OR condition in Elasticsearch ruby query?", "body": "<p>In my use case, I would like to add an OR condition in Elasticsearch query. Here is my query,</p>\n\n<pre><code>  query_body = {\n    'query' =&gt; {\n        'bool' =&gt; {\n            'must' =&gt; [{ 'range' =&gt; {'@timestamp' =&gt; { 'from' =&gt; stream_filters[:first_time].gmtime.strftime(\"%Y-%m-%dT%H:%M:%SZ\"), 'to' =&gt; stream_filters[:second_time].gmtime.strftime(\"%Y-%m-%dT%H:%M:%SZ\") } } }, {'term' =&gt; {\"@timeout\" =&gt; true} }, {'term' =&gt; {\"@dest\" =&gt; dest} }, {'term' =&gt; {\"@source\" =&gt; source} }   ]\n                } \n              }, 'facets' =&gt; facets\n          }\n</code></pre>\n\n<p>I would like to add <code>'term' =&gt; {\"@dest\" =&gt; ' '}</code> empty check for @dest along with <code>'term' =&gt; {\"@dest\" =&gt; dest}</code></p>\n\n<p>I tried to add an or condition, But it is not working.</p>\n\n<pre><code>query_body = {\n      'query' =&gt; {\n          'bool' =&gt; {\n              'must' =&gt; [{ 'range' =&gt; {'@timestamp' =&gt; { 'from' =&gt; stream_filters[:first_time].gmtime.strftime(\"%Y-%m-%dT%H:%M:%SZ\"), 'to' =&gt; stream_filters[:second_time].gmtime.strftime(\"%Y-%m-%dT%H:%M:%SZ\") } } }, {'term' =&gt; {\"@timeout\" =&gt; true} }, {'term' =&gt; {\"@source\" =&gt; source} }   ],\n              'filter' =&gt; {\n                  'or' =&gt; [{\n                      'term' =&gt; { \"@dest\" =&gt; dest }\n                      'term' =&gt; { \"@dest\" =&gt; ' ' }\n                      }]\n                   }\n                  }\n                }, 'facets' =&gt; facets\n            }\n</code></pre>\n\n<p>Could someone help me with this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot", "rspec-rails"], "comments": [{"owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 0, "creation_date": 1464126575, "post_id": 37424242, "comment_id": 62354148, "body": "Is there a value for <code>@user</code>? Do the factories raise errors if the user is missing?"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "reply_to_user": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 0, "creation_date": 1464127092, "post_id": 37424242, "comment_id": 62354354, "body": "zetetic, <code>@user</code> is used for all the actions (index, destroy, etc.). So it&#39;s working fine (28 examples and 3 failures). And as I wrote if I take out the line with image tag it passes with <code>user.full_name</code>. All the specs passed before I decided to put image tag in as well."}, {"owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 0, "creation_date": 1464127262, "post_id": 37424242, "comment_id": 62354425, "body": "I would look closely at the factories and/or models to make sure they are returning the values you expect. It often helps to add additional expectations temporarily to make sure the values are really there (e.g <code>expect(@user.avatar).to_not be_nil</code>)"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "reply_to_user": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 0, "creation_date": 1464127468, "post_id": 37424242, "comment_id": 62354498, "body": "zetetic, I will update my question in 3 mins, pls take a look at it. I found something weird."}], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1464125707, "post_id": 37424292, "comment_id": 62353776, "body": "JaTo, I guess only in test env. If so, how can I solve this issue?"}, {"owner": {"reputation": 2462, "user_id": 2391263, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/689090f89ca1533649024cf5202104ef?s=128&d=identicon&r=PG", "display_name": "JaTo", "link": "https://stackoverflow.com/users/2391263/jato"}, "reply_to_user": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1464128078, "post_id": 37424292, "comment_id": 62354709, "body": "check that your user factory creates an avatar. Also check that the avatar responds to url"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1464128773, "post_id": 37424292, "comment_id": 62354966, "body": "JaTo, factory seems to be working fine. Pls check out my update. If I take out the image tag from the view then it says avatar is not nil."}], "tags": [], "owner": {"reputation": 2462, "user_id": 2391263, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/689090f89ca1533649024cf5202104ef?s=128&d=identicon&r=PG", "display_name": "JaTo", "link": "https://stackoverflow.com/users/2391263/jato"}, "is_accepted": false, "score": 1, "last_activity_date": 1464125628, "creation_date": 1464125628, "answer_id": 37424292, "question_id": 37424242, "link": "https://stackoverflow.com/questions/37424242/rspec-nil-class-error-in-controller-spec/37424292#37424292", "title": "rspec nil class error in controller spec", "body": "<p>avatar is nil for one of the users</p>\n"}], "owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464128710, "creation_date": 1464125425, "last_edit_date": 1464128710, "question_id": 37424242, "link": "https://stackoverflow.com/questions/37424242/rspec-nil-class-error-in-controller-spec", "title": "rspec nil class error in controller spec", "body": "<p>I have a profile model with <code>avatar</code> attr and <code>full_name</code> method that uses <code>first_name</code> and <code>last_name</code> attrs. All of these are delegated in user model. I don't really understand how I can get the nil class error. If I delete the image tag line the tests pass, so user can't be nil since I also call <code>user.full_name</code>. I also have other models where I use the <code>avatar</code> and <code>full_name</code> and the specs are working fine there. It works in dev env too.</p>\n\n<p>What did I miss here?</p>\n\n<p>error for all the 3 it blocks:</p>\n\n<pre><code>Failure/Error: &lt;%= image_tag user.avatar.url(:small_thumb), class: \"profile-index-avatar\" %&gt;\n\nActionView::Template::Error:\n  undefined method `url' for nil:NilClass\n  Did you mean?  URI\n</code></pre>\n\n<p>show.html.erb</p>\n\n<pre><code>&lt;% @product.users.each_slice(2) do |user_row| %&gt;\n  &lt;div class=\"row\" style=\"padding-top:20px;\"&gt;\n    &lt;% user_row.each do |user| %&gt;\n      &lt;%= link_to user_profile_path(user) do %&gt;\n        &lt;div class=\"col-md-6 product-user-column\"&gt;\n          &lt;%= image_tag user.avatar.url(:small_thumb), class: \"profile-index-avatar\" %&gt;\n          &lt;%= user.full_name %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>controller spec</p>\n\n<pre><code>describe \"GET show\" do\n  let!(:profile) { create(:profile, user: @user) }\n  let!(:product) { create(:product, :product_with_nested_attrs) }\n  let!(:product_user) { create(:product_user, user: @user, product: product, role: \"owner\") }\n  before(:each) do\n    get :show, id: product\n  end\n\n  it \"assigns products\" do\n    expect(assigns(:product)).to eq(product)\n    expect(assigns(:product).industry_products.size).to eq(1)\n  end\n\n  it { is_expected.to respond_with 200 }\n  it { is_expected.to render_template :show }\nend\n</code></pre>\n\n<p>UPDATE</p>\n\n<p>Based on zetetic's suggestions I checked if avatar is nil. The user avatar is not nil for the index action neither the avatar for the show action.</p>\n\n<p>If put the \"avatar not nil for show\" method in while show page contains image tag then it raises the same error just like for the rest. If I delete the image tag line then it says it's not nil.</p>\n\n<pre><code>describe \"GET index\" do\n  let!(:profile) { create(:profile, user: @user) }\n  let!(:product) { create(:product, :product_with_nested_attrs) }\n  before(:each) do\n    get :index\n  end\n\n  it \"avatar not nil for show\" do\n    expect(@user.avatar).to_not be_nil\n  end\n\n  it \"assigns products\" do\n    expect(assigns(:products)).to eq([product])\n  end\n\n  it { is_expected.to respond_with 200 }\n  it { is_expected.to render_template :index }\nend\n\ndescribe \"GET show\" do\n  let!(:profile) { create(:profile, user: @user) }\n  let!(:product_user) { create(:product_user, user: @user, product: product, role: \"owner\") }\n  let!(:product) { create(:product, :product_with_nested_attrs) }\n  before(:each) do\n    get :show, id: product\n  end\n\n  it \"avatar not nil for show\" do\n    expect(@user.avatar).to_not be_nil\n  end\n\n  it \"assigns products\" do\n    expect(assigns(:product)).to eq(product)\n    expect(assigns(:product).industry_products.size).to eq(1)\n  end\n\n  it { is_expected.to respond_with 200 }\n  it { is_expected.to render_template :show }\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1464126817, "post_id": 37424124, "comment_id": 62354253, "body": "Not quite a duplicate, but the answers to this question answer your question: <a href=\"http://stackoverflow.com/questions/28439734/purpose-of-ampersand-in-ruby-for-procs-and-calling-methods\" title=\"purpose of ampersand in ruby for procs and calling methods\">stackoverflow.com/questions/28439734/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "is_accepted": false, "score": 3, "last_activity_date": 1464128620, "creation_date": 1464128620, "answer_id": 37424879, "question_id": 37424124, "link": "https://stackoverflow.com/questions/37424124/difference-between-calling-and-receiving-parameter-with/37424879#37424879", "title": "Difference between calling and receiving parameter with &amp;", "body": "<p>In the first case, <code>toproc</code> is a variable which contains a proc, or will be cast to a proc if not. </p>\n\n<p>In the second case, we are explicitly declaring that the function takes a block argument, which we can refer to by the name <code>toblock</code>.</p>\n\n<p>This article gives a pretty good explanation: <a href=\"http://www.skorks.com/2013/04/ruby-ampersand-parameter-demystified/\" rel=\"nofollow\">http://www.skorks.com/2013/04/ruby-ampersand-parameter-demystified/</a></p>\n"}], "owner": {"reputation": 59, "user_id": 6253410, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/605c0c25c93c7d481ff52c3975ac088c?s=128&d=identicon&r=PG&f=1", "display_name": "new user20", "link": "https://stackoverflow.com/users/6253410/new-user20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1464128620, "creation_date": 1464124889, "last_edit_date": 1464125606, "question_id": 37424124, "link": "https://stackoverflow.com/questions/37424124/difference-between-calling-and-receiving-parameter-with", "title": "Difference between calling and receiving parameter with &amp;", "body": "<p>What is the difference between using <code>&amp;</code> in these two cases?</p>\n\n<ol>\n<li><p>Calling <code>fun1</code>:</p>\n\n<pre><code>fun1(&amp;toproc)\n</code></pre></li>\n<li><p>In function definition: </p>\n\n<pre><code>def fun1(&amp;toblock)\n  # ...\nend\n</code></pre></li>\n</ol>\n\n<p>Is it that when receiving a parameter with <code>&amp;toblock</code> it is converted to a Proc\nand for the other case it is converted to a block?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8007, "user_id": 6336139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yZ1gA.png?s=128&g=1", "display_name": "T. Claverie", "link": "https://stackoverflow.com/users/6336139/t-claverie"}, "edited": false, "score": 0, "creation_date": 1464123538, "post_id": 37423713, "comment_id": 62352726, "body": "Can you rephrase it in plain english ?"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1464124487, "post_id": 37423713, "comment_id": 62353223, "body": "Edited according to the accepted answer."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1464129645, "post_id": 37423713, "comment_id": 62355274, "body": "Welcome to Stack Overflow. We&#39;d like to see evidence of your effort toward solving the problem. Without that it looks like you&#39;re asking us to write code for you, rather than help correct your code which isn&#39;t working. SO isn&#39;t a &quot;write code for me site&quot; so it&#39;s important to show us what you tried. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the links, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 10, "last_activity_date": 1549360734, "last_edit_date": 1549360734, "creation_date": 1464123603, "answer_id": 37423792, "question_id": 37423713, "link": "https://stackoverflow.com/questions/37423713/ruby-count-hash-key/37423792#37423792", "title": "Ruby count hash key", "body": "<p>I suppose you meant:</p>\n\n<pre><code>your_hash.count { |k, _| k.to_s.include?('yes') }\n#=&gt; 5\n</code></pre>\n"}], "owner": {"reputation": 2801, "user_id": 4555102, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/2RQHU.jpg?s=128&g=1", "display_name": "shuba.ivan", "link": "https://stackoverflow.com/users/4555102/shuba-ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12539, "favorite_count": 0, "accepted_answer_id": 37423792, "answer_count": 1, "score": -3, "last_activity_date": 1578516700, "creation_date": 1464123345, "last_edit_date": 1464124413, "question_id": 37423713, "link": "https://stackoverflow.com/questions/37423713/ruby-count-hash-key", "title": "Ruby count hash key", "body": "<p>I have a hash like this:</p>\n\n<pre><code>{'yes' =&gt; 23,\n 'b' =&gt; 'travel',\n 'yesterday' =&gt; 34,\n 5 =&gt; '234',\n :yesss =&gt; :fg,\n try: 30,\n key: 'some value',\n 'yesterday1' =&gt; 34,\n 'yesteryear' =&gt; 2014}\n</code></pre>\n\n<p>How can I count all keys which includes <code>yes</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "edited": false, "score": 3, "creation_date": 1464123253, "post_id": 37423598, "comment_id": 62352569, "body": "If the column already exists, <code>add_column</code> shouldn&#39;t even succeed. Did the migration run without errors? <a href=\"http://stackoverflow.com/questions/7098602/add-a-default-value-to-a-column-through-a-migration\" title=\"add a default value to a column through a migration\">stackoverflow.com/questions/7098602/&hellip;</a> might be helpful, too."}, {"owner": {"reputation": 154, "user_id": 3793427, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/S3t8p.jpg?s=128&g=1", "display_name": "DR_", "link": "https://stackoverflow.com/users/3793427/dr"}, "edited": false, "score": 0, "creation_date": 1464124352, "post_id": 37423598, "comment_id": 62353161, "body": "You should first remove the column and then do this. This will work if you drop and create the database, and then run the migration, but you will of couse loose the data. You can also try to create a new object. If it&#39;s one, than it&#39;s ok. The existing objects need to be updated manually. Run User.all.each do |u| u.update_attributes(gamelv1: 1)"}], "answers": [{"tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 2, "last_activity_date": 1464125367, "creation_date": 1464125367, "answer_id": 37424231, "question_id": 37423598, "link": "https://stackoverflow.com/questions/37423598/default-value-is-not-saved-to-the-database/37424231#37424231", "title": "default value is not saved to the database", "body": "<p>The <code>default</code> value is only applied when a record is first created.  Existing records would be unaffected by a change to <code>default</code>.  You can manually apply this default value in your migration, by doing this:</p>\n\n<pre><code>add_column :users, :gamelv1, :integer, default: 1\n\nUser.reset_column_information\n\nUser.where(gamelv1: nil).update_all(gamelv1: 1)\n</code></pre>\n\n<p>This will find all records in which <code>gamelv1</code> is nil (null in the database), and will update those records so that <code>gamelv1</code> has the default value of <code>1</code>.  That way, your data is migrated at the same time as the database structure, so that you app behaves as you expect, regardless of when the record was created.</p>\n"}], "owner": {"reputation": 141, "user_id": 5334523, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/WrPOA.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5334523/marco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464129820, "creation_date": 1464122952, "last_edit_date": 1464129820, "question_id": 37423598, "link": "https://stackoverflow.com/questions/37423598/default-value-is-not-saved-to-the-database", "title": "default value is not saved to the database", "body": "<p>I want to add a default value to an existing column in my database, this is my attempt:</p>\n\n<pre><code>add_column :users, :gamelv1, :integer, default: 1\n</code></pre>\n\n<p>I added <code>default: 1</code> and run <code>rake db:migrate</code>, but when I check the default value of the <code>gamelv1</code> column, it is still <code>nil</code>.  The value <code>1</code> I added is not saved.</p>\n\n<p>How do I set default values for my column?</p>\n"}, {"tags": ["ruby", "regex", "gsub"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1464122339, "post_id": 37423396, "comment_id": 62352081, "body": "The <code>\\1</code> is not &quot;initialized&quot; here. Use a block,"}, {"owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "edited": false, "score": 0, "creation_date": 1464122456, "post_id": 37423396, "comment_id": 62352143, "body": "Are you just trying to reverse the words in the string or are you specifically searching for capture groups?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464125906, "post_id": 37423499, "comment_id": 62353862, "body": "@tadman, as you know well, you don&#39;t need a capture group here. :-)"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 7, "last_activity_date": 1464122609, "creation_date": 1464122609, "answer_id": 37423499, "question_id": 37423396, "link": "https://stackoverflow.com/questions/37423396/ruby-regex-capture-groups-in-gsub/37423499#37423499", "title": "Ruby regex capture groups in gsub", "body": "<p>Remember that arguments to methods are evaluated immediately and the result of that is passed in to the method. If you want to make the substitution adapt to the match:</p>\n\n<pre><code>message.gsub!(/([[:alpha:]])/) { |m| z[a.index($1)] }\n</code></pre>\n\n<p>That employs a block that gets evaluated for each match.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1464125519, "last_edit_date": 1464125519, "creation_date": 1464122742, "answer_id": 37423538, "question_id": 37423396, "link": "https://stackoverflow.com/questions/37423396/ruby-regex-capture-groups-in-gsub/37423538#37423538", "title": "Ruby regex capture groups in gsub", "body": "<p>One way is to manipulate ASCII values.</p>\n\n<pre><code>def code(message)\n  message.gsub(/[[:alpha:]]/) { |s| (((s &lt; 'a') ? 155 : 219 ) - s.ord).chr }\nend\n\ncoded = code(\"the quick brown fox\")\n  #=&gt; \"gsv jfrxp yildm ulc\" \ncode(coded)\n  #=&gt; \"the quick brown fox\" \n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>'A'.ord + 'Z'.ord\n  #=&gt; 155 \n'a'.ord + 'z'.ord\n  #=&gt; 219 \n</code></pre>\n\n<p>Another is to use a hash:</p>\n\n<pre><code>a = ('a'..'z').to_a\nCh = a.zip(a.reverse).to_h\n  #=&gt; {\"a\"=&gt;\"z\", \"b\"=&gt;\"y\",..., \"y\"=&gt;\"b\", \"z\"=&gt;\"a\"} \n\ndef code(message)\n  message.gsub(/[[:alpha:]]/, Ch)\nend\n\ncoded = code(\"the quick brown fox\")\n  #=&gt; \"gsv jfrxp yildm ulc\"\ncode(coded)\n  #=&gt; \"the quick brown fox\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464128217, "post_id": 37423660, "comment_id": 62354760, "body": "Tadman&#39;s answer uses <code>gsub!</code> instead of <code>gsub</code>, which is bad practice and bug prone in this context. (You&#39;re mutating the original object, and the method may unexpectedly return <code>nil</code>.) In addition, that answer uses <code>$1</code> instead of the match result, which is also bad practice. (It&#39;s not thread safe and uses an unnecessary variable.)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464163216, "post_id": 37423660, "comment_id": 62365968, "body": "Yes, your right. I deleted my comment. Somehow I hadn&#39;t noticed you used the block variable instead of the value of the capture group, speaking of which, are you sure you want an unused capture group? I&#39;ll delete this when you&#39;ve seen it."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464164183, "post_id": 37423660, "comment_id": 62366498, "body": "If you can find a way to achieve this with <code>gsub</code> <i>without</i> a block, then please share!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464167405, "post_id": 37423660, "comment_id": 62368570, "body": "I said the (regex&#39;s)  capture group  is not needed."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464168956, "post_id": 37423660, "comment_id": 62369696, "body": "Ahhh right, I get what you mean now. Yeah sure, fair enough. Not that it makes much difference. :P I&#39;ve edited my answer. (Also as I said, I wouldn&#39;t even advise using <code>gsub</code> for this task anyway!)"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 2, "last_activity_date": 1464168966, "last_edit_date": 1464168966, "creation_date": 1464123131, "answer_id": 37423660, "question_id": 37423396, "link": "https://stackoverflow.com/questions/37423396/ruby-regex-capture-groups-in-gsub/37423660#37423660", "title": "Ruby regex capture groups in gsub", "body": "<h3>Using <code>gsub</code>:</h3>\n\n<p>Your code was not working because <code>'\\1'</code> is not yet being evaluated as its regex match, at the point you desire. This can be solved by using a block, so the match variable is defined:</p>\n\n<pre><code>message.gsub(/[[:alpha:]]/) { |char| z[a.index(char)] }\n</code></pre>\n\n<h3>Using <code>tr</code>:</h3>\n\n<p>A more efficient way to solve problems like this, where you are simply \"replacing one set of characters with another set\", is to instead use <a href=\"http://apidock.com/ruby/String/tr\" rel=\"nofollow\"><code>String#tr</code></a>. This could be done as follows:</p>\n\n<pre><code>message.tr(a.join(''), z.join(''))\n</code></pre>\n"}], "owner": {"reputation": 760, "user_id": 5368448, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0a99517c180eaf6b58e59246fc27b3d?s=128&d=identicon&r=PG&f=1", "display_name": "Marc Fletcher", "link": "https://stackoverflow.com/users/5368448/marc-fletcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1672, "favorite_count": 0, "accepted_answer_id": 37423499, "answer_count": 3, "score": 2, "last_activity_date": 1464168966, "creation_date": 1464122193, "question_id": 37423396, "link": "https://stackoverflow.com/questions/37423396/ruby-regex-capture-groups-in-gsub", "title": "Ruby regex capture groups in gsub", "body": "<p>Say I want to switch each letter in a message with it's place in the reverse alphabet. Why can't I seem to use the captured group and do it in one gsub? </p>\n\n<p>Perhaps someone could explain in general about using captured groups in gsub, can the back references be bare(no ' ')? Can I use #{\\1}? </p>\n\n<pre><code>def decode(message)\n  a = ('a'..'z').to_a\n  z = a.reverse\n  message.gsub!(/([[:alpha:]])/, z[a.index('\\1')]) \nend\n\ndecode(\"the quick brown fox\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "yaml", "lint", "rubocop"], "comments": [{"owner": {"reputation": 308, "user_id": 443117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d508bf39f43c089b20d79af69186da0e?s=128&d=identicon&r=PG", "display_name": "anujm", "link": "https://stackoverflow.com/users/443117/anujm"}, "edited": false, "score": 3, "creation_date": 1464123910, "post_id": 37423350, "comment_id": 62352930, "body": "rubocop is supposed to ignore .yml files. What is the output of <code>rubocop -L</code>?"}, {"owner": {"reputation": 629, "user_id": 2932380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60fda5fc08476565e5ea66c96a228fc8?s=128&d=identicon&r=PG", "display_name": "Fabiano Arruda", "link": "https://stackoverflow.com/users/2932380/fabiano-arruda"}, "reply_to_user": {"reputation": 308, "user_id": 443117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d508bf39f43c089b20d79af69186da0e?s=128&d=identicon&r=PG", "display_name": "anujm", "link": "https://stackoverflow.com/users/443117/anujm"}, "edited": false, "score": 0, "creation_date": 1464139030, "post_id": 37423350, "comment_id": 62357696, "body": "I was doing it wrong. Im running rubocop folder by folder so it would be easier to fix the offenses. So, I was running <code>rubocop config&#47;*</code>, then I realized that this command would force rubocop to scan all files inside the folder. The correct command is <code>rubocop config&#47;</code>, without the &#39;*&#39; \ud83d\ude44"}], "owner": {"reputation": 629, "user_id": 2932380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60fda5fc08476565e5ea66c96a228fc8?s=128&d=identicon&r=PG", "display_name": "Fabiano Arruda", "link": "https://stackoverflow.com/users/2932380/fabiano-arruda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2639, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464122015, "creation_date": 1464122015, "question_id": 37423350, "link": "https://stackoverflow.com/questions/37423350/rubocop-unexpected-token-tcolon-error-in-yml-files", "title": "Rubocop &quot;unexpected token tCOLON&quot; error in yml files", "body": "<p>When running Rubocop I get this error for all yml files under config folder. </p>\n\n<p>example:</p>\n\n<pre><code>config/database.yml:1:8: E: unexpected token tCOLON\n(Using Ruby 2.1 parser; configure using TargetRubyVersion parameter, under AllCops)\ndefault: &amp;default\n       ^\nconfig/database.yml:2:10: E: unexpected token tCOLON\n(Using Ruby 2.1 parser; configure using TargetRubyVersion parameter, under AllCops)\n  adapter: postgresql\n         ^\nconfig/database.yml:3:11: E: unexpected token tCOLON\n(Using Ruby 2.1 parser; configure using TargetRubyVersion parameter, under AllCops)\n  encoding: unicode\n          ^\nconfig/database.yml:4:7: E: unexpected token tCOLON\n(Using Ruby 2.1 parser; configure using TargetRubyVersion parameter, under AllCops)\n  pool: 5\n      ^\n</code></pre>\n\n<p>This is my database.yml file:</p>\n\n<pre><code>default: &amp;default\n  adapter: postgresql\n  encoding: unicode\n  pool: 5\n\ndevelopment:\n  &lt;&lt;: *default\n  database: otimicar_development\n\ntest:\n  &lt;&lt;: *default\n  database: otimicar_test\n</code></pre>\n\n<p>What does it means? Other files likes secrets.yml are generating the same kind of error also...</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "seeding"], "comments": [{"owner": {"reputation": 308, "user_id": 443117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d508bf39f43c089b20d79af69186da0e?s=128&d=identicon&r=PG", "display_name": "anujm", "link": "https://stackoverflow.com/users/443117/anujm"}, "edited": false, "score": 2, "creation_date": 1464124809, "post_id": 37423344, "comment_id": 62353370, "body": "You can do this with the help of the carriage return character. Refer to this answer: <a href=\"http://stackoverflow.com/questions/4963717/how-to-overwrite-a-printed-line-in-the-shell-with-ruby\" title=\"how to overwrite a printed line in the shell with ruby\">stackoverflow.com/questions/4963717/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 0, "last_activity_date": 1464130954, "creation_date": 1464130954, "answer_id": 37425286, "question_id": 37423344, "link": "https://stackoverflow.com/questions/37423344/how-to-get-dynamic-output-in-terminal-during-rake-dbseed/37425286#37425286", "title": "How to get dynamic output in terminal during rake db:seed", "body": "<p>Dealing with the console is old school, and very different than working with browsers and HTML rendered pages. </p>\n\n<p>The console uses carriage-control characters like \"\\t\", \"\\r\", \"\\n\". There are <a href=\"https://en.wikipedia.org/wiki/ASCII#ASCII_control_characters\" rel=\"nofollow\">others</a>, but those are the most commonly used.</p>\n\n<p>\"\\r\" and \"\\n\" go hand-in-hand. \"\\r\" means return the carriage to its home position, and \"\\n\" means advance to the next line. In a terminal \"\\r\" results in moving the cursor to the left-most position.</p>\n\n<p>Save this to a script and run it at the command-line:</p>\n\n<pre><code>print \"foo\\r\"\nsleep 1\nprint \"bar\\r\"\nsleep 1\nputs \"done\"\n</code></pre>\n\n<p>You'll see \"foo\" printed, with the cursor over \"f\", then \"bar\", with the cursor over \"b\", then \"done\" printed and the cursor will move the next line.</p>\n\n<p><code>puts</code> behaves differently than <code>print</code>; Why is left for you to discover. </p>\n\n<p>Also, simply appending \"\\r\" isn't sufficient to generate a good looking progress message if some line's lengths are shorter than others. There are many different tutorials on the internet about how to deal with this, and I'm sure there are Ruby packages. Some searching should reveal those.</p>\n"}], "owner": {"reputation": 1071, "user_id": 1227058, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cbacebe081b945a7494edb55e1ba8262?s=128&d=identicon&r=PG", "display_name": "Matteo", "link": "https://stackoverflow.com/users/1227058/matteo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 37425286, "answer_count": 1, "score": 0, "last_activity_date": 1464130954, "creation_date": 1464121994, "last_edit_date": 1464129755, "question_id": 37423344, "link": "https://stackoverflow.com/questions/37423344/how-to-get-dynamic-output-in-terminal-during-rake-dbseed", "title": "How to get dynamic output in terminal during rake db:seed", "body": "<p>I am working on a rather lengthy <code>seed.rb</code> file.</p>\n\n<p>Since it takes the rake task a while to complete, I want to give visual feedback through the console to the user so they know the process is working.</p>\n\n<p>So far, I have:</p>\n\n<pre><code>puts \"Topic: #{i}, created...\"\n</code></pre>\n\n<p>inside the create loop.  However, it spams the terminal output.  What I would like to do is have the output look like this:</p>\n\n<pre><code>Topic: #1..N, created...\n</code></pre>\n\n<p>where the output all stays on the same line, without creating a <code>/n</code> newline character, like what the current output looks like:</p>\n\n<pre><code>Topic: #1, created...\nTopic: #2, created...\nTopic: #3, created...\nTopic: #N, created...\n</code></pre>\n\n<p>I have tried fiddling with <code>print</code> instead, but it just creates a long string wrapping at the end of the terminal line.</p>\n\n<p>This is the entire <code>seed.rb</code> code:</p>\n\n<pre><code>topic_list = []\ni = 1\n(0..9).map{\n  topic_list &lt;&lt; [ Faker::Lorem.words(rand(2..5)), Faker::Lorem.sentences(rand(3..7)), rand(1..6) ]\n}\ntopic_list.each do |title, content, author|\n  Topic.create!( title:title, content:content, author:author )\n  puts \"Topic: #{i}, #{title} created...\"\n  i += 1\nend\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1464122914, "post_id": 37423143, "comment_id": 62352370, "body": "That documentation is for ActiveRecord and has nothing to do with <code>Enumerable#each_slice</code>."}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1464123161, "post_id": 37423143, "comment_id": 62352512, "body": "Thanks for the reply @muistooshort. I figured that they were the same though. Both of them act similarly do they not. They slice an array in batches and then do something with it. Don&#39;t they?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1464125430, "post_id": 37423143, "comment_id": 62353654, "body": "The <a href=\"http://guides.rubyonrails.org/active_record_querying.html#retrieving-multiple-objects-in-batches\" rel=\"nofollow noreferrer\">documentation</a> in question discusses <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Batches.html\" rel=\"nofollow noreferrer\"><code>find_each</code> and <code>find_in_batches</code></a>, both of which operate on ActiveRecord models and relations. They don&#39;t operate on arrays."}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 845, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464125189, "creation_date": 1464121312, "last_edit_date": 1464125189, "question_id": 37423143, "link": "https://stackoverflow.com/questions/37423143/when-does-enumberables-each-slice-method-begin-to-make-sense-for-large-arrays", "title": "When does Enumberable&#39;s each_slice method begin to make sense for large arrays?", "body": "<p>I am working with an array that contains about 400,000+ items. I was looking through Enumerables <code>each_slice</code> method on the ruby docs and was wondering to myself if it would make any difference in using it for an array of this size.</p>\n\n<p>According to Rails documentation:</p>\n\n<blockquote>\n  <p>1.2 Retrieving Multiple Objects in Batches We often need to iterate over a large set of records, as when we send a newsletter to a large\n  set of users, or when we export data.</p>\n  \n  <p>This may appear straightforward:</p>\n\n<pre><code># This is very inefficient when the users table has thousands of rows. \nUser.all.each do |user|   \n  NewsMailer.weekly(user).deliver_now \nend\n</code></pre>\n  \n  <p>But\n  this approach becomes increasingly impractical as the table size\n  increases, since User.all.each instructs Active Record to fetch the\n  entire table in a single pass, build a model object per row, and then\n  keep the entire array of model objects in memory. Indeed, if we have a\n  large number of records, the entire collection may exceed the amount\n  of memory available.</p>\n  \n  <p>Rails provides two methods that address this problem by dividing\n  records into memory-friendly batches for processing. The first method,\n  find_each, retrieves a batch of records and then yields each record to\n  the block individually as a model. The second method, find_in_batches,\n  retrieves a batch of records and then yields the entire batch to the\n  block as an array of models.</p>\n  \n  <p>The find_each and find_in_batches methods are intended for use in the\n  batch processing of a large number of records that wouldn't fit in\n  memory all at once. If you just need to loop over a thousand records\n  the regular find methods are the preferred option.</p>\n</blockquote>\n\n<p>Based on this documentation, if I have more than 1,000 array items, would I then start to look into <code>each_slice</code>? Also, how do I know by what number I should split it up to help save memory? Is there a way to figure this out?</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1464123392, "post_id": 37422913, "comment_id": 62352649, "body": "I wonder if the <code>tree</code> gem is the gem you&#39;re looking for. The method is there when I look at the source on github and has been there for years. I can&#39;t figure out what the <code>&lt;sup&gt;+&lt;&#47;sup&gt;</code> mean on rubydoc.info either."}], "answers": [{"tags": [], "owner": {"reputation": 6119, "user_id": 165753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/w6iBN.jpg?s=128&g=1", "display_name": "dimid", "link": "https://stackoverflow.com/users/165753/dimid"}, "is_accepted": true, "score": 1, "last_activity_date": 1464171690, "last_edit_date": 1464171690, "creation_date": 1464123576, "answer_id": 37423782, "question_id": 37422913, "link": "https://stackoverflow.com/questions/37422913/methods-from-treetreenode-not-working/37423782#37423782", "title": "Methods from Tree::TreeNode not working", "body": "<p>This is because the version of the gem on rubygems.org lags behind the latest version on github (from which the documentation is generated). You can install the github version using:</p>\n\n<pre><code>gem install specific_install\ngem specific_install -l https://github.com/evolve75/RubyTree.git\n</code></pre>\n\n<p>or just add it to your <code>Gemfile</code>:</p>\n\n<pre><code>gem 'tree', github: 'evolve75/RubyTree'\n</code></pre>\n\n<p><strong>Update</strong>: looks like it does have the latest version on rubygems, but it's renamed to rubytree, hence</p>\n\n<pre><code>gem uninstall tree\ngem install rubytree\n</code></pre>\n\n<p>but <code>require 'tree'</code> as you did before.</p>\n"}], "owner": {"reputation": 1299, "user_id": 2923846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e45ca52b59ce69b3844c6e8b09f278c?s=128&d=identicon&r=PG", "display_name": "lwassink", "link": "https://stackoverflow.com/users/2923846/lwassink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 37423782, "answer_count": 1, "score": 3, "last_activity_date": 1464171690, "creation_date": 1464120407, "question_id": 37422913, "link": "https://stackoverflow.com/questions/37422913/methods-from-treetreenode-not-working", "title": "Methods from Tree::TreeNode not working", "body": "<p>I have a question about ruby gems. I'm writing some code in ruby and I want to use a tree. I decided to use the <code>Tree::TreeNode</code> class. See here <a href=\"http://www.rubydoc.info/github/evolve75/RubyTree/Tree/TreeNode\" rel=\"nofollow\">http://www.rubydoc.info/github/evolve75/RubyTree/Tree/TreeNode</a> for documentation.</p>\n\n<p>This is my first time using a gem. I ran <code>sudo gem install tree</code> in the terminal and added <code>require 'tree'</code> to the beginning of my ruby file. For the most part it works. I can initialize nodes and most of the methods work. However, some methods such as <code>#each_leaf</code> and <code>#children</code> don't work. Here's example code:</p>\n\n<pre><code>require 'tree'\nnode1 = Tree::TreeNode.new('node1',1)\nnode2 = Tree::TreeNode.new('node2',2)\nnode1.add(node2)\nnode1.each_leaf { |node| puts \"name: #{node.name}, content: #{node.content}\"}\n</code></pre>\n\n<p>When I run it I get the following error message:</p>\n\n<pre><code>test.rb:5:in `&lt;main&gt;': undefined method `each_leaf' for #&lt;Tree::TreeNode:0x007fc2a905e560&gt; (NoMethodError)\n</code></pre>\n\n<p>but when I run the code with <code>each_leaf</code> replaced by <code>each</code> it works perfectly (of course I get info for nodes 1 and 2, whereas if it worked <code>each_leaf</code> should only get me the info for node 2).</p>\n\n<p>Looking through the documentation for <code>TreeNode</code> I've noticed that all the methods that don't work for me are listed next to <code>Tree::TreeNode+</code> rather than <code>Tree::TreeNode</code>. I haven't been able to figure out what this means. Do I have to do something extra or install some other gem to get those methods? Thanks for any help!</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 4373, "user_id": 1810460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5daef67cac318d3e35f84bc3f315bcfc?s=128&d=identicon&r=PG", "display_name": "Hamms", "link": "https://stackoverflow.com/users/1810460/hamms"}, "edited": false, "score": 0, "creation_date": 1464120419, "post_id": 37422809, "comment_id": 62351015, "body": "Your program seems to work fine. What problem are you having? Please ask a specific question."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464120495, "post_id": 37422809, "comment_id": 62351059, "body": "Once readers understand the question, someone will be happy to do an edit to help you with the English. Not to worry. I think it&#39;s mainly &quot; and when have negative elemt put this elevent in terminal&quot; that we don&#39;t understand."}, {"owner": {"reputation": 2801, "user_id": 4555102, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/2RQHU.jpg?s=128&g=1", "display_name": "shuba.ivan", "link": "https://stackoverflow.com/users/4555102/shuba-ivan"}, "edited": false, "score": 0, "creation_date": 1464120596, "post_id": 37422809, "comment_id": 62351112, "body": "update question. need put array element if element negative"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464120671, "post_id": 37422809, "comment_id": 62351155, "body": "Do you mean you want to display the element (<code>puts ...</code>) if it is negative? If so, do you want to display the element&#39;s indices as well (e.g., <code>&quot;a[2,3] = -4&quot;</code>)?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464121139, "post_id": 37422809, "comment_id": 62351388, "body": "<code>rand</code> isn&#39;t very random. Use something like: <code>SecureRandom.random_number(-10..10)</code> instead. <code>require &#39;securerandom&#39;</code> to enable this."}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 3, "last_activity_date": 1464120732, "creation_date": 1464120732, "answer_id": 37422996, "question_id": 37422809, "link": "https://stackoverflow.com/questions/37422809/ruby-random-array/37422996#37422996", "title": "Ruby random array", "body": "<p>You can create the <code>4x4</code> array much more simply in a single step, as follows:</p>\n\n<pre><code>a = Array.new(4) { Array.new(4) { rand(-10..10) } }\n</code></pre>\n\n<p>You can then print all negative values in the <code>4x4</code> array via a nested loop:</p>\n\n<pre><code>a.each do |row|\n  row.each do |cell|\n    puts cell if cell &lt; 0\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1464127876, "post_id": 37423626, "comment_id": 62354637, "body": "If you want to do more than just <code>puts x</code>, then looping twice is more flexible - for example, you could do <code>each_with_index</code>. In addition, this code is ~2.5 times slower. So yes, your code may be slightly more compact, but it comes at a cost."}], "tags": [], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "is_accepted": true, "score": 1, "last_activity_date": 1464123016, "creation_date": 1464123016, "answer_id": 37423626, "question_id": 37422809, "link": "https://stackoverflow.com/questions/37422809/ruby-random-array/37423626#37423626", "title": "Ruby random array", "body": "<p>No need loop it twice. </p>\n\n<pre><code>a = Array.new(4) { Array.new(4) { rand(-10..10) } }\n\na.flatten.each {|x| puts x if x&gt;0}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1464130467, "last_edit_date": 1464130467, "creation_date": 1464129453, "answer_id": 37425039, "question_id": 37422809, "link": "https://stackoverflow.com/questions/37422809/ruby-random-array/37425039#37425039", "title": "Ruby random array", "body": "<pre><code>require 'matrix'\n\nn = 4\nm = Matrix.build(n) { rand(-10..10) }\n  #=&gt; Matrix[[-5, -8, -3, 7], [-5, 5, 2, 7], [-8, -9, 8, 5], [-2, -9, -2, -4]] \nm.each_with_index { |v,r,c| puts \"m[%d,%d] = %d\" % [r,c,v] if v &lt; 0 }\nm[0,0] = -5\nm[0,1] = -8\nm[0,2] = -3\nm[1,0] = -5\nm[2,0] = -8\nm[2,1] = -9\nm[3,0] = -2\nm[3,1] = -9\nm[3,2] = -2\nm[3,3] = -4\n</code></pre>\n\n<p>If you wish to return the associated array:</p>\n\n<pre><code>m.to_a\n  #=&gt; [[-5, -8, -3, 7], [-5, 5, 2, 7], [-8, -9, 8, 5], [-2, -9, -2, -4]] \n</code></pre>\n"}], "owner": {"reputation": 2801, "user_id": 4555102, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/2RQHU.jpg?s=128&g=1", "display_name": "shuba.ivan", "link": "https://stackoverflow.com/users/4555102/shuba-ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 37423626, "answer_count": 3, "score": 0, "last_activity_date": 1464130467, "creation_date": 1464120059, "last_edit_date": 1464122502, "question_id": 37422809, "link": "https://stackoverflow.com/questions/37422809/ruby-random-array", "title": "Ruby random array", "body": "<p>I have created a two-dimensional (<code>4x4</code>) array, where each element is a random number from <code>-10</code> to <code>10</code>.</p>\n\n<p>I would like to now print all negative elements of this array in the terminal. How can one do this?</p>\n\n<p>Here is my code so far which initialises the array, along with my current attempt to print all negative values:</p>\n\n<pre><code>a = Array.new(4) { rand(-10...10) }\n\na[0] = Array.new(4) { rand(-10...10) }\na[1] = Array.new(4) { rand(-10...10) }\na[2] = Array.new(4) { rand(-10...10) }\na[3] = Array.new(4) { rand(-10...10) }\n\na.each {|i|\n  a.each {|j|\n    puts j\n  }\n}\n</code></pre>\n"}]