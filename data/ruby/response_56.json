[{"tags": ["ruby", "list", "foreach", "compare"], "comments": [{"owner": {"reputation": 765, "user_id": 233260, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/WS73l.jpg?s=128&g=1", "display_name": "sanpaco", "link": "https://stackoverflow.com/users/233260/sanpaco"}, "edited": false, "score": 0, "creation_date": 1454564988, "post_id": 35190119, "comment_id": 58103760, "body": "Did the close votes want to explain the reason this should be closed? I gave a pretty detailed question. Sorry I&#39;m not a Ruby genius."}, {"owner": {"reputation": 765, "user_id": 233260, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/WS73l.jpg?s=128&g=1", "display_name": "sanpaco", "link": "https://stackoverflow.com/users/233260/sanpaco"}, "edited": false, "score": 0, "creation_date": 1454605889, "post_id": 35190119, "comment_id": 58129895, "body": "I&#39;ve rewritten the question since others seemed to think it wasn&#39;t clear what I was asking."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 282794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e0bd0e6da47b9db55ac548a0d71fdb3?s=128&d=identicon&r=PG", "display_name": "Tim Kuntz", "link": "https://stackoverflow.com/users/282794/tim-kuntz"}, "is_accepted": false, "score": 0, "last_activity_date": 1454547426, "creation_date": 1454547426, "answer_id": 35190667, "question_id": 35190119, "link": "https://stackoverflow.com/questions/35190119/nested-for-each-to-compare-two-arrays-doesnt-match-final-item/35190667#35190667", "title": "Nested for each to compare two arrays doesn&#39;t match final item", "body": "<p>You have left out some important information about the file format and how you were reading in the contents, so I am going to make an educated guess that your comparisons are including a newline or return character. Therefore the last item in the list was different until you added the newline character.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1454548688, "creation_date": 1454548688, "answer_id": 35190843, "question_id": 35190119, "link": "https://stackoverflow.com/questions/35190119/nested-for-each-to-compare-two-arrays-doesnt-match-final-item/35190843#35190843", "title": "Nested for each to compare two arrays doesn&#39;t match final item", "body": "<blockquote>\n  <p>So my question is why did I need to have an empty line in order for the last item to show up in my results of matched items?</p>\n</blockquote>\n\n<p>Because then the last item will also end with a newline like all the others.</p>\n"}, {"comments": [{"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1482655367, "post_id": 35207444, "comment_id": 69843064, "body": "You can use the <code>chomp</code> function to sanitize the input, see my answer."}], "tags": [], "owner": {"reputation": 765, "user_id": 233260, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/WS73l.jpg?s=128&g=1", "display_name": "sanpaco", "link": "https://stackoverflow.com/users/233260/sanpaco"}, "is_accepted": false, "score": 2, "last_activity_date": 1454606602, "last_edit_date": 1454606602, "creation_date": 1454606259, "answer_id": 35207444, "question_id": 35190119, "link": "https://stackoverflow.com/questions/35190119/nested-for-each-to-compare-two-arrays-doesnt-match-final-item/35207444#35207444", "title": "Nested for each to compare two arrays doesn&#39;t match final item", "body": "<p>I'm adding my own answer because the two that are here while technically both correct aren't very descriptive and didn't lead me to my solution. Only after I figured it out on my own did I finally understand what they were saying.</p>\n\n<p>When I was loading my files into arrays using <code>IO.readlines</code> the contents of each array item contained a newline character <code>\\n</code>.</p>\n\n<p>So going off the example in my original question, the reason <code>guid_d</code> wasn't being matched is because in file_a_array, the value being used for comparison was <code>guid_d\\n</code> and the value in file_b_array was <code>guid_d</code>. The line of FileB with <code>guid_d</code> did not contain a newline character until I added it by adding the empty last line.</p>\n"}, {"comments": [{"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "reply_to_user": {"reputation": 765, "user_id": 233260, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/WS73l.jpg?s=128&g=1", "display_name": "sanpaco", "link": "https://stackoverflow.com/users/233260/sanpaco"}, "edited": false, "score": 0, "creation_date": 1482657150, "post_id": 41319787, "comment_id": 69843339, "body": "@sanpaco glad to hear! Best mark this answer the checkmark then."}], "tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 1, "last_activity_date": 1482655321, "creation_date": 1482655321, "answer_id": 41319787, "question_id": 35190119, "link": "https://stackoverflow.com/questions/35190119/nested-for-each-to-compare-two-arrays-doesnt-match-final-item/41319787#41319787", "title": "Nested for each to compare two arrays doesn&#39;t match final item", "body": "<p>Use the <code>chomp</code> function.</p>\n\n<p>This function removes trailed line breaks from a string is meant to be used to sanitize input from files. As you mention in your answer Ruby reads lines including the linebreak </p>\n\n<blockquote>\n  <p>the reason guid_d wasn't being matched is because in <code>file_a_array</code>, the value being used for comparison was <code>guid_d\\n</code> and the value in <code>file_b_array</code> was <code>guid_d</code>.</p>\n</blockquote>\n\n<p>Use <code>chomp</code> to fix this</p>\n\n<pre><code>\"guid_d\\n\".chomp # =&gt; \"guid_d\"\n\"guid_d\".chomp # =&gt; \"guid_d\"\n</code></pre>\n\n<p>Change your program to use</p>\n\n<pre><code>IO.readlines(...).map(&amp;:chomp)...\n</code></pre>\n"}], "owner": {"reputation": 765, "user_id": 233260, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/WS73l.jpg?s=128&g=1", "display_name": "sanpaco", "link": "https://stackoverflow.com/users/233260/sanpaco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1482655321, "creation_date": 1454543959, "last_edit_date": 1478108576, "question_id": 35190119, "link": "https://stackoverflow.com/questions/35190119/nested-for-each-to-compare-two-arrays-doesnt-match-final-item", "title": "Nested for each to compare two arrays doesn&#39;t match final item", "body": "<p>I have two files of user-guids that I need to compare.</p>\n\n<p><code>FileA</code> contains a list sent from a client and contains duplicates and <code>FileB</code> is a list of user-guids from our system.</p>\n\n<p>My first task is to make sure that our system has all the unique user-guids from the client's system (ie <code>FileB</code> contains all the user-guids that are in <code>FileA</code>). After that I need to determine how many of the user-guids in our system are NOT in the client's list but that's another task and is unrelated.</p>\n\n<p>The files contain one guid per line so I'm reading them into arrays and using a nested for each to compare them.</p>\n\n<p><strong>Here is my code:</strong></p>\n\n<pre><code># Open each file of users\nFileA = File.open(\"file_a.txt\")\nFileB = File.open(\"file_b.txt\")\n\n# Turn file_a into an array with only unique values and close the file\nfile_a_array = IO.readlines(FileA).uniq\nFileA.close\n\n# Turn the local file into an array, we already know each line is unique\nfile_b_array = IO.readlines(FileB)\nFileB.close\n\nfile_a_array.each do |i|\n    file_b_array.each do |j|\n        if i == j\n            puts i\n        end\n    end\nend\n</code></pre>\n\n<p>This code again is meant to return all the matches, but in reality I was seeing all the matches except one, incidentally the last one on the list of FileB.</p>\n\n<p>In trying to guess at why I was not seeing the last match I noticed that the FileA had an empty line at the end of the file but FileB did not.</p>\n\n<p><strong>Here's an example:</strong></p>\n\n<pre><code>FileA Contents:\nguid_a\nguid_b\nguid_c\nguid_d\n[empty line]\n\nFileB Contents:\nguid_a\nguid_aa\nguid_b\nguid_bb\nguid_c\nguid_cc\nguid_d\n</code></pre>\n\n<p>Notice each file contains <code>guid_d</code> but the results of running my code was returning the following as the matches:</p>\n\n<pre><code>guid_a\nguid_b\nguid_c\n</code></pre>\n\n<p>When I added an extra line to the end of <code>FileB</code> suddenly I was getting the full set.</p>\n\n<p><strong>So the question is why?</strong></p>\n"}, {"tags": ["ruby", "windows", "bluetooth", "serial-port"], "owner": {"reputation": 11, "user_id": 5737157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6453522437cf567bb9654e11551a3bf8?s=128&d=identicon&r=PG&f=1", "display_name": "Unicorn", "link": "https://stackoverflow.com/users/5737157/unicorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1454779050, "creation_date": 1454543344, "last_edit_date": 1454779050, "question_id": 35190016, "link": "https://stackoverflow.com/questions/35190016/bluetooth-serial-port-permission-error-errnoeacces-ruby-serialport-gem", "title": "Bluetooth Serial Port Permission Error Errno::EACCES [Ruby] [Serialport gem]", "body": "<p>So I am trying to send data to my Arduino through a HC-05 Bluetooth Chip. I'm using Ruby, and so far, I get the error shown below. Any idea why? I'm using Windows 10</p>\n\n<p>My arduino is on COM3 (USB) and the bluetooth chip is on COM37</p>\n\n<p><strong>Error 1</strong></p>\n\n<pre><code>in `create': Permission denied - \\\\.\\COM37 (Errno::EACCES)\n</code></pre>\n\n<p>If I try it again I get this error:</p>\n\n<p><strong>Error 2</strong></p>\n\n<pre><code>in `create': Invalid argument - \\\\.\\COM37 (Errno::EINVAL)\n</code></pre>\n\n<p><strong>Ruby Code</strong></p>\n\n<pre><code>require 'serialport'\nputs \"What COM Port?\"\ncomport = gets.chomp\ncomport = comport.to_i\ncomport = comport -1\nsp =  SerialPort.new(comport,9600)\nwhile 1\n  puts \"What message do you want to send?\"\n  write = gets.chomp\n  if write == \"exit\"\n    abort\n  end\n  sp.write write\nend\n</code></pre>\n\n<p><strong>Arduino Code</strong></p>\n\n<pre><code>#include &lt;Motor.h&gt;\n#include &lt;SoftwareSerial.h&gt;\n\nMotor m8(8);\nSoftwareSerial Bluetooth(12, 13); //12-TX 13-RX\n// Declare a new 'char' or \"character\" that we will use to store the keyboard\n// input sent to the bluetooth chip\nchar input;\nboolean stop = false;\nvoid setup() {\n  Bluetooth.begin(9600);\n  m8.attach();\n}\n\nvoid loop() {\n  // If there is input available on the bluetooth chip (that is, we sent a    character\n  // to the chip from the computer)...\n  if (Bluetooth.available()) {\n    // Read the first available character from the bluetooth chip and store it in the\n    // 'input' variable\n    input = Bluetooth.read();\n    if (input == 'w') {\n      stop != stop;\n    }\n    if (input == 'd') {\n      m8.turn(100);\n    }\n    if (input == 'a') {\n      m8.turn(-100);\n    }\n  }\n  if (stop != true) {\n    m8.stop();\n  }\n}\n</code></pre>\n\n<p><strong>If I try to connect to my arduino using COM3 and USB, I don't get an error and it successfully sends data the the arduino.</strong></p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller"], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 4192176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LphmA.jpg?s=128&g=1", "display_name": "uoroaix", "link": "https://stackoverflow.com/users/4192176/uoroaix"}, "is_accepted": false, "score": 1, "last_activity_date": 1454544924, "last_edit_date": 1454544924, "creation_date": 1454543688, "answer_id": 35190075, "question_id": 35189959, "link": "https://stackoverflow.com/questions/35189959/rails-where-do-i-put-my-api-methods/35190075#35190075", "title": "Rails: Where do I put my API methods?", "body": "<p>Well I actually never seen anyone code like this in a rails controller. Rails is a mvp framework. Controller are use to negotiate between your model and the views. First of all, if you routed correctly to your controller like \n<code>\nget \"/reports\" =&gt; \"request_report#reports\"\n</code>\nyour controller should have a method like the following\n<code>\ndef request_report\n  @client = Client.find(params[:id]) \nend\n</code>\nAnd then the controller will render and display the view in your app/views/reports/request_report.html.erb with access to the @client variable you just search from your database.</p>\n\n<p>I am not sure why you are calling the block request_report at the bottom of the page, it just doesn't make sense in a controller. And you certainly don't really need to write self in front of a controller method.\n<code>\ndef self.request_report\n your code\nend\n</code>\nAs for where to put your api controller, usually for an api controller, we can create new folders under controllers, so the structure will be like\n<code>\napp/controllers/api/v1/your_api_controller.rb\n</code>\nThen in your_api_controller.rb you will need to add namespace infront of your controller like this.\n<code>\nclass Api::V1::ReportsController &lt; ActionController::Base\nend\n</code>\nIt is the same with your routes, you will add namespace in your route.rb\n<code>\nnamespace :api do \n  namespace :v1 do \n    get \"/reports\" =&gt; \"request_report#reports\"\n  end\nend\n</code></p>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1454546418, "post_id": 35190270, "comment_id": 58098146, "body": "However one word of advice is to learn how to create basic rails apps before you start dealing with external api&#39;s. Rails is extremely powerful if you understand the conventions but its an absolute mess if you just try to figure everything out as you go along."}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1454596728, "post_id": 35190270, "comment_id": 58123293, "body": "Any more information on service objects? Do you need a separate gem for them?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 1, "creation_date": 1454605888, "post_id": 35190270, "comment_id": 58129894, "body": "@RichPeck no, you don&#39;t need a gem, you just need to append <code>app&#47;services</code> to the rails autoload path and you are good to go. They are just plain old ruby objects that just do a single job. <a href=\"http://brewhouse.io/blog/2014/04/30/gourmet-service-objects.html\" rel=\"nofollow noreferrer\">brewhouse.io/blog/2014/04/30/gourmet-service-objects.html</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1454606257, "post_id": 35190270, "comment_id": 58130136, "body": "@RichPeck Brandon Keepers has pretty interesting talk on the subject as well <a href=\"https://www.youtube.com/watch?v=JxPKljUkFQw\" rel=\"nofollow noreferrer\">youtube.com/watch?v=JxPKljUkFQw</a>"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 7, "last_activity_date": 1454546585, "last_edit_date": 1454546585, "creation_date": 1454544915, "answer_id": 35190270, "question_id": 35189959, "link": "https://stackoverflow.com/questions/35189959/rails-where-do-i-put-my-api-methods/35190270#35190270", "title": "Rails: Where do I put my API methods?", "body": "<p>The only public API of controller are the <em>actions</em> which respond to a HTTP request. In your case <code>get \"/reports\" =&gt; \"reports#request_report\"</code> is a route which corresponds to the action <code>request_report</code>.</p>\n\n<p>However actions are instance methods, not class methods:</p>\n\n<pre><code>class ReportsController\n  def request_report # self.request_report would make this a class method!\n    # @todo get reports from somewhere and\n    # return some sort of response.\n  end\n\n  # any method call here happens when the class is evaluated.\nend\n</code></pre>\n\n<p>You are declaring the action as a class method and then calling it when the ReportsController class is evaluated. Sorry to say but just about everything about your controller is wrong.</p>\n\n<p>The Rails convention would be to call the action <code>index</code>.</p>\n\n<p>Controllers in Rails should only be instantiated by the router (or your test framework). So they are definatly the wrong place to put resuable  bits and bobs. If you ever see someone doing <code>ReportsController.new.foo</code> or <code>ReportsController.foo</code> - fire them on the spot.</p>\n\n<h2>So where do you put external API calls?</h2>\n\n<p>If its a pretty trivial one-off you can place it in private method in your controller.</p>\n\n<p>Some place API calls on the model layer - however that is debatable since ActiveRecord models already are supercharged to the gills with powers and responsibilities. </p>\n\n<p>One solution that has worked well for me is <a href=\"https://blog.engineyard.com/2014/keeping-your-rails-controllers-dry-with-services\" rel=\"nofollow\">Service Objects</a>. They are easy to test and have a clear single responsibility.</p>\n\n<pre><code>class RequestReportService\n  def initalize(client)\n    @client = client\n  end \n  def call(opts = {})\n   begin\n      return @client.request_report(opts.merge(\"max_count\" =&gt; 1))\n    rescue Excon::Errors::ServiceUnavailable =&gt; e\n      nil\n    end\n  end\nend\n\nclass ReportsController\n  def index\n    @reports = RequestReportService.new(@client).call\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 2, "last_activity_date": 1454601181, "creation_date": 1454601181, "answer_id": 35205548, "question_id": 35189959, "link": "https://stackoverflow.com/questions/35189959/rails-where-do-i-put-my-api-methods/35205548#35205548", "title": "Rails: Where do I put my API methods?", "body": "<p>To add to <code>@max</code>'s excellent answer, you need to appreciate that Rails is based on a <em>stateless</em> protocol (<a href=\"https://en.wikipedia.org/wiki/Stateless_protocol\" rel=\"nofollow noreferrer\"><code>HTTP</code></a>)...</p>\n\n<blockquote>\n  <p>each request message can [only] be understood in <strong>isolation</strong>.</p>\n</blockquote>\n\n<p>This means that if you want to create a set of controller actions, you have to appreciate that each call is going to create a new <a href=\"http://www.railstips.org/blog/archives/2009/05/11/class-and-instance-methods-in-ruby/\" rel=\"nofollow noreferrer\">instance</a> of your classes etc. This, coupled with the idea of a <a href=\"https://en.wikipedia.org/wiki/Representational_state_transfer\" rel=\"nofollow noreferrer\">RESTful</a> set of actions, should give you a basis from which to build your functionality.</p>\n\n<p>--</p>\n\n<pre><code>#config/routes\nscope constraints: { subdomain: \"api\" } do\n  resources :reports #-&gt; http://api.url.com/reports\nend\n\n#app/controllers/reports_controller.rb\nclass ReportsController &lt; ApplicationController\n   respond_to :json #-&gt; requires \"responders\" gem\n\n   def index #-&gt; instance method\n      @reports = Report.all\n      respond_with @reports #-&gt; all reports\n   end\n\n   def show\n      @report = Report.find params[:id]\n      respond_with @report\n   end\nend\n</code></pre>\n\n<p>I'll leave the service object stuff as I have no experience with it. </p>\n\n<p>--</p>\n\n<p>If you're pulling from an external API, you have several considerations:</p>\n\n<blockquote>\n  <ol>\n  <li>Calls ideally need to be <a href=\"https://en.wikipedia.org/wiki/Asynchronous_I/O\" rel=\"nofollow noreferrer\"><em>asynchronous</em></a> (unless you use multi-threading)</li>\n  <li>Calls need to be made in the <em>instance</em> method </li>\n  </ol>\n</blockquote>\n\n<p>Your current pattern calls the API on the <em>class</em>, which is why you can't refresh it:</p>\n\n<pre><code>class ReportsController &lt; ApplicationController\n  @client = # Api-accessing gem\n</code></pre>\n\n<p><code>@client</code> is only invoked (I don't know why it works, as it should be a <a href=\"http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/\" rel=\"nofollow noreferrer\"><em>class</em> variable</a>) with the class.</p>\n\n<p>So if you send a new <code>request</code> (which creates an <em>instance</em> of <code>ReportsController</code>), <code>@client</code> is going to be declared that one time. </p>\n\n<p>To get it working correctly, <code>@client</code> needs to be defined with each <em>instance</em> method: </p>\n\n<pre><code>class ReportsController &lt; ApplicationController\n  def index\n    @client = # Api-accessing gem\n</code></pre>\n\n<p>This way, each time you invoke <code>ReportsController#index</code>, a new API call will be made. Might seem trivial, but the data scope is massive.</p>\n\n<hr>\n\n<p>Finally, you need to read up about <a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\" rel=\"nofollow noreferrer\"><code>MVC</code> (<code>Model View Controller</code>)</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VhbBp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VhbBp.png\" alt=\"enter image description here\"></a></p>\n\n<p>This will show you how <code>controllers</code> are meant to be used in Rails applications etc. </p>\n"}], "owner": {"reputation": 17107, "user_id": 556006, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b0dce52fa056d59908345b2e1944fae0?s=128&d=identicon&r=PG", "display_name": "JVG", "link": "https://stackoverflow.com/users/556006/jvg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1680, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1454601181, "creation_date": 1454543015, "question_id": 35189959, "link": "https://stackoverflow.com/questions/35189959/rails-where-do-i-put-my-api-methods", "title": "Rails: Where do I put my API methods?", "body": "<p>I'm very new to Rails, and I'm a little overwhelmed where I do simple things like create an API call. I've set up a route at <code>/reports</code> which has this controller:</p>\n\n<pre><code>class ReportsController &lt; ApplicationController\n\n  @client = # Api-accessing gem\n\n  @all_reports = []\n\n  def self.request_report\n\n    begin\n      puts \"Step 1:\"\n      step1 = @client.request_report(opts = {\"max_count\" =&gt; 1})\n      step1_result = step1.parse\n      puts \"Done!\"\n      puts step1_result\n\n    rescue Excon::Errors::ServiceUnavailable =&gt; e\n      puts \"Didn't work\"\n      logger.warn e.response.message\n      retry\n    end\n  end # End request_report\n\n  request_report\n\nend\n</code></pre>\n\n<p>This correctly calls the external API when I first load the <code>/reports</code> route, but when I refresh the page the code <em>isn't</em> re-run.</p>\n\n<p>Perhaps I'm misunderstanding what controllers are used for? Am I meant to be putting this code somewhere else? Or is there a caching issue? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "url", "path", "routing"], "answers": [{"comments": [{"owner": {"reputation": 4981, "user_id": 705725, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3oNDr.jpg?s=128&g=1", "display_name": "dsp_099", "link": "https://stackoverflow.com/users/705725/dsp-099"}, "edited": false, "score": 0, "creation_date": 1454546526, "post_id": 35190353, "comment_id": 58098179, "body": "Thanks for the response. Isn&#39;t slamming a bunch of code into <code>User</code> model worse over time though?"}], "tags": [], "owner": {"reputation": 359, "user_id": 4032857, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/metd1.png?s=128&g=1", "display_name": "Felipe Valdivia", "link": "https://stackoverflow.com/users/4032857/felipe-valdivia"}, "is_accepted": true, "score": 1, "last_activity_date": 1454545411, "creation_date": 1454545411, "answer_id": 35190353, "question_id": 35189697, "link": "https://stackoverflow.com/questions/35189697/how-to-organize-similar-routes-for-multiple-rails-users/35190353#35190353", "title": "How to organize similar routes for multiple Rails users?", "body": "<p>The better way for this situation is NameSpace, Rails provide us something called namespace and you can use it in the routes for generate different routes for different views in your case maybe works something like that:</p>\n\n<pre><code>namespace :accountants do\n  get 'dashboard'\n  get 'dashboard/:date'\n  get 'settings'\nend\n\nnamespace :workers do\n  get 'dashboard'\n  get 'dashboard/:date'\n  get 'settings'\nend\n</code></pre>\n\n<p>and that will generate a routes like that: </p>\n\n<pre><code>localhost:3000/accountants/1/dashboard\n\nlocalhost:3000/workers/1/settings\n</code></pre>\n\n<p>it's just and example you always can read the <a href=\"http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing\" rel=\"nofollow\">official documentation</a> about it, but it's a good way for organize your different routes thinking in the scalability.</p>\n\n<p>Another option is using roles to manage the different users you have because of you extend of user model is not scalable with the time and it's going to be a little confuse in the future read this code </p>\n\n<p>Regards ! </p>\n"}], "owner": {"reputation": 4981, "user_id": 705725, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3oNDr.jpg?s=128&g=1", "display_name": "dsp_099", "link": "https://stackoverflow.com/users/705725/dsp-099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 35190353, "answer_count": 1, "score": 0, "last_activity_date": 1454545411, "creation_date": 1454541780, "last_edit_date": 1454542217, "question_id": 35189697, "link": "https://stackoverflow.com/questions/35189697/how-to-organize-similar-routes-for-multiple-rails-users", "title": "How to organize similar routes for multiple Rails users?", "body": "<p>Let's say I have an <code>Accountant &lt; User</code> model, and a <code>Worker &lt; User</code> model. They both need to have pages like 'Settings', 'Dashboard', etc.</p>\n\n<p>Right now the paths are assigned and explicitly defined in <code>routes.rb</code>:</p>\n\n<pre><code> resources :accountants\n get '/accountant/dashboard' =&gt; 'accountant#dashboard'\n get '/accountant/dashboard/:date' =&gt; 'accountant#dashboard'\n get '/accountant/settings' =&gt; 'accountant#settings'\n\nresources :workers\nget '/worker/dashboard' =&gt; 'worker#dashboard'\nget '/worker/dashboard/:date' =&gt; 'worker#dashboard'\nget '/worker/settings' =&gt; 'worker#settings'\n</code></pre>\n\n<p>Saving the \"home\" dashboard path in a session / as application level helper methods which rely on current user class both don't seem very Ruby-esque. Is there an alternative to this in Rails 4?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1454542415, "post_id": 35189718, "comment_id": 58096741, "body": "This is weird advice, it will issue a PUT, but it will never allow to edit an existing record."}, {"owner": {"reputation": 31555, "user_id": 677684, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a785c03c08d7de6a15aaea326835cd6?s=128&d=identicon&r=PG", "display_name": "Tilo", "link": "https://stackoverflow.com/users/677684/tilo"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1454603922, "post_id": 35189718, "comment_id": 58128564, "body": "OP said they want to update a record using PUT, and this is how to achieve it."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1454617904, "post_id": 35189718, "comment_id": 58137207, "body": "So, you clearly say &quot;update&quot; a record, your answer is not updating anything. Just using PUT to get new data to the server."}, {"owner": {"reputation": 31555, "user_id": 677684, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a785c03c08d7de6a15aaea326835cd6?s=128&d=identicon&r=PG", "display_name": "Tilo", "link": "https://stackoverflow.com/users/677684/tilo"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1454627711, "post_id": 35189718, "comment_id": 58142254, "body": "check: ` PUT    /logs/:log_id/meals/:id(.:format)      meals#update` ... how is this not updating the meals record?"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 2, "creation_date": 1454668515, "post_id": 35189718, "comment_id": 58157875, "body": "Because you are not filling the form with the data the record contained before? Difference between writing <code>form_for :meal</code> and <code>form_for @meal</code>: the first just uses the symbol to build a path, the second uses the name of the model <i>and</i> the status (new/update) <i>and</i> the data of the model to pre-fill the form."}], "tags": [], "owner": {"reputation": 31555, "user_id": 677684, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a785c03c08d7de6a15aaea326835cd6?s=128&d=identicon&r=PG", "display_name": "Tilo", "link": "https://stackoverflow.com/users/677684/tilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1454706883, "last_edit_date": 1454706883, "creation_date": 1454541878, "answer_id": 35189718, "question_id": 35189653, "link": "https://stackoverflow.com/questions/35189653/rails-form-for-results-in-post-instead-of-put-when-trying-to-edit/35189718#35189718", "title": "Rails form_for results in POST instead of PUT when trying to edit", "body": "<p>The error you get:</p>\n\n<pre><code>  Routing Error\n  No route matches [POST] \"/logs/1/meals/13/edit\n</code></pre>\n\n<p>indicates that your form does a POST instead of a PUT.</p>\n\n<p>To make this work, just add <code>method: :put</code> to the form_for declaration:</p>\n\n<pre><code>&lt;%= form_for(:meal, method: :put) do |f| %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": false, "score": 0, "last_activity_date": 1454542639, "last_edit_date": 1454542639, "creation_date": 1454542263, "answer_id": 35189800, "question_id": 35189653, "link": "https://stackoverflow.com/questions/35189653/rails-form-for-results-in-post-instead-of-put-when-trying-to-edit/35189800#35189800", "title": "Rails form_for results in POST instead of PUT when trying to edit", "body": "<p>If your controller is creating an instance variable called <code>@meal</code> you should use that instead of the symbol. So write:</p>\n\n<pre><code>form_for @meal do |f| \n</code></pre>\n\n<p>and then rails can query the instance variable to see whether it is a <code>new_record?</code> (in which case it will POST the data) or an existing record (in which it will b e a PATCH most likely).</p>\n\n<p>To build a nested route, you will need to set an instance variable <code>@log</code> (I do not see that in your code, but you probably do that already), and then you can write:</p>\n\n<pre><code>form_for [@log, @meal] do |f| \n</code></pre>\n\n<p>which will calculate the correct path.</p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 5879949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abede5808c72a22f2cef70790641c8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Code Goose", "link": "https://stackoverflow.com/users/5879949/code-goose"}, "edited": false, "score": 0, "creation_date": 1454778890, "post_id": 35203445, "comment_id": 58201728, "body": "Yes! Thanks so much for the clear explanantion. I made the changes  above to  meals_controller.rb and edited meals/edit.html.erb so that I pass both the log and meal objects to the form like so   ` &lt;%= form_for [@log, @meal] do | f | %&gt; <code>, but this left me with a No Method Error and undefined method </code>meal_path&#39;. What worked for me was making the changes you suggested to meals_controller.rb and editing meals/edit.html.erb to render the form partial I use to create new meals. Thanks again for your help!"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": true, "score": 5, "last_activity_date": 1454595596, "creation_date": 1454595596, "answer_id": 35203445, "question_id": 35189653, "link": "https://stackoverflow.com/questions/35189653/rails-form-for-results-in-post-instead-of-put-when-trying-to-edit/35203445#35203445", "title": "Rails form_for results in POST instead of PUT when trying to edit", "body": "<p>The issue is that you're using <a href=\"http://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"noreferrer\"><code>nested resources</code></a>, hence you're confused about which <code>@objects</code> to pass to your <code>form_for</code>.</p>\n\n<pre><code>#app/views/meals/edit.html.erb\n&lt;%= form_for [@log, @meal] do |f| %&gt;\n</code></pre>\n\n<hr>\n\n<p>As you have it presently, <strong>passing <code>:meal</code> is ambiguous</strong> - Rails cannot discern the route / method to send its submission to, as it doesn't have that data available.</p>\n\n<p>If you wanted to <em>update</em> an object, you'll have to pass the appropriate data to the form, <em>including</em> the object's <code>id</code>:</p>\n\n<pre><code>&lt;%= form_for :meal, url: { controller: \"meals\", action: \"update\", id: \"5\" }, method: :put do |f| %&gt;\n</code></pre>\n\n<p>Such as Rails is <a href=\"https://en.wikipedia.org/wiki/Object-oriented_programming\" rel=\"noreferrer\">object orientated</a>, you'll be best passing the actual object to your <code>form_for</code>:</p>\n\n<pre><code>&lt;%= form_for @meal ...\n</code></pre>\n\n<p>--</p>\n\n<p>The issue you have is that you have a nested resource:</p>\n\n<pre><code>resources :logs do\n  resources :meals #-&gt; url.com/logs/:log_id/meals/:id\nend\n</code></pre>\n\n<p>This means <a href=\"http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for#53-Nested-resources-in-form-for\" rel=\"noreferrer\">you need to pass both the <code>Log</code> and <code>Meal</code></a> values to your <code>form</code>:</p>\n\n<pre><code>#app/controllers/meals_controller.rb\nclass MealsController &lt; ApplicationController\n  def edit\n     @log  = Log.find params[:log_id]\n     @meal = Meal.find params[:id]\n  end\n\n  def update\n     @log  = Log.find params[:log_id]\n     @meal = Meal.find params[:id]   \n     @meal.update meal_params     \n  end\nend\n\n#app/views/meals/edit.html.erb\n&lt;%= form_for [@log, @meal] do |f| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 5879949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abede5808c72a22f2cef70790641c8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Code Goose", "link": "https://stackoverflow.com/users/5879949/code-goose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4595, "favorite_count": 1, "accepted_answer_id": 35203445, "answer_count": 3, "score": 7, "last_activity_date": 1454706883, "creation_date": 1454541545, "question_id": 35189653, "link": "https://stackoverflow.com/questions/35189653/rails-form-for-results-in-post-instead-of-put-when-trying-to-edit", "title": "Rails form_for results in POST instead of PUT when trying to edit", "body": "<p>I am using <strong>Rails 4</strong> and have the following error.</p>\n\n<blockquote>\n  <p>Routing Error<br>\n  No route matches [POST] \"/logs/1/meals/13/edit</p>\n</blockquote>\n\n<p>I\u2019m passing form_for the model object using :meal and the edit page is rendering correctly. However, Rails does not seem to be checking whether or not the meal object has already been saved, so it keeps trying to send the form to the #create action and tries make a POST request instead of sending the form to the update action and making a PUT request when I hit submit. </p>\n\n<p><strong>How do I get the form_for to recognize that I am trying to update an existing object and that PUT is needed instead of POST?</strong> Everything else is working and I\u2019ve run all of my migrations. I\u2019m pretty new to Rails, and I\u2019ve spent almost all day trying to figure this out on my own. Please help!  </p>\n\n<p>And just to note, when I tried to pass in the model object as @meal.log instead of :meal, Rails was no longer able to recognize :calorie_estimate or :meal_description. Passing the model object as @meal.log left me with a no method error.</p>\n\n<p>meals/edit.html.erb</p>\n\n<pre><code>&lt;h3&gt; EDIT MEAL &lt;/h3&gt;\n&lt;%= form_for(:meal) do |f| %&gt;\n&lt;div id=\"meal-form\"&gt;\n    &lt;%= f.text_field :calorie_estimate, class: 'meal-form-fields', :placeholder =&gt; \"Calorie Estimate\" %&gt;\n    &lt;%= f.text_field :meal_description, class: 'meal-form-fields', :placeholder =&gt; \"Food Description\" %&gt;\n  &lt;div class=\"submit-form\" style=\"width: 75px; height: 15px;\"&gt;\n    &lt;%= f.submit 'UPDATE', :class =&gt; 'submit-form-text' %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>meals_controller.rb</p>\n\n<pre><code>class MealsController &lt; ApplicationController\n  include MealsHelper\n\n  def create\n    @meal = Meal.new(meal_params)\n    @meal.log_id = params[:log_id]\n    @meal.save\n\n    redirect_to log_path(@meal.log)\n  end\n\n  def edit\n    @meal = Meal.find(params[:id])\n  end\n\n  def update\n    @meal = Meal.find(params[:id])\n    @meal.update(meal_params)\n    redirect_to log_path(@log)\n  end\n\n  def meal_params\n    params.require(:meal).permit(:calorie_estimate, :meal_description)\n  end\n\nend\n</code></pre>\n\n<p>possible routes:</p>\n\n<pre><code>Prefix Verb   URI Pattern                            Controller#Action\n         root GET    /                                      logs#index\n    log_meals GET    /logs/:log_id/meals(.:format)          meals#index\n              POST   /logs/:log_id/meals(.:format)          meals#create\n new_log_meal GET    /logs/:log_id/meals/new(.:format)      meals#new\nedit_log_meal GET    /logs/:log_id/meals/:id/edit(.:format) meals#edit\n     log_meal GET    /logs/:log_id/meals/:id(.:format)      meals#show\n              PATCH  /logs/:log_id/meals/:id(.:format)      meals#update\n              PUT    /logs/:log_id/meals/:id(.:format)      meals#update\n              DELETE /logs/:log_id/meals/:id(.:format)      meals#destroy\n         logs GET    /logs(.:format)                        logs#index\n              POST   /logs(.:format)                        logs#create\n      new_log GET    /logs/new(.:format)                    logs#new\n     edit_log GET    /logs/:id/edit(.:format)               logs#edit\n          log GET    /logs/:id(.:format)                    logs#show\n              PATCH  /logs/:id(.:format)                    logs#update\n              PUT    /logs/:id(.:format)                    logs#update\n              DELETE /logs/:id(.:format)                    logs#destroy\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  root to: 'logs#index'\n\n  resources :logs do\n    resources :meals\n  end\nend\n</code></pre>\n\n<p>schema.rb</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20160128205351) do\n\n  # These are extensions that must be enabled in order to support this database\n  enable_extension \"plpgsql\"\n\n  create_table \"logs\", force: :cascade do |t|\n    t.string   \"entry_date\"\n    t.integer  \"calorie_goal\"\n    t.string   \"notes\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"meals\", force: :cascade do |t|\n    t.integer  \"calorie_estimate\"\n    t.string   \"meal_description\"\n    t.integer  \"log_id\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "testing"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1454541863, "post_id": 35189547, "comment_id": 58096542, "body": "What is assigned to the variable <code>input</code> before it enters the <code>if&#47;else</code> statement?  If it&#39;s not &quot;exampletestemail2903@gmail.com&quot;, it will be &quot;Wong&quot;."}, {"owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1454541958, "post_id": 35189547, "comment_id": 58096582, "body": "Unsure what you mean? I just basically want to check that the email address entered using sendkeys is correct."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1454542516, "post_id": 35189547, "comment_id": 58096784, "body": "You are assigning to a<code>input</code> variable here: <code>input = wait.until { ... }</code>.  When you enter the <code>if&#47;else</code> statement, what is the value of <code>input</code>?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454542665, "post_id": 35189547, "comment_id": 58096850, "body": "Welcome to Stack Overflow. We&#39;re not concerned about your &quot;newbieness&quot;, we just want you to do your due-diligence prior to asking and research and try, a lot, then write a well thought-out question. I&#39;d recommend you check your grammar and spelling as those are important. It will help you to read <a href=\"http://catb.org/esr/faqs/smart-questions.html\" rel=\"nofollow noreferrer\">catb.org/esr/faqs/smart-questions.html</a> and <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a> along with &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}, {"owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "edited": false, "score": 0, "creation_date": 1454543419, "post_id": 35189547, "comment_id": 58097139, "body": "Value that is input: exampletestemail2903@gmail.com"}, {"owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "edited": false, "score": 0, "creation_date": 1454543603, "post_id": 35189547, "comment_id": 58097195, "body": "Or how do I assert that the value that has been inputted using sendkeys is the correct input value?"}], "answers": [{"comments": [{"owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "edited": false, "score": 0, "creation_date": 1454577503, "post_id": 35190340, "comment_id": 58110129, "body": "This did not work it still prints the else block to the console. Wonder why checking the inputted text is so difficult !"}], "tags": [], "owner": {"reputation": 21, "user_id": 4326965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwvA6.jpg?s=128&g=1", "display_name": "Nic Collins", "link": "https://stackoverflow.com/users/4326965/nic-collins"}, "is_accepted": false, "score": 0, "last_activity_date": 1454545371, "creation_date": 1454545371, "answer_id": 35190340, "question_id": 35189547, "link": "https://stackoverflow.com/questions/35189547/how-to-assert-verify-tests-using-selenium/35190340#35190340", "title": "How to assert/verify tests using Selenium", "body": "<p>It looks like you are trying to verify that send_keys is working correctly. That is unless there is some other action that could change the field you are entering text into after the text has been entered.\nAs for the reason that your if block is always going to the else is that you are comparing an element to a string. The if block should be changed to the following to compare a string to a string:</p>\n\n<pre><code>if input.text == \"exampletestemail2903@gmail.com\"\n</code></pre>\n\n<p>That should fix the if block to be functioning as you expect.</p>\n"}, {"comments": [{"owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "edited": false, "score": 0, "creation_date": 1454577441, "post_id": 35192508, "comment_id": 58110083, "body": "It still prints &#39;Wrong Input&#39; to the console? Thanks for assistant"}, {"owner": {"reputation": 672, "user_id": 5788146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22eb214b625f168dd5ed1c4d39e2f9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sarabjit Singh", "link": "https://stackoverflow.com/users/5788146/sarabjit-singh"}, "reply_to_user": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "edited": false, "score": 0, "creation_date": 1454583638, "post_id": 35192508, "comment_id": 58114555, "body": "Can you try with if element.text == &quot;exampletestemail2903@gmail.com&quot; Instead of if input.text == &quot;exampletestemail2903@gmail.com&quot; And confirm me if this helps you?"}, {"owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "edited": false, "score": 0, "creation_date": 1454583646, "post_id": 35192508, "comment_id": 58114564, "body": "I will try this Tonight. Thanks"}], "tags": [], "owner": {"reputation": 672, "user_id": 5788146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22eb214b625f168dd5ed1c4d39e2f9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sarabjit Singh", "link": "https://stackoverflow.com/users/5788146/sarabjit-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1454560067, "creation_date": 1454560067, "answer_id": 35192508, "question_id": 35189547, "link": "https://stackoverflow.com/questions/35189547/how-to-assert-verify-tests-using-selenium/35192508#35192508", "title": "How to assert/verify tests using Selenium", "body": "<p>You need to verify text in textbox to assert its value</p>\n\n<pre><code>element = driver.find_element :id =&gt; \"gmail-sign-in\"\nelement.click\n\nelement = driver.find_element :id =&gt; \"Email\"\nelement.send_keys \"exampletestemail2903@gmail.com\"\n\n\ninput = wait.until {\n  element = driver.find_element :id =&gt; \"Email\"\n  element if element.displayed?\n}\ninput.send_keys(\"exampletestemail2903@gmail.com\")\nif input.text == \"exampletestemail2903@gmail.com\"\n  puts 'Correct Input'\nelse\n  puts 'Wong Input'\nend\n</code></pre>\n\n<p>Hope this Helps :)</p>\n"}], "owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1454560067, "creation_date": 1454540945, "last_edit_date": 1454542832, "question_id": 35189547, "link": "https://stackoverflow.com/questions/35189547/how-to-assert-verify-tests-using-selenium", "title": "How to assert/verify tests using Selenium", "body": "<p>How would I check to see if the correct text was input into the text box? </p>\n\n<p>My code is:</p>\n\n<pre><code>element = driver.find_element :id =&gt; \"gmail-sign-in\"\nelement.click\n\nelement = driver.find_element :id =&gt; \"Email\"\nelement.send_keys \"exampletestemail2903@gmail.com\"\n\n\ninput = wait.until {\n  element = driver.find_element :id =&gt; \"Email\"\n  element if element.displayed?\n}\ninput.send_keys(\"exampletestemail2903@gmail.com\")\nif input == \"exampletestemail2903@gmail.com\"\n  puts 'Correct Input'\nelse\n  puts 'Wong Input'\nend\n</code></pre>\n\n<p>For example, I have this to check if the input text is correct, however, it prints the <code>else</code> message even though the input is correct.</p>\n\n<p>Can someone explain why?</p>\n"}, {"tags": ["ruby", "rubygems", "jekyll", "kramdown", "rouge"], "comments": [{"owner": {"reputation": 1701, "user_id": 5455207, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6fa7e8a0b8a820fa63c7cfd1833b1be4?s=128&d=identicon&r=PG", "display_name": "Virtua Creative", "link": "https://stackoverflow.com/users/5455207/virtua-creative"}, "edited": false, "score": 1, "creation_date": 1454542853, "post_id": 35189481, "comment_id": 58096912, "body": "Instead of this line: <code>syntax_highlighter : rouge</code> try just replacing it for <code>highlighter: rouge</code>. And for kramdown input, make sure you have 2 spaces before <code>input: GFM</code> . This should work with this ``` for code blocks (which is what you need, right?). Then run Jekyll serve with bundler."}, {"owner": {"reputation": 1420, "user_id": 336150, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a67d2111b2d187221a168b536da038bd?s=128&d=identicon&r=PG", "display_name": "Christian Tang", "link": "https://stackoverflow.com/users/336150/christian-tang"}, "reply_to_user": {"reputation": 1701, "user_id": 5455207, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6fa7e8a0b8a820fa63c7cfd1833b1be4?s=128&d=identicon&r=PG", "display_name": "Virtua Creative", "link": "https://stackoverflow.com/users/5455207/virtua-creative"}, "edited": false, "score": 0, "creation_date": 1454579039, "post_id": 35189481, "comment_id": 58111224, "body": "I already tried that. I am using the two spaces in front of input: GFM I couldn&#39;t figure out how to post the YAML _config.yml here on Stack Overflow. I am using bundler to run Jekyll <code>bundle bundler exec jekyll serve</code>"}, {"owner": {"reputation": 1701, "user_id": 5455207, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6fa7e8a0b8a820fa63c7cfd1833b1be4?s=128&d=identicon&r=PG", "display_name": "Virtua Creative", "link": "https://stackoverflow.com/users/5455207/virtua-creative"}, "edited": false, "score": 0, "creation_date": 1454597545, "post_id": 35189481, "comment_id": 58123897, "body": "Hmmm. I&#39;ve got a similar issue and I&#39;ve found out that I need to left a blank line between the previous paragraph and the code block markup. Did you do that? Like, write some txt then hit <code>enter</code> or <code>return</code> then hit it again, and then comes the ``` ."}], "answers": [{"tags": [], "owner": {"reputation": 800, "user_id": 1767423, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMB08.jpg?s=128&g=1", "display_name": "Hassan", "link": "https://stackoverflow.com/users/1767423/hassan"}, "is_accepted": false, "score": 2, "last_activity_date": 1454666466, "creation_date": 1454666466, "answer_id": 35221179, "question_id": 35189481, "link": "https://stackoverflow.com/questions/35189481/fenced-codeblocks-in-jekyll/35221179#35221179", "title": "Fenced codeblocks in Jekyll", "body": "<p>This configuration works for me.</p>\n\n<p><strong>_config.yml</strong></p>\n\n<pre><code>markdown: kramdown\nkramdown: \n  input: GFM\n  syntax_highlighter: rouge\n</code></pre>\n\n<p><strong>test.md</strong></p>\n\n<pre><code>#### Writing a simple C Program\n\n```c\n\n#include &lt;stdio.h&gt;\nint main(){\n printf(\"Hello Drone\\n\");\n return 0;\n}\n```\n\nCompile and run the program on native system to test the code.\n</code></pre>\n"}], "owner": {"reputation": 1420, "user_id": 336150, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a67d2111b2d187221a168b536da038bd?s=128&d=identicon&r=PG", "display_name": "Christian Tang", "link": "https://stackoverflow.com/users/336150/christian-tang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1454882598, "creation_date": 1454540619, "last_edit_date": 1454882598, "question_id": 35189481, "link": "https://stackoverflow.com/questions/35189481/fenced-codeblocks-in-jekyll", "title": "Fenced codeblocks in Jekyll", "body": "<p>I have just upgraded my local Jekyll installation to Jekyll 3.0.2.</p>\n\n<p>I was looking forward to use fenced (backticks) code blocks when posting source code.</p>\n\n<p>This however doesn't work, and I still have to use Liquid tags to specify codeblocks</p>\n\n<h1>My build settings in _config.yml:</h1>\n\n<pre><code>baseurl: /\ndestination: _site\npermalink: pretty\nmarkdown: kramdown\nkramdown:\n  input: GFM\n  syntax_highlighter: rouge\n</code></pre>\n\n<h1>List of Ruby gems installed</h1>\n\n<pre><code>activesupport (4.2.5.1)\naddressable (2.3.8)\nbigdecimal (1.2.6)\nbundler (1.11.2)\ncoffee-script (2.4.1)\ncoffee-script-source (1.10.0)\ncolorator (0.1)\nethon (0.8.1)\nexecjs (2.6.0)\nfaraday (0.9.2)\nffi (1.9.10 x64-mingw32)\ngemoji (2.1.0)\ngithub-pages (45)\ngithub-pages-health-check (0.6.0)\nhtml-pipeline (2.3.0)\ni18n (0.7.0)\nio-console (0.4.3)\njekyll (3.0.2)\njekyll-coffeescript (1.0.1)\njekyll-feed (0.3.1)\njekyll-gist (1.4.0)\njekyll-mentions (1.0.0)\njekyll-paginate (1.1.0)\njekyll-redirect-from (0.9.1)\njekyll-sass-converter (1.3.0)\njekyll-seo-tag (0.1.4)\njekyll-sitemap (0.10.0)\njekyll-textile-converter (0.1.0)\njekyll-watch (1.3.1)\njemoji (0.5.1)\njson (1.8.3, 1.8.1)\nkramdown (1.9.0)\nliquid (3.0.6)\nlisten (3.0.5)\nmercenary (0.3.5)\nmini_portile2 (2.0.0)\nminitest (5.8.4, 5.4.3)\nmultipart-post (2.0.0)\nnet-dns (0.8.0)\nnokogiri (1.6.7.2 x64-mingw32)\noctokit (4.2.0)\npower_assert (0.2.2)\npsych (2.0.8)\npublic_suffix (1.5.3)\nrake (10.4.2)\nrb-fsevent (0.9.7)\nrb-inotify (0.9.5)\nrdiscount (2.1.8)\nrdoc (4.2.0)\nredcarpet (3.3.3)\nRedCloth (4.2.9)\nrouge (1.10.1)\nsafe_yaml (1.0.4)\nsass (3.4.21)\nsawyer (0.6.0)\nterminal-table (1.5.2)\ntest-unit (3.0.8)\nthread_safe (0.3.5)\ntyphoeus (0.8.0)\ntzinfo (1.2.2)\n</code></pre>\n"}, {"tags": ["ruby", "postgresql", "ruby-on-rails-4", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1454544114, "post_id": 35189459, "comment_id": 58097383, "body": "0xa3 is the codepoint for the pound sign in microsuft&#39;s cp1252 (and iso8859-1). Your data is probably not coded as utf8. <a href=\"https://en.wikipedia.org/wiki/Windows-1252\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Windows-1252</a>"}, {"owner": {"reputation": 76, "user_id": 3284851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rycSC.jpg?s=128&g=1", "display_name": "Node Noodler", "link": "https://stackoverflow.com/users/3284851/node-noodler"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1454677828, "post_id": 35189459, "comment_id": 58164263, "body": "You are right @wildplasser, the source file has Microsoft coding - an HTML file download with .xls extension. Ruby handled it as UTF-8 apart from the &#163; sign, which was not preceded by the correct character sequence."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 3284851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rycSC.jpg?s=128&g=1", "display_name": "Node Noodler", "link": "https://stackoverflow.com/users/3284851/node-noodler"}, "is_accepted": true, "score": 2, "last_activity_date": 1454540916, "last_edit_date": 1454540916, "creation_date": 1454540533, "answer_id": 35189460, "question_id": 35189459, "link": "https://stackoverflow.com/questions/35189459/british-pound-sign-%c2%a3-causing-pgcharacternotinrepertoire-error-invalid-byte-s/35189460#35189460", "title": "British Pound Sign &#163; causing PG::CharacterNotInRepertoire: ERROR: invalid byte sequence for encoding \u201cUTF8\u201d: 0xa3", "body": "<p>I'm answering my own question thanks to Michael Fuhr who explained the <a href=\"http://www.postgresql.org/message-id/B03E7678-25C9-4D9D-8805-42F59A88E515@mac.com\" rel=\"nofollow\">UTF-8 byte sequence</a> for the pound sign is 0xc2 0xa3. So, all you have to do is find each occurrence of 0xa3 (163) and place 0xc2 (194) in front of it...</p>\n\n<pre><code>array_bytes = string.bytes\nnew_pound_ptr = 0\n# Look for \u00a3 sign \npound_ptr = array_bytes.index(163)\nwhile !pound_ptr.nil?\n  pound_ptr+= new_pound_ptr # new_pound_ptr is set at end of block\n  # The following statement finds incorrectly sequenced \u00a3 sign...\n  if (pound_ptr == 0) || (array_bytes[pound_ptr-1] != 194)\n    array_bytes.insert(pound_ptr,194)\n      pound_ptr+= 1\n    end\n    new_pound_ptr = pound_ptr\n    # Search remainder of array for pound sign\n    pound_ptr = array_bytes[(new_pound_ptr+1)..-1].index(163)\n  end\nend\n# Convert bytes to 8-bit unsigned char, and UTF-8\nstring = array_bytes.pack('C*').force_encoding('UTF-8') unless new_pound_ptr == 0\n# Can now write string to model without out-of-sequence error..\nhash[\"description\"] = string\nModel.create!(hash)\n</code></pre>\n\n<p>I've had so much help on this stackoverflow forum, I hope I have helped somebody else.</p>\n"}], "owner": {"reputation": 76, "user_id": 3284851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rycSC.jpg?s=128&g=1", "display_name": "Node Noodler", "link": "https://stackoverflow.com/users/3284851/node-noodler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 35189460, "answer_count": 1, "score": 0, "last_activity_date": 1454540916, "creation_date": 1454540533, "question_id": 35189459, "link": "https://stackoverflow.com/questions/35189459/british-pound-sign-%c2%a3-causing-pgcharacternotinrepertoire-error-invalid-byte-s", "title": "British Pound Sign &#163; causing PG::CharacterNotInRepertoire: ERROR: invalid byte sequence for encoding \u201cUTF8\u201d: 0xa3", "body": "<p>When collecting information containing the British Pound Sign '\u00a3' from external sources such as my bank, via csv file, and posting to postgres using ActiveRecord, I get the error:</p>\n\n<blockquote>\n  <p>PG::CharacterNotInRepertoire: ERROR: invalid byte sequence for encoding \u201cUTF8\u201d: 0xa3</p>\n</blockquote>\n\n<p>The 0xa3 is the hex code for a \u00a3 sign. The perceived wisdom is to clearly specify UTF-8 on the string whilst replacing invalid byte sequences..</p>\n\n<pre><code>string.encode('UTF-8', {:invalid =&gt; :replace, :undef =&gt; :replace, :replace =&gt; '?'})\n</code></pre>\n\n<p>This stops the error, but is a lossy fix as the '\u00a3' is converted into a '?' </p>\n\n<p>UTF-8 is able to handle the '\u00a3' sign, so what can be done to fix the invalid byte sequence and persist the '\u00a3' sign?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 17107, "user_id": 556006, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b0dce52fa056d59908345b2e1944fae0?s=128&d=identicon&r=PG", "display_name": "JVG", "link": "https://stackoverflow.com/users/556006/jvg"}, "edited": false, "score": 0, "creation_date": 1454540170, "post_id": 35189358, "comment_id": 58095887, "body": "Not entirely sure what you mean by this. Why would I need to put <code>request_all_listings</code> inside a separate method? If I then need to call <code>initialize</code> that just repeats the problem, surely?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 17107, "user_id": 556006, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b0dce52fa056d59908345b2e1944fae0?s=128&d=identicon&r=PG", "display_name": "JVG", "link": "https://stackoverflow.com/users/556006/jvg"}, "edited": false, "score": 0, "creation_date": 1497639602, "post_id": 35189358, "comment_id": 76180598, "body": "@Jascination <code>initialize</code>, if it exists, is automatically run on object creation."}], "tags": [], "owner": {"reputation": 18048, "user_id": 661589, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/54d910c2365b1e965a4007607a71b162?s=128&d=identicon&r=PG", "display_name": "Gavriel", "link": "https://stackoverflow.com/users/661589/gavriel"}, "is_accepted": false, "score": 0, "last_activity_date": 1454540502, "last_edit_date": 1454540502, "creation_date": 1454540104, "answer_id": 35189358, "question_id": 35189308, "link": "https://stackoverflow.com/questions/35189308/ruby-undefined-local-variable-or-method-for-class/35189358#35189358", "title": "Ruby: undefined local variable or method for Class", "body": "<p>move the line <code>request_all_listings</code> into the constructor:</p>\n\n<pre><code>def initialize\n    request_all_listings\nend\n</code></pre>\n\n<p>When you create a ReportsController instance, <code>initialize</code> will automatically run:</p>\n\n<pre><code>reports = ReportsController.new\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17107, "user_id": 556006, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b0dce52fa056d59908345b2e1944fae0?s=128&d=identicon&r=PG", "display_name": "JVG", "link": "https://stackoverflow.com/users/556006/jvg"}, "edited": false, "score": 0, "creation_date": 1454542590, "post_id": 35189548, "comment_id": 58096820, "body": "Great, detailed response! I&#39;m very new to Ruby (I&#39;m a Node dev, don&#39;t hit me), this is actually for accessing an API so it needs to run every time the associated view is loaded, which seems to be different than what you&#39;re suggesting. Is that so?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 17107, "user_id": 556006, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b0dce52fa056d59908345b2e1944fae0?s=128&d=identicon&r=PG", "display_name": "JVG", "link": "https://stackoverflow.com/users/556006/jvg"}, "edited": false, "score": 0, "creation_date": 1454544184, "post_id": 35189548, "comment_id": 58097418, "body": "@Jascination No, same thing. I&#39;m guessing this is Rails. Rails (and just about anything else) will only load a class once when the server starts, so with your method <code>request_all_listings</code> will only ever run once. Rails (I think) will create an instance of the controller class for each request. In Ruby, everything is about objects."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 6, "last_activity_date": 1454540951, "last_edit_date": 1495535305, "creation_date": 1454540951, "answer_id": 35189548, "question_id": 35189308, "link": "https://stackoverflow.com/questions/35189308/ruby-undefined-local-variable-or-method-for-class/35189548#35189548", "title": "Ruby: undefined local variable or method for Class", "body": "<p><code>request_all_listings</code> is ambiguous.  It's either a variable or a <strong><em>class method call</em></strong>.  <code>request_all_listings</code> is an object method.</p>\n\n<p>To fix it, you need to either define <code>request_all_listings</code> as a class method.</p>\n\n<pre><code>def self.request_all_listings\n    ...\nend\n</code></pre>\n\n<p>Or create an object to call <code>request_all_listings</code> with.</p>\n\n<pre><code>ReportsController.new.request_all_listings\n</code></pre>\n\n<hr>\n\n<p>In general it's bad form to do work when a class is loaded.  This makes it impossible to load the class without it doing work and can slow things down and make it difficult to use and test.</p>\n\n<p>Instead I'd suggest doing this work when an instance is loaded and caching it in a <a href=\"https://stackoverflow.com/questions/15773552/ruby-class-instance-variable-vs-class-variable\">class instance variable</a>.</p>\n\n<pre><code>class Foo\n  # class instance variable\n  @all_listings = []\n\n  # class method\n  def self.request_all_listings\n    puts \"Calling request_all_listings\"\n    @all_listings = [1,2,3]\n\n    return\n  end\n\n  # class method\n  def self.all_listings\n    request_all_listings if @all_listings.size == 0\n\n    return @all_listings\n  end\n\n  # object method\n  def all_listings\n    return self.class.all_listings\n  end\nend\n\n# request_all_listings is only called once for two objects\nputs Foo.new.all_listings.inspect\nputs Foo.new.all_listings.inspect\n</code></pre>\n"}], "owner": {"reputation": 17107, "user_id": 556006, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b0dce52fa056d59908345b2e1944fae0?s=128&d=identicon&r=PG", "display_name": "JVG", "link": "https://stackoverflow.com/users/556006/jvg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6070, "favorite_count": 0, "accepted_answer_id": 35189548, "answer_count": 2, "score": 3, "last_activity_date": 1454540951, "creation_date": 1454539821, "question_id": 35189308, "link": "https://stackoverflow.com/questions/35189308/ruby-undefined-local-variable-or-method-for-class", "title": "Ruby: undefined local variable or method for Class", "body": "<p>I have what I assumed was a very simple method within my controller:</p>\n\n<pre><code>class ReportsController &lt; ApplicationController\n\n  client = MWS.reports\n\n  def request_all_listings\n    begin\n      parser = client.request_report('_GET_FLAT_FILE_OPEN_LISTINGS_DATA_', opts = {})\n      @result = parser.parse[\"ReportRequestInfo\"][\"ReportProcessingStatus\"]\n\n      puts @result\n\n    rescue Excon::Errors::ServiceUnavailable =&gt; e\n      logger.warn e.response.message\n      retry\n    end\n  end\n\n  request_all_listings\n\nend\n</code></pre>\n\n<p>This gives me the error:</p>\n\n<pre><code> undefined local variable or method `request_all_listings' for ReportsController:Class\n</code></pre>\n\n<p>What am I doing wrong here? When I delete the <code>def request_all_listings</code> def and end lines and just have the begin/rescue/end my code works fine...</p>\n"}, {"tags": ["ruby", "pipe", "ipc", "jruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 2, "creation_date": 1454536840, "post_id": 35188517, "comment_id": 58094348, "body": "There are a number of ways, but the best for a task with any complexity is probably <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/open3/rdoc/Open3.html\" rel=\"nofollow noreferrer\">Open3</a> from the standard library."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454543227, "post_id": 35188517, "comment_id": 58097071, "body": "Ruby has a number of ways of opening pipes and sending information between running scripts or other applications. There are lots of examples and documentation for doing this. I&#39;d suggest doing more research."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1454547782, "post_id": 35188517, "comment_id": 58098593, "body": "There is almost the exact example you have (involving <code>bc</code>) in documentation for <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/open3/rdoc/Open3.html#method-c-popen2\" rel=\"nofollow noreferrer\">Open3#popen2</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1905, "user_id": 794627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f0faa9b905f0eeff93547ec33fc59b?s=128&d=identicon&r=PG", "display_name": "Aldehir", "link": "https://stackoverflow.com/users/794627/aldehir"}, "is_accepted": false, "score": 0, "last_activity_date": 1454540319, "last_edit_date": 1454540319, "creation_date": 1454538961, "answer_id": 35189117, "question_id": 35188517, "link": "https://stackoverflow.com/questions/35188517/what-is-the-ruby-way-of-piping/35189117#35189117", "title": "What is the ruby way of piping?", "body": "<p>If you want to read output from a program, then your best bet is to spawn a pseudo terminal (pty) so its output is line buffered. Luckily, it's pretty easy with Ruby's PTY module. In the example I use <code>IO.select</code> and nonblocking calls to avoid threads.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#!/usr/bin/env ruby\nrequire 'pty'\n\nr, w, pid = PTY.spawn('bc -i')\nrunning = true\n\nwhile running\n  fds = IO.select([$stdin, r])\n\n  # fds[0] is an array of IO objects that are ready to be read from\n  fds[0].each do |fd|\n    if fd == r\n      output = r.read_nonblock(1024)\n      output.split(\"\\n\").each { |l| puts '&lt;- bc: ' + l }\n    elsif fd == $stdin\n      line = $stdin.gets.strip\n      if line == 'exit'\n        running = false\n        break\n      end\n\n      w.write_nonblock(line + \"\\n\")\n    end\n  end\nend\n\nProcess.kill(\"TERM\", pid)\nProcess.waitpid(pid)\n</code></pre>\n\n<p>Outputs,</p>\n\n<pre><code>&lt;- bc: bc 1.06.95\n&lt;- bc: Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc.\n&lt;- bc: This is free software with ABSOLUTELY NO WARRANTY.\n&lt;- bc: For details type `warranty'.\n&lt;- bc:\n1+1\n&lt;- bc: 1+1\n&lt;- bc: 2\n2*3\n&lt;- bc: 2*3\n&lt;- bc: 6\nexit\n</code></pre>\n"}], "owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 373, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1454540319, "creation_date": 1454536502, "question_id": 35188517, "link": "https://stackoverflow.com/questions/35188517/what-is-the-ruby-way-of-piping", "title": "What is the ruby way of piping?", "body": "<p>I'm building a program in Ruby that has to read in other programs' <code>stdout</code> and send some text to their <code>stdin</code>. The current solution I found is by using JRuby and using some familiar Java functions to do the task. Is there also a pure Ruby solution for this?</p>\n\n<pre><code>require 'java'\n\njava_import java.lang.ProcessBuilder\njava_import java.io.PrintStream\njava_import java.util.Scanner\n\nprocess = ProcessBuilder.new(\"bc\", \"-i\").start\nThread.new {\n    input = Scanner.new(process.input_stream)\n    while input.has_next_line? do\n        puts(\"&lt;- bc: \" + input.next_line)\n    end\n}\noutput = PrintStream.new(process.output_stream)\nloop do\n    s = gets.chomp\n    if s == \"exit\"\n        break\n    end\n    output.println(s)\n    output.flush\nend\n</code></pre>\n\n<p><strong>program run</strong></p>\n\n<pre><code>&lt;- bc: bc 1.06.95\n&lt;- bc: Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc.\n&lt;- bc: This is free software with ABSOLUTELY NO WARRANTY.\n&lt;- bc: For details type `warranty'.\n1+1\n&lt;- bc: 1+1\n&lt;- bc: 2\n&lt;- bc:\n2*3\n&lt;- bc: 2*3\n&lt;- bc: 6\n&lt;- bc:\nexit\n</code></pre>\n"}, {"tags": ["ruby", "css-selectors", "nokogiri"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1454536649, "post_id": 35188283, "comment_id": 58094240, "body": "&quot;Notice that both are in the same <code>span</code>.&quot; Well... no. They&#39;re in two different <code>span</code>s which both happen to have the same <code>class</code> attribute. Presumably <code>page.css(&#39;.hpConsumableBlockHeaderText&#39;)</code> returns both elements, but you&#39;re using <code>page.css(&#39;.hpConsumableBlockHeaderText&#39;)[1]</code>, which will return the second one, when it seems like you want the first. Have you tried <code>[0]</code> instead?"}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454537444, "post_id": 35188283, "comment_id": 58094651, "body": "@Jordan I have not I&#39;ll try that really quick"}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454539269, "post_id": 35188283, "comment_id": 58095531, "body": "@Jordan Post it in a answer and i&#39;ll accept it"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454542877, "post_id": 35188283, "comment_id": 58096919, "body": "Glad it was helpful! I&#39;ve posted an answer."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454543823, "post_id": 35188283, "comment_id": 58097295, "body": "Please do not use images to display HTML or data. We can&#39;t use that to create test cases or use it in answers without typing it in. Instead, summarize the HTML to the bare minimum necessary to demonstrate your code&#39;s problem. Anything else wastes our time, slowing our answers, or worse, discourages attempts to answer. You have to help us help you."}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454587958, "post_id": 35188283, "comment_id": 58117310, "body": "@theTinMan My bad, will do next time, chief.."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454544128, "post_id": 35189910, "comment_id": 58097393, "body": "Just use <code>page.at(&#39;.hpConsumableBlockHeaderText&#39;)</code>."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 0, "last_activity_date": 1454542858, "creation_date": 1454542858, "answer_id": 35189910, "question_id": 35188283, "link": "https://stackoverflow.com/questions/35188283/nokogiri-capturing-the-correct-css-selector-but-selector-changes/35189910#35189910", "title": "Nokogiri capturing the correct css selector but selector changes", "body": "<p>Presumably <code>page.css('.hpConsumableBlockHeaderText')</code>returns both elements, but you're using <code>page.css('.hpConsumableBlockHeaderText')[1]</code> which will return the second one, when it seems like you want the first. Try this instead:</p>\n\n<pre><code>page.css('.hpConsumableBlockHeaderText')[0]\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 35189910, "answer_count": 1, "score": -1, "last_activity_date": 1454542858, "creation_date": 1454535650, "last_edit_date": 1454535966, "question_id": 35188283, "link": "https://stackoverflow.com/questions/35188283/nokogiri-capturing-the-correct-css-selector-but-selector-changes", "title": "Nokogiri capturing the correct css selector but selector changes", "body": "<p>I'm writing a program that will pull the information of our printers from the web and output the vital stuff.</p>\n\n<p>I have some css that changes depending on what the printer's maintenance/toner is at, however what I need to do is capture the css for the <code>Toner</code> and not for the <code>Maintenance</code></p>\n\n<p>I have successfully captured the information using this code:\n<code>print \"Toner left: \",  page.css('.hpConsumableBlockHeaderText')[1].text, \"\\n\"</code></p>\n\n<p>Problem being this only captures the <code>36%</code> not the <code>26%</code></p>\n\n<p>Examples:\n<a href=\"https://i.stack.imgur.com/YZsEr.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YZsEr.jpg\" alt=\"Maintenance\"></a>\n<a href=\"https://i.stack.imgur.com/FRQrz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FRQrz.jpg\" alt=\"Toner\"></a></p>\n\n<p>Notice that both are in the same <code>span</code>, I'm lost as how I can capture one and not the other?</p>\n\n<p>Examples of usage:</p>\n\n<pre><code>[]$ ruby clean_printer laser15\nToner left: \nMaintenance Kit\ufffd\ufffd\ufffd\ufffd31%\n110V-Q5421A, 220V-Q5422A\n\n[]$ \n</code></pre>\n\n<p>Source (Some info left off for security):</p>\n\n<pre><code>#!/usr/local/bin/ruby\n\nrequire 'colored'\nrequire 'nokogiri'\nrequire 'restclient'\n\nclass CleanPrinter\n\n  attr_accessor :printer, :amount\n\n  def initialize(printer, amount)\n    @printer = printer\n    @amount = amount.to_i\n  end\n\n  def check_argv\n    if ARGV[0] == nil || ARGV[1] == nil\n      puts &lt;&lt;-EOF\n\n      USAGE: clean_printer &lt;printer-name&gt; &lt;number-of-copies&gt;\n      EOF\n      .yellow.bold\n    else\n      send_print_jobs\n    end\n  end\n\n  def create_jobs\n    system(\"lp -d #{@printer} test.txt\")\n  end\n\n  def send_print_jobs\n    @amount.times do\n      create_jobs\n    end\n  end\n\n  def parse_4100\n    page = Nokogiri::HTML(RestClient.get(\"#{@printer}.com\"))\n    #page.css('font').each_with_index { |e,i| puts \"Matched at #{i}\" if e.text =~ /6%/ } &lt;= Used to find the correct selector\n    print \"Toner left: \", page.css('font')[28].to_s[/\\d[%]/], \"\\n\"\n    powersave = page.css('td')[9].to_s[/(?&lt;=POWERSAVE\\ )\\w+(?=&lt;)/]\n    powersave == \"ON\" ? (puts \"Powersave Mode: ON\") : (puts \"Powersave Mode: OFF\")\n  end\n\n  def parse_4350\n    page = Nokogiri::HTML(RestClient.get(\"#{@printer}.com/hp/device/this.LCDispatcher\"))\n    #page.css('hpConsumableBlockHeaderText').each_with_index { |e,i| puts \"Matched at #{i}\" if e.text =~ /26%/ }\n    print \"Toner left: \",  page.css('.hpConsumableBlockHeaderText')[1].text, \"\\n\"\n  end\n\n  def parse_brother\n  end\nend\n\nmr_clean = CleanPrinter.new(ARGV[0], ARGV[1])\nmr_clean.parse_4350\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Discovered that using this regex: <code>[/\\d{1,3}[%]/]</code> will capture the <code>31%</code> from the Maintenance</p>\n\n<pre><code>[]$ ruby clean_printer laser15\nToner left: 31%\n[]$ \n</code></pre>\n"}, {"tags": ["ruby"], "owner": {"reputation": 11, "user_id": 5200027, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rJdC50z9yWk/AAAAAAAAAAI/AAAAAAAAAGg/dufbniElZtE/photo.jpg?sz=128", "display_name": "Eric Sherman", "link": "https://stackoverflow.com/users/5200027/eric-sherman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1454534591, "creation_date": 1454534591, "question_id": 35187987, "link": "https://stackoverflow.com/questions/35187987/ruby-curlmulti-http-302-redirect-problems", "title": "Ruby Curl::Multi.http 302 redirect problems", "body": "<p>I seem to be having a problem with 302 redirects using curb (Ruby's curl programs)</p>\n\n<p>Here's the code snippet that is ** NOT working** (it's NOT doing the 302 redirect)</p>\n\n<blockquote>\n<pre><code>easy_options = {:follow_location =&gt; true, :enable_cookies =&gt; true, :useragent =&gt; 'curb', :cookiefile =&gt; 'cookie.txt'}\nmulti_options = {:pipeline =&gt; true}\nurl_fields = [\n    {\n        :url =&gt; 'https://x.y.z/webapps/login/',\n        :method =&gt; :post,\n        :follow_location =&gt; true,\n        :enable_cookies =&gt; true,\n        :useragent =&gt; 'curb',\n        :post_fields =&gt; {\n            'user_id' =&gt; 'xxxx',\n            'password' =&gt; 'xxxx',\n            'action' =&gt; 'login',\n            'encoded_pw' =&gt; Base64.strict_encode64('xxxx')},\n    }\n\n]\n\nCurl::Multi.http(url_fields,{:pipeline =&gt; true}) do |easy, code, method|\n puts easy.header_str\nend\n</code></pre>\n</blockquote>\n\n<p>Here's the code snippet that <strong>appears to be working</strong> (it's doing the 302 redirect)</p>\n\n<blockquote>\n<pre><code>easy_options = {:follow_location =&gt; true, :enable_cookies =&gt; true, :useragent =&gt; 'curb', :cookiefile =&gt; 'cookie.txt'}\nmulti_options = {:pipeline =&gt; true}\n\nurl_fields = [\n    { :url =&gt; 'https://x.y.z/webapps/login/',\n      :post_fields =&gt; {\n          'user_id' =&gt; 'xxxx',\n          'password' =&gt; 'yyyy',\n          'action' =&gt; 'login',\n          'encoded_pw' =&gt; Base64.strict_encode64('yyyy')}}\n]\n\nCurl::Multi.post(url_fields, easy_options, multi_options) do|easy|\n  # do something interesting with the easy response\n  puts easy.last_effective_url\nend\n</code></pre>\n</blockquote>\n\n<p>Question:  Why is the first block not doing the 302 redirect as expected?  :follow_location is set to true?\nThanks in advance!</p>\n\n<p>Let me know if you need more information</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "edited": false, "score": 0, "creation_date": 1454534187, "post_id": 35187403, "comment_id": 58092916, "body": "Check out <a href=\"https://github.com/brianmario/mysql2/issues/603\" rel=\"nofollow noreferrer\">github.com/brianmario/mysql2/issues/603</a>"}, {"owner": {"reputation": 2321, "user_id": 2540204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61eRS.jpg?s=128&g=1", "display_name": "neanderslob", "link": "https://stackoverflow.com/users/2540204/neanderslob"}, "edited": false, "score": 0, "creation_date": 1454538008, "post_id": 35187403, "comment_id": 58094942, "body": "My guess is that your mysql2 is gem is incompatible with the version of mysql.  Could you give the exact version numbers of each that you&#39;re using?"}, {"owner": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "edited": false, "score": 0, "creation_date": 1454580919, "post_id": 35187403, "comment_id": 58112569, "body": "gem version is 0.3.18 and my mysql version is Ver 14.14 Distrib 5.7.10, for osx10.10 (x86_64)"}], "answers": [{"tags": [], "owner": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "is_accepted": true, "score": 0, "last_activity_date": 1454962955, "creation_date": 1454962955, "answer_id": 35278598, "question_id": 35187403, "link": "https://stackoverflow.com/questions/35187403/rails-why-is-rake-secret-giving-me-an-error/35278598#35278598", "title": "Rails: Why is &#39;rake secret&#39; giving me an error?", "body": "<p>Answering my own question here. This problem was caused by a mismatch between the mysql2 gem version (0.3.18) and the version specified in the gemfile (0.3.16).</p>\n"}], "owner": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "accepted_answer_id": 35278598, "answer_count": 1, "score": 0, "last_activity_date": 1454962955, "creation_date": 1454532575, "question_id": 35187403, "link": "https://stackoverflow.com/questions/35187403/rails-why-is-rake-secret-giving-me-an-error", "title": "Rails: Why is &#39;rake secret&#39; giving me an error?", "body": "<p>I'm trying to run the <code>rake secret</code> command when I get this error:</p>\n\n<pre><code>rake aborted!\nNameError: uninitialized constant Mysql2::Client::SECURE_CONNECTION\n/Users/myuser/dev/myapp/config/application.rb:7:in `&lt;top (required)&gt;'\n/Users/myuser/dev/myapp/config/Rakefile:5:in `require'\n/Users/myuser/dev/myapp/config/Rakefile:5:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>I've got the latest version of mysql and the gem mysql2. Has anyone else stumbled upon this issue recently? Most posts on this topic I've found here are some five years old and doesn't fix this problem.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 3, "creation_date": 1454537769, "post_id": 35187349, "comment_id": 58094818, "body": "Please, read the documentation carefully. The methods are named <code>nil?</code> and <code>empty?</code> not <code>nil</code> and <code>empty</code>."}], "answers": [{"tags": [], "owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "is_accepted": false, "score": 0, "last_activity_date": 1454532716, "creation_date": 1454532716, "answer_id": 35187452, "question_id": 35187349, "link": "https://stackoverflow.com/questions/35187349/how-to-write-an-exception-for-nil-or-empty-string-in-ruby/35187452#35187452", "title": "How to write an exception for nil or empty string in Ruby", "body": "<p>Your code looks fine, you just need to define your exception class.\nSomething like</p>\n\n<pre><code>class SomeKindOfExceptionThing &lt; StandardError\nend\n</code></pre>\n\n<p>should be enough (you might need a better name, though).</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1454536224, "post_id": 35187651, "comment_id": 58094022, "body": "I think you confuse <code>retry</code> and <code>redo</code>."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1454551817, "post_id": 35187651, "comment_id": 58099676, "body": "Indeed; <code>retry</code> will go through all api keys again in case of an error, <code>redo</code> will only repeat the failed ones. +1 for doubting exceptions: they are the mechanism for non-local error handling. Instead of raising an exception and immediately rescuing it, <code>if</code> is much easier, shorter, and more performant."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1454578783, "post_id": 35187651, "comment_id": 58111069, "body": "@Stefan absolutely.  I copied OP&#39;s code and didn&#39;t spot the mistake. Answer edited."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1454578795, "post_id": 35187651, "comment_id": 58111073, "body": "@Amadan absolutely.  I copied OP&#39;s code and didn&#39;t spot the mistake. Answer edited."}, {"owner": {"reputation": 13, "user_id": 5879967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/521a3240d3c9a8baa07614461b215780?s=128&d=identicon&r=PG&f=1", "display_name": "Skroo", "link": "https://stackoverflow.com/users/5879967/skroo"}, "edited": false, "score": 0, "creation_date": 1454592317, "post_id": 35187651, "comment_id": 58120113, "body": "I didn&#39;t know you could repeat a loop iteration without an exception. This is great, thanks."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 4, "last_activity_date": 1454578715, "last_edit_date": 1454578715, "creation_date": 1454533472, "answer_id": 35187651, "question_id": 35187349, "link": "https://stackoverflow.com/questions/35187349/how-to-write-an-exception-for-nil-or-empty-string-in-ruby/35187651#35187651", "title": "How to write an exception for nil or empty string in Ruby", "body": "<p>As @eugen says your code will work. Not sure I see much benefit in raising the exception, though, in that particular example.</p>\n\n<pre><code>array.each do |api_key|\n  result = # the code to grab the page via the API key \n  if result.empty || result.nil\n    puts \"some error message\"\n    redo\n  end\n  # Act on the valid return for result\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5879967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/521a3240d3c9a8baa07614461b215780?s=128&d=identicon&r=PG&f=1", "display_name": "Skroo", "link": "https://stackoverflow.com/users/5879967/skroo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1270, "favorite_count": 1, "accepted_answer_id": 35187651, "answer_count": 2, "score": 1, "last_activity_date": 1454578715, "creation_date": 1454532348, "question_id": 35187349, "link": "https://stackoverflow.com/questions/35187349/how-to-write-an-exception-for-nil-or-empty-string-in-ruby", "title": "How to write an exception for nil or empty string in Ruby", "body": "<p>Started learning Ruby a week ago. The most frustrating part so far has been exception handling. Been looking for an example for what I want to do for hours.</p>\n\n<p>I am looping through an array of API codes, grabbing text via Net::Http. Sometimes the grab returns nil or empty, and I'm trying to test for it in a way that will let me retry the grab on that exception until it works.</p>\n\n<p>I am fairly certain I need to do something like</p>\n\n<pre><code>array.each do |api_key|\n  begin\n   result = # the code to grab the page via the API key\n\n   if result.empty or result.nil\n     raise SomeKindOfExceptionThing\n   end\n\n  rescue SomeKindOfExceptionThing\n    puts \"some error message\"\n    retry\n\n  else\n    # Act on the valid return for result\n  end\nend\n</code></pre>\n\n<p>I have no idea how to properly form this so it does what I want. Most of the documentation I've found on exceptions is for handling predefined types of errors or just a generic <code>rescue</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "answers": [{"comments": [{"owner": {"reputation": 434, "user_id": 593262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16b71baaad2a57e4195336eae2b4c49?s=128&d=identicon&r=PG", "display_name": "Sasidaran", "link": "https://stackoverflow.com/users/593262/sasidaran"}, "reply_to_user": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "edited": false, "score": 0, "creation_date": 1454534316, "post_id": 35187618, "comment_id": 58092987, "body": "Is the params get passed to the new_payer_contract action, ?"}], "tags": [], "owner": {"reputation": 434, "user_id": 593262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16b71baaad2a57e4195336eae2b4c49?s=128&d=identicon&r=PG", "display_name": "Sasidaran", "link": "https://stackoverflow.com/users/593262/sasidaran"}, "is_accepted": false, "score": 0, "last_activity_date": 1454544198, "last_edit_date": 1454544198, "creation_date": 1454533330, "answer_id": 35187618, "question_id": 35187341, "link": "https://stackoverflow.com/questions/35187341/having-logic-in-a-haml-file/35187618#35187618", "title": "Having logic in a Haml file?", "body": "<p>Yes, you can pass the value in the action </p>\n\n<pre><code>new_payer_contract_path(payer_type: payer_contract.new_bpci_payer_type)\n</code></pre>\n\n<p>to any one of the button, and in the view file you can get the params using</p>\n\n<pre><code>if payer_contract(params[:payer_type])\n  = render 'bpci_form'\nelse\n  = render 'global_form'\n</code></pre>\n"}], "owner": {"reputation": 1723, "user_id": 2611440, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3be437ed81988f3827110923e44cc301?s=128&d=identicon&r=PG", "display_name": "Mdjon26", "link": "https://stackoverflow.com/users/2611440/mdjon26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1454544303, "creation_date": 1454532304, "last_edit_date": 1454544303, "question_id": 35187341, "link": "https://stackoverflow.com/questions/35187341/having-logic-in-a-haml-file", "title": "Having logic in a Haml file?", "body": "<p>I have two buttons so the user can choose two options:</p>\n\n<pre><code>= button_to t('payer_contracts.new_global_payer_type'), new_payer_contract_path, {:class =&gt; 'btn pull-left', :method =&gt; 'get'}\n\n= button_to t('payer_contracts.new_bpci_payer_type'), new_payer_contract_path, {:class =&gt; 'btn pull-left', :method =&gt; 'get'}\n</code></pre>\n\n<p>Both of them direct to the same file as seen here:</p>\n\n<pre><code>- content_for(:title, t('payer_contracts.page_titles.new'))\n\n- content_for :article do\n  .common-main-container\n    %h1= t('payer_contracts.new_payer_contract')\n    = render 'global_form'\n</code></pre>\n\n<p>The problem is, if the user clicks either button, it will render the <code>global_form</code>. I want the first button to render the <code>global_form</code> and the second button to render the <code>bpci_form</code>. Is there a way I can send an argument in the path such as:</p>\n\n<pre><code>new_payer_contract_path(payer_contract.new_bpci_payer_type)\n</code></pre>\n\n<p>and then in the form use some type of logic for:</p>\n\n<pre><code>if (payer_contract(new_bpci_payer_type)\n  = render 'bpci_form'\nelse\n  = render 'global_form'\n</code></pre>\n\n<p>Is this possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-maps", "geospatial", "raycasting"], "comments": [{"owner": {"reputation": 16285, "user_id": 118133, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/39d793fb79c019bce75b825160f2d1fa?s=128&d=identicon&r=PG", "display_name": "Nate", "link": "https://stackoverflow.com/users/118133/nate"}, "edited": false, "score": 1, "creation_date": 1454533354, "post_id": 35187190, "comment_id": 58092443, "body": "Not sure how helpful this is, but PostGis can search by polygon - <a href=\"http://stackoverflow.com/questions/27830521/postgis-find-all-the-points-within-a-polygon\" title=\"postgis find all the points within a polygon\">stackoverflow.com/questions/27830521/&hellip;</a> - and be used in Rails - <a href=\"http://ngauthier.com/2013/08/postgis-and-rails-a-simple-approach.html\" rel=\"nofollow noreferrer\">ngauthier.com/2013/08/postgis-and-rails-a-simple-approach.ht&zwnj;&#8203;ml</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1454537208, "post_id": 35187190, "comment_id": 58094546, "body": "MongoDB also supports &quot;polygonal&quot; geospatial queries. What database are you looking to use? <a href=\"https://docs.mongodb.org/manual/reference/operator/query-geospatial/\" rel=\"nofollow noreferrer\">docs.mongodb.org/manual/reference/operator/query-geospatial</a>"}, {"owner": {"reputation": 2296, "user_id": 717633, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LmICd.jpg?s=128&g=1", "display_name": "Jody Heavener", "link": "https://stackoverflow.com/users/717633/jody-heavener"}, "edited": false, "score": 0, "creation_date": 1454537610, "post_id": 35187190, "comment_id": 58094741, "body": "The PostGis thing looks cool, might check that out. I&#39;m running PostgreSQL. Would ideally like to not rip the DB apart, but if that&#39;s my only option I&#39;ll give it a whirl!"}, {"owner": {"reputation": 2296, "user_id": 717633, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LmICd.jpg?s=128&g=1", "display_name": "Jody Heavener", "link": "https://stackoverflow.com/users/717633/jody-heavener"}, "edited": false, "score": 0, "creation_date": 1454574451, "post_id": 35187190, "comment_id": 58108297, "body": "Hey Nate, PostGis ended up being incredibly difficult to work with but well worth it in the end. Thanks for the suggestion! :)"}], "answers": [{"tags": [], "owner": {"reputation": 2296, "user_id": 717633, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LmICd.jpg?s=128&g=1", "display_name": "Jody Heavener", "link": "https://stackoverflow.com/users/717633/jody-heavener"}, "is_accepted": true, "score": 3, "last_activity_date": 1454607335, "creation_date": 1454607335, "answer_id": 35207835, "question_id": 35187190, "link": "https://stackoverflow.com/questions/35187190/filter-rails-records-to-within-geo-polygonal-area-using-latitude-longitude/35207835#35207835", "title": "Filter Rails records to within geo-polygonal area using latitude/longitude", "body": "<p>Nate suggested PostGis in the comments above, so I went with that.</p>\n\n<p>I ended up using <a href=\"http://daniel-azuma.com/articles/georails/part-2\" rel=\"nofollow\">this tutorial</a> to install PostGis on my Rails app, with some minor changes for 2016:</p>\n\n<ul>\n<li>The line where it says to add <code>require 'active_record/connection_adapters/postgis_adapter/railtie'</code> should actually be <code>require 'active_record/connection_adapters/postgis_adapter'</code></li>\n<li>The syntax for creating a geo table columns has changed from <code>t.point :latlon, :geographic =&gt; true</code> to <code>t.geography \"latlon\", limit: {:srid=&gt;4326, :type=&gt;\"point\", :geographic=&gt;true}</code></li>\n<li><p>Based on <a href=\"https://github.com/rgeo/activerecord-postgis-adapter/issues/185\" rel=\"nofollow\">this issue</a> I also added the following initializer:</p>\n\n<pre><code>RGeo::ActiveRecord::SpatialFactoryStore.instance.tap do |config|\n  config.default = RGeo::Geographic.spherical_factory(srid: 4326)\nend\n</code></pre></li>\n</ul>\n\n<p>The rest of the tutorial was a pretty good reference, from installing the gems to updating the database configuration.</p>\n\n<p>From there I was then able to create a Location with a <code>Point</code>:</p>\n\n<pre><code>Location.last.geo = \"POINT(-123.366 48.428)\"\n</code></pre>\n\n<p>As well as my polygonal area to search within using a <code>Polygon</code>:</p>\n\n<pre><code>SearchArea.last.geo = \"POLYGON((-123.382 48.426, -123.353 48.402, -123.314 48.423, -123.332 48.443, -123.382 48.426))\"\n</code></pre>\n\n<p>Finally, the query; it was so simple!</p>\n\n<pre><code>sa = SearchArea.last\nLocation.where(\"ST_Intersects(geo, '#{sa.geo}')\")\n</code></pre>\n\n<p>Thanks for the suggestion, Nate!</p>\n"}], "owner": {"reputation": 2296, "user_id": 717633, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LmICd.jpg?s=128&g=1", "display_name": "Jody Heavener", "link": "https://stackoverflow.com/users/717633/jody-heavener"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1001, "favorite_count": 0, "accepted_answer_id": 35207835, "answer_count": 1, "score": 1, "last_activity_date": 1454607335, "creation_date": 1454531795, "last_edit_date": 1495535568, "question_id": 35187190, "link": "https://stackoverflow.com/questions/35187190/filter-rails-records-to-within-geo-polygonal-area-using-latitude-longitude", "title": "Filter Rails records to within geo-polygonal area using latitude/longitude", "body": "<p>In my Rails app I have search areas, which are geographic polygons (created using the Google Maps API). Once drawn on the map, the search area's coordinates are saved to a record as an array of hashes. It looks something like this:</p>\n\n<pre><code>SearchArea.last.geo\n=&gt; [{\"lat\"=&gt;\"48.425555463221066\", \"lng\"=&gt;\"-123.3793830871582\"}, {\"lat\"=&gt;\"48.41336528699442\", \"lng\"=&gt;\"-123.37800979614258\"}, {\"lat\"=&gt;\"48.41006090395106\", \"lng\"=&gt;\"-123.31672668457031\"}, {\"lat\"=&gt;\"48.44696663691928\", \"lng\"=&gt;\"-123.32067489624023\"}]\n</code></pre>\n\n<p>I also have a handful of location records whose coordinates are saved as a hash, like so:</p>\n\n<pre><code>Location.last.geo\n=&gt; {\"lat\"=&gt;\"28.8138124\", \"lng\"=&gt;\"-96.9977682\"}\n</code></pre>\n\n<p>I need to be able to search for/filter records that have geo coordinates that fall within a given search area. I have no experience with geospatial programming, so I'm hoping someone can lend a hand here. It would be really appreciated!</p>\n\n<p>Things I've looked in to:</p>\n\n<ul>\n<li>I know the Google Maps API has a <a href=\"https://developers.google.com/maps/documentation/javascript/geometry?hl=en\" rel=\"nofollow noreferrer\">Geometry Library</a>. Unfortunately this is client side.</li>\n<li>I found <a href=\"https://stackoverflow.com/questions/15303568/detect-if-point-in-latitude-longitude-based-polygon\">this</a> answer, which led to <a href=\"http://alienryderflex.com/polygon/\" rel=\"nofollow noreferrer\">this</a> article, but it is written in C.</li>\n<li><a href=\"http://jakescruggs.blogspot.ca/2009/07/point-inside-polygon-in-ruby.html\" rel=\"nofollow noreferrer\">This article</a> from 2009 has some code that looks like it should work, but I'm not sure how I would implement it using latitude/longitude coordinates.</li>\n<li><a href=\"http://rosettacode.org/wiki/Ray-casting_algorithm\" rel=\"nofollow noreferrer\">This wiki page</a> has a whole bunch of implementations of Ray-casting in various languages, but again, I'm not sure how to implement it in Ruby/Rails.</li>\n</ul>\n"}, {"tags": ["ruby", "bash"], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1454531913, "creation_date": 1454531913, "answer_id": 35187218, "question_id": 35187101, "link": "https://stackoverflow.com/questions/35187101/is-there-a-way-to-easily-make-sigint-events-silent-without-making-them-disappear/35187218#35187218", "title": "Is there a way to easily make SIGINT events silent without making them disappear?", "body": "<p>The <code>^C</code> is displayed before Ruby captures the signal, and you cannot let it disappear from within Ruby without the use of a library that uses C code. But you can do </p>\n\n<pre><code>def register_sigint\n  Signal.trap('SIGINT'){puts; exit}\nend\n</code></pre>\n\n<p>to put the <code>^C</code> on a separate line before exiting.</p>\n\n<p>Otherwise, you need to use the <a href=\"https://github.com/ruby/curses\" rel=\"nofollow\">curses</a> library, or its variant to capture the key.</p>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 0, "last_activity_date": 1454534650, "last_edit_date": 1454534650, "creation_date": 1454534249, "answer_id": 35187900, "question_id": 35187101, "link": "https://stackoverflow.com/questions/35187101/is-there-a-way-to-easily-make-sigint-events-silent-without-making-them-disappear/35187900#35187900", "title": "Is there a way to easily make SIGINT events silent without making them disappear?", "body": "<p>Ruby isn't generating the <code>^C</code>; your shell is. Assuming your shell has the <code>stty</code> command (which is pretty likely unless you're on Windows), you can use <code>stty -ctlecho</code> to disable it.</p>\n\n<p>To illustrate, here's a simple program that prints dots until it receives SIGINT, whereupon it prints \"Bye!\" and exits:</p>\n\n<pre><code>def setup!\n  Signal.trap(\"INT\") {\n    shut_down!\n    exit\n  }\nend\n\ndef shut_down!\n  puts \"Bye!\"\nend\n\nsetup!\n\nloop do\n  sleep 0.2\n  print '.'\nend\n</code></pre>\n\n<p>This is what we get if we run it for awhile and then press Ctrl+C:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ruby dots.rb\n.......^CBye!\n</code></pre>\n\n<p>Not ideal.</p>\n\n<p>Now let's modify the <code>setup!</code> and <code>shut_down!</code> methods to call <code>stty -ctlecho</code> and <code>stty ctlecho</code> to disable and reenable the printing of control characters, respectively:</p>\n\n<pre><code>def setup!\n  system \"stty -ctlecho\"\n\n  Signal.trap(\"INT\") {\n    shut_down!\n    exit\n  }\nend\n\ndef shut_down!\n  system \"stty ctlecho\"\n  puts \"Bye!\"\nend\n</code></pre>\n\n<p>Then:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ruby dots.rb\n.......Bye!\n</code></pre>\n\n<p>If it seems weird to you to shell out to <code>stty</code> to modify the shell's behavior, I definitely understand, but in fact even core Ruby modules do the same thing, <a href=\"https://github.com/ruby/ruby/blob/a21d403f21473b21b5766c2483b4325240e9edda/lib/rubygems/user_interaction.rb#L335-L341\" rel=\"nofollow\">for example RubyGems</a>.</p>\n\n<p>P.S. Another thing you could do is use ANSI escape sequences to back up the cursor two characters when you receive SIGINT, which will cause subsequent output to basically \"overwrite\" the <code>^C</code>. The escape sequence to move the cursor left is <code>\\033[nD</code>, where <code>n</code> is the number of characters (<a href=\"http://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/x361.html\" rel=\"nofollow\">reference here</a>), so:</p>\n\n<pre><code>def shut_down!\n  print \"\\033[2D\"\n  puts \"Bye!\"\nend\n</code></pre>\n"}], "owner": {"reputation": 790, "user_id": 722915, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/a14d1bca90d7ebeda50dca99aab381b9?s=128&d=identicon&r=PG", "display_name": "shevy", "link": "https://stackoverflow.com/users/722915/shevy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1454534650, "creation_date": 1454531491, "question_id": 35187101, "link": "https://stackoverflow.com/questions/35187101/is-there-a-way-to-easily-make-sigint-events-silent-without-making-them-disappear", "title": "Is there a way to easily make SIGINT events silent without making them disappear?", "body": "<p>I often use a method like this in my ruby code:</p>\n\n<pre><code>def register_sigint\n  Signal.trap('SIGINT') { exit }\nend\n</code></pre>\n\n<p>When I hit ctr + c then the program usually exits instantly.</p>\n\n<p>Now here is the thing:</p>\n\n<p>In my main shell, bash, this displays a \"^C\"</p>\n\n<p>On a new line.</p>\n\n<p>Is there a way I can make it show nothing at all instead?</p>\n\n<p>The reason why I want this:</p>\n\n<p>I use ruby to ask me exam questions, and I pad the answers + colourize them.</p>\n\n<p>Now when I hit ctrl + c to exit, I get these two characters, and the alignment gets messed up. This may seem minor, it probably is, but it simply annoys me because I have no need to read these two characters that I don't need.</p>\n\n<p>For any help I'd be happy.</p>\n\n<p>Here is a image showing the problem:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fZz1z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fZz1z.png\" alt=\"http://i.imgur.com/OQV2xVe.png\"></a></p>\n\n<p>The orange-brown thing is Dir.pwd (current working directory)</p>\n\n<p>The ^C appears before.</p>\n"}, {"tags": ["arrays", "ruby", "regex", "iterator"], "comments": [{"owner": {"reputation": 3146, "user_id": 982786, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xARbd.jpg?s=128&g=1", "display_name": "Nefariis", "link": "https://stackoverflow.com/users/982786/nefariis"}, "edited": false, "score": 0, "creation_date": 1454535398, "post_id": 35187034, "comment_id": 58093577, "body": "Very unclear what you are asking - are you asking how to use regex?"}, {"owner": {"reputation": 730, "user_id": 3914672, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/sauBb.jpg?s=128&g=1", "display_name": "k1r8r0wn", "link": "https://stackoverflow.com/users/3914672/k1r8r0wn"}, "reply_to_user": {"reputation": 3146, "user_id": 982786, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xARbd.jpg?s=128&g=1", "display_name": "Nefariis", "link": "https://stackoverflow.com/users/982786/nefariis"}, "edited": false, "score": 0, "creation_date": 1454535611, "post_id": 35187034, "comment_id": 58093695, "body": "How to use it in my iterator which gets the block. I need somehow using regex to get only my &#39;blocks&#39; from full path names in array."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454544934, "post_id": 35188855, "comment_id": 58097661, "body": "Use <code>%r</code> to avoid leaning-toothpick syndrome: <code>&#47;\\&#47;(.*)\\&#47;&#47;  # =&gt; &#47;\\&#47;(.*)\\&#47;&#47;</code> so use <code>%r!&#47;(.*)&#47;!  # =&gt; &#47;\\&#47;(.*)\\&#47;&#47;</code> which results in the same regex."}, {"owner": {"reputation": 730, "user_id": 3914672, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/sauBb.jpg?s=128&g=1", "display_name": "k1r8r0wn", "link": "https://stackoverflow.com/users/3914672/k1r8r0wn"}, "edited": false, "score": 0, "creation_date": 1454569011, "post_id": 35188855, "comment_id": 58105498, "body": "Thank you, so there no need to use yield?"}, {"owner": {"reputation": 3146, "user_id": 982786, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xARbd.jpg?s=128&g=1", "display_name": "Nefariis", "link": "https://stackoverflow.com/users/982786/nefariis"}, "edited": false, "score": 0, "creation_date": 1454608291, "post_id": 35188855, "comment_id": 58131455, "body": "actually I would probably use yield, I was only using &quot;puts&quot; to debug the line"}], "tags": [], "owner": {"reputation": 3146, "user_id": 982786, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xARbd.jpg?s=128&g=1", "display_name": "Nefariis", "link": "https://stackoverflow.com/users/982786/nefariis"}, "is_accepted": true, "score": 1, "last_activity_date": 1454545053, "last_edit_date": 1454545053, "creation_date": 1454537877, "answer_id": 35188855, "question_id": 35187034, "link": "https://stackoverflow.com/questions/35187034/get-the-path-using-regex-in-each-iterator/35188855#35188855", "title": "Get the path using regex in .each iterator", "body": "<p>Well I think you are using the wrong regex first, try using this regex instead:</p>\n\n<pre><code>/\\/(.*)\\//\n</code></pre>\n\n<p>Secondly, to use regex you need something similar to this:</p>\n\n<pre><code>def path_from_array(array)\n  array.each do |var|\n     if ( var =~ /\\/(.*)\\// )\n        puts var.scan(/\\/(.*)\\//);\n     end\n  end\nend\n\nputs path_from_array(['path/block1/something', 'path/block2']) { |x| x.to_s }\n</code></pre>\n\n<p>For an explanation:</p>\n\n<ul>\n<li><code>var =~</code> will find regex and return a boolean.</li>\n<li><code>var.scan</code> will return the match found.</li>\n</ul>\n\n<p>Here are a few resources on regex and Ruby:</p>\n\n<ul>\n<li>\"<a href=\"http://www.tutorialspoint.com/ruby/ruby_regular_expressions.htm\" rel=\"nofollow\">Ruby Regular Expressions</a>\"</li>\n<li>\"<a href=\"https://www.blueboxcloud.com/insight/blog-article/using-regular-expressions-in-ruby-part-2-of-3\" rel=\"nofollow\">Using Regular Expressions in Ruby \u2014 Part 2 of 3</a>\"</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 730, "user_id": 3914672, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/sauBb.jpg?s=128&g=1", "display_name": "k1r8r0wn", "link": "https://stackoverflow.com/users/3914672/k1r8r0wn"}, "edited": false, "score": 0, "creation_date": 1454569238, "post_id": 35190217, "comment_id": 58105595, "body": "Thanks for the answer, but I need to use method instead of only <code>.map</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 730, "user_id": 3914672, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/sauBb.jpg?s=128&g=1", "display_name": "k1r8r0wn", "link": "https://stackoverflow.com/users/3914672/k1r8r0wn"}, "edited": false, "score": 0, "creation_date": 1454605852, "post_id": 35190217, "comment_id": 58129871, "body": "Then put the line in the block inside your method."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1454544544, "creation_date": 1454544544, "answer_id": 35190217, "question_id": 35187034, "link": "https://stackoverflow.com/questions/35187034/get-the-path-using-regex-in-each-iterator/35190217#35190217", "title": "Get the path using regex in .each iterator", "body": "<p>No regex is needed:</p>\n\n<pre><code>['path/block1/something', 'path/block2'].map { |path|\n  path.split('/')[1]\n} # =&gt; [\"block1\", \"block2\"]\n</code></pre>\n\n<p>Regular expressions are great, but not everything is a good use for them.</p>\n\n<p>If you're going to process paths containing Windows or *nix paths, on those OSes, then you'll want your code to automatically adjust depending on the OS:</p>\n\n<pre><code>path.split(File::SEPARATOR)[1]\n</code></pre>\n"}], "owner": {"reputation": 730, "user_id": 3914672, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/sauBb.jpg?s=128&g=1", "display_name": "k1r8r0wn", "link": "https://stackoverflow.com/users/3914672/k1r8r0wn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1454836047, "accepted_answer_id": 35188855, "answer_count": 2, "score": -3, "last_activity_date": 1454545053, "creation_date": 1454531235, "last_edit_date": 1454544391, "question_id": 35187034, "link": "https://stackoverflow.com/questions/35187034/get-the-path-using-regex-in-each-iterator", "closed_reason": "Needs details or clarity", "title": "Get the path using regex in .each iterator", "body": "<p>Where do I need to put my regex <code>/\\/([^\\)]+)\\//</code> in the code below to get only <code>block1</code> and <code>block2</code> paths from my full paths in a given array?</p>\n\n<pre><code>def path_from_array(array)\n  array.each do |var|\n    yield var\n  end\nend\n\nputs path_from_array(['path/block1/something', 'path/block2']) { |x| x.to_s } \n</code></pre>\n\n<p>Now the output is:</p>\n\n<pre><code>path/block1/something\npath/block2/\n</code></pre>\n\n<p>and I need:</p>\n\n<pre><code>block1\nblock2\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "trailblazer"], "answers": [{"tags": [], "owner": {"reputation": 518, "user_id": 465070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fe13386ba69a128e9fadc19ae9d96be?s=128&d=identicon&r=PG", "display_name": "apotonick", "link": "https://stackoverflow.com/users/465070/apotonick"}, "is_accepted": false, "score": 2, "last_activity_date": 1486133954, "creation_date": 1486133954, "answer_id": 42027120, "question_id": 35186926, "link": "https://stackoverflow.com/questions/35186926/replacing-activerecord-with-trailblazer/42027120#42027120", "title": "Replacing ActiveRecord with trailblazer", "body": "<p>An answer one year too late.</p>\n\n<p>Here's the <code>ARAccount::Create</code> operation.</p>\n\n<pre><code>class ARAccount::Create &lt; Trailblazer::Operation\n  step Model( ARAccount, :new ) # this creates a new model for you.\n  step :set_sub_ledger\n  step # ... whatever you need after that.\n\n  def set_sub_ledger(options, model:, **) # set fixed value for AR sub_ledger\n    model.write_attribute( :gl_sub_ledger, AR_SUB_LEDGER )\n  end\nend\n</code></pre>\n\n<p>Since you had this <code>if new_record?</code> check, you don't need the <code>set_sub_ledger</code> step in <code>Update</code>.</p>\n\n<pre><code>class ARAccount::Update &lt; Trailblazer::Operation\n  step Model( ARAccount, :find ) # this finds an existing model for you.\n  step # ... whatever you need after that.\nend\n</code></pre>\n\n<p>The model is pretty slim now.</p>\n\n<pre><code>class ARAccount&lt; GLAccount\n  has_one(  :active_client,\n        -&gt; { where IsActiveRow },\n        :class_name =&gt; 'ARClient',\n        :dependent =&gt; :restrict_with_error,\n        :foreign_key =&gt; :gl_account_id\n     )\n\n  self.inheritance_column = :gl_ledger\n  def sti_name\n    \"ASST\"\n  end\nend\n</code></pre>\n\n<p>You usually leave scopes and finders in the model until you introduce <code>Query</code> objects.</p>\n"}], "owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486133954, "creation_date": 1454530879, "last_edit_date": 1454531681, "question_id": 35186926, "link": "https://stackoverflow.com/questions/35186926/replacing-activerecord-with-trailblazer", "title": "Replacing ActiveRecord with trailblazer", "body": "<p>Environment:</p>\n\n<pre><code>CentOS-6.7 / OSX-10.9.5\nRuby 2.2.3p173 (probably time for an update)\nRails 4.2.5.1\nTrailblazer 1.1.0\n</code></pre>\n\n<p>I am working through the exercises in the trailblazer book and attempting to map elements of an existing project to the examples in the book.  In the project at hand we use AR inheritance to create model aliases for a single underling table.  An example is given below:</p>\n\n<pre><code>class ARAccount&lt; GLAccount\n  after_initialize( :set_sub_ledger,  { :if =&gt; :new_record? } )\n  has_one(  :active_client,\n            -&gt; { where IsActiveRow },\n            :class_name =&gt; 'ARClient',\n            :dependent =&gt; :restrict_with_error,\n            :foreign_key =&gt; :gl_account_id\n         )\n\n  def gl_sub_ledger=( code )  # No change to sub_ledger value allowed\n     gl_sub_ledger ||= AR_SUB_LEDGER   # Return 'AR' if not saved\n  end\n\n  private\n\n  def set_sub_ledger          # set fixed value for AR sub_ledger\n    write_attribute( :gl_sub_ledger, AR_SUB_LEDGER ) if new_record?\n  end\n\n  self.inheritance_column = :gl_ledger\n  def sti_name\n    \"ASST\"\n  end\nend\n</code></pre>\n\n<p>The way this works is borrowed from single table inheritance in that a column value is 'fixed' for each variant model definition but the underlying table and row is identical for all variants.</p>\n\n<p>I am somewhat confused as how how this would be handled inside the <code>operation.rb</code> file within the ar_invoice concerns. This AR set up evolved after some struggles with AR to handle inheritance and so I am very much interested a simpler way demonstrated using Trailblazer.</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 6654, "user_id": 654457, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8806c26cc5687109c0669221ab54ecb7?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nelson", "link": "https://stackoverflow.com/users/654457/ben-nelson"}, "edited": false, "score": 0, "creation_date": 1460847742, "post_id": 35186766, "comment_id": 60932869, "body": "Post the gem repo that is getting the problem into here <a href=\"http://mxtoolbox.com/SRVLookup.aspx\" rel=\"nofollow noreferrer\">mxtoolbox.com/SRVLookup.aspx</a> and post your results. Is this a local machine or a VM using vagrant or docker or what? Other info for the machine and Ruby version would be helpful. Why are you updating rubygems?"}], "answers": [{"tags": [], "owner": {"reputation": 206, "user_id": 6295784, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QevRoYV2t5o/AAAAAAAAAAI/AAAAAAAAAEU/cEwT1cPseeM/photo.jpg?sz=128", "display_name": "Mar&#237;a Valero", "link": "https://stackoverflow.com/users/6295784/mar%c3%ada-valero"}, "is_accepted": false, "score": 1, "last_activity_date": 1465138032, "creation_date": 1465138032, "answer_id": 37643196, "question_id": 35186766, "link": "https://stackoverflow.com/questions/35186766/gem-update-system-returns-no-implicit-conversion-of-nil-into-string/37643196#37643196", "title": "gem update --system returns &quot;no implicit conversion of nil into String&quot;", "body": "<p>It could be due to incompatible gem versions (Maybe a gem doing Monkey patching?). Can you try to update a single gem? </p>\n"}], "owner": {"reputation": 81, "user_id": 5879743, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UzA3FbcKT0A/AAAAAAAAAAI/AAAAAAAAAlw/KCRoW9PG_vI/photo.jpg?sz=128", "display_name": "Hanna Rosul", "link": "https://stackoverflow.com/users/5879743/hanna-rosul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1417, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1465138032, "creation_date": 1454530329, "question_id": 35186766, "link": "https://stackoverflow.com/questions/35186766/gem-update-system-returns-no-implicit-conversion-of-nil-into-string", "title": "gem update --system returns &quot;no implicit conversion of nil into String&quot;", "body": "<p>Running gem update --system keeps returning error</p>\n\n<pre><code># gem update --system\n    Updating rubygems-update\n    ERROR:  While executing gem ... (TypeError)\n    no implicit conversion of nil into String\n</code></pre>\n\n<p>How to fix it? <br>\nVerbose: <a href=\"http://pastebin.com/2uBYEMTi\" rel=\"noreferrer\">http://pastebin.com/2uBYEMTi</a></p>\n"}, {"tags": ["ruby", "string", "split"], "answers": [{"comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1454531467, "post_id": 35186999, "comment_id": 58091265, "body": "@sawa I&#39;m (unfortunately) not really a ruby coder. I just found it fun to solve this. Let me check your suggestion..."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1454532448, "post_id": 35186999, "comment_id": 58091893, "body": "@sawa Can you elaborate on that?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1454541592, "post_id": 35186999, "comment_id": 58096450, "body": "<code>str.scan(&#47;((.)\\2*)&#47;).map(&amp;:first)</code>."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1454541716, "post_id": 35186999, "comment_id": 58096489, "body": "Ruby is nice! :) Someday I might have a chance to work with it ... Feel free to add that to my answer or post your own.. Having the list as the return value of that chained command is truly a benefit since we wouldn&#39;t need to initialize it explicitly."}], "tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": true, "score": 3, "last_activity_date": 1454531361, "last_edit_date": 1454531361, "creation_date": 1454531107, "answer_id": 35186999, "question_id": 35186708, "link": "https://stackoverflow.com/questions/35186708/how-to-split-a-string-of-repeated-characters-with-uneven-amounts-ruby/35186999#35186999", "title": "How to split a string of repeated characters with uneven amounts? Ruby", "body": "<p>You can use a regex with a back reference and the <code>scan()</code> method:</p>\n\n<pre><code>str = \"aabbbbccdddeffffgg\"\ngroups = []\nstr.scan(/((.)\\2*)/) { |x| groups.push(x[0]) }\n</code></pre>\n\n<p><code>groups</code> will look like this afterwards:</p>\n\n<pre><code>[\"aa\", \"bbbb\", \"cc\", \"ddd\", \"e\", \"ffff\", \"gg\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1454567228, "post_id": 35188126, "comment_id": 58104668, "body": "With Ruby v2.3.0 you use <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-chunk_while\" rel=\"nofollow noreferrer\">Enumerable#chunk_while</a>: <code>str.each_char.chunk_while { |curr,nxt| curr==nxt }.map(&amp;:join)  #=&gt; [&quot;aa&quot;, &quot;bbbb&quot;, &quot;cc&quot;, &quot;ddd&quot;, &quot;e&quot;, &quot;ffff&quot;, &quot;gg&quot;]</code>. <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-slice_when\" rel=\"nofollow noreferrer\">Enumerable.slice_when</a> (from v2.2) is similar. I would also suggest <code>each_char</code> over <code>chars</code> to avoid creating the temporary array."}], "tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 3, "last_activity_date": 1454535092, "creation_date": 1454535092, "answer_id": 35188126, "question_id": 35186708, "link": "https://stackoverflow.com/questions/35186708/how-to-split-a-string-of-repeated-characters-with-uneven-amounts-ruby/35188126#35188126", "title": "How to split a string of repeated characters with uneven amounts? Ruby", "body": "<p>Here is a non-regexp version</p>\n\n<pre><code>str = \"aabbbbccdddeffffgg\"\np str.chars.chunk(&amp;:itself).map{|x|x.last.join} #=&gt; [\"aa\", \"bbbb\", \"cc\", \"ddd\", \"e\", \"ffff\", \"gg\"]\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 5602107, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/10207659293467674/picture?type=large", "display_name": "Andrea McKenzie", "link": "https://stackoverflow.com/users/5602107/andrea-mckenzie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 998, "favorite_count": 1, "accepted_answer_id": 35186999, "answer_count": 2, "score": 2, "last_activity_date": 1454535092, "creation_date": 1454530136, "question_id": 35186708, "link": "https://stackoverflow.com/questions/35186708/how-to-split-a-string-of-repeated-characters-with-uneven-amounts-ruby", "title": "How to split a string of repeated characters with uneven amounts? Ruby", "body": "<p>If I have a string such as <code>\"aabbbbccdddeffffgg\"</code> and I wanted to split the string into this array: <code>[\"aa\", \"bbbb\", \"cc\", \"ddd\", \"e\", \"ffff\", \"gg\"]</code>, how would I go about that?</p>\n\n<p>I know of <code>string.split/.../</code> &lt; or however many period you put there, but it doesn't account for if the strings are uneven. The point of the problem I'm working on is to take two strings and see if there are three characters in a row of one string and two in a row in the other. I tried</p>\n\n<pre><code>  `letter_count_1 = {}\n    str1.each_char do |let|\n       letter_count_1[let] = str1.count(let)\n    end`\n</code></pre>\n\n<p>But that gives the count for the total amount of each character in the string, and some of the inputs are randomized with the same letter in multiple places, like, <code>\"aabbbacccdba\"</code> </p>\n\n<p>So how do you split the string up by character?</p>\n"}, {"tags": ["ruby", "boolean"], "comments": [{"owner": {"reputation": 246, "user_id": 2572533, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004708268913/picture?type=large", "display_name": "Hans Meiser", "link": "https://stackoverflow.com/users/2572533/hans-meiser"}, "edited": false, "score": 0, "creation_date": 1454533581, "post_id": 35186602, "comment_id": 58092576, "body": "originally posted with &amp;&amp; operator instead of || ... changed that"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454536077, "post_id": 35186602, "comment_id": 58093939, "body": "If you want to tell Find to skip a directory and not descend into it you need to call <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/find/rdoc/Find.html#method-c-prune\" rel=\"nofollow noreferrer\"><code>Find.prune</code></a>. Beyond that, I recommend breaking your problem up into smaller pieces. Write a method that takes a single filename and returns <code>true</code> if it should be skipped; write a method that takes a single filename and prints it &quot;along with file size and creation time&quot;; and so on. Smaller pieces equal smaller problems, so when you run into trouble you can come back and ask more focused questions."}, {"owner": {"reputation": 246, "user_id": 2572533, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004708268913/picture?type=large", "display_name": "Hans Meiser", "link": "https://stackoverflow.com/users/2572533/hans-meiser"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454536329, "post_id": 35186602, "comment_id": 58094077, "body": "Good advice, but i think i just found the answer to the boolean operator question: apparently &quot;||&quot; and &quot;or&quot; work differently, &quot;or&quot; seems to work fine."}, {"owner": {"reputation": 246, "user_id": 2572533, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004708268913/picture?type=large", "display_name": "Hans Meiser", "link": "https://stackoverflow.com/users/2572533/hans-meiser"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454538540, "post_id": 35186602, "comment_id": 58095208, "body": "<a href=\"http://stackoverflow.com/questions/9622817/ruby-boolean-operator-or-difference\" title=\"ruby boolean operator or difference\">stackoverflow.com/questions/9622817/&hellip;</a>"}, {"owner": {"reputation": 962, "user_id": 135051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099c6c3a8010e978993611900370e943?s=128&d=identicon&r=PG", "display_name": "phss", "link": "https://stackoverflow.com/users/135051/phss"}, "edited": false, "score": 0, "creation_date": 1484486620, "post_id": 35186602, "comment_id": 70521389, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/9622817/ruby-boolean-operator-or-difference\">ruby boolean operator or || difference</a>"}], "owner": {"reputation": 246, "user_id": 2572533, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004708268913/picture?type=large", "display_name": "Hans Meiser", "link": "https://stackoverflow.com/users/2572533/hans-meiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1454533195, "creation_date": 1454529848, "last_edit_date": 1454532675, "question_id": 35186602, "link": "https://stackoverflow.com/questions/35186602/ruby-beginners-boolean-evaluation", "title": "Ruby beginners boolean evaluation", "body": "<p>I want to write a simple program that recurses through a given directory, skips if one of a set of excluded directories / strings is found in the complete path&amp;filename OR a file does not exist / is empty and lists the rest, along with file size and creation time. </p>\n\n<p>My attempt looks like this, but it doesnt work:</p>\n\n<pre><code>dir_ignore=[\".AppleDouble\",\".AppleDB\",\".AppleDesktop\",\".DS_Store\"]\n\nrequire 'find'\n\nFind.find('/Volumes/Downloads') { |dir_entry| \n     next if dir_ignore.any? {|skip| dir_entry.include? skip} || !File.exist?(dir_entry)\n     dir = [\"filename\" =&gt; dir_entry],[\"filesize\" =&gt; File.size(dir_entry)],[\"creationdate\" =&gt; File.ctime(dir_entry)]\nputs dir\n}\n</code></pre>\n\n<p>The program still lists all the files in an \".AppleDouble\" directory and finally crashes on a non-existant file. So obviously my boolean expression does not work...</p>\n\n<p>Why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "haml"], "answers": [{"comments": [{"owner": {"reputation": 2050, "user_id": 5695646, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-nEigl1xsDV4/AAAAAAAAAAI/AAAAAAAAANE/WGykpWYiogM/photo.jpg?sz=128", "display_name": "Yshmarov", "link": "https://stackoverflow.com/users/5695646/yshmarov"}, "edited": false, "score": 0, "creation_date": 1454531939, "post_id": 35186635, "comment_id": 58091579, "body": "I know that I can access them in event/show by typing <code>@attendances = @event.attendances</code> for the show controller. The point is that I want to see all the attendances in the event/index view.inside the table"}], "tags": [], "owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "is_accepted": true, "score": 1, "last_activity_date": 1454529937, "creation_date": 1454529937, "answer_id": 35186635, "question_id": 35186545, "link": "https://stackoverflow.com/questions/35186545/nested-views-in-a-view-rails/35186635#35186635", "title": "Nested views in a view Rails", "body": "<p>Because you have defined an association that dictates that an \"event has many attendances\", you may access those attendance records from the event record itself. </p>\n\n<p>Something along the lines of the following should suffice: </p>\n\n<pre><code>%tbody\n  - @events.each do |event|\n    %tr\n      %td= event.starts_at\n      %td= event.duration\n      - event.attendances.each do |attendance|\n        %tr\n          %td= attendance.guest\n          %td= attendance.attendance_rate\n          %td= attendance.event\n</code></pre>\n\n<p>By accessing the attendances through the <code>event</code> itself, you do not end up with all the extra attendances records (you only get the ones that are associated with the currently accessed event).</p>\n"}], "owner": {"reputation": 2050, "user_id": 5695646, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-nEigl1xsDV4/AAAAAAAAAAI/AAAAAAAAANE/WGykpWYiogM/photo.jpg?sz=128", "display_name": "Yshmarov", "link": "https://stackoverflow.com/users/5695646/yshmarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 35186635, "answer_count": 1, "score": 0, "last_activity_date": 1454529937, "creation_date": 1454529701, "question_id": 35186545, "link": "https://stackoverflow.com/questions/35186545/nested-views-in-a-view-rails", "title": "Nested views in a view Rails", "body": "<p>How can I show the attendances that belong to each event under each event?</p>\n\n<p>Event.rb:</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n  has_many :attendances, dependent: :destroy\n</code></pre>\n\n<p>Events/index:</p>\n\n<pre><code>%h1 Listing events\n%table\n  %thead\n    %tr\n      %th Starts at\n      %th Duration\n\n  %tbody\n    - @events.each do |event|\n      %tr\n        %td= event.starts_at\n        %td= event.duration\n\n%br\n</code></pre>\n\n<p>I tried this code, but it renders totally all attendances under each event:</p>\n\n<pre><code>%table\n  %thead\n    %tr\n      %th Starts at\n      %th Duration\n\n  %tbody\n    - @events.each do |event|\n      %tr\n        %td= event.starts_at\n        %td= event.duration\n        - @attendances.each do |attendance|\n          %tr\n            %td= attendance.guest\n            %td= attendance.attendance_rate\n            %td= attendance.event\n%br\n</code></pre>\n\n<p>It looks like I must change something in the array &amp; in controller?</p>\n"}, {"tags": ["ruby", "bundler", "gitlab"], "answers": [{"tags": [], "owner": {"reputation": 375, "user_id": 1395361, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/f2ff5fbe76b699a58bc64acd0ccb8cb6?s=128&d=identicon&r=PG", "display_name": "dominic", "link": "https://stackoverflow.com/users/1395361/dominic"}, "is_accepted": true, "score": 1, "last_activity_date": 1454599674, "creation_date": 1454599674, "answer_id": 35204972, "question_id": 35186427, "link": "https://stackoverflow.com/questions/35186427/could-not-find-bundler-0-among-0-total-gems-gemloaderror/35204972#35204972", "title": "Could not find &#39;bundler&#39; (&gt;= 0) among 0 total gem(s) (Gem::LoadError)", "body": "<p>It's a very simple problem with rights. </p>\n\n<p>Look if /usr/local/lib/ruby/gems/2.2.0 is accessible by others than root. </p>\n\n<p>If not do :</p>\n\n<pre><code>chmod o+x /usr/local/lib/ruby/gems/\n</code></pre>\n\n<p>Maybe the path isn't accessible a folder up or down, so change permissions there. </p>\n\n<p>You can look for permissions with </p>\n\n<pre><code>ll YOUR_PATH\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 1395361, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/f2ff5fbe76b699a58bc64acd0ccb8cb6?s=128&d=identicon&r=PG", "display_name": "dominic", "link": "https://stackoverflow.com/users/1395361/dominic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2161, "favorite_count": 0, "accepted_answer_id": 35204972, "answer_count": 1, "score": 1, "last_activity_date": 1454599674, "creation_date": 1454529250, "last_edit_date": 1495542668, "question_id": 35186427, "link": "https://stackoverflow.com/questions/35186427/could-not-find-bundler-0-among-0-total-gems-gemloaderror", "title": "Could not find &#39;bundler&#39; (&gt;= 0) among 0 total gem(s) (Gem::LoadError)", "body": "<p>I'm trying to install gitlab on my vhost. It's an Ubuntu 14.04. </p>\n\n<p>The introduction tells me to run the command:</p>\n\n<pre><code>sudo -u gitlab -H bundle install --deployment --without development test postgres aws kerberos\n</code></pre>\n\n<p>But than I always get the error: </p>\n\n<pre><code>/usr/local/lib/ruby/2.2.0/rubygems/dependency.rb:315:in `to_specs': Could not find 'bundler' (&gt;= 0) among 0 total gem(s) (Gem::LoadError)\nChecked in 'GEM_PATH=/home/gitlab/.gem/ruby/2.2.0:/usr/local/lib/ruby/gems/2.2.0', execute `gem env` for more information\n    from /usr/local/lib/ruby/2.2.0/rubygems/dependency.rb:324:in `to_spec'\n    from /usr/local/lib/ruby/2.2.0/rubygems/core_ext/kernel_gem.rb:64:in `gem'\n    from /usr/local/bin/bundle:22:in `&lt;main&gt;'\n    from /usr/local/bin/ruby_executable_hooks:15:in `eval'\n    from /usr/local/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>If I start bundle as root it works normally. </p>\n\n<p>I tried a lot of solutions provided in other threads like:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6166081/could-not-find-bundler-error\">\u201cCould not find bundler\u201d error</a>\nor \n<a href=\"https://stackoverflow.com/questions/29626468/could-not-find-bundler-0-amongst-gemloaderror-with-rails-2-3-18\">Could not find bundler (>= 0) amongst [] (Gem::LoadError) with rails 2.3.18</a></p>\n\n<p>and so on but nothing resloves this error. \nNow I have no idea what I could do. </p>\n\n<p>My system: </p>\n\n<ul>\n<li>Ubuntu 14.04 (x_64)</li>\n<li>bundler 1.11.2</li>\n<li>ruby 2.2.4p230</li>\n</ul>\n\n<p>I hope you can help me out. </p>\n\n<p>If you need any other information please let me know. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "railstutorial.org"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1454529542, "post_id": 35186086, "comment_id": 58090068, "body": "You might find <a href=\"http://stackoverflow.com/questions/28614943/rails-tutorial-ch-10-test-10-20-failure\">this question and answer</a> helpful."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1454529917, "post_id": 35186086, "comment_id": 58090272, "body": "Some feedback on posting: In future, please ensure you format your code properly and add the <i>railstutorial.org</i> tag. It would also be useful to tell us which chapter you are in, also there is no such file as <code>UserMailer.rb</code>. And what is the file name where the first piece of code lives?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3250752"}, "edited": false, "score": 0, "creation_date": 1454530180, "post_id": 35186086, "comment_id": 58090435, "body": "Thank you for your comment, I will keep that in mind. I am on Chapter 10. It was suppose to be user_mailer.rb, I just miss typed it by mistake. Sorry."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3250752"}, "edited": false, "score": 0, "creation_date": 1454530045, "post_id": 35186575, "comment_id": 58090347, "body": "Thank for your suggestion, I have fixed the first issue but, I still am unable to fix the second error message."}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1454530554, "post_id": 35186575, "comment_id": 58090657, "body": "If you want to override the default from address, add a from: &#39;from@example.com&#39; to the mail line along with to: and subject:."}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 0, "last_activity_date": 1454529777, "creation_date": 1454529777, "answer_id": 35186575, "question_id": 35186086, "link": "https://stackoverflow.com/questions/35186086/rails-tutorial-m-hartl-i-am-receiving-two-errors-and-i-need-assistance/35186575#35186575", "title": "Rails Tutorial (M. Hartl) - I am receiving two errors and I need assistance", "body": "<p>You did not define the argument for the <code>account_activation</code> method.  You need to add a <code>user</code> argument:</p>\n\n<pre><code>def account_activation(user)\n  @user = user\n  mail to: user.email, subject: \"Account activation\"\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3250752"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 35186575, "answer_count": 1, "score": -1, "last_activity_date": 1454529777, "creation_date": 1454528164, "last_edit_date": 1454529648, "question_id": 35186086, "link": "https://stackoverflow.com/questions/35186086/rails-tutorial-m-hartl-i-am-receiving-two-errors-and-i-need-assistance", "title": "Rails Tutorial (M. Hartl) - I am receiving two errors and I need assistance", "body": "<p>I am getting 2 errors in my Ruby on Rails application. I am trying to complete the sample application from the Rails Tutorial.</p>\n\n<p>Here are my errors:</p>\n\n<pre><code>1) Error:\nUserMailerTest#test_account_activation:\nArgumentError: wrong number of arguments (1 for 0)    app/mailers/user_mailer.rb:3:in `account_activation'     test/mailers/user_mailer_test.rb:9:in `block in &lt;class:UserMailerTest&gt;'\n\n2) Failure:\nUserMailerTest#test_password_reset [/home/andy/Ruby_Projects/sam\nple_app/test/mailers/user_mailer_test.rb:21]: Expected: [\"from@example.com\"] Actual: [\"noreply@example.com\"]\n</code></pre>\n\n<p>And here is my code for both issues:</p>\n\n<pre><code>require 'test_helper'\n\nclass UserMailerTest &lt; ActionMailer::TestCase\n\n  test \"account_activation\" do\n    user = users(:andy)\n    user.activation_token = User.new_token\n    mail = UserMailer.account_activation(user)\n    assert_equal \"Account activation\", mail.subject\n    assert_equal [user.email], mail.to\n    assert_equal [\"noreply@example.com\"], mail.from\n    assert_match user.name,               mail.body.encoded\n    assert_match user.activation_token,   mail.body.encoded\n    assert_match CGI::escape(user.email), mail.body.encoded\n  end\n\n  test \"password_reset\" do\n    mail = UserMailer.password_reset\n    assert_equal \"Password reset\", mail.subject\n    assert_equal [\"to@example.org\"], mail.to\n    assert_equal [\"from@example.com\"], mail.from\n    assert_match \"Hi\", mail.body.encoded\n  end\nend\n</code></pre>\n\n<p>Here is the UserMailer.rb: </p>\n\n<pre><code>class UserMailer &lt; ApplicationMailer\n\n  def account_activation\n    user = user\n    mail to: user.email, subject: \"Account activation\"\n  end\n\n  def password_reset\n    @greeting = \"Hi\"\n    mail to: \"to@example.org\"\n  end\nend\n</code></pre>\n\n<p>I have been following the tutorial checking my code with what is in the tutorial, but still unable to find what I have done wrong. Please let me know if you need any more information. I will try and provide it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "answers": [{"comments": [{"owner": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "edited": false, "score": 0, "creation_date": 1454528999, "post_id": 35186300, "comment_id": 58089698, "body": "Awesome. This works, but how would I link a path to the &quot;Add Global Payer Contract&quot;?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "edited": false, "score": 0, "creation_date": 1454529135, "post_id": 35186300, "comment_id": 58089797, "body": "<a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a>"}, {"owner": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "edited": false, "score": 0, "creation_date": 1454529614, "post_id": 35186300, "comment_id": 58090103, "body": "I still can&#39;t get it right. Any ideas? I&#39;ve tried this: %button.btn{:type =&gt; &quot;button&quot;} Add Global Payer Contract       = link_to t(&#39;payer_contracts.new_payer_contract&#39;), new_payer_contract_path"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "edited": false, "score": 0, "creation_date": 1454530690, "post_id": 35186300, "comment_id": 58090741, "body": "I don&#39;t think you really get what I&#39;m saying - don&#39;t use a <code>&lt;button&gt;</code> element either. You should be using an anchor (link) <code>&lt;a&gt;</code> element. Thats what link_to() creates. You then use CSS to style it so that it &quot;looks like a button&quot;.  <code>= link_to t(&#39;payer_contracts.new_payer_contract&#39;), new_payer_contract_path, class: &#39;btn&#39;</code>"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 3, "last_activity_date": 1454529105, "last_edit_date": 1454529105, "creation_date": 1454528838, "answer_id": 35186300, "question_id": 35186030, "link": "https://stackoverflow.com/questions/35186030/how-to-make-button-link-to-path-in-haml/35186300#35186300", "title": "How to make button link to path in HAML?", "body": "<p>You would use <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to\" rel=\"nofollow\"><code>link_to</code></a>. </p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to\" rel=\"nofollow\"><code>button_to</code></a> despite the name does not really mean that you should use it when you want to have a link which looks like a button. <code>button_to</code> creates a discrete form, which makes it ideal for buttons which perform POST, DELETE or PATCH operations since it makes it possible even without javascript tomfoolery.</p>\n\n<pre><code>button_to \"Delete\", thing_path(@thing), method: :delete\n</code></pre>\n\n<p>However its totally overkill when you just want a link to a new, index or show action. If you use <code>button_to</code> everywhere you will get a very heavy and convoluted document (think .Net WebForms).</p>\n\n<pre><code>  .bar\n    .btn-group.dropdown-end\n      %button.btn{:type =&gt; \"button\"} Add Global Payer Contract\n      %button.btn.icon-decrement{\"aria-expanded\" =&gt; \"false\", \"aria-haspopup\" =&gt; \"true\", \"data-toggle\" =&gt; \"dropdown\", :type =&gt; \"button\"}\n      %ul{\"aria-hidden\" =&gt; \"true\", :role =&gt; \"menu\"}\n        %li\n          = link_to \"Add BPCI Payer Contract\", new_payer_contract_path\n</code></pre>\n"}], "owner": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4536, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1454529105, "creation_date": 1454527968, "question_id": 35186030, "link": "https://stackoverflow.com/questions/35186030/how-to-make-button-link-to-path-in-haml", "title": "How to make button link to path in HAML?", "body": "<p>I originally had just a button that when clicked would direct the user to a different path. Here is the code for that:</p>\n\n<pre><code>  .bar\n    %h1.pull-left= t('payer_contracts.payer_contracts')\n    = button_to t('payer_contracts.new_payer_contract'), new_payer_contract_path, {:class =&gt; 'btn pull-right', :method =&gt; 'get'}\n</code></pre>\n\n<p>Now, I have a button that is a button dropdown. How exactly can I add a path to the first button \"Add Global Payer Contract\" and then a different path to the button drop down option \"Add BPCI Payer Contract\"?</p>\n\n<pre><code>  .bar\n    .btn-group.dropdown-end\n      %button.btn{:type =&gt; \"button\"} Add Global Payer Contract\n      %button.btn.icon-decrement{\"aria-expanded\" =&gt; \"false\", \"aria-haspopup\" =&gt; \"true\", \"data-toggle\" =&gt; \"dropdown\", :type =&gt; \"button\"}\n      %ul{\"aria-hidden\" =&gt; \"true\", :role =&gt; \"menu\"}\n        %li\n          %a{:href =&gt; \"#\"} Add BPCI Payer Contract\n</code></pre>\n\n<p>I am wanting to path \"Add Global Payer Contract\" to new_payer_contract_path\nand add BPCI Payer Contract to add_new_bpci_path</p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "is_accepted": true, "score": 2, "last_activity_date": 1454528107, "creation_date": 1454528107, "answer_id": 35186070, "question_id": 35185923, "link": "https://stackoverflow.com/questions/35185923/rails-html-image-tag-not-rendering-classes/35186070#35186070", "title": "rails html image_tag not rendering classes", "body": "<p>Try putting parentheses around your argument to the <code>asset_path</code> method:</p>\n\n<pre><code>&lt;%= image_tag asset_path('filename.jpg'), class: \"img-responsive img-rounded center-block\", alt: \"Image description\" %&gt;\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 5577031, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-SzjoleQRZrY/AAAAAAAAAAI/AAAAAAAAACo/DhGx8vtt2G4/photo.jpg?sz=128", "display_name": "Andrew Breunig", "link": "https://stackoverflow.com/users/5577031/andrew-breunig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 35186070, "answer_count": 1, "score": 1, "last_activity_date": 1454528107, "creation_date": 1454527595, "question_id": 35185923, "link": "https://stackoverflow.com/questions/35185923/rails-html-image-tag-not-rendering-classes", "title": "rails html image_tag not rendering classes", "body": "<p>I'm building a blog app in Ruby on Rails. I have an \"About\" view where I'd like to load an image and style it with some bootstrap classes.</p>\n\n<p>Currently, the image is loading successfully and rendering on the page, but it doesn't have the styling I want and when I use the Chrome Inspector I see that the browser is totally ignoring the classes (skips over them).</p>\n\n<p>I'm porting this project over from a basic web page, and before porting it to Rails, the image was styled correctly.</p>\n\n<p>Here is my Rails code:</p>\n\n<pre><code>&lt;%= image_tag asset_path 'filename.jpg', class: \"img-responsive img-rounded center-block\", alt: \"Image description\" %&gt;\n</code></pre>\n\n<p>And this is what Chrome Inspector sees:</p>\n\n<pre><code>&lt;img src=\"/assets/filename.jpg\" alt=\"Image description\"&gt;\n</code></pre>\n\n<p>No classes! Where did they go?</p>\n\n<p>Here is my HTML code from the old page, which works:</p>\n\n<pre><code>&lt;img src=\"assets/images/filename.jpg\" class=\"img-responsive img-rounded center-block\" alt=\"Image description\" /&gt;\n</code></pre>\n\n<p>A fresh set of eyes would be appreciated. What am I missing?</p>\n"}, {"tags": ["arrays", "ruby", "dictionary", "enumerator"], "comments": [{"owner": {"reputation": 725, "user_id": 3613829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PhaFN.jpg?s=128&g=1", "display_name": "Alexis Andersen", "link": "https://stackoverflow.com/users/3613829/alexis-andersen"}, "edited": false, "score": 1, "creation_date": 1454527134, "post_id": 35185683, "comment_id": 58088521, "body": "A select in place of map sounds like what you&#39;re looking for"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1454527736, "post_id": 35185683, "comment_id": 58088934, "body": "What are <code>filer2</code> and <code>filer3</code>? What do the methods <code>abc</code>, <code>xyz</code>, and <code>com</code> do?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1454570756, "post_id": 35185683, "comment_id": 58106374, "body": "Translation from sawanese: if &quot;filer2.abc.com&quot; and &quot;filer3.xyz.com&quot; are strings they need to be in quotes."}], "answers": [{"comments": [{"owner": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "edited": false, "score": 0, "creation_date": 1454528265, "post_id": 35185875, "comment_id": 58089258, "body": "I think using <code>include?</code> would make things more readable   <code>fqdn_array.keep_if{|fqdn| hostnames.include? fqdn.split(&#39;.&#39;)[0] }</code>"}, {"owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "edited": false, "score": 1, "creation_date": 1454529991, "post_id": 35185875, "comment_id": 58090307, "body": "You&#39;re welcome. If it&#39;s the right solution for you then accept this answer please."}, {"owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "reply_to_user": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "edited": false, "score": 1, "creation_date": 1454530381, "post_id": 35185875, "comment_id": 58090552, "body": "@thomas-haratyk: My solution would work as well, if there&#39;s a fqdn like &quot;abc.filer1.com&quot;."}], "tags": [], "owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "is_accepted": true, "score": 0, "last_activity_date": 1454528195, "last_edit_date": 1454528195, "creation_date": 1454527450, "answer_id": 35185875, "question_id": 35185683, "link": "https://stackoverflow.com/questions/35185683/compare-arrays-in-ruby/35185875#35185875", "title": "Compare arrays in Ruby", "body": "<pre><code>fqdn_array = [\"filer1.abc.com\", \"filer2.abc.com\", \"filer3.xyz.com\"]\nhostnames = [\"filer1\", \"filer3\"]\n\nresult = fqdn_array.keep_if{|fqdn| (hostnames - fqdn.split('.')).length &lt; hostnames.length}\n# =&gt; [\"filer1.abc.com\", \"filer3.xyz.com\"] \n</code></pre>\n\n<p><code>Array#keep_if</code> iterates through the array and keeps all elements where the block is true. In the block I split your fqdn at the dot into an array. Then I subtract it from the hostnames array. If the result is shorter than the original array length, I found a fqdn which includes one of your hostnames and the condition returns true.</p>\n"}], "owner": {"reputation": 15, "user_id": 4062151, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004677157514/picture?type=large", "display_name": "Mahesh4eva", "link": "https://stackoverflow.com/users/4062151/mahesh4eva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 35185875, "answer_count": 1, "score": 0, "last_activity_date": 1454528195, "creation_date": 1454526783, "last_edit_date": 1454527200, "question_id": 35185683, "link": "https://stackoverflow.com/questions/35185683/compare-arrays-in-ruby", "title": "Compare arrays in Ruby", "body": "<p>I have an array of fully qualified domain names:</p>\n\n<pre><code>[\"filer1.abc.com\", filer2.abc.com, filer3.xyz.com]\n</code></pre>\n\n<p>I have another array that has hostnames:</p>\n\n<pre><code>[\"filer1\", \"filer3\"]\n</code></pre>\n\n<p>I have to compare the two arrays, and if the hostnames are present in fqdn, then I need to get the fqdn from the first array. For example, <code>\"filer1\"</code> is present in <code>\"filer1.abc.com\"</code>, so I need to get the value <code>\"filer1.abc.com\"</code>. And <code>\"filer3\"</code> is present in <code>\"filer3.xyz.com\"</code>, so I need to get the value <code>\"filer3.xyz.com\"</code>.</p>\n\n<p>Help is appreciated.</p>\n\n<pre><code>[\"filer1.abc.com\", filer2.abc.com, filer3.xyz.com].map.each_with_index {|vserver, indx| vserver.id.include? host_names[indx] unless host_names[indx].nil?}}\n</code></pre>\n\n<p>I get <code>[true, nil, nil, nil]</code>, but I actually need the values of fqdn like <code>[\"filer1.abc.com\"]</code>.</p>\n"}, {"tags": ["ruby", "http", "authentication", "active-directory", "ldap"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454545395, "post_id": 35185677, "comment_id": 58097837, "body": "Welcome to Stack Overflow. Here&#39;s a little advice: Don&#39;t say it&#39;s a dumb question and then urge us to be gentle. Ask good questions, make sure you&#39;ve done your research and provide the necessary information. <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a> and <a href=\"http://tinyurl.com/stack-hints\" rel=\"nofollow noreferrer\">tinyurl.com/stack-hints</a> and <a href=\"http://catb.org/esr/faqs/smart-questions.html\" rel=\"nofollow noreferrer\">catb.org/esr/faqs/smart-questions.html</a> are good reading."}], "answers": [{"tags": [], "owner": {"reputation": 812, "user_id": 3980707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aVkRT.jpg?s=128&g=1", "display_name": "Bertold Kolics", "link": "https://stackoverflow.com/users/3980707/bertold-kolics"}, "is_accepted": false, "score": 0, "last_activity_date": 1454547249, "creation_date": 1454547249, "answer_id": 35190639, "question_id": 35185677, "link": "https://stackoverflow.com/questions/35185677/how-to-connect-to-http-rest-api-that-authenticates-with-ldap/35190639#35190639", "title": "How to connect to HTTP Rest API that authenticates with LDAP", "body": "<p>There are many ways you could pass credentials over HTTP. I would be surprised if the REST API allowed you to pass in host/port information of your LDAP server (this could be a huge security hole). The most likely scenario is that you need to provide a username and a password in a form that the REST API expects it. The REST API will then perform the authentication to the LDAP server and depending on the authentication results, you will get the corresponding response / status from the REST API back.</p>\n\n<p>Long story short, you need to get information from the administrator of the REST API (or from the API documentation) to see how you are expected authenticate over HTTP.</p>\n\n<p>I hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 3617, "user_id": 491098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fe581d396b5c8b6f9a5bbeb4609e407?s=128&d=identicon&r=PG", "display_name": "heiglandreas", "link": "https://stackoverflow.com/users/491098/heiglandreas"}, "is_accepted": false, "score": 0, "last_activity_date": 1454616030, "creation_date": 1454616030, "answer_id": 35210491, "question_id": 35185677, "link": "https://stackoverflow.com/questions/35185677/how-to-connect-to-http-rest-api-that-authenticates-with-ldap/35210491#35210491", "title": "How to connect to HTTP Rest API that authenticates with LDAP", "body": "<p>When you get a <code>401 Authorization required</code> the server has to also provide an <code>www-authenticate</code>-Header that contains more information on how to authenticate. Have a look for that and check the information given. </p>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 1, "creation_date": 1550804996, "post_id": 54819375, "comment_id": 96414353, "body": "Maybe show some code snippet here? -- that will help others to understand this more clearly."}], "tags": [], "owner": {"reputation": 1, "user_id": 8033571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e37f0cda4c84074891ce2f601c66f798?s=128&d=identicon&r=PG&f=1", "display_name": "PvO", "link": "https://stackoverflow.com/users/8033571/pvo"}, "is_accepted": false, "score": 0, "last_activity_date": 1550803818, "creation_date": 1550803818, "answer_id": 54819375, "question_id": 35185677, "link": "https://stackoverflow.com/questions/35185677/how-to-connect-to-http-rest-api-that-authenticates-with-ldap/54819375#54819375", "title": "How to connect to HTTP Rest API that authenticates with LDAP", "body": "<p>I don't know if this helps, I was trying to use postman to send authenticate against an API that uses LDAP. \nOne of the gun devs I work with helped me out,  it ended up that I had to use DOMAIN\\username in the username field. It worked after that.</p>\n"}], "owner": {"reputation": 11, "user_id": 4312582, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0E1lmUd16Vw/AAAAAAAAAAI/AAAAAAAAAN0/6yA3Pefsb5o/photo.jpg?sz=128", "display_name": "Moo", "link": "https://stackoverflow.com/users/4312582/moo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3233, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1550803818, "creation_date": 1454526769, "last_edit_date": 1455138933, "question_id": 35185677, "link": "https://stackoverflow.com/questions/35185677/how-to-connect-to-http-rest-api-that-authenticates-with-ldap", "title": "How to connect to HTTP Rest API that authenticates with LDAP", "body": "<p>I am writing a Ruby script to connect to a REST API website.\nThe website is authenticated by using LDAP / SSO using the AD credentials, so no basic authentication or user/password has to be provided.</p>\n\n<p>This is the code so far:</p>\n\n<pre><code>resource_http = Net::HTTP.new(webserver.company.com, 443)\nresource_http.use_ssl = true\nresource_http.verify_mode = OpenSSL::SSL::VERIFY_NONE\nresource_request = Net::HTTP::Post.new(\"/api/endpoint\")\nresource_request.set_form_data({\"chocolate\"=&gt;\"yes\",\"beer\"=&gt;\"yes\"})\nresource_response = resource_http.request(resource_request)\n</code></pre>\n\n<p>But I receive an authorization error:</p>\n\n<pre><code>Net::HTTPUnauthorized 401 Authorization Required\n</code></pre>\n\n<p>Playing with Net::LDAP, I'm able to authenticate my credentials on my computer:</p>\n\n<pre><code>ldap = Net::LDAP.new\nldap.host = \"ldap.company.com\"\nldap.port = \"389\"\nldap.auth \"user@company.com\", \"password\"\nldap.bind\n</code></pre>\n\n<p>But I have no idea how to \"attach\" or pass this LDAP info in the HTTP request.</p>\n\n<p>All my Google searches point me to enabling SSO/authentication on a website app, but I'm not trying to do that, I want to connect with my Ruby script to an existing LDAP authenticated website.</p>\n\n<p><strong>Update #1</strong>\nSome Ruby forums pointed me to the gem HTTPI and using a 'curb' adapter. This adapter relies on the Curl library to handle the Kerberos/SPNEGO authentication.\nHowever I was unable to make the curb installer work with the curl library they link on their website (for a Windows computer).</p>\n\n<p>I moved the code to Python using the kerberos module. I'm able to generate the ticket and append it on the HTTP request headers, which get authenticated by the REST API and return the data I want.</p>\n\n<p>I'm still learning, so even if my code works on Python I'd like to be able to make it work on Ruby.</p>\n\n<p>Sample code in Python:\n<a href=\"https://gist.github.com/DevOpsCow/d374300304d7beef8a03\" rel=\"nofollow\">https://gist.github.com/DevOpsCow/d374300304d7beef8a03</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1454626672, "post_id": 35207419, "comment_id": 58141791, "body": "Thanks. Was missing the sessions_options."}], "tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": true, "score": 2, "last_activity_date": 1454606204, "creation_date": 1454606204, "answer_id": 35207419, "question_id": 35184917, "link": "https://stackoverflow.com/questions/35184917/sidekiq-forbidden-error-with-redis-sessions/35207419#35207419", "title": "Sidekiq Forbidden error with Redis sessions", "body": "<p>Read the comments just posted here:</p>\n\n<p><a href=\"https://github.com/mperham/sidekiq/issues/2487#issuecomment-179667037\" rel=\"nofollow\">https://github.com/mperham/sidekiq/issues/2487#issuecomment-179667037</a></p>\n\n<p>Run <code>bundle update sinatra</code> to make sure you have the latest Sinatra and Rack stuff.</p>\n\n<p>To properly share the session between Sinatra and Rails, you need to do something like this:</p>\n\n<pre><code>Sidekiq::Web.set :session_secret, Rails.application.secrets[:secret_token]\nSidekiq::Web.set :sessions, Rails.application.config.session_options\n</code></pre>\n"}], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 978, "favorite_count": 0, "accepted_answer_id": 35207419, "answer_count": 1, "score": 2, "last_activity_date": 1454606204, "creation_date": 1454524339, "last_edit_date": 1454531172, "question_id": 35184917, "link": "https://stackoverflow.com/questions/35184917/sidekiq-forbidden-error-with-redis-sessions", "title": "Sidekiq Forbidden error with Redis sessions", "body": "<p>Seeing a Forbidden error when we attempt to retry / delete / etc from the sidekiq UI. </p>\n\n<p>Read through a lot of the web traffic on people who experienced this issue, including: <a href=\"https://github.com/mperham/sidekiq/issues/1289\" rel=\"nofollow\">https://github.com/mperham/sidekiq/issues/1289</a></p>\n\n<p>Running on</p>\n\n<ul>\n<li>rails 4.1.11</li>\n<li>ruby 2.2.3 </li>\n<li>sidekiq-pro 3.0.1</li>\n<li>redis 2.8.21 </li>\n<li>puma </li>\n<li>Heroku </li>\n<li>redis-rails for storing sessions</li>\n</ul>\n\n<p>relevant snippets from our app: <a href=\"https://gist.github.com/toddmetheny/4b511e364a4c91ad8187\" rel=\"nofollow\">https://gist.github.com/toddmetheny/4b511e364a4c91ad8187</a></p>\n\n<p>We're using redis to store sessions. It seemed like a fair number of people having the problem were doing that but there were various problems sharing sessions w/ the sidekiq UI.</p>\n\n<p>Tried most of the things I've seen suggested in the related closed issues without any luck. As described by others, it works well in development...and staging (which seems really weird). Was hoping someone might have something to add. Thanks in advance.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 4561, "user_id": 1043569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0f0397c0ae99625fde35aaa75a20494e?s=128&d=identicon&r=PG", "display_name": "Atri", "link": "https://stackoverflow.com/users/1043569/atri"}, "edited": false, "score": 2, "creation_date": 1454524503, "post_id": 35184884, "comment_id": 58086940, "body": "So whats the problem?"}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454526886, "post_id": 35185026, "comment_id": 58088383, "body": "<code>Hash#has_key?</code> is deprecated in favor of <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-key-3F\" rel=\"nofollow noreferrer\"><code>Hash#key?</code></a> (<a href=\"http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/43765\" rel=\"nofollow noreferrer\">background</a>)."}], "tags": [], "owner": {"reputation": 4561, "user_id": 1043569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0f0397c0ae99625fde35aaa75a20494e?s=128&d=identicon&r=PG", "display_name": "Atri", "link": "https://stackoverflow.com/users/1043569/atri"}, "is_accepted": false, "score": 0, "last_activity_date": 1454527238, "last_edit_date": 1495541738, "creation_date": 1454524665, "answer_id": 35185026, "question_id": 35184884, "link": "https://stackoverflow.com/questions/35184884/how-to-match-a-user-input-with-a-key-in-the-hash-table-in-ruby/35185026#35185026", "title": "How to match a user-input with a key in the hash table in Ruby", "body": "<p>You can check if a hash contains a key by using <a href=\"http://docs.ruby-lang.org/en/2.0.0/Hash.html#method-i-has_key-3F\" rel=\"nofollow noreferrer\"><code>has_key?</code></a></p>\n\n<p>Something like:</p>\n\n<pre><code>guide_book.has_key?(city_name)\n</code></pre>\n\n<p><strong>Edit</strong>: (Thanks to <a href=\"https://stackoverflow.com/users/179125/jordan\">Jordan</a> for the suggestion)</p>\n\n<p>You can use <a href=\"http://docs.ruby-lang.org/en/2.0.0/Hash.html#method-i-key-3F\" rel=\"nofollow noreferrer\"><code>Hash#key?</code></a> method, as <code>Hash#has_key?</code> is deprecated (See <a href=\"http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/43765\" rel=\"nofollow noreferrer\">this</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454545665, "post_id": 35186131, "comment_id": 58097918, "body": "Excellent! I forget about <code>default</code> but this is a great use for it."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1454528301, "creation_date": 1454528301, "answer_id": 35186131, "question_id": 35184884, "link": "https://stackoverflow.com/questions/35184884/how-to-match-a-user-input-with-a-key-in-the-hash-table-in-ruby/35186131#35186131", "title": "How to match a user-input with a key in the hash table in Ruby", "body": "<pre><code>guide_book.default = \"invalid city\"\nputs guide_book[city_name]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5879474, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qWoFtkufJIs/AAAAAAAAAAI/AAAAAAAAID4/ZDVH0-9kzO0/photo.jpg?sz=128", "display_name": "Divesh Chadha", "link": "https://stackoverflow.com/users/5879474/divesh-chadha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1454528301, "creation_date": 1454524258, "last_edit_date": 1454526719, "question_id": 35184884, "link": "https://stackoverflow.com/questions/35184884/how-to-match-a-user-input-with-a-key-in-the-hash-table-in-ruby", "title": "How to match a user-input with a key in the hash table in Ruby", "body": "<p>I have a hash:</p>\n\n<pre><code>guide_book = {\"Delhi\" =&gt; \"011\", \"Noida\" =&gt; \"0120\", \"Indore\" =&gt; \"0731\", \"beas\" =&gt; \"458\", \"goa\" =&gt; \"835\"}\n</code></pre>\n\n<p>I want to match the user input string <code>city_name</code> with the key in the hash table. If the input matches any key, then the code should be printed, else a note of invalid city should be printed.</p>\n\n<p>This is the code I wrote:</p>\n\n<pre><code>puts \"Please enter the city name\"\ncity_name = gets.chomp\nputs \"Thank You\"\nputs \"The available cities in the city guide are\"\nguide_book.each{|k,v| puts k}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454524188, "post_id": 35184769, "comment_id": 58086774, "body": "Please edit your question to include the code you&#39;ve written so far."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1454524362, "post_id": 35184769, "comment_id": 58086867, "body": "You need to add your own validation. There is not out of the box for this usecase."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1454749012, "post_id": 35184769, "comment_id": 58192553, "body": "You&#39;ve asked about inbuilt validations, but the answer you picked does not comply with that in no way"}], "answers": [{"tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": true, "score": 1, "last_activity_date": 1454524314, "creation_date": 1454524314, "answer_id": 35184905, "question_id": 35184769, "link": "https://stackoverflow.com/questions/35184769/activemodelvalidation-any-of-3-fields/35184905#35184905", "title": "ActiveModel::Validation Any of 3 fields", "body": "<p>Create a custom validation:</p>\n\n<pre><code>validate :one_of_three\n\ndef one_of_three\n  errors.add(:base, 'Must have one of foo, bar or wee') unless foo || bar || wee\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 0, "last_activity_date": 1454565615, "last_edit_date": 1454565615, "creation_date": 1454528770, "answer_id": 35186268, "question_id": 35184769, "link": "https://stackoverflow.com/questions/35184769/activemodelvalidation-any-of-3-fields/35186268#35186268", "title": "ActiveModel::Validation Any of 3 fields", "body": "<p>There is a way to conditionally validate the presence of one attribute depending on presence of another:</p>\n\n<pre><code>validates :attr_1,\n  presence: true,\n  if: -&gt;(model) { model.attr_2.blank? &amp;&amp; model.attr_3.blank? }\nvalidates :attr_2,\n  presence: true,\n  if: -&gt;(model) { model.attr_1.blank? &amp;&amp; model.attr_3.blank? }\nvalidates :attr_3,\n  presence: true,\n  if: -&gt;(model) { model.attr_1.blank? &amp;&amp; model.attr_2.blank? }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 779, "user_id": 3828281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObrkS.jpg?s=128&g=1", "display_name": "Dheeresha", "link": "https://stackoverflow.com/users/3828281/dheeresha"}, "is_accepted": false, "score": 1, "last_activity_date": 1454568644, "creation_date": 1454568644, "answer_id": 35194346, "question_id": 35184769, "link": "https://stackoverflow.com/questions/35184769/activemodelvalidation-any-of-3-fields/35194346#35194346", "title": "ActiveModel::Validation Any of 3 fields", "body": "<p>Try the following.</p>\n\n<pre><code>validate :attributes_presence \n\ndef attributes_presence\n  errors.add(:base, 'At least one attribute must be present') if attr1.blank? &amp;&amp;  attr2.blank? &amp;&amp; attr3.blank?\nend\n</code></pre>\n"}], "owner": {"reputation": 8415, "user_id": 505990, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QaLn2.jpg?s=128&g=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/505990/leonardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 35184905, "answer_count": 3, "score": 0, "last_activity_date": 1454568644, "creation_date": 1454523906, "last_edit_date": 1454529034, "question_id": 35184769, "link": "https://stackoverflow.com/questions/35184769/activemodelvalidation-any-of-3-fields", "title": "ActiveModel::Validation Any of 3 fields", "body": "<p>I have 3 fields in my Model and i need at least one of them to be present - how can do this using inbuilt validations?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1454524012, "post_id": 35184725, "comment_id": 58086676, "body": "<a href=\"http://stackoverflow.com/questions/24865596/rails-4-sendgrid-integration-giving-error-unauthenticated-senders-not-allowed\" title=\"rails 4 sendgrid integration giving error unauthenticated senders not allowed\">stackoverflow.com/questions/24865596/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 5862372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1vhn.jpg?s=128&g=1", "display_name": "RssIII", "link": "https://stackoverflow.com/users/5862372/rssiii"}, "reply_to_user": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1454525263, "post_id": 35184725, "comment_id": 58087370, "body": "telnet does not seem to work. it says command not found."}], "owner": {"reputation": 21, "user_id": 5862372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1vhn.jpg?s=128&g=1", "display_name": "RssIII", "link": "https://stackoverflow.com/users/5862372/rssiii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "closed_date": 1454524323, "answer_count": 0, "score": 1, "last_activity_date": 1454526321, "creation_date": 1454523783, "last_edit_date": 1454526321, "question_id": 35184725, "link": "https://stackoverflow.com/questions/35184725/netsmtpfatalerror-550-unauthenticated-senders-not-allowed-tried-varoius-meth", "closed_reason": "Duplicate", "title": "Net::SMTPFatalError (550 Unauthenticated senders not allowed; tried varoius methods to solve the issue", "body": "<p>I seem to be having a problem when I try to send an email to myself from Heroku. There have been a lots of other people with a similar issue, and I have attempted to incorporate the solutions that worked for them, but sadly, to no avail.</p>\n\n<p>my\n    <code>environment.rb</code> has the following code:</p>\n\n<pre><code># Load the Rails application.\nrequire File.expand_path('../application', __FILE__)\n\n# Initialize the Rails application.\nRails.application.initialize!\n\nActionMailer::Base.smtp_settings = {\n    :address =&gt; 'smtp.sendgrid.net',\n    :port =&gt; '587',\n    :authenticaton =&gt; :plain,\n    :user_name =&gt; ENV['SENGRID_USERNAME'],\n    :password =&gt; ENV['SENGRID_PASSWORD'],\n    :domain =&gt; 'heroku.com',`enter code here`\n    :enable_startstls_auto =&gt; true\n}\n</code></pre>\n\n<p>When I try to test the page on Heroku, it is unsuccessful. </p>\n\n<p>I ran </p>\n\n<pre><code>heroku logs\n</code></pre>\n\n<p>to try and determine the problem, and the only error I could see was</p>\n\n<pre><code>Net::SMTPFatalError (550 Unauthenticated senders not allowed\n</code></pre>\n\n<p>My mailer file doesn't have any issues. I am not sure what's wrong, and would appreciate some assistance! </p>\n\n<p>edit: </p>\n\n<p>I have tried</p>\n\n<pre><code>telnet smtp.sendgrid.net 587\nEHLO\nAUTH LOGIN\nEnter username in Base64\nEnter password in Base64\n</code></pre>\n\n<p>but telnet cannot be found. Perhaps I am not understanding what must be done... </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rbenv"], "comments": [{"owner": {"reputation": 1143, "user_id": 1563837, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0784ce3665c294c4547f81a212014d4b?s=128&d=identicon&r=PG", "display_name": "Josh Bodah", "link": "https://stackoverflow.com/users/1563837/josh-bodah"}, "edited": false, "score": 0, "creation_date": 1454524822, "post_id": 35184680, "comment_id": 58087130, "body": "what does <code>ruby -v</code> give you?"}], "answers": [{"tags": [], "owner": {"reputation": 207, "user_id": 2647303, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1034018953/picture?type=large", "display_name": "mattcongel", "link": "https://stackoverflow.com/users/2647303/mattcongel"}, "is_accepted": false, "score": 0, "last_activity_date": 1454524993, "creation_date": 1454524993, "answer_id": 35185127, "question_id": 35184680, "link": "https://stackoverflow.com/questions/35184680/rbenv-version-2-2-1-is-not-installed-even-though-it-is/35185127#35185127", "title": "rbenv version 2.2.1 is not installed, even though it is", "body": "<p>Turns out that a long time ago I must have needed to change my <code>RBENV_ROOT</code> variable. </p>\n\n<p>I had a line in my .bash_profile that was essentially changing the installation folder for rbenv's ruby versions.</p>\n\n<p>Took the line out and everything works just fine now.</p>\n"}, {"tags": [], "owner": {"reputation": 7959, "user_id": 113079, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0727fedb2f94c21c10b90ce24d5e1988?s=128&d=identicon&r=PG", "display_name": "JOM", "link": "https://stackoverflow.com/users/113079/jom"}, "is_accepted": false, "score": 0, "last_activity_date": 1507709435, "creation_date": 1507709435, "answer_id": 46683068, "question_id": 35184680, "link": "https://stackoverflow.com/questions/35184680/rbenv-version-2-2-1-is-not-installed-even-though-it-is/46683068#46683068", "title": "rbenv version 2.2.1 is not installed, even though it is", "body": "<p>My problem was a <code>.ruby-version</code> file defining a specific version number at root of project. I was in a project sub-folder, nothing there. Also checked my home dir, nothing there either.</p>\n\n<p>Never thought looking at project root, but found out about it by running <code>rbenv version</code> command:</p>\n\n<pre><code>jmiettunen@MAC ThirdParty (master) $ rbenv version\nrbenv: version `2.2.2' is not installed\n (set by /Users/jmiettunen/git/myProject/.ruby-version)\n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 2647303, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1034018953/picture?type=large", "display_name": "mattcongel", "link": "https://stackoverflow.com/users/2647303/mattcongel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3689, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1507709435, "creation_date": 1454523642, "question_id": 35184680, "link": "https://stackoverflow.com/questions/35184680/rbenv-version-2-2-1-is-not-installed-even-though-it-is", "title": "rbenv version 2.2.1 is not installed, even though it is", "body": "<p>I'm having an issue where I've run the following commands in my local project</p>\n\n<pre><code>rbenv install 2.2.1\nrbenv local 2.2.1\nrbenv rehash\n</code></pre>\n\n<p>But then the second I try to run any ruby command (i.e. <code>gem</code>, <code>ruby</code>, <code>bundle</code>, etc), I get the error message: </p>\n\n<pre><code>rbenv: version `2.2.1' is not installed (set by /path/to/my/folder/.ruby-version)\n</code></pre>\n\n<p>I'm at a loss for why this is happening. I've deleted and re-cloned the repository and I've tried running <code>rbenv global 2.2.1</code>.</p>\n\n<p>Rbenv is installing my ruby versions to <code>/usr/local/var/rbenv/versions/</code> if that's helpful at all.</p>\n\n<p>Also, I have <code>/Users/congel/.rbenv/bin:/Users/congel/.rbenv/shims:</code> prepended to my <code>$PATH</code>. </p>\n\n<p>Any help would be greatly appreciated, thanks :)</p>\n"}, {"tags": ["python", "ruby", "selenium", "web-scraping", "webautomation"], "comments": [{"owner": {"reputation": 5044, "user_id": 888587, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7tddL.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/888587/brian"}, "edited": false, "score": 2, "creation_date": 1454521992, "post_id": 35184153, "comment_id": 58085450, "body": "Sigh... <a href=\"http://www.seleniumeasy.com/selenium-tutorials/how-to-download-a-file-with-webdriver\" rel=\"nofollow noreferrer\">try me</a>."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 3037691, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/688710421/picture?type=large", "display_name": "user3037691", "link": "https://stackoverflow.com/users/3037691/user3037691"}, "edited": false, "score": 0, "creation_date": 1454531250, "post_id": 35184752, "comment_id": 58091098, "body": "Thank you very much for the detailed response. I am going to try this out and see where it takes me. So I guess its just as simple as clicking  the button? I thought I might have to accept a download in the browser or do some additional programming to make sure the download runs smoothely"}, {"owner": {"reputation": 4487, "user_id": 2329061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89e7e5642e4f608893b279c8438329a3?s=128&d=identicon&r=PG", "display_name": "Buaban", "link": "https://stackoverflow.com/users/2329061/buaban"}, "edited": false, "score": 0, "creation_date": 1454532297, "post_id": 35184752, "comment_id": 58091820, "body": "Please find an example code to download files at <a href=\"http://stackoverflow.com/a/35031322/2329061\">stackoverflow.com/a/35031322/2329061</a>."}, {"owner": {"reputation": 473, "user_id": 5261074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edd775dcf1439e4ec17ab31a35bb16c0?s=128&d=identicon&r=PG&f=1", "display_name": "rdRahul ", "link": "https://stackoverflow.com/users/5261074/rdrahul"}, "reply_to_user": {"reputation": 135, "user_id": 3037691, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/688710421/picture?type=large", "display_name": "user3037691", "link": "https://stackoverflow.com/users/3037691/user3037691"}, "edited": false, "score": 0, "creation_date": 1454572564, "post_id": 35184752, "comment_id": 58107293, "body": "@user3037691 .after clicking the download link the downloading will start in browser itself if link provides a downloadable.In case if it prompts for manual saving, you can try the code mentioned in above comment ."}], "tags": [], "owner": {"reputation": 473, "user_id": 5261074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edd775dcf1439e4ec17ab31a35bb16c0?s=128&d=identicon&r=PG&f=1", "display_name": "rdRahul ", "link": "https://stackoverflow.com/users/5261074/rdrahul"}, "is_accepted": false, "score": 3, "last_activity_date": 1454523855, "creation_date": 1454523855, "answer_id": 35184752, "question_id": 35184153, "link": "https://stackoverflow.com/questions/35184153/writing-a-script-to-download-files-from-a-website-python-selenium/35184752#35184752", "title": "Writing a script to download files from a website? (Python, Selenium(?))", "body": "<p>You can do it by python selenium(download:pip install selenium).\nfirst import webdriver from selenium.<br>\nTo use chrome webdriver you have to download it first from <a href=\"https://sites.google.com/a/chromium.org/chromedriver/\" rel=\"nofollow\">here</a> or you can simply use firefox webdriver.</p>\n\n<pre><code>from selenium import webdriver\nbrowser=webdriver.Firefox() \n</code></pre>\n\n<p>then you need to find those field you can use any one of the below methods.if you get an id or name of field then it would be great else you have to use x-path </p>\n\n<pre><code>element = browser.find_element_by_id(\"field-id\")\nelement = browser.find_element_by_name(\"fieldname\")\nelement = browser.find_element_by_xpath(\"//input[@id='field-id']\")\n</code></pre>\n\n<p>if you are able to find it then now you can send input to that field by using </p>\n\n<pre><code>element.send_keys(\"Whatever you need to write\")\n</code></pre>\n\n<p>do this for all input fields\nthen similarly find the submit button</p>\n\n<pre><code>element=browser.find_element_by_id(\"Submit\")\n</code></pre>\n\n<p>to click the button</p>\n\n<pre><code>element.click()\n</code></pre>\n\n<p>to get details read the doc from <a href=\"http://selenium-python.readthedocs.org/navigating.html#filling-in-forms\" rel=\"nofollow\">here</a>.now since you want to do it multiple times try enclosing it inside function.and if there are many files you can multithread it.\nhope it helps.</p>\n"}], "owner": {"reputation": 135, "user_id": 3037691, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/688710421/picture?type=large", "display_name": "user3037691", "link": "https://stackoverflow.com/users/3037691/user3037691"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3972, "favorite_count": 0, "closed_date": 1454587164, "answer_count": 1, "score": 1, "last_activity_date": 1454570955, "creation_date": 1454521818, "last_edit_date": 1454570955, "question_id": 35184153, "link": "https://stackoverflow.com/questions/35184153/writing-a-script-to-download-files-from-a-website-python-selenium", "closed_reason": "Not suitable for this site", "title": "Writing a script to download files from a website? (Python, Selenium(?))", "body": "<p>I am working on a web scraping project and would like to write a script to download multiple files from the following <a href=\"http://war-on-ice.com/teambygame.html)\" rel=\"nofollow\">site</a>.\nI want to basically write a program which changes the date and a few other settings in the form, then clicks the download game table button and downloads the appropriate table. There is no API for this site so I THINK we actually have to click the button in order to initiate the necessary HTTP requests to download the file. </p>\n\n<p>I am currently looking at using Selenium Bindings in Python to achieve this. (Though I would also consider solutions using other languages, particularly Ruby) Would this be possible with Selenium?  Where can I find information about automating downloading a file using a script?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "strong-parameters"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1454520820, "post_id": 35183766, "comment_id": 58084704, "body": "Can you post your form code? This is not the  issue with strong parameters."}, {"owner": {"reputation": 317, "user_id": 708323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f437b879544975af3280c76438b9abe9?s=128&d=identicon&r=PG", "display_name": "Martin Greenaway", "link": "https://stackoverflow.com/users/708323/martin-greenaway"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1454521292, "post_id": 35183766, "comment_id": 58085000, "body": "Spot on - I&#39;d got hung up on the Strong Params and not even checked the &quot;required: true&quot; in the text area.  Thanks for pointing this out."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1454521343, "post_id": 35183766, "comment_id": 58085035, "body": "Hmm. You need to remove that to make it optional."}], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 708323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f437b879544975af3280c76438b9abe9?s=128&d=identicon&r=PG", "display_name": "Martin Greenaway", "link": "https://stackoverflow.com/users/708323/martin-greenaway"}, "edited": false, "score": 0, "creation_date": 1454521715, "post_id": 35183909, "comment_id": 58085268, "body": "+1 for this, I will look into it, it seems to allow some useful behaviours.  It wasn&#39;t the actual issue in this case, but thanks in any case."}], "tags": [], "owner": {"reputation": 164, "user_id": 2413440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KzC5j.jpg?s=128&g=1", "display_name": "Evgeniy B", "link": "https://stackoverflow.com/users/2413440/evgeniy-b"}, "is_accepted": false, "score": 2, "last_activity_date": 1454521061, "creation_date": 1454521061, "answer_id": 35183909, "question_id": 35183766, "link": "https://stackoverflow.com/questions/35183766/rails-strong-parameters-what-if-one-of-my-fields-is-optional/35183909#35183909", "title": "Rails Strong Parameters - what if one of my fields is optional?", "body": "<p>I think you should think about :on\n<a href=\"http://guides.rubyonrails.org/active_record_validations.html#on\" rel=\"nofollow\">http://guides.rubyonrails.org/active_record_validations.html#on</a></p>\n\n<pre><code>validates :email, uniqueness: true, on: :create\n</code></pre>\n\n<p>It enables validations only on specified action. </p>\n"}, {"comments": [{"owner": {"reputation": 317, "user_id": 708323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f437b879544975af3280c76438b9abe9?s=128&d=identicon&r=PG", "display_name": "Martin Greenaway", "link": "https://stackoverflow.com/users/708323/martin-greenaway"}, "edited": false, "score": 0, "creation_date": 1454521655, "post_id": 35184026, "comment_id": 58085231, "body": "This is useful - have +1 because my daft mistake in overlooking the required: true in the form itself (which was the actual problem) shouldn&#39;t mean no recognition for attempts to remedy my lack of strong params knowledge!"}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 1, "last_activity_date": 1454521394, "creation_date": 1454521394, "answer_id": 35184026, "question_id": 35183766, "link": "https://stackoverflow.com/questions/35183766/rails-strong-parameters-what-if-one-of-my-fields-is-optional/35184026#35184026", "title": "Rails Strong Parameters - what if one of my fields is optional?", "body": "<p>Strong parameters are used to ensure that no other data can pass into your object, that no1 can insert not wanted data. For example if you have entity <code>User</code> and it has field <code>admin</code> that if it is true, the user has admin role, it can not be set using the create or update method inside your controller, because some1 can send any kind of parameters to your controller, and you want to filter them (Allow only specific parameters).</p>\n\n<p>This does not mean if you put something inside strong parameters that it is required for create, update or whatever. Strong parameters only are there to filter the data, and allow only certain parts of your entity to be settable through this service or REST. If you send parameters that are not in strong params defined, in your server console/log there will be <code>unpermited parameters: list of the parameters</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 317, "user_id": 708323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f437b879544975af3280c76438b9abe9?s=128&d=identicon&r=PG", "display_name": "Martin Greenaway", "link": "https://stackoverflow.com/users/708323/martin-greenaway"}, "edited": false, "score": 1, "creation_date": 1454521561, "post_id": 35184032, "comment_id": 58085171, "body": "Thanks!  This was the issue.  I was too focussed on hating strong params because I don&#39;t fully understand them."}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 4, "last_activity_date": 1454522211, "last_edit_date": 1454522211, "creation_date": 1454521430, "answer_id": 35184032, "question_id": 35183766, "link": "https://stackoverflow.com/questions/35183766/rails-strong-parameters-what-if-one-of-my-fields-is-optional/35184032#35184032", "title": "Rails Strong Parameters - what if one of my fields is optional?", "body": "<p>As I said, this is nothing to do with strong parameters. You just need to remove <code>required: true</code>  for that field to make it optional.</p>\n"}], "owner": {"reputation": 317, "user_id": 708323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f437b879544975af3280c76438b9abe9?s=128&d=identicon&r=PG", "display_name": "Martin Greenaway", "link": "https://stackoverflow.com/users/708323/martin-greenaway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1317, "favorite_count": 0, "accepted_answer_id": 35184032, "answer_count": 3, "score": 3, "last_activity_date": 1454522211, "creation_date": 1454520596, "question_id": 35183766, "link": "https://stackoverflow.com/questions/35183766/rails-strong-parameters-what-if-one-of-my-fields-is-optional", "title": "Rails Strong Parameters - what if one of my fields is optional?", "body": "<p>I'd not claim myself to be an expert in Rails by any stretch.  One of the things that confuses me is Strong Parameters, and I've not found any really straightforward tutorials on it, with the majority of the search results dominated by hits on the rails documentation which, whilst normally accurate, I don't find in any way easy to read and can't be considered a tutorial.  The github for strong params also doesn't appear to cover this.</p>\n\n<p>Say I have an entity called \"Resource\".</p>\n\n<pre><code>class ResourcesController &lt; ApplicationController\n  ...\n  def create\n    @resource = Resource.new(resource_params)\n    if @resource.save\n      ...\n      respond_with(@resource.level)\n    else\n      ...\n    end\n  end\n\n  def update\n    if @resource.update(resource_params)\n      ...\n      respond_with(@resource.level)\n    else\n      ...\n    end\n  end\n  ...\n  def resource_params\n    params.require(:resource).permit(:name, :url, :description, :level_id)\n  end\nend\n</code></pre>\n\n<p>Assume I have a scaffolded form which displays the fields for name, url, description and level_id.  All of the fields are mandatory.  I don't know how to amend the resource_params function to ensure that name, url and level_id are mandatory when updating (or creating) a resource, but that description is optional (but should still be permitted).</p>\n\n<p>I've tried removing description from the require line, and adding it on a separate line as params.permit(:description) but that has not made any difference, the field is still mandatory in the form.</p>\n\n<p>Any assistance on this would be welcomed!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 1225, "user_id": 2407296, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1525f7d27300b7427caa65ff4c0c909d?s=128&d=identicon&r=PG", "display_name": "smaili", "link": "https://stackoverflow.com/users/2407296/smaili"}, "reply_to_user": {"reputation": 25150, "user_id": 383888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kd57u.jpg?s=128&g=1", "display_name": "Mori", "link": "https://stackoverflow.com/users/383888/mori"}, "edited": false, "score": 0, "creation_date": 1454520689, "post_id": 35183237, "comment_id": 58084609, "body": "@Mori I wouldn&#39;t have posted this question if I hadn&#39;t tried it already :)  Unfortunately it throws an error due to lack of scope"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454521466, "post_id": 35183237, "comment_id": 58085109, "body": "And did you put that error into the question so we know what it says? Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 164, "user_id": 2413440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KzC5j.jpg?s=128&g=1", "display_name": "Evgeniy B", "link": "https://stackoverflow.com/users/2413440/evgeniy-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1454521824, "creation_date": 1454521824, "answer_id": 35184156, "question_id": 35183237, "link": "https://stackoverflow.com/questions/35183237/variable-scope-in-child-template-view-in-erb/35184156#35184156", "title": "Variable scope in child template view in ERB", "body": "<p>As I see you are trying to collect some assets files inside the view. It is not very good option. \nI recommend to make new module </p>\n\n<blockquote>\n  <p>config/initializers/frontend.rb:</p>\n</blockquote>\n\n<pre><code>Module Frontend\n    @@fe = Array.new()\n\ndef self.getfe\n   @@fe\nend\n\ndef self.add_css(css)\n            @@fe &lt;&lt; css\n        end\n    end\n</code></pre>\n\n<p>And now you can simply add your css file anywhere to this array just simply call:</p>\n\n<pre><code>Frontend::add_css \"yourfile\"\n</code></pre>\n\n<p>And get your array back simply call </p>\n\n<pre><code>Frontend::getfe\n</code></pre>\n\n<p>This mechanism with class methods works in views also\nGood luck!</p>\n"}], "owner": {"reputation": 1225, "user_id": 2407296, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1525f7d27300b7427caa65ff4c0c909d?s=128&d=identicon&r=PG", "display_name": "smaili", "link": "https://stackoverflow.com/users/2407296/smaili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1454521824, "creation_date": 1454518911, "last_edit_date": 1454521424, "question_id": 35183237, "link": "https://stackoverflow.com/questions/35183237/variable-scope-in-child-template-view-in-erb", "title": "Variable scope in child template view in ERB", "body": "<p>I'm trying to declare defaults in my layout that can be overridden in the view.</p>\n\n<p>This is my layout:</p>\n\n<pre><code>&lt;%# Variables defaults -%&gt;\n&lt;%\n    @cssFiles = []\n    @jsFiles = []\n-%&gt;\n&lt;%# Variables overrides -%&gt;\n&lt;%= yield :layoutVariables -%&gt;\n</code></pre>\n\n<p>And my view:</p>\n\n<pre><code>&lt;% content_for :layoutVariables do -%&gt;\n    &lt;%\n        @cssFiles.push 'bootstrap'\n        @jsFiles.push 'bootstrap'\n    -%&gt;\n&lt;% end -%&gt;\n</code></pre>\n\n<p>I know this can be done by declaring the variables in the controller but I'd like to know whether the scope can extend from layout->view.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1454520049, "post_id": 35183168, "comment_id": 58084159, "body": "How are V6 and V10 organanized?  Are they separate controllers? Is V10 subclass of V6?  <code>super</code> can only be used to call super class&#39; methods."}, {"owner": {"reputation": 3728, "user_id": 2612713, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a7f606f9e135589780620d1160d941e?s=128&d=identicon&r=PG&f=1", "display_name": "neo", "link": "https://stackoverflow.com/users/2612713/neo"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1454520170, "post_id": 35183168, "comment_id": 58084252, "body": "V10 inherits from V9, V9 from V8, so on... updated the question"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1454520597, "post_id": 35183168, "comment_id": 58084545, "body": "Whats wrong with what you have tried? It seems alright - except that you are assuming that elements are inserted in same order as provided by input <code>rentals</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1454521819, "post_id": 35183168, "comment_id": 58085346, "body": "@WandMaker, you don&#39;t seem to understand the code at all. He is calling <code>super</code> inside a loop which just turns it into a recursive mess."}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 3, "last_activity_date": 1454521082, "creation_date": 1454521082, "answer_id": 35183918, "question_id": 35183168, "link": "https://stackoverflow.com/questions/35183168/super-to-merge-hash-from-parent-class/35183918#35183918", "title": "Super to merge hash from parent class", "body": "<p>This is pretty easy if, in your superclass, you extract the contents of the block into its own <code>format_rental</code> method:</p>\n\n<pre><code>class V9 &lt; V8\n  def format_rental(rental)\n    { start_time: rental.reservation_start_time.to_i,\n      end_time: rental.reservation_end_time.to_i\n    }\n  end\n\n  def format_rentals(rentals)\n    rentals.map {|rental| format_rental(rental) }\n  end\nend\n</code></pre>\n\n<p>Then, in your subclass, you need only override <code>format_rental</code>:</p>\n\n<pre><code>class V10 &lt; V9\n  def format_rental(rental)\n    super.merge(status: rental.status)\n    # Or: super.tap {|r| r[:status] = rental.status }\n  end\nend\n</code></pre>\n\n<p><code>super</code> will return the hash with the <code>:start_time</code> and <code>:end_time</code> keys; then you need only add your <code>:status</code> key and you're done. <code>format_rentals</code> needn't be modified at all.</p>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1454522894, "last_edit_date": 1454522894, "creation_date": 1454521357, "answer_id": 35184013, "question_id": 35183168, "link": "https://stackoverflow.com/questions/35183168/super-to-merge-hash-from-parent-class/35184013#35184013", "title": "Super to merge hash from parent class", "body": "<p>The problem is that you are calling <code>super</code> inside the block you are passing to <code>.map</code>. Which means that <code>format_rentals</code> is being called in each iteration. You could write a method which formats a single record instead:</p>\n\n<pre><code>def format_rentals(rentals)\n  rentals.map { |r| format_rental(r) }\nend\n\n\ndef format_rental(rental)\n  super.merge(status: rental.status)\nend\n</code></pre>\n\n<p>Or get creative with blocks and yield.</p>\n\n<p>However might be a good time to take a step back and consider if this is a good solution - should your controller really be responsible for serialising <code>rentals</code>? Especially if you have different representations in different versions of the API. I would consider using <code>ActiveModel::Serializers</code> or <code>jbuilder</code>.</p>\n\n<pre><code>class V9::RentalSerializer &lt; ActiveModel::Serializer\n  attributes :start_time, :end_time\n\n  def start_time\n    object.reservation_start_time.to_i\n  end\n\n  def end_time\n    object.reservation_end_time.to_i\n  end\nend\n\nclass V10::RentalSerializer &lt; V9::RentalSerializer\n  attributes :start_time, :end_time, :status\nend\n</code></pre>\n\n<p><strong>But</strong> - creating a deep class hierarchy based on the API version is hardly optimal either. The reason is that it becomes a very delicate card-house that is impossible to decipher for someone who has not followed the project from day one.</p>\n\n<p>You might want to consider having a \"base\" which follows the current version and \"adapters\" which backport for legacy versions. </p>\n\n<pre><code>class MyApi::RentalSerializerBase &lt; ActiveModel::Serializer\n  attributes :start_time, :end_time, :status\n\n  def start_time\n    object.reservation_start_time.to_i\n  end\n\n  def end_time\n    object.reservation_end_time.to_i\n  end\nend\n\nclass V7::RentalSerializer &lt; MyApi::RentalSerializerBase\n  attributes :start_time, :end_time\n\n  # lets say version 7 has a weird bug so that end_time is in iso 8601 instead\n  # however since clients rely on the defect \n  # being there we cannot change the response\n  def end_time\n    object.reservation_end_time.iso8601\n  end\nend\n\nclass V10::RentalSerializer &lt; MyApi::RentalSerializerBase; end\n</code></pre>\n"}], "owner": {"reputation": 3728, "user_id": 2612713, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a7f606f9e135589780620d1160d941e?s=128&d=identicon&r=PG&f=1", "display_name": "neo", "link": "https://stackoverflow.com/users/2612713/neo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1657, "favorite_count": 0, "accepted_answer_id": 35184013, "answer_count": 2, "score": 0, "last_activity_date": 1454522894, "creation_date": 1454518759, "last_edit_date": 1454520154, "question_id": 35183168, "link": "https://stackoverflow.com/questions/35183168/super-to-merge-hash-from-parent-class", "title": "Super to merge hash from parent class", "body": "<p>I have the following private method in V6 of my API:</p>\n\n<pre><code>def format_rentals(rentals)\n  rentals.map do |rental|\n    {\n      start_time: rental.reservation_start_time.to_i,\n       end_time: rental.reservation_end_time.to_i\n     }\n end\n</code></pre>\n\n<p>On V10 of the API.</p>\n\n<p>V10 inherits from V9, V9 from V8, so on... </p>\n\n<p>I would like to a new attribute to the method. </p>\n\n<p>is there a way to not cut and paste the whole method onto V10 and then add the new attribute. </p>\n\n<p>What I don't want to do:</p>\n\n<pre><code>def format_rentals(rentals)\n  rentals.map do |rental|\n    {\n      start_time: rental.reservation_start_time.to_i,\n      end_time: rental.reservation_end_time.to_i,\n      status: rental.status ### Adding this on V10\n\n     }\n end\n</code></pre>\n\n<p>I would love to call super and merge to the hash, so far I've tried: </p>\n\n<pre><code>def format_rentals(rentals)\n  rentals.map do |rental|\n    super.merge(status: rental.status)\n   end\nend\n</code></pre>\n\n<p>I probably don't have the syntax correct... Thanks for the help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "mongoid", "mlab"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1454518505, "post_id": 35182943, "comment_id": 58083085, "body": "Thats not very much to work from - surely the stack trace has something more to go on."}], "answers": [{"comments": [{"owner": {"reputation": 485, "user_id": 3338909, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/CzOpH.jpg?s=128&g=1", "display_name": "Vikas Chandra", "link": "https://stackoverflow.com/users/3338909/vikas-chandra"}, "edited": false, "score": 0, "creation_date": 1454518851, "post_id": 35183121, "comment_id": 58083355, "body": "I have posted the logs output above but I am unable to understand the output"}, {"owner": {"reputation": 35, "user_id": 4468766, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000016151087/picture?type=large", "display_name": "\u0110\u1ea1i L&#227;o Gia", "link": "https://stackoverflow.com/users/4468766/%c4%90%e1%ba%a1i-l%c3%a3o-gia"}, "reply_to_user": {"reputation": 485, "user_id": 3338909, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/CzOpH.jpg?s=128&g=1", "display_name": "Vikas Chandra", "link": "https://stackoverflow.com/users/3338909/vikas-chandra"}, "edited": false, "score": 0, "creation_date": 1454519279, "post_id": 35183121, "comment_id": 58083667, "body": "this link may help you :   <a href=\"http://stackoverflow.com/questions/14892200/cant-heroku-run-rake-db-migrate-through-my-app\" title=\"cant heroku run rake db migrate through my app\">stackoverflow.com/questions/14892200/&hellip;</a>"}], "tags": [], "owner": {"reputation": 35, "user_id": 4468766, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000016151087/picture?type=large", "display_name": "\u0110\u1ea1i L&#227;o Gia", "link": "https://stackoverflow.com/users/4468766/%c4%90%e1%ba%a1i-l%c3%a3o-gia"}, "is_accepted": false, "score": 0, "last_activity_date": 1454518650, "creation_date": 1454518650, "answer_id": 35183121, "question_id": 35182943, "link": "https://stackoverflow.com/questions/35182943/heroku-with-ruby-on-rails-and-mongoid/35183121#35183121", "title": "Heroku with ruby on rails and Mongoid", "body": "<p>There are many reason cause app crash in heroku for example heroku server missing some require gem in your app.\nuse<br>\n$ heroku logs --tail<br>\nto view exactly what happen in heroku server.</p>\n"}], "owner": {"reputation": 485, "user_id": 3338909, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/CzOpH.jpg?s=128&g=1", "display_name": "Vikas Chandra", "link": "https://stackoverflow.com/users/3338909/vikas-chandra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454518708, "creation_date": 1454518146, "last_edit_date": 1454518708, "question_id": 35182943, "link": "https://stackoverflow.com/questions/35182943/heroku-with-ruby-on-rails-and-mongoid", "title": "Heroku with ruby on rails and Mongoid", "body": "<p>I am working on a project in ROR with Mongoid. The app is working fine when running rails offline server but when I deploy it on Heroku it is throwing me this error</p>\n\n<pre><code>2016-02-03T16:34:08.405268+00:00 heroku[web.1]: Process exited with status 1\n2016-02-03T16:34:08.394021+00:00 heroku[web.1]: State changed from starting to crashed\n2016-02-03T16:35:22.597553+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by vikkycorner@gmail.com\n2016-02-03T16:35:26.533751+00:00 heroku[run.9627]: Awaiting client\n2016-02-03T16:35:26.926674+00:00 heroku[run.9627]: State changed from starting to up\n2016-02-03T16:35:56.536107+00:00 heroku[run.9627]: Error R13 (Attach error) -&gt; Failed to attach to process\n2016-02-03T16:35:57.348246+00:00 heroku[run.9627]: State changed from up to complete\n2016-02-03T16:35:57.337946+00:00 heroku[run.9627]: Process exited with status 128\n2016-02-03T16:38:37.531037+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/user/all\" host=attendmare.herokuapp.com request_id=2d492460-a6cd-44f1-8c72-67b84e92e4e6 fwd=\"198.7.58.147\" dyno= connect= service= status=503 byte\n</code></pre>\n\n<p>I am not using ActiveRecords but using Mongoid so please suggest me any solution to this problem.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby", "curl", "net-http"], "answers": [{"tags": [], "owner": {"reputation": 691, "user_id": 1948319, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f91e39ee3ef6d5f506417c3c2461a00a?s=128&d=identicon&r=PG", "display_name": "Adracus", "link": "https://stackoverflow.com/users/1948319/adracus"}, "is_accepted": false, "score": 0, "last_activity_date": 1454519491, "creation_date": 1454519491, "answer_id": 35183435, "question_id": 35182415, "link": "https://stackoverflow.com/questions/35182415/net-http-put-with-body-causes-problems/35183435#35183435", "title": "net/http PUT with body causes problems", "body": "<p>Ok so I tried around for several hours but this behavior is rather strange:</p>\n\n<p>To resolve this I first used <code>Net::HTTP.start</code> instead of <code>Net::HTTP.new</code>. Second and even more important:\nI used to do basic authentication by setting the header value manually as you could see in </p>\n\n<pre><code>req['Authorization'] = \"Basic #{Base64.encode64('admin:admin')}\"\n</code></pre>\n\n<p>But <code>Net::HTTP::Put</code> already provides a <code>basic_auth</code> method. If this one is not used, strange errors as the ones that I got will occur.</p>\n\n<p>So the working version looks like this:</p>\n\n<pre><code>req = Net::HTTP::Put.new('/api/v11/cm/config')\nreq.body = '{\"items\":[{\"name\":\"TSQUERY_STREAMS_LIMIT\",\"value\":1000},{\"name\":\"parcel_proxy_server\",\"value\":\"proxy\"},{\"name\":\"parcel_proxy_port\",\"value\":\"8080\"},{\"name\":\"parcel_update_freq\",\"value\":\"1\"}]}'\nreq['Content-Type'] = 'application/json'\nreq.basic_auth 'admin', 'admin'\n\nresp = Net::HTTP.start(host, port) { |client| client.request(req) }\n</code></pre>\n"}], "owner": {"reputation": 691, "user_id": 1948319, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f91e39ee3ef6d5f506417c3c2461a00a?s=128&d=identicon&r=PG", "display_name": "Adracus", "link": "https://stackoverflow.com/users/1948319/adracus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454519491, "creation_date": 1454516811, "question_id": 35182415, "link": "https://stackoverflow.com/questions/35182415/net-http-put-with-body-causes-problems", "title": "net/http PUT with body causes problems", "body": "<p>I want to use the Cloudera API from ruby. Therefore I want to\nupdate the configuration of the cloudera manager, which is done\nwith an HTTP PUT request containing some json data.</p>\n\n<p>The URL is <code>http://localhost:7180/api/v11/cm/config</code>, my first approach was the following code:</p>\n\n<pre><code>require 'net/http'\nrequire 'base64'\n\nport = 7180\nhost = 'localhost'\n\nreq = Net::HTTP::Put.new('/api/v11/cm/config')\nreq.body = '{\"items\":[{\"name\":\"TSQUERY_STREAMS_LIMIT\",\"value\":1000},{\"name\":\"parcel_proxy_server\",\"value\":\"proxy\"},{\"name\":\"parcel_proxy_port\",\"value\":\"8080\"},{\"name\":\"parcel_update_freq\",\"value\":\"1\"}]}'\nreq['Content-Type'] = 'application/json'\nreq['Authorization'] = \"Basic #{Base64.encode64('admin:admin')}\"\n\nclient = Net::HTTP.new(host, port)\nresp = client.request(req)\n\nputs resp\nputs resp.to_hash\nputs resp.body\n</code></pre>\n\n<p>This variant returns a 400 Bad Request response with the message\n<code>\"message\" : \"No content to map due to end-of-input\\n at [Source: org.apache.cxf.transport.http.AbstractHTTPDestination$1@4561cbc9; line: 1, column: 1]\"</code></p>\n\n<p>If I want to trace this in wireshark with the setting <code>tcp.port == 7180</code>, this request does somehow not show up.</p>\n\n<p>Then I switched to using <code>Net::HTTP.start</code> with the following source code:</p>\n\n<pre><code>require 'net/http'\nrequire 'base64'\n\nport = 7180\nhost = 'localhost'\n\nreq = Net::HTTP::Put.new('/api/v11/cm/config')\nreq.body = '{\"items\":[{\"name\":\"TSQUERY_STREAMS_LIMIT\",\"value\":1000},{\"name\":\"parcel_proxy_server\",\"value\":\"proxy\"},{\"name\":\"parcel_proxy_port\",\"value\":\"8080\"},{\"name\":\"parcel_update_freq\",\"value\":\"1\"}]}'\nreq['Content-Type'] = 'application/json'\nreq['Authorization'] = \"Basic #{Base64.encode64('admin:admin')}\"\n\nresp = Net::HTTP.start(host, port) { |client| client.request(req) }\n\nputs resp\nputs resp.to_hash\nputs resp.body\n</code></pre>\n\n<p>This thing also returned a bad request, but without any body or else. In contrast to the first approach, this one showed up in wireshark but the body it posted was depicted as with Hypertext-Transfer-Protocol. If I do the same request with cURL, the request body is correctly shown as JavaScript Object Notation.</p>\n\n<p>Does anybody know what the problem of my requests is?</p>\n"}, {"tags": ["c#", "ruby-on-rails", "ruby", "enums"], "answers": [{"comments": [{"owner": {"reputation": 8415, "user_id": 505990, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QaLn2.jpg?s=128&g=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/505990/leonardo"}, "edited": false, "score": 0, "creation_date": 1454521850, "post_id": 35182662, "comment_id": 58085371, "body": "should i <code>require &#39;GlobalEnums.rb&#39;</code> or <code>require &#39;ContractType&#39;</code>? does it matter if its on a different folder?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 8415, "user_id": 505990, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QaLn2.jpg?s=128&g=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/505990/leonardo"}, "edited": false, "score": 1, "creation_date": 1454521939, "post_id": 35182662, "comment_id": 58085414, "body": "In Ruby the argument you pass to <code>require</code> should correspond to the name of the file, so (depending on the path to that file) it should be <code>require &#39;GlobalEnums.rb&#39;</code>."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 2, "last_activity_date": 1454518445, "last_edit_date": 1454518445, "creation_date": 1454517429, "answer_id": 35182662, "question_id": 35182343, "link": "https://stackoverflow.com/questions/35182343/ruby-file-for-enums/35182662#35182662", "title": "Ruby - File for Enums", "body": "<p>Good question. Simply <code>require</code> the <code>GlobalEnums.rb</code> module at the top of your file and then refer to the module and constant like this:</p>\n\n<pre><code>newGuy.currentContractType = ContractType::Internship\n</code></pre>\n\n<p>You'll note that in Ruby <code>::</code> is used to refer to a constant in a namespace (class or module), rather than <code>.</code>. If you have more than one level of nesting, you just chain the <code>::</code>s:</p>\n\n<pre><code>module Foo\n  module Bar\n    class Baz\n      Qux = \"quux\"\n    end\n  end\nend\n\np Foo::Bar::Baz::Qux\n# =&gt; \"quux\"\n</code></pre>\n\n<p>P.S. I suggest glancing through a Ruby style guide <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow\">such as this one</a>, in particular the <a href=\"https://github.com/bbatsov/ruby-style-guide#naming\" rel=\"nofollow\">Naming section</a>. With rare exceptions<sup>\u2020</sup>, method and variable names in Ruby are <code>snake_case</code>. Module and class names are <code>CamelCase</code> and other constants are usually <code>SCREAMING_CAMEL_CASE</code>.</p>\n\n<p>With that in mind, a seasoned Rubyist would probably write your code like this:</p>\n\n<pre><code>module MyApp\n  module ContractType\n    UNDEFINED = 0\n    INTERNSHIP = 1\n    CLT = 2\n    CONTRACTOR = 4\n  end\nend\n\n# Assuming this is somewhere inside the MyApp namespace...\nnew_guy.current_contract_type = ContractType::INTERNSHIP\n</code></pre>\n\n<p><sup>\u2020</sup>For example, strict conversion methods like <code>Integer(n)</code> and shortcut constructors like <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/uri/rdoc/Kernel.html#method-c-URI\" rel=\"nofollow\"><code>URI(str)</code></a> or <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri#XML-class_method\" rel=\"nofollow\"><code>Nokogiri::XML(str)</code></a>.</p>\n"}], "owner": {"reputation": 8415, "user_id": 505990, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QaLn2.jpg?s=128&g=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/505990/leonardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 35182662, "answer_count": 1, "score": 4, "last_activity_date": 1454518445, "creation_date": 1454516614, "question_id": 35182343, "link": "https://stackoverflow.com/questions/35182343/ruby-file-for-enums", "title": "Ruby - File for Enums", "body": "<p>In C# i'm used to create a file called \"Enums.cs\" and in there define all Enums my app will require... I think it's easier to do it. Now that taking on Ruby, I read and choose the <code>module</code> approach to defining enums because i can associate a int to a \"word\", like:</p>\n\n<pre><code>module ContractType\n  Undefined = 0\n  Internship = 1\n  CLT = 2\n  Contractor = 4\nend\n</code></pre>\n\n<p>Now how can I have my \"User\" model expose a property like <code>newGuy.CurrentContractType = ContractType.Internship</code>?!?</p>\n\n<p>Do I <code>import</code> the module? <code>extend</code>? Or should I reference the <code>GlobalEnums.rb</code> file where all the enums are? </p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454522657, "post_id": 35182160, "comment_id": 58085867, "body": "While not a duplicate, <a href=\"http://stackoverflow.com/q/3453262/128421\">stackoverflow.com/q/3453262/128421</a> is very close and will give you ideas."}], "answers": [{"comments": [{"owner": {"reputation": 200340, "user_id": 2680216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K877D.png?s=128&g=1", "display_name": "Josh Crozier", "link": "https://stackoverflow.com/users/2680216/josh-crozier"}, "edited": false, "score": 1, "creation_date": 1454516847, "post_id": 35182266, "comment_id": 58081821, "body": "Isn&#39;t <code>&quot;+</code> useless if <code>(.*)</code> is greedy? See: <a href=\"https://ideone.com/Ucu39f\" rel=\"nofollow noreferrer\">ideone.com/Ucu39f</a> I&#39;m pretty sure you want the lazy quantifier <a href=\"https://ideone.com/1typqr\" rel=\"nofollow noreferrer\"><code>&#47;\\A&quot;+(.*?)&quot;+\\Z&#47;</code></a>.."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454516851, "post_id": 35182266, "comment_id": 58081823, "body": "Upvoted, but I don&#39;t think you want the <code>s</code> modifier on the end. In Ruby the <code>s</code> modifier indicates that the encoding of the regular expression is Windows-31J (<a href=\"http://ruby-doc.org/core-2.1.1/Regexp.html#class-Regexp-label-Encoding\" rel=\"nofollow noreferrer\">docs</a>)."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 200340, "user_id": 2680216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K877D.png?s=128&g=1", "display_name": "Josh Crozier", "link": "https://stackoverflow.com/users/2680216/josh-crozier"}, "edited": false, "score": 0, "creation_date": 1454517079, "post_id": 35182266, "comment_id": 58081996, "body": "@JoshCrozier: Yes, you are right as rain. I am in a rush and forgot that."}, {"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 0, "creation_date": 1454517145, "post_id": 35182266, "comment_id": 58082035, "body": "What would it look like, if I only want to remove one &quot; at the beginning and end?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 0, "creation_date": 1454517228, "post_id": 35182266, "comment_id": 58082108, "body": "@23tux: Just remove the <code>+</code>s. Also, you may want to check for the very end of the string and use <code>\\z</code> instead of a <code>\\Z</code>. Use <code>.gsub(&#47;\\A&quot;(.*)&quot;\\Z&#47;m, &#39;\\1&#39;)</code> or <code>.gsub(&#47;\\A&quot;(.*)&quot;\\z&#47;m, &#39;\\1&#39;)</code> (updated the answer)."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1454517313, "last_edit_date": 1454517313, "creation_date": 1454516453, "answer_id": 35182266, "question_id": 35182160, "link": "https://stackoverflow.com/questions/35182160/remove-leading-and-trailing-quotes-from-string-if-both-are-present/35182266#35182266", "title": "Remove leading and trailing quotes from string if both are present", "body": "<p>You can use</p>\n\n<pre><code>str.gsub(/\\A\"+(.*?)\"+\\Z/m, '\\1')\n</code></pre>\n\n<p>The pattern will match a string starting with one or more <code>\"</code>, then it can have any characters, any amount of them and then one or more double quotes at the end of the string. The whole string without the leading and trailing quotes will be inserted into the replacement result with the <code>\\1</code> backreference.</p>\n\n<p>See <a href=\"https://ideone.com/jKDyBl\" rel=\"nofollow\">IDEONE demo</a></p>\n\n<p>To only trim out the first and last double qoute, you may use</p>\n\n<pre><code>str.gsub(/\\A\"(.*)\"\\Z/m, '\\1')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454520438, "post_id": 35183063, "comment_id": 58084445, "body": "I prefer the <code>gsub</code> solution, but upvoted since you&#39;re right that this is faster: <a href=\"https://gist.github.com/jrunning/a5f814c9a880960d0139\" rel=\"nofollow noreferrer\">gist.github.com/jrunning/a5f814c9a880960d0139</a>"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1454518496, "creation_date": 1454518496, "answer_id": 35183063, "question_id": 35182160, "link": "https://stackoverflow.com/questions/35182160/remove-leading-and-trailing-quotes-from-string-if-both-are-present/35183063#35183063", "title": "Remove leading and trailing quotes from string if both are present", "body": "<p>I think this would be more efficient than using a regex.</p>\n\n<pre><code>'\"hello world'\n.dup.tap{|s| s[0] = s[-1] = \"\" if s[0] == '\"' and s[-1] == '\"'}\n# =&gt; \"\\\"hello world\"\n'\"hello world\"'\n.dup.tap{|s| s[0] = s[-1] = \"\" if s[0] == '\"' and s[-1] == '\"'}\n# =&gt; \"hello world\"\n'hello world\"'\n.dup.tap{|s| s[0] = s[-1] = \"\" if s[0] == '\"' and s[-1] == '\"'}\n# =&gt; \"hello world\\\"\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1454523087, "last_edit_date": 1454523087, "creation_date": 1454522155, "answer_id": 35184245, "question_id": 35182160, "link": "https://stackoverflow.com/questions/35182160/remove-leading-and-trailing-quotes-from-string-if-both-are-present/35184245#35184245", "title": "Remove leading and trailing quotes from string if both are present", "body": "<p>I wouldn't bother using a regex:</p>\n\n<pre><code>def strip_end_quotes(str)\n  str[0] == '\"' &amp;&amp; str[-1] == '\"' \\\n    ? str[1..-2] \\\n    : str\nend\n\nstrip_end_quotes '\"both\"' # =&gt; \"both\"\nstrip_end_quotes '\"left' # =&gt; \"\\\"left\"\nstrip_end_quotes 'right\"' # =&gt; \"right\\\"\"\n</code></pre>\n\n<p>Doing this in a single regex results in a pattern that isn't overly clear and clarity and readability is very important when coding. Being merciful to those who have to maintain the code in the future is good.</p>\n"}, {"tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 1, "last_activity_date": 1454535719, "creation_date": 1454535719, "answer_id": 35188304, "question_id": 35182160, "link": "https://stackoverflow.com/questions/35182160/remove-leading-and-trailing-quotes-from-string-if-both-are-present/35188304#35188304", "title": "Remove leading and trailing quotes from string if both are present", "body": "<p>Nice thing with ruby is that you can write code that reads like English in many cases. The good thing about it is that it is easy to understand.</p>\n\n<pre><code>x = '\"hello world\"'\nquote = '\"'\n\nif x.start_with?(quote) &amp;&amp; x.end_with?(quote)\n  x = x[1...-1] \nend\n\nputs x #=&gt; hello world \n</code></pre>\n"}], "owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2188, "favorite_count": 0, "accepted_answer_id": 35182266, "answer_count": 4, "score": 3, "last_activity_date": 1454535719, "creation_date": 1454516159, "last_edit_date": 1454522667, "question_id": 35182160, "link": "https://stackoverflow.com/questions/35182160/remove-leading-and-trailing-quotes-from-string-if-both-are-present", "title": "Remove leading and trailing quotes from string if both are present", "body": "<p>How do I remove leading and trailing quotes from a string <strong>only if both are present?</strong> For example</p>\n\n<pre><code>\"hello world\" =&gt; hello world\n\"hello world =&gt; \"hello world\nhello world\" =&gt; hello world\"\n</code></pre>\n\n<p>I tried it with <code>gsub</code>, but the following removes every leading or trailing quotes, regardless if the other is present</p>\n\n<pre><code>'\"hello world\"'.gsub(/\\A\"|\"\\Z/, '')\n# =&gt; this is ok it returns 'hello world'\n\n'hello world\"'.gsub(/\\A\"|\"\\Z/, '')\n# =&gt; returns 'hello world' but should return 'hello world\"'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "routes"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3001748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f83104de2645af250d8295b66d45fa?s=128&d=identicon&r=PG&f=1", "display_name": "Evelynn48652", "link": "https://stackoverflow.com/users/3001748/evelynn48652"}, "edited": false, "score": 0, "creation_date": 1454516786, "post_id": 35182098, "comment_id": 58081771, "body": "Thanks for your answer. I tried both of your solutions and get the same answer from rails that i have to give the correct route. On my page i see the link, everything works but if i click the &quot;Help&quot; link i get the message of rails."}, {"owner": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "reply_to_user": {"reputation": 21, "user_id": 3001748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f83104de2645af250d8295b66d45fa?s=128&d=identicon&r=PG&f=1", "display_name": "Evelynn48652", "link": "https://stackoverflow.com/users/3001748/evelynn48652"}, "edited": false, "score": 0, "creation_date": 1454517958, "post_id": 35182098, "comment_id": 58082659, "body": "edited - apparently you have to use the subdirectory as well.  the url would be <code>data&#47;help.pdf</code> in the methods"}, {"owner": {"reputation": 21, "user_id": 3001748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f83104de2645af250d8295b66d45fa?s=128&d=identicon&r=PG&f=1", "display_name": "Evelynn48652", "link": "https://stackoverflow.com/users/3001748/evelynn48652"}, "edited": false, "score": 0, "creation_date": 1454518180, "post_id": 35182098, "comment_id": 58082824, "body": "Message of ur edites links: No route matches [GET] &quot;/data/help.pdf&quot;. So i have to add something in my routes.rb."}], "tags": [], "owner": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "is_accepted": false, "score": 0, "last_activity_date": 1454517942, "last_edit_date": 1454517942, "creation_date": 1454516032, "answer_id": 35182098, "question_id": 35181936, "link": "https://stackoverflow.com/questions/35181936/need-help-for-linking-a-pdf-on-page-created-with-rails/35182098#35182098", "title": "Need help for linking a PDF on page created with rails", "body": "<p>In my experience with Rails, I've never seen a PDF link tag helper.</p>\n\n<p>What you want, is to use <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-asset_path\" rel=\"nofollow\"><code>asset_path</code></a> in combination with <code>link_to</code></p>\n\n<pre><code>&lt;%= link_to 'Help', asset_path('data/help.pdf') %&gt;\n#=&gt; &lt;a href=\"/assets/data/help/pdf\"&gt;Help&lt;/a&gt;\n</code></pre>\n\n<p>If it needs to be absolute, you could always use <code>asset_url</code></p>\n\n<pre><code>&lt;%= link_to 'Help', asset_url('data/help.pdf') %&gt;\n#=&gt; &lt;a href=\"http://theurl.com/assets/data/help/pdf\"&gt;Help&lt;/a&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 3001748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f83104de2645af250d8295b66d45fa?s=128&d=identicon&r=PG&f=1", "display_name": "Evelynn48652", "link": "https://stackoverflow.com/users/3001748/evelynn48652"}, "edited": false, "score": 0, "creation_date": 1454535314, "post_id": 35188148, "comment_id": 58093527, "body": "And then rails gives the information that i need a correct path in my routes.rb. Or does your solution work without any routing?!"}, {"owner": {"reputation": 21, "user_id": 3001748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f83104de2645af250d8295b66d45fa?s=128&d=identicon&r=PG&f=1", "display_name": "Evelynn48652", "link": "https://stackoverflow.com/users/3001748/evelynn48652"}, "edited": false, "score": 0, "creation_date": 1454536225, "post_id": 35188148, "comment_id": 58094023, "body": "&lt;%= link_to &#39;Help&#39;, root_path &lt;&lt; &#39;help.pdf&#39; %&gt; - right?"}, {"owner": {"reputation": 21, "user_id": 3001748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f83104de2645af250d8295b66d45fa?s=128&d=identicon&r=PG&f=1", "display_name": "Evelynn48652", "link": "https://stackoverflow.com/users/3001748/evelynn48652"}, "edited": false, "score": 0, "creation_date": 1454540070, "post_id": 35188148, "comment_id": 58095849, "body": "Get this message: No route matches [GET] &quot;/help.pdf&quot; Strange."}, {"owner": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "reply_to_user": {"reputation": 21, "user_id": 3001748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f83104de2645af250d8295b66d45fa?s=128&d=identicon&r=PG&f=1", "display_name": "Evelynn48652", "link": "https://stackoverflow.com/users/3001748/evelynn48652"}, "edited": false, "score": 0, "creation_date": 1454540203, "post_id": 35188148, "comment_id": 58095905, "body": "What does tour route file look like? Do you have a root entry in there?"}, {"owner": {"reputation": 21, "user_id": 3001748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f83104de2645af250d8295b66d45fa?s=128&d=identicon&r=PG&f=1", "display_name": "Evelynn48652", "link": "https://stackoverflow.com/users/3001748/evelynn48652"}, "edited": false, "score": 0, "creation_date": 1454541214, "post_id": 35188148, "comment_id": 58096322, "body": "Nothing special. Nothing pdf related."}], "tags": [], "owner": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "is_accepted": false, "score": 0, "last_activity_date": 1454535159, "creation_date": 1454535159, "answer_id": 35188148, "question_id": 35181936, "link": "https://stackoverflow.com/questions/35181936/need-help-for-linking-a-pdf-on-page-created-with-rails/35188148#35188148", "title": "Need help for linking a PDF on page created with rails", "body": "<p>What I usually do for linking a document that can be public is I put the document in the public folder in rails and then use this for the path:</p>\n\n<p><code>link_to 'Help', root_path &lt;&lt; 'TheTitleOfYourPDF.pdf'</code></p>\n"}], "owner": {"reputation": 21, "user_id": 3001748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f83104de2645af250d8295b66d45fa?s=128&d=identicon&r=PG&f=1", "display_name": "Evelynn48652", "link": "https://stackoverflow.com/users/3001748/evelynn48652"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1454879195, "creation_date": 1454515622, "last_edit_date": 1454879195, "question_id": 35181936, "link": "https://stackoverflow.com/questions/35181936/need-help-for-linking-a-pdf-on-page-created-with-rails", "title": "Need help for linking a PDF on page created with rails", "body": "<p>I ask myself the question does an pdf tag exist in rails 4 which can show\nan pdf file very simple?</p>\n\n<p>This solution answers me that i need to give the correct route informations:</p>\n\n<pre><code>&lt;%= link_to 'Help', public_path%&gt; \n</code></pre>\n\n<p>I already have an pdf file in my project directory <strong>app/assets/public/help.pdf</strong>\nand now i wanna have a link with the simple name \"Help\" to have on my page.</p>\n\n<p>Third edit:</p>\n\n<p>After a nice first answer nothing changes and i get the same error message from rails. What i have to write in the <strong>routes.rb</strong> if i wanna use a link for my pdf file. Does anyone know how can i link an PDF from my own directory!?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 0, "creation_date": 1454524591, "post_id": 35182532, "comment_id": 58086996, "body": "Interesting. That makes sense. So how could I find that method on ENV? I tried ENV.singleton_methods and ENV.singleton_class.methods but neither returned :alias_method."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 0, "creation_date": 1454526082, "post_id": 35182532, "comment_id": 58087872, "body": "Try ENV.class.instance_methods"}, {"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 0, "creation_date": 1454526249, "post_id": 35182532, "comment_id": 58087974, "body": "Same as singleton class. <code>ENV.class.methods.sort == ENV.singleton_class.methods.sort #=&gt; true</code>"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 3, "last_activity_date": 1454520970, "last_edit_date": 1454520970, "creation_date": 1454517100, "answer_id": 35182532, "question_id": 35181769, "link": "https://stackoverflow.com/questions/35181769/ruby-unexpected-behavior-of-alias-method-when-accessing-an-object/35182532#35182532", "title": "Ruby: Unexpected behavior of alias_method when accessing an object", "body": "<p><a href=\"http://ruby-doc.org/core-2.2.2/Module.html#method-i-alias_method\" rel=\"nofollow\"><code>alias_method</code></a> is part of <code>Module</code> class.  Inside the block to <code>instance_eval</code>, <code>self</code> is <code>ENV</code> object, and does not have access to <code>Module</code> methods.</p>\n\n<pre><code>ENV.instance_eval do\n  p self.class\nend\n#=&gt; Object\n</code></pre>\n\n<hr>\n\n<p>Typically, you can alias a method in <code>instance_eval</code> using below technique:</p>\n\n<pre><code>class Foo\n    def bar\n    end\nend\n\np Foo.instance_methods(false)\n#=&gt; [:bar] \n\nFoo.new.instance_eval do \n    self.class.send :alias_method, :bar_orig, :bar  \nend\n\np Foo.instance_methods(false)\n#=&gt; [:bar, :bar_orig]\n</code></pre>\n\n<p>In above case <code>send</code> has to be used as <code>alias_method</code> is private method and not accessible outside the class/module definition.</p>\n\n<hr>\n\n<p>However, <code>ENV</code> is not instance of any special-purpose class (such as <code>Foo</code>) - instead, it is an instance of <code>Object</code> class with lot of singleton methods added to it.  Hence, above technique will not work, instead you have to do add aliases using <code>singleton</code> class of <code>ENV</code> object.</p>\n\n<p>Here is how it can be done:</p>\n\n<pre><code>ENV.instance_eval do\n\n  singleton_class.send :alias_method, :original_brackets, :[] rescue p \"oops\"\n\n  def [](name)\n  end\n\nend\n</code></pre>\n\n<p>Or alternatively:</p>\n\n<pre><code>ENV.instance_eval do\n  class &lt;&lt; self\n    alias_method :original_brackets, :[] \n  end\n\n  def [](name)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 35182532, "answer_count": 1, "score": 1, "last_activity_date": 1454520970, "creation_date": 1454515179, "last_edit_date": 1454515936, "question_id": 35181769, "link": "https://stackoverflow.com/questions/35181769/ruby-unexpected-behavior-of-alias-method-when-accessing-an-object", "title": "Ruby: Unexpected behavior of alias_method when accessing an object", "body": "<p>In Ruby you can redefine methods several ways. One is to open up the eigenclass, or singleton class, and another is to use <code>instance_eval</code>. However, <code>alias_method</code> is only available on the eigenclass. Why is that, or is there a way to use it with <code>instance_eval</code> ?</p>\n\n<pre><code>class &lt;&lt; ENV\n  # works\n  alias_method :original_brackets, :[]\n\n  # works\n  def [](name)\n    # ...\n  end\nend\n\nENV.instance_eval do\n  # raises NoMethodError\n  alias_method :original_brackets, :[]\n\n  # works\n  def [](name)\n    # ...\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "syntax", "syntax-error"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454523850, "post_id": 35181568, "comment_id": 58086568, "body": "This is a duplicate of <a href=\"http://stackoverflow.com/q/3660563/128421\">stackoverflow.com/q/3660563/128421</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 3196352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a3c6564045f275a359276d8db2fbd3?s=128&d=identicon&r=PG&f=1", "display_name": "cfrank12", "link": "https://stackoverflow.com/users/3196352/cfrank12"}, "edited": false, "score": 0, "creation_date": 1454514780, "post_id": 35181589, "comment_id": 58080214, "body": "Ohhhh geez. Stuck in java haha that did the trick. Thank you so much!"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 5, "last_activity_date": 1454523687, "last_edit_date": 1454523687, "creation_date": 1454514706, "answer_id": 35181589, "question_id": 35181568, "link": "https://stackoverflow.com/questions/35181568/syntax-error-unexpected-keyword-end-end/35181589#35181589", "title": "syntax error, unexpected keyword_end end", "body": "<p>The <code>++</code> operator doesn't exist in Ruby. You should go for <code>+= 1</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1454518740, "post_id": 35182159, "comment_id": 58083268, "body": "This is the real answer."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1454516153, "creation_date": 1454516153, "answer_id": 35182159, "question_id": 35181568, "link": "https://stackoverflow.com/questions/35181568/syntax-error-unexpected-keyword-end-end/35182159#35182159", "title": "syntax error, unexpected keyword_end end", "body": "<p>You have very strange formatting. If you had formatted your code properly by following one of the many Ruby styleguides (or simply hitting <kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>F</kbd> or whatever the combination is in your editor of choice), you would have immediately seen the problem. According to most style guides, there should be a space to both sides of a binary infix operator and no space after a unary prefix operator. I.e. you should write <code>foo - bar</code> and <code>!baz</code>. You have <em>no space</em> around your infix operators and a <em>newline</em> in between the unary prefix operator and its operand.</p>\n\n<p>This is what it looks like correctly formatted:</p>\n\n<pre><code>a + +b + +c + +d + + # plus what?\n</code></pre>\n\n<p>Do you see the problem? You are missing the operand to the last unary prefix <code>+</code> operator.</p>\n"}], "owner": {"reputation": 31, "user_id": 3196352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a3c6564045f275a359276d8db2fbd3?s=128&d=identicon&r=PG&f=1", "display_name": "cfrank12", "link": "https://stackoverflow.com/users/3196352/cfrank12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "closed_date": 1454531587, "answer_count": 2, "score": 0, "last_activity_date": 1454524177, "creation_date": 1454514636, "last_edit_date": 1454524177, "question_id": 35181568, "link": "https://stackoverflow.com/questions/35181568/syntax-error-unexpected-keyword-end-end", "closed_reason": "Not suitable for this site", "title": "syntax error, unexpected keyword_end end", "body": "<p>I'm getting into Ruby and I've searched and searched and looked at syntax, yet I can't figure out what's going wrong.</p>\n\n<p>The program is supposed to solve <a href=\"https://projecteuler.net/problem=11\" rel=\"nofollow\">a ProjectEuler problem</a>.</p>\n\n<p>I'm encountering four of this syntax error: </p>\n\n<pre><code>unexpected keyword_end end\n</code></pre>\n\n<p>This is my code: </p>\n\n<pre><code>grid = #20x20 \"grid\"/array of numbers\n\nlargest = 0\n\nlateral(0,1,2,3)\nvertical(0,20,40,60)\ndiagonal_right(0,21,42,63)\ndiagonal_left(3,22,41,60)\n\nputs largest \n\n#lateral\ndef lateral(a, b, c, d) \n    while (d &lt; grid.size)\n        temp = grid[a] * grid[b] * grid[c] * grid[d] \n\n        if (temp &gt; largest)\n            largest = temp\n        end\n\n        if ((d % 19) == 0)\n            a += 4\n            b += 4 \n            c += 4\n            d += 4\n        else \n            a++\n            b++\n            c++\n            d++\n        end  # &lt;===== getting syntax error here\n    end\nend\n\ndef vertical(a, b, c, d)\n\n    while (d &lt; grid.size)\n        temp = grid[a] * grid[b] * grid[c] * grid[d] \n\n        if (temp &gt; largest)\n            largest = temp\n        end\n\n        a++\n        b++\n        c++\n        d++\n    end    # &lt;===== getting syntax error here\nend\n\ndef diagonal_right(a, b, c, d) \n\n    while (d &lt; grid.size)\n        temp = grid[a] * grid[b] * grid[c] * grid[d] \n\n        if (temp &gt; largest)\n            largest = temp\n        end\n\n        if ((d % 19) == 0)\n            a += 4\n            b += 4 \n            c += 4\n            d += 4\n        else \n            a++\n            b++\n            c++\n            d++\n        end    # &lt;===== getting syntax error here\n    end\nend\n\ndef diagonal_left(a, b, c, d) \n\n    while (d &lt; (grid.size - 4))\n        temp = grid[a] * grid[b] * grid[c] * grid[d] \n\n        if (temp &gt; largest)\n            largest = temp\n        end\n\n        if ((a % 19) == 0)\n            a += 4\n            b += 4 \n            c += 4\n            d += 4\n        else \n            a++\n            b++\n            c++\n            d++\n        end      # &lt;===== getting syntax error here\n    end\nend\n</code></pre>\n\n<p>I marked the four spots where I'm getting the syntax errors.</p>\n\n<p>I've adjusted parentheses, played with and double-checked the <code>end</code>s positions and amount. I do not understand what's wrong with it. Could it be an interpreter problem? I'm using a MacBook Pro.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 5, "last_activity_date": 1454523659, "last_edit_date": 1454523659, "creation_date": 1454516615, "answer_id": 35182345, "question_id": 35180660, "link": "https://stackoverflow.com/questions/35180660/how-to-test-a-multi-select-select-box-with-capybara-in-a-rails-app/35182345#35182345", "title": "How to test a multi-select select box with Capybara in a rails app?", "body": "<p><code>with_options</code> is an option that can be passed to have_select (not a method that is called on have_select) to check that specific option elements are children of the select (others may also exist)</p>\n\n<p>To test whether a select is multiple you can do</p>\n\n<pre><code>expect(page.find(:select, 'program')[:multiple]).to be_truthy\n</code></pre>\n\n<p>And obviously be_falsey for the opposite</p>\n\n<p>If you're running Capybara 2.6.x you could do</p>\n\n<pre><code>Capybara.modify_selector(:select) do\n  filter(:multiple, boolean: true) { |node, value| !(value ^ node[:multiple]) }\nend\n</code></pre>\n\n<p>which would then let you do</p>\n\n<pre><code>expect(page).to have_select('program', multiple: true)\n</code></pre>\n\n<p>The :multiple filter will probably be included in Capybara 2.7 when it's released</p>\n"}], "owner": {"reputation": 733, "user_id": 2441263, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/TOE8s.jpg?s=128&g=1", "display_name": "lucas", "link": "https://stackoverflow.com/users/2441263/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 1, "accepted_answer_id": 35182345, "answer_count": 1, "score": 3, "last_activity_date": 1454523659, "creation_date": 1454512159, "question_id": 35180660, "link": "https://stackoverflow.com/questions/35180660/how-to-test-a-multi-select-select-box-with-capybara-in-a-rails-app", "title": "How to test a multi-select select box with Capybara in a rails app?", "body": "<p>A coworker and I have been struggling to figure out how to test a rails form with a select element, which we sometimes want to be a standard select dropdown and sometimes want to be a multi-select box.</p>\n\n<p>What can we add to our RSpec feature spec to test this? Here's the code we're trying to test:</p>\n\n<pre><code>    &lt;% if @use_multi_select %&gt;\n      &lt;%= select_tag :program, options_for_select(@programs), { multiple: true } %&gt;\n    &lt;% else %&gt;\n      &lt;%= select_tag :program, options_for_select(@programs) %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>And here's what I'm thinking for the test:</p>\n\n<pre><code>    context 'when @use_multi-select == true' do\n      it 'displays a multi-select select box' do\n        expect(page).to have_select('program').with_options(multiple: true)\n      end\n    end\n\n    context 'when @use_multi-select == false' do\n      it 'displays a standard select box' do\n        expect(page).to have_select('program').with_options(multiple: false)\n      end\n    end\n</code></pre>\n\n<p>But that whole with_options thing doesn't work that way. Has anyone done this before and found a workable solution or work-around?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "user-interface", "design-patterns", "privileges"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1454512062, "creation_date": 1454512062, "answer_id": 35180627, "question_id": 35180390, "link": "https://stackoverflow.com/questions/35180390/creating-multiple-dashboards-for-a-half-dozen-user-types-in-rails/35180627#35180627", "title": "Creating multiple dashboards for a half dozen user types in Rails", "body": "<p>I think <a href=\"https://github.com/elabs/pundit\" rel=\"nofollow\">Pundit</a> will be the perfect fit for you if DRY and OO are the concerns :). It is really super object-oriented and clean approach.</p>\n\n<p>Essentially, you'll move all the (often complicated) authorization logic to policies, and you're views will look like this (from docs):</p>\n\n<pre><code>&lt;% if policy(@post).update? %&gt;\n  &lt;%= link_to \"Edit post\", edit_post_path(@post) %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 4981, "user_id": 705725, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3oNDr.jpg?s=128&g=1", "display_name": "dsp_099", "link": "https://stackoverflow.com/users/705725/dsp-099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 35180627, "answer_count": 1, "score": 0, "last_activity_date": 1454512062, "creation_date": 1454511476, "question_id": 35180390, "link": "https://stackoverflow.com/questions/35180390/creating-multiple-dashboards-for-a-half-dozen-user-types-in-rails", "title": "Creating multiple dashboards for a half dozen user types in Rails", "body": "<p>I'm working on a project that involves seven different kinds of users. These users each have a very similar-looking dashboard. </p>\n\n<p>They're almost exactly the same for each user, but do differ slightly: </p>\n\n<ul>\n<li>Higher-tier users have certain buttons visible</li>\n<li>The table layout includes extra columns</li>\n<li>Some actions related to table entries are restricted to normal users</li>\n</ul>\n\n<p>I'd love to make the code more DRY but how do I approach this problem if partials will complicate the layout rather than simplify it, in this case?</p>\n\n<p>My initial idea was to display ALL the elements, but hide/restrict them with <code>if</code> statements, making for <strong>one</strong>, but very logic-heavy view.</p>\n\n<p>More broadly speaking, if the UI changes significantly based on the privilege level of the user viewing it, what's the accepted Rails pattern for keeping things organized?</p>\n"}, {"tags": ["arrays", "ruby", "vector"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1454510363, "post_id": 35179653, "comment_id": 58076889, "body": "What is <code>t</code>, <code>m</code> and <code>v</code>? What&#39;s your expected result? Your example code doesn&#39;t actually modify the array, it returns a new array."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1454514311, "post_id": 35179653, "comment_id": 58079844, "body": "In <code>(m&#47;v+2)&#47;p1</code> you are dividing something by an array. Hmmm."}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1454514481, "post_id": 35179653, "comment_id": 58079957, "body": "@CarySwoveland: no, I mean divide the value for each value inside the array. As the multiplication..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1454515069, "post_id": 35179653, "comment_id": 58080416, "body": "Then you should write it <code>(1&#47;(m&#47;v+2))*p1</code>, noting that <code>m</code> and <code>v</code> are given numbers and <code>p1</code> is the array of that name treated as a vector."}], "answers": [{"tags": [], "owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "is_accepted": true, "score": 2, "last_activity_date": 1454510599, "last_edit_date": 1454510599, "creation_date": 1454509624, "answer_id": 35179715, "question_id": 35179653, "link": "https://stackoverflow.com/questions/35179653/how-would-you-modify-elements-of-an-array-as-a-vector/35179715#35179715", "title": "How would you modify elements of an array as a vector?", "body": "<p>How about <code>.map</code>?</p>\n\n<pre><code>pT = [p0, p1].map { |p| (t + 2) * p }\n</code></pre>\n\n<p>If you needed to apply a bunch of composed functions for each value, you could do something like:</p>\n\n<pre><code>funcs = [\n  proc { |p| (t + 2) * p }, # f\n  proc { |p| (m / v + 2) / p } # g\n]\n\n# applies g(f(p)) for each p\npT = [p0, p1].map { |p| funcs.inject(p) { |p, f| p = f[p] } }\n</code></pre>\n\n<p>Taking this a step further, if you needed a different function for each value:</p>\n\n<pre><code>funcs = [\n  proc { |p| (t + 2) * p },\n  proc { |p| (m / v + 2) / p },\n  proc { |p| p }\n]\n\npT = [p0, p1].zip(funcs).map { |p, f| f[p] }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2602, "user_id": 1563325, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/61fc59dcb58364ad1be48abcbf4c5244?s=128&d=identicon&r=PG", "display_name": "muichkine", "link": "https://stackoverflow.com/users/1563325/muichkine"}, "is_accepted": false, "score": 2, "last_activity_date": 1454509632, "creation_date": 1454509632, "answer_id": 35179720, "question_id": 35179653, "link": "https://stackoverflow.com/questions/35179653/how-would-you-modify-elements-of-an-array-as-a-vector/35179720#35179720", "title": "How would you modify elements of an array as a vector?", "body": "<p>what about</p>\n\n<pre><code>t = 1 # Or whatever value\npT = p0.map do |p|\n  (t+2) * p\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1454510801, "last_edit_date": 1454510801, "creation_date": 1454510401, "answer_id": 35179977, "question_id": 35179653, "link": "https://stackoverflow.com/questions/35179653/how-would-you-modify-elements-of-an-array-as-a-vector/35179977#35179977", "title": "How would you modify elements of an array as a vector?", "body": "<p>You can do something like below:</p>\n\n<pre><code>pT = (t + 2) * p0.first, (t + 2) * p0.last\n</code></pre>\n\n<p>You don't need square brackets around the right-hand-side expression, <code>pT</code> will be an array of two elements.</p>\n\n<hr>\n\n<p>If you want it to resemble more like a cartesian point, then, you can alias <code>Array#first</code> and <code>Array#last</code> to <code>Array#x</code> and <code>Array#y</code> respectively as shown below</p>\n\n<pre><code>class Array\n    alias :x :first\n    alias :y :last\nend\n</code></pre>\n\n<hr>\n\n<p>Then, you can use:</p>\n\n<pre><code>pT = (t + 2) * p0.x, (t + 2) * p0.y\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1454513435, "post_id": 35179986, "comment_id": 58079181, "body": "I continue to be surprised at how little <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/matrix/rdoc/Matrix.html\" rel=\"nofollow noreferrer\">Matrix</a> is used. I expect you thought of it as soon as you read &quot;vector&quot; in the title."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1454513505, "post_id": 35179986, "comment_id": 58079227, "body": "There wasn&#39;t vector in the title originally. I added it by edit. The original question was grammatically terrible."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1454513905, "post_id": 35179986, "comment_id": 58079520, "body": "...and <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/matrix/rdoc/Vector.html\" rel=\"nofollow noreferrer\">Vector</a>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1454514281, "post_id": 35179986, "comment_id": 58079819, "body": "Right. I realized that later. They use the same library."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1454510416, "creation_date": 1454510416, "answer_id": 35179986, "question_id": 35179653, "link": "https://stackoverflow.com/questions/35179653/how-would-you-modify-elements-of-an-array-as-a-vector/35179986#35179986", "title": "How would you modify elements of an array as a vector?", "body": "<p>Use <code>\"matrix\"</code> from the standard library.</p>\n\n<pre><code>require \"matrix\"\np1 = Matrix.row_vector([20, 20]) # =&gt; Matrix[[20, 20]]\n3 * p1 # =&gt; Matrix[[60, 60]]\n</code></pre>\n"}], "owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 35179715, "answer_count": 4, "score": -2, "last_activity_date": 1454510801, "creation_date": 1454509416, "last_edit_date": 1454510193, "question_id": 35179653, "link": "https://stackoverflow.com/questions/35179653/how-would-you-modify-elements-of-an-array-as-a-vector", "title": "How would you modify elements of an array as a vector?", "body": "<p>I have some cartesian points (i.e. array of two values):</p>\n\n<pre><code>p0 = [0, 0]\np1 = [20, 20]\n</code></pre>\n\n<p>I need to do some math over it such as <code>(t+2)*p0</code> or <code>(m/v+2)/p1</code>. I need to modify each element of the array. How would you do this efficiently? My code is something like this:</p>\n\n<pre><code>pT = [(t + 2) * p0[0], (t + 2) * p0[1]]\n</code></pre>\n\n<p>but it looks terrible to read. Is there a better way that is more in line with the math form?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1454509717, "creation_date": 1454509717, "answer_id": 35179751, "question_id": 35179552, "link": "https://stackoverflow.com/questions/35179552/rails-link-to-edit-another-model-within-user-profiles/35179751#35179751", "title": "Rails - link to edit another model within User profiles", "body": "<p><code>edit_vehicle_path</code> needs to know the <code>vehicle</code> to build a proper link. Change it to:</p>\n\n<pre><code>&lt;%= link_to '&lt;i class=\"fa fa-cog\"&gt;&lt;/i&gt; edit'.html_safe, edit_vehicle_path(vehicle) %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "edited": false, "score": 0, "creation_date": 1454510798, "post_id": 35180086, "comment_id": 58077214, "body": "very interesting, I&#39;ll definitively give it a try"}], "tags": [], "owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "is_accepted": false, "score": 2, "last_activity_date": 1454513681, "last_edit_date": 1454513681, "creation_date": 1454510693, "answer_id": 35180086, "question_id": 35179552, "link": "https://stackoverflow.com/questions/35179552/rails-link-to-edit-another-model-within-user-profiles/35180086#35180086", "title": "Rails - link to edit another model within User profiles", "body": "<p>From my point of view it would be better to work with <a href=\"http://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow\">nested Routes</a>.</p>\n\n<pre><code>resources :users, only: [:show, :index] do\n  resources :vehicles, only: [:create, :edit, :update, :destroy]\nend\n</code></pre>\n\n<p>Be awary, this will change your routing helpers and paths as well, but it's more clear, that you edit a users car.</p>\n\n<pre><code>edit_user_vehicle_path(@user, @vehicle) \n# =&gt; /users/1/vehicles/2/edit\n</code></pre>\n"}], "owner": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 35179751, "answer_count": 2, "score": 1, "last_activity_date": 1454513681, "creation_date": 1454509172, "question_id": 35179552, "link": "https://stackoverflow.com/questions/35179552/rails-link-to-edit-another-model-within-user-profiles", "title": "Rails - link to edit another model within User profiles", "body": "<p>I've a rails app where Users can list and edit information about the Vehicles they own. A User has_many Vehicles, and a Vehicle belong_to a User.</p>\n\n<p>In the user profile there's a form to create new vehicles.</p>\n\n<p>I'm able to display the list of owned vehicles in the user profile, with a delete link, but when I add a link to the edit action using <code>edit_vehicle_path</code>, I only get a link to the vehicle with ID equal to user ID.</p>\n\n<p>users_controller.rb looks like this:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  before_action :correct_user, only: [:show]\n\n  def show\n    @user = User.find(params[:id])\n    @vehicles = @user.vehicles\n    @vehicle = current_user.vehicles.build if user_signed_in?\n  end\n\n  private\n\n    # before filters\n\n    # Each user can access only his own profile\n    def correct_user\n      @user = User.find(params[:id])\n      redirect_to(root_url) unless current_user == @user\n    end\n\nend\n</code></pre>\n\n<p>vehicles_controller.rb looks like this:</p>\n\n<pre><code>class VehiclesController &lt; ApplicationController\n  before_action :authenticate_user!,  only: [:create, :destroy]\n  before_action :correct_user,        only: [:destroy, :edit, :update]\n\n  def create\n    @vehicle = current_user.vehicles.build(vehicle_params)\n    if @vehicle.save\n      flash[:success] = \"New vehicle added!\"\n      redirect_to current_user\n    else\n      flash[:danger] = \"Houston, we got a problem!\"\n      render current_user\n    end\n  end\n\n  def edit\n    # @vehicle is already defined in correct_user which is called before_action\n  end\n\n  def update\n    # @vehicle is already defined in correct_user which is called before_action\n    if @vehicle.update_attributes(vehicle_params)\n      flash[:success] = \"Vehicle updated\"\n      redirect_to current_user\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    @vehicle.destroy\n    flash[:success] = \"Vehicle removed\"\n    redirect_to request.referrer || root_url\n  end\n\n  private\n\n    def vehicle_params\n      params.require(:vehicle).permit(:name, :matriculation_date)\n    end\n\n    # before filters\n\n    # Each user can remove/edit/destroy only the vehicles he owns\n    def correct_user\n      @vehicle = current_user.vehicles.find_by(id: params[:id])\n      redirect_to root_url if @vehicle.nil?\n    end\n\nend\n</code></pre>\n\n<p>routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  devise_for :users\n  root 'static_pages#home'\n  resources :users,               only: [:show, :index]\n  resources :vehicles,            only: [:create, :edit, :update, :destroy]\n\nend\n</code></pre>\n\n<p>the partial I use to display single vehicle info is:</p>\n\n<pre><code>&lt;li id=\"micropost-&lt;%= vehicle.id %&gt;\"&gt;\n  &lt;span class=\"name\"&gt;&lt;%= vehicle.name %&gt;&lt;/span&gt;\n  &lt;span class=\"matriculation\"&gt;&lt;%= vehicle.matriculation_date %&gt;&lt;/span&gt;\n  &lt;span class=\"id\"&gt; - id: &lt;%= vehicle.id %&gt;&lt;/span&gt;\n  &lt;%= link_to '&lt;i class=\"fa fa-cog\"&gt;&lt;/i&gt; edit'.html_safe, edit_vehicle_path %&gt;\n  &lt;%= link_to '&lt;i class=\"fa fa-trash\"&gt;&lt;/i&gt; delete'.html_safe, vehicle, method: :delete, data: { confirm: \"You sure?\" } %&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>and the full users/show view is this:</p>\n\n<pre><code>&lt;%= form_for(@vehicle) do |f| %&gt;\n\n    &lt;%= f.label :name, \"Vehicle name\" %&gt;\n    &lt;%= f.text_field :name, class: 'form-control' %&gt;\n\n    &lt;%= f.label :matriculation_date %&gt;\n    &lt;%= f.date_field :matriculation_date, class: 'form-control' %&gt;\n\n    &lt;%= f.submit \"Add\", class: \"btn btn-primary\" %&gt;\n&lt;% end %&gt;\n\n&lt;h3&gt;User email: &lt;%= @user.email %&gt;&lt;/h3&gt;\n\n&lt;% if @user.vehicles.any? %&gt;\n    &lt;h3&gt;Vehicles (&lt;%= @user.vehicles.count %&gt;)&lt;/h3&gt;\n    &lt;ol&gt;\n      &lt;%= render @vehicles %&gt;\n    &lt;/ol&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 5958, "user_id": 1789479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/WlgWK.jpg?s=128&g=1", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/1789479/hieu-pham"}, "edited": false, "score": 0, "creation_date": 1454512295, "post_id": 35179061, "comment_id": 58078278, "body": "Check this <a href=\"http://stackoverflow.com/questions/5480337/easy-way-to-prevent-heroku-idling\" title=\"easy way to prevent heroku idling\">stackoverflow.com/questions/5480337/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "is_accepted": true, "score": 0, "last_activity_date": 1454507997, "creation_date": 1454507997, "answer_id": 35179127, "question_id": 35179061, "link": "https://stackoverflow.com/questions/35179061/pinging-heroku-app-during-a-given-time-window/35179127#35179127", "title": "Pinging heroku app during a given time window", "body": "<p>Run a cron job every X minutes (15 or 30 minutes would probably work), and in that cron script check if the current time is within business hours. If so, ping the Heroku app, otherwise don't do anything.</p>\n"}], "owner": {"reputation": 45, "user_id": 1137073, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/392d7daf6a3b38c2cb65efe41b759a68?s=128&d=identicon&r=PG", "display_name": "Benjamin Schneider", "link": "https://stackoverflow.com/users/1137073/benjamin-schneider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 35179127, "answer_count": 1, "score": 0, "last_activity_date": 1454507997, "creation_date": 1454507846, "question_id": 35179061, "link": "https://stackoverflow.com/questions/35179061/pinging-heroku-app-during-a-given-time-window", "title": "Pinging heroku app during a given time window", "body": "<p>Since heroku introduced the new free dynos, it is not possible to keep a dyno awake by pinging it 24/7 anymore. Is there a solution to always keep it alive during a certain timeframe (eg. during business hours) and then leaving it to go to sleep during the night?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rails-activerecord"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 1, "creation_date": 1454505991, "post_id": 35178309, "comment_id": 58073569, "body": "If you want fuzzy matches, SQL is not the best tool for the job."}, {"owner": {"reputation": 2183, "user_id": 1200043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tr7dt.jpg?s=128&g=1", "display_name": "maniacalrobot", "link": "https://stackoverflow.com/users/1200043/maniacalrobot"}, "edited": false, "score": 0, "creation_date": 1454507596, "post_id": 35178309, "comment_id": 58074769, "body": "This is now possible in Rails 5: <a href=\"http://stackoverflow.com/questions/32753168/rails-5-activerecord-or-query\" title=\"rails 5 activerecord or query\">stackoverflow.com/questions/32753168/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": true, "score": 3, "last_activity_date": 1454576604, "last_edit_date": 1454576604, "creation_date": 1454506550, "answer_id": 35178594, "question_id": 35178309, "link": "https://stackoverflow.com/questions/35178309/rails4-is-it-possible-to-do-an-optional-activerecord-search/35178594#35178594", "title": "Rails4: Is it possible to do an optional ActiveRecord search?", "body": "<p>You could make custom search.</p>\n\n<pre><code>def self.optional_where params\n   query_params = params.keys.map do |k|\n      \"(#{k} = ? OR #{k} IS NULL)\"\n   end.join(\" AND \")\n   where(query_params, *params.values)\nend\n</code></pre>\n\n<p>Then you would use it like</p>\n\n<pre><code>Table.optional_where(vals)\n</code></pre>\n\n<p>This will produce next query</p>\n\n<pre><code>SELECT \"tables\".* FROM \"tables\" WHERE ((firstname = 'Bill' OR first_name IS NULL) AND (lastname = 'test' OR last_name IS NULL))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5958, "user_id": 1789479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/WlgWK.jpg?s=128&g=1", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/1789479/hieu-pham"}, "is_accepted": false, "score": 0, "last_activity_date": 1454513254, "creation_date": 1454513254, "answer_id": 35181055, "question_id": 35178309, "link": "https://stackoverflow.com/questions/35178309/rails4-is-it-possible-to-do-an-optional-activerecord-search/35181055#35181055", "title": "Rails4: Is it possible to do an optional ActiveRecord search?", "body": "<p>Let make a custom search like this:</p>\n\n<pre><code>scope :custom_search, -&gt; (params) {\n  params.each do |k, v|\n    params[k] = if\n      if v.is_a? Array\n        (v &lt;&lt; nil).uniq\n      else\n        [v, nil]\n      end\n    where(params)\n  end\n}\n</code></pre>\n\n<p>Then we use it like:</p>\n\n<pre><code>search_params = {firstname: \"Bill\", lastname: \"test\"}\nTable.custom_search(search_params)\n</code></pre>\n\n<p>The generated sql will be:</p>\n\n<pre><code>SELECT * FROM tables where firstname IN ['Bill', null] AND lastname IN ['test', null]\n</code></pre>\n\n<p>This means you don't care if one or more fields are nil</p>\n"}], "owner": {"reputation": 931, "user_id": 2788619, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100006561616235/picture?type=large", "display_name": "L457", "link": "https://stackoverflow.com/users/2788619/l457"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 35178594, "answer_count": 2, "score": 1, "last_activity_date": 1454576604, "creation_date": 1454505863, "last_edit_date": 1454506077, "question_id": 35178309, "link": "https://stackoverflow.com/questions/35178309/rails4-is-it-possible-to-do-an-optional-activerecord-search", "title": "Rails4: Is it possible to do an optional ActiveRecord search?", "body": "<p>Say i had a record in my database like</p>\n\n<pre><code>+----+-----------+----------+\n| id | firstname | lastname |\n+----+-----------+----------+\n|  1 | 'Bill'    | nil      |\n+----+-----------+----------+\n</code></pre>\n\n<p>(note last name is nil)</p>\n\n<p>Is there any where I can retrieve the above record using the following hash structure as search parameters:</p>\n\n<pre><code>vals = {firstname: \"Bill\", lastname: \"test\"}\nTable.where(vals)\n</code></pre>\n\n<p>(ie: find the closest match, ignoring the nil column value in the table)</p>\n\n<p>(I'm thinking of checking each key in the hash individually and stopping when a match is found, but just wondering if there is a more efficient way, specially for larger tables)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "npm", "asset-pipeline", "babeljs"], "answers": [{"tags": [], "owner": {"reputation": 313, "user_id": 253724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e13b7988e47316d670ea05e88ede7bd4?s=128&d=identicon&r=PG", "display_name": "Bernardo Amorim", "link": "https://stackoverflow.com/users/253724/bernardo-amorim"}, "is_accepted": true, "score": 4, "last_activity_date": 1454543543, "creation_date": 1454543543, "answer_id": 35190050, "question_id": 35178096, "link": "https://stackoverflow.com/questions/35178096/how-to-configure-a-rails-app-with-es6-support/35190050#35190050", "title": "How to configure a Rails app with ES6 support", "body": "<p>This is probably related to recent changes in the babel as well as in babelify.\nNow most of the transformations were pushed out to presets, you can check it out at: <a href=\"https://babeljs.io/docs/plugins/\" rel=\"nofollow\">https://babeljs.io/docs/plugins/</a></p>\n\n<p>Now, if you look at the <a href=\"https://github.com/babel/babelify\" rel=\"nofollow\">babelify's README</a> you can see how the format should be passed to browserify:</p>\n\n<pre><code>$ browserify -t [ babelify --presets [ es2015 react ] ]\n</code></pre>\n\n<p>So, now given your context, you probably want the es2015 preset, to do that, firs install the preset:</p>\n\n<pre><code>$ npm install --save-dev babel-preset-es2015\n</code></pre>\n\n<p>Now, on your <code>config/application.rb</code> configure the command line options properly:</p>\n\n<pre><code>config.browserify_rails.commandline_options = \"-t [ babelify --presets [ es2015 ] ]\"\n</code></pre>\n\n<p>Now you are probably good to go.</p>\n\n<p>If still in trouble, you may remove all the compiled assets and maybe the <code>tmp/*</code> files</p>\n\n<p>I was able to get it up and running in your example.</p>\n"}], "owner": {"reputation": 5304, "user_id": 740394, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/796442b522b037319711277a81d775ca?s=128&d=identicon&r=PG", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/740394/rodrigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2690, "favorite_count": 0, "accepted_answer_id": 35190050, "answer_count": 1, "score": 4, "last_activity_date": 1454543543, "creation_date": 1454505254, "question_id": 35178096, "link": "https://stackoverflow.com/questions/35178096/how-to-configure-a-rails-app-with-es6-support", "title": "How to configure a Rails app with ES6 support", "body": "<p>I've created this <a href=\"https://github.com/Rodrigora/browserify_test\" rel=\"nofollow\">sample app</a> to test ES6 support with asset pipeline.</p>\n\n<p>This setup uses <a href=\"https://github.com/browserify-rails/browserify-rails\" rel=\"nofollow\">browserify-rails</a> gem and I followed its README instructions.</p>\n\n<p>I can't understand why it works in development but fails when runs the precompile command:</p>\n\n<pre><code>$ env RAILS_ENV=production rake assets:precompile\nrake aborted!\nExecJS::ProgramError: Unexpected token: name (Hello) (line: 11569, col: 6, pos: 326685)\n\nError\n    at new JS_Parse_Error (/private/var/folders/xt/853lxmvx7yx2w8v4xyc92t4h0000gn/T/execjs20160203-64141-15mqs7ljs:2659:11936)\n    at js_error (/private/var/folders/xt/853lxmvx7yx2w8v4xyc92t4h0000gn/T/execjs20160203-64141-15mqs7ljs:2659:12155)\n    at croak (/private/var/folders/xt/853lxmvx7yx2w8v4xyc92t4h0000gn/T/execjs20160203-64141-15mqs7ljs:2659:20622)\n    at token_error (/private/var/folders/xt/853lxmvx7yx2w8v4xyc92t4h0000gn/T/execjs20160203-64141-15mqs7ljs:2659:20759)\n    at unexpected (/private/var/folders/xt/853lxmvx7yx2w8v4xyc92t4h0000gn/T/execjs20160203-64141-15mqs7ljs:2659:20847)\n    at semicolon (/private/var/folders/xt/853lxmvx7yx2w8v4xyc92t4h0000gn/T/execjs20160203-64141-15mqs7ljs:2659:21320)\n    at simple_statement (/private/var/folders/xt/853lxmvx7yx2w8v4xyc92t4h0000gn/T/execjs20160203-64141-15mqs7ljs:2659:24179)\n    at /private/var/folders/xt/853lxmvx7yx2w8v4xyc92t4h0000gn/T/execjs20160203-64141-15mqs7ljs:2659:22152\n    at /private/var/folders/xt/853lxmvx7yx2w8v4xyc92t4h0000gn/T/execjs20160203-64141-15mqs7ljs:2659:21493\n    at block_ (/private/var/folders/xt/853lxmvx7yx2w8v4xyc92t4h0000gn/T/execjs20160203-64141-15mqs7ljs:2659:26198)\n  (in /Users/rodrigora/Projects/browserify_test/app/assets/javascripts/application.js)new JS_Parse_Error ((execjs):2659:11936)\njs_error ((execjs):2659:12155)\ncroak ((execjs):2659:20622)\ntoken_error ((execjs):2659:20759)\nunexpected ((execjs):2659:20847)\nsemicolon ((execjs):2659:21320)\nsimple_statement ((execjs):2659:24179)\n(execjs):2659:22152\n(execjs):2659:21493\nblock_ ((execjs):2659:26198)\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/execjs-2.6.0/lib/execjs/external_runtime.rb:39:in `exec'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/execjs-2.6.0/lib/execjs/external_runtime.rb:21:in `eval'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/execjs-2.6.0/lib/execjs/external_runtime.rb:46:in `call'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/uglifier-2.7.2/lib/uglifier.rb:212:in `run_uglifyjs'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/uglifier-2.7.2/lib/uglifier.rb:179:in `compile'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/uglifier_compressor.rb:25:in `evaluate'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/tilt-1.4.1/lib/tilt/template.rb:103:in `render'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/context.rb:197:in `block in evaluate'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/context.rb:194:in `each'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/context.rb:194:in `evaluate'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/bundled_asset.rb:25:in `initialize'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/base.rb:377:in `new'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/base.rb:377:in `build_asset'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/index.rb:94:in `block in build_asset'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/caching.rb:58:in `cache_asset'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/index.rb:93:in `build_asset'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/base.rb:287:in `find_asset'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/index.rb:61:in `find_asset'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/manifest.rb:211:in `block in find_asset'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/manifest.rb:257:in `benchmark'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/manifest.rb:210:in `find_asset'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/manifest.rb:119:in `block in compile'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/manifest.rb:118:in `each'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/sprockets/manifest.rb:118:in `compile'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-rails-2.3.3/lib/sprockets/rails/task.rb:70:in `block (3 levels) in define'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-2.12.4/lib/rake/sprocketstask.rb:146:in `with_logger'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/gems/sprockets-rails-2.3.3/lib/sprockets/rails/task.rb:69:in `block (2 levels) in define'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/bin/ruby_executable_hooks:15:in `eval'\n/Users/rodrigora/.rvm/gems/ruby-2.2.4@browserfy/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\nTasks: TOP =&gt; assets:precompile\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails', '4.1.14'\ngem 'sass-rails', '~&gt; 4.0.3'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.0.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0',          group: :doc\ngem 'spring',        group: :development\ngem \"browserify-rails\"\n</code></pre>\n\n<p>app/assets/javascripts/home.js</p>\n\n<pre><code>var Hello = require('./components/hello.jsx');\nnew Hello();\nconsole.log('hi');\n</code></pre>\n\n<p>app/assets/javascripts/components/hello.jsx</p>\n\n<pre><code>\"use strict\";\n\nclass Hello {\n  constructor() {\n    $(window).ready(function() {\n      $('body').append('Hello es6!');\n    });\n  }\n}\n\nmodule.exports = Hello;\n</code></pre>\n\n<p>package.json</p>\n\n<pre><code>{\n  \"name\": \"something\",\n  \"dependencies\" : {\n    \"browserify\": \"~&gt; 10.2.4\",\n    \"browserify-incremental\": \"^3.0.1\",\n    \"babelify\": \"^7.2.0\"\n  },\n  \"license\": \"MIT\",\n  \"engines\": {\n    \"node\": \"&gt;= 0.10\"\n  }\n}\n</code></pre>\n"}, {"tags": ["ruby", "hash", "constructor"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1454504792, "post_id": 35177845, "comment_id": 58072686, "body": "<a href=\"http://ruby-doc.org/core-1.9.3/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Documentation</a> isn&#39;t clear on this? &quot;If obj is specified, this single object will be used for all default values.&quot;"}, {"owner": {"reputation": 9009, "user_id": 263900, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/7Hnwy.png?s=128&g=1", "display_name": "doub1ejack", "link": "https://stackoverflow.com/users/263900/doub1ejack"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454505113, "post_id": 35177845, "comment_id": 58072897, "body": "Downvote?  That&#39;s a legit question.  I&#39;m 3 days into Ruby (and it&#39;s documentation) and no, I didn&#39;t find it immediately clear from the documentation."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1454505900, "post_id": 35177845, "comment_id": 58073496, "body": "Even with the examples?"}, {"owner": {"reputation": 9009, "user_id": 263900, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/7Hnwy.png?s=128&g=1", "display_name": "doub1ejack", "link": "https://stackoverflow.com/users/263900/doub1ejack"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454516183, "post_id": 35177845, "comment_id": 58081250, "body": "Even so. Actually, earlier I assumed that there was some self-evident documentation I had missed, but looking more closely now I don&#39;t see where the <code>{}</code> constructor pattern is described or compared to <code>.new()</code>.  Where is that?"}], "answers": [{"comments": [{"owner": {"reputation": 9009, "user_id": 263900, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/7Hnwy.png?s=128&g=1", "display_name": "doub1ejack", "link": "https://stackoverflow.com/users/263900/doub1ejack"}, "edited": false, "score": 1, "creation_date": 1454516271, "post_id": 35177904, "comment_id": 58081313, "body": "Is the difference in the constructor or that <code>Hash.new(0)</code> is passing a zero?  Or in other words, are <code>Hash.new()</code> and <code>{}</code> equivalent?"}, {"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "reply_to_user": {"reputation": 9009, "user_id": 263900, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/7Hnwy.png?s=128&g=1", "display_name": "doub1ejack", "link": "https://stackoverflow.com/users/263900/doub1ejack"}, "edited": false, "score": 2, "creation_date": 1454517450, "post_id": 35177904, "comment_id": 58082280, "body": "@doub1ejack <code>Hash.new()</code> equivalent to <code>{}</code>"}], "tags": [], "owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "is_accepted": true, "score": 29, "last_activity_date": 1454504672, "creation_date": 1454504672, "answer_id": 35177904, "question_id": 35177845, "link": "https://stackoverflow.com/questions/35177845/whats-the-difference-between-hash-new0-and/35177904#35177904", "title": "What&#39;s the difference between &quot;Hash.new(0)&quot; and &quot;{}&quot;", "body": "<p><code>Hash.new(0)</code> sets default value for any key to <code>0</code>, while <code>{}</code> sets <code>nil</code></p>\n\n<pre><code>h1 = Hash.new(0)\nh1.default  # =&gt; 0\nh1[:a] += 1 # =&gt; 1\nh2 = {}\nh2.default  # =&gt; nil\nh2[:a] += 1 # =&gt; NoMethodError: undefined method `+' for nil:NilClass\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 634, "user_id": 2421138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83b2ecf802fba0d368d506e165ac797b?s=128&d=identicon&r=PG", "display_name": "Hassan Jamal", "link": "https://stackoverflow.com/users/2421138/hassan-jamal"}, "is_accepted": false, "score": 0, "last_activity_date": 1497213679, "creation_date": 1497213679, "answer_id": 44488573, "question_id": 35177845, "link": "https://stackoverflow.com/questions/35177845/whats-the-difference-between-hash-new0-and/44488573#44488573", "title": "What&#39;s the difference between &quot;Hash.new(0)&quot; and &quot;{}&quot;", "body": "<p>If we create a hash object using Hash.new(0), the parameter, 0 in this case, will be used as the hash\u2019s default value\u2014it will be the value returned if you look up a key that isn\u2019t yet in the hash</p>\n\n<pre><code>def count_frequency(word_list)\n  counts = Hash.new(0)\n  word_list.each { |word|\n    counts[word] += 1\n  }\n   counts\nend\np count_frequency(%w(red blue green red white black))\n</code></pre>\n\n<p>will produce </p>\n\n<pre><code>{\"red\"=&gt;2, \"blue\"=&gt;1, \"green\"=&gt;1, \"white\"=&gt;1, \"black\"=&gt;1}\n</code></pre>\n\n<p>Adding more to it  </p>\n\n<pre><code>brands= Hash.new( \"nike\" )\nputs \"#{brands[0]}\"\nputs \"#{brands[101]}\"\n</code></pre>\n\n<p>both will produce </p>\n\n<pre><code>nike\nnike\n</code></pre>\n\n<p>and </p>\n\n<pre><code>brands = {0 =&gt; \"nike\" , 1 =&gt;\"Reebok\"}\nbrands[0]   # =&gt; \"nike\"\nbrands[1]   # =&gt; \"Reebok\"\nbrands[100] # =&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 9009, "user_id": 263900, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/7Hnwy.png?s=128&g=1", "display_name": "doub1ejack", "link": "https://stackoverflow.com/users/263900/doub1ejack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5404, "favorite_count": 2, "accepted_answer_id": 35177904, "answer_count": 2, "score": 9, "last_activity_date": 1497213679, "creation_date": 1454504498, "last_edit_date": 1454516847, "question_id": 35177845, "link": "https://stackoverflow.com/questions/35177845/whats-the-difference-between-hash-new0-and", "title": "What&#39;s the difference between &quot;Hash.new(0)&quot; and &quot;{}&quot;", "body": "<p>I was getting an unexpected (to me) behavior in my code so I tried to isolate the problem in the REPL.  However these constructors both appear to have the same result (an empty hash):</p>\n\n<pre><code>irb&gt; a = {}\n# =&gt; {}\n\nirb&gt; b = Hash.new(0)\n# =&gt; {}\n</code></pre>\n\n<p>When I pass <code>{}</code> into a reduce function I get a NoMethodError, though.  What is the difference between these two constructors?</p>\n\n<pre><code>irb&gt; arr = \"count the occurance of each of the words\".scan(/\\w+/)\n# =&gt; [\"count\", \"the\", \"occurance\", \"of\", \"each\", \"of\", \"the\", \"words\"]\n\nirb&gt; x = arr.reduce(Hash.new(0)) { |hsh, word| hsh[word] += 1; hsh }\n# =&gt; {\"count\"=&gt;1, \"the\"=&gt;2, \"occurance\"=&gt;1, \"of\"=&gt;2, \"each\"=&gt;1, \"words\"=&gt;1}\n\nirb&gt; x = arr.reduce({}) { |hsh, word| hsh[word] += 1; hsh }\n# NoMethodError: undefined method `+' for nil:NilClass\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "shopify", "webhooks"], "answers": [{"comments": [{"owner": {"reputation": 533, "user_id": 5843330, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UZVxS.png?s=128&g=1", "display_name": "boydenhartog", "link": "https://stackoverflow.com/users/5843330/boydenhartog"}, "edited": false, "score": 0, "creation_date": 1454530987, "post_id": 35182339, "comment_id": 58090920, "body": "Thanks a lot mate. This cleared things up for me. I found this piece of code that could be used to validate webhooks: <a href=\"https://github.com/csaunders/shopProductSink/blob/038e8c3f76e96e8c12d0b1c14d1c32a48c679907/app/models/shop_product_sink/webhooks.rb\" rel=\"nofollow noreferrer\">github.com/csaunders/shopProductSink/blob/&hellip;</a>  If I create a model for this code, how do I use/include it in my orders controller? I am currently receiving webhooks on my staging environment and the orders are created succesfully, but they aren&#39;t authenticated so anyone can create orders."}, {"owner": {"reputation": 533, "user_id": 5843330, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UZVxS.png?s=128&g=1", "display_name": "boydenhartog", "link": "https://stackoverflow.com/users/5843330/boydenhartog"}, "edited": false, "score": 0, "creation_date": 1454537528, "post_id": 35182339, "comment_id": 58094692, "body": "Cheers, I just got the authentication to work. Thanks for the pointers!"}], "tags": [], "owner": {"reputation": 5958, "user_id": 1789479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/WlgWK.jpg?s=128&g=1", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/1789479/hieu-pham"}, "is_accepted": true, "score": 4, "last_activity_date": 1454603057, "last_edit_date": 1454603057, "creation_date": 1454516609, "answer_id": 35182339, "question_id": 35177176, "link": "https://stackoverflow.com/questions/35177176/consuming-webhooks-shopify-api/35182339#35182339", "title": "Consuming webhooks shopify-api", "body": "<p>For receiving the changes (especially <code>Order Creation</code> event) from Shopify, you don't need to use any gem or third party to integrate!</p>\n\n<p>Here are the steps that I did before in my app:</p>\n\n<p><strong>1. Provide an api in your app to receive a webhook event</strong></p>\n\n<p>Here is an example:</p>\n\n<p>Your route:</p>\n\n<pre><code>post '/shopify/create_order', to: 'shopify#create_order'\n</code></pre>\n\n<p>Your controller:</p>\n\n<pre><code>class ShopifyController &lt; ApplicationController\n  def create_order\n    # process shopify order here: all info in `params`\n  end\nend\n</code></pre>\n\n<p><strong>2. Config to call webhook from your <a href=\"https://docs.shopify.com/manual/settings/notifications/webhooks\" rel=\"nofollow noreferrer\">Shopify Settings</a>.</strong> The configured url will be:</p>\n\n<pre><code>http://your_production_url/shopify/create_order\n</code></pre>\n\n<p>If you want to test from localhost, go to <code>step 3</code></p>\n\n<p><strong>3. (Optional) Test from your localhost</strong></p>\n\n<p>Download this free tool: <a href=\"https://ngrok.com/\" rel=\"nofollow noreferrer\">ngrok</a> and extract it to your machine.\nRun ngrok in your terminal to generate a forwarding url to your localhost by this command:</p>\n\n<pre><code>ngrok http 3000\n</code></pre>\n\n<p>So you will get the output from console like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/eS6K7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eS6K7.png\" alt=\"enter image description here\"></a></p>\n\n<p>Copy the generated url (<a href=\"http://fbc5cf88.ngrok.io\" rel=\"nofollow noreferrer\">http://fbc5cf88.ngrok.io</a> for example) above and add to your Shopify settings in step 2</p>\n\n<p><strong>4. (Optional but critical) Set privacy in your app</strong>, to make sure only Shopify can call your api. Follow this <a href=\"https://docs.shopify.com/api/webhooks/using-webhooks#verify-webhook\" rel=\"nofollow noreferrer\">documentation</a></p>\n\n<p>Shopify also provides api to integrate with Shopify resources: create/update <code>product</code>, <code>collection</code>, <code>collect</code>, <code>metafield</code>,... You can directly use it. All was described at <a href=\"https://docs.shopify.com/api/product\" rel=\"nofollow noreferrer\">Shopify API documentation</a>. But the easiest way to work with Shopify is <a href=\"https://github.com/Shopify/shopify_api\" rel=\"nofollow noreferrer\">shopify_api</a> gem which provides an interface to work with Shopify (via <code>ActiceResource</code>)</p>\n"}, {"comments": [{"owner": {"reputation": 533, "user_id": 5843330, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UZVxS.png?s=128&g=1", "display_name": "boydenhartog", "link": "https://stackoverflow.com/users/5843330/boydenhartog"}, "edited": false, "score": 0, "creation_date": 1454531107, "post_id": 35182525, "comment_id": 58091002, "body": "Thanks mate, definitely helpful"}, {"owner": {"reputation": 533, "user_id": 5843330, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UZVxS.png?s=128&g=1", "display_name": "boydenhartog", "link": "https://stackoverflow.com/users/5843330/boydenhartog"}, "edited": false, "score": 0, "creation_date": 1454537533, "post_id": 35182525, "comment_id": 58094697, "body": "Cheers, I just got the authentication to work. Thanks for the pointers!"}], "tags": [], "owner": {"reputation": 3088, "user_id": 245196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da88278d094d839c73975af2fe23ed47?s=128&d=identicon&r=PG", "display_name": "Hafiz Ismail", "link": "https://stackoverflow.com/users/245196/hafiz-ismail"}, "is_accepted": false, "score": 0, "last_activity_date": 1454517079, "creation_date": 1454517079, "answer_id": 35182525, "question_id": 35177176, "link": "https://stackoverflow.com/questions/35177176/consuming-webhooks-shopify-api/35182525#35182525", "title": "Consuming webhooks shopify-api", "body": "<p>Probably reading up on the <a href=\"https://docs.shopify.com/api/webhooks/using-webhooks\" rel=\"nofollow\">documentation on Webhooks</a> would help you figure out a lot of what you need to do</p>\n\n<p>In essence, here are the overview of what you need to start consuming web hooks:</p>\n\n<p><b>1. Create your web hooks</b></p>\n\n<ul>\n<li>You can do it using the Shopify API (<a href=\"https://docs.shopify.com/api/webhook#create\" rel=\"nofollow\"><code>POST /admin/webhooks.json</code></a>)</li>\n<li>Or you can do it through <a href=\"https://docs.shopify.com/api/webhooks/using-webhooks#through-store-admin\" rel=\"nofollow\">store admin</a></li>\n</ul>\n\n<p>The params that you need to take note of:</p>\n\n<ul>\n<li>topic: the type of hook you want (for e.g <code>orders/create</code>)</li>\n<li>address: the URL of the endpoint that you would be consuming the hook at (for e.g: <code>https://myapp.domain.com/hooks/order_create</code>)</li>\n</ul>\n\n<p><b>2. Create your endpoint that will respond to hooks</b></p>\n\n<ul>\n<li>You then need to setup your ROR app to expose an endpoint that will respond to a POST request.</li>\n<li>This endpoint is the same URL that you previously specified when creating the hook\nMore info at <a href=\"https://docs.shopify.com/api/webhooks/using-webhooks#respond-to-webhook\" rel=\"nofollow\">https://docs.shopify.com/api/webhooks/using-webhooks#respond-to-webhook</a></li>\n</ul>\n\n<p><b>Notes:</b> You also need to implement a way to verify that requests that you receive through the endpoints came from Shopify, <a href=\"https://docs.shopify.com/api/webhooks/using-webhooks#verify-webhook\" rel=\"nofollow\">detailed here.</a></p>\n"}], "owner": {"reputation": 533, "user_id": 5843330, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UZVxS.png?s=128&g=1", "display_name": "boydenhartog", "link": "https://stackoverflow.com/users/5843330/boydenhartog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2143, "favorite_count": 3, "accepted_answer_id": 35182339, "answer_count": 2, "score": 1, "last_activity_date": 1454603057, "creation_date": 1454502621, "last_edit_date": 1454506727, "question_id": 35177176, "link": "https://stackoverflow.com/questions/35177176/consuming-webhooks-shopify-api", "title": "Consuming webhooks shopify-api", "body": "<p>I'm in the process of building my first RoR webapp and I'm currently trying to set up an integration with Shopify. I want to create an order in my web application whenever one is created in Shopify. For this I want to use a Shopify webhook. Step two will be to set it up so that after processing the order I'll use the Shopify API to update some records. For now my main concern is receiving the webhooks. I've been looking at the documentation for the Shopify gem but with my limited RoR skills I can't seem to figure it out. I've been searching the web for a few hours but can't find any clear examples / explanation. </p>\n\n<p>I'm confused about this gem; shopify-api (<a href=\"https://docs.shopify.com/api/authentication/using-api-gem-with-private-app-credentials\" rel=\"nofollow\">https://docs.shopify.com/api/authentication/using-api-gem-with-private-app-credentials</a>). I've created a private app in shopify, but after that I'm lost. Where am I supposed to place this code and how is this invoked after receiving a webhook? </p>\n\n<p>It seems to me that this gem is mainly used to access the Shopify API instead of consuming webhooks. Am I going at this all wrong? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "pundit"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 2, "creation_date": 1454502511, "post_id": 35177008, "comment_id": 58071080, "body": "do you have a <code>PinPolicy</code> class? :)"}, {"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1454502699, "post_id": 35177008, "comment_id": 58071213, "body": "Is that what I need in this code"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1454502733, "post_id": 35177008, "comment_id": 58071235, "body": "see my answer please"}, {"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1454502791, "post_id": 35177008, "comment_id": 58071280, "body": "let me try this out now, thank you. will revert shortly, is their any else retarded in my code."}], "answers": [{"comments": [{"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1454503012, "post_id": 35177207, "comment_id": 58071433, "body": "how should i code this in the application-policy ,  below the def initializer, or what. Do I need to delete any code in my policy above"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1454503312, "post_id": 35177207, "comment_id": 58071648, "body": "@ChrisDormani Create new file in <code>app&#47;policies</code> called <code>pin_policy.rb</code> and put the code I showed there"}, {"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1454503496, "post_id": 35177207, "comment_id": 58071783, "body": "appreciate your time, will try this momentarily"}, {"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1454503623, "post_id": 35177207, "comment_id": 58071874, "body": "and in terms of doing the authorisation on the pin for each of the resource (Create, Update etc), would that be called as authorize.pin or @pin.authorize"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1454505056, "post_id": 35177207, "comment_id": 58072854, "body": "@ChrisDormani did it work? If yes, consider accepting (checkmark on the left of the answer), and optionally upvoting the answer"}, {"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1454505827, "post_id": 35177207, "comment_id": 58073433, "body": "returning to the office in 15 minutes, will deploy and up vote"}, {"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1454506327, "post_id": 35177207, "comment_id": 58073829, "body": "Right, I have created a new file as you advocated. And bumped that code in. Beneath that do I need to def create?     user.admin?    end"}, {"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1454506394, "post_id": 35177207, "comment_id": 58073887, "body": "If you look at my application policy above, their is index, show, create new, update. Do I need to copy these into the pin_policy.rb"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1454506399, "post_id": 35177207, "comment_id": 58073889, "body": "@ChrisDormani no, since every method defined in <code>ApplicationPolicy</code> is inherited by PinPolicy, so it already has this <code>create?</code> method, since it is defined in <code>ApplicationPolicy</code>"}, {"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1454506627, "post_id": 35177207, "comment_id": 58074055, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/102484/discussion-between-chris-dormani-and-andrey-deineko\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1454507795, "last_edit_date": 1454507795, "creation_date": 1454502707, "answer_id": 35177207, "question_id": 35177008, "link": "https://stackoverflow.com/questions/35177008/pundit-for-rails-trouble-configuring/35177207#35177207", "title": "pundit for rails trouble configuring", "body": "<p>The errors occur most likely simply do to the fact, that, well, as the exception states, there is no <code>PinPolicy</code> class. Apart from general <code>ApplicationPolicy</code> you should also define the policy for each resource (which inherits from main <code>ApplicationPolicy</code>).</p>\n\n<p>Add it under <code>/policies</code> directory:</p>\n\n<pre><code>class PinPolicy &lt; ApplicationPolicy\n  class Scope &lt; Scope\n    def resolve\n      return scope if user.admin?\n      fail 'scope is not defined'\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 35177207, "answer_count": 1, "score": 1, "last_activity_date": 1454507795, "creation_date": 1454502198, "last_edit_date": 1454506997, "question_id": 35177008, "link": "https://stackoverflow.com/questions/35177008/pundit-for-rails-trouble-configuring", "title": "pundit for rails trouble configuring", "body": "<p>I have built a web app using rails 4.2.4, devise and a pins scaffolding where users can CRUD a pin.</p>\n\n<p>I am about to medicate myself trying to get pundit working so that only the Admin can CRUD a pin, all users signed in or guests can only view and cannot create, update or destroy.</p>\n\n<p>I get a litany of errors like this> <a href=\"https://i.stack.imgur.com/kIbRV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kIbRV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Facts: </p>\n\n<p>I have 2 models pin.rb and user.rb </p>\n\n<p>I have a pins_controller.rb </p>\n\n<p>I done a migration add_admin_to_users.rb (do i need further intervention in the console to set something up for admin besides this)</p>\n\n<p>Can I get help with the syntax and my failed approach</p>\n\n<pre><code>class ApplicationPolicy\n  attr_reader :user, :pin\n\n  def initialize(user, pin)\n    raise Pundit::NotAuthorizedError, \"must be logged in\" unless user\n    @user = user\n    @pin = pin\n  end\n\n  def index?\n    true\n  end\n\n  def show?\n    scope.where(:id =&gt; record.id).exists?\n  end\n\n  def create?\n    user.admin? \n  end\n\n  def new?\n    user.admin? \n  end\n\n  def update?\n    user.admin? \n  end\n\n  def edit?\n    update?\n  end\n\n  def destroy?\n    user.admin? \n  end\n\n  def scope\n    Pundit.policy_scope!(user, record.class)\n  end\n\n  class Scope\n    attr_reader :user, :scope\n\n    def initialize(user, scope)\n      @user = user\n      @scope = scope\n    end\n\n    def resolve\n      scope\n    end\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>Blockquote</p>\n</blockquote>\n\n<pre><code>class PinsController &lt; ApplicationController\n  before_action :set_pin, only: [:show, :edit, :update, :destroy]\n  before_action :correct_user, only: [:edit, :update, :destroy]\n  before_action :authenticate_user!, except: [:index, :show]\n\n  def index\n    if params[:search].present? &amp;&amp; !params[:search].nil?\n      @pins = Pin.where(\"description LIKE ?\", \"%#{params[:search]}%\").paginate(:page =&gt; params[:page], :per_page =&gt; 15)\n    else\n      @pins = Pin.all.order(\"created_at DESC\").paginate(:page =&gt; params[:page], :per_page =&gt; 15)\n    end\n  end\n\n\n  def show\n\n  end\n\n\n  def new\n    @pin = current_user.pins.build\n  end\n\n\n  def edit\n  end\n\n\n  def create\n    @pin = current_user.pins.build(pin_params)\n    if @pin.save\n      redirect_to @pin, notice: 'Pin was successfully created.'\n    else\n      render :new\n    end\n  end\n\n\n  def update\n    if @pin.update(pin_params)\n      redirect_to @pin, notice: 'Pin was successfully updated.'\n    else\n      render :edit\n    end\n  end\n\n\n  def destroy\n    @pin.destroy\n    redirect_to pins_url\n  end\n\n\nprivate\n    # Use callbacks to share common setup or constraints between actions.\n    def set_pin\n      @pin = Pin.find_by(id: params[:id])\n    end\n\n    def correct_user\n      @pin = current_user.pins.find_by(id: params[:id])\n      redirect_to pins_path, notice: \"Not authorized to edit this pin\" if @pin.nil?\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def pin_params\n      params.require(:pin).permit(:description, :image)\n    end\nend\n</code></pre>\n\n<blockquote>\n  <p>Blockquote</p>\n</blockquote>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n include Pundit\n rescue_from Pundit::NotAuthorizedError, with: :user_not_authorized\n protect_from_forgery with: :exception\n before_filter :configure_permitted_parameters, if: :devise_controller?\n\n protected\n\n def configure_permitted_parameters\n    devise_parameter_sanitizer.for(:sign_up) &lt;&lt; :name\n    devise_parameter_sanitizer.for(:account_update) &lt;&lt; :name\n end\n\n private\n\n def user_not_authorized\n   flash[:warning] = \"You are not authorized to perform this action.\"\n   redirect_to(request.referrer || root_path)\n end\nend\n</code></pre>\n"}, {"tags": ["ruby", "calabash-ios"], "comments": [{"owner": {"reputation": 1410, "user_id": 3890924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uy8Gd.jpg?s=128&g=1", "display_name": "alannichols", "link": "https://stackoverflow.com/users/3890924/alannichols"}, "edited": false, "score": 0, "creation_date": 1454587737, "post_id": 35176243, "comment_id": 58117153, "body": "One thing to check would be to run the console using bundle exec ..., to check it&#39;s using the same version of calabash as your automated tests. (If you aren&#39;t already)"}, {"owner": {"reputation": 2440, "user_id": 2047304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcea18e8fa7f6f5016b38ac97be13f7?s=128&d=identicon&r=PG", "display_name": "jmoody", "link": "https://stackoverflow.com/users/2047304/jmoody"}, "edited": false, "score": 0, "creation_date": 1454592593, "post_id": 35176243, "comment_id": 58120302, "body": "What does your 01_launch.rb look like?  I seems like you are trying to rotate before the app is controlled by instruments."}], "owner": {"reputation": 43, "user_id": 5809300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f502a04c7172eb907844b6486ed428b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/5809300/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1454602589, "creation_date": 1454500148, "last_edit_date": 1454602589, "question_id": 35176243, "link": "https://stackoverflow.com/questions/35176243/calabash-ios-rotate-throws-launcher-run-loop-error", "title": "calabash-ios rotate throws launcher/run_loop error", "body": "<p>I'm trying to use the rotate funktion to bring the app into the landscape view. In the Console that works just fine like:</p>\n\n<ul>\n<li>rotate(:right)</li>\n<li>rotate(:left)</li>\n<li>rotate :right</li>\n<li>rotate :left</li>\n</ul>\n\n<p>They work without a problem, however as soon as i try them through my custom step or the original step definition i get the following error message:</p>\n\n<p>the current launcher must be active and be attached to a run_loop (ArgumentError)</p>\n\n<p>Since i couldn't find anything regading the error message or the rotate command that would refer to this, i ask here if anyone knows how to solve this problem?</p>\n\n<p><strong>EDIT:</strong>\nThx for the advice alannichols however i'm already using the following commands to execut it:\nDEVICE_TARGET='iPhone 4s (9.1)' bundle exec cucumber\nDEVICE_TARGET='iPhone 4s (9.1)' bundle exec calabash-ios console</p>\n\n<p>I use the calabash version 0.17.1 and xcode 7.1</p>\n\n<p><strong>EDIT2:</strong>\nThe content of my 01_launcher.rb is as follows:</p>\n\n<pre><code>require 'calabash-cucumber/launcher'\nrequire 'run_loop'\n\n# You can find examples of more complicated launch hooks in these\n# two repositories:\n#\n# https://github.com/calabash/ios-smoke-test-app/blob/master/CalSmokeApp/features/support/01_launch.rb\n# https://github.com/calabash/ios-webview-test-app/blob/master/CalWebViewApp/features/support/01_launch.rb\n\nmodule Calabash::Launcher\n  @@launcher = nil\n\n  def self.launcher\n    @@launcher ||= Calabash::Cucumber::Launcher.new\n  end\n\n  def self.launcher=(launcher)\n    @@launcher = launcher\n  end\nend\n\nBefore('@reset_app_btw_scenarios') do\n  ENV['RESET_BETWEEN_SCENARIOS'] = '1'\n  start_test_server_in_background\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "datetime"], "comments": [{"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 1, "creation_date": 1454498499, "post_id": 35175596, "comment_id": 58068348, "body": "<code>event.starts_at</code> will give you the db value. Then you can use strftime to get the desired format"}, {"owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "reply_to_user": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1454498719, "post_id": 35175596, "comment_id": 58068491, "body": "I tried that but my IDE underlines starts_at saying &quot;can&#39;t find starts_at&quot;"}, {"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1454498926, "post_id": 35175596, "comment_id": 58068620, "body": "IDEs warnings can be wrong while coding ruby. Run a test or run your app to check if it works"}, {"owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "reply_to_user": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1454499018, "post_id": 35175596, "comment_id": 58068676, "body": "but it doesn&#39;t do that for any other field, just starts_at? ok I will run it"}], "answers": [{"comments": [{"owner": {"reputation": 1514, "user_id": 3749865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1873b0d2c86671bb1b3d44b53b48c09?s=128&d=identicon&r=PG", "display_name": "Christian Rolle", "link": "https://stackoverflow.com/users/3749865/christian-rolle"}, "edited": false, "score": 0, "creation_date": 1454499696, "post_id": 35175715, "comment_id": 58069158, "body": "event.starts_at does not return a DateTime object. Verify with event.starts_at.class in console."}], "tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1454498679, "creation_date": 1454498679, "answer_id": 35175715, "question_id": 35175596, "link": "https://stackoverflow.com/questions/35175596/obtaining-datetime-value-from-database-and-getting-its-hour-int/35175715#35175715", "title": "Obtaining datetime value from database and getting its hour int", "body": "<p><code>event.starts_at</code> is the DateTime object. Use <a href=\"http://ruby-doc.org/core-2.2.0/Time.html#method-i-strftime\" rel=\"nofollow\">Time#strftime</a> to get the desired format. eg:</p>\n\n<pre><code>event.starts_at.strftime(\"%H\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1514, "user_id": 3749865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1873b0d2c86671bb1b3d44b53b48c09?s=128&d=identicon&r=PG", "display_name": "Christian Rolle", "link": "https://stackoverflow.com/users/3749865/christian-rolle"}, "is_accepted": false, "score": 1, "last_activity_date": 1454499388, "creation_date": 1454499388, "answer_id": 35175975, "question_id": 35175596, "link": "https://stackoverflow.com/questions/35175596/obtaining-datetime-value-from-database-and-getting-its-hour-int/35175975#35175975", "title": "Obtaining datetime value from database and getting its hour int", "body": "<p>event.starts_at returns an object of class <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html\" rel=\"nofollow\">ActiveSupport::TimeWithZone</a>\nIt provides an 'hour' reader:</p>\n\n<pre><code>event.starts_at.hour\n</code></pre>\n\n<p>But please consider that starts_at also could be nil. So if you can't ensure presence of starts_at, you better go with something like:</p>\n\n<pre><code>event.starts_at &amp;&amp; event.starts_at.hour\n</code></pre>\n"}], "owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1454499388, "creation_date": 1454498300, "question_id": 35175596, "link": "https://stackoverflow.com/questions/35175596/obtaining-datetime-value-from-database-and-getting-its-hour-int", "title": "Obtaining datetime value from database and getting its hour int", "body": "<p>I am new to Ruby/Ruby on Rails and I was wondering if it is possible to get a <code>datetime</code> entry <code>:starts_at</code> from my <code>events</code> table in my database and obtain from it an integer representing just the hour value?</p>\n\n<p>The datetime '<code>:starts_at</code>'has the layout:</p>\n\n<pre><code>YYYY-MM-DD HH:MM:SS\ne.g. 2016-01-03 11:05:00\n</code></pre>\n\n<p>what I would want is just the \"11\" representing the hour, so I can set it as variable \"<code>start_hour</code>\".</p>\n\n<p>I am not sure how to obtain my <code>:starts_at</code> value from the database in the first place, but here is some attempt at code showing what I mean.</p>\n\n<p>Doing:</p>\n\n<pre><code>events.each do |event|\n    start_time = event(:starts_at.hour) #is this how to obtain :starts_at?\nend\n</code></pre>\n\n<p>would return \"11:00\" instead of \"11\", how would I narrow it down to just \"11\"? And if the time was \"08:00\" it should be \"8\"?</p>\n"}, {"tags": ["ruby", "fastlane"], "answers": [{"tags": [], "owner": {"reputation": 8766, "user_id": 511299, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2rafV.jpg?s=128&g=1", "display_name": "Sunkas", "link": "https://stackoverflow.com/users/511299/sunkas"}, "is_accepted": true, "score": 3, "last_activity_date": 1454499450, "creation_date": 1454499450, "answer_id": 35176001, "question_id": 35175276, "link": "https://stackoverflow.com/questions/35175276/broken-fastlane-installation-mix-ruby-versions/35176001#35176001", "title": "Broken Fastlane installation / mix Ruby versions", "body": "<p>Solved it by installing </p>\n\n<p><a href=\"https://rvm.io/\" rel=\"nofollow\">https://rvm.io/</a></p>\n\n<p>My command history:</p>\n\n<pre><code>brew install gnupg gnupg2\ngpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\n\\curl -sSL https://get.rvm.io | bash -s stable --ruby\nsource /Users/xxx/.rvm/scripts/rvm\ngem install fastlane --verbose\nxcode-select --install\ngem cleanup\ngem update -p\nrvm reinstall ruby-2.2.3 --with-openssl-dir=/usr/local\ngem install fastlane --verbose\n</code></pre>\n\n<p>One issue along the way:</p>\n\n<p><a href=\"https://github.com/fastlane/fastlane/issues/745\" rel=\"nofollow\">https://github.com/fastlane/fastlane/issues/745</a></p>\n"}, {"comments": [{"owner": {"reputation": 6486, "user_id": 1116230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55a894894150db28d6641f0c57e48bac?s=128&d=identicon&r=PG", "display_name": "Nico Haase", "link": "https://stackoverflow.com/users/1116230/nico-haase"}, "edited": false, "score": 2, "creation_date": 1583309935, "post_id": 60518491, "comment_id": 107068379, "body": "Please add some explanation to your answer by editing it, such that others can learn from it"}], "tags": [], "owner": {"reputation": 1403, "user_id": 6532225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62633e485505cc7354a6ded004742fce?s=128&d=identicon&r=PG&f=1", "display_name": "mistdon", "link": "https://stackoverflow.com/users/6532225/mistdon"}, "is_accepted": false, "score": 0, "last_activity_date": 1583291129, "creation_date": 1583291129, "answer_id": 60518491, "question_id": 35175276, "link": "https://stackoverflow.com/questions/35175276/broken-fastlane-installation-mix-ruby-versions/60518491#60518491", "title": "Broken Fastlane installation / mix Ruby versions", "body": "<p><code>sudo gem install -n /usr/local/bin fastlane</code></p>\n"}], "owner": {"reputation": 8766, "user_id": 511299, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2rafV.jpg?s=128&g=1", "display_name": "Sunkas", "link": "https://stackoverflow.com/users/511299/sunkas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3327, "favorite_count": 0, "accepted_answer_id": 35176001, "answer_count": 2, "score": 1, "last_activity_date": 1583291129, "creation_date": 1454497459, "question_id": 35175276, "link": "https://stackoverflow.com/questions/35175276/broken-fastlane-installation-mix-ruby-versions", "title": "Broken Fastlane installation / mix Ruby versions", "body": "<p>I'm quite new to ruby, gems and such but got fastlane installed and setup quite nicely. I then ran into this issue for deliver:</p>\n\n<p><a href=\"https://github.com/fastlane/deliver/issues/349\" rel=\"nofollow\">https://github.com/fastlane/deliver/issues/349</a></p>\n\n<p>I tried to update to the lastest version of fastlane but then ran into this issue:</p>\n\n<p><a href=\"https://github.com/fastlane/fastlane/issues/567\" rel=\"nofollow\">https://github.com/fastlane/fastlane/issues/567</a></p>\n\n<pre><code>ERROR: While executing gem ... (Errno::EPERM)\nOperation not permitted - /usr/bin/sigh\n</code></pre>\n\n<p>I tried the</p>\n\n<pre><code>gem update -n /usr/local/bin fastlane\ngem update -n /usr/local/bin sigh\ngem update -n /usr/local/bin deliver\n</code></pre>\n\n<p>without success. These only led me to this error:</p>\n\n<pre><code>Unable to activate deliver-1.9.0, because plist-3.2.0 conflicts with plist (~&gt; 3.1.0 ...\n</code></pre>\n\n<p>I also tried</p>\n\n<pre><code>sudo su\nsudo gem install fastlane --verbose\nexit\n</code></pre>\n\n<p>Without success. After that I tried to install bundler, a new ruby version and do cleanups and reinstalls. No success. Now everything seems to be in a bad state and trying to install fastlane with the normal command</p>\n\n<pre><code>install fastlane --verbose\n</code></pre>\n\n<p>leads to</p>\n\n<pre><code>You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory.\n</code></pre>\n\n<p>Same command with sudo gives:</p>\n\n<pre><code>/usr/local/lib/ruby/gems/2.3.0/gems/snapshot-1.6.0/lib/snapshot/version.rb\nERROR: While executing gem ... (TypeError)\nno implicit conversion of nil into String\n</code></pre>\n\n<p>What to do??</p>\n\n<p><code>ruby -v</code> gives me <code>ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin15]</code> and <code>echo $PATH</code> gives me <code>/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</code></p>\n"}, {"tags": ["ruby", "raspberry-pi", "raspbian", "mysql2", "dashing"], "comments": [{"owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 1, "creation_date": 1454498538, "post_id": 35175121, "comment_id": 58068366, "body": "Have you checked the mkmf.log file for more details?"}, {"owner": {"reputation": 23, "user_id": 5877413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9608e3828596beaef63621937b9adb09?s=128&d=identicon&r=PG&f=1", "display_name": "WuGGu", "link": "https://stackoverflow.com/users/5877413/wuggu"}, "reply_to_user": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 0, "creation_date": 1454502603, "post_id": 35175121, "comment_id": 58071143, "body": "Log tells me: error: \u2018rb_thread_blocking_region\u2019 undeclared (first use in this function)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5877413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9608e3828596beaef63621937b9adb09?s=128&d=identicon&r=PG&f=1", "display_name": "WuGGu", "link": "https://stackoverflow.com/users/5877413/wuggu"}, "edited": false, "score": 0, "creation_date": 1454675630, "post_id": 35177915, "comment_id": 58162587, "body": "Ok i updated to ruby 2.3 and try this but i get all the time: checking for rb_thread_blocking_region()... no"}], "tags": [], "owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "is_accepted": false, "score": 0, "last_activity_date": 1454522777, "last_edit_date": 1454522777, "creation_date": 1454504707, "answer_id": 35177915, "question_id": 35175121, "link": "https://stackoverflow.com/questions/35175121/gem-mysql2-on-raspberry-pi-ruby-2-2-4/35177915#35177915", "title": "gem mysql2 on Raspberry Pi Ruby 2.2.4", "body": "<p>It looks like there is a bug in the <em>mysql2</em> gem you're trying to install.</p>\n\n<p>Try install the previous stable version, <code>0.3.X</code></p>\n\n<pre><code>gem install mysql2 --platform=ruby -v '~&gt; 0.3.0'\n</code></pre>\n\n<p>If that doesn't work, try update your <em>Ruby</em> version.</p>\n\n<pre><code>sudo apt-get install ruby2.2\n</code></pre>\n\n<p>Or, if you can, upgrade</p>\n\n<pre><code>sudo apt-get install ruby2.3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2467, "user_id": 888715, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ee3d698e7783a4fda1a307695a2154b?s=128&d=identicon&r=PG", "display_name": "awiebe", "link": "https://stackoverflow.com/users/888715/awiebe"}, "is_accepted": false, "score": 0, "last_activity_date": 1518515446, "creation_date": 1518515446, "answer_id": 48763829, "question_id": 35175121, "link": "https://stackoverflow.com/questions/35175121/gem-mysql2-on-raspberry-pi-ruby-2-2-4/48763829#48763829", "title": "gem mysql2 on Raspberry Pi Ruby 2.2.4", "body": "<p>Install the raspbian specific package, before trying to get the gem this worked for me.</p>\n\n<pre><code>apt-get install ruby-mysql2\nruby new projectname -dmysql\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5848, "user_id": 1315142, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/096aeda8b6bb55757b0ca069f8cb8b30?s=128&d=identicon&r=PG", "display_name": "Ian Atkin", "link": "https://stackoverflow.com/users/1315142/ian-atkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1524366617, "creation_date": 1524366617, "answer_id": 49962142, "question_id": 35175121, "link": "https://stackoverflow.com/questions/35175121/gem-mysql2-on-raspberry-pi-ruby-2-2-4/49962142#49962142", "title": "gem mysql2 on Raspberry Pi Ruby 2.2.4", "body": "<p>I finally got around this error with the following:</p>\n\n<pre><code>apt-get install libmysql++-dev\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 2616317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59b0a26b2925bd0e11f49a37607ceae4?s=128&d=identicon&r=PG", "display_name": "Viktor Leonets", "link": "https://stackoverflow.com/users/2616317/viktor-leonets"}, "is_accepted": false, "score": 0, "last_activity_date": 1601854187, "creation_date": 1601854187, "answer_id": 64200834, "question_id": 35175121, "link": "https://stackoverflow.com/questions/35175121/gem-mysql2-on-raspberry-pi-ruby-2-2-4/64200834#64200834", "title": "gem mysql2 on Raspberry Pi Ruby 2.2.4", "body": "<p>you should</p>\n<pre><code>apt-get install libmariadbclient-dev\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5877413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9608e3828596beaef63621937b9adb09?s=128&d=identicon&r=PG&f=1", "display_name": "WuGGu", "link": "https://stackoverflow.com/users/5877413/wuggu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 900, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1601854187, "creation_date": 1454497005, "last_edit_date": 1454502704, "question_id": 35175121, "link": "https://stackoverflow.com/questions/35175121/gem-mysql2-on-raspberry-pi-ruby-2-2-4", "title": "gem mysql2 on Raspberry Pi Ruby 2.2.4", "body": "<p>i tried for a few weeks to install mysql2 for ruby so i can use it with dashing. But the only thing i get is:</p>\n\n<pre><code>    gem install mysql2 --platform=ruby -- '--with-mysql-dir=\"/usr/include/mysql\"'\nBuilding native extensions with: '--with-mysql-dir=\"/usr/include/mysql\"'\nThis could take a while...\nERROR:  Error installing mysql2:\n    ERROR: Failed to build gem native extension.\n\n    /usr/local/rvm/rubies/ruby-2.2.4/bin/ruby -r ./siteconf20160203-7890-abpifj.rb extconf.rb --with-mysql-dir=\"/usr/include/mysql\"\nchecking for ruby/thread.h... yes\nchecking for rb_thread_call_without_gvl() in ruby/thread.h... yes\nchecking for rb_thread_blocking_region()... no\nchecking for rb_wait_for_single_fd()... yes\nchecking for rb_hash_dup()... yes\nchecking for rb_intern3()... yes\n-----\nCannot find include dir(s) /usr/include/mysql/include\n-----\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/usr/local/rvm/rubies/ruby-2.2.4/bin/$(RUBY_BASE_NAME)\n    --with-mysql-dir\n    --with-mysql-include\n    --without-mysql-include=${mysql-dir}/include\n    --with-mysql-lib\n    --without-mysql-lib=${mysql-dir}/lib\n\nextconf failed, exit code 1\n\nGem files will remain installed in /usr/local/rvm/gems/ruby-2.2.4/gems/mysql2-0.4.2 for inspection.\nResults logged to /usr/local/rvm/gems/ruby-2.2.4/extensions/armv7l-linux/2.2.0/mysql2-0.4.2/gem_make.out\n</code></pre>\n\n<p>it is a Raspberry Pi 2 with Ruby 2.2.4 via RVM installed. </p>\n\n<p>libmysqlclient-dev is installed. </p>\n\n<p>mkmf.log tells me:</p>\n\n<pre><code>have_func: checking for rb_thread_blocking_region()... -------------------- no\n\n\"gcc -o conftest -I/usr/local/rvm/rubies/ruby-2.2.4/include/ruby-2.2.0/armv7l-linux-eabihf -I/usr/local/rvm/rubies/ruby-2.2.4/include/ruby-2.2.0/ruby/backward -I/usr/local/rvm/rubies/ruby-2.2.4/include/ruby-2.2.0 -I.  -D_FILE_OFFSET_BITS=64$\nconftest.c: In function \u2018t\u2019:\nconftest.c:13:57: error: \u2018rb_thread_blocking_region\u2019 undeclared (first use in this function)\nconftest.c:13:57: note: each undeclared identifier is reported only once for each function it appears in\nconftest.c:13:32: warning: variable \u2018p\u2019 set but not used [-Wunused-but-set-variable]\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 68, "user_id": 5458325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff29c81ba7bb188673912585b6ff3b2?s=128&d=identicon&r=PG&f=1", "display_name": "rhenvar", "link": "https://stackoverflow.com/users/5458325/rhenvar"}, "edited": false, "score": 0, "creation_date": 1454496342, "post_id": 35174820, "comment_id": 58066828, "body": "I forgot to add a semicolon after myEmail declaration, but it&#39;s there in my actual code"}], "answers": [{"comments": [{"owner": {"reputation": 68, "user_id": 5458325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff29c81ba7bb188673912585b6ff3b2?s=128&d=identicon&r=PG&f=1", "display_name": "rhenvar", "link": "https://stackoverflow.com/users/5458325/rhenvar"}, "edited": false, "score": 0, "creation_date": 1454497859, "post_id": 35175027, "comment_id": 58067885, "body": "Wouldn&#39;t I still need grab the @user.id in my .js to build the URL?"}, {"owner": {"reputation": 13353, "user_id": 69349, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/oyJIX.jpg?s=128&g=1", "display_name": "Ole Spaarmann", "link": "https://stackoverflow.com/users/69349/ole-spaarmann"}, "reply_to_user": {"reputation": 68, "user_id": 5458325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff29c81ba7bb188673912585b6ff3b2?s=128&d=identicon&r=PG&f=1", "display_name": "rhenvar", "link": "https://stackoverflow.com/users/5458325/rhenvar"}, "edited": false, "score": 0, "creation_date": 1454509038, "post_id": 35175027, "comment_id": 58075823, "body": "Well, that depends on what you are trying to do exactly. It is the same with a traditional html view. Here you also need to know the id before even being able to fetch the user from the database. So I don&#39;t really understand your question."}, {"owner": {"reputation": 6088, "user_id": 1983072, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/974c4e106b996fff51c25171e439b7b8?s=128&d=identicon&r=PG", "display_name": "bbozo", "link": "https://stackoverflow.com/users/1983072/bbozo"}, "edited": false, "score": 3, "creation_date": 1454529886, "post_id": 35175027, "comment_id": 58090253, "body": "Best skip an unnecessary HTTP call"}], "tags": [], "owner": {"reputation": 13353, "user_id": 69349, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/oyJIX.jpg?s=128&g=1", "display_name": "Ole Spaarmann", "link": "https://stackoverflow.com/users/69349/ole-spaarmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1454496713, "creation_date": 1454496713, "answer_id": 35175027, "question_id": 35174820, "link": "https://stackoverflow.com/questions/35174820/accessing-ruby-objects-in-javascript/35175027#35175027", "title": "Accessing Ruby objects in javascript", "body": "<p>Why not provide the data you need via a simple REST API and just request it with jQuery and then do with the result whatever you want?</p>\n\n<p>In your controller, for <code>GET /users/:id/</code></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n    def show\n        @user = User.find(params[:id])\n        render json: @user\n    end\nend\n</code></pre>\n\n<p>In jQuery:</p>\n\n<pre><code>$.getJSON( \"/users/1\", function( data ) {\n  // Do something with the retrieved data\n  console.log(data);\n  var myEmail = data[\"email\"];\n});\n</code></pre>\n\n<p>See also <a href=\"https://www.airpair.com/ruby-on-rails/posts/building-a-restful-api-in-a-rails-application\" rel=\"nofollow\">Building a RESTful API in a Rails Application</a></p>\n"}, {"comments": [{"owner": {"reputation": 133, "user_id": 577359, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/05f0340f0a06ac1e70d992956ebdf8d7?s=128&d=identicon&r=PG", "display_name": "v1p", "link": "https://stackoverflow.com/users/577359/v1p"}, "edited": false, "score": 0, "creation_date": 1454498267, "post_id": 35175493, "comment_id": 58068171, "body": "This should work. I usually follow similar approach when dealing with the data that needs to be rendered in front-end. There are couple other ways that I am aware of, but this sure is the simplest of them all. +1"}, {"owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "reply_to_user": {"reputation": 133, "user_id": 577359, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/05f0340f0a06ac1e70d992956ebdf8d7?s=128&d=identicon&r=PG", "display_name": "v1p", "link": "https://stackoverflow.com/users/577359/v1p"}, "edited": false, "score": 0, "creation_date": 1454498322, "post_id": 35175493, "comment_id": 58068208, "body": "@v1p and the one that requires the least effort since it&#39;s effectively a oneliner to convert a ruby AR object to a JS object usable in view ;)"}, {"owner": {"reputation": 68, "user_id": 5458325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff29c81ba7bb188673912585b6ff3b2?s=128&d=identicon&r=PG&f=1", "display_name": "rhenvar", "link": "https://stackoverflow.com/users/5458325/rhenvar"}, "edited": false, "score": 0, "creation_date": 1454498928, "post_id": 35175493, "comment_id": 58068622, "body": "This isn&#39;t what i was asking, I&#39;m already doing stuff like that here. (I had THAT problem a few weeks ago) my question was how to I extrapulate the content inside &lt;%= javascript_tag do %&gt; into a separate js file so it&#39;s less obtrusive (while still getting access to the @user from the initial GET request to show )"}, {"owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "reply_to_user": {"reputation": 68, "user_id": 5458325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff29c81ba7bb188673912585b6ff3b2?s=128&d=identicon&r=PG&f=1", "display_name": "rhenvar", "link": "https://stackoverflow.com/users/5458325/rhenvar"}, "edited": false, "score": 0, "creation_date": 1454499192, "post_id": 35175493, "comment_id": 58068794, "body": "@rhenvar, quote: &quot;My question is, is there a way I can <b>render this javascript</b> <i>or</i> <b>include it in a separate script tag</b> while maintaining the userdata?&quot; - this seems to be exactly what you&#39;re asking, I&#39;m just replying to the first option since it&#39;s the most simple solution, if this is indeed not what you&#39;re looking for then please specify what it is that you want exactly by editing your uestion"}, {"owner": {"reputation": 68, "user_id": 5458325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff29c81ba7bb188673912585b6ff3b2?s=128&d=identicon&r=PG&f=1", "display_name": "rhenvar", "link": "https://stackoverflow.com/users/5458325/rhenvar"}, "edited": false, "score": 0, "creation_date": 1454499669, "post_id": 35175493, "comment_id": 58069143, "body": "Sorry, I should have been clearer. What I meant was could I run that javascript without using the javascript_tag where i have to write raw javascript in the html.erb, I&#39;d like to write it in a separate file"}, {"owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "reply_to_user": {"reputation": 68, "user_id": 5458325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff29c81ba7bb188673912585b6ff3b2?s=128&d=identicon&r=PG&f=1", "display_name": "rhenvar", "link": "https://stackoverflow.com/users/5458325/rhenvar"}, "edited": false, "score": 0, "creation_date": 1454500720, "post_id": 35175493, "comment_id": 58069878, "body": "@rhenvar see updated answer, I hope this comes closer to what you are looking for. P.S. I don&#39;t normally work with ERB so I&#39;m not sure if the supplied code will actually run but this should be a matter of checking some errors while outputting."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1454500923, "post_id": 35175493, "comment_id": 58069992, "body": "No need to do the round-tripping. Just do <code>var user = &lt;%= @user.to_json %&gt;</code>. It&#39;s already a JSON string, will be parsed by JS engine."}, {"owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454501153, "post_id": 35175493, "comment_id": 58070116, "body": "@SergioTulentsev I&#39;m not sure I fully understand what you&#39;re saying here, this will render JSON in the variable <code>user</code> yes, but the OP also stated in a comment he wanted a cleaner solution to what he&#39;s using and also, JSON still has to be parsed to create a valid JS object to work with"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454501212, "post_id": 35175493, "comment_id": 58070170, "body": "Yes, it will be parsed by the JS engine when that javascript will be executed."}, {"owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454501290, "post_id": 35175493, "comment_id": 58070227, "body": "@SergioTulentsev ofcourse but you still have to change it from being a JSON string to a JS object to use for instance, <code>user.name</code> etc..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454501448, "post_id": 35175493, "comment_id": 58070341, "body": "Yes, that&#39;s what javascript engines do. BTW, your snippet will emit invalid code (<code>JSON.parse(&quot;&lt;%= @user.to_json %&gt;&quot;)</code>). You see, <code>.to_json</code> produces double-quoted strings, as dictated by the spec. The result will be <code>JSON.parse(&quot;{&quot;foo&quot;: &quot;bar&quot;}&quot;)</code>, which is not valid JS."}, {"owner": {"reputation": 68, "user_id": 5458325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff29c81ba7bb188673912585b6ff3b2?s=128&d=identicon&r=PG&f=1", "display_name": "rhenvar", "link": "https://stackoverflow.com/users/5458325/rhenvar"}, "edited": false, "score": 0, "creation_date": 1454501552, "post_id": 35175493, "comment_id": 58070406, "body": "This is exactly what I was looking for, thank you so much!"}, {"owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "reply_to_user": {"reputation": 68, "user_id": 5458325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff29c81ba7bb188673912585b6ff3b2?s=128&d=identicon&r=PG&f=1", "display_name": "rhenvar", "link": "https://stackoverflow.com/users/5458325/rhenvar"}, "edited": false, "score": 0, "creation_date": 1454501615, "post_id": 35175493, "comment_id": 58070452, "body": "@rhenvar, no problem - glad I could help! If anything is wrong please let me know."}, {"owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454501685, "post_id": 35175493, "comment_id": 58070515, "body": "@SergioTulentsev you&#39;re just plain wrong. You&#39;re failing to see that <code>JSON.parse</code> actually takes a string parameter which is <b>exactly</b> what the output of the code is. the <code>JSON.parse</code> function <i>then and only then</i> returns the <i>valid JS code</i> - read the docs please."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454501838, "post_id": 35175493, "comment_id": 58070623, "body": "Jeezus man, just try actually running your code, before accusing someone of something. <a href=\"http://pastie.org/10707040\" rel=\"nofollow noreferrer\">pastie.org/10707040</a>. Also, it wouldn&#39;t hurt to re-read on basics of ERB."}, {"owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454502072, "post_id": 35175493, "comment_id": 58070791, "body": "@SergioTulentsev I did note that I don&#39;t use ERB, hence the code can be faulty. Anyways - the OP&#39;s problem is solved here and when I get off work I&#39;ll make a working example using ERB - updating the answer that the code might not work when copy-pasted"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454502341, "post_id": 35175493, "comment_id": 58070971, "body": "@SidneyLiebrand: Actually, your other solution also won&#39;t work when copy-pasted."}, {"owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454503034, "post_id": 35175493, "comment_id": 58071446, "body": "@SergioTulentsev my comment clearly states that &#39;pasted code&#39; might not work, not any specific example - also I added to that that I&#39;ll be creating a working example as I get home which is in 6 hours - check back later. - Also, you&#39;re not using <code>to_json</code> on an AR object, If I do <code>@user = User.last</code> and then <code>@user.to_json</code> I get a perfectly fine JSON string. If you&#39;re going to critique atleast prove me wrong completely, this says nothing"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454503186, "post_id": 35175493, "comment_id": 58071548, "body": "Sure, If you could ping me after you update, it&#39;d be swell. :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454503284, "post_id": 35175493, "comment_id": 58071619, "body": "@SidneyLiebrand: to_json works the same way regardless of the original object type. a json string is a json string. Anyhow, I&#39;ll be waiting for your updated examples :)  Also, I don&#39;t even need to prove anything. Just run the code. It will prove you wrong."}, {"owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454503513, "post_id": 35175493, "comment_id": 58071797, "body": "@SergioTulentsev I will, the last bit of my comment was a bit harsh - sorry for that - anyways I&#39;ll keep you posted!"}, {"owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454530407, "post_id": 35175493, "comment_id": 58090572, "body": "@SergioTulentsev updated, My apologies for my ignorance :)"}, {"owner": {"reputation": 68, "user_id": 5458325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff29c81ba7bb188673912585b6ff3b2?s=128&d=identicon&r=PG&f=1", "display_name": "rhenvar", "link": "https://stackoverflow.com/users/5458325/rhenvar"}, "edited": false, "score": 0, "creation_date": 1454542427, "post_id": 35175493, "comment_id": 58096746, "body": "Thanks for hashing this out!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454575132, "post_id": 35175493, "comment_id": 58108658, "body": "@SidneyLiebrand: cool, apologies accepted :) However, now part of your answer doesn&#39;t make sense. The one where you&#39;re saying &quot;but you need JSON.parse for this or else it won&#39;t work&quot;. I suggest you clean this up, to not confuse future readers."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1454582569, "post_id": 35175493, "comment_id": 58113748, "body": "@SidneyLiebrand: you saw my PR, I take it? Also I was preparing pretty much the same edited post as you just did."}, {"owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1454582597, "post_id": 35175493, "comment_id": 58113769, "body": "@SergioTulentsev my god - I didn&#39;t even think of directly printing an object literal instead of parsing as JSON to convert it with JS. This solution is more efficient both on client and server side! I <b>FINALLY</b> understand what you mean :)"}, {"owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "edited": false, "score": 0, "creation_date": 1512472456, "post_id": 35175493, "comment_id": 82262537, "body": "Just came across this old gem of a comment chain, still beautiful to read as well :)"}], "tags": [], "owner": {"reputation": 4328, "user_id": 2224331, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bf7dd643098e950358cce533b70e2a1?s=128&d=identicon&r=PG", "display_name": "SidOfc", "link": "https://stackoverflow.com/users/2224331/sidofc"}, "is_accepted": true, "score": 4, "last_activity_date": 1512471971, "last_edit_date": 1512471971, "creation_date": 1454498009, "answer_id": 35175493, "question_id": 35174820, "link": "https://stackoverflow.com/questions/35174820/accessing-ruby-objects-in-javascript/35175493#35175493", "title": "Accessing Ruby objects in javascript", "body": "<p>03-02-2016 21:10: Alright, got a working example - Dibbz to <a href=\"https://stackoverflow.com/users/125816/sergio-tulentsev\">Sergio Tulentsev</a> - he was right, parsing to valid JSON isn't even required, when calling <code>.to_json</code> on a ruby object it will print a valid JS object literal instead. <strike>Here is the <a href=\"https://github.com/SidOfc/accessing-ruby-objects-in-js\" rel=\"nofollow noreferrer\">github repo</a> with working examples, if you'd like to clone it and use the code - feel free and have a nice day! (examples are built with Rails)</strike></p>\n\n<hr>\n\n<p>Aside from \u00d8le Bjarnstroem's answer which implies the use of AJAX, if you want to use a model in JS you could do something like this</p>\n\n<pre><code>&lt;% javascript_tag do %&gt;\n    var user = &lt;%= @user.to_json %&gt;;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Now the JS variable <code>user</code> holds all the properties that the model has as well since it simply converts the ruby object <strike>to JSON</strike> directly to a JS object.</p>\n\n<ul>\n<li><a href=\"http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html\" rel=\"nofollow noreferrer\">Rails <code>to_json</code></a></li>\n</ul>\n\n<h3>EDIT</h3>\n\n<p>As for not having to write the JS, you could create a helper for it - this would still inject the JS into your page but you could just supply an object as an argument to this function and then simply output that in your code with 1 call instead of doing the <code>javascript_tag do ... end</code> construct.</p>\n\n<p>There are multiple ways to go about with this, you could use Rails' <code>content_for</code> to set and get content that will be rendered in your head.</p>\n\n<p>e.g.</p>\n\n<p><strong>helper</strong></p>\n\n<pre><code>module myHelper\n\n    def obj_as_js_var(var_name, obj, content_name = nil)\n        output_tag = javascript_tag(\"var #{var_name} = #{obj.to_json};\".html_safe, type: 'text/javascript')\n        # if content_name is set, use content_for instead of directly printing the tag inline\n        if content_name\n            content_for content_name, output_tag\n        else\n            output_tag\n        end\n    end\nend\n</code></pre>\n\n<p>Now when using this helper in your view</p>\n\n<p><strong>view</strong></p>\n\n<pre><code>&lt;%= obj_as_js_var('user', @user) %&gt;\n# ... rest of page\n</code></pre>\n\n<p>Will render the same output on a single line, the first argument (<code>'user'</code> in this case) is the name the variable will have, the second argument (<code>@user</code>) will be converted to JSON.</p>\n\n<p><strong>But wait a moment...</strong> what If I want it in the <code>&lt;head&gt;</code> of the document?</p>\n\n<p>Well, the helper has an optional third argument which, if supplied will return the value of <code>content_for</code> and it will set the tag in the content.</p>\n\n<p>So if, in your <em>layout.erb</em> you have something like</p>\n\n<p><strong>layout</strong></p>\n\n<pre><code>&lt;head&gt;\n   &lt;!-- ... snipped --&gt;\n   &lt;%= content_for :javascript if content_for? :javascript %&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>You could use the following in your view instead (notice we're not rendering anything with <code>&lt;%=</code> but using <code>&lt;%</code> instead as we're saving the content for use in the <code>&lt;head&gt;</code>)</p>\n\n<pre><code>&lt;% obj_as_js_var('user', @user, :javascript) %&gt;\n</code></pre>\n\n<p>Now, the <code>content_for :javascript</code> in the head of your layout will render the output there, always. Note that if the content_for <code>:javascript</code> is loaded <em>after</em> the <em>application.js</em> then you won't have the data available there!</p>\n"}, {"tags": [], "owner": {"reputation": 1964, "user_id": 466309, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d77b242117e13b58249c4186e1388eee?s=128&d=identicon&r=PG", "display_name": "timeon", "link": "https://stackoverflow.com/users/466309/timeon"}, "is_accepted": false, "score": 2, "last_activity_date": 1512059762, "creation_date": 1512059762, "answer_id": 47578272, "question_id": 35174820, "link": "https://stackoverflow.com/questions/35174820/accessing-ruby-objects-in-javascript/47578272#47578272", "title": "Accessing Ruby objects in javascript", "body": "<pre><code>var user = &lt;%= @user.to_json.html_safe %&gt;;\n</code></pre>\n"}], "owner": {"reputation": 68, "user_id": 5458325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff29c81ba7bb188673912585b6ff3b2?s=128&d=identicon&r=PG&f=1", "display_name": "rhenvar", "link": "https://stackoverflow.com/users/5458325/rhenvar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4350, "favorite_count": 0, "accepted_answer_id": 35175493, "answer_count": 3, "score": 4, "last_activity_date": 1512471971, "creation_date": 1454496194, "last_edit_date": 1454497171, "question_id": 35174820, "link": "https://stackoverflow.com/questions/35174820/accessing-ruby-objects-in-javascript", "title": "Accessing Ruby objects in javascript", "body": "<p>I'm working on a rails app (4.1.8) that requires a lot of javascript in my show view, and I need a way to access data returned from ActiveRecord within the actual js file</p>\n\n<p>Here's an example:</p>\n\n<p>My Show controller</p>\n\n<pre><code>def show\n  @user = User.find(params[:id])\nend\n</code></pre>\n\n<p>now i need to access this data in my show javascript, but this is the only way i could do it:</p>\n\n<p>My Show view</p>\n\n<pre><code>&lt;%= javascript_tag do %&gt;\n    var myEmail = \"&lt;%= j @user.email %&gt;\";\n    // do stuff with myEmail\n&lt;% end %&gt;\n</code></pre>\n\n<p>My question is, is there a way I can render this javascript or include it in a separate script tag while maintaining the userdata? I don't want to have to write hundreds of lines of jQuery and js inside this javascript_tag and it's painful to debug. Everything I've tried so far (putting it in the asset pipeline, rendering a seperate .js.erb file) just turns myEmail into a string with the ruby statement inside it. Any ideas? Thanks in advance!</p>\n"}, {"tags": ["ruby", "puppet"], "answers": [{"tags": [], "owner": {"reputation": 4497, "user_id": 2417812, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b93b8e30afdedfaae41d81f412b9085e?s=128&d=identicon&r=PG", "display_name": "Peter Souter", "link": "https://stackoverflow.com/users/2417812/peter-souter"}, "is_accepted": true, "score": 6, "last_activity_date": 1454505548, "creation_date": 1454505548, "answer_id": 35178198, "question_id": 35174778, "link": "https://stackoverflow.com/questions/35174778/converting-variable-to-string-in-puppet/35178198#35178198", "title": "Converting variable to string in Puppet", "body": "<p>I'd recomend using the <a href=\"https://forge.puppetlabs.com/puppetlabs/stdlib#bool2str\">puppetlabs-stdlib</a> function for this:</p>\n\n<h2>bool2str</h2>\n\n<p>Converts a boolean to a string using optionally supplied arguments. The optional second and third arguments represent what true and false are converted to respectively. If only one argument is given, it is converted from a boolean to a string containing 'true' or 'false'.</p>\n\nExamples:\n\n<pre><code>bool2str(true)                    =&gt; 'true'\nbool2str(true, 'yes', 'no')       =&gt; 'yes'\nbool2str(false, 't', 'f')         =&gt; 'f'\nRequires a single boolean as input. Type: rvalue.\n</code></pre>\n"}], "owner": {"reputation": 220, "user_id": 4017424, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "minas", "link": "https://stackoverflow.com/users/4017424/minas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1846, "favorite_count": 0, "accepted_answer_id": 35178198, "answer_count": 1, "score": 3, "last_activity_date": 1454505548, "creation_date": 1454496088, "last_edit_date": 1454497002, "question_id": 35174778, "link": "https://stackoverflow.com/questions/35174778/converting-variable-to-string-in-puppet", "title": "Converting variable to string in Puppet", "body": "<p>Is it possible to convert <code>Boolean</code> variable to <code>String</code> in <code>Puppet</code>? I want to use it when replacing string. I can use conditional statement but maybe it is not necessary.</p>\n\n<pre><code>$variable = true\n$my_string = \"status _\"\n$string = regsubst($my_string, '_', $variable)\n</code></pre>\n\n<p>Something like this</p>\n"}, {"tags": ["ruby", "rspec", "sinatra", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1454526949, "post_id": 35174682, "comment_id": 58088414, "body": "Are you creating your own session? and if so did you pass your app to it -<code>Capybara::Session.new(:rack_test, Battle)</code>  - Capybara.app is only used if you&#39;re letting Capybara manage the sessions"}], "answers": [{"tags": [], "owner": {"reputation": 914, "user_id": 1612193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f21ef0b135d7399570b3679ce958fcbd?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/1612193/dani"}, "is_accepted": false, "score": 1, "last_activity_date": 1454533502, "last_edit_date": 1454533502, "creation_date": 1454504854, "answer_id": 35177959, "question_id": 35174682, "link": "https://stackoverflow.com/questions/35174682/sinatra-rspec-capybara-rack-test-requires-a-rack-application/35177959#35177959", "title": "Sinatra rspec capybara: &quot;rack test requires a rack application&quot;", "body": "<p>Have a look here:\n<a href=\"http://recipes.sinatrarb.com/p/testing/rspec\" rel=\"nofollow\">http://recipes.sinatrarb.com/p/testing/rspec</a></p>\n\n<p>It suggests, among other things, adding the following to your <code>spec_helper.rb</code>:</p>\n\n<pre><code>module RSpecMixin\n include Rack::Test::Methods\n def app() Sinatra::Application end\nend\n\nRSpec.configure do |config| \n  config.include RSpecMixin \nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5877253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b43a1013222de9f262d99e8a34b31302?s=128&d=identicon&r=PG&f=1", "display_name": "Russell Vaughan", "link": "https://stackoverflow.com/users/5877253/russell-vaughan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1706, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1454533502, "creation_date": 1454495844, "question_id": 35174682, "link": "https://stackoverflow.com/questions/35174682/sinatra-rspec-capybara-rack-test-requires-a-rack-application", "title": "Sinatra rspec capybara: &quot;rack test requires a rack application&quot;", "body": "<p>When running rspec to test a feature test using Sinatra Base, we are getting the following error. </p>\n\n<p>This is how our feature tests looks </p>\n\n<pre><code>require 'capybara/rspec'\n\n    feature 'Enter names' do\n      scenario 'submitting names' do\n      visit('/')\n      fill_in :player_1_name, with: 'Dave'\n      fill_in :player_2_name, with: 'Mittens'\n      click_button 'Submit'\n      expect(page).to have_content 'Dave vs. Mittens'\n      end\n      end\n</code></pre>\n\n<p>This is our Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n gem 'sinatra'\n gem 'rspec-sinatra'\n gem 'capybara'\n</code></pre>\n\n<p>error:</p>\n\n<pre><code> 1.1) Failure/Error: visit \"/\"\n      ArgumentError:\n        rack-test requires a rack application, but none was given\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara/rack_test/driver.rb:16:in `initialize'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara.rb:372:in `new'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara.rb:372:in `block in &lt;top (required)&gt;'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara/session.rb:79:in `call'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara/session.rb:79:in `driver'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara/session.rb:227:in `visit'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara/dsl.rb:51:in `block (2 levels) in &lt;module:DSL&gt;'\n      # ./spec/feature/feature_spec.rb:5:in `block (2 levels) in &lt;top (required)&gt;'\n\n 1.2) Failure/Error: Unable to find matching line from backtrace\n      ArgumentError:\n        rack-test requires a rack application, but none was given\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara/rack_test/driver.rb:16:in `initialize'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara.rb:372:in `new'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara.rb:372:in `block in &lt;top (required)&gt;'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara/session.rb:79:in `call'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara/session.rb:79:in `driver'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara/session.rb:103:in `reset!'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara.rb:257:in `block in reset_sessions!'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara.rb:257:in `each'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara.rb:257:in `reset_sessions!'\n      # /Users/Russell/.rvm/gems/ruby-2.2.3/gems/capybara-2.4.4/lib/capybara/rspec.rb:20:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>We've tried requiring the spec_helper file in our feature test, and also requiring our app.rb in the feature test and we get a different error saying it cannot load sinatra-base</p>\n\n<pre><code>Here is our spec_helper \n\nENV['RACK_ENV'] = 'test'\n\nrequire File.join(File.dirname(__FILE__), '..', 'app.rb')\n\nrequire 'capybara'\nrequire 'capybara/rspec'\nrequire 'rspec'\n\nCapybara.app = Battle\n\nRSpec.configure do |config|\nconfig.include Capybara::DSL\n\nconfig.expect_with :rspec do |expectations|\nexpectations.include_chain_clauses_in_custom_matcher_descriptions = true\nend\n\nconfig.mock_with :rspec do |mocks|\n\nmocks.verify_partial_doubles = true\nend\n\n\nend\n</code></pre>\n\n<p>Any direction would be massively appreciated. </p>\n\n<p>Thanks</p>\n\n<p>Russ</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1454496784, "post_id": 35174657, "comment_id": 58067137, "body": "Your code snippets are incomplete: they contain a <code>def</code> and a <code>do</code>, but only one <code>end</code>. It&#39;s unclear if <code>puts x</code> is within the loop or outside."}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 1, "creation_date": 1454497133, "post_id": 35174657, "comment_id": 58067395, "body": "If <code>x = 0</code> is missing, what do you expect for <code>x += 1</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1454505142, "last_edit_date": 1454505142, "creation_date": 1454496821, "answer_id": 35175068, "question_id": 35174657, "link": "https://stackoverflow.com/questions/35174657/ruby-add-sum-variable/35175068#35175068", "title": "Ruby add / sum variable", "body": "<p>In the second and third examples <code>x</code> has no value. Remember that: </p>\n\n<pre><code>x += number \n</code></pre>\n\n<p>is a shortening for: </p>\n\n<pre><code>x = x + number\n</code></pre>\n\n<p>so you're doing: </p>\n\n<pre><code>x = nil + number\n</code></pre>\n\n<p>and nil has no <code>:+</code> method.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1454498303, "post_id": 35175370, "comment_id": 58068193, "body": "Or <code>(1..10).sum</code> (the question was initially tagged with <a href=\"https://stackoverflow.com/questions/tagged/ruby-on-rails-4\">ruby-on-rails-4</a>)"}, {"owner": {"reputation": 1514, "user_id": 3749865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1873b0d2c86671bb1b3d44b53b48c09?s=128&d=identicon&r=PG", "display_name": "Christian Rolle", "link": "https://stackoverflow.com/users/3749865/christian-rolle"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1454498503, "post_id": 35175370, "comment_id": 58068349, "body": "Sorry. It is tagged with Ruby only. The examples are Ruby only and there seem to be no relation to Rails in any way."}, {"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1454499078, "post_id": 35175370, "comment_id": 58068722, "body": "Actually, OP tagged rails, and @YuHao removed the rails tag, which would&#39;ve made <code>.sum</code> valid. Either way, good answer."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1454499888, "post_id": 35175370, "comment_id": 58069292, "body": "I thought <code>inject</code> and <code>reduce</code> are synonyms for the same method?"}, {"owner": {"reputation": 1514, "user_id": 3749865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1873b0d2c86671bb1b3d44b53b48c09?s=128&d=identicon&r=PG", "display_name": "Christian Rolle", "link": "https://stackoverflow.com/users/3749865/christian-rolle"}, "edited": false, "score": 1, "creation_date": 1454500083, "post_id": 35175370, "comment_id": 58069422, "body": "They are. Maybe the answer is somewhat misleading. I&#39;ll edit."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1454500370, "post_id": 35175370, "comment_id": 58069614, "body": "typo: you have <code>reject</code> instead of <code>reduce</code>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1454501766, "post_id": 35175370, "comment_id": 58070568, "body": "The first parameter in the block is actually the <code>sum</code> so semantically your code is incorrect. It should be <code>{ |sum, number|  #code }</code>. You can see for example here <code>(2..5).reduce(25){ |sum,number| sum } #=&gt; 25</code> the initial sum. I think it&#39;s subtle but important.  `"}, {"owner": {"reputation": 97, "user_id": 5799625, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95862bbe704000b373a24d5828f0c3a1?s=128&d=identicon&r=PG&f=1", "display_name": "BerryGJS", "link": "https://stackoverflow.com/users/5799625/berrygjs"}, "edited": false, "score": 0, "creation_date": 1454504159, "post_id": 35175370, "comment_id": 58072242, "body": "thnx for all your very useful comments! I was assuming ruby(magic) would initialize x as a (local) variable upon introducing it. Not so, as it appears. Furthermore, I&#39;m using a similar piece of code within Ruby on Rails model and I&#39;m certainly going to try the <code>inject</code> or <code>reduce</code> methods."}], "tags": [], "owner": {"reputation": 1514, "user_id": 3749865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1873b0d2c86671bb1b3d44b53b48c09?s=128&d=identicon&r=PG", "display_name": "Christian Rolle", "link": "https://stackoverflow.com/users/3749865/christian-rolle"}, "is_accepted": true, "score": 3, "last_activity_date": 1454590806, "last_edit_date": 1454590806, "creation_date": 1454497686, "answer_id": 35175370, "question_id": 35174657, "link": "https://stackoverflow.com/questions/35174657/ruby-add-sum-variable/35175370#35175370", "title": "Ruby add / sum variable", "body": "<p>The difference why your first example works, is because you initialized x:</p>\n\n<pre><code>x = 0\n</code></pre>\n\n<p>whereas the last two example try to add 1 to nil in the first loop, which doesn't work, since nil has no method '+'.\nPlease consider, that your example is a bad implementation achieving the goal.\nA better solution is to use the accumulator approach. For example <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-inject\" rel=\"nofollow\">Enumerable#inject</a>:</p>\n\n<pre><code>(1..10).inject(0){ |sum, number| sum += number }\n</code></pre>\n\n<p>or even better:</p>\n\n<pre><code>(1..10).inject(:+)\n</code></pre>\n\n<p>which accumulates implicitly.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-reduce\" rel=\"nofollow\">Enumerable#reduce</a> works the same:</p>\n\n<pre><code>(1..10).reduce(:+)\n</code></pre>\n\n<p>For a better understanding, please go reading <a href=\"http://www.chrisrolle.com/blog/iterators-inject-and-reject\" rel=\"nofollow\">Iterators: inject and reject</a></p>\n"}], "owner": {"reputation": 97, "user_id": 5799625, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95862bbe704000b373a24d5828f0c3a1?s=128&d=identicon&r=PG&f=1", "display_name": "BerryGJS", "link": "https://stackoverflow.com/users/5799625/berrygjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2822, "favorite_count": 0, "accepted_answer_id": 35175370, "answer_count": 2, "score": -1, "last_activity_date": 1454590806, "creation_date": 1454495786, "last_edit_date": 1454507758, "question_id": 35174657, "link": "https://stackoverflow.com/questions/35174657/ruby-add-sum-variable", "title": "Ruby add / sum variable", "body": "<p>I'm looking for an explanation as to why this works:</p>\n\n<pre><code>def somesum\n  x = 0\n  (1..10).each do |number|\n    x += number\n  end\n  puts x\nend\n</code></pre>\n\n<p>whereas this does not work (undefined method '+' for nil class):</p>\n\n<pre><code>def somesum\n  (1..10).each do |number|\n    x += number\n  end\n  puts x\nend\n</code></pre>\n\n<p>neither does this:</p>\n\n<pre><code>def somesum\n  (1..10).each do |number, x|\n    x += number\n  end\n  puts x\nend\n</code></pre>\n"}, {"tags": ["ruby", "facebook", "facebook-graph-api"], "owner": {"reputation": 355, "user_id": 4423629, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3fa874ac0511f471b34d491c0b45c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "starwars25", "link": "https://stackoverflow.com/users/4423629/starwars25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1454494777, "creation_date": 1454494777, "question_id": 35174250, "link": "https://stackoverflow.com/questions/35174250/facebook-api-insights-issue", "title": "Facebook API Insights Issue", "body": "<p>I am developing web application that collects views data about Facebook Posts in video. The problem is that when I try to fetch views data, for example, <code>57460905720_10156493579175721/insights/post_video_complete_views_organic</code>,\nI get an empty <code>data</code> array.</p>\n\n<p>When I append <code>fields</code> parameter, like <code>?fields=description</code>, I get empty array too.</p>\n\n<p>How to get information about video views?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1454499672, "post_id": 35174179, "comment_id": 58069146, "body": "Are you doing this in the console?"}, {"owner": {"reputation": 31, "user_id": 5877165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f85007dbbe3eda0df8d82b10b13ee91e?s=128&d=identicon&r=PG&f=1", "display_name": "FriendlyFire", "link": "https://stackoverflow.com/users/5877165/friendlyfire"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1454500190, "post_id": 35174179, "comment_id": 58069493, "body": "you mean rails console? Yes"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1454500330, "post_id": 35174179, "comment_id": 58069585, "body": "Did you try reloading the console after the first error?"}, {"owner": {"reputation": 31, "user_id": 5877165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f85007dbbe3eda0df8d82b10b13ee91e?s=128&d=identicon&r=PG&f=1", "display_name": "FriendlyFire", "link": "https://stackoverflow.com/users/5877165/friendlyfire"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1454500409, "post_id": 35174179, "comment_id": 58069648, "body": "No I didn&#39;t, Also I have a test that throws this error after upgrading from 4.1.13 to 4.2.5"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1454500441, "post_id": 35174179, "comment_id": 58069675, "body": "Ok. Try reloading the console and tell me."}, {"owner": {"reputation": 914, "user_id": 1612193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f21ef0b135d7399570b3679ce958fcbd?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/1612193/dani"}, "edited": false, "score": 0, "creation_date": 1454500631, "post_id": 35174179, "comment_id": 58069816, "body": "I don&#39;t have a full explanation yet but it seems that the issue rises event before the reassignment, simply accessing the field after the invalid assignment raises the error again (<code>a.parameters = 3; a.parameters</code>)."}, {"owner": {"reputation": 31, "user_id": 5877165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f85007dbbe3eda0df8d82b10b13ee91e?s=128&d=identicon&r=PG&f=1", "display_name": "FriendlyFire", "link": "https://stackoverflow.com/users/5877165/friendlyfire"}, "edited": false, "score": 0, "creation_date": 1454500742, "post_id": 35174179, "comment_id": 58069894, "body": "When reload the console error still occur. After object reload error disappear!"}, {"owner": {"reputation": 31, "user_id": 5877165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f85007dbbe3eda0df8d82b10b13ee91e?s=128&d=identicon&r=PG&f=1", "display_name": "FriendlyFire", "link": "https://stackoverflow.com/users/5877165/friendlyfire"}, "reply_to_user": {"reputation": 914, "user_id": 1612193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f21ef0b135d7399570b3679ce958fcbd?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/1612193/dani"}, "edited": false, "score": 0, "creation_date": 1454501035, "post_id": 35174179, "comment_id": 58070054, "body": "@Dani even when you try to access object"}, {"owner": {"reputation": 914, "user_id": 1612193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f21ef0b135d7399570b3679ce958fcbd?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/1612193/dani"}, "edited": false, "score": 0, "creation_date": 1454501164, "post_id": 35174179, "comment_id": 58070125, "body": "@FriendlyFire, I didn&#39;t reload the console, so I can still access the object, but retrieving the serialized field throws the exception again, instead of producing <code>nil</code>."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 5877165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f85007dbbe3eda0df8d82b10b13ee91e?s=128&d=identicon&r=PG&f=1", "display_name": "FriendlyFire", "link": "https://stackoverflow.com/users/5877165/friendlyfire"}, "is_accepted": false, "score": 0, "last_activity_date": 1454579162, "creation_date": 1454579162, "answer_id": 35197537, "question_id": 35174179, "link": "https://stackoverflow.com/questions/35174179/rails-4-2-5-reassign-value-to-serialized-field-after-serializationtypemismatch/35197537#35197537", "title": "Rails 4.2.5 reassign value to serialized field after SerializationTypeMismatch", "body": "<p>Got the answer from Rails team\n<a href=\"https://github.com/rails/rails/issues/23449\" rel=\"nofollow\">https://github.com/rails/rails/issues/23449</a></p>\n"}], "owner": {"reputation": 31, "user_id": 5877165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f85007dbbe3eda0df8d82b10b13ee91e?s=128&d=identicon&r=PG&f=1", "display_name": "FriendlyFire", "link": "https://stackoverflow.com/users/5877165/friendlyfire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1454579162, "creation_date": 1454494626, "last_edit_date": 1454501912, "question_id": 35174179, "link": "https://stackoverflow.com/questions/35174179/rails-4-2-5-reassign-value-to-serialized-field-after-serializationtypemismatch", "title": "Rails 4.2.5 reassign value to serialized field after SerializationTypeMismatch", "body": "<p>I have a serialized column</p>\n\n<pre><code>class TestSerialize &lt; ActiveRecord::Base\n  serialize :parameters, Array\nend\n</code></pre>\n\n<p>When I tried to assign String</p>\n\n<pre><code>a = TestSerialize.new\na.parameters = \"inappropriate type\"\n</code></pre>\n\n<p>as expected I got</p>\n\n<pre><code>ActiveRecord::SerializationTypeMismatch:Attribute was supposed to be a Array, but was a String. -- \"inappropriate type\".\n</code></pre>\n\n<p>But when I tried to reassign \"parameters\" field, I still got the same error with the previous assigned value </p>\n\n<pre><code>a.parameters = []\nActiveRecord::SerializationTypeMismatch: Attribute was supposed to be a Array, but was a String. -- \"inappropriate type\"\n</code></pre>\n\n<p>Is it expected behaviour?</p>\n\n<pre><code>2.2.3 :003 &gt; a = TestSerialize.new\n =&gt; #&lt;TestSerialize id: nil, parameters: [], first_name: {}, last_name: \"\", created_at: nil, updated_at: nil&gt; \n2.2.3 :004 &gt; a.parameters\n =&gt; [] \n2.2.3 :005 &gt; a.parameters = \"test\"\nActiveRecord::SerializationTypeMismatch: Attribute was supposed to be a Array, but was a String. -- \"test\"\n\n2.2.3 :006 &gt; a\nActiveRecord::SerializationTypeMismatch: Attribute was supposed to be a Array, but was a String. -- \"test\"\n\n2.2.3 :007 &gt; a.parameters\nActiveRecord::SerializationTypeMismatch: Attribute was supposed to be a Array, but was a String. -- \"test\"\n\n2.2.3 :008 &gt; a.first_name\n =&gt; {} \n\n2.2.3 :009 &gt; reload!\nReloading...\n =&gt; true \n2.2.3 :010 &gt; a\nActiveRecord::SerializationTypeMismatch: Attribute was supposed to be a Array, but was a String. -- \"test\"\n</code></pre>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "edited": false, "score": 2, "creation_date": 1454492520, "post_id": 35173295, "comment_id": 58064135, "body": "What happened when you tried running the above code?"}, {"owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "edited": false, "score": 3, "creation_date": 1454494787, "post_id": 35173295, "comment_id": 58065768, "body": "Also keep in mind that in Ruby you can set default values for a hash using <code>myHash = Hash.new(&#39;free&#39;)&#39;</code>. It might not be what you need in this case, but it is good to know."}, {"owner": {"reputation": 1757, "user_id": 5766404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Scz0L.png?s=128&g=1", "display_name": "bogl", "link": "https://stackoverflow.com/users/5766404/bogl"}, "edited": false, "score": 0, "creation_date": 1454495805, "post_id": 35173295, "comment_id": 58066424, "body": "@SCraig If your keys are integers, why would you like to use a Hash in the first place instead of an Array?"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 3, "last_activity_date": 1454492922, "creation_date": 1454492922, "answer_id": 35173512, "question_id": 35173295, "link": "https://stackoverflow.com/questions/35173295/is-it-possible-to-populate-a-hash-using-a-for-loop/35173512#35173512", "title": "Is it possible to populate a hash using a `for` loop?", "body": "<p>Your hash is called myHash, not hash. Then, in Ruby we use each, not for. And your variable should be my_hash, not myHash. Also, you missed the end keyword for your for. So:</p>\n\n<pre><code>my_hash = Hash.new\n(1..18).each { |index| my_hash[index] = \"free\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 5, "last_activity_date": 1454493990, "last_edit_date": 1454493990, "creation_date": 1454493222, "answer_id": 35173628, "question_id": 35173295, "link": "https://stackoverflow.com/questions/35173295/is-it-possible-to-populate-a-hash-using-a-for-loop/35173628#35173628", "title": "Is it possible to populate a hash using a `for` loop?", "body": "<p><a href=\"http://ruby-doc.org/core-2.3.0/doc/syntax/control_expressions_rdoc.html#label-for+Loop\" rel=\"nofollow\"><code>for</code> loops</a> are rarely used. I would suggest <a href=\"http://ruby-doc.org/core-2.3.0/Range.html#method-i-each\" rel=\"nofollow\"><code>each</code></a>:</p>\n\n<pre><code>hash = {}\n(1..18).each { |i| hash[i] = 'free' }\nhash\n#=&gt; { 1=&gt;\"free\",  2=&gt;\"free\",  3=&gt;\"free\",  4=&gt;\"free\",  5=&gt;\"free\",  6=&gt;\"free\",\n#     7=&gt;\"free\",  8=&gt;\"free\",  9=&gt;\"free\", 10=&gt;\"free\", 11=&gt;\"free\", 12=&gt;\"free\",\n#    13=&gt;\"free\", 14=&gt;\"free\", 15=&gt;\"free\", 16=&gt;\"free\", 17=&gt;\"free\", 18=&gt;\"free\"}\n</code></pre>\n\n<p>You can also pass the initial object - i.e. the empty hash - into the loop using <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-each_with_object\" rel=\"nofollow\"><code>each_with_object</code></a>:</p>\n\n<pre><code>hash = (1..18).each_with_object({}) { |i, h| h[i] = 'free' }\n</code></pre>\n\n<p>Within the block, the second argument <code>h</code> refers to the passed-in hash, so it can be modified. At the end, <code>each_with_object</code> returns the filled hash.</p>\n\n<p>Another option is to use <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-map\" rel=\"nofollow\"><code>map</code></a>:</p>\n\n<pre><code>hash = (1..18).map { |i| [i, 'free'] }.to_h\n</code></pre>\n\n<p>This builds an intermediate array <code>[[1, 'free'], [2, 'free'], ...]</code> and converts it to a hash afterwards using <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-to_h\" rel=\"nofollow\"><code>Array#to_h</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1454494768, "post_id": 35173652, "comment_id": 58065752, "body": "Well, a <code>SyntaxError</code> is preventing your code from running."}], "tags": [], "owner": {"reputation": 516, "user_id": 2779976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SiQtD.jpg?s=128&g=1", "display_name": "Awais Shafqat", "link": "https://stackoverflow.com/users/2779976/awais-shafqat"}, "is_accepted": false, "score": -2, "last_activity_date": 1454507746, "last_edit_date": 1454507746, "creation_date": 1454493286, "answer_id": 35173652, "question_id": 35173295, "link": "https://stackoverflow.com/questions/35173295/is-it-possible-to-populate-a-hash-using-a-for-loop/35173652#35173652", "title": "Is it possible to populate a hash using a `for` loop?", "body": "<p>Yes. This is possible, but your question doesn't make sense. You must have some array as below. There are a number of advanced solutions for this. But for beginner, I would give you this solution.  </p>\n\n<pre><code>a =[\"first\",\"second\",\"third\",......]\nh = Hash.new\na.each_with_index do |value,index|\n  h.merge{index =&gt; value}\nend\n</code></pre>\n\n<p>This would create a complete hash for you.</p>\n"}, {"tags": [], "owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "is_accepted": false, "score": 0, "last_activity_date": 1454494142, "creation_date": 1454494142, "answer_id": 35173979, "question_id": 35173295, "link": "https://stackoverflow.com/questions/35173295/is-it-possible-to-populate-a-hash-using-a-for-loop/35173979#35173979", "title": "Is it possible to populate a hash using a `for` loop?", "body": "<p>I'm not sure exactly what you are trying to do here, but I've found a method in the Hash documentation (ruby-doc.org/core-2.2.0/Hash.html) which might be helpful here.</p>\n\n<p>It looks like you're trying to make a hash return the string 'free' when you haven't defined a value.</p>\n\n<p>As you know, when you recall a key in a hash which has not been defined, it returns nil:</p>\n\n<pre><code>h = {:foo =&gt; bar}\nh[:baz]\n# nil\n</code></pre>\n\n<p>You can change the default result of an unknown key using #default</p>\n\n<pre><code>h = {1 =&gt; 'Cat', 2 =&gt; 'Dog'}\nh.default = 'Free'\nh[1]\n# 'Cat'\nh[4]\n# 'Free'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2183, "user_id": 1200043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tr7dt.jpg?s=128&g=1", "display_name": "maniacalrobot", "link": "https://stackoverflow.com/users/1200043/maniacalrobot"}, "reply_to_user": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1454496418, "post_id": 35174278, "comment_id": 58066892, "body": "I&#39;ve updated the code example to assign the hash, as well as added a few variations on the method"}], "tags": [], "owner": {"reputation": 2183, "user_id": 1200043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tr7dt.jpg?s=128&g=1", "display_name": "maniacalrobot", "link": "https://stackoverflow.com/users/1200043/maniacalrobot"}, "is_accepted": false, "score": 2, "last_activity_date": 1454496130, "last_edit_date": 1454496130, "creation_date": 1454494843, "answer_id": 35174278, "question_id": 35173295, "link": "https://stackoverflow.com/questions/35173295/is-it-possible-to-populate-a-hash-using-a-for-loop/35174278#35174278", "title": "Is it possible to populate a hash using a `for` loop?", "body": "<p>Here's a super quick one liner that doesn't require you manually loop, initialising an array with a count will set the size of the array to this, and apply the block to each index. <code>Hash[]</code> will then take the array (of arrays) and convert it to a hash. <code>i</code> will be zero based, so you need to use <code>i+1</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>my_hash = Hash[Array.new(18) { |i| [i+1, \"free\"] }] # Pure Ruby\nmy_hash = Array.new(18) { |i| [i+1, \"free\"] }.to_hash # Only works in Rails\nmy_hash = Array.new(18) { |i| [i+1, \"free\"] }.to_h # Only works in Ruby 2.3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1454498097, "post_id": 35174561, "comment_id": 58068054, "body": "A smarter Ruby would add <code>did you mean: `myHash&#39;?</code> to the error message."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1454495590, "creation_date": 1454495590, "answer_id": 35174561, "question_id": 35173295, "link": "https://stackoverflow.com/questions/35173295/is-it-possible-to-populate-a-hash-using-a-for-loop/35174561#35174561", "title": "Is it possible to populate a hash using a `for` loop?", "body": "<pre><code>myHash = Hash.new\nfor i in 1..18\nmyhash[i] = \"free\"\n</code></pre>\n\n<p>Well, just run it. It results in an error: <code>syntax error, unexpected end-of-input, expecting keyword_end</code>. Ah yes, a missing <code>end</code>. Let's add indentation, so we can see what's inside the loop and what is not. </p>\n\n<pre><code>myHash = Hash.new\nfor i in 1..18\n  myhash[i] = \"free\"\nend\n</code></pre>\n\n<p>Another error: <code>in 'block in &lt;main&gt;': undefined local variable or method 'myhash' for main:Object (NameError)</code>. Ruby says it doesn't know <code>myhash</code>. Stupid Ruby. <code>myhash</code> is a Hash, we said so on the first line. Oh wait... we named it <code>myHash</code>, not <code>myhash</code>.</p>\n\n<pre><code>myHash = Hash.new\nfor i in 1..18\n  myHash[i] = \"free\"\nend\n</code></pre>\n\n<p>Run it: no errors, no output at all. Add one line to inspect <code>myHash</code>:</p>\n\n<pre><code>myHash = Hash.new\nfor i in 1..18\n  myHash[i] = \"free\"\nend\np myHash\n</code></pre>\n\n<p>And there it is, myHash: <code>{1=&gt;\"free\", 2=&gt;\"free\", 3=&gt;\"free\", 4=&gt;\"free\", 5=&gt;\"free\", 6=&gt;\"free\", 7=&gt;\"free\", 8=&gt;\"free\", 9=&gt;\"free\", 10=&gt;\"free\", 11=&gt;\"free\", 12=&gt;\"free\", 13=&gt;\"free\", 14=&gt;\"free\", 15=&gt;\"free\", 16=&gt;\"free\", 17=&gt;\"free\", 18=&gt;\"free\"}</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1454510262, "creation_date": 1454510262, "answer_id": 35179935, "question_id": 35173295, "link": "https://stackoverflow.com/questions/35173295/is-it-possible-to-populate-a-hash-using-a-for-loop/35179935#35179935", "title": "Is it possible to populate a hash using a `for` loop?", "body": "<p>One more way:</p>\n\n<pre><code>([*1..18].product [\"free\"]).to_h\n</code></pre>\n"}], "owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3546, "favorite_count": 0, "accepted_answer_id": 35173628, "answer_count": 7, "score": -2, "last_activity_date": 1454510262, "creation_date": 1454492334, "last_edit_date": 1454507446, "question_id": 35173295, "link": "https://stackoverflow.com/questions/35173295/is-it-possible-to-populate-a-hash-using-a-for-loop", "title": "Is it possible to populate a hash using a `for` loop?", "body": "<p>I want a hash that holds ints from 1 to 18 as the keys. I want the hash to look like this:</p>\n\n<pre><code>myHash = Hash.new\nmyHash[1] = \"free\"\nmyHash[2] = \"free\"\n...\nmyHash[18] = \"free\"\n</code></pre>\n\n<p>I want to know if there's a nicer way to do this, such as using a <code>for</code> loop. Will something like:</p>\n\n<pre><code>myHash = Hash.new\nfor i in 1..18\nmyHash[i] = \"free\"\n</code></pre>\n\n<p>work, or will it just create 18 keys called <code>i</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "edited": false, "score": 0, "creation_date": 1454493344, "post_id": 35173268, "comment_id": 58064717, "body": "For <code>v = BigDecimal(&quot;28.00&quot;)</code> <code>sprintf(&quot;%.2f&quot;, v)</code> should give <code>28.00</code>"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "reply_to_user": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "edited": false, "score": 0, "creation_date": 1454493645, "post_id": 35173268, "comment_id": 58064933, "body": "Thanks again @eugen .. Works great. where would i find the documentation that explains all the options like <code>%.2f</code> ?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1454494288, "post_id": 35173268, "comment_id": 58065396, "body": "<code>BigDecimal.new(&quot;28.99&quot;).to_s</code> returns <code>&quot;0.2899E2&quot;</code> on my system"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1454495183, "post_id": 35173268, "comment_id": 58066028, "body": "Never mind, Rails is patching <code>BigDecimal#to_s</code>, of course ..."}], "answers": [{"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 1, "creation_date": 1454494333, "post_id": 35174008, "comment_id": 58065431, "body": "<code>number_with_precision</code> :-)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 1, "creation_date": 1454494527, "post_id": 35174008, "comment_id": 58065582, "body": "@Richlewis for amounts, there&#39;s also <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_currency\" rel=\"nofollow noreferrer\"><code>number_to_currenc</code></a> and you should check out <a href=\"https://github.com/RubyMoney/money-rails\" rel=\"nofollow noreferrer\">money-rails</a>"}], "tags": [], "owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "is_accepted": true, "score": 3, "last_activity_date": 1454494201, "creation_date": 1454494201, "answer_id": 35174008, "question_id": 35173268, "link": "https://stackoverflow.com/questions/35173268/handling-bigdecimal-trailing-zeros-ruby/35174008#35174008", "title": "Handling BigDecimal trailing zero&#39;s Ruby", "body": "<p><code>sprintf(\"%2.f\", v)</code> should work. The options for <code>sprintf</code> can be found at</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.3.0/Kernel.html#method-i-sprintf\" rel=\"nofollow\">http://ruby-doc.org/core-2.3.0/Kernel.html#method-i-sprintf</a></p>\n\n<p>Also, if you're using Rails, the <code>number_with_precision</code> helper is probably easier to use - you can find the documentation at <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_with_precision\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_with_precision</a></p>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 819, "favorite_count": 1, "accepted_answer_id": 35174008, "answer_count": 1, "score": 3, "last_activity_date": 1454494341, "creation_date": 1454492277, "last_edit_date": 1495535304, "question_id": 35173268, "link": "https://stackoverflow.com/questions/35173268/handling-bigdecimal-trailing-zeros-ruby", "title": "Handling BigDecimal trailing zero&#39;s Ruby", "body": "<p>I am using <code>BigDecimal</code> values in my app as there are calculations to be made for goods in a shopping cart, I read that <code>BigDecimal</code> is preferred for this, compared to say integers or floats?</p>\n\n<p>There is one scenario which I would like to address. When I have this for example</p>\n\n<pre><code>amount = BigDecimal.new(\"28.99\")\namount      #=&gt; #&lt;BigDecimal:51d3120,'0.2899E2',18(18)&gt;\namount.to_s #=&gt; \"28.99\"\namount.to_f #=&gt; 28.99\n</code></pre>\n\n<p>Which so far is expected behavior but when I do the following</p>\n\n<pre><code>amount = BigDecimal.new(\"28.00\") || amount = BigDecimal.new(\"28\") \namount.to_s #=&gt; \"28.0\"\namount.to_f #=&gt; 28.0\n</code></pre>\n\n<p>Is this intended behavior ? In my db I have set the scale and precision</p>\n\n<pre><code>t.decimal :price, precision: 30, scale: 2\n</code></pre>\n\n<p>When I have a value of <code>28.00</code> saved in the database I would like to show in my view <code>28.00</code> and not <code>28.0</code></p>\n\n<p>Update</p>\n\n<p>Just come across this post on SO <a href=\"https://stackoverflow.com/questions/24892378/how-to-convert-a-ruby-bigdecimal-to-a-2-decimal-place-string\">How to convert a ruby BigDecimal to a 2-decimal place string?</a> the solution being </p>\n\n<pre><code>v = BigDecimal(\"28.00\")\nv.truncate.to_s + '.' + sprintf('%02d', (v.frac * 100).truncate)\n</code></pre>\n\n<p>I guess this is the only way to handle it ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler", "gem-fury"], "answers": [{"comments": [{"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1454491995, "post_id": 35173120, "comment_id": 58063754, "body": "It doesn&#39;t work, since in the latest bundler versions you cannot specify a gem more than one time inside a <code>Gemfile</code>."}, {"owner": {"reputation": 2401, "user_id": 2208682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49fac145ccb00fbe71298cf953cbd43b?s=128&d=identicon&r=PG", "display_name": "GoGoCarl", "link": "https://stackoverflow.com/users/2208682/gogocarl"}, "reply_to_user": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1454620032, "post_id": 35173120, "comment_id": 58138416, "body": "Ah, you are right!  Sorry about that.  Ok, perhaps try the above.  It&#39;s kind of annoying and hack-ish, but it should do the job."}, {"owner": {"reputation": 2401, "user_id": 2208682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49fac145ccb00fbe71298cf953cbd43b?s=128&d=identicon&r=PG", "display_name": "GoGoCarl", "link": "https://stackoverflow.com/users/2208682/gogocarl"}, "reply_to_user": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1454620083, "post_id": 35173120, "comment_id": 58138446, "body": "I will note that I have the same issue as you in one of my projects, and I just find it easier to edit the file manually while I am working locally."}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1454666775, "post_id": 35173120, "comment_id": 58156745, "body": "I can edit it, but it&#39;s both cumbersome and error prone, since you might commit the local path with the Gemfile."}], "tags": [], "owner": {"reputation": 2401, "user_id": 2208682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49fac145ccb00fbe71298cf953cbd43b?s=128&d=identicon&r=PG", "display_name": "GoGoCarl", "link": "https://stackoverflow.com/users/2208682/gogocarl"}, "is_accepted": false, "score": 2, "last_activity_date": 1454619992, "last_edit_date": 1454619992, "creation_date": 1454491876, "answer_id": 35173120, "question_id": 35172874, "link": "https://stackoverflow.com/questions/35172874/gemfile-use-local-path-in-development-and-gemfury-source-in-production/35173120#35173120", "title": "Gemfile use local path in development and Gemfury source in production", "body": "<pre><code>if ENV['RAILS_ENV'] == 'development' \n  gem 'your_gem', path: '/path/to/gem'\nelse\n  gem 'your_gem'\nend\n</code></pre>\n\n<p>Then, locally, run</p>\n\n<pre><code>RAILS_ENV=development bundle install\n</code></pre>\n\n<p>It's a hack, for sure, but then again, so is all of this :)</p>\n"}], "owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454619992, "creation_date": 1454491166, "question_id": 35172874, "link": "https://stackoverflow.com/questions/35172874/gemfile-use-local-path-in-development-and-gemfury-source-in-production", "title": "Gemfile use local path in development and Gemfury source in production", "body": "<p>I am developing both an app and a gem for it. The gem will be available from Gemfury when the app will be in production. But while developing, I would like to use the local path of the gem, so that I can modify both the gem and the app and see changes faster. How can I do this?</p>\n\n<p>I know there is <code>bundle config local.GEM GEM_PATH</code>, but this only works for git sources, not for Gemfury.</p>\n\n<p>I can set an env var and conditionally specify gems in the <code>Gemfile</code>, but I hope there is a better approach to this.</p>\n"}, {"tags": ["ruby", "lita"], "answers": [{"comments": [{"owner": {"reputation": 90, "user_id": 4985707, "user_type": "registered", "profile_image": "https://graph.facebook.com/993366030683226/picture?type=large", "display_name": "Daniel Eder", "link": "https://stackoverflow.com/users/4985707/daniel-eder"}, "edited": false, "score": 0, "creation_date": 1455894027, "post_id": 35504230, "comment_id": 58707600, "body": "This seems to be the case. For my use case I resorted to registering different rooms via a command and only send to those rooms that registered for my plugin. Still thanks for your reply!"}], "tags": [], "owner": {"reputation": 31241, "user_id": 242493, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8893e2e206c0377ff776d2535887d23f?s=128&d=identicon&r=PG", "display_name": "Jimmy Cuadra", "link": "https://stackoverflow.com/users/242493/jimmy-cuadra"}, "is_accepted": true, "score": 0, "last_activity_date": 1455881359, "creation_date": 1455881359, "answer_id": 35504230, "question_id": 35172824, "link": "https://stackoverflow.com/questions/35172824/lita-io-handler-plugin-how-to-get-a-list-of-all-joined-rooms/35504230#35504230", "title": "Lita.io Handler Plugin - How to get a list of all joined rooms", "body": "<p>Currently there is not a generic way to do this. The adapter would have to expose an adapter-specific API for it.</p>\n"}], "owner": {"reputation": 90, "user_id": 4985707, "user_type": "registered", "profile_image": "https://graph.facebook.com/993366030683226/picture?type=large", "display_name": "Daniel Eder", "link": "https://stackoverflow.com/users/4985707/daniel-eder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 35504230, "answer_count": 1, "score": 0, "last_activity_date": 1455881359, "creation_date": 1454491037, "question_id": 35172824, "link": "https://stackoverflow.com/questions/35172824/lita-io-handler-plugin-how-to-get-a-list-of-all-joined-rooms", "title": "Lita.io Handler Plugin - How to get a list of all joined rooms", "body": "<p>I am in the process of writing a Handler Plugin for lita.io. What I want to do is provide a HTTP POST endpoint and when it is called I want to publish some chat message to all rooms that Lita has joined.</p>\n\n<p>I already succeeded with posting to a specific room that is identified as parameter in the HTTP call doing it like this:</p>\n\n<pre><code>def receive(request, response)\nroom = request.params['room']\n    Lita.logger.debug(\"stash-post-receive: room = #{room}\")\n    target = Source.new(room: room)\n    json_data = parse_json(request.body.read) or return\n    message = format_message(json_data)\n    robot.send_message(target, message)\nend\n</code></pre>\n\n<p>But this requires the caller to already supply which room to post to. Is there a way to retrieve a list of all rooms that Lita has joined so I can post there?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "routing", "ruby-on-rails-3.2"], "answers": [{"tags": [], "owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "is_accepted": true, "score": 0, "last_activity_date": 1454762886, "creation_date": 1454762886, "answer_id": 35241187, "question_id": 35172815, "link": "https://stackoverflow.com/questions/35172815/sometimes-getting-uninitialized-constant-devisecustomdevise/35241187#35241187", "title": "Sometimes getting uninitialized constant Devise::CustomDevise", "body": "<p>Changing routes from <code>devise/custom_devise/registrations</code> to <code>custom_devise/registrations</code> and same for <code>confirmations</code> did the trick.</p>\n"}], "owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 35241187, "answer_count": 1, "score": 0, "last_activity_date": 1454762886, "creation_date": 1454491017, "last_edit_date": 1454500823, "question_id": 35172815, "link": "https://stackoverflow.com/questions/35172815/sometimes-getting-uninitialized-constant-devisecustomdevise", "title": "Sometimes getting uninitialized constant Devise::CustomDevise", "body": "<p>I've customized the <code>registrations_controller.rb</code> and <code>confirmations_controller</code> of <code>devise</code>. And these controllers resides under custom_devise folder.</p>\n\n<p>Sometimes my Registration and Confirmation works fine but sometimes it is showing <code>uninitialized constant Devise::CustomDevise</code> Routing error.</p>\n\n<p>And a strange fix is whenever I edit <code>routes.rb</code> the error goes away (without actually adding anything in <code>routes.rb</code>).</p>\n\n<p>My <code>routes.rb</code> for Devise:</p>\n\n<pre><code>devise_scope :user do\n  scope :module =&gt; \"custom_devise\" do\n    match 'company_user/complete_profile' =&gt; 'confirmations#complete_profile', via: :get\n  end\nend\n\ndevise_for :users, path_names: {sign_in: \"login\", sign_out: \"logout\"},\n           :controllers =&gt; { :registrations =&gt; \"devise/custom_devise/registrations\",\n                             :confirmations =&gt; \"devise/custom_devise/confirmations\"\n                           }\n</code></pre>\n\n<p>I'm using below devise modules:</p>\n\n<pre><code>devise :database_authenticatable, :registerable, :confirmable,\n     :recoverable, :rememberable, :trackable, :validatable\n</code></pre>\n\n<p>P.S: I have checked around all similar answers in SO but none is helpful for me. So please comment before making this question duplicate.:)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "prawn"], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1454488472, "creation_date": 1454488472, "answer_id": 35172022, "question_id": 35171826, "link": "https://stackoverflow.com/questions/35171826/prawn-cant-find-locally-stored-image/35172022#35172022", "title": "Prawn can&#39;t find locally stored image", "body": "<p><code>Rails.root</code> gives you the file path where your rails application is located on the file system - this has nothing to do with the URL to a file. You should instead rewrite your <code>.cover_url</code> to provide and absolute URL and create a <code>.cover_path</code> method which outputs a relative path. (This is more consistent with the way path and asset helpers work in rails.)</p>\n\n<p>If your image is available through the assets pipeline you would use <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-url_to_image\" rel=\"nofollow\"><code>url_to_image</code></a>.</p>\n"}], "owner": {"reputation": 263, "user_id": 1372396, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/f5f8e059ded4c310b52b001e78bbf200?s=128&d=identicon&r=PG", "display_name": "Ack", "link": "https://stackoverflow.com/users/1372396/ack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 357, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454488570, "creation_date": 1454487714, "last_edit_date": 1454488570, "question_id": 35171826, "link": "https://stackoverflow.com/questions/35171826/prawn-cant-find-locally-stored-image", "title": "Prawn can&#39;t find locally stored image", "body": "<p>I'm trying to render a locally stored image to PDF using Prawn. This is what I'm doing in my class ..</p>\n\n<pre><code>def to_pdf\n    cover = book.cover_url\n    text cover\n    image cover\n    render\nend\n</code></pre>\n\n<p>.. expecting it to render the image path, then the image itself. But what I'm getting is an ArgumentError which gives me back the path, \"/system/images/image.jpg not found\", that does in fact show me the image when I paste it in the address bar. <code>book.cover_url</code> outputs a relative path as a string. This path is correct - if I use the same code in a view, the image is shown. </p>\n\n<p>This also doesn't work:</p>\n\n<pre><code>cover = \"#{Rails.root}#{book.cover_url}\"\nimage cover\n</code></pre>\n\n<p>This gives me a similar error (as expected):</p>\n\n<pre><code>cover = \"#{Rails.root}#{book.cover_url}\"\nimage open(cover)\n</code></pre>\n\n<p>However this does work:</p>\n\n<pre><code>cover = \"http://localhost/system/images/image.jpg\"\nimage open(cover)\n</code></pre>\n\n<p>As does this:</p>\n\n<pre><code>cover = \"http://ecx.images-amazon.com/images/I/41EPYSumZvL._SX329_BO1,204,203,200_.jpg\"\nimage open(cover)\n</code></pre>\n\n<p>Prawn just can't seem to find the image using the path it's provided with. It's driving me nuts. Judging from the documentation, this should all be very straightforward.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-product-api", "vacuum"], "answers": [{"tags": [], "owner": {"reputation": 845, "user_id": 767499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fwi6E.gif?s=128&g=1", "display_name": "CyberMJ", "link": "https://stackoverflow.com/users/767499/cybermj"}, "is_accepted": false, "score": 1, "last_activity_date": 1454786754, "creation_date": 1454786754, "answer_id": 35245404, "question_id": 35171724, "link": "https://stackoverflow.com/questions/35171724/fetch-relateditems-in-amazon-product-api-using-rails-4-vacuum-gem/35245404#35245404", "title": "Fetch RelatedItems in Amazon Product Api using Rails 4 Vacuum gem", "body": "<p>Could you simply add all existing RelationshipType values to your ItemLookup request. The RelationshiptType set is limited to 15 valid values, so you could include all of them into your request as follows:</p>\n\n<pre><code>response = request.item_lookup(\nquery: {\n    'ItemId' =&gt; params[:id],\n    'ResponseGroup' =&gt; \"ItemAttributes,Images,Reviews,RelatedItems\"\n    ...\n    'RelationshipType' =&gt; \"Tracks,DigitalMusicArranger,DigitalMusicComposer,DigitalMusicConductor,DigitalMusicEnsemble,DigitalMusicLyricist,DigitalMusicPerformer,DigitalMusicPrimaryArtist,DigitalMusicProducer,DigitalMusicRemixer,DigitalMusicSongWriter,Episode,Season\"\n}\n)\n</code></pre>\n"}], "owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454786754, "creation_date": 1454487364, "question_id": 35171724, "link": "https://stackoverflow.com/questions/35171724/fetch-relateditems-in-amazon-product-api-using-rails-4-vacuum-gem", "title": "Fetch RelatedItems in Amazon Product Api using Rails 4 Vacuum gem", "body": "<p>I am integrating Amazon Product Api in my rails app. The only thing remaining now is fetching <strong>related items</strong> list when I am performing the <code>item_lookup</code> operation. </p>\n\n<p>When I add <code>RelatedItems</code> in ResponseGroup like this:</p>\n\n<pre><code>    response = request.item_lookup(\n    query: {\n        'ItemId' =&gt; params[:id],\n        'ResponseGroup' =&gt; \"ItemAttributes,Images,Reviews,RelatedItems\"\n    }\n    )\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>\"Errors\"=&gt;{\"Error\"=&gt;{\"Code\"=&gt;\"AWS.MissingParameterValueCombination\", \"Message\"=&gt;\"Your request is missing a required parameter combination.  When ResponseGroup equals RelatedItems, RelationshipType must be present.\"}}}\n</code></pre>\n\n<p>It seems that I need to add <code>RelationshipType</code> in my query.</p>\n\n<p>The issue is I have my categories being saved in the backend. The <code>search_index</code> and <code>keyword</code> is passed to the <code>item_search</code> operation where I fetch the  <code>ASIN</code> which I pass as param to <code>item_lookup</code> operation. The issue is how can I add <strong>RelationshipType</strong> over here and also that it has to dynamic as per the product being displayed.</p>\n\n<p><strong>Thanks in advance.</strong></p>\n"}, {"tags": ["ruby", "github", "rvm"], "answers": [{"comments": [{"owner": {"reputation": 2738, "user_id": 4862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IuLvH.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4862564/chris"}, "edited": false, "score": 0, "creation_date": 1454596727, "post_id": 35174334, "comment_id": 58123292, "body": "thanks for your answer, so I installed overcommit globally. Now it cannot find rubocop (thats what I run in de pre-commit hook). So thats the next step."}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "reply_to_user": {"reputation": 2738, "user_id": 4862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IuLvH.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4862564/chris"}, "edited": false, "score": 1, "creation_date": 1463053477, "post_id": 35174334, "comment_id": 61904500, "body": "@Chris use <code>command: [&#39;bundle&#39;, &#39;exec&#39;, &#39;rubocop&#39;]</code> in the overcommit configuration so rubocop is run from inside the bundle."}], "tags": [], "owner": {"reputation": 4874, "user_id": 595304, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e4cc4011841c2a363c66e259c68a567f?s=128&d=identicon&r=PG", "display_name": "evotopid", "link": "https://stackoverflow.com/users/595304/evotopid"}, "is_accepted": false, "score": 0, "last_activity_date": 1454494993, "creation_date": 1454494993, "answer_id": 35174334, "question_id": 35171349, "link": "https://stackoverflow.com/questions/35171349/error-when-using-overcommit-and-github-desktop/35174334#35174334", "title": "Error when using overcommit and Github Desktop", "body": "<p>Most likely it's <a href=\"https://github.com/brigade/overcommit/blob/338a3602fcc8c6ffe16c8b458505985e5bebc9d5/template-dir/hooks/overcommit-hook#L53\" rel=\"nofollow\">this line</a> where the error occurs. As you can see the main issue is that it's not able to <code>require 'overcommit'</code>. I don't know the GitHub desktop client so well (maybe there is a way to configure it inside of it), but one thing you could do is adding the absolute path  where rvm stores your gems to the \"require path\" in the hook file. This could look like:</p>\n\n<pre><code>$: &lt;&lt; \"/home/user/.rvm/path/to/gems/dir\"\n</code></pre>\n\n<p>The disadvantage of this is that you would have your absolute path in the hook file and it most likely won't work for others. You might also want to consider installing the gem globally for the the ruby interpreter that executes the script (see Shebang line in the hook file).</p>\n"}, {"comments": [{"owner": {"reputation": 2738, "user_id": 4862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IuLvH.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4862564/chris"}, "edited": false, "score": 1, "creation_date": 1464002477, "post_id": 37369342, "comment_id": 62288601, "body": "No luck:  <code>[RuboCop] FAILED &#39;rubocop&#39; is not installed, not in your PATH, or does not have execute permissions Install it by running: gem install rubocop</code>"}], "tags": [], "owner": {"reputation": 460, "user_id": 246054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949643d839ab31ddf46976e4e2234e45?s=128&d=identicon&r=PG", "display_name": "michelegera", "link": "https://stackoverflow.com/users/246054/michelegera"}, "is_accepted": false, "score": 0, "last_activity_date": 1464086966, "last_edit_date": 1464086966, "creation_date": 1463876578, "answer_id": 37369342, "question_id": 35171349, "link": "https://stackoverflow.com/questions/35171349/error-when-using-overcommit-and-github-desktop/37369342#37369342", "title": "Error when using overcommit and Github Desktop", "body": "<p>You are right, Github Desktop (or any other GUI) isn\u2019t running in your terminal environment, so it knows nothing about your specific RVM installation.</p>\n\n<p>A simple solution is to install <code>overcommit</code> and any other gems required by your hooks into your system Ruby:</p>\n\n<pre><code>sudo su -\ngem install bundler\ngem install overcommit\ngem install rubocop\n...\n</code></pre>\n\n<p>If you installed Git via Homebrew or other means, you might have to change the <strong>Git binary</strong> used by your GUI.</p>\n\n<p>For example, in <a href=\"https://www.git-tower.com/\" rel=\"nofollow noreferrer\">Tower</a>, I selected Homebrew\u2019s version rather than the System\u2019s.</p>\n\n<p><a href=\"https://i.stack.imgur.com/TJ8eO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TJ8eO.png\" alt=\"Tower for OS X Git Config\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 925, "user_id": 394419, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4011ba172b1615b0265340e4d88ace2a?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/394419/craig"}, "edited": false, "score": 1, "creation_date": 1476491628, "post_id": 37433541, "comment_id": 67383366, "body": "Same situation with Git Tower. The above didn&#39;t work for me until I launched Tower from Terminal using their CLI tools. I imagine GitHub for Desktop would have the same. <a href=\"https://www.git-tower.com/help/mac/faq-and-tips/faq/hook-scripts\" rel=\"nofollow noreferrer\">git-tower.com/help/mac/faq-and-tips/faq/hook-scripts</a>"}, {"owner": {"reputation": 986, "user_id": 1073584, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/6prLg.jpg?s=128&g=1", "display_name": "ludenus", "link": "https://stackoverflow.com/users/1073584/ludenus"}, "edited": false, "score": 0, "creation_date": 1476869315, "post_id": 37433541, "comment_id": 67524543, "body": "also fixes similar issue in SourceTree on Mac. thanks!"}], "tags": [], "owner": {"reputation": 2738, "user_id": 4862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IuLvH.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4862564/chris"}, "is_accepted": true, "score": 5, "last_activity_date": 1464169903, "creation_date": 1464169903, "answer_id": 37433541, "question_id": 35171349, "link": "https://stackoverflow.com/questions/35171349/error-when-using-overcommit-and-github-desktop/37433541#37433541", "title": "Error when using overcommit and Github Desktop", "body": "<p>Ok finally got it to work!\nCombined the answer from @michelegera with comment from @rewritten</p>\n\n<p>Step 1:</p>\n\n<pre><code>sudo su -\ngem install bundler\ngem install overcommit\ngem install rubocop\n</code></pre>\n\n<p>Step 2: added <code>command: ['bundle', 'exec', 'rubocop']</code> to <code>.overcommit.yml</code></p>\n\n<p>Thanks for the help!</p>\n"}], "owner": {"reputation": 2738, "user_id": 4862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IuLvH.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4862564/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1442, "favorite_count": 1, "accepted_answer_id": 37433541, "answer_count": 3, "score": 3, "last_activity_date": 1464169903, "creation_date": 1454486066, "question_id": 35171349, "link": "https://stackoverflow.com/questions/35171349/error-when-using-overcommit-and-github-desktop", "title": "Error when using overcommit and Github Desktop", "body": "<p>I am using overcommit gem (<a href=\"https://github.com/brigade/overcommit\" rel=\"noreferrer\">https://github.com/brigade/overcommit</a>) in my project, when I use Github Desktop for osx I get these errors: </p>\n\n<blockquote>\n  <p>This repository contains hooks installed by Overcommit, but the\n  <code>overcommit</code> gem is not installed. Install it with <code>gem install\n  overcommit</code>.  (1)</p>\n</blockquote>\n\n<p>The gem is installed, it works in terminal. I guess it's because I use rvm and Github Desktop doesn't know about rvm. Anybody knows how to fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "intellij-idea", "sdk"], "comments": [{"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1454483932, "post_id": 35170575, "comment_id": 58059078, "body": "Try installing Rvm. Works seamlessly for me with IntelliJ"}, {"owner": {"reputation": 742, "user_id": 2877322, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kOvqY.jpg?s=128&g=1", "display_name": "thesowismine", "link": "https://stackoverflow.com/users/2877322/thesowismine"}, "reply_to_user": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1454484161, "post_id": 35170575, "comment_id": 58059205, "body": "@Jon i used rbenv instead, I followed this guide for installing setting up rails and would rather not stray from it at this point if possible"}, {"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1454484434, "post_id": 35170575, "comment_id": 58059346, "body": "I&#39;m pretty certain the example screenshots in the jetbrains guide you&#39;re following also show Rvm being used."}, {"owner": {"reputation": 742, "user_id": 2877322, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kOvqY.jpg?s=128&g=1", "display_name": "thesowismine", "link": "https://stackoverflow.com/users/2877322/thesowismine"}, "reply_to_user": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1454484486, "post_id": 35170575, "comment_id": 58059376, "body": "@Jon whoops, sorry, i forgot to link the guide I was talking about, which has nothing to do with intellij IDEA <a href=\"https://gorails.com/setup/osx/10.11-el-capitan\" rel=\"nofollow noreferrer\">gorails.com/setup/osx/10.11-el-capitan</a>"}, {"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1454484622, "post_id": 35170575, "comment_id": 58059443, "body": "Ah. I&#39;d still use Rvm if I were you. Installation is trivial and IntelliJ works perfectly with it."}], "answers": [{"comments": [{"owner": {"reputation": 742, "user_id": 2877322, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kOvqY.jpg?s=128&g=1", "display_name": "thesowismine", "link": "https://stackoverflow.com/users/2877322/thesowismine"}, "edited": false, "score": 2, "creation_date": 1454484075, "post_id": 35170754, "comment_id": 58059163, "body": "I don&#39;t have that option, just a bunch of other stuff including but not limited to JavaScript, Play Configuration, Grails, OSGI, SQL Dialects, and XSLT"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "reply_to_user": {"reputation": 742, "user_id": 2877322, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kOvqY.jpg?s=128&g=1", "display_name": "thesowismine", "link": "https://stackoverflow.com/users/2877322/thesowismine"}, "edited": false, "score": 0, "creation_date": 1454484123, "post_id": 35170754, "comment_id": 58059187, "body": "Oh, oops; for whatever reason I assumed you&#39;re using RubyMine. Might want to give that a whirl; it&#39;s baked for Ruby. :)"}, {"owner": {"reputation": 742, "user_id": 2877322, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kOvqY.jpg?s=128&g=1", "display_name": "thesowismine", "link": "https://stackoverflow.com/users/2877322/thesowismine"}, "edited": false, "score": 0, "creation_date": 1454484238, "post_id": 35170754, "comment_id": 58059240, "body": "Yea I might end up doing that. I really want to get this to work though because I&#39;ve done it before and would rather use the same IDE for everything if possible."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "reply_to_user": {"reputation": 742, "user_id": 2877322, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kOvqY.jpg?s=128&g=1", "display_name": "thesowismine", "link": "https://stackoverflow.com/users/2877322/thesowismine"}, "edited": false, "score": 1, "creation_date": 1454484294, "post_id": 35170754, "comment_id": 58059273, "body": "Have you checked this out? <a href=\"https://confluence.jetbrains.com/display/RUBYDEV/Opening+Rails+projects+in+IntelliJ+IDEA\" rel=\"nofollow noreferrer\">confluence.jetbrains.com/display/RUBYDEV/&hellip;</a>"}, {"owner": {"reputation": 742, "user_id": 2877322, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kOvqY.jpg?s=128&g=1", "display_name": "thesowismine", "link": "https://stackoverflow.com/users/2877322/thesowismine"}, "edited": false, "score": 0, "creation_date": 1454484367, "post_id": 35170754, "comment_id": 58059308, "body": "Yea thats what I was using but it seems to varie a little when you go to import the path"}, {"owner": {"reputation": 969, "user_id": 810546, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/527b543f0f307a7a80ad87a1e17776ad?s=128&d=identicon&r=PG", "display_name": "WebComer", "link": "https://stackoverflow.com/users/810546/webcomer"}, "edited": false, "score": 0, "creation_date": 1488028801, "post_id": 35170754, "comment_id": 72055662, "body": "For me, the mentioned Ruby option is missing in Languages &amp; Frameworks in idea 15. Just cannot add Ruby facet yet Ruby sdk&#39;s listed in sdk list. Ruby files just a piece in java project."}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 2, "last_activity_date": 1454483915, "creation_date": 1454483915, "answer_id": 35170754, "question_id": 35170575, "link": "https://stackoverflow.com/questions/35170575/how-do-i-setup-the-ruby-sdk-in-intellij-idea/35170754#35170754", "title": "How do I setup the ruby SDK in IntelliJ IDEA?", "body": "<p>Languages &amp; Frameworks > Ruby SDK and Gems</p>\n"}, {"tags": [], "owner": {"reputation": 1311, "user_id": 4676887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI0oc.jpg?s=128&g=1", "display_name": "Olivia", "link": "https://stackoverflow.com/users/4676887/olivia"}, "is_accepted": false, "score": 4, "last_activity_date": 1454942321, "creation_date": 1454942321, "answer_id": 35272237, "question_id": 35170575, "link": "https://stackoverflow.com/questions/35170575/how-do-i-setup-the-ruby-sdk-in-intellij-idea/35272237#35272237", "title": "How do I setup the ruby SDK in IntelliJ IDEA?", "body": "<p>In order to set Ruby SDK for your project in IDEA you need to go to File | Project Structure | Project Settings and set project and module SDK.</p>\n"}, {"tags": [], "owner": {"reputation": 316, "user_id": 4414653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97514781376cd8b2da3ad45c5891664a?s=128&d=identicon&r=PG&f=1", "display_name": "artziff", "link": "https://stackoverflow.com/users/4414653/artziff"}, "is_accepted": false, "score": 2, "last_activity_date": 1464251800, "last_edit_date": 1464251800, "creation_date": 1464251187, "answer_id": 37455429, "question_id": 35170575, "link": "https://stackoverflow.com/questions/35170575/how-do-i-setup-the-ruby-sdk-in-intellij-idea/37455429#37455429", "title": "How do I setup the ruby SDK in IntelliJ IDEA?", "body": "<p>Olivia is correct, the \"Project Structure...\" (Mac shortcut <kbd>Cmd</kbd>+<kbd>;</kbd>) is the dialog for configuring the IDE to use different ruby installations.</p>\n\n<p>The first requirement is that the ruby manager (<a href=\"https://github.com/postmodern/chruby\" rel=\"nofollow\">chruby</a>, <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow\">rbenv</a>, <a href=\"https://rvm.io/\" rel=\"nofollow\">rvm</a>) is configured properly.</p>\n\n<p>Another concern is exactly where and how jetbrains expects the ruby installation to be organized. I wonder if Intellij is compatible with the way ruby-install lays out ruby? That's the one I used with chruby. I could not make it work. </p>\n\n<p>The posted url to <a href=\"https://confluence.jetbrains.com/display/RUBYDEV/Opening+Rails+projects+in+IntelliJ+IDEA#OpeningRailsprojectsinIntelliJIDEA-3.ConfigureRubySDK\" rel=\"nofollow\">Opening Rails projects in IntelliJ IDEA</a> helped me feel the most confidence that we are on the right track. :)</p>\n\n<p>At the time, I was failing to get Intellij configured due to fact the gem files were not seen by the IDE. All but about 4 gems in my project's Gemfile was being highlighted as having an SDK problem.</p>\n\n<p>To end this, I stopped using chruby and ruby-install. I am not blaming chruby, however I could not make the chruby system work properly with the IDE. It worked fine in the shell. Note, I am a previous user of rvm and rbenv. Switching back to rbenv, now. Note that I've also stopped using ruby-build directly.</p>\n\n<p>Instead, I built the first ruby version directly from rbenv: </p>\n\n<pre><code>rbenv install 2.3.1\n</code></pre>\n\n<p>Next, I created the .ruby-version file in the root of my rails project directory by running:</p>\n\n<pre><code>rbenv local 2.3.1\n</code></pre>\n\n<p>To help with any confusion regarding the minimum support needed in the shell startup scripts. Do not alter PATH at all. Place the following in your shell startup script system, whatever that may be: </p>\n\n<pre><code># rbenv config in my .bash_profile\n# --------------------------------\nif which rbenv &gt; /dev/null; then\n  eval \"$(rbenv init -)\";\nfi\n</code></pre>\n\n<p>With the prerequisites out of the way...</p>\n\n<p>I recommend doing the project import in the same way described in the jetbrains tutorial <a href=\"https://confluence.jetbrains.com/display/RUBYDEV/Opening+Rails+projects+in+IntelliJ+IDEA#OpeningRailsprojectsinIntelliJIDEA-3.ConfigureRubySDK\" rel=\"nofollow\">Opening Rails projects in IntelliJ IDEA</a>.</p>\n\n<p>In the first screenshot from thesowismine, I see two dialogs for different purposes that are simultaneously open. Unless I am mistaken, one of those dialogs should have received its info and closed before going forward, at least during the wizard-like process. Perhaps this was done and that dialog was reloaded later? </p>\n\n<p>In any event, that is not where the Ruby SDK is associated to a Rails project. The screenshot indicates the User is browsing around the brew Cellar, which may indicate two things. </p>\n\n<ol>\n<li>Ruby was installed with a <code>brew install &lt;version&gt;</code> command; I installed ruby by calling the rbenv ecosystem. </li>\n<li>That particular dialog is for informing the IDE about the Rails project folder, not the Ruby kit.</li>\n</ol>\n\n<p>Assuming the first dialog is provided with the root directory of the Rails app and next is clicked; then in the second dialog, I change nothing and click next. The 3rd dialog is where I confirm the project directory is correct and I can assign a more elaborate name (which is displayed in the IDE's project menu). Clicking next may prompt you to write over the \".idea/\" directory. Say yes. The next dialog confirms that sources were found. Click next. Now Frameworks begin to be detected assuming the Ruby Manager is setup correctly. Click Finish. </p>\n\n<p>Now, goto the \"Project Structure...\" dialog to set the SDK. </p>\n\n<p>Before or after setting the SDK, go to the the project directory of your Rails project, run:</p>\n\n<pre><code>gem install bundle\nbundle install\n</code></pre>\n\n<p>This will install all the gems your project requires including the rails gem, as presumably it is listed in your Gemfile. </p>\n\n<p>Note that gemsets do not come up, here. In this config, the set of gems are associated to a particular Ruby installation. <a href=\"http://bundler.io/\" rel=\"nofollow\">Bundler</a> is your friend.</p>\n"}, {"comments": [{"owner": {"reputation": 316, "user_id": 4414653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97514781376cd8b2da3ad45c5891664a?s=128&d=identicon&r=PG&f=1", "display_name": "artziff", "link": "https://stackoverflow.com/users/4414653/artziff"}, "edited": false, "score": 0, "creation_date": 1464324422, "post_id": 37468259, "comment_id": 62448210, "body": "Thank you for following up so promptly. Good job out of you! That certainly completes the picture."}], "tags": [], "owner": {"reputation": 742, "user_id": 2877322, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kOvqY.jpg?s=128&g=1", "display_name": "thesowismine", "link": "https://stackoverflow.com/users/2877322/thesowismine"}, "is_accepted": true, "score": 0, "last_activity_date": 1464286489, "creation_date": 1464286489, "answer_id": 37468259, "question_id": 35170575, "link": "https://stackoverflow.com/questions/35170575/how-do-i-setup-the-ruby-sdk-in-intellij-idea/37468259#37468259", "title": "How do I setup the ruby SDK in IntelliJ IDEA?", "body": "<p>I was able to solve this by doing:</p>\n\n<p>Preferences | Plugins | Install JetBrains plugin</p>\n\n<p><a href=\"https://i.stack.imgur.com/vKFaG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vKFaG.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 501, "user_id": 3520607, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f5933613df407492083ee5f0c12694bc?s=128&d=identicon&r=PG", "display_name": "Doug Couvillion", "link": "https://stackoverflow.com/users/3520607/doug-couvillion"}, "is_accepted": false, "score": 5, "last_activity_date": 1604864172, "creation_date": 1604864172, "answer_id": 64742254, "question_id": 35170575, "link": "https://stackoverflow.com/questions/35170575/how-do-i-setup-the-ruby-sdk-in-intellij-idea/64742254#64742254", "title": "How do I setup the ruby SDK in IntelliJ IDEA?", "body": "<p>I ran into this problem with Intellij IDEA 2020.2.  It took a while to resolve because the Intellij documentation seems to be missing one critical piece.</p>\n<p>When you first open a project in IDEA, it assumes all your code is part of a Java module. With that module in place you cannot set a Ruby SDK at the module level.  There's no option to do because the existing module is configured as Java.</p>\n<p>Here's a screenshot of my example project with the default Java module.  Notice the icon is a folder with a blue rectangle in the lower, right corner.</p>\n<p><a href=\"https://i.stack.imgur.com/PRoBy.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/PRoBy.png\" alt=\"screenshot of Project Structure with default Java module\" /></a></p>\n<p>Here's what I had to do.</p>\n<ol>\n<li><p>Open the Project Structure dialog (File | Project Structure).</p>\n</li>\n<li><p>In the Modules settings, highlight the top-level project module and click the delete button (looks like a minus sign).</p>\n</li>\n<li><p>Click the plus sign to add a new module.</p>\n</li>\n<li><p>From the pop-up click &quot;New Module&quot;.</p>\n</li>\n<li><p>In the &quot;New Module&quot; pop-up select Ruby and the correct Module SDK (e.g. rbenv: 2.5.0)</p>\n</li>\n<li><p>When you are prompted to enter the Module name, Content root, and Module file location, make sure the directories are set to your project's root.  When I entered the module name it appended the name to the project's root directory which is probably not what you want.</p>\n</li>\n</ol>\n<p>Once you've done that the module should appear with a Ruby icon on it and the rest should work as documented here: <a href=\"https://www.jetbrains.com/help/idea/configuring-language-interpreter.html\" rel=\"noreferrer\">https://www.jetbrains.com/help/idea/configuring-language-interpreter.html</a></p>\n<p>Here's a screenshot of my new Ruby module.  You can see the Ruby icon replaced the blue rectangle.</p>\n<p><a href=\"https://i.stack.imgur.com/DDtdT.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/DDtdT.png\" alt=\"screenshot of Project Structure with Ruby module\" /></a></p>\n<p>I hope this saves you some time!</p>\n"}], "owner": {"reputation": 742, "user_id": 2877322, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kOvqY.jpg?s=128&g=1", "display_name": "thesowismine", "link": "https://stackoverflow.com/users/2877322/thesowismine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12173, "favorite_count": 0, "accepted_answer_id": 37468259, "answer_count": 5, "score": 5, "last_activity_date": 1604864172, "creation_date": 1454483231, "last_edit_date": 1464258271, "question_id": 35170575, "link": "https://stackoverflow.com/questions/35170575/how-do-i-setup-the-ruby-sdk-in-intellij-idea", "title": "How do I setup the ruby SDK in IntelliJ IDEA?", "body": "<p>I've been using <a href=\"https://confluence.jetbrains.com/display/RUBYDEV/Opening+Rails+projects+in+IntelliJ+IDEA#OpeningRailsprojectsinIntelliJIDEA-3.ConfigureRubySDK\" rel=\"nofollow noreferrer\">this</a> guide</p>\n\n<p>Whenever I go to import the module I get this screen:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fbMFL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fbMFL.png\" alt=\"enter image description here\"></a></p>\n\n<p>I used the following file path, maybe this is whats wrong?\n<code>/usr/local/Cellar/ruby-build/20160130/share/ruby-build/2.3.0</code></p>\n\n<p>And got this error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fChfD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fChfD.png\" alt=\"enter image description here\"></a> </p>\n\n<p>I'd appreciate any ideas anyone might have, i've been trying get this working all night!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1454483595, "post_id": 35170564, "comment_id": 58058916, "body": "Normalise the field <code>before_validation</code> by stripping the dots from the left side in a unique column?"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1454484025, "post_id": 35170564, "comment_id": 58059137, "body": "An email with a dot does not indicate it will be a duplicate. Relevant: <a href=\"http://stackoverflow.com/questions/2049502/what-characters-are-allowed-in-email-address\" title=\"what characters are allowed in email address\">stackoverflow.com/questions/2049502/&hellip;</a>"}, {"owner": {"reputation": 5585, "user_id": 2416094, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/glrMW.jpg?s=128&g=1", "display_name": "Debadatt", "link": "https://stackoverflow.com/users/2416094/debadatt"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1454484138, "post_id": 35170564, "comment_id": 58059195, "body": "@JoshBrody: it is creating malicious accounts in any other site."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1454484251, "post_id": 35170564, "comment_id": 58059247, "body": "I don&#39;t think an email address is going to stop someone from being malicious."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 2, "creation_date": 1454485602, "post_id": 35170564, "comment_id": 58059939, "body": "@JoshBrody gmail ignores dots in email username"}, {"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1454486043, "post_id": 35170564, "comment_id": 58060143, "body": "Why don&#39;t you just make them verify their email address by emailing them a link to click. Then add a cleanup job that deletes any unverified accounts after 7 days or something."}], "answers": [{"tags": [], "owner": {"reputation": 1632, "user_id": 1072222, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e25a242e4a1ca113d0fad40e1ba611d6?s=128&d=identicon&r=PG", "display_name": "cur4so", "link": "https://stackoverflow.com/users/1072222/cur4so"}, "is_accepted": false, "score": 1, "last_activity_date": 1454484330, "creation_date": 1454484330, "answer_id": 35170870, "question_id": 35170564, "link": "https://stackoverflow.com/questions/35170564/identify-duplicate-email-with-inside-it/35170870#35170870", "title": "Identify duplicate email with . inside it", "body": "<p>in postgesql:</p>\n\n<pre><code>select distinct a from (select replace(adr,'.','') as a from t) t2;\n</code></pre>\n\n<p>gives you unique set </p>\n\n<pre><code>select a,count(*) from (select replace(adr,'.','') as a from t) t2 group by a;\n</code></pre>\n\n<p>gives you how many times each value has been met</p>\n\n<p><a href=\"http://sqlfiddle.com/#!15/e893a2/3\" rel=\"nofollow\">http://sqlfiddle.com/#!15/e893a2/3</a></p>\n"}, {"tags": [], "owner": {"reputation": 914, "user_id": 1612193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f21ef0b135d7399570b3679ce958fcbd?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/1612193/dani"}, "is_accepted": false, "score": 0, "last_activity_date": 1454498707, "creation_date": 1454498707, "answer_id": 35175731, "question_id": 35170564, "link": "https://stackoverflow.com/questions/35170564/identify-duplicate-email-with-inside-it/35175731#35175731", "title": "Identify duplicate email with . inside it", "body": "<p>To-the-dot duplicated email records can be identified directly in your SQL statement or in your ruby app code.</p>\n\n<p>Here's a simple query to return all normalized email and the number of users associated with each normalized email:</p>\n\n<pre><code>User.group(\"replace(email,'.','')\").count\n</code></pre>\n\n<p>which is translated to the following SQL:</p>\n\n<pre><code>SELECT COUNT(*) AS count_all, replace(email,'.','') AS replace_email FROM \"users\" GROUP BY replace(email,'.','')\n</code></pre>\n\n<p>and returns something like the following hash:</p>\n\n<pre><code>{\"x@gmailcom\"=&gt;1, \"da@gmailcom\"=&gt;2}\n</code></pre>\n\n<p>Indicating there are 2 users with normalized email equals to <code>da@gmailcom</code>.</p>\n\n<p>Alternitevly you can use <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-group_by\" rel=\"nofollow\">group_by</a> in ruby code:</p>\n\n<pre><code>User.all.group_by{ |u| u.email.gsub('.','') }\n</code></pre>\n"}], "owner": {"reputation": 5585, "user_id": 2416094, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/glrMW.jpg?s=128&g=1", "display_name": "Debadatt", "link": "https://stackoverflow.com/users/2416094/debadatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1454498707, "creation_date": 1454483179, "last_edit_date": 1454492069, "question_id": 35170564, "link": "https://stackoverflow.com/questions/35170564/identify-duplicate-email-with-inside-it", "title": "Identify duplicate email with . inside it", "body": "<p>How to identify duplicate emails in table with . inside in ruby on rails </p>\n\n<p>E.x . <code>user 1: testaccount@gmail.com,</code></p>\n\n<pre><code>  user 2: test.account@gmail.com,\n\n  user 3: tes.t.account@gmail.com,\n\n  user 4: test.a.ccount@gmail.com\n</code></pre>\n\n<p>Gmail refers to same email account for each emails included by '.'  .  Gmail ignores dots in email username</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 363, "user_id": 4433763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F9rxz.png?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/4433763/long-nguyen"}, "edited": false, "score": 0, "creation_date": 1454482454, "post_id": 35170201, "comment_id": 58058416, "body": "Do you want load all paid drivers into memory? Just <code>@paid_drivers = DriverInvoice.where(driver_id: current_affilate_company.drivers.pluck(:id)).all</code>. But you should let it in lazy loading"}, {"owner": {"reputation": 538, "user_id": 2617226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/20ec0854aecf2333f1f0979d54a37d62?s=128&d=identicon&r=PG", "display_name": "Anish", "link": "https://stackoverflow.com/users/2617226/anish"}, "reply_to_user": {"reputation": 363, "user_id": 4433763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F9rxz.png?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/4433763/long-nguyen"}, "edited": false, "score": 0, "creation_date": 1454483069, "post_id": 35170201, "comment_id": 58058681, "body": "@LongNuyen  can you please elaborate your answer"}, {"owner": {"reputation": 363, "user_id": 4433763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F9rxz.png?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/4433763/long-nguyen"}, "edited": false, "score": 0, "creation_date": 1454483355, "post_id": 35170201, "comment_id": 58058802, "body": "But what do you want?"}, {"owner": {"reputation": 538, "user_id": 2617226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/20ec0854aecf2333f1f0979d54a37d62?s=128&d=identicon&r=PG", "display_name": "Anish", "link": "https://stackoverflow.com/users/2617226/anish"}, "reply_to_user": {"reputation": 363, "user_id": 4433763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F9rxz.png?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/4433763/long-nguyen"}, "edited": false, "score": 0, "creation_date": 1454483768, "post_id": 35170201, "comment_id": 58059003, "body": "i want to put the further filters on the object i have got as @paid_driver"}, {"owner": {"reputation": 363, "user_id": 4433763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F9rxz.png?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/4433763/long-nguyen"}, "edited": false, "score": 2, "creation_date": 1454483906, "post_id": 35170201, "comment_id": 58059061, "body": "Ah, you can use <code>scope</code>. Here is document <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 538, "user_id": 2617226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/20ec0854aecf2333f1f0979d54a37d62?s=128&d=identicon&r=PG", "display_name": "Anish", "link": "https://stackoverflow.com/users/2617226/anish"}, "edited": false, "score": 0, "creation_date": 1454482638, "post_id": 35170345, "comment_id": 58058494, "body": "what abt if i pass @paid_drivers to the search_paid_driver method in model from controller, I mean isn&#39;t that a rails way"}], "tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": false, "score": 2, "last_activity_date": 1454482299, "creation_date": 1454482299, "answer_id": 35170345, "question_id": 35170201, "link": "https://stackoverflow.com/questions/35170201/rails-method-call-on-active-record-relation/35170345#35170345", "title": "Rails method call on active record relation", "body": "<p><code>self</code> inside <code>self.search_paid_driver()</code> is the <code>DriverInvoice</code> class, not the <code>ActiveRelation</code> instance. So, what you got as output is right.</p>\n\n<p>I would suggest using a scope for this kind of query.</p>\n\n<p>Still if you want to achieve same with class method, it should be something like this:</p>\n\n<pre><code>def self.search_paid_driver(current_affiliate_company)\n    .where(driver_id: current_affiliate_company.drivers.pluck(:id))\nend\n</code></pre>\n\n<p>Or if you can manage <code>current_affiliate_company</code> from inside the class, you can omit the method param.</p>\n"}, {"tags": [], "owner": {"reputation": 363, "user_id": 4433763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F9rxz.png?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/4433763/long-nguyen"}, "is_accepted": true, "score": 2, "last_activity_date": 1454484527, "creation_date": 1454484527, "answer_id": 35170927, "question_id": 35170201, "link": "https://stackoverflow.com/questions/35170201/rails-method-call-on-active-record-relation/35170927#35170927", "title": "Rails method call on active record relation", "body": "<p>You should use <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html#method-i-scope\" rel=\"nofollow\">active record scope</a> for yo</p>\n\n<pre><code>class DriverInvoice\n  scope :for_company, -&gt; (company) { where(driver_id: current_affilate_company.drivers.pluck(:id))}\nend\n\n@paid_drivers = DriverInvoice.for_company(current_affilate_company) \n</code></pre>\n\n<p>Then you can use other filters by defining other <code>scope</code>s or using <code>where</code> chain</p>\n"}], "owner": {"reputation": 538, "user_id": 2617226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/20ec0854aecf2333f1f0979d54a37d62?s=128&d=identicon&r=PG", "display_name": "Anish", "link": "https://stackoverflow.com/users/2617226/anish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1343, "favorite_count": 0, "accepted_answer_id": 35170927, "answer_count": 2, "score": 0, "last_activity_date": 1454497726, "creation_date": 1454481758, "last_edit_date": 1454497726, "question_id": 35170201, "link": "https://stackoverflow.com/questions/35170201/rails-method-call-on-active-record-relation", "title": "Rails method call on active record relation", "body": "<p>I have what to call a method in model from controller, where controller has active record relation object</p>\n\n<p>like </p>\n\n<pre><code>@paid_drivers = DriverInvoice.where(driver_id: current_affilate_company.drivers.pluck(:id)) \n</code></pre>\n\n<p>where I got</p>\n\n<pre><code>&gt;     &lt;ActiveRecord::Relation [#&lt;DriverInvoice id: 1, driver_id: 13, total_reservations: 2, total_from_reservations: 20.0, pay: 20.5,\n&gt; discount_amount: 0.0, other_amount: 0.5, tax: 0.0, created_at:\n&gt; \"2016-02-03 05:14:56\", updated_at: \"2016-02-03 05:14:56\",\n&gt; payment_type: 1, is_other_addition: true, is_tax_per: true, tax_value:\n&gt; nil&gt;, #&lt;DriverInvoice id: 2, driver_id: 56, total_reservations: 3,\n&gt; total_from_reservations: 452.0, pay: 452.0, discount_amount: 0.0,\n&gt; other_amount: 0.0, tax: 0.0, created_at: \"2016-02-03 05:15:36\",\n&gt; updated_at: \"2016-02-03 05:15:36\", payment_type: 1, is_other_addition:\n&gt; true, is_tax_per: true, tax_value: nil&gt;]&gt;\n</code></pre>\n\n<p>now  on that obj. I want a method call \n    @paid_drivers =   @paid_drivers.search_paid_driver()</p>\n\n<p>and in my model </p>\n\n<pre><code>def self.search_paid_driver()\n raise self.inspect\nend\n</code></pre>\n\n<p>That give only table fields</p>\n\n<p>like </p>\n\n<blockquote>\n  <p>DriverInvoice(id: integer, driver_id: integer, total_reservations:\n  integer, total_from_reservations: float, pay: float, discount_amount:\n  float, other_amount: float, tax: float, created_at: datetime,\n  updated_at: datetime, payment_type: integer, is_other_addition:\n  boolean, is_tax_per: boolean, tax_value: float)</p>\n</blockquote>\n\n<p>I want all recoreds of @paid_drivers so I can process them further in my model.</p>\n\n<p>How can I do that pls help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "heroku", "asset-pipeline"], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 3246122, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/CAEJF.jpg?s=128&g=1", "display_name": "bnzelener", "link": "https://stackoverflow.com/users/3246122/bnzelener"}, "edited": false, "score": 0, "creation_date": 1454479425, "post_id": 35169424, "comment_id": 58057098, "body": "Thanks.  It looks like this cleaned out the assets that weren&#39;t critical.  Now, how do I get Heroku to precompile automatically on push?"}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1454479813, "post_id": 35169424, "comment_id": 58057269, "body": "Now remove those assets from your git repo and re-push to Heroku.  Heroku will detect that you don&#39;t have precompiled assets and will compile them during the deploy process. All of this is covered in the documentation here <a href=\"https://devcenter.heroku.com/articles/rails-asset-pipeline\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/rails-asset-pipeline</a>"}], "tags": [], "owner": {"reputation": 779, "user_id": 3828281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObrkS.jpg?s=128&g=1", "display_name": "Dheeresha", "link": "https://stackoverflow.com/users/3828281/dheeresha"}, "is_accepted": false, "score": 4, "last_activity_date": 1454478517, "creation_date": 1454478517, "answer_id": 35169424, "question_id": 35169271, "link": "https://stackoverflow.com/questions/35169271/removing-precompiled-assets-in-rails-before-push-to-heroku/35169424#35169424", "title": "Removing Precompiled Assets in Rails before Push to Heroku", "body": "<p>Try the following code.</p>\n\n<pre><code>rake assets:clean\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 223, "user_id": 3246122, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/CAEJF.jpg?s=128&g=1", "display_name": "bnzelener", "link": "https://stackoverflow.com/users/3246122/bnzelener"}, "edited": false, "score": 0, "creation_date": 1454528861, "post_id": 35173385, "comment_id": 58089594, "body": "Thanks, did that.  This is what I see when pushing to Heroku: <code>Detected manifest file, assuming assets were compiled locally</code>"}, {"owner": {"reputation": 223, "user_id": 3246122, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/CAEJF.jpg?s=128&g=1", "display_name": "bnzelener", "link": "https://stackoverflow.com/users/3246122/bnzelener"}, "edited": false, "score": 0, "creation_date": 1454533022, "post_id": 35173385, "comment_id": 58092246, "body": "Erasing the manifest file in my public assets directory appears to have done the trick!"}], "tags": [], "owner": {"reputation": 516, "user_id": 2779976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SiQtD.jpg?s=128&g=1", "display_name": "Awais Shafqat", "link": "https://stackoverflow.com/users/2779976/awais-shafqat"}, "is_accepted": true, "score": 9, "last_activity_date": 1454492562, "creation_date": 1454492562, "answer_id": 35173385, "question_id": 35169271, "link": "https://stackoverflow.com/questions/35169271/removing-precompiled-assets-in-rails-before-push-to-heroku/35173385#35173385", "title": "Removing Precompiled Assets in Rails before Push to Heroku", "body": "<p>Follow these steps:</p>\n\n<pre><code>rake assets:clean\ngit add .\ngit commit -m commit_name\ngit push heroku branch_name\n</code></pre>\n\n<p>This will clean your assets locally + pushing on heroku would precompile the assets. </p>\n"}], "owner": {"reputation": 223, "user_id": 3246122, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/CAEJF.jpg?s=128&g=1", "display_name": "bnzelener", "link": "https://stackoverflow.com/users/3246122/bnzelener"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1970, "favorite_count": 1, "accepted_answer_id": 35173385, "answer_count": 2, "score": 1, "last_activity_date": 1454492562, "creation_date": 1454477857, "question_id": 35169271, "link": "https://stackoverflow.com/questions/35169271/removing-precompiled-assets-in-rails-before-push-to-heroku", "title": "Removing Precompiled Assets in Rails before Push to Heroku", "body": "<p>I have a Heroku app on Rails 4.0.8.</p>\n\n<p>At some point early on, I realized that my CSS and JS changes wouldn't push to Heroku unless I ran <code>rake assets:precompile</code> and committed the new asset files before pushing (<code>git push heroku master</code>).</p>\n\n<p>I've been doing those asset precompiles for about 14 months now, and I've amassed over 48mb in what appear to be old precompiled assets.  However, when I remove them from <code>public/assets</code> manually, my site loses all of its CSS and JS.</p>\n\n<p>How do I remove the old precompiled assets and get Heroku to start compiling on push?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "chartkick"], "comments": [{"owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 0, "creation_date": 1454477179, "post_id": 35168982, "comment_id": 58056216, "body": "just checked out, it does shows the number for each of them."}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 1, "creation_date": 1454477239, "post_id": 35168982, "comment_id": 58056239, "body": "it only show when move cursor on it.I want all time"}, {"owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 0, "creation_date": 1454477631, "post_id": 35168982, "comment_id": 58056376, "body": "I am not sure about the way through Chartkicks but if you can store <code>Goal.group(:name).count</code> this value into a variable and then pass it to <code>pie_chart</code> and at the same time you can try printing the value next to it. I dont know if that will work, just a quick thought. :)"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 0, "creation_date": 1454477837, "post_id": 35168982, "comment_id": 58056429, "body": "I update my question you can see my query. Which changes you say?"}, {"owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 1, "creation_date": 1454479875, "post_id": 35168982, "comment_id": 58057293, "body": "I am sorry, it wont work this way just tried on my system."}, {"owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 0, "creation_date": 1454480989, "post_id": 35168982, "comment_id": 58057735, "body": "Its not implemented yet I guess, I can see an open issue here regarding the same: <a href=\"https://github.com/ankane/chartkick/issues/80\" rel=\"nofollow noreferrer\">github.com/ankane/chartkick/issues/80</a>"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 303, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1454485475, "creation_date": 1454476401, "last_edit_date": 1454485475, "question_id": 35168982, "link": "https://stackoverflow.com/questions/35168982/pie-charts-in-chartkicks-rails", "title": "Pie Charts in Chartkicks rails", "body": "<p>Using chartkicks for showing charts in rails.It works fine but in pie_charts it show only percentage .I want that count of data also shown.</p>\n\n<p><a href=\"https://i.stack.imgur.com/vLaDA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vLaDA.png\" alt=\"enter image description here\"></a></p>\n\n<p>My query now is </p>\n\n<pre><code>&lt;%= pie_chart users.all.group('users.gender').count.map { |k, v| [User.genders.key(k), v] }.to_h %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "mocking", "stub"], "answers": [{"comments": [{"owner": {"reputation": 899, "user_id": 5246692, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/eiKat.jpg?s=128&g=1", "display_name": "Ben Hawker", "link": "https://stackoverflow.com/users/5246692/ben-hawker"}, "edited": false, "score": 0, "creation_date": 1454509429, "post_id": 35171062, "comment_id": 58076145, "body": "Thanks Jesper for such a comprehensive answer. I have been working through refactoring this. I had not come across this &quot;design pattern&quot; (I guess you could call it) to ensure you are delegate responsibility for the creation of an object to that class via a class method in this way but completely get why it&#39;s needed from an encapsulation perspective."}], "tags": [], "owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "is_accepted": true, "score": 1, "last_activity_date": 1454487307, "last_edit_date": 1454487307, "creation_date": 1454485023, "answer_id": 35171062, "question_id": 35168734, "link": "https://stackoverflow.com/questions/35168734/stubbing-a-return-value-in-rspec-correct-usage-of-doubles-and-stubs/35171062#35171062", "title": "Stubbing a return value in RSpec - correct usage of doubles and stubs", "body": "<p>It seems to me that perhaps you're giving <code>PurchaseOrder</code> too much responsibility. It now has intimate knowledge about <code>Order</code> and <code>Invoice</code>. </p>\n\n<p>I'd perhaps test the current implementation like this:</p>\n\n<pre><code>it \"returns an order with the same products\" do\n  expect_any_instance_of(Order).to receive(:products=).with(products: 1)\n\n  purchase_order.add_product(product, 1)\n  expect(purchase_order.create_order).to be_a(Order)\nend\n</code></pre>\n\n<p>But maybe it could make sense to decouple <code>PurchaseOrder</code> from <code>Order</code> and <code>Invoice</code> a little bit and do something like this:</p>\n\n<pre><code>class Invoice\n  def self.from_purchase_order(purchase_order)\n    new(purchase_order.customer, purchase_order.products.clone)\n  end\nend\n\nclass Order\n  def self.from_purchase_order(purchase_order)\n    new.tap(purchase_order.customer) do |invoice|\n      invoice.products = purchase_order.products.clone\n    end\n  end\nend\n\nclass PurchaseOrder\n  # ...\n  def create_order\n    Order.from_purchase_order(self)\n  end\n\n  def create_invoice\n    Invoice.from_purchase_order(self)\n  end\nend\n\ndescribe PurchaseOrder do\n  let(:customer) { double('a customer')}\n  let(:purchase_order) { PurchaseOrder.new(customer) }\n  describe \"#create_order\" do\n    expect(Order).to receive(:from_purchase_order).with(purchase_order)\n    purchase_order.create_order\n  end\n\n  describe \"#create_invoice\" do\n    expect(Order).to receive(:from_purchase_order).with(purchase_order)\n    purchase_order.create_order\n  end\nend\n\ndescribe Order do\n  describe '.from_purchase_order' do\n    # test this\n  end\nend\n\ndescribe Order do\n  describe '.from_purchase_order' do\n    # test this\n  end\nend\n</code></pre>\n\n<p>This way you let the <code>Order</code> and <code>Invoice</code> classes know how to build themselves from a <code>PurchaseOrder</code>. You can test these class methods separately. The tests for <code>create_order</code> and <code>create_invoice</code> become simpler.</p>\n\n<p>Some other things I thought of:</p>\n\n<p>For <code>products</code>, try using a Hash with a default proc:</p>\n\n<pre><code>@products = Hash.new { |hash, unknown_key| hash[unknown_key] = 0 }\n</code></pre>\n\n<p>This way, you can always safely do <code>@products[product] += 1</code>.</p>\n"}], "owner": {"reputation": 899, "user_id": 5246692, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/eiKat.jpg?s=128&g=1", "display_name": "Ben Hawker", "link": "https://stackoverflow.com/users/5246692/ben-hawker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "accepted_answer_id": 35171062, "answer_count": 1, "score": 0, "last_activity_date": 1454487307, "creation_date": 1454475017, "last_edit_date": 1454483784, "question_id": 35168734, "link": "https://stackoverflow.com/questions/35168734/stubbing-a-return-value-in-rspec-correct-usage-of-doubles-and-stubs", "title": "Stubbing a return value in RSpec - correct usage of doubles and stubs", "body": "<p>I have run into confusion tying together a test double and stubbing it. My question is -  what is the most appropriate way to test the <code>confirm_purchase_order</code> and <code>create_order</code> methods in <code>class PurchaseOrder</code>?</p>\n\n<p>I have included the relevant code following code: </p>\n\n<pre><code>class PurchaseOrder\n  attr_reader :customer, :products\n\n  def initialize(customer)\n    @products = {}\n    @customer = customer\n  end\n\n  ....some other methods\n\n  def add_product(product, quantity = 1)\n    @products[product] = (@products[product] ? @products[product] + quantity :  quantity )\n    puts \"You haved added #{quantity} #{product.title}'s to your purchase order\"\n  end\n\n  def confirm_purchase_order\n    purchase_order_total\n    raise \"Your PO appears to be empty! Add some products and try again.\" unless self.total.to_f.round(2) &gt; 0\n\n    create_order\n    create_invoice\n\n    return \"We have generated an Invoice and created an order.\"\n  end\n\n  def create_order\n    order = Order.new(customer)\n    order.products = @products.clone\n  end\n\n  def create_invoice\n    invoice = Invoice.new(customer)\n    invoice.products = @products.clone\n  end\nend\n</code></pre>\n\n<hr>\n\n<pre><code>class Order\n  attr_reader :customer\n  attr_accessor :status, :total, :products\n\n  def initialize(customer)\n    @products = {}\n    @status = :pending\n    @customer = customer\n  end\n</code></pre>\n\n<hr>\n\n<pre><code>class Customer\n  attr_reader :name, :type\n\n  def initialize(name, type)\n    @name = name.to_s\n    @type = type.to_sym\n  end\n</code></pre>\n\n<hr>\n\n<pre><code>class Invoice\n\n  attr_reader :customer, :products\n  attr_accessor :total\n\n  def initialize(customer, products)\n    @products = {}\n    @customer = customer\n    @payment_recieved = false\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>I want to test the <code>confirm_purchase_order</code> method as well as the <code>create_order</code> method in <code>class PurchaseOrder</code>. My approach so far:</p>\n\n<p>I need some object doubles and an actual <code>PurchaseOrder object</code></p>\n\n<pre><code>describe PurchaseOrder do\n  let(:product) { double :product, title: \"guitar\", price: 5 }\n  let(:order) { instance_double(Order) }\n  let(:customer) { double :customer, name: \"Bob\", type: :company }\n  let(:products) { {:product =&gt; 1} }\n\n  let(:purchase_order) { PurchaseOrder.new(customer) }\n\n  describe \"#create_order\" do\n\n    it \"returns an order\" do\n      expect(Order).to receive(:new).with(customer).and_return(order)\n      allow(order).to receive(products).and_return(???products??!)\n\n      purchase_order.add_product(product, 1)\n      purchase_order.create_order\n      expect(order.products).to eq (products)\n    end\n  end\nend\n</code></pre>\n\n<p>I have also looked at the use of:</p>\n\n<pre><code> # order.stub(:products).and_return(products_hash)\n # allow_any_instance_of(Order).to receive(:products) { products_hash }\n # order.should_receive(:products).and_return(products_hash)\n</code></pre>\n\n<p>To setup the order double to return a products hash when <code>order.products</code> is called, but these all feel like they are 'rigging' the test too much. What is the most appropriate way to test the <code>confirm_purchase_order</code> and <code>create_order</code> methods in <code>class PurchaseOrder</code>?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1454474684, "post_id": 35168645, "comment_id": 58055442, "body": "Any specific code you have tried, post it"}, {"owner": {"reputation": 217, "user_id": 1787104, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iDl7B.jpg?s=128&g=1", "display_name": "Goldnuggets", "link": "https://stackoverflow.com/users/1787104/goldnuggets"}, "reply_to_user": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1454474897, "post_id": 35168645, "comment_id": 58055499, "body": "Thanks for responding @Bijendra. I&#39;ve been knocking around ideas for a little while now, but don&#39;t have any code as of yet..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1454521346, "post_id": 35168645, "comment_id": 58085038, "body": "I assume that if the array were <code>[[1,1],[1,2],[2,1],[1,3]]</code> would you want to return [[1,6],[2,1]], not [[1,3],[2,1],[1,3]]. Correct?"}, {"owner": {"reputation": 217, "user_id": 1787104, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iDl7B.jpg?s=128&g=1", "display_name": "Goldnuggets", "link": "https://stackoverflow.com/users/1787104/goldnuggets"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1454526344, "post_id": 35168645, "comment_id": 58088038, "body": "Correct @CarySwoveland. I would expect to see <code>[[1,6],[2,1]]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 217, "user_id": 1787104, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iDl7B.jpg?s=128&g=1", "display_name": "Goldnuggets", "link": "https://stackoverflow.com/users/1787104/goldnuggets"}, "edited": false, "score": 1, "creation_date": 1454476178, "post_id": 35168864, "comment_id": 58055893, "body": "You are a genius. This is perfect. Thanks so much!"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 3, "creation_date": 1454476216, "post_id": 35168864, "comment_id": 58055908, "body": "This could be improved with some explanatory text describing what each part does. When writing an answer, keep in mind that readers of all skill levels will find it."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1454489170, "post_id": 35168864, "comment_id": 58061837, "body": "The <code>group_by</code> can also be expressed as <code>group_by(&amp;:first)</code> and a more concise <code>map</code> might be <code>map { |key, values| [key, values.map(&amp;:last).inject(:+)] }</code>"}, {"owner": {"reputation": 298, "user_id": 1445102, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a173713d4978881dbc8665dd94c94e69?s=128&d=identicon&r=PG", "display_name": "1Rhino", "link": "https://stackoverflow.com/users/1445102/1rhino"}, "edited": false, "score": 0, "creation_date": 1487734353, "post_id": 35168864, "comment_id": 71913253, "body": "Super @Long Nguyen"}], "tags": [], "owner": {"reputation": 363, "user_id": 4433763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F9rxz.png?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/4433763/long-nguyen"}, "is_accepted": true, "score": 9, "last_activity_date": 1454477088, "last_edit_date": 1454477088, "creation_date": 1454475816, "answer_id": 35168864, "question_id": 35168645, "link": "https://stackoverflow.com/questions/35168645/ruby-multidimensional-array-remove-duplicate-in-first-position-add-number-in/35168864#35168864", "title": "Ruby Multidimensional Array - Remove duplicate in first position, add number in second position", "body": "<p>Try this</p>\n\n<pre><code>items.\n  group_by {|i| i[0]}.\n  map{|key, value| [key,value.inject(0){|sum, x| sum + x[1]}]}\n</code></pre>\n\n<p>Firstly, use <a href=\"http://apidock.com/rails/Enumerable/group_by\" rel=\"noreferrer\">group_by</a> to create a hash whose keys is the first element of each array. So we have</p>\n\n<pre><code>{\n 60=&gt;[[60, 3], [60, 3], [60, 2], [60, 1]],\n 276=&gt;[[276, 2], [276, 2], [276, 1], [276, 1], [276, 1], [276, 1]],\n 48=&gt;[[48, 2], [48, 1], [48, 1], [48, 1], [48, 1]],\n 207=&gt;[[207, 2], [207, 1], [207, 1], [207, 1]],\n 46=&gt;[[46, 2], [46, 1]],\n 280=&gt;[[280, 2]],\n 112=&gt;[[112, 1], [112, 1]],\n 278=&gt;[[278, 1]],\n 279=&gt;[[279, 1]]\n}\n</code></pre>\n\n<p>Then to create the desired result, using <a href=\"http://apidock.com/ruby/Enumerable/map\" rel=\"noreferrer\">map</a> method to loop the hash. To calculate total value for each key, using <a href=\"http://apidock.com/ruby/Enumerable/inject\" rel=\"noreferrer\">inject</a> method to sum all second value of each array</p>\n\n<pre><code>[[60, 3], [60, 3], [60, 2], [60, 1]].inject(0) {|sum, x| sum + x[1]} #value is 9\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1454478905, "post_id": 35169432, "comment_id": 58056863, "body": "You can also write <code>Hash.new(0)</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1454523039, "post_id": 35169432, "comment_id": 58086108, "body": "Good answer, but &quot;no need to group,...&quot; is, imo, the wrong emphasis. There is no best way of solving this problem, just different ways."}, {"owner": {"reputation": 2300, "user_id": 1262303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/855975ff404621dc525c72b618d95dcc?s=128&d=identicon&r=PG", "display_name": "randym", "link": "https://stackoverflow.com/users/1262303/randym"}, "edited": false, "score": 0, "creation_date": 1454559863, "post_id": 35169432, "comment_id": 58102036, "body": "You are absolutely correct. Please accept my apologies."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1454645695, "post_id": 35169432, "comment_id": 58147502, "body": "You have nothing to apologize for."}], "tags": [], "owner": {"reputation": 2300, "user_id": 1262303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/855975ff404621dc525c72b618d95dcc?s=128&d=identicon&r=PG", "display_name": "randym", "link": "https://stackoverflow.com/users/1262303/randym"}, "is_accepted": false, "score": 5, "last_activity_date": 1454479076, "last_edit_date": 1454479076, "creation_date": 1454478547, "answer_id": 35169432, "question_id": 35168645, "link": "https://stackoverflow.com/questions/35168645/ruby-multidimensional-array-remove-duplicate-in-first-position-add-number-in/35169432#35169432", "title": "Ruby Multidimensional Array - Remove duplicate in first position, add number in second position", "body": "<p>There is no need to group, map and inject for this data structure.</p>\n\n<pre><code>items = [[60, 3], [60, 3], [276, 2], [276, 2], [48, 2], [207, 2], [46, 2],\n [60, 2], [280, 2], [207, 1], [48, 1], [112, 1], [60, 1], [207, 1], [112, 1],\n [276, 1], [48, 1], [276, 1], [48, 1], [276, 1], [276, 1], [278, 1], [46, 1],\n [48, 1], [279, 1], [207, 1]]\n\n# Provide a default value of 0 for all created entries in the hash.\n# This saves us from having to conditionally set undefined entries to 0\n# http://docs.ruby-lang.org/en/2.0.0/Hash.html\naccumulator = Hash.new(0) # Thanks Eric!\n\n# using reduce lets us perform the grouping and adding in one pass.\n# as each  item is passed in, we define a member on our accumulator\n# for the first number in the pair, and add the value of the second\n# number in the pair to our member.\n# http://docs.ruby-lang.org/en/2.0.0/Enumerable.html#method-i-reduce\noutput = items.reduce(accumulator) do |memo, item|\n  memo[item[0]] = memo[item[0]] + item[1]\n  memo\nend\n\n# Finally, convert the hash to an array\noutput.to_a\n\n# =&gt; [[60, 9], [276, 8], [48, 6], [207, 5], [46, 3], [280, 2], [112, 2], [278, 1], [279, 1]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1454488646, "post_id": 35169637, "comment_id": 58061523, "body": "You can decompose the sub-arrays via <code>{ |(k, v), h| h[k] += v }</code>"}, {"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1454493971, "post_id": 35169637, "comment_id": 58065179, "body": "@Stefan, yes, thats better."}, {"owner": {"reputation": 217, "user_id": 1787104, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iDl7B.jpg?s=128&g=1", "display_name": "Goldnuggets", "link": "https://stackoverflow.com/users/1787104/goldnuggets"}, "edited": false, "score": 0, "creation_date": 1454526538, "post_id": 35169637, "comment_id": 58088177, "body": "This is excellent @Santhosh. Thank you very much for your help."}], "tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": false, "score": 8, "last_activity_date": 1454494281, "last_edit_date": 1454494281, "creation_date": 1454479503, "answer_id": 35169637, "question_id": 35168645, "link": "https://stackoverflow.com/questions/35168645/ruby-multidimensional-array-remove-duplicate-in-first-position-add-number-in/35169637#35169637", "title": "Ruby Multidimensional Array - Remove duplicate in first position, add number in second position", "body": "<p>You could use <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-each_with_object\" rel=\"nofollow\">Enumerable#each_with_object</a></p>\n\n<blockquote>\n  <p>Iterates the given block for each element with an arbitrary object\n  given, and returns the initially given object.</p>\n</blockquote>\n\n<pre><code>items.each_with_object(Hash.new(0)) {|a, h| h[a[0]] += a[1]}.to_a\n# =&gt; [[60, 9], [276, 8], [48, 6], [207, 5], [46, 3], [280, 2],\n#     [112, 2], [278, 1], [279, 1]]\n</code></pre>\n\n<p>From Stefen's comment</p>\n\n<p>The Array passed to the block can be decomposed like this</p>\n\n<pre><code>items.each_with_object(Hash.new(0)) {|(k,v), h| h[k] += v}.to_a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2300, "user_id": 1262303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/855975ff404621dc525c72b618d95dcc?s=128&d=identicon&r=PG", "display_name": "randym", "link": "https://stackoverflow.com/users/1262303/randym"}, "edited": false, "score": 1, "creation_date": 1454482685, "post_id": 35169654, "comment_id": 58058513, "body": "I would expect a larger data set would give us a better understanding of the performance metrics here. So much of Ruby&#39;s performance relates to object creation and garbage collection."}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 1, "creation_date": 1454485375, "post_id": 35169654, "comment_id": 58059820, "body": "Sure. The above is just for fun and to show what can easily be done with the language and its standard library."}, {"owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "edited": false, "score": 1, "creation_date": 1454510697, "post_id": 35169654, "comment_id": 58077142, "body": "Wow that is fascinating"}, {"owner": {"reputation": 217, "user_id": 1787104, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iDl7B.jpg?s=128&g=1", "display_name": "Goldnuggets", "link": "https://stackoverflow.com/users/1787104/goldnuggets"}, "edited": false, "score": 1, "creation_date": 1454526399, "post_id": 35169654, "comment_id": 58088079, "body": "Thank you for documenting all of these benchmarks @EricPlaton. This is really interesting."}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 1, "creation_date": 1454544830, "post_id": 35169654, "comment_id": 58097614, "body": "Cheers, that was fun question, and quite a few people enjoyed it apparently :-)"}], "tags": [], "owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "is_accepted": false, "score": 3, "last_activity_date": 1454485760, "last_edit_date": 1454485760, "creation_date": 1454479577, "answer_id": 35169654, "question_id": 35168645, "link": "https://stackoverflow.com/questions/35168645/ruby-multidimensional-array-remove-duplicate-in-first-position-add-number-in/35169654#35169654", "title": "Ruby Multidimensional Array - Remove duplicate in first position, add number in second position", "body": "<p>Just to have an alternative, for fun, and play with the language:</p>\n\n<pre><code>items.inject([]) { |arr, el| arr[el[0]] = [el[0], (arr[el[0]] || [_, 0])[1] + el[1]]; arr }.compact\n</code></pre>\n\n<p>Can this be more cryptic?</p>\n\n<pre><code>items.inject([]) { |arr, el|\n  arr[el[0]] = [el[0], (arr[el[0]] || [_, 0])[1] + el[1]]\n  arr\n}.compact\n</code></pre>\n\n<p>The <code>#inject</code> method starts with an empty array and adds elements as it traverses <code>items</code>. Each element <code>el</code> from <code>items</code> is placed at its index in <code>arr</code>. Thus, the first element <code>[60, 3]</code> will be placed at index 60 (a lot of holes) as <code>[60, 3]</code>.</p>\n\n<p>Note the form of each entry in <code>arr</code>: <code>[el[0], (arr[el[0]] || [_, 0])[1] + el[1]]</code>. This says that the first element is the common value, and the second element adds up, initialized at 0.</p>\n\n<p>This solution creates an array with a lot of holes. The <code>compact</code> method removes all holes.</p>\n\n<p>I cannot recommend this solution, except as an exercise with the language.</p>\n\n<hr>\n\n<p>And for some fun, a few answers coming in as I typed, so time for (unfair and non-scientific) comparisons:</p>\n\n<pre><code>require 'benchmark'\n\nitems = [[60, 3], [60, 3], [276, 2], [276, 2], [48, 2], [207, 2], [46, 2],\n  [60, 2], [280, 2], [207, 1], [48, 1], [112, 1], [60, 1], [207, 1], [112, 1],\n  [276, 1], [48, 1], [276, 1], [48, 1], [276, 1], [276, 1], [278, 1], [46, 1],\n  [48, 1], [279, 1], [207, 1]]\n\nBenchmark.bmbm do |x|\n  x.report(:long) { items.group_by {|i| i[0]}.map{|key, value|     [key,value.inject(0){|sum, x| sum + x[1]}]} }\n  x.report(:randym) { items.reduce(Hash.new { |hash, key| hash[key] = 0 }) { |memo, item| memo[item[0]] = memo[item[0]] + item[1]; memo }.to_a }\n  x.report(:eric) { items.inject([]) { |arr, el| arr[el[0]] = [el[0], (arr[el[0]] || [0, 0])[1] + el[1]]; arr  }.compact }\nend\n</code></pre>\n\n<p>Some outputs:</p>\n\n<pre><code>Rehearsal ------------------------------------------\nlong     0.000000   0.000000   0.000000 (  0.000016)\nrandym   0.000000   0.000000   0.000000 (  0.000014)\neric     0.000000   0.000000   0.000000 (  0.000011)\n--------------------------------- total: 0.000000sec\n\n             user     system      total        real\nlong     0.000000   0.000000   0.000000 (  0.000013)\nrandym   0.000000   0.000000   0.000000 (  0.000011)\neric     0.000000   0.000000   0.000000 (  0.000008)\n\n\nRehearsal ------------------------------------------\nlong     0.000000   0.000000   0.000000 (  0.000024)\nrandym   0.000000   0.000000   0.000000 (  0.000014)\neric     0.000000   0.000000   0.000000 (  0.000011)\n--------------------------------- total: 0.000000sec\n\n             user     system      total        real\nlong     0.000000   0.000000   0.000000 (  0.000013)\nrandym   0.000000   0.000000   0.000000 (  0.000011)\neric     0.000000   0.000000   0.000000 (  0.000014)\n</code></pre>\n\n<p>My cryptic and unmaintainable can be best or worse. Long's and Randym's are stable.</p>\n\n<p>A final note, just in case: Subtracting the arrays returned by each solution allows to check that we all get the same results :-)</p>\n"}, {"comments": [{"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 1, "creation_date": 1454485681, "post_id": 35170637, "comment_id": 58059975, "body": "Well, with all due respect, @Santhosh&#39;s solution does not return the expected data structure :-D"}, {"owner": {"reputation": 2300, "user_id": 1262303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/855975ff404621dc525c72b618d95dcc?s=128&d=identicon&r=PG", "display_name": "randym", "link": "https://stackoverflow.com/users/1262303/randym"}, "reply_to_user": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 1, "creation_date": 1454488098, "post_id": 35170637, "comment_id": 58061230, "body": "well spotted, sir! Editing to include to_a"}, {"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "reply_to_user": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 1, "creation_date": 1454494667, "post_id": 35170637, "comment_id": 58065679, "body": "@EricPlaton Nice catch. I&#39;ve corrected it now. -- Thanks."}], "tags": [], "owner": {"reputation": 2300, "user_id": 1262303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/855975ff404621dc525c72b618d95dcc?s=128&d=identicon&r=PG", "display_name": "randym", "link": "https://stackoverflow.com/users/1262303/randym"}, "is_accepted": false, "score": 3, "last_activity_date": 1454488245, "last_edit_date": 1454488245, "creation_date": 1454483434, "answer_id": 35170637, "question_id": 35168645, "link": "https://stackoverflow.com/questions/35168645/ruby-multidimensional-array-remove-duplicate-in-first-position-add-number-in/35170637#35170637", "title": "Ruby Multidimensional Array - Remove duplicate in first position, add number in second position", "body": "<p>Another look at performance with each_with_object included.\nLooks like Santhosh is the winner.</p>\n\n<pre><code>require 'benchmark'\n\nitems = [[60, 3], [60, 3], [276, 2], [276, 2], [48, 2], [207, 2], [46, 2],\n  [60, 2], [280, 2], [207, 1], [48, 1], [112, 1], [60, 1], [207, 1], [112, 1],\n  [276, 1], [48, 1], [276, 1], [48, 1], [276, 1], [276, 1], [278, 1], [46, 1],\n  [48, 1], [279, 1], [207, 1]]\n\n20.times { items.concat items }\n\nBenchmark.bmbm do |x|\n  x.report(:long) { items.group_by {|i| i[0]}.map{|key, value|     [key,value.inject(0){|sum, x| sum + x[1]}]} }\n  x.report(:randym) { items.reduce(Hash.new { |hash, key| hash[key] = 0 }) { |memo, item| memo[item[0]] = memo[item[0]] + item[1]; memo }.to_a }\n  x.report(:eric) { items.inject([]) { |arr, el| arr[el[0]] = [el[0], (arr[el[0]] || [0, 0])[1] + el[1]]; arr  }.compact }\n  x.report(:santhosh) { (items.each_with_object(Hash.new(0)) {|a, h| h[a[0]] += a[1]  }).to_a }\nend\n\nRehearsal --------------------------------------------\nlong       7.130000   0.740000   7.870000 (  8.464277)\nrandym     6.380000   0.530000   6.910000 (  7.520760)\neric       7.730000   0.680000   8.410000 (  9.135986)\nsanthosh   5.530000   0.460000   5.990000 (  6.518203)\n---------------------------------- total: 29.180000sec\n\n               user     system      total        real\nlong       7.000000   0.740000   7.740000 (  8.349310)\nrandym     6.260000   0.540000   6.800000 (  7.426409)\neric       7.630000   0.590000   8.220000 (  8.882282)\nsanthosh   5.550000   0.460000   6.010000 (  6.736294)\n</code></pre>\n\n<p>Ruby 2.1.2\nMac Book Pro (2013)\n3 GHz Intel Core i7\n8 GB 1600 MHz DDR3</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1454489252, "post_id": 35171846, "comment_id": 58061898, "body": "Interesting approach, but <code>shift</code> will also alter <code>items</code>."}, {"owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1454489944, "post_id": 35171846, "comment_id": 58062363, "body": "Really? Cannot get it to produce correct values. Could you show the entire code?"}], "tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 4, "last_activity_date": 1454490233, "last_edit_date": 1454490233, "creation_date": 1454487810, "answer_id": 35171846, "question_id": 35168645, "link": "https://stackoverflow.com/questions/35168645/ruby-multidimensional-array-remove-duplicate-in-first-position-add-number-in/35171846#35171846", "title": "Ruby Multidimensional Array - Remove duplicate in first position, add number in second position", "body": "<pre><code>items.group_by(&amp;:shift).map{|k,v| [k,v.flatten.inject(:+)]}.to_h\n</code></pre>\n\n<p>But in real code that others should understand I would split it up into two lines and use this approach:</p>\n\n<pre><code>result = Hash.new(0)\nitems.each{|key,value| result[key] += value}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 510, "user_id": 4235198, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b3c1bdb69d18bf2c9a94628de6b6185d?s=128&d=identicon&r=PG&f=1", "display_name": "Gourav", "link": "https://stackoverflow.com/users/4235198/gourav"}, "is_accepted": false, "score": 3, "last_activity_date": 1454488318, "creation_date": 1454488318, "answer_id": 35171975, "question_id": 35168645, "link": "https://stackoverflow.com/questions/35168645/ruby-multidimensional-array-remove-duplicate-in-first-position-add-number-in/35171975#35171975", "title": "Ruby Multidimensional Array - Remove duplicate in first position, add number in second position", "body": "<pre><code>items = [[60, 3], [60, 3], [276, 2], [276, 2], [48, 2], [207, 2], [46, 2],\n [60, 2], [280, 2], [207, 1], [48, 1], [112, 1], [60, 1], [207, 1], [112, 1],\n [276, 1], [48, 1], [276, 1], [48, 1], [276, 1], [276, 1], [278, 1], [46, 1],\n [48, 1], [279, 1], [207, 1]]\n\nhash = Hash.new(0)\nitems.each do |item|\n  hash[item[0]] += item[1]\nend\n\nhash\n{60=&gt;9, 276=&gt;8, 48=&gt;6, 207=&gt;5, 46=&gt;3, 280=&gt;2, 112=&gt;2, 278=&gt;1, 279=&gt;1}\n\nhash.to_a\n[[60, 9], [276, 8], [48, 6], [207, 5], [46, 3], [280, 2], [112, 2], [278, 1], [279, 1]]\n</code></pre>\n"}], "owner": {"reputation": 217, "user_id": 1787104, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iDl7B.jpg?s=128&g=1", "display_name": "Goldnuggets", "link": "https://stackoverflow.com/users/1787104/goldnuggets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 35168864, "answer_count": 7, "score": 4, "last_activity_date": 1454494281, "creation_date": 1454474440, "last_edit_date": 1454475591, "question_id": 35168645, "link": "https://stackoverflow.com/questions/35168645/ruby-multidimensional-array-remove-duplicate-in-first-position-add-number-in", "title": "Ruby Multidimensional Array - Remove duplicate in first position, add number in second position", "body": "<p>For this array: </p>\n\n<pre><code>items = [[60, 3], [60, 3], [276, 2], [276, 2], [48, 2], [207, 2], [46, 2],\n [60, 2], [280, 2], [207, 1], [48, 1], [112, 1], [60, 1], [207, 1], [112, 1],\n [276, 1], [48, 1], [276, 1], [48, 1], [276, 1], [276, 1], [278, 1], [46, 1],\n [48, 1], [279, 1], [207, 1]]\n</code></pre>\n\n<p>I want to combine common numbers in the first positions of each sub-array, and add the numbers in the second positions together.</p>\n\n<p>For instance, you'll see the first four sub-arrays here are: <code>[60, 3], [60, 3], [276, 2], [276, 2]</code></p>\n\n<p>This would become: <code>[60,6], [276,4]</code> and so on.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "edited": false, "score": 1, "creation_date": 1454474107, "post_id": 35168437, "comment_id": 58055249, "body": "what do you have in def set_invoice method ? It seems @invoice variable is not set when you try to view show action hence the error"}, {"owner": {"reputation": 181, "user_id": 3621476, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QlmQX.jpg?s=128&g=1", "display_name": "huhuhu", "link": "https://stackoverflow.com/users/3621476/huhuhu"}, "edited": false, "score": 1, "creation_date": 1454474221, "post_id": 35168437, "comment_id": 58055296, "body": "Could you show us method ` set_invoice`?"}, {"owner": {"reputation": 1042, "user_id": 2176659, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3530d47fb685ef92507d4cd2e0221ab6?s=128&d=identicon&r=PG&f=1", "display_name": "Ravendra Kumar", "link": "https://stackoverflow.com/users/2176659/ravendra-kumar"}, "edited": false, "score": 0, "creation_date": 1454482889, "post_id": 35168437, "comment_id": 58058597, "body": "where is set_invoice method . Can you please paste code of set_invoice method?"}, {"owner": {"reputation": 3, "user_id": 2829142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a4f8c0aed6fded93cab87f40abf01d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyBurst", "link": "https://stackoverflow.com/users/2829142/johnnyburst"}, "edited": false, "score": 0, "creation_date": 1454516429, "post_id": 35168437, "comment_id": 58081458, "body": "Here is my set invoice        InvoicesController &lt; ApplicationController       before_action :set_invoice, only: [:show, :edit, :update, :destroy]        private       # Use callbacks to share common setup or constraints betweenactions.       def set_invoice       @search = Invoice.search(params[:q])"}, {"owner": {"reputation": 3, "user_id": 2829142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a4f8c0aed6fded93cab87f40abf01d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyBurst", "link": "https://stackoverflow.com/users/2829142/johnnyburst"}, "edited": false, "score": 0, "creation_date": 1454516651, "post_id": 35168437, "comment_id": 58081653, "body": "Here is the method. Does it need to be made public maybe?           private      def set_invoice      search = Invoice.search(params[:q])      invoices = @search.result      end"}], "answers": [{"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 0, "last_activity_date": 1454505193, "creation_date": 1454505193, "answer_id": 35178065, "question_id": 35168437, "link": "https://stackoverflow.com/questions/35168437/no-method-error-in-show-html-erb-known-good-works-fine-file-copy-paste-doesnt/35178065#35178065", "title": "No Method Error in show.html.erb, known good works fine, file copy/paste doesn&#39;t work", "body": "<p>The problem is that you've not populated <code>@invoice</code> (<code>nil:NilClass</code>), hence you cannot call <code>.company</code> on it.</p>\n\n<p>You should have the following:</p>\n\n<pre><code>#app/controllers/invoices_controller.rb\nclass InvoicesController &lt; ApplicationController\n   before_action :set_invoice, only: [:show, :edit, :update, :destroy]\n\n   def show\n   end\n\n   private\n\n   def set_invoice\n      @invoice = Invoice.find params[:id]\n   end\nend\n\n#app/views/invoices/show.html.erb\n&lt;%= @invoice.company %&gt;\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>NoMethodError in Invoices#show \n  undefined method `company' for nil:NilClass</p>\n</blockquote>\n\n<p>The best way to work <em>around</em> (not fix) this is to use the <a href=\"http://api.rubyonrails.org/v4.2.5/classes/Object.html#method-i-try\" rel=\"nofollow\"><code>.try</code></a> method:</p>\n\n<pre><code>&lt;%= @invoice.try :company %&gt;\n</code></pre>\n\n<p>Just an FYI in case you hit a similar problem in future.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 2829142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a4f8c0aed6fded93cab87f40abf01d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyBurst", "link": "https://stackoverflow.com/users/2829142/johnnyburst"}, "is_accepted": false, "score": 0, "last_activity_date": 1454532038, "creation_date": 1454532038, "answer_id": 35187266, "question_id": 35168437, "link": "https://stackoverflow.com/questions/35168437/no-method-error-in-show-html-erb-known-good-works-fine-file-copy-paste-doesnt/35187266#35187266", "title": "No Method Error in show.html.erb, known good works fine, file copy/paste doesn&#39;t work", "body": "<p>I reviewed and corrected the invoices_controller.rb. Pulled out about 29 lines of code and then updated the private method.</p>\n\n<pre><code>respond_to do |format|\n  if @invoice.save\n    format.html { redirect_to @invoice, notice: 'Invoice was successfully created.' }\n    format.json { render :show, status: :created, location: @invoice }\n  else\n    format.html { render :new }\n    format.json { render json: @invoice.errors, status: :unprocessable_entity }\n  end\nend\nend\n\nprivate\n  # Use callbacks to share common setup or constraints between actions.\n  def set_invoice\n    @invoice = Invoice.find(params[:id])\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 2829142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a4f8c0aed6fded93cab87f40abf01d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyBurst", "link": "https://stackoverflow.com/users/2829142/johnnyburst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1454532038, "creation_date": 1454473095, "question_id": 35168437, "link": "https://stackoverflow.com/questions/35168437/no-method-error-in-show-html-erb-known-good-works-fine-file-copy-paste-doesnt", "title": "No Method Error in show.html.erb, known good works fine, file copy/paste doesn&#39;t work", "body": "<p>I'm running a rails 4./ruby 2.3 environment trying to get a rails app up and working and it's breaking somewhere down the line with the following error:</p>\n\n<p>NoMethodError in Invoices#show <br>\nundefined method `company' for nil:NilClass</p>\n\n<pre><code>    &lt;p&gt;\n      &lt;strong&gt;Company:&lt;/strong&gt;\n      &lt;%= @invoice.company %&gt;\n    &lt;/p&gt;\n\n    &lt;p&gt;\n</code></pre>\n\n<p>Now, I've added alot of styling and edits to this app to build functionality and appearance. That may have broken it and am not sure where. What I did to fix it is make another app with the same \"RAILS GENERATE\" commands and variables as before, so it's just a basic app. Which DOES work.</p>\n\n<p>Looking at the two app's side by side, within InvoicesController, this is the same:</p>\n\n<pre><code># GET /invoices/1\n# GET /invoices/1.json\ndef show\nend\n</code></pre>\n\n<p>When I copy the show.html.erb file from the known good and tested app, I get the following:</p>\n\n<p>NoMethodError in Invoices#show \nundefined method `amount' for nil:NilClass</p>\n\n<pre><code>&lt;p&gt;\n&lt;strong&gt;Amount:&lt;/strong&gt;\n&lt;%= @invoice.amount %&gt; &lt;%= @invoice.currency %&gt;\n\n&lt;/p&gt;\n</code></pre>\n\n<p>I looked at the error from terminal and got this:</p>\n\n<pre><code>ActiveRecord::SchemaMigration Load (0.8ms)  SELECT \"schema_migrations\".*     \nFROM \"schema_migrations\"\nProcessing by InvoicesController#show as HTML\nParameters: {\"id\"=&gt;\"14\"}\nRendered invoices/show.html.erb within layouts/application 35ms)         Completed 500 Internal Server Error in 68ms (ActiveRecord: 0.0ms)\n\napp/views/invoices/show.html.erb:12:in `_app_views_invoices_show_html_erb__4598034618316500664_30241380'\n</code></pre>\n\n<p>Here is the top of the InvoicesController:</p>\n\n<pre><code>class InvoicesController &lt; ApplicationController \nbefore_action :set_invoice, only: [:show, :edit, :update, :destroy]\n</code></pre>\n\n<p>Can you help? Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "lambda", "paperclip", "jcrop"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5862105, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wACSatjbatg/AAAAAAAAAAI/AAAAAAAABiw/BR3wiLBYgSg/photo.jpg?sz=128", "display_name": "DAL", "link": "https://stackoverflow.com/users/5862105/dal"}, "is_accepted": false, "score": 0, "last_activity_date": 1454513941, "creation_date": 1454513941, "answer_id": 35181318, "question_id": 35167993, "link": "https://stackoverflow.com/questions/35167993/get-jcrop-coordinates-to-convert-options-in-paperclip-and-rails-4/35181318#35181318", "title": "get Jcrop coordinates to convert_options in Paperclip and Rails 4", "body": "<p>The solution seemed to be the order I put the params in params method. I had to put the coordinates first and then the image second. I found it here:</p>\n\n<p><a href=\"https://github.com/thoughtbot/paperclip/issues/1533\" rel=\"nofollow\">https://github.com/thoughtbot/paperclip/issues/1533</a></p>\n\n<p>I also changed the has_attached_file section but I don't know if that had anything to do with the problem. But here it is anyway. </p>\n\n<pre><code>has_attached_file :muse_img,\n:styles =&gt; lambda { |attachment| \n\n    crop_convert_options = attachment.instance.get_coor\n\n    {\n        original: {\n            convert_options: crop_convert_options\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5862105, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wACSatjbatg/AAAAAAAAAAI/AAAAAAAABiw/BR3wiLBYgSg/photo.jpg?sz=128", "display_name": "DAL", "link": "https://stackoverflow.com/users/5862105/dal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454513941, "creation_date": 1454470335, "last_edit_date": 1495535305, "question_id": 35167993, "link": "https://stackoverflow.com/questions/35167993/get-jcrop-coordinates-to-convert-options-in-paperclip-and-rails-4", "title": "get Jcrop coordinates to convert_options in Paperclip and Rails 4", "body": "<p>I'm trying to take user hidden field parameters from Jcrop and crop an image before putting it on the database. I've found a few tutorials and questions but none address my exact problem. </p>\n\n<p>This comes the closest. It looks like the poster was trying to use a single parameter from a selection. I have 4 integers. I didn't think that would matter so I assume it's the 'has_attached_file' part:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7815375/supplying-a-variable-string-to-model-for-paperclip-imagemagik-resizing\">Supplying a variable string to model for Paperclip Imagemagik resizing</a></p>\n\n<p>That combined with this:</p>\n\n<p><a href=\"https://github.com/thoughtbot/paperclip#dynamic-configuration\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/paperclip#dynamic-configuration</a></p>\n\n<p>Here is what I have,</p>\n\n<p>MODEL:</p>\n\n<pre><code>class Muse &lt; ActiveRecord::Base\nattr_accessor :w, :h, :x, :y\n\ndef get_coor \n\n #turn parameters into class variables\n  @w = self.w\n  @h = self.h\n  @x = self.x\n  @y = self.y\n\n  #build string for options\n  cropper = \"-crop #{@w.to_i}x#{@h.to_i}+#{@x.to_i}+#{@y.to_i} -resize 200x200\"\n\n  #return string of the convert options I want\n  @get_coor = cropper\n\nend\n\nbelongs_to :user\ndefault_scope -&gt; { order(created_at: :desc) }\n\nhas_attached_file :muse_img, styles: lambda { |attachment| { original: (attachment.instance.get_coor) } }\n\nvalidates_attachment :muse_img, presence: true,\n                 content_type: { content_type: [\"image/jpeg\"] },\n                 size: { in: 0..500.kilobytes }\n\nend\n</code></pre>\n\n<p>I don't get errors. But it's acting like the get_coor method is calling nothing. </p>\n\n<p>Before this I tried string interpolations directly on the convert_options, but it kept coming out as nil for all the coordinates. I'm new to Rails and Ruby so I'm still a little hazy on lambdas. Hopefully it's just a syntax error. Thanks for any help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "bcrypt"], "comments": [{"owner": {"reputation": 1288, "user_id": 170400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/37ius.jpg?s=128&g=1", "display_name": "Andrew K", "link": "https://stackoverflow.com/users/170400/andrew-k"}, "edited": false, "score": 0, "creation_date": 1454472409, "post_id": 35167914, "comment_id": 58054719, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/18014317/bcrypt-ext-so-loaderror\">bcrypt_ext. so (LoadError)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 1, "creation_date": 1454470088, "post_id": 35167936, "comment_id": 58054071, "body": "I tried that. When i type in &quot;make&quot; i get its not a recognized command"}, {"owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "reply_to_user": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 0, "creation_date": 1454470276, "post_id": 35167936, "comment_id": 58054127, "body": "if you have downloaded ruby devkit, make should be included. Run the file <code>devkitvars.bat</code> which is in the devkit install folder. It will configure the correct environment for ruby devkit. Then run <code>make</code> and <code>make install</code> should work."}, {"owner": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 0, "creation_date": 1454470559, "post_id": 35167936, "comment_id": 58054180, "body": "i did run devkitvars.bat right after downloading the devkit. make still doesnt work"}, {"owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "reply_to_user": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 1, "creation_date": 1454470687, "post_id": 35167936, "comment_id": 58054222, "body": "Have you added the devkit/bin and devkit/mingw/bin paths to your PATH var?"}, {"owner": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 0, "creation_date": 1454470885, "post_id": 35167936, "comment_id": 58054273, "body": "is the name of the variable &quot;PATH&quot;?"}, {"owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "reply_to_user": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 0, "creation_date": 1454470982, "post_id": 35167936, "comment_id": 58054293, "body": "This allows you to all make in your command prompt. Then cd into your gem dir and type make. This will build the makefile."}, {"owner": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 0, "creation_date": 1454471207, "post_id": 35167936, "comment_id": 58054374, "body": "can you please tell me what var&#39;s to add to my env var"}, {"owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "reply_to_user": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 0, "creation_date": 1454471536, "post_id": 35167936, "comment_id": 58054462, "body": "<code>C:\\&lt;Current Folder&gt; C:\\&lt;DevKit Path&gt;\\devkitvars.bat</code>"}, {"owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "reply_to_user": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 0, "creation_date": 1454471553, "post_id": 35167936, "comment_id": 58054472, "body": "remember to restart server after <code>make install</code>"}, {"owner": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 0, "creation_date": 1454472383, "post_id": 35167936, "comment_id": 58054708, "body": "now im getting this error:  There was an error while trying to load the gem &#39;uglifier&#39;"}, {"owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "reply_to_user": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 0, "creation_date": 1454472444, "post_id": 35167936, "comment_id": 58054734, "body": "that should be a separate error. Is your make working now?"}, {"owner": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 0, "creation_date": 1454472522, "post_id": 35167936, "comment_id": 58054759, "body": "yes my make is working however my server wont start since it says it cant load the uglifier gem"}, {"owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "reply_to_user": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 0, "creation_date": 1454472578, "post_id": 35167936, "comment_id": 58054780, "body": "coool! have u restarted the server yet?"}, {"owner": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 0, "creation_date": 1454472675, "post_id": 35167936, "comment_id": 58054816, "body": "i havent been able to start it since my make started working. and the server was off while during the process of running make"}, {"owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "reply_to_user": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "edited": false, "score": 0, "creation_date": 1454472783, "post_id": 35167936, "comment_id": 58054848, "body": "Hmm, I am not sure how to deal with the uglifier gem. I havent encountered that. You may need to create a new post and ask for someone&#39;s help since I can only help with loading bcrypt_ext... I am sorry about that :("}, {"owner": {"reputation": 93, "user_id": 2543634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cac10556f08ca235041c7a5f28e6613?s=128&d=identicon&r=PG", "display_name": "RainwalkerJake", "link": "https://stackoverflow.com/users/2543634/rainwalkerjake"}, "edited": false, "score": 0, "creation_date": 1486084575, "post_id": 35167936, "comment_id": 71205555, "body": "On <b>Ruby on Rails5</b> the <b>Devkit</b> is inside the c:\\RailsInstaller folder &lt;br/&gt; <b>Gem Path:</b> C:\\RailsInstaller\\Ruby2.3.0\\lib\\ruby\\gems\\2.3.0\\gems\\bcrypt-&zwnj;&#8203;\u200c\u200b3.1.11-x86-mingw32&zwnj;&#8203;\\e\u200c\u200bxt\\mri"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6457240"}, "edited": false, "score": 0, "creation_date": 1487546817, "post_id": 35167936, "comment_id": 71820807, "body": "still not working in rails 5 getting &quot;C:/RailsInstaller/Ruby2.3.0/include/ruby-2.3.0/i386-mingw32&zwnj;&#8203;/ruby/config.h:168:1&zwnj;&#8203;5: error: two or more data types in declaration specifiers  #define uid_t int&quot; this error while running make command"}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1518519493, "post_id": 35167936, "comment_id": 84530700, "body": "I get <a href=\"https://pastebin.com/raw/ZQBqYLTH\" rel=\"nofollow noreferrer\">pastebin.com/raw/ZQBqYLTH</a>    <code>make: *** No rule to make target</code> <code>&#47;C&#47;Ruby24-x64&#47;include&#47;ruby-2.4.0&#47;ruby.h&#39;, needed by</code> <code>bcrypt_ext.o&#39;.  Stop.</code>"}], "tags": [], "owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "is_accepted": true, "score": 5, "last_activity_date": 1454469920, "creation_date": 1454469920, "answer_id": 35167936, "question_id": 35167914, "link": "https://stackoverflow.com/questions/35167914/loaderror-cannot-load-such-file-bcrypt-ext/35167936#35167936", "title": "LoadError: cannot load such file \u2014 bcrypt_ext", "body": "<p>try </p>\n\n<pre><code>C:\\&gt; gem install --no-ri --no-rdoc bcrypt\nC:\\&gt; cd (path to gems root)\\bcrypt-3.1.7-x86-mingw32\\ext\\mri\nC:\\(path to gems root)\\bcrypt-3.1.7-x86-mingw32\\ext\\mri&gt; ruby extconf.rb\nC:\\(path to gems root)\\bcrypt-3.1.7-x86-mingw32\\ext\\mri&gt; make\nC:\\(path to gems root)\\bcrypt-3.1.7-x86-mingw32\\ext\\mri&gt; make install\n</code></pre>\n\n<p>reference: <a href=\"https://www.alib.jp/entries/bcrypt_ext_load_error_on_ruby21x\" rel=\"noreferrer\">https://www.alib.jp/entries/bcrypt_ext_load_error_on_ruby21x</a></p>\n"}, {"comments": [{"owner": {"reputation": 13883, "user_id": 6815131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c38385f9eb57b70176498fa5c3b4c99?s=128&d=identicon&r=PG&f=1", "display_name": "Joe C", "link": "https://stackoverflow.com/users/6815131/joe-c"}, "edited": false, "score": 0, "creation_date": 1485125400, "post_id": 41796825, "comment_id": 70782324, "body": "Can you please edit your answer to include proper sentences?  Makes it a lot easier to understand."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6457240"}, "edited": false, "score": 0, "creation_date": 1487546752, "post_id": 41796825, "comment_id": 71820787, "body": "where to copy this file ?"}], "tags": [], "owner": {"reputation": 212, "user_id": 6335557, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fbf02acafda949bc64f8c4cb6ee40eb5?s=128&d=identicon&r=PG&f=1", "display_name": "MaciekR", "link": "https://stackoverflow.com/users/6335557/maciekr"}, "is_accepted": false, "score": 0, "last_activity_date": 1487628733, "last_edit_date": 1487628733, "creation_date": 1485124040, "answer_id": 41796825, "question_id": 35167914, "link": "https://stackoverflow.com/questions/35167914/loaderror-cannot-load-such-file-bcrypt-ext/41796825#41796825", "title": "LoadError: cannot load such file \u2014 bcrypt_ext", "body": "<p>bcrypt_ext.so file is missing -if you manually copy it to proper folder - in my case \\Ruby23\\lib\\ruby\\gems\\2.3.0\\gems\\bcrypt-3.1.11-x86-mingw32\\lib - it helps. :)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7794318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dcfc668b83d70b577003d00df633e37?s=128&d=identicon&r=PG&f=1", "display_name": "Luis I", "link": "https://stackoverflow.com/users/7794318/luis-i"}, "is_accepted": false, "score": 0, "last_activity_date": 1491074561, "last_edit_date": 1491074561, "creation_date": 1491071834, "answer_id": 43160607, "question_id": 35167914, "link": "https://stackoverflow.com/questions/35167914/loaderror-cannot-load-such-file-bcrypt-ext/43160607#43160607", "title": "LoadError: cannot load such file \u2014 bcrypt_ext", "body": "<p>This worked for me:\n<a href=\"https://github.com/codahale/bcrypt-ruby/issues/142\" rel=\"nofollow noreferrer\">https://github.com/codahale/bcrypt-ruby/issues/142</a></p>\n\n<p>-Uninstall all bcrypt versions: gem uninstall bcrypt </p>\n\n<p>select option 3 (uninstall all)</p>\n\n<p>-Uninstall all bcrypt-ruby versions: gem uninstall bcrypt-ruby</p>\n\n<p>select option 3 (uninstall all)</p>\n\n<p>replace the line in your gemfile by:</p>\n\n<p>to add this line to the gemfile:\ngem 'bcrypt', platforms: :ruby</p>\n\n<p>did not work for me though but to point the gemfile to the git repository did:</p>\n\n<p>gem 'bcrypt', git: '<a href=\"https://github.com/codahale/bcrypt-ruby.git\" rel=\"nofollow noreferrer\">https://github.com/codahale/bcrypt-ruby.git</a>', :require => 'bcrypt'</p>\n\n<p>bundle install </p>\n\n<p>and you should be good to go</p>\n"}, {"tags": [], "owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "is_accepted": false, "score": 0, "last_activity_date": 1518522483, "creation_date": 1518522483, "answer_id": 48766146, "question_id": 35167914, "link": "https://stackoverflow.com/questions/35167914/loaderror-cannot-load-such-file-bcrypt-ext/48766146#48766146", "title": "LoadError: cannot load such file \u2014 bcrypt_ext", "body": "<p>At this link  <a href=\"https://github.com/codahale/bcrypt-ruby/issues/142\" rel=\"nofollow noreferrer\">https://github.com/codahale/bcrypt-ruby/issues/142</a></p>\n\n<p>Somebody mentioned this solution</p>\n\n<pre><code>gem 'bcrypt', git: 'https://github.com/codahale/bcrypt-ruby.git', :require =&gt; 'bcrypt'\n</code></pre>\n\n<p>And it worked for me</p>\n"}], "owner": {"reputation": 97, "user_id": 4454888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fff8beebc1936c0e02b2aa6e3e48e64?s=128&d=identicon&r=PG&f=1", "display_name": "Sony Claba", "link": "https://stackoverflow.com/users/4454888/sony-claba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3361, "favorite_count": 3, "accepted_answer_id": 35167936, "answer_count": 4, "score": 4, "last_activity_date": 1518522483, "creation_date": 1454469691, "question_id": 35167914, "link": "https://stackoverflow.com/questions/35167914/loaderror-cannot-load-such-file-bcrypt-ext", "title": "LoadError: cannot load such file \u2014 bcrypt_ext", "body": "<p>I have tried to deploy devise authentication on my rails app. </p>\n\n<p>I am getting this issue </p>\n\n<p>\"cannot load such file -- bcrypt_ext\"</p>\n\n<p>I see it is a common issue amongst windows based computers but the answers to other questions have not helped me yet.</p>\n\n<p>I am running Windows 8 x64 with x86 ruby and devkit</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 5, "creation_date": 1454467553, "post_id": 35167539, "comment_id": 58053380, "body": "What if you use a simple sort? <code>[&quot;a&quot;, &quot;This&quot;, &quot;test.&quot;, &quot;Is&quot;].sort</code> returns <code>=&gt; [&quot;Is&quot;, &quot;This&quot;, &quot;a&quot;, &quot;test.&quot;]</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1454467748, "post_id": 35167539, "comment_id": 58053423, "body": "What do you want <code>capsort</code> to return for your example?  Please edit to add that.  <code>&quot;string&quot;</code> is not the best name for an array."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454470613, "post_id": 35167539, "comment_id": 58054193, "body": "Your method is just doing <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-partition\" rel=\"nofollow noreferrer\"><code>Enumerable#partition</code></a> the hard way. Toss in <code>Array#flatten</code> and you&#39;re done."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1454498250, "post_id": 35167539, "comment_id": 58068160, "body": "It is <i>extremely</i> impolite to change your question in such a way that it invalidates existing answers. It makes the people who donated a portion of their free time to help you by doing <i>your</i> work for you, look like idiots."}, {"owner": {"reputation": 318, "user_id": 5377872, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153051216381561/picture?type=large", "display_name": "cDitch", "link": "https://stackoverflow.com/users/5377872/cditch"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1454651129, "post_id": 35167539, "comment_id": 58149170, "body": "@J&#246;rgWMittag I apologize sir. I&#39;m new to Ruby and stack overflow, so the ethics and culture are still new. You essentially submitted a &quot;.sort&quot; though, so I can&#39;t imagine this wasted very much of your time. I&#39;m the one who really looks like the fool for not wording my question properly. It&#39;s hard to say I &quot;flipped 180&quot; on the question too. I appended my original post with my desired output to better clarify and added &quot;The key is maintaining the word order.&quot; You shouldn&#39;t be worried about looking like an idiot... your other code was nice, and your profile is impressive. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 318, "user_id": 5377872, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153051216381561/picture?type=large", "display_name": "cDitch", "link": "https://stackoverflow.com/users/5377872/cditch"}, "edited": false, "score": 0, "creation_date": 1454470043, "post_id": 35167669, "comment_id": 58054059, "body": "Not quite. Edited my main post to clarify. Thanks"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 7, "last_activity_date": 1454498870, "last_edit_date": 1454498870, "creation_date": 1454467968, "answer_id": 35167669, "question_id": 35167539, "link": "https://stackoverflow.com/questions/35167539/method-to-front-capitalized-words/35167669#35167669", "title": "Method to front capitalized words", "body": "<p>The question was changed radically, making my earlier answer completely wrong. Now, the answer is:</p>\n\n<pre><code>def capsort(strings)\n  strings.partition(&amp;/\\p{Upper}/.method(:match)).flatten\nend\n\ncapsort([\"a\", \"This\", \"test.\", \"Is\"])\n# =&gt; [\"This\", \"Is\", \"a\", \"test.\"]\n</code></pre>\n\n<p>My earlier answer was:</p>\n\n<pre><code>def capsort(strings)\n  strings.sort\nend\n\ncapsort([\"a\", \"This\", \"test.\", \"Is\"])\n# =&gt; [\"Is\", \"This\", \"a\", \"test.\"]\n</code></pre>\n\n<p><code>'Z' &lt; 'a' # =&gt; true</code>, there's nothing to be done.</p>\n"}, {"comments": [{"owner": {"reputation": 318, "user_id": 5377872, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153051216381561/picture?type=large", "display_name": "cDitch", "link": "https://stackoverflow.com/users/5377872/cditch"}, "edited": false, "score": 1, "creation_date": 1454471197, "post_id": 35168004, "comment_id": 58054372, "body": "Beautifully put sir (or madam)!"}, {"owner": {"reputation": 1288, "user_id": 170400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/37ius.jpg?s=128&g=1", "display_name": "Andrew K", "link": "https://stackoverflow.com/users/170400/andrew-k"}, "edited": false, "score": 0, "creation_date": 1454471861, "post_id": 35168004, "comment_id": 58054558, "body": "I&#39;m not sure how &quot;This&quot; is before &quot;Is&quot;... I&#39;m pretty sure that &#39;i&#39; is before &#39;t&#39; in the alphabet."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1288, "user_id": 170400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/37ius.jpg?s=128&g=1", "display_name": "Andrew K", "link": "https://stackoverflow.com/users/170400/andrew-k"}, "edited": false, "score": 1, "creation_date": 1454472030, "post_id": 35168004, "comment_id": 58054613, "body": "@Anlek, the OP want to preserve the order of the capitalized words and of the non-capitalized words, as well as putting the former first in the array that is returned."}, {"owner": {"reputation": 1288, "user_id": 170400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/37ius.jpg?s=128&g=1", "display_name": "Andrew K", "link": "https://stackoverflow.com/users/170400/andrew-k"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1454472478, "post_id": 35168004, "comment_id": 58054746, "body": "@CarySwoveland, thank you for the explanation, that makes so much more sense! :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1454498070, "post_id": 35168004, "comment_id": 58068034, "body": "@CarySwoveland: Actually, the OP completely changed the question 180&#176; after several answers had already been submitted. First, he <i>did</i> want the array to be sorted. The <a href=\"http://stackoverflow.com/revisions/35167539/1\">original title</a> of the question was &quot;Ruby method to <b>sort</b> capitalized words&quot; (emphasis mine), the tags applied to the question were <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a> and <a href=\"https://stackoverflow.com/questions/tagged/sorting\">sorting</a>, and the name of the method was (and still is) <code>capsort</code>. There was no mention of preserving the order, and no testcases to suggest otherwise. The question is now completely different, invalidating all earlier answers."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1454506372, "post_id": 35168004, "comment_id": 58073868, "body": "@J&#246;rgWMittag You are completely right. So I had upvoted you from the earlier stage. I was committed in editing the question to clarify the OP&#39;s intention of changing the question, but I agree that the OP shouldn&#39;t have changed the question. I felt that you were going to complain at some point."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1454512430, "post_id": 35168004, "comment_id": 58078377, "body": "@J&#246;rg, I was aware of that. I considered commenting on the question about  it having been changed, but thought readers would be aware of that from the OP&#39;s on your quesion. True, some readers may have missed the OPs comment, but I too was tired, and therefore a bit lazy."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1454838228, "post_id": 35168004, "comment_id": 58216563, "body": "Maybe we need a method <code>flat_partition</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1454838992, "post_id": 35168004, "comment_id": 58216744, "body": "@CarySwoveland I don&#39;t think it has much use. Sorting with an array (multiple keys) is much more natural as a use case."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 5, "last_activity_date": 1454470411, "creation_date": 1454470411, "answer_id": 35168004, "question_id": 35167539, "link": "https://stackoverflow.com/questions/35167539/method-to-front-capitalized-words/35168004#35168004", "title": "Method to front capitalized words", "body": "<pre><code>def capsort(words)\n  words.partition{|s| s =~ /\\A[A-Z]/}.flatten\nend\n\ncapsort([\"a\", \"This\", \"test.\", \"Is\"])\n# =&gt; [\"This\", \"Is\", \"a\", \"test.\"]\ncapsort([\"to\", \"return\", \"I\" , \"something\", \"Want\", \"It\", \"like\", \"this.\"])\n# =&gt; [\"I\", \"Want\", \"It\", \"to\", \"return\", \"something\", \"like\", \"this.\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1454472938, "post_id": 35168042, "comment_id": 58054891, "body": "I see nothing that deserves a downvote. Am I missing something? Note you could replace the body of the method with <code>[*words.select { |x| x =~ &#47;^[A-Z]&#47; }, *words.reject { |x| x =~ &#47;^[A-Z]&#47; }]</code>, though <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-partition\" rel=\"nofollow noreferrer\">Enumerable#partition</a>, as used by @sawa, is more efficient."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1454487644, "post_id": 35168042, "comment_id": 58060981, "body": "The use of <code>^</code> gives a bad impression."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1454492426, "post_id": 35168042, "comment_id": 58064071, "body": "Ruby also has a <a href=\"http://ruby-doc.org/core-2.3.0/Object.html#method-i-21-7E\" rel=\"nofollow noreferrer\"><code>!~</code></a> operator: <code>x !~ &#47;^[A-Z]&#47;</code>"}, {"owner": {"reputation": 1512, "user_id": 5731881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5XH8P.png?s=128&g=1", "display_name": "Tim Jasko", "link": "https://stackoverflow.com/users/5731881/tim-jasko"}, "edited": false, "score": 0, "creation_date": 1454506169, "post_id": 35168042, "comment_id": 58073709, "body": "There are most assuredly more efficient ways, and ways to fit it on one line. The question asked for elegant, so I went for the most readable way, since readability is the best kind of elegant. Grab the capitals. Do the opposite to grab the lowercase. Put them together. Anybody should be able to see what is happening without any ruby experience."}], "tags": [], "owner": {"reputation": 1512, "user_id": 5731881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5XH8P.png?s=128&g=1", "display_name": "Tim Jasko", "link": "https://stackoverflow.com/users/5731881/tim-jasko"}, "is_accepted": false, "score": 2, "last_activity_date": 1454505447, "last_edit_date": 1454505447, "creation_date": 1454470636, "answer_id": 35168042, "question_id": 35167539, "link": "https://stackoverflow.com/questions/35167539/method-to-front-capitalized-words/35168042#35168042", "title": "Method to front capitalized words", "body": "<pre><code>def capsort(words)\n    caps = words.select{ |x| x =~ /^[A-Z]/ }\n    lows = words.select{ |x| x !~ /^[A-Z]/ }\n    caps.concat(lows)\nend\n</code></pre>\n"}], "owner": {"reputation": 318, "user_id": 5377872, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153051216381561/picture?type=large", "display_name": "cDitch", "link": "https://stackoverflow.com/users/5377872/cditch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 35168004, "answer_count": 3, "score": 1, "last_activity_date": 1454505447, "creation_date": 1454467034, "last_edit_date": 1454472139, "question_id": 35167539, "link": "https://stackoverflow.com/questions/35167539/method-to-front-capitalized-words", "title": "Method to front capitalized words", "body": "<p>I am trying to move capitalized words to the front of the sentence. I expect to get this:</p>\n\n<pre><code>capsort([\"a\", \"This\", \"test.\", \"Is\"])\n#=&gt; [\"This\", \"Is\", \"a\", \"test.\"]\ncapsort([\"to\", \"return\", \"I\" , \"something\", \"Want\", \"It\", \"like\", \"this.\"])\n#=&gt; [\"I\", \"Want\", \"It\", \"to\", \"return\", \"something\", \"like\", \"this.\"]\n</code></pre>\n\n<p>The key is maintaining the word order.</p>\n\n<p>I feel like I'm very close.</p>\n\n<pre><code>def capsort(words)\n  array_cap = []\n  array_lowcase = []\n  words.each { |x| x.start_with? ~/[A-Z]/ ? array_cap.push(x) : array_lowcase.push(x) }\n  words= array_cap &lt;&lt; array_lowcase\nend\n</code></pre>\n\n<p>Curious to see what other elegant solutions might be.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1454468255, "post_id": 35167497, "comment_id": 58053574, "body": "What is your question?"}, {"owner": {"reputation": 1011, "user_id": 3891638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pqkeX.jpg?s=128&g=1", "display_name": "cozyconemotel", "link": "https://stackoverflow.com/users/3891638/cozyconemotel"}, "edited": false, "score": 2, "creation_date": 1454468626, "post_id": 35167497, "comment_id": 58053670, "body": "you should make sure what he is asking before editing and imposing your interpretation of the question, really."}], "answers": [{"comments": [{"owner": {"reputation": 1011, "user_id": 3891638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pqkeX.jpg?s=128&g=1", "display_name": "cozyconemotel", "link": "https://stackoverflow.com/users/3891638/cozyconemotel"}, "reply_to_user": {"reputation": 11, "user_id": 5859674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7104f124a0849c2872d57a6aca6ce684?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Will", "link": "https://stackoverflow.com/users/5859674/mike-will"}, "edited": false, "score": 0, "creation_date": 1454469148, "post_id": 35167625, "comment_id": 58053819, "body": "Don&#39;t forget to accept and/or vote up the answer if it helped ;) It&#39;s part of our motivation to help people here"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454470796, "post_id": 35167625, "comment_id": 58054246, "body": "Use <code>a !~ b</code>, not <code>!!(a =~ b)</code>."}, {"owner": {"reputation": 1011, "user_id": 3891638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pqkeX.jpg?s=128&g=1", "display_name": "cozyconemotel", "link": "https://stackoverflow.com/users/3891638/cozyconemotel"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454471267, "post_id": 35167625, "comment_id": 58054392, "body": "@Jordan you have to write <code>!(a !~ b)</code> in this case. I think <code>!!(a =~ b)</code> looks better. But I get your point. Perhaps if you rename the method to <code>reject_usr</code> or something and return <code>a !~ b</code> that would be nice and concise."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1454471943, "post_id": 35167625, "comment_id": 58054585, "body": "Ah, my mistake. Poor reading comprehension\u2014I didn&#39;t notice that OP was asserting equality to <code>true</code>/<code>false</code>, not truthiness/falsiness."}], "tags": [], "owner": {"reputation": 1011, "user_id": 3891638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pqkeX.jpg?s=128&g=1", "display_name": "cozyconemotel", "link": "https://stackoverflow.com/users/3891638/cozyconemotel"}, "is_accepted": false, "score": 2, "last_activity_date": 1454479930, "last_edit_date": 1454479930, "creation_date": 1454467745, "answer_id": 35167625, "question_id": 35167497, "link": "https://stackoverflow.com/questions/35167497/validation-of-a-username-with-regex/35167625#35167625", "title": "Validation of a username with regex", "body": "<p>Test case 9 returns <code>true</code> because it satisfies <code>username.length &gt; 3 &amp;&amp; username == username.downcase</code>. Note that <code>\" \".downcase == \" \"</code> here.</p>\n\n<p>Move that <code>return false if username.include?(\" \")</code> up and it should work. I honestly suggest using <code>Regex</code> though.</p>\n\n<pre><code>def validate_usr(username)\n  /\\A[a-z0-9_]{4,16}\\z/ === username\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5859674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7104f124a0849c2872d57a6aca6ce684?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Will", "link": "https://stackoverflow.com/users/5859674/mike-will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454479930, "creation_date": 1454466728, "last_edit_date": 1454468149, "question_id": 35167497, "link": "https://stackoverflow.com/questions/35167497/validation-of-a-username-with-regex", "title": "Validation of a username with regex", "body": "<p>Trying to solve a regex sign-on problem. Here are the rules:</p>\n\n<ul>\n<li>Allowed characters are: lowercase letters, numbers, underscore.</li>\n<li>Length should be between 4 and 16 characters.</li>\n</ul>\n\n<p>Here are the test cases it must pass:</p>\n\n<pre><code>Test.describe(\"Basic tests\") do\n  Test.assert_equals(validate_usr('asddsa'), true)\n  Test.assert_equals(validate_usr('a'), false)\n  Test.assert_equals(validate_usr('Hass'), false)\n  Test.assert_equals(validate_usr('Hasd_12assssssasasasasasaasasasasas'), false)\n  Test.assert_equals(validate_usr(''), false)\n  Test.assert_equals(validate_usr('____'), true)\n  Test.assert_equals(validate_usr('012'), false)\n  Test.assert_equals(validate_usr('p1pp1'), true)\n  Test.assert_equals(validate_usr('asd43 34'), false)\n  Test.assert_equals(validate_usr('asd43_34'), true)\nend\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>def validate_usr(username)\n  if (username.length &gt; 3 &amp;&amp; username == username.downcase)\n    return true\n  elsif\n    username.include?(\" \") == true\n    return false \n  else \n    return false\n  end\nend\n</code></pre>\n\n<p>Running into issues with the test case 9 that has a space involved. It returns <code>true</code>.</p>\n"}, {"tags": ["ruby", "immutability"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 3, "creation_date": 1454465606, "post_id": 35167221, "comment_id": 58052863, "body": "You&#39;re mistaken. Ruby objects (excepting primitives like Fixnums) are passed by reference. If you don&#39;t want a method to be able to modify an object, pass it a copy instead with <code>obj.dup</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1454467411, "post_id": 35167221, "comment_id": 58053339, "body": "&quot;In C, arrays are passed as pointers but I thought Ruby does&#39;t do &#39;pass by reference&#39;&quot; \u2013 Ruby is <i>exactly</i> like C. Ruby is <i>always</i> pass-by-value, just like C. And, similar to C, the value being passed is <i>always</i> a pointer. (In C, you can choose to either pass the value or a pointer to the value. In Ruby, you don&#39;t have that choice. You always pass a pointer.)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1454467415, "post_id": 35167221, "comment_id": 58053340, "body": "And Ruby behaves exactly like C: you cannot mutate the variable binding (because Ruby uses pass-by-value), but you <i>can</i> follow the pointer and mutate the value which is at the other end of the pointer (because Ruby is not a purely functional language, mutating state is possible). It behaves <i>exactly</i> like C does: if I follow the pointer to an array, and mutate the memory location, then other methods who also have their own pointer to that memory location, will see that modification."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1454467451, "post_id": 35167221, "comment_id": 58053351, "body": "Ruby is pass-by-value but the values are references so your methods should duplicate/copy their arguments unless they explicitly want to (and are documented to) alter their arguments."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1454467587, "post_id": 35167221, "comment_id": 58053387, "body": "&quot;What is happening here&quot; \u2013 It&#39;s called <i>mutable state</i>. Some languages don&#39;t have it (e.g. Haskell, Clean), but most do."}], "owner": {"reputation": 67, "user_id": 1798992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpafU.jpg?s=128&g=1", "display_name": "cvb0rg", "link": "https://stackoverflow.com/users/1798992/cvb0rg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1454467328, "answer_count": 0, "score": 0, "last_activity_date": 1454466195, "creation_date": 1454464845, "last_edit_date": 1454466195, "question_id": 35167221, "link": "https://stackoverflow.com/questions/35167221/why-is-a-ruby-method-changing-an-array-outside-its-scope", "closed_reason": "Duplicate", "title": "Why is a Ruby method changing an array outside it&#39;s scope?", "body": "<p>When running this code:</p>\n\n<pre><code>def someFunction(someArray)\n  (0...(someArray.size)).each do |i| someArray[i] += 1 end\n  return someArray\nend\n\narray = [0, 1, 2]\nsomeFunction(array) # =&gt; [1, 2, 3]\narray # =&gt; [1, 2, 3]\n</code></pre>\n\n<p><code>array</code> is changed. In C, arrays are passed as pointers but I thought Ruby does't do 'pass by reference'. What is happening here and how can I make sure a method is not changing something outside it's scope?</p>\n"}, {"tags": ["ruby", "qtruby"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5875426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75e73af8472a83734943292041798172?s=128&d=identicon&r=PG&f=1", "display_name": "rsram312", "link": "https://stackoverflow.com/users/5875426/rsram312"}, "edited": false, "score": 0, "creation_date": 1454515968, "post_id": 35175089, "comment_id": 58081094, "body": "Even I felt the error is related to defining on_click_uAuth(). Basically, I need to write a method  for on_click_uAuth() such that on click of button, it should direct me to a new window . Any suggestions would be welcomed"}, {"owner": {"reputation": 4874, "user_id": 595304, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e4cc4011841c2a363c66e259c68a567f?s=128&d=identicon&r=PG", "display_name": "evotopid", "link": "https://stackoverflow.com/users/595304/evotopid"}, "reply_to_user": {"reputation": 31, "user_id": 5875426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75e73af8472a83734943292041798172?s=128&d=identicon&r=PG&f=1", "display_name": "rsram312", "link": "https://stackoverflow.com/users/5875426/rsram312"}, "edited": false, "score": 0, "creation_date": 1454516642, "post_id": 35175089, "comment_id": 58081643, "body": "Write the method in the Ruby class and connect the signal like in the last code snippet in my answer (replace the close method call with the one you want to make, if it&#39;s only a short action you could even write it directly into the block)"}, {"owner": {"reputation": 31, "user_id": 5875426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75e73af8472a83734943292041798172?s=128&d=identicon&r=PG&f=1", "display_name": "rsram312", "link": "https://stackoverflow.com/users/5875426/rsram312"}, "edited": false, "score": 0, "creation_date": 1454523082, "post_id": 35175089, "comment_id": 58086130, "body": "I have another class defined named as &quot;Auth&quot; which is in a different file . So how do I call that method from another file with click of on_click_uAuth?"}, {"owner": {"reputation": 4874, "user_id": 595304, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e4cc4011841c2a363c66e259c68a567f?s=128&d=identicon&r=PG", "display_name": "evotopid", "link": "https://stackoverflow.com/users/595304/evotopid"}, "reply_to_user": {"reputation": 31, "user_id": 5875426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75e73af8472a83734943292041798172?s=128&d=identicon&r=PG&f=1", "display_name": "rsram312", "link": "https://stackoverflow.com/users/5875426/rsram312"}, "edited": false, "score": 0, "creation_date": 1454525659, "post_id": 35175089, "comment_id": 58087597, "body": "To call the method you need an instance of said class. (You invoke methods on instances/objects.) Now you have to decide where you want to create the instance and where you&#39;ll need it. Also if your class is in another file you have to import that file. In Ruby you most likely want to use require_relative for that."}, {"owner": {"reputation": 31, "user_id": 5875426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75e73af8472a83734943292041798172?s=128&d=identicon&r=PG&f=1", "display_name": "rsram312", "link": "https://stackoverflow.com/users/5875426/rsram312"}, "edited": false, "score": 0, "creation_date": 1454544948, "post_id": 35175089, "comment_id": 58097666, "body": "The above block of code worked for me . It was of great help ."}], "tags": [], "owner": {"reputation": 4874, "user_id": 595304, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e4cc4011841c2a363c66e259c68a567f?s=128&d=identicon&r=PG", "display_name": "evotopid", "link": "https://stackoverflow.com/users/595304/evotopid"}, "is_accepted": false, "score": 0, "last_activity_date": 1454497643, "last_edit_date": 1495541795, "creation_date": 1454496894, "answer_id": 35175089, "question_id": 35166937, "link": "https://stackoverflow.com/questions/35166937/qtruby-stack-level-too-deep-systemstackerror/35175089#35175089", "title": "QtRuby: Stack Level too deep (SystemStackError)", "body": "<p>First of all, I had to change <code>require 'qt'</code> to <code>require 'Qt'</code> on my system, because I use a case-sensitive filesystem and just because of compatibility reasons I would recommend using the correct case.</p>\n\n<p>Once I was able to run your script I realized the stack trace is really just the <code>SystemStackError</code> message you provided. So I looked a bit around and found a useful snippet <a href=\"https://stackoverflow.com/a/28680027/595304\">here</a>: (Apparently you don't need this in Ruby 2.2 anymore but I don't have it installed right now so I didn't bother trying out)</p>\n\n<pre><code>set_trace_func proc {\n  |event, file, line, id, binding, classname| \n  if event == \"call\"  &amp;&amp; caller_locations.length &gt; 500\n    fail \"stack level too deep\"\n  end\n}\n</code></pre>\n\n<p>You add this somewhere before executing the app and the stack trace will already be more useful:</p>\n\n<pre><code>from /usr/lib/ruby/vendor_ruby/2.1.0/Qt/qtruby4.rb:2531:in `debug_level'\nfrom /usr/lib/ruby/vendor_ruby/2.1.0/Qt/qtruby4.rb:2714:in `do_method_missing'\nfrom /usr/lib/ruby/vendor_ruby/2.1.0/Qt/qtruby4.rb:2711:in `do_method_missing'\nfrom /usr/lib/ruby/vendor_ruby/2.1.0/Qt/qtruby4.rb:2667:in `do_method_missing'\nfrom /usr/lib/ruby/vendor_ruby/2.1.0/Qt/qtruby4.rb:469:in `method_missing'\nfrom /usr/lib/ruby/vendor_ruby/2.1.0/Qt/qtruby4.rb:469:in `qt_metacall'\nfrom /usr/lib/ruby/vendor_ruby/2.1.0/Qt/qtruby4.rb:469:in `method_missing'\nfrom /usr/lib/ruby/vendor_ruby/2.1.0/Qt/qtruby4.rb:469:in `qt_metacall'\nfrom /usr/lib/ruby/vendor_ruby/2.1.0/Qt/qtruby4.rb:469:in `method_missing'\nfrom /usr/lib/ruby/vendor_ruby/2.1.0/Qt/qtruby4.rb:469:in `qt_metacall'\nfrom /usr/lib/ruby/vendor_ruby/2.1.0/Qt/qtruby4.rb:469:in `method_missing'\n</code></pre>\n\n<p>So somehow it got stuck in an endless loop of calling a method that is not present (therefore stack level ends up being too deep).</p>\n\n<p>Now I wasn't able to fix your issue, but it seems that some method is missing. I can't see a declaration of <code>on_clicked_uAuth()</code> anywhere and I'm not sure either if <code>quit()</code> can be accessed with the <code>SLOT</code> like that.</p>\n\n<p><strong>Update:</strong> I'm pretty certain now the issue is the <code>SLOT</code> invocation.\nFor example this works perfectly fine:</p>\n\n<pre><code>connect(exit, SIGNAL(:clicked)) { puts \"Hello world.\" }\n</code></pre>\n\n<p>Now the problem here is that <code>quit</code> is not implemented on <code>QtWidget</code> but rather on the application. However you can just close the window and the application will terminate by default if there are no more windows open:</p>\n\n<pre><code>connect(exit, SIGNAL(:clicked)) { close() }\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5875426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75e73af8472a83734943292041798172?s=128&d=identicon&r=PG&f=1", "display_name": "rsram312", "link": "https://stackoverflow.com/users/5875426/rsram312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454497643, "creation_date": 1454462992, "last_edit_date": 1454463220, "question_id": 35166937, "link": "https://stackoverflow.com/questions/35166937/qtruby-stack-level-too-deep-systemstackerror", "title": "QtRuby: Stack Level too deep (SystemStackError)", "body": "<p>I have the following code:</p>\n\n<pre><code>require 'qt'\n\nclass Menu &lt; Qt::Widget\n  slots 'on_clicked_uAuth()'\n  slots 'quit()'\n\n  def initialize(parent = nil)\n    super(parent)\n    setWindowTitle \"Menu\"\n    uAuth_ui\n    exit_ui\n    resize 350, 500\n    move 300, 300\n    show\n  end\n  def uAuth_ui\n    uAuth = Qt::PushButton.new 'Auth', self\n    uAuth.resize 150, 35\n    uAuth.move 100, 100\n    connect uAuth, SIGNAL('clicked()'), self, SLOT('on_clicked_uAuth()')\n  end\n  def exit_ui\n    exit = Qt::PushButton.new 'Exit', self\n    exit.resize 120, 40\n    exit.move 115, 420\n    connect exit, SIGNAL('clicked()'), self, SLOT('quit()')\n  end\nend\n\napp = Qt::Application.new(ARGV)\nMenu.new\napp.exec\n</code></pre>\n\n<p>When I click either button, I get the following error:</p>\n\n<pre><code>stack level too deep (SystemStackError)\n</code></pre>\n\n<p>Can someone let me know what changes I should make so that, when I click the buttons, I get the next screen?</p>\n"}, {"tags": ["ruby", "linux", "networking", "ssh", "puppet"], "comments": [{"owner": {"reputation": 1066, "user_id": 491269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/450a992dcc104d590f95305644659889?s=128&d=identicon&r=PG", "display_name": "daxlerod", "link": "https://stackoverflow.com/users/491269/daxlerod"}, "edited": false, "score": 0, "creation_date": 1454506267, "post_id": 35166695, "comment_id": 58073793, "body": "This won&#39;t solve your connection issues, but you can&#39;t specify a manifest to run with <code>puppet agent -t</code>. The master will use <code>site.pp</code> or an ENC to determine what manifests to apply. Alternatively, you can run <code>puppet apply</code> and specify a manifest, if you have them saved locally."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1454534799, "creation_date": 1454534799, "answer_id": 35188033, "question_id": 35166695, "link": "https://stackoverflow.com/questions/35166695/how-do-i-get-puppet-master-to-run-a-manifest-against-a-puppet-agent-node-when-th/35188033#35188033", "title": "How do I get Puppet Master to run a manifest against a Puppet Agent node when there are different errors?", "body": "<p>You have at least two entirely separate groups of problems.</p>\n\n<p>First, as @daxelrod commented, the Puppet agent just doesn't work like that.  The point of master / agent mode is that the <em>master</em> decides what the node's configuration is supposed to be.  Furthermore, the master does not serve manifest files to agents; rather, it evaluates whatever manifests and data are necessary for it to build a \"catalog\" of resources for the agent to apply.  It is these catalogs that the master serves.</p>\n\n<p>If you want the agent to apply only part of its configuration in any given run then you can use the <code>--tags</code> option to direct it to select a specific subset of the resources from its catalog.  Tags available for selecting can be specified manually in your manifests, and Puppet automatically tags resources with class name segments based on where they are declared, but this does not break down cleanly along the lines of manifest files.</p>\n\n<p>If you really want to apply specific manifest files to your machines then those manifest files and any data or resources they rely upon must be present on the target machine.  In that case, you can use <code>puppet apply</code> instead of using the agent, as @daxelrod observed.</p>\n\n<hr>\n\n<p>Second, as for your network problems, if indeed</p>\n\n<blockquote>\n  <p>The firewalls are turned off on all four machines. These ports are not blocked on any intermediate path: 22, 443, 8140, and 61610 on either network between the Puppet Master and Puppet Agent servers.</p>\n</blockquote>\n\n<p>as you say, then about the only other plausible explanation I can see for \"connection refused\" failures such as the agent reports is that the puppetmaster is not actually running on the machine the agent attempts to connect to, at least not on the port the agent tries to connect on.  That might be because of some kind of name resolution problem (i.e. \"foobar.acme.com\" resolves differently than you expect it to do), because the master is configured to listen on a different port than you think, or simply because you did not successfully start it.</p>\n\n<p>The \"Network is unreachable\" appears simpler to diagnose: if you do not specify a server to the agent via the command line, and you do not configure one in the agent's configuration file, then Puppet tries to connect to a machine named \"puppet\".  This is resolving for you to an address on an unreachable network.  (The message would be different if the agent could not resolve the name at all.)</p>\n\n<p>The really interesting error message is the the SSL handshaking error:</p>\n\n<blockquote>\n  <p>SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol.</p>\n</blockquote>\n\n<p>in that case, the client has successfully connected and attempted to start an SSL handshake sequence, but it does not understand the response from the server.  Most likely this means that the server is not speaking SSL back to the client at all, but I'm in no position to guess what it <em>is</em> speaking.</p>\n\n<hr>\n\n<p>Additionally, you mention <code>sshd_config</code> several times in your question, as if that had something to do with the problem.  Unless you're doing something very unusual, however, neither <code>sshd</code> nor any of its configuration files has any involvement whatever in Puppet runs.</p>\n\n<hr>\n\n<p>Overall, I'm inclined to think that you are dealing with a combination of incorrect expectations, poor understanding of the main system and support components, and perhaps an overambitious start.  Puppet has fairly good documentation, including <a href=\"https://docs.puppetlabs.com/puppet/3.8/reference/pre_install.html\" rel=\"nofollow\">for system installation</a>.  If you're installing from RPMs (maybe <a href=\"https://docs.puppetlabs.com/puppet/3.8/reference/install_el.html\" rel=\"nofollow\">PuppetLabs's</a>) then that will give you a head start, but you will still need to <a href=\"https://docs.puppetlabs.com/puppet/3.8/reference/post_install.html\" rel=\"nofollow\">configure both the master and the agent(s) appropriately</a>.  I suspect you are falling down somewhere here.</p>\n\n<p>By all means, do try to do this in smaller bites.  One master and one agent, on the same network, is about as simple as you can go for a master / agent configuration.  Get that working first.</p>\n"}], "owner": {"reputation": 79, "user_id": 5697119, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/94bf123c7e410d662834e2140e6b868e?s=128&d=identicon&r=PG&f=1", "display_name": "Kiran", "link": "https://stackoverflow.com/users/5697119/kiran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1345, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454534799, "creation_date": 1454461267, "last_edit_date": 1454462759, "question_id": 35166695, "link": "https://stackoverflow.com/questions/35166695/how-do-i-get-puppet-master-to-run-a-manifest-against-a-puppet-agent-node-when-th", "title": "How do I get Puppet Master to run a manifest against a Puppet Agent node when there are different errors?", "body": "<p>I have set up a <code>puppet master and puppet agent server</code> in one network. I have signed the puppet agent's cert request from the puppet master server. I am trying to run a manifest from Puppet Master against the Puppet agent server, but it is failing. The <code>newManifest.p</code>p on both Puppet Master servers calls the Puppet Agent through its <em>FQDN</em>. The <code>/etc/hosts</code> file on both servers has the entries of the FQDN of both servers and their IP addresses. I can ping each server from the other. I can SSH from each server to the other.</p>\n\n<p>All four of these servers in both networks have <code>CentOS 7</code> as the OS with open source <code>Puppet version 3.8.4</code>. The firewalls are turned off on all four machines. These ports are not blocked on any intermediate path: 22, 443, 8140, and 61610 on either network between the Puppet Master and Puppet Agent servers.</p>\n\n<p>In network one, I expect manifests to compile. They never have.</p>\n\n<p>I tried this with sshd_config` to use ports 22, 443, 8140, and 61610 on both the Puppet Master and Puppet agent. When I use this from the puppet master:</p>\n\n<pre><code>puppet agent -t newManifest.pp --server='foobar.acme.com'\n</code></pre>\n\n<p>I get an error:</p>\n\n<pre><code>Unable to fetch my node definition, but the agent will continue: Warning: Connection refused - connect(2).\n</code></pre>\n\n<p>I tried again with sshdconfig to not use any ports specifically. I recycled the sshdconfig services. I run the same command:</p>\n\n<pre><code>puppet agent -t newManifest.pp --server='foobar.acme.com'\n</code></pre>\n\n<p>I get a different error:</p>\n\n<pre><code>Unable to fetch my node definition, but the agent run will continue: connection refused - connect(2).\n</code></pre>\n\n<p>I then tried this command (with no explicit server designation):</p>\n\n<pre><code>puppet agent -t newManifest.pp\n</code></pre>\n\n<p>This time, I get this error:</p>\n\n<pre><code>Unable to fetch my node definition, but the agent will continue: Network is unreachable.\n</code></pre>\n\n<p>In network two, I expect manifests to work. They never have.</p>\n\n<p>I tried this with sshd_config to use ports 22, 443, 8140, and 61610 on both the Puppet Master and Puppet agent. When I use this from the puppet master:</p>\n\n<pre><code>puppet agent -t newManifest.pp --server='foobar.acme.com'\n</code></pre>\n\n<p>I get a different error:</p>\n\n<pre><code>   Unable to fetch my node definition, but the agent run will continue: SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol.\n</code></pre>\n\n<p>I tried again with sshdconfig to not use any ports specifically. I recycled the sshdconfig services. I run the same command:</p>\n\n<pre><code>puppet agent -t newManifest.pp --server='foobar.acme.com'\n</code></pre>\n\n<p>I get a different error:</p>\n\n<pre><code> Unable to fetch my node definition, but the agent run will continue: connection refused - connect(2).\n</code></pre>\n\n<p>I then tried this command (with no explicit server designation):</p>\n\n<pre><code> puppet agent -t newManifest.pp\n</code></pre>\n\n<p>This time, I get this error:</p>\n\n<pre><code> Unable to fetch my node definition, but the agent will continue: No route to host - connect(2).\n</code></pre>\n\n<p>The errors between network one and two are different except when sshd_config is not using any specific ports and the command to compile the manifest explicitly sets the FQDN. Why is this? What is wrong? I have tried to set up Puppet twice just to fix the first instance. I cannot completely reproduce the specific problems in the first network.</p>\n\n<p>How do I get the Puppet Master server to compile a manifest? The puppet agents have signed certificates. I don't understand why the compilation of the manifests always fails.</p>\n"}, {"tags": ["arrays", "ruby", "permutation"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1454463798, "post_id": 35166599, "comment_id": 58052348, "body": "It is not clear. Do you want combinations or permutations?"}, {"owner": {"reputation": 2169, "user_id": 974936, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/92bf3deb0a4fa650b44e7706b0736adb?s=128&d=identicon&r=PG", "display_name": "watzon", "link": "https://stackoverflow.com/users/974936/watzon"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1454463901, "post_id": 35166599, "comment_id": 58052384, "body": "I think I want permutations, but I&#39;m not 100% certain as to the difference yet"}, {"owner": {"reputation": 2169, "user_id": 974936, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/92bf3deb0a4fa650b44e7706b0736adb?s=128&d=identicon&r=PG", "display_name": "watzon", "link": "https://stackoverflow.com/users/974936/watzon"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1454464246, "post_id": 35166599, "comment_id": 58052466, "body": "Whoops. I had a typo. It can be reproduced now"}], "answers": [{"tags": [], "owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1454460927, "creation_date": 1454460927, "answer_id": 35166640, "question_id": 35166599, "link": "https://stackoverflow.com/questions/35166599/get-all-possible-permutations-of-bigger-array/35166640#35166640", "title": "Get all possible permutations of bigger array", "body": "<p>No, not through any built in library or statistical method.</p>\n\n<p>The Combination and Permutation methods implement standard probability theory functions.  That is, \"A things taken B at a time.\"  You cannot create combinations or permutations using these standard methods to take more \"things\" than you actually have in the set.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 4, "last_activity_date": 1454464087, "creation_date": 1454464087, "answer_id": 35167093, "question_id": 35166599, "link": "https://stackoverflow.com/questions/35166599/get-all-possible-permutations-of-bigger-array/35167093#35167093", "title": "Get all possible permutations of bigger array", "body": "<p>Yes, it's possible.</p>\n\n<pre><code>perms = arr.repeated_permutation(4).to_a\n</code></pre>\n"}], "owner": {"reputation": 2169, "user_id": 974936, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/92bf3deb0a4fa650b44e7706b0736adb?s=128&d=identicon&r=PG", "display_name": "watzon", "link": "https://stackoverflow.com/users/974936/watzon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 35167093, "answer_count": 2, "score": 0, "last_activity_date": 1454464225, "creation_date": 1454460597, "last_edit_date": 1454464225, "question_id": 35166599, "link": "https://stackoverflow.com/questions/35166599/get-all-possible-permutations-of-bigger-array", "title": "Get all possible permutations of bigger array", "body": "<p>I am trying to take an array of strings <code>[\"-\", \"+\", \"*\"]</code> and figure out all combinations of them for a given size. This is possible by doing the following:</p>\n\n<pre><code>arr = [\"-\", \"+\", \"*\"]\nperms = arr.permutation(2).to_a\n# =&gt; [[\"-\", \"+\"], [\"-\", \"*\"], [\"+\", \"-\"], [\"+\", \"*\"], [\"*\", \"-\"], [\"*\", \"+\"]]\n</code></pre>\n\n<p>However, I want to get results for an array bigger than the given array. E.g., <code>arr.permutations(4).to_arr</code>. Is this possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "google-places-api", "get-request"], "comments": [{"owner": {"reputation": 26, "user_id": 5866129, "user_type": "registered", "profile_image": "https://graph.facebook.com/1056152754405190/picture?type=large", "display_name": "Ting Shun Ng", "link": "https://stackoverflow.com/users/5866129/ting-shun-ng"}, "edited": false, "score": 0, "creation_date": 1454461278, "post_id": 35166584, "comment_id": 58051660, "body": "Maybe good list iteration on the response like this one [link] (<a href=\"http://stackoverflow.com/questions/13363996/iterating-over-json-in-rails\" title=\"iterating over json in rails\">stackoverflow.com/questions/13363996/&hellip;</a>)"}], "owner": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 399, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1454461581, "creation_date": 1454460526, "question_id": 35166584, "link": "https://stackoverflow.com/questions/35166584/rails-4-parsing-and-iterating-through-google-places-api-json-response", "title": "Rails 4 - Parsing and iterating through Google Places API JSON response", "body": "<p>Using Rails 4 with the http gem to make simple get requests. I am hitting googles api with a url and a couple of parameters in order to return all nearby stadiums in json. </p>\n\n<p>My goal here is to iterate through all of the different stadium results and pull out the photo_reference. </p>\n\n<p>I am able to pull out the photo_reference from the first array like so: </p>\n\n<pre><code>def nearby_places(lat, long)\n  response = HTTP.get(\"https://maps.googleapis.com/maps/api/place/nearbysearch/json?key=mykey&amp;location=#{lat},#{long}&amp;radius=3000&amp;types=stadium\")\n  parsed_response = JSON.parse(response.body)\n  parsed_response[\"results\"][0][\"photos\"][0][\"photo_reference\"]\nend\n</code></pre>\n\n<p>But I am having trouble iterating through and pulling out all photo references if multiple stadiums are returned. What is the best way to go about this? </p>\n\n<p>Here is an example response from Google.</p>\n\n<pre><code>{    \"html_attributions\" : [],    \"results\" : [\n      {\n         \"geometry\" : {\n            \"location\" : {\n               \"lat\" : 32.2285419,\n               \"lng\" : -110.9488008\n            }\n         },\n         \"icon\" : \"https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png\",\n         \"id\" : \"09b3cd5bd149c550db4740a67671b1d33b008531\",\n         \"name\" : \"Arizona Stadium\",\n         \"photos\" : [\n            {\n               \"height\" : 1371,\n               \"html_attributions\" : [\n                  \"\\u003ca href=\\\"https://maps.google.com/maps/contrib/108405732138529965447/photos\\\"\\u003eGoogle one\\u003c/a\\u003e\"\n               ],\n               \"photo_reference\" : \"CmRdAAAALCkhLHgNGOfNExFwmbdFw4vg_J5iWBomKOCh-HgF8ggTMiymuqUvSW7hSpfOjbcQ4iS6jUHf3lWTqzNHYF4b6gtq06ik9MKMCrGjDQgn70vrItbHHBGpHZ77wk8yVCPtEhB9D3W_Kn1W214cqoiRSwZsGhSlMG2x44K3CqOIbgUu-5a_KnGKbg\",\n               \"width\" : 2054\n            }\n         ],\n         \"place_id\" : \"ChIJs_Gb76px1oYRPAYW8gEqUC4\",\n         \"price_level\" : 1,\n         \"rating\" : 3.8,\n         \"reference\" : \"CnRiAAAAcUcY_BnrsZ4Ik9MI7W53JtIvHxVAvvl7lDl1vOkGCQ3uYwOpoR6OYp1cRNkS7LLACJv1Nc_HQjMeu7AIOm1H-9ciunC5Xl6M79wHZ7MB7n1NiQ4GD1HkCxoDTqoBx_qXx3czLkRYG31WSvtUMBNu3hIQzzQK_tSjvMMefqSuNzl3whoUz5o8eZbHCewDHXU7_Pig0bx_w4w\",\n         \"scope\" : \"GOOGLE\",\n         \"types\" : [ \"stadium\", \"point_of_interest\", \"establishment\" ],\n         \"vicinity\" : \"1 National Championship Drive, Tucson\"\n      },\n      {\n         \"geometry\" : {\n            \"location\" : {\n               \"lat\" : 32.2301948,\n               \"lng\" : -110.9460055\n            }\n         },\n         \"icon\" : \"https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png\",\n         \"id\" : \"33aa72ea7a9688ca20333c774ecbbc0f4b29eedc\",\n         \"name\" : \"McKale Memorial Center\",\n         \"opening_hours\" : {\n            \"open_now\" : false,\n            \"weekday_text\" : []\n         },\n         \"photos\" : [\n            {\n               \"height\" : 2132,\n               \"html_attributions\" : [\n                  \"\\u003ca href=\\\"https://maps.google.com/maps/contrib/102117061543892797349/photos\\\"\\u003eJohn Saunders\\u003c/a\\u003e\"\n               ],\n               \"photo_reference\" : \"CmRdAAAAcM0Q5qsRVvptq77wWhfth_hkITyu1bd8jMdJWwDHNqQgb-IAExfc67QJTJU0XCDZ8MnXbLwcfa0lWfoTJT8K051_VsmT-CBS00Na40rL-MglE10RMs4sQBXCOAzkyoqzEhCXc9pTCQvp_DtQDvr0HjU_GhTbWyvV14IraM7osdnYkb2R4cebEQ\",\n               \"width\" : 3097\n            }\n         ],\n         \"place_id\" : \"ChIJDwAsG6tx1oYRjFkokCR3jWY\",\n         \"price_level\" : 1,\n         \"rating\" : 4,\n         \"reference\" : \"CnRpAAAAEAbkIN4gKquA3i2IC0vS4c8K7erBkDTyB6Z3eIEX4u4W3uMBQSgaOeySEOTVng2oIT1pWa1KsIpWqLSYaFVJDhaS800FEEBno5W0Me-TBy7qStmOMFO_jpeQ4iltCrds3enAtMgM9uQNoEPe8ntjtRIQ-lW3pOaDSJ1R4V5RS5UXNBoUF8OhthXnVaCSf6V3nxEFSNBlQ_s\",\n         \"scope\" : \"GOOGLE\",\n         \"types\" : [ \"stadium\", \"point_of_interest\", \"establishment\" ],\n         \"vicinity\" : \"1 National Championship Drive, Tucson\"\n      },\n      {\n         \"geometry\" : {\n            \"location\" : {\n               \"lat\" : 32.2135012,\n               \"lng\" : -110.9189719\n            }\n         },\n         \"icon\" : \"https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png\",\n         \"id\" : \"d387dca1054f23d5a8767f03f9bb9f7b04f6363c\",\n         \"name\" : \"Hi Corbett Field\",\n         \"opening_hours\" : {\n            \"open_now\" : false,\n            \"weekday_text\" : []\n         },\n         \"photos\" : [\n            {\n               \"height\" : 2048,\n               \"html_attributions\" : [\n                  \"\\u003ca href=\\\"https://maps.google.com/maps/contrib/104635440524137932181/photos\\\"\\u003eJose Olmos\\u003c/a\\u003e\"\n               ],\n               \"photo_reference\" : \"CmRdAAAAV1gOFNPOQG-xqMMwhYiFt-p8go-4HXJWtAScAVYSuresCzbOdpz5x5dSMSAc2zlxNVtE_6JzwXKY4OG0ScY-QCEEs5t6XIqAfkcjf8CEqm4vLmkvdJ2Gxi0MbXDkSqwgEhAoCxH8BddGX41yTSh6i6U8GhQpdxiX-S9YVBchYzttaCAbhphbBg\",\n               \"width\" : 1536\n            }\n         ],\n         \"place_id\" : \"ChIJB3zRTjxw1oYRxg2TEV6XwA8\",\n         \"reference\" : \"CnRjAAAAg-sLDnKo_p9oI52MaNlzBBA2dCn874cSwE-Hxxl5dEjOu1HVIGcqXboWQxmVR44GUwgahIMa8XKdEarPggMgBl8eCDWb71u85pjRm8-j-JUuokKq_sxqfjcNf7KnbeM7bb4vl2Soz5vx5wI30udRUBIQOCz6nPaUc6cCGJ7Hi5vCfBoU7aFJXLr2tDCTBos1_3AWwPpqHEY\",\n         \"scope\" : \"GOOGLE\",\n         \"types\" : [ \"stadium\", \"point_of_interest\", \"establishment\" ],\n         \"vicinity\" : \"700 South Randolph Way, Tucson\"\n      },\n      {\n         \"geometry\" : {\n            \"location\" : {\n               \"lat\" : 32.2332841,\n               \"lng\" : -110.9488008\n            }\n         },\n         \"icon\" : \"https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png\",\n         \"id\" : \"a911fe55eaff462d3908c8fea14686f6591660d6\",\n         \"name\" : \"Arizona Wildcats\",\n         \"place_id\" : \"ChIJ____k6lx1oYR5ZkM9y--p6Y\",\n         \"reference\" : \"CnRkAAAA7_fi19QO-sax4_ksm1jRDgGaO9nVNucqo9cCYL8JtwVkt3k_0i0J25QC9AhgkxMHrnPUcNHHtsda_wCqRSDBFUdmaBAmMX4jxE8WUBw-35rxcOoDHpGqftt-wlgLYUgn1JDJP9-Awe03b1hhHbWHwBIQYQIlDlKYKtIKdHRQfuVi7hoUh0w6evypLyiF1GCPy9zuFhuD5R0\",\n         \"scope\" : \"GOOGLE\",\n         \"types\" : [ \"stadium\", \"point_of_interest\", \"establishment\" ],\n         \"vicinity\" : \"Tucson\"\n      },\n      {\n         \"geometry\" : {\n            \"location\" : {\n               \"lat\" : 32.2291294,\n               \"lng\" : -110.9470374\n            }\n         },\n         \"icon\" : \"https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png\",\n         \"id\" : \"28b19ac3c12af2a0de83694b851a1627c6458ad6\",\n         \"name\" : \"MC Kaltr\",\n         \"place_id\" : \"ChIJY7koG6tx1oYR5la-CtsxnbA\",\n         \"reference\" : \"CmRcAAAAZ3bqbYMAtgcG3poewZ0t_7blrOgDXn6oE-e1UyevY6m_lxK7CLSc0MwTsi7m5t-fNUqlrmd-H_kyimy_caYyzrxki5iX580Vu3S5ttBUcTdjbWtjg1v8dy2HiPcLIPU4EhCh52vDSrwqlIbzsCqiliBbGhRipMYv__guCbPYKp1ja8uJkvurGg\",\n         \"scope\" : \"GOOGLE\",\n         \"types\" : [ \"stadium\", \"point_of_interest\", \"establishment\" ],\n         \"vicinity\" : \"1 National Championship Drive, Tucson\"\n      },\n      {\n         \"geometry\" : {\n            \"location\" : {\n               \"lat\" : 32.21510419999999,\n               \"lng\" : -110.9384699\n            }\n         },\n         \"icon\" : \"https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png\",\n         \"id\" : \"626eb52ef7968c58f0c8c4c9aca05bff1fc38962\",\n         \"name\" : \"Drachman Stadium\",\n         \"place_id\" : \"ChIJvc__01pw1oYRV9wdmSg4Pw8\",\n         \"reference\" : \"CnRjAAAALn4CwTuCPfF0KkjO8nJl4k57eSovzcl5z4kjh6gf4UoC126lNyY1Lo-BNMvnFQjK3oPUb1Na5XvvM-BmmshaP2If19jiNdURUCCHftp6zw_2o8W0-ucOtvj4V0oi026dvZJMCFzu8YseLHmTjn5CDRIQenzfrkgA06wBd_4EoJb_eBoU-PESnLdv-4UMmR0SDQJ9P30lXNw\",\n         \"scope\" : \"GOOGLE\",\n         \"types\" : [ \"stadium\", \"point_of_interest\", \"establishment\" ],\n         \"vicinity\" : \"the of 85719, 501 South Plumer Avenue, Tucson\"\n      }    ],    \"status\" : \"OK\" }\n</code></pre>\n"}, {"tags": ["javascript", "html", "ruby", "dom", "automation"], "comments": [{"owner": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1454458944, "post_id": 35166286, "comment_id": 58051024, "body": "what is source of html and use case?"}, {"owner": {"reputation": 1080, "user_id": 5166249, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-WzuHmMgRjOk/AAAAAAAAAAI/AAAAAAAAANM/KmLSxYcVElE/photo.jpg?sz=128", "display_name": "Penny", "link": "https://stackoverflow.com/users/5166249/penny"}, "reply_to_user": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1454459054, "post_id": 35166286, "comment_id": 58051069, "body": "example html: view-source:<a href=\"https://googleblog.blogspot.com/\" rel=\"nofollow noreferrer\">googleblog.blogspot.com</a>  Please don&#39;t <b>inspect the element</b>, but <b>view the source</b> or <b>save the webpage as HTML only</b> instead. Not sure about what to say about the use case...but I need just the content between those tags mentioned above which contains the blog content...Thank you!"}, {"owner": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1454459231, "post_id": 35166286, "comment_id": 58051126, "body": "That doesn&#39;t explain much as to what you are trying to do. There are numerous ways to do what you are asking and approach would depend on use case"}, {"owner": {"reputation": 1080, "user_id": 5166249, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-WzuHmMgRjOk/AAAAAAAAAAI/AAAAAAAAANM/KmLSxYcVElE/photo.jpg?sz=128", "display_name": "Penny", "link": "https://stackoverflow.com/users/5166249/penny"}, "reply_to_user": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1454459360, "post_id": 35166286, "comment_id": 58051168, "body": "Hey just edited my question. Does that clarify the use case?"}, {"owner": {"reputation": 26, "user_id": 5866129, "user_type": "registered", "profile_image": "https://graph.facebook.com/1056152754405190/picture?type=large", "display_name": "Ting Shun Ng", "link": "https://stackoverflow.com/users/5866129/ting-shun-ng"}, "edited": false, "score": 0, "creation_date": 1454460179, "post_id": 35166286, "comment_id": 58051383, "body": "A ID tag on the selected content might be useful, or have an XML reader to do the job."}], "answers": [{"comments": [{"owner": {"reputation": 1080, "user_id": 5166249, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-WzuHmMgRjOk/AAAAAAAAAAI/AAAAAAAAANM/KmLSxYcVElE/photo.jpg?sz=128", "display_name": "Penny", "link": "https://stackoverflow.com/users/5166249/penny"}, "edited": false, "score": 0, "creation_date": 1454460684, "post_id": 35166548, "comment_id": 58051523, "body": "Thank you Don. That&#39;s a good idea...but how should I later extract the content I want and write them into a new HTML?"}, {"owner": {"reputation": 19790, "user_id": 857025, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/wVO8p.png?s=128&g=1", "display_name": "Don Rhummy", "link": "https://stackoverflow.com/users/857025/don-rhummy"}, "reply_to_user": {"reputation": 1080, "user_id": 5166249, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-WzuHmMgRjOk/AAAAAAAAAAI/AAAAAAAAANM/KmLSxYcVElE/photo.jpg?sz=128", "display_name": "Penny", "link": "https://stackoverflow.com/users/5166249/penny"}, "edited": false, "score": 0, "creation_date": 1454460756, "post_id": 35166548, "comment_id": 58051542, "body": "@Penny I&#39;m not going to do this entirely for you (what&#39;s the fun in that?) but what you can do is copy what&#39;s printed out in the console and use that in your new HTML page."}, {"owner": {"reputation": 1080, "user_id": 5166249, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-WzuHmMgRjOk/AAAAAAAAAAI/AAAAAAAAANM/KmLSxYcVElE/photo.jpg?sz=128", "display_name": "Penny", "link": "https://stackoverflow.com/users/5166249/penny"}, "edited": false, "score": 0, "creation_date": 1454461055, "post_id": 35166548, "comment_id": 58051604, "body": "Hi Don, my intention is to automate the whole process...If copy-and-paste the code I want into a new HTML page, I certainly can do that and I dont even need to use the Regex. However, it&#39;s not realistic to do that in bulk..."}, {"owner": {"reputation": 19790, "user_id": 857025, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/wVO8p.png?s=128&g=1", "display_name": "Don Rhummy", "link": "https://stackoverflow.com/users/857025/don-rhummy"}, "reply_to_user": {"reputation": 1080, "user_id": 5166249, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-WzuHmMgRjOk/AAAAAAAAAAI/AAAAAAAAANM/KmLSxYcVElE/photo.jpg?sz=128", "display_name": "Penny", "link": "https://stackoverflow.com/users/5166249/penny"}, "edited": false, "score": 0, "creation_date": 1454461989, "post_id": 35166548, "comment_id": 58051842, "body": "@Penny if you want to automate it, still use the regular expression but use php (you&#39;ll run this in an Apache web server) and load the web page you want via <code>curl</code> and take that content and feed it to your regular expression"}], "tags": [], "owner": {"reputation": 19790, "user_id": 857025, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/wVO8p.png?s=128&g=1", "display_name": "Don Rhummy", "link": "https://stackoverflow.com/users/857025/don-rhummy"}, "is_accepted": false, "score": 0, "last_activity_date": 1454460221, "creation_date": 1454460221, "answer_id": 35166548, "question_id": 35166286, "link": "https://stackoverflow.com/questions/35166286/how-to-automate-selecting-certain-codes-in-an-html/35166548#35166548", "title": "How to automate selecting certain codes in an html?", "body": "<p>You want to use a regular expression. For example:</p>\n\n<pre><code>//The \"m\" means multi-line\nvar regEx = /&lt;div class='post-content' itemprop='articleBody'&gt;([\\s\\S]*?)&lt;\\/div&gt;/m;\n\n//The content (you'll put the javascript at the bottom\nvar bodyCode = document.body.innerHTML;\n\nvar match = bodyCode.match( regEx );\n\n//Prints to the console\nconsole.dir( match );\n</code></pre>\n\n<p>You can see this in action here: <a href=\"https://regex101.com/r/kJ5kW6/1\" rel=\"nofollow\">https://regex101.com/r/kJ5kW6/1</a></p>\n"}, {"comments": [{"owner": {"reputation": 1080, "user_id": 5166249, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-WzuHmMgRjOk/AAAAAAAAAAI/AAAAAAAAANM/KmLSxYcVElE/photo.jpg?sz=128", "display_name": "Penny", "link": "https://stackoverflow.com/users/5166249/penny"}, "edited": false, "score": 0, "creation_date": 1454461322, "post_id": 35166569, "comment_id": 58051674, "body": "Thanks! I&#39;ll take a look at Nokogiri documentation and see if I can find something there."}], "tags": [], "owner": {"reputation": 4350, "user_id": 1825390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0bb91ca3e4bded511a38e4a01c26efb2?s=128&d=identicon&r=PG", "display_name": "xavdid", "link": "https://stackoverflow.com/users/1825390/xavdid"}, "is_accepted": false, "score": 2, "last_activity_date": 1454460416, "creation_date": 1454460416, "answer_id": 35166569, "question_id": 35166286, "link": "https://stackoverflow.com/questions/35166286/how-to-automate-selecting-certain-codes-in-an-html/35166569#35166569", "title": "How to automate selecting certain codes in an html?", "body": "<p>I'm not quite sure what you're asking, but I'll take a crack at it.</p>\n\n<blockquote>\n  <p>Can Ruby modify the DOM on a webpage? </p>\n</blockquote>\n\n<p>Short answer, no. Browsers don't know how to run Ruby. They do know how to run javascript, so that's what usually used for real-time DOM manipulation.</p>\n\n<blockquote>\n  <p>Can I generate a new clean html</p>\n</blockquote>\n\n<p>Yes? At the end of the day, HTML is just a specifically formatted string. If you want to download the source from that page and find everything in the <code>&lt;div class='post-content' itemprop='articleBody'&gt;</code> tag, there are a couple of ways to go about that. The best is probably the <code>nokogiri</code> gem, which is a ruby HTML parser. You'll be able to feed it a string (from a file or otherwise) that represents the old page and strip out what you want. Doing that would look something like this:</p>\n\n<pre><code>require 'nokogiri'\n\npage = Nokogiri::HTML(open(\"https://googleblog.blogspot.com\"))\n# finds the first child of the &lt;div class=\"post-content\"&gt; element\ntext = page.css('.post-content')[0].text \n</code></pre>\n\n<p>I believe that gives you the text you're looking for. More detailed nokogiri instructions can be found <a href=\"http://ruby.bastardsbook.com/chapters/html-parsing/\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 1080, "user_id": 5166249, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-WzuHmMgRjOk/AAAAAAAAAAI/AAAAAAAAANM/KmLSxYcVElE/photo.jpg?sz=128", "display_name": "Penny", "link": "https://stackoverflow.com/users/5166249/penny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1454460416, "creation_date": 1454458592, "last_edit_date": 1454459316, "question_id": 35166286, "link": "https://stackoverflow.com/questions/35166286/how-to-automate-selecting-certain-codes-in-an-html", "title": "How to automate selecting certain codes in an html?", "body": "<p>Hi I have a question about automating selecting certain content in an HTML. So if we <strong>save an webpage as html only</strong>, then we'll get HTML codes along with other stylesheets and javascript codes. However, I only want to extract the HTML codes between <code>&lt;div class='post-content' itemprop='articleBody'&gt;</code>and<code>&lt;/div&gt;</code> and then create a new HTML file that has the extracted HTML codes. Is there a possible way to do it? Example codes are down below:</p>\n\n<pre><code>&lt;html&gt;\n&lt;script src='.....'&gt;\n&lt;/script&gt;\n&lt;style&gt;\n...\n&lt;/style&gt;\n&lt;div class='header-outer'&gt;\n&lt;div class='header-title'&gt;\n&lt;div class='post-content' itemprop='articleBody'&gt;\n&lt;p&gt;content we want&lt;/p&gt;\n&lt;/div&gt;\n&lt;/div&gt;&lt;/div&gt;\n&lt;div class='footer'&gt;\n&lt;/div&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>While I'm typing, I'm thinking about javascript, which seems to be able to manipulate HTML DOM elements..Is Ruby able to do that? Can I generate a new clean html that only contains content between <code>&lt;div class='post-content' itemprop='articleBody'&gt;</code>and<code>&lt;/div&gt;</code> by using javascript or Ruby? However, as for how to write the actual code, I don't have a clue.</p>\n\n<p>So anybody has any idea about it? Thank you so much!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rubygems"], "comments": [{"owner": {"reputation": 5385, "user_id": 1863692, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/047956b4fb1bf3839b4e651b2cdce88e?s=128&d=identicon&r=PG", "display_name": "Andrew Hendrie", "link": "https://stackoverflow.com/users/1863692/andrew-hendrie"}, "edited": false, "score": 0, "creation_date": 1454480069, "post_id": 35166217, "comment_id": 58057365, "body": "whats the output after running <code>ruby -v</code> in your terminal? Also the output of <code>rails -v</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 140, "user_id": 5155500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r3g3s.png?s=128&g=1", "display_name": "gardsa", "link": "https://stackoverflow.com/users/5155500/gardsa"}, "is_accepted": true, "score": 10, "last_activity_date": 1454534914, "creation_date": 1454534914, "answer_id": 35188077, "question_id": 35166217, "link": "https://stackoverflow.com/questions/35166217/rails-server-will-not-run/35188077#35188077", "title": "Rails Server will not run", "body": "<p><strong>EDIT: try running <code>gem pristine --all</code> first.</strong></p>\n\n<p>Try uninstalling and reinstalling bundler:</p>\n\n<p><code>gem uninstall bundler</code> then <code>gem install bundler</code></p>\n\n<p>Then run <code>bundle install</code>. </p>\n\n<p>This will install all the gems you should have specified in your Gemfile, as well as all the extensions.</p>\n\n<p>E.g <code>Bundle complete! 33 Gemfile dependencies, 103 gems now installed.</code></p>\n"}], "owner": {"reputation": 305, "user_id": 5875389, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ae8233e9cc409ae5f21cf6ee47416dce?s=128&d=identicon&r=PG&f=1", "display_name": "wqu", "link": "https://stackoverflow.com/users/5875389/wqu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1684, "favorite_count": 1, "accepted_answer_id": 35188077, "answer_count": 1, "score": 3, "last_activity_date": 1506241644, "creation_date": 1454458163, "last_edit_date": 1454482594, "question_id": 35166217, "link": "https://stackoverflow.com/questions/35166217/rails-server-will-not-run", "title": "Rails Server will not run", "body": "<p>Typing </p>\n\n<pre><code>$ rails server \n</code></pre>\n\n<p>in terminal on mac yields these two errors that I've tried troubleshooting by uninstalling and installing ruby &amp; rails again and get this same error.</p>\n\n<p>Typing </p>\n\n<pre><code>localhost:3000 \n</code></pre>\n\n<p>on the browser brings a broken webpage meaning rails is not running properly.</p>\n\n<p>As a complete beginner, how do i troubleshoot these problems below simply step by step to get rails to run? </p>\n\n<pre><code>Ignoring binding_of_caller-0.7.2 because its extensions are not built.  Try: gem pristine binding_of_caller --version 0.7.2\nIgnoring byebug-8.2.2 because its extensions are not built.  Try: gem pristine byebug --version 8.2.2\nIgnoring debug_inspector-0.0.2 because its extensions are not built.  Try: gem pristine debug_inspector --version 0.0.2\nIgnoring executable-hooks-1.3.2 because its extensions are not built.  Try: gem pristine executable-hooks --version 1.3.2\nIgnoring gem-wrappers-1.2.7 because its extensions are not built.  Try: gem pristine gem-wrappers --version 1.2.7\nIgnoring mysql2-0.4.2 because its extensions are not built.  Try: gem pristine mysql2 --version 0.4.2\nIgnoring nokogiri-1.6.7.2 because its extensions are not built.  Try: gem pristine nokogiri --version 1.6.7.2\nIgnoring binding_of_caller-0.7.2 because its extensions are not built.  Try: gem pristine binding_of_caller --version 0.7.2\nIgnoring byebug-8.2.2 because its extensions are not built.  Try: gem pristine byebug --version 8.2.2\nIgnoring debug_inspector-0.0.2 because its extensions are not built.  Try: gem pristine debug_inspector --version 0.0.2\nIgnoring executable-hooks-1.3.2 because its extensions are not built.  Try: gem pristine executable-hooks --version 1.3.2\nIgnoring gem-wrappers-1.2.7 because its extensions are not built.  Try: gem pristine gem-wrappers --version 1.2.7\nIgnoring mysql2-0.4.2 because its extensions are not built.  Try: gem pristine mysql2 --version 0.4.2\nIgnoring nokogiri-1.6.7.2 because its extensions are not built.  Try: gem pristine nokogiri --version 1.6.7.2\ndyld: lazy symbol binding failed: Symbol not found: _rb_data_typed_object_alloc\n  Referenced from: /Users/Leviathan/.rvm/gems/ruby-2.2.1/gems/debug_inspector-0.0.2/lib/debug_inspector.bundle\n  Expected in: flat namespace\n\ndyld: Symbol not found: _rb_data_typed_object_alloc\n  Referenced from: /Users/Leviathan/.rvm/gems/ruby-2.2.1/gems/debug_inspector-0.0.2/lib/debug_inspector.bundle\n  Expected in: flat namespace\n\nTrace/BPT trap: 5\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "is_accepted": false, "score": 0, "last_activity_date": 1454461747, "last_edit_date": 1454461747, "creation_date": 1454461155, "answer_id": 35166674, "question_id": 35166011, "link": "https://stackoverflow.com/questions/35166011/rails-4-redirecting-to-most-recent-created-record/35166674#35166674", "title": "rails 4 redirecting to most recent created record?", "body": "<p>I would do the following:</p>\n\n<h3>routes.rb</h3>\n\n<pre><code>get 'messages', to: 'messages#most_recent'\n</code></pre>\n\n<h3>message.rb</h3>\n\n<pre><code>class Message &lt; ActiveRecord::Base\n  belongs_to :conversation\n  belongs_to :user\n  #Create a scope for get the most recent record\n  scope :most_recent, :order =&gt; \"created_at DESC\", :limit =&gt; 1\n  validates_presence_of :body, :conversation_id, :user_id\n\n  def message_time\n    created_at.strftime(\"%m/%d/%y at %l:%M %p\")\n  end\nend\n</code></pre>\n\n<h3>messages_controller.rb</h3>\n\n<pre><code>def most_recent\n  @message = Message.most_recent.first\nend\n</code></pre>\n\n<p>Then you can use <code>@message</code> for display the most recent message in a <code>messages/most_recent.html.erb</code> view.</p>\n\n<p>But if you still want to keep your <code>index</code> controller action working, then you will need to add a condition.</p>\n\n<p>You will need to add a separate route for <code>most_recent</code> controller action</p>\n\n<h3>routes.rb</h3>\n\n<pre><code>get 'messages/most_recent' #In this case is not necessary to specify controller action with to:\n</code></pre>\n\n<p>Then in your <code>index</code> controller action</p>\n\n<h3>messages_controller.rb</h3>\n\n<pre><code>def index\n  if SOME CONDITION HERE\n    redirect_to messages_most_recent_path\n  else\n    @conversations = Conversation.all\n    @messages = @conversation.messages\n    if @messages.length &gt; 10\n      @over_ten = true\n      @messages = @messages[-10..-1]\n    end\n    if params[:m]\n      @over_ten = false\n      @messages = @conversation.messages\n    end\n    if @messages.last\n      if @messages.last.user_id != current_user.id\n        @messages.last.read = true;\n      end\n    end\n\n    @message = @conversation.messages.new\n  end\nend\n\ndef most_recent\n  @message = Message.most_recent.first\nend\n</code></pre>\n"}], "owner": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454461747, "creation_date": 1454456867, "question_id": 35166011, "link": "https://stackoverflow.com/questions/35166011/rails-4-redirecting-to-most-recent-created-record", "title": "rails 4 redirecting to most recent created record?", "body": "<p>Building a simple messaging app, <a href=\"https://medium.com/@danamulder/tutorial-create-a-simple-messaging-system-on-rails-d9b94b0fbca1#.qi93y9c2o\" rel=\"nofollow\">using this tutorial</a>, and wanted to know if it's possible for me to redirect to the most recent updated record in the database?</p>\n\n<p><strong>application.html.haml</strong>: </p>\n\n<pre><code>= link_to 'Messages', :conversations\n</code></pre>\n\n<p>I want to be able to change this to <code>localhost:3000/messages</code> and then it'll automatically gets redirected to the most recent message recorded.</p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>resources :conversations do\n  resources :messages\nend\n</code></pre>\n\n<p><strong>conversation.rb</strong></p>\n\n<pre><code>class Conversation &lt; ActiveRecord::Base\n  belongs_to :sender, :foreign_key =&gt; :sender_id, class_name: 'User'\n  belongs_to :recipient, :foreign_key =&gt; :recipient_id, class_name: 'User'\n\n  has_many :messages, dependent: :destroy\n\n  validates_uniqueness_of :sender_id, :scope =&gt; :recipient_id\n\n  scope :between, -&gt; (sender_id,recipient_id) do\n    where(\"(conversations.sender_id = ? AND conversations.recipient_id =?) OR (conversations.sender_id = ? AND conversations.recipient_id =?)\", sender_id,recipient_id, recipient_id, sender_id)\n  end\n\nend\n</code></pre>\n\n<p><strong>messange.rb</strong></p>\n\n<pre><code>class Message &lt; ActiveRecord::Base\n  belongs_to :conversation\n  belongs_to :user\n  validates_presence_of :body, :conversation_id, :user_id\n\n  def message_time\n    created_at.strftime(\"%m/%d/%y at %l:%M %p\")\n  end\nend\n</code></pre>\n\n<p><strong>messages_controller.rb</strong></p>\n\n<pre><code>def index\n  @conversations = Conversation.all\n  @messages = @conversation.messages\n  if @messages.length &gt; 10\n    @over_ten = true\n    @messages = @messages[-10..-1]\n  end\n  if params[:m]\n    @over_ten = false\n    @messages = @conversation.messages\n  end\n  if @messages.last\n    if @messages.last.user_id != current_user.id\n      @messages.last.read = true;\n    end\n  end\n\n  @message = @conversation.messages.new\nend\n</code></pre>\n\n<p>Not sure what information is needed, but just wanted to see if this was possible.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rake"], "answers": [{"comments": [{"owner": {"reputation": 560, "user_id": 2362505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/181c3e1a813fb39b2720f4b2ba34e9cd?s=128&d=identicon&r=PG", "display_name": "harshs08", "link": "https://stackoverflow.com/users/2362505/harshs08"}, "edited": false, "score": 0, "creation_date": 1454455991, "post_id": 35165824, "comment_id": 58050042, "body": "I have all the permissions for the mysql user but same error."}], "tags": [], "owner": {"reputation": 35, "user_id": 4774583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d21cfaa4db9debd5b6aa8675a785c1f?s=128&d=identicon&r=PG&f=1", "display_name": "DGuimar", "link": "https://stackoverflow.com/users/4774583/dguimar"}, "is_accepted": false, "score": 0, "last_activity_date": 1454455805, "creation_date": 1454455805, "answer_id": 35165824, "question_id": 35165709, "link": "https://stackoverflow.com/questions/35165709/rake-dbcreate-mysql2error-unknown-database/35165824#35165824", "title": "rake db:create - Mysql2::Error: Unknown database", "body": "<p>I have two ideas.</p>\n\n<ol>\n<li>Check the User permissions</li>\n<li>When I run rake tasks, I don't use bundle exec (i.e just rake db:create)</li>\n</ol>\n\n<p>Hope this is helpful</p>\n"}, {"comments": [{"owner": {"reputation": 39990, "user_id": 5528593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7JPcT.png?s=128&g=1", "display_name": "Ren&#233; Vogt", "link": "https://stackoverflow.com/users/5528593/ren%c3%a9-vogt"}, "reply_to_user": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "edited": false, "score": 0, "creation_date": 1454610043, "post_id": 35170568, "comment_id": 58132511, "body": "@Undo thanks for the link. I see your point and have to apologise, I clearly misunderstood the concept. Will keep that in mind. Thanks again for pointing that out to me."}, {"owner": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "reply_to_user": {"reputation": 39990, "user_id": 5528593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7JPcT.png?s=128&g=1", "display_name": "Ren&#233; Vogt", "link": "https://stackoverflow.com/users/5528593/ren%c3%a9-vogt"}, "edited": false, "score": 0, "creation_date": 1454610055, "post_id": 35170568, "comment_id": 58132515, "body": "No problem @Ren&#233;Vogt :)"}], "tags": [], "owner": {"reputation": 1042, "user_id": 2176659, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3530d47fb685ef92507d4cd2e0221ab6?s=128&d=identicon&r=PG&f=1", "display_name": "Ravendra Kumar", "link": "https://stackoverflow.com/users/2176659/ravendra-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1454483210, "creation_date": 1454483210, "answer_id": 35170568, "question_id": 35165709, "link": "https://stackoverflow.com/questions/35165709/rake-dbcreate-mysql2error-unknown-database/35170568#35170568", "title": "rake db:create - Mysql2::Error: Unknown database", "body": "<p>Try <code>rake db:create RAILS_ENV=development</code> hope this will work</p>\n"}, {"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 1, "last_activity_date": 1476284188, "creation_date": 1476284188, "answer_id": 40001843, "question_id": 35165709, "link": "https://stackoverflow.com/questions/35165709/rake-dbcreate-mysql2error-unknown-database/40001843#40001843", "title": "rake db:create - Mysql2::Error: Unknown database", "body": "<p>If you are using ohmyzsh with bundler plugin which makes <code>rake</code> run by default with <code>bundle exec</code>, you can use </p>\n\n<pre><code>unbundled_rake db:create\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3687, "user_id": 4331334, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/aewEH.jpg?s=128&g=1", "display_name": "Coding Enthusiast", "link": "https://stackoverflow.com/users/4331334/coding-enthusiast"}, "is_accepted": false, "score": 0, "last_activity_date": 1570204221, "creation_date": 1570204221, "answer_id": 58239682, "question_id": 35165709, "link": "https://stackoverflow.com/questions/35165709/rake-dbcreate-mysql2error-unknown-database/58239682#58239682", "title": "rake db:create - Mysql2::Error: Unknown database", "body": "<p>Ran into a similar issue on Rails 5 and the following steps helped me fix it: </p>\n\n<pre><code>Spring stop\n\n./bin/rails db:create\n\n</code></pre>\n"}], "owner": {"reputation": 560, "user_id": 2362505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/181c3e1a813fb39b2720f4b2ba34e9cd?s=128&d=identicon&r=PG", "display_name": "harshs08", "link": "https://stackoverflow.com/users/2362505/harshs08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3561, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1570204221, "creation_date": 1454455223, "question_id": 35165709, "link": "https://stackoverflow.com/questions/35165709/rake-dbcreate-mysql2error-unknown-database", "title": "rake db:create - Mysql2::Error: Unknown database", "body": "<p>I am trying to create a database using <code>rake db:create</code> task.</p>\n\n<p>When I am running the command <code>bundle exec rake db:create</code> to create the database and load the schema, I get the following error:</p>\n\n<pre><code>rake aborted!\nMysql2::Error: Unknown database 'xxx_development'\n</code></pre>\n\n<p>My <code>database.yml</code>:</p>\n\n<pre><code>development:\n  adapter: mysql2\n  host: localhost\n  reconnect: true\n  username: user\n  password: password\n  pool: 50\n  database: xxx_development\n</code></pre>\n\n<p>I checked that mysql server is running and I am able to connect to it using the password/username I have in the <code>database.yml</code></p>\n\n<p>I also understand that I can go ahead and create the database in <code>mysql</code> and then run the <code>bundle exec rake db:create</code> but isn't the rake task <code>db:create</code> also creates a database in case it doesn't exists?</p>\n\n<p>The <code>rails</code> version is <code>3.2.22</code>.\nand <code>mysql2</code> version is <code>2.9.13</code>.</p>\n\n<p>Any pointers will be highly appreciated. </p>\n"}, {"tags": ["ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5875179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086fe97ced4c2f68985359a4345672bf?s=128&d=identicon&r=PG&f=1", "display_name": "erbilcan", "link": "https://stackoverflow.com/users/5875179/erbilcan"}, "edited": false, "score": 0, "creation_date": 1454465101, "post_id": 35166736, "comment_id": 58052709, "body": "I think @cozyconemotel &#39;s solution did not allow me to try this exercise."}, {"owner": {"reputation": 4350, "user_id": 1825390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0bb91ca3e4bded511a38e4a01c26efb2?s=128&d=identicon&r=PG", "display_name": "xavdid", "link": "https://stackoverflow.com/users/1825390/xavdid"}, "reply_to_user": {"reputation": 3, "user_id": 5875179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086fe97ced4c2f68985359a4345672bf?s=128&d=identicon&r=PG&f=1", "display_name": "erbilcan", "link": "https://stackoverflow.com/users/5875179/erbilcan"}, "edited": false, "score": 0, "creation_date": 1454527982, "post_id": 35166736, "comment_id": 58089101, "body": "Fair enough. You should still go ahead and mark (either) answer as correct!"}], "tags": [], "owner": {"reputation": 4350, "user_id": 1825390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0bb91ca3e4bded511a38e4a01c26efb2?s=128&d=identicon&r=PG", "display_name": "xavdid", "link": "https://stackoverflow.com/users/1825390/xavdid"}, "is_accepted": false, "score": 0, "last_activity_date": 1454461565, "creation_date": 1454461565, "answer_id": 35166736, "question_id": 35165598, "link": "https://stackoverflow.com/questions/35165598/ruby-hashselect-method-returns-incomplete-hashes/35166736#35166736", "title": "Ruby Hash#select method returns incomplete hashes", "body": "<p>Got it! </p>\n\n<p><code>Hash#key</code> returns the <em>first</em> key that has the value of the argument, like so: </p>\n\n<pre><code>2.2.3 :043 &gt; h = {a: 1, b: 2, c: 2}\n =&gt; {:a=&gt;1, :b=&gt;2, :c=&gt;2}\n2.2.3 :044 &gt; h.key(2)\n =&gt; :b\n</code></pre>\n\n<p>In your case, <code>ht.key(2924) == 2172</code> because the sum of the factors of 2172 also happens to be 2924 and 2172 &lt; 2620. </p>\n\n<p>So, no ruby bug present. As for how to fix it, that's left as an exercise for you. </p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 5875179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086fe97ced4c2f68985359a4345672bf?s=128&d=identicon&r=PG&f=1", "display_name": "erbilcan", "link": "https://stackoverflow.com/users/5875179/erbilcan"}, "edited": false, "score": 0, "creation_date": 1454464898, "post_id": 35166775, "comment_id": 58052643, "body": "It worked. Thank you. I&#39;ll keep in mind your suggestion."}], "tags": [], "owner": {"reputation": 1011, "user_id": 3891638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pqkeX.jpg?s=128&g=1", "display_name": "cozyconemotel", "link": "https://stackoverflow.com/users/3891638/cozyconemotel"}, "is_accepted": true, "score": 0, "last_activity_date": 1454462249, "last_edit_date": 1454462249, "creation_date": 1454461840, "answer_id": 35166775, "question_id": 35165598, "link": "https://stackoverflow.com/questions/35165598/ruby-hashselect-method-returns-incomplete-hashes/35166775#35166775", "title": "Ruby Hash#select method returns incomplete hashes", "body": "<p><code>Hash#key</code> only returns the first key with the given value. You could do something like </p>\n\n<pre><code>a = ht.select{ |k,v| ht[v] == k &amp;&amp; k!= v}\n</code></pre>\n\n<p>and look for keys rather than value, because keys can't be duplicates and they are the only things that can be trusted. </p>\n"}], "owner": {"reputation": 3, "user_id": 5875179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086fe97ced4c2f68985359a4345672bf?s=128&d=identicon&r=PG&f=1", "display_name": "erbilcan", "link": "https://stackoverflow.com/users/5875179/erbilcan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 35166775, "answer_count": 2, "score": -1, "last_activity_date": 1454462249, "creation_date": 1454454677, "question_id": 35165598, "link": "https://stackoverflow.com/questions/35165598/ruby-hashselect-method-returns-incomplete-hashes", "title": "Ruby Hash#select method returns incomplete hashes", "body": "<p>I'm trying to solve Project Euler Question #21 in Ruby. </p>\n\n<blockquote>\n  <p>Let d(n) be defined as the sum of proper divisors of n (numbers less than n which divide evenly into n).\n  If d(a) = b and d(b) = a, where a \u2260 b, then a and b are an amicable pair and each of a and b are called amicable numbers.\n  For example, the proper divisors of 220 are 1, 2, 4, 5, 10, 11, 20, 22, 44, 55 and 110; therefore d(220) = 284. The proper divisors of 284 are 1, 2, 4, 71 and 142; so d(284) = 220.\n  Evaluate the sum of all the amicable numbers under 10000.</p>\n</blockquote>\n\n<p>I used brute-force method to find a solution which finds the sum of all divisors of each number in [2,10000) range and pushes them into a hash object. </p>\n\n<pre><code>require 'prime'\n#Method reference http://stackoverflow.com/questions/3398159/all-factors-of-a-given-number\ndef factors_of(number)\n  primes, powers = number.prime_division.transpose\n  exponents = powers.map{|i| (0..i).to_a}\n  divisors = exponents.shift.product(*exponents).map do |powers|\n    primes.zip(powers).map{|prime, power| prime ** power}.inject(:*)\n  end\n  #Modified line\n  divisors.sort![0..divisors.size-2]\nend\n\nht=Hash.new\n(2..10000).each do |x|\n  arr=factors_of(x)\n  sum=arr.reduce(:+)\n  ht[x]=sum\nend\n\namicable=ht.select { |key, value|  value==ht.key(key) &amp;&amp; ht.key(key)!=key}\n\nputs amicable\n</code></pre>\n\n<p>Output of this code</p>\n\n<pre><code>{220=&gt;284, 284=&gt;220, 1184=&gt;1210, 1210=&gt;1184, 2620=&gt;2924, 5020=&gt;5564, 5564=&gt;5020, 6232=&gt;6368, 6368=&gt;6232}\n</code></pre>\n\n<p>It finds all amicable pairs except {2924=>2620}. All other numbers have their reverse pair except {2620=>2924}, {2924=>2620}. What I am missing here? Any thoughts? Thanks. </p>\n"}, {"tags": ["ruby", "rack", "middleware", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 990, "user_id": 4917500, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eb4cc3274e9262d432138cef216537d3?s=128&d=identicon&r=PG", "display_name": "Tasos Anesiadis", "link": "https://stackoverflow.com/users/4917500/tasos-anesiadis"}, "edited": false, "score": 0, "creation_date": 1464618318, "post_id": 35179114, "comment_id": 62547075, "body": "Hello, what did you use instead of remoteit then?"}, {"owner": {"reputation": 203, "user_id": 5041070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b8a5feddfe69b2d1d54c547e145ed63?s=128&d=identicon&r=PG&f=1", "display_name": "TH1J2", "link": "https://stackoverflow.com/users/5041070/th1j2"}, "reply_to_user": {"reputation": 990, "user_id": 4917500, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eb4cc3274e9262d432138cef216537d3?s=128&d=identicon&r=PG", "display_name": "Tasos Anesiadis", "link": "https://stackoverflow.com/users/4917500/tasos-anesiadis"}, "edited": false, "score": 2, "creation_date": 1464726074, "post_id": 35179114, "comment_id": 62598637, "body": "I ended up grabbing the data from the form inputs with javascript and doing an AJAX post call to submit the form. May not be the &quot;rails way,&quot; but I find it to be a flexible solution for submitting remote forms."}, {"owner": {"reputation": 1384, "user_id": 1252245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EF8gC.jpg?s=128&g=1", "display_name": "sequielo", "link": "https://stackoverflow.com/users/1252245/sequielo"}, "edited": false, "score": 1, "creation_date": 1471304063, "post_id": 35179114, "comment_id": 65283882, "body": "Exactly with the same error, I came with a partial solution as this PR (<a href=\"https://github.com/JangoSteve/remotipart/pull/154\" rel=\"nofollow noreferrer\">github.com/JangoSteve/remotipart/pull/154</a>) wasn&#39;t integrated yet: add this to your gemfile <code>gem &#39;remotipart&#39;, &#39;~&gt; 1.2&#39;, github: &#39;pedantix&#47;remotipart&#39;, ref: &#39;7f7989db572976816c03508c335bbc1d8230af78&#39;</code>"}], "tags": [], "owner": {"reputation": 203, "user_id": 5041070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b8a5feddfe69b2d1d54c547e145ed63?s=128&d=identicon&r=PG&f=1", "display_name": "TH1J2", "link": "https://stackoverflow.com/users/5041070/th1j2"}, "is_accepted": true, "score": 9, "last_activity_date": 1454507961, "creation_date": 1454507961, "answer_id": 35179114, "question_id": 35165361, "link": "https://stackoverflow.com/questions/35165361/rails-5-upgrade-no-such-middleware-to-insert-after-actiondispatchparamsparse/35179114#35179114", "title": "Rails 5 Upgrade: No such middleware to insert after: ActionDispatch::ParamsParser (RuntimeError)", "body": "<p>I believe this error was caused by a gem that has not been updated yet for Rails 5. I had been using the gem remotipart (<a href=\"https://github.com/JangoSteve/remotipart\">https://github.com/JangoSteve/remotipart</a>). It has been very helpful. When I remove it from the gem file, the error noted in the question goes away.</p>\n"}], "owner": {"reputation": 203, "user_id": 5041070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b8a5feddfe69b2d1d54c547e145ed63?s=128&d=identicon&r=PG&f=1", "display_name": "TH1J2", "link": "https://stackoverflow.com/users/5041070/th1j2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5656, "favorite_count": 0, "accepted_answer_id": 35179114, "answer_count": 1, "score": 9, "last_activity_date": 1454507961, "creation_date": 1454453630, "question_id": 35165361, "link": "https://stackoverflow.com/questions/35165361/rails-5-upgrade-no-such-middleware-to-insert-after-actiondispatchparamsparse", "title": "Rails 5 Upgrade: No such middleware to insert after: ActionDispatch::ParamsParser (RuntimeError)", "body": "<p>I am upgrading an app from Rails 4.2 to Rails 5 beta1.1 in development. App worked well before upgrade. I have gone through the basic upgrade steps (updating Ruby, updating Rails, and related steps at:<a href=\"http://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html\" rel=\"noreferrer\">http://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html</a>). Gemfile has also been updated to latest Gems. </p>\n\n<p>When I run $ rails middleware or $ rails console or $ rails server I get the following error:</p>\n\n<pre><code>No such middleware to insert after: ActionDispatch::ParamsParser\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/actionpack/lib/action_dispatch/middleware/stack.rb:108:in `assert_index'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/actionpack/lib/action_dispatch/middleware/stack.rb:80:in `insert_after'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/configuration.rb:69:in `block in merge_into'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/configuration.rb:68:in `each'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/configuration.rb:68:in `merge_into'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/engine.rb:507:in `block in app'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/engine.rb:504:in `synchronize'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/engine.rb:504:in `app'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/application/finisher.rb:34:in `block in &lt;module:Finisher&gt;'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/initializable.rb:30:in `instance_exec'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/initializable.rb:30:in `run'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/initializable.rb:55:in `block in run_initializers'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/initializable.rb:54:in `run_initializers'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/application.rb:350:in `initialize!'\n.../config/environment.rb:5:in `&lt;top (required)&gt;'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/activesupport/lib/active_support/dependencies.rb:302:in `require'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/activesupport/lib/active_support/dependencies.rb:302:in `block in require'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/activesupport/lib/active_support/dependencies.rb:268:in `load_dependency'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/activesupport/lib/active_support/dependencies.rb:302:in `require'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/application.rb:326:in `require_environment!'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/application.rb:446:in `block in run_tasks_blocks'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/commands/rake_proxy.rb:13:in `block in run_rake_task'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/commands/rake_proxy.rb:10:in `run_rake_task'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/commands/commands_tasks.rb:51:in `run_command!'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/command.rb:20:in `run'\n.../.rvm/gems/ruby-2.3.0/bundler/gems/rails-dbf67b3a6f54/railties/lib/rails/commands.rb:19:in `&lt;top (required)&gt;'\nbin/rails:4:in `require'\nbin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>This is related to fact that ActionDispatch::ParamsParser has been removed from Rails 5 beta middleware (<a href=\"https://github.com/rails/rails/commit/38d2bf5fd1f3e014f2397898d371c339baa627b1\" rel=\"noreferrer\">https://github.com/rails/rails/commit/38d2bf5fd1f3e014f2397898d371c339baa627b1</a>). But, in someway my app still seems to be looking for it.</p>\n\n<p>I have tried various things with ActionDispatch::ParamsParser in config/application.rb, such as deleting it, and, when that didn't work, I also tried adding it. Same error. Any way to get past this error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "friendly-id"], "comments": [{"owner": {"reputation": 542, "user_id": 1222686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc20c50605a4005303bfc6452899b723?s=128&d=identicon&r=PG", "display_name": "kimrgrey", "link": "https://stackoverflow.com/users/1222686/kimrgrey"}, "edited": false, "score": 0, "creation_date": 1454454390, "post_id": 35165303, "comment_id": 58049503, "body": "Hi, Dave! Could you please clarify what goes wrong? What&#39;s working not as you expected? Because acts_as_votable is more about model and I suppose that like_bike_path is just usual rails route."}, {"owner": {"reputation": 13, "user_id": 5616585, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153804579781155/picture?type=large", "display_name": "Dave Sloan", "link": "https://stackoverflow.com/users/5616585/dave-sloan"}, "reply_to_user": {"reputation": 542, "user_id": 1222686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc20c50605a4005303bfc6452899b723?s=128&d=identicon&r=PG", "display_name": "kimrgrey", "link": "https://stackoverflow.com/users/1222686/kimrgrey"}, "edited": false, "score": 0, "creation_date": 1454456071, "post_id": 35165303, "comment_id": 58050075, "body": "Hi @kimrgrey!  Apologies for not clarifying the error.  Thanks for the follow up questions.  I think I solved the problem.  Still verifying.  The fix is to change @bike = Bike.friendly.find(bike_id) from what I had previously:  bike = Bike.find_by_id(bike_id) in the bike controller.   So I think the issue is just a rails route to your point.  The original error was a failed push to Heroku."}, {"owner": {"reputation": 542, "user_id": 1222686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc20c50605a4005303bfc6452899b723?s=128&d=identicon&r=PG", "display_name": "kimrgrey", "link": "https://stackoverflow.com/users/1222686/kimrgrey"}, "edited": false, "score": 0, "creation_date": 1454456670, "post_id": 35165303, "comment_id": 58050292, "body": "Great! I&#39;m as one of the maintainers of the frienldy_id very glad to hear that our software is useful for you ;-) By the way, you can use module :finders to be able to call something like Bike.find(slug) instead of Bike.friendly.find(slug). It could solve some possible problems with cancancan and other libraries that expects resource to be searchable using simple find with id of resource."}, {"owner": {"reputation": 13, "user_id": 5616585, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153804579781155/picture?type=large", "display_name": "Dave Sloan", "link": "https://stackoverflow.com/users/5616585/dave-sloan"}, "reply_to_user": {"reputation": 542, "user_id": 1222686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc20c50605a4005303bfc6452899b723?s=128&d=identicon&r=PG", "display_name": "kimrgrey", "link": "https://stackoverflow.com/users/1222686/kimrgrey"}, "edited": false, "score": 0, "creation_date": 1454459091, "post_id": 35165303, "comment_id": 58051085, "body": "Hi again @kimrgrey.  Seems to work on localhost:3000 but Heroku is choking.  Heroku logs tell me &quot; ActionView::Template::Error (undefined method `slug&#39; for #&lt;Bike&quot; for my two acts_as_votable calls &quot;like_bike_path(bike)&quot; and &quot;&lt;%= bike.get_upvotes.size %&gt;&quot;.  I&#39;ll try the :finders, too."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5616585, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153804579781155/picture?type=large", "display_name": "Dave Sloan", "link": "https://stackoverflow.com/users/5616585/dave-sloan"}, "edited": false, "score": 1, "creation_date": 1454522084, "post_id": 35174115, "comment_id": 58085503, "body": "Thanks, @Rich!  I made sure I had :slug in params  <code>bike_params = params.require(:bike).permit(:name, :description, :image, :slug)</code>  and I did a <code>heroku run rake db:migrate</code>.  Fixed!"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": true, "score": 0, "last_activity_date": 1454494459, "creation_date": 1454494459, "answer_id": 35174115, "question_id": 35165303, "link": "https://stackoverflow.com/questions/35165303/ruby-on-rails-friendlyid-gem-acts-as-votable-gem-getting-a-heroku-error/35174115#35174115", "title": "Ruby-on-Rails + FriendlyId gem + Acts_as_Votable gem - getting a Heroku error", "body": "<pre><code>#app/models/bike.rb\nclass Bike &lt; ActiveRecord::Base\n   extend FriendlyId\n   friendly_id :column, use: [:finders, :slugged]\nend\n</code></pre>\n\n<p>This will allow use of the <code>slug</code> without having to change the default pattern in ActiveRecord... (<code>@bike = Bike.find params[:id]</code>).</p>\n\n<p>--</p>\n\n<p>In regards your <code>heroku</code> error, it means you have not got the database migrated (it doesn't include <code>slug</code> in its columns).</p>\n\n<p>You need to make sure you run <code>heroku run rake db:migrate</code>, as well as ensuring that you've re-saved any <code>@bike</code> records (so the <code>slug</code> column is populated).</p>\n"}], "owner": {"reputation": 13, "user_id": 5616585, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153804579781155/picture?type=large", "display_name": "Dave Sloan", "link": "https://stackoverflow.com/users/5616585/dave-sloan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 35174115, "answer_count": 1, "score": 1, "last_activity_date": 1454525528, "creation_date": 1454453315, "last_edit_date": 1454525528, "question_id": 35165303, "link": "https://stackoverflow.com/questions/35165303/ruby-on-rails-friendlyid-gem-acts-as-votable-gem-getting-a-heroku-error", "title": "Ruby-on-Rails + FriendlyId gem + Acts_as_Votable gem - getting a Heroku error", "body": "<p>In my index page I have the following as part of setting up the Acts_as_votable gem. </p>\n\n<pre><code>&lt;%= link_to like_bike_path(bike), method: :put, class: \"btn btn-default\" do %&gt;\n</code></pre>\n\n<p>It was working fine until I added FriendlyId, probably because the like_bike_path is looking for an id not a friendlyID (ie vanity URL).  Is there a way to change </p>\n\n<p><code>like_bike_path</code></p>\n\n<p>to something like</p>\n\n<pre><code>like_friendly.find_path\n</code></pre>\n\n<p>Works on Localhost:3000 but Heroku logs tell me  <code>ActionView::Template::Error (undefined method slug' for #&lt;Bike\"</code> for my two acts_as_votable calls \"like_bike_path(bike)\" and \"&lt;%= bike.get_upvotes.size %>\".</p>\n\n<p>thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "paperclip"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1454453417, "post_id": 35165167, "comment_id": 58049086, "body": "<code>@user.avatar</code> is the problem. <code>@user</code>, at that point, is <code>nil</code>. Figure out why."}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1454453965, "post_id": 35165167, "comment_id": 58049337, "body": "Given your error is in the layout, you should use <code>current_user</code> instead of <code>@user</code>"}, {"owner": {"reputation": 853, "user_id": 2169274, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2smao.jpg?s=128&g=1", "display_name": "Edin Puzic", "link": "https://stackoverflow.com/users/2169274/edin-puzic"}, "edited": false, "score": 0, "creation_date": 1454454807, "post_id": 35165167, "comment_id": 58049644, "body": "How can I globally define current_users ?"}], "answers": [{"comments": [{"owner": {"reputation": 853, "user_id": 2169274, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2smao.jpg?s=128&g=1", "display_name": "Edin Puzic", "link": "https://stackoverflow.com/users/2169274/edin-puzic"}, "edited": false, "score": 0, "creation_date": 1454454714, "post_id": 35165279, "comment_id": 58049614, "body": "Hi, When I add this. It just works on Index page. I whant to work on all pages def index   \t@user = current_user   end"}, {"owner": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "reply_to_user": {"reputation": 853, "user_id": 2169274, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2smao.jpg?s=128&g=1", "display_name": "Edin Puzic", "link": "https://stackoverflow.com/users/2169274/edin-puzic"}, "edited": false, "score": 0, "creation_date": 1454455980, "post_id": 35165279, "comment_id": 58050038, "body": "You have to instantiate an object to have it available in a view. Look at a proper auth system like devise which will make current_user available to all views when a user is logged in. Otherwise you will need to add it to every action or to the global scope in application_controller etc, which sounds like a bad idea."}], "tags": [], "owner": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "is_accepted": false, "score": 0, "last_activity_date": 1454453202, "creation_date": 1454453202, "answer_id": 35165279, "question_id": 35165167, "link": "https://stackoverflow.com/questions/35165167/undefined-method-avatar-for-nilnilclass/35165279#35165279", "title": "Undefined method `avatar&#39; for nil:NilClass", "body": "<p>I don't see where you instantiate the @user object in your controller action. Are you doing:</p>\n\n<pre><code>def edit\n  @user = current_user\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 3803385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1078b3d35e80b57857d36bd6fd997697?s=128&d=identicon&r=PG&f=1", "display_name": "regulation_d", "link": "https://stackoverflow.com/users/3803385/regulation-d"}, "is_accepted": true, "score": 1, "last_activity_date": 1454455501, "creation_date": 1454455501, "answer_id": 35165768, "question_id": 35165167, "link": "https://stackoverflow.com/questions/35165167/undefined-method-avatar-for-nilnilclass/35165768#35165768", "title": "Undefined method `avatar&#39; for nil:NilClass", "body": "<p><code>@user</code> here is undefined. You can define it in the controller or use Devise's <code>current_user</code> helper. </p>\n\n<p>Replacing:</p>\n\n<pre><code>@user.avatar.url(:thumb)\n</code></pre>\n\n<p>with: </p>\n\n<pre><code>current_user.avatar.url(:thumb)\n</code></pre>\n\n<p>should get you past this error as long as a user is signed in when seeing this view. Otherwise you'll need to check for nil before calling #avatar.</p>\n"}, {"tags": [], "owner": {"reputation": 853, "user_id": 2169274, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2smao.jpg?s=128&g=1", "display_name": "Edin Puzic", "link": "https://stackoverflow.com/users/2169274/edin-puzic"}, "is_accepted": false, "score": 0, "last_activity_date": 1454455565, "creation_date": 1454455565, "answer_id": 35165783, "question_id": 35165167, "link": "https://stackoverflow.com/questions/35165167/undefined-method-avatar-for-nilnilclass/35165783#35165783", "title": "Undefined method `avatar&#39; for nil:NilClass", "body": "<p>When I add this code it works on this pages:</p>\n\n<pre><code>class PagesController &lt; ApplicationController\n  def index\n  @user = current_user\n  end\n\n  def home\n      @user = current_user\n  end\n\n  def profile\n      @user = current_user\n  end\nend\n</code></pre>\n\n<p>But I Whant to add on all pages globally :)</p>\n"}], "owner": {"reputation": 853, "user_id": 2169274, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2smao.jpg?s=128&g=1", "display_name": "Edin Puzic", "link": "https://stackoverflow.com/users/2169274/edin-puzic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1898, "favorite_count": 0, "accepted_answer_id": 35165768, "answer_count": 3, "score": 0, "last_activity_date": 1454455565, "creation_date": 1454452742, "last_edit_date": 1454453252, "question_id": 35165167, "link": "https://stackoverflow.com/questions/35165167/undefined-method-avatar-for-nilnilclass", "title": "Undefined method `avatar&#39; for nil:NilClass", "body": "<p>I'm trying to print an image using the Paperclip gem.</p>\n\n<p>When I print using views/devise/edit.html.rb everything looks good but when I want print in views/layout/application.html.rb I'm getting this error in console:</p>\n\n<pre><code>ActionView::Template::Error (undefined method `avatar' for nil:NilClass):\n     7:   &lt;%= csrf_meta_tags %&gt;\n     8: &lt;/head&gt;\n     9: &lt;body&gt;\n    10: &lt;%= image_tag @user.avatar.url(:thumb) %&gt;\n    11: &lt;%= yield %&gt;\n    12: \n    13: &lt;/body&gt;\n  app/views/layouts/application.html.erb:10:in `_app_views_layouts_application_html_erb___4291648939640547438_70254980514000'\n</code></pre>\n\n<p>This is User.rb:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\nhas_attached_file :avatar, :styles =&gt; { :medium =&gt; [\"300x300&gt;\"], :thumb =&gt; [\"100x100&gt;\"], :page =&gt; [\"800\"] }\n\n\nend\n</code></pre>\n\n<p>This is application_controller.rb:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\n before_action :configure_permitted_parameters, if: :devise_controller?\n\n  protected\n\n  def configure_permitted_parameters\n    devise_parameter_sanitizer.for(:sign_up) { |u| u.permit(:first_name, :last_name, :email, :password, :password_confirmation) }\n    devise_parameter_sanitizer.for(:account_update) { |u| u.permit(:first_name, :last_name, :email, :password, :password_confirmation, :current_password, :avatar) }\n\n\n  end\n\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "social-networking"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454453539, "post_id": 35164627, "comment_id": 58049144, "body": "Your question is too broad. We don&#39;t know what level of experience you have, so any answers we give are shooting in the dark, hoping it&#39;ll make sense to you. In order to explain correctly we&#39;d have to write a tutorial starting from the beginning and working up. Please provide more information so we don&#39;t have to only give opinions based on guesses."}, {"owner": {"reputation": 191, "user_id": 2788650, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3c64509ea5b1e8655e0f15fdd2df51d6?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Lopez", "link": "https://stackoverflow.com/users/2788650/javier-lopez"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1454456542, "post_id": 35164627, "comment_id": 58050248, "body": "@theTinMan I have edited my question to have more infomation about the user models"}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 2788650, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3c64509ea5b1e8655e0f15fdd2df51d6?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Lopez", "link": "https://stackoverflow.com/users/2788650/javier-lopez"}, "edited": false, "score": 0, "creation_date": 1454451771, "post_id": 35164820, "comment_id": 58048338, "body": "But then I would need to create two types of profiles to hold the different types of attributes for each user @errata"}, {"owner": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "reply_to_user": {"reputation": 191, "user_id": 2788650, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3c64509ea5b1e8655e0f15fdd2df51d6?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Lopez", "link": "https://stackoverflow.com/users/2788650/javier-lopez"}, "edited": false, "score": 1, "creation_date": 1454451848, "post_id": 35164820, "comment_id": 58048364, "body": "It&#39;s better than creating different &quot;user&quot; classes that both inherit from Devise IMO."}, {"owner": {"reputation": 191, "user_id": 2788650, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3c64509ea5b1e8655e0f15fdd2df51d6?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Lopez", "link": "https://stackoverflow.com/users/2788650/javier-lopez"}, "edited": false, "score": 0, "creation_date": 1454452201, "post_id": 35164820, "comment_id": 58048563, "body": "I like this alternative, however how would I go about doing the associations between the user and the profiles. I would have the user model have one of each profile? @errata"}, {"owner": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "reply_to_user": {"reputation": 191, "user_id": 2788650, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3c64509ea5b1e8655e0f15fdd2df51d6?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Lopez", "link": "https://stackoverflow.com/users/2788650/javier-lopez"}, "edited": false, "score": 0, "creation_date": 1454453036, "post_id": 35164820, "comment_id": 58048912, "body": "You could have a related model that can accommodate both and possibly has a type field.. that seems clumsy tho. I find NOSQL or postgres array types to be a better fit for dynamic or changing data structures."}, {"owner": {"reputation": 914, "user_id": 1612193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f21ef0b135d7399570b3679ce958fcbd?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/1612193/dani"}, "edited": false, "score": 0, "creation_date": 1454453577, "post_id": 35164820, "comment_id": 58049159, "body": "You could also define the profile as a polymorphic association to use various profile classes associated with users"}], "tags": [], "owner": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "is_accepted": false, "score": 0, "last_activity_date": 1454451315, "creation_date": 1454451315, "answer_id": 35164820, "question_id": 35164627, "link": "https://stackoverflow.com/questions/35164627/rails-devise-user-architecture-for-social-network/35164820#35164820", "title": "Rails devise user architecture for social network", "body": "<p>I would seriously rethink the idea of having two models for your user types. Instead, consider having a slim User model and use associations (like User.profile, User.details) to hold the extra attributes. This will save you a lot of headaches by preventing you from addressing different \"user\" models in your devise code.</p>\n"}, {"comments": [{"owner": {"reputation": 191, "user_id": 2788650, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3c64509ea5b1e8655e0f15fdd2df51d6?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Lopez", "link": "https://stackoverflow.com/users/2788650/javier-lopez"}, "edited": false, "score": 0, "creation_date": 1454456587, "post_id": 35165253, "comment_id": 58050261, "body": "I added more information about the models. Im aiming to have them user the same forms for registration, sign in and other forms"}], "tags": [], "owner": {"reputation": 169, "user_id": 5708609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CYx5s.jpg?s=128&g=1", "display_name": "ThunderGuppy", "link": "https://stackoverflow.com/users/5708609/thunderguppy"}, "is_accepted": false, "score": 0, "last_activity_date": 1454453094, "creation_date": 1454453094, "answer_id": 35165253, "question_id": 35164627, "link": "https://stackoverflow.com/questions/35164627/rails-devise-user-architecture-for-social-network/35165253#35165253", "title": "Rails devise user architecture for social network", "body": "<p>Unfortunately, without details about the differences between the user models, a specific answer is hard to provide, but here is some stuff to consider:</p>\n\n<p>Devise is used for handling user registration, sign in, and content management.</p>\n\n<p>If your two user types will be creating their accounts the same way, signing in the same way, or viewing mostly the same content, it may not be worthwhile having two models, since minor differences can be stored in the models themselves.</p>\n\n<p>If your two users differ greatly in function, then having them separate may make your code more readable.  If they differ greatly in concept, it may also pay to have the separate, for the sake of making your code match your domain model.</p>\n\n<p>Make sure to consider how the two different types of users will be registering/logging in.  If they are intended to use the same pages/forms, then handling two different types will become very complex immediately, probably prohibitively so.</p>\n"}], "owner": {"reputation": 191, "user_id": 2788650, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3c64509ea5b1e8655e0f15fdd2df51d6?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Lopez", "link": "https://stackoverflow.com/users/2788650/javier-lopez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1454456497, "creation_date": 1454450493, "last_edit_date": 1454456497, "question_id": 35164627, "link": "https://stackoverflow.com/questions/35164627/rails-devise-user-architecture-for-social-network", "title": "Rails devise user architecture for social network", "body": "<p>Im creating a social network app with rails and devise as the user authentication gem. I have more than one type of user and dont know how to proceed.</p>\n\n<p>My userType1 and userType2 have very little in common so I dont know if STI is the way to go.</p>\n\n<p>Should I have both user types inherit from Devise User or should I create each one with devise.</p>\n\n<p>Last, should I create all the social fields in the user type or create a profile model for this type of info</p>\n\n<p>Any help is greatly appreciated</p>\n\n<p>The first type of user is a customer that has basic fields like first name, last name, profile photo, and home address.</p>\n\n<p>The second type of user is an agent that has many other fields, like first name, last name, profile photo, business informations(address, phone ..etc), specialty, category, title, website, social accts, and other fields.</p>\n\n<p>The difference in functionality between the two is great, the agent user will act as a friend, tag, create events, listings etc... and the customer will only create lsitings, contact agents, and search for listings. </p>\n"}, {"tags": ["ruby", "sass"], "owner": {"reputation": 1928, "user_id": 182484, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/500637793/picture?type=large", "display_name": "timsabat", "link": "https://stackoverflow.com/users/182484/timsabat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1454450583, "creation_date": 1454450429, "last_edit_date": 1454450583, "question_id": 35164612, "link": "https://stackoverflow.com/questions/35164612/sass-accessing-the-interpolated-debug-and-warn-messages-from-sassengineto-tr", "title": "Sass: accessing the interpolated @debug and @warn messages from SassEngine#to_tree", "body": "<p>We use SASS and SCSS at CodePen and I'm trying to make it super-fancy by responding with @warn and @debug directives in a formatted array.  We don't want to parse STDOUT, so I'm trying to capture the results of Debug and Warn nodes via the Sass::Engine#to_tree, method.</p>\n\n<p>Buuuut, we're running into trouble.  I'm sure it is just that I've not read the lib for long enough, but some jumpstarting would help.</p>\n\n<p>Here's a minimum test-case:</p>\n\n<p><a href=\"https://gist.github.com/tsabat/a91e8ebf9b8ec65f5c77\" rel=\"nofollow\">https://gist.github.com/tsabat/a91e8ebf9b8ec65f5c77</a></p>\n\n<pre><code># Ok, this class is a bit sparse, but it encapsulates the\n# logic for an empty lib, which is the goal of the conversion\nclass CssService\n\n  attr_reader :engine, :debugs, :warns, :extras\n\n  # markup - the sass/csss\n  # syntax - one of [:sass, :scss]\n  # lib    - one of %w(bourbon compass)\n  def process(markup:, syntax:, lib: nil)\n    @markup = markup\n    @syntax = syntax\n    @lib    = lib\n    @debugs = []\n    @warns = []\n\n    # we create a Sass::Engine here, with defaults\n    @engine = SassEngine.new.get(syntax: syntax, markup: markup_with_imports)\n\n    output = rendered\n    write_non_render_nodes\n\n    output\n  end\n\n  private\n\n  def write_non_render_nodes\n    walk_nodes(engine.to_tree.children)\n\n    @extras = debugs + warns\n  end\n\n  # loop over nodes to to get DebugNode and WarnNode instances\n  def walk_nodes(nodes)\n    nodes.each do |node|\n      push_node(node)\n      # to program is human\n      # to recurse is devine\n      walk_nodes(node.children) if node.has_children\n    end\n  end\n\n  # filter to appropriate nodes\n  def push_node(node)\n    @debugs &lt;&lt; message(node, :debug) if node.class == Sass::Tree::DebugNode\n    @warns  &lt;&lt; message(node, :warn) if node.class == Sass::Tree::WarnNode\n  end\n\n  # some cleanup\n  def message(child, type)\n    message = child.expr.to_sass.gsub!(/\\A\"|\"\\Z/, '')\n    {type: type, message: message, line: child.line}\n  end\n\n  def rendered\n    engine.render\n  end\n\n  # I can get the correct, interpolated output from here if i monkey-patch\n  # the class\n  class Sass::Tree::Visitors::Perform\n    def visit_debug(node)\n      res = node.expr.perform(@environment)\n      if res.is_a?(Sass::Script::Value::String)\n        res = res.value\n      else\n        res = res.to_sass\n      end\n      #ap res\n    end\n end\n\n  # this can be ignored, it does CodePen specific stuff\n  def markup_with_imports\n    return @markup if lib_empty?\n\n    \"#{imports}\\n#{@markup}\"\n  end\n\n  def lib_empty?\n    @lib.nil? || @lib == ''\n  end\n\n  def imports\n    if @lib == 'bourbon'\n      (@syntax == :scss) ? \"@import \\\"bourbon\\\";\" : \"@import \\\"bourbon\\\"\"\n    elsif @lib == 'compass'\n      (@syntax == :scss) ? \"@import \\\"compass/css3\\\";\" : \"@import \\\"compass/css3\\\"\"\n    else\n      nil\n    end\n  end\nend\n</code></pre>\n\n<p>Basically, I can get at the nodes I want, but I can't make them interpolate.  For example, the DebugNode filled with</p>\n\n<blockquote>\n  <p>\"Invalid color name: #{$color}, returning white instead.\";</p>\n</blockquote>\n\n<p>does not interpolate on <code>expr.to_sass</code>, here.</p>\n\n<p>So, the question remains.  How can I get interpolated debug nodes?</p>\n"}]