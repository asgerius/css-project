[{"tags": ["ruby"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 3, "creation_date": 1548278524, "post_id": 54335740, "comment_id": 95488970, "body": "It is not because of the ternary operators or the <code>if</code>/<code>elsif</code>. Your algorithm is flawed. The <code>a.odd?</code> test passes and the block returns <code>1</code> for all elements. <code>sort_by</code> correctly concludes the array is already sorted."}, {"owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "reply_to_user": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1548279064, "post_id": 54335740, "comment_id": 95489214, "body": "@axiac Ouch. So it is! :facepalm: Thank you. I knew there was  a reason I didn&#39;t want to post this."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1548289355, "post_id": 54335740, "comment_id": 95492375, "body": "&quot;And I want to sort it by odd numbers...&quot; is not clear, since you are sorting arrays, not numbers. When you give an example it&#39;s essential that you show the desired return value, which you have not done (and it&#39;s not obvious), but I think you would need a few examples and the desired result for each ito make the question clear. For exampel, suppose <code>ary = [3, 6, 7], [8, 1, 9], [6, 8, 2]]</code>. Are we to compare <code>[3, \u221e, 7], [\u221e, 1, 9], [2]]</code>  (<code>\u221e</code> being <code>Float:INFINITY</code>) or <code>[3, 7], [1, 9], [2]]</code> or something else?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548307848, "post_id": 54335740, "comment_id": 95496114, "body": "There is small type I guess in second code line as <code>b:odd?</code>, please check."}], "answers": [{"comments": [{"owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "edited": false, "score": 0, "creation_date": 1548464906, "post_id": 54337587, "comment_id": 95563888, "body": "Thanks for your help. Next time I ask a question I&#39;ll be more careful with it."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1548288744, "creation_date": 1548288744, "answer_id": 54337587, "question_id": 54335740, "link": "https://stackoverflow.com/questions/54335740/problems-using-elsif-in-a-sort-block/54337587#54337587", "title": "Problems using `elsif` in a `sort` block", "body": "<p>I find the statement of the question ambiguous. I will give an answer that is consist with one interpretation. If that is not what you want, please clarify hte question.</p>\n\n<pre><code>def my_sort(arr)\n  arr.sort_by {|a| a.any?(&amp;:odd?) ? a.map {|e| e.odd? ? e : Float::INFINITY} : [a.last]}\nend\n\nmy_sort [[1, 6, 7], [1, 4, 9], [1, 2, 3]]\n  #=&gt;   [[1, \u221e, 7], [1, \u221e, 9], [1, \u221e, 3]] (sort_by)\n  #=&gt;   [[1, 2, 3], [1, 6, 7], [1, 4, 9]]\nmy_sort [[3, 6, 7], [4, 1, 9], [5, 8, 1]]\n  #=&gt;   [[3, \u221e, 7], [\u221e, 1, 9], [5, \u221e, 1]] (sort_by) \n  #=&gt;   [[3, 6, 7], [5, 8, 1], [4, 1, 9]] \nmy_sort [[2, 6, 8], [4, 1, 4], [8, 6, 2]]\n  #=&gt;   [[8],       [\u221e, 1, \u221e], [2]]       (sort_by) \n  #=&gt;   [[8, 6, 2], [2, 6, 8], [4, 1, 4]] \nmy_sort [[8, 6, 2], [5, 1, 1], [6, 8, 4]]\n  #=&gt;   [[2],       [5, 1, 1], [4]        (sort_by) \n  #=&gt;   [[8, 6, 2], [6, 8, 4], [5, 1, 1]] \n</code></pre>\n\n<p>For each example I've shown the arrays used by <code>sort_by</code> to produce the sort shown on the following line.</p>\n"}, {"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548330453, "post_id": 54345826, "comment_id": 95507265, "body": "Indeed! I do not know whether this is what OP intend to do but it is surely something that OP asked. Nice implementation done at edit!"}, {"owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "edited": false, "score": 1, "creation_date": 1548464767, "post_id": 54345826, "comment_id": 95563848, "body": "Thanks for this one-liner. As I&#39;m sure is entirely not to anyone&#39;s surprise, I&#39;m very new to Ruby. I&#39;m not new to explaining problems, though, and I did a bad job here. I sure appreciate everyone&#39;s help, and next time I have a question I&#39;ll ask it more carefully."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 2, "last_activity_date": 1548330110, "creation_date": 1548330110, "answer_id": 54345826, "question_id": 54335740, "link": "https://stackoverflow.com/questions/54335740/problems-using-elsif-in-a-sort-block/54345826#54345826", "title": "Problems using `elsif` in a `sort` block", "body": "<p>Regarding your original question, just as axiac points out in the comment, the result of the sorting should be exactly the same as the input array because they are all sorted by the first odd element in each subarray, which is <code>1</code>, and the sort method is stable in MRI.</p>\n\n<hr>\n\n<p>Regarding your question after the edit, my answer would be:</p>\n\n<pre><code>ary.sort_by{|a| a[0...-1].select(&amp;:odd?) &lt;&lt; a.last}\n# =&gt; [[1, 8, 3], [1, 6, 7], [1, 4, 9]]\n</code></pre>\n\n<p>I am pretty confident that this is what you wrote after the edit that you wanted, but I am not sure if this is what you wanted since the sorting mechanism looks strange to me.</p>\n"}], "owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 54345826, "answer_count": 2, "score": 0, "last_activity_date": 1548330110, "creation_date": 1548278031, "last_edit_date": 1548329444, "question_id": 54335740, "link": "https://stackoverflow.com/questions/54335740/problems-using-elsif-in-a-sort-block", "title": "Problems using `elsif` in a `sort` block", "body": "<p>I have this array:</p>\n\n<pre><code>ary = [[1, 6, 7], [1, 4, 9], [1, 8, 3]]\n</code></pre>\n\n<p>I want to sort it by the first odd number, or the last number if they are all even, in each subarray.</p>\n\n<p>Since the first element in each array is the same object <code>1</code> for this particular <code>ary</code>, I can solve this like this:</p>\n\n<pre><code>ary2 = ary.sort_by { |a, b, c| b.odd? ? b : c }\n</code></pre>\n\n<p>But when I try a more general one: </p>\n\n<pre><code>arr2 = ary.sort_by { |a, b, c| a.odd? ? a : b.odd? ? b : c }\n</code></pre>\n\n<p><code>ary2</code> comes back unsorted.</p>\n\n<p>I tried removing the ternary operators like this:</p>\n\n<pre><code>ary2 = ary.sort_by do |a, b, c|\n  if a.odd? \n    a\n  elsif b.odd?\n    b\n  else\n    c\n  end\nend\n</code></pre>\n\n<p>with the same effect (i.e., none).</p>\n\n<p>Is there some reason that <code>elsif</code> can't be used in blocks passed to the <code>sort_by</code> method?</p>\n\n<hr>\n\n<p>Edit: Axiac pointed out the problem with my logic. It looks like conditional logic has to deal with all of the possible permutations of odd and even values. This works:</p>\n\n<pre><code>arr2 = arr.sort_by do |a, b, c| \n  if a.odd?\n    if b.odd?\n      if c.odd?\n        [a, b, c]\n      else\n        [a, b]\n      end\n    elsif c.odd?\n      [a, c]\n    else\n      a\n    end\n  elsif b.odd?\n    if c.odd?\n      [b, c]\n    else\n      b\n    end\n  else\n    c\n  end\nend\n</code></pre>\n\n<p>Maybe there's a more succinct and less brittle way to do it, but it's probably a good idea to do it this way instead:</p>\n\n<pre><code>arr2 = arr.sort_by do |sub_arr|\n  temp = sub_arr.select do |e|\n    e.odd?\n  end\n  temp.empty? ? Array(sub_arr.last) : temp\nend\n</code></pre>\n\n<p>I'll see myself out.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1548275782, "post_id": 54335003, "comment_id": 95487875, "body": "If you are iterating through the showtimes without using <code>.includes</code> you will get a n+1 query issue which will be much slower. Which is why bullet warns you - it has nothing to do with the performance of that particular query. If you wan&#39;t to know why the query with includes is slower than use <code>.includes(:showtimes).explain</code> to check the query plan."}, {"owner": {"reputation": 763, "user_id": 2679301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b83c0e9fed62d90353b411bc48b0e0f?s=128&d=identicon&r=PG", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/2679301/guillaume"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1548277516, "post_id": 54335003, "comment_id": 95488537, "body": "@max I understand why the query is faster with the includes. But I don\u2019t understand why the total response time is slower"}, {"owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "edited": false, "score": 0, "creation_date": 1548286882, "post_id": 54335003, "comment_id": 95491864, "body": "@Guillaume please add how its being used. Its impossible for us to speculate on why you code slowed down when using include without the code"}, {"owner": {"reputation": 763, "user_id": 2679301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b83c0e9fed62d90353b411bc48b0e0f?s=128&d=identicon&r=PG", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/2679301/guillaume"}, "reply_to_user": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "edited": false, "score": 0, "creation_date": 1548287885, "post_id": 54335003, "comment_id": 95492067, "body": "@baseballlover723 I just edited my question"}], "owner": {"reputation": 763, "user_id": 2679301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b83c0e9fed62d90353b411bc48b0e0f?s=128&d=identicon&r=PG", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/2679301/guillaume"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548287868, "creation_date": 1548274661, "last_edit_date": 1548287868, "question_id": 54335003, "link": "https://stackoverflow.com/questions/54335003/rails-does-includes-really-improve-queries-with-bullet", "title": "Rails does includes really improve queries ? (with bullet)", "body": "<pre><code># Models\nclass Cinema &lt; ApplicationRecord\n  has_many :showtimes\n  has_many :movies,         -&gt; { distinct }, through: :showtimes\nend\n\nclass Movie &lt; ApplicationRecord\n  has_many :showtimes\n  has_many :cinemas,         -&gt; { distinct }, through: :showtimes\nend\n\nclass Showtime &lt; ApplicationRecord\n  belongs_to :cinema\n  belongs_to :movie\nend\n\n# Controller\nclass V1::MoviesController &lt; ApplicationController\n  movie = Movie.find(params[:id])\n  render json: MovieSerializer.new(movie, include: [..., :cinemas, :'cinemas.showtimes']).serialized_json\nend\n\n# Serializers\nclass MovieSerializer\n  include FastJsonapi::ObjectSerializer\n  # Relations\n  ...\n  has_many :cinemas, serializer: CinemaItemSerializer do |object|\n    object.cinemas.by_country('FR') #.includes(:showtimes)\n  end\nend\n\nclass CinemaItemSerializer\n  include FastJsonapi::ObjectSerializer\n  # Relations\n  has_many :showtimes\nend\n</code></pre>\n\n<p>I use the <code>bullet</code> gem to trigger some n+1 queries and <code>fast_json_api</code> to serialize my objects.</p>\n\n<p>When I don't use <code>includes(:showtimes)</code> I have this response time\n<a href=\"https://i.stack.imgur.com/sYYkQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sYYkQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I do use the <code>includes</code> I have this response time\n<a href=\"https://i.stack.imgur.com/7Qzdg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Qzdg.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you see, when I don't use the <code>includes</code> my query is slower but the total response time is way faster.</p>\n\n<p>So which one I should use? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 2405, "user_id": 3704713, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c169cba3cd10f9bd85d65d5dc15630c?s=128&d=identicon&r=PG&f=1", "display_name": "MikeWu", "link": "https://stackoverflow.com/users/3704713/mikewu"}, "edited": false, "score": 0, "creation_date": 1548312561, "post_id": 54334974, "comment_id": 95497658, "body": "What is your version of rails?"}], "owner": {"reputation": 127, "user_id": 7381391, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f1eb6a05bef3c6ed8664012a885607e7?s=128&d=identicon&r=PG&f=1", "display_name": "PandyZhao", "link": "https://stackoverflow.com/users/7381391/pandyzhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1548274511, "creation_date": 1548274511, "question_id": 54334974, "link": "https://stackoverflow.com/questions/54334974/why-is-rails-activerelation-update-all-updating-a-different-set-of-records", "title": "Why is Rails ActiveRelation.update_all updating a different set of records?", "body": "<p>I've got a weird case of <code>ActiveRecord_Relation</code> magic doing something unintended. Given the following:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>comment = Comment.find(params[:id])\n# select only the original commenter's comments that match two scenarios\nrelated_comments = comment.where(something: params[:something)\n  .union(comment.where(something_else: params[:something_else]))\n  .where(user_id: comment.user_id)\n\nrelated_comments.count\n#=&gt; 4\n\nrelated_comments.update_all(receive_notifications: true)\n#=&gt; SQL (3.9ms)  UPDATE \"comments\" SET \"receive_notifications\" = 't'\n#=&gt; WHERE \"comments\".\"user_id\" = $1  [[\"user_id\", 11]] [sql_query]\n#=&gt; 12\n</code></pre>\n\n<p>From the looks of it, <code>.update_all</code> is running a single SQL query that is updating all comments with a <code>user_id</code> of 11. The <code>.where(user_id: 11)</code> was technically the last query, but shouldn't it be running a SQL query for only the relations of <code>related_comments</code>?</p>\n\n<p>I have a workaround where I could do this, but it would require two SQL queries and seems overly cumbersome than necessary:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>comment = Comment.find(params[:id])\n# same as above\nrelated_comment_ids = comment.where(something: params[:something)\n  .union(comment.where(something_else: params[:something_else]))\n  .where(user_id: comment.user_id).pluck(:id)\n#=&gt; [12, 14, 17, 18]\n\nComment.where(id: related_comment_ids).update_all(receive_notifications: true)\n#=&gt; SQL (5.7ms)  UPDATE \"comments\" SET \"receive_notifications\" = 't'\n#=&gt; WHERE \"comments\".\"id\" IN (18, 14, 17, 12) [sql_query]\n#=&gt; 4\n</code></pre>\n"}, {"tags": ["ruby", "github", "github-api-v3"], "comments": [{"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 0, "creation_date": 1548274935, "post_id": 54334436, "comment_id": 95487527, "body": "This is weird. Are you sure that your network connection is stable ? Maybe it can be a good idea to try on an other network"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1548342163, "post_id": 54334436, "comment_id": 95514420, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5786779/using-nethttp-get-for-an-https-url\">Using Net::HTTP.get for an https url</a>"}], "owner": {"reputation": 1, "user_id": 10957698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca9a0b2055080fb4b5e89182982a8c8?s=128&d=identicon&r=PG&f=1", "display_name": "dsok", "link": "https://stackoverflow.com/users/10957698/dsok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548272044, "creation_date": 1548272044, "question_id": 54334436, "link": "https://stackoverflow.com/questions/54334436/issue-with-github-api-through-ruby", "title": "Issue with github api through ruby", "body": "<p>I'm trying an API request to get a tag from a public repo on github using ruby. I am getting an error at times and other times it works. Most of the time it does not.</p>\n\n<p>Error I'm getting:</p>\n\n<pre><code>C:/Ruby25/lib/ruby/2.5.0/net/http.rb:939:in `rescue in block in connect': Failed to open TCP connection to https://api.github.com/repos/puppetlabs/puppetlabs-stdlib/tags:80 (no implicit conversion of URI::HTTPS into String) (TypeError)\n</code></pre>\n\n<pre><code>puts \"INFO: Checking #{pupmod} new releases\".green\n  require 'net/http'\n  require 'json'\n  require 'uri'\n  url = \"#{$github_pubapi}/#{pupmod}/tags\"\n  uri = URI.parse(url)\n  headers = {\n    'Authorization'=&gt;'token df61c638274d9ca9e3ea663341f5af2bf122db08'\n  }\n  response = Net::HTTP.get(uri, headers)\n  parsed = JSON.parse(response)\n  latestRelease = parsed.first[\"name\"]\n  puts latestRelease\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1548286502, "post_id": 54334260, "comment_id": 95491783, "body": "This depends entirely on what the data returned by the API looks like. Also doing <code>rescue Exception =&gt; e</code> is a really bad idea since when you rescue Exception you rescue from everything, including subclasses such as SyntaxError, LoadError, and Interrupt. <code>rescue StandardError</code> is somewhat better but you really should only rescue exceptions that you actually know what to do with. <a href=\"https://stackoverflow.com/questions/10048173/why-is-it-bad-style-to-rescue-exception-e-in-ruby\" title=\"why is it bad style to rescue exception e in ruby\">stackoverflow.com/questions/10048173/&hellip;</a>"}, {"owner": {"reputation": 15, "user_id": 7005091, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x9Q5lwwtiUg/AAAAAAAAAAI/AAAAAAAAAco/suaQVbf_SIY/photo.jpg?sz=128", "display_name": "Joseph Parker", "link": "https://stackoverflow.com/users/7005091/joseph-parker"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1548344991, "post_id": 54334260, "comment_id": 95516329, "body": "It would be in this format when the request is returned {   &quot;symbol&quot;: &quot;AAPL&quot;,   &quot;companyName&quot;: &quot;Apple Inc.&quot;,   &quot;primaryExchange&quot;: &quot;Nasdaq Global Select&quot;,   &quot;sector&quot;: &quot;Technology&quot; }. What I&#39;m trying to do is display the company name and sector and other things on the form page when the ticker param is filled in"}], "owner": {"reputation": 15, "user_id": 7005091, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x9Q5lwwtiUg/AAAAAAAAAAI/AAAAAAAAAco/suaQVbf_SIY/photo.jpg?sz=128", "display_name": "Joseph Parker", "link": "https://stackoverflow.com/users/7005091/joseph-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548279882, "creation_date": 1548271298, "last_edit_date": 1548279882, "question_id": 54334260, "link": "https://stackoverflow.com/questions/54334260/displaying-api-in-rails-view", "title": "Displaying API in Rails view", "body": "<p>I am trying to display the results of an external API when the user types in the ticker on the new stock form. What I am trying to accomplish is kind of stock search engine using the stock quote gem, so when the user types in the ticker it'll display some data points on that page and if the user hits submit it'll store that ticker and the price in the DB. </p>\n\n<p>Here is my controller</p>\n\n<pre><code>def new\n  @assignment = Assignment.new(portfolio_id: params[:portfolio_id])\n  @stock = Assignment.new_from_lookup(params[:ticker])\nend\n</code></pre>\n\n<p>And my model</p>\n\n<pre><code>def self.new_from_lookup(symbol)\n  begin\n    stock = StockQuote::Stock.quote(symbol)\n    new(company_name: stock.company_name,\n        symbol: stock.symbol,\n        latest_price: stock.latest_price,\n        latest_time: stock.latest_time)\n  rescue Exception =&gt; e\n    # Rescues all errors, an puts the exception object in `e\n    return nil\n  end\nend\n</code></pre>\n\n<p>I hope this isn't too broad of a question but how would I display the data points on the form when the ticker is entered and store the data points if the submit button is clicked? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1548272964, "post_id": 54333320, "comment_id": 95486747, "body": "&quot;Are constants being defined at some other point in time than module class methods?&quot; \u2013 Hint #1: at what point is <code>TEST_OK</code> defined? Hint #2: at what point is <code>is_ok</code> defined? Hint #3: which point comes first?"}, {"owner": {"reputation": 1141, "user_id": 1404905, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IYSNE.jpg?s=128&g=1", "display_name": "beniutek", "link": "https://stackoverflow.com/users/1404905/beniutek"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1548419646, "post_id": 54333320, "comment_id": 95544535, "body": "question was already answered, and your comment is not helpful  HINT #4 sarcastic hints are not helpful and discourage people from asking questions"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1548445827, "post_id": 54333320, "comment_id": 95558245, "body": "This question looks like it comes from someone who is learning Ruby. Guiding someone to the solution is generally preferred to just handing them the solution, since it re-inforces learning. At least, that&#39;s what it&#39;s like for me. Using the hints I gave, might guide the learner into the right direction, such that she might discover the answer herself, which will be a much more gratifying and useful learning experience."}], "answers": [{"comments": [{"owner": {"reputation": 1141, "user_id": 1404905, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IYSNE.jpg?s=128&g=1", "display_name": "beniutek", "link": "https://stackoverflow.com/users/1404905/beniutek"}, "edited": false, "score": 0, "creation_date": 1548267917, "post_id": 54333435, "comment_id": 95484541, "body": "ha! that&#39;s so simple, yet it didn&#39;t cross my mind, thanks! :)"}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 4, "last_activity_date": 1548267766, "creation_date": 1548267766, "answer_id": 54333435, "question_id": 54333320, "link": "https://stackoverflow.com/questions/54333320/assigning-constant-in-a-ruby-module/54333435#54333435", "title": "assigning constant in a ruby module", "body": "<p>This is simply a matter of definition order:</p>\n\n<pre><code>module Foo\n  module Bar\n    def self.is_ok\n      true\n    end\n    TEST = is_ok\n  end\nend\n</code></pre>\n\n<p>works exactly as you'd expect.</p>\n\n<p>The simple reason is that Ruby class definitions are evaluated line-by-line; at the time that <code>TEST</code> is assigned in your example, <code>::is_ok</code> isn't defined yet!</p>\n"}], "owner": {"reputation": 1141, "user_id": 1404905, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IYSNE.jpg?s=128&g=1", "display_name": "beniutek", "link": "https://stackoverflow.com/users/1404905/beniutek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 1, "accepted_answer_id": 54333435, "answer_count": 1, "score": 4, "last_activity_date": 1548331554, "creation_date": 1548267348, "last_edit_date": 1548331554, "question_id": 54333320, "link": "https://stackoverflow.com/questions/54333320/assigning-constant-in-a-ruby-module", "title": "assigning constant in a ruby module", "body": "<p>I have a module:</p>\n\n<pre><code>module Foo\n  module Bar\n    TEST = \"ok\"\n\n    def self.is_ok; true end\n  end\nend\n\nFoo::Bar::TEST # =&gt; \"ok\"\nFoo::Bar.is_ok # =&gt; true\n</code></pre>\n\n<p>I would like to have another constant inside the module that is defined, just once.</p>\n\n<p>I tried like this:</p>\n\n<pre><code>module Foo\n  module Bar\n    TEST = is_ok\n\n    def self.is_ok; true end\n  end\nend\n</code></pre>\n\n<p>I then get an error saying <code>undefined local variable or method 'is_ok' for Foo::Bar:Module</code>. This means that <code>is_ok</code> is not yet defined.</p>\n\n<p>Are constants defined at some other point in time than module class methods?</p>\n\n<p>Furthermore, I have another example:</p>\n\n<pre><code>module Foo\n  module Bar\n    TEST = \"ok\"\n\n    def self.is_ok; true end\n  end\n\n  module YYY\n    TEST = Foo::Bar::TEST\n    TEST2 = Foo::Bar.is_ok\n  end\nend\n</code></pre>\n\n<p>Here, I get:</p>\n\n<pre><code>Foo::Bar::TEST2 # =&gt; true\n</code></pre>\n\n<p>as expected.</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 1161, "user_id": 2056117, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93f3bba48b2683a41e9a2625934e6148?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/2056117/dan"}, "edited": false, "score": 0, "creation_date": 1548267248, "post_id": 54333216, "comment_id": 95484208, "body": "Have you tried using <code>.each</code>? Example:  <code>a.each { |url| Launchy.open(url) }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2894427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83d31dc28c67007ce56ef033147480a2?s=128&d=identicon&r=PG", "display_name": "chief", "link": "https://stackoverflow.com/users/2894427/chief"}, "is_accepted": false, "score": 0, "last_activity_date": 1548317476, "creation_date": 1548317476, "answer_id": 54342013, "question_id": 54333216, "link": "https://stackoverflow.com/questions/54333216/how-do-i-use-launchy-gem-for-an-array/54342013#54342013", "title": "How do I use Launchy gem for an array?", "body": "<p>As <a href=\"https://stackoverflow.com/users/2056117/dan\">Dan</a> commented you should iterate the urls and call <code>Launchy.open</code> for each one of them. So, in your case, this code should do the work:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'launchy'\n\nurls = ['msn.com', 'yahoo.com', 'blizzard.com']\n\nurls.each { |url| Launchy.open(url) }\n\n\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10386082, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WjMEgNWNSxg/AAAAAAAAAAI/AAAAAAAAAQk/bJUBCXxg9zI/photo.jpg?sz=128", "display_name": "jason gideon", "link": "https://stackoverflow.com/users/10386082/jason-gideon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548317476, "creation_date": 1548267000, "question_id": 54333216, "link": "https://stackoverflow.com/questions/54333216/how-do-i-use-launchy-gem-for-an-array", "title": "How do I use Launchy gem for an array?", "body": "<p>I am trying to open all of the urls in an array in my browser using the ruby gem Launchy but i can't seem to get it to work, any help is appreciated</p>\n\n<pre><code>require 'Launchy'\na = [\"msn.com\",\"yahoo.com\",\"blizzard.com\"]\nLaunchy.open(a[0..2])\n</code></pre>\n\n<p>I can get it to work with just Launchy.open(a[0]) or whatever value i want but not the whole range</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1548266198, "post_id": 54332979, "comment_id": 95483722, "body": "Hi I don&#39;t what&#39;s the corresponding command in Linux but for windows I type <code>gem list selenium-webdriver</code> and it will tell me the version of selenium-webdriver."}, {"owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1548268899, "post_id": 54332979, "comment_id": 95484999, "body": "Thanks @Rajagopalan - However I&#39;m not looking for the <i>gem</i> version, I&#39;m looking for the version of the Selenium library it&#39;s using."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1548272097, "post_id": 54332979, "comment_id": 95486388, "body": "It looks like the gem version for <code>selenium-webdriver</code> maps to the version of the ruby bindings: <a href=\"https://github.com/SeleniumHQ/selenium/blob/master/rb/CHANGES\" rel=\"nofollow noreferrer\">github.com/SeleniumHQ/selenium/blob/master/rb/CHANGES</a>"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1548303740, "post_id": 54332979, "comment_id": 95495171, "body": "I gave you the comment which gives you the selenium version. <code>gem list selenium-webdriver</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": true, "score": 1, "last_activity_date": 1548817038, "creation_date": 1548817038, "answer_id": 54432755, "question_id": 54332979, "link": "https://stackoverflow.com/questions/54332979/how-can-i-determine-my-version-of-selenium-from-the-selenium-webdriver-gem/54432755#54432755", "title": "How can I determine my version of Selenium from the `selenium-webdriver` gem?", "body": "<p>The gem version is going to be the same as the Selenium version.  You can see in the <a href=\"https://raw.githubusercontent.com/SeleniumHQ/selenium/master/rb/CHANGES\" rel=\"nofollow noreferrer\">CHANGELOG for the Ruby gem</a> that there are periodic updates ala: </p>\n\n<ul>\n<li>\"* No changes in Ruby bindings for this release\"</li>\n<li>\"No Ruby changes in this release.\"</li>\n</ul>\n\n<p>These are simply there to keep the two versions synced.  You can see similar updates in the Python documentation.</p>\n"}], "owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1296, "favorite_count": 0, "accepted_answer_id": 54432755, "answer_count": 1, "score": 0, "last_activity_date": 1548817038, "creation_date": 1548265910, "question_id": 54332979, "link": "https://stackoverflow.com/questions/54332979/how-can-i-determine-my-version-of-selenium-from-the-selenium-webdriver-gem", "title": "How can I determine my version of Selenium from the `selenium-webdriver` gem?", "body": "<p>Mozilla has <a href=\"https://firefox-source-docs.mozilla.org/testing/geckodriver/geckodriver/Support.html\" rel=\"nofollow noreferrer\">this handy chart</a> indicating which specific versions of geckodriver, selenium, and firefox work well together for automated browser testing.</p>\n\n<p><a href=\"https://i.stack.imgur.com/O5E9y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O5E9y.png\" alt=\"enter image description here\"></a></p>\n\n<p>My version of geckodriver and firefox are easy enough to determine (<code>geckodriver --version</code> and <code>firefox --version</code>). </p>\n\n<p>But how do I find <strong>what version of \"Selenium\" is installed</strong> on my Ubuntu installation? </p>\n\n<p><strong>I am using the <a href=\"https://github.com/SeleniumHQ/selenium/tree/master/rb\" rel=\"nofollow noreferrer\"><code>selenium-webdriver</code></a> ruby gem</strong> that is officially supported by the SeleniumHQ project, so I'm not sure if that supports a way determining the Selenium library version it is using. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 401, "user_id": 7562451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15309228645175e3511490021c59d862?s=128&d=identicon&r=PG&f=1", "display_name": "Vigneshwaran Sivalingam", "link": "https://stackoverflow.com/users/7562451/vigneshwaran-sivalingam"}, "edited": false, "score": 0, "creation_date": 1548265198, "post_id": 54332742, "comment_id": 95483249, "body": "Can you please try Ingredients.new and check whether you have &#39;title&#39; column displayed?"}, {"owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 1, "creation_date": 1548265227, "post_id": 54332742, "comment_id": 95483263, "body": "You should try this from <code>rails console</code> not from IRB."}, {"owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 0, "creation_date": 1548265277, "post_id": 54332742, "comment_id": 95483288, "body": "goto your rails app by <code>cd &#47;path&#47;to&#47;railsapp</code> --&gt; then do <code>rails console</code> and try"}, {"owner": {"reputation": 820, "user_id": 2640181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7599b700aee8e1a534030709ae43616?s=128&d=identicon&r=PG", "display_name": "barmic", "link": "https://stackoverflow.com/users/2640181/barmic"}, "edited": false, "score": 2, "creation_date": 1548265804, "post_id": 54332742, "comment_id": 95483527, "body": "Please show your <code>schema.rb</code>"}, {"owner": {"reputation": 303, "user_id": 10522953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba5c89b9214d9a78b87ce6d31926dbc?s=128&d=identicon&r=PG&f=1", "display_name": "ffblord", "link": "https://stackoverflow.com/users/10522953/ffblord"}, "reply_to_user": {"reputation": 401, "user_id": 7562451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15309228645175e3511490021c59d862?s=128&d=identicon&r=PG&f=1", "display_name": "Vigneshwaran Sivalingam", "link": "https://stackoverflow.com/users/7562451/vigneshwaran-sivalingam"}, "edited": false, "score": 0, "creation_date": 1548267728, "post_id": 54332742, "comment_id": 95484456, "body": "@VigneshwaranSivalingam I get     &quot;NameError: uninitialized constant Ingredients&quot;. Do u know why?"}, {"owner": {"reputation": 303, "user_id": 10522953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba5c89b9214d9a78b87ce6d31926dbc?s=128&d=identicon&r=PG&f=1", "display_name": "ffblord", "link": "https://stackoverflow.com/users/10522953/ffblord"}, "reply_to_user": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 0, "creation_date": 1548267779, "post_id": 54332742, "comment_id": 95484479, "body": "@NarasimhaReddy this is what I did!"}, {"owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 0, "creation_date": 1548268023, "post_id": 54332742, "comment_id": 95484587, "body": "according to your question - it is pointing from irb - <code>irb(main):003:0&gt; Ingredient.create!(title: &#39;Cheese Spread&#39;) ActiveModel::UnknownAttributeError: </code>. please change it - and also update your <code>schema.rb </code>file here."}, {"owner": {"reputation": 303, "user_id": 10522953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba5c89b9214d9a78b87ce6d31926dbc?s=128&d=identicon&r=PG&f=1", "display_name": "ffblord", "link": "https://stackoverflow.com/users/10522953/ffblord"}, "reply_to_user": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 0, "creation_date": 1548268196, "post_id": 54332742, "comment_id": 95484675, "body": "@NarasimhaReddy I was on the app folder and then gave the command <i>rails c</i>. Isnt this how you can get to the console? also what update should I do in the schema? Thanks in advance"}, {"owner": {"reputation": 3638, "user_id": 1977104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe5f45f44332caa3a105c05382c8e7b?s=128&d=identicon&r=PG", "display_name": "Wasif Hossain", "link": "https://stackoverflow.com/users/1977104/wasif-hossain"}, "edited": false, "score": 0, "creation_date": 1548271182, "post_id": 54332742, "comment_id": 95485994, "body": "@ffblord pls share the <code>schema.rb</code>. most probably you forgot to run the migration. if the <code>ingredients</code> table in the schema file does not contain <code>title</code> column, just run <code>rails db:migrate</code> and check the schema again to see if the column appears now. If yes, you can retry creating the record again."}, {"owner": {"reputation": 399, "user_id": 10692539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vFDqB.jpg?s=128&g=1", "display_name": "Claeusdev", "link": "https://stackoverflow.com/users/10692539/claeusdev"}, "edited": false, "score": 0, "creation_date": 1548345451, "post_id": 54332742, "comment_id": 95516668, "body": "Could you share your schema.rb file? seems as though you didn&#39;t run your migration"}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 10430267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPFp6.jpg?s=128&g=1", "display_name": "Snax", "link": "https://stackoverflow.com/users/10430267/snax"}, "is_accepted": false, "score": 1, "last_activity_date": 1548355865, "last_edit_date": 1548355865, "creation_date": 1548265669, "answer_id": 54332924, "question_id": 54332742, "link": "https://stackoverflow.com/questions/54332742/nomethoderror-undefined-method-title-for-ingredient0x0000000005e6cf30/54332924#54332924", "title": "NoMethodError: undefined method `title&#39; for #&lt;Ingredient:0x0000000005e6cf30&gt;", "body": "<p>Try <code>rails db:migrate</code> if you have not added this migration and then use <code>rails console</code>. </p>\n\n<p>What you probably did was rails db:migrate when you first created the table, but after you added the columns you did not and so when you went to create an Ingredient, it knew what the table was, thus why it could not go further than title.</p>\n"}], "owner": {"reputation": 303, "user_id": 10522953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba5c89b9214d9a78b87ce6d31926dbc?s=128&d=identicon&r=PG&f=1", "display_name": "ffblord", "link": "https://stackoverflow.com/users/10522953/ffblord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548370355, "creation_date": 1548264968, "last_edit_date": 1548370355, "question_id": 54332742, "link": "https://stackoverflow.com/questions/54332742/nomethoderror-undefined-method-title-for-ingredient0x0000000005e6cf30", "title": "NoMethodError: undefined method `title&#39; for #&lt;Ingredient:0x0000000005e6cf30&gt;", "body": "<p>I have come across this error a few times this week, but this time I have no idea what is wrong. I have an ActiveRecord Model called <code>Ingredients</code></p>\n\n<pre><code>class CreateIngredients &lt; ActiveRecord::Migration[5.2]\n  def change\n    create_table :ingredients do |t|\n\n      t.string :title , null: false\n      t.integer :availability\n      t.decimal :price, precision:15, scale: 2\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>And this is the application record I have for it:</p>\n\n<pre><code>class Ingredient &lt; ApplicationRecord\n  validates :title, presence: true\n\n  has_many :ingredient_categories\n  has_many :categories, through: :ingredient_categories\nend\n</code></pre>\n\n<p>Now I try to create a new Ingredient on the irb but I get an error saying:\n <code>NoMethodError: undefined method 'title' for #Ingredient:0x0000000005e6cf30&gt;</code></p>\n\n<p>This is the exact output on the console:</p>\n\n<pre><code>irb(main):003:0&gt; Ingredient.create!(title: 'Cheese Spread')\n#=&gt; ActiveModel::UnknownAttributeError: unknown attribute 'title' for Ingredient.\n</code></pre>\n\n<p>Can someone help me understand what I am doing wrong?</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1548314802, "post_id": 54332384, "comment_id": 95498603, "body": "I think you have way too much unrelated code in your question, you should simplify it into the minimum required to understand what you are asking."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5188662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/549431625204092/picture?type=large", "display_name": "Simon Harvey", "link": "https://stackoverflow.com/users/5188662/simon-harvey"}, "edited": false, "score": 0, "creation_date": 1548320376, "post_id": 54332735, "comment_id": 95501273, "body": "When i return the hash outside of the .map it adds the date as the key but the hash only contains the last hash entry. so i get [date =&gt; {last of 6 enrtries]. instead of [date =&gt; {entry 1}, {entry 2}, {entry 3}] Apologies if this doesn&#39;t make sense I&#39;m struggling to type with one eye."}, {"owner": {"reputation": 71, "user_id": 10392146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe6416d1c69ae27069a9f9ba541d6904?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin Harmon", "link": "https://stackoverflow.com/users/10392146/dustin-harmon"}, "reply_to_user": {"reputation": 25, "user_id": 5188662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/549431625204092/picture?type=large", "display_name": "Simon Harvey", "link": "https://stackoverflow.com/users/5188662/simon-harvey"}, "edited": false, "score": 0, "creation_date": 1548349086, "post_id": 54332735, "comment_id": 95518895, "body": "Do you have an example response for the three_hourly_forecast_raw method?  I do see that when three_hourly_forecast[@date] is set in a loop that each iteration would update the existing value of that hash key and not add to the key.  I can updated my answer with an example of this."}, {"owner": {"reputation": 25, "user_id": 5188662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/549431625204092/picture?type=large", "display_name": "Simon Harvey", "link": "https://stackoverflow.com/users/5188662/simon-harvey"}, "edited": false, "score": 0, "creation_date": 1548415886, "post_id": 54332735, "comment_id": 95542690, "body": "I&#39;ve dumped a copy of the json output from three_hourly_forcast_raw method in my repo <a href=\"https://github.com/simon71/magic_mirror_ruby/blob/master/bin/raw_data_output.txt\" rel=\"nofollow noreferrer\">github.com/simon71/magic_mirror_ruby/blob/master/bin/&hellip;</a>. Hope this helps and thanks for taking the time to help me."}, {"owner": {"reputation": 71, "user_id": 10392146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe6416d1c69ae27069a9f9ba541d6904?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin Harmon", "link": "https://stackoverflow.com/users/10392146/dustin-harmon"}, "reply_to_user": {"reputation": 25, "user_id": 5188662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/549431625204092/picture?type=large", "display_name": "Simon Harvey", "link": "https://stackoverflow.com/users/5188662/simon-harvey"}, "edited": false, "score": 0, "creation_date": 1548431683, "post_id": 54332735, "comment_id": 95551448, "body": "The changes I made to my original code block above to create a new empty array assigned to the hash key and then adds each parsed weather_data to that key appears to get the format you are after.  I ran this using the data block you provided to validate.   Let me know if this doesn&#39;t work for you."}], "tags": [], "owner": {"reputation": 71, "user_id": 10392146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe6416d1c69ae27069a9f9ba541d6904?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin Harmon", "link": "https://stackoverflow.com/users/10392146/dustin-harmon"}, "is_accepted": false, "score": 1, "last_activity_date": 1548349401, "last_edit_date": 1548349401, "creation_date": 1548264954, "answer_id": 54332735, "question_id": 54332384, "link": "https://stackoverflow.com/questions/54332384/adding-key-to-a-ruby-hash-im-creating/54332735#54332735", "title": "adding key to a ruby hash i&#39;m creating", "body": "<p>The three_hourly_forecast_values method will return the result of the .map call and not your new hash that is built inside of the map block since it is the last object.  You can place the three_hourly_forecast hash as the last line in that method to return your new hash. </p>\n\n<pre><code>def three_hourly_forecast_values(region)\n  three_hourly_forecast = {}\n  raw_data = three_hourly_forecast_raw(region)\n  raw_data['Period'].map do |key, _value|\n    @date = key['value']\n    three_hourly_forecast[@date] = []\n    key['Rep'].map do |weather_data, _v|\n      three_hourly_forecast[@date] &lt;&lt; forecast_hash(weather_data)\n    end\n  end\n  three_hourly_forecast\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 5188662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/549431625204092/picture?type=large", "display_name": "Simon Harvey", "link": "https://stackoverflow.com/users/5188662/simon-harvey"}, "edited": false, "score": 0, "creation_date": 1548320554, "post_id": 54332883, "comment_id": 95501360, "body": "Thanks for the response, the date is provided as a value in the original data. I want the date to be the key for each individual hash, not as a key-value pair within the hash. Thanks"}], "tags": [], "owner": {"reputation": 107, "user_id": 4168974, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001786317241/picture?type=large", "display_name": "Mahesh Babu", "link": "https://stackoverflow.com/users/4168974/mahesh-babu"}, "is_accepted": false, "score": 0, "last_activity_date": 1548265478, "creation_date": 1548265478, "answer_id": 54332883, "question_id": 54332384, "link": "https://stackoverflow.com/questions/54332384/adding-key-to-a-ruby-hash-im-creating/54332883#54332883", "title": "adding key to a ruby hash i&#39;m creating", "body": "<p>I assume you got your data into a variable called <strong>data</strong> </p>\n\n<pre><code>data = [{:hr=&gt;\"0\",\n         :feels_like=&gt;\"-1\",\n         :w_gust=&gt;\"40\",\n         :rel_humid=&gt;\"76\",\n         :temp=&gt;\"4\",\n         :visability=&gt;\"GO\",\n         :wind_dir=&gt;\"NW\",\n         :wind_speed=&gt;\"22\",\n         :max_uv=&gt;\"0\",\n         :type=&gt;\"7\",\n         :percipitation_probability=&gt;\"13\"},\n        ]\n\n data.each do |f|\n   f.merge!(date: \"Whether data\")\n  end\n</code></pre>\n\n<p><strong>Out put</strong></p>\n\n<pre><code>       [{:hr=&gt;\"0\",\n         :feels_like=&gt;\"-1\",\n         :w_gust=&gt;\"40\",\n         :rel_humid=&gt;\"76\",\n         :temp=&gt;\"4\",\n         :visability=&gt;\"GO\",\n         :wind_dir=&gt;\"NW\",\n         :wind_speed=&gt;\"22\",\n         :max_uv=&gt;\"0\",\n         :type=&gt;\"7\",\n         :percipitation_probability=&gt;\"13\"},\n         :date =&gt; \"Whether data\"\n        ]\n</code></pre>\n\n<p>This will append <strong>key</strong>  and it's <strong>value</strong> to each hash.\nI hope it helps.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 5188662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/549431625204092/picture?type=large", "display_name": "Simon Harvey", "link": "https://stackoverflow.com/users/5188662/simon-harvey"}, "edited": false, "score": 0, "creation_date": 1548320443, "post_id": 54333014, "comment_id": 95501309, "body": "By changing .map to .each it returns the original hash i.e. with the MetOffice keys and not mine."}, {"owner": {"reputation": 26, "user_id": 8970796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caed4fc02823630d72ce3f248b7521e1?s=128&d=identicon&r=PG&f=1", "display_name": "JMC", "link": "https://stackoverflow.com/users/8970796/jmc"}, "reply_to_user": {"reputation": 25, "user_id": 5188662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/549431625204092/picture?type=large", "display_name": "Simon Harvey", "link": "https://stackoverflow.com/users/5188662/simon-harvey"}, "edited": false, "score": 0, "creation_date": 1548330130, "post_id": 54333014, "comment_id": 95507096, "body": "return the three_hourly_forecast at the end."}, {"owner": {"reputation": 25, "user_id": 5188662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/549431625204092/picture?type=large", "display_name": "Simon Harvey", "link": "https://stackoverflow.com/users/5188662/simon-harvey"}, "edited": false, "score": 0, "creation_date": 1548419777, "post_id": 54333014, "comment_id": 95544593, "body": "Your right changing it to each and returning it at the end of the loop worked. Thanks.   `three_hourly_forecast = {}   raw_data = three_hourly_forecast_raw(region)   raw_data[&#39;Period&#39;].map do |key, _value|     @date = key[&#39;value&#39;]     key[&#39;Rep&#39;].each do |weather_data, _v|       three_hourly_forecast[@date] = forecast_hash(weather_data)     end     three_hourly_forecast   end   three_hourly_forecast end ```"}, {"owner": {"reputation": 25, "user_id": 5188662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/549431625204092/picture?type=large", "display_name": "Simon Harvey", "link": "https://stackoverflow.com/users/5188662/simon-harvey"}, "edited": false, "score": 0, "creation_date": 1548420338, "post_id": 54333014, "comment_id": 95544869, "body": "Sorry about the bad comment above, fat fingers and a doggy eye dont go well together. You were right to change it to .each and return the hash at the end of the loop. Thanks for the tip"}], "tags": [], "owner": {"reputation": 26, "user_id": 8970796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caed4fc02823630d72ce3f248b7521e1?s=128&d=identicon&r=PG&f=1", "display_name": "JMC", "link": "https://stackoverflow.com/users/8970796/jmc"}, "is_accepted": true, "score": 1, "last_activity_date": 1548266073, "creation_date": 1548266073, "answer_id": 54333014, "question_id": 54332384, "link": "https://stackoverflow.com/questions/54332384/adding-key-to-a-ruby-hash-im-creating/54333014#54333014", "title": "adding key to a ruby hash i&#39;m creating", "body": "<p>You are assigning three_hourly_forecast[@date] to forecast_hash(weather_data) inside a map function. The map function returns the last line, in that case it would be just the hash forecast_hash(weather_data). Change map to each to fix it.</p>\n\n<pre><code> def three_hourly_forecast_values(region)\n  three_hourly_forecast = {}\n  raw_data = three_hourly_forecast_raw(region)\n  raw_data['Period'].each do |key, _value|\n    @date = key['value']\n    key['Rep'].each do |weather_data, _v|\n      three_hourly_forecast[@date] = forecast_hash(weather_data)\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5188662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/549431625204092/picture?type=large", "display_name": "Simon Harvey", "link": "https://stackoverflow.com/users/5188662/simon-harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 54333014, "answer_count": 3, "score": 0, "last_activity_date": 1548349401, "creation_date": 1548263592, "question_id": 54332384, "link": "https://stackoverflow.com/questions/54332384/adding-key-to-a-ruby-hash-im-creating", "title": "adding key to a ruby hash i&#39;m creating", "body": "<p>So I've decided to improve my Ruby while signed off work with ophthalmic shingles.</p>\n\n<p>I've written this script to get forecast data from the MetOffice's Datapoint API.</p>\n\n<p>The bit i'm stuck at is </p>\n\n<pre><code>#!/bin/ruby\n# frozen_string_literal: true\n\n#\n# This script get the list of UK forecast locations\n#\nrequire 'pp'\nrequire 'net/http'\nrequire 'json'\nrequire 'uri'\n\n@apikey = 'insert-key-here'\n@base_url = 'http://datapoint.metoffice.gov.uk/public/data/'\n@format = 'json'\n\n# Make API call to get list of UK locations\n\ndef sitelist_data\n  res = \"val/wxfcs/all/#{@format}/sitelist?\"\n  url = \"#{@base_url}#{res}key=#{@apikey}\"\n  url = URI.parse(url)\n  resp = Net::HTTP.get(url)\n  data = ::JSON.parse(resp)\n  data['Locations']['Location'] # Step into the array to get location list\nend\n\n# All i need from the list is Authority name and Site name\n# Create a list to display all available locations\ndef sitelist\n  @fulllist = sitelist_data\n  region_list = {}\n  @fulllist.map do |k, _v|\n    k.each do |key, value|\n      @auth = value if key == 'unitaryAuthArea'\n      @name = value if key == 'name'\n    end\n    region_list[@auth] = @name\n  end\n  region_list # Return list of locations\nend\n\n# Get a 3 hrly forecast for the next 5 days for the chosen location\n\n# Get the raw 3hrly data for a specific region \ndef three_hourly_forecast_raw(region)\n  res = 'val/wxfcs/all/'\n  reg = region\n  url = \"#{@base_url}#{res}#{@format}/#{reg}?res=3hourly&amp;key=#{@apikey}\"\n  url = URI.parse(url)\n  resp = Net::HTTP.get(url)\n  data = ::JSON.parse(resp)\n  data['SiteRep']['DV']['Location'] # Step into array to get to forecasts data\nend\n\n# Get the headders from the data id, name, longitude and latittude\ndef three_hourly_forecast_headder(region)\n  raw_data = three_hourly_forecast_raw(region)\n  raw_data.each do |key, value|\n    @id = value if key == 'i'\n    @reg = value if key == 'name'\n    @lon = value if key == 'lon'\n    @lat = value if key == 'lat'\n  end\nend\n\n# Create a hash of the forecast data with new keys as\n# the ones provided by met office are not great\ndef three_hourly_forecast_values(region)\n  three_hourly_forecast = {}\n  raw_data = three_hourly_forecast_raw(region)\n  raw_data['Period'].map do |key, _value|\n    @date = key['value']\n    key['Rep'].map do |weather_data, _v|\n      three_hourly_forecast[@date] = forecast_hash(weather_data)\n    end\n  end\nend\n\n# Compile weather data hash\ndef forecast_hash(weather_data)\n  {\n    hr: weather_data[\"\\$\"],\n    feels_like: weather_data['F'], # unit = c\n    w_gust: weather_data['G'], # unit = mph\n    rel_humid: weather_data['H'], # unit = %\n    temp: weather_data['T'], # unit = c\n    visability: weather_data['V'],\n    wind_dir: weather_data['D'], # unit = compass\n    wind_speed: weather_data['S'], # unit = mph\n    max_uv: weather_data['U'],\n    type: weather_data['W'],\n    percipitation_probability: weather_data['Pp'] # unit = %\n  }\nend\n\npp three_hourly_forecast_values('310069')\n</code></pre>\n\n<p>At the moment when I run the script, I get this</p>\n\n<pre><code>[{:hr=&gt;\"0\",\n   :feels_like=&gt;\"-1\",\n   :w_gust=&gt;\"40\",\n   :rel_humid=&gt;\"76\",\n   :temp=&gt;\"4\",\n   :visability=&gt;\"GO\",\n   :wind_dir=&gt;\"NW\",\n   :wind_speed=&gt;\"22\",\n   :max_uv=&gt;\"0\",\n   :type=&gt;\"7\",\n   :percipitation_probability=&gt;\"13\"},\n  {:hr=&gt;\"180\",\n   :feels_like=&gt;\"-1\",\n   :w_gust=&gt;\"40\",\n   :rel_humid=&gt;\"75\",\n   :temp=&gt;\"4\",\n   :visability=&gt;\"GO\",\n   :wind_dir=&gt;\"NW\",\n   :wind_speed=&gt;\"22\",\n   :max_uv=&gt;\"0\",\n   :type=&gt;\"2\",\n   :percipitation_probability=&gt;\"10\"},\n  {:hr=&gt;\"360\",\n   :feels_like=&gt;\"-1\",\n   :w_gust=&gt;\"40\",\n   :rel_humid=&gt;\"74\",\n   :temp=&gt;\"4\",\n   :visability=&gt;\"VG\",\n   :wind_dir=&gt;\"NW\",\n   :wind_speed=&gt;\"22\",\n   :max_uv=&gt;\"0\",\n   :type=&gt;\"2\",\n   :percipitation_probability=&gt;\"6\"},\n  {:hr=&gt;\"540\",\n   :feels_like=&gt;\"-1\",\n   :w_gust=&gt;\"36\",\n   :rel_humid=&gt;\"74\",\n   :temp=&gt;\"4\",\n   :visability=&gt;\"VG\",\n   :wind_dir=&gt;\"NNW\",\n   :wind_speed=&gt;\"20\",\n   :max_uv=&gt;\"1\",\n   :type=&gt;\"3\",\n   :percipitation_probability=&gt;\"4\"},\n  {:hr=&gt;\"720\",\n   :feels_like=&gt;\"1\",\n   :w_gust=&gt;\"40\",\n   :rel_humid=&gt;\"63\",\n   :temp=&gt;\"6\",\n   :visability=&gt;\"VG\",\n   :wind_dir=&gt;\"NNW\",\n   :wind_speed=&gt;\"22\",\n   :max_uv=&gt;\"1\",\n   :type=&gt;\"3\",\n   :percipitation_probability=&gt;\"3\"},\n  {:hr=&gt;\"900\",\n   :feels_like=&gt;\"1\",\n   :w_gust=&gt;\"34\",\n   :rel_humid=&gt;\"63\",\n   :temp=&gt;\"6\",\n   :visability=&gt;\"VG\",\n   :wind_dir=&gt;\"NW\",\n   :wind_speed=&gt;\"20\",\n   :max_uv=&gt;\"1\",\n   :type=&gt;\"3\",\n   :percipitation_probability=&gt;\"4\"},\n  {:hr=&gt;\"1080\",\n   :feels_like=&gt;\"0\",\n   :w_gust=&gt;\"27\",\n   :rel_humid=&gt;\"71\",\n   :temp=&gt;\"4\",\n   :visability=&gt;\"VG\",\n   :wind_dir=&gt;\"NW\",\n   :wind_speed=&gt;\"16\",\n   :max_uv=&gt;\"0\",\n   :type=&gt;\"0\",\n   :percipitation_probability=&gt;\"3\"},\n  {:hr=&gt;\"1260\",\n   :feels_like=&gt;\"-1\",\n   :w_gust=&gt;\"20\",\n   :rel_humid=&gt;\"77\",\n   :temp=&gt;\"3\",\n   :visability=&gt;\"VG\",\n   :wind_dir=&gt;\"NW\",\n   :wind_speed=&gt;\"13\",\n   :max_uv=&gt;\"0\",\n   :type=&gt;\"0\",\n   :percipitation_probability=&gt;\"3\"}]\n</code></pre>\n\n<p>What i'd like is the date as the key to each hash, so it'd look like.</p>\n\n<p>[ date => {\nweather data\n}</p>\n\n<p>What am I doing wrong??</p>\n\n<p>This is purely a learning project so it doesn't have to be uber-efficient\u200b or anything, but if you do spot anything that I could improve feel free to point it out.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "prawn"], "comments": [{"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1548521290, "post_id": 54332286, "comment_id": 95574283, "body": "what do you mean by anchors? what do you want to be on your final outcome?"}, {"owner": {"reputation": 5556, "user_id": 478108, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/wyz1Y.png?s=128&g=1", "display_name": "8vius", "link": "https://stackoverflow.com/users/478108/8vius"}, "reply_to_user": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1548697383, "post_id": 54332286, "comment_id": 95625837, "body": "I mean hotlinks within the pdf to other sections of the PDF."}], "owner": {"reputation": 5556, "user_id": 478108, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/wyz1Y.png?s=128&g=1", "display_name": "8vius", "link": "https://stackoverflow.com/users/478108/8vius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548263170, "creation_date": 1548263170, "question_id": 54332286, "link": "https://stackoverflow.com/questions/54332286/instantiate-prawn-pdf-document-from-document-render", "title": "Instantiate Prawn PDF Document from document render", "body": "<p>I'm using <a href=\"https://github.com/prawnpdf/prawn\" rel=\"nofollow noreferrer\">PrawnPDF</a> to create a PDF file and then using <a href=\"https://github.com/boazsegev/combine_pdf\" rel=\"nofollow noreferrer\">CombinePDF</a> to append other files and render out the PDF for download. But I need to add anchors from the table content to the files that are appended afterwards so I want to be able to re-instantiate a <code>Prawn::Document</code> from the final rendered content, is there any way to do this? Or maybe someone can guide me to a better solution than the one I have in mind?</p>\n"}, {"tags": ["sql", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 2, "creation_date": 1548263745, "post_id": 54332160, "comment_id": 95482691, "body": "Try <code>State.create!(name:&quot;Alabama&quot;)</code> and see what it throws"}, {"owner": {"reputation": 6375, "user_id": 6826164, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-CKThqFqe5Eo/AAAAAAAAAAI/AAAAAAAAP10/ih0uh1YgT_I/photo.jpg?sz=128", "display_name": "Jonathan Tuzman", "link": "https://stackoverflow.com/users/6826164/jonathan-tuzman"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1548271816, "post_id": 54332160, "comment_id": 95486266, "body": "Turns out I had a <code>belongs_to</code> relationship that needed to be set to <code>optional: true</code>."}], "owner": {"reputation": 6375, "user_id": 6826164, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-CKThqFqe5Eo/AAAAAAAAAAI/AAAAAAAAP10/ih0uh1YgT_I/photo.jpg?sz=128", "display_name": "Jonathan Tuzman", "link": "https://stackoverflow.com/users/6826164/jonathan-tuzman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548263848, "creation_date": 1548262656, "last_edit_date": 1548263848, "question_id": 54332160, "link": "https://stackoverflow.com/questions/54332160/uniqueness-validation-returning-false-non-uniqueness", "title": "Uniqueness validation returning false non-uniqueness", "body": "<p>Adding states to an empty database, where State <code>validates :name, uniqueness: true</code>.</p>\n\n<p>Again, the DB is empty!</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>State.create(name:\"Alabama\")                                                                                                  \n   (0.2ms)  BEGIN\n  State Exists (0.6ms)  SELECT  1 AS one FROM \"states\" WHERE \"states\".\"name\" = $1 LIMIT $2  [[\"name\", \"Alabama\"], [\"LIMIT\", 1]]\n   (0.3ms)  ROLLBACK\n=&gt; #&lt;State:0x00007ffb711c3c60 id: nil, name: \"Alabama\", region_id: nil, created_at: nil, updated_at: nil&gt;\nState.all                                                                                                                     \n  State Load (0.5ms)  SELECT \"states\".* FROM \"states\"\n=&gt; []\n</code></pre>\n\n<p>Why does it say this state exists when NO states exist???</p>\n\n<p>When I get rid of the uniqueness validation, it's still acting funny:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>State.all                                                                                                                      \n  State Load (0.7ms)  SELECT \"states\".* FROM \"states\"\n=&gt; []\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1548263487, "post_id": 54332101, "comment_id": 95482548, "body": "Must be a dup. Anyhow you can do <code>[*1..10]</code> etc."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548266895, "post_id": 54332101, "comment_id": 95484051, "body": "The exact question (even &quot;1 to 10&quot;) was asked <a href=\"https://stackoverflow.com/questions/11173173/create-array-of-n-items-based-on-integer-value\">here</a>."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1548262580, "creation_date": 1548262580, "answer_id": 54332139, "question_id": 54332101, "link": "https://stackoverflow.com/questions/54332101/how-to-create-array-from-1-to-n-digit-with-single-line-of-code-in-ruby/54332139#54332139", "title": "How to create array from 1 to n digit with single line of code in ruby", "body": "<p>Convert a range into an array.</p>\n\n<pre><code>(1..n).to_a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2908, "user_id": 131160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ns5R6.png?s=128&g=1", "display_name": "jcsahnwaldt Reinstate Monica", "link": "https://stackoverflow.com/users/131160/jcsahnwaldt-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1607907195, "post_id": 54332419, "comment_id": 115412242, "body": "Downvote. Stolen from <a href=\"https://stackoverflow.com/a/11173335/131160\">stackoverflow.com/a/11173335/131160</a>"}], "tags": [], "owner": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "is_accepted": false, "score": -2, "last_activity_date": 1548263749, "creation_date": 1548263749, "answer_id": 54332419, "question_id": 54332101, "link": "https://stackoverflow.com/questions/54332101/how-to-create-array-from-1-to-n-digit-with-single-line-of-code-in-ruby/54332419#54332419", "title": "How to create array from 1 to n digit with single line of code in ruby", "body": "<p>another way\nYou can just splat a range:</p>\n\n<pre><code>[*1..n]\n</code></pre>\n\n<p>example</p>\n\n<pre><code>[*1..10]\n=&gt;[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n</code></pre>\n\n<h2>Or</h2>\n\n<pre><code>a= Array(0..10)\nputs a # =&gt; =&gt;[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n</code></pre>\n"}], "owner": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1962, "favorite_count": 0, "closed_date": 1548267109, "accepted_answer_id": 54332139, "answer_count": 2, "score": 1, "last_activity_date": 1548263749, "creation_date": 1548262444, "question_id": 54332101, "link": "https://stackoverflow.com/questions/54332101/how-to-create-array-from-1-to-n-digit-with-single-line-of-code-in-ruby", "closed_reason": "Duplicate", "title": "How to create array from 1 to n digit with single line of code in ruby", "body": "<p>Need to create an array of 1 to n numbers with a single line of code in ruby.</p>\n\n<p>I have tried it using while loop. But I'm sure there are other simpler way of doing this in ruby.</p>\n\n<pre><code>a = []\nb = 1\nwhile b &lt; 100 do\n  a &lt;&lt; b\n  b += 1 \nend\n</code></pre>\n\n<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99]\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1548262576, "post_id": 54331786, "comment_id": 95482067, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/54316267/array-of-substrings-in-array-of-strings\">array of substrings in array of strings</a>"}], "answers": [{"tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 3, "last_activity_date": 1548261701, "creation_date": 1548261701, "answer_id": 54331875, "question_id": 54331786, "link": "https://stackoverflow.com/questions/54331786/compare-two-ruby-arrays-and-return-similar-items/54331875#54331875", "title": "Compare two ruby arrays and return similar items", "body": "<p>You're on the right track, but missing some fundamentals.</p>\n\n<ol>\n<li>#reject selects those elements which do <em>not</em> satisfy the block condition</li>\n<li>Your block condition is testing if an element of array1 matches the entire array2 array - since a string and array will never match, all elements of array1 fail the test, and are thus returned.</li>\n</ol>\n\n<p>Unrolling it, you have these tests:</p>\n\n<pre><code>\"hello friend\" == [\"ello\", \"random\"] # =&gt; false\n\"goodbye enemy\" == [\"ello\", \"random\"] # =&gt; false\n# etc\n</code></pre>\n\n<p>Assuming you want all elements from array1 for which any element in array2 is a substring:</p>\n\n<pre><code>array1.select do |i|\n  array2.any? {|j| i.include?(j) }\nend\n</code></pre>\n\n<p>This means \"select all elements from array1 for which any element in array2 is a substring of the array1 element\".</p>\n\n<p>Unrolled, this gives you the following tests:</p>\n\n<pre><code>\"hello friend\".include?(\"ello\") # =&gt; true\n\"hello friend\".include?(\"random\") # =&gt; false\n\"goodbye enemy\".include?(\"ello\") # =&gt; false\n\"goodbye enemy\".include?(\"random\") # =&gt; false\n# etc\n</code></pre>\n\n<p><code>#any?</code> returns true if any element in the Enumerable matches the block condition, so unrolled:</p>\n\n<pre><code>[\"ello\", \"random\"].any? {|i| \"hello friend\".include?(i) } # =&gt; true\n[\"ello\", \"random\"].any? {|i| \"goodbye enemy\".include?(i) } # =&gt; false\n</code></pre>\n\n<p>Since <code>#select</code> returns those elements for which the block condition is true, \"hello friend\" would be returned, while \"goodbye enemy\" would not.</p>\n"}, {"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1548281850, "post_id": 54333586, "comment_id": 95490326, "body": "Could run into problems if <code>array2</code> contains meta characters. Shame that <code>Regexp.union</code> doesn&#39;t accept options so you&#39;re forced to do things like <code>Regexp.new(Regexp.union(array).source, &#39;i&#39;)</code> or <code>&#47;#{array.map { |s| Regexp.escape(s) }.join(&#39;|&#39;)}&#47;i</code> to properly escape possible meta characters."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1548312790, "last_edit_date": 1548312790, "creation_date": 1548268433, "answer_id": 54333586, "question_id": 54331786, "link": "https://stackoverflow.com/questions/54331786/compare-two-ruby-arrays-and-return-similar-items/54333586#54333586", "title": "Compare two ruby arrays and return similar items", "body": "<pre><code>array1 = [\"hello friend\", \"goodbye enemy\", \"yolo\", \"jello\", \"Randomize\"]\narray2 = [\"ello\", \"random\"]\n\nr = Regexp.new(Regexp.union(array2).source, 'i')\n  #=&gt; /ello|random/i  \narray1.grep(r)\n  #=&gt; [\"hello friend\", \"jello\", \"Randomize\"] \n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.5.1/Regexp.html#method-c-new\" rel=\"nofollow noreferrer\">Regexp::new</a>, <a href=\"http://ruby-doc.org/core-2.5.1/Regexp.html#method-c-union\" rel=\"nofollow noreferrer\">Regexp::union</a>, <a href=\"http://ruby-doc.org/core-2.5.1/Regexp.html#method-i-source\" rel=\"nofollow noreferrer\">Regexp#source</a> and <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-grep\" rel=\"nofollow noreferrer\">Enumerable#grep</a>.</p>\n"}], "owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 1, "accepted_answer_id": 54331875, "answer_count": 2, "score": 0, "last_activity_date": 1548312790, "creation_date": 1548261366, "question_id": 54331786, "link": "https://stackoverflow.com/questions/54331786/compare-two-ruby-arrays-and-return-similar-items", "title": "Compare two ruby arrays and return similar items", "body": "<p>I have two arrays:</p>\n\n<pre><code>array1 = [\"hello friend\", \"goodbye enemy\", \"yolo\", \"jello\"]\narray2 = [\"ello\", \"random\"]\n</code></pre>\n\n<p>I need to write a method that returns an array of the elements in array1 that include in a string item any of the items in array2.  So the method should return:</p>\n\n<pre><code>[\"hello friend\", \"jello\"]\n</code></pre>\n\n<p>I've tried <code>array1.reject{|i| array1.include? array2}</code> but it just returns array1. What should I do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-engines"], "comments": [{"owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 0, "creation_date": 1548259503, "post_id": 54331167, "comment_id": 95480364, "body": "use rails g migration AddingActiveBooleanToTypesAndStatue"}, {"owner": {"reputation": 52, "user_id": 1628748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2748fba361dc00eb7649b70573528b65?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1628748/chris"}, "reply_to_user": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 0, "creation_date": 1548259636, "post_id": 54331167, "comment_id": 95480433, "body": "Thanks @widjajayd, but I got the same result."}, {"owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 0, "creation_date": 1548259769, "post_id": 54331167, "comment_id": 95480503, "body": "make sure you in working folder for example you working in my_apps then you should cd my_apps"}], "answers": [{"tags": [], "owner": {"reputation": 52, "user_id": 1628748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2748fba361dc00eb7649b70573528b65?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1628748/chris"}, "is_accepted": false, "score": 1, "last_activity_date": 1548260355, "creation_date": 1548260355, "answer_id": 54331514, "question_id": 54331167, "link": "https://stackoverflow.com/questions/54331167/rails-generators-not-loading-for-engine/54331514#54331514", "title": "Rails generators not loading for engine", "body": "<p>Solved: </p>\n\n<p>the reason was that the project for some reason was missing a <code>bin/rails</code> folder.</p>\n\n<p>Had to generate a new engine and copy/change the file to point to the right engine folder.</p>\n\n<p>This is the content of it just if anyone needs it.</p>\n\n<pre><code>#!/usr/bin/env ruby\n# This command will automatically be run when you run \"rails\" with Rails 4 gems installed from the root of your application.\n\nENGINE_ROOT = File.expand_path('../..', __FILE__)\nENGINE_PATH = File.expand_path('../../lib/engine', __FILE__)\n\n# Set up gems listed in the Gemfile.\nENV['BUNDLE_GEMFILE'] ||= File.expand_path('../../Gemfile', __FILE__)\nrequire 'bundler/setup' if File.exist?(ENV['BUNDLE_GEMFILE'])\n\nrequire 'rails/all'\nrequire 'rails/engine/commands'\n</code></pre>\n"}], "owner": {"reputation": 52, "user_id": 1628748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2748fba361dc00eb7649b70573528b65?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1628748/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548260355, "creation_date": 1548259249, "question_id": 54331167, "link": "https://stackoverflow.com/questions/54331167/rails-generators-not-loading-for-engine", "title": "Rails generators not loading for engine", "body": "<p>I'm working on an engine that was generated from rails 3 and now when I attempt to run the generators from Rails, it asks me to generate a new project. </p>\n\n<p>It's evident that is not able to find the structure that is required for rails to invoke ActiveRecord, but I have no clue how to patch that </p>\n\n<p><code>rails g migration adding-active-boolean-to-types-and-statuses</code> </p>\n\n<p>produces this:</p>\n\n<pre><code>Usage:\n  rails new APP_PATH [options]\n\nOptions:\n  -r, [--ruby=PATH]                                      # Path to the Ruby binary of your choice\n                                                         # Default: /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/ruby\n  -m, [--template=TEMPLATE]                              # Path to some application template (can be a filesystem path or URL)\n      [--skip-gemfile], [--no-skip-gemfile]              # Don't create a Gemfile\n  -B, [--skip-bundle], [--no-skip-bundle]                # Don't run bundle install\n  -G, [--skip-git], [--no-skip-git]                      # Skip .gitignore file\n      [--skip-keeps], [--no-skip-keeps]                  # Skip source control .keep files\n</code></pre>\n\n<p>I've tried adding the specific path and got the same results:</p>\n\n<p><code>/usr/bin/rails g migration adding-active-boolean-to-types-and-statuses</code></p>\n"}, {"tags": ["ruby", "aws-lambda", "rubygems", "sequel", "pg"], "comments": [{"owner": {"reputation": 1257, "user_id": 1090265, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fac64a9595102c8ad859ab022dbbca7c?s=128&d=identicon&r=PG", "display_name": "1ijk", "link": "https://stackoverflow.com/users/1090265/1ijk"}, "edited": false, "score": 0, "creation_date": 1548258015, "post_id": 54330779, "comment_id": 95479487, "body": "A bit more detail: I printed out the contents of LOAD_PATH. I clearly see <code>.&#47;vendor&#47;bundle&#47;ruby&#47;2.5.0&#47;gems&#47;pg-1.1.4&#47;lib</code> but the error above references <code>&#47;var&#47;task&#47;vendor&#47;bundle&#47;ruby&#47;2.5.0&#47;gems&#47;pg-1.1.4&#47;lib&#47;pg.rb</code>. I think that&#39;s the same path.... but do I need to be more explicit?"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 909917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20fe5f870139beabd202db1b0c7b2b67?s=128&d=identicon&r=PG", "display_name": "prcoder", "link": "https://stackoverflow.com/users/909917/prcoder"}, "edited": false, "score": 0, "creation_date": 1601899068, "post_id": 55029832, "comment_id": 113539876, "body": "This is not working for me with sam cli: sam build --debug -t template.yaml --use-container"}, {"owner": {"reputation": 435, "user_id": 1245880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f60568f76ca5b580dc6bea0f72c4b32?s=128&d=identicon&r=PG", "display_name": "Ruan Carlos", "link": "https://stackoverflow.com/users/1245880/ruan-carlos"}, "reply_to_user": {"reputation": 135, "user_id": 909917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20fe5f870139beabd202db1b0c7b2b67?s=128&d=identicon&r=PG", "display_name": "prcoder", "link": "https://stackoverflow.com/users/909917/prcoder"}, "edited": false, "score": 0, "creation_date": 1601989066, "post_id": 55029832, "comment_id": 113572273, "body": "@prcoder, please provide more information. The question here is about loading gem extensions on AWS lambda, there is no CLI involved."}, {"owner": {"reputation": 135, "user_id": 909917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20fe5f870139beabd202db1b0c7b2b67?s=128&d=identicon&r=PG", "display_name": "prcoder", "link": "https://stackoverflow.com/users/909917/prcoder"}, "edited": false, "score": 0, "creation_date": 1602061669, "post_id": 55029832, "comment_id": 113597843, "body": "Hey Ruan, apologies. The issue was with AWS Lambda Layers with SAM. This solution doesn&#39;t work with that. I tried the regular way by putting all the required native dependencies in the code and it worked. Thanks for this solution."}, {"owner": {"reputation": 153, "user_id": 771940, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cb2df894d5595dbc7df2ce378adb26c5?s=128&d=identicon&r=PG", "display_name": "proton", "link": "https://stackoverflow.com/users/771940/proton"}, "edited": false, "score": 1, "creation_date": 1606678861, "post_id": 55029832, "comment_id": 115027258, "body": "An example code for ruby 2.7: <a href=\"https://github.com/proton/lambda-ruby-pg\" rel=\"nofollow noreferrer\">github.com/proton/lambda-ruby-pg</a>"}], "tags": [], "owner": {"reputation": 435, "user_id": 1245880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f60568f76ca5b580dc6bea0f72c4b32?s=128&d=identicon&r=PG", "display_name": "Ruan Carlos", "link": "https://stackoverflow.com/users/1245880/ruan-carlos"}, "is_accepted": true, "score": 13, "last_activity_date": 1551898027, "last_edit_date": 1551898027, "creation_date": 1551896576, "answer_id": 55029832, "question_id": 54330779, "link": "https://stackoverflow.com/questions/54330779/how-to-correctly-load-a-gem-extension-in-aws-lambda/55029832#55029832", "title": "How to correctly load a gem extension in AWS Lambda", "body": "<p>Do you have <code>libpq.so.5</code> on your <code>lib</code> folder?</p>\n\n<p>Your error is saying that did not find <code>libpq.so.5</code> on the <code>$PATH</code>, in AWS Lambda the folder <code>lib</code> is automatically loaded on the path, thus, you just need to have this file there. </p>\n\n<p>Executables created outside the lambda world do not run on Lambda, furthermore, you need to compile the executables by your own on a Lambda image. This is an example in how to do that:</p>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>source \"https://rubygems.org\"\n\ngem \"pg\"\ngem \"mysql2\"\n</code></pre>\n\n<p><strong>handler.rb</strong></p>\n\n<pre><code>require 'pg'\nrequire 'mysql2'\n\ndef run(event:, context:)\n  {\n    postgres_client_version: PG.library_version,\n    mysql_client_version: Mysql2::VERSION\n  }\nend\n\n</code></pre>\n\n<p><strong>Dockerfile</strong></p>\n\n<pre><code>FROM lambci/lambda:build-ruby2.5\n\nRUN yum install -y postgresql postgresql-devel mysql mysql-devel\nRUN gem update bundler\n\nADD Gemfile /var/task/Gemfile\nADD Gemfile.lock /var/task/Gemfile.lock\n\nRUN bundle install --path /var/task/vendor/bundle --clean\n</code></pre>\n\n<p>This is going to build your image, then run it to generate the PG and MYSQL executables, then copy it to your lib folder.</p>\n\n<p><strong>build.sh</strong></p>\n\n<pre><code>#!/bin/bash -x\nset -e\n\nrm -rf lib &amp;&amp; rm -rf vendor &amp;&amp; mkdir lib &amp;&amp; mkdir vendor\n\ndocker build -t pg_mysql_layer -f Dockerfile .\n\nCONTAINER=$(docker run -d pg_mysql_layer false)\n\ndocker cp \\\n    $CONTAINER:/var/task/vendor/ \\\n    ./\n\ndocker cp \\\n    $CONTAINER:/usr/lib64/libpq.so.5.5 \\\n    lib/libpq.so.5\n\ndocker cp \\\n    $CONTAINER:/usr/lib64/mysql/. \\\n    lib/\n\ndocker rm $CONTAINER\n\n</code></pre>\n\n<p>After running <code>./build.sh</code> it is going to generate the folder <code>lib</code> and <code>vendor</code> with all you need, now you just need to deploy your lambda function.</p>\n\n<p>To test locally you can run:\n<code>docker run --rm -it -v $PWD:/var/task -w /var/task  lambci/lambda:ruby2.5 handler.run</code></p>\n\n<p>It is going to return something similar to this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/LnRl0.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/LnRl0.png\" alt=\"Lambda execution\"></a></p>\n\n<p>REF: <a href=\"https://www.stevenringo.com/ruby-in-aws-lambda-with-postgresql-nokogiri/\" rel=\"noreferrer\">https://www.stevenringo.com/ruby-in-aws-lambda-with-postgresql-nokogiri/</a></p>\n\n<p>REF: <a href=\"https://www.reddit.com/r/ruby/comments/a3e7a1/postgresql_on_aws_lambda_ruby/\" rel=\"noreferrer\">https://www.reddit.com/r/ruby/comments/a3e7a1/postgresql_on_aws_lambda_ruby/</a> </p>\n"}, {"tags": [], "owner": {"reputation": 5091, "user_id": 10474999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9379ef6b63d5d67645354b797d3caa82?s=128&d=identicon&r=PG&f=1", "display_name": "Navarasu", "link": "https://stackoverflow.com/users/10474999/navarasu"}, "is_accepted": false, "score": 2, "last_activity_date": 1608741637, "creation_date": 1608741637, "answer_id": 65427797, "question_id": 54330779, "link": "https://stackoverflow.com/questions/54330779/how-to-correctly-load-a-gem-extension-in-aws-lambda/65427797#65427797", "title": "How to correctly load a gem extension in AWS Lambda", "body": "<p>There are few good plugins to manage dependencies for AWS lambda. <a href=\"https://www.serverless.com/plugins/serverless-ruby-layer\" rel=\"nofollow noreferrer\">serverless-ruby-layer</a> for ruby and <a href=\"https://github.com/UnitedIncome/serverless-python-requirements\" rel=\"nofollow noreferrer\">serverless-python-requirements</a> for python.</p>\n<p>For your ruby case, you can use serverless-ruby-layer simply by adding plugin related config to your serverless.yml.</p>\n<pre><code>service: using-docker-yums\n\nplugins:\n  - serverless-ruby-layer\n\ncustom:\n  rubyLayer:\n    use_docker: true\n    docker_yums:\n      - postgresql-devel\n    native_libs:\n      - /usr/lib64/libpq.so.5\n\nprovider:\n  name: aws\n  runtime: ruby2.5\n\nfunctions:\n  hello:\n    handler: handler.hello\n</code></pre>\n<p>And you need to install the plugin with the below command inside your serverless project folder,</p>\n<pre><code>sls plugin install -n serverless-ruby-layer\n</code></pre>\n<p>Now running <code>sls deploy</code> will automatically deploy the gems and libs to the layer.</p>\n<p>Check out this example <a href=\"https://navarasu.github.io/serverless-ruby-layer/#/use_docker_with_yums\" rel=\"nofollow noreferrer\">here</a> in the docs</p>\n"}], "owner": {"reputation": 1257, "user_id": 1090265, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fac64a9595102c8ad859ab022dbbca7c?s=128&d=identicon&r=PG", "display_name": "1ijk", "link": "https://stackoverflow.com/users/1090265/1ijk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1773, "favorite_count": 0, "accepted_answer_id": 55029832, "answer_count": 2, "score": 5, "last_activity_date": 1608741637, "creation_date": 1548257915, "question_id": 54330779, "link": "https://stackoverflow.com/questions/54330779/how-to-correctly-load-a-gem-extension-in-aws-lambda", "title": "How to correctly load a gem extension in AWS Lambda", "body": "<p>I'm having trouble working through a gem load error on AWS Lambda.</p>\n\n<pre><code>{\n  \"errorMessage\": \"LoadError: libpq.so.5: cannot open shared object file: No such file or directory - /var/task/vendor/bundle/ruby/2.5.0/gems/pg-1.1.4/lib/pg_ext.so\",\n  \"errorType\": \"Function&lt;Sequel::AdapterNotFound&gt;\",\n  \"stackTrace\": [\n    \"/var/lang/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\",\n    \"/var/lang/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\",\n    \"/var/task/vendor/bundle/ruby/2.5.0/gems/pg-1.1.4/lib/pg.rb:4:in `&lt;top (required)&gt;'\",\n    \"/var/lang/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\",\n    \"/var/lang/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\",\n    \"/var/task/vendor/bundle/ruby/2.5.0/gems/sequel-5.16.0/lib/sequel/adapters/postgres.rb:6:in `&lt;top (required)&gt;'\",\n    \"/var/lang/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\",\n    \"/var/lang/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\",\n    \"/var/task/vendor/bundle/ruby/2.5.0/gems/sequel-5.16.0/lib/sequel/database/connecting.rb:88:in `load_adapter'\",\n    \"/var/task/vendor/bundle/ruby/2.5.0/gems/sequel-5.16.0/lib/sequel/database/connecting.rb:17:in `adapter_class'\",\n    \"/var/task/vendor/bundle/ruby/2.5.0/gems/sequel-5.16.0/lib/sequel/database/connecting.rb:45:in `connect'\",\n    \"/var/task/vendor/bundle/ruby/2.5.0/gems/sequel-5.16.0/lib/sequel/core.rb:121:in `connect'\",\n    \"/var/task/vendor/bundle/ruby/2.5.0/gems/sequel-5.16.0/lib/sequel/core.rb:399:in `adapter_method'\",\n    \"/var/task/vendor/bundle/ruby/2.5.0/gems/sequel-5.16.0/lib/sequel/core.rb:406:in `block (2 levels) in def_adapter_method'\",\n    \"/var/task/lib/warehouse/loader.rb:5:in `connection'\",\n    \"/var/task/lib/warehouse/loader.rb:24:in `initialize'\",\n    \"/var/task/lib/warehouse/update.rb:43:in `new'\",\n    \"/var/task/lib/warehouse/update.rb:43:in `block in handle'\",\n    \"/var/task/lib/warehouse/update.rb:42:in `each'\",\n    \"/var/task/lib/warehouse/update.rb:42:in `handle'\",\n    \"/var/task/lambda.rb:11:in `handler'\"\n  ]\n}\n</code></pre>\n\n<p>I am using the Sequel library to make a PSQL connection from AWS Lambda, but it seems that the function cannot find the so file. I <em>have</em> packaged the dependencies in <code>vendor/bundle</code>, built in Ubuntu on CodeBuild, and verified that the .so file is present in the resulting artifacts uploaded to lambda. I've also edited the $LOAD_PATH, but that doesn't seem to help.</p>\n\n<p>Anyone else encountered this difficulty? Any further tips on resolving or debugging?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "partials"], "comments": [{"owner": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "edited": false, "score": 0, "creation_date": 1548261014, "post_id": 54330748, "comment_id": 95481237, "body": "post your stack Trace!"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "edited": false, "score": 0, "creation_date": 1548261121, "post_id": 54330748, "comment_id": 95481296, "body": "@giridharan I don&#39;t really see how thats relevant as this code is conceptually broken."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 2913976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957b0a8e2d7772876d62495201153792?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2913976/mike"}, "edited": false, "score": 0, "creation_date": 1548261399, "post_id": 54331516, "comment_id": 95481447, "body": "Thanks for the response @max!  The form inside of <code>_tournament.html.erb</code> is used to create a single player at a time and attach it to the tournament, so using <code>&#47;tournaments&#47;:tournament_id&#47;player</code> should be fine.   I&#39;ll take a look at nested_attributes. I have a route right now that looks similar to your suggestion. Just mostly trying to find a way to collect a list of checkbox id&#39;s so I can pass them to ActiveRecord to handle / delete."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 97, "user_id": 2913976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957b0a8e2d7772876d62495201153792?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2913976/mike"}, "edited": false, "score": 0, "creation_date": 1548261822, "post_id": 54331516, "comment_id": 95481680, "body": "If the form creates a single player you don&#39;t need a checkbox in it. You should be handling it on the controller side by <code>@player = Tournament.find(params[:tournament_id]).players.new</code> as the tournament is passed through the path. That railscast is from 2007 and is pretty much completely useless today. And even at that is not really relevant for what you are doing."}, {"owner": {"reputation": 97, "user_id": 2913976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957b0a8e2d7772876d62495201153792?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2913976/mike"}, "edited": false, "score": 0, "creation_date": 1548262406, "post_id": 54331516, "comment_id": 95481986, "body": "The button at the bottom &quot;Delete Players&quot; (editing that now - should say &quot;Delete Players&quot;, sorry) should allow me to delete a list of players that I&#39;ve selected through checkboxes. So if there are 20 players listed, each should have their own checkbox, and clicking &quot;Delete Players&quot; should delete the <i>selected</i> players from the tournament. Sorry for the confusion!"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 97, "user_id": 2913976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957b0a8e2d7772876d62495201153792?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2913976/mike"}, "edited": false, "score": 0, "creation_date": 1548264281, "post_id": 54331516, "comment_id": 95482906, "body": "I would ask if you really need this as a separate feature. The normal checkbox lets you add / remove players from the tournament by just checking the boxes, which makes more sense from a UX perspective than having a separate input just to remove players."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 97, "user_id": 2913976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957b0a8e2d7772876d62495201153792?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2913976/mike"}, "edited": false, "score": 0, "creation_date": 1548264968, "post_id": 54331516, "comment_id": 95483172, "body": "You are most likely overcomplicating/overthinking a simple feature. <a href=\"https://en.wikipedia.org/wiki/KISS_principle\" rel=\"nofollow noreferrer\">KISS</a>. Add the feature to delete all the players later if you actually need it."}, {"owner": {"reputation": 97, "user_id": 2913976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957b0a8e2d7772876d62495201153792?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2913976/mike"}, "edited": false, "score": 0, "creation_date": 1548266315, "post_id": 54331516, "comment_id": 95483774, "body": "I think there&#39;s a misunderstanding here. The existing form to add players is literally just 2 input fields, you can enter whatever you want into them, on submit (clicking &quot;Add Player&quot;) that new player gets added to the tournament; there&#39;s no link to any existing players ever, it&#39;s just a single &quot;Player&quot; that is a child of a &quot;Tournament&quot;. The point of the checkboxes is to select multiple players and choose to delete them from the tournament if you want. Can be 1 player, can be all players. I know improvements can be made in terms of UI / UX but that&#39;s not what I&#39;m trying to solve for right now."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 97, "user_id": 2913976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957b0a8e2d7772876d62495201153792?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2913976/mike"}, "edited": false, "score": 0, "creation_date": 1548266433, "post_id": 54331516, "comment_id": 95483816, "body": "I would really encourage you to just set it up as in the answer and try it. You&#39;re really overthinking it and mixing up the creation of records with just creating an association."}, {"owner": {"reputation": 97, "user_id": 2913976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957b0a8e2d7772876d62495201153792?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2913976/mike"}, "edited": false, "score": 0, "creation_date": 1548266886, "post_id": 54331516, "comment_id": 95484048, "body": "I&#39;m not looking to delete all of the players every time though. And I&#39;m unsure how to use nested attributes on the tournament model or form_for in either tournament or player partials to help in this scenario."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 97, "user_id": 2913976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957b0a8e2d7772876d62495201153792?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2913976/mike"}, "edited": false, "score": 0, "creation_date": 1548270931, "post_id": 54331516, "comment_id": 95485895, "body": "Its a simple rails app based on a scaffold that shows how you can both create nested records with nested attributes and associate exisiting records with checkboxes."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1548260850, "last_edit_date": 1548260850, "creation_date": 1548260357, "answer_id": 54331516, "question_id": 54330748, "link": "https://stackoverflow.com/questions/54330748/trying-to-collect-a-list-of-ids-from-checkboxes-to-delete-from-my-database/54331516#54331516", "title": "Trying to collect a list of ids from checkboxes to delete from my database", "body": "<p>What you are doing is creating a form that posts to <code>/tournaments/:tournament_id/players</code> which makes sense if you are assigning the players one by one or creating a single player.</p>\n\n<p><strong>It does not make sense at all if you are assigning multiple players to a tournament. Because you are actually changing the parent resource.</strong></p>\n\n<p>In that case you should be sending a POST request to <code>/tournaments</code> (to create a tournament) or a PATCH request to <code>/tournaments/:id</code> (to modify an existing record).</p>\n\n<pre><code>&lt;%= form_for tournament do |f| %&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :player_ids, \"Assign players\" %&gt;\n    &lt;%= f.collection_check_boxes :player_ids, Player.all, :id, :name %&gt;\n  &lt;/div&gt;\n  &lt;%= f.submit  %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<hr>\n\n<pre><code>class TournamentsController &lt; ApplicationController\n  # ...\n  private\n  def tournament_params\n    params.require(:tournament)\n          .permit(:foo, :bar, player_ids: [])\n  end\nend\n</code></pre>\n\n<p>If you want to be able to create multiple player records in a single request you should use <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\">nested attributes</a> and <a href=\"https://api.rubyonrails.org/v5.2.2/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for\" rel=\"nofollow noreferrer\">fields_for</a>.</p>\n\n<p>To unassign all the players you can do a PATCH request to <code>/tournaments/:id</code> \nwith an empty array as the value for <code>tournaments[:players_ids]</code>. You can do this with javascript by creating a handler that unchecks all the checkboxes and submits the form when the user clicks the button (or confirms it).</p>\n\n<p>Or you could create a <a href=\"https://guides.rubyonrails.org/v3.2/routing.html#adding-more-restful-actions\" rel=\"nofollow noreferrer\">custom <code>DELETE /tournaments/:tournament_id/players</code> route</a>.</p>\n\n<pre><code>resources :tournaments do\n  resources :players\n  delete :players, on: :collection, action: :delete_all_players\nend\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 2913976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957b0a8e2d7772876d62495201153792?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2913976/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548262319, "creation_date": 1548257838, "last_edit_date": 1548262319, "question_id": 54330748, "link": "https://stackoverflow.com/questions/54330748/trying-to-collect-a-list-of-ids-from-checkboxes-to-delete-from-my-database", "title": "Trying to collect a list of ids from checkboxes to delete from my database", "body": "<p>I'm creating an app (personal project) that'll help us schedule and record Nerf tournaments for a group I hang out with. I have <code>tournament</code> and <code>player</code> models. A tournament can have multiple players.</p>\n\n<p>I want to be able to check multiple players and choose to delete them from the tournament. The thing is though is that all of my players are rendered in a nested partial. And my <code>tournament</code> partial has a form already inside of it.</p>\n\n<p>Here is <code>_tournament.html.erb</code>:</p>\n\n<pre><code>&lt;section class=\"panel\" id=\"&lt;%= dom_id(tournament) %&gt;\"&gt;\n  &lt;h1 class=\"heading\"&gt;\n    &lt;%= tournament.name %&gt;\n  &lt;/h1&gt;\n\n  &lt;ul&gt;\n    &lt;%= render tournament.players %&gt;\n  &lt;/ul&gt;\n\n  &lt;section class=\"add_players\"&gt;\n    &lt;%= form_for [tournament, Player.new] do |f| %&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.text_field :name %&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.text_field :team %&gt;\n      &lt;/div&gt;\n      &lt;%= f.submit \"Add Player\", class=\"button blue\" %&gt;\n    &lt;% end %&gt;\n  &lt;/section&gt;\n\n  &lt;section class=\"delete_all\"&gt;\n    &lt;button class=\"button red\" type=\"button\"&gt;Delete Players&lt;/button&gt;\n  &lt;/section&gt;\n&lt;/section&gt;\n</code></pre>\n\n<p>and here is <code>_player.html.erb</code>:</p>\n\n<pre><code>&lt;li id=\"&lt;%= dom_id(player) %&gt;\"&gt;\n  &lt;div class=\"player\"&gt;\n    &lt;%= check_box_tag \"player_ids[]\", player.id %&gt;\n    &lt;span class=\"name\"&gt;&lt;%= player.name %&gt;&lt;/span&gt; |\n    &lt;span class=\"team\"&gt;&lt;%= player.team %&gt;&lt;/span&gt;\n  &lt;/div&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>I'm familiar with <a href=\"http://railscasts.com/episodes/52-update-through-checkboxes\" rel=\"nofollow noreferrer\">Railscast #52</a> where he does a simpler example of this, but I can't figure out how to get all of those checked checkboxes in the tournament partial and use those ID's to delete those players from the tournament.</p>\n\n<p>I've tried wrapping the <code>_tournament.html.erb</code> partial inside of a <code>form_tag</code> but it breaks some styling (and HTML doesn't really allow that as a standard.)</p>\n\n<p>Any guidance or help would be great! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "is_accepted": false, "score": 0, "last_activity_date": 1548259156, "last_edit_date": 1548259156, "creation_date": 1548258801, "answer_id": 54331022, "question_id": 54330669, "link": "https://stackoverflow.com/questions/54330669/check-if-a-time-range-is-between-another-time-range-and-how-many-hours-ruby-on-r/54331022#54331022", "title": "Check if a time range is between another time range and how many hours Ruby on Rails", "body": "<p>Use ((two- one) / 3600).round</p>\n\n<p>for example</p>\n\n<pre><code>one=Time.now #=&gt;2019-01-23 21:19:19 +0530\ntwo=Time.now + 1*60*60 #=&gt;2019-01-23 22:19:27 +0530\n((two- one) / 3600).round #=&gt;1 \n</code></pre>\n\n<p>difference is 1 hour for two different Time instance.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1548265281, "last_edit_date": 1548265281, "creation_date": 1548261397, "answer_id": 54331793, "question_id": 54330669, "link": "https://stackoverflow.com/questions/54330669/check-if-a-time-range-is-between-another-time-range-and-how-many-hours-ruby-on-r/54331793#54331793", "title": "Check if a time range is between another time range and how many hours Ruby on Rails", "body": "<p>I assume the four arguments of the method below are strings of the form \"HH:MM\" or \"HH:MM:SS\". I have provided a pure-Ruby solution that makes string comparisons only (for example: <code>\"17:26\" &lt; \"18:00\" #=&gt; true</code>). That is, I do not convert the strings to <code>Time</code> objects.</p>\n\n<pre><code>def time_within_ref?(time_start, time_end, ref_start, ref_end)\n  (time_start &gt;= ref_start) &amp;&amp;\n  (adj_hour(time_start, time_end) &lt;= adj_hour(ref_start, ref_end))\nend\n\ndef adj_hour(start_str, end_str)\n  end_str[0,2] = (end_str[0,2].to_i + 24).to_s if end_str &lt; start_str\n  end_str\nend\n</code></pre>\n\n<p>Here are a few examples.</p>\n\n<pre><code>time_within_ref?(\"19:00\", \"02:00\", \"18:00\", \"03:00\")\n  #=&gt; true \ntime_within_ref?(\"19:00\", \"04:00\", \"18:00\", \"03:00\")\n  #=&gt; false\ntime_within_ref?(\"17:00\", \"02:00\", \"18:00\", \"03:00\")\n  #=&gt; false\ntime_within_ref?(\"18:00\", \"02:00\", \"18:00\", \"03:00\")\n  #=&gt; true\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10568444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e10513360e54b074b0092d2bb945506?s=128&d=identicon&r=PG&f=1", "display_name": "Feskars", "link": "https://stackoverflow.com/users/10568444/feskars"}, "edited": false, "score": 0, "creation_date": 1548328456, "post_id": 54332070, "comment_id": 95506129, "body": "So a bit more background: I need to pass in a start_time and end_time for a job shift. Which can be maximum of 24 hours. Then I want to check if those two fall into a predestined timerange of say 20:00 and 01:00.  So if a shift is 12:00-19:00 its false.  And 12:00-21:00 = true  Or 21:00-03:00 = true"}, {"owner": {"reputation": 1, "user_id": 10568444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e10513360e54b074b0092d2bb945506?s=128&d=identicon&r=PG&f=1", "display_name": "Feskars", "link": "https://stackoverflow.com/users/10568444/feskars"}, "edited": false, "score": 0, "creation_date": 1548328801, "post_id": 54332070, "comment_id": 95506325, "body": "So far I have this: But doesn&#180;t seem to work.  <code>start_time.strftime(&quot;%H:%M&quot;) &gt;= &#39;20:00&#39;.to_time &amp;&amp; &#39;01:00&#39;.to_time &lt;= end_time.strftime(&quot;%H:%M&quot;)</code>"}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "reply_to_user": {"reputation": 1, "user_id": 10568444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e10513360e54b074b0092d2bb945506?s=128&d=identicon&r=PG&f=1", "display_name": "Feskars", "link": "https://stackoverflow.com/users/10568444/feskars"}, "edited": false, "score": 0, "creation_date": 1548345979, "post_id": 54332070, "comment_id": 95516975, "body": "strftime turns a Time object into a string. Make sure you&#39;re comparing Time to Time, not Time to String."}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": false, "score": 0, "last_activity_date": 1548262331, "creation_date": 1548262331, "answer_id": 54332070, "question_id": 54330669, "link": "https://stackoverflow.com/questions/54330669/check-if-a-time-range-is-between-another-time-range-and-how-many-hours-ruby-on-r/54332070#54332070", "title": "Check if a time range is between another time range and how many hours Ruby on Rails", "body": "<p>What do you mean by \"within\"? Do you mean that you want to test if there's any overlap between the ranges, or if the first range is fully contained within another?</p>\n\n<p>You can use Time objects in ranges and exploit <code>#cover?</code> to check for overlap</p>\n\n<pre><code>start_time = 5.hours.ago\nend_time = 4.hours.ago\n\ncheck_range_start = (4.5).hours.ago\ncheck_range_end = (3.5).hours.ago\ncheck_range = (check_range_start..check_range_end)\n\ncheck_range.cover?(end_time)   # =&gt; true\ncheck_range.cover?(start_time) # =&gt;false\n</code></pre>\n\n<p>If both ends of the range is covered by your check range, then your range is fully covered. If only one end is covered, then you have overlap. If neither end is covered, then the ranges do not intersect.</p>\n\n<p>Once you know if there's intersection, then you can trivially compute the distance from one end of the time range to one end of your check range; if you want to know how much time between your check range start and your input start time, simply subtract <code>start_time - check_range_start</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10568444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e10513360e54b074b0092d2bb945506?s=128&d=identicon&r=PG&f=1", "display_name": "Feskars", "link": "https://stackoverflow.com/users/10568444/feskars"}, "edited": false, "score": 0, "creation_date": 1548328417, "post_id": 54336000, "comment_id": 95506108, "body": "So a bit more background: I need to pass in a start_time and end_time for a job shift. Which can be maximum of 24 hours. Then I want to check if those two fall into a predestined timerange of say 20:00 and 01:00.  So if a shift is 12:00-19:00 its false.  And 12:00-21:00 = true  Or 21:00-03:00 = true"}, {"owner": {"reputation": 1, "user_id": 10568444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e10513360e54b074b0092d2bb945506?s=128&d=identicon&r=PG&f=1", "display_name": "Feskars", "link": "https://stackoverflow.com/users/10568444/feskars"}, "edited": false, "score": 0, "creation_date": 1548328776, "post_id": 54336000, "comment_id": 95506311, "body": "So far I have this: But doesn&#180;t seem to work.  <code>start_time.strftime(&quot;%H:%M&quot;) &gt;= &#39;20:00&#39;.to_time &amp;&amp; &#39;01:00&#39;.to_time &lt;= end_time.strftime(&quot;%H:%M&quot;)</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 1, "user_id": 10568444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e10513360e54b074b0092d2bb945506?s=128&d=identicon&r=PG&f=1", "display_name": "Feskars", "link": "https://stackoverflow.com/users/10568444/feskars"}, "edited": false, "score": 0, "creation_date": 1548328931, "post_id": 54336000, "comment_id": 95506412, "body": "You can do something like <code>WHERE a BETWEEN start_time AND end_time AND b BETWEEN start_time AND end_time</code>."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 1, "user_id": 10568444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e10513360e54b074b0092d2bb945506?s=128&d=identicon&r=PG&f=1", "display_name": "Feskars", "link": "https://stackoverflow.com/users/10568444/feskars"}, "edited": false, "score": 0, "creation_date": 1548329140, "post_id": 54336000, "comment_id": 95506522, "body": "In ActiveRecord you could write the query as <code>Model.where(&#39;:a BETWEEN start_time AND end_time AND :b BETWEEN start_time AND end_time&#39;, a: predestined_range.start, b: predestined_range.end)</code>"}, {"owner": {"reputation": 1, "user_id": 10568444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e10513360e54b074b0092d2bb945506?s=128&d=identicon&r=PG&f=1", "display_name": "Feskars", "link": "https://stackoverflow.com/users/10568444/feskars"}, "edited": false, "score": 0, "creation_date": 1548334598, "post_id": 54336000, "comment_id": 95509661, "body": "So it is in the model I&#180;m doing this. I&#180;m creating a job Shift where start_time is x and end_time is x.  If this falls within the predestined timerange between 20:00-01:00 I would like to for example add an amount to something. So basically like:  <code>if start_time.strftime(&quot;%H:%M&quot;) &gt;= &#39;20:00&#39;.to_time &amp;&amp; &#39;01:00&#39;.to_time &lt;= end_time.strftime(&quot;%H:%M&quot;)     else     Do something   end</code>"}, {"owner": {"reputation": 1, "user_id": 10568444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e10513360e54b074b0092d2bb945506?s=128&d=identicon&r=PG&f=1", "display_name": "Feskars", "link": "https://stackoverflow.com/users/10568444/feskars"}, "edited": false, "score": 0, "creation_date": 1548335244, "post_id": 54336000, "comment_id": 95510086, "body": "Sorry maybe easier to read:  <code>if Shift.start_time.strftime(&quot;%H:%M&quot;) &gt;= &#39;20:00&#39;.to_time &amp;&amp; &#39;01:00&#39;.to_time &lt;= Shift.end_time.strftime(&quot;%H:%M&quot;)  Do something  else  Do something  end</code>"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1548281867, "last_edit_date": 1548281867, "creation_date": 1548279186, "answer_id": 54336000, "question_id": 54330669, "link": "https://stackoverflow.com/questions/54330669/check-if-a-time-range-is-between-another-time-range-and-how-many-hours-ruby-on-r/54336000#54336000", "title": "Check if a time range is between another time range and how many hours Ruby on Rails", "body": "<p>There are several ways to perform this in the database which are far more performant than loading a bunch of records into Rails.</p>\n\n<p>While \"pure ruby\" solutions are a quick fix they will exhaust the available memory and crash your server given a non-trivial amount of records.</p>\n\n<p>You can use a range together with <code>.where</code> to create a <code>WHERE start_time BETWEEN a AND b</code> clause that ensures that a time is within A and B.</p>\n\n<pre><code>starts_today = Model.where(\n  start_time: Time.current.beginning_of_day..Time.current.end_of_day\n)\n</code></pre>\n\n<p>If you want to ensure that the entire span between <code>start_time</code> and <code>end_time</code> is within a set of bounds you can write you own where clause:</p>\n\n<pre><code>Model.where(\n  \"start_time &gt; :a AND end_time &lt; :b\", \n  a: Time.current.beginning_of_day, \n  b: Time.current.end_of_day\n)\n</code></pre>\n\n<blockquote>\n  <p>I need to know how many of the hours is within the timerange.</p>\n</blockquote>\n\n<p>You can do this with the time/date functions in your database. \nOn postgres for example you can do:</p>\n\n<pre><code>bounds = Time.current.beginning_of_day..Time.current.end_of_day\nModel.select(\n  \"models.*,  (EXTRACT(HOUR FROM end_time - start_time ) - EXTRACT(HOUR FROM end_time - '#{ bounds.end.iso8601 }')) AS number_of_hours\"\n)\n</code></pre>\n\n<p>Again calculating this in the DB is vital if you for example want to use this in a WHERE clause. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10568444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e10513360e54b074b0092d2bb945506?s=128&d=identicon&r=PG&f=1", "display_name": "Feskars", "link": "https://stackoverflow.com/users/10568444/feskars"}, "is_accepted": false, "score": 0, "last_activity_date": 1548337852, "creation_date": 1548337852, "answer_id": 54348203, "question_id": 54330669, "link": "https://stackoverflow.com/questions/54330669/check-if-a-time-range-is-between-another-time-range-and-how-many-hours-ruby-on-r/54348203#54348203", "title": "Check if a time range is between another time range and how many hours Ruby on Rails", "body": "<p>I think I figured it out. \n<code>Shift.start_time.strftime(\"%H:%M\") =&gt; '20:00' &amp;&amp; Shift.end_time.strftime(\"%H:%M\") &lt;= '01:00'</code>\nThe .to_time was messing with me and also the ordering. </p>\n"}], "owner": {"reputation": 1, "user_id": 10568444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e10513360e54b074b0092d2bb945506?s=128&d=identicon&r=PG&f=1", "display_name": "Feskars", "link": "https://stackoverflow.com/users/10568444/feskars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 1, "answer_count": 5, "score": 0, "last_activity_date": 1548337852, "creation_date": 1548257596, "question_id": 54330669, "link": "https://stackoverflow.com/questions/54330669/check-if-a-time-range-is-between-another-time-range-and-how-many-hours-ruby-on-r", "title": "Check if a time range is between another time range and how many hours Ruby on Rails", "body": "<p>So I have a start_time and end_time. Which is maximum 24 hours. \nI guess I firstly need to check if this timerange is within another timerange say 21:00-01:00. If it is I need to know how many of the hours is within the timerange. \nAny ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 865, "user_id": 2034261, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EfGmY.png?s=128&g=1", "display_name": "Bengala", "link": "https://stackoverflow.com/users/2034261/bengala"}, "edited": false, "score": 0, "creation_date": 1548258223, "post_id": 54330615, "comment_id": 95479600, "body": "Your solution did work, but I am waiting for an answer from @mrzasa, maybe he have a point."}, {"owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "reply_to_user": {"reputation": 865, "user_id": 2034261, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EfGmY.png?s=128&g=1", "display_name": "Bengala", "link": "https://stackoverflow.com/users/2034261/bengala"}, "edited": false, "score": 0, "creation_date": 1548258466, "post_id": 54330615, "comment_id": 95479761, "body": "Read the documentation I linked in my answer. It says that &quot;detect and find are two names for the same method.&quot;"}, {"owner": {"reputation": 865, "user_id": 2034261, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EfGmY.png?s=128&g=1", "display_name": "Bengala", "link": "https://stackoverflow.com/users/2034261/bengala"}, "edited": false, "score": 0, "creation_date": 1548260582, "post_id": 54330615, "comment_id": 95481026, "body": "Thanks for your fast response @yoones!"}], "tags": [], "owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "is_accepted": true, "score": 2, "last_activity_date": 1548257437, "creation_date": 1548257437, "answer_id": 54330615, "question_id": 54330564, "link": "https://stackoverflow.com/questions/54330564/getting-a-record-from-a-collection/54330615#54330615", "title": "Getting a record from a collection", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-find\" rel=\"nofollow noreferrer\">#find</a>:</p>\n\n<pre><code>users = User.all\nuser_5 = users.find { |user| user.id == 5 }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 865, "user_id": 2034261, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EfGmY.png?s=128&g=1", "display_name": "Bengala", "link": "https://stackoverflow.com/users/2034261/bengala"}, "edited": false, "score": 0, "creation_date": 1548258175, "post_id": 54330695, "comment_id": 95479576, "body": "What is the difference between find and detect?"}, {"owner": {"reputation": 449, "user_id": 10739704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XmWze.jpg?s=128&g=1", "display_name": "nileshkumar", "link": "https://stackoverflow.com/users/10739704/nileshkumar"}, "reply_to_user": {"reputation": 865, "user_id": 2034261, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EfGmY.png?s=128&g=1", "display_name": "Bengala", "link": "https://stackoverflow.com/users/2034261/bengala"}, "edited": false, "score": 0, "creation_date": 1548258451, "post_id": 54330695, "comment_id": 95479754, "body": "@Bengala:  #find and #detect are aliases of the same underlying method. <code>find</code> an element to use it or <code>detect</code> if an element is present to do something."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 865, "user_id": 2034261, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EfGmY.png?s=128&g=1", "display_name": "Bengala", "link": "https://stackoverflow.com/users/2034261/bengala"}, "edited": false, "score": 0, "creation_date": 1548260396, "post_id": 54330695, "comment_id": 95480905, "body": "@Bengala find is overridden in ActiveRecord, so if you want to be sure you use <code>Enumerable#find</code>, use it&#39;s alias - <code>detect</code> or call <code>#to_a</code> before"}, {"owner": {"reputation": 865, "user_id": 2034261, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EfGmY.png?s=128&g=1", "display_name": "Bengala", "link": "https://stackoverflow.com/users/2034261/bengala"}, "edited": false, "score": 0, "creation_date": 1548260563, "post_id": 54330695, "comment_id": 95481005, "body": "@mrzasa, I selected yoones answer as correct because he posted it first, but your solution works same as hims. One question: In terms of speed, if I have a collection of 500 records, do you recommend to use detect or a normal User.find? Thanks for your help."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 3, "creation_date": 1548260793, "post_id": 54330695, "comment_id": 95481112, "body": "I&#39;d chose <code>User.find</code>"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 1, "last_activity_date": 1548257673, "creation_date": 1548257673, "answer_id": 54330695, "question_id": 54330564, "link": "https://stackoverflow.com/questions/54330564/getting-a-record-from-a-collection/54330695#54330695", "title": "Getting a record from a collection", "body": "<p>Calling</p>\n\n<pre><code>users = User.all\n</code></pre>\n\n<p>does not execute the query. The query is executed when you try to iterate over the collection in <code>find</code> method It may be faster to call</p>\n\n<pre><code>users.find(5)\n</code></pre>\n\n<p>than using in memory <code>find</code> because it will fetch all the records from database and iterate over them linerly:</p>\n\n<pre><code>users.find { |user| user.id == 5 }\n</code></pre>\n\n<p>Also <code>users.find</code> may in fact call the AR <code>find</code> not <code>Enumerable#find</code>, so the about example could return nothing, it's safer to use <a href=\"https://ruby-doc.org/core-2.5.0/Enumerable.html#method-i-find\" rel=\"nofollow noreferrer\"><code>#detect</code></a></p>\n"}], "owner": {"reputation": 865, "user_id": 2034261, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EfGmY.png?s=128&g=1", "display_name": "Bengala", "link": "https://stackoverflow.com/users/2034261/bengala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 54330615, "answer_count": 2, "score": 0, "last_activity_date": 1548258976, "creation_date": 1548257270, "last_edit_date": 1548257354, "question_id": 54330564, "link": "https://stackoverflow.com/questions/54330564/getting-a-record-from-a-collection", "title": "Getting a record from a collection", "body": "<p>I want to get the <code>user_5</code> (which is the user with id 5) from the <code>users</code> collection.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>users = User.all\nuser_5 = ???\n</code></pre>\n\n<p>I know I can get it with <code>user = User.find(5)</code> but I don't want to make another query.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "pundit"], "answers": [{"tags": [], "owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "is_accepted": false, "score": 1, "last_activity_date": 1548423062, "last_edit_date": 1548423062, "creation_date": 1548259947, "answer_id": 54331389, "question_id": 54330559, "link": "https://stackoverflow.com/questions/54330559/how-to-test-pundit-scopes-in-rspec/54331389#54331389", "title": "How to test Pundit Scopes in Rspec?", "body": "<p>Replacing </p>\n\n<pre><code>let(:records) { policy_scope(Report) } \n</code></pre>\n\n<p>...with this:</p>\n\n<pre><code>let(:records) { ReportPolicy::Scope.new(user, Report).resolve }\n</code></pre>\n\n<p>...allows specifying the user to the policy. No call to sign_in is required.</p>\n\n<p>Here is the complete solution:</p>\n\n<pre><code>let(:records) { ReportPolicy::Scope.new(user, Report).resolve }\n\ncontext 'admin user' do\n  let(:user) { admin_user }\n  it { expect(reports.to_a).to match_array([account1_report, account2_report]) }\nend\n\ncontext 'client user' do\n  let(:user) { account2_user }\n  it { expect(reports.to_a).to match_array([account2_report]) }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1548290242, "post_id": 54337600, "comment_id": 95492546, "body": "You can use a <a href=\"https://gist.github.com/maxcal/f706fe09459a3d6c3dcca5d33c5850b3\" rel=\"nofollow noreferrer\">shared context</a> to dry policy specs up."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 9, "last_activity_date": 1587047055, "last_edit_date": 1587047055, "creation_date": 1548288863, "answer_id": 54337600, "question_id": 54330559, "link": "https://stackoverflow.com/questions/54330559/how-to-test-pundit-scopes-in-rspec/54337600#54337600", "title": "How to test Pundit Scopes in Rspec?", "body": "<p>You can instantiate a policy scope with:</p>\n\n<pre><code>Pundit.policy_scope!(user, Report)\n</code></pre>\n\n<p>Which is short for:</p>\n\n<pre><code>ReportPolicy::Scope.new(user, Report).resolve\n</code></pre>\n\n<p>Note that you don't need to do any actual steps of signing the user in. <code>user</code> is just an object that your policy scope takes as an initializer argument. Pundit is after all just plain old OOP. </p>\n\n<pre><code>class ApplicationPolicy\n  # ...\n  class Scope\n    attr_reader :user, :scope\n\n    def initialize(user, scope)\n      @user = user\n      @scope = scope\n    end\n\n    def resolve\n      scope.all\n    end\n  end\nend\n</code></pre>\n\n<p>As to the actual spec I would write it as:</p>\n\n<pre><code>require 'rails_helper'\nrequire 'pundit/rspec'\n\nRSpec.describe ReportPolicy, type: :policy do\n  let(:user) { User.new }\n  let(:scope) { Pundit.policy_scope!(user, Report) } \n  # ... setup account1_report etc\n\n  describe \"Scope\" do\n    context 'client user' do\n      it 'allows a limited subset' do\n        expect(scope.to_a).to match_array([account2_report])\n      end \n    end\n    context 'admin user' do\n      let(:user) { User.new(role: 'admin') }\n      it 'allows access to all the reports' do\n        expect(scope.to_a).to match_array([account1_report, account2_report])\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Avoid constructs such as <code>it { expect ... }</code> and use it blocks that describe the actual behaviour that you are testing or you will end up with really cryptic failure messages and tests that are hard to understand. The <a href=\"https://relishapp.com/rspec/rspec-core/docs/subject/one-liner-syntax\" rel=\"nofollow noreferrer\">one-liner syntax</a> <code>it { is_expected.to ... }</code> should only be used to help avoid duplication in situations where the doc string and the matcher used in the example mirror each other exactly.</p>\n"}], "owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2029, "favorite_count": 0, "accepted_answer_id": 54337600, "answer_count": 2, "score": 3, "last_activity_date": 1587047055, "creation_date": 1548257256, "last_edit_date": 1548260000, "question_id": 54330559, "link": "https://stackoverflow.com/questions/54330559/how-to-test-pundit-scopes-in-rspec", "title": "How to test Pundit Scopes in Rspec?", "body": "<p>I've got a pretty simple Pundit policy with a scope for different user roles. I can't figure out how to test it in Rspec. Specifically, I don't know how to tell the scope what user is logged in before accessing the scope.</p>\n\n<p>Here is what I've tried:</p>\n\n<pre><code>let(:records) { policy_scope(Report) } \n\ncontext 'admin user' do\n  before(:each) { sign_in(admin_user) }\n  it { expect(reports.to_a).to match_array([account1_report, account2_report]) }\nend\n\ncontext 'client user' do\n  before(:each) { sign_in(account2_user) }\n  it { expect(reports.to_a).to match_array([account2_report]) }\nend\n</code></pre>\n\n<p>When I run Rspec, I get:  </p>\n\n<pre><code>NoMethodError: undefined method `sign_in' for #&lt;RSpec::ExampleGroups::ReportPolicy::Scope:0x00007f93241c67b8&gt;\n</code></pre>\n\n<p>I use <code>sign_in</code> extensively in controller tests, but I guess that doesn't apply in a Policy test.</p>\n\n<p>The Pundit docs says only:</p>\n\n<blockquote>\n  <p>Pundit does not provide a DSL for testing scopes. Just test it like a regular Ruby class!</p>\n</blockquote>\n\n<p>So...does anyone have an example of testing a Pundit scope for a specific user? How do I tell the scope what current_user is? </p>\n\n<hr>\n\n<p>FWIW, here's the essence of my policy: </p>\n\n<pre><code>class ReportPolicy &lt; ApplicationPolicy\n  def index?\n    true\n  end\n\n  class Scope &lt; Scope\n    def resolve\n      if user.role == 'admin'\n        scope.all\n      else\n        scope.where(account_id: user.account_id)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>In my controller, I call it as follows. I've confirmed that this works correctly in the real world, with admins seeing all reports, and other users only seeing reports for their account:</p>\n\n<pre><code>reports = policy_scope(Report)\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1548255544, "post_id": 54329993, "comment_id": 95478086, "body": "Your regex does not match the <code>@#!*</code> string, see <a href=\"https://rubular.com/r/nqWfd5i6DbCkcj\" rel=\"nofollow noreferrer\">rubular.com/r/nqWfd5i6DbCkcj</a> Also, you need to escape <code>&#47;</code> that is part of the regex literal. And you must escape square  brackets inside the character class."}, {"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1548255798, "post_id": 54329993, "comment_id": 95478224, "body": "I basically just want to replace invalid url characters. I found that regex on another post. Not sure if it&#39;s fitting to my situation."}], "answers": [{"comments": [{"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "edited": false, "score": 0, "creation_date": 1548334588, "post_id": 54335508, "comment_id": 95509652, "body": "My intention is to to take out anything illegal for a url. Looking back at this letters and numbers would be too much. I&#39;ll update my post to reflect this."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1548277539, "last_edit_date": 1548277539, "creation_date": 1548277013, "answer_id": 54335508, "question_id": 54329993, "link": "https://stackoverflow.com/questions/54329993/removing-replacing-reserved-or-invalid-url-characters-in-a-string/54335508#54335508", "title": "Removing/Replacing reserved or invalid url characters in a string", "body": "<pre><code>'&lt;@#_!*&gt;'.gsub(/[\\[\\]^A-Za-z0-9.~!*''();:@&amp;=+$,\\/?#%+-]/, '_')\n  #=&gt; \"&lt;_____&gt;\" \n</code></pre>\n\n<p>'[', ']' and '/' must be escaped, '-' must be at the beginning or end of the character class and '^' cannot be at the beginning of the character class (the character class being denoted by the outer '[' and ']' characters). There's no point in replacing '<em>' with '</em>' so I've not included that character in the character class.</p>\n\n<p>Do you wish to also replace '&lt;' and '>'? Are you sure letters and digits \"reserved characters\"?</p>\n"}], "owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1548334599, "creation_date": 1548255381, "last_edit_date": 1548334599, "question_id": 54329993, "link": "https://stackoverflow.com/questions/54329993/removing-replacing-reserved-or-invalid-url-characters-in-a-string", "title": "Removing/Replacing reserved or invalid url characters in a string", "body": "<p>I'm in the process of creating sef urls for my app. I just encountered an error where one of my objects contains the following characters:</p>\n\n<pre><code>@#!*\n</code></pre>\n\n<p>My desired output is the following where anything illegal outside of reserved/unreserved will get replaced by an underscore:</p>\n\n<pre><code>@_!*\n</code></pre>\n\n<p>I planned on using this regular expression to filter the bad characters: </p>\n\n<pre><code>[^]A-Za-z0-9_.~!*''();:@&amp;=+$,/?#[%-]+\n</code></pre>\n\n<p>And do the replacement via <code>gsub</code></p>\n\n<pre><code>'@#!*'.gsub!(/[^]_.~!*''();:@&amp;=+$,/?#[%-]+/, '_')\n</code></pre>\n\n<p>But not getting anything returned at all. What's going on here?</p>\n"}, {"tags": ["ruby", "selenium", "azure-devops", "azure-pipelines"], "comments": [{"owner": {"reputation": 2674, "user_id": 10761889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c477edb69a0b8164a00db3d40bc17a?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/10761889/matt"}, "edited": false, "score": 0, "creation_date": 1548274557, "post_id": 54329701, "comment_id": 95487379, "body": "Not sure if this would help, but have you looked at <a href=\"https://docs.microsoft.com/en-us/azure/devops/pipelines/languages/ruby?view=vsts\" rel=\"nofollow noreferrer\">this</a> link already?"}, {"owner": {"reputation": 145, "user_id": 3531858, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1364070204/picture?type=large", "display_name": "user3531858", "link": "https://stackoverflow.com/users/3531858/user3531858"}, "reply_to_user": {"reputation": 2674, "user_id": 10761889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c477edb69a0b8164a00db3d40bc17a?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/10761889/matt"}, "edited": false, "score": 0, "creation_date": 1548335567, "post_id": 54329701, "comment_id": 95510295, "body": "No I didn&#39;t see that link.  I was reviewing the Ui testing documentation and didn&#39;t even think about looking at the languages section.  I&#39;ll read through the documentation and let everyone know how it goes.  Thanks"}, {"owner": {"reputation": 145, "user_id": 3531858, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1364070204/picture?type=large", "display_name": "user3531858", "link": "https://stackoverflow.com/users/3531858/user3531858"}, "reply_to_user": {"reputation": 2674, "user_id": 10761889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c477edb69a0b8164a00db3d40bc17a?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/10761889/matt"}, "edited": false, "score": 0, "creation_date": 1548680702, "post_id": 54329701, "comment_id": 95615656, "body": "I&#39;m on hold for a few days.  I have to modify a few of my scripts prior to spending time on learning my initial question.  I&#39;ll get back to this post as soon as I finish my other tasks."}, {"owner": {"reputation": 145, "user_id": 3531858, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1364070204/picture?type=large", "display_name": "user3531858", "link": "https://stackoverflow.com/users/3531858/user3531858"}, "reply_to_user": {"reputation": 2674, "user_id": 10761889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c477edb69a0b8164a00db3d40bc17a?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/10761889/matt"}, "edited": false, "score": 0, "creation_date": 1549387605, "post_id": 54329701, "comment_id": 95881080, "body": "An update:  As of this morning I am executing several bat files (hopefully soon to be powershells) that execute the installation of a gem I need in my script, and one that initiates the IEDriverServer.exe.  However my script fails because it is unable to find the standalone server.  So I need to understand how to initiate the selenium standalone server in a devops agent."}, {"owner": {"reputation": 145, "user_id": 3531858, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1364070204/picture?type=large", "display_name": "user3531858", "link": "https://stackoverflow.com/users/3531858/user3531858"}, "reply_to_user": {"reputation": 2674, "user_id": 10761889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c477edb69a0b8164a00db3d40bc17a?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/10761889/matt"}, "edited": false, "score": 0, "creation_date": 1549548081, "post_id": 54329701, "comment_id": 95947721, "body": "I made more progress but I experienced other problems so I decided to step back from trying to get my automation scripts entered into the pipeline and tried to get the simple &quot;Enter text into google search box&quot; test.  I figured the code for this is simple and I&#39;ll hard code all the objects instead of calling object libraries.  In this scenario I&#39;m able to get as far as I did with my other script last night.  And that is the code seems to work until it tried to send_text and then I receive an error.  So now I need to resolve the simple fact that I cannot enter text into the field."}, {"owner": {"reputation": 145, "user_id": 3531858, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1364070204/picture?type=large", "display_name": "user3531858", "link": "https://stackoverflow.com/users/3531858/user3531858"}, "reply_to_user": {"reputation": 2674, "user_id": 10761889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c477edb69a0b8164a00db3d40bc17a?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/10761889/matt"}, "edited": false, "score": 0, "creation_date": 1550608896, "post_id": 54329701, "comment_id": 96329230, "body": "Update:  I&#39;ve been pushed away from trying to implement the Selenium Ruby scripts and begin using c#.  So I&#39;ve been writing (to the best of my abilities) scripts in Visual Studio using C# and then adding the Solution I created to the Pipeline. The simple scripts work successfully, however my more complex scripts fail and that can be due to skill level in C#. I&#39;m trying to copy a folder I have in my solution and then zip it up.  That zip file is then uploaded into the system via website.  I do not believe the zip file is being created when I execute the test on the Virtual Server in thePipeline"}], "owner": {"reputation": 145, "user_id": 3531858, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1364070204/picture?type=large", "display_name": "user3531858", "link": "https://stackoverflow.com/users/3531858/user3531858"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548254438, "creation_date": 1548254438, "question_id": 54329701, "link": "https://stackoverflow.com/questions/54329701/adding-a-selenium-rubygems-test-to-azure-dev-ops-pipeline", "title": "Adding a selenium - rubygems test to azure dev-ops pipeline", "body": "<p>Our team has implemented Azure dev-ops and they asked me to add our selenium automation to the pipe-line.  I have found some guides for adding scripts written in .Net to the pipeline but nothing in regards to our scripts written in Ruby.  Is it even possible to add Selenium scripts to the pipeline or must I start writing in .Net?</p>\n\n<p>Since dev-ops is new to me and the team I'm only in the research phase of this process.  I have not found a clear answer to my problem so I want to see if anyone has ever added selenium with ruby to the pipeline.  My goal is to have the scripts automatically execute once code is pushed to the test environment.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 1, "creation_date": 1548253736, "post_id": 54329404, "comment_id": 95476824, "body": "what error did you get"}, {"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1548254029, "post_id": 54329404, "comment_id": 95477054, "body": "I think you need to define div outside of the each loop"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548332374, "post_id": 54329404, "comment_id": 95508336, "body": "What is <code>render</code>?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548401458, "post_id": 54329404, "comment_id": 95535751, "body": "Try <code>1000.times.inject(0) { |m,a| m += a if (a%3 == 0 || a%5 == 0); m }</code>"}, {"owner": {"reputation": 20747, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1549446930, "post_id": 54329404, "comment_id": 95901515, "body": "If you solved the problem in the question, please turn that into a self-answer using the form below."}], "answers": [{"tags": [], "owner": {"reputation": 1109, "user_id": 2713776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3xhhf.png?s=128&g=1", "display_name": "cherrysoft", "link": "https://stackoverflow.com/users/2713776/cherrysoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1548254467, "creation_date": 1548254467, "answer_id": 54329712, "question_id": 54329404, "link": "https://stackoverflow.com/questions/54329404/how-to-find-multiples-of-3-and-5-push-to-an-array-and-then-sum-the-array/54329712#54329712", "title": "How to find multiples of 3 and 5, push to an array, and then sum the array", "body": "<p>An easier way to do it would be as follows...</p>\n\n<pre><code>multiples.push(div) if num % 3 == 0 or num % 5 == 0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1548258922, "post_id": 54329724, "comment_id": 95480015, "body": "As mentioned in another answer you don&#39;t need to convert the range to an array, but it does not break your program,  and yes,  you can simplify things farther, for example removing the div variable and having it all on one line, but if you like having the div line for readability there is nothing wrong with that either."}], "tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": false, "score": 0, "last_activity_date": 1548255459, "last_edit_date": 1548255459, "creation_date": 1548254501, "answer_id": 54329724, "question_id": 54329404, "link": "https://stackoverflow.com/questions/54329404/how-to-find-multiples-of-3-and-5-push-to-an-array-and-then-sum-the-array/54329724#54329724", "title": "How to find multiples of 3 and 5, push to an array, and then sum the array", "body": "<p>You have a couple of problems.\nFirst you are trying to access <code>div</code> outside the <code>each</code> block.\nIf you really wanted to do that,  which you don't because you should be calling <code>sum</code> on <code>multiples</code>, not <code>div</code>, you would need to define it at the method scope level and then allow the <code>each</code> block to modify it.</p>\n\n<p>Second you should be pushing <code>num</code> not <code>div</code> to <code>multiples</code>.</p>\n\n<p>Thirdly you need to check if <code>div</code> is true before you push to the array.</p>\n\n<p>I have not checked the rest of your logic,  so there might be other bugs as well.  </p>\n\n<pre><code>   def third_program\n        numbers = (1..999).to_a\n\n        # Your code goes below.\n        multiples = []\n        numbers.each do |num|\n          div = num % 3 == 0 || num % 5 == 0\n            multiples.push(num) if div \n        end\n        @your_output = multiples.sum\n\n        puts @your_output\n    end\n    third_program\n    # =&gt; 233168\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1548316226, "post_id": 54330514, "comment_id": 95499253, "body": "I improved the explanation"}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1548316033, "last_edit_date": 1548316033, "creation_date": 1548257091, "answer_id": 54330514, "question_id": 54329404, "link": "https://stackoverflow.com/questions/54329404/how-to-find-multiples-of-3-and-5-push-to-an-array-and-then-sum-the-array/54330514#54330514", "title": "How to find multiples of 3 and 5, push to an array, and then sum the array", "body": "<p>You need to add <code>num</code> to <code>multiples</code> if <code>num</code> is both divisible by <code>5</code> and <code>3</code>, not <code>div</code>. That's because <code>div = num % 3 == 0 || num % 5 == 0</code> is just <code>true</code> or <code>false</code>, adding div ends up with an array of booleans values (<code>[false, true, true, ...]</code>).</p>\n\n<p><code>@your_output = div.sum</code> is outside the loop and div does not exist there, it's out of the scope.</p>\n\n<p>Even if in scope, you are calling <code>@your_output = true.sum</code> (or <code>false.sum</code>) getting an error anyway: <code>NoMethodError</code>.</p>\n\n<p>The variable <code>div</code> is actually not required, use just its condition. Also it's not necessary to convert the <code>Range</code> into an <code>Array</code>. So, I'd suggest this refactor:</p>\n\n<pre><code>def third_program\n  multiples = []\n  (1..999).each do |num|\n    multiples &lt;&lt; num if num % 3 == 0 || num % 5 == 0\n  end\n  @your_output = multiples.sum\n\n  # render(\"programs_templates/third_program.html.erb\")\nend\n\np third_program #=&gt; 233168\n</code></pre>\n\n<p>This can be further shortened:</p>\n\n<pre><code>@your_output = (1..999).select{ |n| n % 3 == 0 || n % 5 == 0 }.sum #=&gt; 233168\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5091246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1FgZNQ7QZ3w/AAAAAAAAAAI/AAAAAAAAAEY/jQHMNcGGE_A/photo.jpg?sz=128", "display_name": "Andrew Hyman", "link": "https://stackoverflow.com/users/5091246/andrew-hyman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 1, "answer_count": 3, "score": -2, "last_activity_date": 1549446947, "creation_date": 1548253486, "last_edit_date": 1549446947, "question_id": 54329404, "link": "https://stackoverflow.com/questions/54329404/how-to-find-multiples-of-3-and-5-push-to-an-array-and-then-sum-the-array", "title": "How to find multiples of 3 and 5, push to an array, and then sum the array", "body": "<p>I am trying to sum the multiples of 3 and 5 that are less than 1000 using <code>each</code>, and then <code>push</code> to store them all in array <code>multiples</code>. I am trying to learn how to use these commands, and so I don't want to use <code>select</code> and <code>inject</code>.</p>\n\n<p>I have controllers set up to print <code>@your_output</code> on another page, and have done this successfully with simpler problems. I tried to do the conditional and store it in <code>div</code>:</p>\n\n<pre><code>def third_program\n  numbers = (1..999).to_a\n  multiples = []\n  numbers.each do |num|\n    div = num % 3 == 0 || num % 5 == 0\n    multiples.push(div)\n  end\n  @your_output = div.sum\n  render(\"programs_templates/third_program.html.erb\")\nend\n</code></pre>\n\n<p>With this code I get an error.</p>\n\n<p>Here is the solution that worked for me:</p>\n\n<pre><code>def third_program\n    numbers = (1..999).to_a\n\n    # Your code goes below.\n    multiples = []\n\n    numbers.each do |num|\n\n      if num % 3 == 0 || num % 5 == 0\n          multiples.push(num)\n      end\n      end\n    @your_output = multiples.sum\n\n    render(\"programs_templates/third_program.html.erb\")\n  end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1548250574, "post_id": 54328462, "comment_id": 95474946, "body": "Off the top of my head, this looks as concise as it can get. Short of having your method return a proc, I don&#39;t know how you can reduce the invocation of <code>.each</code>"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548251093, "post_id": 54328462, "comment_id": 95475297, "body": "@SergioTulentsev thanks corrected, <code>.each { |x| func(x) }</code> will be same as <code>.each(&amp;method(:func))</code>. Does it make any difference ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548251175, "post_id": 54328462, "comment_id": 95475353, "body": "@ray: any difference between what and what? This time you got it right, these two are more or less identical."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548251350, "post_id": 54328462, "comment_id": 95475461, "body": "@SergioTulentsev As per my knowledge, both works same or are synonym to each other. Still very few go with what OP gave in code."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1548251371, "post_id": 54328462, "comment_id": 95475471, "body": "YMMV, but I find <code>each { |x| func(x) }</code> much easier to understand."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548251561, "post_id": 54328462, "comment_id": 95475566, "body": "@yoones This is concise, still if you want more concise then it will be removing that <code>func</code> &amp; using <code>input.each { |x| puts x }</code> (<i>DRY</i> :P)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1548251792, "post_id": 54328462, "comment_id": 95475678, "body": "Since in Ruby methods aren&#39;t first class citizens, you indeed have to call <code>method</code> in order to get the method as a (passable) object."}], "owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548317981, "creation_date": 1548250304, "question_id": 54328462, "link": "https://stackoverflow.com/questions/54328462/concise-way-of-passing-an-instance-method-to-each", "title": "Concise way of passing an instance method to #each", "body": "<p>I'm looking for a more concise way of passing <code>#func</code> to <code>#each</code>.</p>\n\n<pre><code>class My\n  def hello\n    input = %w[a b c]\n    input.each(&amp;method(:func))\n  end\n\n  private\n\n  def func(i)\n    puts i\n  end\nend\n\nMy.new.hello\n</code></pre>\n\n<p>Is there any?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 820, "user_id": 2640181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7599b700aee8e1a534030709ae43616?s=128&d=identicon&r=PG", "display_name": "barmic", "link": "https://stackoverflow.com/users/2640181/barmic"}, "edited": false, "score": 0, "creation_date": 1548248905, "post_id": 54327712, "comment_id": 95473946, "body": "Could you show log with error?"}, {"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "edited": false, "score": 0, "creation_date": 1548249897, "post_id": 54327712, "comment_id": 95474529, "body": "Could you tell what is the real blocker for you? You can show your logs with error?"}, {"owner": {"reputation": 880, "user_id": 9219650, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b698c5963df9e360b2e72fed0c97da7a?s=128&d=identicon&r=PG&f=1", "display_name": "Prashin Jeevaganth", "link": "https://stackoverflow.com/users/9219650/prashin-jeevaganth"}, "edited": false, "score": 0, "creation_date": 1548250666, "post_id": 54327712, "comment_id": 95475009, "body": "Hi, do both of you mean this?"}], "answers": [{"tags": [], "owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "is_accepted": true, "score": 1, "last_activity_date": 1548251795, "creation_date": 1548251795, "answer_id": 54328909, "question_id": 54327712, "link": "https://stackoverflow.com/questions/54327712/seed-for-sample-accounts/54328909#54328909", "title": "Seed for sample accounts", "body": "<p>This function:</p>\n\n<pre><code>  def tag_list=(names)\n    self.tags = names.split(',').map do |n|\n      Tag.where(name: n.strip).first_or_create!\n    end\n  end\n</code></pre>\n\n<p>expects a string, like \"foo,bar,baz\".</p>\n\n<p>However, this test code:</p>\n\n<pre><code>  tag_list = Faker::Lorem.words(3)\n  user.microposts.create(content: content, tag_list: tag_list)\n</code></pre>\n\n<p>Is passing an array, like [\"foo\", \"bar\", \"baz\"]</p>\n\n<p>You can turn the array into a string using #join, like this:</p>\n\n<pre><code>  tag_list = Faker::Lorem.words(3).join(\",\")\n  user.microposts.create(content: content, tag_list: tag_list)\n</code></pre>\n"}], "owner": {"reputation": 880, "user_id": 9219650, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b698c5963df9e360b2e72fed0c97da7a?s=128&d=identicon&r=PG&f=1", "display_name": "Prashin Jeevaganth", "link": "https://stackoverflow.com/users/9219650/prashin-jeevaganth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 54328909, "answer_count": 1, "score": 1, "last_activity_date": 1548251795, "creation_date": 1548247882, "last_edit_date": 1548250637, "question_id": 54327712, "link": "https://stackoverflow.com/questions/54327712/seed-for-sample-accounts", "title": "Seed for sample accounts", "body": "<p>I have followed Hartl's tutorial to make a ToDoList with a tagging system, also with the help of this <a href=\"https://medium.com/@sherzelsmith/add-a-filtering-multiple-tag-system-with-autocomplete-to-your-rails-model-in-rails-5-1bf88cd53e9\" rel=\"nofollow noreferrer\">word guide</a> and <a href=\"https://www.youtube.com/watch?v=uBa2qs9CFZQ\" rel=\"nofollow noreferrer\">video</a>. However I don't understand what are the actual arguments being used to initialise tags in a <code>User</code> instance. What would be the correct way of creating sample <code>User</code> accounts based on this code that I have made and how would you generally figure out how these methods are actually called? </p>\n\n<p>Here is my code after implementing the things taught in the tutorial, please do inform me if more information is required.</p>\n\n<p>Micropost controller</p>\n\n<pre><code>class MicropostsController &lt; ApplicationController\n  before_action :logged_in_user, only: [:index, :show, :create, :destroy]\n  before_action :correct_user,   only: :destroy\n\n  def index\n    params[:tag] ? @microposts = Micropost.tagged_with(params[:tag]) : @microposts = Micropost.all\n  end\n\n\n  def show\n    @micropost = Micropost.find(params[:id])\n  end\n\n\n  def create\n    @micropost = current_user.microposts.build(micropost_params))\n    if @micropost.save\n      flash[:success] = \"Micropost created!\"\n      redirect_to root_url\n    else\n      @feed_items = []\n      render 'static_pages/home'\n    end\n  end\n\n  def destroy\n    @micropost.destroy\n    flash[:success] = \"You have deleted a task!\"\n    redirect_to request.referrer || root_url\n  end\n\n  private\n\n    def micropost_params\n      params.require(:micropost).permit(:content, :tag_list, :tag, \n        {tag_ids: [] }, :tag_ids)\n    end\n\n    def correct_user\n      @micropost = current_user.microposts.find_by(id: params[:id])\n      redirect_to root_url if @micropost.nil?\n    end\nend\n</code></pre>\n\n<p>Micropost model</p>\n\n<pre><code>class Micropost &lt; ApplicationRecord\n  belongs_to :user\n  has_many :taggings\n  has_many :tags, through: :taggings, :dependent =&gt; :delete_all\n  default_scope -&gt; { order(created_at: :desc) }\n  validates :user_id, presence: true\n  validates :content, presence: true, length: {maximum: 140 }\n  attr_accessor :tag_list\n\n\n\n  def self.tagged_with(name)\n    Tag.find_by!(name: name).microposts\n  end\n\n  def self.tag_counts\n    Tag.select('tags.*, count(taggings.tag_id) as count')\n    .joins(:taggings).group('taggings.tag_id')\n  end\n\n  def tag_list\n    tags.map(&amp;:name).join(', ')\n  end\n\n  def tag_list=(names)\n    self.tags = names.split(',').map do |n|\n      Tag.where(name: n.strip).first_or_create!\n    end\n  end\nend\n</code></pre>\n\n<p>I have personally tried this but my rake got aborted because I don't understand how the code works.</p>\n\n<pre><code>10.times do\n    content = Faker::Lorem.sentence(5)\n    users.each do |user|\n      tag_list = Faker::Lorem.words(3)\n      user.microposts.create(content: content, tag_list: tag_list)\n    end\nend\n</code></pre>\n\n<p>Error message from terminal after <code>rails db:migrate:reset</code> then <code>rails db:seed</code></p>\n\n<pre><code>/usr/local/lib/ruby/gems/2.5.0/gems/bootstrap-4.0.0.alpha6/lib/bootstrap/version.rb:2: warning: already initialized constant Bootstrap::VERSION\n/usr/local/lib/ruby/gems/2.5.0/gems/bootstrap-sass-3.3.7/lib/bootstrap-sass/version.rb:2: warning: previous definition of VERSION was here\n/usr/local/lib/ruby/gems/2.5.0/gems/bootstrap-4.0.0.alpha6/lib/bootstrap/version.rb:3: warning: already initialized constant Bootstrap::BOOTSTRAP_SHA\n/usr/local/lib/ruby/gems/2.5.0/gems/bootstrap-sass-3.3.7/lib/bootstrap-sass/version.rb:3: warning: previous definition of BOOTSTRAP_SHA was here\nrails aborted!\nNoMethodError: undefined method `strip' for [\"aut\", \"rerum\", \"magni\"]:Array\n/Users/isaac/Documents/CVWO/cvwo_assignment/app/models/micropost.rb:27:in `block in tag_list='\n/Users/isaac/Documents/CVWO/cvwo_assignment/app/models/micropost.rb:26:in `map'\n/Users/isaac/Documents/CVWO/cvwo_assignment/app/models/micropost.rb:26:in `tag_list='\n/usr/local/lib/ruby/gems/2.5.0/gems/activemodel-5.1.4/lib/active_model/attribute_assignment.rb:46:in `public_send'\n/usr/local/lib/ruby/gems/2.5.0/gems/activemodel-5.1.4/lib/active_model/attribute_assignment.rb:46:in `_assign_attribute'\n/usr/local/lib/ruby/gems/2.5.0/gems/activemodel-5.1.4/lib/active_model/attribute_assignment.rb:40:in `block in _assign_attributes'\n/usr/local/lib/ruby/gems/2.5.0/gems/activemodel-5.1.4/lib/active_model/attribute_assignment.rb:39:in `each'\n/usr/local/lib/ruby/gems/2.5.0/gems/activemodel-5.1.4/lib/active_model/attribute_assignment.rb:39:in `_assign_attributes'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/attribute_assignment.rb:26:in `_assign_attributes'\n/usr/local/lib/ruby/gems/2.5.0/gems/activemodel-5.1.4/lib/active_model/attribute_assignment.rb:33:in `assign_attributes'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/core.rb:337:in `initialize'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/inheritance.rb:66:in `new'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/inheritance.rb:66:in `new'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/reflection.rb:154:in `build_association'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/associations/association.rb:281:in `build_record'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/associations/collection_association.rb:358:in `block in _create_record'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/associations/collection_association.rb:129:in `block in transaction'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `block in transaction'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/connection_adapters/abstract/transaction.rb:194:in `block in within_new_transaction'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/transactions.rb:210:in `transaction'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/associations/collection_association.rb:128:in `transaction'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/associations/collection_association.rb:357:in `_create_record'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/associations/has_many_association.rb:121:in `_create_record'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/associations/association.rb:196:in `create'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/associations/collection_proxy.rb:347:in `create'\n/Users/isaac/Documents/CVWO/cvwo_assignment/db/seeds.rb:27:in `block (2 levels) in &lt;top (required)&gt;'\n/Users/isaac/Documents/CVWO/cvwo_assignment/db/seeds.rb:25:in `each'\n/Users/isaac/Documents/CVWO/cvwo_assignment/db/seeds.rb:25:in `block in &lt;top (required)&gt;'\n/Users/isaac/Documents/CVWO/cvwo_assignment/db/seeds.rb:23:in `times'\n/Users/isaac/Documents/CVWO/cvwo_assignment/db/seeds.rb:23:in `&lt;top (required)&gt;'\n/usr/local/lib/ruby/gems/2.5.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:286:in `load'\n/usr/local/lib/ruby/gems/2.5.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:286:in `block in load'\n/usr/local/lib/ruby/gems/2.5.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:258:in `load_dependency'\n/usr/local/lib/ruby/gems/2.5.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:286:in `load'\n/usr/local/lib/ruby/gems/2.5.0/gems/railties-5.1.4/lib/rails/engine.rb:549:in `load_seed'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/tasks/database_tasks.rb:270:in `load_seed'\n/usr/local/lib/ruby/gems/2.5.0/gems/activerecord-5.1.4/lib/active_record/railties/databases.rake:184:in `block (2 levels) in &lt;top (required)&gt;'\n/usr/local/lib/ruby/gems/2.5.0/gems/railties-5.1.4/lib/rails/commands/rake/rake_command.rb:21:in `block in perform'\n/usr/local/lib/ruby/gems/2.5.0/gems/railties-5.1.4/lib/rails/commands/rake/rake_command.rb:18:in `perform'\n/usr/local/lib/ruby/gems/2.5.0/gems/railties-5.1.4/lib/rails/command.rb:46:in `invoke'\n/usr/local/lib/ruby/gems/2.5.0/gems/railties-5.1.4/lib/rails/commands.rb:16:in `&lt;top (required)&gt;'\n/Users/isaac/Documents/CVWO/cvwo_assignment/bin/rails:9:in `require'\n/Users/isaac/Documents/CVWO/cvwo_assignment/bin/rails:9:in `&lt;top (required)&gt;'\n/usr/local/lib/ruby/gems/2.5.0/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `load'\n/usr/local/lib/ruby/gems/2.5.0/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `call'\n/usr/local/lib/ruby/gems/2.5.0/gems/spring-2.0.2/lib/spring/client/command.rb:7:in `call'\n/usr/local/lib/ruby/gems/2.5.0/gems/spring-2.0.2/lib/spring/client.rb:30:in `run'\n/usr/local/lib/ruby/gems/2.5.0/gems/spring-2.0.2/bin/spring:49:in `&lt;top (required)&gt;'\n/usr/local/lib/ruby/gems/2.5.0/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `load'\n/usr/local/lib/ruby/gems/2.5.0/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `&lt;top (required)&gt;'\n/Users/isaac/Documents/CVWO/cvwo_assignment/bin/spring:15:in `&lt;top (required)&gt;'\nbin/rails:3:in `load'\nbin/rails:3:in `&lt;main&gt;'\nTasks: TOP =&gt; db:seed\n(See full trace by running task with --trace)\n</code></pre>\n"}, {"tags": ["ruby", "ssh", "telnet", "net-ssh"], "comments": [{"owner": {"reputation": 1109, "user_id": 2713776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3xhhf.png?s=128&g=1", "display_name": "cherrysoft", "link": "https://stackoverflow.com/users/2713776/cherrysoft"}, "edited": false, "score": 0, "creation_date": 1548253619, "post_id": 54327694, "comment_id": 95476743, "body": "What do you need to do in your telnet session?  This might determine the best solution..."}, {"owner": {"reputation": 3, "user_id": 10955667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41658e4349ecd6cfca7a695f2e2caf8b?s=128&d=identicon&r=PG&f=1", "display_name": "CJL", "link": "https://stackoverflow.com/users/10955667/cjl"}, "reply_to_user": {"reputation": 1109, "user_id": 2713776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3xhhf.png?s=128&g=1", "display_name": "cherrysoft", "link": "https://stackoverflow.com/users/2713776/cherrysoft"}, "edited": false, "score": 0, "creation_date": 1548254708, "post_id": 54327694, "comment_id": 95477507, "body": "Needing to run a variety of status checks (cluster stats etc)."}, {"owner": {"reputation": 1109, "user_id": 2713776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3xhhf.png?s=128&g=1", "display_name": "cherrysoft", "link": "https://stackoverflow.com/users/2713776/cherrysoft"}, "edited": false, "score": 0, "creation_date": 1548254972, "post_id": 54327694, "comment_id": 95477697, "body": "Cool, then below should work for you.  You can build up the output (if that works) or you can run multiple execs to different variables and output separately or store somewhere - start small.  What I mean by this is simplest command first, get it working and then build on that."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1548316548, "post_id": 54327694, "comment_id": 95499430, "body": "Could it be that your regexps are not matching the Username prompt? For starters, the <code>&#47;.*?</code> in the beginning does nothing. The <code>&#47;.$&#47;</code> in the end may actually be waiting for &quot;any character + linefeed&quot;. Maybe try with <code>&#47;Username:&#47;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10955667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41658e4349ecd6cfca7a695f2e2caf8b?s=128&d=identicon&r=PG&f=1", "display_name": "CJL", "link": "https://stackoverflow.com/users/10955667/cjl"}, "edited": false, "score": 0, "creation_date": 1548255035, "post_id": 54329592, "comment_id": 95477742, "body": "This would work fine if the credentials were the same for SSH and Telnet but I need to use a different set of credentials for the Telnet connection. The connection just gets closed because the SSH creds are invalid for Telnet."}, {"owner": {"reputation": 1109, "user_id": 2713776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3xhhf.png?s=128&g=1", "display_name": "cherrysoft", "link": "https://stackoverflow.com/users/2713776/cherrysoft"}, "reply_to_user": {"reputation": 3, "user_id": 10955667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41658e4349ecd6cfca7a695f2e2caf8b?s=128&d=identicon&r=PG&f=1", "display_name": "CJL", "link": "https://stackoverflow.com/users/10955667/cjl"}, "edited": false, "score": 0, "creation_date": 1548261035, "post_id": 54329592, "comment_id": 95481254, "body": "Then why don&#39;t you create a Ruby script that performs all of your telnet operations and remotely execute that from the machine via SSH directly as opposed to using SSH in Ruby?  It is not mandatory that you use Ruby for SSH."}], "tags": [], "owner": {"reputation": 1109, "user_id": 2713776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3xhhf.png?s=128&g=1", "display_name": "cherrysoft", "link": "https://stackoverflow.com/users/2713776/cherrysoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1548254092, "creation_date": 1548254092, "answer_id": 54329592, "question_id": 54327694, "link": "https://stackoverflow.com/questions/54327694/create-a-telnet-connection-via-ssh-using-ruby/54329592#54329592", "title": "Create a Telnet connection via SSH using Ruby", "body": "<p>You can execute commands in SSH as follows...</p>\n\n<pre><code>Net::SSH.start('host', 'user', password: \"password\") do |ssh|\n  output = ssh.exec!(\"echo {your command} | telnet {host} {port}\")\n  puts output\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": true, "score": 0, "last_activity_date": 1548316320, "last_edit_date": 1548316320, "creation_date": 1548316020, "answer_id": 54341643, "question_id": 54327694, "link": "https://stackoverflow.com/questions/54327694/create-a-telnet-connection-via-ssh-using-ruby/54341643#54341643", "title": "Create a Telnet connection via SSH using Ruby", "body": "<p>You could try using <code>net-ssh-gateway</code> for tunneling and use the regular <code>net-telnet</code> for telnet (which itself is horribly outdated and <code>net-telnet-ssh</code> is a drop-in replacement of that horribleness):</p>\n\n<pre><code>gateway = Net::SSH::Gateway.new(ssh_host, ssh_user)\nlocal_port = gateway.open(target_host, target_port)\ntelnet = Net::Telnet::new(\"Host\" =&gt; \"localhost\", \"Port\" =&gt; local_port)\ntelnet.login(telnet_user, telnet_password)\ntelnet.cmd(\"ls -al\") { |c| print c }\ntelnet.close\ngateway.shutdown!\n</code></pre>\n\n<p>Quick googling did not bring up any alternative telnet libraries that would look like the ruby of today.</p>\n"}], "owner": {"reputation": 3, "user_id": 10955667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41658e4349ecd6cfca7a695f2e2caf8b?s=128&d=identicon&r=PG&f=1", "display_name": "CJL", "link": "https://stackoverflow.com/users/10955667/cjl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 719, "favorite_count": 0, "accepted_answer_id": 54341643, "answer_count": 2, "score": 0, "last_activity_date": 1548339521, "creation_date": 1548247839, "last_edit_date": 1548339521, "question_id": 54327694, "link": "https://stackoverflow.com/questions/54327694/create-a-telnet-connection-via-ssh-using-ruby", "title": "Create a Telnet connection via SSH using Ruby", "body": "<p>I am having a slight issue. First and foremost, I had never written a single line of Ruby until being given this task so it is somewhat outwith my remit and comfort zone. This may well be a stupid question but I have searched for what feels like an eternity and found nothing.</p>\n\n<p>I have found a wealth of information on how to telnet from my local machine using Net::Telnet and how to create a Telnet session based on the current SSH session using Net::SSH:Telnet but haven't found anything specifically dealing with my issue.</p>\n\n<p>I need to SSH onto a machine using a set of credentials; this is no issue:</p>\n\n<pre><code>objSsh=Net::SSH.start(\"xxx.xxx.xxx.xx\",\n                        \"sshUser\", \n                        :Password=&gt;\"sshPass\")\n</code></pre>\n\n<p>The above works a treat and I can get, for example, the output from ls (I know, the simplest of simpleton tasks).</p>\n\n<p>The issue that I am having is that I need to Telnet from the SSH session using different credentials, so the below does not fit my purpose:</p>\n\n<pre><code>ssh = Net::SSH.start(\"xxx.xxx.xxx.xxx\",\n      :username=&gt;\"sshUser\",\n      :password=&gt;\"sshPass\"\n)\ns = Net::SSH::Telnet.new(\n      \"Dump_log\" =&gt; \"/dev/stdout\",\n      \"Session\" =&gt; ssh\n)\n</code></pre>\n\n<p>That would Telnet using the same credentials and so is not what I require.</p>\n\n<p>But at the same time I cannot use the below because it would just try to Telnet from the executing machine, which is not what is required.</p>\n\n<pre><code>s = Net::SSH::Telnet.new(\n    \"Dump_log\" =&gt; \"/dev/stdout\",\n    \"Host\" =&gt; \"0\",\n    \"Username\" =&gt; \"telnetUser\",\n    \"Password\" =&gt; \"telnetUser\"\n)\n</code></pre>\n\n<p>Basically, I need to SSH to a machine then, using different credentials, Telnet to the localhost using \"telnet 0 xxxxx\" but can't figure out for the life of me how to do it.</p>\n\n<p>I've tried running telnet 0 xxxxx at the ssh prompt but that just hangs, presumably because the username/password prompts are shown.</p>\n\n<p>I am wandering in confused circles, here. Any assistance with regards to a kick in the right direction would be appreciated.</p>\n\n<p>Thanks,</p>\n\n<p>CJL.</p>\n\n<p>Update 1: </p>\n\n<p>Thank you cherrysoft for your rapid and helpful replies. I'll look into whether or not we are able to chuck files onto their servers to trigger via SSH directly. It would make life simpler!</p>\n\n<p>Update 2:</p>\n\n<p>OK, so in desperation I tried something and it got me a step further than I was getting before. The following code connects via SSH, creates a Telnet session based on the SSH, ensures everything is still working by outputting a simple SSH command, tries to kick off a Telnet session....and then fails.</p>\n\n<pre><code>#Create SSH connection.\nobjSsh=Net::SSH.start(\"xxx.xxx.xxx.xxx\",\n                    \"sshPass\", \n                    :password=&gt;\"sshPass\")\n#Crete a Net:SSH:Telnet object based on the SSH connection.\nobjTelnet = Net::SSH::Telnet.new(\"Session\" =&gt; objSsh)\n#Ensure simple SSH commands can still be run by outputting ls results.\np objTelnet.cmd(\"ls\")\n#Try to kick off a telnet session and show what is displayed.\np objTelnet.cmd(\"telnet 0 xxxxx\")\n#Wait for the Username prompt.\nobjTelnet.waitfor(\"Match\" =&gt; /.*?Username:.$/)\n#Enter username.\nobjTelnet.puts(\"telnetUser\")\n#Wait for password prompt.\nobjTelnet.waitfor(\"Match\" =&gt; /.*?Password:.$/)\n#enter password.\nobjTelnet.puts(\"telnetPass\")\n#Try the command.\np objTelnet.cmd(\"cluster stats\")\n</code></pre>\n\n<p>It gets as far as the Telnet connection but the Waitfor calls don't seem to be working. When the below line runs the result in the output is a prompt for Username:</p>\n\n<pre><code>objTelnet.cmd(\"telnet 0 xxxxx\")\n\n\"telnet 0 xxxxx\\nTrying 0.0.0.0...\\r\\nConnected to 0.\\r\\nEscape character is '^]'.\\r\\nUsername: \"\n</code></pre>\n\n<p>I would have expected the Waitfor to match what was shown in the output and for the Username then to be entered. Is this possibly a RegEx issue? I have run it through Rubular and it seems to match but I may be missing something syntax related?</p>\n\n<p>Thanks again for your time.</p>\n\n<p>CJL.</p>\n\n<p><strong>UPDATE 3 AND RESOLUTION:</strong></p>\n\n<p>Thank you Kimmo Lehto. With only minor tweeking that worked perfectly. It was still getting stuck at Telnet loggin but when passing credentials as shown below (as opposed to user/pass) it works a treat!</p>\n\n<pre><code>loginInfo = {\"Name\" =&gt; telnetUser,\n          \"Password\" =&gt; telnetpass,\n          \"LoginPrompt\" =&gt; /Username:/\n         }\nobjGateway = Net::SSH::Gateway.new(hostIp, user, :password =&gt; password)\nobjLocalPort = objGateway.open(\"localhost\", port)\nobjTelnet = Net::Telnet::new(\"Host\" =&gt; \"127.0.0.1\", \"Port\" =&gt; objLocalPort)\nobjTelnet.login(loginInfo) \nobjTelnet.cmd(\"cluster lrm res sum\") { |c| print c}\nobjTelnet.close\nobjGateway.shutdown!\n</code></pre>\n\n<p>Thanks again for your time and effort in resolving this issue.</p>\n\n<p>CJL out...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1548247593, "post_id": 54327577, "comment_id": 95473222, "body": "Have you checked Pundit or Cancancan gems?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548247722, "post_id": 54327577, "comment_id": 95473287, "body": "First you have to create rails application, SO do not provide which tutorial sites or books will help you."}, {"owner": {"reputation": 91, "user_id": 10020934, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZjMU2UsB0aE/AAAAAAAAAAI/AAAAAAAAA9w/5-GDvq1_ecQ/photo.jpg?sz=128", "display_name": "paul blackmore", "link": "https://stackoverflow.com/users/10020934/paul-blackmore"}, "edited": false, "score": 0, "creation_date": 1548247750, "post_id": 54327577, "comment_id": 95473304, "body": "I have used Cancancan before but I&#39;m a little confused as to the logic behind what I need to do."}, {"owner": {"reputation": 91, "user_id": 10020934, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZjMU2UsB0aE/AAAAAAAAAAI/AAAAAAAAA9w/5-GDvq1_ecQ/photo.jpg?sz=128", "display_name": "paul blackmore", "link": "https://stackoverflow.com/users/10020934/paul-blackmore"}, "edited": false, "score": 0, "creation_date": 1548247844, "post_id": 54327577, "comment_id": 95473350, "body": "Thanks Ray. Yes I have my rails app setup, I  just need to tackle the company login and restricting views for each company"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 10020934, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZjMU2UsB0aE/AAAAAAAAAAI/AAAAAAAAA9w/5-GDvq1_ecQ/photo.jpg?sz=128", "display_name": "paul blackmore", "link": "https://stackoverflow.com/users/10020934/paul-blackmore"}, "edited": false, "score": 0, "creation_date": 1548259344, "post_id": 54328527, "comment_id": 95480271, "body": "Thanks for getting back to me. When I set up the company model do I need to include a reference to other tables in the db?"}, {"owner": {"reputation": 91, "user_id": 10020934, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZjMU2UsB0aE/AAAAAAAAAAI/AAAAAAAAA9w/5-GDvq1_ecQ/photo.jpg?sz=128", "display_name": "paul blackmore", "link": "https://stackoverflow.com/users/10020934/paul-blackmore"}, "edited": false, "score": 0, "creation_date": 1548259416, "post_id": 54328527, "comment_id": 95480316, "body": "It feels like there should be a reference in the table to products or users"}, {"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "reply_to_user": {"reputation": 91, "user_id": 10020934, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZjMU2UsB0aE/AAAAAAAAAAI/AAAAAAAAA9w/5-GDvq1_ecQ/photo.jpg?sz=128", "display_name": "paul blackmore", "link": "https://stackoverflow.com/users/10020934/paul-blackmore"}, "edited": false, "score": 0, "creation_date": 1548260804, "post_id": 54328527, "comment_id": 95481119, "body": "you have to have references in <code>products</code> &amp; <code>users</code> tables to <code>company</code> aka foreign_key <code>company_id</code>. And that&#39;s it"}, {"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "reply_to_user": {"reputation": 91, "user_id": 10020934, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZjMU2UsB0aE/AAAAAAAAAAI/AAAAAAAAA9w/5-GDvq1_ecQ/photo.jpg?sz=128", "display_name": "paul blackmore", "link": "https://stackoverflow.com/users/10020934/paul-blackmore"}, "edited": false, "score": 0, "creation_date": 1548260892, "post_id": 54328527, "comment_id": 95481165, "body": "Check how to write migration with foreign_key references, I didn&#39;t include that in my answer as that wasn&#39;t the original question. Whole point of authorization is in <code>authorize_user</code> method."}, {"owner": {"reputation": 91, "user_id": 10020934, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZjMU2UsB0aE/AAAAAAAAAAI/AAAAAAAAA9w/5-GDvq1_ecQ/photo.jpg?sz=128", "display_name": "paul blackmore", "link": "https://stackoverflow.com/users/10020934/paul-blackmore"}, "edited": false, "score": 0, "creation_date": 1548321149, "post_id": 54328527, "comment_id": 95501703, "body": "Thanks a lot for your help on this @zauzaj"}], "tags": [], "owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "is_accepted": true, "score": 0, "last_activity_date": 1548250546, "creation_date": 1548250546, "answer_id": 54328527, "question_id": 54327577, "link": "https://stackoverflow.com/questions/54327577/users-belong-to-organisations-and-only-see-edit-items-added-by-their-company-rub/54328527#54328527", "title": "Users belong to organisations and only see/edit items added by their company Ruby on Rails", "body": "<p>Let's assume you have user model that belongs to some company:</p>\n\n<pre><code>class User &lt; ActiveRecord\n  belongs_to :company\n  ....\nend\n</code></pre>\n\n<p>company model has many users and has many products(items):</p>\n\n<pre><code>class Company &lt; ActiveRecord\n  has_many :users\n  has_many :products\nend\n</code></pre>\n\n<p>product model that belongs to company:</p>\n\n<pre><code>class Product &lt; ActiveRecord\n  belongs_to :company\n  ....\nend\n</code></pre>\n\n<p>In your case, what you're trying to achieve is that user can see/edit only products from his company. Using before_action in your controller you can define what user can/cannot do. Here is the basic example:</p>\n\n<pre><code>class ProductsController &lt; ApplicationController\n  before_action :authorize_user, only: [:show, :edit]\n\n  def show  \n  end\n\n  def edit \n  end\n\n  private\n  def authorize_user\n   raise \"Not Authorized\" unless current_user.company_id == @product.company_id\n  end\nend\n\n</code></pre>\n\n<p>This way you will raise an error whenever user try to access the product that doesn't belongs to his company.</p>\n\n<p>Ofcourse, this is just basic example, you should take a look on Pundit gem which is very powerful, but you should get the point with this :)</p>\n\n<p>Let me know if I missed something.</p>\n\n<p>Cheers</p>\n"}], "owner": {"reputation": 91, "user_id": 10020934, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZjMU2UsB0aE/AAAAAAAAAAI/AAAAAAAAA9w/5-GDvq1_ecQ/photo.jpg?sz=128", "display_name": "paul blackmore", "link": "https://stackoverflow.com/users/10020934/paul-blackmore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 54328527, "answer_count": 1, "score": 0, "last_activity_date": 1548250546, "creation_date": 1548247462, "question_id": 54327577, "link": "https://stackoverflow.com/questions/54327577/users-belong-to-organisations-and-only-see-edit-items-added-by-their-company-rub", "title": "Users belong to organisations and only see/edit items added by their company Ruby on Rails", "body": "<p>Trying to figure out the best way of organising users into organisations so that the members of each organisation only see items added by themselves and other people from their organisation. All users need to use a shared login.</p>\n\n<p>I have some previous experience with Devise so would like to use it if possible. </p>\n\n<p>What is the best way of tackling this issue?</p>\n\n<p>Any links to tutorials explaining this would be great.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1548248056, "post_id": 54326819, "comment_id": 95473479, "body": "From reading comments you want output in an array or hash ?"}, {"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "reply_to_user": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1548248350, "post_id": 54326819, "comment_id": 95473641, "body": "@ts I want output in array"}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1548248473, "post_id": 54326819, "comment_id": 95473707, "body": "Can you please format your array as <code>423 &quot;jobname&quot;</code> is weird array it can be <code>[&#39;423 jobname&#39;,  424 jobname]</code>"}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1548248816, "post_id": 54326819, "comment_id": 95473899, "body": "If your output array is like <code>[&#39;423 jobname&#39;, &#39;424 jobname&#39;]</code> check my updated answer hope it helps"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1548257543, "post_id": 54326819, "comment_id": 95479220, "body": "What is the actual input here? Is this data that you are fetching from a database query?"}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 5348901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l0uim.jpg?s=128&g=1", "display_name": "Milind Patel", "link": "https://stackoverflow.com/users/5348901/milind-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1548245404, "last_edit_date": 1548245404, "creation_date": 1548245103, "answer_id": 54326886, "question_id": 54326819, "link": "https://stackoverflow.com/questions/54326819/how-to-check-value-null-in-ruby-on-rails-3/54326886#54326886", "title": "How to check value null in ruby on rails 3?", "body": "<p>You can use <code>present?</code> or <code>blank?</code> in condition. Your code should be</p>\n\n<pre><code>if j.name.present? #condition \n   @jobs[j.id] = j.name\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1112, "user_id": 2072436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b249cbaef1c8317b21b19cea6fcf30?s=128&d=identicon&r=PG", "display_name": "Umar Khan", "link": "https://stackoverflow.com/users/2072436/umar-khan"}, "is_accepted": false, "score": 1, "last_activity_date": 1548245437, "last_edit_date": 1548245437, "creation_date": 1548245272, "answer_id": 54326946, "question_id": 54326819, "link": "https://stackoverflow.com/questions/54326819/how-to-check-value-null-in-ruby-on-rails-3/54326946#54326946", "title": "How to check value null in ruby on rails 3?", "body": "<p>it's <code>nil</code> in Ruby, not <code>null</code>\nYou can check if an object is <code>nil</code> by calling <code>present?</code> or <code>blank?</code>.</p>\n\n<pre><code>j.name.present?\n</code></pre>\n\n<p>this will return <code>false</code> if the name is an empty string or <code>nil</code> .</p>\n\n<p>or you can use</p>\n\n<pre><code>j.name.blank?\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1548246347, "post_id": 54326966, "comment_id": 95472530, "body": "I have try all conditions but still same issue array start from 0 index."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1548246427, "post_id": 54326966, "comment_id": 95472579, "body": "I&#39;m not sure if I understand that problem with 0 index, could you tell more about it?"}, {"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1548246531, "post_id": 54326966, "comment_id": 95472639, "body": "I have j.id which is start from 423 so i want array create from 423 index not from 0 index."}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1548247395, "post_id": 54326966, "comment_id": 95473101, "body": "What is your output now with answers you have tried ?"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 2, "last_activity_date": 1548245481, "last_edit_date": 1548245481, "creation_date": 1548245368, "answer_id": 54326966, "question_id": 54326819, "link": "https://stackoverflow.com/questions/54326819/how-to-check-value-null-in-ruby-on-rails-3/54326966#54326966", "title": "How to check value null in ruby on rails 3?", "body": "<p><code>nil</code> value is interpreted as false in conditions, so you can write:</p>\n\n<pre><code>@jobs = []\ndemo.demojobs.each do | j |\n    if j.name \n        @jobs[j.id] = j.name\n    end\nend \n</code></pre>\n\n<p>or in a more concise manner:</p>\n\n<pre><code>@jobs = []\ndemo.demojobs.each do | j |         \n  @jobs[j.id] = j.name if j.name\nend \n</code></pre>\n\n<p>You can also use <a href=\"https://ruby-doc.org/core-2.2.0/NilClass.html#method-i-nil-3F\" rel=\"nofollow noreferrer\"><code>#nil?</code></a> method if you want to check explicitly:</p>\n\n<pre><code>@jobs = []\ndemo.demojobs.each do | j |\n    if !j.nil? \n        @jobs[j.id] = j.name\n    end\nend \n</code></pre>\n\n<p>There is a nice blogpost explaining various options: <a href=\"https://blog.arkency.com/2017/07/nil-empty-blank-ruby-rails-difference/\" rel=\"nofollow noreferrer\">https://blog.arkency.com/2017/07/nil-empty-blank-ruby-rails-difference/</a></p>\n"}, {"comments": [{"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1548249304, "post_id": 54327000, "comment_id": 95474159, "body": "423, 424 are index of array not a value with jobname i need output like 423: jobname."}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "reply_to_user": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1548249419, "post_id": 54327000, "comment_id": 95474243, "body": "array index can not be start from 423 if you want like this you can use hash instead of array <code>@jobs = {423: &#39;jobname&#39;, 424: &#39;jobname&#39;}</code> like this"}], "tags": [], "owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1548249651, "last_edit_date": 1548249651, "creation_date": 1548245513, "answer_id": 54327000, "question_id": 54326819, "link": "https://stackoverflow.com/questions/54326819/how-to-check-value-null-in-ruby-on-rails-3/54327000#54327000", "title": "How to check value null in ruby on rails 3?", "body": "<blockquote>\n  <p>how to set condition to check the null value of j.name?</p>\n</blockquote>\n\n<p>There are many ways to check for null/<code>nil</code> or an empty string in ruby </p>\n\n<ol>\n<li><p><a href=\"https://apidock.com/rails/Object/present%3F\" rel=\"nofollow noreferrer\">present?</a>  This will return true or false </p>\n\n<pre><code>j.name.present?\n</code></pre></li>\n<li><p><a href=\"https://apidock.com/rails/Object/blank%3F\" rel=\"nofollow noreferrer\">blank?</a>  This is opposite of <code>present?</code></p>\n\n<pre><code>j.name.blank?\n</code></pre></li>\n<li><p><code>j.name == nil</code></p></li>\n<li><p><code>empty?</code> can be used on strings, arrays and hashes.</p></li>\n</ol>\n\n<p><strong>Edit:</strong></p>\n\n<pre><code>@jobs = {}\n#in your loop\n@jobs[j.id] = j.name if j.name #you can use any condition here to check nil\n</code></pre>\n"}], "owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1548249651, "creation_date": 1548244900, "last_edit_date": 1548249392, "question_id": 54326819, "link": "https://stackoverflow.com/questions/54326819/how-to-check-value-null-in-ruby-on-rails-3", "title": "How to check value null in ruby on rails 3?", "body": "<p>I have create new array jobs and <code>j.id</code> is start from 423 and loop creates array index from 0 to total job ids with null value from 0 to 422 id. So my question is how to set condition to check the null value of j.name? </p>\n\n<pre><code>@jobs = []\ndemo.demojobs.each do | j |\n    if j.name != null #condition \n        @jobs[j.id] = j.name\n    end\nend \n</code></pre>\n\n<p>I am working on rails version 3.2.11</p>\n\n<p>Output: </p>\n\n<pre><code>pipe\n0: null\n1: null\n.\n.\n.\n.\n423:    \"jobname\"\n424:    \"jobname\"\n425:    \"jobname\"\n426:    \"jobname\"\n427:    \"jobname\"\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "database", "mariadb"], "comments": [{"owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 1, "creation_date": 1548565173, "post_id": 54326370, "comment_id": 95582994, "body": "Suggest moving to InnoDB (for other reasons)."}, {"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "reply_to_user": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1548688798, "post_id": 54326370, "comment_id": 95620560, "body": "@RickJames yes, I have done."}], "answers": [{"tags": [], "owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "is_accepted": false, "score": 0, "last_activity_date": 1548336295, "last_edit_date": 1548336295, "creation_date": 1548246005, "answer_id": 54327136, "question_id": 54326370, "link": "https://stackoverflow.com/questions/54326370/rails-manage-the-versioning-of-table-in-mariadb-10-3/54327136#54327136", "title": "Rails manage the Versioning of table in mariadb 10.3", "body": "<p>I found the answer by myself :</p>\n\n<p><strong>Excluding Columns From Versioning</strong></p>\n\n<p>all others columns except <code>writing_contents</code> can be declared WITHOUT VERSIONING.</p>\n\n<p><strong>CREATE a new table :</strong></p>\n\n<pre><code>Create Table: CREATE TABLE `documents` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `label` varchar(255) DEFAULT NULL WITHOUT SYSTEM VERSIONING,\n  `writing_content` text DEFAULT NULL,\n  `is_locked` tinyint(1) DEFAULT 0 WITHOUT SYSTEM VERSIONING,\n  PRIMARY KEY (`id`)\n) ENGINE=MyISAM AUTO_INCREMENT=697 DEFAULT CHARSET=latin1 WITH SYSTEM VERSIONING\n</code></pre>\n\n<p><strong>Modify a existing table's column :</strong></p>\n\n<pre><code>SET @@system_versioning_alter_history = 1;\nALTER TABLE document MODIFY writing_content  WITH  SYSTEM VERSIONING;\n</code></pre>\n\n<p><a href=\"https://mariadb.com/kb/en/library/system-versioned-tables/#system-variables\" rel=\"nofollow noreferrer\">Know more</a></p>\n"}], "owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548336295, "creation_date": 1548243347, "last_edit_date": 1548245632, "question_id": 54326370, "link": "https://stackoverflow.com/questions/54326370/rails-manage-the-versioning-of-table-in-mariadb-10-3", "title": "Rails manage the Versioning of table in mariadb 10.3", "body": "<p>After Upgrading from MariaDB 10.2 to MariaDB 10.3, I change table <code>documents</code> with system versioning. </p>\n\n<p><strong>MYSQL console :</strong></p>\n\n<pre><code>&gt; SHOW CREATE TABLE documents \\G\n\n*************************** 1. row ***************************\n       Table: documents\nCreate Table: CREATE TABLE `documents` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `label` varchar(255) DEFAULT NULL,\n  `writing_content` text DEFAULT NULL,\n  `is_locked` tinyint(1) DEFAULT 0,\n  PRIMARY KEY (`id`)\n) ENGINE=MyISAM AUTO_INCREMENT=697 DEFAULT CHARSET=latin1 WITH SYSTEM VERSIONING\n</code></pre>\n\n<p>From now, all updates will be saved in my database.</p>\n\n<p><strong>My issue is :</strong></p>\n\n<p>I don't want mariadb to store all versions for all sql like <code>update document set ...</code> </p>\n\n<p><strong>My objective is :</strong></p>\n\n<p>If the value of column <code>writing_content</code> isn't modified so there isn't new version generate in database.</p>\n\n<p>example in rails app :</p>\n\n<pre><code>Document.find(1).update_attributes({is_locked:true}) #=&gt; don't save with a new version\nDocument.find(1).update_attributes({writing_content:'test test'}) #=&gt; will be saved with a new version\n</code></pre>\n\n<p>How to do this control in my controller ? Thank you for Any suggestions.</p>\n\n<p>Env:\nRuby 2.4.1\nRails 5.1.6</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1548243740, "post_id": 54326141, "comment_id": 95471176, "body": "Is it throwing an error or is it not called?"}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1548244307, "post_id": 54326141, "comment_id": 95471453, "body": "I have updated the question @iGian"}], "answers": [{"tags": [], "owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "is_accepted": true, "score": 1, "last_activity_date": 1548251068, "creation_date": 1548251068, "answer_id": 54328705, "question_id": 54326141, "link": "https://stackoverflow.com/questions/54326141/updating-the-database-after-create-action-doesnt-work/54328705#54328705", "title": "updating the database after create action doesn&#39;t work", "body": "<p>in your <code>if</code> statement you should call <code>set_bonus</code> method on appropriate object.</p>\n\n<pre><code>    attribution = Attribution.create!({\n      event: Attribution::SIGN_UP,\n      attribution_channel: attribution_channel,\n      associated: associated_member_record,\n      extra: origin\n    })\n    attribution.set_bonus(member_id, cookie) if attribution.persisted?\n</code></pre>\n\n<p>Just be careful as <code>.create!</code> will raise an error in case there is something wrong, so maybe would be better to use</p>\n\n<pre><code>  attribution = Attribution.new(.....)\n  if attribution.save\n    attribution.set_bonus(.....)\n  else\n    Rails.logger.info  attribution.errors\n  end\n</code></pre>\n\n<p>I hope this would help.</p>\n\n<p>Cheers</p>\n"}], "owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 54328705, "answer_count": 1, "score": 0, "last_activity_date": 1548251068, "creation_date": 1548242639, "last_edit_date": 1548245665, "question_id": 54326141, "link": "https://stackoverflow.com/questions/54326141/updating-the-database-after-create-action-doesnt-work", "title": "updating the database after create action doesn&#39;t work", "body": "<p><code>set_bonus(member_id, cookie)</code> method does not work. I'm trying to update the same model that that the <code>self.set_signup_attribution(member_id, cookie, origin)</code> returns. </p>\n\n<p>The <code>new_has_value</code> variable returns <code>{\"currency\"=&gt;\"usd\", \"type\"=&gt;\"flat\", \"amount\"=&gt;1000}</code></p>\n\n<p><strong>Model.rb</strong></p>\n\n<pre><code># THIS METHOD WORKS\ndef self.set_signup_attribution(member_id, cookie, origin)\n  return unless cookie.present?\n  tracking_code = cookie\n  attribution_channel = AttributionChannel.find_by tracking_code: tracking_code\n  associated_member_record = Member.find member_id\n  if attribution_channel.present?\n    Attribution.create!({\n      event: Attribution::SIGN_UP,\n      attribution_channel: attribution_channel,\n      associated: associated_member_record,\n      extra: origin\n    })\n    set_bonus(member_id, cookie)\n  else\n    Rails.logger.info \"Unknown Attribution Channel for tracking code: '#{ tracking_code }'\"\n  end\nend\n\n\n# THIS METHOD DOES NOT WORK. UPDATES THE DATABASE.\ndef self.set_bonus(member_id, cookie)\n  epoch = Member.find_by(id: member_id).attribution_epoch\n  attribution_code = AttributionChannel.find_by(tracking_code: cookie)\n  duration_value = attribution_code.attribution_duration.downcase.split(' ')\n  duration = duration_value.first.to_i.send(duration_value.last)\n  return if cookie.present? &amp;&amp; epoch.present?\n  current_time = Time.now\n  if attribution_code.bonus_config.present?\n    if (current_time - epoch).to_i &lt; duration\n      hash_value = attribution_code.bonus_config\n      new_hash_value = hash_value.assoc(\"sign_up\")[1]\n      value = Attribution.where(attribution_channel_id: attribution_code)\n      if new_hash_value[\"type\"] == \"flat\"\n        value.update_all(\n          bonus_amount: new_hash_value[\"amount\"],\n          bonus_currency: new_hash_value[\"currency\"]\n        )\n      elsif new_hash_value[\"type\"] == \"percentage\"\n        value.update_all(\n          bonus_amount: new_hash_value[\"amount\"],\n          bonus_currency: new_hash_value[\"currency\"]\n        )\n      else\n        {\n          bonus_amount: \"Doesn't exist\",\n          bonus_currency: \"Doesn't exist\"\n        }\n      end\n    else\n      \"Do nothing\"\n    end\n  else\n    \"Do nothing\"\n  end\n  #cookie = nil\n  binding.pry\nend\n</code></pre>\n\n<p><strong>Controller.rb</strong></p>\n\n<pre><code>def index\n  unless session[:just_signed_up]\n    redirect_back_or_settings_page\n  end\n  Attribution.set_signup_attribution(current_user, cookies[:visit_attr], request.referer)\n  Attribution.set_bonus(current_user, cookies[:visit_attr])\n  session[:just_signed_up] = false\n  @email = current_user.email\nend\n</code></pre>\n\n<p>How do I go about this? That is what I have tried and doesn't work. Can I merge <code>set_bonus</code> method to <code>set_signup_attribution</code> method or something?</p>\n\n<p>Any help will be appreciated. </p>\n\n<p><strong>So drilling this further:</strong></p>\n\n<p>I merged <code>set_bonus</code> with <code>set_signup_attribution</code> and the two fields (bonus_amount and bonus_currency) which <code>set_bonus</code> method is supposed to update returns <code>nil</code>:</p>\n\n<pre><code>Attribution.create!(\n  {\n    event: Attribution::SIGN_UP,\n    attribution_channel: attribution_channel,\n    associated: associated_member_record,\n    extra: origin\n  }.merge(self.set_bonus(member_id, cookie).to_h)\n)\n</code></pre>\n\n<p>With this drill after using <code>binding.pry</code> on that <code>set_bonus</code> method, I figured out it worked but it's returning <code>nil</code> and I don't know why. Could it be because <code>member_id</code> is not available in the model or something?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1548242058, "post_id": 54325920, "comment_id": 95470296, "body": "Have you tried something?"}, {"owner": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1548242318, "post_id": 54325920, "comment_id": 95470427, "body": "Yes. I tried it with indexOf methods and joins but this returns me the position inside the array. In fact, that is what indexOf do. I googled list of methods to get the position of the alphabet but could not find any."}, {"owner": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "edited": false, "score": 0, "creation_date": 1548242461, "post_id": 54325920, "comment_id": 95470517, "body": "I have a string"}, {"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 2, "creation_date": 1548242696, "post_id": 54325920, "comment_id": 95470632, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/33747126/find-a-letters-alphabetical-score\">Find a letter&#39;s alphabetical score</a>"}, {"owner": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "reply_to_user": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 0, "creation_date": 1548242986, "post_id": 54325920, "comment_id": 95470781, "body": "@Xero I was looking for an inbuilt method in ruby."}, {"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 0, "creation_date": 1548243150, "post_id": 54325920, "comment_id": 95470872, "body": "@vikas95prasad you can use monkey patching to do this. when you could called it in a inbluid way <a href=\"https://www.justinweiss.com/articles/3-ways-to-monkey-patch-without-making-a-mess/\" rel=\"nofollow noreferrer\">justinweiss.com/articles/&hellip;</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548244364, "post_id": 54325920, "comment_id": 95471489, "body": "@vikas95prasad <i>&quot;I tried it with indexOf&quot;</i> \u2013 that&#39;s not Ruby anymore ;-)"}, {"owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "edited": false, "score": 0, "creation_date": 1548338006, "post_id": 54325920, "comment_id": 95511848, "body": "@vikas95prasad If there were an inbuilt method, it would have been the first answer. So in short, there isn&#39;t one. Ruby does a lot of helpful stuff for you, but this isn&#39;t one of them. Here&#39;s what you CAN do with string in ruby.  <a href=\"https://ruby-doc.org/core-2.2.0/String.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/String.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "is_accepted": false, "score": 3, "last_activity_date": 1548242451, "last_edit_date": 1548242451, "creation_date": 1548242134, "answer_id": 54325993, "question_id": 54325920, "link": "https://stackoverflow.com/questions/54325920/ruby-inbuilt-method-to-get-the-position-of-letter-in-the-alphabet-series/54325993#54325993", "title": "Ruby inbuilt method to get the position of letter in the alphabet series?", "body": "<p>You can do that :</p>\n\n<pre><code>def position(letter)\n  letter.upcase.ord - 'A'.ord + 1\nend\n</code></pre>\n\n<p>And then :</p>\n\n<pre><code>chars = [\"s\", \"t\", \"a\", \"c\", \"k\", \"o\", \"v\", \"e\", \"r\", \"f\", \"l\", \"o\", \"w\"]\nchars.map do |char| position(char) end\n =&gt; [19, 20, 1, 3, 11, 15, 22, 5, 18, 6, 12, 15, 23] \n</code></pre>\n\n<p>See <a href=\"https://apidock.com/rails/String/ord\" rel=\"nofollow noreferrer\">ord</a> method for more information or this <a href=\"https://stackoverflow.com/questions/33747126/find-a-letters-alphabetical-score\">question</a></p>\n"}, {"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548242868, "post_id": 54326082, "comment_id": 95470719, "body": "This is what OP asked (ignoring every edge case)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1548273187, "post_id": 54326082, "comment_id": 95486840, "body": "My first name disagrees with this solution."}, {"owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1548337903, "post_id": 54326082, "comment_id": 95511786, "body": "@J&#246;rgWMittag Granted, it&#39;s a limited solution."}], "tags": [], "owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "is_accepted": false, "score": 5, "last_activity_date": 1548242458, "creation_date": 1548242458, "answer_id": 54326082, "question_id": 54325920, "link": "https://stackoverflow.com/questions/54325920/ruby-inbuilt-method-to-get-the-position-of-letter-in-the-alphabet-series/54326082#54326082", "title": "Ruby inbuilt method to get the position of letter in the alphabet series?", "body": "<p>You can do this. I'd use <code>String#chars</code> which returns the ASCII numbers of each character in the string.</p>\n\n<pre><code>'abcdggg'.bytes\n# =&gt; [97, 98, 99, 100, 103, 103, 103] \n</code></pre>\n\n<p>As you can see, the alphabet is sequential, each letter is one higher than the previous one. You can get it's position in the alphabet by taking 96 from the number.</p>\n\n<p>Note that the upper-case letter is in a different position, but we can fix this using <code>String#downcase</code>.</p>\n\n<p>To get all the alphabetical positions in a string (if it only has letters) we can write this method.</p>\n\n<pre><code>def alphabet_positions(string)\n  string.downcase.bytes.map{|b| b - 96}\nend\n</code></pre>\n\n<p>This will work unexpectedly if any characters aren't letters, tho.</p>\n"}, {"comments": [{"owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "edited": false, "score": 0, "creation_date": 1548243249, "post_id": 54326132, "comment_id": 95470918, "body": "I like that this would handle the edge cases by returning a predictable <code>nil</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1548243818, "post_id": 54326132, "comment_id": 95471213, "body": "Alternatively: <code>indexes = (&#39;a&#39;..&#39;z&#39;).each.with_index(1).to_h</code> and <code>&#39;stackoverflow&#39;.each_char.map(&amp;indexes)</code>"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 4, "last_activity_date": 1548242622, "creation_date": 1548242622, "answer_id": 54326132, "question_id": 54325920, "link": "https://stackoverflow.com/questions/54325920/ruby-inbuilt-method-to-get-the-position-of-letter-in-the-alphabet-series/54326132#54326132", "title": "Ruby inbuilt method to get the position of letter in the alphabet series?", "body": "<p>You can build a hash with position of a letter in an alphabet and then query this hash:</p>\n\n<pre><code>indexes = ('a'..'z').each_with_index.map{|l,i| [l, i+1]}.to_h\n\"stackoverflow\".chars.map{|l| indexes[l]}\n# =&gt; [19, 20, 1, 3, 11, 15, 22, 5, 18, 6, 12, 15, 23]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 4168974, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001786317241/picture?type=large", "display_name": "Mahesh Babu", "link": "https://stackoverflow.com/users/4168974/mahesh-babu"}, "is_accepted": false, "score": 0, "last_activity_date": 1548242807, "creation_date": 1548242807, "answer_id": 54326190, "question_id": 54325920, "link": "https://stackoverflow.com/questions/54325920/ruby-inbuilt-method-to-get-the-position-of-letter-in-the-alphabet-series/54326190#54326190", "title": "Ruby inbuilt method to get the position of letter in the alphabet series?", "body": "<p>Below will give you the result you want.</p>\n\n<pre><code>str = \"stackoverflow\"\n\ndef conversion(str)\n  arr = []\n  str.upcase.gsub(/[A-Z]/){|m| arr &lt;&lt; m.ord-64}\n  return arr\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1548332793, "creation_date": 1548332793, "answer_id": 54346671, "question_id": 54325920, "link": "https://stackoverflow.com/questions/54325920/ruby-inbuilt-method-to-get-the-position-of-letter-in-the-alphabet-series/54346671#54346671", "title": "Ruby inbuilt method to get the position of letter in the alphabet series?", "body": "<p>It is better to use <code>each_char</code> than <code>chars</code> because the latter creates an array that is immediately thrown out.</p>\n\n<pre><code>str.each_char.map{|al| al.ord - ?a.ord + 1}\n# =&gt; [19, 20, 1, 3, 11, 15, 22, 5, 18, 6, 12, 15, 23]\n</code></pre>\n"}], "owner": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3090, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1548332793, "creation_date": 1548241851, "last_edit_date": 1548243859, "question_id": 54325920, "link": "https://stackoverflow.com/questions/54325920/ruby-inbuilt-method-to-get-the-position-of-letter-in-the-alphabet-series", "title": "Ruby inbuilt method to get the position of letter in the alphabet series?", "body": "<p>Input: <code>str = \"stackoverflow\"</code></p>\n\n<p>Output: <code>[19 20 1 3 11 15 22 5 18 6 12 15 23]</code></p>\n\n<p>Do we have any method to get the position of the letters in ruby?</p>\n\n<p>So that I can use something like <code>str.chars.map { |al| al.some_method }</code>.</p>\n\n<p><code>str.chars = [\"s\", \"t\", \"a\", \"c\", \"k\", \"o\", \"v\", \"e\", \"r\", \"f\", \"l\", \"o\", \"w\"]</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 2, "creation_date": 1548240629, "post_id": 54325510, "comment_id": 95469474, "body": "Show first what you have tried"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 3575910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850c82708b87106b1e73e90b42c8ef51?s=128&d=identicon&r=PG&f=1", "display_name": "MrBiggs", "link": "https://stackoverflow.com/users/3575910/mrbiggs"}, "edited": false, "score": 0, "creation_date": 1548758512, "post_id": 54419111, "comment_id": 95647980, "body": "Thanks for your answer. That is useful to know for creating new objects. What I am looking to achieve is add the Active Storage models to Active Admin so I can view all the entries. So far I have tried the equivalent of <code>rails g active_admin:resource User</code> but I get an error and the server won&#39;t load."}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "reply_to_user": {"reputation": 153, "user_id": 3575910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850c82708b87106b1e73e90b42c8ef51?s=128&d=identicon&r=PG&f=1", "display_name": "MrBiggs", "link": "https://stackoverflow.com/users/3575910/mrbiggs"}, "edited": false, "score": 0, "creation_date": 1548758623, "post_id": 54419111, "comment_id": 95648042, "body": "Are you talking about how to display your current data? For example, if you a user model and you want to display them inside ActiveAdmin so that you can manage them?"}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "reply_to_user": {"reputation": 153, "user_id": 3575910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850c82708b87106b1e73e90b42c8ef51?s=128&d=identicon&r=PG&f=1", "display_name": "MrBiggs", "link": "https://stackoverflow.com/users/3575910/mrbiggs"}, "edited": false, "score": 0, "creation_date": 1548758905, "post_id": 54419111, "comment_id": 95648218, "body": "Updated my answer."}, {"owner": {"reputation": 153, "user_id": 3575910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850c82708b87106b1e73e90b42c8ef51?s=128&d=identicon&r=PG&f=1", "display_name": "MrBiggs", "link": "https://stackoverflow.com/users/3575910/mrbiggs"}, "edited": false, "score": 0, "creation_date": 1548759336, "post_id": 54419111, "comment_id": 95648497, "body": "Thanks, yes I am familiar with your suggestions. I am not able to add the Active Storage model to Active Admin. I have tried <code>rails g active_admin:resource Active_storage_attachment</code> and <code>rails g active_admin:resource Active_storage_blob</code> but it throws out errors"}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "reply_to_user": {"reputation": 153, "user_id": 3575910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850c82708b87106b1e73e90b42c8ef51?s=128&d=identicon&r=PG&f=1", "display_name": "MrBiggs", "link": "https://stackoverflow.com/users/3575910/mrbiggs"}, "edited": false, "score": 0, "creation_date": 1548759822, "post_id": 54419111, "comment_id": 95648796, "body": "It doesn&#39;t makes sense what you are trying to do. Why do you want to add active storage attachment like so? So it seems that you want to add ActiveStorage to your ActiveAdmin, like i first assumed. You want to be able to upload images, files via ActiveAdmin correct? That means you need ActiveStorage. In this case, look at my first example. Thats how you do it. Have you any examples of your code? Or do you use GitHub? I could modify it so that you see how its done."}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "reply_to_user": {"reputation": 153, "user_id": 3575910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850c82708b87106b1e73e90b42c8ef51?s=128&d=identicon&r=PG&f=1", "display_name": "MrBiggs", "link": "https://stackoverflow.com/users/3575910/mrbiggs"}, "edited": false, "score": 0, "creation_date": 1548759958, "post_id": 54419111, "comment_id": 95648881, "body": "ActiveAdmin always needs a resource. The resource is coming from your Active Record. And ActiveStorage is attached to that ActiveRecord and not to ActiveAdmin. ActiveAdmin only reads/writes on what it gets by using resources. Therefore adding ActiveStorageAttachment to your ActiveAdmin wouldn&#39;t work. ActiveAdmin is not a model. You can only attach files via ActiveStorage by using a model, like stated in the Rails doc&#39;s."}, {"owner": {"reputation": 153, "user_id": 3575910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850c82708b87106b1e73e90b42c8ef51?s=128&d=identicon&r=PG&f=1", "display_name": "MrBiggs", "link": "https://stackoverflow.com/users/3575910/mrbiggs"}, "edited": false, "score": 0, "creation_date": 1548760147, "post_id": 54419111, "comment_id": 95648986, "body": "I agree with you that to add files, the best way is as you have suggested. I want the active storage models inside Active Admin so that I can easily read/analyse the data. Active Storage has two Active Record models - active_storage_blobs and active_storage_attachments. I just want to be able to examine the tables in full as via the console isn&#39;t that user friendly."}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "reply_to_user": {"reputation": 153, "user_id": 3575910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850c82708b87106b1e73e90b42c8ef51?s=128&d=identicon&r=PG&f=1", "display_name": "MrBiggs", "link": "https://stackoverflow.com/users/3575910/mrbiggs"}, "edited": false, "score": 0, "creation_date": 1548760354, "post_id": 54419111, "comment_id": 95649103, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/187484/discussion-between-prometheus-and-mrbiggs\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "is_accepted": true, "score": 1, "last_activity_date": 1548762595, "last_edit_date": 1548762595, "creation_date": 1548758212, "answer_id": 54419111, "question_id": 54325510, "link": "https://stackoverflow.com/questions/54325510/access-active-storage-models-with-active-admin/54419111#54419111", "title": "Access Active Storage models with Active Admin", "body": "<p>After a few comments and a quick chat, here's the final solution: </p>\n\n<p>ActiveStorage delivers active_storage_blobs, giving you an extra layer of information: metadata, url, redirects, booleans etc. </p>\n\n<p>These ones are handled by ActiveStorage::Blob. </p>\n\n<p>rails g active_admin:resource active_storage_blobs will throw an error. The reason is because ActiveStorage follows a different setup and ActiveRecord. In this case, get the resource directly from the Active Storage. </p>\n\n<p>For now, the solution is:</p>\n\n<pre><code>rails g active_admin:resource ActiveStorage::Blob\n</code></pre>\n\n<p>This will display the blob data as an own index inside ActiveAdmin. Everything else should follow the same pattern as normal. </p>\n\n<p>Happy coding! </p>\n"}], "owner": {"reputation": 153, "user_id": 3575910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850c82708b87106b1e73e90b42c8ef51?s=128&d=identicon&r=PG&f=1", "display_name": "MrBiggs", "link": "https://stackoverflow.com/users/3575910/mrbiggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 771, "favorite_count": 0, "accepted_answer_id": 54419111, "answer_count": 1, "score": 1, "last_activity_date": 1548762595, "creation_date": 1548240571, "question_id": 54325510, "link": "https://stackoverflow.com/questions/54325510/access-active-storage-models-with-active-admin", "title": "Access Active Storage models with Active Admin", "body": "<p>Is it possible to add the active storage models to active admin? I have tried to add them in the usual active admin way, however, the rails app just crashes.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "csv"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548238777, "post_id": 54324871, "comment_id": 95468390, "body": "What is <code>all</code> in above code? Array of string where date is provided  as a string ?"}, {"owner": {"reputation": 11, "user_id": 10069599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vPmWeMQ4jA0/AAAAAAAAAAI/AAAAAAAAAAc/5lJH-66sti8/photo.jpg?sz=128", "display_name": "TChaitanya Tatavolu", "link": "https://stackoverflow.com/users/10069599/tchaitanya-tatavolu"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548238924, "post_id": 54324871, "comment_id": 95468466, "body": "all is an array containing the combination of individual arrays"}, {"owner": {"reputation": 11, "user_id": 10069599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vPmWeMQ4jA0/AAAAAAAAAAI/AAAAAAAAAAc/5lJH-66sti8/photo.jpg?sz=128", "display_name": "TChaitanya Tatavolu", "link": "https://stackoverflow.com/users/10069599/tchaitanya-tatavolu"}, "edited": false, "score": 0, "creation_date": 1548240091, "post_id": 54324871, "comment_id": 95469162, "body": "all = []  and i pushed my child arrays present in each nodes of States and Filing as follows: all &lt;&lt; firstchild + secondchild"}, {"owner": {"reputation": 11, "user_id": 10069599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vPmWeMQ4jA0/AAAAAAAAAAI/AAAAAAAAAAc/5lJH-66sti8/photo.jpg?sz=128", "display_name": "TChaitanya Tatavolu", "link": "https://stackoverflow.com/users/10069599/tchaitanya-tatavolu"}, "edited": false, "score": 0, "creation_date": 1548240160, "post_id": 54324871, "comment_id": 95469203, "body": "first code block indicates the  displayed output in csv"}, {"owner": {"reputation": 11, "user_id": 10069599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vPmWeMQ4jA0/AAAAAAAAAAI/AAAAAAAAAAc/5lJH-66sti8/photo.jpg?sz=128", "display_name": "TChaitanya Tatavolu", "link": "https://stackoverflow.com/users/10069599/tchaitanya-tatavolu"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548240286, "post_id": 54324871, "comment_id": 95469274, "body": "@ray, I updated my all[],it is having only two arrays.(firstchild and secondchild)"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548240291, "post_id": 54324871, "comment_id": 95469278, "body": "@TChaitanyaTatavolu Your question with data provided in not clear"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548240572, "post_id": 54324871, "comment_id": 95469432, "body": "@TChaitanyaTatavolu your question seems a bit inconsistent to me. Could you provide a filled example input array (i.e. <code>all</code>) and your expected output (along your code), please? It doesn&#39;t have to be your actual data, a simplified array would be just fine."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548241074, "post_id": 54324871, "comment_id": 95469729, "body": "<i>&quot;This my csv output&quot;</i> \u2013 not quite, that&#39;s a screenshot showing the CSV imported into a spreadsheet application (presumably). Please post the raw CSV data instead (it&#39;s a textual format, so you can put it in a code block)."}, {"owner": {"reputation": 11, "user_id": 10069599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vPmWeMQ4jA0/AAAAAAAAAAI/AAAAAAAAAAc/5lJH-66sti8/photo.jpg?sz=128", "display_name": "TChaitanya Tatavolu", "link": "https://stackoverflow.com/users/10069599/tchaitanya-tatavolu"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548242023, "post_id": 54324871, "comment_id": 95470270, "body": "@Stefan, I provided my .rb code"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10069599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vPmWeMQ4jA0/AAAAAAAAAAI/AAAAAAAAAAc/5lJH-66sti8/photo.jpg?sz=128", "display_name": "TChaitanya Tatavolu", "link": "https://stackoverflow.com/users/10069599/tchaitanya-tatavolu"}, "edited": false, "score": 0, "creation_date": 1548239175, "post_id": 54324970, "comment_id": 95468621, "body": "Thank you,but it&#39;s not sorting.Actually i had  2 &#39;Dt&#39; coloumns under nodes."}], "tags": [], "owner": {"reputation": 820, "user_id": 2640181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7599b700aee8e1a534030709ae43616?s=128&d=identicon&r=PG", "display_name": "barmic", "link": "https://stackoverflow.com/users/2640181/barmic"}, "is_accepted": false, "score": 0, "last_activity_date": 1548238877, "creation_date": 1548238877, "answer_id": 54324970, "question_id": 54324871, "link": "https://stackoverflow.com/questions/54324871/how-to-sort-by-dates-in-csv-using-ruby/54324970#54324970", "title": "How to sort_by dates in csv using ruby", "body": "<p>Try this:</p>\n\n<pre><code>csv_rows = []\nCSV.foreach('new_test3_file.csv', headers: true) do |row|\n  csv_rows &lt;&lt; row.to_h\nend\n\ncsv_rows.sort_by{ |row| row['Dt'] }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1548239593, "post_id": 54325170, "comment_id": 95468894, "body": "Or <code>all.sort_by!(&amp;:last)</code>."}, {"owner": {"reputation": 11, "user_id": 10069599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vPmWeMQ4jA0/AAAAAAAAAAI/AAAAAAAAAAc/5lJH-66sti8/photo.jpg?sz=128", "display_name": "TChaitanya Tatavolu", "link": "https://stackoverflow.com/users/10069599/tchaitanya-tatavolu"}, "edited": false, "score": 0, "creation_date": 1548239726, "post_id": 54325170, "comment_id": 95468965, "body": "Please find my updated question once, I need to sort date with reference to particular node"}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1548239781, "last_edit_date": 1548239781, "creation_date": 1548239501, "answer_id": 54325170, "question_id": 54324871, "link": "https://stackoverflow.com/questions/54324871/how-to-sort-by-dates-in-csv-using-ruby/54325170#54325170", "title": "How to sort_by dates in csv using ruby", "body": "<p>Here, CSV is completely text data of string provided by comma.</p>\n\n<p><code>all</code> is array of data to be written on CSV file so I suggest you to sort data inside all as per your need first and then write on csv file.</p>\n\n<pre><code>all = [[\"Ut\", \"2009-01-12\"], [\"TY\", \"2003-12-21\"], [\"Rt\", \"2008-05-20\"]] \n</code></pre>\n\n<p>Now sort it like below <strong>if your date of state is 2nd value at inner array</strong></p>\n\n<pre><code>&gt; all.sort! { |a,b| DateTime.parse(a[1]) &lt;=&gt;  DateTime.parse(b[1]) }\n # =&gt; [[\"TY\", \"2003-12-21\"], [\"Rt\", \"2008-05-20\"], [\"Ut\", \"2009-01-12\"]]\n</code></pre>\n\n<p>Now you can write this sorted data on csv file.</p>\n\n<p>Or you can use, (As @Stefan suggested in below comment)</p>\n\n<pre><code>all.sort_by! { |a| a[1] }  \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10069599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vPmWeMQ4jA0/AAAAAAAAAAI/AAAAAAAAAAc/5lJH-66sti8/photo.jpg?sz=128", "display_name": "TChaitanya Tatavolu", "link": "https://stackoverflow.com/users/10069599/tchaitanya-tatavolu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548241845, "creation_date": 1548238551, "last_edit_date": 1548241845, "question_id": 54324871, "link": "https://stackoverflow.com/questions/54324871/how-to-sort-by-dates-in-csv-using-ruby", "title": "How to sort_by dates in csv using ruby", "body": "<p><a href=\"https://i.stack.imgur.com/u5aAG.png\" rel=\"nofollow noreferrer\">This my csv output</a>,I need to sort the rows according to the earliest date of States node.</p>\n\n<pre><code>require 'nokogiri'\nrequire 'csv'\nxmlfile = File.read(\"test3.xml\")\ndoc = Nokogiri::XML(xmlfile)\nall = []\ndoc.css('Firm').each_with_index do |firm,i|\n firstchild  = []\n secondchild =[]\nfirm.css('States').each do |rgltr_addr_node|\n if rgltr_addr_node.has_attribute?(\"RgltrCd\")\n  RgltrCd =rgltr_addr_node.attributes[\"RgltrCd\"]&amp;&amp;rgltr_addr_node.attributes[\"RgltrCd\"].value\n else \n RgltrCd = \"NA\"\nend\nif rgltr_addr_node.has_attribute?(\"St\")\n  St = rgltr_addr_node.attributes[\"St\"] &amp;&amp; rgltr_addr_node.attributes[\"St\"].value\nelse\nSt = \"NA\"\nend\nif rgltr_addr_node.has_attribute?(\"Dt\")\n  Dt = rgltr_addr_node.attributes[\"Dt\"] &amp;&amp; rgltr_addr_node.attributes[\"Dt\"].value\nelse \nDt =\"NA\"\nend\nfirstchild[0] = RgltrCd \nfirstchild[1] = St\nfirstchild[2] = Dt\nend\nfirm.css('Filing').each do |filing_node|\nif filing_node.has_attribute?(\"Dt\")\n  Dt = filing_node.attributes[\"Dt\"] &amp;&amp; filing_node.attributes[\"Dt\"].value\nelse\nDt =\"NA\"\nend\nif filing_node.has_attribute?(\"FormVrsn\")\n  FormVrsn = filing_node.attributes[\"FormVrsn\"] &amp;&amp; filing_node.attributes[\"FormVrsn\"].value\nelse \nFormVrsn =\"NA\"\nend\n  secondchild[0] = Dt \n  secondchild[1] = FormVrsn\n end\nend\nall &lt;&lt; firstchild + secondchild \nend\n</code></pre>\n\n<p>I used the following looping for data to display in each row of csv:</p>\n\n<pre><code>CSV.open('new_test3_file.csv', 'wb' ) do |row|\n    row &lt;&lt; ['States', 'Filing']\n    all.each do |data|\n        row &lt;&lt; data\n    end\n</code></pre>\n\n<p>Can any one help me in sorting this by date?</p>\n"}, {"tags": ["arrays", "ruby", "string"], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 2, "creation_date": 1548239383, "post_id": 54324467, "comment_id": 95468749, "body": "Keep in mind that <code>\\w</code> equals only <code>[a-zA-Z0-9_]</code>. If you want to capture other chars you might want to consider using <code>[[:alnum:]]</code> instead. This also captures non-ascii characters like <code>&#233;</code>. Thus changing the regex to <code>&#47;[[:alnum:]]+&#47;</code>. See: <a href=\"https://ruby-doc.org/core-2.6/doc/regexp_rdoc.html#label-Character+Classes\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.6/doc/&hellip;</a>"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 3, "last_activity_date": 1548239515, "last_edit_date": 1548239515, "creation_date": 1548237315, "answer_id": 54324467, "question_id": 54324314, "link": "https://stackoverflow.com/questions/54324314/ruby-filter-for-a-trolls-messages-in-the-chat-fill-array-with-repeat-values/54324467#54324467", "title": "Ruby filter for a Trolls messages in the Chat (fill array with repeat values)", "body": "<p>I'd maybe use <a href=\"https://ruby-doc.org/core-2.6/String.html#method-i-gsub\" rel=\"nofollow noreferrer\"><code>gsub</code></a> to change just text, not punctuation. Also, no need to <code>map</code> - just need to know the <code>size</code>:</p>\n\n<pre><code>def troll_filter(message)\n  message.gsub(/\\p{Word}+/) { |x| \"croak\".each_char.cycle.take(x.size).join }\nend\n\n# =&gt; \"cro cro croak croak. croakc croa. croak.\"\n</code></pre>\n"}], "owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 54324467, "answer_count": 1, "score": 4, "last_activity_date": 1548239515, "creation_date": 1548236879, "question_id": 54324314, "link": "https://stackoverflow.com/questions/54324314/ruby-filter-for-a-trolls-messages-in-the-chat-fill-array-with-repeat-values", "title": "Ruby filter for a Trolls messages in the Chat (fill array with repeat values)", "body": "<p>In chat where I use to be a couple of trolls lives, I cannot move them away, and I tired to listen their songs. I write a code to change trolls messages into <code>croack croak</code> frog sound. </p>\n\n<p>Like this. <code>\"You are dirty sucks. Monkey code. Lamer.\"</code> =>  <code>\"cro cro croak croakc croakc croak croakc\"</code></p>\n\n<p>For this I use some code, and I fill the word of a troll by <code>croak</code> is some verbose manner <code>x.chars.zip(%w{c r o a k}.cycle).map{|x,y| y}.join</code>. <strong>How to fill array with repetitive value more concise way?</strong></p>\n\n<p>Here is a code, I'm using:</p>\n\n<pre><code>def troll_filter message\n    message.split(\" \")\n    .map{ |x| \n        x.chars.zip(%w{c r o a k}.cycle).map{|x,y| y}.join \n    }.join(\" \")\nend\n\np troll_filter \"sucks sucks\" # \"croak croak\"\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "json", "ruby", "forms"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1548236933, "post_id": 54324283, "comment_id": 95467194, "body": "Please, add code where you&#39;re generating incomplete input"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1548237705, "post_id": 54324283, "comment_id": 95467742, "body": "@Vasilisa thanks for your comment. I added the code which is generating incomplete input."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1548238696, "post_id": 54324283, "comment_id": 95468338, "body": "@FabrizioBertoglio I haven&#39;t done something like this per se, but from your link, it seems Solution 3 is easer (that of which makes use of <code>OpenStruct</code>)."}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "reply_to_user": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1548239383, "post_id": 54324283, "comment_id": 95468750, "body": "@Jay-ArPolidario I was able to implement <code>solution 1</code> and generate &lt;<code>input name=&quot;company[preferences][attr1]&quot; &#47;&gt;</code>, but I need <code>name=&quot;company[preferences][display_attributes][attr1]&quot;</code> so that the rails controller gets the correct parameters. I will try some workaround, but could not find any explanation on how to do this with <code>simple_form</code>. Thanks a lot!"}], "answers": [{"comments": [{"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1548241920, "post_id": 54325862, "comment_id": 95470196, "body": "^ Let me know if my solution works, and if it does, I&#39;ll try to write a <code>helper</code> method for this that will support for all any-deep hashes."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1548245487, "post_id": 54325862, "comment_id": 95472051, "body": "@FabrizioBertoglio No prob. Hope it worked. If not yet, I&#39;ll test this further later after I get the time :)"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1548257401, "post_id": 54325862, "comment_id": 95479150, "body": "thanks for your answer. It helped me find the solution. I will post the solution to this problem if authorized. I will accept your answer, if my solution will be accepted from the customer, otherwise I will need to set a bounty on the question. Thanks a lot. I wish you a good day"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1548257762, "post_id": 54325862, "comment_id": 95479342, "body": "@FabrizioBertoglio Oh of course!!! Feel free to post your discovered solution :) No problem at all!"}], "tags": [], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "is_accepted": true, "score": 2, "last_activity_date": 1548241705, "creation_date": 1548241705, "answer_id": 54325862, "question_id": 54324283, "link": "https://stackoverflow.com/questions/54324283/simple-form-nested-json-attributes/54325862#54325862", "title": "simple_form nested json attributes", "body": "<p>Untested, but can you try:</p>\n\n<pre><code>&lt;%= f.simple_fields_for :preferences, OpenStruct.new(f.object.preferences) do |ff|\n  &lt;% ff.object.to_h.each do |key, value| %&gt;\n    &lt;% if value.is_a? Hash %&gt;\n      &lt;%= ff.simple_fields_for key, OpenStruct.new(value) do |fff| %&gt;\n        &lt;% fff.object.to_h.each do |key, value| %&gt;\n          &lt;%= fff.input key, input_html: { value: value } %&gt;\n        &lt;% end %&gt;\n      &lt;% end %&gt;\n    &lt;% else %&gt;\n      &lt;%= ff.input key, input_html: { value: value } %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<h2>TODOs:</h2>\n\n<ul>\n<li>code above only supports 2-level deep \"looping\" in the hash, because of explicit checking of <code>is_a? Hash</code> until the 2nd level. 3rd-level, and so on are not yet supported and therefore probably best to write a <code>helper</code> method to dynamically generate all of these input fields (however deep that hash may be).</li>\n</ul>\n"}], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 54325862, "answer_count": 1, "score": 0, "last_activity_date": 1548241705, "creation_date": 1548236772, "last_edit_date": 1548237631, "question_id": 54324283, "link": "https://stackoverflow.com/questions/54324283/simple-form-nested-json-attributes", "title": "simple_form nested json attributes", "body": "<p>The <a href=\"https://github.com/fabriziobertoglio1987/pages-app/blob/master/app/models/company.rb\" rel=\"nofollow noreferrer\"><code>Company</code></a> model <a href=\"https://github.com/fabriziobertoglio1987/pages-app/blob/master/db/schema.rb\" rel=\"nofollow noreferrer\"><code>preferences</code> jsonb field</a>:</p>\n\n<pre><code>Company.new.preferences\n=&gt; { display_settings: { attr1: \"\" }}\n</code></pre>\n\n<p>The following html <a href=\"https://github.com/fabriziobertoglio1987/pages-app/blob/master/app/views/companies/_display.html.erb\" rel=\"nofollow noreferrer\"><code>input</code> field</a> should be created with <a href=\"https://github.com/plataformatec/simple_form\" rel=\"nofollow noreferrer\"><code>simple_form</code></a> tag <a href=\"https://github.com/plataformatec/simple_form#simple-fields-for\" rel=\"nofollow noreferrer\"><code>simple_fields_for</code></a></p>\n\n<pre><code>&lt;input type=\"text\" name=\"company[preferences][display_settings][attr1]\"&gt;\n</code></pre>\n\n<p>I am only able to render an <code>input</code> with <code>name=\"company[preferences][attr1]\"</code> by following this <a href=\"https://github.com/plataformatec/simple_form/wiki/Nested-inputs-for-key-value-hash-attributes\" rel=\"nofollow noreferrer\">instructions</a> and it will persist to the database:</p>\n\n<pre><code>Company.last.preferences\n=&gt; { attr1: \"\" }\n</code></pre>\n\n<p>I am using the following <code>erb</code>:</p>\n\n<pre><code>&lt;% preferences = PreferencesDecorator.new(@company.preferences[\"display_settings\"])\n  f.simple_fields_for(preferences) do |field|\n    preferences.each do |key, value| %&gt;\n     &lt;label for=\"&lt;%= key %&gt;\"&gt;&lt;%= key %&gt;&lt;/label&gt;\n     &lt;%= field.input_field key %&gt;\n  &lt;% end\nend %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1548236153, "post_id": 54324038, "comment_id": 95466739, "body": "<i>&quot;every model in my DB&quot;</i> \u2013 the models are only known to Rails, your database isn&#39;t aware of them."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 1, "creation_date": 1548236289, "post_id": 54324038, "comment_id": 95466804, "body": "<i>every model in my app</i> &amp; <i>evey table in my DB</i> are different things"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1548236322, "post_id": 54324038, "comment_id": 95466822, "body": "Thanks for both taking the time to help."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548236344, "post_id": 54324038, "comment_id": 95466828, "body": "You just checking models in app directory so what if you have components and it also got models?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1548236366, "post_id": 54324038, "comment_id": 95466840, "body": "I&#39;ll rephrase my question."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1548236512, "post_id": 54324038, "comment_id": 95466929, "body": "Your question is still unclear, because the title appears to be wrong. If you just want to know the database tables, then this is totally independent to the rails models."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548236527, "post_id": 54324038, "comment_id": 95466942, "body": "<i>&quot;I want a list of every table in my database&quot;</i> \u2013 only tables belonging to a model or any table?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1548236564, "post_id": 54324038, "comment_id": 95466960, "body": "Any table in the DB - I appreciate the term model is misused"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548236682, "post_id": 54324038, "comment_id": 95467034, "body": "Like this? <a href=\"https://stackoverflow.com/q/154372/477037\">stackoverflow.com/q/154372/477037</a>"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1548236728, "post_id": 54324038, "comment_id": 95467068, "body": "A less sarcastic thank you for your help, that&#39;s exactly what I need"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548236778, "post_id": 54324038, "comment_id": 95467095, "body": "@Stefan Will that solution include view name also along with tables? if yes, how can filter out views ?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548236838, "post_id": 54324038, "comment_id": 95467138, "body": "@ray what do you mean by <i>&quot;view&quot;</i>?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548236975, "post_id": 54324038, "comment_id": 95467216, "body": "@Stefan <i>SQL Views</i>, created by raw sql fired in migration by <code>execute</code> method. I tried long time ago where I got all tables and views."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548237093, "post_id": 54324038, "comment_id": 95467302, "body": "@ray oh, <i>those</i> views. I don&#39;t know actually, my current database doesn&#39;t have tables or views ;-) It probably depends on your database and adapter. Just create a view and give it a try."}], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1548236757, "answer_count": 0, "score": 0, "last_activity_date": 1548291199, "creation_date": 1548236002, "last_edit_date": 1548291199, "question_id": 54324038, "link": "https://stackoverflow.com/questions/54324038/rails-ruby-easiest-way-to-get-table-names-of-my-database", "closed_reason": "Duplicate", "title": "Rails Ruby easiest way to get table names of my database", "body": "<p>I'm trying to iterate through every table in my database.</p>\n\n<p>I've found this answer from 9 years ago:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2751857/how-can-i-iterate-through-all-of-the-models-in-my-rails-app\">How can I iterate through all of the Models in my rails app?</a></p>\n\n<p>With the answer apparently being:</p>\n\n<pre><code>Dir[Rails.root.join('app/models/*.rb').to_s].each do |filename|\n  klass = File.basename(filename, '.rb').camelize.constantize\n  next unless klass.ancestors.include?(ActiveRecord::Base)\n  next if klass.abstract_class?\n  # do something with klass\nend\n</code></pre>\n\n<p>The answer above is 9 years old but I can't find anything more recent. Is there an easier way for me to access this list? My end result is I want a list of every table in my database. I also have namespaced models so would need to make the above even uglier for it to work for me.</p>\n\n<p>EDIT: As multiple users have pointed out models do not exist in my DB. My bad. As I said in my original post:</p>\n\n<blockquote>\n  <p>My end result is I want a list of every table in my database.</p>\n</blockquote>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1548235776, "post_id": 54323833, "comment_id": 95466513, "body": "Have you tried to implement your proposed solution? Getting the first two chars and comparing them against <code>&quot;99&quot;</code> doesn&#39;t seem so hard."}, {"owner": {"reputation": 788, "user_id": 2561325, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004097377441/picture?type=large", "display_name": "Ricardo Green", "link": "https://stackoverflow.com/users/2561325/ricardo-green"}, "edited": false, "score": 0, "creation_date": 1548242199, "post_id": 54323833, "comment_id": 95470367, "body": "I tried some things, but my physical limits makes difficult the things that normal people usually do easily. So I just opted here for some help. I&#39;ve picked an answer. Thanks a lot guys."}], "answers": [{"comments": [{"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1548235496, "post_id": 54323855, "comment_id": 95466330, "body": "<code>[0..1]</code> maybe?"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 3, "last_activity_date": 1548235410, "creation_date": 1548235410, "answer_id": 54323855, "question_id": 54323833, "link": "https://stackoverflow.com/questions/54323833/how-do-you-get-the-first-two-characters-of-a-string/54323855#54323855", "title": "How do you get the first two characters of a string?", "body": "<p>You can use a range to access string:</p>\n\n<pre><code>\"990822\"[0...2]\n# =&gt; \"99\"\n</code></pre>\n\n<p>See the <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-5B-5D\" rel=\"nofollow noreferrer\"><code>String</code> docs</a></p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1548235674, "post_id": 54323875, "comment_id": 95466449, "body": "Based on the answer ids, you posted first ;-)"}, {"owner": {"reputation": 5470, "user_id": 2052097, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KOzAT.jpg?s=128&g=1", "display_name": "z atef", "link": "https://stackoverflow.com/users/2052097/z-atef"}, "edited": false, "score": 0, "creation_date": 1548241877, "post_id": 54323875, "comment_id": 95470171, "body": "You may want to make sure no leading spaces are getting on the way, with string.strip!"}], "tags": [], "owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "is_accepted": true, "score": 9, "last_activity_date": 1548235816, "last_edit_date": 1548235816, "creation_date": 1548235453, "answer_id": 54323875, "question_id": 54323833, "link": "https://stackoverflow.com/questions/54323833/how-do-you-get-the-first-two-characters-of-a-string/54323875#54323875", "title": "How do you get the first two characters of a string?", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.5.0/String.html#method-i-start_with-3F\" rel=\"noreferrer\"><code>String#start_with?</code></a>:</p>\n\n<pre><code>\"990822\".start_with?(\"99\") #=&gt; true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "is_accepted": false, "score": 4, "last_activity_date": 1548235453, "creation_date": 1548235453, "answer_id": 54323876, "question_id": 54323833, "link": "https://stackoverflow.com/questions/54323833/how-do-you-get-the-first-two-characters-of-a-string/54323876#54323876", "title": "How do you get the first two characters of a string?", "body": "<p>Consider using the method <a href=\"https://apidock.com/ruby/String/start_with%3F\" rel=\"nofollow noreferrer\"><code>start_with?</code></a>.</p>\n\n<pre><code>s = \"990822\"\n  =&gt; \"990822\"\ns.start_with? \"99\"\n  =&gt; true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1548333042, "creation_date": 1548333042, "answer_id": 54346740, "question_id": 54323833, "link": "https://stackoverflow.com/questions/54323833/how-do-you-get-the-first-two-characters-of-a-string/54346740#54346740", "title": "How do you get the first two characters of a string?", "body": "<p>To get the first two characters, the most straightforward way is:</p>\n\n<pre><code>\"990822\"[0, 2] # =&gt; \"99\"\n</code></pre>\n\n<p>Using a range inside the method <code>[]</code> is both not straightforward and also creates a range object that is immediately thrown out, which is a waste.</p>\n\n<p>However, the whole question is actually an XY-question.</p>\n"}], "owner": {"reputation": 788, "user_id": 2561325, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004097377441/picture?type=large", "display_name": "Ricardo Green", "link": "https://stackoverflow.com/users/2561325/ricardo-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 54323875, "answer_count": 4, "score": 0, "last_activity_date": 1548333042, "creation_date": 1548235305, "last_edit_date": 1548332966, "question_id": 54323833, "link": "https://stackoverflow.com/questions/54323833/how-do-you-get-the-first-two-characters-of-a-string", "title": "How do you get the first two characters of a string?", "body": "<p>I have a string <code>\"990822\"</code>. I want to know if the string starts with <code>\"99\"</code>.</p>\n\n<p>I could achieve this by getting the first two characters of the string, then check if this is equal to <code>\"99\"</code>. How do I get the first two characters from a string?</p>\n"}, {"tags": ["ruby", "rspec", "automated-tests"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1548237534, "post_id": 54323106, "comment_id": 95467624, "body": "i don&#39;t see why removing the <code>let</code> variables (replacing them with instance variables) would cause the line length to increase. Defining an instance variable takes no more space than a <code>let</code>"}, {"owner": {"reputation": 343, "user_id": 682038, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f0d3e1cd54a505c5b2c73eb473ecbf25?s=128&d=identicon&r=PG", "display_name": "denBelg", "link": "https://stackoverflow.com/users/682038/denbelg"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1548240303, "post_id": 54323106, "comment_id": 95469284, "body": "That is true, i should have said a lot of instance variables should be declared in the document and in a lot of other test files. Which i don&#39;t like because it is a lot of duplicate code and more maintenance if something changes..."}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1548233302, "creation_date": 1548233302, "answer_id": 54323226, "question_id": 54323106, "link": "https://stackoverflow.com/questions/54323106/dont-execute-the-before-test-code-for-every-test-without-using-a-before-all-blo/54323226#54323226", "title": "Don&#39;t execute the before test code for every test without using a before all block", "body": "<blockquote>\n  <p>but i don't want that, i want to see which particalur test fails.</p>\n</blockquote>\n\n<p>That is the only thing that prevents you from doing this? Easy.</p>\n\n<pre><code>   context 'context A.1' do\n     before(:each) do\n        # Doing a lot of things and using let variables,...\n     end\n\n     it 'test all the things', aggregate_failures: true do\n       ... \n     end\n\n  end\n</code></pre>\n\n<p>You can even enable it globally for all specs in your <code>spec_helper.rb</code> (that's what I do).</p>\n"}], "owner": {"reputation": 343, "user_id": 682038, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f0d3e1cd54a505c5b2c73eb473ecbf25?s=128&d=identicon&r=PG", "display_name": "denBelg", "link": "https://stackoverflow.com/users/682038/denbelg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 54323226, "answer_count": 1, "score": 0, "last_activity_date": 1548240455, "creation_date": 1548232866, "last_edit_date": 1548240455, "question_id": 54323106, "link": "https://stackoverflow.com/questions/54323106/dont-execute-the-before-test-code-for-every-test-without-using-a-before-all-blo", "title": "Don&#39;t execute the before test code for every test without using a before all block", "body": "<p>I want to execute some before code and test the result with multiple it statements without having to run the before code. </p>\n\n<pre><code>context 'context A' do\n   context 'context A.1' do\n     before(:each) do\n        # Doing a lot of things and using let variables,...\n     end\n\n     it 'T1: test thing 1'\n     it 'T2: test thing 2'\n     it 'T3: test thing 3'\n  end\n\n  context 'context B.1' do\n     before(:each) do\n        # Doing a lot of things and using let variables,...\n     end\n\n     it 'T1: test thing 1'\n     it 'T2: test thing 2'\n     it 'T3: test thing 3'\n  end\nend\n</code></pre>\n\n<p>If you look to the execution it looks something like:</p>\n\n<blockquote>\n  <p>before A.1 - T1 - before A.1 - T2 - before A.1 - T3 - before B.1 - T1 - ...</p>\n</blockquote>\n\n<p>But i want:</p>\n\n<blockquote>\n  <p>before A.1 - T1 - T2 - T3 - before B.1 - T1 - T2 - T3</p>\n</blockquote>\n\n<p>I tried to use a before(:all) but i cannot use it because i use a lot of let variables. You get following error because a let should change in every context.</p>\n\n<blockquote>\n  <p>RuntimeError: let declaration <code>var1</code> accessed in a <code>before(:context)</code> hook at:</p>\n</blockquote>\n\n<p>I could combine all tests in one it statement but i don't want that, i want to see which particalur test fails. The only solution i see is to get rid of all the let variables but this wil result in a massive block of instance variables and in a lot of different test files resulting in a lot of duplicate code...</p>\n\n<p>Can i get the behaviour i want in an other way? Or do i have to look at things in another way?</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1548231314, "post_id": 54322175, "comment_id": 95464039, "body": "No, But why do we have to commit?"}, {"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1548231562, "post_id": 54322175, "comment_id": 95464145, "body": "Did you install the built gem? <code>gem install hola.gem</code> or equivalent"}, {"owner": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "reply_to_user": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1548231917, "post_id": 54322175, "comment_id": 95464320, "body": "yes, I restarted the terminal and now its working. I think there was some issue with rvm."}], "owner": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548231049, "creation_date": 1548229181, "last_edit_date": 1548231049, "question_id": 54322175, "link": "https://stackoverflow.com/questions/54322175/unable-to-load-a-gem-that-i-built", "title": "Unable to load a gem that I built", "body": "<p>I referred to <a href=\"https://guides.rubygems.org/make-your-own-gem/\" rel=\"nofollow noreferrer\">this link</a> to build a Ruby gem. After doing:</p>\n\n<pre><code>gem build hola.gemspec\n</code></pre>\n\n<p>when I try to require the gem in irb, it throws this error:</p>\n\n<pre><code>LoadError (cannot load such file -- word_counter_gem)\n</code></pre>\n\n<p>Can you tell me what the issue is?</p>\n"}, {"tags": ["ruby", "selenium", "cucumber", "capybara", "allure"], "comments": [{"owner": {"reputation": 4068, "user_id": 7844349, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/U6Qoy.jpg?s=128&g=1", "display_name": "Harsh Patel", "link": "https://stackoverflow.com/users/7844349/harsh-patel"}, "edited": false, "score": 1, "creation_date": 1548226413, "post_id": 54321436, "comment_id": 95461923, "body": "Use code format for better formatting your question."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1548229151, "post_id": 54321436, "comment_id": 95463068, "body": "Are you getting XML output first ?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1548234111, "post_id": 54321436, "comment_id": 95465563, "body": "Line 128 of /Users/user/.rvm/gems/ruby-2.6.0/gems/allure-ruby-adaptor-ap&zwnj;&#8203;i-0.7.2/lib/allure-r&zwnj;&#8203;uby-adaptor-api/buil&zwnj;&#8203;der.rb is calling Capybaras <code>title</code> method instead of the one it expects. You aren&#39;t including Capybara::DSL in the global scope are you??"}, {"owner": {"reputation": 21, "user_id": 10505289, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KrFOp2iCkDA/AAAAAAAAAAI/AAAAAAAAALQ/U2u1Y2jqIYA/photo.jpg?sz=128", "display_name": "Naresh Sekar", "link": "https://stackoverflow.com/users/10505289/naresh-sekar"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1548754362, "post_id": 54321436, "comment_id": 95645312, "body": "@Thomas  This happens only when i add,  include Capybara::DSL  in the env.rb file in cucumber tests."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1548754525, "post_id": 54321436, "comment_id": 95645410, "body": "@NareshSekar Ok - so you are including it -- where are you including it to?  Edit your question and add the relevant section of env.rb.  I&#39;m guessing you&#39;re seeing a message like &quot;including Capybara::DSL in the global scope is not recommended!&quot; which should have been your first clue."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10505289, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KrFOp2iCkDA/AAAAAAAAAAI/AAAAAAAAALQ/U2u1Y2jqIYA/photo.jpg?sz=128", "display_name": "Naresh Sekar", "link": "https://stackoverflow.com/users/10505289/naresh-sekar"}, "edited": false, "score": 0, "creation_date": 1548833473, "post_id": 54418079, "comment_id": 95680057, "body": "Thanks @Thomas Walpole,  When i do <code>World(Capybara::DSL)</code>, I cant use Capybara&#39;s methods inside my test scripts. When i try to use <code>page</code> method of capybara&#39;s, I am getting error like <b><code>page</code> method is not found</b>, but when i use <code>include Capybara::DSL</code>, page method is getting recognised and i get my scripts running smooth. Any idea on why i am facing this behaviour."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 21, "user_id": 10505289, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KrFOp2iCkDA/AAAAAAAAAAI/AAAAAAAAALQ/U2u1Y2jqIYA/photo.jpg?sz=128", "display_name": "Naresh Sekar", "link": "https://stackoverflow.com/users/10505289/naresh-sekar"}, "edited": false, "score": 0, "creation_date": 1548837851, "post_id": 54418079, "comment_id": 95682141, "body": "@NareshSekar That really all depends on how your project is set up.  All your scenarios should be run in a World so Capybaras methods should be available there, read <a href=\"https://docs.cucumber.io/cucumber/state/#world-object\" rel=\"nofollow noreferrer\">docs.cucumber.io/cucumber/state/#world-object</a>.  I don&#39;t know what your World objects are. Are the &quot;test scripts&quot; actually cucumber scenarios?  Note: you can always call <code>Capybara.current_session</code> which is what <code>page</code> does."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1548755119, "creation_date": 1548755119, "answer_id": 54418079, "question_id": 54321436, "link": "https://stackoverflow.com/questions/54321436/allure-reports-are-not-getting-created-when-running-the-tests-with-cucumber-ca/54418079#54418079", "title": "Allure Reports are not getting created when running the tests with cucumber - capybara - selenium", "body": "<p>The problem here is that you are including Capybara::DSL in the global scope. Any relatively modern version of Capybara will print a warning to the console like \"including Capybara::DSL in the global scope is not recommended!\" specifically because it will have all sorts of strange side effects. This is because when you just do</p>\n\n<pre><code>include Capybara::DSL\n</code></pre>\n\n<p>outside of any classes or modules you end up including all of Capybaras methods on every object in your project. That's not what you want. It's impossible to say exactly what you need to put where without looking at your project, but assuming you have a normal project you probably want to put</p>\n\n<pre><code>World(Capybara::DSL)\nWorld(Capybara::RSpecMatchers)\n</code></pre>\n\n<p>in your env.rb, or just require 'capybara/cucumber' like instructed - <a href=\"https://github.com/teamcapybara/capybara#using-capybara-with-cucumber\" rel=\"nofollow noreferrer\">https://github.com/teamcapybara/capybara#using-capybara-with-cucumber</a> - which will get things set up correctly.</p>\n"}], "owner": {"reputation": 21, "user_id": 10505289, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KrFOp2iCkDA/AAAAAAAAAAI/AAAAAAAAALQ/U2u1Y2jqIYA/photo.jpg?sz=128", "display_name": "Naresh Sekar", "link": "https://stackoverflow.com/users/10505289/naresh-sekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 54418079, "answer_count": 1, "score": 0, "last_activity_date": 1548755119, "creation_date": 1548226045, "last_edit_date": 1548229979, "question_id": 54321436, "link": "https://stackoverflow.com/questions/54321436/allure-reports-are-not-getting-created-when-running-the-tests-with-cucumber-ca", "title": "Allure Reports are not getting created when running the tests with cucumber - capybara - selenium", "body": "<p>I am trying to run the cucumber test cases along with capybara and selenium webdriver. While running I am getting the following error even if all the test cases are passed. As a result, cucumber jenkins job is getting failed. When I try to open the allure report, it is blank.</p>\n\n<p>Can any one help me out from this ?</p>\n\n<p>log trace:</p>\n\n<blockquote>\n  <p>3 scenarios (0 failed, 3 passed) 12 steps (0 failed, 12 passed)\n  1m8.278s</p>\n  \n  <p>wrong number of arguments (given 1, expected 0) (ArgumentError)\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/capybara-3.12.0/lib/capybara/node/document.rb:31:in\n  title'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/capybara-3.12.0/lib/capybara/session.rb:738:in\n  block (2 levels) in class:Session'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/capybara-3.12.0/lib/capybara/dsl.rb:51:in\n  block (2 levels) in '\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/allure-ruby-adaptor-api-0.7.2/lib/allure-ruby-adaptor-api/builder.rb:128:in\n  block (3 levels) in build!'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/nokogiri-1.10.1/lib/nokogiri/xml/builder.rb:391:in\n  insert'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/nokogiri-1.10.1/lib/nokogiri/xml/builder.rb:375:in\n  method_missing'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/allure-ruby-adaptor-api-0.7.2/lib/allure-ruby-adaptor-api/builder.rb:126:in\n  block (2 levels) in build!'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/nokogiri-1.10.1/lib/nokogiri/xml/builder.rb:293:in\n  initialize'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/allure-ruby-adaptor-api-0.7.2/lib/allure-ruby-adaptor-api/builder.rb:125:in\n  new'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/allure-ruby-adaptor-api-0.7.2/lib/allure-ruby-adaptor-api/builder.rb:125:in\n  block in build!'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/allure-ruby-adaptor-api-0.7.2/lib/allure-ruby-adaptor-api/builder.rb:124:in\n  each'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/allure-ruby-adaptor-api-0.7.2/lib/allure-ruby-adaptor-api/builder.rb:124:in\n  build!'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/allure-cucumber-0.6.1/lib/allure-cucumber/formatter.rb:144:in after_features'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/cucumber-3.1.2/lib/cucumber/formatter/ignore_missing_messages.rb:11:in\n  method_missing'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/cucumber-3.1.2/lib/cucumber/formatter/legacy_api/adapter.rb:136:in\n  after'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/cucumber-3.1.2/lib/cucumber/formatter/legacy_api/adapter.rb:41:in\n  block in initialize'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/cucumber-core-3.2.1/lib/cucumber/core/event_bus.rb:34:in\n  block in broadcast'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/cucumber-core-3.2.1/lib/cucumber/core/event_bus.rb:34:in\n  each'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/cucumber-core-3.2.1/lib/cucumber/core/event_bus.rb:34:in\n  broadcast'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/cucumber-core-3.2.1/lib/cucumber/core/event_bus.rb:40:in\n  method_missing'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/cucumber-3.1.2/lib/cucumber/configuration.rb:33:in\n  notify'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/cucumber-3.1.2/lib/cucumber/runtime.rb:76:in\n  run!'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/cucumber-3.1.2/lib/cucumber/cli/main.rb:34:in\n  execute!'\n  /Users/user/.rvm/gems/ruby-2.6.0/gems/cucumber-3.1.2/bin/cucumber:9:in\n  ' /Users/user/.rvm/gems/ruby-2.6.0/bin/cucumber:23:in\n  load' /Users/user/.rvm/gems/ruby-2.6.0/bin/cucumber:23:in</p>\n  \n  <p>' /Users/user/.rvm/gems/ruby-2.6.0/bin/ruby_executable_hooks:24:in\n  eval' /Users/user/.rvm/gems/ruby-2.6.0/bin/ruby_executable_hooks:24:in\n  ' Took 70 seconds (1:10) cucumbers Failed</p>\n</blockquote>\n"}, {"tags": ["ruby", "google-search-console"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 962824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af84794e1a2d91337c08b63136cd71fe?s=128&d=identicon&r=PG", "display_name": "MisterGreen", "link": "https://stackoverflow.com/users/962824/mistergreen"}, "edited": false, "score": 0, "creation_date": 1558520008, "post_id": 54567337, "comment_id": 99125800, "body": "You are a HERO. Step 2 was different for me though - I didn&#39;t see the option to &quot;Copy your credentials&quot; or add an authorised redirect URI. Instead of selecting &quot;Other&quot; when creating a new OAuth Client ID, I selected &quot;Web application&quot; and the redirect URI field appeared."}, {"owner": {"reputation": 81, "user_id": 962824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af84794e1a2d91337c08b63136cd71fe?s=128&d=identicon&r=PG", "display_name": "MisterGreen", "link": "https://stackoverflow.com/users/962824/mistergreen"}, "edited": false, "score": 0, "creation_date": 1558523309, "post_id": 54567337, "comment_id": 99127599, "body": "Hmm, my access token expired after an hour or so. Do you know how to request a new one through an API? Presumably using the refresh token?"}, {"owner": {"reputation": 81, "user_id": 962824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af84794e1a2d91337c08b63136cd71fe?s=128&d=identicon&r=PG", "display_name": "MisterGreen", "link": "https://stackoverflow.com/users/962824/mistergreen"}, "edited": false, "score": 0, "creation_date": 1558530102, "post_id": 54567337, "comment_id": 99131349, "body": "Answered my own question: I have to grab a new token with a POST to <a href=\"https://www.googleapis.com/oauth2/v4/token\" rel=\"nofollow noreferrer\">googleapis.com/oauth2/v4/token</a> with these body params: { client_id, client_secret, refresh_token, grant_type: &quot;refresh_token&quot; }"}], "tags": [], "owner": {"reputation": 916, "user_id": 3926551, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/149006a8462d008b495dad835404335c?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/3926551/dan"}, "is_accepted": true, "score": 3, "last_activity_date": 1549520115, "creation_date": 1549520115, "answer_id": 54567337, "question_id": 54321208, "link": "https://stackoverflow.com/questions/54321208/google-search-console-api-credentials/54567337#54567337", "title": "Google Search Console API Credentials", "body": "<p>To access the API requires an OAuth Access Token - what I really needed however was a refresh token as they don't expire and can be used to get an access token every time the script ran.</p>\n\n<p>You can use Googles OAuth Playground to generate a token.</p>\n\n<ol>\n<li>Create a Google App Console - <a href=\"https://console.cloud.google.com/apis/dashboard\" rel=\"nofollow noreferrer\">https://console.cloud.google.com/apis/dashboard</a> > create an app > Enable the APIs you want > go to credentials > Create Credentials > OAuth Client Id > Other > Copy your credentials</li>\n<li>Edit the credential and add the authorized redirect URI <a href=\"https://developers.google.com/oauthplayground\" rel=\"nofollow noreferrer\">https://developers.google.com/oauthplayground</a></li>\n<li>Go to <a href=\"https://developers.google.com/oauthplayground\" rel=\"nofollow noreferrer\">https://developers.google.com/oauthplayground</a></li>\n<li>Click the settings icon > check \"Use your own OAuth credentials\" and set your OAuth Client credentials from step 1.</li>\n<li>Select the scopes you want</li>\n<li>Exchange authorization code for tokens - You now can get a refresh token that won't expire!</li>\n</ol>\n\n<p>If you don't use the \"Use your own OAuth credentials\", your refresh token will expire after 24 hours. </p>\n"}], "owner": {"reputation": 916, "user_id": 3926551, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/149006a8462d008b495dad835404335c?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/3926551/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 1, "accepted_answer_id": 54567337, "answer_count": 1, "score": 0, "last_activity_date": 1549520115, "creation_date": 1548224956, "question_id": 54321208, "link": "https://stackoverflow.com/questions/54321208/google-search-console-api-credentials", "title": "Google Search Console API Credentials", "body": "<p>I'm wanting to connect to the Google Search Console API via the ruby client. To do so requires credentials to authenticate.</p>\n\n<p>The API calls would be made from an AWS Lambda function frequently to access data on my own Google account.</p>\n\n<p>I was hoping I could simply create a Google Service Account key - however when creating one, a Role is required and there is no roles related to Search Console.</p>\n\n<p>I don't want to be using OAuth Client ID credentials as there is no UI interface for the app.</p>\n\n<p>How can I authenticate?</p>\n"}, {"tags": ["ruby", "variables"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548220695, "post_id": 54320374, "comment_id": 95460059, "body": "Where is &quot;the final print&quot;? I don&#39;t see any use of <code>print</code>. What is <code>first_num</code>? What is <code>second_num</code>? I don&#39;t see them either. No global variables are set."}, {"owner": {"reputation": 11, "user_id": 10953696, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IpUH_l9djEE/AAAAAAAAAAI/AAAAAAAAPPI/N8AqLMEAE4E/photo.jpg?sz=128", "display_name": "drewM", "link": "https://stackoverflow.com/users/10953696/drewm"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548220850, "post_id": 54320374, "comment_id": 95460104, "body": "I&#39;m sorry. I&#39;m really new to this. I thought that first_number = gets.chomp sets a global variable, it basically asks for a number via input. it also looks like somehow my initial comments were cut off on the question. I&#39;ll try to clarify it better."}, {"owner": {"reputation": 11, "user_id": 10953696, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IpUH_l9djEE/AAAAAAAAAAI/AAAAAAAAPPI/N8AqLMEAE4E/photo.jpg?sz=128", "display_name": "drewM", "link": "https://stackoverflow.com/users/10953696/drewm"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548221441, "post_id": 54320374, "comment_id": 95460239, "body": "It&#39;s Ruby, so &#39;puts&#39; prints it to console. I tried to edit the question, please let me know if it&#39;s still not clear and I&#39;ll try to clarify. I&#39;m new to programming and stack overflow,"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548221611, "post_id": 54320374, "comment_id": 95460293, "body": "Nope, Ruby has a method called <code>print</code>, and it is different from <code>puts</code>. You should not use that term so ambiguously or vaguely. And you haven&#39;t answered what <code>first_num</code> and <code>second_num</code> are."}, {"owner": {"reputation": 11, "user_id": 10953696, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IpUH_l9djEE/AAAAAAAAAAI/AAAAAAAAPPI/N8AqLMEAE4E/photo.jpg?sz=128", "display_name": "drewM", "link": "https://stackoverflow.com/users/10953696/drewm"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548221745, "post_id": 54320374, "comment_id": 95460332, "body": "first_num and second_num are just any two numbers."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548221912, "post_id": 54320374, "comment_id": 95460383, "body": "I see. You are mentioning the variables used inside the method."}, {"owner": {"reputation": 11, "user_id": 10953696, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IpUH_l9djEE/AAAAAAAAAAI/AAAAAAAAPPI/N8AqLMEAE4E/photo.jpg?sz=128", "display_name": "drewM", "link": "https://stackoverflow.com/users/10953696/drewm"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548222246, "post_id": 54320374, "comment_id": 95460474, "body": "Stack overflow is prompting me to move the discussion to a chat. can we do that?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548222272, "post_id": 54320374, "comment_id": 95460484, "body": "No need of that."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1548273549, "post_id": 54320374, "comment_id": 95486984, "body": "Your question is very unclear. Can you clarify, please: what global variables are you talking about? I don&#39;t see any global variables in the code you posted. Please, post the <i>actual</i> code you are asking about, containing the global variables. Secondly, what are &quot;internal variables&quot;? There is no such thing in Ruby. Ruby has only 5 kinds of variables: local variables, instance variables, class hierarchy variables (try to avoid them), global variables (do not use them, ever), and &quot;constant variables&quot;. Thirdly, there is no call to <code>print</code> in your code."}, {"owner": {"reputation": 11, "user_id": 10953696, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IpUH_l9djEE/AAAAAAAAAAI/AAAAAAAAPPI/N8AqLMEAE4E/photo.jpg?sz=128", "display_name": "drewM", "link": "https://stackoverflow.com/users/10953696/drewm"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548361291, "post_id": 54320374, "comment_id": 95524543, "body": "I&#39;m sorry. Really new at coding, and I was trying to describe things in a way that would (hopefully) make sense. I deleted mention of global variables etc within the question already. I&#39;m so new to Ruby that I didn&#39;t even know global variables were declared using $, among other miss-steps in my attempt at explaining my question. I will try to re-edit the question, although it&#39;s been answered by @sawa already."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10953696, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IpUH_l9djEE/AAAAAAAAAAI/AAAAAAAAPPI/N8AqLMEAE4E/photo.jpg?sz=128", "display_name": "drewM", "link": "https://stackoverflow.com/users/10953696/drewm"}, "edited": false, "score": 2, "creation_date": 1548223168, "post_id": 54320800, "comment_id": 95460777, "body": "Thank you so much. I understand it now. I really appreciate you taking the time to walk me through my first stack overflow question."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 11, "user_id": 10953696, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IpUH_l9djEE/AAAAAAAAAAI/AAAAAAAAPPI/N8AqLMEAE4E/photo.jpg?sz=128", "display_name": "drewM", "link": "https://stackoverflow.com/users/10953696/drewm"}, "edited": false, "score": 0, "creation_date": 1548223681, "post_id": 54320800, "comment_id": 95460960, "body": "Good to know it helped."}, {"owner": {"reputation": 11, "user_id": 10953696, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IpUH_l9djEE/AAAAAAAAAAI/AAAAAAAAPPI/N8AqLMEAE4E/photo.jpg?sz=128", "display_name": "drewM", "link": "https://stackoverflow.com/users/10953696/drewm"}, "edited": false, "score": 1, "creation_date": 1548224142, "post_id": 54320800, "comment_id": 95461123, "body": "I have limited experience in programming. I didn&#39;t realize that Ruby uses $ to declare a global variable. I thought if it was defined outside of a method, that made it &#39;global&#39;. I have a lot to learn."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1548222953, "creation_date": 1548222953, "answer_id": 54320800, "question_id": 54320374, "link": "https://stackoverflow.com/questions/54320374/using-a-global-variable-as-an-argument-in-a-ruby-method/54320800#54320800", "title": "Using a global variable as an argument in a ruby method", "body": "<p>You seem to be misunderstanding how a program is read and is executed. In particular, you seem to have a wrong idea about the timing in which a method is called.</p>\n\n<p>When your script is executed, in the top part of the script, the method <code>multiply</code> is <strong>defined</strong>, not executed, at that point (Method execution is only done when it is called with particular arguments).</p>\n\n<p>Then <strong>local</strong> variables, not global ones, <code>first_number</code> and <code>second_number</code> are set according to the input from the console.</p>\n\n<p>Then, within the argument of <code>puts</code>, the method <code>multiply</code> is <strong>called</strong> with the arguments <code>first_number</code> and <code>second_number</code>.</p>\n\n<p>Within the method <strong>execution</strong>, not definition, of <code>multiply</code>, the given <code>first_number</code> and <code>second_number</code> are assigned to <code>first_num</code> and <code>second_num</code> respectively, which can be accessed only within the method execution.</p>\n\n<p>The calculated value is returned from the method <code>multiply</code>, and is put in the <code>#{}</code> part of the argument of <code>puts</code>. There, the method <code>to_s</code> is applied to the value, and becomes part of what is output.</p>\n"}], "owner": {"reputation": 11, "user_id": 10953696, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IpUH_l9djEE/AAAAAAAAAAI/AAAAAAAAPPI/N8AqLMEAE4E/photo.jpg?sz=128", "display_name": "drewM", "link": "https://stackoverflow.com/users/10953696/drewm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 54320800, "answer_count": 1, "score": -1, "last_activity_date": 1548361781, "creation_date": 1548220252, "last_edit_date": 1548361781, "question_id": 54320374, "link": "https://stackoverflow.com/questions/54320374/using-a-global-variable-as-an-argument-in-a-ruby-method", "title": "Using a global variable as an argument in a ruby method", "body": "<p>I'm doing a Ruby course on Udemy, I'm trying to understand why this code works. It takes any two numbers and multiplies them.</p>\n\n<pre><code>def multiply(first_num, second_num)\n  first_num.to_f * second_num.to_f\nend\n\nputs \"Enter the first number\"\nfirst_number = gets.chomp\nputs \"Enter the second number\"\nsecond_number = gets.chomp\n\nputs \"The first number multiplied by the second number is #{multiply(first_number, second_number)}\"\n</code></pre>\n\n<p>The method sets two arguments, and then uses them. Then two numbers are stored, one in first_number and one in second_number. In the final print, instead of using <code>first_num</code> and <code>second_num</code>, first_number and second_number are used instead of first_num and second_num. I would expect the code to fail because it's not using the initial arguments within the method. Why does it work?</p>\n\n<p>Edit: My original question mentioned global variables, I've edited it to remove those references, along with the other things mentioned that made the question confusing. Also the question has been answered. What I really was trying to ask was, \"Why were two variables not contained within a method, used as arguments in the method?\" I didn't realize that was how it worked. Thanks to @sawa for setting me straight, and teaching me some stuff about Ruby I hadn't learned yet.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu", "imagemagick", "paperclip"], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "edited": false, "score": 1, "creation_date": 1548426097, "post_id": 54318727, "comment_id": 95548097, "body": "Thanks, seems was an issue in configuration, now solved"}], "tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": false, "score": 1, "last_activity_date": 1548206299, "creation_date": 1548206299, "answer_id": 54318727, "question_id": 54318623, "link": "https://stackoverflow.com/questions/54318623/uploading-attachments-using-rails-paper-clip-on-digital-ocean/54318727#54318727", "title": "Uploading Attachments using Rails Paper Clip on Digital Ocean", "body": "<p>yes Digital ocean allow to save picture / attachment files (pdf or others), I have droplets in DO </p>\n\n<p>you need to setup location for image in your model (for example in your code product.rb), below is sample</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n\n# attachment for picture image\n  has_attached_file :pict, \n    :styles =&gt; { :medium =&gt; \"735x\", :thumb =&gt; \"238x\" }, \n    :url  =&gt; \"/products/users/:id/:style/:basename.:extension\",\n    :product =&gt; \":rails_root/public/assets/products/:id/:style/:basename.:extension\"\n\nend\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548206299, "creation_date": 1548205342, "question_id": 54318623, "link": "https://stackoverflow.com/questions/54318623/uploading-attachments-using-rails-paper-clip-on-digital-ocean", "title": "Uploading Attachments using Rails Paper Clip on Digital Ocean", "body": "<p>I am deploying a Rails App on DigitalOcean, Ubuntu 16.04.</p>\n\n<p>I have Imagemagick and all paperclip dependency installed. I get the an error when trying to upload and attachment as per below logs. </p>\n\n<p>Is there a certain configuration required? does DIgital ocean allow for storing files on disk?</p>\n\n<p><a href=\"https://i.stack.imgur.com/20nUX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/20nUX.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 7, "creation_date": 1548201259, "post_id": 54318071, "comment_id": 95456082, "body": "<code>LOOPS.times</code> creates an enumerator (<code>=&gt; #&lt;Enumerator: 100000000:times&gt;</code>), so code must be executed to generate each element of the enumerator and  pass it to the block, even though the value is not used in the block calculation. I assume that is the reason for the difference in performance but I have no proof."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1548204799, "post_id": 54318071, "comment_id": 95456905, "body": "@CarySwoveland I think it is worth noting that <code>(1..LOOPS).each</code> has similar performance to <code>LOOPS.times</code> and that <code>f = -&gt;(_) { i += 1 }; (1..LOOPS).each(&amp;f)</code> is slightly slower. I&#39;d take a wild guess that block calling overhead is involved but I&#39;d have to dig through the source to see how <code>while</code> is implemented."}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1548204931, "post_id": 54318071, "comment_id": 95456939, "body": "I think that calling calling blocks without any arguments makes it slower... Say for example, if you have yield, your code has to execute yield, even you have given no block argument..."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1548273656, "post_id": 54319176, "comment_id": 95487035, "body": "This depends <i>highly</i> on the implementation. For example, I am pretty sure that TruffleRuby is able to eliminate simple blocks completely. Also, any halfway competent Ruby implementation is able to eliminate local variables in cases like this."}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": true, "score": 7, "last_activity_date": 1548210091, "creation_date": 1548210091, "answer_id": 54319176, "question_id": 54318071, "link": "https://stackoverflow.com/questions/54318071/what-makes-while-loop-in-ruby-faster-than-others/54319176#54319176", "title": "What makes `while` loop in Ruby faster than others?", "body": "<p>One of the reasons is because <code>times</code> - it's a block. And it introduces new local variable scope. And it creates some sort of local variable, look:</p>\n\n<p><code>RubyVM::InstructionSequence.disasm(method(:times_loop))</code> returns</p>\n\n<pre><code>== disasm: #&lt;ISeq:times_loop@1.rb:23 (23,0)-(26,3)&gt;=====================\n== catch table\n| catch type: break  st: 0003 ed: 0014 sp: 0000 cont: 0014\n== disasm: #&lt;ISeq:block in times_loop@1.rb:25 (25,14)-(25,24)&gt;==========\n== catch table\n| catch type: redo   st: 0001 ed: 0010 sp: 0000 cont: 0001\n| catch type: next   st: 0001 ed: 0010 sp: 0000 cont: 0010\n|------------------------------------------------------------------------\n0000 nop                                                              (  25)[Bc]\n0001 getlocal_OP__WC__1 i[Li]\n0003 putobject_OP_INT2FIX_O_1_C_ \n0004 opt_plus         &lt;callinfo!mid:+, argc:1, ARGS_SIMPLE&gt;, &lt;callcache&gt;\n0007 dup              \n0008 setlocal_OP__WC__1 i\n0010 leave            [Br]\n|------------------------------------------------------------------------\nlocal table (size: 1, argc: 0 [opts: 0, rest: -1, post: 0, block: -1, kw: -1@-1, kwrest: -1])\n[ 1] i          \n0000 putobject_OP_INT2FIX_O_0_C_                                      (  24)[LiCa]\n0001 setlocal_OP__WC__0 i\n0003 getinlinecache   10, &lt;is:0&gt;                                      (  25)[Li]\n0006 getconstant      :LOOPS\n0008 setinlinecache   &lt;is:0&gt;\n0010 send             &lt;callinfo!mid:times, argc:0&gt;, &lt;callcache&gt;, block in times_loop\n0014 leave                                                            (  26)[Re]\n</code></pre>\n\n<p>There are two local variables (<code>setlocal_OP__WC__1</code> and <code>setlocal_OP__WC__0</code>) in this case.</p>\n\n<p>In opposite <code>while</code> use just one, <code>RubyVM::InstructionSequence.disasm(method(:while_loop))</code> returns</p>\n\n<pre><code>== disasm: #&lt;ISeq:while_loop@1.rb:15 (15,0)-(20,3)&gt;=====================\n== catch table\n| catch type: break  st: 0009 ed: 0032 sp: 0000 cont: 0032\n| catch type: next   st: 0009 ed: 0032 sp: 0000 cont: 0006\n| catch type: redo   st: 0009 ed: 0032 sp: 0000 cont: 0009\n|------------------------------------------------------------------------\nlocal table (size: 1, argc: 0 [opts: 0, rest: -1, post: 0, block: -1, kw: -1@-1, kwrest: -1])\n[ 1] i          \n0000 putobject_OP_INT2FIX_O_0_C_                                      (  16)[LiCa]\n0001 setlocal_OP__WC__0 i\n0003 jump             17                                              (  17)[Li]\n0005 putnil           \n0006 pop              \n0007 jump             17\n0009 getlocal_OP__WC__0 i                                             (  18)[Li]\n0011 putobject_OP_INT2FIX_O_1_C_ \n0012 opt_plus         &lt;callinfo!mid:+, argc:1, ARGS_SIMPLE&gt;, &lt;callcache&gt;\n0015 setlocal_OP__WC__0 i\n0017 getlocal_OP__WC__0 i                                             (  17)\n0019 getinlinecache   26, &lt;is:0&gt;\n0022 getconstant      :LOOPS\n0024 setinlinecache   &lt;is:0&gt;\n0026 opt_lt           &lt;callinfo!mid:&lt;, argc:1, ARGS_SIMPLE&gt;, &lt;callcache&gt;\n0029 branchif         9\n0031 putnil           \n0032 leave                                                            (  20)[Re]\n</code></pre>\n\n<p>I think that the reason is not the only one.</p>\n\n<p>But setting/getting new local variable slow down operation.</p>\n"}], "owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 1, "accepted_answer_id": 54319176, "answer_count": 1, "score": 2, "last_activity_date": 1548220345, "creation_date": 1548200742, "last_edit_date": 1548220345, "question_id": 54318071, "link": "https://stackoverflow.com/questions/54318071/what-makes-while-loop-in-ruby-faster-than-others", "title": "What makes `while` loop in Ruby faster than others?", "body": "<p>I am using this code:</p>\n\n<pre><code>require 'benchmark'\n\nLOOPS = 100_000_000\n\ndef while_loop\n        i = 0\n        while i &lt; LOOPS do i += 1 end\nend\n\n\ndef times_loop\n        i = 0\n        LOOPS.times { i += 1 }\nend\n\nBenchmark.benchmark do |b|\n        b.report('while') { while_loop }\n        b.report('times') { times_loop }\nend\n</code></pre>\n\n<p>The output is (Ruby 2.6.0):</p>\n\n<pre><code>while  2.419529   0.000000   2.419529 (  2.426470)\ntimes  7.225500   0.005673   7.231173 (  7.252794)\n</code></pre>\n\n<p>Why is <code>while</code> loop faster than others?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "httparty"], "comments": [{"owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "edited": false, "score": 1, "creation_date": 1548201338, "post_id": 54317999, "comment_id": 95456103, "body": "you should change <code>action: &quot;search&quot;</code> to <code>action: &quot;index&quot;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10410465"}, "reply_to_user": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "edited": false, "score": 0, "creation_date": 1548203014, "post_id": 54317999, "comment_id": 95456534, "body": "Thanks :) I&#39;m getting a <code>No route matches [POST] &quot;&#47;&quot;</code> when i try and search though."}, {"owner": {"reputation": 1976, "user_id": 1177200, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/99ddd63eb79f04e76156db21c172c7f1?s=128&d=identicon&r=PG", "display_name": "taylorthurlow", "link": "https://stackoverflow.com/users/1177200/taylorthurlow"}, "edited": false, "score": 0, "creation_date": 1548218498, "post_id": 54317999, "comment_id": 95459565, "body": "Just a couple things I would point out semi-unrelated to the question - in Rails land we would call controller methods &#39;actions&#39; instead of methods. At least the ones that are accessed via some HTTP request like index, show, create, etc. This seems to be the source of the problem as kasperite pointed out. Private methods would still be called methods. Also, it&#39;s unlikely that you need to use <code>include HTTParty</code> in a Rails app - it should be done for you already."}], "answers": [{"tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": true, "score": 1, "last_activity_date": 1548207553, "creation_date": 1548207553, "answer_id": 54318881, "question_id": 54317999, "link": "https://stackoverflow.com/questions/54317999/in-rails-how-do-i-change-the-params-of-a-controller-method-using-a-search-form-t/54318881#54318881", "title": "In Rails how do I change the params of a controller method using a search form tag?", "body": "<p>since you using index page you can do, designs_path will automatically route you to index controller</p>\n\n<pre><code>&lt;%= form_tag(designs_path, method: :get) do %&gt;\n  &lt;%= label_tag(:q, \"Search for:\") %&gt;\n  &lt;%= text_field_tag(:q) %&gt;\n  &lt;%= submit_tag(\"Search\") %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10410465"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 54318881, "answer_count": 1, "score": 1, "last_activity_date": 1548207553, "creation_date": 1548200008, "last_edit_date": 1548200426, "question_id": 54317999, "link": "https://stackoverflow.com/questions/54317999/in-rails-how-do-i-change-the-params-of-a-controller-method-using-a-search-form-t", "title": "In Rails how do I change the params of a controller method using a search form tag?", "body": "<p>I'm building a Rails app that interacts with an external search API. I have a class method with the search functionality which is accessed by my index method in my design controller. How can I make it so that my form search changes the params of my controller method and thus performs a search? My code is below. Would appreciate the help :)</p>\n\n<p>Class method:</p>\n\n<pre><code>class Api\n  include HTTParty\n  base_uri \"http://search.exampleapi.com\"\n\n  attr_accessor :name\n\n  # Find a particular design, based on its name\n  def find(name)\n    self.class.get(\"/designs\", query: { q: name }).parsed_response\n  end\nend \n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>class DesignsController &lt; ApplicationController\n    def index\n        @search = Api.new.find(params[:q])['results']\n    end\nend\n</code></pre>\n\n<p>Routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n    root 'designs#index'\n    resources :designs\nend\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;h1&gt;Search&lt;/h1&gt;\n\n&lt;%= form_tag(controller: \"designs\", action: \"search\", method: \"get\") do %&gt;\n  &lt;%= label_tag(:q, \"Search for:\") %&gt;\n  &lt;%= text_field_tag(:q) %&gt;\n  &lt;%= submit_tag(\"Search\") %&gt;\n&lt;% end %&gt;\n\n&lt;h2&gt;Search results:&lt;/h2&gt;\n\n&lt;% @search.each do |design| %&gt;  \n&lt;h3&gt;&lt;%= design['name'] %&gt;&lt;/h3&gt;\n&lt;h5&gt;&lt;%= design['thumbnail_url'] %&gt;&lt;/h5&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1548198058, "post_id": 54317372, "comment_id": 95455208, "body": "Because when i sign back into the account the order(s) don&#39;t appear.  Shouldn&#39;t the after_create work regardless?"}], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1548198701, "post_id": 54317769, "comment_id": 95455389, "body": "omg lmao.  thanks looks good to me.  ill test this out and should work."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1548201439, "post_id": 54317769, "comment_id": 95456131, "body": "I get a: <code>NoMethodError (undefined method </code>user&#39; for #&lt;Order:0x00007f6f781c0018&gt;):` with this."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1548203037, "post_id": 54317769, "comment_id": 95456543, "body": "I&#39;ve tried a dozen more variants but can&#39;t seem to get it to work!"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 1, "creation_date": 1548203189, "post_id": 54317769, "comment_id": 95456588, "body": "I updated my answer. I overreacted that your association is named buyer instead of user."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1548203526, "post_id": 54317769, "comment_id": 95456646, "body": "See now you smart.  Didn&#39;t even need to show you the user model had a buyer and seller as my user"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1548203643, "post_id": 54317769, "comment_id": 95456677, "body": "Would there be a benefit to using &quot;<code>after_create</code>&quot; insted of <code>before_validation</code> ?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1548203876, "post_id": 54317769, "comment_id": 95456727, "body": "After create would send two queries to the database, therefore before validation will be slightly faster in this case."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1548203134, "last_edit_date": 1548203134, "creation_date": 1548198554, "answer_id": 54317769, "question_id": 54317372, "link": "https://stackoverflow.com/questions/54317372/connecting-users-to-existing-records-with-emails-after-account-activation/54317769#54317769", "title": "Connecting users to existing records with emails AFTER account activation", "body": "<p>You created an <code>after_create</code> callback in your <code>User</code> model. That means the code to connect orders in only ran after the creation of a user. It will not run if you create an order and a matching user already exists.</p>\n\n<p>If you want to connect new orders to existing users automatically when you create the order then you will need to add a callback to your <code>Order</code> model. Something like the following might work:</p>\n\n<pre><code># in app/model/order.rb\nbefore_validation :connect_user\n\nprivate\ndef connect_user\n  self.buyer ||= User.find_by(email: self.email)\nend\n</code></pre>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 54317769, "answer_count": 1, "score": 0, "last_activity_date": 1548203134, "creation_date": 1548196025, "question_id": 54317372, "link": "https://stackoverflow.com/questions/54317372/connecting-users-to-existing-records-with-emails-after-account-activation", "title": "Connecting users to existing records with emails AFTER account activation", "body": "<p><strong>My issue</strong>: Once a user has an account but creates a new Order while not signed in, the order will not connect to the account through the email used.</p>\n\n<p>But when a user  doesn't have an account, they create an order with example@example.com --- and then sign up with example@example.com, the orders will connect and appear.</p>\n\n<p>I want it so when a user has an account already, but then creates an Order with the accounts same email while not signed in, the Order connects.</p>\n\n<p><strong>My user.rb model</strong> that makes connection possible:</p>\n\n<pre><code>    after_create :connect_orders\n\n  def connect_orders\n    Order.where(email: self.email).update_all(buyer_id: self.id)\n  end\n</code></pre>\n\n<p>So when the emails are the same, it will connect.</p>\n\n<p>I tested this for already approved devise User accounts , create an order with the same email, then the order won't show up.  It's like once there is already an account, the code doesn't work.  Unless, is the code not set up to work like that and where have i gone wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "file"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1548192199, "post_id": 54316476, "comment_id": 95453191, "body": "Use ActiveStorage and generate thumbnails as you would normally."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1548193123, "post_id": 54316476, "comment_id": 95453545, "body": "You can use <a href=\"https://ruby-doc.org/stdlib-2.6/libdoc/net/http/rdoc/Net/HTTP.html\" rel=\"nofollow noreferrer\">Net:HTTP</a>, <a href=\"https://ruby-doc.org/stdlib-2.3.1/libdoc/open-uri/rdoc/OpenURI.html\" rel=\"nofollow noreferrer\">OpenURI</a> or any number of <a href=\"https://www.ruby-toolbox.com/categories/http_clients\" rel=\"nofollow noreferrer\">HTTP client gems</a> to download files to your server. ActiveStorage also lets you create attachments from <a href=\"https://edgeguides.rubyonrails.org/active_storage_overview.html#attaching-file-io-objects\" rel=\"nofollow noreferrer\">file IO objects</a> such as an OpenURI stream."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2894427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83d31dc28c67007ce56ef033147480a2?s=128&d=identicon&r=PG", "display_name": "chief", "link": "https://stackoverflow.com/users/2894427/chief"}, "is_accepted": false, "score": 0, "last_activity_date": 1548232689, "creation_date": 1548232689, "answer_id": 54323064, "question_id": 54316476, "link": "https://stackoverflow.com/questions/54316476/how-can-i-get-an-image-from-a-direct-download-link-in-ruby/54323064#54323064", "title": "How can I get an image from a direct download link in ruby?", "body": "<p>You have to perform 3 operations: get the contents of the url, write them on disk and attach them to you model. </p>\n\n<h1>Get contents of url</h1>\n\n<p>Ruby has various libraries to handle HTTP get requests. There is of course the standard library Net::HTTP and other HTTP client gems as <a href=\"https://stackoverflow.com/users/544825/max\">max</a> said. I have used some of them, my favorite choice is <a href=\"https://github.com/httprb/http\" rel=\"nofollow noreferrer\">http.rb</a> but you can choose whatever you like.</p>\n\n<h1>Write stream to disk</h1>\n\n<p>You should choose a folder and a filename and write the stream.</p>\n\n<h1>Attach data to model</h1>\n\n<p>There are several gems to deal with <a href=\"https://www.ruby-toolbox.com/categories/rails_file_uploads\" rel=\"nofollow noreferrer\">attachments</a> too. If you prefer <a href=\"https://guides.rubyonrails.org/active_storage_overview.html\" rel=\"nofollow noreferrer\">ActiveStorage</a> you can check method <code>attach</code> </p>\n\n<p>A naive implementation may look like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># You can use and other HTTP gem or standard Net::HTTP\ngem 'http'\nrequire 'http'\n\nurl = 'https://www.ruby-lang.org/images/header-ruby-logo.png'\n\n# You can set timeouts and other options here\nresponse = HTTP.follow(max_hops: 2).get(url)\n\n# You can check for statuses or other responses\nreturn if response.status != 200 || response.content_type.nil?\n\n# You can grab filename from url or set another filename\nfilename = SecureRandom.hex\n\npath = File.join('tmp', filename)\n\n# Write stream somewhere\nfile = File.open(path, 'wb')\n response.body.each do |chunk|\n  file.write(chunk)\nend\n\n# Suppose you use ActiveStorage, you can use the `attach` method\nyour_model.you_attribute.attach(\n   io: File.open(path),\n   filename: filename,\n   content_type: response.content_type.mime_type\n )\n\n\n\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6510985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a15adaf1830d7c7b21c1b027cb76245?s=128&d=identicon&r=PG&f=1", "display_name": "Slagathor The Destroyer", "link": "https://stackoverflow.com/users/6510985/slagathor-the-destroyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548232689, "creation_date": 1548191391, "last_edit_date": 1548231481, "question_id": 54316476, "link": "https://stackoverflow.com/questions/54316476/how-can-i-get-an-image-from-a-direct-download-link-in-ruby", "title": "How can I get an image from a direct download link in ruby?", "body": "<p>I'm pulling records from a website and attempting to store one of the images it returns (a BMP file). The issue is, the website only returns a direct download link, no preview. A lot like <a href=\"https://repo.pw.edu.pl/docstore/download/WUT063b82396cca4d13bf98ebf5124401e8/Drozdziel.pdf\" rel=\"nofollow noreferrer\">this link</a> (but instead mine is a BMP not a PDF)</p>\n\n<p>There's no preview, just an immediate download.</p>\n\n<p>There doesn't appear to be a way to generate a different link, and I don't know how to handle this url with rails! I just need to save it to my project/local file tree. Any ideas?</p>\n"}, {"tags": ["arrays", "ruby", "string", "substring"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1548191386, "post_id": 54316267, "comment_id": 95452847, "body": "If you have a solution, please include that in your question. There&#39;s no point in us trying to re-invent what you&#39;ve already done, we can build on your existing work."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1548194206, "post_id": 54316267, "comment_id": 95453973, "body": "Suppose <code>arr1 = [&#39;ab&#39;]</code> and <code>arr2 = [&#39;b&#39;, &#39;a&#39;]</code>. What is the desired return value and why?"}, {"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1548210292, "post_id": 54316267, "comment_id": 95457996, "body": "ruby is obviously not good at something like this. you should consider full-text search feature in redis. <a href=\"https://github.com/vruizext/redisearch-rb\" rel=\"nofollow noreferrer\">github.com/vruizext/redisearch-rb</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548220924, "post_id": 54316267, "comment_id": 95460125, "body": "The word &quot;subset&quot; implies that you are mentioning about <code>arr1</code> being a subset of <code>arr2</code>. Are you actually trying to mean &quot;substring&quot;?"}, {"owner": {"reputation": 172, "user_id": 1389297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a01a118cb2582c77316ee026d36540?s=128&d=identicon&r=PG", "display_name": "Ali Akbar", "link": "https://stackoverflow.com/users/1389297/ali-akbar"}, "edited": false, "score": 0, "creation_date": 1548917582, "post_id": 54316267, "comment_id": 95717879, "body": "am i missing something? why the negative votes?"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1548192075, "last_edit_date": 1548192075, "creation_date": 1548191731, "answer_id": 54316551, "question_id": 54316267, "link": "https://stackoverflow.com/questions/54316267/array-of-substrings-in-array-of-strings/54316551#54316551", "title": "array of substrings in array of strings", "body": "<p>Due to overlapping terms you need to brute-force this as far as I can tell:</p>\n\n<pre><code>def matched(find, list)\n  list.flat_map { |e| find.flat_map { |f| e.scan(f) } }.uniq\nend\n</code></pre>\n\n<p>In practice:</p>\n\n<pre><code>matched(%w[ fire tree worm rest ], %w[ firestorm peanut earthworm ])\n# =&gt; [\"fire\", \"rest\", \"worm\"]\n</code></pre>\n\n<p>Where here <code>%w</code> is used as a quicker way of expressing lists.</p>\n\n<p>Here's an approximation using <code>scan</code> and <code>flat_map</code>:</p>\n\n<pre><code>def matched(find, list)\n  rx = Regexp.union(find)\n\n  list.flat_map { |e| e.scan(rx) }.uniq\nend\n</code></pre>\n\n<p>Where using <code>Rexexp.union</code> you can make a regular expression that runs fairly quickly compared to individual tests.</p>\n\n<p>Where it isn't as accurate:</p>\n\n<pre><code>matched(%w[ fire tree worm rest ], %w[ firestorm peanut earthworm ])\n# =&gt; [\"fire\", \"worm\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548226482, "post_id": 54318413, "comment_id": 95461954, "body": "Why do you need string interpolation in the second way?"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 2, "last_activity_date": 1548235435, "last_edit_date": 1548235435, "creation_date": 1548203550, "answer_id": 54318413, "question_id": 54316267, "link": "https://stackoverflow.com/questions/54316267/array-of-substrings-in-array-of-strings/54318413#54318413", "title": "array of substrings in array of strings", "body": "<p>Unfortunely we don't know your solution.</p>\n\n<p>But Array takes up more memory space than String. So you can convert it.</p>\n\n<pre><code>arr1 = [\"firestorm\", \"peanut\", \"earthworm\"]\narr2 = [\"fire\", \"tree\", \"worm\", \"rest\"]\n\narr1 = arr1.join(',')\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>res = arr2.select { |word| arr1.include?(word) } #=&gt; [\"fire\", \"worm\", \"rest\"]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>res = arr2.select { |word| arr1.match?(word) } #=&gt; [\"fire\", \"worm\", \"rest\"]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>res = arr2.select { |word| arr1.match(word) } #=&gt; [\"fire\", \"worm\", \"rest\"]\n</code></pre>\n"}], "owner": {"reputation": 172, "user_id": 1389297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a01a118cb2582c77316ee026d36540?s=128&d=identicon&r=PG", "display_name": "Ali Akbar", "link": "https://stackoverflow.com/users/1389297/ali-akbar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1548304985, "creation_date": 1548190312, "last_edit_date": 1548304985, "question_id": 54316267, "link": "https://stackoverflow.com/questions/54316267/array-of-substrings-in-array-of-strings", "title": "array of substrings in array of strings", "body": "<p>I have two array of strings. Strings in one array might be the subset of string in other array. I need to find out which all strings in one array are the substrings of strings in the other array</p>\n\n<p>Example:</p>\n\n<pre><code>arr1 = [\"firestorm\", \"peanut\", \"earthworm\"]\narr2 = [\"fire\", \"tree\", \"worm\", \"rest\"]\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>res = [\"fire\",\"worm\", \"rest\"]\n</code></pre>\n\n<p>My solution is mentioned below. But it takes a lot of time. I have to process Thousands of words.</p>\n\n<p>Solution:</p>\n\n<pre><code>res =[]\narr1.each do |word1|\n  arr2.each do |word2|\n   if word1.include? word2\n     res &lt;&lt; word2\n   end\n  end\nend\n</code></pre>\n\n<p>Please suggest me the faster way to to do this</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 3, "creation_date": 1548188035, "post_id": 54315712, "comment_id": 95451441, "body": "It&#39;s probably better to make helper methods and call those from the tests"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2894427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83d31dc28c67007ce56ef033147480a2?s=128&d=identicon&r=PG", "display_name": "chief", "link": "https://stackoverflow.com/users/2894427/chief"}, "is_accepted": false, "score": 0, "last_activity_date": 1548234241, "creation_date": 1548234241, "answer_id": 54323490, "question_id": 54315712, "link": "https://stackoverflow.com/questions/54315712/run-a-spec-from-another-spec/54323490#54323490", "title": "Run a spec from another spec?", "body": "<p>I prefer to group those behaviors in a module and include it in my features specs.</p>\n\n<p>In your case, I would create a <code>spec/features/common.rb</code> module </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># frozen_string_literal: true\n\nmodule Features\n  module Common\n    def submit_new_deal\n      # visit 'new' page\n      # use capybara to fill out lots of form fields and hit submit\n    end\nend\n\n</code></pre>\n\n<p>and include it in <code>spec/rails_helper.rb</code> like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code> # Include common functionality for features\n config.include Features::Common, type: :feature\n\n</code></pre>\n\n<p>Finally reuse it in feature specs:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>it \"creates a new deal\"\n  submit_new_deal\n  # test all the values of the created Deal object\nend\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 5874589, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t59Vvz9Din4/AAAAAAAAAAI/AAAAAAAAACw/3tjI7v3qOLg/photo.jpg?sz=128", "display_name": "Mateus", "link": "https://stackoverflow.com/users/5874589/mateus"}, "is_accepted": false, "score": 1, "last_activity_date": 1548244558, "creation_date": 1548244558, "answer_id": 54326729, "question_id": 54315712, "link": "https://stackoverflow.com/questions/54315712/run-a-spec-from-another-spec/54326729#54326729", "title": "Run a spec from another spec?", "body": "<p>You could also use shared examples in your specs to reuse it. </p>\n\n<pre><code>Rspec.shared_examples \"submits a new deal\" do |needed_params| \n  # visit 'new' page\n  # use capybara to fill out lots of form fields and hit submit\n\n  it \"has the correct values\" do \n    # test all the values of the created Deal object \n  end\nend\n</code></pre>\n\n<p>And in your code, you can reuse it in a nested context like:</p>\n\n<pre><code>it_behaves_like \"submits a new deal\", \"params1\"\n</code></pre>\n\n<p>or include it in the current context using:</p>\n\n<pre><code>include_examples \"submits a new deal\", \"params\"\n</code></pre>\n\n<p>See: <a href=\"https://relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples\" rel=\"nofollow noreferrer\">https://relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples</a></p>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1548256446, "last_edit_date": 1548256446, "creation_date": 1548256078, "answer_id": 54330206, "question_id": 54315712, "link": "https://stackoverflow.com/questions/54315712/run-a-spec-from-another-spec/54330206#54330206", "title": "Run a spec from another spec?", "body": "<blockquote>\n  <p>I want my next spec to test that it \"redirects to the show page for\n  the newly created deal\", and I'd love if it could just pick up where\n  the last spec left off and test the current_path.</p>\n</blockquote>\n\n<p>You can use <a href=\"https://relishapp.com/rspec/rspec-core/docs/example-groups/shared-context\" rel=\"nofollow noreferrer\">shared contexts</a> to share setup steps, let blocks etc.</p>\n\n<pre><code>RSpec.shared_context \"authenticated\" do\n  let(:user){ create(:user) }\n  before do\n    login_as(user, scope: :user)\n  end\nend\n</code></pre>\n\n<p>You can also use <a href=\"https://relishapp.com/rspec/rspec-core/v/3-8/docs/example-groups/shared-examples\" rel=\"nofollow noreferrer\">shared examples</a> if you need to test for the same behaviour in multiple cases. </p>\n\n<pre><code>RSpec.shared_examples \"requires authentication\" do\n  before { do_request }\n  it \"redirects the user to the login page\" do\n     expect(response).to redirect_to('/login')\n  end\nend\n</code></pre>\n\n<p>However running the same specs just to setup the state for tests is going to be a quite slow solution. Test once and then use factories / stubs to setup the dependencies for later tests.</p>\n"}], "owner": {"reputation": 6375, "user_id": 6826164, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-CKThqFqe5Eo/AAAAAAAAAAI/AAAAAAAAP10/ih0uh1YgT_I/photo.jpg?sz=128", "display_name": "Jonathan Tuzman", "link": "https://stackoverflow.com/users/6826164/jonathan-tuzman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1548256446, "creation_date": 1548187645, "question_id": 54315712, "link": "https://stackoverflow.com/questions/54315712/run-a-spec-from-another-spec", "title": "Run a spec from another spec?", "body": "<p>I have a spec like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>it \"creates a new deal\"\n  # visit 'new' page\n  # use capybara to fill out lots of form fields and hit submit\n  # test all the values of the created Deal object\nend\n</code></pre>\n\n<p>I want my next spec to test that <code>it \"redirects to the show page for the newly created deal\"</code>, and I'd love if it could just pick up where the last spec left off and test the <code>current_path</code>. </p>\n\n<p>Is there a way to say \"run this other spec and then add these expectations to it\"? Rather than pasting in all the directions from the other spec.</p>\n"}, {"tags": ["ruby", "readline", "irb"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1548195015, "last_edit_date": 1548195015, "creation_date": 1548184978, "answer_id": 54315088, "question_id": 54314414, "link": "https://stackoverflow.com/questions/54314414/irb-not-loading-library-libreadline/54315088#54315088", "title": "IRB not loading library libreadline", "body": "<p>You may have upgraded something that replaced the <code>readline</code> library and it's now necessary to rebuild your Ruby. This sort of thing happens infrequently with <a href=\"https://brew.sh\" rel=\"nofollow noreferrer\">Homebrew</a> when you run <code>brew clean</code> and it deletes an obsolete version of a dependency, not realizing one of your Ruby builds depends on it. This is because Rbenv has no way of communicating to Homebrew that it still needs that library.</p>\n\n<p>This is usually easy to fix. Try:</p>\n\n<pre><code>rbenv install 2.4.2\n</code></pre>\n\n<p>You might also want to take the time to update to the latest version which is, as of today, 2.5.3.</p>\n"}], "owner": {"reputation": 619, "user_id": 4465803, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/efb00ec60acadab7e2073bb987c9dbab?s=128&d=identicon&r=PG&f=1", "display_name": "Asif", "link": "https://stackoverflow.com/users/4465803/asif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 54315088, "answer_count": 1, "score": 1, "last_activity_date": 1548195015, "creation_date": 1548181722, "question_id": 54314414, "link": "https://stackoverflow.com/questions/54314414/irb-not-loading-library-libreadline", "title": "IRB not loading library libreadline", "body": "<p>Tried to get into <code>irb</code> but suddenly started receiving this error. Tried reinstalling brew readline and relinking, but no luck. Any suggestions?</p>\n\n<pre><code>/Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require': dlopen(/Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/x86_64-darwin17/readline.bundle, 9): Library not loaded: /usr/local/opt/readline/lib/libreadline.7.dylib (LoadError)\n  Referenced from: /Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/x86_64-darwin17/readline.bundle\n  Reason: image not found - /Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/x86_64-darwin17/readline.bundle\n    from /Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/irb/ext/save-history.rb:12:in `&lt;top (required)&gt;'\n    from /Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/irb/extend-command.rb:243:in `save_history='\n    from /Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/irb/context.rb:92:in `initialize'\n    from /Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/irb.rb:412:in `new'\n    from /Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/irb.rb:412:in `initialize'\n    from /Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/irb.rb:383:in `new'\n    from /Users/asahmed/.rbenv/versions/2.4.2/lib/ruby/2.4.0/irb.rb:383:in `start'\n    from /Users/asahmed/.rbenv/versions/2.4.2/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "string-formatting"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1548184020, "post_id": 54314218, "comment_id": 95449695, "body": "Please include a code snippet"}, {"owner": {"reputation": 1, "user_id": 5062211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d677d8e8e02b6c7e4b5939ff6e90131?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Wolfe", "link": "https://stackoverflow.com/users/5062211/josh-wolfe"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1548187500, "post_id": 54314218, "comment_id": 95451202, "body": "Ok! I&#39;ve went ahead and added it inline for you. I&#39;m sorry that it took me so long to respond. For some reason I didn&#39;t receive an email update of your comment! @SaraTibbetts"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1548189721, "post_id": 54314218, "comment_id": 95452147, "body": "Questions that do not ask for a solution to a concrete programming problem are off-topic on <a href=\"https://stackoverflow.com\">Stack Overflow</a>. However, our sister site <a href=\"https://codereview.stackexchange.com\">Code Review</a>, was specifically created for questions like this. But please, do make sure that you read their tour, FAQ, on-topic, and off-topic pages (linked on the bottom of the page) before you post. Also, just like on <a href=\"https://stackoverflow.com\">Stack Overflow</a> and any other site in the Stack Exchange network, all relevant information (in this case your code) must be part of the question, not hidden behind external links."}, {"owner": {"reputation": 1, "user_id": 5062211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d677d8e8e02b6c7e4b5939ff6e90131?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Wolfe", "link": "https://stackoverflow.com/users/5062211/josh-wolfe"}, "edited": false, "score": 0, "creation_date": 1548252525, "post_id": 54314218, "comment_id": 95476118, "body": "Thank you kindly. I&#39;ve been using SO for years, but this is my first post. I will close this issue, if possible, and move it over there! Thank you for your patience."}], "owner": {"reputation": 1, "user_id": 5062211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d677d8e8e02b6c7e4b5939ff6e90131?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Wolfe", "link": "https://stackoverflow.com/users/5062211/josh-wolfe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548221325, "creation_date": 1548180848, "last_edit_date": 1548221325, "question_id": 54314218, "link": "https://stackoverflow.com/questions/54314218/scripting-speed-test-for-formatting-a-string", "title": "Scripting speed test for formatting a string", "body": "<p>I am formatting a phone number, and there can be no single digit after a dash, i.e. <code>123-555-5555</code> or <code>12-34</code>, but not <code>123-4</code>. There can also be any alpha characters in the answer.</p>\n\n<p><a href=\"https://github.com/JLWolfe1990/puzzles/blob/master/phone_fun.rb\" rel=\"nofollow noreferrer\">Here</a> is my answer.</p>\n\n<pre><code>class CodeTestException &lt; Exception; end\n\n# driver method\ndef phone_format(s)\n  string = s.to_s.gsub(/[^0-9]/, '') # force input to string\n  string_length = string.length\n\n  # ensure that the return type stays consistent and make sure that there isn't\n  # one digit by itself as specified by the API\n  return string unless string_length &gt; 2\n\n  format_phone_string(string, string_length)\nend\n\nprivate\n\ndef format_phone_string(string, string_length)\n  formatted_string = \"\"\n  early_dash = string_length % 3 == 1\n  skip_dash = false\n\n  # start index at 1 for easier comprehension\n  i = 0\n\n  string.each_char do |char|\n    formatted_string &lt;&lt; char\n    break if i == string_length\n\n    i += 1\n\n    formatted_string &lt;&lt; '-' &amp;&amp; skip_dash = true if early_dash &amp;&amp; (i == string_length - 2)\n\n    formatted_string &lt;&lt; '-' if i % 3 == 0 &amp;&amp; !skip_dash\n  end\n\n  formatted_string\nend\n\nraise CodeTestException unless phone_format(\"(+1) 888 33x19\") == \"188-833-19\"\nraise CodeTestException unless phone_format(\"555 123 1234\") == \"555-123-12-34\"\nraise CodeTestException unless phone_format(\"(+1)\") == '1'\nraise CodeTestException unless phone_format(nil) == \"\"\nraise CodeTestException unless phone_format(\"\") == \"\"\n</code></pre>\n\n<p>I was told that the answer was not recursion, or scan. I believe <code>O(n)</code> is the best time that I can make. Some other solutions that I found was a higher multiple of linear time. Can anyone beat my solution?</p>\n"}, {"tags": ["ruby", "github-api", "octokit"], "answers": [{"tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": false, "score": 0, "last_activity_date": 1548177154, "creation_date": 1548177154, "answer_id": 54313291, "question_id": 54312516, "link": "https://stackoverflow.com/questions/54312516/github-api-ruby-octokit-why-does-octokit-report-5056-total-count-but-querying-b/54313291#54313291", "title": "Github API/Ruby/Octokit: Why does Octokit report 5056 total count but querying by GET request returns 1223281?", "body": "<p>If you open the url without any additional parameter, you are querying while being anonymous. </p>\n\n<p>On the other side, if you have followed the instructions <a href=\"https://github.com/octokit/octokit.rb#authentication\" rel=\"nofollow noreferrer\">here</a> to authenticate yourself, the total count is over your own user limits.</p>\n"}], "owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548177154, "creation_date": 1548174410, "last_edit_date": 1548174953, "question_id": 54312516, "link": "https://stackoverflow.com/questions/54312516/github-api-ruby-octokit-why-does-octokit-report-5056-total-count-but-querying-b", "title": "Github API/Ruby/Octokit: Why does Octokit report 5056 total count but querying by GET request returns 1223281?", "body": "<p>I've been playing about with Octokit to search for open issues.</p>\n\n<p>I've used the following to search for open Ruby issues:</p>\n\n<pre><code>client.search_issues({ language: 'ruby', state: 'open' })\n</code></pre>\n\n<p>The response includes:</p>\n\n<pre><code>:total_count=&gt;5056\n</code></pre>\n\n<p>However, when I query GH without using the Ruby wrapper:</p>\n\n<pre><code>res = open('https://api.github.com/search/issues?q=language:ruby+state:open')\nJSON.parse res.read\n</code></pre>\n\n<p>The count is different:</p>\n\n<pre><code>\"total_count\"=&gt;1223280\n</code></pre>\n\n<p>Why is this so? Why does one method result in a larger count than the other?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 5495614, "user_type": "registered", "profile_image": "https://graph.facebook.com/995148520508698/picture?type=large", "display_name": "Michel Fernandes", "link": "https://stackoverflow.com/users/5495614/michel-fernandes"}, "edited": false, "score": 0, "creation_date": 1548237721, "post_id": 54312468, "comment_id": 95467751, "body": "Thank you. Could you share what code style the community usually uses? Nested ou flattened? It seems the flattened is not that bad."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 83, "user_id": 5495614, "user_type": "registered", "profile_image": "https://graph.facebook.com/995148520508698/picture?type=large", "display_name": "Michel Fernandes", "link": "https://stackoverflow.com/users/5495614/michel-fernandes"}, "edited": false, "score": 0, "creation_date": 1548238521, "post_id": 54312468, "comment_id": 95468243, "body": "It&#39;s rather nested, because of issues described in this thread: <a href=\"https://stackoverflow.com/questions/54257918/improve-readability-of-object-name-in-rails/54258010#54258010\" title=\"improve readability of object name in rails\">stackoverflow.com/questions/54257918/&hellip;</a>"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 3, "last_activity_date": 1548174229, "creation_date": 1548174229, "answer_id": 54312468, "question_id": 54312439, "link": "https://stackoverflow.com/questions/54312439/code-style-ruby-style-classandmodulechildren/54312468#54312468", "title": "Code Style Ruby Style/ClassAndModuleChildren", "body": "<p>Use explicit module nesting:</p>\n\n<pre><code>module Api\n  module V1\n    class UsersController &lt; ApplicationController\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5495614, "user_type": "registered", "profile_image": "https://graph.facebook.com/995148520508698/picture?type=large", "display_name": "Michel Fernandes", "link": "https://stackoverflow.com/users/5495614/michel-fernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 54312468, "answer_count": 1, "score": 1, "last_activity_date": 1548221518, "creation_date": 1548174152, "last_edit_date": 1548221518, "question_id": 54312439, "link": "https://stackoverflow.com/questions/54312439/code-style-ruby-style-classandmodulechildren", "title": "Code Style Ruby Style/ClassAndModuleChildren", "body": "<p>I'm trying to follow Ruby code styles, and I got a warning regarding \"Code Style Ruby Style/ClassAndModuleChildren\" for this declaration:</p>\n\n<pre><code>class Api::V1::UsersController &lt; ApplicationController\n</code></pre>\n\n<p>How can I unbundle that? Checking with <a href=\"https://rubocop.readthedocs.io/en/latest/cops_style/#styleclassandmodulechildren\" rel=\"nofollow noreferrer\">Rubocop (VSCode Extension)</a>, I could not identify.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "slim-lang"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 10192484, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JvZCXCg8noI/AAAAAAAAAAI/AAAAAAAAAAs/vofhCY8M0MQ/photo.jpg?sz=128", "display_name": "Pandation", "link": "https://stackoverflow.com/users/10192484/pandation"}, "edited": false, "score": 0, "creation_date": 1548190909, "post_id": 54312398, "comment_id": 95452656, "body": "Thanks, but where exactly should <code>a[href=provider_link_href id=provider_link_id]   Text of the link</code> be used/specified?  I tried to edit my _customer_view.html.slim file to add code as you described. But that alone doesn&#39;t work. Also in my case the Text of the link is <code>@provider_user.name</code>, which should be user(provider) name."}], "tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": false, "score": 1, "last_activity_date": 1548173998, "creation_date": 1548173998, "answer_id": 54312398, "question_id": 54311095, "link": "https://stackoverflow.com/questions/54311095/creating-href-in-ruby-using-html-slim/54312398#54312398", "title": "Creating href in ruby using html slim", "body": "<p>You can't mix up slim element syntax (the one with square brackets, used by slim itself to create attributes of an element) with ruby code (the arguments to <code>render</code>, it's just a plain ruby method call!)</p>\n\n<p>Maybe this would work for you, or some adaptation:</p>\n\n<pre><code>= render partial: 'services/partials/messages/original_message', \n         locals: { \n           header: t('html.text.consultation_with.for_provider', \n           name: @provider_user.name,\n           provider_link_href: provider_path(provider),\n           provider_link_id: \"provider-#{provider.id}\",\n           type: t(\"element_names.#{@service.service_type}\")),\n           ...\n         }\n</code></pre>\n\n<p>And then in the partial, use them like</p>\n\n<pre><code>a[href=provider_link_href id=provider_link_id]\n  Text of the link\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 10192484, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JvZCXCg8noI/AAAAAAAAAAI/AAAAAAAAAAs/vofhCY8M0MQ/photo.jpg?sz=128", "display_name": "Pandation", "link": "https://stackoverflow.com/users/10192484/pandation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548301201, "creation_date": 1548169508, "last_edit_date": 1548301201, "question_id": 54311095, "link": "https://stackoverflow.com/questions/54311095/creating-href-in-ruby-using-html-slim", "title": "Creating href in ruby using html slim", "body": "<p>I am trying to create a href to link user(provider) name with user(provider) account view.</p>\n\n<p>I am far from expert in this - tried to copy a part of script from other place in the code where it refers to user(provider) account.</p>\n\n<p>The place where I am trying to add link is:</p>\n\n<p><code>= render partial: 'services/partials/messages/original_message', locals: { header: t('html.text.consultation_with.for_provider', name: @provider_user.name, type: t(\"element_names.#{@service.service_type}\")),...</code></p>\n\n<p>and the the part of script which was used to refer to user(provider) account looks like this: </p>\n\n<p><code>[href=\"#{provider_path(provider)}\" id=\"provider-#{provider.id}\"]</code> </p>\n\n<p>So I tried combining those two: </p>\n\n<p><code>= render partial: 'services/partials/messages/original_message', locals: { header: t('html.text.consultation_with.for_provider', name: [href=\"#{provider_path(provider)}\" id=\"provider-#{provider.id}\"], type: t(\"element_names.#{@service.service_type}\")),...</code></p>\n\n<p>And was not surprised that it did not worked.. </p>\n"}, {"tags": ["ruby", "methods", "arguments"], "comments": [{"owner": {"reputation": 151, "user_id": 10300774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ef14d6017f71e09f2886cd6a4de559?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/10300774/jules"}, "edited": false, "score": 0, "creation_date": 1548171004, "post_id": 54310354, "comment_id": 95443004, "body": "Found the issue: I wasn&#39;t calling the method with any arguments."}], "answers": [{"tags": [], "owner": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "is_accepted": false, "score": 0, "last_activity_date": 1548167647, "creation_date": 1548167647, "answer_id": 54310543, "question_id": 54310354, "link": "https://stackoverflow.com/questions/54310354/passing-an-array-as-an-argument-to-a-method-either-results-in-a-0-for-1-error-o/54310543#54310543", "title": "Passing an array as an argument to a method either results in a 0 for 1 error, or a blank array", "body": "<p>The problem is called <em>variable scope</em>. When you are accessing variable <code>hand</code> inside of score method, you are accessing local variable, which was passed as an argument. But you are want to access class variable <code>hand</code>. </p>\n\n<p>You can call <code>self.hand</code> when accessing it (I do not recommend, because, this make your code even more smell.), or refactor the method score to return the array of scores and handle it outside of the method. </p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1548189764, "post_id": 54310880, "comment_id": 95452162, "body": "Perhaps <code>sum</code> (new in v2.4) in place of <code>reduce(0, &amp;:+)</code> (which could be just <code>reduce(:+)</code> (note no <code>&amp;</code>). Alternatively, <code>hand.sum { |card| VALUES[card] }</code>."}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548355724, "post_id": 54310880, "comment_id": 95522100, "body": "<code>reduce</code> without initial accumulator won\u2019t work if the array is empty. (<code>sum</code> would work fine)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548357375, "post_id": 54310880, "comment_id": 95522805, "body": "Good point, though <code>reduce(0, :+)</code> is sufficient. Wait a minute. How could you have a hand with no cards in Blackjack?"}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548366062, "post_id": 54310880, "comment_id": 95526582, "body": "I find that the \u201cin this case it couldn\u2019t happen\u201d reason very faulty. Even in this case, you could have an automated evaluator that checks all hands, and making an empty hand a special case is not a good approach. Moreover I have seen too many cases of reduce applied with no initial accumulator, that Gail because the programmer did not think about the empty case. Better safe than sorry"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1548367984, "post_id": 54310880, "comment_id": 95527332, "body": "The counter-argument is that if the array should not be empty an exception should be raised if it is empty."}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548369390, "post_id": 54310880, "comment_id": 95527801, "body": "Indeed, but in my opinion these are two separate concepts. Getting used to an explicit accumulator helps to understand the concept of reduction per se, and using a block instead of symbol makes apparent its actual behavior. Then when you implement blackjack, you can put boundary conditions and validations, without changing your usage of core code on a case by case basis."}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548369435, "post_id": 54310880, "comment_id": 95527815, "body": "In the end it\u2019s mostly a matter of taste. Of the writer, of the reviewer and of the team."}], "tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": false, "score": 3, "last_activity_date": 1548168780, "creation_date": 1548168780, "answer_id": 54310880, "question_id": 54310354, "link": "https://stackoverflow.com/questions/54310354/passing-an-array-as-an-argument-to-a-method-either-results-in-a-0-for-1-error-o/54310880#54310880", "title": "Passing an array as an argument to a method either results in a 0 for 1 error, or a blank array", "body": "<p>The issue might come from modifying the array - indeed the <code>hand</code> array is mutable so when you reassign values in the line <code>hand[i] = values[hand[i]]</code>, you end up destroying the original hand. A subsequent call to the same <code>score</code> method will not work anymore.</p>\n\n<p>You should not mutate it but just iterate on it:</p>\n\n<pre><code>VALUES = {\n  'two' =&gt; 2,\n  ...\n}\n\ndef score(hand)\n  VALUES.values_at(*hand).reduce(0, &amp;:+)\nend\n\ndef busted?(score)\n  score &gt; 21\nend\n\ndef print_score(score)\n  puts \"You #{busted?(score) ? 'busted with' : 'scored'}: #{score}\"\nend\n\ndef random_card\n  VALUES.keys.sample\nend\n\nhand = Array.new(4) { random_card }\n# =&gt; [\"four\", \"queen\", \"ace\", \"seven\"]\n\nyour_score = score(hand)\n# =&gt; 32\n\nprint_score(your_score)\n# \"You busted with: 32\"\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 10300774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ef14d6017f71e09f2886cd6a4de559?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/10300774/jules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548226036, "creation_date": 1548167050, "last_edit_date": 1548226036, "question_id": 54310354, "link": "https://stackoverflow.com/questions/54310354/passing-an-array-as-an-argument-to-a-method-either-results-in-a-0-for-1-error-o", "title": "Passing an array as an argument to a method either results in a 0 for 1 error, or a blank array", "body": "<p>I'm testing a single-player blackjack program. I've made a <code>score</code> method that converts card names into integers, and then returns the total score from the <code>hand</code> array.</p>\n\n<pre><code>def random_card\n  cards = [\"two\", \"three\", \"four\", \"five\", \"six\", \"seven\",\n           \"eight\", \"nine\", \"ten\",\n           \"jack\", \"queen\", \"king\", \"ace\"]\n\n  cards[rand(13)]\nend\n\nhand = [\"four\", \"queen\", \"ace\", \"seven\"]\n\ndef score(hand)\n  values = {\n    \"two\" =&gt; 2,\n    \"three\" =&gt; 3,\n    \"four\" =&gt; 4,\n    \"five\" =&gt; 5,\n    \"six\" =&gt; 6,\n    \"seven\" =&gt; 7,\n    \"eight\" =&gt; 8,\n    \"nine\" =&gt; 9,\n    \"ten\" =&gt; 10,\n    \"jack\" =&gt; 10,\n    \"queen\" =&gt; 10,\n    \"king\" =&gt; 10,\n    \"ace\" =&gt; 11\n  }\n\n  p hand\n\n  final_score = 0\n  i = 0\n\n  while i &lt; hand.length\n    hand[i] = values[hand[i]]\n    i += 1\n  end\n\n  hand.each do |card|\n    final_score += card\n  end\n  if final_score &lt;= 21\n    puts \"You scored: \" + final_score.to_s\n  else\n    puts \"You busted with: \" + final_score.to_s\n  end\nend\n</code></pre>\n\n<p>The issue is passing the array to the method; it works when it's local, but passing the array as an argument either gives a 0 for 1 <strong>ArgumentError</strong>, or if I use the splat op, a blank array.</p>\n\n<p><code>hand</code> needs to be global so that the other methods can access it, like the <code>random_card</code> method that will eventually generate the hand.</p>\n\n<p>When <code>hand</code> is inside <code>score</code>, <code>p hand</code> shows the full array, and the score is <code>32</code>. Where it is, a blank array is shown and the score is <code>0</code>.</p>\n\n<p>How do I pass the array and keep the stored values?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "httparty"], "comments": [{"owner": {"reputation": 111, "user_id": 3927485, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4ac670f8705e4fb8f9651f0b6b7cae57?s=128&d=identicon&r=PG", "display_name": "Vlatko Ristovski", "link": "https://stackoverflow.com/users/3927485/vlatko-ristovski"}, "edited": false, "score": 0, "creation_date": 1548165200, "post_id": 54309285, "comment_id": 95439183, "body": "what is the purpose of the statement <code>include Api</code> in <code>ResultsController</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10410465"}, "reply_to_user": {"reputation": 111, "user_id": 3927485, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4ac670f8705e4fb8f9651f0b6b7cae57?s=128&d=identicon&r=PG", "display_name": "Vlatko Ristovski", "link": "https://stackoverflow.com/users/3927485/vlatko-ristovski"}, "edited": false, "score": 0, "creation_date": 1548165479, "post_id": 54309285, "comment_id": 95439369, "body": "Yeah, it&#39;s not actually necessary now that I look at it"}, {"owner": {"reputation": 111, "user_id": 3927485, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4ac670f8705e4fb8f9651f0b6b7cae57?s=128&d=identicon&r=PG", "display_name": "Vlatko Ristovski", "link": "https://stackoverflow.com/users/3927485/vlatko-ristovski"}, "edited": false, "score": 0, "creation_date": 1548165728, "post_id": 54309285, "comment_id": 95439526, "body": "There is where your error lies actually. <code>Api</code> is not a module to include it, and it needs to be under <code>app&#47;services&#47;api.rb</code> ( keep in mind, Ruby files have a convention of naming with lower case underscore names ) so Rails can autoload it."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10410465"}, "edited": false, "score": 0, "creation_date": 1548170427, "post_id": 54309920, "comment_id": 95442645, "body": "thanks very much :) That&#39;s solved the error problem. What format should be returned if I call <code>@results</code> in my view? I&#39;m getting lots of html and css rather than the search results of the query."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 1, "creation_date": 1548171724, "post_id": 54309920, "comment_id": 95443475, "body": "Feel free to accept the answer if it helped :) Your API should be able to return search results in JSON format. Check the documentation for api, maybe you need <code>get(&quot;&#47;results.json&quot;, query: { q: name })</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10410465"}, "edited": false, "score": 0, "creation_date": 1548173520, "post_id": 54309920, "comment_id": 95444589, "body": "It doesn&#39;t seem to be returning json, just lots of html tags for the &quot;The page you were looking for doesn&#39;t exist (404)&quot; oage weirdly. Adding .json also didn&#39;t work and threw an error. There is no api documentation sadly :("}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1548177340, "post_id": 54309920, "comment_id": 95446676, "body": "Status 404 means that you&#39;re hitting the wrong url. I can try to help if you post the real API url"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1548179254, "post_id": 54309920, "comment_id": 95447561, "body": "It returns very nice <a href=\"http://search.spoonflower.com/searchv2/designs?utf8=%E2%9C%93&amp;q=rose&amp;lang=en&amp;availability=for_sale&amp;substrate=all&amp;sort=classic&amp;view=design&amp;offset=0&amp;limit=30&amp;color_family1=&amp;color_family2=&amp;commit=Search\" rel=\"nofollow noreferrer\">JSON</a>. Why do you try to hit &quot;/results&quot;? It should be &quot;/designs&quot; if <code>base_uri</code> is <a href=\"http://search.spoonflower.com/searchv2\" rel=\"nofollow noreferrer\">search.spoonflower.com/searchv2</a>"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1548179967, "post_id": 54309920, "comment_id": 95447893, "body": "@Steve, check the updated answer, looks like I understood, what you need :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10410465"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1548180012, "post_id": 54309920, "comment_id": 95447911, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/187138/discussion-between-steve-and-vasilisa\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": true, "score": 2, "last_activity_date": 1548179930, "last_edit_date": 1548179930, "creation_date": 1548165524, "answer_id": 54309920, "question_id": 54309285, "link": "https://stackoverflow.com/questions/54309285/how-do-i-interact-with-an-external-search-api-in-rails5-using-the-httparty-gem/54309920#54309920", "title": "How do I interact with an external search API in Rails5 using the HTTParty gem?", "body": "<p>You're almost right, just need some changes here. At first, rename <code>Api.rb</code> to <code>api.rb</code> - by convention, all files should be named in lower snake_case</p>\n\n<pre><code>class Api\n  include HTTParty\n  base_uri \"http://search.spoonflower.com/searchv2\"\n\n  def find(name)\n    self.class.get(\"/designs\", query: { q: name }).parsed_response\n  end\nend\n\nclass ResultsController &lt; ApplicationController    \n  def index\n    # here you get some json structure that you can display in the view\n    @results = Api.new.find('test')['results']\n  end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10410465"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 54309920, "answer_count": 1, "score": 2, "last_activity_date": 1548179930, "creation_date": 1548163424, "last_edit_date": 1548165049, "question_id": 54309285, "link": "https://stackoverflow.com/questions/54309285/how-do-i-interact-with-an-external-search-api-in-rails5-using-the-httparty-gem", "title": "How do I interact with an external search API in Rails5 using the HTTParty gem?", "body": "<p>How can I create an app in Rails that will let me input search parameters, which are then passed to an external API to perform the search, and then display those results in my app. I'm trying to use HTTParty to achieve this but I'm a bit lost. I've tried creating a class method in app/services and accessing it in my controller, and then calling the instance variable in my view. At the moment it's throwing a Routing Error <code>uninitialized constant ResultsController::Api</code>. Would be super grateful for some help.</p>\n\n<p>services/Api.rb</p>\n\n<pre><code>class Api\n  include HTTParty\n  base_uri \"search.example.com\"\n  attr_accessor :name\n\n  def initialize(name)\n    self.name = name\n  end\n\n  def self.find(name)\n    response = get(\"/results&amp;q=#{name}\")\n    self.new(response[\"name\"])\n  end\n</code></pre>\n\n<p>results_controller.rb</p>\n\n<pre><code>class ResultsController &lt; ApplicationController\n  include Api\n\n  def index\n    @results = Api.find('test')\n  end\nend\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :results\n  root 'results#index'\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1548165739, "post_id": 54308723, "comment_id": 95439530, "body": "If you have a flair for the obtuse one could also use <code>method(:next)[]</code> to enforce the method call or <code>instance_eval(&amp;:next)</code> to enforce the receiver. Usually one can even use empty parens (e.g. <code>next()</code>) to differentiate a method call from a local variable however this does not work with methods sharing a name with keywords."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 7, "last_activity_date": 1548161565, "creation_date": 1548161565, "answer_id": 54308723, "question_id": 54308569, "link": "https://stackoverflow.com/questions/54308569/why-does-the-next-method-in-ruby-raises-syntaxerror-while-next-or-self-nex/54308723#54308723", "title": "Why does the `next` method in Ruby raises SyntaxError while `next!` or `self.next` don&#39;t while monkey patching the String class?", "body": "<p>With your first two examples, the Ruby parser is certain that you are calling methods since the <code>next</code> keyword can't be used that way.</p>\n\n<p>With you third example, it looks like you are using <a href=\"http://ruby-doc.org/core/doc/syntax/control_expressions_rdoc.html#label-next+Statement\" rel=\"noreferrer\">the <code>next</code> keyword</a> instead of calling a method. The parser can't know at this stage that you actually mean to call a <code>next</code> method (which might or might not exist).</p>\n\n<p>Thus, you have to guide the parser to avoid these ambiguities. You can either use an explicit receiver as in your second example or use constructs such as <code>send(:next)</code> instead</p>\n"}], "owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 54308723, "answer_count": 1, "score": 3, "last_activity_date": 1548161565, "creation_date": 1548161005, "last_edit_date": 1548161554, "question_id": 54308569, "link": "https://stackoverflow.com/questions/54308569/why-does-the-next-method-in-ruby-raises-syntaxerror-while-next-or-self-nex", "title": "Why does the `next` method in Ruby raises SyntaxError while `next!` or `self.next` don&#39;t while monkey patching the String class?", "body": "<p>The following code works fine:</p>\n\n<pre><code>class String\n  def foo\n    next!\n  end\nend\n\nputs 'hh'.foo    # hi\n</code></pre>\n\n<p>This one also works fine:</p>\n\n<pre><code>class String\n  def foo\n    self.next\n  end\nend\n\nputs 'hh'.foo    # hi\n</code></pre>\n\n<p>But this one doesn't:</p>\n\n<pre><code>class String\n  def bar\n    next\n  end\nend\n\n# Invalid next (SyntaxError)\n</code></pre>\n\n<p>Why does Ruby use the <code>next</code> keyword here and raises SyntaxError even though I am working on <code>String</code> class?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1548158155, "post_id": 54307645, "comment_id": 95435120, "body": "<code>?#</code> is another way to write <code>&#39;#&#39;</code>. Just replace it in the above code and it should become clear what&#39;s going on, i.e. <code>?#&#39;a&#39;</code> \u2192 <code>&#39;#&#39;&#39;a&#39;</code>, <code>?..class</code> \u2192 <code>&#39;.&#39;.class</code>, <code>?11</code> \u2192 <code>&#39;1&#39;1</code> (although you get a syntax error before that) etc."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548158400, "post_id": 54307645, "comment_id": 95435255, "body": "I got it cleared, thanks!"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548179120, "post_id": 54307645, "comment_id": 95447507, "body": "@CarySwoveland thanks :) corrected!"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1548180940, "post_id": 54307645, "comment_id": 95448299, "body": "SymbolHound is your friend for this sort of thing: <a href=\"http://symbolhound.com/?q=ruby+%3Fc\" rel=\"nofollow noreferrer\">symbolhound.com/?q=ruby+%3Fc</a> (which of course works better when you know what you&#39;re looking for ;)."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1548207658, "post_id": 54307645, "comment_id": 95457458, "body": "@stefan maybe a bit pedantic, but <code>?#</code> is another way to write <code>?&quot;#&quot;</code> not <code>?&#39;#&#39;</code>; it makes a difference if you&#39;re to trying something like <code>puts ?\\t&#39;a&#39;</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1548235434, "post_id": 54307645, "comment_id": 95466293, "body": "@SimpleLime yes, you&#39;re absolutely right. My example was just for <code>#</code>, not for chars in general."}], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548158257, "post_id": 54307714, "comment_id": 95435170, "body": "Thank you very much, I did not go through this document, It gave explanation. I will accept this one after some time"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 5, "last_activity_date": 1548157900, "creation_date": 1548157900, "answer_id": 54307714, "question_id": 54307645, "link": "https://stackoverflow.com/questions/54307645/single-letter-string-representation-by/54307714#54307714", "title": "Single letter string representation by &#39;?&#39;", "body": "<blockquote>\n  <p>There is also a character literal notation to represent single character strings, which syntax is a question mark (?) followed by a single character or escape sequence that corresponds to a single codepoint in the script encoding:</p>\n</blockquote>\n\n<pre><code>?a       #=&gt; \"a\"\n?abc     #=&gt; SyntaxError\n?\\n      #=&gt; \"\\n\"\n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core-2.3.0/doc/syntax/literals_rdoc.html#label-Strings\" rel=\"noreferrer\">https://ruby-doc.org/core-2.3.0/doc/syntax/literals_rdoc.html#label-Strings</a></p>\n"}], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "closed_date": 1548180903, "accepted_answer_id": 54307714, "answer_count": 1, "score": 1, "last_activity_date": 1548179128, "creation_date": 1548157680, "last_edit_date": 1548179128, "question_id": 54307645, "link": "https://stackoverflow.com/questions/54307645/single-letter-string-representation-by", "closed_reason": "Duplicate", "title": "Single letter string representation by &#39;?&#39;", "body": "<p>I observed this in console and tried same in <code>irb</code>,</p>\n\n<pre><code>&gt; ?#'a'\n =&gt; \"#a\" \n\n&gt; ?#\n =&gt; \"#\" \n\n&gt; ??\n =&gt; \"?\" \n\n&gt; ?..class\n =&gt; String\n\n&gt; self.method('?')\n# NameError (undefined method `?' for class `#&lt;Class:#&lt;Object:0x08ce9188&gt;&gt;')\n</code></pre>\n\n<p>Above works for single character while does not work for the case below </p>\n\n<pre><code>&gt; ?1\n =&gt; \"1\" \n\n&gt; ?11\nTraceback (most recent call last):\n        1: from /home/prs/.rvm/rubies/ruby-2.5.3/bin/irb:11:in `&lt;main&gt;'\nSyntaxError ((irb):33: syntax error, unexpected '?')\n</code></pre>\n\n<p>I could not find any documentation for above and could not get actual purpose of such implementation.</p>\n\n<p>Please help me for proper explanation and where this can be effectively used (appreciated if example provided).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "login", "spree"], "owner": {"reputation": 63, "user_id": 10658300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6f164d3ffc4a040412c552ed693bc0?s=128&d=identicon&r=PG&f=1", "display_name": "pfc", "link": "https://stackoverflow.com/users/10658300/pfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1562432941, "creation_date": 1548156547, "question_id": 54307293, "link": "https://stackoverflow.com/questions/54307293/how-to-get-rid-of-default-spree-panel-in-login-page", "title": "How to get rid of default Spree panel in login page?", "body": "<p>I want to implement my own layout for login page(by using Spree), but I'm struggle with default panel which get everytime I want to login.</p>\n\n<p>I made _login.html.erb partial page in views/spree/shared, and try to override Spree with my own html but still i get \"Login as Existing Customer\" default panel above all my work. </p>\n\n<p>When inspect page to see from where it comes I get </p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n ::before\n  &lt;div class=\"row\" data-hook&gt;\n    ::before\n    &lt;div id=\"content\" class=\"col-sm-12\" data-hook&gt;\n\n      &lt;div class=\"col-md-6 \"&gt;\n        &lt;div class=\"panel panel-default\"&gt;\n          &lt;div class=\"panel-heading\"&gt;\n            &lt;h3 class=\"panel-title\"&gt;Login as Existing Customer&lt;/h3&gt;\n      &lt;/div&gt;\n\n      &lt;div id=\"existing-customer\" class=\"panel-body\" data- \n        hook=\"login\"&gt;\n\n          &lt;div class=\"text-center\"&gt;\n            or \n                &lt;a href=\"/signup\"&gt;Create a new account&lt;/a&gt; |\n                &lt;a href=\"/password/recover\"&gt;Forgot Password?&lt;/a&gt;\n          &lt;/div&gt;\n          &lt;div data-hook=\"login_extras\"&gt;&lt;/div&gt;\n       &lt;/div&gt;\n      &lt;/div&gt;\n     &lt;/div&gt;\n    &lt;/div&gt;\n\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I cannot find this html anywhere</p>\n\n<p>I'm using spree 3.0.0</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1548154654, "post_id": 54306647, "comment_id": 95433242, "body": "will you save this record later ?"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1548154694, "post_id": 54306647, "comment_id": 95433263, "body": "if no , directroly use  <code>@report.organizations.count + 1</code>"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548154864, "post_id": 54306647, "comment_id": 95433364, "body": "Do you get same error for rails-4 also?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548155038, "post_id": 54306647, "comment_id": 95433455, "body": "Why it shows like <code>#&lt;Organization::ActiveRecord_Relation</code> instead of    <code>Organization::ActiveRecord_Associations_CollectionProxy</code>"}, {"owner": {"reputation": 1171, "user_id": 1693541, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ae68b37d5edb59b31eb357554929c4d5?s=128&d=identicon&r=PG", "display_name": "Braham Shakti", "link": "https://stackoverflow.com/users/1693541/braham-shakti"}, "edited": false, "score": 0, "creation_date": 1548155377, "post_id": 54306647, "comment_id": 95433665, "body": "Not sure why may be in rails 5 it is like that only, also i didn&#39;t checked in rails 4 because I am upgrading from rails 3 to rails 5 directly :-)"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548156134, "post_id": 54306647, "comment_id": 95434101, "body": "Well, I had done this for big project but we did as <code>rails-3 -&gt; rails-4</code> first then <code>rails-4 -&gt; rails-5</code> to keep track."}, {"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1548171633, "post_id": 54306647, "comment_id": 95443411, "body": "check the answer here <a href=\"https://stackoverflow.com/questions/53891347/merge-record-into-activerecord-relation#comment94629803_53891347\" title=\"merge record into activerecord relation%23comment94629803_53891347\">stackoverflow.com/questions/53891347/&hellip;</a>, you&#39;ll also find the code in which this was removed."}], "answers": [{"comments": [{"owner": {"reputation": 1171, "user_id": 1693541, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ae68b37d5edb59b31eb357554929c4d5?s=128&d=identicon&r=PG", "display_name": "Braham Shakti", "link": "https://stackoverflow.com/users/1693541/braham-shakti"}, "edited": false, "score": 0, "creation_date": 1548154644, "post_id": 54306683, "comment_id": 95433236, "body": "for some reason, I don&#39;t want to create new organization instead I need to push new org in activerecord relation without creating"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 1171, "user_id": 1693541, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ae68b37d5edb59b31eb357554929c4d5?s=128&d=identicon&r=PG", "display_name": "Braham Shakti", "link": "https://stackoverflow.com/users/1693541/braham-shakti"}, "edited": false, "score": 0, "creation_date": 1548154703, "post_id": 54306683, "comment_id": 95433269, "body": "If the count was changed in Rails 4, you were effectively creating a new org"}, {"owner": {"reputation": 1171, "user_id": 1693541, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ae68b37d5edb59b31eb357554929c4d5?s=128&d=identicon&r=PG", "display_name": "Braham Shakti", "link": "https://stackoverflow.com/users/1693541/braham-shakti"}, "edited": false, "score": 0, "creation_date": 1548155723, "post_id": 54306683, "comment_id": 95433870, "body": "Since this is simply a class and not extended by activerecord base class, <code>organziations</code> is an attribute_reader in report class whose value is calculated by finding <code>org</code> from database."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 1, "last_activity_date": 1548154431, "creation_date": 1548154431, "answer_id": 54306683, "question_id": 54306647, "link": "https://stackoverflow.com/questions/54306647/how-to-push-an-object-into-activerecordrelation-in-rails-5/54306683#54306683", "title": "How to push an object into ActiveRecord::Relation in rails 5", "body": "<p>According to <a href=\"https://guides.rubyonrails.org/association_basics.html#has-many-association-reference\" rel=\"nofollow noreferrer\">the guide</a> it should work. If it doesn't, try using <code>create</code>:</p>\n\n<pre><code> @report.organizations.create\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "is_accepted": false, "score": 1, "last_activity_date": 1548158959, "creation_date": 1548158959, "answer_id": 54308018, "question_id": 54306647, "link": "https://stackoverflow.com/questions/54306647/how-to-push-an-object-into-activerecordrelation-in-rails-5/54308018#54308018", "title": "How to push an object into ActiveRecord::Relation in rails 5", "body": "<p>When you are using new definetly u need to save that variable \nFor example</p>\n\n<pre><code>organization=Organization.new\norganization.name = \"organization 1\"\norganization.description= \"Something description\"\norganization.save #save the array obj\nOrganization.count #1\n</code></pre>\n\n<p>else use create method to create the record Suddenly both are same</p>\n\n<pre><code>Organization.create(name:\"org2\",description: \"something\")\nOrganization.count #2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 280, "user_id": 743006, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PioeP.jpg?s=128&g=1", "display_name": "Abolfazl Mahmoodi", "link": "https://stackoverflow.com/users/743006/abolfazl-mahmoodi"}, "is_accepted": false, "score": 0, "last_activity_date": 1548159339, "creation_date": 1548159339, "answer_id": 54308131, "question_id": 54306647, "link": "https://stackoverflow.com/questions/54306647/how-to-push-an-object-into-activerecordrelation-in-rails-5/54308131#54308131", "title": "How to push an object into ActiveRecord::Relation in rails 5", "body": "<p>This works for me:</p>\n\n<pre><code>a=[]\na &lt;&lt; @report.organizations\na.count # =&gt; 1\na &lt;&lt; Organization.new\na.count # =&gt; 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 1837330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3356a344614799fb112770036504910?s=128&d=identicon&r=PG&f=1", "display_name": "claudioldf", "link": "https://stackoverflow.com/users/1837330/claudioldf"}, "is_accepted": false, "score": 0, "last_activity_date": 1619269475, "creation_date": 1619269475, "answer_id": 67243096, "question_id": 54306647, "link": "https://stackoverflow.com/questions/54306647/how-to-push-an-object-into-activerecordrelation-in-rails-5/67243096#67243096", "title": "How to push an object into ActiveRecord::Relation in rails 5", "body": "<p>What about this one:</p>\n<pre><code>@report_data = @report.organizations\n@report_data.count # =&gt; 1\n@report_data += [Organization.new]\n@report_data.count # =&gt; 2\n</code></pre>\n"}], "owner": {"reputation": 1171, "user_id": 1693541, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ae68b37d5edb59b31eb357554929c4d5?s=128&d=identicon&r=PG", "display_name": "Braham Shakti", "link": "https://stackoverflow.com/users/1693541/braham-shakti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1470, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1619269475, "creation_date": 1548154287, "last_edit_date": 1613056689, "question_id": 54306647, "link": "https://stackoverflow.com/questions/54306647/how-to-push-an-object-into-activerecordrelation-in-rails-5", "title": "How to push an object into ActiveRecord::Relation in rails 5", "body": "<p>I am stuck in weird situtaion, I am working on upgrading an existing rails 3 appliction to rails 5 app.</p>\n\n<p>Using rails 3, I have an object report which has many organizations</p>\n\n<pre><code>@report.organizations\n#&lt;ActiveRecord::Relation [#&lt;Organization id: 1, name: \"Org 1\", description: nil, created_at: \"2012-01-27\", updated_at: \"2019-01-15\"&gt;]&gt;\n@report.organizations.count    # 1\n</code></pre>\n\n<p>when I push a new org object into existing activerecord relation it gives me new activerecord relation including new org</p>\n\n<pre><code>@report.organizations&lt;&lt; Organization.new\n[#&lt;Organization id: 1, name: \"Org 1\", description: nil, created_at: \"2012-01-27\", updated_at: \"2019-01-15\"&gt;, #&lt;Organization id: nil, name: nil, description: nil, created_at: nil, updated_at: nil&gt;]\n# Getting count\n@report.organizations.count    # 2\n</code></pre>\n\n<p>Using rails 5, I am getting exception</p>\n\n<pre><code>@report.organizations &lt;&lt; Organization.new\n*** NoMethodError Exception: undefined method `&lt;&lt;' for #&lt;Organization::ActiveRecord_Relation:0x00007f93483e2640&gt;\n</code></pre>\n\n<p>and when I do like</p>\n\n<pre><code>@report.organizations.to_a &lt;&lt; Organization.new\n</code></pre>\n\n<p>it gives me</p>\n\n<pre><code>[#&lt;Organization id: 1, name: \"Org 1\", description: nil, created_at: \"2012-01-27\", updated_at: \"2019-01-15\"&gt;, #&lt;Organization id: nil, name: nil, description: nil, created_at: nil, updated_at: nil&gt;]\n</code></pre>\n\n<p>but count is stil 1 instead of two</p>\n\n<pre><code>@report.organizations.count    # 1\n</code></pre>\n\n<p>Hope my issue is clear to you, please help me how to fix this issue. Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "has-many", "belongs-to", "counter-cache"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1548155202, "creation_date": 1548155202, "answer_id": 54306919, "question_id": 54306399, "link": "https://stackoverflow.com/questions/54306399/starting-a-counter-cache-from-greater-than-0/54306919#54306919", "title": "Starting a counter cache from greater than 0", "body": "<p>You are probably looking for the <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/CounterCache/ClassMethods.html#method-i-reset_counters\" rel=\"nofollow noreferrer\"><code>reset_counters</code></a>. From the docs:</p>\n\n<blockquote>\n  <p>Resets one or more counter caches to their correct value using an SQL count query. This is useful when adding new counter caches, or if the counter has been corrupted or modified directly by SQL.</p>\n  \n  <p>Example:</p>\n\n<pre><code># For the Post with id #1, reset the comments_count\nPost.reset_counters(1, :comments)\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 690, "user_id": 2390233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f8cd867dfd775e56b1944f6f9af465bc?s=128&d=identicon&r=PG", "display_name": "ecki", "link": "https://stackoverflow.com/users/2390233/ecki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 54306919, "answer_count": 1, "score": 0, "last_activity_date": 1548155202, "creation_date": 1548153547, "question_id": 54306399, "link": "https://stackoverflow.com/questions/54306399/starting-a-counter-cache-from-greater-than-0", "title": "Starting a counter cache from greater than 0", "body": "<p>I have records that has_many objects. The objects have already been created with the record_id column prepopulated with a future record.id in mind. However when that future record is created, the counter cache always starts at 0. </p>\n\n<p>How can I make the counter cache start at the correct number of associated objects instead of zero?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 1, "creation_date": 1548150492, "post_id": 54305324, "comment_id": 95430594, "body": "Show your association between User and Role models"}, {"owner": {"reputation": 5, "user_id": 8702759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93da90363500268f49bce96e1befef6?s=128&d=identicon&r=PG&f=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/8702759/vijay"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1548150794, "post_id": 54305324, "comment_id": 95430792, "body": "In user model    belongs_to :Role, class_name: &quot;Role&quot;, foreign_key: :role_id"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548150839, "post_id": 54305324, "comment_id": 95430832, "body": "Did not you try by replacing <code>R</code> with <code>r</code> in your code?"}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "edited": false, "score": 0, "creation_date": 1548173006, "post_id": 54305324, "comment_id": 95444290, "body": "btw, yes, you should not use <code>Capital</code> case for method names, use <code>belongs_to :role</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548150737, "post_id": 54305372, "comment_id": 95430758, "body": "You should ask OP for data like schema and associations. Presumptions are not expected which will lead increasing numbers of such low quality questions on SO with lack of explanations."}, {"owner": {"reputation": 5, "user_id": 8702759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93da90363500268f49bce96e1befef6?s=128&d=identicon&r=PG&f=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/8702759/vijay"}, "edited": false, "score": 0, "creation_date": 1548151047, "post_id": 54305372, "comment_id": 95430996, "body": "in user model its  belongs_to :Role, class_name: &quot;Role&quot;, foreign_key: :role_id"}, {"owner": {"reputation": 5, "user_id": 8702759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93da90363500268f49bce96e1befef6?s=128&d=identicon&r=PG&f=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/8702759/vijay"}, "edited": false, "score": 0, "creation_date": 1548151195, "post_id": 54305372, "comment_id": 95431082, "body": "i have used select form  &lt;%= f.select(:role_id, Role.all.map{|e| [e.name, e.id]},{ :include_blank =&gt; &quot;Please select&quot; }, { class: &#39;form-control&#39; } ) %&gt;. I need to display the name attribute .how can i display that?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 5, "user_id": 8702759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93da90363500268f49bce96e1befef6?s=128&d=identicon&r=PG&f=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/8702759/vijay"}, "edited": false, "score": 0, "creation_date": 1548151659, "post_id": 54305372, "comment_id": 95431425, "body": "@Sneha User model should have <code>belongs_to :role</code> only, as class_name &amp; foreign_key are evaluated as what you were providing by convention."}], "tags": [], "owner": {"reputation": 610, "user_id": 7438993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7hbh.jpg?s=128&g=1", "display_name": "Krupa Suthar", "link": "https://stackoverflow.com/users/7438993/krupa-suthar"}, "is_accepted": false, "score": -1, "last_activity_date": 1548150367, "creation_date": 1548150367, "answer_id": 54305372, "question_id": 54305324, "link": "https://stackoverflow.com/questions/54305324/undefined-method-name-for-nilnilclass-while-accessing-attribute-name-in-a/54305372#54305372", "title": "undefined method `name&#39; for nil:NilClass, while accessing attribute &#39;name&#39; in a different model", "body": "<p>If your model has <code>has_one: :role</code> relationship with role then,\n<code>user.role.name</code> will return name of role</p>\n"}, {"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 1, "creation_date": 1548151536, "post_id": 54305595, "comment_id": 95431349, "body": "<code>user.role&amp;.name</code> is good choice for ruby upper version instead of using <code>try</code>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 1, "creation_date": 1548166175, "post_id": 54305595, "comment_id": 95439785, "body": "@ray nice catch and in this case appropriate. Although safe navigation (<code>&amp;.</code>) and <code>ActiveSupport::Tryable#try</code> are not the same thing and react very differently depending on the circumstances.<a href=\"https://repl.it/@engineersmnky/AStry-vs-and-Safe-Navigation\" rel=\"nofollow noreferrer\">AS#try vs Safe Navigation</a>"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1548166579, "post_id": 54305595, "comment_id": 95440073, "body": "@engineersmnky I did not know this so deep! Thanks for the brief info :) You nailed it with specs written!"}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1548167955, "post_id": 54305595, "comment_id": 95441012, "body": "@engineersmnky <code>.try</code> with block behaves as expected. See updated specs here (context &#39;#try with block&#39;) <a href=\"https://repl.it/@SaverioTrioni/HopefulSneakyYottabyte-1\" rel=\"nofollow noreferrer\">repl.it/@SaverioTrioni/HopefulSneakyYottabyte-1</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1548169553, "post_id": 54305595, "comment_id": 95442094, "body": "@rewritten lines 73-91 have no bearing on the spec since they are incorrect. line 78 shows <code>obj</code> should not receive <code>&amp;</code> which of course it wont becuase the only <code>&amp;</code> is <code>Symbol#to_proc</code> short hand and I have already shown that <code>try</code> will yield self to the block when the arity != 0. Test on line 84 only proves that <code>NilClass#try</code> returns <code>nil</code> without evaluation as proven in both <code>try</code> and <code>try!</code> specs. Safe Navigation is a construct; <code>try</code> is a method call. The only update I can agree with in this case is that <code>try</code> with a block does not handle <code>NoMethodError</code> (mostly because it uses <code>try!</code>)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1548170085, "post_id": 54305595, "comment_id": 95442419, "body": "Also line 74 is very misleading since you are not calling <code>try</code> with a method name; instead you are calling try with a <code>Proc</code> formed from a symbol that is implied to be a method name. e.g. <code>try(:name)</code> is how the rest of the spec defines &quot;with a method name&quot; and this is not the same as <code>try(&amp;:name)</code> which is a kin to <code>try { |a| a.name } </code>"}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "edited": false, "score": 0, "creation_date": 1548172672, "post_id": 54305595, "comment_id": 95444100, "body": "I agree that they are not the same, I just took your specs for <code>&amp;.</code> and converted them to <code>.try(&amp;blk)</code>. And of course they are not the same under the hood. But they exhibit the same exact behavior, which is what I was conveying in the original response. Actually I <i>never</i> use <code>try</code> with explicit argument exactly because its behavior with argument is very weird."}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "edited": false, "score": 0, "creation_date": 1548172934, "post_id": 54305595, "comment_id": 95444241, "body": "The important parts of try-with-block are: 1. it doesn&#39;t handle NoMethodError and 2. it completely skips any treatment of nil. The only big difference with &amp;. (other that one is native) is that .try(&amp;blk) won&#39;t work on BasicObject. But then if you use BasicObject, you don&#39;t need to read all these responses and comments."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1548174941, "post_id": 54305595, "comment_id": 95445374, "body": "@rewritten I have updated my spec to include your observation about the block variety of <code>try</code>/<code>try!</code>"}], "tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": true, "score": 4, "last_activity_date": 1548152972, "last_edit_date": 1548152972, "creation_date": 1548151088, "answer_id": 54305595, "question_id": 54305324, "link": "https://stackoverflow.com/questions/54305324/undefined-method-name-for-nilnilclass-while-accessing-attribute-name-in-a/54305595#54305595", "title": "undefined method `name&#39; for nil:NilClass, while accessing attribute &#39;name&#39; in a different model", "body": "<p>The issue comes from <code>user.role</code> being null. This can happen at any time, especially if the foreign key is in the roles table.</p>\n\n<p>You need to protect yourself against it by using (depending on ruby version and willingness of putting more architecture in your code) either:</p>\n\n<ol>\n<li><p>Safe navigation (from ruby 2.3 onwards)</p>\n\n<pre><code>&lt;td&gt;&lt;%= user.role&amp;.name %&gt;&lt;/td&gt;\n</code></pre></li>\n<li><p>Rails-style safe method call</p>\n\n<pre><code>&lt;td&gt;&lt;%= user.role.try(&amp;:name) %&gt;&lt;/td&gt;\n</code></pre></li>\n<li><p>Wrapper method in User model</p>\n\n<pre><code>class User &lt; ...\n  def role_name\n    role.name if role\n    # or role&amp;.name\n  end\n\n  # equivalently, this defines a safe `role_name` method.\n  delegate :name, to: :role, prefix: true, allow_nil: true\nend\n\n&lt;td&gt;&lt;%= @user.role_name %&gt;&lt;/td&gt;\n</code></pre></li>\n<li><p>Decorator</p>\n\n<pre><code>class UserDecorator &lt; Draper::Decorator # for instance\n  decorates :user\n\n  delegate_all\n  delegate :name, to: :role, prefix: true, allow_nil: true\nend\n\nclass YourController &lt; ...\n  def show\n    ...\n    @user = UserDecorator.new(user)\n  end\nend\n\n&lt;td&gt;&lt;%= @user.role_name %&gt;&lt;/td&gt;\n</code></pre></li>\n</ol>\n\n<p>The advantage of the last option is that you get a nice interface in your view, but at the same point you don't get your model messed up with view-related code.</p>\n"}], "owner": {"reputation": 5, "user_id": 8702759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93da90363500268f49bce96e1befef6?s=128&d=identicon&r=PG&f=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/8702759/vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 54305595, "answer_count": 2, "score": 0, "last_activity_date": 1548152972, "creation_date": 1548150203, "last_edit_date": 1548150476, "question_id": 54305324, "link": "https://stackoverflow.com/questions/54305324/undefined-method-name-for-nilnilclass-while-accessing-attribute-name-in-a", "title": "undefined method `name&#39; for nil:NilClass, while accessing attribute &#39;name&#39; in a different model", "body": "<p>I have linked <code>user</code> and <code>role</code> table.<br>\nI want to access the name attribute of role table in user controller. I have used <code>&lt;td&gt;&lt;%= user.Role.name %&gt;&lt;/td&gt;</code>.  </p>\n\n<p>I get <code>undefined method 'name' error</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-geocoder", "ahoy"], "answers": [{"tags": [], "owner": {"reputation": 6390, "user_id": 869616, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fa9e2cfb680a4213a45e3374d9c39e14?s=128&d=identicon&r=PG", "display_name": "Darme", "link": "https://stackoverflow.com/users/869616/darme"}, "is_accepted": true, "score": 1, "last_activity_date": 1548148620, "creation_date": 1548148620, "answer_id": 54304863, "question_id": 54303994, "link": "https://stackoverflow.com/questions/54303994/geocoderresultgeoip2country-returns-nil-even-though-location-datacountry/54304863#54304863", "title": "Geocoder::Result::Geoip2#country returns nil even though location.data[&#39;country&#39;][&#39;names&#39;][&#39;en&#39;] is not", "body": "<p>Ok, I figured this out. The problem, as usual, is my homeland ;-) </p>\n\n<p>In other words... in my geocoder initializer I set <code>'it'</code> as the default language <strong>but</strong> the <code>GeoLite2-City.mmdb</code> database, embedded in the <code>gem 'maxminddb'</code>, doesn't support Italian. </p>\n\n<p>So I just have to figure out how to make just the ip_lookup work in English and it all be fine :)</p>\n"}], "owner": {"reputation": 6390, "user_id": 869616, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fa9e2cfb680a4213a45e3374d9c39e14?s=128&d=identicon&r=PG", "display_name": "Darme", "link": "https://stackoverflow.com/users/869616/darme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 54304863, "answer_count": 1, "score": 1, "last_activity_date": 1548148620, "creation_date": 1548145333, "question_id": 54303994, "link": "https://stackoverflow.com/questions/54303994/geocoderresultgeoip2country-returns-nil-even-though-location-datacountry", "title": "Geocoder::Result::Geoip2#country returns nil even though location.data[&#39;country&#39;][&#39;names&#39;][&#39;en&#39;] is not", "body": "<p>I can't get Ahoy to work with Geocoder and the problem is related to this Ahoy <a href=\"https://github.com/ankane/ahoy/blob/master/app/jobs/ahoy/geocode_v2_job.rb#L14\" rel=\"nofollow noreferrer\">line</a>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Ahoy\nclass GeocodeV2Job &lt; ActiveJob::Base\n[...]\nif location &amp;&amp; location.country.present? # &lt;= but my location.country is never present...\n</code></pre>\n\n<p>This is really odd because, from my console, I get this:</p>\n\n<pre><code>&gt; heroku run rails c\n\n&gt; visit = Ahoy::Visit.last\n\n&gt; location = Geocoder.search(visit.ip).first\n\n=&gt; #&lt;Geocoder::Result::Geoip2:0x00000006e14910 @data=#&lt;MaxMindDB::Result:0x00000006e150b8 @raw={\"city\"=&gt;{\"geoname_id\"=&gt;3170918, \"names\"=&gt;{\"de\"=&gt;\"Piasco\", \"en\"=&gt;\"Piasco\", \"fr\"=&gt;\"Piasco\", \"pt-BR\"=&gt;\"Piasco\"}}, \"continent\"=&gt;{\"code\"=&gt;\"EU\", \"geoname_id\"=&gt;6255148, \"names\"=&gt;{\"de\"=&gt;\"Europa\", \"en\"=&gt;\"Europe\", \"es\"=&gt;\"Europa\", \"fr\"=&gt;\"Europe\", \"ja\"=&gt;\"\u30e8\u30fc\u30ed\u30c3\u30d1\", \"pt-BR\"=&gt;\"Europa\", \"ru\"=&gt;\"\u0415\u0432\u0440\u043e\u043f\u0430\", \"zh-CN\"=&gt;\"\u6b27\u6d32\"}}, \"country\"=&gt;{\"geoname_id\"=&gt;3175395, \"is_in_european_union\"=&gt;true, \"iso_code\"=&gt;\"IT\", \"names\"=&gt;{\"de\"=&gt;\"Italien\", \"en\"=&gt;\"Italy\", \"es\"=&gt;\"Italia\", \"fr\"=&gt;\"Italie\", \"ja\"=&gt;\"\u30a4\u30bf\u30ea\u30a2\u5171\u548c\u56fd\", \"pt-BR\"=&gt;\"It\u00e1lia\", \"ru\"=&gt;\"\u0418\u0442\u0430\u043b\u0438\u044f\", \"zh-CN\"=&gt;\"\u610f\u5927\u5229\"}}, \"location\"=&gt;{\"accuracy_radius\"=&gt;50, \"latitude\"=&gt;44.5611, \"longitude\"=&gt;7.4442, \"time_zone\"=&gt;\"Europe/Rome\"}, \"postal\"=&gt;{\"code\"=&gt;\"12026\"}, \"registered_country\"=&gt;{\"geoname_id\"=&gt;3175395, \"is_in_european_union\"=&gt;true, \"iso_code\"=&gt;\"IT\", \"names\"=&gt;{\"de\"=&gt;\"Italien\", \"en\"=&gt;\"Italy\", \"es\"=&gt;\"Italia\", \"fr\"=&gt;\"Italie\", \"ja\"=&gt;\"\u30a4\u30bf\u30ea\u30a2\u5171\u548c\u56fd\", \"pt-BR\"=&gt;\"It\u00e1lia\", \"ru\"=&gt;\"\u0418\u0442\u0430\u043b\u0438\u044f\", \"zh-CN\"=&gt;\"\u610f\u5927\u5229\"}}, \"subdivisions\"=&gt;[{\"geoname_id\"=&gt;3170831, \"iso_code\"=&gt;\"21\", \"names\"=&gt;{\"de\"=&gt;\"Piemont\", \"en\"=&gt;\"Piedmont\", \"es\"=&gt;\"Piamonte\", \"fr\"=&gt;\"Pi\u00e9mont\", \"ja\"=&gt;\"\u30d4\u30a8\u30e2\u30f3\u30c6\u5dde\", \"ru\"=&gt;\"\u041f\u044c\u0435\u043c\u043e\u043d\u0442\", \"zh-CN\"=&gt;\"\u76ae\u57c3\u8499\u7279\"}}, {\"geoname_id\"=&gt;3177699, \"iso_code\"=&gt;\"CN\", \"names\"=&gt;{\"en\"=&gt;\"Provincia di Cuneo\", \"fr\"=&gt;\"Coni\"}}], \"network\"=&gt;\"85.159.180.0/23\"}&gt;, @cache_hit=nil&gt;\n</code></pre>\n\n<p>So location is not nil!\nBut then:</p>\n\n<pre><code>&gt; location.country\n=&gt; \"\"\n</code></pre>\n\n<p><strong>Even though</strong>:  \ud83d\udc40</p>\n\n<pre><code>irb(main):008:0&gt; location.data['country']['names']['en']\n=&gt; \"Italy\"\n</code></pre>\n\n<p>Please note that <code>location</code> is a:</p>\n\n<pre><code>&gt; location.class\n=&gt; Geocoder::Result::Geoip2\n</code></pre>\n\n<p>I'm riding:</p>\n\n<pre><code>&gt; Rails.version\n=&gt; \"4.2.8\"\n&gt; Ahoy::VERSION\n=&gt; \"2.2.0\"\n</code></pre>\n\n<p>Using <strong>geocoder 1.5.0</strong>.</p>\n\n<p>And these are my initializers:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Ahoy\n  class Store &lt; Ahoy::DatabaseStore\n    def track_visit(data)\n      data[:ip] = request.headers['CF-Connecting-IP'] if request.headers['CF-Connecting-IP'].present? # Because I'm using Cloudflare\n      super(data)\n    end\n\n    def track_event(data)\n      data[:properties][:subdomain] = request.subdomain\n      data[:properties][:domain] = request.domain\n      super(data)\n    end\n  end\nend\n\nAhoy.api = true\nAhoy.geocode = true\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Geocoder.configure(\n  lookup: :location_iq,\n  api_key: ENV['LOCATION_IQ_ACCESS_TKN'],\n  language: 'it',\n  cache: Rails.cache,\n  ip_lookup: :geoip2,\n  geoip2: {\n    file: Rails.root.join('lib', 'geocoder', 'GeoLite2-City.mmdb')\n  }\n)\n</code></pre>\n\n<p>What am I missing?\nThank you!</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1548145099, "post_id": 54303621, "comment_id": 95427536, "body": "You have to create another table for storing json data with key values. And one question is your json data structure is fixed or dynamic ?"}, {"owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "edited": false, "score": 1, "creation_date": 1548145875, "post_id": 54303621, "comment_id": 95427936, "body": "Hi Raj, welcome to StackOverflow. Your question is probably too broad, since it can be broken into multiple problems. You are asking about saving JSON in SQLite, which is a question on its own: <a href=\"https://stackoverflow.com/questions/16603621/how-to-store-json-object-in-sqlite-database\">How can I store JSON in SQLite</a>. The second part fo your question is about how to fetch the data, and store it in the database. You&#39;ve asked a similar question <a href=\"https://stackoverflow.com/questions/54229537/parse-json-from-httparty-using-ruby-on-rails\">here</a> already, so it&#39;s hard to know where you get stuck."}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1548145969, "post_id": 54303621, "comment_id": 95427983, "body": "First fetch data from json url. <code>data = JSON.load(open(source))  #source is your url </code>"}, {"owner": {"reputation": 57, "user_id": 10925956, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_atvgIrdQ8Q/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZeCw5sKRGBZn915AJsSKvLo113tQ/mo/photo.jpg?sz=128", "display_name": "raj D", "link": "https://stackoverflow.com/users/10925956/raj-d"}, "edited": false, "score": 0, "creation_date": 1548146112, "post_id": 54303621, "comment_id": 95428065, "body": "@t s it fixed json data"}, {"owner": {"reputation": 57, "user_id": 10925956, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_atvgIrdQ8Q/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZeCw5sKRGBZn915AJsSKvLo113tQ/mo/photo.jpg?sz=128", "display_name": "raj D", "link": "https://stackoverflow.com/users/10925956/raj-d"}, "reply_to_user": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1548146215, "post_id": 54303621, "comment_id": 95428125, "body": "@ts Fetching json data from url using httparty gem work perfect,now i want to store that json data (<a href=\"https://stackoverflow.com/questions/54229537/parse-json-from-httparty-using-ruby-on-rails\" title=\"parse json from httparty using ruby on rails\">stackoverflow.com/questions/54229537/&hellip;</a>)"}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1548148659, "post_id": 54303621, "comment_id": 95429521, "body": "create a new field as string type and save whole data into this field or iterate over <code>data</code> object and then save accordingly."}, {"owner": {"reputation": 57, "user_id": 10925956, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_atvgIrdQ8Q/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZeCw5sKRGBZn915AJsSKvLo113tQ/mo/photo.jpg?sz=128", "display_name": "raj D", "link": "https://stackoverflow.com/users/10925956/raj-d"}, "edited": false, "score": 0, "creation_date": 1548316092, "post_id": 54303621, "comment_id": 95499191, "body": "error = no implicit conversion of String into Integer...   sett.each do |data| data.create(restaurant_name: data[&quot;restaurant_name&quot;] ) sett.save end"}], "owner": {"reputation": 57, "user_id": 10925956, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_atvgIrdQ8Q/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZeCw5sKRGBZn915AJsSKvLo113tQ/mo/photo.jpg?sz=128", "display_name": "raj D", "link": "https://stackoverflow.com/users/10925956/raj-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548153080, "creation_date": 1548143916, "last_edit_date": 1548153080, "question_id": 54303621, "link": "https://stackoverflow.com/questions/54303621/how-can-i-save-external-json-data-to-dbsqlite-with-rails", "title": "How can I save external JSON data to DB(sqlite) with Rails", "body": "<p>I have a form to add json url form, If user add json url and submit form, I want to save all json data to db.<a href=\"https://i.stack.imgur.com/jv1GV.png\" rel=\"nofollow noreferrer\">[form]<a href=\"https://i.stack.imgur.com/jv1GV.png\" rel=\"nofollow noreferrer\">1</a></a></p>\n\n<p>Fetching json data from url using <code>httparty</code> gem works perfectly, now to store json data to db <a href=\"http://codekyt.in/froodle-wp/wp-json/data/v2/projects?client_key=12345\" rel=\"nofollow noreferrer\">json_url</a></p>\n\n<pre><code>json data\n {\n        \"restaurant_name\": \"Restaurant 3\",\n        \"address\": \"xyz address\",\n        \"country\": \"United States\",\n        \"currency\": \"USD\",\n        \"client_key\": \"12345\",\n        \"client_name\": \"Client 3\",\n        \"client_email\": \"test3@mail.com\",\n        \"client_phone\": \"9876\",\n        \"product_tier\": \"tier1\",\n        \"brand_logo_large\": {\n            \"ID\": 37,\n            \"id\": 37,\n            \"title\": \"bait-al-bahar-logo-design\",\n            \"filename\": \"bait-al-bahar-logo-design.png\",\n            \"filesize\": 105071,\n            \"url\": \"http://codekyt.in/froodle-wp/wp-content/uploads/2019/01/bait-al-bahar-logo-design.png\",\n            \"link\": \"http://codekyt.in/froodle-wp/projects/res-1-client-1/bait-al-bahar-logo-design/\",\n            \"alt\": \"\",\n            \"author\": \"1\",\n            \"description\": \"\",\n            \"caption\": \"\",\n            \"name\": \"bait-al-bahar-logo-design\",\n            \"status\": \"inherit\",\n            \"uploaded_to\": 35,\n            \"date\": \"2019-01-04 11:11:48\",\n            \"modified\": \"2019-01-04 11:13:01\",\n            \"menu_order\": 0,\n            \"mime_type\": \"image/png\",\n            \"type\": \"image\",\n            \"subtype\": \"png\",\n            \"icon\": \"http://codekyt.in/froodle-wp/wp-includes/images/media/default.png\",\n            \"width\": 600,\n            \"height\": 500,\n            \"sizes\": {\n                \"thumbnail\": \"http://codekyt.in/froodle-wp/wp-content/uploads/2019/01/bait-al-bahar-logo-design-150x150.png\",\n                \"thumbnail-width\": 150,\n                \"thumbnail-height\": 150,\n                \"medium\": \"http://codekyt.in/froodle-wp/wp-content/uploads/2019/01/bait-al-bahar-logo-design-300x250.png\",\n                \"medium-width\": 300,\n                \"medium-height\": 250,\n                \"medium_large\": \"http://codekyt.in/froodle-wp/wp-content/uploads/2019/01/bait-al-bahar-logo-design.png\",\n                \"medium_large-width\": 600,\n                \"medium_large-height\": 500,\n                \"large\": \"http://codekyt.in/froodle-wp/wp-content/uploads/2019/01/bait-al-bahar-logo-design.png\",\n                \"large-width\": 600,\n                \"large-height\": 500\n            }\n        }\n\n}\n</code></pre>\n\n<p>I created a form to user &amp; added json url,</p>\n\n<pre><code>&lt;%= form_tag(\"/settings/json_url\", method: \"post\") do  %&gt;\n  &lt;%= label_tag :json_url %&gt;\n  &lt;%= text_field_tag :json_url %&gt;\n  &lt;%= submit_tag 'submit' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>In db,</p>\n\n<pre><code>  t.string :key\n  t.string :value \n  t.string :json_url\n</code></pre>\n\n<p>In controller,</p>\n\n<pre><code>def json_url\n\n # I am getting confused here \n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "webpacker"], "answers": [{"tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": false, "score": 0, "last_activity_date": 1548177606, "creation_date": 1548177606, "answer_id": 54313396, "question_id": 54301162, "link": "https://stackoverflow.com/questions/54301162/rails-request-failing-for-assets-but-asset-is-at-location/54313396#54313396", "title": "Rails request failing for assets but asset is at location", "body": "<p>Have you activated the static file server? It is explained <a href=\"https://guides.rubyonrails.org/asset_pipeline.html#how-to-use-the-asset-pipeline\" rel=\"nofollow noreferrer\">here</a>, you have to set <code>config.public_file_server.enabled</code> and <code>config.assets.compile</code> to <code>true</code> to have rails serving them.</p>\n"}, {"tags": [], "owner": {"reputation": 2665, "user_id": 1258001, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/486162db0cc17ae06ab6ad29ecb3f699?s=128&d=identicon&r=PG", "display_name": "Polygon Pusher", "link": "https://stackoverflow.com/users/1258001/polygon-pusher"}, "is_accepted": false, "score": 0, "last_activity_date": 1548186883, "creation_date": 1548186883, "answer_id": 54315528, "question_id": 54301162, "link": "https://stackoverflow.com/questions/54301162/rails-request-failing-for-assets-but-asset-is-at-location/54315528#54315528", "title": "Rails request failing for assets but asset is at location", "body": "<p>I was overlooking the fact it was failing at my http layer since my nginx config was incorrectly setup for my public folder. I for some reason thought rails was trying to handle the request but then noticed it was just because it was rendering the 404. Derp. </p>\n"}], "owner": {"reputation": 2665, "user_id": 1258001, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/486162db0cc17ae06ab6ad29ecb3f699?s=128&d=identicon&r=PG", "display_name": "Polygon Pusher", "link": "https://stackoverflow.com/users/1258001/polygon-pusher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548186883, "creation_date": 1548130355, "question_id": 54301162, "link": "https://stackoverflow.com/questions/54301162/rails-request-failing-for-assets-but-asset-is-at-location", "title": "Rails request failing for assets but asset is at location", "body": "<p>I'm using webpacker and I currently have a request failing for </p>\n\n<p><a href=\"https://.../packs/application-6b70966cde4a4aebc103.js\" rel=\"nofollow noreferrer\">https://.../packs/application-6b70966cde4a4aebc103.js</a></p>\n\n<p>if I look in my public/packs folder I see. </p>\n\n<pre><code>deploy@platform:/var/www/.../current$ ll public/packs/\ntotal 2427\ndrwxrwxr-x 2 deploy deploy     19 Jan 22 03:01 ./\ndrwxrwxr-x 3 deploy deploy     18 Jan 22 03:01 ../\n-rw-rw-r-- 1 deploy deploy 893742 Jan 22 03:01 application-6b70966cde4a4aebc103.js\n-rw-rw-r-- 1 deploy deploy 222991 Jan 22 03:01 application-6b70966cde4a4aebc103.js.gz\n</code></pre>\n\n<p>And If I watch my logs I see in my http I have. </p>\n\n<pre><code>5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36\"\n192.168.1.xxx - - [22/Jan/2019:04:00:51 +0000] \"GET /packs/application-6b70966cde4a4aebc103.js HTTP/1.0\" 404 1564 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36\"\n</code></pre>\n\n<p>which also seen in my rails logs too. </p>\n\n<pre><code>F, [2019-01-22T04:09:44.951825 #20969] FATAL -- :\nActionController::RoutingError (No route matches [GET] \"/packs/application-6b70966cde4a4aebc103.js\"):\n  actionpack (4.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'\n  rollbar (2.15.5) lib/rollbar/middleware/rails/show_exceptions.rb:22:in `call_with_rollbar'\n  skylight (1.4.3) lib/skylight/probes/middleware.rb:33:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "devise"], "comments": [{"owner": {"reputation": 8371, "user_id": 1094339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cibe3.png?s=128&g=1", "display_name": "Deekor", "link": "https://stackoverflow.com/users/1094339/deekor"}, "edited": false, "score": 0, "creation_date": 1548110862, "post_id": 54298769, "comment_id": 95418051, "body": "Why exactly are you storing your guest user to the DB?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 8371, "user_id": 1094339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cibe3.png?s=128&g=1", "display_name": "Deekor", "link": "https://stackoverflow.com/users/1094339/deekor"}, "edited": false, "score": 0, "creation_date": 1548114347, "post_id": 54298769, "comment_id": 95419004, "body": "so when they make a purchase they can create an account to transfer the information over."}, {"owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "edited": false, "score": 0, "creation_date": 1548115548, "post_id": 54298769, "comment_id": 95419305, "body": "can you share your user.rb model?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1548115660, "post_id": 54298769, "comment_id": 95419330, "body": "Added the user model for all devise related"}, {"owner": {"reputation": 8371, "user_id": 1094339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cibe3.png?s=128&g=1", "display_name": "Deekor", "link": "https://stackoverflow.com/users/1094339/deekor"}, "edited": false, "score": 0, "creation_date": 1548117525, "post_id": 54298769, "comment_id": 95419738, "body": "Feels like a square peg in a round hole. I would store the info in a redis db if you don&#39;t want to store it all in a cookie"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1548118012, "post_id": 54298769, "comment_id": 95419830, "body": "i used the code devise suggested/provided in their docs for allowing guests to be users.  But would using redis help this situation and how?  i really ultimately want non signed in users to be able to create Order records"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1548123159, "post_id": 54298769, "comment_id": 95420914, "body": "By removing <code>:confirmable</code> from the model, i was able to get it to work with gues users.  although, i do need confirmable to work.  I don&#39;t know why it tries to confirm when i create an order but local it does not"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1548125711, "post_id": 54298769, "comment_id": 95421436, "body": "Update: ended up being my mail server wasn&#39;t full set up or correctly set up.  When it would attempt to send the email, it wasn&#39;t able to.  now it works and with confirmable"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548118188, "creation_date": 1548110527, "last_edit_date": 1548118188, "question_id": 54298769, "link": "https://stackoverflow.com/questions/54298769/allowing-guests-to-create-records-on-heroku", "title": "Allowing Guests to create records on Heroku", "body": "<p>I have a guest_user and current_user system with devise that allows guest_users to create orders.  This all works locally.</p>\n\n<p>Although, with heroku i get errors.</p>\n\n<p>The first error i received was because there was no guest_user confirmation.  So i changed <code>validate: false</code> to <code>validate: true</code>.  Then i still received errors because of the Password.  When i added a password, the app broke.</p>\n\n<p>With a current_user who is signed in, it works fine.  I don't want to change the model to take away confirmations, i want to have it work like it does locally.  Locally, a guest_user can create an order with no errors, then sign up with their orders present (if email matches <code>order.email</code>)</p>\n\n<p><strong>Here's the error when creating an <code>Order</code>:</strong></p>\n\n<pre><code>2019-01-21T22:06:15.195141+00:00 app[web.1]: D, [2019-01-21T22:06:15.195016 #4] DEBUG -- : [bcc07ad7-f215-4c19-b442-bdc4677b545e]   [1m[35m (5.4ms)[0m  [1m[31mROLLBACK[0m\n\n2019-01-21T22:06:15.195851+00:00 app[web.1]: I, [2019-01-21T22:06:15.195791 #4]  INFO -- : [bcc07ad7-f215-4c19-b442-bdc4677b545e] Completed 422 Unprocessable Entity in 41ms (ActiveRecord: 12.3ms)\n\n2019-01-21T22:06:15.196780+00:00 app[web.1]: F, [2019-01-21T22:06:15.196720 #4] FATAL -- : [bcc07ad7-f215-4c19-b442-bdc4677b545e]   \n\n2019-01-21T22:06:15.196867+00:00 app[web.1]: F, [2019-01-21T22:06:15.196813 #4] FATAL -- : [bcc07ad7-f215-4c19-b442-bdc4677b545e] ActiveRecord::RecordInvalid (Validation failed: Password can't be blank):\n\n2019-01-21T22:06:15.196945+00:00 app[web.1]: F, [2019-01-21T22:06:15.196892 #4] FATAL -- : [bcc07ad7-f215-4c19-b442-bdc4677b545e]   \n\n2019-01-21T22:06:15.197040+00:00 app[web.1]: F, [2019-01-21T22:06:15.196983 #4] FATAL -- : [bcc07ad7-f215-4c19-b442-bdc4677b545e] app/controllers/application_controller.rb:84:in `create_guest_user'\n\n2019-01-21T22:06:15.197043+00:00 app[web.1]: [bcc07ad7-f215-4c19-b442-bdc4677b545e] app/controllers/application_controller.rb:40:in `guest_user'\n\n2019-01-21T22:06:15.197045+00:00 app[web.1]: [bcc07ad7-f215-4c19-b442-bdc4677b545e] app/controllers/orders_controller.rb:101:in `create'\n</code></pre>\n\n<p><strong>Here's the devise code i have in my application controller for use of <code>guest_user</code>:</strong></p>\n\n<pre><code>  def configure_permitted_parameters\n    devise_parameter_sanitizer.permit(:sign_up, keys: [:name])\n    devise_parameter_sanitizer.permit(:account_update, keys: [:name])\n  end\n\n  def current_or_guest_user\n    if current_user\n      if session[:guest_user_id] &amp;&amp; session[:guest_user_id] != current_user.id\n        logging_in\n        # reload guest_user to prevent caching problems before destruction\n        guest_user(with_retry = false).try(:reload).try(:destroy)\n        session[:guest_user_id] = nil\n      end\n      current_user\n    else\n      guest_user\n    end\n  end\n\n  # find guest_user object associated with the current session,\n  # creating one as needed\n  def guest_user(with_retry = true)\n    # Cache the value the first time it's gotten.\n    @cached_guest_user ||= User.find(session[:guest_user_id] ||= create_guest_user.id)\n\n  rescue ActiveRecord::RecordNotFound # if session[:guest_user_id] invalid\n     session[:guest_user_id] = nil\n     guest_user if with_retry\n  end\n\n\n  private\n  def logging_in\n    guest_orders = guest_user.orders.all?\n    guest_orders.each do |order|\n      order.user_id = current_user.id\n      order.save!\n    end\n\n\n  end\n\n  def create_guest_user\n    u = User.new(:name =&gt; \"guest\", :email =&gt; \"guest_#{Time.now.to_i}#{rand(100)}@example.com\")\n    u.save!(:validate =&gt; true)\n    session[:guest_user_id] = u.id\n    u\n  end\n</code></pre>\n\n<p><strong>Previously i had</strong> <code>u.save!(:validate =&gt; false)</code> but got errors due to no confirmation --- this did work locally though.</p>\n\n<p><strong>I tried</strong> adding <code>:password =&gt; \"#{Time.now.to_i}\"</code> and <code>:password = SecureRandom.urlsafe_base64</code>  but then the heroku server wouldn't work at all.</p>\n\n<p>What can I do to allow the guest_user to create orders without these issues the same way it works locally?</p>\n\n<p>User model:</p>\n\n<pre><code>  devise :database_authenticatable, :registerable,\n          :confirmable, :recoverable, :rememberable, :validatable,\n          :trackable\n\n\n    after_create :connect_orders\n\n        def active_for_authentication?\n          super &amp;&amp; approved\n        end\n\n        def inactive_message\n          approved? ? super : :not_approved\n        end\n\n  def connect_orders\n    Order.where(email: self.email).update_all(buyer_id: self.id)\n  end\n</code></pre>\n\n<p><strong>Within my create method in the OrdersController I have:</strong></p>\n\n<pre><code>if user_signed_in?\n  @order.buyer_id = current_user.id\nelse\n  @order.buyer_id = guest_user.id\nend\n</code></pre>\n\n<p>So i need an id for a buyer.  What's confusing is this all works locally just not working Heroku</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 565, "user_id": 1505415, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/S9nqX.jpg?s=128&g=1", "display_name": "Majoren", "link": "https://stackoverflow.com/users/1505415/majoren"}, "edited": false, "score": 0, "creation_date": 1548118568, "post_id": 54299035, "comment_id": 95419976, "body": "Thank you for that explanation. Fantastic answer."}], "tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": true, "score": 3, "last_activity_date": 1548113586, "last_edit_date": 1548113586, "creation_date": 1548112264, "answer_id": 54299035, "question_id": 54298672, "link": "https://stackoverflow.com/questions/54298672/rails-how-to-get-model-where-join-table-attrbute-x-joined-but-also-all-the/54299035#54299035", "title": "Rails: How to get Model where &quot;join_table.attrbute = x&quot; joined, but also all the other", "body": "<p>Rails 4:</p>\n\n<pre><code>Company.joins('LEFT JOIN notes ON companies.id = notes.company_id')\n</code></pre>\n\n<p><a href=\"https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-left_outer_joins\" rel=\"nofollow noreferrer\">Rails 5</a>:</p>\n\n<pre><code>Company.left_joins(:notes)\n</code></pre>\n\n<p>You need to do a <a href=\"https://www.w3schools.com/sql/sql_join_left.asp\" rel=\"nofollow noreferrer\">LEFT JOIN</a>.  This will keep all of the records in table1 (companies) even if they do not have anything to join on in table2 (notes).</p>\n\n<p>There are two ways to then filter by user.</p>\n\n<ol>\n<li><p>Add a where clause.  This will need to have the condition for when there are no notes for the company by checking for a NULL user_id.</p>\n\n<pre><code>where(notes: {user_id: [@user.id, nil]})\n</code></pre></li>\n<li><p>Add the conditional to the outer join. There is no need for the NULL check as the left join will still return any nulls.</p>\n\n<p>NOTE: The input (<code>@user.id</code> in this case) needs to be sanitized or trusted.</p>\n\n<pre><code>joins(\"LEFT JOIN notes ON companies.id = notes.company_id AND notes.user_id = #{@user.id}\")\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 565, "user_id": 1505415, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/S9nqX.jpg?s=128&g=1", "display_name": "Majoren", "link": "https://stackoverflow.com/users/1505415/majoren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 54299035, "answer_count": 1, "score": 1, "last_activity_date": 1548113586, "creation_date": 1548109940, "last_edit_date": 1548110035, "question_id": 54298672, "link": "https://stackoverflow.com/questions/54298672/rails-how-to-get-model-where-join-table-attrbute-x-joined-but-also-all-the", "title": "Rails: How to get Model where &quot;join_table.attrbute = x&quot; joined, but also all the other", "body": "<p>I have a model <code>Company</code>, and a join model <code>Note</code>, which has <code>user_id</code> and <code>company_id</code>. Company has_many notes. Note belongs_to user and company. I'm trying to fetch a list of companies together with notes for a user if it has any, but also all the other companies.</p>\n\n<p>Obviously, doing <code>Company.joins(:notes).where(\"notes.user_id = 1\")</code> only get me the ones which has notes and not the others. What am I missing here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1548123452, "last_edit_date": 1548123452, "creation_date": 1548109458, "answer_id": 54298599, "question_id": 54298247, "link": "https://stackoverflow.com/questions/54298247/no-implicit-conversion-of-symbol-into-integer-trying-to-list-certain-users/54298599#54298599", "title": "no implicit conversion of Symbol into Integer, trying to list certain users", "body": "<p>You are calling <code>[:teacher_id]</code> on <code>@students</code>, which is an <code>ActiveRecord</code> relationship. You can think about it as an array. You should rather call it on an individual student by moving the <code>if</code> inside the iteration:</p>\n\n<pre><code>&lt;% @students = Student.all %&gt;\n&lt;% @students.each do |student| %&gt;\n  &lt;% if student[:teacher_id] == @current_user.id %&gt;\n    Username: &lt;%= student.username %&gt;&lt;br/&gt;\n    Name:  &lt;%= student.name %&gt;&lt;br/&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>There are some improvements you can do:</p>\n\n<ol>\n<li>Do not call Active Record query (<code>Student.all</code>) in view, move it to the controller.</li>\n<li>Filter in AR query, not in application: <code>Student.where(teacher_id: @current_user.id)</code> instead of <code>Student.all</code> and checking hash value.</li>\n</ol>\n\n<p>Finally you'll get</p>\n\n<pre><code># controller:\n@students = Student.where(teacher_id: @current_user.id)\n\n# view:\n&lt;% @students.each do |student| %&gt;\n    Username: &lt;%= student.username %&gt;&lt;br/&gt;\n    Name:  &lt;%= student.name %&gt;&lt;br/&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9916584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6716490a3b083f3be39585f16d97fe6?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9916584/user1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 54298599, "answer_count": 1, "score": 1, "last_activity_date": 1548123681, "creation_date": 1548107511, "last_edit_date": 1548123681, "question_id": 54298247, "link": "https://stackoverflow.com/questions/54298247/no-implicit-conversion-of-symbol-into-integer-trying-to-list-certain-users", "title": "no implicit conversion of Symbol into Integer, trying to list certain users", "body": "<p>I am dealing with main users (teachers) and their students. They share the user's <code>id</code> and the student's <code>teacher_id</code>. I want to list all the students that have the same <code>teacher_id</code> as the current user's <code>id</code>, so the user can see all their students. This is my code:</p>\n\n<pre><code>&lt;% @students = Student.all %&gt;\n&lt;% if @students[:teacher_id] == @current_user.id %&gt;\n&lt;% @students.each do |students| %&gt;\n  Username: &lt;%= students.username %&gt;&lt;br/&gt;\n  Name:  &lt;%= students.name %&gt;&lt;br/&gt;\n&lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And I am getting the following error:</p>\n\n<blockquote>\n  <p>no implicit conversion of Symbol into Integer</p>\n</blockquote>\n\n<p>What is going on? The logic seems sound: if the <code>teacher_id</code> is the same as the <code>current_user</code> id, print the students.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8371, "user_id": 1094339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cibe3.png?s=128&g=1", "display_name": "Deekor", "link": "https://stackoverflow.com/users/1094339/deekor"}, "edited": false, "score": 0, "creation_date": 1548111207, "post_id": 54298003, "comment_id": 95418167, "body": "do you have one too many <code>&quot;</code>?"}, {"owner": {"reputation": 573, "user_id": 6761781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c46a125fbbb6589becc8816a3cf4f3?s=128&d=identicon&r=PG&f=1", "display_name": "M. Habib", "link": "https://stackoverflow.com/users/6761781/m-habib"}, "edited": false, "score": 0, "creation_date": 1548139339, "post_id": 54298003, "comment_id": 95425010, "body": "You should check whether your request reaches to server as a DELETE method? According to your situation it is being sent to server as GET."}], "answers": [{"comments": [{"owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "reply_to_user": {"reputation": 1, "user_id": 10947011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fe9ad02bec3e4c754cbee09fc912f76?s=128&d=identicon&r=PG&f=1", "display_name": "ewkjbfwrjhb", "link": "https://stackoverflow.com/users/10947011/ewkjbfwrjhb"}, "edited": false, "score": 0, "creation_date": 1548176078, "post_id": 54299543, "comment_id": 95446040, "body": "Where did you read that? Either way, you have a few options. Using rails routes, the resource delete path is identical to the show path <code>?resource_name&#47;&lt;resource_id&gt;</code>, sending the form with the <code>&lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;DELETE&quot;&gt;</code> method specified is what directs it to the proper controller. You can absolutely make custom controller routes, though there is no need. From what I can imagine... any security threats presented here can be taken care of with strong params as well as with resource policies"}], "tags": [], "owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "is_accepted": false, "score": 0, "last_activity_date": 1548115990, "creation_date": 1548115990, "answer_id": 54299543, "question_id": 54298003, "link": "https://stackoverflow.com/questions/54298003/how-can-i-delete-a-user-account-without-using-javascript/54299543#54299543", "title": "How can I delete a user account without using Javascript?", "body": "<p>There is actually no <code>method=\"delete\"</code> in an HTML form. Why the rails helpers are useful is because they create a hidden input that actually includes the DELETE request form method:</p>\n\n<pre><code>&lt;input name=\"_method\" type=\"hidden\" value=\"delete\"&gt;\n</code></pre>\n\n<p>You can absolutely create this yourself. Though make sure you follow the following pattern.</p>\n\n<pre><code>&lt;form method=\"post\" action=\"/path/to/resource\"&gt;\n  &lt;input type=\"hidden\" name=\"_method\" value=\"DELETE\"&gt;\n  &lt;input type=\"submit\" value=\"Destroy\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>This is the same for PUT or PATCH requests. They are using the POST method on the HTML form and then declaring the PUT or PATCH in the hidden <code>_method</code> input.</p>\n\n<pre><code>&lt;form method=\"post\" action=\"/path/to/resource\"&gt;\n  &lt;input type=\"hidden\" name=\"_method\" value=\"PUT\"&gt;\n  --- OR ---\n  &lt;input type=\"hidden\" name=\"_method\" value=\"PATCH\"&gt;\n  ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 8540055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d4c940ad6c96e49b919ffc37bd85c14?s=128&d=identicon&r=PG&f=1", "display_name": "adarsh", "link": "https://stackoverflow.com/users/8540055/adarsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1548135223, "creation_date": 1548135223, "answer_id": 54301832, "question_id": 54298003, "link": "https://stackoverflow.com/questions/54298003/how-can-i-delete-a-user-account-without-using-javascript/54301832#54301832", "title": "How can I delete a user account without using Javascript?", "body": "<p>you can do in this way,using destroy method in controller  </p>\n\n<pre><code>def destroy\n  @profil = Profil.find(params[:id])\n  @profil.destroy\n  redirect_to profil_path(@profil.user.id)\n end\n</code></pre>\n\n<p>in  user model</p>\n\n<pre><code>has_many :profils\n</code></pre>\n\n<p>in profile model</p>\n\n<pre><code>belongs_to :user\n</code></pre>\n\n<p>in view</p>\n\n<pre><code>&lt;p&gt; &lt;%= button_to \"Cancel my account\", registration_path(resource_name), data: { confirm: \"Are you sure?\" }, method: :delete %&gt;&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10947011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fe9ad02bec3e4c754cbee09fc912f76?s=128&d=identicon&r=PG&f=1", "display_name": "ewkjbfwrjhb", "link": "https://stackoverflow.com/users/10947011/ewkjbfwrjhb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1548135223, "creation_date": 1548106126, "question_id": 54298003, "link": "https://stackoverflow.com/questions/54298003/how-can-i-delete-a-user-account-without-using-javascript", "title": "How can I delete a user account without using Javascript?", "body": "<p>I'm trying to make a form in Rails that deletes a user without Javascript or using \"method: :delete\". How can I do this? When I try to use \"users_destroy_path\" or \"user_path(@profile.user)\", Rails redirects me to the \"show\" action of my Users controller instead of \"destroy\".</p>\n\n<p>The form:</p>\n\n<pre><code>&lt;form action=\"&lt;%= user_path(@profile.user) %&gt;\"\" method=\"delete\"&gt;\n      &lt;input type=\"submit\" value=\"Destroy\"&gt;\n&lt;/form&gt;\n</code></pre>\n"}, {"tags": ["ruby", "factory-bot"], "comments": [{"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1548111278, "post_id": 54297823, "comment_id": 95418195, "body": "Do you have a name attribute on tour project model?"}, {"owner": {"reputation": 383, "user_id": 700159, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0db709629c34bfe88bd8e984d6e64f48?s=128&d=identicon&r=PG", "display_name": "Hugo A", "link": "https://stackoverflow.com/users/700159/hugo-a"}, "reply_to_user": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1548111534, "post_id": 54297823, "comment_id": 95418269, "body": "Not in the model, name comes from the database"}, {"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1548117923, "post_id": 54297823, "comment_id": 95419816, "body": "Can you post tour dB scheme?"}], "answers": [{"comments": [{"owner": {"reputation": 818, "user_id": 2509777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyQvS.jpg?s=128&g=1", "display_name": "mlabarca", "link": "https://stackoverflow.com/users/2509777/mlabarca"}, "edited": false, "score": 0, "creation_date": 1558190982, "post_id": 54299589, "comment_id": 99023115, "body": "Damn, I had forgotten to rollback/migrate the test database after the change i made to development&#39;s. Thanks, this answer reminded me of it."}], "tags": [], "owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "is_accepted": false, "score": 1, "last_activity_date": 1548376283, "last_edit_date": 1548376283, "creation_date": 1548116407, "answer_id": 54299589, "question_id": 54297823, "link": "https://stackoverflow.com/questions/54297823/factory-bot-cant-create-project-factory/54299589#54299589", "title": "Factory_bot can&#39;t create &quot;project&quot; factory", "body": "<p>Try declaring the class name in the factory description.</p>\n\n<pre><code>  FactoryBot.define do\n    factory :project, class: 'Project' do\n    ...\n</code></pre>\n\n<hr>\n\n<p>I created a factory in an existing project of mine using your same code and got the exact same error. I then changed the name of the factory to <code>:projector</code> and got the same error again. Therefore it's not a protected name problem.</p>\n\n<p>My best guesses:</p>\n\n<p>1) Did you make sure to migrate your test database since adding projects? </p>\n\n<p>2) Are you sure that your app is connecting to the same DB that you listed?</p>\n\n<p>The reason I feel this may be the cause is that if I add an attribute to my factory that doesn't on it's corresponding table, the error is the reads:</p>\n\n<pre><code>NoMethodError: undefined method `name=' for #&lt;Report:0x00007fc5bb065c10&gt;\n</code></pre>\n\n<p>Thus, the factory is unable to constantize the symbol you're given it, which most likely means that it's not recognizing it as a constant/class.</p>\n"}, {"comments": [{"owner": {"reputation": 383, "user_id": 700159, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0db709629c34bfe88bd8e984d6e64f48?s=128&d=identicon&r=PG", "display_name": "Hugo A", "link": "https://stackoverflow.com/users/700159/hugo-a"}, "edited": false, "score": 0, "creation_date": 1550520893, "post_id": 54751161, "comment_id": 96290989, "body": "This was exactly the problem. Improving the error messages is great, I&#39;m sure many people will benefit from it. Thank you."}], "tags": [], "owner": {"reputation": 91, "user_id": 5307287, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EAJovQ-WGn4/AAAAAAAAAAI/AAAAAAAACLY/xs9J7lzeVXQ/photo.jpg?sz=128", "display_name": "Dodecadaniel", "link": "https://stackoverflow.com/users/5307287/dodecadaniel"}, "is_accepted": true, "score": 2, "last_activity_date": 1550505815, "creation_date": 1550505815, "answer_id": 54751161, "question_id": 54297823, "link": "https://stackoverflow.com/questions/54297823/factory-bot-cant-create-project-factory/54751161#54751161", "title": "Factory_bot can&#39;t create &quot;project&quot; factory", "body": "<p>It looks like you are referring to <code>association :client, factory: user</code> instead of <code>association :client, factory: :user</code> (<code>:user</code> should be a symbol).</p>\n\n<p>This is a fairly unhelpful error message. We improved the error message a bit in <a href=\"https://github.com/thoughtbot/factory_bot/pull/1219\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/factory_bot/pull/1219</a>, and we have an open issue to improve it more: <a href=\"https://github.com/thoughtbot/factory_bot/issues/1227\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/factory_bot/issues/1227</a>.</p>\n"}], "owner": {"reputation": 383, "user_id": 700159, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0db709629c34bfe88bd8e984d6e64f48?s=128&d=identicon&r=PG", "display_name": "Hugo A", "link": "https://stackoverflow.com/users/700159/hugo-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1103, "favorite_count": 0, "accepted_answer_id": 54751161, "answer_count": 2, "score": 1, "last_activity_date": 1550505815, "creation_date": 1548105029, "last_edit_date": 1548366545, "question_id": 54297823, "link": "https://stackoverflow.com/questions/54297823/factory-bot-cant-create-project-factory", "title": "Factory_bot can&#39;t create &quot;project&quot; factory", "body": "<p>I am writing several factories within a project I am mantaining. All of them work except for the <code>project</code> factory.</p>\n\n<p>When I run the factory in rails console I get the following error</p>\n\n<pre><code>FactoryBot.create(:project)\nNoMethodError: undefined method `name' for :project:Symbol from /home/user/.rvm/gems/ruby-2.3.6/gems/factory_bot-4.11.1/lib/factory_bot/declaration/implicit.rb:11:in `=='\n</code></pre>\n\n<p>It seems that somehow, factory_bot can't convert the symbol :project into its Project class. </p>\n\n<p>Ruby version is 2.3.6. Factory_bot is 4.11.1. Factory_bot_rails is 4.11.1 as well.</p>\n\n<p>This is my project factory file:</p>\n\n<pre><code>require 'faker'\n\nFactoryBot.define do\n  factory :project do\n    name                              { Faker::Company.name }\n    product_type                      { Faker::Number.between(0, 1) }\n    sale_type                         { Faker::Number.between(0, 1) }\n    description                       { Faker::Lorem.sentence }\n    street                            { Faker::Address.street_name }\n    neighborhood                      { Faker::Address.community }\n    zip_code                          { Faker::Address.zip }\n    country                           { Faker::Address.country_code }\n    state                             { Faker::Address.state_abbr }\n    city                              { Faker::Address.city }\n    town                              { Faker::Address.city }\n    logo                              { Faker::Company.logo }\n    cover                             { Faker::Company.logo }\n    send_from_email                   { Faker::Internet.email }\n    parking_lot_cost                  { Faker::Number.decimal(2) }\n    warehouse_m2_cost                 { Faker::Number.decimal(2) }\n    association :client, factory: user\n    inventory_dimension_value         { Faker::Number.digit }\n    total_m2                          { Faker::Number.decimal(2) }\n    sales_volume_total                { Faker::Number.decimal(2) }\n    total_units                       { Faker::Number.digit }\n    current_m2_sold                   { Faker::Number.decimal(2) }\n    sales_volume_current_sold         { Faker::Number.decimal(2) }\n    current_units_sold                { Faker::Number.digit }\n    sales_volume_to_sell              { Faker::Number.decimal(2) }\n    next_list_acum                    { Faker::Number.decimal(2) }\n    from_email                        { Faker::Internet.email }\n    saved_next_list_acum              { Faker::Number.decimal(2) }\n    settings_show_distributions_cols  { Faker::Boolean.boolean }\n    settings_price_list_v2_enabled    { Faker::Boolean.boolean }\n    api_token                         { Faker::Lorem.word }\n  end\nend\n</code></pre>\n\n<p><em>Edit:</em> this is the database schema for the projects table</p>\n\n<pre><code>                                                   Table \"public.projects\"                                                    \n              Column              |            Type             | Collation | Nullable |               Default                \n----------------------------------+-----------------------------+-----------+----------+--------------------------------------\n id                               | integer                     |           | not null | nextval('projects_id_seq'::regclass) \n name                             | character varying           |           |          |                                      \n product_type                     | integer                     |           |          |                                      \n sale_type                        | integer                     |           |          |                                      \n description                      | text                        |           |          |                                      \n street                           | character varying           |           |          |                                      \n neighborhood                     | character varying           |           |          |                                      \n zip_code                         | character varying           |           |          |                                      \n country                          | character varying           |           |          |                                      \n state                            | character varying           |           |          |                                      \n city                             | character varying           |           |          |                                      \n town                             | character varying           |           |          |                                      \n logo                             | character varying           |           |          |                                      \n cover                            | character varying           |           |          |                                      \n send_from_email                  | text                        |           |          |                                      \n parking_lot_cost                 | double precision            |           |          | 0.0                                  \n warehouse_m2_cost                | double precision            |           |          | 0.0                                  \n created_at                       | timestamp without time zone |           | not null |                                      \n updated_at                       | timestamp without time zone |           | not null |                                      \n client_id                        | integer                     |           |          |                                      \n inventory_dimension_value        | integer                     |           |          |                                      \n total_m2                         | double precision            |           |          | 0.0                                  \n sales_volume_total               | double precision            |           |          | 0.0                                  \n total_units                      | integer                     |           |          | 0                                    \n current_m2_sold                  | double precision            |           |          | 0.0                                  \n sales_volume_current_sold        | double precision            |           |          | 0.0                                  \n current_units_sold               | integer                     |           |          | 0                                    \n sales_volume_to_sell             | double precision            |           |          | 0.0                                  \n next_list_acum                   | double precision            |           |          | 0.0                                  \n from_email                       | character varying           |           |          |                                      \n saved_next_list_acum             | double precision            |           |          |                                      \n settings_show_distributions_cols | boolean                     |           |          | true                                 \n settings_price_list_v2_enabled   | boolean                     |           |          | false                                \n api_token                        | character varying           |           |          |                                      \n</code></pre>\n"}, {"tags": ["ruby", "hashmap"], "answers": [{"comments": [{"owner": {"reputation": 13537, "user_id": 1661173, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/92abef883bd0909b26f5b8a25fee6f6f?s=128&d=identicon&r=PG", "display_name": "tomasz74", "link": "https://stackoverflow.com/users/1661173/tomasz74"}, "edited": false, "score": 0, "creation_date": 1548104738, "post_id": 54297735, "comment_id": 95415899, "body": "I still have an error, this time <code>merge!&#39;: can&#39;t add a new key into hash during iteration (RuntimeError)</code> somehow can&#39;t make it work :("}, {"owner": {"reputation": 3164, "user_id": 193785, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b9110bc3c6f788945c789bf190932dc1?s=128&d=identicon&r=PG", "display_name": "BookOfGreg", "link": "https://stackoverflow.com/users/193785/bookofgreg"}, "reply_to_user": {"reputation": 13537, "user_id": 1661173, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/92abef883bd0909b26f5b8a25fee6f6f?s=128&d=identicon&r=PG", "display_name": "tomasz74", "link": "https://stackoverflow.com/users/1661173/tomasz74"}, "edited": false, "score": 0, "creation_date": 1548106767, "post_id": 54297735, "comment_id": 95416659, "body": "You can&#39;t change the thing you are iterating on inside a loop. Make a 2nd variable to collect the different events. I&#39;ll edit my answer. If you&#39;re just learning, try writing the program without mutating any variables, always assign a new variable. It&#39;s a functional programming trick to reduce confusing statefullness."}], "tags": [], "owner": {"reputation": 3164, "user_id": 193785, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b9110bc3c6f788945c789bf190932dc1?s=128&d=identicon&r=PG", "display_name": "BookOfGreg", "link": "https://stackoverflow.com/users/193785/bookofgreg"}, "is_accepted": false, "score": 1, "last_activity_date": 1548107006, "last_edit_date": 1548107006, "creation_date": 1548104561, "answer_id": 54297735, "question_id": 54297681, "link": "https://stackoverflow.com/questions/54297681/ruby-do-statements-if-hash-key-satisfies-condition/54297735#54297735", "title": "ruby do statements if hash key satisfies condition", "body": "<p>The <code>if</code> starts a block, such as other structures <code>if ... else ... end</code> <code>do ... end</code> <code>begin ... rescue ... end</code></p>\n\n<p>Therefore your first example remove the <code>do</code> after the <code>if</code>, the block is already open. I also made it clearer by changing the block after <code>each_pair</code> to use <code>do ... end</code> rather than braces to help avoid confusing a hash with a block.</p>\n\n<pre><code>event = { 'first_type_a' =&gt; 100, 'first_type_b' =&gt; false, 'second_type_a' =&gt; 'abc', 'second_type_b' =&gt; false }\nnew_event = {}\nevent.each_pair do |k, v|\n  if !!(/first_type_*/  =~ k)\n    important_key = ['important', k.split('_', 3)[2]].join('.')\n    new_event[important_key] = v\n  else\n    new_event[k] = v\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1548119834, "last_edit_date": 1548119834, "creation_date": 1548113757, "answer_id": 54299254, "question_id": 54297681, "link": "https://stackoverflow.com/questions/54297681/ruby-do-statements-if-hash-key-satisfies-condition/54299254#54299254", "title": "ruby do statements if hash key satisfies condition", "body": "<p>I will just show how this can be done quite economically in Ruby. Until recently, when wanting to modify keys of a hash one usually would do one of two things:</p>\n\n<ul>\n<li>create a new empty hash and then add key/values pairs to the hash; or</li>\n<li>convert the hash to an array <code>a</code> of two-element arrays (key-value pairs), modify the first element of each element of <code>a</code> (the key) and then convert <code>a</code> to the desired hash.</li>\n</ul>\n\n<p>Recently (with MRI v2.4) the Ruby monks bestowed on us the handy methods <a href=\"http://ruby-doc.org/core-2.5.0/Hash.html#method-i-transform_keys\" rel=\"nofollow noreferrer\">Hash#transform_keys</a> and <a href=\"http://ruby-doc.org/core-2.5.0/Hash.html#method-i-transform_keys-21\" rel=\"nofollow noreferrer\">Hash#transform_keys!</a>. We can use the first of these profitably here. First we need a regular expression to match keys.</p>\n\n<pre><code>r = /\n    \\A           # match beginning of string\n    first_type_  # match string\n    (\\p{Lower}+) # match 1+ lowercase letters in capture group 1\n    \\z           # match the end of the string\n    /x           # free-spacing regex definition mode\n</code></pre>\n\n<p>Conventionally, this is written</p>\n\n<pre><code>r = /\\Afirst_type_(\\p{Lower}+)\\z/\n</code></pre>\n\n<p>The use of <em>free-spacing mode</em> makes the regex self-documenting. We now apply the <code>transform_keys</code> method, together with the method <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-sub\" rel=\"nofollow noreferrer\">String#sub</a> and the regex just defined.</p>\n\n<pre><code>event = {\"first_type_a\"=&gt;100, \"first_type_b\"=&gt;false,\n         \"second_type_a\"=&gt;\"abc\", \"second_type_b\"=&gt;false}\n\nevent.transform_keys { |k| k.sub(r, \"important.#{'\\1'}_1\") }\n  #=&gt; {\"important.a_1\"=&gt;100, \"important.b_1\"=&gt;false,\n  #    \"second_type_a\"=&gt;\"abc\", \"second_type_b\"=&gt;false} \n</code></pre>\n\n<p>In the regex the <em>p{} construct</em> expression <code>\\p{Lower}</code> could be replaced with <code>\\p{L}</code>, the <em>POSIX bracket expression</em> <code>[[:lower:]]</code> (both match Unicode letters) or <code>[a-z]</code>, but the last has the disadvantage that it will not match letters with diacritical marks. That includes letters of words borrowed from other languages that are used in English text (such as ros\u00e9, the wine). Search <a href=\"http://ruby-doc.org/core-2.5.1/Regexp.html\" rel=\"nofollow noreferrer\">Regexp</a> for documentation of POSIX and <code>\\p{}</code> expressions. </p>\n\n<p>If <code>\"first_type_\"</code> could be followed by lowercase or uppercase letters use <code>\\p{Alpha}</code>; if it could be followed by alphanumeric characters, use <code>\\p{Alnum}</code>, and so on.</p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 1, "last_activity_date": 1548242555, "last_edit_date": 1548242555, "creation_date": 1548184435, "answer_id": 54314963, "question_id": 54297681, "link": "https://stackoverflow.com/questions/54297681/ruby-do-statements-if-hash-key-satisfies-condition/54314963#54314963", "title": "ruby do statements if hash key satisfies condition", "body": "<p>You could define a method to be used inside the transform key call:</p>\n\n<pre><code>def transform(str)\n  return ['important.', str.split('_').last, '_1'].join() if str[0..4] == 'first' # I checked just for \"first\"\n  str\nend\n\nevent.transform_keys! { |k| transform(k) } # Ruby &gt;= 2.5 \nevent.map { |k, v| [transform(k), v] }.to_h # Ruby &lt; 2.5 \n</code></pre>\n\n<p>Using <a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-each_pair\" rel=\"nofollow noreferrer\"><code>Hash#each_pair</code></a> but with <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\"><code>Enumerable#each_with_object</code></a>:</p>\n\n<pre><code>event.each_pair.with_object({}) { |(k, v), h| h[transform(k)] = v }\n</code></pre>\n\n<p><strong>Or use as one liner:</strong></p>\n\n<pre><code>event.transform_keys { |str| str[0..4] == 'first' ? ['important.', str.split('_').last, '_1'].join() : str  }\n</code></pre>\n"}], "owner": {"reputation": 13537, "user_id": 1661173, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/92abef883bd0909b26f5b8a25fee6f6f?s=128&d=identicon&r=PG", "display_name": "tomasz74", "link": "https://stackoverflow.com/users/1661173/tomasz74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "accepted_answer_id": 54299254, "answer_count": 3, "score": 0, "last_activity_date": 1548242555, "creation_date": 1548104249, "last_edit_date": 1548124155, "question_id": 54297681, "link": "https://stackoverflow.com/questions/54297681/ruby-do-statements-if-hash-key-satisfies-condition", "title": "ruby do statements if hash key satisfies condition", "body": "<p>I have:</p>\n\n<pre><code>event = {\"first_type_a\" =&gt; 100, \"first_type_b\" =&gt; false, \"second_type_a\" =&gt; \"abc\", \"second_type_b\" =&gt; false}\n</code></pre>\n\n<p>I am trying to change the keys of <code>event</code> based on the original. If the name contains a substring, the name will be changed, and the new key, pair value should be added, and the old pair should be removed. I expect to get:</p>\n\n<pre><code>event = {\"important.a_1\" =&gt; 100, \"important.b_1\" =&gt; false, \"second_type_a\" =&gt; \"abc\", \"second_type_b\" =&gt; false}\n</code></pre>\n\n<p>What would be the most efficient way to update <code>event</code>?</p>\n\n<p>I expected this to work:</p>\n\n<pre><code>event.each_pair { |k, v|\n  if !!(/first_type_*/  =~ k) do\n        key = \"#{[\"important\", k.split(\"_\", 3)[2]].join(\".\")}\";\n        event.merge!(key: v);\n        event.delete(k)  \n  end\n}\n</code></pre>\n\n<p>but it raises an error:</p>\n\n<pre><code>  simpleLoop.rb:5: syntax error, unexpected keyword_do, expecting keyword_then or ';' or '\\n'\n  ... if !!(/first_type_*/  =~ k) do\n  ...                             ^~\n  simpleLoop.rb:9: syntax error, unexpected keyword_end, expecting '}'\n    end\n    ^~~\n  simpleLoop.rb:21: embedded document meets end of file\n</code></pre>\n\n<p>I thought to approach it differently:</p>\n\n<pre><code>if result = event.keys.find { |k| k.include? \"first_type_\" } [\n  key = \"#{[\"important\", k.split(\"_\", 3)[2]].join(\".\")}\"\n  event.merge!(key: v)\n  event.delete(k)\n]\n</code></pre>\n\n<p>but still no luck. I am counting all brackets, and as the error indicates, it is something there, but I can't find it. Does the order matter?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "error-handling", "rspec"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1548103272, "post_id": 54296866, "comment_id": 95415329, "body": "it looks like the error is not getting intercepted by <code>expect { change }</code> ... can you show the model callbacks (how <code>valid_category?</code> is called) and the whole rspec caseq"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1548103783, "post_id": 54296866, "comment_id": 95415519, "body": "Yes, need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 109, "user_id": 8071893, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3ThMzDC1zHc/AAAAAAAAAAI/AAAAAAAAAHY/tzhjwyPHzxA/photo.jpg?sz=128", "display_name": "leahtsdudley", "link": "https://stackoverflow.com/users/8071893/leahtsdudley"}, "edited": false, "score": 0, "creation_date": 1548105212, "post_id": 54296866, "comment_id": 95416080, "body": "I updated with more thorough examples."}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1548106441, "post_id": 54296866, "comment_id": 95416546, "body": "<code>Bronze</code> and <code>bronze</code> are not the same. And what&#39; about <code>CATEGORIES</code>? May be problem is that array includes your category?"}, {"owner": {"reputation": 109, "user_id": 8071893, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3ThMzDC1zHc/AAAAAAAAAAI/AAAAAAAAAHY/tzhjwyPHzxA/photo.jpg?sz=128", "display_name": "leahtsdudley", "link": "https://stackoverflow.com/users/8071893/leahtsdudley"}, "reply_to_user": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1548106874, "post_id": 54296866, "comment_id": 95416702, "body": "@mechnicov I forgot to include that I have a method in UpgradePackageRecorder that downcases all the categories when they get there. Also, I double checked that the categories array does not include &#39;bronze&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548170866, "post_id": 54311172, "comment_id": 95442920, "body": "&quot;It was verifying whether the record_change method went on to create a certain object.&quot; - well, <i>that</i> was the problem, not the curly brace vs do/end. Regardless, good job figuring this out."}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "edited": false, "score": 1, "creation_date": 1548173601, "post_id": 54311172, "comment_id": 95444633, "body": "You should probably separate the tests, so <code>subject { described_class.new(&#39;Bronze&#39;) }</code> can be put at the context level, and then you can spec different things on the same object, in separate <code>it</code> blocks."}], "tags": [], "owner": {"reputation": 109, "user_id": 8071893, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3ThMzDC1zHc/AAAAAAAAAAI/AAAAAAAAAHY/tzhjwyPHzxA/photo.jpg?sz=128", "display_name": "leahtsdudley", "link": "https://stackoverflow.com/users/8071893/leahtsdudley"}, "is_accepted": false, "score": 0, "last_activity_date": 1548169781, "creation_date": 1548169781, "answer_id": 54311172, "question_id": 54296866, "link": "https://stackoverflow.com/questions/54296866/how-do-i-test-that-a-runtimeerror-is-using-string-interpolation-correctly-in-rub/54311172#54311172", "title": "How do I test that a RuntimeError is using string interpolation correctly in Ruby?", "body": "<p>I figured it out!</p>\n\n<p>The syntax that ended up working for me was this:</p>\n\n<pre><code>it 'raises an error' do\n\n  expect do\n    UpgradePackageRecorder.new(\n      'Bronze'\n    ).record_change\n  end.to raise_error(\n    RuntimeError, /bronze is not a recognized category/\n  )\n\nend\n</code></pre>\n\n<p>Also, I had another <code>expect</code> in the same <code>it</code> block that I removed. It was verifying whether the <code>record_change</code> method went on to create a certain object.</p>\n"}], "owner": {"reputation": 109, "user_id": 8071893, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3ThMzDC1zHc/AAAAAAAAAAI/AAAAAAAAAHY/tzhjwyPHzxA/photo.jpg?sz=128", "display_name": "leahtsdudley", "link": "https://stackoverflow.com/users/8071893/leahtsdudley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548169781, "creation_date": 1548100125, "last_edit_date": 1548105187, "question_id": 54296866, "link": "https://stackoverflow.com/questions/54296866/how-do-i-test-that-a-runtimeerror-is-using-string-interpolation-correctly-in-rub", "title": "How do I test that a RuntimeError is using string interpolation correctly in Ruby?", "body": "<p>I have a method which records a change to a particular record in my database, but first, it checks to category type for validity before going any further. If this returns false, an error is raised.</p>\n\n<pre><code>class UpgradePackageRecorder\n\n  CATEGORIES = [ an array of categories here ... ]\n\n  def initialize(category)\n    @category = category\n  end\n\n  def record_change\n    unless valid_category?\n      raise \"#{category} is not a recognized category\"\n    end\n\n    other_methods\n  end\n\n  private\n\n  def valid_category?\n    CATEGORIES.include?(category)\n  end\n\nend\n</code></pre>\n\n<p>I began writing an rspec test for this to verify that the error was being raised properly. Here is the test case:</p>\n\n<pre><code>RSpec.describe UpgradePackageRecorder do\n  describe '#record_change' do\n    context 'the package type is invalid' do\n      it 'raises an error' do\n\n       recorder = UpgradePackageRecorder.new('Bronze')\n\n       expect { recorder.record_change }.to raise_error(RuntimeError, /bronze is not a recognized category/)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>When I ran the test I got this error:</p>\n\n<pre><code>Failure/Error: raise \"#{category} is not a recognized category\"\n\nRuntimeError:\n  bronze is not a recognized category\n</code></pre>\n\n<p>Why is the string interpolation showing up like this? I also tried it like\n<code>category + ' is not a recognized category</code> but that did not fix the issue.</p>\n\n<p>To make this even more confusing, I took the string interpolation out and still saw the issue:</p>\n\n<pre><code>Failure/Error: raise \"Unrecognized category\"\n\nRuntimeError:\n  Unrecognized category\n</code></pre>\n"}, {"tags": ["ruby", "instance-variables"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1548098529, "creation_date": 1548098529, "answer_id": 54296543, "question_id": 54296485, "link": "https://stackoverflow.com/questions/54296485/hashkey-is-to-hash-fetchkey-as-ivar-is-to-what/54296543#54296543", "title": "hash[key] is to hash.fetch(key) as @ivar is to what?", "body": "<p>If you mean <code>h[k]</code> is the easy form of <code>h.fetch(k)</code> then by analog:</p>\n\n<pre><code>@ivar\ninstance_variable_get(:@ivar)\n</code></pre>\n\n<p>The <a href=\"https://ruby-doc.org/core-2.6/Object.html#method-i-instance_variable_get\" rel=\"nofollow noreferrer\"><code>instance_variable_get</code></a> method provides arbitrary access to instance variables.</p>\n\n<p>The difference here is that <code>h[k]</code> calls <code>Hash#[]</code> which returns <code>nil</code> if no key is found, while <code>h.fetch(k)</code> calls <code>Hash#fetch</code> and <strong>raises an exception if the key is not found</strong>. This difference is important enough to note here.</p>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 5, "last_activity_date": 1548099642, "last_edit_date": 1548099642, "creation_date": 1548099322, "answer_id": 54296700, "question_id": 54296485, "link": "https://stackoverflow.com/questions/54296485/hashkey-is-to-hash-fetchkey-as-ivar-is-to-what/54296700#54296700", "title": "hash[key] is to hash.fetch(key) as @ivar is to what?", "body": "<p>There is no built in method that provides this functionality in respect to instance variables, however;</p>\n\n<p>Since <code>Hash#[]</code> is analogous to <code>@ivar</code> (or <code>instance_variable_get(:@ivar)</code>) in your example then <code>Hash#fetch</code> would be analogous to </p>\n\n<pre><code>def instance_variable_fetch(sym)\n  raise(NameError, \"instance variable not found: #{sym}\") unless instance_variable_defined?(sym) \n  instance_variable_get(sym)\nend \n</code></pre>\n\n<p>Example: </p>\n\n<pre><code>@var = 42\ninstance_variable_fetch(:@var)\n#=&gt; 42\n@ivar = nil\ninstance_variable_fetch(:@ivar)\n#=&gt; nil\ninstance_variable_fetch(:@other_var)\n#=&gt; NameError: instance variable not found: @other_var\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1548106666, "creation_date": 1548106666, "answer_id": 54298099, "question_id": 54296485, "link": "https://stackoverflow.com/questions/54296485/hashkey-is-to-hash-fetchkey-as-ivar-is-to-what/54298099#54298099", "title": "hash[key] is to hash.fetch(key) as @ivar is to what?", "body": "<p>To do that I believe you would need to access the value of the instance variable, from with the class, through a getter exclusively. The getter could be made private.</p>\n\n<pre><code>class C\n  attr_writer :ivar\n  alias :o_instance_variable_get :instance_variable_get\n\n  def ivar\n    givar\n  end\n\n  def instance_variable_get(v)\n    (v==:@ivar || v==\"@ivar\") ? givar : o_instance_variable_get(v)\n  end\n\n  def tell_ivar\n    puts \"#{givar} is the value of @ivar\"\n  end\n\n  private\n\n  def givar\n    raise RuntimeError, \"@ivar has not been set\" unless\n      instance_variables.include?(:@ivar)\n    @ivar\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>i = C.new\ni.instance_variables\n  #=&gt; []\ni.ivar\n  #=&gt; RuntimeError (@ivar has not been set)\ni.instance_variable_get(:@ivar)\n  #=&gt; RuntimeError (@ivar has not been set)\ni.tell_ivar\n  #=&gt; RuntimeError (@ivar has not been set)\ni.ivar = 'cat'\ni.instance_variables\n  #=&gt; [:@ivar]\ni.ivar\n  #=&gt; \"cat\" \ni.instance_variable_get(:@ivar)\n  #=&gt; \"cat\" \ni.tell_ivar\n  # cat is the value of @ivar \n</code></pre>\n\n<p>The (public) getter method <code>ivar</code> may be removed if it is not wanted. </p>\n\n<p><code>@ivar</code> will return <code>nil</code> regardless of whether it has not been defined or has been initialize to <code>nil</code>. Similarly,  <a href=\"http://ruby-doc.org/core-2.5.1/Object.html#method-i-instance_variable_get\" rel=\"nofollow noreferrer\">Object#instance_variable_get</a> returns <code>nil</code> if the instance variable has not been defined or <code>nil</code> is its current value. <code>i.instance_variables.include(:@ivar)</code> is the only way I could think of to determine whether <code>@ivar</code> has been defined, possibly equal to <code>nil</code>. </p>\n"}], "owner": {"reputation": 117, "user_id": 10457156, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AZw1gkCmwyE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVloGcE4rtJ4TOUFh8qJl7DyKHIdQ/mo/photo.jpg?sz=128", "display_name": "Simon Jakobi", "link": "https://stackoverflow.com/users/10457156/simon-jakobi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 54296700, "answer_count": 3, "score": 2, "last_activity_date": 1548124413, "creation_date": 1548098260, "question_id": 54296485, "link": "https://stackoverflow.com/questions/54296485/hashkey-is-to-hash-fetchkey-as-ivar-is-to-what", "title": "hash[key] is to hash.fetch(key) as @ivar is to what?", "body": "<p>To expand on the title: How can I access an instance variable (<code>@ivar</code>) in a way that results in an exception if the instance variable hasn't been initialized?</p>\n"}, {"tags": ["ruby", "hanami"], "answers": [{"tags": [], "owner": {"reputation": 160, "user_id": 6709718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3f7e1c09dc77be70077c3534213b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph L.", "link": "https://stackoverflow.com/users/6709718/joseph-l"}, "is_accepted": true, "score": 2, "last_activity_date": 1548097043, "creation_date": 1548097043, "answer_id": 54296266, "question_id": 54296096, "link": "https://stackoverflow.com/questions/54296096/hanami-rake-task-does-not-load-repositories/54296266#54296266", "title": "Hanami rake task does not load repositories", "body": "<p>As it turns out, it was a foolish mistake. I forgot to add <code>:environment</code> to my task.</p>\n\n<pre><code>namespace :motel do\n  task book: :environment do\n    Booking::Motel::Booker.new.book\n  end\nend\n</code></pre>\n\n<p>That fixed it and dropped the need to use manual file loading, of course.</p>\n"}], "owner": {"reputation": 160, "user_id": 6709718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3f7e1c09dc77be70077c3534213b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph L.", "link": "https://stackoverflow.com/users/6709718/joseph-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 54296266, "answer_count": 1, "score": 1, "last_activity_date": 1548097043, "creation_date": 1548096307, "last_edit_date": 1548096740, "question_id": 54296096, "link": "https://stackoverflow.com/questions/54296096/hanami-rake-task-does-not-load-repositories", "title": "Hanami rake task does not load repositories", "body": "<p>I have hanami 1.3.0 app named <code>booking</code>. There is rake task in <code>/rakelib/motel.rake</code> :</p>\n\n<pre><code>require_relative '../lib/booking' # it requires booking/motel/booker file\n\nnamespace :motel do\n  task :book do\n    Booking::Motel::Booker.new.book\n  end\nend\n</code></pre>\n\n<p><code>booking/motel/booker</code> requires booking_repository file, and tries to instantiate BookingRepository, but fails with error: </p>\n\n<pre><code>NameError: uninitialized constant Hanami::Repository\n&lt;root&gt;/lib/booking/repositories/booking_repository.rb:1:in &lt;top (required)&gt;'\n</code></pre>\n\n<p>However, when I run <code>Booking::Motel::Booker.new.book</code> in hanami console, it loads <code>BookingRepository</code> without problems.</p>\n\n<p>Looked at numerous stack questions regarding hanami rake, but couldn't find an answer.</p>\n"}, {"tags": ["ruby", "selenium", "protractor", "jsoup", "nokogiri"], "comments": [{"owner": {"reputation": 4877, "user_id": 2571256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90c6023cd605708e1ca5afc6afbf029?s=128&d=identicon&r=PG", "display_name": "cnishina", "link": "https://stackoverflow.com/users/2571256/cnishina"}, "edited": false, "score": 1, "creation_date": 1548106534, "post_id": 54295764, "comment_id": 95416582, "body": "Although this question probably will have multiple answers based on opinion, this is my thoughts about using Protractor. You should look into Protractor with TypeScript using async / await. If you are using a non-Angular app, be sure to await waitForAngularEnabled(false) so Protractor does not bootstrap your app with Angular testability. Selenium and Protractor both do not parse the DOM but query the DOM through json wire protocol or the W3C standards. In this regard, I guess it might be slower since it is making an async execute call per query."}, {"owner": {"reputation": 4877, "user_id": 2571256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90c6023cd605708e1ca5afc6afbf029?s=128&d=identicon&r=PG", "display_name": "cnishina", "link": "https://stackoverflow.com/users/2571256/cnishina"}, "edited": false, "score": 0, "creation_date": 1548106677, "post_id": 54295764, "comment_id": 95416629, "body": "If you are querying a table, look at <a href=\"http://www.protractortest.org/#/api?view=ElementArrayFinder.prototype.all\" rel=\"nofollow noreferrer\">protractortest.org/#/api?view=ElementArrayFinder.prototype.a&zwnj;&#8203;ll</a>. Just remember, it is an ElementArrayFinder object and you can use <code>.filter</code>, <code>.map</code>, .<code>reduce</code>, <code>.each</code>, etc."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 1, "creation_date": 1548115509, "post_id": 54295764, "comment_id": 95419297, "body": "The top html parsers for javascript are jQuery (browser only) and cheerio (node.js)"}], "owner": {"reputation": 891, "user_id": 1598222, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/i05g1.png?s=128&g=1", "display_name": "James Martineau", "link": "https://stackoverflow.com/users/1598222/james-martineau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1581291417, "creation_date": 1548094911, "last_edit_date": 1581291417, "question_id": 54295764, "link": "https://stackoverflow.com/questions/54295764/does-protractor-have-the-same-slow-find-times-as-selenium-and-if-so-is-there-a", "title": "Does Protractor have the same slow find times as Selenium, and if so, is there an in-memory parsing option?", "body": "<p>I've used Selenium a lot in the past with Java, Ruby and Groovy, and have often been called upon to read large data tables. Making nested find calls to drill into a table is costly with Selenium, so in the past I've used an in-memory parser like <a href=\"https://nokogiri.org/\" rel=\"nofollow noreferrer\">Nokogiri (Ruby)</a> or <a href=\"https://jsoup.org/\" rel=\"nofollow noreferrer\">JSoup (Java)</a> to read the page into memory, parse it very quickly into objects that are easy to manipulate and read. Then, if I need to interact with any of the objects, I map back to Selenium with only a few find calls, using the information that I've already parsed to narrow it down.</p>\n\n<p>I'm now writing UI Automation using Protractor, although we are not testing Angular apps. I'm wondering if Protractor will present the same problems if I were to perform nested find calls on a large table, and if Protractor or Javascript offer some better way to get at the data faster. If not, is there a library our there for Javascript that's comparable to Nokogiri or JSoup? I'm new to Javascript, so I'm not well versed on what the options are. Thanks!</p>\n"}, {"tags": ["ruby", "macos", "image-processing", "ffmpeg"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1548097603, "post_id": 54295358, "comment_id": 95413035, "body": "I would try to get the ffmpeg wrapper to write the screenshot to a file stream (rather than using a file name). Then you could read it directly into Ruby using whatever image library and avoid saving/loading on disk. Looking at the source of streamio-ffmpeg, it&#39;s a pretty thin wrapper around the command line so it should be pretty easy,"}, {"owner": {"reputation": 20658, "user_id": 584713, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d43dc36474bd0a252ed907d46511ded7?s=128&d=identicon&r=PG", "display_name": "Robin", "link": "https://stackoverflow.com/users/584713/robin"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1548133352, "post_id": 54295358, "comment_id": 95423125, "body": "All the wrapper is doing is making it easier to pass options to the command line tool. So I would need ffmpeg to support this, and I dont think it does (or I couldnt find it). It does give a way to stream a video out to a server, so I think that might be the way to go... I was hoping there was another simple library that could do this."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1548162295, "post_id": 54295358, "comment_id": 95437380, "body": "At the very least you can make ffmpeg write to a fifo. It will think it&#39;s writing a normal file but you can read it directly into ruby."}, {"owner": {"reputation": 20658, "user_id": 584713, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d43dc36474bd0a252ed907d46511ded7?s=128&d=identicon&r=PG", "display_name": "Robin", "link": "https://stackoverflow.com/users/584713/robin"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1548201887, "post_id": 54295358, "comment_id": 95456266, "body": "You mean something like using <code>mkfifo my_fifo</code>, and then having ffmpeg write in this named pipe, and &quot;reading&quot; from my script? I just dont know how to get ffmpeg to output into this pipe. <code>ffmpeg -i mypic.jpg &gt; my_fifo</code> would only work if ffmpeg was outputing stuff to stdout, no? If it&#39;s literally writing to the file mypic.jpg internally, I dont see how I can change that. If you know of a specific solution, please let me know."}, {"owner": {"reputation": 20658, "user_id": 584713, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d43dc36474bd0a252ed907d46511ded7?s=128&d=identicon&r=PG", "display_name": "Robin", "link": "https://stackoverflow.com/users/584713/robin"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1548215232, "post_id": 54295358, "comment_id": 95458935, "body": "@Max <a href=\"https://stackoverflow.com/questions/32584220/how-to-make-ffmpeg-write-its-output-to-a-named-pipe\" title=\"how to make ffmpeg write its output to a named pipe\">stackoverflow.com/questions/32584220/&hellip;</a> turns out, I just had to google the right thing, and you definitely put me on the right track. Thanks. (Feel free to post any answer related to that and I&#39;ll accept it)."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1548254172, "post_id": 54295358, "comment_id": 95477166, "body": "Glad it helped. Answer posted"}], "answers": [{"comments": [{"owner": {"reputation": 2117, "user_id": 3709300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oqNTQ.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/3709300/justin"}, "edited": false, "score": 0, "creation_date": 1578774287, "post_id": 54329611, "comment_id": 105551050, "body": "Could you elaborate some on this?  I think I understand creating the named pipe and feeding it to ffmpeg, but so far I can only read back a single screenshot written to the pipe.  I can&#39;t seem to figure out how to say like File.open run this block for each file in the stream."}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1548254146, "creation_date": 1548254146, "answer_id": 54329611, "question_id": 54295358, "link": "https://stackoverflow.com/questions/54295358/access-pixel-data-of-each-frame-of-a-video-in-ruby/54329611#54329611", "title": "Access pixel data of each frame of a video in Ruby", "body": "<p>If you have ffmpeg available (streamio-ffmpeg just wraps command line calls to ffmpeg), you can create a named pipe with <a href=\"https://ruby-doc.org/core/File.html#method-c-mkfifo\" rel=\"nofollow noreferrer\"><code>File.mkfifo</code></a> and have ffmpeg write its screenshots to that pipe.</p>\n\n<p>Then open the pipe in Ruby like you would any normal file and you can read the screenshot images directly from ffmpeg without them being transferred to/from disk. Parse the pixel data with the Ruby gem of your choice.</p>\n"}], "owner": {"reputation": 20658, "user_id": 584713, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d43dc36474bd0a252ed907d46511ded7?s=128&d=identicon&r=PG", "display_name": "Robin", "link": "https://stackoverflow.com/users/584713/robin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 54329611, "answer_count": 1, "score": 1, "last_activity_date": 1548254146, "creation_date": 1548093028, "question_id": 54295358, "link": "https://stackoverflow.com/questions/54295358/access-pixel-data-of-each-frame-of-a-video-in-ruby", "title": "Access pixel data of each frame of a video in Ruby", "body": "<p>I want to be able to read/stream a video with Ruby, on Mac, and be able to get access to the pixel data for each frame.</p>\n\n<h1>What I've tried</h1>\n\n<ul>\n<li><p><a href=\"https://github.com/streamio/streamio-ffmpeg\" rel=\"nofollow noreferrer\">https://github.com/streamio/streamio-ffmpeg</a></p>\n\n<p>It's good at splitting the video into frames, but I don't know how to get access to the pixel data without saving each frame as an image first (or if it's possible at all).</p></li>\n</ul>\n\n<hr>\n\n<pre><code>require 'streamio-ffmpeg'\nmovie = FFMPEG::Movie.new(\"flakes.mp4\")\n\nmovie.screenshot(\"screenshots/screenshot_%d.jpg\", { custom: %w(-vf crop=60:60:10:10), vframes: (movie.duration).to_i, frame_rate: movie.frame_rate/24 }, { validate: false })`\n</code></pre>\n\n<hr>\n\n<ul>\n<li><p><a href=\"https://github.com/wedesoft/hornetseye-ffmpeg\" rel=\"nofollow noreferrer\">https://github.com/wedesoft/hornetseye-ffmpeg</a></p>\n\n<p>This seemed to have so much potential, but I don't think it's maintained anymore, and it's not meant to be used on MacOS really, so I'm having issues installing it there (headers not found and such, and no way to configure it afaik).</p></li>\n</ul>\n\n<p>Any idea what tool or method I could use for this use case?</p>\n"}, {"tags": ["ruby", "trailblazer"], "comments": [{"owner": {"reputation": 3359, "user_id": 363789, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/97228cbed9f6eef1b4573c34f6931872?s=128&d=identicon&r=PG", "display_name": "elsurudo", "link": "https://stackoverflow.com/users/363789/elsurudo"}, "edited": false, "score": 0, "creation_date": 1576417286, "post_id": 54295248, "comment_id": 104885563, "body": "Did you ever find the answer to this? I would be curious, as well."}], "answers": [{"tags": [], "owner": {"reputation": 1367, "user_id": 2177206, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5a10b7c7788285f35a3ded3322027097?s=128&d=identicon&r=PG", "display_name": "Yogesh Khater", "link": "https://stackoverflow.com/users/2177206/yogesh-khater"}, "is_accepted": false, "score": 2, "last_activity_date": 1578989913, "creation_date": 1578989913, "answer_id": 59729836, "question_id": 54295248, "link": "https://stackoverflow.com/questions/54295248/trailblazer-which-step-caused-my-operation-to-fail/59729836#59729836", "title": "Trailblazer: Which step caused my operation to fail?", "body": "<p>There is this gem now which provides operation specific debugging utilities - <a href=\"https://github.com/trailblazer/trailblazer-developer\" rel=\"nofollow noreferrer\">https://github.com/trailblazer/trailblazer-developer</a></p>\n\n<p>It allows you to see exactly which step raised the exception or which step caused the track to change from success to failure.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Trailblazer::Developer.wtf?(MyOperation, options)\n</code></pre>\n\n<p>It will print the trace of steps on STDOUT/Logger.</p>\n\n<p><a href=\"https://i.stack.imgur.com/j3QxB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j3QxB.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 117, "user_id": 10457156, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AZw1gkCmwyE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVloGcE4rtJ4TOUFh8qJl7DyKHIdQ/mo/photo.jpg?sz=128", "display_name": "Simon Jakobi", "link": "https://stackoverflow.com/users/10457156/simon-jakobi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1578991330, "creation_date": 1548092579, "question_id": 54295248, "link": "https://stackoverflow.com/questions/54295248/trailblazer-which-step-caused-my-operation-to-fail", "title": "Trailblazer: Which step caused my operation to fail?", "body": "<p>Given an operation like</p>\n\n<pre><code>class MyOperation &lt; Trailblazer::Operation\n  step :do_a!\n  step :do_b!\n\n  def do_a(options, **)\n    false\n  end\n\n  def do_b(options, **)\n    true\n  end\nend\n</code></pre>\n\n<p>and the result of <code>run(MyOperation)</code>, how can I tell which step of the operation failed?</p>\n\n<p>If the result object doesn't contain this info by default, what's a good way to add it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu", "configuration", "rubygems"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1548091664, "post_id": 54294830, "comment_id": 95410489, "body": "Did you install <code>rvm</code> with <code>sudo</code>? If so, then you may need to uninstall and try again. Under normal circumstances, <code>rvm</code> does not require <code>sudo</code>, and will not work properly if you installed it with <code>sudo</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1548091753, "post_id": 54294830, "comment_id": 95410535, "body": "In other words, your issue is that (1) <code>bunder</code> is not installed, and (2) <code>gem install bundler</code> does not work (because you installed RVM with <code>sudo</code>?), and (3) running <code>sudo gem install bundler</code> is installing the gem in a different environment, which won&#39;t help."}, {"owner": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1548091977, "post_id": 54294830, "comment_id": 95410636, "body": "I have uninstalled it and reinstalled without sudo, get this error from bundler  1Undefined local variable or method `git_source&#39; for Gemfile&#39;"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1548103328, "post_id": 54294830, "comment_id": 95415349, "body": "What is the output of <code>bundle -v</code> and <code>which bundle</code>? <code>git_source</code> was added in bundler version <code>1.16.0</code> -- So again, I&#39;m guessing your environment might be messed up due to the way things had been installed."}, {"owner": {"reputation": 176, "user_id": 8540055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d4c940ad6c96e49b919ffc37bd85c14?s=128&d=identicon&r=PG&f=1", "display_name": "adarsh", "link": "https://stackoverflow.com/users/8540055/adarsh"}, "edited": false, "score": 1, "creation_date": 1548135901, "post_id": 54294830, "comment_id": 95423818, "body": "@selim dont install with rvm, Install Ruby on Rails with rbenv (RVM is more resourceful but rbenv is lightweight which makes it a strong contender for RVM)"}], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "edited": false, "score": 0, "creation_date": 1548091918, "post_id": 54295057, "comment_id": 95410610, "body": "now I get the following error:   &#39; Undefined local variable or method <code>git_source&#39; for Gemfile</code>, also how to add to $PATH variable"}, {"owner": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "edited": false, "score": 0, "creation_date": 1548092346, "post_id": 54295057, "comment_id": 95410794, "body": "ruby -v is 2.5.1, the i run gem instal bundler, it download bundler 2.01, but when i run bundle install, I get this error, can&#39;t find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException"}, {"owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "reply_to_user": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "edited": false, "score": 0, "creation_date": 1548092444, "post_id": 54295057, "comment_id": 95410834, "body": "how about update bundler first with this command gem update bundler"}, {"owner": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "edited": false, "score": 0, "creation_date": 1548092622, "post_id": 54295057, "comment_id": 95410905, "body": "Tried it several times but still failing"}], "tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": false, "score": 1, "last_activity_date": 1548091959, "last_edit_date": 1548091959, "creation_date": 1548091789, "answer_id": 54295057, "question_id": 54294830, "link": "https://stackoverflow.com/questions/54294830/installing-ruby-digital-ocean-rvm-unstable-ruby-version-cant-install-ge/54295057#54295057", "title": "Installing Ruby - Digital Ocean - RVM - Unstable ruby version - Can&#39;t install Gems", "body": "<p>install ruby 2.5.1 first, from your image it seems rvm already installed correctly\nyou just need to install it (it shows from your list command)</p>\n\n<pre><code>rvm install 2.5.1\n# this to install version 2.5.1\nrvm use 2.5.1\n# active ruby 2.5.1\nruby -v\n# check your version and make sure it said 2.5.1 \n</code></pre>\n\n<p>to install bundler to your home directory use </p>\n\n<pre><code># after you active ruby 2.5.1 then install bundler\ngem install bundler \n# my suggestion do not install with sudo\n# in case you still has write problem below is other solution suggested [from here][1]\ngem install bundler --user-install\n</code></pre>\n\n<p>This will install Bundler <strong>into your home directory</strong>. Note that you will need to append ~/.gem/ruby//bin to your $PATH variable to use bundle.</p>\n"}], "owner": {"reputation": 409, "user_id": 8863925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99b5af75de208cba57edda978af54df?s=128&d=identicon&r=PG&f=1", "display_name": "Selim Alawwa", "link": "https://stackoverflow.com/users/8863925/selim-alawwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548100600, "creation_date": 1548090844, "last_edit_date": 1548100600, "question_id": 54294830, "link": "https://stackoverflow.com/questions/54294830/installing-ruby-digital-ocean-rvm-unstable-ruby-version-cant-install-ge", "title": "Installing Ruby - Digital Ocean - RVM - Unstable ruby version - Can&#39;t install Gems", "body": "<p>I am trying to install Ruby &amp; Rails on DigitalOcean droplet, I have downloaded ruby 2.5.1 with RVM but when I check version it says 2.31 and when I list available versions I get only 2.5.1.</p>\n\n<p>I have tried rvm use 2.5.1 I got below problem</p>\n\n<p><a href=\"https://i.stack.imgur.com/jLlhd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jLlhd.png\" alt=\"enter image description here\"></a></p>\n\n<p>I fix it by running <code>source ~/.rvm/scripts/rvm</code> , then <code>rvm use 2.5.1</code> and run <code>bundle install</code>, I get the following error, </p>\n\n<blockquote>\n  <p>can't find gem bundler (>= 0.a) with executable bundle (Gem::GemNotFoundException)</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/hUGr4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hUGr4.png\" alt=\"enter image description here\"></a></p>\n\n<p>Below show the unstable issues faced from RVM and ruby versions</p>\n\n<p><a href=\"https://i.stack.imgur.com/sYtvs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sYtvs.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/HnhTV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HnhTV.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>When I ssh into the server and run ruby -v, I get 2.5.1, then if I run</p>\n\n<blockquote>\n  <p>/bin/bash --login</p>\n</blockquote>\n\n<p>I check ruby -v, its 2.5.1</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sass"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1548090557, "post_id": 54294713, "comment_id": 95409974, "body": "Do you have any sass gem in your gemfile?"}, {"owner": {"reputation": 19, "user_id": 10868609, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DhjADE_TjIk/AAAAAAAAAAI/AAAAAAAAAT0/Bg_ugX06ulU/photo.jpg?sz=128", "display_name": "Maxim", "link": "https://stackoverflow.com/users/10868609/maxim"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1548090632, "post_id": 54294713, "comment_id": 95410006, "body": "In my Gemfile I have <code>gem &#39;sassc-rails&#39;</code>, I tried to run <code>gem instal sass</code> but it still won&#39;t appear in my Gemfile"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1548095599, "post_id": 54294713, "comment_id": 95412212, "body": "You might try deleting your bootsnap cache in tmp/cache/bootsnap-compile-cache &amp; posting your full Gemfile in the question."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10868609, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DhjADE_TjIk/AAAAAAAAAAI/AAAAAAAAAT0/Bg_ugX06ulU/photo.jpg?sz=128", "display_name": "Maxim", "link": "https://stackoverflow.com/users/10868609/maxim"}, "edited": false, "score": 0, "creation_date": 1548148030, "post_id": 54297790, "comment_id": 95429143, "body": "I tried <code>bundle</code>, also <code>gem install sassc</code> , the gem is successfully installed but I keep getting the same error message"}], "tags": [], "owner": {"reputation": 11, "user_id": 10528718, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jay", "link": "https://stackoverflow.com/users/10528718/jay"}, "is_accepted": false, "score": 0, "last_activity_date": 1548104810, "creation_date": 1548104810, "answer_id": 54297790, "question_id": 54294713, "link": "https://stackoverflow.com/questions/54294713/issue-with-rails-s-with-sass-apparently/54297790#54297790", "title": "Issue with rails s (with sass apparently)", "body": "<p>Have tried <code>bundle</code> or <code>bundle install</code> before running the rails s.\nStill not working try to replace that gem with this<code>gem 'sassc'</code> and bundle or just do <code>gem install sassc</code> </p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 10868609, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DhjADE_TjIk/AAAAAAAAAAI/AAAAAAAAAT0/Bg_ugX06ulU/photo.jpg?sz=128", "display_name": "Maxim", "link": "https://stackoverflow.com/users/10868609/maxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1548162241, "creation_date": 1548162241, "answer_id": 54308941, "question_id": 54294713, "link": "https://stackoverflow.com/questions/54294713/issue-with-rails-s-with-sass-apparently/54308941#54308941", "title": "Issue with rails s (with sass apparently)", "body": "<p>Ok so I couldn't resolve the problem, so <strong>I deleted my local directory and re-cloned it from GitHub</strong>.\nI don't know if it's good practice but it resolved the problem for me, so if anyone else is having this issue and don't find a proper solution, try doing that.</p>\n"}, {"comments": [{"owner": {"reputation": 19216, "user_id": 85309, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9dda75d7ad467bf2a22de8a9d695a2dd?s=128&d=identicon&r=PG", "display_name": "Topher Fangio", "link": "https://stackoverflow.com/users/85309/topher-fangio"}, "edited": false, "score": 0, "creation_date": 1586891690, "post_id": 60223046, "comment_id": 108294599, "body": "The <code>--force</code> option has apparently been deprecated and renamed <code>--redownload</code>. Still worked for me, but thought I should point out in case someone comes across this in the future when it&#39;s actually gone."}], "tags": [], "owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "is_accepted": false, "score": 0, "last_activity_date": 1585995011, "last_edit_date": 1585995011, "creation_date": 1581670912, "answer_id": 60223046, "question_id": 54294713, "link": "https://stackoverflow.com/questions/54294713/issue-with-rails-s-with-sass-apparently/60223046#60223046", "title": "Issue with rails s (with sass apparently)", "body": "<p>The problem may be exists in <strong>gems</strong>. The problem founded by OP (and described in his answer) appears in the application files. However same problem problem may be caused in <strong>gems</strong>. The same problem in <strong>gems</strong> with same reason has identical solution.</p>\n\n<p>In details. The problem during installation or some else may corrupt some gem so it is visible as installed but actually has missed or corrupted files. Check before that hard drive has <strong>enough free space</strong>.</p>\n\n<p>So solution is <strong>fully reinstall bundle</strong> gems:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>bundle install --force\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10868609, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DhjADE_TjIk/AAAAAAAAAAI/AAAAAAAAAT0/Bg_ugX06ulU/photo.jpg?sz=128", "display_name": "Maxim", "link": "https://stackoverflow.com/users/10868609/maxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1141, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1585995011, "creation_date": 1548090375, "last_edit_date": 1548147049, "question_id": 54294713, "link": "https://stackoverflow.com/questions/54294713/issue-with-rails-s-with-sass-apparently", "title": "Issue with rails s (with sass apparently)", "body": "<p>I tried to run <code>rails s</code> but sudently I'm getting an error message: </p>\n\n<pre><code>/home/leiver/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:32:in `require': cannot load such file -- sass (LoadError)\n        from /home/leiver/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:287:in `block in require'\n        from /home/leiver/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:253:in `load_dependency'\n        from \n.....\n</code></pre>\n\n<p>I know that there's something about sass about how it's going to disapear or something and I don't know if it's linked</p>\n\n<p>Thanks if you can help :)</p>\n\n<p>EDIT</p>\n\n<p>here's my full Gemfile: </p>\n\n<pre><code>source 'https://rubygems.org'\nruby '2.4.5'\n\ngem 'bootsnap', require: false\ngem 'jbuilder', '~&gt; 2.0'\ngem 'pg', '~&gt; 0.21'\ngem 'puma'\ngem 'rails', '5.2.1'\ngem 'redis'\n\ngem 'autoprefixer-rails'\ngem 'bootstrap-sass', '~&gt; 3.3'\ngem 'font-awesome-sass', '~&gt; 5.0.9'\ngem 'sassc-rails'\ngem 'simple_form'\ngem 'uglifier'\ngem 'webpacker'\ngem 'devise'\ngem 'money-rails'\ngem \"pundit\"\n\ngroup :development do\n  gem 'web-console', '&gt;= 3.3.0'\nend\n\ngroup :development, :test do\n  gem 'pry-byebug'\n  gem 'pry-rails'\n  gem 'listen', '~&gt; 3.0.5'\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\n  gem 'dotenv-rails'\nend\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1548089584, "post_id": 54294402, "comment_id": 95409435, "body": "Show your <code>&#39;user.rb&#39;</code> (class declaration at least.)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548090228, "post_id": 54294402, "comment_id": 95409799, "body": "<i>&quot;when I remove it the spec is correctly executed&quot;</i> \u2013 so why don&#39;t you remove it?"}, {"owner": {"reputation": 11, "user_id": 10796042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e269babb07b4171a67cb6e7a26eee8ec?s=128&d=identicon&r=PG&f=1", "display_name": "stug", "link": "https://stackoverflow.com/users/10796042/stug"}, "edited": false, "score": 0, "creation_date": 1548090428, "post_id": 54294402, "comment_id": 95409903, "body": "because I want variables instanced in a bloc of the spec file to be reinitialized in other blocs, but I think i understanded wrong the send method."}, {"owner": {"reputation": 11, "user_id": 10796042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e269babb07b4171a67cb6e7a26eee8ec?s=128&d=identicon&r=PG&f=1", "display_name": "stug", "link": "https://stackoverflow.com/users/10796042/stug"}, "edited": false, "score": 0, "creation_date": 1548091029, "post_id": 54294402, "comment_id": 95410196, "body": "first of all thank, you for the time you spend on my issue. I&#39;m unfortunately don&#39;t know where i could put my entire code but in an answer"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1548090060, "post_id": 54294606, "comment_id": 95409706, "body": "This is not an answer. There&#39;s an <i>edit</i> button under your question so you can add additional information."}], "tags": [], "owner": {"reputation": 11, "user_id": 10796042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e269babb07b4171a67cb6e7a26eee8ec?s=128&d=identicon&r=PG&f=1", "display_name": "stug", "link": "https://stackoverflow.com/users/10796042/stug"}, "is_accepted": false, "score": -1, "last_activity_date": 1548091101, "last_edit_date": 1548091101, "creation_date": 1548089952, "answer_id": 54294606, "question_id": 54294402, "link": "https://stackoverflow.com/questions/54294402/ruby-issue-using-object-sendremove-const-myclass/54294606#54294606", "title": "Ruby issue using Object.send(:remove_const, &#39;MyClass&#39;)", "body": "<pre><code>require_relative '../lib/user'\n\ndescribe User do\n\n    before(:each) do\n            Object.send(:remove_const, 'User')\n            load 'user'\n    end \n\n    describe 'initializer' do\n\n        it 'creates an user' do\n            user = User.new(\"jules\", \"jules@gg.k\")\n            expect(user.class).to eq(User)\n        end\n\n        it 'saves @email as instance variable' do\n            email = \"jules@gg.com\"\n            user = User.new(\"jules\", email)\n            expect(user.email).to eq(email)\n        end\n\n        it 'adds one to the @@user_count global variable' do\n            count = User.user_count\n            user = User.new(\"jules\", \"email@email.email\")\n            expect(User.user_count).to eq(count+1)\n        end\n\n    end\n\n    describe 'classe method' do\n\n        describe 'all' do\n            it 'should return a list of names of all users' do\n                user1 = User.new(\"jacques\", \"jacky@chan.fr\")\n                user2 = User.new(\"phil\", \"ph@il.ipe\")\n                expect(User.all.map! {|k| k.name}).to eq([\"jacques\", \"phil\"])\n            end\n        end\n\n        describe 'find_by_email' do\n            it 'should return return a name if user exists and nil otherwise' do\n                user1 = User.new(\"jacques\", \"jacky@chan.fr\")\n        user2 = User.new(\"phil\", \"ph@il.ipe\")\n                expect(User.find_by_email(\"jacky@chan.fr\")).to eq(\"jacques\")\n            end\n        end\n    end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 10796042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e269babb07b4171a67cb6e7a26eee8ec?s=128&d=identicon&r=PG&f=1", "display_name": "stug", "link": "https://stackoverflow.com/users/10796042/stug"}, "edited": false, "score": 0, "creation_date": 1548093122, "post_id": 54295165, "comment_id": 95411145, "body": "Thank you a lot, the second option solved my problem. I now have to understand const_defined? and send methods by reading the ruby doc."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1548092563, "last_edit_date": 1548092563, "creation_date": 1548092261, "answer_id": 54295165, "question_id": 54294402, "link": "https://stackoverflow.com/questions/54294402/ruby-issue-using-object-sendremove-const-myclass/54295165#54295165", "title": "Ruby issue using Object.send(:remove_const, &#39;MyClass&#39;)", "body": "<p>I see two options:</p>\n\n<ol>\n<li><p>only remove the constant if it is actually defined:</p>\n\n<pre><code>if Object.const_defined?(:User)\n  Object.send(:remove_const, :User)\n  load 'user.rb' # &lt;- you may have to adjust the path\nend\n</code></pre></li>\n<li><p>add a class method to <code>User</code> to clear your in-memory user \"database\":</p>\n\n<pre><code>class User\n  def self.clear\n    @@user_list = []\n    @@user_count = 0            \n  end\nend\n</code></pre>\n\n<p>and call that instead:</p>\n\n<pre><code>before(:each) do\n  User.clear\nend\n</code></pre></li>\n</ol>\n\n<p>I'd go with option #2.</p>\n"}], "owner": {"reputation": 11, "user_id": 10796042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e269babb07b4171a67cb6e7a26eee8ec?s=128&d=identicon&r=PG&f=1", "display_name": "stug", "link": "https://stackoverflow.com/users/10796042/stug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 54295165, "answer_count": 2, "score": 0, "last_activity_date": 1548092716, "creation_date": 1548089260, "last_edit_date": 1548092716, "question_id": 54294402, "link": "https://stackoverflow.com/questions/54294402/ruby-issue-using-object-sendremove-const-myclass", "title": "Ruby issue using Object.send(:remove_const, &#39;MyClass&#39;)", "body": "<p>I want to \"reinitialize\" my <code>User</code> class, so i have a fresh state in each of my RSpec examples. I tried calling <code>remove_const</code>:</p>\n\n<pre><code>before(:each) do\n  Object.send(:remove_const, 'User')\n  load 'user.rb'\nend\n\ndescribe 'initializer' do\n  it 'creates an user' do\n    user = User.new(\"jules\", \"jules@gg.k\")\n    expect(user.class).to eq(User)\n  end\n\n  it 'saves @email as instance variable' do\n    email = \"jules@gg.com\"\n    user = User.new(\"jules\", email)\n    expect(user.email).to eq(email)\n  end\n\n  # ...\nend\n</code></pre>\n\n<p>but it returns:</p>\n\n<pre><code>NameError: constant Object::User not defined\n</code></pre>\n\n<p>My <code>User</code> class looks like this:</p>\n\n<pre><code>class User\n  attr_accessor :name, :email\n  @@user_list = []\n  @@user_count = 0\n\n  def self.user_count\n    @@user_count\n  end\n\n  def self.all\n    @@user_list\n  end\n\n  def initialize(name, email)\n    @email = email\n    @name = name\n    @@user_count += 1\n    @@user_list &lt;&lt; self\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "linux", "user-interface", "ubuntu", "tk"], "comments": [{"owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "edited": false, "score": 0, "creation_date": 1548087301, "post_id": 54293774, "comment_id": 95408271, "body": "Hi, can you past the command error?"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 10941547, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JxjFgPFwR-w/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaOFqTJB7Mva_TWYeVJBcHRwJkWEg/mo/photo.jpg?sz=128", "display_name": "Luca Gamerro", "link": "https://stackoverflow.com/users/10941547/luca-gamerro"}, "edited": false, "score": 0, "creation_date": 1548087634, "post_id": 54293931, "comment_id": 95408458, "body": "I have corretct my second post"}], "tags": [], "owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "is_accepted": false, "score": 0, "last_activity_date": 1548087812, "last_edit_date": 1548087812, "creation_date": 1548087540, "answer_id": 54293931, "question_id": 54293774, "link": "https://stackoverflow.com/questions/54293774/ruby-graphical-user-interface-tk-on-linux-ubuntu-dont-work/54293931#54293931", "title": "Ruby: graphical-user interface tk on linux ubuntu don&#39;t work", "body": "<p>Before install TK, you need Ruby dev (contains all the HEADERS):</p>\n\n<pre><code>sudo apt-get install ruby-all-dev\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "is_accepted": true, "score": 2, "last_activity_date": 1548090025, "creation_date": 1548090025, "answer_id": 54294626, "question_id": 54293774, "link": "https://stackoverflow.com/questions/54293774/ruby-graphical-user-interface-tk-on-linux-ubuntu-dont-work/54294626#54294626", "title": "Ruby: graphical-user interface tk on linux ubuntu don&#39;t work", "body": "<p>Hey I ran into this same thing recently while porting the Princeton Standard library to ruby tk <a href=\"https://github.com/gregors/standard_draw_tk\" rel=\"nofollow noreferrer\">standard_draw_tk</a></p>\n\n<p>First make sure libaries are installed</p>\n\n<pre><code>sudo apt-get install tcl8.5-dev tk8.5-dev\n</code></pre>\n\n<p>Now you need to soft link the libaries</p>\n\n<pre><code>sudo ln -s /usr/lib/x86_64-linux-gnu/tcl8.5/tclConfig.sh /usr/lib/tclConfig.sh\nsudo ln -s /usr/lib/x86_64-linux-gnu/tk8.5/tkConfig.sh /usr/lib/tkConfig.sh\nsudo ln -s /usr/lib/x86_64-linux-gnu/libtcl8.5.so.0 /usr/lib/libtcl8.5.so.0\nsudo ln -s /usr/lib/x86_64-linux-gnu/libtk8.5.so.0 /usr/lib/libtk8.5.so.0```\n</code></pre>\n\n<p>Now you can install the tk gem on linux</p>\n\n<pre><code>gem install tk\n</code></pre>\n\n<p>The original <a href=\"https://saveriomiroddi.github.io/Installing-ruby-tk-bindings-gem-on-ubuntu/\" rel=\"nofollow noreferrer\">blog post</a> where I found this information</p>\n"}, {"tags": [], "owner": {"reputation": 676, "user_id": 9344150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b13c12af25a724e0c1fd61cdb45fdca2?s=128&d=identicon&r=PG&f=1", "display_name": "kojix2", "link": "https://stackoverflow.com/users/9344150/kojix2"}, "is_accepted": false, "score": 2, "last_activity_date": 1549800126, "creation_date": 1549800126, "answer_id": 54616152, "question_id": 54293774, "link": "https://stackoverflow.com/questions/54293774/ruby-graphical-user-interface-tk-on-linux-ubuntu-dont-work/54616152#54616152", "title": "Ruby: graphical-user interface tk on linux ubuntu don&#39;t work", "body": "<p>You can use options too.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>gem install tk -- --with-tcltkversion=8.6 \\\n--with-tcl-lib=/usr/lib/x86_64-linux-gnu \\\n--with-tk-lib=/usr/lib/x86_64-linux-gnu \\\n--with-tcl-include=/usr/include/tcl8.6 \\\n--with-tk-include=/usr/include/tcl8.6 \\\n--enable-pthread\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10941547, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JxjFgPFwR-w/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaOFqTJB7Mva_TWYeVJBcHRwJkWEg/mo/photo.jpg?sz=128", "display_name": "Luca Gamerro", "link": "https://stackoverflow.com/users/10941547/luca-gamerro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 54294626, "answer_count": 3, "score": 1, "last_activity_date": 1549800126, "creation_date": 1548086995, "question_id": 54293774, "link": "https://stackoverflow.com/questions/54293774/ruby-graphical-user-interface-tk-on-linux-ubuntu-dont-work", "title": "Ruby: graphical-user interface tk on linux ubuntu don&#39;t work", "body": "<p>I tried installing the tk GUI for Ubuntu ruby\nWith the command:</p>\n\n<pre><code>gem install tk\n</code></pre>\n\n<p>But the command does not work.\nWhat can I do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1548086997, "post_id": 54293650, "comment_id": 95408113, "body": "Monkeypatch <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Scoping/Default/ClassMethods.html#method-i-default_scope\" rel=\"nofollow noreferrer\"><code>#default_scope</code></a>?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1548257995, "post_id": 54293650, "comment_id": 95479476, "body": "This sounds more like you need to take regular backups of the table (which is done with the DB specific tools) or use something like Papertrail which lets you track changes to records by creating copies."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1548258545, "post_id": 54293650, "comment_id": 95479805, "body": "You can also use the <a href=\"https://github.com/travisjeffery/timecop\" rel=\"nofollow noreferrer\">Timecop gem</a> to &quot;mock time&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "is_accepted": false, "score": 0, "last_activity_date": 1548087339, "creation_date": 1548087339, "answer_id": 54293871, "question_id": 54293650, "link": "https://stackoverflow.com/questions/54293650/does-anyone-know-of-a-way-to-globally-scope-activerecord-im-looking-to-achieve/54293871#54293871", "title": "Does anyone know of a way to globally scope ActiveRecord? I&#39;m looking to achieve a snapshot in time of my entire database", "body": "<p>interesting question.</p>\n\n<p>If I were in your shoes, I'd investigate whether I could achieve what you're looking to do using database views (assuming your using Postgres). Especially sense it sounds like you are looking to do lookups on multiple tables that may or may not be related.</p>\n\n<p>Check out this gem: <a href=\"https://github.com/scenic-views/scenic\" rel=\"nofollow noreferrer\">https://github.com/scenic-views/scenic</a> to get an idea of how you could implement views, though you don't necessarily need a gem.</p>\n\n<p>That said, why I think this would be good for you is because it would allow you to set up a filter for the data you want, which then you could filter accordingly, and then just make some test to validate accuracy.</p>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "is_accepted": false, "score": 0, "last_activity_date": 1548088143, "creation_date": 1548088143, "answer_id": 54294103, "question_id": 54293650, "link": "https://stackoverflow.com/questions/54293650/does-anyone-know-of-a-way-to-globally-scope-activerecord-im-looking-to-achieve/54294103#54294103", "title": "Does anyone know of a way to globally scope ActiveRecord? I&#39;m looking to achieve a snapshot in time of my entire database", "body": "<p>This sounds like a job for ARel.  ARel makes it a lot easier to build time/system clock based Scopes.  You can define as many of these as you want.</p>\n\n<pre><code>ARel:\n\nscope :created_at_before, -&gt;(timestamp) { where( arel_table[:created_at].gte(timestamp) }\nscope :created_at_over_three_months_ago, { created_at_before(3.months.ago) }\n#and so on and so on...\n</code></pre>\n\n<p>But I have to ask this....</p>\n\n<p>You want a \"snapshot in time of your database\".</p>\n\n<p><strong>Take a backup?????</strong>  A backup of your database <strong>is</strong> a snapshot in time of your database.  Restore this backup on a separate machine.  You can even automate taking these backups with <code>cron</code>, Heroku Scheduler, or your platforms equivalent.  </p>\n"}], "owner": {"reputation": 1, "user_id": 7269857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iEMMQ.jpg?s=128&g=1", "display_name": "Elliott Potter", "link": "https://stackoverflow.com/users/7269857/elliott-potter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548088143, "creation_date": 1548086597, "question_id": 54293650, "link": "https://stackoverflow.com/questions/54293650/does-anyone-know-of-a-way-to-globally-scope-activerecord-im-looking-to-achieve", "title": "Does anyone know of a way to globally scope ActiveRecord? I&#39;m looking to achieve a snapshot in time of my entire database", "body": "<p>At work, I often need to investigate data in a previous state. For example, a user was seeing time-sensitive information in their app 3 days ago (their last 50 order records). That information has since been overridden by newer orders. In order to replicate that issue for debugging, I need to limit all pertinent data (orders, user interactions, etc.) before a certain timestamp. </p>\n\n<p>My question boils down to this: Instead of scoping each table that I'm querying (and risk missing something), is there a clean way to scope all timestamps on records and tables that might be queried during this kind of investigation?</p>\n\n<p>I'm on Rails 5.1.6</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5", "polymorphic-associations"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 3964781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e32095a9c486ee07cb71fa73abd83142?s=128&d=identicon&r=PG", "display_name": "Sergio Hernandez", "link": "https://stackoverflow.com/users/3964781/sergio-hernandez"}, "edited": false, "score": 0, "creation_date": 1548089222, "post_id": 54293868, "comment_id": 95409254, "body": "I think this is getting me there, thank you!  To create an association, <code>@lawsuit.lawsuit_parties &lt;&lt; Person.first</code> gets me the following error:  <code>ActiveRecord::AssociationTypeMismatch (LawsuitParty(#70357266387440) expected, got #&lt;Person id: 1, fname: &quot;John&quot;, lname: &quot;Doe&quot;, created_at: &quot;2019-01-21 04:07:20&quot;, updated_at: &quot;2019-01-21 04:07:20&quot;&gt; which is an instance of Person(#70357238653680)) </code>  Do I need to create the <code>LawsuitParty</code> record manually (`@lawsuit.lawsuit_parties.create(paritable_type: &quot;Person&quot;, role &quot;plaintiff&quot;), or are there shortcut methods for this?"}, {"owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "reply_to_user": {"reputation": 181, "user_id": 3964781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e32095a9c486ee07cb71fa73abd83142?s=128&d=identicon&r=PG", "display_name": "Sergio Hernandez", "link": "https://stackoverflow.com/users/3964781/sergio-hernandez"}, "edited": false, "score": 0, "creation_date": 1548089591, "post_id": 54293868, "comment_id": 95409442, "body": "Glad to help.  You defined <code>parties</code> to map to LawsuitParty records somewhere.  That error is telling you that you&#39;re trying to shovel a record of the wrong type onto that association.  I don&#39;t know your DSL fully, but perhaps you meant to <code>@lawsuit.people &lt;&lt; Person.first</code> ??"}, {"owner": {"reputation": 181, "user_id": 3964781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e32095a9c486ee07cb71fa73abd83142?s=128&d=identicon&r=PG", "display_name": "Sergio Hernandez", "link": "https://stackoverflow.com/users/3964781/sergio-hernandez"}, "edited": false, "score": 0, "creation_date": 1548089738, "post_id": 54293868, "comment_id": 95409512, "body": "Ah, typo on my part. I had added a <code>parties</code> method to the Lawsuit model that returns <code>self.lawsuit_parties</code>). So my question is that once the relationships and tables are established, what is the standard way to add a person, company, etc. to a lawsuit\u2019s parties. E.g., <code>@lawsuit.lawsuit_parties &lt;&lt; Person.first</code> (but that&#39;s what returns the above error)."}, {"owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "reply_to_user": {"reputation": 181, "user_id": 3964781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e32095a9c486ee07cb71fa73abd83142?s=128&d=identicon&r=PG", "display_name": "Sergio Hernandez", "link": "https://stackoverflow.com/users/3964781/sergio-hernandez"}, "edited": false, "score": 0, "creation_date": 1548089767, "post_id": 54293868, "comment_id": 95409535, "body": "def parties; self.lawsuit_parties; end - is the problem.  Simple thing to do so you don&#39;t have to fiddle with Rails too much is to define an &quot;add_party_as(partiable:, role:)&quot; method on Lawsuit.  Define how to add a party there.  It would be something like <code>self.lawsuit_parties.create(args)</code>."}], "tags": [], "owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "is_accepted": true, "score": 3, "last_activity_date": 1548087334, "creation_date": 1548087334, "answer_id": 54293868, "question_id": 54293133, "link": "https://stackoverflow.com/questions/54293133/activerecord-associations-with-two-different-models/54293868#54293868", "title": "ActiveRecord associations with two different models", "body": "<p>You're on the right track, but you'll need to introduce a <a href=\"https://guides.rubyonrails.org/association_basics.html#polymorphic-associations\" rel=\"nofollow noreferrer\">polymorphic relationship</a> onto your Join Model to get this type of modeling to work.  <a href=\"https://api.rubyonrails.org/v5.2.2/classes/ActiveRecord/Enum.html\" rel=\"nofollow noreferrer\">An Enum can handle differentiating between Defendants and Plaintiffs</a>, as well as provide several scopes/methods you're asking for for free.</p>\n\n<pre><code>class LawsuitParty &lt; ApplicationRecord\n    belongs_to :lawsuit\n    belongs_to :partiable, polymorphic: true\n\n    enum role: [:defendant, :plaintiff]\nend\n</code></pre>\n\n<p>You'll need to write a migration to change your <code>lawsuit_parties</code> table to the following columns (all Rails convention names):</p>\n\n<pre><code>partiable_id   = Integer\npartiable_type = String\nrole           = String\n\nlawsuit_parties\n\n| id | lawsuit_id | partiable_id | partiable_type | role      | \n| -- | ---------- | ------------ | -------------- | ----------|\n|  1 |          1 |            1 | Person         | defendant |\n|  2 |          1 |            2 | Company        | plaintiff |\n|  3 |          1 |            1 | Company        | defendant |\n</code></pre>\n\n<p>Next, tell Rails that <code>Person</code> and <code>Company</code> records are associated with many <code>Lawsuit</code>'s using <code>has_many</code>'s <code>:as</code> option.  </p>\n\n<pre><code>class Person &lt; ApplicationRecord\n    has_many :lawsuit_parties, as: :partiable\n    has_many :lawsuits, through: :lawsuit_parties\nend\n</code></pre>\n\n<p>Add the same <code>has_many :lawsuit_parties, as: :partiable</code> to Company, or any other models that may come later (i.e. <code>Judge</code> or <code>JuryMember</code>).  </p>\n\n<p>Once you have a LawsuitParty setup like this, you should be all set.  </p>\n"}], "owner": {"reputation": 181, "user_id": 3964781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e32095a9c486ee07cb71fa73abd83142?s=128&d=identicon&r=PG", "display_name": "Sergio Hernandez", "link": "https://stackoverflow.com/users/3964781/sergio-hernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 54293868, "answer_count": 1, "score": 1, "last_activity_date": 1548088344, "creation_date": 1548084716, "last_edit_date": 1548088344, "question_id": 54293133, "link": "https://stackoverflow.com/questions/54293133/activerecord-associations-with-two-different-models", "title": "ActiveRecord associations with two different models", "body": "<p>I'm having a tough time wrapping my head around how I should be configuring my tables + associations.</p>\n\n<p>I have a <code>Lawsuit</code> model. A lawsuit <code>has_many</code> parties (defendants, plaintiffs, attorneys, etc.). A party, in turn, can either be a <code>Person</code> or a <code>Company</code>. Ultimately, I want to be able to get:</p>\n\n<ul>\n<li>A person\u2019s lawsuits (<code>@person.lawsuits</code>);</li>\n<li>A company\u2019s lawsuits (<code>@company.lawsuits</code>); and</li>\n<li>A lawsuit\u2019s parties (<code>@lawsuit.parties</code>), which can be either <code>people</code> or <code>companies</code>.</li>\n</ul>\n\n<p>This is how I have my tables + models set up currently:</p>\n\n<p>people</p>\n\n<pre><code>| id | fname  | lname | date_of_birth |\n| -- | ------ | ----- | ------------- |\n|  1 | John   | Smith |    1974-02-04 |\n|  2 | George | Glass |    1963-07-29 |\n</code></pre>\n\n<p>companies</p>\n\n<pre><code>| id | name      | duns      | ticker | address      |\n| -- | --------- | --------- | ------ | ------------ |\n|  1 | Acme Inc. | 239423243 | ACME   | 123 Main St. |\n</code></pre>\n\n<p>lawsuits</p>\n\n<pre><code>| id | jurisdiction | court | case_no    | title                       |\n| -- | ------------ | ----- | ---------- | --------------------------- |\n|  1 |      federal | SDNY  | 18-CV-1234 | Smith v. Glass, Acme, et al |\n</code></pre>\n\n<p>lawsuit_parties</p>\n\n<pre><code>| id | lawsuit_id | person_id | company_id | role      |\n| -- | ---------- | --------- | ---------- | --------- |\n|  1 |          1 |         1 |            | plaintiff |\n|  2 |          1 |         2 |            | defendant |\n|  3 |          1 |           |          1 | defendant |\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code># models/lawsuit.rb:\nclass Lawsuit &lt; ApplicationRecord\n    has_many :lawsuit_parties\n\n    def parties\n        self.lawsuit_parties\n    end\n\n    def defendants\n        self.parties(where(lawsuit_parties: {role: 'defendant'})\n    end\n\n    def plaintiffs\n        self.parties(where(lawsuit_parties: {role: 'plaintiff'})\n    end\n\n    def attorneys\n        self.parties(where(lawsuit_parties: {role: 'attorney'})\n    end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code># models/lawsuit_party.rb\nclass LawsuitParty &lt; ApplicationRecord\n    belongs_to :person\n    belongs_to :company\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code># models/person.rb\nclass Person &lt; ApplicationRecord\n    has_many :lawsuit_parties\n    has_many :lawsuits, through: :lawsuit_parties\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code># models/company.rb\nclass Company &lt; ApplicationRecord\n    has_many :lawsuit_parties\n    has_many :lawsuits, through: :lawsuit_parties\nend\n</code></pre>\n\n<p>Any help you would be much appreciated\u2026</p>\n"}, {"tags": ["json", "ruby", "swagger", "rswag"], "answers": [{"tags": [], "owner": {"reputation": 4405, "user_id": 160604, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a579634c2cb8a4623e33bf7dd44a50d5?s=128&d=identicon&r=PG", "display_name": "iftheshoefritz", "link": "https://stackoverflow.com/users/160604/iftheshoefritz"}, "is_accepted": true, "score": 1, "last_activity_date": 1548160994, "creation_date": 1548160994, "answer_id": 54308567, "question_id": 54290563, "link": "https://stackoverflow.com/questions/54290563/rswag-schema-does-not-fail-for-invalid-properties-of-object-in-array/54308567#54308567", "title": "Rswag schema does not fail for invalid properties of object in array", "body": "<p>I was missing a <code>required</code> clause in my schema:</p>\n\n<pre><code>schema type: :array,\n  items: {\n    type: :object,\n    properties: {\n      expected_id: { type: \"integer\", format: \"int32\" },\n    }\n    required: ['expected_id'] # &lt;- this was missing\n  }\n</code></pre>\n\n<p>This raises a test error if the response my endpoint generates does not include the <code>expected_id</code> key.</p>\n"}], "owner": {"reputation": 4405, "user_id": 160604, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a579634c2cb8a4623e33bf7dd44a50d5?s=128&d=identicon&r=PG", "display_name": "iftheshoefritz", "link": "https://stackoverflow.com/users/160604/iftheshoefritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 978, "favorite_count": 0, "accepted_answer_id": 54308567, "answer_count": 1, "score": 3, "last_activity_date": 1548160994, "creation_date": 1548075556, "question_id": 54290563, "link": "https://stackoverflow.com/questions/54290563/rswag-schema-does-not-fail-for-invalid-properties-of-object-in-array", "title": "Rswag schema does not fail for invalid properties of object in array", "body": "<p>I have the following rswag test:</p>\n\n<pre><code>  response '200', 'response with array of objects' do\n    schema type: :array,\n      items: {\n        type: :object,\n        properties: {\n          expected_id: { type: \"integer\", format: \"int32\" },\n        }\n      }\n\n      run_test!\n  end\n</code></pre>\n\n<p>My API responds with JSON:</p>\n\n<pre><code>[\n  \"invalid_key\": 1,\n  \"invalid_key\": 2\n]\n</code></pre>\n\n<p>In other words, an invalid response according to the schema above. </p>\n\n<p>However, the test does <em>not</em> fail. This is unexpected.</p>\n\n<p>On the other hand, if my API responds with an array of null values: <code>\"[null]\"</code> I get the response I expect:</p>\n\n<pre><code> Failure/Error: test.run\n\n Rswag::Specs::UnexpectedResponse:\n   Expected response body to match schema: The property '#/0' of type null did not match the following type: object in schema 19e6c168-1da4-58a6-93fc-a33d9d91233a\n</code></pre>\n\n<p>So my test <em>is</em> checking that there is an array of objects, but <em>not</em> checking that the properties in the nested objects are what is expected. How do I make it check the properties as well?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "asset-pipeline"], "answers": [{"tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": true, "score": 2, "last_activity_date": 1548079440, "creation_date": 1548079440, "answer_id": 54291628, "question_id": 54290207, "link": "https://stackoverflow.com/questions/54290207/rails-4-image-tag-not-working-with-fingerprints-images/54291628#54291628", "title": "Rails 4 image_tag not working with fingerprints images", "body": "<p>As per the asset pipeline documentation (<a href=\"https://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets</a>) if you use absolute path it won't be resolved, but if you use the relative path under <code>/assets</code>, then the method will return a correctly fingerprinted url.</p>\n\n<p>With absolute path:</p>\n\n<pre><code>&lt;%= image_tag \"/assets/v1/sale.png\" %&gt;\n\n=&gt; &lt;img src=\"/assets/v1/sale.png\"/&gt;\n</code></pre>\n\n<p>With relative path:</p>\n\n<pre><code>&lt;%= image_tag \"v1/sale.png\" %&gt;\n\n=&gt; &lt;img src=\"/assets/v1/sale-4dd5b109ee3439da54f5bdfd78a80473.png\"/&gt;\n</code></pre>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 54291628, "answer_count": 1, "score": 1, "last_activity_date": 1548079440, "creation_date": 1548074422, "question_id": 54290207, "link": "https://stackoverflow.com/questions/54290207/rails-4-image-tag-not-working-with-fingerprints-images", "title": "Rails 4 image_tag not working with fingerprints images", "body": "<p>My app wokring fine on local but on production it not showing images after compiling and digestion of assets.</p>\n\n<p>Here is my code</p>\n\n<pre><code>&lt;%= image_tag \"/assets/v1/sale.png\" %&gt;\n</code></pre>\n\n<p>folder structure\n<strong>app/assets/images/v1/sale.png</strong></p>\n\n<p>How can I fix this issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "ab-testing"], "owner": {"reputation": 46, "user_id": 5980940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QamRl.png?s=128&g=1", "display_name": "Paps0t", "link": "https://stackoverflow.com/users/5980940/paps0t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548077967, "creation_date": 1548068189, "last_edit_date": 1548077967, "question_id": 54288456, "link": "https://stackoverflow.com/questions/54288456/can-i-have-an-ab-test-with-multiple-steps-with-split-gem", "title": "Can I have an AB test with multiple steps with Split gem?", "body": "<p>I have a rails application and I want to use Split for AB testing.\nIs there a way to keep track of multiple steps with Split? I want to keep track of users who clicked an <code>add to cart</code> button and then finalised their purchase.\nRight now it seems the only way to do this is to make 2 separate tests as below,</p>\n\n<ul>\n<li>first one starting when the user sees the \"add to cart\" button and finishes when he/she clicks it</li>\n<li>second one starting after user clicked on the button and finishes when he finalises his/her purchase</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "customvalidator"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548067153, "post_id": 54287868, "comment_id": 95397019, "body": "Can you provide User model code for line 4 to 7 ?"}, {"owner": {"reputation": 426, "user_id": 5195839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e46223f9edd52cfebf12b5483e81d2a?s=128&d=identicon&r=PG", "display_name": "Tomer Aberbach", "link": "https://stackoverflow.com/users/5195839/tomer-aberbach"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548067303, "post_id": 54287868, "comment_id": 95397102, "body": "Okay, I add the <code>User</code> class code."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548067619, "post_id": 54287868, "comment_id": 95397295, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/15282628/10522579\">Rails 3, Unknown validator: &#39;EmailValidator&#39;</a>"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548067668, "post_id": 54287868, "comment_id": 95397319, "body": "take a look, <a href=\"https://stackoverflow.com/q/15282628/10522579\">stackoverflow.com/q/15282628/10522579</a>"}, {"owner": {"reputation": 426, "user_id": 5195839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e46223f9edd52cfebf12b5483e81d2a?s=128&d=identicon&r=PG", "display_name": "Tomer Aberbach", "link": "https://stackoverflow.com/users/5195839/tomer-aberbach"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548067700, "post_id": 54287868, "comment_id": 95397335, "body": "I did, the fix for that question was to place the validators in <code>app&#47;validators</code>, but that&#39;s already where my classes are."}], "answers": [{"tags": [], "owner": {"reputation": 426, "user_id": 5195839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e46223f9edd52cfebf12b5483e81d2a?s=128&d=identicon&r=PG", "display_name": "Tomer Aberbach", "link": "https://stackoverflow.com/users/5195839/tomer-aberbach"}, "is_accepted": true, "score": 1, "last_activity_date": 1548068106, "creation_date": 1548068106, "answer_id": 54288431, "question_id": 54287868, "link": "https://stackoverflow.com/questions/54287868/how-can-i-load-a-custom-validator-which-does-not-directly-inherit-from-a-rails-v/54288431#54288431", "title": "How can I load a custom validator which does not directly inherit from a Rails validator class in Rails 5?", "body": "<p>I figured out the problem. The <code>self.abstract_class = true</code> line in <code>RegexValidator</code> was silently raising an error because there is no <code>self.abstract_class</code> method in the class. I thought there was because I saw it in the <code>ApplicationRecord</code> class, but I now realize that this is defined in the <code>ActiveRecord::Base</code> class.</p>\n\n<p>I determined this by adding <code>require_relative \"../validators/email_validator\"</code> to the top of the <code>user.rb</code> file. After doing that I was able to see the error which was silent before:</p>\n\n<pre><code>/home/tomeraberbach/Desktop/msf/src/app/validators/regex_validator.rb:4:in `&lt;class:RegexValidator&gt;': undefined method `abstract_class=' for RegexValidator:Class (NoMethodError)\n</code></pre>\n\n<p>After removing the <code>self.abstract_class = true</code> line and the <code>require_relative \"../validators/email_validator\"</code> line, the problem was resolved.</p>\n"}], "owner": {"reputation": 426, "user_id": 5195839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e46223f9edd52cfebf12b5483e81d2a?s=128&d=identicon&r=PG", "display_name": "Tomer Aberbach", "link": "https://stackoverflow.com/users/5195839/tomer-aberbach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 54288431, "answer_count": 1, "score": 3, "last_activity_date": 1548068282, "creation_date": 1548066243, "last_edit_date": 1548068282, "question_id": 54287868, "link": "https://stackoverflow.com/questions/54287868/how-can-i-load-a-custom-validator-which-does-not-directly-inherit-from-a-rails-v", "title": "How can I load a custom validator which does not directly inherit from a Rails validator class in Rails 5?", "body": "<p>I was writing some custom validators for a Rails 5 project I have been working on. For example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class EmailValidator &lt; ActiveModel::EachValidator\n  def validate_each(record, attribute, value)\n    if value.present? &amp;&amp; !/\\A[^\\p{Z}]+@[^\\p{Z}]+\\.[^\\p{Z}]+\\z/.match?(value)\n      record.errors.add(attribute, \"must be an email\")\n    end\n  end\nend\n</code></pre>\n\n<p>This approach worked fine, but many of my custom validators were similarly checking for a regex match so I decided to create an abstract <code>RegexValidator</code> class:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class RegexValidator &lt; ActiveModel::EachValidator\n  self.abstract_class = true\n\n  def regex\n    raise \"Children of this class must implement the 'regex' method.\"\n  end\n\n  def message(record, attribute, value)\n    raise \"Children of this class must implement the 'message(record, attribute, value)' method.\"\n  end\n\n  def validate_each(record, attribute, value)\n    if value.present? &amp;&amp; !regex.match?(value)\n      record.errors.add(attribute, message(record, attribute, value))\n    end\n  end\nend\n</code></pre>\n\n<p>So now <code>EmailValidator</code> is implemented like so:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class EmailValidator &lt; RegexValidator\n  def regex\n    /\\A[^\\p{Z}]+@[^\\p{Z}]+\\.[^\\p{Z}]+\\z/\n  end\n\n  def message(record, attribute, value)\n    \"must be an email\"\n  end\nend\n</code></pre>\n\n<p>However, since this change Rails 5 no longer autoloads my <code>EmailValidator</code> even though both <code>RegexValidator</code> and <code>EmailValidator</code> are placed in appropriately named files, <code>regex_validator.rb</code> and <code>email_validator.rb</code>, in the <code>app/validators</code> folder which was being autoloaded before (this makes this question different from a <a href=\"https://stackoverflow.com/questions/15282628\">similar question</a>). I suspect this is because <code>EmailValidator</code> no longer directly inherits from <code>ActiveModel::EachValidator</code>, but this should not matter.</p>\n\n<p>For reference, the following error occurred when I tried to generate a migration file:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>/var/lib/gems/2.5.0/gems/activemodel-5.2.2/lib/active_model/validations/validates.rb:121:in `rescue in block in validates': Unknown validator: 'EmailValidator' (ArgumentError)\n        from /var/lib/gems/2.5.0/gems/activemodel-5.2.2/lib/active_model/validations/validates.rb:118:in `block in validates'\n        from /var/lib/gems/2.5.0/gems/activemodel-5.2.2/lib/active_model/validations/validates.rb:114:in `each'\n        from /var/lib/gems/2.5.0/gems/activemodel-5.2.2/lib/active_model/validations/validates.rb:114:in `validates'\n        from /home/tomeraberbach/Desktop/msf/src/app/models/user.rb:7:in `&lt;class:User&gt;'\n        from /home/tomeraberbach/Desktop/msf/src/app/models/user.rb:4:in `&lt;main&gt;'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:50:in `load'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:50:in `load'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:476:in `block in load_file'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:661:in `new_constants_in'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:475:in `load_file'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:373:in `block in require_or_load'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:37:in `block in load_interlock'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies/interlock.rb:14:in `block in loading'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/concurrency/share_lock.rb:151:in `exclusive'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies/interlock.rb:13:in `loading'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:37:in `load_interlock'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:356:in `require_or_load'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/active_support.rb:46:in `block in require_or_load'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/active_support.rb:16:in `allow_bootsnap_retry'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/active_support.rb:45:in `require_or_load'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:510:in `load_missing_constant'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/active_support.rb:58:in `block in load_missing_constant'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/active_support.rb:16:in `allow_bootsnap_retry'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/active_support.rb:57:in `load_missing_constant'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:195:in `const_missing'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/inflector/methods.rb:283:in `const_get'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/inflector/methods.rb:283:in `block in constantize'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/inflector/methods.rb:281:in `each'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/inflector/methods.rb:281:in `inject'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/inflector/methods.rb:281:in `constantize'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:582:in `get'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:613:in `constantize'\n        from /var/lib/gems/2.5.0/gems/devise-4.5.0/lib/devise.rb:316:in `get'\n        from /var/lib/gems/2.5.0/gems/devise-4.5.0/lib/devise/mapping.rb:83:in `to'\n        from /var/lib/gems/2.5.0/gems/devise-4.5.0/lib/devise/mapping.rb:78:in `modules'\n        from /var/lib/gems/2.5.0/gems/devise-4.5.0/lib/devise/mapping.rb:95:in `routes'\n        from /var/lib/gems/2.5.0/gems/devise-4.5.0/lib/devise/mapping.rb:162:in `default_used_route'\n        from /var/lib/gems/2.5.0/gems/devise-4.5.0/lib/devise/mapping.rb:72:in `initialize'\n        from /var/lib/gems/2.5.0/gems/devise-4.5.0/lib/devise.rb:346:in `new'\n        from /var/lib/gems/2.5.0/gems/devise-4.5.0/lib/devise.rb:346:in `add_mapping'\n        from /var/lib/gems/2.5.0/gems/devise-4.5.0/lib/devise/rails/routes.rb:243:in `block in devise_for'\n        from /var/lib/gems/2.5.0/gems/devise-4.5.0/lib/devise/rails/routes.rb:242:in `each'\n        from /var/lib/gems/2.5.0/gems/devise-4.5.0/lib/devise/rails/routes.rb:242:in `devise_for'\n        from /home/tomeraberbach/Desktop/msf/src/config/routes.rb:3:in `block (2 levels) in &lt;main&gt;'\n        from /var/lib/gems/2.5.0/gems/actionpack-5.2.2/lib/action_dispatch/routing/mapper.rb:879:in `scope'\n        from /home/tomeraberbach/Desktop/msf/src/config/routes.rb:2:in `block in &lt;main&gt;'\n        from /var/lib/gems/2.5.0/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb:432:in `instance_exec'\n        from /var/lib/gems/2.5.0/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb:432:in `eval_block'\n        from /var/lib/gems/2.5.0/gems/actionpack-5.2.2/lib/action_dispatch/routing/route_set.rb:414:in `draw'\n        from /home/tomeraberbach/Desktop/msf/src/config/routes.rb:1:in `&lt;main&gt;'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:50:in `load'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:50:in `load'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:285:in `block in load'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:257:in `load_dependency'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:285:in `load'\n        from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/application/routes_reloader.rb:41:in `block in load_paths'\n        from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/application/routes_reloader.rb:41:in `each'\n        from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/application/routes_reloader.rb:41:in `load_paths'\n        from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/application/routes_reloader.rb:20:in `reload!'\n        from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/application/routes_reloader.rb:30:in `block in updater'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/file_update_checker.rb:83:in `execute'\n        from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/application/routes_reloader.rb:10:in `execute'                                                      \n        from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/application/finisher.rb:130:in `block in &lt;module:Finisher&gt;'\n        from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/initializable.rb:32:in `instance_exec'\n        from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/initializable.rb:32:in `run'\n        from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/initializable.rb:61:in `block in run_initializers'\n        from /usr/lib/ruby/2.5.0/tsort.rb:228:in `block in tsort_each'\n        from /usr/lib/ruby/2.5.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n        from /usr/lib/ruby/2.5.0/tsort.rb:431:in `each_strongly_connected_component_from'\n        from /usr/lib/ruby/2.5.0/tsort.rb:349:in `block in each_strongly_connected_component'\n        from /usr/lib/ruby/2.5.0/tsort.rb:347:in `each'\n        from /usr/lib/ruby/2.5.0/tsort.rb:347:in `call'\n        from /usr/lib/ruby/2.5.0/tsort.rb:347:in `each_strongly_connected_component'\n        from /usr/lib/ruby/2.5.0/tsort.rb:226:in `tsort_each'\n        from /usr/lib/ruby/2.5.0/tsort.rb:205:in `tsort_each'\n        from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/initializable.rb:60:in `run_initializers'\n        from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/application.rb:361:in `initialize!'\n        from /home/tomeraberbach/Desktop/msf/src/config/environment.rb:5:in `&lt;main&gt;'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n        from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `block in require'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:257:in `load_dependency'\n        from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `require'\n        from /var/lib/gems/2.5.0/gems/spring-2.0.2/lib/spring/application.rb:102:in `preload'\n        from /var/lib/gems/2.5.0/gems/spring-2.0.2/lib/spring/application.rb:153:in `serve'\n        from /var/lib/gems/2.5.0/gems/spring-2.0.2/lib/spring/application.rb:141:in `block in run'\n        from /var/lib/gems/2.5.0/gems/spring-2.0.2/lib/spring/application.rb:135:in `loop'\n        from /var/lib/gems/2.5.0/gems/spring-2.0.2/lib/spring/application.rb:135:in `run'\n        from /var/lib/gems/2.5.0/gems/spring-2.0.2/lib/spring/application/boot.rb:19:in `&lt;top (required)&gt;'\n        from /usr/local/lib/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n        from /usr/local/lib/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n        from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>My <code>User</code> class:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>##\n# A class representing a user account for this web application\n# Instances of this class represent rows in the +users+ table on the database.\nclass User &lt; ApplicationRecord\n  # Validation\n  validates_presence_of :email, :encrypted_password\n  validates :email, email: true\n\n  # Associations\n  devise :database_authenticatable, :registerable, :recoverable,\n         :rememberable, :trackable, :validatable\n  has_and_belongs_to_many :roles\n\n  # Events\n  before_validation do\n    # Removes unnecessary whitespace\n    self.email = email.strip\n  end\nend\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548066230, "post_id": 54287830, "comment_id": 95396478, "body": "It will be better if you define associations defined and model name in which above validation working"}, {"owner": {"reputation": 13234, "user_id": 409792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9f1a530bb9d8cf91a889b4af5f80e9?s=128&d=identicon&r=PG", "display_name": "zwippie", "link": "https://stackoverflow.com/users/409792/zwippie"}, "edited": false, "score": 0, "creation_date": 1548075142, "post_id": 54287830, "comment_id": 95401327, "body": "Another approach could be to create a unique index on the combination of the date and worker_id so the database takes care of the constraint."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10829318"}, "edited": false, "score": 0, "creation_date": 1548147999, "post_id": 54287830, "comment_id": 95429117, "body": "Can you explain more detail about your thing? Please"}], "owner": {"user_type": "does_not_exist", "display_name": "user10829318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548066647, "creation_date": 1548066106, "last_edit_date": 1548066647, "question_id": 54287830, "link": "https://stackoverflow.com/questions/54287830/custom-validation-for-uniq-workers-trouble-with-array", "title": "custom validation for uniq_workers trouble with array", "body": "<p>I have a custom validation. What I should rewrite.\nI want to check on the uniqueness of workers in the current day.</p>\n\n<p>Here's my code:</p>\n\n<h1>crew_worker.rb</h1>\n\n<pre><code>class CrewWorker &lt; ApplicationRecord\n  belongs_to :crew\n  belongs_to :worker\nvalidate :uniq_worker_in_scope_of_day, if: -&gt; obj { obj.new_record? &amp;&amp; obj.crew.present? &amp;&amp; obj.worker.present? }, on: :create\n\n\nprivate\n\n  def uniq_worker_in_scope_of_day\n    assignment = crew.assignment #Assignment entity\n    crews_leader_ids = assignment.crews.map(&amp;:leader_id) #[1,1]\n    active_worker_ids = assignment.worker_ids #[9,1]\n    workers = active_worker_ids - crews_leader_ids [9]\n    if workers.include?(worker.id) # workers = [9], worker.id = 1\n      errors.add(:base, 'has been already assigned at current day')\n    end\n  end\n end\n</code></pre>\n\n<h1>crew.rb</h1>\n\n<pre><code>class Crew &lt; ApplicationRecord\n  belongs_to :assignment, inverse_of: :crews\nend\n</code></pre>\n\n<h1>assignment.rb</h1>\n\n<pre><code>class Assignment &lt; ApplicationRecord\n  belongs_to :company\n  has_many :crews, -&gt;{ order(created_at: :asc) }, dependent: :destroy, inverse_of: :assignment\n  has_many :crew_workers, through: :crews, dependent: :destroy\n  has_many :workers, through: :crew_workers\n  has_many :assignment_items, through: :crews, dependent: :destroy\nend\n</code></pre>\n\n<p>but this validation works 2 times. and the next laps it returns:</p>\n\n<pre><code>#first_lap:\nworkers = [9]\nworker.id = 1\n\n#second_lap:\nworkers = [9]\nworker.id = 9\n</code></pre>\n\n<p>Why in the second laps it's return 9 and 9, not a 9 and 1.\np.s in the comment's it what debugger return.</p>\n"}, {"tags": ["ruby", "jwt", "app-store-connect", "itunes"], "comments": [{"owner": {"reputation": 11104, "user_id": 7329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a4e398a7a3d75e8cffbc635860e01a?s=128&d=identicon&r=PG&f=1", "display_name": "jps", "link": "https://stackoverflow.com/users/7329832/jps"}, "edited": false, "score": 3, "creation_date": 1548065079, "post_id": 54287340, "comment_id": 95395786, "body": "1. put a space between &#39;Bearer&#39; and the token. The header should be &#39;Authorization: Bearer eyJ...&#39;   2. on jwt.io, did you paste your key into the key field? Many people forget that and wonder why the tool says &quot;Invalid signature&quot;"}, {"owner": {"reputation": 61, "user_id": 8958428, "user_type": "registered", "profile_image": "https://graph.facebook.com/1384953898297541/picture?type=large", "display_name": "Rados\u0142aw Sakowicz", "link": "https://stackoverflow.com/users/8958428/rados%c5%82aw-sakowicz"}, "reply_to_user": {"reputation": 11104, "user_id": 7329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a4e398a7a3d75e8cffbc635860e01a?s=128&d=identicon&r=PG&f=1", "display_name": "jps", "link": "https://stackoverflow.com/users/7329832/jps"}, "edited": false, "score": 0, "creation_date": 1548067962, "post_id": 54287340, "comment_id": 95397479, "body": "I tried but jwt.io tool requires public and private keys. I have only private key."}, {"owner": {"reputation": 61, "user_id": 8958428, "user_type": "registered", "profile_image": "https://graph.facebook.com/1384953898297541/picture?type=large", "display_name": "Rados\u0142aw Sakowicz", "link": "https://stackoverflow.com/users/8958428/rados%c5%82aw-sakowicz"}, "reply_to_user": {"reputation": 11104, "user_id": 7329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a4e398a7a3d75e8cffbc635860e01a?s=128&d=identicon&r=PG&f=1", "display_name": "jps", "link": "https://stackoverflow.com/users/7329832/jps"}, "edited": false, "score": 1, "creation_date": 1548068200, "post_id": 54287340, "comment_id": 95397614, "body": "The first point was the cause."}, {"owner": {"reputation": 1170, "user_id": 4473187, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/H9pFE.jpg?s=128&g=1", "display_name": "gmoraleda", "link": "https://stackoverflow.com/users/4473187/gmoraleda"}, "edited": false, "score": 1, "creation_date": 1555502010, "post_id": 54287340, "comment_id": 98132585, "body": "Hey, I&#39;m also facing the same problem. How did you fix the issue? Could you be so nice as to share the whole ruby file? Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 2027, "user_id": 10597, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a2f2f16de99748ec4708bf3379815af0?s=128&d=identicon&r=PG", "display_name": "ablarg", "link": "https://stackoverflow.com/users/10597/ablarg"}, "edited": false, "score": 0, "creation_date": 1564004626, "post_id": 56590980, "comment_id": 100892808, "body": "This example copy pasted from the xcblog at <a href=\"https://medium.com/xcblog/wwdc18-a-basic-guide-to-app-store-connect-api-366208651ac6\" rel=\"nofollow noreferrer\">medium.com/xcblog/&hellip;</a> does not work even after removing comments and filling in legit values. It probably has to do with the way header_fields is not used. (Try rubocop on the file.)"}], "tags": [], "owner": {"reputation": 1623, "user_id": 2101576, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/qiC4e.jpg?s=128&g=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/2101576/hannan"}, "is_accepted": false, "score": 1, "last_activity_date": 1560482563, "last_edit_date": 1592644375, "creation_date": 1560482563, "answer_id": 56590980, "question_id": 54287340, "link": "https://stackoverflow.com/questions/54287340/generating-token-for-app-store-connect-api/56590980#56590980", "title": "Generating token for App Store Connect API", "body": "<p>I was facing similar kind of authentication error i.e. <em>NOT_AUTHORIZED</em>. And I resolved it by following these steps:</p>\n<h1>1. Create Ruby Script file to generate valid <code>Bearer</code> Token:</h1>\n<p><em>Ref:</em> <a href=\"https://medium.com/xcblog/generating-jwt-tokens-for-app-store-connect-api-2b2693812a35\" rel=\"nofollow noreferrer\">https://medium.com/xcblog/generating-jwt-tokens-for-app-store-connect-api-2b2693812a35</a></p>\n<pre><code>require &quot;base64&quot;\nrequire &quot;jwt&quot;\nISSUER_ID = &quot;YOUR_ISSUER_ID&quot;\nKEY_ID = &quot;YOUR PRIVATE KEY ID&quot;    // this is ID part from downloaded .p8 file name (see below for ref.)\nprivate_key = OpenSSL::PKey.read(File.read(path_to_your_private_key/AuthKey_#{KEY_ID}.p8))   // you can enclose your file path in quotes if needed, and can pass here totally static file path (here we are reusing Key_ID variable)\n\ntoken = JWT.encode(\n   {\n    iss: ISSUER_ID,\n    exp: Time.now.to_i + 20 * 60,\n    aud: &quot;appstoreconnect-v1&quot;\n   },\n   private_key,\n   &quot;ES256&quot;,\n   header_fields={\n       kid: KEY_ID }\n)\nputs token\n</code></pre>\n<p>Then run this script with following command on your Mac.</p>\n<p><code>$ ruby jwt.rb</code></p>\n<p>This will display a valid <code>Bearer</code> token on your terminal screen, that you can use in next step.</p>\n<blockquote>\n<p><em>Notes:</em></p>\n<ul>\n<li>In order to run above script, you'll need to have <code>ruby</code> installed.</li>\n<li>You'll copy Issuer ID from you Developer account. Generate one if you don't have it.</li>\n<li>Make sure you are using '.p8' certificate against authenticated user, which means the account against which you downloaded '.p8' certificate should have permission to perform API level operation. For my case I used <em>Admin</em> type account. Initially I was using <em>Developer</em> type user account which kept giving me <em>Not_Authorized</em> error when I go for final Curl call to get the token.</li>\n</ul>\n</blockquote>\n<h1>2. Using Token:</h1>\n<p>Now that, we have seen how to generate a token to access an App Store Connect API, we can use it by passing authorization header. e.g to get a list of all user we can use</p>\n<pre><code>$ curl  https://api.appstoreconnect.apple.com/v1/users --Header &quot;Authorization: Bearer lOOOOOOOOOOOONG_GENERATED_TOKEN&quot;\n</code></pre>\n<p>This will list all the users of App Store Connect. Remember that we have to use this token with every request we make and we have to create new token after every 20 minutes.</p>\n"}, {"tags": [], "owner": {"reputation": 2027, "user_id": 10597, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a2f2f16de99748ec4708bf3379815af0?s=128&d=identicon&r=PG", "display_name": "ablarg", "link": "https://stackoverflow.com/users/10597/ablarg"}, "is_accepted": false, "score": 2, "last_activity_date": 1564005181, "creation_date": 1564005181, "answer_id": 57191729, "question_id": 54287340, "link": "https://stackoverflow.com/questions/54287340/generating-token-for-app-store-connect-api/57191729#57191729", "title": "Generating token for App Store Connect API", "body": "<p>You had a missing space in your authorization string passed in. You code worked fine when modified to </p>\n\n<p><code>headers = { Authorization: 'Bearer ' + @token }</code></p>\n"}], "owner": {"reputation": 61, "user_id": 8958428, "user_type": "registered", "profile_image": "https://graph.facebook.com/1384953898297541/picture?type=large", "display_name": "Rados\u0142aw Sakowicz", "link": "https://stackoverflow.com/users/8958428/rados%c5%82aw-sakowicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2261, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1564005181, "creation_date": 1548064415, "last_edit_date": 1548067832, "question_id": 54287340, "link": "https://stackoverflow.com/questions/54287340/generating-token-for-app-store-connect-api", "title": "Generating token for App Store Connect API", "body": "<p>I need to generate JWT token for <a href=\"https://developer.apple.com/documentation/appstoreconnectapi\" rel=\"nofollow noreferrer\">Store Connect API</a>. I'm trying use jwt ruby gem <a href=\"https://github.com/jwt/ruby-jwt\" rel=\"nofollow noreferrer\">ruby-jwt</a>. This is my token generating code,</p>\n\n<pre><code>payload = {\n      'iss': my_issuer_id_from_db,\n      'exp': generated_unix_timestamp, #Time.now + 20min\n      'aud': 'hard_coded_string_from_doc'\n  }\n  header = {\n      'alg': 'ES256',\n      'kid': my_key_id_from_db,\n      'typ': 'JWT'\n  }\n\nprivate_key = OpenSSL::PKey.read(File.read('/tmp/private_key.pem'))\n# private_key - &lt;OpenSSL::PKey::EC:0x000000000XXXXXXX&gt;\n\n@token = JWT.encode(payload, private_key, 'ES256', header)\n# encoded_header.encoded_payload.emcoded_signature\n</code></pre>\n\n<p>This token I put in to header of my request:</p>\n\n<pre><code>headers = { Authorization: 'Bearer' + @token }\n</code></pre>\n\n<p>in respons I receive:</p>\n\n<pre><code>        \"errors\": [{\n                \"status\": \"401\",\n                \"code\": \"NOT_AUTHORIZED\",\n                \"title\": \"Authentication credentials are missing or invalid.\",\n                \"detail\": \"Provide a properly configured and signed bearer token, and make sure that it has not expired. Learn more about Generating Tokens for API Requests https://developer.apple.com/go/?id=api-generating-tokens\"\n        }]\n}\n</code></pre>\n\n<p>I thing the problem is with token(directly with signature). When I try decode token with <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">online tool</a>, my payload and header is decoded properly. Status: Invalid Signature</p>\n\n<p>What I do wrong? Any ideas how do it properly?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548063652, "post_id": 54286602, "comment_id": 95394977, "body": "<i>&quot;line ending with \\r&quot;</i> \u2013 seems like your code has Windows line endings, i.e. <code>\\r\\n</code>. Use Unix line endings instead, i.e. <code>\\n</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548064400, "post_id": 54286602, "comment_id": 95395414, "body": "@Stefan I\u2019d say it\u2019s rather Macintosh legacy. Win lines do indeed <i>end with <code>\\n</code></i>, despite there is <code>\\r</code> before it."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1548070569, "post_id": 54286602, "comment_id": 95398969, "body": "@AlekseiMatiushkin: The warning is badly worded. The shebang line is terminated with <code>\\n</code>. If there is a Windows line ending, then the last character that is <i>part of the shebang line</i>, i.e. the last character <i>before the terminating <code>\\n</code></i> will be <code>\\r</code>. This will still be interpreted as part of the interpreter name by at least some operating systems, so it will actually search for an interpreter executable named <code>ruby\\r</code>, which it obviously won&#39;t find. So, the warning message considers the last character before the terminator as the &quot;line ending&quot; and the terminator not part of the line."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548071866, "post_id": 54286602, "comment_id": 95399704, "body": "The corresponding method <a href=\"https://github.com/ruby/ruby/blob/v2_6_0/ruby.c#L1871-L1876\" rel=\"nofollow noreferrer\"><code>warn_cr_in_shebang</code></a> actually checks for <code>\\r\\n</code>. I&#39;ve opened a <a href=\"https://github.com/ruby/ruby/pull/2073\" rel=\"nofollow noreferrer\">PR</a> to reword the message."}], "answers": [{"tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": false, "score": 1, "last_activity_date": 1548068904, "creation_date": 1548068904, "answer_id": 54288670, "question_id": 54286602, "link": "https://stackoverflow.com/questions/54286602/how-to-fix-shebang-warning-in-ruby/54288670#54288670", "title": "How to fix Shebang warning in Ruby", "body": "<p>You have a Windows line ending in your file (<code>'\\r\\n'</code>) instead of a unix line ending (<code>'\\n'</code>). So the shell tries to get the first line, up to and excluding the first <code>\\n</code>, and finds that the line ends with <code>\\r</code>.</p>\n\n<p>There are several ways to avoid this issues:</p>\n\n<ol>\n<li><p>With git, automatically: <code>git config --global core.autocrlf true</code> (see <a href=\"https://help.github.com/articles/dealing-with-line-endings/\" rel=\"nofollow noreferrer\">https://help.github.com/articles/dealing-with-line-endings/</a> and <a href=\"https://stackoverflow.com/questions/10418975/how-to-change-line-ending-settings\">How to change line-ending settings</a>)</p></li>\n<li><p>With os-level tools: <code>dos2unix</code> (use your OS tools to install it)</p></li>\n<li><p>Editors + editorconfig file: Check <a href=\"https://editorconfig.org/#file-format-details\" rel=\"nofollow noreferrer\">https://editorconfig.org/#file-format-details</a> to see how you can set the <code>end_of_line</code> config, and let your editor do the rest.</p></li>\n</ol>\n"}], "owner": {"reputation": 41, "user_id": 10943853, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rz2qzBgptWQ/AAAAAAAAAAI/AAAAAAABCb0/rlUcHuFEvCk/photo.jpg?sz=128", "display_name": "Rodrigo Corr&#234;a", "link": "https://stackoverflow.com/users/10943853/rodrigo-corr%c3%aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7336, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1548068904, "creation_date": 1548062012, "question_id": 54286602, "link": "https://stackoverflow.com/questions/54286602/how-to-fix-shebang-warning-in-ruby", "title": "How to fix Shebang warning in Ruby", "body": "<p>When I execute any rails command in my project, I'm receiving this warning:</p>\n\n<pre><code>/home/vagrant/.rvm/rubies/ruby-2.5.3/bin/ruby: warning: shebang line ending with \\r may cause problems\n</code></pre>\n\n<p>I tried to install another Ruby version, but the warning is the same.\nI'm using the same Ubuntu version of the developer.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1548064517, "post_id": 54286729, "comment_id": 95395474, "body": "<code>s&#47;Faraday.get&#47;Faraday.head&#47;</code> I suppose."}, {"owner": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "edited": false, "score": 0, "creation_date": 1548064562, "post_id": 54286729, "comment_id": 95395493, "body": "thanks, but I was wondering what about the scenario in which the link is temporarily not available. It might be available later on or due to some network issue, it gets some other HTTP code."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1548064678, "post_id": 54286729, "comment_id": 95395561, "body": "You can retry them, e.g. check 2-3 times before deciding they&#39;re not valid"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 2, "last_activity_date": 1548064639, "last_edit_date": 1548064639, "creation_date": 1548062492, "answer_id": 54286729, "question_id": 54286585, "link": "https://stackoverflow.com/questions/54286585/list-of-alternates-to-check-whether-a-link-is-working-or-not-in-ruby/54286729#54286729", "title": "List of alternates to check whether a link is working or not in ruby?", "body": "<p>I'd try two things:</p>\n\n<p>1) Use <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/HEAD\" rel=\"nofollow noreferrer\">HTTP HEAD</a> that works like GET but fetches only headers, without any content (so it's faster):</p>\n\n<pre><code>response = Faraday.head 'http://www.google.com'\nresponse.status \n</code></pre>\n\n<p>2) Check links in threads to make it parallel.</p>\n"}, {"tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": false, "score": 0, "last_activity_date": 1548065846, "creation_date": 1548065846, "answer_id": 54287753, "question_id": 54286585, "link": "https://stackoverflow.com/questions/54286585/list-of-alternates-to-check-whether-a-link-is-working-or-not-in-ruby/54287753#54287753", "title": "List of alternates to check whether a link is working or not in ruby?", "body": "<p>Unfortunately the only way to check if a link is working is to make an HTTP request. Some server may implement HEAD so it responds with no content when it works. But that is not really a requirement.</p>\n\n<p>One thing you can do is to manually drop the connection as soon as you get headers. This requires a bit more manual work compared to just wrap all the network into a simple method:</p>\n\n<pre><code>Net::HTTP.start(host, ...) do |http|\n  http.request_get(path) do |response|\n    response.read_body do\n      # headers have been received, this block receives\n      # each body chunk\n      break\n    end\n  end\nend\n</code></pre>\n\n<p>For instance</p>\n\n<pre><code>resp = Net::HTTP.start('www.google.com', use_ssl: true) { |http|\n  http.request_get('/') { |resp|\n    resp.read_body { break }\n  }\n}\n\n\nresp.code\n\n=&gt; \"200\"\n\nresp.each_header.to_a\n\n=&gt; [[\"date\", \"Mon, 21 Jan 2019 10:09:15 GMT\"], [\"expires\", \"-1\"], ...]\n\nresp['date'] # you can read headers in a hash-like way\n\n=&gt; \"Mon, 21 Jan 2019 10:09:15 GMT\"\n\nresp.body\n\n=&gt; \"\"\n</code></pre>\n\n<p>So the body is not waited for, and you can check on headers to see if response was \"successful\". The http connection is dropped as soon as the first chunk of data is sent. If the server is not sending chunks, you will have to get all the response anyways.</p>\n"}], "owner": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 54286729, "answer_count": 2, "score": 2, "last_activity_date": 1548065846, "creation_date": 1548061943, "question_id": 54286585, "link": "https://stackoverflow.com/questions/54286585/list-of-alternates-to-check-whether-a-link-is-working-or-not-in-ruby", "title": "List of alternates to check whether a link is working or not in ruby?", "body": "<p>I have lists of links and I need to check which of them are in the working state. I have a large amount of links probably in millions.</p>\n\n<p>Problem is the link could be temporarily be disbaled\nor link is temporarily broken\nor is not reachable. \nIn this case I do not want to remove the broken links.</p>\n\n<p>I have tried using faraday but for working links also it gives 304, 301 and also takes time to get the response.\nI need an alternative to check whether links are in working state or not in ruby.</p>\n\n<pre><code>response = Faraday.get 'http://www.google.com'\nresponse.status\n</code></pre>\n\n<p>Need a way how should I proceed?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 5, "creation_date": 1548061727, "post_id": 54286520, "comment_id": 95393968, "body": "I guess you meant <code>@category = params[:category_id].any?</code>"}, {"owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1548061883, "post_id": 54286520, "comment_id": 95394041, "body": "Thanks for the reply @Marek Lipka... I&#39;m getting this: undefined local variable or method `params&#39;. the method which i&#39;m trying to check the array is inside a model"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1548061942, "post_id": 54286520, "comment_id": 95394075, "body": "params are not available in a model, only in controller, you need to pass them to a model method if you want to use it"}, {"owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1548062031, "post_id": 54286520, "comment_id": 95394119, "body": "Yea I know that @mrzasa.... This is what I&#39;m doing to see if the array is empty or not inside a model <code>@category = category_id.try(:any?)  if @category === false </code>"}, {"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "edited": false, "score": 0, "creation_date": 1548062700, "post_id": 54286520, "comment_id": 95394441, "body": "@Dev Could you provide more controller code to see what is the actual issue?"}, {"owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "reply_to_user": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "edited": false, "score": 0, "creation_date": 1548063794, "post_id": 54286520, "comment_id": 95395058, "body": "Thanks for the reply @zauzaj ... I just added the controller code to my original question, if you need anything else please let me know."}, {"owner": {"reputation": 152, "user_id": 4513203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0071a4ea6fd60cc72723cad1137cb21?s=128&d=identicon&r=PG", "display_name": "Issa Shabo", "link": "https://stackoverflow.com/users/4513203/issa-shabo"}, "edited": false, "score": 0, "creation_date": 1548064511, "post_id": 54286520, "comment_id": 95395469, "body": "Try byebug debugger and check line by line. This is very helpful to know where things go wrong step by step without much guessing. Place it right after <code>def create</code>  and follow the params object."}, {"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "edited": false, "score": 0, "creation_date": 1548065040, "post_id": 54286520, "comment_id": 95395766, "body": "@Dev Could you show <code>Account</code> model? Seems you don&#39;t have <code>category_id</code> field in accounts. Could you confirm that? Anyway you should show us method <code>category_id</code> where you&#39;re getting this exception."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1548068875, "post_id": 54286520, "comment_id": 95397992, "body": "Are you trying nested attributes?"}, {"owner": {"reputation": 684, "user_id": 6607918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rL2uz.png?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/6607918/stuart"}, "edited": false, "score": 0, "creation_date": 1548074920, "post_id": 54286520, "comment_id": 95401215, "body": "Quite plainly put, category_id clearly doesn&#39;t exist, hence the NilError.  Where are you calling this <code>category_id.any?</code>    When you say &quot;console results&quot; what do you mean? Is that the output of your <code>account_params</code> method? Do you have any validations on the model itself? Can you confirm the account model saves successfully?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 684, "user_id": 6607918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rL2uz.png?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/6607918/stuart"}, "edited": false, "score": 0, "creation_date": 1548079601, "post_id": 54286520, "comment_id": 95403810, "body": "@Stuart nitpicking, but <code>category_id</code> does exist \u2013 it has a value of <code>nil</code>. An undefined variable would result in a <code>NameError</code>."}, {"owner": {"reputation": 684, "user_id": 6607918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rL2uz.png?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/6607918/stuart"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548080064, "post_id": 54286520, "comment_id": 95404098, "body": "@Stefan potato potato"}, {"owner": {"reputation": 280, "user_id": 743006, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PioeP.jpg?s=128&g=1", "display_name": "Abolfazl Mahmoodi", "link": "https://stackoverflow.com/users/743006/abolfazl-mahmoodi"}, "edited": false, "score": 0, "creation_date": 1548152006, "post_id": 54286520, "comment_id": 95431635, "body": "you should check <code>params[:account][:category_id]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 845, "user_id": 4592959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/r03zx.png?s=128&g=1", "display_name": "Helsing", "link": "https://stackoverflow.com/users/4592959/helsing"}, "is_accepted": false, "score": 0, "last_activity_date": 1548084148, "last_edit_date": 1548084148, "creation_date": 1548083726, "answer_id": 54292865, "question_id": 54286520, "link": "https://stackoverflow.com/questions/54286520/rails-undefined-method-any-for-nilnilclass/54292865#54292865", "title": "Rails: undefined method `any?&#39; for nil:NilClass", "body": "<p>@variables are not available inside the model. Neither are the params.</p>\n\n<p>It's good practice to not try to do so but here are some ways to do it:</p>\n\n<p><strong>If you want to pass a value that is a database field/column:</strong></p>\n\n<pre><code># In the controller\naccount = Account.new(:category =&gt; @category)\n\n# In this example, :category is a database field/column of the \n# Account model, not sure if that's accurate for you.\n</code></pre>\n\n<p><strong>If not then you gotta use an attr_accessor like this:</strong></p>\n\n<pre><code># In the model\nclass Account &lt; ActiveRecord::Base\n  attr_accessor :category\n\n#In the controller (this is equivalent to the first example)\naccount = Account.new\naccount.category = @category\n</code></pre>\n\n<p>Using attr_accessor doesn't save anything into the database, but the controller doesn't know the difference (which is good). This allows you to move data around like you wanted.</p>\n"}], "owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548124697, "creation_date": 1548061658, "last_edit_date": 1548124697, "question_id": 54286520, "link": "https://stackoverflow.com/questions/54286520/rails-undefined-method-any-for-nilnilclass", "title": "Rails: undefined method `any?&#39; for nil:NilClass", "body": "<p>I'm getting these params in the console:</p>\n\n<pre><code>category_id\" # =&gt; [\"\", \"14\", \"16\", \"17\"]\n</code></pre>\n\n<p>When I check if the array is empty or not inside a model with this:</p>\n\n<pre><code>@category = category_id.any?\n</code></pre>\n\n<p>it returns the following error: </p>\n\n<pre><code>undefined method `any?' for nil:NilClass\n</code></pre>\n\n<p>I have the strong params like this:</p>\n\n<pre><code>:category_id =&gt; []\n</code></pre>\n\n<p>Any ideas on how to check if this array is empty or not?</p>\n\n<pre><code>def new\n  @account = Account.new\n  @categories.build\nend\n\ndef create\n  @account = Account.new(account_params)\n\n  respond_to do |format|\n    if @account.save\n      format.html { redirect_to accounts_path, notice: 'Account was successfully added.' }\n      format.json { render :index, status: :created, location: @account }\n    else\n      format.html { render :new }\n      format.json { render json: @account.errors, status: :unprocessable_entity }\n    end\n  end\nend\n\ndef account_params\n  params.require(:account).permit(:name, :street, :street_2, :city, :state, :postal_code, :country, category_id: []\nend\n</code></pre>\n\n<p>console results:</p>\n\n<pre><code>\"account\"=&gt;{\"name\"=&gt;\"\", \"street\"=&gt;\"\", \"street_2\"=&gt;\"\", \"city\"=&gt;\"\",  \"state\"=&gt;\"\", \"postal_code\"=&gt;\"\", \"country\"=&gt;\"\", \"category_id\"=&gt;[\"\", \"14\", \"15\"]\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 4, "creation_date": 1548059233, "post_id": 54285883, "comment_id": 95392847, "body": "Please, show us what you have tried."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 4, "creation_date": 1548059274, "post_id": 54285883, "comment_id": 95392868, "body": "Hint: <code>group_by</code> looks useful here"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1548060258, "post_id": 54285883, "comment_id": 95393302, "body": "The logic in the question is not clear. What is <code>keyList</code> doing?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1548061043, "post_id": 54285883, "comment_id": 95393674, "body": "What are the rules for merging these arrays into the final structure?"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 7, "last_activity_date": 1548059487, "creation_date": 1548059487, "answer_id": 54285950, "question_id": 54285883, "link": "https://stackoverflow.com/questions/54285883/merge-two-arrays-in-ruby-by-unique-key/54285950#54285950", "title": "Merge two arrays in Ruby by unique key", "body": "<p>Use <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-group_by\" rel=\"noreferrer\"><code>Enumerable#group_by</code></a>:</p>\n\n<pre><code>keyValueList.\n  map(&amp;:flatten).\n  group_by(&amp;:shift).\n  select { |k, _| keyList.include?(k) }.\n  to_a\n#\u21d2 [[\"a\", [[1, 2, 3], [4, 5, 6]]],\n#   [\"b\", [[5, \"a\", 3], [\"test\", 4, 3]]],\n#   [\"c\", [[1, \"number\", 110]]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1548060264, "post_id": 54286073, "comment_id": 95393305, "body": "This does not answer \u201cmerge two arrays\u201d part though."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1548060320, "post_id": 54286073, "comment_id": 95393333, "body": "@AlekseiMatiushkin It&#39;s the OP&#39;s fault. The question is not clear."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1548060410, "post_id": 54286073, "comment_id": 95393377, "body": "@sawa I surely do not blame Cary. The whole question was so poor-stated (and even poor-formatted) that I posted the answer literally out of pity. I am just pointing this out."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 5, "last_activity_date": 1548061064, "last_edit_date": 1548061064, "creation_date": 1548060010, "answer_id": 54286073, "question_id": 54285883, "link": "https://stackoverflow.com/questions/54285883/merge-two-arrays-in-ruby-by-unique-key/54286073#54286073", "title": "Merge two arrays in Ruby by unique key", "body": "<p>It's not clear why the array <code>keyList</code> is needed.</p>\n\n<pre><code>keyValueList.each_with_object(Hash.new {|h,k| h[k]=[]}) do |(k,arr),h|\n  h[k] &lt;&lt; arr\nend.to_a\n  #=&gt; [[\"a\", [[1, 2, 3], [4, 5, 6]]],\n  #    [\"b\", [[5, \"a\", 3], [\"test\", 4, 3]]],\n  #    [\"c\", [[1, \"number\", 110]]]]\n</code></pre>\n\n<p><code>h[k] &lt;&lt; arr</code> could be changed to <code>h[k]  &lt;&lt; arr if keyList.include?(k)</code> if needed for the desired behavior.</p>\n\n<p>The above could alternatively be written as follows.</p>\n\n<pre><code>keyValueList.each_with_object({}) do |(k,arr),h|\n  (h[k] ||= []) &lt;&lt; arr\nend.to_a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1548061140, "post_id": 54286098, "comment_id": 95393717, "body": "This is the best answer here so far."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1548063973, "post_id": 54286098, "comment_id": 95395176, "body": "@AlekseiMatiushkin But I think OP is working with <code>ruby</code> &amp; <code>transform_values</code> is rails specific."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 3, "creation_date": 1548064030, "post_id": 54286098, "comment_id": 95395201, "body": "@ray Not at all <a href=\"https://ruby-doc.org/core-2.4.0/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\">since 2.4.0</a>."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1548064084, "post_id": 54286098, "comment_id": 95395227, "body": "@AlekseiMatiushkin my bad, I will take a look :)"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 4, "last_activity_date": 1548060093, "creation_date": 1548060093, "answer_id": 54286098, "question_id": 54285883, "link": "https://stackoverflow.com/questions/54285883/merge-two-arrays-in-ruby-by-unique-key/54286098#54286098", "title": "Merge two arrays in Ruby by unique key", "body": "<pre><code>keyValueList\n.group_by(&amp;:first)\n.transform_values{|a| a.map(&amp;:last)}\n.to_a\n# =&gt; [\n#  [\"a\", [[1, 2, 3], [4, 5, 6]]],\n#  [\"b\", [[5, \"a\", 3], [\"test\", 4, 3]]],\n#  [\"c\", [[1, \"number\", 110]]]\n# ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1548063963, "last_edit_date": 1548063963, "creation_date": 1548063029, "answer_id": 54286897, "question_id": 54285883, "link": "https://stackoverflow.com/questions/54285883/merge-two-arrays-in-ruby-by-unique-key/54286897#54286897", "title": "Merge two arrays in Ruby by unique key", "body": "<p>Even though it does not appear in the expected result, I'd also take <code>keyList</code> into account, just in case, so:</p>\n\n<pre><code>keyList\n.each_with_object({}) { |k, h| h[k] = keyValueList.select { |x, y| x == k }.map(&amp;:last) }\n.to_a\n\n#=&gt; [[\"a\", [[1, 2, 3], [4, 5, 6]]], [\"b\", [[5, \"a\", 3], [\"test\", 4, 3]]], [\"c\", [[1, \"number\", 110]]], [\"d\", []]]\n</code></pre>\n\n<p>To get rid of <code>[\"d\", []]</code>, just append <code>.reject{ |e| e.last.empty? }</code>.</p>\n"}], "owner": {"reputation": 998, "user_id": 5134285, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/S6hY7.png?s=128&g=1", "display_name": "GeoCom", "link": "https://stackoverflow.com/users/5134285/geocom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "accepted_answer_id": 54285950, "answer_count": 4, "score": 1, "last_activity_date": 1548064762, "creation_date": 1548059152, "last_edit_date": 1548060464, "question_id": 54285883, "link": "https://stackoverflow.com/questions/54285883/merge-two-arrays-in-ruby-by-unique-key", "title": "Merge two arrays in Ruby by unique key", "body": "<p>How can I merge two arrays with the unique <code>key</code>:</p>\n\n<pre><code>keyList = [\"a\", \"b\", \"c\", \"d\"]\n\nkeyValueList = [\n  [\"a\", [1, 2, 3]],\n  [\"a\", [4, 5, 6]],\n  [\"b\", [5, \"a\", 3]],\n  [\"b\", [\"test\", 4, 3]],\n  [\"c\", [1, \"number\", 110]]\n]\n</code></pre>\n\n<p>to get the following?</p>\n\n<pre><code>[\n  [\"a\", [[1, 2, 3], [4, 5, 6]]],\n  [\"b\", [[5, \"a\", 3], [\"test\", 4, 3]]],\n  [\"c\", [[1, \"number\", 110]]]\n]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1548054753, "post_id": 54284955, "comment_id": 95391170, "body": "Please add code for <code>image</code> model and controller and view also (form)."}, {"owner": {"reputation": 1242, "user_id": 9143792, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-r1NgoEQ9O4c/AAAAAAAAAAI/AAAAAAAAAKU/6HG1GD3lD_Q/photo.jpg?sz=128", "display_name": "JIJOMON K.A", "link": "https://stackoverflow.com/users/9143792/jijomon-k-a"}, "edited": false, "score": 0, "creation_date": 1548054978, "post_id": 54284955, "comment_id": 95391252, "body": "The question doesn&#39;t appear to include any attempt at all to solve the problem.StackOverflow expects you to <a href=\"https://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\">try to solve your own problem first</a>, as your attempts help us to better understand what you want. Please edit the question to show what you&#39;ve tried, and show a specific roadblock you&#39;re running into with a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example. For more information, please see <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 2, "creation_date": 1548055054, "post_id": 54284955, "comment_id": 95391289, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2515931/how-can-i-download-a-file-from-a-url-and-save-it-in-rails\">How can I download a file from a URL and save it in Rails?</a>"}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1548058877, "post_id": 54284955, "comment_id": 95392690, "body": "In form submitting action get inserted URL and then apply logic to download it."}, {"owner": {"reputation": 57, "user_id": 10925956, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_atvgIrdQ8Q/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZeCw5sKRGBZn915AJsSKvLo113tQ/mo/photo.jpg?sz=128", "display_name": "raj D", "link": "https://stackoverflow.com/users/10925956/raj-d"}, "edited": false, "score": 0, "creation_date": 1548059923, "post_id": 54284955, "comment_id": 95393157, "body": "&lt;%= form_for(@image, url: images_path, method: :get ) do |f| %&gt; &lt;%= f.text_field :image_url %&gt; &lt;%=f.submit%&gt; &lt;% end %&gt;"}, {"owner": {"reputation": 57, "user_id": 10925956, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_atvgIrdQ8Q/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZeCw5sKRGBZn915AJsSKvLo113tQ/mo/photo.jpg?sz=128", "display_name": "raj D", "link": "https://stackoverflow.com/users/10925956/raj-d"}, "edited": false, "score": 0, "creation_date": 1548059991, "post_id": 54284955, "comment_id": 95393183, "body": "it get url but it not download image to local disk"}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1548060140, "post_id": 54284955, "comment_id": 95393238, "body": "Your index action does not have any logic to download image from form. Why did you add logic with static content in model ?"}], "answers": [{"tags": [], "owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1548068941, "last_edit_date": 1548068941, "creation_date": 1548063708, "answer_id": 54287107, "question_id": 54284955, "link": "https://stackoverflow.com/questions/54284955/how-can-i-download-image-from-url-in-rails-using-and-save-it-to-local-diskcompu/54287107#54287107", "title": "How can I download image from URL in rails using and save it to local disk(computer)?", "body": "<p>Try with this</p>\n\n<p>ImagesController</p>\n\n<pre><code>require 'open-uri'\n\ndef get_image_url\nend\n\ndef download_image\n  read_image = open(params[:image_url]).read\n  File.open('/home/documents/image/image.png', 'wb') do |file|\n    file.write read_image\n  end\n  redirect_to root_path\nend\n</code></pre>\n\n<p>Create a new file in your images view\n<code>get_image_url.html.erb</code></p>\n\n<pre><code>&lt;%= form_tag(\"/images/download_image\", method: \"post\") do  %&gt;\n  &lt;%= label_tag :image_url %&gt;\n  &lt;%= text_field_tag :image_url %&gt;\n  &lt;%= submit_tag 'Download' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><code>routes.rb</code></p>\n\n<pre><code>post 'images/download_image'\nget 'images/get_image_url'\n</code></pre>\n\n<blockquote>\n  <p>Note: If you want to give different name to images make a method and pass it at image name and modify code (action name and files) according to your need.</p>\n</blockquote>\n\n<p><b>Edit:</b>\nTo get current folder path</p>\n\n<p><code>pwd</code></p>\n"}], "owner": {"reputation": 57, "user_id": 10925956, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_atvgIrdQ8Q/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZeCw5sKRGBZn915AJsSKvLo113tQ/mo/photo.jpg?sz=128", "display_name": "raj D", "link": "https://stackoverflow.com/users/10925956/raj-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2134, "favorite_count": 1, "accepted_answer_id": 54287107, "answer_count": 1, "score": 5, "last_activity_date": 1548068941, "creation_date": 1548054506, "last_edit_date": 1548058770, "question_id": 54284955, "link": "https://stackoverflow.com/questions/54284955/how-can-i-download-image-from-url-in-rails-using-and-save-it-to-local-diskcompu", "title": "How can I download image from URL in rails using and save it to local disk(computer)?", "body": "<p>I have a form to add image url <a href=\"https://i.stack.imgur.com/zHpJ0.png\" rel=\"noreferrer\">form</a>,\nIf user adds image url I want to download the image and save to local disk(home/documents/image) </p>\n\n<p>I create image model and controller..</p>\n\n<p>need help pls</p>\n\n<p>in image model</p>\n\n<pre><code>class Image &lt; ApplicationRecord\n\n    has_one_attached :image\n    require 'open-uri'\n    image = open('http://example.com/image.png')\n    IO.copy_stream(image, '~/home/Documents/Images/local_image.png')\n\nend\n</code></pre>\n\n<p>in image controller</p>\n\n<pre><code>class ImagesController &lt; ApplicationController \n\n    def index\n      @image = Image.new\n    end\n\nend\n</code></pre>\n\n<p>in image/index.html.erb</p>\n\n<pre><code>&lt;%= form_for(@image, url: images_path) do |f| %&gt;\n  &lt;%= f.text_field :image_url %&gt;\n  &lt;%=f.submit%&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>but getting error</p>\n\n<pre><code>OpenURI::HTTPError in ImagesController#index 404 not found\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548052525, "post_id": 54284554, "comment_id": 95390367, "body": "When you collect a customer\u2019s payment information, a Stripe token is created. This token can only be used once, but that doesn\u2019t mean you have to request your customer\u2019s card details for every payment."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548052562, "post_id": 54284554, "comment_id": 95390373, "body": "If you do not save card information, then you have to provide detail every time you make payment."}, {"owner": {"reputation": 423, "user_id": 3595470, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/aa6a1b78beda706c1fbd8e5f5d68ddfe?s=128&d=identicon&r=PG&f=1", "display_name": "Karthick", "link": "https://stackoverflow.com/users/3595470/karthick"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 1, "creation_date": 1548054294, "post_id": 54284554, "comment_id": 95390997, "body": "@ray, I agree your point but I have to know who has made payment so in this case, I have to send the stripe token with customer id as well right. Pls check the link <a href=\"https://stackoverflow.com/questions/34415987/stripe-payment-getting-error-as-customer-cus-does-not-have-a-linked-card\" title=\"stripe payment getting error as customer cus does not have a linked card\">stackoverflow.com/questions/34415987/&hellip;</a>. I was not able to send the stripe token with customer id and if I do it then it throws an error."}, {"owner": {"reputation": 666, "user_id": 1270929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6136fe60f32b1057c392250f3f17b620?s=128&d=identicon&r=PG", "display_name": "wsw", "link": "https://stackoverflow.com/users/1270929/wsw"}, "edited": false, "score": 0, "creation_date": 1548063849, "post_id": 54284554, "comment_id": 95395097, "body": "Hi @Karthick, When creating charge, it is required that customer param is used Together with a card/src id &quot;Saved&quot; to the customer record.  Saying that, there are two ways to create a charge: Firstly, create charge with the token without using customer; Secondly, save the token (AKA the card) to the customer, and then call the the charge create function with cust_id and source id."}], "answers": [{"tags": [], "owner": {"reputation": 3169, "user_id": 9769731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f45dd611cc4ebd5218b399c926da68b?s=128&d=identicon&r=PG&f=1", "display_name": "karllekko", "link": "https://stackoverflow.com/users/9769731/karllekko"}, "is_accepted": false, "score": 1, "last_activity_date": 1548063855, "creation_date": 1548063855, "answer_id": 54287150, "question_id": 54284554, "link": "https://stackoverflow.com/questions/54284554/make-stripe-payment-without-card-saving/54287150#54287150", "title": "Make stripe payment without card saving", "body": "<p>If you don't want to use a customer you don't have to, just charge the payment token directly and omit the <code>customer</code> argument : </p>\n\n<pre><code>Stripe::Charge.create(\n  amount: amount_in_cents, \n  currency: currency_code,\n  source: stripe_token\n)\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 3595470, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/aa6a1b78beda706c1fbd8e5f5d68ddfe?s=128&d=identicon&r=PG&f=1", "display_name": "Karthick", "link": "https://stackoverflow.com/users/3595470/karthick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1548105005, "creation_date": 1548052371, "last_edit_date": 1548105005, "question_id": 54284554, "link": "https://stackoverflow.com/questions/54284554/make-stripe-payment-without-card-saving", "title": "Make stripe payment without card saving", "body": "<p>I have read most of the stripe payment things. They told that first add a card to the customer in stripe means save the card to the customer then make payment. But my requirement makes the payment using the card and no need to save the card details in the stripe.</p>\n\n<p>Below see the code I have passed customer id and stripe token instead of a card id(card_****)</p>\n\n<pre><code>Stripe::Charge.create(\n  amount: amount_in_cents, \n  currency: currency_code,\n  customer: stripe_customer_id,\n  source: stripe_token\n)\n</code></pre>\n\n<p>But it throws an error </p>\n\n<blockquote>\n  <p>Getting Error as Customer cus_***** does not have a linked card with\n  ID tok_*****</p>\n</blockquote>\n\n<p>I have read the link <a href=\"https://stackoverflow.com/questions/34415987/stripe-payment-getting-error-as-customer-cus-does-not-have-a-linked-card\">Stripe Payment: Getting Error as Customer cus_***** does not have a linked card with ID tok_*****</a> and It told if you are going use both params customer and source then the source should be card id(card_****). Is there any alternate solution how to use?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "dashing"], "comments": [{"owner": {"reputation": 2000, "user_id": 952740, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d758ce8171d8e74b9c5f5a2e701f1b9b?s=128&d=identicon&r=PG", "display_name": "Nick M", "link": "https://stackoverflow.com/users/952740/nick-m"}, "edited": false, "score": 0, "creation_date": 1548046751, "post_id": 54283604, "comment_id": 95388868, "body": "You might be better off picking up a template from bootstrap gallery and setting it up in your rails app."}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1548051455, "post_id": 54283604, "comment_id": 95390041, "body": "Could you mount it as an engine within your Rails app?"}], "owner": {"reputation": 21, "user_id": 10942876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48521b80ccd76c50a3b37e9d1b707306?s=128&d=identicon&r=PG&f=1", "display_name": "mikle", "link": "https://stackoverflow.com/users/10942876/mikle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1548050323, "creation_date": 1548045643, "last_edit_date": 1548050323, "question_id": 54283604, "link": "https://stackoverflow.com/questions/54283604/merge-smashing-into-an-existing-rails-application", "title": "Merge smashing into an existing rails application", "body": "<p>I'm setting up a dashboard using <a href=\"https://smashing.github.io/\" rel=\"nofollow noreferrer\">smashing</a> however I was wondering if it were possible to integrate it into my existing rails application and keep it all on the same web server rather than having two set up and doing API calls to one another?</p>\n\n<p>I was also wondering if it would be possible for me to access the methods within my rails project from my dashboard?</p>\n\n<p>I attempted to integrate this gem <a href=\"https://github.com/gottfrois/dashing-rails\" rel=\"nofollow noreferrer\">dashing-rails</a>  but can't get it to style or update properly as the smashing dashboard does. </p>\n\n<p>I have methods within ruby that compute the dashboard metrics I need, ideally I would be able to access them but if not I don't mind making API calls. I would like to have my existing rails application and dashboard on the same server.</p>\n"}, {"tags": ["ruby", "regex", "substring", "substitution"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548040665, "post_id": 54283040, "comment_id": 95387813, "body": "<code>line.sub(foo_string, bar)</code> isn&#39;t saved. Perhaps you want something like <code>IO.foreach(&#39;site_info.txt&#39;,&#39;a+&#39;).map do |line|...</code>. I can&#39;t say for sure because you haven&#39;t stated what you are trying to accomplish."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548041033, "post_id": 54283040, "comment_id": 95387875, "body": "Oh you want to modify an existing file. @Amadan explains how to do that. You still need to edit your question to explain--at the beginning--what you are trying to do."}, {"owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548041178, "post_id": 54283040, "comment_id": 95387901, "body": "@CarySwoveland clarified my intention, which is to modify a line of text in an existing file."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "edited": false, "score": 0, "creation_date": 1548040896, "post_id": 54283097, "comment_id": 95387856, "body": "yes I anticipated my regrex might be off.  More important: I hoped to circumvent the &quot;big problem&quot; with <code>.sub</code> Any thoughts to workarounds? -it&#39;s sort of drained me today."}, {"owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "edited": false, "score": 0, "creation_date": 1548041284, "post_id": 54283097, "comment_id": 95387913, "body": "I still haven&#39;t quite grasped bang methods quite yet (! results in permanent change ). can you point to concise documentation?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548041688, "post_id": 54283097, "comment_id": 95387974, "body": "foo, open a new file for writing before <code>IO.foreach...</code>. You might make both filenames arguments of the method. If you want to replace the old file with the new one, do that after, outside this method. Then right before <code>foreach</code>&#39;s <code>end</code> write <code>line</code> to the output file. btw, <code>foreach</code> reads an input file, so <code>IO.foreach(fname) { |...]</code> is sufficient (no <code>&#39;a+</code>&#39;)."}, {"owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "edited": false, "score": 0, "creation_date": 1548044649, "post_id": 54283097, "comment_id": 95388455, "body": "@Amadan if I may ask 1) the benefit of <code>raise subclass</code> vs <code>return [string]</code>? 2.) if I am flipping back and forth between files, must I always swap the text files in the <code>.rb</code> source code? I ask because the info for <code>item</code> will change occasionally.  In essence this txt file serves as a bare-knuckle database I&#39;ve created..."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1548045309, "post_id": 54283097, "comment_id": 95388596, "body": "1) A function should ideally do one thing. If it is changing a file, it should not be worrying about error messages. If it is printing errors to the user, it shouldn&#39;t be changing files. Besides, what if a function wants to return a string, but can have an error? 2) What do you mean, flipping back and forth? And if you want a bare-knuckle database, use SQLite3 or a text file with YAML or JSON, no reason to reinvent the wheel. :)"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 3, "last_activity_date": 1548042188, "last_edit_date": 1548042188, "creation_date": 1548040670, "answer_id": 54283097, "question_id": 54283040, "link": "https://stackoverflow.com/questions/54283040/how-to-overwrite-part-of-a-line-in-a-txt-file-with-regex-and-sub-in-ruby/54283097#54283097", "title": "how to overwrite part of a line in a txt file with regex and .sub in ruby", "body": "<p>Tiny problem: Your regular expression does not do what you think. <code>/[^\"label2: \"]*\\z/</code> means: any number of characters at the end of line that are not <code>a</code>, <code>b</code>, <code>e</code>, <code>l</code>, <code>\"</code>, space, colon or <code>2</code> (see <a href=\"https://ruby-doc.org/core-2.6/Regexp.html#class-Regexp-label-Character+Classes\" rel=\"nofollow noreferrer\">Character classes</a>). And <code>scan</code> returns an array, which <code>sub</code> doesn't work with. But that doesn't really matter, because...</p>\n\n<p>Small problem: <code>line.sub(foo_string, bar)</code> doesn't do anything. It returns a changed string, but you don't assign it to anything and it gets thrown away. <code>line.sub!(foo_string, bar)</code> would change <code>line</code> itself, but that leads us to...</p>\n\n<p>Big problem: You cannot just change the read line and expect it to change in the file itself. It's like reading a book, thinking you could write a line better, and expecting it to change the book. The way to change a line in a text file is to read from one file <em>and copy what you read to another</em>. If you change a line between reading and writing, the newly written copy will be different. At the end, you can rename the new file to the old file (which will delete the old file and replace it atomically with the new one).</p>\n\n<p>EDIT: Here's some code. First, I dislike <code>IO.foreach</code> as I like to control the iteration myself (and IMO, <code>IO.foreach</code> is not readable as <code>IO#each_line</code>). In the regular expression, I used lookbehind to find the label without including it into the match, so I can replace just the value; I changed to <code>\\Z</code> for a similar reason, to exclude the newline from the match. You should not be returning error messages from functions, that's what exceptions are for. I changed simple <code>include?</code> to <code>#start_with?</code> because your <code>item</code> might be found elsewhere in the line when we wouldn't want to trigger the change.</p>\n\n<pre><code>class FileNotFoundException &lt; RuntimeError; end\n\ndef replace_info(item, bar)\n  # check if file exists\n  raise FileNotFoundException unless File.exist?('site_info.txt')\n\n  # rewrite the file\n  File.open('site_info.txt.bak', 'wt') do |w|\n    File.open('site_info.txt', 'rt') do |r|\n      r.each_line do |line|\n        if line.start_with?(\"[#{item}]\")\n          line.sub!(/(?&lt;=label2: ).*?\\Z/, bar)\n        end\n        w.write(line)\n      end\n    end\n  end\n\n  # replace the old file\n  File.rename('site_info.txt.bak', 'site_info.txt')\nend\n\nreplace_info(\"item\", \"bar\")\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 54283097, "answer_count": 1, "score": 1, "last_activity_date": 1548042188, "creation_date": 1548040091, "last_edit_date": 1548041122, "question_id": 54283040, "link": "https://stackoverflow.com/questions/54283040/how-to-overwrite-part-of-a-line-in-a-txt-file-with-regex-and-sub-in-ruby", "title": "how to overwrite part of a line in a txt file with regex and .sub in ruby", "body": "<p>I have the following layout in a txt file.</p>\n\n<p><code>[item] label1: comment1 | label2: foo</code></p>\n\n<p>I have the code below. The goal is to <strong>modify part of an existing line in text</strong></p>\n\n<pre><code>def replace_info(item, bar)\nreturn \"please create a file first\" unless File.exist?('site_info.txt')\n    IO.foreach('site_info.txt','a+') do |line|\n        if line.include?(item)\n            #regex should find the data from the whitespace after the colon all the                     way to the end.\n            #this should be equivalent to foo\n            foo_string = line.scan(/[^\"label2: \"]*\\z/)\n            line.sub(foo_string, bar)\n            end\n        end\nend\n</code></pre>\n\n<p>Please advise. Perhaps my <code>regrex</code> is off, but <code>.sub</code> is correct, but I cannot overwrite <code>line</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548047896, "post_id": 54282979, "comment_id": 95389103, "body": "When do you get error? on form submit or inside controller while redirect ? Use <code>pry</code> gem to debug &amp; also notice your action is trying to go Micropost#index with missing <code>tag_id</code>. Routes are improper I guess"}, {"owner": {"reputation": 880, "user_id": 9219650, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b698c5963df9e360b2e72fed0c97da7a?s=128&d=identicon&r=PG&f=1", "display_name": "Prashin Jeevaganth", "link": "https://stackoverflow.com/users/9219650/prashin-jeevaganth"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548048316, "post_id": 54282979, "comment_id": 95389191, "body": "I get error when I run <code>rails server</code> and just get to <code>0.0.0.0:3000</code>. And I dont see how <code>tag_id</code> is being used when I try to access <code>index</code>, sorry new to rails"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548048409, "post_id": 54282979, "comment_id": 95389218, "body": ":) Error is in your <code>routes.rb</code>. Ensure with complete log from where error generated"}, {"owner": {"reputation": 880, "user_id": 9219650, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b698c5963df9e360b2e72fed0c97da7a?s=128&d=identicon&r=PG&f=1", "display_name": "Prashin Jeevaganth", "link": "https://stackoverflow.com/users/9219650/prashin-jeevaganth"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548048586, "post_id": 54282979, "comment_id": 95389251, "body": "What do you mean by complete log? I&#39;m aware that it comes from <code>routes.rb</code> but don&#39;t know why it is not fed with <code>:tag</code>"}], "answers": [{"comments": [{"owner": {"reputation": 880, "user_id": 9219650, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b698c5963df9e360b2e72fed0c97da7a?s=128&d=identicon&r=PG&f=1", "display_name": "Prashin Jeevaganth", "link": "https://stackoverflow.com/users/9219650/prashin-jeevaganth"}, "edited": false, "score": 0, "creation_date": 1548085713, "post_id": 54293174, "comment_id": 95407352, "body": "Hi Helsing, appreciate your answer, but changing that didn&#39;t change my error message, but thanks for reminding me to give a code update"}, {"owner": {"reputation": 845, "user_id": 4592959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/r03zx.png?s=128&g=1", "display_name": "Helsing", "link": "https://stackoverflow.com/users/4592959/helsing"}, "reply_to_user": {"reputation": 880, "user_id": 9219650, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b698c5963df9e360b2e72fed0c97da7a?s=128&d=identicon&r=PG&f=1", "display_name": "Prashin Jeevaganth", "link": "https://stackoverflow.com/users/9219650/prashin-jeevaganth"}, "edited": false, "score": 0, "creation_date": 1548086151, "post_id": 54293174, "comment_id": 95407629, "body": "I see. It seems like there&#39;s an issue with the tags. I&#39;ll take a look later today if still not resolved."}, {"owner": {"reputation": 880, "user_id": 9219650, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b698c5963df9e360b2e72fed0c97da7a?s=128&d=identicon&r=PG&f=1", "display_name": "Prashin Jeevaganth", "link": "https://stackoverflow.com/users/9219650/prashin-jeevaganth"}, "edited": false, "score": 0, "creation_date": 1548086298, "post_id": 54293174, "comment_id": 95407705, "body": "Thanks a lot for the help in advance."}, {"owner": {"reputation": 845, "user_id": 4592959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/r03zx.png?s=128&g=1", "display_name": "Helsing", "link": "https://stackoverflow.com/users/4592959/helsing"}, "reply_to_user": {"reputation": 880, "user_id": 9219650, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b698c5963df9e360b2e72fed0c97da7a?s=128&d=identicon&r=PG&f=1", "display_name": "Prashin Jeevaganth", "link": "https://stackoverflow.com/users/9219650/prashin-jeevaganth"}, "edited": false, "score": 0, "creation_date": 1548108794, "post_id": 54293174, "comment_id": 95417395, "body": "@micropost  = current_user.microposts.build gives you a new micropost without any tags so that could be why you&#39;re seeing that. There may be multiple issues, so as soon as you clear one up you run into a different error."}, {"owner": {"reputation": 880, "user_id": 9219650, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b698c5963df9e360b2e72fed0c97da7a?s=128&d=identicon&r=PG&f=1", "display_name": "Prashin Jeevaganth", "link": "https://stackoverflow.com/users/9219650/prashin-jeevaganth"}, "edited": false, "score": 0, "creation_date": 1548118975, "post_id": 54293174, "comment_id": 95420060, "body": "Thanks for your suggestions, I do run into another error of <code>undefined method to_key for #&lt;Micropost::ActiveRecord_Associations_CollectionProxy:0x000&zwnj;&#8203;07fd2668ec4d0</code>, will post it in another question linking back to this post"}, {"owner": {"reputation": 845, "user_id": 4592959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/r03zx.png?s=128&g=1", "display_name": "Helsing", "link": "https://stackoverflow.com/users/4592959/helsing"}, "reply_to_user": {"reputation": 880, "user_id": 9219650, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b698c5963df9e360b2e72fed0c97da7a?s=128&d=identicon&r=PG&f=1", "display_name": "Prashin Jeevaganth", "link": "https://stackoverflow.com/users/9219650/prashin-jeevaganth"}, "edited": false, "score": 0, "creation_date": 1548135218, "post_id": 54293174, "comment_id": 95423601, "body": "Alright, yea that is now beyond the scope of this question. Glad I was able to help you. If my solution solved your issue make sure to select it as best answer so that people know the issue here was already solved."}], "tags": [], "owner": {"reputation": 845, "user_id": 4592959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/r03zx.png?s=128&g=1", "display_name": "Helsing", "link": "https://stackoverflow.com/users/4592959/helsing"}, "is_accepted": false, "score": 1, "last_activity_date": 1548109204, "last_edit_date": 1548109204, "creation_date": 1548084847, "answer_id": 54293174, "question_id": 54282979, "link": "https://stackoverflow.com/questions/54282979/no-route-matches-leading-to-actioncontroller-urlgenerationerror/54293174#54293174", "title": "no route matches leading to ActionController UrlGenerationError", "body": "<pre><code>ActionController::UrlGenerationError in StaticPages#home\nNo route matches {:action=&gt;\"index\", :controller=&gt;\"microposts\", :tag=&gt;nil}, missing required keys: [:tag]\n</code></pre>\n\n<p><strong>The problem is you don't have an index route for your microposts.</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  root   'static_pages#home'\n  get    '/readme',    to: 'static_pages#readme'\n  get    '/about',   to: 'static_pages#about'\n  get    '/contact', to: 'static_pages#contact'\n  get    '/signup',  to: 'users#new'\n  post    '/signup',  to: 'users#create'\n  get    '/login',    to: 'sessions#new'\n  post   '/login',    to: 'sessions#create'\n  delete '/logout',   to: 'sessions#destroy'\n  get   '/users/admin',     to: 'users#admin'\n  resources :users\n  resources :microposts,          only: [:create, :destroy] #Here's the problem\n  get 'tags/:tag', to: 'microposts#index', as: :tag\nend\n</code></pre>\n\n<p><strong>change to:</strong> </p>\n\n<pre><code>resources :microposts, only: [:index, :create, :destroy]\n</code></pre>\n\n<p>EDIT:</p>\n\n<p><strong>Another problem is</strong></p>\n\n<pre><code>if logged_in?\n  @micropost  = current_user.microposts.build #this just returns a new 1\n  @feed_items = current_user.feed.paginate(page: params[:page])\nend\n</code></pre>\n\n<p><strong>You probably want something like:</strong></p>\n\n<pre><code>if logged_in?\n  @microposts  = current_user.microposts\n  @feed_items = Micropost.all.paginate(page: params[:page])\nend\n</code></pre>\n\n<p>This will give you all the user's microposts. Then you iterate through them in your views.</p>\n"}, {"tags": [], "owner": {"reputation": 880, "user_id": 9219650, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b698c5963df9e360b2e72fed0c97da7a?s=128&d=identicon&r=PG&f=1", "display_name": "Prashin Jeevaganth", "link": "https://stackoverflow.com/users/9219650/prashin-jeevaganth"}, "is_accepted": true, "score": 1, "last_activity_date": 1548427439, "creation_date": 1548427439, "answer_id": 54367537, "question_id": 54282979, "link": "https://stackoverflow.com/questions/54282979/no-route-matches-leading-to-actioncontroller-urlgenerationerror/54367537#54367537", "title": "no route matches leading to ActionController UrlGenerationError", "body": "<p>I actually found the cause of the problem to be quite simple. After running <code>rails console</code>, it seems like my db:seed wasn't even raked properly, causing my tags to have <code>nil</code> names and causing me to be unable to find the route. Looking further into <a href=\"https://stackoverflow.com/questions/27392659/rails-console-is-adding-nil-instead-of-values\">Rails console is adding nil instead of values</a> to solve my seed adding problem, I realised I have added <code>attr_accessor</code>, forgetting that normal attributes should be added via the command line into the Migration instead of writing into the Model directly. Removing it according to the post updates my database and the code works.</p>\n"}], "owner": {"reputation": 880, "user_id": 9219650, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b698c5963df9e360b2e72fed0c97da7a?s=128&d=identicon&r=PG&f=1", "display_name": "Prashin Jeevaganth", "link": "https://stackoverflow.com/users/9219650/prashin-jeevaganth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 1, "accepted_answer_id": 54367537, "answer_count": 2, "score": 1, "last_activity_date": 1548427439, "creation_date": 1548039526, "last_edit_date": 1548085641, "question_id": 54282979, "link": "https://stackoverflow.com/questions/54282979/no-route-matches-leading-to-actioncontroller-urlgenerationerror", "title": "no route matches leading to ActionController UrlGenerationError", "body": "<p>I have created a ToDoList based off Hartl's tutorial, and following a <a href=\"https://www.youtube.com/watch?v=uBa2qs9CFZQ\" rel=\"nofollow noreferrer\">video</a> and <a href=\"https://medium.com/@sherzelsmith/add-a-filtering-multiple-tag-system-with-autocomplete-to-your-rails-model-in-rails-5-1bf88cd53e9\" rel=\"nofollow noreferrer\">worded tutorial</a> to add a tagging system. I have followed till Section 10, where they asked me to modify my <code>new.html.erb</code> file to the code as shown on the source. To improvise for structural differences in code, I would edit some other files, like in this case, my <code>micropost_form partial</code> instead. Occasionally, I alternated between the code in the video and code in the worded tutorial because some of them would produce error messages or would not produce the required functionality. Here are the files that I think are involved in this question.</p>\n\n<p>_micropost_form.html.erb(The filling up form that would be displayed on the user's home page)</p>\n\n<pre><code>&lt;%= simple_form_for @micropost do |f| %&gt;\n  &lt;%= render 'shared/error_messages', object: f.object %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :content %&gt;&lt;br /&gt;\n    &lt;%= f.text_area :content, placeholder: \"Add new task...\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :tag_list, \"Tags (separated by commas)\" %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :tag_list %&gt; \n  &lt;/div&gt;\n  &lt;%= f.submit \"Add Task\", class: \"btn btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>micropost.html.erb(for showing the individual micro posts)</p>\n\n<pre><code>&lt;li id=\"micropost-&lt;%= micropost.id %&gt;\"&gt;\n  &lt;%= link_to gravatar_for(micropost.user, size: 50), micropost.user %&gt;\n  &lt;span class=\"user\"&gt;&lt;%= link_to micropost.user.name, user_path(micropost.user) %&gt;&lt;/span&gt;\n  &lt;span class=\"content\"&gt;&lt;%= micropost.content %&gt;&lt;/span&gt;\n  &lt;p&gt;&lt;small&gt;Tags: &lt;%= raw micropost.tags.map(&amp;:name).map { |t| link_to t, tag_path(t) }.join(', ') %&gt;&lt;/small&lt;/p&gt;\n  &lt;span class=\"timestamp\"&gt;\n    Posted &lt;%= time_ago_in_words(micropost.created_at) %&gt; ago.\n    &lt;% if current_user?(micropost.user) %&gt;\n      &lt;%= link_to \"Done\", micropost_path(micropost), method: :delete, data: { confirm: \"Keep up the good work!\" } %&gt;\n    &lt;% end %&gt;\n  &lt;/span&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :users\n  resources :microposts          \n\n  get    '/about',   to: 'static_pages#about'\n  get    '/contact', to: 'static_pages#contact'\n  get    '/signup',  to: 'users#new'\n  post    '/signup',  to: 'users#create'\n  get    '/login',    to: 'sessions#new'\n  post   '/login',    to: 'sessions#create'\n  delete '/logout',   to: 'sessions#destroy'\n  get   '/users/admin',     to: 'users#admin'\n\n  get 'tags/:tag', to: 'microposts#index', as: :tag\n\n  root   'static_pages#home'\nend\n</code></pre>\n\n<p>micropost_controller</p>\n\n<pre><code>class MicropostsController &lt; ApplicationController\n  before_action :logged_in_user, only: [:create, :destroy]\n  before_action :correct_user,   only: :destroy\n\n\n  def index\n    params[:tag] ? @microposts = Micropost.tagged_with(params[:tag]) : @microposts = Micropost.all\n  end\n\n\n  def show\n    @micropost = Micropost.find(params[:id])\n  end\n\n  def create\n    @micropost = current_user.microposts.build(micropost_params)\n    if @micropost.save\n      flash[:success] = \"Micropost created!\"\n      redirect_to root_url\n    else\n      @feed_items = []\n      render 'static_pages/home'\n    end\n  end\n\n  def destroy\n    @micropost.destroy\n    flash[:success] = \"You have deleted a task!\"\n    redirect_to request.referrer || root_url\n  end\n\n  private\n\n    def micropost_params\n      params.require(:micropost).permit(:content, :tag_list, :tag, \n        {tag_ids: [] }, :tag_ids)\n    end\n\n    def correct_user\n      @micropost = current_user.microposts.find_by(id: params[:id])\n      redirect_to root_url if @micropost.nil?\n    end\nend\n</code></pre>\n\n<p>Micropost model</p>\n\n<pre><code>class Micropost &lt; ApplicationRecord\n  belongs_to :user\n  has_many :taggings\n  has_many :tags, through: :taggings\n  default_scope -&gt; { order(created_at: :desc) }\n  validates :user_id, presence: true\n  validates :content, presence: true, length: {maximum: 140 }\n  attr_accessor :tag_list\n\n\n\n  def self.tagged_with(name)\n    Tag.find_by!(name: name).microposts\n  end\n\n  def self.tag_counts\n    Tag.select('tags.*, count(taggings.tag_id) as count')\n    .joins(:taggings).group('taggings.tag_id')\n  end\n\n  def tag_list\n    tags.map(&amp;:name).join(', ')\n  end\n\n  def tag_list=(names)\n    self.tags = names.split(',').map do |n|\n      Tag.where(name: n.strip).first_or_create!\n    end\n  end\nend\n</code></pre>\n\n<p>Tag model</p>\n\n<pre><code>class Tag &lt; ApplicationRecord\n    attr_accessor :name\n  has_many :taggings\n  has_many :microposts, through: :taggings\nend\n</code></pre>\n\n<p>static_pages controller</p>\n\n<pre><code>class StaticPagesController &lt; ApplicationController\n  def home\n    if logged_in?\n      @micropost  = current_user.microposts.build\n      @feed_items = current_user.feed.paginate(page: params[:page])\n    end\n  end\n\n  def help\n  end\n\n  def about\n  end\n\n  def contact\n  end\nend\n</code></pre>\n\n<p>feed.html.erb</p>\n\n<pre><code>&lt;% if @feed_items.any? %&gt;\n  &lt;ol class=\"microposts\"&gt;\n    &lt;%= render @feed_items %&gt;\n  &lt;/ol&gt;\n  &lt;%= will_paginate @feed_items %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I got the following error </p>\n\n<pre><code>ActionController::UrlGenerationError in StaticPages#home\nNo route matches {:action=&gt;\"index\", :controller=&gt;\"microposts\", :tag=&gt;nil}, missing required keys: [:tag]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/HffSa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HffSa.png\" alt=\"Error highlighted\"></a></p>\n\n<pre><code>app/views/microposts/_micropost.html.erb:5:in `block in _app_views_microposts__micropost_html_erb___3891111682689684005_70324923859580'\napp/views/microposts/_micropost.html.erb:5:in `map'\napp/views/microposts/_micropost.html.erb:5:in `_app_views_microposts__micropost_html_erb___3891111682689684005_70324923859580'\napp/views/shared/_feed.html.erb:3:in `_app_views_shared__feed_html_erb__3168328449514417483_70324923896060'\napp/views/static_pages/home.html.erb:13:in `_app_views_static_pages_home_html_erb__3511776991923566869_70324898321240'\n</code></pre>\n\n<p>Can anyone suggest what might be wrong here? Please let me know if more information is needed.</p>\n\n<p>Update: I have implemented some of the changes provided by the answer below, but still has not understood why <code>:tag</code> is not detected, and why the code in red is actually highlighted.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "helper"], "answers": [{"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 1, "last_activity_date": 1548049398, "creation_date": 1548049398, "answer_id": 54284045, "question_id": 54282603, "link": "https://stackoverflow.com/questions/54282603/difference-between-stating-helper-methods-in-helper-and-controller-files/54284045#54284045", "title": "Difference between stating helper methods in helper and controller files", "body": "<p>The method <strong>helper_method</strong> is to explicitly share some methods defined in the controller to make them available for the view.</p>\n\n<p>This is used for any method that you need to access from both <strong>controllers</strong> and <strong>helpers/views</strong> (standard helper methods are not available in controllers).</p>\n"}, {"tags": [], "owner": {"reputation": 845, "user_id": 4592959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/r03zx.png?s=128&g=1", "display_name": "Helsing", "link": "https://stackoverflow.com/users/4592959/helsing"}, "is_accepted": false, "score": 0, "last_activity_date": 1548085202, "creation_date": 1548085202, "answer_id": 54293260, "question_id": 54282603, "link": "https://stackoverflow.com/questions/54282603/difference-between-stating-helper-methods-in-helper-and-controller-files/54293260#54293260", "title": "Difference between stating helper methods in helper and controller files", "body": "<p>As ray said. You only want to use the <strong>helper_method</strong> when you really need to use it in <strong>both</strong> the controllers and helpers/views.</p>\n\n<p>Generally, you want to use controller concerns and the helpers(views) for the respective methods as that's the convention.</p>\n"}], "owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1548085202, "creation_date": 1548035146, "last_edit_date": 1548042032, "question_id": 54282603, "link": "https://stackoverflow.com/questions/54282603/difference-between-stating-helper-methods-in-helper-and-controller-files", "title": "Difference between stating helper methods in helper and controller files", "body": "<p>In Ruby on Rails we can state a helper method in controllers e.g.</p>\n\n<pre><code># app/controllers/my_controller.rb\n\nclass MyController &lt; ApplicationController\n  helper_method :helper_method_name\n\n  ...\n\n  private\n\n  def helper_method_name\n    ...\n  end\nend\n</code></pre>\n\n<p>and in helpers e.g.</p>\n\n<pre><code># app/helpers/my_helper.rb\n\nclass MyHelper\n  def helper_method_name\n    ...\n  end\nend\n</code></pre>\n\n<p>What's the difference (in relation to access, usage, etc.)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "ruby-on-rails-5", "helper"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548049705, "post_id": 54282213, "comment_id": 95389584, "body": "You mean you are using <code>app&#47;views&#47;my1&#47;show.html.erb</code> for My2Controller?"}, {"owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548288013, "post_id": 54282213, "comment_id": 95492087, "body": "@ray I am using / would like to use just a helper method from My2Controller in <code>app&#47;views&#47;my1&#47;show.html.erb</code>."}], "answers": [{"comments": [{"owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1548032191, "post_id": 54282275, "comment_id": 95386471, "body": "Could you be more clear (e.g. including the helper back to controller, calling <code>my_helper</code> from another controller)? A more specific example would be great."}], "tags": [], "owner": {"reputation": 209, "user_id": 6164286, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GdxIL2SItVU/AAAAAAAAAAI/AAAAAAAAAKY/6vaPPw0-Yfk/photo.jpg?sz=128", "display_name": "William Tran", "link": "https://stackoverflow.com/users/6164286/william-tran"}, "is_accepted": false, "score": 0, "last_activity_date": 1548031309, "creation_date": 1548031309, "answer_id": 54282275, "question_id": 54282213, "link": "https://stackoverflow.com/questions/54282213/how-to-use-in-views-a-controller-helper-method-from-another-controller/54282275#54282275", "title": "How to use in views a controller helper method from another controller?", "body": "<p>Move your <code>my_helper</code> into a separated helper.\nand include that helper back to controller where you want to use <code>my_helper</code></p>\n\n<pre><code># app/helpers/params_helper.rb\n\nmodule ParamsHelper\n  def sort_params\n    params.permit(:sort).fetch(:sort, nil)\n  end\n  [...]\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1548033897, "post_id": 54282444, "comment_id": 95386748, "body": "Thanks, but this doesn&#39;t answer to the question&#39;s issue."}], "tags": [], "owner": {"reputation": 449, "user_id": 10739704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XmWze.jpg?s=128&g=1", "display_name": "nileshkumar", "link": "https://stackoverflow.com/users/10739704/nileshkumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1548033271, "creation_date": 1548033271, "answer_id": 54282444, "question_id": 54282213, "link": "https://stackoverflow.com/questions/54282213/how-to-use-in-views-a-controller-helper-method-from-another-controller/54282444#54282444", "title": "How to use in views a controller helper method from another controller?", "body": "<p>It's best practice to put the helper method in the helper module and use that in the controller with <code>view_context</code> as follows:</p>\n\n<pre><code>module ApplicationHelper\n  def fancy_helper(str)\n    str.titleize\n  end\nend\n\nclass MyController &lt; ApplicationController\n   def index\n     @title = view_context.fancy_helper \"dogs are awesome\"\n   end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "is_accepted": false, "score": 0, "last_activity_date": 1548034569, "creation_date": 1548034569, "answer_id": 54282554, "question_id": 54282213, "link": "https://stackoverflow.com/questions/54282213/how-to-use-in-views-a-controller-helper-method-from-another-controller/54282554#54282554", "title": "How to use in views a controller helper method from another controller?", "body": "<p>A solution is to use Ruby metaprogramming:</p>\n\n<pre><code># app/views/my1/show.html.erb\n&lt;%= My2Controller.new.send(:my_helper) %&gt;\n</code></pre>\n\n<p>But is this a good practice or there is something better?</p>\n"}, {"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1548057654, "creation_date": 1548057654, "answer_id": 54285588, "question_id": 54282213, "link": "https://stackoverflow.com/questions/54282213/how-to-use-in-views-a-controller-helper-method-from-another-controller/54285588#54285588", "title": "How to use in views a controller helper method from another controller?", "body": "<p>Add following in <code>My1Controller</code> &amp; <code>My2Controller</code>,</p>\n\n<pre><code>  include HelperMethods\n  helper_method :my_helper1\n</code></pre>\n\n<p>And add method in module defined,</p>\n\n<pre><code>module HelperMethods\n  private\n\n  def my_helper\n    \"Something from My2 controller\"\n  end\nend\n</code></pre>\n\n<p>Helper method name should be uniq which are used same controller so update name</p>\n"}], "owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1548057654, "creation_date": 1548030403, "last_edit_date": 1548032363, "question_id": 54282213, "link": "https://stackoverflow.com/questions/54282213/how-to-use-in-views-a-controller-helper-method-from-another-controller", "title": "How to use in views a controller helper method from another controller?", "body": "<p>I have two controllers having a helper method that has same name but returns different things:</p>\n\n<pre><code>class My1Controller &lt; ApplicationController\n  helper_method :my_helper\n\n  def show\n    ...\n  end\n\n\n  private\n\n  def my_helper\n    \"Something from My1 controller\"\n  end\nend\n\nclass My2Controller &lt; ApplicationController\n  helper_method :my_helper\n\n  def show\n    ...\n  end\n\n\n  private\n\n  def my_helper\n    \"Something from My2 controller\"\n  end\nend\n</code></pre>\n\n<p>In the <code>app/views/my1/show.html.erb</code> view related to <code>My1Controller</code> I would like to use the returned value of <code>my_helper</code> from <code>My2Controller</code>.</p>\n\n<p>How can I make that?</p>\n"}]